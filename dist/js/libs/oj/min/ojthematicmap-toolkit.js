/**
 * @license
 * Copyright (c) 2014, 2022, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define(["exports","ojs/ojdvt-toolkit","ojs/ojdvt-panzoomcanvas"],function(e,t,a){"use strict";window.DvtBaseMapManager?e.DvtBaseMapManager=window.DvtBaseMapManager:(e.DvtBaseMapManager={},window.DvtBaseMapManager=e.DvtBaseMapManager,e.DvtBaseMapManager._UNPROCESSED_MAPS=[[],[],[]],e.DvtBaseMapManager._UNPROCESSED_PARENT_UPDATES=[[]]),Object.assign(e.DvtBaseMapManager,{TYPE_LABELS:0,TYPE_PATH:1,TYPE_PARENTREGION_CHILDREN:2,TYPE_LABELINFO:3,TYPE_DIM:4,_INDEX:"__index",_GLOBAL_MAPS:new Object,getBaseMapDim:(a,i)=>{e.DvtBaseMapManager._processUnprocessedMaps();var r=e.DvtBaseMapManager._GLOBAL_MAPS[a][i];if(r){var s=r[e.DvtBaseMapManager.TYPE_DIM];if(s)return new t.Rectangle(s[0],s[1],s[2],s[3])}return null},getAreaLabelInfo:(t,a)=>{e.DvtBaseMapManager._processUnprocessedMaps();var i=e.DvtBaseMapManager._GLOBAL_MAPS[t][a];return i?i[e.DvtBaseMapManager.TYPE_LABELINFO]:null},getAreaIds:(t,a)=>{var i=[],r=e.DvtBaseMapManager.getAreaPaths(t,a);for(var s in r)i.push(s);return i},getAreaLabels:(t,a)=>{e.DvtBaseMapManager._processUnprocessedMaps();var i=e.DvtBaseMapManager._GLOBAL_MAPS[t][a];return i?i[e.DvtBaseMapManager.TYPE_LABELS]:null},getLongAreaLabel:(t,a,i)=>{e.DvtBaseMapManager._processUnprocessedMaps();var r,s=e.DvtBaseMapManager._GLOBAL_MAPS[t][a];return s&&(r=s[e.DvtBaseMapManager.TYPE_LABELS]),r&&r[i]?r[i][1]:null},getCityCoordinates:(a,i)=>{e.DvtBaseMapManager._processUnprocessedMaps();var r=e.DvtBaseMapManager._GLOBAL_MAPS[a];if(r){var s=r.cities;if(s){var n=s[e.DvtBaseMapManager.TYPE_PATH][i];if(n)return new t.Point(n[0],n[1])}}return null},getCityLabel:(t,a)=>{e.DvtBaseMapManager._processUnprocessedMaps();var i=e.DvtBaseMapManager._GLOBAL_MAPS[t];if(i){var r=i.cities;if(r){var s=r[e.DvtBaseMapManager.TYPE_LABELS][a];if(s)return s[1]}}return null},getAreaCenter:(a,i,r)=>{e.DvtBaseMapManager._processUnprocessedMaps();var s=e.DvtBaseMapManager._GLOBAL_MAPS[a];if(s){var n=s[i];if(n){var o=n[e.DvtBaseMapManager.TYPE_LABELINFO];if(o&&o[r]){var l=o[r][0];return t.Rectangle.create(l).getCenter()}}}return null},getAreaPaths:(t,a,i,r,s)=>{e.DvtBaseMapManager._processUnprocessedMaps();var n=e.DvtBaseMapManager._GLOBAL_MAPS[t][a],o=n[e.DvtBaseMapManager.TYPE_PATH],l=n[e.DvtBaseMapManager.TYPE_DIM];return l?e.DvtBaseMapManager._simplifyAreaPaths(o,l[2],l[3],i,r,s):o},getPathForArea:(t,a,i)=>{e.DvtBaseMapManager._processUnprocessedMaps();var r=e.DvtBaseMapManager._GLOBAL_MAPS[t][a];return r?r[e.DvtBaseMapManager.TYPE_PATH][i]:null},registerBaseMapLayer:(t,a,i,r,s,n,o,l)=>{var h=e.DvtBaseMapManager._GLOBAL_MAPS[t];h||((h=new Object)[e.DvtBaseMapManager._INDEX]=[],e.DvtBaseMapManager._GLOBAL_MAPS[t]=h);var _=h[a];_||(_=new Object,h[a]=_,null!=o&&(h[e.DvtBaseMapManager._INDEX][o]=a)),_[e.DvtBaseMapManager.TYPE_LABELS]=i,_[e.DvtBaseMapManager.TYPE_PATH]=r,_[e.DvtBaseMapManager.TYPE_PARENTREGION_CHILDREN]=s,_[e.DvtBaseMapManager.TYPE_LABELINFO]=n,_[e.DvtBaseMapManager.TYPE_DIM]=l,_[e.DvtBaseMapManager._INDEX]=o},registerResourceBundle:(t,a,i)=>{var r,s=e.DvtBaseMapManager._GLOBAL_MAPS[t];s||(s=new Object,e.DvtBaseMapManager._GLOBAL_MAPS[t]=s),(r=s[a])||(r=new Object,s[a]=r),(r=s[a])&&(r[e.DvtBaseMapManager.TYPE_LABELS]=i)},updateResourceBundle:(t,a,i)=>{var r=e.DvtBaseMapManager._GLOBAL_MAPS[t];if(r){var s=r[a];if(s)for(var n in i)s[e.DvtBaseMapManager.TYPE_LABELS][n]=i[n]}},_processUnprocessedMaps:()=>{var t,a,i=e.DvtBaseMapManager._UNPROCESSED_MAPS;if(i){for(t=0;t<i[0].length;t++)a=i[0][t],e.DvtBaseMapManager.registerBaseMapLayer(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7]);for(t=0;t<i[1].length;t++)a=i[1][t],e.DvtBaseMapManager.registerResourceBundle(a[0],a[1],a[2]);for(t=0;t<i[2].length;t++)a=i[2][t],e.DvtBaseMapManager.updateResourceBundle(a[0],a[1],a[2]);e.DvtBaseMapManager._UNPROCESSED_MAPS=[[],[],[]]}var r=e.DvtBaseMapManager._UNPROCESSED_PARENT_UPDATES;if(r){for(t=0;t<r[0].length;t++){var s,n,o=(a=r[0][t])[0],l=a[1],h=a[2],_=e.DvtBaseMapManager._GLOBAL_MAPS[o];if(_){if(n=_[l]){n[e.DvtBaseMapManager.TYPE_PARENTREGION_CHILDREN]=a[3],s=n[e.DvtBaseMapManager.TYPE_DIM];var g=n[e.DvtBaseMapManager._INDEX],d=_[e.DvtBaseMapManager._INDEX];d.splice(g,0,h),_[h][e.DvtBaseMapManager._INDEX]=g;for(var c=g+1;c<d.length;c++){var p=_[d[c]];p&&p[e.DvtBaseMapManager._INDEX]++}}(n=_[a[2]])&&(n[e.DvtBaseMapManager.TYPE_DIM]=s)}}e.DvtBaseMapManager._UNPROCESSED_PARENT_UPDATES=[[]]}},_simplifyAreaPaths:(e,a,i,r,s,n)=>{if(n>0){var o=r/a,l=s/i,h=1/(Math.min(o,l)*n);if(h<=1)return e;var _=[];if(e)for(var g in e){var d=e[g];isNaN(d)&&(d=t.PathUtils.createPathArray(e[g])),_[g]=t.PathUtils.simplifyPath(d,h)}return _}return e},getLayerIds:(t,a)=>{e.DvtBaseMapManager._processUnprocessedMaps();var i=e.DvtBaseMapManager._GLOBAL_MAPS[t][a],r={};if(i){var s=i[e.DvtBaseMapManager.TYPE_LABELS];for(var n in s)r[n]=s[n][1];if("cities"!==a&&!s)for(var o=e.DvtBaseMapManager.getAreaIds(t,a),l=0;l<o.length;l++)r[o[l]]=null}return r}});class i extends t.Container{constructor(e,t,a,i,r,s){super(e),this._areaId=i,this._areaName=r,this._shape=a,this.addChild(this._shape),this._view=t,this._bSupportsVectorEffects=s;var n=a.getStroke();n&&(this._areaStrokeWidth=n.getWidth())}getAreaId(){return this._areaId}getDatatip(){if("none"!==this._view.getDisplayTooltips()){var e=this._view.getOptions()._tooltip;return e?this._view.getCtx().getTooltipManager().getCustomTooltip(e.renderer,this.getDataContext()):this._tooltip}return null}setDatatip(e){this._tooltip=e}getDataContext(){return{color:null,component:this._view.getOptions()._widgetConstructor,data:null,id:null,label:null,location:this.getAreaId(),locationName:this._areaName,tooltip:this._tooltip,x:null,y:null}}getStroke(){return this._shape instanceof t.Shape?this._shape.getStroke():null}setStroke(e){this._shape instanceof t.Shape&&this._shape.setStroke(e)}setFill(e){this._shape instanceof t.Shape&&this._shape.setFill(e)}getFill(){return this._shape instanceof t.Shape?this._shape.getFill():null}getCmds(){return this._shape instanceof t.Path?this._shape.getCmds():null}setCmds(e){this._shape instanceof t.Path&&this._shape.setCmds(e)}setSrc(e){this._shape instanceof t.Image&&this._shape.setSrc(e)}getDropSiteFeedback(){return this._shape.copyShape()}contains(e,t){var a=this.getDimensions();return e>=a.x&&e<=a.x+a.w&&t>=a.y&&t<=a.y+a.h}HandleZoomEvent(e){if(!this._bSupportsVectorEffects&&this._shape&&this._areaStrokeWidth){var a=this._shape.getStroke(),i=new t.Stroke(a.getColor(),a.getAlpha(),this._areaStrokeWidth/e.getA(),a.isFixedWidth());this._shape.setStroke(i)}}}class r extends t.OutputText{constructor(e,a,i,r,s,n){if(super(e,a,0,0),this._bSupportsVectorEffects=n,this._boundRectangle=[],this.setMouseEnabled(!1),this.alignCenter(),this.alignMiddle(),this._center=null,this._labelDisplay=r,this._parentContainer=s,i&&(this._boundRectangle.push(t.Rectangle.create(i[0])),i.length>1)){this._leaderLines=[];for(var o=1;o<i.length;o++){var l=i[o];this._boundRectangle.push(t.Rectangle.create(l[0]));var h=new t.Polyline(e,l[1]);h.setPixelHinting(!0);var _=new t.Stroke("#000000",1,1,this._bSupportsVectorEffects);h.setStroke(_),this._leaderLines.push(h)}}}addBounds(e){this._boundRectangle.push(e)}hasBounds(){return this._boundRectangle.length>0}update(e){for(var a=e.getA(),i=-1,r=this.getDimensions(),s=0;s<this._boundRectangle.length;s++){var n=this._boundRectangle[s].w*a,o=this._boundRectangle[s].h*a;if(r.h<=o&&r.w<=n){i=s;break}}if(-1==i&&"on"===this._labelDisplay&&(i=this._boundRectangle.length-1),this._currentState!==i){if(-1==i)this.reset();else{this.getParent()||this._parentContainer.addChild(this);var l=this._boundRectangle[i].getCenter();if(this.setCenter(l),this._leaderLines)if(this._parentContainer.removeChild(this._leaderLine),this._leaderLine=null,i>0){this._leaderLine=this._leaderLines[i-1],this._parentContainer.addChild(this._leaderLine);var h=this.getCSSStyle();h.setStyle(t.CSSStyle.COLOR,"#000000"),this.setCSSStyle(h);var _=this._boundRectangle[i],g=this._leaderLine.getPoints(),d=g.length;_.x>g[d-2]?(this.alignLeft(),this.alignMiddle(),this.setCenter(new t.Point(_.x,l.y))):_.y>g[d-1]?(this.alignTop(),this.alignCenter(),this.setCenter(new t.Point(l.x,_.y))):_.x+_.w<g[d-2]?(this.alignRight(),this.alignMiddle(),this.setCenter(new t.Point(_.x+_.w,l.y))):_.y+_.h<g[d-1]&&(this.alignBottom(),this.alignCenter(),this.setCenter(new t.Point(l.x,_.y+_.h)))}else{this.alignCenter(),this.alignMiddle();var c=this.getCSSStyle();c.setStyle(t.CSSStyle.COLOR,this._labelColor),this.setCSSStyle(c)}}this._currentState=i}if(-1!==this._currentState){var p=new t.Matrix;if(this.setMatrix(p.translate(a*this._center.x-this._center.x,a*this._center.y-this._center.y)),this._leaderLine&&(this._leaderLine.setMatrix(new t.Matrix(a,0,0,a)),!this._bSupportsVectorEffects)){var v=this._leaderLine.getStroke(),u=new t.Stroke(v.getColor(),v.getAlpha(),1/a,v.isFixedWidth());this._leaderLine.setStroke(u)}}}setCenter(e){this._center=e,this.setX(e.x),this.setY(e.y)}getLeaderLine(){return this._leaderLine}getCenter(){return this._center}setCSSStyle(e){super.setCSSStyle(e),this._labelColor||(this._labelColor=e.getStyle(t.CSSStyle.COLOR))}reset(){this._parentContainer.removeChild(this),this._currentState=-1,this._leaderLine&&(this._parentContainer.removeChild(this._leaderLine),this._leaderLine=null)}}class s{constructor(e,a,i){this._tmap=e,this.LayerName=a,this.EventHandler=i,this.DataLayers={},this.PzcMatrix=new t.Matrix}addDataLayer(e){this.DataLayers[e.getClientId()]=e}PreDataLayerUpdate(){}PostDataLayerUpdate(){}updateDataLayer(e,a,i){if(this._animation&&this._animation.stop(!0),this.PzcMatrix=a,this._oldDataLayer=this.getDataLayer(e.getClientId()),this.addDataLayer(e),e.render(this.PzcMatrix),e.HandleZoomEvent(t.EventFactory.newZoomEvent("zoomed"),this.PzcMatrix),this._oldDataLayer){var r=e.getAnim(),s=e.getAnimDur();if("auto"===r){var n=new t.DataAnimationHandler(this._tmap.getCtx());n.constructAnimation(this._oldDataLayer.getAllObjs(),e.getAllObjs()),this._animation=n.getAnimation()}else if(t.BlackBoxAnimationHandler.isSupported(r)){this._removeAnimRect=!0;for(var o=new t.Rectangle(0,0,this._tmap.getWidth(),this._tmap.getHeight()),l=this._oldDataLayer.getNonScaledContainers(),h=0;h<l.length;h++){var _=new t.Rect(this._tmap.getCtx(),0,0,this._tmap.getWidth(),this._tmap.getHeight());_.setFill(null),l[h].addChild(_)}var g=e.getNonScaledContainers();for(let e=0;e<g.length;e++){let a=new t.Rect(this._tmap.getCtx(),0,0,this._tmap.getWidth(),this._tmap.getHeight());a.setFill(null),g[e].addChild(a)}var d=t.BlackBoxAnimationHandler.getCombinedAnimation(this._tmap.getCtx(),r,l,g,o,s),c=new t.Rectangle(0,0,this._tmap.getWidth()/this.PzcMatrix.getA(),this._tmap.getHeight()/this.PzcMatrix.getA()),p=this._oldDataLayer.getScaledContainers();for(let e=0;e<p.length;e++){let a=new t.Rect(this._tmap.getCtx(),0,0,this._tmap.getWidth()/this.PzcMatrix.getA(),this._tmap.getHeight()/this.PzcMatrix.getA());a.setFill(null),p[e].addChild(a)}var v=e.getScaledContainers();for(let e=0;e<v.length;e++){let a=new t.Rect(this._tmap.getCtx(),0,0,this._tmap.getWidth()/this.PzcMatrix.getA(),this._tmap.getHeight()/this.PzcMatrix.getA());a.setFill(null),v[e].addChild(a)}var u=t.BlackBoxAnimationHandler.getCombinedAnimation(this._tmap.getCtx(),r,p,v,c,s);this._animation=new t.ParallelPlayable(this._tmap.getCtx(),[d,u])}else{var S=this._oldDataLayer.getContainers();for(let e=0;e<S.length;e++){S[e].getParent().removeChild(S[e])}}if(this.PreDataLayerUpdate(),this._animation){this.EventHandler.removeListeners(this._callbackObj);var y=this;this._animation.setOnEnd(()=>{y.OnAnimEnd(e)},this),this._animation.play()}}else this.PostDataLayerUpdate(),this._tmap.OnUpdateLayerEnd()}getDataLayers(){return this.DataLayers}getDataLayer(e){return this.DataLayers?this.DataLayers[e]:null}getLayerName(){return this.LayerName}render(e){for(var t in this.PzcMatrix=e,this.DataLayers)this.DataLayers[t].render(e)}HandleZoomEvent(e,t){for(var a in this.PzcMatrix=t,this.DataLayers)this.DataLayers[a].HandleZoomEvent(e,t)}HandlePanEvent(e){for(var t in this.PzcMatrix=e,this.DataLayers)this.DataLayers[t].HandlePanEvent(e)}OnAnimEnd(e){if(this._oldDataLayer)for(var t=this._oldDataLayer.getContainers(),a=0;a<t.length;a++){var i=t[a].getParent();i&&i.removeChild(t[a])}if(this._removeAnimRect){this._removeAnimRect=!1;for(var r=e.getNonScaledContainers(),s=0;s<r.length;s++)r[s].removeChildAt(r[s].getNumChildren()-1);for(var n=e.getScaledContainers(),o=0;o<n.length;o++)n[o].removeChildAt(n[o].getNumChildren()-1)}this.PostDataLayerUpdate(),this._tmap.OnUpdateLayerEnd(),this._animation=null,this.EventHandler.addListeners(this._callbackObj)}destroy(){var e=this.getDataLayers();for(var t in e)e[t].destroy()}}class n extends s{constructor(e,a,i,r,s){super(e,a,s),this._labelDisplay=i,this._labelType=r,this._areaLabels=new Object,this.Areas=new Object,this.AreaShapes={},this.AreaLabels=null,this._labelInfo=null,this._renderArea={},this._renderLabel={},this._renderedLabels={},this.AreaContainer=new t.Container(this._tmap.getCtx()),this.LabelContainer=new t.Container(this._tmap.getCtx()),this._tmap.getAreaLayerContainer().addChildAt(this.AreaContainer,0),this._tmap.getLabelContainer().addChildAt(this.LabelContainer,0),this._SHORT_NAME=0,this._LONG_NAME=1}getLabelType(){return this._labelType}setAreaShapes(e){for(var t in this.AreaShapes=e,e)this.setAreaRendered(t,!0)}setAreaLabels(e){for(var t in this.AreaLabels=e,e)this.setLabelRendered(t,!0)}getShortAreaName(e){return this.AreaLabels&&this.AreaLabels[e]?this.AreaLabels[e][this._SHORT_NAME]:null}getLongAreaName(e){return this.AreaLabels&&this.AreaLabels[e]?this.AreaLabels[e][this._LONG_NAME]:null}setAreaLabelInfo(e){this._labelInfo=e}getLabelInfoForArea(e){return this._labelInfo?this._labelInfo[e]:null}getArea(e){return this.Areas[e]}getAreaShape(e){return this.AreaShapes[e]}getLabelDisplay(){return this._labelDisplay}setDropSiteCSSStyle(e){this._dropSiteCSSStyle=e}setLayerCSSStyle(e){this._layerCSSStyle=e}getLayerCSSStyle(){return this._layerCSSStyle}setAreaRendered(e,t){this._renderArea[e]=t}setLabelRendered(e,t){this._renderLabel[e]=t}setIsolatedArea(e){for(var t in this._isolatedArea=e,this._layerDim=null,this.AreaShapes)t!==e&&(this._renderArea[t]=!1)}getIsolatedArea(){return this._isolatedArea}getLayerDim(){if(!this._layerDim){var a=this._tmap.getMapName();if(this._isolatedArea)this._layerDim=a?t.PathUtils.getDimensions(t.PathUtils.createPathArray(e.DvtBaseMapManager.getPathForArea(this._tmap.getMapName(),this.LayerName,this._isolatedArea))):t.DisplayableUtils.getDimensionsForced(this._tmap.getCtx(),this.getAreaShape(this._isolatedArea));else if(a&&"world"!==a&&"worldRegions"!==a&&(this._layerDim=e.DvtBaseMapManager.getBaseMapDim(this._tmap.getMapName(),this.LayerName)),!this._layerDim){var i=this.AreaContainer.getDimensions().getUnion(this._tmap.getDataAreaContainer().getDimensions());i.w>0&&i.h>0&&(this._layerDim=i)}}return this._layerDim}_createAreaAndLabel(e){var a=this.AreaShapes[e];if(a){if(!this.Areas[e]){var s=this._tmap.getCtx(),n=this.AreaLabels&&this.AreaLabels[e]?this.AreaLabels[e][this._LONG_NAME]:null,o=new i(s,this._tmap,a,e,n,this._tmap.supportsVectorEffects());this.Areas[e]=o,this.EventHandler.associate(a,o),o.setDatatip(n)}if(this._renderLabel[e]){var l=this._areaLabels[e];if(!l&&"off"!==this._labelDisplay&&this.AreaLabels){var h="short"===this._labelType?this.AreaLabels[e][this._SHORT_NAME]:this.AreaLabels[e][this._LONG_NAME];if(h){if(this._labelInfo&&this._labelInfo[e])l=new r(this._tmap.getCtx(),h,this._labelInfo[e],this._labelDisplay,this.LabelContainer,this._tmap.supportsVectorEffects());else{var _=t.DisplayableUtils.getDimensionsForced(this._tmap.getCtx(),a);l=new r(this._tmap.getCtx(),h,[[_.x,_.y,_.w,_.h]],this._labelDisplay,this.LabelContainer,this._tmap.supportsVectorEffects())}this._areaLabels[e]=l,this._layerCSSStyle&&l.setCSSStyle(this._layerCSSStyle)}}}}}_addAreaAndLabel(e,t){if(this.AreaShapes[e]){this.AreaContainer.addChild(this.Areas[e]);var a=this._areaLabels[e];a&&(this._renderLabel[e]?a.update(this.PzcMatrix):a.reset(),this._renderedLabels[e]=this._renderLabel[e]),t&&(t.push(this.Areas[e]),a&&(t.push(a),t.push(a.getLeaderLine())))}}resetRenderedAreas(){for(var e in this.AreaLabels)this.setAreaRendered(e,!0),this.setLabelRendered(e,!0)}updateDataLayer(e,t,a){if(super.updateDataLayer(e,t,a),a===this.getLayerName())for(var i in this.AreaShapes)this._createAreaAndLabel(i),this._renderArea[i]&&this._addAreaAndLabel(i)}render(e){for(var t in this.AreaShapes)this._createAreaAndLabel(t),this._renderArea[t]&&this._addAreaAndLabel(t);super.render(e)}PreDataLayerUpdate(){for(var e in this._renderArea)this._renderArea[e]||(this._createAreaAndLabel(e),this._addAreaAndLabel(e))}PostDataLayerUpdate(){for(var e in this._renderArea)if(!this._renderArea[e]){this.AreaContainer.removeChild(this.Areas[e]);var t=this._areaLabels[e];if(t){this._renderedLabels[e]=!1,this.LabelContainer.removeChild(t);var a=t.getLeaderLine();a&&this.LabelContainer.removeChild(a)}}}_renderSelectedAreasAndLabels(e,t){for(var a=0;a<e.length;a++)this._createAreaAndLabel(e[a]),this._renderArea[e[a]]&&this._addAreaAndLabel(e[a],t)}__getObjectUnderPoint(e,t){for(var a in this.Areas)if(this.Areas[a].contains(e,t))return this.Areas[a];return null}__showDropSiteFeedback(e){if(this._dropSiteFeedback&&(this.AreaContainer.removeChild(this._dropSiteFeedback),this._dropSiteFeedback=null),e&&(this._dropSiteFeedback=e.getDropSiteFeedback(),this._dropSiteFeedback)){this._dropSiteFeedback.setFill(new t.SolidFill(this._dropSiteCSSStyle.getStyle(t.CSSStyle.BACKGROUND_COLOR)));var a=this._dropSiteCSSStyle.getStyle(t.CSSStyle.BORDER_WIDTH)?this._dropSiteCSSStyle.getStyle(t.CSSStyle.BORDER_WIDTH).substring(0,this._dropSiteCSSStyle.getStyle(t.CSSStyle.BORDER_WIDTH).indexOf("px")):1;this._tmap.supportsVectorEffects()||(a/=this.PzcMatrix.getA());var i=new t.Stroke(this._dropSiteCSSStyle.getStyle(t.CSSStyle.BORDER_COLOR),1,a,this._tmap.supportsVectorEffects());this._dropSiteFeedback.setStroke(i),this.AreaContainer.addChild(this._dropSiteFeedback)}return this._dropSiteFeedback}HandleZoomEvent(e,t){if(super.HandleZoomEvent(e,t),!this._tmap.supportsVectorEffects())for(var a in this.Areas)this.Areas[a].HandleZoomEvent(t);for(var i in this._renderedLabels)if(this._renderedLabels[i]){var r=this._areaLabels[i];r&&r.update(t)}}}class o extends t.Container{constructor(e,a,i){if(super(e),this._dataItem=a,a instanceof t.BaseComponent)this._width=a.getWidth(),this._height=a.getHeight(),this.addChild(a);else{Array.isArray(a)?a.forEach(function(e){this.getElem().appendChild(e)}.bind(this)):this.getElem().appendChild(a);var r=t.DisplayableUtils.getDimensionsForced(e,this);this._width=r.w,this._height=r.h}this._boundingRect=new t.Rect(e,0,0,this._width,this._height),this._boundingRect.setInvisibleFill();var s=new t.Stroke(i.selectedInnerColor,1,2),n=new t.Stroke(i.hoverColor,1,2),o=new t.Stroke(i.selectedInnerColor,1,1),l=new t.Stroke(i.selectedOuterColor,1,2),h=new t.Stroke(i.selectedInnerColor,1,2),_=new t.Stroke(i.selectedOuterColor,1,2);this._boundingRect.setHoverStroke(s,n).setSelectedStroke(o,l).setSelectedHoverStroke(h,_),this._boundingRect.setStrokeAlignment("outer"),this.addChildAt(this._boundingRect,0)}setAriaProperty(e,a){t.Agent.isTouchDevice()?this._boundingRect.setAriaProperty(e,a):super.setAriaProperty(e,a)}setAriaRole(e){t.Agent.isTouchDevice()?this._boundingRect.setAriaRole(e):super.setAriaRole(e)}getWidth(){return this._width}getHeight(){return this._height}setSelectable(e){this._boundingRect.setSelectable(e)}isSelectable(){return this._boundingRect.isSelectable()}isSelected(){return this._boundingRect.isSelected()}setSelected(e){this._boundingRect.setSelected(e)}showHoverEffect(){this._boundingRect.showHoverEffect()}hideHoverEffect(){this._boundingRect.hideHoverEffect()}getRootElem(){return this._dataItem}updateRootElem(e,a){this._dataItem!==e&&(this._dataItem&&a&&(this._dataItem instanceof t.BaseComponent?this.removeChild(this._dataItem):Array.isArray(this._dataItem)?this._dataItem.forEach(function(e){this.getElem().removeChild(e)}.bind(this)):this.getElem().removeChild(this._dataItem)),e instanceof t.BaseComponent?this.addChild(e):Array.isArray(e)?e.forEach(function(e){this.getElem().appendChild(e)}.bind(this)):this.getElem().appendChild(e),this._dataItem=e)}fireKeyboardListener(e){this._dataItem instanceof t.BaseComponent&&this._dataItem.fireKeyboardListener(e)}}const l="linkNode",h=(e,a,i,r,s)=>{var n=r.x,o=r.y,l=s.x,h=s.y,_=e.getMap(),g=t.PathUtils.moveTo(n,o),d=e.trackLink(a,i),c=Math.min(_.getWidth(),_.getHeight())/35;if(l-n==0||h-o==0){var p,v,u,S;if(d>1){if(c*=d-1,l-n==0){var y=.3*Math.abs(o-h);v=o>h?o-y:o+y,u=p=n+c,S=h>o?h-y:h+y}else{var m=.3*Math.abs(n-l);p=n>l?n-m:n+m,u=l>n?l-m:l+m,S=v=o-c}g+=t.PathUtils.cubicTo(p,v,u,S,l,h)}else g+=t.PathUtils.lineTo(l,h)}else{var A=Math.sqrt(Math.pow(l-n,2),Math.pow(h-o,2)),f=A/4;d>1&&(f+=(d-1)*c);var b=(h-o)/(l-n),D=-1/b;D>0&&(f*=-1);var E=.3*A/Math.sqrt(1+Math.pow(b,2)),L=l-n>0,C=n+(L?1:-1)*E,M=b*(C-n)+o,O=l+(L?-1:1)*E,P=b*(O-l)+h,R=f/Math.sqrt(1+Math.pow(D,2)),I=C+R,T=D*(I-C)+M,k=O+R,N=D*(k-O)+P;g+=t.PathUtils.cubicTo(I,T,k,N,l,h)}return g},_=(e,a,i)=>{var r=a.keyCode;if(!i||i.length<1||!e)return null;for(var s=e.getCenter(),n=e.getDisplayable().getCtx(),o=0;o<i.length;o++){var l,h=i[o];if(l=t.Obj.compareValues(n,e.getId(),h.getStartMarker().getId())?h.getEndPoint():h.getStartPoint(),r===t.KeyboardEvent.OPEN_ANGLED_BRACKET&&l.x<=s.x||r===t.KeyboardEvent.CLOSE_ANGLED_BRACKET&&l.x>=s.x)break}return h};class g{constructor(e,t,a,i,r,s,n){if(this._data=e,this._itemData=this._data._itemData,this._dataLayer=t,this.Displayable=a,this._isSelected=!1,this._isShowingHoverEffect=!1,this._isShowingKeyboardFocusEffect=!1,this._hasContentBoundToTouchEvent=!1,this._contentStoredInTouchEventContainer=null,this.Displayable.setDataColor&&!n&&this.Displayable.setDataColor(e.color),this._label=i,this._center=r,this.Zoom=1,this._view=t.getMap(),this._locationName=s,this._data.categories||this._label&&(this._data.categories=[this._label.getTextString()]),"auto"==this._view.getDisplayTooltips()&&s&&(this._data.shortDesc=e.shortDesc?s+": "+this._resolveShortDesc(e.shortDesc):s),this.Displayable){var o=e.svgStyle||e.style,l=e.svgClassName||e.className;this.Displayable.setStyle(o).setClassName(l),this.Displayable.setAriaRole("img")}this.UpdateAriaLabel(),this.setSelectable(this.isSelectable()),this.ANIM_DELETE_PRIORITY=0,this.ANIM_INSERT_PRIORITY=2}_resolveShortDesc(e){return"function"==typeof e?e(this.getShortDescContext(this)):e}getId(){return this._data.id}getLocation(){return this._data.location}getLocationName(){return this._locationName}getCenter(){return this._center}_setCenter(e){this._center=e,this.__recenter()}getDisplayable(){return this.Displayable}getLabel(){return this._label}getDataLayer(){return this._dataLayer}setVisible(e){this.Displayable.setVisible(e),this._label&&this._label.setVisible(e)}getShortDesc(){return this._resolveShortDesc(this._data.shortDesc)}removeLabel(){this._label=null}getSize(){return this.Displayable.getWidth?this.Displayable.getWidth()*this.Displayable.getHeight():0}getCategories(){var e=this._data.categories;return e||[]}getDatatip(){if("none"!=this._view.getDisplayTooltips()){var e=this._view.getOptions()._tooltip;return e?this._view.getCtx().getTooltipManager().getCustomTooltip(e.renderer,this.getDataContext()):this.getShortDesc()}return null}getDataContext(){var e=this._data._noTemplate?this._itemData:this._data;return{color:this.getDatatipColor(),component:this._view.getOptions()._widgetConstructor,data:e,id:this.getId(),itemData:this._itemData,label:this._label?this._label.getTextString():null,location:this.getLocation(),locationName:this.getLocationName(),tooltip:this.getShortDesc(),x:this._data.x,y:this._data.y}}getShortDescContext(e){return{data:e._data._noTemplate?e._itemData:e._data,id:e.getId(),itemData:e._itemData,label:e._label?e._label.getTextString():null,location:e.getLocation(),locationName:e.getLocationName(),x:e._data.x,y:e._data.y}}getDatatipColor(){return this._data.color?this._data.color:"#000000"}getAriaLabel(){var e=[];return this.isSelectable()&&e.push(this._view.getOptions().translations[this.isSelected()?"stateSelected":"stateUnselected"]),t.Displayable.generateAriaLabel(this.getShortDesc(),e)}getDisplayables(){return[this.getDisplayable()]}UpdateAriaLabel(){if(!t.Agent.deferAriaCreation()){var e=this.getAriaLabel();e&&this.Displayable.setAriaProperty("label",e)}}setSelectable(e){var a=this.getLabel();this.Displayable.setSelectable&&(this.Displayable.setSelectable(e),a&&e&&a.setCursor(t.SelectionEffectUtils.getSelectingCursor()))}isSelectable(){return!!this.Displayable.isSelectable&&("off"!==this._data.selectable&&this._dataLayer.isSelectable())}isSelected(){return this._isSelected}setSelected(e){if(this.isSelectable()){var t=this._getState();this._isSelected=e,this._dataLayer.getOptions().selectionRenderer?this._callCustomRenderer(this._dataLayer.getOptions().selectionRenderer,this._getState(),t):this.processDefaultSelectionEffect(e),this.UpdateAriaLabel()}}showHoverEffect(){if(!this.IsHoverEffectShown()){var e=this._getState();this._isShowingHoverEffect=!0,this._dataLayer.getOptions().hoverRenderer?this._callCustomRenderer(this._dataLayer.getOptions().hoverRenderer,this._getState(),e):this.processDefaultHoverEffect(!0)}}hideHoverEffect(){if(this.IsHoverEffectShown()){var e=this._getState();this._isShowingHoverEffect=!1,this._dataLayer.getOptions().hoverRenderer?this._callCustomRenderer(this._dataLayer.getOptions().hoverRenderer,this._getState(),e):this.processDefaultHoverEffect(!1)}}isDragAvailable(e){for(var t=this._dataLayer.getClientId(),a=0;a<e.length;a++)if(e[a]==t)return t;return t}getDragTransferable(e,t){return this._dataLayer.__getDragTransferable(this)}getDragFeedback(e,t){return this._dataLayer.__getDragFeedback()}getNextNavigable(e){var a;if(e.type==t.MouseEvent.CLICK)return this;if(e.keyCode==t.KeyboardEvent.SPACE&&e.ctrlKey)return this;if((e.keyCode==t.KeyboardEvent.OPEN_ANGLED_BRACKET||t.KeyboardEvent.CLOSE_ANGLED_BRACKET)&&e.altKey){var i=this.getDataLayer().getNavigableLinksForNodeId(this.getId());a=_(this,e,i)}else a=t.KeyboardHandler.getNextAdjacentNavigable(this,e,this.GetNavigables());return this.getDataLayer().getMap().ensureObjInViewport(e,a),a}GetNavigables(){return this.getDataLayer().getMap().getNavigableMarkers()}getKeyboardBoundingBox(e){return this.Displayable.getParent()?this.Displayable.getDimensions(e||this.Displayable.getCtx().getStage()):new t.Rectangle(0,0,0,0)}getTargetElem(){return this.Displayable.getElem()}showKeyboardFocusEffect(){if(!this.isShowingKeyboardFocusEffect()){var e=this._getState();this._isShowingKeyboardFocusEffect=!0,this._dataLayer.getOptions().focusRenderer?this._callCustomRenderer(this._dataLayer.getOptions().focusRenderer,this._getState(),e):this.processDefaultFocusEffect(!0)}}hideKeyboardFocusEffect(){if(this.isShowingKeyboardFocusEffect()){var e=this._getState();this._isShowingKeyboardFocusEffect=!1,this._dataLayer.getOptions().focusRenderer?this._callCustomRenderer(this._dataLayer.getOptions().focusRenderer,this._getState(),e):this.processDefaultFocusEffect(!1)}}isShowingKeyboardFocusEffect(){return this._isShowingKeyboardFocusEffect}HandleZoomEvent(e){this.Displayable.getParent()&&(this.Zoom=e.getA(),this.__recenter())}positionLabel(){if(this._label){this._label.alignCenter();var e,a=this.Displayable.getCx()*this.Zoom,i=this.Displayable.getCy()*this.Zoom,r=this.Displayable.getHeight(),s=this.Displayable instanceof t.SimpleMarker?this.Displayable.getType():"image",n=this._data.labelPosition;"top"==n?(e=i-r/2-4,this._label.alignBottom()):"bottom"==n?(e=i+r/2,this._label.alignTop()):s==t.SimpleMarker.TRIANGLE_UP?(e=i+r/6,this._label.alignMiddle()):s==t.SimpleMarker.TRIANGLE_DOWN?(e=i-r/6,this._label.alignMiddle()):(e=i,this._label.alignMiddle()),this._label.setX(a).setY(e)}}__recenter(){var e=this.Displayable.getWidth(),a=this.Displayable.getHeight();if(null!=e&&null!=a&&this.Displayable.getParent()){var i=0,r=this._center.x,s=this._center.y;this.Displayable.getRotation&&(i=this.Displayable.getRotation(),r=this._center.x*Math.cos(i)-this._center.y*Math.sin(i),s=this._center.x*Math.sin(i)+this._center.y*Math.cos(i)),r=this._center.x*this.Zoom-r,s=this._center.y*this.Zoom-s,this.Displayable instanceof o&&(r+=this._center.x-e/2,s+=this._center.y-a/2),this.Displayable.setTranslate(r,s),t.Agent.workaroundFirefoxRepaint(this.Displayable),this.positionLabel()}}animateUpdate(e,a){var i=new t.CustomAnimation(this._view.getCtx(),this.Displayable,this.getDataLayer().getAnimDur()),r=a.getDisplayable();if(this.Displayable.getFill){var s=r.getFill(),n=this.Displayable.getFill();if(n instanceof t.SolidFill&&!n.equals(s)){if(this.Displayable.setFill(s),a.getLabel()&&this._label){var o=this._label.getFill();this._label.setFill(a.getLabel().getFill()),o.equals(this._label.getFill())||i.getAnimator().addProp(t.Animator.TYPE_FILL,this._label,this._label.getFill,this._label.setFill,o)}i.getAnimator().addProp(t.Animator.TYPE_FILL,this.Displayable,this.Displayable.getFill,this.Displayable.setFill,n)}}if(this.Displayable.getCenterDimensions){var l=a.getDisplayable().getCenterDimensions(),h=this.Displayable.getCenterDimensions();l.x==h.x&&l.y==h.y&&l.w==h.w&&l.h==h.h||(this.Displayable.setCenterDimensions(l),i.getAnimator().addProp(t.Animator.TYPE_RECTANGLE,this.Displayable,this.Displayable.getCenterDimensions,this.Displayable.setCenterDimensions,h))}var _=r.getRotation(),g=this.Displayable.getRotation();if(_!=g){var d=_-g;d>Math.PI?_-=2*Math.PI:d<-Math.PI&&(_+=2*Math.PI),this.Displayable.setRotation(_),i.getAnimator().addProp(t.Animator.TYPE_NUMBER,this.Displayable,this.Displayable.getRotation,this.Displayable.setRotation,g)}var c=a.getCenter(),p=this.getCenter();if(c&&p&&(c.x==p.x&&c.y==p.y&&_==g||(this._setCenter(new t.Point(c.x,c.y)),i.getAnimator().addProp(t.Animator.TYPE_POINT,this,this.getCenter,this._setCenter,new t.Point(p.x,p.y)))),this._label&&a.getLabel()){var v=a.getLabel().getX(),u=this._label.getX();v!=u&&(this._label.setX(v),i.getAnimator().addProp(t.Animator.TYPE_NUMBER,this._label,this._label.getX,this._label.setX,u));var S=a.getLabel().getY(),y=this._label.getY();S!=y&&(this._label.setY(S),i.getAnimator().addProp(t.Animator.TYPE_NUMBER,this._label,this._label.getY,this._label.setY,y)),a.getLabel().setAlpha(0)}else a.getLabel()&&a.getLabel().setAlpha(0);r.setAlpha(0),e.add(i,this.ANIM_UPDATE_PRIORITY)}animateDelete(e,a){var i=[this.Displayable],r=this.getLabel();r&&i.push(r);var s=new t.AnimFadeOut(this._view.getCtx(),i,this.getDataLayer().getAnimDur());e.add(s,this.ANIM_DELETE_PRIORITY)}animateInsert(e){var a=[this.Displayable];this.Displayable.setAlpha(0);var i=this.getLabel();i&&(i.setAlpha(0),a.push(i));var r=new t.AnimFadeIn(this._view.getCtx(),a,this.getDataLayer().getAnimDur());e.add(r,this.ANIM_INSERT_PRIORITY)}processDefaultSelectionEffect(e){this.Displayable.setSelected&&this.Displayable.setSelected(e)}processDefaultFocusEffect(e){this.processDefaultHoverEffect(e)}processDefaultHoverEffect(e){e?this.Displayable.showHoverEffect&&this.Displayable.showHoverEffect():this.Displayable.hideHoverEffect&&!this.isShowingKeyboardFocusEffect()&&this.Displayable.hideHoverEffect()}handleTouchStart(){this._hasContentBoundToTouchEvent=!0}handleTouchEnd(){this._hasContentBoundToTouchEvent=!1,this._contentStoredInTouchEventContainer=null}_callCustomRenderer(e,t,a){if(this.Displayable instanceof o){var i=this._view.getOptions()._contextHandler;if(i){var r=this.Displayable.getRootElem(),s=e(i(this.Displayable.getElem(),r,this._data,this._itemData,t,a));if(s||!r||!this._view.getCtx().isCustomElement()){var n=!1;s!=r&&(n=this._checkAndMoveContents(r)),s===this._contentStoredInTouchEventContainer&&(this._hasContentBoundToTouchEvent=!0),this.Displayable.updateRootElem(s,!n)}}}}IsHoverEffectShown(){return this._isShowingHoverEffect}_getState(){return{hovered:this.IsHoverEffectShown(),selected:this.isSelected(),focused:this.isShowingKeyboardFocusEffect()}}_checkAndMoveContents(e){return!!this._hasContentBoundToTouchEvent&&(this._view.storeTouchEventContent(e,this),this._contentStoredInTouchEventContainer=e,this._hasContentBoundToTouchEvent=!1,!0)}}g.ANIM_UPDATE_PRIORITY=1;class d extends g{constructor(e,t,a,i,r){super(e,t,a,i,null,r)}setAreaLayer(e){this._dataAreaLayer=e}setSelected(e){this.isSelectable()&&(e&&!this.IsHoverEffectShown()&&this._dataAreaLayer.addChild(this.Displayable),super.setSelected(e))}showHoverEffect(){this._dataAreaLayer.addChild(this.Displayable),super.showHoverEffect()}hideHoverEffect(){this.isSelected()?this._dataAreaLayer.addChild(this.Displayable):this._dataAreaLayer.addChildAt(this.Displayable,0),super.hideHoverEffect()}HandleZoomEvent(e){super.HandleZoomEvent(e),this.Displayable.getParent()&&(this.Displayable.handleZoomEvent(e),this.positionLabel(e))}positionLabel(e){this.getLabel()&&this.getLabel().update(e)}GetNavigables(){return this.getDataLayer().getMap().getNavigableAreas()}animateUpdate(e,t){super.animateUpdate(e,t),this.getDataLayer().getMapLayer().setAreaRendered(this.getLocation(),!1)}__recenter(){}}class c extends t.Automation{GetSubIdForDomElement(e){var t=this._comp.getEventManager().GetLogicalObject(e);return t&&(t instanceof d||t instanceof g)?this._getSubId(t):null}getDomElementForSubId(e){if(e===t.Automation.TOOLTIP_SUBID)return this.GetTooltipElement(this._comp);var a=e.indexOf(":"),i=e.indexOf("[");if(a>0&&i>0){var r=e.substring(0,a),s=e.substring(a+1,i),n=parseInt(e.substring(i+1,e.length-1));return this._getDomElement(r,s,n)}return null}getData(e,t,a){var i=this._getDataObject(e,t,a);if(i){var r=i.getLabel();return{color:i.getDatatipColor(),tooltip:i.getShortDesc(),label:r?r.getTextString():null,selected:i.isSelected()}}return null}_getDomElement(e,t,a){var i=this._getDataObject(e,t,a);return i?i.getDisplayable().getElem():null}_getSubId(e){for(var a=e.getDisplayable(),i=this._comp.getAllLayers(),r=0;r<i.length;r++){var s=i[r].getDataLayers();for(var n in s)if(a instanceof t.Path){for(var o=s[n].getAreaObjs(),l=0;l<o.length;l++)if(o[l]===e)return this._getDataLayerId(n)+":area["+l+"]";for(var h=s[n].getLinkObjs(),_=0;_<h.length;_++)if(h[_]===e)return this._getDataLayerId(n)+":link["+_+"]"}else for(var g=s[n].getMarkerObjs(),d=0;d<g.length;d++)if(g[d]===e)return this._getDataLayerId(n)+":marker["+d+"]"}return null}_getDataObject(e,t,a){for(var i=this._comp.getAllLayers(),r=0;r<i.length;r++){var s=i[r].getDataLayers();for(var n in s)if(this._getDataLayerId(n)===e){if("area"===t)return s[n].getDataAreaCollection()[a];if("marker"===t)return s[n].getDataMarkerCollection()[a];if("link"===t)return s[n].getDataLinkCollection()[a]}}return null}_getDataLayerId(e){var t=e.lastIndexOf(":");return t>0?e.substring(t+1):e}}class p extends t.BaseComponentDefaults{constructor(e){super({alta:{animationDuration:500,animationOnDisplay:"none",animationOnMapChange:"none",highlightMatch:"all",hoverBehavior:"none",initialZooming:"none",markerZoomBehavior:"fixed",panning:"none",tooltipDisplay:"auto",touchResponse:"auto",visualEffects:"none",zooming:"none",styleDefaults:{skin:"alta",_areaStyle:{backgroundColor:"#DDDDDD",borderColor:"#FFFFFF"},hoverBehaviorDelay:200,dataAreaDefaults:{borderColor:"#FFFFFF",hoverColor:"#FFFFFF",opacity:1,selectedInnerColor:"#FFFFFF",selectedOuterColor:"#000000"},dataMarkerDefaults:{borderColor:"#FFFFFF",borderStyle:"solid",borderWidth:.5,color:"rgb(51,51,51)",height:8,labelStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA_12+"color:#333333"),opacity:1,scaleX:1,scaleY:1,shape:"circle",width:8},linkDefaults:{color:"#9bb2c7",_hoverColor:"#FFFFFF",_selectedColor:"#000000",width:2},labelStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA_12)},resources:{images:{},translations:{}}}},e)}calcAreaLayerOptions(e,a){var i=p.DEFAULT_AREA_LAYER;return a&&(i=t.JsonUtils.merge({labelDisplay:"off"},i)),t.JsonUtils.merge(e,i)}calcDataLayerOptions(e){return t.JsonUtils.merge(e,p.DEFAULT_DATA_LAYER)}static getGapSize(e,t){return Math.ceil(t*e.getGapRatio())}getNoCloneObject(){return{mapProvider:!0,areaLayers:{areaDataLayer:{areas:!0,markers:!0,links:!0}},pointDataLayers:{markers:!0,links:!0},areas:!0,markers:!0,links:!0}}}p.DEFAULT_AREA_LAYER={animationOnLayerChange:"none",labelDisplay:"auto",labelType:"short"},p.DEFAULT_DATA_LAYER={animationOnDataChange:"none",selectionMode:"none"};class v extends t.EventManager{constructor(e,t,a){super(e,t,a,a),this._selectionHandlers=new Object,this._tmap=a,this._bPassOnEvent=!1}getSelectionHandler(e){if(e&&e.getDataLayer){var t=e.getDataLayer().getClientId();return this._selectionHandlers[t]}}setSelectionHandler(e,t){this._selectionHandlers[e]=t}setInitialFocus(e){e&&super.setFocus(e)}OnClick(e){var a=this.GetLogicalObject(e.target);if(this.SetClickInfo(a),!(a&&a.isSelectable&&a.isSelectable()))for(var i in this._selectionHandlers){if(this._selectionHandlers[i].processClick(null,e.ctrlKey)){var r=t.EventFactory.newSelectionEvent([]);r.clientId=i,this._callback.call(this._callbackObj,r)}}super.OnClick(e)}SetClickInfo(e){var t=null,a=null,r=null;if(e&&(e instanceof g?r=e.getDisplayable():e instanceof i&&(r=e),e.getDataLayer)){var s=e.getDataLayer();t=s.getClientId(),a=s.getMapLayer().getLayerName()}this._tmap.setClickInfo(t,a,r)}ProcessKeyboardEvent(e){var a=!0,i=e.keyCode,r=this.getFocus(),s=r.getDisplayable();return i!==t.KeyboardEvent.TAB&&this._bPassOnEvent?(s.fireKeyboardListener(e),e.preventDefault()):i===t.KeyboardEvent.SPACE&&e.ctrlKey?(this.SetClickInfo(r),this.ProcessSelectionEventHelper(r,!0),e.preventDefault()):i!==t.KeyboardEvent.ZERO&&i!==t.KeyboardEvent.NUMPAD_ZERO||!e.ctrlKey?i===t.KeyboardEvent.TAB&&s instanceof o?!e.shiftKey&&r.isShowingKeyboardFocusEffect()?(r.hideKeyboardFocusEffect(),s.fireKeyboardListener(e),e.preventDefault(),this._bPassOnEvent=!0):e.shiftKey&&this._bPassOnEvent?(this.ShowFocusEffect(e,r),e.preventDefault(),this._bPassOnEvent=!1):(this._bPassOnEvent&&r.showKeyboardFocusEffect(),a=super.ProcessKeyboardEvent(e),this._bPassOnEvent=!1):(i===t.KeyboardEvent.TAB&&r&&this._tmap.ensureObjInViewport(e,r),a=super.ProcessKeyboardEvent(e)):(e.altKey?this._tmap.fitRegion(s):this._tmap.fitSelectedRegions(),e.preventDefault()),a}OnComponentTouchClick(e){if(!this.GetEventInfo(e,"panned")){var a=this.GetLogicalObject(e.target);if(this.SetClickInfo(a),a===this._tmap)for(var i in this._selectionHandlers){if(this._selectionHandlers[i].processClick(null,e.ctrlKey)){for(var r=this._selectionHandlers[i].getSelection(),s=[],n=0;n<r.length;n++)s.push(r[n].getId());var o=t.EventFactory.newSelectionEvent(s);this._callback.call(this._callbackObj,o)}}super.OnComponentTouchClick(e)}}HandleTouchActionsEnd(e,t){var a=this.GetLogicalObject(e.target);this.SetClickInfo(a),super.HandleTouchActionsEnd(e,t)}HandleImmediateTouchStartInternal(e){super.HandleImmediateTouchStartInternal(e);var t=this.GetLogicalObject(e.target);t instanceof g&&t.handleTouchStart(),this._tmap.handleTouchStart()}HandleImmediateTouchEndInternal(e){super.HandleImmediateTouchEndInternal(e);var t=this.GetLogicalObject(e.target);t instanceof g&&t.handleTouchEnd(),this._tmap.handleTouchEnd()}ProcessRolloverEvent(e,a,i){var r=this._tmap.getOptions();if("dim"===r.hoverBehavior){var s=a.getCategories?a.getCategories():[];r.highlightedCategories=i?s.slice():null;var n=t.EventFactory.newCategoryHighlightEvent(r.highlightedCategories,i),o=t.CSSStyle.getTimeMilliseconds(r.styleDefaults.hoverBehaviorDelay);this.RolloverHandler.processEvent(n,this._tmap.getNavigableAreas().concat(this._tmap.getNavigableMarkers()).concat(this._tmap.getNavigableLinks()),o,"any"===r.highlightMatch)}}GetTouchResponse(){var e=this._tmap.getOptions();return"none"!==e.panning||"none"!==e.zooming?t.EventManager.TOUCH_RESPONSE_TOUCH_HOLD:e.touchResponse===t.EventManager.TOUCH_RESPONSE_TOUCH_START?t.EventManager.TOUCH_RESPONSE_TOUCH_START:t.EventManager.TOUCH_RESPONSE_AUTO}StoreInfoByEventType(e){return"panned"!==e&&super.StoreInfoByEventType(e)}showFocusEffect(e,t){this.ShowFocusEffect(e,t)}ShowFocusEffect(e,t){this._tmap.isPanning()||super.ShowFocusEffect(e,t)}}class u{constructor(e,a,i,r,s){this._tmap=e,this._clientId=i,this._options=s,this._areaObjs=[],this._markerObjs=[],this._linkObjs=[],this._dataAreaCollection=[],this._dataMarkerCollection=[],this._dataLinkCollection=[],this._eventHandler=r,this._linkMap={},this._dataAreaLayer=new t.Container(this._tmap.getCtx()),this._dataPointLayer=new t.Container(this._tmap.getCtx()),this._dataLabelLayer=new t.Container(this._tmap.getCtx()),this._dataLinkLayer=new t.Container(this._tmap.getCtx()),this._tmap.getDataAreaContainer().addChildAt(this._dataAreaLayer,0),this._tmap.getDataPointContainer().addChildAt(this._dataPointLayer,0),this._tmap.getLabelContainer().addChildAt(this._dataLabelLayer,0),this._tmap.getLinkContainer().addChildAt(this._dataLinkLayer,0),this._parentLayer=a}getOptions(){return this._options}getContainers(){return[this._dataAreaLayer,this._dataPointLayer,this._dataLabelLayer,this._dataLinkLayer]}getScaledContainers(){return[this._dataAreaLayer]}getNonScaledContainers(){var e=[this._dataLabelLayer,this._dataLinkLayer];return this._tmap.isMarkerZoomBehaviorFixed()&&e.push(this._dataPointLayer),e}getDataLabelContainer(){return this._dataLabelLayer}getMapLayer(){return this._parentLayer}getMap(){return this._tmap}getAllObjs(){return this._markerObjs.concat(this._areaObjs).concat(this._linkObjs)}getAreaObjs(){return this._areaObjs}getMarkerObjs(){return this._markerObjs}getLinkObjs(){return this._linkObjs}getNavigableAreaObjs(){for(var e=[],t=0;t<this._areaObjs.length;t++)e.push(this._areaObjs[t]);return e}addMarkerObj(e){if(this._dataMarkerCollection.push(e),e){this._markerObjs.push(e),this._eventHandler.associate(e.getDisplayable(),e);var t=e.getLabel();t&&this._eventHandler.associate(t,e)}}addAreaObj(e){this._dataAreaCollection.push(e),e&&(this._areaObjs.push(e),this._eventHandler.associate(e.getDisplayable(),e),e.setAreaLayer(this._dataAreaLayer))}addLinkObj(e){this._dataLinkCollection.push(e),e&&(this._linkObjs.push(e),this._eventHandler.associate(e.getDisplayable(),e))}trackLink(e,t){var a=u._getLinkKey(e,t);return this._linkMap[a]?this._linkMap[a]++:this._linkMap[a]=1,this._linkMap[a]}static _getLinkKey(e,t){return e.x<t.x?e.x.toString()+e.y.toString()+t.x.toString()+t.y.toString():t.x.toString()+t.y.toString()+e.x.toString()+e.y.toString()}getDataAreaCollection(){return this._dataAreaCollection}getDataMarkerCollection(){return this._dataMarkerCollection}getDataLinkCollection(){return this._dataLinkCollection}_removeAreaObj(e){var t=this._areaObjs.indexOf(e);-1!==t&&this._areaObjs.splice(t,1)}getClientId(){return this._clientId}setAnim(e){this._animType=e}getAnim(){return this._animType}setAnimDur(e){this._animDur=e}getAnimDur(){return this._animDur}setSelectionMode(e){this._selectionMode=e,this._selectionMode&&(this._selectionHandler=new t.SelectionHandler(this._tmap.getCtx(),this._selectionMode),this._eventHandler.setSelectionHandler(this._clientId,this._selectionHandler))}isSelectable(){return null!=this._selectionMode}setIsolatedAreaRowKey(e){this._isolatedAreaRowKey=e}_updateAreaShape(e){var t=e.getDisplayable(),a=this._parentLayer.getAreaShape(e.getLocation());return a?(t.setCmds(a.getCmds()),!0):(this._removeAreaObj(e),!1)}_renderAreaAndLabel(e){if(this._updateAreaShape(this._areaObjs[e])){var t=this._areaObjs[e].getDisplayable();this._dataAreaLayer.addChild(t);var a=this._areaObjs[e].getLabel();if(a){if(!a.hasBounds()){var i=t.getDimensions();a.addBounds(i)}a.update(this._pzcMatrix)}return!0}return!1}render(e){this._pzcMatrix=e;var a={},i=this._markerObjs.slice();i.sort(function(e,t){return e.getSize()<t.getSize()?1:e.getSize()>t.getSize()?-1:0});for(var r=0;r<i.length;r++){var s=i[r],n=s.getDisplayable(),o=s.getLabel();if(o){var l=new t.Container(n.getCtx());this._dataPointLayer.addChild(l),l.addChild(n),l.addChild(o),s.positionLabel()}else this._dataPointLayer.addChild(n);var h=s.getLocation();h&&(a[h]=!0)}for(var _=0;_<this._areaObjs.length;_++)a[this._areaObjs[_].getLocation()]&&this._areaObjs[_].removeLabel(),this._renderAreaAndLabel(_)||_--;for(var g=0;g<this._linkObjs.length;g++)this._dataLinkLayer.addChild(this._linkObjs[g].getDisplayable());this._initSelections&&this._processInitialSelections()}HandleZoomEvent(e,t){this._pzcMatrix=t;for(var a=this.getAreaObjs(),i=0;i<a.length;i++)a[i].HandleZoomEvent(t);if(this._tmap.isMarkerZoomBehaviorFixed())for(var r=this.getMarkerObjs(),s=0;s<r.length;s++)r[s].HandleZoomEvent(t);this._linkMap={};for(var n=this.getLinkObjs(),o=0;o<n.length;o++)n[o].HandleZoomEvent(t)}HandlePanEvent(e){this._pzcMatrix=e}setInitialSelections(e){this._initSelections=e}_processInitialSelections(){this._selectionHandler&&(this._selectionHandler.processInitialSelections(this._initSelections,this.getAllObjs()),this._initSelections=null)}__getDragTransferable(e){if(this._selectionHandler){e.isSelected()||(this._selectionHandler.processClick(e,!1),this._eventHandler.fireSelectionEvent(e));for(var t=[],a=this._selectionHandler.getSelection(),i=0;i<a.length;i++)t.push(a[i].getId());return t}return null}__getDragFeedback(){for(var e=[],t=this._selectionHandler.getSelection(),a=0;a<t.length;a++)e.push(t[a].getDisplayable());return e}getSelectedAreas(e){for(var t=[],a=this.getAreaObjs(),i=new(this._tmap.getCtx().KeySetImpl)(e),r=0;r<a.length;r++)if(i.has(a[r].getId())){t.push(a[r].getLocation());break}return t}destroy(){var e=this.getAllObjs();const t=e=>{e.destroy&&e.destroy()};for(var a=0;a<e.length;a++){var i=e[a].getDisplayable();if(i instanceof o){var r=i.getRootElem();Array.isArray(r)?r.forEach(t):r.destroy&&r.destroy()}}this._eventHandler=null}getNavigableLinksForNodeId(e){for(var a=[],i=this._tmap.getCtx(),r=0;r<this._dataLinkCollection.length;r++){var s=this._dataLinkCollection[r],n=s.getStartMarker(),o=s.getEndMarker();(n&&t.Obj.compareValues(i,n.getId(),e)||o&&t.Obj.compareValues(i,o.getId(),e))&&a.push(s)}return a}}class S extends g{constructor(e,t,a,i,r,s,n){super(e,t,a),this._startPt=i,this._endPt=r,this._startMarker=s,this._endMarker=n}getStartMarker(){return this._startMarker}getEndMarker(){return this._endMarker}getStartPoint(){return this._startPt}getEndPoint(){return this._endPt}getNextNavigable(e){var a,i=this._dataLayer.getMap().EventManager.getKeyboardHandler();if(e.type===t.MouseEvent.CLICK)return this;if(e.keyCode===t.KeyboardEvent.SPACE&&e.ctrlKey)return this;if(i.getLinkNavigationType()===l)if(e.keyCode===t.KeyboardEvent.UP_ARROW){let e=i.getLinkMarker().getId(),t=this.getDataLayer().getNavigableLinksForNodeId(e),r=t.indexOf(this);r++,r===t.length&&(r=0),a=t[r]}else if(e.keyCode===t.KeyboardEvent.DOWN_ARROW){let e=i.getLinkMarker().getId();var r=this.getDataLayer().getNavigableLinksForNodeId(e);let t=r.indexOf(this);t--,-1===t&&(t=r.length-1),a=r[t]}else if(e.keyCode===t.KeyboardEvent.LEFT_ARROW)a=this.getStartPoint().x<=this.getEndPoint().x?this.getStartMarker():this.getEndMarker();else{if(e.keyCode!==t.KeyboardEvent.RIGHT_ARROW)return this;a=this.getStartPoint().x>=this.getEndPoint().x?this.getStartMarker():this.getEndMarker()}else a=t.KeyboardHandler.getNextAdjacentNavigable(this,e,this.GetNavigables());return this.getDataLayer().getMap().ensureObjInViewport(e,a),a}GetNavigables(){return this.getDataLayer().getMap().getNavigableLinks()}__recenter(){if(this.Displayable.getParent()){var e=new t.Point(this._startPt.x*this.Zoom,this._startPt.y*this.Zoom),a=new t.Point(this._endPt.x*this.Zoom,this._endPt.y*this.Zoom),i=h(this._dataLayer,this._startPt,this._endPt,e,a);this.Displayable.setCmds(i),t.Agent.workaroundFirefoxRepaint(this.Displayable)}}animateUpdate(e,a){var i=new t.CustomAnimation(this._view.getCtx(),this.Displayable,this.getDataLayer().getAnimDur()),r=a.getDisplayable(),s=r.getStroke(),n=this.Displayable.getStroke();n.getColor()!==s.getColor()&&(this.Displayable.setStroke(s),i.getAnimator().addProp(t.Animator.TYPE_STROKE,this.Displayable,this.Displayable.getStroke,this.Displayable.setStroke,n));var o=a.getStartPoint(),l=a.getEndPoint(),h=this.getStartPoint(),_=this.getEndPoint(),d=!0;o.equals(h)&&l.equals(_)||(d=!1,this.Displayable.setAlpha(0),i.getAnimator().addProp(t.Animator.TYPE_NUMBER,this.Displayable,this.Displayable.getAlpha,this.Displayable.setAlpha,1),i.getAnimator().addProp(t.Animator.TYPE_NUMBER,r,r.getAlpha,r.setAlpha,0)),d&&r.setAlpha(0),e.add(i,g.ANIM_UPDATE_PRIORITY)}getShortDescContext(e){return{data:e._data._noTemplate?e._itemData:e._data,id:e.getId(),itemData:e._itemData,label:e._label?e._label.getTextString():null}}}const y={containsGeoJson:e=>e&&e.geo&&e.geo.type,parseMapInfo:(e,t)=>{var a={},i={},r=t.geo,s=t.propertiesKeys||{};if(!s.id)throw new Error("Missing required mapProvider.propertiesKeys.id property.");var n=r.type;if("FeatureCollection"===n)for(var o=r.features,l=0;l<o.length;l++)y._parseFeature(e,o[l],s,i,a);else{if("Feature"!==n)throw new Error("GeoJSON type of "+n+" is not supported. Only Feature and FeatureCollection types are supported.");y._parseFeature(e,r,s,i,a)}if(0===Object.keys(i).length)throw new Error("No valid Features found in GeoJSON.");return{labels:a,areas:i}},_parseFeature:(e,t,a,i,r)=>{var s=t.properties,n=t.geometry;if(y._isSupportedGeometry(n)){var o=s[a.id];if(o){var l=s[a.shortLabel],h=s[a.longLabel];(l||h)&&(r[o]=[l,h]),i[o]=y._geomToPath(n)}else e.oj.Logger.warn("No 'id' value found in the mapProvider.propertiesKey object. A Feature's 'properties' object must have an id in the field specified by the mapProvider.propertiesKey.id value.")}else e.oj.Logger.warn("A geometry of type "+n.type+" is not supported and will be skipped.")},_isSupportedGeometry:e=>{var t=e.type;return"Polygon"===t||"MultiPolygon"===t||"GeometryCollection"===t},_geomToPath:e=>{var t="",a=e.type,i=e.coordinates||e.geometries;if("Polygon"===a)t=y._polygonToPath(i);else if("MultiPolygon"===a)for(var r=0;r<i.length;r++)t+=y._polygonToPath(i[r]);else if("GeometryCollection"===a)for(var s=0;s<i.length;s++)t+=y._geomToPath(i[s]);return t},_polygonToPath:e=>{for(var t="",a=0;a<e.length;a++)t+=y._linearRingToPath(e[a]);return t},_linearRingToPath:e=>{var t,a=0,i=0,r="M";if(e)for(var s=0;s<e.length;s++){var n=e[s],o=n[0],l=-n[1];if("M"!==r){var h=o-a,_=l-i;if("l"==r){if(a===o){i=l,t=t+(r="v")+_;continue}if(i===l){a=o,t=t+(r="h")+h;continue}t=t+" "+h+" "+_}else r="l",t=t+"l"+h+" "+_;a=o,i=l}else a=o,i=l,r="x",t="M"+o+" "+l}return t+"Z"},_getCoord:(e,t)=>{for(var a=t;a<e.length;a++){var i=e[a];if("-"!==i&&(isNaN(i)||" "===i)){var r=null;return" "!==i&&(r=i),{coord:parseInt(e.substring(t,a)),idx:a,cmd:r}}}return{}},_pathToPolygon:e=>{var t,a=[],i=0,r=0,s=e[0];if(e)for(var n=[],o=1;o<e.length;o++){var l=y._getCoord(e,o),h=null;t=l.idx,"v"!==s&&"h"!==s?(t=(h=y._getCoord(e,t+1)).idx,i+=l.coord,r+=h.coord):"v"===s?r+=l.coord:"h"===s&&(i+=l.coord),n.push([i,-r]),h?null!=h.cmd&&(s=h.cmd):null!=l.cmd&&(s=l.cmd),"Z"===s&&(a.push(n),n=[],s=e[t+1])}return a}};class m extends t.Path{constructor(e,t){super(e),this.Zoom=1,this._bSupportsVectorEffects=t}setSelected(e){if(this.IsSelected!=e){var t="redwood"===this.getCtx().getThemeBehavior();if(e){var a=t?1:m.HOVER_STROKE_WIDTH,i=t?3:m.SELECTED_HOVER_OUTER_STROKE_WIDTH,r=t?1:m.SELECTED_INNER_STROKE_WIDTH,s=t?3:m.SELECTED_OUTER_STROKE_WIDTH;this.isHoverEffectShown()?(this.CreateSelectedHoverStrokes(),this.SelectedHoverInnerStroke=this._adjustStrokeZoomWidth(this.SelectedHoverInnerStroke,a),this.SelectedHoverOuterStroke=this._adjustStrokeZoomWidth(this.SelectedHoverOuterStroke,i)):(this.SelectedInnerStroke=this._adjustStrokeZoomWidth(this.SelectedInnerStroke,r),this.SelectedOuterStroke=this._adjustStrokeZoomWidth(this.SelectedOuterStroke,s))}super.setSelected(e)}}showHoverEffect(){this.isSelected()?(this.CreateSelectedHoverStrokes(),this.SelectedHoverInnerStroke=this._adjustStrokeZoomWidth(this.SelectedHoverInnerStroke,m.HOVER_STROKE_WIDTH),this.SelectedHoverOuterStroke=this._adjustStrokeZoomWidth(this.SelectedHoverOuterStroke,m.SELECTED_HOVER_OUTER_STROKE_WIDTH)):this.HoverInnerStroke=this._adjustStrokeZoomWidth(this.HoverInnerStroke,m.HOVER_STROKE_WIDTH),super.showHoverEffect()}CreateSelectedHoverStrokes(){var e="redwood"===this.getCtx().getThemeBehavior();if(!this.SelectedHoverInnerStroke){var a=e?this.SelectedInnerStroke:this.HoverInnerStroke,i=e?1:m.HOVER_STROKE_WIDTH;this.SelectedHoverInnerStroke=new t.Stroke(a.getColor(),a.getAlpha(),i,this._bSupportsVectorEffects)}if(!this.SelectedHoverOuterStroke){var r=e?3:m.SELECTED_HOVER_OUTER_STROKE_WIDTH;this.SelectedHoverOuterStroke=new t.Stroke(this.SelectedOuterStroke.getColor(),this.SelectedOuterStroke.getAlpha(),r,this._bSupportsVectorEffects)}}hideHoverEffect(){if(this.isSelected()){var e="redwood"===this.getCtx().getThemeBehavior(),t=e?1:m.SELECTED_INNER_STROKE_WIDTH,a=e?3:m.SELECTED_OUTER_STROKE_WIDTH;this.SelectedInnerStroke=this._adjustStrokeZoomWidth(this.SelectedInnerStroke,t),this.SelectedOuterStroke=this._adjustStrokeZoomWidth(this.SelectedOuterStroke,a)}super.hideHoverEffect()}_updateStrokeZoomWidth(e,a){if(!this._bSupportsVectorEffects){var i=e.getStroke();if(i){var r=new t.Stroke(i.getColor(),i.getAlpha(),a/this.Zoom,i.isFixedWidth());e.setStroke(r)}}}_adjustStrokeZoomWidth(e,a){return this._bSupportsVectorEffects?e:new t.Stroke(e.getColor(),e.getAlpha(),a/this.Zoom,e.isFixedWidth())}handleZoomEvent(e){this.Zoom=e.getA(),this.isSelected()?this.isHoverEffectShown()?(this._updateStrokeZoomWidth(this.InnerShape,m.HOVER_STROKE_WIDTH),this._updateStrokeZoomWidth(this,m.SELECTED_HOVER_OUTER_STROKE_WIDTH)):(this._updateStrokeZoomWidth(this.InnerShape,m.SELECTED_INNER_STROKE_WIDTH),this._updateStrokeZoomWidth(this,m.SELECTED_OUTER_STROKE_WIDTH)):this.isHoverEffectShown()?this._updateStrokeZoomWidth(this.InnerShape,m.HOVER_STROKE_WIDTH):this._updateStrokeZoomWidth(this,1)}}m.HOVER_STROKE_WIDTH=2,m.SELECTED_INNER_STROKE_WIDTH=1,m.SELECTED_OUTER_STROKE_WIDTH=4,m.SELECTED_HOVER_OUTER_STROKE_WIDTH=6;const A={_VIEWPORT_BOUNDS:new t.Rectangle(0,0,800,500),_RADIUS:6378206.4,_NEW_ZEALAND_RECT:new t.Rectangle(500,200,200,200),_NEW_ZEALAND_BOUNDS:new t.Rectangle(163,-49,17,17),_AFRICA_BOUNDS:new t.Rectangle(-17.379205428479874,-37.201510854305546,68.66391442808313,77.50071544582713),_ASIA_BOUNDS:new t.Rectangle(-.8436866097568272,-.7626456732012923,1.8336308036296942,1.5748427214611724),_AUSTRALIA_BOUNDS:new t.Rectangle(113.29667079927977,-52.89550592498755,65.25257389065216,42.123114617504626),_EUROPE_BOUNDS:new t.Rectangle(-.47944476148667076,-.0014669405958800579,.7364925893845453,.6293972741802124),_N_AMERICA_BOUNDS:new t.Rectangle(-.6154469465354344,-.24589767758847714,1.2448236795108683,1.2631535127174947),_S_AMERICA_BOUNDS:new t.Rectangle(-80.60817722658722,-60.796273249672765,46.608687602908056,66.96595767361796),_APAC_BOUNDS:new t.Rectangle(68.20516856593524,-52.89892708045518,111.65739821771903,116.55460214469134),_EMEA_BOUNDS:new t.Rectangle(-24.543831069368586,-37.202500659225905,204.54283106936856,164.9634493690208),_L_AMERICA_BOUNDS:new t.Rectangle(-117.12451221229134,-54.95921623126266,82.33223251442891,87.67786623127876),_USA_CANADA_BOUNDS:new t.Rectangle(-.6154656300926513,.0507209798775865,1.0153104799231851,.966537441082997),_WORLD_BOUNDS:new t.Rectangle(-171.9,-62.6,349.8,150.8),_ALASKA1_RECT:new t.Rectangle(172,51,8,3),_ALASKA2_RECT:new t.Rectangle(-180,51,51,21),_HAWAII_RECT:new t.Rectangle(-178.5,18.9,35,11),_USA_RECT:new t.Rectangle(-124.8,24.4,58,25.5),_ALASKA_BOUNDS:new t.Rectangle(-187.5517578125,59.82610321044922,57.562225341796875,43.83738708496094),_HAWAII_BOUNDS:new t.Rectangle(-160.23606872558594,18.91549301147461,5.4374847412109375,3.3189010620117188),_USA_BOUNDS:new t.Rectangle(-2386803.25,-1183550.5,4514111,2908402),_HAWAII_WINDOW:new t.Rectangle(165,400,100,100),_ALASKA_WINDOW:new t.Rectangle(-75,350,240,150),_ROBINSON_COORDINATES:[[1,0],[.9986,.0314],[.9954,.0629],[.99,.0943],[.9822,.1258],[.973,.1572],[.96,.1887],[.9427,.2201],[.9216,.2515],[.8962,.2826],[.8679,.3132],[.835,.3433],[.7986,.3726],[.7597,.4008],[.6732,.4532],[.6213,.4765],[.5722,.4951],[.5322,.5072]],project:(e,a,i)=>{var r;switch(i){case"africa":r=A._getAffineProjection(A._AFRICA_BOUNDS,A._getMercatorProjection(e,a));break;case"asia":r=A._getAffineProjection(A._ASIA_BOUNDS,A._getAlbersEqualAreaConicProjection(40,95,20,60,e,a),A.toRadians(5));break;case"australia":r=A._getAustraliaProjection(e,a);break;case"europe":r=A._getAffineProjection(A._EUROPE_BOUNDS,A._getAlbersEqualAreaConicProjection(35,25,40,65,e,a),A.toRadians(10));break;case"northAmerica":r=A._getAffineProjection(A._N_AMERICA_BOUNDS,A._getAlbersEqualAreaConicProjection(23,-96,20,60,e,a));break;case"southAmerica":r=A._getAffineProjection(A._S_AMERICA_BOUNDS,new t.Point(e,a),A.toRadians(5));break;case"apac":r=A._getAffineProjection(A._APAC_BOUNDS,A._getMercatorProjection(e,a));break;case"emea":r=A._getAffineProjection(A._EMEA_BOUNDS,A._getMercatorProjection(e,a));break;case"latinAmerica":r=A._getAffineProjection(A._L_AMERICA_BOUNDS,new t.Point(e,a));break;case"usaAndCanada":r=A._getAffineProjection(A._USA_CANADA_BOUNDS,A._getAlbersEqualAreaConicProjection(23,-96,20,60,e,a));break;case"worldRegions":r=A._getWorldProjection(e,a);break;case"usa":r=A._getUSAProjection(e,a);break;case"world":r=A._getWorldProjection(e,a)}return r?new t.Point(10*r.x,10*r.y):null},_getUSAProjection:(e,a)=>{var i,r;return A._ALASKA1_RECT.containsPoint(e,a)||A._ALASKA2_RECT.containsPoint(e,a)?(i=A._getViewPortTransformation(A._ALASKA_BOUNDS,A._ALASKA_WINDOW),r=A._applyAffineTransform(i,A._getMercatorProjection(e,a))):A._HAWAII_RECT.containsPoint(e,a)?(i=A._getViewPortTransformation(A._HAWAII_BOUNDS,A._HAWAII_WINDOW),r=A._applyAffineTransform(i,new t.Point(e,a))):A._USA_RECT.containsPoint(e,a)&&(i=A._getViewPortTransformation(A._USA_BOUNDS,A._VIEWPORT_BOUNDS),r=A._applyAffineTransform(i,A._getOrthographicProjection(new t.Point(-95,36),e,a))),A._getBoundedTransformedPoint(A._VIEWPORT_BOUNDS,r)},_getWorldProjection:(e,t)=>{var a=A._getViewPortTransformation(A._WORLD_BOUNDS,A._VIEWPORT_BOUNDS),i=A._applyAffineTransform(a,A._getRobinsonProjection(e,t));return A._getBoundedTransformedPoint(A._VIEWPORT_BOUNDS,i)},_getAustraliaProjection:(e,t)=>{var a;a=A._NEW_ZEALAND_BOUNDS.containsPoint(e,t)?A._getViewPortTransformation(A._NEW_ZEALAND_BOUNDS,A._NEW_ZEALAND_RECT):A._getViewPortTransformation(A._AUSTRALIA_BOUNDS,A._VIEWPORT_BOUNDS);var i=A._applyAffineTransform(a,A._getMercatorProjection(e,t));return A._getBoundedTransformedPoint(A._VIEWPORT_BOUNDS,i)},_getAffineProjection:(e,a,i)=>{var r=A._getViewPortTransformation(e,A._VIEWPORT_BOUNDS);if(i){var s=new t.Matrix;s=s.rotate(i),r=A._concatAffineTransforms(r,s)}var n=r.transformPoint(a);return A._getBoundedTransformedPoint(A._VIEWPORT_BOUNDS,n)},_getBoundedTransformedPoint:(e,t)=>t&&e.containsPoint(t.x,t.y)?t:null,_getAlbersEqualAreaConicProjection:(e,a,i,r,s,n)=>{var o=A.toRadians(a),l=A.toRadians(e);i=A.toRadians(i),r=A.toRadians(r);var h=.5*(Math.sin(i)+Math.sin(r)),_=Math.pow(Math.cos(i),2)+2*h*Math.sin(i),g=_-2*h*Math.sin(l);g=Math.sqrt(g)/h;var d=A.toRadians(s),c=A.toRadians(n),p=h*(d-o),v=_-2*h*Math.sin(c),u=(v=Math.sqrt(v)/h)*Math.sin(p),S=g-v*Math.cos(p);return new t.Point(u,S)},_getMercatorProjection:(e,a)=>{var i=Math.log(Math.tan(.25*Math.PI+.5*A.toRadians(a)));return new t.Point(e,A.toDegrees(i))},_getOrthographicProjection:(e,a,i)=>{var r=A.toRadians(a),s=A.toRadians(i),n=A.toRadians(e.x),o=A.toRadians(e.y),l=Math.cos(s)*Math.sin(r-n),h=Math.cos(o)*Math.sin(s)-Math.sin(o)*Math.cos(s)*Math.cos(r-n);return new t.Point(l*A._RADIUS,h*A._RADIUS)},_getRobinsonProjection:(e,a)=>{var i=Math.floor(Math.abs(a)/5);i>=A._ROBINSON_COORDINATES.length-1&&(i=A._ROBINSON_COORDINATES.length-2);var r=(Math.abs(a)-5*i)/5,s=A._ROBINSON_COORDINATES[i+1][0]-A._ROBINSON_COORDINATES[i][0],n=A._ROBINSON_COORDINATES[i+1][1]-A._ROBINSON_COORDINATES[i][1],o=e*(A._ROBINSON_COORDINATES[i][0]+r*s),l=A._ROBINSON_COORDINATES[i][1]+r*n;return a<0&&(l*=-1),new t.Point(o,180*l)},_applyAffineTransform:(e,a)=>new t.Point(a.x*e.getA()+e.getTx(),a.y*e.getD()+e.getTy()),_concatAffineTransforms:(e,a)=>{var i=e.getA(),r=a.getA()*i,s=a.getB()*i,n=e.getTx()+a.getTx()*i,o=e.getD(),l=a.getC()*o,h=a.getD()*o,_=e.getTy()+a.getTy()*o;return new t.Matrix(r,s,l,h,n,_)},_getViewPortTransformation:(e,a)=>{var i,r=a.x,s=a.y,n=e.w,o=e.h,l=a.w/n,h=a.h/o;i=l<=h?l:h;var _=r-e.x*i,g=s+e.y*i;return _+=(a.w-n*i)/2,g+=a.h-(a.h-o*i)/2,new t.Matrix(i,0,0,-i,_,g)},toRadians:e=>e*(Math.PI/180),toDegrees:e=>e*(180/Math.PI),inverseProject:(e,a,i)=>{var r;switch(e/=10,a/=10,i){case"africa":r=A._getInverseAffineProjection(A._AFRICA_BOUNDS,new t.Point(e,a)),r=A._getInverseMercatorProjection(r.x,r.y);break;case"asia":r=A._getInverseAffineProjection(A._ASIA_BOUNDS,new t.Point(e,a),A.toRadians(5)),r=A._getInverseAlbersEqualAreaConicProjection(40,95,20,60,r.x,r.y);break;case"australia":r=A._getInverseAustraliaProjection(e,a);break;case"europe":r=A._getInverseAffineProjection(A._EUROPE_BOUNDS,new t.Point(e,a),A.toRadians(10)),r=A._getInverseAlbersEqualAreaConicProjection(35,25,40,65,r.x,r.y);break;case"northAmerica":r=A._getInverseAffineProjection(A._N_AMERICA_BOUNDS,new t.Point(e,a)),r=A._getInverseAlbersEqualAreaConicProjection(23,-96,20,60,r.x,r.y);break;case"southAmerica":r=A._getInverseAffineProjection(A._S_AMERICA_BOUNDS,new t.Point(e,a),A.toRadians(5));break;case"apac":r=A._getInverseAffineProjection(A._APAC_BOUNDS,new t.Point(e,a)),r=A._getInverseMercatorProjection(r.x,r.y);break;case"emea":r=A._getInverseAffineProjection(A._EMEA_BOUNDS,new t.Point(e,a)),r=A._getInverseMercatorProjection(r.x,r.y);break;case"latinAmerica":r=A._getInverseAffineProjection(A._L_AMERICA_BOUNDS,new t.Point(e,a));break;case"usaAndCanada":r=A._getInverseAffineProjection(A._USA_CANADA_BOUNDS,new t.Point(e,a)),r=A._getInverseAlbersEqualAreaConicProjection(23,-96,20,60,r.x,r.y);break;case"worldRegions":r=A._getInverseWorldProjection(e,a);break;case"usa":r=A._getInverseUSAProjection(e,a);break;case"world":r=A._getInverseWorldProjection(e,a)}return r||new t.Point(e,a)},_getInverseUSAProjection:(e,a)=>{if(A._ALASKA_WINDOW.containsPoint(e,a)){var i=A._getViewPortTransformation(A._ALASKA_BOUNDS,A._ALASKA_WINDOW).invert().transformPoint(new t.Point(e,a));return A._getInverseMercatorProjection(i.x,i.y)}if(A._HAWAII_WINDOW.containsPoint(e,a))return A._getViewPortTransformation(A._HAWAII_BOUNDS,A._HAWAII_WINDOW).invert().transformPoint(new t.Point(e,a));if(A._VIEWPORT_BOUNDS.containsPoint(e,a)){var r=A._getViewPortTransformation(A._USA_BOUNDS,A._VIEWPORT_BOUNDS).invert().transformPoint(new t.Point(e,a));return A._getInverseOrthographicProjection(new t.Point(-95,36),r.x,r.y)}return new t.Point(e,a)},_getInverseWorldProjection:(e,a)=>{var i=A._getViewPortTransformation(A._WORLD_BOUNDS,A._VIEWPORT_BOUNDS),r=(i=i.invert()).transformPoint(new t.Point(e,a));return A._getInverseRobinsonProjection(r.x,r.y)},_getInverseAustraliaProjection:(e,a)=>{var i=(A._NEW_ZEALAND_RECT.containsPoint(e,a)?A._getViewPortTransformation(A._NEW_ZEALAND_BOUNDS,A._NEW_ZEALAND_RECT).invert():A._getViewPortTransformation(A._AUSTRALIA_BOUNDS,A._VIEWPORT_BOUNDS).invert()).transformPoint(new t.Point(e,a));return A._getInverseMercatorProjection(i.x,i.y)},_getInverseAffineProjection:(e,a,i)=>{var r=A._getViewPortTransformation(e,A._VIEWPORT_BOUNDS);if(i){var s=new t.Matrix;s=s.rotate(i),r=A._concatAffineTransforms(r,s)}return(r=r.invert()).transformPoint(a)},_getInverseAlbersEqualAreaConicProjection:(e,a,i,r,s,n)=>{var o=A.toRadians(a),l=A.toRadians(e);i=A.toRadians(i),r=A.toRadians(r);var h=.5*(Math.sin(i)+Math.sin(r)),_=Math.pow(Math.cos(i),2)+2*h*Math.sin(i),g=_-2*h*Math.sin(l);g=Math.sqrt(g)/h;var d=Math.sqrt(s*s+(g-n)*(g-n)),c=Math.atan(s/(g-n)),p=Math.asin((_-d*d*h*h)/(2*h)),v=o+c/h;return new t.Point(A.toDegrees(v),A.toDegrees(p))},_getInverseMercatorProjection:(e,a)=>{var i=2*Math.atan(Math.exp(A.toRadians(a)))-.5*Math.PI;return new t.Point(e,A.toDegrees(i))},_getInverseOrthographicProjection:(e,a,i)=>{var r=a/A._RADIUS,s=i/A._RADIUS,n=A.toRadians(e.x),o=A.toRadians(e.y),l=Math.sqrt(r*r+s*s),h=Math.asin(l),_=Math.asin(Math.cos(h)*Math.sin(o)+s*Math.sin(h)*Math.cos(o)/l),g=n+Math.atan(r*Math.sin(h)/(l*Math.cos(o)*Math.cos(h)-s*Math.sin(o)*Math.sin(h)));return new t.Point(A.toDegrees(g),A.toDegrees(_))},_getInverseRobinsonProjection:(e,a)=>{var i=Math.floor(Math.abs(a)/5);i>=A._ROBINSON_COORDINATES.length-1&&(i=A._ROBINSON_COORDINATES.length-2);var r=A._ROBINSON_COORDINATES[i+1][0]-A._ROBINSON_COORDINATES[i][0],s=A._ROBINSON_COORDINATES[i+1][1]-A._ROBINSON_COORDINATES[i][1],n=(Math.abs(a/180)-A._ROBINSON_COORDINATES[i][1])/s,o=5*n+5*i,l=e/(A._ROBINSON_COORDINATES[i][0]+n*r);return a<0&&(o*=-1),new t.Point(l,o)}};class f{constructor(e){this._tmap=e,this._areaLayerStyle=null,this._areaLayerStyleObject=null}parse(e){var t=e.mapProvider;y.containsGeoJson(t)&&(this._mapProvider=t),this._parseMapProperties(e),this._parseStyles(e.styleDefaults),this._parseAreaLayer(e.areaLayers),this.ParseDataLayers(e.pointDataLayers,null,null,!1)}_parseMapProperties(e){var t=e.animationDuration;"string"==typeof t?"ms"==t.slice(-2)?t=parseInt(t.slice(0,-2))/1e3:"s"==t.slice(-1)&&(t=parseFloat(t.slice(0,-1))):t/=1e3,this._tmap.setAnimDur(t),this._mapProvider||this._tmap.setMapName(e.basemap),this._tmap.setInitialZooming("auto"==e.initialZooming),this._tmap.setPanning("auto"==e.panning),this._tmap.setZooming("auto"==e.zooming)}_parseAreaLayer(a){var i=this._tmap.getCtx(),r=this._tmap.Defaults.calcAreaLayerOptions(a[0],i.isCustomElement()),s=r.layer;if(s||this._mapProvider){var o,l=r.areaSvgStyle||r.areaStyle;if(l){l instanceof Object||(l=t.CSSStyle.cssStringToObject(l));var h=f._getAreaCSSStyle(l);this._areaLayerStyleObject=t.JsonUtils.merge(l,this._areaLayerStyleObject),this._areaLayerStyle.merge(h)}var _=this._tmap.getStyleDefaults().labelStyle;_&&this._areaLayerStyle.merge(_),(_=r.labelStyle)&&this._areaLayerStyle.parseInlineStyle(_),o=new n(this._tmap,s,r.labelDisplay,r.labelType,this._tmap.getEventManager());var g,d,c,p=this._tmap.getMapName();if(this._mapProvider){var v=y.parseMapInfo(i,this._mapProvider);g=v.areas,d=v.labels}else g=e.DvtBaseMapManager.getAreaPaths(p,s,this._tmap.getWidth(),this._tmap.getHeight(),this._tmap.getMaxZoomFactor()),d=e.DvtBaseMapManager.getAreaLabels(p,s),c=e.DvtBaseMapManager.getAreaLabelInfo(p,s);o.setAreaShapes(this._createPathShapes(g)),o.setAreaLabels(d),o.setAreaLabelInfo(c),o.setLayerCSSStyle(this._areaLayerStyle),o.setDropSiteCSSStyle(this._areaDropSiteStyle),this._tmap.addLayer(o),r.areaDataLayer&&this.ParseDataLayers([r.areaDataLayer],o,null,!0),r.pointDataLayers&&this.ParseDataLayers(r.pointDataLayers,o,null,!1)}}ParseDataLayers(e,a,i,r){if(e)for(var o=this._tmap.getCtx(),l=0;l<e.length;l++){var h=this._tmap.Defaults.calcDataLayerOptions(e[l]);a?a instanceof n&&r&&a.resetRenderedAreas():(a=new s(this._tmap,h.id,this._tmap.getEventManager()),this._tmap.addLayer(a));var _=new u(this._tmap,a,h.id,this._tmap.getEventManager(),h),g=h.selectionMode;"single"==g?_.setSelectionMode(t.SelectionHandler.TYPE_SINGLE):"multiple"==g&&_.setSelectionMode(t.SelectionHandler.TYPE_MULTIPLE),_.setAnim(h.animationOnDataChange),_.setAnimDur(this._tmap.getAnimDur());var d,c,p,v,S=null;a instanceof n&&(S=h.isolatedItem);var y=a instanceof n,m=this._tmap.getOptions().hiddenCategories;if(v=h.areas)for(var A=0;A<v.length;A++)if(m&&t.ArrayUtils.hasAnyItem(m,v[A].categories))_.addAreaObj(null);else{if(c=v[A].location,S){if(!t.Obj.compareValues(o,S,v[A].id))continue;d=c}(p=this._createArea(a,_,v[A]))&&_.addAreaObj(p)}var b=h.renderer;if(T=h.markers){b||f._calcBubbleSizes(this._tmap,T);for(var D=0;D<T.length;D++)if(m&&t.ArrayUtils.hasAnyItem(m,T[D].categories))_.addMarkerObj(null);else{if(c=T[D].location,S){if(!t.Obj.compareValues(o,S,T[D].id))continue;d=c}if(b){var E=T[D]._noTemplate?T[D]._itemData:T[D],L=T[D]._itemData,C=b(this._tmap.getOptions()._contextHandler(this._tmap.getElem(),null,E,L,{hovered:!1,selected:!1,focused:!1},null));p=C&&this._createCustomDataItem(a,_,T[D],C,y)}else p=this._createMarker(a,_,T[D],y);p&&_.addMarkerObj(p)}}var M=h.images;if(M)for(var O=0;O<M.length;O++){if(c=M[O].location,S){if(!t.Obj.compareValues(o,S,M[O].id))continue;d=c}(p=this._createImage(a,_,M[O],y))&&_.addMarkerObj(p)}var P=h.links;if(P){for(var R=new o.ojMap,I=new o.ojMap,T=_.getDataMarkerCollection(),k=0;k<T.length;k++){var N=T[k];N&&R.set(N.getId(),N)}v=_.getDataAreaCollection();for(var w=0;w<v.length;w++){var B=v[w];B&&I.set(B.getId(),B)}for(var x=0;x<P.length;x++)m&&t.ArrayUtils.hasAnyItem(m,P[x].categories)?_.addAreaObj(null):(p=this._createLink(_,P[x],R,I))&&_.addLinkObj(p)}d&&(_.setIsolatedAreaRowKey(S),a.setIsolatedArea(d));var H=h.selection;H&&H.length>0&&_.setInitialSelections(H),i?a.updateDataLayer(_,this._tmap.getPanZoomCanvas().getContentPane().getMatrix(),i):a.addDataLayer(_)}}_parseStyles(e){var a=e.areaSvgStyle||e.areaStyle;!a||a instanceof Object||(a=t.CSSStyle.cssStringToObject(a)),a=t.JsonUtils.merge(a,e._areaStyle),this._areaLayerStyle=f._getAreaCSSStyle(a),this._areaLayerStyleObject=a,this._areaLayerStyle.parseInlineStyle(e.labelStyle),this._areaDropSiteStyle=new t.CSSStyle(e.dropTargetStyle),this._tmap.setStyleDefaults(e)}static _getAreaCSSStyle(e){var a=new t.CSSStyle;return[t.CSSStyle.BORDER_COLOR,t.CSSStyle.BACKGROUND_COLOR].forEach(function(i){var r=null,s=t.CSSStyle.cssStringToObjectProperty(i);e&&null!=e[s]&&(r=e[s],delete e[s]),a.setStyle(i,r)}),a}_createPathShapes(e){var a={},i=this._tmap.getCtx();for(var r in e){var s=new t.Path(i);s.setCmds(e[r]);var n=this._areaLayerStyle.getStyle(t.CSSStyle.BORDER_COLOR);if(n&&"transparent"!=n){var o=new t.Stroke(n,1,1,this._tmap.supportsVectorEffects());s.setStroke(o)}var l=this._areaLayerStyle.getStyle(t.CSSStyle.BACKGROUND_COLOR);"transparent"!=l?s.setSolidFill(l):s.setFill(null),this._areaLayerStyleObject&&s.setStyle(this._areaLayerStyleObject),a[r]=s}return a}_createArea(e,a,i){var r=i.location;if(e.getAreaShape(r)){e.setAreaRendered(r,!1);var s=this._tmap.getCtx(),n="redwood"===s.getThemeBehavior(),o=new m(s,this._tmap.supportsVectorEffects());(i=t.JsonUtils.merge(i,this._tmap.getStyleDefaults().dataAreaDefaults)).labelStyle||(i.labelStyle=this._tmap.getStyleDefaults().labelStyle);var l=n?3:m.SELECTED_OUTER_STROKE_WIDTH,h=n?3:m.HOVER_STROKE_WIDTH,_=new t.Stroke(i.hoverColor,1,1,this._tmap.supportsVectorEffects()),g=new t.Stroke(i.color,1,h,this._tmap.supportsVectorEffects()),c=new t.Stroke(i.selectedInnerColor,1,m.SELECTED_INNER_STROKE_WIDTH,this._tmap.supportsVectorEffects()),p=new t.Stroke(i.selectedOuterColor,1,l,this._tmap.supportsVectorEffects());o.setHoverStroke(_,g).setSelectedStroke(c,p),e.setLabelRendered(i.location,!1),this._styleDisplayable(i,o);var v=this._createLabel(e,a,i,o,!0),u=f._getLocationName(this._tmap.getMapName(),a,i);return new d(i,a,o,v,u)}return null}_createMarker(e,a,i,r){var s,n=i._size;if(!(s=this._mapProvider&&!i.location?new t.Point(i.x,-i.y):f.getCenter(a,i.location,i.x,i.y))||0===n)return null;var o,l,h=this._tmap.getStyleDefaults().dataMarkerDefaults,_=h.labelStyle;if(_.parseInlineStyle(i.labelStyle),(i=t.JsonUtils.merge(i,h)).labelStyle=_,null!=n)o=n,l=n;else{var d=i.scaleX;null==d&&(d=1);var c=i.scaleY;null==c&&(c=1);var p=i.width;null==p&&(p=this._tmap.getOptions().styleDefaults.dataMarkerDefaults.width);var v=i.height;null==v&&(v=this._tmap.getOptions().styleDefaults.dataMarkerDefaults.height),o=p*d,l=v*c}var u,S=i.borderRadius;if(i.source)u=new t.ImageMarker(this._tmap.getCtx(),s.x,s.y,o,l,S,i.source,i.sourceSelected,i.sourceHover,i.sourceHoverSelected);else{var y=i.shape?i.shape:this._tmap.getOptions().styleDefaults.dataMarkerDefaults.shape;u=new t.SimpleMarker(this._tmap.getCtx(),y,s.x,s.y,o,l,S)}var m=i.rotation;if(m){var A=m*Math.PI/180;u.setRotation(A)}r&&e.setLabelRendered(i.location,!1),this._styleDisplayable(i,u);var b="redwood"===this._tmap.getCtx().getThemeBehavior(),D=this._createLabel(e,a,i,u,r),E=f._getLocationName(this._tmap.getMapName(),a,i);return new g(i,a,u,D,s,E,b)}_createImage(e,a,i,r){var s=f.getCenter(a,i.location,i.x,i.y);if(!s)return null;var n=new t.Image(this._tmap.getCtx(),i.url),o=i.width,l=i.height;null!=o&&null!=l&&(n.setX(s.x-o/2),n.setY(s.y-l/2),n.setWidth(o),n.setHeight(l)),r&&e.setLabelRendered(i.location,!1);var h=f._getLocationName(this._tmap.getMapName(),a,i),_=new g(i,a,n,null,s,h);if(!o||!l){t.ImageLoader.loadImage(i.url,e=>{e&&e.width&&e.height&&(n.setWidth(e.width),n.setHeight(e.height),n.setX(s.x-e.width/2),n.setY(s.y-e.height/2),_.__recenter())})}return _}_createCustomDataItem(e,a,i,r,s){var n;if(!(n=this._mapProvider&&!i.location?new t.Point(i.x,-i.y):f.getCenter(a,i.location,i.x,i.y)))return null;s&&e.setLabelRendered(i.location,!1);var l=new o(this._tmap.getCtx(),r,this._tmap.getStyleDefaults().dataAreaDefaults),h=f._getLocationName(this._tmap.getMapName(),a,i);return new g(i,a,l,null,n,h)}_createLink(e,a,i,r){var s,n,o,l,_=a.startLocation,g=a.endLocation;if(_.id?(n=i.get(_.id))?s=n.getCenter():(n=r.get(_.id))&&(s=this._getPtFromLocation(e,{location:n.getLocation()})):s=this._getPtFromLocation(e,_),g.id?(l=i.get(g.id))?o=l.getCenter():(l=r.get(g.id))&&(o=this._getPtFromLocation(e,{location:l.getLocation()})):o=this._getPtFromLocation(e,g),!o||!s)return null;var d=new t.Path(this._tmap.getCtx(),h(e,s,o,s,o));d.setFill(null);var c=this._tmap.getStyleDefaults().linkDefaults,p=a.color;p||(p=c.color);var v=a.width;v||(v=c.width);var u=new t.Stroke(p,1,v,!0);d.setStroke(u);var y,m,A="redwood"===d.getCtx().getThemeBehavior(),f=c._hoverColor,b=c._selectedColor,D=new t.Stroke(f,1,v),E=new t.Stroke(p,1,v+2),L=new t.Stroke(p,1,v),C=new t.Stroke(b,1,v+2);return A?(y=L,m=C):(y=new t.Stroke(f,1,v),m=new t.Stroke(b,1,v+2)),d.setHoverStroke(D,E).setSelectedStroke(L,C).setSelectedHoverStroke(y,m),new S(a,e,d,s,o,n,l)}_getPtFromLocation(e,a){return this._mapProvider?new t.Point(a.x,-a.y):f.getCenter(e,a.location,a.x,a.y)}_createLabel(e,a,i,s,n){var o=i.location,l=i.label,h=l?"on":"off";n&&(h=e.getLabelDisplay());var _=s instanceof t.Path;if(!l&&n&&(_&&"off"!=h||!_&&"on"==h)&&(l="long"==e.getLabelType()?e.getLongAreaName(o):e.getShortAreaName(o)),l){var g,d=this._tmap.getCtx();g=_?new r(d,l,e.getLabelInfoForArea?e.getLabelInfoForArea(o):null,h,a.getDataLabelContainer(),this._tmap.supportsVectorEffects()):new t.OutputText(d,l,0,0);var c=_?e.getLayerCSSStyle():new t.CSSStyle;i.labelStyle&&c.merge(i.labelStyle);var p=c.getStyle(t.CSSStyle.COLOR);c.setStyle(t.CSSStyle.COLOR,null),g.setCSSStyle(c),i.color&&g instanceof r&&(t.Agent.isHighContrast()||!p)&&(p=t.ColorUtils.getContrastingTextColor(i.color)),p&&g.setSolidFill(p)}return g}_styleDisplayable(e,a){var i=e.color,r="redwood"===this._tmap.getCtx().getThemeBehavior();if(a instanceof t.SimpleMarker){var s=e.borderStyle;if("none"!=s){var n=e.borderWidth;"string"==typeof n&&(n="px"==n.slice(-2)?parseFloat(e.borderWidth.slice(0,-2)):parseFloat(e.borderWidth));var o=new t.Stroke(e.borderColor,1,n,!this._tmap.isMarkerZoomBehaviorFixed(),t.Stroke.getDefaultDashProps(s,n));if(a.setStroke(o),r){var l=new t.Stroke(e._hoverColor,1,1,this._tmap.isMarkerZoomBehaviorFixed()),h=new t.Stroke(e._selectionColor,1,3,this._tmap.isMarkerZoomBehaviorFixed()),_=new t.Stroke(e._hoverColor,1,1,this._tmap.isMarkerZoomBehaviorFixed()),g=new t.Stroke(e._selectionColor,1,3,this._tmap.isMarkerZoomBehaviorFixed()),d=new t.Stroke(e._hoverColor,1,1,this._tmap.isMarkerZoomBehaviorFixed()),c=new t.Stroke(e.color,1,3,this._tmap.isMarkerZoomBehaviorFixed());a.setHoverStroke(d,c).setSelectedStroke(_,g).setSelectedHoverStroke(l,h)}}var p=e.opacity;i&&a.setSolidFill(i,p)}else if(a instanceof t.Path){var v=e.borderColor;if(v){var u=new t.Stroke(v,1,1,this._tmap.supportsVectorEffects());a.setStroke(u)}a.setSolidFill(i,p)}}static getCenter(a,i,r,s){var n=a.getMap(),o=n.getMapName(),l=a.getMapLayer(),h=l.getLayerName();if(i){var _=e.DvtBaseMapManager.getCityCoordinates(o,i);if(_)return _;var g,d=e.DvtBaseMapManager.getAreaCenter(o,h,i);if(d)return d;if(!o&&l.getAreaShape){var c=l.getAreaShape(i);if(!c)return null;g=t.DisplayableUtils.getDimensionsForced(n.getCtx(),c)}else{var p=e.DvtBaseMapManager.getPathForArea(o,h,i);if(!p)return null;var v=t.PathUtils.createPathArray(p);g=t.PathUtils.getDimensions(v)}return g.getCenter()}return A.project(r,s,o)}static _calcBubbleSizes(e,a){for(var i=-1/0,r=1/0,s=0;s<a.length;s++){var n=a[s].value;null==n||n<=0||(i=Math.max(i,n),r=Math.min(r,n))}if(r!==1/0){var o=2*f._PZC_PADDING,l=e.getWidth()-o,h=e.getHeight()-o,_=l/h;_<1.3?h=2*l/3:_>1.7&&(l=1.5*h);for(var g=f._MAX_MARKER_SIZE_RATIO*Math.min(l,h),d=0;d<a.length;d++){var c=a[d].value;a[d]._size=null==c||c<=0?0:t.LayoutUtils.getBubbleSize(c,r,i,f._MIN_MARKER_SIZE,g)}}}static _getLocationName(t,a,i){var r=i.location;if(r){var s=a.getMapLayer();return s instanceof n?s.getLongAreaName(r):e.DvtBaseMapManager.getCityLabel(t,r)}return null}}f._MIN_MARKER_SIZE=6,f._MAX_MARKER_SIZE_RATIO=.5,f._PZC_PADDING=20;class b extends a.PanZoomCanvasKeyboardHandler{constructor(e,t){super(e,t),this._tmap=e,this._linkNavType=b.LINK_NAV}isSelectionEvent(e){return this.isNavigationEvent(e)&&!e.ctrlKey}processKeyDown(e){var a=e.keyCode,i=this._eventManager.getFocus();if(a===t.KeyboardEvent.CLOSE_BRACKET){this._linkNavType=b.LINK_NAV;var r=[];i instanceof d?0===(r=this._tmap.getNavigableMarkers()).length&&(r=this._tmap.getNavigableLinks()):i instanceof g&&(r=this._tmap.getNavigableLinks()),r.length>0&&(i=t.KeyboardHandler.getNextAdjacentNavigable(i,e,r),this._tmap.ensureObjInViewport(e,i)),this._eventManager.SetClickInfo(i)}else if(a===t.KeyboardEvent.OPEN_BRACKET){this._linkNavType=b.LINK_NAV;var s=[];i instanceof S?0===(s=this._tmap.getNavigableMarkers()).length&&(s=this._tmap.getNavigableAreas()):!(i instanceof d)&&i instanceof g&&(s=this._tmap.getNavigableAreas()),s.length>0&&(i=t.KeyboardHandler.getNextAdjacentNavigable(i,e,s),this._tmap.ensureObjInViewport(e,i)),this._eventManager.SetClickInfo(i)}else(e.keyCode===t.KeyboardEvent.OPEN_ANGLED_BRACKET||t.KeyboardEvent.CLOSE_ANGLED_BRACKET)&&e.altKey&&(this._linkMarker=i,this._linkNavType=l),i=super.processKeyDown(e),this.isNavigationEvent(e)&&!e.ctrlKey&&this._eventManager.SetClickInfo(i);return i}getLinkNavigationType(){return this._linkNavType}getLinkMarker(){return this._linkMarker}isMultiSelectEvent(e){return e.keyCode===t.KeyboardEvent.SPACE&&e.ctrlKey}isNavigationEvent(e){var a;switch(e.keyCode){case t.KeyboardEvent.OPEN_BRACKET:case t.KeyboardEvent.CLOSE_BRACKET:a=!0;break;case t.KeyboardEvent.OPEN_ANGLED_BRACKET:case t.KeyboardEvent.CLOSE_ANGLED_BRACKET:a=!!e.altKey;break;default:a=super.isNavigationEvent(e)}return a}}class D extends a.PanZoomComponent{constructor(e,t,a){super(e,t,a),this._layers=[],this._createLayers(),this._bRendered=!1,this.Defaults=new p(e),this._initialZooming=!1,this._zooming=!1,this._panning=!1,this._selectedAreas={},this._touchEventContentMarkerRef=null,this._bListenersRemoved=!1,this._createHandlers(),this.EventManager.associate(this,this),this.DEFAULT_MAX_ZOOM_FACTOR=6}_createLayers(){this._areaLayers=new t.Container(this.getCtx()),this._dataAreaLayers=new t.Container(this.getCtx()),this._dataAreaLayers.setAriaRole("region",!0),this._dataPointLayers=new t.Container(this.getCtx()),this._dataPointLayers.setAriaRole("region",!0),this._labelLayers=new t.Container(this.getCtx()),this._linkLayers=new t.Container(this.getCtx()),this._linkLayers.setAriaRole("region",!0),t.Agent.isTouchDevice()&&(this._touchEventLayer=new t.Container(this.getCtx()),this._touchEventLayer.setStyle({display:"none"}))}_updateAriaForLayers(){var e=this.Options.translations;this._dataAreaLayers.setAriaProperty("label",e.areasRegion,!0),this._dataPointLayers.setAriaProperty("label",e.markersRegion,!0),this._linkLayers.setAriaProperty("label",e.linksRegion,!0)}SetOptions(e){super.SetOptions(e),t.Agent.isEnvironmentTest()&&(this.Options.animationOnDisplay="none",this.Options.animationOnMapChange="none"),new f(this).parse(this.Options)}setStyleDefaults(e){this._styleDefaults=e}getStyleDefaults(){return this._styleDefaults}getMaxZoomFactor(){var e=this.Options.maxZoom;return this._zooming?isNaN(e)?this.DEFAULT_MAX_ZOOM_FACTOR:Math.max(e,1):1}isMarkerZoomBehaviorFixed(){return"fixed"===this.Options.markerZoomBehavior}addLayer(e){this._layers.push(e)}getLayer(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t].getLayerName()===e)return this._layers[t]}getAllLayers(){return this._layers}getAreaLayerContainer(){return this._areaLayers}getDataAreaContainer(){return this._dataAreaLayers}getDataPointContainer(){return this._dataPointLayers}getLabelContainer(){return this._labelLayers}getLinkContainer(){return this._linkLayers}setMapName(e){this._bBaseMapChanged=this._mapName&&this._mapName!==e,this._mapName=e}setAnimDur(e){this._animationDuration=parseFloat(e)}getAnimDur(){return this._animationDuration}getDisplayTooltips(){var e=this.Options.tooltipDisplay;switch(e){case"shortDesc":return"shortDescOnly";case"none":return e;default:return"auto"}}setInitialZooming(e){this._initialZooming=e}PreRender(){super.PreRender(),this._bBaseMapChanged=!1,!this.IsResize()&&this._pzcContainer&&(this._oldMapProvider=this.Options.mapProvider,this._layers=[],this._zooming=!0,this._panning=!0,this._oldPzc=this._pzc,this._createLayers(),this.EventManager.removeListeners(this),this._createHandlers(),this._bListenersRemoved=!1,this.EventManager.hideTooltip(),this.EventManager.associate(this,this))}_createHandlers(){this.EventManager=new v(this.getCtx(),this.dispatchEvent,this),this.EventManager.addListeners(this),t.Agent.isTouchDevice()?this._keyboardHandler=null:(this._keyboardHandler=new b(this,this.EventManager),this.EventManager.setKeyboardHandler(this._keyboardHandler))}Render(){super.Render();var e=new t.Container(this.getCtx()),a=new t.Container(this.getCtx());if(this._pzc=this.getPanZoomCanvas(),this._pzc.addChild(e),this._pzc.getContentPane().addChild(a),this._render(e,a),this._areaLayer){this.StopAnimation(!0);var i=new t.Rectangle(0,0,this.getWidth(),this.getHeight());if(null==this.getMapName()){var r=this.Options.mapProvider;this._oldMapProvider!==r&&(this._bBaseMapChanged=!0,this._oldMapProvider=r)}if(this._bRendered||this._oldPzc){if(this._bBaseMapChanged&&!this.IsResize()){var s=this.Options.animationOnMapChange;(s="auto"===s?"alphaFade":null)&&(this.Animation=t.BlackBoxAnimationHandler.getCombinedAnimation(this.getCtx(),s,this._oldPzc,this._pzc,i,this._animationDuration),this.addChild(this._oldPzc))}}else{var n=this.Options.animationOnDisplay;(n="auto"===n?"alphaFade":null)&&(this.Animation=t.BlackBoxAnimationHandler.getInAnimation(this.getCtx(),n,this._pzc,i,this._animationDuration))}this.Animation?(this.EventManager.hideTooltip(),this.EventManager.removeListeners(this),this._bListenersRemoved=!0,this.Animation.setOnEnd(this.OnAnimEnd,this),this.Animation.play()):this.OnAnimEnd(),this._pzcContainer=e,this.getCtx().setKeyboardFocusArray([this]),this._bRendered=!0}}_calcMinZoom(){var e=this._pzc.getZoomToFitPadding(),t=this._areaLayer.getLayerDim(),a=this._pzc.getSize(),i=(a.w-2*e)/t.w,r=(a.h-2*e)/t.h;return Math.min(i,r)}_render(e,t){var a;this._updateAriaForLayers(),t.addChild(this._areaLayers),t.addChild(this._dataAreaLayers),this.isMarkerZoomBehaviorFixed()?e.addChild(this._dataPointLayers):t.addChild(this._dataPointLayers),e.addChild(this._labelLayers),e.addChild(this._linkLayers),this._touchEventLayer&&e.addChild(this._touchEventLayer);var i=this._pzc.getContentPane().getMatrix();this._areaLayerRendered=!1;for(var r=0;r<this._layers.length;r++){var s=this._layers[r];(!this._areaLayerRendered&&s instanceof n||!(s instanceof n))&&(s.render(i),!this._areaLayerRendered&&s instanceof n&&(this._areaLayerRendered=!0,this._areaLayer=s,a=s.getLayerDim()))}if(this._areaLayer){var o=this._areaLayer.getIsolatedArea();this._isolatedArea!==o&&(this._isolatedArea=o),this._setInitialKeyboardFocus(),this._pzc.setMinZoom(null),this._pzc.setMaxZoom(null),this._pzc.setZoomingEnabled(!0),this._pzc.setPanningEnabled(!0),this._pzc.zoomToFit(null,a),this._updateZoomLimits(),this._pzc.setZoomingEnabled(this._zooming),this._pzc.setPanningEnabled(this._panning)}}_setInitialKeyboardFocus(){if(this._keyboardHandler){var e=this.getNavigableAreas();0===e.length&&(e=this.getNavigableMarkers()),0===e.length&&(e=this.getNavigableLinks()),this.EventManager.setInitialFocus(e[0])}}updateLayer(e,t,a){this._bRendered=!1,this.StopAnimation(!0),new f(this).ParseDataLayers([e],this.getLayer(t),this._areaLayer.getLayerName(),a),this._bRendered=!0,this._setInitialKeyboardFocus(),this.getCtx().setKeyboardFocusArray([this]),this._updateZoomLimits()}_renderCompleted(){this.AnimationStopped||this.RenderComplete(),this.Animation=null,this.AnimationStopped=!1}_updateZoomLimits(){var e=this._calcMinZoom();this._pzc.setMinZoom(e),this._pzc.setMaxZoom(e*this.getMaxZoomFactor())}OnUpdateLayerEnd(){this._areaLayer.getIsolatedArea()&&this._pzc.zoomToFit(null,this._areaLayer.getLayerDim()),this._initialZooming&&this._zoomData(),this._renderCompleted()}getMapName(){return this._mapName}_transformContainers(e){var a=new t.Matrix;a=a.translate(e.getTx(),e.getTy()),this.isMarkerZoomBehaviorFixed()&&this._dataPointLayers.setMatrix(a),this._labelLayers.setMatrix(a),this._linkLayers.setMatrix(a)}_constrainPanning(e){var a=this._pzc.getZoomToFitPadding(),i=this._pzc.getSize(),r=new t.Rectangle(a,a,i.w-2*a,i.h-2*a),s=this._areaLayer.getLayerDim(),n=s.x*e,o=s.y*e,l=s.w*e,h=s.h*e;if(l>r.w)this._pzc.setMinPanX(r.x+r.wt-(n+l)),this._pzc.setMaxPanX(r.x-n);else{var _=(r.x+r.w)/2-(n+l/2);this._pzc.setMinPanX(_),this._pzc.setMaxPanX(_)}if(h>r.h)this._pzc.setMinPanY(r.y+r.h-(o+h)),this._pzc.setMaxPanY(r.y-o);else{var g=(r.y+r.h)/2-(o+h/2);this._pzc.setMinPanY(g),this._pzc.setMaxPanY(g)}}_updateAnimator(e,a){var i=e.animator;if(i){var r=this._pzc.getContentPane(),s=i.getDestVal(r,r.getMatrix);a&&(this._currentAnimMatrix=r.getMatrix(),i.addProp(t.Animator.TYPE_MATRIX,this,this._getCenteredObjsMatrix,this._setCenteredObjsMatrix,s));var n=new t.Matrix(1,0,0,1,s.getTx(),s.getTy());this.isMarkerZoomBehaviorFixed()&&i.addProp(t.Animator.TYPE_MATRIX,this._dataPointLayers,this._dataPointLayers.getMatrix,this._dataPointLayers.setMatrix,n),i.addProp(t.Animator.TYPE_MATRIX,this._labelLayers,this._labelLayers.getMatrix,this._labelLayers.setMatrix,n),i.addProp(t.Animator.TYPE_MATRIX,this._linkLayers,this._linkLayers.getMatrix,this._linkLayers.setMatrix,n)}}HandleZoomEvent(e){switch(e.subtype){case"adjustPanConstraints":this._panning&&this._constrainPanning(e.newZoom);break;case"zooming":case"elasticAnimBegin":this._updateAnimator(e,!0);break;case"zoomed":var a=e.newZoom;if(null!=a){var i=this._pzc.getContentPane().getMatrix();e.animator=null,this.dispatchEvent(t.EventFactory.newThematicMapViewportChangeEvent(i.getTx(),i.getTy(),a)),this._transformContainers(i);for(var r=0;r<this._layers.length;r++)this._layers[r].HandleZoomEvent(e,i)}break;case"zoomAndCenter":this.fitSelectedRegions();break;case"zoomToFitEnd":this.dispatchEvent(t.EventFactory.newThematicMapViewportChangeEvent())}}HandlePanEvent(e){var a=e.subtype;if("elasticAnimBegin"===a||"panning"===a)this._updateAnimator(e,!1);else if("panned"===a&&null!=e.newX){var i=this._pzc.getContentPane().getMatrix();e.animator=null,this.dispatchEvent(t.EventFactory.newThematicMapViewportChangeEvent(i.getTx(),i.getTy(),this._pzc.getZoom())),this._transformContainers(i);for(var r=0;r<this._layers.length;r++)this._layers[r].HandlePanEvent(i)}}setZooming(e){this._zooming=e}setPanning(e){this._panning=e}_zoomData(){var e=this._dataAreaLayers.getDimensions(),a=this._dataPointLayers.getDimensions();if(this.isMarkerZoomBehaviorFixed()){var i=this._pzc.getContentPane().getMatrix();a.w/=i.getA(),a.h/=i.getD(),a.x/=i.getA(),a.y/=i.getD()}var r,s,n=e.getUnion(a);this.StopAnimation(!0),this._pzc.isZoomingEnabled()||(r=this._pzc.getMaxZoom(),this._pzc.setMaxZoom(r*this.DEFAULT_MAX_ZOOM_FACTOR)),t.Agent.isEnvironmentTest()||(s=new t.Animator(this.getCtx(),.3)),n.w>0&&n.h>0?this._pzc.zoomToFit(s,n):this._pzc.zoomToFit(s,this._areaLayer.getLayerDim()),s&&s.play(),r&&this._pzc.setMaxZoom(r)}_zoomToFitBounds(e){var a=new t.Animator(this.getCtx(),.3);this._pzc.zoomToFit(a,e),a.play()}fitRegion(e){e||(e=this._zoomToFitObject),e||(e=this._clickedObject),this._zoomToFitBounds(e.getDimensions())}fitSelectedRegions(){if(this._clickedDataLayerId){var e=this.getLayer(this._clickedLayerName).getDataLayer(this._clickedDataLayerId);if(e){var t=e._selectionHandler;if(t){for(var a=t.getSelection(),i=0;i<a.length;i++)a[i]=a[i].getDisplayable();if(a.length>0){for(var r=a[0].getDimensions(),s=1;s<a.length;s++)r=r.getUnion(a[s].getDimensions());this._zoomToFitBounds(r)}}}}}fitMap(){var e=new t.Animator(this.getCtx(),.3);this._pzc.zoomToFit(e),e.play()}getNavigableAreas(){var e=[];if(this._areaLayer){var t=this._areaLayer.getDataLayers();for(var a in t)e=e.concat(t[a].getNavigableAreaObjs())}return e}getNavigableMarkers(){for(var e=[],t=0;t<this._layers.length;t++){var a=this._layers[t].getDataLayers();for(var i in a)e=e.concat(a[i].getMarkerObjs())}return e}getNavigableLinks(){for(var e=[],t=0;t<this._layers.length;t++){var a=this._layers[t].getDataLayers();for(var i in a)e=e.concat(a[i].getLinkObjs())}return e}_setCenteredObjsMatrix(e){if(this._currentAnimMatrix=e,this.isMarkerZoomBehaviorFixed()){for(var t=this.getNavigableMarkers(),a=0;a<t.length;a++)t[a].HandleZoomEvent(e);for(var i=this._labelLayers.getNumChildren(),s=0;s<i;s++)for(var n=this._labelLayers.getChildAt(s),o=n.getNumChildren(),l=0;l<o;l++){var h=n.getChildAt(l);h instanceof r&&h.update(e)}}}_getCenteredObjsMatrix(){return this._currentAnimMatrix}setClickInfo(e,t,a){this._clickedLayerName=t,this._clickedDataLayerId=e,this._clickedObject=a}dispatchEvent(e){"selection"===e.type&&this._handleSelectionEvent(e),super.dispatchEvent(e)}_handleSelectionEvent(e){if(this._clickedDataLayerId){this._selectedRowKeys=e.selection;var a=this.getLayer(this._clickedLayerName).getDataLayer(this._clickedDataLayerId);this._selectedAreas[this._clickedLayerName]=a.getSelectedAreas(this._selectedRowKeys),e.clientId=this._clickedDataLayerId,this._clickedObject&&!(this._clickedObject instanceof t.SimpleMarker||this._clickedObject instanceof t.ImageMarker)&&(this._zoomToFitObject=this._clickedObject)}else this._zoomToFitObject=null}destroy(){for(var e=this.getAllLayers(),t=0;t<e.length;t++)e[t].destroy();super.destroy(this)}OnAnimEnd(){this._oldPzc&&(this.removeChild(this._oldPzc),this._oldPzc.destroy(),this._oldPzc=null),this._renderCompleted(),this._initialZooming&&this._zoomData(),this.Options.highlightedCategories&&this.Options.highlightedCategories.length>0&&this.highlight(this.Options.highlightedCategories),this._bListenersRemoved&&(this.EventManager.addListeners(this),this._bListenersRemoved=!1)}getAutomation(){return this.Automation||(this.Automation=new c(this)),this.Automation}highlight(e){this.Options.highlightedCategories=t.JsonUtils.clone(e),t.CategoryRolloverHandler.highlight(e,this.getNavigableAreas().concat(this.getNavigableMarkers()).concat(this.getNavigableLinks()),"any"===this.Options.highlightMatch)}processDefaultHoverEffect(e,t){var a=this._getDataItemById(e);a&&a.processDefaultHoverEffect(t)}processDefaultSelectionEffect(e,t){var a=this._getDataItemById(e);a&&a.processDefaultSelectionEffect(t)}processDefaultFocusEffect(e,t){var a=this._getDataItemById(e);a&&a.processDefaultFocusEffect(t)}handleTouchStart(){}handleTouchEnd(){this._clearTouchEventContent(),this._touchEventContentMarkerRef&&this._touchEventContentMarkerRef.handleTouchEnd&&(this._touchEventContentMarkerRef.handleTouchEnd(),this._touchEventContentMarkerRef=null)}_getDataItemById(e){for(var a=this.getCtx(),i=0;i<this._layers.length;i++){var r=this._layers[i].getDataLayers();for(var s in r)for(var n=r[s].getMarkerObjs(),o=0;o<n.length;o++)if(t.Obj.compareValues(a,n[o].getId(),e))return n[o]}return null}storeTouchEventContent(e,a){this._touchEventLayer&&e&&(this._touchEventContentMarkerRef=a,e.namespaceURI===t.ToolkitUtils.SVG_NS?t.ToolkitUtils.appendChildElem(this._touchEventLayer.getElem(),e):Array.isArray(e)&&e.forEach(function(e){t.ToolkitUtils.appendChildElem(this._touchEventLayer.getElem(),e)}.bind(this)))}_clearTouchEventContent(){if(this._touchEventLayer)for(var e=this._touchEventLayer.getElem();e.firstChild;)e.removeChild(e.firstChild)}}e.ThematicMap=D,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojthematicmap-toolkit.js.map