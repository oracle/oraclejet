{"version":3,"names":["define","ojMap","ojSet","ojdataprovider","ojeventtarget","Logger","Object","prototype","hasOwnProperty","call","JoiningDataProvider","constructor","baseDataProvider","options","_a","_b","this","_mapJoinAttributes","Map","_fks","_transform","_joinDPs","JoiningAsyncIterable","_parent","params","_asyncIterator","JoiningAsyncIterator","Symbol","asyncIterator","_baseIterator","_params","_fetchNext","signal","wrapWithAbortHandling","resolve","next","then","result","baseResult","undefined","value","_joiningData","data","joinedData","FetchByKeysResults","fetchParameters","results","_FETCHPARAMETERS","_RESULTS","FetchByOffsetResults","done","_DONE","Item","metadata","_METADATA","_DATA","ItemMetadata","key","_KEY","_getJoinSpec","fetchFirst","baseParams","FilterUtils","validateFilterCapabilities","getCapability","filterCriterion","attributes","_separateBaseJoinAttributes","asyncIterable","fetchByKeys","baseAttributes","keys","scope","baseResults","metaData","keyValues","i","forEach","_fetchByKeyResultsToArray","joinData","set","fetchByOffset","clientId","offset","size","sortCriteria","length","resultArray","containsKeys","getTotalSize","totalSize","isEmpty","capabilityName","createOptimizedKeySet","initialSet","createOptimizedKeyMap","initialMap","map","joins","_joinAlias","joinInfo","foreignKeyMapping","foreignKey","foreignKeys","transform","joinedDataProvider","origAttr","iBase","attr","alias","String","name","bJoinAlias","j","has","joinAttrs","get","concat","k","fk","includes","Array","baseData","Promise","fkValues","promises","_getFKValues","joinDP","capability","implementation","warn","all","resultMetadata","resultData","_assignAliasData","fks","vals","transformParam","item","aliasData","_REFRESH","_MUTATE","_ADDEVENTLISTENER","EventTargetMixin","applyMixin"],"sources":["../debug/ojjoiningdataprovider.js"],"mappings":"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"}