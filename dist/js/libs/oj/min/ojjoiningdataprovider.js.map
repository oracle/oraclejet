{"version":3,"names":["define","ojMap","ojSet","ojdataprovider","ojeventtarget","Logger","Object","prototype","hasOwnProperty","call","JoiningDataProvider","constructor","baseDataProvider","options","_a","_b","this","_mapJoinAttributes","Map","_fks","_transform","_joinDPs","JoiningAsyncIterable","_parent","params","_asyncIterator","JoiningAsyncIterator","Symbol","asyncIterator","_baseIterator","_params","_fetchNext","signal","aborted","reason","Promise","reject","DOMException","resolve","addEventListener","e","next","then","result","baseResult","undefined","value","_joiningData","data","joinedData","FetchByKeysResults","fetchParameters","results","_FETCHPARAMETERS","_RESULTS","FetchByOffsetResults","done","_DONE","Item","metadata","_METADATA","_DATA","ItemMetadata","key","_KEY","_getJoinSpec","fetchFirst","baseParams","FilterUtils","validateFilterCapabilities","getCapability","filterCriterion","attributes","_seperateBaseJoinAttributes","asyncIterable","fetchByKeys","baseAttributes","keys","scope","baseResults","metaData","keyValues","i","forEach","_fetchByKeyResultsToArray","joinData","set","fetchByOffset","clientId","offset","size","sortCriteria","length","resultArray","containsKeys","getTotalSize","totalSize","isEmpty","capabilityName","createOptimizedKeySet","initialSet","createOptimizedKeyMap","initialMap","map","joins","_joinAlias","joinInfo","foreignKeyMapping","foreignKey","foreignKeys","transform","joinedDataProvider","origAttr","iBase","attr","alias","String","name","bJoinAlias","j","has","joinAttrs","get","concat","k","fk","includes","Array","baseData","fkValues","promises","_getFKValues","joinDP","capability","implementation","warn","all","resultMetadata","resultData","_assignAliasData","fks","vals","transformParam","item","aliasData","_REFRESH","_MUTATE","_ADDEVENTLISTENER","EventTargetMixin","applyMixin"],"sources":["../debug/ojjoiningdataprovider.js"],"mappings":";;;;;;;AAOAA,OAAO,CAAC,YAAa,YAAa,qBAAsB,oBAAqB,gBAAiB,SAAUC,EAAOC,EAAOC,EAAgBC,EAAeC,GAAU,aAE3JJ,EAAQA,GAASK,OAAOC,UAAUC,eAAeC,KAAKR,EAAO,WAAaA,EAAe,QAAIA,EAC7FC,EAAQA,GAASI,OAAOC,UAAUC,eAAeC,KAAKP,EAAO,WAAaA,EAAe,QAAIA;;;;;;AA0O7F,MAAMQ,EACFC,YAAYC,EAAkBC,GAC1B,IAAIC,EAAIC,EACRC,KAAKJ,iBAAmBA,EACxBI,KAAKH,QAAUA,EACfG,KAAKC,mBAAqB,IAAIC,IAC9BF,KAAKG,KAAO,GACZH,KAAKI,WAAa,GAClBJ,KAAKK,SAAW,GAChBL,KAAKM,sBAAwBP,EAAK,MAC1BJ,YAAYY,EAASC,EAAQC,GACzBT,KAAKO,QAAUA,EACfP,KAAKQ,OAASA,EACdR,KAAKS,eAAiBA,EACtBT,KAAKF,GAAM,IACA,IAAIE,KAAKO,QAAQG,qBAAqBV,KAAKO,QAASP,KAAKS,eAAgBT,KAAKQ,OAE7F,GAEJV,EAAKa,OAAOC,cACZb,GACJC,KAAKU,qBAAuB,MACxBf,YAAYY,EAASM,EAAeC,GAChCd,KAAKO,QAAUA,EACfP,KAAKa,cAAgBA,EACrBb,KAAKc,QAAUA,CACnB,CACAC,aACI,MAAMC,EAAShB,KAAKc,SAASE,OAC7B,GAAIA,GAAUA,EAAOC,QAAS,CAC1B,MAAMC,EAASF,EAAOE,OACtB,OAAOC,QAAQC,OAAO,IAAIC,aAAaH,EAAQ,cACnD,CACA,OAAO,IAAIC,QAAQ,CAACG,EAASF,KACzB,GAAIJ,EAAQ,CACR,MAAME,EAASF,EAAOE,OACtBF,EAAOO,iBAAiB,QAAUC,GACvBJ,EAAO,IAAIC,aAAaH,EAAQ,eAE/C,CACA,OAAOI,EAAQtB,KAAKa,cAAcY,OAAOC,KAAMC,GACpCA,GACR,EAEX,CACAF,OAEI,OADgBzB,KAAKe,aACNW,KAAME,GACCC,MAAdD,GACoBC,MAApBD,EAAWE,OACaD,MAAxB7B,KAAKO,QAAQV,QACNG,KAAKO,QACPwB,aAAaH,EAAWE,MAAME,KAAMhC,KAAKO,QAAQV,SACjD6B,KAAMO,IACPL,EAAWE,MAAME,KAAOC,EACjBL,IAIJA,EAGnB,GAEJ5B,KAAKkC,mBAAqB,MACtBvC,YAAYY,EAAS4B,EAAiBC,GAClCpC,KAAKO,QAAUA,EACfP,KAAKmC,gBAAkBA,EACvBnC,KAAKoC,QAAUA,EACfpC,KAAKN,EAAoB2C,kBAAoBF,EAC7CnC,KAAKN,EAAoB4C,UAAYF,CACzC,GAEJpC,KAAKuC,qBAAuB,MACxB5C,YAAYY,EAAS4B,EAAiBC,EAASI,GAC3CxC,KAAKO,QAAUA,EACfP,KAAKmC,gBAAkBA,EACvBnC,KAAKoC,QAAUA,EACfpC,KAAKwC,KAAOA,EACZxC,KAAKN,EAAoB2C,kBAAoBF,EAC7CnC,KAAKN,EAAoB4C,UAAYF,EACrCpC,KAAKN,EAAoB+C,OAASD,CACtC,GAEJxC,KAAK0C,KAAO,MACR/C,YAAYY,EAASoC,EAAUX,GAC3BhC,KAAKO,QAAUA,EACfP,KAAK2C,SAAWA,EAChB3C,KAAKgC,KAAOA,EACZhC,KAAKN,EAAoBkD,WAAaD,EACtC3C,KAAKN,EAAoBmD,OAASb,CACtC,GAEJhC,KAAK8C,aAAe,MAChBnD,YAAYY,EAASwC,GACjB/C,KAAKO,QAAUA,EACfP,KAAK+C,IAAMA,EACX/C,KAAKN,EAAoBsD,MAAQD,CACrC,GAEJ/C,KAAKiD,aAAapD,EACtB,CACAqD,WAAW1C,GACP,MAAM2C,EAAa3C,EACnBrB,EAAeiE,YAAYC,2BAA2BrD,KAAKsD,cAAc,UAAW9C,GAAQ+C,iBACxF/C,GAAUA,EAAOgD,WACjBL,EAAWK,WAAaxD,KAAKyD,4BAA4BjD,GAGzDR,KAAKC,mBAAqB,KAE9B,MAAMyD,EAAgB1D,KAAKJ,iBAAiBsD,WAAWC,GACvD,OAAO,IAAInD,KAAKM,qBAAqBN,KAAMQ,EAAQkD,EAAc/C,OAAOC,iBAC5E,CACA+C,YAAYnD,GACR,IAAI2C,EAAa3C,EACjB,GAAIA,GAAUA,EAAOgD,WAAY,CAC7B,MAAMI,EAAiB5D,KAAKyD,4BAA4BjD,GACxD2C,EAAa,CACTU,KAAMrD,EAAOqD,KACbL,WAAYI,EACZE,MAAOtD,EAAOsD,MAEtB,MAEI9D,KAAKC,mBAAqB,KAE9B,MAAMe,EAASR,GAAQQ,OACvB,GAAIA,GAAUA,EAAOC,QAAS,CAC1B,MAAMC,EAASF,EAAOE,OACtB,OAAOC,QAAQC,OAAO,IAAIC,aAAaH,EAAQ,cACnD,CACA,OAAO,IAAIC,QAAQ,CAACG,EAASF,KACzB,GAAIJ,EAAQ,CACR,MAAME,EAASF,EAAOE,OACtBF,EAAOO,iBAAiB,QAAUC,GACvBJ,EAAO,IAAIC,aAAaH,EAAQ,eAE/C,CACA,OAAOI,EAAQtB,KAAKJ,iBAAiB+D,YAAYR,GAAYzB,KAAMqC,IAC/D,MAAM3B,EAAU,IAAInD,EACpB,GAAmB4C,MAAfkC,GAAmDlC,MAAvBkC,EAAY3B,QAAsB,CAC9D,MAAMJ,EAAO,GACPgC,EAAW,GACXC,EAAY,GAClB,IAAIC,EAAI,EAMR,OALA1D,EAAOqD,KAAKM,QAASpB,IACjBkB,EAAUC,GAAKnB,EACfmB,GAAG,GAEPlE,KAAKoE,0BAA0BL,EAAaE,EAAWD,EAAUhC,GAC1DhC,KAAK+B,aAAaC,EAAMhC,KAAKH,SAAS6B,KAAM2C,IAC/CH,EAAI,EACJ1D,EAAOqD,KAAKM,QAASpB,IACG,OAAhBsB,EAASH,IACT9B,EAAQkC,IAAIvB,EAAK,IAAI/C,KAAK0C,KAAK1C,KAAMgE,EAASE,GAAIG,EAASH,KAE/DA,GAAG,GAEA,IAAIlE,KAAKkC,mBAAmBlC,KAAMQ,EAAQ4B,IAEzD,IACD,EAEX,CACAmC,cAAc/D,GACV,IAAI2C,EAAa3C,EAEjB,GADArB,EAAeiE,YAAYC,2BAA2BrD,KAAKsD,cAAc,UAAW9C,GAAQ+C,iBACxF/C,GAAUA,EAAOgD,WAAY,CAC7B,MAAMI,EAAiB5D,KAAKyD,4BAA4BjD,GACxD2C,EAAa,CACTK,WAAYI,EACZY,SAAUhE,EAAOgE,SACjBjB,gBAAiB/C,EAAO+C,gBACxBkB,OAAQjE,EAAOiE,OACfC,KAAMlE,EAAOkE,KACbC,aAAcnE,EAAOmE,aAE7B,MAEI3E,KAAKC,mBAAqB,KAE9B,MAAMe,EAASR,GAAQQ,OACvB,GAAIA,GAAUA,EAAOC,QAAS,CAC1B,MAAMC,EAASF,EAAOE,OACtB,OAAOC,QAAQC,OAAO,IAAIC,aAAaH,EAAQ,cACnD,CACA,OAAO,IAAIC,QAAQ,CAACG,EAASF,KACzB,GAAIJ,EAAQ,CACR,MAAME,EAASF,EAAOE,OACtBF,EAAOO,iBAAiB,QAAUC,GACvBJ,EAAO,IAAIC,aAAaH,EAAQ,eAE/C,CACA,OAAOI,EAAQtB,KAAKJ,iBACf2E,cAAcpB,GACdzB,KAAME,IACP,GAA0BC,MAAtBD,EAAWQ,QAAsB,CACjC,MAAM4B,EAAW,GACXhC,EAAO,GACb,IAAK,IAAIkC,EAAI,EAAGA,EAAItC,EAAWQ,QAAQwC,OAAQV,IAC3CF,EAASE,GAAKtC,EAAWQ,QAAQ8B,GAAGvB,SACpCX,EAAKkC,GAAKtC,EAAWQ,QAAQ8B,GAAGlC,KAEpC,MAAM6C,EAAc,GACpB,OAAO7E,KAAK+B,aAAaC,EAAMhC,KAAKH,SAAS6B,KAAM2C,IAC/C,IAAK,IAAIH,EAAI,EAAGA,EAAItC,EAAWQ,QAAQwC,OAAQV,IAC3CW,EAAYX,GAAK,IAAIlE,KAAK0C,KAAK1C,KAAMgE,EAASE,GAAIG,EAASH,IAE/D,OAAO,IAAIlE,KAAKuC,qBAAqBvC,KAAMQ,EAAQqE,EAAajD,EAAWY,KAAK,EAExF,IACD,EAEX,CACAsC,aAAatE,GACT,OAAOR,KAAKJ,iBAAiBkF,aAAatE,GAAQkB,KAAMqC,GAC7CA,EAEf,CACAgB,eACI,OAAO/E,KAAKJ,iBAAiBmF,eAAerD,KAAMsD,GACvCA,EAEf,CACAC,UACI,OAAOjF,KAAKJ,iBAAiBqF,SACjC,CACA3B,cAAc4B,GACV,MAAuB,SAAnBA,GAAgD,WAAnBA,EACtB,KAGAlF,KAAKJ,iBAAiB0D,cAAc4B,EAEnD,CACAC,sBAAsBC,GAClB,OAAO,IAAIlG,EAAMkG,EACrB,CACAC,sBAAsBC,GAClB,GAAIA,EAAY,CACZ,MAAMC,EAAM,IAAItG,EAIhB,OAHAqG,EAAWnB,QAAQ,SAAUrC,EAAOiB,GAChCwC,EAAIjB,IAAIvB,EAAKjB,EACjB,GACOyD,CACX,CACA,OAAO,IAAItG,CACf,CACAgE,aAAapD,GACT,MAAM2F,EAAQ3F,EAAQ2F,MACtBxF,KAAKyF,WAAanG,OAAOuE,KAAK2B,GAC9B,IAAK,IAAItB,EAAI,EAAGA,EAAIlE,KAAKyF,WAAWb,OAAQV,IAAK,CAC7C,MACMwB,EAAWF,EADHxF,KAAKyF,WAAWvB,IAEdrC,MAAZ6D,GAC6C7D,MAAzC6D,EAASC,kBAAkBC,WAC3B5F,KAAKG,KAAK+D,GAAKwB,EAASC,kBAAkBC,WAEK/D,MAA1C6D,EAASC,kBAAkBE,YAChC7F,KAAKG,KAAK+D,GAAKwB,EAASC,kBAAkBE,YAG1C7F,KAAKG,KAAK+D,GAAK,KAEyBrC,MAAxC6D,EAASC,kBAAkBG,UAC3B9F,KAAKI,WAAW8D,GAAKwB,EAASC,kBAAkBG,UAGhD9F,KAAKI,WAAW8D,GAAK,KAEzBlE,KAAKK,SAAS6D,GAAKwB,EAASK,qBAG5B/F,KAAKG,KAAK+D,GAAK,KACflE,KAAKK,SAAS6D,GAAK,KAE3B,CACJ,CACAT,4BAA4BjD,GACxBR,KAAKC,mBAAqB,IAAIC,IAC9B,MAAM8F,EAAWxF,EAAOgD,WACxB,IAAIyC,EAAQ,EACRrC,EAAiB,GACrB,IAAK,IAAIsC,KAAQF,EAAU,CACvB,IAAIG,EACA3C,EACA0C,aAAgBE,QAA0B,iBAATF,GACjCC,EAAQD,EACR1C,EAAa0C,IAGbC,EAAQD,EAAKG,KACb7C,EAAa0C,EAAK1C,YAEtB,IAAI8C,GAAa,EACjB,IAAK,IAAIC,EAAI,EAAsB,MAAnBvG,KAAKyF,YAAsBc,EAAIvG,KAAKyF,WAAWb,OAAQ2B,IACnE,GAAIJ,IAAUnG,KAAKyF,WAAWc,GAAI,CAC9BD,GAAa,EACb,KACJ,CAEJ,GAAIA,EACA,GAAItG,KAAKC,mBAAmBuG,IAAIL,GAAQ,CACpC,IAAIM,EAAYzG,KAAKC,mBAAmByG,IAAIP,GAC1BtE,MAAd2B,IACiB3B,MAAb4E,IACAA,EAAY,IAEhBA,EAAYA,EAAUE,OAAOnD,GAC7BxD,KAAKC,mBAAmBqE,IAAI6B,EAAOM,GAE3C,MAEIzG,KAAKC,mBAAmBqE,IAAI6B,EAAO3C,QAIvCI,EAAeqC,GAASzC,EACxByC,GAER,CACA,IAAK,IAAIW,EAAI,EAAgB,MAAb5G,KAAKG,MAAgByG,EAAI5G,KAAKG,KAAKyE,OAAQgC,IAAK,CAC5D,MAAMC,EAAK7G,KAAKG,KAAKyG,GAChBhD,EAAekD,SAASD,KACrBA,aAAcE,MACdnD,EAAiBA,EAAe+C,OAAOE,IAGvCjD,EAAeqC,GAASjG,KAAKG,KAAKyG,GAClCX,KAGZ,CACA,OAAOrC,CACX,CACA7B,aAAaiF,EAAUnH,GACnB,GAAgBgC,MAAZmF,GAA4C,GAAnBA,EAASpC,QAAgC/C,MAAjBhC,EAAQ2F,MACzD,OAAOrE,QAAQG,QAAQ0F,GAE3B,MAAMC,EAAW,GACXC,EAAW,GACjBlH,KAAKmH,aAAaH,EAAUhH,KAAKG,KAAMH,KAAKI,WAAY6G,GACxD,IAAK,IAAI/C,EAAI,EAAGA,EAAIlE,KAAKyF,WAAWb,OAAQV,IAAK,CAC7C,MAAMkD,EAASpH,KAAKK,SAAS6D,GACvBmD,EAAaD,EAAO9D,cAAc,eAIxC,GAHkB,MAAd+D,GAAoD,gBAA9BA,EAAWC,gBACjCjI,EAAOkI,KAAK,4CAA4CvH,KAAKyF,WAAWvB,gFAE9D,MAAVkD,EACAF,EAAShD,GAAK,UAGd,GAA+B,MAA3BlE,KAAKC,mBACLiH,EAAShD,GAAKkD,EAAOzD,YAAY,CAAEE,KAAMoD,EAAS/C,UAEjD,GAAKlE,KAAKC,mBAAmBuG,IAAIxG,KAAKyF,WAAWvB,IAGjD,CACD,MAAMgC,EAAOlG,KAAKC,mBAAmByG,IAAI1G,KAAKyF,WAAWvB,IACzDgD,EAAShD,GAAKkD,EAAOzD,YAAY,CAC7BE,KAAMoD,EAAS/C,GACfV,WAAY0C,GAEpB,MARIgB,EAAShD,GAAK,IAU1B,CACA,OAAO/C,QAAQqG,IAAIN,GAAUxF,KAAMU,IAC/B,MAAMqF,EAAiB,GACjBC,EAAa,GACnB,IAAK,IAAIxD,EAAI,EAAc,MAAX9B,GAAmB8B,EAAI9B,EAAQwC,OAAQV,KACpB,MAA3BlE,KAAKC,oBAA8BD,KAAKC,mBAAmBuG,IAAIxG,KAAKyF,WAAWvB,OAC/ElE,KAAKoE,0BAA0BhC,EAAQ8B,GAAI+C,EAAS/C,GAAIuD,EAAgBC,GACxE1H,KAAK2H,iBAAiBX,EAAUhH,KAAKyF,WAAWvB,GAAIwD,IAG5D,OAAOV,CAAQ,EAEvB,CACAG,aAAaH,EAAUY,EAAK9B,EAAWmB,GACnC,IAAK,IAAI/C,EAAI,EAAGA,EAAI0D,EAAIhD,OAAQV,IAAK,CACjC,MAAM2D,EAAO,GACb,IAAK,IAAItB,EAAI,EAAGA,EAAIS,EAASpC,OAAQ2B,IACjC,GAAmB,MAAfS,EAAST,IAAwB,MAAVqB,EAAI1D,GAC3B,GAAiBrC,MAAbiE,GAA0CjE,MAAhBiE,EAAU5B,IAAmC,MAAhB4B,EAAU5B,GAAY,CAC7E,MAAM4D,EAAiB,IAAIxI,OAC3B,GAAIsI,EAAI1D,aAAc6C,MAClB,IAAK,IAAIF,KAAMe,EAAI1D,GACf4D,EAAejB,GAAMG,EAAST,GAAGM,QAIrCiB,EAAeF,EAAI1D,IAAM8C,EAAST,GAAGqB,EAAI1D,IAE7C2D,EAAKtB,GAAKT,EAAU5B,GAAG4D,EAC3B,MAEI,GAAIF,EAAI1D,aAAc6C,MAAO,CACzBc,EAAKtB,GAAK,GACV,IAAK,IAAIK,EAAI,EAAGA,EAAIgB,EAAI1D,GAAGU,OAAQgC,IAC/BiB,EAAKtB,GAAGK,GAAKI,EAAST,GAAGqB,EAAI1D,GAAG0C,GAExC,MAEIiB,EAAKtB,GAAKS,EAAST,GAAGqB,EAAI1D,SAKlC2D,EAAKtB,GAAK,KAGlBU,EAAS/C,GAAK2D,CAClB,CACJ,CACAzD,0BAA0BzC,EAAQsC,EAAWD,EAAUhC,GACnD,GAAcH,MAAVF,GAAyCE,MAAlBF,EAAOS,SAAgD,IAAxBT,EAAOS,QAAQsC,KACrE,IAAK,IAAIR,EAAI,EAAGA,EAAID,EAAUW,OAAQV,IAAK,CACvC,MAAM6D,EAAOpG,EAAOS,QAAQsE,IAAIzC,EAAUC,IAC9BrC,MAARkG,GACA/D,EAASE,GAAK6D,EAAKpF,SACnBX,EAAKkC,GAAK6D,EAAK/F,OAGfgC,EAASE,GAAK,KACdlC,EAAKkC,GAAK,KAElB,CAER,CACAyD,iBAAiBX,EAAUb,EAAO6B,GAC9B,IAAK,IAAI9D,EAAI,EAAGA,EAAI8C,EAASpC,OAAQV,IACd,MAAf8C,EAAS9C,IAA2BrC,MAAbmG,IACvBhB,EAAS9C,GAAGiC,GAAS6B,EAAU9D,GAG3C,EAaJ,OAXAxE,EAAoBuI,SAAW,UAC/BvI,EAAoBwI,QAAU,SAC9BxI,EAAoByI,kBAAoB,mBACxCzI,EAAoBmD,MAAQ,OAC5BnD,EAAoBkD,UAAY,WAChClD,EAAoB2C,iBAAmB,kBACvC3C,EAAoB4C,SAAW,UAC/B5C,EAAoB+C,MAAQ,OAC5B/C,EAAoBsD,KAAO,MAC3B5D,EAAcgJ,iBAAiBC,WAAW3I,GAEnCA,CAEX"}