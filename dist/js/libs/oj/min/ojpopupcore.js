/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define(["exports","ojs/ojcore-base","jquery","ojs/ojcomponentcore","ojs/ojlogger","ojs/ojdomutils","ojs/ojpreact-patch","jqueryui-amd/position","ojs/ojcontext","preact"],function(t,e,o,i,n,r,s,a,l,p){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o,l=l&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l;const c=function(t){this._tapCallback=t,this.Init()};e._registerLegacyNamespaceProp("SimpleTapRecognizer",c),e.Object.createSubclass(c,e.Object,"oj.SimpleTapRecognizer"),c.prototype.Init=function(){c.superclass.Init.call(this);var t=this._eventHandler.bind(this);this._eventHandlerCallback=t;for(var e,o=document.documentElement,i=0;i<c._TOUCHEVENTS.length;i++)"touchstart"===(e=c._TOUCHEVENTS[i])||"touchmove"===e?o.addEventListener(e,t,{passive:!1,capture:!0}):o.addEventListener(e,t,!0)},c.prototype._eventHandler=function(t){var e=this._tapCallback,o=t.type;if("touchstart"===o)this._touchStartEvent=t,this._touchStartEvent._tapStart=(new Date).getTime();else if("touchmove"===o||"touchcancel"===o)this._touchStartEvent=null;else if("touchend"===o){if(this._touchStartEvent){var i=this._touchStartEvent._tapStart;if(isNaN(i))e(this._touchStartEvent);else(new Date).getTime()-i<c._PRESSHOLDTHRESSHOLD&&e(this._touchStartEvent)}this._touchStartEvent=null}},c.prototype.destroy=function(){this._tapCallback=null;var t=this._eventHandlerCallback;this._eventHandlerCallback=null;for(var e,o=document.documentElement,i=0;i<c._TOUCHEVENTS.length;i++)"touchstart"===(e=c._TOUCHEVENTS[i])||"touchmove"===e?o.removeEventListener(e,t,{passive:!1,capture:!0}):o.removeEventListener(e,t,!0)},c._TOUCHEVENTS=["touchstart","touchmove","touchcancel","touchend"],c._PRESSHOLDTHRESSHOLD=700;const u=function(){this.Init()};e._registerLegacyNamespaceProp("PopupService",u),e.Object.createSubclass(u,e.Object,"oj.PopupService");const h=function(){this.Init()},_={};u.prototype.Init=function(){u.superclass.Init.call(this)},u.getInstance=function(t){return u._popupService||(u._popupService=new h),u._popupService},u.prototype.open=function(t){e.Assert.failedInAbstractFunction()},u.prototype.close=function(t){e.Assert.failedInAbstractFunction()},u.prototype.changeOptions=function(t){e.Assert.failedInAbstractFunction()},u.prototype.triggerOnDescendents=function(t,o,i){e.Assert.failedInAbstractFunction()},u.prototype.destroy=function(){u._popupService=null},u.MODALITY={NONE:"none",MODAL:"modal",MODELESS:"modeless"},u.EVENT={POPUP_REMOVE:"ojPopupRemove",POPUP_CLOSE:"ojPopupClose",POPUP_REFRESH:"ojPopupRefresh",POPUP_AUTODISMISS:"ojPopupAutoDismiss",POPUP_BEFORE_OPEN:"ojPopupBeforeOpen",POPUP_AFTER_OPEN:"ojPopupAfterOpen",POPUP_BEFORE_CLOSE:"ojPopupBeforeClose",POPUP_AFTER_CLOSE:"ojPopupAfterClose"},u.LAYER_LEVEL={TOP_LEVEL:"topLevel",NEAREST_ANCESTOR:"nearestAncestor"},u.OPTION={POPUP:"popup",EVENTS:"events",MODALITY:"modality",LAUNCHER:"launcher",POSITION:"position",LAYER_SELECTORS:"layerSelectors",LAYER_LEVEL:"layerLevel",CONTEXT:"context",CUSTOM_ELEMENT:"customElement"},e.__registerWidget("oj.ojSurrogate",o.oj.baseComponent,{version:"1.0.0",widgetEventPrefix:"oj",options:{beforeDestroy:null},_ComponentCreate:function(){this._super(),this.element.uniqueId()},_invokeBeforeDestroy:function(){var t=this.options.beforeDestroy;this.options.beforeDestroy=null,t&&t()},_destroy:function(){this._invokeBeforeDestroy(),this.element.removeUniqueId(),this._super()},_NotifyDetached:function(){this._invokeBeforeDestroy(),this._super()}});e.CustomElementBridge.register("oj-surrogate",{metadata:{properties:{beforeDestroy:{type:"function"}},extension:{_WIDGET_NAME:"ojSurrogate"}}}),e._registerLegacyNamespaceProp("PopupServiceImpl",h),e.Object.createSubclass(h,u,"oj.PopupServiceImpl"),h.prototype.open=function(t){e.Assert.assertObject(t);var s=t[u.OPTION.POPUP];e.Assert.assertPrototype(s,o);var a=_.getStatus(s);if(a===_.STATUS.UNKNOWN||a===_.STATUS.BEFORE_OPEN||a===_.STATUS.CLOSE){var l=t[u.OPTION.LAUNCHER];e.Assert.assertPrototype(l,o);var p=t[u.OPTION.POSITION];e.Assert.assertObjectOrNull(p);var c=t[u.OPTION.EVENTS];e.Assert.assertObject(c);var f=t[u.OPTION.MODALITY];(!f||u.MODALITY.MODELESS!==f&&u.MODALITY.MODAL!==f)&&(f=u.MODALITY.NONE);var E=t[u.OPTION.LAYER_SELECTORS];e.Assert.assertString(E);var d=t[u.OPTION.CUSTOM_ELEMENT],g=t[u.OPTION.LAYER_LEVEL];(!g||u.LAYER_LEVEL.TOP_LEVEL!==g&&u.LAYER_LEVEL.NEAREST_ANCESTOR!==g)&&(g=u.LAYER_LEVEL.NEAREST_ANCESTOR);var T=c[u.EVENT.POPUP_BEFORE_OPEN];T&&o.isFunction(T)||(T=h._defaultBeforeOpenCallback);var v=c[u.EVENT.POPUP_AFTER_OPEN];_.setStatus(s,_.STATUS.OPENING),r.setLogicalParent(s,l),_.addToAncestorLayer(s,l,f,E,g,d);var O,S=function(){try{s.removeAttr("aria-hidden"),this._assertEventSink(),i.subtreeShown(s[0])}catch(t){n.error("Error opening popup:\n%o",t)}finally{_.setStatus(s,_.STATUS.OPEN),v&&v(t);var r=_.getFirstAncestorLayer(s);if(e.Assert.assertPrototype(r,o),_.applyEvents(r,c),!_._getSurrogate(r)&&o.isFunction(c[u.EVENT.POPUP_REMOVE]))(0,c[u.EVENT.POPUP_REMOVE])()}};S=S.bind(this);try{O=T(t)}catch(t){n.error("Error before open popup:\n%o",t)}finally{O&&O instanceof Promise?O.then(S):S()}}else this._assertEventSink()},h._defaultBeforeOpenCallback=function(t){var i=t[u.OPTION.POPUP];e.Assert.assertPrototype(i,o);var n=t[u.OPTION.POSITION];i.show(),n&&i.position(n)},h.prototype.close=function(t){e.Assert.assertObject(t);var s=t[u.OPTION.POPUP];e.Assert.assertPrototype(s,o);var a=_.getOpenPopupLayer(s);e.Assert.assertPrototype(a,o);var l=t[u.OPTION.EVENTS];l?l=o.extend(_.getEvents(a),l):(l=_.getEvents(a),t[u.OPTION.EVENTS]=l);var p=_.getStatus(s);if(p!==_.STATUS.OPEN&&p!==_.STATUS.BEFORE_CLOSE||!l)this._assertEventSink();else{var c=l[u.EVENT.POPUP_BEFORE_CLOSE];c&&o.isFunction(c)||(c=h._defaultBeforeCloseCallback);var f=l[u.EVENT.POPUP_AFTER_CLOSE];_.setStatus(s,_.STATUS.CLOSING),_.applyEvents(a,{}),s.attr("aria-hidden","true");var E,d=function(){try{s.hide(),s.css({top:"auto",bottom:"auto",left:"auto",right:"auto"}),_.removeFromAncestorLayer(s),r.setLogicalParent(s,null),this._assertEventSink(),i.subtreeHidden(s[0])}catch(t){n.error("Error closing popup:\n%o",t)}finally{_.setStatus(s,_.STATUS.CLOSE),f&&o.isFunction(f)&&f(t)}};d=d.bind(this);try{E=c(t)}catch(t){n.error("Error before close popup:\n%o",t)}finally{E&&E instanceof Promise?E.then(d):d()}}},h._defaultBeforeCloseCallback=function(t){var i=t[u.OPTION.POPUP];e.Assert.assertPrototype(i,o),i.hide()},h.prototype.changeOptions=function(t){e.Assert.assertObject(t);var i=t[u.OPTION.POPUP];if(e.Assert.assertPrototype(i,o),_.getStatus(i)===_.STATUS.OPEN){var n=_.getOpenPopupLayer(i);e.Assert.assertPrototype(n,o);var r=t[u.OPTION.EVENTS];r&&_.applyEvents(n,r);var s=t[u.OPTION.MODALITY];s&&_.applyModality(n,s);var a=t[u.OPTION.LAYER_SELECTORS];e.StringUtils.isEmptyOrUndefined(a)||n.attr("class",a)}},h.prototype.triggerOnDescendents=function(t,e,o){if(_.isPopupOpen(t)){var i={};i.event=e,i.argsArray=o;var n=_.getFirstAncestorLayer(t);_.postOrderVisit(n,this._triggerOnDescendentsVisitCallback,i)}},h.prototype._triggerOnDescendentsVisitCallback=function(t,e){var i=e.event,n=e.argsArray,r=_.getEvents(t);return r&&o.isFunction(r[i])&&r[i].apply(this,n),_.VISIT_RESULT.ACCEPT},h.prototype._assertEventSink=function(){var t,e,o,i=_.hasPopupsOpen(),n=this._callbackEventFilter;if(!i&&n){for(window.removeEventListener("resize",h._refreshCallback,!0),window.removeEventListener("scroll",h._refreshCallback,!0),(e=document.documentElement).removeEventListener("mousewheel",h._refreshCallback,{passive:!0,capture:!0}),e.removeEventListener("DOMMouseScroll",h._refreshCallback,!0),this._callbackEventFilter=null,t=0;t<h._REDISTRIBUTE_EVENTS.length;t++)o=h._REDISTRIBUTE_EVENTS[t],e.removeEventListener(o,n,!0);var s=this._simpleTapRecognizer;s&&(s.destroy(),this._simpleTapRecognizer=null)}else if(i&&!n){for(window.addEventListener("resize",h._refreshCallback,!0),window.addEventListener("scroll",h._refreshCallback,!0),(e=document.documentElement).addEventListener("mousewheel",h._refreshCallback,{passive:!0,capture:!0}),e.addEventListener("DOMMouseScroll",h._refreshCallback,!0),n=this._eventFilterCallback.bind(this),this._callbackEventFilter=n,t=0;t<h._REDISTRIBUTE_EVENTS.length;t++)o=h._REDISTRIBUTE_EVENTS[t],e.addEventListener(o,n,!0);r.isTouchSupported()&&(this._simpleTapRecognizer=new c(n))}},h.prototype._eventFilterCallback=function(t){var e=o(t.target);if(_.hasPopupsOpen()){if(!r.isChromeEvent(t)&&("focus"!==t.type||e.is(":focusable"))){var i=_.getDefaultLayer();if("keydown"!==t.type||!_.hasModalDialogOpen()||r.isAncestor(i[0],e[0])){var n=_.getFirstAncestorLayer(e),s=i.find("."+h._FOCUS_WITHIN_SELECTOR).first();if(i[0]!==n[0]?n.hasClass(h._FOCUS_WITHIN_SELECTOR)||(s.length&&s.removeClass(h._FOCUS_WITHIN_SELECTOR),n.addClass(h._FOCUS_WITHIN_SELECTOR)):s.length&&s.removeClass(h._FOCUS_WITHIN_SELECTOR),"focus"!==t.type||"-1"!==e.attr("tabindex")){for(var a={},l=h._COPY_SAFE_EVENT_PROPERTIES,p={},c=0;c<l.length;c++){var u=l[c],f=t[u];void 0===f||o.isFunction(f)||(p[u]=f)}a.event=o.Event(t,p),_.postOrderVisit(i,h._redistributeVisitCallback,a)}}else _.eatEvent(t)}}else this._assertEventSink()},h._redistributeVisitCallback=function(t,e){var i=_.getEvents(t),n=e.event;return i&&o.isFunction(i[u.EVENT.POPUP_AUTODISMISS])&&i[u.EVENT.POPUP_AUTODISMISS](n),_.VISIT_RESULT.ACCEPT},h._refreshCallback=function(t){isNaN(h._refreshTimerId)&&(h._refreshTimerId=window.setTimeout(function(){h._refreshTimerId=Number.NaN;var t=_.getDefaultLayer();o.isFunction(window.requestAnimationFrame)?h._afRequestId=window.requestAnimationFrame(function(){h._afRequestId=null,_.postOrderVisit(t,h._refreshVisitCallback)}):_.postOrderVisit(t,h._refreshVisitCallback)},h._REFRESH_DELAY))},h._refreshVisitCallback=function(t,e){if(e.level>0)return _.VISIT_RESULT.REJECT;var i=_.getEvents(t);return i&&o.isFunction(i[u.EVENT.POPUP_REFRESH])&&i[u.EVENT.POPUP_REFRESH](),_.VISIT_RESULT.ACCEPT},h.prototype.destroy=function(){h.superclass.destroy.call(this)},h._FOCUS_WITHIN_SELECTOR="oj-focus-within",h._REDISTRIBUTE_EVENTS=["focus","mousedown","keydown"],h._COPY_SAFE_EVENT_PROPERTIES=["altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","relatedTarget","shiftKey","target","timeStamp","view","which","button","buttons","clientX","clientY","offsetX","offsetY","pageX","pageY","screenX","screenY","toElement","char","charCode","key","keyCode"],h._REFRESH_DELAY=10,e._registerLegacyNamespaceProp("ZOrderUtils",_),_.STATUS={UNKNOWN:0,BEFORE_OPEN:.5,OPENING:1,OPEN:2,BEFORE_CLOSE:2.5,CLOSING:3,CLOSE:4},_._STATUS_DATA="oj-popup-status",_.getStatus=function(t){t instanceof Element&&(t=o(t));var e=t.data(_._STATUS_DATA);return isNaN(e)?_.STATUS.UNKNOWN:e},_.setStatus=function(t,e){t instanceof Element&&(t=o(t)),e>_.STATUS.UNKNOWN&&e<=_.STATUS.CLOSE&&t.data(_._STATUS_DATA,e)},_.getFirstAncestorLayer=function(t){if(!t)return _.getDefaultLayer();for(var e=t;e&&e.length>0&&e.attr(_._SURROGATE_ATTR)!==_._DEFAULT_LAYER_ID;){if(_._hasSurrogate(e[0]))return e;e=e.parent()}return _.getDefaultLayer()},_.getDefaultLayer=function(){var t=o(document.getElementById(_._DEFAULT_LAYER_ID));return t.length>0||((t=o("<div>")).attr("role","presentation"),t.attr("id",_._DEFAULT_LAYER_ID),t.prependTo(o(document.body))),t},_.addToAncestorLayer=function(t,n,r,s,a,l){var p=t[0];if(_._hasSurrogate(p.parentNode))throw new Error("JET Popup is already open - id: "+p.getAttribute("id"));var c=_.getFirstAncestorLayer(a===u.LAYER_LEVEL.TOP_LEVEL?null:n),h=o("<div>"),f=t.attr("id");e.StringUtils.isEmptyOrUndefined(f)?h.uniqueId():h.attr("id",[f,"layer"].join("_")),h.attr("role","presentation"),h.addClass(s),t.after(h);const E=_._createSurrogate(h,l);i.subtreeDetached(p),t.appendTo(h),t.data(_._LAYER_ID_DATA,h.attr("id")),h.appendTo(c),i.subtreeAttached(p),_._applyVDomPatch(E[0],p),_.applyModality(h,r)},_._applyVDomPatch=function(t,e){t[s.OJ_POPUP]=e,s.patchPopupParent(t.parentElement)},_._getSurrogate=function(t){var e=t.attr(_._SURROGATE_ATTR);if(e)return document.getElementById(e)},_.applyEvents=function(t,e,n){n||(n=o(_._getSurrogate(t))),t.data(_._EVENTS_DATA,e),n.length>0&&e&&o.isFunction(e[u.EVENT.POPUP_REMOVE])&&i.setComponentOption(n[0],"beforeDestroy",e[u.EVENT.POPUP_REMOVE])},_.getEvents=function(t){return t.data(_._EVENTS_DATA)},_._createSurrogate=function(t,i){var n="script";i&&(n="oj-surrogate");var r=o(document.createElement(n)),s=t.attr("id");e.StringUtils.isEmptyOrUndefined(s)||r.attr("id",[s,"surrogate"].join("_")),i&&r.attr("data-oj-binding-provider","none"),r.insertBefore(t),i||r.ojSurrogate();var a=r.attr("id");return t.attr(_._SURROGATE_ATTR,a),r},_._removeSurrogate=function(t){var e=t.attr(_._SURROGATE_ATTR);t.removeAttr(_._SURROGATE_ATTR);var n=o(document.getElementById(e)),r=n.length>0;return r&&(t.insertAfter(n),i.setComponentOption(n[0],"beforeDestroy",null),n.remove()),r},_.getOpenPopupLayer=function(t){var e=t.parent();if(!e||0===e.length){var i=t.data(_._LAYER_ID_DATA);e=o(document.getElementById(i))}return e},_.removeFromAncestorLayer=function(t){var e=_.getOpenPopupLayer(t);_.preOrderVisit(e,_._closeDescendantPopupsCallback),_._removeOverlayFromAncestorLayer(e),e.removeData(_._EVENTS_DATA),e.removeData(_._MODALITY_DATA),t.removeData(_._LAYER_ID_DATA);var o=t[0];i.subtreeDetached(o),_._removeSurrogate(e)&&o&&o.parentElement?(r.unwrap(t,e),i.subtreeAttached(o)):e.remove()},_._closeDescendantPopupsCallback=function(t,e){if(e.level>0)return _.VISIT_RESULT.REJECT;var i=t.data(_._EVENTS_DATA);return i&&o.isFunction(i[u.EVENT.POPUP_CLOSE])&&i[u.EVENT.POPUP_CLOSE](),_.VISIT_RESULT.ACCEPT},_.applyModality=function(t,o){var i=t.data(_._MODALITY_DATA);t.data(_._MODALITY_DATA,o),e.StringUtils.isEmptyOrUndefined(i)?u.MODALITY.MODAL===o?_._addOverlayToAncestorLayer(t):_._removeOverlayFromAncestorLayer(t):i!==o&&(o!==i&&o===u.MODALITY.MODAL?_._addOverlayToAncestorLayer(t):_._removeOverlayFromAncestorLayer(t)),o===u.MODALITY.MODAL?t.attr("aria-modal","true"):t.removeAttr("aria-modal")},_.hasModalDialogOpen=function(){for(var t=_.getDefaultLayer().children(),e=t.length-1;e>-1;e--){if(o(t[e]).hasClass(_._OVERLAY_SELECTOR))return!0}return!1},_._addOverlayToAncestorLayer=function(t){var i=o("<div>");i.addClass(_._OVERLAY_SELECTOR),i.addClass(t[0].className),i.attr("role","presentation");var n=t.attr("id");e.StringUtils.isEmptyOrUndefined(n)?i.uniqueId():i.attr("id",[n,"overlay"].join("_")),t.before(i);var r=i.attr("id");t.attr(_._OVERLAY_ATTR,r)},_._removeOverlayFromAncestorLayer=function(t){var i=t.attr(_._OVERLAY_ATTR);e.StringUtils.isEmptyOrUndefined(i)||(t.removeAttr(_._OVERLAY_ATTR),o(document.getElementById(i)).remove())},_.VISIT_RESULT={ACCEPT:0,REJECT:1,COMPLETE:2},_._VISIT_TRAVERSAL={PRE_ORDER:0,POST_ORDER:1},_.postOrderVisit=function(t,e,o){var i=o;o||(i={}),i.level=0,i.type=_._VISIT_TRAVERSAL.POST_ORDER,_._visitTree(t,e,i)},_.preOrderVisit=function(t,e,o){var i=o;o||(i={}),i.level=0,i.type=_._VISIT_TRAVERSAL.PRE_ORDER,_._visitTree(t,e,i)},_._visitTree=function(t,e,i){for(var n=i.level,r=t.children(),s=r.length-1;s>-1;s--){var a=o(r[s]);if(_._hasSurrogate(a[0])){var l;if(i.type===_._VISIT_TRAVERSAL.PRE_ORDER){if((l=e(a,i))===_.VISIT_RESULT.COMPLETE)return l;if(l===_.VISIT_RESULT.REJECT)break}if(i.level=n+1,l=_._visitTree(a,e,i),i.level=n,l===_.VISIT_RESULT.COMPLETE)return l;if(i.type===_._VISIT_TRAVERSAL.POST_ORDER){if((l=e(a,i))===_.VISIT_RESULT.COMPLETE)return l;if(l===_.VISIT_RESULT.REJECT)break}}}return _.VISIT_RESULT.ACCEPT},_._hasSurrogate=function(t){return!(!t||1!==t.nodeType||!t.hasAttribute(_._SURROGATE_ATTR))},_.hasPopupsOpen=function(){return _.getDefaultLayer().children().length>0},_.getOpenPopupCount=function(){var t={popupCount:0},e=_.getDefaultLayer();return _.preOrderVisit(e,_._openPopupCountCallback,t),t.popupCount},_._openPopupCountCallback=function(t,e){return e.popupCount+=1,_.VISIT_RESULT.ACCEPT},_.findOpenPopups=function(){var t={},e=[];t.popups=e;var i=_.getDefaultLayer();return _.preOrderVisit(i,_._openPopupsCallback,t),e=t.popups,o(e)},_._openPopupsCallback=function(t,e){return e.popups.push(t[0]),_.VISIT_RESULT.ACCEPT},_.isAboveTopModalLayer=function(t){if(!t||!_.hasPopupsOpen())return!0;var e=function(){var t={topLayer:null},e=_.getDefaultLayer();if(_.preOrderVisit(e,function(t,e){if(e.level>0)return _.VISIT_RESULT.REJECT;var i=e.topLayer;return i?_.compareStackingContexts(o(t),o(i))>0&&(e.topLayer=t):e.topLayer=t,_.VISIT_RESULT.ACCEPT},t),t.topLayer)return t.topLayer[0]}();if(!e)return!0;var i=function(t){var e={topModalPopup:null};if(t.hasAttribute(_._OVERLAY_ATTR)&&(e.topModalPopup=o(t)),_.postOrderVisit(o(t),function(t,e){return t[0].hasAttribute(_._OVERLAY_ATTR)?(e.topModalPopup=t,_.VISIT_RESULT.COMPLETE):_.VISIT_RESULT.ACCEPT},e),e.topModalPopup)return e.topModalPopup[0]}(e);return!i||(r.isAncestorOrSelf(i,t)||_.compareStackingContexts(o(i),o(t))<0)},_.compareStackingContexts=function(t,i){function n(t,e){var i,n=["absolute","relative","fixed"],s=t.parents(),a=[];for(i=s.length-1;i>-1;i--)a.push(o(s[i]));(s=a).push(t);var l=[],p=0;for(i=0;i<s.length;i++){var c=s[i],u=c.css("position"),h=r.getCSSLengthAsFloat(c.css("opacity")),_=r.getCSSLengthAsInt(c.css("z-index")),f=o.inArray(c[0],c.parent().children());o.inArray(u,n)>-1&&_>0?(l.push({weight:[p,_,f],order:[f]}),p+=1):h<1?(l.push({weight:[p,1,f],order:[f]}),p+=1):e&&l.push({weight:[0,0,f],order:[f]})}return l}function s(t,e){for(var o=Math.max(t.length,e.length),i=0;i<o;i++){var n=i<t.length?t[i]:0,r=i<e.length?e[i]:0;if(n!==r)return n<r?-1:1}return 0}e.Assert.assertPrototype(t,o),e.Assert.assertPrototype(i,o);var a,l,p=n(t,!1),c=n(i,!1),u=Math.max(p.length,c.length);for(a=0;a<u;a++)if(0!==(l=s(a<p.length?p[a].weight:[-1],a<c.length?c[a].weight:[-1])))return l;for(p=n(t,!0),c=n(i,!0),u=Math.max(p.length,c.length),a=0;a<u;a++)if(0!==(l=s(a<p.length?p[a].order:[-1],a<c.length?c[a].order:[-1])))return l;return 0},_.eatEvent=function(t){t.stopPropagation(),t.preventDefault()},_.isPopupOpen=function(t){var e=t.parent();return!(!e||1!==e.length||!_._hasSurrogate(e[0]))},_._EVENTS_DATA="oj-popup-events",_._MODALITY_DATA="oj-popup-modality",_._DEFAULT_LAYER_ID="__oj_zorder_container",_._SURROGATE_ATTR="data-oj-surrogate-id",_._LAYER_ID_DATA="oj-popup-layer-id",_._OVERLAY_ATTR="data-oj-overlayid",_._OVERLAY_SELECTOR="oj-component-overlay";const f={};e._registerLegacyNamespaceProp("PositionUtils",f),f.normalizeHorizontalAlignment=function(t,i){for(var n=o.extend({},t),r=0;r<f._ALIGN_RULE_PROPERTIES.length;r++){var s=f._ALIGN_RULE_PROPERTIES[r],a=n[s];if(a)if(e.StringUtils.isString(a))n[s]=a.replace("start",i?"right":"left").replace("end",i?"left":"right").replace("<",i?"+":"-").replace(">",i?"-":"+");else for(var l=0;l<f._SUB_ALIGN_RULE_PROPERTIES.length;l++){var p=f._SUB_ALIGN_RULE_PROPERTIES[l],c=a[p];e.StringUtils.isString(c)&&(a[p]=c.replace("start",i?"right":"left").replace("end",i?"left":"right").replace("<",i?"+":"-").replace(">",i?"-":"+"))}}return n},f.normalizePositionOf=function(t,e,o){return"event"===t?o:null==t||"launcher"===t?e:t},f._normalizeEventForPosition=function(t){o.each(["pageX","pageY"],function(e,o){if(t&&void 0===t[o]&&t.originalEvent){var i,n=t.originalEvent,r=n.type;if(i="touchstart"===r||"touchmove"===r?"touches":"touchend"===r?"changedTouches":null){var s=n[i][0];s&&(t[o]=s[o])}}})},f._ALIGN_RULE_PROPERTIES=["my","at"],f._SUB_ALIGN_RULE_PROPERTIES=["vertical","horizontal"],f.isAligningPositionClipped=function(t){if(t.target&&t.target.height>0&&t.target.width>0){var e=t.target.element;return!f.isWithinViewport(e)}return!1},f.isWithinViewport=function(t){function e(t,e){var o;if(["hidden","scroll","auto"].indexOf(e.overflowY)>-1){if(t.bottom-e.top<-1)return!1;if(o="auto"===e.overflowX&&e.scrollWidth>e.innerWidth||"scroll"===e.overflowX?r.getScrollBarWidth():0,e.bottom-o-t.top<1)return!1}return!(["hidden","scroll","auto"].indexOf(e.overflowX)>-1&&(o="auto"===e.overflowY&&e.scrollHeight>e.innerHeight||"scroll"===e.overflowY?r.getScrollBarWidth():0,t.right-(e.left+("rtl"===r.getReadingDirection()?o:0))<-1||t.left-(e.right-("ltr"===r.getReadingDirection()?o:0))>-1))}function i(t){var e=t[0];if(1===e.nodeType){var i=o.extend({},e.getBoundingClientRect());return i.overflowX=t.css("overflow-x"),i.overflowY=t.css("overflow-y"),i.innerHeight=t.innerHeight(),i.innerWidth=t.innerWidth(),i.scrollHeight=e.scrollHeight,i.scrollWidth=e.scrollWidth,i}return{height:0,width:0}}function n(t){return["fixed","absolute","relative","sticky"].indexOf(t.css("position"))>-1&&(!isNaN(parseInt(t.css("top"),10))||!isNaN(parseInt(t.css("bottom"),10))||!isNaN(parseInt(t.css("left"),10))||!isNaN(parseInt(t.css("right"),10)))}if(!t)return!1;if(o.isWindow(t[0])||n(t))return!0;for(var s,a=i(t),l=!0,p=t.parent();l&&p&&p.length>0&&"BODY"!==p[0].nodeName&&1===p[0].nodeType&&!n(p);){if("visible"!==(s=p).css("overflow-x")||"visible"!==s.css("overflow-y")){var c=i(p);c.height>0&&c.width>0&&(l=e(a,c))}p=p.parent()}return l},f._ANIMATION_TRANSFORM_ORIGIN_RULES={"right-top":"right top","right-middle":"right center","right-bottom":"right bottom","left-top":"left top","left-middle":"left center","left-bottom":"left bottom","center-top":"center top","center-middle":"center center","center-bottom":"center bottom"},f._ALIGN_MNEMONIC_DATA="oj-popup-align-mnemonic",f.captureTransformOriginAnimationEffectsOption=function(t,e){var o=[e.horizontal,e.vertical].join("-");t.data(f._ALIGN_MNEMONIC_DATA,o)},f.addTransformOriginAnimationEffectsOption=function(t,o){var i,n;e.StringUtils.isString(o)?(n=!0,i=o):(n=!1,i=JSON.stringify(o));var r=/#myPosition/g;if(i.match(r)){var s=t.data(f._ALIGN_MNEMONIC_DATA);e.StringUtils.isEmptyOrUndefined(s)&&(s="center-middle");var a=f._ANIMATION_TRANSFORM_ORIGIN_RULES[s];i=i.replace(r,a),o=n?i:JSON.parse(i)}return o},f._JQUI_MNEMONIC_GRP_REGX=/^(\w+)(\+|-)?(\d+)?/,f._VERTICAL_ENUM_TST_REGX=/^top$|^center$|^bottom$/,f._HORIZONTAL_ENUM_TST_REGX=/^start$|^left$|^center$|^end$|^right$/,f._COLLISION_ENUM_TST_REGX=/^none$|^flip$|^flipfit$|^fit$|^flipcenter$/,f._parsePositionNmnemonic=function(t,e){var o=[null,Number.NaN],i=f._JQUI_MNEMONIC_GRP_REGX.exec(t);if(i[1]&&e.test(i[1])&&(o[0]=i[1],i[2])){var n=parseInt(i[3],10);isNaN(n)||(n*="-"===i[2]?-1:1,o[1]=n)}return o},f._parseJSON=function(t){if(e.StringUtils.isString(t)&&/^{/.test(t)&&/}$/.test(t))try{return JSON.parse(t)}catch(t){}return null},f._coerceMyAtToJet=function(t,i,n,s){var a=f._parseJSON(i);a&&(i=a),(a=f._parseJSON(n))&&(n=a),s||(s={});var l,p=o.extend({},s),c={x:0,y:0};if(n&&"x"in n&&"y"in n&&(c.x=r.getCSSLengthAsInt(n.x),c.y=r.getCSSLengthAsInt(n.y)),e.StringUtils.isString(i)){var u=i.split(/\s/);u.length>0&&!e.StringUtils.isEmpty(u[0])&&(l=f._parsePositionNmnemonic(u[0],f._HORIZONTAL_ENUM_TST_REGX))[0]&&(p.horizontal=l[0],isNaN(l[1])||(c.x=l[1])),u.length>1&&!e.StringUtils.isEmpty(u[1])&&(l=f._parsePositionNmnemonic(u[1],f._VERTICAL_ENUM_TST_REGX))[0]&&(p.vertical=l[0],isNaN(l[1])||(c.y=l[1]))}else i&&("horizontal"in i&&(l=f._parsePositionNmnemonic(i.horizontal,f._HORIZONTAL_ENUM_TST_REGX))[0]&&(p.horizontal=l[0],isNaN(l[1])||(c.x=l[1])),"vertical"in i&&(l=f._parsePositionNmnemonic(i.vertical,f._VERTICAL_ENUM_TST_REGX))[0]&&(p.vertical=l[0],isNaN(l[1])||(c.y=l[1])));var h={};return h[t]=p,h.offset=c,h},f._coerceCollisionToJet=function(t,e){var o=e;return f._COLLISION_ENUM_TST_REGX.test(t)&&(o=t),{collision:o}},f._coerceOfToJet=function(t,i){var n=f._parseJSON(t);n&&(t=n);var s=i;if(e.StringUtils.isString(t))s=t;else if(o.isWindow(t))s="window";else if(t instanceof Element||t instanceof o){(t=o(t)).uniqueId(),s="#"+function(t){for(var e=[],o=/\w|_|-/,i=0;i<t.length;i++){var n=t.substring(i,i+1);o.test(n)?e.push(n):e.push("\\"+n)}return e.join("")}(t.attr("id"))}else t instanceof Event||t instanceof o.Event?("pageX"in t||"pageY"in t)&&((s={}).x=r.getCSSLengthAsFloat(t.pageX),s.y=r.getCSSLengthAsFloat(t.pageY)):t&&("x"in t||"y"in t)&&((s={}).x=r.getCSSLengthAsFloat(t.x),s.y=r.getCSSLengthAsFloat(t.y));return{of:s}},f.coerceToJet=function(t,e){t||(t={});var i=f._parseJSON(t);i&&(t=i),e||(e={});var n=e.my,r=e.at,s=e.collision,a=e.of,l=f._coerceMyAtToJet("my",t.my,t.offset,n),p=f._coerceMyAtToJet("at",t.at,null,r),c={offset:{x:l.offset.x+p.offset.x,y:l.offset.y+p.offset.y}};return delete l.offset,delete p.offset,o.extend({},l,p,c,f._coerceCollisionToJet(t.collision,s),f._coerceOfToJet(t.of,a),function(t,e){return{using:o.isFunction(t)?t:e}}(t.using,void 0))},f.coerceToJqUi=function(t){function i(e,o){var i=[];if(t[e][o]?i.push(t[e][o]):i.push("center"),"my"===e&&t.offset){var n="horizontal"===o?"x":"y",r=t.offset[n];isNaN(r)||0===r||(i.push(r>0?"+":""),i.push(Math.floor(r).toString()))}return i.join("")}var n={};["my","at"].forEach(function(e){if(t[e]){var o=[];o.push(i(e,"horizontal")),o.push(" "),o.push(i(e,"vertical")),n[e]=o.join("")}});var r=t.of;if(e.StringUtils.isString(r))n.of="window"===r?window:r;else if(r&&!e.StringUtils.isString(r)&&"x"in r&&"y"in r){var s=r.x,a=r.y,l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,1,s,a,s,a,!1,!1,!1,!1,0,null),n.of=o.Event(l,{pageX:s,pageY:a})}else n.of=r;return t.collision&&(n.collision=t.collision),t.using&&(n.using=t.using),n},f.calcAvailablePopupSize=function(t,e,i){var n,s,a,l,p=o.position.getWithinInfo(i||window),c=o.position.getScrollInfo(p),u="rtl"===r.getReadingDirection(),h=u?c.width:0,_=u?0:c.width,f=e.element,E=e.target,d=p.isWindow?p.scrollLeft:0,g=p.isWindow?p.scrollTop:0,T=f.left,v=f.left+f.width,O=f.top,S=f.top+f.height,P=E.left,m=E.left+E.width,y=E.top,A=E.top+E.height,R=p.offset.left+d+h,I=p.offset.left+p.width+d-_,L=p.offset.top+g,N=p.offset.top+p.height+g-c.height;return T<P?(n=R,s=v<=P?P:v<=m?Math.min(m,I):I):T===P?P-R>I-m?(n=R,s=m):(n=P,s=I):T<m?(n=P,s=v<=m?m:I):(n=m,s=I),O<y?(a=L,l=S<=y?y:S<=A?Math.min(A,N):N):O===y?(a=y,l=N):O<A?(a=y,l=S<=A?A:N):(a=A,l=N),{width:s-n,height:l-a}},function(){var t,i=Math.max,n=Math.abs;const s=/left|center|right/,a=/top|center|bottom/,l=/[+-]\d+(\.[\d]+)?%?/,p=/^\w+/,c=/%$/;var u=o.fn.position,h=o.position.getWithinInfo;function _(t,e,o){return[parseFloat(t[0])*(c.test(t[0])?e/100:1),parseFloat(t[1])*(c.test(t[1])?o/100:1)]}function f(t,e){return parseInt(o.css(t,e),10)||0}function E(t){var i=t[0];if(9===i.nodeType)return{width:t.width(),height:t.height(),offset:{top:0,left:0}};if(o.isWindow(i)){var n=e.AgentUtils.getAgentInfo(),r=e.AgentUtils.OS.ANDROID===n.os||e.AgentUtils.OS.IOS===n.os;return{width:t.width(),height:r?i.innerHeight:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}}return i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}o.position={getWithinInfo:h.bind(this),scrollbarWidth:function(){if(void 0!==t)return t;var e,i,n=document.createElement("div");n.style.display="block",n.style.position="absolute",n.style.width="50px",n.style.height="50px",n.style.overflow="hidden";var r=document.createElement("div");return r.style.height="100px",r.style.width="auto",n.appendChild(r),o("body").append(o(n)),e=r.offsetWidth,n.style.overflow="scroll",e===(i=r.offsetWidth)&&(i=n.clientWidth),o(n).remove(),t=e-i},getScrollInfo:function(t){var e=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),n="scroll"===e||"auto"===e&&t.width<t.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight?o.position.scrollbarWidth():0,height:n?o.position.scrollbarWidth():0}}},o.fn.position=function(t){if(!t||!t.of)return u.apply(this,arguments);var e,r,c,h,d,g;t=o.extend({},t);var T=o(t.of),v=o.position.getWithinInfo(t.within),O=o.position.getScrollInfo(v),S=(t.collision||"flip").split(" "),P={};return g=E(T),T[0].preventDefault&&(t.at="left top"),r=g.width,c=g.height,h=g.offset,d=o.extend({},h),o.each(["my","at"],function(){var e,o,i=(t[this]||"").split(" ");1===i.length&&(i=s.test(i[0])?i.concat(["center"]):a.test(i[0])?["center"].concat(i):["center","center"]),i[0]=s.test(i[0])?i[0]:"center",i[1]=a.test(i[1])?i[1]:"center",e=l.exec(i[0]),o=l.exec(i[1]),P[this]=[e?e[0]:0,o?o[0]:0],t[this]=[p.exec(i[0])[0],p.exec(i[1])[0]]}),1===S.length&&(S[1]=S[0]),"right"===t.at[0]?d.left+=r:"center"===t.at[0]&&(d.left+=r/2),"bottom"===t.at[1]?d.top+=c:"center"===t.at[1]&&(d.top+=c/2),e=_(P.at,r,c),d.left+=e[0],d.top+=e[1],this.each(function(){var s,a,l=o(this),p=l.outerWidth(),u=l.outerHeight(),E=f(this,"marginLeft"),g=f(this,"marginTop"),m=p+E+f(this,"marginRight")+O.width,y=u+g+f(this,"marginBottom")+O.height,A=o.extend({},d),R=_(P.my,l.outerWidth(),l.outerHeight());"right"===t.my[0]?A.left-=p:"center"===t.my[0]&&(A.left-=p/2),"bottom"===t.my[1]?A.top-=u:"center"===t.my[1]&&(A.top-=u/2),A.left+=R[0],A.top+=R[1],s={marginLeft:E,marginTop:g},o.each(["left","top"],function(i,n){o.ui.position[S[i]]&&o.ui.position[S[i]][n](A,{targetWidth:r,targetHeight:c,elemWidth:p,elemHeight:u,collisionPosition:s,collisionWidth:m,collisionHeight:y,offset:[e[0]+R[0],e[1]+R[1]],my:t.my,at:t.at,within:v,elem:l})}),t.using&&(a=function(e){var o=h.left-A.left,s=o+r-p,a=h.top-A.top,_=a+c-u,f={target:{element:T,left:h.left,top:h.top,width:r,height:c},element:{element:l,left:A.left,top:A.top,width:p,height:u},horizontal:s<0?"left":o>0?"right":"center",vertical:_<0?"top":a>0?"bottom":"middle"};r<p&&Math.abs(o+s)<r&&(f.horizontal="center"),c<u&&Math.abs(a+_)<c&&(f.vertical="middle"),i(n(o),n(s))>i(n(a),n(_))?f.important="horizontal":f.important="vertical",t.using.call(this,e,f)}),l.offset(o.extend(A,{using:a}))})};var d=o.ui.position.flip.left;o.ui.position.flip={left:d.bind(this),top:function(t,e){var o,i,n=e.within,r=n.offset.top+n.scrollTop,s=n.height,a=n.isWindow?n.scrollTop:n.offset.top,l=t.top-e.collisionPosition.marginTop,p=l-a,c=l+e.collisionHeight-s-a;o="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,i="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0;var u,h,_=-2*e.offset[1];p<0?((u=t.top+o+i+_+e.collisionHeight-s-r)<0||u<Math.abs(p))&&c<0&&p>c&&(t.top+=o+i+_):c>0&&((h=t.top-e.collisionPosition.marginTop+o+i+_-a)>0||Math.abs(h)<c)&&(t.top+=o+i+_)}},o.ui.position.fit={left:function(t,e){var o,i=e.within,n=i.isWindow?i.scrollLeft:i.offset.left,r=i.width,s=t.left-e.collisionPosition.marginLeft,a=n-s,l=s+e.collisionWidth-r-n;e.collisionWidth>r?a>0&&l<=0?(o=t.left+a+e.collisionWidth-r-n,t.left+=a-o):t.left=l>0&&a<=0?n:a>l?n+r-e.collisionWidth:n:a>0?t.left+=a:l>0?t.left-=l:t.left=Math.max(t.left-s,t.left),t.left<0&&(t.left=0)},top:function(t,e){var o,i=e.within,n=i.isWindow?i.scrollTop:i.offset.top,r=e.within.height,s=t.top-e.collisionPosition.marginTop,a=n-s,l=s+e.collisionHeight-r-n;e.collisionHeight>r?a>0&&l<=0?(o=t.top+a+e.collisionHeight-r-n,t.top+=a-o):t.top=l>0&&a<=0?n:a>l?n+r-e.collisionHeight:n:a>0?t.top+=a:l>0?t.top-=l:t.top=Math.max(t.top-s,t.top),t.top<0&&(t.top=0)}},o.ui.position.flipcenter={left:function(t,e){var i=t.left;o.ui.position.flip.left.call(this,t,e);var n=e.within,s=n.isWindow?n.scrollLeft:n.offset.left,a=n.width,l=t.left-e.collisionPosition.marginLeft,p=s-l,c=l+e.collisionWidth-a-s;(p>0||c>0)&&("right"===e.at[0]?i-=e.targetWidth/2:"left"===e.at[0]&&(i+=e.targetWidth/2),i-=("rtl"===r.getReadingDirection()?-1:1)*(e.elemWidth/2),t.left=Math.max(0,i))},top:function(t,e){var i=t.top;o.ui.position.flip.top.call(this,t,e);var n=e.within,r=n.isWindow?n.scrollTop:n.offset.top,s=e.within.height,a=t.top-e.collisionPosition.marginTop,l=r-a,p=a+e.collisionHeight-s-r;(l>0||p>0)&&("top"===e.at[1]?i+=e.targetHeight/2:"bottom"===e.at[1]&&(i-=e.targetHeight/2),i+=e.elemHeight/2,t.top=Math.max(0,i))}}}();const E=function(){this.Init()};e._registerLegacyNamespaceProp("PopupLiveRegion",E),e.Object.createSubclass(E,e.Object,"oj.PopupLiveRegion"),E.prototype.Init=function(){E.superclass.Init.call(this),isNaN(E._refCounter)?E._refCounter=1:E._refCounter+=1},E.prototype.destroy=function(){if(!isNaN(E._refCounter)&&(E._refCounter-=1)<1){var t=o(document.getElementById(E._POPUP_LIVE_REGION_ID));t.length>0&&t.remove()}},E.prototype.announce=function(t){if(!e.StringUtils.isEmpty(t)){var i=E._getLiveRegion();i.children().remove(),setTimeout(function(){o("<div>").text(t).appendTo(i)},250)}},E._getLiveRegion=function(){var t=o(document.getElementById(E._POPUP_LIVE_REGION_ID));return 0===t.length&&((t=o("<div>")).attr({id:E._POPUP_LIVE_REGION_ID,role:"log","aria-live":"polite","aria-relevant":"additions"}),t.addClass("oj-helper-hidden-accessible"),t.appendTo(document.body)),t},E._POPUP_LIVE_REGION_ID="__oj_popup_arialiveregion";const d=function(t,i,n,r,s){e.Assert.assertPrototype(t,o),e.Assert.assertString(i),e.Assert.assertFunction(n),e.Assert.assertStringOrNull(r),this._options={insertBefore:!1,preventKeyEvents:!0},s&&(this._options=Object.assign({},this._options,s)),this._sibling=t,this._message=i,this._callback=n,this._id=r,this.Init()};e._registerLegacyNamespaceProp("PopupSkipLink",d),e.Object.createSubclass(d,e.Object,"oj.PopupSkipLink"),d.prototype.Init=function(){d.superclass.Init.call(this);var t=this._sibling,e=this._callback,i=this._message,n=this._options.insertBefore,r=this._options.preventKeyEvents;this._message=null;var s=this._id;this._id=null;var a=o(document.getElementById(s));a.length<1&&(a=o("<a>").attr({tabindex:"-1",href:"#",role:"link"})),a.attr("id",s),a.addClass("oj-helper-hidden-accessible"),a.text(i),n?a.insertBefore(t):a.insertAfter(t),a.on("click",d._activateHandler.bind(this,e)),r&&a.on("keydown keyup keypress",d._keyHandler),t.data(d._SKIPLINK_ATTR,a)},d._activateHandler=function(t,e){_.eatEvent(e),window.setImmediate(t)},d._keyHandler=function(t){t.keyCode===o.ui.keyCode.ENTER&&_.eatEvent(t)},d.prototype.destroy=function(){var t=this._sibling;if(delete this._sibling,delete this._callback,t){var e=t.data(d._SKIPLINK_ATTR);t.removeData(d._SKIPLINK_ATTR),e&&(e.off("click keydown keyup keypress"),e.remove())}},d.prototype.getLink=function(){var t,e=this._sibling;return e&&(t=e.data(d._SKIPLINK_ATTR)),t},d._SKIPLINK_ATTR="oj-skiplink";const g=function(t,e,o,i){this._element=t,this._operation=e,this._widgetName=o,this._isCustomElement=!!i,this.Init()};e._registerLegacyNamespaceProp("PopupWhenReadyMediator",g),e.Object.createSubclass(g,e.Object,"oj.PopupWhenReadyMediator"),g.prototype.Init=function(){g.superclass.Init.call(this),this._resolvedQueue=[],this._callback=this._eventHandler.bind(this);var t=this._operation,e=["oj"];this._isCustomElement?(e.push(t.charAt(0).toUpperCase()),e.push(t.slice(1))):e.push(t);var o=e.join("");this._eventType=o,this._element.on(o,this._callback);var i=l.getContext(this._element[0]).getBusyContext(),n={description:this._getBusyStateDescription.bind(this,this._element,this._operation,this._widgetName)},r=i.addBusyState(n);this.AddPromiseExecutor(r),this._whenReadyPromise=new Promise(this.AddPromiseExecutor.bind(this))},g.prototype._getBusyStateDescription=function(t,e,o){return o+" identified by '"+t.attr("id")+"' is busy animating on the '"+e+"' operation."},g.prototype._deliverResolved=function(t){var e=this._resolvedQueue;this._resolvedQueue=null;var o=t||this._operation;this._operation=null;for(var i=0;i<e.length;i++)try{e[i](o)}catch(t){n.error("Error resolving whenReady promises:\n%o",t)}this._whenReadyPromise=Promise.resolve("none")},g.prototype.destroy=function(){if(this._resolvedQueue&&this._deliverResolved("none"),this._callback){var t=this._eventType;this._element.off(t,this._callback)}this._callback=null,this._element=null,this._operation=null,this._whenReadyPromise=null,this._widgetName=null,this._eventType=null},g.prototype.getWhenReadyPromise=function(){return this._whenReadyPromise},g.prototype._eventHandler=function(t){t.target===this._element[0]&&(this._element.off(t.type,this._callback),this._deliverResolved(),this._callback=null)},g.prototype._getPendingOperation=function(){return this._operation?this._operation:"none"},g.prototype.AddPromiseExecutor=function(t,e){this._resolvedQueue&&this._resolvedQueue.push(t)},g.prototype.isOperationPending=function(t,e,o,i){var r=!1,s=this._widgetName,a=this._getPendingOperation();if(e===a)n.info("An %s instance invoked a '%s' operation while pending animation of the same type of operation.  The second request will be ignored.",s,e),r=!0;else if("none"!==a){n.info("An %s instance invoked a '%s' operation while pending animation of a '%s' operation. The second request will be invoked after the pending operation completes.",s,e,a),new Promise(this.AddPromiseExecutor.bind(this)).then(function(){this[o].apply(this,i)}.bind(t)),r=!0}return r};class T extends p.Component{constructor(){super(...arguments),this._setRootRef=t=>{this._rootRef=t}}render(t){return p.h("div",{style:{display:"none"},ref:this._setRootRef},t.children)}componentDidMount(){this._popup=o(this._rootRef.firstChild);const t={[u.OPTION.POPUP]:this._popup,[u.OPTION.EVENTS]:{[u.EVENT.POPUP_AUTODISMISS]:this.props.autoDismiss,[u.EVENT.POPUP_REFRESH]:function(){this._popup.position(this._getPosition())}.bind(this)},[u.OPTION.LAYER_SELECTORS]:this.props.layerSelectors,[u.OPTION.CUSTOM_ELEMENT]:!0,[u.OPTION.LAUNCHER]:o(this._rootRef),[u.OPTION.POSITION]:this._getPosition()};u.getInstance().open(t)}componentWillUnmount(){u.getInstance().close({[u.OPTION.POPUP]:this._popup})}componentDidUpdate(){this._popup.position(this._getPosition())}_getPosition(){return f.normalizeHorizontalAlignment(this.props.position,"rtl"===r.getReadingDirection())}}T.defaultProps={autoDismiss:null,layerSelectors:"",position:{}},t.PopupLiveRegion=E,t.PopupService=u,t.PopupSkipLink=d,t.PopupWhenReadyMediator=g,t.PositionUtils=f,t.VPopup=T,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ojpopupcore.js.map