/**
 * @license
 * Copyright (c) 2014, 2023, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define(["require","exports","preact/compat","preact/jsx-runtime","preact","ojs/ojcustomelement-utils","ojs/ojcustomelement-registry","preact/hooks","@oracle/oraclejet-preact/UNSAFE_Environment","ojs/ojcontext","ojs/ojmetadatautils","ojs/ojcore-base","ojs/ojpreact-patch","ojs/ojconfig","ojs/ojpopupcore","@oracle/oraclejet-preact/UNSAFE_Layer","@oracle/oraclejet-preact/utils/UNSAFE_matchTranslationBundle","@oracle/oraclejet-preact/resources/nls/supportedLocales","ojs/ojlogger"],function(e,t,n,o,s,r,i,l,a,c,p,u,d,h,_,m,v,f,y){"use strict";function g(e){const t=e.children,n=i.getElementRegistration(t.type).cache.contexts,r=[a.EnvironmentContext,...null!=n?n:[]],c=r.map(e=>{var n;const o=l.useContext(e),s=null===(n=t.props.__oj_private_contexts)||void 0===n?void 0:n.get(e);return void 0===s?o:s}),p=l.useMemo(()=>{const e=new Map;for(let t=0;t<r.length;t++)e.set(r[t],c[t]);return e},c);return t.props.__oj_private_contexts=p,o.jsx(s.Fragment,{children:t})}c=c&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c,u=u&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u,f=f&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f,g.__ojIsEnvironmentWrapper=!0;const P=(e,t)=>{Object.prototype.hasOwnProperty.call(e,t)&&(e[t]=r.toSymbolizedValue(e[t]))},b=s.options.vnode;let C=!1;s.options.vnode=e=>{const t=e.type;if("string"==typeof t&&i.isElementRegistered(t)){const t=e.props;P(t,"value"),P(t,"checked")}if("string"==typeof t&&!C&&i.isVComponent(t)){C=!0;try{const t=s.cloneElement(e),n=o.jsx(g,{children:t});Object.assign(e,n)}finally{C=!1}}null==b||b(e)};const E=s.options.debounceRendering;s.options.debounceRendering=function(e){const t=new Promise(n=>{const o=()=>{n(),c.__removePreactPromise(t),e()};E?E(o):setTimeout(o)});c.__addPreactPromise(t,"Preact debounce")};const j=s.options.requestAnimationFrame;s.options.requestAnimationFrame=function(e){const t=new Promise(n=>{const o=()=>{n(),c.__removePreactPromise(t),e()};if(j)j(o);else{const e=()=>{clearTimeout(t),cancelAnimationFrame(n),setTimeout(o)},t=setTimeout(e,100),n=requestAnimationFrame(e)}});c.__addPreactPromise(t,"Preact requestAnimationFrame")};let S,O=0;const x=new Map,k=Symbol();function w(e,t,n,o){const i=function(e){let t=e[k];void 0===t&&(t="@oj_s"+O++,e[k]=t);return t}(t),a=function(e,t,n){let o,s=0;const i=()=>{0===s&&o.remove()};return l=>{if(null!=l){s++,o=l,o[d.OJ_SLOT_REMOVE]=i;const e=l.parentElement;d.patchSlotParent(e),t(l)}else{if(s--,s<0)throw new r.JetElementError(e,"Slot replacer count underflow");0===s&&window.queueMicrotask(()=>{0===s&&n(o)})}}}(e,n,o);return s.h(()=>(function(e,t){0===x.size&&(S=document.createElement,document.createElement=A);x.set(e,t)}(i,t),l.useLayoutEffect(()=>{return e=i,x.delete(e),void(0===x.size&&(document.createElement=S));var e}),s.h(i,{ref:a,key:i})),null)}function A(e,t){return e.startsWith("@oj_s")?x.get(e):S.call(document,e,t)}class T{parkNode(e){this._getLot().appendChild(e),u.Components&&u.Components.subtreeHidden(e)}disposeNodes(e,t){T._iterateSlots(e,e=>{const n=e.parentElement;this._lot===n?(t(e),this._lot.removeChild(e)):n||t(e)})}disconnectNodes(e){T._iterateSlots(e,e=>{this._lot===e.parentElement&&this._lot.removeChild(e)})}reconnectNodes(e){T._iterateSlots(e,e=>{e.parentElement||this._lot.appendChild(e)})}isParked(e){return(null==e?void 0:e.parentElement)===this._lot}_getLot(){if(!this._lot){const e=document.createElement("div");e.style.display="none",document.body.appendChild(e),this._lot=e}return this._lot}static _iterateSlots(e,t){Object.keys(e).forEach(n=>{e[n].forEach(e=>{t(e)})})}}const R=new T,M=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function L(e,t,n){"-"===t[0]?e.setProperty(t,n):null==n?e[t]="":"number"!=typeof n||M.test(t)?e[t]=n:e[t]=n+"px"}function U(e,t,n,o,s){let r;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof o&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||L(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||L(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])if(r=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e._listeners||(e._listeners={}),e._listeners[t+r]=n,n){if(!o){const n=r?B:N;e.addEventListener(t,n,r)}}else{const n=r?B:N;e.removeEventListener(t,n,r)}else if("dangerouslySetInnerHTML"!==t){if(s)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function N(e){this._listeners[e.type+!1](s.options.event?s.options.event(e):e)}function B(e){this._listeners[e.type+!0](s.options.event?s.options.event(e):e)}const H=Symbol(),D=Symbol(),V=new Set,I=Symbol(),F=Symbol();let q;class z{constructor(e,t,n,o,i,l){this.ref=s.createRef(),this._isPatching=!1,this._props={ref:this.ref},this._verifyingState=Q.Unset,this._earlySets=[],this._eventQueue=[],this._isRenderQueued=!1,this._state=r.CustomElementUtils.getElementState(e),this._element=e,this._metadata=n,this._component=t,this._controlledProps=(null==i?void 0:i.length)>0?new Set(i):V,this._controlledAttrs=(null==o?void 0:o.length)>0?new Set(o):V,this._defaultProps=l,this._rootPatchCallback=this._patchRootElement.bind(this)}connectedCallback(){this._verifyConnectDisconnect(Q.Connect)}disconnectedCallback(){this._verifyConnectDisconnect(Q.Disconnect)}attributeChangedCallback(e,t,n){if(!this._isPatching&&this._state.canHandleAttributes()){const o=r.AttributeUtils.attributeToPropertyName(e),s=o.split(".")[0];if(this._state.dirtyProps.has(s))this._state.dirtyProps.delete(s);else if(t===n)return;null===n&&(n=void 0),"knockout"===this._state.getBindingProviderType()&&(r.AttributeUtils.isGlobalOrData(o)||this._element.dispatchEvent(new CustomEvent("attribute-changed",{detail:{attribute:e,value:n,previousValue:t}})));const{propPath:i,propValue:l,propMeta:a,subPropMeta:c}=this._getPropValueInfo(e,n);i&&this._updatePropsAndQueueRenderAsNeeded(i,l,a,c)}}getProperty(e){var t;if(p.getPropertyMetadata(e,null===(t=this._metadata)||void 0===t?void 0:t.properties)){let t=r.CustomElementUtils.getPropertyValue(this._props,e);return void 0===t&&this._defaultProps&&(t=r.CustomElementUtils.getPropertyValue(this._defaultProps,e)),t}return this._element[e]}setProperty(e,t){var n;if(this._isPatching)return;const{prop:o,subProp:s}=p.getComplexPropertyMetadata(e,null===(n=this._metadata)||void 0===n?void 0:n.properties);o?this._state.allowPropertySets()?(t=r.transformPreactValue(this._element,s,t),this._updatePropsAndQueueRenderAsNeeded(e,t,o,s)):this._earlySets.push({property:e,value:t}):this._element[e]=t}setProperties(e){this._isPatching||Object.keys(e).forEach(t=>{this.setProperty(t,e[t])})}getProps(){return this._props}isInitialized(){return!!this._vdom}appendChildHelper(e,t){return r.CustomElementUtils.canRelocateNode(e,t)?HTMLElement.prototype.appendChild.call(e,t):t}insertBeforeHelper(e,t,n){return r.CustomElementUtils.canRelocateNode(e,t)?HTMLElement.prototype.insertBefore.call(e,t,n):t}_render(){var e;if(!this._vdom){this._initializePropsFromDom();const t=this._metadata.events;t&&this._initializeActionCallbacks(t);const n=null===(e=this._metadata.extension)||void 0===e?void 0:e._WRITEBACK_PROPS;n&&this._initializeWritebackCallbacks(n),this._playbackEarlyPropertySets()}this._setupEnvironmentContextObj(),this._layerContext||(this._layerContext={getHost:_.getLayerHost.bind(null,this._element)});const t=o.jsx(this._component,Object.assign({},this._props)),n=this._element.__oj_private_contexts,r=n?Array.from(n).reduce((e,[t,n])=>t===a.EnvironmentContext?e:o.jsx(t.Provider,Object.assign({value:n},{children:e})),t):t;this._vdom=o.jsx(m.LayerContext.Provider,Object.assign({value:this._layerContext},{children:o.jsx(a.RootEnvironmentProvider,Object.assign({environment:this._rootEnvironment},{children:r}))}));const i=t.props;i[H]=this._element,i[D]=this._rootPatchCallback,this._isPatching=!0,s.render(this._vdom,this._element),this._isPatching=!1}_setupEnvironmentContextObj(){var e;const t=this._element.__oj_private_color_scheme,n=this._element.__oj_private_scale,o=null===(e=this._element.__oj_private_contexts)||void 0===e?void 0:e.get(a.EnvironmentContext);this._rootEnvironment?o&&o!==this._rootEnvironment?(this._rootEnvironment=o,this.extendTranslationBundleMap()):(t&&t!==this._rootEnvironment.colorScheme||n&&n!==this._rootEnvironment.scale)&&(this._rootEnvironment=Object.assign({},this._rootEnvironment,t&&{colorScheme:t},n&&{scale:n})):(this._rootEnvironment=o||{colorScheme:t,scale:n,user:{locale:h.getLocale()}},this.extendTranslationBundleMap())}extendTranslationBundleMap(){const e=this._state.getTranslationBundleMap(),t=this._rootEnvironment;t.translations?t.translations!==e&&Object.keys(e).forEach(n=>{t.translations[n]||(t.translations[n]=e[n])}):t.translations=e}_getPropValueInfo(e,t){var n,o;if("knockout"!==this._state.getBindingProviderType()||!r.AttributeUtils.getExpressionInfo(t).expr){const s=r.AttributeUtils.attributeToPropertyName(e),{prop:i,subProp:l}=p.getComplexPropertyMetadata(s,null===(n=this._metadata)||void 0===n?void 0:n.properties);if(i)return i.readOnly?{}:{propPath:s,propValue:r.AttributeUtils.attributeToPropertyValue(this._element,e,t,l),propMeta:i,subPropMeta:l};const a=r.AttributeUtils.getGlobalPropForAttr(e);if(this._controlledProps.has(a))return{propPath:a,propValue:null!==(o=this._element[r.AttributeUtils.getGlobalValuePropForAttr(e)])&&void 0!==o?o:t}}return{}}_updatePropsAndQueueRenderAsNeeded(e,t,n,o,s=!0){const i=this.getProperty(e),l=void 0===t?r.CustomElementUtils.getPropertyValue(this._defaultProps,e):t;if(n&&r.ElementUtils.comparePropertyValues(n.writeback,l,i))return;const a=e.split("."),c=a[0],p=a.length>1;let d=this.getProperty(c);if(u.CollectionUtils.isPlainObject(d)&&(d=u.CollectionUtils.copyInto({},d,void 0,!0)),s&&this._verifyProps(e,t,n,o),this._updateProps(a,t),!s||this._state.allowPropertyChangedEvents()&&!r.AttributeUtils.isGlobalOrData(e)){this._state.dirtyProps.add(c);const n=s?"external":"internal",o={value:this.getProperty(c),previousValue:d,updatedFrom:n};p&&(o.subproperty={path:e,value:t,previousValue:i});const r=c+"Changed",l=p?null:e=>{if("propChange"!==e.kind||e.type!==r||e.detail.subproperty)return null;const t=Object.assign({},o,{previousValue:e.detail.previousValue});return{type:r,detail:t,collapse:l,kind:"propChange"}};this._queueFireEventsTask({type:r,detail:o,collapse:l,kind:"propChange"})}const h=this._oldRootProps;h&&this._controlledProps.has(e)&&(h[e]=t),this._queueRender(this._vdom&&!(null==n?void 0:n.readOnly))}_queueRender(e){e&&!this._isRenderQueued&&(this._isRenderQueued=!0,window.queueMicrotask(()=>{this._isRenderQueued=!1,this._render()}))}_verifyProps(e,t,n,o){if(n){if(n.readOnly)throw new r.JetElementError(this._element,`Read-only property '${e}' cannot be set.`);try{p.checkEnumValues(this._element,e,t,o)}catch(e){throw new r.JetElementError(this._element,e.message)}}}_updateProps(e,t){var n,o;const s=e[0];let r=this._props;if(e.length>1){const e=null!==(n=this._props[s])&&void 0!==n?n:null===(o=this._defaultProps)||void 0===o?void 0:o[s];e&&u.CollectionUtils.isPlainObject(e)?r[s]=u.CollectionUtils.copyInto({},e,void 0,!0):r[s]={}}for(;e.length;){const n=e.shift();0===e.length?r[n]=t:r[n]||(r[n]={}),r=r[n]}}_queueFireEventsTask(e){let t=e;const n=this._getEventCollapseInfo(e,this._eventQueue);if(n){const[e,o]=n;this._eventQueue.splice(e,1),t=o}return this._eventQueue.push(t),this._queuedEvents||(this._queuedEvents=new Promise(e=>{window.queueMicrotask(()=>{try{for(;this._eventQueue.length;){const e=this._eventQueue.shift(),t="propChange"===e.kind?new CustomEvent(e.type,{detail:e.detail}):e.event;this._element.dispatchEvent(t)}}finally{e(),this._queuedEvents=null}})})),this._queuedEvents}_getEventCollapseInfo(e,t){var n;if("propChange"!==e.kind)return null;for(let o=0;o<t.length;o++){const s=null===(n=e.collapse)||void 0===n?void 0:n.call(e,t[o]);if(s)return[o,s]}return null}_verifyConnectDisconnect(e){this._verifyingState===Q.Unset&&window.queueMicrotask(()=>{this._verifyingState===e&&(this._verifyingState===Q.Connect?this._verifiedConnect():this._verifiedDisconnect()),this._verifyingState=Q.Unset}),this._verifyingState=e}_verifiedConnect(){if(this._state.isComplete())this._reconnectSlots();else if(this._state.startCreationCycle(),this._state.isCreating()){const e=()=>{this._element[r.CHILD_BINDING_PROVIDER]="preact";let e=this._state.getSlotMap();if(e)this._reconnectSlots();else{e=this._state.getSlotMap(!0);const t=this._removeAndConvertSlotsToProps(e);Object.assign(this._props,t)}this._render()};this._state.setCreateCallback(e),this._state.setBindingsDisposedCallback(()=>this._handleBindingsDisposed())}}_verifiedDisconnect(){this._state.isComplete()?(this._disconnectSlots(),this._state.resetCreationCycle(),s.render(null,this._element),s.render(null,(q=null!=q?q:document.createElement("div"),q)),this._applyRef(this._oldRootRef,null),this._oldRootRef=void 0,this._vdom=null):this._state.pauseCreationCycle()}_initializePropsFromDom(){const e=this._element.attributes;for(let t=0;t<e.length;t++){const{name:n,value:o}=e[t],{propPath:s,propValue:r,propMeta:i,subPropMeta:l}=this._getPropValueInfo(n,o);s&&(this._verifyProps(s,r,i,l),this._updateProps(s.split("."),r))}}_playbackEarlyPropertySets(){for(var e;this._earlySets.length;){const t=this._earlySets.shift(),n=p.getPropertyMetadata(t.property,null===(e=this._metadata)||void 0===e?void 0:e.properties),o=r.transformPreactValue(this._element,n,t.value);this.setProperty(t.property,o)}}_patchRootElement(e){var t;const n=this._oldRootProps||this._getInitialRootProps(),o=e.props;!function(e,t,n,o,s,r){let i;for(i in n)"children"===i||"key"===i||i in t||r(e,i,null,n[i],o)||U(e,i,null,n[i],o);for(i in t)s&&"function"!=typeof t[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===t[i]||r(e,i,t[i],n[i],o)||U(e,i,t[i],n[i],o)}(this._element,o,n,!1,!1,z._setPropertyOverrides);const s=e.ref;this._oldRootRef!==s&&(this._applyRef(s,this._element),s&&(null===(t=this._oldRootRef)||void 0===t||t.call(this,null))),this._oldRootProps=o,this._oldRootRef=s}_applyRef(e,t){e&&("function"==typeof e?e(t):e.current=t)}static _setPropertyOverrides(e,t,n,o){if("style"===t&&"string"==typeof n)throw new Error("CSS style must be an object. CSS text is not supported");if("class"===t||"className"===t){const t=null==o?V:r.CustomElementUtils.getClassSet(o),s=null==n?V:r.CustomElementUtils.getClassSet(n);for(const n of t.values())s.has(n)||e.classList.remove(n);for(const n of s.values())t.has(n)||e.classList.add(n);return!0}if("o"===t[0]&&"n"===t[1]){const s=t!==(t=t.replace(/Capture$/,"")),r=t.toLowerCase();r in e&&(t=r),t=t.slice(2),z._getRootListeners(e,s)[t]=n;const i=s?z._eventProxyCapture:z._eventProxy;return n?o||e.addEventListener(t,i,s):e.removeEventListener(t,i,s),!0}return"role"===t&&(n?e.setAttribute(t,n):e.removeAttribute(t),!0)}static _getRootListeners(e,t){const n=t?F:I;let o=e[n];return o||(o=e[n]={}),o}_getInitialRootProps(){const e={};for(const t of this._controlledProps.values())t in this._props&&(e[t]=this._props[t]);return e}_removeAndConvertSlotsToProps(e){var t,n;const o=null===(t=this._metadata.extension)||void 0===t?void 0:t._DYNAMIC_SLOT,s=null==o?void 0:o.prop,r=null===(n=this._metadata)||void 0===n?void 0:n.slots,i=Object.keys(e),l={};if(i.length>0&&i.forEach(t=>{const n=e[t];n.forEach(e=>{R.parkNode(e)});const i=p.getPropertyMetadata(t,r);if(i){const e=!!(null==i?void 0:i.data),o=e||""!==t?t:"children";this._assignSlotProperty(l,o,void 0,t,e,n)}else{if(!s)return;l[s]||(l[s]={});const e=o.isTemplate;this._assignSlotProperty(l,t,s,t,e,n)}}),"knockout"===this._state.getBindingProviderType()){let e;for(;e=this._element.firstChild;)this._state.getBindingProviderCleanNode()(e),e.remove()}return l}_assignSlotProperty(e,t,n,o,s,i){var l,a;const c=n?e[n]:e;if(s){if("TEMPLATE"!==(null===(l=i[0])||void 0===l?void 0:l.nodeName))throw new r.JetElementError(this._element,`Slot content for template slot ${o} must be a template element.`);{const e=i[0];c[t]=null!==(a=e.render)&&void 0!==a?a:this._getSlotRenderer(e,t,n)}}else{const e=i.map((e,t)=>w(this._element,e,this._handleSlotMount.bind(this),this._handleSlotUnmount.bind(this)));c[t]=e}}_getSlotRenderer(e,t,n){const o=this._state.getBindingProvider(),s=o?()=>{(n?this._props[n]:this._props)[t]=this._getSlotRenderer(e,t,n),this._queueRender(!0)}:null;return t=>{const n=this._state.getTemplateEngine();if(!n)throw new r.JetElementError(this._element,"Unexpected call to render a template slot");return n.execute(this._element,e,t,o,s)}}_handleBindingsDisposed(){R.disposeNodes(this._state.getSlotMap(),this._state.getBindingProviderCleanNode()),this._state.disposeTemplateCache()}_disconnectSlots(){R.disconnectNodes(this._state.getSlotMap())}_reconnectSlots(){R.reconnectNodes(this._state.getSlotMap())}_handleSlotUnmount(e){this._state.isComplete()&&R.parkNode(e)}_handleSlotMount(e){var t;const n=null===(t=u.Components)||void 0===t?void 0:t.subtreeShown;n&&(e.isConnected?n(e):window.queueMicrotask(()=>n(e)))}static _eventProxy(e){this[I][e.type](s.options.event?s.options.event(e):e)}static _eventProxyCapture(e){this[F][e.type](s.options.event?s.options.event(e):e)}_initializeActionCallbacks(e){Object.keys(e).forEach(t=>{const n=e[t],o=r.AttributeUtils.eventTypeToEventListenerProperty(t);this._props[o]=e=>{const o=Object.assign({},e),s=!!n.cancelable,r=[];s&&(o.accept=e=>{r.push(e)});const i={detail:o,bubbles:!!n.bubbles,cancelable:s},l=new CustomEvent(t,i),a=this._queueFireEventsTask({event:l,kind:"action"});if(s)return a.then(()=>l.defaultPrevented?Promise.reject():Promise.all(r).then(()=>Promise.resolve(),e=>Promise.reject(e)))}})}_initializeWritebackCallbacks(e){e.forEach(e=>{var t;const n=r.AttributeUtils.propertyNameToChangedCallback(e),{prop:o,subProp:s}=p.getComplexPropertyMetadata(e,null===(t=this._metadata)||void 0===t?void 0:t.properties);this._props[n]=t=>{this._updatePropsAndQueueRenderAsNeeded(e,t,o,s,!1)}})}}var Q;!function(e){e[e.Connect=0]="Connect",e[e.Disconnect=1]="Disconnect",e[e.Unset=2]="Unset"}(Q||(Q={}));const $=new class{constructor(){this.appendChildHelper=(e,t)=>HTMLElement.prototype.appendChild.call(e,t),this.insertBeforeHelper=(e,t,n)=>HTMLElement.prototype.insertBefore.call(e,t,n)}connectedCallback(){}disconnectedCallback(){}attributeChangedCallback(e,t,n){}getProperty(e){}setProperty(e,t){}setProperties(e){}};class G extends HTMLElement{static get observedAttributes(){let e=[];return this.metadata.properties&&(e=e.concat(p.getFlattenedAttributes(this.metadata.properties))),this.rootObservedAttributes&&(e=e.concat(this.rootObservedAttributes)),e}connectedCallback(){this._getHelper().connectedCallback()}disconnectedCallback(){var e;null===(e=this._helper)||void 0===e||e.disconnectedCallback()}attributeChangedCallback(e,t,n){var o;null===(o=this._helper)||void 0===o||o.attributeChangedCallback(e,t,n)}getProperty(e){return this._getHelper().getProperty(e)}setProperty(e,t){this._getHelper().setProperty(e,t)}setProperties(e){this._getHelper().setProperties(e)}appendChild(e){return this._getHelper().appendChildHelper(this,e)}insertBefore(e,t){return this._getHelper().insertBeforeHelper(this,e,t)}setAttribute(e,t){if("class"===e){const e=r.CustomElementUtils.getClassSet(t);r.CustomElementUtils.getElementState(this).setOuterClasses(e)}else HTMLElement.prototype.setAttribute.call(this,e,t)}removeAttribute(e){"class"===e?this.setAttribute("class",""):HTMLElement.prototype.removeAttribute.call(this,e)}_getHelper(){return this._helper||(this.hasAttribute("data-oj-jsx")?(this.removeAttribute("data-oj-jsx"),this.classList.add("oj-complete"),this._helper=$):this._helper=new z(this,this.constructor.component,this.constructor.metadata,this.constructor.rootObservedAttributes,this.constructor.rootObservedProperties,this.constructor.defaultProps)),this._helper}}const J=s.createContext(null);function W(e,t){return"className"===e||r.AttributeUtils.isGlobalOrData(e)||function(e,t){var n,o;if(null===(n=null==t?void 0:t.properties)||void 0===n?void 0:n[e])return!1;const s=e.match(Y);if(s){const e=s[1].toLowerCase()+s[2];return!(null===(o=null==t?void 0:t.events)||void 0===o?void 0:o[e])}return!1}(e,t)}const Y=/^on(?!.*Changed$)([A-Za-z])([A-Za-z]*)$/;const Z=({children:e})=>{const{tagName:t,metadata:n,isElementFirst:s,vcompProps:i}=l.useContext(J);if(s)return e;const a=Object.keys(i).filter(e=>W(e,n)).reduce((e,t)=>(e[t]=i[t],e),{}),c=o.jsx("div",Object.assign({ref:function(e){e&&(e[r.CustomElementUtils.VCOMP_INSTANCE]={props:i})},"data-oj-jsx":""},a,{children:e}));return c.type=t,c},K=n.forwardRef((e,t)=>{const{tagName:n,metadata:r,isElementFirst:i,vcompProps:a,observedPropsSet:c}=l.useContext(J);if(i){const r=o.jsx("div",Object.assign({},e,{ref:t}));return r.type=n,a[D](r),o.jsx(s.Fragment,{children:e.children})}const p={};a.style&&e.style&&(p.style=Object.assign({},a.style,e.style));const u=a.class;if(u){const t=e.class||"";p.class=`${u} ${t}`}const d=Object.keys(a).filter(t=>!(t in e)&&!c.has(t)&&W(t,r)).reduce((e,t)=>(e[t]=a[t],e),{}),h=o.jsx("div",Object.assign({},e,p,d,{ref:t,"data-oj-jsx":""}));return h.type=n,h}),X=new Set(f);class ee extends r.ElementState{constructor(e){super(e),this._translationBundleMap={}}getTranslationBundleMap(){return this._translationBundleMap}getTemplateEngine(){return ee._cachedTemplateEngine}getTrackChildrenOption(){return"immediate"}allowPropertyChangedEvents(){return super.allowPropertyChangedEvents()&&(e=>{var t;const n=e._getHelper();return!!(null===(t=n.isInitialized)||void 0===t?void 0:t.call(n))})(this.Element)}disposeTemplateCache(){var e;const t=this.getSlotMap(),n=Object.keys(t),o=i.getElementDescriptor(this.Element.tagName).metadata,s=null===(e=null==o?void 0:o.extension)||void 0===e?void 0:e._DYNAMIC_SLOT,r=!!(null==s?void 0:s.isTemplate);n.filter(e=>{const t=p.getPropertyMetadata(e,null==o?void 0:o.slots);if(t){if(t.data)return!0}else if(r)return!0;return!1}).forEach(e=>{var n;const o=t[e];"TEMPLATE"===(null===(n=o[0])||void 0===n?void 0:n.nodeName)&&this.getTemplateEngine().cleanupTemplateCache(o[0])})}GetPreCreatedPromise(){let e=super.GetPreCreatedPromise();return this.Element.constructor.translationBundleMap&&(e=e.then(()=>this._getTranslationBundlesPromise())),!ee._cachedTemplateEngine&&this._hasDirectTemplateChildren()?e.then(()=>this._getTemplateEnginePromise()):e}IsTransferAttribute(e){return this.Element.constructor.rootObservedAttrSet.has(e)}GetDescriptiveTransferAttributeValue(e){return((e,t)=>{var n;const o=e.getAttribute(t);if(o)return o;const s=e._getHelper();return((null===(n=s.getProps)||void 0===n?void 0:n.call(s))||{})[t]})(this.Element,e)}_getTranslationBundlesPromise(){void 0===ee._translationBundleLocale&&(ee._translationBundleLocale=v.matchTranslationBundle([h.getLocale()],X));const e=this.Element.constructor.translationBundleMap,t=Object.keys(e),n=[];return t.forEach(t=>{if(!ee._bundlePromiseCache[t]){const n=e[t];ee._bundlePromiseCache[t]=n(ee._translationBundleLocale)}n.push(ee._bundlePromiseCache[t])}),Promise.all(n).then(e=>{t.forEach((t,n)=>{this._translationBundleMap[t]=e[n]})})}_getTemplateEnginePromise(){return new Promise(function(t,n){e(["ojs/ojvcomponent-template"],function(e){t(function(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),t.default=e,t}(e))},n)}).then(e=>{ee._cachedTemplateEngine=e})}_hasDirectTemplateChildren(){const e=this.Element.childNodes;for(let t=0;t<e.length;t++){if("template"===e[t].localName)return!0}return!1}}ee._bundlePromiseCache={};const te=Symbol("functional component");function ne(e){return function(t){var l;const a=t._metadata||t.metadata||{};!function(e){e.properties||(e.properties={});e.properties.__oj_private_color_scheme={type:"string",binding:{consume:{name:"colorScheme"}}},e.properties.__oj_private_scale={type:"string",binding:{consume:{name:"scale"}}},e.properties.__oj_private_contexts={type:"object",binding:{consume:{name:"__oj_private_contexts"}}}}(a);const c=(null===(l=null==a?void 0:a.extension)||void 0===l?void 0:l._OBSERVED_GLOBAL_PROPS)||[],u=c.map(e=>r.AttributeUtils.getGlobalAttrForProp(e));!function(e,t,i,l){const a=t.prototype.render;t.prototype.render=function(t,c,p){var u,d;const h=null===(u=null==i?void 0:i.extension)||void 0===u?void 0:u._READ_ONLY_PROPS;h&&h.forEach(e=>delete t[e]);const _=t[H],m=!!_;m&&r.CustomElementUtils.getElementState(_).disposeTemplateCache();let v=a.call(this,t,c,p);if((null===(d=null==v?void 0:v.type)||void 0===d?void 0:d.__ojIsEnvironmentWrapper)&&v.props.children.type===e){const t=v.props.children;t.type=K;try{v=s.cloneElement(t)}finally{t.type=e}}const f=null==v?void 0:v.type;return f!==K&&(oe(f)===(se||(se=oe(n.forwardRef(()=>null))),se)&&f[te]&&0!==Object.keys(i.methods||{}).length||(v=o.jsx(Z,{children:v}))),o.jsx(J.Provider,Object.assign({value:{tagName:e,metadata:i,isElementFirst:m,vcompProps:t,observedPropsSet:l}},{children:v}))}}(e,t,a,new Set(c)),function(e,t,n,o,s,l){class a extends G{}a.metadata=t,a.component=n,a.rootObservedAttributes=s,a.rootObservedAttrSet=new Set(s),a.rootObservedProperties=o,a.defaultProps=n.defaultProps?p.deepFreeze(n.defaultProps):null,a.translationBundleMap=l,function(e,t){if(!t)return;for(let n in t)Object.defineProperty(e,n,{get(){return this.getProperty(n)},set(e){this.setProperty(n,e)}})}(a.prototype,null==t?void 0:t.properties),function(e,t){if(!t)return;for(let n in t)e[n]=function(){if(this._helper===$)throw new r.JetElementError(this,"Cannot access element methods when rendered as a value based element.");const e=this._helper.ref.current;if(!e)throw new r.JetElementError(this,"Cannot access methods before element is upgraded.");return e[n].apply(e,arguments)}}(a.prototype,null==t?void 0:t.methods),i.registerElement(e,{descriptor:{metadata:t},stateClass:ee,vcomp:!0,cache:{contexts:n._consumedContexts}},a)}(e,a,t,c,u,t._translationBundleMap||t.translationBundleMap),!t._metadata&&t.metadata&&y.warn(`Component ${e} is compiled with JET version prior to 14.0.0`)}}function oe(e){return null==e?void 0:e.$$typeof}let se;"undefined"!=typeof window&&(HTMLTemplateElement.prototype.hasOwnProperty("render")||Object.defineProperty(HTMLTemplateElement.prototype,"render",{value:null,writable:!0}));const re=r.ElementUtils.getUniqueId.bind(null,null);t.Root=K,t.consumedContexts=function(e){return function(e){}},t.customElement=ne,t.getUniqueId=re,t.method=function(e,t,n){},t.registerCustomElement=function(e,t,r){class i extends s.Component{constructor(){var e;if(super(),this.__refCallback=e=>{this.__vcompRef&&(this.__vcompRef.current=e);const t=this.props.innerRef;t&&("function"==typeof t?t(e):t.current=e)},null===(e=i._metadata)||void 0===e?void 0:e.methods){this.__vcompRef=s.createRef();const e=i._metadata.methods,t=this;for(let n in e)t[n]=(...e)=>{var t;return null===(t=this.__vcompRef.current)||void 0===t?void 0:t[n].apply(this.__vcompRef.current,e)}}}render(){return arguments[0].ref=this.__refCallback,t(arguments[0])}}return i.displayName=arguments[2],arguments.length>=4&&arguments[3]&&(i._metadata=arguments[3],arguments.length>=5&&arguments[4]&&(i.defaultProps=arguments[4])),arguments.length>=6&&(i._translationBundleMap=arguments[5]),arguments.length>=7&&(i._consumedContexts=arguments[6].consume),i[te]=!0,ne(e)(i),n.forwardRef((e,t)=>o.jsx(i,Object.assign({},e,{innerRef:t})))},Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ojvcomponent.js.map