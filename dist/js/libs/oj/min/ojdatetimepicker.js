/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
/*
 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
*/
define(["ojs/ojcore","jquery","ojs/ojeditablevalue","ojs/ojinputtext","ojs/ojvalidation","ojs/ojpopup","ojs/ojbutton"],function(a,f){function b(b){return this.options.converter.parse(b)}function d(b,d){var c=b.translations.dateTimeRange||{},e=[{category:"hint",entries:["min","max","inRange"]},{category:"messageDetail",entries:["rangeUnderflow","rangeOverflow"]},{category:"messageSummary",entries:["rangeUnderflow","rangeOverflow"]}],g={min:b.min,max:b.max,converter:d};if(!f.isEmptyObject(c))for(var h=
0,k=e.length;h<k;h++){var l=c[e[h].category];if(l){for(var x={},u=e[h].entries,w=0,y=u.length;w<y;w++)x[u[w]]=l[u[w]];g[e[h].category]=x}}return a.qa.Or(a.fd.VALIDATOR_TYPE_DATETIMERANGE).createValidator(g)}function c(b,a){var d=b.filter("span");a?d.addClass("oj-disabled").removeClass("oj-enabled oj-default"):d.removeClass("oj-disabled").addClass("oj-enabled oj-default")}function e(b,a,d){if(!b||a===d.length)return b;var c=a+1;return e(b[d[a]],c,d)||e(b["*"],c,d)}function g(b,a){a.setHours(b.getHours());
a.setMinutes(b.getMinutes());a.setSeconds(b.getSeconds());a.setMilliseconds(b.getMilliseconds());return a}function h(b){return b.delegate(".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-calendar td a","mouseout",function(){f(this).removeClass("oj-hover")}).delegate(".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-calendar td a",
"mouseover",function(){f(this).addClass("oj-hover")}).delegate(".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-calendar td a","focus",function(){f(this).addClass("oj-focus")}).delegate(".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-calendar td a",
"blur",function(){f(this).removeClass("oj-focus")})}function k(b){var a=f(b.element[0]).parent().parent();b.Up(a)}var l=a.qa.rm(a.Zj.CONVERTER_TYPE_DATETIME).createConverter({year:"numeric"});a.ya("oj.ojInputDate",f.oj.inputBase,{version:"1.0.0",widgetEventPrefix:"oj",_CLASS_NAMES:"oj-inputdatetime-input",_WIDGET_CLASS_NAMES:"oj-inputdatetime-date-only oj-component oj-inputdatetime",_ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES:"",_INPUT_HELPER_KEY:"inputHelp",_ATTR_CHECK:[{attr:"type",setMandatory:"text"}],
_GET_INIT_OPTIONS_PROPS:[{W:"disabled",xc:!0},{W:"pattern"},{W:"title"},{W:"placeholder"},{W:"value",ef:b},{W:"required",ef:!0,xc:!0},{W:"readonly",option:"readOnly",xc:!0},{W:"min",ef:b},{W:"max",ef:b}],SG:"oj-inputdatetime-input-trigger",RG:"oj-inputdatetime-calendar-icon",YQ:"oj-datepicker-current-day",dR:"oj-datepicker-days-cell-over",TS:"oj-datepicker-unselectable",cR:"oj-datepicker-desc",YF:"oj-datepicker-calendar",Q8:"oj-datepicker-div",x8:"oj-datepicker-inline",gG:" oj-inputdatetime-input-container",
y8:" oj-inputdatetime-inline",options:{datePicker:{footerLayout:"",changeMonth:"select",changeYear:"select",currentMonthPos:0,daysOutsideMonth:"hidden",numberOfMonths:1,showOn:"image",stepMonths:"numberOfMonths",stepBigMonths:12,weekDisplay:"none",yearRange:"c-10:c+10"},converter:a.qa.rm(a.Zj.CONVERTER_TYPE_DATETIME).createConverter({day:"2-digit",month:"2-digit",year:"2-digit"}),max:void 0,min:void 0,dayFormatter:null},Xz:function(){this.od=null;this.mK=!1;this.ox=4;this.Sn=this.uk=this.Nl=this.lj=
this.tk=0;this.zw={};var b=this.element[0].nodeName.toLowerCase();this.ge="div"===b||"span"===b;this.Md=h(f("\x3cdiv id\x3d'"+this.rn(this.Q8)+"' role\x3d'region' aria-describedby\x3d'"+this.rn(this.cR)+"' class\x3d'oj-datepicker-content'\x3e\x3c/div\x3e"));f("body").append(this.Md);if(this.ge)this._WIDGET_CLASS_NAMES+=this.y8,this._CLASS_NAMES="";else{this._ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES+=this.gG;var a=this;this.ZK=this.Md.ojPopup({initialFocus:"none",modality:"modeless",open:function(){a.Md.find(".oj-datepicker-calendar").focus()},
rootAttributes:{"class":"oj-datepicker-popup"}})}},_ComponentCreate:function(){this.Xz();var b=this._super();this.options.dayMetaData&&(this.options.dayFormatter=function(b){return function(a){return e(b,0,[a.fullYear,a.month,a.date])}}(this.options.dayMetaData));this.aD(this.JB());this.ge?(this.element.append(this.Md),this.element.addClass(this.x8),this.Md.css("display","block")):this.fH();k(this);return b},rf:function(){var b=this._superApply(arguments);this.gV(this.options.disabled);return b},
_setOption:function(b,d,c){var g=null;if("value"===b)return d||(d=null),g=this._super(b,d,c),this.aD(d),this.Ll()&&this.Co(!0),g;if("dayMetaData"===b)this._setOption("dayFormatter",function(b){return e(d,0,[b.fullYear,b.month,b.date])},c);else return g=this._super(b,d,c),"disabled"===b?this.gV(d):"max"===b||"min"===b?(this.zw[a.fd.VALIDATOR_TYPE_DATETIMERANGE]=this.eC("min"),this.ks()):"readOnly"===b&&d?this.hide():"dayFormatter"===b&&(this.zw[a.fd.VALIDATOR_TYPE_DATERESTRICTION]=this.eC("dayFormatter"),
this.ks()),"datePicker"===b&&"currentMonthPos"===c.subkey&&this.aD(this.options.value),c={max:!0,min:!0,dayFormatter:!0,datePicker:!0,translations:!0},this.Ll()&&b in c&&this.Co(),g},UF:function(){return this.od},_destroy:function(){var b=this._super();this.element.off("focus");this.od&&this.od.remove();this.ge&&(this.element.removeProp("disabled"),this.element.removeProp("readonly"));this.Md.remove();return b},Ll:function(){return this.ge||this.ZK.ojPopup("isOpen")},fH:function(){var b=this.options.datePicker.showOn,
a=f("\x3cspan\x3e").addClass(this.SG);if("focus"===b)this.element.on("focus",f.proxy(this.show,this));b=f("\x3cspan title\x3d'"+this.SI()+"'/\x3e").addClass(this.RG+" oj-clickable-icon-nocontext oj-component-icon");a.append(b);var d=this;b.on("click",function(){d.Ll()?d.hide():d.show();return!1});this.Up(b);this._hoverable(b);this.DM=b;this.od=a;this.element.after(a)},Gca:function(b){var a;a=!1;var d=f.ui.keyCode,c=this.Cj;if(this.Ll())switch(b.keyCode){case 84:b.altKey&&b.ctrlKey&&(this.Md.find(".oj-datepicker-current").focus(),
a=!0);break;case d.TAB:this.hide();break;case d.ENTER:return a=f("td."+this.dR+":not(."+this.YQ+")",this.Md),a[0]&&this.b0(this.lj,this.uk,a[0],b),b.preventDefault(),b.stopPropagation(),!1;case d.ESCAPE:this.hide();this.element.focus();a=!0;break;case d.PAGE_UP:b.ctrlKey&&b.altKey?this.Af(-this.options.datePicker.stepBigMonths,"M",!0):b.altKey?this.Af(-1,"Y",!0):this.Af(-this.Uw(),"M",!0);a=!0;break;case d.PAGE_DOWN:b.ctrlKey&&b.altKey?this.Af(+this.options.datePicker.stepBigMonths,"M",!0):b.altKey?
this.Af(1,"Y",!0):this.Af(+this.Uw(),"M",!0);a=!0;break;case d.END:this.tk=this.Jw(this.uk,this.lj);this.Co(!0);a=!0;break;case d.HOME:this.tk=1;this.Co(!0);a=!0;break;case d.LEFT:this.Af(c?1:-1,"D",!0);b.originalEvent.altKey&&this.Af(b.ctrlKey?-this.options.datePicker.stepBigMonths:-this.Uw(),"M",!0);a=!0;break;case d.UP:this.Af(-7,"D",!0);a=!0;break;case d.RIGHT:this.Af(c?-1:1,"D",!0);b.originalEvent.altKey&&this.Af(b.ctrlKey?+this.options.datePicker.stepBigMonths:+this.Uw(),"M",!0);a=!0;break;
case d.DOWN:this.Af(7,"D",!0),a=!0}else b.keyCode===d.HOME&&b.ctrlKey&&(this.show(),a=!0);a&&(b.preventDefault(),b.stopPropagation())},Co:function(b){this.ox=4;var a=this.yda();this.Md.empty().append(a.html);var d=f("button",this.Md);0<d.length&&(1===d.length&&f(d[0]).addClass("oj-datepicker-single-button"),f.each(d,function(b,a){f(a).ojButton()}));this.gaa();a.C2&&this.Md.find(".oj-datepicker-calendar").attr("aria-activedescendant",a.C2);a=this.qJ();d=a[1];this.Md.removeClass("oj-datepicker-multi-2 oj-datepicker-multi-3 oj-datepicker-multi-4").width("");
1<d&&this.Md.addClass("oj-datepicker-multi-"+d).css("width",17*d+"em");this.Md[(1!==a[0]||1!==a[1]?"add":"remove")+"Class"]("oj-datepicker-multi");this.Ll()&&this.element.is(":visible")&&!this.element.is(":disabled")&&(b?(b=this.Md.find(".oj-datepicker-calendar"),b[0]!==document.activeElement&&b.focus()):this.ge||this.element[0]===document.activeElement||this.element.focus())},Af:function(b,a,d){this.options.disabled||(this.hT(b+("M"===a?this.options.datePicker.currentMonthPos:0),a),this.Co(d))},
hfa:function(){var b=new Date;this.tk=b.getDate();this.Nl=this.lj=b.getMonth();this.Sn=this.uk=b.getFullYear();this.Af()},c0:function(b,d){var c=parseInt(b.options[b.selectedIndex].value,10);"M"===d?this.lj=this.Nl=c:this.uk=this.Sn=c;f("#"+this.rn(this.YF)).html(this.fk(this.options.monthWide[this.Nl])+" "+l.format(a.sb.dateToLocalIso(new Date(this.Sn,this.Nl,1))));this.Af(0,0,!0)},b0:function(b,d,c,e){f(c).hasClass(this.TS)||this.options.disabled||(this.tk=f("a",c).html(),this.lj=b,this.uk=d,b=
a.sb,(d=this.options.value?b.isoToLocalDate(this.options.value):null)?(c=new Date(this.uk,this.lj,this.tk),g(d,c),d=c):d=new Date(this.uk,this.lj,this.tk),b=b.dateToLocalIso(d),d=this.Tc().format(b),this.qi(d),this.gc(b,e),this.hide())},nI:function(b,d){return b?"string"===typeof b?a.sb.isoToLocalDate(b):new Date(b.getTime()):d},aD:function(b){b=this.nI(b,this.mX());this.tk=b.getDate();this.Nl=this.lj=b.getMonth();this.Sn=this.uk=b.getFullYear();this.hT()},Uw:function(){var b=this.options.datePicker.stepMonths;
return f.isNumeric(b)?b:this.options.datePicker.numberOfMonths},gaa:function(){var b=this.Uw(),a=this;this.Md.find("[data-handler]").map(function(){f(this).bind(this.getAttribute("data-event"),{prev:function(d){a.Af(-b,"M",!0);d.preventDefault()},next:function(d){a.Af(+b,"M",!0);d.preventDefault()},today:function(b){if("keyup"===b.type&&13===b.keyCode||"click"===b.type)a.hfa(),b.preventDefault(),b.stopPropagation()},selectDay:function(b){a.b0(+this.getAttribute("data-month"),+this.getAttribute("data-year"),
this,b);return!1},selectMonth:function(){a.c0(this,"M");return!1},selectYear:function(){a.c0(this,"Y");return!1},calendarKey:function(b){a.Gca(b)}}[this.getAttribute("data-handler")])})},Uia:function(b,a,d){a=a?new Date(a.getFullYear(),a.getMonth(),a.getDate()):null;d=d?new Date(d.getFullYear(),d.getMonth(),d.getDate()):null;return null!==a&&b<a||null!==d&&b>d},yda:function(){var b,d,c,e,g,f,h=this.options.dayWide,k=this.options.dayNarrow,l=this.options.monthWide,u=this.options.monthAbbreviated,w=
this.options.firstDayOfWeek,y,F,I,G,C,H,E,B="",z,J,A,P,Q,L,K,D,N=new Date,N=new Date(N.getFullYear(),N.getMonth(),N.getDate()),O=this.Cj;f=this.options.datePicker.footerLayout;var W=this.qJ(),M=this.options.datePicker.currentMonthPos,V=this.options.dayFormatter;D=null;var Z=1!==W[0]||1!==W[1],X=this.SB("min"),R=this.SB("max"),M=this.Nl-M,U=this.Sn,ha=new Date(this.uk,this.lj,this.tk),Y=new Date(this.JB()),T=Y.getDate(),aa=Y.getMonth(),fa=Y.getFullYear(),ba=this.options.disabled,S=this.fk(this.A("weekText")),
ca=a.sb;Y.setHours(0);Y.setMinutes(0);Y.setSeconds(0);Y.setMilliseconds(0);0>M&&(M+=12,U--);if(X)for(b=new Date(X.getFullYear(),X.getMonth(),X.getDate()),b=R&&R<b?R:b;new Date(U,M,this.Jw(U,M))<b;)M++,11<M&&(M=0,U++);if(R)for(b=new Date(R.getFullYear(),R.getMonth()-W[0]*W[1]+1,R.getDate()),b=X&&b<X?X:b;new Date(U,M,1)>b;)M--,0>M&&(M=11,U--);this.Nl=M;this.Sn=U;b=this.fk(this.A("prevText"));b=this.QT(-1,U,M)&&!ba?"\x3ca href\x3d'#' class\x3d'oj-datepicker-prev-icon oj-enabled oj-default oj-component-icon oj-clickable-icon-nocontext' data-handler\x3d'prev' data-event\x3d'click' title\x3d'"+
b+"'\x3e\x3c/a\x3e":"\x3ca class\x3d'oj-datepicker-prev-icon oj-disabled oj-component-icon oj-clickable-icon-nocontext' title\x3d'"+b+"'\x3e\x3c/a\x3e";d=this.fk(this.A("nextText"));d=this.QT(1,U,M)&&!ba?"\x3ca href\x3d'#' class\x3d'oj-datepicker-next-icon oj-enabled oj-default oj-component-icon oj-clickable-icon-nocontext' data-handler\x3d'next' data-event\x3d'click' title\x3d'"+d+"'\x3e\x3c/a\x3e":"\x3ca class\x3d'oj-datepicker-next-icon oj-disabled oj-component-icon oj-clickable-icon-nocontext' title\x3d'"+
d+"'\x3e\x3c/a\x3e";c=this.fk(this.A("currentText"));g="";e="\x3cbutton type\x3d'button' class\x3d'oj-datepicker-current oj-priority-secondary' data-handler\x3d'today' data-event\x3d'click keyup'\x3e"+c+"\x3c/button\x3e";if(1<f.length){c=0;f=[{index:f.indexOf("today"),content:this.yY(N)?e:""}];for(f.sort(function(b,a){return b.index-a.index});c<f.length&&0>f[c].index;)c++;for(;c<f.length;)g+=f[c++].content;0<g.length&&(g="\x3cdiv class\x3d'oj-datepicker-buttonpane'\x3e"+g+"\x3c/div\x3e")}f=this.options.datePicker.weekDisplay;
c=this.options.datePicker.daysOutsideMonth;e="";y="all";for(F=0;F<W[0];F++){I="";this.ox=4;for(G=0;G<W[1];G++){y="all";z="";if(Z){z+="\x3cdiv class\x3d'oj-datepicker-group";if(1<W[1])switch(G){case 0:z+=" oj-datepicker-group-first";y=O?"right":"left";break;case W[1]-1:z+=" oj-datepicker-group-last";y=O?"left":"right";break;default:z+=" oj-datepicker-group-middle",y=""}z+="'\x3e"}z+="\x3cdiv class\x3d'oj-datepicker-header"+(ba?" oj-disabled ":" oj-enabled oj-default ")+"'\x3e"+(/all|left/.test(y)&&
0===F?O?d:b:"")+(/all|right/.test(y)&&0===F?O?b:d:"")+this.zda(M,U,X,R,0<F||0<G,l,u,Z)+"\x3c/div\x3e\x3ctable class\x3d'oj-datepicker-calendar"+(ba?" oj-disabled ":" oj-enabled oj-default ")+"' tabindex\x3d-1 data-handler\x3d'calendarKey' data-event\x3d'keydown' aria-readonly\x3d'true' role\x3d'grid' aria-labelledby\x3d'"+this.rn(this.YF)+"'\x3e\x3cthead role\x3d'presentation'\x3e\x3ctr role\x3d'row'\x3e";J="number"===f?"\x3cth class\x3d'oj-datepicker-week-col'\x3e"+this.fk(this.A("weekHeader"))+
"\x3c/th\x3e":"";for(y=0;7>y;y++)A=(y+parseInt(w,10))%7,J+="\x3cth role\x3d'columnheader' aria-label\x3d'"+h[A]+"'"+(5<=(y+w+6)%7?" class\x3d'oj-datepicker-week-end'":"")+"\x3e\x3cspan title\x3d'"+h[A]+"'\x3e"+k[A]+"\x3c/span\x3e\x3c/th\x3e";z+=J+"\x3c/tr\x3e\x3c/thead\x3e\x3ctbody role\x3d'presentation'\x3e";J=this.Jw(U,M);U===fa&&M===aa&&(T=Math.min(T,J));y=(this.dea(U,M)-w+7)%7;J=Math.ceil((y+J)/7);this.ox=J=Z?this.ox>J?this.ox:J:J;A=new Date(U,M,1-y);for(P=0;P<J;P++){z+="\x3ctr role\x3d'row'\x3e";
y=this.Tc().Io(ca.dateToLocalIso(A));Q="none"===f?"":"\x3ctd class\x3d'oj-datepicker-week-col' role\x3d'rowheader' aria-label\x3d'"+S+" "+y+"'\x3e"+y+"\x3c/td\x3e";for(y=0;7>y;y++){K=A.getMonth()!==M;C=A.getTime()===Y.getTime();H="oj-dp-"+this.uuid+"-"+P+"-"+y+"-"+F+"-"+G;(E=A.getTime()===ha.getTime()&&M===this.lj)&&(B=H);L=[!0,""];D=A.getFullYear();var da=A.getMonth(),ga=A.getDate();V&&(D=V({fullYear:D,month:da+1,date:ga}))&&(L=[!D.disabled,D.className||""],D.tooltip&&L.push(D.tooltip));da=A.getTime()===
Y.getTime();D=K&&"selectable"!==c||!L[0]||this.Uia(A,X,R);Q+="\x3ctd role\x3d'gridcell' aria-disabled\x3d'"+!!D+"' aria-selected\x3d'"+C+"' id\x3d'"+H+"' class\x3d'"+(5<=(y+w+6)%7?" oj-datepicker-week-end":"")+(K?" oj-datepicker-other-month":"")+(E?" "+this.dR:"")+(D||ba?" "+this.TS+" oj-disabled":" oj-enabled ")+(K&&"hidden"===c?"":" "+L[1]+(C?" "+this.YQ:"")+(A.getTime()===N.getTime()?" oj-datepicker-today":""))+"'"+(K&&"hidden"===c||!L[2]?"":" title\x3d'"+L[2].replace(/'/g,"\x26#39;")+"'")+(D?
"":" data-handler\x3d'selectDay' data-event\x3d'click' data-month\x3d'"+A.getMonth()+"' data-year\x3d'"+A.getFullYear()+"'")+"\x3e"+(K&&"hidden"===c?"\x26#xa0;":D||ba?"\x3cspan class\x3d'oj-disabled'\x3e"+A.getDate()+"\x3c/span\x3e":"\x3ca class\x3d'oj-enabled"+(da?" oj-selected":"")+(K?" oj-priority-secondary":"")+"' "+(da||E?"":"tabindex\x3d'-1' ")+" href\x3d'#'\x3e"+A.getDate()+"\x3c/a\x3e")+"\x3c/td\x3e";A.setDate(A.getDate()+1)}z+=Q+"\x3c/tr\x3e"}M++;11<M&&(M=0,U++);z+="\x3c/tbody\x3e\x3c/table\x3e"+
(Z?"\x3c/div\x3e"+(0<W[0]&&G===W[1]-1?"\x3cdiv class\x3d'oj-datepicker-row-break'\x3e\x3c/div\x3e":""):"");I+=z}e+=I}return{html:e+g,C2:B}},zda:function(b,d,c,e,g,f,h,k){var x,u,w,y,F=this.options.datePicker.changeMonth,I=this.options.datePicker.changeYear,G=a.La.k4()?"before":"after",C="\x3cdiv class\x3d'oj-datepicker-title' role\x3d'header'\x3e",H="",E=this.options.disabled,B=a.sb;if(g||"none"===F)H+="\x3cspan class\x3d'oj-datepicker-month'\x3e"+f[b]+"\x3c/span\x3e";else{x=c&&c.getFullYear()===
d;u=e&&e.getFullYear()===d;H+="\x3cselect tabindex\x3d'-1' class\x3d'oj-datepicker-month "+(E?"oj-disabled' disabled":"oj-enabled'")+" data-handler\x3d'selectMonth' data-event\x3d'change' role\x3d'listbox'\x3e";for(w=0;12>w;w++)(!x||w>=c.getMonth())&&(!u||w<=e.getMonth())&&(H+="\x3coption role\x3d'option' value\x3d'"+w+"' aria-selected\x3d'"+(w===b?"true' selected\x3d'selected'":"false'")+"\x3e"+h[w]+"\x3c/option\x3e");H+="\x3c/select\x3e"}"before"===G&&(C+=H+(g||"select"!==F||"select"!==I?"\x26#xa0;":
""));if(!this.Ym)if(this.Ym="",g||"none"===I)C+="\x3cspan class\x3d'oj-datepicker-year'\x3e"+l.format(B.dateToLocalIso(new Date(d,b,1)))+"\x3c/span\x3e";else{x=this.options.datePicker.yearRange.split(":");y=(new Date).getFullYear();u=function(b){b=b.match(/c[+\-].*/)?d+parseInt(b.substring(1),10):b.match(/[+\-].*/)?y+parseInt(b,10):parseInt(b,10);return isNaN(b)?y:b};h=u(x[0]);x=Math.max(h,u(x[1]||""));h=c?Math.max(h,c.getFullYear()):h;x=e?Math.min(x,e.getFullYear()):x;for(this.Ym+="\x3cselect tabindex\x3d'-1' class\x3d'oj-datepicker-year "+
(E?"oj-disabled' disabled":"oj-enabled'")+" data-handler\x3d'selectYear' data-event\x3d'change' role\x3d'listbox'\x3e";h<=x;h++)this.Ym+="\x3coption role\x3d'option' value\x3d'"+h+"' aria-selected\x3d'"+(h===d?"true' selected\x3d'selected'":"false'")+"\x3e"+l.format(B.dateToLocalIso(new Date(h,b,1)))+"\x3c/option\x3e";this.Ym+="\x3c/select\x3e";C+=this.Ym;this.Ym=null}"after"===G&&(C+=(g||"select"!==F||"select"!==I?"\x26#xa0;":"")+H);k&&g||(C+="\x3cspan class\x3d'oj-helper-hidden-accessible' id\x3d'"+
this.rn(this.YF)+"'\x3e"+f[b]+" "+l.format(B.dateToLocalIso(new Date(d,b,1)))+"\x3c/span\x3e",C+="\x3cspan class\x3d'oj-helper-hidden-accessible' id\x3d'"+this.rn(this.cR)+"'\x3e"+this.fk(this.A("datePicker"))+"\x3c/span\x3e");return C+"\x3c/div\x3e"},hT:function(b,a){var d=this.Sn+("Y"===a?b:0),c=this.Nl+("M"===a?b:0),e=Math.min(this.tk,this.Jw(d,c))+("D"===a?b:0),d=new Date(d,c,e);this.tk=d.getDate();this.Nl=this.lj=d.getMonth();this.Sn=this.uk=d.getFullYear()},qJ:function(){var b=this.options.datePicker.numberOfMonths,
b="string"===typeof b?parseInt(b,10):b;return null==b?[1,1]:"number"===typeof b?[1,b]:b},SB:function(b){return this.nI(this.options[b],null)},Jw:function(b,a){return 32-(new Date(b,a,32)).getDate()},dea:function(b,a){return(new Date(b,a,1)).getDay()},QT:function(b,a,d){var c=this.qJ();a=new Date(a,d+(0>b?b:c[0]*c[1]),1);0>b&&a.setDate(this.Jw(a.getFullYear(),a.getMonth()));return this.yY(a)},yY:function(b){var a,d,c=this.SB("min"),e=this.SB("max"),g=null,f=null;if(a=this.options.datePicker.yearRange)a=
a.split(":"),d=(new Date).getFullYear(),g=parseInt(a[0],10),f=parseInt(a[1],10),a[0].match(/[+\-].*/)&&(g+=d),a[1].match(/[+\-].*/)&&(f+=d);return(!c||b.getTime()>=c.getTime())&&(!e||b.getTime()<=e.getTime())&&(!g||b.getFullYear()>=g)&&(!f||b.getFullYear()<=f)},SI:function(){return this.fk(this.A("tooltipCalendar"+(this.options.disabled?"Disabled":"")))},gV:function(b){this.od&&(c(this.od.children(),b),this.od.find("."+this.RG).attr("title",this.SI()));b&&this.hide();this.ge&&this.Co()},TF:function(){this.ge||
this._superApply(arguments)},UK:function(b){this.ge||this._superApply(arguments)},JC:function(b){if(!this.ge){this._superApply(arguments);var a=f.ui.keyCode,d=!1;if(this.Ll())switch(b.keyCode){case a.TAB:this.hide();break;case a.ESCAPE:this.hide();d=!0;break;case a.UP:case a.DOWN:this.Md.find(".oj-datepicker-calendar").focus(),d=!0}else switch(b.keyCode){case a.UP:case a.DOWN:this.gc(this.kg(),b),this.show(),d=!0}if(d)return b.preventDefault(),b.stopPropagation(),!1}},qi:function(b){this.ge||this._superApply(arguments);
this.aD(this.JB());this.Ll()&&this.Co(!0)},Tc:function(){return this.options.converter?this._superApply(arguments):f.oj.ojInputDate.prototype.options.converter},vs:function(){return this.options.value||""},_GetDefaultStyleClass:function(){return"oj-inputdate"},Iv:function(){var b=this._superApply(arguments);if(null!=this.options.min||null!=this.options.max)this.zw[a.fd.VALIDATOR_TYPE_DATETIMERANGE]=this.eC("min");null!=this.options.dayFormatter&&(this.zw[a.fd.VALIDATOR_TYPE_DATERESTRICTION]=this.eC("dayFormatter"));
return f.extend(this.zw,b)},oi:function(){this.hide()},zl:function(){this.hide()},eC:function(b){var c=null;"min"===b||"max"===b?c=d(this.options,this.Tc()):"dayFormatter"===b&&(b={dayFormatter:this.options.dayFormatter,converter:this.Tc()},f.extend(b,this.options.translations.dateRestriction||{}),c=a.qa.Or(a.fd.VALIDATOR_TYPE_DATERESTRICTION).createValidator(b));return c},mX:function(){var b=new Date;b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0);return b},JB:function(){return this.nI(this.options.value,
this.mX())},getNodeBySubId:function(b){var a=null,d=b&&b.subId,c=this.Md;if(d)switch(d){case "oj-datepicker-content":a=c[0];break;case "oj-inputdatetime-calendar-icon":a=f(".oj-inputdatetime-calendar-icon",this.od)[0];break;case "oj-datepicker-prev-icon":a=f(".oj-datepicker-prev-icon",c)[0];break;case "oj-datepicker-next-icon":a=f(".oj-datepicker-next-icon",c)[0];break;case "oj-datepicker-month":a=f(".oj-datepicker-month",c)[0];break;case "oj-datepicker-year":a=f(".oj-datepicker-year",c)[0];break;
case "oj-datepicker-current":a=f(".oj-datepicker-current",c)[0];break;case "oj-inputdatetime-date-input":a=this.ge?null:this.element[0];break;default:a=null}return a||this._superApply(arguments)},getSubIdByNode:function(b){var a=this.Md,d=null,c=[{selector:".oj-inputdatetime-calendar-icon",ele:this.od},{selector:".oj-datepicker-prev-icon",ele:a},{selector:".oj-datepicker-next-icon",ele:a},{selector:".oj-datepicker-month",ele:a},{selector:".oj-datepicker-year",ele:a},{selector:".oj-datepicker-current",
ele:a}];if(b===a[0])return"oj-datepicker-content";if(!this.ge&&b===this.element[0])return"oj-inputdatetime-date-input";for(var a=0,e=c.length;a<e;a++){var g=c[a],h=f(g.selector,g.ele);if(1===h.length&&h[0]===b){d=g.selector.substr(1);break}}return d||this._superApply(arguments)},hide:function(){this.Ll()&&!this.ge&&(this.ZK.ojPopup("close"),"focus"===this.options.datePicker.showOn&&(this.mK=!0),this.element.focus());return this},refresh:function(){this.od&&this.od.find("."+this.RG).attr("title",this.SI());
return this._superApply(arguments)||this},show:function(){if(!(this.Ll()||this.options.disabled||this.options.readOnly))if(this.mK)this.mK=!1;else{var b=this.Cj;this.Md.empty();this.Co();b=a.oc.Hg({my:"start top",at:"start bottom",of:this.element,collision:"flipfit flipfit"},b);this.ZK.ojPopup("open",this.DM,b);return this}}});a.Components.Tm({ojInputDate:{firstDayOfWeek:a.Components.nh(function(){return a.La.i3()}),dayWide:a.Components.nh(function(){return a.La.Gy("wide")}),dayNarrow:a.Components.nh(function(){return a.La.Gy("narrow")}),
monthWide:a.Components.nh(function(){return a.La.Iy("wide")}),monthAbbreviated:a.Components.nh(function(){return a.La.Iy("abbreviated")}),datePicker:a.Components.nh(function(){return a.Ee.Yk("inputDate").datePicker})}});a.ya("oj.ojInputTime",f.oj.inputBase,{version:"1.0.0",widgetEventPrefix:"oj",_CLASS_NAMES:"oj-inputdatetime-input",_WIDGET_CLASS_NAMES:"oj-inputdatetime-time-only oj-component oj-inputdatetime",gG:"oj-inputdatetime-input-container",_ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES:"",_INPUT_HELPER_KEY:"inputHelp",
_ATTR_CHECK:[{attr:"type",setMandatory:"text"}],_GET_INIT_OPTIONS_PROPS:[{W:"disabled",xc:!0},{W:"pattern"},{W:"title"},{W:"placeholder"},{W:"value",ef:b},{W:"required",ef:!0,xc:!0},{W:"readonly",option:"readOnly",xc:!0},{W:"min",ef:b},{W:"max",ef:b}],i$:"ojInputTime",SG:"oj-inputdatetime-input-trigger",TG:"oj-inputdatetime-time-icon",options:{converter:a.qa.rm(a.Zj.CONVERTER_TYPE_DATETIME).createConverter({hour:"2-digit",hour12:!0,minute:"2-digit"}),max:void 0,min:void 0,datePickerComp:null,timePicker:{timeIncrement:"00:30:00:00"}},
ae:function(b,d){this._super(b,d);null===this.options.datePickerComp&&a.ze.al(this._GET_INIT_OPTIONS_PROPS,d,this)},Xz:function(){this.lM={};this.Kl=this.options.datePickerComp;this.ug=f("\x3cdiv id\x3d'"+this.rn(this.i$)+"' class\x3d'oj-listbox-drop' style\x3d'display:none'\x3e\x3c/div\x3e");f("body").append(this.ug);var b=this;this.$K=this.ug.ojPopup({initialFocus:"none",rootAttributes:{"class":"datetimepicker-dropdown"},chrome:"none",modality:"modeless",open:function(){var a=f("[aria-selected]",
b.ug);1===a.length&&b.VT(a.parent(),!0);f("ul",b.ug).focus()},beforeClose:function(){b.q1=f("ul",b.ug).scrollTop()}});this.ho()&&(this._ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES+=this.gG)},gy:function(){return this.$K.ojPopup("isOpen")},_ComponentCreate:function(){this.Xz();var b=this._superApply(arguments);this.$l()&&!this.sY()?this._CLASS_NAMES="":k(this);this.fH();return b},rf:function(){var b=this._superApply(arguments);c(this.od.children(),this.options.disabled);return b},_setOption:function(b,e,g){var f=
null;if("value"===b)return e||(e=null),f=this._super(b,e,g),this.BB(),f;f=this._superApply(arguments);"disabled"===b?(e&&this.hide(),this.od.find("."+this.TG).attr("title",this.GJ()),c(this.od.children(),e)):"max"!==b&&"min"!==b||this.$l()?"readOnly"===b&&e&&this.hide():(this.lM[a.fd.VALIDATOR_TYPE_DATETIMERANGE]=d(this.options,this.Tc()),this.ks());b in{max:!0,min:!0,converter:!0,timePicker:!0}&&this.BB();return f},_destroy:function(){var b=this._super();this.od&&this.od.remove();this.ug.remove();
return b},TF:function(){this.ho()&&this._superApply(arguments)},UF:function(){return this.od},JC:function(b){if(this.ho()){this._superApply(arguments);var a=f.ui.keyCode,d=!1;if(this.gy())switch(b.keyCode){case a.TAB:this.hide();break;case a.ESCAPE:this.hide();d=!0;break;case a.UP:case a.DOWN:f("ul",this.ug).focus(),d=!0}else switch(b.keyCode){case a.UP:case a.DOWN:this.gc(this.kg(),b),this.show(),d=!0}if(d||b.keyCode===a.ENTER)return b.preventDefault(),b.stopPropagation(),!1}},GJ:function(){return this.fk(this.A("tooltipTime"+
(this.options.disabled?"Disabled":"")))},fH:function(){var b=this.ho(),a=b?f("\x3cspan\x3e").addClass(this.SG):f("+ span",this.element),d=f("\x3cspan title\x3d'"+this.GJ()+"'/\x3e").addClass(this.TG+" oj-clickable-icon-nocontext oj-component-icon");a.append(d);var c=this;d.on("click",function(){c.gy()?c.hide():c.show()});this.Up(d);this._hoverable(d);this.DM=d;this.od=a;b&&this.element.after(a)},Mga:function(b,a,d){return null!==a&&b<a||null!==d&&b>d},vq:function(){return this.$l()?this.Kl.widget.N3():
this.options.value},BB:function(){var b=this.vq(),d=this.Tc(),c=f("\x3cul class\x3d'oj-listbox-results' tabindex\x3d'-1' role\x3d'listbox'\x3e\x3c/ul\x3e"),d=b?d.format(b):"",e=[],g,b=b?a.sb.isoToLocalDate(b):new Date;b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0);e=this.$ea(b);d=d||e[0].value;this.ug.empty();b=0;for(g=e.length;b<g;b++){var h=e[b].value,k=e[b].minMaxRange,l=f("\x3cli class\x3d'oj-listbox-result "+(k?"oj-disabled":"")+"' role\x3d'presentation'\x3e"),x=this.uuid+
"_sel"+b,k=f("\x3cdiv class\x3d'oj-listbox-result-label' "+(k?"aria-disabled ":"")+"data-value\x3d'"+h+"' role\x3d'option' id\x3d'"+x+"'\x3e"+e[b].label+"\x3c/li\x3e");d===h&&(k.attr("aria-selected","true"),l.addClass("oj-hover"),c.attr("aria-activedescendant",x));l.append(k);c.append(l)}this.ug.append(c);f(".oj-listbox-result",c).on("mousemove",function(){var b=f(this);b.hasClass("oj-disabled")||(f(".oj-hover",c).removeClass("oj-hover"),b.addClass("oj-hover"),c.attr("aria-activedescendant",b.children()[0].id))});
var u=this;c.on("click",function(b){var a=f(b.target);a.hasClass("oj-disabled")||void 0!==a.attr("aria-disabled")||(u.SZ(b),u.hide())}).on("keydown",function(b){u.wma(b)})},$ea:function(b){var d=[],c=this.Tc();if(b){var e=this.options.timePicker.timeIncrement.split(":"),g=a.sb,f=this.$l(),h=g.dateToLocalIso(b),k=f?this.Kl.widget.options.min:this.options.min,f=f?this.Kl.widget.options.max:this.options.max,k=k?g.isoToLocalDate(g._minMaxIsoString(k,h)):null,f=f?g.isoToLocalDate(g._minMaxIsoString(f,
h)):null;if(4===e.length){var h=parseInt(e[0].substring(0),10),l=parseInt(e[1],10),u=parseInt(e[2],10),e=parseInt(e[3],10),w=new Date(b),y="";do y=c.format(g.dateToLocalIso(w)),d.push({label:y,value:y,minMaxRange:this.Mga(w,k,f)}),w.setHours(w.getHours()+h),w.setMinutes(w.getMinutes()+l),w.setSeconds(w.getSeconds()+u),w.setMilliseconds(w.getMilliseconds()+e);while(w.getDate()===b.getDate())}else throw Error("timeIncrement value should be in the format of hh:mm:ss:SS");}return d},wma:function(b){if(this.gy()){var a=
f.ui.keyCode,d=!1;switch(b.keyCode){case a.TAB:this.hide();break;case a.ESCAPE:this.hide();this.element.focus();d=!0;break;case a.UP:this.MZ(b,"prev");d=!0;break;case a.DOWN:this.MZ(b,"next");d=!0;break;case a.ENTER:this.SZ(b),d=!0}if(d)return b.preventDefault(),b.stopPropagation(),!1}},MZ:function(b,a){var d=f(".oj-hover",this.ug),c=f("ul",this.ug),e=null;1===d.length?(e=d[a](),1===e.length&&d.removeClass("oj-hover")):e=f(c.children()[0]);e&&1===e.length&&(e.addClass("oj-hover"),c.attr("aria-activedescendant",
e.children()[0].id),this.VT(e))},SZ:function(b){var a=this.ug,d=f("[aria-selected]",a),c=f("ul",a),a=f(".oj-hover div",a);1===a.length&&(1===d.length&&(d.removeAttr("aria-selected"),d.parent().removeClass("oj-hover")),a.attr("aria-selected","true"),a.parent().addClass("oj-hover"),this.hide(),this.qi(a.attr("data-value")),this.gc(a.attr("data-value"),b),c.attr("aria-activedescendant",a[0].id),this.element.focus(),this.$l()&&this.Kl.widget.hide())},UK:function(b){this.ho()&&this._superApply(arguments)},
show:function(){if(!this.options.disabled&&!this.options.readOnly){this.$l()&&this.Kl.widget.hide();this.BB();var b=this.ug,d=this.$K;b.width(this.element.parent().width());b.css({position:"relative"});var c=a.oc.Hg({my:"start top",at:"start bottom",of:this.element,collision:"flipfit flipfit"},this.Cj);d.ojPopup("open",this.DM,c);b.find("[aria-selected]").parent().addClass("oj-hover")}},hide:function(){this.gy()&&(this.$K.ojPopup("close"),this.element.focus())},refresh:function(){this.od&&this.od.find("."+
this.TG).attr("title",this.GJ());return this._superApply(arguments)||this},qi:function(b){this.ho()&&this._superApply(arguments);this.gy()&&this.BB()},gc:function(b,d,c){if(this.$l()){this._super(b,null,c);try{var e=this.Tc().parse(b),f=a.sb,h=this.Kl.widget,k=h.N3(),l=k?f.isoToLocalDate(k):new Date,x=g(e?f.isoToLocalDate(e):new Date,new Date(l)),u=f.dateToLocalIso(x);l.getTime()!=x.getTime()&&h.ara(u,d)}catch(w){}}else this._superApply(arguments)},Gv:function(){return this.ho()},ho:function(){return!this.$l()||
this.sY()},_GetDefaultStyleClass:function(){return"oj-inputtime"},vs:function(){return this.options.value||""},Iv:function(){var b=this._superApply(arguments);null==this.options.min&&null==this.options.max||this.$l()||(this.lM[a.fd.VALIDATOR_TYPE_DATETIMERANGE]=d(this.options,this.Tc()));return f.extend(this.lM,b)},Tc:function(){return this.options.converter?this._superApply(arguments):f.oj.ojInputTime.prototype.options.converter},VT:function(b,a){var d=b.parent();a&&this.q1&&f(d).scrollTop(this.q1);
var c=f(d).scrollTop(),e=c+f(d).height(),g=b[0].offsetTop,h=g+f(b).height();g<c?f(d).scrollTop(g):h>e&&f(d).scrollTop(h-f(d).height())},$l:function(){return null!==this.Kl},sY:function(){return this.Kl.inline},oi:function(){this.hide()},zl:function(){this.hide()},getNodeBySubId:function(b){var a=null,d=b&&b.subId;if(d)switch(d){case "oj-listbox-drop":a=this.ug[0];break;case "oj-inputdatetime-time-icon":a=f(".oj-inputdatetime-time-icon",this.od)[0];break;case "oj-inputdatetime-time-input":a=this.element[0];
break;default:a=null}return a||this._superApply(arguments)},getSubIdByNode:function(b){var a=f(".oj-inputdatetime-time-icon",this.od),d=null;b===this.ug[0]?d="oj-listbox-drop":b===a[0]?d="oj-inputdatetime-time-icon":b===this.element[0]&&(d="oj-inputdatetime-time-input");return d||this._superApply(arguments)},widget:function(){return this.ho()?this._super():this.Kl.widget.widget()}});a.ya("oj.ojInputDateTime",f.oj.ojInputDate,{version:"1.0.0",widgetEventPrefix:"oj",_WIDGET_CLASS_NAMES:"oj-inputdatetime-date-time oj-component oj-inputdatetime",
_INPUT_HELPER_KEY:"inputHelpBoth",options:{converter:a.qa.rm(a.Zj.CONVERTER_TYPE_DATETIME).createConverter({day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",hour12:!0,minute:"2-digit"}),timePicker:{timeIncrement:"00:30:00:00"}},Xz:function(){this._super();this.mu=this.element;this.NC=this.qD=this.tg=null},_ComponentCreate:function(){var b=this._super(),d=this.lX(this.Tc());if(null===d)throw Error("Please use ojInputDate if you do not have time portion");if(this.ge){var c=f("\x3cinput type\x3d'text'\x3e");
c.insertAfter(this.element);this.mu=c}for(var c=["title","placeholder","disabled","required","readOnly"],e={},g=0,h=c.length;g<h;g++)e[c[g]]=this.options[c[g]];this.tg=this.mu.ojInputTime(f.extend(e,{converter:d,displayOptions:{converterHint:"none",title:"none",messages:this.options.displayOptions.messages},value:a.sb.dateToLocalIso(this.JB()),timePicker:this.options.timePicker,datePickerComp:{widget:this,inline:this.ge}}));return b},_setOption:function(b,a,d){var c=this._superApply(arguments);"value"===
b&&(this.NC=a);this.tg&&(b in{disabled:!0,readOnly:!0}?this.tg.ojInputTime("option",b,a):"timePicker"===b?this.tg.ojInputTime("option","timePicker.timeIncrement",a.timeIncrement):"converter"===b&&(this.qD=null,this.tg.ojInputTime("option",b,this.lX(this.Tc()))));return c},_destroy:function(){var b=this._super();this.tg.ojInputTime("destroy");this.ge&&this.mu.remove();return b},lX:function(b){if(null!==this.qD)return this.qD;b=b.resolvedOptions();var d={},c="hour hour12 minute second millisecond timeFormat".split(" "),
e,g;e=0;for(g=c.length;e<g;e++)c[e]in b&&("timeFormat"===c[e]&&(d.formatType="time"),d[c[e]]=b[c[e]]);if(f.isEmptyObject(d))throw Error("Plase use ojInputDateTime's converter is lacking the time portion");return this.qD=b=a.qa.rm(a.Zj.CONVERTER_TYPE_DATETIME).createConverter(d)},ara:function(b,a){this.qi(this.Tc().format(b));this.gc(b,a)},N3:function(){if(this.isValid())return this.options.value;if(this.NC)try{return this.Tc().parse(this.NC)}catch(b){return this.options.value}else return null},gc:function(b,
a,d){this._superApply(arguments);this.NC=b},JC:function(b){var a=f.ui.keyCode,d=!1;switch(b.keyCode){case a.UP:case a.DOWN:b.shiftKey&&(this.gc(this.kg(),b),this.tg.ojInputTime("show"),d=!0)}return d?(b.preventDefault(),b.stopPropagation(),!1):this._superApply(arguments)},show:function(){this.tg.ojInputTime("hide");return this._super()},showTimePicker:function(){this.hide();return this.tg.ojInputTime("show")},hideTimePicker:function(){return this.tg.ojInputTime("hide")},refresh:function(){var b=this._superApply(arguments)||
this;this.tg.ojInputTime("refresh");return b},getNodeBySubId:function(b){var a=b&&b.subId,d=null;a&&("oj-listbox-drop"===a||"oj-inputdatetime-time-icon"===a?d=this.tg.ojInputTime("getNodeBySubId",b):"oj-inputdatetime-date-input"===a&&(d=this.ge?this.mu[0]:this.element[0]));return d||this._superApply(arguments)},getSubIdByNode:function(b){var a=null;this.ge?b===this.mu[0]&&(a="oj-inputdatetime-date-input"):b===this.element[0]&&(a="oj-inputdatetime-date-input");return a||this.tg.ojInputTime("getSubIdByNode",
b)||this._superApply(arguments)},Tc:function(){return this.options.converter?this._superApply(arguments):f.oj.ojInputDateTime.prototype.options.converter},oi:function(){this._superApply(arguments);this.tg&&this.hideTimePicker()},zl:function(){this._superApply(arguments);this.tg&&this.hideTimePicker()},_GetMessagingLauncherElement:function(){return this.ge?this.mu:this._super()},_GetDefaultStyleClass:function(){return"oj-inputdatetime"},Tz:function(){return"oj-ojInputDate"}})});