/**
 * @license
 * Copyright (c) 2014, 2024, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define(["touchr","ojdnd","ojs/ojeditablevalue","ojs/ojinputnumber","ojs/ojmenu","ojs/ojpopup","ojs/ojdialog","ojs/ojbutton","ojs/ojdatasource-common","ojs/ojdataprovideradapter","ojs/ojlistdataproviderview","ojs/ojselector","ojs/ojcore-base","jquery","ojs/ojdomutils","ojs/ojlogger","ojs/ojcontext","ojs/ojconfig","ojs/ojtranslation","ojs/ojthemeutils","ojs/ojcomponentcore","ojs/ojdatacollection-common","ojs/ojanimation","ojs/ojdomscroller","ojs/ojcustomelement-utils","@oracle/oraclejet-preact/hooks/UNSAFE_useFormVariantContext","ojs/ojkeyset","ojs/ojvalidator-regexp","ojs/ojkeyboardfocus-utils"],function(e,t,i,o,l,n,s,a,r,_,h,d,u,c,S,E,C,T,p,g,f,A,b,m,L,R,y,O,v){"use strict";var D;h=h&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h,u=u&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u,c=c&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c,C=C&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C,m=m&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m,O=O&&Object.prototype.hasOwnProperty.call(O,"default")?O.default:O,(D={properties:{accessibility:{type:"object",properties:{rowHeader:{type:"string|Array<string>"}}},addRowDisplay:{type:"string",enumValues:["hidden","top"],value:"top"},as:{type:"string",value:""},columns:{type:"Array<Object>",writeback:!0},columnsDefault:{type:"object",properties:{className:{type:"string"},field:{type:"string"},footerClassName:{type:"string"},footerRenderer:{type:"function"},footerStyle:{type:"string"},footerTemplate:{type:"string"},headerClassName:{type:"string"},headerRenderer:{type:"function"},headerStyle:{type:"string"},headerTemplate:{type:"string"},headerText:{type:"string"},maxWidth:{type:"string|number"},minWidth:{type:"string|number",value:"auto"},renderer:{type:"function"},resizable:{type:"string",enumValues:["disabled","enabled"],value:"disabled"},showRequired:{type:"boolean",value:!1},sortProperty:{type:"string"},sortable:{type:"string",enumValues:["auto","disabled","enabled"],value:"auto"},style:{type:"string"},template:{type:"string"},weight:{type:"number",value:1},width:{type:"string|number"}}},currentRow:{type:"object",writeback:!0},data:{type:"object",extension:{webelement:{exceptionStatus:[{type:"unsupported",since:"13.0.0",description:"Data sets from a DataProvider cannot be sent to WebDriverJS; use ViewModels or page variables instead."}]}}},display:{type:"string",enumValues:["grid","list"],value:"list"},dnd:{type:"object",properties:{drag:{type:"object",properties:{rows:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},drag:{type:"function"},dragEnd:{type:"function"},dragStart:{type:"function"}}}}},drop:{type:"object",properties:{columns:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragLeave:{type:"function"},dragOver:{type:"function"},drop:{type:"function"}}},rows:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragLeave:{type:"function"},dragOver:{type:"function"},drop:{type:"function"}}}}},reorder:{type:"object",properties:{columns:{type:"string",enumValues:["disabled","enabled"],value:"disabled"}}}}},editMode:{type:"string",enumValues:["none","rowEdit"],value:"none"},editRow:{type:"object",writeback:!0,value:{rowKey:null,rowIndex:-1}},firstSelectedRow:{type:"object",writeback:!0,readOnly:!0,value:{key:null,data:null},properties:{data:{type:"any"},key:{type:"any"}}},horizontalGridVisible:{type:"string",enumValues:["auto","disabled","enabled"],value:"auto"},layout:{type:"string",enumValues:["contents","fixed"],value:"contents"},row:{type:"object",properties:{editable:{type:"function"},selectable:{type:"function"},sticky:{type:"function"}}},rowRenderer:{type:"function"},scrollPolicy:{type:"string",enumValues:["auto","loadAll","loadMoreOnScroll"],value:"auto"},scrollPolicyOptions:{type:"object",properties:{fetchSize:{type:"number",value:25},maxCount:{type:"number",value:500},scroller:{type:"string"},scrollerOffsetBottom:{type:"number"},scrollerOffsetEnd:{type:"number"},scrollerOffsetStart:{type:"number"},scrollerOffsetTop:{type:"number"}}},scrollPosition:{type:"object",writeback:!0,value:{x:0,y:0},properties:{columnIndex:{type:"number"},columnKey:{type:"string"},offsetX:{type:"number"},offsetY:{type:"number"},rowIndex:{type:"number"},rowKey:{type:"any"},x:{type:"number"},y:{type:"number"}}},scrollToKey:{type:"string",enumValues:["always","auto","capability","never"],value:"auto"},selectAllControl:{type:"string",enumValues:["hidden","visible"],value:"visible"},selected:{type:"object",writeback:!0,properties:{column:{type:"KeySet",writeback:!0},row:{type:"KeySet",writeback:!0}}},selection:{type:"Array<Object>",writeback:!0,value:[]},selectionMode:{type:"Object<string, string>",properties:{column:{type:"string",enumValues:["multiple","none","single"]},row:{type:"string",enumValues:["multiple","none","single"]}}},selectionRequired:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{accessibleAddRow:{type:"string"},accessibleColumnContext:{type:"string"},accessibleColumnFooterContext:{type:"string"},accessibleColumnHeaderContext:{type:"string"},accessibleColumnsSpan:{type:"string"},accessibleContainsControls:{type:"string"},accessibleRowContext:{type:"string"},accessibleSortAscending:{type:"string"},accessibleSortDescending:{type:"string"},accessibleSortable:{type:"string"},accessibleStateSelected:{type:"string"},accessibleStateUnselected:{type:"string"},accessibleSummaryEstimate:{type:"string"},accessibleSummaryExact:{type:"string"},editableSummary:{type:"string"},labelAccSelectionAffordanceBottom:{type:"string"},labelAccSelectionAffordanceTop:{type:"string"},labelColumnWidth:{type:"string"},labelDisableNonContiguousSelection:{type:"string"},labelEditRow:{type:"string"},labelEnableNonContiguousSelection:{type:"string"},labelResize:{type:"string"},labelResizeColumn:{type:"string"},labelResizeColumnDialog:{type:"string"},labelResizeDialogApply:{type:"string"},labelResizePopupCancel:{type:"string"},labelResizePopupSpinner:{type:"string"},labelResizePopupSubmit:{type:"string"},labelSelectAllRows:{type:"string"},labelSelectAndEditRow:{type:"string"},labelSelectColum:{type:"string"},labelSelectRow:{type:"string"},labelSort:{type:"string"},labelSortAsc:{type:"string"},labelSortDsc:{type:"string"},msgColumnResizeWidthValidation:{type:"string"},msgFetchingData:{type:"string"},msgInitializing:{type:"string"},msgNoData:{type:"string"},msgScrollPolicyMaxCountDetail:{type:"string"},msgScrollPolicyMaxCountSummary:{type:"string"},msgStatusSortAscending:{type:"string"},msgStatusSortDescending:{type:"string"},tooltipRequired:{type:"string"}}},verticalGridVisible:{type:"string",enumValues:["auto","disabled","enabled"],value:"auto"}},methods:{getContextByNode:{},getDataForVisibleRow:{},getProperty:{},refresh:{},refreshRow:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateEnd:{},ojAnimateStart:{},ojBeforeCurrentRow:{},ojBeforeRowAddEnd:{},ojBeforeRowEdit:{},ojBeforeRowEditEnd:{},ojRowAction:{},ojSort:{}},extension:{}}).extension._WIDGET_NAME="ojTable",D.extension._INNER_ELEM="table",u.CustomElementBridge.register("oj-table",{metadata:u.CollectionUtils.mergeDeep(D,{properties:{userAssistanceDensity:{binding:{provide:[{name:"containerUserAssistanceDensity",default:"compact"},{name:"userAssistanceDensity",default:"compact"}]}}}})});const I=function(){};I._BUNDLE_KEY={_MSG_FETCHING_DATA:"msgFetchingData",_MSG_NO_DATA:"msgNoData",_MSG_INITIALIZING:"msgInitializing",_MSG_STATUS_SORT_ASC:"msgStatusSortAscending",_MSG_STATUS_SORT_DSC:"msgStatusSortDescending",_LABEL_SELECT_COLUMN:"labelSelectColumn",_LABEL_SELECT_ALL_ROWS:"labelSelectAllRows",_LABEL_SELECT_ROW:"labelSelectRow",_LABEL_EDIT_ROW:"labelEditRow",_LABEL_SELECT_AND_EDIT_ROW:"labelSelectAndEditRow"},I._LOGGER_MSG={_ERR_PRECURRENTROW_ERROR_SUMMARY:"Did not change current row due to error.",_ERR_PRECURRENTROW_ERROR_DETAIL:"Error detail: {error}.",_ERR_CURRENTROW_UNAVAILABLE_INDEX_SUMMARY:"Did not change current row due to unavailable row index.",_ERR_CURRENTROW_UNAVAILABLE_INDEX_DETAIL:"Unavailable row index: {rowIdx}.",_ERR_REFRESHROW_INVALID_INDEX_SUMMARY:"Invalid row index value.",_ERR_REFRESHROW_INVALID_INDEX_DETAIL:"Row index: {rowIdx}.",_ERR_DATA_INVALID_TYPE_SUMMARY:"Invalid data type.",_ERR_DATA_INVALID_TYPE_DETAIL:"Please specify the appropriate data type.",_ERR_ELEMENT_INVALID_TYPE_SUMMARY:"Invalid element type.",_ERR_ELEMENT_INVALID_TYPE_DETAIL:"Only a <table> element can be specified for ojTable."},I._UPDATE={_ADD_ROW_DISPLAY:"addRowDisplay",_ATTACHED:"attached",_DATA_REFRESH:"dataRefresh",_DATA_SORT:"dataSort",_RESIZE:"resize",_REFRESH:"refresh",_COL_REORDER:"colReorder",_COL_RESIZE:"colResize",_ROW_REFRESH:"rowRefresh",_ROWS_ADDED:"rowsAdded",_ROWS_REMOVED:"rowsRemoved",_SHOWN:"shown"},I._SUB_ID={_TABLE_CELL:"oj-table-cell",_TABLE_HEADER:"oj-table-header",_TABLE_FOOTER:"oj-table-footer",_TABLE_SORT_ASCENDING:"oj-table-sort-ascending",_TABLE_SORT_DESCENDING:"oj-table-sort-descending"},I._POSITION={_START_TOP:"start top",_START_BOTTOM:"start bottom"},I._FIELD_ID="id",I._CONST_ATTRIBUTE="attribute",I._CONST_DATA="data",I._CONST_METADATA="metadata",I._CONST_INDEXES="indexes",I._CONST_INDEX="index",I._CONST_KEY="key",I._CONST_KEYS="keys",I._CONST_AFTERKEYS="afterKeys",I._CONST_ADDBEFOREKEYS="addBeforeKeys",I._CONST_CLIENTID="clientId",I._CONST_SIGNAL="signal",I._CONST_STARTINDEX="startIndex",I._CONST_ENDINDEX="endIndex",I._CONST_PAGESIZE="size",I._CONST_OFFSET="offset",I._CONST_SILENT="silent",I._CONST_COLUMN="column",I._CONST_ROW="row",I._CONST_VALUE="value",I._CONST_SORTCRITERIA="sortCriteria",I._CONST_ON="on",I._CONST_OFF="off",I._COLUMN_HEADER_ID="_headerColumn",I._COLUMN_HEADER_TEXT_ID="_headerColumnText",I._COLUMN_HEADER_ASC_ID="_headerColumnAsc",I._COLUMN_HEADER_DSC_ID="_headerColumnDsc",I._COLUMN_HEADER_ID_PREFIX="_hdrCol",I._COLUMN_HEADER_ROW_SELECT_ID="_hdrColRowSel",I._FOCUS_CALLED="_focusedCalled",I._ROW_TEMPLATE="rowTemplate",I._CELL_TEMPLATE="template",I._HEADER_TEMPLATE="headerTemplate",I._FOOTER_TEMPLATE="footerTemplate",I._OPTION_AUTO="auto",I._OPTION_ENABLED="enabled",I._OPTION_DISABLED="disabled",I._OPTION_DISPLAY={_LIST:"list",_GRID:"grid"},I._OPTION_EDIT_MODE={_NONE:"none",_ROW_EDIT:"rowEdit"},I._OPTION_FROZEN_EDGE={_END:"end",_START:"start"},I._OPTION_SELECTION_MODES={_SINGLE:"single",_MULTIPLE:"multiple",_NONE:"none"},I._OPTION_SCROLL_POLICY={_AUTO:"auto",_LOADMORE_ON_SCROLL:"loadMoreOnScroll",_LOAD_ALL:"loadAll"},I._COLUMN_SORT_ORDER={_ASCENDING:"ascending",_DESCENDING:"descending"},I._DND_REORDER_TABLE_ID_DATA_KEY="oj-table-dnd-reorder-table-id",I._CURRENT_ROW_STATUS={_UPDATED:"updated",_IGNORED:"ignored",_VETOED:"vetoed",_ERROR:"error"},I._ROW_ITEM_EXPANDO="oj-table-oj-row-item",I._DATA_OJ_COMMAND="data-oj-command",I._DATA_OJ_EDITABLE="data-oj-editable",I._DATA_OJ_SELECTABLE="data-oj-selectable",I._DATA_OJ_COLUMNIDX="data-oj-columnIdx",I._VALIDATOR_PATTERN="^[1-9][0-9]*$",I._DATA_OJ_BINDING_PROVIDER="data-oj-binding-provider",I._BATCH_PROCESS_SIZE_WHEN_IDLE=5,I.RESIZE_OFFSET=10,I.SIZING_ERROR_MARGIN=.05,I.CONTENT_FLICKER_TIMEOUT=20,I._SELECTOR_OFF_COLSPAN_OFFSET=1,I._CSS_Vars={enableSticky:"--oj-private-table-global-sticky-default",enableSelector:"--oj-private-table-global-enable-selector-default",showIndicatorDelay:"--oj-private-core-global-loading-indicator-delay-duration",loadIndicator:"--oj-private-table-global-load-indicator-default",horizontalGridVisible:"--oj-private-table-global-display-list-horizontal-grid-visible-default",addAnimation:"--oj-private-table-global-add-animation",removeAnimation:"--oj-private-table-global-remove-animation",updateAnimation:"--oj-private-table-global-update-animation"},I.prototype._isStickyLayoutEnabled=function(){return"true"===this._getDefaultOptions().enableSticky},I.prototype._isStickyRowsEnabled=function(){return!(!this._isStickyLayoutEnabled()||null==this.options.row)&&"function"==typeof this.options.row.sticky},I.prototype._isFixedLayoutEnabled=function(){return"fixed"===this.options.layout},I.prototype._isTableStretchEnabled=function(){return this._getTableContainer().classList.contains(I.CSS_CLASSES._TABLE_STRETCH_CLASS)},I.prototype._isExternalScrollEnabled=function(){if(this._isStickyLayoutEnabled()){var e=this.options.scrollPolicyOptions;if(null!=e)return null!=e.scroller}return!1},I.prototype._invokeRowSelectableCallback=function(e){return this._invokeActionCallback(e,"selectable",I._CONST_ON)},I.prototype._invokeRowEditableCallback=function(e){return this._invokeActionCallback(e,"editable",I._CONST_ON)},I.prototype._invokeRowStickyCallback=function(e){return this._invokeActionCallback(e,"sticky",I._CONST_OFF)},I.prototype._invokeActionCallback=function(e,t,i){const o=this.options.row[t];return"function"==typeof o?o(e):i},I.prototype._isNodeEditable=function(e){return this._isNodeType(e,/^INPUT|TEXTAREA/)},I.prototype._isNodeClickable=function(e){return this._isNodeType(e,/SELECT|OPTION|BUTTON|^A\b/)},I.prototype._isNodeDraggable=function(e){return null!=this._getFirstAncestor(e,"[draggable='true']",!0)},I.prototype._isNodeType=function(e,t){for(var i=this._getTable();null!=e&&e!==i;){var o=e.nodeName;if(o===I.DOM_ELEMENT._TD||o===I.DOM_ELEMENT._TH)break;if(3!==e.nodeType)if(o.match(t))if(-1!==e.getAttribute(I.DOM_ATTR._TABINDEX))return!0;e=e.parentNode}return!1},I.prototype._setDataWaitingState=function(e){!1!==e&&(this._isExternalScrollEnabled()||this._clearScrollBuffer(),this._showStatusMessage(),this._hideNoDataMessage()),this._dataFetching=!0,this._dataResolveFunc||(this._dataResolveFunc=this._addComponentBusyState("is waiting for data."))},I.prototype._checkViewportRejected=function(){this._animateOnFetch=!1,this._clearDataWaitingState()},I.prototype._clearDataWaitingState=function(e){this._pendingFetchStale?(this._pendingFetchStale=!1,this._queueTask(function(){return this._getLayoutManager().notifyTableUpdate(I._UPDATE._DATA_REFRESH),this._beforeDataRefresh(),this._invokeDataFetchRows(this._pendingFetchOptions)}.bind(this))):(e||this._hideStatusMessage(),this._dataFetching=!1,this._pendingFetchStale=!1,this._pendingFetchOptions=null,this._dataResolveFunc&&(this._dataResolveFunc(),this._dataResolveFunc=null))},I.prototype._setComponentNotReady=function(){this._readyResolveFunc||(this._readyResolveFunc=this._addComponentBusyState("is being loaded."))},I.prototype._setComponentReady=function(){this._readyResolveFunc&&(this._readyResolveFunc(),this._readyResolveFunc=null)},I.prototype._addComponentBusyState=function(e){var t=C.getContext(this.element[0]).getBusyContext(),i={description:"The component identified by '"+this._getTableId()+"' "+e};return t.addBusyState(i)},I.prototype._createComponentBusyState=function(e){var t=this._addComponentBusyState(e);return null==this._busyStateStack&&(this._busyStateStack=[]),this._busyStateStack.push(t),t},I.prototype._clearComponentBusyState=function(e){if(this._busyStateStack){var t=this._busyStateStack.indexOf(e);-1!==t&&(e(),this._busyStateStack.splice(t,1))}},I.prototype._clearBusyStateStack=function(){if(this._busyStateStack){for(var e=0;e<this._busyStateStack.length;e++)this._busyStateStack[e]();this._busyStateStack=null}},I.prototype._setFocusoutBusyState=function(){this._focusoutResolveFunc||(this._focusoutResolveFunc=this._addComponentBusyState("is handling focusout."))},I.prototype._clearFocusoutBusyState=function(){this._focusoutResolveFunc&&(this._focusoutResolveFunc(),this._focusoutResolveFunc=null)},I.prototype._setIdleRenderBusyState=function(){this._idleRenderResolveFunc||(this._idleRenderResolveFunc=this._addComponentBusyState("is waiting for idle rendering."))},I.prototype._clearIdleRenderBusyState=function(){this._idleRenderResolveFunc&&(this._idleRenderResolveFunc(),this._idleRenderResolveFunc=null)},I.prototype._setScrollPosBusyState=function(){this._scrollPosResolveFunc||(this._scrollPosResolveFunc=this._addComponentBusyState("is handling scroll position."))},I.prototype._clearScrollPosBusyState=function(){this._scrollPosResolveFunc&&(this._scrollPosResolveFunc(),this._scrollPosResolveFunc=null)},I.prototype._clearAllComponentBusyStates=function(){this._clearBusyStateStack(),this._pendingFetchStale=!1,this._clearDataWaitingState(),this._clearFocusoutBusyState(),this._clearIdleRenderBusyState(),this._clearScrollPosBusyState(),this._setComponentReady()},I.prototype._cleanComponent=function(e){this._animateOnFetch=null,this._isEditPending=null,this._skipScrollOnFocus=null,this._active=null,this._isTableTab=null,this._dataFetching=null,this._controller=null,this._isAddRowRendered=!1,this._isRowRemovalRequired=null,this._renderedTableHeaderColumns=!1,this._currentPointerTarget=null,this._previousPointerTarget=null,this._clearAllComponentTimeouts(),this._clearAllComponentBusyStates(),this._clearOpenPopupListeners(),this._clearIdleCallback(),this._unregisterDomScroller(),this._clearLayoutManager(),this._cleanAccStatus(),e?(c(this._getTableBody()).removeAttr(f._OJ_CONTAINER_ATTR),c(this._getTableBody()).removeAttr(C._OJ_CONTEXT_ATTRIBUTE),this.element.children().remove("."+I.CSS_CLASSES._TABLE_HEADER_CLASS),this.element.children().remove("."+I.CSS_CLASSES._TABLE_BODY_CLASS),this.element.children().remove("."+I.CSS_CLASSES._TABLE_FOOTER_CLASS),this.element.children().remove("."+I.CSS_CLASSES._TABLE_STATUS_MESSAGE_CLASS),this.element.children().remove("."+I.CSS_CLASSES._TABLE_BODY_MESSAGE_ROW_CLASS),S.unwrap(this.element,c(this._getTableContainer())),this.element[0].classList.remove(I.CSS_CLASSES._TABLE_CLASS),this._data instanceof u.TableDataSourceAdapter&&this._data.destroy(),this._componentDestroyed=!0):(this._unregisterDataSourceEventListeners(),this._unregisterResizeListener()),(this._hasHeaderTemplate||this._hasCellTemplate||this._hasFooterTemplate||this._hasRowTemplate||this._hasAddRowTemplate||this._hasNoDataTemplate)&&this._cleanTemplateNodes(this.element[0])},I.prototype._clearAllComponentTimeouts=function(){this._clearFocusoutTimeout(),this._clearShowStatusTimeout(),this._clearTableBodyHideTimeout(),this._clearTableFooterHideTimeout(),this._clearNotifyAttachedTimeout(),this._clearBrowserAutoScrollTimeout()},I.prototype._clearFocusoutTimeout=function(){this._focusoutTimeout&&(clearTimeout(this._focusoutTimeout),this._focusoutTimeout=null)},I.prototype._clearShowStatusTimeout=function(){this._showStatusTimeout&&(clearTimeout(this._showStatusTimeout),this._showStatusTimeout=null)},I.prototype._initializeTableBodyHide=function(e){this._clearTableBodyHideTimeout(),this._bodyVisibilityTimeout=setTimeout(function(){e.style[I.CSS_PROP._VISIBILITY]=I.CSS_VAL._HIDDEN,this._bodyVisibilityTimeout=null}.bind(this),I.CONTENT_FLICKER_TIMEOUT)},I.prototype._clearTableBodyHideTimeout=function(){null!=this._bodyVisibilityTimeout&&(clearTimeout(this._bodyVisibilityTimeout),this._bodyVisibilityTimeout=null)},I.prototype._initializeTableFooterHide=function(e){this._clearTableFooterHideTimeout(),this._footerVisibilityTimeout=setTimeout(function(){e.style[I.CSS_PROP._VISIBILITY]=I.CSS_VAL._HIDDEN,this._footerVisibilityTimeout=null}.bind(this),I.CONTENT_FLICKER_TIMEOUT)},I.prototype._clearTableFooterHideTimeout=function(){null!=this._footerVisibilityTimeout&&(clearTimeout(this._footerVisibilityTimeout),this._footerVisibilityTimeout=null)},I.prototype._clearBrowserAutoScrollTimeout=function(){null!=this._browserAutoScrollTimeout&&(clearTimeout(this._browserAutoScrollTimeout),this._browserAutoScrollTimeout=null,this._browserAutoScrollInitPos=null)},I.prototype._setFinalTask=function(e){this._finalTask=e?e.bind(this):void 0},I.prototype._hasPendingTasks=function(){return this._taskCount>0},I.prototype._hasAdditionalPendingTasks=function(){return this._taskCount>1},I.prototype._queueTask=function(e){return this._pendingTasks||(this._taskCount=0,this._pendingTasks=Promise.resolve(),this._setComponentNotReady()),this._taskCount+=1,this._pendingTasks=this._pendingTasks.then(function(){if(!this._componentDestroyed)return e.bind(this)()}.bind(this)).then(function(e){if(this._taskCount-=1,0===this._taskCount){this._pendingTasks=null;try{this._componentDestroyed||(this._finalTask&&this._finalTask(),this._trigger("ready"))}catch(e){E.error(e)}this._setComponentReady()}return e}.bind(this),function(e){return this._taskCount-=1,0===this._taskCount&&(this._pendingTasks=null,E.error(e),this._setComponentReady()),Promise.reject(e)}.bind(this)),this._pendingTasks},I.prototype._draw=function(){if(this._setFinalTask(function(){this._syncTableSizing(),this._initialSelectionStateValidated?this._syncSelectionState():this._validateInitialSelectionState(),this._resetAriaLabel&&this._updateAccStatusInfo(),this._resetAriaLabel=!1}.bind(this)),!this.element.is("table")){var e=I._LOGGER_MSG._ERR_ELEMENT_INVALID_TYPE_SUMMARY,t=I._LOGGER_MSG._ERR_ELEMENT_INVALID_TYPE_DETAIL;throw new RangeError(e+"\n"+t)}this.element[0].classList.add(I.CSS_CLASSES._TABLE_ELEMENT_CLASS),this.element[0].setAttribute(I.DOM_ATTR._ROLE,"application"),this._createInitialTable(this._isTableHeaderless(),this._isTableFooterless()),this._styleInitialTable(),this._queueTask(function(){this._getLayoutManager().notifyTableUpdate(I._UPDATE._REFRESH),this._processSlottedChildren()}.bind(this)),this.options.disabled&&this.disable()},I.prototype._refresh=function(){this._dataFetching&&this._controller&&this._controller.abort();var e=!1;this._active=null,this._pendingFetchOptions=null,this._dataOption!==this.options[I._CONST_DATA]&&(this._clearCachedDataMetadata(),null==this._data&&(e=!0));var t=this._GetContextMenu();return null!=t&&t!==this._getContextMenuElement()&&this._createContextMenuContainer(),this._isAddRowRendered=!1,this._clearLayoutManager(),this._clearCachedDom(),this._clearCachedStyling(),this._refreshContextMenu(),this._statusMessageShown&&this._isSkeletonSupport()||this._refreshTableStatusMessage(),this._clearIdleCallback(),this._hasEditableRow()&&this._setTableEditable(!1,!0),e?this._initFetch():this._queueTask(function(){return this._getLayoutManager().notifyTableUpdate(I._UPDATE._REFRESH),this._invokeDataFetchRows()}.bind(this))},I.prototype._refreshAll=function(e,t){var i=[];if((this._isColumnMetadataUpdated()||!this._isTableHeaderColumnsRendered())&&(this._clearCachedMetadata(),i.push(this._refreshTableHeader()),null!=this._sortColumn)){for(var o=!1,l=this._getColumnDefs(),n=l.length,s=0;s<n;s++){var a=l[s];if(u.Object.compareValues(a,this._sortColumn)){o=!0;break}}o||this._initFetch(null,!0)}return i.push(this._refreshTableFooter()),i.push(this._refreshTableBody(e,t)),Promise.all(i)},I.prototype._refreshTableHeader=function(){try{var e,t=this,i=this._getColumnDefs(),o=i.length,l=this._getTableColGroup();if(null!=l){var n=this._getTableBody();null!=n&&(n.style[I.CSS_PROP._VISIBILITY]=I.CSS_VAL._HIDDEN);var s=this._getTableFooter();if(null!=s&&(s.style[I.CSS_PROP._VISIBILITY]=I.CSS_VAL._HIDDEN),c(l).empty(),this._isGutterStartColumnEnabled()){let e=this._createTableGutterCol();l.appendChild(e)}if(this._isDefaultSelectorEnabled()){var a=this._createTableSelectorCol();l.appendChild(a)}for(e=0;e<o;e++){var r=this._createTableCol();l.appendChild(r)}if(this._isGutterEndColumnEnabled()){let e=this._createTableGutterCol();l.appendChild(e)}}var _=this._getTableBodyLegacyWidthBuffer();if(null!=_)for(c(_).empty(),e=0;e<o;e++){var h=this._createTableBodyCell();h.classList.add(I.CSS_CLASSES._TABLE_LEGACY_WIDTH_BUFFER_CELL_CLASS),_.appendChild(h)}var d=this._getTableHeader();if(!d){if(this._isTableHeaderless())return Promise.resolve();d=this._createTableHeader(),this._styleTableHeader(d)}var u=this._getTableHeaderRow();for(this._unregisterChildStateListeners(u),this._hasHeaderTemplate&&(this._cleanTemplateNodes(u),this._hasHeaderTemplate=!1),c(u).empty(),e=0;e<o;e++){var S=null,E=i[e],C=this._getColumnRenderer(e,"header");if(C){S=this._createTableHeaderColumn(e);var T=this._getRendererContextObject(S,{}),p={headerContext:T,columnIndex:e,data:E.headerText,componentElement:T.componentElement,parentElement:T.parentElement};E.sortable===I._OPTION_ENABLED?p.columnHeaderSortableIconRenderer=function(e,i){t._columnHeaderSortableIconRenderer(this,i)}:p.columnHeaderDefaultRenderer=function(e,i){t._columnHeaderDefaultRenderer(this,i)};var g=C(p);null!=g&&c(S).empty(),A.applyRendererContent(S,g)||(S=c(u).children()[e],this._setTableHeaderColumnAttributes(e,S),this._styleTableHeaderColumn(e,S,!1)),S.classList.add(I.CSS_CLASSES._COLUMN_CUSTOM_HEADER_CLASS)}else{var f=this._getSlotTemplate(E[I._HEADER_TEMPLATE]);if(null==f&&this._isDefaultHeaderTemplateSlotValid()&&(f=this._getSlotTemplate("headerTemplate")),f){var b=this._getRootElement(),m=this._getTemplateEngine();if(null!=m){(S=this._createTableHeaderColumn(e,!0)).classList.add(I.CSS_CLASSES._COLUMN_CUSTOM_HEADER_CLASS);var L=this._getHeaderSlotTemplateContextObject(E.headerText,e),y=m.execute(b,f,L,this.options.as,S,new Map([[R.FormVariantContext,"embedded"]]));y instanceof Array||(y=[y]),y.map(function(e){S.appendChild(e)}),this._hasHeaderTemplate=!0}}}S||this._createTableHeaderColumn(e)}if(this._isGutterEndColumnEnabled()){let e=this._createTableGutterCell("header","end");u.appendChild(e)}if(this._isDefaultSelectorEnabled()){var O=this._createTableHeaderSelectorColumn();u.insertBefore(O,u.firstChild)}if(this._isGutterStartColumnEnabled()){let e=this._createTableGutterCell("header","start");u.insertBefore(e,u.firstChild)}return this._renderedTableHeaderColumns=!0,this._getLayoutManager().optimizeInitialColumnWidths(),this._finalizeNonBodyRowRendering([u])}catch(e){return Promise.reject(e)}},I.prototype._refreshTableFooter=function(){try{var e=this._getColumnDefs(),t=this._getTableFooter();if(!t){if(this._isTableFooterless())return Promise.resolve();t=this._createTableFooter(),this._styleTableFooter(t)}this._initializeTableFooterHide(t);var i=this._getTableFooterRow();if(this._hasFooterTemplate&&(this._cleanTemplateNodes(i),this._hasFooterTemplate=!1),c(i).empty(),e.length>0){for(var o=this._isDefaultFooterTemplateSlotValid(),l=e.length,n=0;n<l;n++){var s=e[n],a=this._getColumnRenderer(n,"footer"),r=this._createTableFooterCell();if(this._styleTableFooterCell(n,r),this._insertTableFooterCell(n,r),a){var _=this._getRendererContextObject(r,{}),h={footerContext:_,columnIndex:n,componentElement:_.componentElement,parentElement:_.parentElement};A.applyRendererContent(r,a(h))||(r=c(i).children()[n],this._setTableFooterColumnAttributes(n,r),this._styleTableFooterCell(n,r))}else{var d=this._getSlotTemplate(s[I._FOOTER_TEMPLATE]);if(null==d&&o&&(d=this._getSlotTemplate("footerTemplate")),d){var u=this._getRootElement(),S=this._getTemplateEngine();if(null!=S){var E=this._getFooterSlotTemplateContextObject(n),C=S.execute(u,d,E,this.options.as,r,new Map([[R.FormVariantContext,"embedded"]]));C instanceof Array||(C=[C]),C.map(function(e){r.appendChild(e)}),this._hasFooterTemplate=!0}}}}if(this._isGutterEndColumnEnabled()){let e=this._createTableGutterCell("footer","end");i.appendChild(e)}if(this._isDefaultSelectorEnabled()){var T=this._createTableFooterSelectorCell();i.insertBefore(T,i.firstChild)}if(this._isGutterStartColumnEnabled()){let e=this._createTableGutterCell("footer","start");i.insertBefore(e,i.firstChild)}}return this._finalizeNonBodyRowRendering([i])}catch(e){return Promise.reject(e)}},I.prototype._refreshTableBody=function(e,t,i){var o=this._getTableBody();if(null==o)return Promise.resolve();this._scrollLeft=void 0===this._scrollLeft?0:this._scrollLeft,this._scrollTop=void 0===this._scrollTop?0:this._scrollTop;var l=[];return l.push(this._refreshAddNewRowPlaceholder(!0)),l.push(this._finalizeTableBody(e,t,o,i)),Promise.all(l)},I.prototype._finalizeTableBody=function(e,t,i,o){var l,n,s=this._getRowIdxRowArray(e,t);if(0===s.length&&(0===t||0===this._getTableBodyRows().length))return n=this._clearTableBodyRowsFromIndex(t),this._showNoDataMessage(),n&&this._getTable().focus(),this._finalizeNonBodyRowRendering([i]);const a=document.createDocumentFragment();if(t>0&&this._isLoadMoreOnScroll()&&!this._isLastRowInViewport()&&!this._fetchBySyncScroll)return new Promise(function(o,l){this._setIdleRenderBusyState(),this._renderRowsWhenIdle(s.slice(0),i,a,[],t,o,l,e.isMouseWheel)}.bind(this));var r=[],_=s.length,h=[];for(l=0;l<_;l++)r.push(s[l].rowIdx),h.push(this._renderRow(s[l],a,t));var d=this._animateOnFetch&&this._IsCustomElement();return this._animateOnFetch=!1,Promise.all(h).then(function(e){return n=this._clearTableBodyRowsFromIndex(t),o||this._initializeTableBodyHide(i),this._getLayoutManager().handleAfterRowsProcessed(a),this._appendElementToTableBody(a,i),n&&this._getTable().focus(),d?this._animateVisibleRows(e,r,"add").then(function(){return this._afterRowsRendered(i)}.bind(this)):this._afterRowsRendered(i)}.bind(this),function(e){return Promise.reject(e)})},I.prototype._clearTableBodyRowsFromIndex=function(e){var t=this._getTableBody().contains(document.activeElement),i=!1;if(0===e)t&&(i=!0),this._removeAllTableBodyRows();else{var o=this._getTableBodyRows().length;if(o>0)for(var l=o-1;l>=e;l--){if(t){var n=this._getTableBodyRow(l);null!=n&&n.contains(document.activeElement)&&(i=!0,t=!1)}this._removeTableBodyRow(l)}}return this._clearCachedDomRowData(),this._hideNoDataMessage(),this._isRowRemovalRequired=!1,i},I.prototype._isDefaultSelectorEnabled=function(){return"true"===this._getDefaultOptions().enableSelector&&this._getRowSelectionMode()===I._OPTION_SELECTION_MODES._MULTIPLE},I.prototype._refreshTableBodyRow=function(e,t,i,o,l,n){try{var s=this._getRowRenderer();if((isNaN(e)||e<0)&&E.error("Error: Invalid rowIdx value: "+e),null==i){if(!(i=this._getTableBodyRow(e)))return Promise.resolve(null);(this._hasCellTemplate||this._hasRowTemplate)&&this._cleanTemplateNodes(i),c(i).empty()}var a=this._getCurrentRow();a=a||{};var r=this._getRendererContextObject(i,{row:t,isCurrentRow:a.rowIndex===e});r.editable=this._invokeRowEditableCallback(i[I._ROW_ITEM_EXPANDO]);const A=this._invokeRowSelectableCallback(i[I._ROW_ITEM_EXPANDO]);var _={rowContext:r,row:t[I._CONST_DATA],componentElement:r.componentElement,parentElement:r.parentElement,data:t[I._CONST_DATA]},h=!1,d=this._getTableBody();if(null!=s||this._isDefaultRowTemplateSlotValid()&&null!==this._getSlotTemplate("rowTemplate")){if(null!=s){var u=s(_);null!=u?i.appendChild(u):null==o?i=this._getRawTableBodyRow(e):(l=null==l?0:l,i=o.children?o.children[e-l]:c(o).children()[e-l])}else{var S=this._getSlotTemplate("rowTemplate"),C=this._getRootElement(),T=this._getTemplateEngine();if(null!=T){var p=this._getRowSlotTemplateContextObject(_),g=T.execute(C,S,p,this.options.as,d,new Map([[R.FormVariantContext,"embedded"]]));for(let e=0;e<g.length;e++){var f=g[e];if("TR"===f.tagName){i.parentNode.replaceChild(f,i),i=f,h=!1;break}i.appendChild(f),h=!0}this._hasRowTemplate=!0}}return i._ojReportBusy=d,this._waitForAllElementsToResolve([i]).then(function(){if(h){var o=i.children;for(let e=0;e<o.length;e++){var l=o[e];if("TR"===l.tagName){i.parentNode.replaceChild(l,i),(i=l)._ojReportBusy=d;break}}}this._setTableBodyRowAttributes(t,i),this._clearCachedDomRowData(),this._styleTableBodyRow(i,!1);var s,a=this._getTableElementsByTagName(i,I.DOM_ELEMENT._TD),_=a.length;for(let i=0;i<_;i++)s=a[i],this._setTableBodyCellAttributes(e,t[I._CONST_KEY],i,s),this._styleTableBodyCell(i,s,!1);if(null!=this._columnsDestMap)for(let e=0;e<this._columnsDestMap.length;e++){var u=a[this._columnsDestMap[e]];u.parentNode.appendChild(u)}return this._finalizeTableBodyCellsRefresh(i,t,e,r.editable,A,n)}.bind(this))}return this._setTableBodyRowAttributes(t,i),this._tableBodyRowDefaultRenderer(e,t,_),this._finalizeTableBodyCellsRefresh(i,t,e,r.editable,A,n)}catch(e){return Promise.reject(e)}},I.prototype._finalizeTableBodyCellsRefresh=function(e,t,i,o,l,n){var s=this._getColumnDefs();if(s.length>0){if(this._isDefaultSelectorEnabled()&&l!==I._CONST_OFF&&this._createTableBodyDefaultSelector(t.key,e),this._isGutterStartColumnEnabled()){let t=this._createTableGutterCell("body","start");e.insertBefore(t,e.firstChild)}if(this._isGutterEndColumnEnabled()){let t=this._createTableGutterCell("body","end");e.appendChild(t)}}return l===I._CONST_OFF&&s.length>0&&this._isDefaultSelectorEnabled()&&(this._getTableBodyCells(i,e)[0].colSpan+=I._SELECTOR_OFF_COLSPAN_OFFSET),this._getLayoutManager().handleRowRefresh(i,e,n),e[I._DATA_OJ_EDITABLE]=o,e[I._DATA_OJ_SELECTABLE]=l,Promise.resolve(e)},I.prototype._refreshAddNewRowPlaceholder=function(e){let t=this._getPlaceHolderRow();if(!this._isAddNewRowEnabled()){if(null!=t){if(this._hasActiveAddRow())if(this._isTableHeaderless())this._getTableBodyRows().length>0?this._setActiveRow(0,null,!0):this._setActiveNoData();else{var i=this._getFirstVisibleColumnIndex(0,!0);this._setActiveHeader(i)}this._cleanTemplateNodes(t),c(t).remove(),this._hasAddRowTemplate=!1,this._setTableActionableMode(!1)}return this._isAddRowRendered=!1,Promise.resolve(!1)}if(!this._isAddRowRendered){const i=this._getTemplateEngine(),_=this._getSlotTemplate("addRowTemplate"),h=this._getSlotTemplate("addRowCellTemplate");if(null!==i){let d,u=function(e){this._handleAddRow(e,null)}.bind(this);const S=this._getRootElement(),E=this._getTableBody();var o;null!=t&&(this._cleanTemplateNodes(t),c(t).empty()),null==t&&(t=this._createTableBodyRow()),E.insertBefore(t,E.firstChild);var l=!1;if(null!=_&&this._isDefaultAddRowTemplateSlotValid()){d=this._getRowSlotTemplateContextObject({},!0),d.submitAddRow=u;const o=i.execute(S,_,d,this.options.as,E);for(let e=0;e<o.length;e++){var n=o[e];if("TR"===n.tagName){t.parentNode.replaceChild(n,t),t=n,t._ojReportBusy=E,l=!1;break}t.appendChild(n),l=!0}return this._waitForAllElementsToResolve([t]).then(function(){if(l){var i=t.children;for(let e=0;e<i.length;e++){var o=i[e];if("TR"===o.tagName){t.parentNode.replaceChild(o,t),t=o,t._ojReportBusy=E;break}}}if(null!=this._columnsDestMap){var n=this._getPlaceHolderRowCells(t);for(let e=0;e<this._columnsDestMap.length;e++){var s=n[this._columnsDestMap[e]];s.parentNode.appendChild(s)}}return this._finalizePlaceHolderRowSetup(t,e)}.bind(this))}if(null!==h&&this._isDefaultAddRowCellTemplateSlotValid()){for(var s=this._getColumnDefs().length,a=0;a<s;a++){o=this._createTableBodyCell(),t.appendChild(o),d=this._getCellSlotTemplateContextObject({columnIndex:a},!0),d.submitAddRow=u;var r=i.execute(S,h,d,this.options.as,E);r instanceof Array||(r=[r]);for(let e=0;e<r.length;e++)o.appendChild(r[e])}return this._finalizePlaceHolderRowSetup(t,e)}}}return Promise.resolve(!1)},I.prototype._finalizePlaceHolderRowSetup=function(e,t){let i;e.classList.add(I.CSS_CLASSES._TABLE_ADD_ROW_PLACEHOLDER_CLASS);let o=this._getPlaceHolderRowCells(e);for(let e=0;e<o.length;e++)i=o[e],this._styleTableAddRowCell(e,i);if(this._isAddRowRendered=!0,this._hasAddRowTemplate=!0,this._isDefaultSelectorEnabled()&&(i=document.createElement(I.DOM_ELEMENT._TD),e.insertBefore(i,e.firstChild),i.classList.add(I.CSS_CLASSES._TABLE_FROZEN_START),this._isVerticalGridEnabled()&&i.classList.add(I.CSS_CLASSES._TABLE_VGRID_LINES_CLASS)),this._isGutterStartColumnEnabled()){let t=this._createTableGutterCell("body","start");e.insertBefore(t,e.firstChild)}if(this._isGutterEndColumnEnabled()){let t=this._createTableGutterCell("body","end");e.appendChild(t)}return t||this._getLayoutManager()._updateStickyRowTops(),this._finalizeNonBodyRowRendering([e])},I.prototype._finalizeBodyRowRendering=function(e){var t=this._getTableBody();return this._waitForAllElementsToResolve([t]).then(function(){var t=this._hasEditableRow()?this._getEditableRowKey():null,i=this._isTableActionableMode()&&this._active?this._active.key:null;return e.forEach(function(e){if(null!=e){var o=this._getRowKey(e);null!=t&&u.KeyUtils.equals(o,t)||null!=i&&u.KeyUtils.equals(o,i)||A.disableAllFocusableElements(e,null,!0)}}.bind(this)),Promise.resolve(!0)}.bind(this))},I.prototype._finalizeNonBodyRowRendering=function(e){return this._waitForAllElementsToResolve(e).then(function(){return e.forEach(function(e){A.disableAllFocusableElements(e,null,!0)}),Promise.resolve(!0)})},I.prototype._waitForAllElementsToResolve=function(e){var t=[];return e.forEach(function(e){e&&t.push(C.getContext(e).getBusyContext().whenReady())}),Promise.all(t)},I.prototype._refreshRow=function(e,t,i,o){var l=this._getData(),n=this._getTableBodyRow(e);if(!t){if(!l)return Promise.resolve(!1);if(!n){var s=I._LOGGER_MSG._ERR_REFRESHROW_INVALID_INDEX_SUMMARY,a=p.applyParameters(I._LOGGER_MSG._ERR_REFRESHROW_INVALID_INDEX_DETAIL,{rowIdx:e.toString()});throw new RangeError(s+"\n"+a)}}var r,_=this._getRowKeyForRowIdx(e);if(this._getLayoutManager().notifyTableUpdate(I._UPDATE._ROW_REFRESH),null!=o){var h=new Map;h.set(_,o),r=Promise.resolve({results:h})}else if(i){var d=new Map,u={data:n[I._ROW_ITEM_EXPANDO].data,metadata:n[I._ROW_ITEM_EXPANDO].metadata};d.set(_,u),r=Promise.resolve({results:d})}else r=l.fetchByKeys({keys:new Set([_])});return r.then(function(t){if(null==t||null==t.results||0===t.results.size)return Promise.resolve(!1);var i=n.contains(document.activeElement),o=t.results.get(_);return this._refreshTableBodyRow(e,{data:o.data,metadata:o.metadata,index:e,key:_},null,null,null,!0).then(function(e){return i&&this._getTable().focus(),null==e?Promise.resolve(!0):this._finalizeBodyRowRendering([e])}.bind(this))}.bind(this))},I.prototype._refreshTableStatusMessage=function(){var e=this._getTableStatusMessage();null!=e&&c(e).remove(),this._createTableStatusMessage()},I.prototype._showStatusMessage=function(){if(!this._showStatusTimeout&&!this._statusMessageShown){var e=this._getTableTempSkeletonRow();if(null!=e&&this._getTableBody().removeChild(e),this._isSkeletonSupport()){var t=this._getData();if(t instanceof u.TableDataSourceAdapter){var i=t._startIndex;if(null!=i&&i>0)return}this._isExternalScrollEnabled()&&this._bufferScrollerForLastRow(),this._isRowRemovalRequired=!0}this._showStatusTimeout=setTimeout(function(){var e=!1;this._isSkeletonSupport()&&this._isRowRemovalRequired&&(e=this._clearTableBodyRowsFromIndex(0)),this._refreshTableStatusPosition(!0),e&&this._getTable().focus(),this._showStatusTimeout=null}.bind(this),this._getShowStatusDelay())}},I.prototype._showProgressiveLoading=function(){var e=this._getTableBodyRows(),t=this._getTableTempSkeletonRow();if(null!=e&&e.length>0&&!t){(t=this._createTableBodyRow()).classList.add(I.CSS_CLASSES._TABLE_FETCH_SKELETON_ROW_CLASS);var i=this._createTableBodyCell(),o=this._getColumnDefs().length;this._isGutterStartColumnEnabled()&&(o+=1),this._isGutterEndColumnEnabled()&&(o+=1),i.colSpan=this._isDefaultSelectorEnabled()?o+1:o,i.classList.add(I.CSS_CLASSES._TABLE_SKELETON_CELL_CLASS);for(var l=0;l<3;l++)i.appendChild(this._createSkeletonRow());t.appendChild(i),this._appendElementToTableBody(t,this._getTableBody()),this._skeletonHWMSFadeInEndListener=function(){t.classList.remove(I.CSS_CLASSES._ANIMATION_SKELETON_FADE_IN_CLASS),t.querySelectorAll(".oj-table-skeleton").forEach(function(e){e.classList.add("oj-animation-skeleton")}),t.removeEventListener("animationend",this._skeletonHWMSFadeInEndListener)}.bind(this),t.addEventListener("animationend",this._skeletonHWMSFadeInEndListener),t.classList.add(I.CSS_CLASSES._ANIMATION_SKELETON_FADE_IN_CLASS)}},I.prototype._insertSkeletonRow=function(e,t){var i;if(this._isSkeletonSupport()&&null!=(i=null!=e?e:-1===t?this._getPlaceHolderRow():this._getTableBodyRow(t))){for(var o=i.children,l=0;l<o.length;l++)o[l].classList.add(I.CSS_CLASSES._TABLE_HIDDEN_CELL_CLASS);var n=this._createTableBodyCell(),s=this._getColumnDefs().length;this._isGutterStartColumnEnabled()&&(s+=1),this._isGutterEndColumnEnabled()&&(s+=1),n.colSpan=this._isDefaultSelectorEnabled()?s+1:s,n.classList.add(I.CSS_CLASSES._TABLE_SKELETON_CELL_CLASS),-1===t&&(n.style[I.CSS_PROP._TOP]=o[0].style.top);var a=this._createSkeletonRow();n.appendChild(a),i.insertBefore(n,i.firstChild),this._skeletonHWMSFadeInEndListener=function(){a.classList.remove(I.CSS_CLASSES._ANIMATION_SKELETON_FADE_IN_CLASS),a.querySelectorAll(".oj-table-skeleton").forEach(function(e){e.classList.add("oj-animation-skeleton")}),a.removeEventListener("animationend",this._skeletonHWMSFadeInEndListener)}.bind(this),a.addEventListener("animationend",this._skeletonHWMSFadeInEndListener),a.classList.add(I.CSS_CLASSES._ANIMATION_SKELETON_FADE_IN_CLASS)}},I.prototype._removeSkeletonRow=function(e,t){var i;if(this._isSkeletonSupport()&&null!=(i=null!=e?e:-1===t?this._getPlaceHolderRow():this._getTableBodyRow(t))){var o=i.children[0];if(null!=o&&o.classList.contains(I.CSS_CLASSES._TABLE_SKELETON_CELL_CLASS)){var l=o.children[0];null!=l&&(l.classList.remove(I.CSS_CLASSES._ANIMATION_SKELETON_FADE_IN_CLASS),l.removeEventListener("animationend",this._skeletonHWMSFadeInEndListener)),i.removeChild(o)}for(var n=i.children,s=0;s<n.length;s++)n[s].classList.remove(I.CSS_CLASSES._TABLE_HIDDEN_CELL_CLASS)}},I.prototype._hideStatusMessage=function(){this._clearShowStatusTimeout();var e=this._getTableTempSkeletonRow();if(this._statusMessageShown||e){var t=this._getTableStatusMessage();if(t.style[I.CSS_PROP._DISPLAY]=I.CSS_VAL._NONE,this._isSkeletonSupport())if(e)this._getTableBody().removeChild(e);else for(var i=t.childNodes,o=i.length;o>0;o--)t.removeChild(i[o-1]);this._statusMessageShown=!1}},I.prototype._isStatusMessageShown=function(){return this._statusMessageShown},I.prototype._getDefaultOptions=function(){if(null==this._defaultOptions){this._defaultOptions={};const e=Object.keys(I._CSS_Vars),t=e.map(e=>I._CSS_Vars[e]),i=g.getCachedCSSVarValues(t);e.forEach((e,t)=>{this._defaultOptions[e]=i[t]})}return this._defaultOptions},I.prototype._getShowStatusDelay=function(){return S.getCSSTimeUnitAsMillis(this._getDefaultOptions().showIndicatorDelay)},I.prototype._isSkeletonSupport=function(){return"skeleton"===this._getDefaultOptions().loadIndicator},I.prototype._showNoDataMessage=function(){if(!this._noDataMessageShown){var e=this._getTableBodyMessageRow(),t=this._getData(),i=this._getSlotTemplate("noData");if(this._isDefaultTemplateSlotValid("noData")&&null!==i){var o=this._getTable(),l=this._getTableBody();o.classList.add(I.CSS_CLASSES._TABLE_NO_DATA_CONTAINER_CLASS);var n=document.createElement(I.DOM_ELEMENT._TR);if(n.id=this.createSubId("noData"),n.classList.add(I.CSS_CLASSES._TABLE_NO_DATA_ROW_CLASS),this._appendElementToTableBody(n,l),this._isGutterStartColumnEnabled()){let e=this._createTableGutterCell("body","start");n.appendChild(e)}var s=document.createElement(I.DOM_ELEMENT._TD),a=this._getColumnDefs().length;if(this._isDefaultSelectorEnabled()&&(a+=1),s.setAttribute(I.DOM_ATTR._COLSPAN,a),n.appendChild(s),this._isGutterEndColumnEnabled()){let e=this._createTableGutterCell("body","end");n.appendChild(e)}var r=this._getTemplateEngine();if(null!=r)r.execute(this._getRootElement(),i,{},null,l).forEach(function(e){s.appendChild(e)}),this._hasNoDataTemplate=!0}else{var _=null;_=null!=this.options.emptyText?this.options.emptyText:this.getTranslatedString(I._BUNDLE_KEY._MSG_NO_DATA);var h=null!=t?_:this.getTranslatedString(I._BUNDLE_KEY._MSG_INITIALIZING);null==e?this._createTableBodyMessageRow(this._getColumnDefs().length,h):this._setTableBodyMessage(h)}this._noDataMessageShown=!0}},I.prototype._hideNoDataMessage=function(){if(this._noDataMessageShown){var e=this._getTableBodyMessageRow();if(null!=e)c(e).remove();else{var t=this._getTable();if(t.classList.contains(I.CSS_CLASSES._TABLE_NO_DATA_CONTAINER_CLASS)){t.classList.remove(I.CSS_CLASSES._TABLE_NO_DATA_CONTAINER_CLASS);var i=this._getTableNoDataRow();null!=i&&(this._cleanTemplateNodes(i),c(i).remove(),this._hasNoDataTemplate=!1)}}this._noDataMessageShown=!1}},I.prototype._handleContextMenuResizePopup=function(){let e,t;if("redwood"===g.parseJSONFromFontFamily("oj-theme-json").behavior){let i=document.getElementById(this._getTableUID()+"_resize_column_width_input"),o=this._getContextMenuResizeDialog();if(e=parseInt(o.getAttribute(I._DATA_OJ_COLUMNIDX),10),this._IsCustomElement()&&"valid"===i.valid)t=i.value,o.close();else{if(this._IsCustomElement()||"valid"!==c(i).ojInputNumber("option","valid"))return;t=c(i).ojInputNumber("option","value"),c(o).ojDialog("close")}}else{let i=document.getElementById(this._getTableUID()+"_resize_popup_spinner"),o=this._getContextMenuResizePopup();if(e=parseInt(o.getAttribute(I._DATA_OJ_COLUMNIDX),10),this._IsCustomElement()&&"valid"===i.valid)t=i.value,o.close();else{if(this._IsCustomElement()||"valid"!==c(i).ojInputNumber("option","valid"))return;t=c(i).ojInputNumber("option","value"),c(o).ojPopup("close")}}for(var i=[],o=this.options.columns.length,l=0;l<o;l++)i[l]=c.extend({},{},this.options.columns[l]);var n=this._getLayoutManager().getMinimumForcedOffsetWidth(e);i[e].width=Math.max(t,n),this.option("columns",i,{_context:{writeback:!0,internalSet:!0}}),this._clearCachedMetadata(),this._queueTask(function(){this._getLayoutManager().notifyTableUpdate(I._UPDATE._COL_RESIZE),setTimeout(function(){this._getTable().focus()}.bind(this),0)}.bind(this))},I.prototype._handleContextMenuSelect=function(e,t){var i,o=(i=t?t.item:c(e.target)).attr(I._DATA_OJ_COMMAND),l=this._getFirstAncestor(this._contextMenuEvent.target,"."+I.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS,!0);l=null==l?this._contextMenuEventHeaderColumn:l;var n=this._getFirstAncestor(this._contextMenuEvent.target,"."+I.CSS_CLASSES._TABLE_DATA_CELL_CLASS,!0),s=null;if(null!=l?s=this._getElementColumnIdx(l):null!=n&&(s=this._getElementColumnIdx(n)),null!==s)if("oj-table-sortAsc"===o)this._handleSortTableHeaderColumn(s,!0,e);else if("oj-table-sortDsc"===o)this._handleSortTableHeaderColumn(s,!1,e);else if("oj-table-enableNonContiguousSelection"===o)this._nonContiguousSelection=!0,this._removeTableBodyRowTouchSelectionAffordance(),i.attr(I._DATA_OJ_COMMAND,"oj-table-disableNonContiguousSelection"),i.children().first().text(this.getTranslatedString("labelDisableNonContiguousSelection"));else if("oj-table-disableNonContiguousSelection"===o)this._nonContiguousSelection=!1,i.attr(I._DATA_OJ_COMMAND,"oj-table-enableNonContiguousSelection"),i.children().first().text(this.getTranslatedString("labelEnableNonContiguousSelection"));else if("oj-table-resize"===o){var a=l||n,r=this._getLayoutManager().getColumnWidthProperty(a),_=null!=l?l:n;if("redwood"===g.parseJSONFromFontFamily("oj-theme-json").behavior){let e=this._getContextMenuResizeDialog();e.setAttribute(I._DATA_OJ_COLUMNIDX,s);let t=document.getElementById(this._getTableUID()+"_resize_column_width_input");this._IsCustomElement()?(t.value=Math.round(r),e.open(_)):(c(t).ojInputNumber("option","value",Math.round(r)),c(e).ojDialog("open",_))}else{let e=this._getContextMenuResizePopup();e.setAttribute(I._DATA_OJ_COLUMNIDX,s);let t=document.getElementById(this._getTableUID()+"_resize_popup_spinner");this._IsCustomElement()?(t.value=Math.round(r),e.open(_)):(c(t).ojInputNumber("option","value",Math.round(r)),c(e).ojPopup("open",_))}}},I.prototype._registerResizeListener=function(){var e=this._getTableContainer();this._resizeListener||(this._resizeListener=function(){var e=this._getLayoutManager(),t=window.getComputedStyle(this._getTableContainer());e.isSizingRefreshRequired(e.getExactOffsetWidth(t),e.getExactOffsetHeight(t))&&(e.notifyTableUpdate(I._UPDATE._RESIZE),this._hasPendingTasks()||this._syncTableSizing(!0))}.bind(this)),this._isResizeListenerAdded||(S.addResizeListener(e,this._resizeListener,50,!0),this._isResizeListenerAdded=!0)},I.prototype._unregisterResizeListener=function(){var e=this._getTableContainer();S.removeResizeListener(e,this._resizeListener),this._isResizeListenerAdded=!1},I.prototype._unregisterChildStateListeners=function(e){for(var t=e.querySelectorAll("*"),i=0;i<t.length;i++)this._UnregisterChildNode(t[i])},I.prototype._isLoadMoreOnScroll=function(){return this.options.scrollPolicy===I._OPTION_SCROLL_POLICY._AUTO?!(this._data instanceof u.TableDataSourceAdapter):this.options.scrollPolicy!==I._OPTION_SCROLL_POLICY._LOAD_ALL},I.prototype._isTableHeaderless=function(){for(var e=this._getColumnDefs(),t=e.length,i=0;i<t;i++){var o=this._getSlotTemplate(e[i][I._HEADER_TEMPLATE]);if(null!=e[i].headerText||null!=e[i].headerStyle||null!=e[i].sortable&&e[i].sortable!==I._OPTION_DISABLED||null!=e[i].sortProperty||null!=e[i].headerRenderer||null!=o)return!1}if(this._isDefaultHeaderTemplateSlotValid()&&null!=this._getSlotTemplate("headerTemplate"))return!1;return!0},I.prototype._isTableFooterless=function(){for(var e=this._getColumnDefs(),t=e.length,i=0;i<t;i++){var o=this._getColumnRenderer(i,"footer"),l=this._getSlotTemplate(e[i][I._FOOTER_TEMPLATE]);if(null!=o)return!1;if(null!=l)return!1}if(this._isDefaultFooterTemplateSlotValid()&&null!=this._getSlotTemplate("footerTemplate"))return!1;return!0},I.prototype._isTableHeaderColumnsRendered=function(){return!0===this._renderedTableHeaderColumns},I.prototype._isTableRefreshNeeded=function(e,t,i){var o,l=this.options;return"contextMenu"===e&&t==="#"+this._getTableUID()+"_contextmenu"||"columns"===e&&!this._isColumnMetadataUpdated(t)||"scrollToKey"===e||"addRowDisplay"===e||"scrollPosition"===e||"selection"===e||"selected"===e||"currentRow"===e||"editRow"===e||"scrollPolicyOptions"===e&&this._isStickyLayoutEnabled()&&null!=i&&("scrollerOffsetTop"===i.subkey||"scrollerOffsetBottom"===i.subkey||"scrollerOffsetStart"===i.subkey||"scrollerOffsetEnd"===i.subkey)||u.Object.compareValues(t,l[e])?o=!1:("verticalGridVisible"!==e&&"display"!==e||(this._renderedTableHeaderColumns=!1),o=!0),o},I.prototype._isTableSortable=function(){for(var e=this._getColumnDefs(),t=e.length,i=0;i<t;i++)if(e[i].sortable===I._OPTION_ENABLED)return!0;return!1},I.prototype._isTableColumnsResizable=function(){for(var e=this._getColumnDefs(),t=e.length,i=0;i<t;i++)if(e[i].resizable===I._OPTION_ENABLED)return!0;return!1},I.prototype._isTouchDevice=function(){return null==this._isTouch&&(this._isTouch=A.isMobileTouchDevice()),this._isTouch},I.prototype._processSlottedChildren=function(){var e=this._getTableBottomSlot();null!=e&&c(e).remove();for(var t=L.CustomElementUtils.getSlotMap(this._getRootElement()),i=Object.keys(t),o=0;o<i.length;o++){var l=i[o];if("bottom"===l){var n=t[l];if(null!=n){e=this._createTableBottomSlot();for(var s=0;s<n.length;s++)e.appendChild(n[s])}}}},I.prototype._handleSortTableHeaderColumn=function(e,t,i){this._clearSortedHeaderColumn(e);var o=this._getColumnDefs()[e],l=null==o.sortProperty?o.field:o.sortProperty;this._invokeDataSort(l,t,i),this._sortColumn=o,this._refreshSortTableHeaderColumn(l,t)},I.prototype._processFetchSort=function(e){try{var t=e.fetchParameters[I._CONST_SORTCRITERIA];if(null!=t&&t.length>0){var i=t[0].attribute,o=t[0].direction===I._COLUMN_SORT_ORDER._ASCENDING;this._refreshSortTableHeaderColumn(i,o),this._setCurrentRow(this.options.currentRow)}else this._clearSortedHeaderColumn()}catch(e){E.error(e)}},I.prototype._handleMouseEnterColumnHeader=function(e){if(e){this._isColumnSelectionEnabled()&&e.classList.add(I.MARKER_STYLE_CLASSES._HOVER);var t=this._getElementColumnIdx(e);(e.classList.contains(I.CSS_CLASSES._COLUMN_HEADER_ASC_ICON_CLASS)||e.classList.contains(I.CSS_CLASSES._COLUMN_HEADER_DSC_ICON_CLASS)||e.classList.contains(I.CSS_CLASSES._COLUMN_HEADER_DEFAULT_SORT_ICON_CLASS))&&e.classList.add(I.MARKER_STYLE_CLASSES._HOVER),this._showTableHeaderColumnSortIcon(t)}},I.prototype._handleMouseLeaveColumnHeader=function(e){if(e){e.classList.remove(I.MARKER_STYLE_CLASSES._HOVER);var t=this._getElementColumnIdx(e);this._hideTableHeaderColumnSortIcon(t)}},I.prototype._showTableHeaderColumnSortIcon=function(e){if(this._getColumnDefs()[e].sortable===I._OPTION_ENABLED){var t=this._getTableHeaderColumn(e);if(!t)return;if(null==c(t).data("sorted")){var i=this._getSortIconContainer(t),o=this._getSortIcon(t);null!=i&&null!=o&&(o.classList.remove(I.MARKER_STYLE_CLASSES._DISABLED),o.classList.add(I.MARKER_STYLE_CLASSES._ENABLED),o.classList.add(I.MARKER_STYLE_CLASSES._DEFAULT))}}},I.prototype._hideTableHeaderColumnSortIcon=function(e){if(this._getColumnDefs()[e].sortable===I._OPTION_ENABLED){var t=this._getTableHeaderColumn(e);if(null==c(t).data("sorted")){var i=this._getSortIconContainer(t),o=this._getSortIcon(t);null!=i&&null!=o&&(i.setAttribute(I.DOM_ATTR._TITLE,this.getTranslatedString("labelSortAsc")),o.classList.remove(I.CSS_CLASSES._COLUMN_HEADER_DSC_ICON_CLASS),o.classList.remove(I.CSS_CLASSES._COLUMN_HEADER_ASC_ICON_CLASS),o.classList.add(I.CSS_CLASSES._COLUMN_HEADER_DEFAULT_SORT_ICON_CLASS),o.classList.add(I.MARKER_STYLE_CLASSES._DISABLED),o.classList.remove(I.MARKER_STYLE_CLASSES._ENABLED),o.classList.remove(I.MARKER_STYLE_CLASSES._DEFAULT))}}},I.prototype._refreshSortTableHeaderColumn=function(e,t){for(var i,o=this._getColumnDefs(),l=null,n=o.length,s=0;s<n;s++){var a=o[s];if(e===(null==a.sortProperty?a.field:a.sortProperty)){l=s;break}}if(null!=l){this._clearSortedHeaderColumn(l);var r=this._getTableHeaderColumn(l);if(null!=r){var _=c(r).data("sorted"),h=this._getSortIconContainer(r);null!=(i=this._getSortIcon(r))&&(i.classList.add(I.MARKER_STYLE_CLASSES._DEFAULT),i.classList.remove(I.MARKER_STYLE_CLASSES._DISABLED)),t&&_!==I._COLUMN_SORT_ORDER._ASCENDING?(c(r).data("sorted",I._COLUMN_SORT_ORDER._ASCENDING),null!=i&&(h.setAttribute(I.DOM_ATTR._TITLE,this.getTranslatedString("labelSortDsc")),i.classList.remove(I.CSS_CLASSES._COLUMN_HEADER_DEFAULT_SORT_ICON_CLASS),i.classList.remove(I.CSS_CLASSES._COLUMN_HEADER_DSC_ICON_CLASS),i.classList.add(I.CSS_CLASSES._COLUMN_HEADER_ASC_ICON_CLASS))):t||_===I._COLUMN_SORT_ORDER._DESCENDING||(c(r).data("sorted",I._COLUMN_SORT_ORDER._DESCENDING),null!=i&&(h.setAttribute(I.DOM_ATTR._TITLE,this.getTranslatedString("labelSortAsc")),i.classList.remove(I.CSS_CLASSES._COLUMN_HEADER_DEFAULT_SORT_ICON_CLASS),i.classList.remove(I.CSS_CLASSES._COLUMN_HEADER_ASC_ICON_CLASS),i.classList.add(I.CSS_CLASSES._COLUMN_HEADER_DSC_ICON_CLASS)))}}},I.prototype._getSortedTableHeaderColumnIdx=function(){for(var e=this._getTableHeaderColumns(),t=0;t<e.length;t++){if(null!=c(e[t]).data("sorted"))return t}return null},I.prototype._clearSortedHeaderColumn=function(e){var t=this._getSortedTableHeaderColumnIdx();if(null!=t){var i=this._getTableHeaderColumn(t);if(c(i).data("sorted",null),null==e||t!==e)this._hideTableHeaderColumnSortIcon(t);else{var o=this._getSortIcon(i);null!=o&&o.classList.remove(I.MARKER_STYLE_CLASSES._SELECTED)}}},I.prototype._getColumnDefs=function(){return this._columnDefArray||(this._columnDefArray=this._getColumnMetadata()),this._columnDefArray},I.prototype._getColumnMetadata=function(e){var t,i=null!=e?e:this.options.columns,o=this.options.columnsDefault;if((0===i.length||1===i.length&&null==i[0].id&&null==i[0].headerText&&null==i[0].field)&&null==o.headerText&&null==o.field)return[];var l=[],n=i.length;for(t=0;t<n;t++)l[t]=c.extend({},o,i[t]);var s=[],a=l.length;for(t=0;t<a;t++)s.push(l[t]);var r=this._getData(),_=!1;for(null!=r&&null!=r.getCapability("sort")&&(_=!0),t=0;t<a;t++)null==s[t][I._FIELD_ID]&&(s[t][I._FIELD_ID]=I._COLUMN_HEADER_ID_PREFIX+t),!_||null!=s[t].sortable&&s[t].sortable!==I._OPTION_AUTO||(s[t].sortable=I._OPTION_ENABLED);return s},I.prototype._getColumnRenderer=function(e,t){var i=this._getColumnDefs()[e],o=null;return"cell"===t?o=i.renderer:"footer"===t?o=i.footerRenderer:"header"===t&&(o=i.headerRenderer),this._WrapCustomElementRenderer(o)},I.prototype._getRowRenderer=function(){return this._WrapCustomElementRenderer(this.options.rowRenderer)},I.prototype._isLastRowInViewport=function(){var e=this._getTableBodyRows(),t=e[e.length-1];return this._getLayoutManager().getVerticalOverflowDiff(t).bottom-t.offsetHeight<=0},I.prototype._registerDomScroller=function(){this._unregisterDomScroller();var e=this._controller,t=this._getLayoutManager();this._domScrollerSuccessFunc=function(e){if(this._clearDataWaitingState(!this._animateOnFetch),null!=e){if(A.isFetchAborted(e))return this._hideStatusMessage(),void this._clearScrollBuffer();this._noMoreData=!1,e.maxCountLimit&&(this._noMoreData=!0,this._handleScrollerMaxRowCount());var i=e[I._CONST_VALUE];if(null!=i){var o=i[I._CONST_DATA],l=i.metadata.map(function(e){return e[I._CONST_KEY]}),n=i[I._CONST_METADATA];if(o.length>0)return null!=this._domScroller&&this._domScroller.pauseScrollTracking(),void this._queueTask(function(){var i,s=!1;for(i=l.length-1;i>=0;i--)if(null!==this._getRowIdxForRowKey(l[i]))o.splice(i,1),l.splice(i,1),n.splice(i,1),s=!0;else for(var a=0;a<i;a++)u.KeyUtils.equals(l[i],l[a])&&(o.splice(i,1),l.splice(i,1),n.splice(i,1),s=!0);if(s&&E.warn(A.WARN_DUPLICATE_KEYS_DETAIL),o.length>0){t.notifyTableUpdate(I._UPDATE._ROWS_ADDED);var r=this._getTableBodyRows().length,_=[];for(i=0;i<o.length;i++)_[i]=r+i;return this._refreshTableBody({isMouseWheel:e.isMouseWheel,data:o,keys:l,metadata:n,indexes:_},r,!0).then(function(){null!=this._domScroller&&this._domScroller.resumeScrollTracking(),this._hideStatusMessage(),e.done?(this._noMoreData=!0,this._syncScrollPosition()):this._syncScrollPosition(null,null!=this._scrollPosition)}.bind(this),function(e){this._hideStatusMessage()}.bind(this))}return null!=this._domScroller&&this._domScroller.resumeScrollTracking(),this._hideStatusMessage(),Promise.resolve()}.bind(this))}this._hideStatusMessage(),e.done?(this._noMoreData=!0,this._clearScrollBuffer(),this._syncScrollPosition()):(this._clearScrollBuffer(),this._syncScrollPosition(null,null!=this._scrollPosition))}else this._hideStatusMessage(),this._clearScrollBuffer(),this._syncScrollPosition()}.bind(this),this._domScrollerErrorFunc=function(t){e&&e.signal.aborted&&this._pendingFetchStale&&this._clearDataWaitingState(),this._clearScrollBuffer()}.bind(this);var i=this._getTableBodyRows().length;this._requiresDomScrollerRefresh=!1,this._domScroller=new m(t.getScroller(),this._getData(),{asyncIterator:this._dataProviderAsyncIterator,contentElement:t.getContentElement(),fetchSize:this.options.scrollPolicyOptions.fetchSize,maxCount:this.options.scrollPolicyOptions.maxCount,initialRowCount:i,controller:e,success:this._domScrollerSuccessFunc.bind(this),error:this._domScrollerErrorFunc.bind(this),localKeyValidator:function(e){return null!==this._findRowElementByKey(e)}.bind(this),beforeFetch:function(e){return null==this._idleCallback&&(this._fetchBySyncScroll=Math.abs(this._scrollY-e)<=1,this._setDataWaitingState(!1),this._isSkeletonSupport()?this._showProgressiveLoading():this._showStatusMessage(),!0)}.bind(this),beforeScroll:this._clearScrollPosBusyState.bind(this),fetchTrigger:4})},I.prototype._unregisterDomScroller=function(){null!=this._domScroller&&(this._domScroller.destroy(),this._domScroller=null)},I.prototype._updateHeaderTop=function(e){if(this._isDefaultSelectorEnabled()){var t=this._getTableSelectorColumn();null!=t&&(t.style[I.CSS_PROP._TOP]=e+"px")}for(var i=this._getTableHeaderColumns(),o=0;o<i.length;o++)i[o].style[I.CSS_PROP._TOP]=e+"px"},I.prototype._updateFooterBottom=function(e){if(this._isDefaultSelectorEnabled()){var t=this._getTableFooterSelectorCell();null!=t&&(t.style[I.CSS_PROP._BOTTOM]=e+"px")}for(var i=this._getTableFooterCells(),o=0;o<i.length;o++)i[o].style[I.CSS_PROP._BOTTOM]=e+"px"},I.prototype._handleScrollerMaxRowCount=function(){var e=this.getTranslatedString("msgScrollPolicyMaxCountSummary"),t=this.getTranslatedString("msgScrollPolicyMaxCountDetail");E.info(e+"\n"+t)},I.prototype._clearIdleCallback=function(){null!=this._idleCallback&&(A.isRequestIdleCallbackSupported()?(window.cancelIdleCallback(this._idleCallback),window.cancelAnimationFrame(this._idleCallback)):window.cancelAnimationFrame(this._idleCallback),this._idleCallback=null)},I.prototype._requestIdleCallback=function(e,t){if(A.isRequestIdleCallbackSupported()){var i,o=window.setTimeout(function(){this._idleCallback=window.requestAnimationFrame(function(){t()}),o=null},250);e&&A.isBlink()&&(i={timeout:100}),this._idleCallback=window.requestIdleCallback(function(e){null!=o&&(window.clearTimeout(o),t(e))},i)}else this._idleCallback=window.requestAnimationFrame(function(){t()})},I.prototype._renderRowsWhenIdle=function(e,t,i,o,l,n,s,a){var r=this;if(0===e.length)return this._idleCallback=null,void Promise.all(o).then(function(){var e=r._clearTableBodyRowsFromIndex(l);r._getLayoutManager().handleAfterRowsProcessed(i),r._appendElementToTableBody(i,t),e&&r._getTable().focus(),r._afterRowsRendered(t).then(function(e){n(e)},function(e){s(e)})},function(e){s(e)});var _=0;function h(){window.requestAnimationFrame(function(){r._renderRowsWhenIdle(e,t,i,o,l,n,s,a),a&&A.isFirefox()&&t.scrollTop!==r._scrollTop&&(t.scrollTop=r._scrollTop)})}try{this._requestIdleCallback(a,function(n){void 0===n?function(){for(var n=0;n<I._BATCH_PROCESS_SIZE_WHEN_IDLE&&0!==e.length;n++)0!==_||r._getLayoutManager().isTableWidthConstrained()||(t.style[I.CSS_PROP._OVERFLOW_X]="hidden"),o.push(r._renderRow(e.shift(),i,l)),_+=1;h()}():function(n){for(var s=n.timeRemaining(),a=0;(s>a||n.didTimeout)&&0!==e.length;)0!==_||r._getLayoutManager().isTableWidthConstrained()||(t.style[I.CSS_PROP._OVERFLOW_X]="hidden"),o.push(r._renderRow(e.shift(),i,l)),_+=1,a=s-n.timeRemaining(),s=n.timeRemaining();h()}(n)})}catch(e){s(e)}},I.prototype._renderRow=function(e,t,i){var o=e.row,l=e.rowIdx;if(null!=o){var n=this._createTableBodyRow();return this._setTableBodyRowAttributes(o,n),this._styleTableBodyRow(n,!0),this._insertTableBodyRow(l,n,t),this._refreshTableBodyRow(l,o,n,t,i)}return Promise.resolve(null)},I.prototype._afterRowsRendered=function(e){this._clearCachedDomRowData(),this._clearIdleRenderBusyState(),this._hasRowOrCellRendererOrTemplate()&&f.subtreeAttached(e);var t=this._getTableBodyRows();return t.length>0?this._finalizeBodyRowRendering(t):Promise.resolve(!0)},I.prototype._getRowIdxsForElementsWithStyleClass=function(e){var t=this._tableQuerySelectorAll(this._getTable(),e),i=[];if(t&&t.length>0)for(var o=t.length,l=0;l<o;l++){for(var n=this._getElementRowIdx(t[l]),s=!1,a=i.length,r=0;r<a;r++)i[r]===n&&(s=!0);s||i.push(n)}return i},I.prototype._getColumnIdxsForElementsWithStyleClass=function(e){var t=this._tableQuerySelectorAll(this._getTable(),e),i=[];if(t&&t.length>0)for(var o=t.length,l=0;l<o;l++){var n=this._getElementColumnIdx(t[l]),s=!1;null===n&&(t[l].classList.contains(I.CSS_CLASSES._COLUMN_HEADER_SELECTOR_CELL_CLASS)||t[l].classList.contains(I.CSS_CLASSES._TABLE_FOOTER_SELECTOR_CELL_CLASS))&&(n=-1);for(var a=i.length,r=0;r<a;r++)i[r]===n&&(s=!0);s||i.push(n)}return i},I.prototype._syncTableSizing=function(e){var t=this._getLayoutManager();t.isTableLayoutRefreshRequired()&&(e||t.isSizingRefreshRequired())&&t.refreshTableDimensions();var i=this._updateScrollBufferHeight();this._isLoadMoreOnScroll()&&!this._dataFetching&&this._domScroller?(this._setDataWaitingState(!1),this._domScroller.checkViewport(i>0||this._noDataMessageShown).then(this._domScrollerSuccessFunc,this._checkViewportRejected.bind(this))):(this._clearScrollBuffer(),this._syncScrollPosition())},I.prototype._updateScrollBufferHeight=function(){var e=0,t=this._getLayoutManager(),i=this._getTableBodyScrollBuffer();if(null!=i&&(e=i.offsetHeight)>0){var o=t.getVerticalOverflowDiff(i).bottom,l=Math.min(Math.max(0,e-o),e);l!==e&&(e=l,i.style[I.CSS_PROP._HEIGHT]=e+I.CSS_VAL._PX)}return e},I.prototype._clearScrollBuffer=function(){var e=this._getTableBodyScrollBuffer();if(null!=e){var t=e.offsetHeight;if(t>0){var i=this._getLayoutManager(),o=i.getVerticalOverflowDiff(e).bottom,l=Math.max(0,t-o);if(l>0){var n=c(i.getScroller());n.scrollTop(n.scrollTop()-l),this._skipScrollUpdate=!1,i.updateCurrentScrollState()}}this._getTableBody().removeChild(e),this._clearDomCache(I.CSS_CLASSES._TABLE_BUFFER_ROW_CLASS)}},I.prototype._animateVisibleRows=function(e,t,i){if(i=null==this._animationActionOverride?i:this._animationActionOverride,!this._hasAdditionalPendingTasks()){var o;this._animationActionOverride=null;var l=this._getVisibleRowIdxs(),n=[];for(o=e.length-1;o>=0;o--)null==e[o]&&(e.splice(o,1),t.splice(o,1));for(o=0;o<t.length;o++)-1===l.indexOf(t[o])&&n.push(t[o]);for(n.sort(function(e,t){return e-t}),o=n.length-1;o>=0;o--)e.splice(n[o],1);return this._unregisterResizeListener(),this._animateTableBodyRows(e,i).then(function(){this._registerResizeListener()}.bind(this))}return this._animationActionOverride="update",Promise.resolve()},I.prototype._cleanTemplateNodes=function(e){var t=this._getTemplateEngine();null!=t&&t.clean(e,this._getRootElement())},I.prototype._clearCachedMetadata=function(){this._columnDefArray=null,this._setTableActionableMode(!1)},I.prototype._getSlotTemplate=function(e){if(this._IsCustomElement()&&e){var t=L.CustomElementUtils.getSlotMap(this._getRootElement())[e];if(t&&t.length>0&&"template"===t[0].tagName.toLowerCase())return t[0]}return null},I.prototype._isDefaultCellTemplateSlotValid=function(){return this._isDefaultTemplateSlotValid("cellTemplate")},I.prototype._isDefaultRowTemplateSlotValid=function(){return this._isDefaultTemplateSlotValid("rowTemplate")},I.prototype._isDefaultHeaderTemplateSlotValid=function(){return this._isDefaultTemplateSlotValid("headerTemplate")},I.prototype._isDefaultFooterTemplateSlotValid=function(){return this._isDefaultTemplateSlotValid("footerTemplate")},I.prototype._isDefaultAddRowTemplateSlotValid=function(){return this._isDefaultTemplateSlotValid("addRowTemplate")},I.prototype._isDefaultAddRowCellTemplateSlotValid=function(){return this._isDefaultTemplateSlotValid("addRowCellTemplate")},I.prototype._isDefaultTemplateSlotValid=function(e){for(var t=this._getColumnDefs(),i=t.length,o=0;o<i;o++){var l=t[o][I._CELL_TEMPLATE],n=t[o][I._HEADER_TEMPLATE],s=t[o][I._FOOTER_TEMPLATE];if(e===l||e===n||e===s)return!1}return!0},I.prototype._getTemplateEngine=function(){return this._templateEngine},I.prototype._getVisibleRowIdxs=function(){var e,t=[],i=this._getTable(),o=this._getTableBody(),l=this._getTableBodyRows();if(l.length>0&&o.offsetHeight>0){var n=c(window).height(),s=this._getLayoutManager().getScroller().getBoundingClientRect();if(s.top>n)return t;var a,r,_,h=s.left>=0?s.left+1:s.right-1,d=s.top>=0?s.top:0,u=document.elementsFromPoint(h,d);for(e=0;e<u.length;e++){var S=u[e];if(S.nodeName===I.DOM_ELEMENT._TD&&this._isTableOwned(S)){a=this._getElementRowIdx(S);break}if(S===i)break}if(null==a&&(a=0),s.bottom>n)r=n-1;else{var E=parseInt(window.getComputedStyle(o).borderBottomWidth,10)||0;r=s.bottom>=0?s.bottom-E-1:0}var C=document.elementsFromPoint(h,r);for(e=0;e<C.length;e++){var T=C[e];if(T.nodeName===I.DOM_ELEMENT._TD&&this._isTableOwned(T)){_=this._getElementRowIdx(T);break}if(T===i)break}for(null==_&&(_=l.length-1),e=a;e<=_;e++)t.push(e)}return t},I.prototype._hasRowOrCellRendererOrTemplate=function(e){if(null!=this._getRowRenderer())return!0;var t=null,i=null,o=this._getColumnDefs();if(null!=e)t=this._getColumnRenderer(e,"cell"),i=this._getSlotTemplate(o[e][I._CELL_TEMPLATE]);else for(var l=o.length,n=0;n<l&&null==(t=this._getColumnRenderer(n,"cell"))&&null==(i=this._getSlotTemplate(o[n][I._CELL_TEMPLATE]));n++);if(null!=t||null!=i)return!0;if(this._isDefaultRowTemplateSlotValid()&&null!=this._getSlotTemplate("rowTemplate"))return!0;if(this._isDefaultCellTemplateSlotValid()&&null!=this._getSlotTemplate("cellTemplate"))return!0;return!1},I.prototype._initFetch=function(e,t){var i=e||{},o=this._getData(),l=this._getLayoutManager();return null==o||!u.DataProviderFeatureChecker.isDataProvider(o)||this._isPagingModelDataProvider()&&!t?null==o?this._queueTask(function(){l.notifyTableUpdate(I._UPDATE._REFRESH);var e=[];return e.push(this._refreshTableHeader()),e.push(this._refreshTableBody()),e.push(this._refreshTableFooter()),Promise.all(e)}):void 0:this._queueTask(function(){return l.notifyTableUpdate(t?I._UPDATE._DATA_SORT:I._UPDATE._REFRESH),this._isExternalScrollEnabled()||(this._scrollTop=0,l.getScroller().scrollTop=0),o instanceof u.TableDataSourceAdapter&&(i.fetchType="init",this._isLoadMoreOnScroll()&&(i[I._CONST_OFFSET]=0)),this._invokeDataFetchRows(i)}.bind(this))},I.prototype._initTemplateEngine=function(){this._queueTask(function(){var e;try{const t={customElement:this._GetCustomElement()};e=T.__getTemplateEngine(t).then(function(e){this._templateEngine=e}.bind(this),function(e){E.warn(e)})}catch(t){E.warn(t),e=Promise.resolve(null)}return e}.bind(this))},I.prototype._initializeFetchFirstOptions=function(e){var t=e||{};return this._clientId=this._clientId||Symbol(),this._controller=new AbortController,t[I._CONST_CLIENTID]=this._clientId,t[I._CONST_SIGNAL]=this._controller.signal,!t[I._CONST_PAGESIZE]&&this._isLoadMoreOnScroll()?t[I._CONST_PAGESIZE]=this.options.scrollPolicyOptions.fetchSize:t[I._CONST_PAGESIZE]=-1,t[I._CONST_SILENT]=!0,t},I.prototype._containsKey=function(e,t){for(var i=0;i<t.length;i++)if(u.KeyUtils.equals(t[i].key,e))return!0;return!1},I.prototype._invokeDataFetchRows=function(e){var t=this._initializeFetchFirstOptions(e),i=this._getData();return null!=i?new Promise(function(e){var o=this._controller;this._animateOnFetch=!1,this._noMoreData=!1,this._pendingFetchOptions=t,this._setDataWaitingState(!0),this._hasRefreshInQueue=!1,this._dataProviderAsyncIterator=i.fetchFirst(t)[Symbol.asyncIterator]();var l=function(e,t,o){var n=o;return(null==o||this._containsKey(o,t))&&(n=null),e.done||null==n&&(this._isLoadMoreOnScroll()||"function"==typeof i.getPageCount)?e:this._dataProviderAsyncIterator.next().then(function(t){return A.isFetchAborted(t)?Promise.reject(!0):(e.done=t.done,e.value.data=e.value.data.concat(t.value.data),e.value.metadata=e.value.metadata.concat(t.value.metadata),l(e,t.value.metadata,n))},function(e){return Promise.reject(e)})}.bind(this),n=[];n.push(this._dataProviderAsyncIterator.next()),n.push(this._getScrollToKey()),this._isTableHeaderColumnsRendered()||n.push(this._refreshTableHeader()),Promise.all(n).then(function(e){var t=e[0];if(A.isFetchAborted(t))return Promise.reject(!0);var i=e[1];return l(t,t[I._CONST_VALUE].metadata,i)},function(e){return Promise.reject(e)}).then(function(t){var o,l=t[I._CONST_VALUE],n=l[I._CONST_DATA],s=l[I._CONST_METADATA],a=l.metadata.map(function(e){return e[I._CONST_KEY]}),r=!1;for(o=a.length-1;o>=0;o--)for(var _=0;_<o;_++)u.KeyUtils.equals(a[o],a[_])&&(n.splice(o,1),a.splice(o,1),s.splice(o,1),r=!0);r&&E.warn(A.WARN_DUPLICATE_KEYS_DETAIL);var h=0;i instanceof u.TableDataSourceAdapter&&(h=i[I._CONST_OFFSET]);var d=0;this._isPagingModelDataProvider()&&(d=i.getStartItemIndex());var c=[],S=n.length;for(o=0;o<S;o++)c[o]=h+d+o;this._unregisterDomScroller(),t.maxCountLimit?(this._noMoreData=!0,this._handleScrollerMaxRowCount()):t.done&&(this._noMoreData=!0),this._refreshAll({data:n,metadata:s,keys:a,indexes:c},h).then(function(){this._clearDataWaitingState(),this._processFetchSort(l),this._isLoadMoreOnScroll()&&this._registerDomScroller(),e(t)}.bind(this),function(t){this._clearDataWaitingState();var i=this._getTableBody();0===this._getTableBodyRows().length?(this._showNoDataMessage(),this._finalizeNonBodyRowRendering([i]).then(function(){e(null)})):e(null)}.bind(this))}.bind(this),function(t){if(o&&o.signal.aborted)this._clearDataWaitingState(!0),e(null);else{this._clearDataWaitingState();var i=this._getTableBody();0===this._getTableBodyRows().length?(this._showNoDataMessage(),this._finalizeNonBodyRowRendering([i]).then(function(){e(null)})):e(null)}}.bind(this))}.bind(this)):Promise.resolve(null)},I.prototype._invokeDataSort=function(e,t,i){if(this._resetAriaLabel=!0,this._getData()){this._dataFetching&&this._controller&&this._controller.abort();var o=[],l={};l[I._CONST_ATTRIBUTE]=e,l.direction=t?I._COLUMN_SORT_ORDER._ASCENDING:I._COLUMN_SORT_ORDER._DESCENDING,o.push(l),this._trigger("sort",i,{header:o[0][I._CONST_ATTRIBUTE],direction:o[0].direction}),this._beforeDataRefresh(!0),this._showStatusMessage(),this._initFetch({sortCriteria:o},!0)}},I.prototype._isColumnMetadataUpdated=function(e){if(null!=this._columnDefArray){var t=this._getColumnMetadata(e);if(this._columnDefArray.length!==t.length)return!0;for(var i=t.length,o=0;o<i;o++)for(var l=Object.keys(t[o]),n=0;n<l.length;n++){var s=l[n];if(t[o][s]!==this._columnDefArray[o][s]&&("id"!==s||null==t[o][s]||0!==t[o][s].indexOf(I._COLUMN_HEADER_ID_PREFIX)||null==this._columnDefArray[o][s]||0!==this._columnDefArray[o][s].indexOf(I._COLUMN_HEADER_ID_PREFIX)))return!0}return!1}return!0},I.prototype._getColumnKeys=function(){for(var e=[],t=this._getColumnDefs(),i=0;i<t.length;i++)e.push(t[i][I._FIELD_ID]);return e},I.prototype._getLocalRowKeys=function(){for(var e=[],t=this._getTableBodyRows(),i=0;i<t.length;i++)e.push(t[i][I._ROW_ITEM_EXPANDO].key);return e},I.prototype._hasMoreToFetch=function(){return!!this._isLoadMoreOnScroll()&&!this._noMoreData},I.prototype._clearCachedDataMetadata=function(){null!=this._data&&this._unregisterDataSourceEventListeners(),this._data=null},I.prototype._getColumnIdxForColumnKey=function(e){for(var t=this._getColumnDefs(),i=t.length,o=0;o<i;o++){var l=t[o];if(u.KeyUtils.equals(l.id,e))return o}return null},I.prototype._getColumnKeyForColumnIdx=function(e){var t=this._getColumnDefs();return e<t.length?t[e][I._FIELD_ID]:null},I.prototype._getRowIdxRowArray=function(e,t){var i=[];if(null!=e)for(var o=e[I._CONST_INDEXES].length,l=0;l<o;l++)i.push({row:{data:e[I._CONST_DATA][l],metadata:e[I._CONST_METADATA]?e[I._CONST_METADATA][l]:null,key:e[I._CONST_KEYS][l],index:e[I._CONST_INDEXES][l]},rowIdx:t+l});return i},I.prototype._getRowIdxForRowKey=function(e){var t=this._getTableBodyRows();if(t.length>0)for(var i=t.length,o=0;o<i;o++)if(u.KeyUtils.equals(t[o][I._ROW_ITEM_EXPANDO].key,e))return o;return null},I.prototype._getDataSourceRowIndexForRowKey=function(e){var t=this._getTableBodyRows();if(t.length>0)for(var i=t.length,o=0;o<i;o++)if(u.KeyUtils.equals(t[o][I._ROW_ITEM_EXPANDO].key,e)){var l=this._getData(),n=0;return this._isPagingModelDataProvider()&&(n=l.getStartItemIndex()),o+n}return null},I.prototype._getRowKeyForDataSourceRowIndex=function(e){var t=this._getTableBodyRows();if(t.length>0){var i=this._getData(),o=0;this._isPagingModelDataProvider()&&(o=i.getStartItemIndex());for(var l=t.length,n=0;n<l;n++)if(o+n===e)return t[n][I._ROW_ITEM_EXPANDO].key}return null},I.prototype._getRowKeyForRowIdx=function(e){var t=this._getTableBodyRow(e);return null!=t?t[I._ROW_ITEM_EXPANDO].key:null},I.prototype._getRowKey=function(e,t){return null==e&&(e=this._getTableBodyRow(t)),null!=e?e[I._ROW_ITEM_EXPANDO].key:null},I.prototype._isPagingModelDataProvider=function(){var e=this._getData();return null!=e.getStartItemIndex&&null!==e.getStartItemIndex()&&e.getStartItemIndex()>=0},I.prototype._animateTableBodyRow=function(e,t){return this._isAnimationDisabled(t)?Promise.resolve(!1):new Promise(function(i){this._startAnimation(e,t).then(function(){i(!0)})}.bind(this))},I.prototype._animateTableBodyRows=function(e,t){if(this._isAnimationDisabled(t))return Promise.resolve(!1);for(var i=[],o=0;o<e.length;o++){var l=e[o];i.push(function(e){return this._animateTableBodyRow(e,t)}.bind(this)(l))}return i.length>0?Promise.all(i):Promise.resolve(!1)},I.prototype._getAnimationEffect=function(e){return null==this.defaultAnimations&&(this.defaultAnimations={}),null==this.defaultAnimations[e]&&(this.defaultAnimations[e]=JSON.parse(this._getDefaultOptions()[`${e}Animation`])),this.defaultAnimations[e]},I.prototype._isAnimationDisabled=function(e){var t=this._getAnimationEffect(e);return null==t||0===t.length},I.prototype._startAnimation=function(e,t,i){return null==i&&(i=this._getAnimationEffect(t)),b.startAnimation(e,t,i,this)},I.prototype._isAddNewRowEnabled=function(){return this._isStickyLayoutEnabled()&&"top"===this.options.addRowDisplay&&(null!=this._getSlotTemplate("addRowTemplate")&&this._isDefaultAddRowTemplateSlotValid()||null!=this._getSlotTemplate("addRowCellTemplate")&&this._isDefaultAddRowCellTemplateSlotValid())},I.prototype._refreshAddRowDisplay=function(){return this._isAddRowRendered=!1,this._refreshAddNewRowPlaceholder().then(function(e){this._getLayoutManager().notifyTableUpdate(I._UPDATE._ADD_ROW_DISPLAY),e&&(this._setActiveAddRow(),this._setTableActionableMode(!0))}.bind(this))};const w=function(e){this.component=e,this.Init()};u._registerLegacyNamespaceProp("TableDndContext",w),u.Object.createSubclass(w,u.Object,"oj.TableDndContext"),w._CSS_CLASSES={_DRAG_SOURCE:"oj-table-drag-source",_DRAG_SOURCE_OPAQUE:"oj-table-drag-source-opaque",_DROP_TARGET_EMPTY:"oj-table-drop-target-empty"},w.prototype.Init=function(){w.superclass.Init.call(this)},w.prototype._addDragMarkerClass=function(e){this.component._getTableHeaderColumn(e).classList.add(w._CSS_CLASSES._DRAG_SOURCE_OPAQUE),this.component._setTableColumnCellsClass(e,!0,w._CSS_CLASSES._DRAG_SOURCE_OPAQUE)},w.prototype._removeDragMarkerClass=function(){var e=this.component._getTableElementsByClassName(this.component._getTableHeader(),w._CSS_CLASSES._DRAG_SOURCE_OPAQUE);if(null!=e&&e.length>0)for(var t=e.length,i=0;i<t;i++)e[i].classList.remove(w._CSS_CLASSES._DRAG_SOURCE_OPAQUE);this.component._setTableColumnCellsClass(null,!1,w._CSS_CLASSES._DRAG_SOURCE_OPAQUE)},w.prototype._cloneTableContainer=function(e){var t=this.component._getTableElementsByTagName(e,I.DOM_ELEMENT._TBODY)[0],i=c(t).scrollLeft(),o=e.cloneNode(),l=this.component._getTableElementsByTagName(e,I.DOM_ELEMENT._TABLE)[0].cloneNode(),n=t.cloneNode(),s=this.component._rowsDragged[0].offsetTop;return this.component._rowsDragged.forEach(function(e){var t=e.querySelectorAll("td"),i=e.cloneNode(!0);if(this.component._isDefaultSelectorEnabled()){var o=this.component._getTableElementsByClassName(i,I.CSS_CLASSES._TABLE_DATA_ROW_SELECTOR_CLASS)[0];o.selectedKeys=this.component.options.selected.row,o.rowKey=this.component._getRowKey(e)}var l=i.querySelectorAll("td");i.style.position=I.CSS_VAL._ABSOLUTE,i.style.top=e.offsetTop-s+I.CSS_VAL._PX,i.style.width=e.offsetWidth+I.CSS_VAL._PX,i.classList.add("oj-table-body-row-drag-image"),i.classList.remove(I.MARKER_STYLE_CLASSES._SELECTED),i.classList.remove(I.MARKER_STYLE_CLASSES._FOCUS),i.classList.remove(I.MARKER_STYLE_CLASSES._FOCUS_HIGHLIGHT),l.forEach(function(e,i){e.style.width=t[i].offsetWidth+I.CSS_VAL._PX,e.classList.remove(I.MARKER_STYLE_CLASSES._SELECTED),e.classList.remove(I.MARKER_STYLE_CLASSES._HOVER)}),n.appendChild(i)}.bind(this)),l.appendChild(n),o.appendChild(l),o.classList.add("oj-table-container-drag-image"),o.style[I.CSS_PROP._HEIGHT]=window.innerHeight+I.CSS_VAL._PX,o.style[I.CSS_PROP._OVERFLOW]=I.CSS_VAL._HIDDEN,o.style[I.CSS_PROP._OVERFLOW_X]=I.CSS_VAL._HIDDEN,o.style[I.CSS_PROP._OVERFLOW_Y]=I.CSS_VAL._HIDDEN,n.style[I.CSS_PROP._OVERFLOW]=I.CSS_VAL._HIDDEN,n.style[I.CSS_PROP._OVERFLOW_X]=I.CSS_VAL._HIDDEN,n.style[I.CSS_PROP._OVERFLOW_Y]=I.CSS_VAL._HIDDEN,n.style[I.CSS_PROP._BACKGROUND_COLOR]=I.CSS_VAL._TRANSPARENT,n.style[I.CSS_PROP._BORDER_COLOR]=I.CSS_VAL._TRANSPARENT,n.style[I.CSS_PROP._WIDTH]=c(t).width()+I.CSS_VAL._PX,n.style[I.CSS_PROP._HEIGHT]=t.scrollHeight+I.CSS_VAL._PX,l.style[I.CSS_PROP._WIDTH]=c(t).width()+I.CSS_VAL._PX,document.body.appendChild(o),c(n).scrollLeft(1*i),o},w.prototype._destroyDragImage=function(){this._dragImage&&(c(this._dragImage).remove(),this._dragImage=null)},w.prototype._getEventColumnIndex=function(e){return this.component._getElementColumnIdx(e.currentTarget)},w.prototype._getOverRowIndex=function(e){var t,i=this.component._getFirstAncestor(e.target,I.DOM_ELEMENT._TR,!0),o=this.component._getFirstAncestor(e.target,"."+I.CSS_CLASSES._TABLE_DATA_CELL_CLASS+", ."+I.CSS_CLASSES._TABLE_SELECTOR_CELL_CLASS,!0);if(null!=o){var l=this.component._getFirstAncestor(o,"."+I.CSS_CLASSES._TABLE_DATA_ROW_CLASS,!0);if(null!=l){t=this.component._getTableBodyRows().indexOf(l);var n=e.target.getBoundingClientRect();e.offsetY>n.height/2&&(t+=1)}}else if(c(i).hasClass(I.CSS_CLASSES._TABLE_DATA_ROW_DRAG_INDICATOR_CLASS))t=this._dropRowIndex;else{if(0===(t=this.component._getTableBodyRows().length)){this.component._getTableBody().classList.add(w._CSS_CLASSES._DROP_TARGET_EMPTY)}}return t},w.prototype.handleColumnDragStart=function(e){if(this._isColumnReorderEnabled())return this._dragStartColumnIdxs=this.component._getSelectedHeaderColumnIdxs(),this._setReorderColumnsDataTransfer(e,this._dragStartColumnIdxs),setTimeout(function(){window.getSelection().removeAllRanges()},0),this._dragStartColumnIdxs.forEach(function(e){this._addDragMarkerClass(e)}.bind(this)),!0},w.prototype.handleColumnDragEnd=function(e){this._isColumnReorderEnabled()&&(this._dragStartColumnIdxs=null,this.component._removeDragOverIndicatorColumn(),this._destroyDragImage(),this._removeDragMarkerClass())},w.prototype.handleColumnDragEnter=function(e){if(!this._isColumnReordering()){var t=this._getEventColumnIndex(e);return this._invokeDropCallback("columns","dragEnter",e,{columnIndex:t})}},w.prototype.handleColumnReorderDragOver=function(e){var t=this._getDragOverColumnIndex(e);if(null!=t&&null!=this._dragStartColumnIdxs&&this._dragStartColumnIdxs.length>0){if(-1===this._dragStartColumnIdxs.indexOf(t)&&(this._currentDropColumnBefore=this._isDragOverBeforeColumn(e,t),!(this._currentDropColumnBefore&&this._dragStartColumnIdxs.indexOf(t-1)>-1)&&(this._currentDropColumnBefore||!(this._dragStartColumnIdxs.indexOf(t+1)>-1))))return this.component._displayDragOverIndicatorColumn(t,this._currentDropColumnBefore),void e.preventDefault();this.component._removeDragOverIndicatorColumn()}},w.prototype._getDragOverColumnIndex=function(e){let t=this.component._getTableHeaderColumns();if(e.originalEvent.clientX<t[0].getBoundingClientRect().left)return 0;for(let i=0;i<t.length;i++){let o=t[i].getBoundingClientRect();if(e.originalEvent.clientX>o.left&&e.originalEvent.clientX<=o.right)return i}return null},w.prototype.handleColumnDragOver=function(e){if(!this._isColumnReordering()){var t=this._getEventColumnIndex(e);this._currentDropColumnBefore=this._isDragOverBeforeColumn(e,t);var i=this._invokeDropCallback("columns","dragOver",e,{columnIndex:t});return(!1===i||e.isDefaultPrevented())&&this.component._displayDragOverIndicatorColumn(t,this._isDragOverBeforeColumn(e,t)),i}},w.prototype.handleColumnDragLeave=function(e){if(!this._isColumnReordering()){this.component._removeDragOverIndicatorColumn();var t=this._getEventColumnIndex(e);return this._invokeDndCallback("drop","columns","dragLeave",e,{columnIndex:t})}},w.prototype.handleColumnReorderDrop=function(e){this.component._removeDragOverIndicatorColumn();var t=this._getDragOverColumnIndex(e);null!=t&&(this._currentDropColumnBefore||(t+=1),-1===this._dragStartColumnIdxs.indexOf(t)&&this.component._moveTableHeaderColumn(this._dragStartColumnIdxs,t,e)),e.preventDefault()},w.prototype.handleColumnDrop=function(e){if(!this._isColumnReordering()){this.component._removeDragOverIndicatorColumn();var t=this._getEventColumnIndex(e);return this._currentDropColumnBefore||(t+=1),this._invokeDropCallback("columns","drop",e,{columnIndex:t})}},w.prototype.handleRowDragStart=function(e){var t=this.component.options.dnd.drag;if(t&&t.rows){var i=this._setDragRowsDataTransfer(e,t.rows.dataTypes,this.component._getSelectedRowIdxs());return!!i&&this._invokeDndCallback("drag","rows","dragStart",e,i)}},w.prototype.handleRowDrag=function(e){return this._invokeDndCallback("drag","rows","drag",e)},w.prototype.handleRowDragEnd=function(e){return this._destroyDragImage(),this.component._rowsDragged&&this.component._rowsDragged.length>0&&this.component._rowsDragged.forEach(function(e){e.classList.remove(w._CSS_CLASSES._DRAG_SOURCE_OPAQUE),e.classList.remove("oj-table-row-drag-source-hide"),e.classList.add(I.MARKER_STYLE_CLASSES._SELECTED),this.component._updateRowStateCellsClass(null,e,{selected:!0})}.bind(this)),this.component._removeDragOverIndicatorRow(),this._invokeDndCallback("drag","rows","dragEnd",e)},w.prototype.handleRowDragEnter=function(e){var t=this._getOverRowIndex(e);return this._invokeDropCallback("rows","dragEnter",e,{rowIndex:t})},w.prototype.handleRowDragOver=function(e){var t=this._getOverRowIndex(e),i=this._invokeDropCallback("rows","dragOver",e,{rowIndex:t});return!1===i||e.isDefaultPrevented()?this._updateDragRowsState(e,t):e.currentTarget.classList.contains(w._CSS_CLASSES._DRAG_SOURCE)&&this.component._rowsDragged.forEach(function(e){e.classList.add(w._CSS_CLASSES._DRAG_SOURCE_OPAQUE)}),i},w.prototype.handleRowDragLeave=function(e){var t=this._invokeDndCallback("drop","rows","dragLeave",e,{rowIndex:this._dropRowIndex});this._isDndEventInElement(e,e.currentTarget)||(this.component._getTableBody().classList.remove(w._CSS_CLASSES._DROP_TARGET_EMPTY),this.component._removeDragOverIndicatorRow(),this._dropRowIndex=null);return t},w.prototype.handleRowDrop=function(e){var t=this._dropRowIndex;return this._destroyDragImage(),this.component._getTableBody().classList.remove(w._CSS_CLASSES._DROP_TARGET_EMPTY),this.component._removeDragOverIndicatorRow(),this._dropRowIndex=null,this._invokeDropCallback("rows","drop",e,{rowIndex:t})},w.prototype._invokeDndCallback=function(e,t,i,o,l){var n,s=this.component.options.dnd[e];if(s&&s[t]){var a=s[t][i];if(a&&"function"==typeof a)try{this.component._IsCustomElement()?(a(o.originalEvent,l),o.originalEvent.defaultPrevented&&o.preventDefault()):(o.dataTransfer=o.originalEvent.dataTransfer,n=a(o,l))}catch(e){E.error("Error: "+e)}}return n},w.prototype._invokeDropCallback=function(e,t,i,o){var l=this._invokeDndCallback("drop",e,t,i,o);return void 0===l&&this._matchDragDataType(i,e)&&i.preventDefault(),l},w.prototype._isColumnReorderEnabled=function(){var e=this.component.options.dnd;return e&&e.reorder&&e.reorder.columns===I._OPTION_ENABLED},w.prototype._isColumnReordering=function(){return null!=this._dragStartColumnIdxs},w.prototype._isDndEventInElement=function(e,t){var i=t.getBoundingClientRect(),o=e.originalEvent;return o.clientX>=Math.ceil(i.left)&&o.clientX<Math.floor(i.right)&&o.clientY>=Math.ceil(i.top)&&o.clientY<Math.floor(i.bottom)},w.prototype._isDragOverBeforeColumn=function(e,t){var i=this.component._getTableHeaderColumn(t).getBoundingClientRect();if(null!=e.originalEvent.clientX){var o=i.right-e.originalEvent.clientX<(i.right-i.left)/2;return"rtl"===S.getReadingDirection()?o:!o}return!1},w.prototype._matchDragDataType=function(e,t){var i=e.originalEvent.dataTransfer.types,o=this.component.options.dnd.drop;if(o&&o[t]&&o[t].dataTypes)for(var l=o[t].dataTypes,n="string"==typeof l?[l]:l,s=0;s<i.length;s++)if(n.indexOf(i[s])>=0)return!0;return!1},w.prototype.setElementDraggable=function(e,t){t?(e.setAttribute(I.DOM_ATTR._DRAGGABLE,!0),e.classList.add(I.MARKER_STYLE_CLASSES._DRAGGABLE)):(e.removeAttribute(I.DOM_ATTR._DRAGGABLE),e.classList.remove(I.MARKER_STYLE_CLASSES._DRAGGABLE))},w.prototype._setDragRowsData=function(e,t,i){if(t){var o=e.dataTransfer,l=JSON.stringify(i);if("string"==typeof t)o.setData(t,l);else for(var n=0;n<t.length;n++)o.setData(t[n],l)}},w.prototype._setDragRowsDataTransfer=function(e,t,i){var o=[];this.component._rowsDragged=[];for(var l=0;l<i.length;l++){var n=this.component.getDataForVisibleRow(i[l]);let e=this.component._getTableBodyRow(i[l]);n&&e&&(o.push(n),this.component._rowsDragged.push(e))}return o.length?(this._setDragRowsData(e.originalEvent,t,o),this._destroyDragImage(),this._dragImage=this._setDragRowsImage(e.originalEvent,this.component._getTableContainer()),{rows:o}):null},w.prototype._setDragRowsImage=function(e,t){var i=this._cloneTableContainer(t),o=this.component._getTableElementsByTagName(t,I.DOM_ELEMENT._TBODY)[0],l=Math.max(0,e.offsetX),n=Math.max(0,e.offsetY);return o.classList.add(w._CSS_CLASSES._DRAG_SOURCE),e.dataTransfer.setDragImage(i,l,n),i},w.prototype._setReorderColumnsDataTransfer=function(e,t){var i=e.originalEvent.dataTransfer,o=this.component._hashCode(this.component._getTableUID());i.setData("Text",I._DND_REORDER_TABLE_ID_DATA_KEY+":"+o+":"+t.join("-")),this._dragImage=this.component._createTableHeaderColumnDragImage(t);try{i.setDragImage(this._dragImage,0,0)}catch(e){}},w.prototype._updateDragRowsState=function(e,t){if(this._dropRowIndex!==t){var i=this.component._getFirstAncestor(e.target,I.DOM_ELEMENT._TR,!0);this._dropRowIndex=t;let o=e.currentTarget.classList.contains(w._CSS_CLASSES._DRAG_SOURCE)||e.currentTarget.classList.contains(w._CSS_CLASSES._DROP_TARGET_EMPTY)?"space":"line";this.component._displayDragOverIndicatorRow(this._dropRowIndex,i,o,e.currentTarget.classList.contains(w._CSS_CLASSES._DRAG_SOURCE))}};const N=function(e){this._table=e,this._tableUpdates=new Set};u.Object.createSubclass(N,u.Object,"TableLayoutManager"),N.prototype.getScroller=function(){},N.prototype.getContentElement=function(){},N.prototype.unregisterListeners=function(){this.unregisterScrollListeners()},N.prototype._getSizingState=function(){return null==this._sizingState&&(this._sizingState={outerWidth:null,outerHeight:null,hasHorizontalOverflow:!1,hasVerticalOverflow:!1}),this._sizingState},N.prototype.notifyTableUpdate=function(e){this._tableUpdates.add(e)},N.prototype._getTableUpdates=function(){return this._tableUpdates},N.prototype._clearTableUpdates=function(){this._tableUpdates.clear()},N.prototype.isTableLayoutRefreshRequired=function(){return this._tableUpdates.size>0},N.prototype.isSizingRefreshRequired=function(e,t){if(null!=e&&null!=t){var i=this._getSizingState();return e>0&&t>0&&(e!==i.outerWidth||t!==i.outerHeight&&!this._table._isExternalScrollEnabled())}return this.hasRenderedSize()},N.prototype.hasRenderedSize=function(){var e=this._table._getTableContainer();return e.offsetWidth>0&&e.offsetHeight>0},N.prototype._enableTableVisibility=function(){this._table._clearTableBodyHideTimeout(),this._table._clearTableFooterHideTimeout();var e=this._table._getTableBody();e&&(e.style[I.CSS_PROP._VISIBILITY]="");var t=this._table._getTableFooter();t&&(t.style[I.CSS_PROP._VISIBILITY]="")},N.prototype.refreshTableDimensions=function(){},N.prototype.optimizeInitialColumnWidths=function(){},N.prototype._updateScrollPositionCache=function(){var e=this.getScroller();this._cachedScrollTop=e.scrollTop,this._cachedScrollLeft=this._table._getElementScrollLeft(e)},N.prototype._restoreCachedScrollPos=function(){var e=null!=this._cachedScrollTop&&this._cachedScrollTop>0?this._cachedScrollTop:null,t=null!=this._cachedScrollLeft&&this._cachedScrollLeft>0?this._cachedScrollLeft:null;if(null!=e){var i=this.getScroller().scrollHeight-this.getScroller().clientHeight,o=e>i?i:e;this._table._isLoadMoreOnScroll()&&i===o&&(o-=1),this.getScroller().scrollTop=o}null!=t&&this._restoreScrollLeft(t)},N.prototype._finalizeTableDimensions=function(){this._restoreCachedScrollPos();var e=this._getSizingState(),t=window.getComputedStyle(this._table._getTableContainer());e.outerWidth=this.getExactOffsetWidth(t),e.outerHeight=this.getExactOffsetHeight(t),this._clearTableUpdates(),this._enableTableVisibility(),this.registerScrollListeners()},N.prototype.handleAfterRowsProcessed=function(){},N.prototype._handleScrollerScrollLeft=function(e){this._table._scrollLeft=e},N.prototype._handleScrollerScrollTop=function(e){if(this._table._domScroller||this._table._clearScrollPosBusyState(),this._table._isExternalScrollEnabled()&&!this._table._hasActiveRow()&&null!=this._table._browserAutoScrollInitPos){var t=this._table._browserAutoScrollInitPos;if(this._table._clearBrowserAutoScrollTimeout(),this._table._getCurrentVerticalScrollPosition(e).rowIndex>0&&e>t)return void this._table._scrollRowIntoViewport(0,!0)}e<0&&(e=0),this._table._scrollTop=e,this._table._scrollY=this._table._skipScrollUpdate?e:null,this._table._moveTableBodyRowTouchSelectionAffordanceTop(),this._table._moveTableBodyRowTouchSelectionAffordanceBottom(),this._table._updateScrollBufferHeight()},N.prototype.registerScrollListeners=function(){var e=A.getScrollEventElement(this.getScroller());null!=e&&(null==this._scrollEventListener&&(this._scrollEventListener=function(e){var t=this._table._getElementScrollLeft(e.target),i=e.target.scrollTop;t===this._table._scrollLeft&&i===this._table._scrollTop||(this._handleScrollerScrollLeft(t),this._handleScrollerScrollTop(i),this._table._isScrollPositionAdjusted()||(this._table._skipScrollUpdate||this._ticking||(window.requestAnimationFrame(function(){this._table._isScrollPositionAdjusted()||this._table._skipScrollUpdate||this._table.option("scrollPosition",this._table._getCurrentScrollPosition(),{_context:{originalEvent:e,internalSet:!0}}),this._ticking=!1}.bind(this)),this._ticking=!0),this._table._skipScrollUpdate=!1))}.bind(this)),e.removeEventListener("scroll",this._scrollEventListener),e.addEventListener("scroll",this._scrollEventListener,!1))},N.prototype.updateCurrentScrollState=function(){var e=this.getScroller(),t=this._table._getElementScrollLeft(e),i=e.scrollTop;t===this._table._scrollLeft&&i===this._table._scrollTop||(this._handleScrollerScrollLeft(t),this._handleScrollerScrollTop(i),this._table.option("scrollPosition",this._table._getCurrentScrollPosition(),{_context:{internalSet:!0}}))},N.prototype.unregisterScrollListeners=function(){var e=A.getScrollEventElement(this.getScroller());null!=e&&null!=this._scrollEventListener&&e.removeEventListener("scroll",this._scrollEventListener)},N.prototype._restoreScrollLeft=function(e){S.setScrollLeft(this.getScroller(),e)},N.prototype.getColumnWidthProperty=function(e){var t=window.getComputedStyle(e),i=this._getBoxStyle(t);return parseFloat(t.width)+(i.boxSizing===I.CSS_VAL._BORDER_BOX?-i.borderWidth:i.paddingWidth)},N.prototype.getWidthPropertyFromOffsetWidth=function(e,t){var i=window.getComputedStyle(t);return e-this._getBoxStyle(i).borderWidth},N.prototype.isTableWidthConstrained=function(){return this._getSizingState().hasHorizontalOverflow},N.prototype.isTableHeightConstrained=function(){return this._getSizingState().hasVerticalOverflow},N.prototype.getScrollBarHeight=function(){return this.isTableWidthConstrained()?this._getDefaultScrollBarSize():0},N.prototype.getScrollBarWidth=function(){return this.isTableHeightConstrained()&&!this._isVerticalScrollBarHidden()?this._getDefaultScrollBarSize():0},N.prototype._getBoxStyle=function(e,t){return t?{boxSizing:e[I.CSS_PROP._BOX_SIZING],borderWidth:(parseFloat(e[I.CSS_PROP._BORDER_TOP_WIDTH])||0)+(parseFloat(e[I.CSS_PROP._BORDER_BOTTOM_WIDTH])||0),paddingWidth:(parseFloat(e[I.CSS_PROP._PADDING_TOP])||0)+(parseFloat(e[I.CSS_PROP._PADDING_BOTTOM])||0)}:{boxSizing:e[I.CSS_PROP._BOX_SIZING],borderWidth:(parseFloat(e[I.CSS_PROP._BORDER_RIGHT_WIDTH])||0)+(parseFloat(e[I.CSS_PROP._BORDER_LEFT_WIDTH])||0),paddingWidth:(parseFloat(e[I.CSS_PROP._PADDING_RIGHT])||0)+(parseFloat(e[I.CSS_PROP._PADDING_LEFT])||0)}},N.prototype._applyColumnHeaderHeight=function(e,t){var i=this._table._getTableElementsByClassName(e,I.CSS_CLASSES._COLUMN_HEADER_CLASS);i.length>0&&(i[0].style[I.CSS_PROP._MIN_HEIGHT]=t+I.CSS_VAL._PX)},N.prototype._applyForcedColumnWidth=function(e,t){var i=e;""!==t&&(t+=I.CSS_VAL._PX),i.style[I.CSS_PROP._MIN_WIDTH]=t,i.style[I.CSS_PROP._WIDTH]=t,i.style[I.CSS_PROP._MAX_WIDTH]=t},N.prototype._getForcedColumnWidth=function(e,t,i){var o=this._getBoxStyle(t);return null!=i?i+(o.boxSizing===I.CSS_VAL._BORDER_BOX?o.borderWidth:-o.paddingWidth):parseFloat(t.width)},N.prototype.getMinimumForcedOffsetWidth=function(e){var t=0,i=this._table._getTableHeaderColumn(e);if(null!=i){var o=this._getBoxStyle(window.getComputedStyle(i)),l=o.paddingWidth+o.borderWidth;t<l&&(t=l)}var n=this._table._getTableBodyCell(0,e,null);if(null!=n){var s,a=0;if(this._table._hasRowOrCellRendererOrTemplate(e)){for(var r=this._table._getTableBodyRows(),_=0;_<r.length;_++)if(null!=(n=this._table._getTableBodyCell(_,e,null))){var h=(s=this._getBoxStyle(window.getComputedStyle(n))).paddingWidth+s.borderWidth;a<h&&(a=h)}}else a=(s=this._getBoxStyle(window.getComputedStyle(n))).paddingWidth+s.borderWidth;t<a&&(t=a)}var d=this._table._getTableFooterCell(e);if(null!=d){var u=this._getBoxStyle(window.getComputedStyle(d)),c=u.paddingWidth+u.borderWidth;t<c&&(t=c)}return t},N.prototype._isVerticalScrollBarHidden=function(){return!this._table._isTouchDevice()&&this._table._getTableContainer().classList.contains(I.MARKER_STYLE_CLASSES._HIDE_VERTICAL_SCROLLBAR)},N.prototype.initializeDefaultScrollBarSize=function(e){this._table._defaultScrollBarSize=A.getDefaultScrollBarWidth(e)},N.prototype._getDefaultScrollBarSize=function(){return null==this._table._defaultScrollBarSize&&this.initializeDefaultScrollBarSize(this.getScroller()),this._table._defaultScrollBarSize},N.prototype._clearColumnSizingCache=function(){this._table._columnOffsets=null},N.prototype.getColumnScrollLeft=function(){},N.prototype.getRowScrollTop=function(){},N.prototype.getScrollWidth=function(){return this.getScroller().scrollWidth},N.prototype.getScrollHeight=function(){return this.getScroller().scrollHeight},N.prototype.getClientWidth=function(){return this.getScroller().clientWidth},N.prototype.getClientHeight=function(){return this.getScroller().clientHeight},N.prototype._removeTableDimensionsStyling=function(){this.unregisterScrollListeners();var e=this._table._getTable(),t=this._table._getTableHeader(),i=this._table._getTableHeaderRow(),o=this._table._getTableFooter(),l=this._table._getTableFooterRow(),n=this._table._getTableBody(),s=this._table._getTableBottomSlot(),a=this.getScroller(),r=this._table._getTableContainer();if(r.classList.remove(I.CSS_CLASSES._TABLE_SCROLL_VERTICAL_CLASS),r.classList.remove(I.CSS_CLASSES._TABLE_SCROLL_HORIZONTAL_CLASS),e.removeAttribute(I.DOM_ATTR._STYLE),null!=n&&n.removeAttribute(I.DOM_ATTR._STYLE),null!=t){t.removeAttribute(I.DOM_ATTR._STYLE),i.removeAttribute(I.DOM_ATTR._STYLE);for(var _=this._table._getTableElementsByClassName(i,I.CSS_CLASSES._COLUMN_HEADER_TEXT_CLASS),h=_.length,d=0;d<h;d++)_[d].style[I.CSS_PROP._WIDTH]=""}null!=o&&(o.removeAttribute(I.DOM_ATTR._STYLE),l.removeAttribute(I.DOM_ATTR._STYLE)),null!=s&&s.removeAttribute(I.DOM_ATTR._STYLE),null!=a&&a.removeAttribute(I.DOM_ATTR._STYLE),this._removeHeaderColumnAndCellColumnWidths()},N.prototype._getBottomSlotHeight=function(){var e=this._table._getTableBottomSlot();if(null!=e&&e.clientHeight>0&&e.style[I.CSS_PROP._DISPLAY]!==I.CSS_VAL._NONE){var t=window.getComputedStyle(e);return this.getExactOffsetHeight(t)}return 0},N.prototype._getTableContainerScrollableState=function(e){var t=window.getComputedStyle(this._table._getTableContainer()),i=this.getExactClientHeight(t),o=this.getExactClientWidth(t),l=window.getComputedStyle(this._table._getTable()),n=this.getExactOffsetHeight(l),s=this.getExactOffsetWidth(l),a=[];if(i>0){var r=n+e;r-i>I.SIZING_ERROR_MARGIN?a[0]=1:i-r>I.SIZING_ERROR_MARGIN?a[0]=-1:a[0]=0}else a[0]=0;return o>0?s-o>I.SIZING_ERROR_MARGIN?a[1]=1:o-s>I.SIZING_ERROR_MARGIN?a[1]=-1:a[1]=0:a[1]=0,a},N.prototype._getPixelStyleEquivalent=function(e,t){return"string"==typeof e?""===e?null:"auto"===e?this._getMinWidthAutoEquivalent(t):null!=e.match(/\D/g)&&-1===e.indexOf("px")?(this._table._tableWidthContainer.style.width=e,this._table._tableWidthContainer.offsetWidth+(t?1:0)):parseFloat(e)+(t?1:0):null!=e?e+(t?1:0):null},N.prototype._getMinWidthAutoEquivalent=function(e){return null},N.prototype.handleMouseEnterHeaderCell=function(e){},N.prototype.handleMouseDownHeaderCell=function(e){var t=this._table._getElementColumnIdx(this._table._getEventTargetElement(e)),i=!1;1===e.which?(this._handleHeaderColumnResizeStart(e,!0)||e[I._KEYBOARD_CODES._MODIFIER_SHIFT]||(i=!0),A.isFirefox()&&S.isMetaKeyPressed(e)&&e.preventDefault()):i=!0,i&&(this._table._setActiveHeader(t,e,!0),c(e.target).data(I._FOCUS_CALLED,!0))},N.prototype.handleMouseMoveHeader=function(e){},N.prototype.handleMouseMoveHeaderCell=function(e){},N.prototype.handleMouseUp=function(e){},N.prototype.handleMouseLeaveTable=function(){},N.prototype.handleTouchStartHeaderCell=function(e){1===e.originalEvent.touches.length&&this._table._isTableColumnsResizable()&&this._handleHeaderColumnResizeStart(e)&&e.preventDefault()},N.prototype.handleTouchMoveHeader=function(e){},N.prototype.handleTouchEnd=function(e){},N.prototype.handleTouchCancel=function(){},N.prototype.handleKeyDownEsc=function(){},N.prototype.handleFocusout=function(){},N.prototype.handleRowRefresh=function(e,t,i){this._table._hasEditableRow()&&this._table._getEditableRowIdx()===e?t.classList.add(I.CSS_CLASSES._TABLE_DATA_ROW_EDIT_CLASS):t.classList.remove(I.CSS_CLASSES._TABLE_DATA_ROW_EDIT_CLASS)},N.prototype._handleHeaderColumnResizeStart=function(e,t){},N.prototype.displayDragOverIndicatorColumn=function(e,t){},N.prototype.removeDragOverIndicatorColumn=function(){},N.prototype._getPageX=function(e){return void 0!==e.pageX?e.pageX:void 0!==e.changedTouches?e.changedTouches[0].pageX:0},N.prototype.getExactClientHeight=function(e){var t=this._getBoxStyle(e,!0),i=parseFloat(e[I.CSS_PROP._HEIGHT])-t.borderWidth-t.paddingWidth;return Math.round(1e3*(i+Number.EPSILON))/1e3},N.prototype.getExactClientWidth=function(e){var t=this._getBoxStyle(e),i=parseFloat(e[I.CSS_PROP._WIDTH])-t.borderWidth-t.paddingWidth;return Math.round(1e3*(i+Number.EPSILON))/1e3},N.prototype.getExactOffsetHeight=function(e){var t=parseFloat(e[I.CSS_PROP._HEIGHT]);return Math.round(1e3*(t+Number.EPSILON))/1e3},N.prototype.getExactOffsetWidth=function(e){var t=parseFloat(e[I.CSS_PROP._WIDTH]);return Math.round(1e3*(t+Number.EPSILON))/1e3};const B=function(e){B.superclass.constructor.call(this,e)};u.Object.createSubclass(B,N,"TableLegacyLayoutManager"),B.prototype.handleAfterRowsProcessed=function(e){this._freezeColumnWidths(e)},B.prototype._handleScrollerScrollLeft=function(e){B.superclass._handleScrollerScrollLeft.call(this,e);var t=this._table._getTableHeaderRow();t&&S.setScrollLeft(t.parentNode,e);var i=this._table._getTableFooterRow();i&&S.setScrollLeft(i.parentNode,e)},B.prototype.registerScrollListeners=function(){B.superclass.registerScrollListeners.call(this);var e=function(e){var t=this._table._getElementScrollLeft(e.target);this._table._scrollLeft!==t&&this._table._setScrollX(t)}.bind(this),t=this._table._getTableHeaderRow();if(null!=t){var i=t.parentNode;null==this._headerScrollEventListener&&(this._headerScrollEventListener=e),i.removeEventListener("scroll",this._headerScrollEventListener),i.addEventListener("scroll",this._headerScrollEventListener,!1)}var o=this._table._getTableFooterRow();if(null!=o){var l=o.parentNode;null==this._footerScrollEventListener&&(this._footerScrollEventListener=e),l.removeEventListener("scroll",this._footerScrollEventListener),l.addEventListener("scroll",this._footerScrollEventListener,!1)}},B.prototype.unregisterScrollListeners=function(){B.superclass.unregisterScrollListeners.call(this);var e=this._table._getTableHeaderRow();null!=e&&null!=this._headerScrollEventListener&&e.parentNode.removeEventListener("scroll",this._headerScrollEventListener);var t=this._table._getTableFooterRow();null!=t&&null!=this._footerScrollEventListener&&t.parentNode.removeEventListener("scroll",this._footerScrollEventListener)},B.prototype._restoreScrollLeft=function(e){S.setScrollLeft(this.getScroller(),e);var t=this._table._getTableHeaderRow();t&&S.setScrollLeft(t.parentNode,e);var i=this._table._getTableFooterRow();i&&S.setScrollLeft(i.parentNode,e)},B.prototype.getScroller=function(){return this._table._getTableBody()},B.prototype.getContentElement=function(){return null},B.prototype.getColumnScrollLeft=function(e){if(0===e)return 0;var t=this.getScroller(),i="rtl"===this._table._GetReadingDirection(),o=this._table._getTableHeaderColumn(e);return null!=o?i?t.clientWidth-o.offsetLeft-o.offsetWidth:o.offsetLeft:void 0},B.prototype.getRowScrollTop=function(e){return e.offsetTop},B.prototype.getVerticalOverflowDiff=function(e){var t=this.getScroller(),i=e.getBoundingClientRect(),o=t.getBoundingClientRect();return{top:o.top-i.top+t.clientTop,bottom:i.bottom-o.bottom+(t.offsetHeight-t.clientHeight-t.clientTop)}},B.prototype.getHorizontalOverflowDiff=function(e){var t="rtl"===this._table._GetReadingDirection(),i=this.getScroller(),o=this.getScrollBarWidth(),l=e.getBoundingClientRect(),n=i.getBoundingClientRect(),s={};return t?(s.left=n.left-l.left+o,s.right=l.right-n.right):(s.left=n.left-l.left,s.right=l.right-n.right+o),s},B.prototype._freezeColumnWidths=function(e){var t=this._table._getColumnDefs().length;this._frozenWidthRows||(this._frozenWidthRows=[]);for(var i=[],o=this._table._getTableBodyLegacyWidthBuffer(),l=0;l<t;l++){var n=o.childNodes[l];if(null!=n){var s=parseFloat(n.style[I.CSS_PROP._MIN_WIDTH]);isNaN(s)?i.push(null):i.push(s)}else i.push(null)}for(var a=e.childNodes,r=0;r<a.length;r++)if("TR"===a[r].nodeName){for(var _=a[r],h=this._table._getTableBodyCells(null,_),d=0;d<h.length;d++){var u=i[d];isNaN(u)||this._applyForcedColumnWidth(h[d],u)}this._frozenWidthRows.push(_)}},B.prototype._unfreezeColumnWidths=function(){if(this._frozenWidthRows)for(var e=0;e<this._frozenWidthRows.length;e++)for(var t=this._table._getTableBodyCells(null,this._frozenWidthRows[e]),i=0;i<t.length;i++){var o=t[i];this._applyForcedColumnWidth(o,""),this._table._styleTableBodyCell(i,o)}this._frozenWidthRows=[]},B.prototype._setColumnWidths=function(e){var t,i,o,l,n=[],s=[],a=[],r=[],_=this._table._getColumnDefs().length,h=this._table._getTableBodyLegacyWidthBuffer();for(t=0;t<_;t++)if(!1!==this._forcedWidthColumns[t])n[t]=null,a[t]=null,r[t]=null;else{if(null!=(i=this._table._getTableHeaderColumn(t))){n[t]=this._getForcedColumnWidth(i,window.getComputedStyle(i));var d=this._table._getTableElementsByClassName(i,I.CSS_CLASSES._COLUMN_HEADER_TEXT_CLASS);d.length>0&&(s[t]=d[0].clientHeight)}null!=(o=h.childNodes[t])&&(a[t]=this._getForcedColumnWidth(o,window.getComputedStyle(o))),null!=(l=this._table._getTableFooterCell(t))&&(r[t]=this._getForcedColumnWidth(l,window.getComputedStyle(l)))}for(t=0;t<_;t++)i=this._table._getTableHeaderColumn(t),l=this._table._getTableFooterCell(t),!1!==this._forcedWidthColumns[t]?t===_-1&&!this.isTableWidthConstrained()&&e>0?(null!=i&&(this._applyForcedColumnWidth(i,this._forcedWidthColumns[t]+e),this._applyColumnHeaderHeight(i,s[t])),null!=l&&this._applyForcedColumnWidth(l,this._forcedWidthColumns[t]+e)):this._applyColumnHeaderHeight(i,s[t]):(t===_-1&&!this.isTableWidthConstrained()&&e>0?(null!=i&&(this._applyForcedColumnWidth(i,n[t]+e),this._applyColumnHeaderHeight(i,s[t])),null!=l&&this._applyForcedColumnWidth(l,r[t]+e)):(null!=i&&(this._applyForcedColumnWidth(i,n[t]),this._applyColumnHeaderHeight(i,s[t])),null!=l&&this._applyForcedColumnWidth(l,r[t])),null!=(o=h.childNodes[t])&&this._applyForcedColumnWidth(o,a[t]))},B.prototype._setForcedColumnWidths=function(){var e,t,i,o=this._table._getColumnDefs(),l=o.length,n=this._table._getTableBodyRows();this._forcedWidthColumns=[];for(var s=0;s<l;s++){var a=this._getPixelStyleEquivalent(o[s].width);if(null!=a){var r=null,_=null;if(null!=(e=this._table._getTableHeaderColumn(s))){var h=this._getForcedColumnWidth(e,window.getComputedStyle(e),a);this._applyForcedColumnWidth(e,h),this._forcedWidthColumns[s]=h}else this._forcedWidthColumns[s]=!0;var d=this._table._getTableBodyLegacyWidthBuffer();if(null!=d){var u=d.childNodes[s],c=this._getForcedColumnWidth(u,window.getComputedStyle(u),a);this._applyForcedColumnWidth(u,c)}var S=this._table._getPlaceHolderRow();if(null!=S){var E=this._table._getColspanLogicalElements(this._table._getPlaceHolderRowCells(S))[s];if(null!=E){var C=this._getForcedColumnWidth(E,window.getComputedStyle(E),a);this._applyForcedColumnWidth(E,C)}}this._table._hasRowOrCellRendererOrTemplate(s)||null!=(t=this._table._getTableBodyCell(0,s))&&(r=window.getComputedStyle(t),_=this._getForcedColumnWidth(t,r,a));for(var T=0;T<n.length;T++)if(null!=(t=this._table._getTableBodyLogicalCells(T)[s]))if(null==r){var p=window.getComputedStyle(t),g=this._getForcedColumnWidth(t,p,a);this._applyForcedColumnWidth(t,g)}else this._applyForcedColumnWidth(t,_);null!=(i=this._table._getTableFooterCell(s))&&this._applyForcedColumnWidth(i,this._getForcedColumnWidth(i,window.getComputedStyle(i),a))}else this._forcedWidthColumns[s]=!1}},B.prototype._verifyMinAndMaxWidths=function(){for(var e=this._table._getColumnDefs(),t=e.length,i=this._table._getTableBodyRows().length,o=!0;o;){o=!1;for(var l=0;l<t;l++)if(!1===this._forcedWidthColumns[l]){if(this._applyColMinMax(e,l,i,!0)){o=!0;break}if(this._applyColMinMax(e,l,i,!1)){o=!0;break}}}},B.prototype._applyColMinMax=function(e,t,i,o){var l,n,s,a=0,r=!1,_=null,h=null,d=o?this._getPixelStyleEquivalent(e[t].minWidth):this._getPixelStyleEquivalent(e[t].maxWidth);if(null!=d&&(l=this._table._getTableHeaderColumn(t),n=this._table._getTableBodyLogicalCells(0)[t],s=this._table._getTableFooterCell(t),null!=l?a=l.offsetWidth:null!=n?a=n.offsetWidth:null!=s&&(a=s.offsetWidth),a>0&&(o?a<d:a>d))){if(r=!0,this._forcedWidthColumns[t]=d,null!=l){var u=this._getForcedColumnWidth(l,window.getComputedStyle(l),d);this._applyForcedColumnWidth(l,u)}var c=this._table._getTableBodyLegacyWidthBuffer();if(null!=c){var S=c.childNodes[t],E=this._getForcedColumnWidth(S,window.getComputedStyle(S),d);this._applyForcedColumnWidth(S,E)}var C=this._table._getPlaceHolderRow();if(null!=C){var T=this._table._getColspanLogicalElements(this._table._getPlaceHolderRowCells(C))[t];if(null!=T){var p=this._getForcedColumnWidth(T,window.getComputedStyle(T),d);this._applyForcedColumnWidth(T,p)}}this._table._hasRowOrCellRendererOrTemplate(t)||null==n||(_=window.getComputedStyle(n),h=this._getForcedColumnWidth(n,_,d));for(var g=0;g<i;g++)if(null!=(n=this._table._getTableBodyLogicalCells(g)[t]))if(null==_){var f=window.getComputedStyle(n),A=this._getForcedColumnWidth(n,f,d);this._applyForcedColumnWidth(n,A)}else this._applyForcedColumnWidth(n,h);null!=s&&this._applyForcedColumnWidth(s,this._getForcedColumnWidth(s,window.getComputedStyle(s),d))}return r},B.prototype._isTableColumnsWidthSet=function(){for(var e=this._table._getColumnDefs().length,t=0;t<e;t++)if(!1!==this._forcedWidthColumns[t])return!0;return!1},B.prototype.refreshTableDimensions=function(){var e=this._getSizingState(),t=this._getTableUpdates();if(this._updateScrollPositionCache(),!t.has(I._UPDATE._DATA_REFRESH)&&!t.has(I._UPDATE._DATA_SORT)&&!t.has(I._UPDATE._ATTACHED)&&!t.has(I._UPDATE._SHOWN)&&!t.has(I._UPDATE._RESIZE)&&!t.has(I._UPDATE._REFRESH)&&!t.has(I._UPDATE._COL_RESIZE)&&!t.has(I._UPDATE._COL_REORDER)&&!t.has(I._UPDATE._ROW_REFRESH)&&(!t.has(I._UPDATE._ROWS_ADDED)||e.hasVerticalOverflow)&&(!t.has(I._UPDATE._ROWS_REMOVED)||!e.hasVerticalOverflow))return this._clearTableUpdates(),void this._enableTableVisibility();this._clearColumnSizingCache();var i=this._table._getTable(),o=this._table._getTableContainer(),l=this._table._getTableHeader(),n=this._table._getTableBody(),s=this._table._getTableFooter(),a=this._table._getTableBottomSlot();this._removeTableDimensionsStyling(),this._table._styleTableContainer(o),this._setForcedColumnWidths(),this._verifyMinAndMaxWidths();var r=this._getBottomSlotHeight(),_=this._getTableContainerScrollableState(r);if(e.hasVerticalOverflow=1===_[0],e.hasHorizontalOverflow=1===_[1],null!=n){var h=n.offsetHeight-n.clientHeight;if(e.hasVerticalOverflow||e.hasHorizontalOverflow){var d=o.clientWidth,u=o.clientHeight,c=this._getDefaultScrollBarSize();if(c>0)if(e.hasHorizontalOverflow||this._isVerticalScrollBarHidden()){if(!e.hasVerticalOverflow){var S=this._table._getTableLegacySizer();S.style[I.CSS_PROP._HEIGHT]=c+I.CSS_VAL._PX,o.clientHeight<u+c?(u=o.clientHeight,i.style[I.CSS_PROP._HEIGHT]=u-c-r+I.CSS_VAL._PX,u-c<i.clientHeight+r&&(e.hasVerticalOverflow=!0)):u=o.clientHeight,S.style[I.CSS_PROP._HEIGHT]=""}}else i.style[I.CSS_PROP._WIDTH]=d+c+I.CSS_VAL._PX,o.clientWidth<d+c?(d=o.clientWidth,i.style[I.CSS_PROP._WIDTH]=d-c+I.CSS_VAL._PX,d-c<i.clientWidth&&(e.hasHorizontalOverflow=!0)):(d=o.clientWidth,i.style[I.CSS_PROP._WIDTH]="");e.hasVerticalOverflow&&this._isVerticalScrollBarHidden()&&(n.style[I.CSS_PROP._OVERFLOW_Y]="hidden");var E=this.getScrollBarWidth();this._setColumnWidths(E),e.hasVerticalOverflow&&o.classList.add(I.CSS_CLASSES._TABLE_SCROLL_VERTICAL_CLASS),e.hasHorizontalOverflow&&o.classList.add(I.CSS_CLASSES._TABLE_SCROLL_HORIZONTAL_CLASS),o.classList.add(I.CSS_CLASSES._TABLE_LEGACY_SCROLL_CLASS);var C=0,T=this._table._getTableElementsByTagName(i,"caption");if(T.length>0&&(C=(T=T[0]).offsetHeight,T.style[I.CSS_PROP._DISPLAY]=I.CSS_VAL._INLINE,null!=l)){var p=window.getComputedStyle(o);l.style[I.CSS_PROP._BORDER_TOP]=p[I.CSS_PROP._BORDER_TOP]}n.style[I.CSS_PROP._WIDTH]=d+I.CSS_VAL._PX;var g=0;null!=s&&(g=s.offsetHeight);var f,A=u-(null!=l?l.offsetHeight:0)-g-C-r-h;if(A>0&&(n.style[I.CSS_PROP._HEIGHT]=A+I.CSS_VAL._PX,n.style[I.CSS_PROP._MIN_HEIGHT]=A+I.CSS_VAL._PX),e.hasHorizontalOverflow){if(0===this._table._getTableBodyRows().length){var b=this._table._getTableBodyMessageCell();if(b){var m=b.offsetWidth;null!=l&&(m=Math.max(m,l.offsetWidth)),null!=s&&(m=Math.max(m,s.offsetWidth)),this._applyForcedColumnWidth(b,m)}}f=d-E+I.CSS_VAL._PX}else f=d+I.CSS_VAL._PX;null!=l&&(l.style[I.CSS_PROP._WIDTH]=f),null!=s&&(s.style[I.CSS_PROP._WIDTH]=f)}else this._isTableColumnsWidthSet()&&this._setColumnWidths(0),r>0&&-1===_[0]&&(a.style[I.CSS_PROP._BOTTOM]=0,a.style[I.CSS_PROP._POSITION]=I.CSS_VAL._ABSOLUTE);this._table._isStatusMessageShown()&&this._table._refreshTableStatusPosition(),this._table._refreshTouchAffordanceGlassPanePosition(),this._finalizeTableDimensions()}},B.prototype._removeTableDimensionsStyling=function(){B.superclass._removeTableDimensionsStyling.call(this),this._table._getTableContainer().classList.remove(I.CSS_CLASSES._TABLE_LEGACY_SCROLL_CLASS)},B.prototype._removeHeaderColumnAndCellColumnWidths=function(){var e,t=this._table._getColumnDefs().length;for(e=0;e<t;e++){var i=this._table._getTableHeaderColumn(e);null!=i&&(this._applyForcedColumnWidth(i,""),this._table._styleTableHeaderColumn(e,i))}this._unfreezeColumnWidths();var o=this._table._getTableBodyRows();if(o.length>0)for(e=0;e<t;e++){var l;if(null!=this._forcedWidthColumns&&!1!==this._forcedWidthColumns[e])for(var n=0;n<o.length;n++)null!==(l=this._table._getTableBodyCell(n,e,null))&&(this._applyForcedColumnWidth(l,""),this._table._styleTableBodyCell(e,l));else null!=(l=this._table._getTableBodyLegacyWidthBuffer().childNodes[e])&&this._applyForcedColumnWidth(l,"")}for(e=0;e<t;e++){var s=this._table._getTableFooterCell(e);null!=s&&(this._applyForcedColumnWidth(s,""),this._table._styleTableFooterCell(e,s))}var a=this._table._getTableBodyMessageCell();a&&this._applyForcedColumnWidth(a,"")},B.prototype.handleMouseEnterHeaderCell=function(e){this._setResizeCursor(e)},B.prototype.handleMouseMoveHeader=function(e){this._setResizeCursor(e)},B.prototype.handleMouseMoveHeaderCell=function(e){this._setResizeCursor(e)&&this._table._handleMouseLeaveColumnHeader(this._table._getEventTargetElement(e))},B.prototype.handleMouseUp=function(e){this._handleHeaderColumnResizeEnd(e)},B.prototype.handleMouseLeaveTable=function(){this._clearTableHeaderColumnsResize()},B.prototype.handleTouchMoveHeader=function(e){this._table._isTableColumnsResizable()&&this._setResizeCursor(e)},B.prototype.handleTouchEnd=function(e){this._handleHeaderColumnResizeEnd(e)&&e.preventDefault()},B.prototype.handleTouchCancel=function(){this._clearTableHeaderColumnsResize()},B.prototype.handleKeyDownEsc=function(){this._clearTableHeaderColumnsResize()},B.prototype.handleFocusout=function(){this._clearTableHeaderColumnsResize()},B.prototype._setResizeCursor=function(e){var t=this._table._getEventTargetElement(e),i=this._table._getElementColumnIdx(t);if(null==i)return!1;if(this._table._getColumnDefs()[i].resizable===I._OPTION_DISABLED&&this._resizeStartColumnIdx!==i-1&&this._resizeStartColumnIdx!==i+1)return!1;if(null==this._resizeStartColumnIdx)return null!==this._isHeaderColumnResizeStart(e)?(t.style.cursor=I.CSS_VAL._COL_RESIZE,!0):(t.style.cursor="",!1);if(0===this._table._getTableHeaderColumns().length)return!1;if(i===this._resizeStartColumnIdx||this._resizeColumnStart&&i===this._resizeStartColumnIdx-1||!this._resizeColumnStart&&i===this._resizeStartColumnIdx+1){var o=this._getTableHeaderColumnResizeIndicator();if(null!=o){var l=this.getScroller().getBoundingClientRect();return o.style.left=e.originalEvent.clientX-l.left+"px",!0}}return!1},B.prototype._handleHeaderColumnResizeStart=function(e,t){var i=this._table._getEventTargetElement(e),o=this._table._getElementColumnIdx(i);if(null!=o){var l=this._table._getColumnDefs()[o];if(this._resizeColumnStart=this._isHeaderColumnResizeStart(e),l.resizable===I._OPTION_ENABLED&&null!==this._resizeColumnStart)return this._resizeStartColumnIdx=o,this._resizeStartPageX=this._getPageX(e),this._setTableHeaderColumnsResizeStyling(),this._setTableHeaderColumnResizeIndicator(o),e.preventDefault(),!0}return this._resizeStartColumnIdx=null,this._resizeStartPageX=null,!1},B.prototype._handleHeaderColumnResizeEnd=function(e){var t=this._table.options.columns.length,i=this._table._getEventTargetElement(e),o=this._table._getElementColumnIdx(i);if(null!==o&&o===this._resizeStartColumnIdx||this._resizeColumnStart&&o===this._resizeStartColumnIdx-1||!this._resizeColumnStart&&o===this._resizeStartColumnIdx+1){var l=this._table._getTableHeaderColumn(this._resizeStartColumnIdx);if(null!=l){var n,s=l.getBoundingClientRect().width;if(this._resizeStartColumnIdx===t-1&&this.isTableHeightConstrained()&&(s-=this.getScrollBarWidth()),n="rtl"===this._table._GetReadingDirection()&&this._resizeColumnStart||"ltr"===this._table._GetReadingDirection()&&!this._resizeColumnStart?this._getPageX(e)-this._resizeStartPageX:this._resizeStartPageX-this._getPageX(e),Math.abs(n)>2){var a=s+n,r=this.getMinimumForcedOffsetWidth(this._resizeStartColumnIdx);r>a&&(n+=r-a,a=r);for(var _=[],h=0;h<t;h++)_[h]=c.extend({},{},this._table.options.columns[h]);var d=this._resizeColumnStart?this._resizeStartColumnIdx-1:this._resizeStartColumnIdx+1;d===t-1&&this.isTableHeightConstrained()&&(n+=this.getScrollBarWidth());var u=this._table._getTableHeaderColumn(d);if(u){var S=u.getBoundingClientRect().width-n;(r=this.getMinimumForcedOffsetWidth(d))>S&&(a+=S-r,S=r),_[d].width=this.getWidthPropertyFromOffsetWidth(S,u)}return _[this._resizeStartColumnIdx].width=this.getWidthPropertyFromOffsetWidth(a,l),this._table.option("columns",_,{_context:{writeback:!0,internalSet:!0}}),this._table._clearCachedMetadata(),this._table._queueTask(function(){this.notifyTableUpdate(I._UPDATE._COL_RESIZE),setTimeout(function(){this._clearTableHeaderColumnsResize()}.bind(this),0)}.bind(this)),!0}}}return this._clearTableHeaderColumnsResize(),!1},B.prototype._clearTableHeaderColumnsResize=function(){this._resizeStartColumnIdx=null,this._resizeColumnStart=null,this._resizeStartPageX=null,this._clearTableHeaderColumnsResizeStyling(),this._removeTableHeaderColumnResizeIndicator()},B.prototype._isHeaderColumnResizeStart=function(e){var t=null,i=this._table.options.columns.length,o=this._table._getElementColumnIdx(e.target),l=this._table._getTableHeaderColumn(o);if(null!==l){var n=this._table._GetReadingDirection(),s=l.getBoundingClientRect(),a=Math.abs(e.originalEvent.clientX-s.left),r=Math.abs(e.originalEvent.clientX-s.right);a<=I.RESIZE_OFFSET?"rtl"===n&&o!==i-1?t=!1:"ltr"===n&&0!==o&&(t=!0):r<=I.RESIZE_OFFSET&&("ltr"===n&&o!==i-1?t=!1:"rtl"===n&&0!==o&&(t=!0))}return t},B.prototype._setTableHeaderColumnResizeIndicator=function(e){var t=this._getTableHeaderColumnResizeIndicator();null==t&&(t=this._createTableHeaderColumnResizeIndicator());var i=this._table._getTable().getBoundingClientRect(),o=this.getScroller().getBoundingClientRect(),l=this._table._getTableHeaderColumn(e).getBoundingClientRect();t.style.height=i.height+"px",this._resizeColumnStart?("rtl"===this._table._GetReadingDirection()?t.style.left=l.left+l.width-o.left+"px":t.style.left=l.left-o.left+"px",t.style.borderLeftWidth="2px",t.style.borderRightWidth="0"):("rtl"===this._table._GetReadingDirection()?t.style.left=l.left-o.left+"px":t.style.left=l.left+l.width-o.left+"px",t.style.borderRightWidth="2px",t.style.borderLeftWidth="0")},B.prototype._setTableHeaderColumnsResizeStyling=function(){this._table._getTable().classList.add(I.CSS_CLASSES._COLUMN_HEADER_RESIZING_CLASS)},B.prototype._clearTableHeaderColumnsResizeStyling=function(){for(var e=this._table._getTableHeaderColumns(),t=0;t<e.length;t++)e[t].style.cursor="";this._table._getTable().classList.remove(I.CSS_CLASSES._COLUMN_HEADER_RESIZING_CLASS)},B.prototype._createTableHeaderColumnResizeIndicator=function(){var e=this._getTableHeaderColumnResizeIndicator();if(!e){var t=this._table._getTableContainer();e=document.createElement(I.DOM_ELEMENT._DIV),t.appendChild(e),e.classList.add(I.CSS_CLASSES._COLUMN_HEADER_RESIZE_INDICATOR_CLASS),this._table._cacheDomElement(I.CSS_CLASSES._COLUMN_HEADER_RESIZE_INDICATOR_CLASS,e)}return e},B.prototype._getTableHeaderColumnResizeIndicator=function(){return this._table._getTableElementByClassName(I.CSS_CLASSES._COLUMN_HEADER_RESIZE_INDICATOR_CLASS,!0)},B.prototype._removeTableHeaderColumnResizeIndicator=function(){var e=this._getTableHeaderColumnResizeIndicator();e&&(c(e).remove(),this._table._clearDomCache(I.CSS_CLASSES._COLUMN_HEADER_RESIZE_INDICATOR_CLASS))},B.prototype.displayDragOverIndicatorColumn=function(e,t){this._table._removeDragOverIndicatorColumn();var i=this._table._getTableHeaderRow(),o=this._table._getTableHeaderColumn(e),l=t?I.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_BEFORE_CLASS:I.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_AFTER_CLASS;null!=o?o.classList.add(l):0===this._table._getColumnDefs().length&&i.classList.add(l)},B.prototype.removeDragOverIndicatorColumn=function(){for(var e=this._table._tableQuerySelectorAll(this._table._getTable(),"."+I.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_BEFORE_CLASS+",."+I.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_AFTER_CLASS),t=e.length,i=0;i<t;i++)e[i].classList.remove(I.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_BEFORE_CLASS),e[i].classList.remove(I.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_AFTER_CLASS)};const M=function(e){M.superclass.constructor.call(this,e)};u.Object.createSubclass(M,N,"TableStickyLayoutManager"),M.prototype.unregisterListeners=function(){M.superclass.unregisterListeners.call(this),this._clearMouseResizeListeners()},M.prototype.getScroller=function(){if(null==this._scroller){var e,t=this._table.options.scrollPolicyOptions;null!=t&&null!=(e=t.scroller)&&("string"==typeof e&&null==(e=document.querySelector(e))&&E.error("the css selector string specified in scroller attribute does not resolve to any element"),null==e||e.contains(this._table._getRootElement())||(E.error("the specified scroller must be an ancestor of the component"),e=null)),this._scroller=null!=e?e:this._table._getTableScroller()}return this._scroller},M.prototype._isHTMLScroller=function(){return null!=this._table.options.scrollPolicyOptions&&"html"===this._table.options.scrollPolicyOptions.scroller},M.prototype.getContentElement=function(){return this.getScroller()!==this._table._getTableScroller()?this._table._getTable():null},M.prototype.getColumnScrollLeft=function(e){if(0===e)return 0;var t,i,o=0;if(this._table._isDefaultSelectorEnabled()&&(o+=this._selectorColWidth),this._table._isGutterStartColumnEnabled()){o+=this._table._getTableGutterWidth("start")}var l=this._getFrozenStartColumnIndexes();for(t=0;t<l.length&&(i=l[t])<e;t++)o+=this._getAppliedColumnWidth(i);var n=this.getScroller(),s="rtl"===this._table._GetReadingDirection(),a=this._table._getTableHeaderColumn(e);return null!=a?s?n.clientWidth-o-a.offsetLeft-a.offsetWidth:a.offsetLeft-o:void 0},M.prototype.getRowScrollTop=function(e){var t=e.offsetTop;if(!this._table._isTableHeaderless()){var i=this._table._getTableHeader();null!=i&&(t-=i.offsetHeight)}if(this._table._isAddNewRowEnabled()){var o=this._table._getPlaceHolderRow();null!=o&&(t-=o.offsetHeight)}return t},M.prototype._handleScrollerScrollLeft=function(e){M.superclass._handleScrollerScrollLeft.call(this,e),this._updateFrozenEdges(e,!1),null!=this._dragIndicatorColumnIndex&&this.displayDragOverIndicatorColumn()},M.prototype._handleScrollerScrollTop=function(e){if(M.superclass._handleScrollerScrollTop.call(this,e),this._table._isStickyRowsEnabled())for(var t=this._table._getTableBodyStickyRows(),i=0;i<t.length;i++){var o=t[i];this.getVerticalOverflowDiff(o).top>=0?o.classList.add(I.CSS_CLASSES._TABLE_STUCK_ROW_CLASS):o.classList.remove(I.CSS_CLASSES._TABLE_STUCK_ROW_CLASS)}},M.prototype.getVerticalOverflowDiff=function(e){var t,i,o,l,n=e.getBoundingClientRect();this._table._isExternalScrollEnabled()?(o=null==this._table.options.scrollPolicyOptions.scrollerOffsetTop?0:this._table.options.scrollPolicyOptions.scrollerOffsetTop,l=null==this._table.options.scrollPolicyOptions.scrollerOffsetBottom?0:this._table.options.scrollPolicyOptions.scrollerOffsetBottom):(o=0,l=0);var s=this._table._getTableHeader();null!=s&&(o+=s.offsetHeight);var a=this._table._getPlaceHolderRow();null!=a&&(o+=a.offsetHeight);var r=this._table._getTableFooter();if(null!=r&&(l+=r.offsetHeight),this._table._isStickyRowsEnabled())for(var _=this._table._getTableBodyStickyRows(),h=_.length-1;h>=0;h--){var d=_[h];if(d===e)break;if(d.classList.contains(I.CSS_CLASSES._TABLE_STUCK_ROW_CLASS)){o+=d.offsetHeight;break}}if(this._isHTMLScroller())t=0,i=this.getScroller().clientHeight;else{var u=this.getScrollBarHeight(),c=this.getScroller().getBoundingClientRect();t=c.top,i=c.bottom-u}return{top:t+o-n.top,bottom:n.bottom-i+l}},M.prototype.getHorizontalOverflowDiff=function(e,t){var i,o,l,n,s="rtl"===this._table._GetReadingDirection(),a=this.getScroller(),r=this.getScrollBarWidth(),_=e.getBoundingClientRect(),h=a.getBoundingClientRect();if(this._table._isExternalScrollEnabled()?(l=null==this._table.options.scrollPolicyOptions.scrollerOffsetStart?0:this._table.options.scrollPolicyOptions.scrollerOffsetStart,n=null==this._table.options.scrollPolicyOptions.scrollerOffsetEnd?0:this._table.options.scrollPolicyOptions.scrollerOffsetEnd):(l=0,n=0),this._table._isDefaultSelectorEnabled()&&-1!==t&&(l+=this._selectorColWidth),this._table._isGutterStartColumnEnabled()){l+=this._table._getTableGutterWidth("start")}if(this._table._isGutterEndColumnEnabled()){n+=this._table._getTableGutterWidth("end")}var d=this._getFrozenStartColumnIndexes();for(i=0;i<d.length&&(o=d[i])<t;i++)l+=this._getAppliedColumnWidth(o);var u=this._getFrozenEndColumnIndexes();for(i=u.length-1;i>-1&&(o=u[i])>t;i--)n+=this._getAppliedColumnWidth(o);var c={};return s?(c.left=h.left+n-_.left+r,c.right=_.right-h.right+l):(c.left=h.left+l-_.left,c.right=_.right-h.right+n+r),c},M.prototype._clearAllCache=function(){this._clearColumnSizingCache(),this._columnMinWidths=null,this._columnMaxWidths=null,this._selectorColWidth=null},M.prototype._clearColumnSizingCache=function(){M.superclass._clearColumnSizingCache.call(this),this._appliedColumnWidths=null,this._table._gutterStartWidth=null,this._table._gutterEndWidth=null},M.prototype.refreshTableDimensions=function(){var e=this._table._getTableContainer(),t=this._getSizingState(),i=this._getTableUpdates();if(this._updateScrollPositionCache(),i.has(I._UPDATE._REFRESH))this._clearAllCache();else if(i.has(I._UPDATE._RESIZE)||i.has(I._UPDATE._ATTACHED)||i.has(I._UPDATE._SHOWN))this._clearColumnSizingCache(!0);else{if(!(i.has(I._UPDATE._DATA_REFRESH)||i.has(I._UPDATE._COL_RESIZE)||i.has(I._UPDATE._COL_REORDER)||i.has(I._UPDATE._ROWS_ADDED)&&!t.hasVerticalOverflow||i.has(I._UPDATE._ROWS_REMOVED)&&t.hasVerticalOverflow))return(i.has(I._UPDATE._ROW_REFRESH)||i.has(I._UPDATE._ROWS_REMOVED)||i.has(I._UPDATE._ADD_ROW_DISPLAY))&&(this.unregisterScrollListeners(),this._setupTableHeight(this._table._getTableScroller(),this._getBottomSlotHeight()),this._table._styleTableContainer(e),this._restoreCachedScrollPos(),this.registerScrollListeners()),i.has(I._UPDATE._ROWS_ADDED)||i.has(I._UPDATE._DATA_SORT)||i.has(I._UPDATE._ADD_ROW_DISPLAY)?(this._initializeFrozenColumns(!0),this._table._styleTableContainer(e),this._updateStickyRowTops()):i.has(I._UPDATE._ROW_REFRESH)&&this._updateStickyRowTops(),this._clearTableUpdates(),void this._enableTableVisibility();this._clearColumnSizingCache()}var o=this._table._getTableScroller(),l=this._getBottomSlotHeight(),n=this._table._getTable();if(this._removeTableDimensionsStyling(),A.isSafari()){n.classList.remove(I.CSS_CLASSES._TABLE_ELEMENT_CLASS);n.offsetWidth;n.classList.add(I.CSS_CLASSES._TABLE_ELEMENT_CLASS)}this._table._styleTableContainer(e),this._setupTableHeight(o,l),this._applyColumnWidths(n);var s=this._getTableContainerScrollableState(l);this._setupTableScrollerHeight(o,l);var a=this._getTableContainerScrollableState(l);0===s[0]&&1===a[0]&&this._getDefaultScrollBarSize()>0&&!this._isVerticalScrollBarHidden()&&(this._clearColumnSizingCache(),e.classList.add(I.CSS_CLASSES._TABLE_SCROLL_VERTICAL_CLASS),this._applyColumnWidths(n),this._setupTableScrollerHeight(o,l),a=this._getTableContainerScrollableState(l)),this._initializeFrozenColumns(!0),this._updateStickyRowTops(),1===a[0]?(t.hasVerticalOverflow=!0,e.classList.add(I.CSS_CLASSES._TABLE_SCROLL_VERTICAL_CLASS)):(t.hasVerticalOverflow=!1,e.classList.remove(I.CSS_CLASSES._TABLE_SCROLL_VERTICAL_CLASS)),1===a[1]?(t.hasHorizontalOverflow=!0,e.classList.add(I.CSS_CLASSES._TABLE_SCROLL_HORIZONTAL_CLASS)):(t.hasHorizontalOverflow=!1,e.classList.remove(I.CSS_CLASSES._TABLE_SCROLL_HORIZONTAL_CLASS)),this._table._isStatusMessageShown()&&this._table._refreshTableStatusPosition(),this._finalizeTableDimensions()},M.prototype._updateStickyRowTops=function(){var e,t=this._table._getTableHeaderRow(),i=null==this._table.options.scrollPolicyOptions.scrollerOffsetTop?0:this._table.options.scrollPolicyOptions.scrollerOffsetTop,o=null!=t?t.offsetHeight+i:i,l=this._table._getPlaceHolderRowCells(),n=l.length;if(n>0)for(e=0;e<n;e++)l[e].style[I.CSS_PROP._TOP]=o+"px";if(this._table._isStickyRowsEnabled()){var s,a,r=2,_=this._table._getPlaceHolderRow();null!=_&&(o+=_.offsetHeight);var h=this._table._getTableBodyRows();for(e=0;e<h.length;e++){var d=!1,u=h[e],c=this._table._getTableElementsByTagName(u,I.DOM_ELEMENT._TD);u.classList.contains(I.CSS_CLASSES._TABLE_STICKY_ROW_CLASS)&&(d=!0);for(var S=0;S<c.length;S++)s=c[S],d&&(s.style[I.CSS_PROP._TOP]=o+"px"),a=s.classList.contains(I.CSS_CLASSES._TABLE_FROZEN_START)?1:s.classList.contains(I.CSS_CLASSES._TABLE_FROZEN_END)?2:0,s.style[I.CSS_PROP._ZINDEX]=d?3*(r+1)+a:3*(r-2)+a;d&&(r+=2)}}},M.prototype._initializeColumnLayouts=function(){var e=!1;return this._table._isDefaultSelectorEnabled()?null==this._selectorColWidth&&(e=!0,this._selectorColWidth=this._getPixelStyleEquivalent("2.75rem")):null!=this._selectorColWidth&&(e=!0,this._selectorColWidth=null),e},M.prototype._enforceWeightedMinRules=function(e,t,i,o,l,n){var s=t,a=i;const r=[];let _=!0;for(;_;){_=!1;let t=s,i=e-a;if(i>0)for(let e=0;e<this._table._getColumnDefs().length;e++)if(t>0&&null==o[e]&&null==r[e]){const o=l[e],h=o/t*i,d=this._appliedColumnWidths[e];if(h<d){r[e]=d,n[e]=d,a+=d,_=!0,s-=o;break}n[e]=h,i-=h,t-=o}}},M.prototype._setupTableHeight=function(e,t){this._setupTableScrollerHeight(e,t);var i=this._table._getTableBottomSlot();null!=i&&(this._table._isTableStretchEnabled()?(i.style[I.CSS_PROP._BOTTOM]=0,i.style[I.CSS_PROP._POSITION]=I.CSS_VAL._ABSOLUTE):(i.style[I.CSS_PROP._BOTTOM]="",i.style[I.CSS_PROP._POSITION]=""))},M.prototype._setupTableScrollerHeight=function(e,t){e.removeAttribute(I.DOM_ATTR._STYLE);var i=window.getComputedStyle(this._table._getTableContainer()),o=this.getExactClientHeight(i)-t,l=window.getComputedStyle(e),n=this.getExactOffsetHeight(l);Math.abs(n-o)>I.SIZING_ERROR_MARGIN&&(e.style[I.CSS_PROP._HEIGHT]=o+I.CSS_VAL._PX)},M.prototype._removeHeaderColumnAndCellColumnWidths=function(){for(var e=this._table._getTableCols(),t=0;t<e.length;t++){var i=e[t];i.style[I.CSS_PROP._WIDTH]="",i.style[I.CSS_PROP._DISPLAY]=""}this._appliedColumnWidths=null},M.prototype._applyColumnWidths=function(){this._initializeColumnLayouts()},M.prototype._setAllColumnWidths=function(){},M.prototype._getAppliedColumnWidth=function(e){return null!=this._appliedColumnWidths&&this._appliedColumnWidths.length>e?this._appliedColumnWidths[e]:0},M.prototype._initializeFrozenColumns=function(e,t){if(e||this.hasRenderedSize()){var i,o,l,n;this._table._isExternalScrollEnabled()?(l=null==this._table.options.scrollPolicyOptions.scrollerOffsetStart?0:this._table.options.scrollPolicyOptions.scrollerOffsetStart,n=null==this._table.options.scrollPolicyOptions.scrollerOffsetEnd?0:this._table.options.scrollPolicyOptions.scrollerOffsetEnd):(l=0,n=0);var s=!1;if(this._table._isGutterStartColumnEnabled()){this._applyFrozenOffset(-1,l,!0,t),l+=this._table._getTableGutterWidth("start"),s=!0}if(this._table._isGutterEndColumnEnabled()&&null!=this._appliedColumnWidths){this._applyFrozenOffset(this._appliedColumnWidths.length,n,!1,t),n+=this._table._getTableGutterWidth("end")}this._table._isDefaultSelectorEnabled()&&(this._applyFrozenOffset(-1,l,!0,t),l+=this._selectorColWidth,s=!0);var a=this._getFrozenStartColumnIndexes();if(a.length>0)for(s=!0,i=0;i<a.length;i++)o=a[i],this._applyFrozenOffset(o,l,!0,t),l+=this._getAppliedColumnWidth(o);var r=this._getFrozenEndColumnIndexes();if(r.length>0)for(s=!0,i=r.length-1;i>-1;i--)o=r[i],this._applyFrozenOffset(o,n,!1,t),n+=this._getAppliedColumnWidth(o);s&&this._updateFrozenEdges(this._scrollLeft,!0,t)}},M.prototype._getFrozenStartColumnIndexes=function(){for(var e=[],t=this._table._getColumnDefs(),i=0;i<t.length;i++)t[i].frozenEdge===I._OPTION_FROZEN_EDGE._START&&e.push(i);return e},M.prototype._getFrozenEndColumnIndexes=function(){for(var e=[],t=this._table._getColumnDefs(),i=0;i<t.length;i++)t[i].frozenEdge===I._OPTION_FROZEN_EDGE._END&&e.push(i);return e},M.prototype._applyFrozenOffset=function(e,t,i,o){var l,n,s="rtl"===this._table._GetReadingDirection();n=i&&!s||!i&&s?I.CSS_PROP._LEFT:I.CSS_PROP._RIGHT;var a=t+I.CSS_VAL._PX;if(null!=o){let t;if(-1===e){if(this._table._isGutterStartColumnEnabled()&&(t=this._table._getTableGutterCell("body","start",o)),this._table._isDefaultSelectorEnabled())if(o.classList.contains(I.CSS_CLASSES._TABLE_ADD_ROW_PLACEHOLDER_CLASS)){let e=this._table._isGutterStartColumnEnabled()?1:0;t=this._table._getPlaceHolderRowCells(o)[e]}else t=this._table._getTableBodySelectorCell(o)}else t=o.classList.contains(I.CSS_CLASSES._TABLE_ADD_ROW_PLACEHOLDER_CLASS)?this._table._getPlaceHolderRowCell(e):this._table._getTableBodyCell(null,e,o);return void(null!=t&&(t.style[n]=a))}const r=this._table._getTableBodyRows(),_=this._table._getPlaceHolderRow(),h=this._table.options.columns.length;if(-1===e&&!this._table._isDefaultSelectorEnabled()||e===h){const t=-1===e?"start":"end",i=this._table._getTableGutterCell("header",t);if(null!=i&&(i.style[n]=a),null!=_){const e=this._table._getTableGutterCell("body",t,_);null!=e&&(e.style[n]=a)}for(l=0;l<r.length;l++){const e=this._table._getTableGutterCell("body",t,r[l]);null!=e&&(e.style[n]=a)}const o=this._table._getTableGutterCell("footer",t);null!=o&&(o.style[n]=a)}else if(-1===e){var d=this._table._getTableSelectorColumn();if(null!=d&&(d.style[n]=a),null!=_){const e=this._table._isGutterStartColumnEnabled()?1:0,t=this._table._getPlaceHolderRowCells(_)[e];null!=t&&(t.style[n]=a)}for(l=0;l<r.length;l++){var u=this._table._getTableBodyRow(l),c=this._table._getTableBodySelectorCell(u);null!=c&&(c.style[n]=a)}var S=this._table._getTableFooterSelectorCell();null!=S&&(S.style[n]=a)}else{var E=this._table._getTableHeaderColumn(e);if(null!=E&&(E.style[n]=a),null!=_){var C=this._table._getPlaceHolderRowCell(e);null!=C&&(C.style[n]=a)}for(l=0;l<r.length;l++){var T=this._table._getTableBodyCell(l,e);null!=T&&(T.style[n]=a)}var p=this._table._getTableFooterCell(e);null!=p&&(p.style[n]=a)}},M.prototype._updateFrozenEdges=function(e,t,i){var o,l,n,s,a=this._table._getCurrentHorizontalScrollPosition(e);if(0===a.x)n=null;else{var r=a.columnIndex;n=this._table._isDefaultSelectorEnabled()||this._table._isGutterStartColumnEnabled()?-1:null;var _=this._getFrozenStartColumnIndexes();for(o=0;o<_.length&&((l=_[o])<r&&this._getAppliedColumnWidth(l)>0);o++)n=l}this._updateFrozenEdge(n,!0,t,i);var h=this.getScroller(),d=h.scrollWidth-h.clientWidth-a.x;if(d<1)s=null;else if(null!=this._appliedColumnWidths){this._table._isGutterEndColumnEnabled()&&(s=this._appliedColumnWidths.length);var u=0,c=this._getFrozenEndColumnIndexes();for(o=this._appliedColumnWidths.length-1;o>-1;o--)if(-1!==c.indexOf(o)&&this._getAppliedColumnWidth(o)>0)s=o;else if((u+=this._getAppliedColumnWidth(o))>d)break}this._updateFrozenEdge(s,!1,t,i)},M.prototype._updateFrozenEdge=function(e,t,i,o){var l=!1;t?this._frozenStartIndex!==e&&(null!=this._frozenStartIndex&&this._applyFrozenEdge(this._frozenStartIndex,!1,o),null!=e&&(this._applyFrozenEdge(e,!0,o),l=!0),this._frozenStartIndex=e):this._frozenEndIndex!==e&&(null!=this._frozenEndIndex&&this._applyFrozenEdge(this._frozenEndIndex,!1,o),null!=e&&(this._applyFrozenEdge(e,!0,o),l=!0),this._frozenEndIndex=e),i&&!l&&this._applyFrozenEdge(e,!0,o)},M.prototype._applyFrozenEdge=function(e,t,i){let o;const l=t?"add":"remove",n=this._table.options.columns.length;if(null!=i){let t;if(-1===e){if(this._table._isGutterStartColumnEnabled()&&(t=this._table._getTableGutterCell("body","start",i)),this._table._isDefaultSelectorEnabled())if(i.classList.contains(I.CSS_CLASSES._TABLE_ADD_ROW_PLACEHOLDER_CLASS)){let e=this._table._isGutterStartColumnEnabled()?1:0;t=this._table._getPlaceHolderRowCells(i)[e]}else t=this._table._getTableBodySelectorCell(i)}else t=e===n?this._table._getTableGutterCell("body","end",i):i.classList.contains(I.CSS_CLASSES._TABLE_ADD_ROW_PLACEHOLDER_CLASS)?this._table._getPlaceHolderRowCell(e):this._table._getTableBodyCell(null,e,i);return void(null!=t&&t.classList[l](I.CSS_CLASSES._TABLE_FROZEN_EDGE))}const s=this._table._getTableBodyRows(),a=this._table._getPlaceHolderRow();if(-1===e&&!this._table._isDefaultSelectorEnabled()||e===n){const t=-1===e?"start":"end",i=this._table._getTableGutterCell("header",t);if(null!=i&&i.classList[l](I.CSS_CLASSES._TABLE_FROZEN_EDGE),null!=a){const e=this._table._getTableGutterCell("body",t,a);null!=e&&e.classList[l](I.CSS_CLASSES._TABLE_FROZEN_EDGE)}for(o=0;o<s.length;o++){const e=this._table._getTableGutterCell("body",t,s[o]);null!=e&&e.classList[l](I.CSS_CLASSES._TABLE_FROZEN_EDGE)}const n=this._table._getTableGutterCell("footer",t);null!=n&&n.classList[l](I.CSS_CLASSES._TABLE_FROZEN_EDGE)}else if(-1===e){var r=this._table._getTableSelectorColumn();if(null!=r&&r.classList[l](I.CSS_CLASSES._TABLE_FROZEN_EDGE),null!=a){let e=this._table._isGutterStartColumnEnabled()?1:0;var _=this._table._getPlaceHolderRowCells(a)[e];null!=_&&_.classList[l](I.CSS_CLASSES._TABLE_FROZEN_EDGE)}for(o=0;o<s.length;o++){var h=this._table._getTableBodyRow(o),d=this._table._getTableBodySelectorCell(h);null!=d&&d.classList[l](I.CSS_CLASSES._TABLE_FROZEN_EDGE)}var u=this._table._getTableFooterSelectorCell();null!=u&&u.classList[l](I.CSS_CLASSES._TABLE_FROZEN_EDGE)}else{var c=this._table._getTableHeaderColumn(e);if(null!=c&&c.classList[l](I.CSS_CLASSES._TABLE_FROZEN_EDGE),null!=a){var S=this._table._getPlaceHolderRowCell(e);null!=S&&S.classList[l](I.CSS_CLASSES._TABLE_FROZEN_EDGE)}for(o=0;o<s.length;o++){var E=this._table._getTableBodyCell(o,e);null!=E&&E.classList[l](I.CSS_CLASSES._TABLE_FROZEN_EDGE)}var C=this._table._getTableFooterCell(e);null!=C&&C.classList[l](I.CSS_CLASSES._TABLE_FROZEN_EDGE)}},M.prototype.handleMouseMoveHeaderCell=function(e){this._isColumnResizing||this._setResizeCursor(e)},M.prototype._setResizeCursor=function(e){var t=this._table._getEventTargetElement(e),i=this._table._getElementColumnIdx(t);if(null!=i){if(this._table._getColumnDefs()[i].resizable===I._OPTION_DISABLED||null==this._appliedColumnWidths)return this._cursor=null,void(t.style.cursor="");var o=!1,l=this._table._getTableHeaderColumn(i);if(null!==l){var n=this._table._GetReadingDirection(),s=this._table.options.columns.length,a=l.getBoundingClientRect(),r=Math.abs(e.originalEvent.clientX-a.left),_=Math.abs(e.originalEvent.clientX-a.right);r<=I.RESIZE_OFFSET?"rtl"===n&&i!==s-1?(o=!0,this._resizeStartIndex=i,this._resizeEndIndex=i+1):"ltr"===n&&0!==i&&(o=!0,this._resizeStartIndex=i-1,this._resizeEndIndex=i):_<=I.RESIZE_OFFSET&&("ltr"===n&&i!==s-1?(o=!0,this._resizeStartIndex=i,this._resizeEndIndex=i+1):"rtl"===n&&0!==i&&(o=!0,this._resizeStartIndex=i-1,this._resizeEndIndex=i))}o?(this._cursor="col-resize",t.style.cursor=I.CSS_VAL._COL_RESIZE):(this._cursor=null,t.style.cursor="")}},M.prototype._handleHeaderColumnResizeStart=function(e,t){return(!t||null==this._resizeStartIndex&&null==this._resizeEndIndex)&&this._setResizeCursor(e),"col-resize"===this._cursor?(this._isColumnResizing=!0,this._resizeStartPageX=this._getPageX(e),this._minimumStartColWidth=this.getMinimumForcedOffsetWidth(this._resizeStartIndex),this._minimumEndColWidth=this.getMinimumForcedOffsetWidth(this._resizeEndIndex),this._setResizeIndicator(),e.preventDefault(),t&&this._setupMouseResizeListeners(),this._table._queueTask(function(){return this._isColumnResizing?new Promise(function(e){this._finishResize=e}.bind(this)):Promise.resolve()}.bind(this)),!0):(this._resizeStartPageX=null,!1)},M.prototype._setupMouseResizeListeners=function(){this._clearMouseResizeListeners(),this._docMouseMoveListener=this._handleResizeMouseMove.bind(this),this._docMouseUpListener=this._handleResizeMouseUp.bind(this),document.addEventListener("mousemove",this._docMouseMoveListener,!1),document.addEventListener("mouseup",this._docMouseUpListener,!1)},M.prototype._clearMouseResizeListeners=function(){null!=this._docMouseMoveListener&&(document.removeEventListener("mousemove",this._docMouseMoveListener,!1),this._docMouseMoveListener=null),null!=this._docMouseUpListener&&(document.removeEventListener("mouseup",this._docMouseUpListener,!1),this._docMouseUpListener=null)},M.prototype._handleResizeMouseMove=function(e){e&&0===e.buttons?this._handleResizeMouseUp(e):this._updateResizeColumnWidths(e)},M.prototype._handleResizeMouseUp=function(e){this._removeResizeIndicator(),this._updateResizeColumnWidths(e,!0),this._cleanupColumnResizing()},M.prototype._cleanupColumnResizing=function(){this._clearMouseResizeListeners(),this._resizeStartIndex=null,this._resizeEndIndex=null,this._isColumnResizing=null,this._resizeStartPageX=null,this._minimumStartColWidth=null,this._minimumEndColWidth=null,null!=this._finishResize&&(this._finishResize(),this._finishResize=null)},M.prototype.handleTouchMoveHeader=function(e){this._isColumnResizing&&this._updateResizeColumnWidths(e)},M.prototype.handleTouchEnd=function(e){this._isColumnResizing&&(e.preventDefault(),this._removeResizeIndicator(),this._updateResizeColumnWidths(e,!0),this._cleanupColumnResizing())},M.prototype._updateResizeColumnWidths=function(e,t){var i,o,l,n=this._table._GetReadingDirection(),s=this._getAppliedColumnWidth(this._resizeStartIndex),a=this._getAppliedColumnWidth(this._resizeEndIndex),r=this._getPageX(e)-this._resizeStartPageX;"ltr"===n?(i=s+r,o=a-r):(i=s-r,o=a+r),this._minimumStartColWidth>i?(l=this._minimumStartColWidth-i,i=this._minimumStartColWidth,o-=l):this._minimumEndColWidth>o&&(l=this._minimumEndColWidth-o,o=this._minimumEndColWidth,i-=l);var _=this._table._getTableCol(this._resizeStartIndex),h=this._table._getTableCol(this._resizeEndIndex);if(_.style[I.CSS_PROP._WIDTH]=i+I.CSS_VAL._PX,h.style[I.CSS_PROP._WIDTH]=o+I.CSS_VAL._PX,this._updateStickyRowTops(),t){for(var d=this._table.options.columns.length,u=[],c=0;c<d;c++)u[c]=Object.assign({},{},this._table.options.columns[c]);var S=this._table._getTableHeaderColumn(this._resizeStartIndex);u[this._resizeStartIndex].width=this.getWidthPropertyFromOffsetWidth(i,S);var E=this._table._getTableHeaderColumn(this._resizeEndIndex);u[this._resizeEndIndex].width=this.getWidthPropertyFromOffsetWidth(o,E),this._table.option("columns",u,{_context:{writeback:!0,internalSet:!0}}),this._table._clearCachedMetadata(),this.notifyTableUpdate(I._UPDATE._COL_RESIZE),null!=this._finishResize&&(this._finishResize(),this._finishResize=null)}},M.prototype._setResizeIndicator=function(){var e=this._table._getPlaceHolderRowCell(this._resizeEndIndex);null!=e&&e.classList.add(I.CSS_CLASSES._COLUMN_RESIZE_INDICATOR_CLASS);var t=this._table._getTableHeaderColumn(this._resizeEndIndex);null!=t&&t.classList.add(I.CSS_CLASSES._COLUMN_RESIZE_INDICATOR_CLASS),this._table._getVisibleRowIdxs().forEach(function(e){var t=this._table._getTableBodyCell(e,this._resizeEndIndex);null!=t&&t.classList.add(I.CSS_CLASSES._COLUMN_RESIZE_INDICATOR_CLASS)}.bind(this));var i=this._table._getTableFooterCell(this._resizeEndIndex);null!=i&&i.classList.add(I.CSS_CLASSES._COLUMN_RESIZE_INDICATOR_CLASS)},M.prototype._removeResizeIndicator=function(){var e=this._table._getTableContainer();this._table._getTableElementsByClassName(e,I.CSS_CLASSES._COLUMN_RESIZE_INDICATOR_CLASS).forEach(function(e){e.classList.remove(I.CSS_CLASSES._COLUMN_RESIZE_INDICATOR_CLASS)})},M.prototype.handleRowRefresh=function(e,t,i){M.superclass.handleRowRefresh.call(this,e,t),i&&this._initializeFrozenColumns(!1,t)},M.prototype.displayDragOverIndicatorColumn=function(e,t){if(null==e||this._dragIndicatorColumnIndex!==e||this._dragIndicatorIsStart!==t){this._dragIndicatorColumnIndex=null!=e?e:this._dragIndicatorColumnIndex,this._dragIndicatorIsStart=null!=t?t:this._dragIndicatorIsStart;var i=this._getTableColumnDropIndicator();null==i&&(i=this._createTableColumnDropIndicator());var o=this.getScroller().getBoundingClientRect(),l=this._table._getTableHeaderColumn(this._dragIndicatorColumnIndex).getBoundingClientRect();this._dragIndicatorIsStart?"rtl"===this._table._GetReadingDirection()?i.style.left=l.left+l.width-o.left+"px":i.style.left=l.left-o.left+"px":"rtl"===this._table._GetReadingDirection()?i.style.left=l.left-o.left+"px":i.style.left=l.left+l.width-o.left+"px",i.style.height=o.height+"px"}},M.prototype.removeDragOverIndicatorColumn=function(){var e=this._getTableColumnDropIndicator();e&&(c(e).remove(),this._table._clearDomCache(I.CSS_CLASSES._COLUMN_DROP_INDICATOR_CLASS)),this._dragIndicatorColumnIndex=null,this._dragIndicatorIsStart=null},M.prototype._createTableColumnDropIndicator=function(){var e=this._getTableColumnDropIndicator();if(!e){var t=this._table._getTableContainer();(e=document.createElement(I.DOM_ELEMENT._DIV)).classList.add(I.CSS_CLASSES._COLUMN_DROP_INDICATOR_CLASS),t.appendChild(e),this._table._cacheDomElement(I.CSS_CLASSES._COLUMN_DROP_INDICATOR_CLASS,e)}return e},M.prototype._getTableColumnDropIndicator=function(){return this._table._getTableElementByClassName(I.CSS_CLASSES._COLUMN_DROP_INDICATOR_CLASS,!0)};const P=function(e){P.superclass.constructor.call(this,e)};u.Object.createSubclass(P,M,"TableContentsLayoutManager"),P.prototype._clearAllCache=function(){P.superclass._clearAllCache.call(this),this._columnPreferredWidths=null,this._columnSampledMinWidths=null},P.prototype._clearColumnSizingCache=function(e){P.superclass._clearColumnSizingCache.call(this,e),e&&(this._columnSampledMinWidths=null,this._columnPreferredWidths=null)},P.prototype._removeTableDimensionsStyling=function(){if(P.superclass._removeTableDimensionsStyling.call(this),null==this._columnPreferredWidths||null==this._columnSampledMinWidths){this._removeHeaderWrapperClass();var e=this._table._getTable();e.style[I.CSS_PROP._WIDTH]=1+I.CSS_VAL._PX,Math.abs(this._table._getTableContainer().clientWidth-e.offsetWidth)<=1?e.style[I.CSS_PROP._WIDTH]="":this._isExternalSizing=!0}},P.prototype._initializeColumnLayouts=function(){var e,t,i,o=P.superclass._initializeColumnLayouts.call(this),l=this._table._getColumnDefs(),n=l.length;if(null==this._columnMinWidths||null==this._columnMaxWidths)for(o=!0,this._columnMinWidths=[],this._columnMaxWidths=[],e=0;e<n;e++){var s=this._table._isVerticalGridEnabled()&&(e>0||this._table._isDefaultSelectorEnabled()),a=this._getPixelStyleEquivalent(l[e].minWidth,s);this._columnMinWidths[e]=null==a||a<=0?null:a;var r=this._getPixelStyleEquivalent(l[e].maxWidth,s);null!=r&&r<this._columnMinWidths[e]!=null&&this._columnMinWidths[e]?this._columnMaxWidths[e]=null:this._columnMaxWidths[e]=r}if(null==this._columnPreferredWidths||null==this._columnSampledMinWidths){for(o=!0,this._columnPreferredWidths=[],this._columnSampledMinWidths=[],e=0;e<n;e++){var _;null!=(t=this._table._getTableHeaderColumn(e))?_=t.getBoundingClientRect().width:null!=(i=this._table._getTableBodyCell(0,e,null))&&(_=i.getBoundingClientRect().width),null!=this._columnMinWidths[e]&&this._columnMinWidths[e]>_?this._columnPreferredWidths[e]=this._columnMinWidths[e]:this._columnPreferredWidths[e]=_}for(this._applyHeaderWrapperClass(),e=0;e<n;e++)null!=(t=this._table._getTableHeaderColumn(e))?this._columnSampledMinWidths[e]=t.getBoundingClientRect().width:null!=(i=this._table._getTableBodyCell(0,e,null))&&(this._columnSampledMinWidths[e]=i.getBoundingClientRect().width)}return o},P.prototype._applyColumnWidths=function(){P.superclass._applyColumnWidths.call(this);var e=this._table._getTable(),t=this._table._getTableScroller(),i=this._isExternalSizing?t.clientWidth:void 0,o=this._setAllColumnWidths(i);if(o>0&&(e.style[I.CSS_PROP._WIDTH]=o+I.CSS_VAL._PX,e.style["table-layout"]="fixed",!0!==this._isExternalSizing)){var l=t.clientWidth;l-o>1&&(o=this._setAllColumnWidths(l))>0&&(e.style[I.CSS_PROP._WIDTH]=o+I.CSS_VAL._PX)}return o},P.prototype._setAllColumnWidths=function(e){var t,i=this._table._getColumnDefs(),o=i.length,l=0,n=0,s=0,a=0,r=0,_=[],h=[];this._appliedColumnWidths=[];var d=null!=this._selectorColWidth?this._selectorColWidth:0;if(this._table._isGutterStartColumnEnabled()){d+=this._table._getTableGutterWidth("start")}if(this._table._isGutterEndColumnEnabled()){d+=this._table._getTableGutterWidth("end")}var u=!1;for(t=0;t<o;t++){var c=this._columnSampledMinWidths[t];if(c>0){var S=this._table._isVerticalGridEnabled()&&(t>0||this._table._isDefaultSelectorEnabled()),E=this._getPixelStyleEquivalent(i[t].width,S);if(null!=E)_[t]=E,a+=E,r+=E,l+=E,h[t]=E,this._appliedColumnWidths[t]=E;else{var C;u=!0,_[t]=void 0;var T=this._columnMinWidths[t],p=this._columnMaxWidths[t];r+=C=null!=T&&T>=c?T:null!=p&&c>=p?p:c,l+=null!=p&&p<=this._columnPreferredWidths[t]?p:this._columnPreferredWidths[t],n+=this._columnPreferredWidths[t],s+=this._columnPreferredWidths[t]-C,h[t]=C,this._appliedColumnWidths[t]=C}}else h[t]=0,this._appliedColumnWidths[t]=0,_[t]=0}if(u){var g=null!=e?e-d:l;r<g&&this._enforceMinMaxRules(g,l,s,n,r,a,_,h)}for(t=0;t<o;t++){var f=h[t],A=this._table._getTableCol(t);null!=A&&(A.style[I.CSS_PROP._WIDTH]=f+I.CSS_VAL._PX,0===f&&(A.style[I.CSS_PROP._DISPLAY]=I.CSS_VAL._NONE)),d+=f,this._appliedColumnWidths[t]=f}return d},P.prototype._enforceMinMaxRules=function(e,t,i,o,l,n,s,a){for(var r=n,_=o,h=l,d=!0;d;){d=!1,t>e?this._enforceConstrainedWeightRules(e-h,i,s,a):this._enforceWeightedMinRules(e,_,r,s,this._columnPreferredWidths,a);for(var u=0,c=0;c<this._table._getColumnDefs().length;c++){if(null==s[c]){var S=this._columnMaxWidths[c];null!=S&&a[c]>S&&(d=!0,s[c]=S,r+=S,h+=S-this._appliedColumnWidths[c],_-=this._columnPreferredWidths[c],a[c]=S,this._appliedColumnWidths[c]=S)}u+=a[c]}d=d&&u<e}},P.prototype._enforceConstrainedWeightRules=function(e,t,i,o){if(e>0){let l=e,n=t;for(let e=0;e<this._table._getColumnDefs().length;e++)if(n>0&&null==i[e]){const t=this._columnPreferredWidths[e]-this._appliedColumnWidths[e],i=t/n*l;o[e]=i+this._appliedColumnWidths[e],l-=i,n-=t}}},P.prototype._applyHeaderWrapperClass=function(){var e=this._table._getTableHeaderColumns();for(let t=0;t<e.length;t++)e[t].classList.add(I.CSS_CLASSES._TABLE_HEADER_WRAP_TEXT_CLASS);this._table._getTable().classList.remove(I.CSS_CLASSES._TABLE_DISABLE_WRAPPING_CLASS)},P.prototype._removeHeaderWrapperClass=function(){var e=this._table._getTableHeaderColumns();for(let t=0;t<e.length;t++)e[t].classList.remove(I.CSS_CLASSES._TABLE_HEADER_WRAP_TEXT_CLASS);this._table._getTable().classList.add(I.CSS_CLASSES._TABLE_DISABLE_WRAPPING_CLASS)};const x=function(e){x.superclass.constructor.call(this,e)};u.Object.createSubclass(x,M,"TableFixedLayoutManager"),x.prototype._clearAllCache=function(){x.superclass._clearAllCache.call(this),this._columnWeights=null,this._columnSampledMinWidths=null},x.prototype._clearColumnSizingCache=function(e){x.superclass._clearColumnSizingCache.call(this,e),e&&(this._columnSampledMinWidths=null)},x.prototype.optimizeInitialColumnWidths=function(){var e=this._table._getTableContainer();this._clearAllCache();var t=this._table._getTable();if(this._removeTableDimensionsStyling(),A.isSafari()){t.classList.remove(I.CSS_CLASSES._TABLE_ELEMENT_CLASS);t.offsetWidth;t.classList.add(I.CSS_CLASSES._TABLE_ELEMENT_CLASS)}this._table._styleTableContainer(e),this._applyColumnWidths(t)},x.prototype._removeTableDimensionsStyling=function(){this.unregisterScrollListeners()},x.prototype._initializeColumnLayouts=function(){var e,t=x.superclass._initializeColumnLayouts.call(this),i=this._table._getColumnDefs(),o=i.length;if(null==this._columnMinWidths||null==this._columnMaxWidths||null==this._columnWeights)for(t=!0,this._columnMinWidths=[],this._columnMaxWidths=[],this._columnWeights=[],e=0;e<o;e++){var l=this._table._isVerticalGridEnabled()&&(e>0||this._table._isDefaultSelectorEnabled()),n=this._getPixelStyleEquivalent(i[e].minWidth,l);this._columnMinWidths[e]=null==n||n<=0?1:n;var s=this._getPixelStyleEquivalent(i[e].maxWidth,l);null!=s&&s<this._columnMinWidths[e]?this._columnMaxWidths[e]=null:this._columnMaxWidths[e]=s;var a=parseFloat(i[e].weight);a<=1&&(a=1),this._columnWeights[e]=a}if(null==this._columnSampledMinWidths)for(t=!0,this._resetTableElementStyling(),this._columnSampledMinWidths=[],e=0;e<o;e++){var r=this._table._getTableHeaderColumn(e);if(null!=r)this._columnSampledMinWidths[e]=r.getBoundingClientRect().width;else{var _=this._table._getTableBodyCell(0,e,null);null!=_&&(this._columnSampledMinWidths[e]=_.getBoundingClientRect().width)}}else t&&this._resetTableElementStyling();return t},x.prototype._resetTableElementStyling=function(){this._table._getTable().style="",this._removeHeaderColumnAndCellColumnWidths()},x.prototype._applyColumnWidths=function(){x.superclass._applyColumnWidths.call(this);var e=this._table._getTable(),t=this._table._getTableScroller().clientWidth,i=this._setAllColumnWidths(t);i>0&&(e.style[I.CSS_PROP._WIDTH]=i+I.CSS_VAL._PX,e.style["table-layout"]="fixed")},x.prototype._setAllColumnWidths=function(e){var t=0,i=this._table._getColumnDefs(),o=i.length,l=0,n=0,s=0,a=[],r=[];this._appliedColumnWidths=[];var _=null!=this._selectorColWidth?this._selectorColWidth:0;if(this._table._isGutterStartColumnEnabled()){_+=this._table._getTableGutterWidth("start")}if(this._table._isGutterEndColumnEnabled()){_+=this._table._getTableGutterWidth("end")}var h=!1;for(t=0;t<o;t++)if(this._columnSampledMinWidths[t]>0){var d=this._table._isVerticalGridEnabled()&&(t>0||this._table._isDefaultSelectorEnabled()),u=this._getPixelStyleEquivalent(i[t].width,d);if(null!=u)n+=u,s+=u,a[t]=u,r[t]=u,this._appliedColumnWidths[t]=u;else{h=!0;var c=this._columnMinWidths[t];s+=c,a[t]=void 0,l+=this._columnWeights[t],r[t]=c,this._appliedColumnWidths[t]=c}}else r[t]=0,this._appliedColumnWidths[t]=0,a[t]=0;if(h){var S=e-_;s<S&&this._enforceMinMaxRules(S,l,n,a,r)}for(t=0;t<o;t++){var E=r[t],C=this._table._getTableCol(t);null!=C&&(C.style[I.CSS_PROP._WIDTH]=E+I.CSS_VAL._PX,0===E&&(C.style[I.CSS_PROP._DISPLAY]=I.CSS_VAL._NONE)),this._appliedColumnWidths[t]=E,_+=E}return _},x.prototype._enforceMinMaxRules=function(e,t,i,o,l){for(var n=i,s=t,a=!0;a;){a=!1,this._enforceWeightedMinRules(e,s,n,o,this._columnWeights,l);for(var r=0,_=0;_<this._table._getColumnDefs().length;_++){if(null==o[_]){const e=this._columnMaxWidths[_];null!=e&&l[_]>e&&(a=!0,o[_]=e,n+=e,s-=this._columnWeights[_],l[_]=e,this._appliedColumnWidths[_]=e)}r+=l[_]}a=a&&r<e}},x.prototype._getMinWidthAutoEquivalent=function(e){return 100+(e?1:0)},I.prototype._createContextInfo=function(){var e=document.createElement(I.DOM_ELEMENT._DIV);if(e.id=this.createSubId("context"),e.classList.add(I.CSS_CLASSES._TABLE_ACC_CONTEXT_INFO_CLASS),e.classList.add(I.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),!A.isIos()){var t=document.createElement(I.DOM_ELEMENT._DIV);t.id=this.createSubId("tableContext"),t.classList.add(I.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),e.appendChild(t);var i=document.createElement(I.DOM_ELEMENT._DIV);i.id=this.createSubId("rowContext"),i.classList.add(I.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),e.appendChild(i);var o=document.createElement(I.DOM_ELEMENT._DIV);o.id=this.createSubId("columnContext"),o.classList.add(I.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),e.appendChild(o);var l=document.createElement(I.DOM_ELEMENT._DIV);l.id=this.createSubId("selectorContext"),l.classList.add(I.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),l.textContent=this.getTranslatedString(I._BUNDLE_KEY._LABEL_SELECT_ROW),e.appendChild(l),this._tableContextInfo=t,this._rowContextInfo=i,this._columnContextInfo=o,this._selectorContextInfo=l}return this._getTableContainer().appendChild(e),e},I.prototype._createStateInfo=function(){var e=document.createElement(I.DOM_ELEMENT._DIV);return e.id=this.createSubId("state"),e.classList.add(I.CSS_CLASSES._TABLE_ACC_STATE_INFO_CLASS),e.classList.add(I.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),this._getTableContainer().appendChild(e),this._stateInfo=e,e},I.prototype._createRowStateInfo=function(){var e=document.createElement(I.DOM_ELEMENT._DIV);return e.id=this.createSubId("rowState"),e.classList.add(I.CSS_CLASSES._TABLE_ACC_ROW_STATE_INFO_CLASS),e.classList.add(I.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),this._getTableContainer().appendChild(e),this._rowStateInfo=e,e},I.prototype._createTableStatusAccNotification=function(){var e=this._getTableContainer(),t=document.createElement(I.DOM_ELEMENT._DIV);return t.setAttribute(I.DOM_ATTR._ROLE,"status"),t.classList.add(I.CSS_CLASSES._TABLE_STATUS_ACC_NOTIFICATION_CLASS),t.classList.add(I.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),e.appendChild(t),this._cacheDomElement(I.CSS_CLASSES._TABLE_STATUS_ACC_NOTIFICATION_CLASS,t),this._accStatus=t,t},I.prototype._setAccessibleContext=function(e){var t="";null!=e&&(t=e.context+" "+e.state),this._accRowContext=t},I.prototype._getAccessibleContext=function(){return this._accRowContext},I.prototype._clearAccessibleContext=function(){this._accRowContext=null},I.prototype._updateAccStatusInfo=function(e){var t,i,o="",l="";if(null!=this._active&&this._hasFocus()&&!A.isIos()){if(!1!==this._accFirstFocus){var n=this._getColumnDefs().length;this._isDefaultSelectorEnabled()&&(n+=1);var s,a=this._getTableBodyRows().length;s=0===a?"accessibleSummaryExact":"accessibleSummaryEstimate";var r=this.getTranslatedString(s,{colnum:n,rownum:a});this._isTableEditMode()&&(r+=" "+this.getTranslatedString("accessibleEditableSummary")),this._tableContextInfo.textContent=r,o+=this._tableContextInfo.id+" "+this._getTableContainer().id+" "}var _=this._getActiveType(),h=this._active.index;if(_===I.ACTIVE_ELEMENT_TYPES._HEADER){if(this._accRowIndex=null,this._accColumnIndex=null,this._columnContextInfo.textContent=this.getTranslatedString("accessibleColumnHeaderContext",{index:this._isDefaultSelectorEnabled()?h+2:h+1}),o+=this._columnContextInfo.id+" ",-1===h){if(null==(i=this._getTableSelectorColumn()))return}else{var d=!1;if(null==(i=this._getTableHeaderColumn(h)))return;var u=this._getSelectedHeaderColumnIdxs();for(t=0;t<u.length;t++)if(u[t]===h){l+=this.getTranslatedString("accessibleStateSelected")+" ",d=!0;break}!d&&this._isColumnSelectionEnabled()&&(l+=this.getTranslatedString("accessibleStateUnselected")+" ");var S=this._getColumnDefs()[h],E=c(i).data("sorted");null!=E?E===I._COLUMN_SORT_ORDER._ASCENDING?l+=this.getTranslatedString("accessibleSortAscending",{id:""})+" ":l+=this.getTranslatedString("accessibleSortDescending",{id:""})+" ":null!=S&&S.sortable===I._OPTION_ENABLED&&(l+=this.getTranslatedString("accessibleSortable",{id:""})+" ")}A.getActionableElementsInNode(i).length>0&&(l+=this.getTranslatedString("accessibleContainsControls")),o+=i.id+" "}else if(_===I.ACTIVE_ELEMENT_TYPES._FOOTER){var C;if(this._accRowIndex=null,this._accColumnIndex=null,this._columnContextInfo.textContent=this.getTranslatedString("accessibleColumnFooterContext",{index:this._isDefaultSelectorEnabled()?h+2:h+1}),o+=this._columnContextInfo.id+" ",-1===h){if(null==(C=this._getTableFooterSelectorCell()))return}else{var T=!1;if(null==(C=this._getTableFooterCell(h)))return;var p=this._getSelectedFooterColumnIdxs();for(t=0;t<p.length;t++)if(p[t]===h){l+=this.getTranslatedString("accessibleStateSelected")+" ",T=!0;break}!T&&this._isColumnSelectionEnabled()&&(l+=this.getTranslatedString("accessibleStateUnselected")+" ")}A.getActionableElementsInNode(C).length>0&&(l+=this.getTranslatedString("accessibleContainsControls")),null!=(i=this._getTableHeaderColumn(h))&&(o+=i.id+" "),o+=C.id+" "}else if(_===I.ACTIVE_ELEMENT_TYPES._DATA_ROW){var g,f=null!=e?e:this._accColumnIndex;null==f&&(f=0);var b=this._getTableBodyRow(h);if(null==b)return;if(null==(g=-1===f?this._getTableBodySelectorCell(b):this._getTableBodyLogicalCells(null,b)[f]))return;if(h!==this._accRowIndex||!1!==this._accFirstFocus){var m=this._isAddNewRowEnabled()?2:1;this._rowContextInfo.textContent=this.getTranslatedString("accessibleRowContext",{index:h+m});var L="",R=!1;null!=this._accRowContext&&(L+=this._accRowContext+" ");var y=this._getSelectedRowIdxs();for(t=0;t<y.length;t++)if(y[t]===h){L+=this.getTranslatedString("accessibleStateSelected")+" ",R=!0;break}!R&&this._isRowSelectionEnabled()&&b[I._DATA_OJ_SELECTABLE]!==I._CONST_OFF&&(L+=this.getTranslatedString("accessibleStateUnselected")+" "),A.getActionableElementsInNode(b).length>0&&(L+=this.getTranslatedString("accessibleContainsControls")+" "),this._rowStateInfo.textContent=L,o+=this._rowContextInfo.id+(-1===f?" ":" "+this._getRowHeaderIds(b,g)+" ")+this._rowStateInfo.id+" "}if(f===this._accColumnIndex&&!1===this._accFirstFocus||(this._columnContextInfo.textContent=this.getTranslatedString("accessibleColumnContext",{index:this._isDefaultSelectorEnabled()?f+2:f+1}),o+=this._columnContextInfo.id+" "),-1===f)o+=this._getAccSelectorString(b)+" ";else{null!=(i=this._getTableHeaderColumn(f))&&(o+=i.id+" "+g.id+" ");var O=g.colSpan;O>1&&(l+=this.getTranslatedString("accessibleColumnsSpan",{count:O}))}this._accRowIndex=h,this._accColumnIndex=f}else if(_===I.ACTIVE_ELEMENT_TYPES._NO_DATA){this._accRowIndex=null,this._accColumnIndex=null,o+=this._getNoDataId()+" ";var v=this._getActiveElement();A.getActionableElementsInNode(v).length>0&&(l+=this.getTranslatedString("accessibleContainsControls"))}else if(_===I.ACTIVE_ELEMENT_TYPES._ADD_ROW){this._accRowIndex=null,this._accColumnIndex=null,this._rowContextInfo.textContent=this.getTranslatedString("accessibleRowContext",{index:1}),this._rowStateInfo.textContent=this.getTranslatedString("accessibleAddRow");var D=this._getActiveElement();A.getActionableElementsInNode(D).length>0&&(l+=this.getTranslatedString("accessibleContainsControls")),o+=this._rowContextInfo.id+" "+this._rowStateInfo.id+" "}this._stateInfo.textContent=l,o+=this._stateInfo.id,this._applyAccStatusLabel(o)}},I.prototype._announceAccSelectionUpdate=function(e){var t;t=e?this.getTranslatedString("accessibleStateSelected"):this.getTranslatedString("accessibleStateUnselected"),this._stateInfo.textContent=t,this._applyAccStatusLabel(this._stateInfo.id)},I.prototype._getAccSelectorString=function(e){return this._selectorContextInfo.id+" "+this._getRowHeaderIds(e)},I.prototype._clearAccStatusInfo=function(){this._getTable().setAttribute(I.DOM_ATTR._ARIA_LABELLEDBY,"")},I.prototype._applyAccStatusLabel=function(e){!1!==this._accFirstFocus?this._accFirstFocus=!1:this._accActionFocus&&(this._accActionFocus=!1),this._getTable().setAttribute(I.DOM_ATTR._ARIA_LABELLEDBY,e)},I.prototype._getRowHeaderIds=function(e,t){var i,o="",l=this.options.accessibility;if(null!=l&&null!=l.rowHeader){var n=l.rowHeader;Array.isArray(n)||(n=[n]);for(var s=this._getColumnDefs(),a=0;a<n.length;a++)for(var r=n[a],_=0;_<s.length;_++)if(r===s[_].id){null!=(i=this._getTableBodyLogicalCells(null,e)[_])&&i!==t&&(o+=i.id+" ");break}}else null!=(i=this._getTableBodyCell(null,0,e))&&i!==t&&(o+=i.id+" ");return o},I.prototype._getVoiceOverCellLabelledby=function(e,t){var i="",o=this._getTableHeaderColumn(t);return null!=o&&(i+=o.id+" "),i+=e.id+" "},I.prototype._getNoDataId=function(){var e=this._getTableBodyMessageRow();if(null!=e)return e.id;var t=this._getTableNoDataRow();return null!=t?t.id:""},I.prototype._cleanAccStatus=function(){this._accFirstFocus=!0,this._accActionFocus=!1,this._getTable().removeAttribute(I.DOM_ATTR._ARIA_LABELLEDBY)},I.prototype._getData=function(){if(!this._data&&null!=this.options.data){var e=this.options.data;if(u.TableDataSource&&e instanceof u.TableDataSource||this._isPagingModelTableDataSource())this._data=new u.TableDataSourceAdapter(e);else{if(!u.DataProviderFeatureChecker.isDataProvider(e)){var t=I._LOGGER_MSG._ERR_DATA_INVALID_TYPE_SUMMARY,i=I._LOGGER_MSG._ERR_DATA_INVALID_TYPE_DETAIL;throw new Error(t+"\n"+i)}e instanceof h||u.DataProviderFeatureChecker.isTreeDataProvider(e)?this._data=e:this._data=new h(e)}this._dataOption=this.options.data,this._registerDataSourceEventListeners()}return this._data},I.prototype._isPagingModelTableDataSource=function(){return!!(u.PagingTableDataSource&&this.options.data instanceof u.PagingTableDataSource)},I.prototype._registerDataSourceEventListeners=function(){var e=this._getData();if(null!=e){this._unregisterDataSourceEventListeners(),this._dataProviderEventHandlers=[],this._dataProviderEventHandlers.push({eventType:"mutate",eventHandler:this._handleDataRowMutate.bind(this)}),this._dataProviderEventHandlers.push({eventType:"refresh",eventHandler:this._handleDataRefresh.bind(this)});for(var t=this._dataProviderEventHandlers.length,i=0;i<t;i++){var o=e.addEventListener(this._dataProviderEventHandlers[i].eventType,this._dataProviderEventHandlers[i].eventHandler);o&&(this._dataProviderEventHandlers[i].eventHandler=o)}}},I.prototype._unregisterDataSourceEventListeners=function(){var e=this._getData();if(null!=this._dataProviderEventHandlers&&null!=e)for(var t=this._dataProviderEventHandlers.length,i=0;i<t;i++)e.removeEventListener(this._dataProviderEventHandlers[i].eventType,this._dataProviderEventHandlers[i].eventHandler)},I.prototype._handleDataRefresh=function(e){try{if(this._hasRefreshInQueue)return;if(this._dataFetching)return this._controller&&this._controller.abort(),this._pendingFetchStale=!0,void(this._pendingFetchOptions=null);e.detail&&void 0!==e.detail.disregardAfterKey?this._queueTask(function(){this._getLayoutManager().notifyTableUpdate(I._UPDATE._ROWS_REMOVED),this._clearActiveRow(null,!0),this._removeRowsAfterLastValidRow(e.detail.disregardAfterKey),this._hasMoreToFetch()||this._registerDomScroller(),this._animateOnFetch=!0}.bind(this)):(this._hasRefreshInQueue=!0,this._queueTask(function(){return this._getLayoutManager().notifyTableUpdate(I._UPDATE._DATA_REFRESH),this._clearActiveRow(null,!0),this._beforeDataRefresh(),this._invokeDataFetchRows()}.bind(this)))}catch(e){E.error(e)}},I.prototype._beforeDataRefresh=function(e){this._clearIdleCallback(),this._adjustScrollPositionOnFetch(e),this._invalidateRangeSelection(),null!=this._lastSelectedRowIdxArray&&(this._lastSelectedRowIdxArray=[]),this._hasEditableRow()&&this._setTableEditable(!1,!0),this._initialSelectionStateValidated=!1},I.prototype._removeRowsAfterLastValidRow=function(e){this._getCurrentScrollPosition().y>0&&this._bufferScrollerForLastRow(e);var t=this._getRowIdxForRowKey(e);if(t>=0){this._hasEditableRow()&&this._getEditableRowIdx()>t&&this._setTableEditable(!1,!0);for(var i=this._getTableBodyRows().length-1;i>t;i--)this._removeTableBodyRow(i)}},I.prototype._bufferScrollerForLastRow=function(e){var t=this._getLayoutManager();if(null!=e){var i=this._getRowIdxForRowKey(e);if(null!=i){var o=this._getTableBodyRow(i),l=t.getVerticalOverflowDiff(o).bottom;l<0&&(this._createTableBodyScrollBuffer().style[I.CSS_PROP._HEIGHT]=Math.abs(l)+1+I.CSS_VAL._PX)}}else this._createTableBodyScrollBuffer().style[I.CSS_PROP._HEIGHT]=this._getTableBody().offsetHeight+I.CSS_VAL._PX},I.prototype._handleDataRowMutate=function(e){if(this._dataFetching)return this._controller&&this._controller.abort(),void(this._pendingFetchStale=!0);null!=e.detail.remove&&this._handleDataRowRemove(e.detail.remove,e.detail.add),null!=e.detail.add&&this._handleDataRowAdd(e.detail.add),null!=e.detail.update&&this._handleDataRowChange(e.detail.update)},I.prototype._handleDataRowRemove=function(e,t){try{this._executeTableBodyRowsRemove(e,t)}catch(e){E.error(e)}finally{this._clearDataWaitingState()}},I.prototype._executeTableBodyRowsRemove=function(e,t){var i=this,o=e[I._CONST_KEYS];o&&o.size>0&&this._queueTask(function(){var o=i._getRowsFromEventDetailRemove(e);if(0!==o.length){i._getLayoutManager().notifyTableUpdate(I._UPDATE._ROWS_REMOVED),o.sort(function(e,t){return t.rowIdx-e.rowIdx});var l,n,s,a=[],r=[],_=[],h=o.length,d=!1,u=i._getTableBodyRows();if(u.length>0){for(s=0;s<u.length;s++)a.push(s);for(s=0;s<h;s++){n=o[s].rowIdx,r.push(n);for(var c=0;c<a.length;c++)if(a[c]===n){l=i._getTableBodyRow(n),_.push(l),a.splice(c,1);break}}0===a.length&&(d=!0)}var S=i._getTableBody(),E=S.contains(document.activeElement),C=!1;if(d)E&&(C=!0),i._clearSelectionState();else for(s=0;s<h;s++)if(n=o[s].rowIdx,l=i._getTableBodyRow(n),E&&null!=l&&l.contains(document.activeElement)){C=!0;break}if(i._hasEditableRow()){var T=i._getEditableRowKey();A.containsKey([...e[I._CONST_KEYS]],T)&&i._setTableEditable(!1,!0)}return d?(i._removeAllTableBodyRows(),f()):new Promise(function(e){return i._IsCustomElement()?i._animateVisibleRows(_,r,"remove").then(function(){return p(),f().then(function(){e(!0)})}):(p(),f().then(function(){e(!0)}))})}function p(){var e,t;if(i._getCurrentScrollPosition().y>0){var l,n,s,a,r=0,_=[];for(e=0;e<h;e++)t=o[e].rowIdx,null!=(l=i._getTableBodyRow(t))&&(r+=l.offsetHeight,_.push(l));if(i._isStickyRowsEnabled())for(e=(a=i._getTableBodyStickyRows()).length-1;e>=0;e--)if((s=a[e]).classList.contains(I.CSS_CLASSES._TABLE_STUCK_ROW_CLASS)){n=s;break}for(i._createTableBodyScrollBuffer().style[I.CSS_PROP._HEIGHT]=r+I.CSS_VAL._PX,e=0;e<_.length;e++)if(l=_[e],i._removeTableBodyRow(null,l),null!=n){var d=a.indexOf(l);-1!==d&&a.splice(d,1)}if(null!=n)for(e=a.length-1;e>=0;e--)if(s=a[e],i._getLayoutManager().getVerticalOverflowDiff(s).top>0){n!==s&&i._scrollRowIntoViewport(null,!0,n);break}}else for(e=0;e<h;e++)t=o[e].rowIdx,i._removeTableBodyRow(t)}function g(){i._syncActiveElement(),C&&i._getTable().focus()}function f(){return!0!==e.transient&&i._updateSelectionStateFromEventDetailRemove(e,t),i._refreshTableFooter(),0===(u=i._getTableBodyRows()).length?(i._showNoDataMessage(),i._finalizeNonBodyRowRendering([S]).then(function(){g()})):Promise.resolve().then(function(){g()})}i._updateSelectionStateFromEventDetailRemove(e,t)})},I.prototype._getRowsFromEventDetailRemove=function(e){var t=[];return e[I._CONST_KEYS].forEach(function(e){var i=this._getRowIdxForRowKey(e);if(void 0!==i){var o={key:e,index:i};t.push({row:o,rowIdx:i})}}.bind(this)),t},I.prototype._handleDataRowAdd=function(e){try{this._executeTableBodyRowsAdd(e)}catch(e){E.error(e)}finally{this._clearDataWaitingState()}},I.prototype._executeTableBodyRowsAdd=function(e){var t=e[I._CONST_KEYS];t&&t.size>0&&this._queueTask(function(){var t=this._getRowsFromEventDetailAdd(e);if(0!==t.length){this._getLayoutManager().notifyTableUpdate(I._UPDATE._ROWS_ADDED);var i,o,l=!0,n=[],s=[],a=[],r=[],_=this._getTableBody(),h=t.length;for(i=0;i<h;i++)i>0&&t[i-1].rowIdx!==t[i].rowIdx-1&&(l=!1),s.push(t[i].rowIdx);if(l){for(o=document.createDocumentFragment(),i=0;i<h;i++)n.push(this._renderRow(t[i],o,t[0].rowIdx));a.push(o),r.push(t[0].rowIdx)}else for(i=0;i<h;i++){var d=t[i].rowIdx;o=document.createDocumentFragment(),n.push(this._renderRow(t[i],o,d)),a.push(o),r.push(d)}return this._refreshTableFooter().then(function(){return Promise.all(n).then(function(e){for(this._hideNoDataMessage(),i=0;i<a.length;i++)this._handleRowAdds(_,a[i],r[i]),this._clearCachedDomRowData();0===this._scrollTop&&(1===t.length&&0===t[0].rowIdx||-1!==s.indexOf(0))&&delete(null==this.options.scrollPosition?{}:this.options.scrollPosition).rowKey;return this._requiresDomScrollerRefresh&&this._registerDomScroller(),this._IsCustomElement()?this._animateVisibleRows(e,s,"add").then(function(){return this._syncActiveElement(),this._afterRowsRendered(_)}.bind(this)):(this._syncActiveElement(),this._afterRowsRendered(_))}.bind(this))}.bind(this),function(e){return Promise.reject(e)})}this._requiresDomScrollerRefresh&&this._registerDomScroller()}.bind(this))},I.prototype._getRowsFromEventDetailAdd=function(e){var t=[],i=this._getData(),o=!this._isLoadMoreOnScroll()||A.isIterateAfterDoneNotAllowed(i)&&!this._hasMoreToFetch(),l=this._getLocalRowKeys(),n=l.length;if(!o&&0===n)return this._notifyAddOutOfViewport(),t;var s=A.getAddEventKeysResult(l,e,o),a=e[I._CONST_DATA],r=e[I._CONST_METADATA],_=[];e[I._CONST_KEYS].forEach(function(e){_.push(e)}),a instanceof Array||(a=[a]);var h=a.length;r instanceof Array||(r=[r]);var d,c=0;this._isPagingModelDataProvider()&&(c=i.getStartItemIndex()),i instanceof u.TableDataSourceAdapter&&(u.FlattenedTreeTableDataSource&&i.tableDataSource instanceof u.FlattenedTreeTableDataSource?d=i.tableDataSource:this._isPagingModelTableDataSource()&&u.FlattenedTreeTableDataSource&&i.tableDataSource.dataSource instanceof u.FlattenedTreeTableDataSource&&(d=i.tableDataSource.dataSource)),o||n+h===s.length||this._notifyAddOutOfViewport();for(var S=0;S<h;S++){var E=_[S],C=s.indexOf(E);if(-1!==C&&-1===l.indexOf(E)){var T;T=d&&d._getMetadata?d._getMetadata(C):r[S];var p={data:a[S],metadata:T,key:E,index:C+c};t.push({row:p,rowIdx:C})}}return t},I.prototype._handleRowAdds=function(e,t,i){this._getLayoutManager().handleAfterRowsProcessed(t);var o=this._getTableBodyRow(i);null!=o?e.insertBefore(t,o):this._appendElementToTableBody(t,e)},I.prototype._notifyAddOutOfViewport=function(){this._noMoreData&&(this._animateOnFetch=!0,this._requiresDomScrollerRefresh=!0),this._noMoreData=!1},I.prototype._handleDataRowChange=function(e){try{this._executeTableBodyRowsChange(e)}catch(e){E.error(e)}finally{this._clearDataWaitingState()}},I.prototype._executeTableBodyRowsChange=function(e){this._queueTask(function(){var t;this._updateSelectionStateFromEventDetailChange(e);var i=this._getRowsFromEventDetailChange(e);if(0!==i.length){this._getLayoutManager().notifyTableUpdate(I._UPDATE._ROW_REFRESH);var o=i.length,l=[],n=!1,s=[];for(t=0;t<o;t++){var a=i[t],r=this._getTableBodyRow(a.rowIdx);null!=r&&r!==document.activeElement&&r.contains(document.activeElement)&&(n=!0),r&&this._setTableBodyRowAttributes(i[t].row,r),s.push(this._refreshTableBodyRow(a.rowIdx,a.row,null,null,null,!0)),l.push(a.rowIdx)}return this._refreshTableFooter().then(function(){return Promise.all(s).then(function(e){return n&&this._getTable().focus(),this._IsCustomElement()?this._animateVisibleRows(e,l,"update").then(function(){return this._finalizeBodyRowRendering(e)}.bind(this)):this._finalizeBodyRowRendering(e)}.bind(this))}.bind(this),function(e){return Promise.reject(e)})}}.bind(this))},I.prototype._getRowsFromEventDetailChange=function(e){var t=e[I._CONST_DATA],i=e[I._CONST_METADATA],o=[];e[I._CONST_KEYS].forEach(function(e){o.push(e)}),t instanceof Array||(t=[t]),i instanceof Array||(i=[i]);for(var l=[],n=t.length,s=0;s<n;s++){var a=this._getRowIdxForRowKey(o[s]);if(void 0!==a){var r={data:t[s],key:o[s],index:a,metadata:i[s]};l.push({row:r,rowIdx:a})}}return l},I.prototype._clearCachedDom=function(){this._clearCachedDomRowData(),this._clearDomCache()},I.prototype._clearCachedDomRowData=function(){this._cachedDomTableBodyRows=null,this._cachedDomTableBodyStickyRows=null},I.prototype._clearCachedStyling=function(){this._isGutterStartColumnEnabledCache=null,this._isGutterEndColumnEnabledCache=null},I.prototype._createContextMenuContainer=function(){var e=this._GetContextMenu(),t=!(this._isStickyLayoutEnabled()||!this._isTouchDevice())&&this._getRowSelectionMode()===I._OPTION_SELECTION_MODES._MULTIPLE;return!e&&(this._isTableSortable()||t||this._isTableColumnsResizable())&&(this._IsCustomElement()?(e=document.createElement("oj-menu")).setAttribute(I._DATA_OJ_BINDING_PROVIDER,"none"):(e=document.createElement(I.DOM_ELEMENT._UL),c(e).ojMenu()),e.style[I.CSS_PROP._DISPLAY]=I.CSS_VAL._NONE,e.setAttribute(I.DOM_ATTR._ID,this._getTableUID()+"_contextmenu"),this._getTableContainer().appendChild(e),this.option("contextMenu","#"+e.getAttribute(I.DOM_ATTR._ID),{_context:{internalSet:!0}}),this._defaultContextMenu=e),e},I.prototype._populateContextMenuItems=function(e,t){var i=!!this._isTouchDevice()&&this._getRowSelectionMode()===I._OPTION_SELECTION_MODES._MULTIPLE;if(!this._menuContainer)if(this._GetDefaultContextMenu()){if("redwood"===g.parseJSONFromFontFamily("oj-theme-json").behavior){if(this._isTableColumnsResizable()){let t=this._createContextMenuItem("resize",this._IsCustomElement());if(e.appendChild(t),this._isTableSortable()){let t=document.createElement(this._IsCustomElement()?"oj-option":"li");e.appendChild(t)}}if(this._isTableSortable()){let t=this._createContextMenuItem("sortAsc",this._IsCustomElement());e.appendChild(t);let i=this._createContextMenuItem("sortDsc",this._IsCustomElement());e.appendChild(i)}}else{if(this._isTableSortable()){let t=this._createContextMenuItem("sort",this._IsCustomElement());e.appendChild(t)}if(i){let t=this._createContextMenuItem("enableNonContiguousSelection",this._IsCustomElement());e.appendChild(t)}if(this._isTableColumnsResizable()){let t=this._createContextMenuItem("resize",this._IsCustomElement());e.appendChild(t)}}this._menuContainer=e,this._IsCustomElement()?(e.refresh(),e.addEventListener("ojAction",t)):(c(e).ojMenu("refresh"),c(e).on("ojselect",t))}else{var o=e.querySelectorAll("[data-oj-command]");if(o.length>0){var l,n,s;for(n=0;n<o.length;n++)"OJ-OPTION"!==o[n].tagName&&0!==o[n].getElementsByTagName(I.DOM_ELEMENT._A).length||(l=o[n].getAttribute(I._DATA_OJ_COMMAND).split("-"),s=this._createContextMenuItem(l[l.length-1],this._IsCustomElement()),"OJ-OPTION"===o[n].tagName?o[n].innerHTML=s.innerHTML:c(o[n]).replaceWith(s));this._menuContainer=e,c(e).data("oj-ojMenu")&&(this._IsCustomElement()?e.refresh():c(e).ojMenu("refresh")),this._IsCustomElement()?e.addEventListener("ojAction",t):c(e).on("ojselect",t)}}return e},I.prototype._createContextMenuItem=function(e,t){if("sort"===e){var i,o=this._createContextMenuListItem(e,t);return i=this._IsCustomElement()?document.createElement("oj-menu"):document.createElement(I.DOM_ELEMENT._UL),o.appendChild(i),i.appendChild(this._createContextMenuListItem("sortAsc",t)),i.appendChild(this._createContextMenuListItem("sortDsc",t)),o}if("sortAsc"===e)return this._createContextMenuListItem(e,t);if("sortDsc"===e)return this._createContextMenuListItem(e,t);if("enableNonContiguousSelection"===e)return this._createContextMenuListItem(e,t);if("disableNonContiguousSelection"===e)return this._createContextMenuListItem(e,t);if("resize"===e){return"redwood"===g.parseJSONFromFontFamily("oj-theme-json").behavior?this._createContextMenuResizeDialog(0):this._createContextMenuResizePopup(0),this._createContextMenuListItem(e,t)}return null},I.prototype._createContextMenuListItem=function(e,t){var i=document.createElement(t?"oj-option":"li");return i.setAttribute(I._DATA_OJ_COMMAND,"oj-table-"+e),i.appendChild(this._createContextMenuLabel(e,t)),i},I.prototype._createContextMenuLabel=function(e,t){var i=null;"sort"===e?i=this.getTranslatedString("labelSort"):"sortAsc"===e?i=this.getTranslatedString("labelSortAsc"):"sortDsc"===e?i=this.getTranslatedString("labelSortDsc"):"enableNonContiguousSelection"===e?i=this.getTranslatedString("labelEnableNonContiguousSelection"):"disableNonContiguousSelection"===e?i=this.getTranslatedString("labelDisableNonContiguousSelection"):"resize"===e&&(i=this.getTranslatedString("labelResizeColumn"));var o=document.createTextNode(i);if(t)return o;var l=document.createElement(I.DOM_ELEMENT._A);return l.setAttribute(I.DOM_ATTR._HREF,"#"),l.appendChild(o),l},I.prototype._createContextMenuResizePopup=function(e){e=Math.round(e);var t,i,o,l,n,s,a,r,_,h=this._getTableContainer(),d=this._getContextMenuResizePopup(),u=this._getTableUID(),S=this.getTranslatedString("labelResizePopupSpinner");function E(){d.setAttribute("id",u+"_resize_popup"),d.setAttribute(I._DATA_OJ_BINDING_PROVIDER,"none"),h.appendChild(d),o=document.createElement(I.DOM_ELEMENT._DIV),l=document.createElement(I.DOM_ELEMENT._DIV),(n=document.createElement(I.DOM_ELEMENT._DIV)).classList.add(I.CSS_CLASSES._TEXT_ALIGN_END),d.appendChild(o),d.appendChild(l),d.appendChild(n),(r=document.createElement("h6")).textContent=S,o.appendChild(r)}return this._IsCustomElement()?null==d?(d=document.createElement("oj-popup"),E(),(t=document.createElement("oj-input-number")).setAttribute("id",u+"_resize_popup_spinner"),(s=document.createElement("oj-button")).setAttribute("id",u+"_resize_popup_popupcancel"),s.style.margin="5px",s.textContent=this.getTranslatedString("labelResizePopupCancel"),(a=document.createElement("oj-button")).setAttribute("id",u+"_resize_popup_popupsubmit"),a.style.margin="5px",a.textContent=this.getTranslatedString("labelResizePopupSubmit"),l.appendChild(t),n.appendChild(a),n.appendChild(s),i=function(){t.value=0,d.close()},s.addEventListener("click",i),a.addEventListener("click",this._handleContextMenuResizePopup.bind(this)),t.min=10,t.step=1,t.value=e,t.displayOptions={messages:["notewindow"]},t.userAssistanceDensity="compact",t.validators=[new O({pattern:I._VALIDATOR_PATTERN,messageDetail:this.getTranslatedString("msgColumnResizeWidthValidation")})],_={my:I._POSITION._START_TOP,at:I._POSITION._START_BOTTOM,collision:"flipfit"},d.setAttribute("position",JSON.stringify(_)),d.setAttribute("modality","modal"),this._cacheDomElement(u+"_resize_popup",d)):(t=document.getElementById(u+"_resize_popup_spinner")).value=e:null==d?(d=document.createElement(I.DOM_ELEMENT._DIV),E(),(t=document.createElement(I.DOM_ELEMENT._INPUT)).setAttribute("id",u+"_resize_popup_spinner"),(s=document.createElement(I.DOM_ELEMENT._BUTTON)).setAttribute("id",u+"_resize_popup_popupcancel"),s.style.margin="5px",(a=document.createElement(I.DOM_ELEMENT._BUTTON)).setAttribute("id",u+"_resize_popup_popupsubmit"),a.style.margin="5px",l.appendChild(t),n.appendChild(a),n.appendChild(s),c(a).ojButton({component:"ojButton",label:this.getTranslatedString("labelResizePopupSubmit")}),c(s).ojButton({component:"ojButton",label:this.getTranslatedString("labelResizePopupCancel")}),i=function(){c(t).ojInputNumber({value:0}),c(d).ojPopup("close")},c(a).on("click",this._handleContextMenuResizePopup.bind(this)),c(s).on("click",i),c(t).ojInputNumber({component:"ojInputNumber",min:10,step:1,value:e,displayOptions:{messages:["notewindow"]},userAssistanceDensity:"compact",validators:[new O({pattern:I._VALIDATOR_PATTERN,messageDetail:this.getTranslatedString("msgColumnResizeWidthValidation")})]}),c(d).ojPopup({modality:"modal",position:{my:I._POSITION._START_TOP,at:I._POSITION._START_BOTTOM,collision:"flipfit"}}),this._cacheDomElement(u+"_resize_popup",d)):(t=document.getElementById(u+"_resize_popup_spinner"),c(t).ojInputNumber("option","value",e)),d},I.prototype._createContextMenuResizeDialog=function(e){e=Math.round(e);let t=this._getTableContainer(),i=this._getContextMenuResizeDialog(),o=this._getTableUID();if(this._IsCustomElement())if(null==i){i=document.createElement("oj-dialog"),i.setAttribute("id",o+"_resize_dialog"),i.setAttribute(I._DATA_OJ_BINDING_PROVIDER,"none"),i.setAttribute("dialog-title",this.getTranslatedString("labelResizeColumnDialog")),t.appendChild(i);let l=document.createElement("div");l.setAttribute("slot","body");let n=document.createElement("oj-input-number");n.setAttribute("id",o+"_resize_column_width_input"),n.labelHint=this.getTranslatedString("labelColumnWidth"),n.min=10,n.step=1,n.value=e,n.displayOptions={messages:["notewindow"]},n.userAssistanceDensity="compact",n.validators=[new O({pattern:I._VALIDATOR_PATTERN,messageDetail:this.getTranslatedString("msgColumnResizeWidthValidation")})],l.appendChild(n);let s=document.createElement("div");s.setAttribute("slot","footer");let a=document.createElement("oj-button");a.setAttribute("id",o+"_resize_dialog_dialogcancel"),a.textContent=this.getTranslatedString("labelResizePopupCancel");let r=document.createElement("oj-button");r.setAttribute("id",o+"_resize_dialog_dialogapply"),r.chroming="callToAction",r.textContent=this.getTranslatedString("labelResizeDialogApply"),s.appendChild(a),s.appendChild(r),"phone"===T.getDeviceRenderMode()&&(i.classList.add(I.CSS_CLASSES._TABLE_RESIZE_DIALOG_MOBILE_CLASS),r.classList.add(I.CSS_CLASSES._BUTTON_SMALL_CLASS,I.CSS_CLASSES._SMALL_6_CLASS,I.CSS_CLASSES._SMALL_HOR_MARGIN_CLASS),a.classList.add(I.CSS_CLASSES._BUTTON_SMALL_CLASS,I.CSS_CLASSES._SMALL_6_CLASS,I.CSS_CLASSES._SMALL_HOR_MARGIN_CLASS),s.classList.add("oj-sm-justify-content-center")),i.appendChild(l),i.appendChild(s);let _=function(){n.value=0,i.close()};a.addEventListener("click",_),r.addEventListener("click",this._handleContextMenuResizePopup.bind(this)),i.setAttribute("modality","modal"),this._cacheDomElement(o+"_resize_dialog",i)}else{document.getElementById(o+"_resize_column_width_input").value=e}else if(null==i){i=document.createElement(I.DOM_ELEMENT._DIV),i.setAttribute("id",o+"_resize_dialog"),i.setAttribute(I._DATA_OJ_BINDING_PROVIDER,"none"),"phone"===T.getDeviceRenderMode()&&i.classList.add(I.CSS_CLASSES._TABLE_RESIZE_DIALOG_MOBILE_CLASS),t.appendChild(i);let l=document.createElement("div");l.setAttribute("slot","body"),i.appendChild(l);let n=document.createElement(I.DOM_ELEMENT._INPUT);n.setAttribute("id",o+"_resize_column_width_input");let s=document.createElement(I.DOM_ELEMENT._BUTTON);s.setAttribute("id",o+"_resize_dialog_dialogcancel");let a=document.createElement(I.DOM_ELEMENT._BUTTON);a.setAttribute("id",o+"_resize_dialog_dialogapply");let r=document.createElement("div");r.setAttribute("slot","footer"),i.appendChild(r),l.appendChild(n),r.appendChild(a),r.appendChild(s),c(a).ojButton({component:"ojButton",chroming:"callToAction",label:this.getTranslatedString("labelResizeDialogApply")}),c(s).ojButton({component:"ojButton",label:this.getTranslatedString("labelResizePopupCancel")});let _=function(){c(n).ojInputNumber({value:0}),c(i).ojDialog("close")};c(a).on("click",this._handleContextMenuResizePopup.bind(this)),c(s).on("click",_),c(n).ojInputNumber({component:"ojInputNumber",labelHint:this.getTranslatedString("labelColumnWidth"),min:10,step:1,value:e,displayOptions:{messages:["notewindow"]},userAssistanceDensity:"compact",validators:[new O({pattern:I._VALIDATOR_PATTERN,messageDetail:this.getTranslatedString("msgColumnResizeWidthValidation")})]}),c(i).ojDialog({dialogTitle:this.getTranslatedString("labelResizeColumnDialog"),modality:"modal"}),"phone"===T.getDeviceRenderMode()&&(i.classList.add(I.CSS_CLASSES._TABLE_RESIZE_DIALOG_MOBILE_CLASS),a.classList.add(I.CSS_CLASSES._BUTTON_SMALL_CLASS,I.CSS_CLASSES._SMALL_6_CLASS,I.CSS_CLASSES._SMALL_HOR_MARGIN_CLASS),s.classList.add(I.CSS_CLASSES._BUTTON_SMALL_CLASS,I.CSS_CLASSES._SMALL_6_CLASS,I.CSS_CLASSES._SMALL_HOR_MARGIN_CLASS),r.classList.add("oj-sm-justify-content-center")),this._cacheDomElement(o+"_resize_dialog",i)}else{let t=document.getElementById(o+"_resize_column_width_input");c(t).ojInputNumber("option","value",e)}return i},I.prototype._createInitialTable=function(e,t){var i=this._getTable();return this._createTableContainer(),this._isStickyLayoutEnabled()&&(this._createTableScroller(),this._createTableColGroup()),e||this._createTableHeader(),this._createTableBody(),t||this._createTableFooter(),this._isStickyLayoutEnabled()||(this._createTableBodyLegacyWidthBuffer(),this._createTableLegacySizer()),this._createTableStatusMessage(),this._createTableStatusAccNotification(),this._createContextInfo(),this._createStateInfo(),this._createRowStateInfo(),this._createTableWidthContainer(),i},I.prototype._createTableBody=function(){var e=this._getTable(),t=document.createElement(I.DOM_ELEMENT._TBODY);return t.style[I.CSS_PROP._VISIBILITY]=I.CSS_VAL._HIDDEN,e.appendChild(t),this._cacheDomElement(I.CSS_CLASSES._TABLE_BODY_CLASS,t),t},I.prototype._createTableBodyScrollBuffer=function(){var e=this._getTableBodyScrollBuffer();return null==e&&((e=this._createTableBodyRow()).classList.add(I.CSS_CLASSES._TABLE_BUFFER_ROW_CLASS),this._getTableBody().appendChild(e),this._clearDomCache(I.CSS_CLASSES._TABLE_BUFFER_ROW_CLASS)),e},I.prototype._createTableBodyLegacyWidthBuffer=function(){var e=this._createTableBodyRow();return e.classList.add(I.CSS_CLASSES._TABLE_LEGACY_WIDTH_BUFFER_ROW_CLASS),this._getTableBody().appendChild(e),e},I.prototype._createTableLegacySizer=function(){var e=document.createElement(I.DOM_ELEMENT._DIV);return e.classList.add(I.CSS_CLASSES._TABLE_LEGACY_SIZER_CLASS),this._getTableContainer().appendChild(e),this._cacheDomElement(I.CSS_CLASSES._TABLE_LEGACY_SIZER_CLASS,e),e},I.prototype._appendElementToTableBody=function(e,t){var i=this._getTableBodyScrollBuffer();null!=i?t.insertBefore(e,i):t.appendChild(e)},I.prototype._createTableBodyCell=function(){return document.createElement(I.DOM_ELEMENT._TD)},I.prototype._createTableBodyDefaultSelector=function(e,t){var i=null;(i=document.createElement(I.DOM_ELEMENT._TD)).classList.add(I.CSS_CLASSES._TABLE_SELECTOR_CELL_CLASS),this._isStickyLayoutEnabled()&&i.classList.add(I.CSS_CLASSES._TABLE_FROZEN_START),this._isVerticalGridEnabled()&&i.classList.add(I.CSS_CLASSES._TABLE_VGRID_LINES_CLASS),i.setAttribute(I.DOM_ATTR._ID,this._getTableUID()+":select:"+e);var o=document.createElement("oj-selector");var l;return o.id=this._getTableUID()+"_table_selector_"+e,this.options.selected.row.has(e)?o.selectedKeys=new y.KeySetImpl([e]):o.selectedKeys=new y.KeySetImpl,o.setAttribute(I._DATA_OJ_BINDING_PROVIDER,"none"),o.classList.add(I.CSS_CLASSES._TABLE_DATA_ROW_SELECTOR_CLASS),o.setAttribute("selection-mode","multiple"),o.rowKey=e,A.isIos()?(l=this.getTranslatedString(I._BUNDLE_KEY._LABEL_SELECT_ROW),o.setAttribute(I.DOM_ATTR._ARIA_LABEL,l)):(l=this._getAccSelectorString(t),o.setAttribute(I.DOM_ATTR._ARIA_LABELLEDBY,l)),o.addEventListener("selectedKeysChanged",this._selectedKeysChangedListener.bind(this)),i.appendChild(o),t.insertBefore(i,t.firstChild),i},I.prototype._createTableHeaderSelectorColumn=function(){var e=document.createElement(I.DOM_ELEMENT._TH);if(e.classList.add(I.CSS_CLASSES._COLUMN_HEADER_SELECTOR_CELL_CLASS),this._isStickyLayoutEnabled()&&e.classList.add(I.CSS_CLASSES._TABLE_FROZEN_START),this._isVerticalGridEnabled()&&e.classList.add(I.CSS_CLASSES._TABLE_VGRID_LINES_CLASS),e.setAttribute(I.DOM_ATTR._ID,this._getTableUID()+":selectAll"),this._isSelectAllControlVisible()){var t=document.createElement("oj-selector");t.selectedKeys=this.options.selected.row,t.setAttribute(I._DATA_OJ_BINDING_PROVIDER,"none"),t.classList.add(I.CSS_CLASSES._TABLE_HEADER_SELECTOR_CLASS),t.setAttribute("selection-mode","all"),t.setAttribute(I.DOM_ATTR._ARIA_LABEL,this.getTranslatedString(I._BUNDLE_KEY._LABEL_SELECT_ALL_ROWS)),t.addEventListener("selectedKeysChanged",this._selectedKeysChangedListener.bind(this)),e.appendChild(t)}return e},I.prototype._createTableFooterSelectorCell=function(){var e=this._createTableFooterCell();return e.classList.add(I.CSS_CLASSES._TABLE_FOOTER_SELECTOR_CELL_CLASS),this._isStickyLayoutEnabled()&&e.classList.add(I.CSS_CLASSES._TABLE_FROZEN_START),this._isVerticalGridEnabled()&&e.classList.add(I.CSS_CLASSES._TABLE_VGRID_LINES_CLASS),e.setAttribute(I.DOM_ATTR._ID,this._getTableUID()+":footerSelector"),e},I.prototype._createTableBodyMessageCell=function(e,t,i){var o=document.createElement(I.DOM_ELEMENT._TD);return this._isGutterStartColumnEnabled()&&(t+=1),this._isGutterEndColumnEnabled()&&(t+=1),this._isDefaultSelectorEnabled()&&(t+=1),o.setAttribute(I.DOM_ATTR._COLSPAN,t),o.classList.add(I.CSS_CLASSES._TABLE_BODY_MESSAGE_CLASS),o.appendChild(document.createTextNode(i)),e.appendChild(o),o},I.prototype._createTableBodyMessageRow=function(e,t){var i=this._getTableBody(),o=document.createElement(I.DOM_ELEMENT._TR);if(o.id=this.createSubId("messageRow"),o.classList.add(I.CSS_CLASSES._TABLE_BODY_MESSAGE_ROW_CLASS),this._isGutterStartColumnEnabled()){let e=this._createTableGutterCell("body","start");o.appendChild(e)}if(this._createTableBodyMessageCell(o,e,t),this._isGutterEndColumnEnabled()){let e=this._createTableGutterCell("body","end");o.appendChild(e)}return this._appendElementToTableBody(o,i),o},I.prototype._createTableBodyRow=function(){var e=document.createElement(I.DOM_ELEMENT._TR);return e._ojReportBusy=this._getTableBody(),e},I.prototype._getTouchAffordanceGlassPane=function(){var e=this._getTableContainer(),t=this._getTableElementsByClassName(e,I.CSS_CLASSES._TABLE_TOUCH_AFFORDANCE_GLASS_PANE_CLASS);return t.length>0?t[0]:null},I.prototype._createTouchAffordanceGlassPane=function(){var e=this._getTouchAffordanceGlassPane();if(!e){var t=this._getTableContainer();(e=document.createElement(I.DOM_ELEMENT._DIV)).classList.add(I.CSS_CLASSES._TABLE_TOUCH_AFFORDANCE_GLASS_PANE_CLASS),t.appendChild(e),this._refreshTouchAffordanceGlassPanePosition()}return e},I.prototype._createTableBodyRowTouchSelectionAffordance=function(e){var t=this._createTouchAffordanceGlassPane(),i=this._getTableBodyRowTouchSelectionAffordanceTop();if(!i){(i=document.createElement(I.DOM_ELEMENT._DIV)).classList.add(I.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_TOP_CLASS),i.classList.add(I.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_TOUCH_AREA_CLASS);var o=document.createElement(I.DOM_ELEMENT._DIV);o.classList.add(I.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_TOP_ICON_CLASS),o.setAttribute(I.DOM_ATTR._ROLE,"button"),o.setAttribute(I.DOM_ATTR._ARIA_LABEL,this.getTranslatedString("labelAccSelectionAffordanceTop")),i.appendChild(o),t.appendChild(i)}var l=this._getTableBodyRowTouchSelectionAffordanceBottom();if(!l){(l=document.createElement(I.DOM_ELEMENT._DIV)).classList.add(I.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_BOTTOM_CLASS),l.classList.add(I.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_TOUCH_AREA_CLASS);var n=document.createElement(I.DOM_ELEMENT._DIV);n.classList.add(I.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_BOTTOM_ICON_CLASS),n.setAttribute(I.DOM_ATTR._ROLE,"button"),n.setAttribute(I.DOM_ATTR._ARIA_LABEL,this.getTranslatedString("labelAccSelectionAffordanceBottom")),l.appendChild(n),t.appendChild(l)}this._moveTableBodyRowTouchSelectionAffordanceTop(e),this._moveTableBodyRowTouchSelectionAffordanceBottom(e)},I.prototype._createTableBottomSlot=function(){var e=this._getTableContainer(),t=document.createElement(I.DOM_ELEMENT._DIV);return t.classList.add(I.CSS_CLASSES._TABLE_BOTTOM_SLOT_CLASS),e.appendChild(t),this._cacheDomElement(I.CSS_CLASSES._TABLE_BOTTOM_SLOT_CLASS,t),t},I.prototype._createTableContainer=function(){var e=this.OuterWrapper;return e||(e=document.createElement(I.DOM_ELEMENT._DIV),this.element[0].parentNode.replaceChild(e,this.element[0]),e.insertBefore(this.element[0],e.firstChild)),this._cacheDomElement(I.CSS_CLASSES._TABLE_CONTAINER_CLASS,e),e.classList.add(I.CSS_CLASSES._TABLE_CLASS),e.classList.add(I.CSS_CLASSES._TABLE_CONTAINER_CLASS),e.classList.add(I.MARKER_STYLE_CLASSES._WIDGET),e},I.prototype._createTableScroller=function(){var e=document.createElement(I.DOM_ELEMENT._DIV);return e.classList.add(I.CSS_CLASSES._TABLE_SCROLLER_CLASS),e.setAttribute(I.DOM_ATTR._TABINDEX,"-1"),this.element[0].parentNode.replaceChild(e,this.element[0]),e.insertBefore(this.element[0],e.firstChild),this._getLayoutManager().initializeDefaultScrollBarSize(e),e},I.prototype._createTableColGroup=function(){var e=document.createElement(I.DOM_ELEMENT._COLGROUP);e.classList.add(I.CSS_CLASSES._TABLE_COLGROUP_CLASS),this._cacheDomElement(I.CSS_CLASSES._TABLE_COLGROUP_CLASS,e);var t=this._getTableHeader();if(null!=t)return t.parentNode.insertBefore(e,t),e;var i=this._getTableBody();if(null!=i)return i.parentNode.insertBefore(e,i),e;var o=this._getTableFooter();return null!=o?(o.parentNode.insertBefore(e,o),e):(this._getTable().appendChild(e),e)},I.prototype._createTableFooter=function(){var e=this._getTable(),t=document.createElement(I.DOM_ELEMENT._TFOOT);t.style[I.CSS_PROP._VISIBILITY]=I.CSS_VAL._HIDDEN;var i=document.createElement(I.DOM_ELEMENT._TR);t.appendChild(i);var o=this._getTableBody();if(null!=o)o.parentNode.insertBefore(t,o.nextSibling);else{var l=this._getTableHeader();null!=l?l.parentNode.insertBefore(t,l.nextSibling):e.appendChild(t)}return this._cacheDomElement(I.CSS_CLASSES._TABLE_FOOTER_CLASS,t),t},I.prototype._createTableFooterCell=function(){return document.createElement(I.DOM_ELEMENT._TD)},I.prototype._createTableHeader=function(){var e=this._getTable(),t=document.createElement(I.DOM_ELEMENT._THEAD),i=document.createElement(I.DOM_ELEMENT._TR);t.appendChild(i);var o=this._getTableBody();if(null!=o)o.parentNode.insertBefore(t,o);else{var l=this._getTableFooter();null!=l?l.parentNode.insertBefore(t,l):e.appendChild(t)}return this._cacheDomElement(I.CSS_CLASSES._TABLE_HEADER_ROW_CLASS,i),this._cacheDomElement(I.CSS_CLASSES._TABLE_HEADER_CLASS,t),t},I.prototype._createTableHeaderColumn=function(e,t){var i=this._getColumnDefs()[e],o=document.createElement(I.DOM_ELEMENT._TH);this._styleTableHeaderColumn(e,o,!0),o.setAttribute("abbr",i.headerText),o.setAttribute(I.DOM_ATTR._TITLE,i.headerText),this._insertTableHeaderColumn(e,o);var l={columnIndex:e,headerContext:{component:this,parentElement:o}};return i.resizable===I._OPTION_ENABLED&&o.setAttribute("data-oj-resizable",I._OPTION_ENABLED),t?i.sortable===I._OPTION_ENABLED&&o.setAttribute("data-oj-sortable",I._OPTION_ENABLED):i.sortable===I._OPTION_ENABLED?(o.setAttribute("data-oj-sortable",I._OPTION_ENABLED),this._columnHeaderSortableIconRenderer(l)):this._columnHeaderDefaultRenderer(l),o},I.prototype._createTableSelectorCol=function(){var e=document.createElement(I.DOM_ELEMENT._COL);return e.classList.add(I.CSS_CLASSES._TABLE_COL_SELECTOR_CLASS),e},I.prototype._createTableCol=function(){var e=document.createElement(I.DOM_ELEMENT._COL);return e.classList.add(I.CSS_CLASSES._TABLE_COL_CLASS),e},I.prototype._createTableHeaderColumnDragImage=function(e){var t;if(1===e.length){(t=this._getTableHeaderColumn(e[0]).cloneNode(!0)).classList.remove(I.MARKER_STYLE_CLASSES._FOCUS),t.classList.remove(I.MARKER_STYLE_CLASSES._FOCUS_HIGHLIGHT),t.classList.remove(I.MARKER_STYLE_CLASSES._HOVER)}else{(t=document.createElement("th")).classList.add("oj-table-column-header-cell");var i=document.createElement(I.DOM_ELEMENT._DIV);i.classList.add(I.CSS_CLASSES._COLUMN_HEADER_CLASS),t.appendChild(i);var o=document.createElement(I.DOM_ELEMENT._DIV);o.classList.add(I.CSS_CLASSES._COLUMN_HEADER_TEXT_CLASS),o.textContent=e.length+" Items",i.appendChild(o)}return t.classList.add(I.CSS_CLASSES._COLUMN_HEADER_DRAG_IMAGE),t.style[I.CSS_PROP._POSITION]=I.CSS_VAL._ABSOLUTE,t.style[I.CSS_PROP._TOP]="0",t.style[I.CSS_PROP._LEFT]="-999em",t.style[I.CSS_PROP._ZINDEX]="-999",document.body.appendChild(t),t},I.prototype.createSubId=function(e){return[this._getRootElement().id,e].join(":")},I.prototype._createTableStatusMessage=function(){var e=this._getTableContainer(),t=document.createElement(I.DOM_ELEMENT._DIV);if(t.classList.add(I.CSS_CLASSES._TABLE_STATUS_MESSAGE_CLASS),t.style[I.CSS_PROP._DISPLAY]=I.CSS_VAL._NONE,!this._isSkeletonSupport()){var i=document.createElement(I.DOM_ELEMENT._DIV);i.classList.add(I.CSS_CLASSES._ICON_CLASS),i.classList.add(I.CSS_CLASSES._TABLE_LOADING_ICON_CLASS),i.setAttribute(I.DOM_ATTR._ARIA_LABEL,this.getTranslatedString(I._BUNDLE_KEY._MSG_FETCHING_DATA)),t.appendChild(i)}return e.appendChild(t),this._cacheDomElement(I.CSS_CLASSES._TABLE_STATUS_MESSAGE_CLASS,t),t},I.prototype._createTableWidthContainer=function(){var e=this._getTableContainer(),t=document.createElement(I.DOM_ELEMENT._DIV);return t.classList.add(I.CSS_CLASSES._TABLE_WIDTH_CONTAINER_CLASS),e.appendChild(t),this._tableWidthContainer=t,t},I.prototype._displayDragOverIndicatorColumn=function(e,t){this._getLayoutManager().displayDragOverIndicatorColumn(e,t)},I.prototype._displayDragOverIndicatorRow=function(e,t,i,o){var l=this._getDragOverIndicatorRow(!0,t,i,o),n=this._getTableBodyRow(e);null!=n?n.parentNode.insertBefore(l,n):(0===this._getTableBodyRows().length&&this._hideNoDataMessage(),this._getTableBody().appendChild(l))},I.prototype._getDragOverIndicatorRow=function(e,t,i,o){for(var l,n=this._getTableBody().children,s=0;s<n.length;s++)if(n[s].classList.contains(I.CSS_CLASSES._TABLE_DATA_ROW_DRAG_INDICATOR_CLASS)){l=n[s];break}if(e&&null==l){(l=document.createElement(I.DOM_ELEMENT._TR)).classList.add(I.CSS_CLASSES._TABLE_DATA_ROW_DRAG_INDICATOR_CLASS),"line"===i?l.classList.add("oj-table-body-row-drop-target"):null!=t&&(c(l).height(parseInt(c(t).height(),10)),o&&this._rowsDragged.forEach(function(e){e.classList.add("oj-table-row-drag-source-hide"),e.classList.remove(I.MARKER_STYLE_CLASSES._SELECTED),this._updateRowStateCellsClass(null,e,{selected:!1})}.bind(this)));var a=document.createElement(I.DOM_ELEMENT._TD),r=this._getColumnDefs().length;this._isDefaultSelectorEnabled()&&(r+=1),this._isGutterStartColumnEnabled()&&(r+=1),this._isGutterEndColumnEnabled()&&(r+=1),a.setAttribute(I.DOM_ATTR._COLSPAN,r),l.appendChild(a)}return l},I.prototype._getContextMenuElement=function(){return this._menuContainer},I.prototype._getContextMenuResizePopup=function(){var e=this._getTableUID()+"_resize_popup";if(!this._isCachedDomElement(e)){var t=document.getElementById(e);this._cacheDomElement(e,t)}return this._getCachedDomElement(e)},I.prototype._getContextMenuResizeDialog=function(){let e=this._getTableUID()+"_resize_dialog";if(!this._isCachedDomElement(e)){let t=document.getElementById(e);this._cacheDomElement(e,t)}return this._getCachedDomElement(e)},I.prototype._getElementColumnIdx=function(e){var t=this._getFirstAncestor(e,"."+I.CSS_CLASSES._TABLE_DATA_CELL_CLASS,!0);if(null!=t)return c(t.parentNode).children("."+I.CSS_CLASSES._TABLE_DATA_CELL_CLASS).index(t);var i=this._getFirstAncestor(e,"."+I.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS,!0);if(null!=i)return c(i.parentNode).children("."+I.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS).index(i);var o=this._getFirstAncestor(e,"."+I.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS,!0);return null!=o?c(o.parentNode).children("."+I.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS).index(o):null},I.prototype._getElementRowIdx=function(e){var t=this._getFirstAncestor(e,"."+I.CSS_CLASSES._TABLE_DATA_ROW_CLASS,!0);if(null!=t){var i=this._getTableBodyRows(),o=c(i).index(t);return o>-1?o:null}return null},I.prototype._getFirstAncestor=function(e,t,i){var o;if(null==e)return null;if(e.matches(t))return i&&!this._isTableOwned(e)?this._getFirstAncestor(e.parentNode,t,i):e;if(o=c(e).parents(t),i){for(var l=0;l<o.length;l++)if(this._isTableOwned(o[l]))return o[l];return null}return o.length>0?o[0]:null},I.prototype._getElementScrollLeft=function(e){return Math.abs(e.scrollLeft)},I.prototype._getTable=function(){return this.element[0]},I.prototype._getTableBody=function(){return this._getTableElementByClassName(I.CSS_CLASSES._TABLE_BODY_CLASS,!0)},I.prototype._getTableBodyScrollBuffer=function(){return this._getTableElementByClassName(I.CSS_CLASSES._TABLE_BUFFER_ROW_CLASS)},I.prototype._getTableBodyLegacyWidthBuffer=function(){return this._getTableElementByClassName(I.CSS_CLASSES._TABLE_LEGACY_WIDTH_BUFFER_ROW_CLASS)},I.prototype._getTableLegacySizer=function(){return this._getTableElementByClassName(I.CSS_CLASSES._TABLE_LEGACY_SIZER_CLASS,!0)},I.prototype._getTableBodyCell=function(e,t,i){var o=this._getTableBodyCells(e,i);return o.length>t?o[t]:null},I.prototype._getTableBodyLogicalCells=function(e,t){var i=this._getTableBodyCells(e,t);return this._getColspanLogicalElements(i)},I.prototype._getTableBodyCells=function(e,t){var i=[];if(t||(t=this._getTableBodyRow(e)),null!=t)for(var o=t.children,l=0;l<o.length;l++)o[l].classList.contains(I.CSS_CLASSES._TABLE_DATA_CELL_CLASS)&&i.push(o[l]);return i},I.prototype._getTableBodyMessageCell=function(){var e=this._getTableBody();if(e){var t=this._getTableElementsByClassName(e,I.CSS_CLASSES._TABLE_BODY_MESSAGE_CLASS);if(t.length>0)return t[0]}return null},I.prototype._getTableBodyMessageRow=function(){var e=this._getTableBody();if(e){var t=this._getTableElementsByClassName(e,I.CSS_CLASSES._TABLE_BODY_MESSAGE_ROW_CLASS);if(t.length>0)return t[0]}return null},I.prototype._getTableNoDataRow=function(){var e=this._getTableBody();if(e){var t=this._getTableElementsByClassName(e,I.CSS_CLASSES._TABLE_NO_DATA_ROW_CLASS);if(t.length>0)return t[0]}return null},I.prototype._getRawTableBodyRow=function(e){var t=this._getTableBody();let i=this._isAddNewRowEnabled()?e+1:e;return this._isStickyLayoutEnabled()||(i+=1),t.children[i]},I.prototype._getTableBodyRow=function(e){var t=this._getTableBodyRows();return null!=e&&t.length>e?t[e]:null},I.prototype._getTableBodyRows=function(){if(!this._cachedDomTableBodyRows){var e=this._getTableBody();this._cachedDomTableBodyRows=null!=e?this._getTableElementsByClassName(e,I.CSS_CLASSES._TABLE_DATA_ROW_CLASS):[]}return this._cachedDomTableBodyRows},I.prototype._getTableBodyStickyRows=function(){if(!this._cachedDomTableBodyStickyRows){var e=this._getTableBody();this._cachedDomTableBodyStickyRows=null!=e?this._getTableElementsByClassName(e,I.CSS_CLASSES._TABLE_STICKY_ROW_CLASS):[]}return this._cachedDomTableBodyStickyRows},I.prototype._getTableTempSkeletonRow=function(){var e=this._getTableBody();return null!=e?this._getChildElementByClassName(e,I.CSS_CLASSES._TABLE_FETCH_SKELETON_ROW_CLASS):null},I.prototype._getTableBodyRowTouchSelectionAffordanceTop=function(){var e=this._getTableContainer(),t=this._getTableElementsByClassName(e,I.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_TOP_CLASS);return t.length>0?t[0]:null},I.prototype._getTableBodyRowTouchSelectionAffordanceBottom=function(){var e=this._getTableContainer(),t=this._getTableElementsByClassName(e,I.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_BOTTOM_CLASS);return t.length>0?t[0]:null},I.prototype._getTableBottomSlot=function(){return this._getTableElementByClassName(I.CSS_CLASSES._TABLE_BOTTOM_SLOT_CLASS,!0)},I.prototype._getTableContainer=function(){if(!this._isCachedDomElement(I.CSS_CLASSES._TABLE_CONTAINER_CLASS)){var e=this.element[0].parentNode;e.classList.contains(I.CSS_CLASSES._TABLE_SCROLLER_CLASS)?this._cacheDomElement(I.CSS_CLASSES._TABLE_CONTAINER_CLASS,e.parentNode):this._cacheDomElement(I.CSS_CLASSES._TABLE_CONTAINER_CLASS,e)}return this._getCachedDomElement(I.CSS_CLASSES._TABLE_CONTAINER_CLASS)},I.prototype._getTableScroller=function(){return this._getTableElementByClassName(I.CSS_CLASSES._TABLE_SCROLLER_CLASS,!0)},I.prototype._getTableFooter=function(){return this._getTableElementByClassName(I.CSS_CLASSES._TABLE_FOOTER_CLASS,!0)},I.prototype._getTableFooterCell=function(e){var t=this._getTableFooterCells();return t.length>e?t[e]:null},I.prototype._getTableFooterCells=function(){var e=[],t=this._getTableFooterRow();if(null!=t)for(var i=t.children,o=0;o<i.length;o++)i[o].classList.contains(I.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS)&&e.push(i[o]);return e},I.prototype._getTableFooterLogicalCells=function(){return this._getColspanLogicalElements(this._getTableFooterCells())},I.prototype._getTableFooterRow=function(){return this._getTableElementByClassName(I.CSS_CLASSES._TABLE_FOOTER_ROW_CLASS)},I.prototype._getTableHeader=function(){return this._getTableElementByClassName(I.CSS_CLASSES._TABLE_HEADER_CLASS,!0)},I.prototype._getTableHeaderColumn=function(e){var t=this._getTableHeaderColumns();return t.length>e&&e>=0?t[e]:null},I.prototype._getTableCols=function(){var e=[],t=this._getTableColGroup();if(null!=t)for(var i=t.children,o=0;o<i.length;o++)i[o].classList.contains(I.CSS_CLASSES._TABLE_COL_CLASS)&&e.push(i[o]);return e},I.prototype._getTableCol=function(e){var t=this._getTableCols();return t.length>0?t[e]:null},I.prototype._getTableHeaderColumns=function(){var e=[],t=this._getTableHeaderRow();if(null!=t)for(var i=t.children,o=0;o<i.length;o++)i[o].classList.contains(I.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS)&&e.push(i[o]);return e},I.prototype._getTableHeaderLogicalColumns=function(){return this._getColspanLogicalElements(this._getTableHeaderColumns())},I.prototype._getTableHeaderRow=function(){return this._getTableElementByClassName(I.CSS_CLASSES._TABLE_HEADER_ROW_CLASS)},I.prototype._getPlaceHolderRow=function(){return this._getTable().getElementsByClassName(I.CSS_CLASSES._TABLE_ADD_ROW_PLACEHOLDER_CLASS)[0]},I.prototype._getPlaceHolderRowCells=function(e){var t=[],i=null!=e?e:this._getPlaceHolderRow();if(null!=i)for(var o=i.children,l=0;l<o.length;l++)t.push(o[l]);return t},I.prototype._getPlaceHolderRowCell=function(e){var t=this._isDefaultSelectorEnabled()?e+1:e;this._isGutterStartColumnEnabled()&&(t+=1);var i=this._getPlaceHolderRowCells();return i.length>t&&t>=0?i[t]:null},I.prototype._getTableColGroup=function(){return this._getTableElementByClassName(I.CSS_CLASSES._TABLE_COLGROUP_CLASS,!0)},I.prototype._getTableId=function(){if(!this._tableId){var e=this._IsCustomElement()?this._getTableContainer():this._getTable();this._tableId=e.getAttribute(I.DOM_ATTR._ID)}return this._tableId},I.prototype._getTableStatusMessage=function(){return this._getTableElementByClassName(I.CSS_CLASSES._TABLE_STATUS_MESSAGE_CLASS,!0)},I.prototype._getTableUID=function(){return this._tableUID||(null!=this._getTableId()?this._tableUID=this._getTableId():this._tableUID=L.ElementUtils.getUniqueId()+"_table"),this._tableUID},I.prototype._hashCode=function(e){if(null==e)return 0;"string"!==c.type(e)&&(e=e.toString());var t=0;if(0===e.length)return t;for(var i=e.length,o=0;o<i;o++){t=(t<<5)-t+e.charCodeAt(o),t&=t}return t},I.prototype._insertTableBodyCell=function(e,t,i,o,l,n){if(this._setTableBodyCellAttributes(e,t,i,o),n)return l.appendChild(o),o;if(0===i)l.insertBefore(o,l.firstChild);else{var s=this._getTableElementsByClassName(l,I.CSS_CLASSES._TABLE_DATA_CELL_CLASS);if(s.length>=i){var a=s[i-1];a.parentNode.insertBefore(o,a.nextSibling)}else l.appendChild(o)}return o},I.prototype._insertTableBodyRow=function(e,t,i){if(null==i){var o=this._getTableBody(),l=this._getTableBodyRow(e);null!=l?o.insertBefore(t,l):this._appendElementToTableBody(t,o)}else i.appendChild(t);this._clearCachedDomRowData()},I.prototype._insertTableFooterCell=function(e,t){var i=this._getTableFooterRow(),o=this._getTableElementsByClassName(i,I.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS);if(this._setTableFooterColumnAttributes(e,t),0===e)i.insertBefore(t,i.firstChild);else if(i.length>=e){var l=o[e-1];l.parentNode.insertBefore(t,l.nextSibling)}else i.appendChild(t);return t},I.prototype._insertTableHeaderColumn=function(e,t){var i=this._getTableHeaderRow(),o=this._getTableHeaderColumns();this._setTableHeaderColumnAttributes(e,t);var l=this._getTableHeaderColumn(e);if(l)c(l).replaceWith(c(t));else if(0!==e&&o.length>=e){var n=o[e-1];n.parentNode.insertBefore(t,n.nextSibling)}else i.appendChild(t)},I.prototype._moveTableBodyRowTouchSelectionAffordanceTop=function(e){var t=this._getTableBodyRowTouchSelectionAffordanceTop();if(null!=t){null!=e?(c(t).data("rowIdx",e),c(t.children[0]).data("rowIdx",e)):e=c(t).data("rowIdx");var i=this._getLayoutManager().getScroller(),o=this._getTableBodyRow(e),l=this._getTouchAffordanceGlassPane();if(null!=o&&null!=l){var n=o.getBoundingClientRect(),s=l.getBoundingClientRect();t.style[I.CSS_PROP._TOP]=n.top-s.top-t.clientHeight/2+I.CSS_VAL._PX,t.style[I.CSS_PROP._LEFT]=i.clientWidth/2+I.CSS_VAL._PX}}},I.prototype._moveTableBodyRowTouchSelectionAffordanceBottom=function(e){var t=this._getTableBodyRowTouchSelectionAffordanceBottom();if(null!=t){null!=e?(c(t).data("rowIdx",e),c(t.children[0]).data("rowIdx",e)):e=c(t).data("rowIdx");var i=this._getLayoutManager().getScroller(),o=this._getTableBodyRow(e),l=this._getTouchAffordanceGlassPane();if(null!=o&&null!=l){var n=o.getBoundingClientRect(),s=l.getBoundingClientRect();t.style[I.CSS_PROP._TOP]=n.top-s.top+n.height-t.clientHeight/2+I.CSS_VAL._PX,t.style[I.CSS_PROP._LEFT]=i.clientWidth/2+I.CSS_VAL._PX}}},I.prototype._moveTableHeaderColumn=function(e,t,i){var o=[],l=[],n=[],s=[],a=null,r=null,_=!1;t===this._getColumnDefs().length&&(t-=1,_=!0);var h=this._getTableHeaderColumn(t),d=this._getTableFooterCell(t),u=this._getPlaceHolderRowCell(t);for(let t=0;t<e.length;t++){let i=e[t];o[t]=this._getTableHeaderColumn(i),l[t]=this._getTableFooterCell(i),this._isAddNewRowEnabled()&&(s[t]=this._getPlaceHolderRowCell(i))}for(let t=0;t<e.length;t++)null!=o[t]&&(r=o[t].getAttribute(I.DOM_ATTR._COLSPAN),null==h||null!=r&&1!==r||(_?(h.parentNode.insertBefore(o[t],h.nextSibling),h=o[t]):h.parentNode.insertBefore(o[t],h))),null!=l[t]&&(r=l[t].getAttribute(I.DOM_ATTR._COLSPAN),null==d||null!=r&&1!==r||(_?(d.parentNode.insertBefore(l[t],d.nextSibling),d=l[t]):d.parentNode.insertBefore(l[t],d))),null!=s[t]&&(r=s[t].getAttribute(I.DOM_ATTR._COLSPAN),null==u||null!=r&&1!==r||(_?(u.parentNode.insertBefore(s[t],u.nextSibling),u=s[t]):u.parentNode.insertBefore(s[t],u)));var S=this._getTableBodyRows();for(let i=0;i<S.length;i++){for(let t=0;t<e.length;t++)n[t]=this._getTableBodyCell(i,e[t],null);a=this._getTableBodyCell(i,t,null);for(let t=0;t<e.length;t++)null!=n[t]&&(r=n[t].getAttribute(I.DOM_ATTR._COLSPAN),null==a||null!=r&&1!==r||(_?(a.parentNode.insertBefore(n[t],a.nextSibling),a=n[t]):a.parentNode.insertBefore(n[t],a)))}var E=[],C=this.options.columns.length;for(let e=0;e<C;e++)E[e]=c.extend({},{},this.options.columns[e]);var T=_?t:t-1,p=[],g=[],f=[],A=e.reverse();if(!this._columnsDestMap){this._columnsDestMap=[];for(let e=0;e<E.length;e++)this._columnsDestMap[e]=e}return A.forEach(function(e){e<=T&&(T-=1),p.unshift(E.splice(e,1)[0]),g.unshift(this._columnDefArray.splice(e,1)[0]),f.unshift(this._columnsDestMap.splice(e,1)[0])}.bind(this)),E.splice(T+1,0,...p),this._columnDefArray.splice(T+1,0,...g),this._columnsDestMap.splice(T+1,0,...f),this.option("columns",E,{_context:{writeback:!0,originalEvent:i,internalSet:!0}}),this._queueTask(function(){this._getLayoutManager().notifyTableUpdate(I._UPDATE._COL_REORDER)}.bind(this)),this._columnsDestMap},I.prototype._refreshContextMenu=function(){var e=this._menuContainer;if(e)for(var t=e.querySelectorAll("[data-oj-command]"),i=0;i<t.length;i++){var o=c(t[i]).children(I.DOM_ELEMENT._A);if(0===o.length&&"OJ-OPTION"===t[i].tagName&&(o=c(t[i])),o.length>0){var l,n=t[i].getAttribute(I._DATA_OJ_COMMAND).split("-");"sort"===(n=n[n.length-1])?l=this.getTranslatedString("labelSort"):"sortAsc"===n?l=this.getTranslatedString("labelSortAsc"):"sortDsc"===n?l=this.getTranslatedString("labelSortDsc"):"resize"===n&&(l=this.getTranslatedString("labelResizeColumn")),o.contents().filter(function(){return 3===this.nodeType})[0].nodeValue=l}}},I.prototype._removeDragOverIndicatorColumn=function(){this._getLayoutManager().removeDragOverIndicatorColumn()},I.prototype._removeDragOverIndicatorRow=function(){var e=this._getDragOverIndicatorRow(!1);null!=e&&c(e).remove(),0===this._getTableBodyRows().length&&this._showNoDataMessage()},I.prototype._removeTableBodyRow=function(e,t){var i;null!=(i=null!=t?t:this._getTableBodyRow(e))&&(f.subtreeDetached(i),(this._hasCellTemplate||this._hasRowTemplate)&&this._cleanTemplateNodes(i),c(i).remove(),this._clearCachedDomRowData())},I.prototype._removeAllTableBodyRows=function(){var e=this._getTableBodyRows();if(e.length>0){var t=this._getTableBody();if(null!=t){f.subtreeDetached(t);for(var i=0;i<e.length;i++)(this._hasCellTemplate||this._hasRowTemplate)&&this._cleanTemplateNodes(e[i]),c(e[i]).remove();(this._hasCellTemplate||this._hasRowTemplate)&&(this._hasCellTemplate=!1,this._hasRowTemplate=!1,this._registerDomEventListeners())}this._clearCachedDomRowData()}},I.prototype._removeTableBodyRowTouchSelectionAffordance=function(){for(var e=this._getTableContainer(),t=this._getTableElementsByClassName(e,I.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_TOUCH_AREA_CLASS),i=0;i<t.length;i++)c(t[i]).remove()},I.prototype._setTableBodyCellAttributes=function(e,t,i,o){var l=o.getAttribute(I.DOM_ATTR._ID);if(!(null!=l&&l.length>0)&&null!=this._getColumnDefs()[i]){var n=this._hashCode(t);null==n&&(n=this._hashCode(null!=t?t.toString():e.toString())),l=this._getTableUID()+":"+n+"_"+i,o.setAttribute(I.DOM_ATTR._ID,l)}},I.prototype._setTableBodyRowAttributes=function(e,t){t[I._ROW_ITEM_EXPANDO]=e},I.prototype._setTableHeaderColumnAttributes=function(e,t){var i=this._getColumnDefs()[e];t.getAttribute(I.DOM_ATTR._ID)||t.setAttribute(I.DOM_ATTR._ID,this._getTableUID()+":"+i.id)},I.prototype._setTableFooterColumnAttributes=function(e,t){var i=this._getColumnDefs()[e];t.getAttribute(I.DOM_ATTR._ID)||t.setAttribute(I.DOM_ATTR._ID,this._getTableUID()+":"+i.id+":ftr")},I.prototype._setTableColumnCellsClass=function(e,t,i){var o,l=this._getTableBodyRows();if(l.length>0)if(null===e){var n=null,s=this._getTableBody();if(null!=(n=t?this._getTableElementsByTagName(s,I.DOM_ELEMENT._TD):this._getTableElementsByClassName(s,i))&&n.length>0){var a=n.length;for(o=0;o<a;o++)t?n[o].classList.add(i):n[o].classList.remove(i)}}else{var r=l.length;for(o=0;o<r;o++){var _=this._getTableBodyCell(o,e,null);t?_.classList.add(i):_.classList.remove(i)}}},I.prototype._setTableBodyMessage=function(e){var t=this._getTableBodyMessageCell();c(t).empty(),t.appendChild(document.createTextNode(e))},I.prototype._styleInitialTable=function(){var e=this._getTable(),t=this._getTableElementsByTagName(e,I.DOM_ELEMENT._THEAD);t=t.length>0?t[0]:null;var i=this._getTableElementsByTagName(e,I.DOM_ELEMENT._TFOOT);i=i.length>0?i[0]:null;var o=this._getTableElementsByTagName(e,I.DOM_ELEMENT._TBODY);if(o=o.length>0?o[0]:null,-1!==parseInt(this._getRootElement().getAttribute(I.DOM_ATTR._TABINDEX),10))e.setAttribute(I.DOM_ATTR._TABINDEX,"0"),this._focusable({element:e,applyHighlight:!0,setupHandlers:this._focusSetupHandlers.bind(this)});else{e.setAttribute(I.DOM_ATTR._TABINDEX,"-1");var l=function(){};this._focusSetupHandlers(l,l)}e.setAttribute(I.DOM_ATTR._ARIA_LABELLEDBY,this._getTableContainer().id),this._styleTableHeader(t),this._styleTableFooter(i),this._styleTableBody(o),this._styleTableContainer(this._getTableContainer())},I.prototype._styleTableBody=function(e){e.classList.add(I.CSS_CLASSES._TABLE_BODY_CLASS),e.setAttribute(f._OJ_CONTAINER_ATTR,this.widgetName),e.setAttribute(C._OJ_CONTEXT_ATTRIBUTE,"")},I.prototype._styleTableBodyCell=function(e,t,i){var o=this._getColumnDefs()[e];!i&&t.classList.contains(I.CSS_CLASSES._TABLE_DATA_CELL_CLASS)||(t.classList.add(I.CSS_CLASSES._TABLE_DATA_CELL_CLASS),t.classList.add(I.CSS_CLASSES._TABLE_DATE_CELL_FORM_CONTROL_CLASS));var l=t.getAttribute(I.DOM_ATTR._STYLE)||{};if(null==o||null==o.style||!i&&l===o.style||A.applyMergedInlineStyles(t,l,o.style),null==o||null==o.className||!i&&c(t).hasClass(o.className)||c(t).addClass(o.className),!this._isVerticalGridEnabled()||!i&&t.classList.contains(I.CSS_CLASSES._TABLE_VGRID_LINES_CLASS)||t.classList.add(I.CSS_CLASSES._TABLE_VGRID_LINES_CLASS),this._isStickyLayoutEnabled()){var n=null!=o?o.frozenEdge:null;n===I._OPTION_FROZEN_EDGE._START?(t.classList.add(I.CSS_CLASSES._TABLE_FROZEN_START),t.classList.remove(I.CSS_CLASSES._TABLE_FROZEN_END)):n===I._OPTION_FROZEN_EDGE._END?(t.classList.add(I.CSS_CLASSES._TABLE_FROZEN_END),t.classList.remove(I.CSS_CLASSES._TABLE_FROZEN_START)):(t.classList.remove(I.CSS_CLASSES._TABLE_FROZEN_END),t.classList.remove(I.CSS_CLASSES._TABLE_FROZEN_START))}},I.prototype._styleTableAddRowCell=function(e,t){var i=this._getColumnDefs()[e],o=null!=i?i.frozenEdge:null;o===I._OPTION_FROZEN_EDGE._START?(t.classList.add(I.CSS_CLASSES._TABLE_FROZEN_START),t.classList.remove(I.CSS_CLASSES._TABLE_FROZEN_END)):o===I._OPTION_FROZEN_EDGE._END?(t.classList.add(I.CSS_CLASSES._TABLE_FROZEN_END),t.classList.remove(I.CSS_CLASSES._TABLE_FROZEN_START)):(t.classList.remove(I.CSS_CLASSES._TABLE_FROZEN_END),t.classList.remove(I.CSS_CLASSES._TABLE_FROZEN_START)),this._isVerticalGridEnabled()&&t.classList.add(I.CSS_CLASSES._TABLE_VGRID_LINES_CLASS)},I.prototype._styleTableBodyRow=function(e,t){!t&&e.classList.contains(I.CSS_CLASSES._TABLE_DATA_ROW_CLASS)||e.classList.add(I.CSS_CLASSES._TABLE_DATA_ROW_CLASS),this._invokeRowStickyCallback(e[I._ROW_ITEM_EXPANDO])===I._CONST_ON&&e.classList.add(I.CSS_CLASSES._TABLE_STICKY_ROW_CLASS)},I.prototype._styleTableContainer=function(e){this.options.display===I._OPTION_DISPLAY._GRID?e.classList.add(I.CSS_CLASSES._TABLE_COMPACT_CLASS):e.classList.remove(I.CSS_CLASSES._TABLE_COMPACT_CLASS);var t=this.options.editMode;if(null!=t&&t!==I._OPTION_EDIT_MODE._NONE?e.classList.add(I.CSS_CLASSES._TABLE_EDIT_CLASS):e.classList.remove(I.CSS_CLASSES._TABLE_EDIT_CLASS),this._isHorizontalGridEnabled()?e.classList.add(I.CSS_CLASSES._TABLE_HGRID_CLASS):e.classList.remove(I.CSS_CLASSES._TABLE_HGRID_CLASS),this._isStickyLayoutEnabled()?e.classList.add(I.CSS_CLASSES._TABLE_STICKY_CLASS):e.classList.remove(I.CSS_CLASSES._TABLE_STICKY_CLASS),this._isFixedLayoutEnabled()?e.classList.add(I.CSS_CLASSES._TABLE_FIXED_CLASS):e.classList.remove(I.CSS_CLASSES._TABLE_FIXED_CLASS),this._isAddNewRowEnabled()?e.classList.add(I.CSS_CLASSES._TABLE_ADD_ROW_CLASS):e.classList.remove(I.CSS_CLASSES._TABLE_ADD_ROW_CLASS),this._isExternalScrollEnabled()){if(e.classList.add(I.CSS_CLASSES._TABLE_EXTERNAL_SCROLL_CLASS),!this._isTableHeaderless()){var i="0";null!=this.options.scrollPolicyOptions.scrollerOffsetTop&&(i=this.options.scrollPolicyOptions.scrollerOffsetTop),this._updateHeaderTop(i)}if(!this._isTableFooterless()){var o="0";null!=this.options.scrollPolicyOptions.scrollerOffsetBottom&&(o=this.options.scrollPolicyOptions.scrollerOffsetBottom),this._updateFooterBottom(o)}}else this._isStickyLayoutEnabled()&&(e.classList.remove(I.CSS_CLASSES._TABLE_EXTERNAL_SCROLL_CLASS),this._isTableHeaderless()||this._updateHeaderTop(""),this._isTableFooterless()||this._updateFooterBottom(""));this._getRowSelectionMode()===I._OPTION_SELECTION_MODES._MULTIPLE?e.classList.add(I.CSS_CLASSES._TABLE_MULTI_ROW_SELECT_CLASS):e.classList.remove(I.CSS_CLASSES._TABLE_MULTI_ROW_SELECT_CLASS)},I.prototype._styleTableFooter=function(e){if(e){e.classList.add(I.CSS_CLASSES._TABLE_FOOTER_CLASS);var t=this._getTableElementsByTagName(e,I.DOM_ELEMENT._TR)[0];t.classList.add(I.CSS_CLASSES._TABLE_FOOTER_ROW_CLASS),t.setAttribute(C._OJ_CONTEXT_ATTRIBUTE,"")}},I.prototype._styleTableFooterCell=function(e,t){var i=this._getColumnDefs()[e],o=t.getAttribute(I.DOM_ATTR._STYLE)||{};null!=i.footerStyle&&o!==i.footerStyle&&A.applyMergedInlineStyles(t,o,i.footerStyle),t.classList.contains(I.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS)||t.classList.add(I.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS),this._isVerticalGridEnabled()&&!t.classList.contains(I.CSS_CLASSES._TABLE_VGRID_LINES_CLASS)&&t.classList.add(I.CSS_CLASSES._TABLE_VGRID_LINES_CLASS),i.footerClassName&&c(t).addClass(i.footerClassName),this._isStickyLayoutEnabled()&&(i.frozenEdge===I._OPTION_FROZEN_EDGE._START?(t.classList.add(I.CSS_CLASSES._TABLE_FROZEN_START),t.classList.remove(I.CSS_CLASSES._TABLE_FROZEN_END)):i.frozenEdge===I._OPTION_FROZEN_EDGE._END?(t.classList.add(I.CSS_CLASSES._TABLE_FROZEN_END),t.classList.remove(I.CSS_CLASSES._TABLE_FROZEN_START)):(t.classList.remove(I.CSS_CLASSES._TABLE_FROZEN_END),t.classList.remove(I.CSS_CLASSES._TABLE_FROZEN_START)))},I.prototype._styleTableHeader=function(e){if(e){e.classList.add(I.CSS_CLASSES._TABLE_HEADER_CLASS),e.style[I.CSS_PROP._DISPLAY]="table-header-group";var t=this._getTableElementsByTagName(e,I.DOM_ELEMENT._TR)[0];t.classList.add(I.CSS_CLASSES._TABLE_HEADER_ROW_CLASS),t.style[I.CSS_PROP._POSITION]=I.CSS_VAL._RELATIVE,t.setAttribute(C._OJ_CONTEXT_ATTRIBUTE,"")}},I.prototype._styleTableHeaderColumn=function(e,t,i){var o=this._getColumnDefs()[e];!i&&t.classList.contains(I.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS)||t.classList.add(I.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS),o.sortable===I._OPTION_ENABLED&&t.classList.add(I.CSS_CLASSES._TABLE_SORT_CLASS),!0===o.showRequired&&this._isStickyLayoutEnabled()&&t.classList.add(I.CSS_CLASSES._TABLE_SHOW_REQUIRED_CLASS),this._isVerticalGridEnabled()&&(!i&&t.classList.contains(I.CSS_CLASSES._TABLE_VGRID_LINES_CLASS)||t.classList.add(I.CSS_CLASSES._TABLE_VGRID_LINES_CLASS));var l=t.getAttribute(I.DOM_ATTR._STYLE)||{};null==o.headerStyle||!i&&l===o.headerStyle||A.applyMergedInlineStyles(t,l,o.headerStyle),null==o.headerClassName||!i&&c(t).hasClass(o.headerClassName)||c(t).addClass(o.headerClassName),this._isStickyLayoutEnabled()&&(o.frozenEdge===I._OPTION_FROZEN_EDGE._START?(t.classList.add(I.CSS_CLASSES._TABLE_FROZEN_START),t.classList.remove(I.CSS_CLASSES._TABLE_FROZEN_END)):o.frozenEdge===I._OPTION_FROZEN_EDGE._END?(t.classList.add(I.CSS_CLASSES._TABLE_FROZEN_END),t.classList.remove(I.CSS_CLASSES._TABLE_FROZEN_START)):(t.classList.remove(I.CSS_CLASSES._TABLE_FROZEN_END),t.classList.remove(I.CSS_CLASSES._TABLE_FROZEN_START)))},I.prototype._getColspanLogicalElements=function(e){for(var t=0,i=[],o=e.length,l=0;l<o;l++){var n=e[l].getAttribute(I.DOM_ATTR._COLSPAN);if(null!=n){n=parseInt(n,10);for(var s=0;s<n;s++)i[t+s]=e[l];t+=n}else i[t]=e[l],t+=1}return i},I.prototype._isHorizontalGridEnabled=function(){if(this.options.horizontalGridVisible===I._OPTION_ENABLED)return!0;if(this.options.horizontalGridVisible===I._OPTION_AUTO){if(this.options.display===I._OPTION_DISPLAY._GRID)return!0;if("enabled"===this._getDefaultOptions().horizontalGridVisible)return!0}return!1},I.prototype._isSelectAllControlVisible=function(){return!(!this._isDefaultSelectorEnabled()||"hidden"===this.options.selectAllControl)},I.prototype._isVerticalGridEnabled=function(){return this.options.verticalGridVisible===I._OPTION_ENABLED||this.options.verticalGridVisible===I._OPTION_AUTO&&this.options.display===I._OPTION_DISPLAY._GRID},I.prototype._refreshTouchAffordanceGlassPanePosition=function(){var e=this._getTouchAffordanceGlassPane();if(e){var t=this._getLayoutManager().getScroller().getBoundingClientRect(),i=this._getTableContainer().getBoundingClientRect();e.style[I.CSS_PROP._TOP]=t.top-i.top+I.CSS_VAL._PX,e.style[I.CSS_PROP._BOTTOM]=t.bottom-i.bottom+I.CSS_VAL._PX,this._moveTableBodyRowTouchSelectionAffordanceTop(),this._moveTableBodyRowTouchSelectionAffordanceBottom()}},I.prototype._refreshTableStatusPosition=function(e){var t=this._getTableContainer(),i=t.clientHeight,o=this._getTableStatusMessage(),l=0,n=i,s=this._getTableHeader();if(null!=s){var a=s.offsetHeight;l=a,n-=a}var r=this._getTableFooter();null!=r&&(n-=r.offsetHeight);var _=this._getTableBottomSlot();if(null!=_&&(n-=_.offsetHeight),this._isSkeletonSupport()){var h=0,d=this._getDefaultSkeletonDimension();d.width>0&&d.height>0&&(h=Math.max(1,Math.ceil(n/d.height)));for(var u=0;u<h;u++)o.appendChild(this._createSkeletonRow());this._skeletonFadeInEndListener=function(){o.classList.remove(I.CSS_CLASSES._ANIMATION_SKELETON_FADE_IN_CLASS),o.querySelectorAll(".oj-table-skeleton").forEach(function(e){e.classList.add("oj-animation-skeleton")}),o.removeEventListener("animationend",this._skeletonFadeInEndListener)}.bind(this),o.addEventListener("animationend",this._skeletonFadeInEndListener),o.classList.add(I.CSS_CLASSES._ANIMATION_SKELETON_FADE_IN_CLASS)}else n<=40&&(l=0,n=i);if(o.style[I.CSS_PROP._TOP]=l+I.CSS_VAL._PX,o.style[I.CSS_PROP._HEIGHT]=n+I.CSS_VAL._PX,o.style[I.CSS_PROP._WIDTH]=t.clientWidth+I.CSS_VAL._PX,e&&(o.style[I.CSS_PROP._DISPLAY]=I.CSS_VAL._INLINE,this._statusMessageShown=!0),!this._isSkeletonSupport()){var c=o.children[0];c.style[I.CSS_PROP._TOP]=(n-c.offsetHeight)/2+I.CSS_VAL._PX}},I.prototype._createSkeletonRow=function(){var e=document.createElement("div");e.className=I.CSS_CLASSES._TABLE_SKELETON_CONTAINER_CLASS;var t=document.createElement("div");return t.className=I.CSS_CLASSES._TABLE_SKELETON_CLASS,e.appendChild(t),e},I.prototype._getDefaultSkeletonDimension=function(){if(null==this._defaultSkeletonDim){var e=this._getTableContainer(),t=this._createSkeletonRow();t.style.visibility="hidden",t.style.display="block",e.appendChild(t);var i={width:t.offsetWidth,height:t.offsetHeight};return e.removeChild(t),i.height>0&&i.width>0&&(this._defaultSkeletonDim=i),i}return this._defaultSkeletonDim},I.prototype._cacheDomElement=function(e,t){this._domCache||(this._domCache={}),this._domCache[e]=t},I.prototype._clearDomCache=function(e){e&&this._domCache?delete this._domCache[e]:this._domCache={}},I.prototype._getCachedDomElement=function(e){return this._domCache?this._domCache[e]:null},I.prototype._isCachedDomElement=function(e){return this._domCache||(this._domCache={}),-1!==Object.keys(this._domCache).indexOf(e)},I.prototype._getTableElementByClassName=function(e,t){if(!this._isCachedDomElement(e)){var i=this._getTableContainer();if(i)if(this._cacheDomElement(e,null),t){if(this._cacheDomElement(e,this._getChildElementByClassName(i,e)),null==this._getCachedDomElement(e)){var o=this._getTable();this._cacheDomElement(e,this._getChildElementByClassName(o,e))}}else{var l=this._getTableElementsByClassName(i,e);l.length>0&&this._cacheDomElement(e,l[0])}}return this._getCachedDomElement(e)},I.prototype._getChildElementByClassName=function(e,t){if(null!=e.childNodes&&e.childNodes.length>0)for(var i=0;i<e.childNodes.length;i++)if(null!=e.childNodes[i].classList&&e.childNodes[i].classList.contains(t))return e.childNodes[i];return null},I.prototype._getTableElementsByClassName=function(e,t,i){var o=e.getElementsByClassName(t);return this._filterTableOwnedElements(o,i?e:null)},I.prototype._getTableElementsByTagName=function(e,t,i){var o=e.getElementsByTagName(t);return this._filterTableOwnedElements(o,i?e:null)},I.prototype._tableQuerySelectorAll=function(e,t,i){var o=e.querySelectorAll(t);return this._filterTableOwnedElements(o,i?e:null)},I.prototype._filterTableOwnedElements=function(e,t){var i,o;if(t){i=t;for(var l=t.getElementsByTagName(I.DOM_ELEMENT._TABLE),n=0;n<l.length;n++)if(l[n].parentNode===t||l[n].parentNode.parentNode===t){o=l[n];break}}else i=this._getTableContainer(),o=this._getTable();return Array.prototype.filter.call(e,function(e){return this._isTableOwned(e,i,o)}.bind(this))},I.prototype._isTableOwned=function(e,t,i){var o=t||this._getTableContainer(),l=t?i:this._getTable();if(o){if(l){var n=this._getFirstAncestor(e,l.tagName);if(n===l)return!0;if(n)return!1}var s=this._getFirstAncestor(e,"."+I.CSS_CLASSES._TABLE_CONTAINER_CLASS);if(s===o)return!0;if(s)return!1;if(!o.contains(e))return!0}return!1},I.prototype._focusSetupHandlers=function(e,t){this._setFocusInHandler(e),this._setFocusOutHandler(t)},I.prototype._getSortIconContainer=function(e){return this._getTableElementsByClassName(e,I.CSS_CLASSES._TABLE_SORT_ICON_CONTAINER_CLASS)[0]},I.prototype._getSortIcon=function(e){var t=this._getSortIconContainer(e);return null!=t?t.firstChild:null},I.prototype._getTableBodySelectorCell=function(e){if(null!=e)for(var t=e.children,i=0;i<t.length;i++)if(t[i].classList.contains(I.CSS_CLASSES._TABLE_SELECTOR_CELL_CLASS))return t[i];return null},I.prototype._getTableSelectorColumn=function(){var e=this._getTableHeaderRow();if(null!=e)for(var t=e.children,i=0;i<t.length;i++)if(t[i].classList.contains(I.CSS_CLASSES._COLUMN_HEADER_SELECTOR_CELL_CLASS))return t[i];return null},I.prototype._getTableFooterSelectorCell=function(){var e=this._getTableFooterRow();if(null!=e)for(var t=e.children,i=0;i<t.length;i++)if(t[i].classList.contains(I.CSS_CLASSES._TABLE_FOOTER_SELECTOR_CELL_CLASS))return t[i];return null},I.prototype._isGutterStartColumnEnabled=function(){if(null==this._isGutterStartColumnEnabledCache)if(this.options.display!==I._OPTION_DISPLAY._GRID&&this._isStickyLayoutEnabled()){const e=this._getRootElement();this._isGutterStartColumnEnabledCache=window.getComputedStyle(e).getPropertyValue("--oj-core-gutter-start").length>0}else this._isGutterStartColumnEnabledCache=!1;return this._isGutterStartColumnEnabledCache},I.prototype._isGutterEndColumnEnabled=function(){if(null==this._isGutterEndColumnEnabledCache)if(this.options.display!==I._OPTION_DISPLAY._GRID&&this._isStickyLayoutEnabled()){const e=this._getRootElement();this._isGutterEndColumnEnabledCache=window.getComputedStyle(e).getPropertyValue("--oj-core-gutter-end").length>0}else this._isGutterEndColumnEnabledCache=!1;return this._isGutterEndColumnEnabledCache},I.prototype._getTableGutterWidth=function(e){let t="start"===e?this._gutterStartWidth:this._gutterEndWidth;if(null==t||0===t){let i=this._getTableGutterCell("header",e);if(null==i&&(i=this._getTableGutterCell("body",e,this._getTableBodyRow(0))),null==i)return 0;t=i.getBoundingClientRect().width,"start"===e?this._gutterStartWidth=t:this._gutterEndWidth=t}return t},I.prototype._createTableGutterCol=function(){let e=document.createElement(I.DOM_ELEMENT._COL);return e.classList.add(I.CSS_CLASSES._TABLE_COL_GUTTER_CLASS),e},I.prototype._createTableGutterCell=function(e,t){let i,o="header"===e?I.DOM_ELEMENT._TH:I.DOM_ELEMENT._TD,l=document.createElement(o);return i="header"===e?"start"===t?I.CSS_CLASSES._TABLE_GUTTER_START_HEADER_CELL:I.CSS_CLASSES._TABLE_GUTTER_END_HEADER_CELL:"footer"===e?"start"===t?I.CSS_CLASSES._TABLE_GUTTER_START_FOOTER_CELL:I.CSS_CLASSES._TABLE_GUTTER_END_FOOTER_CELL:"start"===t?I.CSS_CLASSES._TABLE_GUTTER_START_BODY_CELL:I.CSS_CLASSES._TABLE_GUTTER_END_BODY_CELL,l.classList.add(i),"start"===t?l.classList.add(I.CSS_CLASSES._TABLE_FROZEN_START):l.classList.add(I.CSS_CLASSES._TABLE_FROZEN_END),l},I.prototype._getTableGutterCell=function(e,t,i){let o;if("header"===e?(i=this._getTableHeaderRow(),o="start"===t?I.CSS_CLASSES._TABLE_GUTTER_START_HEADER_CELL:I.CSS_CLASSES._TABLE_GUTTER_END_HEADER_CELL):"footer"===e?(i=this._getTableFooterRow(),o="start"===t?I.CSS_CLASSES._TABLE_GUTTER_START_FOOTER_CELL:I.CSS_CLASSES._TABLE_GUTTER_END_FOOTER_CELL):o="start"===t?I.CSS_CLASSES._TABLE_GUTTER_START_BODY_CELL:I.CSS_CLASSES._TABLE_GUTTER_END_BODY_CELL,null!=i)for(var l=i.children,n=0;n<l.length;n++)if(l[n].classList.contains(o))return l[n];return null},I.CSS_CLASSES={_OPTION_DEFAULTS_CLASS:"oj-table-option-defaults",_TABLE_CONTAINER_CLASS:"oj-table-container",_TABLE_SCROLLER_CLASS:"oj-table-scroller",_TABLE_EXTERNAL_SCROLL_CLASS:"oj-table-external-scroll",_TABLE_CLASS:"oj-table",_TABLE_STICKY_CLASS:"oj-table-sticky",_TABLE_FIXED_CLASS:"oj-table-fixed",_TABLE_STRETCH_CLASS:"oj-table-stretch",_TABLE_COMPACT_CLASS:"oj-table-grid-display",_TABLE_HGRID_CLASS:"oj-table-horizontal-grid",_TABLE_EDIT_CLASS:"oj-table-editable",_TABLE_MULTI_ROW_SELECT_CLASS:"oj-table-multiple-row-selection",_TABLE_SCROLL_VERTICAL_CLASS:"oj-table-scroll-vertical",_TABLE_SCROLL_HORIZONTAL_CLASS:"oj-table-scroll-horizontal",_TABLE_SORT_CLASS:"oj-table-sort",_TABLE_SHOW_REQUIRED_CLASS:"oj-table-show-required",_TABLE_ELEMENT_CLASS:"oj-table-element",_TABLE_FOOTER_CLASS:"oj-table-footer",_TABLE_FOOTER_ROW_CLASS:"oj-table-footer-row",_TABLE_HEADER_CLASS:"oj-table-header",_TABLE_HEADER_ROW_CLASS:"oj-table-header-row",_TABLE_HEADER_SELECTOR_CLASS:"oj-table-header-selector",_TABLE_COLGROUP_CLASS:"oj-table-colgroup",_TABLE_COL_GUTTER_CLASS:"oj-table-gutter-col",_TABLE_COL_SELECTOR_CLASS:"oj-table-col-selector",_TABLE_COL_CLASS:"oj-table-col",_TABLE_BOTTOM_SLOT_CLASS:"oj-table-slot-bottom",_TABLE_SORT_ICON_CONTAINER_CLASS:"oj-table-sort-icon-container",_COLUMN_HEADER_CELL_CLASS:"oj-table-column-header-cell",_TABLE_DISABLE_WRAPPING_CLASS:"oj-table-disable-wrapping",_TABLE_HEADER_WRAP_TEXT_CLASS:"oj-table-header-cell-wrap-text",_COLUMN_HEADER_SELECTOR_CELL_CLASS:"oj-table-column-header-selector-cell",_COLUMN_HEADER_DROP_EMPTY_CELL_CLASS:"oj-table-column-header-drop-empty-cell",_COLUMN_HEADER_CLASS:"oj-table-column-header",_COLUMN_CUSTOM_HEADER_CLASS:"oj-table-custom-header",_COLUMN_HEADER_TEXT_CLASS:"oj-table-column-header-text",_COLUMN_HEADER_ASC_ICON_CLASS:"oj-table-column-header-asc-icon",_COLUMN_HEADER_DSC_ICON_CLASS:"oj-table-column-header-dsc-icon",_COLUMN_HEADER_SHOW_REQUIRED_ICON_CLASS:"oj-table-column-header-show-required-icon",_COLUMN_HEADER_DEFAULT_SORT_ICON_CLASS:"oj-table-column-header-default-sort-icon",_COLUMN_HEADER_DRAG_INDICATOR_BEFORE_CLASS:"oj-table-column-header-drag-indicator-before",_COLUMN_HEADER_DRAG_INDICATOR_AFTER_CLASS:"oj-table-column-header-drag-indicator-after",_COLUMN_HEADER_DRAG_IMAGE:"oj-table-column-header-cell-drag-image",_COLUMN_HEADER_RESIZING_CLASS:"oj-table-column-header-resizing",_COLUMN_HEADER_RESIZE_INDICATOR_CLASS:"oj-table-column-header-resize-indicator",_COLUMN_RESIZE_INDICATOR_CLASS:"oj-table-column-resize-indicator",_COLUMN_DROP_INDICATOR_CLASS:"oj-table-column-drop-indicator",_TABLE_BODY_CLASS:"oj-table-body",_TABLE_BUFFER_ROW_CLASS:"oj-table-body-scroll-buffer",_TABLE_LEGACY_WIDTH_BUFFER_ROW_CLASS:"oj-table-legacy-width-buffer",_TABLE_LEGACY_WIDTH_BUFFER_CELL_CLASS:"oj-table-legacy-width-buffer-cell",_TABLE_DATA_ROW_CLASS:"oj-table-body-row",_TABLE_STICKY_ROW_CLASS:"oj-table-sticky-row",_TABLE_STUCK_ROW_CLASS:"oj-table-stuck-row",_TABLE_DATA_ROW_DRAG_INDICATOR_CLASS:"oj-table-body-row-drag-indicator",_TABLE_TOUCH_AFFORDANCE_GLASS_PANE_CLASS:"oj-table-touch-affordance-glass-pane",_TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_TOP_CLASS:"oj-table-body-row-touch-selection-affordance-top",_TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_BOTTOM_CLASS:"oj-table-body-row-touch-selection-affordance-bottom",_TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_TOP_ICON_CLASS:"oj-table-body-row-touch-selection-affordance-top-icon",_TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_BOTTOM_ICON_CLASS:"oj-table-body-row-touch-selection-affordance-bottom-icon",_TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_TOUCH_AREA_CLASS:"oj-table-body-row-touch-selection-affordance-touch-area",_TABLE_DATA_ROW_EDIT_CLASS:"oj-table-body-row-edit",_TABLE_DATA_ROW_SELECTOR_CLASS:"oj-table-body-row-selector",_TABLE_SELECTOR_CELL_CLASS:"oj-table-selector-cell",_TABLE_DATA_CURRENT_ROW_CLASS:"oj-table-body-current-row",_TABLE_ACTIVE_ELEMENT_CLASS:"oj-table-active-element",_TABLE_DATA_CELL_CLASS:"oj-table-data-cell",_TABLE_DATA_CELL_EDIT_CLASS:"oj-table-data-cell-edit",_TABLE_DATE_CELL_FORM_CONTROL_CLASS:"oj-form-control-inherit",_TABLE_VGRID_LINES_CLASS:"oj-table-vgrid-lines",_TABLE_FOOTER_CELL_CLASS:"oj-table-footer-cell",_TABLE_FOOTER_SELECTOR_CELL_CLASS:"oj-table-footer-selector-cell",_TABLE_FOOTER_DROP_EMPTY_CELL_CLASS:"oj-table-footer-drop-empty-cell",_TABLE_STATUS_ACC_NOTIFICATION_CLASS:"oj-table-status-acc-notification",_TABLE_STATUS_MESSAGE_CLASS:"oj-table-status-message",_TABLE_STATUS_MESSAGE_TEXT_CLASS:"oj-table-status-message-text",_TABLE_ACC_CONTEXT_INFO_CLASS:"oj-table-acc-context-info",_TABLE_ACC_STATE_INFO_CLASS:"oj-table-acc-state-info",_TABLE_ACC_ROW_STATE_INFO_CLASS:"oj-table-acc-row-state-info",_TABLE_WIDTH_CONTAINER_CLASS:"oj-table-width-container",_TABLE_LOADING_ICON_CLASS:"oj-table-loading-icon",_TABLE_BODY_MESSAGE_CLASS:"oj-table-body-message",_TABLE_BODY_MESSAGE_ROW_CLASS:"oj-table-body-message-row",_TABLE_NO_DATA_CONTAINER_CLASS:"oj-table-no-data-container",_TABLE_NO_DATA_ROW_CLASS:"oj-table-no-data-row",_TABLE_FETCH_SKELETON_ROW_CLASS:"oj-table-fetch-skeleton-row",_TABLE_SKELETON_CELL_CLASS:"oj-table-skeleton-cell",_TABLE_SKELETON_CONTAINER_CLASS:"oj-table-skeleton-container",_TABLE_SKELETON_CLASS:"oj-table-skeleton",_TABLE_ADD_ROW_CLASS:"oj-table-add-row",_TABLE_ADD_ROW_PLACEHOLDER_CLASS:"oj-table-add-row-placeholder",_TABLE_HIDDEN_CELL_CLASS:"oj-table-hidden-cell",_TABLE_FROZEN_START:"oj-table-frozen-start",_TABLE_FROZEN_END:"oj-table-frozen-end",_TABLE_FROZEN_EDGE:"oj-table-frozen-edge",_TABLE_GUTTER_START_HEADER_CELL:"oj-table-gutter-start-header-cell",_TABLE_GUTTER_END_HEADER_CELL:"oj-table-gutter-end-header-cell",_TABLE_GUTTER_START_BODY_CELL:"oj-table-gutter-start-body-cell",_TABLE_GUTTER_END_BODY_CELL:"oj-table-gutter-end-body-cell",_TABLE_GUTTER_START_FOOTER_CELL:"oj-table-gutter-start-footer-cell",_TABLE_GUTTER_END_FOOTER_CELL:"oj-table-gutter-end-footer-cell",_TABLE_LEGACY_SIZER_CLASS:"oj-table-legacy-sizer",_TABLE_LEGACY_SCROLL_CLASS:"oj-table-legacy-scroll",_TABLE_RESIZE_DIALOG_MOBILE_CLASS:"oj-table-resize-dialog-mobile",_BUTTON_SMALL_CLASS:"oj-button-sm",_SMALL_HOR_MARGIN_CLASS:"oj-sm-margin-2x-horizontal",_SMALL_6_CLASS:"oj-sm-6",_ICON_CLASS:"oj-icon",_WIDGET_ICON_CLASS:"oj-component-icon",_HIDDEN_CONTENT_ACC_CLASS:"oj-helper-hidden-accessible",_TEXT_ALIGN_END:"oj-helper-text-align-end",_ANIMATION_SKELETON_FADE_IN_CLASS:"oj-animation-skeleton-fade-in"},I.CSS_PROP={_DISPLAY:"display",_VISIBILITY:"visibility",_POSITION:"position",_HEIGHT:"height",_WIDTH:"width",_TOP:"top",_BOTTOM:"bottom",_LEFT:"left",_RIGHT:"right",_PADDING_TOP:"padding-top",_PADDING_BOTTOM:"padding-bottom",_PADDING_LEFT:"padding-left",_PADDING_RIGHT:"padding-right",_OVERFLOW:"overflow",_OVERFLOW_X:"overflow-x",_OVERFLOW_Y:"overflow-y",_MIN_WIDTH:"min-width",_MAX_WIDTH:"max-width",_MIN_HEIGHT:"min-height",_FLOAT:"float",_BORDER_TOP:"border-top",_BORDER_TOP_WIDTH:"border-top-width",_BORDER_BOTTOM_WIDTH:"border-bottom-width",_BORDER_LEFT_WIDTH:"border-left-width",_BORDER_RIGHT_WIDTH:"border-right-width",_BORDER_COLOR:"border-color",_MARGIN_BOTTOM:"margin-bottom",_VERTICAL_ALIGN:"vertical-align",_CURSOR:"cursor",_ZINDEX:"z-index",_BACKGROUND_COLOR:"background-color",_BOX_SIZING:"box-sizing"},I.CSS_VAL={_NONE:"none",_BLOCK:"block",_INLINE_BLOCK:"inline-block",_RELATIVE:"relative",_ABSOLUTE:"absolute",_INLINE:"inline",_AUTO:"auto",_HIDDEN:"hidden",_SCROLL:"scroll",_VISIBLE:"visible",_LEFT:"left",_PX:"px",_MIDDLE:"middle",_MOVE:"move",_FIXED:"fixed",_TRANSPARENT:"transparent",_BORDER_BOX:"border-box",_COL_RESIZE:"col-resize"},I.DOM_ATTR={_STYLE:"style",_TABINDEX:"tabindex",_TYPE:"type",_ID:"id",_TITLE:"title",_HREF:"href",_COLSPAN:"colspan",_DRAGGABLE:"draggable",_ROLE:"role",_ARIA_LABEL:"aria-label",_ARIA_LABELLEDBY:"aria-labelledby",_ARIA_HIDDEN:"aria-hidden"},I.DOM_ELEMENT={_DIV:"div",_A:"a",_TR:"tr",_TD:"td",_TH:"th",_TABLE:"table",_TBODY:"tbody",_THEAD:"thead",_TFOOT:"tfoot",_INPUT:"input",_UL:"ul",_SPAN:"span",_BUTTON:"button",_LABEL:"label",_COLGROUP:"colgroup",_COL:"col"},I.MARKER_STYLE_CLASSES={_WIDGET:"oj-component",_ACTIVE:"oj-active",_CLICKABLE_ICON:"oj-clickable-icon-nocontext",_DISABLED:"oj-disabled",_ENABLED:"oj-enabled",_FOCUS:"oj-focus",_FOCUS_HIGHLIGHT:"oj-focus-highlight",_HOVER:"oj-hover",_SELECTED:"oj-selected",_DEFAULT:"oj-default",_WARNING:"oj-warning",_DRAGGABLE:"oj-draggable",_DRAG:"oj-drag",_HIDE_VERTICAL_SCROLLBAR:"oj-table-hide-vertical-scrollbar"},I.DEFAULT_ROW_HEIGHT_GUESS=50,I.prototype._clearOpenPopupListeners=function(){null!=this._openPopup&&(this._openPopup.removeEventListener("focusin",this._handlePopupFocusinListener),this._openPopup.removeEventListener("focusout",this._handlePopupFocusoutListener),this._openPopup=null),this._handlePopupFocusinListener=null,this._handlePopupFocusoutListener=null},I.prototype._handlePopupFocusout=function(e){this._handleFocusout(e,!0)},I.prototype._handlePopupFocusin=function(e){this._handleFocusin(e,!0)},I.prototype._handleFocusout=function(e,t){this._clearFocusoutTimeout();var i=this._getTable();if(!t){this._clearOpenPopupListeners();var o=v.getLogicalChildPopup(i);if(null!=o&&!o.classList.contains("oj-messaging-popup"))return this._openPopup=o,this._handlePopupFocusinListener=this._handlePopupFocusin.bind(this),this._handlePopupFocusoutListener=this._handlePopupFocusout.bind(this),o.addEventListener("focusin",this._handlePopupFocusinListener),void o.addEventListener("focusout",this._handlePopupFocusoutListener)}this._setFocusoutBusyState(),this._focusoutTimeout=setTimeout(function(){this._isTableTab=null,this._tempFFFocus=null,this._clearOpenPopupListeners(),this._focusOutHandler(c(i)),this._focusOutHandler(c(this._getTableContainer())),this._clearKeyboardKeys(),this._unhighlightActive(),this._getLayoutManager().handleFocusout(),this._setTableEditable(!1,!1,0,!0,e),this._cleanAccStatus(),this._focusEditCell&&(this._focusEditCell.classList.remove(I.CSS_CLASSES._TABLE_DATA_CELL_EDIT_CLASS),this._focusEditCell=null),this._setTableActionableMode(!1,!0),this._clearFocusoutBusyState()}.bind(this),100)},I.prototype._handleFocusin=function(e,t){if(this._clearFocusoutTimeout(),this._clearFocusoutBusyState(),!t){this._clearOpenPopupListeners();var i=this._getTable(),o=this._getTableBody(),l=this._getTableContainer();if(this._focusInHandler(c(i)),this._focusInHandler(c(l)),e.target===o&&!this._tempFFFocus&&A.isFirefox())setTimeout(function(){i.focus()},0);else if(c(i).has(e.target).length>0){var n=this._getActiveRowIndex(),s=this._getActiveHeaderIndex(),a=this._getPlaceHolderRow();if(null!=a&&c(a).has(e.target).length>0){if(this._setActiveAddRow(),v.isActionableElement(e.target)&&(this._setTableActionableMode(!0,!0),this._isTableTab)){var r=this._getPlaceHolderRowCells();for(let t=0;t<r.length;t++){const i=r[t];if(c(i).has(e.target).length>0){let e=t;this._isDefaultSelectorEnabled()&&(e-=1),this._isGutterStartColumnEnabled()&&(e-=1),this._scrollColumnIntoViewport(e,i);break}}}}else if(this._isTableEditMode())if(this._isNodeEditable(e.target)||this._isNodeClickable(e.target)||this._isTableActionableMode()||this._hasEditableRow()||this._tempFFFocus||null!=n||null!=s){if(this._isTableTab&&null!=n){var _=this._getTableBodyCells(n);for(let t=0;t<_.length;t++){const i=_[t];if(c(i).has(e.target).length>0){this._scrollColumnIntoViewport(t,i);break}}}}else setTimeout(function(){i.focus()},0);else if(v.isActionableElement(e.target)){this._accActionFocus=!0;var h=this._getActiveObjectFromActionableChild(e.target);null!=h&&(h.type===I.ACTIVE_ELEMENT_TYPES._DATA_ROW?this._setActiveRow(h.index,e,!0,!0):h.type===I.ACTIVE_ELEMENT_TYPES._HEADER?this._setActiveHeader(h.index,e,!0):h.type===I.ACTIVE_ELEMENT_TYPES._FOOTER?this._setActiveFooter(h.index,e,!0):h.type===I.ACTIVE_ELEMENT_TYPES._NO_DATA?this._setActiveNoData():h.type===I.ACTIVE_ELEMENT_TYPES._ADD_ROW&&this._setActiveAddRow(),this._setTableActionableMode(!0,!0))}}else this._setTableActionableMode(!1,!0)}this._isTableTab=null},I.prototype._handleEditCellFocusEvent=function(e){var t=this._getEventTargetElement(e);this._getElementRowIdx(t)===this._getEditableRowIdx()&&(this._focusEditCell&&this._focusEditCell!==t&&this._focusEditCell.classList.contains(I.CSS_CLASSES._TABLE_DATA_CELL_EDIT_CLASS)&&this._focusEditCell.classList.remove(I.CSS_CLASSES._TABLE_DATA_CELL_EDIT_CLASS),t.classList.add(I.CSS_CLASSES._TABLE_DATA_CELL_EDIT_CLASS),this._focusEditCell=t)},I.prototype._events={focusout:function(e){this._handleFocusout(e)},focus:function(e){this._isExternalScrollEnabled()&&(this._browserAutoScrollInitPos=this._getCurrentVerticalScrollPosition().y,this._browserAutoScrollTimeout=setTimeout(function(){this._browserAutoScrollInitPos=null}.bind(this),0)),this._syncActiveElement(e,!0,this._isSkipScrollOnFocus),this._isSkipScrollOnFocus&&(this._isSkipScrollOnFocus=!1)},focusin:function(e){this._handleFocusin(e)},"focus .oj-table-data-cell":function(e){this._handleEditCellFocusEvent(e)},"focus .oj-table-selector-cell":function(e){this._handleEditCellFocusEvent(e)},keydown:function(e){var t=e.key||e.keyCode;this._addKeyboardKey(t);var i=this._getKeyboardKeys()[0];if(!this._isEditPending&&(A.isEscapeKeyEvent(i)||A.isEnterKeyEvent(i)||A.isF2KeyEvent(i)||A.isTabKeyEvent(i)||!this._isNodeEditable(e.target))&&(1===this._getKeyboardKeys().length||2===this._getKeyboardKeys().length&&e[I._KEYBOARD_CODES._MODIFIER_SHIFT])){(this._isKeyPressMatch(A.isArrowUpKeyEvent)||this._isKeyPressMatch(A.isArrowDownKeyEvent)||this._isKeyPressMatch(A.isArrowLeftKeyEvent)||this._isKeyPressMatch(A.isArrowRightKeyEvent)||this._isKeyPressMatch(A.isHomeKeyEvent)||this._isKeyPressMatch(A.isEndKeyEvent))&&(e.preventDefault(),e.stopPropagation());var o=e[I._KEYBOARD_CODES._MODIFIER_SHIFT];this._isKeyPressMatch(A.isArrowUpKeyEvent)||this._isKeyPressMatch(A.isArrowDownKeyEvent)?this._handleKeydownUpDown(e,o&&this._getRowSelectionMode()===I._OPTION_SELECTION_MODES._MULTIPLE):this._isKeyPressMatch(A.isArrowLeftKeyEvent)||this._isKeyPressMatch(A.isArrowRightKeyEvent)?this._handleKeydownLeftRight(e,o&&this._getColumnSelectionMode()===I._OPTION_SELECTION_MODES._MULTIPLE):this._isKeyPressMatch(A.isTabKeyEvent)?this._handleKeydownTab(e):A.isF2KeyEvent(i)?this._handleKeydownF2(e):A.isSpaceBarKeyEvent(i)?this._handleKeydownSpacebar(e):A.isEnterKeyEvent(i)?this._handleKeydownEnter(e):A.isHomeKeyEvent(i)?this._handleKeydownHome(e):A.isEndKeyEvent(i)?this._handleKeydownEnd(e):A.isEscapeKeyEvent(i)&&this._handleKeydownEsc(e)}},keyup:function(e){if(A.isMac()&&this._isKeyPressMatch(A.isMetaKeyEvent))this._clearKeyboardKeys();else{if(1===this._getKeyboardKeys().length){var t=this._getKeyboardKeys()[0];if(this._isNodeEditable(e.target)||null!=this._getTableFooter()&&c(this._getTableFooter()).has(e.target).length>0)return void this._removeKeyboardKey(t);this._removeKeyboardKey(t)}var i=e.key||e.keyCode;this._removeKeyboardKey(i)}},"mouseleave .oj-table-element":function(){this._getLayoutManager().handleMouseLeaveTable()},"mousedown .oj-table-body":function(e){var t=e[I._KEYBOARD_CODES._MODIFIER_SHIFT];if(!(A.isEventClickthroughDisabled(e,this._getTable())||A.isFromDefaultSelector(e)&&!t||this._isEditPending)&&1===e.which&&(this._mouseDownRowIdx=this._getElementRowIdx(e.target),null!=this._mouseDownRowIdx)){var i=this._getTableBodyRow(this._mouseDownRowIdx);null!=i&&i.draggable&&(this._mouseDownRowIdx=null)}},mouseup:function(){this._mouseDownRowIdx=null},"mouseenter .oj-table-body-row":function(e){if(this._isRowSelectionEnabled()){e.originalEvent&&0===e.originalEvent.buttons&&(this._mouseDownRowIdx=null);var t=this._getEventTargetElement(e),i=this._getElementRowIdx(t);this._isTableOwned(t)&&null==this._getTableDndContext()._dragImage?(t.classList.add(I.MARKER_STYLE_CLASSES._HOVER),this._updateRowStateCellsClass(i,null,{hover:!0}),this._handleMouseEnterSelection(e.target)):(this._updateRowStateCellsClass(i,null,{hover:!1}),e.stopPropagation())}},"mouseleave .oj-table-body-row":function(e){var t=this._getEventTargetElement(e),i=this._getElementRowIdx(t);this._isTableOwned(t)?(t.classList.remove(I.MARKER_STYLE_CLASSES._HOVER),this._updateRowStateCellsClass(i,null,{hover:!1})):(this._updateRowStateCellsClass(i,null,{hover:!0}),e.stopPropagation())},"mousedown .oj-table-column-header-cell":function(e){A.isEventClickthroughDisabled(e,this._getTable())||this._isEditPending||(this._lastSelectedHeaderIdx=null,this._getLayoutManager().handleMouseDownHeaderCell(e))},"mousedown .oj-table-footer-cell":function(e){if(!A.isEventClickthroughDisabled(e,this._getTable())&&!this._isEditPending&&1===e.which){var t=this._getElementColumnIdx(this._getEventTargetElement(e));e[I._KEYBOARD_CODES._MODIFIER_SHIFT]||(this._setActiveFooter(t,e,!0),c(e.target).data(I._FOCUS_CALLED,!0)),A.isFirefox()&&S.isMetaKeyPressed(e)&&e.preventDefault()}},"mouseenter .oj-table-column-header-cell":function(e){this._getLayoutManager().handleMouseEnterHeaderCell(e);var t=this._getEventTargetElement(e);this._handleMouseEnterColumnHeader(t)},"mousemove .oj-table-header":function(e){this._getLayoutManager().handleMouseMoveHeader(e)},"mousemove .oj-table-column-header-cell":function(e){this._getLayoutManager().handleMouseMoveHeaderCell(e);var t=this._getEventTargetElement(e);this._handleMouseEnterColumnHeader(t)},"mouseleave .oj-table-column-header-cell":function(e){var t=this._getEventTargetElement(e);this._handleMouseLeaveColumnHeader(t)},"mouseup .oj-table-column-header-cell":function(e){this._getLayoutManager().handleMouseUp(e)},"mousedown .oj-table-data-cell":function(e){if(!A.isEventClickthroughDisabled(e,this._getTable())&&!this._isEditPending){this._lastSelectedRowIdx=null;var t=this._getEventTargetElement(e),i=this._getElementRowIdx(t);e[I._KEYBOARD_CODES._MODIFIER_SHIFT]||(this._setActiveRow(i,e,!0),c(e.target).data(I._FOCUS_CALLED,!0)),A.isFirefox()&&S.isMetaKeyPressed(e)&&e.preventDefault()}},"mouseup .oj-table-data-cell":function(e){this._getLayoutManager().handleMouseUp(e)},"click .oj-table-sort-icon-container":function(e){if(!this._isEditPending){var t=this._getElementColumnIdx(e.target),i=this._getTableHeaderColumn(t);if(i)c(i).data("sorted")===I._COLUMN_SORT_ORDER._ASCENDING?this._handleSortTableHeaderColumn(t,!1,e):this._handleSortTableHeaderColumn(t,!0,e),e.preventDefault(),e.stopPropagation()}},"click .oj-table-body-row":function(e){if(A.isEventClickthroughDisabled(e,this._getTable())||this._isEditPending)return;var t=this._getEventTargetElement(e),i=this._getElementRowIdx(t),o=c(e.target).data(I._FOCUS_CALLED),l=e[I._KEYBOARD_CODES._MODIFIER_SHIFT];if(!(o||l&&null!=this._getActiveRowIndex())){var n=this._setActiveRow(i,e,!0);if(c(e.target).data(I._FOCUS_CALLED,!1),!n)return}if(this._getTableBodyRow(i)[I._DATA_OJ_SELECTABLE]!==I._CONST_OFF&&(this._fireActionEvent(i,e,!0),!A.isFromDefaultSelector(e)||l))if(l){var s=this._getActiveRowIndex();if(null!=s&&(window.getSelection().removeAllRanges(),this._getRowSelectionMode()===I._OPTION_SELECTION_MODES._MULTIPLE))return void this._selectRange(s,i,!0);this._handleSelectionGesture(i,!0,!1)}else if(S.isMetaKeyPressed(e))this._handleSelectionGesture(i,!0,!0),this._lastSelectedRowIdxArray&&this._lastSelectedRowIdxArray.indexOf(i)>-1&&(this._selectionAnchorIdx=i);else if(0===this._getKeyboardKeys().length){var a=this._isTouchDevice();this._handleSelectionGesture(i,!0,a&&(this._isStickyLayoutEnabled()||this._nonContiguousSelection)),this._lastSelectedRowIdxArray&&this._lastSelectedRowIdxArray.indexOf(i)>-1&&(this._selectionAnchorIdx=i);var r=this._getRowSelection(i);!this._isStickyLayoutEnabled()&&a&&r&&!this._nonContiguousSelection&&this._getRowSelectionMode()===I._OPTION_SELECTION_MODES._MULTIPLE&&this._createTableBodyRowTouchSelectionAffordance(i)}},"pointerdown .oj-table-data-cell, .oj-table-gutter-start-body-cell, .oj-table-gutter-end-body-cell":function(e){this._previousPointerTarget=this._currentPointerTarget,this._currentPointerTarget=e.target},"dblclick .oj-table-data-cell, .oj-table-gutter-start-body-cell, .oj-table-gutter-end-body-cell":function(e){if(!(A.isEventClickthroughDisabled(e,this._getTable())||null!=this._currentPointerTarget&&e.target!==this._currentPointerTarget||null!=this._previousPointerTarget&&e.target!==this._previousPointerTarget)){let t;t=e.target.classList.contains(I.CSS_CLASSES._TABLE_GUTTER_START_BODY_CELL)?0:e.target.classList.contains(I.CSS_CLASSES._TABLE_GUTTER_END_BODY_CELL)?this._getColumnDefs().length-1:this._getElementColumnIdx(e.target);const i=this._getElementRowIdx(e.target);this._setEditRow({rowIndex:i},t)}this._currentPointerTarget=null,this._previousPointerTarget=null},"contextmenu .oj-table-data-cell":function(e){if(!A.isEventClickthroughDisabled(e,this._getTable())&&!this._isEditPending){var t=this._getElementRowIdx(this._getEventTargetElement(e));this._setActiveRow(t,e,!0)}},"click .oj-table-column-header-cell":function(e){if(!A.isEventClickthroughDisabled(e,this._getTable())&&!this._isEditPending){var t=this._getEventTargetElement(e);if(t.style.cursor!==I.CSS_VAL._COL_RESIZE){var i=this._getElementColumnIdx(t),o=c(e.target).data(I._FOCUS_CALLED),l=e[I._KEYBOARD_CODES._MODIFIER_SHIFT];if(o||l&&null!=this._getActiveHeaderIndex()||(this._setActiveHeader(i,e),c(e.target).data(I._FOCUS_CALLED,!1)),l){var n=this._getActiveHeaderIndex();null!=n&&this._getColumnSelectionMode()===I._OPTION_SELECTION_MODES._MULTIPLE?this._selectRange(n,i,!1):this._handleSelectionGesture(i,!1,!0)}else S.isMetaKeyPressed(e)?this._handleSelectionGesture(i,!1,!0):0===this._getKeyboardKeys().length&&this._handleSelectionGesture(i,!1,this._isTouchDevice())}}},"click .oj-table-footer-cell":function(e){if(!A.isEventClickthroughDisabled(e,this._getTable())&&!this._isEditPending){var t=this._getEventTargetElement(e);if(t.style.cursor!==I.CSS_VAL._COL_RESIZE){var i=this._getElementColumnIdx(t),o=c(e.target).data(I._FOCUS_CALLED),l=e[I._KEYBOARD_CODES._MODIFIER_SHIFT];if(o||l&&null!=this._getActiveFooterIndex()||(this._setActiveFooter(i,e),c(e.target).data(I._FOCUS_CALLED,!1)),l){var n=this._getActiveFooterIndex();null!=n&&this._getColumnSelectionMode()===I._OPTION_SELECTION_MODES._MULTIPLE?this._selectRange(n,i,!1):this._handleSelectionGesture(i,!1,!0)}else S.isMetaKeyPressed(e)?this._handleSelectionGesture(i,!1,!0):0===this._getKeyboardKeys().length&&this._handleSelectionGesture(i,!1,!1)}}},"click .oj-table-add-row-placeholder":function(e){A.isEventClickthroughDisabled(e,this._getTable())||this._isEditPending||this._setActiveAddRow()},"dragstart .oj-table-column-header-cell":function(e){if(!this._isEditPending)return this._getEventTargetElement(e).style.cursor!==I.CSS_VAL._COL_RESIZE?this._getTableDndContext().handleColumnDragStart(e):void 0},"dragenter .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDragEnter(e)},"dragover .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDragOver(e)},"dragleave .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDragLeave(e)},"drop .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDrop(e)},"dragend .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDragEnd(e)},"dragstart .oj-table-body-row":function(e){if(!this._isEditPending)return this._getTableDndContext().handleRowDragStart(e)},"drag .oj-table-body-row":function(e){return this._getTableDndContext().handleRowDrag(e)},"dragend .oj-table-body-row":function(e){return this._getTableDndContext().handleRowDragEnd(e)},"dragenter .oj-table-body":function(e){return this._getTableDndContext().handleRowDragEnter(e)},"dragover .oj-table-body":function(e){if(!this._getTableDndContext()._isColumnReordering())return this._getTableDndContext().handleRowDragOver(e)},"dragleave .oj-table-body":function(e){return this._getTableDndContext().handleRowDragLeave(e)},"drop .oj-table-body":function(e){if(!this._getTableDndContext()._isColumnReordering())return this._getTableDndContext().handleRowDrop(e)},"dragover .oj-table-element":function(e){if(this._getTableDndContext()._isColumnReordering())return this._getTableDndContext().handleColumnReorderDragOver(e)},"drop .oj-table-element":function(e){if(this._getTableDndContext()._isColumnReordering())return this._getTableDndContext().handleColumnReorderDrop(e)}},I.prototype._fireActionEvent=function(e,t,i){if(i||!this._isTableActionableMode()){var o=this._getTableBodyRow(e);null!=o&&this._trigger("rowAction",t,{context:{key:o[I._ROW_ITEM_EXPANDO].key,data:o[I._ROW_ITEM_EXPANDO].data,metadata:o[I._ROW_ITEM_EXPANDO].metadata}})}},I.prototype._getEventTargetElement=function(e){return 0===e.type.indexOf("touch")?this._getTouchEventTargetElement(e):e.currentTarget},I.prototype._getTouchEventTargetElement=function(e){var t=e.originalEvent.changedTouches[0];return document.elementFromPoint(t.clientX,t.clientY)},I.prototype._registerCustomEvents=function(){var e=c.event.special;e.ojtablebeforecurrentrow={handle:function(e){return e.handleObj.handler.apply(this,[e,arguments[1]])}},e.ojtablesort={handle:function(e){return e.handleObj.handler.apply(this,[e,arguments[1]])}}},I.prototype._touchEventDoubleTapFunction=function(e,t){var i=c(e.target);null!=this._lastTapTime&&(new Date).getTime()-this._lastTapTime<250&&this._lastTapTarget[0]===i[0]?(this._lastTapTime=null,this._lastTapTarget=null,t()):(this._lastTapTarget=i,this._lastTapTime=(new Date).getTime())},I.prototype._registerTouchEvents=function(){const e={"touchstart .oj-table-body-row-touch-selection-affordance-touch-area":function(e){1===e.originalEvent.touches.length&&this._getRowSelectionMode()===I._OPTION_SELECTION_MODES._MULTIPLE&&(e.target.classList.contains(I.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_TOP_CLASS)||e.target.classList.contains(I.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_TOP_ICON_CLASS)?(e.preventDefault(),this._mouseDownRowIdx=c(this._getTableBodyRowTouchSelectionAffordanceBottom()).data("rowIdx")):(e.target.classList.contains(I.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_BOTTOM_CLASS)||e.target.classList.contains(I.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_BOTTOM_ICON_CLASS))&&(e.preventDefault(),this._mouseDownRowIdx=c(this._getTableBodyRowTouchSelectionAffordanceTop()).data("rowIdx")))},"touchstart .oj-table-column-header-cell":function(e){this._getLayoutManager().handleTouchStartHeaderCell(e)},"touchmove .oj-table-header":function(e){this._getLayoutManager().handleTouchMoveHeader(e)},"touchmove .oj-table-body-row-touch-selection-affordance-touch-area":function(e){if(null!=this._mouseDownRowIdx){e.preventDefault();var t=this._getEventTargetElement(e);this._handleMouseEnterSelection(t,!0)}}},t=this._getTableContainer();if(this._on(c(t),{touchend:function(e){if(null!=this._mouseDownRowIdx){var t=this._getEventTargetElement(e);this._handleMouseEnterSelection(t,!0)}this._mouseDownRowIdx=null,this._getLayoutManager().handleTouchEnd(e)},"touchend .oj-table-body":function(e){this._touchEventDoubleTapFunction(e,function(e){return function(){var t=this._getEventTargetElement(e),i=this._getElementColumnIdx(t);this._setTableEditable(!0,!1,i,!0,e),e.preventDefault()}.bind(this)}.bind(this)(e))},touchcancel:function(){this._mouseDownRowIdx=null,this._getLayoutManager().handleTouchCancel()}}),this._IsCustomElement()){const i=function(e,t){return function(i){const o=i.currentTarget,l=i.target.closest(e);l&&o.contains(l)&&t(c.Event(i,{currentTarget:l}))}},o="touchstart",l="touchmove",n=".oj-table-body-row-touch-selection-affordance-touch-area",s=".oj-table-column-header-cell",a=".oj-table-header";this._delegatedTouchStartTableBodyListener=i(n,e[`${o} ${n}`].bind(this)),this._delegatedTouchStartCellHeaderListener=i(s,e[`${o} ${s}`].bind(this)),this._delegatedTouchMoveTableHeaderListener=i(a,e[`${l} ${a}`].bind(this)),this._delegatedTouchMoveTableBodyListener=i(n,e[`${l} ${n}`].bind(this)),t.addEventListener(o,this._delegatedTouchStartTableBodyListener,{passive:!1}),t.addEventListener(o,this._delegatedTouchStartCellHeaderListener,{passive:!1}),t.addEventListener(l,this._delegatedTouchMoveTableHeaderListener,{passive:!0}),t.addEventListener(l,this._delegatedTouchMoveTableBodyListener,{passive:!1})}else this._on(c(t),e)},I.ACTIVE_ELEMENT_TYPES={_HEADER:"header",_FOOTER:"footer",_DATA_ROW:"dataRow",_NO_DATA:"noData",_ADD_ROW:"addRow"},I.prototype._createActiveObject=function(e){var t;return e.classList.contains(I.CSS_CLASSES._TABLE_DATA_ROW_CLASS)?(t=this._getElementRowIdx(e),{type:I.ACTIVE_ELEMENT_TYPES._DATA_ROW,index:t,key:this._getRowKeyForRowIdx(t),isActionable:!1}):e.classList.contains(I.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS)?(t=this._getElementColumnIdx(e),{type:I.ACTIVE_ELEMENT_TYPES._HEADER,index:t,key:this._getColumnKeyForColumnIdx(t),isActionable:!1}):e.classList.contains(I.CSS_CLASSES._COLUMN_HEADER_SELECTOR_CELL_CLASS)?{type:I.ACTIVE_ELEMENT_TYPES._HEADER,index:-1,isActionable:!1}:e.classList.contains(I.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS)?(t=this._getElementColumnIdx(e),{type:I.ACTIVE_ELEMENT_TYPES._FOOTER,index:t,key:this._getColumnKeyForColumnIdx(t),isActionable:!1}):e.classList.contains(I.CSS_CLASSES._TABLE_FOOTER_SELECTOR_CELL_CLASS)?{type:I.ACTIVE_ELEMENT_TYPES._FOOTER,index:-1,isActionable:!1}:e.classList.contains(I.CSS_CLASSES._TABLE_BODY_MESSAGE_ROW_CLASS)||e.classList.contains(I.CSS_CLASSES._TABLE_NO_DATA_ROW_CLASS)?{type:I.ACTIVE_ELEMENT_TYPES._NO_DATA,isActionable:!1}:e.classList.contains(I.CSS_CLASSES._TABLE_ADD_ROW_PLACEHOLDER_CLASS)?{type:I.ACTIVE_ELEMENT_TYPES._ADD_ROW,isActionable:!1}:null},I.prototype._getActiveObjectFromActionableChild=function(e){var t=this._createActiveObject(e);if(null!=t)return t;var i=e.parentElement;return null!=i&&this._getTable().contains(i)?this._getActiveObjectFromActionableChild(i):null},I.prototype._areActiveObjectsEqual=function(e,t){return null!=e&&null!=t?e.type===t.type&&e.index===t.index&&u.KeyUtils.equals(e.key,t.key):null==e&&null==t},I.prototype._getElementFromActiveObject=function(e){if(null!=e){if(e.type===I.ACTIVE_ELEMENT_TYPES._DATA_ROW)return this._getTableBodyRow(e.index);if(e.type===I.ACTIVE_ELEMENT_TYPES._HEADER)return-1===e.index?this._getTableSelectorColumn():this._getTableHeaderColumn(e.index);if(e.type===I.ACTIVE_ELEMENT_TYPES._FOOTER)return-1===e.index?this._getTableFooterSelectorCell():this._getTableFooterCell(e.index);if(e.type===I.ACTIVE_ELEMENT_TYPES._NO_DATA){var t=this._getTableBodyMessageRow();return null!=t?t:this._getTableNoDataRow()}if(e.type===I.ACTIVE_ELEMENT_TYPES._ADD_ROW)return this._getPlaceHolderRow()}return null},I.prototype._getActiveElement=function(){return this._getElementFromActiveObject(this._active)},I.prototype._getActiveType=function(){return null!=this._active?this._active.type:null},I.prototype._highlightActive=function(e){if(null!=this._active){var t=this._getElementFromActiveObject(this._active);t&&(t.classList.add(I.CSS_CLASSES._TABLE_ACTIVE_ELEMENT_CLASS),!this._hasFocus()||this._active.isActionable||e||(this._focusInHandler(c(t)),this._hasActiveHeader()&&-1!==this._active.index&&this._showTableHeaderColumnSortIcon(this._active.index)))}},I.prototype._unhighlightActive=function(){if(null!=this._active){var e=this._getElementFromActiveObject(this._active);e&&(e.classList.remove(I.CSS_CLASSES._TABLE_ACTIVE_ELEMENT_CLASS),this._focusOutHandler(c(e)),this._hasActiveHeader()&&-1!==this._active.index&&this._hideTableHeaderColumnSortIcon(this._active.index))}},I.prototype._hasFocus=function(){return this._getTable().classList.contains(I.MARKER_STYLE_CLASSES._FOCUS)},I.prototype._syncActiveElement=function(e,t,i){var o=this._hasFocus()&&!i,l=this._getTableBodyRows().length;if(null!=this._active){if(this._hasActiveHeader()||this._hasActiveFooter()){if(this._getFirstVisibleColumnIndex(this._active.index,!0)!==this._active.index){var n=this._getFirstVisibleColumnIndex(0,!0);this._hasActiveHeader()?this._setActiveHeader(n,e,!o):this._setActiveFooter(n,e,!o)}else o&&this._scrollColumnIntoViewport(this._active.index),this._highlightActive(),t&&this._updateAccStatusInfo();return}if(this._hasActiveRow()){if(u.KeyUtils.equals(this._active.key,this._getRowKeyForRowIdx(this._active.index)))return o&&this._scrollRowIntoViewport(this._active.index),t&&this._updateAccStatusInfo(),void this._highlightActive();var s=this._getCurrentRow(),a=null!=s?s.rowKey:null;if(null!=a){if(l>0){var r=this._getRowIdxForRowKey(a);return null!=r||(r=Math.min(null!=s.rowIndex?s.rowIndex:0,l-1)),void this._setActiveRow(r,e,!0,!o)}this._setActiveNoData()}return}if(this._hasActiveNoData()){if(!0===this._noDataMessageShown)return this._highlightActive(),void(t&&this._updateAccStatusInfo())}else if(this._hasActiveAddRow()&&null!=this._getPlaceHolderRow())return this._highlightActive(),void(t&&this._updateAccStatusInfo())}this._isTableHeaderless()?null!=this._getPlaceHolderRow()?this._setActiveAddRow():l>0?this._setActiveRow(0,e,!0,!o):this._setActiveNoData():this._setActiveHeader(this._getFirstVisibleColumnIndex(0,!0),e,!o)},I.prototype._getFirstVisibleColumnIndex=function(e,t){var i;if(this._isTableHeaderless()){if(this._isTableFooterless())return null;i=this._getTableFooterCell.bind(this)}else i=this._getTableHeaderColumn.bind(this);var o,l=this._getColumnDefs().length,n=e;if(t)for(;n<l;){if((o=i(n))&&o.clientWidth>0)return n;n+=1}else{for(;n>-1;){if((o=i(n))&&o.clientWidth>0)return n;n-=1}if(this._isDefaultSelectorEnabled())return-1}return null},I.prototype._getNextVisibleColumnIndex=function(e,t){var i=t?e+1:e-1,o=this._getFirstVisibleColumnIndex(i,t);return null!==o?o:e},I.prototype._getCurrentRow=function(){return this._getData()?this._currentRow:null},I.prototype._hasActiveRow=function(){return this._getActiveType()===I.ACTIVE_ELEMENT_TYPES._DATA_ROW},I.prototype._getActiveRowIndex=function(){return this._hasActiveRow()?this._active.index:null},I.prototype._hasActiveHeader=function(){return this._getActiveType()===I.ACTIVE_ELEMENT_TYPES._HEADER},I.prototype._getActiveHeaderIndex=function(){return this._hasActiveHeader()?this._active.index:null},I.prototype._getActiveHeaderColumn=function(){var e=this._getActiveHeaderIndex();return null!=e?-1===e?this._getTableSelectorColumn():this._getTableHeaderColumn(e):null},I.prototype._hasActiveFooter=function(){return this._getActiveType()===I.ACTIVE_ELEMENT_TYPES._FOOTER},I.prototype._getActiveFooterIndex=function(){return this._hasActiveFooter()?this._active.index:null},I.prototype._hasActiveAddRow=function(){return this._getActiveType()===I.ACTIVE_ELEMENT_TYPES._ADD_ROW},I.prototype._hasActiveNoData=function(){return this._getActiveType()===I.ACTIVE_ELEMENT_TYPES._NO_DATA},I.prototype._scrollRowIntoViewport=function(e,t,i){var o=this._getLayoutManager();if(o.hasRenderedSize()&&(null==i&&(i=this._getTableBodyRow(e)),t||!i.classList.contains(I.CSS_CLASSES._TABLE_STUCK_ROW_CLASS))){var l=c(o.getScroller()),n=o.getVerticalOverflowDiff(i),s=n.top,a=s>=0,r=n.bottom,_=r>=0;a&&_||(_?(Math.abs(s)>Math.abs(r)?l.scrollTop(l.scrollTop()+r):l.scrollTop(l.scrollTop()-s),this._skipScrollUpdate=!1,o.updateCurrentScrollState()):a&&(Math.abs(r)>Math.abs(s)?l.scrollTop(l.scrollTop()-s):l.scrollTop(l.scrollTop()+r),this._skipScrollUpdate=!1,o.updateCurrentScrollState()))}},I.prototype._scrollColumnIntoViewport=function(e,t){var i=this._getLayoutManager();if(i.hasRenderedSize()){var o;if(null!=t)o=t;else if(!(o=-1===e?this._getTableSelectorColumn():this._getTableHeaderColumn(e)))return;var l=i.getScroller(),n=c(l),s=i.getHorizontalOverflowDiff(o,e),a=s.left,r=s.right,_=a>=0,h=r>=0;A.isEdge()&&(a*=-1,r*=-1),_&&h||(_?(Math.abs(r)>Math.abs(a)?n.scrollLeft(n.scrollLeft()-a):n.scrollLeft(n.scrollLeft()+r),this._skipScrollUpdate=!1,i.updateCurrentScrollState()):h&&(Math.abs(a)>Math.abs(r)?n.scrollLeft(n.scrollLeft()+r):n.scrollLeft(n.scrollLeft()-a),this._skipScrollUpdate=!1,i.updateCurrentScrollState()))}},I.prototype._setCurrentRow=function(e,t,i){var o,l,n,s,a=this._currentRow,r=null==e||null==e.rowKey&&null==e.rowIndex;if(r)n=-1,s=null!=e?e:null;else{var _=this._getData(),h=e.rowIndex,d=e.rowKey;if(null==d&&(d=this._getRowKeyForDataSourceRowIndex(h)),h=this._getDataSourceRowIndexForRowKey(d),n=this._getRowIdxForRowKey(d),s={rowIndex:h,rowKey:d},-1!==n&&(!_||n<-1||null===n||null===d)){if(o=I._LOGGER_MSG._ERR_CURRENTROW_UNAVAILABLE_INDEX_SUMMARY,l=p.applyParameters(I._LOGGER_MSG._ERR_CURRENTROW_UNAVAILABLE_INDEX_DETAIL,{rowIdx:n}),this.option("currentRow",this._currentRow,{_context:{writeback:!0,originalEvent:t,internalSet:!0}}),i)throw new Error(o+"\n"+l);return E.info(o+"\n"+l),I._CURRENT_ROW_STATUS._IGNORED}}var c=this._getActiveRowIndex(),S=!this._compareCurrentRowValues(a,s);if(S){var C,T=this._getAccessibleContext();this._clearAccessibleContext();try{C=this._trigger("beforeCurrentRow",t,{currentRow:s,previousCurrentRow:a})}catch(e){return o=I._LOGGER_MSG._ERR_PRECURRENTROW_ERROR_SUMMARY,l=p.applyParameters(I._LOGGER_MSG._ERR_PRECURRENTROW_ERROR_DETAIL,{error:e.toString()}),E.info(o+"\n"+l),this.option("currentRow",this._currentRow,{_context:{writeback:!0,originalEvent:t,internalSet:!0}}),I._CURRENT_ROW_STATUS._ERROR}if(!C)return this._setAccessibleContext(T),this.option("currentRow",this._currentRow,{_context:{writeback:!0,originalEvent:t,internalSet:!0}}),I._CURRENT_ROW_STATUS._VETOED;if(!(null==a||null==a.rowKey&&null==a.rowIndex)){var g=a.rowKey,f=this._getRowIdxForRowKey(g);if(this._hasEditableRow()&&(null==s||!u.KeyUtils.equals(g,s.rowKey))){var A=this._setTableEditable(!1,!1,0,!0,t);if(A instanceof Promise)return A.then(function(e){if(!1===e)return this._resetCurrentRow(a,f,t),I._CURRENT_ROW_STATUS._IGNORED;var i=this._getTableBodyRow(f);return null!=i&&i.classList.remove(I.CSS_CLASSES._TABLE_DATA_CURRENT_ROW_CLASS),this._currentRow=s,this._updateCurrentRow(r,n,t),null==t&&this._setActiveRow(n,t,!1,!this._hasFocus()),I._CURRENT_ROW_STATUS._UPDATED}.bind(this),function(){return this._resetCurrentRow(a,f,t),I._CURRENT_ROW_STATUS._VETOED}.bind(this));if(!1===A)return this._resetCurrentRow(a,f,t),I._CURRENT_ROW_STATUS._VETOED}var b=this._getTableBodyRow(f);null!=b&&b.classList.remove(I.CSS_CLASSES._TABLE_DATA_CURRENT_ROW_CLASS)}this._currentRow=s,this._updateCurrentRow(r,n,t)}return!S&&c===n||null!=t||this._setActiveRow(n,t,!1,!this._hasFocus()),I._CURRENT_ROW_STATUS._UPDATED},I.prototype._resetCurrentRow=function(e,t,i){this._currentRow=e;var o=document.activeElement,l=this._getAccessibleContext(),n=this._getElementColumnIdx(o);this._queueTask(function(){var e=t,o=n;null!=e&&null!=o?setTimeout(function(){this._setCellFocus(e,o)}.bind(this),0):null!=e&&setTimeout(function(){this._setActiveRow(e,i)}.bind(this),0)}.bind(this)),this._setAccessibleContext(l),this.option("currentRow",this._currentRow,{_context:{writeback:!0,originalEvent:i,internalSet:!0}})},I.prototype._updateCurrentRow=function(e,t,i){if(this.option("currentRow",this._currentRow,{_context:{writeback:!0,originalEvent:i,internalSet:!0}}),!e){var o=this._getTableBodyRow(t);null!=o&&o.classList.add(I.CSS_CLASSES._TABLE_DATA_CURRENT_ROW_CLASS)}},I.prototype._compareCurrentRowValues=function(e,t){if(e===t)return!0;if(null!=e&&null!=t){if(e.rowIndex===t.rowIndex&&u.KeyUtils.equals(e.rowKey,t.rowKey))return!0}else if(null==e&&null==t)return!0;return!1},I.prototype._setCellFocus=function(e,t){var i,o=this._getTableBodyRow(e);if(null!=o&&null!=(i=-1===t?this._getTableBodySelectorCell(o):this._getTableBodyCell(e,t,o))){var l=A.getFocusableElementsInNode(i);if(l.length>0){var n=l[0];return n.focus(),"function"==typeof n.select&&n.select(),this._scrollColumnIntoViewport(t,i),this._scrollRowIntoViewport(e),!0}}return!1},I.prototype._setCellInRowFocus=function(e,t,i){if(!this._setCellFocus(e,t)){for(var o=this._getTableBodyCells(e).length,l=0;l<o;l++){var n=l;if(i||(n=o-l-1),this._setCellFocus(e,n))return}this._isDefaultSelectorEnabled()&&this._setCellFocus(e,-1)}},I.prototype._setFocusInHandler=function(e){this._focusInHandler=e},I.prototype._setFocusOutHandler=function(e){this._focusOutHandler=e},I.prototype._setActiveRow=function(e,t,i,o,l,n){if(-1===e)return this._clearActiveRow(t,i);var s=this._getTableBodyRow(e);return null!=s&&this._setActive(s,t,i,o,l,n)},I.prototype._clearActiveRow=function(e,t){return!this._hasActiveRow()||this._setActive(null,e,t)},I.prototype._setActiveHeader=function(e,t,i){if(this._isTableHeaderless()||null==e)return!1;var o=-1===e?this._getTableSelectorColumn():this._getTableHeaderColumn(e);return this._setActive(o,t,!0,i)},I.prototype._setActiveFooter=function(e,t,i){if(this._isTableFooterless()||null==e)return!1;var o=-1===e?this._getTableFooterSelectorCell():this._getTableFooterCell(e);return this._setActive(o,t,!0,i)},I.prototype._setActiveAddRow=function(){var e=this._getPlaceHolderRow();return null!=e&&this._setActive(e,null,!0)},I.prototype._setActiveNoData=function(){var e=this._getTableBodyMessageRow();if(null!=e)this._setActive(e,null,!0);else{var t=this._getTableNoDataRow();null!=t&&this._setActive(t,null,!0)}},I.prototype._setActive=function(e,t,i,o,l,n){if(null!=e){var s=this._createActiveObject(e);if(this._areActiveObjectsEqual(s,this._active))this._updateActive(!1,s,o,l,n);else{if(s.type===I.ACTIVE_ELEMENT_TYPES._DATA_ROW){if(i){const e=this._setCurrentRow({rowKey:s.key},t);if(e instanceof Promise)return e.then(e=>e===I._CURRENT_ROW_STATUS._UPDATED&&(this._updateActive(!0,s,o,l,n),!0));if(e!==I._CURRENT_ROW_STATUS._UPDATED)return!1}}else if(!this._clearActiveRow(t,i))return!1;this._updateActive(!0,s,o,l,n)}}else if(null!=this._active){if(this._hasActiveRow()&&i){const e=this._setCurrentRow(null,t);if(e instanceof Promise)return e.then(e=>e===I._CURRENT_ROW_STATUS._UPDATED&&(this._unhighlightActive(),this._active=null,!0));if(e!==I._CURRENT_ROW_STATUS._UPDATED)return!1}this._unhighlightActive(),this._active=null}return!0},I.prototype._updateActive=function(e,t,i,o,l){e&&(this._setTableActionableMode(!1,!0),this._unhighlightActive(),this._active=t),i||(t.type===I.ACTIVE_ELEMENT_TYPES._HEADER||t.type===I.ACTIVE_ELEMENT_TYPES._FOOTER?this._scrollColumnIntoViewport(t.index):t.type===I.ACTIVE_ELEMENT_TYPES._DATA_ROW&&this._scrollRowIntoViewport(t.index,l)),this._highlightActive(o),this._active.isActionable||this._updateAccStatusInfo()},I.prototype._setColumnState=function(e,t){var i=this._getTableHeaderColumn(e),o=this._getTableFooterCell(e);this._applyColumnState(i,o,e,t)},I.prototype._applyColumnState=function(e,t,i,o){o?(null!=e&&e.classList.add(I.MARKER_STYLE_CLASSES._SELECTED),null!=t&&t.classList.add(I.MARKER_STYLE_CLASSES._SELECTED)):(null!=e&&e.classList.remove(I.MARKER_STYLE_CLASSES._SELECTED),null!=t&&t.classList.remove(I.MARKER_STYLE_CLASSES._SELECTED)),this._updateColumnStateCellsClass(i,o)},I.prototype._updateColumnStateCellsClass=function(e,t){for(var i=this._getSelectedRowIdxs(),o=this._getTableBodyRows(),l=0;l<o.length;l++){var n=this._getTableBodyCell(l,e);if(n)if(t)n.classList.add(I.MARKER_STYLE_CLASSES._SELECTED);else{for(var s=!1,a=i.length,r=0;r<a;r++)if(l===i[r]){s=!0;break}s||n.classList.remove(I.MARKER_STYLE_CLASSES._SELECTED)}}if(null!=this._getPlaceHolderRow()){var _=this._getPlaceHolderRowCell(e);null!=_&&(t?_.classList.add(I.MARKER_STYLE_CLASSES._SELECTED):_.classList.remove(I.MARKER_STYLE_CLASSES._SELECTED))}},I.prototype._updateRowStateCellsClass=function(e,t,i){if(t||(t=this._getTableBodyRow(e)),t[I._DATA_OJ_SELECTABLE]!==I._CONST_OFF){var o=this._getTableBodyCells(null,t);if(0!==o.length){if(this._isDefaultSelectorEnabled()){var l=this._getTableBodySelectorCell(t);o.unshift(l)}if(this._isGutterStartColumnEnabled()){let e=this._getTableGutterCell("body","start",t);o.unshift(e)}if(this._isGutterEndColumnEnabled()){let e=this._getTableGutterCell("body","end",t);o.push(e)}var n,s=i.selected,a=i.hover,r=o.length;if(null!=a)for(n=0;n<r;n++)a?o[n].classList.add(I.MARKER_STYLE_CLASSES._HOVER):o[n].classList.remove(I.MARKER_STYLE_CLASSES._HOVER);if(null!=s)for(n=0;n<r;n++)s?o[n].classList.add(I.MARKER_STYLE_CLASSES._SELECTED):o[n].classList.remove(I.MARKER_STYLE_CLASSES._SELECTED)}}},I.prototype._adjustScrollPositionOnFetch=function(e){var t=null==this.options.scrollPosition?{}:this.options.scrollPosition;if(!isNaN(t.rowIndex)&&void 0!==t.rowKey){var i=this._getLayoutManager(),o=this._getSelectedRowIdxs();null!=o&&o.length>0&&this._isRowSelectionEnabled()&&this._isScrollToKey()?(!isNaN(this._selectionAnchorIdx)&&o.indexOf(this._selectionAnchorIdx)>-1?t.rowKey=this._getRowKeyForRowIdx(this._selectionAnchorIdx):t.rowKey=this._getRowKeyForRowIdx(o[0]),delete t.rowIndex):(this._isExternalScrollEnabled()||(t.y=0,this._scrollTop=0,i.getScroller().scrollTop=0),delete t.rowIndex,delete t.rowKey),e||(this._isExternalScrollEnabled()||(t.x=0,this._scrollLeft=0,i.getScroller().scrollLeft=0),delete t.columnIndex,delete t.columnKey,t.offsetX=0),t.offsetY=0,this.option("scrollPosition",t,{_context:{internalSet:!0},changed:!1})}},I.prototype._isScrollPositionAdjusted=function(){var e=this.options.scrollPosition;return null!=e&&(void 0===e.rowIndex&&null!=e.rowKey)},I.prototype._findRowElementByKey=function(e){for(var t=this._getTableBodyRows(),i=0;i<t.length;i++)if(u.KeyUtils.equals(t[i][I._ROW_ITEM_EXPANDO].key,e))return t[i];return null},I.prototype._isScrollToKey=function(){var e=this.options.scrollToKey;if("never"===e)return!1;if("always"===e)return!0;var t=this.options.data;if(!u.DataProviderFeatureChecker.isDataProvider(t))return!0;if(t.getCapability){var i=t.getCapability("fetchFirst");if(i&&"immediate"===i.iterationSpeed)return!0}return!1},I.prototype._getScrollToKey=function(){var e=this.options.scrollPosition.rowKey;return e?new Promise(function(t){var i=this._validateKeyForScroll(e,!0);null==i?t(null):i.then(function(i){t(i?e:null)})}.bind(this)):Promise.resolve(null)},I.prototype._validateKeyForScroll=function(e,t){if(!this._isScrollToKey())return null;if(!t&&null!=this._findRowElementByKey(e))return Promise.resolve(!0);var i=this._getData();return i.containsKeys?new Promise(function(t){var o=new Set;o.add(e),i.containsKeys({keys:o}).then(function(e){t(e.results.size>0)},function(){t(!1)})}):null},I.prototype._syncScrollPosition=function(e,t){if(!this._IsCustomElement()||this._noDataMessageShown||!this._isScrollableX()&&!this._isScrollableY())return!0;if(null!=this._scrollPosition?e=this._scrollPosition:null==e&&(e=this.options.scrollPosition),!t&&null!=e.rowKey){var i=this._validateKeyForScroll(e.rowKey,!1);if(i){var o=this._createComponentBusyState("is validating scroll position rowKey.");i.then(function(t){t||delete e.rowKey,this._clearComponentBusyState(o),this._syncScrollPosition(e,!0)}.bind(this))}return!1}var l=this._getScrollCoordinates(e),n=this._isScrollableX()?l.x:0,s=this._isScrollableY()?l.y:0;if(isNaN(n)&&isNaN(s))return this.option("scrollPosition",this._getCurrentScrollPosition(),{_context:{originalEvent:null,internalSet:!0}}),this._scrollPosition=null,this._editRowCallback=null,!0;var a,r=isNaN(this._scrollTop)?0:this._scrollTop,_=isNaN(this._scrollLeft)?0:this._scrollLeft;if(!isNaN(n)&&isNaN(s)||!isNaN(n)&&s===r&&n!==_)this._isScrollableX()?(this._setScrollX(n),a=this._getCurrentScrollPosition(n)):a=this._getCurrentScrollPosition(),this.option("scrollPosition",a,{_context:{originalEvent:null,internalSet:!0}});else if(s!==r){if(!this._isScrollableY())return isNaN(n)||n===_?(this.option("scrollPosition",this._getCurrentScrollPosition(),{_context:{originalEvent:null,internalSet:!0}}),!0):(delete e.y,this._syncScrollPosition(e,t));var h=this._setScrollY(s);if(isNaN(n)||n===_||this._setScrollX(n),-1===s)return this._scrollPosition=e,h;this.option("scrollPosition",this._getCurrentScrollPosition(n,s),{_context:{originalEvent:null,internalSet:!0}})}else e&&(null==e.rowKey||isNaN(e.rowIndex))&&this.option("scrollPosition",this._getCurrentScrollPosition(n,s),{_context:{originalEvent:null,internalSet:!0}});return null!=this._scrollPosition&&(this._scrollPosition=null),this._editRowCallback&&(this._editRowCallback(),this._editRowCallback=null),!0},I.prototype._isScrollableX=function(){var e=this._getLayoutManager();return Math.abs(e.getScrollWidth()-e.getClientWidth())>1},I.prototype._isScrollableY=function(){var e=this._getLayoutManager();return Math.abs(e.getScrollHeight()-e.getClientHeight())>1},I.prototype._setScrollX=function(e){var t=this._getLayoutManager().getScroller();this._skipScrollUpdate=!0,S.setScrollLeft(t,e)},I.prototype._setScrollY=function(e){var t=this._getLayoutManager(),i=t.getScroller();this._skipScrollUpdate=!0;var o=i.scrollTop;return i.scrollTop=-1===e?t.getScrollHeight()-t.getClientHeight():e,o!==i.scrollTop&&(this._setScrollPosBusyState(),!0)},I.prototype._getScrollTopByIndex=function(e){if(0===e)return 0;if(!(this._isLoadMoreOnScroll()&&e>this.options.scrollPolicyOptions.maxCount)){var t=this._getTableBodyRows()[e];return null!=t?this._getLayoutManager().getRowScrollTop(t):this._hasMoreToFetch()?-1:void 0}},I.prototype._getScrollTopByKey=function(e){var t=this._findRowElementByKey(e);return null!=t?this._getLayoutManager().getRowScrollTop(t):this._hasMoreToFetch()?-1:void 0},I.prototype._getScrollLeftByIndex=function(e){return this._getLayoutManager().getColumnScrollLeft(e)},I.prototype._getScrollLeftByKey=function(e){var t=this._getColumnIdxForColumnKey(e);return this._getScrollLeftByIndex(t)},I.prototype._getScrollCoordinates=function(e){var t,i,o=this._getLayoutManager();if(!o.hasRenderedSize())return{x:0,y:0};var l=e.rowKey;null!=l&&(t=this._getScrollTopByKey(l));var n=e.columnKey;null!=n&&(i=this._getScrollLeftByKey(n));var s=e.rowIndex;isNaN(t)&&!isNaN(s)&&(t=this._getScrollTopByIndex(s));var a=e.columnIndex;isNaN(i)&&!isNaN(a)&&(i=this._getScrollLeftByIndex(a));var r=e.offsetX;!isNaN(i)&&!isNaN(r)&&i>=0&&(i+=r);var _=e.offsetY;if(!isNaN(t)&&!isNaN(_)&&t>=0&&(t+=_),isNaN(i)&&!isNaN(e.x)&&(i=Math.max(0,e.x)),-1!==t){var h=isNaN(t)?e.y:t;if(!isNaN(h)){var d=o.getScrollHeight()-o.getClientHeight();t=h>d?this._hasMoreToFetch()?-1:d:Math.max(0,h)}}return{x:i,y:t}},I.prototype._getCurrentHorizontalScrollPosition=function(e){var t=null==e?this._scrollLeft:e,i={x:null==t?0:t},o=this.option("scrollPosition"),l=Math.abs(o.x-i.x);if(l<1&&null!=o.columnKey&&!isNaN(o.columnIndex))return i.columnKey=o.columnKey,i.columnIndex=o.columnIndex,i.offsetX=o.offsetX+l,i;var n=this._getColumnLocations();if(n&&n.length>0){var s,a=n.length-1;for(s=0;s<n.length-1;s++)if(i.x>=n[s]&&i.x<n[s+1]){a=s;break}i.columnKey=this._getColumnDefs()[a].id,i.columnIndex=a,i.offsetX=i.x-n[a]}return i},I.prototype._getCurrentVerticalScrollPosition=function(e){var t=null==e?this._scrollTop:e,i={y:null==t?0:t},o=this._findClosestElementToTop(i);return null!=o&&(i.rowIndex=o.index,i.rowKey=this._getRowKeyForRowIdx(o.index),i.offsetY=o.offset),i},I.prototype._getCurrentScrollPosition=function(e,t){if(!this._getLayoutManager().hasRenderedSize())return{x:0,y:0};var i=this._getCurrentHorizontalScrollPosition(e),o=this._getCurrentVerticalScrollPosition(t);return Object.keys(o).forEach(function(e){i[e]=o[e]}),i},I.prototype._getColumnLocations=function(){if(null==this._columnOffsets){this._columnOffsets=[];var e=this._getTableHeaderColumns();if(e.length>0){var t=this._getScrollLeftByIndex(0);this._columnOffsets.push(0);for(var i=1;i<e.length;i++)this._columnOffsets.push(this._getScrollLeftByIndex(i)-t)}}return this._columnOffsets},I.prototype._findClosestElementToTop=function(e){var t,i=this._getLayoutManager(),o=this._getTableBodyRows(),l=o.length,n=i.getScrollHeight();if(0===l||0===n)return null;var s=e.y,a=this.option("scrollPosition");t=Math.abs(a.y-s)<I.DEFAULT_ROW_HEIGHT_GUESS&&null!=a.rowKey&&!isNaN(a.rowIndex)?a.rowIndex:Math.floor(s/n*l);var r=o[t=Math.min(Math.max(t,0),l-1)],_=i.getRowScrollTop(r),h=s-_,d={index:t,elem:r,offsetTop:_,offset:h};if(Math.abs(h)<1)return d;var u=h>0;for(u?t+=1:t-=1;t>=0&&t<l;){var c=_;if(r=o[t],_=i.getRowScrollTop(r),(h=Math.abs(s-_))<1||(u?s<=_:s>=_)){d=h<1||!u?{index:t,elem:r,offsetTop:_,offset:h}:{index:t-1,elem:o[t-1],offsetTop:c,offset:s-c};break}u?t+=1:t-=1}return d},I.prototype._registerDomEventListeners=function(){this._getLayoutManager().registerScrollListeners()},I.prototype._isTableActionableMode=function(){return null!=this._active&&this._active.isActionable},I.prototype._isTableEditMode=function(){return this.options.editMode===I._OPTION_EDIT_MODE._ROW_EDIT},I.prototype._toggleTableActionableMode=function(){this._isTableActionableMode()?this._setTableActionableMode(!1):this._setTableActionableMode(!0)},I.prototype._setTableActionableMode=function(e,t){var i;e&&!this._isTableActionableMode()?(i=this._hasActiveHeader()?this._getTableHeaderRow():this._hasActiveFooter()?this._getTableFooterRow():this._getActiveElement(),this._clearAccStatusInfo(),this._applyActionableMode(i,t)):!e&&this._isTableActionableMode()&&(this._active.isActionable=!1,!t&&this._getTable().contains(document.activeElement)&&this._getTable().focus(),null!=(i=this._hasActiveHeader()?this._getTableHeaderRow():this._hasActiveFooter()?this._getTableFooterRow():this._getActiveElement())&&A.disableAllFocusableElements(i,null,!0))},I.prototype._applyActionableMode=function(e,t){var i=this._getActiveElement();if(null!=i){A.enableAllFocusableElements(e);var o=A.getFocusableElementsInNode(i);o.length>0&&(this._active.isActionable=!0,this._focusOutHandler(c(i)),t||o[0].focus())}},I.prototype._getEditableRowIdx=function(){if(null!=this._getEditableRowKey()){var e=this._getRowIdxForRowKey(this._getEditableRowKey());if(null!==e)return e}return this._editableRowIdx},I.prototype._getEditableRowKey=function(){return this._editableRowKey},I.prototype._hasEditableRow=function(){return!!this._isTableEditMode()&&null!==this._getEditableRowIdx()},I.prototype._setEditRow=function(e,t=0){if(this._isTableEditMode())if(!0!==this._isEditPending){this._delayed_edit=null;var i=e.rowKey,o=e.rowIndex;if(null!=i||o>-1){var l=this._setCurrentRow({rowKey:i,rowIndex:o});l instanceof Promise?l.then(function(i){i===I._CURRENT_ROW_STATUS._UPDATED?this._setEditableHelper(t):i===I._CURRENT_ROW_STATUS._IGNORED&&this._scrollToRowHelper(e,t)}.bind(this)):l===I._CURRENT_ROW_STATUS._UPDATED?this._setEditableHelper(t):l===I._CURRENT_ROW_STATUS._IGNORED&&this._scrollToRowHelper(e,t)}else this._setTableEditable(!1,!1,0,!0,null)}else this._delayed_edit={editRow:e,columnIdx:t}},I.prototype._setEditableHelper=function(e){null==this._delayed_edit&&this._setTableEditable(!0,!1,e,!0,null)},I.prototype._scrollToRowHelper=function(e,t){const i=this._scrollTop;this._syncScrollPosition({rowKey:e.rowKey,rowIndex:e.rowIndex})||(this._editRowCallback=function(){this._scrollTop!==i&&this._setEditRow(e,t)}.bind(this))},I.prototype._getRowToBeEdited=function(e){const t=e.rowKey,i=e.rowIndex;return null!=t?this._findRowElementByKey(t):i>-1?this._getTableBodyRow(i):null},I.prototype._setEditableRowIdx=function(e){this._editableRowKey=this._getRowKeyForRowIdx(e),this._editableRowIdx=e},I.prototype._setAdjacentRowEditable=function(e,t,i,o){var l=this._getEditableRowIdx(),n=this._setTableEditable(!1,!1,e,i,o);n instanceof Promise?n.then(function(){this._queueTask(function(){this._handleAdjacentEditEndSuccessful(e,l,i,o)}.bind(this))}.bind(this),function(){this._queueTask(function(){this._handleEditEndRejected(t,l,!i)}.bind(this))}.bind(this)):!1===n?this._handleEditEndRejected(t,l,!i):this._handleAdjacentEditEndSuccessful(e,l,i,o)},I.prototype._handleAdjacentEditEndSuccessful=function(e,t,i,o){var l=this._getTableBodyRows(),n=this._findAdjacentEditableRow(t,l,i);null!==n?(this._setActiveRow(n,o,!0,!1,!0),this._setTableEditable(!0,!1,e,i,o)):this._getTable().focus()},I.prototype._findAdjacentEditableRow=function(e,t,i){if(i)for(let i=e+1;i<t.length;i++){if(t[i][I._DATA_OJ_EDITABLE]!==I._CONST_OFF)return i}else for(let i=e-1;i>=0;i--){if(t[i][I._DATA_OJ_EDITABLE]!==I._CONST_OFF)return i}return null},I.prototype._handleEditEndRejected=function(e,t,i){this._setCellInRowFocus(t,e,i)},I.prototype._fireEditRowChangeEvent=function(e,t){this._queueTask(function(){this.option("editRow",e,{_context:{originalEvent:t,internalSet:!0,writeback:!0}})}.bind(this))},I.prototype._setTableEditable=function(e,t,i,o,l){if(this._isTableEditMode()&&!this._isEditPending){var n=this._getData()instanceof u.TableDataSourceAdapter,s=this._getCurrentRow();if(null!=s){const u=this._getRowToBeEdited(s);if(u&&u[I._DATA_OJ_EDITABLE]!==I._CONST_OFF){var a,r,_,h,d=s.rowKey,c=this._getRowIdxForRowKey(d),S=[];let u;var E=this._getEditableRowKey();try{if(e&&!this._hasEditableRow())a=this._getTableBodyRow(c),(r=this._getRendererContextObject(a,{row:{key:d,index:s.rowIndex},isCurrentRow:!0})).item=a[I._ROW_ITEM_EXPANDO],(_=this._trigger("beforeRowEdit",l,{accept:function(e){S.push(e)},rowContext:r}))&&(h={rowKey:d,rowIndex:c});else{if(e||!this._hasEditableRow())return;a=this._getTableBodyRow(this._getEditableRowIdx()),d=this._getRowKeyForRowIdx(this._getEditableRowIdx()),(r=this._getRendererContextObject(a,{row:{key:d,index:this._getDataSourceRowIndexForRowKey(d)},isCurrentRow:!0})).item=a[I._ROW_ITEM_EXPANDO],(_=this._trigger("beforeRowEditEnd",l,{accept:function(e){S.push(e)},setUpdatedItem:function(e){u=e},cancelEdit:t,rowContext:r}))&&(h={rowKey:null,rowIndex:-1})}}catch(e){return!1}if(!_)return this._syncActiveElement(),!1;var C=this._getTable();a.contains(document.activeElement)&&(this._isSkipScrollOnFocus=!t,C.focus());var T=function(s){this._removeSkeletonRow(a);var r=this._getRowIdxForRowKey(d);return e&&c!==r&&(h.rowIndex=r),this._fireEditRowChangeEvent(h,l),e?(this._setTableActionableMode(!1,!0),this._setEditableRowIdx(r),C.setAttribute(I.DOM_ATTR._ARIA_LABELLEDBY,""),this._refreshRow(r,!1,!n).then(function(){return this._setCellInRowFocus(r,i,o),this._refreshPrevEditableRow(E,s,!1)}.bind(this))):(this._focusEditCell=null,this._setEditableRowIdx(null),this._refreshPrevEditableRow(E,s,t))}.bind(this);if(0!==S.length)return this._prepareAsyncRowEdit(a),this._queueTask(function(){return this._editPromise=Promise.all(S).then(function(){return null!=u?u.then(function(e){return T(e)},function(){return T()}):T()},function(){return this._removeSkeletonRow(a),e&&null==E&&this._syncActiveElement(),this._clearEditPending(),!1}.bind(this)),this._editPromise}.bind(this));if(null!=u)return this._prepareAsyncRowEdit(a),this._queueTask(function(){return this._editPromise=u.then(function(e){return T(e)},function(){return T()}),this._editPromise}.bind(this));this._fireEditRowChangeEvent(h,l),e?(this._setTableActionableMode(!1,!0),this._setEditableRowIdx(c),C.setAttribute(I.DOM_ATTR._ARIA_LABELLEDBY,""),this._queueTask(function(){var e=this._getRowIdxForRowKey(d);return this._refreshRow(e,!1,!n).then(function(){this._setCellInRowFocus(e,i,o)}.bind(this))}.bind(this))):(this._focusEditCell=null,this._setEditableRowIdx(null)),this._queueTask(function(){return this._refreshPrevEditableRow(E,null,t)}.bind(this))}}}},I.prototype._prepareAsyncRowEdit=function(e){this._isEditPending=!0,this._insertSkeletonRow(e),this._syncScrollPosition()},I.prototype._clearEditPending=function(){this._isEditPending=!1,this._isSkipScrollOnFocus=!1,this._editPromise=null,null!=this._delayed_edit&&this._queueTask(()=>{this._setEditRow(this._delayed_edit.editRow,this._delayed_edit.columnIdx)})},I.prototype._refreshPrevEditableRow=function(e,t,i){const o=this._getRowIdxForRowKey(e);if(null!=o){let e;return null!=t&&t.updatedItem&&(e=t.updatedItem),this._refreshRow(o,!1,i,e).then(()=>{this._clearEditPending()})}return this._clearEditPending(),Promise.resolve()},I.prototype._handleAddRow=function(e,t){let i=[];this._trigger("beforeRowAddEnd",t,{accept:function(e){i.push(e)},cancelAdd:e})&&(this._setTableActionableMode(!1),0!==i.length?(this._insertSkeletonRow(null,-1),this._getTable().focus(),this._queueTask(function(){return Promise.all(i).then(function(){return this._removeSkeletonRow(null,-1),this._isAddRowRendered=!1,this._refreshAddNewRowPlaceholder().then(function(){let t=this._getPlaceHolderRow();this._getLayoutManager()._initializeFrozenColumns(!1,t),this._setActiveAddRow(),this._setTableActionableMode(!e)}.bind(this))}.bind(this),function(){this._removeSkeletonRow(null,-1),this._setActiveAddRow(),this._setTableActionableMode(!0)}.bind(this))}.bind(this))):this._queueTask(function(){return this._isAddRowRendered=!1,this._refreshAddNewRowPlaceholder().then(function(){let t=this._getPlaceHolderRow();this._getLayoutManager()._initializeFrozenColumns(!1,t),this._setActiveAddRow(),this._setTableActionableMode(!e)}.bind(this))}.bind(this)))},I._KEYBOARD_CODES={_MODIFIER_SHIFT:"shiftKey"},I.prototype._getKeyboardKeys=function(){return this._keyboardKeys||(this._keyboardKeys=[]),this._keyboardKeys.reverse()},I.prototype._addKeyboardKey=function(e){var t,i=!1,o=Object.keys(A.KEYBOARD_KEYS);for(t=0;t<o.length;t++){var l=o[t];if(A.KEYBOARD_KEYS[l]===e){i=!0;break}}if(i){var n=this._getKeyboardKeys(),s=!1,a=n.length;for(t=0;t<a;t++)if(n[t]===e){s=!0;break}s||n.push(e)}},I.prototype._isKeyPressMatch=function(e){for(var t=this._getKeyboardKeys(),i=0;i<t.length;i++)if(e(t[i]))return!0;return!1},I.prototype._removeKeyboardKey=function(e){for(var t=this._getKeyboardKeys(),i=t.length,o=0;o<i;o++)t[o]===e&&t.splice(o,1)},I.prototype._clearKeyboardKeys=function(){this._keyboardKeys=[]},I.prototype._handleKeydownLeftRight=function(e,t){if(!this._isTableActionableMode()&&!this._hasEditableRow()){var i,o,l="rtl"===this._GetReadingDirection(),n=this._isKeyPressMatch(A.isArrowLeftKeyEvent),s=l&&n||!l&&!n,a=this._getActiveHeaderIndex();if(null!=a)return i=!t||this._isNavigate||null==this._lastSelectedHeaderIdx?a:this._lastSelectedHeaderIdx,o=this._getNextVisibleColumnIndex(i,s),void(t?(this._isNavigate=!1,this._selectRange(a,Math.max(0,o),!1),this._scrollColumnIntoViewport(o)):(this._isNavigate=!0,o!==a&&this._setActiveHeader(o,e)));var r=this._getActiveFooterIndex();if(null!=r)return i=!t||this._isNavigate||null==this._lastSelectedFooterIdx?r:this._lastSelectedFooterIdx,o=this._getNextVisibleColumnIndex(i,s),void(t?(this._isNavigate=!1,this._selectRange(r,Math.max(0,o),!1),this._scrollColumnIntoViewport(o)):(this._isNavigate=!0,o!==r&&this._setActiveFooter(o,e)));this._updateAccStatusInfo(this._getNextVisibleColumnIndex(this._accColumnIndex,s))}},I.prototype._handleKeydownUpDown=function(e,t){if(!this._isTableActionableMode()&&!this._hasEditableRow()){null==this._active&&this._syncActiveElement();var i=this._isKeyPressMatch(A.isArrowUpKeyEvent),o=this._getFirstVisibleColumnIndex(0,!0);if(S.isMetaKeyPressed(e))i&&null==this._getActiveHeaderIndex()?this._setActiveHeader(o,e):i||null!=this._getActiveFooterIndex()||this._setActiveFooter(o,e);else{var l=this._getActiveRowIndex();if(null==l)i||null==this._getActiveHeaderIndex()?i&&null!=this._getActiveFooterIndex()?this._getTableBodyRows().length>0?this._setActiveRow(this._getTableBodyRows().length-1,e,!0,null,null,!0):this._setActiveNoData():this._hasActiveAddRow()?i?this._setActiveHeader(o,e):this._getTableBodyRows().length>0?this._setActiveRow(0,e,!0,null,null,!0):this._setActiveNoData():this._hasActiveNoData()&&(i?this._isAddNewRowEnabled()?this._setActiveAddRow():this._setActiveHeader(o,e):this._setActiveFooter(o,e)):this._isAddNewRowEnabled()?this._setActiveAddRow():this._getTableBodyRows().length>0?this._setActiveRow(0,e,!0,null,null,!0):this._setActiveNoData();else{var n,s,a=this._getTableBodyRows().length;if(n=!t||this._isNavigate||null==this._lastSelectedRowIdx?l:this._lastSelectedRowIdx,s=i?n>0?n-1:n:n<a-1?n+1:n,t)this._isNavigate=!1,this._selectRange(l,s,!0),this._scrollRowIntoViewport(s,!0);else if(this._isNavigate=!0,s!==l){if(!this._setActiveRow(s,e,!0,null,null,!0))return;this._getTable().focus()}else 0===s&&i?this._isAddNewRowEnabled()?this._setActiveAddRow():this._setActiveHeader(o,e):s!==a-1||i||this._setActiveFooter(o,e)}}}},I.prototype._handleKeydownTab=function(e){this._isTableTab=!0;var t,i=this._getActiveRowIndex(),o=this._getTableBody(),l=document.activeElement;if(null!=i&&this._getEditableRowIdx()===i){var n=this._getTableBodyRow(i),s=A.getFocusableElementsInNode(n),a=s.length,r=c(s).index(l),_=Math.max(this._getColumnDefs().length-1,0);r!==a-1||e[I._KEYBOARD_CODES._MODIFIER_SHIFT]?0===r&&e[I._KEYBOARD_CODES._MODIFIER_SHIFT]&&(this._setAdjacentRowEditable(_,0,!1,e),e.preventDefault(),e.stopPropagation()):(this._setAdjacentRowEditable(-1,_,!0,e),e.preventDefault(),e.stopPropagation())}else if(this._isTableActionableMode()){var h,d;if(h=this._hasActiveHeader()?this._getTableHeaderRow():this._hasActiveFooter()?this._getTableFooterRow():this._getActiveElement(),(t=A.getFocusableElementsInNode(h)).length>1){if(e[I._KEYBOARD_CODES._MODIFIER_SHIFT]){if(l===t[0])c(t[t.length-1]).focus(),e.preventDefault(),e.stopPropagation();else for(d=0;d<t.length;d++)if(l===t[d]){t[d-1].focus(),e.preventDefault(),e.stopPropagation();break}}else if(l===t[t.length-1])c(t[0]).focus(),e.preventDefault(),e.stopPropagation();else for(d=0;d<t.length;d++)if(l===t[d]){t[d+1].focus(),e.preventDefault(),e.stopPropagation();break}}else e.preventDefault(),e.stopPropagation()}else{!A.isFirefox()||this._isStickyLayoutEnabled()||e[I._KEYBOARD_CODES._MODIFIER_SHIFT]||(this._tempFFFocus=!0,o.focus());var u=e.key||e.keyCode;this._removeKeyboardKey(u)}},I.prototype._handleKeydownEnter=function(e){if(!(this._isTableActionableMode()&&!this._hasActiveAddRow()||A.isEventClickthroughDisabled(e,this._getTable()))){var t=this._getActiveHeaderIndex();if(null!=t){if(-1!==t&&this._getColumnDefs()[t].sortable===I._OPTION_ENABLED){var i=this._getTableHeaderColumn(t),o=c(i).data("sorted");null==o||o===I._COLUMN_SORT_ORDER._DESCENDING?this._handleSortTableHeaderColumn(t,!0,e):this._handleSortTableHeaderColumn(t,!1,e)}}else if(null==this._getActiveFooterIndex()){var l=this._getCurrentRow(),n=null!=(l=l||{}).rowIndex?l.rowIndex:-1;if(n>=0)if(this._isTableEditMode()){if(!this._hasEditableRow())return void this._setTableEditable(!0,!1,-1,!0,e);var s=this._getElementColumnIdx(e.target);e[I._KEYBOARD_CODES._MODIFIER_SHIFT]?this._setAdjacentRowEditable(s,s,!1,e):this._setAdjacentRowEditable(s,s,!0,e)}else this._fireActionEvent(n,e,!1),this._setTableActionableMode(!0);else this._hasActiveAddRow()&&this._isTableActionableMode()&&this._handleAddRow(!1,e)}}},I.prototype._handleKeydownSpacebar=function(e){if(!this._isTableActionableMode()&&!this._hasEditableRow()){e.preventDefault(),e.stopPropagation();var t=this._getActiveRowIndex();if(null==t){var i=this._getActiveHeaderIndex();if(null==i){var o=this._getActiveFooterIndex();null!=o&&this._handleSelectionGesture(o,!1,!0)}else-1!==i?this._handleSelectionGesture(i,!1,!0):this._isSelectAllControlVisible()&&this._handleSelectAllGesture()}else this._handleSelectionGesture(t,!0,!0)}},I.prototype._handleKeydownF2=function(e){e.preventDefault(),e.stopPropagation(),this._isStickyLayoutEnabled()?this._isTableEditMode()&&this._hasEditableRow()||this._toggleTableActionableMode():this._isTableEditMode()?this._hasEditableRow()?this._setTableEditable(!1,!1,0,!0,e):(this._setTableEditable(!0,!1,0,!0,e),this._hasEditableRow()||this._toggleTableActionableMode()):this._toggleTableActionableMode()},I.prototype._handleKeydownEsc=function(e){this._hasEditableRow()?(e.preventDefault(),e.stopPropagation(),this._setTableEditable(!1,!0,0,!0,e)):this._isTableActionableMode()&&(e.preventDefault(),e.stopPropagation(),this._setTableActionableMode(!1)),this._getLayoutManager().handleKeyDownEsc()},I.prototype._handleKeydownHome=function(e){if(!this._isTableActionableMode()&&!this._hasEditableRow())if(null==this._active&&this._syncActiveElement(),this._hasActiveHeader()||this._hasActiveFooter()){var t=this._getFirstVisibleColumnIndex(0,!0);this._hasActiveHeader()?this._setActiveHeader(t,e):this._setActiveFooter(t,e)}else this._hasActiveRow()&&this._setActiveRow(0,e,!0)},I.prototype._handleKeydownEnd=function(e){if(!this._isTableActionableMode()&&!this._hasEditableRow())if(null==this._active&&this._syncActiveElement(),this._hasActiveHeader()||this._hasActiveFooter()){var t=this._getNextVisibleColumnIndex(this._getColumnDefs().length,!1);this._hasActiveHeader()?this._setActiveHeader(t,e):this._setActiveFooter(t,e)}else if(this._hasActiveRow()){var i=this._getTableBodyRows().length;this._setActiveRow(i-1,e,!0)}},I.prototype._columnHeaderDefaultRenderer=function(e,t){var i=e.headerContext.parentElement,o=document.createElement(I.DOM_ELEMENT._DIV);o.classList.add(I.CSS_CLASSES._COLUMN_HEADER_CLASS),c(i).empty(),i.appendChild(o);var l=document.createElement(I.DOM_ELEMENT._DIV);l.classList.add(I.CSS_CLASSES._COLUMN_HEADER_TEXT_CLASS),o.insertBefore(l,o.firstChild),null!=t?t(c(l)):this._columnHeaderDefaultTextRenderer(l,e)},I.prototype._columnHeaderSortableIconRenderer=function(e,t){var i=e.headerContext.parentElement,o=document.createElement(I.DOM_ELEMENT._DIV);o.classList.add(I.CSS_CLASSES._COLUMN_HEADER_CLASS),c(i).empty(),i.appendChild(o);var l=document.createElement(I.DOM_ELEMENT._DIV);l.classList.add(I.CSS_CLASSES._TABLE_SORT_ICON_CONTAINER_CLASS),l.setAttribute(I.DOM_ATTR._TITLE,this.getTranslatedString("labelSortAsc")),l.setAttribute(I.DOM_ATTR._ARIA_HIDDEN,"true"),this._AddHoverable(c(l)),o.appendChild(l);var n=document.createElement(I.DOM_ELEMENT._DIV);n.classList.add(I.CSS_CLASSES._WIDGET_ICON_CLASS),n.classList.add(I.CSS_CLASSES._COLUMN_HEADER_DEFAULT_SORT_ICON_CLASS),n.classList.add(I.MARKER_STYLE_CLASSES._DISABLED),n.classList.add(I.MARKER_STYLE_CLASSES._CLICKABLE_ICON),this._AddHoverable(c(n)),l.appendChild(n);var s=document.createElement(I.DOM_ELEMENT._DIV);s.classList.add(I.CSS_CLASSES._COLUMN_HEADER_TEXT_CLASS),o.insertBefore(s,o.firstChild),null!=t?t(c(s)):this._columnHeaderDefaultTextRenderer(s,e)},I.prototype._columnHeaderDefaultTextRenderer=function(e,t){var i=t.columnIndex,o=this._getColumnDefs()[i],l=null==o.headerText?"":o.headerText;if(e.appendChild(document.createTextNode(l)),!0===o.showRequired&&this._isStickyLayoutEnabled()){var n=e.parentElement,s=this._createRequiredIconDomElement();n.childNodes.length>1?n.insertBefore(s,n.childNodes[1]):n.appendChild(s)}},I.prototype._createRequiredIconDomElement=function(){var e=document.createElement(I.DOM_ELEMENT._SPAN);return e.className=I.CSS_CLASSES._COLUMN_HEADER_SHOW_REQUIRED_ICON_CLASS,e.setAttribute(I.DOM_ATTR._ROLE,"img"),e.setAttribute(I.DOM_ATTR._TITLE,this.getTranslatedString("tooltipRequired")),e},I.prototype._tableBodyRowDefaultRenderer=function(e,t,i){for(var o=this._getColumnDefs().length,l=0;l<o;l++)this._tableBodyCellDefaultRenderer(e,l,t,i)},I.prototype._tableBodyCellDefaultRenderer=function(e,t,i,o){var l=o.rowContext.parentElement,n=this._getColumnDefs()[t],s=this._createTableBodyCell();this._styleTableBodyCell(t,s,!0),this._insertTableBodyCell(e,i.key,t,s,l,!0);var a=null;null!=n.field&&(a=this._getObjectPath(i.data,n.field));var r=this._getColumnRenderer(t,"cell"),_=this._getSlotTemplate(n.template);if(null==_&&this._isDefaultCellTemplateSlotValid()&&(_=this._getSlotTemplate("cellTemplate")),r||_){var h=this._getRendererContextObject(s,{row:i});h.rowEditable=l[I._DATA_OJ_EDITABLE];var d={cellContext:h,columnIndex:t,data:a,row:i.data,componentElement:h.componentElement,parentElement:h.parentElement};if(r)A.applyRendererContent(s,r(d))||(s=c(l).children()[t],this._setTableBodyCellAttributes(e,i.key,t,s),this._styleTableBodyCell(t,s,!1));else{var u=this._getRootElement(),S=this._getTemplateEngine();if(null!=S){var E=this._getTableBody(),C=this._getCellSlotTemplateContextObject(d),T=S.execute(u,_,C,this.options.as,E,new Map([[R.FormVariantContext,"embedded"]]));T instanceof Array||(T=[T]),T.map(function(e){s.appendChild(e)}),this._hasCellTemplate=!0}}}else{var p=null==(a=this._getVal(a))?"":a;if(s.appendChild(document.createTextNode(p)),A.isIos()){s.setAttribute(I.DOM_ATTR._ROLE,"text");var g=this._getVoiceOverCellLabelledby(s,t);s.setAttribute(I.DOM_ATTR._ARIA_LABELLEDBY,g)}}},I.prototype._getRendererContextObject=function(e,t){var i={component:f.__GetWidgetConstructor(this.element,"ojTable")},o=this.options.data;if(this._isPagingModelTableDataSource()&&(o=o.getWrappedDataSource()),i.datasource=o,i.parentElement=e,null!=t.row){var l=t.row,n=l.key;if(i.status=this._getRendererStatusObject(l),this._hasEditableRow()){var s=this._getEditableRowKey();u.Object.compareValues(n,s)?i.mode="edit":i.mode="navigation"}else i.mode="navigation";this._copyMetadata(i,l)}return this._FixRendererContext(i)},I.prototype._getRendererStatusObject=function(e){return{rowIndex:e.index,rowKey:e.key,currentRow:c.extend({},this._getCurrentRow())}},I.prototype._getCellSlotTemplateContextObject=function(e,t){var i=this._getSlotTemplateContextObject(),o=e.columnIndex;if(!t){var l=e.cellContext.status.rowIndex,n=e.cellContext.status.rowKey;i[I._CONST_DATA]=e.data,i.row=e.row,i[I._CONST_INDEX]=l,i.mode=e.cellContext.mode,i[I._CONST_KEY]=n;const t=e.parentElement.parentElement;i.item=t[I._ROW_ITEM_EXPANDO],i.rowEditable=this._invokeRowEditableCallback(t[I._ROW_ITEM_EXPANDO])}i.columnIndex=o,i.columnKey=this._getColumnKeyForColumnIdx(e.columnIndex);var s=this.options.data;return this._isPagingModelTableDataSource()&&(s=s.getWrappedDataSource()),i.datasource=s,i},I.prototype._getRowSlotTemplateContextObject=function(e,t){var i=this._getSlotTemplateContextObject();t||(i[I._CONST_DATA]=e.data,i[I._CONST_INDEX]=e.rowContext.status.rowIndex,i[I._CONST_KEY]=e.rowContext.status.rowKey,i.mode=e.rowContext.mode,i.item=e.parentElement[I._ROW_ITEM_EXPANDO],i.editable=this._invokeRowEditableCallback(e.parentElement[I._ROW_ITEM_EXPANDO]),i.rowContext=e.rowContext);var o=this.options.data;return this._isPagingModelTableDataSource()&&(o=o.getWrappedDataSource()),i.datasource=o,i},I.prototype._getHeaderSlotTemplateContextObject=function(e,t){var i=this._getSlotTemplateContextObject();return i[I._CONST_DATA]=e,i.columnIndex=t,i.headerText=e,i.columnKey=this._getColumnKeyForColumnIdx(t),i},I.prototype._getFooterSlotTemplateContextObject=function(e){var t=this._getSlotTemplateContextObject();return t.columnIndex=e,t.columnKey=this._getColumnKeyForColumnIdx(e),t},I.prototype._getSlotTemplateContextObject=function(){return{componentElement:this._getRootElement()}},I.prototype._copyMetadata=function(e,t){var i=t.metadata;if(i)for(var o=Object.keys(i),l=0;l<o.length;l++){var n=o[l];e[n]=i[n]}},I.prototype._getObjectPath=function(e,t){if(null!=e&&("string"==typeof t||t instanceof String)&&(-1!==t.indexOf(".")||-1!==t.indexOf("[")&&-1!==t.indexOf("]"))){var i=e,o=!1;if(t.split(".").map(function(e){if(null!=i&&-1!==e.indexOf("[")&&-1!==e.indexOf("]")){var t=e.substr(0,e.indexOf("[")),l=parseInt(e.substr(e.indexOf("[")+1,e.indexOf("]")-e.indexOf("[")-1),10);i=i[t][l],o=!0}else null!==i&&void 0!==i[e]&&(i=i[e],o=!0)}),o)return i}else if(null==e)return null;return e[t]},I.prototype._getVal=function(e){return"function"==typeof e?e():e},I.prototype._getRowSelectionMode=function(){return null==this.options.selectionMode?null:this.options.selectionMode[I._CONST_ROW]},I.prototype._isRowSelectionEnabled=function(){var e=this._getRowSelectionMode();return e===I._OPTION_SELECTION_MODES._SINGLE||e===I._OPTION_SELECTION_MODES._MULTIPLE},I.prototype._getColumnSelectionMode=function(){return null==this.options.selectionMode?null:this.options.selectionMode[I._CONST_COLUMN]},I.prototype._isColumnSelectionEnabled=function(){var e=this._getColumnSelectionMode();return e===I._OPTION_SELECTION_MODES._SINGLE||e===I._OPTION_SELECTION_MODES._MULTIPLE},I.prototype._syncSelectionState=function(){var e=this.option("selected"),t=this.option("selection");this._selectionSet&&(e=this._getSelectedEquivalent(t),this._syncRangeSelection()),this._isSelectionRequiredSatisfied(e)?this._setSelected(e,this._selectionSet):this._selectFirstRowOrColumn()},I.prototype._updateSelectionStateFromEventDetailRemove=function(e,t){var i=this.option("selected"),o=i.row;o&&(e[I._CONST_KEYS].forEach(function(e){null!=t&&t[I._CONST_KEYS].has(e)||(o.isAddAll()?o.has(e)||(o=o.add([e])):o=o.delete([e]))}),i.row!==o&&(i={row:o,column:i.column},this._isSelectionRequiredSatisfied(i)?this._setSelected(i):this._selectFirstRowOrColumn()))},I.prototype._updateSelectionStateFromEventDetailChange=function(e){var t=this.option("firstSelectedRow");if(null!=t){var i=[];e[I._CONST_KEYS].forEach(function(e){i.push(e)});for(var o=0;o<i.length;o++){var l=i[o],n=e[I._CONST_DATA][o];if(u.KeyUtils.equals(l,t.key)&&this.option("firstSelectedRow",{key:l,data:n},{_context:{writeback:!0,internalSet:!0}}),null!=this._validatedSelectedRowKeyData)for(var s=0;s<this._validatedSelectedRowKeyData.length;s++){var a=this._validatedSelectedRowKeyData[s];if(u.KeyUtils.equals(l,a.key)){this._validatedSelectedRowKeyData[s]=n;break}}}}},I.prototype._validateInitialSelectionState=function(e){var t,i,o=this.option("selection"),l=this.option("selected"),n=l.row,s=l.column;if(this._validatedSelectedRowKeyData=null,(this._selectionSet||!e&&null!=o&&0!==o.length&&n===n.clear()&&s===s.clear())&&(l=this._getSelectedEquivalent(o),t=!0),this._isSelectionRequired())if((i=this._validateSelected(l)).isLocal)this._enforceSelectionRequired(l,i.result,t);else{var a=this._createComponentBusyState("is validating selection-required keys.");i.result.then(function(e){this._enforceSelectionRequired(l,e,t),this._clearComponentBusyState(a)}.bind(this))}else t&&this._syncRangeSelection(),this._setSelected(l,t);this._initialSelectionStateValidated=!0},I.prototype._isSelectionRequired=function(){return"true"===String(this.options.selectionRequired).toLowerCase()},I.prototype._hasSelected=function(e){null==e&&(e=this.option("selected"));var t=e.row,i=e.column;return t.isAddAll()||t.values().size>0||i.isAddAll()||i.values().size>0},I.prototype._isSelectionRequiredSatisfied=function(e){return!this._isSelectionRequired()||this._hasSelected(e)},I.prototype._enforceSelectionRequired=function(e,t,i){i?this._hasSelected(t)?t.row===e.row&&t.column===e.column?(this._syncRangeSelection(),this._setSelected(t,!0)):this._setSelected(t):this._selectFirstRowOrColumn():this._hasSelected(t)?this._setSelected(t):this._selectFirstRowOrColumn()},I.prototype._selectFirstRowOrColumn=function(){var e,t;if(this._isRowSelectionEnabled()&&null!=(t=this._getRowKeyForRowIdx(0)))return e=new y.KeySetImpl([t]),void this._setSelected({row:e,column:new y.KeySetImpl});this._isColumnSelectionEnabled()&&null!=(t=this._getColumnKeyForColumnIdx(0))&&(e=new y.KeySetImpl([t]),this._setSelected({row:new y.KeySetImpl,column:e}))},I.prototype._validateSelected=function(e){var t=e.column,i=t;if(!t.isAddAll()){var o=this._getColumnKeys(),l=[];t.values().forEach(function(e){-1===o.indexOf(e)&&l.push(e)}),l.length>0&&(i=i.delete(l))}var n=e.row,s=n;if(!n.isAddAll()){var a=this._getLocalRowKeys(),r=[];if(n.values().forEach(function(e){-1===a.indexOf(e)&&r.push(e)}),r.length>0){var _=this._fetchValidRowKeyData(r);if(_)return{isLocal:!1,result:_.then(function(e){return this._validatedSelectedRowKeyData=e,e.forEach(function(e){r.splice(r.indexOf(e.key),1)}),{row:s=s.delete(r),column:i}}.bind(this))};s=s.delete(r)}}return{isLocal:!0,result:{row:s,column:i}}},I.prototype._fetchValidRowKeyData=function(e){var t=this._getData();if(t&&t.getCapability){var i=t.getCapability("fetchByKeys");if(i&&"lookup"===i.implementation)return new Promise(function(i){t.fetchByKeys({keys:new Set(e),scope:"global"}).then(function(e){var t=[];e.results.forEach(function(e,i){t.push({key:i,data:e.data})}),i(t)},function(){i([])})})}return null},I.prototype._syncRangeSelection=function(e){if(void 0===e&&(e=this.option("selection")),null!=e)for(var t=e.length,i=0;i<t;i++){var o,l,n,s,a=e[i];null!=a.startKey&&null!=a.startKey[I._CONST_ROW]?(o=a.startKey[I._CONST_ROW],l=this._getDataSourceRowIndexForRowKey(o),a.startIndex={},a.startIndex[I._CONST_ROW]=l):null!=a.startIndex&&null!=a.startIndex[I._CONST_ROW]&&(l=a.startIndex[I._CONST_ROW],null!=(o=this._getRowKeyForDataSourceRowIndex(l))&&(a.startKey={},a.startKey[I._CONST_ROW]=o)),null!=a.endKey&&null!=a.endKey[I._CONST_ROW]?(n=a.endKey[I._CONST_ROW],s=this._getDataSourceRowIndexForRowKey(n),a.endIndex={},a.endIndex[I._CONST_ROW]=s):null!=a.endIndex&&null!=a.endIndex[I._CONST_ROW]&&(s=a.endIndex[I._CONST_ROW],null!=(n=this._getRowKeyForDataSourceRowIndex(s))&&(a.endKey={},a.endKey[I._CONST_ROW]=n))}},I.prototype._processRowRangeSelection=function(e,t,i){var o,l,n,s,a,r,_=!0;if(null!=e.startKey&&null!=e.startKey[I._CONST_ROW]?(a=e.startKey[I._CONST_ROW],o=this._getDataSourceRowIndexForRowKey(a),isNaN(o)&&(_=null)):null!=e.startIndex&&null!=e.startIndex[I._CONST_ROW]&&(o=e.startIndex[I._CONST_ROW]),null!=e.endKey&&null!=e.endKey[I._CONST_ROW])r=e.endKey[I._CONST_ROW],null===(l=this._getDataSourceRowIndexForRowKey(r))&&this._isLoadMoreOnScroll()&&(l=this._getDataSourceLastFetchedRowIndex(),_=null);else if(null!=e.endIndex&&null!=e.endIndex[I._CONST_ROW]){l=e.endIndex[I._CONST_ROW];var h=this._getDataSourceLastFetchedRowIndex();this._isLoadMoreOnScroll()&&l>h&&(l=h,_=null)}if(void 0===o&&void 0===l)_=!1;else if(null!=o&&null!=l&&o<=l){a=this._getRowKeyForDataSourceRowIndex(o),r=this._getRowKeyForDataSourceRowIndex(l),n=this._getRowIdxForRowKey(a),s=this._getRowIdxForRowKey(r);for(var d=n;d<=s;d++){var u=this._getRowKeyForRowIdx(d);t=t.add([u])}i=i.clear()}else E.warn("Error: Cannot resolve row range in selection - \n start row key: "+a+"\n end row key: "+r+"\n start row index: "+o+"\n end row index: "+l),null!=a&&null!=r&&(t=(t=t.add([a])).add([r]),i=i.clear());return{status:_,rowKeySet:t,columnKeySet:i}},I.prototype._getDataSourceLastFetchedRowIndex=function(){var e=this._getTableBodyRows();if(e.length>0){var t=this._getData(),i=0;return this._isPagingModelDataProvider()&&(i=t.getStartItemIndex()),e.length+i-1}return 0},I.prototype._processColumnRangeSelection=function(e,t,i){var o,l,n,s,a=!0;if(null!=e.startKey&&null!=e.startKey[I._CONST_COLUMN]?(o=e.startKey[I._CONST_COLUMN],n=this._getColumnIdxForColumnKey(o)):null!=e.startIndex&&null!=e.startIndex[I._CONST_COLUMN]&&(n=e.startIndex[I._CONST_COLUMN]),null!=e.endKey&&null!=e.endKey[I._CONST_COLUMN]?(l=e.endKey[I._CONST_COLUMN],s=this._getColumnIdxForColumnKey(l)):null!=e.endIndex&&null!=e.endIndex[I._CONST_COLUMN]&&(s=e.endIndex[I._CONST_COLUMN]),void 0===n&&void 0===s)a=!1;else if(null!=n&&null!=s&&!isNaN(n)&&!isNaN(s)&&n<=s){for(var r=n;r<=s;r++){var _=this._getColumnKeyForColumnIdx(r);i=i.add([_])}t=t.clear()}else E.error("Error: Cannot resolve column range in selection - \n start column key: "+o+"\n end column key: "+l+"\n start column index: "+n+"\n end column index: "+s);return{status:a,rowKeySet:t,columnKeySet:i}},I.prototype._invalidateRangeSelection=function(){var e=this.option("selection");if(null!=e)for(var t=0;t<e.length;t++){var i,o,l=e[t];if(null!=l.startKey&&(i=l.startKey[I._CONST_ROW]),null!=l.endKey&&(o=l.endKey[I._CONST_ROW]),i!==o||void 0===i){var n=this.option("selected.row"),s=this._getRowSelectionFromKeySet(n);this.option("selection",s,{_context:{writeback:!0,internalSet:!0}});break}}},I.prototype._setSelected=function(e,t){if(this._selectionSet=t,null!=e){var i;null==e.row&&(e.row=new y.KeySetImpl),null==e.column&&(e.column=new y.KeySetImpl);var o=this.option("selected");if(this._selectionSet?A.areKeySetsEqual(o.row,e.row)&&A.areKeySetsEqual(o.column,e.column)||(i=!0):o.row===e.row&&o.column===e.column||(i=!0),i&&(this.option("selected",e,{_context:{writeback:!0,internalSet:!0}}),this._isSelectionRequired()&&this._validatedSelectedRowKeyData))for(var l=this._validatedSelectedRowKeyData.length-1;l>=0;l--){var n=this._validatedSelectedRowKeyData[l];e.row.has(n.key)||this._validatedSelectedRowKeyData.splice(l,1)}this._isDefaultSelectorEnabled()&&this._updateSelectors(e.row),this._applySelected(e);var s=null,a=this._getRowSelectionFromKeySet(e.row);if(null!=a&&a.length>0){var r=a[0];null!=r.startKey&&(s=r.startKey[I._CONST_ROW])}if(this._setFirstSelectedRow(s),!t){var _=this._getSelectionEquivalent(e);this.option("selection",_,{_context:{writeback:!0,internalSet:!0}})}}},I.prototype._setFirstSelectedRow=function(e){var t=this.option("firstSelectedRow");if(!u.KeyUtils.equals(e,t.key)||!this._initialSelectionStateValidated){var i=null;if(null!=e){var o=this.getDataForVisibleRow(this._getRowIdxForRowKey(e));if(null!=o)i=o[I._CONST_DATA];else if(this._validatedSelectedRowKeyData)for(var l=0;l<this._validatedSelectedRowKeyData.length;l++){var n=this._validatedSelectedRowKeyData[l];if(u.KeyUtils.equals(e,n.key)){i=n.data;break}}}this.option("firstSelectedRow",{key:e,data:i},{_context:{writeback:!0,internalSet:!0}})}},I.prototype._getSelectedEquivalent=function(e){var t;if(null!=e){for(var i=(t={row:new y.KeySetImpl,column:new y.KeySetImpl}).row,o=t.column,l=e.length,n=0;n<l;n++){var s=e[n];if(null==s.startKey&&null==s[I._CONST_STARTINDEX]||null==s.endKey&&null==s[I._CONST_ENDINDEX])E.error("Error: Invalid range object in selection. Both start and end objects must be specified");else{var a=this._processRowRangeSelection(s,i,o);i=a.rowKeySet,o=a.columnKeySet,!1===a.status&&(!1===(a=this._processColumnRangeSelection(s,i,o)).status&&E.error("Error: Invalid range object"),i=a.rowKeySet,o=a.columnKeySet)}}t.row===i&&t.column===o||(t={row:i,column:o})}else t={row:new y.KeySetImpl,column:new y.KeySetImpl};return t},I.prototype._getSelectionEquivalent=function(e){var t=this._getRowSelectionFromKeySet(e.row);return t.length>0||t.inverted||(t=this._getColumnSelectionFromKeySet(e.column)).length>0||t.inverted?t:[]},I.prototype._getRowSelectionFromKeySet=function(e){var t=[];return(e.isAddAll()?e.deletedValues():e.values()).forEach(function(e){var i={startKey:{row:e},endKey:{row:e}},o=this._getDataSourceRowIndexForRowKey(e);!isNaN(o)&&o>=0&&(i.startIndex={row:o},i.endIndex={row:o}),t.push(i)},this),t.inverted=e.isAddAll(),t},I.prototype._getColumnSelectionFromKeySet=function(e){var t=[];return(e.isAddAll()?e.deletedValues():e.values()).forEach(function(e){var i={startKey:{column:e},endKey:{column:e}},o=this._getColumnIdxForColumnKey(e);o>=0&&(i.startIndex={column:o},i.endIndex={column:o}),t.push(i)},this),t.inverted=e.isAddAll(),t},I.prototype._applySelected=function(e){var t=e.row,i=e.column;if(this._getSelectedRowIdxs().forEach(function(e){var i=this._getTableBodyRow(e);const o=i[I._DATA_OJ_SELECTABLE]!==I._CONST_OFF;!t.has(this._getRowKey(i))&&o&&(this._applyRowSelection(e,i,!1),this._setLastRowSelection(e,!1))},this),this._isRowSelectionEnabled())if(t.isAddAll()){let e;this._getTableBodyRows().forEach(function(i,o){const l=i[I._DATA_OJ_SELECTABLE]!==I._CONST_OFF,n=this._getRowKey(i);t.has(n)&&l&&(this._applyRowSelection(o,i,!0),e=o)},this),e&&this._setLastRowSelection(e,!0)}else t.values().forEach(function(e){var t=this._getRowIdxForRowKey(e);if(null!=t&&t>=0){const e=this._getTableBodyRow(t);e[I._DATA_OJ_SELECTABLE]!==I._CONST_OFF&&(this._applyRowSelection(t,e,!0),this._setLastRowSelection(t,!0))}},this);if(0===this._getSelectedRowIdxs().length&&this._removeTableBodyRowTouchSelectionAffordance(),this._getSelectedHeaderColumnIdxs().forEach(function(e){i.has(this._getColumnKeyForColumnIdx(e))||this._applyColumnSelection(e,!1)},this),this._isColumnSelectionEnabled())if(i.isAddAll()){var o=this._getTableHeaderColumns();o.forEach(function(e,t){i.has(this._getColumnKeyForColumnIdx(t))&&this._applyColumnSelection(t,!0)},this);var l=o.length-1,n=this._getColumnKeyForColumnIdx(l);this._setLastHeaderColumnSelection(l,i.has(n))}else i.values().forEach(function(e){var t=this._getColumnIdxForColumnKey(e);null!=t&&t>=0&&this._applyColumnSelection(t,!0)},this)},I.prototype._applyRowSelection=function(e,t,i){if(t.classList.contains(I.MARKER_STYLE_CLASSES._SELECTED)!==i){i?t.classList.add(I.MARKER_STYLE_CLASSES._SELECTED):t.classList.remove(I.MARKER_STYLE_CLASSES._SELECTED);var o=this.options.dnd.drag;o&&("rows"===o||o.rows)&&this._getTableDndContext().setElementDraggable(t,i)}i?this._updateRowStateCellsClass(e,null,{selected:!0}):this._updateRowStateCellsClass(e,null,{selected:!1})},I.prototype._applyColumnSelection=function(e,t){var i=this.options.dnd.reorder;if(i&&i.columns===I._OPTION_ENABLED){var o=this._getTableHeaderColumn(e);this._getTableDndContext().setElementDraggable(o,t)}this._setColumnState(e,t)},I.prototype._setLastRowSelection=function(e,t){this._lastSelectedRowIdxArray||(this._lastSelectedRowIdxArray=[]);for(var i=this._lastSelectedRowIdxArray.length,o=0;o<i;o++)if(this._lastSelectedRowIdxArray[o]===e){this._lastSelectedRowIdxArray.splice(o,1);break}t&&this._lastSelectedRowIdxArray.push(e)},I.prototype._setLastHeaderColumnSelection=function(e,t){this._lastSelectedColumnIdxArray||(this._lastSelectedColumnIdxArray=[]);for(var i=this._lastSelectedColumnIdxArray.length,o=0;o<i;o++)if(this._lastSelectedColumnIdxArray[o]===e){this._lastSelectedColumnIdxArray.splice(o,1);break}t&&this._lastSelectedColumnIdxArray.push(e)},I.prototype._handleSelectionGesture=function(e,t,i){var o,l=this.option("selected"),n=l.row,s=l.column;if(t){s=s.clear();const t=this._getTableBodyRow(e);if(this._isRowSelectionEnabled()&&t&&t[I._DATA_OJ_SELECTABLE]!==I._CONST_OFF){var a=this._getRowKeyForRowIdx(e),r=this._getRowSelectionMode();n.has(a)?this._isStickyLayoutEnabled()?(n=i?n.delete([a]):new y.KeySetImpl([a]),o=!i):!i&&this._getSelectedRowIdxs().length>1&&r===I._OPTION_SELECTION_MODES._MULTIPLE?(n=new y.KeySetImpl([a]),o=!0):(n=n.delete([a]),o=!1):(n=i&&r===I._OPTION_SELECTION_MODES._MULTIPLE?n.add([a]):new y.KeySetImpl([a]),o=!0)}}else if(this._isColumnSelectionEnabled()){n=n.clear();var _=this._getColumnSelectionMode();if(e>-1){var h=this._getColumnKeyForColumnIdx(e);s.has(h)?this._isStickyLayoutEnabled()?(s=i?s.delete([h]):new y.KeySetImpl([h]),o=!i):!i&&this._getSelectedHeaderColumnIdxs().length>1&&_===I._OPTION_SELECTION_MODES._MULTIPLE?(s=new y.KeySetImpl([h]),o=!0):(s=s.delete([h]),o=!1):(s=i&&_===I._OPTION_SELECTION_MODES._MULTIPLE?s.add([h]):new y.KeySetImpl([h]),o=!0)}}l.row===n&&l.column===s||(l={row:n,column:s},this._isSelectionRequiredSatisfied(l)&&(this._announceAccSelectionUpdate(o),this._setSelected(l)))},I.prototype._handleSelectAllGesture=function(){var e=this.option("selected"),t=e.row,i=e.column;i=i.clear(),t=t.isAddAll()?new y.KeySetImpl:new y.AllKeySetImpl,e.row===t&&e.column===i||(e={row:t,column:i},this._isSelectionRequiredSatisfied(e)&&this._setSelected(e))},I.prototype._handleMouseEnterSelection=function(e,t){if(this._isRowSelectionEnabled()){var i=this._getElementRowIdx(e);null!=this._mouseDownRowIdx&&null!=i&&this._mouseDownRowIdx!==i?(this._getRowSelectionMode()===I._OPTION_SELECTION_MODES._MULTIPLE&&this._selectRange(this._mouseDownRowIdx,i,!0),i<this._mouseDownRowIdx?this._moveTableBodyRowTouchSelectionAffordanceTop(i):this._moveTableBodyRowTouchSelectionAffordanceBottom(i)):null!=i&&i===this._mouseDownRowIdx&&(t?(this._selectRange(i,i,!0),this._moveTableBodyRowTouchSelectionAffordanceTop(i),this._moveTableBodyRowTouchSelectionAffordanceBottom(i)):this._clearSelectedRows())}},I.prototype._selectRange=function(e,t,i){var o,l=this.option("selected"),n=l.row,s=l.column;if(i){if(s=s.clear(),this._isRowSelectionEnabled()){if(n=n.clear(),e<=t)for(o=e;o<=t;o++){const e=this._getRowKeyForRowIdx(o),t=this._findRowElementByKey(e);t&&t[I._DATA_OJ_SELECTABLE]!==I._CONST_OFF&&(n=n.add([e]))}else for(o=e;o>=t;o--){const e=this._getRowKeyForRowIdx(o),t=this._findRowElementByKey(e);t&&t[I._DATA_OJ_SELECTABLE]!==I._CONST_OFF&&(n=n.add([e]))}this._lastSelectedRowIdx=t}}else if(n=n.clear(),this._isColumnSelectionEnabled()){if(s=s.clear(),e<=t)for(o=e;o<=t;o++)s=s.add([this._getColumnKeyForColumnIdx(o)]);else for(o=e;o>=t;o--)s=s.add([this._getColumnKeyForColumnIdx(o)]);this._lastSelectedHeaderIdx=t}l.row===n&&l.column===s||(l={row:n,column:s},this._isSelectionRequiredSatisfied(l)&&this._setSelected(l))},I.prototype._getRowSelection=function(e){return this._getTableBodyRow(e).classList.contains(I.MARKER_STYLE_CLASSES._SELECTED)},I.prototype._getHeaderColumnSelection=function(e){return this._getTableHeaderColumn(e).classList.contains(I.MARKER_STYLE_CLASSES._SELECTED)},I.prototype._getFooterColumnSelection=function(e){return this._getTableFooterCell(e).classList.contains(I.MARKER_STYLE_CLASSES._SELECTED)},I.prototype._getSelectedRowIdxs=function(){return this._getRowIdxsForElementsWithStyleClass("."+I.CSS_CLASSES._TABLE_DATA_ROW_CLASS+"."+I.MARKER_STYLE_CLASSES._SELECTED)},I.prototype._getSelectedHeaderColumnIdxs=function(){return this._getColumnIdxsForElementsWithStyleClass("."+I.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS+"."+I.MARKER_STYLE_CLASSES._SELECTED)},I.prototype._getSelectedFooterColumnIdxs=function(){return this._getColumnIdxsForElementsWithStyleClass("."+I.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS+"."+I.MARKER_STYLE_CLASSES._SELECTED)},I.prototype._clearSelectedRows=function(){this._selectionAnchorIdx=null,this._lastSelectedRowIdx=null;var e=this.option("selected.row"),t=e.clear();if(t!==e){var i={row:t,column:this.option("selected.column")};this._setSelected(i)}},I.prototype._clearSelectionState=function(){if(this._selectionAnchorIdx=null,this._lastSelectedRowIdx=null,this._lastSelectedHeaderIdx=null,this._hasSelected()){var e={row:new y.KeySetImpl,column:new y.KeySetImpl};this._setSelected(e)}},I.prototype._selectedKeysChangedListener=function(e){if("internal"===e.detail.updatedFrom)if(e.detail.value.isAddAll())this._setSelected({row:e.detail.value,column:new y.KeySetImpl},!1,!0);else{let t=this.option("selected").row;if(null==e.target.rowKey)return void this._setSelected({row:new y.KeySetImpl,column:new y.KeySetImpl},!1,!0);t=t.has(e.target.rowKey)?t.delete([e.target.rowKey]):t.add([e.target.rowKey]);let i=this._getTable().getElementsByClassName(I.CSS_CLASSES._TABLE_HEADER_SELECTOR_CLASS)[0];if(i){let e=t.values?t.values().size:t.deletedValues().size;i.indeterminate=0!==e}this._setSelected({row:t,column:new y.KeySetImpl},!1,!0)}},I.prototype._updateSelectors=function(e){let t=this._getTable(),i=t.getElementsByClassName(I.CSS_CLASSES._TABLE_HEADER_SELECTOR_CLASS);if(i.length>0){i[0].selectedKeys=e;let t=e.values?e.values().size:e.deletedValues().size;i[0].indeterminate=0!==t}let o=[],l=t.querySelectorAll(`\n    .${I.CSS_CLASSES._TABLE_DATA_ROW_SELECTOR_CLASS} >\n    .${I.MARKER_STYLE_CLASSES._SELECTED}`);for(let e=0;e<l.length;e++)o.push(l[e].parentElement);let n=Array.from(t.getElementsByClassName(I.CSS_CLASSES._TABLE_DATA_ROW_SELECTOR_CLASS));for(let t=0;t<n.length;t++){let i=n[t],l=-1!==o.indexOf(i);e.has(i.rowKey)?l||(i.selectedKeys=new y.KeySetImpl([i.rowKey])):l&&(i.selectedKeys=new y.KeySetImpl([]))}},I.prototype.version="1.0.0",I.prototype.defaultElement="<table>",I.prototype.widgetEventPrefix="oj",I.prototype.options={accessibility:null,addRowDisplay:"top",animateStart:null,animateEnd:null,as:"",currentRow:null,data:null,display:"list",dnd:{drag:null,drop:null,reorder:{columns:"disabled"}},editMode:"none",editRow:{rowKey:null,rowIndex:-1},emptyText:null,horizontalGridVisible:"auto",layout:"contents",row:{editable:null,selectable:null,sticky:null},rowRenderer:null,scrollToKey:"auto",scrollPolicy:"auto",scrollPolicyOptions:{fetchSize:25,maxCount:500,scroller:null,scrollerOffsetBottom:null,scrollerOffsetStart:null,scrollerOffsetEnd:null,scrollerOffsetTop:null},scrollPosition:{x:0,y:0},selectAllControl:"visible",firstSelectedRow:{key:null,data:null},selection:[],selected:{row:new y.KeySetImpl,column:new y.KeySetImpl},selectionMode:null,selectionRequired:!1,verticalGridVisible:"auto",columns:[{className:null,field:null,footerClassName:null,footerRenderer:null,footerStyle:null,footerTemplate:null,frozenEdge:null,headerClassName:null,headerRenderer:null,headerStyle:null,headerTemplate:null,headerText:null,renderer:null,resizable:"disabled",id:null,sortProperty:null,sortable:"auto",style:null,template:null,minWidth:null,maxWidth:null,weight:null,width:null}],columnsDefault:{className:null,field:null,footerClassName:null,footerRenderer:null,footerStyle:null,footerTemplate:null,headerClassName:null,headerRenderer:null,headerStyle:null,headerTemplate:null,headerText:null,renderer:null,resizable:"disabled",sortProperty:null,sortable:"auto",style:null,template:null,minWidth:"auto",maxWidth:null,weight:1,width:null},beforeCurrentRow:null,beforeRowEdit:null,beforeRowEditEnd:null,beforeRowAddEnd:null,ready:null,rowAction:null,sort:null},I.prototype.getContextByNode=function(e){var t=this.getSubIdByNode(e,!0);if(t&&t.subId===I._SUB_ID._TABLE_CELL){var i=t.rowIndex,o=this._getRowKeyForRowIdx(i);t.key=o}return t},I.prototype.getDataForVisibleRow=function(e){var t=this._getTableBodyRow(e);return null!=t?{key:t[I._ROW_ITEM_EXPANDO].key,data:t[I._ROW_ITEM_EXPANDO].data,index:e}:null},I.prototype.getNodeBySubId=function(e){if(null==e)return this.element?this.element[0]:null;var t,i=e.subId;if(i===I._SUB_ID._TABLE_CELL){var o=parseInt(e.rowIndex,10);return t=parseInt(e.columnIndex,10),this._getTableBodyLogicalCells(o)[t]}if(i===I._SUB_ID._TABLE_HEADER||i===I._SUB_ID._TABLE_SORT_ASCENDING||i===I._SUB_ID._TABLE_SORT_DESCENDING){t=e.index;var l=this._getTableHeaderLogicalColumns()[t];if(null!=l){if(i===I._SUB_ID._TABLE_HEADER)return l;if(i===I._SUB_ID._TABLE_SORT_ASCENDING){var n=this._getTableElementsByClassName(l,I.CSS_CLASSES._COLUMN_HEADER_ASC_ICON_CLASS);if(n.length>0)return n[0]}else{var s=this._getTableElementsByClassName(l,I.CSS_CLASSES._COLUMN_HEADER_DSC_ICON_CLASS);if(s.length>0)return s[0]}}}else if(i===I._SUB_ID._TABLE_FOOTER){t=e.index;var a=this._getTableFooterLogicalCells()[t];if(null!=a)return a}return null},I.prototype.getSubIdByNode=function(e,t){var i=this._getFirstAncestor(e,"."+I.CSS_CLASSES._TABLE_DATA_CELL_CLASS,!0);if(null!=i)return{subId:I._SUB_ID._TABLE_CELL,rowIndex:this._getElementRowIdx(i),columnIndex:this._getElementColumnIdx(i)};var o=this._getFirstAncestor(e,"."+I.CSS_CLASSES._COLUMN_HEADER_ASC_ICON_CLASS,!0);if(null!=o)return{subId:t?I._SUB_ID._TABLE_HEADER:I._SUB_ID._TABLE_SORT_ASCENDING,index:this._getElementColumnIdx(o)};var l=this._getFirstAncestor(e,"."+I.CSS_CLASSES._COLUMN_HEADER_DSC_ICON_CLASS,!0);if(null!=l)return{subId:t?I._SUB_ID._TABLE_HEADER:I._SUB_ID._TABLE_SORT_DESCENDING,index:this._getElementColumnIdx(l)};var n=this._getFirstAncestor(e,"."+I.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS,!0);if(null!=n)return{subId:I._SUB_ID._TABLE_HEADER,index:this._getElementColumnIdx(n)};var s=this._getFirstAncestor(e,"."+I.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS,!0);return null!=s?{subId:I._SUB_ID._TABLE_FOOTER,index:this._getElementColumnIdx(s)}:null},I.prototype.refresh=function(){this._super(),this._refresh()},I.prototype.refreshRow=function(e){if(!this._getData())return Promise.resolve(!1);var t=this._getTableBodyRows();if(isNaN(e)||e<0||e>=t.length||0===t.length){var i=I._LOGGER_MSG._ERR_REFRESHROW_INVALID_INDEX_SUMMARY,o=p.applyParameters(I._LOGGER_MSG._ERR_REFRESHROW_INVALID_INDEX_DETAIL,{rowIdx:e.toString()});throw new RangeError(i+"\n"+o)}return this._queueTask(function(){return this._refreshRow(e,!0)}.bind(this))},I.prototype.widget=function(){var e=this._getTableContainer();return null!=e?c(e):this.element},I.prototype._ComponentCreate=function(){this._super(),this._initTemplateEngine(),this._draw(),this._registerCustomEvents(),this._on(this._events),this._isTouchDevice()&&this._registerTouchEvents(),this._registerDomEventListeners(),this._setEditableRowIdx(null),A.disableDefaultBrowserStyling(this.element[0])},I.prototype._AfterCreate=function(){this._super(),this._createContextMenuContainer(),this._isInitFetch=!0},I.prototype._SetupResources=function(){this._super(),this._registerResizeListener(),this._registerDataSourceEventListeners(),this._isInitFetch?(this._initFetch(),this._isInitFetch=!1):this._queueTask(function(){return this._getLayoutManager().notifyTableUpdate(I._UPDATE._REFRESH),this._invokeDataFetchRows()}.bind(this))},I.prototype._ReleaseResources=function(){this._super(),this._cleanComponent()},I.prototype._destroy=function(){this._cleanComponent(!0)},I.prototype._NotifyAttached=function(){this._super(),this._scrollTop=void 0,this._scrollLeft=void 0,this._IsCustomElement()?this._initializeNotifyAttachedTimeout():(this._getLayoutManager().notifyTableUpdate(I._UPDATE._ATTACHED),this._hasPendingTasks()||this._syncTableSizing())},I.prototype._NotifyDetached=function(){this._super(),this._clearNotifyAttachedTimeout()},I.prototype._initializeNotifyAttachedTimeout=function(){this._clearNotifyAttachedTimeout(),this._notifyAttachedTimeout=setTimeout(function(){this._hasPendingTasks()||this._syncScrollPosition(),this._notifyAttachedTimeout=null}.bind(this),0)},I.prototype._clearNotifyAttachedTimeout=function(){null!=this._notifyAttachedTimeout&&(clearTimeout(this._notifyAttachedTimeout),this._notifyAttachedTimeout=null)},I.prototype._NotifyShown=function(){this._super(),this._getLayoutManager().notifyTableUpdate(I._UPDATE._SHOWN),this._hasPendingTasks()||this._syncTableSizing()},I.prototype._VerifyConnectedForSetup=function(){return!0},I.prototype._GetDefaultContextMenu=function(){return this._defaultContextMenu},I.prototype._NotifyContextMenuGesture=function(e,t,i){var o={};if(this._contextMenuEvent=t.originalEvent,!(this._isNodeEditable(this._contextMenuEvent.target)||this._isNodeClickable(this._contextMenuEvent.target)||"touch"===i&&this._isNodeDraggable(this._contextMenuEvent.target))){var l,n=this._getFirstAncestor(this._contextMenuEvent.target,"."+I.CSS_CLASSES._TABLE_DATA_CELL_CLASS,!0);if(null!=n){var s=this._getElementColumnIdx(n);l=this._getTableHeaderColumn(s)}else l=this._getFirstAncestor(this._contextMenuEvent.target,"."+I.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS,!0);if("keydown"===this._contextMenuEvent.type){var a=this._getTable();if(null==l&&(l=this._getActiveHeaderColumn()),this._contextMenuEvent.target===a)if(null!=l)o.position={my:I._POSITION._START_TOP,at:I._POSITION._START_BOTTOM,of:l};else{var r=this._getActiveRowIndex();if(r>=0){var _=this._getTableBodyRow(r);o.position={my:I._POSITION._START_TOP,at:I._POSITION._START_BOTTOM,of:_}}else o.position={my:I._POSITION._START_TOP,at:I._POSITION._START_BOTTOM,of:this._contextMenuEvent.target}}else o.position={my:I._POSITION._START_TOP,at:I._POSITION._START_BOTTOM,of:this._contextMenuEvent.target}}else{var h=this._getFirstAncestor(this._contextMenuEvent.target,"."+I.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS,!0);if(null==l&&null==n&&null==h)return}this._contextMenuEventHeaderColumn=l;var d=e.element?e.element[0]:e;this._populateContextMenuItems(d,this._handleContextMenuSelect.bind(this));var u=d.querySelectorAll("[data-oj-command=oj-table-sortAsc]");u.length>0&&(u=u[0],l&&l.getAttribute("data-oj-sortable")===I._OPTION_ENABLED?"OJ-OPTION"===u.nodeName?u.removeAttribute("disabled"):u.classList.remove(I.MARKER_STYLE_CLASSES._DISABLED):"OJ-OPTION"===u.nodeName?u.setAttribute("disabled","true"):u.classList.add(I.MARKER_STYLE_CLASSES._DISABLED));var c=d.querySelectorAll("[data-oj-command=oj-table-sortDsc]");c.length>0&&(c=c[0],l&&l.getAttribute("data-oj-sortable")===I._OPTION_ENABLED?"OJ-OPTION"===c.nodeName?c.removeAttribute("disabled"):c.classList.remove(I.MARKER_STYLE_CLASSES._DISABLED):"OJ-OPTION"===c.nodeName?c.setAttribute("disabled","true"):c.classList.add(I.MARKER_STYLE_CLASSES._DISABLED));var S=d.querySelectorAll("[data-oj-command=oj-table-resize]");S.length>0&&(S=S[0],l&&l.getAttribute("data-oj-resizable")===I._OPTION_ENABLED?"OJ-OPTION"===S.nodeName?S.removeAttribute("disabled"):S.classList.remove(I.MARKER_STYLE_CLASSES._DISABLED):"OJ-OPTION"===S.nodeName?S.setAttribute("disabled","true"):S.classList.add(I.MARKER_STYLE_CLASSES._DISABLED)),this._OpenContextMenu(t,i,o)}},I.prototype._setOptions=function(e,t){for(var i=!1,o=!1,l=!1,n=Object.keys(e),s=0;s<n.length;s++){var a=n[s],r=e[a];this._isTableRefreshNeeded(a,r,t)&&("columns"===a?(this._columnsDestMap=null,l=!0):"selectionMode"===a&&void 0!==r.row?l=!0:"data"===a&&(o=!0),i=!0)}this._superApply(arguments),i&&(l&&(this._clearCachedMetadata(),this._refreshTableHeader()),o&&this._beforeDataRefresh(),this._refresh())},I.prototype._setOption=function(e,t,i){"selection"===e?(this._selectionSet=!0,this._syncRangeSelection(t),this._superApply(arguments),this._validateInitialSelectionState(!0)):"selected"===e?(this._selectionSet=!1,this._superApply(arguments),this._validateInitialSelectionState(!0)):"currentRow"===e?(this._queueTask(function(){this._setCurrentRow(t,null,!0)}.bind(this)).catch(function(){}),this._superApply(arguments)):"scrollPosition"===e?(this._queueTask(function(){this._syncScrollPosition(t)}.bind(this)),this._superApply(arguments)):"editRow"===e?this._setEditRow(t):"scrollPolicyOptions"===e&&null!=i?(this._superApply(arguments),this._isStickyLayoutEnabled()&&("scrollerOffsetTop"===i.subkey?(this._styleTableContainer(this._getTableContainer()),this._getLayoutManager()._updateStickyRowTops()):"scrollerOffsetBottom"===i.subkey?this._styleTableContainer(this._getTableContainer()):"scrollerOffsetStart"!==i.subkey&&"scrollerOffsetEnd"!==i.subkey||this._getLayoutManager()._initializeFrozenColumns())):"addRowDisplay"===e?(this._queueTask(function(){return this._refreshAddRowDisplay()}.bind(this)),this._superApply(arguments)):this._superApply(arguments)},I.prototype._CompareOptionValues=function(e,t,i){switch(e){case"columns":case"currentRow":case"scrollPolicyOptions":return u.Object.compareValues(t,i);case"selection":return t&&void 0===t.inverted&&(t.inverted=!1),i&&void 0===i.inverted&&(i.inverted=!1),(!t||!i||t.inverted===i.inverted)&&u.Object.compareValues(t,i);case"selected":return(t.row&&i.row&&A.areKeySetsEqual(t.row,i.row)||null==t.row&&null==i.row)&&(t.column&&i.column&&A.areKeySetsEqual(t.column,i.column)||null==t.column&&null==i.column);default:return this._super(e,t,i)}},I.prototype._getTableDndContext=function(){return this._tableDndContext||(this._tableDndContext=new w(this)),this._tableDndContext},I.prototype._getLayoutManager=function(){return null==this._layoutManager&&(this._isStickyLayoutEnabled()?this._isFixedLayoutEnabled()?this._layoutManager=new x(this):this._layoutManager=new P(this):(this._layoutManager=new B(this),this._isFixedLayoutEnabled()&&E.error('The current theme does not support the layout="fixed" attribute setting of the <oj-table>.'))),this._layoutManager},I.prototype._clearLayoutManager=function(){null!=this._layoutManager&&this._layoutManager.unregisterListeners(),this._layoutManager=null},I.prototype._doSortHelper=function(e,t){const i=this._getColumnDefs(),o=this._getColumnIdxForColumnKey(e),l=this._getTableHeaderColumn(o);return o<i.length?this._getColumnDefs()[o].sortable===I._OPTION_ENABLED?null!=l&&c(l).data("sorted")===t?`Column is already sorted in ${t} order.`:(this._handleSortTableHeaderColumn(o,t===I._COLUMN_SORT_ORDER._ASCENDING,null),null):"Sort is not enabled for given header.":"Invalid header."},u.__registerWidget("oj.ojTable",c.oj.baseComponent,new I),f.setDefaultOptions({ojTable:{display:f.createDynamicPropertyGetter(function(){return g.getCachedCSSVarValues(["--oj-private-table-global-display-default"])[0]})}})});
//# sourceMappingURL=ojtable.js.map