/**
 * @license
 * Copyright (c) 2014, 2018, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";define(["ojs/ojcore","jquery","ojs/ojcomponentcore","promise","ojdnd","ojs/ojdomscroller","ojs/ojeditablevalue","ojs/ojinputnumber","ojs/ojmenu","ojs/ojpopup","ojs/ojbutton","ojs/ojdatasource-common","ojs/ojdataprovideradapter","ojs/ojlistdataproviderview"],function(e,t,l){e.__registerWidget("oj.ojTable",t.oj.baseComponent,{version:"1.0.0",defaultElement:"<table>",widgetEventPrefix:"oj",options:{accessibility:null,animateStart:null,animateEnd:null,as:"",currentRow:null,data:null,display:"list",dnd:{drag:null,drop:null,reorder:{columns:"disabled"}},editMode:"none",emptyText:null,horizontalGridVisible:"auto",rowRenderer:null,scrollPolicy:"auto",scrollPolicyOptions:{fetchSize:25,maxCount:500},firstSelectedRow:{key:null,data:null},selection:[],selectionMode:null,selectionRequired:!1,verticalGridVisible:"auto",columns:[{renderer:null,className:null,field:null,footerClassName:null,footerRenderer:null,footerStyle:null,footerTemplate:null,headerClassName:null,headerRenderer:null,headerStyle:null,headerTemplate:null,headerText:null,id:null,resizable:"disabled",sortable:"auto",sortProperty:null,style:null,template:null,width:null}],columnsDefault:{renderer:null,className:null,field:null,footerClassName:null,footerRenderer:null,footerStyle:null,footerTemplate:null,headerClassName:null,headerRenderer:null,headerStyle:null,headerTemplate:null,headerText:null,resizable:"disabled",sortable:"auto",sortProperty:null,style:null,template:null,width:null},beforeCurrentRow:null,beforeRowEdit:null,beforeRowEditEnd:null,ready:null,sort:null},_BUNDLE_KEY:{_MSG_FETCHING_DATA:"msgFetchingData",_MSG_NO_DATA:"msgNoData",_MSG_INITIALIZING:"msgInitializing",_MSG_STATUS_SORT_ASC:"msgStatusSortAscending",_MSG_STATUS_SORT_DSC:"msgStatusSortDescending",_LABEL_SELECT_COLUMN:"labelSelectColumn",_LABEL_SELECT_ROW:"labelSelectRow",_LABEL_EDIT_ROW:"labelEditRow",_LABEL_SELECT_AND_EDIT_ROW:"labelSelectAndEditRow"},_LOGGER_MSG:{_ERR_PRECURRENTROW_ERROR_SUMMARY:"Did not change current row due to error.",_ERR_PRECURRENTROW_ERROR_DETAIL:"Error detail: {error}.",_ERR_CURRENTROW_UNAVAILABLE_INDEX_SUMMARY:"Did not change current row due to unavailable row index.",_ERR_CURRENTROW_UNAVAILABLE_INDEX_DETAIL:"Unavailable row index: {rowIdx}.",_ERR_REFRESHROW_INVALID_INDEX_SUMMARY:"Invalid row index value.",_ERR_REFRESHROW_INVALID_INDEX_DETAIL:"Row index: {rowIdx}.",_ERR_DATA_INVALID_TYPE_SUMMARY:"Invalid data type.",_ERR_DATA_INVALID_TYPE_DETAIL:"Please specify the appropriate data type.",_ERR_ELEMENT_INVALID_TYPE_SUMMARY:"Invalid element type.",_ERR_ELEMENT_INVALID_TYPE_DETAIL:"Only a <table> element can be specified for ojTable."},_FIELD_ID:"id",_CONST_ATTRIBUTE:"attribute",_CONST_DATA:"data",_CONST_METADATA:"metadata",_CONST_INDEXES:"indexes",_CONST_INDEX:"index",_CONST_KEY:"key",_CONST_KEYS:"keys",_CONST_AFTERKEYS:"afterKeys",_CONST_STARTINDEX:"startIndex",_CONST_ENDINDEX:"endIndex",_CONST_PAGESIZE:"size",_CONST_OFFSET:"offset",_CONST_COLUMN:"column",_CONST_ROW:"row",_CONST_VALUE:"value",_CONST_SORTCRITERIA:"sortCriteria",_COLUMN_HEADER_ID:"_headerColumn",_COLUMN_HEADER_TEXT_ID:"_headerColumnText",_COLUMN_HEADER_ASC_ID:"_headerColumnAsc",_COLUMN_HEADER_DSC_ID:"_headerColumnDsc",_COLUMN_HEADER_ID_PREFIX:"_hdrCol",_FOCUS_CALLED:"_focusedCalled",_ROW_TEMPLATE:"rowTemplate",_CELL_TEMPLATE:"template",_HEADER_TEMPLATE:"headerTemplate",_FOOTER_TEMPLATE:"footerTemplate",_OPTION_AUTO:"auto",_OPTION_ENABLED:"enabled",_OPTION_DISABLED:"disabled",_OPTION_EDIT_MODE:{_NONE:"none",_ROW_EDIT:"rowEdit"},_OPTION_SELECTION_MODES:{_SINGLE:"single",_MULTIPLE:"multiple"},_OPTION_SCROLL_POLICY:{_AUTO:"auto",_LOADMORE_ON_SCROLL:"loadMoreOnScroll"},_COLUMN_SORT_ORDER:{_ASCENDING:"ascending",_DESCENDING:"descending"},_DND_REORDER_TABLE_ID_DATA_KEY:"oj-table-dnd-reorder-table-id",_KEYBOARD_CODES:{_KEYBOARD_CODE_SPACEBAR:32,_KEYBOARD_CODE_ENTER:13,_KEYBOARD_CODE_UP:38,_KEYBOARD_CODE_DOWN:40,_KEYBOARD_CODE_LEFT:37,_KEYBOARD_CODE_RIGHT:39,_KEYBOARD_CODE_HOME:36,_KEYBOARD_CODE_END:35,_KEYBOARD_CODE_TAB:9,_KEYBOARD_CODE_ESC:27,_KEYBOARD_CODE_F2:113,_KEYBOARD_MODIFIER_SHIFT:"shiftKey"},getContextByNode:function(e){var t=this.getSubIdByNode(e,!0);if(t&&"oj-table-cell"==t.subId){var l=t.rowIndex,o=this._getRowKeyForRowIdx(l);t.key=o}return t},getDataForVisibleRow:function(e){var l=this._getTableDomUtils().getTableBodyRow(e);return null!=l?{key:t(l).data("rowKey"),data:t(l).data("rowData"),index:e}:null},getNodeBySubId:function(t){if(null==t)return this.element?this.element[0]:null;var l=t.subId;if("oj-table-cell"===l){var o=parseInt(t.rowIndex,10),i=parseInt(t.columnIndex,10);return this._getTableDomUtils().getTableBodyLogicalCells(o)[i]}if("oj-table-header"===l||"oj-table-sort-ascending"===l||"oj-table-sort-descending"===l){i=t.index;var s=this._getTableDomUtils().getTableHeaderLogicalColumns()[i];if(null!=s){if("oj-table-header"===l)return s;if("oj-table-sort-ascending"===l){var a=s.querySelectorAll("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_LINK_CLASS);if(a.length>0)return a[0]}else{var n=s.querySelectorAll("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_LINK_CLASS);if(n.length>0)return n[0]}}}else if("oj-table-footer"===l){i=t.index;var r=this._getTableDomUtils().getTableFooterLogicalCells()[i];if(null!=r)return r}return null},getSubIdByNode:function(l,o){var i=t(l).closest("."+e.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_CLASS);if(i.length>0)return{subId:"oj-table-cell",rowIndex:this._getTableDomUtils().getElementRowIdx(i[0]),columnIndex:this._getTableDomUtils().getElementColumnIdx(i[0])};var s=t(l).closest("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_LINK_CLASS);if(s.length>0)return{subId:o?"oj-table-header":"oj-table-sort-ascending",index:this._getTableDomUtils().getElementColumnIdx(s[0])};var a=t(l).closest("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_LINK_CLASS);if(a.length>0)return{subId:o?"oj-table-header":"oj-table-sort-descending",index:this._getTableDomUtils().getElementColumnIdx(a[0])};var n=t(l).closest("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS);if(n.length>0)return{subId:"oj-table-header",index:this._getTableDomUtils().getElementColumnIdx(n[0])};var r=t(l).closest("."+e.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS);return r.length>0?{subId:"oj-table-footer",index:this._getTableDomUtils().getElementColumnIdx(r[0])}:null},refresh:function(){this._super(),this._refresh()},refreshRow:function(e){return this._refreshRow(e,!0)},_refreshRow:function(l,o){var i=this._getData();if(!i)return Promise.resolve(!1);var s=this._getTableDomUtils().getTableBodyRows();if(isNaN(l)||l<0||null!=s&&l>=s.length||null==s||0==s.length){var a=this._LOGGER_MSG._ERR_REFRESHROW_INVALID_INDEX_SUMMARY,n=e.Translations.applyParameters(this._LOGGER_MSG._ERR_REFRESHROW_INVALID_INDEX_DETAIL,{rowIdx:l.toString()});throw new RangeError(a+"\n"+n)}var r=this._getRowKeyForRowIdx(l),_=this;return _._queueTask(function(){return i.fetchByKeys({keys:[r]}).then(function(e){if(null==e||null==e.results||0==e.results.size)return Promise.resolve(!1);var i=_._getTableDomUtils().getTableBodyRow(l);o=o&&t.contains(i,document.activeElement),_._refreshTableBodyRow(l,{data:e.results.get(r).data,index:l,key:r}),o&&_._getTableDomUtils().getTable().focus(),i=_._getTableDomUtils().getTableBodyRow(l);var s=_._getAllBusyContextsForElement(i);if(null!=s){var a,n=[];for(a=0;a<s.length;a++)n.push(s[a].whenReady());return Promise.all(n)}return Promise.resolve()})})},widget:function(){var e=this._getTableDomUtils().getTableContainer();return null!=e?t(e):this.element},_ComponentCreate:function(){if(this._super(),this._initTemplateEngine(),this._draw(),this._registerCustomEvents(),this._on(this._events),this._isTouchDevice()){var e=this._getTableDomUtils().getTableContainer();this._on(t(e),this._eventsContainer)}this._registerDomEventListeners(),this._cachedOptions=t.extend(!0,{},this.options),this._setEditableRowIdx(null)},_AfterCreate:function(){this._super(),this._getTableDomUtils().createContextMenu(this._handleContextMenuSelect.bind(this)),this._isInitFetch=!0},_SetupResources:function(){this._super(),this._registerResizeListener(),this._registerDataSourceEventListeners(),this._isInitFetch?(this._initFetch(),this._isInitFetch=!1):this._invokeDataFetchRows(null,!1)},_ReleaseResources:function(){this._super(),this._unregisterDataSourceEventListeners(),this._unregisterResizeListener()},_NotifyAttached:function(){this._super(),this._getTableDomUtils().refreshTableDimensions()},_NotifyShown:function(){this._super(),this._getTableDomUtils().refreshTableDimensions()},_VerifyConnectedForSetup:function(){return!0},_GetDefaultContextMenu:function(){return this._defaultContextMenu},_NotifyContextMenuGesture:function(e,t,l){var o={};if(this._contextMenuEvent=t.originalEvent,!(this._isNodeEditable(this._contextMenuEvent.target)||this._isNodeClickable(this._contextMenuEvent.target)||"touch"==l&&this._isNodeDraggable(this._contextMenuEvent.target))){var i=this._getTableDomUtils().getFirstAncestor(this._contextMenuEvent.target,"oj-table-column-header-cell");i=null==i?this._getTableDomUtils().getTableHeaderColumn(this._activeColumnIndex):i,this._contextMenuEventHeaderColumn=i;var s=this._getTableDomUtils().getFirstAncestor(this._contextMenuEvent.target,"oj-table-data-cell");if(null!=s){var a=this._getTableDomUtils().getElementColumnIdx(s);i=this._getTableDomUtils().getTableHeaderColumn(a)}if("keydown"===this._contextMenuEvent.type){var n=this._tableDomUtils.getTable();if(this._contextMenuEvent.target==n)if(null!=i)o.position={my:"start top",at:"start bottom",of:i};else{var r=this._getFocusedRowIdx();if(r>=0){var _=this._getTableDomUtils().getTableBodyRow(r);o.position={my:"start top",at:"start bottom",of:_}}else o.position={my:"start top",at:"start bottom",of:this._contextMenuEvent.target}}else o.position={my:"start top",at:"start bottom",of:this._contextMenuEvent.target}}var S,T,d,u=e.element?e.element[0]:e;i&&i.getAttribute("data-oj-sortable")==this._OPTION_ENABLED?((S=u.querySelectorAll("[data-oj-command=oj-table-sortAsc]")).length>0&&(S=S[0]).classList.remove("oj-disabled"),(T=u.querySelectorAll("[data-oj-command=oj-table-sortDsc]")).length>0&&(T=T[0]).classList.remove("oj-disabled")):((S=u.querySelectorAll("[data-oj-command=oj-table-sortAsc]")).length>0&&(S=S[0]).classList.add("oj-disabled"),(T=u.querySelectorAll("[data-oj-command=oj-table-sortDsc]")).length>0&&(T=T[0]).classList.remove("oj-disabled")),i&&i.getAttribute("data-oj-resizable")==this._OPTION_ENABLED?(d=u.querySelectorAll("[data-oj-command=oj-table-resize]")).length>0&&(d=d[0]).classList.remove("oj-disabled"):(d=u.querySelectorAll("[data-oj-command=oj-table-resize]")).length>0&&(d=d[0]).classList.add("oj-disabled"),this._OpenContextMenu(t,l,o)}},_destroy:function(){t(this._getTableDomUtils().getTableBody()).removeAttr(e.Components._OJ_CONTAINER_ATTR),this.element.children().remove("."+e.TableDomUtils.CSS_CLASSES._TABLE_HEADER_CLASS),this.element.children().remove("."+e.TableDomUtils.CSS_CLASSES._TABLE_BODY_CLASS),this.element.children().remove("."+e.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CLASS),this.element.children().remove("."+e.TableDomUtils.CSS_CLASSES._TABLE_STATUS_MESSAGE_CLASS),this.element.children().remove("."+e.TableDomUtils.CSS_CLASSES._TABLE_BODY_MESSAGE_ROW_CLASS),e.DomUtils.unwrap(this.element,t(this._getTableDomUtils().getTableContainer())),this.element[0].classList.remove(e.TableDomUtils.CSS_CLASSES._TABLE_CLASS),this._readyResolveFunc&&(this._readyResolveFunc(),this._readyResolveFunc=null),this._dataResolveFunc&&(this._dataResolveFunc(),this._dataResolveFunc=null),this._data instanceof e.TableDataSourceAdapter&&this._data.destroy(),(this._hasHeaderTemplate||this._hasCellTemplate||this._hasFooterTemplate)&&this._cleanTemplateNodes(this.element[0]),this._componentDestroyed=!0},_draw:function(){if(this.options,this._setFinalTask(function(){if(this._getTableDomUtils().refreshTableDimensions(),this._setSelection(this.options.selection),this._setSelectionDefault(),this._hasEditableRow()){var t=this._getEditableRowIdx(),l=this._getTableDomUtils().getTableBodyRow(t);null!=l&&l.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_EDIT_CLASS)}this._isLoadMoreOnScroll()&&!this._dataFetching&&this._domScroller&&this._domScroller.checkViewport().then(this._domScrollerSuccessFunc,null)}),!this.element.is("table")){var t=this._LOGGER_MSG._ERR_ELEMENT_INVALID_TYPE_SUMMARY,l=this._LOGGER_MSG._ERR_ELEMENT_INVALID_TYPE_DETAIL;throw new RangeError(t+"\n"+l)}this.element[0].classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_ELEMENT_CLASS),this._getTableDomUtils().createInitialTable(this._isTableHeaderless(),this._isTableFooterless()),this._getTableDomUtils().styleInitialTable();var o=this;this._queueTask(function(){o._refreshTableHeader(),o._refreshTableFooter(),o._refreshTableBody(),o._processSlottedChildren(),o._getTableDomUtils().refreshTableDimensions()}),this.options.disabled&&this.disable()},_events:{focusout:function(l){var o=this._getTableDomUtils().getTable(),i=null;if(null!=l.relatedTarget?i=l.relatedTarget:null==l.originalEvent||null==l.originalEvent.explicitOriginalTarget&&null==l.originalEvent.target?this._getTableDomUtils()._isIE()&&null!=document.activeElement&&(i=document.activeElement):i=l.originalEvent.explicitOriginalTarget||l.originalEvent.target,null==i||!(i==o||t(o).has(i).length>0)){for(var s=e.ZOrderUtils.findOpenPopups(),a=0;a<s.length;a++){var n=e.DomUtils.getLogicalParent(t(s[a]).children());if(t(o).has(n.get(0)).length>0)return}this._focusOutHandler(t(o)),this._focusOutHandler(t(this._getTableDomUtils().getTableContainer())),this._clearKeyboardKeys(),this._clearFocusedHeaderColumn(),this._clearFocusedRow(!1),this._getTableResizeUtils().clearTableHeaderColumnsResize(),this._setTableEditable(!1,!1,0,!0,l),this._setTableActionableMode(!1)}},"blur .oj-table-data-cell":function(t){var l=this._getEventTargetElement(t);l.classList.contains(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_EDIT_CLASS)&&l.classList.remove(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_EDIT_CLASS)},focus:function(e){this._checkRowOrHeaderColumnFocus(e)},focusin:function(e){this._focusInHandler(t(this._getTableDomUtils().getTable())),this._focusInHandler(t(this._getTableDomUtils().getTableContainer()));var l=this._getTableDomUtils().getTableBody();if(t(l).has(e.target).length>0){var o=this._getFocusedRowIdx(),i=this._getFocusedHeaderColumnIdx();if(!(this._isNodeEditable(e.target)||this._isNodeClickable(e.target)||this._isTableActionableMode()||this._hasEditableRow()||this._temporaryTableChildElementFocus||null!=o||null!=i)){var s=this;setTimeout(function(){s._getTableDomUtils().getTable().focus()},0)}}},"focus .oj-table-column-header-acc-asc-link":function(e){var t=this;setTimeout(function(){t._checkRowOrHeaderColumnFocus(e),t=null},0)},"focus .oj-table-data-cell":function(t){var l=this._getEventTargetElement(t);this._getTableDomUtils().getElementRowIdx(l)==this._getEditableRowIdx()&&l.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_EDIT_CLASS)},"click .oj-table-checkbox-acc-select-column":function(e){var l=this._getEventTargetElement(e),o=this._getTableDomUtils().getElementColumnIdx(l),i=t(l).is(":checked");i&&this._setHeaderColumnFocus(o,!0,!0,null,null),this._setHeaderColumnSelection(o,i,l,e,!0),e.stopPropagation()},"click .oj-table-checkbox-acc-select-row":function(e){var l=this._getEventTargetElement(e),o=this._getTableDomUtils().getElementRowIdx(l),i=t(l).is(":checked"),s=!1;i?s=this._setRowFocus(o,!0,!0,null,e,!0):this._setTableEditable(!1,!1,0,!0,e),s&&(this._setRowSelection(o,i,l,e,!0),this._setTableEditable(!0,!1,0,!0,e)),e.stopPropagation()},keydown:function(e){this._addKeyboardKey(e.keyCode);var l=this._getKeyboardKeys()[0];l!=this._KEYBOARD_CODES._KEYBOARD_CODE_ESC&&l!=this._KEYBOARD_CODES._KEYBOARD_CODE_ENTER&&l!=this._KEYBOARD_CODES._KEYBOARD_CODE_F2&&l!=this._KEYBOARD_CODES._KEYBOARD_CODE_TAB&&(this._isNodeEditable(e.target)||null!=this._getTableDomUtils().getTableFooter()&&t(this._getTableDomUtils().getTableFooter()).has(e.target).length>0)||(1==this._getKeyboardKeys().length||2==this._getKeyboardKeys().length&&e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT])&&((this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_UP)||this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_DOWN)||this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_SPACEBAR)||this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_HOME)||this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_END))&&(e.preventDefault(),e.stopPropagation()),this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_UP)||this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_DOWN)?this._handleKeydownUpDown(e):this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_LEFT)||this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_RIGHT)?this._handleKeydownLeftRight(e):this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_TAB)?this._handleKeydownTab(e):l==this._KEYBOARD_CODES._KEYBOARD_CODE_F2?this._handleKeydownF2(e):l==this._KEYBOARD_CODES._KEYBOARD_CODE_SPACEBAR?this._handleKeydownSpacebar(e):l==this._KEYBOARD_CODES._KEYBOARD_CODE_ENTER?this._handleKeydownEnter(e):l==this._KEYBOARD_CODES._KEYBOARD_CODE_HOME?this._handleKeydownHome(e):l==this._KEYBOARD_CODES._KEYBOARD_CODE_END?this._handleKeydownEnd(e):l==this._KEYBOARD_CODES._KEYBOARD_CODE_ESC&&this._handleKeydownEsc(e))},keyup:function(e){if(1==this._getKeyboardKeys().length){var l=this._getKeyboardKeys()[0];if(this._isNodeEditable(e.target)||null!=this._getTableDomUtils().getTableFooter()&&t(this._getTableDomUtils().getTableFooter()).has(e.target).length>0)return void this._removeKeyboardKey(l);this._removeKeyboardKey(l)}this._removeKeyboardKey(e.keyCode)},"mousedown .oj-table-body":function(t){if(this._mouseDownRowIdx=this._getTableDomUtils().getElementRowIdx(t.target),null!=this._mouseDownRowIdx){var l=this._getTableDomUtils().getTableBodyRow(this._mouseDownRowIdx);if(null!=l&&l.draggable)this._mouseDownRowIdx=null;else if(null!=this._mouseDownRowIdx&&!t[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT]&&!e.DomUtils.isMetaKeyPressed(t)&&1===t.which){if(this._getRowSelection(this._mouseDownRowIdx)&&1==this._getSelectedRowIdxs().length)return;this._nonContiguousSelection||this._clearSelectedRows(!0)}}},"mouseup .oj-table-body":function(e){this._mouseDownRowIdx=null},"mouseenter .oj-table-body-row":function(t){var l=this._getEventTargetElement(t);l.classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._HOVER);var o=this._getTableDomUtils().getElementRowIdx(l);this._updateRowStateCellsClass(o,{hover:!0}),this._handleMouseEnterSelection(t.target)},"mouseleave .oj-table-body-row":function(t){var l=this._getEventTargetElement(t);l.classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._HOVER);var o=this._getTableDomUtils().getElementRowIdx(l);this._updateRowStateCellsClass(o,{hover:!1})},"mousedown .oj-table-column-header-cell":function(e){if(1===e.which&&!this._getTableResizeUtils().handleHeaderColumnResizeStart(e)){var l=this._getTableDomUtils().getElementColumnIdx(this._getEventTargetElement(e));this._setHeaderColumnFocus(l,!0,!0,e,null),t(e.target).data(this._FOCUS_CALLED,!0)}},"mouseenter .oj-table-column-header-cell":function(t){if(!this._getTableResizeUtils().setResizeCursor(t)){var l=this._getEventTargetElement(t);l.classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._HOVER);var o=this._getTableDomUtils().getElementColumnIdx(l);this._showTableHeaderColumnSortLink(o)}},"mousemove .oj-table-header":function(e){this._getTableResizeUtils().setResizeCursor(e)},"mousemove .oj-table-column-header-cell":function(t){var l=this._getEventTargetElement(t);this._getTableResizeUtils().setResizeCursor(t)?l.classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._HOVER):l.classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._HOVER)},"mouseleave .oj-table-column-header-cell":function(t){var l=this._getEventTargetElement(t);l.classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._HOVER);var o=this._getTableDomUtils().getElementColumnIdx(l);this._hideTableHeaderColumnSortLink(o,!0),this._hideTableHeaderColumnSortLink(o,!1)},"mouseup .oj-table-column-header-cell":function(e){this._getTableResizeUtils().handleHeaderColumnResizeEnd(e)},"mousedown .oj-table-data-cell":function(e){var l=this._getEventTargetElement(e),o=this._getTableDomUtils().getElementRowIdx(l);this._setRowFocus(o,!0,!0,l,e),t(e.target).data(this._FOCUS_CALLED,!0)},"mouseup .oj-table-data-cell":function(e){this._getTableResizeUtils().handleHeaderColumnResizeEnd(e)},"click .oj-table-column-header-asc-link":function(e){var l=this._getTableDomUtils().getElementColumnIdx(e.target),o=this._getTableDomUtils().getTableHeaderColumn(l);o&&(t(o).data("sorted")==this._COLUMN_SORT_ORDER._ASCENDING?this._handleSortTableHeaderColumn(l,!1,e):this._handleSortTableHeaderColumn(l,!0,e),e.preventDefault(),e.stopPropagation())},"click .oj-table-column-header-acc-asc-link":function(e){if(this._getKeyboardKeys().length>0&&this._getKeyboardKeys()[0]==this._KEYBOARD_CODES._KEYBOARD_CODE_ENTER)return e.preventDefault(),void e.stopPropagation();var l=this._getTableDomUtils().getElementColumnIdx(e.target),o=this._getTableDomUtils().getTableHeaderColumn(l);o&&(t(o).data("sorted")==this._COLUMN_SORT_ORDER._DESCENDING?this._handleSortTableHeaderColumn(l,!0,e):this._handleSortTableHeaderColumn(l,!1,e),e.preventDefault(),e.stopPropagation())},"click .oj-table-column-header-dsc-link":function(e){var l=this._getTableDomUtils().getElementColumnIdx(e.target),o=this._getTableDomUtils().getTableHeaderColumn(l);o&&(t(o).data("sorted")==this._COLUMN_SORT_ORDER._DESCENDING?this._handleSortTableHeaderColumn(l,!0,e):this._handleSortTableHeaderColumn(l,!1,e),e.preventDefault(),e.stopPropagation())},"click .oj-table-column-header-acc-dsc-link":function(e){if(this._getKeyboardKeys().length>0&&this._getKeyboardKeys()[0]==this._KEYBOARD_CODES._KEYBOARD_CODE_ENTER)return e.preventDefault(),void e.stopPropagation();var l=this._getTableDomUtils().getElementColumnIdx(e.target),o=this._getTableDomUtils().getTableHeaderColumn(l);o&&(t(o).data("sorted")==this._COLUMN_SORT_ORDER._DESCENDING?this._handleSortTableHeaderColumn(l,!0,e):this._handleSortTableHeaderColumn(l,!1,e),e.preventDefault(),e.stopPropagation())},"click .oj-table-data-cell":function(l){var o=this._getEventTargetElement(l),i=this._getTableDomUtils().getElementRowIdx(o);if(!t(l.target).data(this._FOCUS_CALLED)){var s=this._setRowFocus(i,!0,!0,o,l);if(t(l.target).data(this._FOCUS_CALLED,!1),!s)return}if(l[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT]){var a,n=this._getLastRowSelection();if(null!=n)if(window.getSelection().removeAllRanges(),i<n)for(a=i;a<=n;a++)this._setRowSelection(a,!0,o,l,!0);else for(a=n;a<=i;a++)this._setRowSelection(a,!0,o,l,!0)}else if(e.DomUtils.isMetaKeyPressed(l))this._setRowSelection(i,!this._getRowSelection(i),o,l,!0);else if(0==this._getKeyboardKeys().length){var r=this._getRowSelection(i);this._setRowSelection(i,!r,o,l,!0),this._isTouchDevice()&&this._getRowSelectionMode()==this._OPTION_SELECTION_MODES._MULTIPLE&&!r&&this._getTableDomUtils().createTableBodyRowTouchSelectionAffordance(i)}},"dblclick .oj-table-data-cell":function(e){var t=this._getTableDomUtils().getElementColumnIdx(e.target);this._setTableEditable(!0,!1,t,!0,e)},"contextmenu .oj-table-data-cell":function(e){var t=this._getTableDomUtils().getElementRowIdx(this._getEventTargetElement(e)),l=this._getRowKeyForRowIdx(t);this._setCurrentRow({rowKey:l},e,!1)},"click .oj-table-column-header-cell":function(l){var o=this._getEventTargetElement(l),i=this._getTableDomUtils().getElementColumnIdx(o);if(t(l.target).data(this._FOCUS_CALLED)||(this._setHeaderColumnFocus(i,!0,!0,l,null),t(l.target).data(this._FOCUS_CALLED,!1)),l[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT]){var s,a=this._getLastHeaderColumnSelection();if(null!=a)if(i<a)for(s=i;s<=a;s++)this._setHeaderColumnSelection(s,!0,o,l,!0);else for(s=a;s<=i;s++)this._setHeaderColumnSelection(s,!0,o,l,!0)}else if(e.DomUtils.isMetaKeyPressed(l))this._setHeaderColumnSelection(i,!this._getHeaderColumnSelection(i),o,l,!0);else if(0==this._getKeyboardKeys().length){var n=this._getSelectedHeaderColumnIdxs();null!=n&&n.length>0&&(-1==n.indexOf(i)||n.length>1)&&this._clearSelectedHeaderColumns(),this._setHeaderColumnSelection(i,!this._getHeaderColumnSelection(i),o,l,!0),this._getTableDndContext().setTableHeaderColumnDraggable(i,!0)}},"dragstart .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDragStart(e)},"dragenter .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDragEnter(e)},"dragover .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDragOver(e)},"dragleave .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDragLeave(e)},"drop .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDrop(e)},"dragend .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDragEnd(e)},"dragstart .oj-table-body-row":function(e){return this._getTableDndContext().handleRowDragStart(e)},"drag .oj-table-body-row":function(e){return this._getTableDndContext().handleRowDrag(e)},"dragend .oj-table-body-row":function(e){return this._getTableDndContext().handleRowDragEnd(e)},"dragenter .oj-table-body":function(e){return this._getTableDndContext().handleRowDragEnter(e)},"dragover .oj-table-body":function(e){return this._getTableDndContext().handleRowDragOver(e)},"dragleave .oj-table-body":function(e){return this._getTableDndContext().handleRowDragLeave(e)},"drop .oj-table-body":function(e){return this._getTableDndContext().handleRowDrop(e)}},_eventsContainer:{"touchstart .oj-table-body-row-touch-selection-affordance-touch-area":function(l){1==l.originalEvent.touches.length&&this._getRowSelectionMode()==this._OPTION_SELECTION_MODES._MULTIPLE&&(l.target.classList.contains(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOP_CLASS)||l.target.classList.contains(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOP_ICON_CLASS)?(l.preventDefault(),this._mouseDownRowIdx=t(this._getTableDomUtils().getTableBodyRowTouchSelectionAffordanceBottom()).data("rowIdx")):(l.target.classList.contains(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_BOTTOM_CLASS)||l.target.classList.contains(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_BOTTOM_ICON_CLASS))&&(l.preventDefault(),this._mouseDownRowIdx=t(this._getTableDomUtils().getTableBodyRowTouchSelectionAffordanceTop()).data("rowIdx")))},"touchstart .oj-table-column-header-cell":function(e){1==e.originalEvent.touches.length&&this._isTableColumnsResizable()&&this._getTableResizeUtils().handleHeaderColumnResizeStart(e)&&e.preventDefault()},"touchmove .oj-table-header":function(e){this._isTableColumnsResizable()&&this._getTableResizeUtils().setResizeCursor(e)},"touchmove .oj-table-body-row-touch-selection-affordance-touch-area":function(e){if(null!=this._mouseDownRowIdx){e.preventDefault();var t=this._getEventTargetElement(e);this._handleMouseEnterSelection(t)}},touchend:function(e){if(null!=this._mouseDownRowIdx){var t=this._getEventTargetElement(e);this._handleMouseEnterSelection(t)}this._mouseDownRowIdx=null,this._getTableResizeUtils().handleHeaderColumnResizeEnd(e)&&e.preventDefault()},"touchend .oj-table-body":function(e){var t=this;this._touchEventDoubleTapFunction(e,function(e){return function(){var l=t._getEventTargetElement(e),o=t._getTableDomUtils().getElementColumnIdx(l);t._setTableEditable(!0,!1,o,!0,e),e.preventDefault()}}(e))},touchcancel:function(e){this._mouseDownRowIdx=null,this._getTableResizeUtils().clearTableHeaderColumnsResize()}},_refresh:function(){var e=!1;this._dataOption!=this.options[this._CONST_DATA]&&(this._clearCachedDataMetadata(),null==this._data&&(e=!0));var t=this._GetContextMenu();if(null!=t&&t!=this._getTableDomUtils().getContextMenu()&&this._getTableDomUtils().createContextMenu(this._handleContextMenuSelect.bind(this)),this._getTableDomUtils().clearCachedDom(),this._getTableDomUtils().refreshContextMenu(),this._refreshTableStatusMessage(),e)return this._initFetch();var l=this;return this._queueTask(function(){var e=l._invokeDataFetchRows(null,!1);return l=null,e})},_setOption:function(e,t){"selection"==e?(this._clearSelectedRows(),this._clearSelectedHeaderColumns(),this._setSelection(t),this._setSelectionDefault(),this._superApply(arguments)):"currentRow"==e?this._setCurrentRow(t,null,!0)&&this._superApply(arguments):(this._superApply(arguments),this._isTableRefreshNeeded(e,t)&&("columns"==e&&(this._clearCachedMetadata(),this._refreshTableHeader()),this._refresh()))},_addKeyboardKey:function(e){var t=!1;for(var l in this._KEYBOARD_CODES)this._KEYBOARD_CODES.hasOwnProperty(l)&&this._KEYBOARD_CODES[l]==e&&(t=!0);if(t){var o,i=this._getKeyboardKeys(),s=!1,a=i.length;for(o=0;o<a;o++)if(i[o]==e){s=!0;break}s||i.push(e)}},_addComponentBusyState:function(t){var l=e.Context.getContext(this.element[0]).getBusyContext(),o={description:"The component identified by '"+this._getTableDomUtils().getTableId()+"' "+t};return l.addBusyState(o)},_addSingleTableBodyRow:function(t,l,o,i){var s=this._getTableDomUtils().createTableBodyRow(t,l[this._CONST_KEY]);return this._getTableDomUtils().styleTableBodyRow(s,!0),this._getTableDomUtils().insertTableBodyRow(t,s,l,o),s=this._refreshTableBodyRow(t,l,s,o,i,!0),o||e.Components.subtreeAttached(s),s},_animateVisibleRows:function(e,t,l){if(l=null==this._animationActionOverride?l:this._animationActionOverride,this._hasPendingTasks())return this._animationActionOverride="update",Promise.resolve();this._animationActionOverride=null;var o,i=this._getVisibleRowIdxs(),s=[];for(o=0;o<t.length;o++)-1==i.indexOf(t[o])&&s.push(t[o]);for(s.sort(function(e,t){return e-t}),o=s.length-1;o>=0;o--)e.splice(s[o],1);this._unregisterResizeListener();var a=this;return this._getTableAnimationUtils().animateTableBodyRows(e,l).then(function(){a._registerResizeListener()})},_checkRowOrHeaderColumnFocus:function(e){var t=this._getFocusedRowIdx(),l=this._getFocusedHeaderColumnIdx();if(null==t&&null==l){var o=null,i=this._getCurrentRow(),s=null!=i?i.rowKey:null;null!=s&&(o=this._getRowIdxForRowKey(s)),null==o?this._isTableHeaderless()?this._setRowFocus(0,!0,!0,null,e):this._setHeaderColumnFocus(0,!0,!1,e,!0):this._setRowFocus(o,!0,!0,null,e)}},_cleanTemplateNodes:function(e){var t=this._getTemplateEngine();null!=t&&t.clean(e)},_clearCachedMetadata:function(){this._columnDefArray=null,this._setTableActionableMode(!1)},_clearCachedDataMetadata:function(){null!=this._data&&this._unregisterDataSourceEventListeners(),this._data=null},_clearDataWaitingState:function(){this._hideInlineMessage(),this._hideStatusMessage(),this._dataFetching=!1,this._dataResolveFunc&&(this._dataResolveFunc(),this._dataResolveFunc=null)},_clearKeyboardKeys:function(){this._keyboardKeys=[]},_clearFocusedHeaderColumn:function(){var e=this._getFocusedHeaderColumnIdx();null!=e&&this._setHeaderColumnFocus(e,!1,!1,null,null),this._activeColumnIndex=-1},_clearFocusedRow:function(e){null!=this._getFocusedRowIdx()&&this._setRowFocus(-1,!0,e,null,null)},_clearSelectedHeaderColumns:function(){var e,t=this._getSelectedHeaderColumnIdxs(),l=t.length;for(e=0;e<l;e++)this._setHeaderColumnSelection(t[e],!1,null,null,!1,!0)},_clearSelectedRows:function(){var e,t=this._getSelectedRowIdxs(),l=t.length;for(e=0;e<l;e++)this._setRowSelection(t[e],!1,null,null,!1,!0);this._isTouchDevice()&&this._getRowSelectionMode()==this._OPTION_SELECTION_MODES._MULTIPLE&&this._getTableDomUtils().removeTableBodyRowTouchSelectionAffordance()},_clearSortedHeaderColumn:function(l){var o=this._getSortedTableHeaderColumnIdx();if(null!=o){var i=this._getTableDomUtils().getTableHeaderColumn(o),s=t(i).data("sorted");if(t(i).data("sorted",null),null==l||o!==l)this._hideTableHeaderColumnSortLink(o,s==this._COLUMN_SORT_ORDER._ASCENDING);else{var a=i.querySelectorAll("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_LINK_CLASS);a.length>0&&(a=a[0]).classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED);var n=i.querySelectorAll("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_LINK_CLASS);n.length>0&&(n=n[0]).classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)}}},_executeTableBodyRowsAdd:function(t){var l=this;this._queueTask(function(){var o=!1,i=[],s=[];if(t.length>1){var a,n=t.length,r=!0;for(a=0;a<n;a++)0!=a&&t[a-1].rowIdx!=t[a].rowIdx-1&&(r=!1),s.push(t[a].rowIdx);if(r){var _=l._getTableDomUtils().getTableBody(),S=document.createDocumentFragment();for(n=t.length,a=0;a<n;a++)i.push(l._addSingleTableBodyRow(t[a].rowIdx,t[a].row,S,t[0].rowIdx));if(0==t[0].rowIdx)_.insertBefore(S,_.firstChild);else{var T=l._getTableDomUtils().getTableBodyRow(t[0].rowIdx);null!=T?_.insertBefore(S,T):_.appendChild(S,null)}l._getTableDomUtils().clearCachedDomRowData(),e.Components.subtreeAttached(_),o=!0}}if(!o)for(n=t.length,a=0;a<n;a++)i.push(l._addSingleTableBodyRow(t[a].rowIdx,t[a].row));return l._getTableDomUtils().clearCachedDomRowData(),l._refreshTableFooter(),l._IsCustomElement()?l._animateVisibleRows(i,s,"add"):Promise.resolve()})},_executeTableBodyRowsChange:function(e,t){var l,o,i=this,s=e.length,a=[],n=[];this._queueTask(function(){for(l=0;l<s;l++)o=i._refreshTableBodyRow(e[l].rowIdx,e[l].row),a.push(o),n.push(e[l].rowIdx);return i._refreshTableFooter(),i._IsCustomElement()?i._animateVisibleRows(a,n,"update"):Promise.resolve()})},_executeTableBodyRowsRemove:function(e){e.sort(function(e,t){return t.rowIdx-e.rowIdx});var l=this,o=this._getCurrentRow(),i=null!=o?o.rowIndex:0,s=null!=o?o.rowKey:null;this._queueTask(function(){var o,a,n,r,_=[],S=[],T=[],d=e.length,u=!1,h=l._getTableDomUtils().getTableBodyRows();if(null!=h&&h.length>0){for(o=0;o<h.length;o++)_.push(o);for(o=0;o<d;o++)for(n=e[o].rowIdx,S.push(n),a=0;a<_.length;a++)if(_[a]==n){r=this._getTableDomUtils().getTableBodyRow(n),T.push(r),_.splice(a,1);break}0==_.length&&(u=!0)}var c=this._getTableDomUtils().getTableBody(),m=t.contains(c,document.activeElement),C=!1;if(u)m&&(C=!0),l._setSelection(null),l.option("selection",null,{_context:{writeback:!0,internalSet:!0}});else for(o=0;o<d;o++)if(n=e[o].rowIdx,r=this._getTableDomUtils().getTableBodyRow(n),m&&null!=r&&t.contains(r,document.activeElement)){C=!0,m=!1;break}var E=function(){for(o=0;o<d;o++)n=e[o].rowIdx,l._getTableDomUtils().removeTableBodyRow(n)},D=function(){l._refreshTableFooter(),null!=(h=l._getTableDomUtils().getTableBodyRows())&&0!=h.length||l._showNoDataMessage(),null!=s&&(null==h||u||i>=h.length?l._setCurrentRow(null,null,!1):l._setCurrentRow({rowIndex:i,rowKey:null},null,!1)),C&&l._getTableDomUtils().getTable().focus()};if(!u)return new Promise(function(e,t){l._IsCustomElement()?l._animateVisibleRows(T,S,"remove").then(function(){E(),D(),e(!0)}):(E(),D(),e(!0))});l._getTableDomUtils().removeAllTableBodyRows(),D()})},_getAllBusyContextsForElement:function(t){if(!t)return null;var l=t.querySelectorAll("[data-oj-context]");if(l.length>0){var o,i=[];for(o=0;o<l.length;o++)i.push(e.Context.getContext(l[o]).getBusyContext());return i}return null},_getColumnDefs:function(){return this._columnDefArray||(this._columnDefArray=this._getColumnMetadata()),this._columnDefArray},_getColumnMetadata:function(){var e=this.options.columns,l=this.options.columnsDefault;if((0==e.length||1==e.length&&null==e[0].id&&null==e[0].headerText&&null==e[0].field)&&null==l.headerText&&null==l.field)return[];var o,i=[],s=e.length;for(o=0;o<s;o++)i[o]=t.extend({},l,e[o]);var a=[],n=i.length;for(o=0;o<n;o++)a.push(i[o]);var r=this._getData(),_=!1;for(null!=r&&null!=r.getCapability("sort")&&(_=!0),o=0;o<n;o++)null==a[o][this._FIELD_ID]&&(a[o][this._FIELD_ID]=this._COLUMN_HEADER_ID_PREFIX+o),null!=a[o].sortable&&a[o].sortable!=this._OPTION_AUTO||!_||(a[o].sortable=this._OPTION_ENABLED);return a},_getColumnIdxForColumnKey:function(t){var l=this._getColumnDefs();if(null!=l){var o,i,s=l.length;for(o=0;o<s;o++)if(i=l[o],e.Object.compareValues(i.id,t))return o}return null},_getColumnIdxsForElementsWithStyleClass:function(e){var t=this._getTableDomUtils().getTable().querySelectorAll(e),l=[];if(t&&t.length>0){var o,i,s,a,n,r=t.length;for(o=0;o<r;o++){for(a=this._getTableDomUtils().getElementColumnIdx(t[o]),s=!1,n=l.length,i=0;i<n;i++)l[i]==a&&(s=!0);s||l.push(a)}}return l},_getColumnKeyForColumnIdx:function(e){var t=this._getColumnDefs();return null!=t&&e<t.length?t[e][this._FIELD_ID]:null},_getColumnRenderer:function(e,t){var l=this._getColumnDefs()[e],o=null;return"cell"==t?o=l.renderer:"footer"==t?o=l.footerRenderer:"header"==t&&(o=l.headerRenderer),this._WrapCustomElementRenderer(o)},_getCurrentRow:function(){return this._getData()?this._currentRow:null},_getData:function(){if(!this._data&&null!=this.options.data){var t=this.options.data;if(e.TableDataSource&&t instanceof e.TableDataSource||e.PagingTableDataSource&&t instanceof e.PagingTableDataSource)this._data=new e.TableDataSourceAdapter(t);else{if(!e.DataProviderFeatureChecker.isIteratingDataProvider(t)){var l=this._LOGGER_MSG._ERR_DATA_INVALID_TYPE_SUMMARY,o=this._LOGGER_MSG._ERR_DATA_INVALID_TYPE_DETAIL;throw new Error(l+"\n"+o)}t instanceof e.ListDataProviderView?this._data=t:this._data=new e.ListDataProviderView(t)}this._dataOption=this.options.data,this._registerDataSourceEventListeners()}return this._data},_getFocusedHeaderColumnIdx:function(){return this._getColumnIdxsForElementsWithStyleClass("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS+"."+e.TableDomUtils.MARKER_STYLE_CLASSES._FOCUS_HIGHLIGHT+",."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS+"."+e.TableDomUtils.MARKER_STYLE_CLASSES._FOCUS)[0]},_getFocusedRowIdx:function(){return this._getRowIdxsForElementsWithStyleClass("."+e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS+"."+e.TableDomUtils.MARKER_STYLE_CLASSES._FOCUS_HIGHLIGHT+",."+e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS+"."+e.TableDomUtils.MARKER_STYLE_CLASSES._FOCUS)[0]},_getHeaderColumnSelection:function(t){return this._getTableDomUtils().getTableHeaderColumn(t).classList.contains(e.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)},_getColumnSelectionMode:function(){return null==this.options.selectionMode?null:this.options.selectionMode[this._CONST_COLUMN]},_getKeyboardKeys:function(){return this._keyboardKeys||(this._keyboardKeys=[]),this._keyboardKeys.reverse()},_getLastHeaderColumnSelection:function(){return null!=this._lastSelectedColumnIdxArray&&this._lastSelectedColumnIdxArray.length>0?this._lastSelectedColumnIdxArray[0]:null},_getLastRowSelection:function(){return null!=this._lastSelectedRowIdxArray&&this._lastSelectedRowIdxArray.length>0?this._lastSelectedRowIdxArray[0]:null},_getRowIdxRowArray:function(e,t){var l=[];if(null!=e){var o,i=e[this._CONST_INDEXES].length;for(o=0;o<i;o++)l.push({row:{data:e[this._CONST_DATA][o],metadata:e[this._CONST_METADATA]?e[this._CONST_METADATA][o]:null,key:e[this._CONST_KEYS][o],index:e[this._CONST_INDEXES][o]},rowIdx:t+o})}return l},_getRowIdxForRowKey:function(l){var o=this._getTableDomUtils().getTableBodyRows();if(null!=o&&o.length>0){var i,s=o.length;for(i=0;i<s;i++)if(e.Object.compareValues(t(o[i]).data("rowKey"),l))return i}return null},_getDataSourceRowIndexForRowKey:function(l){var o=this._getTableDomUtils().getTableBodyRows();if(null!=o&&o.length>0){var i,s=o.length;for(i=0;i<s;i++)if(e.Object.compareValues(t(o[i]).data("rowKey"),l)){var a=this._getData(),n=0;return this._isPagingModelDataProvider()&&(n=a.getStartItemIndex()),i+n}}return null},_getEditableRowIdx:function(){var e=null;return null!=this._getEditableRowKey()&&null!==(e=this._getRowIdxForRowKey(this._getEditableRowKey()))?e:this._editableRowIdx},_getEditableRowKey:function(){return this._editableRowKey},_getEventTargetElement:function(e){return 0==e.type.indexOf("touch")?this._getTouchEventTargetElement(e):e.currentTarget},_getRowIdxsForElementsWithStyleClass:function(e){var t=this._getTableDomUtils().getTable().querySelectorAll(e),l=[];if(t&&t.length>0){var o,i,s,a,n,r=t.length;for(o=0;o<r;o++){for(s=this._getTableDomUtils().getElementRowIdx(t[o]),n=!1,a=l.length,i=0;i<a;i++)l[i]==s&&(n=!0);n||l.push(s)}}return l},_getRowKeyForDataSourceRowIndex:function(e){var l=this._getTableDomUtils().getTableBodyRows();if(null!=l&&l.length>0){var o=this._getData(),i=0;this._isPagingModelDataProvider()&&(i=o.getStartItemIndex());var s,a=l.length;for(s=0;s<a;s++)if(i+s==e)return t(l[s]).data("rowKey")}return null},_getRowKeyForRowIdx:function(e){var l=this._getTableDomUtils().getTableBodyRow(e);return null!=l?t(l).data("rowKey"):null},_getRowRenderer:function(){return this._WrapCustomElementRenderer(this.options.rowRenderer)},_getRowSelection:function(t){return this._getTableDomUtils().getTableBodyRow(t).classList.contains(e.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)},_getRowSelectionMode:function(){return null==this.options.selectionMode?null:this.options.selectionMode[this._CONST_ROW]},_getSelectedHeaderColumnIdxs:function(){return this._getColumnIdxsForElementsWithStyleClass("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS+"."+e.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)},_getSelectedRowIdxs:function(){return this._getRowIdxsForElementsWithStyleClass("."+e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS+"."+e.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)},_getSelection:function(){var e=this._getSelectedRowIdxs(),t=this._getSelectedHeaderColumnIdxs(),l=null,o=!0;if(null!=e&&e.length>0)l=e;else{if(!(null!=t&&t.length>0))return[];l=t,o=!1}var i,s,a,n,r,_=[],S=0,T=null,d=l.length;for(r=0;r<d;r++)a=l[r],0==r?((i={})[this._CONST_STARTINDEX]={},i[this._CONST_ENDINDEX]={},i.startKey={},i.endKey={},o?(n=this._getRowKeyForRowIdx(a),s=this._getDataSourceRowIndexForRowKey(n),i.startKey[this._CONST_ROW]=n,i.endKey[this._CONST_ROW]=n,i[this._CONST_STARTINDEX][this._CONST_ROW]=s,i[this._CONST_ENDINDEX][this._CONST_ROW]=s):(i[this._CONST_STARTINDEX][this._CONST_COLUMN]=a,i[this._CONST_ENDINDEX][this._CONST_COLUMN]=a,n=this._getColumnKeyForColumnIdx(a),i.startKey[this._CONST_COLUMN]=n,i.endKey[this._CONST_COLUMN]=n),_[0]=i):(i=_[S],o?(n=this._getRowKeyForRowIdx(a),s=this._getDataSourceRowIndexForRowKey(n),i.endKey[this._CONST_ROW]=n,i[this._CONST_ENDINDEX][this._CONST_ROW]=s):(i[this._CONST_ENDINDEX][this._CONST_COLUMN]=a,n=this._getColumnKeyForColumnIdx(a),i.endKey[this._CONST_COLUMN]=n),a!=T+1&&(o?(n=this._getRowKeyForRowIdx(T),s=this._getDataSourceRowIndexForRowKey(n),i.endKey[this._CONST_ROW]=n,i[this._CONST_ENDINDEX][this._CONST_ROW]=s,(i={})[this._CONST_STARTINDEX]={},i[this._CONST_ENDINDEX]={},i.startKey={},i.endKey={},n=this._getRowKeyForRowIdx(a),s=this._getDataSourceRowIndexForRowKey(n),i.startKey[this._CONST_ROW]=n,i.endKey[this._CONST_ROW]=n,i[this._CONST_STARTINDEX][this._CONST_ROW]=s,i[this._CONST_ENDINDEX][this._CONST_ROW]=s):(i[this._CONST_ENDINDEX][this._CONST_COLUMN]=T,n=this._getColumnKeyForColumnIdx(T),i.endKey[this._CONST_COLUMN]=n,(i={})[this._CONST_STARTINDEX]={},i[this._CONST_ENDINDEX]={},i.startKey={},i.endKey={},i[this._CONST_STARTINDEX][this._CONST_COLUMN]=a,i[this._CONST_ENDINDEX][this._CONST_COLUMN]=a,n=this._getColumnKeyForColumnIdx(a),i.startKey[this._CONST_COLUMN]=n,i.endKey[this._CONST_COLUMN]=n),_[++S]=i)),T=a;return _},_getSlotTemplate:function(t){var l;return this._IsCustomElement()&&t&&(l=e.BaseCustomElementBridge.getSlotMap(this._getRootElement())[t])&&l.length>0&&"template"===l[0].tagName.toLowerCase()?l[0]:null},_getSortedTableHeaderColumnIdx:function(){var e,l=this._getTableDomUtils().getTableHeaderColumns(),o=l?l.length:0;for(e=0;e<o;e++)if(null!=t(l[e]).data("sorted"))return e;return null},_getTabbableElements:function(e,l){var o=null;return null!=(o=l?t(e).find(":tabbable"):t(e).find(":tabbable").not(".oj-helper-hidden-accessible"))&&o.length>0?o.toArray():null},_getTableAnimationUtils:function(){return this._tableAnimationUtils||(this._tableAnimationUtils=new e.TableAnimationUtils(this)),this._tableAnimationUtils},_getTableDndContext:function(){return this._tableDndContext||(this._tableDndContext=new e.TableDndContext(this)),this._tableDndContext},_getTableDomUtils:function(){return this._tableDomUtils||(this._tableDomUtils=new e.TableDomUtils(this)),this._tableDomUtils},_getTableResizeUtils:function(){return this._tableResizeUtils||(this._tableResizeUtils=new e.TableResizeUtils(this)),this._tableResizeUtils},_getTemplateEngine:function(){return this._templateEngine},_getTouchEventTargetElement:function(e){var t=e.originalEvent.changedTouches[0];return document.elementFromPoint(t.clientX,t.clientY)},_getVisibleRowIdxs:function(){var e=[],l=this._getTableDomUtils().getTableBodyRows();if(null!=l&&l.length>0){var o,i=t(window).height(),s=this.element[0].getBoundingClientRect();if(s.top>=0&&s.bottom<=i)for(o=0;o<l.length;o++)e.push(o);else{if(s.top>i)return e;var a,n,r=s.left>=0?s.left+1:s.right-1,_=document.elementFromPoint(r,0),S=null;for(null!=_&&(S=this._getTableDomUtils().getElementRowIdx(_)),a=null!=S?S:0,s.bottom>i?(S=null,null!=(_=document.elementFromPoint(r,i-1))&&(S=this._getTableDomUtils().getElementRowIdx(_)),n=null!=S?S:l.length-1):n=l.length-1,o=a;o<=n;o++)e.push(o)}}return e},_handleContextMenuSelect:function(e,l){var o,i=(o=l?l.item:t(e.target)).attr("data-oj-command"),s=this._getTableDomUtils().getFirstAncestor(this._contextMenuEvent.target,"oj-table-column-header-cell");s=null==s?this._contextMenuEventHeaderColumn:s;var a=this._getTableDomUtils().getFirstAncestor(this._contextMenuEvent.target,"oj-table-data-cell"),n=null;if(null!=s&&(n=this._getTableDomUtils().getElementColumnIdx(s)),null!=a&&(n=this._getTableDomUtils().getElementColumnIdx(a)),null!==n)if("oj-table-sortAsc"==i)this._handleSortTableHeaderColumn(n,!0,e);else if("oj-table-sortDsc"==i)this._handleSortTableHeaderColumn(n,!1,e);else if("oj-table-enableNonContiguousSelection"==i)this._nonContiguousSelection=!0,o.attr("data-oj-command","oj-table-disableNonContiguousSelection"),o.children().first().text(this.getTranslatedString("labelDisableNonContiguousSelection"));else if("oj-table-disableNonContiguousSelection"==i)this._nonContiguousSelection=!1,o.attr("data-oj-command","oj-table-enableNonContiguousSelection"),o.children().first().text(this.getTranslatedString("labelEnableNonContiguousSelection"));else if("oj-table-resize"==i){var r=this._getTableDomUtils().getContextMenuResizePopup();r.setAttribute("data-oj-columnIdx",n);var _=null!=s?s.getBoundingClientRect():a.getBoundingClientRect(),S=document.getElementById(this._getTableDomUtils().getTableId()+"_resize_popup_spinner");t(S).ojInputNumber("option","value",Math.round(_.width));var T=null!=s?s:null!=a?a:this.getTable();t(r).ojPopup("open",T)}},_handleContextMenuResizePopup:function(e){var l=document.getElementById(this._getTableDomUtils().getTableId()+"_resize_popup_spinner"),o=t(l).ojInputNumber("option","value"),i=this._getTableDomUtils().getContextMenuResizePopup(),s=parseInt(i.getAttribute("data-oj-columnIdx"),10);t(i).ojPopup("close");var a,n=[],r=this.options.columns.length;for(a=0;a<r;a++)n[a]=t.extend({},{},this.options.columns[a]);n[s].width=o,this.option("columns",n,{_context:{writeback:!0,internalSet:!0}}),this._clearCachedMetadata();var _=this;this._refresh().then(function(){_._getTableDomUtils().getTable().focus()})},_handleDataAppend:function(t){try{var l=this;this._queueTask(function(){var e,o=[],i=t[l._CONST_DATA].length;for(e=0;e<i;e++)o[e]=e+t[l._CONST_STARTINDEX];l._refreshAll({data:t[l._CONST_DATA],keys:t[l._CONST_KEYS],indexes:o},t[l._CONST_STARTINDEX]),l=null})}catch(t){e.Logger.error(t)}finally{this._clearDataWaitingState()}},_handleDataError:function(t){this._clearDataWaitingState(),e.Logger.error(t)},_handleDataFetchStart:function(e){this._setDataWaitingState()},_handleDataRefresh:function(t){try{if(this._dataFetching)return;var l=this;this._queueTask(function(){var e=l._invokeDataFetchRows({});return l=null,e})}catch(t){e.Logger.error(t)}finally{this._clearDataWaitingState()}},_handleDataRowMutate:function(e){this._dataFetching||(null!=e.detail.remove&&this._handleDataRowRemove(e.detail.remove),null!=e.detail.add&&this._handleDataRowAdd(e.detail.add),null!=e.detail.update&&this._handleDataRowChange(e.detail.update))},_handleDataRowAdd:function(t){try{var l=this._getData(),o=t[this._CONST_DATA],i=t[this._CONST_INDEXES],s=[];t[this._CONST_KEYS].forEach(function(e){s.push(e)});var a=[];null!=t[this._CONST_AFTERKEYS]&&t[this._CONST_AFTERKEYS].forEach(function(e){a.push(e)}),o instanceof Array||(o=[o]);var n=0;this._isPagingModelDataProvider()&&(n=l.getStartItemIndex());var r=null;l instanceof e.TableDataSourceAdapter&&(e.FlattenedTreeTableDataSource&&l.tableDataSource instanceof e.FlattenedTreeTableDataSource?r=l.tableDataSource:e.PagingTableDataSource&&l.tableDataSource instanceof e.PagingTableDataSource&&e.FlattenedTreeTableDataSource&&l.tableDataSource.dataSource instanceof e.FlattenedTreeTableDataSource&&(r=l.tableDataSource.dataSource));var _,S,T,d,u=[],h=null,c=this._getTableDomUtils().getTableBodyRows(),m=null!=c?c.length:0,C=o.length;for(d=0;d<C;d++)T=null!=a?a[d]:"",S=null!=(_=this._getRowIdxForRowKey(T))&&_>=0?_+n:i[d]>=0?i[d]:0==d?m:i[d-1]+1,i[d]=S;for(d=0;d<C;d++)if(void 0!==(_=i[d]-n)){r&&(h=r._getMetadata(_));var E={data:o[d],metadata:h,key:s[d],index:i[d]};u.push({row:E,rowIdx:_})}u.length>0&&this._executeTableBodyRowsAdd(u)}catch(t){e.Logger.error(t)}finally{this._clearDataWaitingState()}},_handleDataRowChange:function(t){try{var l=t[this._CONST_DATA],o=[];t[this._CONST_KEYS].forEach(function(e){o.push(e)}),l instanceof Array||(l=[l]);var i,s=[],a=l.length;for(i=0;i<a;i++){var n=this._getRowIdxForRowKey(o[i]);if(void 0!==n){var r={data:l[i],key:o[i],index:n};s.push({row:r,rowIdx:n})}}s.length>0&&this._executeTableBodyRowsChange(s)}catch(t){e.Logger.error(t)}finally{this._clearDataWaitingState()}},_handleDataRowRemove:function(t){try{var l=t[this._CONST_DATA],o=[];t[this._CONST_KEYS].forEach(function(e){o.push(e)}),l instanceof Array||(l=[l]);var i,s=[],a=l.length;for(i=0;i<a;i++){var n=this._getRowIdxForRowKey(o[i]);if(void 0!==n){var r={data:l[i],key:o[i],index:n};s.push({row:r,rowIdx:n})}}s.length>0&&this._executeTableBodyRowsRemove(s)}catch(t){e.Logger.error(t)}finally{this._clearDataWaitingState()}},_handleKeydownEnd:function(e){if(!this._isTableActionableMode()){var t=this._getFocusedHeaderColumnIdx();if(null!=t&&t!=this._getColumnDefs().length-1)this._setHeaderColumnFocus(this._getColumnDefs().length-1,!0,!1,null,!1);else if(!this._hasEditableRow()){var l=this._getFocusedRowIdx(),o=this._getTableDomUtils().getTableBodyRows(),i=null!=o?o.length:0;null!=l&&l!=i-1&&i>0&&this._setRowFocus(i-1,!0,!0,null,e)}}},_handleKeydownEnter:function(e){if(!this._isTableActionableMode()){var l=this._getFocusedHeaderColumnIdx();if(null!=l&&this._getColumnDefs()[l].sortable==this._OPTION_ENABLED){var o=this._getTableDomUtils().getTableHeaderColumn(l),i=t(o).data("sorted");null==i||i==this._COLUMN_SORT_ORDER._DESCENDING?this._handleSortTableHeaderColumn(l,!0,e):this._handleSortTableHeaderColumn(l,!1,e)}else{var s=this._getCurrentRow();if((s=s||{}).rowIndex>=0)if(this._isTableEditMode()){if(!this._hasEditableRow())return void this._setTableEditable(!0,!1,0,!0,e);var a=this._getTableDomUtils().getElementColumnIdx(e.target);e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT]?this._setPreviousRowEditable(a,e):this._setNextRowEditable(a,e)}else this._setTableActionableMode(!0)}}},_handleKeydownEsc:function(e){e.preventDefault(),e.stopPropagation(),this._setTableEditable(!1,!0,0,!0,e),this._getTableDomUtils().getTable().focus(),this._setTableActionableMode(!1),this._getTableResizeUtils().clearTableHeaderColumnsResize()},_handleKeydownF2:function(e){e.preventDefault(),e.stopPropagation(),this._isTableEditMode()?this._hasEditableRow()?this._setTableEditable(!1,!1,0,!0,e):this._setTableEditable(!0,!1,0,!0,e):this._isTableActionableMode()?this._setTableActionableMode(!1):this._setTableActionableMode(!0)},_handleKeydownHome:function(e){if(!this._isTableActionableMode()){var t=this._getFocusedHeaderColumnIdx();if(null!=t&&0!=t)this._setHeaderColumnFocus(0,!0,!1,null,!0);else if(!this._hasEditableRow()){var l=this._getFocusedRowIdx();null!=l&&0!=l&&this._setRowFocus(0,!0,!0,null,e)}}},_handleKeydownLeftRight:function(e){if(!this._isTableActionableMode()){var t=this._getFocusedHeaderColumnIdx(),l=this._getColumnDefs();if(null!=t){var o=t;if(this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_LEFT)?o=t>0?t-1:t:this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_RIGHT)&&(o=t<l.length-1?t+1:t),o!=t&&(this._setHeaderColumnFocus(o,!0,!1,null,this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_RIGHT)),e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT])){var i=this._getHeaderColumnSelection(o);this._setHeaderColumnSelection(o,!i,null,e,!0),i&&this._getHeaderColumnSelection(t)&&this._setHeaderColumnSelection(t,!1,null,e,!0)}}}},_handleKeydownSpacebar:function(e){if(!this._isTableActionableMode()){var t=this._getFocusedRowIdx();if(null!=t)this._setRowSelection(t,!this._getRowSelection(t),null,e,!0);else if(!this._hasEditableRow()){var l=this._getFocusedHeaderColumnIdx();null!=l&&(this._clearSelectedRows(),this._setHeaderColumnSelection(l,!this._getHeaderColumnSelection(l),null,e,!0))}}},_handleKeydownTab:function(l){var o=!1,i=this._getFocusedRowIdx(),s=this._getFocusedHeaderColumnIdx();if((null!=i||null!=s)&&(this._isTableActionableMode()||this._hasEditableRow())){var a=document.activeElement,n=this._getTableDomUtils().getTableBody(),r=this._getTableDomUtils().getTableHeader();if(this._getEditableRowIdx()===i){var _=this._getTableDomUtils().getTableBodyRow(i),S=this._getTabbableElements(_),T=null!=S?S.length:0,d=t(S).index(a);if(d==T-1&&!l[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT])return this._setNextRowEditable(0,l),l.preventDefault(),void l.stopPropagation();if(0!=d||!l[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT])return;var u=this._getTableDomUtils().getTableHeaderColumns();if(u){var h=u.length;return this._setPreviousRowEditable(h-1,l),l.preventDefault(),void l.stopPropagation()}}else if(t.contains(n,a)||t.contains(r,a)){var c=null;if(t.contains(n,a)?c=this._getTableDomUtils().getTableBodyRow(i):t.contains(r,a)&&(c=this._getTableDomUtils().getTableHeader()),(C=this._getTabbableElements(c)).length>0){var m;if(C.length>1){if(l[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT]){if(a==C[0])t(C[C.length-1]).focus(),l.preventDefault(),l.stopPropagation();else for(m=0;m<C.length;m++)if(a==C[m]){C[m-1].focus(),l.preventDefault(),l.stopPropagation();break}}else if(a==C[C.length-1])t(C[0]).focus(),l.preventDefault(),l.stopPropagation();else for(m=0;m<C.length;m++)if(a==C[m]){C[m+1].focus(),l.preventDefault(),l.stopPropagation();break}}else l.preventDefault(),l.stopPropagation();return}}if((null!=i&&!this._hasEditableRow()||null!=s)&&!l[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT]){var C;if(o=!0,c=null,null!=i?c=this._getTableDomUtils().getTableBodyRow(i):null!=s&&(c=this._getTableDomUtils().getTableHeaderColumn(s)),null!=(C=this._getTabbableElements(c)))t(C[0]).focus();else if(null!=i){var E=this._getTabbableElements(n);t(E[0]).focus()}else if(null!=s){var D=this._getTabbableElements(r);t(D[0]).focus()}l.preventDefault(),l.stopPropagation()}}if(o)this._removeKeyboardKey(l.keyCode);else{this._clearKeyboardKeys(),this._clearFocusedHeaderColumn(),this._clearFocusedRow(!1),this._setTableActionableMode(!1);var b=this._getTableDomUtils().getTable(),g=this._getTabbableElements(b,!0),A=null!=g?g.length:0,R=b;if(!l[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT]&&A>0)if(this._getTableDomUtils()._isFF()){var L=this._getTableDomUtils().getTableContainer();(R=document.createElement(e.TableDomUtils.DOM_ELEMENT._A)).setAttribute(e.TableDomUtils.DOM_ATTR._TABINDEX,"0"),R.setAttribute(e.TableDomUtils.DOM_ATTR._HREF,"#"),R.classList.add(e.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),L.appendChild(R),this._temporaryFocusForFF=R}else R=g[A-1];this._temporaryTableChildElementFocus=!0,R.focus();var O=this;setTimeout(function(){O._temporaryTableChildElementFocus=!1,O._temporaryFocusForFF&&(t(O._temporaryFocusForFF).remove(),O._temporaryFocusForFF=null)},0)}},_handleKeydownUpDown:function(e){if(!this._isTableActionableMode()){var t=this._getFocusedRowIdx(),l=this._getFocusedHeaderColumnIdx();if(null==t||this._hasEditableRow())null!=l&&this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_DOWN)&&this._setRowFocus(0,!0,!0,null,e);else{var o=this._getTableDomUtils().getTableBodyRows(),i=null!=o?o.length:0,s=t;if(this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_UP)?t>0?s=t-1:this._hasEditableRow()||(s=t):this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_DOWN)&&(s=t<i-1?t+1:t),s!=t){if(!this._setRowFocus(s,!0,!0,null,e))return;if(this._getTableDomUtils().getTable().focus(),e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT]){var a=this._getRowSelection(s);this._setRowSelection(s,!a,null,e,!0),a&&this._getRowSelection(t)&&this._setRowSelection(t,!1,null,e,!0)}}else s==t&&0==t&&this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_UP)&&this._setHeaderColumnFocus(0,!0,!1,null,!0)}}},_handleMouseEnterSelection:function(e){var t=this._getTableDomUtils().getElementRowIdx(e);if(null!=t&&null!=this._mouseDownRowIdx&&this._mouseDownRowIdx!=t){var l=this._mouseDownRowIdx,o=this._getSelectedRowIdxs();if(t<l){for(i=0;i<o.length;i++)(o[i]<t||o[i]>l)&&this._setRowSelection(o[i],!1,e,null,!0);for(i=l;i>=t;i--)this._setRowSelection(i,!0,e,null,!0),this._getTableDomUtils().moveTableBodyRowTouchSelectionAffordanceTop(i)}else{var i;for(i=0;i<o.length;i++)(o[i]>t||o[i]<l)&&this._setRowSelection(o[i],!1,e,null,!0);for(i=l;i<=t;i++)this._setRowSelection(i,!0,e,null,!0),this._getTableDomUtils().moveTableBodyRowTouchSelectionAffordanceBottom(i)}}},_handleScrollerMaxRowCount:function(){var t=this.getTranslatedString("msgScrollPolicyMaxCountSummary"),l=this.getTranslatedString("msgScrollPolicyMaxCountDetail");this._showInlineMessage(t,l,e.Message.SEVERITY_LEVEL.WARNING)},_handleScrollerScrollLeft:function(t){this._scrollLeft=t;var l=this._getTableDomUtils().getTableHeaderRow();l&&("rtl"===this._GetReadingDirection()?l.style[e.TableDomUtils.CSS_PROP._RIGHT]="-"+t+e.TableDomUtils.CSS_VAL._PX:l.style[e.TableDomUtils.CSS_PROP._LEFT]="-"+t+e.TableDomUtils.CSS_VAL._PX);var o=this._getTableDomUtils().getTableFooterRow();o&&("rtl"===this._GetReadingDirection()?o.style[e.TableDomUtils.CSS_PROP._RIGHT]="-"+t+e.TableDomUtils.CSS_VAL._PX:o.style[e.TableDomUtils.CSS_PROP._LEFT]="-"+t+e.TableDomUtils.CSS_VAL._PX)},_handleScrollerScrollTop:function(e){this._scrollTop=e},_handleSortTableHeaderColumn:function(e,t,l){this._clearSortedHeaderColumn(e);var o=this._getColumnDefs()[e],i=null==o.sortProperty?o.field:o.sortProperty;this._invokeDataSort(i,t,l),this._sortColumn=o,this._refreshSortTableHeaderColumn(i,t)},_hasEditableRow:function(){return!!this._isTableEditMode()&&null!==this._getEditableRowIdx()},_hasRowOrCellRendererOrTemplate:function(e){if(null!=this._getRowRenderer())return!0;var t=null,l=null,o=this._getColumnDefs();if(null!=e)t=this._getColumnRenderer(e,"cell"),l=this._getSlotTemplate(o[e][this._CELL_TEMPLATE]);else{var i,s=o.length;for(i=0;i<s&&null==(t=this._getColumnRenderer(i,"cell"))&&null==(l=this._getSlotTemplate(o[i][this._CELL_TEMPLATE]));i++);}return null!=t||null!=l},_hideInlineMessage:function(){if(this._inlineMessageShown){var t=this._getTableDomUtils().getTableInlineMessage();this._getTableDomUtils().getTableContainer().classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._WARNING),t.classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._WARNING),t.style[e.TableDomUtils.CSS_PROP._BOTTOM]="",t.style[e.TableDomUtils.CSS_PROP._DISPLAY]=e.TableDomUtils.CSS_VAL._NONE,this._inlineMessageShown=!1}},_hideNoDataMessage:function(){if(this._noDataMessageShown){var e=this._getTableDomUtils().getTableBodyMessageRow();null!=e&&t(e).remove(),this._noDataMessageShown=!1}},_hideStatusMessage:function(){this._showStatusTimeout&&(clearTimeout(this._showStatusTimeout),this._showStatusTimeout=null),this._statusMessageShown&&(this._getTableDomUtils().getTableStatusMessage().style[e.TableDomUtils.CSS_PROP._DISPLAY]=e.TableDomUtils.CSS_VAL._NONE,this._statusMessageShown=!1)},_hideTableHeaderColumnSortLink:function(l,o){if(this._getColumnDefs()[l].sortable==this._OPTION_ENABLED){var i=this._getTableDomUtils().getTableHeaderColumn(l),s=t(i).data("sorted");if(!o||null!=s&&s!=this._COLUMN_SORT_ORDER._DESCENDING){if(!o&&(null==s||s==this._COLUMN_SORT_ORDER._ASCENDING)){var a=i.querySelectorAll("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_LINK_CLASS);a.length>0&&((a=a[0]).classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED),a.classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._ENABLED),a.classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED))}}else{var n=i.querySelectorAll("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_LINK_CLASS);n.length>0&&((n=n[0]).classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED),n.classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._ENABLED),n.classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED))}}},_initFetch:function(t,l){t=t||{};var o=this,i=this._getData();return null==i||!e.DataProviderFeatureChecker.isIteratingDataProvider(i)||this._isPagingModelDataProvider()&&!l?null==i?this._queueTask(function(){return Promise.resolve()}):void 0:this._queueTask(function(){return o._getTableDomUtils().getScroller().scrollTop=0,i instanceof e.TableDataSourceAdapter&&(t.fetchType="init",o._isLoadMoreOnScroll()&&(t[o._CONST_OFFSET]=0)),o._invokeDataFetchRows(t,!0)})},_initTemplateEngine:function(){var t=this;this._queueTask(function(){try{var l=e.Config.__getTemplateEngine().then(function(e){t._templateEngine=e},function(t){e.Logger.warn(t)})}catch(t){e.Logger.warn(t),l=Promise.resolve(null)}return l})},_invokeDataFetchRows:function(t,l){!(t=t||{})[this._CONST_PAGESIZE]&&this._isLoadMoreOnScroll()?t[this._CONST_PAGESIZE]=this.options.scrollPolicyOptions.fetchSize:t[this._CONST_PAGESIZE]=-1;var o=this._getData();if(null!=o){var i=this;return new Promise(function(s,a){i._setDataWaitingState(),i._dataProviderAsyncIterator=o.fetchFirst(t)[Symbol.asyncIterator](),i._dataProviderAsyncIterator.next().then(function(t){var a=t[i._CONST_VALUE],n=a[i._CONST_DATA],r=a.metadata.map(function(e){return e[i._CONST_KEY]}),_=0;o instanceof e.TableDataSourceAdapter&&(_=o[i._CONST_OFFSET]);var S=0;i._isPagingModelDataProvider()&&(S=o.getStartItemIndex());var T,d=[],u=n.length;for(T=0;T<u;T++)d[T]=_+S+T;i._refreshAll({data:n,metadata:[],keys:r,indexes:d},_,l,l),i._clearDataWaitingState(),i._processFetchSort(a),i._isLoadMoreOnScroll()&&i._registerDomScroller(),i=null,s(t)},function(e){i._clearDataWaitingState();var t=i._getTableDomUtils().getTableBodyRows();null!=t&&0!=t.length||i._showNoDataMessage(),s(null)})})}return Promise.resolve(null)},_invokeDataSort:function(e,t,l){if(!this._getData())return null;this._showStatusMessage();var o=[],i={};i[this._CONST_ATTRIBUTE]=e,i.direction=t?this._COLUMN_SORT_ORDER._ASCENDING:this._COLUMN_SORT_ORDER._DESCENDING,o.push(i),this._trigger("sort",l,{header:o[0][this._CONST_ATTRIBUTE],direction:o[0].direction}),this._initFetch({sortCriteria:o},!0)},_isColumnMetadataUpdated:function(){if(null!=this._columnDefArray){var e=this._getColumnMetadata();if(this._columnDefArray.length!=e.length)return!0;var t,l,o=e.length;for(t=0;t<o;t++)for(l in e[t])if(e[t].hasOwnProperty(l)&&e[t][l]!=this._columnDefArray[t][l]&&("id"!=l||null==e[t][l]||0!=e[t][l].indexOf(this._COLUMN_HEADER_ID_PREFIX)||null==this._columnDefArray[t][l]||0!=this._columnDefArray[t][l].indexOf(this._COLUMN_HEADER_ID_PREFIX)))return!0;return!1}return!0},_isKeyboardKeyPressed:function(e){var t,l=this._getKeyboardKeys(),o=l.length;for(t=0;t<o;t++)if(l[t]==e)return!0;return!1},_isLoadMoreOnScroll:function(){return this.options.scrollPolicy==this._OPTION_SCROLL_POLICY._LOADMORE_ON_SCROLL},_isNodeEditable:function(e){return this._isNodeType(e,/^INPUT|TEXTAREA/)},_isNodeClickable:function(e){return this._isNodeType(e,/SELECT|OPTION|BUTTON|^A\b/)},_isNodeDraggable:function(e){return t(e).closest("[draggable='true']").length>0},_isNodeType:function(t,l){for(var o,i=this._getTableDomUtils().getTable();null!=t&&t!=i&&(o=t.nodeName)!=e.TableDomUtils.DOM_ELEMENT._TD&&o!=e.TableDomUtils.DOM_ELEMENT._TH;)if(3!=t.nodeType){var s=t.getAttribute(e.TableDomUtils.DOM_ATTR._TABINDEX);if(o.match(l)&&-1!=s)return!0;t=t.parentNode}else t=t.parentNode;return!1},_isPagingModelDataProvider:function(){var e=this._getData();return null!=e.getStartItemIndex&&null!==e.getStartItemIndex()&&e.getStartItemIndex()>=0},_isStatusMessageShown:function(){return this._statusMessageShown},_isTableActionableMode:function(){return this._tableActionableMode},_isTableEditMode:function(){return this.options.editMode==this._OPTION_EDIT_MODE._ROW_EDIT},_isTableFooterless:function(){var e,t,l,o=this._getColumnDefs(),i=o.length;for(e=0;e<i;e++){if(t=this._getColumnRenderer(e,"footer"),l=this._getSlotTemplate(o[e][this._FOOTER_TEMPLATE]),null!=t)return!1;if(null!=l)return!1}return!0},_isTableHeaderless:function(){var e,t,l=this._getColumnDefs(),o=l.length;for(e=0;e<o;e++)if(t=this._getSlotTemplate(l[e][this._HEADER_TEMPLATE]),null!=l[e].headerText||null!=l[e].headerStyle||null!=l[e].sortable&&l[e].sortable!=this._OPTION_DISABLED||null!=l[e].sortProperty||null!=l[e].headerRenderer||null!=t)return!1;return!0},_isTableHeaderColumnsRendered:function(){return 1==this._renderedTableHeaderColumns},_isTableRefreshNeeded:function(l,o){var i=this._cachedOptions,s=!1;return"contextMenu"==l&&o=="#"+this._getTableDomUtils().getTableId()+"_contextmenu"?s=!1:"columns"!=l||this._isColumnMetadataUpdated()?"selection"==l||"currentRow"==l||e.Object.compareValues(o,i[l])||(s=!0):s=!1,this._cachedOptions=t.extend(!0,{},this.options),s},_isTableSortable:function(){var e,t=this._getColumnDefs(),l=t.length;for(e=0;e<l;e++)if(t[e].sortable==this._OPTION_ENABLED)return!0;return!1},_isTableColumnsResizable:function(){var e,t=this._getColumnDefs(),l=t.length;for(e=0;e<l;e++)if(t[e].resizable==this._OPTION_ENABLED)return!0;return!1},_isTableColumnsWidthSet:function(){var e,t=this._getColumnDefs(),l=t.length;for(e=0;e<l;e++)if(null!==t[e].width)return!0;return!1},_isTouchDevice:function(){if(null==this._isTouch){var e=navigator.userAgent.toLowerCase();-1!=e.indexOf("mobile")||-1!=e.indexOf("android")?this._isTouch=!0:this._isTouch=!1}return this._isTouch},_processFetchSort:function(t){try{var l=this,o=t.fetchParameters,i=this._getColumnDefs(),s=o[this._CONST_SORTCRITERIA];if(null!=s&&s.length>0){var a=s[0];this._refreshSortTableHeaderColumn(a.attribute,a.direction==this._COLUMN_SORT_ORDER._ASCENDING);var n=this.options.selection;if(null!=n){var r=!1;if(n.length>1)r=!0;else if(null!=n[0]){var _=n[0][this._CONST_STARTINDEX],S=n[0][this._CONST_ENDINDEX];e.Object.compareValues(_,S)||null==S||(r=!0)}r&&(this._setSelection(null),this.option("selection",[],{_context:{writeback:!0,internalSet:!0}}))}this._setCurrentRow(this.options.currentRow,null,!1);var T,d,u,h=null,c=i.length;for(T=0;T<c;T++)if(u=null==(d=i[T]).sortProperty?d.field:d.sortProperty,a.attribute==u){h=T;break}null!=h&&setTimeout(function(){l._scrollColumnIntoViewport(h),l=null,h=null},0)}else this._clearSortedHeaderColumn()}catch(t){e.Logger.error(t)}},_processSlottedChildren:function(){var l=this._getTableDomUtils().getTableBottomSlot();null!=l&&t(l).remove();var o=e.BaseCustomElementBridge.getSlotMap(this._getRootElement());for(var i in o)if(o.hasOwnProperty(i)&&i.length>0&&"bottom"===i){var s,a=o[i];if(null!=a)for(l=this._getTableDomUtils().createTableBottomSlot(),s=0;s<a.length;s++)l.appendChild(a[s])}},_refreshAll:function(t,l,o,i){if((this._isColumnMetadataUpdated()||!this._isTableHeaderColumnsRendered()&&!this._isTableHeaderless())&&(this._clearCachedMetadata(),this._refreshTableHeader(),null!=this._sortColumn)){var s,a,n=!1,r=this._getColumnDefs();if(null!=r){var _=r.length;for(s=0;s<_;s++)if(a=r[s],e.Object.compareValues(a,this._sortColumn)){n=!0;break}n||this._initFetch(null,!0)}}this._refreshTableFooter(),this._refreshTableBody(t,l,o,i)},_refreshSortTableHeaderColumn:function(l,o){var i,s,a=this._getColumnDefs(),n=null,r=a.length;for(i=0;i<r;i++)if(l==(null==(s=a[i]).sortProperty?s.field:s.sortProperty)){n=i;break}if(null!=n){this._clearSortedHeaderColumn(n);var _=this._getTableDomUtils().getTableHeaderColumn(n);if(null!=_){var S=t(_).data("sorted");if(o&&S!=this._COLUMN_SORT_ORDER._ASCENDING){t(_).data("sorted",this._COLUMN_SORT_ORDER._ASCENDING);var T=_.querySelectorAll("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_LINK_CLASS);T.length>0&&((T=T[0]).classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._ENABLED),T.classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED)),(u=_.querySelectorAll("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_CLASS)).length>0&&(u=u[0]).classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED),(d=_.querySelectorAll("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_CLASS)).length>0&&(d=d[0]).classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED),this._hideTableHeaderColumnSortLink(n,!o)}else if(!o&&S!=this._COLUMN_SORT_ORDER._DESCENDING){t(_).data("sorted",this._COLUMN_SORT_ORDER._DESCENDING);var d,u,h=_.querySelectorAll("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_LINK_CLASS);h.length>0&&((h=h[0]).classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._ENABLED),h.classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED)),(d=_.querySelectorAll("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_CLASS)).length>0&&(d=d[0]).classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED),(u=_.querySelectorAll("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_CLASS)).length>0&&(u=u[0]).classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED)}}}},_refreshTableBody:function(l,o,i,s){var a=this._getTableDomUtils().getTableBody();if(null!=a){var n,r,_=this._getRowIdxRowArray(l,o),S=t.contains(a,document.activeElement),T=!1;if(0==o)S&&(T=!0),this._getTableDomUtils().removeAllTableBodyRows();else if(null!=(n=this._getTableDomUtils().getTableBodyRows())&&n.length>0)for(d=n.length-1;d>=o;d--)S&&null!=(r=this._getTableDomUtils().getTableBodyRow(d))&&t.contains(r,document.activeElement)&&(T=!0,S=!1),this._getTableDomUtils().removeTableBodyRow(d);if(T&&this._getTableDomUtils().getTable().focus(),this._getTableDomUtils().clearCachedDomRowData(),this._hideNoDataMessage(),n=a.children,0!=_.length||null!=n&&0!=n.length){var d,u,h,c=document.createDocumentFragment(),m=_.length;for(d=0;d<m;d++)u=_[d].row,h=_[d].rowIdx,null!=u&&(r=this._getTableDomUtils().createTableBodyRow(h,u[this._CONST_KEY]),this._getTableDomUtils().styleTableBodyRow(r,!0),this._getTableDomUtils().insertTableBodyRow(h,r,u,c),this._refreshTableBodyRow(h,u,r,c,o,!0));a.appendChild(c),this._getTableDomUtils().clearCachedDomRowData(),this._hasRowOrCellRendererOrTemplate()&&(this._getTableDomUtils().refreshTableDimensions(null,null,i,s),e.Components.subtreeAttached(a))}else this._showNoDataMessage()}},_refreshTableBodyRow:function(l,o,i,s,a,n){this.options;var r=this._getRowRenderer(),_=(this._getColumnDefs(),this._getTableDomUtils().getTableBody());(isNaN(l)||l<0)&&e.Logger.error("Error: Invalid rowIdx value: "+l);var S=this._getTableDomUtils().hashCode(o[this._CONST_KEY]);if(null==i){if(!(i=this._getTableDomUtils().getTableBodyRow(l)))return null;t(i).empty(),this._getTableDomUtils().createTableBodyCellAccSelect(l,o[this._CONST_KEY],S,i,!0)}this._hideNoDataMessage();var T=this._getCurrentRow();T=T||{};var d=e.TableRendererUtils.getRendererContextObject(this,i,{row:o,isCurrentRow:T.rowIndex==l}),u={rowContext:d,row:o[this._CONST_DATA],componentElement:d.componentElement,parentElement:d.parentElement,data:o[this._CONST_DATA]};if(null!=r){var h=r(u);null!=h?i.appendChild(h):(null==s?i=_.children[l]:(a=null==a?0:a,i=s.children?s.children[l-a]:t(s).children()[l-a]),this._getTableDomUtils().clearCachedDomRowData(),this._getTableDomUtils().setTableBodyRowAttributes(o,i),this._getTableDomUtils().styleTableBodyRow(i,!1)),this._getTableDomUtils().createTableBodyCellAccSelect(l,o[this._CONST_KEY],S,i,!1);var c,m,C,E,D=i.getElementsByTagName(e.TableDomUtils.DOM_ELEMENT._TD),b=D.length;for(c=1;c<b;c++)m=D[c],this._getTableDomUtils().setTableBodyCellAttributes(l,o[this._CONST_KEY],S,c-1,m),this._getTableDomUtils().styleTableBodyCell(c-1,m,!1);if(null!=this._columnsDestMap)for(c=0;c<this._columnsDestMap.length-1;c++)this._columnsDestMap[c]>c&&(C=D[this._columnsDestMap[c]+1],E=D[c+1],C.parentNode.insertBefore(C,E),D=i.getElementsByTagName(e.TableDomUtils.DOM_ELEMENT._TD))}else e.TableRendererUtils.tableBodyRowDefaultRenderer(this,l,o,u);return i},_refreshTableFooter:function(){var l=this._getColumnDefs(),o=this._getTableDomUtils().getTableFooter();if(!o){if(this._isTableFooterless())return;o=this._getTableDomUtils().createTableFooter(),this._getTableDomUtils().styleTableFooter(o)}var i=this._getTableDomUtils().getTableFooterRow();if(this._hasFooterTemplate&&(this._cleanTemplateNodes(i),this._hasFooterTemplate=!1),t(i).empty(),l&&l.length>0){this._getTableDomUtils().createTableFooterAccSelect(i);var s,a,n,r,_,S=l.length;for(s=0;s<S;s++)if(a=l[s],n=this._getColumnRenderer(s,"footer"),r=this._getTableDomUtils().createTableFooterCell(s,this._getColumnSelectionMode()),this._getTableDomUtils().styleTableFooterCell(s,r),this._getTableDomUtils().insertTableFooterCell(s,r),n){var T=e.TableRendererUtils.getRendererContextObject(this,r,{});null!=(_=n({footerContext:T,columnIndex:s,componentElement:T.componentElement,parentElement:T.parentElement}))?(r.empty(),r.appendChild(_)):(r=t(i).children(":not(."+e.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS+")")[s],this._getTableDomUtils().styleTableFooterCell(s,r,this._getColumnSelectionMode()))}else{var d=this._getSlotTemplate(a[this._FOOTER_TEMPLATE]);if(d){var u=this._getRootElement(),h=this._getTemplateEngine();if(null!=h){var c=e.TableRendererUtils.getSlotTemplateContextObject(this),m=h.execute(u,d,c,this.options.as);m instanceof Array||(m=[m]),m.map(function(e){r.appendChild(e)}),this._hasFooterTemplate=!0}}}}},_refreshTableHeader:function(){var l=this,o=this._getColumnDefs(),i=this._getTableDomUtils().getTableHeader();if(!i){if(this._isTableHeaderless())return;i=this._getTableDomUtils().createTableHeader(),this._getTableDomUtils().styleTableHeader(i)}var s=this._getTableDomUtils().getTableHeaderRow();if(this._unregisterChildStateListeners(s),this._hasHeaderTemplate&&(this._cleanTemplateNodes(s),this._hasHeaderTemplate=!1),t(s).empty(),o&&o.length>0){var a=this._getTableDomUtils().createTableHeaderAccSelectRowColumn();s.appendChild(a);var n,r,_,S,T,d,u,h=o.length;for(n=0;n<h;n++){if(r=o[n],_=this._getColumnRenderer(n,"header"),S=this._getTableDomUtils().createTableHeaderColumn(n,this._getColumnSelectionMode()),_)u={headerContext:d=e.TableRendererUtils.getRendererContextObject(this,S,{}),columnIndex:n,data:r.headerText,componentElement:d.componentElement,parentElement:d.parentElement},r.sortable==e.TableDomUtils._OPTION_ENABLED?u.columnHeaderSortableIconRenderer=function(t,o){e.TableRendererUtils.columnHeaderSortableIconRenderer(l,this,t,o)}:u.columnHeaderDefaultRenderer=function(t,o){e.TableRendererUtils.columnHeaderDefaultRenderer(l,this,t,o)},null!=(T=_(u))?(t(S).empty(),t(S).append(T)):(S=t(s).children(":not(."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ACC_SELECT_ROW_CLASS+")")[n],this._getTableDomUtils().setTableHeaderColumnAttributes(n,S),this._getTableDomUtils().styleTableHeaderColumn(n,S,this._getColumnSelectionMode(),!1));else{var c=this._getSlotTemplate(r[this._HEADER_TEMPLATE]);if(c){var m=this._getRootElement(),C=this._getTemplateEngine();if(null!=C){S&&t(S).empty();var E=e.TableRendererUtils.getHeaderSlotTemplateContextObject(this,r.headerText,n),D=C.execute(m,c,E,this.options.as);D instanceof Array||(D=[D]),D.map(function(e){S.appendChild(e)}),this._hasHeaderTemplate=!0}}}this._getTableDomUtils().createTableHeaderColumnAccSelect(n,this._getColumnSelectionMode())}this._renderedTableHeaderColumns=!0}},_refreshTableStatusMessage:function(){var e=this._getTableDomUtils().getTableStatusMessage();null!=e&&t(e).remove(),this._getTableDomUtils().createTableStatusMessage()},_registerCustomEvents:function(){var e=t.event.special;e.ojtablebeforecurrentrow={handle:function(e){return e.handleObj.handler.apply(this,[e,arguments[1]])}},e.ojtablesort={handle:function(e){return e.handleObj.handler.apply(this,[e,arguments[1]])}}},_registerDataSourceEventListeners:function(){var e=this._getData();if(null!=e){var t;this._unregisterDataSourceEventListeners(),this._dataProviderEventHandlers=[],this._dataProviderEventHandlers.push({eventType:"mutate",eventHandler:this._handleDataRowMutate.bind(this)}),this._dataProviderEventHandlers.push({eventType:"refresh",eventHandler:this._handleDataRefresh.bind(this)});var l,o=this._dataProviderEventHandlers.length;for(t=0;t<o;t++)(l=e.addEventListener(this._dataProviderEventHandlers[t].eventType,this._dataProviderEventHandlers[t].eventHandler))&&(this._dataProviderEventHandlers[t].eventHandler=l)}},_registerDomEventListeners:function(){null!=this._getTableDomUtils().getScroller()&&t(this._getTableDomUtils().getScroller()).scroll(function(e){this._handleScrollerScrollLeft(this._getTableDomUtils().getScrollLeft(e.target)),this._handleScrollerScrollTop(e.target.scrollTop)}.bind(this))},_registerDomScroller:function(){var t=this;null!=this._domScroller&&this._domScroller.destroy(),this._domScrollerSuccessFunc=function(e){if(t._clearDataWaitingState(),null!=e)if(e.maxCountLimit)t._handleScrollerMaxRowCount();else{var l=e[t._CONST_VALUE],o=l[t._CONST_DATA],i=l.metadata.map(function(e){return e[t._CONST_KEY]});i=i.filter(function(e,l){return null===t._getRowIdxForRowKey(e)||(o.splice(l,1),!1)}),t._queueTask(function(){var e,l=this._getTableDomUtils().getTableBodyRows(),s=null!=l?l.length:0,a=[];for(e=0;e<o.length;e++)a[e]=s+e;t._refreshAll({data:o,keys:i,indexes:a},s)})}};var l=this._getTableDomUtils().getTableBodyRows(),o=null!=l?l.length:0;this._domScroller=new e.DomScroller(this._getTableDomUtils().getScroller(),this._getData(),{asyncIterator:this._dataProviderAsyncIterator,fetchSize:this.options.scrollPolicyOptions.fetchSize,maxCount:this.options.scrollPolicyOptions.maxCount,initialRowCount:o,success:this._domScrollerSuccessFunc.bind(this),request:this._handleDataFetchStart.bind(this),fetchTrigger:1})},_registerResizeListener:function(){var l=this._getTableDomUtils().getTableContainer();if(!this._resizeListener){var o=this;this._resizeListener=function(l,i){if(e.Context.getContext(o.element[0]).getBusyContext().isReady()){var s=t(o._getTableDomUtils().getTableContainer()).outerHeight(),a=t(o._getTableDomUtils().getTableContainer()).outerWidth();o._getTableDomUtils().refreshTableDimensions(a,s)}}}this._isResizeListenerAdded||(e.DomUtils.addResizeListener(l,this._resizeListener,50),this._isResizeListenerAdded=!0)},_removeKeyboardKey:function(e){var t,l=this._getKeyboardKeys(),o=l.length;for(t=0;t<o;t++)l[t]==e&&l.splice(t,1)},_scrollColumnIntoViewport:function(e){var l="rtl"===this._GetReadingDirection(),o=this._getTableDomUtils().getTableBody(),i=this._getTableDomUtils().getTableHeaderColumn(e);if(i){var s=this._getTableDomUtils().getScrollbarWidth(),a=i.getBoundingClientRect(),n=o.getBoundingClientRect(),r=!1;if(l){if(a.left<n.left+s){var _=n.left-a.left+s;this._getTableDomUtils()._isIE()||(_*=-1),t(o).scrollLeft(t(o).scrollLeft()+_),r=!0}a.right>n.right&&!r&&(_=a.right-n.right,this._getTableDomUtils()._isIE()||(_*=-1),t(o).scrollLeft(t(o).scrollLeft()-_))}else a.left<n.left&&(_=n.left-a.left,t(o).scrollLeft(t(o).scrollLeft()-_),r=!0),a.right>n.right-s&&!r&&(_=a.right-n.right+s,t(o).scrollLeft(t(o).scrollLeft()+_))}},_scrollRowIntoViewport:function(e){var l=this._getTableDomUtils().getTableBodyRow(e),o=this._getTableDomUtils().getScrollbarHeight(),i=l.getBoundingClientRect(),s=this._getTableDomUtils().getScroller(),a=s.getBoundingClientRect(),n=!1;if(i.bottom>a.bottom-o){var r=i.bottom-a.bottom+o;t(s).scrollTop(t(s).scrollTop()+r),n=!0}i.top<a.top&&!n&&(r=a.top-i.top,t(s).scrollTop(t(s).scrollTop()-r))},_setCurrentRow:function(t,l,o){var i,s,a,n,r=this._currentRow,_=!0;if(null==t){if(null!=r){try{_=this._trigger("beforeCurrentRow",l,{currentRow:null,previousCurrentRow:this._currentRow})}catch(t){var S=this._LOGGER_MSG._ERR_PRECURRENTROW_ERROR_SUMMARY,T=e.Translations.applyParameters(this._LOGGER_MSG._ERR_PRECURRENTROW_ERROR_DETAIL,{error:t.toString()});return e.Logger.info(S+"\n"+T),!1}if(!_)return!1;if(s=r.rowIndex,a=this._getRowKeyForDataSourceRowIndex(s),n=this._getRowIdxForRowKey(a),!1===this._setTableEditable(!1,!1,0,!0,l)){this._currentRow=r;var d=document.activeElement,u=this._getTableDomUtils().getElementColumnIdx(d),h=this;return this._queueTask(function(){var e=n,t=u;null!=e&&null!=t?setTimeout(function(){h._setCellFocus(e,t)},0):null!=e&&setTimeout(function(){h._setRowFocus(e,!0,!1,null,null)},0)}),!1}this._currentRow=null,this.option("currentRow",null,{_context:{writeback:!0,originalEvent:l,internalSet:!0}}),null==l&&this._setRowFocus(-1,!0,!1,null,l),null!=(i=this._getTableDomUtils().getTableBodyRow(n))&&i.classList.remove(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_CURRENT_ROW_CLASS)}return!0}var c,m=this._getData(),C=t.rowIndex,E=t.rowKey;if(null==E&&(E=this._getRowKeyForDataSourceRowIndex(C)),t={rowIndex:C=this._getDataSourceRowIndexForRowKey(E),rowKey:E},-1!=(c=this._getRowIdxForRowKey(E))&&(!m||c<-1||null===c||null===E)){if(S=this._LOGGER_MSG._ERR_CURRENTROW_UNAVAILABLE_INDEX_SUMMARY,T=e.Translations.applyParameters(this._LOGGER_MSG._ERR_CURRENTROW_UNAVAILABLE_INDEX_DETAIL,{rowIdx:c}),o)throw new Error(S+"\n"+T);return e.Logger.info(S+"\n"+T),!1}var D=this._getFocusedRowIdx(),b=!e.Object.compareValues(this._currentRow,t);if(b){try{_=this._trigger("beforeCurrentRow",l,{currentRow:{rowIndex:C,rowKey:E},previousCurrentRow:this._currentRow})}catch(t){return S=this._LOGGER_MSG._ERR_PRECURRENTROW_ERROR_SUMMARY,T=e.Translations.applyParameters(this._LOGGER_MSG._ERR_PRECURRENTROW_ERROR_DETAIL,{error:t.toString()}),e.Logger.info(S+"\n"+T),!1}if(!_)return!1;if(this._currentRow={rowIndex:C,rowKey:E},null!=r&&(s=r.rowIndex,a=this._getRowKeyForDataSourceRowIndex(s),n=this._getRowIdxForRowKey(a)),!1===this._setTableEditable(!1,!1,0,!0,l))return this._currentRow=r,d=document.activeElement,u=this._getTableDomUtils().getElementColumnIdx(d),h=this,this._queueTask(function(){var e=n,t=u;null!=e&&null!=t?setTimeout(function(){h._setCellFocus(e,t)},0):null!=e&&setTimeout(function(){h._setRowFocus(e,!0,!1,null,null)},0)}),!1;this.option("currentRow",this._currentRow,{_context:{writeback:!0,originalEvent:l,internalSet:!0}}),null!=(i=this._getTableDomUtils().getTableBodyRow(c))&&i.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_CURRENT_ROW_CLASS),null!=r&&null!=(i=this._getTableDomUtils().getTableBodyRow(n))&&i.classList.remove(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_CURRENT_ROW_CLASS)}return(b||D!=t.rowIndex)&&null==l&&this._setRowFocus(c,!0,!1,null,l),!0},_setDataWaitingState:function(){this._showStatusMessage(),this._hideNoDataMessage(),this._dataFetching=!0,this._dataResolveFunc||(this._dataResolveFunc=this._addComponentBusyState("is waiting for data."))},_setCellFocus:function(e,l){var o=this._getTableDomUtils().getTableBodyCell(e,l);if(!o)return!1;var i,s=!1,a=o.querySelectorAll("*");for(i=0;i<a.length;i++)s||t(a[i]).is(":focusable")&&(t(a[i]).focus(),s=t(a[i]).is(":focus")||a[i]==document.activeElement);return s},_setCellInRowFocus:function(e,t,l){if(!this._setCellFocus(e,t)){var o=this._getTableDomUtils().getTableBodyCells(e);if(o){var i,s,a=o.length;for(i=0;i<a;i++)if(s=i,l||(s=a-i-1),this._setCellFocus(e,s))return}}},_setComponentNotReady:function(){this._readyResolveFunc||(this._readyResolveFunc=this._addComponentBusyState("is being loaded."))},_setComponentReady:function(){this._readyResolveFunc&&(this._readyResolveFunc(),this._readyResolveFunc=null)},_setEditableRowIdx:function(e){this._editableRowKey=this._getRowKeyForRowIdx(e),this._editableRowIdx=e},_setFocusInHandler:function(e){this._focusInHandler=e},_setFocusOutHandler:function(e){this._focusOutHandler=e},_setHeaderColumnFocus:function(e,t,l,o,i){var s=null;if(null!=o&&(s=this._getEventTargetElement(o)),t){this._clearFocusedRow(!0),l&&this._clearSelectedRows();var a=this._getFocusedHeaderColumnIdx(),n=this._getColumnDefs();if(null!==i)if(i){for(;e<=n.length-1&&!((r=this._getTableDomUtils().getTableHeaderColumn(e))&&r.clientWidth>0);)e++;e>n.length-1&&(e=null!==a?a:n.length-1)}else{for(;e>=0;){var r;if((r=this._getTableDomUtils().getTableHeaderColumn(e))&&r.clientWidth>0)break;e--}e<0&&(e=null!==a?a:0)}null!==a&&a!=e&&this._setHeaderColumnFocus(a,!1,!1,o,null),this._scrollColumnIntoViewport(e),this._activeColumnIndex=e}this._setHeaderColumnState(e,{focused:t},s)},_setHeaderColumnSelection:function(t,l,o,i,s,a){if(this._getColumnSelectionMode()==this._OPTION_SELECTION_MODES._SINGLE||this._getColumnSelectionMode()==this._OPTION_SELECTION_MODES._MULTIPLE){if((isNaN(t)||t<0)&&e.Logger.error("Error: Invalid column selection value: "+t),!a&&"true"==new String(this.options.selectionRequired).toLowerCase()&&!l){var n=this._getSelectedHeaderColumnIdxs();if(null!=n&&1==n.length)return}this._getColumnSelectionMode()==this._OPTION_SELECTION_MODES._SINGLE&&l&&this._clearSelectedHeaderColumns(),this._setHeaderColumnState(t,{selected:l},o,i),this._setLastHeaderColumnSelection(t,l),this._getTableDomUtils().getTableHeaderColumnAccSelect(t).getElementsByClassName(e.TableDomUtils.CSS_CLASSES._CHECKBOX_ACC_SELECT_COLUMN_CLASS)[0].checked=l}if(s){var r=this._getSelection();this.option("selection",r,{_context:{writeback:!0,internalSet:!0}}),l&&this.option("firstSelectedRow",{key:null,data:null},{_context:{writeback:!0,internalSet:!0}})}},_setHeaderColumnState:function(l,o,i,s){var a=this._getTableDomUtils().getTableHeaderColumn(l);if(a){var n=o.focused,r=o.selected;null!=r&&a.classList.contains(e.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)!=r&&(r?a.classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED):a.classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)),null!=n&&(n?(this._focusInHandler(t(a)),this._showTableHeaderColumnSortLink(l)):(this._focusOutHandler(t(a)),this._hideTableHeaderColumnSortLink(l,!0),this._hideTableHeaderColumnSortLink(l,!1))),this._updateHeaderColumnStateCellsClass(l)}},_setLastHeaderColumnSelection:function(e,t){this._lastSelectedColumnIdxArray||(this._lastSelectedColumnIdxArray=[]);var l,o=this._lastSelectedColumnIdxArray.length;for(l=0;l<o;l++)if(this._lastSelectedColumnIdxArray[l]==e){this._lastSelectedColumnIdxArray.splice(l,1);break}t&&this._lastSelectedColumnIdxArray.push(e)},_setLastRowSelection:function(e,t){this._lastSelectedRowIdxArray||(this._lastSelectedRowIdxArray=[]);var l,o=this._lastSelectedRowIdxArray.length;for(l=0;l<o;l++)if(this._lastSelectedRowIdxArray[l]==e){this._lastSelectedRowIdxArray.splice(l,1);break}t&&this._lastSelectedRowIdxArray.push(e)},_setNextRowEditable:function(e,t){var l=this._getTableDomUtils().getTableBodyRows(),o=null!=l?l.length:0,i=this._getEditableRowIdx();i>=0&&i<o-1?(this._setTableEditable(!1,!1,e,!0,t),this._setCurrentRow({rowIndex:i+1},t,!1),this._setTableEditable(!0,!1,e,!0,t)):i===o-1&&(this._setTableEditable(!1,!1,e,!0,t),this._getTableDomUtils().getTable().focus())},_setPreviousRowEditable:function(e,t){var l=this._getEditableRowIdx();l>=1?(this._setTableEditable(!1,!1,e,!1,t),this._setCurrentRow({rowIndex:l-1},t,!1),this._setTableEditable(!0,!1,e,!1,t)):0===l&&(this._setTableEditable(!1,!1,e,!1,t),this._getTableDomUtils().getTable().focus())},_setRowFocus:function(e,l,o,i,s){if(-1==e)return null!=(n=this._getFocusedRowIdx())&&this._setRowFocus(n,!1,o,null,null),!(o&&!this._setCurrentRow(null,s,!1));var a=this._getTableDomUtils().getTableBodyRow(e);if(!a)return!1;if(l){var n;if(null!=(n=this._getFocusedRowIdx())&&n!=e&&this._setRowFocus(n,!1,o,i,null),o){var r=this._getRowKeyForRowIdx(e);if(!this._setCurrentRow({rowKey:r},s,!1))return!1}this._focusInHandler(t(a)),this._scrollRowIntoViewport(e),this._updateRowStateCellsClass(e,{focused:!0,hover:!1}),this._clearFocusedHeaderColumn(),this._clearSelectedHeaderColumns(),this._setTableActionableMode(!1)}else this._focusOutHandler(t(a)),this._updateRowStateCellsClass(e,{focused:!1});return!0},_setRowSelection:function(t,l,o,i,s,a){if(this._getRowSelectionMode()==this._OPTION_SELECTION_MODES._SINGLE||this._getRowSelectionMode()==this._OPTION_SELECTION_MODES._MULTIPLE){if((isNaN(t)||t<0)&&e.Logger.error("Error: Invalid row selection value: "+t),!a&&"true"==new String(this.options.selectionRequired).toLowerCase()&&!l){var n=this._getSelectedRowIdxs();if(null!=n&&1==n.length)return}this._getRowSelectionMode()==this._OPTION_SELECTION_MODES._SINGLE&&l&&this._clearSelectedRows();var r=this._getTableDomUtils().getTableBodyRow(t);if(null!=r){var _=!1;if(r.classList.contains(e.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)!=l){l?r.classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED):r.classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED),_=!0;var S=this.options.dnd.drag;S&&("rows"===S||S.rows)&&(r.draggable=l)}if(_&&(l?this._updateRowStateCellsClass(t,{hover:!1,focused:!1,selected:!0}):this._updateRowStateCellsClass(t,{selected:!1})),this._setLastRowSelection(t,l),this._getTableDomUtils().getTableBodyCellAccSelect(r).getElementsByClassName(e.TableDomUtils.CSS_CLASSES._CHECKBOX_ACC_SELECT_ROW_CLASS)[0].checked=l,s){var T=this._getSelection();if(this.option("selection",T,{_context:{writeback:!0,internalSet:!0}}),null!=T&&T.length>0){var d=T[0].startKey;if(null!=d&&null!=d[this._CONST_ROW]){var u=this.getDataForVisibleRow(this._getRowIdxForRowKey(d[this._CONST_ROW]));if(u)return void this.option("firstSelectedRow",{key:u[this._CONST_KEY],data:u[this._CONST_DATA]},{_context:{writeback:!0,internalSet:!0}})}}this.option("firstSelectedRow",{key:null,data:null},{_context:{writeback:!0,internalSet:!0}})}}}},_setSelection:function(t){if(null==t)return this._clearSelectedRows(),void this._clearSelectedHeaderColumns();var l,o,i,s,a,n,r,_,S,T,d,u,h=t.length;for(l=0;l<h;l++){if(null==(i=t[l]).startKey&&null==i[this._CONST_STARTINDEX]||null==i.endKey&&null==i[this._CONST_ENDINDEX])return e.Logger.error("Error: Invalid range object in selection. Both start and end objects must be specified"),null;if(s=null,a=null,n=null,r=null,_=null,S=null,T=null,d=null,u=!1,null!=i.startKey&&null!=i.startKey[this._CONST_ROW]&&(n=this._getDataSourceRowIndexForRowKey(i.startKey[this._CONST_ROW]),null!=i[this._CONST_STARTINDEX]&&null!=i[this._CONST_STARTINDEX][this._CONST_ROW]&&n!=i[this._CONST_STARTINDEX][this._CONST_ROW]&&(u=!0)),null!=i.endKey&&null!=i.endKey[this._CONST_ROW]&&(r=this._getDataSourceRowIndexForRowKey(i.endKey[this._CONST_ROW]),null!=i[this._CONST_ENDINDEX]&&null!=i[this._CONST_ENDINDEX][this._CONST_ROW]&&r!=i[this._CONST_ENDINDEX][this._CONST_ROW]&&(u=!0)),null!=i.startKey&&null!=i.startKey[this._CONST_COLUMN]&&(T=this._getColumnIdxForColumnKey(i.startKey[this._CONST_COLUMN]),null!=i[this._CONST_STARTINDEX]&&null!=i[this._CONST_STARTINDEX][this._CONST_COLUMN]&&T!=i[this._CONST_STARTINDEX][this._CONST_COLUMN]&&(u=!0)),null!=i.endKey&&null!=i.endKey[this._CONST_COLUMN]&&(d=this._getColumnIdxForColumnKey(i.endKey[this._CONST_COLUMN]),null!=i[this._CONST_ENDINDEX]&&null!=i[this._CONST_ENDINDEX][this._CONST_COLUMN]&&d!=i[this._CONST_ENDINDEX][this._CONST_COLUMN]&&(u=!0)),null==n&&null!=i[this._CONST_STARTINDEX]&&(n=i[this._CONST_STARTINDEX][this._CONST_ROW]),null==r&&null!=i[this._CONST_ENDINDEX]&&(r=i[this._CONST_ENDINDEX][this._CONST_ROW]),null==T&&null!=i[this._CONST_STARTINDEX]&&(T=i[this._CONST_STARTINDEX][this._CONST_COLUMN]),null==d&&null!=i[this._CONST_ENDINDEX]&&(d=i[this._CONST_ENDINDEX][this._CONST_COLUMN]),null!=n&&null!=r&&null!=T&&null!=d)return e.Logger.error("Error: Invalid range object in selection - Can only support row or column selection. Not both"),null;if(null!=n&&n>=0&&null!=r&&r>=0)for(s=this._getRowKeyForDataSourceRowIndex(n),a=this._getRowKeyForDataSourceRowIndex(r),_=this._getRowIdxForRowKey(s),S=this._getRowIdxForRowKey(a),o=_;o<=S;o++)try{this._setRowSelection(o,!0,null,null,u)}catch(t){e.Logger.error("Error: "+t)}else{if(null==T||null==d)return e.Logger.error("Error: Invalid range object in selection - \n start row: "+n+"\nend row: "+r+"\nstart column: "+T+"\nend column: "+d),null;for(o=T;o<=d;o++)try{this._setHeaderColumnSelection(o,!0,null,null,u)}catch(t){e.Logger.error("Error: "+t)}}}},_setSelectionDefault:function(){if("true"==new String(this.options.selectionRequired).toLowerCase())if(this._getRowSelectionMode()==this._OPTION_SELECTION_MODES._MULTIPLE||this._getRowSelectionMode()==this._OPTION_SELECTION_MODES._SINGLE){var e=this._getSelectedRowIdxs();null!=e&&0!=e.length||this._setRowSelection(0,!0,null,null,!0)}else if(this._getColumnSelectionMode()==this._OPTION_SELECTION_MODES._MULTIPLE||this._getColumnSelectionMode()==this._OPTION_SELECTION_MODES._SINGLE){var t=this._getSelectedHeaderColumnIdxs();null!=t&&0!=t.length||this._setHeaderColumnSelection(0,!0,null,null,!0)}},_setTableActionableMode:function(e){if(this._isTableEditMode())this._tableActionableMode=!1;else if(!(null!=this._tableActionableMode&&this._tableActionableMode===e||null==this._tableActionableMode&&!1===e))if(e){var l=this._getFocusedRowIdx(),o=this._getFocusedHeaderColumnIdx();if(null!=l||null!=o){var i=null;if(null!=(i=null!=l?this._getTableDomUtils().getTableBodyRow(l):this._getTableDomUtils().getTableHeaderColumn(o))){var s=this._getTabbableElements(i);null!=s&&s.length>0&&(this._tableActionableMode=e,s[0].focus())}}}else{this._tableActionableMode=e;var a=this._getTableDomUtils().getTableBody();t.contains(a,document.activeElement)&&this._getTableDomUtils().getTable().focus()}},_setTableEditable:function(t,l,o,i,s){if(this._isTableEditMode()){var a=this._getCurrentRow();if(null!=a){var n,r=a.rowKey,_=this._getRowIdxForRowKey(r);try{if(t&&!this._hasEditableRow()){var S=this._getTableDomUtils().getTableBodyRow(_),T=e.TableRendererUtils.getRendererContextObject(this,S,{row:{key:r,index:a.rowIndex},isCurrentRow:!0});n=this._trigger("beforeRowEdit",s,{rowContext:T})}else{if(t||!this._hasEditableRow())return;S=this._getTableDomUtils().getTableBodyRow(this._getEditableRowIdx()),r=this._getRowKeyForRowIdx(this._getEditableRowIdx()),T=e.TableRendererUtils.getRendererContextObject(this,S,{row:{key:r,index:this._getDataSourceRowIndexForRowKey(r)},isCurrentRow:!0}),n=this._trigger("beforeRowEditEnd",s,{rowContext:T,cancelEdit:l})}}catch(e){return!1}if(!n)return!1;var d=this._getEditableRowIdx(),u=this;t?(this._setEditableRowIdx(_),this._refreshRow(_,!1).then(function(){u._queueTask(function(){var e=_,t=o,l=i;u._setCellInRowFocus(e,t,l)})})):(this._setEditableRowIdx(null),this._getTableDomUtils().getTable().focus()),null!=d&&null!=this._getTableDomUtils().getTableBodyRow(d)&&this._refreshRow(d,!1).then(function(){u._queueTask(function(){var t=d,l=this._getTableDomUtils().getTableBodyRow(t);null!=l&&l.classList.remove(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_EDIT_CLASS)})})}}},_showInlineMessage:function(t,l,o){if(!this._inlineMessageShown){this._getTableDomUtils().setTableInlineMessage(t,l,o);var i=this._getTableDomUtils().getTableInlineMessage(),s=this._getTableDomUtils().getTableContainer();o==e.Message.SEVERITY_LEVEL.WARNING&&(s.classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._WARNING),i.classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._WARNING)),i.style[e.TableDomUtils.CSS_PROP._DISPLAY]=e.TableDomUtils.CSS_VAL._BLOCK,i.style[e.TableDomUtils.CSS_PROP._WIDTH]="100%",i.style[e.TableDomUtils.CSS_PROP._BOX_SIZING]=e.TableDomUtils.CSS_VAL._BORDER_BOX,this._inlineMessageShown=!0}},_showNoDataMessage:function(){if(!this._noDataMessageShown){var e=this._getTableDomUtils().getTableBodyMessageRow(),t=this._getData(),l=null;l=null!=this.options.emptyText?this.options.emptyText:this.getTranslatedString(this._BUNDLE_KEY._MSG_NO_DATA);var o=null!=t?l:this.getTranslatedString(this._BUNDLE_KEY._MSG_INITIALIZING);null==e?this._getTableDomUtils().createTableBodyMessageRow(this._getColumnDefs().length,o):this._getTableDomUtils().setTableBodyMessage(o),this._noDataMessageShown=!0}},_showStatusMessage:function(){if(!this._showStatusTimeout&&!this._statusMessageShown){var t=this._getTableDomUtils().getTableStatusMessage(),l=this;this._showStatusTimeout=setTimeout(function(){t.style[e.TableDomUtils.CSS_PROP._DISPLAY]=e.TableDomUtils.CSS_VAL._INLINE,l._statusMessageShown=!0,l._getTableDomUtils().refreshTableStatusPosition()},this._getShowStatusDelay())}},_getShowStatusDelay:function(){var t;return null==this._defaultOptions&&(this._defaultOptions=e.ThemeUtils.parseJSONFromFontFamily("oj-table-option-defaults")),t=parseInt(this._defaultOptions.showIndicatorDelay,10),isNaN(t)?0:t},_showTableHeaderColumnSortLink:function(l){if(this._getColumnDefs()[l].sortable==this._OPTION_ENABLED){var o=this._getTableDomUtils().getTableHeaderColumn(l);if(!o)return;if(null==t(o).data("sorted")){var i=o.querySelectorAll("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_LINK_CLASS);i.length>0&&((i=i[0]).classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._ENABLED),i.classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED));var s=o.querySelectorAll("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_CLASS);s.length>0&&(s=s[0]).classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED);var a=o.querySelectorAll("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_CLASS);a.length>0&&(a=a[0]).classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED)}}},_touchEventDoubleTapFunction:function(e,l){var o=t(e.target);null!=this._lastTapTime&&(new Date).getTime()-this._lastTapTime<250&&this._lastTapTarget[0]==o[0]?(this._lastTapTime=null,this._lastTapTarget=null,l()):(this._lastTapTarget=o,this._lastTapTime=(new Date).getTime())},_unregisterChildStateListeners:function(e){var t,l=this,o=e.querySelectorAll("*");for(t=0;t<o.length;t++)l._UnregisterChildNode(o[t]);l=null},_unregisterDataSourceEventListeners:function(){var e=this._getData();if(null!=this._dataProviderEventHandlers&&null!=e){var t,l=this._dataProviderEventHandlers.length;for(t=0;t<l;t++)e.removeEventListener(this._dataProviderEventHandlers[t].eventType,this._dataProviderEventHandlers[t].eventHandler)}},_unregisterResizeListener:function(){var t=this._getTableDomUtils().getTableContainer();e.DomUtils.removeResizeListener(t,this._resizeListener),this._isResizeListenerAdded=!1},_updateHeaderColumnStateCellsClass:function(t,l){var o=this._getHeaderColumnSelection(t),i=this._getSelectedRowIdxs(),s=this._getTableDomUtils().getTableBodyRows();if(null!=s&&s.length>0){var a,n,r,_,S,T=s.length;for(a=0;a<T;a++)if(r=this._getTableDomUtils().getTableBodyCell(a,t),o)r.classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED);else{for(_=!1,S=i.length,n=0;n<S;n++)if(a==i[n]){_=!0;break}_||r.classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)}}},_updateRowStateCellsClass:function(l,o,i){var s=this._getTableDomUtils().getTableBodyCells(l),a=o.focused,n=o.selected,r=o.hover;if(s){if(null!=r){var _=s.length;for(S=0;S<_;S++)r?s[S].classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._HOVER):s[S].classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._HOVER)}if(null!=a)for(_=s.length,S=0;S<_;S++)a?this._focusInHandler(t(s[S])):this._focusOutHandler(t(s[S]));var S;if(null!=n)for(_=s.length,S=0;S<_;S++)n?s[S].classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED):s[S].classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)}},_setFinalTask:function(e){this._finalTask=e?e.bind(this):void 0},_hasPendingTasks:function(){return this._taskCount>1},_queueTask:function(t){var l=this;return this._pendingTasks||(this._taskCount=0,this._pendingTasks=Promise.resolve(),this._setComponentNotReady()),this._taskCount++,this._pendingTasks=this._pendingTasks.then(function(){if(!l._componentDestroyed)return t.bind(l)()}).then(function(t){if(l._taskCount--,0==l._taskCount){l._pendingTasks=void 0;try{l._componentDestroyed||(l._finalTask&&l._finalTask(),l._trigger("ready"))}catch(t){e.Logger.error(t)}l._setComponentReady(),l=null}return t},function(t){return l._taskCount--,0==l._taskCount&&(l._pendingTasks=void 0,e.Logger.error(t),l._setComponentReady(),l=null),Promise.reject(t)}),this._pendingTasks},_CompareOptionValues:function(t,l,o){switch(t){case"columns":case"currentRow":case"selection":return e.Object.compareValues(l,o);default:return this._super(t,l,o)}}}),e.Components.setDefaultOptions({ojTable:{display:e.Components.createDynamicPropertyGetter(function(){return(e.ThemeUtils.parseJSONFromFontFamily("oj-table-option-defaults")||{}).display})}}),e.TableAnimationUtils=function(e){this.component=e,this.options=e.options,this.Init()},e.Object.createSubclass(e.TableAnimationUtils,e.Object,"oj.TableAnimationUtils"),e.TableAnimationUtils.prototype.Init=function(){e.TableAnimationUtils.superclass.Init.call(this)},e.TableAnimationUtils.prototype.animateTableBodyRow=function(e,t){if(this._isAnimationDisabled(t))return Promise.resolve(!1);var l=this;return new Promise(function(o,i){l._startAnimation(e,t).then(function(){o(!0)})})},e.TableAnimationUtils.prototype.animateTableBodyRows=function(e,t){if(this._isAnimationDisabled(t))return Promise.resolve(!1);var l,o,i=this,s=[];for(l=0;l<e.length;l++)o=e[l],s.push(function(e){return i.animateTableBodyRow(e,t)}(o));return s.length>0?Promise.all(s):Promise.resolve(!1)},e.TableAnimationUtils.prototype._getAnimationEffect=function(t){var l;return null==this.defaultAnimations&&(l=e.ThemeUtils.parseJSONFromFontFamily("oj-table-option-defaults"),this.defaultAnimations=l.animation||{}),this.defaultAnimations[t]},e.TableAnimationUtils.prototype._isAnimationDisabled=function(e){var t=this._getAnimationEffect(e);return null==t||0==t.length},e.TableAnimationUtils.prototype._startAnimation=function(t,l,o){return null==o&&(o=this._getAnimationEffect(l)),e.AnimationUtils.startAnimation(t,l,o,this.component)},e.TableDndContext=function(e){this.component=e,this.options=e.options,this.Init()},e.Object.createSubclass(e.TableDndContext,e.Object,"oj.TableDndContext"),e.TableDndContext.prototype.Init=function(){e.TableDndContext.superclass.Init.call(this)},e.TableDndContext.prototype._addDragMarkerClass=function(t){this._getTableDomUtils().getTableHeaderColumn(t).classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._DRAG),this._getTableDomUtils().setTableColumnCellsClass(t,!0,e.TableDomUtils.MARKER_STYLE_CLASSES._DRAG)},e.TableDndContext.prototype._removeDragMarkerClass=function(){var t=this._getTableDomUtils().getTableHeader().querySelectorAll("."+e.TableDomUtils.MARKER_STYLE_CLASSES._DRAG);if(null!=t&&t.length>0){var l,o=t.length;for(l=0;l<o;l++)t[l].classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._DRAG)}this._getTableDomUtils().setTableColumnCellsClass(null,!1,e.TableDomUtils.MARKER_STYLE_CLASSES._DRAG)},e.TableDndContext.prototype._cloneTableContainer=function(l){var o,i=l.querySelectorAll(e.TableDomUtils.DOM_ELEMENT._TBODY)[0],s=t(i).scrollLeft(),a=t(i).scrollTop(),n=(o=l.cloneNode(!0)).querySelectorAll(e.TableDomUtils.DOM_ELEMENT._TBODY)[0];return n.style[e.TableDomUtils.CSS_PROP._OVERFLOW]=e.TableDomUtils.CSS_VAL._HIDDEN,n.style[e.TableDomUtils.CSS_PROP._OVERFLOW_X]=e.TableDomUtils.CSS_VAL._HIDDEN,n.style[e.TableDomUtils.CSS_PROP._OVERFLOW_Y]=e.TableDomUtils.CSS_VAL._HIDDEN,n.style[e.TableDomUtils.CSS_PROP._BACKGROUND_COLOR]=e.TableDomUtils.CSS_VAL._TRANSPARENT,n.style[e.TableDomUtils.CSS_PROP._WIDTH]=t(i).width()+e.TableDomUtils.CSS_VAL._PX,n.style[e.TableDomUtils.CSS_PROP._HEIGHT]=t(i).height()+e.TableDomUtils.CSS_VAL._PX,o.style[e.TableDomUtils.CSS_PROP._POSITION]=e.TableDomUtils.CSS_VAL._ABSOLUTE,o.style[e.TableDomUtils.CSS_PROP._TOP]=-1e4+e.TableDomUtils.CSS_VAL._PX,t(n).scrollLeft(1*s),t(n).scrollTop(1*a),document.body.appendChild(o),o},e.TableDndContext.prototype._destroyDragImage=function(){this._dragImage&&(t(this._dragImage).remove(),this._dragImage=null)},e.TableDndContext.prototype._getEventColumnIndex=function(e){return this._getTableDomUtils().getElementColumnIdx(e.currentTarget)},e.TableDndContext.prototype._getOverRowIndex=function(l){var o,i=t(l.target).closest(e.TableDomUtils.DOM_ELEMENT._TR),s=this.component.getContextByNode(l.target);if(s&&"oj-table-cell"==s.subId)o=s.rowIndex;else if(i&&i.hasClass(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_DRAG_INDICATOR_BEFORE_CLASS))o=this._dropRowIndex;else{var a=this._getTableDomUtils().getTableBodyRows();o=a?a.length:0}return o},e.TableDndContext.prototype._getTableDomUtils=function(){return this.component._getTableDomUtils()},e.TableDndContext.prototype.handleColumnDragStart=function(e){if(this._isColumnReorderEnabled()){var t=this._getEventColumnIndex(e);return this._dragStartColumnIdx=t,this._setReorderColumnsDataTransfer(e,t),this.component._setSelection(null),this.component.option("selection",null,{_context:{writeback:!0,internalSet:!0}}),setTimeout(function(){window.getSelection().removeAllRanges()},0),this._addDragMarkerClass(t),!0}},e.TableDndContext.prototype.handleColumnDragEnd=function(e){this._isColumnReorderEnabled()&&(this.setTableHeaderColumnDraggable(null,!1),this._dragStartColumnIdx=null,this._getTableDomUtils().removeDragOverIndicatorColumn(),this._getTableDomUtils().removeTableHeaderColumnDragImage(),this._removeDragMarkerClass())},e.TableDndContext.prototype.handleColumnDragEnter=function(e){if(!this._isColumnReordering()){var t=this._getEventColumnIndex(e);return this._invokeDropCallback("columns","dragEnter",e,{columnIndex:t})}},e.TableDndContext.prototype.handleColumnReorderDragOver=function(e){var t=this._getEventColumnIndex(e),l=this._dragStartColumnIdx;null!=l&&l!=t&&(this._currentDropColumnBefore=this._isDragOverBeforeColumn(e),this._currentDropColumnBefore&&l==t-1||!this._currentDropColumnBefore&&l==t+1||this._getTableDomUtils().displayDragOverIndicatorColumn(t,this._currentDropColumnBefore),e.preventDefault())},e.TableDndContext.prototype.handleColumnDragOver=function(e){if(this._isColumnReordering())return this.handleColumnReorderDragOver(e);var t=this._getEventColumnIndex(e);this._currentDropColumnBefore=this._isDragOverBeforeColumn(e);var l=this._invokeDropCallback("columns","dragOver",e,{columnIndex:t});return(!1===l||e.isDefaultPrevented())&&this._getTableDomUtils().displayDragOverIndicatorColumn(t,this._isDragOverBeforeColumn(e)),l},e.TableDndContext.prototype.handleColumnDragLeave=function(e){if(!this._isColumnReordering()){this._getTableDomUtils().removeDragOverIndicatorColumn();var t=this._getEventColumnIndex(e);return this._invokeDndCallback("drop","columns","dragLeave",e,{columnIndex:t})}},e.TableDndContext.prototype.handleColumnReorderDrop=function(e){var t=this._getEventColumnIndex(e);this._currentDropColumnBefore||t++,this.component._columnsDestMap=this._getTableDomUtils().moveTableHeaderColumn(this._dragStartColumnIdx,t,e),e.preventDefault()},e.TableDndContext.prototype.handleColumnDrop=function(e){if(this._isColumnReordering())return this.handleColumnReorderDrop(e);this._getTableDomUtils().removeDragOverIndicatorColumn();var t=this._getEventColumnIndex(e);return this._currentDropColumnBefore||t++,this._invokeDropCallback("columns","drop",e,{columnIndex:t})},e.TableDndContext.prototype.handleRowDragStart=function(e){var t=this.options.dnd.drag;if(t&&t.rows){var l=this._setDragRowsDataTransfer(e,t.rows.dataTypes,this.component._getSelectedRowIdxs());return!!l&&this._invokeDndCallback("drag","rows","dragStart",e,l)}},e.TableDndContext.prototype.handleRowDrag=function(e){return this._invokeDndCallback("drag","rows","drag",e)},e.TableDndContext.prototype.handleRowDragEnd=function(e){return this._destroyDragImage(),this._invokeDndCallback("drag","rows","dragEnd",e)},e.TableDndContext.prototype.handleRowDragEnter=function(e){var t=this._getOverRowIndex(e),l=this._invokeDropCallback("rows","dragEnter",e,{rowIndex:t});return(!1===l||e.isDefaultPrevented())&&this._updateDragRowsState(e,t),l},e.TableDndContext.prototype.handleRowDragOver=function(e){return this._invokeDropCallback("rows","dragOver",e,{rowIndex:this._dropRowIndex})},e.TableDndContext.prototype.handleRowDragLeave=function(e){var t=this._invokeDndCallback("drop","rows","dragLeave",e,{rowIndex:this._dropRowIndex});return this._isDndEventInElement(e,e.currentTarget)||(this._getTableDomUtils().removeDragOverIndicatorRow(),this._dropRowIndex=null),t},e.TableDndContext.prototype.handleRowDrop=function(e){var t=this._dropRowIndex;return this._getTableDomUtils().removeDragOverIndicatorRow(),this._dropRowIndex=null,this._invokeDropCallback("rows","drop",e,{rowIndex:t})},e.TableDndContext.prototype._hideUnselectedRows=function(t,l){for(var o,i=null,s=(o=t.querySelectorAll("."+e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS)).length-1;s>=0;s--)-1==l.indexOf(s)?o[s].style[e.TableDomUtils.CSS_PROP._VISIBILITY]=e.TableDomUtils.CSS_VAL._HIDDEN:i=s;var a=t.querySelectorAll(e.TableDomUtils.DOM_ELEMENT._THEAD);null!=a&&a.length>0&&(a[0].style[e.TableDomUtils.CSS_PROP._VISIBILITY]=e.TableDomUtils.CSS_VAL._HIDDEN);var n=t.querySelectorAll(e.TableDomUtils.DOM_ELEMENT._TFOOT);return null!=n&&n.length>0&&(n[0].style[e.TableDomUtils.CSS_PROP._VISIBILITY]=e.TableDomUtils.CSS_VAL._HIDDEN),i},e.TableDndContext.prototype._invokeDndCallback=function(t,l,o,i,s){var a,n=this.options.dnd[t];if(n&&n[l]){var r=n[l][o];if(r&&"function"==typeof r)try{this.component._IsCustomElement()?r(i.originalEvent,s):(i.dataTransfer=i.originalEvent.dataTransfer,a=r(i,s))}catch(t){e.Logger.error("Error: "+t)}}return a},e.TableDndContext.prototype._invokeDropCallback=function(e,t,l,o){var i=this._invokeDndCallback("drop",e,t,l,o);return void 0===i&&this._matchDragDataType(l,e)&&l.preventDefault(),i},e.TableDndContext.prototype._isColumnReorderEnabled=function(){var e=this.options.dnd;return!(!e||!e.reorder||e.reorder.columns!=this.component._OPTION_ENABLED)},e.TableDndContext.prototype._isColumnReordering=function(){return null!=this._dragStartColumnIdx},e.TableDndContext.prototype._isDndEventInElement=function(e,t){var l=t.getBoundingClientRect(),o=e.originalEvent;return o.clientX>=Math.ceil(l.left)&&o.clientX<Math.floor(l.right)&&o.clientY>=Math.ceil(l.top)&&o.clientY<Math.floor(l.bottom)},e.TableDndContext.prototype._isDragOverBeforeColumn=function(t){var l=t.currentTarget.getBoundingClientRect();if(null!=t.originalEvent.clientX){var o=l.right-t.originalEvent.clientX<(l.right-l.left)/2;return"rtl"===e.DomUtils.getReadingDirection()?o:!o}return!1},e.TableDndContext.prototype._matchDragDataType=function(e,t){var l=e.originalEvent.dataTransfer.types,o=this.options.dnd.drop;if(o&&o[t]&&o[t].dataTypes)for(var i=o[t].dataTypes,s="string"==typeof i?[i]:i,a=0;a<l.length;a++)if(s.indexOf(l[a])>=0)return!0;return!1},e.TableDndContext.prototype._setHeaderColumnDraggable=function(t,l){t.draggable=l,l&&(t.style[e.TableDomUtils.CSS_PROP._CURSOR]=e.TableDomUtils.CSS_VAL._MOVE,t.classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._DRAGGABLE))},e.TableDndContext.prototype._clearHeaderColumnDraggable=function(t){t.draggable="",t.style[e.TableDomUtils.CSS_PROP._CURSOR]=e.TableDomUtils.CSS_VAL._AUTO,t.classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._DRAGGABLE)},e.TableDndContext.prototype._setDragRowsData=function(e,t,l){if(t){var o=e.dataTransfer,i=JSON.stringify(l);if("string"==typeof t)o.setData(t,i);else for(var s=0;s<t.length;s++)o.setData(t[s],i)}},e.TableDndContext.prototype._setDragRowsDataTransfer=function(l,o,i){for(var s=[],a=0;a<i.length;a++){var n=this.component.getDataForVisibleRow(i[a]);n&&s.push(n)}return s.length?(this._setDragRowsData(l.originalEvent,o,s),this._dragImage=this._setDragRowsImage(l.originalEvent,t(l.currentTarget).closest(e.TableDomUtils.DOM_ELEMENT._TABLE).parent()[0],i),{rows:s}):null},e.TableDndContext.prototype._setDragRowsImage=function(l,o,i){var s=this._cloneTableContainer(o);this._hideUnselectedRows(s,i);var a=o.getBoundingClientRect(),n=o.querySelectorAll(e.TableDomUtils.DOM_ELEMENT._TBODY)[0],r=t(n).scrollLeft(),_=t(n).scrollTop(),S=l.clientX-a.left+r,T=l.clientY-a.top+_;return l.dataTransfer.setDragImage(s,S,T),s},e.TableDndContext.prototype._setReorderColumnsDataTransfer=function(e,t){var l=e.originalEvent.dataTransfer,o=this._getTableDomUtils().hashCode(this._getTableDomUtils().getTableUID());l.setData("Text",this.component._DND_REORDER_TABLE_ID_DATA_KEY+":"+o+":"+t);var i=this._getTableDomUtils().createTableHeaderColumnDragImage(t);try{l.setDragImage(i,0,0)}catch(e){}},e.TableDndContext.prototype.setTableHeaderColumnDraggable=function(e,t){if(this._isColumnReorderEnabled()){var l,o=this._getTableDomUtils().getTableHeaderColumns();if(null!=o&&o.length>0)for(l=0;l<o.length;l++){var i=o[l];null!=e&&l==e?this._setHeaderColumnDraggable(i,t):this._clearHeaderColumnDraggable(i)}}},e.TableDndContext.prototype._updateDragRowsState=function(l,o){if(this._dropRowIndex!=o){var i=t(l.target).closest(e.TableDomUtils.DOM_ELEMENT._TR)[0];this._dropRowIndex=o,this._getTableDomUtils().displayDragOverIndicatorRow(this._dropRowIndex,!0,i)}},e.TableDomUtils=function(e){this.component=e,this.options=e.options,this.element=e.element[0],this.OuterWrapper=e.OuterWrapper,this.Init()},e.Object.createSubclass(e.TableDomUtils,e.Object,"oj.TableDomUtils"),e.TableDomUtils.prototype.Init=function(){e.TableDomUtils.superclass.Init.call(this)},e.TableDomUtils.prototype.clearCachedDom=function(){this.clearCachedDomRowData(),this._clearCachedDom(null),this._tableDimensions=null},e.TableDomUtils.prototype.clearCachedDomRowData=function(){this._cachedDomTableBodyRows=null},e.TableDomUtils.prototype.createAccLabelSpan=function(t,l){var o=document.createElement("span");return null!=l&&o.classList.add(l),o.classList.add(e.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),o.appendChild(document.createTextNode(t)),o},e.TableDomUtils.prototype.createContextMenu=function(l){var o=this.component._GetContextMenu(),i=!!this.component._isTouchDevice()&&this.component._getRowSelectionMode()==this.component._OPTION_SELECTION_MODES._MULTIPLE;if(o){var s=o.querySelectorAll("[data-oj-command]");if(null!=s&&s.length>0){var a,n,r;for(n=0;n<s.length;n++)"OJ-OPTION"!==s[n].tagName&&0!==s[n].getElementsByTagName(e.TableDomUtils.DOM_ELEMENT._A).length||(a=s[n].getAttribute("data-oj-command").split("-"),r=this.createContextMenuItem(a[a.length-1],this.component._IsCustomElement()),"OJ-OPTION"===s[n].tagName?s[n].innerHTML=r.innerHTML:t(s[n]).replaceWith(r));this._menuContainer=o,t(o).data("oj-ojMenu")&&(this.component._IsCustomElement()?o.refresh():t(o).ojMenu("refresh")),this.component._IsCustomElement()?o.addEventListener("ojAction",l):t(o).on("ojselect",l)}}else if(this.component._isTableSortable()||i||this.component._isTableColumnsResizable()){if((o=document.createElement(e.TableDomUtils.DOM_ELEMENT._UL)).style[e.TableDomUtils.CSS_PROP._DISPLAY]=e.TableDomUtils.CSS_VAL._NONE,o.setAttribute(e.TableDomUtils.DOM_ATTR._ID,this.getTableId()+"_contextmenu"),this.getTableContainer().appendChild(o),this.component._isTableSortable()){var _=this.createContextMenuItem("sort");o.appendChild(_)}if(i){var S=this.createContextMenuItem("enableNonContiguousSelection");o.appendChild(S)}if(this.component._isTableColumnsResizable()){var T=this.createContextMenuItem("resize");o.appendChild(T)}t(o).ojMenu(),this._menuContainer=o,t(o).on("ojselect",l);this.options.contextMenu;this.component.option("contextMenu","#"+o.getAttribute(e.TableDomUtils.DOM_ATTR._ID),{_context:{internalSet:!0}}),this.component._defaultContextMenu=o}return o},e.TableDomUtils.prototype.createContextMenuItem=function(t,l){if("sort"===t){var o=this.createContextMenuListItem(t,l),i=document.createElement(e.TableDomUtils.DOM_ELEMENT._UL);return o.appendChild(i),i.appendChild(this.createContextMenuListItem("sortAsc",l)),i.appendChild(this.createContextMenuListItem("sortDsc",l)),o}return"sortAsc"===t?this.createContextMenuListItem(t,l):"sortDsc"===t?this.createContextMenuListItem(t,l):"enableNonContiguousSelection"==t?this.createContextMenuListItem(t,l):"disableNonContiguousSelection"==t?this.createContextMenuListItem(t,l):"resize"===t?(this.createContextMenuResizePopup(0),this.createContextMenuListItem(t)):null},e.TableDomUtils.prototype.createContextMenuListItem=function(e,t){var l=document.createElement(t?"oj-option":"li");return l.setAttribute("data-oj-command","oj-table-"+e),l.appendChild(this.createContextMenuLabel(e,t)),l},e.TableDomUtils.prototype.createContextMenuLabel=function(t,l){var o=null;"sort"==t?o=this.component.getTranslatedString("labelSort"):"sortAsc"==t?o=this.component.getTranslatedString("labelSortAsc"):"sortDsc"==t?o=this.component.getTranslatedString("labelSortDsc"):"enableNonContiguousSelection"==t?o=this.component.getTranslatedString("labelEnableNonContiguousSelection"):"disableNonContiguousSelection"==t?o=this.component.getTranslatedString("labelDisableNonContiguousSelection"):"resize"==t&&(o=this.component.getTranslatedString("labelResize"));var i=document.createTextNode(o);if(l)return i;var s=document.createElement(e.TableDomUtils.DOM_ELEMENT._A);return s.setAttribute(e.TableDomUtils.DOM_ATTR._HREF,"#"),s.appendChild(i),s},e.TableDomUtils.prototype.createContextMenuResizePopup=function(l){l=Math.round(l);var o=this.getContextMenuResizePopup();if(null==o){var i=this.getTableContainer();(o=document.createElement(e.TableDomUtils.DOM_ELEMENT._DIV)).setAttribute("id",this.getTableId()+"_resize_popup"),o.setAttribute("data-oj-context",""),i.appendChild(o);var s=document.createElement(e.TableDomUtils.DOM_ELEMENT._DIV),a=document.createElement(e.TableDomUtils.DOM_ELEMENT._DIV);o.appendChild(s),o.appendChild(a),(_=document.createElement(e.TableDomUtils.DOM_ELEMENT._INPUT)).setAttribute("id",this.getTableId()+"_resize_popup_spinner");var n=document.createElement(e.TableDomUtils.DOM_ELEMENT._LABEL);n.setAttribute("for",this.getTableId()+"_resize_popup_spinner"),n.textContent=this.component.getTranslatedString("labelResizePopupSpinner");var r=document.createElement(e.TableDomUtils.DOM_ELEMENT._BUTTON);r.setAttribute("id",this.getTableId()+"_resize_popup_popupsubmit"),s.appendChild(n),s.appendChild(_),a.appendChild(r),t(r).ojButton({component:"ojButton",label:this.component.getTranslatedString("labelResizePopupSubmit")}),t(r).on("click",this.component._handleContextMenuResizePopup.bind(this.component)),t(_).ojInputNumber({component:"ojInputNumber",max:1e4,min:10,step:1,value:l,validators:[{type:"regExp",options:{pattern:"^[1-9][0-9]*$",messageDetail:this.component.getTranslatedString("msgColumnResizeWidthValidation")}}]}),t(o).ojPopup({modality:"modal",position:{my:"start top",at:"start bottom",collision:"flipfit"}}),this._cacheDomElement(this.getTableId()+"_resize_popup",o)}else{var _=document.getElementById(this.getTableId()+"_resize_popup_spinner");t(_).ojInputNumber("option","value",l)}return o},e.TableDomUtils.prototype.createInitialTable=function(e,t){var l=this.getTable();return this.createTableContainer(),e||this.createTableHeader(),t||this.createTableFooter(),this.createTableBody(),this.createTableStatusMessage(),this.createTableInlineMessage(),this.createTableStatusAccNotification(),l},e.TableDomUtils.prototype.createTableBody=function(){var t=this.getTable(),l=document.createElement(e.TableDomUtils.DOM_ELEMENT._TBODY);return t.appendChild(l),this._cacheDomElement(e.TableDomUtils.CSS_CLASSES._TABLE_BODY_CLASS,l),l},e.TableDomUtils.prototype.createTableBodyCell=function(t,l){return document.createElement(e.TableDomUtils.DOM_ELEMENT._TD)},e.TableDomUtils.prototype.createTableBodyCellAccSelect=function(t,l,o,i,s){var a=null;if(s||(a=this.getTableBodyCellAccSelect(i)),null!=a)return a;var n=null!=l?l.toString():t.toString(),r=null==o?this.hashCode(n):o;if((a=document.createElement(e.TableDomUtils.DOM_ELEMENT._TD)).classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_ACC_SELECT_CLASS),a.style.padding="0",a.style.border="0",!this.component._isTableHeaderless()){var _=this.options.accessibility,S=null;S=null!=_&&null!=_.rowHeader?_.rowHeader:this.component._getColumnDefs()[0].id;var T=this.getTableId()+":"+S+"_"+r;a.setAttribute(e.TableDomUtils.DOM_ATTR._HEADERS,this.getTableId()+":"+e.TableDomUtils._COLUMN_HEADER_ROW_SELECT_ID+" "+T)}var d=document.createElement(e.TableDomUtils.DOM_ELEMENT._INPUT);d.setAttribute(e.TableDomUtils.DOM_ATTR._ID,this.getTableId()+":acc_sel_row_"+r),d.setAttribute(e.TableDomUtils.DOM_ATTR._TYPE,"checkbox"),d.setAttribute(e.TableDomUtils.DOM_ATTR._TABINDEX,"-1");var u=null,h=this.options.editMode,c=null!=this.component._getRowSelectionMode();return u=h==this.component._OPTION_EDIT_MODE._ROW_EDIT?c?this.component.getTranslatedString(this.component._BUNDLE_KEY._LABEL_SELECT_AND_EDIT_ROW):this.component.getTranslatedString(this.component._BUNDLE_KEY._LABEL_EDIT_ROW):this.component.getTranslatedString(this.component._BUNDLE_KEY._LABEL_SELECT_ROW),d.setAttribute(e.TableDomUtils.DOM_ATTR._TITLE,u),d.classList.add(e.TableDomUtils.CSS_CLASSES._CHECKBOX_ACC_SELECT_ROW_CLASS),d.classList.add(e.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),this.component._getEditableRowIdx()==t?d.checked=!0:d.checked=!1,a.appendChild(d),i.insertBefore(a,i.firstChild),a},e.TableDomUtils.prototype.createTableBodyMessageCell=function(t,l,o){var i=document.createElement(e.TableDomUtils.DOM_ELEMENT._TD);return i.setAttribute(e.TableDomUtils.DOM_ATTR._COLSPAN,l+1),i.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_BODY_MESSAGE_CLASS),i.appendChild(document.createTextNode(o)),t.appendChild(i),i},e.TableDomUtils.prototype.createTableBodyMessageRow=function(t,l){var o=this.getTableBody(),i=document.createElement(e.TableDomUtils.DOM_ELEMENT._TR);return i.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_BODY_MESSAGE_ROW_CLASS),this.createTableBodyMessageCell(i,t,l),o.appendChild(i),i},e.TableDomUtils.prototype.createTableBodyRow=function(t,l){var o=document.createElement(e.TableDomUtils.DOM_ELEMENT._TR);return this.createTableBodyCellAccSelect(t,l,null,o,!0),o},e.TableDomUtils.prototype.createTableBodyRowTouchSelectionAffordance=function(l){var o=document.createElement(e.TableDomUtils.DOM_ELEMENT._DIV);o.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOP_CLASS),o.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOUCH_AREA_CLASS),t(o).data("rowIdx",l);var i=document.createElement(e.TableDomUtils.DOM_ELEMENT._DIV);i.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOP_ICON_CLASS),i.setAttribute(e.TableDomUtils.DOM_ATTR._ROLE,"button"),i.setAttribute(e.TableDomUtils.DOM_ATTR._ARIA_LABEL,this.component.getTranslatedString("labelAccSelectionAffordanceTop")),t(i).data("rowIdx",l),o.appendChild(i);var s=document.createElement(e.TableDomUtils.DOM_ELEMENT._DIV);s.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_BOTTOM_CLASS),s.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOUCH_AREA_CLASS),t(s).data("rowIdx",l);var a=document.createElement(e.TableDomUtils.DOM_ELEMENT._DIV);a.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_BOTTOM_ICON_CLASS),a.setAttribute(e.TableDomUtils.DOM_ATTR._ROLE,"button"),a.setAttribute(e.TableDomUtils.DOM_ATTR._ARIA_LABEL,this.component.getTranslatedString("labelAccSelectionAffordanceBottom")),t(a).data("rowIdx",l),s.appendChild(a);var n=this.getTableContainer();n.appendChild(o),n.appendChild(s),this.moveTableBodyRowTouchSelectionAffordanceTop(l),this.moveTableBodyRowTouchSelectionAffordanceBottom(l)},e.TableDomUtils.prototype.createTableBottomSlot=function(){var t=this.getTableContainer(),l=document.createElement(e.TableDomUtils.DOM_ELEMENT._DIV);return l.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_BOTTOM_SLOT_CLASS),t.appendChild(l),this._cacheDomElement(e.TableDomUtils.CSS_CLASSES._TABLE_BOTTOM_SLOT_CLASS,l),l},e.TableDomUtils.prototype.createTableContainer=function(){var t;this.options;return this.OuterWrapper?t=this.OuterWrapper:(t=document.createElement(e.TableDomUtils.DOM_ELEMENT._DIV),this.element.parentNode.replaceChild(t,this.element),t.insertBefore(this.element,t.firstChild)),this._cacheDomElement(e.TableDomUtils.CSS_CLASSES._TABLE_CONTAINER_CLASS,t),t},e.TableDomUtils.prototype.createTableFooter=function(){var t=this.getTable(),l=document.createElement(e.TableDomUtils.DOM_ELEMENT._TFOOT),o=document.createElement(e.TableDomUtils.DOM_ELEMENT._TR);this.createTableFooterAccSelect(o),l.appendChild(o);var i=this.getTableHeader();if(null!=i)i.parentNode.insertBefore(l,i.nextSibling);else{var s=this.getTableBody();null!=s?s.parentNode.insertBefore(l,s):t.appendChild(l)}return this._cacheDomElement(e.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CLASS,l),l},e.TableDomUtils.prototype.createTableFooterAccSelect=function(t){var l=t.getElementsByClassName(e.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS);return null!=l&&l.length>0?l[0]:((l=document.createElement(e.TableDomUtils.DOM_ELEMENT._TD)).classList.add(e.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),l.setAttribute(e.TableDomUtils.DOM_ATTR._TABINDEX,"-1"),t.insertBefore(l,t.firstChild),l)},e.TableDomUtils.prototype.createTableFooterCell=function(t){return document.createElement(e.TableDomUtils.DOM_ELEMENT._TD)},e.TableDomUtils.prototype.createTableHeader=function(){var t=this.getTable(),l=document.createElement(e.TableDomUtils.DOM_ELEMENT._THEAD),o=document.createElement(e.TableDomUtils.DOM_ELEMENT._TR);l.appendChild(o);var i=this.getTableFooter();if(null!=i)i.parentNode.insertBefore(l,i);else{var s=this.getTableBody();null!=s?s.parentNode.insertBefore(l,s):t.appendChild(l)}return this._cacheDomElement(e.TableDomUtils.CSS_CLASSES._TABLE_HEADER_ROW_CLASS,o),this._cacheDomElement(e.TableDomUtils.CSS_CLASSES._TABLE_HEADER_CLASS,l),l},e.TableDomUtils.prototype.createTableHeaderAccSelectRowColumn=function(){var t,l=document.createElement(e.TableDomUtils.DOM_ELEMENT._TH);l.classList.add(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ACC_SELECT_ROW_CLASS),l.setAttribute(e.TableDomUtils.DOM_ATTR._ID,this.getTableId()+":"+e.TableDomUtils._COLUMN_HEADER_ROW_SELECT_ID);var o=this.options.editMode,i=null!=this.component._getRowSelectionMode();t=o==this.component._OPTION_EDIT_MODE._ROW_EDIT?i?this.component.getTranslatedString(this.component._BUNDLE_KEY._LABEL_SELECT_AND_EDIT_ROW):this.component.getTranslatedString(this.component._BUNDLE_KEY._LABEL_EDIT_ROW):this.component.getTranslatedString(this.component._BUNDLE_KEY._LABEL_SELECT_ROW),l.setAttribute(e.TableDomUtils.DOM_ATTR._TITLE,t),l.style.padding="0",l.style.border="0";var s=document.createElement(e.TableDomUtils.DOM_ELEMENT._SPAN);return s.appendChild(document.createTextNode(t)),s.classList.add(e.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),l.appendChild(s),l},e.TableDomUtils.prototype.createTableHeaderColumn=function(t,l){var o=this.component._getColumnDefs()[t],i=document.createElement(e.TableDomUtils.DOM_ELEMENT._TH);this.styleTableHeaderColumn(t,i,l,!0),i.setAttribute("abbr",o.headerText),i.setAttribute(e.TableDomUtils.DOM_ATTR._TITLE,o.headerText),this.insertTableHeaderColumn(t,i);var s={columnIndex:t,headerContext:{component:this.component,parentElement:i}};return o.resizable==e.TableDomUtils._OPTION_ENABLED&&i.setAttribute("data-oj-resizable",e.TableDomUtils._OPTION_ENABLED),o.sortable==e.TableDomUtils._OPTION_ENABLED?(i.setAttribute("data-oj-sortable",e.TableDomUtils._OPTION_ENABLED),e.TableRendererUtils.columnHeaderSortableIconRenderer(this.component,s,null,null)):e.TableRendererUtils.columnHeaderDefaultRenderer(this.component,s,null,null),i},e.TableDomUtils.prototype.createTableHeaderColumnDragImage=function(t){var l=this.getTableHeaderColumn(t).cloneNode(!0);return l.classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._DRAG),l.classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._FOCUS),l.classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._FOCUS_HIGHLIGHT),l.classList.remove(e.TableDomUtils.MARKER_STYLE_CLASSES._HOVER),l.classList.add(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_IMAGE),l.style[e.TableDomUtils.CSS_PROP._POSITION]=e.TableDomUtils.CSS_VAL._ABSOLUTE,l.style[e.TableDomUtils.CSS_PROP._TOP]="0",l.style[e.TableDomUtils.CSS_PROP._LEFT]="-999em",l.style[e.TableDomUtils.CSS_PROP._ZINDEX]="-999",document.body.appendChild(l),l},e.TableDomUtils.prototype.createTableHeaderColumnAccSelect=function(t,l){if(l!=e.TableDomUtils._OPTION_SELECTION_MODES._SINGLE&&l!=e.TableDomUtils._OPTION_SELECTION_MODES._MULTIPLE)return null;var o=this.getTableHeaderColumn(t),i=this.getTableHeaderColumnAccSelect(t);if(null!=i)return i;(i=document.createElement(e.TableDomUtils.DOM_ELEMENT._DIV)).classList.add(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ACC_SELECT_COLUMN_CLASS),i.classList.add(e.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS);var s=document.createElement(e.TableDomUtils.DOM_ELEMENT._INPUT);s.setAttribute(e.TableDomUtils.DOM_ATTR._ID,this.getTableId()+":acc_sel_col"+t),s.setAttribute(e.TableDomUtils.DOM_ATTR._TYPE,"checkbox"),s.setAttribute(e.TableDomUtils.DOM_ATTR._TABINDEX,"-1");var a=this.component.getTranslatedString(this.component._BUNDLE_KEY._LABEL_SELECT_COLUMN);return s.setAttribute(e.TableDomUtils.DOM_ATTR._TITLE,a),s.classList.add(e.TableDomUtils.CSS_CLASSES._CHECKBOX_ACC_SELECT_COLUMN_CLASS),i.appendChild(s),o.insertBefore(i,o.firstChild),i},e.TableDomUtils.prototype.createTableHeaderColumnResizeIndicator=function(){var t=this.getTableHeaderColumnResizeIndicator();if(!t){var l=this.getTableContainer();t=document.createElement(e.TableDomUtils.DOM_ELEMENT._DIV),l.appendChild(t),t.classList.add(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_RESIZE_INDICATOR_CLASS),this._cacheDomElement(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_RESIZE_INDICATOR_CLASS,t)}return t},e.TableDomUtils.prototype.createTableInlineMessage=function(){var t=this.getTableContainer(),l=document.createElement(e.TableDomUtils.DOM_ELEMENT._DIV);return l.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_INLINE_MESSAGE_CLASS),l.style[e.TableDomUtils.CSS_PROP._DISPLAY]=e.TableDomUtils.CSS_VAL._NONE,t.appendChild(l),this._cacheDomElement(e.TableDomUtils.CSS_CLASSES._TABLE_INLINE_MESSAGE_CLASS,l),l},e.TableDomUtils.prototype.createTableStatusAccNotification=function(){var t=this.getTableContainer(),l=document.createElement(e.TableDomUtils.DOM_ELEMENT._DIV);return l.setAttribute(e.TableDomUtils.DOM_ATTR._ROLE,"status"),l.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_STATUS_ACC_NOTIFICATION_CLASS),l.classList.add(e.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),t.appendChild(l),this._cacheDomElement(e.TableDomUtils.CSS_CLASSES._TABLE_STATUS_ACC_NOTIFICATION_CLASS,l),l},e.TableDomUtils.prototype.createTableStatusMessage=function(){var t=this.getTableContainer(),l=document.createElement(e.TableDomUtils.DOM_ELEMENT._DIV);l.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_STATUS_MESSAGE_CLASS),l.style[e.TableDomUtils.CSS_PROP._DISPLAY]=e.TableDomUtils.CSS_VAL._NONE;var o=document.createElement(e.TableDomUtils.DOM_ELEMENT._DIV);return o.classList.add(e.TableDomUtils.CSS_CLASSES._ICON_CLASS),o.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_LOADING_ICON_CLASS),o.setAttribute("aria-label",this.component.getTranslatedString(this.component._BUNDLE_KEY._MSG_FETCHING_DATA)),l.appendChild(o),t.appendChild(l),this._cacheDomElement(e.TableDomUtils.CSS_CLASSES._TABLE_STATUS_MESSAGE_CLASS,l),l},e.TableDomUtils.prototype.displayDragOverIndicatorColumn=function(t,l){this.removeDragOverIndicatorColumn();var o=this.getTableHeaderRow(),i=this.getTableHeaderColumn(t);if(null!=i)l?i.classList.add(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_BEFORE_CLASS):i.classList.add(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_AFTER_CLASS);else{var s=this.component._getColumnDefs();null!=s&&0!=s.length||(l?o.classList.add(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_BEFORE_CLASS):o.classList.add(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_AFTER_CLASS))}},e.TableDomUtils.prototype.displayDragOverIndicatorRow=function(l,o,i){this.removeDragOverIndicatorRow();var s=document.createElement(e.TableDomUtils.DOM_ELEMENT._TR);o?s.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_DRAG_INDICATOR_BEFORE_CLASS):s.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_DRAG_INDICATOR_AFTER_CLASS),i&&t(s).height(parseInt(t(i).height(),10));var a=document.createElement(e.TableDomUtils.DOM_ELEMENT._TD),n=this.component._getColumnDefs();a.setAttribute(e.TableDomUtils.DOM_ATTR._COLSPAN,n.length+1),s.appendChild(a);var r=this.getTableBodyRow(l);if(null!=r)o?r.parentNode.insertBefore(s,r):r.parentNode.insertBefore(s,r.nextSibling);else{var _=this.getTableBodyRows();null!=_&&0!=_.length||this.component._hideNoDataMessage(),this.getTableBody().appendChild(s)}},e.TableDomUtils.prototype.getContextMenu=function(){return this._menuContainer},e.TableDomUtils.prototype.getContextMenuResizePopup=function(){var e=this.getTableId()+"_resize_popup";if(!this._isCachedDomElement(e)){var t=document.getElementById(e);this._cacheDomElement(e,t)}return this._getCachedDomElement(e)},e.TableDomUtils.prototype.getElementColumnIdx=function(l){var o=this.getFirstAncestor(l,e.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_CLASS);if(null!=o)return t(o.parentNode).children("."+e.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_CLASS).index(o);var i=this.getFirstAncestor(l,e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS);if(null!=i)return t(i.parentNode).children("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS).index(i);var s=this.getFirstAncestor(l,e.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS);return null!=s?t(s.parentNode).children("."+e.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS).index(s):null},e.TableDomUtils.prototype.getElementRowIdx=function(l){var o=this.getFirstAncestor(l,e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS);if(null!=o){var i=this.getTableBodyRows();return t(i).index(o)}return null},e.TableDomUtils.prototype.getFirstAncestor=function(e,l){var o;return null==e?null:e.classList.contains(l)?e:0!=(o=t(e).parents("."+l)).length?o[0]:null},e.TableDomUtils.prototype.getScrollbarHeight=function(){var e=this.getScroller();return e.clientHeight>0?e.offsetHeight-e.clientHeight:0},e.TableDomUtils.prototype.getScrollbarWidth=function(){var e=this.getScroller();return e.clientWidth>0?e.offsetWidth-e.clientWidth:0},e.TableDomUtils.prototype.getScroller=function(){return this.getTableBody()},e.TableDomUtils.prototype.getScrollLeft=function(e){var t=e.scrollLeft;"rtl"===this.component._GetReadingDirection()&&(t=Math.abs(t),this._isWebkit()&&(t=e.scrollWidth-e.clientWidth-t));return t},e.TableDomUtils.prototype.getTable=function(){return this.element},e.TableDomUtils.prototype.getTableBody=function(){return this._getTableElementByClassName(e.TableDomUtils.CSS_CLASSES._TABLE_BODY_CLASS,!0)},e.TableDomUtils.prototype.getTableBodyCell=function(e,t,l){var o=this.getTableBodyCells(e,l);return o&&o.length>t?o[t]:null},e.TableDomUtils.prototype.getTableBodyCellAccSelect=function(t){if(null!=t){var l=t.getElementsByClassName(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_ACC_SELECT_CLASS);if(null!=l&&l.length>0)return l[0]}return null},e.TableDomUtils.prototype.getTableBodyLogicalCells=function(e,t){var l=this.getTableBodyCells(e,t);return l?this._getColspanLogicalElements(l):null},e.TableDomUtils.prototype.getTableBodyCells=function(t,l){if(l||(l=this.getTableBodyRow(t)),!l)return null;var o=l.getElementsByClassName(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_CLASS);return null!=o&&o.length>0?o:null},e.TableDomUtils.prototype.getTableBodyMessageCell=function(){var t=this.getTableBody();if(t){var l=t.querySelectorAll("."+e.TableDomUtils.CSS_CLASSES._TABLE_BODY_MESSAGE_CLASS);if(l&&l.length>0)return l[0]}return null},e.TableDomUtils.prototype.getTableBodyMessageRow=function(){var t=this.getTableBody();if(t){var l=t.getElementsByClassName(e.TableDomUtils.CSS_CLASSES._TABLE_BODY_MESSAGE_ROW_CLASS);if(l&&l.length>0)return l[0]}return null},e.TableDomUtils.prototype.getTableBodyRow=function(e){var t=this.getTableBodyRows();return t?null==e?null:t.length>e?t[e]:null:null},e.TableDomUtils.prototype.getTableBodyRows=function(){if(!this._cachedDomTableBodyRows){var t=this.getTableBody();if(null!=t){var l=t.getElementsByClassName(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS);null!=l&&l.length>0&&(this._cachedDomTableBodyRows=l)}}return this._cachedDomTableBodyRows},e.TableDomUtils.prototype.getTableBodyRowTouchSelectionAffordanceTop=function(){var t=this.getTableContainer().getElementsByClassName(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOP_CLASS);return null!=t&&t.length>0?t=t[0]:null},e.TableDomUtils.prototype.getTableBodyRowTouchSelectionAffordanceBottom=function(){var t=this.getTableContainer().getElementsByClassName(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_BOTTOM_CLASS);return null!=t&&t.length>0?t=t[0]:null},e.TableDomUtils.prototype.getTableBottomSlot=function(){return this._getTableElementByClassName(e.TableDomUtils.CSS_CLASSES._TABLE_BOTTOM_SLOT_CLASS,!0)},e.TableDomUtils.prototype.getTableContainer=function(){return this._isCachedDomElement(e.TableDomUtils.CSS_CLASSES._TABLE_CONTAINER_CLASS)||this._cacheDomElement(e.TableDomUtils.CSS_CLASSES._TABLE_CONTAINER_CLASS,this.element.parentNode),this._getCachedDomElement(e.TableDomUtils.CSS_CLASSES._TABLE_CONTAINER_CLASS)},e.TableDomUtils.prototype.getTableFooter=function(){return this._getTableElementByClassName(e.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CLASS,!0)},e.TableDomUtils.prototype.getTableFooterCell=function(e){var t=this.getTableFooterCells();return null!=t&&t.length>e?t[e]:null},e.TableDomUtils.prototype.getTableFooterCells=function(){var t=this.getTableFooterRow(),l=null!=t?t.getElementsByClassName(e.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS):null;return null!=l&&l.length>0?l:null},e.TableDomUtils.prototype.getTableFooterLogicalCells=function(){var e=this.getTableFooterCells();return e?this._getColspanLogicalElements(e):null},e.TableDomUtils.prototype.getTableFooterRow=function(){return this._getTableElementByClassName(e.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_ROW_CLASS)},e.TableDomUtils.prototype.getTableHeader=function(){return this._getTableElementByClassName(e.TableDomUtils.CSS_CLASSES._TABLE_HEADER_CLASS,!0)},e.TableDomUtils.prototype.getTableHeaderColumn=function(e){var t=this.getTableHeaderColumns();return t&&t.length>e&&e>=0?t[e]:null},e.TableDomUtils.prototype.getTableHeaderColumnAccSelect=function(t){var l=this.getTableHeaderColumn(t);if(null!=l){var o=l.getElementsByClassName(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ACC_SELECT_COLUMN_CLASS);if(null!=o&&o.length>0)return o[0]}return null},e.TableDomUtils.prototype.getTableHeaderColumnResizeIndicator=function(){return this._getTableElementByClassName(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_RESIZE_INDICATOR_CLASS,!0)},e.TableDomUtils.prototype.getTableHeaderColumns=function(){var t=this.getTableHeaderRow();if(null!=t){var l=t.getElementsByClassName(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS);if(null!=l&&l.length>0)return l}return null},e.TableDomUtils.prototype.getTableHeaderLogicalColumns=function(){var e=this.getTableHeaderColumns();return e?this._getColspanLogicalElements(e):null},e.TableDomUtils.prototype.getTableHeaderRow=function(){return this._getTableElementByClassName(e.TableDomUtils.CSS_CLASSES._TABLE_HEADER_ROW_CLASS)},e.TableDomUtils.prototype.getTableId=function(){if(!this._tableId){var t=this.component._IsCustomElement()?this.getTableContainer():this.getTable();this._tableId=t.getAttribute(e.TableDomUtils.DOM_ATTR._ID)}return this._tableId},e.TableDomUtils.prototype.getTableInlineMessage=function(){return this._getTableElementByClassName(e.TableDomUtils.CSS_CLASSES._TABLE_INLINE_MESSAGE_CLASS,!0)},e.TableDomUtils.prototype.getTableStatusAccNotification=function(){return this._getTableElementByClassName(e.TableDomUtils.CSS_CLASSES._TABLE_STATUS_ACC_NOTIFICATION_CLASS,!0)},e.TableDomUtils.prototype.getTableStatusMessage=function(){return this._getTableElementByClassName(e.TableDomUtils.CSS_CLASSES._TABLE_STATUS_MESSAGE_CLASS,!0)},e.TableDomUtils.prototype.getTableUID=function(){if(!this._tableUID){var e=this.getTableId();null==e&&(e=(1e32*Math.random()).toString(36)),this._tableUID=e}return this._tableUID},e.TableDomUtils.prototype.hashCode=function(e){"string"!=t.type(e)&&(e=e.toString());var l=0;if(0==e.length)return l;var o,i=e.length;for(o=0;o<i;o++)l=(l<<5)-l+e.charCodeAt(o),l&=l;return l},e.TableDomUtils.prototype.insertTableBodyCell=function(t,l,o,i,s,a,n){if(this.setTableBodyCellAttributes(t,l,o,i,s),n)return a.appendChild(s),s;if(0==i){var r=a.getElementsByClassName(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_ACC_SELECT_CLASS);null!=r&&r.length>0?(r=r[0]).parentNode.insertBefore(s,r.nextSibling):a.insertBefore(s,a.firstChild)}else{var _=a.getElementsByClassName(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_CLASS);if(_.length>=i){var S=_[i-1];S.parentNode.insertBefore(s,S.nextSibling)}else a.appendChild(s)}return s},e.TableDomUtils.prototype.insertTableBodyRow=function(t,l,o,i){if(this.setTableBodyRowAttributes(o,l),null==i){var s=this.getTableBody(),a=s.getElementsByClassName(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS);if(0==t)s.insertBefore(l,s.firstChild);else if(a.length>=t){var n=a[t-1];n.parentNode.insertBefore(l,n.nextSibling)}else s.appendChild(l)}else i.appendChild(l);this.clearCachedDomRowData()},e.TableDomUtils.prototype.insertTableFooterCell=function(t,l){var o=this.getTableFooterRow(),i=o.getElementsByClassName(e.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS);if(0==t){var s=o.getElementsByClassName(e.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS);null!=s&&s.length>0?(s=s[0]).parentNode.insertBefore(l,s.nextSibling):o.insertBefore(l,o.firstChild)}else if(o.length>=t){var a=i[t-1];a.parentNode.insertBefore(l,a.nextSibling)}else o.appendChild(l);return l},e.TableDomUtils.prototype.insertTableHeaderColumn=function(l,o){var i=this.getTableHeaderRow(),s=this.getTableHeaderColumns();this.setTableHeaderColumnAttributes(l,o);var a=this.getTableHeaderColumn(l);if(a)t(a).replaceWith(t(o));else if(0==l){var n=i.getElementsByClassName(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ACC_SELECT_ROW_CLASS);null!=n&&n.length>0?(n=n[0]).parentNode.insertBefore(o,n.nextSibling):i.insertBefore(o,i.firstChild)}else if(s&&s.length>=l){var r=s[l-1];r.parentNode.insertBefore(o,r.nextSibling)}else i.appendChild(o)},e.TableDomUtils.prototype.isTableContainerScrollable=function(){var e=this.getTableContainer(),t=this.getTable(),l=this.component._isStatusMessageShown();l&&this.component._hideStatusMessage();var o=[];return e.clientHeight>0?t.clientHeight>e.clientHeight?o[0]=1:e.clientHeight-t.clientHeight>1?o[0]=-1:o[0]=0:o[0]=0,e.clientWidth>0?t.clientWidth>e.clientWidth?o[1]=1:e.clientWidth-t.clientWidth>1?o[1]=-1:o[1]=0:o[1]=0,l&&this.component._showStatusMessage(),o},e.TableDomUtils.prototype.moveTableBodyRowTouchSelectionAffordanceTop=function(l){var o=this.getTableBodyRowTouchSelectionAffordanceTop();if(null!=o){t(o).data("rowIdx",l),t(o.children[0]).data("rowIdx",l);var i=this.getTableBody(),s=this.getTableBodyRow(l).getBoundingClientRect(),a=this.getTableContainer().getBoundingClientRect();o.style[e.TableDomUtils.CSS_PROP._TOP]=s.top-a.top-o.clientHeight/2+e.TableDomUtils.CSS_VAL._PX,o.style[e.TableDomUtils.CSS_PROP._LEFT]=i.clientWidth/2+e.TableDomUtils.CSS_VAL._PX}},e.TableDomUtils.prototype.moveTableBodyRowTouchSelectionAffordanceBottom=function(l){var o=this.getTableBodyRowTouchSelectionAffordanceBottom();if(null!=o){t(o).data("rowIdx",l),t(o.children[0]).data("rowIdx",l);var i=this.getTableBody(),s=this.getTableBodyRow(l).getBoundingClientRect(),a=this.getTableContainer().getBoundingClientRect();o.style[e.TableDomUtils.CSS_PROP._TOP]=s.top-a.top+s.height-o.clientHeight/2+e.TableDomUtils.CSS_VAL._PX,o.style[e.TableDomUtils.CSS_PROP._LEFT]=i.clientWidth/2+e.TableDomUtils.CSS_VAL._PX}},e.TableDomUtils.prototype.moveTableHeaderColumn=function(l,o,i){var s=this.component._getColumnDefs(),a=this.getTableHeaderColumn(l),n=this.getTableFooterCell(l),r=null,_=null,S=null,T=null,d=null,u=!1;o==s.length&&(o-=1,u=!0),null!=a&&(d=a.getAttribute(e.TableDomUtils.DOM_ATTR._COLSPAN),null==(_=this.getTableHeaderColumn(o))||null!=d&&1!=d||(u?_.parentNode.insertBefore(a,_.nextSibling):_.parentNode.insertBefore(a,_))),null!=n&&(d=n.getAttribute(e.TableDomUtils.DOM_ATTR._COLSPAN),null==(S=this.getTableFooterCell(o))||null!=d&&1!=d||(u?S.parentNode.insertBefore(n,S.nextSibling):S.parentNode.insertBefore(n,S)));var h,c=this.getTableBodyRows();if(null!=c)for(h=0;h<c.length;h++)null!=(r=this.getTableBodyCell(h,l,null))&&(T=this.getTableBodyCell(h,o,null),d=r.getAttribute(e.TableDomUtils.DOM_ATTR._COLSPAN),null==T||null!=d&&1!=d||(u?T.parentNode.insertBefore(r,T.nextSibling):T.parentNode.insertBefore(r,T)));var m=[],C=this.options.columns.length;for(h=0;h<C;h++)m[h]=t.extend({},{},this.options.columns[h]);var E=l<o&&!u?o-1:o,D=m.splice(l,1);m.splice(E,0,D[0]);var b=this.component._columnDefArray.splice(l,1);if(this.component._columnDefArray.splice(E,0,b[0]),!this._columnsDestMap)for(this._columnsDestMap=[],h=0;h<m.length;h++)this._columnsDestMap[h]=h;var g=this._columnsDestMap.splice(l,1);return this._columnsDestMap.splice(E,0,g[0]),this.component.option("columns",m,{_context:{writeback:!0,originalEvent:i,internalSet:!0}}),this.component._queueTask(function(){}),this._columnsDestMap},e.TableDomUtils.prototype.refreshContextMenu=function(){var l=this._menuContainer;if(l){var o,i=l.querySelectorAll("[data-oj-command]");for(o=0;o<i.length;o++){var s=t(i[o]).children(e.TableDomUtils.DOM_ELEMENT._A);if(s.length>0){var a,n=i[o].getAttribute("data-oj-command").split("-");"sort"==(n=n[n.length-1])?a=this.component.getTranslatedString("labelSort"):"sortAsc"==n?a=this.component.getTranslatedString("labelSortAsc"):"sortDsc"==n?a=this.component.getTranslatedString("labelSortDsc"):"resize"==n&&(a=this.component.getTranslatedString("labelResize")),s.contents().filter(function(){return 3===this.nodeType})[0].nodeValue=a}}}},e.TableDomUtils.prototype.refreshTableDimensions=function(e,t,l,o){this._refreshTableDimensions(e,t,l,o),this.component._setCurrentRow(this.options.currentRow,null)},e.TableDomUtils.prototype.removeDragOverIndicatorColumn=function(){var t=this.getTable().querySelectorAll("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_BEFORE_CLASS+",."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_AFTER_CLASS),l=0;if(t&&t.length>0){var o=t.length;for(l=0;l<o;l++)t[l].classList.remove(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_BEFORE_CLASS),t[l].classList.remove(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_AFTER_CLASS)}},e.TableDomUtils.prototype.removeDragOverIndicatorRow=function(){var l=this.getTableBody(),o=l.getElementsByClassName(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_DRAG_INDICATOR_BEFORE_CLASS),i=l.getElementsByClassName(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_DRAG_INDICATOR_AFTER_CLASS),s=0;if(o&&o.length>0){var a=o.length;for(s=0;s<a;s++)t(o[s]).remove()}if(i&&i.length>0){var n=i.length;for(s=0;s<n;s++)t(i[s]).remove()}var r=this.getTableBodyRows();null!=r&&0!=r.length||this.component._showNoDataMessage()},e.TableDomUtils.prototype.removeTableBodyRow=function(l){var o=this.getTableBodyRow(l);null!=o&&(e.Components.subtreeDetached(o),this.component._hasCellTemplate&&this.component._cleanTemplateNodes(o),t(o).remove(),this.clearCachedDomRowData())},e.TableDomUtils.prototype.removeAllTableBodyRows=function(){var l=this.getTableBodyRows();if(null!=l&&l.length>0){var o=this.getTableBody();null!=o&&(e.Components.subtreeDetached(o),this.component._hasCellTemplate&&(this.component._cleanTemplateNodes(o),this.component._hasCellTemplate=!1),t(o).empty()),this.clearCachedDomRowData()}},e.TableDomUtils.prototype.removeTableBodyRowTouchSelectionAffordance=function(){var l,o=this.getTableContainer().getElementsByClassName(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOUCH_AREA_CLASS);if(null!=o&&o.length>0)for(l=0;l<o.length;l++)t(o[l]).remove()},e.TableDomUtils.prototype.removeTableHeaderColumnDragImage=function(){var l=this.getTableContainer().querySelectorAll("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_IMAGE);if(l&&l.length>0){var o,i=l.length;for(o=0;o<i;o++)t(l[o]).remove()}},e.TableDomUtils.prototype.removeTableHeaderColumnResizeIndicator=function(){var l=this.getTableHeaderColumnResizeIndicator();l&&(t(l).remove(),this._clearCachedDom(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_RESIZE_INDICATOR_CLASS))},e.TableDomUtils.prototype.setScrollLeft=function(e,t){"rtl"===this.component._GetReadingDirection()&&(t=Math.abs(t),this._isWebkit()?t=e.scrollWidth-e.clientWidth-t:this._isFF()&&(t*=-1));e.scrollLeft!=t&&(e.scrollLeft=t)},e.TableDomUtils.prototype.setTableBodyCellAttributes=function(t,l,o,i,s){var a=s.getAttribute(e.TableDomUtils.DOM_ATTR._ID);if(!(null!=a&&a.length>0)){var n=this.options.accessibility,r=this.component._getColumnDefs()[i];if(null!=r){var _=null,S=this.component._isTableHeaderless();_=null!=n&&null!=n.rowHeader?n.rowHeader:this.component._getColumnDefs()[0].id;var T=null!=l?l.toString():t.toString(),d=null==o?this.hashCode(T):o,u=this.getTableId()+":"+_+"_"+d,h=this.getTableId()+":"+r.id;_==r.id?(a=u,S&&(h="")):(a=u+"_"+i,h=S?u:h+" "+u),s.setAttribute(e.TableDomUtils.DOM_ATTR._ID,a),s.getAttribute(e.TableDomUtils.DOM_ATTR._HEADERS)||s.setAttribute(e.TableDomUtils.DOM_ATTR._HEADERS,h)}}},e.TableDomUtils.prototype.setTableBodyRowAttributes=function(e,l){t(l).data("rowKey",e.key),t(l).data("rowData",e.data)},e.TableDomUtils.prototype.setTableHeaderColumnAttributes=function(t,l){var o=this.component._getColumnDefs()[t];l.getAttribute(e.TableDomUtils.DOM_ATTR._ID)||l.setAttribute(e.TableDomUtils.DOM_ATTR._ID,this.getTableId()+":"+o.id)},e.TableDomUtils.prototype.setTableColumnCellsClass=function(e,t,l){var o=this.getTableBodyRows();if(null!=o&&o.length>0)if(null===e){var i=null;if(null!=(i=t?this.getTableBody().querySelectorAll("[td]"):this.getTableBody().querySelectorAll("."+l))&&i.length>0){var s=i.length;for(a=0;a<s;a++)t?i[a].classList.add(l):i[a].classList.remove(l)}}else{var a,n,r=o.length;for(a=0;a<r;a++)n=this.getTableBodyCell(a,e,null),t?n.classList.add(l):n.classList.remove(l)}},e.TableDomUtils.prototype.setTableBodyMessage=function(e){var l=this.getTableBodyMessageCell();t(l).empty(),l.appendChild(document.createTextNode(e))},e.TableDomUtils.prototype.setTableInlineMessage=function(l,o,i){var s=this.getTableInlineMessage();t(s).empty(),t(s).append(e.PopupMessagingStrategyUtils.buildMessageHtml(document,l,o,i,null))},e.TableDomUtils.prototype.setTableStatusAccNotification=function(e){var l=this.getTableStatusAccNotification();t(l).empty(),l.appendChild(document.createTextNode(e))},e.TableDomUtils.prototype.styleInitialTable=function(){var t=this.getTable(),l=(this.getTableContainer(),t.getElementsByTagName(e.TableDomUtils.DOM_ELEMENT._THEAD));l=l.length>0?l[0]:null;var o=t.getElementsByTagName(e.TableDomUtils.DOM_ELEMENT._TFOOT);o=o.length>0?o[0]:null;var i=t.getElementsByTagName(e.TableDomUtils.DOM_ELEMENT._TBODY);i=i.length>0?i[0]:null,t.setAttribute(e.TableDomUtils.DOM_ATTR._TABINDEX,"0"),this.component._focusable({element:t,applyHighlight:!0,setupHandlers:this._focusSetupHandlers.bind(this)}),this.styleTableHeader(l),this.styleTableFooter(o),this.styleTableBody(i)},e.TableDomUtils.prototype.styleTableBody=function(t){t.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_BODY_CLASS),t.setAttribute(e.Components._OJ_CONTAINER_ATTR,this.component.widgetName)},e.TableDomUtils.prototype.styleTableBodyCell=function(l,o,i){this.options;var s=this.component._getColumnDefs()[l];!i&&o.classList.contains(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_CLASS)||(o.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_CLASS),o.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_DATE_CELL_FORM_CONTROL_CLASS),null==s||null==s.style||!i&&o.getAttribute(e.TableDomUtils.DOM_ATTR._STYLE)==s.style||o.setAttribute(e.TableDomUtils.DOM_ATTR._STYLE,s.style),null==s||null==s.className||!i&&t(o).hasClass(s.className)||t(o).addClass(s.className)),this._isVerticalGridEnabled()&&(!i&&o.classList.contains(e.TableDomUtils.CSS_CLASSES._TABLE_VGRID_LINES_CLASS)||o.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_VGRID_LINES_CLASS))},e.TableDomUtils.prototype.styleTableBodyRow=function(t,l){!l&&t.classList.contains(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS)||t.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS),this._isHorizontalGridEnabled()&&(!l&&t.classList.contains(e.TableDomUtils.CSS_CLASSES._TABLE_HGRID_LINES_CLASS)||t.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_HGRID_LINES_CLASS))},e.TableDomUtils.prototype.styleTableContainer=function(t){t.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_CLASS),t.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_CONTAINER_CLASS),t.classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._WIDGET),this.options.display==e.TableDomUtils._OPTION_DISPLAY._GRID?t.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_COMPACT_CLASS):t.classList.remove(e.TableDomUtils.CSS_CLASSES._TABLE_COMPACT_CLASS);var l=this.options.editMode;null!=l&&l!=this.component._OPTION_EDIT_MODE._NONE?t.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_EDIT_CLASS):t.classList.remove(e.TableDomUtils.CSS_CLASSES._TABLE_EDIT_CLASS)},e.TableDomUtils.prototype.styleTableFooter=function(t){t&&(t.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CLASS),t.getElementsByTagName(e.TableDomUtils.DOM_ELEMENT._TR)[0].classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_ROW_CLASS))},e.TableDomUtils.prototype.styleTableFooterCell=function(l,o){this.options,this.component._getColumnDefs().length;var i=this.component._getColumnDefs()[l];null!=i.footerStyle&&o.setAttribute(e.TableDomUtils.DOM_ATTR._STYLE,i.footerStyle),o.classList.contains(e.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS)||o.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS),this._isVerticalGridEnabled()&&!o.classList.contains(e.TableDomUtils.CSS_CLASSES._TABLE_VGRID_LINES_CLASS)&&o.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_VGRID_LINES_CLASS),i.footerClassName&&t(o).addClass(i.footerClassName)},e.TableDomUtils.prototype.styleTableHeader=function(t){if(t){t.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_HEADER_CLASS),t.style[e.TableDomUtils.CSS_PROP._DISPLAY]="table-header-group";var l=t.getElementsByTagName(e.TableDomUtils.DOM_ELEMENT._TR)[0];l.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_HEADER_ROW_CLASS),l.style[e.TableDomUtils.CSS_PROP._POSITION]=e.TableDomUtils.CSS_VAL._RELATIVE}},e.TableDomUtils.prototype.styleTableHeaderColumn=function(l,o,i,s){var a=this.component._getColumnDefs()[l];!s&&o.classList.contains(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS)||(o.classList.add(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS),this._isVerticalGridEnabled()&&(!s&&o.classList.contains(e.TableDomUtils.CSS_CLASSES._TABLE_VGRID_LINES_CLASS)||o.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_VGRID_LINES_CLASS)),null==a.headerStyle||!s&&o.getAttribute(e.TableDomUtils.DOM_ATTR._STYLE)==a.headerStyle||o.setAttribute(e.TableDomUtils.DOM_ATTR._STYLE,a.headerStyle),null==a.headerClassName||!s&&t(o).hasClass(a.headerClassName)||t(o).addClass(a.headerClassName))},e.TableDomUtils.prototype._getColspanLogicalElements=function(t){var l,o,i=0,s=[],a=t.length;for(l=0;l<a;l++){var n=t[l].getAttribute(e.TableDomUtils.DOM_ATTR._COLSPAN);if(null!=n){for(n=parseInt(n,10),o=0;o<n;o++)s[i+o]=t[l];i+=n}else s[i++]=t[l]}return s},e.TableDomUtils.prototype._isHorizontalGridEnabled=function(){return this.options.horizontalGridVisible==e.TableDomUtils._OPTION_ENABLED||this.options.horizontalGridVisible==e.TableDomUtils._OPTION_AUTO},e.TableDomUtils.prototype._isVerticalGridEnabled=function(){return this.options.verticalGridVisible==e.TableDomUtils._OPTION_ENABLED||this.options.verticalGridVisible==e.TableDomUtils._OPTION_AUTO&&this.options.display==e.TableDomUtils._OPTION_DISPLAY._GRID},e.TableDomUtils.prototype._isFF=function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},e.TableDomUtils.prototype._isIE=function(){if(void 0===this._browserIsIE){var e=navigator.userAgent;if("Microsoft Internet Explorer"==navigator.appName){var t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(e);null!=t&&(this._browserIsIE=parseFloat(t[1]))}else e.indexOf("Trident")>=0?this._browserIsIE=11:this._browserIsIE=null}return this._browserIsIE},e.TableDomUtils.prototype._isWebkit=function(){if(void 0===this._browserIsWebkit){var e=navigator.userAgent.toLowerCase();this._browserIsWebkit=/webkit/.test(e)&&!/edge/.test(e)}return this._browserIsWebkit},e.TableDomUtils.prototype._refreshTableDimensions=function(l,o,i,s){this.options;var a=this.getTable(),n=this.getTableContainer(),r=this.getTableBody(),_=null,S=null;null!=this.component._scrollTop&&this.component._scrollTop>0&&(_=this.component._scrollTop),null!=this.component._scrollLeft&&this.component._scrollLeft>0&&(S=this.component._scrollLeft),this._removeTableDimensionsStyling(),this.styleTableContainer(n);var T=this.isTableContainerScrollable();if(1===T[0]?this._tableHeightConstrained=!0:this._tableHeightConstrained=!1,1===T[1]?this._tableWidthConstrained=!0:this._tableWidthConstrained=!1,null!=r){if(this._tableHeightConstrained||this._tableWidthConstrained){var d=this.getTableHeader(),u=this.getTableFooter(),h=this.getTableBottomSlot();n.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_SCROLL_CLASS),this._tableDimensions||(this._tableDimensions={}),l>0||o>0?(l>0&&this._tableWidthConstrained&&(this._tableDimensions[e.TableDomUtils.CSS_PROP._WIDTH]=l),o>0&&this._tableHeightConstrained&&(this._tableDimensions[e.TableDomUtils.CSS_PROP._HEIGHT]=o)):(this._tableHeightConstrained?this._tableDimensions[e.TableDomUtils.CSS_PROP._HEIGHT]=n.offsetHeight:this._tableDimensions[e.TableDomUtils.CSS_PROP._HEIGHT]=0,this._tableWidthConstrained?this._tableDimensions[e.TableDomUtils.CSS_PROP._WIDTH]=n.offsetWidth:this._tableDimensions[e.TableDomUtils.CSS_PROP._WIDTH]=0),null==this._tableBorderWidth&&(this._tableBorderWidth=t(n).outerWidth()-t(n).innerWidth()),null==this._tableBorderHeight&&(this._tableBorderHeight=t(n).outerHeight()-t(n).innerHeight());var c=0;this._tableHeightConstrained&&!this._tableWidthConstrained&&(n.style[e.TableDomUtils.CSS_PROP._OVERFLOW]=e.TableDomUtils.CSS_VAL._AUTO,c=n.offsetWidth-n.clientWidth,this._tableDimensions[e.TableDomUtils.CSS_PROP._WIDTH]>0?a.style[e.TableDomUtils.CSS_PROP._WIDTH]=n.clientWidth+e.TableDomUtils.CSS_VAL._PX:(a.style[e.TableDomUtils.CSS_PROP._WIDTH]=n.scrollWidth+c+e.TableDomUtils.CSS_VAL._PX,1===(T=this.isTableContainerScrollable())[1]&&(a.style[e.TableDomUtils.CSS_PROP._WIDTH]=n.clientWidth+e.TableDomUtils.CSS_VAL._PX)),n.style[e.TableDomUtils.CSS_PROP._OVERFLOW]=""),this._setColumnWidths(),this._tableHeightConstrained&&n.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_SCROLL_VERTICAL_CLASS),this._tableWidthConstrained&&n.classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_SCROLL_HORIZONTAL_CLASS);var m=a.clientWidth;c>0&&(a.style[e.TableDomUtils.CSS_PROP._WIDTH]=n.offsetWidth+e.TableDomUtils.CSS_VAL._PX);var C=0,E=a.getElementsByTagName("caption");if(null!=E&&E.length>0&&(E=E[0],C=t(E).outerHeight(),E.style[e.TableDomUtils.CSS_PROP._DISPLAY]=e.TableDomUtils.CSS_VAL._INLINE,null!=d)){var D=window.getComputedStyle(n);d.style[e.TableDomUtils.CSS_PROP._BORDER_TOP]=D[e.TableDomUtils.CSS_PROP._BORDER_TOP]}var b=0;null!=d&&(b=t(d).outerHeight());var g,A=0,R=0;this._tableWidthConstrained?r.style[e.TableDomUtils.CSS_PROP._WIDTH]=this._tableDimensions[e.TableDomUtils.CSS_PROP._WIDTH]-this._tableBorderWidth+e.TableDomUtils.CSS_VAL._PX:c>0&&(r.style[e.TableDomUtils.CSS_PROP._WIDTH]=m-this._tableBorderWidth+c+e.TableDomUtils.CSS_VAL._PX),null!=u&&(A=t(u).outerHeight(),r.style[e.TableDomUtils.CSS_PROP._TOP]=-1*A+e.TableDomUtils.CSS_VAL._PX);var L=0,O=this.getTableInlineMessage();null!=O&&O.style[e.TableDomUtils.CSS_PROP._DISPLAY]!=e.TableDomUtils.CSS_VAL._NONE&&O.clientHeight>0&&(L=t(O).outerHeight());var f=0;if(null!=h&&h.style[e.TableDomUtils.CSS_PROP._DISPLAY]!=e.TableDomUtils.CSS_VAL._NONE&&h.clientHeight>0&&(f=t(h).outerHeight()),this._tableHeightConstrained?(R=this._tableDimensions[e.TableDomUtils.CSS_PROP._HEIGHT]-b-A-C-L-f-this._tableBorderHeight)>0&&(r.style[e.TableDomUtils.CSS_PROP._HEIGHT]=R+e.TableDomUtils.CSS_VAL._PX,r.style[e.TableDomUtils.CSS_PROP._MIN_HEIGHT]=R+e.TableDomUtils.CSS_VAL._PX):R=t(r).outerHeight(),g=this.getScrollbarWidth(),this._tableWidthConstrained){var p=this.getTableBodyRows();if(null!=p&&p.length>0){if(r.style[e.TableDomUtils.CSS_PROP._OVERFLOW_X]=e.TableDomUtils.CSS_VAL._AUTO,n.style[e.TableDomUtils.CSS_PROP._OVERFLOW_X]=e.TableDomUtils.CSS_VAL._HIDDEN,n.style[e.TableDomUtils.CSS_PROP._OVERFLOW_Y]=e.TableDomUtils.CSS_VAL._HIDDEN,null!=d){var U=this._tableDimensions[e.TableDomUtils.CSS_PROP._WIDTH]-this._tableBorderWidth;U>0&&(d.style[e.TableDomUtils.CSS_PROP._WIDTH]=g>0?U-g+e.TableDomUtils.CSS_VAL._PX:U+e.TableDomUtils.CSS_VAL._PX)}}else r.style[e.TableDomUtils.CSS_PROP._OVERFLOW_X]=e.TableDomUtils.CSS_VAL._HIDDEN,n.style[e.TableDomUtils.CSS_PROP._OVERFLOW_X]=e.TableDomUtils.CSS_VAL._AUTO,n.style[e.TableDomUtils.CSS_PROP._OVERFLOW_Y]=e.TableDomUtils.CSS_VAL._HIDDEN}null!=u&&(u.style[e.TableDomUtils.CSS_PROP._TOP]=R+e.TableDomUtils.CSS_VAL._PX),this._setHeaderColumnLastWidth()}else this.component._isTableColumnsWidthSet()&&this._setColumnWidths();if(this._setHeaderColumnOverflowWidths(),this._removeTableBodyRowBottomBorder(T[0]<0),this.refreshTableStatusPosition(),null==_||i)i&&(this.getScroller().scrollTop=0,t(this.getScroller()).scroll());else{var I=this.getScroller().scrollHeight-this.getScroller().clientHeight;_=_>I?I:_,this.component._isLoadMoreOnScroll()&&I==_&&_--,this.getScroller().scrollTop=_,t(this.getScroller()).scroll()}null==S||s?s&&(this.setScrollLeft(this.getScroller(),0),t(this.getScroller()).scroll()):(this.setScrollLeft(this.getScroller(),S),t(this.getScroller()).scroll())}},e.TableDomUtils.prototype.refreshTableStatusPosition=function(){if(this.component._isStatusMessageShown()){var l=this.getTableContainer(),o=this.getTableBody(),i=this.getTableStatusMessage(),s=l;o.clientHeight>0&&(s=o),i.style[e.TableDomUtils.CSS_PROP._HEIGHT]=o.clientHeight+e.TableDomUtils.CSS_VAL._PX,i.style[e.TableDomUtils.CSS_PROP._WIDTH]=o.clientWidth+e.TableDomUtils.CSS_VAL._PX;var a=i.children[0],n="rtl"===this.component._GetReadingDirection(),r={my:"center",at:"center",collision:"none",of:s};r=e.PositionUtils.normalizeHorizontalAlignment(r,n),t(i).position(r);var _={my:"center",at:"center",collision:"none",of:i};_=e.PositionUtils.normalizeHorizontalAlignment(_,n),t(a).position(_)}},e.TableDomUtils.prototype._cacheDomElement=function(e,t){this._domCache||(this._domCache={}),this._domCache[e]=t},e.TableDomUtils.prototype._clearCachedDom=function(e){e&&this._domCache?delete this._domCache[e]:this._domCache={}},e.TableDomUtils.prototype._getCachedDomElement=function(e){return this._domCache?this._domCache[e]:null},e.TableDomUtils.prototype._isCachedDomElement=function(e){return this._domCache||(this._domCache={}),-1!==Object.keys(this._domCache).indexOf(e)},e.TableDomUtils.prototype._getTableElementByClassName=function(e,t){if(!this._isCachedDomElement(e)){var l=this.getTableContainer();if(l)if(this._cacheDomElement(e,null),t){if(this._cacheDomElement(e,this._getChildElementByClassName(l,e)),null==this._getCachedDomElement(e)){var o=this.getTable();this._cacheDomElement(e,this._getChildElementByClassName(o,e))}}else{var i=l.getElementsByClassName(e);i&&i.length>0&&this._cacheDomElement(e,i[0])}}return this._getCachedDomElement(e)},e.TableDomUtils.prototype._getChildElementByClassName=function(e,t){var l;if(null!=e.childNodes&&e.childNodes.length>0)for(l=0;l<e.childNodes.length;l++)if(null!=e.childNodes[l].classList&&e.childNodes[l].classList.contains(t))return e.childNodes[l];return null},e.TableDomUtils.prototype._focusSetupHandlers=function(e,t){this.component._setFocusInHandler(e),this.component._setFocusOutHandler(t)},e.TableDomUtils.prototype._removeHeaderColumnAndCellColumnWidths=function(){var t,l,o,i=this.component._getColumnDefs().length;for(t=0;t<i;t++)null!=(l=this.getTableHeaderColumn(t))&&(l.style[e.TableDomUtils.CSS_PROP._MIN_WIDTH]="");var s,a,n=this.getTableBodyRows();if(null!=n&&n.length>0)for(t=0;t<i;t++)if(null!=(s=this.getTableBodyCell(0,t,null))&&(s.style[e.TableDomUtils.CSS_PROP._MIN_WIDTH]="",null!=this._forcedWidthColumns&&this._forcedWidthColumns[t]))for(a=0;a<n.length;a++)(s=this.getTableBodyCell(a,t,null)).style[e.TableDomUtils.CSS_PROP._MIN_WIDTH]="",s.style[e.TableDomUtils.CSS_PROP._WIDTH]="",s.style[e.TableDomUtils.CSS_PROP._MAX_WIDTH]="";for(t=0;t<i;t++)null!=(o=this.getTableFooterCell(t))&&(o.style[e.TableDomUtils.CSS_PROP._MIN_WIDTH]="")},e.TableDomUtils.prototype._removeTableBodyRowBottomBorder=function(t){if(this._isHorizontalGridEnabled()){var l=this.getTableBodyRows();if(null!=l&&l.length>0){var o,i=l.length;for(o=0;o<i;o++)l[o].classList.contains(e.TableDomUtils.CSS_CLASSES._TABLE_HGRID_LINES_CLASS)||l[o].classList.add(e.TableDomUtils.CSS_CLASSES._TABLE_HGRID_LINES_CLASS);var s=l[l.length-1];t||s.classList.remove(e.TableDomUtils.CSS_CLASSES._TABLE_HGRID_LINES_CLASS)}}},e.TableDomUtils.prototype._removeTableDimensionsStyling=function(){var t=this.getTable(),l=this.getTableContainer(),o=this.getTableHeader(),i=this.getTableHeaderRow(),s=this.getTableFooter(),a=this.getTableFooterRow(),n=this.getTableBody();if(l.classList.remove(e.TableDomUtils.CSS_CLASSES._TABLE_SCROLL_CLASS),l.classList.remove(e.TableDomUtils.CSS_CLASSES._TABLE_SCROLL_VERTICAL_CLASS),l.classList.remove(e.TableDomUtils.CSS_CLASSES._TABLE_SCROLL_HORIZONTAL_CLASS),l.style[e.TableDomUtils.CSS_PROP._OVERFLOW]=e.TableDomUtils.CSS_VAL._VISIBLE,null!=o){o.setAttribute(e.TableDomUtils.DOM_ATTR._STYLE,""),i.setAttribute(e.TableDomUtils.DOM_ATTR._STYLE,"");var r,_=i.querySelectorAll("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_TEXT_CLASS);if(_&&_.length>0){var S=_.length;for(r=0;r<S;r++)_[r].style[e.TableDomUtils.CSS_PROP._WIDTH]=""}}null!=s&&(s.setAttribute(e.TableDomUtils.DOM_ATTR._STYLE,""),a.setAttribute(e.TableDomUtils.DOM_ATTR._STYLE,"")),t.style[e.TableDomUtils.CSS_PROP._DISPLAY]="",t.style[e.TableDomUtils.CSS_PROP._WIDTH]="",null!=n&&n.setAttribute(e.TableDomUtils.DOM_ATTR._STYLE,""),this._removeHeaderColumnAndCellColumnWidths()},e.TableDomUtils.prototype._setColumnWidths=function(){var t,l,o,i=this.component._getColumnDefs(),s=[],a=[],n=[],r=[],_=[];this._forcedWidthColumns=[];var S,T,d,u,h,c,m,C,E,D,b=i.length;for(S=0;S<b;S++)null!=(d=this.getTableHeaderColumn(S))&&(u=window.getComputedStyle(d),i[S].width>0?(this._forcedWidthColumns[S]=!0,E=i[S].width):(this._forcedWidthColumns[S]=!1,E=parseInt(u[e.TableDomUtils.CSS_PROP._WIDTH],10)||0),s[S]=E,o=this.component._getColumnRenderer(S,"header"),t||null!=o?a[S]=null!=o?(parseFloat(u[e.TableDomUtils.CSS_PROP._PADDING_RIGHT])||0)+(parseFloat(u[e.TableDomUtils.CSS_PROP._PADDING_LEFT])||0):t:(t=(parseFloat(u[e.TableDomUtils.CSS_PROP._PADDING_RIGHT])||0)+(parseFloat(u[e.TableDomUtils.CSS_PROP._PADDING_LEFT])||0),a[S]=t),(c=d.querySelectorAll("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_TEXT_CLASS))&&c.length>0&&(n[S]=c[0].clientHeight+e.TableDomUtils.CSS_VAL._PX));var g,A,R,L,O=[],f=this.getTableBodyRows();if(null!=f&&f.length>0)for(S=0;S<b;S++)null!=(g=this.getTableBodyCell(0,S,null))&&(this.component._getColumnRenderer(S,"cell"),this.component._hasRowOrCellRendererOrTemplate(S)?(A=window.getComputedStyle(g),R=(parseFloat(A[e.TableDomUtils.CSS_PROP._PADDING_RIGHT])||0)+(parseFloat(A[e.TableDomUtils.CSS_PROP._PADDING_LEFT])||0)):(l||(A=window.getComputedStyle(g),l=(parseFloat(A[e.TableDomUtils.CSS_PROP._PADDING_RIGHT])||0)+(parseFloat(A[e.TableDomUtils.CSS_PROP._PADDING_LEFT])||0)),R=l),r[S]=R,L=null,L=R>a[S]?s[S]-R+a[S]:s[S]+a[S]-R,O[S]=L);for(S=0;S<b;S++)null!=(m=this.getTableFooterCell(S))&&(C=window.getComputedStyle(m),_[S]=(parseFloat(C[e.TableDomUtils.CSS_PROP._PADDING_RIGHT])||0)+(parseFloat(C[e.TableDomUtils.CSS_PROP._PADDING_LEFT])||0));for(S=0;S<b;S++){if(null!=(d=this.getTableHeaderColumn(S))&&(n[S]&&(h=d.querySelectorAll("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CLASS))&&h.length>0&&(h[0].style[e.TableDomUtils.CSS_PROP._MIN_HEIGHT]=n[S]),this._forcedWidthColumns[S]?(D=s[S]-a[S]+e.TableDomUtils.CSS_VAL._PX,d.style[e.TableDomUtils.CSS_PROP._MIN_WIDTH]=D,d.style[e.TableDomUtils.CSS_PROP._WIDTH]=D,d.style[e.TableDomUtils.CSS_PROP._MAX_WIDTH]=D):d.style[e.TableDomUtils.CSS_PROP._MIN_WIDTH]=s[S]+e.TableDomUtils.CSS_VAL._PX),null!=(g=this.getTableBodyCell(0,S,null)))if(this._forcedWidthColumns[S])for(D=s[S]-r[S]+e.TableDomUtils.CSS_VAL._PX,T=0;T<f.length;T++)(g=this.getTableBodyCell(T,S,null)).style[e.TableDomUtils.CSS_PROP._MIN_WIDTH]=D,g.style[e.TableDomUtils.CSS_PROP._WIDTH]=D,g.style[e.TableDomUtils.CSS_PROP._MAX_WIDTH]=D;else g.style[e.TableDomUtils.CSS_PROP._MIN_WIDTH]=O[S]+e.TableDomUtils.CSS_VAL._PX;null!=(m=this.getTableFooterCell(S))&&(this._forcedWidthColumns[S]?(D=s[S]-_[S]+e.TableDomUtils.CSS_VAL._PX,m.style[e.TableDomUtils.CSS_PROP._MIN_WIDTH]=D,m.style[e.TableDomUtils.CSS_PROP._WIDTH]=D,m.style[e.TableDomUtils.CSS_PROP._MAX_WIDTH]=D):(L=_[S]>a[S]?s[S]-_[S]+a[S]:s[S]+a[S]-_[S],m.style[e.TableDomUtils.CSS_PROP._MIN_WIDTH]=L+e.TableDomUtils.CSS_VAL._PX))}},e.TableDomUtils.prototype._setHeaderColumnLastWidth=function(){var t=this.getScrollbarWidth();if(t>0&&this.getScrollbarHeight()<=1){var l=this.component._getColumnDefs(),o=l.length,i=this.getTableHeaderColumn(o-1),s=0;if(null!=i){var a,n,r;for(a=0;a<o;a++)l[a],n=this.getTableHeaderColumn(a),r=window.getComputedStyle(n),s+=parseInt(r[e.TableDomUtils.CSS_PROP._WIDTH],10)||0;var _=this.getTableHeader(),S=window.getComputedStyle(_);if((parseInt(S[e.TableDomUtils.CSS_PROP._WIDTH],10)||0)>s){var T=window.getComputedStyle(i),d=parseInt(T[e.TableDomUtils.CSS_PROP._WIDTH],10)||0;i.style[e.TableDomUtils.CSS_PROP._MIN_WIDTH]=d+t+e.TableDomUtils.CSS_VAL._PX}}}},e.TableDomUtils.prototype._setHeaderColumnOverflowWidths=function(){var t,l,o,i,s,a,n,r=this.component._getColumnDefs(),_=r.length;for(t=0;t<_;t++)l=r[t],null!=(o=this.getTableHeaderColumn(t))&&(i=o.getElementsByClassName(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CLASS)).length>0&&(i=i[0],(s=o.querySelectorAll("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_TEXT_CLASS))&&s.length>0&&(n=0,l.sortable==e.TableDomUtils._OPTION_ENABLED&&(n=o.querySelectorAll("."+e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_SORT_PACEHOLDER_CLASS)[0].clientWidth),i.clientWidth>0&&s[0].clientWidth+n>i.clientWidth&&(s[0].style[e.TableDomUtils.CSS_PROP._WIDTH]="",s[0].clientWidth>(a=o.clientWidth-n)+1&&(s[0].style[e.TableDomUtils.CSS_PROP._WIDTH]=a+e.TableDomUtils.CSS_VAL._PX))))},e.TableDomUtils.CSS_CLASSES={_CHECKBOX_ACC_SELECT_COLUMN_CLASS:"oj-table-checkbox-acc-select-column",_CHECKBOX_ACC_SELECT_ROW_CLASS:"oj-table-checkbox-acc-select-row",_TABLE_CONTAINER_CLASS:"oj-table-container",_TABLE_SCROLLER_CLASS:"oj-table-scroller",_TABLE_CLASS:"oj-table",_TABLE_COMPACT_CLASS:"oj-table-grid-display",_TABLE_EDIT_CLASS:"oj-table-editable",_TABLE_SCROLL_CLASS:"oj-table-scroll",_TABLE_SCROLL_VERTICAL_CLASS:"oj-table-scroll-vertical",_TABLE_SCROLL_HORIZONTAL_CLASS:"oj-table-scroll-horizontal",_TABLE_ELEMENT_CLASS:"oj-table-element",_TABLE_FOOTER_CLASS:"oj-table-footer",_TABLE_FOOTER_ROW_CLASS:"oj-table-footer-row",_TABLE_HEADER_CLASS:"oj-table-header",_TABLE_HEADER_ROW_CLASS:"oj-table-header-row",_TABLE_BOTTOM_SLOT_CLASS:"oj-table-slot-bottom",_COLUMN_HEADER_CELL_CLASS:"oj-table-column-header-cell",_COLUMN_HEADER_DROP_EMPTY_CELL_CLASS:"oj-table-column-header-drop-empty-cell",_COLUMN_HEADER_ACC_SELECT_COLUMN_CLASS:"oj-table-column-header-acc-select-column",_COLUMN_HEADER_ACC_SELECT_ROW_CLASS:"oj-table-column-header-acc-select-row",_COLUMN_HEADER_ACC_SELECT_ROW_TEXT_CLASS:"oj-table-column-header-acc-select-row-text",_COLUMN_HEADER_CLASS:"oj-table-column-header",_COLUMN_HEADER_TEXT_CLASS:"oj-table-column-header-text",_COLUMN_HEADER_ASC_CLASS:"oj-table-column-header-asc",_COLUMN_HEADER_DSC_CLASS:"oj-table-column-header-dsc",_COLUMN_HEADER_SORT_PACEHOLDER_CLASS:"oj-table-column-header-sort-placeholder",_COLUMN_HEADER_ACC_ASC_LINK_CLASS:"oj-table-column-header-acc-asc-link",_COLUMN_HEADER_ACC_DSC_LINK_CLASS:"oj-table-column-header-acc-dsc-link",_COLUMN_HEADER_ASC_LINK_CLASS:"oj-table-column-header-asc-link",_COLUMN_HEADER_DSC_LINK_CLASS:"oj-table-column-header-dsc-link",_COLUMN_HEADER_ASC_ICON_CLASS:"oj-table-column-header-asc-icon",_COLUMN_HEADER_DSC_ICON_CLASS:"oj-table-column-header-dsc-icon",_COLUMN_HEADER_DRAG_INDICATOR_BEFORE_CLASS:"oj-table-column-header-drag-indicator-before",_COLUMN_HEADER_DRAG_INDICATOR_AFTER_CLASS:"oj-table-column-header-drag-indicator-after",_COLUMN_HEADER_DRAG_IMAGE:"oj-table-column-header-cell-drag-image",_COLUMN_HEADER_RESIZE_INDICATOR_CLASS:"oj-table-column-header-resize-indicator",_TABLE_BODY_CLASS:"oj-table-body",_TABLE_DATA_ROW_CLASS:"oj-table-body-row",_TABLE_DATA_ROW_DRAG_INDICATOR_BEFORE_CLASS:"oj-table-body-row-drag-indicator-before",_TABLE_DATA_ROW_DRAG_INDICATOR_AFTER_CLASS:"oj-table-body-row-drag-indicator-after",_TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOP_CLASS:"oj-table-body-row-touch-selection-affordance-top",_TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_BOTTOM_CLASS:"oj-table-body-row-touch-selection-affordance-bottom",_TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOP_ICON_CLASS:"oj-table-body-row-touch-selection-affordance-top-icon",_TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_BOTTOM_ICON_CLASS:"oj-table-body-row-touch-selection-affordance-bottom-icon",_TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOUCH_AREA_CLASS:"oj-table-body-row-touch-selection-affordance-touch-area",_TABLE_DATA_ROW_EDIT_CLASS:"oj-table-body-row-edit",_TABLE_DATA_CURRENT_ROW_CLASS:"oj-table-body-current-row",_TABLE_DATA_CELL_CLASS:"oj-table-data-cell",_TABLE_DATA_CELL_ACC_SELECT_CLASS:"oj-table-data-cell-acc-select",_TABLE_DATA_CELL_EDIT_CLASS:"oj-table-data-cell-edit",_TABLE_DATE_CELL_FORM_CONTROL_CLASS:"oj-form-control-inherit",_TABLE_VGRID_LINES_CLASS:"oj-table-vgrid-lines",_TABLE_HGRID_LINES_CLASS:"oj-table-hgrid-lines",_TABLE_FOOTER_CELL_CLASS:"oj-table-footer-cell",_TABLE_FOOTER_DROP_EMPTY_CELL_CLASS:"oj-table-footer-drop-empty-cell",_TABLE_INLINE_MESSAGE_CLASS:"oj-table-inline-message",_TABLE_STATUS_ACC_NOTIFICATION_CLASS:"oj-table-status-acc-notification",_TABLE_STATUS_MESSAGE_CLASS:"oj-table-status-message",_TABLE_STATUS_MESSAGE_TEXT_CLASS:"oj-table-status-message-text",_TABLE_LOADING_ICON_CLASS:"oj-table-loading-icon",_TABLE_BODY_MESSAGE_CLASS:"oj-table-body-message",_TABLE_BODY_MESSAGE_ROW_CLASS:"oj-table-body-message-row",_ICON_CLASS:"oj-icon",_WIDGET_ICON_CLASS:"oj-component-icon",_HIDDEN_CONTENT_ACC_CLASS:"oj-helper-hidden-accessible"},e.TableDomUtils.CSS_PROP={_DISPLAY:"display",_VISIBILITY:"visibility",_POSITION:"position",_HEIGHT:"height",_WIDTH:"width",_TOP:"top",_BOTTOM:"bottom",_LEFT:"left",_RIGHT:"right",_PADDING_TOP:"padding-top",_PADDING_LEFT:"padding-left",_PADDING_RIGHT:"padding-right",_OVERFLOW:"overflow",_OVERFLOW_X:"overflow-x",_OVERFLOW_Y:"overflow-y",_MIN_WIDTH:"min-width",_MAX_WIDTH:"max-width",_MIN_HEIGHT:"min-height",_FLOAT:"float",_BORDER_TOP:"border-top",_BORDER_BOTTOM_WIDTH:"border-bottom-width",_BORDER_LEFT_WIDTH:"border-left-width",_MARGIN_BOTTOM:"margin-bottom",_VERTICAL_ALIGN:"vertical-align",_CURSOR:"cursor",_ZINDEX:"z-index",_BACKGROUND_COLOR:"background-color",_BOX_SIZING:"box-sizing"},e.TableDomUtils.CSS_VAL={_NONE:"none",_BLOCK:"block",_INLINE_BLOCK:"inline-block",_RELATIVE:"relative",_ABSOLUTE:"absolute",_INLINE:"inline",_AUTO:"auto",_HIDDEN:"hidden",_VISIBLE:"visible",_LEFT:"left",_PX:"px",_MIDDLE:"middle",_MOVE:"move",_FIXED:"fixed",_TRANSPARENT:"transparent",_BORDER_BOX:"border-box"},e.TableDomUtils.DOM_ATTR={_STYLE:"style",_TABINDEX:"tabindex",_TYPE:"type",_ID:"id",_TITLE:"title",_HREF:"href",_HEADERS:"headers",_COLSPAN:"colspan",_ROLE:"role",_ARIA_LABEL:"aria-label",_ARIA_HIDDEN:"aria-hidden"},e.TableDomUtils.DOM_ELEMENT={_DIV:"div",_A:"a",_TR:"tr",_TD:"td",_TH:"th",_TABLE:"table",_TBODY:"tbody",_THEAD:"thead",_TFOOT:"tfoot",_INPUT:"input",_UL:"ul",_SPAN:"span",_BUTTON:"button",_LABEL:"label"},e.TableDomUtils.MARKER_STYLE_CLASSES={_WIDGET:"oj-component",_ACTIVE:"oj-active",_CLICKABLE_ICON:"oj-clickable-icon-nocontext",_DISABLED:"oj-disabled",_ENABLED:"oj-enabled",_FOCUS:"oj-focus",_FOCUS_HIGHLIGHT:"oj-focus-highlight",_HOVER:"oj-hover",_SELECTED:"oj-selected",_WARNING:"oj-warning",_DRAGGABLE:"oj-draggable",_DRAG:"oj-drag"},e.TableDomUtils._COLUMN_HEADER_ROW_SELECT_ID="_hdrColRowSel",e.TableDomUtils._OPTION_AUTO="auto",e.TableDomUtils._OPTION_ENABLED="enabled",e.TableDomUtils._OPTION_DISABLED="disabled",e.TableDomUtils._OPTION_SELECTION_MODES={_SINGLE:"single",_MULTIPLE:"multiple"},e.TableDomUtils._OPTION_DISPLAY={_LIST:"list",_GRID:"grid"},e.TableRendererUtils={},e.TableRendererUtils.columnHeaderDefaultRenderer=function(l,o,i,s){var a=o.headerContext.parentElement,n=document.createElement(e.TableDomUtils.DOM_ELEMENT._DIV);n.classList.add(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CLASS),t(a).empty(),a.appendChild(n);var r=document.createElement(e.TableDomUtils.DOM_ELEMENT._DIV);r.classList.add(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_TEXT_CLASS),n.insertBefore(r,n.firstChild),null!=s?s(t(r)):this.columnHeaderDefaultTextRenderer(l,r,o)},e.TableRendererUtils.columnHeaderSortableIconRenderer=function(l,o,i,s){var a=o.columnIndex,n=l._getColumnDefs()[a],r=o.headerContext.parentElement,_=document.createElement(e.TableDomUtils.DOM_ELEMENT._DIV);_.classList.add(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CLASS),t(r).empty(),r.appendChild(_),"rtl"===l._GetReadingDirection()?_.style[e.TableDomUtils.CSS_PROP._PADDING_LEFT]="0px":_.style[e.TableDomUtils.CSS_PROP._PADDING_RIGHT]="0px";var S=document.createElement(e.TableDomUtils.DOM_ELEMENT._DIV);S.classList.add(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_CLASS),_.appendChild(S);var T,d,u=document.createElement(e.TableDomUtils.DOM_ELEMENT._A);u.setAttribute(e.TableDomUtils.DOM_ATTR._ARIA_HIDDEN,"true"),u.classList.add(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_LINK_CLASS),u.classList.add(e.TableDomUtils.CSS_CLASSES._WIDGET_ICON_CLASS),u.classList.add(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_ICON_CLASS),u.classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED),u.classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._CLICKABLE_ICON),l._AddHoverable(t(u)),S.appendChild(u),void 0!==e.TableRendererUtils._headerColumnAscWidth?(T=e.TableRendererUtils._headerColumnAscWidth,d=e.TableRendererUtils._headerColumnAscHeight):(T=t(S).width(),d=t(S).height(),T>0&&d>0&&(e.TableRendererUtils._headerColumnAscWidth=T,e.TableRendererUtils._headerColumnAscHeight=d));var h=document.createElement(e.TableDomUtils.DOM_ELEMENT._A);h.setAttribute(e.TableDomUtils.DOM_ATTR._TABINDEX,"0"),h.setAttribute(e.TableDomUtils.DOM_ATTR._HREF,"#"),h.classList.add(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ACC_ASC_LINK_CLASS),h.classList.add(e.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),h.setAttribute(e.TableDomUtils.DOM_ATTR._ARIA_LABEL,l.getTranslatedString("labelSortAsc")+" "+n.headerText),S.appendChild(h);var c=document.createElement(e.TableDomUtils.DOM_ELEMENT._DIV);c.classList.add(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_SORT_PACEHOLDER_CLASS),c.style[e.TableDomUtils.CSS_PROP._DISPLAY]=e.TableDomUtils.CSS_VAL._INLINE_BLOCK,c.style[e.TableDomUtils.CSS_PROP._VERTICAL_ALIGN]=e.TableDomUtils.CSS_VAL._MIDDLE,c.style[e.TableDomUtils.CSS_PROP._WIDTH]=T+e.TableDomUtils.CSS_VAL._PX,c.style[e.TableDomUtils.CSS_PROP._HEIGHT]=d+e.TableDomUtils.CSS_VAL._PX,_.appendChild(c);var m=document.createElement(e.TableDomUtils.DOM_ELEMENT._DIV);m.classList.add(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_CLASS),m.classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED),_.appendChild(m);var C=document.createElement(e.TableDomUtils.DOM_ELEMENT._A);C.setAttribute(e.TableDomUtils.DOM_ATTR._ARIA_HIDDEN,"true"),C.classList.add(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_LINK_CLASS),C.classList.add(e.TableDomUtils.CSS_CLASSES._WIDGET_ICON_CLASS),C.classList.add(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_ICON_CLASS),C.classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED),C.classList.add(e.TableDomUtils.MARKER_STYLE_CLASSES._CLICKABLE_ICON),l._AddHoverable(t(C)),m.appendChild(C);var E=document.createElement(e.TableDomUtils.DOM_ELEMENT._A);E.setAttribute(e.TableDomUtils.DOM_ATTR._TABINDEX,"0"),E.setAttribute(e.TableDomUtils.DOM_ATTR._HREF,"#"),E.classList.add(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ACC_DSC_LINK_CLASS),E.classList.add(e.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),E.setAttribute(e.TableDomUtils.DOM_ATTR._ARIA_LABEL,l.getTranslatedString("labelSortDsc")+" "+n.headerText),m.appendChild(E);var D=document.createElement(e.TableDomUtils.DOM_ELEMENT._DIV);D.classList.add(e.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_TEXT_CLASS),_.insertBefore(D,_.firstChild),null!=s?s(t(D)):this.columnHeaderDefaultTextRenderer(l,D,o)},e.TableRendererUtils.columnHeaderDefaultTextRenderer=function(e,t,l){var o=l.columnIndex,i=e._getColumnDefs()[o],s=null==i.headerText?"":i.headerText;t.appendChild(document.createTextNode(s))},e.TableRendererUtils.tableBodyRowDefaultRenderer=function(e,t,l,o){var i=o.rowContext.parentElement,s=e._getTableDomUtils().hashCode(l.key),a=e._getColumnDefs();e._getTableDomUtils().setTableBodyRowAttributes(l,i);var n,r=a.length;for(n=0;n<r;n++)this.tableBodyCellDefaultRenderer(e,t,n,l,s,o)},e.TableRendererUtils.tableBodyCellDefaultRenderer=function(l,o,i,s,a,n){var r=n.rowContext.parentElement,_=l._getColumnDefs()[i],S=l._getTableDomUtils().createTableBodyCell(o,i);l._getTableDomUtils().styleTableBodyCell(i,S,!0),l._getTableDomUtils().insertTableBodyCell(o,s.key,a,i,S,r,!0);var T=null;null!=_.field&&(T=e.TableRendererUtils._getObjectPath(s.data,_.field));var d=l._getColumnRenderer(i,"cell"),u=this.getRendererContextObject(l,S,{row:s}),h={cellContext:u,columnIndex:i,data:T,row:t.extend({},s.data),componentElement:u.componentElement,parentElement:u.parentElement};if(d){var c=d(h);null!=c?t(S).append(c):(S=t(r).children(":not(."+e.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_ACC_SELECT_CLASS+")")[i],l._getTableDomUtils().setTableBodyCellAttributes(o,s.key,a,i,S),l._getTableDomUtils().styleTableBodyCell(i,S,!1))}else{var m=l._getSlotTemplate(_.template);if(m){var C=l._getRootElement(),E=l._getTemplateEngine();if(null!=E){var D=e.TableRendererUtils.getCellSlotTemplateContextObject(l,h),b=E.execute(C,m,D,l.options.as);b instanceof Array||(b=[b]),b.map(function(e){S.appendChild(e)}),l._hasCellTemplate=!0}}else{var g=null==(T=e.TableRendererUtils._getVal(T))?"":T;S.appendChild(document.createTextNode(g))}}},e.TableRendererUtils.getRendererContextObject=function(t,l,o){var i={};i.component=e.Components.__GetWidgetConstructor(t.element,"ojTable");var s=t.options.data;if(e.PagingTableDataSource&&s instanceof e.PagingTableDataSource&&(s=s.getWrappedDataSource()),i.datasource=s,i.parentElement=l,null!=o.row){var a=o.row,n=a.key;if(i.status=this.getRendererStatusObject(t,a),t._hasEditableRow()){var r=t._getEditableRowKey();e.Object.compareValues(n,r)?i.mode="edit":i.mode="navigation"}else i.mode="navigation";this._copyMetadata(i,a,s)}return t._FixRendererContext(i)},e.TableRendererUtils.getRendererStatusObject=function(e,l){return{rowIndex:l.index,rowKey:l.key,currentRow:t.extend({},e._getCurrentRow())}},e.TableRendererUtils.getCellSlotTemplateContextObject=function(e,t){var l=this.getSlotTemplateContextObject(e),o=t.cellContext.status.rowIndex,i=t.cellContext.status.rowKey,s=t.columnIndex;return l[e._CONST_DATA]=t.data,l.row=t.row,l[e._CONST_INDEX]=o,l.columnIndex=s,l.mode=t.cellContext.mode,l[e._CONST_KEY]=i,l},e.TableRendererUtils.getHeaderSlotTemplateContextObject=function(e,t,l){var o=this.getSlotTemplateContextObject(e);return o[e._CONST_DATA]=t,o.columnIndex=l,o},e.TableRendererUtils.getSlotTemplateContextObject=function(e){return{componentElement:e._getRootElement()}},e.TableRendererUtils._copyMetadata=function(t,l,o){if(e.FlattenedTreeTableDataSource&&o instanceof e.FlattenedTreeTableDataSource){var i,s=l.metadata;for(i in null==s&&(s=o._getMetadata(l.index)),s)s.hasOwnProperty(i)&&(t[i]=s[i])}},e.TableRendererUtils._getObjectPath=function(e,t){if(null!=e&&("string"==typeof t||t instanceof String)&&(-1!=t.indexOf(".")||-1!=t.indexOf("[")&&-1!=t.indexOf("]"))){var l=e,o=!1;if(t.split(".").map(function(e){if(null!=l&&-1!=e.indexOf("[")&&-1!=e.indexOf("]")){var t=e.substr(0,e.indexOf("[")),i=parseInt(e.substr(e.indexOf("[")+1,e.indexOf("]")-e.indexOf("[")-1),10);l=l[t][i],o=!0}else null!=l&&void 0!==l[e]&&(l=l[e],o=!0)}),o)return l}else if(null==e)return null;return e[t]},e.TableRendererUtils._getVal=function(e){return"function"==typeof e?e():e},e.TableResizeUtils=function(e){this.component=e,this.options=e.options,this.Init()},e.Object.createSubclass(e.TableResizeUtils,e.Object,"oj.TableResizeUtils"),e.TableResizeUtils.prototype.Init=function(){e.TableResizeUtils.superclass.Init.call(this)},e.TableResizeUtils.prototype.setResizeCursor=function(e){var t=this.component._getEventTargetElement(e),l=this.component._getTableDomUtils().getElementColumnIdx(t);if(null==l)return!1;if(this.component._getColumnDefs()[l].resizable==this.component._OPTION_DISABLED&&this._resizeStartColumnIdx!==l-1&&this._resizeStartColumnIdx!==l+1)return!1;if(null==this._resizeStartColumnIdx)return null!==this._isHeaderColumnResizeStart(e)?(t.style.cursor="col-resize",!0):(t.style.cursor="",!1);var o=this.component._getTableDomUtils().getTableHeaderColumns();if(!o)return!1;var i=o.length;if(l==this._resizeStartColumnIdx||this._resizeColumnStart&&l==this._resizeStartColumnIdx-1||!this._resizeColumnStart&&l==this._resizeStartColumnIdx+1){if(0==this._resizeStartColumnIdx&&this._resizeColumnStart)return!1;if(this._resizeStartColumnIdx==i-1&&!this._resizeColumnStart)return!1;var s=this.component._getTableDomUtils().getTableHeaderColumnResizeIndicator();if(null!=s){if("rtl"===this.component._GetReadingDirection()){var a=e.target.getBoundingClientRect();this._resizeColumnStart?s.style.left=this._getPageX(e)-a.left+a.width+"px":s.style.left=this._getPageX(e)-a.left+"px"}else s.style.left=this._getPageX(e)+"px";return!0}}return!1},e.TableResizeUtils.prototype.handleHeaderColumnResizeStart=function(e){var t=this.component._getEventTargetElement(e),l=this.component._getTableDomUtils().getElementColumnIdx(t);if(null!=l){var o=this.component._getColumnDefs()[l];if(this._resizeColumnStart=this._isHeaderColumnResizeStart(e),o.resizable==this.component._OPTION_ENABLED&&null!==this._resizeColumnStart)return this._resizeStartColumnIdx=l,this._resizeStartPageX=this._getPageX(e),this._setTableHeaderColumnsResizeStyling(),this._setTableHeaderColumnResizeIndicator(l),!0}return this._resizeStartColumnIdx=null,this._resizeStartPageX=null,!1},e.TableResizeUtils.prototype.handleHeaderColumnResizeEnd=function(e){var l=this.component._getEventTargetElement(e),o=this.component._getTableDomUtils().getElementColumnIdx(l);if(null!==o&&o===this._resizeStartColumnIdx||this._resizeColumnStart&&o===this._resizeStartColumnIdx-1||!this._resizeColumnStart&&o===this._resizeStartColumnIdx+1){var i=this.component._getTableDomUtils().getTableHeaderColumn(this._resizeStartColumnIdx);if(null!=i){var s,a,n=i.getBoundingClientRect().width;if(a=this._resizeColumnStart?this._resizeStartPageX-this._getPageX(e):this._getPageX(e)-this._resizeStartPageX,Math.abs(a)>2){s=n+a;var r,_,S,T=[],d=this.options.columns.length;for(r=0;r<d;r++)T[r]=t.extend({},{},this.options.columns[r]);if(T[this._resizeStartColumnIdx].width=s,this._resizeColumnStart&&(S=this._resizeStartColumnIdx-1,_=this.component._getTableDomUtils().getTableHeaderColumn(S))){var u=_.getBoundingClientRect().width;T[S].width=u-a}return this.component.option("columns",T,{_context:{writeback:!0,internalSet:!0}}),this.component._clearCachedMetadata(),this.component._refresh(),this.clearTableHeaderColumnsResize(),!0}}}return this.clearTableHeaderColumnsResize(),!1},e.TableResizeUtils.prototype.clearTableHeaderColumnsResize=function(){this._resizeStartColumnIdx=null,this._resizeColumnStart=null,this._resizeStartPageX=null,this._clearTableHeaderColumnsResizeStyling(),this.component._getTableDomUtils().removeTableHeaderColumnResizeIndicator()},e.TableResizeUtils.prototype._getPageX=function(e){return void 0!==e.pageX?e.pageX:void 0!==e.changedTouches?e.changedTouches[0].pageX:0},e.TableResizeUtils.prototype._isHeaderColumnResizeStart=function(t){var l=null,o=t.target.getBoundingClientRect(),i=Math.abs(this._getPageX(t)-o.left),s=Math.abs(this._getPageX(t)-o.right);return i<=e.TableResizeUtils.RESIZE_OFFSET?l="rtl"!==this.component._GetReadingDirection():s<=e.TableResizeUtils.RESIZE_OFFSET&&(l="rtl"===this.component._GetReadingDirection()),l},e.TableResizeUtils.prototype._setTableHeaderColumnResizeIndicator=function(e){var t=this.component._getTableDomUtils().getTableHeaderColumnResizeIndicator();null==t&&(t=this.component._getTableDomUtils().createTableHeaderColumnResizeIndicator());var l=this.component._getTableDomUtils().getTable().getBoundingClientRect(),o=this.component._getTableDomUtils().getTableHeaderColumn(e).getBoundingClientRect(),i=t.getBoundingClientRect();t.style.height=l.height+"px",this._resizeColumnStart?("rtl"===this.component._GetReadingDirection()?t.style.left=o.left-i.left+o.width+"px":t.style.left=-1*i.left+o.left+"px",t.style.borderLeftWidth="2px",t.style.borderRightWidth="0"):("rtl"===this.component._GetReadingDirection()?t.style.left=o.left-i.left+"px":t.style.left=-1*i.left+o.left+o.width+"px",t.style.borderRightWidth="2px",t.style.borderLeftWidth="0")},e.TableResizeUtils.prototype._setTableHeaderColumnsResizeStyling=function(){this.component._getTableDomUtils().getTable().classList.add(e.TableResizeUtils.CSS_CLASSES._COLUMN_HEADER_RESIZING_CLASS)},e.TableResizeUtils.prototype._clearTableHeaderColumnsResizeStyling=function(){var t,l=this.component._getTableDomUtils().getTableHeaderColumns();if(l)for(t=0;t<l.length;t++)l[t].style.cursor="";this.component._getTableDomUtils().getTable().classList.remove(e.TableResizeUtils.CSS_CLASSES._COLUMN_HEADER_RESIZING_CLASS)},e.TableResizeUtils.RESIZE_OFFSET=10,e.TableResizeUtils.CSS_CLASSES={_COLUMN_HEADER_RESIZING_CLASS:"oj-table-column-header-resizing"},e.CustomElementBridge.registerMetadata("oj-table","baseComponent",{properties:{accessibility:{type:"Object",properties:{rowHeader:{type:"string"}}},as:{type:"string"},columns:{type:"Array<Object>",writeback:!0},columnsDefault:{type:"Object",properties:{className:{type:"string"},field:{type:"string"},footerClassName:{type:"string"},footerRenderer:{},footerStyle:{type:"string"},footerTemplate:{type:"string"},headerClassName:{type:"string"},headerRenderer:{},headerStyle:{type:"string"},headerTemplate:{type:"string"},headerText:{type:"string"},renderer:{},resizable:{type:"string"},sortable:{type:"string",enumValues:["auto","enabled","disabled","none"]},sortProperty:{type:"string"},style:{type:"string"},template:{type:"string"},width:{type:"number"}}},currentRow:{type:"Object",writeback:!0},data:{},display:{type:"string",enumValues:["list","grid"]},dnd:{type:"Object",properties:{drag:{type:"Object",properties:{rows:{type:"Object",properties:{dataTypes:{type:"string|Array<string>"},dragStart:{},drag:{},dragEnd:{}}}}},drop:{type:"Object",properties:{columns:{type:"Object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{},dragOver:{},dragLeave:{},drop:{}}},rows:{type:"Object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{},dragOver:{},dragLeave:{},drop:{}}}}},reorder:{type:"Object",properties:{columns:{type:"string",enumValues:["disabled","enabled"]}}}}},editMode:{type:"string",enumValues:["none","rowEdit"]},firstSelectedRow:{type:"Object",writeback:!0},horizontalGridVisible:{type:"string",enumValues:["auto","enabled","disabled"]},rowRenderer:{},scrollPolicy:{type:"string",enumValues:["auto","loadMoreOnScroll"]},scrollPolicyOptions:{type:"Object",properties:{fetchSize:{type:"number"},maxCount:{type:"number"}}},selection:{type:"Array<Object>",writeback:!0},selectionMode:{type:"Object",properties:{row:{type:"string",enumValues:["single","multiple"]},column:{type:"string",enumValues:["single","multiple"]}}},selectionRequired:{type:"boolean"},translations:{type:"Object",properties:{labelAccSelectionAffordanceBottom:{type:"string"},labelAccSelectionAffordanceTop:{type:"string"},labelDisableNonContiguousSelection:{type:"string"},labelEditRow:{type:"string",value:"Edit Row"},labelEnableNonContiguousSelection:{type:"string"},labelResize:{type:"string"},labelResizePopupSpinner:{type:"string"},labelResizePopupSubmit:{type:"string"},labelSelectAndEditRow:{type:"string",value:"Select And Edit Row"},labelSelectColum:{type:"string",value:"Select Column"},labelSelectRow:{type:"string",value:"Select Row"},labelSort:{type:"string",value:"Sort"},labelSortAsc:{type:"string",value:"Sort Ascending"},labelSortDsc:{type:"string",value:"Sort Descending"},msgColumnResizeWidthValidation:{type:"string",value:"Width value must be an integer."},msgFetchingData:{type:"string",value:"Fetching Data..."},msgInitializing:{type:"string",value:"Initializing..."},msgNoData:{type:"string",value:"No data to display."},msgScrollPolicyMaxCountDetail:{type:"string",value:"Please reload with smaller data set."},msgScrollPolicyMaxCountSummary:{type:"string",value:"Exceeded maximum rows for table scrolling."},msgStatusSortAscending:{type:"string",value:"{0} sorted in ascending order."},msgStatusSortDescending:{type:"string",value:"{0} sorted in descending order."}}},verticalGridVisible:{type:"string",enumValues:["auto","enabled","disabled"]}},methods:{getContextByNode:{},getDataForVisibleRow:{},refreshRow:{}},events:{animateEnd:{},animateStart:{},beforeCurrentRow:{},beforeRowEdit:{},beforeRowEditEnd:{},sort:{}},extension:{_INNER_ELEM:"table",_WIDGET_NAME:"ojTable"}}),e.CustomElementBridge.register("oj-table",{metadata:e.CustomElementBridge.getMetadata("oj-table")})});