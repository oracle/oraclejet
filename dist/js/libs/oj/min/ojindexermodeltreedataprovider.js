/**
 * @license
 * Copyright (c) 2014, 2024, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define(["ojs/ojcore-base","ojs/ojtranslation","ojs/ojarraydataprovider","ojs/ojarraytreedataprovider","ojs/ojindexer"],function(t,e,s,i,r){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;class n{constructor(i,r){this.data=i,this.options=r;let n=r.sections;if(null==n){const t=e.getTranslatedString("oj-ojIndexer.indexerCharacters");n=t.split("|")}n.push(t.IndexerModel.SECTION_OTHERS);let o,a=r.groupingStrategy;if(null==a){const e=this.options.groupingAttribute;a=s=>{const i=(s[e]?s[e]:s).toString().toUpperCase()[0];return n.indexOf(i)>-1?i:t.IndexerModel.SECTION_OTHERS}}i.sort((t,e)=>{const s=a(t),i=a(e);return n.indexOf(s)-n.indexOf(i)});for(let t=0;t<this.data.length;t++){const e=a(this.data[t]);o!==e&&(o=e,this._set(e,t))}const l=n.filter(t=>null!=this._get(t));this.sections=n,this.baseDataProvider=new s(l,{keys:l})}_set(t,e){null==this.pos&&(this.pos=[]),this.pos.push({key:t,value:e})}_get(t){if(void 0===this.pos)return null;for(const e of this.pos)if(e.key===t)return e.value;return null}getIndexableSections(){return this.sections.slice(0,this.sections.length-1)}getMissingSections(){if(null==this.missing){const t=[];for(let e=0;e<this.sections.length-1;e++){const s=this.sections[e];null==this._get(s)&&t.push(s)}this.missing=t}return this.missing}setSection(t){return this.options.sectionChangeHandler?this.options.sectionChangeHandler.call(this,t):Promise.resolve(t)}_getData(t,e){let s=this.sections[e],i=this._get(s);for(;null==i&&e<this.sections.length;)e+=1,s=this.sections[e],i=this._get(s);return(isNaN(i)||null==i)&&(i=this.data.length),this.data.slice(t,i)}getChildDataProvider(t,e){if(null===t)return this;const s=t;let r=this.sections.indexOf(s);if(r>-1){let e;const s=this._get(t);return null!=s?r===this.sections.length-1?e=this.data.slice(s):(r+=1,e=this._getData(s,r)):e=[],new i(e,{keyAttributes:this.options.keyAttributes,sortComparators:this.options.sortComparators,implicitSort:this.options.implicitSort})}return null}getCapability(t){return this.baseDataProvider.getCapability(t)}getTotalSize(){return this.baseDataProvider.getTotalSize()}containsKeys(t){return this.baseDataProvider.containsKeys(t)}fetchByKeys(t){return this.baseDataProvider.fetchByKeys(t)}fetchByOffset(t){return this.baseDataProvider.fetchByOffset(t)}fetchFirst(t){return this.baseDataProvider.fetchFirst(t)}isEmpty(){return this.baseDataProvider.isEmpty()}addEventListener(t,e){this.baseDataProvider.addEventListener(t,e)}removeEventListener(t,e){this.baseDataProvider.removeEventListener(t,e)}dispatchEvent(t){return this.baseDataProvider.dispatchEvent(t)}}return t._registerLegacyNamespaceProp("IndexerModelTreeDataProvider",n),n});
//# sourceMappingURL=ojindexermodeltreedataprovider.js.map