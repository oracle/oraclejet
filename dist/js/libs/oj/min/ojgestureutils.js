/**
 * @license
 * Copyright (c) 2014, 2023, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define(["exports","jquery","ojs/ojdomutils"],function(e,t,n){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const o={_EVENT_NAMESPACE:".contextMenu",stopDetectContextMenuGesture:function(e){e._clickListener&&(t(e).off(o._EVENT_NAMESPACE).removeClass("oj-menu-context-menu-launcher")[0].removeEventListener("click",e._clickListener,!0),clearTimeout(e._contextMenuPressHoldTimer),delete e._clickListener,delete e._contextMenuPressHoldTimer),e._touchStartAndMouseDownListener&&(e.removeEventListener("touchstart",e._touchStartAndMouseDownListener,{passive:!1}),delete e._touchStartAndMouseDownListener),e._touchMoveListener&&(e.removeEventListener("touchmove",e._touchMoveListener,{passive:!0}),delete e._touchMoveListener)},startDetectContextMenuGesture:function(e,u){var r,s,c,i,a=n.PRESS_HOLD_THRESHOLD,d=!1,l=!1,v=300,p=null,h=o._EVENT_NAMESPACE,m=!1;function f(n,o,r){if((d=r)&&t(e).one("touchend"+h,function(){m=!0,setTimeout(function(){m=!1},50)}),"touchstart"===p&&"contextmenu"===n.type||"contextmenu"===p&&"touchstart"===n.type||"keydown"===p&&"contextmenu"===n.type)return"keydown"===p&&"contextmenu"===n.type&&n.preventDefault(),p=null,void clearTimeout(i);n.isDefaultPrevented&&n.isDefaultPrevented()||n.originalEvent&&n.originalEvent.defaultPrevented||n.defaultPrevented||("touchstart"!==n.type&&"touchmove"!==n.type||(n.originalEvent=n),u(n,o),(n.isDefaultPrevented&&n.isDefaultPrevented()||n.defaultPrevented)&&("touchstart"!==n.type&&"contextmenu"!==n.type&&"keydown"!==n.type||(p=n.type,i=setTimeout(function(){p=null},v))))}var y=function(e){d&&(e.preventDefault(),e.stopPropagation(),d=!1)};e._clickListener=y,e.addEventListener("click",y,!0);var _=function(t){if("mousedown"!==t.type||!m){if(d=!1,"touchstart"===t.type&&1===t.touches.length){var n=t.touches[0];s=n.pageX,c=n.pageY,l=!0,r=setTimeout(f.bind(void 0,t,"touch",!0),a),e._contextMenuPressHoldTimer=r}return!0}};e._touchStartAndMouseDownListener=_,e.addEventListener("touchstart",_,{passive:!1});var M=function(e){var t=e.touches[0];return(Math.abs(s-t.pageX)>5||Math.abs(c-t.pageY)>5)&&(l=!1,clearTimeout(r)),!0};e._touchMoveListener=M,e.addEventListener("touchmove",M,{passive:!0}),t(e).on("mousedown"+h,_).on("touchend"+h+" touchcancel"+h,function(){return l=!1,clearTimeout(r),!0}).on("keydown"+h+" contextmenu"+h,function(e){("contextmenu"===e.type||121===e.keyCode&&e.shiftKey)&&f(e,l?"touch":"keydown"===e.type?"keyboard":"mouse",!1);return!0}),n.isTouchSupported()&&t(e).addClass("oj-menu-context-menu-launcher")}},u=o.startDetectContextMenuGesture,r=o.stopDetectContextMenuGesture;e.startDetectContextMenuGesture=u,e.stopDetectContextMenuGesture=r,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojgestureutils.js.map