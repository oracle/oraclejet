/**
 * @license
 * Copyright (c) 2014, 2018, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";!function(){ES6Promise.polyfill();var e={};"undefined"!=typeof window?e=window:"undefined"!=typeof self&&(e=self);var t=e.oj,i=e.oj={version:"5.1.0",revision:"2018-06-06_15-03-03",noConflict:function(){e.oj=t}};i.Logger={},i.Logger.LEVEL_NONE=0,i.Logger.LEVEL_ERROR=1,i.Logger.LEVEL_WARN=2,i.Logger.LEVEL_INFO=3,i.Logger.LEVEL_LOG=4,i.Logger._METHOD_ERROR="error",i.Logger._METHOD_WARN="warn",i.Logger._METHOD_INFO="info",i.Logger._METHOD_LOG="log",i.Logger._defaultOptions={level:i.Logger.LEVEL_ERROR,writer:null},i.Logger._options=i.Logger._defaultOptions,i.Logger.error=function(e){i.Logger._write(i.Logger.LEVEL_ERROR,i.Logger._METHOD_ERROR,arguments)},i.Logger.info=function(e){i.Logger._write(i.Logger.LEVEL_INFO,i.Logger._METHOD_INFO,arguments)},i.Logger.warn=function(e){i.Logger._write(i.Logger.LEVEL_WARN,i.Logger._METHOD_WARN,arguments)},i.Logger.log=function(e){i.Logger._write(i.Logger.LEVEL_LOG,i.Logger._METHOD_LOG,arguments)},i.Logger.option=function(e,t){var n,o={};if(0==arguments.length){for(n in i.Logger._options)i.Logger._options.hasOwnProperty(n)&&(o[n]=i.Logger._options[n]);return o}if("string"==typeof e&&void 0===t)return void 0===i.Logger._options[e]?null:i.Logger._options[e];if("string"==typeof e)i.Logger._options[e]=t;else{var s=e;for(n in s)s.hasOwnProperty(n)&&i.Logger.option(n,s[n])}},i.Logger._write=function(e,t,n){if(!(i.Logger.option("level")<e)){var o=i.Logger._getWriter();if(null!=o){if(1==n.length&&n[0]instanceof Function)n=[n[0]()];o[t]&&o[t].apply?o[t].apply(o,n):o[t]&&(o[t]=Function.prototype.bind.call(o[t],o),i.Logger._write(e,t,n))}}},i.Logger._getWriter=function(){var e=null;return i.Logger.option("writer")?e=i.Logger.option("writer"):"undefined"!=typeof window&&void 0!==window.console&&(e=window.console),e},i.Logger._validateOption=function(e){return void 0!==i.Logger._defaultOptions[e]};var n=e.__ojCheckpointManager;i.CHECKPOINT_MANAGER={},i.CHECKPOINT_MANAGER.startCheckpoint=function(e,t){n&&n.startCheckpoint(e,t)},i.CHECKPOINT_MANAGER.endCheckpoint=function(e){n&&n.endCheckpoint(e)},i.CHECKPOINT_MANAGER.getRecord=function(e){return n?n.getRecord(e):void 0},i.CHECKPOINT_MANAGER.matchRecords=function(e){return n?n.matchRecords(e):[]},i.CHECKPOINT_MANAGER.dump=function(e){i.Logger.info(function(){for(var t="Checkpoint Records:",n=i.CHECKPOINT_MANAGER.matchRecords(e),o=0;o<n.length;o++){var s=n[o];t=t+"\n"+s.name;var r=s.description;null!=r&&(t=t+" ("+r+")"),t=(t+=":\n")+"start: "+s.start+"\tduration: "+s.duration}return t})},i.Object=function(){this.Init()},i.Object.superclass=null,i.Object._typeName="oj.Object",i.Object._GET_FUNCTION_NAME_REGEXP=/function\s+([\w\$][\w\$\d]*)\s*\(/,i.Object.prototype={},i.Object.prototype.constructor=i.Object,i.Object.createSubclass=function(e,t,n){i.Assert.assertFunction(e),i.Assert.assertFunctionOrNull(t),i.Assert.assertStringOrNull(n),void 0===t&&(t=i.Object),i.Assert.assert(e!==t,"Class can't extend itself");var o=i.Object._tempSubclassConstructor;o.prototype=t.prototype,e.prototype=new o,e.prototype.constructor=e,e.superclass=e.superclass=t.prototype,n&&(e._typeName=n)},i.Object.copyPropertiesForClass=function(e,t){var n;for(n in i.Assert.assertFunction(e),i.Assert.assert(null!=t,"source object cannot be null"),t)t.hasOwnProperty(n)&&(e.prototype[n]=t[n])},i.Object._tempSubclassConstructor=function(){},i.Object.prototype.getClass=function(e){if(void 0===e)e=this;else if(null===e)return null;return e.constructor},i.Object.prototype.clone=function(){var e=new this.constructor;return i.CollectionUtils.copyInto(e,this),e},i.Object.prototype.toString=function(){return this.toDebugString()},i.Object.prototype.toDebugString=function(){return this.getTypeName()+" Object"},i.Object.getTypeName=function(e){i.Assert.assertFunction(e);var t,n,o=e._typeName;return null==o&&(t=e.toString(),o=(n=i.Object._GET_FUNCTION_NAME_REGEXP.exec(t))?n[1]:"anonymous",e._typeName=o),o},i.Object.prototype.getTypeName=function(){return i.Object.getTypeName(this.constructor)},i.Object.prototype.Init=function(){i.Assert.isDebug()&&i.Assert.assert(this.getTypeName,"Not an oj.Object");var e=this.constructor;e._initialized||i.Object._initClasses(e)},i.Object.ensureClassInitialization=function(e){i.Assert.assertFunction(e),e._initialized||i.Object._initClasses(e)},i.Object.prototype.equals=function(e){return this===e},i.Object.createCallback=function(e,t){return i.Assert.assertFunction(t),t.bind(e)},i.Object._initClasses=function(e){i.Assert.isDebug()&&(i.Assert.assertFunction(e),i.Assert.assert(!e._initialized)),e._initialized=!0;var t,n,o=e.superclass;o&&(t=o.constructor)&&!t._initialized&&i.Object._initClasses(t),(n=e.InitClass)&&n.call(e)},i.Object.compareValues=function(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if(null===e||null===t)return!1;if(e.constructor===t.constructor){if(Array.isArray(e))return i.Object._compareArrayValues(e,t);if(e.constructor===Object)return i.Object.__innerEquals(e,t);if(e.valueOf&&"function"==typeof e.valueOf)return e.valueOf()===t.valueOf()}return!1},i.Object._compareArrayValues=function(e,t){if(e.length!==t.length)return!1;for(var n=0,o=e.length;n<o;n++)if(!i.Object.compareValues(e[n],t[n]))return!1;return!0},i.Object._compareIdIndexObject=function(e,t){if("number"==typeof e&&"number"==typeof t||"string"==typeof e&&"string"==typeof t)return e==t;if("object"==typeof e&&"object"==typeof t){if(e.id&&t.id)return e.id==t.id&&(!e.index||!t.index||e.index==t.index);if(e.index&&t.index)return e.index==t.index}return!1},i.Object._compareArrayIdIndexObject=function(e,t){if(!e)return!t||0==t.length;if(!t)return!e||0==e.length;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++){for(var o=!1,s=0;s<t.length;s++)if(i.Object._compareIdIndexObject(e[n],t[s])){o=!0;break}if(!o)return!1}return!0},i.Object.__innerEquals=function(e,t){var n,o=!1;if(e===t)return!0;if(!(e instanceof Object&&t instanceof Object))return!1;if(e.constructor!==t.constructor)return!1;for(n in e)if(o||(o=!0),e.hasOwnProperty(n)){if(!t.hasOwnProperty(n))return!1;if(e[n]!==t[n]){if("object"!=typeof e[n])return!1;if(!i.Object.__innerEquals(e[n],t[n]))return!1}}for(n in t)if(o||(o=!0),t.hasOwnProperty(n)&&!e.hasOwnProperty(n))return!1;return!!o||JSON.stringify(e)===JSON.stringify(t)},i.Object.isEmpty=function(e){var t;if(null==e)return!0;for(t in e)if(e.hasOwnProperty(t))return!1;return!0},i.__isAmdLoaderPresent=function(){return"function"==typeof define&&define.amd},i.Assert={};i.Assert.forceDebug=function(){i.Assert.DEBUG=!0},i.Assert.clearDebug=function(){i.Assert.DEBUG=!1},i.Assert.isDebug=function(){return 1==i.Assert.DEBUG},i.Assert.assert=function(e,t){if(i.Assert.DEBUG&&!e){var n,o=t||"";if(arguments.length>2){for(o+="(",n=2;n<arguments.length;n+=1)o+=arguments[n];o+=")"}i.Assert.assertionFailed(o,1)}},i.Assert.failedInAbstractFunction=function(){i.Assert.DEBUG&&i.Assert.assertionFailed("Abstract function called",1)},i.Assert.assertPrototype=function(e,t,n){var o;i.Assert.DEBUG&&(null!=e?(i.Assert.assertType(t,"function",null,1,!1),(o=t.prototype).isPrototypeOf(e)||i.Assert.assertionFailed("object '"+e+"' doesn't match prototype "+o,1,n)):i.Assert.assertionFailed("null object doesn't match prototype "+o,1,n))},i.Assert.assertPrototypeOrNull=function(e,t,n){var o;i.Assert.DEBUG&&null!=e&&(null!=e?(i.Assert.assertType(t,"function",null,1,!1),(o=t.prototype).isPrototypeOf(e)||i.Assert.assertionFailed("object '"+e+"' doesn't match prototype "+o,1,n)):i.Assert.assertionFailed("null object doesn't match prototype "+o,1,n))},i.Assert.assertPrototypes=function(e,t,n,o){if(i.Assert.DEBUG){var s=t.prototype,r=n.prototype;s.isPrototypeOf(e)||r.isPrototypeOf(e)||i.Assert.assertionFailed("object '"+e+"' doesn't match prototype "+s+" or "+r,1,o)}},i.Assert.assertDomNodeOrNull=function(e,t){i.Assert.DEBUG&&e&&void 0===e.nodeType&&i.Assert.assertionFailed(e+" is not a DOM Node",t+1)},i.Assert.assertDomNode=function(e,t){i.Assert.DEBUG&&(e&&void 0!==e.nodeType||i.Assert.assertionFailed(e+" is not a DOM Node",t+1))},i.Assert.assertDomElement=function(e,t){i.Assert.DEBUG&&(i.Assert.assertDomNode(e,1),1!==e.nodeType?i.Assert.assertionFailed(e+" is not a DOM Element",1):t&&e.nodeName!==t&&i.Assert.assertionFailed(e+" is not a "+t+" Element",1))},i.Assert.assertDomElementOrNull=function(e,t){i.Assert.DEBUG&&null!=e&&(i.Assert.assertDomNode(e,1),1!==e.nodeType?i.Assert.assertionFailed(e+" is not a DOM Element",1):t&&e.nodeName!==t&&i.Assert.assertionFailed(e+" is not a "+t+" Element",1))},i.Assert.assertType=function(e,t,n,o,s){var r;i.Assert.DEBUG&&(null==e&&s||typeof e===t||(r=e+" is not of type "+t,n&&(r=n+r),o||(o=0),i.Assert.assertionFailed(r,o+1)))},i.Assert.assertObject=function(e,t){i.Assert.DEBUG&&i.Assert.assertType(e,"object",t,1,!1)},i.Assert.assertObjectOrNull=function(e,t){i.Assert.DEBUG&&i.Assert.assertType(e,"object",t,1,!0)},i.Assert.assertNonEmptyString=function(e,t){i.Assert.DEBUG&&(i.Assert.assertType(e,"string",t,1,!1),i.Assert.assert(e.length>0,"empty string"))},i.Assert.assertString=function(e,t){i.Assert.DEBUG&&i.Assert.assertType(e,"string",t,1,!1)},i.Assert.assertStringOrNull=function(e,t){i.Assert.DEBUG&&i.Assert.assertType(e,"string",t,1,!0)},i.Assert.assertFunction=function(e,t){i.Assert.DEBUG&&i.Assert.assertType(e,"function",t,1,!1)},i.Assert.assertFunctionOrNull=function(e,t){i.Assert.DEBUG&&i.Assert.assertType(e,"function",t,1,!0)},i.Assert.assertBoolean=function(e,t){i.Assert.DEBUG&&i.Assert.assertType(e,"boolean",t,1,!1)},i.Assert.assertNumber=function(e,t){i.Assert.DEBUG&&i.Assert.assertType(e,"number",t,1,!1)},i.Assert.assertNumberOrNull=function(e,t){i.Assert.DEBUG&&i.Assert.assertType(e,"number",t,1,!0)},i.Assert.assertArray=function(e,t){i.Assert.DEBUG&&(Array.isArray(e)||(void 0===t&&(t=e+" is not an array"),i.Assert.assertionFailed(t,1)))},i.Assert.assertArrayOrNull=function(e,t){i.Assert.DEBUG&&null!=e&&(Array.isArray(e)||(void 0===t&&(t=e+" is not an array"),i.Assert.assertionFailed(t,1)))},i.Assert.assertNonNumeric=function(e,t){i.Assert.DEBUG&&(isNaN(e)||(void 0===t&&(t=e+" is convertible to a number"),i.Assert.assertionFailed(t,1)))},i.Assert.assertNumeric=function(e,t){i.Assert.DEBUG&&isNaN(e)&&(void 0===t&&(t=e+" is not convertible to a number"),i.Assert.assertionFailed(t,1))},i.Assert.assertInSet=function(e,t,n){var o,s;if(null==e||void 0===t[e.toString()]){if(void 0===n){for(s in o=" is not in set: {",t)t.hasOwnProperty(s)&&(o+=s,o+=",");n=e+(o+="}")}i.Assert.assertionFailed(n,1)}},i.Assert.assertionFailed=function(e,t,i){t||(t=0);var n="Assertion";throw i&&(n+=" ("+i+")"),n+=" failed: ",void 0!==e&&(n+=e),new Error(n)};var o,s=e.__oj_Assert_DEBUG;function r(){}void 0!==s&&(i.Assert.DEBUG=s),i.EventSource=function(){this.Init()},i.Object.createSubclass(i.EventSource,i.Object,"oj.EventSource"),i.EventSource.prototype.Init=function(){this._eventHandlers=[],i.EventSource.superclass.Init.call(this)},i.EventSource.prototype.on=function(e,t){var i,n=!1;for(i=0;i<this._eventHandlers.length;i++)if(this._eventHandlers[i].eventType==e&&this._eventHandlers[i].eventHandlerFunc==t){n=!0;break}n||this._eventHandlers.push({eventType:e,eventHandlerFunc:t})},i.EventSource.prototype.off=function(e,t){var i;for(i=this._eventHandlers.length-1;i>=0;i--)if(this._eventHandlers[i].eventType==e&&this._eventHandlers[i].eventHandlerFunc==t){this._eventHandlers.splice(i,1);break}},i.EventSource.prototype.handleEvent=function(e,t){var i;for(i=0;i<this._eventHandlers.length;i++){var n=this._eventHandlers[i];if(n.eventType==e&&!1===n.eventHandlerFunc.apply(this,Array.prototype.slice.call(arguments).slice(1)))return!1}return!0},i.Config={},i.Config.getDeviceType=function(){return i.AgentUtils.getAgentInfo().deviceType},i.Config.getLocale=function(){var e,t;return i.__isAmdLoaderPresent()?(i.Assert.assert("undefined"!=typeof ojt,"ojtranslations module must be defined"),"root"==(e=ojt._ojLocale_)?"en":e):(null==(t=i.Config._locale)&&((t=document.documentElement.lang)||(t=void 0===navigator?"en":(navigator.language||navigator.userLanguage||"en").toLowerCase()),i.Config._locale=t=t.toLowerCase()),t)},i.Config.setLocale=function(e,t){if(i.__isAmdLoaderPresent()){var n="ojL10n!ojtranslations/nls/",o=[n+e+"/ojtranslations"],s=0;if(i.LocaleData&&(o.push(n+e+"/localeElements"),i.TimezoneData)){var r=i.TimezoneData.__getBundleNames();s=r.length,r.forEach(function(t){o.push(n+e+t)})}require(o,function(e,n){ojt=e,n&&i.LocaleData.__updateBundle(n);for(var o=0;o<s;o++){var r=arguments[o+2];i.TimezoneData.__mergeIntoLocaleElements(r)}t&&t()})}else i.Config._locale=e,t&&t()},i.Config.getResourceUrl=function(e){var t;return null==e||/^\/|:/.test(e)?e:(t=i.Config._resourceBaseUrl)?t+("/"==t.charAt(t.length-1)?"":"/")+e:i.__isAmdLoaderPresent()?require.toUrl("ojs/_foo_").replace(/[^\/]*$/,"../"+e):e},i.Config.setResourceBaseUrl=function(e){i.Config._resourceBaseUrl=e},i.Config.setAutomationMode=function(e){i.Config._automationMode=e},i.Config.getAutomationMode=function(){return i.Config._automationMode},i.Config.getVersionInfo=function(){var e="Oracle JET Version: "+i.version+"\n";e+="Oracle JET Revision: "+i.revision+"\n";var t="undefined"!=typeof window;return t&&window.navigator&&(e+="Browser: "+window.navigator.userAgent+"\n",e+="Browser Platform: "+window.navigator.platform+"\n"),$&&($.fn&&(e+="jQuery Version: "+$.fn.jquery+"\n"),$.ui&&$.ui.version&&(e+="jQuery UI Version: "+$.ui.version+"\n")),i.ComponentBinding&&(e+="Knockout Version: "+i.ComponentBinding.__getKnockoutVersion()+"\n"),t&&window.require&&(e+="Require Version: "+window.require.version+"\n"),e},i.Config.logVersionInfo=function(){console.log(i.Config.getVersionInfo())},i.Config.__getTemplateEngine=function(){if(!i.Config._templateEnginePromise){if(!i.__isAmdLoaderPresent())throw"JET Temlate engine cannot be loaded with an AMD loader";i.Config._templateEnginePromise=new Promise(function(e,t){require(["./ojtemplateengine"],e,t)})}return i.Config._templateEnginePromise},function(){if("undefined"!=typeof window){var e;if(!((e=document.createEvent("Event")).initEvent("foo",!0,!0),e.preventDefault(),e.defaultPrevented)){var t=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(t.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}"function"!=typeof window.CustomEvent&&(i.prototype=window.Event.prototype,window.CustomEvent=i)}function i(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}}(),function(){var e,t;"undefined"!=typeof window&&!window.setImmediate&&window.postMessage&&(window.setImmediate=function(){var n=arguments[0],o=Array.prototype.slice.call(arguments,1);"function"!=typeof n&&(n=new Function(n.toString()));var s=(isNaN(t)&&(t=0),++t);return e||(e=new Map),e.set(s,{callback:n,args:o}),1===e.size&&window.addEventListener("message",i),window.postMessage({id:s,message:"oj-setImmeidate"},"*"),s},window.clearImmediate=n);function i(t){var i=t.data;if(i&&"oj-setImmeidate"===i.message){var o=i.id,s=e.get(o);if(n(o),s){var r=s.callback,a=s.args;r.apply(window,a)}}}function n(t){e&&(e.delete(t),e.size<1&&(window.removeEventListener("message",i),e=null))}}(),function(){if("undefined"!=typeof window&&!window.__extends){var e,t=this&&this.__extends||(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});window.__extends=t}}(),"undefined"!=typeof window&&(window.Symbol?(window.Symbol.asyncIterator||(window.Symbol.asyncIterator="asyncIterator"),window.Symbol.iterator||(window.Symbol.iterator="iterator")):(window.Symbol={},window.Symbol.asyncIterator="asyncIterator",window.Symbol.iterator="iterator")),i.AgentUtils=function(){},i.AgentUtils.BROWSER={IE:"ie",FIREFOX:"firefox",SAFARI:"safari",CHROME:"chrome",EDGE:"edge",UNKNOWN:"unknown"},i.AgentUtils.ENGINE={TRIDENT:"trident",WEBKIT:"webkit",GECKO:"gecko",BLINK:"blink",EDGE_HTML:"edgehtml",UNKNOWN:"unknown"},i.AgentUtils.OS={WINDOWS:"Windows",SOLARIS:"Solaris",MAC:"Mac",UNKNOWN:"Unknown",ANDROID:"Android",IOS:"IOS",WINDOWSPHONE:"WindowsPhone",LINUX:"Linux"},i.AgentUtils.DEVICETYPE={PHONE:"phone",TABLET:"tablet",OTHERS:"others"},i.AgentUtils.getAgentInfo=function(e){i.StringUtils.isEmptyOrUndefined(e)&&(e=navigator.userAgent),e=e.toLowerCase();var t=i.StringUtils.hashCode(e),n=i.AgentUtils._currAgentInfo;if(n&&n.hashCode===t)return{os:n.os,browser:n.browser,browserVersion:n.browserVersion,deviceType:n.deviceType,engine:n.engine,engineVersion:n.engineVersion,hashCode:n.hashCode};var o=i.AgentUtils.OS.UNKNOWN,s=i.AgentUtils.BROWSER.UNKNOWN,r=0,a=i.AgentUtils.DEVICETYPE.OTHERS,l=i.AgentUtils.ENGINE.UNKNOWN,u=0;return e.indexOf("iphone")>-1||e.indexOf("ipad")>-1?o=i.AgentUtils.OS.IOS:e.indexOf("mac")>-1?o=i.AgentUtils.OS.MAC:e.indexOf("sunos")>-1?o=i.AgentUtils.OS.SOLARIS:e.indexOf("android")>-1?o=i.AgentUtils.OS.ANDROID:e.indexOf("linux")>-1?o=i.AgentUtils.OS.LINUX:e.indexOf("windows phone")>-1?o=i.AgentUtils.OS.WINDOWSPHONE:e.indexOf("win")>-1&&(o=i.AgentUtils.OS.WINDOWS),o==i.AgentUtils.OS.ANDROID?a=e.indexOf("mobile")>-1?i.AgentUtils.DEVICETYPE.PHONE:i.AgentUtils.DEVICETYPE.TABLET:o==i.AgentUtils.OS.IOS&&(a=e.indexOf("iphone")>-1?i.AgentUtils.DEVICETYPE.PHONE:i.AgentUtils.DEVICETYPE.TABLET),e.indexOf("msie")>-1?(s=i.AgentUtils.BROWSER.IE,r=i.AgentUtils._parseFloatVersion(e,/msie (\d+[.]\d+)/),e.indexOf("trident")&&(l=i.AgentUtils.ENGINE.TRIDENT,u=i.AgentUtils._parseFloatVersion(e,/trident\/(\d+[.]\d+)/))):e.indexOf("trident")>-1?(s=i.AgentUtils.BROWSER.IE,r=i.AgentUtils._parseFloatVersion(e,/rv:(\d+[.]\d+)/),e.indexOf("trident")&&(l=i.AgentUtils.ENGINE.TRIDENT,u=i.AgentUtils._parseFloatVersion(e,/trident\/(\d+[.]\d+)/))):e.indexOf("edge")>-1?(s=i.AgentUtils.BROWSER.EDGE,r=u=i.AgentUtils._parseFloatVersion(e,/edge\/(\d+[.]\d+)/),l=i.AgentUtils.ENGINE.EDGE_HTML):e.indexOf("chrome")>-1?(s=i.AgentUtils.BROWSER.CHROME,(r=i.AgentUtils._parseFloatVersion(e,/chrome\/(\d+[.]\d+)/))>=28?(l=i.AgentUtils.ENGINE.BLINK,u=r):(l=i.AgentUtils.ENGINE.WEBKIT,u=i.AgentUtils._parseFloatVersion(e,/applewebkit\/(\d+[.]\d+)/))):e.indexOf("safari")>-1?(s=i.AgentUtils.BROWSER.SAFARI,r=i.AgentUtils._parseFloatVersion(e,/version\/(\d+[.]\d+)/),l=i.AgentUtils.ENGINE.WEBKIT,u=i.AgentUtils._parseFloatVersion(e,/applewebkit\/(\d+[.]\d+)/)):e.indexOf("firefox")>-1&&(s=i.AgentUtils.BROWSER.FIREFOX,r=i.AgentUtils._parseFloatVersion(e,/rv:(\d+[.]\d+)/),l=i.AgentUtils.ENGINE.GECKO,u=i.AgentUtils._parseFloatVersion(e,/gecko\/(\d+)/)),{os:(n=i.AgentUtils._currAgentInfo={hashCode:t,os:o,browser:s,browserVersion:r,deviceType:a,engine:l,engineVersion:u}).os,browser:n.browser,browserVersion:n.browserVersion,deviceType:n.deviceType,engine:n.engine,engineVersion:n.engineVersion,hashCode:n.hashCode}},i.AgentUtils._parseFloatVersion=function(e,t){var i=e.match(t);if(i){var n=i[1];if(n)return parseFloat(n)}return 0},i.ThemeUtils=function(){},i.ThemeUtils.getThemeName=function(){return(i.ThemeUtils.parseJSONFromFontFamily("oj-theme-json")||{}).name},i.ThemeUtils.getThemeTargetPlatform=function(){return(i.ThemeUtils.parseJSONFromFontFamily("oj-theme-json")||{}).targetPlatform},i.ThemeUtils.clearCache=function(){this._cache=null},i.ThemeUtils.parseJSONFromFontFamily=function(e){null==this._cache&&(this._cache={},this._null_cache_value={},this._headfontstring=window.getComputedStyle(document.head).getPropertyValue("font-family"));var t=this._cache[e];if(t===this._null_cache_value)return null;if(null!=t)return t;var n=document.createElement("meta");n.className=e,document.head.appendChild(n);var o=window.getComputedStyle(n).getPropertyValue("font-family");if(null!=o)if(o==this._headfontstring)i.Logger.warn("parseJSONFromFontFamily: When the selector ",e," is applied the font-family read off the dom element is ",o,". The parent dom elment has the same font-family value."," This is interpreted to mean that no value was sent down for selector ",e,". Null will be returned.");else{var s=o.replace(/^['"]+|\s+|\\|(;\s?})+|['"]$/g,"");if(s)try{t=JSON.parse(s)}catch(o){var r=s.indexOf(","),a=!1;if(r>-1){s=s.substring(r+2);try{t=JSON.parse(s),a=!0}catch(e){}}if(0==a)throw i.Logger.error("Error parsing json for selector "+e+".\nString being parsed is "+s+". Error is:\n",o),document.head.removeChild(n),o}}return document.head.removeChild(n),this._cache[e]=null==t?this._null_cache_value:t,t},i.ResponsiveUtils=function(){},i.ResponsiveUtils.SCREEN_RANGE={SM:"sm",MD:"md",LG:"lg",XL:"xl",XXL:"xxl"},i.ResponsiveUtils.FRAMEWORK_QUERY_KEY={SM_UP:"sm-up",MD_UP:"md-up",LG_UP:"lg-up",XL_UP:"xl-up",XXL_UP:"xxl-up",SM_ONLY:"sm-only",MD_ONLY:"md-only",LG_ONLY:"lg-only",XL_ONLY:"xl-only",MD_DOWN:"md-down",LG_DOWN:"lg-down",XL_DOWN:"xl-down",HIGH_RESOLUTION:"high-resolution"},i.ResponsiveUtils._RANGE={},i.ResponsiveUtils._RANGE[i.ResponsiveUtils.SCREEN_RANGE.SM]=0,i.ResponsiveUtils._RANGE[i.ResponsiveUtils.SCREEN_RANGE.MD]=1,i.ResponsiveUtils._RANGE[i.ResponsiveUtils.SCREEN_RANGE.LG]=2,i.ResponsiveUtils._RANGE[i.ResponsiveUtils.SCREEN_RANGE.XL]=3,i.ResponsiveUtils._RANGE[i.ResponsiveUtils.SCREEN_RANGE.XXL]=4,i.ResponsiveUtils._getMediaQueryFromClass=function(e){var t=document.getElementsByClassName(e).item(0);return null===t&&((t=document.createElement("meta")).className=e,document.head.appendChild(t)),window.getComputedStyle(t).getPropertyValue("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")},i.ResponsiveUtils.getFrameworkQuery=function(e){var t="oj-mq-"+e,n=i.ResponsiveUtils._getMediaQueryFromClass(t);return"null"==n?null:n},i.ResponsiveUtils.compare=function(e,t){var n=i.ResponsiveUtils._RANGE[e],o=i.ResponsiveUtils._RANGE[t];if(null==n)throw"size1 param "+e+" illegal, please use one of the screen size constants like oj.ResponsiveUtils.SCREEN_RANGE.MD";if(null==o)throw"size2 param "+t+" illegal, please use one of the screen size constants like oj.ResponsiveUtils.SCREEN_RANGE.MD";return n-o},i.StringUtils={},i.StringUtils._TRIM_ALL_RE=/^\s*|\s*$/g,i.StringUtils.isEmpty=function(e){return null===e||0===i.StringUtils.trim(e).length},i.StringUtils.isEmptyOrUndefined=function(e){return!(void 0!==e&&!i.StringUtils.isEmpty(e))},i.StringUtils.isString=function(e){return null!==e&&("string"==typeof e||e instanceof String)},i.StringUtils.trim=function(e){return i.StringUtils.isString(e)?e.replace(i.StringUtils._TRIM_ALL_RE,""):e},i.StringUtils.hashCode=function(e){var t=0;if(0===e.length)return t;for(var i=0;i<e.length;i++){t=(t<<5)-t+e.charCodeAt(i),t&=t}return t},String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var i=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>i.length)&&(t=i.length),t-=e.length;var n=i.lastIndexOf(e,t);return-1!==n&&n===t}),i.CollectionUtils={},i.CollectionUtils.copyInto=function(e,t,n,o,s){return i.CollectionUtils._copyIntoImpl(e,t,n,o,s,0)},i.CollectionUtils.isPlainObject=function(e){if(null!==e&&"object"==typeof e)try{if(e.constructor&&e.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!0}catch(e){}return!1},i.CollectionUtils._copyIntoImpl=function(e,t,n,o,s,r){var a,l,u;if(null==s&&(s=Number.MAX_VALUE),e&&t&&e!==t){u=Object.keys(t);for(var h=0;h<u.length;h++){a=u[h],l=n?n(a):a;var d=t[a],c=!1;if(o&&r<s){var p=e[l];i.CollectionUtils.isPlainObject(d)&&(null==p||i.CollectionUtils.isPlainObject(p))&&(c=!0,e[l]=p||{},i.CollectionUtils._copyIntoImpl(e[l],d,n,!0,s,r+1))}c||(e[l]=d)}}return e},i.Translations={},i.Translations.setBundle=function(e){i.Translations._bundle=e},i.Translations.getResource=function(e){return i.Translations._getResourceString(e)},i.Translations.applyParameters=function(e,t){return null==e?null:i.Translations._format(e,t)},i.Translations.getTranslatedString=function(e,t){var n=i.Translations._getResourceString(e);if(null==n)return e;var o={};return arguments.length>2?o=Array.prototype.slice.call(arguments,1):2==arguments.length&&("object"==typeof(o=arguments[1])||o instanceof Array||(o=[o])),i.Translations.applyParameters(n,o)},i.Translations.getComponentTranslations=function(e){var t,n,o=i.Translations._getBundle()[e];if(null==o)return{};for(n in t={},o)o.hasOwnProperty(n)&&(t[n]=o[n]);return t},i.Translations._getResourceString=function(e){var t=e?e.split("."):[],n=i.Translations._getBundle(),o=t.length,s=0,r=t[s];for(i.Assert.assertObject(n);--o>0&&n;)n=n[r],r=t[++s];return n&&n[r]||null},i.Translations._format=function(e,t){var i,n,o=e.length,s=[],r=null,a=!1,l=!1,u=!1,h=!1;for(n=0;n<o;n++){var d=e.charAt(n),c=!1;if(a)c=!0,a=!1;else switch(d){case"$":a=!0;break;case"{":h||(l||(i=!1,r=[]),l=!0);break;case"}":if(l&&r.length>0){var p=t[r.join("")];s.push(void 0===p?"null":p)}l=!1;break;case"[":l||(u?h=!0:u=!0);break;case"]":h?h=!1:u=!1;break;default:c=!0}c&&(l?","==d||" "==d?i=!0:i||r.push(d):h||s.push(d))}return s.join("")},i.Translations._getBundle=function(){var e=i.Translations._bundle;return e||(i.__isAmdLoaderPresent()?(i.Assert.assert(void 0!==ojt,"ojtranslations module must be defined"),ojt):{})},i.BusyState=function(e){this._description=e,this._addedWaitTs=i.BusyState._getTs(),this._id=this._addedWaitTs.toString(36)+"_"+Math.random().toString(36)},Object.defineProperties(i.BusyState.prototype,{id:{get:function(){return this._id},enumerable:!0},description:{get:function(){if(this._description)return this._description instanceof Function?this._description():this._description.toString()},enumerable:!0}}),i.BusyState.prototype.toString=function(){var e="Busy state: [description=",t=this.description;return null!==t&&(e+=t),e+=", elapsed="+(i.BusyState._getTs()-this._addedWaitTs)+"]"},i.BusyState._getTs=function(){return window.performance?window.performance.now():(new Date).getTime()},i.BusyContext=function(e){this.Init(e)},i.Object.createSubclass(i.BusyContext,i.Object,"oj.BusyContext"),i.BusyContext._defaultTimeout=Number.NaN,i.BusyContext.setDefaultTimeout=function(e){isNaN(e)||(i.BusyContext._defaultTimeout=e)},i.BusyContext.prototype.Init=function(e){i.BusyContext.superclass.Init.call(this),this._hostNode=e,this._statesMap=new Map,this._mediator={getMasterWhenReadyPromise:function(){return this._masterWhenReadyPromise||(this._masterWhenReadyPromise=new Promise(this._captureWhenReadyPromiseResolver.bind(this))),this._masterWhenReadyPromise},resolveMasterWhenReadyPromise:function(){this._masterWhenReadyPromiseResolver&&this._masterWhenReadyPromiseResolver(!0),this._masterWhenReadyPromise=null,this._masterWhenReadyPromiseResolver=null},getSlaveTimeoutPromise:function(e,t,i){var n,o=new Promise(function(e,o){n=window.setTimeout(function(){o(t())},i)});return this._slaveTimeoutPromiseTimers.push(n),Promise.race([e,o]).then(this._clearAllSlaveTimeouts.bind(this))},getNextTickPromise:function(){return this._nextTickPromise||(this._nextTickPromise=new Promise(function(e){window.setImmediate(function(){this._nextTickPromise=null,e(!0)}.bind(this))}.bind(this))),this._nextTickPromise},_clearAllSlaveTimeouts:function(){var e=this._slaveTimeoutPromiseTimers;this._slaveTimeoutPromiseTimers=[];for(var t=0;t<e.length;t++)window.clearTimeout(e[t]);return!0},_captureWhenReadyPromiseResolver:function(e,t){this._masterWhenReadyPromiseResolver=e},_slaveTimeoutPromiseTimers:[]}},i.BusyContext._log=function(e){if(i.Logger.option("level")===i.Logger.LEVEL_LOG){i.Logger.log(">> Busy states: %d",e.size);var t=i.BusyContext._values(e);t.length>0&&i.Logger.log(t.join("\n"))}},i.BusyContext._values=function(e){var t=[];return e.forEach(function(e){t.push(e)}),t},i.BusyContext.prototype.addBusyState=function(e){i.Logger.log("BusyContext.addBusyState: start scope='%s'",this._getDebugScope());var t=this._statesMap,n=new i.BusyState(e[i.BusyContext._DESCRIPTION]);return i.Logger.log(">> "+n),t.set(n.id,n),this._addBusyStateToParent(),i.Logger.log("BusyContext.addBusyState: end scope='%s'",this._getDebugScope()),this._removeBusyState.bind(this,n)},i.BusyContext.prototype.dump=function(e){i.Logger.info("BusyContext.dump: start scope='%s' %s",this._getDebugScope(),e||"");var t=this._statesMap;i.Logger.info(">> Busy states: %d",t.size);var n=i.BusyContext._values(t);n.length>0&&i.Logger.info(n.join("\n")),i.Logger.info("BusyContext.dump: start scope='%s' %s",this._getDebugScope(),e||"")},i.BusyContext.prototype.getBusyStates=function(){var e=this._statesMap;return i.BusyContext._values(e)},i.BusyContext.prototype.clear=function(){i.Logger.log("BusyContext.clear: start scope='%s'",this._getDebugScope());for(var e=this._statesMap,t=i.BusyContext._values(e),n=0;n<t.length;n++){var o=t[n];try{this._removeBusyState(o)}catch(e){i.Logger.log("BusyContext.clear: %o",e)}Object.defineProperty(o,i.BusyContext._OJ_RIP,{value:!0,enumerable:!1})}i.Logger.log("BusyContext.clear: end scope='%s'",this._getDebugScope())},i.BusyContext.prototype.whenReady=function(e){var t=this._getDebugScope();i.Logger.log("BusyContext.whenReady: start, scope='%s', timeout=%d",t,e);var n=this._statesMap,o=this._mediator,s=o.getNextTickPromise(),r=i.BusyContext._BOOTSTRAP_MEDIATOR.whenReady(),a=Promise.all([s,r]).then(function(){return i.Logger.log("BusyContext.whenReady: bootstrap mediator ready scope=%s",t),i.BusyContext._deliverThrottledUpdates(),0!==n.size||this._waitingOnNextTickBusynessEval?(i.Logger.log("BusyContext.whenReady: busy states returning master scope=%s",t),o.getMasterWhenReadyPromise()):(i.Logger.log("BusyContext.whenReady: resolved no busy states scope=%s",t),Promise.resolve(!0))}.bind(this));if(isNaN(e)&&!isNaN(i.BusyContext._defaultTimeout)&&(e=i.BusyContext._defaultTimeout),!isNaN(e)){a=o.getSlaveTimeoutPromise(a,function(){var o,s="whenReady timeout of "+e+"ms expired ";i.BusyContext._log(n);var r=i.BusyContext._values(n);return(o=i.BusyContext._BOOTSTRAP_MEDIATOR.isReady()?new Error(s+"with the following busy states: "+r.join(", ")):new Error(s+'while the application is loading. Busy state enabled by setting the "window.oj_whenReady = true;" global variable. Application bootstrap busy state is released by calling "oj.Context.getPageContext().getBusyContext().applicationBootstrapComplete();".')).busyStates=r,i.Logger.log("BusyContext.whenReady: rejected scope='%s'\n%s",t,o.message),o},e)}return i.Logger.log("BusyContext.whenReady: end scope='%s'",this._getDebugScope()),a},i.BusyContext.prototype.isReady=function(){i.Logger.log("BusyContext.isReady: start scope='%s'",this._getDebugScope());var e=!1;if(i.BusyContext._BOOTSTRAP_MEDIATOR.isReady()&&!this._waitingOnNextTickBusynessEval){var t=this._statesMap;e=0===t.size,i.BusyContext._log(t)}return i.Logger.log("BusyContext.isReady: end scope='%s'",this._getDebugScope()),e},i.BusyContext.prototype._removeBusyState=function(e){var t=this._getDebugScope();i.Logger.log("BusyContext._removeBusyState: start scope='%s'",t);var n=this._statesMap;if(e[i.BusyContext._OJ_RIP])i.Logger.log("Busy state has been forcefully resolved via clear:\n"+e);else{if(!n.delete(e.id))throw new Error("Busy state has already been resolved:\n"+e);0!==n.size||this._waitingOnNextTickBusynessEval?i.Logger.log("BusyContext._removeBusyState: resolving busy state:\n"+e):(this._waitingOnNextTickBusynessEval=!0,window.setImmediate(this._evalBusyness.bind(this))),i.Logger.log("BusyContext._removeBusyState: end scope='%s'",t)}},i.BusyContext.prototype._evalBusyness=function(){var e=this._getDebugScope();i.Logger.log("BusyContext._evalBusyness: begin scope='%s'",e),i.BusyContext._deliverThrottledUpdates();var t=this._statesMap,n=this._mediator;0===t.size?(i.Logger.log("BusyContext._evalBusyness: resolving whenReady promises"),n.resolveMasterWhenReadyPromise(),this._resolveBusyStateForParent()):i.BusyContext._log(t),this._waitingOnNextTickBusynessEval=!1,i.Logger.log("BusyContext._evalBusyness: end scope='%s'",e)},i.BusyContext.prototype.applicationBootstrapComplete=function(){var e=this._getDebugScope();i.Logger.log("BusyContext.applicationBootstrapComplete: begin scope='%s'",e),i.BusyContext._BOOTSTRAP_MEDIATOR.notifyComplete(),i.Logger.log("BusyContext.applicationBootstrapComplete: end scope='%s'",e)},i.BusyContext.prototype._getParentBusyContext=function(){if(this._hostNode){var e=i.Context.getContext(i.Context.getParentElement(this._hostNode));if(e)return e.getBusyContext()}return null},i.BusyContext.prototype._addBusyStateToParent=function(){if(!this._parentNotified){this._parentNotified=!0;var e=this._getParentBusyContext();if(e){var t={};t[i.BusyContext._DESCRIPTION]=this._getCompoundDescription.bind(this),this._parentResolveCallback=e.addBusyState(t)}}},i.BusyContext.prototype._resolveBusyStateForParent=function(){this._parentNotified=!1,this._parentResolveCallback&&(this._parentResolveCallback(),this._parentResolveCallback=null)},i.BusyContext.prototype._getCompoundDescription=function(){return"["+i.BusyContext._values(this._statesMap).join(", ")+"]"},i.BusyContext.prototype._getDebugScope=function(){function e(e){var t="undefined";if(e)if(e.id&&e.id.length>0)t="#"+e.id;else{t=e.nodeName,e.hasAttribute("data-oj-context")&&(t+="[data-oj-context]");var i=e.getAttribute("class");i&&(t+="."+i.split(" ").join("."))}return t}return this._debugScope||(this._hostNode?this._debugScope=e(this._hostNode.parentElement)+" > "+e(this._hostNode):this._debugScope="page"),this._debugScope},i.BusyContext.prototype.toString=function(){var e="Busy Context: [scope=";return e+=this._getDebugScope(),e+=" states="+this._getCompoundDescription()+"]"},i.BusyContext._deliverThrottledUpdates=function(){i.ComponentBinding&&i.ComponentBinding.deliverChanges()},i.BusyContext._DESCRIPTION="description",i.BusyContext._OJ_RIP="__ojRip",i.BusyContext._BOOTSTRAP_MEDIATOR=new function(){var e,t,i;"undefined"!=typeof window&&(e=window.oj_whenReady),this.whenReady=function(){return t||(t=e?new Promise(function(e,t){i=e}):Promise.resolve(!0))},this.isReady=function(){return!e},this.notifyComplete=function(){i?window.setImmediate(function(){e=!1,i(!0),i=null}):e=!1}},i.Context=function(e){this.Init(e)},i.Object.createSubclass(i.Context,i.Object,"oj.Context"),i.Context.prototype.Init=function(e){i.Context.superclass.Init.call(this),this._node=e},i.Context.getContext=function(e){for(;e;){var t=e[i.Context._OJ_CONTEXT_INSTANCE];if(t)return t;if(e.hasAttribute(i.Context._OJ_CONTEXT_ATTRIBUTE))return t=new i.Context(e),Object.defineProperty(e,i.Context._OJ_CONTEXT_INSTANCE,{value:t}),t;e=i.Context.getParentElement(e)}return i.Context.getPageContext()},i.Context.getPageContext=function(){return i.Context._pageContext||(i.Context._pageContext=new i.Context),i.Context._pageContext},i.Context.prototype.getBusyContext=function(){return this._busyContext||(this._busyContext=new i.BusyContext(this._node)),this._busyContext},i.Context._OJ_CONTEXT_ATTRIBUTE="data-oj-context",i.Context._OJ_CONTEXT_INSTANCE="__ojContextInstance",i.Context._OJ_SURROGATE_ATTR="data-oj-surrogate-id",i.Context.getParentElement=function(e){if(e&&e.hasAttribute(i.Context._OJ_SURROGATE_ATTR)){var t=document.getElementById(e.getAttribute(i.Context._OJ_SURROGATE_ATTR));if(t)return t.parentElement}return e.parentElement},function(){i.__AttributeUtils={},i.__AttributeUtils.getExpressionInfo=function(e){var t={};if(e){var i=e.trim(),n=s.exec(i);(n=n?n[1]:null)||(t.downstreamOnly=!0,n=(n=r.exec(i))?n[1]:null),t.expr=n}return t},i.__AttributeUtils.attributeToPropertyName=function(e){return e.toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()})},i.__AttributeUtils.propertyNameToAttribute=function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})},i.__AttributeUtils.eventTypeToEventListenerProperty=function(e){return"on"+e.substr(0,1).toUpperCase()+e.substr(1)},i.__AttributeUtils.eventListenerPropertyToEventType=function(e){return/^on[A-Z]/.test(e)?e.substr(2,1).toLowerCase()+e.substr(3):null},i.__AttributeUtils.propertyNameToChangeEventType=function(e){return e+"Changed"},i.__AttributeUtils.changeEventTypeToPropertyName=function(e){return/Changed$/.test(e)?e.substr(0,e.length-7):null},i.__AttributeUtils.eventTriggerToEventType=function(e){return"oj"+e.substr(0,1).toUpperCase()+e.substr(1)},i.__AttributeUtils.eventTypeToEventTrigger=function(e){return/^oj[A-Z]/.test(e)?e.substr(2,1).toLowerCase()+e.substr(3):null},i.__AttributeUtils.coerceValue=function(i,s,r,a){if(!a)throw"Unable to parse "+s+"='"+r+"' for "+i.tagName+" with id "+i.id+" . This attribute only supports data bound values. Check the API doc for supported types";var l=a.toLowerCase(),u=n.test(r),h=o.test(r);if(e.test(l)&&u||t.test(l)&&h||"any"===l&&(u||h))try{return JSON.parse(r)}catch(e){throw"Unable to parse "+s+"='"+r+"' for "+i.tagName+" with id "+i.id+" to a JSON Object. Check the value for correct JSON syntax, e.g. double quoted strings. "+e}else if("boolean"===l){if(null==r||"true"===r||""===r||r.toLowerCase()===s)return!0;if("false"===r)return!1}else if("number"===l){if(!isNaN(r))return Number(r)}else{if(-1!==a.split("|").indexOf("string")||"any"===l)return r}throw"Unable to parse "+s+"='"+r+"' for "+i.tagName+" with id "+i.id+" to a "+a+"."};var e=/(^array)|(\|array)/,t=/(^object)|(\|object)/,n=/\s*\[[^]*\]\s*/,o=/\s*\{[^]*\}\s*/,s=/^(?:\{\{)([^]+)(?:\}\})$/,r=/^(?:\[\[)([^]+)(?:\]\])$/}(),"undefined"!=typeof window&&window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(e){var t,i=(this.document||this.ownerDocument).querySelectorAll(e),n=this;do{for(t=i.length;--t>=0&&i.item(t)!==n;);}while(t<0&&(n=n.parentElement));return n}),i.__HtmlUtils=(o=function(e){for(var t=e.childNodes,i=t.length,n=0;n<i;n++){var s=t[n];o(s);var r=s.nodeName.toLowerCase();if("oj-bind-replace-"===r.substr(0,16)){for(var a=r.substr(16),l=document.createElement(a),u=0;u<s.attributes.length;u++){var h=s.attributes[u];l.setAttribute(h.name,h.value)}var d=l.content?l.content:l;for(u=0;s.childNodes.length>0;)d.appendChild(s.childNodes[0]);e.replaceChild(l,s)}else if("script"===r||"style"===r){for(l=document.createElement(r),u=0;u<s.attributes.length;u++){h=s.attributes[u];l.setAttribute(h.name,h.value)}var c=s.innerHTML;l.innerHTML=c.replace(new RegExp("oj-bind-replace-","g"),""),e.replaceChild(l,s)}else if(8===s.nodeType){var p=s.nodeValue;s.nodeValue=p.replace(new RegExp("oj-bind-replace-","g"),"")}}},{stringToNodeArray:function(e){for(var t,i,n,s,r=["table","caption","colgroup","col","thead","tfoot","th","tbody","tr","td","template"],a=0;a<r.length;a++)t=r[a],i=e,n=new RegExp("<"+t+"(?=\\s|>)","gi"),s=new RegExp("</"+t+"(?=\\s|>)","gi"),e=i.replace(n,"<oj-bind-replace-"+t).replace(s,"</oj-bind-replace-"+t);var l=document.createElement("div");l.innerHTML=e,-1!==e.indexOf("<oj-bind-replace-")&&o(l);var u=l.childNodes,h=[];for(a=u.length;a--;h.unshift(u[a]));return h}}),i.TimerUtils={},r.prototype.getPromise=function(){},r.prototype.clear=function(){},i.TimerUtils.getTimer=function(e){return new i.TimerUtils._TimerImpl(e)},i.TimerUtils._TimerImpl=function(e){var t,i,n;function o(e){n=null,i(e)}this.getPromise=function(){return t},this.clear=function(){window.clearTimeout(n),n=null,o(!1)},t="undefined"==typeof window?Promise.reject():new Promise(function(t){i=t,n=window.setTimeout(o.bind(null,!0),e)})},i.Events=i.Events={on:function(e,t,i){return this.OnInternal(e,t,i,!1,!1)},off:function(e,t,i){return this._offInternal(e,t,i,!1)},trigger:function(e){var t=Array.prototype.slice.call(arguments);return t.unshift(!1),i.Events.TriggerInternal.apply(this,t)},once:function(e,t,i){return this._onceInternal(e,t,i,!1,null)},listenTo:function(e,t,n){var o,s,r,a,l,u,h,d={};for(h in t.constructor===String?d[t]=n:d=t,d)if(d.hasOwnProperty(h))for(o=i.Events._getEvents(h),s=0;s<o.length;s+=1)u={event:r=o[s].event,attribute:a=o[s].attribute,object:e,callback:d[h]},l=a?r+":"+a:r,void 0===this._listeningTo&&(this._listeningTo=[]),this._listeningTo.push(u),e.OnInternal(l,d[h],null,!0,!1);return this},listenToOnce:function(e,t,n){var o,s,r,a,l,u,h,d={};for(h in t.constructor===String?d[t]=n:d=t,d)if(d.hasOwnProperty(h))for(o=i.Events._getEvents(h),s=0;s<o.length;s+=1)u={event:r=o[s].event,attribute:a=o[s].attribute,object:e,callback:d[h]},l=a?r+":"+a:r,void 0===this._listeningTo&&(this._listeningTo=[]),this._listeningTo.push(u),e._onceInternal(l,d[h],null,!0,this);return this},stopListening:function(e,t,n){var o,s,r,a,l,u,h,d,c,p,_,m,g,f={};if(null==arguments||arguments.length<=1){for(m=this._listeningTo?this._listeningTo.length:0,_=0;_<m;_++)u=this._listeningTo[_],(h=!e||e===u.object)&&u.object._offInternal.apply(u.object,[u.event,u.callback,u.context,!0]);return this._listeningTo=[],this}for(g in s=t,e&&e.constructor===String&&(s=e),s.constructor===String?f[s]=n:f=s,f)if(f.hasOwnProperty(g))for(o=i.Events._getEvents(g),r=0;r<o.length;r+=1)for(a=o[r].event,l=o[r].attribute,_=(m=this._listeningTo?this._listeningTo.length:0)-1;_>=0;_-=1)u=this._listeningTo[_],h=!e||e===u.object,d=!a||a===u.event,c=!n||f[g]===u.callback,p=!l||l===u.attribute,h&&d&&c&&p&&(this._listeningTo[_].object._offInternal.apply(this._listeningTo[_].object,[this._listeningTo[_].event,this._listeningTo[_].callback,this._listeningTo[_].context,!0]),this._listeningTo.splice(_,1));return this}},i.Events.bind=i.Events.on,i.Events.unbind=i.Events.off,i.Events.EventType={ADD:"add",ALLADDED:"alladded",REMOVE:"remove",RESET:"reset",REFRESH:"refresh",SORT:"sort",CHANGE:"change",DESTROY:"destroy",ALLREMOVED:"allremoved",REQUEST:"request",SYNC:"sync",ERROR:"error",INVALID:"invalid",READY:"ready",ALL:"all"},i.Events.Mixin=function(e,t){var i,n=t||this;for(i in n)"function"==typeof n[i]&&(e[i]=n[i]);e.eventHandlers={},e._listeningTo=[]},i.Events._onceInternal=function(e,t,i,n,o){var s,r,a,l,u,h,d;h=this._getEventMap(e,t,i),u=h.map,d=h.context;var c=this;return Object.keys(u||{}).forEach(function(e){if(Object.prototype.hasOwnProperty.call(u,e))for(s=c._getEvents(e),r=0;r<s.length;r+=1)a=s[r].event,l=s[r].attribute,void 0===c.eventHandlers&&(c.eventHandlers=[]),void 0===c.eventHandlers[a]&&(c.eventHandlers[a]=[]),c.eventHandlers[a].push({callback:u[e],context:d,attribute:l,once:!0,fired:!1,listen:n,otherObj:o})}),this},i.Events._shouldFire=function(e){return!e.once||!e.fired&&(e.fired=!0,!0)},i.Events._getContext=function(e,t){return t.context||t.otherObj||e},i.Events.TriggerInternal=function(e,t){var n,o,s,r,a,l,u,h,d,c=this._getEvents(t);for(r=[],n=0;n<c.length;n+=1)o=c[n].event,s=c[n].attribute,r.push({event:o,attribute:s});for(n=0;n<r.length;n+=1){for(h=this._getHandlers(this.eventHandlers,i.Events.EventType.ALL),a=i.Events._getHandlers(this.eventHandlers,r[n].event,!1),l=0;l<(a?a.length:0);l+=1)a[l].attribute===r[n].attribute&&a[l].callback&&(u=Array.prototype.slice.call(arguments),a&&a[l]&&a[l].once&&(this._removeHandler(i.Events._getHandlers(this.eventHandlers,r[n].event,!0),a[l]),a[l].otherObj&&a[l].otherObj.stopListening(this,t,a[l].callback)),a&&a[l]&&this._shouldFire(a[l])&&(d=a[l].callback,e&&!a[l].ignoreSilent||d.apply(i.Events._getContext(this,a[l]),u.slice(2))));for(l=0;l<(h?h.length:0);l+=1)(u=Array.prototype.slice.call(arguments)).length>0&&(r[n].attribute?u[1]=r[n].event+":"+r[n].attribute:u[1]=r[n].event),h&&h[l]&&h[l].callback&&this._shouldFire(h[l])&&(d=h[l].callback,e&&!h[l].ignoreSilent||d.apply(i.Events._getContext(this,h[l]),u.slice(1))),h&&h[l]&&h[l].once&&(this._removeHandler(this._getHandlers(this.eventHandlers,i.Events.EventType.ALL,!0),h[l]),h[l].otherObj&&h[l].otherObj.stopListening(this,i.Events.EventType.ALL,h[l].callback))}return this},i.Events.OnInternal=function(e,t,n,o,s){var r,a,l,u,h,d,c,p,_=this._getEventMap(e,t,n);for(p in r=_.map,c=_.context,r)if(r.hasOwnProperty(p))for(a=this._getEvents(p),l=0;l<a.length;l+=1)u=a[l].event,h=a[l].attribute,void 0===this.eventHandlers&&(this.eventHandlers=[]),void 0===this.eventHandlers[u]&&(this.eventHandlers[u]=[]),d={callback:r[p],context:c,attribute:h,listen:o,ignoreSilent:s},-1===this._checkForHandler(this.eventHandlers[u],d,i.Events._handlersIdentical)&&this.eventHandlers[u].push(d);return this},i.Events._offInternal=function(e,t,i,n){var o,s,r,a;if(null===arguments||0===arguments.length)return this.eventHandlers={},this;if(null==e)return this._removeEvent(e,t,i,n),this;for(a in o=(s=this._getEventMap(e,t,i)).map,r=s.context,o)o.hasOwnProperty(a)&&this._removeEvent(a,o[a],r,n);return this},i.Events._getEventMap=function(e,t,i){var n={};return e.constructor!==String?{map:n=e,context:t}:(n[e]=t,{map:n,context:i})},i.Events._removeEvent=function(e,t,n,o){var s,r,a,l,u,h,d,c,p,_=[];if(e)_=i.Events._getEvents(e);else if(void 0!==this.eventHandlers){var m=this;Object.keys(this.eventHandlers||{}).forEach(function(e){Object.prototype.hasOwnProperty.call(m.eventHandlers,e)&&_.push({event:e})})}for(s=0;s<_.length;s+=1)if(r=_[s].event,l=_[s].attribute,void 0!==this.eventHandlers&&this.eventHandlers[r]instanceof Array){for(a=(u=this.eventHandlers[r]).length-1;a>=0;a-=1)h=null==t||u[a].callback===t,d=null==n||u[a].context===n,c=null==l||u[a].attribute===l,p=null==o||u[a].listen===o,h&&d&&c&&p&&u.splice(a,1);0===u.length&&delete this.eventHandlers[r]}},i.Events._removeHandler=function(e,t){var i,n,o,s,r,a;if(e)for(i=e.length-1;i>=0;i-=1)n=void 0===t.callback||null===t.callback||e[i].callback===t.callback,o=void 0===t.context||null===t.context||e[i].context===t.context,s=void 0===t.attribute||null===t.attribute||e[i].attribute===t.attribute,r=void 0===t.listen||null===t.listen||e[i].listen===t.listen,a=void 0===t.once||null===t.once||e[i].once===t.once,n&&o&&s&&r&&a&&e.splice(i,1)},i.Events._getEvents=function(e){var t,i,n,o,s=e?e.split(" "):[],r=[];for(t=0;t<s.length;t+=1)n=(i=s[t].split(":"))[0],o=i.length>1?i[1]:null,r.push({event:n,attribute:o});return r},i.Events._handlersIdentical=function(e,t){return e.callback===t.callback&&e.attribute===t.attribute&&e.context===t.context&&e.listen===t.listen&&e.once===t.once},i.Events._listenersIdentical=function(e,t){return e.event===t.event&&e.attribute===t.attribute&&e.context===t.context&&e.object===t.object},i.Events._checkForHandler=function(e,t,i){var n;if(void 0===e)return-1;for(n=0;n<e.length;n+=1)if(i(e[n],t))return n;return-1},i.Events._getHandlers=function(e,t,i){if(e&&e[t]instanceof Array){if(i)return e[t];var n,o=[];for(n=0;n<e[t].length;n++)o.push(e[t][n]);return o}return null},i.Collection=function(e,t){i.Collection._justExtending||i.Collection._init(this,e,t,null)},i.Object.createSubclass(i.Collection,i.Object,"oj.Collection"),i.Collection.prototype.model=null,i.Collection.prototype.modelId=function(e){var t=this.model;return t&&e?e[t.idAttribute||t.prototype.idAttribute||"id"]:null},i.Collection.prototype.length=void 0,i.Collection.prototype.models=void 0,i.Collection.prototype._modelIndices=[],i.Collection.prototype.url=null,i.Collection.prototype.changes=[],i.Collection.prototype.customURL=null,i.Collection.prototype.customPagingOptions=null,i.Collection.prototype.lastFetchSize=void 0,i.Collection.prototype.hasMore=!1,i.Collection.prototype.totalResults=void 0,i.Collection.prototype.lastFetchCount=void 0,i.Collection.prototype.modelLimit=-1,i.Collection.prototype.offset=void 0,i.Collection.prototype.fetchSize=-1,i.Collection.prototype.sortDirection=1,i.Collection.prototype.comparator=null,i.Collection.prototype.omitLanguageHeader=!1,i.Collection.prototype.Init=function(){i.Collection.superclass.Init.call(this)},i.Collection.extend=function(e,t){var n,o=null;return i.Collection._justExtending=!0,o=new i.Collection,i.Collection._justExtending=!1,$.extend(o,this.prototype),n=e&&e.constructor&&Object.prototype.hasOwnProperty.call(e,"constructor")?e.constructor:function(t,n){i.Collection._init(this,t,n,e)},t&&Object.keys(t).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}),e&&Object.keys(e).forEach(function(t){Object.prototype.hasOwnProperty.call(e,t)&&(o[t]=e[t])}),$.extend(n,this),n.prototype=o,n.extend=i.Collection.extend,n.prototype.constructor=n,n},i.Collection._init=function(e,t,n,o){var s,r,a,l;if(e.Init(),i.Events.Mixin(e),o)for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(e[l]=o[l]);var u=n||{};for(r=["comparator","customPagingOptions","customURL",i.Collection._FETCH_SIZE_PROP,"model","modelLimit","sortDirection","url"],s=0;s<r.length;s++)Object.prototype.hasOwnProperty.call(u,r[s])&&void 0!==u[r[s]]&&(e[r[s]]=u[r[s]]);void 0===e._getFetchSize(null)&&e.setFetchSize(-1),void 0===e.modelLimit&&e.setModelLimit(-1),e.hasMore=!1,e.lruCount=0,e._setModels([],!0);var h=t;u.parse&&(h=e.parse(t)),null!=h&&(u.noparse=!0,a=h instanceof Array?h:[h],e._addInternal(a,u,!0,!1)),e._setLength(),h||(e.totalResults=void 0),o&&o.initialize&&o.initialize.call(e,h,u)},i.Collection.prototype.on=function(e,t){},i.Collection.prototype.OnInternal=function(e,t,i,n,o){},i.Collection.prototype.TriggerInternal=function(e,t,i,n,o){},i.Collection.prototype._fireRequest=function(e,t,n,o){this.TriggerInternal(o,i.Events.EventType.REQUEST,e,t,n)},i.Collection.prototype._resetChanges=function(){this.changes=[]},i.Collection.prototype._setChangeAt=function(e,t){for(var i=e;i<e+t;i++)-1===this.changes.indexOf(i)&&this.changes.push(i)},i.Collection.prototype._setModels=function(e,t){if(this.models=e,t)this._modelIndices=[],this._resetChanges();else for(var i=0;i<e.length;i++)e[i]&&this._modelIndices.push(i)},i.Collection.prototype._getModels=function(){return this.models},i.Collection.prototype._getModelsLength=function(){return this._getModels().length},i.Collection.prototype._overUpperLimit=function(e){return!(e<this._getModelsLength())&&!(this.IsVirtual()&&(!this._hasTotalResults()||0===this._getModelsLength()))},i.Collection.prototype._hasTotalResults=function(){return i.Collection._defined(this.totalResults)},i.Collection._defined=function(e){return null!=e},i.Collection.prototype._pushModel=function(e){this._getModels().push(e),this._modelIndices.push(this._getModelsLength()-1),this._setChangeAt(this._getModelsLength()-1,1)},i.Collection.prototype._pushModels=function(e){this._makeModelHead(e),this._pushModel(e),this.lruCount=this.lruCount+1,e.SetIndex(this._getModelsLength()-1)},i.Collection.prototype._reduceLRU=function(e){if(e)for(var t=0;t<e.length;t++)e[t]&&(this.lruCount=this.lruCount-1)},i.Collection.prototype._spliceModels=function(e,t,i){for(var n=e;n<e+t;n++)this._removePrevNext(this._getModel(n));void 0===i?(this._reduceLRU(this._getModels().splice(e,t)),this._spliceModelIndices(e,e+t-1)):(this._reduceLRU(this._getModels().splice(e,t,i)),this._spliceModelIndices(e,e+t-1),this._insertModelIndex(e),this._makeModelHead(i)),this._setChangeAt(e,t),this.lruCount<0&&(this.lruCount=0),this._realignModelIndices(e)},i.Collection.prototype._getModel=function(e){return this._getModels()[e]},i.Collection.prototype._realignModelIndices=function(e){for(var t,i=0;i<this._modelIndices.length;i++)(t=this._modelIndices[i])>=e&&this._getModel(t)&&this._getModel(t).SetIndex(t)},i.Collection.prototype._removePrevNext=function(e){if(e){var t=e.GetPrevious(),i=e.GetNext();t?t.SetNext(i):this.head=i,i?i.SetPrevious(t):this.tail=t}},i.Collection.prototype._makeModelHead=function(e){e.SetNext(this.head),this.head?this.head.SetPrevious(e):this.tail=e,e.SetPrevious(null),this.head=e},i.Collection.prototype._setModelIndex=function(e){-1===this._modelIndices.indexOf(e)&&this._modelIndices.push(e)},i.Collection.prototype._insertModelIndex=function(e){for(var t=0;t<this._modelIndices.length;t++)this._modelIndices[t]>=e&&(this._modelIndices[t]=this._modelIndices[t]+1);this._modelIndices.push(e)},i.Collection.prototype._spliceModelIndices=function(e,t){var i=void 0===t?e:t;this._clearModelIndices(e,i);for(var n=i-e+1,o=0;o<this._modelIndices.length;o++)this._modelIndices[o]>i&&(this._modelIndices[o]-=n)},i.Collection.prototype._clearModelIndices=function(e,t){for(var i=void 0===t?e:t,n=e;n<=i;n++){var o=this._modelIndices.indexOf(e);o>-1&&this._modelIndices.splice(o,1)}},i.Collection.prototype._setModel=function(e,t){var i=this._getModel(e);this._removePrevNext(i),i||(this.lruCount=this.lruCount+1),this._setChangeAt(e,1),this._getModels()[e]=t,t&&(this._setModelIndex(e),t.SetIndex(e),this._makeModelHead(t))},i.Collection.prototype._clearOutModels=function(e){var t,i,n=this.tail,o=0;for(this.tail=null;n&&o<e;)t=n.GetIndex(),(i=this._getModel(t))&&i.hasChanged()?(this.tail||(this.tail=n),n=n.GetPrevious()):(this.lruCount=this.lruCount-1,t>-1&&(this._setModel(t,void 0),this._clearModelIndices(t,t)),n.SetNext(null),n=n.SetPrevious(null),o+=1);this.tail||(this.tail=n),this.lruCount<0&&(this.lruCount=0),0===this.lruCount&&(this.head=null,this.tail=null)},i.Collection.prototype._resetLRU=function(){this.lruCount=0,this.head=null,this.tail=null},i.Collection.prototype._manageLRU=function(e){if(this.IsVirtual()){var t=this._getModelLimit();t>-1&&this.lruCount+e>t&&this._clearOutModels(this.lruCount+e-t)}},i.Collection.prototype.clone=function(){return this._cloneInternal(!0)},i.Collection.prototype._cloneInternal=function(e){var t,i,n=new this.constructor;if(this.IsVirtual()&&(n=this._copyFetchProperties(n))._resetModelsToFullLength(),n=this._copyProperties(n),e){var o,s=[];for(t=0;t<this._modelIndices.length;t++)s.push(this._modelIndices[t]);for(s.sort(function(e,t){return e-t}),t=0;t<s.length;t++)o=s[t],(i=this._atInternal(o,null,!0,!1))&&n._addInternal(i.clone(),{at:o},!0,!1)}return n},i.Collection.prototype._copyProperties=function(e){var t,i,n=["comparator","model","modelId"];for(i=0;i<n.length;i++)e[t=n[i]]=this[t];return e},i.Collection.prototype._copyFetchProperties=function(e){var t,n,o=["totalResults","hasMore",i.Collection._FETCH_SIZE_PROP];for(n=0;n<o.length;n++)e[t=o[n]]=this[t];return e},i.Collection.prototype._getLength=function(){return this.length},i.Collection.prototype._setLength=function(){var e=this._getModelsLength();this.length=e,this.IsVirtual()||(this.totalResults=e)},i.Collection._createModel=function(e,t,i){return e.model?$.isFunction(e.model)?new e.model(t,i):new e.model.constructor(t,i):null},i.Collection.prototype._newModel=function(e,t,n,o){var s,r=null,a=n||{};return a.ignoreDefaults=o,e instanceof i.Model?r=e:this.model?r=i.Collection._createModel(this,e,a):(a.collection=this,r=new i.Model(e,a)),a.validate&&r.validate&&(s=r.validate(r.attributes))?(a.validationError=s,this.TriggerInternal(!1,i.Events.EventType.INVALID,r,s,a),null):r},i.Collection.prototype.add=function(e,t){this._manageLRU(1);var i=t||{};return this._handlePromise(this._addInternal(e,t,!1,i.deferred))},i.Collection.prototype._addInternal=function(e,t,n,o){var s,r,a,l=t||{},u=[],h=l.at,d=l.silent,c=l.force,p=l.merge||!1,_=l.sort,m=!0,g=!1,f=[],v=[];function C(e,t,o,s,u){var v,C=null;return!c&&p&&o?(m=o.Merge(t,e.comparator,d),C=o):(c||(v=n&&s.isNew()?void 0:e._getLocal(s))&&n&&h!==v.index&&i.Logger.warn("Duplicate ID fetched or added without merging, the id = "+v.GetId()),void 0===v?(!function(e,t){void 0===h?(e._pushModels(t),r=e._getModelsLength()-1,e._getModel(r).SetCid()):(r=h,e.IsVirtual()&&n?e._setModel(r,t):e._spliceModels(r,0,t),e._getModel(r).SetCid(),h+=1),void 0===t.GetCollection()&&t.SetCollection(e),e._setLength(),e._listenToModel(t),g=!0}(e,s),C=s):C=v),function(e,t,o,s,u){var c=l||{};n&&(c.fillIn=!0);var p=c.comparator||e._hasComparator();if((!n||n&&p)&&m&&void 0===t&&!_&&void 0===h&&e._getLength()>1){r>-1&&(a=e._getModel(r).cid);var v={};i.CollectionUtils.copyInto(v,c),v.add=!0,e.sort(v),r>-1&&(r=e.IsVirtual()?-1:e.indexOf(e.getByCid(a),u))}g&&(c.at&&(c.index=r),s?(s.TriggerInternal(d,i.Events.EventType.ADD,s,e,c),f.push(s)):(o.TriggerInternal(d,i.Events.EventType.ADD,o,e,c),f.push(o)))}(e,v,o,s,u),C}function y(e,t,o){g=!1;var s=e._newModel(t,!0,l,!1),a=null,u=null;if(null!=s){if(r=-1,s.SetupId(),a=t instanceof i.Model?t:s,o)return c?new Promise(function(t){var i=C(e,a,void 0,s,o);v.push(i),t(i)}):e._getInternal(a,{silent:!0},o,!0).then(function(t){u=t.m;var i=C(e,a,u,s,o);v.push(i)});!c&&p&&(u=n?e._getLocal(a):e.get(a));var h=C(e,a,u,s,o);h&&v.push(h)}else v.push(!1);return Promise.resolve()}function b(e,t){return e.parse&&l.parse&&!l.noparse?e.parse(t):t}if(void 0!==h&&h<0&&(h+=this._getLength()+1),e instanceof Array?u=e:u.push(e),!n&&(this.IsVirtual()||o)){var S=this;return new Promise(function(e,t){var n=function(e){return new Promise(function(t,i){y(S,u[e],!0).then(function(){t(e+1)},i)})},o=Promise.resolve(0);for(u=b(S,u),s=0;s<u.length;s++)o=o.then(n);o.then(function(){f.length>0&&S.TriggerInternal(l.silent,i.Events.EventType.ALLADDED,S,f,l),e(i.Collection._returnModels(v))},t)})}for(u=b(this,u),s=0;s<u.length;s++)y(this,u[s],!1);return f.length>0&&this.TriggerInternal(l.silent,i.Events.EventType.ALLADDED,this,f,l),i.Collection._returnModels(v)},i.Collection._returnModels=function(e){return 1===e.length?e[0]:e},i.Collection.prototype._hasComparator=function(){return i.Collection._defined(this.comparator)},i.Collection.prototype.sort=function(e){var t,n,o=e||{},s=o.silent,r=this.comparator;if(!this._hasComparator())return null;if(this.IsVirtual()){var a=this.totalResults;this._hasTotalResults()?this._setModels(new Array(a),!0):(this._setModels([],!0),this._resetLRU(),this._setLength()),n=o.add?{add:!0}:null,this.TriggerInternal(s,i.Events.EventType.SORT,this,n,null);var l=o.startIndex;return null!=l?this.setRangeLocal(l,this._getFetchSize(o)):null}return t=this,this._getModels().sort(function(e,n){return i.Collection.SortFunc(e,n,r,t,t)}),this._realignModelIndices(0),n=o.add?{add:!0}:null,this.TriggerInternal(s,i.Events.EventType.SORT,this,n,null),null},i.Collection._getKey=function(e,t){return e instanceof i.Model?e.get(t):i.Model.GetPropValue(e,t)},i.Collection.SortFunc=function(e,t,n,o,s){var r,a,l,u;if($.isFunction(n)){if(1===n.length){r=n.call(s,e),a=n.call(s,t);var h=i.StringUtils.isString(r)?r.split(","):[r],d=i.StringUtils.isString(a)?a.split(","):[a];for(l=0;l<h.length;l++)if(0!==(u=i.Collection._compareKeys(h[l],d[l],o.sortDirection)))return u}return n.call(s,e,t)}if(i.StringUtils.isString(n)){var c=n.split(",");for(l=0;l<c.length;l++)if(r=i.Collection._getKey(e,c[l]),a=i.Collection._getKey(t,c[l]),0!==(u=i.Collection._compareKeys(r,a,o.sortDirection)))return u}return 0},i.Collection.prototype.sortedIndex=function(e,t){var n,o,s=t||this.comparator;return s?(this._throwErrIfVirtual("sortedIndex"),n=this,o=function(e,t){var o,r;if($.isFunction(s)){if(1===s.length){o=s.call(n,e),r=s.call(n,t);var a,l,u=i.StringUtils.isString(o)?o.split(","):[o],h=i.StringUtils.isString(r)?r.split(","):[r];for(l=0;l<u.length;l++)if(0!==(a=i.Collection._compareKeys(u[l],h[l],n.sortDirection)))return a}return s.call(n,e,t)}return i.StringUtils.isString(s)?(o=e.get(s),r=t.get(s),i.Collection._compareKeys(o,r,n.sortDirection)):0},i.Collection._find(this._getModels(),e,o)):-1},i.Collection._find=function(e,t,i){return function n(o,s){var r,a,l;return o>s?-1:(r=t.GetCid(),a=t.GetId(),e[o].Match(a,r)?o:e[s].Match(a,r)?s:(l=Math.floor((s+o)/2),-1===i(e[l],t)?n(o+1,l):1===i(e[l],t)?n(l,s-1):l))}(0,e.length-1)},i.Collection._compareKeys=function(e,t,i){if(-1===i){if(e<t)return 1;if(t<e)return-1}else{if(e>t)return 1;if(t>e)return-1}return 0},i.Collection.prototype.unshift=function(e,t){var n={};return i.CollectionUtils.copyInto(n,t||{}),n.at||(n.at=0),this._manageLRU(1),this._handlePromise(this._addInternal(e,n,!1,n.deferred))},i.Collection.prototype._handlePromise=function(e){return $.isFunction(e.then)?this._addPromise(function(){return e}):e},i.Collection.prototype.shift=function(e){var t,n=e||{},o=this._getDeferred(n);if(this.IsVirtual()||o){var s=this;return this._atInternal(0,n,!1,!0).then(function(e){return t=s._removeInternal(e,0,n),s.TriggerInternal(n.silent,i.Events.EventType.ALLREMOVED,s,[t],n),t})}return t=this._removeInternal(this.at(0),0,n),this.TriggerInternal(n.silent,i.Events.EventType.ALLREMOVED,this,[t],n),t},i.Collection.prototype.initial=function(e){var t=void 0===e?1:e;this._throwErrIfVirtual("initial");var i,n=[];for(i=0;i<this._getLength()-t;i+=1)n.push(this.at(i));return n},i.Collection.prototype._getDeferred=function(e){return(e||{}).deferred},i.Collection.prototype.last=function(e,t){var i,n=this._getDeferred(t),o=void 0===e?1:e;if(1===o)return 0===(i=this._getModelsLength())&&(i=o),i>0?this._atInternal(i-1,t,!1,n):null;var s,r=[];if(i=this._getLength(),n||this.IsVirtual()){var a=i-e;a<0&&(a=0),0===i&&(i=e);var l=this;return this._addPromise(function(){return l.IterativeAt(a,i)})}for(s=i-e;s<i;s+=1)r.push(this.at(s));return r},i.Collection.prototype.IterativeAt=function(e,t){var i,n=[],o=this;return new Promise(function(s,r){var a=function(e){return o.IsVirtual()&&o._hasTotalResults()&&e>=o.totalResults?Promise.resolve(e+1):new Promise(function(t,i){o._deferredAt(e,null).then(function(i){n.push(i),t(e+1)},i)})},l=Promise.resolve(e);for(i=e;i<t;i++)l=l.then(a);l.then(function(){s(n)},r)})},i.Collection.prototype._getDefaultFetchSize=function(e){return null==e?this[i.Collection._FETCH_SIZE_PROP]:e},i.Collection.prototype._calculateNextStart=function(){var e=this.lastFetchCount;return null==e&&(e=this[i.Collection._FETCH_SIZE_PROP]),void 0===this.offset||null===this.offset?e:this.offset+e},i.Collection.prototype.next=function(e,t){var n=t||{};n[i.Collection._FETCH_SIZE_PROP]=this._getDefaultFetchSize(e);var o=this._calculateNextStart(),s=this._getLength();if(0===s&&n[i.Collection._FETCH_SIZE_PROP]>0)o=0;else if(o>=s){return n.success&&n.success.call(i.Model.GetContext(n,this),this,null,n),null}return n.startIndex=o,this.fetch(n)},i.Collection.prototype._calculatePrevStart=function(e){return void 0===this.offset||null===this.offset?0:this.offset-e},i.Collection.prototype.previous=function(e,t){var n=t||{};if(0===this.offset){return n.success&&this.lastFetchCount&&n.success.call(i.Model.GetContext(n,this),this,null,n),null}n[i.Collection._FETCH_SIZE_PROP]=this._getDefaultFetchSize(e);var o=this._calculatePrevStart(n[i.Collection._FETCH_SIZE_PROP]);return o<0&&(n[i.Collection._FETCH_SIZE_PROP]=this.offset,o=0),n.startIndex=o,this.fetch(n)},i.Collection.prototype.setModelLimit=function(e){this.modelLimit=e,this._manageLRU(0)},i.Collection.prototype._getModelLimit=function(){return this.modelLimit},i.Collection.prototype.setFetchSize=function(e){this[i.Collection._FETCH_SIZE_PROP]=e},i.Collection.prototype.rest=function(e,t){var i,n=this._getDeferred(t),o=void 0===e?1:e,s=[];if(this.IsVirtual()||n){var r=this;return this._addPromise(function(){return r.IterativeAt(o,r._getLength())})}for(i=o;i<this._getLength();i+=1)s.push(this.at(i));return s},i.Collection.prototype.remove=function(e,t){var n,o=t||{},s=[];e instanceof Array?s=e:s.push(e);var r=[];for(n=s.length-1;n>=0;n-=1)r.unshift(this._removeInternal(s[n],-1,o));return this.TriggerInternal(o.silent,i.Events.EventType.ALLREMOVED,this,s,o),i.Collection._returnModels(r)},i.Collection.prototype._removeInternal=function(e,t,n){var o=n||{},s=-1===t?this._getInternal(e):i.Collection._getModinfo(t,e),r=o.silent,a=s.index;if(a>-1){var l=s.m;void 0!==l&&l.GetCollection()===this&&l.SetCollection(null),this._spliceModels(a,1),this._setLength();var u={};i.CollectionUtils.copyInto(u,o),u.index=a,void 0!==l&&l.TriggerInternal(r,i.Events.EventType.REMOVE,l,this,u),this._unlistenToModel(l)}return s.m},i.Collection.prototype._unlistenToModel=function(e){void 0!==e&&e.off(null,null,this)},i.Collection.prototype._listenToModel=function(e){e.OnInternal(i.Events.EventType.ALL,this._modelEvent,this,!1,!0)},i.Collection.prototype._modelEvent=function(e,t,n,o){if(e===i.Events.EventType.DESTROY&&this.remove(t),!(void 0!==n&&n instanceof i.Collection&&n!==this)){var s=o&&o.silent;this.TriggerInternal(s,e,t,n,o)}},i.Collection.prototype.refresh=function(e){var t,n=e||{},o=this;return this._addPromise(function(){return new Promise(function(e,s){if(!o.IsVirtual()){t=void 0!==n.silent&&n.silent;try{o.reset(null,{silent:!0});var r={};return Object.keys(n).forEach(function(e){Object.prototype.hasOwnProperty.call(n,e)&&(r[e]=n[e])}),r.success=function(n,s,r){o.TriggerInternal(t,i.Events.EventType.REFRESH,o,r,null),e({collection:n,response:s,options:r})},r.error=function(e,t,r){s(i.Collection._createRejectionError(e,t,r,o,n,!1))},void o.fetch(r)}catch(s){if(s instanceof i.URLError)return o.TriggerInternal(t,i.Events.EventType.REFRESH,o,n,null),void e({collection:o,options:n});throw s}}var a=n.startIndex;o._setModels([],!0),o._resetLRU(),o.totalResults=void 0,o._setLength(),t=void 0!==n.silent&&n.silent,o.TriggerInternal(t,i.Events.EventType.REFRESH,o,n,null),null==a&&(a=0),null!=a?o._setRangeLocalInternal(a,o._getFetchSize(n)).then(function(t){e(t)},function(e){s(e)}):e(void 0)})})},i.Collection.prototype.reset=function(e,t){var n,o,s={};i.CollectionUtils.copyInto(s,t||{}),s.previousModels=this._getModels();for(var r=0;r<this._modelIndices.length;r++)n=this._modelIndices[r],(o=this._getModel(n))&&(this._unlistenToModel(o),o.SetCollection(null));this._setModels([],!0),this._resetLRU();var a=void 0!==s.silent&&s.silent;if(!e)return this._setLength(),this.totalResults=void 0,this.TriggerInternal(a,i.Events.EventType.RESET,this,s,null),null;var l,u=e;return s.parse&&(u=this.parse(e)),this._manageLRU(u instanceof Array?u.length:1),s.noparse=!0,l=this._addInternal(u,s,!0,!1),this._setLength(),this.TriggerInternal(a,i.Events.EventType.RESET,this,s,null),this._handlePromise(l)},i.Collection.prototype.at=function(e,t){var i=this._getDeferred(t);return this._atInternal(e,t,!1,i)},i.Collection.prototype._atInternal=function(e,t,i,n){var o=e;if(o<0&&(o+=this._getLength()),o<0||this._overUpperLimit(o))return i||!this.IsVirtual()&&!n?null:this._addPromise(function(){return Promise.resolve(null)});var s=this;return i||!this.IsVirtual()&&!n?this._getModel(o):this._addPromise(function(){return s._deferredAt(o,t)})},i.Collection.prototype.whenReady=function(){return this._promises?this._promises:Promise.resolve()},i.Collection.prototype._addPromise=function(e){var t=this;return void 0===this._promises&&(this._promiseCount=0,this._promises=Promise.resolve()),this._promiseCount=this._promiseCount+1,this._promises=this._promises.then(e.bind(t)).then(function(e){return t._promiseCount-=1,0===t._promiseCount&&(t._promises=void 0,t.TriggerInternal(!1,i.Events.EventType.READY,t,null,null)),e},function(e){return t._promiseCount-=1,0===t._promiseCount&&(t._promises=void 0),Promise.reject(e)}),this._promises},i.Collection.prototype._addxhr=function(e){if(e&&e.abort){void 0===this._xhrs&&(this._xhrs=[]);var t=this;this._xhrs.push(e),e.done(function(){var i=t._xhrs?t._xhrs.indexOf(e):-1;i>-1&&t._xhrs.splice(i,1)})}},i.Collection.prototype.abort=function(){var e=this;function t(t,i){e._xhrs[t].then(function(n,o){"abort"===o&&(e._xhrs.splice(t,1),0===e._xhrs.length&&e.whenReady().then(function(){i(null)},function(){i(null)}))},function(){e._xhrs.splice(t,1),0===e._xhrs.length&&e.whenReady().then(function(){i(null)},function(){i(null)})})}return this._xhrs&&this._xhrs.length>0?new Promise(function(i){for(var n=e._xhrs.length-1;n>=0;n--)t(n,i),e._xhrs[n].abort()}):Promise.resolve()},i.Collection.prototype._deferredAt=function(e,t){var n=this,o=n._getModel(e);return void 0===o?new Promise(function(o,s){var r={};i.CollectionUtils.copyInto(r,t||{}),r.context=n,r.startIndex=e,r.error=function(e,o,r){s(i.Collection._createRejectionError(e,o,r,n,t,!1))},r.success=function(){o(n._getModel(e))},n._fetchInternal(r,-1,!1)}):new Promise(function(e){e(o)})},i.Collection.prototype.getByCid=function(e){for(var t,i=this._getModels(),n=null,o=0;o<this._modelIndices.length;o++)if(i[t=this._modelIndices[o]]&&e===i[t].cid){n=i[t];break}if(n)return n;if(this.IsVirtual())throw new Error("Not found locally and not supported by server for virtual collections");return null},i.Collection.prototype.get=function(e,t){var i=this._getDeferred(t),n=this._getInternal(e,t,i);if(n){if($.isFunction(n.then))return this._addPromise(function(){return new Promise(function(e,t){n.then(function(t){e(t.m)},function(e){t(e)})})});if(this.IsVirtual())return this._addPromise(function(){return new Promise(function(e){e(n.m)})});if(Object.prototype.hasOwnProperty.call(n,"m"))return n.m}return null},i.Collection.prototype._getLocal=function(e){var t=this._getLocalInternal(e);return t?t.m:null},i.Collection.prototype._getLocalInternal=function(e){var t=e,n=e;e instanceof i.Model?(t=e.GetCid(),n=e.GetId()):i.Collection._defined(e)&&void 0!==e.id&&(n=e.id);for(var o,s,r=null,a=this._modelIndices.length,l=this._getModels(),u=0;u<a;u++)if(void 0!==(o=l[s=this._modelIndices[u]])&&o.Match(n,t)){r=i.Collection._getModinfo(s,o);break}return r||i.Collection._getModinfo(-1,void 0)},i.Collection.prototype._getInternal=function(e,t,n,o){var s=e,r=e,a=void 0!==o&&o;e instanceof i.Model?(s=e.GetCid(),r=e.GetId()):i.Collection._defined(e)&&void 0!==e.id&&(r=e.id);for(var l,u=null,h=this._getModels(),d=0;d<this._modelIndices.length;d++)if(h[l=this._modelIndices[d]]&&h[l].Match(r,s)){var c=i.Collection._getModinfo(l,h[l]);u=c;break}if(u)return n?new Promise(function(e){e(u)}):u;if(this.IsVirtual()){if(void 0===r&&void 0!==s)return new Promise(function(e){e(i.Collection._getModinfo(-1,void 0))});var p=this;return new Promise(function(e,n){var o={};i.CollectionUtils.copyInto(o,t||{}),o.context=p,o.startID=r,o.error=function(e,o,s){n(i.Collection._createRejectionError(e,o,s,p,t,!1))},o.success=function(t,n){!function(t){if(null!=t){var n=p._getOffset(),o=p._getModel(n);void 0!==o&&o.Match(r,s)?e(i.Collection._getModinfo(n,o)):e(i.Collection._getModinfo(-1,void 0))}else e(i.Collection._getModinfo(-1,void 0))}(n)},p._fetchInternal(o,-1,a)})}var _=i.Collection._getModinfo(-1,void 0);return n?new Promise(function(e){e(_)}):_},i.Collection._getModinfo=function(e,t){return{index:e,m:t}},i.Collection.prototype._parseImpl=function(e){if(e instanceof Array)return e;if(!e)return e;var t;for(t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]instanceof Array)return e[t];return e},i.Collection.prototype.parse=i.Collection.prototype._parseImpl,i.Collection.prototype._checkActual=function(e,t,i){return!!(this._hasTotalResults()&&i.start+i.count>=this.totalResults)||i.start===e&&i.count===t},i.Collection.prototype.setRangeLocal=function(e,t){var i=this;return this._addPromise(function(){return i._setRangeLocalInternal(e,t)})},i.Collection.prototype._setRangeLocalInternal=function(e,t){this.IsVirtual()&&this._resetModelsToFullLength();var i=this._getLocalRange(e,t),n=this;if(this._checkActual(e,t,i))return new Promise(function(e){e(i)});var o=this._getModelLimit();return o>-1&&o<t&&(this.modelLimit=t),new Promise(function(i,o){n._setRangeLocalFetch(e,t,-1,{start:e,count:t},i,o,!0)})},i.Collection.prototype._setRangeLocalFetch=function(e,t,n,o,s,r,a){var l=this,u=e,h=u+t;this[i.Collection._FETCH_SIZE_PROP]&&this[i.Collection._FETCH_SIZE_PROP]>t&&(h=this[i.Collection._FETCH_SIZE_PROP]+u);var d=null;if(this.IsVirtual()){var c=this._getFirstMissingModel(u,h);c>u&&(h=(u=c)+t,this[i.Collection._FETCH_SIZE_PROP]&&this[i.Collection._FETCH_SIZE_PROP]>t&&(h=this[i.Collection._FETCH_SIZE_PROP]+u)),d={context:this,startIndex:u,fetchSize:h-u}}else d={context:this};d.error=function(e,t,n){r(i.Collection._createRejectionError(e,t,n,l,null,!1))},d.success=function(){!function(){var e=l._getLocalRange(o.start,o.count);if(a&&l._hasTotalResults()&&e.count<o.count){var i=e.start+e.count,n=u+(l.lastFetchCount?l.lastFetchCount:t);n<l.totalResults?l._setRangeLocalFetch(n,t,i,o,s,r,a):s(e)}else s(e)}()};try{this._fetchInternal(d,n,n>-1)}catch(e){if(e instanceof i.URLError){var p=l._getLocalRange(u,t);s(p)}}},i.Collection._createRejectionError=function(e,t,n,o,s,r){var a=!1;s&&s.silent&&(a=s.silent),r&&i.Model._triggerError(o,a,s,t,n,e);var l=new Error(t);return l.xhr=e,l.error=n,l.collection=o,l.status=t,l},i.Collection.prototype._getMaxLength=function(e,t){var i=this._getModelsLength();return 0===i?e+t:e+t>i?i:e+t},i.Collection.prototype.isRangeLocal=function(e,t){var i=this._getLocalRange(e,t);return 0===this._getModelsLength()?0===t:e===i.start&&(t===i.count||e+t>this._getModelsLength())},i.Collection.prototype._getModelArray=function(e,t){for(var i=[],n=this._getModels(),o=e+t,s=e;s<o;s++)i.push(n[s]);return i},i.Collection.prototype._getLocalRange=function(e,t){if(!this.IsVirtual()){if(this._getModelsLength()>0){if(e+t>this._getModelsLength()){var i=this._getModelsLength()-e;return{start:e,count:i,models:this._getModelArray(e,i)}}return{start:e,count:t,models:this._getModelArray(e,t)}}return{start:e,count:0,models:[]}}var n=this._getMaxLength(e,t);if(!this._hasTotalResults()&&n<e+t)return{start:e,count:n-e,models:this._getModelArray(e,n-e)};if(0===n)return{start:e,count:0,models:[]};var o=this._getFirstMissingModel(e,n);if(o>-1)return{start:e,count:o-e,models:this._getModelArray(e,o-e)};var s=t;return e>n?s=0:e+s>n&&(s=n-e),{start:e,count:s,models:this._getModelArray(e,s)}},i.Collection.prototype._getFirstMissingModel=function(e,t){for(var i=e;i<t;i++)if(void 0===this._getModel(i))return i;return-1},i.Collection.prototype.fetch=function(e){var t=this._fetchInternal(e,-1,!1);return this._addPromise(function(){return Promise.resolve(t)}),t},i.Collection.prototype._fetchInternal=function(e,t,n){function o(e,t,i){e.IsVirtual()?i||e._resetModelsToFullLength():t.add||t.useset||e.reset(null,{silent:!0})}var s,r=e||{},a=r.success,l=r.error;return r.set&&(r.useset=!!r.set),void 0===r.parse&&(r.parse=!0),s=this,r.error=function(t,n,o){i.Model._triggerError(s,!1,e,n,o,t),l&&l.call(i.Model.GetContext(e,s),t,n,o)},r.success=function(l){var u;try{u=s.parse(l,e)}catch(t){return void i.Collection._reportError(s,t,r.error,e)}s._setPagingReturnValues(l,e,u,n);var h=null,d=!1,c=t;if(r.add||s.model){o(s,r,n);try{-1===t&&(d=!0,c=s._getOffset()),h=s._fillInCollectionWithParsedData(u,c,d,r)}catch(t){return void i.Collection._reportError(s,t,r.error,e)}}else n||(s.IsVirtual()?(o(s,r,n),-1===t&&(d=!0,c=s._getOffset()),h=s._putDataIntoCollection(u,c,d)):r.useset?s._setInternal(u,!1,r,!1):s.reset(u,{silent:!0}));s.IsVirtual()&&h&&(s.lastFetchCount=h.length);var p=!!r.silent;s.TriggerInternal(p,i.Events.EventType.SYNC,s,l,r),a&&a.call(i.Model.GetContext(e,s),s,l,r)},this._fetchCall(r)},i.Collection.prototype._putDataIntoCollection=function(e,t,i){var n;if(e){n=e instanceof Array?e:[e];var o={};i&&this._manageLRU(n.length);for(var s=t,r=this.IsVirtual(),a=null,l=0;l<n.length;l+=1)r&&(o={at:s},a=this._atInternal(s,null,!0,!1)),o.silent=!0,this._addInternal(n[l],o,!0,!1),this._atInternal(s,null,!0,!1)!==a&&(s+=1)}return n},i.Collection.prototype._fillInCollectionWithParsedData=function(e,t,n,o){var s=o||{},r=s.parse,a=i.Collection._createModel(this),l=null;if(e){l=e instanceof Array?e:[e];var u,h={};n&&this._manageLRU(l.length);var d,c=this.IsVirtual();if(s.useset&&!c){for(d=0;d<l.length;d+=1)u=a&&r?a.parse(l[d]):l[d],l[d]=u;this._setInternal(l,!1,s,!1)}else{var p=null,_=t;for(d=0;d<l.length;d+=1)u=a&&r?a.parse(l[d]):l[d],c&&(h={at:_},p=this._atInternal(_,h,!0,!1)),h.silent=!0,this._addInternal(u,h,!0,!1),this._atInternal(_,null,!0,!1)!==p&&(_+=1)}}return l},i.Collection._reportError=function(e,t,n,o){i.Logger.error(t.toString()),n&&n.call(i.Model.GetContext(o,e),e,t,o)},i.Collection.prototype._fetchOnly=function(e){var t,n,o=e||{},s=o.success;return void 0===o.parse&&(o.parse=!0),n=this,o.success=function(r){var a,l,u,h=null,d=[];try{u=n.parse(r,e)}catch(t){return void i.Collection._reportError(n,t,o.error,e)}if(o.add||n.model){if(l=i.Collection._createModel(n),u)for(h=u instanceof Array?u:[u],a=0;a<h.length;a+=1){if(l&&o.parse)try{t=l.parse(h[a])}catch(t){return void i.Collection._reportError(n,t,o.error,e)}else t=h[a];d.push(n._newModel(t))}}else h=u instanceof Array?u:[u];n.TriggerInternal(!1,i.Events.EventType.SYNC,n,r,o),s&&s.call(i.Model.GetContext(e,n),n,d,o)},this._fetchCall(o)},i.Collection.prototype._fetchCall=function(e){try{return i.Model._internalSync("read",this,e)}catch(t){throw i.Model._triggerError(this,!1,e,null,t,null),t}},i.Collection.prototype._resetModelsToFullLength=function(){var e=this.totalResults;return void 0!==e&&this._getModelsLength()!==e&&(this._setModels(new Array(e),!0),this._resetLRU(),this._setLength(),!0)},i.Collection.prototype._getFetchSize=function(e){return(e||{})[i.Collection._FETCH_SIZE_PROP]||this[i.Collection._FETCH_SIZE_PROP]},i.Collection.prototype.IsVirtual=function(){return this._getFetchSize(null)>-1},i.Collection.prototype._getReturnProperty=function(e,t,n,o,s){var r=parseInt(i.Collection._getProp(e,t,n),10);return null==r||isNaN(r)?o||s:r},i.Collection.prototype._cleanTotalResults=function(e){if(-1!==e)return e},i.Collection.prototype._setPagingReturnValues=function(e,t,n,o){var s={};this.customPagingOptions&&((s=this.customPagingOptions.call(this,e))||(s={}));var r=t||{};if(this.lastFetchSize=this._getReturnProperty(s,e,"limit",r.fetchSize,this.fetchSize),this.offset=this._getReturnProperty(s,e,"offset",r.startIndex,0),this.lastFetchCount=this._getReturnProperty(s,e,"count",this.lastFetchCount,this.lastFetchCount),this.totalResults=this._cleanTotalResults(this._getReturnProperty(s,e,"totalResults",this.totalResults,this.totalResults)),this.hasMore=this._getHasMore(i.Collection._getProp(s,e,"hasMore"),this.offset,this.lastFetchSize,this.totalResults),!o){var a=this._cleanTotalResults(parseInt(i.Collection._getProp(s,e,"totalResults"),10)),l=parseInt(i.Collection._getProp(s,e,"count"),10);this.totalResults=this._adjustTotalResults(a,this.hasMore,this.offset,l,n&&Array.isArray(n)?n.length:0)}!this.IsVirtual()&&this.totalResults&&this.totalResults!==this.lastFetchCount&&this.lastFetchSize&&this.setFetchSize(this.lastFetchSize)},i.Collection.prototype._adjustTotalResults=function(e,t,i,n,o){if(!t&&isNaN(e))return(isNaN(n)?o:n)+i;return this.totalResults},i.Collection.prototype._getHasMore=function(e,t,n,o){return i.Collection._defined(e)?e:null==o||!(t+n>o)},i.Collection._getProp=function(e,t,i){return Object.prototype.hasOwnProperty.call(e,i)?e[i]:t?t[i]:void 0},i.Collection.prototype._getOffset=function(){return i.Collection._defined(this.offset)?this.offset:0},i.Collection.prototype.create=function(e,t){var n=this,o=t||{},s=this._getDeferred(o);function r(t,n,o,s){return n.save(e instanceof i.Model?null:e,s),n}function a(e,t){return o.wait?n.IsVirtual()||s?n._addPromise(function(){return Promise.resolve(void 0)}):null:n.add(e,t)}var l=this._newModel(e,!0,o,!1),u=o.success,h=o.context;o.validate;if(o.context=this,o.success=function(e,t,i){i.xhr&&(o.xhr=i.xhr),o.wait&&n.add(l,o),u&&u.call(null!=h?h:n,e,t,o)},null==l)return!1;o.forceNew=null!=l.GetId();var d=i.Model._copyOptions(o);return l.SetCollection(this),s||this.IsVirtual()?new Promise(function(e){d.merge=!0,d.deferred=!0,a(l,d).then(function(){o.success=function(t,i,s){s.xhr&&(o.xhr=s.xhr),o.wait?(n.IsVirtual()&&(d.force=!0),n.add(l,d).then(function(){u&&u.call(null!=h?h:n,t,i,o),e(t)})):(u&&u.call(null!=h?h:n,t,i,o),e(t))};var t=r(0,l,0,o);t||e(t)})}):(d.merge=!0,a(l,d),r(0,l,0,o))},i.Collection.prototype.pluck=function(e){var t,i=[];for(this._throwErrIfVirtual("pluck"),t=0;t<this._getLength();t+=1)i.push(this.at(t).get(e));return i},i.Collection.prototype.where=function(e,t){return this._handlePromise(this._whereInternal(e,t))},i.Collection.prototype._whereInternal=function(e,t){var n=t||{},o=this._getDeferred(n),s=this;if(this.IsVirtual())return new Promise(function(t,o){var r={query:e,all:!0,success:function(e,i){t(i)},error:function(e,t,r){o(i.Collection._createRejectionError(e,t,r,s,n,!0))}};s._fetchOnly(r)});var r,a,l=[];for(r=0;r<this._getLength();r+=1)(a=this.at(r)).Contains(e)&&l.push(a);return o?new Promise(function(e){e(l)}):l},i.Collection.prototype.whereToCollection=function(e,t){var n=t||{},o=this._getDeferred(n),s=this;if(this.IsVirtual()||o)return s._addPromise(function(){return new Promise(function(t,i){return s._whereInternal(e,n).then(function(e){var i=s._makeNewCollection(e);t(i)},function(e){i(e)})})});var r=this._whereInternal(e,n),a=this._makeNewCollection(r);return a[i.Collection._FETCH_SIZE_PROP]=-1,a._setLength(),a},i.Collection.prototype._makeNewCollection=function(e){var t=this._cloneInternal(!1);return t._setModels(e,!1),t._resetLRU(),t._setLength(),t},i.Collection.prototype._throwErrIfVirtual=function(e){if(this.IsVirtual())throw new Error(e+" not valid on a virtual Collection")},i.Collection.prototype.map=function(e,t){var i,n=[];return this._throwErrIfVirtual("map"),this._getModels().forEach(function(o){i=e.call(t||this,o),n.push(i)}),n},i.Collection.prototype.each=function(e,t){this._throwErrIfVirtual("each"),this._getModels().forEach(e,t)},i.Collection.prototype.size=function(){return this._getLength()},i.Collection.prototype.sortBy=function(e,t){var n,o=[];return this._throwErrIfVirtual("sortBy"),this._getModels().forEach(function(e){o.push(e)}),n=this,o.sort(function(o,s){var r,a;return $.isFunction(e)?(r=e.call(t||n,o),a=e.call(t||n,s),i.Collection._compareKeys(r,a,n.sortDirection)):(r=o.get(e),a=s.get(e),i.Collection._compareKeys(r,a,n.sortDirection))}),o},i.Collection.prototype.groupBy=function(e,t){var i,n={};return this._throwErrIfVirtual("groupBy"),this._getModels().forEach(function(o){i=$.isFunction(e)?e.call(t||this,o):o.get(e),void 0===n[i]&&(n[i]=[]),n[i].push(o)},this),n},i.Collection.prototype.indexBy=function(e,t){var i,n={};return this._throwErrIfVirtual("indexBy"),this._getModels().forEach(function(o){i=$.isFunction(e)?e.call(t||this,o):o.get(e),n[i]=o},this),n},i.Collection.prototype.min=function(e,t){var i,n,o={};return this._throwErrIfVirtual("min"),0===this._getModelsLength()?null:(o=this._getModel(0),i=e.call(t||this,this._getModel(0)),this._getModels().forEach(function(s,r){r>=1&&(n=e.call(t||this,s))<i&&(o=s,i=n)},this),o)},i.Collection.prototype.max=function(e,t){var i,n,o={};return this._throwErrIfVirtual("max"),0===this._getModelsLength()?null:(o=this._getModel(0),i=e.call(t,this._getModel(0)),this._getModels().forEach(function(s,r){r>=1&&(n=e.call(t||this,s))>i&&(o=s,i=n)},this),o)},i.Collection.prototype.filter=function(e,t){var i=[];return this._throwErrIfVirtual("filter"),this._getModels().forEach(function(n){e.call(t||this,n)&&i.push(n)}),i},i.Collection.prototype.without=function(e){var t,i,n,o,s,r=[];this._throwErrIfVirtual("without");for(var a=0;a<this._getModels().length;a++){for(o=!0,s=this._getModel(a),t=0;t<arguments.length;t+=1)if(n=arguments[t].GetCid(),i=arguments[t].GetId(),s.Match(i,n)){o=!1;break}o&&r.push(s)}return r},i.Collection.prototype.difference=function(e){var t,i,n,o,s,r,a=[];this._throwErrIfVirtual("difference");for(var l=0;l<this._getModels().length;l++){for(s=!0,r=this._getModel(l),t=0;t<arguments.length;t+=1){for(i=0;i<arguments[t].length;i++)if(o=arguments[t][i].GetCid(),n=arguments[t][i].GetId(),r.Match(n,o)){s=!1;break}if(!s)break}s&&a.push(r)}return a},i.Collection.prototype.isEmpty=function(){return 0===this._getLength()},i.Collection.prototype.any=function(e,t){var i;this._throwErrIfVirtual("any");for(var n=0;n<this._getModelsLength();n+=1)if(i=this._getModel(n),e.call(t||this,i))return!0;return!1},i.Collection.prototype.findWhere=function(e,t){var i=this._getDeferred(t),n=this;if(this.IsVirtual()||i)return this._addPromise(function(){return new Promise(function(i){n._whereInternal(e,t).then(function(e){e&&e.length>0&&i(e[0]),i(null)})})});var o=this._whereInternal(e,t);return o.length>0?o[0]:null},i.Collection.prototype.slice=function(e,t,i){var n,o=this._getDeferred(i),s=[],r=t;if(void 0===r){if(this.IsVirtual()&&!this._hasTotalResults())throw new Error("End must be set for virtual collections with no totalResults");r=this._getModelsLength()}if(o||this.IsVirtual()){var a=this;return this._addPromise(function(){return a.IterativeAt(e,r)})}for(n=e;n<r;n+=1)s.push(this._getModel(n));return s},i.Collection.prototype.set=function(e,t){var i=this._getDeferred(t);return this._setInternal(e,!0,t,i||this.IsVirtual())},i.Collection._removeAfterSet=function(e,t,i,n,o){if(i)for(var s=t.length-1;s>=0;s-=1)-1===n.indexOf(s)&&e._removeInternal(t[s],s,o)},i.Collection.prototype._swapModels=function(e,t,i,n){if(this._hasComparator()||!i||!n)return{index:e,swapped:!1};var o=this._getModelsLength();if(e>=o||t>=o)return{index:e,swapped:!1};var s=this._getModel(e),r=this._getModel(t);return this._setModel(e,r),r.SetIndex(e),this._setModel(t,s),s.SetIndex(t),{index:t,swapped:t!==e}},i.Collection.prototype._setInternal=function(e,t,n,o){var s,r,a=n||{},l=void 0===a.add||a.add,u=void 0===a.remove||a.remove,h=void 0===a.merge||a.merge,d=[],c=null,p=t?this.parse(e):e;if(r=Array.isArray(p)?p:[p],o){var _=this;return this._addPromise(function(){return _._deferredSet(r,_._getModels(),a,u,l,h,t)})}var m=!1;for(s=0;s<r.length;s+=1)if(-1!==(c=this._updateModel(this._newModel(r[s],t,a,!0),l,h,o))){var g=this._swapModels(c,s,u,l),f=g.index;g.swapped&&(m=!0),-1===d.indexOf(f)&&d.push(f)}if(m){var v=a.add?{add:!0}:null;this.TriggerInternal(a.silent,i.Events.EventType.SORT,this,v,null)}return i.Collection._removeAfterSet(this,this._getModels(),u,d,a),null},i.Collection.prototype._deferredSet=function(e,t,n,o,s,r,a){var l,u=[],h=this;return new Promise(function(d,c){var p=function(t){return new Promise(function(i,o){h._updateModel(h._newModel(e[t],a,n,!0),s,r,!0).then(function(e){-1!==e&&u.push(e),i(t+1)},o)})},_=Promise.resolve(0);for(l=0;l<e.length;l+=1)_=_.then(p);_.then(function(){i.Collection._removeAfterSet(h,t,o,u,n),d(void 0)},c)})},i.Collection.prototype._updateModel=function(e,t,i,n){function o(n,o,s){var r=o?o.index:-1,a=o?o.m:null,l={};if(a){if(i){if(l={merge:i},s)return new Promise(function(t){n._addInternal(e,l,!1,!0).then(function(){t(r)})});n.add(e,l)}}else if(t){if(s)return new Promise(function(t){n._addInternal(e,l,!1,!0).then(function(){t(n._getLength()-1)})});n.add(e),r=n._getLength()-1}return r}if(n||this.IsVirtual()){var s=this;return new Promise(function(t){s._getInternal(e,{silent:!0},n).then(function(e){o(s,e,!0).then(function(e){t(e)})})})}return o(this,this._getInternal(e),!1)},i.Collection.prototype.toJSON=function(){var e=[];return this._throwErrIfVirtual("toJSON"),this._getModels().forEach(function(t){e.push(t.toJSON())}),e},i.Collection.prototype.first=function(e,t){var i,n=this._getDeferred(t),o=this._getLength(),s=[],r=this,a=e;a?o=a:a=1;var l=this.IsVirtual()||n;if(1===a)return l?this._addPromise(function(){return r._deferredAt(0,null)}):this._getModelsLength()>0?this._getModel(0):null;if(o>this._getModelsLength()&&(this.IsVirtual()&&!this._hasTotalResults()||(o=this._getModelsLength())),l)return this._addPromise(function(){return r.IterativeAt(0,o)});for(i=0;i<o;i+=1)s.push(this._getModel(i));return s},i.Collection.prototype.indexOf=function(e,t){var i=this._getDeferred(t);if(this.IsVirtual()||i){var n=this;return this._addPromise(function(){return n._getInternal(e,null,!0).then(function(e){return e.index})})}return this._getInternal(e).index},i.Collection.prototype.contains=function(e,t){var i=this._getDeferred(t);if(this.IsVirtual()||i){var n=this;return this._addPromise(function(){return n._getInternal(e,null,!0).then(function(e){return e.index>-1})})}return this._getInternal(e).index>-1},i.Collection.prototype.include=i.Collection.prototype.contains,i.Collection.prototype._localIndexOf=function(e){var t=this._getLocalInternal(e);return void 0!==t?t.index:-1},i.Collection.prototype.pop=function(e){var t=this._getDeferred(e);if(this.IsVirtual()||t){var i=this;return this._atInternal(this._getLength()-1,e,!1,!0).then(function(t){return i.remove(t,e),t})}var n=this.at(this._getLength()-1);return this.remove(n,e),n},i.Collection.prototype.push=function(e,t){var i=this._getDeferred(t);return this._manageLRU(1),this._handlePromise(this._addInternal(e,t,!1,i))},i.Collection.prototype.lastIndexOf=function(e,t){var n,o=t;for(this._throwErrIfVirtual("lastIndexOf"),void 0===o&&(o=0),n=this._getLength()-1;n>=o;n-=1)if(i.Object.__innerEquals(e,this.at(n)))return n;return-1},i.Collection.prototype._getSortAttrs=function(e){return void 0===e?[]:e.split(",")},i.Collection._getQueryString=function(e){function t(e,t,i){return e+i+t}function n(e,n){var o,s=n;return Object.keys(e||{}).forEach(function(n){if(Object.prototype.hasOwnProperty.call(e,n))for(var r=Array.isArray(e[n])?e[n]:[e[n]],a=0;a<r.length;a++){if(i.Model.IsComplexValue(r[a])){var l=r[a].value,u=null,h=r[a].comparator;u=$.isFunction(h)?h(null,n,l):h,o=t(n,l,u)}else o=t(n,e[n],"=");s+=o+"+"}}),s=s.substring(0,s.length-1)+","}var o,s=Array.isArray(e)?e:[e],r="";for(o=0;o<s.length;o++)r=n(s[o],r);return","===r.substring(r.length-1)?r.substring(0,r.length-1):r},i.Collection.prototype.ModifyOptionsForCustomURL=function(e){var t={};Object.keys(e||{}).forEach(function(i){Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])});var n=this.comparator;if(n&&i.StringUtils.isString(n)){for(var o=this._getSortAttrs(n),s=0;s<o.length;s++)0===s?t.sort=o[s]:t.sort+=","+o[s];t.sortDir=this._getSortDirStr()}return this.IsVirtual()&&(t[i.Collection._FETCH_SIZE_PROP]=this._getFetchSize(t)),t},i.Collection.prototype.IsUrlBased=function(e){var t=this.customURL;if($.isFunction(t))return!0;var n=this.GetCollectionFetchUrl(e);return i.Collection._defined(n)},i.Collection.prototype.GetCollectionFetchUrl=function(e){var t=i.Model.GetPropValue(this,"url");if(this.IsVirtual()){var n=e||{},o=n.all,s=null;if(o)s=this.totalResults||this._getFetchSize(n);else s=this._getFetchSize(n);if(t&&t.indexOf("?")>-1?t+="&":t+="?",t+="limit="+s,o||(i.Collection._defined(n.startIndex)&&(t+="&offset="+n.startIndex),n.startID&&(t+="&fromID="+n.startID),n.since&&(t+="&since="+n.since),n.until&&(t+="&until="+n.until)),n.query){var r=i.Collection._getQueryString(n.query);r&&r.length>0&&(t+="&q="+r)}var a=this.comparator;if(a&&i.StringUtils.isString(a)){var l,u=this._getSortAttrs(a),h=this._getSortDirStr();for(l=0;l<u.length;l++)t+=0===l?"&orderBy="+u[l]+":"+h:","+u[l]+":"+h}t+="&totalResults=true"}return t},i.Collection.prototype._getSortDirStr=function(){return-1===this.sortDirection?"desc":"asc"},i.Collection.prototype.sync=function(e,t,n){return i.sync(e,t,n)},i.Collection._FETCH_SIZE_PROP="fetchSize",i.Model=function(e,t){i.Model._init(this,e,t,null)},i.Object.createSubclass(i.Model,i.Object,"oj.Model"),i.Model.prototype.Init=function(){i.Model.superclass.Init.call(this)},i.Model.prototype.attributes={},i.Model.prototype.defaults={},i.Model.prototype.id=null,i.Model.prototype.idAttribute="id",i.Model.prototype.urlRoot=null,i.Model.prototype.customURL=null,i.Model.prototype.validate=null,i.Model.prototype.validationError=null,i.Model.prototype.omitLanguageHeader=!1,i.Model._idCount=0,i.Model._init=function(e,t,n,o){var s,r,a;if(!i.Model._justExtending){e.Init(),i.Events.Mixin(e),e._clearChanged(),e.previousAttrs={},e.nestedSet=!1,e.index=-1;var l=n||{};for(a in e.attributes={},e.defaults&&!l.ignoreDefaults&&(e.attributes=i.Model._cloneAttributes($.isFunction(e.defaults)?e.defaults():e.defaults,null)),o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);if(t)if(s=l.parse,$.isFunction(s)&&(e.parse=s),r=i.Model._cloneAttributes(t,e.attributes),e.attributes=r,null==(r=s?e.parse(r):r)||void 0===r)e.attributes={};else for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&e._setProp(a,r[a],!1,!1,l,!0);e.SetCid(),e.SetCollection(l.collection),l.customURL&&(e.customURL=l.customURL),l.url&&(e.url=l.url),l.urlRoot&&(e.urlRoot=l.urlRoot),e.initialize&&e.initialize(t,l),e.SetupId()}},i.Model.extend=function(e,t){var n;i.Model._justExtending=!0,n=new i.Model,i.Model._justExtending=!1,$.extend(n,this.prototype);var o,s=e||{};return Object.keys(s).forEach(function(e){Object.prototype.hasOwnProperty.call(s,e)&&(n[e]=s[e])}),o=s&&s.constructor&&Object.prototype.hasOwnProperty.call(s,"constructor")?s.constructor:function(e,t){i.Model._init(this,e,t,s)},$.extend(o,this),o.prototype=n,o.extend=i.Model.extend,o.prototype.constructor=o,i.Events.Mixin(o,this),t&&Object.keys(t).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e])}),o},i.Model.prototype.TriggerInternal=function(e,t,i,n,o){},i.Model.prototype.SetCid=function(){this.GetCid()||(this.cid="id"+i.Model._idCount,i.Model._idCount+=1)},i.Model.prototype.GetCid=function(){return this.cid},i.Model.prototype.SetIndex=function(e){this.index=e},i.Model.prototype.GetIndex=function(){return this.index},i.Model.prototype.SetNext=function(e){var t=this.nextModel;return this.nextModel=e,t},i.Model.prototype.GetNext=function(){return this.nextModel},i.Model.prototype.SetPrevious=function(e){var t=this.previousModel;return this.previousModel=e,t},i.Model.prototype.GetPrevious=function(){return this.previousModel},i.Model.prototype.Merge=function(e,t,n){var o,s=!1,r=i.StringUtils.isString(t),a=!1,l=this;return Object.keys(e.attributes||{}).forEach(function(i){Object.prototype.hasOwnProperty.call(e.attributes,i)&&(o=l.attributes[i]!==e.attributes[i],r?i===t&&o&&(s=!0):o&&(s=!0),o&&(a=!0,l.attributes[i]=e.attributes[i],l._addChange(i,e.attributes[i]),l._fireAttrChange(i,l.attributes[i],null,n)))}),this.SetupId(),a&&this._fireChange(null,n),s},i.Model._hasProperties=function(e){var t;if(e&&e instanceof Object)for(t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1},i.Model.prototype.SetCollection=function(e){null!=e?(this.collection=e,this.SetupId()):delete this.collection},i.Model.prototype.GetCollection=function(){return this.collection},i.Model.prototype._fireAttrChange=function(e,t,n,o){null!=e&&this.TriggerInternal(o,i.Events.EventType.CHANGE+":"+e,this,t,n)},i.Model.prototype._fireChange=function(e,t){this.TriggerInternal(t,i.Events.EventType.CHANGE,this,e,null)},i.Model.prototype.SetupId=function(){var e=null;if(this.collection&&this.collection.modelId){var t=this.collection.modelId;e=$.isFunction(t)?t.call(this.collection,this.attributes):t}if(!e){var i=this._getIdAttr();e=null!=this.attributes?this.attributes[i]:null}this.id=e},i.Model.prototype._setPropInternal=function(e,t,n){var o=i.Object.__innerEquals(this.attributes[e],t);return!(!n&&o)&&(this.attributes[e]=t,this.SetupId(),!o)},i.Model.prototype._clearChanged=function(){this.changed={}},i.Model.prototype._addChange=function(e,t){this.changed[e]=t},i.Model.prototype._setProp=function(e,t,n,o,s,r){if(null==e)return!0;var a,l={},u=this.nestedSet;if(o?Object.keys(e).forEach(function(t){Object.prototype.hasOwnProperty.call(e,t)&&(l[t]=e[t])}):l[e]=t,a=s||{},!this._checkValid(l,{validate:a.validate},!1))return!1;u||(this._clearChanged(),this.changes=[]),this.nestedSet||r||(this.previousAttrs=i.Model._cloneAttributes(this.attributes,null)),this.nestedSet=!0;var h=this;Object.keys(l).forEach(function(e){Object.prototype.hasOwnProperty.call(l,e)&&(h._setPropInternal(e,l[e],n)?(h._addChange(e,l[e]),h.changes.push(e)):delete l[e])});var d=a.silent;if(Object.keys(l).forEach(function(e){Object.prototype.hasOwnProperty.call(l,e)&&(!d&&(h.changes.length>0||u&&-1===h.changes.indexOf(e))&&(h.pendingChanges=!0,h.pendingOpts=a),h._fireAttrChange(e,l[e],a,d))}),u)return!0;if(!d&&!u)for(;this.pendingChanges;)this.pendingChanges=!1,this._fireChange(this.pendingOpts,d);return this.nestedSet=!1,!0},i.Model.prototype.clear=function(e){var t,n,o={silent:!0},s=e||{};t=s.silent,o.validate=s.validate,this._clearChanged();for(n in this.attributes)if(Object.prototype.hasOwnProperty.call(this.attributes,n)){if(!this._unsetInternal(n,o,!0))return!1;this.TriggerInternal(t,i.Events.EventType.CHANGE+":"+n,this,void 0,null)}return this.attributes={},this.SetupId(),this._fireAttrChange(null,null,null,t),this._fireChange(null,t),this},i.Model._cloneAttributes=function(e,t){var n,o,s=t||{},r=!0;if(("object"==typeof s?Object.keys(s):[]).length>0){for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&Object.prototype.hasOwnProperty.call(e,n)&&void 0===e[n]&&delete e[n];return i.CollectionUtils.copyInto(s,e,void 0,!0,1e4),s}for(n in e)if("function"===(o=$.type(e[n]))||"undefined"===o||"date"===o||"array"===o||"object"===o){r=!1;break}return r?s=JSON.parse(JSON.stringify(e)):"object"==typeof e&&i.CollectionUtils.copyInto(s,e,void 0,!0,1e4),s},i.Model.prototype.clone=function(){var e,t=new this.constructor;for(e in this)Object.prototype.hasOwnProperty.call(this,e)&&this[e]!==this.attributes&&(t[e]=this[e]);return t.attributes=i.Model._cloneAttributes(this.attributes,null),delete t.cid,t.SetCid(),t.SetupId(),t},i.Model.prototype.Match=function(e,t){var i,n=this.GetId();return void 0!==n&&n==e||void 0!==(i=this.cid)&&i==t},i.Model.prototype.set=function(e,t,n){var o,s=n||{},r=!0;if(arguments&&arguments.length>0)if(i.StringUtils.isString(e))s.unset?this._unsetInternal(e,null,!1):this._setProp(e,t,!1,!1,s,!1)||(r=!1);else if((s=t||{}).unset)for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&this._unsetInternal(o,null,!1);else this._setProp(e,null,!0,!0,s,!1)||(r=!1);return!!r&&this},i.Model.prototype.unset=function(e,t){return this._unsetInternal(e,t,!1)},i.Model.prototype._unsetInternal=function(e,t,i){var n=t||{},o=n.silent;if(this.has(e)){if(!this._checkValid({},n,!1))return!1;i||this._clearChanged(),delete this.attributes[e],this._addChange(e,void 0),this._fireAttrChange(e,null,null,o),this._fireChange(null,o)}return this.SetupId(),!0},i.Model.prototype.get=function(e){return this.attributes[e]},i.Model.prototype.has=function(e){return i.Collection._defined(this.attributes[e])},i.Model.prototype.fetch=function(e){var t,n=e||{},o=n.success,s=n.error,r=this;return(t=i.Model._copyOptions(n)).error=function(e,t,o){i.Model._triggerError(r,!1,n,t,o,e),s&&s.apply(r,arguments)},t.success=function(e){t.xhr&&(n.xhr=t.xhr),i.Model._fireSyncEvent(r,e,t,!1),$.isFunction(r.parse)&&r.set(r.parse(e),t),o&&o.call(i.Model.GetContext(t,r),r,e,n)},i.Model._internalSync("read",this,t)},i.Model.prototype._parseImpl=function(e){return e},i.Model.prototype.parse=i.Model.prototype._parseImpl,i.Model.prototype.url=function(){var e,t,n=this._getUrlRoot(),o=this.GetId();if(n)return o?n+"/"+encodeURIComponent(o):n;if(e=this.collection)return t=i.Model.GetPropValue(e,"url"),o&&t?t+("/"===i.Model._getLastChar(t)?"":"/")+encodeURIComponent(this.GetId()):t;throw new i.URLError},i.Model.prototype.keys=function(){var e=[],t=this;return Object.keys(t.attributes||{}).forEach(function(i){Object.prototype.hasOwnProperty.call(t.attributes,i)&&e.push(i)}),e},i.Model.prototype.values=function(){var e=[],t=this;return Object.keys(t.attributes||{}).forEach(function(i){Object.prototype.hasOwnProperty.call(t.attributes,i)&&e.push(t.get(i))}),e},i.Model.prototype.pairs=function(){var e,t=[],i=this;return Object.keys(i.attributes||{}).forEach(function(n){Object.prototype.hasOwnProperty.call(i.attributes,n)&&((e=[]).push(n),e.push(i.get(n)),t.push(e))}),t},i.Model.prototype.omit=function(e){var t,i=[],n={};if(e instanceof Array)i=e;else for(t=0;t<arguments.length;t++)i.push(arguments[t]);var o=this;return Object.keys(o.attributes||{}).forEach(function(e){Object.prototype.hasOwnProperty.call(o.attributes,e)&&-1===i.indexOf(e)&&(n[e]=o.get(e))}),n},i.Model.prototype.pick=function(e){var t,i=[],n={};if(e instanceof Array)i=e;else for(t=0;t<arguments.length;t++)i.push(arguments[t]);for(t=0;t<i.length;t++)Object.prototype.hasOwnProperty.call(this.attributes,i[t])&&(n[i[t]]=this.get(i[t]));return n},i.Model.prototype.invert=function(){var e,t={},i=this;return Object.keys(i.attributes||{}).forEach(function(n){Object.prototype.hasOwnProperty.call(i.attributes,n)&&(e=i.get(n),t[e]=n)}),t},i.Model._getLastChar=function(e){return e.charAt(e.length-1)},i.Model.prototype._saveUrl=function(){var e=this._getUrlRoot();return e||(this.GetCollection()?this.GetCollection().url:null)},i.Model.prototype._getUrlRoot=function(){return i.Model.GetPropValue(this,"urlRoot")},i.Model.prototype._parseSaveImpl=function(e){return e},i.Model.prototype.parseSave=i.Model.prototype._parseSaveImpl,i.Model.prototype.isValid=function(){var e={};return e.validate=this.validate,this._checkValid(this.attributes,e,!1)},i.Model._isValidateSet=function(e,t){var i=e||{};return void 0!==i.validate&&null!==i.validate?i.validate:t},i.Model.prototype._checkValid=function(e,t,n){var o=t||{},s=this.validate;return!(s&&i.Model._isValidateSet(o,n)&&(this.validationError=s.call(this,e,o),this.validationError))||(this.TriggerInternal(!1,i.Events.EventType.INVALID,this,this.validationError,o),!1)},i.Model._processArgs=function(e){var t,n=!1,o={},s={};if(e&&e.length>0){if(e.length>1&&e[e.length-1]&&i.Model._hasProperties(e[e.length-1])&&(n=!0,o=e[e.length-1]||{}),null==e[0])return{attributes:null,options:o};if(i.Model._hasProperties(e[0])||i.Object.isEmpty(e[0]))Object.keys(e[0]).forEach(function(t){Object.prototype.hasOwnProperty.call(e[0],t)&&(s[t]=e[0][t])});else for(t=0;t<e.length;t+=2)(void 0!==e[t]||t<e.length-1||!n&&t===e.length-1)&&(s[e[t]]=e[t+1])}return{attributes:s,options:o}},i.Model._copyOptions=function(e){var t={},i=e||{};return Object.keys(i).forEach(function(e){Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])}),t},i.Model._triggerError=function(e,t,n,o,s,r){var a=n||{};a.textStatus=o,a.errorThrown=s,e.TriggerInternal(t,i.Events.EventType.ERROR,e,r,a)},i.Model.prototype.save=function(e,t){var n,o,s,r,a,l,u,h,d,c=i.Model._processArgs(arguments);d=void 0===e?void 0:c.attributes;var p=t||{};u=i.Model._copyOptions(c.options);var _=$.extend(!0,{},this.attributes,d);return!!this._checkValid(_,u,!0)&&(u.wait||this.set(d),n=void 0!==u.forceNew&&u.forceNew,r=this,a=u.error,l=u.patch,u.error=function(e,t,n){i.Model._triggerError(r,!1,p,t,n,e),a&&a.apply(r,arguments)},u.saveAttrs=u.wait?this._attrUnion(d):this.attributes,h=this.attributes,this.attributes=u.saveAttrs,u.saveAttrs=this.toJSON(),this.attributes=h,n||this.isNew()?(s=i.Model._getSuccess(u),u.success=function(e){var t;if(u.xhr&&(p.xhr=u.xhr),e&&!i.Object.isEmpty(e)){if(t=$.isFunction(r.parse)?r.parse(e):e,!r._checkValid(t,u,!0))return;r.attributes=$.extend(!0,r.attributes,t),u.wait&&Object.keys(d||{}).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&(d[e]=t[e])}),r.SetupId()}i.Model._fireSyncEvent(r,e,u,!1),u.wait&&r.set(d),s&&s.call(i.Model.GetContext(u,r),r,e,p),r._clearChanged()},u.attrs||(u.attrs=u.saveAttrs),u.parse=!0,l&&(u.saveAttrs=u.attrs),i.Model._internalSync("create",this,u)):(o=u.success,u.success=function(e){var t;u.xhr&&(p.xhr=u.xhr),e&&!i.Object.isEmpty(e)&&(t=$.isFunction(r.parse)?r.parse(e):e,r.attributes=$.extend(!0,r.attributes,t),u.wait&&Object.keys(d||{}).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&(d[e]=t[e])}),r.SetupId()),i.Model._fireSyncEvent(r,e,u,!1),u.wait&&r.set(d),o&&o.call(i.Model.GetContext(u,r),r,e,p),r._clearChanged()},u.attrs||(u.attrs=void 0===d?void 0:l?d:u.saveAttrs),i.Model._internalSync(l?"patch":"update",this,u)))},i.Model.prototype._attrUnion=function(e){var t={},i=this;return Object.keys(i.attributes||{}).forEach(function(e){Object.prototype.hasOwnProperty.call(i.attributes,e)&&(t[e]=i.attributes[e])}),Object.keys(e||{}).forEach(function(i){Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}),t},i.Model.GetPropValue=function(e,t){return e?$.isFunction(e[t])?e[t]():e[t]:$.isFunction(t)?t():t},i.Model.IsComplexValue=function(e){return e&&Object.prototype.hasOwnProperty.call(e,"value")&&Object.prototype.hasOwnProperty.call(e,"comparator")},i.Model.prototype._hasAttrs=function(e){var t;for(t in e)if(Object.prototype.hasOwnProperty.call(e,t)){if(!Object.prototype.hasOwnProperty.call(this.attributes,t))return!1;for(var n=Array.isArray(e[t])?e[t]:[e[t]],o=0;o<n.length;o++)if(i.Model.IsComplexValue(n[o])){var s=n[o].comparator,r=n[o].value;if(i.StringUtils.isString(s))throw new Error("String comparator invalid for local where/findWhere");if(!s(this,t,r))return!1}else if(e[t]!==this.attributes[t])return!1}return!0},i.Model.prototype.matches=function(e){return function(t){for(var i in e)if(t.get(i)!==e[i])return!1;return!0}(this)},i.Model.prototype.Contains=function(e){var t,i=e.constructor===Array?e:[e];for(t=0;t<i.length;t++)if(this._hasAttrs(i[t]))return!0;return!1},i.Model._getSuccess=function(e){return null!=e&&e.success?e.success:null},i.Model.GetContext=function(e,t){return void 0!==e&&void 0!==e.context?e.context:t},i.Model.prototype.isNew=function(){return void 0===this.GetId()},i.Model.prototype._getIdAttr=function(){return this.idAttribute||"id"},i.Model.prototype.GetId=function(){return this.id},i.Model.prototype.changedAttributes=function(e){if(e){var t={},n=this;return Object.keys(e).forEach(function(o){Object.prototype.hasOwnProperty.call(e,o)&&(i.Object.__innerEquals(e[o],n.attributes[o])||(t[o]=e[o]))}),!i.Object.isEmpty(t)&&t}return!i.Object.isEmpty(this.changed)&&this.changed},i.Model.prototype.hasChanged=function(e){return void 0!==e?i.Model._hasProperties(this.changed)&&Object.prototype.hasOwnProperty.call(this.changed,e):i.Model._hasProperties(this.changed)},i.Model.prototype.destroy=function(e){var t,n,o,s=e||{},r=s.wait,a=s.error,l=this;o=i.Model._copyOptions(s),t=i.Model._getSuccess(o);var u=this.GetCollection();return o.success=function(e){if(o.xhr&&(s.xhr=o.xhr),u){var n=i.StringUtils.isString(e)&&!i.StringUtils.isEmpty(e)?JSON.parse(e):e;u._setPagingReturnValues(n,null,e,!0)}r&&l._fireDestroy(!1),i.Model._fireSyncEvent(l,e,o,!1),t&&t.call(i.Model.GetContext(o,l),l,e,s)},o.error=function(e){l.TriggerInternal(!1,i.Events.EventType.ERROR,l,e,s),a&&a.apply(l,arguments)},this.isNew()?(r||this._fireDestroy(!1),t&&t.call(i.Model.GetContext(o,l),l,null,s),!1):(n=i.Model._internalSync("delete",this,o),r||this._fireDestroy(!1),n)},i.Model.prototype._fireRequest=function(e,t,n,o){this.TriggerInternal(o,i.Events.EventType.REQUEST,e,t,n)},i.Model.prototype._fireDestroy=function(e){this.TriggerInternal(e,i.Events.EventType.DESTROY,this,this.collection,null)},i.Model._fireSyncEvent=function(e,t,n,o){e.TriggerInternal(o,i.Events.EventType.SYNC,e,t,n)},i.Model.prototype.toJSON=function(){var e={},t=this;return Object.keys(t.attributes||{}).forEach(function(i){Object.prototype.hasOwnProperty.call(t.attributes,i)&&(Array.isArray(t.attributes[i])?e[i]=t.attributes[i].slice(0):e[i]=t.attributes[i])}),e},i.Model.prototype.previous=function(e){return this.previousAttrs[e]},i.Model.prototype.previousAttributes=function(){return this.previousAttrs},i.Model.prototype.sync=function(e,t,n){return i.sync(e,t,n)},i.Model._internalSync=function(e,t,n){var o=n||{};t.oauth&&(o.oauthHeader=t.oauth.getHeader()),!o.dataType&&t.dataType&&(o.dataType=t.dataType),!o.jsonpCallback&&t.jsonpCallback&&(o.jsonpCallback=t.jsonpCallback),"create"!==e&&"patch"!==e&&"update"!==e||(o.parsedData=t.parseSave.call(t,"patch"===e?o.attrs:o.saveAttrs));var s=null;t instanceof i.Model&&(s=t.GetId());var r={};Object.keys(o||{}).forEach(function(e){r[e]=o[e]});var a=i.Model.SetCustomURLOptions(s,t,o);return Object.keys(a||{}).forEach(function(e){r[e]=a[e]}),o.xhr=t.sync(e,t,r),r.xhr&&(o.xhr=r.xhr),o.xhr},i.Model.SetCustomURLOptions=function(e,t,n){var o=t instanceof i.Collection?t.ModifyOptionsForCustomURL(n):{};return e&&(o.recordID=e),o},i.sync=function(e,t,n){var o,s=n||{};function r(e){return t._fireRequest(t,e,s,s.silent),e}var a,l=s.success,u=s.error;if("create"===e.valueOf())return a=(a=t._saveUrl())||i.Model.GetPropValue(t,"url"),r((o=new i.RestImpl(a,t)).addRecord(s.parsedData,u,s,t));if("read"===e.valueOf())return t instanceof i.Model?(a=s.url?s.url:i.Model.GetPropValue(t,"url"),r((o=new i.RestImpl(a,t)).getRecord(l,u,t.GetId(),s,i.Model.GetContext(s,t)))):(a=t.GetCollectionFetchUrl(s),r((o=new i.RestImpl(a,t)).getRecords(l,u,s,t)));o=new i.RestImpl(i.Model.GetPropValue(t,"url"),t);var h=null;return t instanceof i.Model&&(h=t.GetId()),"update"===e.valueOf()?r(o.updateRecord(l,h,s.parsedData,u,s,t,!1)):"patch"===e.valueOf()?r(o.updateRecord(l,h,s.parsedData,u,s,t,!0)):"delete"===e.valueOf()?r(o.deleteRecord(h,u,s,t)):null},i.Model._urlError=function(e){if(!e.url)throw new Error("The url property or function must be specified")},i.ajax=function(e){return arguments&&arguments.length>0&&i.Model._urlError(arguments[0]),$.ajax.apply(i,arguments)},i.OAuth=function(e,t){i.OAuth._init(this,t||{},e||"Authorization")},i.Object.createSubclass(i.OAuth,i.Object,"oj.OAuth"),i.OAuth.prototype.Init=function(){i.OAuth.superclass.Init.call(this)},i.OAuth.prototype.getHeader=function(){var e={};return this.accessTokenResponse.access_token||this.clientCredentialGrant(),e[this.accessTokenRequest.auth_header]="Bearer "+this.accessTokenResponse.access_token,e},i.OAuth.prototype.isInitialized=function(){return!(!this.accessTokenResponse||!this.accessTokenResponse.access_token)},i.OAuth.prototype.clientCredentialGrant=function(){var e={},t=this;e[t.accessTokenRequest.auth_header]="Basic "+i.OAuth._base64_encode(t.accessTokenRequest.client_id+":"+t.accessTokenRequest.client_secret),$.ajax({type:"POST",async:!1,url:this.accessTokenRequest.bearer_url,data:"grant_type=client_credentials",headers:e,success:function(e){t.accessTokenResponse=i.OAuth._initAccessToken(t.accessTokenResponse,e)},error:function(e){throw new Error(e.responseText)}})},i.OAuth.prototype.setAccessTokenResponse=function(e){this.accessTokenResopnse=i.OAuth._initAccessToken(this.accessTokenResponse,e)},i.OAuth.prototype.getAccessTokenResponse=function(){return this.accessTokenResponse},i.OAuth.prototype.cleanAccessTokenResponse=function(){i.OAuth._cleanAccessToken(this.accessTokenResponse)},i.OAuth.prototype.setAccessTokenRequest=function(e){this.accessTokenRequest=i.OAuth._initAccessToken(this.accessTokenRequest,e)},i.OAuth.prototype.getAccessTokenRequest=function(){return this.accessTokenRequest},i.OAuth.prototype.cleanAccessTokenRequest=function(){i.OAuth._cleanAccessToken(this.accessTokenRequest)},i.OAuth._init=function(e,t,n){var o=e;o.Init(),o.accessTokenRequest={},o.accessTokenResponse={},t.access_token?o.accessTokenResponse=i.OAuth._initAccessToken(o.accessTokenResponse,t):t.client_id&&t.client_secret&&t.bearer_url&&(o.accessTokenResponse=i.OAuth._initAccessToken(o.accessTokenRequest,t)),o.accessTokenRequest.auth_header=n},i.OAuth._initAccessToken=function(e,t){var i=t||{},n=e||{};return Object.keys(i).forEach(function(e){Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}),n},i.OAuth._cleanAccessToken=function(e){var t=e||{};Object.keys(t).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&"auth_header"!==e&&(t[e]=null,delete t[e])})},i.OAuth._base64_encode=function(e){var t,i,n,o,s=0,r=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=[];do{t=e.charCodeAt(s),s+=1,i=e.charCodeAt(s),s+=1,n=e.charCodeAt(s),s+=1,t=(o=t<<16|i<<8|n)>>18&63,i=o>>12&63,n=o>>6&63,o&=63,l[r]=a.charAt(t)+a.charAt(i)+a.charAt(n)+a.charAt(o),r+=1}while(s<e.length);return l=l.join(""),((t=e.length%3)?l.slice(0,t-3):l)+"===".slice(t||3)},i.RestImpl=function(e,t){this.rootURL=e,this.model=t,this.customURL=t.customURL,$.support.cors=!0},i.RestImpl._HEADER_PROP="headers",i.RestImpl.addOptions=function(e,t,n){var o=$.extend(!0,e,n);return t&&Object.keys(t||{}).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&"oauthHeader"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||(o[e]=t[e]),e===i.RestImpl._HEADER_PROP&&(o[e]=$.extend(!0,o[e],t[e])))}),t.oauthHeader&&(o[i.RestImpl._HEADER_PROP]||(o[i.RestImpl._HEADER_PROP]={}),Object.keys(t.oauthHeader||{}).forEach(function(e){Object.prototype.hasOwnProperty.call(t.oauthHeader,e)&&(Object.prototype.hasOwnProperty.call(o[i.RestImpl._HEADER_PROP],e)||(o[i.RestImpl._HEADER_PROP][e]=t.oauthHeader[e]))})),o},i.RestImpl.prototype.getRecords=function(e,t,n,o){var s=n||{},r="jsonp"===s.dataType,a=this._getURL("read",this.rootURL,this.customURL,null,o,s),l={crossDomain:s.crossDomain||!r,dataType:this._getDataType(s),jsonpCallback:s.jsonpCallback,context:null!==o?o:this,success:e,error:t};return l=this._addHeaderProp(l),l=i.RestImpl.addOptions(l,s,a),s.xhr=this.ajax(l,o),s.xhr},i.RestImpl.prototype._addHeaderProp=function(e){var t=e||{};return this.model&&this.model.omitLanguageHeader||(t[i.RestImpl._HEADER_PROP]={"Accept-Language":this.getLocale()}),t},i.RestImpl.prototype.getRecord=function(e,t,n,o,s){var r=o||{},a="jsonp"===r.dataType,l=this._getURL("read",this.rootURL,this.customURL,n,s,r),u={crossDomain:r.crossDomain||!a,dataType:this._getDataType(r),jsonpCallback:r.jsonpCallback,context:null!==s?s:this,success:e,error:t};return u=this._addHeaderProp(u),u=i.RestImpl.addOptions(u,r,l),r.xhr=this.ajax(u,s),r.xhr},i.RestImpl.prototype.updateRecord=function(e,t,n,o,s,r,a){var l=s||{},u="jsonp"===l.dataType,h=this._getURL(a?"patch":"update",this.rootURL,this.customURL,t,r,l),d=i.RestImpl._emulateHTTP(l),c={crossDomain:l.crossDomain||!u,contentType:this._getContentType(l),dataType:this._getDataType(l),jsonpCallback:l.jsonpCallback,data:this._getData(JSON.stringify(n),l,h),emulateHTTP:d,emulateJSON:i.RestImpl._emulateJSON(l),success:e,error:o,context:null!==r?r:this};return c=this._addHeaderProp(c),c=i.RestImpl.addOptions(c,l,h),c=i.RestImpl._beforeSendMod(d,c),l.xhr=this.ajax(c,r),l.xhr},i.RestImpl._beforeSendMod=function(e,t){var i=t||{};if(e){var n=i.beforeSend;i.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",i._method),n?n.apply(this,arguments):null}}return i},i.RestImpl.prototype._getData=function(e,t,n){if(i.RestImpl._emulateJSON(t)){var o={_method:n._method?n._method:n.type};return e&&(o.model=e),o}return e},i.RestImpl.prototype._getHTTPMethod=function(e,t){if(t.type)return{method:t.type};var n=null;if("create"===e&&(n="POST"),"delete"===e&&(n="DELETE"),"patch"===e&&(n="PATCH"),"update"===e&&(n="PUT"),i.RestImpl._emulateHTTP(t)){var o={method:"POST"};return o._method=n,o}return null===n&&(n="GET"),{method:n}},i.RestImpl._emulateHTTP=function(e){return e.emulateHTTP||i.emulateHTTP},i.RestImpl._emulateJSON=function(e){return e.emulateJSON||i.emulateJSON},i.RestImpl.prototype._getURL=function(e,t,n,o,s,r){var a=this._getHTTPMethod(e,r);if($.isFunction(n)){var l=n.call(this,e,s,i.Model.SetCustomURLOptions(o,s,r));if(i.StringUtils.isString(l)){var u={url:l,type:a.method};return a._method&&(u._method=a._method),u}if(l)return l.url=Object.prototype.hasOwnProperty.call(l,"url")?l.url:t,Object.prototype.hasOwnProperty.call(l,"type")||(l.type=a.method),Object.prototype.hasOwnProperty.call(l,"data")||a._method&&(l._method=a._method),l}var h={url:i.Model.GetPropValue(null,t),type:a.method};return a._method&&(h._method=a._method),h},i.RestImpl.prototype.deleteRecord=function(e,t,n,o){var s=n||{},r="jsonp"===s.dataType,a=this._getURL("delete",this.rootURL,this.customURL,e,o,s),l=i.RestImpl._emulateHTTP(s),u=i.RestImpl._emulateJSON(s),h={crossDomain:s.crossDomain||!r,success:s.success,error:t,context:null!==o?o:this,emulateHTTP:l,emulateJSON:u},d=this._getData(null,s,a);return d&&(h.data=d),h=i.RestImpl.addOptions(h,s,a),h=i.RestImpl._beforeSendMod(l,h),s.xhr=this.ajax(h,o),s.xhr},i.RestImpl.prototype.addRecord=function(e,t,n,o){var s=n||{},r=JSON.stringify(e),a="jsonp"===s.dataType,l=this._getURL("create",this.rootURL,this.customURL,null,o,s),u=i.RestImpl._emulateHTTP(s),h={crossDomain:s.crossDomain||!a,contentType:s.contentType||"application/json",dataType:this._getDataType(s),jsonpCallback:s.jsonpCallback,data:this._getData(r,s,l),success:s.success,error:t,emulateHTTP:u,emulateJSON:i.RestImpl._emulateJSON(s),context:null!==o?o:this};return h=this._addHeaderProp(h),h=i.RestImpl.addOptions(h,s,l),s.xhr=this.ajax(h,o),s.xhr},i.RestImpl.prototype._getDataType=function(e){return i.RestImpl._emulateJSON(e)&&!i.RestImpl._emulateHTTP(e)?"application/x-www-form-urlencoded":e.dataType||"json"},i.RestImpl.prototype._getContentType=function(e){return i.RestImpl._emulateJSON(e)&&!i.RestImpl._emulateHTTP(e)?"application/x-www-form-urlencoded":e.contentType||"application/json"},i.RestImpl.prototype.getLocale=function(){return i.Config.getLocale()},i.RestImpl.prototype.ajax=function(e,t){if(null===e.url||void 0===e.url)throw new i.URLError;var n=i.ajax(e);return t._addxhr&&t._addxhr(n),n},i.URLError=function(){this.name="URLError",this.message="No URL defined"},i.URLError.prototype=new Error,i.URLError.constructor=i.URLError,i.Message=function(e,t,i){this.Init(e,t,i)},i.Message.SEVERITY_TYPE={CONFIRMATION:"confirmation",INFO:"info",WARNING:"warning",ERROR:"error",FATAL:"fatal"},i.Message.SEVERITY_LEVEL={FATAL:5,ERROR:4,WARNING:3,INFO:2,CONFIRMATION:1},i.Object.createSubclass(i.Message,i.Object,"oj.Message"),i.Message.prototype.Init=function(e,t,n){i.Message.superclass.Init.call(this),this.summary=e,this.detail=t,this.severity=n||i.Message.SEVERITY_TYPE.ERROR},i.Message.prototype.canDisplay=function(){return!0},i.Message.prototype.equals=function(e){return!(!e||i.Message.getSeverityLevel(this.severity)!==i.Message.getSeverityLevel(e.severity)||this.summary!==e.summary||this.detail!==e.detail)},i.Message.prototype.clone=function(){return new i.Message(this.summary,this.detail,this.severity)},i.Message.getSeverityLevel=function(e){var t;return e&&("string"==typeof e?e=-1===(t=i.Message._LEVEL_TO_TYPE.indexOf(e,1))?i.Message.SEVERITY_LEVEL.ERROR:t:"number"==typeof e&&(e<i.Message.SEVERITY_LEVEL.CONFIRMATION||e>i.Message.SEVERITY_LEVEL.FATAL)&&(e=i.Message.SEVERITY_LEVEL.ERROR)),e||i.Message.SEVERITY_LEVEL.ERROR},i.Message.getSeverityType=function(e){return e&&("string"==typeof e?-1===i.Message._LEVEL_TO_TYPE.indexOf(e,1)&&(e=i.Message.SEVERITY_TYPE.ERROR):"number"==typeof e&&(e=e<i.Message.SEVERITY_LEVEL.CONFIRMATION||e>i.Message.SEVERITY_LEVEL.FATAL?i.Message.SEVERITY_TYPE.ERROR:i.Message._LEVEL_TO_TYPE[e])),e||i.Message.SEVERITY_TYPE.ERROR},i.Message.getMaxSeverity=function(e){var t,n=-1;return e&&e.length>0&&$.each(e,function(e,o){o&&(t=i.Message.getSeverityLevel(o.severity)),n=n<t?t:n}),n},i.Message.isValid=function(e){return!(i.Message.getMaxSeverity(e)>=i.Message.SEVERITY_LEVEL.ERROR)},i.Message._LEVEL_TO_TYPE=["none",i.Message.SEVERITY_TYPE.CONFIRMATION,i.Message.SEVERITY_TYPE.INFO,i.Message.SEVERITY_TYPE.WARNING,i.Message.SEVERITY_TYPE.ERROR,i.Message.SEVERITY_TYPE.FATAL],i.ComponentMessage=function(e,t,i,n){this.Init(e,t,i,n)},i.Object.createSubclass(i.ComponentMessage,i.Message,"oj.ComponentMessage"),i.ComponentMessage.DISPLAY={SHOWN:"shown",HIDDEN:"hidden"},i.ComponentMessage._DEFAULT_OPTIONS={display:i.ComponentMessage.DISPLAY.SHOWN,context:""},i.ComponentMessage.prototype.Init=function(e,t,n,o){i.ComponentMessage.superclass.Init.call(this,e,t,n),this._options=$.extend({},i.ComponentMessage._DEFAULT_OPTIONS,o)},i.ComponentMessage.prototype.equals=function(e){return i.ComponentMessage.superclass.equals.call(this,e)&&this._options.display===e._options.display},i.ComponentMessage.prototype.clone=function(){return new i.ComponentMessage(this.summary,this.detail,this.severity,this._options)},i.ComponentMessage.prototype.canDisplay=function(){return!(this._options&&this._options.display&&this._options.display===i.ComponentMessage.DISPLAY.HIDDEN)},i.ComponentMessage.prototype._forceDisplayToShown=function(){return!(!this._options||i.ComponentMessage.DISPLAY.HIDDEN!==this._options.display)&&(this._options.display=i.ComponentMessage.DISPLAY.SHOWN,!0)},i.ComponentMessage.prototype._isMessageAddedByComponent=function(){return!(!this._options||!this._options.context)},i.BaseCustomElementBridge={},i.BaseCustomElementBridge.proto={getClass:function(e){var t=Object.create(HTMLElement.prototype);this.InitializePrototype(t);var n=this.GetMetadata(e);i.BaseCustomElementBridge._enumerateMetadataForKey(t,n,"properties",this.DefinePropertyCallback.bind(this)),i.BaseCustomElementBridge._enumerateMetadataForKey(t,n,"methods",this.DefineMethodCallback.bind(this)),this.AddComponentMethods(t),t.setProperties=function(e){i.BaseCustomElementBridge.getInstance(this)._setProperties(this,e)},Object.defineProperty(t,"set",{value:function(e,t){this.setProperty(e,t)}}),Object.defineProperty(t,"unset",{value:function(e){this.setProperty(e,void 0)}}),t.attributeChangedCallback=this._attributeChangedCallback,t.connectedCallback=this._connectedCallback,t.disconnectedCallback=this._detachedCallback,Object.defineProperty(t,"resolveBP",{value:function(e){i.BaseCustomElementBridge.getInstance(this)._resolveBindingProvider(e)}});var o=function(){var e=window.Reflect;return void 0!==e?e.construct(HTMLElement,[],this.constructor):HTMLElement.call(this)},s=this;return Object.defineProperty(o,"observedAttributes",{get:function(){return s.GetAttributes(n)}}),Object.defineProperty(t,"constructor",{value:o,writable:!0,configurable:!0}),o.prototype=t,Object.setPrototypeOf(o,HTMLElement),o},resolveDelayedReadyPromise:function(e){this.GetDelayedReadyPromise().resolvePromise()},AddComponentMethods:function(e){},CreateComponent:function(e){},DefineMethodCallback:function(e,t,i){},DefinePropertyCallback:function(e,t,i){},GetDelayedReadyPromise:function(){return this._delayedReady||(this._delayedReady=new i.BaseCustomElementBridge.__DelayedPromise),this._delayedReady},GetAttributes:function(e){return i.BaseCustomElementBridge.getAttributes(e.properties)},GetMetadata:function(e){return e[i.BaseCustomElementBridge.DESC_KEY_META]},GetAliasForProperty:function(e){return e},HandleAttributeChanged:function(e,t,i,n){},HandleBindingsApplied:function(e,t){},HandleDetached:function(e){this._bConnected=!1,this._complete||this._resolveBusyState(e)},HandleReattached:function(e){},InitializeElement:function(e){},InitializePrototype:function(e){},BatchedPropertySet:function(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++){var o=i[n];e.setProperty(o,t[o])}},CanSkipTypeCheck:function(e){return!1},GetProperty:function(e,t,n){var o=i.__AttributeUtils.eventListenerPropertyToEventType(t),s=i.BaseCustomElementBridge.__GetPropertyMetadata(t,i.BaseCustomElementBridge.getProperties(this,e));return o||!s||-1===t.indexOf(".")?n[t]:i.BaseCustomElementBridge.__GetProperty(n,t)},InitializeBridge:function(e){var t=i.BaseCustomElementBridge.__GetDescriptor(e.tagName);this.METADATA=this.GetMetadata(t),this._eventListeners={}},PlaybackEarlyPropertySets:function(e){if(this._bCanSetProperty=!0,this._earlySets)for(;this._earlySets.length;){var t=this._earlySets.shift();e.setProperty(t.property,t.value)}},SaveEarlyPropertySet:function(e,t){return!this.__INITIALIZING_PROPS&&!this._bCanSetProperty&&(this._earlySets||(this._earlySets=[]),this._earlySets.push({property:e,value:t}),!0)},SetEventListenerProperty:function(e,t,n){var o=i.__AttributeUtils.eventListenerPropertyToEventType(t),s=this._eventListeners[o];s||(s=this._createEventListenerWrapper(),this._eventListeners[o]=s,e.addEventListener(o,s)),null==n||n instanceof Function?s.setListener(n):i.BaseCustomElementBridge.__ThrowTypeError(e,t,n,"function")},SetProperty:function(e,t,n,o,s){var r=i.__AttributeUtils.eventListenerPropertyToEventType(t),a=i.BaseCustomElementBridge.__GetPropertyMetadata(t,i.BaseCustomElementBridge.getProperties(this,e));if(r||!a)e[t]=n;else{var l=e.getProperty(t),u=t.split(".")[0],h=o[u];if(i.CollectionUtils.isPlainObject(h)&&(h=i.CollectionUtils.copyInto({},h,void 0,!0)),!i.BaseCustomElementBridge.__CompareOptionValues(t,a,n,l)){s?this.ValidateAndSetProperty(this.GetAliasForProperty.bind(this),o,t,n,e):i.BaseCustomElementBridge.__SetProperty(this.GetAliasForProperty.bind(this),o,t,n);var d=-1!==t.indexOf(".");if(d){var c={};c.path=t,c.value=n,c.previousValue=l;var p=s?"external":"internal";i.BaseCustomElementBridge.__FirePropertyChangeEvent(e,u,o[u],h,p,c)}return{property:u,propertySet:!0,isSubproperty:d}}}return{property:null,propertySet:!1,isSubproperty:!1}},ValidateAndSetProperty:function(e,t,n,o,s){o=this.ValidatePropertySet(s,n,o),i.BaseCustomElementBridge.__SetProperty(e,t,n,o)},ValidatePropertySet:function(e,t,n){var o=i.BaseCustomElementBridge.getProperties(this,e),s=i.BaseCustomElementBridge.__GetPropertyMetadata(t,o),r=t.split("."),a=this.CanSkipTypeCheck(r);if(s||a)return o[r[0]].readOnly&&this._throwError(e,"Read-only property '"+t+"' cannot be set."),i.BaseCustomElementBridge.__CheckEnumValues(e,t,n,s),a||null==n?n:i.BaseCustomElementBridge.__CheckType(e,t,n,s);i.Logger.warn(i.BaseCustomElementBridge.getElementInfo(e)+": Ignoring property set for undefined property '"+t+"'.")},_attributeChangedCallback:function(e,t,n){var o=i.BaseCustomElementBridge.getInstance(this);if(o._bCreateCalled&&this.setProperty){var s=i.__AttributeUtils.attributeToPropertyName(e),r=i.BaseCustomElementBridge.__GetPropertyMetadata(s,i.BaseCustomElementBridge.getProperties(o,this));i.BaseCustomElementBridge.__CheckOverlappingAttribute(this,e),null===n&&(n=void 0);var a={detail:{attribute:e,value:n,previousValue:t}};this.dispatchEvent(new CustomEvent("attribute-changed",a)),i.__AttributeUtils.getExpressionInfo(n).expr||(r&&this.setProperty(s,i.BaseCustomElementBridge.__ParseAttrValue(this,e,s,n,r)),o.HandleAttributeChanged(this,e,t,n))}},_connected:function(e){if(this._bConnected=!0,this._bCreateCalled)this._complete||this._registerBusyState(e),this.HandleReattached(e);else{this._bCreateCalled=!0,this._registerBusyState(e),this._monitorReadyPromise(e),this.InitializeElement(e);var t=this;this._getBindingProvider(e).then(function(){t.CreateComponent(e)})}},_connectedCallback:function(){i.BaseCustomElementBridge.getInstance(this)._connected(this)},_detachedCallback:function(){i.BaseCustomElementBridge.getInstance(this).HandleDetached(this)},_createEventListenerWrapper:function(){var e,t=function(t){e&&e(t)};return t.setListener=function(t){e=t},t},_monitorReadyPromise:function(e){var t=this,i=function(){t._bConnected&&t._resolveBusyState(e),t._complete=!0};this.GetDelayedReadyPromise().getPromise().then(function(){e.classList.add("oj-complete"),i()},function(){e.classList.add("oj-incomplete"),i()})},_registerBusyState:function(e){var t=i.Context.getContext(e).getBusyContext();this._initCompleteCallback=t.addBusyState({description:i.BaseCustomElementBridge.getElementInfo(e)+" is being upgraded."})},_resolveBusyState:function(e){var t=this._initCompleteCallback;t||this._throwError(e,"Unexpected call to _resolveBusyState()."),this._initCompleteCallback=null,t()},_setProperties:function(e,t){for(var i=[],n={},o=!1,s=Object.keys(t),r=0;r<s.length;r++){var a=s[r];a.indexOf(".")>=0?i.push(a):(n[a]=t[a],o=!0)}o&&this.BatchedPropertySet(e,n);for(var l=0;l<i.length;l++){var u=i[l];e.setProperty(u,t[u])}},_throwError:function(e,t){throw this.GetDelayedReadyPromise().rejectPromise(),new Error(i.BaseCustomElementBridge.getElementInfo(e)+": "+t)},_resolveBindingProvider:function(e){this._bpResolve?this._bpResolve(e):this._bpInst=e},_setBpResolver:function(e){this._bpResolve=e},_getBindingProvider:function(e){var t=this._getBindingProviderName(e);return t===i.BaseCustomElementBridge._NO_BINDING_PROVIDER?(this.PlaybackEarlyPropertySets(e),Promise.resolve(null)):"knockout"==t?this._bpInst?Promise.resolve(this._bpInst):new Promise(this._setBpResolver.bind(this)):void this._throwError(e,"Unknown binding provider '"+t+"'.")},_getBindingProviderName:function(e){var t=e._ojBndgPrv;if(t)return t;if(!(t=e.getAttribute("data-oj-binding-provider")||i.BaseCustomElementBridge._getCompositeBindingProviderName(e))){var n=e.parentElement;null==n?e===document.documentElement?t="knockout":this._throwError(e,"Cannot determine binding provider for a disconnected subtree."):t=this._getBindingProviderName(n)}return Object.defineProperty(e,"_ojBndgPrv",{value:t}),t}},i.BaseCustomElementBridge.getAttributes=function(e){var t=[];return i.BaseCustomElementBridge._getAttributesFromProperties("",e,t),t},i.BaseCustomElementBridge._getAttributesFromProperties=function(e,t,n){if(t)for(var o in t){var s=t[o];if(!s.readOnly){var r=e+o;n.push(i.__AttributeUtils.propertyNameToAttribute(r)),s.properties&&i.BaseCustomElementBridge._getAttributesFromProperties(r+".",s.properties,n)}}},i.BaseCustomElementBridge.getElementInfo=function(e){return e?e.tagName.toLowerCase()+" with id '"+e.id+"'":""},i.BaseCustomElementBridge.getInstance=function(e){var t=e[i.BaseCustomElementBridge._INSTANCE_KEY];if(!t){var n=i.BaseCustomElementBridge._registry[e.tagName.toLowerCase()];if(!n)throw new Error(i.BaseCustomElementBridge.getElementInfo(e)+" Attempt to interact with the custom element before it has been registered.");(t=Object.create(n.bridgeProto)).InitializeBridge(e),Object.defineProperty(e,i.BaseCustomElementBridge._INSTANCE_KEY,{value:t})}return t},i.BaseCustomElementBridge.getProperties=function(e,t){return e.METADATA.properties},i.BaseCustomElementBridge.getRegistered=function(e){if(e){var t=i.BaseCustomElementBridge._registry[e.toLowerCase()];if(t)return{composite:t.composite}}return null},i.BaseCustomElementBridge.getSlotMap=function(e,t){for(var n={},o=e.childNodes,s=0;s<o.length;s++){var r=o[s];if(i.BaseCustomElementBridge.isSlotAssignable(r)&&(3!==r.nodeType||r.nodeValue.trim())){var a=t?r.__oj_slots:null,l=null!=a?a:r.getAttribute&&r.getAttribute("slot");l||(l=""),n[l]||(n[l]=[]),n[l].push(r)}}return n},i.BaseCustomElementBridge.isSlotAssignable=function(e){return 1===e.nodeType||3===e.nodeType},i.BaseCustomElementBridge._NO_BINDING_PROVIDER="none",i.BaseCustomElementBridge._enumerateMetadataForKey=function(e,t,i,n){if(t&&t[i]){var o=t[i];Object.keys(o).forEach(function(t){n(e,t,o[t])})}},i.BaseCustomElementBridge._getCompositeBindingProviderName=function(e){return i.Composite?i.Composite.getBindingProviderName(e.parentElement):null},i.BaseCustomElementBridge._verifyMetadata=function(e,t){if(t){var n=t.properties;if(n)for(var o=i.BaseCustomElementBridge._GLOBAL_PROPERTIES,s=0;s<o.length;s++)n[o[s]]&&i.Logger.error("Error registering composite %s. Redefined global HTML element attribute '%s' in metadata.",e,o[s])}},i.BaseCustomElementBridge.__CheckEnumValues=function(e,t,n,o){if("string"==typeof n&&o){var s=o.enumValues;if(s&&-1===s.indexOf(n))i.BaseCustomElementBridge.getInstance(e)._throwError(e,"Invalid value '"+n+"' found for property '"+t+"'. Expected one of the following '"+s.toString()+"'.")}},i.BaseCustomElementBridge.__CheckType=function(e,t,n,o){var s=o.type;if(s){var r=(s=s.toLowerCase()).split("|"),a=typeof n;if(1===r.length)("array"===s.substring(0,5)&&!Array.isArray(n)||"object"===s.substring(0,6)&&"object"!==a||"number"===s&&("number"!=typeof n||!isFinite(n))||"string"===s&&"string"!==a)&&i.BaseCustomElementBridge.__ThrowTypeError(e,t,n,s),"boolean"===s&&(n=!!n);else if(2===r.length){var l=r.indexOf("string"),u=r.indexOf("promise");if(-1!==l&&"string"!==a)("function"===(h=0===l?r[1]:r[0])&&"function"!==a||"array"===h.substring(0,5)&&!Array.isArray(n)||"object"===h.substring(0,6)&&"object"!==a)&&i.BaseCustomElementBridge.__ThrowTypeError(e,t,n,s);else if(-1!==u&&!(n instanceof Promise)){var h;"array"!==(h=0===u?r[1]:r[0]).substring(0,5)||Array.isArray(n)||i.BaseCustomElementBridge.__ThrowTypeError(e,t,n,s)}}}return n},i.BaseCustomElementBridge.__CompareOptionValues=function(e,t,n,o){return t.writeback?i.Object.compareValues(n,o):n===o},i.BaseCustomElementBridge.__ThrowTypeError=function(e,t,n,o){i.BaseCustomElementBridge.getInstance(e)._throwError(e,"Invalid type '"+typeof n+"' found for property '"+t+"'. Expected value of type '"+o+"'.")},i.BaseCustomElementBridge.__GetDescriptor=function(e){return i.BaseCustomElementBridge._registry[e.toLowerCase()].descriptor},i.BaseCustomElementBridge.__GetCache=function(e){return e?i.BaseCustomElementBridge._registry[e.toLowerCase()].cache:null},i.BaseCustomElementBridge.__CheckOverlappingAttribute=function(e,t){var n=t.split(".");if(n.length>1)for(n.pop();n.length;){var o=n.join(".");if(e.hasAttribute(o))i.BaseCustomElementBridge.getInstance(e)._throwError(e,"Cannot set overlapping attributes '"+t+"' and '"+o+"'.");n.pop()}},i.BaseCustomElementBridge.__GetPropertyMetadata=function(e,t){for(var i=t,n=e.split("."),o=0;o<n.length&&(i=i[n[o]])&&(!(n.length>1&&o<n.length-1)||(i=i.properties));o++);return i},i.BaseCustomElementBridge.__InitProperties=function(e,t){var n=i.BaseCustomElementBridge.getInstance(e);n.__INITIALIZING_PROPS=!0;var o=i.BaseCustomElementBridge.getProperties(n,e);if(o)for(var s=e.attributes,r=0;r<s.length;r++){var a=s[r],l=i.__AttributeUtils.attributeToPropertyName(a.nodeName),u=i.BaseCustomElementBridge.__GetPropertyMetadata(l,o);if(u&&!u.readOnly)if(i.BaseCustomElementBridge.__CheckOverlappingAttribute(e,a.nodeName),!i.__AttributeUtils.getExpressionInfo(a.value).expr){var h=i.BaseCustomElementBridge.__ParseAttrValue(e,a.nodeName,l,a.value,u);n.ValidateAndSetProperty(n.GetAliasForProperty.bind(n),t,l,h,e)}}n.__INITIALIZING_PROPS=!1},i.BaseCustomElementBridge.__SetProperty=function(e,t,i,n){var o,s=t,r=i.split("."),a=e(r[0]);r.length>1&&!t[a]&&(s=o={});for(var l=0;l<r.length;l++){var u=e(r[l]);l===r.length-1?s[u]=n:s[u]||(s[u]={}),s=s[u]}o&&(t[a]=o[a])},i.BaseCustomElementBridge.__GetProperty=function(e,t){for(var i=e,n=t.split("."),o=0;o<n.length;o++){var s=n[o];if(o===n.length-1)return i[s];if(!i[s])return;i=i[s]}},i.BaseCustomElementBridge.__ParseAttrValue=function(e,t,n,o,s){if(null==o)return o;var r=s.type,a=i.BaseCustomElementBridge.getInstance(e);function l(n){var o;try{o=i.__AttributeUtils.coerceValue(e,t,n,r)}catch(t){a._throwError(e,t)}return o}var u=i.BaseCustomElementBridge.__GetDescriptor(e.tagName).parseFunction;return u?u(o,n,s,function(e){return l(e)}):l(o)},i.BaseCustomElementBridge.__ProcessEventListeners=function(e,t){return(e=i.CollectionUtils.copyInto({},e,void 0,!0,1)).properties=e.properties||{},i.BaseCustomElementBridge._enumerateMetadataForKey(null,e,"properties",function(t,n,o){var s=i.__AttributeUtils.propertyNameToChangeEventType(n),r=i.__AttributeUtils.eventTypeToEventListenerProperty(s);e.properties[r]={_derived:!0,_eventListener:!0}}),i.BaseCustomElementBridge._enumerateMetadataForKey(null,e,"events",function(n,o,s){var r=t?i.__AttributeUtils.eventTriggerToEventType(o):o,a=i.__AttributeUtils.eventTypeToEventListenerProperty(r);e.properties[a]={_derived:!0,_eventListener:!0}}),e},i.BaseCustomElementBridge.__Register=function(e,t,n,o){var s=e.toLowerCase();if(!i.BaseCustomElementBridge._registry[s]){if(!t)throw new Error("Cannot register "+e+". Missing a descriptor.");return i.BaseCustomElementBridge._verifyMetadata(e,t[i.BaseCustomElementBridge.DESC_KEY_META]),i.BaseCustomElementBridge._registry[s]={descriptor:t,bridgeProto:n,composite:o,cache:{}},!0}return!1},i.BaseCustomElementBridge.__FirePropertyChangeEvent=function(e,t,n,o,s,r){var a=i.BaseCustomElementBridge.getInstance(e);if("external"!==s||a.__READY_TO_FIRE){var l={};r&&(l.subproperty=r),l.value=n,l.previousValue=o,l.updatedFrom=s,a.beforePropertyChangedEvent&&a.beforePropertyChangedEvent(e,t,l),e.dispatchEvent(new CustomEvent(t+"Changed",{detail:l}))}},i.BaseCustomElementBridge.__DefineDynamicObjectProperty=function(e,t,i,n){Object.defineProperty(e,t,{enumerable:!0,get:i,set:n})},i.BaseCustomElementBridge.__GetUnique=function(){return l+a++};var a=0,l="_ojcustomelem";function u(e,t){var i=function(){var e=$(this),i=e.data(f);if(null!=i)for(var n=0;n<i.length;n++){var o=e.data("oj-"+i[n]);null!=o&&t(o)}},n=$(e);n.hasClass(v)&&i.call(e),n.find("."+v).each(i)}function h(e,t,i){function n(e){if(t&&e.classList.contains(v)){var n=$(e),o=n.data(f);if(null!=o)for(var s=0;s<o.length;s++){var r=n.data("oj-"+o[s]);null!=r&&t(r)}}i&&"oj-defer"===e.tagName.toLowerCase()&&e._activate()}if(!function(e){for(;e;){if(e.nodeType===Node.DOCUMENT_NODE)return!1;if(e.classList.contains(C))return!0;e=e.parentNode}return!0}(e)){n(e);var o=["."+v];i&&o.push("oj-defer");var s=[];o.forEach(function(e){s.push("."+C+" "+e),s.push("."+y+" "+e)});for(var r=o.join(","),a=s.join(","),l=function(e,t){var i,n=[],o=0;for(i=0;i<t.length;i++){for(var s=t[i];o<e.length&&e[o]!=s;)n.push(e[o++]);o++}for(;o<e.length;)n.push(e[o++]);return n}(e.querySelectorAll(r),e.querySelectorAll(a)),u=0;u<l.length;u++)n(l[u])}}function d(e){this.getCallback=function(){return e}}function c(e,t,i){return Object.keys(t).forEach(function(n){var o=e[n]||[],s=t[n];i?o=o.concat(s):o.push(s),e[n]=o}),e}function p(e){return i.BaseCustomElementBridge.getRegistered(e.tagName)}function _(e){return!!i.Components.__GetWidgetConstructor(e)}function m(e){return p(e)||_(e)}i.BaseCustomElementBridge._registry={},i.BaseCustomElementBridge.DESC_KEY_CSS="css",i.BaseCustomElementBridge.DESC_KEY_META="metadata",i.BaseCustomElementBridge.DESC_KEY_PARSE_FUN="parseFunction",i.BaseCustomElementBridge.DESC_KEY_VIEW="view",i.BaseCustomElementBridge.DESC_KEY_VIEW_MODEL="viewModel",i.BaseCustomElementBridge._GLOBAL_PROPERTIES=["accesskey","class","contenteditable","contextmenu","dir","draggable","hidden","id","is","lang","style","tabindex","title"],i.BaseCustomElementBridge._INSTANCE_KEY="_ojBridge",i.BaseCustomElementBridge.__DelayedPromise=function(){var e,t,i;this.getPromise=function(){return e||(e=new Promise(function(e,n){t=e,i=n})),e},this.rejectPromise=function(e){i&&i(e)},this.resolvePromise=function(e){t&&t(e)}},i.Components={},i.Components.setDefaultOptions=function(e){var t=i.Components._defaultProperties||{};Object.keys(e).forEach(function(n){var o=e[n];if(!i.CollectionUtils.isPlainObject(o))throw"Invalid default options";t[n]=c(t[n]||{},o,!1)}),i.Components._defaultProperties=t},i.Components.getDefaultOptions=function(){return i.Components._defaultProperties||{}},i.Components.createDynamicPropertyGetter=function(e){return new d(e)},i.Components.getWidgetConstructor=function(e,t){return e&&!i.BaseCustomElementBridge.getRegistered(e.tagName)?i.Components.__GetWidgetConstructor(e,t):null},i.Components.__GetWidgetConstructor=function(e,t){var i=$(e),n=i.data(f);if(n&&(null==t?t=n[0]:n.indexOf(t)<0&&(t=void 0),null!=t)){var o=i[t];if("function"==typeof o)return o.bind(i)}return null},i.Components.subtreeAttached=function(e){i.DomUtils.fixResizeListeners(e),u(e,function(e){e.__handleSubtreeAttached()})},i.Components.subtreeDetached=function(e){u(e,function(e){e.__handleSubtreeDetached()})},i.Components.subtreeShown=function(e,t){var n=(t=t||{}).initialRender;n||i.DomUtils.fixResizeListeners(e),e=$(e)[0],e.classList.remove(C),h(e,function(e){n?e._NotifyInitShown():e._NotifyShown()},!0)},i.Components.subtreeHidden=function(e){h(e=$(e)[0],function(e){e._NotifyHidden()},!1),e.classList.add(C)},i.Components.markPendingSubtreeHidden=function(e){e.classList.add(y)},i.Components.unmarkPendingSubtreeHidden=function(e){e.classList.remove(y)},i.Components.isComponentInitialized=function(e,t){var i=e.data(f);return!!($.isArray(i)&&i.indexOf(t)>-1&&e.is("."+v))},i.Components.__getDefaultOptions=function(e){for(var t={},n=i.Components.getDefaultOptions(),o=e.length-1;o>=0;o--){var s=n[e[o]];void 0!==s&&(t=c(t,s,!0))}return t},i.Components.getComponentElementByNode=function(e){return function e(t,n){if(null==t)return null;var o=1===t.nodeType;var s=i.Composite&&!n?i.Composite.getContainingComposite(t):null;if(s)return s;if(o&&t.hasAttribute("data-oj-internal"))return t.parentNode instanceof Element&&t.parentNode.hasAttribute("data-oj-surrogate-id")?(t=document.querySelector("[data-oj-popup-"+t.id+"-parent]"),e(t,n)):e(t.parentNode,n);if(m(t))return t;if(o&&t.classList.contains("oj-component")){if(_(t=t.querySelector(".oj-component-initnode:not([data-oj-internal])")||t))return t}else if(o&&t.hasAttribute("data-oj-containerid"))return t=document.getElementById(t.getAttribute("data-oj-containerid")),e(t,n);return e(t.parentNode,n)}(e,!!(arguments.length>1&&arguments[1]))},i.Components.getSubIdByNode=function(e,t){return i.Components.callComponentMethod(e,"getSubIdByNode",t)},i.Components.getNodeBySubId=function(e,t){return i.Components.callComponentMethod(e,"getNodeBySubId",t)},i.Components.getComponentOption=function(e,t){if(!m(e))throw new Error("node is not a component element");return p(e)?e.getProperty?e.getProperty.call(e,t):void 0:i.Components.__GetWidgetConstructor(e)("option",t)},i.Components.setComponentOption=function(e,t,n){if(!m(e))throw new Error("node is not a component element");p(e)?e.setProperty&&e.setProperty.call(e,t,n):i.Components.__GetWidgetConstructor(e)("option",t,n)},i.Components.callComponentMethod=function(e,t,n){if(!m(e))throw new Error("node is not a component element");return p(e)?e[t]?e[t].apply(e,[].slice.call(arguments,2)):void 0:i.Components.__GetWidgetConstructor(e).apply($(e),[].slice.call(arguments,1))},i.Components._OJ_CONTAINER_ATTR="data-oj-container";var g,f="oj-component-names",v="oj-component-initnode",C="oj-subtree-hidden",y="oj-pending-subtree-hidden";function b(e,t,i,n,o,s,r){var a=i,l=!1,u={};delete n[o],Object.defineProperty(n,o,{get:function(){if(l)return a;if(null!=e._settingNestedKey)return a;var i=s(r?r():o);return E([t,i,a],u)},set:function(t){a=t,null!=e._settingNestedKey?u[e._settingNestedKey]=!0:l=!0},enumerable:!0})}function S(e){if(1===e.length){var t=e[0];return t instanceof d?t.getCallback():null}for(var i=!1,n=0;n<e.length&&!i;n++){var o=e[n];null!=o&&o instanceof d&&(i=!0)}if(i){return function(t){var i=[];return e.forEach(function(e){null!=e&&e instanceof d?i.push(e.getCallback()(t)):i.push(e)}),E(i)}}return null}function E(e,t){for(var i=void 0,n=0;n<e.length;n++){var o=e[n];if(void 0!==o)if($.isPlainObject(o))i=T({},$.isPlainObject(i)?[i,o]:[o],n==e.length-1?null:t,null);else i=o}return i}function T(e,t,i,n){for(var o=t.length,s=0;s<o;s++)for(var r=t[s],a=Object.keys(r),l=0;l<a.length;l++){var u=a[l],h=null==i?null:null==n?u:n+"."+u;if(null==i||!i[h]){var d=r[u];if(void 0!==d)if($.isPlainObject(d)){var c=$.isPlainObject(e[u])?[e[u],d]:[d];e[u]=T({},c,i,h)}else e[u]=d}}return e}$.widget("oj.baseComponent",{options:{contextMenu:null,rootAttributes:null,optionChange:void 0,destroy:void 0},refresh:function(){this._propertyContext=null,this._SetupContextMenu()},_createWidget:function(e,t){e&&(this.OuterWrapper=e._wrapper),this._originalDefaults=this.options||{},this._constructorOptions=e||{},this._super(e,t),this._AfterCreateEvent()},_SetRootAttributes:function(){var e=this.options.rootAttributes;if(e){var t=this.widget();if(null==t)return;var i=e.class;i&&t.addClass(i);var n=e.style;if(n){var o=t.attr("style");o?t.attr("style",o+";"+n):t.attr("style",n)}delete(e=$.extend({},e)).class,delete e.style,t.attr(e),delete e.id;var s=Object.keys(e);if(s.length)throw new Error("Unsupported values passed to rootAttributes option: "+s.toString())}},_create:function(){this._SaveAttributes(this.element),this._InitOptions(this._originalDefaults,this._constructorOptions),delete this._originalDefaults,delete this._constructorOptions,this._ComponentCreate(),this._AfterCreate(),this._SetupResources(),this.element.addClass(v)},_InitOptions:function(e,t){this._setupDefaultOptions(e,t),this._initContextMenuOption(t)},_ComponentCreate:function(){var e,t,i;e=this.element,t=this.widgetName,(i=e.data(f))||(i=[],e.data(f,i)),i.indexOf(t)<0&&i.push(t),this.activeableEventNamespace=this.eventNamespace+"activeable",this.hoverableEventNamespace=this.eventNamespace+"hoverable"},_AfterCreate:function(){this._SetRootAttributes(),this.contextMenuEventNamespace=this.eventNamespace+"contextMenu",this.activeableEventNamespace=this.eventNamespace+"activeable",this.hoverableEventNamespace=this.eventNamespace+"hoverable"},_AfterCreateEvent:$.noop,_setOptionClasses:function(){},_setOptionDisabled:function(){},_classes:function(){return""},_removeClass:function(){return this},_addClass:function(){return this},_toggleClass:function(){return this},_SaveAttributes:function(e){},_SaveAllAttributes:function(e){var t=this;this._savedAttributes=[],$.each(e,function(e,i){var n={},o={element:i,attributes:n},s=i.attributes;t._savedAttributes.push(o),$.each(s,function(e,t){var i=t.name;n[i]={attr:t.value}})})},_GetSavedAttributes:function(e){var t=this._savedAttributes;if(void 0===t)return null;e=e[0];for(var i=0,n=t.length;i<n;i++){var o=t[i];if(o.element===e)return o.attributes}return{}},_RestoreAttributes:function(){},_RestoreAllAttributes:function(){$.each(this._savedAttributes,function(e,t){var i=$(t.element),n=t.attributes;if(1===i.length){for(var o=t.element.attributes,s=[],r=0,a=o.length;r<a;r++)o[r].name in n||s.push(o[r].name);for(r=0,a=s.length;r<a;r++)i.removeAttr(s[r]);for(var l in n)i.attr(l,n[l].attr)}})},_GetTranslationsSectionName:function(){return this.widgetFullName},_CompareOptionValues:function(e,t,n){return this._IsCustomElement()&&this._getWritebackOption(e)?i.Object.compareValues(t,n):t==n},getTranslatedString:function(e,t){var n,o={};return arguments.length>2?o=Array.prototype.slice.call(arguments,1):2==arguments.length&&("object"==typeof(o=arguments[1])||o instanceof Array||(o=[o])),null==(n=this.option(A+e))?e:i.Translations.applyParameters(n.toString(),o)},getNodeBySubId:function(e){return null!=e&&null!=e.subId||!this.element?null:this.element[0]},getSubIdByNode:function(e){return null},destroy:function(){if(this._IsCustomElement())throw new Error("destroy cannot be called on a custom element");this._trigger("destroy"),i.DomUtils.dispatchEvent(this.element[0],new CustomEvent("_ojDestroy")),this._super(),this._ReleaseResources(),this.element.removeClass(v),this.widget().removeClass("oj-disabled"),this._removeStateClasses(this.element),function(e,t){var i=e.data(f);if(i){var n=i.indexOf(t);n>=0&&(i.splice(n,1),0===i.length&&e.removeData(f))}}(this.element,this.widgetName),this._RestoreAttributes(),this._initialCmDomAttr?this.element.attr("contextmenu",this._initialCmDomAttr):this.element.removeAttr("contextmenu"),this._propertyContext=null},option:function(e,t){if(0===arguments.length)return $.widget.extend({},this.options);var i=arguments[0],n=i,o=null,s={};if("string"==typeof i){n={};var r=i.split(".");if(i=r.shift(),r.length){var a;o=r.join(".");try{arguments.length>1&&(this._settingNestedKey=o),a=n[i]=$.widget.extend({},this.options[i])}finally{this._settingNestedKey=null}for(var l=0;l<r.length-1;l++)a[r[l]]=a[r[l]]||{},a=a[r[l]];if(i=r.pop(),1===arguments.length)return void 0===a[i]?null:a[i];a[i]=t}else{if(1===arguments.length)return void 0===this.options[i]?null:this.options[i];n[i]=t}s=arguments[2]||s}else s=arguments[1]||s;if(null!=o){var u={path:e,value:t};s=$.widget.extend({},s,{subkey:o,subproperty:u})}var h=s?s._context:null,d=!!h&&h.internalSet,c={};for(var p in n){var _=n[p],m=this.options[p];(!s||!s.changed)&&this._CompareOptionValues(p,m,_)||(c[p]=_)}return Object.keys(c).length>0&&(d?this._internalSetOptions(c,s):this._setOptions(c,s)),this},_internalSetOptions:function(e,t){for(var i in e){var n=e[i],o=this.options[i];this.options[i]=n,this._optionChanged(i,n,o,t)}},_setOptions:function(e,t){for(var i in e){var n=e[i];this._setOption(i,n,t)}return this},_setOption:function(e,t,i){var n=this.options[e];if("disabled"===e)this.options[e]=t,this.widget().toggleClass("oj-disabled",!!t).attr("aria-disabled",t),t&&this._removeStateClasses(this.widget());else{try{var o=null==i?null:i.subkey;null!=o&&(this._settingNestedKey=o),this._super(e,t)}finally{this._settingNestedKey=null}"contextMenu"===e&&this._SetupContextMenu()}return this._optionChanged(e,t,n,i),this},_optionChanged:function(e,t,i,n){var o,s=null,r=!1,a=!1,l=null,u="external",h=null;n&&(s=n._context)&&(l=s.originalEvent,r=void 0===s.writeback?null!=l:s.writeback,a=s.readOnly,h=s.optionMetadata,o=s.extraData,s.internalSet&&(u="internal")),(h=h||{}).writeback=r?"shouldWrite":"shouldNotWrite",a&&(h.readOnly=!0);var d={option:e,previousValue:i,value:t,optionMetadata:h,updatedFrom:u},c=null==n?null:n.subkey;if(c){var p=c.split("."),_=i;p.forEach(function(e){_&&(_=_[e])});var m=n.subproperty;m.previousValue=_,d.subproperty=m}null!=o&&(d=$.extend({},o,d)),this._trigger("optionChange",l,d)},_SetupResources:function(){this._SetupContextMenu()},_ReleaseResources:function(){this._ReleaseContextMenu()},_trigger:function(e,t,i){return this._trigger2(e,t,i).proceed},_trigger2:function(e,t,i){if(i=i||{},this._IsCustomElement())return this._triggerCustomEvent(e,t,i);var n=this.options[e];return(t=$.Event(t,O)).type=(this.widgetEventPrefix+e).toLowerCase(),t.target=this.element[0],this.element.trigger(t,i),{proceed:!($.isFunction(n)&&!1===n.apply(this.element[0],[t].concat(i))||t.isDefaultPrevented()),event:t}},_triggerCustomEvent:function(e,t,n){var o,s,r,a={},l=this._getRootElement();if("optionChange"===e){var u=i.CustomElementBridge.getPropertyForAlias(l,n.option);if(!i.CustomElementBridge.isKnownProperty(l,u))return{proceed:!0,event:null};o=i.__AttributeUtils.propertyNameToChangeEventType(u);for(var h=Object.keys(n),d=0;d<h.length;d++){var c=h[d];if("option"!==c)if("optionMetadata"===c)for(var p=Object.keys(n[c]),_=0;_<p.length;_++){var m=p[_];"writeback"!==m&&"component"!==m&&(a[m]=n[c][m])}else a[c]=n[c]}}else{if(!i.CustomElementBridge.isKnownEvent(l,e))return{proceed:!0,event:null};s=!0,r=!0,o=i.__AttributeUtils.eventTriggerToEventType(e),a=this._resolveJQueryObjects(n)}t&&(a.originalEvent=t instanceof $.Event?t.originalEvent:t);var g={detail:a};s&&(g.bubbles=!0),r&&(g.cancelable=!0);var f=new CustomEvent(o,g);return l.dispatchEvent(f),{proceed:!f.defaultPrevented,event:f}},_resolveJQueryObjects:function(e){for(var t,n,o=i.CollectionUtils.copyInto({},e),s=Object.keys(o),r=0;r<s.length;r++)(t=o[n=s[r]])&&t instanceof $&&(0==t.length?o[n]=null:1==t.length?o[n]=t[0]:o=t.toArray());return o},_initContextMenuOption:function(e){var t=this.element.attr("contextmenu");this._initialCmDomAttr=t,!t||"contextMenu"in e||this.option("contextMenu",document.getElementById(t),{_context:{internalSet:!0}})},_handleContextMenuGesture:function(e,t,n){if(!this._IsEffectivelyDisabled()){var o;if("OJ-MENU"===e.tagName)o=e;else{var s=i.Components.__GetWidgetConstructor(e,"ojMenu");if(!(o=s&&s("instance")))throw new Error("Invalid JET Menu.")}this._NotifyContextMenuGesture(o,t,n),$(e).is(":visible")&&t.preventDefault()}},_SetupContextMenu:function(){var e=this._GetContextMenu();if(e||(e=this._GetDefaultContextMenu()),e&&void 0===this._contextMenuGestureInit){this._contextMenuGestureInit=e;var t=this;i.GestureUtils.startDetectContextMenuGesture(this.widget()[0],function(i,n){t._handleContextMenuGesture(e,i,n)})}},_ReleaseContextMenu:function(){this._contextMenuGestureInit=void 0,i.GestureUtils.stopDetectContextMenuGesture(this.widget()[0])},_GetContextMenu:function(){if(this._IsCustomElement()){var e=i.BaseCustomElementBridge.getSlotMap(this._getRootElement()).contextMenu;if(e&&e.length>0)return e[0]}else if(this.options.contextMenu)return $(this.options.contextMenu).first()[0];return null},_NotifyContextMenuGesture:function(e,t,i){this._OpenContextMenu(t,i)},_OpenContextMenu:function(e,t,n,o,s){var r=this._GetContextMenu();if(r||(r=this._contextMenuGestureInit&&$(this._contextMenuGestureInit).is(":visible")?this._contextMenuGestureInit:this._GetDefaultContextMenu()),r){var a={mouse:{my:"start top",at:"start bottom",of:e,collision:"flipfit"},touch:{my:"start>40 center",at:"start bottom",of:e,collision:"flipfit"},keyboard:{my:"start top",at:"start bottom",of:"launcher",collision:"flipfit"}},l={launcher:this.element,position:a[t]},u={initialFocus:"menu"};if(n=s?$.extend(l,n,u):$.extend(!0,l,n,u),r.__openingContextMenu=!0,"OJ-MENU"===r.tagName)r.open(e,n,o);else{var h=i.Components.__GetWidgetConstructor(r,"ojMenu");(h&&h("instance")).open(e,n,o)}r.__openingContextMenu=!1}},_GetDefaultContextMenu:function(){return null},_removeStateClasses:function(e){e.removeClass("oj-hover oj-focus oj-focus-highlight oj-active"),e.find(".oj-hover").removeClass("oj-hover"),e.find(".oj-focus").removeClass("oj-focus"),e.find(".oj-focus-highlight").removeClass("oj-focus-highlight"),e.find(".oj-active").removeClass("oj-active")},_isRealMouseEvent:function(e){return!i.DomUtils.recentTouchEnd()},_AddHoverable:function(e){var t;$.isPlainObject(e)?t=e.element:(t=e,e={});var i=e.afterToggle||$.noop;t.on("mouseenter"+this.hoverableEventNamespace,this._hoverStartHandler.bind(this,i)).on("mouseleave"+this.hoverableEventNamespace,this._hoverAndActiveEndHandler.bind(this,"oj-hover",i))},_RemoveHoverable:function(e){e&&e.off(this.hoverableEventNamespace)},_AddActiveable:function(e){var t;$.isPlainObject(e)?t=e.element:(t=e,e={});var n=e.afterToggle||$.noop;i.DomUtils.isTouchSupported()&&t.on("touchstart"+this.activeableEventNamespace,this._activeStartHandler.bind(this,n)).on("touchend"+this.activeableEventNamespace+" touchcancel"+this.activeableEventNamespace,this._hoverAndActiveEndHandler.bind(this,"oj-active",n)),t.on("mousedown"+this.activeableEventNamespace,this._activeStartHandler.bind(this,n)).on("mouseup"+this.activeableEventNamespace,this._hoverAndActiveEndHandler.bind(this,"oj-active",n)).on("mouseenter"+this.activeableEventNamespace,this._activeStartHandler.bind(this,n)).on("mouseleave"+this.activeableEventNamespace,this._hoverAndActiveEndHandler.bind(this,"oj-active",n))},_RemoveActiveable:function(e){e&&(e.off(this.activeableEventNamespace),g=null)},_activeStartHandler:function(e,t){var i=$(t.currentTarget);("mouseenter"!==t.type||this._isTargetInActiveElement(t.currentTarget))&&(i.hasClass("oj-disabled")||"touchstart"!==t.type&&!this._isRealMouseEvent(t)||(i.addClass("oj-active"),e(t.type),"mousedown"===t.type&&(g=t.currentTarget,this.document.one("mouseup",function(){g=null}))))},_hoverStartHandler:function(e,t){var i=$(t.currentTarget);!i.hasClass("oj-disabled")&&this._isRealMouseEvent(t)&&(i.addClass("oj-hover"),e(t.type))},_hoverAndActiveEndHandler:function(e,t,i){("oj-active"!==e||"mouseleave"!==i.type||this._isTargetInActiveElement(i.currentTarget))&&($(i.currentTarget).removeClass(e),t(i.type))},_isTargetInActiveElement:function(e){return g===e||null!=g&&$.contains(g,e)},_hoverable:function(){},_focusable:function(e){$.isPlainObject(e)||(e={element:e}),e.component=this,i.DomUtils.makeFocusable(e)},_UnregisterChildNode:function(e){if(e){$(e).off(this.eventNamespace);var t=this.bindings;t&&(this.bindings=$(t.not(e)))}},_GetReadingDirection:function(){return i.DomUtils.getReadingDirection()},_NotifyAttached:function(){this._propertyContext=null},_NotifyDetached:function(){this._propertyContext=null,this._removeStateClasses(this.widget())},_NotifyInitShown:function(){},_NotifyShown:function(){},_NotifyHidden:function(){},_IsEffectivelyDisabled:function(){return!(!this.options.disabled&&!this._ancestorDisabled)},__setAncestorComponentDisabled:function(e){this._ancestorDisabled=e},_getTranslationSectionLoader:function(){var e=[],t=this,n=0;this._traverseWidgetHierarchy(function(o){var s=0==n?t._GetTranslationsSectionName():o.widgetFullName;n++;var r=i.Translations.getComponentTranslations(s);null==r||$.isEmptyObject(r)||e.push(s)});var o=e.length;return o>0?function(){if(1==o)return i.Translations.getComponentTranslations(e[0]);for(var t={},n=o-1;n>=0;n--)$.widget.extend(t,i.Translations.getComponentTranslations(e[n]));return t}:null},_getDynamicPropertyContext:function(){if(!this._propertyContext){var e={};this._propertyContext=e;var t=this.element[0];e.containers=function(e){for(var t=[];e;){var n=e.getAttribute,o=n?n.call(e,i.Components._OJ_CONTAINER_ATTR):null;null!=o&&t.push(o),e=e.parentNode}return t}(t),e.element=t,e.isCustomElement=this._IsCustomElement()}return this._propertyContext},_setupDefaultOptions:function(e,t){var i=this.options,n=this._getTranslationSectionLoader(),o=t[D];null==n||void 0!==o&&!$.isPlainObject(o)||b(this,void 0,t[D],i,D,n),this._loadGlobalDefaultOptions(e,t)},_loadGlobalDefaultOptions:function(e,t){var n=this.options,o=[];this._traverseWidgetHierarchy(function(e){o.push(e.widgetName)}),i.Components.getDefaultOptions(),o.push("default");var s=i.Components.__getDefaultOptions(o);if(!$.isEmptyObject(s)){var r=this,a=function(){return r._getDynamicPropertyContext()};for(var l in s){var u=t[l];if(void 0===u||$.isPlainObject(u)){var h=s[l];if(h){var d=S(h);if(d)b(this,e[l],u,n,l,d,a);else{var c=[e[l]].concat(h);c.push(u),n[l]=E(c)}}}}}},_traverseWidgetHierarchy:function(e){for(var t=this.constructor.prototype;null!=t&&"oj"===t.namespace;)e(t),t=Object.getPrototypeOf(t)},_getRootElement:function(){return this.OuterWrapper||this.element[0]},_IsCustomElement:function(){return null!=i.BaseCustomElementBridge.getRegistered(this._getRootElement().tagName)},_FixRendererContext:function(e){if(this._IsCustomElement()){var t=i.CollectionUtils.copyInto({},e);return delete t.component,t.componentElement=this._getRootElement(),t}return e},_WrapCustomElementRenderer:function(e){return this._IsCustomElement()&&"function"==typeof e?function(t){var i=e(t);return i&&i.insert?i.insert:null}:e},__saveWritebackOptions:function(e){this._writebackOptions=e},_getWritebackOption:function(e){return!(!this._writebackOptions||!this._writebackOptions[e])},__handleSubtreeAttached:function(){this._IsCustomElement()||this._NotifyAttached()},__handleSubtreeDetached:function(){this._IsCustomElement()||this._NotifyDetached()},_VerifyConnectedForSetup:function(){return!1},__handleConnected:function(){this._NotifyAttached(),this.__delayConnectDisconnect(0)||this._SetupResources()},__handleDisconnected:function(){this.__delayConnectDisconnect(1)||this._ReleaseResources(),this._NotifyDetached()},__delayConnectDisconnect:function(e){if(!this._VerifyConnectedForSetup())return!1;if(void 0===this.connectedState){var t=this;Promise.resolve().then(function(){t.connectedState===e&&(0===e?t._SetupResources():t._ReleaseResources(),t.connectedState=void 0)})}return this.connectedState=e,!0},__getFocusElement:function(){return this.GetFocusElement()},GetFocusElement:function(){return this.element[0]}}),delete $.fn.baseComponent,i.__registerWidget=function(e,t,i,n){if($.widget(e,t,i),n){var o=e.split(".")[1];delete $.fn[o]}if("oj.oj"===e.substring(0,5)||"oj._oj"===e.substring(0,6)){var s,r=e.split("."),a=r[0],l=r[1],u=a+"-"+l;s="_"===l.substring(0,1)?"_"+a+"-"+l.substring(3):a+"-"+l.substring(2),$.expr.pseudos[s.toLowerCase()]=function(e){return!!$.data(e,u)}}};var D="translations",A=D+".";function I(){return!0}var O={isDefaultPrevented:function(){return!1},preventDefault:function(){this.isDefaultPrevented=I},stopPropagation:function(){this.isPropagationStopped=I},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=I}};i.ComponentMessaging=function(e){this.Init(e)},i.Object.createSubclass(i.ComponentMessaging,i.Object,"oj.ComponentMessaging"),i.ComponentMessaging._DISPLAY_TYPE={NONE:"none",NOTEWINDOW:"notewindow",PLACEHOLDER:"placeholder",INLINE:"inline"},i.ComponentMessaging._DISPLAY_TYPE_TO_CALLBACK={},i.ComponentMessaging.registerMessagingStrategy=function(e,t){e&&"function"==typeof t&&(i.ComponentMessaging._DISPLAY_TYPE_TO_CALLBACK[e]=t)},i.ComponentMessaging.prototype.Init=function(e){i.ComponentMessaging.superclass.Init.call(this),this._component=e,this._activated=!1,this._initializeMessagingStrategies()},i.ComponentMessaging.prototype.activate=function(e,t,n){var o=this;i.Assert.assertObject(n),this._launcher=e,this._contentElement=t,this._messagingContent=i.CollectionUtils.copyInto(this._messagingContent||{},n),this._isActive()?this._reactivate():($.each(this._strategies,function(e,t){t.activate(o)}),this._activated=!0)},i.ComponentMessaging.prototype.update=function(e){i.Assert.assertObject(e),i.Assert.assertBoolean(this._activated),this._messagingContent=i.CollectionUtils.copyInto(this._messagingContent||{},e),this._activated&&$.each(this._strategies,function(t,i){i.shouldUpdate(e)&&i.update()})},i.ComponentMessaging.prototype.deactivate=function(){$.each(this._strategies,function(e,t){t.deactivate()}),this._activated=!1,this._component=null,this._launcher=null,this._contentElement=null,this._strategies={}},i.ComponentMessaging.prototype.close=function(){$.each(this._strategies,function(e,t){t.close()})},i.ComponentMessaging.prototype._createMessagingStrategy=function(e,t){return new(i.ComponentMessaging._DISPLAY_TYPE_TO_CALLBACK[e]||i.ComponentMessaging._DISPLAY_TYPE_TO_CALLBACK[i.ComponentMessaging._DISPLAY_TYPE.NONE])(t)},i.ComponentMessaging.prototype._getComponent=function(){return this._component||null},i.ComponentMessaging.prototype._getLauncher=function(){return this._launcher||null},i.ComponentMessaging.prototype._getContentElement=function(){return this._contentElement||null},i.ComponentMessaging.prototype._getMessagingContent=function(){return this._messagingContent||{}},i.ComponentMessaging.prototype._isActive=function(){return this._activated},i.ComponentMessaging.prototype._getResolvedMessagingDisplayOptions=function(){var e,t,n,o,s,r,a,l={},u=!1,h=this._component.options.placeholder,d=this._component.options.displayOptions||{},c={};for(o=Object.keys(d),r=0;r<o.length;r++){if(e=d[s=o[r]],u=!1,n=s+"",Array.isArray(e))for(a=0;a<e.length;a++)t=e[a],u||(u=this._resolveDisplayTypeForArtifact(n,t,h,c));else"string"==typeof e&&(u||(u=this._resolveDisplayTypeForArtifact(n,e,h,c)));u||(c[n]=i.ComponentMessaging._DISPLAY_TYPE.NONE)}return $.each(i.ComponentMessaging._DISPLAY_TYPE,function(e,t){l[t]=[]}),$.each(c,function(e,t){l[t].push(e)}),l},i.ComponentMessaging.prototype._resolveDisplayTypeForArtifact=function(e,t,n,o){var s=!1;switch(t){case i.ComponentMessaging._DISPLAY_TYPE.PLACEHOLDER:"converterHint"===e&&(s||n||(o[e]=t,s=!0));break;case i.ComponentMessaging._DISPLAY_TYPE.INLINE:"messages"===e&&(s||(o[e]=t,s=!0));break;default:s||(o[e]=t,s=!0)}return s},i.ComponentMessaging.prototype._initializeMessagingStrategies=function(){var e=this._getResolvedMessagingDisplayOptions(),t=e[i.ComponentMessaging._DISPLAY_TYPE.NOTEWINDOW],n=e[i.ComponentMessaging._DISPLAY_TYPE.NONE],o=e[i.ComponentMessaging._DISPLAY_TYPE.PLACEHOLDER],s=e[i.ComponentMessaging._DISPLAY_TYPE.INLINE],r={};t.length>0&&(r[i.ComponentMessaging._DISPLAY_TYPE.NOTEWINDOW]=this._createMessagingStrategy(i.ComponentMessaging._DISPLAY_TYPE.NOTEWINDOW,t)),o.length>0&&(r[i.ComponentMessaging._DISPLAY_TYPE.PLACEHOLDER]=this._createMessagingStrategy(i.ComponentMessaging._DISPLAY_TYPE.PLACEHOLDER,o)),s.length>0&&(r[i.ComponentMessaging._DISPLAY_TYPE.INLINE]=this._createMessagingStrategy(i.ComponentMessaging._DISPLAY_TYPE.INLINE,s)),r[i.ComponentMessaging._DISPLAY_TYPE.NONE]=this._createMessagingStrategy(i.ComponentMessaging._DISPLAY_TYPE.NONE,n),this._strategies=r},i.ComponentMessaging.prototype._reactivate=function(){var e,t=this._getResolvedMessagingDisplayOptions(),n=this;$.each(t,function(t,o){t+="",e=n._strategies[t],o&&o.length>0?e?e&&e.reactivate(o):(e=n._createMessagingStrategy(t,o),n._strategies[t]=e,e.activate(n)):e&&i.ComponentMessaging._DISPLAY_TYPE.NONE!==t&&(e.deactivate(),delete n._strategies[t])})},i.MessagingStrategy=function(e){this.Init(e)},i.Object.createSubclass(i.MessagingStrategy,i.Object,"oj.MessagingStrategy"),i.MessagingStrategy.prototype.Init=function(e){i.Assert.assertArray(e),i.MessagingStrategy.superclass.Init.call(this),this._displayOptions=e},i.MessagingStrategy.prototype.activate=function(e){this._componentMessaging=e},i.MessagingStrategy.prototype.deactivate=function(){},i.MessagingStrategy.prototype.close=function(){},i.MessagingStrategy.prototype.reactivate=function(e){this.Init(e)},i.MessagingStrategy.prototype.shouldUpdate=function(e){return!0},i.MessagingStrategy.prototype.update=function(){},i.MessagingStrategy.prototype.GetLauncher=function(){return this._componentMessaging._getLauncher()},i.MessagingStrategy.prototype.GetContentElement=function(){return this._componentMessaging._getContentElement()},i.MessagingStrategy.prototype.GetComponent=function(){return this._componentMessaging._getComponent()},i.MessagingStrategy.prototype.GetMessages=function(){return this.GetValidityState().getMessages()},i.MessagingStrategy.prototype.GetMaxSeverity=function(){return this.GetValidityState().getMaxSeverity()},i.MessagingStrategy.prototype.GetConverterHint=function(){var e=[],t=this._getMessagingContent(),i=t&&t.converterHint;return i&&e.push(i),e},i.MessagingStrategy.prototype.GetValidatorHints=function(){var e=[],t=this._getMessagingContent(),i=t&&t.validatorHint||[];return $.each(i,function(t,i){e.push(i)}),e},i.MessagingStrategy.prototype.GetTitle=function(){var e=this._getMessagingContent();return e&&e.title||""},i.MessagingStrategy.prototype.GetValidityState=function(){var e=this._getMessagingContent();return e&&e.validityState||null},i.MessagingStrategy.prototype.HasMessages=function(){var e=this.GetMessages();return!!(e&&e.length>0)},i.MessagingStrategy.prototype.ShowMessages=function(){return-1!==this._displayOptions.indexOf("messages")},i.MessagingStrategy.prototype.ShowConverterHint=function(){return-1!==this._displayOptions.indexOf("converterHint")},i.MessagingStrategy.prototype.ShowValidatorHint=function(){return-1!==this._displayOptions.indexOf("validatorHint")},i.MessagingStrategy.prototype.ShowTitle=function(){return-1!==this._displayOptions.indexOf("title")},i.MessagingStrategy.prototype.IsInvalid=function(){return this.GetValidityState().isInvalid()},i.MessagingStrategy.prototype._getMessagingContent=function(){return this._componentMessaging?this._componentMessaging._getMessagingContent():{}},i.DefaultMessagingStrategy=function(e){this.Init(e)},i.ComponentMessaging.registerMessagingStrategy(i.ComponentMessaging._DISPLAY_TYPE.NONE,i.DefaultMessagingStrategy),i.DefaultMessagingStrategy._SELECTOR_STATE_INVALID="oj-invalid",i.DefaultMessagingStrategy._SELECTOR_STATE_WARNING="oj-warning",i.Object.createSubclass(i.DefaultMessagingStrategy,i.MessagingStrategy,"oj.DefaultMessagingStrategy"),i.DefaultMessagingStrategy.prototype.update=function(){i.DefaultMessagingStrategy.superclass.update.call(this);var e=this.GetLauncher(),t=this.GetMaxSeverity(),n=[],o=[],s=!1,r=this.GetComponent().widget();e&&(this.IsInvalid()?(n.push(i.DefaultMessagingStrategy._SELECTOR_STATE_WARNING),o.push(i.DefaultMessagingStrategy._SELECTOR_STATE_INVALID),s=!0):this.HasMessages()&&t===i.Message.SEVERITY_LEVEL.WARNING?(n.push(i.DefaultMessagingStrategy._SELECTOR_STATE_INVALID),o.push(i.DefaultMessagingStrategy._SELECTOR_STATE_WARNING)):(n.push(i.DefaultMessagingStrategy._SELECTOR_STATE_INVALID),n.push(i.DefaultMessagingStrategy._SELECTOR_STATE_WARNING)),r.removeClass(n.join(" ")).addClass(o.join(" ")),this.GetContentElement().attr({"aria-invalid":s}))},i.DefaultMessagingStrategy.prototype.deactivate=function(){this.GetComponent().widget().removeClass(i.DefaultMessagingStrategy._SELECTOR_STATE_INVALID).removeClass(i.DefaultMessagingStrategy._SELECTOR_STATE_WARNING),this.GetContentElement().removeAttr("aria-invalid"),i.DefaultMessagingStrategy.superclass.deactivate.call(this)},i.PlaceholderMessagingStrategy=function(e){this.Init(e)},i.ComponentMessaging.registerMessagingStrategy(i.ComponentMessaging._DISPLAY_TYPE.PLACEHOLDER,i.PlaceholderMessagingStrategy),i.Object.createSubclass(i.PlaceholderMessagingStrategy,i.MessagingStrategy,"oj.PlaceholderMessagingStrategy"),i.PlaceholderMessagingStrategy.prototype.Init=function(e){i.PlaceholderMessagingStrategy.superclass.Init.call(this,e)},i.PlaceholderMessagingStrategy.prototype.activate=function(e){i.PlaceholderMessagingStrategy.superclass.activate.call(this,e),this._refreshPlaceholder()},i.PlaceholderMessagingStrategy.prototype.reactivate=function(e){i.PlaceholderMessagingStrategy.superclass.reactivate.call(this,e),this._refreshPlaceholder()},i.PlaceholderMessagingStrategy.prototype.shouldUpdate=function(e){return!(!e||void 0===e.converterHint)},i.PlaceholderMessagingStrategy.prototype.update=function(){i.PlaceholderMessagingStrategy.superclass.update.call(this),this._refreshPlaceholder()},i.PlaceholderMessagingStrategy.prototype._refreshPlaceholder=function(){var e,t,i=this.GetLauncher();if(this.ShowPlaceholderContent()&&i){e=(t=this.GetConverterHint()).length?t[0]:"";var n={internalMessagingSet:!0};this.GetComponent().option({placeholder:e},{_context:n})}},i.PlaceholderMessagingStrategy.prototype.ShowPlaceholderContent=function(){return this.ShowConverterHint()},i.ComponentValidity=function(e,t){this.Init(e,t)},i.ComponentValidity.isInvalid=function(e){return i.Message.getMaxSeverity(e)>=i.Message.SEVERITY_LEVEL.ERROR},i.Object.createSubclass(i.ComponentValidity,i.Object,"oj.ComponentValidity"),i.ComponentValidity.prototype.Init=function(e,t){i.ComponentValidity.superclass.Init.call(this),this._initialize(e,t)},i.ComponentValidity.prototype.isInvalid=function(){return this._invalid},i.ComponentValidity.prototype.getMessages=function(){return this._messages},i.ComponentValidity.prototype.getMaxSeverity=function(){return this._maxSeverity},i.ComponentValidity.prototype.update=function(e,t){this._initialize(e,t)},i.ComponentValidity.prototype._initialize=function(e,t){this._compValid=e,this._compMessages=t,this._messages=this._getImmediateMessages(),this._maxSeverity=i.Message.getMaxSeverity(this._messages),this._invalid=i.ComponentValidity.isInvalid(this._messages)},i.ComponentValidity.prototype._getImmediateMessages=function(){for(var e,t=this._compMessages||[],n=[],o=0;o<t.length;o++)(e=t[o])instanceof i.ComponentMessage&&!e.canDisplay()||n.push(e);return n},i.CustomElementBridge={},i.CustomElementBridge.proto=Object.create(i.BaseCustomElementBridge.proto),i.CollectionUtils.copyInto(i.CustomElementBridge.proto,{AddComponentMethods:function(e){e.setProperty=function(e,t){var n=i.BaseCustomElementBridge.getInstance(this);if(!n.SaveEarlyPropertySet(e,t)&&!n._setEventProperty(this,e,t)&&!n._validateAndSetCopyProperty(this,e,t,null)){var o=i.BaseCustomElementBridge.__GetPropertyMetadata(e,i.BaseCustomElementBridge.getProperties(n,this)),s=n.CanSkipTypeCheck(e.split("."));o||s?i.CustomElementBridge._getPropertyAccessor(this,e)(t):this[e]=t}},e.getProperty=function(e){var t=i.BaseCustomElementBridge.getInstance(this),n=i.BaseCustomElementBridge.__GetPropertyMetadata(e,i.BaseCustomElementBridge.getProperties(t,this)),o=t.CanSkipTypeCheck(e.split("."));if(i.__AttributeUtils.eventListenerPropertyToEventType(e)||!n&&!o)return this[e];var s=n?n.extension:null;return s&&s._COPY_TO_INNER_ELEM?t._getCopyProperty(this,e,n):i.CustomElementBridge._getPropertyAccessor(this,e)()},e.focus=function(){var e=i.BaseCustomElementBridge.getInstance(this);if(e._WIDGET_INSTANCE){var t=e._WIDGET_INSTANCE.__getFocusElement();t&&(t!==this?t.focus():HTMLElement.prototype.focus.call(this))}else HTMLElement.prototype.focus.call(this)},e.blur=function(){var e=i.BaseCustomElementBridge.getInstance(this);if(e._WIDGET_INSTANCE){var t=e._WIDGET_INSTANCE.__getFocusElement();t&&(t!==this?t.blur():HTMLElement.prototype.blur.call(this))}else HTMLElement.prototype.focus.call(this)}},BatchedPropertySet:function(e,t){for(var n=Object.keys(t),o={},s=0;s<n.length;s++){var r=n[s],a=t[r];this._setEventProperty(e,r,a)||this._validateAndSetCopyProperty(e,r,a,null)||(a=this.ValidatePropertySet(e,r,a),o[r=this.GetAliasForProperty(r)]=a)}var l=i.Components.__GetWidgetConstructor(this._WIDGET_ELEM);if(l)l("option",o);else for(s=0;s<n.length;s++){var u=n[s];e.setProperty(u,t[u])}},CanSkipTypeCheck:function(e){return e.length>1&&"translations"===e[0]},CreateComponent:function(e){var t=this._INNER_DOM_FUNCTION;if(this._WIDGET_ELEM=i.CustomElementBridge._getWidgetElement(e,t?t(e):this._EXTENSION._INNER_ELEM),this._WIDGET_ELEM!==e){for(var n=this._EXTENSION._GLOBAL_TRANSFER_ATTRS||[],o=0;o<n.length;o++){var s=n[o];e.hasAttribute(s)&&(this._WIDGET_ELEM.setAttribute(s,e.getAttribute(s)),this._removingTransfer=!0,e.removeAttribute(s))}this._copyProperties()}i.Components.unmarkPendingSubtreeHidden(e);var r=$(this._WIDGET_ELEM),a=$(this._WIDGET_ELEM)[this._EXTENSION._WIDGET_NAME].bind(r);a(this._PROPS),this._WIDGET=a,this._WIDGET_INSTANCE=a("instance"),this._WRITEBACK_PROPS&&this._WIDGET_INSTANCE.__saveWritebackOptions(this._WRITEBACK_PROPS),e.hasAttribute("disabled")&&!this._disabledProcessed&&i.CustomElementBridge._removeDisabledAttribute(e);var l=function(t){return function(){var i=document.createEvent("UIEvent");i.initEvent(t,!1,!1),e.dispatchEvent(i)}},u=this._WIDGET_INSTANCE.__getFocusElement();u&&u!==e&&(u.addEventListener("focus",l("focus")),u.addEventListener("blur",l("blur"))),this.__READY_TO_FIRE=!0,this.resolveDelayedReadyPromise()},DefineMethodCallback:function(e,t,n){e[t]=function(){var e=i.BaseCustomElementBridge.getInstance(this),o=n.internalName||t;return e._WIDGET.apply(null,[o].concat([].slice.call(arguments)))}},DefinePropertyCallback:function(e,t,n){var o,s=n.extension;Object.defineProperty(e,t,{enumerable:!0,get:function(){return n._eventListener?o:s&&s._COPY_TO_INNER_ELEM?i.BaseCustomElementBridge.getInstance(this)._getCopyProperty(this,t,n):i.CustomElementBridge._getPropertyAccessor(this,t)()},set:function(e){var s=i.BaseCustomElementBridge.getInstance(this);s.SaveEarlyPropertySet(t,e)||(n._eventListener?(s.SetEventListenerProperty(this,t,e),o=e):s._validateAndSetCopyProperty(this,t,e,n)||i.CustomElementBridge._getPropertyAccessor(this,t)(e))}})},GetAttributes:function(e){var t=i.BaseCustomElementBridge.getAttributes(e.properties);return e.extension._GLOBAL_TRANSFER_ATTRS?t.concat(e.extension._GLOBAL_TRANSFER_ATTRS):t},GetAliasForProperty:function(e){var t=this._EXTENSION._ALIASED_PROPS;return t&&t[e]?t[e]:e},InitializeElement:function(e){i.BaseCustomElementBridge.proto.InitializeElement.call(this,e),this._EXTENSION._CONTROLS_SUBTREE_HIDDEN&&i.Components.markPendingSubtreeHidden(e),i.BaseCustomElementBridge.__InitProperties(e,this._PROPS)},HandleAttributeChanged:function(e,t,i,n){var o=this._EXTENSION._GLOBAL_TRANSFER_ATTRS,s=o&&-1!==o.indexOf(t);!this._removingTransfer&&s&&this._WIDGET_ELEM?(null==n||!1===n?this._WIDGET_ELEM.removeAttribute(t):this._WIDGET_ELEM.setAttribute(t,n),this._removingTransfer=!0,e.removeAttribute(t)):this._removingTransfer&&s&&(this._removingTransfer=!1)},HandleDetached:function(e){i.BaseCustomElementBridge.proto.HandleDetached.call(this,e),i.Components.__GetWidgetConstructor(this._WIDGET_ELEM)&&this._WIDGET_INSTANCE&&this._WIDGET_INSTANCE.__handleDisconnected()},HandleReattached:function(e){i.BaseCustomElementBridge.proto.HandleReattached.call(this,e),this._WIDGET_INSTANCE&&this._WIDGET_INSTANCE.__handleConnected()},InitializeBridge:function(e){i.BaseCustomElementBridge.proto.InitializeBridge.call(this,e);var t=i.BaseCustomElementBridge.__GetDescriptor(e.tagName);this._INNER_DOM_FUNCTION=t.innerDomFunction,this._EXTENSION=this.METADATA.extension||{},this._PROPS=this._EXTENSION._INNER_ELEM||this._INNER_DOM_FUNCTION?{_wrapper:e}:{},this._setupPropertyAccumulator(e,this._PROPS),this._processProperties(e)},_attributeChangedCallback:function(e,t,n){var o=i.BaseCustomElementBridge.getInstance(this);"disabled"===e&&o._disabledProcessed?null!=n&&(i.Logger.warn("Ignoring 'disabled' attribute change after component initialization. Use element property setter instead."),i.CustomElementBridge._removeDisabledAttribute(this)):i.BaseCustomElementBridge.proto._attributeChangedCallback.call(this,e,t,n)},_copyProperties:function(){if(this._COPY_ATTRS)for(var e=0;e<this._COPY_ATTRS.length;e++){var t=this._COPY_ATTRS[e],n=i.__AttributeUtils.attributeToPropertyName(t);if(this._PROPS.hasOwnProperty(n)){var o=this._PROPS[n];this._setCopyProperty(t,o),delete this._PROPS[n]}}},_getCopyProperty:function(e,t,n){var o=i.__AttributeUtils.propertyNameToAttribute(t);if(n.extension._ATTRIBUTE_ONLY){if(this._WIDGET_ELEM.hasAttribute(o)){var s,r=this._WIDGET_ELEM.getAttribute(o);try{s=i.__AttributeUtils.coerceValue(e,o,r,n.type)}catch(t){this._throwError(e,t)}return s}return null}return this._WIDGET_ELEM[t]},_processProperties:function(e){var t=i.BaseCustomElementBridge.getProperties(this,e);if(t)for(var n=Object.keys(t),o=0;o<n.length;o++){var s=n[o],r=t[s];r.writeback&&(this._WRITEBACK_PROPS||(this._WRITEBACK_PROPS={}),this._WRITEBACK_PROPS[s]=!0);var a=r.extension;a&&a._COPY_TO_INNER_ELEM&&(this._COPY_ATTRS||(this._COPY_ATTRS=[]),this._COPY_ATTRS.push(s))}},_setCopyProperty:function(e,t){null==t||!1===t?this._WIDGET_ELEM.removeAttribute(e):!0===t?this._WIDGET_ELEM.setAttribute(e,""):this._WIDGET_ELEM.setAttribute(e,t)},_setupPropertyAccumulator:function(e,t){this._WIDGET=function(n,o,s){if("option"===n)return o||s?(i.BaseCustomElementBridge.__SetProperty(this.GetAliasForProperty.bind(this),t,o,s),t[o]):t;this._throwError(e,"Cannot access methods before element is upgraded.")}},_validateAndSetCopyProperty:function(e,t,n,o){var s=i.__AttributeUtils.propertyNameToAttribute(t),r=this._COPY_ATTRS&&-1!==this._COPY_ATTRS.indexOf(s);if(r)if(n=this.ValidatePropertySet(e,t,n),this._WIDGET_ELEM){o||(o=i.BaseCustomElementBridge.__GetPropertyMetadata(t,i.BaseCustomElementBridge.getProperties(this,e)));var a=this._getCopyProperty(e,t,o);this._setCopyProperty(s,n),i.BaseCustomElementBridge.__FirePropertyChangeEvent(e,t,this._getCopyProperty(e,t,o),a,"external")}else this._PROPS[s]=n;return r},_setEventProperty:function(e,t,n){var o=!1;return i.__AttributeUtils.eventListenerPropertyToEventType(t)&&(e[t]=n,o=!0),o}}),i.CustomElementBridge.getMetadata=function(e){return i.CustomElementBridge._METADATA_MAP[e.toLowerCase()]},i.CustomElementBridge.isKnownEvent=function(e,t){var n=i.BaseCustomElementBridge.getInstance(e);return!!n&&null!=(n.METADATA.events&&n.METADATA.events[t])},i.CustomElementBridge.isKnownProperty=function(e,t){var n=i.BaseCustomElementBridge.getInstance(e);return!!n&&null!=(n.METADATA.properties&&n.METADATA.properties[t])},i.CustomElementBridge.getPropertyForAlias=function(e,t){var n=i.BaseCustomElementBridge.getInstance(e)._EXTENSION._COMPONENT_TO_ELEMENT_ALIASES;return n&&n[t]?n[t]:t},i.CustomElementBridge.register=function(e,t){var n=t[i.BaseCustomElementBridge.DESC_KEY_META].extension,o=n&&n._WIDGET_NAME?i.CustomElementBridge.proto:i.DefinitionalElementBridge.proto,s=n._ALIASED_PROPS;s&&(n._COMPONENT_TO_ELEMENT_ALIASES={},Object.keys(s).forEach(function(e){n._COMPONENT_TO_ELEMENT_ALIASES[s[e]]=e}));i.BaseCustomElementBridge.__Register(e,t,o)&&customElements.define(e.toLowerCase(),o.getClass(t))},i.CustomElementBridge.registerMetadata=function(e,t,n){if(n=i.BaseCustomElementBridge.__ProcessEventListeners(n,!0),t){var o=i.CollectionUtils.copyInto({},i.CustomElementBridge.getMetadata(t),void 0,!0);i.CustomElementBridge._METADATA_MAP[e.toLowerCase()]=i.CollectionUtils.copyInto(o,n,void 0,!0)}else i.CustomElementBridge._METADATA_MAP[e.toLowerCase()]=n},i.CustomElementBridge._getPropertyAccessor=function(e,t){return function(n){var o=i.BaseCustomElementBridge.getInstance(e);if(1!==arguments.length)return t=o.GetAliasForProperty(t),o._WIDGET("option",t);n=o.ValidatePropertySet(e,t,n),t=o.GetAliasForProperty(t),o._WIDGET("option",t,n)}.bind(e)},i.CustomElementBridge._getWidgetElement=function(e,t){var i=e;if(t){var n=e.firstElementChild;if(n&&n.tagName.toLowerCase()===t)i=n;else{i=document.createElement(t);for(var o=[],s=e.childNodes,r=0;r<s.length;r++)o.push(s[r]);for(e.appendChild(i);o.length;){var a=o.shift();a.hasAttribute&&a.hasAttribute("slot")||i.appendChild(a)}}i.setAttribute("data-oj-internal","")}return i},i.CustomElementBridge._removeDisabledAttribute=function(e){i.BaseCustomElementBridge.getInstance(e)._disabledProcessed=!0,e.removeAttribute("disabled")},i.CustomElementBridge._METADATA_MAP={};var w,R,x,L,N,P,M=function(){function e(){}return e.isIteratingDataProvider=function(e){return!!e.fetchFirst},e.isFetchByKeys=function(e){return!!e.fetchByKeys},e.isFetchByOffset=function(e){return!!e.fetchByOffset},e}();i.DataProviderFeatureChecker=M,i.DefinitionalElementBridge={},i.DefinitionalElementBridge.proto=Object.create(i.BaseCustomElementBridge.proto),i.CollectionUtils.copyInto(i.DefinitionalElementBridge.proto,{beforePropertyChangedEvent:function(e,t,i){var n=t,o=i.value;i.subproperty&&(n=i.subproperty.path,o=i.subproperty.value),this._partialRender(e,n,o)},AddComponentMethods:function(e){e.refresh=function(){i.BaseCustomElementBridge.getInstance(this)._fullRender(this)},e.setProperty=function(e,t){var n=i.BaseCustomElementBridge.getInstance(this);n.SaveEarlyPropertySet(e,t)||n.SetProperty(this,e,t,this,!0)},e.getProperty=function(e){return i.BaseCustomElementBridge.getInstance(this).GetProperty(this,e,this)},e._propsProto.setProperty=function(e,t){this._BRIDGE.SetProperty(this._ELEMENT,e,t,this,!1)},e._propsProto.getProperty=function(e){return this._BRIDGE.GetProperty(this,e,this)}},CreateComponent:function(e){i.Components.unmarkPendingSubtreeHidden(e),!this._INSTANCE&&this._EXTENSION._CONSTRUCTOR&&(this._CONTEXT={element:e,props:this._PROPS_PROXY,unique:i.BaseCustomElementBridge.__GetUnique()},this._CONTEXT.uniqueId=e.id?e.id:this._CONTEXT.unique,this._INSTANCE=new this._EXTENSION._CONSTRUCTOR(this._CONTEXT),this._INSTANCE.createDOM&&this._INSTANCE.createDOM(),this._INSTANCE.updateDOM&&this._INSTANCE.updateDOM()),this.__READY_TO_FIRE=!0,this.resolveDelayedReadyPromise()},DefineMethodCallback:function(e,t,n){e[t]=function(){var e=i.BaseCustomElementBridge.getInstance(this);if(e._INSTANCE){var o=n.internalName||t;return e._INSTANCE[o].apply(e._INSTANCE,arguments)}}},DefinePropertyCallback:function(e,t,n){var o=function(e,o){if(!this._BRIDGE.SaveEarlyPropertySet(t,e)){var s=this._BRIDGE._PROPS[t];i.BaseCustomElementBridge.__CompareOptionValues(t,n,e,s)||(o&&(e=this._BRIDGE.ValidatePropertySet(this._ELEMENT,t,e)),n._eventListener?(this._BRIDGE.SetEventListenerProperty(this._ELEMENT,t,e),this._BRIDGE._PROPS[t]=e):(this._BRIDGE._PROPS[t]=e,i.BaseCustomElementBridge.__FirePropertyChangeEvent(this._ELEMENT,t,e,s,o?"external":"internal")))}},s=function(){var e=this._BRIDGE._PROPS[t];return void 0===e&&(e=n.value,Array.isArray(e)?e=e.slice():"object"==typeof e&&(e=i.CollectionUtils.copyInto({},e,void 0,!0)),this._BRIDGE._PROPS[t]=e),e};n._derived||i.BaseCustomElementBridge.__DefineDynamicObjectProperty(e._propsProto,t,function(){return s.bind(this)()},function(e){o.bind(this)(e,!1)}),i.BaseCustomElementBridge.__DefineDynamicObjectProperty(e,t,function(){var e=i.BaseCustomElementBridge.getInstance(this);return s.bind(e._PROPS_PROXY)()},function(e){var t=i.BaseCustomElementBridge.getInstance(this);o.bind(t._PROPS_PROXY)(e,!0)})},InitializeElement:function(e){i.BaseCustomElementBridge.proto.InitializeElement.call(this,e),this._EXTENSION._CONTROLS_SUBTREE_HIDDEN&&i.Components.markPendingSubtreeHidden(e),i.BaseCustomElementBridge.__InitProperties(e,this._PROPS_PROXY)},InitializePrototype:function(e){i.BaseCustomElementBridge.proto.InitializePrototype.call(this,e),Object.defineProperty(e,"_propsProto",{value:{}})},InitializeBridge:function(e){i.BaseCustomElementBridge.proto.InitializeBridge.call(this,e),this._EXTENSION=this.METADATA.extension||{},this._PROPS={},e._propsProto&&(this._PROPS_PROXY=Object.create(e._propsProto),this._PROPS_PROXY._BRIDGE=this,this._PROPS_PROXY._ELEMENT=e)},_fullRender:function(e){this._INSTANCE&&this._INSTANCE.updateDOM&&this._INSTANCE.updateDOM()},_partialRender:function(e,t,i){if(this._INSTANCE){var n=this._INSTANCE.handlePropertyChanged;(!n||!n(t,i))&&this._INSTANCE.updateDOM&&this._INSTANCE.updateDOM()}}}),i.DomUtils={},i.DomUtils._HTML_START_TAG="<html>",i.DomUtils._HTML_END_TAG="</html>",i.DomUtils._LEGAL_ELEMENTS={SPAN:1,B:1,I:1,EM:1,BR:1,HR:1,LI:1,OL:1,UL:1,P:1,TT:1,BIG:1,SMALL:1,PRE:1},i.DomUtils._LEGAL_ATTRIBUTES={class:1,style:1},i.DomUtils.isHTMLContent=function(e){return 0===e.indexOf(i.DomUtils._HTML_START_TAG)&&e.lastIndexOf(i.DomUtils._HTML_END_TAG)===e.length-7},i.DomUtils.cleanHtml=function(e){var t=$(document.createElement("span")).get(0);return t.innerHTML=e,e&&e.indexOf("<")>=0&&i.DomUtils._cleanElementHtml(t),t},i.DomUtils._cleanElementHtml=function(e){for(var t,n,o,s,r=e.childNodes,a=r.length-1;a>=0;){if((t=r.item(a))&&1===t.nodeType)if(i.DomUtils._LEGAL_ELEMENTS[t.nodeName]){for(s=(n=t.attributes).length-1;s>=0;s--)o=n[s],void 0!==$(t).attr(o.name)&&(i.DomUtils._LEGAL_ATTRIBUTES[o.name]||t.removeAttribute(o.nodeName));i.DomUtils._cleanElementHtml(t)}else t&&e.removeChild(t);a--}},i.DomUtils.isAncestor=function(e,t){for(var i=t.parentNode;i;){if(i==e)return!0;i=i.parentNode}return!1},i.DomUtils.isAncestorOrSelf=function(e,t){return t==e||i.DomUtils.isAncestor(e,t)},i.DomUtils.addResizeListener=function(e,t,n){var o=$(e),s=o.data(i.DomUtils._RESIZE_TRACKER_KEY);null==s&&(s=new i.DomUtils._ResizeTracker(e),o.data(i.DomUtils._RESIZE_TRACKER_KEY,s),s.start()),s.addListener(t,n)},i.DomUtils.removeResizeListener=function(e,t){var n=$(e),o=n.data(i.DomUtils._RESIZE_TRACKER_KEY);null!=o&&(o.removeListener(t),o.isEmpty()&&(o.stop(),n.removeData(i.DomUtils._RESIZE_TRACKER_KEY)))},i.DomUtils.fixResizeListeners=function(e){$(e).find(".oj-helper-detect-expansion").parent().each(function(e,t){var n=$(t).data(i.DomUtils._RESIZE_TRACKER_KEY);null!=n&&n.init(!0)})},i.DomUtils.isMetaKeyPressed=function(e){var t=i.AgentUtils.getAgentInfo();return i.AgentUtils.OS.MAC===t.os?e.metaKey:e.ctrlKey},i.DomUtils.dispatchEvent=function(e,t){var i="disabled",n=e[i];try{e[i]=!1,e.dispatchEvent(t)}finally{e[i]=n}},i.DomUtils._invokeAfterPaint=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,0)}).bind(window),i.DomUtils._cancelInvokeAfterPaint=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||function(e){return window.clearTimeout(e)}).bind(window),i.DomUtils._ResizeTracker=function(e){var t=$.Callbacks(),n=[],o=[],s=2,r=0,a=null,l=null,u=null,h=null,d=null,c=null,p=null;function _(e){var t=!1;if(null!=h.offsetParent){var i=h.offsetWidth,n=h.offsetHeight;l===i&&u===n||(r=s,g(i,n),t=!0,e&&m(!0))}return t}function m(o){var s=e.offsetWidth,r=e.offsetHeight;t.has()&&(o?(null!==a&&i.DomUtils._cancelInvokeAfterPaint(a),a=i.DomUtils._invokeAfterPaint(function(){a=null,t.fire(s,r)})):t.fire(s,r));for(var l=0;l<n.length;l++)n[l].getCallback()(s,r)}function g(e,t){l=e,u=t;var i=h.firstChild.style,n=1;do{i.width=e+n+"px",i.height=t+n+"px",h.scrollLeft=h.scrollTop=n,n++}while((0==h.scrollTop||0==h.scrollLeft)&&n<=5);d.scrollLeft=e,d.scrollTop=t}this.addListener=function(e,s){void 0===s||0===s?t.add(e):(n.push(new i.DomUtils._collapsingListenerManager(e,s)),o.push(e))},this.removeListener=function(e){var i=o.indexOf(e);i>=0?(o.splice(i,1),n.splice(i,1)[0].stop()):t.remove(e)},this.isEmpty=function(){return!t.has()&&0==o.length},this.start=function(){if(p=function(e){e.stopPropagation(),_(!0)||r>0&&null!=h.offsetParent&&(0==h.scrollLeft||0==h.scrollTop)&&(r--,g(l,u))}.bind(this),e.attachEvent)c=function(){m(!1)}.bind(this),e.attachEvent("onresize",c);else{var t=e.childNodes[0];(h=document.createElement("div")).className="oj-helper-detect-expansion";var i=document.createElement("div");h.appendChild(i),null!=t?e.insertBefore(h,t):e.appendChild(h),h.addEventListener("scroll",p,!1),(d=document.createElement("div")).className="oj-helper-detect-contraction";var n=document.createElement("div");n.style.width="200%",n.style.height="200%",d.appendChild(n),e.insertBefore(d,h),d.addEventListener("scroll",p,!1),this.init(!1)}},this.stop=function(){null!=a&&(i.DomUtils._cancelInvokeAfterPaint(a),a=null),null!=h?(h.removeEventListener("scroll",p),d.removeEventListener("scroll",p),h.parentNode&&e.removeChild(h),d.parentNode&&e.removeChild(d)):e.detachEvent("onresize",c)},this.init=function(e){var t=_(e);e&&!t&&null!=h.offsetParent&&g(l,u)}},i.DomUtils._RESIZE_TRACKER_KEY="_ojResizeTracker",i.DomUtils.isValidIdentifier=function(e){return/^[A-Za-z][0-9A-Z_a-z-]*$/.test(e)},i.DomUtils._collapsingListenerManager=function(e,t){var i=null,n=null,o=function(){e.apply(null,i),n=null},s=function(){i=Array.prototype.slice.call(arguments),null==n&&(n=window.setTimeout(o,t))};this.getCallback=function(){return s},this.stop=function(){null!=n&&(window.clearTimeout(n),n=null)}},i.DomUtils.isTouchSupported=function(){return"ontouchstart"in window||navigator.msMaxTouchPoints>0||navigator.maxTouchPoints>0},i.DomUtils.setInKoCleanExternal=function(e){i.DomUtils._koCleanNode=e},i.DomUtils.unwrap=function(e,t){var n=i.DomUtils._koCleanNode;n&&e.get(0)===n||(t?t.replaceWith(e):e.unwrap())},i.DomUtils.isChromeEvent=function(e){function t(e){var t=e.target,n=$(t),o=t.getBoundingClientRect(),s=i.DomUtils.getScrollBarWidth(),r="ltr"===i.DomUtils.getReadingDirection();return!(!r||"HTML"!==t.nodeName&&"visible"===n.css("overflow-x")||!(e.clientX>o.right-s))||(!r&&"HTML"===t.nodeName&&e.clientX>o.left-s||(!r&&"visible"!==n.css("overflow-x")&&e.clientX<o.left+s||("HTML"===t.nodeName||"visible"!==n.css("overflow-y"))&&e.clientY>o.bottom-s))}if(!("clientX"in e&&"clientY"in e))return!1;var n=i.AgentUtils.getAgentInfo();return i.AgentUtils.OS.ANDROID!==n.os&&i.AgentUtils.OS.IOS!==n.os&&(i.AgentUtils.ENGINE.GECKO===n.engine?function(e){try{return!e.originalTarget.localName}catch(e){return!0}}(e):i.AgentUtils.ENGINE.WEBKIT===n.engine||i.AgentUtils.ENGINE.BLINK===n.engine?t(e):i.AgentUtils.BROWSER.IE===n.browser&&function(e){return t(e)}(e))},i.DomUtils.getScrollBarWidth=function(){var e=i.DomUtils._scrollBarWidth;if($.isNumeric(e))return e;var t=$("<div />");$(document.body).append(t),t.width(50).height(50).css({overflow:"scroll",visibility:"hidden",position:"absolute"});var n=$("<div />");n.height(1),t.append(n);var o=n.width(),s=t.width();return t.remove(),e=i.DomUtils._scrollBarWidth=s-o},i.DomUtils.getReadingDirection=function(){var e=document.documentElement.getAttribute("dir");return e&&(e=e.toLowerCase()),"rtl"===e?"rtl":"ltr"},i.DomUtils.getScrollLeft=function(e){if("rtl"===i.DomUtils.getReadingDirection()){var t=i.AgentUtils.getAgentInfo().browser;return t===i.AgentUtils.BROWSER.FIREFOX||t===i.AgentUtils.BROWSER.IE||t===i.AgentUtils.BROWSER.EDGE?Math.abs(e.scrollLeft):Math.max(0,e.scrollWidth-e.clientWidth-e.scrollLeft)}return e.scrollLeft},i.DomUtils.setScrollLeft=function(e,t){if("rtl"===i.DomUtils.getReadingDirection()){var n=i.AgentUtils.getAgentInfo().browser;n===i.AgentUtils.BROWSER.FIREFOX?e.scrollLeft=-t:n===i.AgentUtils.BROWSER.IE||n===i.AgentUtils.BROWSER.EDGE?e.scrollLeft=t:e.scrollLeft=Math.max(0,e.scrollWidth-e.clientWidth-t)}else e.scrollLeft=t},i.DomUtils.getCSSLengthAsInt=function(e){if(!isNaN(e))return parseInt(e,10);if(e&&e.length>0&&"auto"!=e){var t=parseInt(e,10);return isNaN(t)&&(t=0),t}return 0},i.DomUtils.getCSSLengthAsFloat=function(e){if(!isNaN(e))return parseFloat(e);if(e&&e.length>0){var t=parseFloat(e);return isNaN(t)&&(t=0),t}return 0},i.DomUtils._LOGICAL_PARENT_DATA="oj-logical-parent",i.DomUtils.getLogicalParent=function(e){if(e)return e.data(i.DomUtils._LOGICAL_PARENT_DATA)},i.DomUtils.setLogicalParent=function(e,t){e&&(null===t?e.removeData(i.DomUtils._LOGICAL_PARENT_DATA):e.data(i.DomUtils._LOGICAL_PARENT_DATA,t))},i.DomUtils.isLogicalAncestorOrSelf=function(e,t){i.Assert.assertDomElement(e),i.Assert.assertDomElement(t);for(var n=t;n;){if(n==e)return!0;var o=i.DomUtils.getLogicalParent($(n));n=o?o[0]:n.parentNode}return!1},i.DomUtils.validateURL=function(e,t){var i=t||["http:","https:"],n=document.createElement("a");n.href=e;var o=n.protocol;if(null!=o&&(o=o.toLowerCase()),i.indexOf(o)<0)throw o+" is not a valid URL protocol"},i.DomUtils._supressNativeContextMenu=function(){$(document.body).hasClass("oj-hybrid")&&document.body.addEventListener("contextmenu",function(e){e.preventDefault()},!0)},i.DomUtils._supressNativeContextMenu(),i.DomUtils.PRESS_HOLD_THRESHOLD=750,i.DomUtils.recentTouchEnd=function(){var e=0;function t(){e=Date.now()}return document.addEventListener("touchend",t,!0),document.addEventListener("touchcancel",t,!0),function(){return Date.now()-e<500}}(),i.DomUtils.recentTouchStart=function(){var e=0,t=i.DomUtils.PRESS_HOLD_THRESHOLD+50;return document.addEventListener("touchstart",function(){e=Date.now()},!0),function(){return Date.now()-e<t}}(),i.DomUtils.recentPointer=(R=0,x=i.DomUtils.PRESS_HOLD_THRESHOLD+600,document.addEventListener("mousedown",function(){var e=Date.now();(!w||e>R+i.DomUtils.PRESS_HOLD_THRESHOLD)&&(R=e,w=!1)},!0),document.addEventListener("touchstart",function(){R=Date.now(),w=!0},!0),document.addEventListener("mouseup",function(){R=Date.now(),w=!1},!0),document.addEventListener("touchend",function(){R=Date.now(),w=!1},!0),function(){return Date.now()-R<(w?x:600)}),i.DomUtils.makeFocusable=(L=0,N=(i.ThemeUtils.parseJSONFromFontFamily("oj-focus-config")||{}).focusHighlightPolicy,function(e){var t=e.element,n="ojFocusable";if(e.remove){t.removeClass("oj-focus oj-focus-highlight");var o=t.data(n);if(null==o)return;var s=".ojFocusable"+(""+o).split(",").join(" .ojFocusable");t.off(s).removeData(n)}else{var r=e.afterToggle||$.noop,a=e.applyHighlight?function(t){t.addClass("oj-focus"),function(e,t){switch(e?e():N){case"all":return!0;case"none":return!1;default:return!(i.DomUtils.recentPointer()||t&&t())}}(e.getFocusHighlightPolicy,e.recentPointer)&&t.addClass("oj-focus-highlight"),r("focusin")}:function(e){e.addClass("oj-focus"),r("focusin")};(e.setupHandlers||function(i,o){var s=e.component,r=function(e){i($(e.currentTarget))},a=function(e){o($(e.currentTarget))};if(s)s._on(t,{focusin:r,focusout:a});else{var l=L++,u=t.data(n);t.data(n,null==u?l:u+","+l);var h={},d=".ojFocusable"+l;h["focusin"+d]=r,h["focusout"+d]=a,t.on(h)}})(a,function(e){e.removeClass("oj-focus oj-focus-highlight"),r("focusout")})}}),i.FocusUtils={},i.FocusUtils._TABBABLE=":tabbable",i.FocusUtils.containsFocus=function(e){var t=document.activeElement;return!(!e||!t)&&i.DomUtils.isAncestorOrSelf(e,t)},i.FocusUtils.focusElement=function(e){e.focus()},i.FocusUtils.focusFirstTabStop=function(e){var t=i.FocusUtils.getFirstTabStop(e);return t&&i.FocusUtils.focusElement(t),t},i.FocusUtils.getFirstTabStop=function(e){var t=$(e);if(t.is(i.FocusUtils._TABBABLE))return e;var n=t.find(i.FocusUtils._TABBABLE);return n&&n.length>0?n[0]:null},i.FocusUtils.isFocusable=function(e){return!!$(e).is(":focusable")&&!("A"===e.nodeName&&!e.hasAttribute("tabindex")&&i.AgentUtils.getAgentInfo().browser===i.AgentUtils.BROWSER.SAFARI)},i.GestureUtils={},i.GestureUtils._EVENT_NAMESPACE=".contextMenu",i.GestureUtils.stopDetectContextMenuGesture=function(e){$(e).off(i.GestureUtils._EVENT_NAMESPACE).removeClass("oj-menu-context-menu-launcher")[0].removeEventListener("click",e._clickListener,!0),clearTimeout(e._contextMenuPressHoldTimer)},i.GestureUtils.startDetectContextMenuGesture=function(e,t){var n,o,s,r,a=i.DomUtils.PRESS_HOLD_THRESHOLD,l=!1,u=!1,h=null,d=i.GestureUtils._EVENT_NAMESPACE,c=!1,p=function(i,n,o){if((l=o)&&$(e).one("touchend"+d,function(e){c=!0,setTimeout(function(){c=!1},50)}),"touchstart"===h&&"contextmenu"===i.type||"contextmenu"===h&&"touchstart"===i.type)return h=null,void clearTimeout(r);i.isDefaultPrevented()||i.originalEvent&&i.originalEvent.defaultPrevented||(t(i,n),i.isDefaultPrevented()&&("touchstart"!==i.type&&"contextmenu"!==i.type||(h=i.type,r=setTimeout(function(){h=null},300))))},_=function(e){l&&(e.preventDefault(),e.stopPropagation(),l=!1)};e._clickListener=_,e.addEventListener("click",_,!0),$(e).on("touchstart"+d+" mousedown"+d+" keydown"+d+" ",function(t){if("mousedown"!==t.type||!c){if(l=!1,"touchstart"===t.type&&1===t.originalEvent.touches.length){var i=t.originalEvent.touches[0];o=i.pageX,s=i.pageY,u=!0,n=setTimeout(p.bind(void 0,t,"touch",!0),a),e._contextMenuPressHoldTimer=n}return!0}}).on("touchmove"+d,function(e){var t=e.originalEvent.touches[0];return(Math.abs(o-t.pageX)>5||Math.abs(s-t.pageY)>5)&&(u=!1,clearTimeout(n)),!0}).on("touchend"+d+" touchcancel"+d,function(e){return u=!1,clearTimeout(n),!0}).on("keydown"+d+" contextmenu"+d,function(e){if("contextmenu"===e.type||121==e.which&&e.shiftKey){var t=u?"touch":"keydown"===e.type?"keyboard":"mouse";p(e,t,!1)}return!0}),i.DomUtils.isTouchSupported()&&$(e).addClass("oj-menu-context-menu-launcher")},$(document).ready(function(){var e,t;(t=$("<div style='border: 1px solid;border-color:red green;position: absolute;top: -999px;background-image: url(data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACwAAAAAAQABAAACAkQBADs=);'></div>")).appendTo("body"),e=t.css("backgroundImage"),t.css("borderTopColor")!=t.css("borderRightColor")&&(null==e||"none"!=e&&"url (invalid-url:)"!=e)||$("body").addClass("oj-hicontrast"),t.remove()}),i.Test={},i.Test.ready=!1,i.Test.domNodeForLocator=function(e){var t=e;if(i.StringUtils.isString(e)){var n=e;try{t=JSON.parse(n)}catch(e){return null}}if(t&&t.element){var o=$(t.element);if(o){delete t.element;var s=t;return i.Components.getNodeBySubId(o[0],s)}}return null},i.Test.getOpenPopupCount=function(){return i.ZOrderUtils.getOpenPopupCount()},i.Test.findOpenPopups=function(){return i.ZOrderUtils.findOpenPopups()},i.Test.compareStackingContexts=function(e,t){return i.ZOrderUtils.compareStackingContexts(e,t)},$.cleanData=(P=$.cleanData,function(e){var t,n,o=[];for(t=0;null!=(n=e[t]);t++){var s=!1,r=i.Components.__GetWidgetConstructor(n);if(r&&!(s=r("instance")._IsCustomElement())){var a=i.Components.getComponentElementByNode(n);s=a&&i.BaseCustomElementBridge.getRegistered(a.tagName)}s||o.push(n)}o.length>0&&P(o)}),i.CustomElementBridge.registerMetadata("baseComponent",null,{properties:{translations:{type:"Object"}},methods:{getNodeBySubId:{},getSubIdByNode:{},refresh:{}},extension:{_WIDGET_NAME:"baseComponent"}}),i.EditableValueUtils={},i.EditableValueUtils.validationContext={COMPONENT_CREATE:1,CONVERTER_OPTION_CHANGE:2,DISABLED_OPTION_CHANGE:3,READONLY_OPTION_CHANGE:4,REFRESH_METHOD:5,REQUIRED_OPTION_CHANGE:6,RESET_METHOD:7,USER_ACTION:8,VALIDATE_METHOD:9,VALIDATORS_OPTION_CHANGE:10,VALUE_OPTION_CHANGE:11},i.EditableValueUtils.validateMethodOptions={doValueChangeCheck:!1,validationContext:i.EditableValueUtils.validationContext.VALIDATE_METHOD},i.EditableValueUtils.converterOptionOptions={doNotClearMessages:!0,validationContext:i.EditableValueUtils.validationContext.CONVERTER_OPTION_CHANGE},i.EditableValueUtils.disabledOptionOptions={doNotClearMessages:!0,validationContext:i.EditableValueUtils.validationContext.DISABLED_OPTION_CHANGE},i.EditableValueUtils.requiredOptionOptions={doNotClearMessages:!0,validationContext:i.EditableValueUtils.validationContext.REQUIRED_OPTION_CHANGE},i.EditableValueUtils.readOnlyOptionOptions={doNotClearMessages:!0,validationContext:i.EditableValueUtils.validationContext.READONLY_OPTION_CHANGE},i.EditableValueUtils.refreshMethodOptions={doNotClearMessages:!0,validationContext:i.EditableValueUtils.validationContext.REFRESH_METHOD},i.EditableValueUtils.validatorsOptionOptions={doNotClearMessages:!0,validationContext:i.EditableValueUtils.validationContext.VALIDATORS_OPTION_CHANGE};i.EditableValueUtils.CUSTOM_LABEL_ELEMENT_ID="|label",i.EditableValueUtils.VALIDATE_VALUES={VALID:"valid",INVALID:"invalid"},i.EditableValueUtils.getAttributeValue=function(e,t){var i,n,o,s={};if(e&&t)switch(t){case"disabled":i=void 0!==e.attr("disabled")?!!e.prop("disabled"):void 0;break;case"pattern":i=e.prop("pattern")||void 0;break;case"placeholder":i=e.prop("placeholder")||void 0;break;case"readonly":i=void 0!==e.attr("readonly")?!!e.prop("readonly"):void 0;break;case"required":n=e.attr("required"),o=e.prop("required"),i=void 0!==n?void 0!==o?!!o:!!n:void 0;break;case"title":i=void 0!==e.attr("title")?e.prop("title"):void 0;break;case"value":i=e.val()||void 0;break;case"min":case"max":default:i=e.attr(t)||void 0}return void 0!==i?(s.fromDom=!0,s.value=i):s.fromDom=!1,s},i.EditableValueUtils.initializeOptionsFromDom=function(e,t,n,o){for(var s={},r=0;r<e.length;r++){var a,l,u=e[r],h=u.attribute,d=u.option||h,c=u.coerceDomValue,p=u.validateOption,_=n.element,m=n.options[d];void 0===t[d]&&(m=n.options[d],(l=i.EditableValueUtils.getAttributeValue(_,h)).fromDom&&(a=l.value,c&&("boolean"==typeof c?a=i.EditableValueUtils.coerceDomValueForOption(d,a):"function"==typeof c&&(a=c.call(n,a))),s[d]=a));var g=d in s?s[d]:m;p&&"boolean"==typeof p&&i.EditableValueUtils.validateValueForOption(d,g)}null!=o&&o(s),n.option(s,{_context:{writeback:!0,internalSet:!0}})},i.EditableValueUtils.validateValueForOption=function(e,t){var i=!1;switch(e){case"required":null!==t&&"boolean"!=typeof t&&(i=!0);break;case"readOnly":case"disabled":null!==t&&"boolean"!=typeof t&&(i=!0)}if(i)throw"Option '"+e+"' has invalid value set: "+t},i.EditableValueUtils.coerceDomValueForOption=function(e,t){var i=t;switch(e){case"required":i=!!t}return i},i.EditableValueUtils.setPickerAttributes=function(e,t){if(e&&t){var i=t.class;i&&e.addClass(i);var n=t.style;if(n){var o=e.attr("style");o?e.attr("style",o+";"+n):e.attr("style",n)}}},i.EditableValueUtils.getOjLabelId=function(e,t){var n,o,s,r,a,l,u;if(n=e[0].id,s=0===(o=e.siblings("[for='"+n+"']")).length?document.querySelector("oj-label[for='"+n+"']"):o[0]){if(u=s.getAttribute("label-id"))return u;if(r=s.id)return r+i.EditableValueUtils.CUSTOM_LABEL_ELEMENT_ID;if((a=s.querySelector("label"))&&(l=a.id),l)return l;if(t)return s.setAttribute("label-id",t),t}return null},i.EditableValueUtils.validate=function(){var e=this;if(this._IsCustomElement()){return Promise.resolve(e._ValidateReturnBoolean()?i.EditableValueUtils.VALIDATE_VALUES.VALID:i.EditableValueUtils.VALIDATE_VALUES.INVALID)}return this._ValidateReturnBoolean()},i.EditableValueUtils._ValidateReturnBoolean=function(){return this._SetValue(this._GetDisplayValue(),null,this._VALIDATE_METHOD_OPTIONS)},i.EditableValueUtils.setSubIdForCustomLabelFor=function(e,t){e.setAttribute("id",t+"|input")},i.EditableValueUtils._updateLabelledBy=function(e,t,n){var o=i.EditableValueUtils.CUSTOM_LABEL_ELEMENT_ID;this._IsCustomElement()&&(e&&(e+=o),t&&(t+=o),e&&i.EditableValueUtils._removeAriaLabelledBy(n,e),t&&i.EditableValueUtils._addAriaLabelledBy(n,t))},i.EditableValueUtils._refreshRequired=function(e){var t,i,n,o=this._AriaRequiredUnsupported();this._refreshTheming("required",e),o||(i=this._GetContentElement(),(n=e)&&i?i.attr("aria-required",n):i.removeAttr("aria-required")),this._IsCustomElement()||(this.$label||this._createOjLabel(),this.$label&&(this.$label.ojLabel("option","showRequired",e),o&&(t=this._getAriaLabelledById(this.element))&&(e?this._addAriaDescribedBy(t+"_requiredIcon"):this._removeAriaDescribedBy(t+"_requiredIcon"))))},i.EditableValueUtils._AfterSetOptionRequired=function(e){this._refreshRequired(this._IsRequired()),this._runMixedValidationAfterSetOption(i.EditableValueUtils.requiredOptionOptions)},i.EditableValueUtils._AfterSetOptionValidators=function(){var e=!1;this._ResetAllValidators(),this._hasInvalidMessagesShowing()&&(e=!0),e&&(this._clearComponentMessages(),this._updateValue(i.EditableValueUtils.validatorsOptionOptions))},i.EditableValueUtils._AfterSetOptionConverter=function(e){var t=!1;this._ResetConverter(),this._hasInvalidMessagesShowing()&&(t=!0),t?(this._clearComponentMessages(),this._updateValue(i.EditableValueUtils.converterOptionOptions)):this._Refresh(e,this.options[e],!0)},i.EditableValueUtils._ResetConverter=function(){this._converter=null,this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.CONVERTER_HINT))},i.EditableValueUtils._GetNormalizedValidatorsFromOption=function(){var e,t,n,o,s,r,a=!0,l=[];if(n=this.options.validators)for(e=0;e<n.length;e++)"object"==typeof(t=n[e])?(t.validate&&"function"==typeof t.validate||(a=!1),a||(r=t.type)&&"string"==typeof r&&((s=i.Validation.validatorFactory(r))?((o=i.CollectionUtils.copyInto({},t.options)||{}).converter=o.converter||this._GetConverter(),o.label=o.label||this._getLabelText(),t=s.createValidator(o)):i.Logger.error("Unable to locate a validatorFactory for the requested type: "+r)),l.push(t)):i.Logger.error("Unable to parse the validator provided:"+t);return l},i.EditableValueUtils._GetConverter=function(){var e;return this._converter||(e=this.options.converter,this._converter=i.IntlConverterUtils.getConverterInstance(e)),this._converter||null},i.EditableValueUtils._addAriaLabelledBy=function(e,t){e.each(function(){var e,i=$(this).attr("aria-labelledby");e=i?i.split(/\s+/):[],-1===$.inArray(t,e)&&e.push(t),i=$.trim(e.join(" ")),$(this).attr("aria-labelledBy",i)})},i.EditableValueUtils._removeAriaLabelledBy=function(e,t){var i;e.each(function(){var e,n;n=(i=$(this).attr("aria-labelledby"))?i.split(/\s+/):[],-1!==(e=$.inArray(t,n))&&n.splice(e,1),(i=$.trim(n.join(" ")))?$(this).attr("aria-labelledby",i):$(this).removeAttr("aria-labelledby")})},i.EditableValueUtils._SetInputType=function(e){var t="text",n=i.AgentUtils.getAgentInfo();n.os!==i.AgentUtils.OS.ANDROID&&n.os!==i.AgentUtils.OS.IOS&&n.os!==i.AgentUtils.OS.WINDOWSPHONE||e.indexOf(this.options.virtualKeyboard)>=0&&(t=this.options.virtualKeyboard),this.element.attr("type",t)};i.__registerWidget("oj.editableValue",$.oj.baseComponent,{widgetEventPrefix:"oj",options:{describedBy:null,disabled:!1,displayOptions:void 0,help:void 0,helpHints:{definition:"",source:""},labelHint:"",messagesCustom:[],messagesHidden:void 0,messagesShown:void 0,title:"",valid:void 0,value:void 0,animateStart:null,animateEnd:null},getNodeBySubId:function(e){var t;if(!(t=this._super(e))&&!this._IsCustomElement()&&"oj-label-help-icon"===e.subId){var i=this._GetLabelElement();i&&(t=i.parent().find(".oj-label-help-icon"))}return t||null},getSubIdByNode:function(e){var t,i,n,o=null;return null!=e&&null!=(t=$(e).closest("a.oj-label-help-icon"))&&null!=(i=t.closest(".oj-label"))&&(n=i.find("label")[0])&&n==this._GetLabelElement()[0]&&(o={subId:"oj-label-help-icon"}),o},isValid:function(){return void 0===this._valid&&(this._valid=!this._hasInvalidMessages()),this._valid},refresh:function(){this._super(),this._doRefresh(!0)},reset:function(){this._clearAllMessages(),this._runDeferredValidation(this._VALIDATION_CONTEXT.RESET_METHOD),this._refreshComponentDisplayValue(this.options.value,!0)},showMessages:function(){var e,t,n,o=[],s=this.options.messagesHidden,r=s.length>0;for(e=0;e<s.length;e++)(t=s[e])instanceof i.ComponentMessage?(t._forceDisplayToShown(),n=t.clone()):n=new i.Message(t.summary,t.detail,t.severity),o.push(n);r&&(this._clearMessages("messagesHidden"),this._updateMessagesOption("messagesShown",o),this._setValidOption(null))},_VALIDATION_MODE:{FULL:1,VALIDATORS_ONLY:2,REQUIRED_VALIDATOR_ONLY:3},_VALIDATION_CONTEXT:i.EditableValueUtils.validationContext,_VALIDATE_METHOD_OPTIONS:i.EditableValueUtils.validateMethodOptions,_InitOptions:function(e,t){if(this._super(e,t),this._IsCustomElement()){var i=this.options.help;if(null!=i)null!=(n=i.instruction)&&(this.options.title=n);var n,o=this.options.displayOptions;if(null!=o)null!=(n=o.helpInstruction)&&(o.title=n,this.options.displayOptions=o)}},_ComponentCreate:function(){var e=this.element,t=this._GetSavedAttributes(e);if(this._super(),this.options.messagesCustom=this.options.messagesCustom||[],this.options.messagesHidden=[],this.options.messagesShown=this.options.messagesCustom.length>0?this._cloneMessagesBeforeSet(this.options.messagesCustom):[],this._SetDisabledDom(e),this._HasPlaceholderSet()&&(this._SetPlaceholder(this.options.placeholder),this._customPlaceholderSet=!0),t&&!this._IsCustomElement()){var i=e[0].tagName.toLowerCase();"input"!==i&&"textarea"!==i||$.each(["required","title","pattern"],function(i,n){n in t&&e.removeAttr(n)})}},_AfterCreate:function(){var e;this._super(),this._doRefresh(!1),this._IsCustomElement()?(void 0===this.customOjLabelElement&&(this.customOjLabelElement=this._getCustomOjLabelElement()),this.customOjLabelElement&&$(this.customOjLabelElement).addClass(this._GetDefaultStyleClass()+"-label")):this._createOjLabel(),(e=this.options.describedBy)&&this._addAriaDescribedBy(e),this._initComponentMessaging(),this._runDeferredValidation(this._VALIDATION_CONTEXT.COMPONENT_CREATE),this.options.messagesShown.length>0&&this._setMessagesOption("messagesShown",this.options.messagesShown,null,!0),this.widget().addClass("oj-form-control")},_SaveAttributes:function(e){this._IsCustomElement()||this._SaveAllAttributes(e)},_RestoreAttributes:function(e){this._IsCustomElement()||this._RestoreAllAttributes(e)},_AfterSetOption:function(e,t){switch(e){case"disabled":this._AfterSetOptionDisabledReadOnly(e,i.EditableValueUtils.disabledOptionOptions);break;case"displayOptions":if(this._IsCustomElement()){var n=this.options.displayOptions;if(null!=n){var o=n.helpInstruction;null!=o&&(n.title=o,this.options.displayOptions=n)}}this._initComponentMessaging();break;case"help":this._IsCustomElement()||this._Refresh(e,this.options[e]),this._IsCustomElement()&&(this.options.title=this.options.help.instruction,this._titleOptionChanged());break;case"messagesCustom":this._messagesCustomOptionChanged(t),this._setValidOption(null);break;case"placeholder":this._placeholderOptionChanged(t);break;case"title":this._titleOptionChanged();break;case"translations":this.refresh();break;case"value":this._AfterSetOptionValue(e,t)}},_AfterSetOptionDisabledReadOnly:function(e,t){var i=!this.options[e];this._Refresh(e,this.options[e]),i&&this._runMixedValidationAfterSetOption(t)},_AfterSetOptionValue:function(e,t){var i,n=t?t._context:null,o=!1;n&&(o=!!n.originalEvent,i=n.doNotClearMessages||!1),o||(i||this._clearAllMessages(null),this._runDeferredValidation(this._VALIDATION_CONTEXT.VALUE_OPTION_CHANGE)),this._Refresh(e,this.options[e],!0)},_CanSetValue:function(){return!(this.options.disabled||!1)},_destroy:function(){var e,t,n=this._super();if(this._clearAllMessages(null,!0),this._getComponentMessaging().deactivate(),this.$label)for(t=this.$label.length,e=0;e<t;e++)this.$label[e]&&null!=i.Components.__GetWidgetConstructor(this.$label[e])&&$(this.$label[e]).ojLabel("destroy");return n},GetFocusElement:function(){return this._GetContentElement()[0]},_setOption:function(e,t,n){var o,s,r,a=!1;if("string"==typeof e&&void 0!==t)switch(e){case"messagesHidden":case"messagesShown":case"rawValue":a=!0;break;case"describedBy":r=t,(s=this.options.describedBy)&&this._removeAriaDescribedBy(s),r&&this._addAriaDescribedBy(r)}return a?(i.Logger.error(e+" option cannot be set"),this):(o=this._superApply(arguments),this._AfterSetOption(e,n),o)},_GetContentElement:function(){return this.element},_GetLabelElement:function(){var e;if(this.$label)return this.$label;var t=this._getAriaLabelledByElement(this.element);if(null!==t&&0!==t.length)return t;var i=this.element.prop("id");return void 0!==i&&0!==(t=$("label[for='"+i+"']")).length?t:0!==(e=this.element.closest("[aria-labelledby]")).length&&null!==(t=this._getAriaLabelledByElement(e))&&0!==t.length?t:null},_GetElementValue:function(){return this.element.val()},_GetMessagingLauncherElement:function(){return this._GetContentElement()},_GetConverter:function(){return null},_GetImplicitValidators:function(){return this._implicitValidators||(this._implicitValidators={}),this._implicitValidators},_GetDisplayValue:function(e){return this._GetContentElement().val()},_GetNormalizedValidatorsFromOption:function(){return[]},_GetAllValidators:function(){var e,t,i,n,o;if(!this._allValidators){e=[],i=this._GetImplicitValidators(),n=[];var s,r=Object.keys(i),a=r.length;if(a>0){for(t=0;t<a;t++)s=r[t],n.push(i[s]);e=e.concat(n)}(o=this._GetNormalizedValidatorsFromOption()).length>0&&(e=e.concat(o)),this._allValidators=e}return this._allValidators||[]},_ResetAllValidators:function(){this._allValidators&&(this._allValidators.length=0),this._allValidators=null,this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDATOR_HINTS))},_IsRequired:function(){return!1},_HandleChangeEvent:function(e){var t=this._GetDisplayValue();this._SetValue(t,e)},_SetRawValue:function(e,t){var i={};i._context={originalEvent:t,writeback:!0,internalSet:!0,readOnly:!0},this._CompareOptionValues("rawValue",this.options.rawValue,e)||this.option("rawValue",e,i)},_Refresh:function(e,t,i){var n,o;switch(e){case"converter":t=this.options.value,this._refreshComponentDisplayValue(t,i);break;case"disabled":this._refreshTheming("disabled",this.options.disabled);break;case"help":this._IsCustomElement()||this.$label&&(n=this.options.help.definition,o=this.options.help.source,this.$label.ojLabel("option","help",{definition:n,source:o}),this._refreshDescribedByForLabel());break;case"value":this._refreshComponentDisplayValue(t,i)}},_NotifyHidden:function(){this._superApply(arguments),this._getComponentMessaging().close()},_NotifyDetached:function(){this._superApply(arguments),this._getComponentMessaging().close()},_ResetComponentState:function(){this.$label&&this.$label.ojLabel("refresh"),this._implicitReqValidator=null,this._converter=null,this._ResetAllValidators()},_SetDisplayValue:function(e){var t=this._GetContentElement();t.val()!==e&&t.val(e)},_SetDisabledDom:function(e){"boolean"==typeof this.options.disabled&&e.prop("disabled",this.options.disabled)},_SetPlaceholder:function(e){this._GetContentElement().attr("placeholder",e)},_SetPlaceholderOption:function(e){this.options.placeholder=e},_HasPlaceholderSet:function(){return this.options.placeholder},_ClearPlaceholder:function(){this._SetPlaceholderOption(""),this._SetPlaceholder("")},_SetValue:function(e,t,n){var o,s,r=!n||"boolean"!=typeof n.doValueChangeCheck||n.doValueChangeCheck;if(void 0===e)return i.Logger.warn("Attempt to set a value of undefined"),!1;if(r&&e===this._getLastDisplayValue())i.Logger.level>i.Logger.LEVEL_WARN&&i.Logger.info((e.toString,e.toString()));else if(o=this._Validate(e,t,n),this._setValidOption(t),void 0!==o&&this.isValid())return n&&n._context&&(s=n._context),this._updateValueOption(o,t,n&&n.validationContext,s),!0;return!1},_Validate:function(e,t,n){var o=n&&n.validationMode?n.validationMode:this._VALIDATION_MODE.FULL,s=n&&n.validationContext?n.validationContext:this._VALIDATION_CONTEXT.USER_ACTION,r=n&&n.doNotClearMessages||!1;if(void 0===e)i.Logger.warn("Attempt to set a value of undefined");else if(this._CanSetValue()){r||this._clearAllMessages(t),this._setLastSubmittedValue(e);try{return this._runNormalValidation(e,o,s,t)}catch(e){}}else i.Logger.level>i.Logger.LEVEL_WARN&&i.Logger.info("Validation skipped and value option not set as component state does not  allow setting value. For example if the component is readonly or disabled.")},_CompareOptionValues:function(e,t,n){return"value"===e||"rawValue"===e?i.Object.compareValues(t,n):0===e.indexOf("messages")?this._messagesEquals(t,n):this._superApply(arguments)},_GetDefaultStyleClass:function(){return i.Assert.failedInAbstractFunction(),""},_MESSAGING_CONTENT_UPDATE_TYPE:{ALL:1,VALIDITY_STATE:2,CONVERTER_HINT:3,VALIDATOR_HINTS:4,TITLE:5},_OPTION_TO_CSS_MAPPING:{disabled:"oj-disabled",required:"oj-required"},_clearAllMessages:function(e,t){(t=!!t)?(this.options.messagesHidden=[],this.options.messagesShown=[],this.options.messagesCustom=[]):(this._clearMessages("messagesHidden",e),this._clearMessages("messagesShown",e),this._clearMessages("messagesCustom",e))},_clearComponentMessages:function(){var e,t=this.options.messagesShown;e=t.length,this._clearMessages("messagesHidden");for(var n=e-1;n>=0;n--)t[n]instanceof i.ComponentMessage&&t.splice(n,1);t.length!==e&&this._setMessagesOption("messagesShown",t,null,!0)},_setMessagesOption:function(e,t,i,n){var o={},s=0===t.length&&0===this.options[e].length;!n&&s||(o._context={originalEvent:i,writeback:!0,internalSet:!0},"messagesCustom"!==e&&(o._context.readOnly=!0),o.changed=n||!s,this._resetValid(),this.option(e,t,o),this._updateMessagingContent())},_setValidOption:function(e){var t={};t._context={originalEvent:e,writeback:!0,internalSet:!0,readOnly:!0},this.option("valid",this._determineValid(),t)},_clearMessages:function(e,t){this._setMessagesOption(e,[],t)},_cloneMessagesBeforeSet:function(e){var t,n,o,s=[];if(e&&e.length>0)for(t=0;t<e.length;t++)o=e[t],n=new i.Message(o.summary,o.detail,o.severity),n=Object.freeze?Object.freeze(n):n,s.push(n);return s},_createOjLabel:function(){var e,t;this._IsCustomElement()||(this.$label=this._GetLabelElement(),this.$label&&(e=this.options.help.definition,t=this.options.help.source,this.$label.ojLabel({rootAttributes:{class:this._GetDefaultStyleClass()+"-label"},help:{definition:e,source:t}}),this._createDescribedByForLabel()))},_createDescribedByForLabel:function(){var e,t=this.options.help.definition;null==this.options.help.source&&null==t||(e=this.$label.attr("id"))&&this._addAriaDescribedBy(e+"_helpIcon")},_refreshDescribedByForLabel:function(){var e=this.options.help.definition,t=this.options.help.source,i=this.$label.attr("id");i&&(null!=t||null!=e?this._addAriaDescribedBy(i+"_helpIcon"):this._removeAriaDescribedBy(i+"_helpIcon"))},_doRefresh:function(e){var t=!1;(e=e||!1)?(this._ResetComponentState(),this._initComponentMessaging(),this._hasInvalidMessagesShowing()&&(t=!0),this._clearComponentMessages(),t?this._updateValue(i.EditableValueUtils.refreshMethodOptions):(this._IsRequired()&&this._runDeferredValidation(i.EditableValueUtils.refreshMethodOptions.validationContext),this._Refresh("value",this.options.value,!0))):this._Refresh("value",this.options.value),this._Refresh("disabled",this.options.disabled)},_getLastModelValue:function(){return this._oj_lastModelValue},_getLastDisplayValue:function(){return void 0===this._oj_lastElementValue&&(this._oj_lastElementValue=""),this._oj_lastElementValue},_getAriaLabelledByElement:function(e){var t=e.attr("aria-labelledby");return void 0!==t?$("label[id='"+t+"']"):null},_getAriaLabelledById:function(e){var t=null,i=this._getAriaLabelledByElement(e);return null!==i&&0!==i.length&&(t=i.attr("id")),t},_addAriaDescribedBy:function(e){this._GetContentElement().each(function(){var t,i=$(this).attr("aria-describedby");t=i?i.split(/\s+/):[],-1===$.inArray(e,t)&&t.push(e),i=$.trim(t.join(" ")),$(this).attr("aria-describedby",i)})},_removeAriaDescribedBy:function(e){this._GetContentElement().each(function(){var t,i,n;n=(t=$(this).attr("aria-describedby"))?t.split(/\s+/):[],-1!==(i=$.inArray(e,n))&&n.splice(i,1),(t=$.trim(n.join(" ")))?$(this).attr("aria-describedby",t):$(this).removeAttr("aria-describedby")})},_getMessages:function(){return this.options.messagesShown.concat(this.options.messagesHidden)},_getCustomOjLabelElement:function(){var e,t,i,n=null,o=this.options.labelledBy;return o&&(n=document.getElementById(o)),null===n&&(i=(t=this.widget())[0].id)&&(0===(e=t.siblings("[for='"+i+"']")).length&&(e=$("[for='"+this.element.id+"']")),e.length>0&&(n=e[0])),n},_getLabelText:function(){return this.$label?this.$label.text():(void 0===this.customOjLabelElement&&(this.customOjLabelElement=this._getCustomOjLabelElement()),this.customOjLabelElement?this.customOjLabelElement.textContent:null)},_getValidityState:function(){return this._validityState?this._validityState:(this._validityState=new i.ComponentValidity(this.isValid(),this._getMessages()),this._validityState)},_hasInvalidMessages:function(){return!i.Message.isValid(this._getMessages())},_hasInvalidMessagesShowing:function(){return!this.isValid()&&this.options.messagesShown.length>0},_hasInvalidComponentMessagesShowing:function(){for(var e,t,n=this.options.messagesShown,o=0;o<n.length;o++)(t=n[o])instanceof i.ComponentMessage&&t._isMessageAddedByComponent()&&(e=e||[]).push(t);return void 0!==e&&!i.Message.isValid(e)},_initComponentMessaging:function(){var e=this._getComponentMessaging(),t=this._GetMessagingLauncherElement(),i=this._GetContentElement(),n=this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.ALL);this._customPlaceholderSet||this._ClearPlaceholder(),e.activate(t,i,n)},_messagesCustomOptionChanged:function(e){var t,n,o=e?e._context:null,s=this.options.messagesCustom,r=this.options.messagesShown,a=[];for(t=0;t<r.length;t++)(n=r[t])instanceof i.ComponentMessage&&n._isMessageAddedByComponent()&&a.push(n);for(t=0;t<s.length;t++)a.push(s[t]);this._setMessagesOption("messagesShown",a,o?o.originalEvent:null,e&&e.changed)},_placeholderOptionChanged:function(e){var t=!(e&&e._context||{}).internalMessagingSet,i=this.options.placeholder;this._SetPlaceholder(i),t?(this._customPlaceholderSet=!0,this._GetConverter()&&this._initComponentMessaging()):this._customPlaceholderSet=!1},_setLastModelValue:function(e){this._oj_lastModelValue=e},_setLastSubmittedValue:function(e){this._oj_lastElementValue=e},_titleOptionChanged:function(){this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.TITLE))},_updateMessagesOption:function(e,t,i){var n,o,s;if("object"==typeof t&&Array.isArray(t))for(s=this.options[e],o=t.length,n=0;n<o;n++)s.push(t[n]);this._setMessagesOption(e,s,i,!0)},_updateMessagingContent:function(){this._getComponentMessaging().update(this._getMessagingContent())},_updateValueOption:function(e,t,i,n){var o=n||{};switch(t&&(o.originalEvent=t),i){case this._VALIDATION_CONTEXT.CONVERTER_OPTION_CHANGE:case this._VALIDATION_CONTEXT.DISABLED_OPTION_CHANGE:case this._VALIDATION_CONTEXT.READONLY_OPTION_CHANGE:case this._VALIDATION_CONTEXT.REFRESH_METHOD:case this._VALIDATION_CONTEXT.REQUIRED_OPTION_CHANGE:case this._VALIDATION_CONTEXT.VALIDATE_METHOD:case this._VALIDATION_CONTEXT.VALIDATORS_OPTION_CHANGE:o.writeback=!0,o.doNotClearMessages=!0}o.internalSet=!0,this.option({value:e},{_context:o}),this._AfterSetOptionValue("value",{_context:o})},_resetValid:function(){this._valid=void 0},_determineValid:function(){var e=this.options.messagesHidden,t=this.options.messagesShown,n="valid";return t&&0!==t.length&&!i.Message.isValid(t)?n="invalidShown":e&&0!==e.length&&!i.Message.isValid(e)&&(n="invalidHidden"),n},_formatValue:function(e){var t=e,n=this._GetConverter();return n&&"object"==typeof n&&(n.format&&"function"==typeof n.format?t=n.format(e):i.Logger.level>i.Logger.LEVEL_WARN&&i.Logger.info("converter does not support the format method.")),t},_getComponentMessaging:function(){return this._componentMessaging||(this._componentMessaging=new i.ComponentMessaging(this)),this._componentMessaging},_getHintsForAllValidators:function(e){var t,i,n=[],o="";for(this._IsRequired()&&(i=this._getImplicitRequiredValidator()).getHint&&"function"==typeof i.getHint&&(o=i.getHint())&&n.push(o),t=0;t<e.length;t++)o="","object"==typeof(i=e[t])&&i.getHint&&"function"==typeof i.getHint&&(o=i.getHint())&&n.push(o);return n},_getImplicitRequiredValidator:function(){var e,t,n={};return null==this._implicitReqValidator&&(t={hint:(n=this.options.translations&&this.options.translations.required||{}).hint||null,label:this._getLabelText(),messageSummary:n.messageSummary||null,messageDetail:n.messageDetail||null},e=i.Validation.validatorFactory(i.ValidatorFactory.VALIDATOR_TYPE_REQUIRED),this._implicitReqValidator=e?e.createValidator(t):null),this._implicitReqValidator},_getMessagingContent:function(e){var t,i,n,o={},s="",r=[];return(e=e||this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDITY_STATE)!==this._MESSAGING_CONTENT_UPDATE_TYPE.ALL&&e!==this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDITY_STATE||(n=this._getMessages(),this._getValidityState().update(this.isValid(),n),o.validityState=this._getValidityState()),e!==this._MESSAGING_CONTENT_UPDATE_TYPE.ALL&&e!==this._MESSAGING_CONTENT_UPDATE_TYPE.CONVERTER_HINT||((i=this._GetConverter())&&"object"==typeof i&&i.getHint&&"function"==typeof i.getHint&&(s=i.getHint()||""),o.converterHint=s),e!==this._MESSAGING_CONTENT_UPDATE_TYPE.ALL&&e!==this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDATOR_HINTS||(t=this._GetAllValidators(),r=this._getHintsForAllValidators(t)||[],o.validatorHint=r),e!==this._MESSAGING_CONTENT_UPDATE_TYPE.ALL&&e!==this._MESSAGING_CONTENT_UPDATE_TYPE.TITLE||(o.title=this.options.title||""),o},_messagesEquals:function(e,t){var n,o=-1,s=!0,r=$.extend([],e),a=$.extend([],t);return r.length===a.length&&($.each(r,function(e,t){t instanceof i.Message?n=t:(n=new i.Message(t.summary,t.detail,t.severity),n=Object.freeze?Object.freeze(n):n),o=-1,$.each(a,function(e,t){i.Message.getSeverityLevel(n.severity)!==i.Message.getSeverityLevel(t.severity)||n.summary!==t.summary||n.detail!==t.detail||(o=e)}),o>-1?a.splice(o,1):s=!1}),s)},_parseValue:function(e){var t=this._GetConverter(),n=e;return t&&"object"==typeof t&&(t.parse&&"function"==typeof t.parse?n=t.parse(e):i.Logger.level>i.Logger.LEVEL_WARN&&i.Logger.info("converter does not support the parse method.")),n},_addValidationError:function(e,t){var n,o,s,r;e instanceof i.ConverterError||e instanceof i.ValidatorError?(o=(s=e.getMessage()).severity||i.Message.SEVERITY_LEVEL.ERROR,r=s.summary||i.Translations.getTranslatedString("oj-message.error"),n=s.detail||i.Translations.getTranslatedString("oj-converter.detail")):e.summary||e.detail?(o=i.Message.SEVERITY_LEVEL.ERROR,r=e.summary||i.Translations.getTranslatedString("oj-message.error"),n=e.detail||i.Translations.getTranslatedString("oj-converter.detail")):(o=i.Message.SEVERITY_LEVEL.ERROR,r=i.Translations.getTranslatedString("oj-message.error"),n=e.message||i.Translations.getTranslatedString("oj-converter.detail")),t.push({summary:r,detail:n,severity:o})},_processValidationErrors:function(e,t,n){var o,s=[],r=e._messages||[],a={};a.context=t||0,a.display=n||i.ComponentMessage.DISPLAY.SHOWN,0===r.length&&this._addValidationError(e,r);for(var l=0;l<r.length;l++)o=r[l],s.push(this._createComponentMessage(o.summary,o.detail,o.severity,a));return s||null},_createComponentMessage:function(e,t,n,o){var s;return s=new i.ComponentMessage(e,t,n,o),s=Object.seal?Object.seal(s):s},_refreshComponentDisplayValue:function(e,t){(t||e!==this._getLastModelValue())&&this._updateElementDisplayValue(e)},_refreshTheming:function(e,t){-1!==Object.keys(this._OPTION_TO_CSS_MAPPING).indexOf(e)&&this.widget().toggleClass(this._OPTION_TO_CSS_MAPPING[e],!!t)},_runDeferredValidation:function(e){var t;if(this._CanSetValue())try{this._validateValue(this.options.value,this._VALIDATION_MODE.REQUIRED_VALIDATOR_ONLY)}catch(n){(t=this._processValidationErrors(n,e,i.ComponentMessage.DISPLAY.HIDDEN))&&this._updateMessagesOption("messagesHidden",t)}else i.Logger.level>i.Logger.LEVEL_WARN&&i.Logger.info("Deferred validation skipped as component is readonly or disabled.");this._setValidOption(null)},_runNormalValidation:function(e,t,i,n){var o,s=e;try{t===this._VALIDATION_MODE.FULL&&(s=this._parseValue(e)),this._validateValue(s,t===this._VALIDATION_MODE.REQUIRED_VALIDATOR_ONLY)}catch(e){throw o=this._processValidationErrors(e,i),this._updateMessagesOption("messagesShown",o,n),e}return s},_runMixedValidationAfterSetOption:function(e){var t=!0;this._hasInvalidMessagesShowing()&&(t=!1),this._clearComponentMessages(),t?this._IsRequired()?this._runDeferredValidation(e.validationContext):this._setValidOption(null):this._updateValue(e)},_updateElementDisplayValue:function(e,t){var i,n,o;this._setLastModelValue(e),n=e;try{n=this._formatValue(e)}catch(e){o=this._processValidationErrors(e),this._updateMessagesOption("messagesShown",o,t)}this._SetDisplayValue(n),i=this._GetDisplayValue(),this._setLastSubmittedValue(i),this._SetRawValue(i,null)},_updateValue:function(e){var t;t=this._Validate(this._GetDisplayValue(),null,e),this._setValidOption(null),void 0===t||!this.isValid()&&this._hasInvalidComponentMessagesShowing()||this._updateValueOption(t,null,e.validationContext)},_validateValue:function(e,t){var n,o,s=this._GetAllValidators(),r=[];if(this._IsRequired()){o=this._getImplicitRequiredValidator();try{o.validate(i.StringUtils.trim(e))}catch(e){this._addValidationError(e,r)}}if(!t)for(n=0;n<s.length;n++)if("object"==typeof(o=s[n]))if(o.validate&&"function"==typeof o.validate)try{o.validate(e)}catch(e){this._addValidationError(e,r)}else i.Logger.level>i.Logger.LEVEL_WARN&&i.Logger.info("validator does not support the validate method.");if(r.length>0){var a=new Error;throw a._messages=r,a}}},!0),i.Components.setDefaultOptions({editableValue:{displayOptions:i.Components.createDynamicPropertyGetter(function(e){var t={messages:e.containers.indexOf("ojDataGrid")>=0||e.containers.indexOf("ojTable")>=0?["notewindow"]:["inline"],converterHint:["placeholder","notewindow"],validatorHint:["notewindow"]};return t[e.isCustomElement?"helpInstruction":"title"]=["notewindow"],t}),help:i.Components.createDynamicPropertyGetter(function(e){return e.isCustomElement?{instruction:""}:{definition:null,source:null}})}}),i.InlineMessagingStrategy=function(e){this.Init(e)},i.ComponentMessaging.registerMessagingStrategy(i.ComponentMessaging._DISPLAY_TYPE.INLINE,i.InlineMessagingStrategy),i.Object.createSubclass(i.InlineMessagingStrategy,i.MessagingStrategy,"oj.InlineMessagingStrategy"),i.InlineMessagingStrategy.prototype.reactivate=function(e){i.InlineMessagingStrategy.superclass.reactivate.call(this,e),this._updateInlineMessage()},i.InlineMessagingStrategy.prototype.shouldUpdate=function(e){return!(!e||void 0===e.validityState)},i.InlineMessagingStrategy.prototype.update=function(){i.InlineMessagingStrategy.superclass.update.call(this),this._updateInlineMessage()},i.InlineMessagingStrategy.prototype.deactivate=function(){this._removeMessagingContentRootDom(),i.InlineMessagingStrategy.superclass.deactivate.call(this)},i.InlineMessagingStrategy.prototype._getDefaultAnimation=function(){if(!i.InlineMessagingStrategy._defaultAnimation){var e=(i.ThemeUtils.parseJSONFromFontFamily("oj-messaging-inline-option-defaults")||{}).animation;e=e||{},i.InlineMessagingStrategy._defaultAnimation=e}return i.InlineMessagingStrategy._defaultAnimation},i.InlineMessagingStrategy.prototype._replaceAnimationOptions=function(e,t){var n,o;for(var s in i.StringUtils.isString(e)?(o=!0,n=e+""):(o=!1,n=JSON.stringify(e)),t)n=n.replace(new RegExp(s,"g"),t[s]);return e=o?n:JSON.parse(n)},i.InlineMessagingStrategy.prototype._determineAnimation=function(e,t){var i,n,o,s=this._getDefaultAnimation();if(s){var r,a=e[0].innerHTML,l=e.outerHeight();e[0].innerHTML=t,r=e.outerHeight(),e[0].innerHTML=a,(n=s[i=r>l?"open":"close"])&&(o=this._replaceAnimationOptions(n,{"#oldHeight":l+"px","#newHeight":r+"px"}))}return{action:i,effect:o}},i.InlineMessagingStrategy.prototype._setBusyState=function(){if(!this._resolveBusyState){var e=this.GetComponent(),t=e?e.element:null,n=t?t[0]:null,o=i.Context.getContext(n).getBusyContext(),s="The page is waiting for inline message ";n&&n.id&&(s+='for "'+n.id+'" '),s+="to open/close",this._resolveBusyState=o.addBusyState({description:s})}},i.InlineMessagingStrategy.prototype._clearBusyState=function(){this._resolveBusyState&&(this._resolveBusyState(),this._resolveBusyState=null)},i.InlineMessagingStrategy.prototype._queueAction=function(e){var t=this,n=this.$messagingContentRoot;this._setBusyState(),this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=setTimeout(function(){if(t._timeoutId=null,n&&n[0]){var o=t._determineAnimation(n,e),s=o.action,r=o.effect;"open"==s&&(n[0].innerHTML=e),i.AnimationUtils.startAnimation(n[0],"inline-"+s,r,t.GetComponent()).then(function(){"close"==s&&(n[0].innerHTML=e),t._clearBusyState()})}else t._clearBusyState()},0)},i.InlineMessagingStrategy.prototype._updateInlineMessage=function(){var e;(e=this._buildInlineHtml())&&null==this.$messagingContentRoot&&this._createInlineMessage(),this.$messagingContentRoot&&this.$messagingContentRoot[0]&&(this.GetComponent()._IsCustomElement()?this._queueAction(e):e?this.$messagingContentRoot[0].innerHTML=e:this._removeMessagingContentRootDom())},i.InlineMessagingStrategy.prototype._createInlineMessage=function(){this.$messagingContentRoot=$(this._getInlineContentHtml()),this._addAriaDescribedBy(this.$messagingContentRoot),this._addAriaLive(this.$messagingContentRoot),this.GetComponent().widget().append(this.$messagingContentRoot)},i.InlineMessagingStrategy.prototype._getInlineContentHtml=function(){return"<div class='oj-messaging-inline-container'></div>"},i.InlineMessagingStrategy.prototype._removeMessagingContentRootDom=function(){null!=this.$messagingContentRoot&&(this._removeAriaDescribedBy(this.$messagingContentRoot),this.$messagingContentRoot.remove(),this.$messagingContentRoot=null)},i.InlineMessagingStrategy.prototype._addAriaDescribedBy=function(e){var t,n,o,s;n=this.GetLauncher(),i.Assert.assertPrototype(n,$),i.Assert.assertPrototype(e,$),o=e.uniqueId().attr("id"),(s=(t=n.attr("aria-describedby"))?t.split(/\s+/):[]).push(o),t=$.trim(s.join(" ")),n.attr("aria-describedby",t)},i.InlineMessagingStrategy.prototype._addAriaLive=function(e){i.Assert.assertPrototype(e,$),e.attr("aria-live","polite")},i.InlineMessagingStrategy.prototype._removeAriaDescribedBy=function(e){var t,n,o,s,r;o=this.GetLauncher(),i.Assert.assertPrototype(o,$),i.Assert.assertPrototype(e,$),s=e.attr("id"),r=(t=o.attr("aria-describedby"))?t.split(/\s+/):[],-1!==(n=$.inArray(s,r))&&r.splice(n,1),(t=$.trim(r.join(" ")))?o.attr("aria-describedby",t):o.removeAttr("aria-describedby")},i.InlineMessagingStrategy.prototype._buildInlineHtml=function(){var e;return this.ShowMessages()?(e=this.GetComponent().document[0],this._buildMessagesHtml(e)):""},i.InlineMessagingStrategy.prototype._buildMessagesHtml=function(e){var t,n,o="";return this.HasMessages()&&(n=this.GetMessages(),t=this.GetMaxSeverity(),o=i.PopupMessagingStrategyUtils.buildMessagesHtml(e,n,t,!0)),o},i.PopupMessagingStrategy=function(e){this.Init(e)},i.ComponentMessaging.registerMessagingStrategy(i.ComponentMessaging._DISPLAY_TYPE.NOTEWINDOW,i.PopupMessagingStrategy),i.Object.createSubclass(i.PopupMessagingStrategy,i.MessagingStrategy,"oj.PopupMessagingStrategy"),i.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT={ojRadioset:{position:"launcher",events:{open:"focusin mouseenter press",close:"mouseleave"}},ojCheckboxset:{position:"launcher",events:{open:"focusin mouseenter press",close:"mouseleave"}},ojInputText:{position:"launcher",events:{open:"focusin"}},ojTextArea:{position:"launcher",events:{open:"focusin"}},ojInputPassword:{position:"launcher",events:{open:"focusin"}},ojSwitch:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},ojSlider:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},ojColorSpectrum:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},ojColorPalette:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},default:{position:"launcher-wrapper",events:{open:"focusin"}}},i.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT="oj-form-control-hint",i.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_CONVERTER="oj-form-control-hint-converter",i.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_VALIDATOR="oj-form-control-hint-validator",i.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_TITLE="oj-form-control-hint-title",i.PopupMessagingStrategy._OPEN_NAMESPACE=".ojPopupMessagingOpen",i.PopupMessagingStrategy._CLOSE_NAMESPACE=".ojPopupMessagingClose",i.PopupMessagingStrategy.prototype.activate=function(e){i.PopupMessagingStrategy.superclass.activate.call(this,e),this._initMessagingPopup()},i.PopupMessagingStrategy.prototype.reactivate=function(e){i.PopupMessagingStrategy.superclass.reactivate.call(this,e),this._updatePopupIfOpen()},i.PopupMessagingStrategy.prototype.update=function(){i.PopupMessagingStrategy.superclass.update.call(this),this._updatePopupIfOpen()},i.PopupMessagingStrategy.prototype.deactivate=function(){this._unregisterLauncherEvents(),this._destroyTooltip(),i.PopupMessagingStrategy.superclass.deactivate.call(this)},i.PopupMessagingStrategy.prototype.close=function(){this._closePopup()},i.PopupMessagingStrategy.prototype._closePopup=function(){this._queueAction(function(e){if(this._isPopupInitialized())return e&&this._setActionResolver(this.$messagingContentRoot,"close",e),void this.$messagingContentRoot.ojPopup("close");e&&e(!0)}.bind(this))},i.PopupMessagingStrategy.prototype._initMessagingPopup=function(){this._openPopupCallback||this._registerLauncherEvents()},i.PopupMessagingStrategy.prototype._addAnimateEventListeners=function(e){var t=function(e,t,i){var n=this.GetComponent();n&&n._trigger&&(t.stopPropagation(),n._trigger(e,null,i)||t.preventDefault())};e.on("ojanimatestart.notewindow",t.bind(this,"animateStart")),e.on("ojanimateend.notewindow",t.bind(this,"animateEnd"))},i.PopupMessagingStrategy.prototype._removeAnimateEventListeners=function(e){e.off("ojanimatestart.notewindow"),e.off("ojanimateend.notewindow")},i.PopupMessagingStrategy.prototype._setBusyState=function(e){var t=this.GetComponent(),n=t?t.element:null,o=n?n[0]:null,s=i.Context.getContext(o).getBusyContext(),r="The page is waiting for note window ";return o&&o.id&&(r+='for "'+o.id+'" '),r+="to "+e,s.addBusyState({description:r})},i.PopupMessagingStrategy.prototype._setActionResolver=function(e,t,i){var n;this._actionCount>1&&(n=e.ojPopup("option","animation"),e.ojPopup("option","animation",null));var o=this._setBusyState(t);e.one("oj"+t,function(){n&&e.ojPopup("option","animation",n),o(),i(!0)})},i.PopupMessagingStrategy.prototype._queueAction=function(e){if(this.GetComponent()._IsCustomElement()){var t=this,i=function(e){var i=new Promise(e);return i.then(function(){--t._actionCount}),i};this._actionCount?(++this._actionCount,this._actionPromise=this._actionPromise.then(function(){return i(e)})):(this._actionCount=1,this._actionPromise=i(e))}else e(null)},i.PopupMessagingStrategy.prototype._openPopup=function(e){this._queueAction(function(t){var n,o,s;if(this._canOpenPopup()&&(o=this._buildPopupHtml(),!i.StringUtils.isEmptyOrUndefined(o))){var r=this._getPopupElement(),a=r.ojPopup("isOpen");if((n=i.PopupMessagingStrategyPoolUtils.getPopupContentNode(r)).innerHTML="",n.innerHTML=o,!a)return s=this.GetLauncher(),"press"===e.type&&this._openPopupOnPressEvent(s),t&&this._setActionResolver(r,"open",t),void r.ojPopup("open",s);a&&r.ojPopup("refresh")}t&&t(!0)}.bind(this))},i.PopupMessagingStrategy.prototype._openPopupOnPressEvent=function(e){this._inPressEvent=!0,e[0].addEventListener("click",this._eatChangeAndClickOnPress,!0),e[0].addEventListener("change",this._eatChangeAndClickOnPress,!0),e.one("touchend",function(e){setTimeout(function(){this._inPressEvent=!1},50)})},i.PopupMessagingStrategy.prototype._eatChangeAndClickOnPress=function(e){this._inPressEvent&&(e.preventDefault(),e.stopPropagation(),"click"===e.type&&(this._inPressEvent=!1))},i.PopupMessagingStrategy.prototype._canOpenPopup=function(){var e=this.GetComponent().options,t=e.disabled||!1,i=e.readOnly||!1;return!(t||i)},i.PopupMessagingStrategy.prototype._updatePopupIfOpen=function(){var e,t,n,o,s=!1;if(this._isPopupInitialized()){if(s=(o=this._getPopupElement()).ojPopup("isOpen"),e=this._buildPopupHtml(),null==this.GetLauncher())return;n=document.activeElement===this.GetLauncher()[0],s?e?((t=i.PopupMessagingStrategyPoolUtils.getPopupContentNode(o)).innerHTML="",t.innerHTML=e,o.ojPopup("refresh")):o.ojPopup("close"):n&&e&&this._openPopup(void 0)}},i.PopupMessagingStrategy.prototype._unregisterLauncherEvents=function(){var e,t=this.GetLauncher();(e=i.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT[this.GetComponent().widgetName])?e.events:i.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT.default.events,t.off(i.PopupMessagingStrategy._OPEN_NAMESPACE),t.off(i.PopupMessagingStrategy._CLOSE_NAMESPACE),t[0].removeEventListener("click",this._eatChangeAndClickOnPress,!0),t[0].removeEventListener("change",this._eatChangeAndClickOnPress,!0),i.DomUtils.isTouchSupported()&&(t.ojHammer().off("press"),t.ojHammer("destroy"),t.off("contextmenu",this._eatContextMenuOnOpenPopupListener),this._eatContextMenuOnOpenPopupListener=null,this._inPressEvent=null),this._openPopupCallback=null,this._closePopupCallback=null},i.PopupMessagingStrategy.prototype._registerLauncherEvents=function(){var e,t,n,o,s,r,a,l,u=this.GetLauncher();(o=(n=i.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT[this.GetComponent().widgetName])?n.events:i.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT.default.events).open&&((a=this._openPopupCallback)||(a=this._openPopupCallback=this._openPopup.bind(this)),l=o.open.indexOf("press"),r=this._getNamespacedEvents(o.open.replace("press",""),i.PopupMessagingStrategy._OPEN_NAMESPACE),u.on(r,a),i.DomUtils.isTouchSupported()&&(this._eatContextMenuOnOpenPopupListener=function(e){return!1},u.on("contextmenu",this._eatContextMenuOnOpenPopupListener),-1!==l&&(s={recognizers:[[Hammer.Press,{time:750}]]},u.ojHammer(s).on("press",a)))),o.close&&((t=this._closePopupCallback)||(t=this._closePopupCallback=this._closePopup.bind(this)),e=this._getNamespacedEvents(o.close,i.PopupMessagingStrategy._CLOSE_NAMESPACE),u.on(e,t))},i.PopupMessagingStrategy.prototype._getNamespacedEvents=function(e,t){var i,n,o;if(""===e||""===t)return e;o=(i=e.split(" ")).length,n=[];for(var s=0;s<o;s++)i[s]&&n.push(i[s]+t);return n.join(" ")},i.PopupMessagingStrategy.prototype._getPopupPosition=function(){var e,t,n;return(e=(t=i.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT[this.GetComponent().widgetName])?t.position:i.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT.default.position)&&("launcher"===e?n=this.GetLauncher():"launcher-wrapper"===e&&(n=this.GetLauncher().parent())),n||(n=this.GetComponent().widget()),{my:"start bottom",at:"end top",collision:"flipcenter",of:n}},i.PopupMessagingStrategy.prototype._getPopupElement=function(){var e,t;if(this.$messagingContentRoot)return this.$messagingContentRoot;if(e=i.PopupMessagingStrategyPoolUtils.getNextFreePopup(),t=this._getPopupPosition(),e.ojPopup("option","position",t),e.ojPopup("option","beforeClose",this._popupBeforeCloseCallback.bind(this)),e.ojPopup("option","close",this._popupCloseCallback.bind(this)),e.ojPopup("option","open",this._popupOpenCallback.bind(this)),this.GetComponent()._IsCustomElement()){var n=(i.ThemeUtils.parseJSONFromFontFamily("oj-messaging-popup-option-defaults")||{}).animation;n.actionPrefix="notewindow",e.ojPopup("option","animation",n),this._addAnimateEventListeners(e)}else e.ojPopup("option","animation",null);return this.$messagingContentRoot=e,this.$messagingContentRoot},i.PopupMessagingStrategy.prototype._popupOpenCallback=function(e){var t=$(e.target),n=this;window.setTimeout(function(){i.Components.isComponentInitialized(t,"ojPopup")?t.ojPopup("option","autoDismiss","focusLoss"):delete n.$messagingContentRoot},10)},i.PopupMessagingStrategy.prototype._popupBeforeCloseCallback=function(e){this._resolveBusyState=this._setBusyState("close")},i.PopupMessagingStrategy.prototype._popupCloseCallback=function(e){var t,n;t=this.GetLauncher(),n=$(e.target),this._removeAnimateEventListeners(n),i.Components.isComponentInitialized(n,"ojPopup")&&(n.ojPopup("option","autoDismiss","none"),n.ojPopup("option","open",null),n.ojPopup("option","close",null),n.ojPopup("option","beforeClose",null)),t&&t[0]&&(t[0].removeEventListener("click",this._eatChangeAndClickOnPress,!0),t[0].removeEventListener("change",this._eatChangeAndClickOnPress,!0)),this.$messagingContentRoot=null,this._inPressEvent=null,$(i.PopupMessagingStrategyPoolUtils.getPopupContentNode(n)).empty(),this._resolveBusyState&&(this._resolveBusyState(),this._resolveBusyState=null)},i.PopupMessagingStrategy.prototype._destroyTooltip=function(){this._closePopup(),i.PopupMessagingStrategyPoolUtils.destroyFreePopup()},i.PopupMessagingStrategy.prototype._buildPopupHtml=function(){var e=!1,t=this.GetComponent().document[0],n=[],o="";return this.ShowMessages()&&n.push(this._buildMessagesHtml(t)),(this.ShowConverterHint()||this.ShowValidatorHint()||this.ShowTitle())&&n.push(this._buildHintsHtml(t)),$.each(n,function(n,s){s&&(e?o=o.concat(i.PopupMessagingStrategyUtils.getSeparatorHtml(t)):e=!0,o=o.concat(s))}),o},i.PopupMessagingStrategy.prototype._buildMessagesHtml=function(e){var t,n="",o=this.GetMaxSeverity();return this.HasMessages()&&(t=this.GetMessages(),n=i.PopupMessagingStrategyUtils.buildMessagesHtml(e,t,o,!1)),n},i.PopupMessagingStrategy.prototype._buildHintsHtml=function(e){var t,n,o=[],s="";if(this.ShowConverterHint()&&(t=(o=this.GetConverterHint()).length?o[0]:"",s+=i.PopupMessagingStrategyUtils.buildHintHtml(e,i.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_CONVERTER,t,!1,i.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT)),this.ShowValidatorHint())for(o=this.GetValidatorHints(),n=0;n<o.length;n++)s+=i.PopupMessagingStrategyUtils.buildHintHtml(e,i.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_VALIDATOR,o[n],!1,i.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT);return this.ShowTitle()&&(s+=i.PopupMessagingStrategyUtils.buildHintHtml(e,i.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_TITLE,this.GetTitle(),!0,i.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT)),s?"<div class='oj-form-control-hints'>"+s+"</div>":""},i.PopupMessagingStrategy.prototype._isPopupInitialized=function(){return!!this.$messagingContentRoot&&i.Components.isComponentInitialized(this.$messagingContentRoot,"ojPopup")},i.PopupMessagingStrategyUtils={},i.PopupMessagingStrategyUtils.buildHintHtml=function(e,t,n,o,s){var r;return n&&(s+=" "+t,(r=$(e.createElement("div"))).addClass(s),r.append(i.PopupMessagingStrategyUtils._getTextDom(e,n,o))),r?r.get(0).outerHTML:""},i.PopupMessagingStrategyUtils.getSeverityTranslatedString=function(e){var t;switch(e){case i.Message.SEVERITY_LEVEL.FATAL:t=i.Translations.getTranslatedString("oj-message.fatal");break;case i.Message.SEVERITY_LEVEL.ERROR:t=i.Translations.getTranslatedString("oj-message.error");break;case i.Message.SEVERITY_LEVEL.WARNING:t=i.Translations.getTranslatedString("oj-message.warning");break;case i.Message.SEVERITY_LEVEL.INFO:t=i.Translations.getTranslatedString("oj-message.info");break;case i.Message.SEVERITY_LEVEL.CONFIRMATION:t=i.Translations.getTranslatedString("oj-message.confirmation")}return t},i.PopupMessagingStrategyUtils.getSeparatorHtml=function(e){var t;return(t=$(e.createElement("hr")))?t.get(0).outerHTML:""},i.PopupMessagingStrategyUtils.buildMessagesHtml=function(e,t,n,o){var s,r,a,l,u,h,d,c,p="",_=[],m={};for(r=0;r<t.length;r++)u=(l=t[r])instanceof i.Message?l:new i.Message(l.summary,l.detail,l.severity),m[h=i.Message.getSeverityLevel(u.severity)]||(m[h]=[]),m[h].push(u);for(r=n;r>=i.Message.SEVERITY_LEVEL.CONFIRMATION;r--)for(_=m[r]||[],a=0;a<_.length;a++)l=_[a],h=i.Message.getSeverityLevel(l.severity),d=i.PopupMessagingStrategyUtils.getSeverityTranslatedString(h),c=l.summary||d,s=l.detail||"",p=p.concat(i.PopupMessagingStrategyUtils.buildMessageHtml(e,c,s,h,o));return p},i.PopupMessagingStrategyUtils.buildMessageHtml=function(e,t,n,o,s){var r,a,l,u,h,d=i.PopupMessagingStrategyUtils.getSeverityTranslatedString(o);if((l=$(e.createElement("div"))).addClass(i.PopupMessagingStrategyUtils._SELECTOR_MESSAGE),s&&l.addClass(i.PopupMessagingStrategyUtils._getSeveritySelector(o)),(u=$(e.createElement("span"))).addClass(i.PopupMessagingStrategyUtils._getSeverityIconSelector(o)).attr("title",d).attr("role","img"),l.append(u),(r=$(e.createElement("span"))).addClass(i.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONTENT),(h=$(e.createElement("div"))).addClass(i.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_SUMMARY).text(t),r.append(h),n){var c=i.PopupMessagingStrategyUtils._getTextDom(e,n,!0);(a=$(e.createElement("div"))).addClass(i.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_DETAIL).append(c),r.append(a)}return l.append(r),l?l.get(0).outerHTML:""},i.PopupMessagingStrategyUtils._getSeverityIconSelector=function(e){var t;switch(e){case i.Message.SEVERITY_LEVEL.FATAL:case i.Message.SEVERITY_LEVEL.ERROR:t=i.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR_ICON;break;case i.Message.SEVERITY_LEVEL.WARNING:t=i.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_WARNING_ICON;break;case i.Message.SEVERITY_LEVEL.INFO:t=i.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_INFO_ICON;break;case i.Message.SEVERITY_LEVEL.CONFIRMATION:t=i.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONFIRMATION_ICON}return i.PopupMessagingStrategyUtils._DEFAULT_STATUS_ICON_SELECTORS+t},i.PopupMessagingStrategyUtils._getSeveritySelector=function(e){var t;switch(e){case i.Message.SEVERITY_LEVEL.FATAL:case i.Message.SEVERITY_LEVEL.ERROR:t=i.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR;break;case i.Message.SEVERITY_LEVEL.WARNING:t=i.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_WARNING;break;case i.Message.SEVERITY_LEVEL.INFO:t=i.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_INFO;break;case i.Message.SEVERITY_LEVEL.CONFIRMATION:default:t=i.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONFIRMATION}return t},i.PopupMessagingStrategyUtils._getTextDom=function(e,t,n){var o=null;return i.StringUtils.isString(t)&&(n&&i.DomUtils.isHTMLContent(t)?o=i.DomUtils.cleanHtml(t.substring(6,t.length-7)):(o=e.createElement("span")).textContent=t),o},i.PopupMessagingStrategyUtils._DEFAULT_STATUS_ICON_SELECTORS="oj-component-icon oj-message-status-icon ",i.PopupMessagingStrategyUtils._SELECTOR_MESSAGE="oj-message",i.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_SUMMARY="oj-message-summary",i.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_DETAIL="oj-message-detail",i.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONTENT="oj-message-content",i.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR_ICON="oj-message-error-icon",i.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_WARNING_ICON="oj-message-warning-icon",i.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_INFO_ICON="oj-message-info-icon",i.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONFIRMATION_ICON="oj-message-confirmation-icon",i.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR="oj-message-error",i.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_WARNING="oj-message-warning",i.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_INFO="oj-message-info",i.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONFIRMATION="oj-message-confirmation",i.PopupMessagingStrategyPoolUtils={},i.PopupMessagingStrategyPoolUtils.getNextFreePopup=function(){var e,t=i.PopupMessagingStrategyPoolUtils._getPool(),n=t.find("."+i.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING);if(0===n.length){(e=$(i.PopupMessagingStrategyPoolUtils._getPopupContentHtml()).hide()).appendTo(t);e.ojPopup({initialFocus:"none",tail:"simple",autoDismiss:"none",modality:"modeless",animation:{open:null,close:null}})}else e=$(n[0]);return e},i.PopupMessagingStrategyPoolUtils.getPopupContentNode=function(e){return e.find("."+i.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING_CONTAINER)[0]},i.PopupMessagingStrategyPoolUtils.destroyFreePopup=function(){var e;i.PopupMessagingStrategyPoolUtils._getFreePoolCount()>0&&((e=i.PopupMessagingStrategyPoolUtils.getNextFreePopup()).ojPopup("destroy"),e.remove())},i.PopupMessagingStrategyPoolUtils._getPool=function(){var e=$("#"+i.PopupMessagingStrategyPoolUtils._MESSAGING_POPUP_POOL_ID);return e.length>0?e:((e=$("<div>")).attr("id",i.PopupMessagingStrategyPoolUtils._MESSAGING_POPUP_POOL_ID),e.attr("role","presentation"),e.appendTo($(document.body)),e)},i.PopupMessagingStrategyPoolUtils._getFreePoolCount=function(){return i.PopupMessagingStrategyPoolUtils._getPool().find("."+i.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING).length},i.PopupMessagingStrategyPoolUtils._getPopupContentHtml=function(){return'<div class="'+i.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING+'"><div class="'+i.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING_CONTAINER+'"></div></div>'},i.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING_CONTAINER="oj-messaging-popup-container",i.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING="oj-messaging-popup",i.PopupMessagingStrategyPoolUtils._MESSAGING_POPUP_POOL_ID="__oj_messaging_popup_pool",i.CustomElementBridge.registerMetadata("editableValue","baseComponent",{properties:{describedBy:{type:"string"},disabled:{type:"boolean"},displayOptions:{type:"Object",properties:{converterHint:{type:"string"},helpInstruction:{type:"string"},messages:{type:"string"},validatorHint:{type:"string"}}},help:{type:"Object<string, string>",properties:{instruction:{type:"string"}}},helpHints:{type:"Object",properties:{definition:{type:"string"},source:{type:"string"}}},labelHint:{type:"string"},messagesCustom:{type:"Array",writeback:!0},valid:{type:"string",writeback:!0,readOnly:!0,enumValues:["valid","invalidShown","invalidHidden","pending"]},value:{type:"Object",writeback:!0}},methods:{reset:{},showMessages:{}},events:{animateStart:{},animateEnd:{}},extension:{_WIDGET_NAME:"editableValue"}}),i.__registerWidget("oj.inputBase",$.oj.editableValue,{version:"1.0.0",widgetEventPrefix:"oj",_ATTR_CHECK:[],_CLASS_NAMES:"",_WIDGET_CLASS_NAMES:"",_ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES:"",_GET_INIT_OPTIONS_PROPS_FOR_WIDGET:[{attribute:"disabled",validateOption:!0},{attribute:"pattern"},{attribute:"placeholder"},{attribute:"value"},{attribute:"readonly",option:"readOnly",validateOption:!0},{attribute:"required",coerceDomValue:!0,validateOption:!0},{attribute:"title"}],_INPUT_HELPER_KEY:"",_BLUR_HANDLER_KEY:"blur",_KEYDOWN_HANDLER_KEY:"keydown",_KEYUP_HANDLER_KEY:"keyup",_INPUT_HANDLER_KEY:"input",_DROP_HANDLER_KEY:"drop",options:{autocomplete:void 0,autofocus:!1,name:"",placeholder:"",rawValue:"",readOnly:!1,required:!1,validators:void 0},_SaveAttributes:function(e){var t=this._superApply(arguments);return this._processAttrCheck(),t},_InitOptions:function(e,t){this._super(e,t),this._IsCustomElement()||i.EditableValueUtils.initializeOptionsFromDom(this._GET_INIT_OPTIONS_PROPS_FOR_WIDGET,t,this)},_ComponentCreate:function(){var e=this.element,t=this._superApply(arguments),i=(this._GetSavedAttributes(e),this.options.readOnly);return this._rtl="rtl"===this._GetReadingDirection(),"boolean"==typeof i&&this.element.prop("readonly",i),this._DoWrapElement()?(this._wrapElementInRootDomElement(),this._DoWrapElementAndTriggers()&&this._WrapElement(),this._focusable({element:this._wrapper,applyHighlight:!0})):this._focusable({element:this.element,applyHighlight:!0}),this._defaultRegExpValidator={},this._eventHandlers=null,t},_AfterCreate:function(){var e,t=this._superApply(arguments),n=this;return this._refreshRequired(this.options.required),this._CLASS_NAMES&&this.element.addClass(this._CLASS_NAMES),this._attachDetachEventHandlers(),this._AppendInputHelper(),$.each(["disabled","readOnly"],function(e,t){n.options[t]&&n._processDisabledReadOnly(t,n.options[t])}),this._IsCustomElement()&&(e=this.widget().attr("id"))&&i.EditableValueUtils.setSubIdForCustomLabelFor(this._GetContentElement()[0],e),t},_IsRequired:function(){return this.options.required},_AfterSetOptionRequired:i.EditableValueUtils._AfterSetOptionRequired,_AfterSetOptionValidators:i.EditableValueUtils._AfterSetOptionValidators,_AfterSetOptionConverter:i.EditableValueUtils._AfterSetOptionConverter,_ResetConverter:i.EditableValueUtils._ResetConverter,_GetConverter:i.EditableValueUtils._GetConverter,_GetNormalizedValidatorsFromOption:i.EditableValueUtils._GetNormalizedValidatorsFromOption,_processDisabledReadOnly:function(e,t){"disabled"===e&&this.element.prop("disabled",t),"readOnly"===e&&(this.element.prop("readonly",t),this._refreshStateTheming("readOnly",t)),"disabled"!==e&&"readOnly"!==e||this._attachDetachEventHandlers()},_setOption:function(e,t,n){var o=this._superApply(arguments);return"disabled"!==e&&"readOnly"!==e||this._processDisabledReadOnly(e,t),"pattern"===e&&(this._defaultRegExpValidator[i.ValidatorFactory.VALIDATOR_TYPE_REGEXP]=this._getImplicitRegExpValidator(),this._AfterSetOptionValidators()),o},_AfterSetOption:function(e,t,n){switch(this._superApply(arguments),e){case"readOnly":this._AfterSetOptionDisabledReadOnly(e,i.EditableValueUtils.readOnlyOptionOptions);break;case"required":this._AfterSetOptionRequired(e);break;case"validators":this._AfterSetOptionValidators(e);break;case"converter":this._AfterSetOptionConverter(e)}},_destroy:function(){var e=this._superApply(arguments);return this.element.off("blur drop keydown keyup input"),this._inputHelper&&this._inputHelper.remove(),this._DoWrapElement()&&!this._IsCustomElement()&&(this._DoWrapElementAndTriggers()?i.DomUtils.unwrap(this.element,this._wrapper):i.DomUtils.unwrap(this.element)),e},_attachDetachEventHandlers:function(){if(this.options.readOnly||this.options.disabled){if(this._eventHandlers)for(var e=[this._BLUR_HANDLER_KEY,this._KEYDOWN_HANDLER_KEY,this._KEYUP_HANDLER_KEY,this._INPUT_HANDLER_KEY,this._DROP_HANDLER_KEY],t=0,i=e.length;t<i;t++)this._eventHandlers[e[t]]&&(this.element.off(e[t],this._eventHandlers[e[t]]),delete this._eventHandlers[e[t]])}else{this._eventHandlers={};var n=$.proxy(this._onBlurHandler,this),o=$.proxy(this._onKeyDownHandler,this),s=$.proxy(this._onKeyUpHandler,this),r=$.proxy(this._onInputHandler,this),a=function(){this.focus()};this.element.on(this._BLUR_HANDLER_KEY,n),this.element.on(this._KEYDOWN_HANDLER_KEY,o),this.element.on(this._KEYUP_HANDLER_KEY,s),this.element.on(this._INPUT_HANDLER_KEY,r),this.element.on(this._DROP_HANDLER_KEY,a),this._eventHandlers[this._BLUR_HANDLER_KEY]=n,this._eventHandlers[this._KEYDOWN_HANDLER_KEY]=o,this._eventHandlers[this._KEYUP_HANDLER_KEY]=s,this._eventHandlers[this._INPUT_HANDLER_KEY]=r,this._eventHandlers[this._DROP_HANDLER_KEY]=a}},_OPTION_TO_CSS_MAPPING:{readOnly:"oj-read-only"},_processAttrCheck:function(){for(var e=this._ATTR_CHECK,t=0,i=e.length;t<i;t++){var n=e[t].attr;"setMandatory"in e[t]&&this.element.attr(n,e[t].setMandatory)}},_onBlurHandler:function(e){this._SetValue(this._GetDisplayValue(),e)},_onKeyDownHandler:function(e){},_onKeyUpHandler:function(e){e.keyCode===$.ui.keyCode.ENTER&&this._SetValue(this._GetDisplayValue(),e)},_onInputHandler:function(e){this._SetRawValue(this._GetContentElement().val(),e)},_DoWrapElement:function(){return this._WIDGET_CLASS_NAMES},_DoWrapElementAndTriggers:function(){return this._ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES},_wrapElementInRootDomElement:function(){this.OuterWrapper?(this._wrapper=$(this.OuterWrapper).addClass(this._WIDGET_CLASS_NAMES),this._wrapper.append(this.element)):($(this.element).wrap($("<div>").addClass(this._WIDGET_CLASS_NAMES)),this._wrapper=this.element.parent())},_WrapElement:function(){return $(this.element).wrap($("<div>").addClass(this._ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES)).parent()},_AppendInputHelper:function(){if(this._INPUT_HELPER_KEY&&this._DoWrapElement()){var e=this.element.attr("aria-describedby")||"",t=this._GetSubId(this._INPUT_HELPER_KEY);e+=" "+t,this.element.attr("aria-describedby",e),this._inputHelper=$("<div class='oj-helper-hidden-accessible' aria-hidden='true' id='"+t+"'>"+this._EscapeXSS(this.getTranslatedString(this._INPUT_HELPER_KEY))+"</div>"),this._AppendInputHelperParent().append(this._inputHelper)}},_EscapeXSS:function(e){return $("<span>"+e+"</span>").text()},_AppendInputHelperParent:function(){return this.widget()},_GetImplicitValidators:function(){var e=this._superApply(arguments);return this.options.pattern&&(this._defaultRegExpValidator[i.ValidatorFactory.VALIDATOR_TYPE_REGEXP]=this._getImplicitRegExpValidator()),$.extend(this._defaultRegExpValidator,e)},_CanSetValue:function(){return!!this._super()&&!(this.options.readOnly||!1)},_refreshStateTheming:function(e,t){-1!=Object.keys(this._OPTION_TO_CSS_MAPPING).indexOf(e)&&this.widget().toggleClass(this._OPTION_TO_CSS_MAPPING[e],!!t)},_getImplicitRegExpValidator:function(){if(!this.options.pattern)return null;var e={pattern:this.options.pattern,label:this._getLabelText()};return $.extend(e,this.options.translations.regexp||{}),i.Validation.validatorFactory(i.ValidatorFactory.VALIDATOR_TYPE_REGEXP).createValidator(e)},_GetSubId:function(e){return this.uuid+"_"+e},_IsRTL:function(){return this._rtl},refresh:function(){var e=this._superApply(arguments);return this._rtl="rtl"===this._GetReadingDirection(),this._refreshRequired(this.options.required),e},_refreshRequired:i.EditableValueUtils._refreshRequired,_ValidateReturnBoolean:i.EditableValueUtils._ValidateReturnBoolean,getNodeBySubId:function(e){return this._super(e)},validate:i.EditableValueUtils.validate,_AriaRequiredUnsupported:function(){return!1},widget:function(){return this._DoWrapElement()?this._wrapper:this.element}},!0),i.__registerWidget("oj.ojInputPassword",$.oj.inputBase,{version:"1.0.0",defaultElement:"<input>",widgetEventPrefix:"oj",_ATTR_CHECK:[{attr:"type",setMandatory:"password"}],_CLASS_NAMES:"oj-inputpassword-input",_WIDGET_CLASS_NAMES:"oj-inputpassword oj-form-control oj-component",options:{converter:void 0,pattern:""},getNodeBySubId:function(e){var t=this._superApply(arguments);return t||"oj-inputpassword-input"===e.subId&&(t=this.element?this.element[0]:null),t||null},_GetDefaultStyleClass:function(){return"oj-inputpassword"}}),i.__registerWidget("oj.ojInputText",$.oj.inputBase,{version:"1.0.0",defaultElement:"<input>",widgetEventPrefix:"oj",_ATTR_CHECK:[{attr:"type",setMandatory:"text"}],_CLASS_NAMES:"oj-inputtext-input",_WIDGET_CLASS_NAMES:"oj-inputtext oj-form-control oj-component",_ALLOWED_TYPES:["email","number","search","tel","text","url"],_CLICK_HANDLER_KEY:"click",options:{clearIcon:"never",converter:void 0,list:"",pattern:"",spellcheck:!1,virtualKeyboard:"auto"},_ComponentCreate:function(){var e=this._super(),t=this.options.clearIcon;return this._processClearIconAttr(t),this._AddHoverable(this._wrapper),this._SetInputType(this._ALLOWED_TYPES),e},_processClearIconAttr:function(e){var t=this._wrapper[0],i=t.querySelector("a.oj-inputtext-clear-icon-btn");if("never"===e||this.options.disabled||this.options.readOnly)i&&t.removeChild(i),t.classList.remove("oj-inputtext-clearicon-visible"),t.classList.remove("oj-inputtext-clearicon-conditional");else{var n;if(null===i)(i=document.createElement("a")).className="oj-inputtext-clear-icon-btn oj-component-icon oj-clickable-icon-nocontext",i.setAttribute("tabindex","-1"),i.setAttribute("target","_blank"),(n=document.createElement("span")).className="oj-inputtext-clear-icon",i.appendChild(n),t.appendChild(i),i.addEventListener(this._CLICK_HANDLER_KEY,this._onClearIconClickHandler.bind(this));if("always"===e)t.classList.add("oj-inputtext-clearicon-visible");else if(t.classList.remove("oj-inputtext-clearicon-visible"),"conditional"===e)t.classList.add("oj-inputtext-clearicon-conditional"),""!==(t.classList.contains("oj-complete")?this.element[0].value:this.options.value)?t.classList.remove("oj-form-control-empty-clearicon"):t.classList.add("oj-form-control-empty-clearicon");else t.classList.remove("oj-inputtext-clearicon-conditional"),t.classList.remove("oj-form-control-empty-clearicon")}},_AfterSetOption:function(e,t){switch(this._super(e,t),e){case"clearIcon":case"value":case"disabled":case"readOnly":this._processClearIconAttr(this.options.clearIcon);break;case"virtualKeyboard":this._SetInputType(this._ALLOWED_TYPES)}},_onInputHandler:function(e){this._super(e);var t=e.target,i=this._wrapper[0];"conditional"===this.options.clearIcon&&(""!==t.value?i.classList.remove("oj-form-control-empty-clearicon"):i.classList.add("oj-form-control-empty-clearicon"))},_onClearIconClickHandler:function(e){var t=this.element[0];t.value="",this._SetRawValue(t.value,e),t.focus(),this._wrapper[0].classList.add("oj-form-control-empty-clearicon")},_onBlurHandler:function(e){var t=this._wrapper[0],n=e.relatedTarget;n&&n.classList.contains("oj-inputtext-clear-icon-btn")&&n.parentElement&&i.DomUtils.isAncestorOrSelf(t,n.parentElement)?t.classList.add("oj-focus"):this._super(e)},getNodeBySubId:function(e){var t=this._superApply(arguments);return t||"oj-inputtext-input"===e.subId&&(t=this.element?this.element[0]:null),t||null},_GetDefaultStyleClass:function(){return"oj-inputtext"},_GetTranslationsSectionName:function(){return"oj-inputBase"},_SetInputType:i.EditableValueUtils._SetInputType}),i.__registerWidget("oj.ojTextArea",$.oj.inputBase,{version:"1.0.0",defaultElement:"<textarea>",widgetEventPrefix:"oj",_ATTR_CHECK:[],_CLASS_NAMES:"oj-textarea-input",_WIDGET_CLASS_NAMES:"oj-textarea oj-form-control oj-component",options:{converter:void 0,pattern:"",rows:void 0,spellcheck:!1},getNodeBySubId:function(e){var t=this._superApply(arguments);return t||"oj-textarea-input"===e.subId&&(t=this.element?this.element[0]:null),t||null},_GetDefaultStyleClass:function(){return"oj-textarea"},_GetTranslationsSectionName:function(){return"oj-inputBase"}}),i.CustomElementBridge.registerMetadata("inputBase","editableValue",{properties:{autocomplete:{type:"string",extension:{_COPY_TO_INNER_ELEM:!0}},autofocus:{type:"boolean",extension:{_COPY_TO_INNER_ELEM:!0}},name:{type:"string",extension:{_COPY_TO_INNER_ELEM:!0}},placeholder:{type:"string"},rawValue:{type:"string",readOnly:!0,writeback:!0},readonly:{type:"boolean"},required:{type:"boolean"},translations:{type:"Object",properties:{regexp:{type:"Object",properties:{messageDetail:{type:"string"},messageSummary:{type:"string"}}},required:{type:"Object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}}}},validators:{type:"Array"}},methods:{validate:{}},extension:{_INNER_ELEM:"input",_WIDGET_NAME:"inputBase",_GLOBAL_TRANSFER_ATTRS:["accesskey","aria-label","tabindex"],_ALIASED_PROPS:{readonly:"readOnly"}}}),i.CustomElementBridge.registerMetadata("oj-input-password","inputBase",{properties:{value:{type:"string",writeback:!0}},methods:{},extension:{_WIDGET_NAME:"ojInputPassword"}}),i.CustomElementBridge.register("oj-input-password",{metadata:i.CustomElementBridge.getMetadata("oj-input-password")}),i.CustomElementBridge.registerMetadata("oj-input-text","inputBase",{properties:{clearIcon:{type:"string",enumValues:["always","conditional","never"]},converter:{type:"Object"},list:{type:"string",extension:{_COPY_TO_INNER_ELEM:!0}},spellcheck:{type:"boolean",extension:{_ATTRIBUTE_ONLY:!0,_COPY_TO_INNER_ELEM:!0}},value:{type:"any",writeback:!0},virtualKeyboard:{type:"string",enumValues:["auto","email","number","search","tel","text","url"]}},methods:{},extension:{_WIDGET_NAME:"ojInputText"}}),i.CustomElementBridge.register("oj-input-text",{metadata:i.CustomElementBridge.getMetadata("oj-input-text")}),i.CustomElementBridge.registerMetadata("oj-text-area","inputBase",{properties:{converter:{type:"Object"},rows:{type:"number",extension:{_COPY_TO_INNER_ELEM:!0}},spellcheck:{type:"boolean",extension:{_ATTRIBUTE_ONLY:!0,_COPY_TO_INNER_ELEM:!0}},value:{type:"any",writeback:!0}},methods:{},extension:{_INNER_ELEM:"textarea",_WIDGET_NAME:"ojTextArea"}}),i.CustomElementBridge.register("oj-text-area",{metadata:i.CustomElementBridge.getMetadata("oj-text-area")}),i.LocaleData={},i.LocaleData.setBundle=function(e){i.LocaleData._bundle=e},i.LocaleData.getFirstDayOfWeek=function(){return i.LocaleData._getWeekData("firstDay")},i.LocaleData.getWeekendStart=function(){return i.LocaleData._getWeekData("weekendStart")},i.LocaleData.getWeekendEnd=function(){return i.LocaleData._getWeekData("weekendEnd")},i.LocaleData.getDayNames=function(e){(null==e||"abbreviated"!==e&&"narrow"!==e)&&(e="wide");var t=i.LocaleData._getCalendarData().days["stand-alone"][e];return[t.sun,t.mon,t.tue,t.wed,t.thu,t.fri,t.sat]},i.LocaleData.getMonthNames=function(e){(null==e||"abbreviated"!==e&&"narrow"!==e)&&(e="wide");var t=i.LocaleData._getCalendarData().months["stand-alone"][e];return[t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12]]},i.LocaleData.isMonthPriorToYear=function(){var e=i.LocaleData._getCalendarData().dateFormats.long.toUpperCase();return e.indexOf("M")<e.indexOf("Y")},i.LocaleData._getWeekData=function(e){var t=i.LocaleData.__getBundle(),n=i.LocaleData._getRegion()||"001",o=t.supplemental.weekData[e],s=o[n];return void 0===s&&(s=o["001"]),s},i.LocaleData._getCalendarData=function(){var e,t,n=i.LocaleData.__getBundle().main;for(t in n)if(n.hasOwnProperty(t)){e=n[t];break}return e.dates.calendars.gregorian},i.LocaleData._getRegion=function(){var e=i.Config.getLocale();if(e){var t=e.toUpperCase().split(/-|_/);if(t.length>=2){var n=t[1];if(4!=n.length)return n;if(t.length>=3)return t[2]}}return null},i.LocaleData.__getBundle=function(){var e=i.LocaleData._bundle;return e||(i.__isAmdLoaderPresent()?(i.Assert.assert(void 0!==ojld,"LocaleElements module must be loaded"),ojld):{})},i.LocaleData.__updateBundle=function(e){ojld=e},i.OraI18nUtils={},i.OraI18nUtils.numeringSystems={latn:"0123456789",arab:"",thai:""},i.OraI18nUtils.regexTrim=/^\s+|\s+$|\u200f|\u200e/g,i.OraI18nUtils.regexTrimNumber=/\s+|\u200f|\u200e/g,i.OraI18nUtils.regexTrimRightZeros=/0+$/g,i.OraI18nUtils.zeros=["0","00","000"],i.OraI18nUtils._ISO_DATE_REGEXP=/^\d{4}(?:-?\d{2}(?:-?\d{2})?)?(?:T\d{2}:?\d{2}(?::?\d{2}(?:\.\d{1,3})?)?(Z|[+-]\d{2}:\d{2})?)?$|^T\d{2}:?\d{2}(?::?\d{2}(?:\.\d{1,3})?)?(Z|[+-]\d{2}:\d{2})?$/,i.OraI18nUtils.getLocalTimeZoneOffset=function(){var e=(new Date).getTimezoneOffset();return i.OraI18nUtils.getTimeStringFromOffset("Etc/GMT",e,!1,!1)},i.OraI18nUtils._getTimeZone=function(e){if(!e||"string"!=typeof e)return null;var t=i.OraI18nUtils._ISO_DATE_REGEXP.exec(e);return null===t&&i.OraI18nUtils._throwInvalidISOString(e),void 0!==t[1]?t[1]:null},i.OraI18nUtils.dateToLocalIso=function(e){var t=i.OraI18nUtils.padZeros(e.getFullYear(),4)+"-"+i.OraI18nUtils.padZeros(e.getMonth()+1,2)+"-"+i.OraI18nUtils.padZeros(e.getDate(),2)+"T"+i.OraI18nUtils.padZeros(e.getHours(),2)+":"+i.OraI18nUtils.padZeros(e.getMinutes(),2)+":"+i.OraI18nUtils.padZeros(e.getSeconds(),2);return e.getMilliseconds()>0&&(t+="."+i.OraI18nUtils.trimRightZeros(i.OraI18nUtils.padZeros(e.getMilliseconds(),3))),t},i.OraI18nUtils.partsToIsoString=function(e){var t=i.OraI18nUtils.padZeros(e[0],4)+"-"+i.OraI18nUtils.padZeros(e[1],2)+"-"+i.OraI18nUtils.padZeros(e[2],2)+"T"+i.OraI18nUtils.padZeros(e[3],2)+":"+i.OraI18nUtils.padZeros(e[4],2)+":"+i.OraI18nUtils.padZeros(e[5],2);return e[6]>0&&(t+="."+i.OraI18nUtils.trimRightZeros(i.OraI18nUtils.padZeros(e[6],3))),t},i.OraI18nUtils.isoToLocalDate=function(e){return e&&"string"==typeof e?this._isoToLocalDateIgnoreTimezone(e):null},i.OraI18nUtils._isoToLocalDateIgnoreTimezone=function(e){var t=i.OraI18nUtils._IsoStrParts(e);return new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5],t[6])},i.OraI18nUtils._IsoStrParts=function(e){var t,n=e.split("T"),o=e.indexOf("T"),s=new Date,r=[s.getFullYear(),s.getMonth()+1,s.getDate(),0,0,0,0];if(""!==n[0]){var a=n[0].split("-");for(t=0;t<a.length;t++)r[t]=parseInt(a[t],10)}if(-1!==o){var l=n[1].split("."),u=l[0].split(":");for(t=0;t<u.length;t++)r[3+t]=parseInt(u[t],10);2===l.length&&l[1]&&(r[6]=parseInt(i.OraI18nUtils.zeroPad(l[1],3,!1),10))}return r},i.OraI18nUtils.getISOStrFormatInfo=function(e){var t={format:null,dateTime:null,timeZone:"",isoStrParts:null},n=i.OraI18nUtils._ISO_DATE_REGEXP.exec(e);return null===n&&i.OraI18nUtils._throwInvalidISOString(e),void 0===n[1]&&void 0===n[2]?(t.format="local",t.dateTime=e,t.isoStrParts=i.OraI18nUtils._IsoStrParts(t.dateTime),t):(t.timeZone=void 0!==n[1]?n[1]:n[2],"Z"===t.timeZone?t.format="zulu":t.format="offset",t.dateTime=e.substring(0,e.indexOf(t.timeZone)),t.isoStrParts=i.OraI18nUtils._IsoStrParts(t.dateTime),t)},i.OraI18nUtils._throwTimeZoneNotSupported=function(){var e,t;throw"time zone is not supported",t={errorCode:"timeZoneNotSupported"},(e=new Error("time zone is not supported")).errorInfo=t,e},i.OraI18nUtils._throwInvalidISOString=function(e){var t,i;throw i={errorCode:"invalidISOString",parameterMap:{isoStr:e}},(t=new Error("The string "+e+" is not a valid ISO 8601 string.")).errorInfo=i,t},i.OraI18nUtils.trim=function(e){return(e+"").replace(i.OraI18nUtils.regexTrim,"")},i.OraI18nUtils.trimRightZeros=function(e){return(e+"").replace(i.OraI18nUtils.regexTrimRightZeros,"")},i.OraI18nUtils.trimNumber=function(e){return(e+"").replace(i.OraI18nUtils.regexTrimNumber,"")},i.OraI18nUtils.startsWith=function(e,t){return 0===e.indexOf(t)},i.OraI18nUtils.toUpper=function(e){return e.split("").join(" ").toUpperCase()},i.OraI18nUtils.padZeros=function(e,t){var n,o=e+"";return t>1&&o.length<t?(n=i.OraI18nUtils.zeros[t-2]+o).substr(n.length-t,t):n=o},i.OraI18nUtils.zeroPad=function(e,t,i){var n;for(n=(e=""+e).length;n<t;n+=1)e=i?"0"+e:e+"0";return e},i.OraI18nUtils.getTimeStringFromOffset=function(e,t,n,o){var s=n?t>=0:t<0,r=(t=Math.abs(t))/60<<0,a=t%60,l=s?"-":"+";o&&(r=i.OraI18nUtils.zeroPad(r,2,!0));var u=e+l+r;return(a>0||o)&&(u+=":"+i.OraI18nUtils.zeroPad(a,2,!0)),u},i.OraI18nUtils.getNumberingSystemKey=function(e,t){if(void 0===t)return"latn";var n=i.OraI18nUtils.getNumberingExtension(t),o="symbols-numberSystem-"+n;return void 0===e.numbers[o]&&(n="latn"),n},i.OraI18nUtils.getBCP47Lang=function(e){return e.split("-")[0]},i.OraI18nUtils.getBCP47Region=function(e){var t=e.split("-");return 3===t.length?t[2]:2===t.length&&2===t[1].length?t[1]:"001"},i.OraI18nUtils.getNumberingExtension=function(e){var t=(e=e||"en-US").indexOf("-u-nu-"),i="latn";return-1!==t&&(i=e.substr(t+6,4)),i},i.OraI18nUtils.haveSamePropertiesLength=function(e){var t=0;for(var i in e)t++;return t},i.OraI18nUtils.getLocaleElementsMainNode=function(e){var t,i=e.main;for(var n in i){t=n;break}return i[t]},i.OraI18nUtils.getLocaleElementsMainNodeKey=function(e){var t,i=e.main;for(var n in i){t=n;break}return t},i.OraI18nUtils._toBoolean=function(e){if("string"==typeof e)switch(e.toLowerCase().trim()){case"true":case"1":return!0;case"false":case"0":return!1;default:return e}return e},i.OraI18nUtils.getGetOption=function(e,t){if(void 0===e)throw new Error("Internal "+t+" error. Default options missing.");return function(n,o,s,r){if(void 0!==e[n]){var a=e[n];switch(o){case"boolean":a=i.OraI18nUtils._toBoolean(a);break;case"string":a=String(a);break;case"number":a=Number(a);break;default:throw new Error("Internal error. Wrong value type.")}if(void 0!==s&&-1===s.indexOf(a)){for(var l=[],u=0;u<s.length;u++)l.push(s[u]);var h="The value '"+e[n]+"' is out of range for '"+t+"' options property '"+n+"'. Valid values: "+l,d=new RangeError(h),c={errorCode:"optionOutOfRange",parameterMap:{propertyName:n,propertyValue:e[n],propertyValueValid:l,caller:t}};throw d.errorInfo=c,d}return a}return r}},i.OraI18nUtils.matchString=function(e,t,n,o){void 0===o&&(o={sensitivity:"base",usage:"sort"});var s,r,a=i.OraI18nUtils.getGetOption(o,"oj.OraI18nUtils.matchString");o.usage=a("usage","string",["sort","search"],"sort"),o.sensitivity=a("sensitivity","string",["base","accent","case","variant"],"base");var l=e.length,u=t.length-1;for(s=0;s<l;s++)for(r=0;r<3;r++){var h=l-s;if(h=Math.min(h,u+r),0===e.substr(s,h).localeCompare(t,n,o))return[s,s+h-1]}return null};var j,H,U,k,B,F,V={fullYear:{pos:0,pad:4},month:{pos:1,pad:2},date:{pos:2,pad:2},hours:{pos:3,pad:2},minutes:{pos:4,pad:2},seconds:{pos:5,pad:2},milliseconds:{pos:6,pad:3},timeZone:{pos:7}};function G(){this.Init()}function z(e,t){var i={};return i.value=t.value,i}function K(e,t,i){return"pieCenter"===e&&t.template&&(t._renderer=ee(i,t.template)),{pieCenter:t}}function W(e,t,i){return"optionTemplate"===e&&null!==t?{optionRenderer:function(e,t){return function(i){var n,o;return n=i.parentElement,o=e.createChildContext(i.data,null,function(e){e.$optionContext=i}),ko.renderTemplate(t,o,null,n),null}}(i,String(t))}:null}function Y(e,t){this.Init(e,t)}function q(e,t){var i={};return function(n){var o,s;return o=n.parentElement,s=e.createChildContext(n.data,null,function(e){e.$key=n.key,e.$metadata=n.metadata,e.$headerContext=n}),Z(n,t,o,s,i),null}}function X(e,t){var i={};return function(n){var o,s;return o=n.parentElement,s=e.createChildContext(n.data,null,function(e){e.$keys=n.keys,e.$metadata=n.metadata,e.$cellContext=n,e.$cell=n.cell}),Z(n,t,o,s,i),null}}function Z(e,t,i,n,o){var s,r;for(s=function(e,t){var i=t[e];null==i&&(i=ko.utils.parseHtmlFragment(document.getElementById(e).innerHTML),t[e]=i);return i.map(function(e){return e.cloneNode(!0)})}(function(e,t){if("function"==typeof e)return e(t);return e}(t,e),o),ko.virtualElements.setDomNodeChildren(i,s),ko.applyBindingsToDescendants(n,i),r=0;r<i.childNodes.length;r++)if(1==i.childNodes[r].nodeType){$(i.childNodes[r])._ojDetectCleanData({cleanParent:!0});break}}function J(e,t,i){return"template"===e?{_templateFunction:te(i,t)}:null}function Q(e,t){for(var i=0;i<e.length;i++){var n=e[i],o=n.key,s=n.value;if(null!=o&&null!=s&&t(o.trim(),s.trim()))break}}function ee(e,t){return function(i){var n=e.createChildContext(i.context);return ko.renderTemplate(t,n,{afterRender:function(e){$(e)._ojDetectCleanData()}},i.parentElement),null}}function te(e,t){return function(i){var n=e.createChildContext(i.data);return ko.renderTemplate(t,n,{afterRender:function(e){$(e)._ojDetectCleanData()}},i.parentElement),null}}function ie(e,t,i){return"tooltip"===e&&t.template&&(t._renderer=ee(i,t.template)),{tooltip:t}}function ne(e,t,i){if("item"==e){var n=t.template;return null!=n&&(t.renderer=function(e,t){return function(i){var n,o;return n=i.parentElement,o=e.createChildContext(i.data,null,function(e){e.$itemContext=i}),ko.renderTemplate(t,o,{afterRender:function(e){$(e)._ojDetectCleanData()}},n,"replaceNode"),null}}(i,n)),{item:t}}return null}function oe(e,t,i){return"center"===e&&t.template&&(t._renderer=ee(i,t.template)),{center:t}}function se(e,t,i){return"rootNodeContent"===e&&t.template&&(t._renderer=ee(i,t.template)),{rootNodeContent:t}}i.OraI18nUtils.isoToDate=function(e){return new Date(this._normalizeIsoString(e))},i.OraI18nUtils._copyTimeOver=function(e,t){if(!e||!t)throw new Error("Provided invalid arguments");t=this._normalizeIsoString(t);var i=e.indexOf("T"),n=t.indexOf("T");return t.substring(0,n)+(-1!==i?e.substring(i):"T00:00:00.000")},i.OraI18nUtils._clearTime=function(e){return this._dateTime(e,{hours:0,minutes:0,seconds:0,milliseconds:0})},i.OraI18nUtils._dateTime=function(e,t,i){if(!e||!t)throw new Error("Invalid argument invocation");var n,o,s,r=null,a=null,l=V,u=this.padZeros,h=this._normalizeIsoString(e),d=/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):?(\d{2})?\.?(\d{3})?(.*)?/.exec(h);if(!d)throw new Error("Unable to capture anything");if(d=d.slice(1),Array.isArray(t)){r={};for(var c=0,p=t.length;c<p;c++)if((a=t[c])in l){if(o=d[n=l[a].pos],i&&"timeZone"===a)throw new Error("Dude you tried to ask timezone to be parsed");if(i){var _=parseInt(o,10);r[a]=1===n?_-1:_}else r[a]=o}}else if($.isPlainObject(t)){for(var m in t)n=(s=l[m]).pos,o=t[m],1===n&&"number"==typeof o&&o++,d[n]=s.pad?u(o,s.pad):o;r=d[0]+"-"+d[1]+"-"+d[2]+"T"+d[3]+":"+d[4]+":"+d[5]+(d.length>6&&d[6]?"."+d[6]+(8===d.length&&d[7]?d[7]:""):"")}return r},i.OraI18nUtils._normalizeIsoString=function(e){if(!e)throw new Error("Provided invalid arguments");var t,i=(new Date).toISOString(),n=i.substring(0,i.indexOf("T")),o=e.indexOf("T"),s=-1===o?e:e.substring(0,o);return(s=s||n)+(-1!==o?(t=e.substring(o)).split(":").length>1?t:t+":00":"T00:00:00.000")},i.OraI18nUtils.formatString=function(e,t){var i,n,o=t.length;for(i=0;i<o;i++)n="{"+i+"}",e=e.replace(n,t[i]);return e},i.OraI18nUtils.getInitials=function(e,t){var i,n=0,o=0;if(void 0!==e&&e.length>0&&(n=e.charCodeAt(0)),n>=1536&&n<=1791)return"";if(n>=2304&&n<=2431)return e.charAt(0);if(n>=3584&&n<=3711)return e.charAt(0);if(n>=4352&&n<=4607||n>=12592&&n<=12687||n>=43360&&n<=43391||n>=44032&&n<=55295)return e;if(void 0!==t&&t.length>0&&(n=t.charCodeAt(0)),n>=11904&&n<=12255||n>=12288&&n<=12591||n>=12688&&n<=12799||n>=13056&&n<=19903||n>=19968&&n<=40959||n>=63744&&n<=64255)return t;if(n>=55296&&n<=56319){if(t.length<2)return"";if((o=t.charCodeAt(1))<56320||o>57343)return"";if((i=1024*(n-55296)+(o-56320)+65536)>=110592&&i<=110847||i>=127488&&i<=127743||i>=131072&&i<=173791||i>=173824&&i<=177983||i>=177984&&i<=178207||i>=178208&&i<=183983||i>=194560&&i<=195103)return t}return n="",o="",void 0!==e&&e.length>0&&(n=e.charAt(0).toUpperCase()),void 0!==t&&t.length>0&&(o=t.charAt(0).toUpperCase()),n+o},i.Validation={},i.Validation._converterFactories={},i.Validation._validatorFactories={},i.Validation._defaultConverterFactories={},i.Validation._defaultValidatorFactories={},i.Validation._CONTRACTS={converter:{name:"oj.ConverterFactory",type:i.ConverterFactory},validator:{name:"oj.ValidatorFactory",type:i.ValidatorFactory}},i.Validation.converterFactory=function(e,t){var n;return e&&!t?n=i.Validation._getFactory(e,i.Validation._converterFactories):e&&t&&(n=i.Validation._registerFactory(e,t,i.Validation._converterFactories,i.Validation._CONTRACTS.converter)),n},i.Validation.validatorFactory=function(e,t){var n;return e&&!t?n=i.Validation._getFactory(e,i.Validation._validatorFactories):e&&t&&(n=i.Validation._registerFactory(e,t,i.Validation._validatorFactories,i.Validation._CONTRACTS.validator)),n},i.Validation.getDefaultConverterFactory=function(e){return i.Validation._getFactory(e,i.Validation._defaultConverterFactories)},i.Validation.getDefaultValidatorFactory=function(e){return i.Validation._getFactory(e,i.Validation._defaultValidatorFactories)},i.Validation.__registerDefaultConverterFactory=function(e,t){var n=i.Validation._CONTRACTS.converter;i.Validation._registerFactory(e,t,i.Validation._defaultConverterFactories,n),i.Validation._registerFactory(e,t,i.Validation._converterFactories,n)},i.Validation.__registerDefaultValidatorFactory=function(e,t){var n=i.Validation._CONTRACTS.validator;i.Validation._registerFactory(e,t,i.Validation._defaultValidatorFactories,n),i.Validation._registerFactory(e,t,i.Validation._validatorFactories,n)},i.Validation._doImplementsCheck=function(e,t,n){if(t&&!i.Validation._quacksLike(e,t))throw new Error("Factory instance does not implement the methods expected by the factory of type "+n)},i.Validation._getFactory=function(e,t){i.Assert.assertString(e);var n=null;e&&(n=(t[e=e.toLowerCase()]||{}).instance||null);return n},i.Validation._quacksLike=function(e,t){var n,o=!0;for(n in i.Assert.assertObject(e),i.Assert.assertObject(t),t)if(t.hasOwnProperty(n)&&"function"==typeof t[n]&&!e[n]&&"function"!=typeof e[n]){o=!1;break}return o},i.Validation._registerFactory=function(e,t,n,o){if(i.Assert.assertString(e),i.Assert.assertObject(t),e){var s={};s.instance=t,i.Validation._doImplementsCheck(t,o.type,o.name),n[e.toLowerCase()]=s}},i.ConverterFactory={CONVERTER_TYPE_NUMBER:"number",CONVERTER_TYPE_DATETIME:"datetime",CONVERTER_TYPE_COLOR:"color",createConverter:function(e){}},i.ValidatorFactory={VALIDATOR_TYPE_REQUIRED:"required",VALIDATOR_TYPE_REGEXP:"regexp",VALIDATOR_TYPE_NUMBERRANGE:"numberRange",VALIDATOR_TYPE_LENGTH:"length",VALIDATOR_TYPE_DATETIMERANGE:"dateTimeRange",VALIDATOR_TYPE_DATERESTRICTION:"dateRestriction",createValidator:function(e){}},i.Converter=function(e){this.Init(e)},i.Object.createSubclass(i.Converter,i.Object,"oj.Converter"),i.Converter.prototype.Init=function(e){i.Converter.superclass.Init.call(this),this._options=e},i.Converter.prototype.getOptions=function(){return this._options||{}},i.Converter.prototype.resolvedOptions=function(){var e={};return $.extend(e,this._options),e},i.ConverterError=function(e,t){var n={summary:e,detail:t,severity:i.Message.SEVERITY_LEVEL.ERROR};this.Init(n)},i.ConverterError.prototype=new Error,i.ConverterError.prototype.Init=function(e){var t=e.detail,i=e.summary;this._message=e,this.name="Converter Error",this.message=t||i},i.ConverterError.prototype.getMessage=function(){return this._message},i.Validator=function(e){this.Init(e)},i.Object.createSubclass(i.Validator,i.Object,"oj.Validator"),i.Validator.prototype.Init=function(e){i.Validator.superclass.Init.call(this)},i.ValidatorError=function(e,t){var n={summary:e,detail:t,severity:i.Message.SEVERITY_LEVEL.ERROR};this.Init(n)},i.ValidatorError.prototype=new Error,i.ValidatorError.prototype.Init=function(e){var t=e.detail,i=e.summary;this._message=e,this.name="Validator Error",this.message=t||i},i.ValidatorError.prototype.getMessage=function(){return this._message},function(){function e(e,t){return"#"+function(e,t){return function(e,t,i,o){var s=[n(Math.round(e).toString(16)),n(Math.round(t).toString(16)),n(Math.round(i).toString(16))];if(o&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1))return s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0);return s.join("")}(e._r,e._g,e._b,t)}(e,t)}function t(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var i=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),i&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function n(e){return 1==e.length?"0"+e:""+e}i.ColorConverter=function(e){this.Init(e)},i.Object.createSubclass(i.ColorConverter,i.Converter,"oj.ColorConverter"),i.ColorConverter.prototype.Init=function(e){(e=e||{}).format=e.format||"rgb",i.ColorConverter.superclass.Init.call(this,e)},i.ColorConverter.prototype.format=function(n){var o=this._getFormat(),s=null;return"rgb"===o?s=n.toString():"hsl"===o?s=function(e){var i=function(e,i,n){e=t(e,255),i=t(i,255),n=t(n,255);var o,s,r=Math.max(e,i,n),a=Math.min(e,i,n),l=(r+a)/2;if(r==a)o=s=0;else{var u=r-a;switch(s=l>.5?u/(2-r-a):u/(r+a),r){case e:o=(i-n)/u+(i<n?6:0);break;case i:o=(n-e)/u+2;break;case n:o=(e-i)/u+4}o/=6}return{h:o,s:s,l:l}}(e._r,e._g,e._b),n=Math.round(360*i.h),o=Math.round(100*i.s),s=Math.round(100*i.l);return 1==e._a?"hsl("+n+", "+o+"%, "+s+"%)":"hsla("+n+", "+o+"%, "+s+"%, "+e._a+")"}(n):"hex"===o?s=e(n):"hex3"===o?s=e(n,!0):"hsv"===o?s=function(e){var i=function(e,i,n){e=t(e,255),i=t(i,255),n=t(n,255);var o,s,r=Math.max(e,i,n),a=Math.min(e,i,n),l=r,u=r-a;if(s=0===r?0:u/r,r==a)o=0;else{switch(r){case e:o=(i-n)/u+(i<n?6:0);break;case i:o=(n-e)/u+2;break;case n:o=(e-i)/u+4}o/=6}return{h:o,s:s,v:l}}(e._r,e._g,e._b),n=Math.round(360*i.h),o=Math.round(100*i.s),s=Math.round(100*i.v);return 1==e._a?"hsv("+n+", "+o+"%, "+s+"%)":"hsva("+n+", "+o+"%, "+s+"%, "+e._a+")"}(n):function(){throw"Invalid color format","Invalid color format option specification",new i.ConverterError("Invalid color format","Invalid color format option specification")}(),s||i.ColorConverter.superclass.format.call(this,n)},i.ColorConverter.prototype.parse=function(e){try{return new i.Color(e)}catch(e){!function(){throw"Invalid color specification","Color specification does not conform to CSS3 standard",new i.ConverterError("Invalid color specification","Color specification does not conform to CSS3 standard")}()}},i.ColorConverter.prototype.getHint=function(){return this._getFormat()},i.ColorConverter.prototype.resolvedOptions=function(){return{format:this._getFormat()}},i.ColorConverter.prototype._getFormat=function(){return i.ColorConverter.superclass.getOptions.call(this).format}}(),i.IntlConverterUtils={},i.IntlConverterUtils.isoToDate=function(e){return i.OraI18nUtils.isoToDate(e)},i.IntlConverterUtils.isoToLocalDate=function(e){return i.OraI18nUtils.isoToLocalDate(e)},i.IntlConverterUtils.dateToLocalIso=function(e){return i.OraI18nUtils.dateToLocalIso(e)},i.IntlConverterUtils._getTimeZone=function(e){return i.OraI18nUtils._getTimeZone(e)},i.IntlConverterUtils.getLocalTimeZoneOffset=function(){return i.OraI18nUtils.getLocalTimeZoneOffset()},i.IntlConverterUtils.getConverterInstance=function(e){var t,n="",o={},s=null;return e&&("object"==typeof e&&(e instanceof i.Converter||e.parse&&"function"==typeof e.parse||e.format&&"function"==typeof e.format?s=e:(n=e.type,o=e.options||{})),s||(n=n||e)&&"string"==typeof n&&(null===(t=i.Validation.converterFactory(n))&&i.Logger.error("Converter of type "+n+" cannot be found. Make sure the correct converter/validation module is included."),s=t.createConverter(o))),s},i.IntlConverterUtils._minMaxIsoString=function(e,t){if(e){var i=(t=t||this.dateToLocalIso(new Date)).indexOf("T");0===e.indexOf("T")&&i>0&&(e=t.substring(0,i)+e)}return e},i.IntlConverterUtils.__getConverterOptionError=function(e,t){i.Assert.assertObject(t);var n,o,s="",r="",a=t.propertyName;return"optionTypesMismatch"===e?(n=t.requiredPropertyName,o=t.requiredPropertyValueValid,s=i.Translations.getTranslatedString("oj-converter.optionTypesMismatch.summary",{propertyName:a,propertyValue:t.propertyValue,requiredPropertyName:n}),r=i.IntlConverterUtils._getOptionValueDetailMessage(n,o)):"optionTypeInvalid"===e?(a=t.propertyName,o=t.propertyValueValid,s=i.Translations.getTranslatedString("oj-converter.optionTypeInvalid.summary",{propertyName:a}),r=i.IntlConverterUtils._getOptionValueDetailMessage(a,o)):"optionOutOfRange"===e?(s=i.Translations.getTranslatedString("oj-converter.optionOutOfRange.summary",{propertyName:a,propertyValue:t.propertyValue}),o=t.propertyValueValid,r=i.IntlConverterUtils._getOptionValueDetailMessage(a,o)):"optionValueInvalid"===e&&(s=i.Translations.getTranslatedString("oj-converter.optionValueInvalid.summary",{propertyName:a,propertyValue:t.propertyValue}),o=t.propertyValueHint,r=i.IntlConverterUtils._getOptionValueDetailMessage(a,o)),new i.ConverterError(s,r)},i.IntlConverterUtils._getOptionValueDetailMessage=function(e,t){var n;return t?("string"==typeof t?n="oj-converter.optionHint.detail":(n="oj-converter.optionHint.detail-plural",t=t.join(i.Translations.getTranslatedString("oj-converter.plural-separator"))),i.Translations.getTranslatedString(n,{propertyName:e,propertyValueValid:t})):""},i.IntlConverterUtils.__getNullFormattedValue=function(){return""},i.IntlConverterUtils._copyTimeOver=function(e,t){return i.OraI18nUtils._copyTimeOver(e,t)},i.IntlConverterUtils._clearTime=function(e){return i.OraI18nUtils._clearTime(e)},i.IntlConverterUtils._dateTime=function(e,t,n){return i.OraI18nUtils._dateTime(e,t,n)},i.IntlConverterUtils._normalizeIsoString=function(e){return i.OraI18nUtils._normalizeIsoString(e)},i.IntlConverterUtils.getInitials=function(e,t){return i.OraI18nUtils.getInitials(e,t)},i.LengthValidator=function(e){this.Init(e)},i.LengthValidator.defaults={countBy:"codeUnit"},i.Object.createSubclass(i.LengthValidator,i.Validator,"oj.LengthValidator"),i.LengthValidator.prototype.Init=function(e){var t=e.countBy;if(i.LengthValidator.superclass.Init.call(this),this._min=void 0!==e.min?parseInt(e.min,10):null,this._max=void 0!==e.max?parseInt(e.max,10):null,isNaN(this._min))throw new Error("length validator's min option is not a number. min option is "+e.min);if(isNaN(this._max))throw new Error("length validator's max option is not a number. max option is "+e.min);if(null!==this._min&&this._min<0)throw new Error("length validator's min option cannot be less than 0. min option is "+e.min);if(null!==this._max&&this._max<1)throw new Error("length validator's max option cannot be less than 1. max option is "+e.max);this._countBy=void 0===t?i.LengthValidator.defaults.countBy:t,e&&(this._hint=e.hint||{},this._customMessageSummary=e.messageSummary||{},this._customMessageDetail=e.messageDetail||{})},i.LengthValidator.prototype.getHint=function(){var e,t=null,n=this._hint,o=n.exact,s=n.inRange,r=n.max,a=n.min,l=this._max,u=this._min,h=i.Translations;return null!==u&&null!==l?u!==l?(e={min:u,max:l},t=s?h.applyParameters(s,e):h.getTranslatedString("oj-validator.length.hint.inRange",e)):(e={length:u},t=o?h.applyParameters(o,e):h.getTranslatedString("oj-validator.length.hint.exact",e)):null!==u?(e={min:u},t=a?h.applyParameters(a,e):h.getTranslatedString("oj-validator.length.hint.min",e)):null!==l&&(e={max:l},t=r?h.applyParameters(r,e):h.getTranslatedString("oj-validator.length.hint.max",e)),t},i.LengthValidator.prototype.validate=function(e){var t,n,o,s=this._customMessageDetail,r=this._customMessageSummary,a="",l=this._max,u=r.tooLong,h=r.tooShort,d=s.tooLong,c=s.tooShort,p=this._min,_="",m=i.Translations;if(o=""+e,t=this._getLength(o),(null===p||t>=this._min)&&(null===l||t<=this._max))return o;throw t<this._min?(n={value:e,min:p},_=h?m.applyParameters(h,n):m.getTranslatedString("oj-validator.length.messageSummary.tooShort"),a=c?m.applyParameters(c,n):m.getTranslatedString("oj-validator.length.messageDetail.tooShort",n)):(n={value:e,max:l},_=u?m.applyParameters(u,n):m.getTranslatedString("oj-validator.length.messageSummary.tooLong"),a=d?m.applyParameters(d,n):m.getTranslatedString("oj-validator.length.messageDetail.tooLong",n)),new i.ValidatorError(_,a)},i.LengthValidator.prototype._getLength=function(e){var t,n,o=this._countBy.toLowerCase(),s=e.length,r=0;switch(o){case"codepoint":for(t=0;t<s;t++)55296==(63488&e.charCodeAt(t))&&r++;i.Assert.assert(r%2==0,"the number of surrogate chars must be an even number."),n=s-r/2;break;case"codeunit":default:n=s}return n},i.RegExpValidator=function(e){this.Init(e)},i.Object.createSubclass(i.RegExpValidator,i.Validator,"oj.RegExpValidator"),i.RegExpValidator._BUNDLE_KEY_DETAIL="oj-validator.regExp.detail",i.RegExpValidator._BUNDLE_KEY_SUMMARY="oj-validator.regExp.summary",i.RegExpValidator.prototype.Init=function(e){i.RegExpValidator.superclass.Init.call(this),this._options=e},i.RegExpValidator.prototype.validate=function(e){var t,n,o,s,r=this._options&&this._options.pattern||"";if(null==e||""===e)return!0;var a,l,u,h="^("+r+")$";if(null===(u=(e=e||0===e?e.toString():e).match(h))||u[0]!==e)throw this._options&&(s=this._options.messageSummary||null,t=this._options.messageDetail||null,n=this._options&&this._options.label||""),o={label:n,pattern:r,value:e},l=s?i.Translations.applyParameters(s,o):i.Translations.getTranslatedString(this._getSummaryKey(),o),a=t?i.Translations.applyParameters(t,o):i.Translations.getTranslatedString(this._getDetailKey(),o),new i.ValidatorError(l,a);return!0},i.RegExpValidator.prototype.getHint=function(){var e=null,t={};return this._options&&this._options.hint&&(t={pattern:this._options.pattern},e=i.Translations.applyParameters(this._options.hint,t)),e},i.RegExpValidator.prototype._getSummaryKey=function(){return i.RegExpValidator._BUNDLE_KEY_SUMMARY},i.RegExpValidator.prototype._getDetailKey=function(){return i.RegExpValidator._BUNDLE_KEY_DETAIL},i.RequiredValidator=function(e){this.Init(e)},i.Object.createSubclass(i.RequiredValidator,i.Validator,"oj.RequiredValidator"),i.RequiredValidator._BUNDLE_KEY_DETAIL="oj-validator.required.detail",i.RequiredValidator._BUNDLE_KEY_SUMMARY="oj-validator.required.summary",i.RequiredValidator.prototype.Init=function(e){i.RequiredValidator.superclass.Init.call(this),this._options=e},i.RequiredValidator.prototype.validate=function(e){var t,n,o,s,r="",a={};if("number"==typeof e&&0===e||e&&0!==e.length)return!0;throw this._options&&(t=this._options.messageDetail||this._options.message||null,s=this._options.messageSummary||null,r=this._options.label||""),a={label:r},o=s?i.Translations.applyParameters(s,a):i.Translations.getTranslatedString(this._getSummaryKey(),a),n=t?i.Translations.applyParameters(t,a):i.Translations.getTranslatedString(this._getDetailKey(),a),new i.ValidatorError(o,n)},i.RequiredValidator.prototype.getHint=function(){var e="";return this._options&&this._options.hint&&(e=i.Translations.getTranslatedString(this._options.hint)),e},i.RequiredValidator.prototype._getSummaryKey=function(){return i.RequiredValidator._BUNDLE_KEY_SUMMARY},i.RequiredValidator.prototype._getDetailKey=function(){return i.RequiredValidator._BUNDLE_KEY_DETAIL},i.ColorConverterFactory=function(){return{createConverter:function(e){return function(e){return new i.ColorConverter(e)}(e)}}}(),i.Validation.__registerDefaultConverterFactory(i.ConverterFactory.CONVERTER_TYPE_COLOR,i.ColorConverterFactory),i.RequiredValidatorFactory=function(){return{createValidator:function(e){return function(e){return new i.RequiredValidator(e)}(e)}}}(),i.Validation.__registerDefaultValidatorFactory(i.ValidatorFactory.VALIDATOR_TYPE_REQUIRED,i.RequiredValidatorFactory),i.RegExpValidatorFactory=function(){return{createValidator:function(e){return function(e){return new i.RegExpValidator(e)}(e)}}}(),i.Validation.__registerDefaultValidatorFactory(i.ValidatorFactory.VALIDATOR_TYPE_REGEXP,i.RegExpValidatorFactory),i.LengthValidatorFactory=function(){return{createValidator:function(e){return function(e){return new i.LengthValidator(e)}(e)}}}(),i.Validation.__registerDefaultValidatorFactory(i.ValidatorFactory.VALIDATOR_TYPE_LENGTH,i.LengthValidatorFactory),i.NumberConverter=function(){this.Init()},i.Object.createSubclass(i.NumberConverter,i.Converter,"oj.NumberConverter"),i.NumberConverter.prototype.Init=function(e){i.NumberConverter.superclass.Init.call(this,e)},i.NumberConverter.prototype.format=function(e){return i.NumberConverter.superclass.format.call(this,e)},i.NumberConverter.prototype.parse=function(e){return i.NumberConverter.superclass.parse.call(this,e)},i.IntlNumberConverter=function(e){this.Init(e)},i.Object.createSubclass(i.IntlNumberConverter,i.NumberConverter,"oj.IntlNumberConverter"),i.IntlNumberConverter.prototype.Init=function(e){i.IntlNumberConverter.superclass.Init.call(this,e)},i.IntlNumberConverter.prototype._getWrapped=function(){return this._wrapped||(this._wrapped=j.getInstance()),this._wrapped},i.IntlNumberConverter.prototype.format=function(e){var t,n,o;if(null==e||"string"==typeof e&&0===i.StringUtils.trim(""+e).length||"number"==typeof e&&isNaN(e))return i.IntlConverterUtils.__getNullFormattedValue();t=i.Config.getLocale(),n=i.LocaleData.__getBundle(),o=this.resolvedOptions();try{return this._getWrapped().format(e,n,o,t)}catch(t){throw this._processConverterError(t,e)}},i.IntlNumberConverter.prototype.getHint=function(){return null},i.IntlNumberConverter.prototype.getOptions=function(){return i.IntlNumberConverter.superclass.getOptions.call(this)},i.IntlNumberConverter.prototype.parse=function(e){var t,n,o;if(null==e||""===e)return null;t=i.Config.getLocale(),n=i.LocaleData.__getBundle(),o=this.resolvedOptions();try{return this._getWrapped().parse(i.StringUtils.trim(e),n,o,t)}catch(t){throw this._processConverterError(t,e)}},i.IntlNumberConverter.prototype.resolvedOptions=function(){var e,t=i.Config.getLocale();if(t!==this._locale||!this._resolvedOptions){e=i.LocaleData.__getBundle();try{if(!e)return i.Logger.error("locale bundle for the current locale %s is unavailable",t),{};this._resolvedOptions=this._getWrapped().resolvedOptions(e,this.getOptions(),t),this._locale=t}catch(e){throw this._processConverterError(e)}}return this._resolvedOptions},i.IntlNumberConverter.prototype._processConverterError=function(e,t){var n,o,s,r,a,l,u=e.errorInfo;if(u){switch(o=u.errorCode,r=u.parameterMap,i.Assert.assertObject(r),r.propertyName,o){case"optionTypesMismatch":case"optionTypeInvalid":case"optionOutOfRange":case"optionValueInvalid":n=i.IntlConverterUtils.__getConverterOptionError(o,r);break;case"decimalFormatMismatch":a="oj-converter.number.decimalFormatMismatch.summary";break;case"currencyFormatMismatch":a="oj-converter.number.currencyFormatMismatch.summary";break;case"percentFormatMismatch":a="oj-converter.number.percentFormatMismatch.summary";break;case"unsupportedParseFormat":l=i.Translations.getTranslatedString("oj-converter.number.shortLongUnsupportedParse.summary"),s=i.Translations.getTranslatedString("oj-converter.number.shortLongUnsupportedParse.detail"),n=new i.ConverterError(l,s)}a&&(l=i.Translations.getTranslatedString(a,{value:t||r.value,format:r.format}),s=i.Translations.getTranslatedString("oj-converter.hint.detail",{exampleValue:this._getHintValue()}),n=new i.ConverterError(l,s))}return n||(l=e.message,s=e.message,n=new i.ConverterError(l,s)),n},i.IntlNumberConverter.prototype._getHintValue=function(){var e="";try{e=this.format(12345.98765)}catch(t){t instanceof i.ConverterError&&(e="",i.Logger.error("error retrieving hint value in format"))}finally{return e}},i.NumberRangeValidator=function(e){this.Init(e)},i.Object.createSubclass(i.NumberRangeValidator,i.Validator,"oj.NumberRangeValidator"),i.NumberRangeValidator.prototype.Init=function(e){i.NumberRangeValidator.superclass.Init.call(this),e&&(this._min=e.min,this._max=e.max,this._converter=i.IntlConverterUtils.getConverterInstance(e.converter),this._hint=e.hint||{},this._customMessageSummary=e.messageSummary||{},this._customMessageDetail=e.messageDetail||{})},i.NumberRangeValidator.prototype.validate=function(e){var t=e?e.toString():e,n=parseFloat(t),o=this._customMessageSummary,s=this._customMessageDetail,r=s.rangeOverflow,a=s.rangeUnderflow,l=s.exact,u=o.rangeOverflow,h=o.rangeUnderflow,d=void 0!==this._min?parseFloat(this._min):null,c=void 0!==this._max?parseFloat(this._max):null,p=d&&this._converter?this._converter.format(d):d,_=c&&this._converter?this._converter.format(c):c,m="",g="",f=null,v=i.Translations;if(null===e)return e;if(null!==d&&null!==c){if(n>=d&&n<=c||d>c)return t}else if(null!==d){if(n>=d)return t}else if(null===c||n<=c)return t;throw null!==c&&null!==d&&d===c?(f={value:e,num:_},g=l?v.applyParameters(l,f):v.getTranslatedString("oj-validator.range.number.messageDetail.exact",f),n>c?m=u||v.getTranslatedString("oj-validator.range.number.messageSummary.rangeOverflow"):n<d&&(m=u?h:v.getTranslatedString("oj-validator.range.number.messageSummary.rangeUnderflow"))):null!==c&&n>c?(f={value:e,max:_},m=u||v.getTranslatedString("oj-validator.range.number.messageSummary.rangeOverflow"),g=r?v.applyParameters(r,f):v.getTranslatedString("oj-validator.range.number.messageDetail.rangeOverflow",f)):null!==d&&n<d&&(f={value:e,min:p},m=h||v.getTranslatedString("oj-validator.range.number.messageSummary.rangeUnderflow"),g=a?v.applyParameters(a,f):v.getTranslatedString("oj-validator.range.number.messageDetail.rangeUnderflow",f)),new i.ValidatorError(m,g)},i.NumberRangeValidator.prototype.getHint=function(){var e=null,t=this._hint,n=t.inRange,o=t.exact,s=t.min,r=t.max,a=i.Translations,l=void 0!==this._min?parseFloat(this._min):null,u=void 0!==this._max?parseFloat(this._max):null,h=l&&this._converter?this._converter.format(l):l,d=u&&this._converter?this._converter.format(u):u;return null!==l&&null!==u?e=l!==u?n?a.applyParameters(n,{min:h,max:d}):a.getTranslatedString("oj-validator.range.number.hint.inRange",{min:h,max:d}):o?a.applyParameters(o,{num:h}):a.getTranslatedString("oj-validator.range.number.hint.exact",{num:h}):null!==l?e=s?a.applyParameters(s,{min:h}):a.getTranslatedString("oj-validator.range.number.hint.min",{min:h}):null!==u&&(e=r?a.applyParameters(r,{max:d}):a.getTranslatedString("oj-validator.range.number.hint.max",{max:d})),e},i.NumberConverterFactory=function(){return{createConverter:function(e){return function(e){return new i.IntlNumberConverter(e)}(e)}}}(),i.Validation.__registerDefaultConverterFactory(i.ConverterFactory.CONVERTER_TYPE_NUMBER,i.NumberConverterFactory),i.NumberRangeValidatorFactory=function(){return{createValidator:function(e){return function(e){return new i.NumberRangeValidator(e)}(e)}}}(),i.Validation.__registerDefaultValidatorFactory(i.ValidatorFactory.VALIDATOR_TYPE_NUMBERRANGE,i.NumberRangeValidatorFactory),j=function(){var e,t,n,o,s,r,a,l,u,h,d,c,p,_,m,g,f,v,C,y,b,S,E,T,D,A,I,O,w,R,x,L,N,P,M,j,H,U=/^[+\-]?infinity$/i,k=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/,B=/([^+-.0-9]*)([+\-]?\d*\.?\d*(E[+\-]?\d+)?).*$/,F=/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,V=/(^0\.0*)([^0].*$)/,G={trillion:[1e14,1e13,1e12],billion:[1e11,1e10,1e9],million:[1e8,1e7,1e6],thousand:[1e5,1e4,1e3]},$={trillion:1e12,billion:1e9,million:1e6,thousand:1e3},z={HALF_UP:"ceil",HALF_DOWN:"floor",DEFAULT:"round"};e=function(e,t,i){var n;for(n=e.length;n<t;n+=1)e=i?"0"+e:e+"0";return e},f=function(e,t,i,n){var o=new RangeError(e+" is out of range.  Enter a value between "+t+" and "+i+" for "+n),s={errorCode:"numberOptionOutOfRange",parameterMap:{value:e,minValue:t,maxValue:i,propertyName:n}};throw o.errorInfo=s,o},b=function(e,t,i,n,o){var s=e[t];return void 0!==s?(s=Number(s),(isNaN(s)||s<i||s>n)&&f(s,i,n,t),Math.floor(s)):o},m=function(e,t){if(void 0===t)return"latn";var i=S(t),n="symbols-numberSystem-"+i;return void 0===e.numbers[n]&&(i="latn"),i},g=function(e){return e.split("-")[0]},S=function(e){var t=(e=e||"en-US").indexOf("-u-nu-"),i="latn";return-1!==t&&(i=e.substr(t+6,4)),i},d=function(e,t,n,o){var s,r=i.OraI18nUtils.getLocaleElementsMainNode(e),l=m(r,o);t.numberingSystemKey=l,t.numberingSystem="symbols-numberSystem-"+l;var u=n.lenientParse;if(t.lenientParse=u||"full",t.style=n.style,void 0!==n.pattern&&n.pattern.length>0)s=n.pattern;else{var h;switch(t.style){case"decimal":h="decimalFormats-numberSystem-";break;case"currency":h="currencyFormats-numberSystem-";break;case"percent":h="percentFormats-numberSystem-";break;default:h="decimalFormats-numberSystem-"}h+=t.numberingSystemKey,s=r.numbers[h].standard;var d=n.decimalFormat;void 0===d&&(d=n.currencyFormat),void 0===d||"decimal"!==t.style&&"currency"!==t.style||(t.shortDecimalFormat=r.numbers["decimalFormats-numberSystem-latn"][d].decimalFormat)}var c=r.numbers[t.numberingSystem].decimal,p=r.numbers[t.numberingSystem].group,_=n.separators;if(void 0!==_){t.separators=_;var f=_.decimal,v=_.group;void 0!==f&&""!==f&&(c=_.decimal),void 0!==v&&(p=_.group)}var C=i.OraI18nUtils.getLocaleElementsMainNodeKey(e),y=g(C);if(t.plurals=e.supplemental.plurals,t.lang=y,t.pat=s,t.minusSign=r.numbers[t.numberingSystem].minusSign,t.decimalSeparator=c,t.exponential=r.numbers[t.numberingSystem].exponential,t.groupingSeparator=p,t.currencyDisplay=n.currencyDisplay,void 0!==n.currency&&(t.currencyCode=n.currency.toUpperCase()),void 0!==n.unit&&(t.unit=n.unit.toLowerCase()),a(n,s,r,t),void 0===n.pattern&&(t.minimumIntegerDigits=b(n,"minimumIntegerDigits",1,21,t.minimumIntegerDigits),void 0!==n.maximumFractionDigits&&(t.maximumFractionDigits=b(n,"maximumFractionDigits",0,20,t.maximumFractionDigits),t.maximumFractionDigits<t.minimumFractionDigits&&(t.minimumFractionDigits=t.maximumFractionDigits)),void 0!==n.minimumFractionDigits&&(t.minimumFractionDigits=b(n,"minimumFractionDigits",0,20,t.minimumFractionDigits)),t.maximumFractionDigits<t.minimumFractionDigits&&(t.maximumFractionDigits=t.minimumFractionDigits,i.Logger.info("maximumFractionDigits is less than minimumFractionDigits, so maximumFractionDigits will be set to minimumFractionDigits")),"currency"===t.style&&void 0===n.minimumFractionDigits)){var S=e.supplemental.currencyData.fractions[n.currency];if(void 0!==S){var E=parseInt(S._digits,10);t.minimumFractionDigits=E,t.maximumFractionDigits=E}}},_=function(e){var t=new TypeError('The property "currency" is required when the property "'+e+'" is "currency". An accepted value is a three-letter ISO 4217 currency code.'),i={errorCode:"optionTypesMismatch",parameterMap:{propertyName:e,propertyValue:"currency",requiredPropertyName:"currency",requiredPropertyValueValid:"a three-letter ISO 4217 currency code"}};throw t.errorInfo=i,t},R=function(e){var t=new TypeError('The property "unit" is required when the property "'+e+'" is "unit". An accepted value is  "byte" or "bit".'),i={errorCode:"optionTypesMismatch",parameterMap:{propertyName:e,propertyValue:"unit",requiredPropertyName:"unit",requiredPropertyValueValid:"byte or bit"}};throw t.errorInfo=i,t},D=function(e){var t,i;throw i={errorCode:"unsupportedParseFormat",parameterMap:{shortFormats:e}},(t=new Error("long and short "+e+" are not supported for parsing")).errorInfo=i,t},c=function(e,t){var n=i.OraI18nUtils.getGetOption(e,t),o=n("style","string",["currency","decimal","percent","unit","perMill"],"decimal");if("decimal"===o||"currency"===o){var s="decimal"===o?"decimalFormat":"currencyFormat";o=n(s,"string",["standard","short","long"]),"OraNumberConverter.parse"===t&&void 0!==o&&"standard"!==o&&D(s)}var r=n("currency","string");"currency"===o&&void 0===r&&_("style"),r=n("unit","string"),"unit"===o&&void 0===r&&R("style");n("roundingMode","string",["HALF_UP","HALF_DOWN","HALF_EVEN"],"DEFAULT"),n("lenientParse","string",["none","full"],"full")},w=function(e,t,n,o){var s,r;e>=1099511627776?(s="digital-tera",r=e/1099511627776):e>=1073741824?(s="digital-giga",r=e/1073741824):e>=1048576?(s="digital-mega",r=e/1048576):e>=1024?(s="digital-kilo",r=e/1024):(s="digital-",r=e),s+=n.unit;var a=n.lang,l=n.plurals[a](r);l="unitPattern-count-"+l;var u=A(r,t,n),h=o.units.narrow[s][l];return u=i.OraI18nUtils.formatString(h,[u])},O=function(e,t,i){var n=function(e){var t,i,n;for(t in G)for(n=G[t].length,i=0;i<n;i++)if(G[t][i]<=e)return[t,G[t][i]];return[e,null]}(e),o="";if(null!==n[1]){var s=i.lang,r=i.plurals[s](Math.floor(e/$[n[0]])),a=n[1]+"-count-"+r;void 0===(a=i.shortDecimalFormat[a])&&(r="other",a=n[1]+"-count-"+r,a=i.shortDecimalFormat[a]);var l=function(e){var t=0,i=0,n=0,o="";if("0"!==e[0]){for(;"0"!==e[t]&&t<e.length;)t++;o=e.substr(0,t),n=t}for(t=n;t<e.length&&"0"===e[t];t++)i++;return[o,i]}(a),u=l[1];if(o=l[0],u<a.length){var h=1*Math.pow(10,u);e/=h=n[1]/h*10}}var d="";void 0!==a&&(d=a.substr(u+l[0].length));return d=o+A(e,t,i)+(d=d.replace(/'\.'/g,"."))},I=function(t,i){var n=t+"",o=0,s=n.split(/e/i),r=s[0];V.lastIndex=0;var a=V.exec(r);null!==a?(o=a[1].length-1,r=a[2]):r=r.replace(".","");var l=s.length>1?parseInt(s[1],10):0,u=parseInt(r,10),h=i.minimumIntegerDigits+i.maximumFractionDigits;if(r.length>h){h-=r.length;var d=Math.pow(10,h);u=Math.round(u*d)}var c=i.minimumIntegerDigits+i.minimumFractionDigits;u=e(u+="",c,!1),-1!==n.indexOf(".")?l-=i.minimumIntegerDigits-n.indexOf(".")+o:l-=c-r.length-i.minimumFractionDigits;var p=Math.abs(l);p=e(p+"",i.minExponentDigits,!0),l<0&&(p=i.minusSign+p);var _=u.slice(0,i.minimumIntegerDigits);return u.slice(i.minimumIntegerDigits).length>0?_+=i.decimalSeparator+u.slice(i.minimumIntegerDigits)+i.exponential+p:_+=i.exponential+p,_},A=function(t,i,n){var o,s=n.groupingSize,r=n.groupingSize0,a=n.decimalSeparator,l=t+"",u=l.split(/e/i),h=u.length>1?parseInt(u[1],10):0,d=(u=(l=u[0]).split(".")).length>1?u[1]:"";if(u.length>1&&d.length>h){o=Math.min(n.maximumFractionDigits,d.length-h);var c=i.roundingMode||"DEFAULT";t=v(t,o,c)}h=(u=(l=t+"").split(/e/i)).length>1?parseInt(u[1],10):0,l=(u=(l=u[0]).split("."))[0],d=u.length>1?u[1]:"",h>0?(l+=(d=e(d,h,!1)).slice(0,h),d=d.substr(h)):h<0&&(d=(l=e(l,(h=-h)+1,!0)).slice(-h,l.length)+d,l=l.slice(0,-h)),d=o>0&&d.length>0?a+(d.length>o?d.slice(0,o):e(d,o,!1)):n.minimumFractionDigits>0?a:"";var p=a.length+n.minimumFractionDigits;d=e(d,p,!1);var _=n.groupingSeparator,m="";!1===i.useGrouping&&void 0===i.pattern&&(_="");var g=(l=e(l,n.minimumIntegerDigits,!0)).length-1;for(d=d.length>1?d:"";g>=0;){if(0===s||s>g)return l.slice(0,g+1)+(m.length?_+m+d:d);m=l.slice(g-s+1,g+1)+(m.length?_+m:""),g-=s,r>0&&(s=r)}return l.slice(0,g+1)+_+m+d},E=function(e,t,i){if("HALF_DOWN"===i||"HALF_EVEN"===i){var n=e.substr(t);(n=parseInt(n,10))>5&&(i="HALF_UP")}return i},v=function(e,t,i){var n=e.toString().split(".");if(void 0===n[1])return e;if("5"===n[1][t]&&"DEFAULT"!==i){var o=E(n[1],t,i);return o=y(n,o,t),C(e,-t,o,n)}var s=Math.pow(10,t),r=Math.round(e*s)/s;return isFinite(r)?r:e},y=function(e,t,i){var n=z[t];if("HALF_EVEN"===t){var o;if(0===i){var s=e[0].length;o=parseInt(e[0][s-1],10)}else o=parseInt(e[1][i-1],10);n=o%2==0?z.HALF_DOWN:z.HALF_UP}return n},C=function(e,t,i,n){if(0===t)return"5"===n[1][0]?Math[i](e):Math.round(e);var o=e.toString().split("e"),s=o[0],r=o[1],a=s+"e"+(r?parseInt(r,10)-t:-t),l=parseFloat(a);return a=(s=(o=(e=Math[i](l)).toString().split("e"))[0])+"e"+((r=o[1])?parseInt(r,10)+t:t),l=parseFloat(a)},t=function(e,t,n,o,s){var r=i.OraI18nUtils.getLocaleElementsMainNode(n);if(!isFinite(e))return e===1/0?r.numbers[o.numberingSystem].infinity:e===-1/0?r.numbers[o.numberingSystem].infinity:r.numbers[o.numberingSystem].nan;var a=Math.abs(e);!0===o.isPercent||"percent"===o.style?a*=100:!0===o.isPerMill&&(a*=1e3);var l=t.decimalFormat;void 0===l&&(l=t.currencyFormat);var u=o.style;a="decimal"!==u&&"currency"!==u||void 0===l||"standard"===l?!0===o.useExponentialNotation?I(a,o):"unit"===u?w(a,t,o,r):A(a,t,o):O(a,t,o);var h="";h+=e<0&&a-0!=0?o.negativePrefix+a+o.negativeSuffix:o.positivePrefix+a+o.positiveSuffix;var d=S(s);if(void 0===i.OraI18nUtils.numeringSystems[d]&&(d="latn"),"latn"!==d){var c,p=[];for(c=0;c<h.length;c++)h[c]>="0"&&h[c]<="9"?p.push(i.OraI18nUtils.numeringSystems[d][h[c]]):p.push(h[c]);return p.join("")}return h},l=function(e,t,n,o){var s,a=i.OraI18nUtils.trimNumber(e),l="",h=!1,d=o.numbers[n.numberingSystem].plusSign,c=new RegExp("^"+d.replace(F,"\\$1"));a=a.replace(c,"");var p=i.OraI18nUtils.trimNumber(n.positivePrefix),_=i.OraI18nUtils.trimNumber(n.positiveSuffix),m=i.OraI18nUtils.trimNumber(n.negativePrefix),g=i.OraI18nUtils.trimNumber(n.negativeSuffix),f=new RegExp("^"+(p||"").replace(F,"\\$1")),v=new RegExp((_||"").replace(F,"\\$1")+"$"),C=new RegExp("^"+(m||"").replace(F,"\\$1")),y=new RegExp((g||"").replace(F,"\\$1")+"$");if(!0===C.test(a)&&!0===y.test(a))a=(a=a.replace(C,"")).replace(y,""),l="-",h=!0;else if(!0===f.test(a)&&!0===v.test(a))a=(a=a.replace(f,"")).replace(v,""),l="+",h=!0;else if("currency"===n.style){var b,S,E,T,D,A=n.currencyCode,I=A;void 0!==o.numbers.currencies[A]&&(I=o.numbers.currencies[A].symbol),void 0===n.currencyDisplay||"symbol"===n.currencyDisplay?D=I:"code"===n.currencyDisplay&&(D=A),void 0!==D&&(b=(p||"").replace(D,""),S=(_||"").replace(D,""),E=(m||"").replace(D,""),T=(g||"").replace(D,""),f=new RegExp(("^"+b).replace(F,"\\$1")),v=new RegExp(S.replace(F,"\\$1")+"$"),C=new RegExp(("^"+E).replace(F,"\\$1")),y=new RegExp(T.replace(F,"\\$1")+"$"),!0===C.test(a)&&!0===y.test(a)?(a=(a=a.replace(C,"")).replace(y,""),l="-",h=!0):!0===f.test(a)&&!0===v.test(a)&&(a=(a=a.replace(f,"")).replace(v,""),l="+",h=!0))}return h?s=[l,a]:"full"===n.lenientParse?(s=u(a,n))[2]=!0:r(n.style,n,e),s},u=function(e,t){var n=t.groupingSeparator,o=t.decimalSeparator,s=t.minusSign,r="",a="",l=i.OraI18nUtils.toUpper(t.exponential),u=n;e=(e=(e=i.OraI18nUtils.toUpper(e)).split(l).join("E")).split(u).join("");var h=u.replace(/\u00A0/g," ");u!==h&&(e=e.split(h).join("")),"."===(e=e.split(o).join(".")).charAt(0)&&(e=e.substr(1),a="."),e=e.replace(s,"-");var d=a+B.exec(e)[2];return i.OraI18nUtils.startsWith(d,"-")?(d=d.substr("-".length),r="-"):i.OraI18nUtils.startsWith(e,"+")&&(d=d.substr("+".length),r="+"),[r,d]},h=function(e,t){var n,o=t.minusSign,s=t.plusSign;return e=i.OraI18nUtils.trimNumber(e),o=i.OraI18nUtils.trimNumber(o),s=i.OraI18nUtils.trimNumber(s),i.OraI18nUtils.startsWith(e,o)?n=["-",e.substr(o.length)]:i.OraI18nUtils.startsWith(e,i.OraI18nUtils.trimNumber(s))&&(n=["+",e.substr(s.length)]),n||["",e]},o=function(e,t){var n,o=S(t);if(void 0===i.OraI18nUtils.numeringSystems[o])return e;var s=[];for(n=0;n<e.length;n++){var r=i.OraI18nUtils.numeringSystems[o].indexOf(e[n]);-1!==r?s.push(r):s.push(e[n])}return s.join("")},s=function(e,t){var n={},o=t.decimalSeparator,s=t.groupingSeparator;e=e.replace(/ /g,"");var r,a,l=t.exponential,u=e.indexOf(l.toLowerCase());u<0&&(u=e.indexOf(i.OraI18nUtils.toUpper(l))),u<0?(a=e,n.exponent=null):(a=e.substr(0,u),n.exponent=e.substr(u+l.length));var h=o,d=a.indexOf(h);d<0?(r=a,n.fraction=null):(r=a.substr(0,d),n.fraction=a.substr(d+h.length)),r=r.split(s).join("");var c=s.replace(/\u00A0/g," ");return s!==c&&(r=r.split(c).join("")),n.integer=r,n},T=function(e,t,n,o){return isNaN(e)&&r(n.style,n,o),!0===n.isPercent||"percent"===n.style?e/=100:!0===n.isPerMill&&(e/=1e3),i.OraI18nUtils.getGetOption(t,"OraNumberConverter.parse")("roundDuringParse","boolean",[!0,!1],!1)&&(e=p(e,n,t)),e},r=function(e,t,i){var n,o,s,r;switch(n="Unparsable number "+i+" The expected number pattern is "+t.pat,e){case"decimal":r="decimalFormatMismatch";break;case"currency":r="currencyFormatMismatch";break;case"percent":r="percentFormatMismatch"}throw o=new Error(n),s={errorCode:r,parameterMap:{value:i,format:t.pat}},o.errorInfo=s,o},n=function(e,t,n,a){var c=i.OraI18nUtils.getLocaleElementsMainNode(t),p={},_=o(e,a);d(t,p,n,a);var m=NaN,g=_.replace(/ /g,"");if(U.test(g))return m=parseFloat(_);var f=l(_,0,p,c),v=f[0],C=f[1];if(v=v||"+",f[2])return m=parseFloat(v+C),T(m,n,p,e);var y=s(C,p),b=y.integer,S=y.fraction,E=y.exponent,D=v+b;if(null!==S&&(D+="."+S),null!==E){var A=h(E,p);D+="e"+(A[0]||"+")+A[1]}return k.test(D)?m=parseFloat(D):"full"===p.lenientParse?(D=u(_,p),m=parseFloat(D[0]+D[1])):r(p.style,p,e),T(m,n,p,e)};var K,W,Y,q;return M=function(e){var t,i;throw i={errorCode:"optionValueInvalid",parameterMap:{propertyName:"pattern",propertyValue:e,propertyValueHint:"#,##0.###"}},(t=new SyntaxError('Unexpected character(s) encountered in the pattern "'+e+' An example of a valid pattern is "#,##0.###".')).errorInfo=i,t},L=function(e,t,i){var n=e.substr(t,i.length);return null!==new RegExp(i,"i").exec(n)},P=function(e,t){var i={};null!==K&&(t.positivePrefix=N(K,e,t,i)),null!==W&&(t.positiveSuffix=N(W,e,t,i)),null!==Y&&(t.negativePrefix=N(Y,e,t,i)),null!==q&&(t.negativeSuffix=N(q,e,t,i)),void 0!==i.name&&(t.positiveSuffix=""+i.name,t.positivePrefix="","ar"===t.lang?(t.negativeSuffix=e.numbers[t.numberingSystem].minusSign+""+i.name,t.negativePrefix=""):(t.negativeSuffix=""+i.name,t.negativePrefix=e.numbers[t.numberingSystem].minusSign))},N=function(e,t,i,n){for(var o="",s=0;s<e.length;){var r=e.charAt(s++);if("'"!==r){switch(r){case"":var a=i.currencyCode,l=a,u=a;void 0!==t.numbers.currencies[a]&&(l=t.numbers.currencies[a].displayName,u=t.numbers.currencies[a].symbol),void 0===i.currencyDisplay||"symbol"===i.currencyDisplay?r=u:"code"===i.currencyDisplay?r=a:(r=l,n.name=r);break;case"%":r=t.numbers[i.numberingSystem].percentSign;break;case"":r=t.numbers[i.numberingSystem].perMille;break;case"-":r=t.numbers[i.numberingSystem].minusSign}o=o.concat(r)}}return o},a=function(e,t,i,n){for(var o=!1,s=!1,r=0,a=0,l=!0,u=1;u>=0&&a<t.length;--u){var h,d=!1,c="",p="",m=-1,g=1,f=0,v=0,C=0,y=-1,b=-1,S=0;l=!0;for(var E=a;E<t.length;++E){var T=t.charAt(E);switch(S){case 0:case 2:if(d){if("'"===T){E+1<t.length&&"'"===t.charAt(E+1)?(++E,l?c=c.concat("''"):p=p.concat("''")):d=!1;continue}}else{if("#"===T||"0"===T||","===T||"."===T){S=1,--E;continue}if(""===T){void 0===e.currency&&_("style"),n.style="currency";var D=E+1<t.length&&""===t.charAt(E+1);D&&++E,l?c=c.concat(D?"'":"'"):p=p.concat(D?"'":"'");continue}if("'"===T){if("'"===T){E+1<t.length&&"'"===t.charAt(E+1)?(++E,l?c=c.concat("''"):p=p.concat("''")):d=!0;continue}}else{if(";"===T){0!==S&&0!==u||M(t),a=E+1,E=t.length;continue}if("%"===T){n.style="percent",1!==g&&M(t),n.isPercent=!0,g=100,l?c=c.concat("'%"):p=p.concat("'%");continue}if(""===T){1!==g&&M(t),n.style="perMill",n.isPerMill=!0,g=1e3,l?c=c.concat("'"):p=p.concat("'");continue}if("-"===T){l?c=c.concat("'-"):p=p.concat("'-");continue}}}l?c=c.concat(T):p=p.concat(T);break;case 1:if(1!==u){0==--r&&(S=2,l=!1);continue}if(++r,"#"===T)v>0?++C:++f,y>=0&&m<0&&++y;else if("0"===T)C>0&&M(t),++v,y>=0&&m<0&&++y;else if(","===T)b=y,y=0;else{if("."!==T){if(L(t,E,"E")){for(s&&M(t),s=!0,h=0,E+="E".length;E<t.length&&"0"===t.charAt(E);)++h,++r,++E;(f+v<1||h<1)&&M(t),S=2,l=!1,--E;continue}S=2,l=!1,--E,--r;continue}m>=0&&M(t),m=f+v+C}}}if(0===v&&f>0&&m>=0){var A=m;0===A&&++A,C=f-A,f=A-1,v=1}if((m<0&&C>0||m>=0&&(m<f||m>f+v)||0===y||d)&&M(t),1===u){Y=K=c,q=W=p;var I=f+v+C,O=m>=0?m:I;n.minimumIntegerDigits=O-f,n.maximumIntegerDigits=s?f+n.minimumIntegerDigits:2147483647,n.maximumFractionDigits=m>=0?I-m:0,n.minimumFractionDigits=m>=0?f+v-m:0,n.groupingSize=y>0?y:0,n.groupingSize0=b}else Y=c,q=p,o=!0}0===t.length&&(K=W="",n.minimumIntegerDigits=0,n.maximumIntegerDigits=2147483647,n.minimumFractionDigits=0,n.maximumFractionDigits=2147483647),n.useExponentialNotation=s,n.minExponentDigits=h,(!o||0===Y.localeCompare(K)&&0===q.localeCompare(W))&&("currency"===n.style&&"ar"===n.lang?(q=W+"'-",Y=K):(q=W,Y="'-"+K)),P(i,n)},p=function(e,t,i){var n=t.maximumFractionDigits,o=e<0,s=i.roundingMode||"DEFAULT",r=v(Math.abs(e),n,s);return o?-r:r},j=function(e,t,n){var o={};return c(t,"OraNumberConverter.resolvedOptions"),d(e,o,t,n),o.numberingSystemKey=S(n),void 0===i.OraI18nUtils.numeringSystems[o.numberingSystemKey]&&(o.numberingSystemKey="latn"),o},H=function(e,t,i){var n={locale:i,style:void 0===e.style?"decimal":e.style,useGrouping:void 0===t.useGrouping||t.useGrouping,numberingSystem:e.numberingSystemKey};n.minimumIntegerDigits=e.minimumIntegerDigits,n.minimumFractionDigits=e.minimumFractionDigits,n.maximumFractionDigits=e.maximumFractionDigits,"decimal"===e.style&&void 0!==t.decimalFormat&&(n.decimalFormat=t.decimalFormat),"currency"===e.style&&void 0!==t.currencyFormat&&(n.currencyFormat=t.currencyFormat),"currency"===e.style&&(n.currency=t.currency,n.currencyDisplay=void 0===t.currencyDisplay?"symbol":t.currencyDisplay),void 0!==t.unit&&(n.unit=t.unit),void 0!==t.pattern&&(n.pattern=t.pattern);var o=t.roundingMode,s=t.roundDuringParse;void 0!==o&&(n.roundingMode=o),void 0!==s&&(n.roundDuringParse=s);var r=e.lenientParse;void 0!==r&&(n.lenientParse=r);var a=e.separators;return void 0!==a&&(n.separators=a),n},{getInstance:function(){return x||(x={format:function(e,i,n,o){(arguments.length<=2||void 0===n)&&(n={useGrouping:!0,style:"decimal"}),c(n,"OraNumberConverter.format");var s={};return d(i,s,n,o),t(e,n,i,s,o)},parse:function(e,t,i,o){return"number"==typeof e?e:"[object Number]"===Object.prototype.toString.call(e)?Number(e):((arguments.length<=2||void 0===i)&&(i={useGrouping:!0,style:"decimal"}),c(i,"OraNumberConverter.parse"),n(e,t,i,o))},resolvedOptions:function(e,t,n){(arguments.length<3||void 0===n)&&(n=i.OraI18nUtils.getLocaleElementsMainNodeKey(e)),(arguments.length<2||void 0===t)&&(t={useGrouping:!0,style:"decimal"});var o=j(e,t,n);return H(o,t,n)}}),x}}}(),i.DateTimeConverter=function(e){this.Init(e)},i.Object.createSubclass(i.DateTimeConverter,i.Converter,"oj.DateTimeConverter"),i.DateTimeConverter.prototype.Init=function(e){i.DateTimeConverter.superclass.Init.call(this,e)},i.DateTimeConverter.prototype.format=function(e){return i.DateTimeConverter.superclass.format.call(this,e)},i.DateTimeConverter.prototype.isHourInDaySet=function(){i.Assert.failedInAbstractFunction()},i.DateTimeConverter.prototype.isHourInAMPMSet=function(){i.Assert.failedInAbstractFunction()},i.DateTimeConverter.prototype.isMinuteSet=function(){i.Assert.failedInAbstractFunction()},i.DateTimeConverter.prototype.isSecondSet=function(){i.Assert.failedInAbstractFunction()},i.DateTimeConverter.prototype.isMilliSecondSet=function(){i.Assert.failedInAbstractFunction()},i.DateTimeConverter.prototype.isYearSet=function(){i.Assert.failedInAbstractFunction()},i.DateTimeConverter.prototype.isMonthSet=function(){i.Assert.failedInAbstractFunction()},i.DateTimeConverter.prototype.isDaySet=function(){i.Assert.failedInAbstractFunction()},i.DateTimeConverter.prototype.isDayNameSet=function(){i.Assert.failedInAbstractFunction()},i.DateTimeConverter.prototype.calculateWeek=function(e){i.Assert.failedInAbstractFunction()},i.DateTimeConverter.prototype.parse=function(e){return i.DateTimeConverter.superclass.parse.call(this,e)},i.DateTimeConverter.prototype.compareISODates=function(e,t){return i.DateTimeConverter.superclass.compareISODates.call(this,e,t)},i.DateTimeConverter.prototype.getAvailableTimeZones=function(){return i.DateTimeConverter.superclass.getAvailableTimeZones.call(this)},i.DateRestrictionValidator=function(e){this.Init(e)},i.Object.createSubclass(i.DateRestrictionValidator,i.Validator,"oj.DateRestrictionValidator"),i.DateRestrictionValidator.prototype.Init=function(e){i.DateRestrictionValidator.superclass.Init.call(this),this._dayFormatter=e.dayFormatter,this._converter=i.IntlConverterUtils.getConverterInstance(e.converter),e&&(this._messageSummary=e.messageSummary||null,this._messageDetail=e.messageDetail||null)},i.DateRestrictionValidator.prototype._inDisabled=function(e){var t=this._dayFormatter;if(t){var i=t({fullYear:e.fullYear,month:e.month+1,date:e.date});return i&&i.disabled}return!1},i.DateRestrictionValidator.prototype.validate=function(e){var t="",n="",o=i.Translations,s=this._messageSummary,r=this._messageDetail,a=e?this._converter.format(e):e,l=e?i.IntlConverterUtils._dateTime(e,["fullYear","month","date"],!0):null;if(null===e)return e;if(this._inDisabled(l))throw t=s?o.applyParameters(s,{value:a}):o.getTranslatedString("oj-validator.restriction.date.messageSummary",{value:a}),n=r?o.applyParameters(r,{value:a}):o.getTranslatedString("oj-validator.restriction.date.messageDetail",{value:a}),new i.ValidatorError(t,n);return e},i.DateRestrictionValidator.prototype.getHint=function(){return null},i.DateTimeRangeValidator=function(e){this.Init(e)},i.Object.createSubclass(i.DateTimeRangeValidator,i.Validator,"oj.DateTimeRangeValidator"),i.DateTimeRangeValidator.prototype.Init=function(e){if(i.DateTimeRangeValidator.superclass.Init.call(this),this._converter=i.IntlConverterUtils.getConverterInstance(e.converter),!this._converter)throw new Error("oj.DateTimeRangeValidator missing a converter option");this._min=e.min||null,this._max=e.max||null,this._translationKey=e.translationKey||"datetime",e&&(this._hint=e.hint||{},this._customMessageSummary=e.messageSummary||{},this._customMessageDetail=e.messageDetail||{}),this._translationKey&&(i.Translations.getTranslatedString("oj-validator.range."+this._translationKey+".messageSummary.rangeOverflow")||(this._translationKey="datetime"))},i.DateTimeRangeValidator.prototype.validate=function(e){var t,n,o=this._customMessageSummary,s=this._customMessageDetail,r=s.rangeOverflow,a=s.rangeUnderflow,l=o.rangeOverflow,u=o.rangeUnderflow,h=i.IntlConverterUtils,d=this._min,c=this._max,p="",_="",m=i.Translations,g=null,f=e&&this._converter.format(e);if(null===e)return e;if(f=this._converter.format(e),d&&(d=h._minMaxIsoString(d,e),t=this._converter?this._converter.format(d):d),c&&(c=h._minMaxIsoString(c,e),n=this._converter?this._converter.format(c):c),null!==d&&null!==c){if(this._converter.compareISODates(e,d)>=0&&this._converter.compareISODates(e,c)<=0||this._converter.compareISODates(d,c)>0)return e}else if(null!==d){if(this._converter.compareISODates(e,d)>=0)return e}else if(null===c||this._converter.compareISODates(e,c)<=0)return e;throw null!==c&&this._converter.compareISODates(e,c)>0?(g={value:f,max:n},p=l||m.getTranslatedString("oj-validator.range."+this._translationKey+".messageSummary.rangeOverflow"),_=r?m.applyParameters(r,g):m.getTranslatedString("oj-validator.range."+this._translationKey+".messageDetail.rangeOverflow",g)):null!==d&&this._converter.compareISODates(e,d)<0&&(g={value:f,min:t},p=u||m.getTranslatedString("oj-validator.range."+this._translationKey+".messageSummary.rangeUnderflow"),_=a?m.applyParameters(a,g):m.getTranslatedString("oj-validator.range."+this._translationKey+".messageDetail.rangeUnderflow",g)),new i.ValidatorError(p,_)},i.DateTimeRangeValidator.prototype.getHint=function(){var e=null,t=this._hint,n=t.inRange,o=t.min,s=t.max,r=this._min,a=this._max,l=r&&this._converter?this._converter.format(r):r,u=a&&this._converter?this._converter.format(a):a,h=null,d=i.Translations;return null!==r&&null!==a?(h={min:l,max:u},e=n?d.applyParameters(n,h):d.getTranslatedString("oj-validator.range."+this._translationKey+".hint.inRange",h)):null!==r?(h={min:l},e=o?d.applyParameters(o,h):d.getTranslatedString("oj-validator.range."+this._translationKey+".hint.min",h)):null!==a&&(h={max:u},e=s?d.applyParameters(s,h):d.getTranslatedString("oj-validator.range."+this._translationKey+".hint.max",h)),e},i.DateTimeConverterFactory=function(){return{createConverter:function(e){return function(e){return new i.IntlDateTimeConverter(e)}(e)}}}(),i.Validation.__registerDefaultConverterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME,i.DateTimeConverterFactory),i.DateTimeRangeValidatorFactory=function(){return{createValidator:function(e){return function(e){return new i.DateTimeRangeValidator(e)}(e)}}}(),i.Validation.__registerDefaultValidatorFactory(i.ValidatorFactory.VALIDATOR_TYPE_DATETIMERANGE,i.DateTimeRangeValidatorFactory),i.DateRestrictionValidatorFactory=function(){return{createValidator:function(e){return function(e){return new i.DateRestrictionValidator(e)}(e)}}}(),i.Validation.__registerDefaultValidatorFactory(i.ValidatorFactory.VALIDATOR_TYPE_DATERESTRICTION,i.DateRestrictionValidatorFactory),i.IntlDateTimeConverter=function(e){this.Init(e)},i.Object.createSubclass(i.IntlDateTimeConverter,i.DateTimeConverter,"oj.IntlDateTimeConverter"),i.IntlDateTimeConverter._DEFAULT_DATE=new Date(1998,10,29,15,45,31),i.IntlDateTimeConverter.prototype.Init=function(e){i.IntlDateTimeConverter.superclass.Init.call(this,e)},i.IntlDateTimeConverter.prototype._getWrapped=function(){return this._wrapped||(this._wrapped=H.getInstance()),this._wrapped},i.IntlDateTimeConverter.prototype.format=function(e){var t=i.LocaleData.__getBundle(),n=i.Config.getLocale(),o=this.resolvedOptions();if(null==e||"string"==typeof e&&0===i.StringUtils.trim(""+e).length)return i.IntlConverterUtils.__getNullFormattedValue();try{return this._getWrapped().format(e,t,o,n)}catch(t){throw this._processConverterError(t,e)}},i.IntlDateTimeConverter.prototype.formatRelative=function(e,t){var n=i.LocaleData.__getBundle(),o=i.Config.getLocale();try{return this._getWrapped().formatRelative(e,n,t,o)}catch(t){throw this._processConverterError(t,e)}},i.IntlDateTimeConverter.prototype.getHint=function(){return null},i.IntlDateTimeConverter.prototype._getHintValue=function(){var e="";try{e=this.format(i.IntlConverterUtils.dateToLocalIso(i.IntlDateTimeConverter._DEFAULT_DATE))}catch(t){t instanceof i.ConverterError&&(e="")}finally{return e}},i.IntlDateTimeConverter.prototype.getOptions=function(){return i.IntlDateTimeConverter.superclass.getOptions.call(this)},i.IntlDateTimeConverter.prototype.resolvedOptions=function(){var e,t=i.Config.getLocale(),n=this.getOptions();if(t!==this._locale||!this._resolvedOptions){e=i.LocaleData.__getBundle();try{if(!e)return i.Logger.error("locale bundle for the current locale %s is unavailable",t),{};this._resolvedOptions=this._getWrapped().resolvedOptions(e,n,t),this._locale=t}catch(e){throw this._processConverterError(e)}}return this._resolvedOptions},i.IntlDateTimeConverter.prototype.isHourInDaySet=function(){var e=this.resolvedOptions(),t=e.hour,i=e.hour12;return!(!t||i)},i.IntlDateTimeConverter.prototype.isHourInAMPMSet=function(){var e=this.resolvedOptions(),t=e.hour,i=e.hour12;return!(!t||!i)},i.IntlDateTimeConverter.prototype.isMinuteSet=function(){return this._isOptionSet("minute")},i.IntlDateTimeConverter.prototype.isSecondSet=function(){return this._isOptionSet("second")},i.IntlDateTimeConverter.prototype.isMilliSecondSet=function(){return this._isOptionSet("millisecond")},i.IntlDateTimeConverter.prototype.isYearSet=function(){return this._isOptionSet("year")},i.IntlDateTimeConverter.prototype.isMonthSet=function(){return this._isOptionSet("month")},i.IntlDateTimeConverter.prototype.isDaySet=function(){return this._isOptionSet("day")},i.IntlDateTimeConverter.prototype.isDayNameSet=function(){return this._isOptionSet("weekday")},i.IntlDateTimeConverter.prototype.calculateWeek=function(e){return this._getWrapped().calculateWeek(e,i.LocaleData.__getBundle(),i.Config.getLocale())},i.IntlDateTimeConverter.prototype.parse=function(e){var t,n;if(null==e||""===e)return null;var o=i.LocaleData.__getBundle(),s=i.Config.getLocale(),r=this.resolvedOptions();try{return(n=(t=this._getWrapped().parse(e,o,r,s)).value)&&t.warning&&i.Logger.warn("The value "+e+" was leniently parsed to represent a date "+n.toString?n.toString():n),n}catch(t){throw this._processConverterError(t,e)}},i.IntlDateTimeConverter.prototype.compareISODates=function(e,t){var n=i.StringUtils.isString;if(!n(e)||!n(t))throw new Error("Invalid arguments for compareISODates ",e,t);return this._getWrapped().compareISODates(e,t,i.LocaleData.__getBundle())},i.IntlDateTimeConverter.prototype._processConverterError=function(e,t){var n,o,s,r,a,l,u,h=e.errorInfo;return h&&(s=h.errorCode,r=h.parameterMap||{},i.Assert.assertObject(r),l=r.propertyName,l=i.Translations.getTranslatedString("oj-converter.datetime.datetimeOutOfRange."+l),r.propertyName=l,e instanceof TypeError?"optionTypesMismatch"!==s&&"optionTypeInvalid"!==s||(a=i.IntlConverterUtils.__getConverterOptionError(s,r)):e instanceof RangeError?"optionOutOfRange"===s?a=i.IntlConverterUtils.__getConverterOptionError(s,r):"datetimeOutOfRange"===s&&(n=i.Translations.getTranslatedString("oj-converter.datetime.datetimeOutOfRange.summary",{propertyName:l,value:r.value}),o=i.Translations.getTranslatedString("oj-converter.datetime.datetimeOutOfRange.detail",{minValue:r.minValue,maxValue:r.maxValue}),a=new i.ConverterError(n,o)):e instanceof SyntaxError?"optionValueInvalid"===s&&(a=i.IntlConverterUtils.__getConverterOptionError(s,r)):e instanceof Error&&("dateFormatMismatch"===s?u="oj-converter.datetime.dateFormatMismatch.summary":"timeFormatMismatch"===s?u="oj-converter.datetime.timeFormatMismatch.summary":"datetimeFormatMismatch"===s?u="oj-converter.datetime.datetimeFormatMismatch.summary":"invalidTimeZoneID"===s?(n=i.Translations.getTranslatedString("oj-converter.datetime.invalidTimeZoneID.summary",{timeZoneID:r.timeZoneID}),o=i.Translations.getTranslatedString("oj-converter.hint.detail",{exampleValue:this._getHintValue()}),a=new i.ConverterError(n,o)):"nonExistingTime"===s?u="oj-converter.datetime.nonExistingTime.summary":"missingTimeZoneData"===s?u="oj-converter.datetime.missingTimeZoneData.summary":"dateToWeekdayMismatch"===s?(n=i.Translations.getTranslatedString("oj-converter.datetime.dateToWeekdayMismatch.summary",{date:r.date,weekday:r.weekday}),o=i.Translations.getTranslatedString("oj-converter.datetime.dateToWeekdayMismatch.detail"),a=new i.ConverterError(n,o)):"invalidISOString"===s&&(n=i.Translations.getTranslatedString("oj-converter.datetime.invalidISOString.summary",{isoStr:r.isoStr}),o=i.Translations.getTranslatedString("oj-converter.datetime.invalidISOString.detail"),a=new i.ConverterError(n,o)),u&&(n=i.Translations.getTranslatedString(u,{value:t||r.value,format:r.format}),o=i.Translations.getTranslatedString("oj-converter.hint.detail",{exampleValue:this._getHintValue()}),a=new i.ConverterError(n,o)))),a||(n=e.message,o=e.message,a=new i.ConverterError(n,o)),a},i.IntlDateTimeConverter.prototype._isOptionSet=function(e){return!!this.resolvedOptions()[e]},i.IntlDateTimeConverter.prototype.getAvailableTimeZones=function(){return this._getWrapped().getAvailableTimeZones(i.LocaleData.__getBundle())},i.IntlDateTimeConverter.prototype._getTimePositioning=function(){return this._getWrapped().getTimePositioning(i.LocaleData.__getBundle(),this.resolvedOptions(),i.Config.getLocale())},H=function(){var e,t,n,o,s,r,a,l,u,h,d,c,p,_,m,g,f,v,C,y,b,S,E,T,D,A,I,O,w,R,x,L,N,P,M,j,k,B,F,V,G,$,z,K,W,Y,q,X,Z,J,Q,ee,te,ie,ne,oe,se,re,ae,le,ue,he,de,ce,pe,_e,me,ge,fe,ve,Ce,ye,be,Se,Ee,Te,De,Ae,Ie,Oe,we,Re,xe,Le={},Ne={},Pe=/(\d{1,4})\D+?(\d{1,4})/g,Me=/(\d{1,4})\D+?(\d{1,4})\D+?(\d{1,4})/g,je=/^[M][^M]|[^M]M[^M]|[^M]M$|^M$/g,He=/^[L][^L]|[^L]L[^L]|[^L]L$|^L$/g,Ue=/^[d][^d]|[^d]d[^d]|[^d]d$|^d$|^d[^d]/,ke=/(?:^|[^h])h[^h]|[^H]H[^H]|[^k]k[^k]|[^K]K[^K]|^H[^H]|^H$|[^h]h$/,Be=/'.*'/,Fe=/'[^d]*d[^d]*'/,Ve=/(\d{1,2})(?:\D+?(\d{1,2}))?(?:\D+?(\d{1,2}))?(?:\D+?(\d{1,3}))?/g,Ge=/h|H|K|k/g,$e=/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,ze=/ccccc|cccc|ccc|cc|c|EEEEE|EEEE|EEE|EE|E|dd|d|MMMMM|MMMM|MMM|MM|M|LLLLL|LLLL|LLL|LL|L|yyyy|yy|y|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|aa|a|SSS|SS|S|zzzz|zzz|zz|z|v|ZZZ|ZZ|Z|XXX|XX|X|VV|GGGGG|GGGG|GGG|GG|G/g,Ke={0:"sun",1:"mon",2:"tue",3:"wed",4:"thu",5:"fri",6:"sat"},We=46,Ye=46,qe=23,Xe=7,Ze=4,Je=12,Qe="zulu",et="local",tt="offset",it="UTC",nt="(\\D+|\\d\\d?\\D|\\d\\d?|\\D+\\d\\d?)",ot="(\\D+|\\D+\\d\\d?)",st={MMM:{token:"months",style:"format",mLen:"abbreviated",matchIndex:0,key:"month",value:"short",regExp:nt},MMMM:{token:"months",style:"format",mLen:"wide",matchIndex:0,key:"month",value:"long",regExp:nt},MMMMM:{token:"months",style:"format",mLen:"narrow",matchIndex:0,key:"month",value:"narrow",regExp:nt},LLL:{token:"months",style:"stand-alone",mLen:"abbreviated",matchIndex:1,key:"month",value:"short",regExp:nt},LLLL:{token:"months",style:"stand-alone",mLen:"wide",matchIndex:1,key:"month",value:"long",regExp:nt},LLLLL:{token:"months",style:"stand-alone",mLen:"narrow",matchIndex:1,key:"month",value:"narrow",regExp:nt},E:{token:"days",style:"format",dLen:"abbreviated",matchIndex:0,key:"weekday",value:"short",regExp:ot},EE:{token:"days",style:"format",dLen:"abbreviated",matchIndex:0,key:"weekday",value:"short",regExp:ot},EEE:{token:"days",style:"format",dLen:"abbreviated",matchIndex:0,key:"weekday",value:"short",regExp:ot},EEEE:{token:"days",style:"format",dLen:"wide",matchIndex:0,key:"weekday",value:"long",regExp:ot},EEEEE:{token:"days",style:"format",dLen:"narrow",matchIndex:0,key:"weekday",value:"narrow",regExp:ot},c:{token:"days",style:"stand-alone",dLen:"abbreviated",matchIndex:1,key:"weekday",value:"short",regExp:ot},cc:{token:"days",style:"stand-alone",dLen:"abbreviated",matchIndex:1,key:"weekday",value:"short",regExp:ot},ccc:{token:"days",style:"stand-alone",dLen:"abbreviated",matchIndex:1,key:"weekday",value:"short",regExp:ot},cccc:{token:"days",style:"stand-alone",dLen:"wide",matchIndex:1,key:"weekday",value:"long",regExp:ot},ccccc:{token:"days",style:"stand-alone",dLen:"narrow",matchIndex:1,key:"weekday",value:"narrow",regExp:ot},h:{token:"time",timePart:"hour",start1:0,end1:11,start2:1,end2:12,key:"hour",value:"numeric",regExp:"(\\d\\d?)"},hh:{token:"time",timePart:"hour",start1:0,end1:11,start2:1,end2:12,key:"hour",value:"2-digit",regExp:"(\\d\\d?)"},K:{token:"time",timePart:"hour",start1:0,end1:11,start2:0,end2:11,key:"hour",value:"numeric",regExp:"(\\d\\d?)"},KK:{token:"time",timePart:"hour",start1:0,end1:11,start2:0,end2:11,key:"hour",value:"2-digit",regExp:"(\\d\\d?)"},H:{token:"time",timePart:"hour",start1:0,end1:23,start2:0,end2:23,key:"hour",value:"numeric",regExp:"(\\d\\d?)"},HH:{token:"time",timePart:"hour",start1:0,end1:23,start2:0,end2:23,key:"hour",value:"2-digit",regExp:"(\\d\\d?)"},k:{token:"time",timePart:"hour",start1:0,end1:23,start2:1,end2:24,key:"hour",value:"numeric",regExp:"(\\d\\d?)"},kk:{token:"time",timePart:"hour",start1:0,end1:23,start2:1,end2:24,key:"hour",value:"2-digit",regExp:"(\\d\\d?)"},m:{token:"time",timePart:"minute",start1:0,end1:59,start2:0,end2:59,key:"minute",value:"numeric",regExp:"(\\d\\d?)"},mm:{token:"time",timePart:"minute",start1:0,end1:59,start2:0,end2:59,key:"minute",value:"2-digit",regExp:"(\\d\\d?)"},s:{token:"time",timePart:"second",start1:0,end1:59,start2:0,end2:59,key:"second",value:"numeric",regExp:"(\\d\\d?)"},ss:{token:"time",timePart:"second",start1:0,end1:59,start2:0,end2:59,key:"second",value:"2-digit",regExp:"(\\d\\d?)"},S:{token:"time",timePart:"millisec",start1:0,end1:999,start2:0,end2:999,key:"millisecond",value:"numeric",regExp:"(\\d{1,3})"},SS:{token:"time",timePart:"millisec",start1:0,end1:999,start2:0,end2:999,key:"millisecond",value:"numeric",regExp:"(\\d{1,3})"},SSS:{token:"time",timePart:"millisec",start1:0,end1:999,start2:0,end2:999,key:"millisecond",value:"numeric",regExp:"(\\d{1,3})"},d:{token:"dayOfMonth",key:"day",value:"numeric",getPartIdx:2,regExp:"(\\d\\d?)"},dd:{token:"dayOfMonth",key:"day",value:"2-digit",getPartIdx:2,regExp:"(\\d\\d?)"},M:{token:"monthIndex",key:"month",value:"numeric",getPartIdx:1,regExp:"(\\d\\d?)"},MM:{token:"monthIndex",key:"month",value:"2-digit",getPartIdx:1,regExp:"(\\d\\d?)"},L:{token:"monthIndex",key:"month",value:"numeric",getPartIdx:1,regExp:"(\\d\\d?)"},LL:{token:"monthIndex",key:"month",value:"2-digit",getPartIdx:1,regExp:"(\\d\\d?)"},y:{token:"year",key:"year",value:"numeric",regExp:"(\\d{1,4})"},yy:{token:"year",key:"year",value:"2-digit",regExp:"(\\d\\d?)"},yyyy:{token:"year",key:"year",value:"numeric",regExp:"(\\d{1,4})"},a:{token:"ampm",key:"hour12",value:!0,regExp:"(\\D*)"},z:{token:"tzAbbrev",regExp:"(.+?)"},v:{token:"tzAbbrev",key:"timeZoneName",value:"short",regExp:"(.+?)"},zz:{token:"tzAbbrev",regExp:"(.+?)"},zzz:{token:"tzAbbrev",regExp:"(.+?)"},zzzz:{token:"tzFull",regExp:"(.+?)"},Z:{token:"tzhm",regExp:"([+-]?\\d{1,4})"},ZZ:{token:"tzhm",regExp:"([+-]?\\d{1,4})"},ZZZ:{token:"tzhm",regExp:"([+-]?\\d{1,4})"},X:{token:"tzh",regExp:"([+-]?\\d{1,2})"},XX:{token:"tzhm",key:"XX",regExp:"([+-]?\\d{1,4})"},XXX:{token:"tzhsepm",regExp:"([+-]?\\d{1,2}:\\d{1,2})"},VV:{token:"tzid",regExp:"(.+?)"},G:{token:"era",key:"era",value:"short",regExp:ot},GG:{token:"era",key:"era",value:"short",regExp:ot},GGG:{token:"era",key:"era",value:"short",regExp:ot},GGGG:{token:"era",key:"era",value:"long",regExp:ot},GGGGG:{token:"era",key:"era",value:"narrow",regExp:ot},"/":{token:"slash",regExp:"(\\/)"}};return c=function(e){var t=e["two-digit-year-start"];return(void 0===t||isNaN(t))&&(t=1950),t=parseInt(t,10)},p=function(e){var t=e._ojLocale_,n=i.OraI18nUtils.getBCP47Region(t);return"h"===e.supplemental.prefferedHours[n]},g=function(e){return e%400==0||e%100!=0&&e%4==0},f=function(e,t){switch(t){case 0:case 2:case 4:case 6:case 7:case 9:case 11:return 31;case 1:return g(e)?29:28;default:return 30}},m=function(e,t,n){var o,s,r,a=i.OraI18nUtils.getLocaleElementsMainNode(t),l=i.OraI18nUtils.getGetOption(e,n),u=l("formatType","string",["date","time","datetime"],"date"),h=l("dateFormat","string",["short","medium","long","full"],"short"),d=l("timeFormat","string",["short","medium","long","full"],"short"),c=a.dates.calendars.gregorian,p=c.dateFormats,_=c.timeFormats;switch(h){case"full":o=p.full;break;case"long":o=p.long;break;case"medium":o=p.medium;break;case"short":o=p.short}switch(d){case"full":s=_.full;break;case"long":s=_.long;break;case"medium":s=_.medium;break;case"short":s=_.short}return void 0===o||"datetime"!==u&&"date"!==u||(r=o),void 0===s||"datetime"!==u&&"time"!==u||(r=r?r+" "+s:s),r},t=function(e,t){for(var i=0,n=!1,o=0,s=e.length;o<s;o++){var r=e.charAt(o);switch(r){case"'":n?t.push("'"):i++,n=!1;break;case"\\":n&&t.push("\\"),n=!n;break;default:t.push(r),n=!1}}return i},l=function(e,t,i){var n,o,s,r=void 0!==t.year||void 0!==t.month||void 0!==t.weekday||void 0!==t.day,a=void 0!==t.hour||void 0!==t.minute||void 0!==t.second;throw o={errorCode:"optionValueInvalid",parameterMap:{propertyName:"pattern",propertyValue:e,"propertyValueHint ":s=r&&a?"MM/dd/yy hh:mm:ss a":r?"MM/dd/yy":"hh:mm:ss a"}},(n=new SyntaxError("Unexpected character(s) "+i+' encountered in the pattern "'+e+' An example of a valid pattern is "'+s+'".')).errorInfo=o,n},b=function(e,t,n,o){var s,r,a=i.OraI18nUtils.getLocaleElementsMainNode(t).dates.calendars.gregorian.dateTimeFormats.availableFormats,l=["weekday","era","year","month","day","hour","minute","second","timeZoneName"],u={"2-digit":0,numeric:1,narrow:2,short:3,long:4},h=-1/0,d=void 0;for(var c in a){r=!1;var p={};p.pattern=a[c];for(var _=0;null!==(s=ze.exec(c));){var m=s[0];"h"!==m&&"hh"!==m||o?"H"!==m&&"HH"!==m||!o?void 0!==st[m]&&(p[st[m].key]=st[m].value):r=!0:r=!0}if(!r){for(var g in l){var f=e[l[g]],v=p[l[g]];if(void 0===f&&void 0!==v)_-=20;else if(void 0!==f&&void 0===v)_-=120;else if(void 0!==f&&void 0!==v){var C=u[f],y=u[v],b=Math.max(Math.min(y-C,2),-2);2===b?_-=6:1===b?_-=3:-1===b?_-=6:-2===b&&(_-=8)}}_>h&&(h=_,d=p)}}return void 0!==d?d.pattern:null},v=function(e,t,n){var o="",s="",r={},a={},l=i.OraI18nUtils.getGetOption(e,n),u=l("era","string",["narrow","short","long"]);o+=S(r,"era",u,{narrow:"GGGGG",short:"GGG",long:"GGGG"}),u=l("year","string",["2-digit","numeric"]),o+=S(r,"year",u,{"2-digit":"yy",numeric:"y"}),u=l("month","string",["2-digit","numeric","narrow","short","long"]),o+=S(r,"month",u,{"2-digit":"MM",numeric:"M",narrow:"MMMMM",short:"MMM",long:"MMMM"}),u=l("weekday","string",["narrow","short","long"]),o+=S(r,"weekday",u,{narrow:"EEEEE",short:"E",long:"EEEE"}),u=l("day","string",["2-digit","numeric"]),o+=S(r,"day",u,{"2-digit":"dd",numeric:"d"});var h=l("hour12","boolean",[!0,!1]);return void 0===h&&(h=p(t)),u=l("hour","string",["2-digit","numeric"]),s+=S(a,"hour",u,!0===h?{"2-digit":"hh",numeric:"h"}:{"2-digit":"HH",numeric:"H"}),u=l("minute","string",["2-digit","numeric"]),s+=S(a,"minute",u,{"2-digit":"mm",numeric:"m"}),u=l("second","string",["2-digit","numeric"]),s+=S(a,"second",u,{"2-digit":"ss",numeric:"s"}),u=l("timeZoneName","string",["short","long"]),[o,s+=S(a,"timeZoneName",u,{short:"v",long:"v"}),r,a]},S=function(e,t,i,n){return void 0!==i?(e[t]=i,n[i]):""},C=function(e,t,n){var o=e,s=i.OraI18nUtils.getGetOption(t,n),r=s("year","string",["2-digit","numeric"]),a={"2-digit":"yy",numeric:"yyyy"};if(void 0!==r&&(o=o.replace(/y{1,4}/,a[r])),void 0!==(r=s("month","string",["2-digit","numeric","narrow","short","long"]))){void 0!==(a={"2-digit":"MM",numeric:"M",narrow:"MMMMM",short:"MMM",long:"MMMM"})[r]&&a[r].length>2?o=(o=o.replace(/M{3,5}/,a[r])).replace(/L{3,5}/,{"2-digit":"LL",numeric:"L",narrow:"LLLLL",short:"LLL",long:"LLLL"}[r]):"2-digit"===r&&(je.lastIndex=0,je.test(e)&&(o=o.replace("M","MM")),He.test(e)&&(o=o.replace("L","LL")))}if(void 0!==(r=s("weekday","string",["narrow","short","long"]))){o=(o=o.replace(/E{1,5}/,{narrow:"EEEEE",short:"EEE",long:"EEEE"}[r])).replace(/c{1,5}/,{narrow:"ccccc",short:"ccc",long:"cccc"}[r])}if(void 0!==(r=s("day","string",["2-digit","numeric"]))&&"2-digit"===r){Ue.lastIndex=0,Fe.lastIndex=0;var l=Fe.test(e);1==Ue.test(e)&&!1===l&&(o=o.replace("d","dd"))}return o},y=function(e,t,n){var o=e;if("2-digit"===i.OraI18nUtils.getGetOption(t,n)("hour","string",["2-digit","numeric"])){ke.lastIndex=0,Be.lastIndex=0;var s=e.replace(Be,""),r=ke.exec(s);if(null!==r){Ge.lastIndex=0;var a=Ge.exec(r[0]),l=a[0]+a[0];o=e.replace(a[0],l)}}return o},ae=function(e,t,i){var n,o,s=0;for(n in t)s++;if(s>1)return null;for(n=e.length;n>0;n--)if(void 0!==(o=i[e.substr(0,n)]))return o;return e},function(e){var t="yyyy-MM-ddTHH:mm:ss";switch(i.OraI18nUtils.getGetOption(e,"OraDateTimeConverter.format")("isoStrFormat","string",[Qe,tt,"invariant",et,"auto"],"auto")){case Qe:e.timeZone="Etc/GMT+0",t+="'Z'";break;case tt:t+="XXX"}return t},oe=function(e,t){var n="symbols-numberSystem-"+i.OraI18nUtils.getNumberingSystemKey(e,t);return e.numbers[n].decimal},n=function(e,t,n,o){function s(t){if(void 0!==h){var i=oe(d,n);i=void 0===a&&void 0===l&&void 0===u?"S":"ss"+i+"SSS",t=t.replace("ss",i),void 0===u&&(e.second=void 0)}var o=_("timeZoneName","string",["short","long"]);return void 0!==o&&(t=t.replace(/v/,{short:"z",long:"zzzz"}[o])),t}var r,a,l,u,h,d=i.OraI18nUtils.getLocaleElementsMainNode(t),c=i.OraI18nUtils.getLocaleElementsMainNodeKey(t),_=i.OraI18nUtils.getGetOption(e,o),g=_("formatMatcher","string",["basic","munger"],"munger"),f=0;for(f in e)f++;0===f&&(e={year:"numeric",month:"numeric",day:"numeric"}),h=_("millisecond","string",["numeric","2-digit"]),u=_("second","string",["numeric","2-digit"]),void 0!==h&&(a=_("hour","string",["numeric","2-digit"]),l=_("minute","string",["numeric","2-digit"]),e.second="2-digit");var S=v(e,t,o);if(void 0!==Le[c]){var E=Le[c].dates.calendars.gregorian.dateTimeFormats[S[0]+S[1]];if(void 0!==E)return E=s(E)}if(""===S[0]&&""===S[1])return m(e,t,o);var T=d.dates.calendars.gregorian.dateTimeFormats.availableFormats,D=T[S[0]],A=_("hour12","boolean",[!0,!1]);void 0===A&&(A=p(t)),void 0===D&&""!==S[0]&&(null===(D=ae(S[0],S[2],T))&&(D=b(S[2],t,0,A)),null!==D?"basic"!==g&&(D=C(D,e,o)):D=S[0]);var I=T[S[1]];return void 0===I&&""!==S[1]&&(null===(I=ae(S[1],S[3],T))&&(I=b(S[3],t,0,A)),null!==I?"basic"!==g&&(I=y(I,e,o)):I=S[1]),r=D||"",void 0!==I&&(""!==r?r+=" "+I:r=I),void 0===Le[c]&&(Le[c]={},Le[c].dates={},Le[c].dates.calendars={},Le[c].dates.calendars.gregorian={},Le[c].dates.calendars.gregorian.dateTimeFormats={}),Le[c].dates.calendars.gregorian.dateTimeFormats[S[0]+S[1]]=r,r=s(r)},Ce=function(e){var t=e.split(" "),i=t[0].split("-"),n=new Date(i[0],i[1]-1,i[2]);return t.length>1&&(i=t[1].split(":"),n.setHours(i[0]),n.setMinutes(i[1])),n.getTime()},ve=function(e,t,i){var n=new Date(e[0],e[1]-1,e[2],e[3],e[4],e[5]);n=n.getTime();var o=t.split("/"),s=o[0],r=o[1],a=i[s];if(void 0===a)return null;if(void 0===(a=a[r]))return null;var l,u,h,d,c,p,_=a.length;for(l=0;l<_;l++){if(d=a[l].usesMetazone._from,c=a[l].usesMetazone._to,p=a[l].usesMetazone._mzone,void 0===d&&void 0===c)return p;if(void 0===d&&void 0!==c&&n<=(h=Ce(c)))return p;if(void 0!==d&&void 0===c&&n>=(u=Ce(d)))return p;if(void 0!==d&&void 0!==c&&(u=Ce(d),h=Ce(c),n>=u&&n<h))return p}},ye=function(e,t,n,o,s){var r=i.OraI18nUtils.getLocaleElementsMainNode(e),a="",l=n.timeZone,u=i.OraI18nUtils.getGetOption(n,"OraDateTimeConverter")("dst","boolean",[!0,!1],!1);if(void 0===l)return a;var h,d,c=e.supplemental.metazones,p=ve(t,l,c),_="standard",m=!s,g=be(l,e),f=Se(g,t,u,m,!0);if(void 0!==r.dates.timeZoneNames.metazone&&(h=r.dates.timeZoneNames.metazone[p]),void 0===h){var v=g.ofset(f);return i.OraI18nUtils.getTimeStringFromOffset(it,v,!0,!0)}d=1===o?h.long:h.short;var C=g.ofset(f);return C<g.ofset(f+1)&&(_="daylight"),void 0!==d&&void 0!==(a=d[_])?a:i.OraI18nUtils.getTimeStringFromOffset(it,C,!0,!0)},be=function(e,t){return U.getInstance().getZone(e,t)},Se=function(e,t,i,n,o){var s=Date.UTC(t[0],t[1]-1,t[2],t[3],t[4],t[5]);return e.parse(s,i,n,o)},s=function(e,o,s,r){var a,u,h=s.isoStrParts,d=0===s.dateTime.indexOf("T"),c=i.OraI18nUtils.getLocaleElementsMainNode(e),p=i.OraI18nUtils.getGetOption(o,"OraDateTimeConverter.format");u=o.pattern||n(o,e,r,"OraDateTimeConverter.format"),a=[];var _,m=0,g=c.dates.calendars.gregorian;function f(e,t){switch(t){case 0:return e[0];case 1:return e[1];case 2:return e[2];case 3:var i=new Date(e[0],e[1]-1,e[2],e[3],e[4],e[5]);return Ke[i.getDay()]}}function v(e,t,n,o){var s=f(t,n);e.push(o>1?i.OraI18nUtils.padZeros(s,o):s)}function C(e,t,n,s,r){var a;switch(s.timePart){case"hour":a=11===s.end1?t[3]%12:t[3],"h"===r||"hh"===r?0===a&&(a=12):"k"!==r&&"kk"!==r||0===a&&(a=24);break;case"minute":a=t[4];break;case"second":a=void 0===o.second&&void 0!==o.millisecond?0:t[5];break;case"millisec":a=t[6]}e.push(n>1?i.OraI18nUtils.padZeros(a,n):a)}function y(t,n,o){var r,a,l,u=n.timeZone,h=p("dst","boolean",[!0,!1],!1),d=!o;if(void 0!==u)a=be(u,e),l=Se(a,t,h,d,!0),r=-a.ofset(l);else if(s.format!==et)switch(s.format){case tt:r=s.timeZone.split(":");var c=parseInt(r[0],10),_=parseInt(r[1],10);r=60*c+(i.OraI18nUtils.startsWith(s.timeZone,"-")?-_:_);break;case Qe:default:r=0}return r}var b=o.timeZone;for(s.format!==et&&void 0!==b&&ce(s,o,e);;){var S=ze.lastIndex,E=ze.exec(u),T=u.slice(S,E?E.index:u.length);if(m+=t(T,a),!E)break;if(m%2)a.push(E[0]);else{var D=E[0],A=D.length,I=st[D];switch(I.token){case"days":_=g[I.token][I.style][I.dLen],a.push(_[f(h,3)]);break;case"months":_=g[I.token][I.style][I.mLen],a.push(_[f(h,1)]);break;case"dayOfMonth":case"monthIndex":a.push(v(a,h,I.getPartIdx,A));break;case"year":_=h[0],2===A&&(_%=100),a.push(i.OraI18nUtils.padZeros(_,A));break;case"time":C(a,h,A,I,D);break;case"ampm":_=h[3]<12?g.dayPeriods.format.wide.am:g.dayPeriods.format.wide.pm,a.push(_);break;case"tzhm":0===(_=y(h,o,d))?"XX"===I.key?a.push("Z"):a.push("+0000"):a.push((_<=0?"-":"+")+i.OraI18nUtils.padZeros(Math.floor(Math.abs(_/60)),2)+i.OraI18nUtils.padZeros(Math.floor(Math.abs(_%60)),2));break;case"tzhsepm":0===(_=y(h,o,d))?a.push("Z"):a.push((_<=0?"-":"+")+i.OraI18nUtils.padZeros(Math.floor(Math.abs(_/60)),2)+":"+i.OraI18nUtils.padZeros(Math.floor(Math.abs(_%60)),2));break;case"tzh":0===(_=y(h,o,d))?a.push("Z"):a.push((_<=0?"-":"+")+i.OraI18nUtils.padZeros(Math.floor(Math.abs(_/60)),2));break;case"tzid":_=void 0!==b?b:s.format===Qe?it:"",a.push(_);break;case"tzAbbrev":_=ye(e,h,o,0,d),a.push(_);break;case"tzFull":_=ye(e,h,o,1,d),a.push(_);break;case"era":_=g.eras.eraAbbr,a.push(_[1]);break;case"slash":a.push("/");break;default:l(u,o,D)}}}return a.join("")},D=function(e,t){return e.getFullYear()===t.getFullYear()},A=function(e,t){return t.getFullYear()-e.getFullYear()==1},I=function(e,t){return A(t,e)},O=function(e,t){return D(e,t)&&e.getMonth()===t.getMonth()},w=function(e,t){return D(e,t)?t.getMonth()-e.getMonth()==1:!!A(e,t)&&(11===e.getMonth()&&0===t.getMonth())},R=function(e,t){return w(t,e)},E=function(e,t){var i=e.getDate(),n=t.getDate();return w(e,t)&&(n+=f(e.getFullYear,e.getMonth())),n-i},T=function(e,t){var n=e._ojLocale_,o=i.OraI18nUtils.getBCP47Region(n),s=e.supplemental.weekData.firstDay,r=s[o];void 0===r&&(r=s["001"]);var a=t-r;return a<0&&(a+=7),a},x=function(e,t,i){if(t>i){var n=t;t=i,i=n}if(!O(t,i)&&!w(t,i))return!1;var o=E(t,i)+T(e,t.getDay());return o>=0&&o<=6},L=function(e,t,i){if(!O(t,i)&&!w(t,i))return!1;var n=E(t,i)+T(e,t.getDay());return n>=7&&n<=13},N=function(e,t,i){return L(e,i,t)},P=function(e,t){return D(e,t)&&O(e,t)&&e.getDate()===t.getDate()},M=function(e,t){return!(!O(e,t)&&!w(e,t))&&1===E(e,t)},j=function(e,t){return M(t,e)},Ee=function(e,t,n){var o=n.timeZone;if(i.OraI18nUtils.getISOStrFormatInfo(e).format===et&&void 0===o)return e;var s={isoStrFormat:"zulu"};void 0!==o&&(s.timeZone=o,s.dst=!0);var a=r(e,t,s,"en-US");return s={timeZone:i.OraI18nUtils.getLocalTimeZoneOffset(),isoStrFormat:"local"},r(a.value,t,s,"en-US").value},Te=function(e,t,n){var o=i.OraI18nUtils._IsoStrParts(e),s=i.OraI18nUtils._IsoStrParts(t);return n?(o=Date.UTC(o[0],o[1]-1,o[2],0,0,0,0),s=Date.UTC(s[0],s[1]-1,s[2],0,0,0,0)):(o=Date.UTC(o[0],o[1]-1,o[2],o[3],o[4],o[5],o[6]),s=Date.UTC(s[0],s[1]-1,s[2],s[3],s[4],s[5],s[6])),o-s},De=function(e,t){return e.replace(/\{(\d+)\}/g,function(){return t[arguments[1]]})},Ae=function(e,t,n,o){var r,a,l,u,h=i.OraI18nUtils.getLocaleElementsMainNode(n),d=h.dates.calendars.gregorian.dateTimeFormats.long,c=h.dates.calendars.gregorian.days.format.wide,p=h.dates.fields,_=i.OraI18nUtils.isoToLocalDate(t),m=i.OraI18nUtils.isoToLocalDate(e),g=i.OraI18nUtils.getISOStrFormatInfo(t);if(P(m,_))r=p.day["relative-type-0"];else if(M(m,_))r=p.day["relative-type-1"];else if(j(m,_))r=p.day["relative-type--1"];else{l=_.getDay(),u=Ke[l];var f=Te(t,e,!0);if((f/=864e5)<-1&&f>-7)r=p[u]["relative-type--1"];else{if(!(f>1&&f<7))return s(n,{year:"numeric",month:"numeric",day:"numeric"},g,"en-US");r=c[u]}}return o?r:(a=s(n,{hour:"numeric",minute:"numeric"},g,"en-US"),d=d.replace(/'/g,""),d=De(d,[a,r]))},Ie=function(e,t,n,o){var s=i.OraI18nUtils.getLocaleElementsMainNode(o).dates.fields,r=i.OraI18nUtils.getGetOption(n,"OraDateTimeConverter.formatRelative")("dateField","string",["day","week","month","year","hour","minute","second"]),a=i.OraI18nUtils.isoToLocalDate(e),l=i.OraI18nUtils.isoToLocalDate(t);switch(r){case"day":return P(a,l)?s.day["relative-type-0"]:M(a,l)?s.day["relative-type-1"]:j(a,l)?s.day["relative-type--1"]:Oe(e,t,o,"day");case"week":return x(o,a,l)?s.week["relative-type-0"]:L(o,a,l)?s.week["relative-type-1"]:N(o,a,l)?s.week["relative-type--1"]:Oe(e,t,o,"week");case"month":return O(a,l)?s.month["relative-type-0"]:w(a,l)?s.month["relative-type-1"]:R(a,l)?s.month["relative-type--1"]:Oe(e,t,o,"month");case"year":return D(a,l)?s.year["relative-type-0"]:A(a,l)?s.year["relative-type-1"]:I(a,l)?s.year["relative-type--1"]:Oe(e,t,o,"year");case"hour":return Oe(e,t,o,"hour");case"minute":return Oe(e,t,o,"minute");case"second":return Oe(e,t,o,"second")}return null},xe=function(e){return 4800*e/146097},Re=function(e){var t=xe(e/864e5),i=t/12;return{year:Math.round(i),month:Math.round(t),week:Math.round(e/6048e5),day:Math.round(e/864e5),hour:Math.round(e/36e5),minute:Math.round(e/6e4),second:Math.round(e/1e3),millisecond:e}},we=function(e){return e.split("-")[0]},Oe=function(e,t,n,o){var s=i.OraI18nUtils.getLocaleElementsMainNodeKey(n),r=i.OraI18nUtils.getLocaleElementsMainNode(n),a=we(s),l=n.supplemental.plurals,u=r.dates.fields,h=Te(t,e,!1),d=Math.abs(h),c=Re(d);if(null===o&&(o=(c.second<We?"second":c.minute<Ye&&"minute")||c.hour<qe&&"hour"||c.day<Xe&&"day"||c.week<Ze&&"week"||c.month<Je&&"month"||"year"),"second"===o&&c.second<We)return u[o]["relative-type-0"];var p="relativeTimePattern-count-"+l[a](c[o]),_=h<0?"relativeTime-type-past":"relativeTime-type-future",m=u[o][_][p];return void 0===m&&(p="relativeTimePattern-count-other",m=u[o][_][p]),m=De(m,[c[o]])},a=function(e,t,n){var o=i.OraI18nUtils.dateToLocalIso(new Date);if("number"==typeof e)e=i.OraI18nUtils.dateToLocalIso(new Date(e));else{if("string"!=typeof e)return null;if(""===i.OraI18nUtils.trim(e))return null}void 0===n&&(n={formatUsing:"displayName"});var s=i.OraI18nUtils.getGetOption(n,"OraDateTimeConverter.formatRelative"),r=s("relativeTime","string",["fromNow","toNow"],"fromNow"),a=s("dateField","string",["day","week","month","year","hour","minute","second"]);if(e=Ee(e,t,n),"toNow"===r){var l=o;o=e,e=l}if("calendar"===s("formatUsing","string",["displayName","calendar"],"displayName")){var u=s("dateOnly","boolean",[!0,!1],!1);return Ae(o,e,t,u)}return void 0!==a?Ie(o,e,n,t):Oe(o,e,t,null)},le=function(e,t){var i,n;throw n={errorCode:"dateToWeekdayMismatch",parameterMap:{weekday:e,date:t}},(i=new Error("The weekday "+e+" does not match the date "+t)).errorInfo=n,i},re=function(e,t,i){var n,o,s,r;throw 2===i?(n='The value "'+e+'" does not match the expected date-time format "'+t+'"',r="datetimeFormatMismatch"):0===i?(n='The value "'+e+'" does not match the expected date format "'+t+'"',r="dateFormatMismatch"):(n='The value "'+e+'" does not match the expected time format "'+t+'"',r="timeFormatMismatch"),s={errorCode:r,parameterMap:{value:e,format:t}},(o=new Error(n)).errorInfo=s,o},k=function(e,t){if(t<100){var i=e%100;t+=100*Math.floor(e/100)+(t<i?100:0)}return t},ne=function(e,t){var n={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};for(var o in e)if(i.OraI18nUtils.trim(i.OraI18nUtils.toUpper(e[o]))===i.OraI18nUtils.trim(t))return n[o];return-1},se=function(e,t){for(var n in e)if(i.OraI18nUtils.trim(i.OraI18nUtils.toUpper(e[n]))===i.OraI18nUtils.trim(t))return n-1;return-1},z=function(e,t,n){var o,s,r=i.OraI18nUtils.getLocaleElementsMainNode(e),a=r.dates.calendars.gregorian.days.format,l=r.dates.calendars.gregorian.days["stand-alone"];switch(n){case 0:s=[a.abbreviated,a.wide];break;case 1:s=[l.abbreviated,l.wide]}return t=i.OraI18nUtils.toUpper(t),-1===(o=ne(s[0],t))&&(o=ne(s[1],t)),o},Y=function(e,t,n){var o,s=-1,r=i.OraI18nUtils.getLocaleElementsMainNode(e),a=r.dates.calendars.gregorian.months.format,l=r.dates.calendars.gregorian.months["stand-alone"];switch(n){case 0:o=[a.wide,a.abbreviated];break;case 1:o=[l.wide,l.abbreviated];break;case 2:o=[a.wide,a.abbreviated,l.wide,l.abbreviated];break;default:return-1}for(var u in t=i.OraI18nUtils.toUpper(t),o)if(-1!==(s=se(o[u],t)))return s;return s},Z=function(e,i){for(var n,o=e.replace($e,"\\\\$1"),s=["^"],r=[],a=0,u=0;null!==(n=ze.exec(o));){var h=o.slice(a,n.index);if(a=ze.lastIndex,(u+=t(h,s))%2)s.push(n[0]);else{var d,c=n[0];void 0!==st[c]?d=st[c].regExp:l(e,i,c),d&&s.push(d),r.push(n[0])}}t(o.slice(a),s),s.push("$");var p=s.join("").replace(/\s+/g,"\\s+");return{}[e]={regExp:p,groups:r}},te=function(e,t,i,n,o,s,r){if(t<i||t>n){var a=new RangeError(o+" is out of range.  Enter a value between "+s+" and "+r+" for "+e),l={errorCode:"datetimeOutOfRange",parameterMap:{value:o,minValue:s,maxValue:r,propertyName:e}};throw a.errorInfo=l,a}},B=function(e,t){for(var i=0;i<e.length;i++)for(var n in e[i])if(n===t)return parseInt(i,10);return 0},$=function(e,t,n,o,s){var r=i.OraI18nUtils.getLocaleElementsMainNode(o).dates.calendars.gregorian.dayPeriods.format.wide.pm;Ve.lastIndex=0;var a=0,l=0,u=0,h=0,d=Ve.exec(t);switch(null===d&&re(t,n,s),void 0!==d[1]&&(a=parseInt(d[1],10)),void 0!==d[2]&&(l=parseInt(d[2],10)),void 0!==d[3]&&(u=parseInt(d[3],10)),void 0!==d[4]&&(h=parseInt(d[4],10)),Ge.lastIndex=0,(d=Ge.exec(n))[0]){case"h":12===a&&(a=0),te("hour",a,0,11,a,1,12),-1!==i.OraI18nUtils.toUpper(t).indexOf(i.OraI18nUtils.toUpper(r))&&a<12&&(a+=12);break;case"K":te("hour",a,0,11,a,0,11),-1!==i.OraI18nUtils.toUpper(t).indexOf(i.OraI18nUtils.toUpper(r))&&a<12&&(a+=12);break;case"H":te("hour",a,0,23,a,0,23);break;case"k":24===a&&(a=0),te("hour",a,0,23,a,1,24)}te("minute",l,0,59,l,0,59),te("second",u,0,59,u,0,59),te("millisec",h,0,999,h,0,999),e.setHours(a,l,u,h)},fe=function(e,t){var n,o,s,r=i.OraI18nUtils.getLocaleElementsMainNode(t),a=r.dates.calendars.gregorian.days.format,l=r.dates.calendars.gregorian.days["stand-alone"],u=[a.wide,a.abbreviated,l.wide,l.abbreviated],h=!1;for(o in u){for(s in u[o]){if(n=u[o][s],new RegExp(n+"\\b","i").test(e)){h=!0;break}}if(h)break;n=null}return n},V=function(e,t,n,o,s){Me.lastIndex=0;var r=Me.exec(e);null===r&&re(e,t,s?2:0);var a,l,u,h,d,p,_=[{y:t.indexOf("y")},{M:t.indexOf("M")},{d:t.indexOf("d")}];_.sort(function(e,t){for(var i in e)break;for(var n in t)break;return e[i]-t[n]});var m=B(_,"d"),g=!1,v=!1;for(p=1;p<=3;p++){var C=r[p];(C.length>2||C>31)&&(a=C,g=!0,h=p-1)}for(g||(h=B(_,"y"),a=r[B(_,"y")+1]),p=0;p<3;p++)if(p!==h&&r[p+1]>12){u=r[p+1],v=!0,d=p;break}if(v){for(p=0;p<3;p++)if(p!==d&&p!==h){l=r[p+1];break}void 0===l&&(l=r[B(_,"M")+1])}else h===B(_,"d")?(u=r[B(_,"y")+1],l=r[B(_,"M")+1]):h===B(_,"M")?(u=r[B(_,"d")+1],l=r[B(_,"y")+1]):(u=r[B(_,"d")+1],l=r[B(_,"M")+1]);var y=f(a,l-=1);v&&m!==d&&l>12&&te("month",u,0,11,u,1,12),te("month",l,0,11,l+1,1,12),te("day",u,1,y,u,1,y);var b=c(n);a=k(b,parseInt(a,10)),te("year",a,0,9999,a,0,9999);var S=new Date(a,l,u),E=fe(e,o);if(null!==E){var T=z(o,E,0);S.getDay()!==T&&le(E,S.getDate())}var D={value:S,offset:"",warning:"lenient parsing was used"};if(s){var A=e.substr(Me.lastIndex);0===A.length?D.value.setHours(0,0,0,0):$(D.value,A,t,o,2)}return D.value=i.OraI18nUtils.dateToLocalIso(D.value),D},G=function(e,t,n,o,s){var r=e;e=i.OraI18nUtils.toUpper(e);var a,l,u,h,d=i.OraI18nUtils.getLocaleElementsMainNode(o),p=d.dates.calendars.gregorian.months.format,_=d.dates.calendars.gregorian.months["stand-alone"],m=[p.wide,p.abbreviated,_.wide,_.abbreviated],g=!1;for(l in m){for(u in a=[],m[l])h=i.OraI18nUtils.toUpper(m[l][u]),a.push({idx:u,name:h});for(u in a.sort(function(e,t){return t.idx-e.idx}),a)if(h=a[u].name,-1!==e.indexOf(h)){g=!0,e=e.replace(h,"");break}if(g)break}if(!g)return V(r,t,n,o,s);var v=Y(o,h,2);te("month",v,0,11,v,1,12);var C=fe(r,o),y=new RegExp(C+"\\W","i");null!==C&&(e=e.replace(y,"")),Pe.lastIndex=0;var b=Pe.exec(e);null===b&&re(r,t,s?2:0);var S,E,T,D=[{y:t.indexOf("y")},{d:t.indexOf("d")}];D.sort(function(e,t){for(var i in e)break;for(var n in t)break;return e[i]-t[n]});var A=!1;for(l=1;l<=2;l++){var I=b[l];(I.length>2||I>31)&&(S=I,A=!0,T=l-1)}A||(T=B(D,"y"),S=b[B(D,"y")+1]),E=T===B(D,"d")?b[B(D,"y")+1]:b[B(D,"d")+1];var O=c(n);S=k(O,parseInt(S,10)),te("year",S,0,9999,S,0,9999);var w=new Date(S,v,E);if(null!==C){var R=z(o,C,0);w.getDay()!==R&&le(C,w.getDate())}var x=f(S,v);te("day",E,1,x,E,1,x);var L={value:w,offset:"",warning:"lenient parsing was used"};if(s){var N=e.substr(Pe.lastIndex);0===N.length?L.value.setHours(0,0,0,0):$(L.value,N,t,o,2)}return L.value=i.OraI18nUtils.dateToLocalIso(L.value),L},F=function(e,t,n,o){switch(h(n,"OraDateTimeConverter.parse")){case 0:return G(e,t,n,o,!1);case 1:var s=new Date;return $(s,e,t,o,1),{value:i.OraI18nUtils.dateToLocalIso(s),offset:"",warning:"lenient parsing was used"};case 2:return G(e,t,n,o,!0)}return null},ge=function(e,t,n,o,s,r,a,l,u,h,d){var c,p,_,m=i.OraI18nUtils.getLocaleElementsMainNode(e).dates.calendars.gregorian[t][s];return c="months"===t?Y(e,n,r):z(e,n,r),p=m[o][u],_=m[o][h],te(d,c,a,l,n,p,_),c},me=function(e,t,i,n){t[i.timePart]=e,"h"===n||"hh"===n?12===e&&(t[i.timePart]=0):"k"!==n&&"kk"!==n||24===e&&(t[i.timePart]=0),te(i.timePart,t[i.timePart],i.start1,i.end1,e,i.start2,i.end2)},o=function(e,t,n,o){var s=i.OraI18nUtils.getLocaleElementsMainNode(o),r=s.dates.calendars.gregorian.eras.eraAbbr[1],a=i.OraI18nUtils.trimNumber(r);e=e.replace(r,a);var l=i.OraI18nUtils.getGetOption(n,"OraDateTimeConverter.parse")("lenientParse","string",["none","full"],"full"),u=h(n,"OraDateTimeConverter.parse"),d=Z(t,n),p=new RegExp(d.regExp).exec(e);if(null===p){if("full"===l)return F(e,t,n,o);re(e,t,u)}for(var _,m=d.groups,g=null,v=null,C=null,y=null,b="",S=null,E=!1,T={hour:0,minute:0,second:0,millisec:0},D=s.dates.calendars.gregorian.dayPeriods.format.wide.pm,A=c(n),I=0,O=m.length;I<O;I++){var w=p[I+1];if(w){var R=m[I],x=parseInt(w,10),L=st[R];switch(L.token){case"months":v=ge(o,L.token,w,L.mLen,L.style,L.matchIndex,0,11,"1","12","month name");break;case"days":_=w,y=ge(o,L.token,w,L.dLen,L.style,L.matchIndex,0,6,"sun","sat","weekday");break;case"time":me(x,T,L,R);break;case"dayOfMonth":if((C=x)>31&&"full"===l)return F(e,t,n,o);break;case"monthIndex":if((v=x-1)>11&&"full"===l)return F(e,t,n,o);break;case"year":g=k(A,x),te("year",g,0,9999,g,0,9999);break;case"ampm":E=-1!==i.OraI18nUtils.toUpper(w).indexOf(i.OraI18nUtils.toUpper(D));break;case"tzhm":b=w.substr(-2),b=w.substr(0,3)+":"+b;break;case"tzhsepm":b=w;break;case"tzh":b=w+":00";break;case"tzid":S=w}}}var N=new Date;null===g&&(g=N.getFullYear()),null===v&&null===C?(v=N.getMonth(),C=N.getDate()):null===C&&(C=1),te("month",v,0,11,v+1,1,12);var P=f(g,v);te("day",C,1,P,C,1,P),N.setFullYear(g,v,C),null!==y&&N.getDay()!==y&&le(_,N.getDate()),E&&T.hour<12&&(T.hour+=12);var M=[g,v+1,C,T.hour,T.minute,T.second,T.millisec],j=i.OraI18nUtils.partsToIsoString(M);if(null!==S){var H=be(S,o),U=Se(H,M,!1,!0,!0);b=-H.ofset(U),b=i.OraI18nUtils.getTimeStringFromOffset("",b,!1,!0)}return""!==b&&(j+=b),{value:j}},u=function(e,i,n){for(var o,s=n.replace($e,"\\\\$1"),r=["^"],a=0,u=0,h={locale:e,numberingSystem:i,calendar:"gregorian"};null!==(o=ze.exec(s));){var d=s.slice(u,o.index);if(u=ze.lastIndex,!((a+=t(d,r))%2)){var c=o[0];"/"!==c&&"zzzz"!==c&&"zzz"!==c&&"zz"!==c&&"z"!==c&&(void 0!==st[c]?(void 0!==st[c].key&&(h[st[c].key]=st[c].value),"kk"===c||"HH"===c||"H"===c||"k"===c?h.hour12=!1:"KK"!==c&&"hh"!==c&&"h"!==c&&"K"!==c||(h.hour12=!0)):l(n,h,c))}}return h},_=function(e){var t=u("","",e),i=void 0!==t.year||void 0!==t.month||void 0!==t.weekday||void 0!==t.day,n=void 0!==t.hour||void 0!==t.minute||void 0!==t.second||void 0!==t.millisecond;return i&&n?2:n?1:0},d=function(e){var t=e.indexOf("T");return-1===t?0:t>0?2:1},h=function(e,t){if(void 0!==e.pattern)return _(e.pattern);var n=i.OraI18nUtils.getGetOption(e,t),o=void 0!==n("hour","string",["2-digit","numeric"])||void 0!==n("minute","string",["2-digit","numeric"])||void 0!==n("second","string",["2-digit","numeric"])||void 0!==n("millisecond","string",["numeric"]),s=void 0!==n("year","string",["2-digit","numeric"])||void 0!==n("month","string",["2-digit","numeric","narrow","short","long"])||void 0!==n("day","string",["2-digit","numeric"])||void 0!==n("weekday","string",["narrow","short","long"]);if(s&&o)return 2;if(o)return 1;if(s)return 0;var r=n("formatType","string",["date","time","datetime"],"date");return"datetime"===r?2:"time"===r?1:0},pe=function(e,t){var i=Se(e,t,!1,!0,!1),n=e.ofset(i),o=e.ofset(i+1);return Math.max(n,o)},ce=function(e,t,n){var o,s,r,a,l=e.isoStrParts,u=e.format,h=t.timeZone,d=(i.OraI18nUtils.getGetOption(t,"OraDateTimeConverter.parse"),be(h,n));switch(o=Date.UTC(l[0],l[1]-1,l[2],l[3],l[4],l[5]),u){case tt:var c=e.timeZone;s=c.split(":");var p=parseInt(s[0],10),_=parseInt(s[1],10);s=60*p+(i.OraI18nUtils.startsWith(c,"-")?-_:_);break;case Qe:s=0}o-=6e4*((r=pe(d,l))+s),a=d.parse(o,!1,!0,!1),r=-d.ofset(a),r-=s;var m=new Date(Date.UTC(l[0],l[1]-1,l[2],l[3],l[4],l[5])),g=m.getUTCMinutes()+r;m.setUTCHours(m.getUTCHours()+(g/60<<0),g%60),l[0]=m.getUTCFullYear(),l[1]=m.getUTCMonth()+1,l[2]=m.getUTCDate(),l[3]=m.getUTCHours(),l[4]=m.getUTCMinutes(),l[5]=m.getUTCSeconds()},function(e){var t=2,i=e.dateTime.split("T");return""===i[0]?t=1:void 0===i[1]&&(t=0),t},de=function(e,t){var n,o="";switch(e){case 0:o=i.OraI18nUtils.padZeros(t[0],4)+"-"+i.OraI18nUtils.padZeros(t[1],2)+"-"+i.OraI18nUtils.padZeros(t[2],2);break;case 1:o="T"+i.OraI18nUtils.padZeros(t[3],2)+":"+i.OraI18nUtils.padZeros(t[4],2)+":"+i.OraI18nUtils.padZeros(t[5],2),(n=t[6])>0&&(o+="."+i.OraI18nUtils.trimRightZeros(i.OraI18nUtils.padZeros(n,3)));break;default:o=i.OraI18nUtils.padZeros(t[0],4)+"-"+i.OraI18nUtils.padZeros(t[1],2)+"-"+i.OraI18nUtils.padZeros(t[2],2)+"T"+i.OraI18nUtils.padZeros(t[3],2)+":"+i.OraI18nUtils.padZeros(t[4],2)+":"+i.OraI18nUtils.padZeros(t[5],2),(n=t[6])>0&&(o+="."+i.OraI18nUtils.trimRightZeros(i.OraI18nUtils.padZeros(n,3)))}return o},he=function(e,t,n,o,s,r){var a=be(e,s),l=Se(a,t,n,o,r),u=a.ofset(l);return i.OraI18nUtils.getTimeStringFromOffset("",u,!0,!0)},ue=function(e,t,n,o){var s,r,a,l=i.OraI18nUtils.getGetOption(n,"OraDateTimeConverter.parse"),u=l("isoStrFormat","string",[Qe,tt,"invariant",et,"auto"],"auto"),h=l("dst","boolean",[!0,!1],!1),d=!0,c=t.isoStrParts,p=t.timeZone,_=n.timeZone,m=t.format,g=n.isoStrFormat,f=de(e,c);if(0===e||"local"===g)return f;switch(1===e&&(d=!1),u){case tt:void 0===_&&m===tt?f+=p:void 0===_&&m===et?f+="":void 0===_&&m===Qe?f+="+00:00":void 0!==_&&(f+=a=he(_,c,h,d,o,!0));break;case Qe:var v=0;if(void 0===_){if(m===tt){a=p.split(":");var C=parseInt(a[0],10),y=parseInt(a[1],10);v=-(v=60*C+(i.OraI18nUtils.startsWith(a[0],"-")?-y:y))}}else s=be(_,o),r=Se(s,c,h,d,!0),v=a=s.ofset(r);if(0!==v){var b=new Date(Date.UTC(c[0],c[1]-1,c[2],c[3],c[4],c[5],c[6]));v=b.getUTCMinutes()+v,b.setUTCHours(b.getUTCHours()+(v/60<<0),v%60),c[0]=b.getUTCFullYear(),c[1]=b.getUTCMonth()+1,c[2]=b.getUTCDate(),c[3]=b.getUTCHours(),c[4]=b.getUTCMinutes(),c[5]=b.getUTCSeconds(),f=de(e,c)}f+="Z";break;case"auto":void 0!==_?f+=a=he(_,c,h,d,o,!0):(a=p)&&(f+=a)}return f},r=function(e,t,s,r){var a,l,u=i.OraI18nUtils.getNumberingExtension(r);if(void 0===i.OraI18nUtils.numeringSystems[u]&&(u="latn"),"latn"!==u){var c,p=[];for(c=0;c<e.length;c++){var _=i.OraI18nUtils.numeringSystems[u].indexOf(e[c]);-1!==_?p.push(_):p.push(e[c])}e=p.join("")}(arguments.length<=2||void 0===s)&&(s={year:"numeric",month:"numeric",day:"numeric"});var m,g,f={};return!0===i.OraI18nUtils._ISO_DATE_REGEXP.test(e)?(m=e,a=d(e)):(l=s.pattern||n(s,t,r,"OraDateTimeConverter.parse"),a=h(s,"OraDateTimeConverter.parse"),m=(f=o(e,l,s,t)).value),g=i.OraI18nUtils.getISOStrFormatInfo(m),void 0!==s.timeZone&&g.format!==et&&ce(g,s,t),m=ue(a,g,s,t),f.value=m,f},ie=function(e,t){var n={isoStrFormat:et},o=i.OraI18nUtils.getISOStrFormatInfo(e),s=i.OraI18nUtils.getISOStrFormatInfo(t),r=o.format,a=s.format;return r===et||a===et?n:(n.isoStrFormat=Qe,n)},J=function(e,t,i,n,o,s,r){var a=u(n,o,s.pattern);return a.pattern=s.pattern,void 0!==e&&(a.isoStrFormat=e),void 0!==t&&(a.timeZone=t),void 0!==i&&(a.dst=i),a["two-digit-year-start"]=c(s),a.lenientParse=r("lenientParse","string",["none","full"],"full"),a},Q=function(e,t,i,n){var o,s=!1;return void 0!==i&&(t.dst=i),void 0!==(o=e("year","string",["2-digit","numeric"]))&&(t.year=o,s=!0),void 0!==(o=e("era","string",["narrow","short","long"]))&&(t.era=o,s=!0),void 0!==(o=e("month","string",["2-digit","numeric","narrow","short","long"]))&&(t.month=o,s=!0),void 0!==(o=e("day","string",["2-digit","numeric"]))&&(t.day=o,s=!0),void 0!==(o=e("weekday","string",["narrow","short","long"]))&&(t.weekday=o,s=!0),void 0!==(o=e("hour","string",["2-digit","numeric"]))&&(t.hour=o,s=!0,void 0===(o=e("hour12","boolean",[!0,!1]))&&(o=p(n)),t.hour12=o),void 0!==(o=e("minute","string",["2-digit","numeric"]))&&(t.minute=o,s=!0),void 0!==(o=e("second","string",["2-digit","numeric"]))&&(t.second=o,s=!0),void 0!==(o=e("millisecond","string",["numeric"]))&&(t.millisecond=o,s=!0),s},q=function(e,t,i,n){var o=m(t,i,H.resolvedOptions),s=n("formatType","string",["date","time","datetime"],"date"),r=n("dateFormat","string",["short","medium","long","full"],"short"),a=n("timeFormat","string",["short","medium","long","full"],"short");e.formatType=s,"datetime"!==s&&"date"!==s||(e.dateFormat=r),"datetime"!==s&&"time"!==s||(e.timeFormat=a),e.patternFromOptions=o,e.lenientParse=n("lenientParse","string",["none","full"],"full")},ee=function(e,t){var i=e("formatUsing","string",["displayName","calendar"]);void 0!==i&&(t.formatUsing=i),void 0!==(i=e("dateField","string",["day","week","month","year","hour","minute","second"]))&&(t.dateField=i),void 0!==(i=e("relativeTime","string",["fromNow","toNow"]))&&(t.relativeTime=i),void 0!==(i=e("dateOnly","boolean",[!0,!1]))&&(t.dateOnly=i)},X=function(e,t,i,o,s,r,a,l){var u,h={locale:l,numberingSystem:a,calendar:"gregorian"},d=0;for(u in e)d++;if(0===d)return h.year="numeric",h.month="numeric",h.day="numeric",h.lenientParse="full",h;void 0!==i&&(h.timeZone=i,void 0!==s&&(h.isoStrFormat=s)),ee(t,h);var p=Q(t,h,o,r);return h["two-digit-year-start"]=c(e),p?(void 0!==i&&void 0!==(u=t("timeZoneName","string",["short","long"]))&&(h.timeZoneName=u),h.lenientParse=t("lenientParse","string",["none","full"],"full"),h.patternFromOptions=n(h,r,l,"OraDateTimeConverter.resolvedOptions"),h):(q(h,e,r,t),h)},K=function(e,t,i){return{calendar:"gregorian",locale:t,numberingSystem:i,year:"numeric",month:"numeric",day:"numeric",patternFromOptions:n({year:"numeric",month:"numeric",day:"numeric"},e,t,"OraDateTimeConverter.resolvedOptions"),lenientParse:"full"}},W=function(e,t,n){var o,s,r;(arguments.length<3||void 0===n)&&(n=i.OraI18nUtils.getLocaleElementsMainNodeKey(e)),(arguments.length<2||void 0===t)&&(t={year:"numeric",month:"numeric",day:"numeric"});var a=i.OraI18nUtils.getGetOption(t,"OraDateTimeConverter.resolvedOptions");void 0!==t&&(s=a("isoStrFormat","string",[Qe,tt,"invariant",et,"auto"],"auto"),r=a("dst","boolean",[!0,!1],!1),o=t.timeZone);var l=i.OraI18nUtils.getNumberingExtension(n);return void 0===i.OraI18nUtils.numeringSystems[l]&&(l="latn"),void 0!==t&&void 0!==t.pattern?J(s,o,r,n,l,t,a):void 0!==t?X(t,a,o,r,s,e,l,n):K(e,n,l)},_e=function(e){function t(t,n,o,s){var r=t.split("/"),a=r[0],l=r[1],u="",h="",d={},c=s[a];void 0!==c&&void 0!==(u=c[l])&&void 0!==(u=u.exemplarCity)&&(u=" "+u),t=a+"/"+l;var p=e.supplemental.metazones,_=ve(m,t,p);void 0!==o&&(_=o[_]),null!=_&&void 0!==_.long&&(void 0===(h=_.long.generic)&&(h=_.long.standard),void 0!==h&&(h=" - "+h));var g="("+it+")";return 0!==n&&(g="("+(g=i.OraI18nUtils.getTimeStringFromOffset(it,n,!0,!0))+")"),void 0===u||void 0===h?null:(d.offsetLocName=g+u+h,d.locName=u+h,d)}function n(i){var n,o,s;for(n in i){o=r.getZone(n,e);var a=t(n,s=pe(o,m),h,d);null!==a&&(c.push({id:n,displayName:a}),p[n]=s)}}var o=i.OraI18nUtils.getLocaleElementsMainNodeKey(e);if(void 0!==Ne[o]){var s=Ne[o].availableTimeZones;if(void 0!==s)return s}var r=U.getInstance(),a={sensitivity:"variant"},l=i.OraI18nUtils.getLocaleElementsMainNodeKey(e),u=i.OraI18nUtils.getLocaleElementsMainNode(e),h=u.dates.timeZoneNames.metazone,d=u.dates.timeZoneNames.zone,c=[],p={},_=new Date,m=[_.getFullYear(),_.getMonth()+1,_.getDate(),_.getHours(),_.getMinutes(),_.getSeconds()],g=e.supplemental.timeZoneData;n(g.zones),n(g.links),c.sort(function(e,t){return p[t.id]-p[e.id]+e.displayName.locName.localeCompare(t.displayName.locName,l,a)});for(var f=c.length,v=0;v<f;v++)c[v].displayName=c[v].displayName.offsetLocName;return void 0===Ne[o]&&(Ne[o]={},Ne[o].availableTimeZones=c),c},{getInstance:function(){return e||(e={format:function(e,t,n,o){var r,a;if("number"==typeof e)r=i.OraI18nUtils.dateToLocalIso(new Date(e));else{if("string"!=typeof e)return null;if(""===(r=i.OraI18nUtils.trim(e)))return null}(arguments.length<=2||void 0===n)&&(n={year:"numeric",month:"numeric",day:"numeric"}),a=i.OraI18nUtils.getISOStrFormatInfo(r);var l=s(t,n,a,o),u=i.OraI18nUtils.getNumberingExtension(o);if(void 0===i.OraI18nUtils.numeringSystems[u]&&(u="latn"),"latn"!==u){var h,d=[];for(h=0;h<l.length;h++)l[h]>="0"&&l[h]<="9"?d.push(i.OraI18nUtils.numeringSystems[u][l[h]]):d.push(l[h]);return d.join("")}return l},formatRelative:function(e,t,i){return a(e,t,i)},parse:function(e,t,i,n){return r(e,t,i,n)},resolvedOptions:function(e,t,i){return W(e,t,i)},calculateWeek:function(e){var t,n=i.OraI18nUtils.isoToLocalDate(e),o=new Date(n.getTime());return o.setDate(o.getDate()+4-(o.getDay()||7)),t=o.getTime(),o.setMonth(0),o.setDate(1),Math.floor(Math.round((t-o)/864e5)/7)+1},getAvailableTimeZones:function(e){return _e(e)},compareISODates:function(e,t,n){var o=ie(e,t),s=r(e,n,o,"en-US"),a=r(t,n,o,"en-US"),l=s.value.replace("Z",""),u=a.value.replace("Z",""),h=i.OraI18nUtils._IsoStrParts(l);h=Date.UTC(h[0],h[1]-1,h[2],h[3],h[4],h[5],h[6]);var d=i.OraI18nUtils._IsoStrParts(u);return h-(d=Date.UTC(d[0],d[1]-1,d[2],d[3],d[4],d[5],d[6]))},isHour12:function(e){return p(e)},getTimePositioning:function(e,t,n){var o=W(e,t,n),s=o.pattern||o.patternFromOptions;s=(s=s.replace(/\'[^']*\'/g,"").replace(/[^hHkKma]*/g,"")).replace(/(h|H|k|K)+/,"h").replace(/m+/,"m");var r=i.OraI18nUtils.getLocaleElementsMainNodeKey(e),a=we(r),l="ar"===a||"he"===a,u={},h=0,d=s.length;for(h=0;h<d;h++)u[s.charAt(h)]=h;return l&&(h=u.h,u.h=u.m,u.m=h),u}}),e}}}(),U=function(){var e,t,i,n,o,s,r,a,l,u,h,d,c,p,_,m={},g=/^Etc\/GMT/i,f=-840,v=720,C="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX";function y(e,t){var i=t.zones[e];if(g.test(e)){var n,o=0,s=e.replace(g,"").split(":");if(n=60*parseInt(s[0],10),isNaN(n))return;if(2===s.length&&(o=parseInt(s[1],10),isNaN(o)))return;if((n+=n>=0?o:-o)<f||n>v)return;n=a(n,1),i=e.replace("/etc//i","").toUpperCase()+"|"+n+"|0|"}void 0!==i&&this._set(r(e,i))}return l=function(e,t){for(var i,n=".",o="";t>0;)t-=1,e*=60,i=Math.floor(e+1e-6),n+=C[i],e-=i,i&&(o+=n,n="");return o},a=function(e,t){for(var i="",n=Math.abs(e),o=Math.floor(n),s=l(n-o,Math.min(~~t,10));o>0;)i=C[o%60]+i,o=Math.floor(o/60);return e<0&&(i="-"+i),i&&s?i+s:(s||"-"!==i)&&(i||s)||"0"},t=function(e){return e>96?e-87:e>64?e-29:e-48},i=function(e){var i=0,n=e.split("."),o=n[0],s=n[1]||"",r=1,a=0,l=1;for(45===e.charCodeAt(0)&&(i=1,l=-1);i<o.length;i++)a=60*a+t(o.charCodeAt(i));for(i=0;i<s.length;i++)r/=60,a+=t(s.charCodeAt(i))*r;return a*l},n=function(e){for(var t=0;t<e.length;t++)e[t]=i(e[t])},o=function(e,t){for(var i=0;i<t;i++)e[i]=Math.round((e[i-1]||0)+6e4*e[i]);e[t-1]=1/0},s=function(e,t){var i,n=[];for(i=0;i<t.length;i++)n[i]=e[t[i]];return n},r=function(e,t){var i=t.split("|"),r=i[1].split(" "),a=i[2].split(""),l=i[3].split(" ");return n(r),n(a),n(l),o(l,a.length),{name:e,abbrs:s(i[0].split(" "),a),offsets:s(r,a),untils:l}},c=function(e){var t,i;throw i={errorCode:"invalidTimeZoneID",parameterMap:{timeZoneID:e}},(t=new Error("invalid timeZone ID: "+e)).errorInfo=i,t},p=function(){var e,t;throw"The input time does not exist because it falls during the transition to daylight saving time.",t={errorCode:"nonExistingTime"},(e=new Error("The input time does not exist because it falls during the transition to daylight saving time.")).errorInfo=t,e},_=function(){var e,t;throw"TimeZone data is missing. Please call require 'ojs/ojtimezonedata' in order to load the TimeZone data.",t={errorCode:"missingTimeZoneData"},(e=new Error("TimeZone data is missing. Please call require 'ojs/ojtimezonedata' in order to load the TimeZone data.")).errorInfo=t,e},y.prototype={_set:function(e){this.name=e.name,this.abbrs=e.abbrs,this.untils=e.untils,this.offsets=e.offsets},parse:function(e,t,i,n){var o,s,r,a,l,u,h=this.offsets,d=this.untils,c=d.length-1;for(r=0;r<c;r++){if(o=h[r],s=h[r+1],l=(a=(u=d[r])-6e4*o)-36e5,e>=a&&e<a+36e5&&o>s){if(!0!==n)return r+1;p()}if(e>=l&&e<a&&o<s)return t?r:r+1;if(e<u-6e4*o)return!1===i?t?o<s?r:r+1:o<s?r+1:r:r}return c},abbr:function(e){return this.abbrs[e]},ofset:function(e){var t=this.offsets.length;return e>=0&&e<t?parseInt(this.offsets[e],10):parseInt(this.offsets[t-1],10)},len:function(){return this.offsets.length}},u=function(e){return(e||"").toLowerCase().replace(/\//g,"_")},d=function(e,t){var i,n;i=new y(e,t),n=u(i.name),m[n]=i},h=function(e,t){var i=u(e);return void 0===m[i]&&d(e,t),m[u(e)]||null},{getInstance:function(){return e||(e={getZone:function(e,t){var i=t.supplemental.timeZoneData;void 0===i&&_();var n=h(e,i);if(!n){var o=i.links[e];o&&(n=h(o,i))}return n||c(e),n}}),e}}}(),i.__KO_CUSTOM_BINDING_PROVIDER_INSTANCE=(new function(){this.install=function(){var t=ko.bindingProvider,n=t.instance;if(!n.getBindingAccessors)return i.Logger.error("JET's Knockout bindings are not compatible with the current binding provider since it does not implement getBindingAccessors()"),this;var o=t.instance={},s=[];return s.push("getBindingAccessors","nodeHasBindings","getBindings","preprocessNode"),s.forEach(function(t){!function(t,i,n){var o=t[n];i[n]=function(){var i=o?o.apply(t,arguments):null,s=e[n];if(null!=s){var r=arguments;s.forEach(function(e){var n=Array.prototype.slice.call(r);n.push(i,t),i=ko.ignoreDependencies(e,null,n)})}return i}}(n,o,t)}),this},this.addPostprocessor=function(t){Object.keys(t).forEach(function(i){e[i]=e[i]||[],e[i].push(t[i])})};var e={}}).install(),i.Object.createSubclass(G,i.Object,"ComponentBinding.GlobalChangeQueue"),G.prototype.Init=function(){G.superclass.Init.call(this),this._trackers=[],this._queue=[]},G.prototype.registerComponentChanges=function(e){-1===this._trackers.indexOf(e)&&(this._trackers.push(e),this._delayTimer||(this._delayTimer=setTimeout(i.Object.createCallback(this,this._deliverChangesImpl),1)))},G.prototype.deliverChanges=function(){this._delayTimer&&clearTimeout(this._delayTimer),this._deliverChangesImpl()},G.prototype._deliverChangesImpl=function(){var e;this._delayTimer=null;var t=this._trackers;for(this._trackers=[],e=0;e<t.length;e++){var i=t[e];this._queue.push({tracker:i,changes:i.flushChanges()})}for(;this._queue.length>0;){var n=this._queue.shift();n.tracker.applyChanges(n.changes)}},i.ComponentBinding=function(e,t){this.Init(e,t)},i.Object.createSubclass(i.ComponentBinding,i.Object,"oj.ComponentBinding"),i.ComponentBinding.create=function(e,t){if(null==e)throw"Binding name is required!";var n,o=new i.ComponentBinding(e,t),s=(o._getBindingOptions().componentName,ko.bindingHandlers),r=Array.isArray(e)?e:[e];for(n=0;n<r.length;n++){var a=r[n];i.ComponentBinding._REGISTERED_NAMES.push(a),s[a]=o}return o},i.ComponentBinding.getDefaultInstance=function(){return i.ComponentBinding._INSTANCE},i.ComponentBinding.prototype.setupManagedAttributes=function(e){var t=e.for;t=null==t?"@global":t;var i=this._managedAttrOptions[t]||[];i.push(e),this._managedAttrOptions[t]=i},i.ComponentBinding.deliverChanges=function(){i.ComponentBinding._changeQueue.deliverChanges()},i.ComponentBinding.prototype.Init=function(e,t){i.ComponentBinding.superclass.Init.call(this),"string"==typeof t&&(t={componentName:t}),this._bindingOptions=t||{},this._bindingNames=Array.isArray(e)?e:[e],this.init=this._init.bind(this),this.update=this._update.bind(this),this._managedAttrOptions={}},i.ComponentBinding.prototype._getBindingOptions=function(){return this._bindingOptions},i.ComponentBinding.prototype._init=function(e,t,i,n,o){return ko.applyBindingsToDescendants(o,e),{controlsDescendantBindings:!0}},i.ComponentBinding.prototype._update=function(e,t,n,o,s){var r,a,l=[],u=0,h=$(e);function d(e){l.forEach(function(e){e.dispose()}),l=[],e&&r&&(r("destroy"),r=null),a&&(a.dispose(),a=null),h.off(i.ComponentBinding._HANDLER_NAMESPACE)}function c(t,o,u){if(null!=t){var d=h[t];if("function"==typeof d){d=d.bind(h);a=new Y(function(e){var t=i.ComponentBinding.__removeDotNotationOptions(e);d("option",e);for(var n=Object.keys(t),o=0;o<n.length;o++){var s=n[o];d("option",s,t[s])}},i.ComponentBinding._changeQueue);var c=Object.keys(u).filter(function(e){return!(null==e||e===o)}),p={component:d,changeTracker:a,componentName:t,specifiedOptions:c,computeds:l,valueAccessor:function(){return u},allBindingsAccessor:n,bindingContext:s,destroyCallback:function(){r=null},readOnlyProperties:{}};r=this._initComponent(e,p)}else i.Logger.error("Component %s is not found",t)}}ko.ignoreDependencies(function(){ko.computed(function(){var e=ko.utils.unwrapObservable(t());"object"!=typeof e&&i.Logger.error("ojComponent binding should evaluate to an object");var n,o=this._bindingOptions.componentName,s=!1;if(null==o&null!=e){for(var r=[i.ComponentBinding._COMPONENT_OPTION,"role"],a=0;!s&&a<r.length;a++)(n=r[a])in e&&(s=!0,o=e[n]);s||i.Logger.error("component attribute is required for the ojComponent binding"),o=ko.utils.unwrapObservable(o)}0==u?u=1:ko.ignoreDependencies(d,this,[!0]),ko.ignoreDependencies(c,this,[o,n,e])},this,{disposeWhenNodeIsRemoved:e})},this),ko.utils.domNodeDisposal.addDisposeCallback(e,d.bind(this,!1))},i.ComponentBinding.prototype._initComponent=function(e,t){var n=!1,o=0,s={},r=$(e),a=t.component,l=t.componentName,u=this,h=function(o){if(o.target&&o.target==e){t.destroyCallback();var r=u._bindingOptions.beforeDestroy;r&&r(e,a,t.valueAccessor,t.allBindingsAccessor,t.bindingContext),i.ComponentBinding._deliverCreateDestroyEventToManagedProps(!1,s,e,a,t.valueAccessor,t.allBindingsAccessor,t.bindingContext),n=!0,t.changeTracker.dispose(),e.removeEventListener("_ojDestroy",h)}};e.addEventListener("_ojDestroy",h);var d=i.ComponentBinding._resolveManagedAttributes(this._managedAttrOptions,t.specifiedOptions,l),c=i.ComponentBinding.getDefaultInstance();if(this!==c){var p=c._getManagedAttributes(t.specifiedOptions,l);i.CollectionUtils.copyInto(p,d),d=p}for(var _={},m=function(){var r=this._property,l=i.ComponentBinding._toJS(t.valueAccessor()[r]);if(0===o){var u=d[r];if(null!=u){s[r]=u;var h=u.init;if(null!=h)for(var c=h(r,l,e,a,t.valueAccessor,t.allBindingsAccessor,t.bindingContext)||{},p=Object.keys(c),m=0;m<p.length;m++){var g=p[m];_[g]=i.ComponentBinding.__cloneIfArray(c[g])}}else _[r]=i.ComponentBinding.__cloneIfArray(l)}else if(!n)if(null!=d[r]){var f=d[r].update;if(null!=f)for(var v=f(r,l,e,a,t.valueAccessor,t.allBindingsAccessor,t.bindingContext)||{},C=Object.keys(v),y=0;y<C.length;y++){var b=C[y];t.changeTracker.addChange(b,i.ComponentBinding.__cloneIfArray(v[b]))}}else t.readOnlyProperties[r]||t.changeTracker.addChange(r,i.ComponentBinding.__cloneIfArray(l))},g=0;g<t.specifiedOptions.length;g++)t.computeds.push(ko.computed(m,{_property:t.specifiedOptions[g]}));o=1,i.ComponentBinding._registerWritebacks(r,t);var f=i.ComponentBinding.__removeDotNotationOptions(_);a(_),Object.keys(f).forEach(function(e){a("option",e,f[e])});var v=this._bindingOptions.afterCreate;return v&&v(e,a,t.valueAccessor,t.allBindingsAccessor,t.bindingContext),i.ComponentBinding._deliverCreateDestroyEventToManagedProps(!0,s,e,a,t.valueAccessor,t.allBindingsAccessor,t.bindingContext),_=null,a},i.ComponentBinding.__CreateEvaluator=function(e){return new Function("$context","with($context){with($data||{}){return "+e+";}}")},i.ComponentBinding.prototype._getManagedAttributes=function(e,t){return i.ComponentBinding._resolveManagedAttributes(this._managedAttrOptions,e,t)},i.ComponentBinding._resolveManagedAttributes=function(e,t,i){var n={},o=[],s=function(t,i){var n=e[t];if(null!=n)for(var r=n.length-1;r>=0;r--){var a=n[r];if(null!=a.attributes&&o.push(a),i){var l=a.use;if(null!=l){l=Array.isArray(l)?l:[l];for(var u=0;u<l.length;u++)s(l[u],!0)}}}};s(i,!0);var r=$.oj[i];if(null!=r)for(var a=Object.getPrototypeOf(r.prototype);null!=a&&"oj"===a.namespace;)s(a.widgetName,!0),a=Object.getPrototypeOf(a);if(s("@global",!1),o.length>0)for(var l=0;l<t.length;l++)for(var u=t[l],h=0;h<o.length;h++){var d=o[h];if(d.attributes.indexOf(u)>=0){n[u]={init:d.init,update:d.update,afterCreate:d.afterCreate,beforeDestroy:d.beforeDestroy};break}}return n},i.ComponentBinding._HANDLER_NAMESPACE=".oj_ko",i.ComponentBinding._registerWritebacks=function(e,t){for(var n={"^slider$":[{event:"slidechange",getter:z}],"^oj*":[{event:"ojoptionchange",getter:function(e,t,i){var n={},o=i.optionMetadata;if(o&&"shouldWrite"===o.writeback){var s=i.option;n[s]=i.value,o.readOnly&&(e.readOnlyProperties[s]=!0)}return n}.bind(void 0,t)}]},o={},s=Object.keys(n),r=0;r<s.length;r++){var a=s[r];if(t.componentName.match(a)){for(var l=n[a],u=0;u<l.length;u++){var h=l[u];e.on(h.event+i.ComponentBinding._HANDLER_NAMESPACE,{getter:h.getter},function(n,s){if(n.target===e[0])for(var r=n.data.getter(n,s),a=t.valueAccessor(),l=Object.keys(r),u=0;u<l.length;u++){var h=l[u];t.changeTracker.suspend(h);try{if(t.specifiedOptions.indexOf(h)>=0){var d=a[i.ComponentBinding._OPTION_MAP],c=null==d?null:d[h],p=a[h];i.ComponentBinding._writeValueToProperty(h,p,r[h],c,t.bindingContext,o)}}finally{t.changeTracker.resume(h)}}})}break}}},i.ComponentBinding._writeValueToProperty=function(e,t,n,o,s,r){if(null!=t&&ko.isObservable(t))ko.isWriteableObservable(t)&&t(i.ComponentBinding.__cloneIfArray(n));else{if(!(e in r)){var a=null,l=i.__ExpressionUtils.getPropertyWriterExpression(o);null!=l&&(a=i.ComponentBinding.__CreateEvaluator(l)),r[e]=a}var u=r[e];if(u)u(s)(i.ComponentBinding.__cloneIfArray(n))}},i.ComponentBinding._toJS=function(e){return e=ko.utils.unwrapObservable(e),(Array.isArray(e)||i.CollectionUtils.isPlainObject(e))&&e.ojConvertToJS&&(e=ko.toJS(e)),e},i.ComponentBinding.__cloneIfArray=function(e){return Array.isArray(e)&&(e=e.slice()),e},i.ComponentBinding.__removeDotNotationOptions=function(e){for(var t={},i=Object.keys(e),n=0;n<i.length;n++){var o=i[n];o.indexOf(".")>=0&&(t[o]=e[o],delete e[o])}return t},i.ComponentBinding._deliverCreateDestroyEventToManagedProps=function(e,t,i,n,o,s,r){for(var a=Object.keys(t),l=0;l<a.length;l++){var u=a[l],h=t[u],d=e?h.afterCreate:h.beforeDestroy;d&&d(u,i,n,o,s,r)}},i.ComponentBinding._changeQueue=new G,i.ComponentBinding.__getKnockoutVersion=function(){return i.__isAmdLoaderPresent()&&ko?ko.version:""},i.ComponentBinding._isNameRegistered=function(e){return i.ComponentBinding._REGISTERED_NAMES.indexOf(e)>=0},i.ComponentBinding._REGISTERED_NAMES=[],i.ComponentBinding._COMPONENT_OPTION="component",i.ComponentBinding._OPTION_MAP="_ojOptions",k="cleanExternalData",B=ko.utils.domNodeDisposal,F=B[k],B[k]=function(e){var t=i.DomUtils?i.DomUtils.setInKoCleanExternal:null;t&&t(e);try{F(e)}finally{t&&t(null)}},i.ComponentBinding._INSTANCE=i.ComponentBinding.create(["ojComponent","jqueryUI"]),$.widget("oj._ojDetectCleanData",{options:{cleanParent:!1},_destroy:function(){var e,t;t=(e=ko.utils.domNodeDisposal).cleanExternalData,e.cleanExternalData=function(){};try{this.options.cleanParent&&null!=this.element[0].parentNode?ko.cleanNode(this.element[0].parentNode):ko.cleanNode(this.element[0])}finally{e.cleanExternalData=t}}}),i.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["pieCenter"],init:function(e,t,i,n,o,s,r){return K(e,t,r)},update:function(e,t,i,n,o,s,r){return K(e,t,r)},for:"ojChart"}),i.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["optionTemplate"],init:function(e,t,i,n,o,s,r){var a=W(e,t,r);if(null!==a)return a},update:function(e,t,i,n,o,s,r){return W(e,t,r)},for:"ComboboxOptionRenderer"}),i.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:"ojCombobox",use:"ComboboxOptionRenderer"}),i.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:"ojSelect",use:"ComboboxOptionRenderer"}),i.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:"ojInputSearch",use:"ComboboxOptionRenderer"}),i.Object.createSubclass(Y,i.Object,"ComponentBinding.ComponentChangeTracker"),Y.prototype.Init=function(e,t){Y.superclass.Init.call(this),this._updateCallback=e,this._queue=t,this._changes={},this._suspendCountMap={}},Y.prototype.addChange=function(e,t){this._isSuspended(e)||this._disposed||(this._changes[e]=t,this._queue.registerComponentChanges(this))},Y.prototype.dispose=function(){this._disposed=!0},Y.prototype.resume=function(e){var t=this._suspendCountMap[e]||0;--t<0?i.Logger.error("ComponentChangeTracker suspendCount underflow"):0==t?delete this._suspendCountMap[e]:this._suspendCountMap[e]=t},Y.prototype.suspend=function(e){var t=this._suspendCountMap[e]||0;this._suspendCountMap[e]=t+1},Y.prototype.applyChanges=function(e){this._disposed||this._updateCallback(e)},Y.prototype.flushChanges=function(){var e=this._changes;return this._changes={},e},Y.prototype._isSuspended=function(e){return(this._suspendCountMap[e]||0)>=1},ko.bindingHandlers.ojContextMenu={update:function(e,t,n,o,s){var r,a,l=$(e),u=!1,h=!1,d=null,c=function(e){if(u)return e.preventDefault(),e.stopPropagation(),u=!1,!1},p=function(e){121==e.which&&e.shiftKey&&m().is(":visible")&&e.preventDefault()},_=function(){var e=i.Components.__GetWidgetConstructor(m()[0],"ojMenu"),t=e&&e("instance");if(!t)throw new Error('ojContextMenu binding bound to "'+(b||y)+'", which does not reference a valid JET Menu.');return C||(t.widget().on("ojclose.ojContextMenu",function(e,t){document.removeEventListener("keyup",p)}),C=!0),t},m=function(){return g(y,b)},g=function(e,t){return t?$(document.getElementById(t)):$(e).first()},f=function(e,t,i){u=i;var n=_();if(u&&l.one("touchend.ojContextMenu",function(e){n.__contextMenuPressHoldJustEnded(!0),setTimeout(function(){n.__contextMenuPressHoldJustEnded(!1)},50)}),"touchstart"===d&&"contextmenu"===e.type||"contextmenu"===d&&"touchstart"===e.type)return d=null,void clearTimeout(a);if(!e.isDefaultPrevented()){var o={launcher:l,initialFocus:"menu",position:{mouse:{my:"start top",at:"start bottom",of:e},touch:{my:"start>40 center",at:"start bottom",of:e,collision:"flipfit"},keyboard:{my:"start top",at:"start bottom",of:"launcher"}}[t]};n.__openingContextMenu=!0,n.open(e,o),n.__openingContextMenu=!1,n.widget().is(":visible")&&(e.preventDefault(),document.addEventListener("keyup",p),"touchstart"!==e.type&&"contextmenu"!==e.type||(d=e.type,a=setTimeout(function(){d=null},300)))}};l.off(".ojContextMenu").removeClass("oj-menu-context-menu-launcher")[0].removeEventListener("click",c,!0),clearTimeout(r);var v=l.data("_ojLastContextMenu");v&&g(v.selector,v.id).off(".ojContextMenu");var C=!1,y=ko.utils.unwrapObservable(t()),b=$.isPlainObject(y)?e.getAttribute("contextmenu"):null;l.data("_ojLastContextMenu",{selector:y,id:b}),e.addEventListener("click",c,!0),l.on("touchstart.ojContextMenu mousedown.ojContextMenu keydown.ojContextMenu ",function(e){if("mousedown"!==e.type||!_().__contextMenuPressHoldJustEnded())return u=!1,"touchstart"===e.type&&(h=!0,r=setTimeout(f.bind(void 0,e,"touch",!0),750)),!0}).on("touchend.ojContextMenu touchcancel.ojContextMenu",function(e){return h=!1,clearTimeout(r),!0}).on("keydown.ojContextMenu contextmenu.ojContextMenu",function(e){if("contextmenu"===e.type||121==e.which&&e.shiftKey){var t=h?"touch":"keydown"===e.type?"keyboard":"mouse";f(e,t,!1)}return!0}).addClass(i.DomUtils.isTouchSupported()?"oj-menu-context-menu-launcher":"")}},i.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["header","cell"],init:function(e,t,i,n,o,s,r){var a,l,u,h,d,c,p,_,m;return"header"===e?(null!=(a=t.row)&&null!=(l=a.template)&&(a.renderer=q(r,l)),null!=(u=t.column)&&null!=(h=u.template)&&(u.renderer=q(r,h)),null!=(c=t.rowEnd)&&null!=(p=c.template)&&(c.renderer=q(r,p)),null!=(_=t.columnEnd)&&null!=(m=_.template)&&(_.renderer=q(r,m)),{header:t}):"cell"===e?(null!=(d=t.template)&&(t.renderer=X(r,d)),{cell:t}):void 0},update:function(e,t,i,n,o,s,r){var a,l,u,h,d,c,p,_,m;return"header"===e?(null!=(a=t.row)&&null!=(l=a.template)&&(a.renderer=q(r,l)),null!=(u=t.column)&&null!=(h=u.template)&&(u.renderer=q(r,h)),null!=(c=t.rowEnd)&&null!=(p=c.template)&&(c.renderer=q(r,p)),null!=(_=t.columnEnd)&&null!=(m=_.template)&&(_.renderer=q(r,m)),{header:t}):"cell"===e?(null!=(d=t.template)&&(t.renderer=X(r,d)),{cell:t}):null},for:"ojDataGrid"}),i.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["template"],init:function(e,t,i,n,o,s,r){return J(e,t,r)},update:function(e,t,i,n,o,s,r){return J(e,t,r)},for:"ojDiagram"}),function(){i.__ExpressionUtils={},i.__ExpressionUtils.getPropertyWriterExpression=function(t){if(null==t||["true","false","null","undefined"].indexOf(t)>=0)return null;var i=(t=t.trim()).match(e);return null===i?null:"function(v){"+(i[1]?"Object("+i[1]+")"+i[2]:t)+"=v;}"};var e=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i}(),i.__KO_CUSTOM_BINDING_PROVIDER_INSTANCE.addPostprocessor({getBindingAccessors:function(e,t,n,o){if(null==n)return null;var s=function(e){for(var t=Object.keys(e),n=-0;n<t.length;n++){var o=t[n];if(i.ComponentBinding._isNameRegistered(o))return o}return null}(n);null!=s&&(n=function(e,t,n,o,s){var r=function(e,t,i,n){var o=null,s=function(e,t,i){var n=t.getBindingsString;if(n)return n.call(t,e,i);switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:var o=e.nodeValue.match(/^\s*ko(?:\s+([\s\S]+))?\s*$/);return o?o[1]:null}return null}(e,i,n),r=ko.jsonExpressionRewriting.parseObjectLiteral(s),a=null;Q(r,function(e,i){return e===t&&(a=i,!0)}),null!=a&&0===a.indexOf("{")&&(o=ko.jsonExpressionRewriting.parseObjectLiteral(a));return{attrList:o,bindingExpr:a}}(e,t,n,o),a=r.attrList;if(null==a)return s;var l={};return Q(a,function(e,t){l[e]=t}),(s=i.CollectionUtils.copyInto({},s))[t]=function(e,t,n){var o=function(){var n={};return Object.keys(t).forEach(function(o){var s=t[o],r=i.ComponentBinding.__CreateEvaluator(s).bind(null,e);Object.defineProperty(n,o,{get:r,enumerable:!0})}),Object.defineProperty(n,i.ComponentBinding._OPTION_MAP,{value:t}),n};return o.toString=function(){return n},o}(o,l,r.bindingExpr),s}(e,s,o,t,n));return n}}),i.__KO_CUSTOM_BINDING_PROVIDER_INSTANCE.addPostprocessor({nodeHasBindings:function(e,t){return i.BaseCustomElementBridge?t||1===e.nodeType&&i.BaseCustomElementBridge.getRegistered(e.nodeName):t},getBindingAccessors:function(e,t,n){if(1===e.nodeType&&i.BaseCustomElementBridge){var o=e.nodeName,s=i.BaseCustomElementBridge.getRegistered(o);s&&((n=n||{})._ojCustomElement=function(){return{composite:s.composite}})}return n}}),function(){ko.bindingHandlers._ojCustomElement={after:["attr"],init:function(e,t,i,n,o){return ko.applyBindingsToDescendants(o,e),{controlsDescendantBindings:!0}},update:function(t,n,o,s,r){var a,l,u=i.BaseCustomElementBridge.getInstance(t);function h(){a&&(a.teardown(),a=null),l&&(t.removeEventListener(e,l),l=null)}ko.ignoreDependencies(function(){ko.computed(function(){var o=n().composite;ko.computedContext.isInitial()||h(),0,function(n){var o=i.BaseCustomElementBridge.getProperties(u,t);a=new i.__ExpressionPropertyUpdater(t,r,n);var s={_domListener:!0};u.__INITIALIZING_PROPS=!0;for(var h=t.attributes,d=0;d<h.length;d++){var c=h[d],p=i.__AttributeUtils.attributeToPropertyName(c.nodeName),_=i.__AttributeUtils.eventListenerPropertyToEventType(p)&&!o[p];a.setupExpression(c.value,p,_?s:o[p.split(".")[0]])}u.__INITIALIZING_PROPS=!1,l=function(e){var t=e.detail,n=t.attribute,r=i.__AttributeUtils.attributeToPropertyName(n),l=i.__AttributeUtils.eventListenerPropertyToEventType(r)&&!o[r]?s:o[r.split(".")[0]];a.setupExpression(t.value,r,l)},t.addEventListener(e,l)}(o),u.PlaybackEarlyPropertySets(t),i._KnockoutBindingProvider.getInstance().__NotifyBindingsApplied(t)},null,{disposeWhenNodeIsRemoved:t})}),ko.utils.domNodeDisposal.addDisposeCallback(t,h)}};var e="attribute-changed"}(),i.__ExpressionPropertyUpdater=function(e,t,n){function o(e){return e.$current||e.$data}function s(t,i,n){var s=u[i];s||(s=function(e){var t,i=o(e),n=function(n){t&&t(n,i,e)};return n.setListener=function(e){t=e},n}(t),u[i]=s,e.addEventListener(i,s)),(null==n||n instanceof Function)&&s.setListener(n)}function r(e){var t=c[e]||0;t++,c[e]=t}function a(e){var t=c[e];t?(t--,c[e]=0===t?null:t):i.Logger.error("Property count undefrlow")}this.setupExpression=function(n,u,_){if(_&&function(e,t){var i=e.split("."),n=t;i.shift();for(var o=0;o<i.length&&(n=n.properties);o++)n=n[i[o]];return n}(u,_)){var m=i.__AttributeUtils.getExpressionInfo(n),g=h[u];g&&(g.dispose(),h[u]=null);var f=d[u];if(f&&(e.removeEventListener(u+p,f),d[u]=null),_._domListener){var v=i.__AttributeUtils.eventListenerPropertyToEventType(u);s(t,v,null)}var C=_.readOnly,y=m.expr;if(y){var b=i.ComponentBinding.__CreateEvaluator(y);if(!C){var S=!0;ko.ignoreDependencies(function(){h[u]=ko.computed(function(){var n=b(t),h=ko.utils.unwrapObservable(n);if(_._domListener){var d=i.__AttributeUtils.eventListenerPropertyToEventType(u);s(t,d,h)}else Array.isArray(h)&&(h=h.slice()),_._eventListener&&h&&h instanceof Function&&(h=function(e,t){var i=o(e);return function(n){t(n,i,e)}}(t,h)),!S&&l?l.addChange(u,h):function(t,i){r(t);try{e.setProperty(t,i)}finally{a(t)}}(u,h)})}),S=!1}return _.writeback&&!m.downstreamOnly&&(d[u]=function(n,o,s){var r=function(e){if(!function(e){return c[e]}(n)){var r,a=!1;ko.ignoreDependencies(function(){var n=e.detail.value,l=s(t);if(ko.isObservable(l))ko.isWriteableObservable(l)?(l(i.ComponentBinding.__cloneIfArray(n)),a=!0):r="the observable is not writeable";else{var u=i.__ExpressionUtils.getPropertyWriterExpression(o);if(null!=u){var h=i.ComponentBinding.__CreateEvaluator(u);h(t)(i.ComponentBinding.__cloneIfArray(n)),a=!0}else r="the expression is not a valid update target"}}),a||r&&i.Logger.info("The expression '%s' for property '%s' was not updated because %s.",o,n,r)}};return e.addEventListener(n+p,r),r}(u,y,b)),!0}return!1}},this.teardown=function(){for(var t=Object.keys(h),i=0;i<t.length;i++){var n=h[t[i]];n&&n.dispose()}for(h={},t=Object.keys(d),i=0;i<t.length;i++){var o=t[i];e.removeEventListener(o+p,d[o])}for(d={},t=Object.keys(u),i=0;i<t.length;i++){var s=t[i];e.removeEventListener(s,u[s])}u={},l&&l.dispose()};var l=n?null:new Y(function(t){for(var i=Object.keys(t),n=0;n<i.length;n++)r(i[n]);try{e.setProperties(t)}finally{for(var o=0;o<i.length;o++)a(i[o])}},i.ComponentBinding._changeQueue),u={},h={},d={},c={},p="Changed"},function(){function e(e,i,o,s){var r=n(e.getAttribute(o),s);if(r)return t(e,i,"ko "+i+":"+r)}function t(e,t,i){for(var n=e.tagName.toLowerCase(),o=n,s=e.attributes,r=0;r<s.length;r++){var a=s[r];o+=" ",o+=a.name,o+="='",o+=a.value,o+="'"}var l=e.parentNode,u=document.createComment(o),h=document.createComment("/"+n);l.insertBefore(u,e);var d=document.createComment(i),c=document.createComment("/ko");l.insertBefore(d,e);var p=[u,d];if("if"===t)for(;e.childNodes.length>0;){var _=e.childNodes[0];l.insertBefore(_,e),p.push(_)}else if("_ojBindForEach_"===t){for(;e.childNodes.length>0;){_=e.childNodes[0];if(l.insertBefore(_,e),p.push(_),1===_.nodeType&&"template"===_.nodeName.toLowerCase()){if(d._templateNode)throw new Error("Multiple templates found: oj-bind-for-each requires a single template element as its direct child");Object.defineProperty(d,"_templateNode",{value:_,enumerable:!1})}}if(!d._templateNode)throw new Error("Template not found: oj-bind-for-each requires a single template element as its direct child")}return l.insertBefore(c,e),p.push(c),l.replaceChild(h,e),p.push(h),p}function n(e,t){if(null!=e){var n=i.__AttributeUtils.getExpressionInfo(e).expr;return null==n&&(n=t?"'"+e+"'":e),n}return null}function o(e,t,n,o,s){var r,a,l,u=i.__AttributeUtils.getExpressionInfo(o).expr;if(null==u)a=i.__AttributeUtils.coerceValue(n,"class",o,"any"),l=Array.isArray(a),r=function(){return l?a.join(" "):a};else{var h=(r=i.ComponentBinding.__CreateEvaluator(u).bind(null,s))();"function"==typeof h?(a=h(),(l=Array.isArray(a))&&(r=ko.pureComputed(function(){return h().join(" ")}))):a=h}"string"==typeof a||l?t.class=r:e.css=r}function s(e,t,n,o,s){var r=i.__AttributeUtils.getExpressionInfo(n).expr;return null==r?function(){return"object"===s?i.__AttributeUtils.coerceValue(e,t,n,s):n}:i.ComponentBinding.__CreateEvaluator(r).bind(null,o)}function r(e){return function(){for(var t={},i=Object.keys(e),n=0;n<i.length;n++){var o=i[n];t[o]=e[o]()}return t}}function a(e){if(1!==e.nodeType)return{};if(!e[h]){for(var t=!!i.BaseCustomElementBridge&&!!i.BaseCustomElementBridge.getRegistered(e.nodeName),n={},o=[],s=[],r=[],a=e.attributes,u=0;u<a.length;u++){var d=a[u],c=l(d.name);c&&("style"===c?n._STYLE_BIND=c:"style."===c.substring(0,6)?s.push(c):o.push(c)),t||"on-"!==d.name.substring(0,3)||r.push(d)}if(s.length){if(n._STYLE_BIND)throw new Error("Cannot have both style and style.* data bound attributes on "+e.tagName+" with id "+e.id);n._STYLE_BIND=s}o.length&&(n._ATTR_BIND=o),r.length&&(n._EVENT_BIND=r),Object.defineProperty(e,h,{value:n})}return e[h]}function l(e){return e&&":"===e.charAt(0)?e.slice(1):null}function u(e){return":"+e}i.__KO_CUSTOM_BINDING_PROVIDER_INSTANCE.addPostprocessor({preprocessNode:function(o,s){var r;if(1===o.nodeType){var a=o.nodeName.toLowerCase();"oj-bind-text"===a?r=e(o,"text","value",!0):"oj-bind-if"===a?r=e(o,"if","test",!1):"oj-bind-for-each"===a&&(r=function(e){var o=e.getAttribute("data"),s=i.__AttributeUtils.getExpressionInfo(o).expr;if(!s)try{var r=JSON.parse(o);if(!Array.isArray(r))throw new Error("got value "+o);s=o}catch(e){throw new Error("The value on the oj-bind-for-each data attribute should be either a JSON array or an expression : "+e)}var a=n(e.getAttribute("as"),!0);if(!s)return;var l="ko _ojBindForEach_:{data:"+s;return t(e,"_ojBindForEach_",l+=a?",as:"+a+"}":"}")}(o))}return r||s},nodeHasBindings:function(e,t){var i=a(e);return t||null!=i._ATTR_BIND||null!=i._STYLE_BIND||null!=i._EVENT_BIND},getBindingAccessors:function(e,t,n){if(1===e.nodeType){n=n||{};var l=a(e),h=l._STYLE_BIND;if(h){if(n.style)throw new Error("Cannot have both style data-bind and JET style binding on "+e.tagName+" with id "+e.id);if("style"===h)n[h]=s(e,h,e.getAttribute(u(h)),t,"object");else{for(var d={},c=0;c<h.length;c++){var p=h[c];d[i.__AttributeUtils.attributeToPropertyName(p.substring(6))]=s(e,p,e.getAttribute(u(p)),t,"string")}n.style=r(d)}}var _=l._ATTR_BIND;if(_){if(n.attr)throw new Error("Cannot have both attr data-bind and JET attribute binding on "+e.tagName+" with id "+e.id);var m={};for(c=0;c<_.length;c++){"class"===(p=_[c])?o(n,m,e,e.getAttribute(u(p)),t):m[p]=s(e,p,e.getAttribute(u(p)),t,"string")}n.attr=r(m)}var g=l._EVENT_BIND;if(g){var f=new i.__ExpressionPropertyUpdater(e,t,!0);for(c=0;c<g.length;c++){var v=g[c],C=i.__AttributeUtils.attributeToPropertyName(v.nodeName);f.setupExpression(v.value,C,{_domListener:!0})}ko.utils.domNodeDisposal.addDisposeCallback(e,function(){f&&(f.teardown(),f=null)})}}return n}});var h="_ojbindingsobj"}(),i._KnockoutBindingProvider=function(){this.__NotifyBindingsApplied=function(e){e.resolveBP(this)}},i._KnockoutBindingProvider.getInstance=function(){return i._KnockoutBindingProvider._instance},i._KnockoutBindingProvider._instance=new i._KnockoutBindingProvider,i.KnockoutTemplateUtils={},i.KnockoutTemplateUtils.getRenderer=function(e,t){var i=function(i){var n=i._parentElement||i.parentElement,o=ko.contextFor(i.componentElement).createChildContext(i.data,null,function(e){e.$context=i});return ko.renderTemplate(e,o,{afterRender:function(e){$(e)._ojDetectCleanData()}},n,t?"replaceNode":"replaceChildren"),null};return function(t){if(t.componentElement.classList&&t.componentElement.classList.contains("oj-dvtbase")){var n=document.createElement("div");n.style.display="none",n._dvtcontext=t._dvtcontext,t.componentElement.appendChild(n),Object.defineProperty(t,"_parentElement",{value:n,enumerable:!1}),Object.defineProperty(t,"_templateCleanup",{value:function(){$(n).remove()},enumerable:!1}),Object.defineProperty(t,"_templateName",{value:e,enumerable:!1}),i(t);var o=n.children[0];return o?("http://www.w3.org/2000/svg"===o.namespaceURI&&(n.removeChild(o),$(n).remove()),{insert:o}):{preventDefault:!0}}return i(t)}},i.ResponsiveKnockoutUtils={},i.ResponsiveKnockoutUtils.createMediaQueryObservable=function(e){if(null==e)throw new Error("oj.ResponsiveKnockoutUtils.createMediaQueryObservable: aborting, queryString is null");var t=window.matchMedia(e),i=ko.observable(t.matches);return t.addListener(function(e){i(e.matches)}),-1!=navigator.userAgent.indexOf("WebKit")&&-1==navigator.userAgent.indexOf("Chrome")&&$(window).resize(function(){var e="oj-webkit-bug-123293";0===$("body").has("."+e).length&&$("body").append('<div aria-hidden="true" class="oj-helper-hidden-accessible '+e+'">'),$("."+e).text((new Date).getMilliseconds().toString())}),i},i.ResponsiveKnockoutUtils.createScreenRangeObservable=function(){var e=i.ResponsiveUtils.getFrameworkQuery(i.ResponsiveUtils.FRAMEWORK_QUERY_KEY.XXL_UP),t=i.ResponsiveUtils.getFrameworkQuery(i.ResponsiveUtils.FRAMEWORK_QUERY_KEY.XL_UP),n=i.ResponsiveUtils.getFrameworkQuery(i.ResponsiveUtils.FRAMEWORK_QUERY_KEY.LG_UP),o=i.ResponsiveUtils.getFrameworkQuery(i.ResponsiveUtils.FRAMEWORK_QUERY_KEY.MD_UP),s=i.ResponsiveUtils.getFrameworkQuery(i.ResponsiveUtils.FRAMEWORK_QUERY_KEY.SM_UP),r=null==e?null:i.ResponsiveKnockoutUtils.createMediaQueryObservable(e),a=null==t?null:i.ResponsiveKnockoutUtils.createMediaQueryObservable(t),l=null==n?null:i.ResponsiveKnockoutUtils.createMediaQueryObservable(n),u=null==o?null:i.ResponsiveKnockoutUtils.createMediaQueryObservable(o),h=null==s?null:i.ResponsiveKnockoutUtils.createMediaQueryObservable(s);return ko.computed(function(){if(r&&r())return i.ResponsiveUtils.SCREEN_RANGE.XXL;if(a&&a())return i.ResponsiveUtils.SCREEN_RANGE.XL;if(l&&l())return i.ResponsiveUtils.SCREEN_RANGE.LG;if(u&&u())return i.ResponsiveUtils.SCREEN_RANGE.MD;if(h&&h())return i.ResponsiveUtils.SCREEN_RANGE.SM;throw new Error(" NO MATCH in oj.ResponsiveKnockoutUtils.createScreenRangeObservable")})},i.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["tooltip"],init:function(e,t,i,n,o,s,r){return ie(e,t,r)},update:function(e,t,i,n,o,s,r){return ie(e,t,r)},for:"tooltipOptionRenderer"}),function(){for(var e=["ojChart","ojDiagram","ojNBox","ojPictoChart","ojSunburst","ojTagCloud","ojThematicMap","ojTreemap","ojDialGauge","ojLedGauge","ojRatingGauge","ojSparkChart","ojStatusMeterGauge","ojGantt"],t=0;t<e.length;t++)i.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:e[t],use:"tooltipOptionRenderer"})}(),function(){document&&document.createComment("test").text;var e=document&&"function"==typeof document.createDocumentFragment;function t(e,t,i){return{status:"added",value:e,index:t,key:i}}function n(e){return{status:"deleted",value:{},index:e}}var o="_ko_ffe_pending_delete_index";function s(e,i,n){if(this.element=i.element||e,this.$context=n,this.data=i.data,this.as=i.as,this.templateAlias=this.element._templateNode?this.element._templateNode.getAttribute("data-oj-as"):null,this.templateNode=function(e){var t,i=document.createElement("div");if(e._templateNode&&e._templateNode.content)t=e._templateNode.content;else if(e._templateNode)t=e._templateNode;else{var n=e.parentNode.getElementsByTagName("SCRIPT");t=n&&n.length>0?ko.utils.parseHtmlFragment(n[0].text):e}var o=Array.isArray(t)?t:ko.virtualElements.childNodes(t);return ko.utils.arrayForEach(o,function(e){e&&i.insertBefore(e.cloneNode(!0),null)}),i}(this.element),this.changeQueue=[],this.firstLastNodesList=[],this.indexesToDelete=[],this.rendering_queued=!1,this.pendingDeletes=[],ko.virtualElements.emptyNode(this.element),this.data.fetchFirst)this.fetchData();else{var o=ko.unwrap(this.data);this.onArrayChange(function(e,t){var i;if(e){var n=e.length;i=new Array(n);for(var o=0;o<n;o++)i[o]=t(e[o],o,e)}return i}(o,t))}this.addSubscriptions()}s.PENDING_DELETE_INDEX_KEY=o,s.prototype.addSubscriptions=function(){ko.isObservable(this.data)?(this.data.indexOf||(this.data=this.data.extend({trackArrayChanges:!0})),this.changeSubs=this.data.subscribe(this.onArrayChange,this,"arrayChange")):this.data.fetchFirst&&(this.dataMutateHandler=this.handleDataMutateEvent.bind(this),this.dataRefreshHandler=this.handleDataRefreshEvent.bind(this),this.data.addEventListener("mutate",this.dataMutateHandler),this.data.addEventListener("refresh",this.dataRefreshHandler))},s.prototype.removeSubscriptions=function(){this.changeSubs?this.changeSubs.dispose():this.data.removeEventListener&&(this.data.removeEventListener("mutate",this.dataMutateHandler),this.data.removeEventListener("refresh",this.dataRefreshHandler))},s.prototype.registerBusyState=function(){var e=this.element.parentNode;return i.Context.getContext(e).getBusyContext().addBusyState({description:"oj-bind-for-each binding on a node with the Id "+e.id+"is loading data."})},s.prototype.fetchData=function(){var e=this.registerBusyState(),i=this.data.fetchFirst({size:-1})[Symbol.asyncIterator](),n=function(o,s,r){return function(a){for(var l=a.value,u=o.length,h=0;h<l.metadata.length&&h<l.data.length;h++)o.push(t(l.data[h],u++,l.metadata[h].key));if(a.done)s.call(r,o),e();else{var d=n(o,s,r);i.next().then(d,function(){e()})}}},o=n([],this.onArrayChange,this);i.next().then(o,function(){e()})},s.prototype.getIndexesForEvent=function(e,t){var n=[];if(Array.isArray(e))for(var o=0;o<e.length;o++)n.push(e[o]);else if(t){var s=new i.KeySetImpl(t),r=new Map,a=0;for(o=0;o<this.firstLastNodesList.length&&a<t.size;o++){var l=this.firstLastNodesList[o].key,u=s.get(l);null!=u&&(r.set(u,o),a++)}t.forEach(function(e){n.push(r.get(e))})}return n},s.prototype.handleDataMutateEvent=function(e){var i=e.detail.add,o=e.detail.remove,s=e.detail.update,r=[];if(i){var a=i.data,l=i.keys,u=this.getIndexesForEvent(i.indexes,i.afterKeys),h=function(e){var t=u.length>e?u[e]:this.firstLastNodesList.length+e;return void 0===t?this.firstLastNodesList.length:t};if(Array.isArray(a)){var d=0;l.forEach(function(e){r.push(t(a[d],h(d),e)),d++},this)}else{var c=this,p=this.registerBusyState();this.data.fetchByKeys({keys:l}).then(function(e){if(e.results.size>0){var i=0;l.forEach(function(n){var o=e.results.get(n).data;r.push(t(o,h(i),n)),i++}),c.onArrayChange(r)}p()},function(){p()})}}else if(o){u=(u=this.getIndexesForEvent(o.indexes,o.keys)).filter(function(e){return void 0!==e}),r=u.map(n)}else if(s){l=s.keys,u=this.getIndexesForEvent(s.indexes,l);if(Array.isArray(s.data)){d=0;l.forEach(function(e){void 0!==u[d]&&(r.push(n(u[d])),r.push(t(s.data[d],u[d],e))),d++})}else{c=this,p=this.registerBusyState();this.data.fetchByKeys({keys:l}).then(function(e){var i=0;e.results.size>0&&(l.forEach(function(o){if(void 0!==u[i]){var s=e.results.get(o).data;r.push(n(u[i])),r.push(t(s,u[i],o))}i++}),c.onArrayChange(r)),p()},function(){p()})}}r.length>0&&this.onArrayChange(r)},s.prototype.handleDataRefreshEvent=function(e){this.changeQueue=[],this.firstLastNodesList=[],this.indexesToDelete=[],this.rendering_queued=!1,this.pendingDeletes=[],ko.virtualElements.emptyNode(this.element),this.fetchData()},s.prototype.onArrayChange=function(e){for(var t={added:[],deleted:[]},i=0,n=e.length;i<n;i++){if(t.added.length&&"added"==e[i].status){var o=t.added[t.added.length-1];if((o.isBatch?o.index+o.values.length-1:o.index)+1==e[i].index){o.isBatch||(o={isBatch:!0,status:"added",index:o.index,values:[o.value],keys:[o.key]},t.added.splice(t.added.length-1,1,o)),o.values.push(e[i].value),o.keys.push(e[i].key);continue}}t[e[i].status].push(e[i])}t.deleted.length>0&&(this.changeQueue.push.apply(this.changeQueue,t.deleted),this.changeQueue.push({status:"clearDeletedIndexes"})),this.changeQueue.push.apply(this.changeQueue,t.added),this.changeQueue.length>0&&!this.rendering_queued&&(this.rendering_queued=!0,this.processQueue())},s.prototype.processQueue=function(){var e=this,t=9007199254740991;ko.utils.arrayForEach(this.changeQueue,function(i){"number"==typeof i.index&&(t=Math.min(t,i.index)),e[i.status](i)}),this.flushPendingDeletes(),this.rendering_queued=!1,this.updateIndexes(t),this.changeQueue=[]},s.prototype.added=function(e){for(var t=e.index,i=e.isBatch?e.values:[e.value],n=e.isBatch?e.keys:[e.key],o=this.getLastNodeBeforeIndex(t),s=[],r=0,a=i.length;r<a;++r){var l,u,h=this.getPendingDeleteFor(i[r]);if(h&&h.nodesets.length)l=h.nodesets.pop(),u=h.childContext;else{var d=this.templateNode.cloneNode(!0),c={data:i[r],index:t+r,observableIndex:ko.observable()};u=this.$context.extend({$root:void 0,$parent:void 0,$parents:void 0,$current:c}),this.as&&(u[this.as]=c),this.templateAlias&&(u[this.templateAlias]=c),ko.applyBindingsToDescendants(u,d),l=ko.virtualElements.childNodes(d)}s.push.apply(s,Array.prototype.slice.call(l)),this.firstLastNodesList.splice(t+r,0,{first:l[0],last:l[l.length-1],key:n?n[r]:null,childContext:u})}this.insertAllAfter(s,o)},s.prototype.getNodesForIndex=function(e){var t=[],i=this.firstLastNodesList[e].first,n=this.firstLastNodesList[e].last;for(t.push(i);i&&i!==n;)i=i.nextSibling,t.push(i);return t},s.prototype.getLastNodeBeforeIndex=function(e){return e<1||e-1>=this.firstLastNodesList.length?null:this.firstLastNodesList[e-1].last},s.prototype.insertAllAfter=function(t,i){var n,o,s,r=this.element;if(1===t.length)ko.virtualElements.insertAfter(r,t[0],i);else if(e){for(n=document.createDocumentFragment(),s=0,o=t.length;s!==o;++s)n.appendChild(t[s]);ko.virtualElements.insertAfter(r,n,i)}else for(s=t.length-1;s>=0;--s){var a=t[s];if(!a)break;ko.virtualElements.insertAfter(r,a,i)}return t},s.prototype.shouldDelayDeletion=function(e){return e&&("object"==typeof e||"function"==typeof e)},s.prototype.getPendingDeleteFor=function(e){var t=e&&e[o];return void 0===t?null:this.pendingDeletes[t]},s.prototype.getOrCreatePendingDeleteFor=function(e){var t=this.getPendingDeleteFor(e);return t||(t={data:e,nodesets:[]},e[o]=this.pendingDeletes.length,this.pendingDeletes.push(t),t)},s.prototype.deleted=function(e){if(this.shouldDelayDeletion(e.value)){var t=this.getOrCreatePendingDeleteFor(e.value);t.nodesets.push(this.getNodesForIndex(e.index)),t.childContext=this.firstLastNodesList[e.index].childContext}else this.removeNodes(this.getNodesForIndex(e.index));this.indexesToDelete.push(e.index)},s.prototype.removeNodes=function(e){if(e.length){!function(){for(var t=e[0].parentNode,i=e.length-1;i>=0;--i)ko.cleanNode(e[i]),t.removeChild(e[i])}()}},s.prototype.flushPendingDeletes=function(){for(var e=0,t=this.pendingDeletes.length;e!=t;++e){for(var i=this.pendingDeletes[e];i.nodesets.length;)this.removeNodes(i.nodesets.pop());i.data&&void 0!==i.data[o]&&delete i.data[o]}this.pendingDeletes=[]},s.prototype.clearDeletedIndexes=function(){for(var e=this.indexesToDelete.length-1;e>=0;--e)this.firstLastNodesList.splice(this.indexesToDelete[e],1);this.indexesToDelete=[]},s.prototype.updateIndexes=function(e){for(var t,i=e,n=this.firstLastNodesList.length;i<n;++i)(t=this.firstLastNodesList[i].childContext)&&t.$current&&t.$current.observableIndex(i)},s.prototype.getData=function(){return this.data},s.prototype.setData=function(e){this.removeSubscriptions(),this.data=e,this.addSubscriptions()},ko.bindingHandlers._ojBindForEach_={init:function(e,t,i,n,o){var r,a;return ko.computed(function(){if(a=t(),r){var e,i,n=a.data,o=r.getData();ko.ignoreDependencies(function(){e=ko.unwrap(o),i=ko.unwrap(n)});var s=ko.utils.compareArrays(e,i,{sparse:!0,dontLimitMoves:!0});r.setData(n),r.onArrayChange(s)}}),r=new s(e,a,o),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){r.removeSubscriptions()}),{controlsDescendantBindings:!0}}},ko.virtualElements.allowedBindings._ojBindForEach_=!0}(),i.koStringTemplateEngine={},i.koStringTemplateEngine.install=function(){if(!ko.templates){var e={},t={},i=new ko.nativeTemplateEngine;i.makeTemplateSource=function(i,n){if("string"==typeof i){var o=(n=n||document).getElementById(i);return o?new ko.templateSources.domElement(o):new function(i){this._templateName=i,this.text=function(t){if(!t)return e[this._templateName];e[this._templateName]=t},this.data=function(e,i){if(t[this._templateName]||(t[this._templateName]={}),1===arguments.length)return t[this._templateName][e];t[this._templateName][e]=i}}(i)}if(i&&1==i.nodeType||8==i.nodeType)return new ko.templateSources.anonymousTemplate(i)},ko.templates=e,ko.setTemplateEngine(i)}},i.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["item"],init:function(e,t,i,n,o,s,r){var a=ne(e,t,r);if(null!=a)return a},update:function(e,t,i,n,o,s,r){return ne(e,t,r)},for:"ojListViewRenderer"}),i.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:"ojListView",use:"ojListViewRenderer"}),i.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:"ojNavigationList",use:"ojListViewRenderer"}),i.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["center"],init:function(e,t,i,n,o,s,r){return oe(e,t,r)},update:function(e,t,i,n,o,s,r){return oe(e,t,r)},for:"ojStatusMeterGauge"}),i.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["rootNodeContent"],init:function(e,t,i,n,o,s,r){return se(e,t,r)},update:function(e,t,i,n,o,s,r){return se(e,t,r)},for:"ojSunburst"});function re(e,t,i){var n={};return function(t,i){n=function(n){var o=null,s=null;if("header"==i)o=e.createChildContext(null,null,function(e){e.$columnIndex=n.columnIndex,e.$headerContext=n.headerContext,e.$data=n.data}),s=n.headerContext.parentElement;else if("cell"==i){var r=n.row;o=e.createChildContext(r,null,function(e){e.$columnIndex=n.columnIndex,e.$cellContext=n.cellContext}),s=n.cellContext.parentElement}"footer"==i&&(o=e.createChildContext(null,null,function(e){e.$columnIndex=n.columnIndex,e.$footerContext=n.footerContext}),s=n.footerContext.parentElement),ko.renderTemplate(t,o,{afterRender:function(e){$(e)._ojDetectCleanData()}},s,"replaceNode")}}(i,t),n}function ae(e,t){return function(i){var n=i.row,o=e.createChildContext(n,null,function(e){e.$rowContext=i.rowContext});ko.renderTemplate(t,o,{afterRender:function(e){$(e)._ojDetectCleanData()}},i.rowContext.parentElement,"replaceNode")}}function le(e,t,i){if("areaLayers"===e){for(var n=0;n<t.length;n++){var o=t[n].areaDataLayer;if(o)null!=(s=o.template)&&(o._templateRenderer=te(i,s))}return{areaLayers:t}}if("pointDataLayers"===e){for(n=0;n<t.length;n++){var s;null!=(s=t[n].template)&&(t[n]._templateRenderer=te(i,s))}return{pointDataLayers:t}}return null}function ue(e,t,i){return"nodeContent"===e&&t.template&&(t._renderer=ee(i,t.template)),{nodeContent:t}}i.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["columns","columnsDefault","rowTemplate"],init:function(e,t,i,n,o,s,r){if("columns"==e||"columnsDefault"==e){var a,l,u,h;for(a=0;a<t.length;a++){var d=t[a];l=d.template,u=d.footerTemplate,h=d.headerTemplate,null!=l&&(d.renderer=re(r,"cell",l)),null!=u&&(d.footerRenderer=re(r,"footer",u)),null!=h&&(d.headerRenderer=re(r,"header",h))}return"columns"==e?{columns:t}:{columnsDefault:t}}if("rowTemplate"==e)return{rowRenderer:ae(r,t)}},update:function(e,t,i,n,o,s,r){if("columns"==e||"columnsDefault"==e){var a,l,u,h;for(a=0;a<t.length;a++){var d=t[a];l=d.template,u=d.footerTemplate,h=d.headerTemplate,null!=l&&(d.renderer=re(r,"cell",l)),null!=u&&(d.footerRenderer=re(r,"footer",u)),null!=h&&(d.headerRenderer=re(r,"header",h))}n("columns"==e?{columns:t}:{columnsDefault:t})}else if("rowTemplate"==e)return{rowRenderer:ae(r,t)};return null},for:"ojTable"}),i.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["areaLayers","pointDataLayers"],init:function(e,t,i,n,o,s,r){return le(e,t,r)},update:function(e,t,i,n,o,s,r){return le(e,t,r)},for:"ojThematicMap"}),i.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["nodeContent"],init:function(e,t,i,n,o,s,r){return ue(e,t,r)},update:function(e,t,i,n,o,s,r){return ue(e,t,r)},for:"ojTreemap"}),i.InvalidComponentTracker=function(){this.Init()},i.Object.createSubclass(i.InvalidComponentTracker,i.Object,"oj.InvalidComponentTracker"),i.InvalidComponentTracker._OPTION_MESSAGES_SHOWN="messagesShown",i.InvalidComponentTracker._OPTION_MESSAGES_HIDDEN="messagesHidden",i.InvalidComponentTracker._OPTION_DISABLED="disabled",i.InvalidComponentTracker._OPTION_READONLY="readOnly",i.InvalidComponentTracker.prototype.Init=function(){i.InvalidComponentTracker.superclass.Init.call(this),this._tracked=[],this._invalid=[],this._invalidHidden=[],this.invalidShown=!1,this.invalidHidden=!1},i.InvalidComponentTracker.prototype.focusOnFirstInvalid=function(){var e,t,n=null,o=this,s=this._updateCounter;return e=i.Context.getPageContext().getBusyContext(),t=e.addBusyState({description:"Setting Focus to first invalid component."}),this.invalidShown&&(n=this._getFirstInvalidComponent()),setTimeout(function(){(n=s===o._updateCounter&&n||o._getFirstInvalidComponent())&&n("instance").GetFocusElement().focus(),t()},1),!!n},i.InvalidComponentTracker.prototype.showMessages=function(){var e,t,i;if(this.invalidHidden)for(t=this._invalidHidden.length,e=0;e<t;e++)this._invalidHidden[e]&&(i=this._tracked[e].component.call(i,"showMessages"))},i.InvalidComponentTracker.prototype._getFirstInvalidComponent=function(){var e=0,t=[],i=this._invalid.length;for(e=0;e<i;e++)this._invalid[e]&&t.push(this._tracked[e]);return 0===t.length?null:(t.sort(function(e,t){var i=e.element,n=t.element;return i.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1}),t[0].component)},i.InvalidComponentTracker.prototype._remove=function(e){var t=-1,i=!1;return $.each(this._tracked,function(i,n){t<0&&n.component===e&&(t=i)}),t>=0&&(this._tracked.splice(t,1),this._invalid.splice(t,1),this._invalidHidden.splice(t,1),this._updateInvalidProperties(),i=!0),i},i.InvalidComponentTracker.prototype._update=function(e,t,n,o){var s,r,a,l=e.call(e,"isValid"),u=!0,h=-1;switch($.each(this._tracked,function(t,i){h<0&&i.component===e&&(h=t)}),n){case i.InvalidComponentTracker._OPTION_MESSAGES_SHOWN:case i.InvalidComponentTracker._OPTION_MESSAGES_HIDDEN:a=!1,o&&(h<0&&(h=this._tracked.push({component:e,element:t})-1,this._initializeInvalidTrackers(h,a)),l||i.InvalidComponentTracker._hasInvalidMessages(o)&&(a=!0,n===i.InvalidComponentTracker._OPTION_MESSAGES_SHOWN&&(s=e.call(e,"option",i.InvalidComponentTracker._OPTION_DISABLED),r=e.call(e,"option",i.InvalidComponentTracker._OPTION_READONLY),a=!s&&!r)),u=this._updateInvalidTracker(n,h||0,a),this._updateInvalidProperties(),u&&(void 0===this._updateCounter&&(this._updateCounter=0),this._updateCounter++));break;case i.InvalidComponentTracker._OPTION_DISABLED:case i.InvalidComponentTracker._OPTION_READONLY:u=!1,o&&(u=this._updateInvalidTracker(i.InvalidComponentTracker._OPTION_MESSAGES_SHOWN,h||0,!1),u=this._updateInvalidTracker(i.InvalidComponentTracker._OPTION_MESSAGES_HIDDEN,h||0,!1)||u,this._updateInvalidProperties())}return u},i.InvalidComponentTracker.prototype._initializeInvalidTrackers=function(e,t){void 0===this._invalid[e]&&this._updateInvalidTracker(i.InvalidComponentTracker._OPTION_MESSAGES_SHOWN,e,t),void 0===this._invalidHidden[e]&&this._updateInvalidTracker(i.InvalidComponentTracker._OPTION_MESSAGES_HIDDEN,e,t)},i.InvalidComponentTracker.prototype._updateInvalidProperties=function(){this.invalidShown=this._invalid.indexOf(!0)>=0,this.invalidHidden=this._invalidHidden.indexOf(!0)>=0},i.InvalidComponentTracker.prototype._updateInvalidTracker=function(e,t,n){var o,s=!1;return o=e===i.InvalidComponentTracker._OPTION_MESSAGES_SHOWN?this._invalid:e===i.InvalidComponentTracker._OPTION_MESSAGES_HIDDEN?this._invalidHidden:[],t>=0&&void 0!==o[t]?(s=o[t]!==n)&&(o[t]=n):(o.push(n),s=!0),s},i.InvalidComponentTracker._hasInvalidMessages=function(e){return!i.Message.isValid(e)},i.ValueBinding=function(){},i.ValueBinding._ATTRIBUTE_INVALID_COMPONENT_TRACKER="invalidComponentTracker",i.ValueBinding._EVENT_OPTIONCHANGE="ojoptionchange",i.ValueBinding._OPTION_MESSAGES_SHOWN="messagesShown",i.ValueBinding._OPTION_MESSAGES_HIDDEN="messagesHidden",i.ValueBinding._OPTION_DISABLED="disabled",i.ValueBinding._OPTION_READONLY="readOnly",i.ValueBinding._update=function(e,t,n,o,s){var r,a={},l=s.call()[i.ValueBinding._ATTRIBUTE_INVALID_COMPONENT_TRACKER];if(e===i.ValueBinding._OPTION_DISABLED||e===i.ValueBinding._OPTION_READONLY)return null!==(r=l&&l.peek()||null)&&ko.isWriteableObservable(l)&&r._update.call(r,o,n,e,t)&&l.valueHasMutated(),a[e]=t,a},i.ValueBinding._init=function(e,t){var i={};return i[e]=t,i},i.ValueBinding._afterCreate=function(e,t,n,o){var s=o.call();return e===i.ValueBinding._ATTRIBUTE_INVALID_COMPONENT_TRACKER&&!!s[e]&&i.ValueBinding._registerInvalidComponentTrackerWriteback(e,s,t,n),{}},i.ValueBinding._beforeDestroy=function(e,t,n,o){var s,r=$(t),a=o.call()[e];e===i.ValueBinding._ATTRIBUTE_INVALID_COMPONENT_TRACKER&&r&&(r.off(i.ValueBinding._EVENT_OPTIONCHANGE,i.ValueBinding._updateInvalidComponentTracker),a&&ko.isWriteableObservable(a)&&(s=a.peek())._remove.call(s,n)&&a.valueHasMutated())},i.ValueBinding._updateInvalidComponentTracker=function(e){var t,n=e.data.tracker,o=e.data.component,s=e.data.element,r=arguments[1],a=r.option,l=r.value;a!==i.ValueBinding._OPTION_MESSAGES_SHOWN&&a!==i.ValueBinding._OPTION_MESSAGES_HIDDEN||n&&ko.isWriteableObservable(n)&&(t=n.peek())&&t._update.call(t,o,s,a,l)&&n.valueHasMutated()},i.ValueBinding._registerInvalidComponentTrackerWriteback=function(e,t,n,o){var s,r,a,l,u=t[e],h=$(n);if(!ko.isObservable(u))throw new Error("Binding attribute "+i.ValueBinding._ATTRIBUTE_INVALID_COMPONENT_TRACKER+" should be bound to a ko observable.");null==(l=u.peek())&&u(l=new i.InvalidComponentTracker),null!==l&&(ko.isWriteableObservable(u)&&(s=o.call(o,"option",i.ValueBinding._OPTION_MESSAGES_SHOWN),r=o.call(o,"option",i.ValueBinding._OPTION_MESSAGES_HIDDEN),l._update.call(l,o,n,i.ValueBinding._OPTION_MESSAGES_SHOWN,s),l._update.call(l,o,n,i.ValueBinding._OPTION_MESSAGES_HIDDEN,r),u.valueHasMutated()),a={tracker:u,component:o,element:n},h.on(i.ValueBinding._EVENT_OPTIONCHANGE,a,i.ValueBinding._updateInvalidComponentTracker))},i.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:"editableValue",attributes:[i.ValueBinding._ATTRIBUTE_INVALID_COMPONENT_TRACKER,i.ValueBinding._OPTION_DISABLED,i.ValueBinding._OPTION_READONLY],init:i.ValueBinding._init,update:i.ValueBinding._update,afterCreate:i.ValueBinding._afterCreate,beforeDestroy:i.ValueBinding._beforeDestroy});var he=function(){function e(){}return e.prototype.addEventListener=function(e,t){this._eventListeners||(this._eventListeners=[]),this._eventListeners.push({type:e.toLowerCase(),listener:t})},e.prototype.removeEventListener=function(e,t){if(this._eventListeners){var i=void 0;for(i=this._eventListeners.length-1;i>=0;i--)this._eventListeners[i].type==e&&this._eventListeners[i].listener==t&&this._eventListeners.splice(i,1)}},e.prototype.dispatchEvent=function(e){if(this._eventListeners){var t,i=this._eventListeners.slice(0);for(t=0;t<i.length;t++){var n=i[t];if(n.type==e.type&&!1===n.listener.apply(this,[e]))return!1}}return!0},e.applyMixin=function(t){[e].forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(i){"constructor"!==i&&(t.prototype[i]=e.prototype[i])})})},e}();i.EventTargetMixin=he;var de,ce,pe=function(){return function(e,t){this.type=e,this.options=t,null!=t&&(this.detail=t.detail)}}();i.GenericEvent=pe,function(e){!function(e){e.$co="$co",e.$eq="$eq",e.$ew="$ew",e.$pr="$pr",e.$gt="$gt",e.$ge="$ge",e.$lt="$lt",e.$le="$le",e.$ne="$ne",e.$regex="$regex",e.$sw="$sw"}(e.AttributeOperator||(e.AttributeOperator={}))}(de||(de={})),i.AttributeFilterOperator=de,i.AttributeFilterOperator.AttributeOperator=de.AttributeOperator,function(e){!function(e){e.$and="$and",e.$or="$or"}(e.CompoundOperator||(e.CompoundOperator={}))}(ce||(ce={})),i.CompoundFilterOperator=ce,i.CompoundFilterOperator.CompoundOperator=ce.CompoundOperator;var _e=function(e){function t(i){var n={};return n[t._DETAIL]=i,e.call(this,"mutate",n)||this}return __extends(t,e),t._DETAIL="detail",t}(pe);i.DataProviderMutationEvent=_e,i.DataProviderMutationEvent=_e;var me=function(e){function t(){return e.call(this,"refresh")||this}return __extends(t,e),t}(pe);i.DataProviderRefreshEvent=me,i.DataProviderRefreshEvent=me,i.DataProvider=function(){};var ge=function(){function e(){}return e.prototype.fetchByKeys=function(e){var t=0,i=this.getIterationLimit?this.getIterationLimit():-1,n={size:25},o=new Map,s=this.fetchFirst(n)[Symbol.asyncIterator]();return function e(n,o,s){return o.next().then(function(r){var a=r.value,l=a.data,u=a.metadata,h=u.map(function(e){return e.key}),d=!0;return n.keys.forEach(function(e){s.has(e)||h.map(function(t,i){t==e&&s.set(t,{metadata:u[i],data:l[i]})}),s.has(e)||(d=!1)}),t+=l.length,d||r.done?s:-1!=i&&t>=i?s:e(n,o,s)})}(e,s,o).then(function(t){var i=new Map;return t.forEach(function(e,t){var n=[e];i.set(t,n[0])}),{fetchParameters:e,results:i}})},e.prototype.containsKeys=function(e){return this.fetchByKeys(e).then(function(t){var i=new Set;return e.keys.forEach(function(e){null!=t.results.get(e)&&i.add(e)}),Promise.resolve({containsParameters:e,results:i})})},e.prototype.getCapability=function(e){if("fetchByKeys"==e)return{implementation:"iteration"};var t=null;if(!0!==this._ojSkipLastCapability){this._ojSkipLastCapability=!0;for(var i=1;this["_ojLastGetCapability"+i];)++i;for(--i;i>0&&!(t=this["_ojLastGetCapability"+i](e));i--);delete this._ojSkipLastCapability}return t},e.applyMixin=function(t){var i=t.prototype.getCapability;if([e].forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(i){"constructor"!==i&&(t.prototype[i]=e.prototype[i])})}),i){for(var n=1;t.prototype["_ojLastGetCapability"+n];)++n;t.prototype["_ojLastGetCapability"+n]=i}},e}();i.FetchByKeysMixin=ge,i.FetchByKeysMixin.applyMixin=ge.applyMixin;var fe=function(){function e(){}return e.prototype.fetchByOffset=function(e){var t=e&&e.size>0?e.size:25,i=e?e.sortCriteria:null,n=e&&e.offset>0?e.offset:0,o=0,s=this.getIterationLimit?this.getIterationLimit():-1,r=!1,a={};a.size=t,a.sortCriteria=i;var l=new Array,u=this.fetchFirst(a)[Symbol.asyncIterator]();return function e(i,a,l){return a.next().then(function(u){r=u.done;var h=u.value,d=h.data,c=h.metadata,p=d.length;if(n<o+p)for(var _=n<=o?0:n-o;_<p&&l.length!=t;_++)l.push({metadata:c[_],data:d[_]});return o+=p,l.length<t&&!r?-1!=s&&o>=s?l:e(i,a,l):l})}(e,u,l).then(function(t){return{fetchParameters:e,results:t,done:r}})},e.prototype.getCapability=function(e){if("fetchByOffset"==e)return{implementation:"iteration"};var t=null;if(!0!==this._ojSkipLastCapability){this._ojSkipLastCapability=!0;for(var i=1;this["_ojLastGetCapability"+i];)++i;for(--i;i>0&&!(t=this["_ojLastGetCapability"+i](e));i--);delete this._ojSkipLastCapability}return t},e.applyMixin=function(t){var i=t.prototype.getCapability;if([e].forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(i){"constructor"!==i&&(t.prototype[i]=e.prototype[i])})}),i){for(var n=1;t.prototype["_ojLastGetCapability"+n];)++n;t.prototype["_ojLastGetCapability"+n]=i}},e}();i.FetchByOffsetMixin=fe,i.FetchByOffsetMixin.applyMixin=fe.applyMixin;var ve=function(){function e(e){this.tableDataSource=e,this._KEY="key",this._KEYS="keys",this._AFTERKEYS="afterKeys",this._DIRECTION="direction",this._STARTINDEX="startIndex",this._ATTRIBUTE="attribute",this._SILENT="silent",this._SORT="sort",this._SORTCRITERIA="sortCriteria",this._PAGESIZE="pageSize",this._DATA="data",this._METADATA="metadata",this._INDEXES="indexes",this._OFFSET="offset",this._REFRESH="refresh",this._SIZE="size",this._VALUE="value",this._DONE="done",this._FETCHPARAMETERS="fetchParameters",this._CONTAINSPARAMETERS="containsParameters",this._RESULTS="results",this._ADD="add",this._REMOVE="remove",this._UPDATE="update",this._FETCHTYPE="fetchType",this.AsyncIterable=function(){return function(e,t){this._parent=e,this._asyncIterator=t,this[Symbol.asyncIterator]=function(){return this._asyncIterator}}}(),this.AsyncIterator=function(){function e(e,t,i){this._parent=e,this._nextFunc=t,this._params=i,this._fetchFirst=!0}return e.prototype.next=function(){var e=this._fetchFirst;return this._fetchFirst=!1,this._nextFunc(this._params,e)},e}(),this.AsyncIteratorResult=function(){return function(e,t,i){this._parent=e,this.value=t,this.done=i,this[e._VALUE]=t,this[e._DONE]=i}}(),this.FetchByKeysResults=function(){return function(e,t,i){this._parent=e,this.fetchParameters=t,this.results=i,this[e._FETCHPARAMETERS]=t,this[e._RESULTS]=i}}(),this.ContainsKeysResults=function(){return function(e,t,i){this._parent=e,this.containsParameters=t,this.results=i,this[e._CONTAINSPARAMETERS]=t,this[e._RESULTS]=i}}(),this.FetchListResult=function(){return function(e,t,i,n){this._parent=e,this.fetchParameters=t,this.data=i,this.metadata=n,this[e._FETCHPARAMETERS]=t,this[e._DATA]=i,this[e._METADATA]=n}}(),this.Item=function(){return function(e,t,i){this._parent=e,this.metadata=t,this.data=i,this[e._METADATA]=t,this[e._DATA]=i}}(),this.ItemMetadata=function(){return function(e,t){this._parent=e,this.key=t,this[e._KEY]=t}}(),this.FetchByOffsetResults=function(){return function(e,t,i,n){this._parent=e,this.fetchParameters=t,this.results=i,this.done=n,this[e._FETCHPARAMETERS]=t,this[e._RESULTS]=i,this[e._DONE]=n}}(),this.FetchListParameters=function(){return function(e,t,i){this._parent=e,this.size=t,this.sortCriteria=i,this[e._SIZE]=t,this[e._SORTCRITERIA]=i}}(),this.SortCriterion=function(){return function(e,t,i){this._parent=e,this.attribute=t,this.direction=i,this[e._ATTRIBUTE]=t,this[e._DIRECTION]=i}}(),this.DataProviderMutationEventDetail=function(){return function(e,t,i,n){this._parent=e,this.add=t,this.remove=i,this.update=n,this[e._ADD]=t,this[e._REMOVE]=i,this[e._UPDATE]=n}}(),this.DataProviderOperationEventDetail=function(){return function(e,t,i,n,o){this._parent=e,this.keys=t,this.metadata=i,this.data=n,this.indexes=o,this[e._KEYS]=t,this[e._METADATA]=i,this[e._DATA]=n,this[e._INDEXES]=o}}(),this.DataProviderAddOperationEventDetail=function(){return function(e,t,i,n,o,s){this._parent=e,this.keys=t,this.afterKeys=i,this.metadata=n,this.data=o,this.indexes=s,this[e._KEYS]=t,this[e._AFTERKEYS]=i,this[e._METADATA]=n,this[e._DATA]=o,this[e._INDEXES]=s}}(),this._addTableDataSourceEventListeners(),this[this._OFFSET]=0}return e.prototype.destroy=function(){this._removeTableDataSourceEventListeners()},e.prototype.containsKeys=function(e){var t=this,i=[];return e[this._KEYS].forEach(function(e){i.push(t.tableDataSource.get(e))}),Promise.all(i).then(function(i){var n=new Set;return i.map(function(e){null!=e&&n.add(e[t._KEY])}),Promise.resolve(new t.ContainsKeysResults(t,e,n))})},e.prototype.fetchByKeys=function(e){var t=this,i=[];return e[this._KEYS].forEach(function(e){i.push(t.tableDataSource.get(e))}),Promise.all(i).then(function(i){var n=new Map;return i.map(function(e){var i=e[t._KEY],o=e[t._DATA];n.set(i,new t.Item(t,new t.ItemMetadata(t,i),o))}),Promise.resolve(new t.FetchByKeysResults(t,e,n))})},e.prototype.fetchByOffset=function(e){var t=this,i=null!=e?e[this._SIZE]:-1,n=null!=e?e[this._SORTCRITERIA]:null,o=null!=e&&e[this._OFFSET]>0?e[this._OFFSET]:0,s=new this.FetchListParameters(this,i,n);return this._startIndex=0,this._getFetchFunc(s,o)(s,!0).then(function(i){var n=i[t._VALUE],o=i[t._DONE],s=n[t._DATA],r=n[t._METADATA].map(function(e){return e[t._KEY]}),a=new Array;return s.map(function(e,i){a.push(new t.Item(t,new t.ItemMetadata(t,r[i]),s[i]))}),new t.FetchByOffsetResults(t,e,a,o)})},e.prototype.fetchFirst=function(e){return this._isPagingModelTableDataSource()||(this._startIndex=0),new this.AsyncIterable(this,new this.AsyncIterator(this,this._getFetchFunc(e),e))},e.prototype.getCapability=function(e){return e==this._SORT&&"full"==this.tableDataSource.getCapability(e)?{attributes:"multiple"}:null},e.prototype.getTotalSize=function(){return Promise.resolve(this.tableDataSource.totalSize())},e.prototype.isEmpty=function(){return this.tableDataSource.totalSize()>0?"no":"yes"},e.prototype.getPage=function(){return this._isPagingModelTableDataSource()?this.tableDataSource.getPage():-1},e.prototype.setPage=function(e,t){return this._isPagingModelTableDataSource()?this.tableDataSource.setPage(e,t):Promise.reject(null)},e.prototype.getStartItemIndex=function(){return this._isPagingModelTableDataSource()?this.tableDataSource.getStartItemIndex():-1},e.prototype.getEndItemIndex=function(){return this._isPagingModelTableDataSource()?this.tableDataSource.getEndItemIndex():-1},e.prototype.getPageCount=function(){return this._isPagingModelTableDataSource()?this.tableDataSource.getPageCount():-1},e.prototype.totalSize=function(){return this._isPagingModelTableDataSource()?this.tableDataSource.totalSize():-1},e.prototype.totalSizeConfidence=function(){return this._isPagingModelTableDataSource()?this.tableDataSource.totalSizeConfidence():null},e.prototype._getFetchFunc=function(e,t){var i=this;if(null!=e&&null!=e[this._SORTCRITERIA]){var n=e[this._SORTCRITERIA][0][this._ATTRIBUTE],o=e[this._SORTCRITERIA][0][this._DIRECTION];return this._ignoreSortEvent=!0,this._isPagingModelTableDataSource()||(this._startIndex=0),function(e,n){return function(o,s){if(s){var r={};return r[i._KEY]=e,r[i._DIRECTION]=n,i[i._OFFSET]=0,i.tableDataSource.sort(r).then(function(){return i._ignoreSortEvent=!1,i._getTableDataSourceFetch(o,t)(o)})}return i._getTableDataSourceFetch(o,t)(o)}}(n,o)}return this._getTableDataSourceFetch(e,t)},e.prototype._getTableDataSourceFetch=function(e,t){var i=this;return function(e,n){var o={};if(t=t>0?t:0,null!=i._startIndex&&(o[i._STARTINDEX]=i._startIndex+t),o[i._PAGESIZE]=null!=e&&e[i._SIZE]>0?e[i._SIZE]:null,i._isPagingModelTableDataSource()||(o[i._SILENT]=!0),null!=i.tableDataSource[i._SORTCRITERIA]&&null==e[i._SORTCRITERIA]){e[i._SORTCRITERIA]=[];var s=new i.SortCriterion(i,i.tableDataSource[i._SORTCRITERIA][i._KEY],i.tableDataSource[i._SORTCRITERIA][i._DIRECTION]);e[i._SORTCRITERIA].push(s)}return o[i._FETCHTYPE]=e[i._FETCHTYPE],i._isFetching=!0,new Promise(function(t,n){i._fetchResolveFunc=t,i._fetchRejectFunc=n,i._fetchParams=e,i._requestEventTriggered||i.tableDataSource.fetch(o).then(function(n){if(null!==n){i._isFetching=!1,void 0===n&&((n={})[i._KEYS]=[],n[i._DATA]=[]);var s=[];null!=n[i._KEYS]&&(s=n[i._KEYS].map(function(e){return new i.ItemMetadata(i,e)})),null==i._startIndex&&(i._startIndex=0);var r=!1;i._startIndex=i._startIndex+n[i._DATA].length,"actual"==i.tableDataSource.totalSizeConfidence()&&i.tableDataSource.totalSize()>0&&i._startIndex>=i.tableDataSource.totalSize()?r=!0:o[i._PAGESIZE]>0&&n[i._DATA].length<o[i._PAGESIZE]?r=!0:0==n[i._DATA].length&&(r=!0),i._fetchResolveFunc=null,i._fetchParams=null,t(new i.AsyncIteratorResult(i,new i.FetchListResult(i,e,n[i._DATA],s),r))}},function(e){n(e)})})}},e.prototype._handleSync=function(e){var t=this;if(t._startIndex=null,e[t._STARTINDEX]>0&&(t._startIndex=e[t._STARTINDEX],t[t._OFFSET]=t._startIndex),t._fetchResolveFunc&&null!=e[t._KEYS]){t._isFetching=!1;var n=e[t._KEYS].map(function(e){return new t.ItemMetadata(t,e)}),o=!1;"actual"==t.tableDataSource.totalSizeConfidence()&&t.tableDataSource.totalSize()>0&&t._startIndex>=t.tableDataSource.totalSize()&&(o=!0),t._fetchResolveFunc(new t.AsyncIteratorResult(t,new t.FetchListResult(t,t._fetchParams,e[t._DATA],n),o)),t._fetchResolveFunc=null,t._fetchParams=null}else t._requestEventTriggered||t.dispatchEvent(new i.DataProviderRefreshEvent);t._requestEventTriggered=!1},e.prototype._handleAdd=function(e){var t=this,n=e[t._KEYS].map(function(e){return new t.ItemMetadata(t,e)}),o=new Set;e[t._KEYS].map(function(e){o.add(e)});var s=new t.DataProviderAddOperationEventDetail(t,o,null,n,e[t._DATA],e[t._INDEXES]),r=new t.DataProviderMutationEventDetail(t,s,null,null);t.dispatchEvent(new i.DataProviderMutationEvent(r))},e.prototype._handleRemove=function(e){var t=this,n=e[t._KEYS].map(function(e){return new t.ItemMetadata(t,e)}),o=new Set;e[t._KEYS].map(function(e){o.add(e)});var s=new t.DataProviderOperationEventDetail(t,o,n,e[t._DATA],e[t._INDEXES]),r=new t.DataProviderMutationEventDetail(t,null,s,null);t.dispatchEvent(new i.DataProviderMutationEvent(r))},e.prototype._handleReset=function(e){this._requestEventTriggered||this._isPagingModelTableDataSource()||(this._startIndex=0,this.dispatchEvent(new i.DataProviderRefreshEvent))},e.prototype._handleSort=function(e){this._ignoreSortEvent||(this._startIndex=null,this.dispatchEvent(new i.DataProviderRefreshEvent))},e.prototype._handleChange=function(e){var t=this,n=e[t._KEYS].map(function(e){return new t.ItemMetadata(t,e)}),o=new Set;e[t._KEYS].map(function(e){o.add(e)});var s=new t.DataProviderOperationEventDetail(t,o,n,e[t._DATA],e[t._INDEXES]),r=new t.DataProviderMutationEventDetail(t,null,null,s);t.dispatchEvent(new i.DataProviderMutationEvent(r))},e.prototype._handleRefresh=function(e){this._isFetching||this._requestEventTriggered||(null!=e[this._OFFSET]?this._startIndex=e[this._OFFSET]:this._startIndex=null,this.dispatchEvent(new i.DataProviderRefreshEvent)),this._requestEventTriggered=!1},e.prototype._handleRequest=function(e){void 0!==i.Model&&e instanceof i.Model||this._isFetching||(e[this._STARTINDEX]>0&&0==this.getStartItemIndex()&&(this._startIndex=e[this._STARTINDEX]),this._requestEventTriggered=!0,this.dispatchEvent(new i.DataProviderRefreshEvent))},e.prototype._handleError=function(e){this._fetchRejectFunc&&this._fetchRejectFunc(e),this._isFetching=!1,this._requestEventTriggered=!1},e.prototype._handlePage=function(e){this._isFetching=!1,this._requestEventTriggered=!1;var t={};t.detail=e,this.dispatchEvent(new i.GenericEvent(i.PagingModel.EventType.PAGE,t))},e.prototype._addListener=function(e,t){this._eventHandlerFuncs[e]=t.bind(this),this.tableDataSource.on(e,this._eventHandlerFuncs[e])},e.prototype._removeListener=function(e){this.tableDataSource.off(e,this._eventHandlerFuncs[e])},e.prototype._addTableDataSourceEventListeners=function(){this._eventHandlerFuncs={},this._addListener("sync",this._handleSync),this._addListener("add",this._handleAdd),this._addListener("remove",this._handleRemove),this._addListener("reset",this._handleReset),this._addListener("sort",this._handleSort),this._addListener("change",this._handleChange),this._addListener("refresh",this._handleRefresh),this._addListener("request",this._handleRequest),this._addListener("error",this._handleError),this._addListener("page",this._handlePage)},e.prototype._removeTableDataSourceEventListeners=function(){this._removeListener("sync"),this._removeListener("add"),this._removeListener("remove"),this._removeListener("reset"),this._removeListener("sort"),this._removeListener("change"),this._removeListener("refresh"),this._removeListener("request"),this._removeListener("error"),this._removeListener("page")},e.prototype._isPagingModelTableDataSource=function(){return null!=this.tableDataSource.getStartItemIndex},e}();i.EventTargetMixin.applyMixin(ve),i.TableDataSourceAdapter=ve,i.TableDataSourceAdapter=ve;var Ce=function(){function e(e,t){this.data=e,this.options=t,this._KEY="key",this._KEYS="keys",this._AFTERKEYS="afterKeys",this._DIRECTION="direction",this._ATTRIBUTE="attribute",this._SORT="sort",this._SORTCRITERIA="sortCriteria",this._DATA="data",this._METADATA="metadata",this._INDEXES="indexes",this._OFFSET="offset",this._SIZE="size",this._IDATTRIBUTE="idAttribute",this._IMPLICITSORT="implicitSort",this._KEYATTRIBUTES="keyAttributes",this._SORTCOMPARATORS="sortComparators",this._COMPARATORS="comparators",this._COMPARATOR="comparator",this._RESULTS="results",this._CONTAINS="contains",this._FETCHPARAMETERS="fetchParameters",this._CONTAINSPARAMETERS="containsParameters",this._VALUE="value",this._DONE="done",this._ADD="add",this._REMOVE="remove",this._UPDATE="update",this.Item=function(){return function(e,t,i){this._parent=e,this.metadata=t,this.data=i,this[e._METADATA]=t,this[e._DATA]=i}}(),this.ItemMetadata=function(){return function(e,t){this._parent=e,this.key=t,this[e._KEY]=t}}(),this.FetchByKeysResults=function(){return function(e,t,i){this._parent=e,this.fetchParameters=t,this.results=i,this[e._FETCHPARAMETERS]=t,this[e._RESULTS]=i}}(),this.ContainsKeysResults=function(){return function(e,t,i){this._parent=e,this.containsParameters=t,this.results=i,this[e._CONTAINSPARAMETERS]=t,this[e._RESULTS]=i}}(),this.FetchByOffsetResults=function(){return function(e,t,i,n){this._parent=e,this.fetchParameters=t,this.results=i,this.done=n,this[e._FETCHPARAMETERS]=t,this[e._RESULTS]=i,this[e._DONE]=n}}(),this.FetchListParameters=function(){return function(e,t,i){this._parent=e,this.size=t,this.sortCriteria=i,this[e._SIZE]=t,this[e._SORTCRITERIA]=i}}(),this.FetchListResult=function(){return function(e,t,i,n){this._parent=e,this.fetchParameters=t,this.data=i,this.metadata=n,this[e._FETCHPARAMETERS]=t,this[e._DATA]=i,this[e._METADATA]=n}}(),this.AsyncIterable=function(){return function(e,t){this._parent=e,this._asyncIterator=t,this[Symbol.asyncIterator]=function(){return this._asyncIterator}}}(),this.AsyncIterator=function(){function e(e,t,i,n){this._parent=e,this._nextFunc=t,this._params=i,this._offset=n,this._cachedOffset=n}return e.prototype.next=function(){var e=this._nextFunc(this._params,this._cachedOffset);return this._cachedOffset=this._cachedOffset+e.value[this._parent._DATA].length,Promise.resolve(e)},e}(),this.AsyncIteratorResult=function(){return function(e,t,i){this._parent=e,this.value=t,this.done=i,this[e._VALUE]=t,this[e._DONE]=i}}(),this.DataProviderMutationEventDetail=function(){return function(e,t,i,n){this._parent=e,this.add=t,this.remove=i,this.update=n,this[e._ADD]=t,this[e._REMOVE]=i,this[e._UPDATE]=n}}(),this.DataProviderOperationEventDetail=function(){return function(e,t,i,n,o){this._parent=e,this.keys=t,this.metadata=i,this.data=n,this.indexes=o,this[e._KEYS]=t,this[e._METADATA]=i,this[e._DATA]=n,this[e._INDEXES]=o}}(),this.DataProviderAddOperationEventDetail=function(){return function(e,t,i,n,o,s){this._parent=e,this.keys=t,this.afterKeys=i,this.metadata=n,this.data=o,this.indexes=s,this[e._KEYS]=t,this[e._AFTERKEYS]=i,this[e._METADATA]=n,this[e._DATA]=o,this[e._INDEXES]=s}}(),this._cachedIndexMap=[],this._sequenceNum=0,this._subscribeObservableArray(e),null!=t&&null!=t[this._KEYS]&&(this._keysSpecified=!0,this._keys=t[this._KEYS])}return e.prototype.containsKeys=function(e){var t=this;return this.fetchByKeys(e).then(function(i){var n=new Set;return e[t._KEYS].forEach(function(e){null!=i[t._RESULTS].get(e)&&n.add(e)}),Promise.resolve(new t.ContainsKeysResults(t,e,n))})},e.prototype.fetchByKeys=function(e){var t=this;this._generateKeysIfNeeded();var n,o=new Map,s=this._getKeys(),r=0;return e[this._KEYS].forEach(function(e){for(n=null,r=0;r<s.length;r++)if(i.Object.compareValues(s[r],e)){n=r;break}null!=n&&n>=0&&o.set(e,new t.Item(t,new t.ItemMetadata(t,e),t._getRowData()[n]))}),Promise.resolve(new this.FetchByKeysResults(this,e,o))},e.prototype.fetchByOffset=function(e){var t=this,i=null!=e?e[this._SIZE]:-1,n=null!=e?e[this._SORTCRITERIA]:null,o=null!=e&&e[this._OFFSET]>0?e[this._OFFSET]:0;this._generateKeysIfNeeded();var s=new this.FetchListParameters(this,i,n),r=this._fetchFrom(s,o),a=r[this._VALUE],l=r[this._DONE],u=a[this._DATA],h=a[this._METADATA].map(function(e){return e[t._KEY]}),d=u.map(function(e,i){return new t.Item(t,new t.ItemMetadata(t,h[i]),e)});return Promise.resolve(new this.FetchByOffsetResults(this,e,d,l))},e.prototype.fetchFirst=function(e){return new this.AsyncIterable(this,new this.AsyncIterator(this,this._fetchFrom.bind(this),e,0))},e.prototype.getCapability=function(t){return e.getCapability(t)},e.getCapability=function(e){return"sort"==e?{attributes:"multiple"}:"fetchByKeys"==e?{implementation:"lookup"}:"fetchByOffset"==e?{implementation:"randomAccess"}:null},e.prototype.getTotalSize=function(){return Promise.resolve(this._getRowData().length)},e.prototype.isEmpty=function(){return this._getRowData().length>0?"no":"yes"},e.prototype._getRowData=function(){return this[this._DATA]instanceof Array?this[this._DATA]:this[this._DATA]()},e.prototype._getKeys=function(){return null==this._keys||this._keys instanceof Array?this._keys:this._keys()},e.prototype._subscribeObservableArray=function(e){if(!(e instanceof Array)){if(!this._isObservableArray(e))throw new Error("Invalid data type. ArrayDataProvider only supports Array or observableArray.");var t=this;e.subscribe(function(e){var n,o,s,r,a,l=[],u=[],h=[],d=[],c=[],p=[],_=null,m=null,g=null,f=[];for(n=0;n<e.length;n++)for(r=e[n].index,a=e[n].status,o=0;o<e.length;o++)o!=n&&r===e[o].index&&a!==e[o].status&&p.indexOf(n)<0&&f.indexOf(n)<0&&("deleted"===a?(f.push(n),p.push(o)):(f.push(o),p.push(n)));for(n=0;n<e.length;n++)if(p.indexOf(n)>=0){var v=t._getKeys()[e[n].index],C=t._getId(e[n].value);null==C||i.Object.compareValues(C,v)||(v=C,t._getKeys()[e[n].index]=v),u.push(v),l.push(e[n].value),h.push(e[n].index)}if(u.length>0){d=u.map(function(e){return new t.ItemMetadata(t,e)});var y=new Set;u.map(function(e){y.add(e)}),_=new t.DataProviderOperationEventDetail(t,y,d,l,h)}for(l=[],u=[],h=[],n=0;n<e.length;n++)"deleted"===e[n].status&&p.indexOf(n)<0&&f.indexOf(n)<0&&(u.push(t._getKeys()[e[n].index]),l.push(e[n].value),h.push(e[n].index));if(u.length>0&&u.map(function(e){var i=t._getKeys().indexOf(e);t._keys.splice(i,1)}),u.length>0){d=u.map(function(e){return new t.ItemMetadata(t,e)});var b=new Set;u.map(function(e){b.add(e)}),g=new t.DataProviderOperationEventDetail(t,b,d,l,h)}for(l=[],u=[],h=[],n=0;n<e.length;n++)if("added"===e[n].status&&p.indexOf(n)<0&&f.indexOf(n)<0){t._generateKeysIfNeeded(),null==(s=t._getId(e[n].value))&&(s=t._getKeys()[e[n].index]),null==s&&(s=t._sequenceNum++,t._keys.splice(e[n].index,0,s)),-1==t._getKeys().indexOf(s)&&t._keys.splice(e[n].index,0,s),u.push(s);var S=t._getKeys()[e[n].index+1];S=null==S?"":S,c.push(S),l.push(e[n].value),h.push(e[n].index)}if(u.length>0){d=u.map(function(e){return new t.ItemMetadata(t,e)});var E=new Set;u.map(function(e){E.add(e)});var T=new Set;c.map(function(e){T.add(e)}),m=new t.DataProviderAddOperationEventDetail(t,E,T,d,l,h)}var D=new t.DataProviderMutationEventDetail(t,m,g,_);t._mutationEvent=new i.DataProviderMutationEvent(D)},null,"arrayChange"),e.subscribe(function(e){t._mutationEvent?t.dispatchEvent(t._mutationEvent):t.dispatchEvent(new i.DataProviderRefreshEvent),t._mutationEvent=null},null,"change")}},e.prototype._isObservableArray=function(e){return ko.isObservable(e)&&!(void 0===e.destroyAll)},e.prototype._generateKeysIfNeeded=function(){if(null==this._keys){var e=null!=this.options?this.options[this._KEYATTRIBUTES]||this.options[this._IDATTRIBUTE]:null;this._keys=[];var t=this._getRowData(),i=void 0,n=0;for(n=0;n<t.length;n++)null!=(i=this._getId(t[n]))&&"@index"!=e||(i=this._sequenceNum++),this._keys[n]=i;return!0}return!1},e.prototype._getId=function(e){var t,i=null!=this.options?this.options[this._KEYATTRIBUTES]||this.options[this._IDATTRIBUTE]:null;if(null!=i){var n;if(Array.isArray(i))for(t=[],n=0;n<i.length;n++)t[n]=this._getVal(e,i[n]);else t="@value"==i?this._getAllVals(e):this._getVal(e,i);return t}return null},e.prototype._getVal=function(e,t){return"function"==typeof e[t]?e[t]():e[t]},e.prototype._getAllVals=function(e){var t=this;return Object.keys(e).map(function(i){return t._getVal(e,i)})},e.prototype._fetchFrom=function(e,t){var i=this;this._generateKeysIfNeeded();var n=null!=e?e[this._SORTCRITERIA]:null,o=this._getCachedIndexMap(n),s=o.map(function(e){return i._getRowData()[e]}),r=o.map(function(e){return i._getKeys()[e]}),a=null!=e?e[this._SIZE]>0?e[this._SIZE]:e[this._SIZE]<0?i._getKeys().length:25:25,l=s.slice(t,t+a),u=r.slice(t,t+a).map(function(e){return new i.ItemMetadata(i,e)}),h=t+a<s.length,d=this._mergeSortCriteria(n);null!=d&&((e=e||{})[this._SORTCRITERIA]=d);var c=new this.FetchListResult(this,e,l,u);return new this.AsyncIteratorResult(this,c,!h)},e.prototype._getCachedIndexMap=function(e){var t=this._getRowData().map(function(e,t){return t});return this._sortData(t,e)},e.prototype._sortData=function(e,t){var i=this,n=e.map(function(e){return{index:e,value:i._getRowData()[e]}});return null!=t&&n.sort(this._getSortComparator(t)),n.map(function(e){return e.index})},e.prototype._getSortComparator=function(e){var t=this;return function(i,n){var o,s,r,a,l,u,h=null!=t.options?t.options[t._SORTCOMPARATORS]:null;for(o=0;o<e.length;o++)if(s=e[o][t._DIRECTION],r=e[o][t._ATTRIBUTE],a=null,null!=h&&(a=h[t._COMPARATORS].get(r)),l=t._getVal(i.value,r),u=t._getVal(n.value,r),null!=a){var d="descending"==s?-1:1,c=a(l,u)*d;if(0!=c)return c}else{var p=0,_="string"==typeof l?l:new String(l).toString(),m="string"==typeof u?u:new String(u).toString();if(0!=(p="ascending"==s?_.localeCompare(m,void 0,{numeric:!0,sensitivity:"base"}):m.localeCompare(_,void 0,{numeric:!0,sensitivity:"base"})))return p}return 0}},e.prototype._mergeSortCriteria=function(e){var t=null!=this.options?this.options[this._IMPLICITSORT]:null;if(null!=t){if(null==e)return t;var i=e.slice(0),n=void 0,o=void 0,s=void 0;for(n=0;n<t.length;n++){for(s=!1,o=0;o<i.length;o++)i[o][this._ATTRIBUTE]==t[n][this._ATTRIBUTE]&&(s=!0);s||i.push(t[n])}return i}return e},e}();i.ArrayDataProvider=Ce,i.EventTargetMixin.applyMixin(Ce);var ye=function(){function e(e,t){this._dataProvider=e,this._capabilityFunc=t,this._DATAPROVIDER="dataProvider",this.AsyncIterable=function(){return function(e){this._asyncIterator=e,this[Symbol.asyncIterator]=function(){return this._asyncIterator}}}(),this.AsyncIterator=function(){function e(e){this._asyncIteratorPromise=e}return e.prototype.next=function(){return this._asyncIteratorPromise.then(function(e){return e.next()})},e}()}return e.prototype.fetchFirst=function(e){var t=this._getDataProvider().then(function(t){return t.fetchFirst(e)[Symbol.asyncIterator]()}.bind(e));return new this.AsyncIterable(new this.AsyncIterator(t))},e.prototype.fetchByKeys=function(e){return this._getDataProvider().then(function(t){return t.fetchByKeys(e)})},e.prototype.containsKeys=function(e){return this._getDataProvider().then(function(t){return t.containsKeys(e)})},e.prototype.fetchByOffset=function(e){return this._getDataProvider().then(function(t){return t.fetchByOffset(e)})},e.prototype.getTotalSize=function(){return this._getDataProvider().then(function(e){return e.getTotalSize()})},e.prototype.isEmpty=function(){return this[this._DATAPROVIDER]?this[this._DATAPROVIDER].isEmpty():"unknown"},e.prototype.getCapability=function(e){return this._capabilityFunc?this._capabilityFunc(e):null},e.prototype.addEventListener=function(e,t){this._getDataProvider().then(function(i){i.addEventListener(e,t)})},e.prototype.removeEventListener=function(e,t){this._getDataProvider().then(function(i){i.removeEventListener(e,t)})},e.prototype.dispatchEvent=function(e){return!!this[this._DATAPROVIDER]&&this[this._DATAPROVIDER].dispatchEvent(e)},e.prototype._getDataProvider=function(){var e=this;return this._dataProvider.then(function(t){if(i.DataProviderFeatureChecker.isIteratingDataProvider(t))return e[e._DATAPROVIDER]||(e[e._DATAPROVIDER]=t),t;throw new Error("Invalid data type. DeferredDataProvider takes a Promise<DataProvider>")})},e}();i.DeferredDataProvider=ye,i.DataSource=function(e){this.data=e,this.Init()},i.Object.createSubclass(i.DataSource,i.EventSource,"oj.DataSource"),i.DataSource.prototype.Init=function(){i.DataSource.superclass.Init.call(this)},i.TreeDataSource=function(e){i.TreeDataSource.superclass.constructor.call(this,e)},i.Object.createSubclass(i.TreeDataSource,i.DataSource,"oj.TreeDataSource"),i.TableDataSource=function(e,t){if(this.constructor==i.TableDataSource){var n=i.TableDataSource._LOGGER_MSG._ERR_TABLE_DATASOURCE_INSTANTIATED_SUMMARY,o=i.TableDataSource._LOGGER_MSG._ERR_TABLE_DATASOURCE_INSTANTIATED_DETAIL;throw new Error(n+"\n"+o)}this.data=e,this.options=t,this.isFetching=!1,this._startIndex=0,this.Init()},i.Object.createSubclass(i.TableDataSource,i.DataSource,"oj.TableDataSource"),i.TableDataSource.prototype.Init=function(){i.TableDataSource.superclass.Init.call(this)},i.TableDataSource.prototype.sortCriteria=null,i.TableDataSource.prototype.totalSizeConfidence=function(){return"actual"},i.TableDataSource.EventType={ADD:"add",REMOVE:"remove",RESET:"reset",REFRESH:"refresh",SORT:"sort",CHANGE:"change",REQUEST:"request",SYNC:"sync",ERROR:"error"},i.TableDataSource._LOGGER_MSG={_ERR_TABLE_DATASOURCE_INSTANTIATED_SUMMARY:"oj.TableDataSource constructor called.",_ERR_TABLE_DATASOURCE_INSTANTIATED_DETAIL:"Please do not instantiate oj.TableDataSource. Please use one of the subclasses instead such as oj.ArrayTableDataSource or oj.CollectionTableDataSource.",_ERR_DATA_INVALID_TYPE_SUMMARY:"Invalid data type.",_ERR_DATA_INVALID_TYPE_DETAIL:"Please specify the appropriate data type."},i.DataGridDataSource=function(e){i.DataGridDataSource.superclass.constructor.call(this,e)},i.Object.createSubclass(i.DataGridDataSource,i.DataSource,"oj.DataGridDataSource"),i.DiagramDataSource=function(e){i.DiagramDataSource.superclass.constructor.call(this,e)},i.Object.createSubclass(i.DiagramDataSource,i.DataSource,"oj.DiagramDataSource"),i.DiagramDataSource.EventType={ADD:"add",REMOVE:"remove",CHANGE:"change"},i.__registerWidget("oj.ojPagingControl",$.oj.baseComponent,{version:"1.0.0",defaultElement:"<div>",widgetEventPrefix:"oj",options:{data:null,overflow:"fit",pageSize:25,pageOptions:{layout:["auto"],type:"numbers",maxPageLinks:6,orientation:"horizontal"},loadMoreOptions:{maxCount:500},mode:"page",ready:null},_BUNDLE_KEY:{_LABEL_ACC_PAGING:"labelAccPaging",_LABEL_ACC_NAV_FIRST_PAGE:"labelAccNavFirstPage",_LABEL_ACC_NAV_LAST_PAGE:"labelAccNavLastPage",_LABEL_ACC_NAV_NEXT_PAGE:"labelAccNavNextPage",_LABEL_ACC_NAV_PREVIOUS_PAGE:"labelAccNavPreviousPage",_LABEL_ACC_NAV_PAGE:"labelAccNavPage",_LABEL_LOAD_MORE:"labelLoadMore",_LABEL_LOAD_MORE_MAX_ROWS:"labelLoadMoreMaxRows",_LABEL_NAV_INPUT_PAGE:"labelNavInputPage",_LABEL_NAV_INPUT_PAGE_MAX:"labelNavInputPageMax",_LABEL_NAV_INPUT_PAGE_SUMMARY:"labelNavInputPageSummary",_MSG_ITEM_RANGE_CURRENT:"msgItemRangeCurrent",_MSG_ITEM_RANGE_CURRENT_SINGLE:"msgItemRangeCurrentSingle",_MSG_ITEM_RANGE_ITEMS:"msgItemRangeItems",_MSG_ITEM_RANGE_ATLEAST:"msgItemRangeOfAtLeast",_MSG_ITEM_RANGE_APPROX:"msgItemRangeOfApprox",_MSG_ITEM_RANGE_OF:"msgItemRangeOf",_TIP_NAV_INPUT_PAGE:"tipNavInputPage",_TIP_NAV_PAGE_LINK:"tipNavPageLink",_TIP_NAV_NEXT_PAGE:"tipNavNextPage",_TIP_NAV_PREVIOUS_PAGE:"tipNavPreviousPage",_TIP_NAV_FIRST_PAGE:"tipNavFirstPage",_TIP_NAV_LAST_PAGE:"tipNavLastPage",_ERR_PAGE_INVALID_SUMMARY:"pageInvalid.summary",_ERR_PAGE_INVALID_DETAIL:"pageInvalid.detail",_ERR_DATA_INVALID_TYPE_SUMMARY:"dataInvalidType.summary",_ERR_DATA_INVALID_TYPE_DETAIL:"dataInvalidType.detail",_ERR_MAXPAGELINKS_INVALID_SUMMARY:"maxPageLinksInvalid.summary",_ERR_MAXPAGELINKS_INVALID_DETAIL:"maxPageLinksInvalid.detail"},_MARKER_STYLE_CLASSES:{_WIDGET:"oj-component",_ACTIVE:"oj-active",_CLICKABLE_ICON:"oj-clickable-icon-nocontext",_DISABLED:"oj-disabled",_ENABLED:"oj-enabled",_FOCUS:"oj-focus",_FOCUS_HIGHLIGHT:"oj-focus-highlight",_HOVER:"oj-hover",_SELECTED:"oj-selected"},_CSS_CLASSES:{_PAGING_CONTROL_CLASS:"oj-pagingcontrol",_PAGING_CONTROL_ACC_LABEL_CLASS:"oj-pagingcontrol-acc-label",_PAGING_CONTROL_CONTENT_CLASS:"oj-pagingcontrol-content",_PAGING_CONTROL_LOAD_MORE_CLASS:"oj-pagingcontrol-loadmore",_PAGING_CONTROL_LOAD_MORE_LINK_CLASS:"oj-pagingcontrol-loadmore-link",_PAGING_CONTROL_LOAD_MORE_MAX_ROWS_CLASS:"oj-pagingcontrol-loadmore-max-rows",_PAGING_CONTROL_LOAD_MORE_RANGE_CLASS:"oj-pagingcontrol-loadmore-range",_PAGING_CONTROL_LOAD_MORE_RANGE_CURRENT_CLASS:"oj-pagingcontrol-loadmore-range-current",_PAGING_CONTROL_LOAD_MORE_RANGE_MAX_CLASS:"oj-pagingcontrol-loadmore-range-max",_PAGING_CONTROL_NAV_CLASS:"oj-pagingcontrol-nav",_PAGING_CONTROL_NAV_ARROW_CLASS:"oj-pagingcontrol-nav-arrow",_PAGING_CONTROL_NAV_ARROW_SECTION_CLASS:"oj-pagingcontrol-nav-arrow-section",_PAGING_CONTROL_NAV_PAGE_CLASS:"oj-pagingcontrol-nav-page",_PAGING_CONTROL_NAV_PAGE_ELLIPSIS_CLASS:"oj-pagingcontrol-nav-page-ellipsis",_PAGING_CONTROL_NAV_DOT_CLASS:"oj-pagingcontrol-nav-dot",_PAGING_CONTROL_NAV_DOT_BULLET_CLASS:"oj-pagingcontrol-nav-dot-bullet",_PAGING_CONTROL_NAV_PAGE_ACC_LABEL_CLASS:"oj-pagingcontrol-nav-page-acc-label",_PAGING_CONTROL_NAV_LABEL_CLASS:"oj-pagingcontrol-nav-label",_PAGING_CONTROL_NAV_INPUT_SECTION_CLASS:"oj-pagingcontrol-nav-input-section",_PAGING_CONTROL_NAV_INPUT_CLASS:"oj-pagingcontrol-nav-input",_PAGING_CONTROL_NAV_INPUT_MAX_CLASS:"oj-pagingcontrol-nav-input-max",_PAGING_CONTROL_NAV_INPUT_SUMMARY_CLASS:"oj-pagingcontrol-nav-input-summary",_PAGING_CONTROL_NAV_INPUT_SUMMARY_CURRENT_CLASS:"oj-pagingcontrol-nav-input-summary-current",_PAGING_CONTROL_NAV_INPUT_SUMMARY_MAX_CLASS:"oj-pagingcontrol-nav-input-summary-max",_PAGING_CONTROL_NAV_PAGES_SECTION_CLASS:"oj-pagingcontrol-nav-pages-section",_PAGING_CONTROL_NAV_PAGES_LINKS_CLASS:"oj-pagingcontrol-nav-pages-links",_PAGING_CONTROL_NAV_FIRST_CLASS:"oj-pagingcontrol-nav-first",_PAGING_CONTROL_NAV_FIRST_ACC_LABEL_CLASS:"oj-pagingcontrol-nav-first-acc-label",_PAGING_CONTROL_NAV_PREVIOUS_CLASS:"oj-pagingcontrol-nav-previous",_PAGING_CONTROL_NAV_PREVIOUS_ACC_LABEL_CLASS:"oj-pagingcontrol-nav-previous-acc-label",_PAGING_CONTROL_NAV_NEXT_CLASS:"oj-pagingcontrol-nav-next",_PAGING_CONTROL_NAV_NEXT_ACC_LABEL_CLASS:"oj-pagingcontrol-nav-next-acc-label",_PAGING_CONTROL_NAV_LAST_CLASS:"oj-pagingcontrol-nav-last",_PAGING_CONTROL_NAV_LAST_ACC_LABEL_CLASS:"oj-pagingcontrol-nav-last-acc-label",_PAGING_CONTROL_NAV_FIRST_ICON_CLASS:"oj-pagingcontrol-nav-first-icon",_PAGING_CONTROL_NAV_PREVIOUS_ICON_CLASS:"oj-pagingcontrol-nav-previous-icon",_PAGING_CONTROL_NAV_NEXT_ICON_CLASS:"oj-pagingcontrol-nav-next-icon",_PAGING_CONTROL_NAV_LAST_ICON_CLASS:"oj-pagingcontrol-nav-last-icon",_PAGING_CONTROL_NAV_FIRST_VERTICAL_ICON_CLASS:"oj-pagingcontrol-nav-first-vertical-icon",_PAGING_CONTROL_NAV_PREVIOUS_VERTICAL_ICON_CLASS:"oj-pagingcontrol-nav-previous-vertical-icon",_PAGING_CONTROL_NAV_NEXT_VERTICAL_ICON_CLASS:"oj-pagingcontrol-nav-next-vertical-icon",_PAGING_CONTROL_NAV_LAST_VERTICAL_ICON_CLASS:"oj-pagingcontrol-nav-last-vertical-icon",_WIDGET_ICON_CLASS:"oj-component-icon",_HIDDEN_CONTENT_ACC_CLASS:"oj-helper-hidden-accessible"},_DATA_ATTR_PAGE_NUM:"data-oj-pagenum",_OPTION_ENABLED:"enabled",_OPTION_DISABLED:"disabled",_TAB_INDEX:"tabindex",_MODE:{_LOAD_MORE:"loadMore",_PAGE:"page"},_PAGE_OPTION_LAYOUT:{_AUTO:"auto",_ALL:"all",_INPUT:"input",_RANGE_TEXT:"rangeText",_PAGES:"pages",_NAV:"nav"},_PAGE_OPTION_DEFAULT_MAX_PAGE_LINKS:6,_TYPE:{_NUMBERS:"numbers",_DOTS:"dots"},firstPage:function(){return null!=this._getData()?this._invokeDataPage(0,!1):this._getRejectPromise()},previousPage:function(){if(null!=this._getData()){var e=this._getCurrentPage();if(e>0)return this._invokeDataPage(e-1,!1)}return this._getRejectPromise()},nextPage:function(){if(null!=this._getData()){var e=this._getCurrentPage();if(this._isTotalSizeConfidenceActual()&&e+1<=this._getTotalPages()-1||this._getTotalPages()<0||!this._isTotalSizeConfidenceActual())return this._invokeDataPage(e+1,!1)}return this._getRejectPromise()},lastPage:function(){return null!=this._getData()&&this._getTotalPages()>0?this._invokeDataPage(this._getTotalPages()-1,!1):this._getRejectPromise()},page:function(e){return null!=this._getData()&&(this._isTotalSizeConfidenceActual()&&e<=this._getTotalPages()-1||this._getTotalPages()<0||!this._isTotalSizeConfidenceActual())?this._invokeDataPage(e,!1):this._getRejectPromise()},loadNext:function(){return null!=this._getData()?this._invokeDataFetchNext():this._getRejectPromise()},refresh:function(){this._super(),this._refresh()},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;var t=e.subId,i=null;if("oj-pagingcontrol-nav-input"===t)i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_CLASS)[0];else if("oj-pagingcontrol-nav-input-max"===t)i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_MAX_CLASS)[0];else if("oj-pagingcontrol-nav-input-summary"===t)i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SUMMARY_CLASS)[0];else if("oj-pagingcontrol-nav-input-summary-current"===t)i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SUMMARY_CURRENT_CLASS)[0];else if("oj-pagingcontrol-nav-input-summary-max"===t)i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SUMMARY_MAX_CLASS)[0];else if("oj-pagingcontrol-nav-first"===t)i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_FIRST_CLASS)[0];else if("oj-pagingcontrol-nav-next"===t)i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_NEXT_CLASS)[0];else if("oj-pagingcontrol-nav-previous"===t)i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_PREVIOUS_CLASS)[0];else if("oj-pagingcontrol-nav-last"===t)i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_LAST_CLASS)[0];else if("oj-pagingcontrol-nav-page"===t){var n=e.index;i=this._getPagingControlContainer().find("["+this._DATA_ATTR_PAGE_NUM+"="+n+"]")[0]}else"oj-pagingcontrol-load-more-link"===t?i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_LINK_CLASS)[0]:"oj-pagingcontrol-load-more-range"===t?i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_RANGE_CLASS)[0]:"oj-pagingcontrol-load-more-range-current"===t?i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_RANGE_CURRENT_CLASS)[0]:"oj-pagingcontrol-load-more-range-max"===t?i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_RANGE_MAX_CLASS)[0]:"oj-pagingcontrol-load-more-max-rows"===t&&(i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_MAX_ROWS_CLASS)[0]);return void 0===i&&(i=null),i},getSubIdByNode:function(e){return $(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_CLASS)?{subId:"oj-pagingcontrol-nav-input"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_MAX_CLASS)?{subId:"oj-pagingcontrol-nav-input-max"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SUMMARY_CLASS)?{subId:"oj-pagingcontrol-nav-input-summary"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SUMMARY_CURRENT_CLASS)?{subId:"oj-pagingcontrol-nav-input-summary-current"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SUMMARY_MAX_CLASS)?{subId:"oj-pagingcontrol-nav-input-summary-max"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_FIRST_CLASS)?{subId:"oj-pagingcontrol-nav-first"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_NEXT_CLASS)?{subId:"oj-pagingcontrol-nav-next"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_PREVIOUS_CLASS)?{subId:"oj-pagingcontrol-nav-previous"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_LAST_CLASS)?{subId:"oj-pagingcontrol-nav-last"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_PAGE_CLASS)?{subId:"oj-pagingcontrol-nav-page",index:$(e).attr(this._DATA_ATTR_PAGE_NUM)}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_LINK_CLASS)?{subId:"oj-pagingcontrol-load-more-link"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_RANGE_CLASS)?{subId:"oj-pagingcontrol-load-more-range"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_RANGE_CURRENT_CLASS)?{subId:"oj-pagingcontrol-load-more-range-current"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_RANGE_MAX_CLASS)?{subId:"oj-pagingcontrol-load-more-range-max"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_MAX_ROWS_CLASS)?{subId:"oj-pagingcontrol-load-more-max-rows"}:null},_ComponentCreate:function(){this._super(),this._draw(),this._on(this._events)},_AfterCreate:function(){this._super(),this._registerSwipeHandler(),this._isInitFetch=!0},_SetupResources:function(){this._super(),this._registerResizeListener(this._getPagingControlContainer()),this._registerDataSourceEventListeners(),this._isInitFetch?(this._setInitialPage(),this._isInitFetch=!1):this._refresh()},_ReleaseResources:function(){this._super(),this._unregisterDataSourceEventListeners(),this._unregisterResizeListener()},_addComponentBusyState:function(e){var t=i.Context.getContext(this.element[0]).getBusyContext(),n={description:"The component identified by '"+this.element.attr("id")+"' "+e},o=t.addBusyState(n);return this._busyStateResolvers||(this._busyStateResolvers=[]),this._busyStateResolvers.push(o),o},_removeComponentBusyState:function(e){if(this._busyStateResolvers){var t=this._busyStateResolvers.indexOf(e);t>=0&&(this._busyStateResolvers.splice(t,1),e())}},_destroy:function(){if(this._unregisterDataSourceEventListeners(),this._unregisterSwipeHandler(),this._busyStateResolvers){for(var e;e=this._busyStateResolvers.pop();)e();this._busyStateResolvers=null}this._componentDestroyed=!0},_draw:function(){var e=this.options;this.element.addClass(this._CSS_CLASSES._PAGING_CONTROL_CLASS),this.element.addClass(this._MARKER_STYLE_CLASSES._WIDGET),this._createPagingControlAccLabel(),this._createPagingControlContent(),this._mode=e.mode,e.mode==this._MODE._LOAD_MORE?(this._createPagingControlLoadMore(),this._createPagingControlLoadMoreLink(),this._createPagingControlLoadMoreRange()):this._createPagingControlNav()},_events:{"mouseup .oj-pagingcontrol-loadmore-link":function(e){this.loadNext(),$(e.target).data("_mouseup",!0),e.preventDefault()},"click .oj-pagingcontrol-loadmore-link":function(e){$(e.target).data("_mouseup")?$(e.target).data("_mouseup",!1):this.loadNext(),e.preventDefault()},"click .oj-pagingcontrol-nav-dot":function(e){if(!$(e.currentTarget).hasClass(this._MARKER_STYLE_CLASSES._DISABLED)){var t=$(e.currentTarget).attr("data-oj-pagenum"),n=this;this.page(t).then(function(e){n=null},function(e){var t=n.getTranslatedString(n._BUNDLE_KEY._ERR_PAGE_INVALID_SUMMARY);i.Logger.error(t+"\n"+e),n=null})}e.preventDefault()},"click .oj-pagingcontrol-nav-page":function(e){if(!$(e.currentTarget).hasClass(this._MARKER_STYLE_CLASSES._DISABLED)){var t=$(e.currentTarget).attr("data-oj-pagenum"),n=this;this.page(t).then(function(e){n=null},function(e){var t=n.getTranslatedString(n._BUNDLE_KEY._ERR_PAGE_INVALID_SUMMARY);i.Logger.error(t+"\n"+e),n=null})}e.preventDefault()},"click .oj-pagingcontrol-nav-first":function(e){if(!$(e.currentTarget).hasClass(this._MARKER_STYLE_CLASSES._DISABLED)){var t=this;this.firstPage().then(function(e){t=null},function(e){var n=t.getTranslatedString(t._BUNDLE_KEY._ERR_PAGE_INVALID_SUMMARY);i.Logger.error(n+"\n"+e),t=null})}e.preventDefault()},"click .oj-pagingcontrol-nav-previous":function(e){if(!$(e.currentTarget).hasClass(this._MARKER_STYLE_CLASSES._DISABLED)){var t=this;this.previousPage().then(function(e){t=null},function(e){var n=t.getTranslatedString(t._BUNDLE_KEY._ERR_PAGE_INVALID_SUMMARY);i.Logger.error(n+"\n"+e),t=null})}e.preventDefault()},"click .oj-pagingcontrol-nav-next":function(e){if(!$(e.currentTarget).hasClass(this._MARKER_STYLE_CLASSES._DISABLED)){var t=this;this.nextPage().then(function(e){t=null},function(e){var n=t.getTranslatedString(t._BUNDLE_KEY._ERR_PAGE_INVALID_SUMMARY);i.Logger.error(n+"\n"+e),t=null})}e.preventDefault()},"click .oj-pagingcontrol-nav-last":function(e){if(!$(e.currentTarget).hasClass(this._MARKER_STYLE_CLASSES._DISABLED)){var t=this;this.lastPage().then(function(e){t=null},function(e){var n=t.getTranslatedString(t._BUNDLE_KEY._ERR_PAGE_INVALID_SUMMARY);i.Logger.error(n+"\n"+e),t=null})}e.preventDefault()},"keypress .oj-pagingcontrol-nav-input":function(e){13==e.which&&e.preventDefault()},"mousedown .oj-pagingcontrol-nav-first":function(e){$(e.currentTarget).hasClass(this._MARKER_STYLE_CLASSES._DISABLED)||$(e.target).addClass(this._MARKER_STYLE_CLASSES._ACTIVE),e.preventDefault()},"mousedown .oj-pagingcontrol-nav-previous":function(e){$(e.currentTarget).hasClass(this._MARKER_STYLE_CLASSES._DISABLED)||$(e.target).addClass(this._MARKER_STYLE_CLASSES._ACTIVE),e.preventDefault()},"mousedown .oj-pagingcontrol-nav-next":function(e){$(e.currentTarget).hasClass(this._MARKER_STYLE_CLASSES._DISABLED)||$(e.target).addClass(this._MARKER_STYLE_CLASSES._ACTIVE),e.preventDefault()},"mousedown .oj-pagingcontrol-nav-last":function(e){$(e.currentTarget).hasClass(this._MARKER_STYLE_CLASSES._DISABLED)||$(e.target).addClass(this._MARKER_STYLE_CLASSES._ACTIVE),e.preventDefault()},"mouseup .oj-pagingcontrol-nav-first":function(e){$(e.target).removeClass(this._MARKER_STYLE_CLASSES._ACTIVE),e.preventDefault()},"mouseup .oj-pagingcontrol-nav-previous":function(e){$(e.target).removeClass(this._MARKER_STYLE_CLASSES._ACTIVE),e.preventDefault()},"mouseup .oj-pagingcontrol-nav-next":function(e){$(e.target).removeClass(this._MARKER_STYLE_CLASSES._ACTIVE),e.preventDefault()},"mouseup .oj-pagingcontrol-nav-last":function(e){$(e.target).removeClass(this._MARKER_STYLE_CLASSES._ACTIVE),e.preventDefault()},"mouseleave .oj-pagingcontrol-nav-first":function(e){$(e.target).removeClass(this._MARKER_STYLE_CLASSES._ACTIVE),e.preventDefault()},"mouseleave .oj-pagingcontrol-nav-previous":function(e){$(e.target).removeClass(this._MARKER_STYLE_CLASSES._ACTIVE),e.preventDefault()},"mouseleave .oj-pagingcontrol-nav-next":function(e){$(e.target).removeClass(this._MARKER_STYLE_CLASSES._ACTIVE),e.preventDefault()},"mouseleave .oj-pagingcontrol-nav-last":function(e){$(e.target).removeClass(this._MARKER_STYLE_CLASSES._ACTIVE),e.preventDefault()}},_refresh:function(e){this._data!=this.options.data&&(this._clearCachedDataMetadata(),this._setInitialPage());var t=0,i=0;null!=this._data&&(i=this._data.getStartItemIndex()),null!=this._data&&0!=this._data.totalSize()&&this._data.getEndItemIndex()>=0&&(t=this._data.getEndItemIndex()-i+1),this._mode=this.options.mode,this.options.mode==this._MODE._LOAD_MORE?this._refreshPagingControlLoadMore(t,i):this._refreshPagingControlNav(t,i)},_setOption:function(e,t){if(this._superApply(arguments),this._invokeDataPage(0,!0).then(function(e){},function(e){i.Logger.error(e)}),this.options.mode!=this._MODE._LOAD_MORE&&"pageOptions"==e){var n=this._getPagingControlContent();null!=n&&(this._unregisterChildStateListeners(n),this._unregisterSwipeHandler(),n.empty()),this._clearCachedDomPagingControlNav(),this._createPagingControlNav(),this._registerSwipeHandler()}this._queueRefresh()},_clearCachedDataMetadata:function(){null!=this._data&&this._unregisterDataSourceEventListeners(),this._data=null},_clearCachedDomLoadMore:function(){this._cachedDomPagingControlLoadMore=null,this._cachedDomPagingControlLoadMoreLink=null,this._cachedDomPagingControlLoadMoreRange=null},_clearCachedDomPagingControlNav:function(){this._cachedDomPagingControlNav=null,this._cachedDomPagingControlNavInput=null,this._cachedDomPagingControlNavInputSummary=null},_createNavArrow:function(e,t,i,n,o,s){var r=$(document.createElement("a"));r.attr("role","button"),r.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_ARROW_CLASS),r.addClass(e),r.addClass(t),r.addClass(this._CSS_CLASSES._WIDGET_ICON_CLASS),r.addClass(this._MARKER_STYLE_CLASSES._CLICKABLE_ICON),r.addClass(this._MARKER_STYLE_CLASSES._DISABLED),r.attr("aria-disabled","true");var a=this.getTranslatedString(i);this._AddHoverable(r),this._focusable({element:r,applyHighlight:!0}),r.attr("title",a),r.attr(this._TAB_INDEX,"0"),r.attr("href","#"),r.attr("oncontextmenu","return false;");var l=this.getTranslatedString(n);r.attr("aria-label",l);var u=this._createAccLabelSpan(l,o);return r.append(u),s&&r.css("display","block"),r},_disableNavArrow:function(e,t){t?(e.addClass(this._MARKER_STYLE_CLASSES._DISABLED),e.removeClass(this._MARKER_STYLE_CLASSES._ENABLED),e.removeClass(this._MARKER_STYLE_CLASSES._FOCUS_HIGHLIGHT),e.removeClass(this._MARKER_STYLE_CLASSES._FOCUS),e.attr("aria-disabled","true"),e.attr("tabindex","-1")):(e.addClass(this._MARKER_STYLE_CLASSES._ENABLED),e.removeClass(this._MARKER_STYLE_CLASSES._DISABLED),e.removeAttr("aria-disabled"),e.attr(this._TAB_INDEX,"0"))},_getCurrentPage:function(){var e=this._getData(),t=0;return null!=e&&(t=e.getPage()),t},_getData:function(){return this._data||null==this.options.data||(this._data=this.options.data,this._dataMetadata=this.options.data,this._registerDataSourceEventListeners()),this._data},_getItemRange:function(e,t){var i=t>=0?t:0,n=$(document.createElement("span")),o=$(document.createElement("span"));this.options.mode==this._MODE._LOAD_MORE?o.addClass(this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_RANGE_CURRENT_CLASS):o.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SUMMARY_CURRENT_CLASS),n.append(o);var s=this._getData();if(null!=s&&null!=s.totalSize()&&null!=e){var r=this.getTranslatedString(this._BUNDLE_KEY._MSG_ITEM_RANGE_CURRENT_SINGLE,{pageFrom:i}),a=parseInt(t,10)+parseInt(e,10);if(i=a>0?i+1:0,-1!=s.totalSize()){if(i==(a=a>s.totalSize()?s.totalSize():a))r=this.getTranslatedString(this._BUNDLE_KEY._MSG_ITEM_RANGE_CURRENT_SINGLE,{pageFrom:i});else{if(i>a)return n;r=this.getTranslatedString(this._BUNDLE_KEY._MSG_ITEM_RANGE_CURRENT,{pageFrom:i,pageTo:a})}var l=this.getTranslatedString(this._BUNDLE_KEY._MSG_ITEM_RANGE_OF),u=null;"atLeast"==s.totalSizeConfidence()?u=this.getTranslatedString(this._BUNDLE_KEY._MSG_ITEM_RANGE_ATLEAST):"estimate"==s.totalSizeConfidence()&&(u=this.getTranslatedString(this._BUNDLE_KEY._MSG_ITEM_RANGE_APPROX));var h=$(document.createElement("span"));null==u?h.text(" "+l+" "):h.text(" "+u+" "),n.append(h);var d=$(document.createElement("span"));this.options.mode==this._MODE._LOAD_MORE?d.addClass(this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_RANGE_MAX_CLASS):d.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SUMMARY_MAX_CLASS),d.text(s.totalSize()),n.append(d);var c=this.getTranslatedString(this._BUNDLE_KEY._MSG_ITEM_RANGE_ITEMS);(p=$(document.createElement("span"))).text(" "+c),n.append(p)}else{var p;r=0==e?this.getTranslatedString(this._BUNDLE_KEY._MSG_ITEM_RANGE_CURRENT_SINGLE,{pageFrom:0}):this.getTranslatedString(this._BUNDLE_KEY._MSG_ITEM_RANGE_CURRENT,{pageFrom:i,pageTo:a}),c=this.getTranslatedString(this._BUNDLE_KEY._MSG_ITEM_RANGE_ITEMS),(p=$(document.createElement("span"))).text(" "+c),n.append(p)}o.text(r)}return n},_getMaxPageLinks:function(){var e=this.options.pageOptions.maxPageLinks;return this.options.pageOptions.type==this._TYPE._DOTS?e=Number.MAX_VALUE:e||(e=this._PAGE_OPTION_DEFAULT_MAX_PAGE_LINKS),e},_getMaxPageVal:function(e){var t=0;if(this._getTotalPages()>0&&this._isTotalSizeConfidenceActual())t=this._getTotalPages();else if(e>0){var i=this._getData();t=null==i||"atLeast"!=i.totalSizeConfidence()&&"estimate"!=i.totalSizeConfidence()?this._getCurrentPage()+2:this._getTotalPages()+1}else t=this._getCurrentPage()+1;return t},_getRejectPromise:function(){return Promise.reject()},_getTotalPages:function(){var e=this._getData(),t=0;return null!=e&&(t=e.getPageCount()),t=t>=-1?t:0},_handleDataFetchEnd:function(e){var t=$(document.activeElement);if(t.hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_PAGE_CLASS)){var i=parseInt(t.attr("data-oj-pagenum"),10),n=this;setTimeout(function(){if(i>=0){var e=i+1,t=i-1,o=n._getPagingControlContent().find("a[data-oj-pagenum="+e+"]");if(null!=o&&o.length>0)o.focus();else{var s=n._getPagingControlContent().find("a[data-oj-pagenum="+t+"]");null!=s&&s.length>0&&s.focus()}}i=null,n=null},100)}else t.hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_FIRST_CLASS)?(n=this,setTimeout(function(){n._getPagingControlContent().find("."+n._CSS_CLASSES._PAGING_CONTROL_NAV_NEXT_CLASS).focus(),n=null},100)):t.hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_PREVIOUS_CLASS)?(n=this,setTimeout(function(){var e=n._getPagingControlContent().find("."+n._CSS_CLASSES._PAGING_CONTROL_NAV_PREVIOUS_CLASS);e.hasClass(n._MARKER_STYLE_CLASSES._DISABLED)?n._getPagingControlContent().find("."+n._CSS_CLASSES._PAGING_CONTROL_NAV_NEXT_CLASS).focus():e.focus(),n=null},100)):t.hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_NEXT_CLASS)?(n=this,setTimeout(function(){var e=n._getPagingControlContent().find("."+n._CSS_CLASSES._PAGING_CONTROL_NAV_NEXT_CLASS);e.hasClass(n._MARKER_STYLE_CLASSES._DISABLED)?n._getPagingControlContent().find("."+n._CSS_CLASSES._PAGING_CONTROL_NAV_PREVIOUS_CLASS).focus():e.focus(),n=null},100)):t.hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_LAST_CLASS)?(n=this,setTimeout(function(){n._getPagingControlContent().find("."+n._CSS_CLASSES._PAGING_CONTROL_NAV_PREVIOUS_CLASS).focus(),n=null},100)):t.hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_CLASS)&&(n=this,setTimeout(function(){n._getPagingControlContent().find("."+n._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_CLASS).focus(),n=null},100));this._queueRefresh()},_handleDataPage:function(e){e.page!=e.previousPage&&this._queueRefresh()},_handleDataReset:function(e){this._invokeDataPage(0,!1).then(function(e){},function(e){i.Logger.error(e)})},_handleDataRefresh:function(e){this._queueRefresh()},_handleDataSort:function(e){this.options.mode==this._MODE._LOAD_MORE&&this._handleDataReset(e)},_handleDataRowAdd:function(e){if(this._isOperationOnCurrentPage(e))return this.options.mode==this._MODE._PAGE?void this._invokeDataPage(this._getCurrentPage(),!0).then(function(e){},function(e){i.Logger.error(e)}):void this._invokeDataFetchCurrent();this._queueRefresh()},_handleDataRowRemove:function(e){if(this.options.mode==this._MODE._PAGE){if(this._getTotalPages()>0&&this._getCurrentPage()>this._getTotalPages()-1)return void this._invokeDataPage(this._getTotalPages()-1,!0).then(function(e){},function(e){i.Logger.error(e)});if(this._isOperationOnCurrentPage(e))return void this._invokeDataPage(this._getCurrentPage(),!0).then(function(e){},function(e){i.Logger.error(e)})}else if(this._isOperationOnCurrentPage(e))return void this._invokeDataFetchCurrent();this._queueRefresh()},_handlePageChange:function(e,t){if("value"==t.option){var n=t.value;if(n!=this._getCurrentPage()+1&&!isNaN(n)&&n>0){n=Math.round(n);var o=this;this.page(n-1).then(function(e){o=null},function(e){var t=o.getTranslatedString(o._BUNDLE_KEY._ERR_PAGE_INVALID_SUMMARY);i.Logger.error(t+"\n"+e),o=null})}}},_invokeDataPage:function(e,t){try{e=parseInt(e,10)}catch(e){return Promise.reject(e)}return this._currentStartIndex=0,this._resetPagingControlNavInput(),t?(this._queuePageFetch(e),Promise.resolve()):this._invokeDataSetPage(e)},_invokeDataSetPage:function(e){var t=this._getData(),i=this;return new Promise(function(n,o){if(null!=t){var s=i._addComponentBusyState("is setting page.");t.setPage(e,{pageSize:i.options.pageSize}).then(function(e){i._removeComponentBusyState(s),i=null,s=null,n(null)},function(e){i._removeComponentBusyState(s),i=null,s=null,o(e)}),t=null}else i=null,n(null)})},_invokeDataFetchNext:function(){var e=this.options.pageSize;return this._currentStartIndex?this._currentStartIndex=this._currentStartIndex+e:this._currentStartIndex=e,this._invokeDataFetch({startIndex:this._currentStartIndex,pageSize:e})},_invokeDataFetch:function(e){var t=this._getData();if(!this._isTotalSizeConfidenceActual()||t.totalSize()>this._currentStartIndex&&this._isTotalSizeConfidenceActual()){var i=this;return new Promise(function(n,o){var s=i._addComponentBusyState("is fetching data.");t.fetch(e).then(function(e){i._removeComponentBusyState(s),i=null,s=null,n(e)},function(e){i._removeComponentBusyState(s),i=null,s=null,o(null)}),t=null})}return Promise.resolve()},_invokeDataFetchCurrent:function(){var e=this.options.pageSize;return this._invokeDataFetch({startIndex:0,pageSize:this._currentStartIndex+e})},_isOperationOnCurrentPage:function(e){if(null==e)return!1;var t=this._getData(),i=t.getStartItemIndex();this.options.mode==this._MODE._LOAD_MORE&&(i=0);var n,o=t.getEndItemIndex();if(null!=e.index){if((n=e.index)>=i&&n<=o)return!0}else if(null!=e.indexes){var s;for(s=0;s<e.indexes.length;s++)if((n=e.indexes[s])>=i&&n<=o)return!0}return!1},_isTotalSizeConfidenceActual:function(){var e=this._getData();return null!=e&&"actual"==e.totalSizeConfidence()},_queuePageFetch:function(e){var t=this;this._pendingPageFetch||(this._pageFetchCount=0,this._pendingPageFetch=Promise.resolve()),this._pageFetchCount++,this._pageFetchLatestPage=e,this._pendingPageFetch=this._pendingPageFetch.then(function(){t._pageFetchCount--,0!=t._pageFetchCount||t._componentDestroyed||(t._pendingPageFetch=void 0,t._invokeDataSetPage(t._pageFetchLatestPage).then(function(){t=null},function(e){t._pageFetchCount--,t._pageFetchCount<=0&&(t._pendingPageFetch=void 0,i.Logger.error(e),t=null)}))},function(e){t._pageFetchCount--,t._pageFetchCount<=0&&(t._pendingPageFetch=void 0,i.Logger.error(e),t=null)})},_queueRefresh:function(){var e=this;this._pendingRefreshes||(this._refreshCount=0,this._pendingRefreshes=Promise.resolve(),this._setComponentNotReady()),this._refreshCount++,this._pendingRefreshes=this._pendingRefreshes.then(function(){e._refreshCount--,0==e._refreshCount&&(e._pendingRefreshes=void 0,e._componentDestroyed||(e._refresh(),e._trigger("ready")),e._setComponentReady(),e=null)},function(t){e._refreshCount--,0==e._refreshCount&&(e._pendingRefreshes=void 0,i.Logger.error(t),e._setComponentReady(),e=null)})},_refreshPagingControlLoadMore:function(e,t){var i=this._getData(),n=this._getPagingControlLoadMore(),o=t+e,s=!(null!=i&&(o==i.totalSize()&&this._isTotalSizeConfidenceActual()||0==i.totalSize()));if(!n||s){var r=this._getPagingControlContent();null!=r&&r.empty(),this._clearCachedDomLoadMore(),n=this._createPagingControlLoadMore(),o=-1,null!=e&&(o=t+e),o<0||o<this.options.loadMoreOptions.maxCount?(this._createPagingControlLoadMoreLink(),this._createPagingControlLoadMoreRange(e,t)):this._createPagingControlLoadMoreMaxRows()}s||n.css("display","none")},_refreshPagingControlNav:function(e,t){var i=this.options.overflow;if(this._refreshPagingControlNavMaxPageVal(e,t),this._refreshPagingControlNavLabel(),this._refreshPagingControlNavInput(),this._refreshPagingControlNavSummaryLabel(e,t),this._refreshPagingControlNavPages(e,t),this._refreshPagingControlNavArrows(e,t),"fit"==i){var n=this.element.width(),o=this._getPagingControlNavArrowSection(),s=this._getPagingControlNavInputSection(),r=this._getPagingControlNavPageLinks(),a=this._getPagingControlNavInputSummary(),l=null!=o?o[0].offsetWidth:0,u=null!=s?s[0].offsetWidth:0,h=null!=r?r.width():0,d=null!=a?a.width():0,c=l+u+d;c>n?c-h<=n?r.css("display","none"):c-h-d<=n?(null!=r&&r.css("display","none"),null!=a&&a.css("display","none")):(null!=r&&r.css("display","none"),null!=a&&a.css("display","none"),null!=o&&o.css("display","none")):c>0&&(null!=r&&r.css("display",""),null!=a&&a.css("display",""),null!=o&&o.css("display",""))}},_refreshPagingControlNavArrows:function(e,t){var i=this.options.pageSize,n=this._getPagingControlNavArrowSection(),o=n.children("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_FIRST_CLASS);if(o&&o.length>0){o=$(o[0]);var s=this.getTranslatedString(this._BUNDLE_KEY._TIP_NAV_FIRST_PAGE);o.attr("title",s),this._disableNavArrow(o,0==this._getCurrentPage())}var r=n.children("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_PREVIOUS_CLASS);if(r&&r.length>0){r=$(r[0]);var a=this.getTranslatedString(this._BUNDLE_KEY._TIP_NAV_PREVIOUS_PAGE);r.attr("title",a),this._disableNavArrow(r,0==this._getCurrentPage())}var l=n.children("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_LAST_CLASS);if(l&&l.length>0){l=$(l[0]);var u=this.getTranslatedString(this._BUNDLE_KEY._TIP_NAV_LAST_PAGE);l.attr("title",u),this._disableNavArrow(l,this._getCurrentPage()==this._getTotalPages()-1||this._getTotalPages()<=0||!this._isTotalSizeConfidenceActual())}var h=n.children("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_NEXT_CLASS);if(h&&h.length>0){h=$(h[0]);var d=this.getTranslatedString(this._BUNDLE_KEY._TIP_NAV_NEXT_PAGE);h.attr("title",d),this._disableNavArrow(h,this._getCurrentPage()==this._getTotalPages()-1&&this._isTotalSizeConfidenceActual()||0===this._getTotalPages()||this._getTotalPages()<0&&0===e||this._getTotalPages()<0&&e<i)}},_refreshPagingControlNavPages:function(e,t){var i=this._getPagingControlNav().find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_PAGES_SECTION_CLASS);null!=i&&i.length>0&&(i=$(i.get(0)),this._unregisterChildStateListeners(i),i.empty(),this._createPagingControlNavPages(i,this._getMaxPageLinks(),e,t))},_refreshPagingControlNavLabel:function(){var e=this._getPagingControlNavInputSection();if(null!=e){var t=e.children("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_LABEL_CLASS);if(null!=t&&t.length>0){t=$(t[0]);var i=this.getTranslatedString(this._BUNDLE_KEY._LABEL_NAV_INPUT_PAGE);t.text(i)}}},_refreshPagingControlNavInput:function(){var e=this._getPagingControlNavInput();if(null!=e){var t=this.getTranslatedString(this._BUNDLE_KEY._TIP_NAV_INPUT_PAGE);e.attr("title",t),e.ojInputText("option","title",t)}},_refreshPagingControlNavSummaryLabel:function(e,t){var i=this._getPagingControlNav().children("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SUMMARY_CLASS);if(null!=i&&i.length>0){var n=this._getItemRange(e,t);(i=$(i.get(0))).empty(),n.text().length>0&&(i.append("("),i.append(n),i.append(")"))}},_refreshPagingControlNavMaxPageVal:function(e,t){var i=this._getMaxPageVal(e),n=this._getPagingControlNav().find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_MAX_CLASS);if(null!=n&&n.length>0)if(n=$(n.get(0)),this._getTotalPages()>0&&this._isTotalSizeConfidenceActual()){var o=this.getTranslatedString(this._BUNDLE_KEY._LABEL_NAV_INPUT_PAGE_MAX,{pageMax:i});n.text(o)}else n.empty();else{var s=this._getPagingControlNavInputSection();null!=s&&this._getTotalPages()>0&&this._isTotalSizeConfidenceActual()&&i>=this._getCurrentPage()+1&&((n=$(document.createElement("span"))).addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_MAX_CLASS),n.addClass("oj-label-inline"),s.append(n),o=this.getTranslatedString(this._BUNDLE_KEY._LABEL_NAV_INPUT_PAGE_MAX,{pageMax:i}),n.text(o))}var r=this._getPagingControlNav().find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_CLASS);if(null!=r&&r.length>0){(r=$(r.get(0))).ojInputText(),r.ojInputText("option","validators",[{type:"numberRange",options:{min:1,max:i}}]);var a=r.ojInputText("option","messagesShown");null!=a&&0!=a.length||this._resetPagingControlNavInput(),1==i?r.ojInputText("option","readOnly",!0):r.ojInputText("option","readOnly",!1)}},_registerDataSourceEventListeners:function(){var e,t,n=this._getData();if(null!=n)for(this._unregisterDataSourceEventListeners(),this._dataSourceEventHandlers=[],this._dataSourceEventHandlers.push({eventType:i.PagingModel.EventType.PAGE,eventHandler:this._handleDataPage.bind(this)}),this._dataSourceEventHandlers.push({eventType:i.PagingModel.EventType.PAGECOUNT,eventHandler:this._handleDataRefresh.bind(this)}),this._dataSourceEventHandlers.push({eventType:i.PagingTableDataSource.EventType.ADD,eventHandler:this._handleDataRowAdd.bind(this)}),this._dataSourceEventHandlers.push({eventType:i.PagingTableDataSource.EventType.REMOVE,eventHandler:this._handleDataRowRemove.bind(this)}),this._dataSourceEventHandlers.push({eventType:i.PagingTableDataSource.EventType.RESET,eventHandler:this._handleDataReset.bind(this)}),this._dataSourceEventHandlers.push({eventType:i.PagingTableDataSource.EventType.REFRESH,eventHandler:this._handleDataRefresh.bind(this)}),this._dataSourceEventHandlers.push({eventType:i.PagingTableDataSource.EventType.SYNC,eventHandler:this._handleDataFetchEnd.bind(this)}),this._dataSourceEventHandlers.push({eventType:i.PagingTableDataSource.EventType.SORT,eventHandler:this._handleDataSort.bind(this)}),e=0;e<this._dataSourceEventHandlers.length;e++)(t=n.on(this._dataSourceEventHandlers[e].eventType,this._dataSourceEventHandlers[e].eventHandler))&&(this._dataSourceEventHandlers[e].eventHandler=t)},_registerResizeListener:function(e){if(!this._resizeListener){var t=this;this._resizeListener=function(e,i){t._queueRefresh()}}this._resizeListenerElement||(i.DomUtils.addResizeListener(e[0],this._resizeListener,50),this._resizeListenerElement=e)},_registerSwipeHandler:function(){if(i.DomUtils.isTouchSupported()&&this.options.mode==this._MODE._PAGE){var e=this._getPagingControlNav();if(null!=e){var t="vertical"==this.options.pageOptions.orientation,n=this;if(t){var o={recognizers:[[Hammer.Swipe,{direction:Hammer.DIRECTION_VERTICAL}]]};this._hammerSwipeUp=e.ojHammer(o).on("swipeup",function(e){e.preventDefault(),n.nextPage()}),this._hammerSwipeDown=e.ojHammer(o).on("swipedown",function(e){e.preventDefault(),n.previousPage()})}else o={recognizers:[[Hammer.Swipe,{direction:Hammer.DIRECTION_HORIZONTAL}]]},this._hammerSwipeLeft=e.ojHammer(o).on("swipeleft",function(e){e.preventDefault(),n.nextPage()}),this._hammerSwipeRight=e.ojHammer(o).on("swiperight",function(e){e.preventDefault(),n.previousPage()})}}},_resetPagingControlNavInput:function(){var e=this._getPagingControlNavInput();if(null!=e&&e.hasClass("oj-component-initnode"))try{e.ojInputText("option","value",this._getCurrentPage()+1)}catch(e){}},_setComponentNotReady:function(){this._readyResolveFunc||(this._readyResolveFunc=this._addComponentBusyState("is being loaded."))},_setComponentReady:function(){this._readyResolveFunc&&(this._removeComponentBusyState(this._readyResolveFunc),this._readyResolveFunc=null)},_setInitialPage:function(){var e=this._getCurrentPage();e>0?this._invokeDataPage(e,!0).then(function(e){},function(e){i.Logger.error(e)}):this._invokeDataPage(0,!0).then(function(e){},function(e){i.Logger.error(e)})},_unregisterDataSourceEventListeners:function(){var e,t=this._getData();if(null!=this._dataSourceEventHandlers&&null!=t)for(e=0;e<this._dataSourceEventHandlers.length;e++)t.off(this._dataSourceEventHandlers[e].eventType,this._dataSourceEventHandlers[e].eventHandler)},_unregisterChildStateListeners:function(e){var t=this;e.find("*").each(function(){t._UnregisterChildNode(this)}),t=null},_unregisterResizeListener:function(){null!=this._resizeListenerElement&&(i.DomUtils.removeResizeListener(this._resizeListenerElement,this._resizeListener),this._resizeListenerElement=null)},_unregisterSwipeHandler:function(){i.DomUtils.isTouchSupported()&&("vertical"==this.options.pageOptions.orientation?(null!=this._hammerSwipeUp&&(this._hammerSwipeUp.off("swipeup"),this._hammerSwipeUp=null),null!=this._hammerSwipeDown&&(this._hammerSwipeDown.off("swipedown"),this._hammerSwipeDown=null)):(null!=this._hammerSwipeLeft&&(this._hammerSwipeLeft.off("swipeleft"),this._hammerSwipeLeft=null),null!=this._hammerSwipeRight&&(this._hammerSwipeRight.off("swiperight"),this._hammerSwipeRight=null)))},_createAccLabelSpan:function(e,t){var i=$(document.createElement("span"));return i.addClass(t),i.addClass(this._CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),i.text(e),i},_createPagingControlAccLabel:function(){var e=this._getPagingControlContainer(),t=this.getTranslatedString(this._BUNDLE_KEY._LABEL_ACC_PAGING),i=this._createAccLabelSpan(t,this._CSS_CLASSES._PAGING_CONTROL_ACC_LABEL_CLASS),n=this.element.attr("id")+"_oj_pgCtrl_acc_label";return i.attr("id",n),e.append(i),i},_createPagingControlAccNavPageLabel:function(){var e=this.getTranslatedString(this._BUNDLE_KEY._LABEL_ACC_NAV_PAGE);return this._createAccLabelSpan(e,this._CSS_CLASSES._PAGING_CONTROL_NAV_PAGE_ACC_LABEL_CLASS)},_createPagingControlContent:function(){var e=this._getPagingControlContainer(),t=$(document.createElement("div"));t.addClass(this._CSS_CLASSES._PAGING_CONTROL_CONTENT_CLASS);var i=this._getPagingControlAccLabel().attr("id");return t.attr("role","navigation"),t.attr("aria-labelledby",i),e.append(t),t},_createPagingControlLoadMore:function(){var e=this._getPagingControlContent(),t=$(document.createElement("div"));return t.addClass(this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_CLASS),e.append(t),t},_createPagingControlLoadMoreLink:function(){var e=this._getPagingControlLoadMore(),t=$(document.createElement("a"));t.addClass(this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_LINK_CLASS);var i=this.getTranslatedString(this._BUNDLE_KEY._LABEL_LOAD_MORE);return t.text(i),t.attr(this._TAB_INDEX,"0"),t.attr("href","#"),e.append(t),t},_createPagingControlLoadMoreMaxRows:function(){var e=this._getPagingControlLoadMore(),t=$(document.createElement("span"));t.addClass(this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_MAX_ROWS_CLASS);var i=this.getTranslatedString(this._BUNDLE_KEY._LABEL_LOAD_MORE_MAX_ROWS,{maxRows:this.options.loadMoreOptions.maxCount});return t.text(i),e.append(t),t},_createPagingControlLoadMoreRange:function(e,t){var i=this._getPagingControlLoadMore(),n=$(document.createElement("span"));n.addClass(this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_RANGE_CLASS);var o=this._getItemRange(e,t);return n.append(o),i.append(n),n},_createPagingControlNav:function(e,t){var i=this.options,n="vertical"==this.options.pageOptions.orientation,o="dots"==this.options.pageOptions.type,s=i.pageOptions.layout;null==s&&(s=[this._PAGE_OPTION_LAYOUT._AUTO]);var r=this._getPagingControlContent(),a=$(document.createElement("div"));if(a.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_CLASS),r.append(a),-1!=$.inArray(this._PAGE_OPTION_LAYOUT._AUTO,s)&&!o||-1!=$.inArray(this._PAGE_OPTION_LAYOUT._ALL,s)||-1!=$.inArray(this._PAGE_OPTION_LAYOUT._INPUT,s)){var l=$(document.createElement("div"));l.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SECTION_CLASS),a.append(l);var u=$(document.createElement("label"));u.attr("for",this.element.attr("id")+"_nav_input"),u.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_LABEL_CLASS),u.addClass("oj-label-inline");var h=this.getTranslatedString(this._BUNDLE_KEY._LABEL_NAV_INPUT_PAGE);u.text(h),l.append(u);var d=$(document.createElement("input"));d.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_CLASS);var c=this.getTranslatedString(this._BUNDLE_KEY._TIP_NAV_INPUT_PAGE);d.attr("id",this.element.attr("id")+"_nav_input"),d.attr("title",c),d.attr(this._TAB_INDEX,"0"),d.val(this._getCurrentPage()+1),l.append(d);var p=this._getMaxPageVal(e);if(this._getTotalPages()>0&&this._isTotalSizeConfidenceActual()){var _=$(document.createElement("span"));_.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_MAX_CLASS),_.addClass("oj-label-inline");var m=this.getTranslatedString(this._BUNDLE_KEY._LABEL_NAV_INPUT_PAGE_MAX,{pageMax:p});_.text(m),l.append(_)}d.ojInputText({displayOptions:{messages:["notewindow"],converterHint:["notewindow"],validatorHint:["notewindow"]},rootAttributes:{style:"width: auto; min-width: 0;"},validators:[{type:"numberRange",options:{min:1,max:p}}]}).attr("data-oj-internal",""),d.on({ojoptionchange:this._handlePageChange.bind(this)})}if(-1!=$.inArray(this._PAGE_OPTION_LAYOUT._AUTO,s)&&!o||-1!=$.inArray(this._PAGE_OPTION_LAYOUT._ALL,s)||-1!=$.inArray(this._PAGE_OPTION_LAYOUT._RANGE_TEXT,s)){var g=$(document.createElement("span"));g.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SUMMARY_CLASS),g.addClass("oj-label-inline");var f=this._getItemRange(e,t);f.text().length>0&&(g.append("("),g.append(f),g.append(")")),a.append(g)}var v=$(document.createElement("div"));if(v.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_ARROW_SECTION_CLASS),a.append(v),-1!=$.inArray(this._PAGE_OPTION_LAYOUT._AUTO,s)&&!o||-1!=$.inArray(this._PAGE_OPTION_LAYOUT._ALL,s)||-1!=$.inArray(this._PAGE_OPTION_LAYOUT._NAV,s)){var C=this._createNavArrow(this._CSS_CLASSES._PAGING_CONTROL_NAV_FIRST_CLASS,n?this._CSS_CLASSES._PAGING_CONTROL_NAV_FIRST_VERTICAL_ICON_CLASS:this._CSS_CLASSES._PAGING_CONTROL_NAV_FIRST_ICON_CLASS,this._BUNDLE_KEY._TIP_NAV_FIRST_PAGE,this._BUNDLE_KEY._LABEL_ACC_NAV_FIRST_PAGE,this._CSS_CLASSES._PAGING_CONTROL_NAV_FIRST_ACC_LABEL_CLASS,n);v.append(C);var y=this._createNavArrow(this._CSS_CLASSES._PAGING_CONTROL_NAV_PREVIOUS_CLASS,n?this._CSS_CLASSES._PAGING_CONTROL_NAV_PREVIOUS_VERTICAL_ICON_CLASS:this._CSS_CLASSES._PAGING_CONTROL_NAV_PREVIOUS_ICON_CLASS,this._BUNDLE_KEY._TIP_NAV_PREVIOUS_PAGE,this._BUNDLE_KEY._LABEL_ACC_NAV_PREVIOUS_PAGE,this._CSS_CLASSES._PAGING_CONTROL_NAV_PREVIOUS_ACC_LABEL_CLASS,n);v.append(y)}if(-1!=$.inArray(this._PAGE_OPTION_LAYOUT._AUTO,s)||-1!=$.inArray(this._PAGE_OPTION_LAYOUT._ALL,s)||-1!=$.inArray(this._PAGE_OPTION_LAYOUT._PAGES,s)){var b=$(document.createElement("div"));b.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_PAGES_SECTION_CLASS),v.append(b),this._createPagingControlNavPages(b,this._getMaxPageLinks(),e,t)}if(-1!=$.inArray(this._PAGE_OPTION_LAYOUT._AUTO,s)&&!o||-1!=$.inArray(this._PAGE_OPTION_LAYOUT._ALL,s)||-1!=$.inArray(this._PAGE_OPTION_LAYOUT._NAV,s)){var S=this._createNavArrow(this._CSS_CLASSES._PAGING_CONTROL_NAV_NEXT_CLASS,n?this._CSS_CLASSES._PAGING_CONTROL_NAV_NEXT_VERTICAL_ICON_CLASS:this._CSS_CLASSES._PAGING_CONTROL_NAV_NEXT_ICON_CLASS,this._BUNDLE_KEY._TIP_NAV_NEXT_PAGE,this._BUNDLE_KEY._LABEL_ACC_NAV_NEXT_PAGE,this._CSS_CLASSES._PAGING_CONTROL_NAV_NEXT_ACC_LABEL_CLASS,n);v.append(S);var E=this._createNavArrow(this._CSS_CLASSES._PAGING_CONTROL_NAV_LAST_CLASS,n?this._CSS_CLASSES._PAGING_CONTROL_NAV_LAST_VERTICAL_ICON_CLASS:this._CSS_CLASSES._PAGING_CONTROL_NAV_LAST_ICON_CLASS,this._BUNDLE_KEY._TIP_NAV_LAST_PAGE,this._BUNDLE_KEY._LABEL_ACC_NAV_LAST_PAGE,this._CSS_CLASSES._PAGING_CONTROL_NAV_LAST_ACC_LABEL_CLASS,n);v.append(E)}return a},_createPagingControlNavPages:function(e,t,i,n){if(t<5){var o=this.getTranslatedString(this._BUNDLE_KEY._ERR_MAXPAGELINKS_INVALID_SUMMARY),s=this.getTranslatedString(this._BUNDLE_KEY._ERR_MAXPAGELINKS_INVALID_DETAIL);throw new Error(o+"\n"+s)}var r=$(document.createElement("div"));r.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_PAGES_LINKS_CLASS),e.append(r);var a=this._getTotalPages(),l=this._getCurrentPage(),u=this.options.pageSize,h=t,d=[];if(l>=0){var c;if(this._isTotalSizeConfidenceActual()&&a<=h)for(d[0]=0,c=1;c<a;c++)d[c]=c;else{d.push(0),0!=l&&d.push(l),l!=a-1&&this._isTotalSizeConfidenceActual()&&d.push(a-1),h-=d.length;var p=l-1,_=1;for(!this._isTotalSizeConfidenceActual()||l!=a-1&&l!=a-2||(_=0);h>_&&p>=1;)d.push(p),p--,h--;var m=l+1;for(-1==a&&(h=i>0&&i>=u?1:0);h>0&&(m<=a||-1==a);)d.push(m),m++,h--}for(d.sort(function(e,t){return e-t}),c=0;c<d.length;c++){var g=d[c];this._createPagingControlNavPage(r,g),c!=d.length-1&&g!=d[c+1]-1&&this._createPagingControlNavPage(r,-1)}!this._isTotalSizeConfidenceActual()&&i>=u&&this._createPagingControlNavPage(r,-1)}return r},_createPagingControlNavPage:function(e,t){var i=this._getCurrentPage(),n=null,o="rtl"===this._GetReadingDirection(),s="vertical"==this.options.pageOptions.orientation,r="dots"==this.options.pageOptions.type;if(-1==t)(n=$(document.createElement("span"))).addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_PAGE_ELLIPSIS_CLASS),n.text("..."),e.append(n);else{i==t?((n=$(document.createElement("div"))).addClass(this._MARKER_STYLE_CLASSES._SELECTED),n.addClass(this._MARKER_STYLE_CLASSES._ACTIVE),n.addClass(this._MARKER_STYLE_CLASSES._DISABLED),n.removeClass(this._MARKER_STYLE_CLASSES._ENABLED)):((n=$(document.createElement("a"))).removeClass(this._MARKER_STYLE_CLASSES._SELECTED),n.removeClass(this._MARKER_STYLE_CLASSES._ACTIVE),n.removeClass(this._MARKER_STYLE_CLASSES._DISABLED),n.addClass(this._MARKER_STYLE_CLASSES._ENABLED),n.attr(this._TAB_INDEX,"0"),n.attr("href","#")),n.attr("data-oj-pagenum",t),r?n.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_DOT_CLASS):n.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_PAGE_CLASS);var a=this.getTranslatedString(this._BUNDLE_KEY._TIP_NAV_PAGE_LINK,{pageNum:(t+1).toString()});this._AddHoverable(n),this._focusable({element:n,applyHighlight:!0}),n.attr("title",a),n.attr("oncontextmenu","return false;");var l=this._createPagingControlAccNavPageLabel();n.append(l);var u=$(document.createElement("span"));if(u.append((t+1).toString()),r){u.addClass(this._CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS);var h=$(document.createElement("span"));h.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_DOT_BULLET_CLASS),this._AddHoverable(h),i==t&&(h.addClass(this._MARKER_STYLE_CLASSES._SELECTED),h.addClass(this._MARKER_STYLE_CLASSES._ACTIVE)),n.append(h)}else this._AddHoverable(n);var d=o?"rtl":"ltr";u.attr("dir",d),n.append(u),s&&n.css("display","block"),e.append(n)}return n},_getPagingControlAccLabel:function(){var e=this._getPagingControlContainer(),t=null;return e&&(t=e.find("."+this._CSS_CLASSES._PAGING_CONTROL_ACC_LABEL_CLASS))&&t.length>0&&(t=$(t.get(0))),t},_getPagingControlContainer:function(){return $(this.element)},_getPagingControlContent:function(){if(!this._cachedDomPagingControlContent){var e=this._getPagingControlContainer(),t=null;e&&(t=e.find("."+this._CSS_CLASSES._PAGING_CONTROL_CONTENT_CLASS))&&t.length>0&&(this._cachedDomPagingControlContent=$(t.get(0)))}return this._cachedDomPagingControlContent},_getPagingControlLoadMore:function(){if(!this._cachedDomPagingControlLoadMore){var e=this._getPagingControlContent(),t=null;e&&(t=e.children("."+this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_CLASS))&&t.length>0&&(this._cachedDomPagingControlLoadMore=$(t.get(0)))}return this._cachedDomPagingControlLoadMore},_getPagingControlLoadMoreLink:function(){if(!this._cachedDomPagingControlLoadMoreLink){var e=this._getPagingControlLoadMore(),t=null;e&&(t=e.children("."+this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_LINK_CLASS))&&t.length>0&&(this._cachedDomPagingControlLoadMoreLink=$(t.get(0)))}return this._cachedDomPagingControlLoadMoreLink},_getPagingControlLoadMoreRange:function(){if(!this._cachedDomPagingControlLoadMoreRange){var e=this._getPagingControlLoadMore(),t=null;e&&(t=e.children("."+this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_RANGE_CLASS))&&t.length>0&&(this._cachedDomPagingControlLoadMoreRange=$(t.get(0)))}return this._cachedDomPagingControlLoadMoreRange},_getPagingControlNav:function(){if(!this._cachedDomPagingControlNav){var e=this._getPagingControlContent(),t=null;e&&(t=e.children("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_CLASS))&&t.length>0&&(this._cachedDomPagingControlNav=$(t.get(0)))}return this._cachedDomPagingControlNav},_getPagingControlNavInput:function(){if(!this._cachedDomPagingControlNavInput){var e=this._getPagingControlNav(),t=null;e&&(t=e.find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_CLASS))&&t.length>0&&(this._cachedDomPagingControlNavInput=$(t.get(0)))}return this._cachedDomPagingControlNavInput},_getPagingControlNavInputSummary:function(){if(!this._cachedDomPagingControlNavInputSummary){var e=this._getPagingControlNav(),t=null;e&&(t=e.find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SUMMARY_CLASS))&&t.length>0&&(this._cachedDomPagingControlNavInputSummary=$(t.get(0)))}return this._cachedDomPagingControlNavInputSummary},_getPagingControlNavPageLinks:function(){var e=this._getPagingControlNav(),t=null;return e&&(t=e.find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_PAGES_LINKS_CLASS))&&t.length>0&&(t=$(t.get(0))),t},_getPagingControlNavArrowSection:function(){var e=this._getPagingControlNav(),t=null;if(e){if(!((t=e.find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_ARROW_SECTION_CLASS))&&t.length>0))return null;t=$(t.get(0))}return t},_getPagingControlNavInputSection:function(){var e=this._getPagingControlNav(),t=null;if(e){if(!((t=e.find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SECTION_CLASS))&&t.length>0))return null;t=$(t.get(0))}return t}}),i.CustomElementBridge.registerMetadata("oj-paging-control","baseComponent",{properties:{data:{},loadMoreOptions:{type:"Object",properties:{maxCount:{type:"number"}}},mode:{type:"string",enumValues:["page","loadMore"]},overflow:{type:"string",enumValues:["fit","none"]},pageOptions:{type:"Object",properties:{layout:{type:"Array<string>"},maxPageLinks:{type:"number"},orientation:{type:"string",enumValues:["horizontal","vertical"]},type:{type:"string",enumValues:["numbers","dots"]}}},pageSize:{type:"number"},translations:{type:"Object",properties:{labelAccNavFirstPage:{type:"string",value:"First Page"},labelAccNavLastPage:{type:"string",value:"Last Page"},labelAccNavNextPage:{type:"string",value:"Next Page"},labelAccNavPage:{type:"string",value:"Page"},labelAccNavPreviousPage:{type:"string",value:"Previous Page"},labelAccPaging:{type:"string",value:"Pagination"},labelLoadMore:{type:"string",value:"Show More..."},labelLoadMoreMaxRows:{type:"string",value:"Reached Maximum Limit of {maxRows} rows"},labelNavInputPage:{type:"string",value:"Page"},labelNavInputPageMax:{type:"string",value:"of {pageMax}"},maxPageLinksInvalid:{type:"string",value:"Value for maxPageLinks is invalid."},msgItemRangeCurrent:{type:"string",value:"{pageFrom}-{pageTo}"},msgItemRangeCurrentSingle:{type:"string",value:"{pageFrom}"},msgItemRangeItems:{type:"string",value:"items"},msgItemRangeOf:{type:"string",value:"of"},msgItemRangeOfApprox:{type:"string",value:"approx."},msgItemRangeOfAtLeast:{type:"string",value:"at least"},pageInvalid:{type:"string",value:"The page value entered is invalid."},tipNavFirstPage:{type:"string",value:"First"},tipNavInputPage:{type:"string",value:"Go To Page"},tipNavLastPage:{type:"string",value:"Last"},tipNavNextPage:{type:"string",value:"Next"},tipNavPageLink:{type:"string",value:"Go To Page {pageNum}"},tipNavPreviousPage:{type:"string",value:"Previous"}}}},methods:{firstPage:{},lastPage:{},loadNext:{},nextPage:{},page:{},previousPage:{}},extension:{_WIDGET_NAME:"ojPagingControl"}}),i.CustomElementBridge.register("oj-paging-control",{metadata:i.CustomElementBridge.getMetadata("oj-paging-control")}),i.DataGridResources=function(e,t,n){this.rtlMode=e,this.translationFunction=t,this.defaultOptions=n,this.styles={},this.styles.datagrid="oj-datagrid",this.styles.cell="oj-datagrid-cell",this.styles.banded="oj-datagrid-banded",this.styles.row="oj-datagrid-row",this.styles.databody="oj-datagrid-databody",this.styles.topcorner="oj-datagrid-top-corner",this.styles.bottomcorner="oj-datagrid-bottom-corner",this.styles.rowheaderspacer="oj-datagrid-row-header-spacer",this.styles.colheaderspacer="oj-datagrid-column-header-spacer",this.styles.status="oj-datagrid-status",this.styles.loadingicon="oj-icon oj-datagrid-loading-icon",this.styles.emptytext="oj-datagrid-empty-text",this.styles.header="oj-datagrid-header",this.styles.endheader="oj-datagrid-end-header",this.styles.groupingcontainer="oj-datagrid-header-grouping",this.styles.headercell="oj-datagrid-header-cell",this.styles.rowheader="oj-datagrid-row-header",this.styles.colheader="oj-datagrid-column-header",this.styles.colheadercell="oj-datagrid-column-header-cell",this.styles.rowheadercell="oj-datagrid-row-header-cell",this.styles.endheadercell="oj-datagrid-end-header-cell",this.styles.rowendheader="oj-datagrid-row-end-header",this.styles.colendheader="oj-datagrid-column-end-header",this.styles.colendheadercell="oj-datagrid-column-end-header-cell",this.styles.rowendheadercell="oj-datagrid-row-end-header-cell",this.styles.headerlabel="oj-datagrid-header-label",this.styles.rowheaderlabel="oj-datagrid-row-header-label",this.styles.columnheaderlabel="oj-datagrid-column-header-label",this.styles.rowendheaderlabel="oj-datagrid-row-end-header-label",this.styles.columnendheaderlabel="oj-datagrid-column-end-header-label",this.styles["scroller-mobile"]="oj-datagrid-scroller-touch",this.styles.scroller="oj-datagrid-scroller",this.styles.scrollers="oj-datagrid-scrollers",this.styles.focus="oj-focus",this.styles.hover="oj-hover",this.styles.active="oj-active",this.styles.selected="oj-selected",this.styles.topSelected="oj-datagrid-selected-top",this.styles.bottomSelected="oj-datagrid-selected-bottom",this.styles.disabled="oj-disabled",this.styles.enabled="oj-enabled",this.styles.default="oj-default",this.styles.sortcontainer="oj-datagrid-sort-icon-container",this.styles.sortascending="oj-datagrid-sort-ascending-icon",this.styles.sortdescending="oj-datagrid-sort-descending-icon",this.styles.icon="oj-component-icon",this.styles.clickableicon="oj-clickable-icon-nocontext",this.styles.info="oj-helper-hidden-accessible",this.styles.rowexpander="oj-rowexpander",this.styles.cut="oj-datagrid-cut",this.styles.selectaffordancetop="oj-datagrid-touch-selection-affordance-top",this.styles.selectaffordancebottom="oj-datagrid-touch-selection-affordance-bottom",this.styles.toucharea="oj-datagrid-touch-area",this.styles.readOnly="oj-read-only",this.styles.editable="oj-datagrid-editable",this.styles.cellEdit="oj-datagrid-cell-edit",this.styles.draggable="oj-draggable",this.styles.drag="oj-drag",this.styles.drop="oj-drop",this.styles.activedrop="oj-active-drop",this.styles.validdrop="oj-valid-drop",this.styles.invaliddrop="oj-invalid-drop",this.styles.formcontrol="oj-form-control-inherit",this.styles.borderHorizontalNone="oj-datagrid-border-horizontal-none",this.styles.borderVerticalNone="oj-datagrid-border-vertical-none",this.styles.borderHorizontalSmall="oj-datagrid-small-content-border-horizontal",this.styles.borderVerticalSmall="oj-datagrid-small-content-border-vertical",this.styles.offsetOutline="oj-datagrid-focus-offset",this.styles.depth="oj-datagrid-depth-",this.commands={},this.commands.sortCol="oj-datagrid-sortCol",this.commands.sortColAsc="oj-datagrid-sortColAsc",this.commands.sortColDsc="oj-datagrid-sortColDsc",this.commands.sortRow="oj-datagrid-sortRow",this.commands.sortRowAsc="oj-datagrid-sortRowAsc",this.commands.sortRowDsc="oj-datagrid-sortRowDsc",this.commands.resize="oj-datagrid-resize",this.commands.resizeWidth="oj-datagrid-resizeWidth",this.commands.resizeHeight="oj-datagrid-resizeHeight",this.commands.cut="oj-datagrid-cut",this.commands.paste="oj-datagrid-paste",this.commands.discontiguousSelection="oj-datagrid-discontiguousSelection",this.attributes={},this.attributes.busyContext=i.Context._OJ_CONTEXT_ATTRIBUTE,this.attributes.context="data-oj-cellContext",this.attributes.resizable="data-oj-resizable",this.attributes.sortable="data-oj-sortable",this.attributes.sortDir="data-oj-sortdir",this.attributes.expander="data-oj-expander",this.attributes.expanderIndex="data-oj-expander-index",this.attributes.container=i.Components._OJ_CONTAINER_ATTR,this.attributes.extent="data-oj-extent",this.attributes.start="data-oj-start",this.attributes.depth="data-oj-depth",this.attributes.level="data-oj-level",this.attributes.tabMod="data-oj-tabmod"},i.DataGridResources.prototype.isRTLMode=function(){return"rtl"===this.rtlMode},i.DataGridResources.prototype.getTranslatedText=function(e,t){return this.translationFunction(e,t)},i.DataGridResources.prototype.getDefaultOption=function(e){return this.defaultOptions?this.defaultOptions[e]:null},i.DataGridResources.prototype.getMappedStyle=function(e){return null!=e?this.styles[e]:null},i.DataGridResources.prototype.getMappedCommand=function(e){return null!=e?this.commands[e]:null},i.DataGridResources.prototype.getMappedAttribute=function(e){return null!=e?this.attributes[e]:null};var be=function(e){this.m_root=e,this.MAX_COLUMN_THRESHOLD=20,this.MAX_ROW_THRESHOLD=30,this.m_utils=new Ee(this),this.m_discontiguousSelection=!1,this.m_sizingManager=new Se,this.m_keyboardHandler=new De(this),this.m_rowHeaderWidth=null,this.m_rowEndHeaderWidth=null,this.m_colHeaderHeight=null,this.m_colEndHeaderHeight=null,this.m_styleClassDimensionMap={width:{},height:{}},this.m_isEstimateRowCount=void 0,this.m_isEstimateColumnCount=void 0,this.m_stopRowFetch=!1,this.m_stopRowHeaderFetch=!1,this.m_stopRowEndHeaderFetch=!1,this.m_stopColumnFetch=!1,this.m_stopColumnHeaderFetch=!1,this.m_stopColumnEndHeaderFetch=!1,this.m_initialized=!1,this.m_shouldFocus=null,this.callbacks={},this._setupActions(),this.m_readinessStack=[],this.m_modelEvents=[],this.m_databodyMap=new Map};be.keyCodes={TAB_KEY:9,ENTER_KEY:13,SHIFT_KEY:16,CTRL_KEY:17,ALT_KEY:18,ESC_KEY:27,SPACE_KEY:32,PAGEUP_KEY:33,PAGEDOWN_KEY:34,END_KEY:35,HOME_KEY:36,LEFT_KEY:37,UP_KEY:38,RIGHT_KEY:39,DOWN_KEY:40,NUM5_KEY:53,V_KEY:86,X_KEY:88,F1_KEY:112,F2_KEY:113,F8_KEY:119,F10_KEY:121,F15_KEY:126,A_KEY:65},be.UPDATE_ANIMATION_FADE_INOUT=1,be.UPDATE_ANIMATION_SLIDE_INOUT=2,be.UPDATE_ANIMATION_DURATION=250,be.EXPAND_ANIMATION_DURATION=500,be.COLLAPSE_ANIMATION_DURATION=400,be.MAX_OVERSCROLL_PIXEL=50,be.BOUNCE_ANIMATION_DURATION=500,be.DECELERATION_FACTOR=6e-4,be.TAP_AND_SCROLL_RESET=300,be.MIN_SWIPE_DURATION=200,be.MAX_SWIPE_DURATION=400,be.MIN_SWIPE_DISTANCE=10,be.MIN_SWIPE_TRANSITION_DURATION=100,be.MAX_SWIPE_TRANSITION_DURATION=500,be.CONTEXT_MENU_TAP_HOLD_DURATION=750,be.HEADER_TAP_SHORT_HOLD_DURATION=300,be.FETCH_PIXEL_THRESHOLD=5,be.VISIBILITY_STATE_HIDDEN="hidden",be.VISIBILITY_STATE_REFRESH="refresh",be.VISIBILITY_STATE_RENDER="render",be.VISIBILITY_STATE_VISIBLE="visible",be.prototype.SetOptions=function(e,t){this.m_options=new Te(e,t)},be.prototype.SetSortOriginalEvent=function(e){this.m_sortInfo.originalEvent=e},be.prototype.UpdateOptions=function(e,t){var i;for(i in e)i in this.m_options.options&&this.m_options.options[i]!=e[i]&&(this.m_options.options[i]=e[i]);for(i in e)if(!this._updateDataGrid(i,t)){this.empty(),this.refresh(this.m_root);break}},be.prototype._updateDataGrid=function(e,t){var i;switch(e){case"bandingInterval":this._removeBanding(),this.updateColumnBanding(),this.updateRowBanding();break;case"currentCell":i=this.m_options.getCurrentCell(),this._updateActive(i,!0,!1);break;case"editMode":this.m_editMode=this.m_options.getEditMode();break;case"gridlines":this._updateGridlines();break;case"header":i=this.m_options.options.header,this._updateHeaderOptions(i,t);break;case"scrollPosition":i=this.m_options.getScrollPosition(),this._updateScrollPosition(i);break;case"selection":i=this.m_options.getSelection(),this._updateSelection(i);break;case"selectionMode":this._clearSelection(null);break;default:return!1}return!0},be.prototype._updateSelection=function(e){null!=e&&(this._isSelectionEnabled()?this.SetSelection(e):e.length=0)},be.prototype._updateHeaderOptions=function(e,t){var i,n,o,s,r,a,l,u,h;if(null!=t&&null!=t.subkey&&(n=(i=t.subkey.split("."))[0],o=i[1],"column"==n&&null!=this.m_colHeader&&null!=this.m_colHeader.firstChild?s=this.m_colHeader.firstChild.childNodes:"row"==n&&null!=this.m_rowHeader&&null!=this.m_rowHeader.firstChild?s=this.m_rowHeader.firstChild.childNodes:"columnEnd"==n&&null!=this.m_colEndHeader&&null!=this.m_colEndHeader.firstChild?s=this.m_colEndHeader.firstChild.childNodes:"rowEnd"==n&&null!=this.m_rowEndHeader&&null!=this.m_rowEndHeader.firstChild&&(s=this.m_rowEndHeader.firstChild.childNodes),null!=s))for(l=0;l<s.length;l++)(a=(r=s[l])[this.getResources().getMappedAttribute("context")]).index=this.getHeaderCellIndex(r),"resizable"==o?this._isHeaderResizeEnabled(n,a)?this._setAttribute(r,o,"true"):this._setAttribute(r,o,"false"):"sortable"==o&&(u=this.m_utils.containsCSSClassName(r.lastChild,this.getMappedStyle("sortcontainer")),this._isSortEnabled(n,a)?(u||(h=this._buildSortIcon(a),r.appendChild(h)),this._setAttribute(r,o,"true")):(u&&this._remove(r.lastChild),this._setAttribute(r,o,"false")))},be.prototype._updateGridlines=function(){var e,t,i,n,o,s;for(i=this.m_options.getHorizontalGridlines(),n=this.m_options.getVerticalGridlines(),o=this.getResources().isRTLMode()?"right":"left",e=this.m_startRow;e<=this.m_endRow;e++)for(t=this.m_startCol;t<=this.m_endCol;t++)s=this._getCellByIndex(this.createIndex(e,t)),"hidden"===n||this._isLastColumn(t)&&this.getRowHeaderWidth()+this.getElementDir(s,o)+this.calculateColumnWidth(s)>=this.getWidth()?this.m_utils.addCSSClassName(s,this.getMappedStyle("borderVerticalNone")):this.m_utils.removeCSSClassName(s,this.getMappedStyle("borderVerticalNone")),"hidden"===i||this._isLastRow(e)&&this.getRowBottom(s,null)>=this.getHeight()?this.m_utils.addCSSClassName(s,this.getMappedStyle("borderHorizontalNone")):this.m_utils.removeCSSClassName(s,this.getMappedStyle("borderHorizontalNone"))},be.prototype._updateEdgeCellBorders=function(e,t){var i,n;null!=this.m_active&&"header"!=this.m_active.type&&null!=(i=this._getActiveElement())&&(this._isLastRow(this.m_active.indexes.row)&&("none"==e?this.m_utils.addCSSClassName(i,this.getMappedStyle("borderHorizontalNone")):this.m_utils.removeCSSClassName(i,this.getMappedStyle("borderHorizontalNone"))),this._isLastColumn(this.m_active.indexes.column)&&("none"==e?this.m_utils.addCSSClassName(i,this.getMappedStyle("borderVerticalNone")):this.m_utils.removeCSSClassName(i,this.getMappedStyle("borderVerticalNone")))),null!=t&&null!=this.m_prevActive&&"header"!=this.m_prevActive.type&&null!=(n=this._getElementFromActiveObject(this.m_prevActive))&&(this._isLastRow(this.m_prevActive.indexes.row)&&("none"==t?this.m_utils.addCSSClassName(n,this.getMappedStyle("borderHorizontalNone")):this.m_utils.removeCSSClassName(n,this.getMappedStyle("borderHorizontalNone"))),this._isLastColumn(this.m_prevActive.indexes.column)&&("none"==t?this.m_utils.addCSSClassName(n,this.getMappedStyle("borderVerticalNone")):this.m_utils.removeCSSClassName(n,this.getMappedStyle("borderVerticalNone"))))},be.prototype.GetOptions=function(){return null==this.m_options&&(this.m_options=new Te),this.m_options},be.prototype.SetResources=function(e){this.m_resources=e},be.prototype.getResources=function(){return this.m_resources},be.prototype.getStartRow=function(){return this.m_startRow},be.prototype.getStartRowHeader=function(){return this.m_startRowHeader},be.prototype.getStartColumn=function(){return this.m_startCol},be.prototype.getStartColumnHeader=function(){return this.m_startColHeader},be.prototype.getStartRowEndHeader=function(){return this.m_startRowEndHeader},be.prototype.getStartColumnEndHeader=function(){return this.m_startColEndHeader},be.prototype.getMappedStyle=function(e){return this.getResources().getMappedStyle(e)},be.prototype.SetDataSource=function(e){this.m_modelEvents=[],this.m_dataSource=e},be.prototype.getDataSource=function(){return this.m_dataSource},be.prototype.setVisibility=function(e){this.m_visibility=e},be.prototype.getVisibility=function(){return null==this.m_visibility&&(null!=this.m_root.offsetParent?this.setVisibility(be.VISIBILITY_STATE_VISIBLE):this.setVisibility(be.VISIBILITY_STATE_HIDDEN)),this.m_visibility},be.prototype.SetOptionCallback=function(e){this.m_setOptionCallback=e},be.prototype.SetContextCallback=function(e){this.m_contextCallback=e},be.prototype.SetRemoveCallback=function(e){this.m_removeCallback=e},be.prototype.SetUniqueIdCallback=function(e){this._uniqueIdCallback=e},be.prototype.SetCompareValuesCallback=function(e){this._compareValuesCallback=e},be.prototype.SetSubtreeAttachedCallback=function(e){this.m_subtreeAttachedCallback=e},be.prototype._remove=function(e){this._uniqueIdCallback(e,!0),null!=this.m_removeCallback?this.m_removeCallback.call(null,e):e.parentNode.removeChild(e)},be.prototype._removeFromArray=function(e){for(var t=0;t<e.length;t++)this._remove(e[t])},be.prototype.SetNotReadyCallback=function(e){this.m_notReady=e},be.prototype.SetMakeReadyCallback=function(e){this.m_makeReady=e},be.prototype._signalTaskStart=function(){this.m_readinessStack&&(0==this.m_readinessStack.length&&this.m_notReady(),this.m_readinessStack.push(1))},be.prototype._signalTaskEnd=function(){this.m_readinessStack&&this.m_readinessStack.length>0&&(this.m_readinessStack.pop(),0==this.m_readinessStack.length&&this.m_makeReady())},be.prototype._indexes=function(e,t){var i,n=this;"function"==typeof(i=this.getDataSource().indexes(e)).then?(n._signalTaskStart(),i.then(function(i){t.call(n,i,e),n._signalTaskEnd()},function(){t.call(n,{row:-1,column:-1},e),n._signalTaskEnd()})):t.call(n,i,e)},be.prototype._keys=function(e,t){var i,n=this;"function"==typeof(i=this.getDataSource().keys(e)).then?(n._signalTaskStart(),i.then(function(i){t.call(n,i,e),n._signalTaskEnd()},function(){t.call(n,{row:null,column:null},e),n._signalTaskEnd()})):t.call(n,i,e)},be.prototype.SetCreateContextCallback=function(e){this.m_createContextCallback=e},be.prototype.SetFocusableCallback=function(e,t){this.m_focusInHandler=e,this.m_focusOutHandler=t},be.prototype.SetFixContextCallback=function(e){this.m_fixContextCallback=e},be.prototype._isHighWatermarkScrolling=function(){return"scroll"!=this.m_options.getScrollPolicy()},be.prototype.destroy=function(){delete this.m_fetching,this._removeDataSourceEventListeners(),this._removeDomEventListeners(),delete this.m_styleClassDimensionMap,this.m_styleClassDimensionMap={width:{},height:{}}},be.prototype._addDataSourceEventListeners=function(){this._removeDataSourceEventListeners(),null!=this.m_dataSource&&(this.m_handleModelEventListener=this.handleModelEvent.bind(this),this.m_handleExpandEventListener=this.handleExpandEvent.bind(this),this.m_handleCollapseEventListener=this.handleCollapseEvent.bind(this),this.m_dataSource.on("change",this.m_handleModelEventListener,this),this.m_dataSource.on("expand",this.m_handleExpandEventListener,this),this.m_dataSource.on("collapse",this.m_handleCollapseEventListener,this))},be.prototype._removeDataSourceEventListeners=function(){null!=this.m_dataSource&&(this.m_dataSource.off("change",this.m_handleModelEventListener),this.m_dataSource.off("expand",this.m_handleExpandEventListener),this.m_dataSource.off("collapse",this.m_handleCollapseEventListener))},be.prototype._addDomEventListeners=function(){this.m_handleDatabodyKeyDown||(this.m_handleDatabodyKeyDown=this.handleDatabodyKeyDown.bind(this)),this.m_handleRootFocus||(this.m_handleRootFocus=this.handleRootFocus.bind(this)),this.m_handleRootBlur||(this.m_handleRootBlur=this.handleRootBlur.bind(this)),this.m_root.addEventListener("keydown",this.m_handleDatabodyKeyDown,!1),this.m_root.addEventListener("focus",this.m_handleRootFocus,!0),this.m_root.addEventListener("blur",this.m_handleRootBlur,!0)},be.prototype._removeDomEventListeners=function(){document.removeEventListener("mousemove",this.m_docMouseMoveListener,!1),document.removeEventListener("mouseup",this.m_docMouseUpListener,!1),null!=this.m_root&&(this.m_handleDatabodyKeyDown&&this.m_root.removeEventListener("keydown",this.m_handleDatabodyKeyDown,!1),this.m_handleRootFocus&&this.m_root.removeEventListener("focus",this.m_handleRootFocus,!0),this.m_handleRootBlur&&this.m_root.removeEventListener("blur",this.m_handleRootBlur,!0))},be.prototype.getRootElement=function(){return this.m_root},be.prototype.getWidth=function(){return null==this.m_width&&(this.m_width=this.getRootElement().clientWidth),this.m_width},be.prototype.getHeight=function(){return null==this.m_height&&(this.m_height=this.getRootElement().clientHeight),this.m_height},be.prototype.getScrollableWidth=function(){var e=this.m_databody.firstChild;return this.getElementWidth(e)},be.prototype.getViewportWidth=function(){var e=this.getWidth();return Math.round(1.5*e)},be.prototype.getViewportHeight=function(){var e=this.getHeight();return Math.round(1.5*e)},be.prototype._getViewportTop=function(){return this.m_currentScrollTop},be.prototype._getViewportBottom=function(){var e=this._getViewportTop(),t=this.getElementHeight(this.m_databody),i=this.m_utils.getScrollbarSize();return this.m_hasHorizontalScroller?e+t-i:e+t},be.prototype._getViewportLeft=function(){return this.m_currentScrollLeft},be.prototype._getViewportRight=function(){var e=this._getViewportLeft(),t=this.getElementWidth(this.m_databody),i=this.m_utils.getScrollbarSize();return this.m_hasVerticalScroller?e+t-i:e+t},be.prototype.getFetchSize=function(e){return"row"==e?(null==this.m_rowFetchSize&&(this.m_rowFetchSize=Math.max(1,Math.round(this.getViewportHeight()/this.getDefaultRowHeight()))),this.m_rowFetchSize):"column"==e?(null==this.m_columnFetchSize&&(this.m_columnFetchSize=Math.max(1,Math.round(this.getViewportWidth()/this.getDefaultColumnWidth()))),this.m_columnFetchSize):0},be.prototype.getEmptyText=function(){var e;return null==(e=this.m_options.getEmptyText())&&(e=this.getResources().getTranslatedText("msgNoData")),e},be.prototype._buildEmptyText=function(){var e,t,i,n,o;return e=this.getEmptyText(),(t=document.createElement("div")).id=this.createSubId("empty"),t.className=this.getMappedStyle("emptytext"),i=this.m_endColHeader>=0?this.getColumnHeaderHeight():0,this.setElementDir(t,i,"top"),n=this.getResources().isRTLMode()?"right":"left",o=this.m_endRowHeader>=0?this.getRowHeaderWidth():0,this.setElementDir(t,o,n),t.textContent=e,this.m_empty=t,t},be.prototype.getRowThreshold=function(){return 0},be.prototype.getColumnThreshold=function(){return 0},be.prototype.setDefaultDimensions=function(){var e,t;(e=document.createElement("div")).style.visibilty="hidden",t=this.getResources(),e.className=t.getMappedStyle("rowheadercell")+" "+t.getMappedStyle("colheadercell")+" "+t.getMappedStyle("headercell"),this.m_root.appendChild(e),this.m_defaultColumnWidth=Math.round(e.getBoundingClientRect().width),this.m_defaultRowHeight=Math.round(e.getBoundingClientRect().height),this.m_root.removeChild(e)},be.prototype.getDefaultRowHeight=function(){return null==this.m_defaultRowHeight&&this.setDefaultDimensions(),this.m_defaultRowHeight},be.prototype.getDefaultColumnWidth=function(){return null==this.m_defaultColumnWidth&&this.setDefaultDimensions(),this.m_defaultColumnWidth},be.prototype._getDefaultDimension=function(e){return"row"==e?this.getDefaultRowHeight():"column"==e?this.getDefaultColumnWidth():void 0},be.prototype._getHeaderDimension=function(e,t,i,n){var o,s;return null!=(o=this.m_sizingManager.getSize(i,t))?o:""!=e.style[n]?(o=this.getElementDir(e,n),this.m_sizingManager.setSize(i,t,o),o):(s=e.className,null==(o=this.m_styleClassDimensionMap[n][s])&&(o=this.getElementDir(e,n)),this.m_sizingManager.setSize(i,t,o),this.m_styleClassDimensionMap[n][s]=o,o)},be.prototype.createSubId=function(e){var t=this.getRootElement().id;return null==t&&(t=""),[t,e].join(":")},be.prototype.isHeaderFetchComplete=function(){return!1===this.m_fetching.row&&!1===this.m_fetching.column},be.prototype.isFetchComplete=function(){return null!=this.m_fetching&&this.isHeaderFetchComplete()&&!1===this.m_fetching.cells},be.prototype._isLastRow=function(e){return this._isCountUnknown("row")?e===this.m_endRow&&this.m_stopRowFetch:e+1===this.getDataSource().getCount("row")},be.prototype._isLastColumn=function(e){return this._isCountUnknown("column")?e===this.m_endCol&&this.m_stopColumnFetch:e+1===this.getDataSource().getCount("column")},be.prototype.empty=function(){this.m_empty&&this.m_root.removeChild(this.m_empty),this.m_corner&&this._remove(this.m_corner),this.m_bottomCorner&&this._remove(this.m_bottomCorner),this.m_columnHeaderScrollbarSpacer&&this._remove(this.m_columnHeaderScrollbarSpacer),this.m_rowHeaderScrollbarSpacer&&this._remove(this.m_rowHeaderScrollbarSpacer),this.m_root.removeChild(this.m_placeHolder),this.m_root.removeChild(this.m_status),this.m_root.removeChild(this.m_accSummary),this.m_root.removeChild(this.m_accInfo),this.m_root.removeChild(this.m_stateInfo),this.m_root.removeChild(this.m_contextInfo),this._remove(this.m_colHeader),this._remove(this.m_rowHeader),this._remove(this.m_colEndHeader),this._remove(this.m_rowEndHeader),this._remove(this.m_databody),this._clearDatabodyMap()},be.prototype.refresh=function(e){this.resetInternal(),this.render(e)},be.prototype.resetInternal=function(){this.m_initialized=!1,this.m_readinessStack=[],this._signalTaskStart(),this._signalTaskEnd(),this._clearDatabodyMap(),this.m_cursor=null,this.m_corner=null,this.m_bottomCorner=null,this.m_columnHeaderScrollbarSpacer=null,this.m_rowHeaderScrollbarSpacer=null,this.m_colHeader=null,this.m_colEndHeader=null,this.m_rowHeader=null,this.m_rowEndHeader=null,this.m_databody=null,this.m_empty=null,this.m_accInfo=null,this.m_accSummary=null,this.m_contextInfo=null,this.m_placeHolder=null,this.m_stateInfo=null,this.m_status=null,this.m_headerLabels={row:[],column:[],rowEnd:[],columnEnd:[]},this.m_isEstimateRowCount=void 0,this.m_isEstimateColumnCount=void 0,this.m_stopRowFetch=!1,this.m_stopRowHeaderFetch=!1,this.m_stopRowEndHeaderFetch=!1,this.m_stopColumnFetch=!1,this.m_stopColumnHeaderFetch=!1,this.m_stopColumnEndHeaderFetch=!1,this.m_rowFetchSize=null,this.m_columnFetchSize=null,this.m_fetching=null,this.m_processingModelEvent=!1,this.m_processingEventQueue=!1,this.m_animating=!1,this.m_sizingManager.clear(),this.m_styleClassDimensionMap={width:{},height:{}},this.m_height=null,this.m_width=null,this.m_scrollHeight=null,this.m_scrollWidth=null,this.m_avgRowHeight=void 0,this.m_avgColWidth=void 0,this.m_defaultColumnWidth=null,this.m_defaultRowHeight=null,this.m_colHeaderHeight=null,this.m_colEndHeaderHeight=null,this.m_rowHeaderWidth=null,this.m_rowEndHeaderWidth=null,this.m_rowHeaderLevelWidths=[],this.m_rowEndHeaderLevelWidths=[],this.m_columnHeaderLevelHeights=[],this.m_columnEndHeaderLevelHeights=[],this.m_active=null,this.m_prevActive=null,this.m_trueIndex={},this.m_headerDragState=!1,this.m_databodyDragState=!1,this.m_databodyMove=!1,this.m_moveRow=null,this.m_moveRowHeader=null,this.m_dropTarget=null,this.m_dropTargetHeader=null,this.m_discontiguousSelection=!1,this.m_docMouseMoveListener=null,this.m_docMouseUpListener=null,this.m_modelEvents=[],this.m_hasHorizontalScroller=null,this.m_hasVerticalScroller=null,this.m_currentScrollLeft=null,this.m_currentScrollTop=null,this.m_prevScrollLeft=null,this.m_prevScrollTop=null,this.m_handleScrollOverflow=null,this.m_resizing=!1,this.m_resizingElement=null,this.m_resizingElementMin=null,this.m_startRow=null,this.m_startCol=null,this.m_endRow=null,this.m_endCol=null,this.m_startRowPixel=null,this.m_startColPixel=null,this.m_endRowPixel=null,this.m_endColPixel=null,this.m_startRowHeader=null,this.m_startColHeader=null,this.m_endRowHeader=null,this.m_endColHeader=null,this.m_startRowHeaderPixel=null,this.m_startColHeaderPixel=null,this.m_endRowHeaderPixel=null,this.m_endColHeaderPixel=null,this.m_rowHeaderLevelCount=null,this.m_columnHeaderLevelCount=null,this.m_startRowEndHeader=null,this.m_startColEndHeader=null,this.m_endRowEndHeader=null,this.m_endColEndHeader=null,this.m_startRowEndHeaderPixel=null,this.m_startColEndHeaderPixel=null,this.m_endRowEndHeaderPixel=null,this.m_endColEndHeaderPixel=null,this.m_rowEndHeaderLevelCount=null,this.m_columnEndHeaderLevelCount=null,this.m_sortInfo=null,this.m_resizeRequired=null,this.m_externalFocus=null,this.m_currentMode=null,this.m_editMode=null,this.m_hasCells=null,this.m_hasRowHeader=null,this.m_hasRowEndHeader=null,this.m_hasColHeader=null,this.m_hasColEndHeader=null,this.m_isLongScroll=null,this.m_addBorderBottom=null,this.m_addBorderRight=null},be.prototype._shouldInitialize=function(){return this.isFetchComplete()&&!this.m_initialized&&null!=this.m_databody.parentNode},be.prototype._handleInitialization=function(e){1==e?(this.resizeGrid(),this.fillViewport(),this.isFetchComplete()&&(this._updateActive(this.m_options.getCurrentCell(),!1,!1),this.m_initialized=!0,this.fireEvent("ready",{}),this._runModelEventQueue())):(this.m_initialized=!0,this.fireEvent("ready",{}),this._runModelEventQueue())},be.prototype._runModelEventQueue=function(){var e;if(null!=this.m_modelEvents){if(this.m_processingEventQueue=!0,0===this.m_modelEvents.length)return void(this.m_processingEventQueue=!1);"expand"==(e=this.m_modelEvents.shift()).operation?this.handleExpandEvent(e,!0):"collapse"==e.operation?this.handleCollapseEvent(e,!0):this.handleModelEvent(e,!0)}else this.m_processingEventQueue=!1},be.prototype.render=function(e){null!=this.m_databody&&(this.destroy(),this.resetInternal()),this.m_timingStart=new Date,this.m_fetching={},this.m_startRow=0,this.m_startCol=0,this.m_endRow=-1,this.m_endCol=-1,this.m_startRowPixel=0,this.m_startColPixel=0,this.m_endRowPixel=0,this.m_endColPixel=0,this.m_startRowHeader=0,this.m_startColHeader=0,this.m_endRowHeader=-1,this.m_endColHeader=-1,this.m_startRowHeaderPixel=0,this.m_startColHeaderPixel=0,this.m_endRowHeaderPixel=0,this.m_endColHeaderPixel=0,this.m_startRowEndHeader=0,this.m_startColEndHeader=0,this.m_endRowEndHeader=-1,this.m_endColEndHeader=-1,this.m_startRowEndHeaderPixel=0,this.m_startColEndHeaderPixel=0,this.m_endRowEndHeaderPixel=0,this.m_endColEndHeaderPixel=0,this.m_currentScrollLeft=0,this.m_currentScrollTop=0,this.m_prevScrollLeft=0,this.m_prevScrollTop=0,this.m_handleScrollOverflow=!1,this.m_rowHeaderLevelWidths=[],this.m_rowEndHeaderLevelWidths=[],this.m_columnHeaderLevelHeights=[],this.m_columnEndHeaderLevelHeights=[],this.buildGrid(e)},be.prototype.buildGrid=function(e){var t,i,n,o,s,r,a,l,u,h,d,c,p,_,m;this.m_root=e,this.m_root.setAttribute("role","application"),this._isCellEditable()?this.m_utils.addCSSClassName(this.m_root,this.getMappedStyle("editable")):this.m_utils.addCSSClassName(this.m_root,this.getMappedStyle("readOnly")),e.tabIndex=0,t=this.buildStatus(),e.appendChild(t),this.m_status=t,i=this.buildAccSummary(),e.appendChild(i),this.m_accSummary=i,n=this.buildAccInfo(),e.appendChild(n),this.m_accInfo=n,o=this.buildStateInfo(),e.appendChild(o),this.m_stateInfo=o,h=this.buildContextInfo(),e.appendChild(h),this.m_contextInfo=h,d=this.buildPlaceHolder(),e.appendChild(d),this.m_placeHolder=d,this.m_headerLabels={row:[],column:[],rowEnd:[],columnEnd:[]},null!=this.getDataSource()?(this.m_empty=null,s=this.getResources().isRTLMode(),r=(_=this.buildHeaders("column",this.getMappedStyle("colheader"),this.getMappedStyle("colendheader"))).root,c=_.endRoot,e.insertBefore(r,t),e.insertBefore(c,t),a=(_=this.buildHeaders("row",this.getMappedStyle("rowheader"),this.getMappedStyle("rowendheader"))).root,p=_.endRoot,e.insertBefore(a,t),e.insertBefore(p,t),l=this.buildDatabody(),e.insertBefore(l,t),s&&(r.style.direction="rtl",l.style.direction="rtl"),this.m_isResizing=!1,this.m_resizingElement=null,this.m_resizingElementMin=null,this.m_databodyDragState=!1,this.m_docMouseMoveListener=this.handleMouseMove.bind(this),this.m_docMouseUpListener=this.handleMouseUp.bind(this),this.m_utils.isTouchDevice()?(l.addEventListener("touchstart",this.handleTouchStart.bind(this),!1),l.addEventListener("touchmove",this.handleTouchMove.bind(this),!1),l.addEventListener("touchend",this.handleTouchEnd.bind(this),!1),l.addEventListener("touchcancel",this.handleTouchCancel.bind(this),!1),r.addEventListener("touchstart",this.handleHeaderTouchStart.bind(this),!1),r.addEventListener("touchmove",this.handleHeaderTouchMove.bind(this),!1),r.addEventListener("touchend",this.handleHeaderTouchEnd.bind(this),!1),r.addEventListener("touchcancel",this.handleHeaderTouchCancel.bind(this),!1),a.addEventListener("touchstart",this.handleHeaderTouchStart.bind(this),!1),a.addEventListener("touchmove",this.handleHeaderTouchMove.bind(this),!1),a.addEventListener("touchend",this.handleHeaderTouchEnd.bind(this),!1),a.addEventListener("touchcancel",this.handleHeaderTouchCancel.bind(this),!1),c.addEventListener("touchstart",this.handleHeaderTouchStart.bind(this),!1),c.addEventListener("touchmove",this.handleHeaderTouchMove.bind(this),!1),c.addEventListener("touchend",this.handleHeaderTouchEnd.bind(this),!1),c.addEventListener("touchcancel",this.handleHeaderTouchCancel.bind(this),!1),p.addEventListener("touchstart",this.handleHeaderTouchStart.bind(this),!1),p.addEventListener("touchmove",this.handleHeaderTouchMove.bind(this),!1),p.addEventListener("touchend",this.handleHeaderTouchEnd.bind(this),!1),p.addEventListener("touchcancel",this.handleHeaderTouchCancel.bind(this),!1)):(m=this.m_utils.getMousewheelEvent(),l.addEventListener(m,this.handleDatabodyMouseWheel.bind(this),!1),l.addEventListener("mousedown",this.handleDatabodyMouseDown.bind(this),!1),l.addEventListener("mousemove",this.handleDatabodyMouseMove.bind(this),!1),l.addEventListener("mouseup",this.handleDatabodyMouseUp.bind(this),!1),l.addEventListener("mouseout",this.handleDatabodyMouseOut.bind(this),!1),l.addEventListener("mouseover",this.handleDatabodyMouseOver.bind(this),!1),l.addEventListener("dblclick",this.handleDatabodyDoubleClick.bind(this),!1),a.addEventListener(m,this.handleDatabodyMouseWheel.bind(this),!1),a.addEventListener("mousedown",this.handleHeaderMouseDown.bind(this),!1),r.addEventListener("mousedown",this.handleHeaderMouseDown.bind(this),!1),a.addEventListener("mouseover",this.handleHeaderMouseOver.bind(this),!1),r.addEventListener("mouseover",this.handleHeaderMouseOver.bind(this),!1),a.addEventListener("mousemove",this.handleRowHeaderMouseMove.bind(this),!1),r.addEventListener("mousemove",this.handleColumnHeaderMouseMove.bind(this),!1),a.addEventListener("mouseup",this.handleHeaderMouseUp.bind(this),!1),r.addEventListener("mouseup",this.handleHeaderMouseUp.bind(this),!1),a.addEventListener("mouseout",this.handleHeaderMouseOut.bind(this),!1),r.addEventListener("mouseout",this.handleHeaderMouseOut.bind(this),!1),a.addEventListener("click",this.handleHeaderClick.bind(this),!1),r.addEventListener("click",this.handleHeaderClick.bind(this),!1),p.addEventListener(m,this.handleDatabodyMouseWheel.bind(this),!1),p.addEventListener("mousedown",this.handleHeaderMouseDown.bind(this),!1),c.addEventListener("mousedown",this.handleHeaderMouseDown.bind(this),!1),p.addEventListener("mouseover",this.handleHeaderMouseOver.bind(this),!1),c.addEventListener("mouseover",this.handleHeaderMouseOver.bind(this),!1),p.addEventListener("mousemove",this.handleRowHeaderMouseMove.bind(this),!1),c.addEventListener("mousemove",this.handleColumnHeaderMouseMove.bind(this),!1),p.addEventListener("mouseup",this.handleHeaderMouseUp.bind(this),!1),c.addEventListener("mouseup",this.handleHeaderMouseUp.bind(this),!1),p.addEventListener("mouseout",this.handleHeaderMouseOut.bind(this),!1),c.addEventListener("mouseout",this.handleHeaderMouseOut.bind(this),!1),p.addEventListener("click",this.handleHeaderClick.bind(this),!1),c.addEventListener("click",this.handleHeaderClick.bind(this),!1)),this._shouldInitialize()&&this._handleInitialization(!0)):(u=this._buildEmptyText(),this.m_root.appendChild(u),this._handleInitialization(!1))},be.prototype.HandleResize=function(e,t){e=this.getRootElement().clientWidth,t=this.getRootElement().clientHeight,e==this.m_width&&t==this.m_height||(this.m_width=e,this.m_height=t,this.m_rowFetchSize=null,this.m_columnFetchSize=null,this.m_initialized&&(this.resizeGrid(),this.isFetchComplete()&&(this.m_resizeRequired=!0,this.fillViewport())))},be.prototype.resizeGrid=function(){var e,t,i,n,o,s,r,a,l,u,h,d,c,p,_,m,g,f,v,C,y,b,S,E,T,D,A;if(e=this.getWidth(),t=this.getHeight(),i=this.m_colHeader,v=this.m_colEndHeader,n=this.m_rowHeader,C=this.m_rowEndHeader,A=(o=this.m_databody).firstChild,S=t-(r=this.getColumnHeaderHeight())-this.getColumnEndHeaderHeight(),E=e-(a=this.getRowHeaderWidth())-this.getRowEndHeaderWidth(),this.m_utils.isTouchDevice(),m=this.m_utils.getScrollbarSize(),this._databodyEmpty()&&(null==this.m_empty?(f=this._buildEmptyText(),this.m_root.appendChild(f)):f=this.m_empty,y=this.getElementHeight(f),b=this.getElementWidth(f),y>this.getElementHeight(A)&&this.setElementHeight(A,y),b>this.getElementWidth(A)&&this.setElementWidth(A,b)),u=this.getElementWidth(o.firstChild),d=this.getElementHeight(o.firstChild),p=this.isDatabodyHorizontalScrollbarRequired(E))_=this.isDatabodyVerticalScrollbarRequired(S-m),o.style.overflow="auto";else if(_=this.isDatabodyVerticalScrollbarRequired(S))p=this.isDatabodyHorizontalScrollbarRequired(E-m),o.style.overflow="auto";else{this.m_handleScrollOverflow=!1;var I=this;setTimeout(function(){I.m_handleScrollOverflow||I.m_hasVerticalScroller||I.m_hasHorizontalScroller||(o.style.overflow="hidden",I.m_handleScrollOverflow=!0)},10)}this.m_hasHorizontalScroller=p,this.m_hasVerticalScroller=_,-1!=this.m_endColEndHeader?(c=Math.min(d+(p?m:0),S),l=p?c-m:c):(c=S,l=Math.min(d,p?c-m:c)),-1!=this.m_endRowEndHeader?(h=Math.min(u+(_?m:0),E),s=_?h-m:h):(h=E,s=Math.min(u,_?h-m:h)),T=a+s+(_?m:0),D=r+l+(p?m:0),g=this.getResources().isRTLMode()?"right":"left",this.setElementDir(n,0,g),this.setElementDir(n,r,"top"),this.setElementHeight(n,l),this.setElementDir(C,T,g),this.setElementDir(C,r,"top"),this.setElementHeight(C,l),this.setElementDir(i,a,g),this.setElementWidth(i,s),this.setElementDir(v,a,g),this.setElementDir(v,D,"top"),this.setElementWidth(v,s),this.setElementDir(o,r,"top"),this.setElementDir(o,a,g),this.setElementWidth(o,h),this.setElementHeight(o,c),this.m_scrollWidth=u-s,this.m_scrollHeight=d-l,this.buildCorners(),this._adjustHeaderBorders(),this.m_resizeRequired=!1,new Date},be.prototype._sizeDatabodyScroller=function(){var e,t,i,n,o,s,r,a,l,u,h,d;t=(e=this.m_databody).firstChild,i=this._databodyEmpty(),n=this._isHighWatermarkScrolling(),o=this.m_utils._getMaxDivHeightForScrolling(),s=this.m_utils._getMaxDivWidthForScrolling(),r=this.getDataSource().getCount("row"),a=this.getDataSource().getCount("column"),h=0,d=0,i?(h=Math.max(Math.max(this.m_endRowHeaderPixel,this.m_endRowEndHeaderPixel),1),d=Math.max(Math.max(this.m_endColHeaderPixel,this.m_endColEndHeaderPixel),1)):(h=this.m_endRowPixel,d=this.m_endColPixel),l=-1==r||n?h:r*this.m_avgRowHeight,u=-1==a||n?d:a*this.m_avgColWidth,this.setElementHeight(t,Math.min(o,l)),this.setElementWidth(t,Math.min(s,u)),this.m_initialized&&(this.m_scrollWidth=this.getElementWidth(t)-this.getElementWidth(e)+(this.m_hasVerticalScroller?this.m_utils.getScrollbarSize():0),this.m_scrollHeight=this.getElementHeight(t)-this.getElementHeight(e)+(this.m_hasHorizontalScroller?this.m_utils.getScrollbarSize():0))},be.prototype._adjustLastHeadersAlongAxis=function(e,t,i,n,o,s){var r,a;for(r=0;r<t;)a=this._getHeaderByIndex(e,r,i,t,n),s?this.m_utils.removeCSSClassName(a,o):this.m_utils.addCSSClassName(a,o),r+=this.getHeaderCellDepth(a)},be.prototype._adjustHeaderBordersAlongAxis=function(e,t,i,n,o,s,r,a){null!=e&&i>=0&&(n?this.m_utils.addCSSClassName(o,s):this.m_utils.removeCSSClassName(o,s),t(i)&&this._adjustLastHeadersAlongAxis(i,r,e,a,s,n))},be.prototype._adjustHeaderBorders=function(){var e,t,i,n,o,s,r,a,l,u,h,d,c,p,_;if(o=this.m_utils.getScrollbarSize(),u=this.getWidth(),h=this.getHeight(),e=this.getColumnHeaderHeight(),t=this.getElementWidth(this.m_colHeader),r=this.getElementHeight(this.m_colEndHeader),a=this.getRowHeaderWidth(),l=this.getElementHeight(this.m_rowHeader),i=a+t+this.getElementWidth(this.m_rowEndHeader)+(this.m_hasVerticalScroller?o:0)<u,n=e+l+r+(this.m_hasHorizontalScroller?o:0)<h,i&&this.m_endRowEndHeader>=0?(p=!0,this.m_addBorderRight=!0):1==this.m_addBorderRight&&(p=!1),null!=p)for(s=this.getMappedStyle("borderVerticalSmall"),null!=this.m_columnHeaderScrollbarSpacer&&(p?this.m_utils.addCSSClassName(this.m_columnHeaderScrollbarSpacer,s):this.m_utils.removeCSSClassName(this.m_columnHeaderScrollbarSpacer,s)),null!=this.m_bottomCorner&&(p?this.m_utils.addCSSClassName(this.m_bottomCorner,s):this.m_utils.removeCSSClassName(this.m_bottomCorner,s)),c=this.m_rowEndHeader.firstChild.childNodes,d=0;d<c.length;d++)p?this.m_utils.addCSSClassName(c[d],s):this.m_utils.removeCSSClassName(c[d],s);else s=this.getMappedStyle("borderVerticalNone"),_=this._isLastColumn.bind(this),this._adjustHeaderBordersAlongAxis(this.m_colHeader,_,this.m_endColHeader,i,this.m_columnHeaderScrollbarSpacer,s,this.m_columnHeaderLevelCount,this.m_startColHeader),this._adjustHeaderBordersAlongAxis(this.m_colEndHeader,_,this.m_endColEndHeader,i,this.m_bottomCorner,s,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader);if(p=null,n&&this.m_endColEndHeader>=0?(this.m_addBorderBottom=!0,p=!0):1==this.m_addBorderBottom&&(p=!1),null!=p)for(s=this.getMappedStyle("borderHorizontalSmall"),null!=this.m_rowHeaderScrollbarSpacer&&(p?this.m_utils.addCSSClassName(this.m_rowHeaderScrollbarSpacer,s):this.m_utils.removeCSSClassName(this.m_rowHeaderScrollbarSpacer,s)),null!=this.m_bottomCorner&&(p?this.m_utils.addCSSClassName(this.m_bottomCorner,s):this.m_utils.removeCSSClassName(this.m_bottomCorner,s)),c=this.m_colEndHeader.firstChild.childNodes,d=0;d<c.length;d++)p?this.m_utils.addCSSClassName(c[d],s):this.m_utils.removeCSSClassName(c[d],s);else s=this.getMappedStyle("borderHorizontalNone"),_=this._isLastRow.bind(this),this._adjustHeaderBordersAlongAxis(this.m_rowHeader,_,this.m_endRowHeader,n,this.m_rowHeaderScrollbarSpacer,s,this.m_rowHeaderLevelCount,this.m_startRowHeader),this._adjustHeaderBordersAlongAxis(this.m_rowEndHeader,_,this.m_endRowEndHeader,n,this.m_bottomCorner,s,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader)},be.prototype.buildCorners=function(){var e,t,i,n,o,s,r,a,l,u,h,d,c,p,_,m,g,f,v;if(e=this.m_utils.getScrollbarSize(),c=this.getWidth(),p=this.getHeight(),t=this.getColumnHeaderHeight(),l=this.getElementWidth(this.m_colHeader),h=this.getColumnEndHeaderHeight(),i=this.getRowHeaderWidth(),d=this.getRowEndHeaderWidth(),u=this.getElementHeight(this.m_rowHeader),s=this.getResources().isRTLMode()?"right":"left",-1!=this.m_endRowHeader&&-1!=this.m_endColHeader){if(null!=this.m_corner?o=this.m_corner:((o=document.createElement("div")).id=this.createSubId("corner"),o.className=this.getMappedStyle("topcorner")),this.setElementWidth(o,i),this.setElementHeight(o,t),null==this.m_corner){for(this.m_utils.isTouchDevice()?o.addEventListener("touchstart",this.handleCornerMouseDown.bind(this),!1):(o.addEventListener("mousedown",this.handleCornerMouseDown.bind(this),!1),o.addEventListener("mouseover",this.handleCornerMouseOver.bind(this),!1),o.addEventListener("mouseout",this.handleCornerMouseOut.bind(this),!1)),o.addEventListener("click",this.handleCornerClick.bind(this),!1),this.m_root.appendChild(o),this.m_corner=o,m=this.m_headerLabels.column.length?this.m_columnHeaderLevelHeights[this.m_columnHeaderLevelCount-1]:this.m_colHeaderHeight,v=0;v<this.m_headerLabels.row.length;v++)_=this.m_headerLabels.row[v],this.setElementHeight(_,m),o.appendChild(_);for(m=this.m_headerLabels.row.length?this.m_rowHeaderLevelWidths[this.m_rowHeaderLevelCount-1]:this.m_rowHeaderWidth,v=0;v<this.m_headerLabels.column.length;v++)_=this.m_headerLabels.column[v],this.setElementWidth(_,m),o.appendChild(_);if(this.m_headerLabels.column.length&&this.m_headerLabels.row.length)return g=this._getHeaderByIndex(this.m_startColHeader,this.m_columnHeaderLevelCount-1,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader),f=this.getElementHeight(g),this.m_colHeaderHeight+=f,this.m_columnHeaderLevelHeights[this.m_columnHeaderLevelCount-1]+=f,this.resizeColumnHeightsAndShift(f,this.m_columnHeaderLevelCount-1,!1),this.setElementHeight(this.m_colHeader,this.m_colHeaderHeight),void this.manageResizeScrollbars()}}else this.m_headerLabels.row=[],this.m_headerLabels.column=[];if(null!=this.m_corner&&null==o&&(this.m_root.removeChild(this.m_corner),this.m_corner=null),-1!=this.m_endRowHeader)if(this.m_hasHorizontalScroller||-1!=this.m_endColEndHeader){if(null!=this.m_rowHeaderScrollbarSpacer?r=this.m_rowHeaderScrollbarSpacer:((r=document.createElement("div")).id=this.createSubId("rhSbSpacer"),r.className=this.getMappedStyle("rowheaderspacer")),this.setElementDir(r,u+t,"top"),this.setElementDir(r,0,s),this.setElementWidth(r,this.m_rowHeaderWidth),-1!=this.m_endColEndHeader?this.setElementHeight(r,h+(this.m_hasHorizontalScroller?e:0)):this.setElementHeight(r,p-u-t),null==this.m_rowHeaderScrollbarSpacer)for(this.m_utils.isTouchDevice()?r.addEventListener("touchstart",this.handleCornerMouseDown.bind(this),!1):(r.addEventListener("mousedown",this.handleCornerMouseDown.bind(this),!1),r.addEventListener("mouseover",this.handleCornerMouseOver.bind(this),!1),r.addEventListener("mouseout",this.handleCornerMouseOut.bind(this),!1)),this.m_root.appendChild(r),this.m_rowHeaderScrollbarSpacer=r,v=0;v<this.m_headerLabels.columnEnd.length;v++)_=this.m_headerLabels.columnEnd[v],r.appendChild(_)}else null!=this.m_rowHeaderScrollbarSpacer&&this.m_root.removeChild(this.m_rowHeaderScrollbarSpacer),this.m_rowHeaderScrollbarSpacer=null,this.m_headerLabels.columnEnd=[];if(-1!=this.m_endColHeader)if(this.m_hasVerticalScroller||-1!=this.m_endRowEndHeader){if(null!=this.m_columnHeaderScrollbarSpacer?a=this.m_columnHeaderScrollbarSpacer:((a=document.createElement("div")).id=this.createSubId("chSbSpacer"),a.className=this.getMappedStyle("colheaderspacer")),this.setElementDir(a,i+l,s),this.setElementDir(a,0,"top"),-1!=this.m_endRowEndHeader?this.setElementWidth(a,d+(this.m_hasVerticalScroller?e:0)):this.setElementWidth(a,c-l-i),this.setElementHeight(a,this.m_colHeaderHeight),null==this.m_columnHeaderScrollbarSpacer)for(this.m_utils.isTouchDevice()?a.addEventListener("touchstart",this.handleCornerMouseDown.bind(this),!1):(a.addEventListener("mousedown",this.handleCornerMouseDown.bind(this),!1),a.addEventListener("mouseover",this.handleCornerMouseOver.bind(this),!1),a.addEventListener("mouseout",this.handleCornerMouseOut.bind(this),!1)),this.m_root.appendChild(a),this.m_columnHeaderScrollbarSpacer=a,v=0;v<this.m_headerLabels.rowEnd.length;v++)_=this.m_headerLabels.rowEnd[v],a.appendChild(_)}else null!=this.m_columnHeaderScrollbarSpacer&&this.m_root.removeChild(this.m_columnHeaderScrollbarSpacer),this.m_columnHeaderScrollbarSpacer=null,this.m_headerLabels.rowEnd=[];(this.m_hasHorizontalScroller&&this.m_hasVerticalScroller||this.m_hasVerticalScroller&&-1!=this.m_endColEndHeader||this.m_hasHorizontalScroller&&-1!=this.m_endRowEndHeader||-1!=this.m_endRowEndHeader&&-1!=this.m_endColEndHeader)&&(null!=this.m_bottomCorner?n=this.m_bottomCorner:((n=document.createElement("div")).id=this.createSubId("bcorner"),n.className=this.getMappedStyle("bottomcorner")),this.setElementDir(n,u+t,"top"),this.setElementDir(n,i+l,s),-1!=this.m_endRowEndHeader?this.setElementWidth(n,d+(this.m_hasVerticalScroller?e:0)):this.setElementWidth(n,c-l-i),-1!=this.m_endColEndHeader?this.setElementHeight(n,h+(this.m_hasHorizontalScroller?e:0)):this.setElementHeight(n,p-u-t),null==this.m_bottomCorner&&(this.m_root.appendChild(n),this.m_bottomCorner=n)),null!=this.m_bottomCorner&&null==n&&(this.m_root.removeChild(this.m_bottomCorner),this.m_bottomCorner=null)},be.prototype._updateScrollPosition=function(e){this._scrollToScrollPositionObject(e)},be.prototype._setScrollPosition=function(){this.m_setOptionCallback("scrollPosition",this._createScrollPositionObject(this.m_currentScrollLeft,this.m_currentScrollTop),{_context:{writeback:!0,internalSet:!0}})},be.prototype._clearScrollPositionKeys=function(){var e=this.m_options.getScrollPosition();e.rowKey=void 0,e.columnKey=void 0,this.m_setOptionCallback("scrollPosition",e,{_context:{internalSet:!0}})},be.prototype._createScrollPositionObject=function(e,t){var i={x:e,y:t},n=this.getResources().isRTLMode()?"right":"left",o=this._getCellAtPixel(e,t);if(null!=o)i.rowIndex=this._getIndex(o,"row"),i.columnIndex=this._getIndex(o,"column"),i.rowKey=this._getKey(o,"row"),i.columnKey=this._getKey(o,"column"),i.offsetX=e-this.getElementDir(o,n),i.offsetY=t-this.getElementDir(o,"top");else{var s=this._getHeaderAtPixel(t,"row");null!=s&&(i.rowIndex=this._getIndex(s),i.rowKey=this._getKey(s),i.offsetY=t-this.getElementDir(s,"top"));var r=this._getHeaderAtPixel(e,"column");null!=r&&(i.columnIndex=this._getIndex(r),i.columnKey=this._getKey(r),i.offsetX=e-this.getElementDir(r,n))}return i},be.prototype._getCellAtPixel=function(e,t){for(var i=this.m_databody.firstChild.childNodes,n=this.getResources().isRTLMode()?"right":"left",o=0;o<i.length;o++){var s=i[o],r=this.getElementDir(s,n),a=r+this.getElementWidth(s);if(r<=e&&e<a){var l=this.getElementDir(s,"top"),u=l+this.getElementHeight(s);if(l<=t&&t<u)return s}}return null},be.prototype._getHeaderAtPixel=function(e,t){var i=this;if("row"==t)var n=this.m_rowHeader.firstChild.childNodes,o=this.m_rowEndHeader.firstChild.childNodes,s="top",r="height";else if("column"==t)n=this.m_colHeader.firstChild.childNodes,o=this.m_colEndHeader.firstChild.childNodes,s=this.getResources().isRTLMode()?"right":"left",r="width";var a=function(t){for(var n=0;n<t.length;n++){var o=t[n],a=i.getElementDir(o,s),l=a+i.getElementDir(o,r);if(a<=e&&e<l)return o}},l=a(n);return null==l&&(l=a(o)),l},be.prototype._checkScrollPosition=function(){null!=this.m_desiredScrollPositionObject?this._scrollToScrollPositionObject(this.m_desiredScrollPositionObject):this.m_initialized?this._setScrollPosition():this._updateScrollPosition(this.m_options.getScrollPosition())},be.prototype._scrollToScrollPositionObject=function(e){var t=e.x,i=e.y,n=e.rowIndex,o=e.columnIndex,s=e.rowKey,r=e.columnKey,a=e.offsetX?e.offsetX:0,l=e.offsetY?e.offsetY:0,u=this.getResources().isRTLMode()?"right":"left",h=this;new Promise(function(e,t){null!=s||null!=r?h._indexes({row:s,column:r},function(t,i){e({rowIndexFromKey:t.row,columnIndexFromKey:t.column})}):e({rowIndexFromKey:null,columnIndexFromKey:null})}).then(function(d){var c=h._getPositionEstimate("column",u,r,d.columnIndexFromKey,o,t,a,h.m_currentScrollLeft,h._getMaxRightPixel(),h.m_avgColWidth),p=h._getPositionEstimate("row","top",s,d.rowIndexFromKey,n,i,l,h.m_currentScrollTop,h._getMaxBottomPixel(),h.m_avgRowHeight);c!=h.m_currentScrollLeft||p!=h.m_currentScrollTop?(h.m_desiredScrollPositionObject=e,h._initiateScroll(c,p)):(h.m_desiredScrollPositionObject=null,h._setScrollPosition())})},be.prototype._getPositionEstimate=function(e,t,i,n,o,s,r,a,l,u){var h,d,c=this._isHighWatermarkScrolling();if(null!=i&&-1!=n&&(null!=(d=this._getCellOrHeaderByKey(i,e))?h=this.getElementDir(d,t)+r:c?h=l:null!=n&&(h=u*n+r),null!=h))return h;null!=o?h=null!=(d=this._getCellOrHeaderByIndex(o,e))?this.getElementDir(d,t)+r:c?l:u*o:h=null!=s?s:a;return h},be.prototype._isKeyRendered=function(e,t){for(var i=this.m_databody.firstChild.childNodes,n=0;n<i.length;n++)if(this._shallowThenDeepCompare(this._getKey(i[n],t),e))return i[n]},be.prototype.isDatabodyHorizontalScrollbarRequired=function(e){var t,i,n;return t=this.m_databody,n=null==e?this.getElementWidth(t):e,i=t.firstChild,this.getElementWidth(i)>n},be.prototype.isDatabodyVerticalScrollbarRequired=function(e){var t,i,n;return t=this.m_databody,n=null==e?this.getElementHeight(t):e,i=t.firstChild,this.getElementHeight(i)>n},be.prototype.buildStatus=function(){var e,t;return(e=document.createElement("div")).className=this.getMappedStyle("loadingicon"),(t=document.createElement("div")).id=this.createSubId("status"),t.className=this.getMappedStyle("status"),t.setAttribute("role","status"),t.appendChild(e),t},be.prototype.buildAccInfo=function(){var e=document.createElement("div");return e.id=this.createSubId("info"),e.className=this.getMappedStyle("info"),e.setAttribute("role","status"),e},be.prototype.buildAccSummary=function(){var e=document.createElement("div");return e.id=this.createSubId("summary"),e.className=this.getMappedStyle("info"),e},be.prototype.buildStateInfo=function(){var e=document.createElement("div");return e.id=this.createSubId("state"),e.className=this.getMappedStyle("info"),e},be.prototype.buildContextInfo=function(){var e=document.createElement("div");return e.id=this.createSubId("context"),e.className=this.getMappedStyle("info"),e},be.prototype.buildPlaceHolder=function(){var e=document.createElement("div");return e.id=this.createSubId("placeHolder"),e.className=this.getMappedStyle("info"),e},be.prototype.populateAccInfo=function(){var e;e=this.getResources().getTranslatedText("accessibleSummaryExact",{rownum:this.m_endRow+1,colnum:this.m_endCol+1}),this.getDataSource().getExpandedKeys&&(e=e+". "+this.getResources().getTranslatedText("accessibleSummaryExpanded",{num:this.getDataSource().getExpandedKeys().length})),e+=". ",this.m_accSummary.textContent=e},be.prototype.SetAccessibleContext=function(e){var t,i,n,o,s,r,a;if(null!=e&&(null!=e.context&&(this.m_accessibleContext=e.context),null!=e.state&&(this.m_stateInfo.textContent=e.state),null!=e.ancestors&&this._isDatabodyCellActive())){if(t="",i=e.ancestors,null!=(n=this.m_active.indexes.column)&&n>=0)for(o=0;o<i.length;o++)o>0&&(t=t.concat(", ")),s=i[o],null!=(r=this._getAxisCellsByKey(s.key,"row"))&&(a=null!=(a=r[0].textContent)?a.replace(/\n|<br\s*\/?>/gi,"").trim():"",t=t.concat(s.label).concat(" ").concat(a));this.m_accessibleContext=t.concat(", ").concat(this.m_accessibleContext)}},be.prototype._updateStateInfo=function(e){var t,i,n;for(n=". ",t=0;t<e.length;t++)null!=(i=this.getResources().getTranslatedText(e[t].key,e[t].args))&&(n=2===n.length?n+i:n+", "+i);n=0===n.length?n:n+". ",this.m_stateInfo.textContent=n},be.prototype._updateContextInfo=function(e,t){var i,n,o,s,r,a,l,u,h;e.indexes&&(i=e.indexes.row,n=e.indexes.column),r=e.level,a=e.rowHeader,l=e.rowEndHeader,u=e.columnHeader,h=e.columnEndHeader,o="",null!=this.m_accessibleContext||isNaN(i)||"row"==t||null!=(s=this.getResources().getTranslatedText("accessibleRowContext",{index:i+1}))&&(o=s),isNaN(n)||"column"==t||null!=(s=this.getResources().getTranslatedText("accessibleColumnContext",{index:n+1}))&&(o=0===o.length?s:o+", "+s),isNaN(a)||"rowHeader"==t||null!=(s=this.getResources().getTranslatedText("accessibleRowHeaderContext",{index:a+1}))&&(o=0===o.length?s:o+", "+s),isNaN(u)||"columnHeader"==t||null!=(s=this.getResources().getTranslatedText("accessibleColumnHeaderContext",{index:u+1}))&&(o=0===o.length?s:o+", "+s),isNaN(l)||"rowEndHeader"==t||null!=(s=this.getResources().getTranslatedText("accessibleRowEndHeaderContext",{index:l+1}))&&(o=0===o.length?s:o+", "+s),isNaN(h)||"columnEndHeader"==t||null!=(s=this.getResources().getTranslatedText("accessibleColumnEndHeaderContext",{index:h+1}))&&(o=0===o.length?s:o+", "+s),isNaN(r)||"level"==t||null!=(s=this.getResources().getTranslatedText("accessibleLevelContext",{level:r+1}))&&(o=0===o.length?s:o+", "+s),o=0===o.length?o:o+". ",null!=this.m_accessibleContext&&(o+=this.m_accessibleContext,this.m_accessibleContext=null),this.m_contextInfo.textContent=o},be.prototype._isCountUnknown=function(e){var t,i,n,o,s;return t=this.getDataSource(),"row"===e||"rowEnd"===e?(void 0===this.m_isEstimateRowCount&&(i=t.getCountPrecision("row"),o=t.getCount("row"),this.m_isEstimateRowCount="estimate"===i||o<0),this.m_isEstimateRowCount):("column"===e||"columnEnd"===e)&&(void 0===this.m_isEstimateColumnCount&&(n=t.getCountPrecision("column"),s=t.getCount("column"),this.m_isEstimateColumnCount="estimate"===n||s<0),this.m_isEstimateColumnCount)},be.prototype._isCountUnknownOrHighwatermark=function(e){return this._isCountUnknown(e)||this._isHighWatermarkScrolling()},be.prototype._hideHeader=function(e){e.style.display="none"},be.prototype._showHeader=function(e){e.style.display=""},be.prototype.buildHeaders=function(e,t,i){var n,o,s,r,a;return a=this.getMappedStyle("scroller")+(this.m_utils.isTouchDevice()?" "+this.getMappedStyle("scroller-mobile"):""),(n=document.createElement("div")).id=this.createSubId(e+"Header"),n.className=t+" "+this.getMappedStyle("header"),(s=document.createElement("div")).className=a,n.appendChild(s),(o=document.createElement("div")).id=this.createSubId(e+"EndHeader"),o.className=i+" "+this.getMappedStyle("endheader"),(r=document.createElement("div")).className=a,o.appendChild(r),"column"===e?(this.m_colHeader=n,this.m_colEndHeader=o):"row"===e&&(this.m_rowHeader=n,this.m_rowEndHeader=o),this.fetchHeaders(e,0,n,o,null,null),{root:n,endRoot:o}},be.prototype.fetchHeaders=function(e,t,i,n,o,s){var r,a;this.m_fetching[e]||(null==o&&(o=this.getFetchCount(e,t)),r={axis:e,start:t,count:o,header:i,endHeader:n},this.m_fetching[e]=r,a=null!=s&&null!=s.success?s.success:this.handleHeadersFetchSuccess,this.showStatusText(),this._signalTaskStart(),this.getDataSource().fetchHeaders(r,{success:a,error:this.handleHeadersFetchError},{success:this,error:this}))},be.prototype.isHeaderFetchResponseValid=function(e){var t;return t=e.axis,null!=this.m_fetching&&(this.m_fetching[t].count,e==this.m_fetching[t])},be.prototype.isHeaderFetchResponseInViewport=function(e){var t,i;return!this.m_initialized||(i=e.axis,t=e.start,("row"==i?this._getLongScrollStart(this.m_currentScrollTop,this.m_prevScrollTop,i):this._getLongScrollStart(this.m_currentScrollLeft,this.m_prevScrollLeft,i)).start==t)},be.prototype.handleHeadersFetchSuccess=function(e,t,i,n){var o,s,r,a,l,u,h,d;if(h=(u=this.m_options.getScrollPolicyOptions())?u.maxRowCount:null,d=u?u.maxColumnCount:null,this.isHeaderFetchResponseValid(t)){if(o=t.axis,this.isLongScroll()&&!this.isHeaderFetchResponseInViewport(t))return this.m_fetching[o]=!1,this.m_headerInvalid=!0,void this._signalTaskEnd();this.m_fetching[o]=!1,s=t.header,r=t.endHeader,a=t.start,l=this.getDataSource().getCount(o),"column"===o?(null!=e&&(this.buildColumnHeaders(s,e,a,l,!1,!1),(e.getCount()<t.count||d&&d>0&&d===a+e.getCount())&&(this.m_stopColumnHeaderFetch=!0)),this.m_endColHeader<0?(this._hideHeader(s),this.m_stopColumnHeaderFetch=!0):(this.m_hasColHeader=!0,this._buildHeaderLabels(o,e)),null!=i&&(this.buildColumnEndHeaders(r,i,a,l,!1,!1),(i.getCount()<t.count||d&&d>0&&d===a+i.getCount())&&(this.m_stopColumnEndHeaderFetch=!0)),this.m_endColEndHeader<0?(this._hideHeader(r),this.m_stopColumnEndHeaderFetch=!0):(this.m_hasColEndHeader=!0,this._buildHeaderLabels("columnEnd",i))):"row"===o&&(null!=e&&(this.buildRowHeaders(s,e,a,l,n,!1),(e.getCount()<t.count||h&&h>0&&h===a+e.getCount())&&(this.m_stopRowHeaderFetch=!0)),this.m_endRowHeader<0?(this._hideHeader(s),this.m_stopRowHeaderFetch=!0):(this.m_hasRowHeader=!0,this._buildHeaderLabels(o,e)),null!=i&&(this.buildRowEndHeaders(r,i,a,l,n,!1),(i.getCount()<t.count||h&&h>0&&h===a+i.getCount())&&(this.m_stopRowEndHeaderFetch=!0)),this.m_endRowEndHeader<0?(this._hideHeader(r),this.m_stopRowEndHeaderFetch=!0):(this.m_hasRowEndHeader=!0,this._buildHeaderLabels("rowEnd",i))),this.isFetchComplete()&&(this.hideStatusText(),this._shouldInitialize()&&!n&&this._handleInitialization(!0)),this.m_initialized&&this._sizeDatabodyScroller(),this._signalTaskEnd()}else this._signalTaskEnd()},be.prototype.handleHeadersFetchError=function(e,t){var i=t.axis;this.m_fetching[i]=!1,this._signalTaskEnd()},be.prototype.createHeaderContext=function(e,t,i,n,o,s,r,a){var l,u;for(u in(l={}).axis=e,l.index=t,l.data=i,l.component=this,l.datasource=this.getDataSource(),l.level=s,l.depth=a,l.extent=r,null!=o&&(l.parentElement=o),n)n.hasOwnProperty(u)&&(l[u]=n[u]);return null!=this.m_createContextCallback&&this.m_createContextCallback.call(this,l),this.m_fixContextCallback.call(this,l)},be.prototype._createLabelContext=function(e,t,i,n){var o;return(o={}).axis=e,o.level=t,o.data=i,o.component=this,o.datasource=this.getDataSource(),null!=n&&(o.parentElement=n),null!=this.m_createContextCallback&&this.m_createContextCallback.call(this,o),this.m_fixContextCallback.call(this,o)},be.prototype._buildHeaderLabels=function(e,t){var i,n,o,s,r,a,l,u,h,d,c;if(0===this.m_headerLabels[e].length&&t&&t.getLabel&&(n=t.getLevelCount(),"rowEnd"==e?i=this.getResources().isRTLMode()?"left":"right":"row"==e?i=this.getResources().isRTLMode()?"right":"left":"column"==e?i="top":"columnEnd"==e&&(i="bottom"),o=0,n>0))for(c=0;c<n;c++)r=document.createElement("div"),null!=(s=t.getLabel(c))&&(l=this._createLabelContext(e,c,s,r),r.setAttribute(this.getResources().getMappedAttribute("busyContext"),""),this._createUniqueId(r),r[this.getResources().getMappedAttribute("context")]=l,null!=(a=this.m_options.getInlineStyle(e,l,!0))&&(r.style.cssText=a),r.className=this.getMappedStyle("headerlabel")+" "+this.getMappedStyle(e.toLowerCase()+"headerlabel"),null!=(u=this.m_options.getStyleClass(e,l,!0))&&(r.className+=" "+u),"row"===e||"rowEnd"===e?(h="row"===e?this.m_rowHeaderLevelWidths[c]:this.m_rowEndHeaderLevelWidths[c],"rowEnd"===e&&(r.style.height="100%"),this.setElementWidth(r,h),this.setElementDir(r,o,i),this.setElementDir(r,0,"bottom")):(h="column"===e?this.m_columnHeaderLevelHeights[c]:this.m_columnEndHeaderLevelHeights[c],"columnEnd"===e&&(r.style.width="100%"),this.setElementHeight(r,h),this.setElementDir(r,o,i),this.setElementDir(r,0,this.getResources().isRTLMode()?"left":"right")),d=this.m_options.getRenderer(e,!0),this._renderContent(d,l,r,s),this.m_headerLabels[e].push(r),o+=h)},be.prototype.buildColumnHeaders=function(e,t,i,n,o,s){var r,a,l,u,h,d,c,p,_,m;null==this.m_columnHeaderLevelCount&&(this.m_columnHeaderLevelCount=t.getLevelCount()),0!=this.m_columnHeaderLevelCount&&("column",a=t.getCount(),!1,null,u=(l=i>this.m_endColHeader)?this.m_endColHeaderPixel:this.m_startColHeaderPixel,h=this.m_endColHeader,d=this.m_columnHeaderLevelCount,c=this.getMappedStyle("colheader")+" "+this.getMappedStyle("header"),p=this.getMappedStyle("headercell")+" "+this.getMappedStyle("colheadercell"),!1,_=(r=this.buildAxisHeaders(e,t,"column",i,a,l,!1,null,u,h,d,c,p,!1)).totalHeaderDimension,m=r.totalLevelDimension,0==_||0!=this.m_avgColWidth&&null!=this.m_avgColWidth||(this.m_avgColWidth=_/a),this.m_colHeaderHeight||(this.m_colHeaderHeight=m,this.setElementHeight(e,this.m_colHeaderHeight)),l?(this.m_endColHeader=i+a-1,this.m_endColHeaderPixel=this.m_endColHeaderPixel+_):(this.m_startColHeader=this.m_startColHeader-a,this.m_startColHeaderPixel=this.m_startColHeaderPixel-_),-1==n&&(n=this.m_endColHeader),!this._isCountUnknown("column")&&this._isHighWatermarkScrolling()&&this.m_endColHeader+1>=n?this.m_stopColumnHeaderFetch=!0:this.m_stopColumnHeaderFetch=r.stopFetch,0==this.m_startColHeader&&0!=this.m_startColHeaderPixel&&(this._shiftHeadersAlongAxisInContainer(e.firstChild,0,-1*this.m_startColHeaderPixel,this.getResources().isRTLMode()?"right":"left",this.getMappedStyle("colheadercell")),this.m_startColHeaderPixel=0))},be.prototype.buildColumnEndHeaders=function(e,t,i,n,o,s){var r,a,l,u,h,d,c,p,_,m;null==this.m_columnEndHeaderLevelCount&&(this.m_columnEndHeaderLevelCount=t.getLevelCount()),0!=this.m_columnEndHeaderLevelCount&&("columnEnd",a=t.getCount(),!1,null,u=(l=i>this.m_endColEndHeader)?this.m_endColEndHeaderPixel:this.m_startColEndHeaderPixel,h=this.m_endColEndHeader,d=this.m_columnEndHeaderLevelCount,c=this.getMappedStyle("colendheader")+" "+this.getMappedStyle("endheader"),p=this.getMappedStyle("endheadercell")+" "+this.getMappedStyle("colendheadercell"),!1,_=(r=this.buildAxisHeaders(e,t,"columnEnd",i,a,l,!1,null,u,h,d,c,p,!1)).totalHeaderDimension,m=r.totalLevelDimension,0==_||0!=this.m_avgColWidth&&null!=this.m_avgColWidth||(this.m_avgColWidth=_/a),this.m_colEndHeaderHeight||(this.m_colEndHeaderHeight=m,this.setElementHeight(e,this.m_colEndHeaderHeight)),l?(this.m_endColEndHeader=i+a-1,this.m_endColEndHeaderPixel=this.m_endColEndHeaderPixel+_):(this.m_startColEndHeader=this.m_startColEndHeader-a,this.m_startColEndHeaderPixel=this.m_startColEndHeaderPixel-_),-1==n&&(n=this.m_endColEndHeader),!this._isCountUnknown("column")&&this._isHighWatermarkScrolling()&&this.m_endColEndHeader+1>=n?this.m_stopColumnEndHeaderFetch=!0:this.m_stopColumnEndHeaderFetch=r.stopFetch,0==this.m_startColEndHeader&&0!=this.m_startColEndHeaderPixel&&(this._shiftHeadersAlongAxisInContainer(e.firstChild,0,-1*this.m_startColEndHeaderPixel,this.getResources().isRTLMode()?"right":"left",this.getMappedStyle("colendheadercell")),this.m_startColEndHeaderPixel=0))},be.prototype.buildRowHeaders=function(e,t,i,n,o,s){var r,a,l,u,h,d,c,p,_,m,g,f;if(null==this.m_rowHeaderLevelCount&&(this.m_rowHeaderLevelCount=t.getLevelCount()),0!=this.m_rowHeaderLevelCount){if("row",a=t.getCount(),h=(l=i>this.m_endRowHeader)?this.m_endRowHeaderPixel:this.m_startRowHeaderPixel,o?(u=e.firstChild.childNodes[i-this.m_startRowHeader],h=this.getElementDir(u,"top")):u=null,d=this.m_endRowHeader,c=this.m_rowHeaderLevelCount,p=this.getMappedStyle("rowheader")+" "+this.getMappedStyle("header"),_=this.getMappedStyle("headercell")+" "+this.getMappedStyle("rowheadercell"),m=(r=this.buildAxisHeaders(e,t,"row",i,a,l,o,u,h,d,c,p,_,s)).totalHeaderDimension,g=r.totalLevelDimension,s)return r;0==m||0!=this.m_avgRowHeight&&null!=this.m_avgRowHeight||(this.m_avgRowHeight=m/a),this.m_rowHeaderWidth||(this.m_rowHeaderWidth=g,this.setElementWidth(e,this.m_rowHeaderWidth)),l?(-1!=this.m_endRowHeader&&0!=a&&null!=(f=e.firstChild.childNodes[this.m_endRowHeader-this.m_startRowHeader])&&this.m_utils.removeCSSClassName(f,this.getMappedStyle("borderHorizontalNone")),this.m_endRowHeader=i+a-1,this.m_endRowHeaderPixel=this.m_endRowHeaderPixel+m):o?(i<this.m_startRowHeader&&(this.m_startRowHeader=i,this.m_startRowHeaderPixel=Math.max(0,this.m_startRowHeaderPixel-m)),this.m_endRowHeader=this.m_endRowHeader+a,this.m_endRowHeaderPixel=Math.max(0,this.m_endRowHeaderPixel+m),this.pushRowHeadersDown(u,m)):(this.m_startRowHeader=Math.max(0,this.m_startRowHeader-a),this.m_startRowHeaderPixel=this.m_startRowHeaderPixel-m),-1==n&&(n=this.m_endRowHeader),!this._isCountUnknown("row")&&this._isHighWatermarkScrolling()&&this.m_endRowHeader+1>=n?this.m_stopRowHeaderFetch=!0:this.m_stopRowHeaderFetch=r.stopFetch,0==this.m_startRowHeader&&0!=this.m_startRowHeaderPixel&&(this._shiftHeadersAlongAxisInContainer(e.firstChild,0,-1*this.m_startRowHeaderPixel,"top",this.getMappedStyle("rowheadercell")),this.m_startRowHeaderPixel=0)}},be.prototype.buildRowEndHeaders=function(e,t,i,n,o,s){var r,a,l,u,h,d,c,p,_,m,g,f;if(null==this.m_rowEndHeaderLevelCount&&(this.m_rowEndHeaderLevelCount=t.getLevelCount()),0!=this.m_rowEndHeaderLevelCount){if("rowEnd",a=t.getCount(),h=(l=i>this.m_endRowEndHeader)?this.m_endRowEndHeaderPixel:this.m_startRowEndHeaderPixel,o?(u=e.firstChild.childNodes[i-this.m_startRowEndHeader],h=this.getElementDir(u,"top")):u=null,d=this.m_endRowEndHeader,c=this.m_rowEndHeaderLevelCount,p=this.getMappedStyle("rowendheader")+" "+this.getMappedStyle("endheader"),_=this.getMappedStyle("endheadercell")+" "+this.getMappedStyle("rowendheadercell"),r=this.buildAxisHeaders(e,t,"rowEnd",i,a,l,o,u,h,d,c,p,_,s),s)return r;if(m=r.totalHeaderDimension,g=r.totalLevelDimension,s)return r;0==m||0!=this.m_avgRowHeight&&null!=this.m_avgRowHeight||(this.m_avgRowHeight=m/a),this.m_rowEndHeaderWidth||(this.m_rowEndHeaderWidth=g,this.setElementWidth(e,this.m_rowEndHeaderWidth)),l?(-1!=this.m_endRowEndHeader&&0!=a&&null!=(f=e.firstChild.childNodes[this.m_endRowEndHeader-this.m_startRowEndHeader])&&this.m_utils.removeCSSClassName(f,this.getMappedStyle("borderHorizontalNone")),this.m_endRowEndHeader=i+a-1,this.m_endRowEndHeaderPixel=this.m_endRowEndHeaderPixel+m):o?(i<this.m_startRowEndHeader&&(this.m_startRowEndHeader=i,this.m_startRowEndHeaderPixel=Math.max(0,this.m_startRowEndHeaderPixel-m)),this.m_endRowEndHeader=this.m_endRowEndHeader+a,this.m_endRowEndHeaderPixel=Math.max(0,this.m_endRowEndHeaderPixel+m),this.pushRowHeadersDown(u,m)):(this.m_startRowEndHeader=Math.max(0,this.m_startRowEndHeader-a),this.m_startRowEndHeaderPixel=this.m_startRowEndHeaderPixel-m),-1==n&&(n=this.m_endRowEndHeader),!this._isCountUnknown("row")&&this._isHighWatermarkScrolling()&&this.m_endRowEndHeader+1>=n?this.m_stopRowEndHeaderFetch=!0:this.m_stopRowEndHeaderFetch=r.stopFetch,0==this.m_startRowEndHeader&&0!=this.m_startRowEndHeaderPixel&&(this._shiftHeadersAlongAxisInContainer(e.firstChild,0,-1*this.m_startRowEndHeaderPixel,"top",this.getMappedStyle("rowendheadercell")),this.m_startRowEndHeaderPixel=0)}},be.prototype.buildAxisHeaders=function(e,t,i,n,o,s,r,a,l,u,h,d,c,p){var _,m,g,f,v,C,y,b,S,E,T,D,A;if(b=(A=-1!=i.indexOf("column"))?"height":"width",m=!1,f=0,v=0,D=0,T=0,!p){if(0==o&&this._isCountUnknown(i))return{totalHeaderDimension:f,totalLevelDimension:v,stopFetch:m=!0};_=e.firstChild,-1==u&&""==e.className&&(e.className=d,e.style[b]="",_.style[b]="")}for(g=this.m_options.getRenderer(i),C=document.createDocumentFragment(),y=0;o-y>0;)s||r?(S=n+y,D=A?l+f:0,T=A?0:l+f):(S=n+(o-1-y),D=A?l-f:0,T=A?0:l-f),y+=(E=this.buildLevelHeaders(C,S,0,D,T,s,r,g,t,i,c,h)).count,f+=E.totalHeaderDimension,E.totalLevelDimension>v&&(v=E.totalLevelDimension);return p?C:(s?_.appendChild(C):r?_.insertBefore(C,a):_.insertBefore(C,_.firstChild),e.hasChildNodes()||r||e.appendChild(_),{totalHeaderDimension:f,totalLevelDimension:v,stopFetch:m})},be.prototype._renderContent=function(e,t,i,n){var o;if(null!=e){null!=(o=e.call(this,t))&&(null===o.parentNode||o.parentNode instanceof DocumentFragment?(i.appendChild(o),this.m_subtreeAttachedCallback(o)):null!=o.parentNode||o.toString&&i.appendChild(document.createTextNode(o.toString())));var s=this.m_contextCallback(i).getBusyContext(),r=this;s.whenReady().then(function(){r._disableAllFocusableElements(i)})}else null!=n&&"object"==typeof n&&n.hasOwnProperty("data")&&(n=n.data),null==n&&(n=""),i.appendChild(document.createTextNode(n.toString()))},be.prototype.buildLevelHeaders=function(e,t,i,n,o,s,r,a,l,u,h,d){var c,p,_,m,g,f,v,C,y,b,S,E,T,D,A,I,O,w,R,x,L,N,P,M,j,H,U,k,B,F,V,G,$;if(w=0,B=0,x=0,L=0,"row"===u?($="row",G=this.m_rowHeader,c="width",D=this.m_rowHeaderLevelWidths,p="height",_="top",m=o,g=this.getResources().isRTLMode()?"right":"left",f=n,v=this.m_startRowHeader,C=this.m_endRowHeader):"rowEnd"==u?($="row",G=this.m_rowEndHeader,c="width",D=this.m_rowEndHeaderLevelWidths,p="height",_="top",m=o,g=this.getResources().isRTLMode()?"left":"right",f=n,v=this.m_startRowEndHeader,C=this.m_endRowEndHeader):"column"==u?($="column",G=this.m_colHeader,c="height",D=this.m_columnHeaderLevelHeights,p="width",_=this.getResources().isRTLMode()?"right":"left",m=n,g="top",f=o,v=this.m_startColHeader,C=this.m_endColHeader):($="column",G=this.m_colEndHeader,c="height",D=this.m_columnEndHeaderLevelHeights,p="width",_=this.getResources().isRTLMode()?"right":"left",m=n,g="bottom",f=o,v=this.m_startColEndHeader,C=this.m_endColEndHeader),b=(y=l.getExtent(t,i)).extent,S=y.more.before,E=y.more.after,j=l.getDepth(t,i),S&&t===C+1){for(T=this._getHeaderContainer(t-1,i,0,null,G,d),this._setAttribute(T,"extent",this._getAttribute(T,"extent",!0)+b),A=T.firstChild,w=this.getElementDir(A,c),O=0;O<b;)m+=(I="column"===u||"columnEnd"===u?this.buildLevelHeaders(T,t+O,i+j,m,f+w,s,r,a,l,u,h,d):this.buildLevelHeaders(T,t+O,i+j,f+w,m,s,r,a,l,u,h,d)).totalHeaderDimension,x+=I.totalHeaderDimension,L+=I.count,O+=I.count;this.setElementDir(A,this.getElementDir(A,p)+x,p)}else if(E&&t===v-1){for(T=this._getHeaderContainer(t+1,i,0,null,G,d),this._setAttribute(T,"extent",this._getAttribute(T,"extent",!0)+b),this._setAttribute(T,"start",this._getAttribute(T,"start",!0)-b),A=T.firstChild,w=this.getElementDir(A,c),O=0;O<b;)m-=(I="column"===u||"columnEnd"===u?this.buildLevelHeaders(T,t-O,i+j,m,f+w,s,r,a,l,u,h,d):this.buildLevelHeaders(T,t-O,i+j,f+w,m,s,r,a,l,u,h,d)).totalHeaderDimension,x+=I.totalHeaderDimension,L+=I.count,O+=I.count;this.setElementDir(A,this.getElementDir(A,p)+x,p),this.setElementDir(A,m,_)}else{if(N=l.getData(t,i),P=l.getMetadata(t,i),A=document.createElement("div"),M=this.createHeaderContext(u,t,N,P,A,i,b,j),A.setAttribute(this.getResources().getMappedAttribute("busyContext"),""),this._createUniqueId(A),A[this.getResources().getMappedAttribute("context")]=M,H=this.m_options.getInlineStyle(u,M),U=this.m_options.getStyleClass(u,M),null!=H&&(A.style.cssText=H),A.className=h,A.className+=" "+this.getMappedStyle("depth")+j,null!=U&&(A.className+=" "+U),this.setElementDir(A,f,g),this.setElementDir(A,m,_),w=this._getHeaderLevelDimension(i,A,D,c,j),this.setElementDir(A,w,c),R=this._getHeaderDimension(A,M.key,$,p),this._setAttribute(A,"depth",j),i!=d-1&&((T=document.createElement("div")).className=this.getMappedStyle("groupingcontainer"),T.appendChild(A),this._setAttribute(T,"start",s||r?t:t-b+1),this._setAttribute(T,"extent",b),this._setAttribute(T,"level",i)),i+j==d)this.setElementDir(A,R,p),x+=R,L++,B=w,s||r||(m-=R,this.setElementDir(A,m,_));else{for(O=0;O<b;O++)k=s||r?t+O:t-O,R=(I="column"===u||"columnEnd"===u?this.buildLevelHeaders(T,k,i+j,m,f+w,s,r,a,l,u,h,d):this.buildLevelHeaders(T,k,i+j,f+w,m,s,r,a,l,u,h,d)).totalHeaderDimension,m=s||r?m+R:m-R,x+=R,L+=I.count,O+=I.count-1;B=w+I.totalLevelDimension,s||r||this.setElementDir(A,m,_),this.setElementDir(A,x,p)}"columnEnd"==u&&this.m_addBorderBottom&&this.m_utils.addCSSClassName(A,this.getMappedStyle("borderHorizontalSmall")),"rowEnd"==u&&this.m_addBorderRight&&this.m_utils.addCSSClassName(A,this.getMappedStyle("borderVerticalSmall")),this._isHeaderResizeEnabled(u,M)&&this._setAttribute(A,"resizable","true"),null!=T?this.m_root.appendChild(T):this.m_root.appendChild(A),this._renderContent(a,M,A,N),"column"===u&&this._isSortEnabled(u,M)&&(null!=P.sortDirection&&null==this.m_sortInfo&&(this.m_sortInfo={},this.m_sortInfo.key=P.key,this.m_sortInfo.direction=P.sortDirection,this.m_sortInfo.axis=u),V=this._buildSortIcon(M),A.appendChild(V),this._setAttribute(A,"sortable","true")),s||r?null!=T?e.appendChild(T):e.appendChild(A):null!=T?e.firstChild?this.m_utils.containsCSSClassName(e.firstChild,this.getMappedStyle("groupingcontainer"))?e.insertBefore(T,e.firstChild):(this.m_utils.containsCSSClassName(e.firstChild,this.getMappedStyle("headercell"))||this.m_utils.containsCSSClassName(e.firstChild,this.getMappedStyle("endheadercell")))&&e.insertBefore(T,e.firstChild.nextSibling):e.appendChild(T):this.m_utils.containsCSSClassName(e,this.getMappedStyle("groupingcontainer"))?e.insertBefore(A,e.firstChild.nextSibling):e.insertBefore(A,e.firstChild)}return"column"===u||"columnEnd"===u?this._isLastColumn(t+b-1)&&this.m_utils.addCSSClassName(A,this.getMappedStyle("borderVerticalNone")):this._isLastRow(t+b-1)&&!r&&this.m_utils.addCSSClassName(A,this.getMappedStyle("borderHorizontalNone")),(F={}).totalLevelDimension=B,F.totalHeaderDimension=x,F.count=L,F},be.prototype._getHeaderLevelDimension=function(e,t,i,n,o){for(var s=0,r=0,a=0;a<o;a++){if(null==(r=i[e+a])){s=null;break}s+=r}return null!=s?s:(s=this.getElementDir(t,n),1==o&&(i[e]=s),s)},be.prototype._getHeaderContainer=function(e,t,i,n,o,s){var r,a,l,u;if(null==n?(n=o.firstChild.childNodes,u=0):u=1,i===s-1)return n[0].parentNode;for(;u<n.length;){if(r=this._getAttribute(n[u],"start",!0),a=this._getAttribute(n[u],"extent",!0),l=this._getAttribute(n[u].firstChild,"depth",!0),e>=r&&e<r+a)return t<i+l?n[u]:this._getHeaderContainer(e,t,i+l,n[u].childNodes,o,s);u++}return null},be.prototype._getHeaderByIndex=function(e,t,i,n,o){var s,r;return t<0?null:1===n?i.firstChild.childNodes[s=e-o]:null==(r=this._getHeaderContainer(e,t,0,null,i,n))?null:t<=this._getAttribute(r,"level",!0)+this._getAttribute(r.firstChild,"depth",!0)-1?r.firstChild:(s=e-this._getAttribute(r,"start",!0)+1,r.childNodes[s])},be.prototype._getColumnHeaderLevelHeight=function(e,t){var i;return null==this.m_columnHeaderLevelHeights&&(this.m_columnHeaderLevelHeights=[]),null!=(i=this.m_columnHeaderLevelHeights[e])?i:(i=this.getElementHeight(t),this.m_columnHeaderLevelHeights[e]=i,i)},be.prototype._getAttribute=function(e,t,i){var n=e.getAttribute(this.getResources().getMappedAttribute(t));return i?parseInt(n,10):n},be.prototype._setAttribute=function(e,t,i){e.setAttribute(this.getResources().getMappedAttribute(t),i)},be.prototype.buildDatabody=function(){var e,t;return(e=document.createElement("div")).id=this.createSubId("databody"),e.className=this.getMappedStyle("databody"),e.tabIndex="-1",this.m_databody=e,e.addEventListener?e.addEventListener("scroll",this.handleScroll.bind(this),!1):e.attachEvent("onscroll",this.handleScroll.bind(this)),(t=document.createElement("div")).className=this.getMappedStyle("scroller")+(this.m_utils.isTouchDevice()?" "+this.getMappedStyle("scroller-mobile"):""),e.appendChild(t),this.fetchCells(e,0,0),e},be.prototype.getFetchCount=function(e,t){var i=this.getFetchSize(e);if(this._isHighWatermarkScrolling()){var n="row"===e?"maxRowCount":"maxColumnCount",o=this.m_options.getScrollPolicyOptions();o&&null!=o[n]&&o[n]>0&&(i=Math.max(Math.min(i,o[n]-t),0))}return i},be.prototype.fetchCells=function(e,t,i,n,o,s){var r,a,l;this.m_fetching.cells||(null==n&&(n=this.getFetchCount("row",t)),null==o&&(o=this.getFetchCount("column",i)),r={axis:"row",start:t,count:n},a={axis:"column",start:i,count:o,databody:e},this.m_fetching.cells={rowRange:r,columnRange:a},l=null!=s&&null!=s.success?s.success:this.handleCellsFetchSuccess,this.showStatusText(),this._signalTaskStart(),this.getDataSource().fetchCells([r,a],{success:l,error:this.handleCellsFetchError},{success:this,error:this}))},be.prototype.isCellFetchResponseValid=function(e){var t,i,n;return t=e[0],i=e[1],null!=this.m_fetching&&(t==(n=this.m_fetching.cells).rowRange&&i==n.columnRange)},be.prototype.isLongScroll=function(){return this.m_isLongScroll},be.prototype.isCellFetchResponseInViewport=function(e,t){var i,n,o,s;return!(!isNaN(this.m_avgRowHeight)&&!isNaN(this.m_avgColWidth)&&null==this.m_empty&&this.m_initialized)||(i=t[0].start,n=t[1].start,o=this._getLongScrollStart(this.m_currentScrollTop,this.m_prevScrollTop,"row"),s=this._getLongScrollStart(this.m_currentScrollLeft,this.m_prevScrollLeft,"column"),o.start==i&&s.start==n)},be.prototype.handleCellsFetchSuccess=function(e,t,i){var n,o,s,r,a,l,u,h,d,c,p,_,m,g,f,v,C,y,b,S,E,T,D,A,I,O;if(I=(A=this.m_options.getScrollPolicyOptions())?A.maxRowCount:null,O=A?A.maxColumnCount:null,n=this.getDataSource().getCount("row"),o=this.getDataSource().getCount("column"),this,be.EXPAND_ANIMATION_DURATION,void 0===i){if(i=!1,!this.isCellFetchResponseValid(t))return void this._signalTaskEnd();if(this.isLongScroll()&&(!this.isCellFetchResponseInViewport(e,t)||this.m_headerInvalid))return this.m_fetching.cells=!1,this.m_headerInvalid=!1,this.handleLongScroll(this.m_currentScrollLeft,this.m_currentScrollTop),void this._signalTaskEnd();this.m_isLongScroll=!1}r=(s=t[0]).start,l=(a=e.getCount("row"))>0&&(r>this.m_endRow||r+a<=this.m_startRow),(0==a&&this._isCountUnknown("row")&&s.count>0||l&&this._isHighWatermarkScrolling()&&!this._isCountUnknown("row")&&this.m_endRow+a+1>=n||a<s.count||this._isHighWatermarkScrolling()&&I&&I>0&&r+a===I)&&(this.m_stopRowFetch=!0),h=(u=t[1]).start,c=(d=e.getCount("column"))>0&&(h>this.m_endCol||h+d==this.m_startCol),(0==d&&this._isCountUnknown("column")&&u.count>0||c&&this._isHighWatermarkScrolling()&&!this._isCountUnknown("column")&&this.m_endCol+d+1>=o||d<u.count||this._isHighWatermarkScrolling()&&O&&O>0&&h+d===O)&&(this.m_stopColumnFetch=!0),null==(p=this.m_databody)&&(p=u.databody),g=p.firstChild,l||i?((C=!i&&r>=this.m_startRow)?_=this.m_endRowPixel:i?(m=this._getCellByIndex({row:r+a,column:this.m_startCol}),_=this.getElementDir(m,"top")):_=this.m_startRowPixel,v=h>=this.m_startCol?this.m_startColPixel:this.m_endColPixel,y=document.createDocumentFragment(),b=(D=this._addCellsToFragment(y,e,r,_,h,v)).totalColumnWidth,S=D.totalRowHeight,T=D.avgWidth,E=S/a,this._populateDatabody(g,y),C?(-1!=this.m_endRow&&0!=a&&this._highlightCellsAlongAxis(this.m_endRow,"row","index","remove",["borderHorizontalNone"]),this.m_endRow=r+a-1,this.m_endRowPixel=this.m_endRowPixel+S):i?(r<this.m_startRow&&(this.m_startRow=r,this.m_startRowPixel=Math.max(0,this.m_startRowPixel-S)),this.m_endRow=this.m_endRow+a,this.m_endRowPixel=this.m_endRowPixel+S,this.pushRowsDown(r+a,S)):(this.m_startRow=this.m_startRow-a,this.m_startRowPixel=this.m_startRowPixel-S)):c&&(v=(C=h>=this.m_startCol)?this.m_endColPixel:this.m_startColPixel,_=r>=this.m_startRow?this.m_startRowPixel:this.m_endRowPixel,y=document.createDocumentFragment(),D=this._addCellsToFragment(y,e,r,_,h,v),this._populateDatabody(g,y),b=D.totalColumnWidth),null==T||0!=this.m_avgColWidth&&null!=this.m_avgColWidth||(this.m_avgColWidth=T),null==E||0!=this.m_avgRowHeight&&null!=this.m_avgRowHeight||(this.m_avgRowHeight=E),c&&(h<this.m_startCol?(this.m_startCol=this.m_startCol-d,this.m_startColPixel=this.m_startColPixel-b):(this.m_endCol=h+d-1,this.m_endColPixel=this.m_endColPixel+b)),this._sizeDatabodyScroller(),this.m_endCol>=0&&this.m_endRow>=0&&(this.m_hasCells=!0),0==this.m_startCol&&0!=this.m_startColPixel&&(this._shiftCellsAlongAxis("column",-this.m_startColPixel,0,!0),this.m_startColPixel=0),0==this.m_startRow&&0!=this.m_startRowPixel&&(this.pushRowsDown(0,-this.m_startRowPixel),this.m_startRowPixel=0),this.m_fetching.cells=!1,this.isFetchComplete()&&(this.hideStatusText(),this._syncScroller(),this._checkScrollPosition(),null!=this.m_scrollIndexAfterFetch?this.scrollToIndex(this.m_scrollIndexAfterFetch):null!=this.m_scrollHeaderAfterFetch?this.scrollToHeader(this.m_scrollHeaderAfterFetch):this.isActionableMode()||null==this._getActiveElement()||this.m_utils.containsCSSClassName(this._getActiveElement(),this.getMappedStyle("focus"))||(1!=this.m_shouldFocus&&(this.m_shouldFocus=!1),this._highlightActive(),this._manageMoveCursor()),this._isSelectionEnabled()&&this.applySelection(r,r+a,h,h+d),this.populateAccInfo(),this.m_utils.isTouchDevice()&&window.hasOwnProperty("WebKitCSSMatrix")&&(p.style.webkitTransform="translate3d(0, 0, 0)",null!=this.m_rowHeader&&(this.m_rowHeader.style.webkitTransform="translate3d(0, 0, 0)"),null!=this.m_colHeader&&(this.m_colHeader.style.webkitTransform="translate3d(0, 0, 0)"),null!=this.m_rowEndHeader&&(this.m_rowEndHeader.style.webkitTransform="translate3d(0, 0, 0)"),null!=this.m_colEndHeader&&(this.m_colEndHeader.style.webkitTransform="translate3d(0, 0, 0)")),this._shouldInitialize()?this._handleInitialization(!0):this.m_initialized&&((1==this.m_resizeRequired||this.m_endRowPixel-S<this.getElementHeight(p))&&this.resizeGrid(),l?C?f="top":i||(f="bottom"):c&&(f=h==this.m_startCol?"right":"left"),this._cleanupViewport(f),this.fillViewport(),this.isFetchComplete()&&this.fireEvent("ready",{}))),this._isSelectionEnabled()&&this.isMultipleSelection()&&this.updateSelectionHeader(),this._signalTaskEnd()},be.prototype._setZIndexBefore=function(e,t,i,n){var o,s,r,a,l,u,h,d,c,p,_,m,g;if("row"==e)for(o=this.m_startRow,s=this.m_currentScrollTop,r="top",a=this.m_rowHeader,l=this.m_rowHeaderLevelCount,u=this.m_startRowHeader,h=this.m_rowEndHeader,d=this.m_rowEndHeaderLevelCount,c=this.m_startRowEndHeader,p=t;p>=o&&(_=this._getAxisCellsByIndex(p,e),!(this.getElementDir(_[0],r)<s));p--){for(m=0;m<_.length;m++)this.changeStyleProperty(_[m],this.getCssSupport("z-index"),10);i&&(g=this._getHeaderByIndex(p,0,a,l,u),this.changeStyleProperty(g,this.getCssSupport("z-index"),10)),n&&(g=this._getHeaderByIndex(p,0,h,d,c),this.changeStyleProperty(g,this.getCssSupport("z-index"),10))}},be.prototype._onTransitionEnd=function(e,t,i){var n,o=function(){n&&(clearTimeout(n),n=void 0),e.removeEventListener("transitionend",o),t()};e.addEventListener("transitionend",o),n=setTimeout(o,i+100)},be.prototype._insertRowsWithAnimation=function(e,t,i,n,o,s){var r,a,l,u,h,d,c,p,_,m,g,f,v,C,y,b,S,E,T,D,A,I,O;(r=this)._signalTaskStart(),a=n>this.m_endRow,l=this.m_databody.firstChild,u=null!=t,b=null!=i;var w=n-1;for(d=this._getAxisCellsByIndex(n-1,"row"),_=(p=this.getElementDir(d[0],"top"))+this.getElementHeight(d[0]),this._setZIndexBefore("row",w,u,b),u&&(c=(h=this.m_rowHeader.firstChild).childNodes[n-this.m_startRow-1]),b&&(E=(S=this.m_rowEndHeader.firstChild).childNodes[n-this.m_startRow-1]),m=0;m<e.childNodes.length;m++)A=e.childNodes[m],v=p-(f=_+this.getElementDir(A,"top"))-this.getElementHeight(A),this.setElementDir(A,f,"top"),this.addTransformMoveStyle(A,0,0,"linear",0,v,0);if(u)for(m=0;m<t.childNodes.length;m++)g=t.childNodes[m],v=p-(f=_+this.getElementDir(g,"top"))-this.getElementHeight(g),this.setElementDir(g,f,"top"),this.addTransformMoveStyle(g,0,0,"linear",0,v,0);if(b)for(m=0;m<i.childNodes.length;m++)T=i.childNodes[m],v=p-(f=_+this.getElementDir(T,"top"))-this.getElementHeight(T),this.setElementDir(T,f,"top"),this.addTransformMoveStyle(T,0,0,"linear",0,v,0);for(m=n-this.m_startRow;m<=this.m_endRow;m++){for(O=this._getAxisCellsByIndex(m,"row"),f=s+this.getElementDir(O[0],"top"),v=-s,I=0;I<O.length;I++)this.setElementDir(O[I],f,"top"),this.addTransformMoveStyle(O[I],0,0,"linear",0,v,0);u&&(g=h.childNodes[m],this.setElementDir(g,f,"top"),this.addTransformMoveStyle(g,0,0,"linear",0,v,0)),b&&(T=S.childNodes[m],this.setElementDir(T,f,"top"),this.addTransformMoveStyle(T,0,0,"linear",0,v,0))}this._modifyAxisCellContextIndex("row",n,this.m_endRow-n+1,o),this.m_endRow+=o,this.m_endRowPixel+=s,u&&(this.m_endRowHeader+=t.childNodes.length,this.m_endRowHeaderPixel+=s),b&&(this.m_endRowEndHeader+=i.childNodes.length,this.m_endRowEndHeaderPixel+=s),l.appendChild(e),a?(u&&h.appendChild(t),b&&S.appendChild(i)):(u&&h.insertBefore(t,c.nextSibling),b&&S.insertBefore(i,E.nextSibling)),this.setElementHeight(l,this.m_endRowPixel-this.m_startRowPixel),this.resizeGrid(),this.updateRowBanding(),this._refreshDatabodyMap(),C=this._getCellByIndex(this.createIndex(n+o-1,this.m_endCol)),y=function(){r.m_stopRowFetch=!1,-1!=r.m_endRowHeader&&(r.m_stopRowHeaderFetch=!1),-1!=r.m_endRowEndHeader&&(r.m_stopRowEndHeaderFetch=!1),r._handleAnimationEnd()},this.m_animating=!0,D=r.m_processingEventQueue?1:be.EXPAND_ANIMATION_DURATION,this._onTransitionEnd(C,y,D),setTimeout(function(){var e,t,i;for(D=be.EXPAND_ANIMATION_DURATION,"ease-out",e=n;e<=r.m_endRow;e++){for(i=r._getAxisCellsByIndex(e,"row"),t=0;t<i.length;t++)r.addTransformMoveStyle(i[t],D+"ms",0,"ease-out",0,0,0);u&&r.addTransformMoveStyle(h.childNodes[e],D+"ms",0,"ease-out",0,0,0),b&&r.addTransformMoveStyle(S.childNodes[e],D+"ms",0,"ease-out",0,0,0)}},0)},be.prototype._addCellsToFragment=function(e,t,i,n,o,s){var r,a,l,u,h,d,c,p,_,m,g,f,v,C,y,b,S,E,T,D,A,I,O,w,R,x,L,N,P,M,j,H,U,k,B,F;for(f=this.getResources().isRTLMode()?"right":"left",r=this.m_options.getRenderer("cell"),a=this.m_options.getColumnBandingInterval(),l=this.m_options.getRowBandingInterval(),u=this.m_options.getHorizontalGridlines(),h=this.m_options.getVerticalGridlines(),d=t.getCount("row"),c=t.getCount("column"),w=i>=this.m_startRow,I=o>=this.m_startCol,v=0,j=0,H=n,L=[],p=0;p<d;p+=1){for(g=s,_=w?i+p:i+(d-1-p),m=Math.floor(_/l)%2==1,C=0;C<c;C+=k.column)if(M=0,P=0,y=I?o+C:o+(c-1-C),k={row:(O=t.getExtent?t.getExtent(this.createIndex(_,y)):{row:{extent:1,more:{before:!1,after:!1}},column:{extent:1,more:{before:!1,after:!1}}}).row.extent,column:O.column.extent},I||(y=y-k.column+1),x=w?_:_-k.row+1,b=this.createIndex(x,y),L[p]&&L[p][C])M=L[p][C].width,g=I?g+M:g-M;else{if(B=this._patchExistingCells(O,y,x,L))M=B.width,D=(T=B.cell)[this.getResources().getMappedAttribute("context")];else{for(S=t.getData(b),E=t.getMetadata(b),T=document.createElement("div"),D=this.createCellContext(b,S,E,T,k),T.setAttribute(this.getResources().getMappedAttribute("busyContext"),""),this._createUniqueId(T),T[this.getResources().getMappedAttribute("context")]=D,null!=(N=this.m_options.getInlineStyle("cell",D))&&(T.style.cssText=N),""!=T.style.height&&(T.style.height=""),""!=T.style.width&&(T.style.width=""),this.m_utils.addCSSClassName(T,this.getMappedStyle("cell")),this.m_utils.addCSSClassName(T,this.getMappedStyle("formcontrol")),(m||Math.floor(y/a)%2==1)&&this.m_utils.addCSSClassName(T,this.getMappedStyle("banded")),null!=(U=this.m_options.getStyleClass("cell",D))&&this.m_utils.addCSSClassName(T,U),F=0;F<k.row;F++)A=0===F?D.keys.row:this._getKey(this._getHeaderByIndex(x+F,0,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader),"row"),P+=this._getCellDimension(T,x,A,"row","height",!0);for(this.setElementHeight(T,P),F=0;F<k.column;F++)R=0===F?D.keys.column:this._getKey(this._getHeaderByIndex(y+F,0,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader),"column"),M+=this._getCellDimension(T,y,R,"column","width",0===y);this.setElementWidth(T,M),("hidden"===h||this._isLastColumn(y+k.column-1)&&(this.getRowHeaderWidth()+g+M>=this.getWidth()||-1!=this.m_endRowEndHeader))&&this.m_utils.addCSSClassName(T,this.getMappedStyle("borderVerticalNone")),"hidden"===u?this.m_utils.addCSSClassName(T,this.getMappedStyle("borderHorizontalNone")):this._isLastRow(x+k.row-1)&&(this.getRowBottom(T,H+P)>=this.getHeight()||-1!=this.m_endColEndHeader)&&this.m_utils.addCSSClassName(T,this.getMappedStyle("borderHorizontalNone")),w?this.setElementDir(T,H,"top"):this.setElementDir(T,H-P,"top"),I?this.setElementDir(T,g,f):this.setElementDir(T,g-M,f),this.m_root.appendChild(T),this._renderContent(r,D,T,S),e.appendChild(T)}this._updateTempArray(L,{width:M},p,C,k.row,k.column),g=I?g+M:g-M,0==p&&(v+=M)}P=this._getCellDimension(T,D.indexes.row,D.keys.row,"row","height",!1),H=w?H+P:H-P,j+=P}return{avgWidth:v/c,totalRowHeight:j,totalColumnWidth:v}},be.prototype._updateCellDimension=function(e,t,i,n,o,s,r,a){var l,u,h,d,c,p,_,m,g,f,v,C,y,b,S,E;for(l=0,u="width"==r?"height":"width",h=this._getCellByIndex(this.createIndex(n,i)),d=this.getElementDir(h,r),(c=h[this.getResources().getMappedAttribute("context")]).extents[s]=c.extents[s]+e,"row"==s?(p=n,_=this.m_rowHeader,m=this.m_rowHeaderLevelCount,g=this.m_startRowHeader):(p=i,_=this.m_colHeader,m=this.m_columnHeaderLevelCount,g=this.m_startColHeader),C=1;C<=e;C++)for(f=this._getKey(this._getHeaderByIndex(a?p-C:p+C,0,_,m,g),s),l+=this._getCellDimension(h,a?p-C:p+C,f,s,r,!0),E=0;E<t;E++)"row"==s?(b=a?n-C:n+C,S=i+E):(b=n+E,S=a?i-C:i+C),this._addIndexToDatabodyMap(this.createIndex(b,S),h.id);return a&&(y="width"===r?this.getResources().isRTLMode()?"right":"left":"top",this.setElementDir(h,this.getElementDir(h,y)-l,y),c.indexes[s]=c.indexes[s]-e),this.setElementDir(h,d+l,r),(v={})[r]=l,v[u]=this.getElementDir(h,u),v.cell=h,v},be.prototype._patchExistingCells=function(e,t,i,n){var o,s,r,a,l,u;return l=e.column.extent,u=e.row.extent,{row:e.row.extent,column:e.column.extent},o=e.row.more.before,s=e.row.more.after,r=e.column.more.before,a=e.column.more.after,t-1==this.m_endCol&&r?this._updateCellDimension(l,u,this.m_endCol,i,n,"column","width",!1):i-1==this.m_endRow&&o?this._updateCellDimension(u,l,t,this.m_endRow,n,"row","height",!1):t+l==this.m_startCol&&a?this._updateCellDimension(l,u,this.m_startCol,i,n,"column","width",!0):!(i+u!=this.m_startRow||!s)&&this._updateCellDimension(u,l,t,this.m_startRow,n,"row","height",!0)},be.prototype._updateTempArray=function(e,t,i,n,o,s){for(var r=0;r<o;r++){null==e[i+r]&&(e[i+r]=[]);for(var a=0;a<s;a++)e[i+r][n+a]=t}},be.prototype._getCellDimension=function(e,t,i,n,o,s){var r,a,l,u,h,d;return"row"==n?(r=this.getMappedStyle("rowheadercell")+" "+this.getMappedStyle("headercell"),a=this.m_endRowHeader):"column"==n&&(r=this.getMappedStyle("colheadercell")+" "+this.getMappedStyle("headercell"),a=this.m_endColHeader),-1==a&&s&&!this.m_initialized?(u=this.createHeaderContext(n,t,null,{key:i},null,0,0,1),h=this.m_options.getInlineStyle(n,u),d=this.m_options.getStyleClass(n,u),(l=document.createElement("div")).style.cssText=h,l.className=r+" "+d):l=e,this._getHeaderDimension(l,i,n,o)},be.prototype.pushRowsDown=function(e,t){for(;e<=this.m_endRow;){var i=this._getAxisCellsByIndex(e,"row");if(i.length>0)for(var n=0;n<i.length;n++){var o=i[n],s=this.getElementDir(o,"top")+t;o.style.top=s+"px"}e++}},be.prototype.pushRowsUp=function(e,t){this.pushRowsDown(e,-t)},be.prototype.pushRowHeadersDown=function(e,t){for(;e;){var i=this.getElementDir(e,"top")+t;e.style.top=i+"px",e=e.nextSibling}},be.prototype.pushRowHeadersUp=function(e,t){this.pushRowHeadersDown(e,-t)},be.prototype.createCellContext=function(e,t,i,n,o){var s,r;for(r in(s={}).parentElement=n,s.indexes=e,s.cell=t,s.data=null!=t&&"object"==typeof t&&t.hasOwnProperty("data")?t.data:t,s.component=this,s.datasource=this.getDataSource(),s.mode="navigation",s.extents=o,i)i.hasOwnProperty(r)&&(s[r]=i[r]);return null!=this.m_createContextCallback&&this.m_createContextCallback.call(this,s),this.m_fixContextCallback.call(this,s)},be.prototype._createUniqueId=function(e){return this._uniqueIdCallback(e,!1)},be.prototype.createCellElement=function(e){return document.createElement("div")},be.prototype.getRowHeaderWidth=function(){return-1===this.m_endRowHeader?0:this.m_rowHeaderWidth},be.prototype.getColumnHeaderHeight=function(){return-1===this.m_endColHeader?0:this.m_colHeaderHeight},be.prototype.getRowEndHeaderWidth=function(){return-1===this.m_endRowEndHeader?0:this.m_rowEndHeaderWidth},be.prototype.getColumnEndHeaderHeight=function(){return-1===this.m_endColEndHeader?0:this.m_colEndHeaderHeight},be.prototype.getRowBottom=function(e,t){var i,n,o;return i=this.getColumnHeaderHeight(),null!=t?i+t:(n=this.getElementDir(e,"top"),o=this.calculateRowHeight(e),isNaN(n)||isNaN(o)?i:i+n+o)},be.prototype.handleCellsFetchError=function(e,t){var i,n;this.m_fetching.cells=!1,this.hideStatusText(),null==this.m_databody.firstChild?this._shouldInitialize()&&this._handleInitialization(!0):(i=t[0],(n=t[1]).start+n.count-1>this.m_endCol&&(this.m_stopColumnFetch=!0,this.m_stopColumnHeaderFetch=!0,this.m_stopColumnEndHeaderFetch=!0),i.start+i.count-1>this.m_endRow&&(this.m_stopRowFetch=!0,this.m_stopRowHeaderFetch=!0,this.m_stopRowEndHeaderFetch=!0))},be.prototype.showStatusText=function(){var e,t,i,n=this;"block"==this.m_status.style.display||this.m_showStatusTimeout||(this.m_showStatusTimeout=setTimeout(function(){i=n.getResources().getTranslatedText("msgFetchingData"),n.m_status.setAttribute("aria-label",i),n.m_status.style.display="block",e=n.getWidth()/2-n.m_status.offsetWidth/2,t=n.getHeight()/2-n.m_status.offsetHeight/2,n.m_status.style.left=e+"px",n.m_status.style.top=t+"px",n.m_showStatusTimeout=null},this.getShowStatusDelay()))},be.prototype.getShowStatusDelay=function(){var e=parseInt(this.getResources().getDefaultOption("showIndicatorDelay"),10);return isNaN(e)?0:e},be.prototype.hideStatusText=function(){this.m_showStatusTimeout&&(clearTimeout(this.m_showStatusTimeout),this.m_showStatusTimeout=null),this.m_status.style.display="none"},be.prototype.getFocusableElementsInNode=function(e,t){var i,n,o,s,r,a;if(i=[],a=this.getResources().getMappedAttribute("tabMod"),document.evaluate)for(o=(n=document.evaluate(".//*[@tabindex>=0]|.//*[@"+a+">=0]|.//input|.//select|.//textarea|.//button|.//a|.//INPUT|.//SELECT|.//TEXTAREA|.//BUTTON|.//A",e,null,XPathResult.ANY_TYPE,null)).iterateNext();o;)!o.disabled&&"none"!=o.style.display&&(t||!o.tabIndex||o.tabIndex>0||parseInt(o.getAttribute(a),10)>=0)&&i.push(o),o=n.iterateNext();else for(s=(n=e.querySelectorAll("input, select, button, a, textarea, [tabIndex]:not([tabIndex='-1']), ["+a+"]:not(["+a+"='-1'])")).length,r=0;r<s;r+=1)!(o=n[r]).disabled&&"none"!=o.style.display&&(t||!o.tabIndex||o.tabIndex>=0||parseInt(o.getAttribute(a),10)>=0)&&i.push(o);return i},be.prototype.isElementVisible=function(e,t){return!0},be.prototype._disableAllFocusableElements=function(e){var t,i,n,o;for(o=this.getResources().getMappedAttribute("tabMod"),t=this.getFocusableElementsInNode(e),i=0;i<t.length;i++)n=parseInt(t[i].tabIndex,10),(isNaN(n)||n>=0)&&(t[i].setAttribute(o,isNaN(n)?-1:n),t[i].setAttribute("tabIndex",-1))},be.prototype._enableAllFocusableElements=function(e){var t,i,n,o;for(o=this.getResources().getMappedAttribute("tabMod"),t=this.getFocusableElementsInNode(e,!1),i=0;i<t.length;i++)n=parseInt(t[i].getAttribute(o),10),t[i].removeAttribute(o),-1==n?t[i].removeAttribute("tabIndex"):t[i].setAttribute("tabIndex",n)},be.prototype._isFocusableElement=function(e){var t=e.tagName;return"INPUT"===t||"TEXTAREA"===t||"SELECT"===t||"BUTTON"===t||"A"===t||null!=e.getAttribute("tabIndex")&&parseInt(e.getAttribute("tabIndex"),10)>=0&&this.findCell(e)!=e},be.prototype._isFocusableElementBeforeCell=function(e){if(null==e||e==this.getRootElement()||this.m_utils.containsCSSClassName(e,this.getMappedStyle("cell")))return!1;var t=e.tagName;return!!("INPUT"===t||"TEXTAREA"===t||"SELECT"===t||"BUTTON"===t||"A"===t||this.m_utils.containsCSSClassName(e,this.getMappedStyle("active"))||null!=e.getAttribute("tabIndex")&&parseInt(e.getAttribute("tabIndex"),10)>=0&&this.findCell(e)!=e)||this._isFocusableElementBeforeCell(e.parentNode)},be.prototype._setFocusToFirstFocusableElement=function(e){var t,i;if((t=this.getFocusableElementsInNode(e,!0)).length>0){if((i=t[0]).focus(),i.setSelectionRange&&i.value)try{i.setSelectionRange(i.value.length,i.value.length)}catch(e){}return!0===this._overwriteFlag&&"function"==typeof t[0].select&&i.select(),!0}return!1},be.prototype.handleScroll=function(e){var t,i,n;(this.m_handleScrollOverflow||(this.m_hasVerticalScroller||this.m_hasHorizontalScroller||(this.m_databody.style.overflow="hidden"),this.m_handleScrollOverflow=!0),this.m_animating)?e.preventDefault():this.m_utils.isTouchDevice()||(1!=this.m_silentScroll?(e||(e=window.event),n=e.target?e.target:e.srcElement,t=this.m_utils.getElementScrollLeft(n),i=n.scrollTop,this.scrollTo(t,i)):this.m_silentScroll=!1)},be.prototype._getMaxScrollWidth=function(){return this._isCountUnknownOrHighwatermark("column")&&!this.m_stopColumnFetch?Number.MAX_VALUE:this.m_scrollWidth},be.prototype._getMaxScrollHeight=function(){return this._isCountUnknownOrHighwatermark("row")&&!this.m_stopRowFetch?Number.MAX_VALUE:this.m_scrollHeight},be.prototype.scroll=function(e){var t,i;null!=e.position&&(t=Math.max(0,Math.min(this._getMaxScrollWidth(),e.position.scrollX)),i=Math.max(0,Math.min(this._getMaxScrollHeight(),e.position.scrollY)),this._initiateScroll(t,i))},be.prototype.scrollDelta=function(e,t){var i,n;this._adjustScrollerSize(),i=Math.max(0,Math.min(this._getMaxScrollWidth(),this.m_currentScrollLeft-e)),n=Math.max(0,Math.min(this._getMaxScrollHeight(),this.m_currentScrollTop-t)),this._initiateScroll(i,n)},be.prototype.adjustTouchScroll=function(e,t){return this.m_utils.isTouchDevice()&&0!=e&&0!=t&&(Math.abs(e)>Math.abs(t)?(t=0,this.m_extraScrollOverY=null):(e=0,this.m_extraScrollOverX=null)),[e,t]},be.prototype._initiateScroll=function(e,t){this.m_utils.isTouchDevice()?this.scrollTo(e,t):(this.m_utils.setElementScrollLeft(this.m_databody,e),this.m_databody.scrollTop=t)},be.prototype._disableTouchScrollAnimation=function(){this.m_databody.firstChild.style.webkitTransitionDuration="0ms",this.m_rowHeader.firstChild.style.webkitTransitionDuration="0ms",this.m_colHeader.firstChild.style.webkitTransitionDuration="0ms",this.m_rowEndHeader.firstChild.style.webkitTransitionDuration="0ms",this.m_colEndHeader.firstChild.style.webkitTransitionDuration="0ms"},be.prototype._shouldLongScroll=function(e,t){return!this._isHighWatermarkScrolling()&&(e+this.getViewportWidth()<this._getMaxLeftPixel()||t+this.getViewportHeight()<this._getMaxTopPixel()||e>this._getMaxRightPixel()||t>this._getMaxBottomPixel())},be.prototype.scrollTo=function(e,t){if(e!=this.m_currentScrollLeft&&(this.m_prevScrollLeft=this.m_currentScrollLeft,this.m_currentScrollLeft=e),t!=this.m_currentScrollTop&&(this.m_prevScrollTop=this.m_currentScrollTop,this.m_currentScrollTop=t),this.m_utils.isTouchDevice()||(this._shouldLongScroll(e,t)?this.handleLongScroll(e,t):this.fillViewport()),this._syncScroller(),this._adjustScrollerSize(),null!=this.m_cellToFocus){var i=this.m_cellToFocus;this.m_cellToFocus=null,this._setActive(i,this._createActiveObject(i),null,!1,!1,!0)}null!=this.m_scrollIndexAfterFetch&&this._isInViewport(this.m_scrollIndexAfterFetch)===be.INSIDE&&(this._isDatabodyCellActive()&&this.m_scrollIndexAfterFetch.row==this.m_active.indexes.row&&this.m_scrollIndexAfterFetch.column==this.m_active.indexes.column&&this._highlightActive(),this.m_scrollIndexAfterFetch=null),null!=this.m_scrollHeaderAfterFetch&&(this._isDatabodyCellActive()||this.m_scrollHeaderAfterFetch.axis!=this.m_active.axis||this.m_scrollHeaderAfterFetch.index!=this.m_active.index||this.m_scrollHeaderAfterFetch.level!=this.m_active.level||this._highlightActive(),this.m_scrollHeaderAfterFetch=null),this.m_utils.isTouchDevice()||this.m_prevScrollTop===t&&this.m_prevScrollLeft===e||this.fireEvent("scroll",{event:null,ui:{scrollX:e,scrollY:t}}),this._setScrollPosition()},be.prototype._scrollTransitionEnd=function(){null!=this.m_scrollTransitionEnd&&this.m_databody.firstChild.removeEventListener("webkitTransitionEnd",this.m_scrollTransitionEnd),this._isSelectionEnabled()&&this._scrollTouchSelectionAffordance(),this.fireEvent("scroll",{event:null,ui:{scrollX:this.m_currentScrollLeft,scrollY:this.m_currentScrollTop}}),this._shouldLongScroll(this.m_currentScrollLeft,this.m_currentScrollTop)?this.handleLongScroll(this.m_currentScrollLeft,this.m_currentScrollTop):this.fillViewport()},be.prototype._bounceBack=function(){var e,t,i,n,o,s,r;e=this.m_currentScrollLeft,t=this.m_currentScrollTop,i=this.m_databody.firstChild,n=this.m_colHeader.firstChild,o=this.m_rowHeader.firstChild,s=this.m_colEndHeader.firstChild,r=this.m_rowEndHeader.firstChild,i.removeEventListener("webkitTransitionEnd",this.m_bounceBack),i.style.webkitTransitionDuration=be.BOUNCE_ANIMATION_DURATION+"ms",o.style.webkitTransitionDuration=be.BOUNCE_ANIMATION_DURATION+"ms",r.style.webkitTransitionDuration=be.BOUNCE_ANIMATION_DURATION+"ms",n.style.webkitTransitionDuration=be.BOUNCE_ANIMATION_DURATION+"ms",s.style.webkitTransitionDuration=be.BOUNCE_ANIMATION_DURATION+"ms",null==this.m_scrollTransitionEnd&&(this.m_scrollTransitionEnd=this._scrollTransitionEnd.bind(this)),i.addEventListener("webkitTransitionEnd",this.m_scrollTransitionEnd),this.getResources().isRTLMode()?(i.style.webkitTransform="translate3d("+e+"px, "+-t+"px, 0)",n.style.webkitTransform="translate3d("+e+"px, 0, 0)",s.style.webkitTransform="translate3d("+e+"px, 0, 0)"):(i.style.webkitTransform="translate3d("+-e+"px, "+-t+"px, 0)",n.style.webkitTransform="translate3d("+-e+"px, 0, 0)",s.style.webkitTransform="translate3d("+-e+"px, 0, 0)"),o.style.webkitTransform="translate3d(0, "+-t+"px, 0)",r.style.webkitTransform="translate3d(0, "+-t+"px, 0)",this.m_extraScrollOverX=null,this.m_extraScrollOverY=null},be.prototype._syncScroller=function(){var e,t,i,n,o,s,r,a;e=this.m_currentScrollLeft,t=this.m_currentScrollTop,i=this.m_databody.firstChild,n=this.m_colHeader.firstChild,o=this.m_rowHeader.firstChild,r=this.m_colEndHeader.firstChild,a=this.m_rowEndHeader.firstChild,this.m_utils.isTouchDevice()&&window.hasOwnProperty("WebKitCSSMatrix")?(null!=this.m_extraScrollOverX||null!=this.m_extraScrollOverY?(null!=this.m_extraScrollOverX?e+=this.m_extraScrollOverX:t+=this.m_extraScrollOverY,null==this.m_bounceBack&&(this.m_bounceBack=this._bounceBack.bind(this)),i.addEventListener("webkitTransitionEnd",this.m_bounceBack)):"0ms"==i.style.webkitTransitionDuration?this._scrollTransitionEnd():(null==this.m_scrollTransitionEnd&&(this.m_scrollTransitionEnd=this._scrollTransitionEnd.bind(this)),i.addEventListener("webkitTransitionEnd",this.m_scrollTransitionEnd)),this.getResources().isRTLMode()?(i.style.webkitTransform="translate3d("+e+"px, "+-t+"px, 0)",n.style.webkitTransform="translate3d("+e+"px, 0, 0)",r.style.webkitTransform="translate3d("+e+"px, 0, 0)"):(i.style.webkitTransform="translate3d("+-e+"px, "+-t+"px, 0)",n.style.webkitTransform="translate3d("+-e+"px, 0, 0)",r.style.webkitTransform="translate3d("+-e+"px, 0, 0)"),o.style.webkitTransform="translate3d(0, "+-t+"px, 0)",a.style.webkitTransform="translate3d(0, "+-t+"px, 0)"):(s=this.getResources().isRTLMode()?"right":"left",this.setElementDir(n,-e,s),this.setElementDir(r,-e,s),this.setElementDir(o,-t,"top"),this.setElementDir(a,-t,"top"))},be.prototype._adjustScrollerSize=function(){var e,t,i;e=this.m_databody.firstChild,t=this.getElementHeight(e),i=this.getElementWidth(e),(this._getMaxBottomPixel()>t||this.getDataSource().getCount("row")==this._getMaxBottom()+1&&!this._isCountUnknown("row")&&this._getMaxBottom()>-1)&&this.setElementHeight(e,this._getMaxBottomPixel()),(this._getMaxRightPixel()>i||this.getDataSource().getCount("column")==this._getMaxRight()+1&&!this._isCountUnknown("column")&&this._getMaxRight()>-1)&&this.setElementWidth(e,this._getMaxRightPixel())},be.prototype._getLongScrollStart=function(e,t,i){var n,o,s,r,a,l,u,h,d,c;return t!=e?("row"==i?(l=this.getElementHeight(this.m_databody.firstChild),u=this.m_utils._getMaxDivHeightForScrolling(),h=this._getMaxScrollHeight(),d=this.m_avgRowHeight,c=this.m_hasHorizontalScroller?this.m_utils.getScrollbarSize():0):"column"==i&&(l=this.getElementWidth(this.m_databody.firstChild),u=this.m_utils._getMaxDivWidthForScrolling(),h=this._getMaxScrollWidth(),d=this.m_avgColWidth,c=this.m_hasVerticalScroller?this.m_utils.getScrollbarSize():0),s=Math.max(Math.min(e/l,1),0),a=this.getDataSource().getCount(i),r=this.getFetchSize(i),n=Math.floor(a*s),o=u<=l?Math.min(e,h):n*d,(1==s||e+r*d>l-c)&&(n=Math.max(a-r,0),o=Math.max(l-r*d,0))):"row"==i?(n=this.m_startRow,o=this.m_startRowPixel):"column"==i&&(n=this.m_startCol,o=this.m_startColPixel),{start:n,startPixel:o}},be.prototype.handleLongScroll=function(e,t){var i,n,o,s,r,a;this.m_isLongScroll=!0,this.isFetchComplete()&&(r=this._getLongScrollStart(t,this.m_prevScrollTop,"row"),i=r.start,o=r.startPixel,a=this._getLongScrollStart(e,this.m_prevScrollLeft,"column"),n=a.start,s=a.startPixel,this.m_hasCells&&(this.m_startRow=i,this.m_endRow=-1,this.m_startRowPixel=o,this.m_endRowPixel=o,this.m_startCol=n,this.m_endCol=-1,this.m_startColPixel=s,this.m_endColPixel=s),this.m_hasRowHeader&&(this.m_startRowHeader=i,this.m_endRowHeader=-1,this.m_startRowHeaderPixel=o,this.m_endRowHeaderPixel=o),this.m_hasRowEndHeader&&(this.m_startRowEndHeader=i,this.m_endRowEndHeader=-1,this.m_startRowEndHeaderPixel=o,this.m_endRowEndHeaderPixel=o),this.m_hasColHeader&&(this.m_startColHeader=n,this.m_endColHeader=-1,this.m_startColHeaderPixel=s,this.m_endColHeaderPixel=s),this.m_hasColEndHeader&&(this.m_startColEndHeader=n,this.m_endColEndHeader=-1,this.m_startColEndHeaderPixel=s,this.m_endColEndHeaderPixel=s),this.m_stopRowFetch=!1,this.m_stopRowHeaderFetch=!1,this.m_stopRowEndHeaderFetch=!1,this.m_stopColumnFetch=!1,this.m_stopColumnHeaderFetch=!1,this.m_stopColumnEndHeaderFetch=!1,this.fetchHeaders("row",i,this.m_rowHeader,this.m_rowEndHeader,void 0,{success:function(e,t,i){this.handleRowHeadersFetchSuccessForLongScroll(e,t,i)}}),this.fetchHeaders("column",n,this.m_colHeader,this.m_colEndHeader,void 0,{success:function(e,t,i){this.handleColumnHeadersFetchSuccessForLongScroll(e,t,i)}}),this.fetchCells(this.m_databody,i,n,null,null,{success:function(e,t){this.handleCellsFetchSuccessForLongScroll(e,t,i,n,o,s)}}))},be.prototype.handleRowHeadersFetchSuccessForLongScroll=function(e,t,i){var n,o;n=this.m_rowHeader.firstChild,o=this.m_rowEndHeader.firstChild,null!=n&&this.m_utils.empty(n),null!=o&&this.m_utils.empty(o),this.handleHeadersFetchSuccess(e,t,i,!1)},be.prototype.handleColumnHeadersFetchSuccessForLongScroll=function(e,t,i){var n,o;n=this.m_colHeader.firstChild,o=this.m_colEndHeader.firstChild,null!=n&&this.m_utils.empty(n),null!=o&&this.m_utils.empty(o),this.handleHeadersFetchSuccess(e,t,i,!1)},be.prototype.handleCellsFetchSuccessForLongScroll=function(e,t,i,n,o,s){var r=this.m_databody.firstChild;null!=r&&this._emptyDatabody(r),this.handleCellsFetchSuccess(e,t)},be.prototype._cleanupViewport=function(e){var t,i,n,o;!this._isHighWatermarkScrolling()&&this._isScrollBackToEditable()&&(null==e&&(this.m_prevScrollLeft>this.m_currentScrollLeft?e="right":this.m_prevScrollLeft<this.m_currentScrollLeft?e="left":this.m_prevScrollTop>this.m_currentScrollTop?e="bottom":this.m_prevScrollTop<this.m_currentScrollTop&&(e="top")),t=this._getViewportLeft(),i=this._getViewportRight(),n=this._getViewportTop(),o=this._getViewportBottom(),"top"==e&&n>this._getMaxTopPixel()?(this.removeRowsFromTop(this.m_databody),this.removeRowHeadersFromTop()):"bottom"==e&&o<this._getMaxBottomPixel()?(this.removeRowsFromBottom(this.m_databody),this.removeRowHeadersFromBottom()):"left"==e&&t>this._getMaxLeftPixel()?(this.removeColumnsFromLeft(this.m_databody),this.removeColumnHeadersFromLeft()):"right"==e&&i<this._getMaxRightPixel()&&(this.removeColumnsFromRight(this.m_databody),this.removeColumnHeadersFromRight()))},be.prototype.fillViewport=function(){var e,t,i,n,o,s;if(this.isFetchComplete()){if(e=this._getViewportLeft(),t=this._getViewportRight()+be.FETCH_PIXEL_THRESHOLD,i=this._getViewportTop(),n=this._getViewportBottom()+be.FETCH_PIXEL_THRESHOLD,this._getMaxBottomPixel()<=n&&(!this.m_stopRowHeaderFetch||!this.m_stopRowEndHeaderFetch||!this.m_stopRowFetch))return o=Math.max(0,this._getMaxBottom()+1),s=Math.max(0,this.getFetchCount("row",o)),this.fetchHeaders("row",o,this.m_rowHeader,this.m_rowEndHeader,s),void this.fetchCells(this.m_databody,o,this.m_startCol,s,this.m_endCol-this.m_startCol+1);if(this._getMaxTopPixel()>i)return o=Math.max(0,this._getMaxTop()-this.getFetchSize("row")),s=Math.max(0,this._getMaxTop()-o),this.fetchHeaders("row",o,this.m_rowHeader,this.m_rowEndHeader,s),void this.fetchCells(this.m_databody,o,this.m_startCol,s,this.m_endCol-this.m_startCol+1);if(this._getMaxRightPixel()<=t&&(!this.m_stopColumnHeaderFetch||!this.m_stopColumnEndHeaderFetch||!this.m_stopColumnFetch))return o=Math.max(0,this._getMaxRight()+1),s=Math.max(0,this.getFetchCount("column",o)),this.fetchHeaders("column",o,this.m_colHeader,this.m_colEndHeader,s),void this.fetchCells(this.m_databody,this.m_startRow,o,this.m_endRow-this.m_startRow+1,s);if(this._getMaxLeftPixel()>e)return o=Math.max(0,this._getMaxLeft()-this.getFetchSize("column")),s=Math.max(0,this._getMaxLeft()-o),this.fetchHeaders("column",o,this.m_colHeader,this.m_colEndHeader,s),void this.fetchCells(this.m_databody,this.m_startRow,o,this.m_endRow-this.m_startRow+1,s)}},be.prototype._getMaxRight=function(){return Math.max(Math.max(this.m_endCol,this.m_endColHeader),this.m_endColEndHeader)},be.prototype._getMaxLeft=function(){return Math.max(Math.max(this.m_startCol,this.m_startColHeader),this.m_startColEndHeader)},be.prototype._getMaxRightPixel=function(){return Math.max(Math.max(this.m_endColPixel,this.m_endColHeaderPixel),this.m_endColEndHeaderPixel)},be.prototype._getMaxLeftPixel=function(){return Math.max(Math.max(this.m_startColPixel,this.m_startColHeaderPixel),this.m_startColEndHeaderPixel)},be.prototype._getMaxBottom=function(){return Math.max(Math.max(this.m_endRow,this.m_endRowHeader),this.m_endRowEndHeader)},be.prototype._getMaxTop=function(){return Math.max(Math.max(this.m_startRow,this.m_startRowHeader),this.m_startRowEndHeader)},be.prototype._getMaxBottomPixel=function(){return Math.max(Math.max(this.m_endRowPixel,this.m_endRowHeaderPixel),this.m_endRowEndHeaderPixel)},be.prototype._getMaxTopPixel=function(){return Math.max(Math.max(this.m_startRowPixel,this.m_startRowHeaderPixel),this.m_startRowEndHeaderPixel)},be.prototype._isScrollBackToEditable=function(){var e=this._getCurrentMode(),t=this._getActiveElement();return"edit"!=e||!this._isCellGoingToBeRemoved(t)||this._handleExitEdit(null,t)},be.prototype._isCellGoingToBeRemoved=function(e){var t,i;if(!this._isHighWatermarkScrolling()){if(this.m_endRow-this.m_startRow>this.MAX_ROW_THRESHOLD&&((i=this.getElementDir(e.parentNode,"top"))+this.getElementHeight(e)<this.m_currentScrollTop||i<this.m_currentScrollTop+this.getViewportHeight()))return!0;if(this.m_endCol-this.m_startCol>this.MAX_COLUMN_THRESHOLD&&((t=this.getElementDir(e,"left"))+this.getElementWidth(e)<this.m_currentScrollLeft||t<this.m_currentScrollLeft+this.getViewportHeight()))return!0}},be.prototype.fetchCellsToBottom=function(){this.fetchCells(this.m_databody,this.m_endRow+1,this.m_startCol,null,this.m_endCol-this.m_startCol+1)},be.prototype.fetchCellsToTop=function(){var e,t;t=Math.max(0,this.m_startRow-this.getFetchSize("row")),e=Math.max(0,this.m_startRow-t),this.fetchCells(this.m_databody,t,this.m_startCol,e,this.m_endCol-this.m_startCol+1)},be.prototype._removeCellsAlongAxis=function(e,t,i){var n,o,s,r,a,l,u,h,d,c,p,_,m,g,f,v,C,y,b,S,E,T,D,A,I;for(s=0,r=0,"row"==e?(a=this.m_startRow,l=this.m_endRow,u=this.m_rowHeader,h=this.m_rowHeaderLevelCount,d=this.m_startRowHeader,c="height",p=this.m_startRowPixel,_=this.m_endRowPixel,m=this.m_currentScrollTop,g="column",f=this.m_startCol,v=this.m_endCol,C="top",o=i?l:a):(a=this.m_startCol,l=this.m_endCol,u=this.m_colHeader,h=this.m_columnHeaderLevelCount,d=this.m_startColHeader,c="width",p=this.m_startColPixel,_=this.m_endColPixel,m=this.m_currentScrollLeft,g="row",f=this.m_startRow,v=this.m_endRow,C=this.getResources().isRTLMode()?"right":"left",o=i?l:a);o<=l&&o>=a&&(null==(y=this._getKey(this._getHeaderByIndex(o,h-1,u,h,d),e))&&(y=this._getKey(this._getCellByIndex("column"==e?this.createIndex(this.m_startRow,o):this.createIndex(o,this.m_startCol)),e)),b=this._getCellDimension(null,o,y,e,c,!1),i?_-b-s>t:p+b+s<m-t);){for(n=f;n<=v;n+=D)for(T=(E=(S=this._getCellByIndex("column"==e?this.createIndex(n,o):this.createIndex(o,n)))[this.getResources().getMappedAttribute("context")]).extents[e],D=E.extents[g],1==T?this._remove(S):(E.extents[e]-=1,this.setElementDir(S,this.getElementDir(S,c)-b,c),i||(E.indexes[e]+=1,this.setElementDir(S,this.getElementDir(S,C)+b,C))),A=0;A<D;A++)I="column"==e?this.createIndex(n+A,o):this.createIndex(o,n+A),this._removeIndexFromDatabodyMap(I);s+=b,r+=1,o=i?o-1:o+1}return{dimensionChange:s,extentChange:r}},be.prototype.removeHeadersFromStartOfContainer=function(e,t,i,n,o,s,r,a){var l,u,h,d,c,p=0,_=0;if(e.childNodes,null==(l=null==t?e.firstChild:t.nextSibling))return{extentChange:0,dimensionChange:0};for(u=(h=this.m_utils.containsCSSClassName(l,o))?l:l.firstChild,d=this.getElementDir(u,s);i+d<a-n;){if(this._remove(l),_+=d,p+=h?1:this._getAttribute(l,"extent",!0),i+=d,null==(l=null==t?e.firstChild:t.nextSibling))return{extentChange:p,dimensionChange:_};u=(h=this.m_utils.containsCSSClassName(l,o))?l:l.firstChild,d=this.getElementDir(u,s)}return h||(c=this.removeHeadersFromStartOfContainer(l,l.firstChild,i,n,o,s,r,a),this._setAttribute(l,"start",this._getAttribute(l,"start",!0)+c.extentChange),this._setAttribute(l,"extent",this._getAttribute(l,"extent",!0)-c.extentChange),this.setElementDir(u,this.getElementDir(u,r)+c.dimensionChange,r),this.setElementDir(u,this.getElementDir(u,s)-c.dimensionChange,s),p+=c.extentChange,_+=c.dimensionChange),{extentChange:p,dimensionChange:_}},be.prototype.removeHeadersFromEndOfContainer=function(e,t,i,n,o){var s,r,a,l,u,h=0,d=0;for(s=e.lastChild,r=(a=this.m_utils.containsCSSClassName(s,n))?s:s.firstChild,l=this.getElementDir(r,o);t-l>i;)this._remove(s),d+=l,h+=a?1:this._getAttribute(s,"extent",!0),t-=l,s=e.lastChild,r=(a=this.m_utils.containsCSSClassName(s,n))?s:s.firstChild,l=this.getElementDir(r,o);return a||(u=this.removeHeadersFromEndOfContainer(s,t,i,n,o),this._setAttribute(s,"extent",this._getAttribute(s,"extent",!0)-u.extentChange),this.setElementDir(r,this.getElementDir(r,o)-u.dimensionChange,o),h+=u.extentChange,d+=u.dimensionChange),{extentChange:h,dimensionChange:d}},be.prototype.removeColumnHeadersFromLeft=function(){var e,t,i,n;this.m_endColHeader-this.m_startColHeader>this.MAX_COLUMN_THRESHOLD&&(e=this.m_colHeader.firstChild,t=this.getColumnThreshold(),this.m_startColHeaderPixel<=this.m_currentScrollLeft-t&&(i=this.removeHeadersFromStartOfContainer(e,null,this.m_startColHeaderPixel,t,this.getMappedStyle("colheadercell"),"width",this.getResources().isRTLMode()?"right":"left",this.m_currentScrollLeft),this.m_startColHeaderPixel+=i.dimensionChange,this.m_startColHeader+=i.extentChange)),this.m_endColEndHeader-this.m_startColEndHeader>this.MAX_COLUMN_THRESHOLD&&(n=this.m_colEndHeader.firstChild,t=this.getColumnThreshold(),this.m_startColEndHeaderPixel<this.m_currentScrollLeft-t&&(i=this.removeHeadersFromStartOfContainer(n,null,this.m_startColEndHeaderPixel,t,this.getMappedStyle("colendheadercell"),"width",this.getResources().isRTLMode()?"right":"left",this.m_currentScrollLeft),this.m_startColEndHeaderPixel+=i.dimensionChange,this.m_startColEndHeader+=i.extentChange))},be.prototype.removeColumnsFromLeft=function(e){var t,i,n;if(this.m_endCol-this.m_startCol>this.MAX_COLUMN_THRESHOLD){if(t=e.firstChild.childNodes,i=this.getColumnThreshold(),t.length<1)return;n=this._removeCellsAlongAxis("column",i,!1),this.m_startColPixel+=n.dimensionChange,this.m_startCol+=n.extentChange}},be.prototype.removeColumnHeadersFromRight=function(){var e,t,i;t=this.m_currentScrollLeft+this.getViewportWidth()+this.getColumnThreshold(),this.m_endColHeader-this.m_startColHeader>this.MAX_COLUMN_THRESHOLD&&(e=this.m_colHeader.firstChild,this.m_endColHeaderPixel>t&&(this.m_stopColumnHeaderFetch&&(this.m_stopColumnHeaderFetch=!1),i=this.removeHeadersFromEndOfContainer(e,this.m_endColHeaderPixel,t,this.getMappedStyle("colheadercell"),"width"),this.m_endColHeaderPixel-=i.dimensionChange,this.m_endColHeader-=i.extentChange)),this.m_endColEndHeader-this.m_startColEndHeader>this.MAX_COLUMN_THRESHOLD&&(e=this.m_colEndHeader.firstChild,this.m_endColEndHeaderPixel>t&&(this.m_stopColumnEndHeaderFetch&&(this.m_stopColumnEndHeaderFetch=!1),i=this.removeHeadersFromEndOfContainer(e,this.m_endColEndHeaderPixel,t,this.getMappedStyle("colendheadercell"),"width"),this.m_endColEndHeaderPixel-=i.dimensionChange,this.m_endColEndHeader-=i.extentChange))},be.prototype.removeColumnsFromRight=function(e){var t,i,n;if(this.m_endCol-this.m_startCol>this.MAX_COLUMN_THRESHOLD){if(i=e.firstChild.childNodes,t=this.m_currentScrollLeft+this.getViewportWidth()+this.getColumnThreshold(),this.m_endColPixel<=t||i.length<1)return;this.m_stopColumnFetch&&(this.m_stopColumnFetch=!1),n=this._removeCellsAlongAxis("column",t,!0),this.m_endColPixel-=n.dimensionChange,this.m_endCol-=n.extentChange}},be.prototype.removeRowHeadersFromTop=function(){var e,t,i,n;this.m_endRowHeader-this.m_startRowHeader>this.MAX_ROW_THRESHOLD&&(e=this.m_rowHeader.firstChild,t=this.getRowThreshold(),this.m_startRowHeaderPixel>=this.m_currentScrollTop-t||(i=this.removeHeadersFromStartOfContainer(e,null,this.m_startRowHeaderPixel,t,this.getMappedStyle("rowheadercell"),"height","top",this.m_currentScrollTop),this.m_startRowHeaderPixel+=i.dimensionChange,this.m_startRowHeader+=i.extentChange)),this.m_endRowEndHeader-this.m_startRowEndHeader>this.MAX_ROW_THRESHOLD&&(n=this.m_rowEndHeader.firstChild,t=this.getRowThreshold(),this.m_startRowEndHeaderPixel>=this.m_currentScrollTop-t||(i=this.removeHeadersFromStartOfContainer(n,null,this.m_startRowEndHeaderPixel,t,this.getMappedStyle("rowendheadercell"),"height","top",this.m_currentScrollTop),this.m_startRowEndHeaderPixel+=i.dimensionChange,this.m_startRowEndHeader+=i.extentChange))},be.prototype.removeRowsFromTop=function(e){var t,i;if(this.m_endRow-this.m_startRow>this.MAX_ROW_THRESHOLD){if(e.firstChild,t=this.getRowThreshold(),this.m_startRowPixel>=this.m_currentScrollTop-t)return;i=this._removeCellsAlongAxis("row",t,!1),this.m_startRowPixel+=i.dimensionChange,this.m_startRow+=i.extentChange}},be.prototype.removeRowHeadersFromBottom=function(){var e,t,i,n;t=this.m_currentScrollTop+this.getViewportHeight()+this.getRowThreshold(),this.m_endRowHeader-this.m_startRowHeader>this.MAX_ROW_THRESHOLD&&(e=this.m_rowHeader.firstChild,this.m_endRowHeaderPixel<=t||(this.m_stopRowHeaderFetch&&(this.m_stopRowHeaderFetch=!1),i=this.removeHeadersFromEndOfContainer(e,this.m_endRowHeaderPixel,t,this.getMappedStyle("rowheadercell"),"height"),this.m_endRowHeaderPixel-=i.dimensionChange,this.m_endRowHeader-=i.extentChange)),this.m_endRowEndHeader-this.m_startRowEndHeader>this.MAX_ROW_THRESHOLD&&(n=this.m_rowEndHeader.firstChild,this.m_endRowEndHeaderPixel<=t||(this.m_stopRowEndHeaderFetch&&(this.m_stopRowEndHeaderFetch=!1),i=this.removeHeadersFromEndOfContainer(n,this.m_endRowEndHeaderPixel,t,this.getMappedStyle("rowendheadercell"),"height"),this.m_endRowEndHeaderPixel-=i.dimensionChange,this.m_endRowEndHeader-=i.extentChange))},be.prototype.removeRowsFromBottom=function(e){var t,i;if(this.m_endRow-this.m_startRow>this.MAX_ROW_THRESHOLD){if(e.firstChild,t=this.m_currentScrollTop+this.getViewportHeight()+this.getRowThreshold(),this.m_endRowPixel<=t)return;this.m_stopRowFetch&&(this.m_stopRowFetch=!1),i=this._removeCellsAlongAxis("row",t,!0),this.m_endRowPixel-=i.dimensionChange,this.m_endRow-=i.extentChange}},be.prototype.dumpRanges=function(){null!=console&&console.log&&(console.log("================="),console.log("Start Row: "+this.m_startRow),console.log("  End Row: "+this.m_endRow),console.log("Start Column: "+this.m_startCol),console.log("  End Column: "+this.m_endCol),console.log("================="))},be.prototype.handleContextMenuGesture=function(e,t,i){var n,o,s,r,a;if(a=e.originalEvent.target,o=this.findCell(a),"touch"===t&&null!=o&&(n=this.getCellIndexes(o),(!this.isMultipleSelection()||!this._isContainSelection(n)||this._isDatabodyCellActive()&&n.row!=this.m_active.indexes.row&&n.column!=this.m_active.indexes.column)&&(this._isSelectionEnabled()?this.handleDatabodyClickSelection(e.originalEvent):this.handleDatabodyClickActive(e.originalEvent))),!this.m_utils._isNodeEditableOrClickable(a,this.m_root)){if(null!=o)n=this.getCellIndexes(o),this.isMultipleSelection()&&this._isContainSelection(n)?(r=this._getActiveElement(),s=this._isDatabodyCellActive()?"keyboard"===t?this._getCellCapability(r):this._getCellCapability(r,o):this._getHeaderCapability(r,o)):(r=o,s=this._getCellCapability(r));else if(null==(o=this.findHeader(a))){if(null==(o=this.findLabel(a)))return;"disable",s={resize:"disable",resizeWidth:"disable",resizeHeight:"disable",sortRow:"disable",sortCol:"disable",cut:"disable",paste:"disable",sortColAsc:"disable",sortColDsc:"disable"},r=o}else s=this._getHeaderCapability(o),r=o;i.call(null,{capabilities:s,launcher:r},e,t)}},be.prototype._getCellCapability=function(e,t){var i,n,o,s,r,a,l,u,h=!0,d=!0;return l="enable",i={resize:a="disable",resizeWidth:a,resizeHeight:a,sortRow:a,sortCol:a,cut:a,paste:a,sortColAsc:a,sortColDsc:a},null!=t&&(h=this._getIndex(e,"column")===this._getIndex(t,"column"),!1===(d=this._getKey(e,"row")===this._getKey(t,"row"))&&!1===h)?i:(n=this.getHeaderFromCell(e,"row"),o=this.getHeaderFromCell(e,"column"),s=this.getResources().getMappedAttribute("resizable"),r=this.getResources().getMappedAttribute("sortable"),null!=o&&h&&("true"===o.getAttribute(s)&&(i.resize=l,i.resizeWidth=l),"true"===o.getAttribute(r)&&(i.sortCol=l,i.sortColAsc=l,i.sortColDsc=l,"ascending"===(u=o.getAttribute(this.getResources().getMappedAttribute("sortDir")))?i.sortColAsc=a:"descending"===u&&(i.sortColDsc=a))),d&&(this._isMoveEnabled("row")&&(i.cut=l,i.paste=l),null!=n&&("true"===n.getAttribute(s)&&(i.resize=l,i.resizeHeight=l),"true"===n.getAttribute(r)&&(i.sortRow=l))),i)},be.prototype._getHeaderCapability=function(e,t){var i,n,o,s,r,a,l,u=!0,h=!0;return r="enable",i={resize:s="disable",resizeWidth:s,resizeHeight:s,sortRow:s,sortCol:s,cut:s,paste:s,sortColAsc:s,sortColDsc:s},null!=t&&(u=this.getHeaderCellIndex(e)===this._getIndex(t,"column"),!1===(h=this._getKey(e,"row")===this._getKey(t,"row"))&&!1===u)?i:(l=this.getHeaderCellAxis(e),n=this.getResources().getMappedAttribute("resizable"),o=this.getResources().getMappedAttribute("sortable"),null!==e&&("column"!=l&&"columnEnd"!=l||!u?h&&(this._isMoveEnabled("row")&&(i.cut=r,i.paste=r),"true"===e.getAttribute(n)&&(i.resize=r,i.resizeHeight=r),i.resizeWidth=this.m_options.isResizable(l,"width"),"true"===e.getAttribute(o)&&(i.sortRow=r)):("true"===e.getAttribute(n)&&(i.resizeWidth=r,i.resize=r),i.resizeHeight=this.m_options.isResizable(l,"height"),"true"===e.getAttribute(o)&&(i.sortCol=r,i.sortColAsc=r,i.sortColDsc=r,"ascending"===(a=e.getAttribute(this.getResources().getMappedAttribute("sortDir")))?i.sortColAsc=s:"descending"===a&&(i.sortColDsc=s)))),i.resize=i.resizeHeight===r||i.resizeWidth===r?r:s,i)},be.prototype.handleContextMenuReturn=function(e,t,i){var n,o;null!=this.m_active&&(n=this._getActiveElement()),t===this.m_resources.getMappedCommand("resizeHeight")||t===this.m_resources.getMappedCommand("resizeWidth")?this.isResizeEnabled()&&this.handleContextMenuResize(e,t,i,n):t===this.m_resources.getMappedCommand("sortColAsc")||t===this.m_resources.getMappedCommand("sortColDsc")?(o=t===this.m_resources.getMappedCommand("sortColAsc")?"ascending":"descending",this.m_utils.containsCSSClassName(n,this.getMappedStyle("cell"))&&(n=this.getHeaderFromCell(n,"column")),this._isDOMElementSortable(n)&&this._handleCellSort(e,o,n)):t===this.m_resources.getMappedCommand("sortRowAsc")||t===this.m_resources.getMappedCommand("sortRowDsc")?(o=t===this.m_resources.getMappedCommand("sortRowAsc")?"ascending":"descending",this.m_utils.containsCSSClassName(n,this.getMappedStyle("cell"))&&(n=this.getHeaderFromCell(n,"row")),this._isDOMElementSortable(n)&&this._handleCellSort(e,o,n)):t===this.m_resources.getMappedCommand("cut")?this._handleCut(e,n):t===this.m_resources.getMappedCommand("paste")?this._handlePaste(e,n):t===this.m_resources.getMappedCommand("discontiguousSelection")&&this.setDiscontiguousSelectionMode(i)},be.prototype._isSortEnabled=function(e,t){var i,n;return i=this.getDataSource().getCapability("sort"),!("enable"!==(n=this.m_options.isSortable(e,t))&&"auto"!==n||"full"!==i&&i!==e)},be.prototype._isDOMElementSortable=function(e){if(null==e)return!1;var t=this.findHeader(e);return null!=t&&"true"==t.getAttribute(this.getResources().getMappedAttribute("sortable"))},be.prototype._isSelectionEnabled=function(){return"none"!=this.m_options.getSelectionCardinality()},be.prototype.isMultipleSelection=function(){return"multiple"==this.m_options.getSelectionCardinality()},be.prototype.isResizeEnabled=function(){return this.m_options.isResizable("row","width")||this.m_options.isResizable("row","height")||this.m_options.isResizable("column","width")||this.m_options.isResizable("column","height")||this.m_options.isResizable("rowEnd","width")||this.m_options.isResizable("rowEnd","height")||this.m_options.isResizable("columnEnd","width")||this.m_options.isResizable("columnEnd","height")},be.prototype._isHeaderResizeEnabled=function(e,t){return"column"==e||"columnEnd"==e?"enable"==this.m_options.isResizable(e,"width",t):("row"==e||"rowEnd"==e)&&"enable"==this.m_options.isResizable(e,"height",t)},be.prototype.handleMouseMove=function(e){this.isResizeEnabled()&&0==this.m_databodyDragState&&this.handleResize(e)},be.prototype.handleRowHeaderMouseMove=function(e){this.m_databodyMove?this._handleMove(e):this.m_headerDragState&&this.m_selectionFrontier&&-1!=this.m_selectionFrontier.axis.indexOf("row")?this.extendSelectionHeader(e.target,e):this.m_isResizing||this.handleMouseMove(e)},be.prototype.handleColumnHeaderMouseMove=function(e){this.m_headerDragState&&this.m_selectionFrontier&&-1!=this.m_selectionFrontier.axis.indexOf("column")?this.extendSelectionHeader(e.target,e):this.m_isResizing||this.handleMouseMove(e)},be.prototype.handleHeaderMouseDown=function(e){var t,i,n,o,s;if(this._exitActionableMode(),n=e.target,e.shiftKey,!this._isEditOrEnter()||(t=this._getActiveElement(),0!=this._leaveEditing(e,t,!1))){if(0===e.button){if((this.m_utils.containsCSSClassName(n,this.getMappedStyle("sortascending"))||this.m_utils.containsCSSClassName(n,this.getMappedStyle("sortdescending")))&&this._isDOMElementSortable(n))return e.preventDefault(),void this._handleSortIconMouseDown(n);this.isResizeEnabled()&&(i=this.handleResizeMouseDown(e)),!this.m_isResizing&&this._isMoveOnElementEnabled(this.findHeader(n))&&(this.m_databodyMove=!0,this.m_currentX=e.pageX,this.m_currentY=e.pageY,i=!0)}this.m_isResizing||(this.m_root.contains(document.activeElement)&&document.activeElement!==this.m_root||(this.m_externalFocus=!0),s=this.m_options.getSelectionMode(),o=this.findHeader(n)[this.getResources().getMappedAttribute("context")],!this._isSelectionEnabled()||!this.isMultipleSelection()||"row"==s&&-1==o.axis.indexOf("row")||this.m_databodyMove?"row"==s&&-1!=o.axis.indexOf("row")&&this._isSelectionEnabled()?this.handleHeaderClickSelection(e):this.handleHeaderClickActive(e):(this.handleHeaderClickSelection(e),0===e.button&&(this.m_headerDragState=!0))),!0===i&&e.preventDefault()}},be.prototype.handleMouseUp=function(e){this.m_headerDragState=!1,this.m_databodyDragState=!1,this.m_databodyMove?this._handleMoveMouseUp(e,!1):this.isResizeEnabled()&&this.handleResizeMouseUp(e),this.m_databodyMove=!1},be.prototype.handleHeaderMouseOver=function(e){var t=e.target;this.m_utils.addCSSClassName(this.findHeader(t),this.getMappedStyle("hover")),this._isDOMElementSortable(t)&&this._handleSortMouseOver(e)},be.prototype.handleHeaderMouseOut=function(e){var t=e.target;this.m_utils.removeCSSClassName(this.findHeader(t),this.getMappedStyle("hover")),this._isDOMElementSortable(t)&&this._handleSortMouseOut(e)},be.prototype.handleHeaderMouseUp=function(e){this.handleDragAnchorChange(e),this.m_headerDragState=!1,this.m_databodyDragState=!1,this.m_databodyMove&&this._handleMoveMouseUp(e,!0)},be.prototype.handleCornerMouseDown=function(e){var t,i;i=e.target,null!=(t=this.findLabel(i))&&this._setActive(t,this._createActiveObject(t),e,!0)},be.prototype.handleCornerMouseOver=function(e){var t=e.target;this.m_utils.addCSSClassName(this.findLabel(t),this.getMappedStyle("hover"))},be.prototype.handleCornerMouseOut=function(e){var t=e.target;this.m_utils.removeCSSClassName(this.findLabel(t),this.getMappedStyle("hover"))},be.prototype.handleCornerClick=function(e){var t;t=e.target,null==this.find(t,"headerlabel")&&this._handleSelectAll(e)},be.prototype.handleHeaderClick=function(e){var t=e.target;(this.m_utils.containsCSSClassName(t,this.getMappedStyle("sortascending"))||this.m_utils.containsCSSClassName(t,this.getMappedStyle("sortdescending")))&&this._isDOMElementSortable(t)&&(this._removeTouchSelectionAffordance(),this._handleHeaderSort(e),e.preventDefault())},be.prototype.handleDatabodyMouseDown=function(e){var t,i,n;if(n=e.target,null!=(t=this.findCell(n))){if(this._isEditOrEnter()){if(t==(i=this._getActiveElement()))return;if(0==this._leaveEditing(e,i,!1))return}else this._exitActionableMode();0===e.button&&this._isMoveOnElementEnabled(t)&&(this.m_databodyMove=!0,this.m_currentX=e.pageX,this.m_currentY=e.pageY),this.m_root.contains(document.activeElement)&&document.activeElement!==this.m_root||(this.m_externalFocus=!0),this._isGridEditable()&&(this.m_shouldFocus=!this._isFocusableElementBeforeCell(n)),this._isSelectionEnabled()?(this.handleDatabodyClickSelection(e),this.isMultipleSelection()&&0===e.button&&(this.m_databodyDragState=!0)):this.handleDatabodyClickActive(e)}else this.m_scrollbarFocus=!0},be.prototype.handleDatabodyMouseOut=function(e){var t,i;this.m_databodyMove||(t=e.target,i=this.findCell(t),this._setCellHover(i,"remove"))},be.prototype.handleDatabodyMouseOver=function(e){var t,i;this.m_databodyMove||(t=e.target,i=this.findCell(t),this._setCellHover(i,"add"))},be.prototype._setCellHover=function(e,t){if(null!=e){var i=this.m_options.getSelectionMode();if("cell"===i)"add"==t?this.m_utils.addCSSClassName(e,this.getMappedStyle("hover")):this.m_utils.removeCSSClassName(e,this.getMappedStyle("hover"));else if("row"===i)for(var n=this._getIndex(e,"row"),o=this._getSelectionStartAndEnd(this.createIndex(n,this.m_startCol),this.createIndex(n,this.m_endCol),0),s=o.min.row;s<=o.max.row;s++)this._highlightCellsAlongAxis(s,"row","index",t,["hover"])}},be.prototype.handleDatabodyDoubleClick=function(e){var t,i,n;if(this._isGridEditable()){if(t=e.target,i=this.findCell(t),"edit"==this._getCurrentMode()){if(i==(n=this._getActiveElement()))return;if(!this._handleExitEdit(e,n))return}this._handleEditable(e,i),this._handleEdit(e,i)}},be.prototype.handleDatabodyMouseMove=function(e){this.m_databodyMove?this._handleMove(e):this.m_databodyDragState&&this.handleDatabodySelectionDrag(e)},be.prototype.handleDatabodyMouseUp=function(e){this.m_databodyDragState=!1,this.m_headerDragState=!1,this.m_databodyMove&&this._handleMoveMouseUp(e,!0)},be.prototype.handleDatabodyKeyDown=function(e){var t,i,n;e.target,e.keyCode,n=this.m_utils.ctrlEquivalent(e),e.defaultPrevented&&n&&(be.keyCodes.LEFT_KEY||be.keyCodes.RIGHT_KEY)||this.m_animating||(t=null!=this.m_active&&"header"==this.m_active.type?this._getActionFromKeyDown(e,this.m_active.axis,!1):null!=this.m_active&&"label"==this.m_active.type?this._getActionFromKeyDown(e,this.m_active.axis,!0):this._getActionFromKeyDown(e,"cell",!1),i=this._getActiveElement(),null!=t&&t.call(this,e,i)&&e.preventDefault())},be.prototype._fireKeyDownEvent=function(e){var t;return t={event:e,ui:{rowKey:this._getActiveKey("row")}},this.fireEvent("keydown",t)},be.prototype.findPos=function(e){var t,i;return e?(t=this.findPos(e.offsetParent),i=this.getElementTranslationXYZ(e.offsetParent),[parseInt(t[0],10)+parseInt(e.offsetLeft,10)+i[0],parseInt(t[1],10)+parseInt(e.offsetTop,10)+i[1]]):[0,0]},be.prototype.getElementTranslationXYZ=function(e){var t,i,n;return e?(n=(i=(t=document.defaultView.getComputedStyle(e,null)).getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform")).substr(7,i.length-8).split(", "),[isNaN(parseInt(n[4],10))?0:parseInt(n[4],10),isNaN(parseInt(n[5],10))?0:parseInt(n[5],10),isNaN(parseInt(n[6],10))?0:parseInt(n[6],10)]):[0,0,0]},be.prototype.handleDatabodyMouseWheel=function(e){var t,i,n;e.preventDefault(),this.m_animating||(i=(t=this.m_utils.getMousewheelScrollDelta(e)).deltaX,n=t.deltaY,this.scrollDelta(i,n))},be.prototype.handleTouchStart=function(e){var t,i,n,o;t=e.touches.length,o=e.touches[0].target,1==t?(this.m_startX=e.touches[0].pageX,this.m_startY=e.touches[0].pageY,this.m_currentX=this.m_startX,this.m_currentY=this.m_startY,this.m_prevX=this.m_startX,this.m_prevY=this.m_startY,this.m_startTime=(new Date).getTime(),this.m_touchActive=!0,this.isMultipleSelection()&&(o.className!==this.getMappedStyle("selectaffordancetop")&&o.className!==this.getMappedStyle("selectaffordancebottom")||(o=o.parentNode),(i=o===this.m_topSelectIconContainer?"top":o===this.m_bottomSelectIconContainer?"bottom":null)&&(this.m_touchMultipleSelect=!0,n=this.GetSelection(),this.m_touchSelectAnchor="top"===i?n[n.length-1].endIndex:n[n.length-1].startIndex)),!this.m_touchMultipleSelect&&this._isMoveOnElementEnabled(this.findCell(o))&&(this.m_databodyMove=!0)):this.handleTouchCancel(e)},be.prototype.handleTouchMove=function(e){var t,i,n;if(n=e.target,this.m_touchActive){if(e.preventDefault(),this.m_currentX=e.touches[0].pageX,this.m_currentY=e.touches[0].pageY,t=this.m_currentX-this.m_prevX,i=this.m_currentY-this.m_prevY,this.getResources().isRTLMode()&&(t*=-1),this.m_touchMultipleSelect)this.handleDatabodySelectionDrag(e);else if(this.m_databodyMove)this._removeTouchSelectionAffordance(),this._handleMove(e);else if(this._isEditOrEnter()){var o=this._getActiveElement();this.findCell(n)!=o&&this._handleNonSwipeScroll(t,i)}else this._handleNonSwipeScroll(t,i);this.m_prevX=this.m_currentX,this.m_prevY=this.m_currentY}else this.handleTouchCancel(e)},be.prototype.handleTouchEnd=function(e){var t,i,n;if(n=e.target,this._isEditOrEnter()){if(i=this._getActiveElement(),this.findCell(n)==i)return void this.handleTouchCancel(e);this._leaveEditing(e,i,!1)}else this._exitActionableMode();if(null!=this.m_lastTapTime&&this.m_startTime-this.m_lastTapTime<250&&this.m_lastTapTarget===n?(this.m_lastTapTime=null,this.m_lastTapTarget=null,null!=(i=this.findCell(n))&&(this._handleEditable(e,i),this._handleEdit(e,i),e.preventDefault())):(this.m_lastTapTarget=e.target,this.m_lastTapTime=(new Date).getTime()),this.m_touchActive&&!e.defaultPrevented)if(this.m_touchMultipleSelect)e.preventDefault(),this.m_touchMultipleSelect=!1;else{if(t=this.m_lastTapTime-this.m_startTime,this.m_currentX==this.m_startX&&this.m_currentY==this.m_startY)return this.m_databodyMove=!1,this._isSelectionEnabled()&&t<be.CONTEXT_MENU_TAP_HOLD_DURATION?void this.handleDatabodyClickSelection(e):void this.handleDatabodyClickActive(e);if(this.m_databodyMove)return e.preventDefault(),this.m_databodyMove=!1,void this._handleMoveMouseUp(e,!0);this._handleSwipe(e)}this.handleTouchCancel(e)},be.prototype._calculateMomentum=function(e,t,i,n,o,s){var r,a,l,u,h;return r=e-t,l=(a=Math.abs(r)/i)*a/(2*be.DECELERATION_FACTOR)*(r<0?-1:1),u=a/be.DECELERATION_FACTOR,s&&(l*=-1),n-l>o?(h=Math.max(-1*be.MAX_OVERSCROLL_PIXEL,l),l=n-o,u=(r=o-n)/a):n-l<0&&(h=Math.min(be.MAX_OVERSCROLL_PIXEL,l),l=n,u=(r=n)/a),{destination:Math.round(l),duration:Math.min(Math.max(be.MIN_SWIPE_TRANSITION_DURATION,u),be.MAX_SWIPE_TRANSITION_DURATION),overScroll:h}},be.prototype.handleTouchCancel=function(e){this.m_databodyMove&&(this._handleMoveMouseUp(e,!1),this.m_databodyMove=!1),this.m_touchSelectAnchor=null,this.m_touchMultipleSelect=!1,this.m_touchActive=!1,this.m_startX=0,this.m_startY=0,this.m_prevX=0,this.m_prevY=0,this.m_currentX=0,this.m_currentY=0,this.m_startTime=0},be.prototype.handleHeaderTouchStart=function(e){var t,i,n;this.m_touchStart=(new Date).getTime(),i=e.touches.length,n=e.target,1==i?(this.m_startX=e.touches[0].pageX,this.m_startY=e.touches[0].pageY,this.m_currentX=this.m_startX,this.m_currentY=this.m_startY,this.m_prevX=this.m_startX,this.m_prevY=this.m_startY,this.m_touchActive=!0,t=this.findHeader(n),this.isResizeEnabled()&&(this.handleResize(e),this.handleResizeMouseDown(e)),!this.m_isResizing&&this._isMoveOnElementEnabled(t)&&(this.m_databodyMove=!0)):this.handleHeaderTouchCancel(e)},be.prototype.handleHeaderTouchMove=function(e){var t,i,n,o,s;this.m_touchActive?(e.preventDefault(),this.m_currentX=e.touches[0].pageX,this.m_currentY=e.touches[0].pageY,t=this.m_currentX-this.m_prevX,i=this.m_currentY-this.m_prevY,this.m_isResizing&&this.isResizeEnabled()?this.handleResize(e):this.m_databodyMove?(this._removeTouchSelectionAffordance(),this._handleMove(e)):(o=e.target,n=this.findHeader(o),"column"==(s=this.getHeaderCellAxis(n))||"columnEnd"==s?this._handleNonSwipeScroll(t,0):this._handleNonSwipeScroll(0,i)),this.m_prevX=this.m_currentX,this.m_prevY=this.m_currentY):this.handleTouchCancel(e)},be.prototype.handleHeaderTouchEnd=function(e){var t,i,n,o;(new Date).getTime(),this.m_touchStart,this.m_touchActive&&!e.defaultPrevented&&(i=e.target,this.m_isResizing&&this.isResizeEnabled()?(this.handleResizeMouseUp(e),this.m_currentX!=this.m_startX&&this.m_currentY!=this.m_startY&&e.preventDefault()):this.m_currentX==this.m_startX&&this.m_currentY==this.m_startY?(n=this.m_options.getSelectionMode(),o=(t=this.findHeader(i))[this.getResources().getMappedAttribute("context")],(this.m_utils.containsCSSClassName(i,this.getMappedStyle("sortascending"))||this.m_utils.containsCSSClassName(i,this.getMappedStyle("sortdescending")))&&this._isDOMElementSortable(i)?(e.preventDefault(),this._removeTouchSelectionAffordance(),this._handleSortIconMouseDown(i),this._handleHeaderSort(e)):!this._isSelectionEnabled()||!this.isMultipleSelection()||"row"==n&&-1==o.axis.indexOf("row")||this.m_databodyMove?"row"==n&&-1!=o.axis.indexOf("row")&&this._isSelectionEnabled()?this.handleHeaderClickSelection(e):this.handleHeaderClickActive(e):(this.handleHeaderClickSelection(e),0===e.button&&(this.m_headerDragState=!0))):this.m_databodyMove?(e.preventDefault(),this.m_databodyMove=!1,this._handleMoveMouseUp(e,!0)):(t=this.findHeader(i),this._handleSwipe(e,this.getHeaderCellAxis(t)))),this.handleHeaderTouchCancel(e)},be.prototype.handleHeaderTouchCancel=function(e){this.m_databodyMove&&(this._handleMoveMouseUp(e,!1),this.m_databodyMove=!1),this.m_touchActive=!1,this.m_startX=0,this.m_startY=0,this.m_prevX=0,this.m_prevY=0,this.m_currentX=0,this.m_currentY=0},be.prototype._handleNonSwipeScroll=function(e,t){var i=(new Date).getTime();this._disableTouchScrollAnimation();var n=this.adjustTouchScroll(e,t);e=n[0],t=n[1],this.scrollDelta(e,t),i-this.m_startTime>be.TAP_AND_SCROLL_RESET&&(this.m_startX=this.m_currentX,this.m_startY=this.m_currentY,this.m_startTime=(new Date).getTime())},be.prototype._handleSwipe=function(e,t){var i,n,o,s,r,a,l;if(i=(new Date).getTime()-this.m_startTime,n=this.getResources().isRTLMode(),o=this.m_currentX-this.m_startX,s=this.m_currentY-this.m_startY,n&&(o*=-1),Math.abs(o)<be.MIN_SWIPE_DISTANCE&&Math.abs(s)<be.MIN_SWIPE_DISTANCE&&i<be.MIN_SWIPE_DURATION)e.preventDefault(),this._isSelectionEnabled()&&this._scrollTouchSelectionAffordance();else if(i<be.MAX_SWIPE_DURATION){e.preventDefault(),"row"!=t&&"rowEnd"!=t?(r=this._calculateMomentum(this.m_currentX,this.m_startX,i,this.m_currentScrollLeft,this.m_scrollWidth,n),isNaN(r.overScroll)||(r.overScroll>0||this.m_stopColumnFetch)&&(this.m_extraScrollOverX=-1*r.overScroll)):(r={duration:0,destination:0},o=0),"column"!=t&&"columnEnd"!=t?(a=this._calculateMomentum(this.m_currentY,this.m_startY,i,this.m_currentScrollTop,this.m_scrollHeight),isNaN(a.overScroll)||(a.overScroll>0||this.m_stopRowFetch)&&(this.m_extraScrollOverY=-1*a.overScroll)):(a={duration:0,destination:0},s=0),l=Math.max(r.duration,a.duration),this.m_databody.firstChild.style.webkitTransitionDuration=l+"ms",this.m_rowHeader.firstChild.style.webkitTransitionDuration=l+"ms",this.m_colHeader.firstChild.style.webkitTransitionDuration=l+"ms",this.m_rowEndHeader.firstChild.style.webkitTransitionDuration=l+"ms",this.m_colEndHeader.firstChild.style.webkitTransitionDuration=l+"ms",o+=r.destination,s+=a.destination;var u=this.adjustTouchScroll(o,s);o=u[0],s=u[1],this.scrollDelta(o,s)}},be.prototype.fireEvent=function(e,t){var i;if(null!=e&&null!=t)return null==(i=this.callbacks[e])||i(t)},be.prototype.addListener=function(e,t){this.callbacks[e]=t},be.prototype.setElementHeight=function(e,t){e.style.height=t+"px"},be.prototype.getElementHeight=function(e){return this.getElementDir(e,"height")},be.prototype.setElementWidth=function(e,t){e.style.width=t+"px"},be.prototype.getElementWidth=function(e){return this.getElementDir(e,"width")},be.prototype.setElementDir=function(e,t,i){e.style[i]=t+"px"},be.prototype.getElementDir=function(e,t){var i;return e.style[t].indexOf("px")>-1&&-1==e.style[t].indexOf("e")?parseFloat(e.style[t]):(document.body.contains(e)?i=Math.round(e["offset"+t.charAt(0).toUpperCase()+t.slice(1)]):(e.style.visibility="hidden",this.m_root.appendChild(e),i=Math.round(e["offset"+t.charAt(0).toUpperCase()+t.slice(1)]),this.m_root.removeChild(e),e.style.visibility=""),i)},be.BEFORE=1,be.AFTER=2,be.INSIDE=3,be.prototype._isInViewport=function(e){var t,i;return t=e.row,i=e.column,-1===t&&-1===i?-1:-1===t?i<this.m_startCol?be.BEFORE:i>this.m_endCol?be.AFTER:be.INSIDE:-1===i?t<this.m_startRow?be.BEFORE:t>this.m_endRow?be.AFTER:be.INSIDE:i>=this.m_startCol&&i<=this.m_endCol&&t>=this.m_startRow&&t<=this.m_endRow?be.INSIDE:-1},be.prototype._isCellBoundryInViewport=function(e,t,i,n){var o=this._getViewportTop(),s=this._getViewportBottom(),r=this._getViewportLeft(),a=this._getViewportRight();return(n<=s&&n>o||i>=o&&i<s)&&(t<=a&&t>r||e>=r&&e<a)},be.prototype.queueModelEvent=function(e){return!(this.m_initialized&&!this.m_processingEventQueue&&!this.m_animating&&!this.m_processingModelEvent)&&(null==this.m_modelEvents&&(this.m_modelEvents=[]),this.m_modelEvents.push(e),!0)},be.prototype.handleModelEvent=function(e,t){var n,o,s,r,a,l,u,h,d;void 0===t&&this.queueModelEvent(e)||(n=e.operation,o=e.keys,u=e.source,l=e.indexes,s=e.result,r=e.header,a=e.endheader,h=e.silent,d=!1,this.m_processingModelEvent=!0,"insert"===n?(this._adjustActive(n,l),this.m_shouldFocus=!0,this._adjustSelectionOnModelChange(n,o,l),null!=s?(this._handleModelInsertRangeEvent(s,r,a),d=!0):this._handleModelInsertEvent(l,o)):"update"===n?(this._handleModelUpdateEvent(l,o),d=!0):"delete"===n?(this._adjustActive(n,l),this._adjustSelectionOnModelChange(n,o,l),u&&i.FlattenedTreeDataGridDataSource&&u instanceof i.FlattenedTreeDataGridDataSource&&this.m_utils.supportsTransitions()?(this._handleModelDeleteEventWithAnimation(o),d=!0):this._handleModelDeleteEvent(l,o,h)):"refresh"===n||"reset"===n?this._handleModelRefreshEvent():"sync"===n&&this._handleModelSyncEvent(e),this.m_processingModelEvent=!1,!d&&t&&this._runModelEventQueue())},be.prototype._adjustActive=function(e,t){var i,n,o,s,r;if(null!=this.m_active){if("cell"==this.m_active.type)s=!1,i=this.m_active.indexes.row;else{if("header"!=this.m_active.type||"row"!==this.m_active.axis)return;s=!0,i=this.m_active.index}if(Array.isArray(t)||(t=new Array(t)),!0===this.m_moveActive){if("insert"===e)return void(s?this.m_active.index=t[0].row:this.m_active.indexes.row=t[0].row);if("delete"===e&&t[0].row===i)return}for(r="insert"===e?1:-1,n=0;n<t.length;n++)(o=t[n].row)<i?s?this.m_active.index+=r:this.m_active.indexes.row+=r:o===i&&"delete"===e&&this._setActive(null,null)}},be.prototype._adjustSelectionOnModelChange=function(e,t,i){var n,o,s,r,a,l,u,h,d,c,p,_,m;if(Array.isArray(t)||(t=new Array(t)),Array.isArray(i)||(i=new Array(i)),n=this.GetSelection(),null!=t&&null!=i&&t.length==i.length&&0!=n.length)for(_="insert"===e?1:-1,o=0;o<t.length;o++)for(s=t[o].row,r=i[o].row,a=n.length;a--;)if(u=(l=n[a]).startKey.row,h=l.endKey.row,d=l.startIndex.row,c=l.endIndex.row,u==s){if(h==s&&"delete"==e){n.splice(a,1);continue}p=this._getKey(this._getAxisCellsByIndex(l.startIndex.row+1,"row")[0],"row"),l.startKey.row=p,l.endIndex.row+=_}else h==s?(p=this._getKey(this._getAxisCellsByIndex(l.startIndex.row-1,"row")[0],"row"),l.endKey.row=p,l.endIndex.row+=_):r<=d?(l.startIndex.row+=_,l.endIndex.row+=_):r<c&&(l.endIndex.row+=_);else this.m_moveActive&&"insert"==e&&(this._isSelectionEnabled()&&this._isDatabodyCellActive()&&(m="cell"==this.m_options.getSelectionMode()?this.createRange(this.m_active.indexes,this.m_active.indexes,t[0],t[0]):this.createRange(i[0],i[0],t[0],t[0]),this.m_selectionFrontier=this.m_active.indexes,n.push(m)),this.m_moveActive=!1)},be.prototype._handleModelInsertEvent=function(e,t){var i,n,o,s;(i=this._isInViewport(e))===be.INSIDE||i===be.AFTER&&e.row==this.m_endRow+1?null!=t.row&&(this._databodyEmpty()?(this.empty(),this.refresh(this.m_root)):(this._modifyAxisCellContextIndex("row",e.row,this.m_endRow-e.row+1,1),this._refreshDatabodyMap(),this.fetchHeaders("row",e.row,this.m_rowHeader,this.m_rowEndHeader,1,{success:this._handleHeaderInsertsFetchSuccess}),this.fetchCells(this.m_databody,e.row,this.m_startCol,1,this.m_endCol-this.m_startCol+1,{success:this._handleCellInsertsFetchSuccess}))):(i===be.BEFORE&&(this._modifyAxisCellContextIndex("row",0,this.m_endRow+1,1),this._refreshDatabodyMap(),this.m_startRow++,this.m_startRowHeader++,this.m_endRow++,this.m_endRowHeader++,this.m_startRowPixel+=this.m_avgRowHeight,this.m_startRowHeaderPixel+=this.m_avgRowHeight,this.m_endRowPixel+=this.m_avgRowHeight,this.m_endRowHeaderPixel+=this.m_avgRowHeight,null!=(n=this.m_databody.firstChild.firstChild)&&this.pushRowsDown(n,this.m_avgRowHeight),null!=(o=this.m_rowHeader.firstChild.firstChild)&&this.pushRowsDown(o,this.m_avgRowHeight),null!=(s=this.m_rowEndHeader.firstChild.firstChild)&&this.pushRowsDown(s,this.m_avgRowHeight)),this.scrollToIndex(e))},be.prototype._handleCellInsertsFetchSuccess=function(e,t){var i;this.m_initialized=!1,this.handleCellsFetchSuccess(e,t,this.m_endRow>=t[0].start),i=t[0].start,this._scrollRowIntoViewport(i),this._isHighWatermarkScrolling()||this._cleanupViewport("top"),this.updateRowBanding(),this.m_stopRowFetch=!1,-1!=this.m_endRowHeader&&(this.m_stopRowHeaderFetch=!1),-1!=this.m_endRowEndHeader&&(this.m_stopRowEndHeaderFetch=!1),this.fillViewport()},be.prototype._handleHeaderInsertsFetchSuccess=function(e,t,i){this.m_resizeRequired=!0,this.handleHeadersFetchSuccess(e,t,i,this.m_endRowHeader>=t.start)},be.prototype._scrollRowIntoViewport=function(e){var t,i,n,o,s;null!=(t=this._getAxisCellsByIndex(e,"row"))&&(i=this._getViewportTop(),n=this._getViewportBottom(),(s=i-(o=this.getElementDir(t[0],"top")))>0?this.scrollDelta(0,s):(s=n-o)<0&&this.scrollDelta(0,s))},be.prototype._handleModelInsertRangeEvent=function(e,t,i){var n,o,s,r,a,l,u,h,d,c,p,_,m,g,f,v,C,y;if(n=e.getStart("row"),o=e.getCount("row"),s=e.getStart("column"),r=e.getCount("column"),this.m_utils.supportsTransitions()){if(null!=t)for(a=document.createDocumentFragment(),u=t.getCount(),c=0,h=0,_=this.getMappedStyle("headercell")+" "+this.getMappedStyle("rowheadercell"),m=this.m_options.getRenderer("row");u-h>0;)d=n+h,h+=(p=this.buildLevelHeaders(a,d,0,0,this.m_startRowPixel+c,!0,n!=this.m_endRowHeader+1,m,t,"row",_,this.m_rowHeaderLevelCount)).count,c+=p.totalHeaderDimension;if(null!=i)for(C=document.createDocumentFragment(),y=i.getCount(),c=0,h=0,_=this.getMappedStyle("endheadercell")+" "+this.getMappedStyle("rowendheadercell"),m=this.m_options.getRenderer("rowEnd");y-h>0;)d=n+h,h+=(p=this.buildLevelHeaders(C,d,0,0,this.m_startRowPixel+c,!0,n!=this.m_endRowEndHeader+1,m,i,"rowEnd",_,this.m_rowEndHeaderLevelCount)).count,c+=p.totalHeaderDimension;if(l=document.createDocumentFragment(),p=this._addCellsToFragment(l,e,n,this.m_startRowPixel,s,this.m_startColPixel),!(0!==l.childNodes.length||null!=a&&0!==a.childNodes.length||null!=C&&0!==C.childNodes.length))return;this._insertRowsWithAnimation(l,a,C,n,e.getCount("row"),p.totalRowHeight)}else g={axis:"row",start:n,count:o},f={axis:"column",start:s,count:r},null!=t&&(v={axis:"row",header:this.m_rowHeader,endHeader:this.m_rowEndHeader,start:n,count:t.getCount()},this.m_fetching.row=v,this._handleHeaderInsertsFetchSuccess(t,v,i)),this._modifyAxisCellContextIndex("row",n,this.m_endRow-n+1,o),this._refreshDatabodyMap(),this._handleCellInsertsFetchSuccess(e,[g,f])},be.prototype._handleModelUpdateEvent=function(e,t){this._isInViewport(e)===be.INSIDE&&(-1!=this.m_endRowHeader&&this.fetchHeaders("row",e.row,this.m_rowHeader,this.m_rowEndHeader,1,{success:this._handleHeaderUpdatesFetchSuccess,error:this.handleHeadersFetchError}),this.fetchCells(this.m_databody,e.row,this.m_startCol,1,this.m_endCol-this.m_startCol+1,{success:this._handleCellUpdatesFetchSuccess,error:this.handleCellsFetchError}))},be.prototype._handleHeaderUpdatesFetchSuccess=function(e,t,i){var n,o,s;n=t.axis,this.m_fetching[n]=!1,o=t.start,this._replaceHeaders(this.buildRowHeaders.bind(this),e,this.m_rowHeader,o,this.m_startRowHeader),this._replaceHeaders(this.buildRowEndHeaders.bind(this),i,this.m_rowEndHeader,o,this.m_startRowEndHeader),s=this.m_rowHeader.firstChild.childNodes[o-this.m_startRowHeader],null==this.m_active||"header"!==this.m_active.type||"row"!==this.m_active.axis&&"rowEnd"!==this.m_active.axis||this._getKey(s,"row")!==this.m_active.key||this._highlightActive(),this._signalTaskEnd()},be.prototype._replaceHeaders=function(e,t,i,n,o){var s,r,a;null!=t&&(r=e(i,t,n,1,!0,!0),a=(s=i.firstChild).childNodes[n-o],s.replaceChild(r,a))},be.prototype._handleCellUpdatesFetchSuccess=function(e,t){var i,n,o;this.m_fetching.cells=!1,i=t[0].start,n=this.m_options.getRenderer("cell"),o=this.m_options.getColumnBandingInterval(),this.m_options.getRowBandingInterval(),this._updateCellsInRow(e,i,n,this.m_startCol,o),this._signalTaskEnd()},be.prototype._getUpdateAnimation=function(){return be.UPDATE_ANIMATION_SLIDE_INOUT},be.prototype._getUpdateAnimationDuration=function(){return be.UPDATE_ANIMATION_DURATION},be.prototype._updateCellsInRow=function(e,t,i,n,o){var s,r,a,l,u,h,d,c;if(s=this._getUpdateAnimationDuration(),u=this._getAxisCellsByIndex(t,"row"),d=this.getElementDir(u[0],"top"),0!==s&&this.m_utils.supportsTransitions()){for((r=this)._signalTaskStart(),this._removeFromArray(u),h=document.createDocumentFragment(),this._addCellsToFragment(h,e,t,d,n,this.m_startColPixel),u=h.childNodes,a=this.getElementWidth(this.m_databody),c=0;c<u.length;c++)this.addTransformMoveStyle(u[c],0,0,"linear",a,0,0);this._populateDatabody(this.m_databody.firstChild,h),u=this._getAxisCellsByIndex(t,"row"),this.hideStatusText(),l=function(){for(c=0;c<u.length;c++)r.removeTransformMoveStyle(u[c]);r._isSelectionEnabled()&&r.applySelection(),r._highlightActive(),r._signalTaskEnd(),r._runModelEventQueue()},this._onTransitionEnd(u[u.length-1],l,s),setTimeout(function(){for(c=0;c<u.length;c++)r.addTransformMoveStyle(u[c],s+"ms",0,"linear",0,0,0)},0)}else this._removeFromArray(u),h=document.createDocumentFragment(),this._addCellsToFragment(h,e,t,d,n,this.m_startColPixel),this._populateDatabody(this.m_databody.firstChild,h),this._isSelectionEnabled()&&this.applySelection(),this._highlightActive(),this.hideStatusText()},be.prototype._handleModelDeleteEvent=function(e,t,i){var n,o,s,r,a,l,u,h,d,c,p,_,m,g,f,v,C,y;for(Array.isArray(t)||(t=new Array(t),e=new Array(e)),u=0,h=0,d=0,g=0,f=0,o=0;o<t.length;o++)n=t[o],m=e[o],null!=n.row&&(r=0,s=n.row,(_=this._isInViewport(m))===be.BEFORE?(this._modifyAxisCellContextIndex("row",this.m_startRow,this.m_endRow-this.m_startRow+1,-1),g++,u+=this.m_avgRowHeight,this.m_startRowPixel-=this.m_avgRowHeight,this.m_endRowPixel-=this.m_avgRowHeight,-1!=this.m_endRowHeader&&(this.m_startRowHeaderPixel-=this.m_avgRowHeight,this.m_endRowHeaderPixel-=this.m_avgRowHeight),null!=(y=this._getAxisCellsByKey(s,"row"))&&this.pushRowsUp(this.m_startRow,this.m_avgRowHeight),null!=(p=this.m_rowHeader.firstChild.firstChild)&&this.pushRowHeadersUp(p,this.m_avgRowHeight),null!=(C=this.m_rowEndHeader.firstChild.firstChild)&&this.pushRowHeadersUp(C,this.m_avgRowHeight)):_===be.INSIDE?(f++,null!=(y=this._getAxisCellsByKey(s,"row"))&&(r=this.calculateRowHeight(y[0]),m=y[0][this.getResources().getMappedAttribute("context")].indexes.row,this._modifyAxisCellContextIndex("row",m+1,this.m_endRow-m,-1),this._removeFromArray(y),this.pushRowsUp(m,r),this.m_endRowPixel-=r),null!=(p=this._findHeaderByKey(s,this.m_rowHeader,this.getMappedStyle("rowheadercell")))&&(r=this.calculateRowHeaderHeight(p),a=p.nextSibling,this._remove(p),this.pushRowHeadersUp(a,r),this.m_endRowHeaderPixel-=r),null!=(C=this._findHeaderByKey(s,this.m_rowEndHeader,this.getMappedStyle("rowendheadercell")))&&(r=this.calculateRowHeaderHeight(C),a=C.nextSibling,this._remove(C),this.pushRowHeadersUp(a,r),this.m_endRowEndHeaderPixel-=r),h+=r):"scroll"===this.m_options.getScrollPolicy()&&(d+=this.m_avgRowHeight));this._refreshDatabodyMap(),this.m_startRow-=g,this.m_endRow=this.m_endRow-g-f,-1!=this.m_endRowHeader&&(this.m_startRowHeader-=g,this.m_endRowHeader=this.m_endRowHeader-g-f),-1!=this.m_endRowEndHeader&&(this.m_startRowEndHeader-=g,this.m_endRowEndHeader=this.m_endRowEndHeader-g-f),v=u+h+d,l=this.m_databody.firstChild,c=this.getElementHeight(l)-v,this.setElementHeight(l,c),this.resizeGrid(),i||1==this.m_moveActive||(this.m_resizeRequired=!0,this.m_stopRowFetch=!1,-1!=this.m_endRowHeader&&(this.m_stopRowHeaderFetch=!1),-1!=this.m_endRowEndHeader&&(this.m_stopRowEndHeaderFetch=!1),this.fillViewport()),this.updateRowBanding()},be.prototype._handleModelDeleteEventWithAnimation=function(e){this._collapseRowsWithAnimation(e)},be.prototype._getSelectionGaps=function(e){var t,i,n;for(i=[],n=[],!0,t=0;t<e.length-1;t++)e[t+1]-e[t]==1?(i.push(e[t]),!1):(i.push(e[t]),n.push(i),i=[],!0);return i.push(e[e.length-1]),n.push(i),n},be.prototype._collapseRowsWithAnimation=function(e){var t,i,n,o,s,r,a,l,u,h,d,c,p,_,m,g,f,v,C,y,b,S;if(0!=e.length){for((t=this)._signalTaskStart(),i=this.m_processingEventQueue?1:be.COLLAPSE_ANIMATION_DURATION,_=[],f=0,b=-1!=this.m_endRowHeader,S=-1!=this.m_endRowEndHeader,n=this.m_databody.firstChild,o=this._getIndex(this._getAxisCellsByKey(e[0].row,"row")[0],"row")-1,s=this._getAxisCellsByIndex(o,"row"),this.getElementDir(s[0],"top"),h=o;h>=this.m_startRow&&(u=this._getAxisCellsByIndex(h,"row"),!(this.getElementDir(u[0],"top")+this.getElementHeight(u[0])<this.m_currentScrollTop));h--)for(d=0;d<u.length;d++)this.changeStyleProperty(u[d],this.getCssSupport("z-index"),10);if(b)for(m=[],r=this._findHeaderByKey(e[0].row,this.m_rowHeader,this.getMappedStyle("rowheadercell")).previousSibling,this.getElementDir(r,"top"),p=r;p&&!(this.getElementDir(p,"top")+this.getElementHeight(p)<this.m_currentScrollTop);)this.changeStyleProperty(p,this.getCssSupport("z-index"),10),p=p.previousSibling;if(S)for(g=[],a=this._findHeaderByKey(e[0].row,this.m_rowEndHeader,this.getMappedStyle("rowendheadercell")).previousSibling,this.getElementDir(a,"top"),p=a;p&&!(this.getElementDir(p,"top")+this.getElementHeight(p)<this.m_currentScrollTop);)this.changeStyleProperty(p,this.getCssSupport("z-index"),10),p=p.previousSibling;for(h=0;h<e.length;h++){if(c=e[h].row,null!=(u=this._getAxisCellsByKey(c,"row")))for(_.push(u),f+=this.getElementHeight(u[0]),d=0;d<u.length;d++)this.setElementDir(u[d],this.getElementDir(u[d],"top")-f,"top"),this.addTransformMoveStyle(u[d],0,0,"linear",0,f,0);b&&null!=(v=this._findHeaderByKey(c,this.m_rowHeader,this.getMappedStyle("rowheadercell")))&&(m.push(v),this.setElementDir(v,this.getElementDir(v,"top")-f,"top"),this.addTransformMoveStyle(v,0,0,"linear",0,f,0)),S&&null!=(C=this._findHeaderByKey(c,this.m_rowEndHeader,this.getMappedStyle("rowendheadercell")))&&(g.push(C),this.setElementDir(C,this.getElementDir(C,"top")-f,"top"),this.addTransformMoveStyle(C,0,0,"linear",0,f,0))}for(h=o+e.length+1;h<=this.m_endRow;h++){for(u=this._getAxisCellsByIndex(h,"row"),d=0;d<u.length;d++)this.setElementDir(u[d],this.getElementDir(u[d],"top")-f,"top"),this.addTransformMoveStyle(u[d],0,0,"linear",0,f,0);b&&(v=v.nextSibling,this.setElementDir(v,this.getElementDir(v,"top")-f,"top"),this.addTransformMoveStyle(v,0,0,"linear",0,f,0)),S&&(C=C.nextSibling,this.setElementDir(C,this.getElementDir(C,"top")-f,"top"),this.addTransformMoveStyle(C,0,0,"linear",0,f,0))}l=this._getCellByIndex(this.createIndex(this.m_endRow,this.m_endCol)),y=function(){var i,s;for(t._modifyAxisCellContextIndex("row",o+e.length+1,t.m_endRow-(o+e.length),-1*e.length),i=0;i<_.length;i++){for(s=0;s<_[i].length;s++)t._remove(_[i][s]);b&&t._remove(m[i]),S&&t._remove(g[i])}t._refreshDatabodyMap(),t.m_endRow-=_.length,t.m_endRowPixel-=f,t.m_stopRowFetch=!1,b&&(t.m_endRowHeader-=m.length,t.m_endRowHeaderPixel-=f,t.m_stopRowHeaderFetch=!1),S&&(t.m_endRowEndHeader-=m.length,t.m_endRowEndHeaderPixel-=f,t.m_stopRowEndHeaderFetch=!1),t.setElementHeight(n,t.m_endRowPixel-t.m_startRowPixel),t.resizeGrid(),t.updateRowBanding(),t.fillViewport(),t._handleAnimationEnd()},t._onTransitionEnd(l,y,i),this.m_animating=!0,setTimeout(function(){for(h=o+1;h<=t.m_endRow;h++){for(u=t._getAxisCellsByIndex(h,"row"),d=0;d<u.length;d++)t.addTransformMoveStyle(u[d],i+"ms",0,"ease-out",0,0,0);b&&(v=t._getHeaderByIndex(h,0,t.m_rowHeader,t.m_rowHeaderLevelCount,t.m_startRowHeader),t.addTransformMoveStyle(v,i+"ms",0,"ease-out",0,0,0)),S&&(C=t._getHeaderByIndex(h,0,t.m_rowEndHeader,t.m_rowEndHeaderLevelCount,t.m_startRowEndHeader),t.addTransformMoveStyle(C,i+"ms",0,"ease-out",0,0,0))}},0)}},be.prototype._handleAnimationEnd=function(){var e,t,i,n;for(t=this.m_databody.firstChild,i=this.m_rowHeader.firstChild,n=this.m_rowEndHeader.firstChild,e=0;e<t.childNodes.length;e++)this.removeTransformMoveStyle(t.childNodes[e]),this.changeStyleProperty(t.childNodes[e],this.getCssSupport("z-index"),null,"remove");if(-1!=this.m_endRowHeader)for(e=0;e<i.childNodes.length;e++)this.removeTransformMoveStyle(i.childNodes[e]),this.changeStyleProperty(i.childNodes[e],this.getCssSupport("z-index"),null,"remove");if(-1!=this.m_endRowEndHeader)for(e=0;e<n.childNodes.length;e++)this.removeTransformMoveStyle(n.childNodes[e]),this.changeStyleProperty(n.childNodes[e],this.getCssSupport("z-index"),null,"remove");this.m_animating=!1,this._runModelEventQueue(),this._signalTaskEnd()},be.prototype._getCellOrHeaderByKey=function(e,t){var i=null,n=this._getAxisCellsByKey(e,t,!0);return null!=n&&n.length>0&&(i=n[0]),null==i&&("row"===t?null==(i=this._findHeaderByKey(e,this.m_rowHeader,this.getMappedStyle("rowheadercell")))&&(i=this._findHeaderByKey(e,this.m_rowEndHeader,this.getMappedStyle("rowendheadercell"))):"column"===t&&null==(i=this._findHeaderByKey(e,this.m_colHeader,this.getMappedStyle("colheadercell")))&&(i=this._findHeaderByKey(e,this.m_colEndHeader,this.getMappedStyle("colendheadercell")))),i},be.prototype._findHeaderByKey=function(e,t,i){var n,o,s,r;if(null==t)return null;for(n=t.getElementsByClassName?t.getElementsByClassName(i):t.childNodes,s=0;s<n.length;s++)if(o=n[s],r=this._getKey(o),this._shallowThenDeepCompare(r,e))return o;return null},be.prototype._handleModelRefreshEvent=function(){var e=this.getVisibility();e===be.VISIBILITY_STATE_VISIBLE?(this.empty(),null!=this.m_root.offsetParent?this.refresh(this.m_root):this.setVisibility(be.VISIBILITY_STATE_REFRESH)):e===be.VISIBILITY_STATE_HIDDEN&&(this.empty(),this.setVisibility(be.VISIBILITY_STATE_REFRESH))},be.prototype._handleModelSyncEvent=function(e){var t;t=e.pageSize,this.m_fetching={},this.m_startRow=0,this.m_endRow=-1,this.m_startRowHeader=0,this.m_endRowHeader=-1,this.m_startRowEndHeader=0,this.m_endRowEndHeader=-1,this.m_startRowPixel=0,this.m_endRowPixel=0,this.m_startRowHeaderPixel=0,this.m_endRowHeaderPixel=0,this.m_startRowEndHeaderPixel=0,this.m_endRowEndHeaderPixel=0,this.m_startCol=0,this.m_endCol=-1,this.m_startColHeader=0,this.m_endColHeader=-1,this.m_startColEndHeader=0,this.m_endColEndHeader=-1,this.m_startColPixel=0,this.m_endColPixel=0,this.m_startColHeaderPixel=0,this.m_endColHeaderPixel=0,this.m_startColEndHeaderPixel=0,this.m_endColEndHeaderPixel=0,this.m_rowHeaderLevelCount=void 0,this.m_columnHeaderLevelCount=void 0,this.m_rowEndHeaderLevelCount=void 0,this.m_columnEndHeaderLevelCount=void 0,this.m_avgRowHeight=void 0,this.m_avgColWidth=void 0,this.m_isEstimateRowCount=void 0,this.m_isEstimateColumnCount=void 0,this.m_stopRowFetch=!1,this.m_stopRowHeaderFetch=!1,this.m_stopRowEndHeaderFetch=!1,this.m_stopColumnFetch=!1,this.m_stopColumnHeaderFetch=!1,this.m_stopColumnEndHeaderFetch=!1,this._clearScrollPositionKeys(),this.m_selection=null,this.m_active=null,this.m_prevActive=null,this.m_trueIndex={},null!=this.m_empty&&(this.m_root.removeChild(this.m_empty),this.m_empty=null),this._showHeader(this.m_rowHeader),this._showHeader(this.m_colHeader),this._showHeader(this.m_rowEndHeader),this._showHeader(this.m_colEndHeader),this.m_initialized=!1,this.fetchHeaders("row",0,this.m_rowHeader,this.m_rowEndHeader,t,{success:function(e,t,i){this.handleRowHeadersFetchSuccessForLongScroll(e,t,i)}}),this.fetchHeaders("column",0,this.m_colHeader,this.m_colEndHeader,void 0,{success:function(e,t,i){this.handleColumnHeadersFetchSuccessForLongScroll(e,t,i)}}),this.fetchCells(this.m_databody,0,0,t,null,{success:function(e,t){this.handleCellsFetchSuccessForLongScroll(e,t)}})},be.prototype._setActiveByIndex=function(e,t,i,n,o){return this._setActive(this._getCellByIndex(e),{type:"cell",indexes:e},t,i,n,o)},be.prototype._updateActive=function(e,t,i){var n,o;null==e?this._setActive(null,null,null,!0,!1,i):null!=e.keys?o=this._getCellByKeys(e.keys):null!=e.indexes?o=this._getCellByIndex(e.indexes):null!=e.axis&&(n=null==e.level?0:e.level,"column"==e.axis?null!=e.key?o=this._findHeaderByKey(e.key,this.m_colHeader,this.getMappedStyle("colheadercell")):null!=e.index&&(o=this._getHeaderByIndex(e.index,n,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader)):"row"==e.axis?null!=e.key?o=this._findHeaderByKey(e.key,this.m_rowHeader,this.getMappedStyle("rowheadercell")):null!=e.index&&(o=this._getHeaderByIndex(e.index,n,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader)):"columnEnd"==e.axis?null!=e.key?o=this._findHeaderByKey(e.key,this.m_colEndHeader,this.getMappedStyle("colendheadercell")):null!=e.index&&(o=this._getHeaderByIndex(e.index,n,this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader)):"rowEnd"==e.axis&&(null!=e.key?o=this._findHeaderByKey(e.key,this.m_rowEndHeader,this.getMappedStyle("rowendheadercell")):null!=e.index&&(o=this._getHeaderByIndex(e.index,n,this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader)))),null!=o&&(t||(this.m_shouldFocus=!1),this._setActive(o,e,null,!0,!1,i))},be.prototype._setActive=function(e,t,i,n,o,s){if(null==t||s||this._scrollToActive(t),null!=e){var r=this._createActiveObject(e);if(this._compareActive(r,this.m_active)){if(o||this._fireBeforeCurrentCellEvent(r,this.m_active,i))return this.m_prevActive=this.m_active,this.m_active=r,i&&"mousedown"===i.type&&(this.m_trueIndex=null),n&&this._isSelectionEnabled()&&this._clearSelection(i),this._unhighlightActiveObject(this.m_prevActive),this._highlightActiveObject(this.m_active,this.m_prevActive),this._manageMoveCursor(),this._isGridEditable()&&("cell"===r.type&&this._setEditableClone(e),this._updateEdgeCellBorders("")),o||this._fireCurrentCellEvent(r,i),!0}else this._highlightActive()}else if(!this.m_scrollIndexAfterFetch&&!this.m_scrollHeaderAfterFetch)return(o||this._fireBeforeCurrentCellEvent(r,this.m_active,i))&&(this.m_prevActive=this.m_active,this.m_active=null,this._unhighlightActiveObject(this.m_prevActive),o||this._fireCurrentCellEvent(r,i)),!0;return!1},be.prototype._createActiveObject=function(e){var t=e[this.getResources().getMappedAttribute("context")];return this.m_utils.containsCSSClassName(e,this.getMappedStyle("headercell"))||this.m_utils.containsCSSClassName(e,this.getMappedStyle("endheadercell"))?{type:"header",axis:t.axis,index:this.getHeaderCellIndex(e),key:t.key,level:t.level}:this.m_utils.containsCSSClassName(e,this.getMappedStyle("headerlabel"))?{type:"label",axis:t.axis,level:t.level}:{type:"cell",indexes:{row:t.indexes.row,column:t.indexes.column},keys:{row:t.keys.row,column:t.keys.column},extents:{row:t.extents.row,column:t.extents.column}}},be.prototype._getActiveElement=function(){return this._getElementFromActiveObject(this.m_active)},be.prototype._getElementFromActiveObject=function(e){if(null!=e){if("header"!=e.type)return"label"===e.type?this._getLabel(e.axis,e.level):this._getCellByIndex(e.indexes);if("row"===e.axis)return this._findHeaderByKey(e.key,this.m_rowHeader,this.getMappedStyle("rowheadercell"));if("column"===e.axis)return this._findHeaderByKey(e.key,this.m_colHeader,this.getMappedStyle("colheadercell"));if("rowEnd"===e.axis)return this._findHeaderByKey(e.key,this.m_rowEndHeader,this.getMappedStyle("rowendheadercell"));if("columnEnd"===e.axis)return this._findHeaderByKey(e.key,this.m_colEndHeader,this.getMappedStyle("colendheadercell"))}return null},be.prototype._compareActive=function(e,t){if(null==e&&null==t)return!1;if(null==e&&null!=t||null!=e&&null==t)return!0;if(e.type!=t.type)return!0;if("header"==e.type){if(e.index!=t.index||e.key!=t.key||e.axis!=t.axis||e.level!=t.level)return!0}else if("label"==e.type){if(e.axis!=t.axis||e.level!=t.level)return!0}else if(e.indexes.row!=t.indexes.row||e.indexes.column!=t.indexes.column||e.keys.row!=t.keys.row||e.keys.column!=t.keys.column)return!0;return!1},be.prototype._fireBeforeCurrentCellEvent=function(e,t,i){var n={event:i,ui:{currentCell:e,previousCurrentCell:t}};return this.fireEvent("beforeCurrentCell",n)},be.prototype._fireCurrentCellEvent=function(e,t){var i={event:t,ui:e};return this.fireEvent("currentCell",i)},be.prototype._isDatabodyCellActive=function(){return null!=this.m_active&&"cell"==this.m_active.type},be.prototype._updateActiveContext=function(e,t){var i,n,o,s,r;"header"===e.type?(i=e.axis,n=e.index,o=e.level,s={},"row"===e.axis?(this.m_rowHeaderLevelCount>1&&(null!=t&&o===t.level&&i===t.axis||(s.level=o)),null!=t&&n===t.index&&i===t.axis||(s.rowHeader=n)):"column"===i?(this.m_columnHeaderLevelCount>1&&(null!=t&&o===t.level&&i===t.axis||(s.level=o)),null!=t&&n===t.index&&i===t.axis||(s.columnHeader=n)):"rowEnd"===e.axis?(this.m_rowEndHeaderLevelCount>1&&(null!=t&&o===t.level&&i===t.axis||(s.level=o)),null!=t&&n===t.index&&i===t.axis||(s.rowEndHeader=n)):"columnEnd"===i&&(this.m_columnEndHeaderLevelCount>1&&(null!=t&&o===t.level&&i===t.axis||(s.level=o)),null!=t&&n===t.index&&i===t.axis||(s.columnEndHeader=n)),this._updateContextInfo(s,r)):"cell"===e.type&&(null==t||"cell"!=t.type||null==e||this.m_externalFocus||(e.indexes.row===t.indexes.row?r="row":e.indexes.column===t.indexes.column&&(r="column")),this._updateContextInfo(e,r))},be.prototype.handleDatabodyClickActive=function(e){var t,i;i=e.target,null!=(t=this.findCell(i))&&this._setActive(t,this._createActiveObject(t),e)},be.prototype.handleHeaderClickActive=function(e){var t,i;t=e.target,null!=(i=this.findHeader(t))&&(this._clearSelection(e),this._setActive(i,this._createActiveObject(i),e))},be.prototype._scrollToActive=function(e){"header"===e.type?this.scrollToHeader(e):"cell"===e.type&&this.scrollToIndex(e.indexes)},be.prototype._getCellByKeys=function(e){var t,i,n,o,s;if(null==e||null==e.row||null==e.column||null==this.m_databody||null==this.m_databody.firstChild)return null;for(t=this.m_databody.firstChild.getElementsByClassName(this.getMappedStyle("cell")),n=0;n<t.length;n++)if(i=t[n],o=this._getKey(i,"row"),this._shallowThenDeepCompare(o,e.row)&&(s=this._getKey(i,"column"),this._shallowThenDeepCompare(s,e.column)))return i;return null},be.prototype._shallowThenDeepCompare=function(e,t){return e===t||this._compareValuesCallback(e,t)},be.prototype.getCellIndexes=function(e){var t=e[this.getResources().getMappedAttribute("context")];return this.createIndex(t.indexes.row,t.indexes.column)},be.prototype.getCellExtents=function(e){var t=e[this.getResources().getMappedAttribute("context")];return this.createIndex(t.extents.row,t.extents.column)},be.prototype.getCellEndIndexes=function(e){var t=this.getCellIndexes(e),i=this.getCellExtents(e);return this.createIndex(t.row+i.row-1,t.column+i.column-1)},be.prototype._getIndex=function(e,t){if(null!=e){if(null==t||!this.m_utils.containsCSSClassName(e,this.getMappedStyle("cell")))return this.getHeaderCellIndex(e);var i=e[this.getResources().getMappedAttribute("context")];if("row"==t)return i.indexes.row;if("column"==t)return i.indexes.column}return null},be.prototype._getExtent=function(e,t){if(null!=e){if(null==t||!this.m_utils.containsCSSClassName(e,this.getMappedStyle("cell")))return parseInt(this._getAttribute(e,"extent",!0),10);var i=e[this.getResources().getMappedAttribute("context")];if("row"==t)return i.extents.row;if("column"==t)return i.extents.column}return null},be.prototype.getHeaderCellIndex=function(e){var t,i,n;switch(this.getHeaderCellAxis(e)){case"column":t=this.m_columnHeaderLevelCount,i=this.m_startColHeader;break;case"row":t=this.m_rowHeaderLevelCount,i=this.m_startRowHeader;break;case"columnEnd":t=this.m_columnEndHeaderLevelCount,i=this.m_startColEndHeader;break;case"rowEnd":t=this.m_rowEndHeaderLevelCount,i=this.m_startRowEndHeader;break;default:return-1}if(t>1){if(n=this._getAttribute(e.parentNode,"start",!0),e===e.parentNode.firstChild)return n;n--}else n=i;for(;e.previousSibling;)n+=1,e=e.previousSibling;return n},be.prototype.getHeaderCellAxis=function(e){return this.m_utils.containsCSSClassName(e,this.getMappedStyle("colheadercell"))?"column":this.m_utils.containsCSSClassName(e,this.getMappedStyle("rowheadercell"))?"row":this.m_utils.containsCSSClassName(e,this.getMappedStyle("rowendheadercell"))?"rowEnd":this.m_utils.containsCSSClassName(e,this.getMappedStyle("colendheadercell"))?"columnEnd":null},be.prototype.getHeaderCellLevel=function(e){var t;if(this.m_utils.containsCSSClassName(e,this.getMappedStyle("colheadercell"))){if(1===this.m_columnHeaderLevelCount)return 0}else if(this.m_utils.containsCSSClassName(e,this.getMappedStyle("rowheadercell"))){if(1===this.m_rowHeaderLevelCount)return 0}else if(this.m_utils.containsCSSClassName(e,this.getMappedStyle("colendheadercell"))){if(1===this.m_columnEndHeaderLevelCount)return 0}else if(this.m_utils.containsCSSClassName(e,this.getMappedStyle("rowendheadercell"))&&1===this.m_rowEndHeaderLevelCount)return 0;return t=this._getAttribute(e.parentNode,"level",!0),e===e.parentNode.firstChild?t:t+this.getHeaderCellDepth(e.parentNode.firstChild)},be.prototype.getHeaderCellDepth=function(e){return this._getAttribute(e,"depth",!0)},be.prototype.findCellOrHeader=function(e){var t=this.findCell(e);return null==t&&(t=this.findHeader(e)),t},be.prototype.findCell=function(e){return this.find(e,"cell")},be.prototype.findLabel=function(e){return this.find(e,"headerlabel")},be.prototype.find=function(e,t,i){return null==e||e==this.getRootElement()?null:(null==i&&(i=this.getMappedStyle(t)),null==i?null:this.m_utils.containsCSSClassName(e,i)?e:this.find(e.parentNode,t,i))},be.prototype._highlightActive=function(e){this._highlightActiveObject(this.m_active,this.m_prevActive,e)},be.prototype._unhighlightActive=function(e){this._unhighlightActiveObject(this.m_active,e)},be.prototype._highlightActiveObject=function(e,t,i){if(null==i&&this.m_utils.shouldOffsetOutline()&&(i=["offsetOutline"]),null!=e){var n=this._getElementFromActiveObject(e);null!=n&&(this.m_focusInHandler(n),null!=i&&this._highlightElement(n,i),this._setAriaProperties(e,t,n))}},be.prototype._unhighlightActiveObject=function(e,t){if(null==t&&this.m_utils.shouldOffsetOutline()&&(t=["offsetOutline"]),null!=e){var i=this._getElementFromActiveObject(e);null!=i&&(this.m_focusOutHandler(i),null!=t&&this._unhighlightElement(i,t),this._unsetAriaProperties(i))}},be.prototype._highlightCellsAlongAxis=function(e,t,i,n,o){var s,r;for(r="key"==i?this._getAxisCellsByKey(e,t):this._getAxisCellsByIndex(e,t),s=0;s<r.length;s++)"add"==n?this._highlightElement(r[s],o):this._unhighlightElement(r[s],o)},be.prototype._highlightElement=function(e,t){var i,n;for(n=0;n<t.length;n++)i=this.getMappedStyle(t[n]),this.m_utils.addCSSClassName(e,i)},be.prototype._unhighlightElement=function(e,t){var i,n;for(n=0;n<t.length;n++)i=this.getMappedStyle(t[n]),this.m_utils.removeCSSClassName(e,i)},be.prototype._setAriaProperties=function(e,t,i){var n;n=this.getLabelledBy(e,t,i),this._updateActiveContext(e,t),i.setAttribute("tabIndex",0),i.setAttribute("aria-labelledby",n),null!=this.m_cellToFocus&&this.m_cellToFocus==i||!1===this.m_shouldFocus||i.focus(),this.m_shouldFocus=null},be.prototype._unsetAriaProperties=function(e){null!=e&&(e.setAttribute("tabIndex",-1),e.removeAttribute("aria-labelledby"))},be.prototype.getLabelledBy=function(e,t,i){var n,o,s,r,a,l,u,h,d,c;if(n="","header"==e.type)null==t||"header"!=t.type||this.m_externalFocus||("row"===t.axis?o=this._getHeaderByIndex(t.index,t.level,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader):"column"===t.axis?o=this._getHeaderByIndex(t.index,t.level,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader):"rowEnd"===t.axis?o=this._getHeaderByIndex(t.index,t.level,this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader):"columnEnd"===t.axis&&(o=this._getHeaderByIndex(t.index,t.level,this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader))),n=[this.createSubId("context"),this._getHeaderAndParentIds(i,o)].join(" "),"ascending"===(s=i.getAttribute(this.getResources().getMappedAttribute("sortDir")))?(r="accessibleSortAscending",n=n+" "+this.createSubId("state")):"descending"===s&&(r="accessibleSortDescending",n=n+" "+this.createSubId("state")),!0===this.m_externalFocus&&(n=[this.createSubId("summary"),n].join(" "),this.m_externalFocus=!1),null!=r&&this._updateStateInfo([{key:r,args:{id:""}}]),i.setAttribute("tabIndex",0);else if("label"===e.type)n=[this.createSubId("context"),this._getActiveElement().id].join(" ");else{null!=t&&("header"===t.type?(a="row"===t.axis?t.index:null,l="column"===t.axis?t.index:null):"cell"===t.type&&(a=t.indexes.row,l=t.indexes.column)),u=this._getHeaderLabelledBy("row",this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader,this.m_endRowHeader,e.indexes.row,a,i),h=this._getHeaderLabelledBy("rowEnd",this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader,this.m_endRowEndHeader,e.indexes.row,a,i),d=this._getHeaderLabelledBy("column",this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader,this.m_endColHeader,e.indexes.column,l,i),c=this._getHeaderLabelledBy("columnEnd",this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader,this.m_endColEndHeader,e.indexes.column,l,i);var p=e.extents.row,_=e.extents.column,m=[];p>1&&m.push({key:"accessibleRowSpanContext",args:{extent:p}}),_>1&&m.push({key:"accessibleColumnSpanContext",args:{extent:_}}),this._updateStateInfo(m),n=(n=[this.createSubId("context"),u,h,d,c,i.id,this.createSubId("state")].join(" ")).replace(/ +(?= )/g,""),this.m_externalFocus&&(n=[this.createSubId("summary"),n].join(" "),this.m_externalFocus=!1)}return n},be.prototype.getHeaderFromCell=function(e,t,i){var n,o,s,r,a,l;return"row"===t?null!=this.m_rowHeader&&(n=this._getIndex(e,"row"),o=this._getExtent(e,"row"),s=this.m_rowHeaderLevelCount-1,r=this.m_rowHeader,a=this.m_rowHeaderLevelCount,l=this.m_startRowHeader):"column"===t?null!=this.m_colHeader&&(n=this._getIndex(e,"column"),o=this._getExtent(e,"column"),s=this.m_columnHeaderLevelCount-1,r=this.m_colHeader,a=this.m_columnHeaderLevelCount,l=this.m_startColHeader):"rowEnd"===t?null!=this.m_rowEndHeader&&(n=this._getIndex(e,"row"),o=this._getExtent(e,"row"),s=this.m_rowEndHeaderLevelCount-1,r=this.m_rowEndHeader,a=this.m_rowEndHeaderLevelCount,l=this.m_startRowEndHeader):"columnEnd"===t&&null!=this.m_colEndHeader&&(n=this._getIndex(e,"column"),o=this._getExtent(e,"column"),s=this.m_columnEndHeaderLevelCount-1,r=this.m_colEndHeader,a=this.m_columnEndHeaderLevelCount,l=this.m_startColEndHeader),null!=n&&null!=s&&n>-1?(i&&(n+=o-1),this._getHeaderByIndex(n,s,r,a,l)):null},be.prototype.createRange=function(e,t,i,n){var o,s,r,a,l,u,h,d;return t&&(e.row<t.row||-1==t.row?(o=e.row,s=t.row,i&&(l=i.row,u=n.row)):(o=t.row,s=e.row,i&&(l=n.row,u=i.row)),isNaN(e.column)||isNaN(t.column)?(e={row:o},t={row:s},i&&(i={row:l,column:h},n={row:u,column:d})):(e.column<t.column||-1==t.column?(r=e.column,a=t.column,i&&(h=i.column,d=n.column)):(r=t.column,a=e.column,i&&(h=n.column,d=i.column)),e={row:o,column:r},t={row:s,column:a},i&&(i={row:l,column:h},n={row:u,column:d}))),i?{startIndex:e,endIndex:t,startKey:i,endKey:n}:{startIndex:e,endIndex:t}},be.prototype._createRangeWithKeys=function(e,t,i){this._keys(e,this._createRangeStartKeyCallback.bind(this,t,i))},be.prototype._createRangeStartKeyCallback=function(e,t,i,n){e===n?this._createRangeEndKeyCallback(i,n,t,i,n):e?this._keys(e,this._createRangeEndKeyCallback.bind(this,i,n,t)):t.call(this,{startIndex:n,endIndex:n,startKey:i,endKey:i})},be.prototype._createRangeEndKeyCallback=function(e,t,i,n,o){i.call(this,this.createRange(t,o,e,n))},be.prototype.getEndIndex=function(e){return null==e.endIndex?e.startIndex:e.endIndex},be.prototype.getElementsInRange=function(e,t,i,n,o){var s,r,a,l,u,h,d,c,p,_;if(null==t&&(t=this.m_startRow),null==i&&(i=this.m_endRow+1),s=e.startIndex,r=this.getEndIndex(e),a=s.row,-1==(l=r.row)&&(l=Number.MAX_VALUE),i<a||l<t)return null;if(!isNaN(s.column)&&!isNaN(r.column)&&(u=s.column,-1==(h=r.column)&&(h=Number.MAX_VALUE),this.m_endCol+1<u||h<this.m_startCol))return null;if(d=[],null==this.m_databody.firstChild)return null;if(a=Math.max(0,a),l=Math.min(this.m_endRow,l),isNaN(u)||isNaN(h))for(u=Math.max(0,this.m_startCol),h=Math.max(u,this.m_endCol),c=a;c<=l;c+=1)for(p=u;p<=h;p+=1)null!=(_=this._getCellByIndex(this.createIndex(c,p)))&&-1===d.indexOf(_)&&d.push(_);else for(u=Math.max(0,u),h=Math.min(this.m_endCol,h),c=a;c<=l;c+=1)for(p=u;p<=h;p+=1)null!=(_=this._getCellByIndex(this.createIndex(c,p)))&&-1===d.indexOf(_)&&d.push(_);return d},be.prototype.readCurrentContent=function(){var e,t,i,n,o;if(null==this.m_active)return!1;if("header"==this.m_active.type)e={},"row"===this.m_active.axis?(this.m_rowHeaderLevelCount>1&&(e.level=this.m_active.level),e.rowHeader=this.m_active.index):(this.m_columnHeaderLevelCount>1&&(e.level=this.m_active.level),e.columnHeader=this.m_active.index),n=this._getActiveElement();else if("cell"==this.m_active.type){if(e=this.m_active.indexes,this._isSelectionEnabled()&&this.isMultipleSelection()&&null!=this.m_selectionFrontier&&(e=this.m_selectionFrontier),null==e)return!1;if(t=this.createRange(e),null==(i=this.getElementsInRange(t))||0==i.length)return!1;n=i[0]}else n=this._getActiveElement();return this.m_placeHolder.tabIndex=-1,o=n.getAttribute("aria-labelledby"),this.m_placeHolder.setAttribute("aria-labelledby",o+" "+n.id),this.m_placeHolder===document.activeElement?n.focus():this.m_placeHolder.focus(),!0},be.prototype._enterActionableMode=function(e){return this._enableAllFocusableElements(e),this._setFocusToFirstFocusableElement(e)&&(this.m_focusOutHandler(e),this.setActionableMode(!0)),!1},be.prototype._exitActionableMode=function(){var e;this.isActionableMode()&&(e=this._getActiveElement(),this.setActionableMode(!1),this._disableAllFocusableElements(e),this.m_focusInHandler(e))},be.prototype._reRenderCell=function(e,t,i,n){var o,s;if(o=this.m_options.getRenderer("cell"),(s=e[this.getResources().getMappedAttribute("context")]).mode=t,this.m_utils.empty(e),this.m_utils.containsCSSClassName(e,i)?this.m_utils.removeCSSClassName(e,i):this.m_utils.addCSSClassName(e,i),n){for(;n.hasChildNodes();)e.appendChild(n.firstChild);delete this.m_editableClone}else this._renderContent(o,s,e,s.data)},be.prototype._setEditableClone=function(e){if(delete this.m_editableClone,null!=e){var t=e.cloneNode(!1);this._createUniqueId(t),t[this.getResources().getMappedAttribute("context")]=e[this.getResources().getMappedAttribute("context")],t[this.getResources().getMappedAttribute("context")].parentElement=t,this.m_root.appendChild(t),this._reRenderCell(t,"edit",this.getMappedStyle("cellEdit"),null),this.m_root.removeChild(t),t[this.getResources().getMappedAttribute("context")].parentElement=e,this.m_editableClone=t}},be.prototype.isNavigationKey=function(e){return this.isArrowKey(e)||e==be.keyCodes.HOME_KEY||e==be.keyCodes.END_KEY||e==be.keyCodes.PAGEUP_KEY||e==be.keyCodes.PAGEDOWN_KEY},be.prototype.isArrowKey=function(e){return e==be.keyCodes.UP_KEY||e==be.keyCodes.DOWN_KEY||e==be.keyCodes.LEFT_KEY||e==be.keyCodes.RIGHT_KEY},be.prototype.createIndex=function(e,t){if(null==e&&null==t)return null;var i={};return null!=e&&(i.row=e),null!=t&&(i.column=t),i},be.prototype.checkCorners=function(e,t,i){return"column"==this.m_selectionFrontier.axis&&this.m_columnHeaderLevelCount!=this.m_selectionFrontier.level||"row"==this.m_selectionFrontier.axis&&this.m_rowHeaderLevelCount!=this.m_selectionFrontier.level||"rowEnd"==this.m_selectionFrontier.axis&&this.m_rowEndHeaderLevelCount!=this.m_selectionFrontier.level||"columnEnd"==this.m_selectionFrontier.axis&&this.m_columnEndHeaderLevelCount!=this.m_selectionFrontier.level||(-1!=e.indexOf("row")?t==i.startIndex.row&&this.m_selectionFrontier.end==i.endIndex.row||t==i.endIndex.row&&this.m_selectionFrontier.end==i.startIndex.row:-1!=e.indexOf("column")&&(t==i.startIndex.column&&this.m_selectionFrontier.end==i.endIndex.column||t==i.endIndex.column&&this.m_selectionFrontier.end==i.startIndex.column))},be.prototype.handleLabelFocusChange=function(e,t,i,n){var o,s,r,a,l,u,h;if(!this.isFetchComplete())return!0;switch(this.getResources().isRTLMode()&&(e==be.keyCodes.LEFT_KEY?e=be.keyCodes.RIGHT_KEY:e==be.keyCodes.RIGHT_KEY&&(e=be.keyCodes.LEFT_KEY)),o=this.m_active.axis,s=this.m_active.level,this._getActiveElement(),"column"==o?(l=this.m_colHeader,u=this.m_startColHeader,this.m_endColHeader,h=this.m_columnHeaderLevelCount):"row"==o&&(l=this.m_rowHeader,u=this.m_startRowHeader,this.m_endRowHeader,h=this.m_rowHeaderLevelCount),"columnEnd"==o&&(e==be.keyCodes.DOWN_KEY?e=be.keyCodes.UP_KEY:e==be.keyCodes.UP_KEY&&(e=be.keyCodes.DOWN_KEY),l=this.m_colEndHeader,u=this.m_startColEndHeader,this.m_endColEndHeader,h=this.m_columnEndHeaderLevelCount),"rowEnd"==o&&(e==be.keyCodes.LEFT_KEY?e=be.keyCodes.RIGHT_KEY:e==be.keyCodes.RIGHT_KEY&&(e=be.keyCodes.LEFT_KEY),l=this.m_rowEndHeader,u=this.m_startRowEndHeader,this.m_endRowEndHeader,h=this.m_rowEndHeaderLevelCount),e){case be.keyCodes.DOWN_KEY:"row"!==o&&"rowEnd"!==o||(r=this._getHeaderByIndex(u,s,l,h,u),this._setActive(r,{type:"header",index:u,level:s,axis:o},t)),"column"!==o&&"columnEnd"!==o||((r=this.m_headerLabels[o][s+1])?this._setActive(r,{type:"label",level:s+1,axis:o},t):"column"===o&&s===h-1&&this.m_headerLabels.row.length?(r=this.m_headerLabels.row[this.m_headerLabels.row.length-1],this._setActive(r,{type:"label",level:this.m_headerLabels.row.length-1,axis:"row"},t)):s===h-1&&(a="column"===o?this.m_startRowHeader:this.m_endRowHeader,(r=this._getHeaderByIndex(a,this.m_rowHeaderLevelCount-1,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader))&&this._setActive(r,{type:"header",index:a,level:s,axis:"row"},t)));break;case be.keyCodes.UP_KEY:"row"===o&&s===h-1&&this.m_headerLabels.column.length&&(r=this.m_headerLabels.column[this.m_headerLabels.column.length-1],this._setActive(r,{type:"label",level:this.m_headerLabels.column.length-1,axis:"column"},t)),"column"!==o&&"columnEnd"!==o||(r=this.m_headerLabels[o][s-1])&&this._setActive(r,{type:"label",level:s-1,axis:o},t);break;case be.keyCodes.RIGHT_KEY:"row"!==o&&"rowEnd"!==o||((r=this.m_headerLabels[o][s+1])?this._setActive(r,{type:"label",level:s+1,axis:o},t):s===h-1&&(a="row"===o?this.m_startColHeader:this.m_endColHeader,(r=this._getHeaderByIndex(a,this.m_columnHeaderLevelCount,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader))&&this._setActive(r,{type:"header",index:a,level:s,axis:"column"},t))),"column"!==o&&"columnEnd"!==o||(r=this._getHeaderByIndex(u,s,l,h,u),this._setActive(r,{type:"header",index:u,level:s,axis:o},t));break;case be.keyCodes.LEFT_KEY:"row"!==o&&"rowEnd"!==o||(r=this.m_headerLabels[o][s-1])&&this._setActive(r,{type:"label",level:s-1,axis:o},t)}return!0},be.prototype.handleHeaderFocusChange=function(e,t,i,n){var o,s,r,a,l,u,h,d,c,p,_,m,g,f;if(!this.isFetchComplete())return!0;if(this.getResources().isRTLMode()&&(e==be.keyCodes.LEFT_KEY?e=be.keyCodes.RIGHT_KEY:e==be.keyCodes.RIGHT_KEY&&(e=be.keyCodes.LEFT_KEY)),o=this.m_active.axis,s=this.m_active.index,r=this.m_active.level,c=null!=(a=this._getActiveElement())?this._getAttribute(a,"depth",!0):1,o||s||!this.m_active||(o=this.m_selectionFrontier.axis,s=this.m_active.indexes[o]),t.shiftKey&&!i&&this.m_selectionFrontier&&this.isMultipleSelection()&&(i=this.checkHeaderToDatabody(o,e)),!(i&&this.isArrowKey(e)&&this.isHeaderSelectionType(this.m_selectionFrontier)&&this.checkCorners(o,s,this.m_selection[this.m_selection.length-1]))||(o=this.m_selectionFrontier.axis,s=this.m_selectionFrontier.index,r=this.m_selectionFrontier.level,-1==s&&(s=this.m_active.indexes[o]),"cell"!=this.m_active.type||(e!==be.keyCodes.LEFT_KEY&&e!==be.keyCodes.RIGHT_KEY||-1==o.indexOf("row"))&&(e!==be.keyCodes.UP_KEY&&e!==be.keyCodes.DOWN_KEY||-1==o.indexOf("column")))){switch("column"==o?(p=this.m_colHeader,_=this.m_startColHeader,m=this.m_endColHeader,g=this.m_columnHeaderLevelCount,f=this.m_stopColumnHeaderFetch):"row"==o&&(p=this.m_rowHeader,_=this.m_startRowHeader,m=this.m_endRowHeader,g=this.m_rowHeaderLevelCount,f=this.m_stopRowHeaderFetch),"columnEnd"==o&&(e==be.keyCodes.DOWN_KEY?e=be.keyCodes.UP_KEY:e==be.keyCodes.UP_KEY&&(e=be.keyCodes.DOWN_KEY),p=this.m_colEndHeader,_=this.m_startColEndHeader,m=this.m_endColEndHeader,g=this.m_columnEndHeaderLevelCount,f=this.m_stopColumnEndHeaderFetch),"rowEnd"==o&&(e==be.keyCodes.LEFT_KEY?e=be.keyCodes.RIGHT_KEY:e==be.keyCodes.RIGHT_KEY&&(e=be.keyCodes.LEFT_KEY),p=this.m_rowEndHeader,_=this.m_startRowEndHeader,m=this.m_endRowEndHeader,g=this.m_rowEndHeaderLevelCount,f=this.m_stopRowEndHeaderFetch),i&&this.isArrowKey(e)&&this.isHeaderSelectionType(this.m_selectionFrontier)&&(c=null!=(a=this._getHeaderByIndex(s,r,p,g,_))?this._getAttribute(a,"depth",!0):1),e){case be.keyCodes.LEFT_KEY:if("column"===o||"columnEnd"===o)if(s>0){if(n&&this.m_headerLabels[o][r]){this._setActive(this.m_headerLabels[o][r],{type:"label",level:r,axis:o},t);break}if("column"===o&&n&&this.m_headerLabels.row[this.m_rowHeaderLevelCount-1]){this._setActive(this.m_headerLabels.row[this.m_rowHeaderLevelCount-1],{type:"label",level:this.m_rowHeaderLevelCount-1,axis:"row"},t);break}if(1===g)h=s-1,u=null!=a?a.previousSibling:null,d=r;else if(h=null!=(u=this._getHeaderByIndex(s-1,r,p,g,_))?this._getAttribute(u.parentNode,"start",!0):s-1,d=null!=u?this.getHeaderCellLevel(u):r,h<0)break;i?this.extendSelectionHeader(u,t,!0):(this._isSelectionEnabled()&&!this.m_discontiguousSelection&&(this._clearSelection(t),this.m_selectionFrontier={}),this._setActive(u,{type:"header",index:h,level:d,axis:o},t),this._highlightActive())}else this.m_headerLabels[o][r]?this._setActive(this.m_headerLabels[o][r],{type:"label",level:r,axis:o},t):"column"===o&&this.m_headerLabels.row[this.m_rowHeaderLevelCount-1]&&this._setActive(this.m_headerLabels.row[this.m_rowHeaderLevelCount-1],{type:"label",level:this.m_rowHeaderLevelCount-1,axis:"row"},t);else("row"===o||"rowEnd"===o)&&r>0&&(u=this._getHeaderByIndex(s,r-1,p,g,_),h=this._getAttribute(u.parentNode,"start",!0),d=this.getHeaderCellLevel(u),i?this.extendSelectionHeader(u,t,!0):(this._isSelectionEnabled()&&!this.m_discontiguousSelection&&(this._clearSelection(t),this.m_selectionFrontier={}),this._setActive(u,{type:"header",index:h,level:d,axis:o},t),this._highlightActive()));break;case be.keyCodes.RIGHT_KEY:"rowEnd"==o&&n&&-1!=this.m_endRowHeader?(u=this._getHeaderByIndex(s,this.m_rowHeaderLevelCount,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader),i?this.extendSelectionHeader(u,t,!0):(this._isSelectionEnabled()&&!this.m_discontiguousSelection&&(this._clearSelection(t),this.m_selectionFrontier={}),this._setActive(u,{type:"header",index:s,level:this.m_rowHeaderLevelCount,axis:o},t),this._highlightActive())):"row"==o&&n&&-1!=this.m_endRowEndHeader?(u=this._getHeaderByIndex(s,this.m_rowEndHeaderLevelCount,this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader),i?this.extendSelectionHeader(u,t,!0):(this._isSelectionEnabled()&&!this.m_discontiguousSelection&&(this._clearSelection(t),this.m_selectionFrontier={}),this._setActive(u,{type:"header",index:s,level:this.m_rowEndHeaderLevelCount,axis:o},t),this._highlightActive())):"row"===o||"rowEnd"===o?r+c>=g&&!i?(l="row"==o?this.createIndex(s,0):this._isHighWatermarkScrolling()?this.createIndex(s,this.m_endCol):this.createIndex(s,this.getDataSource().getCount("column")-1),this.m_trueIndex={row:s},this._isSelectionEnabled()?this.selectAndFocus(l,t):(this._setActiveByIndex(l,t),this._highlightActive())):(u=this._getHeaderByIndex(s,r+c,p,g,_),h=this._getAttribute(u.parentNode,"start",!0),d=this.getHeaderCellLevel(u),i?this.extendSelectionHeader(u,t,!0):(this._isSelectionEnabled()&&!this.m_discontiguousSelection&&(this._clearSelection(t),this.m_selectionFrontier={}),this._setActive(u,{type:"header",index:h,level:d,axis:o},t),this._highlightActive())):"column"===o&&n&&this.m_headerLabels.rowEnd[this.m_rowEndHeaderLevelCount-1]?this._setActive(this.m_headerLabels.rowEnd[this.m_rowEndHeaderLevelCount-1],{type:"label",level:this.m_rowEndHeaderLevelCount-1,axis:"rowEnd"},t):(1===g?(h=s+1,u=null!=a?a.nextSibling:null,d=r):(r===g-1?(h=s+1,u=this._getHeaderByIndex(h,r,p,g,_)):(h=null!=a?this._getAttribute(a.parentNode,"start",!0)+this._getAttribute(a.parentNode,"extent",!0):s+1,u=this._getHeaderByIndex(h,r,p,g,_)),d=null!=u?this.getHeaderCellLevel(u):r),h>m&&f||!(this._isCountUnknown("column")||h<this.getDataSource().getCount("column"))?"column"===o&&this.m_headerLabels.rowEnd[this.m_rowEndHeaderLevelCount-1]&&this._setActive(this.m_headerLabels.rowEnd[this.m_rowEndHeaderLevelCount-1],{type:"label",level:this.m_rowEndHeaderLevelCount-1,axis:"rowEnd"},t):i?this.extendSelectionHeader(u,t,!0):(this._isSelectionEnabled()&&!this.m_discontiguousSelection&&(this._clearSelection(t),this.m_selectionFrontier={}),this._setActive(u,{type:"header",index:h,level:d,axis:o},t),this._highlightActive()));break;case be.keyCodes.UP_KEY:if("row"===o||"rowEnd"===o){if(n&&this.m_headerLabels[o][r]){this._setActive(this.m_headerLabels[o][r],{type:"label",level:r,axis:o},t);break}if("row"===o&&n&&this.m_headerLabels.column[this.m_columnHeaderLevelCount-1]){this._setActive(this.m_headerLabels.column[this.m_columnHeaderLevelCount-1],{type:"label",level:this.m_columnHeaderLevelCount-1,axis:"column"},t);break}if(s>0){if(1===g)h=s-1,u=null!=a?a.previousSibling:null,d=r;else if(r===g-1?(h=s-1,u=this._getHeaderByIndex(h,r,p,g,_)):h=null!=(u=this._getHeaderByIndex(this._getAttribute(a.parentNode,"start",!0)-1,r,p,g,_))?this._getAttribute(u.parentNode,"start",!0):s-1,d=null!=u?this.getHeaderCellLevel(u):r,h<0)break;i?this.extendSelectionHeader(u,t,!0):(this._isSelectionEnabled()&&!this.m_discontiguousSelection&&(this.m_selectionFrontier={},this._clearSelection(t)),this._setActive(u,{type:"header",index:h,level:d,axis:o},t),this._highlightActive())}else this.m_headerLabels[o][r]?this._setActive(this.m_headerLabels[o][r],{type:"label",level:r,axis:o},t):"row"===o&&this.m_headerLabels.column[this.m_columnHeaderLevelCount-1]&&this._setActive(this.m_headerLabels.column[this.m_columnHeaderLevelCount-1],{type:"label",level:this.m_columnHeaderLevelCount-1,axis:"column"},t)}else("column"===o||"columnEnd"===o)&&r>0&&(u=this._getHeaderByIndex(s,r-1,p,g,_),h=this._getAttribute(u.parentNode,"start",!0),d=this.getHeaderCellLevel(u),i?this.extendSelectionHeader(u,t,!0):(this._isSelectionEnabled()&&!this.m_discontiguousSelection&&(this.m_selectionFrontier={},this._clearSelection(t)),this._setActive(u,{type:"header",index:h,level:d,axis:o},t),this._highlightActive()));break;case be.keyCodes.DOWN_KEY:"columnEnd"==o&&n&&-1!=this.m_endColHeader?(u=this._getHeaderByIndex(s,this.m_columnHeaderLevelCount,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader),i?this.extendSelectionHeader(u,t,!0):(this._isSelectionEnabled()&&!this.m_discontiguousSelection&&(this.m_selectionFrontier={},this._clearSelection(t)),this._setActive(u,{type:"header",index:s,level:this.m_columnHeaderLevelCount,axis:o},t),this._highlightActive())):"column"==o&&n&&-1!=this.m_endColEndHeader?(u=this._getHeaderByIndex(s,this.m_columnEndHeaderLevelCount,this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader),i?this.extendSelectionHeader(u,t,!0):(this._isSelectionEnabled()&&!this.m_discontiguousSelection&&(this._clearSelection(t),this.m_selectionFrontier={}),this._setActive(u,{type:"header",index:s,level:this.m_columnEndHeaderLevelCount,axis:o},t),this._highlightActive())):"column"===o||"columnEnd"===o?r+c>=g&&!i?(l="column"==o?this.createIndex(0,s):this._isHighWatermarkScrolling()?this.createIndex(this.m_endRow,s):this.createIndex(this.getDataSource().getCount("row")-1,s),this.m_trueIndex={column:s},this._isSelectionEnabled()?this.selectAndFocus(l,t):(this._setActiveByIndex(l,t),this._highlightActive())):(u=this._getHeaderByIndex(s,r+c,p,g,_),h=this._getAttribute(u.parentNode,"start",!0),d=this.getHeaderCellLevel(u),i?this.extendSelectionHeader(u,t,!0):(this._isSelectionEnabled()&&!this.m_discontiguousSelection&&(this._clearSelection(t),this.m_selectionFrontier={}),this._setActive(u,{type:"header",index:h,level:d,axis:o},t),this._highlightActive())):"row"===o&&n&&this.m_headerLabels.columnEnd[this.m_columnEndHeaderLevelCount-1]?this._setActive(this.m_headerLabels.columnEnd[this.m_columnEndHeaderLevelCount-1],{type:"label",level:this.m_columnEndHeaderLevelCount-1,axis:"columnEnd"},t):(1===g?(h=s+1,u=null!=a?a.nextSibling:null,d=r):(r===g-1?(h=s+1,u=this._getHeaderByIndex(h,r,p,g,_)):(h=null!=a?this._getAttribute(a.parentNode,"start",!0)+this._getAttribute(a.parentNode,"extent",!0):s+1,u=this._getHeaderByIndex(h,r,p,g,_)),d=null!=u?this.getHeaderCellLevel(u):r),h>m&&f||!(this._isCountUnknown("row")||h<this.getDataSource().getCount("row"))?"row"===o&&this.m_headerLabels.columnEnd[this.m_columnEndHeaderLevelCount-1]&&this._setActive(this.m_headerLabels.columnEnd[this.m_rowEndHeaderLevelCount-1],{type:"label",level:this.m_columnEndHeaderLevelCount-1,axis:"columnEnd"},t):i?this.extendSelectionHeader(u,t,!0):(this._isSelectionEnabled()&&!this.m_discontiguousSelection&&(this._clearSelection(t),this.m_selectionFrontier={}),this._setActive(u,{type:"header",index:h,level:d,axis:o},t),this._highlightActive()));break;case be.keyCodes.PAGEUP_KEY:"row"!==o&&"rowEnd"!==o||(a=this._getHeaderByIndex(0,r,p,g,_),this._setActive(a,{type:"header",index:0,level:r,axis:o},t));break;case be.keyCodes.PAGEDOWN_KEY:"row"!==o&&"rowEnd"!==o||(s=this._isCountUnknown("row")||this._isHighWatermarkScrolling()?Math.max(0,m):Math.max(0,this.getDataSource().getCount("row")-1),a=this._getHeaderByIndex(s,r,p,g,_),this._setActive(a,{type:"header",index:s,level:r,axis:o},t));break;case be.keyCodes.HOME_KEY:"column"!==o&&"columnEnd"!==o||(a=this._getHeaderByIndex(0,r,p,g,_),this._setActive(a,{type:"header",index:0,level:r,axis:o},t));break;case be.keyCodes.END_KEY:"column"!==o&&"columnEnd"!==o||(s=this._isCountUnknown("column")||this._isHighWatermarkScrolling()?Math.max(0,m):Math.max(0,this.getDataSource().getCount("column")-1),a=this._getHeaderByIndex(s,r,p,g,_),this._setActive(a,{type:"header",index:s,level:r,axis:o},t))}return!0}},be.prototype.checkHeaderToDatabody=function(e,t){return!("row"===e&&this.m_rowHeaderLevelCount===this.m_selectionFrontier.level&&t==be.keyCodes.RIGHT_KEY||"rowEnd"===e&&this.m_rowEndHeaderLevelCount===this.m_selectionFrontier.level&&t==be.keyCodes.LEFT_KEY||"column"===e&&this.m_columnHeaderLevelCount===this.m_selectionFrontier.level&&t==be.keyCodes.DOWN_KEY||"columnEnd"===e&&this.m_columnEndHeaderLevelCount===this.m_selectionFrontier.level&&t==be.keyCodes.UP_KEY)},be.prototype._getHeaderLabelledBy=function(e,t,i,n,o,s,r,a){var l,u;return-1==o||s==r&&!this.m_externalFocus?"":(l=this.getHeaderFromCell(a,e),null!=r&&(u=this._getHeaderByIndex(r,i-1,t,i,n)),this._getHeaderAndParentIds(l,u))},be.prototype._getHeaderAndParentIds=function(e,t){var i,n,o="",s=[];if(null==e)return"";for(n=this._getHeaderAndParents(e),null!=t&&(s=this._getHeaderAndParents(t)),i=0;i<n.length;i++)s[i]==n[i]&&i!==n.length-1||(o+=(""==o?"":" ")+n[i].id);return o},be.prototype._getHeaderAndParents=function(e){var t,i,n,o,s=[e];if(t=this.getHeaderCellAxis(e),i=this.getHeaderCellLevel(e),o=this._getLabel(t,i),"row"===t?n=this.m_rowHeaderLevelCount:"column"===t?n=this.m_columnHeaderLevelCount:"rowEnd"===t?n=this.m_rowEndHeaderLevelCount:"columnEnd"===t&&(n=this.m_columnEndHeaderLevelCount),o&&s.unshift(o),1===n)return s;for(i===n-1&&(e=e.parentNode.firstChild,s.unshift(e),i-=1,(o=this._getLabel(t,i))&&s.unshift(o));i>0;)e=e.parentNode.parentNode.firstChild,s.unshift(e),i-=1,(o=this._getLabel(t,i))&&s.unshift(o);return s},be.prototype.isHeaderSelectionType=function(e){return!(!e||!e.axis)},be.prototype.handleFocusChange=function(e,t,i,n,o){var s,r,a,l,u,h,d,c,p=1,_=1;if(!this.isFetchComplete())return!0;if(t){if(s=this.m_selectionFrontier,this.isHeaderSelectionType(this.m_selectionFrontier))return void this.handleHeaderFocusChange(e,i,t,o)}else s=this.m_active.indexes;if(null!=s){switch(null==this.m_trueIndex&&(this.m_trueIndex={}),this.getResources().isRTLMode()&&(e==be.keyCodes.LEFT_KEY?e=be.keyCodes.RIGHT_KEY:e==be.keyCodes.RIGHT_KEY&&(e=be.keyCodes.LEFT_KEY)),u=this._isSelectionEnabled()?this.selectAndFocus.bind(this):this._setActiveByIndex.bind(this),r=s.row,a=s.column,(d=this._getCellByIndex(s))&&(p=(c=d[this.getResources().getMappedAttribute("context")]).extents.row,_=c.extents.column),e){case be.keyCodes.LEFT_KEY:this.m_trueIndex.row||t||(this.m_trueIndex={row:r}),a>0&&(!o||-1==this.m_endRowHeader)?"row"==this.m_options.getSelectionMode()?(l=this.createIndex(this.m_trueIndex.row,a-1),this._setActiveByIndex(l,i)):(t?(l=this.createIndex(r,a-1),this.extendSelection(l,i,e)):u(l=this.createIndex(this.m_trueIndex.row,a-1),i),a-1==0&&this._setAccInfoText("accessibleFirstColumn")):!t&&n&&(h=this._getHeaderByIndex(this.m_trueIndex.row,this.m_rowHeaderLevelCount-1,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader),this.m_discontiguousSelection?this.discontiguousHeaderSetActiveFromDatabody(i,"row",h,this.m_rowHeaderLevelCount):this._setActive(h,{type:"header",index:this.m_trueIndex.row,level:this.m_rowHeaderLevelCount-1,axis:"row"},i,!0));break;case be.keyCodes.RIGHT_KEY:this.m_trueIndex.row||t||(this.m_trueIndex={row:r}),this._isLastColumn(a+_-1)||o&&-1!=this.m_endRowEndHeader?-1!=this.m_endRowEndHeader&&n?(h=this._getHeaderByIndex(this.m_trueIndex.row,this.m_rowEndHeaderLevelCount-1,this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader),this.m_discontiguousSelection?this.discontiguousHeaderSetActiveFromDatabody(i,"rowEnd",h,this.m_rowEndHeaderLevelCount):this._setActive(h,{type:"header",index:this.m_trueIndex.row,level:this.m_rowEndHeaderLevelCount-1,axis:"rowEnd"},i,!0)):t||u(s,i):"row"==this.m_options.getSelectionMode()?(l=this.createIndex(this.m_trueIndex.row,a+_),this._setActiveByIndex(l,i)):(t?(l=this.createIndex(r,a+1),this.extendSelection(l,i,e)):u(l=this.createIndex(this.m_trueIndex.row,a+_),i),this._isLastColumn(a+_)&&this._setAccInfoText("accessibleLastColumn"));break;case be.keyCodes.UP_KEY:this.m_trueIndex.column||t||(this.m_trueIndex={column:a}),r>0&&(!o||-1==this.m_endColHeader)?(t?(l=this.createIndex(r-1,a),this.extendSelection(l,i,e)):u(l=this.createIndex(r-1,this.m_trueIndex.column),i),r-1==0&&this._setAccInfoText("accessibleFirstRow")):!t&&n&&(h=this._getHeaderByIndex(this.m_trueIndex.column,this.m_columnHeaderLevelCount-1,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader),this.m_discontiguousSelection?this.discontiguousHeaderSetActiveFromDatabody(i,"column",h,this.m_columnHeaderLevelCount):this._setActive(h,{type:"header",index:this.m_trueIndex.column,level:this.m_columnHeaderLevelCount-1,axis:"column"},i,!0));break;case be.keyCodes.DOWN_KEY:this.m_trueIndex.column||t||(this.m_trueIndex={column:a}),this._isLastRow(r+p-1)||o&&-1!=this.m_endColEndHeader?-1!=this.m_endColEndHeader&&n?(h=this._getHeaderByIndex(this.m_trueIndex.column,this.m_columnEndHeaderLevelCount-1,this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader),this.m_discontiguousSelection?this.discontiguousHeaderSetActiveFromDatabody(i,"columnEnd",h,this.m_columnEndHeaderLevelCount):this._setActive(h,{type:"header",index:this.m_trueIndex.column,level:this.m_columnEndHeaderLevelCount-1,axis:"columnEnd"},i,!0)):t||u(s,i):(t?(l=this.createIndex(r+1,a),this.extendSelection(l,i,e)):u(l=this.createIndex(r+p,this.m_trueIndex.column),i),this._isLastRow(r+p)&&this._setAccInfoText("accessibleLastRow"));break;case be.keyCodes.HOME_KEY:this.m_trueIndex.row||(this.m_trueIndex={row:r}),u(l=this.createIndex(this.m_trueIndex.row,0),i);break;case be.keyCodes.END_KEY:this.m_trueIndex.row||(this.m_trueIndex={row:r}),u(l=this._isCountUnknown("column")||this._isHighWatermarkScrolling()?this.createIndex(this.m_trueIndex.row,Math.max(0,this.m_endCol)):this.createIndex(this.m_trueIndex.row,Math.max(0,this.getDataSource().getCount("column")-1)),i);break;case be.keyCodes.PAGEUP_KEY:this.m_trueIndex.column||(this.m_trueIndex={column:a}),u(l=this.createIndex(0,a),i);break;case be.keyCodes.PAGEDOWN_KEY:this.m_trueIndex.column||(this.m_trueIndex={column:a}),u(l=this._isCountUnknown("column")||this._isHighWatermarkScrolling()?this.createIndex(Math.max(0,this.m_endRow),this.m_trueIndex.column):this.createIndex(Math.max(0,this.getDataSource().getCount("row")-1),this.m_trueIndex.column),i)}return!0}},be.prototype.scrollToIndex=function(e,t,i){var n,o,s,r,a,l,u,h,d,c,p,_,m,g,f,v,C;n=e.row,o=e.column,t&&(this.m_shouldFocus=!1),i&&(e.scrollToOrigin=!0),h=this.getResources().isRTLMode()?"right":"left",s=0,r=0,l=this._getViewportTop(),u=this._getViewportBottom(),f=this._getViewportLeft(),v=this._getViewportRight(),n<this.m_startRow||n>this.m_endRow?(a=n<this.m_startRow?this.m_avgRowHeight*n:this.m_avgRowHeight*(n+1)-u+l,r=this.m_currentScrollTop-a,this.m_scrollIndexAfterFetch=e,C=!0):(_=this._getCellByIndex({row:n,column:this.m_startCol}),d=this.getElementDir(_,"top"),c=this.getElementHeight(_),i||e.scrollToOrigin?r=l-d:d+c>u?r=u-(d+c):d<l&&(r=l-d)),isNaN(o)||1==C||(o<this.m_startCol||o>this.m_endCol?(p=o<this.m_startCol?this.m_avgColWidth*o:this.m_avgColWidth*(o+1)-v+f,s=this.m_currentScrollLeft-p,this.m_scrollIndexAfterFetch=e):(_=this._getCellByIndex({row:this.m_startRow,column:o}),m=this.getElementDir(_,h),g=this.getElementWidth(_),i||e.scrollToOrigin?s=f-m:m<f?s=f-m:m+g>v&&(s=v-(m+g)))),0!=s||0!=r?(null!=(_=this._getCellByIndex(e))&&!0!==t&&!1!==this.m_shouldFocus&&(this.m_cellToFocus=_),this.scrollDelta(s,r)):null!=this.m_scrollIndexAfterFetch&&(t||!1===this.m_shouldFocus?this.m_scrollIndexAfterFetch=null:this._setActiveByIndex(this.m_scrollIndexAfterFetch,null,!1,!1,!0)&&(this.m_scrollIndexAfterFetch=null))},be.prototype.scrollToHeader=function(e){var t,i,n,o,s,r,a,l,u,h,d,c,p,_;c=e.axis,p=e.index,_=e.level,t=0,"row"===c?(i=this.m_startRowHeader,n=this.m_endRowHeader,o=this.m_avgRowHeight,s=this.m_currentScrollTop,u=this._getViewportTop(),h=this._getViewportBottom()):"column"===c?(i=this.m_startColHeader,n=this.m_endColHeader,o=this.m_avgColWidth,s=this.m_currentScrollLeft,u=this._getViewportLeft(),h=this._getViewportRight()):"rowEnd"===c?(i=this.m_startRowEndHeader,n=this.m_endRowEndHeader,o=this.m_avgRowHeight,s=this.m_currentScrollTop,u=this._getViewportTop(),h=this._getViewportBottom()):"columnEnd"===c&&(i=this.m_startColEndHeader,n=this.m_endColEndHeader,o=this.m_avgColWidth,s=this.m_currentScrollLeft,u=this._getViewportLeft(),h=this._getViewportRight()),d=h-u,p<i||p>n?(t=s-(p<i?o*p:o*(p+1)-d),this.m_scrollHeaderAfterFetch=e):("row"===c||"rowEnd"===c?(l="row"===c?this._getHeaderByIndex(p,_,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader):this._getHeaderByIndex(p,_,this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader),r=this.getElementDir(l,"top"),a=this.getElementHeight(l)):"column"!==c&&"columnEnd"!==c||(l="column"===c?this._getHeaderByIndex(p,_,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader):this._getHeaderByIndex(p,_,this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader),r=this.getElementDir(l,this.getResources().isRTLMode()?"right":"left"),a=this.getElementWidth(l)),d>a?r+a>h?t=h-(r+a):r<u&&(t=u-r):t=u-r),0!=t?(null!=l&&!1!==this.m_shouldFocus&&(this.m_cellToFocus=l),"row"===c||"rowEnd"===c?this.scrollDelta(0,t):this.scrollDelta(t,0)):null!=this.m_scrollHeaderAfterFetch&&(this._updateActive(e,!0,!0),this.m_scrollHeaderAfterFetch=null)},be.prototype.findHeader=function(e,t,i){if(null==t&&(t=this.getMappedStyle("headercell")),null==i&&(i=this.getMappedStyle("endheadercell")),null!=t){if(this.m_utils.containsCSSClassName(e,t)||this.m_utils.containsCSSClassName(e,i))return e;if(e.parentNode)return this.findHeader(e.parentNode,t,i);if(e===this.m_root)return null}return null},be.prototype.updateRowBanding=function(){var e,t,i,n,o,s;if((e=this.m_options.getRowBandingInterval())>0)for(t=this.m_databody.firstChild.childNodes,o=this.getMappedStyle("banded"),i=0;i<t.length;i++)s=t[i],n=this._getIndex(s,"row"),Math.floor(n/e)%2==1?this.m_utils.containsCSSClassName(s,o)||this.m_utils.addCSSClassName(s,o):this.m_utils.containsCSSClassName(s,o)&&this.m_utils.removeCSSClassName(s,o)},be.prototype.updateColumnBanding=function(){var e,t,i,n,o,s;if((e=this.m_options.getColumnBandingInterval())>0)for(t=this.m_databody.firstChild.childNodes,o=this.getMappedStyle("banded"),i=0;i<t.length;i+=1)s=t[i],n=this._getIndex(s,"column"),Math.floor(n/e)%2==1?this.m_utils.containsCSSClassName(s,o)||this.m_utils.addCSSClassName(s,o):this.m_utils.containsCSSClassName(s,o)&&this.m_utils.removeCSSClassName(s,o)},be.prototype._removeBanding=function(){var e,t,i;for(e=this.m_databody.firstChild.childNodes,i=this.getMappedStyle("banded"),t=0;t<e.length;t++)this.m_utils.containsCSSClassName(e[t],i)&&this.m_utils.removeCSSClassName(e[t],i)},be.prototype._setAccInfoText=function(e,t){var i=this.getResources().getTranslatedText(e,t);null!=i&&(this.m_accInfo.textContent=i)},be.prototype.handleExpandEvent=function(e,t){void 0===t&&this.queueModelEvent(e)?e.operation="expand":(this._setAccInfoText("accessibleRowExpanded"),this.populateAccInfo(),t&&this._runModelEventQueue())},be.prototype.handleCollapseEvent=function(e,t){void 0===t&&this.queueModelEvent(e)?e.operation="collapse":(this._setAccInfoText("accessibleRowCollapsed"),this.populateAccInfo(),t&&this._runModelEventQueue())},be.prototype._getKey=function(e,t){return null!=e&&e[this.getResources().getMappedAttribute("context")]?null!=t&&this.m_utils.containsCSSClassName(e,this.getMappedStyle("cell"))?e[this.getResources().getMappedAttribute("context")].keys[t]:e[this.getResources().getMappedAttribute("context")].key:null},be.prototype._getActiveKey=function(e,t){if(t&&null!=this.m_prevActive){if("header"==this.m_prevActive.type&&(this.m_prevActive.axis===e||this.m_prevActive.axis===e+"End"))return this.m_prevActive.key;if("cell"==this.m_prevActive.type)return this.m_prevActive.keys[e]}else if(null!=this.m_active){if("header"==this.m_active.type&&(this.m_active.axis===e||this.m_active.axis===e+"End"))return this.m_active.key;if("cell"==this.m_active.type)return this.m_active.keys[e]}return null},be.prototype._getActiveIndex=function(e,t){if(t&&null!=this.m_prevActive){if("header"==this.m_prevActive.type&&(this.m_prevActive.axis===e||this.m_prevActive.axis===e+"End"))return this.m_prevActive.index;if("cell"==this.m_prevActive.type)return this.m_prevActive.indexes[e]}else if(null!=this.m_active){if("header"==this.m_active.type&&(this.m_active.axis===e||this.m_active.axis===e+"End"))return this.m_active.index;if("cell"==this.m_active.type)return this.m_active.indexes[e]}return null},be.prototype._handleCut=function(e,t){var i,n,o;if(null==t&&(t=e.target),n=this.findCellOrHeader(t),this._isMoveOnElementEnabled(n)){if(null!=this.m_cutCells)for(o=0;o<this.m_cutCells.length;o++)this.m_utils.removeCSSClassName(this.m_cutCells[o],this.getMappedStyle("cut"));return i=this._getKey(n,"row"),this.m_cutCells=this._getAxisCellsByKey(i,"row"),this.m_cutRowHeader=this._findHeaderByKey(i,this.m_rowHeader,this.getMappedStyle("rowheadercell")),this.m_cutRowEndHeader=this._findHeaderByKey(i,this.m_rowEndHeader,this.getMappedStyle("rowendheadercell")),this._highlightCellsAlongAxis(i,"row","key","add",["cut"]),null!==this.m_cutRowHeader&&this.m_utils.addCSSClassName(this.m_cutRowHeader,this.getMappedStyle("cut")),null!==this.m_cutRowEndHeader&&this.m_utils.addCSSClassName(this.m_cutRowEndHeader,this.getMappedStyle("cut")),!0}return!1},be.prototype._handlePaste=function(e,t){var i,n,o;if(null==t&&(t=e.target),null!=this.m_cutCells){for(o=0;o<this.m_cutCells.length;o++)this.m_utils.removeCSSClassName(this.m_cutCells[o],this.getMappedStyle("cut"));return null!==this.m_cutRowHeader&&(this.m_utils.removeCSSClassName(this.m_cutRowHeader,this.getMappedStyle("cut")),this.m_cutRowHeader=null),null!==this.m_cutRowEndHeader&&(this.m_utils.removeCSSClassName(this.m_cutRowEndHeader,this.getMappedStyle("cut")),this.m_cutRowEndHeader=null),i=this._getKey(this.findCellOrHeader(t),"row"),(n=this._getKey(this.m_cutCells[0],"row"))!==i&&(this._isSelectionEnabled()&&this._clearSelection(e),this._isDatabodyCellActive()&&this._unhighlightActive(),this.m_moveActive=!0,this.getDataSource().move(n,i)),this.m_cutCells=null,!0}return!1},be.prototype._handleCancelReorder=function(e,t){var i;if(null!=this.m_cutCells){for(i=0;i<this.m_cutCells.length;i++)this.m_utils.removeCSSClassName(this.m_cutCells[i],this.getMappedStyle("cut"));return this.m_cutCells=null,null!==this.m_cutRowHeader&&(this.m_utils.removeCSSClassName(this.m_cutRowHeader,this.getMappedStyle("cut")),this.m_cutRowHeader=null),null!==this.m_cutRowEndHeader&&(this.m_utils.removeCSSClassName(this.m_cutRowEndHeader,this.getMappedStyle("cut")),this.m_cutRowEndHeader=null),!0}},be.prototype._handleMove=function(e){var t,i,n,o,s;null==this.m_moveCells&&(s=e.target,n=this.findCellOrHeader(s),o=this._getKey(n,"row"),this.m_originalMoveIndex=this._getIndex(n,"row"),this.m_moveIndex=this.m_originalMoveIndex,this.m_moveCells=this._getAxisCellsByIndex(this.m_moveIndex,"row"),this.m_moveRowHeader=this._findHeaderByKey(o,this.m_rowHeader,this.getMappedStyle("rowheadercell")),this.m_moveRowEndHeader=this._findHeaderByKey(o,this.m_rowEndHeader,this.getMappedStyle("rowendheadercell")),this._highlightCellsAlongAxis(this.m_moveIndex,"row","index","add",["drag"]),this.m_originalTop=this.getElementDir(this.m_moveCells[0],"top"),this.m_dropTarget=document.createElement("div"),this.m_utils.addCSSClassName(this.m_dropTarget,this.getMappedStyle("drop")),this.setElementHeight(this.m_dropTarget,this.calculateRowHeight(this.m_moveCells[0])),this.setElementDir(this.m_dropTarget,this.m_originalTop,"top"),this.m_databody.firstChild.appendChild(this.m_dropTarget),this._addHeaderDropTarget(this.m_moveRowHeader,this.m_rowHeader,!1),this._addHeaderDropTarget(this.m_moveRowEndHeader,this.m_rowEndHeader,!0)),this.m_utils.isTouchDevice()||(this.m_prevY=this.m_currentY,this.m_currentY=e.pageY),t=this.m_currentY-this.m_prevY,i=this.calculateRowHeight(this.m_moveCells[0]);for(var r=0;r<this.m_moveCells.length;r++)this.setElementDir(this.m_moveCells[r],this.getElementDir(this.m_moveCells[r],"top")+t,"top");null!==this.m_moveRowHeader&&this.setElementDir(this.m_moveRowHeader,this.getElementDir(this.m_moveRowHeader,"top")+t,"top"),null!==this.m_moveRowEndHeader&&this.setElementDir(this.m_moveRowEndHeader,this.getElementDir(this.m_moveRowEndHeader,"top")+t,"top");var a=this.m_moveIndex+1,l=this.m_moveIndex-1,u=this._getCellByIndex(this.createIndex(a,this.m_startCol)),h=this._getCellByIndex(this.createIndex(l,this.m_startCol));null!=u&&this.getElementDir(u,"top")<this.getElementDir(this.m_moveCells[0],"top")+i/2?this._moveDropRows("nextSibling",a):null!=h&&this.getElementDir(h,"top")>this.getElementDir(this.m_moveCells[0],"top")-i/2&&this._moveDropRows("previousSibling",l)},be.prototype._addHeaderDropTarget=function(e,t,i){var n;null!==e&&(null==e.style.height&&this.setElementHeight(e,this.calculateRowHeight(e)),this.m_utils.addCSSClassName(e,this.getMappedStyle("drag")),n=document.createElement("div"),this.m_utils.addCSSClassName(n,this.getMappedStyle("drop")),this.setElementHeight(n,this.calculateRowHeight(e)),this.setElementDir(n,this.m_originalTop,"top"),t.firstChild.appendChild(n),i?this.m_dropTargetEndHeader=n:this.m_dropTargetHeader=n)},be.prototype._moveDropRows=function(e,t){var i,n,o,s,r;"nextSibling"==e?(r=this._getAxisCellsByIndex(t,"row"),i=this.m_originalTop+this.calculateRowHeight(r[0]),n=this.m_originalTop):(r=this._getAxisCellsByIndex(t,"row"),n=(i=this.getElementDir(r[0],"top"))+this.calculateRowHeight(r[0])),this.setElementDir(this.m_dropTarget,i,"top");for(var a=0;a<r.length;a++)this.setElementDir(r[a],n,"top");null!==this.m_moveRowHeader&&(o=this.m_moveRowHeader.parentNode,this.setElementDir(this.m_dropTargetHeader,i,"top"),this.setElementDir(this.m_moveRowHeader[e],n,"top")),null!==this.m_moveRowEndHeader&&(s=this.m_moveRowEndHeader.parentNode,this.setElementDir(this.m_dropTargetEndHeader,i,"top"),this.setElementDir(this.m_moveRowEndHeader[e],n,"top")),this.m_originalTop=i,this._highlightCellsAlongAxis(this.m_moveIndex+1,"row","index","remove",["activedrop"]),"nextSibling"===e?(this._modifyAxisCellContextIndex("row",this.m_moveIndex,1,1),this._modifyAxisCellContextIndex("row",this.m_moveIndex+1,1,-1),this.m_moveIndex+=1,null!==this.m_moveRowHeader&&o.insertBefore(this.m_moveRowHeader,this.m_moveRowHeader[e][e]),null!==this.m_moveRowEndHeader&&s.insertBefore(this.m_moveRowEndHeader,this.m_moveRowEndHeader[e][e])):(this._modifyAxisCellContextIndex("row",this.m_moveIndex,1,-1),this._modifyAxisCellContextIndex("row",this.m_moveIndex-1,1,1),this.m_moveIndex-=1,null!==this.m_moveRowHeader&&o.insertBefore(this.m_moveRowHeader,this.m_moveRowHeader[e]),null!==this.m_moveRowEndHeader&&s.insertBefore(this.m_moveRowEndHeader,this.m_moveRowEndHeader[e])),this._refreshDatabodyMap(),this._highlightCellsAlongAxis(this.m_moveIndex+1,"row","index","add",["activedrop"])},be.prototype._isMoveEnabled=function(e){var t;return t=this.getDataSource().getCapability("move"),"enable"===this.m_options.isMoveable("row")&&("full"===t||t===e)},be.prototype._handleMoveMouseUp=function(e,t){if(null!=this.m_moveCells){this._remove(this.m_dropTarget),null!==this.m_moveRowHeader&&this._remove(this.m_dropTargetHeader),null!==this.m_moveRowEndHeader&&this._remove(this.m_dropTargetEndHeader),null!=this.m_active&&"column"!=this.m_active.axis&&(this.m_moveActive=!0),this._isSelectionEnabled()&&this._clearSelection(e);var i=this.m_moveCells[0],n=this._getKey(i,"row");if(1==t){var o=this.m_moveIndex+1,s=this._getKey(this._getCellByIndex(this.createIndex(o,this.m_startCol)),"row");this.getDataSource().move(n,null===o?null:s)}else this.getDataSource().move(n,n);this.m_moveCells=null,this.m_originalMoveIndex=null,this.m_moveIndex=null}this.m_databodyMove=!1},be.prototype._isMoveOnElementEnabled=function(e){return!(null==e||!this._isMoveEnabled("row")||this._getActiveKey("row")!==this._getKey(e,"row"))},be.prototype._manageMoveCursor=function(){var e,t,i,n,o,s,r,a,l;t=this._getActiveKey("row"),i=this._getActiveKey("row",!0),e=this.getMappedStyle("draggable"),r=this.getMappedStyle("rowheadercell"),a=this.getMappedStyle("rowendheadercell"),null!=i&&(this._highlightCellsAlongAxis(i,"row","key","remove",["draggable"]),o=this._findHeaderByKey(i,this.m_rowHeader,r),this.m_utils.containsCSSClassName(o,e)&&this.m_utils.removeCSSClassName(o,e),o=this._findHeaderByKey(i,this.m_rowEndHeader,a),this.m_utils.containsCSSClassName(o,e)&&this.m_utils.removeCSSClassName(o,e)),null!=t&&(l=this._getAxisCellsByKey(t,"row"),this._isMoveOnElementEnabled(l[0])&&(this._highlightCellsAlongAxis(t,"row","key","add",["draggable"]),n=this._findHeaderByKey(t,this.m_rowHeader,r),this.m_utils.addCSSClassName(n,e),s=this._findHeaderByKey(t,this.m_rowEndHeader,a),this.m_utils.addCSSClassName(s,e)))},be.prototype.handleRootFocus=function(e){var t,i;this.m_utils.addCSSClassName(this.m_root,this.getMappedStyle("focus")),(!this.m_root.contains(document.activeElement)||document.activeElement===this.m_root&&0==this.m_root.tabIndex||document.activeElement===this.m_databody&&this.m_scrollbarFocus&&0==this.m_root.tabIndex)&&(this.m_externalFocus=!0,this._isCellEditable()?this._setAccInfoText("accessibleEditableMode"):this._isGridEditable()&&this._setAccInfoText("accessibleNavigationMode"),null!=this.m_active||this._databodyEmpty()?null!=this.m_active&&this._highlightActive():(t=this.createIndex(0,0),1==this.m_scrollbarFocus?(this.m_shouldFocus=!1,this.m_scrollbarFocus=!1):this.scrollToIndex(t),i=this.GetSelection(),!this._isSelectionEnabled()||null!=i&&0!=i.length?this._setActiveByIndex(t):this.selectAndFocus(t,e))),this.m_root.tabIndex=-1},be.prototype.handleRootBlur=function(e){var t;setTimeout(function(){this.m_root.contains(document.activeElement)||(this.m_root.tabIndex=0,null!=(t=this._getActiveElement())&&this._unsetAriaProperties(t))}.bind(this),100),null==this.m_moveRow&&this.m_utils.removeCSSClassName(this.m_root,this.getMappedStyle("focus"))},be.prototype.calculateRowHeight=function(e){return""!=e.style.height?this.getElementHeight(e):null!=e.nextSibling?this.getElementDir(e.nextSibling,"top")-this.getElementDir(e,"top"):this.m_endRowPixel-this.getElementDir(e,"top")},be.prototype.calculateRowHeaderHeight=function(e){return""!=e.style.height?this.getElementHeight(e):null!=e.nextSibling?this.getElementDir(e.nextSibling,"top")-this.getElementDir(e,"top"):this.m_endRowHeaderPixel-this.getElementDir(e,"top")},be.prototype.calculateColumnWidth=function(e){if(""!=e.style.width)return this.getElementWidth(e);var t=this.getResources().isRTLMode()?"right":"left";return null!=e.nextSibling?this.getElementDir(e.nextSibling,t)-this.getElementDir(e,t):this.m_endColPixel-this.getElementDir(e,t)},be.prototype.calculateColumnHeaderWidth=function(e){if(""!=e.style.width)return this.getElementWidth(e);var t=this.getResources().isRTLMode()?"right":"left";return null!=e.nextSibling?this.getElementDir(e.nextSibling,t)-this.getElementDir(e,t):this.m_endColHeaderPixel-this.getElementDir(e,t)},be.prototype._databodyEmpty=function(){return null==this.m_databody.firstChild||null==this.m_databody.firstChild.firstChild},be.prototype.changeStyleProperty=function(e,t,i,n){void 0!==t&&(e.style[t]="remove"==n?"":i)},be.prototype.addTransformMoveStyle=function(e,t,i,n,o,s,r){this.changeStyleProperty(e,this.getCssSupport("transition-delay"),i),this.changeStyleProperty(e,this.getCssSupport("transition-timing-function"),n),this.changeStyleProperty(e,this.getCssSupport("transition-duration"),t),this.changeStyleProperty(e,this.getCssSupport("transform"),"translate3d("+o+"px,"+s+"px,"+r+"px)")},be.prototype.removeTransformMoveStyle=function(e){this.changeStyleProperty(e,this.getCssSupport("transition-delay"),null,"remove"),this.changeStyleProperty(e,this.getCssSupport("transition-timing-function"),null,"remove"),this.changeStyleProperty(e,this.getCssSupport("transition-duration"),null,"remove"),this.changeStyleProperty(e,this.getCssSupport("transform"),null,"remove")},be.prototype.getCssSupport=function(e){var t,i,n,o;for(t=["","-moz-","-webkit-","-o-","-ms-","-khtml-"],i=document.documentElement,n=0;n<t.length;n++)if("Ms"==(o=(t[n]+e).replace(/\-([a-z])/gi,function(e,t){return t.toUpperCase()})).substr(0,2)&&(o="m"+o.substr(1)),o in i.style)return o},be.prototype._refreshDatabodyMap=function(){this._clearDatabodyMap(),this._addNodesToDatabodyMap(this.m_databody.firstChild.childNodes)},be.prototype._populateDatabody=function(e,t){this._addNodesToDatabodyMap(t.childNodes),e.appendChild(t)},be.prototype._emptyDatabody=function(e){this._clearDatabodyMap(),this.m_utils.empty(e)},be.prototype._addNodesToDatabodyMap=function(e){var t,i,n,o,s;for(s=0;s<e.length;s++)t=e[s],this.m_utils.containsCSSClassName(t,this.getMappedStyle("cell"))&&(i=this.getCellIndexes(t),o=this.getCellExtents(t),n=t.id,this._addToDatabodyMap(i,n,o))},be.prototype._removeNodesFromDatabodyMap=function(e){for(var t=0;t<e.length;t++){var i=this.getCellIndexes(e[t]);this._removeIndexFromDatabodyMap(i)}},be.prototype._addToDatabodyMap=function(e,t,i){var n,o,s,r;for(n=i.row,o=i.column,s=0;s<n;s++)for(r=0;r<o;r++)this._addIndexToDatabodyMap(this.createIndex(e.row+s,e.column+r),t)},be.prototype._addIndexToDatabodyMap=function(e,t){var i="r"+e.row+"c"+e.column;this.m_databodyMap.set(i,t)},be.prototype._removeIndexFromDatabodyMap=function(e){var t="r"+e.row+"c"+e.column;return this.m_databodyMap.delete(t)},be.prototype._getFromDatabodyMap=function(e){var t="r"+e.row+"c"+e.column;return this.m_databodyMap.get(t)},be.prototype._clearDatabodyMap=function(){return this.m_databodyMap.clear()},be.prototype._modifyAxisCellContextIndex=function(e,t,i,n){var o,s,r;for(o=t;o<t+i;o++)for(r=this._getAxisCellsByIndex(o,e),s=0;s<r.length;s++)r[s][this.getResources().getMappedAttribute("context")].indexes[e]+=n},be.prototype._getCellOrHeaderByIndex=function(e,t){var i=null,n=this._getAxisCellsByIndex(e,t,!0);return null!=n&&n.length>0&&(i=n[0]),null==i&&("row"===t&&null==(i=this._getHeaderByIndex(e,0,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader))&&(i=this._getHeaderByIndex(e,0,this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader)),"column"===t&&null==(i=this._getHeaderByIndex(e,0,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader))&&(i=this._getHeaderByIndex(e,0,this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader))),i},be.prototype._getLabel=function(e,t){return this.m_headerLabels[e][t]},be.prototype._getCellByIndex=function(e){var t=this._getFromDatabodyMap(e);return null!=t?document.getElementById(t):null},be.prototype._getAxisCellsByIndex=function(e,t,i){var n,o,s,r,a,l;for(o=[],r="row"==t?this.m_startCol:this.m_startRow,a="row"==t?this.m_endCol:this.m_endRow,n=r;n<=a;n+=l)if(null!=(s=this._getCellByIndex(this.createIndex("row"==t?e:n,"row"==t?n:e)))){if(l=this.getCellExtents(s)["row"==t?"column":"row"],o.push(s),i)break}else l=1;return o},be.prototype._getAxisCellsByKey=function(e,t,i){var n,o,s,r=[];if(null==e||null==this.m_databody||null==this.m_databody.firstChild)return null;for(n=this.m_databody.firstChild.childNodes,s=0;s<n.length&&(o=n[s],!this.m_utils.containsCSSClassName(o,this.getMappedStyle("cell"))||this._getKey(o,t)!==e||(r.push(o),!i));s++);return r},be.prototype._isContainFocusableElement=function(e){return this.getFocusableElementsInNode(e).length>0},be.prototype.unhighlightSelection=function(){var e,t;for(t=this.GetSelection(),e=0;e<t.length;e+=1)this.unhighlightRange(t[e])},be.prototype.unhighlightRange=function(e){var t=this.getElementsInRange(e);this.unhighlightElems(t)},be.prototype.highlightRange=function(e,t){var i,n;i=this.getElementsInRange(e),this.highlightElems(i),t&&(n=1==this.GetSelection().length?i.length:this._getCurrentSelectionCellCount(),this._setAccInfoText("accessibleMultiCellSelected",{num:n}))},be.prototype._getCurrentSelectionCellCount=function(){var e,t,i,n;for(e=0,t=this.GetSelection(),n=0;n<t.length;n++)null!=(i=this.getElementsInRange(t[n]))&&(e+=i.length);return e},be.prototype.unhighlightElems=function(e){var t,i;if(null!=e&&0!=e.length)for(t=0;t<e.length;t+=1)i=e[t],this._unhighlightElement(i,["selected","topSelected","bottomSelected"])},be.prototype.highlightElems=function(e){var t,i,n,o,s,r;if(null!=e&&0!=e.length)for(i=e[0],n=this._getIndex(i,"row"),i=e[e.length-1],o=this._getIndex(i,"row"),t=0;t<e.length;t+=1)s=["selected"],i=e[t],(r=this._getIndex(i,"row"))===n&&s.push("topSelected"),r===o&&s.push("bottomSelected"),this._highlightElement(i,s)},be.prototype.applySelection=function(e,t,i,n){var o,s,r;for(s=this.GetSelection(),o=0;o<s.length;o+=1)r=this.getElementsInRange(s[o],e,t,i,n),this.highlightElems(r)},be.prototype.handleDatabodySelectionDrag=function(e){var t,i,n;this.m_utils.isTouchDevice()?i=this.findCell(document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY)):(n=e.target,i=this.findCell(n)),null!=i&&(this.isHeaderSelectionType(this.m_selectionFrontier)?this.extendSelectionHeader(i,e):(t=this.getCellIndexes(i),this.extendSelection(t,e)))},be.prototype._isSelected=function(e){var t=this.getMappedStyle("selected");return null!=t&&this.m_utils.containsCSSClassName(e,t)},be.prototype._deselect=function(e){var t,i,n,o,s,r,a,l,u,h,d,c;for("row"==this.m_options.getSelectionMode()&&(e=this.createIndex(e.row)),t=e.row,i=e.column,n=-1,o=this.GetSelection(),s=0;s<o.length;s+=1)if(a=(r=o[s]).startIndex,l=this.getEndIndex(r),u=a.row,h=l.row,u==t&&h==t){if(isNaN(a.column)||isNaN(l.column)){if(!isNaN(i))continue;n=s;break}if(d=a.column,c=l.column,d==i&&c==i){n=s;break}}-1!=n&&(this.unhighlightRange(o[n]),o.splice(n,1))},be.prototype.handleHeaderClickSelection=function(e){var t,i,n,o,s,r;if(o=e.target,s=this.findHeader(o),!(r=e.shiftKey)&&s&&this._setActive(s,this._createActiveObject(s),e),null==this.m_active||"header"!=this.m_active.type&&!e.shiftKey)return!1;if("header"==this.m_active.type&&(t=this.m_active.axis,i=this.m_active.index,n=this.m_active.level),this.m_utils.isTouchDevice())this._removeTouchSelectionAffordance(),this._selectHeader(t,i,n,e);else if(r){if(r){var a=o[this.getResources().getMappedAttribute("context")];return null==t&&(t=a.axis),void((-1!=t.indexOf("row")&&-1!=a.axis.indexOf("row")||-1!=t.indexOf("column")&&-1!=a.axis.indexOf("column"))&&this.extendSelectionHeader(o,e))}}else this._selectHeader(t,i,n,e)},be.prototype.discontiguousHeaderSetActiveFromDatabody=function(e,t,i,n){var o=t.replace("End",""),s=this.m_selection[this.m_selection.length-1];this.unhighlightSelection(),s.startIndex.row==this.m_active.indexes.row&&s.endIndex.row==this.m_active.indexes.row&&s.startIndex.column==this.m_active.indexes.column&&s.endIndex.column==this.m_active.indexes.column&&this.m_selection.pop(),this._setActive(i,{type:"header",index:this.m_trueIndex[o],level:n-1,axis:t},e,!1),this.rehighlightSelection()},be.prototype.handleDragAnchorChange=function(e){var t,i,n,o,s,r,a,l;if(this.m_headerDragState){if(i=(t=e.target)[this.getResources().getMappedAttribute("context")],r=(s=this._getActiveElement())[this.getResources().getMappedAttribute("context")],(a=this._getAttribute(s.parentNode,"start",!0))+this._getAttribute(s.parentNode,"extent",!0)-1,!i.extent)return;1==i.extent?(n=i.index,o=i.index):o=(n=this._getAttribute(t.parentNode,"start",!0))+this._getAttribute(t.parentNode,"extent",!0)-1,l=(a=this._getAttribute(s.parentNode,"start",!0))+this._getAttribute(s.parentNode,"extent",!0)-1,1!=r.extent?(n<=a&&o>=l||n>=a&&o<=l)&&this._setActive(t,this._createActiveObject(t),e):n!=o&&n<=a&&a<=o&&this._setActive(t,this._createActiveObject(t),e)}},be.prototype.handleDatabodyClickSelection=function(e){var t,i,n,o,s;if(s=e.target,null!=(i=this.findCell(s))&&(t=this.getCellIndexes(i)),null!=t&&null!=t){if(this.isMultipleSelection()&&2===e.button&&this._isContainSelection(t))return;n=this.m_utils.ctrlEquivalent(e),o=e.shiftKey,this.isMultipleSelection()?this.m_utils.isTouchDevice()?(this._removeTouchSelectionAffordance(),null!=this.m_active&&this._unhighlightActive(),this.selectAndFocus(t,e,!1)):n||o?!n&&o?this.extendSelection(t,e):this.selectAndFocus(t,e,!0):this.selectAndFocus(t,e,!1):this.selectAndFocus(t,e,!1)}},be.prototype._handleSelectAll=function(e){return!(!this._isSelectionEnabled()||!this.isMultipleSelection())&&("row"==this.m_options.getSelectionMode()?this._selectRange(this.createIndex(0),this.createIndex(-1),e):this._selectRange(this.createIndex(0,0),this.createIndex(-1,-1),e),this.m_utils.isTouchDevice()&&this.m_topSelectIconContainer&&this.m_bottomSelectIconContainer&&(this.m_topSelectIconContainer.parentNode.removeChild(this.m_topSelectIconContainer),this.m_bottomSelectIconContainer.parentNode.removeChild(this.m_bottomSelectIconContainer)),!0)},be.prototype._isContainSelection=function(e,t){var i,n,o,s,r,a,l,u;for(null==t&&(t=this.GetSelection()),u=0;u<t.length;u+=1)if(n=(i=t[u]).startIndex,o=this.getEndIndex(i),s=n.row,r=o.row,!(e.row<s||-1!=r&&e.row>r)){if(isNaN(n.column)||isNaN(o.column))return!0;if(a=n.column,l=o.column,!(e.column<a||-1!=l&&e.column>l))return!0}return!1},be.prototype._compareSelections=function(e,t){var i,n,o;if(e.length!==t.length)return!1;for(i=0;i<e.length;i+=1){for(o=!1,n=0;n<t.length;n+=1)this._compareIndividualSelectionObjects(e[i],t[n])&&(o=!0);if(!1===o)return!1}return!0},be.prototype._compareIndividualSelectionObjects=function(e,t){return e.startIndex.row===t.startIndex.row&&e.startIndex.column===t.startIndex.column&&e.endIndex.row===t.endIndex.row&&e.endIndex.column===t.endIndex.column},be.prototype._clearSelection=function(e){var t;this.unhighlightSelection(),this._removeTouchSelectionAffordance(),t=this.GetSelection(),this.m_selection=[],this._compareSelectionAndFire(e,t)},be.prototype.setDiscontiguousSelectionMode=function(e){this.m_discontiguousSelection=e,this._setAccInfoText(e?"accessibleRangeSelectModeOn":"accessibleRangeSelectModeOff")},be.prototype._selectEntireRow=function(e,t,i){var n,o,s;n=this.createIndex(e,0),o=this.createIndex(t,-1),s=this._getSelectionStartAndEnd(n,o,0),"row"==this.m_options.getSelectionMode()?this._selectRange(this.createIndex(s.min.row),this.createIndex(s.max.row),i):this._selectRange(this.createIndex(s.min.row,0),this.createIndex(s.max.row,-1),i)},be.prototype._selectEntireColumn=function(e,t,i){var n,o,s;n=this.createIndex(0,e),o=this.createIndex(-1,t),s=this._getSelectionStartAndEnd(n,o,0),this._selectRange(this.createIndex(0,s.min.column),this.createIndex(-1,s.max.column),i)},be.prototype._selectRange=function(e,t,i){this.unhighlightSelection(),this._createRangeWithKeys(e,t,this._selectRangeCallback.bind(this,i))},be.prototype._selectRangeCallback=function(e,t){var i,n;n=this.GetSelection(),(i=this.m_discontiguousSelection||!e||this.m_utils.ctrlEquivalent(e)&&0==e.button?n.slice(0):[]).push(t),this.m_selection=i,this.rehighlightSelection(),this._isDatabodyCellActive()&&e.target[this.getResources().getMappedAttribute("context")]&&!e.target[this.getResources().getMappedAttribute("context")].axis&&!this.m_selectionFrontier.axis&&(this.m_selectionFrontier=this.m_active.indexes,this._highlightActive()),this._compareSelectionAndFire(e,n)},be.prototype.rehighlightSelection=function(){for(var e=0;e<this.m_selection.length;e++)this.highlightRange(this.m_selection[e])},be.prototype.GetSelection=function(){return null==this.m_selection&&(this.m_selection=[]),this.m_selection},be.prototype.SetSelection=function(e){null!=e&&(null==e&&(e=[]),this.unhighlightSelection(),this.GetSelection(),this.m_selection=e,null!=this.m_databody&&this.applySelection(this.m_startRow,this.m_endRow,this.m_startCol,this.m_endCol))},be.prototype.fireSelectionEvent=function(e,t){var i={event:e,ui:{selection:this.GetSelection(),previousSelection:t}};this.fireEvent("select",i)},be.prototype.extendSelection=function(e,t,i){var n,o,s,r;"header"!=this.m_active.type&&null!=(n=this.m_utils.isTouchDevice()?this.m_touchSelectAnchor:{row:this.m_active.indexes.row,column:this.m_active.indexes.column})&&(this._resetSelectionFrontierFocus(),s=(o=this._updateSelectionFrontier(n,e,i)).min,r=o.max,"row"==this.m_options.getSelectionMode()&&(s=this.createIndex(s.row),r=this.createIndex(r.row)),this._createRangeWithKeys(s,r,this._extendSelectionCallback.bind(this,t,n)))},be.prototype.extendSelectionHeader=function(e,t,i){var n,o,s,r,a,l,u,h,d,c,p,_,m;if(null!==e&&(_=e,p=e[this.getResources().getMappedAttribute("context")],null==i&&(i=this.m_discontiguousSelection),p)){if(p.cell)r=s=-1!=this.m_selectionFrontier.axis.indexOf("column")?p.indexes.column:p.indexes.row,c=s;else{if(this.m_selectionFrontier&&p.index==this.m_selectionFrontier.index&&p.level==this.m_selectionFrontier.level)return;1==p.extent?(s=p.index,r=p.index,c=p.index):r=(s=this._getAttribute(e.parentNode,"start",!0))+this._getAttribute(e.parentNode,"extent",!0)-1}l=(a=this._getActiveElement())[this.getResources().getMappedAttribute("context")],this.m_utils.isTouchDevice()?(-1==(n=-1!=this.m_selectionFrontier.axis.indexOf("column")?this.m_touchSelectAnchor.column:this.m_touchSelectAnchor.row)&&(n=0),u=n,h=n,o=this.m_selectionFrontier.axis):(h=(u=this._getAttribute(a.parentNode,"start",!0))+this._getAttribute(a.parentNode,"extent",!0)-1,"header"===this.m_active.type&&(o=this.m_active.axis,n=this.m_active.index)),"cell"==this.m_active.type?(d=1,n=-1!=(o=p.axis).indexOf("row")?this.m_active.indexes.row:this.m_active.indexes.column):d=l.extent,i&&(m=this.m_selection[this.m_selection.length-1],this.unhighlightSelection(),m&&this.checkCorners(o,n,m)&&this.m_selection.pop()),1!=d?s<=u&&r>=h||s>=u&&r<=h?(this.m_headerDragState||this._setActive(_,this._createActiveObject(_),t),n=s,c=r):s>u&&r>h?(n=u,c=r):s<u&&r<h&&(n=s,c=h):1==d&&s!=r&&(s<=n&&n<=r?(this.m_headerDragState||"cell"==this.m_active.type||this._setActive(_,this._createActiveObject(_),t),n=s,c=r):s<=n&&r<=n?(c=n,n=s):s>=n&&r>=n&&(c=r)),p.cell?this.setHeaderSelectionFrontier(o,c,c,this.m_selectionFrontier.level,e,!0):this.setHeaderSelectionFrontier(o,c,p.index,p.level,e,!0),-1!=o.indexOf("column")?t?this._selectEntireColumn(n,c,t):this._selectEntireColumn(n,c,null):-1!=o.indexOf("row")&&(t?this._selectEntireRow(n,c,t):this._selectEntireRow(n,c,null))}},be.prototype._updateSelectionFrontier=function(e,t,i){var n,o,s,r,a,l,u,h,d,c;if("row"==this.m_options.getSelectionMode()?(d=this.createIndex(e.row,this.m_startCol),c=this.createIndex(t.row,this.m_endCol)):(d=e,c=t),null!=i&&(u=(l=(a=this.GetSelection())[this._getLastAnchoredSelectionIndex(a,d)]).startIndex,h=l.endIndex,u.row===this.m_selectionFrontier.row&&d.row!==u.row?d.row=h.row:h.row===this.m_selectionFrontier.row&&d.row!==h.row&&(d.row=u.row),u.column===this.m_selectionFrontier.column&&d.column!==u.column?d.column=h.column:h.column===this.m_selectionFrontier.column&&d.column!==h.column&&(d.column=u.column)),n=this._getSelectionStartAndEnd(d,c,0),r=c,null!=i){for(o=n.min,s=n.max,"row"==this.m_options.getSelectionMode()&&(o=this.createIndex(o.row),s=this.createIndex(s.row));this._compareIndividualSelectionObjects(l,this.createRange(o,s));){if(i===be.keyCodes.LEFT_KEY){if(0===c.column)break;c.column-=1}else if(i===be.keyCodes.RIGHT_KEY){if(c.column===this.m_endCol)break;c.column+=1}else if(i===be.keyCodes.UP_KEY){if(0===c.row)break;c.row-=1}else{if(i!==be.keyCodes.DOWN_KEY)break;if(c.row===this.m_endRow)break;c.row+=1}o=(n=this._getSelectionStartAndEnd(d,c,0)).min,s=n.max,"row"==this.m_options.getSelectionMode()&&(o=this.createIndex(o.row),s=this.createIndex(s.row))}i===be.keyCodes.LEFT_KEY?(r.column=o.column<d.column?o.column:s.column,r.row=o.row<d.row?o.row:s.row):i===be.keyCodes.RIGHT_KEY?(r.column=s.column>d.column?s.column:o.column,r.row=o.row<d.row?o.row:s.row):i===be.keyCodes.UP_KEY?(r.row=o.row<d.row?o.row:s.row,r.column=o.column<d.column?o.column:s.column):i===be.keyCodes.DOWN_KEY&&(r.row=s.row>d.row?s.row:o.row,r.column=o.column<d.column?o.column:s.column)}else r=this.getCellIndexes(this._getCellByIndex(r));return"row"==this.m_options.getSelectionMode()&&(r=this.createIndex(r.row,this.m_active.indexes.column)),this.m_selectionFrontier=r,n},be.prototype._getMinOrMax=function(e,t,i){return isNaN(e)?isNaN(t)?null:t:isNaN(t)?e:i(e,t)},be.prototype._getSelectionStartAndEnd=function(e,t,i){var n,o,s,r,a,l;if((n=this.getElementsInRange(this.createRange(e,t))).length===i)return{min:e,max:t};for(o={row:this._getMinOrMax(e.row,t.row,Math.min),column:this._getMinOrMax(e.column,t.column,Math.min)},s={row:this._getMinOrMax(e.row,t.row,Math.max),column:this._getMinOrMax(e.column,t.column,Math.max)},r=0;r<n.length;r++)a=this.getCellIndexes(n[r]),l=this.getCellEndIndexes(n[r]),(a.row<o.row||null==o.row)&&(o.row=a.row),(a.column<o.column||null==o.column)&&(o.column=a.column),(l.row>s.row||null==s.row)&&(s.row=l.row),(l.column>s.column||null==s.column)&&(s.column=l.column);return this._getSelectionStartAndEnd(o,s,n.length)},be.prototype._getLastAnchoredSelectionIndex=function(e,t){var i;for(i=e.length-1;i>-1;i-=1)if(this._isContainSelection(t,[e[i]]))return i;return i-1},be.prototype._extendSelectionCallback=function(e,t,i){var n,o,s,r,a,l;if(null!=(s=(o=this.GetSelection())[l=this._getLastAnchoredSelectionIndex(o,t)])&&(r=s.startIndex.row==i.startIndex.row,null!=s.startIndex.column&&null!=i.startIndex.column&&(r=r&&s.startIndex.column==i.startIndex.column),a=s.endIndex.row==i.endIndex.row,null!=s.endIndex.column&&null!=i.endIndex.column&&(a=a&&s.endIndex.column==i.endIndex.column),!r||!a)){if(this.m_discontiguousSelection||e&&this.m_utils.ctrlEquivalent(e)&&0==e.button?(n=o.slice(0),this.unhighlightRange(s),n.splice(l,1)):(n=[],this.unhighlightSelection()),n.push(i),this.m_selection=n,this.m_discontiguousSelection||e&&this.m_utils.ctrlEquivalent(e)&&0==e.button)for(var u=0;u<this.m_selection.length;u++)this.highlightRange(this.m_selection[u]);else this.highlightRange(i,!0);this._makeSelectionFrontierFocus(),this._compareSelectionAndFire(e,o)}},be.prototype._resetSelectionFrontierFocus=function(){var e,t;null==this.m_selectionFrontier||this._isDatabodyCellActive()&&this.m_selectionFrontier.row==this.m_active.indexes.row&&this.m_selectionFrontier.column==this.m_active.indexes.column||(e=this.createRange(this.m_selectionFrontier),null!=(t=this.getElementsInRange(e))&&t.length>0&&this._unsetAriaProperties(t[0]))},be.prototype._makeSelectionFrontierFocus=function(){var e,t,i;null==this.m_selectionFrontier||this._isDatabodyCellActive()&&this.m_selectionFrontier.row==this.m_active.indexes.row&&this.m_selectionFrontier.column==this.m_active.indexes.column||(this._isDatabodyCellActive()&&(e=this.createRange(this.m_active.indexes),null!=(i=this.getElementsInRange(e))&&i.length>0&&this._unsetAriaProperties(i[0])),e=this.createRange(this.m_selectionFrontier),null!=(t=this.getElementsInRange(e))&&0!=t.length&&(this._updateContextInfo(this.m_selectionFrontier),i=this.m_utils.containsCSSClassName(t[0],this.getMappedStyle("row"))?t[0].firstChild:t[0],this._setAriaProperties(this._createActiveObject(i),null,i)))},be.prototype._selectHeader=function(e,t,i,n){var o,s,r;-1!=e.indexOf("row")&&this.m_rowHeaderLevelCount-1===i||-1!=e.indexOf("column")&&this.m_columnHeaderLevelCount-1===i?(o=t,s=t):(r=this._getActiveElement(),s=(o=this._getAttribute(r.parentNode,"start",!0))+this._getAttribute(r.parentNode,"extent",!0)-1),-1!=e.indexOf("row")?((o==s&&!this.isMultipleSelection()||this.isMultipleSelection())&&(this.setHeaderSelectionFrontier(e,s,t,i,n.target,!0),this._selectEntireRow(o,s,n)),this._setAccInfoText("accessibleRowSelected",{row:t+1})):-1!=e.indexOf("column")&&(this.setHeaderSelectionFrontier(e,s,t,i,n.target,!0),this._selectEntireColumn(o,s,n),this._setAccInfoText("accessibleColumnSelected",{column:t+1})),this.isMultipleSelection()&&(this.m_headerDragState=!0)},be.prototype.setHeaderSelectionFrontier=function(e,t,i,n,o,s){s&&(this.m_selectionFrontier={}),this.m_selectionFrontier.axis=e,this.m_selectionFrontier.end=t,this.m_selectionFrontier.index=i,this.m_selectionFrontier.level=n,this.m_selectionFrontier.target=o},be.prototype.updateSelectionHeader=function(){this.m_selectionFrontier&&this.m_selectionFrontier.target&&(this.m_utils.isTouchDevice()&&(this.m_touchSelectAnchor=this.m_selection[this.m_selection.length-1].startIndex),this.extendSelectionHeader(this.m_selectionFrontier.target,null))},be.prototype.selectAndFocus=function(e,t,i){null==i&&(i=!1),this._resetSelectionFrontierFocus(),this._setActiveByIndex(e,t),"row"==this.m_options.getSelectionMode()&&(e=this.createIndex(e.row));var n=this._getSelectionStartAndEnd(e,e,0),o=n.min,s=n.max;"row"==this.m_options.getSelectionMode()&&(o=this.createIndex(o.row),s=this.createIndex(s.row)),this._createRangeWithKeys(o,s,this._selectAndFocusRangeCallback.bind(this,o,t,i))},be.prototype._selectAndFocusRangeCallback=function(e,t,i,n){var o,s;o=(s=this.GetSelection()).slice(0),i||(this.m_discontiguousSelection||!t||this.m_utils.ctrlEquivalent(t)&&0==t.button?!this._isDatabodyCellActive()||null==this.m_prevActive||"cell"!=this.m_prevActive.type||this.m_selectionFrontier.row!=this.m_prevActive.indexes.row||this.m_selectionFrontier.column!=this.m_prevActive.indexes.column||this.m_utils.isTouchDevice()||!t.keyCode&&this.isMultipleSelection()||(o.pop(),this._isContainSelection(this.m_prevActive.indexes,o)||this._unhighlightElement(this._getCellByIndex(this.m_prevActive.indexes),["selected","topSelected","bottomSelected"])):(this.unhighlightSelection(),o=[])),this.m_selectionFrontier=e,o.push(n),this.m_selection=o,this.highlightRange(n),this._compareSelectionAndFire(t,s)},be.prototype._compareSelectionAndFire=function(e,t){var i=this.GetSelection();this.m_utils.isTouchDevice()&&this.isMultipleSelection()&&i.length>0&&(this._addTouchSelectionAffordance(e),this._moveTouchSelectionAffordance()),this._compareSelections(i,t)||this.fireSelectionEvent(e,t)},be.prototype._addTouchSelectionAffordance=function(e){var t,i,n,o,s,r,a,l,u,h;if(null==this.m_topSelectIconContainer&&null==this.m_bottomSelectIconContainer){if(r=this.getResources().isRTLMode()?"right":"left",i=this._getTouchSelectionAffordanceSize(),a=e.target,(t=this.findCell(a))||(t=this.findHeader(a)),!t)return;l=t[this.getResources().getMappedAttribute("context")],h=(u=this.getElementDir(t,"top"))+this.getElementHeight(t),this.m_topSelectIconContainer=document.createElement("div"),this.m_topSelectIconContainer.className=this.getMappedStyle("toucharea"),this.setElementDir(this.m_topSelectIconContainer,u-i/2,"top"),(n=document.createElement("div")).className=this.getMappedStyle("selectaffordancetop"),n.setAttribute("role","button"),n.setAttribute("aria-label",this.getResources().getTranslatedText("accessibleSelectionAffordanceTop")),this.m_topSelectIconContainer.appendChild(n),this.m_bottomSelectIconContainer=document.createElement("div"),this.m_bottomSelectIconContainer.className=this.getMappedStyle("toucharea"),this.setElementDir(this.m_bottomSelectIconContainer,h-i/2,"top"),(o=document.createElement("div")).className=this.getMappedStyle("selectaffordancebottom"),o.setAttribute("role","button"),o.setAttribute("aria-label",this.getResources().getTranslatedText("accessibleSelectionAffordanceBottom")),this.m_bottomSelectIconContainer.appendChild(o),"row"===this.m_options.getSelectionMode()?(s=this.getElementWidth(this.m_databody)/2+this.m_currentScrollLeft-i/2,this.setElementDir(this.m_topSelectIconContainer,s,r),this.setElementDir(this.m_bottomSelectIconContainer,s,r)):l.axis&&-1!=l.axis.indexOf("row")?(s=this.getElementWidth(this.m_databody)/2+this.m_currentScrollLeft-i/2,this.setElementDir(this.m_topSelectIconContainer,s,r),this.setElementDir(this.m_bottomSelectIconContainer,s,r)):l.axis&&-1!=l.axis.indexOf("column")?(u=this.getElementHeight(this.m_databody)/2+this.m_currentScrollTop-i/2,this.setElementDir(this.m_topSelectIconContainer,u,"top"),this.setElementDir(this.m_bottomSelectIconContainer,u,"top"),s=this.getElementDir(t,r)-i/2,this.setElementDir(this.m_topSelectIconContainer,s,r),this.setElementDir(this.m_bottomSelectIconContainer,s+this.calculateColumnWidth(t),r)):(s=this.getElementDir(t,r)-i/2,this.setElementDir(this.m_topSelectIconContainer,s,r),this.setElementDir(this.m_bottomSelectIconContainer,s+this.calculateColumnWidth(t),r)),this.m_databody.firstChild.appendChild(this.m_topSelectIconContainer),this.m_databody.firstChild.appendChild(this.m_bottomSelectIconContainer)}},be.prototype._removeTouchSelectionAffordance=function(){this._isDatabodyCellActive()&&this.m_topSelectIconContainer&&this.m_topSelectIconContainer.parentNode&&(this.m_topSelectIconContainer.parentNode.removeChild(this.m_topSelectIconContainer),this.m_bottomSelectIconContainer.parentNode.removeChild(this.m_bottomSelectIconContainer))},be.prototype._moveTouchSelectionAffordance=function(){var e,t,i,n,o,s,r,a;if(r=this.getResources().isRTLMode()?"right":"left",(e=this.GetSelection()).length>0&&(n=this.m_options.getSelectionMode(),a=this._getTouchSelectionAffordanceSize(),null!=this.m_topSelectIconContainer&&null!=this.m_bottomSelectIconContainer)){if("row"===n)t=this._getAxisCellsByKey(e[e.length-1].startKey.row,"row"),i=this._getAxisCellsByKey(e[e.length-1].endKey.row,"row"),this.setElementDir(this.m_topSelectIconContainer,this.getElementDir(t[0],"top")-a/2,"top"),this.setElementDir(this.m_bottomSelectIconContainer,this.getElementDir(i[0],"top")+this.getElementHeight(i[0])-a/2,"top");else if(-1!=e[e.length-1].endIndex.row&&-1==e[e.length-1].endIndex.column){t=this._getAxisCellsByKey(e[e.length-1].startKey.row,"row"),i=this._getAxisCellsByKey(e[e.length-1].endKey.row,"row"),this.setElementDir(this.m_topSelectIconContainer,this.getElementDir(t[0],"top")-a/2,"top"),this.setElementDir(this.m_bottomSelectIconContainer,this.getElementDir(i[0],"top")+this.getElementHeight(i[0])-a/2,"top");var l=this.getElementWidth(this.m_databody)/2+this.m_currentScrollLeft-a/2;this.setElementDir(this.m_topSelectIconContainer,l,r),this.setElementDir(this.m_bottomSelectIconContainer,l,r)}else if(-1!=e[e.length-1].endIndex.column&&-1==e[e.length-1].endIndex.row){t=this._getAxisCellsByKey(e[e.length-1].startKey.column,"column"),i=this._getAxisCellsByKey(e[e.length-1].endKey.column,"column");var u=this.getElementHeight(this.m_databody)/2+this.m_currentScrollTop-a/2;this.setElementDir(this.m_topSelectIconContainer,u,"top"),this.setElementDir(this.m_bottomSelectIconContainer,u,"top"),this.setElementDir(this.m_topSelectIconContainer,this.getElementDir(t[0],"left")-a/2,"left"),this.setElementDir(this.m_bottomSelectIconContainer,this.getElementDir(i[0],"left")+this.getElementWidth(i[0])-a/2,"left")}else o=this._getCellByIndex(e[e.length-1].startIndex),s=this._getCellByIndex(e[e.length-1].endIndex),this.setElementDir(this.m_topSelectIconContainer,this.getElementDir(o,"top")-a/2,"top"),this.setElementDir(this.m_bottomSelectIconContainer,this.getElementDir(s,"top")+this.getElementHeight(s)-a/2,"top"),this.setElementDir(this.m_topSelectIconContainer,this.getElementDir(o,r)-a/2,r),this.setElementDir(this.m_bottomSelectIconContainer,this.getElementDir(s,r)+this.getElementWidth(s)-a/2,r);null==this.m_topSelectIconContainer.parentNode&&(this.m_databody.firstChild.appendChild(this.m_topSelectIconContainer),this.m_databody.firstChild.appendChild(this.m_bottomSelectIconContainer))}},be.prototype._scrollTouchSelectionAffordance=function(){var e,t,i,n;"row"===(e=this.m_options.getSelectionMode())?null!=this.m_topSelectIconContainer&&(n=this.getResources().isRTLMode()?"right":"left",t=this.getElementWidth(this.m_databody)/2+this.m_currentScrollLeft,this.setElementDir(this.m_topSelectIconContainer,t,n),this.setElementDir(this.m_bottomSelectIconContainer,t,n)):"cell"===e&&this.isHeaderSelectionType(this.m_selectionFrontier)&&null!=this.m_topSelectIconContainer&&(-1!=this.m_selectionFrontier.axis.indexOf("row")?(n=this.getResources().isRTLMode()?"right":"left",t=this.getElementWidth(this.m_databody)/2+this.m_currentScrollLeft,this.setElementDir(this.m_topSelectIconContainer,t,n),this.setElementDir(this.m_bottomSelectIconContainer,t,n)):(i=this.getElementHeight(this.m_databody)/2+this.m_currentScrollTop,this.setElementDir(this.m_topSelectIconContainer,i,"top"),this.setElementDir(this.m_bottomSelectIconContainer,i,"top")))},be.prototype._getTouchSelectionAffordanceSize=function(){var e,t;return null==this.m_touchSelectionAffordanceSize&&((e=document.createElement("div")).className=this.getMappedStyle("toucharea"),e.style.visibilty="hidden",e.style.top="0px",e.style.visibilty="0px",this.m_root.appendChild(e),t=e.offsetWidth,this.m_root.removeChild(e),this.m_touchSelectionAffordanceSize=t),this.m_touchSelectionAffordanceSize},be.SORT_ANIMATION_DURATION=800,be.prototype._handleSortMouseOver=function(e){var t,i;this._databodyEmpty()||(t=e.target,(i=this.findHeader(t))&&this._showOrHideSortIcon(i,!1),(this.m_utils.containsCSSClassName(t,this.getMappedStyle("sortascending"))||this.m_utils.containsCSSClassName(t,this.getMappedStyle("sortdescending")))&&this.m_utils.addCSSClassName(t,this.getMappedStyle("hover")))},be.prototype._handleSortMouseOut=function(e){var t,i,n;this._databodyEmpty()||(i=e.target,n=e.relatedTarget,null!=(t=this.findHeader(i))&&null!=n&&t===this.findHeader(n)||this._showOrHideSortIcon(t,!0),(this.m_utils.containsCSSClassName(i,this.getMappedStyle("sortascending"))||this.m_utils.containsCSSClassName(i,this.getMappedStyle("sortdescending")))&&(this.m_utils.removeCSSClassName(i,this.getMappedStyle("hover")),this.m_utils.removeCSSClassName(i,this.getMappedStyle("selected"))))},be.prototype._handleSortIconMouseDown=function(e){this._databodyEmpty()||this.m_utils.addCSSClassName(e,this.getMappedStyle("selected"))},be.prototype._toggleSortIconDirection=function(e,t){var i;null!=e&&(i=this._getSortIcon(e),"descending"===t&&this.m_utils.containsCSSClassName(i,this.getMappedStyle("sortascending"))?(this.m_utils.removeCSSClassName(i,this.getMappedStyle("sortascending")),this.m_utils.addCSSClassName(i,this.getMappedStyle("sortdescending"))):"ascending"===t&&this.m_utils.containsCSSClassName(i,this.getMappedStyle("sortdescending"))&&(this.m_utils.removeCSSClassName(i,this.getMappedStyle("sortdescending")),this.m_utils.addCSSClassName(i,this.getMappedStyle("sortascending"))))},be.prototype._showOrHideSortIcon=function(e,t){var i,n=!1;null!=e&&(i=this._getSortIcon(e),null!=this.m_sortInfo&&(n=this.m_sortInfo.key===this._getKey(e)),!1!==t||n?!0!==t||n||(this.m_utils.removeCSSClassName(i,this.getMappedStyle("default")),this.m_utils.addCSSClassName(i,this.getMappedStyle("disabled"))):(this.m_utils.removeCSSClassName(i,this.getMappedStyle("disabled")),this.m_utils.addCSSClassName(i,this.getMappedStyle("default"))))},be.prototype._buildSortIcon=function(e){var t,i,n,o,s;return(s=document.createElement("div")).className=this.getMappedStyle("sortcontainer"),t=document.createElement("div"),i=this.getMappedStyle("icon")+" "+this.getMappedStyle("clickableicon"),n=null!=this.m_sortInfo?this.m_sortInfo.key:null,e.key===n?"ascending"===(o=null!=this.m_sortInfo?this.m_sortInfo.direction:null)?t.className=this.getMappedStyle("sortascending")+" "+i+" "+this.getMappedStyle("default"):"descending"===o&&(t.className=this.getMappedStyle("sortdescending")+" "+i+" "+this.getMappedStyle("default")):(i+=" "+this.getMappedStyle("disabled"),t.className=this.getMappedStyle("sortascending")+" "+i),s.appendChild(t),s},be.prototype._handleKeyboardSort=function(e,t){if(!this._databodyEmpty()){var i=e.getAttribute(this.getResources().getMappedAttribute("sortDir"));i=null==i||"descending"===i?"ascending":"descending",this._doHeaderSort(t,e,i)}},be.prototype._handleHeaderSort=function(e,t){var i,n;this._databodyEmpty()||(i=e.target,null!=(n=this.findHeader(i))&&(null==t&&(t=null!=this.m_sortInfo&&this.m_sortInfo.key===this._getKey(n)&&"ascending"===this.m_sortInfo.direction?"descending":"ascending"),this._doHeaderSort(e,n,t)))},be.prototype._handleCellSort=function(e,t,i){e.target,null==i||this._databodyEmpty()||(this._removeTouchSelectionAffordance(),this._doHeaderSort(e,i,t))},be.prototype._doHeaderSort=function(e,t,i){var n,o,s;1!=this.m_isSorting?(this.m_delayedSort=null,n=this._getKey(t),o=this._getAxis(t),this._removeSortSelection(),t.setAttribute(this.getResources().getMappedAttribute("sortDir"),i),this.m_sortInfo={event:e,key:n,axis:o,direction:i},this._toggleSortIconDirection(t,i),this._addSortSelection(),null!=i&&null!=n&&null!=o&&(this.m_isSorting=!0,this.showStatusText(),s={axis:o,key:n,direction:i},this.getDataSource().sort(s,{success:this._handleSortSuccess.bind(this),error:this._handleSortError.bind(this)})),this._setAccInfoText("ascending"===i?"accessibleSortAscending":"accessibleSortDescending",{id:n})):this.m_delayedSort={event:e,header:t,direction:i}},be.prototype._handleSortError=function(){this.hideStatusText()},be.prototype._removeSortSelection=function(){var e,t;null!=this.m_sortInfo&&((e=this._findHeaderByKey(this.m_sortInfo.key,this.m_colHeader,this.getMappedStyle("colheadercell"))).removeAttribute(this.getResources().getMappedAttribute("sortDir")),t=this._getSortIcon(e),this._toggleSortIconDirection(e,"ascending"),"descending"===this.m_sortInfo.direction&&(this.m_utils.removeCSSClassName(t,this.getMappedStyle("sortdescending")),this.m_utils.addCSSClassName(t,this.getMappedStyle("sortascending"))),this.m_utils.addCSSClassName(t,this.getMappedStyle("disabled")),this.m_utils.removeCSSClassName(t,this.getMappedStyle("default")),this.m_utils.removeCSSClassName(this._getSortContainer(e),this.getMappedStyle("enabled")))},be.prototype._addSortSelection=function(){var e,t;null!=this.m_sortInfo&&(e=this._findHeaderByKey(this.m_sortInfo.key,this.m_colHeader,this.getMappedStyle("colheadercell")),t=this._getSortIcon(e),this.m_utils.addCSSClassName(t,this.getMappedStyle("default")),this.m_utils.removeCSSClassName(t,this.getMappedStyle("disabled")),this.m_utils.removeCSSClassName(t,this.getMappedStyle("selected")),this.m_utils.addCSSClassName(this._getSortContainer(e),this.getMappedStyle("enabled")))},be.prototype._getAxis=function(e){var t,i;return t=this.getMappedStyle("colheadercell"),i=this.getMappedStyle("rowheadercell"),this.m_utils.containsCSSClassName(e,t)?"column":this.m_utils.containsCSSClassName(e,i)?"row":null},be.prototype._handleSortSuccess=function(){this.hideStatusText(),this._isDatabodyCellActive()?this._indexes({row:this.m_active.keys.row,column:this.m_active.keys.column},this._handlePreSortScrolling):this._fetchForSort(this.m_startRow,this.m_endRow-this.m_startRow+1,!1)},be.prototype._handlePreSortScrolling=function(e){var t,i,n,o,s;n=(i=(-1===e.row?0:e.row)*this.m_avgRowHeight)+this.m_avgRowHeight,s=this._isHighWatermarkScrolling(),this._isInViewport(e),this.m_currentScrollTop<=i&&n<=this.m_currentScrollTop+this.getElementHeight(this.m_databody)||s?this._fetchForSort(this.m_startRow,this.m_endRow-this.m_startRow+1,!1):(this.m_currentScrollTop=Math.min(i,this._getMaxScrollHeight()),o=(t=Math.floor(this.m_currentScrollTop/this.m_avgRowHeight))*this.m_avgRowHeight,this.m_startRow=t,this.m_endRow=-1,this.m_startRowHeader=t,this.m_endRowHeader=-1,this.m_startRowPixel=o,this.m_endRowPixel=o,this.m_startRowHeaderPixel=o,this.m_endRowHeaderPixel=o,this._fetchForSort(t,null,!0))},be.prototype._fetchForSort=function(e,t,i){var n=document.createDocumentFragment(),o=document.createDocumentFragment();this.fetchHeaders("row",e,n,o,t,{success:this.handleHeadersFetchSuccessForSort.bind(this),error:this.handleCellsFetchError}),this.fetchCells(this.m_databody,e,this.m_startCol,t,this.m_endCol-this.m_startCol+1,{success:this.handleCellsFetchSuccessForSort.bind(this,n,o,i),error:this.handleCellsFetchError})},be.prototype.handleHeadersFetchSuccessForSort=function(e,t,i,n){var o,s,r,a,l,u,h,d,c,p,_;if(o=t.axis,r=t.start,s=t.header,_=t.endHeader,this.m_fetching[o]=!1,null!=e){for(a=e.getCount(),h=0,l=0,c=this.getMappedStyle("headercell")+" "+this.getMappedStyle("rowheadercell"),p=this.m_options.getRenderer("row");a-l>0;)u=r+l,l+=(d=this.buildLevelHeaders(s,u,0,0,this.m_startRowPixel+h,!0,n,p,e,"row",c,this.m_rowHeaderLevelCount)).count,h+=d.totalHeaderDimension;this.m_endRowHeader=this.m_startRowHeader+a-1,this.m_endRowHeaderPixel=this.m_startRowHeaderPixel+h}if(null!=i){for(a=i.getCount(),h=0,l=0,c=this.getMappedStyle("endheadercell")+" "+this.getMappedStyle("rowendheadercell"),p=this.m_options.getRenderer("rowEnd");a-l>0;)u=r+l,l+=(d=this.buildLevelHeaders(_,u,0,0,this.m_startRowPixel+h,!0,n,p,i,"rowEnd",c,this.m_rowEndHeaderLevelCount)).count,h+=d.totalHeaderDimension;this.m_endRowEndHeader=this.m_startRowEndHeader+a-1,this.m_endRowEndHeaderPixel=this.m_startRowEndHeaderPixel+h}this._signalTaskEnd()},be.prototype.handleCellsFetchSuccessForSort=function(e,t,i,n,o){var s,r,a,l,u,h,d,c,p,_;this.m_fetching.cells=!1,c=be.SORT_ANIMATION_DURATION,this.isFetchComplete()&&this.hideStatusText(),s=o[0].start,r=n.getCount("row"),a=o[1].start,n.getCount("column"),l=document.createDocumentFragment(),p=this._addCellsToFragment(l,n,s,this.m_startRowPixel,a,this.m_startColPixel),this.m_endRow=this.m_startRow+r-1,this.m_endRowPixel=this.m_startRowPixel+p.totalRowHeight,u=this.m_databody.firstChild,h=this.m_rowHeader.firstChild,d=this.m_rowEndHeader.firstChild,1==i&&(_=this._isHighWatermarkScrolling(),this.m_utils.isTouchDevice()?(this._disableTouchScrollAnimation(),this.scrollTo(this.m_currentScrollLeft,this.m_currentScrollTop)):(this.m_silentScroll=!0,this.m_databody.scrollTop=this.m_currentScrollTop,this._syncScroller())),!c||0==c||!this.m_utils.supportsTransitions()||1===r||this.m_rowHeaderLevelCount>1&&null!=this.m_rowHeaderLevelCount||!1===_?(this._signalTaskStart(),this._handleSortEnd(l,e,t)):this.processSortAnimationToPosition(c,0,"ease-in",h,e,u,l,d,t),this._signalTaskEnd()},be.prototype._handleSortEnd=function(e,t,i){var n,o;t.childNodes.length>1&&(n=this.m_rowHeader.firstChild,this.m_utils.empty(n),n.appendChild(t)),i.childNodes.length>1&&(n=this.m_rowEndHeader.firstChild,this.m_utils.empty(n),n.appendChild(i)),o=this.m_databody.firstChild,this._emptyDatabody(o),this._populateDatabody(o,e),this._fireSortEvent(),this._restoreActive(),this.m_isSorting=!1,this._doDelayedSort(),this.m_animating=!1,this._signalTaskEnd(),this._runModelEventQueue()},be.prototype.processSortAnimationToPosition=function(e,t,i,n,o,s,r,a,l){var u,h,d,c,p,_,m,g,f,v,C,y,b,S,E,T,D,A,I,O,w;for(u=this,this._signalTaskStart(),[],[],[],g=o.childNodes.length>1,S=l.childNodes.length>1,C=this.getResources().isRTLMode()?"right":"left",this._getViewportTop(),y=this._getViewportBottom(),O=this._getViewportLeft(),w=this._getViewportRight(),d={},I={},_=0;_<s.childNodes.length;_++)m=s.childNodes[_],h=this._getKey(m,"row"),A=(D=this.getElementDir(m,C))+this.getElementWidth(m),f=(c=this.getElementDir(m,"top"))+this.getElementHeight(m),this._isCellBoundryInViewport(D,A,c,f)&&(d.hasOwnProperty(h)?d[h].cell.push(m):(p=y,d[h]={cell:[m],oldTop:c,newTop:p}),p-c!=0&&(b=m));for(_=0;_<n.childNodes.length;_++)g&&(m=n.childNodes[_],h=this._getKey(m,"row"),f=(c=this.getElementDir(m,"top"))+this.getElementHeight(m),this._isCellBoundryInViewport(O,w,c,f)&&(p=y,d.hasOwnProperty(h)||(d[h]={oldTop:c,newTop:p}),d[h].rowHeader=m));for(_=0;_<a.childNodes.length;_++)g&&(m=a.childNodes[_],h=this._getKey(m,"row"),f=(c=this.getElementDir(m,"top"))+this.getElementHeight(m),this._isCellBoundryInViewport(O,w,c,f)&&(p=y,d.hasOwnProperty(h)||(d[h]={oldTop:c,newTop:p}),d[h].rowEndHeader=m));for(_=0;_<r.childNodes.length;_++)m=r.childNodes[_],h=this._getKey(m,"row"),p=this.getElementDir(m,"top"),d.hasOwnProperty(h)?d[h].newTop=p:(c=y,v=p+this.getElementHeight(m),A=(D=this.getElementDir(m,C))+this.getElementWidth(m),this._isCellBoundryInViewport(D,A,p,v)&&((E=m.cloneNode(!0))[this.getResources().getMappedAttribute("context")]=m[this.getResources().getMappedAttribute("context")],this.setElementDir(E,c,"top"),s.appendChild(E),I.hasOwnProperty(h)?I[h].cell.push(E):I[h]={cell:[E],oldTop:c,newTop:p,add:!0},p-c!=0&&(b=E)));for(_=0;_<o.childNodes.length;_++)if(g){var R=o.childNodes[_];h=this._getKey(R,"row"),d.hasOwnProperty(h)||(v=(p=this.getElementDir(R,"top"))+this.getElementHeight(R),c=y,this._isCellBoundryInViewport(O,w,p,v)&&((T=R.cloneNode(!0))[this.getResources().getMappedAttribute("context")]=R[this.getResources().getMappedAttribute("context")],this.setElementDir(T,c,"top"),n.appendChild(T),I.hasOwnProperty(h)||(I[h]={oldTop:c,newTop:p,add:!0}),I[h].rowHeader=T))}for(_=0;_<r.childNodes.length;_++)if(S){var x=o.childNodes[_];h=this._getKey(x,"row"),d.hasOwnProperty(h)||(v=(p=this.getElementDir(x,"top"))+this.getElementHeight(x),c=y,this._isCellBoundryInViewport(O,-1,p,v)&&((T=x.cloneNode(!0))[this.getResources().getMappedAttribute("context")]=x[this.getResources().getMappedAttribute("context")],this.setElementDir(T,c,"top"),a.appendChild(T),I[h].rowEndHeader=T,I.hasOwnProperty(h)||(I[h]={oldTop:c,newTop:p,add:!0})))}if(null!=b){var L=this._handleSortEnd.bind(this,r,o,l);u._onTransitionEnd(b,L,e),this.m_animating=!0,setTimeout(function(){var n,o,s,r;for(var a in d){if(r=d[a],o=t+"ms",n=r.newTop-r.oldTop,r.cell)for(s=0;s<r.cell.length;s++)u.addTransformMoveStyle(r.cell[s],e/2+"ms",o,i,0,n,0);g&&r.rowHeader&&u.addTransformMoveStyle(r.rowHeader,e/2+"ms",o,i,0,n,0),S&&r.rowEndHeader&&u.addTransformMoveStyle(r.rowEndHeader,e/2+"ms",o,i,0,n,0)}for(var a in I){if(r=I[a],o=t*s+"ms",n=r.newTop-r.oldTop,r.cell)for(s=0;s<r.cell.length;s++)u.addTransformMoveStyle(r.cell[s],e/2+"ms",o,i,0,n,0);g&&r.rowHeader&&u.addTransformMoveStyle(r.rowHeader,e/2+"ms",o,i,0,n,0),S&&r.rowEndHeader&&u.addTransformMoveStyle(r.rowEndHeader,e/2+"ms",o,i,0,n,0)}},0)}else this._handleSortEnd(r,o,l)},be.prototype._restoreActive=function(){var e,t,i,n,o,s,r;if(null!=this.m_active)if(n=this.m_active.axis,r=this.m_sortInfo.originalEvent,"cell"==this.m_active.type)null!=(e=this._getCellByKeys(this.m_active.keys))?(i=this.getCellIndexes(e),this._isSelectionEnabled()?this.selectAndFocus(i,r):this._setActiveByIndex(i,r)):(this._setActive(null,null,r,!0),this._isSelectionEnabled()&&this._clearSelection(r));else if("row"==n||"rowEnd"==n)if(o="row"==n?this.m_rowHeader:this.m_rowEndHeader,s="row"==n?this.getMappedStyle("rowheadercell"):this.getMappedStyle("rowendheadercell"),null!=(t=this._findHeaderByKey(this.m_active.key,o,s))){var a=t[this.getResources().getMappedAttribute("context")];this._setActive(t,{type:"header",axis:n,index:a.index,key:a.key,level:a.level},r)}else this._setActive(null,null,r)},be.prototype.getSortIconSize=function(){var e,t;return null==this.m_sortIconSize&&((e=document.createElement("div")).className=this.getMappedStyle("sortascending")+" "+this.getMappedStyle("icon")+" "+this.getMappedStyle("clickableicon"),e.style.visibilty="hidden",e.style.top="0px",e.style.visibilty="0px",this.m_root.appendChild(e),t=e.offsetWidth,this.m_root.removeChild(e),this.m_sortIconSize=t),this.m_sortIconSize},be.prototype._getSortIcon=function(e){return e.lastChild.firstChild},be.prototype._getSortContainer=function(e){return e.lastChild},be.prototype._fireSortEvent=function(){var e={event:this.m_sortInfo.event,ui:{header:this.m_sortInfo.key,direction:this.m_sortInfo.direction}};this.fireEvent("sort",e)},be.prototype._doDelayedSort=function(){null!=this.m_delayedSort?this._doHeaderSort(this.m_delayedSort.event,this.m_delayedSort.header,this.m_delayedSort.direction):this.fillViewport()},be.RESIZE_OFFSET=5,be.RESIZE_TOUCH_OFFSET=8,be.prototype.handleResize=function(e){var t;!1===this.m_isResizing?(null==(t=this.find(e.target,"header"))&&(t=this.find(e.target,"endheader")),null==t||t!=this.m_rowHeader&&t!=this.m_colHeader&&t!=this.m_rowEndHeader&&t!=this.m_colEndHeader||(this.m_cursor=this.manageHeaderCursor(e),null!=this.m_resizingElement&&("default"==this.m_cursor?(this.m_resizingElement.style.cursor="",null!=this.m_resizingElementSibling&&(this.m_resizingElementSibling.style.cursor="")):(this.m_resizingElement.style.cursor=this.m_cursor,null!=this.m_resizingElementSibling&&(this.m_resizingElementSibling.style.cursor=this.m_cursor))))):this.handleResizeMouseMove(e)},be.prototype.handleResizeMouseDown=function(e){return("col-resize"===this.m_cursor||"row-resize"===this.m_cursor)&&(this.m_isResizing=!0,this.m_utils.isTouchDevice()?(this.m_lastMouseX=e.touches[0].pageX,this.m_lastMouseY=e.touches[0].pageY):(document.addEventListener("mousemove",this.m_docMouseMoveListener,!1),document.addEventListener("mouseup",this.m_docMouseUpListener,!1),this.m_lastMouseX=e.pageX,this.m_lastMouseY=e.pageY),this.m_overResizeLeft=0,this.m_overResizeMinLeft=0,this.m_overResizeTop=0,this.m_overResizeMinTop=0,this.m_overResizeRight=0,this.m_overResizeBottom=0,this.m_orginalResizeDimensions={width:this.getElementWidth(this.m_resizingElement),height:this.getElementHeight(this.m_resizingElement)},!0)},be.prototype.handleResizeMouseUp=function(e){var t,i,n,o;!0===this.m_isResizing&&(o=this.getElementWidth(this.m_resizingElement),n=this.getElementHeight(this.m_resizingElement),o==this.m_orginalResizeDimensions.width&&n==this.m_orginalResizeDimensions.height||(t="col-resize"===this.m_cursor?this.m_resizingElement.style.width:this.m_resizingElement.style.height,i={event:e,ui:{header:this._getKey(this.m_resizingElement),oldDimensions:{width:this.m_orginalResizeDimensions.width,height:this.m_orginalResizeDimensions.height},newDimensions:{width:this.getElementWidth(this.m_resizingElement),height:this.getElementHeight(this.m_resizingElement)},size:t}},this.fireEvent("resize",i)),this.m_isResizing=!1,this.m_cursor="default",this.m_resizingElement.style.cursor="",null!=this.m_resizingElementSibling&&(this.m_resizingElementSibling.style.cursor=""),this.m_resizingElement=null,this.m_resizingElementMin=null,this.m_resizingElementSibling=null,this.m_orginalResizeDimensions=null,document.removeEventListener("mousemove",this.m_docMouseMoveListener,!1),document.removeEventListener("mouseup",this.m_docMouseUpListener,!1))},be.prototype._isDOMElementResizable=function(e){return null!=e&&"true"===e.getAttribute(this.getResources().getMappedAttribute("resizable"))},be.prototype.manageHeaderCursor=function(e){var t,i,n,o,s,r,a,l,u,h,d,c,p,_,m,g,f,v,C=e.target;if((C=this.find(e.target,"headercell"))||(C=this.find(e.target,"endheadercell")),!C)return"default";if(t=this.getHeaderCellAxis(C),h=this.getHeaderCellIndex(C),d=this.getHeaderCellLevel(C),"column"===t?(a="enable"===this.m_options.isResizable(t,"height"),r=this._isDOMElementResizable(C),c=this._getHeaderByIndex(h-1,d,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader),l=this._isDOMElementResizable(c),p=this._getHeaderByIndex(h,d-1,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader)):"row"===t?(r="enable"===this.m_options.isResizable(t,"width"),a=this._isDOMElementResizable(C),c=this._getHeaderByIndex(h-1,d,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader),l=this._isDOMElementResizable(c),p=this._getHeaderByIndex(h,d-1,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader)):"columnEnd"===t?(a="enable"===this.m_options.isResizable(t).height,r=this._isDOMElementResizable(C),c=this._getHeaderByIndex(h-1,d,this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader),l=this._isDOMElementResizable(c),p=this._getHeaderByIndex(h,d-1,this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader)):"rowEnd"===t&&(r="enable"===this.m_options.isResizable(t).width,a=this._isDOMElementResizable(C),c=this._getHeaderByIndex(h-1,d,this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader),l=this._isDOMElementResizable(c),p=this._getHeaderByIndex(h,d-1,this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader)),this.m_utils.isTouchDevice()?(n=e.touches[0].pageX,o=e.touches[0].pageY,s=be.RESIZE_TOUCH_OFFSET):(n=e.pageX,o=e.pageY,s=be.RESIZE_OFFSET),i=this.getHeaderEdgePixels(C),u=this.getResources().isRTLMode(),v="columnEnd"===t||"rowEnd"===t,_=n<i[0]+s,g=o<i[1]+s,m=n>i[2]-s,f=o>i[3]-s,"column"===t||"columnEnd"===t){if(r&&(u?_:m))return this.m_resizingElement=C,"col-resize";if(l&&(u?m:_)){if(this.m_resizingElement=c,this.m_resizingElementSibling=C,null!==this.m_resizingElement)return"col-resize"}else if(a){if(!v&&f||v&&g)return this.m_resizingElement=C,"row-resize";if(!v&&g||v&&f)return this.m_resizingElement=p,this.m_resizingElementSibling=C,"row-resize"}}else if("row"===t||"rowEnd"===t){if(a&&f)return this.m_resizingElement=C,"row-resize";if(l&&g&&(this.m_resizingElement=c,this.m_resizingElementSibling=C,null!==this.m_resizingElement))return"row-resize";if(r){if(!v&&(u?_:m)||v&&(u?m:_))return this.m_resizingElement=C,"col-resize";if((!v&&(u?m:_)||v&&(u?_:m))&&(this.m_resizingElement=p,this.m_resizingElementSibling=C,null!==this.m_resizingElement))return"col-resize"}}return"default"},be.prototype.handleResizeMouseMove=function(e){var t,i,n,o,s,r;this.m_currentMouseX=e.pageX,this.m_currentMouseY=e.pageY,this.m_utils.isTouchDevice()?(this.m_currentMouseX=e.touches[0].pageX,this.m_currentMouseY=e.touches[0].pageY):(this.m_currentMouseX=e.pageX,this.m_currentMouseY=e.pageY),t=this.m_utils.containsCSSClassName(this.m_resizingElement,this.getMappedStyle("colheadercell"))||this.m_utils.containsCSSClassName(this.m_resizingElement,this.getMappedStyle("colendheadercell"))?"column":"row",r=this.m_utils.containsCSSClassName(this.m_resizingElement,this.getMappedStyle("endheadercell")),"col-resize"===this.m_cursor?"column"===t?(i=this.calculateColumnHeaderWidth(this.m_resizingElement),n=this.getNewElementWidth("column",i,r),this.resizeColWidth(i,n)):"row"===t&&(i=this.getElementWidth(this.m_resizingElement),n=this.getNewElementWidth("row",i,r),this.resizeRowWidth(n,n-i,r)):"row-resize"===this.m_cursor&&("row"===t?(o=this.calculateRowHeaderHeight(this.m_resizingElement),s=this.getNewElementHeight("row",o,r),this.resizeRowHeight(o,s)):"column"===t&&(o=this.getElementHeight(this.m_resizingElement),s=this.getNewElementHeight("column",o,r),this.resizeColHeight(s,s-o,r))),this.buildCorners(),this.m_utils.isTouchDevice()&&this._moveTouchSelectionAffordance(),this.m_lastMouseX=this.m_currentMouseX,this.m_lastMouseY=this.m_currentMouseY},be.prototype.resizeColWidth=function(e,t){var i,n;0!=(i=t-e)&&(null!=this.m_databody.firstChild&&(n=this.getElementWidth(this.m_databody.firstChild)+i,this.setElementWidth(this.m_databody.firstChild,n)),this.resizeColumnWidthAndShift(i),this.m_endColPixel+=i,this.m_endColHeaderPixel+=i,this.m_endColEndHeaderPixel+=i,this.m_avgColWidth=n/this.getDataSource().getCount("column"),this.manageResizeScrollbars())},be.prototype.resizeRowHeight=function(e,t){var i,n;0!=(i=t-e)&&(null!=this.m_databody.firstChild&&(n=this.getElementHeight(this.m_databody.firstChild)+i,this.setElementHeight(this.m_databody.firstChild,n)),this.resizeRowHeightAndShift(i),this.m_endRowPixel+=i,this.m_endRowHeaderPixel+=i,this.m_endRowEndHeaderPixel+=i,this.m_avgRowHeight=n/this.getDataSource().getCount("row"),this.manageResizeScrollbars())},be.prototype.resizeColHeight=function(e,t,i){if(0!=t){var n=this.getHeaderCellLevel(this.m_resizingElement)+this.getHeaderCellDepth(this.m_resizingElement)-1;if(i?this.m_columnEndHeaderLevelHeights[n]+=t:this.m_columnHeaderLevelHeights[n]+=t,this.resizeColumnHeightsAndShift(t,n,i,!0),i)this.m_colEndHeaderHeight+=t,this.setElementHeight(this.m_colEndHeader,this.m_colEndHeaderHeight);else if(this.m_colHeaderHeight+=t,this.setElementHeight(this.m_colHeader,this.m_colHeaderHeight),0===this.m_headerLabels.column.length)this._resizeHeaderLabelDirs(n,t,["row"],"height");else if(n===this.m_columnHeaderLevelCount-1&&this.m_headerLabels.row.length){var o=e/2,s=this._getLabel("row",this.m_rowHeaderLevelCount-1),r=this._getLabel("column",this.m_columnHeaderLevelCount-1);this.setElementHeight(r,Math.ceil(o)),this._resizeHeaderLabelDirs(this.m_rowHeaderLevelCount-1,Math.floor(o)-this.getElementHeight(s),["row"],"height")}this.manageResizeScrollbars()}},be.prototype.resizeRowWidth=function(e,t,i){var n;0!=t&&(n=this.getHeaderCellLevel(this.m_resizingElement)+this.getHeaderCellDepth(this.m_resizingElement)-1,i?this.m_rowEndHeaderLevelWidths[n]+=t:this.m_rowHeaderLevelWidths[n]+=t,this.resizeRowWidthsAndShift(t,n,i),i?(this.m_rowEndHeaderWidth+=t,this.setElementWidth(this.m_rowEndHeader,this.m_rowEndHeaderWidth)):(this.m_rowHeaderWidth+=t,this.setElementWidth(this.m_rowHeader,this.m_rowHeaderWidth),n!==this.m_rowHeaderLevelCount-1&&0!==this.m_headerLabels.row.length||this._resizeHeaderLabelDirs(n,t,["column"],"width")),this.manageResizeScrollbars())},be.prototype._resizeHeaderLabelDirs=function(e,t,i,n){var o,s,r,a,l;for(s=0;s<i.length;s++)for(l=i[s],o=0;o<this.m_headerLabels[l].length;o++)a=this.m_headerLabels[l][o],r=this.getElementDir(a,n)+t,this.setElementDir(a,r,n)},be.prototype.getNewElementWidth=function(e,t,i,n){var o,s,r;return o=this._getMinValue("width",e),this.getElementWidth(this.m_databody),null==n&&(n=this.getResources().isRTLMode()?this.m_lastMouseX-this.m_currentMouseX:this.m_currentMouseX-this.m_lastMouseX),i&&"row"==e&&(n*=-1),s=t+n+this.m_overResizeLeft+this.m_overResizeMinLeft+this.m_overResizeRight,r=Math.round(this.getWidth()/2),s<o?(this.m_overResizeMinLeft+=n-o+t,s=o):(this.m_overResizeMinLeft=0,this.m_overResizeLeft=0),"row"===e&&(s>r?(this.m_overResizeRight+=n-r+t,s=r):this.m_overResizeRight=0),s},be.prototype.getNewElementHeight=function(e,t,i,n){var o,s,r;return o=this._getMinValue("height",e),"column"===e&&!i&&this.getHeaderCellLevel(this.m_resizingElement)+this.getHeaderCellDepth(this.m_resizingElement)===this.m_columnHeaderLevelCount&&this.m_headerLabels.row.length&&this.m_headerLabels.column.length&&(o+=this.getElementHeight(this.m_headerLabels.row[this.m_headerLabels.row.length-1])),this.getElementHeight(this.m_databody),null==n&&(n=this.m_currentMouseY-this.m_lastMouseY),i&&"column"==e&&(n*=-1),s=t+n+this.m_overResizeTop+this.m_overResizeMinTop+this.m_overResizeBottom,r=Math.round(this.getHeight()/2),s<o?(this.m_overResizeMinTop+=n-o+t,s=o):(this.m_overResizeMinTop=0,this.m_overResizeTop=0),"column"===e&&(s>r?(this.m_overResizeBottom+=n-r+t,s=r):this.m_overResizeBottom=0),s},be.prototype._getMinValue=function(e,t){var i,n,o,s,r,a,l,u,h,d;return o=this.m_resizingElement,n=this.getHeaderCellLevel(o),h=this.getHeaderCellDepth(o),d=this._getCellPaddingBorder(e,o),s=Math.max(this.m_utils.isTouchDevice()?2*be.RESIZE_TOUCH_OFFSET:2*be.RESIZE_OFFSET,d),"column"===t&&(1===this.m_columnHeaderLevelCount||"width"===e&&this.m_columnHeaderLevelCount===n+1||"height"===e&&1===h)||"row"===t&&(1===this.m_rowHeaderLevelCount||"height"===e&&this.m_rowHeaderLevelCount===n+1||"width"===e&&1===h)?s:(i=this.getHeaderCellIndex(o),r=this._getAttribute(this.m_resizingElement.parentNode,"extent",!0),a=this.getElementDir(o,e),"column"===t?"width"===e?(l=this._getHeaderByIndex(i+r-1,this.m_columnHeaderLevelCount-1,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader),u=this.getElementDir(l,e)):u=this._getColumnHeaderLevelHeight(n+h-1,o):"row"===t&&("height"===e?(l=this._getHeaderByIndex(i+r-1,this.m_rowHeaderLevelCount-1,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader),u=this.getElementDir(l,e)):u=this._getHeaderLevelDimension(n+h-1,o,this.m_rowHeaderLevelWidths,"width",1)),a-(u-s))},be.prototype._getCellPaddingBorder=function(e,t){var i,n,o,s;if(null==this.m_resizingElementMin){for(i=["top","right","bottom","left"],n="width"===e?1:0,o=0,s=window.getComputedStyle(t);n<4;n+=2)o+=parseFloat(s.getPropertyValue("padding-"+i[n])),o+=parseFloat(s.getPropertyValue("border-"+i[n]+"-width"));this.m_resizingElementMin=Math.round(o)}return this.m_resizingElementMin},be.prototype.manageResizeScrollbars=function(){var e,t,i,n,o,s,r,a,l,u,h,d,c,p,_,m,g,f,v,C,y,b,S,E,T,D,A,I=0,O=0;if(e=this.getWidth(),t=this.getHeight(),i=this.m_colHeader,C=this.m_colEndHeader,n=this.m_rowHeader,y=this.m_rowEndHeader,E=(o=this.m_databody).firstChild,b=t-(s=this.getColumnHeaderHeight())-this.getColumnEndHeaderHeight(),S=e-(a=this.getRowHeaderWidth())-this.getRowEndHeaderWidth(),m=this.m_utils.getScrollbarSize(),g=this.getResources().isRTLMode()?"right":"left",this._databodyEmpty()&&(null==this.m_empty?(T=this._buildEmptyText(),this.m_root.appendChild(T)):T=this.m_empty,A=this.getElementHeight(T),D=this.getElementWidth(T),A>this.getElementHeight(E)&&this.setElementHeight(E,A),D>this.getElementWidth(E)&&this.setElementWidth(E,D)),u=this.getElementWidth(o.firstChild),d=this.getElementHeight(o.firstChild),(p=this.isDatabodyHorizontalScrollbarRequired(S))?(_=this.isDatabodyVerticalScrollbarRequired(b-m),o.style.overflow="auto"):(_=this.isDatabodyVerticalScrollbarRequired(b))?(p=this.isDatabodyHorizontalScrollbarRequired(S-m),o.style.overflow="auto"):o.style.overflow="hidden",this.m_hasHorizontalScroller=p,this.m_hasVerticalScroller=_,-1!=this.m_endColEndHeader?(c=Math.min(d+(p?m:0),b),l=p?c-m:c):(c=b,l=Math.min(d,p?c-m:c)),-1!=this.m_endRowEndHeader?(h=Math.min(u+(_?m:0),S),r=_?h-m:h):(h=S,r=Math.min(u,_?h-m:h)),f=a+r+(_?m:0),v=s+l+(p?m:0),this.setElementDir(n,0,g),this.setElementDir(n,s,"top"),this.setElementHeight(n,l),this.setElementDir(y,f,g),this.setElementDir(y,s,"top"),this.setElementHeight(y,l),this.setElementDir(i,a,g),this.setElementWidth(i,r),this.setElementDir(C,a,g),this.setElementDir(C,v,"top"),this.setElementWidth(C,r),this.setElementDir(o,s,"top"),this.setElementDir(o,a,g),this.setElementWidth(o,h),this.setElementHeight(o,c),this.m_scrollWidth=u-r,this.m_scrollHeight=d-l,this.buildCorners(),this._adjustHeaderBorders(),this.m_utils.isTouchDevice()&&(this.m_currentScrollLeft>this.m_scrollWidth&&(I=this.m_scrollWidth-this.m_currentScrollLeft),this.m_currentScrollTop>this.m_scrollHeight&&(O=this.m_scrollHeight-this.m_currentScrollTop),0!=I||0!=O)){this._disableTouchScrollAnimation();var w=this.adjustTouchScroll(I,O);I=w[0],O=w[1],this.scrollDelta(I,O)}},be.prototype.resizeColumnWidthAndShift=function(e){var t,i,n,o;t=this.getResources().isRTLMode()?"right":"left",n=this.m_colHeader.style.display,o=this.m_colEndHeader.style.display,this.m_databody.style.display="none",this.m_colHeader.style.display="none",this.m_colEndHeader.style.display="none",i=this.getHeaderCellIndex(this.m_resizingElement),this.m_columnHeaderLevelCount>1&&this.m_resizingElement===this.m_resizingElement.parentNode.firstChild&&null!=this.m_resizingElement.nextSibling&&(i+=this._getAttribute(this.m_resizingElement.parentNode,"extent",!0)-1),this._shiftHeadersAlongAxisInContainer(this.m_colHeader.firstChild,i,e,t,this.getMappedStyle("colheadercell"),"column"),this._shiftHeadersAlongAxisInContainer(this.m_colEndHeader.firstChild,i,e,t,this.getMappedStyle("colendheadercell"),"column"),this._shiftCellsAlongAxis("column",e,i),this.m_databody.style.display="",this.m_colHeader.style.display=n,this.m_colEndHeader.style.display=o},be.prototype._shiftCellsAlongAxis=function(e,t,i,n){var o,s,r,a,l,u,h,d,c,p,_,m,g,f;if(o=[],null==n&&(n=!1),"row"==e?(s="height",m="top",r=this.m_endRow,a=this.m_startCol,l=this.m_endCol):(s="width",m=this.getResources().isRTLMode()?"right":"left",r=this.m_endCol,a=this.m_startRow,l=this.m_endRow),null!=this.m_databody.firstChild)for(g=a;g<=l;g++){u="row"===e?this.createIndex(i,g):this.createIndex(g,i);var v=i-(d=(h=this._getCellByIndex(u))[this.getResources().getMappedAttribute("context")]).indexes[e];p=(c=d.extents[e])-v,o[g]&&o[g][i]||!0===n||(this.setElementDir(h,this.getElementDir(h,s)+t,s),"row"==e?this._updateTempArray(o,!0,g,i,d.extents.column,c-v):this._updateTempArray(o,!0,g,i,d.extents.row,c-v));var C=i;for(!0!==n&&(C=i+p),f=C;f<=r;f++)o[g]&&o[g][f]||(u="row"===e?this.createIndex(f,g):this.createIndex(g,f),c=(d=(h=this._getCellByIndex(u))[this.getResources().getMappedAttribute("context")]).extents[e],_=this.getElementDir(h,m)+t,this.setElementDir(h,_,m),"row"==e?this._updateTempArray(o,!0,g,f,d.extents.column,c):this._updateTempArray(o,!0,g,f,d.extents.row,c))}},be.prototype.resizeRowHeightAndShift=function(e){var t,i,n;i=this.m_rowHeader.style.display,n=this.m_rowEndHeader.style.display,this.m_databody.style.display="none",this.m_rowHeader.style.display="none",this.m_rowEndHeader.style.display="none",t=this.getHeaderCellIndex(this.m_resizingElement),this.m_rowHeaderLevelCount>1&&this.m_resizingElement===this.m_resizingElement.parentNode.firstChild&&null!=this.m_resizingElement.nextSibling&&(t+=this._getAttribute(this.m_resizingElement.parentNode,"extent",!0)-1),this._shiftHeadersAlongAxisInContainer(this.m_rowHeader.firstChild,t,e,"top",this.getMappedStyle("rowheadercell"),"row"),this._shiftHeadersAlongAxisInContainer(this.m_rowEndHeader.firstChild,t,e,"top",this.getMappedStyle("rowendheadercell"),"row"),this._shiftCellsAlongAxis("row",e,t),this.m_databody.style.display="",this.m_rowHeader.style.display=i,this.m_rowEndHeader.style.display=n},be.prototype._shiftHeadersAlongAxisInContainer=function(e,t,i,n,o,s){var r,a,l,u,h,d,c,p,_=0;if(null!=(r=e.lastChild)){for((l=this.m_utils.containsCSSClassName(r,o))?(u=r.parentNode,a=r,h=this.getHeaderCellIndex(a)):(u=r,a=r.firstChild,h=this._getAttribute(u,"start",!0));t<h;)if(l)p=this.getElementDir(a,n)+i,this.setElementDir(a,p,n),r=r.previousSibling,l=this.m_utils.containsCSSClassName(r,o),u=r.parentNode,a=r,h=this.getHeaderCellIndex(a);else{for(d=u.getElementsByClassName(o),c=0;c<d.length;c++)p=this.getElementDir(d[c],n)+i,this.setElementDir(d[c],p,n);r=r.previousSibling,l=this.m_utils.containsCSSClassName(r,o),u=r,a=r.firstChild,h=this._getAttribute(u,"start",!0)}"column"==s?(_=this.getElementWidth(a)+i,this.setElementWidth(a,_)):"row"==s?(_=this.getElementHeight(a)+i,this.setElementHeight(a,_)):null==s&&(p=this.getElementDir(a,n)+i,this.setElementDir(a,p,n)),l||null==a.nextSibling?null!=s&&this.m_sizingManager.setSize(s,this._getKey(a),_):this._shiftHeadersAlongAxisInContainer(r,t,i,n,o,s)}},be.prototype.resizeColumnHeightsAndShift=function(e,t,i,n){var o,s,r,a;i?(o=this.m_colEndHeader,s=this.getMappedStyle("colendheadercell"),r="columnEnd",a="bottom"):(o=this.m_colHeader,s=this.getMappedStyle("colheadercell"),r="column",a="top"),o.style.display="none",this.m_databody.style.display="none",n&&this._shiftLabelsDir(this.m_headerLabels[r],e,t,a,r),this._shiftHeadersDirInContainer(o.firstChild,e,t,a,s,r),o.style.display="",this.m_databody.style.display=""},be.prototype.resizeRowWidthsAndShift=function(e,t,i){var n,o,s,r;i?(n=this.m_rowEndHeader,o=this.getMappedStyle("rowendheadercell"),s="rowEnd",r=this.getResources().isRTLMode()?"left":"right"):(n=this.m_rowHeader,o=this.getMappedStyle("rowheadercell"),s="row",r=this.getResources().isRTLMode()?"right":"left"),n.style.display="none",this.m_databody.style.display="none",this._shiftLabelsDir(this.m_headerLabels[s],e,t,r,s),this._shiftHeadersDirInContainer(n.firstChild,e,t,r,o,s),n.style.display="",this.m_databody.style.display=""},be.prototype._shiftLabelsDir=function(e,t,i,n,o){var s,r,a;for(s=0;s<e.length;s++)r=e[s],s===i&&("column"===o||"columnEnd"===o?(a=this.getElementHeight(r)+t,this.setElementHeight(r,a)):(a=this.getElementWidth(r)+t,this.setElementWidth(r,a))),s>i&&(a=this.getElementDir(r,n)+t,this.setElementDir(r,a,n))},be.prototype._shiftHeadersDirInContainer=function(e,t,i,n,o,s){var r,a,l,u,h,d,c,p;for(r=e.childNodes,a=0;a<r.length;a++)if(l=r[a],this.m_utils.containsCSSClassName(l,o))u=this.getHeaderCellLevel(l),p=this.getHeaderCellDepth(l),u<=i&&i<u+p?"column"===s||"columnEnd"===s?(d=this.getElementHeight(l)+t,this.setElementHeight(l,d)):(d=this.getElementWidth(l)+t,this.setElementWidth(l,d)):u>i&&(d=this.getElementDir(l,n)+t,this.setElementDir(l,d,n));else if((u=this._getAttribute(l,"level",!0))<=i)this._shiftHeadersDirInContainer(l,t,i,n,o,s);else for(h=l.getElementsByClassName(o),c=0;c<h.length;c++)d=this.getElementDir(h[c],n)+t,this.setElementDir(h[c],d,n)},be.prototype.handleContextMenuResize=function(e,t,i,n){var o,s,r,a,l,u,h,d,c;this.m_overResizeLeft=0,this.m_overResizeMinLeft=0,this.m_overResizeTop=0,this.m_overResizeMinTop=0,this.m_overResizeRight=0,this.m_overResizeBottom=0,d=(l=parseInt(i,10))-this.getElementWidth(n),c=l-this.getElementHeight(n),this.m_utils.containsCSSClassName(n,this.getMappedStyle("cell"))&&(n=t===this.m_resources.getMappedCommand("resizeHeight")?this.getHeaderFromCell(n,"row",!0):this.getHeaderFromCell(n,"column",!0)),this.m_resizingElement=n,o=this.getElementWidth(n),s=this.getElementHeight(n),h=this.m_utils.containsCSSClassName(this.m_resizingElement,this.getMappedStyle("endheadercell")),t===this.m_resources.getMappedCommand("resizeWidth")?o!==l&&(this.m_utils.containsCSSClassName(this.m_resizingElement,this.getMappedStyle("colheadercell"))||this.m_utils.containsCSSClassName(this.m_resizingElement,this.getMappedStyle("colendheadercell"))?this._isDOMElementResizable(this.m_resizingElement)&&this.resizeColWidth(o,this.getNewElementWidth("column",o,h,d)):this.resizeRowWidth(l,l-o,h)):t===this.m_resources.getMappedCommand("resizeHeight")&&s!==l&&(this.m_utils.containsCSSClassName(this.m_resizingElement,this.getMappedStyle("colheadercell"))||this.m_utils.containsCSSClassName(this.m_resizingElement,this.getMappedStyle("colendheadercell"))?this.resizeColHeight(l,l-s,h):this._isDOMElementResizable(this.m_resizingElement)&&this.resizeRowHeight(s,this.getNewElementHeight("row",s,h,c))),r=this.getElementWidth(n),a=this.getElementHeight(n),r==o&&a==s||(u={event:e,ui:{header:this._getKey(this.m_resizingElement),oldDimensions:{width:o,height:s},newDimensions:{width:r,height:a},size:l}},this.fireEvent("resize",u),this.buildCorners(),this.m_utils.isTouchDevice()&&this._moveTouchSelectionAffordance()),this.m_resizingElement=null,this.m_resizingElementMin=null},be.prototype.getHeaderEdgePixels=function(e){var t,i,n,o,s;return i=(t=this.findPos(e))[0],n=t[1],this.m_utils.containsCSSClassName(e,this.getMappedStyle("colheadercell"))?(o=this.calculateColumnHeaderWidth(e),s=this.getElementHeight(e)):(o=this.getElementWidth(e),s=this.calculateRowHeaderHeight(e)),[i,n,i+o,n+s]};var Se=function(){this.sizes={column:new Map,row:new Map}};Se.prototype.setSize=function(e,t,i){this.sizes[e].set(t,i)},Se.prototype.getSize=function(e,t){var n=this.sizes[e].get(t);return null!=n?n:(this.sizes[e].forEach(function(e,o,s){null==n&&i.Object.compareValues(o,t)&&(n=e)}),n)},Se.prototype.clear=function(){this.sizes.column.clear(),this.sizes.row.clear()};var Ee=function(e){this.scrollbarSize=-1,this.dataGrid=e;var t=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():null;this.os=this._determineOS(t),this.platform=this._determinePlatform(t)};Ee.IE_PLATFORM="ie",Ee.GECKO_PLATFORM="gecko",Ee.WEBKIT_PLATFORM="webkit",Ee.UNKNOWN_PLATFORM="unknown",Ee.EDGE_PLATFORM="edge",Ee.WINDOWS_OS="Windows",Ee.SOLARIS_OS="Solaris",Ee.MAC_OS="Mac",Ee.UNKNOWN_OS="Unknown",Ee.prototype._getMaxDivHeightForScrolling=function(){return null==this.m_maxDivHeightForScrolling&&this._setMaxValuesForScrolling(),this.m_maxDivHeightForScrolling},Ee.prototype._getMaxDivWidthForScrolling=function(){return null==this.m_maxDivWidthForScrolling&&this._setMaxValuesForScrolling(),this.m_maxDivWidthForScrolling},Ee.prototype._setMaxValuesForScrolling=function(){var e;if(this.platform===Ee.IE_PLATFORM||this.platform===Ee.EDGE_PLATFORM)return this.m_maxDivHeightForScrolling=1e6,void(this.m_maxDivWidthForScrolling=1e6);(e=document.createElement("div")).style.cssText="width:1000000000px;height:1000000000px;display:none;",document.body.appendChild(e),this.m_maxDivHeightForScrolling=parseInt(parseFloat(window.getComputedStyle(e).height)/2,10),this.m_maxDivWidthForScrolling=parseInt(parseFloat(window.getComputedStyle(e).width)/2,10),document.body.removeChild(e)},Ee.prototype.calculateScrollbarSize=function(){var e=document.createElement("div");e.style.cssText="width:100px;height:100px;overflow:scroll;position:absolute;top:-9999px;",document.body.appendChild(e),this.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)},Ee.prototype.getScrollbarSize=function(){return-1==this.scrollbarSize&&this.calculateScrollbarSize(),this.scrollbarSize},Ee.prototype.isTouchDevice=function(){if(null==this.isTouch){var e=navigator.userAgent.toLowerCase();-1!=e.indexOf("mobile")||-1!=e.indexOf("android")?this.isTouch=!0:this.isTouch=!1}return this.isTouch},Ee.prototype.addCSSClassName=function(e,t){var i,n,o;return i=!1,null!=t&&null!=e&&(n=e.className,-1==Ee._getCSSClassNameIndex(n,t)&&(o=n?t+" "+n:t,e.className=o,i=!0)),i},Ee.prototype.removeCSSClassName=function(e,t){var i,n,o,s,r,a,l;return i=!1,null!=t&&null!=e&&(n=e.className,-1!=(o=Ee._getCSSClassNameIndex(n,t))&&(s=o+t.length,r=0==o?null:n.substring(0,o),a=s==n.length?null:n.substring(s+1),l=null==r?null==a?"":a:null==a?r:r+a,e.className=l,i=!0)),i},Ee.prototype.containsCSSClassName=function(e,t){return null!=t&&null!=e&&-1!=Ee._getCSSClassNameIndex(e.className,t)},Ee._getCSSClassNameIndex=function(e,t){var i,n,o,s,r,a,l;if(!e||!e.indexOf)return-1;if(t===e)return 0;if(i=t.length,n=e.length,(o=e.indexOf(t))>=0){if(s=0==o||" "==e.charAt(o-1),a=(r=o+i)==n||" "==e.charAt(r),s&&a)return o;if((l=e.lastIndexOf(t))!=o)return s=e.charAt(l-1),a=(r=l+i)==n||" "==e.charAt(r),s&&a?l:e.indexOf(" "+t+" ")}return-1},Ee.prototype.ctrlEquivalent=function(e){return this.os===Ee.MAC_OS?e.metaKey:e.ctrlKey},Ee.prototype.getElementScrollLeft=function(e){var t,i;return this.dataGrid.getResources().isRTLMode()?this.platform==Ee.GECKO_PLATFORM||this.platform==Ee.IE_PLATFORM||this.platform==Ee.EDGE_PLATFORM?Math.abs(e.scrollLeft):(t=this.dataGrid.getScrollableWidth(),i=e.clientWidth,Math.max(0,t-i-e.scrollLeft)):e.scrollLeft},Ee.prototype.setElementScrollLeft=function(e,t){var i;this.dataGrid.getResources().isRTLMode()?this.platform===Ee.GECKO_PLATFORM?e.scrollLeft=-t:this.platform==Ee.IE_PLATFORM||this.platform==Ee.EDGE_PLATFORM?e.scrollLeft=t:(i=this.dataGrid.getScrollableWidth()-e.clientWidth-t,e.scrollLeft=i):e.scrollLeft=t},Ee.prototype._determineOS=function(e){if(e){if(-1!=e.indexOf("win"))return Ee.WINDOWS_OS;if(-1!=e.indexOf("mac"))return Ee.MAC_OS;if(-1!=e.indexOf("sunos"))return Ee.SOLARIS_OS}return Ee.UNKNOWN_OS},Ee.prototype._determinePlatform=function(e){if(e){if(-1!=e.indexOf("opera"))return Ee.UNKNOWN_PLATFORM;if(-1!=e.indexOf("trident")||-1!=e.indexOf("msie"))return Ee.IE_PLATFORM;if(-1!=e.indexOf("edge"))return Ee.EDGE_PLATFORM;if(-1!=e.indexOf("applewebkit")||-1!=e.indexOf("safari"))return Ee.WEBKIT_PLATFORM;if(-1!=e.indexOf("gecko/"))return Ee.GECKO_PLATFORM}return Ee.UNKNOWN_PLATFORM},Ee.prototype.getMousewheelEvent=function(){return"wheel"},Ee.prototype.getMousewheelScrollDelta=function(e){var t,i;return(t=e.deltaMode)==e.DOM_DELTA_PIXEL?i=-1:t!=e.DOM_DELTA_LINE&&t!=e.DOM_DELTA_PAGE||(i=-40),{deltaX:e.deltaX*i,deltaY:e.deltaY*i}},Ee.prototype.empty=function(e){for(;e.firstChild;)this.dataGrid._remove(e.firstChild)},Ee.prototype.supportsTransitions=function(){var e=(document.body||document.documentElement).style,t="transition";if(/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<11))return!1;if("string"==typeof e[t])return!0;var i=["Moz","webkit","Webkit","Khtml","O","ms"];t=t.charAt(0).toUpperCase()+t.substr(1);for(var n=0;n<i.length;n++)if("string"==typeof e[i[n]+t])return!0;return!1},Ee.prototype._isNodeEditableOrClickable=function(e,t){for(var i,n,o;null!=e&&e!=t;)if(i=e.nodeName,3!=e.nodeType){if(n=parseInt(e.getAttribute("tabIndex"),10),o=parseInt(e.getAttribute(this.dataGrid.getResources().getMappedAttribute("tabindex")),10),null!=n&&n>=0)return!(this.containsCSSClassName(e,this.dataGrid.getResources().getMappedStyle("cell"))||this.containsCSSClassName(e,this.dataGrid.getResources().getMappedStyle("headerlabel"))||this.containsCSSClassName(e,this.dataGrid.getResources().getMappedStyle("headercell"))||this.containsCSSClassName(e,this.dataGrid.getResources().getMappedStyle("endheadercell")));if(i.match(/^INPUT|SELECT|OPTION|BUTTON|^A\b|TEXTAREA/)&&(-1!=n||-1!=o))return!0;e=e.parentNode}else e=e.parentNode;return!1},Ee.prototype.shouldOffsetOutline=function(){return this.os==Ee.MAC_OS&&this.platform==Ee.WEBKIT_PLATFORM};var Te=function(e,t){this.options=e,this.rendererWrapperFunction=t};Te.prototype.extract=function(e,t,i,n){var o,s,r;return null!=e?(o=this.options[e],null!=t&&null!=o?(s=o[t],null!=i&&null!=s?(r=s[i],null!=n&&null!=r?r[n]:r):s):o):null},Te.prototype.evaluate=function(e,t){return"function"==typeof e?e.call(this,t):e},Te.prototype.getRawProperty=function(e,t,i){var n,o,s,r;return"row"==t||"column"==t||"rowEnd"==t||"columnEnd"==t?(n="header",o=t,i?(s="label",r=e):s=e):"cell"==t&&(n="cell",o=e),this.extract(n,o,s,r)},Te.prototype.getProperty=function(e,t,i,n){return void 0===i?this.extract(e,t,n):this.evaluate(this.getRawProperty(e,t,n),i)},Te.prototype.nullOrDefault=function(e,t){return null!=e?e:null!=t?t:null},Te.prototype.getRowBandingInterval=function(){var e=this.getProperty("bandingInterval","row");return null!=e?e:0},Te.prototype.getColumnBandingInterval=function(){var e=this.getProperty("bandingInterval","column");return null!=e?e:0},Te.prototype.getEmptyText=function(){return this.getProperty("emptyText")},Te.prototype.getHorizontalGridlines=function(){var e;return null!=(e=this.extract("gridlines","horizontal"))?e:"visible"},Te.prototype.getVerticalGridlines=function(){var e;return null!=(e=this.extract("gridlines","vertical"))?e:"visible"},Te.prototype.getScrollPosition=function(){var e=this.getProperty("scrollPosition");return null!=e?e:null},Te.prototype.getSelectionCardinality=function(){var e,t;return null==(e=this.getProperty("selectionMode"))?"none":null!=(t=e[this.getSelectionMode()])?t:"none"},Te.prototype.getSelectionMode=function(){var e,t;return null==(e=this.getProperty("selectionMode"))?"cell":null!=(t=e.row)&&"none"!=t?"row":"cell"},Te.prototype.getSelection=function(){return this.getProperty("selection")},Te.prototype.getCurrentCell=function(){return this.getProperty("currentCell")},Te.prototype.getEditMode=function(){return this.getProperty("editMode")},Te.prototype.isSortable=function(e,t){return this.nullOrDefault(this.getProperty("sortable",e,t),!1)},Te.prototype.isResizable=function(e,t,i){var n=this.extract("header",e,"resizable",t);return null!=i?this.evaluate(n,i):n},Te.prototype.isMoveable=function(e){return this.nullOrDefault(this.extract("dnd","reorder",e),!1)},Te.prototype.getInlineStyle=function(e,t,i){return this.getProperty("style",e,t,i)},Te.prototype.getStyleClass=function(e,t,i){return this.getProperty("className",e,t,i)},Te.prototype.getRenderer=function(e,t){return this.rendererWrapperFunction?this.rendererWrapperFunction(this.getRawProperty("renderer",e,t)):this.getRawProperty("renderer",e,t)},Te.prototype.getScrollPolicy=function(){var e=this.getProperty("scrollPolicy");return null==e&&(e="auto"),e},Te.prototype.getScrollPolicyOptions=function(){return this.getProperty("scrollPolicyOptions")},i.__registerWidget("oj.ojDataGrid",$.oj.baseComponent,{widgetEventPrefix:"oj",options:{bandingInterval:{row:0,column:0},data:null,gridlines:{horizontal:"visible",vertical:"visible"},scrollPosition:{x:0,y:0},selectionMode:{cell:"none",row:"none"},dnd:{reorder:{row:"disable"}},scrollPolicy:"auto",scrollPolicyOptions:{maxRowCount:500,maxColumnCount:500},selection:[],currentCell:null,editMode:"none",header:{row:{className:null,label:{renderer:null,className:null,style:null},renderer:null,resizable:{width:"disable",height:"disable"},sortable:"auto",style:null},column:{className:null,label:{renderer:null,className:null,style:null},renderer:null,resizable:{width:"disable",height:"disable"},sortable:"auto",style:null},columnEnd:{className:null,label:{renderer:null,className:null,style:null},renderer:null,resizable:{width:"disable",height:"disable"},style:null},rowEnd:{className:null,label:{renderer:null,className:null,style:null},renderer:null,resizable:{width:"disable",height:"disable"},style:null}},cell:{className:null,renderer:null,style:null},resize:null,sort:null,ready:null,scroll:null,beforeCurrentCell:null,beforeEdit:null,beforeEditEnd:null},_ComponentCreate:function(){this._super(),this.root=this.element[0],this.rootId=this.root.getAttribute("id"),this.grid=new be(this.root),this.grid.setVisibility(be.VISIBILITY_STATE_RENDER),$(this.root).addClass("oj-datagrid oj-component"),$(this.root).attr(i.Components._OJ_CONTAINER_ATTR,this.widgetName),this.redrawSet={data:"all",header:["className","renderer","style","template"]}},_AfterCreate:function(){var e=this;this._unregisterResizeListener(this.root),this._removeAllChildren(),this._super(),this.resources=new i.DataGridResources(this._GetReadingDirection(),this._getTranslation.bind(e),i.ThemeUtils.parseJSONFromFontFamily("oj-datagrid-option-defaults")),this._setDataSource(),this._setSelection(),null!=this.datasource&&(this.grid.SetDataSource(this.datasource),this._addContextMenu(),this._isCreate=!0,this.grid._addDataSourceEventListeners()),this._checkSelectionMode(this.options),this.grid.SetOptions(this.options,this._WrapCustomElementRenderer.bind(e)),this.grid.SetResources(this.resources),this.grid.SetCreateContextCallback(this._modifyContext.bind(e)),this.grid.SetFixContextCallback(this._FixRendererContext.bind(e)),this.grid.SetRemoveCallback(this._remove.bind(e)),this.grid.SetUniqueIdCallback(this._uniqueId.bind(e)),this.grid.SetCompareValuesCallback(this._compareValues.bind(e)),this.grid.SetNotReadyCallback(this._NotReady.bind(e)),this.grid.SetMakeReadyCallback(this._MakeReady.bind(e)),this.grid.SetOptionCallback(this.option.bind(e)),this.grid.SetSubtreeAttachedCallback(i.Components.subtreeAttached),this.grid.SetContextCallback(i.Context.getContext),this._focusable({applyHighlight:!0,setupHandlers:function(t,i){e.grid.SetFocusableCallback.call(e.grid,function(e){return t($(e))},function(e){return i($(e))})}}),this._registerEventListeners(),this._possiblyRenderOrRefresh()},_SetupResources:function(){this._super(),null!=this.datasource&&(this._isCreate||this.grid._addDataSourceEventListeners(),this.grid._addDomEventListeners(),this._registerResizeListener(this.root)),this._isCreate=!1},_ReleaseResources:function(){this._super(),this.grid._removeDataSourceEventListeners(),this.grid._removeDomEventListeners(),this._unregisterResizeListener(this.root)},_registerEventListeners:function(){var e=this;this.grid.addListener("resize",function(t){e._trigger("resize",t.event,t.ui)}),this.grid.addListener("select",function(t){e.option("selection",t.ui.selection,{_context:{originalEvent:t.event,internalSet:!0},changed:!0})}),this.grid.addListener("currentCell",function(t){e.option("currentCell",t.ui,{_context:{originalEvent:t.event,internalSet:!0},changed:!0})}),this.grid.addListener("beforeCurrentCell",function(t){return e._trigger("beforeCurrentCell",t.event,t.ui)}),this.grid.addListener("sort",function(t){var i=e._trigger2("sort",t.event,t.ui);e.grid.SetSortOriginalEvent(i.event)}),this.grid.addListener("keydown",function(t){return e._trigger("keydown",t.event,t.ui)}),this.grid.addListener("ready",function(t){e._trigger("ready",null,{})}),this.grid.addListener("scroll",function(t){e._trigger("scroll",t.event,t.ui)}),this.grid.addListener("beforeEdit",function(t){return e._trigger("beforeEdit",t.event,t.ui)}),this.grid.addListener("beforeEditEnd",function(t){return e._trigger("beforeEditEnd",t.event,t.ui)})},refresh:function(){this._super(),this._ReleaseResources(),this._removeAllChildren(),this._defaultContextMenu&&(this.options.contextMenu=null,this._defaultContextMenu=null),this._setDataSource(),null!=this.datasource&&(i.FlattenedTreeDataGridDataSource&&this.datasource instanceof i.FlattenedTreeDataGridDataSource&&(this.datasource.Destroy(),this.datasource.Init()),this.grid.SetDataSource(this.datasource),this._addContextMenu()),this.grid.SetOptions(this.options,this._WrapCustomElementRenderer.bind(this)),this.grid.SetResources(this.resources),this._SetupResources(),this.grid.getVisibility()!=be.VISIBILITY_STATE_RENDER&&this.grid.setVisibility(be.VISIBILITY_STATE_REFRESH),this._possiblyRenderOrRefresh()},_destroy:function(){$(this.root).removeAttr(i.Components._OJ_CONTAINER_ATTR),null!=this.datasource&&this.datasource.Destroy&&this.datasource.Destroy(),this.grid.destroy(),this._unregisterResizeListener(this.root),$(this.root).empty(),this._MakeReady()},_setOptions:function(e,t){var i;this.datasource?(i=this._handleOptionUpdate(e,t),this._super(e,t),"refresh"==i?this.refresh():"pass"==i&&this.grid.UpdateOptions(e,t)):(this._super(e,t),null!=e.data&&this.refresh())},_checkSelectionMode:function(e){var t=e.selectionMode;if(t&&t.row&&t.cell&&"none"!=t.row&&"none"!=t.cell)throw new Error("JET DataGrid does not support selectionMode on cell and row simultaneously.")},_NotifyShown:function(){this._super(),this._possiblyRenderOrRefresh()},_NotifyHidden:function(){this._super(),this.grid.getVisibility()===be.VISIBILITY_STATE_VISIBLE&&this.grid.setVisibility(be.VISIBILITY_STATE_HIDDEN)},_NotifyAttached:function(){this._super(),this._possiblyRenderOrRefresh()},_NotifyDetached:function(){this._super(),this.grid.getVisibility()===be.VISIBILITY_STATE_VISIBLE&&this.grid.setVisibility(be.VISIBILITY_STATE_HIDDEN)},_handleOptionUpdate:function(e,t){var i,n,o,s="ignore";for(i in e)switch(i){case"bandingInterval":case"currentCell":case"editMode":case"gridlines":case"scrollPosition":case"selection":s="pass";break;case"beforeCurrentCell":case"beforeEdit":case"beforeEditEnd":case"create":case"disabled":case"dnd":case"optionChange":case"ready":case"resize":case"rootAttributes":case"scroll":case"sort":break;case"selectionMode":this._checkSelectionMode(e),s="pass";break;case"cell":case"header":if(null!=(n=t.subkey)&&("resizable"==(o=n.split("."))[1]||"sortable"==o[1])){s="pass";break}case"contextMenu":case"data":case"scrollPolicy":default:return"refresh"}return s},_isResizeEnabled:function(e,t){return!(!this.options.header[e]||!this.options.header[e].resizable)&&"disable"!==this.options.header[e].resizable[t]},_isSortEnabled:function(e){return!!this.options.header[e]&&"disable"!==this.options.header[e].sortable},_removeAllChildren:function(){$(this.root).children("[slot!='contextMenu']").remove()},_GetDefaultContextMenu:function(){return this._defaultContextMenu},_addContextMenu:function(){var e,t,i,n,o;o=(e=this)._IsCustomElement(),(t=this._GetContextMenu())?(null==this._menuItemsSetByGrid&&(this._menuItemsSetByGrid=[]),i=(t=$(t)).find("[data-oj-command]"),n=[],i.each(function(){var t,i,s,r;(r=e._shouldUpdateListItem(this,o)).shouldUpdate&&(t=$(this).attr("data-oj-command").split("-"),o?(s=e._buildContextMenuLabel(t[t.length-1],o)[0],r.itemToUpdate?(r.itemToUpdate.textContent=s.textContent,n.push(r.itemToUpdate)):r.toFirstChild?(this.firstChild.appendChild(s),n.push(s)):(this.appendChild(s),n.push(s))):(i=e._buildContextMenuItem(t[t.length-1],o),$(this).replaceWith(i),n.push(i.children("a").get(0))))}),this._menuItemsSetByGrid=n,t.data("oj-ojMenu")&&(o?t[0].refresh():t.ojMenu("refresh"))):null!=this.datasource&&(t=this._createDefaultContextMenu())&&(this._defaultContextMenu=t[0]),t&&this._addMenuSelectListener(t)},_shouldUpdateListItem:function(e,t){var n,o,s=!1;if(t){if(null!=e.firstElementChild&&"opt"===e.firstElementChild.getAttribute("ojmenu")?(o=i.BaseCustomElementBridge.getSlotMap(e.firstElementChild),s=!0):o=i.BaseCustomElementBridge.getSlotMap(e),!o[""]||0===o[""].length)return{shouldUpdate:!0,toFirstChild:s};if(o[""]){var r=this._menuItemsSetByGrid.indexOf(o[""][0]);if(-1!=r)return{shouldUpdate:!0,itemToUpdate:this._menuItemsSetByGrid[r]}}return{shouldUpdate:!1}}return{shouldUpdate:0===(n=$(e).children("a")).length||-1!=this._menuItemsSetByGrid.indexOf(n.get(0))}},_addMenuSelectListener:function(e){var t=this._handleContextMenuSelect.bind(this);this._IsCustomElement()&&!this._defaultContextMenu?e[0].addEventListener("ojAction",t):e.on("ojselect",t)},_createDefaultContextMenu:function(){var e,t,n=null,o=null,s=null,r=null;if((e=$("<ul>")).css("display","none").attr("id",this.rootId+"contextmenu"),$(this.root).append(e),(this._isResizeEnabled("column","width")||this._isResizeEnabled("column","height")||this._isResizeEnabled("row","width")||this._isResizeEnabled("row","height"))&&(n=this._buildContextMenuItem("resize")),t=this.datasource.getCapability("sort"),this._isSortEnabled("column")&&("column"!==t&&"full"!==t||(o=this._buildContextMenuItem("sortCol"))),this._isSortEnabled("row")&&("row"!==t&&"full"!==t||(o=null!=o?o.add(this._buildContextMenuItem("sortRow")):this._buildContextMenuItem("sortRow"))),"enable"===this.options.dnd.reorder.row)switch(this.datasource.getCapability("move")){case"none":break;default:r=this._buildContextMenuListItem("cut").add(this._buildContextMenuListItem("paste"))}return this._isMultipleSelection()&&i.DomUtils.isTouchSupported()&&(this._discontiguousSelection=!1,s=this._buildContextMenuListItem("discontiguousSelection")),null!=n||null!=o||null!=r||null!=s?(e.append(n).append(o).append(r).append(s),e.ojMenu(),this.option("contextMenu",e.get(0),{_context:{internalSet:!0}}),e):null},_buildContextMenuItem:function(e,t){return"resize"===e?this._buildContextMenuListItem("resize",t).append($("<ul></ul>").append(this._buildContextMenuListItem("resizeWidth",t)).append(this._buildContextMenuListItem("resizeHeight",t))):"sortCol"===e?this._buildContextMenuListItem("sortCol",t).append($("<ul></ul>").append(this._buildContextMenuListItem("sortColAsc",t)).append(this._buildContextMenuListItem("sortColDsc",t))):"sortRow"===e?this._buildContextMenuListItem("sortRow",t).append($("<ul></ul>").append(this._buildContextMenuListItem("sortRowAsc",t)).append(this._buildContextMenuListItem("sortRowDsc",t))):-1!=Object.keys(this.resources.commands).indexOf(e)?$(this._buildContextMenuListItem(e,t)):void 0},_buildContextMenuListItem:function(e,t){var i=t?$("<oj-option></oj-option>"):$("<li></li>");return i.attr("data-oj-command",this._getMappedCommand(e)),i.append(this._buildContextMenuLabel(e,t)),i},_buildContextMenuLabel:function(e,t){var i="label"+e.charAt(0).toUpperCase()+e.slice(1);"discontiguousSelection"===e&&(i="labelEnableNonContiguous");var n=this._getTranslation(i);return t?$("<span>").text(n):$('<a href="#"></a>').text(n)},_getDataGridContextMenu:function(){var e=this._GetContextMenu();return e||this._GetDefaultContextMenu()},_getTranslation:function(e,t){return this.getTranslatedString(e,t)},_handleResizeDialog:function(e){var t=$("#"+this.rootId+"spinner").ojInputNumber("option","value");$("#"+this.rootId+"dialog").ojDialog("close"),this.grid.handleContextMenuReturn(this.contextMenuEvent,this.menuItemFunction,t),this.contextMenuEvent.target.focus()},_buildResizeDialog:function(e,t){var i,n,o,s,r;i=$("#"+this.rootId+"dialog"),o=$("#"+this.rootId+"spinner"),0===i.length||0===o.length?((i=$("<div>")).attr("id",this.rootId+"dialog"),n=$('<div class="oj-dialog-body"></div>'),s=$('<div class="oj-dialog-footer"></div>'),i.append(n).append(s),o=$('<input id="'+this.rootId+'spinner"/>'),r=$('<button id="'+this.rootId+'dialogsubmit"/>'),n.append(o),s.append(r),$(this.root).append(i),r.ojButton({component:"ojButton",label:this._getTranslation("labelResizeDialogSubmit")}),r.on("click",this._handleResizeDialog.bind(this)),o.ojInputNumber({component:"ojInputNumber",max:1e3,min:20,step:1,value:t}),i.ojDialog({initialVisibility:"show",title:e,position:{my:"center center",at:"center center",collision:"none",of:$(this.root)}})):(i=$("#"+this.rootId+"dialog"),o.ojInputNumber("option","value",t),i.ojDialog("option","title",e),i.ojDialog("open"))},_handleContextMenuSelect:function(e,t){var i,n,o;if(i=t?t.item:$(e.target),this.menuItemFunction=i.attr("data-oj-command"),this.menuItemFunction===this._getMappedCommand("sortColAsc")||this.menuItemFunction===this._getMappedCommand("sortColDsc")||this.menuItemFunction===this._getMappedCommand("cut")||this.menuItemFunction===this._getMappedCommand("paste"))this.grid.handleContextMenuReturn(this.contextMenuEvent,this.menuItemFunction,null);else if(this.menuItemFunction===this._getMappedCommand("resizeWidth")||this.menuItemFunction===this._getMappedCommand("resizeHeight"))0==(o=$(this.contextMenuEvent.target).closest("."+this._getMappedStyle("cell"))).length&&(o=$(this.contextMenuEvent.target).closest("."+this._getMappedStyle("headercell"))),0==o.length&&(o=$(this.contextMenuEvent.target).closest("."+this._getMappedStyle("endheadercell"))),o.length>0&&(n=this.menuItemFunction===this._getMappedCommand("resizeWidth")?o.outerWidth():o.outerHeight(),this._buildResizeDialog(t.item.text(),n));else if(this.menuItemFunction===this._getMappedCommand("discontiguousSelection")){this._discontiguousSelection=!this._discontiguousSelection,this.grid.handleContextMenuReturn(this.contextMenuEvent,this.menuItemFunction,this._discontiguousSelection);var s=this._discontiguousSelection?"labelDisableNonContiguous":"labelEnableNonContiguous";i.children().first().text(this._getTranslation(s))}},_NotifyContextMenuGesture:function(e,t,i){this.grid.handleContextMenuGesture(t,i,this._contextMenuGestureCallback.bind(this))},_contextMenuGestureCallback:function(e,t,i){var n,o,s;null!=e&&(this.contextMenuEvent=t.originalEvent,n=e.launcher,o=e.capabilities,this._manageContextMenu(o),s="keyboard"===i?{position:{of:n},launcher:$(n)}:{launcher:$(n)},this._OpenContextMenu(t,i,s))},_addContextMenuCapability:function(e){var t;(t=$(this._getDataGridContextMenu())).find("[data-oj-command="+e+"]").hasClass("oj-disabled")||t.find("[data-oj-command="+e+"]").addClass("oj-disabled")},_removeContextMenuCapability:function(e){$(this._getDataGridContextMenu()).find("[data-oj-command="+e+"]").removeClass("oj-disabled")},_manageContextMenu:function(e){var t,i;for(t in e)e.hasOwnProperty(t)&&(i=this.resources.getMappedCommand(t),"disable"===e[t]?this._addContextMenuCapability(i):this._removeContextMenuCapability(i))},_findCellIndex:function(e){return e[this._getMappedAttribute("context")].indexes},_getGrid:function(){return $(this.root)},_getColumnHeader:function(){return $("#"+this.rootId+"\\:columnHeader")},_getRowHeader:function(){return $("#"+this.rootId+"\\:rowHeader")},_setDataSource:function(){null!=this.options.data?this.datasource=this.options.data:this.datasource=null},_setSelection:function(){var e=this.options.selection;null!=e&&this.grid.SetSelection(e)},_modifyContext:function(e){e.component=i.Components.__GetWidgetConstructor(this.element,"ojDataGrid")},_setAccessibleContext:function(e){this.grid.SetAccessibleContext(e)},_unregisterResizeListener:function(e){e&&this._resizeHandler&&i.DomUtils.removeResizeListener(e,this._resizeHandler)},_registerResizeListener:function(e){e&&(null==this._resizeHandler&&(this._resizeHandler=this._handleResize.bind(this)),i.DomUtils.addResizeListener(e,this._resizeHandler))},_handleResize:function(e,t){e>0&&t>0&&(this._possiblyRenderOrRefresh(),this.grid.HandleResize(e,t))},getNodeBySubId:function(e){var t,i,n,o,s,r,a,l;if(null==e)return this.element?this.element[0]:null;if("oj-datagrid-cell"===(t=e.subId))n=e.rowIndex,o=e.columnIndex,l=$(this.grid._getCellByIndex({row:n,column:o}));else if("oj-datagrid-sort-icon"===t||"oj-datagrid-sort-ascending"===t||"oj-datagrid-sort-descending"===t||"oj-datagrid-header"===t){if(r=e.axis,s=e.index,a=null==e.level?0:e.level,"column"===r?i=this._getHeaderByIndex(s,a,$("#"+this.rootId+"\\:columnHeader"),this.grid.getStartColumnHeader()):"row"===r?i=this._getHeaderByIndex(s,a,$("#"+this.rootId+"\\:rowHeader"),this.grid.getStartRowHeader()):"columnEnd"===r?i=this._getHeaderByIndex(s,a,$("#"+this.rootId+"\\:columnEndHeader"),this.grid.getStartColumnEndHeader()):"rowEnd"===r&&(i=this._getHeaderByIndex(s,a,$("#"+this.rootId+"\\:rowEndHeader"),this.grid.getStartRowEndHeader())),null==i)return null;if("oj-datagrid-sort-icon"===t)return i.children("."+this._getMappedStyle("sortcontainer")).children().get(0);l="oj-datagrid-sort-ascending"===t?i.find("."+this._getMappedStyle("sortascending")):"oj-datagrid-sort-descending"===t?i.find("."+this._getMappedStyle("sortdescending")):i}else"oj-datagrid-header-label"===t&&(l=$(this.grid._getLabel(e.axis,e.level)));return null!=l&&l.length>0?l[0]:null},getSubIdByNode:function(e){var t,i,n,o,s;return(t=$(e).closest("."+this._getMappedStyle("cell"))).length>0?{subId:"oj-datagrid-cell",rowIndex:(s=this._findCellIndex(t[0])).row,columnIndex:s.column}:(0==(n=$(e).closest("."+this._getMappedStyle("headercell"))).length&&(n=$(e).closest("."+this._getMappedStyle("endheadercell"))),n.length>0?(i=n[0][this._getMappedAttribute("context")],{subId:$(e).hasClass(this._getMappedStyle("sortascending"))?"oj-datagrid-sort-ascending":$(e).hasClass(this._getMappedStyle("sortdescending"))?"oj-datagrid-sort-descending":"oj-datagrid-header",axis:i.axis,index:this._getHeaderIndex(n),level:i.level}):(o=$(e).closest("."+this._getMappedStyle("headerlabel"))).length>0?{subId:"oj-datagrid-header-label",axis:(i=o[0][this._getMappedAttribute("context")]).axis,level:i.level}:null)},getContextByNode:function(e){var t,n,o,s,r;return(t=$(e).closest("."+this._getMappedStyle("cell"))).length>0?(s=t[0][this._getMappedAttribute("context")],(r=i.CollectionUtils.copyInto({},s,void 0,!0)).subId="oj-datagrid-cell",r):(0==(n=$(e).closest("."+this._getMappedStyle("headercell"))).length&&(n=$(e).closest("."+this._getMappedStyle("endheadercell"))),n.length>0?(s=n[0][this._getMappedAttribute("context")],(r=i.CollectionUtils.copyInto({},s,void 0,!0)).subId="oj-datagrid-header",r.index=this._getHeaderIndex(n),r):(o=$(e).closest("."+this._getMappedStyle("headerlabel"))).length>0?(s=o[0][this._getMappedAttribute("context")],(r=i.CollectionUtils.copyInto({},s,void 0,!0)).subId="oj-datagrid-header-label",r):null)},_getMappedStyle:function(e){return this.resources.getMappedStyle(e)},_getMappedAttribute:function(e){return this.resources.getMappedAttribute(e)},_getMappedCommand:function(e){return this.resources.getMappedCommand(e)},_isDataGridSizingAvailable:function(){return null!=this.root.offsetParent},_possiblyRenderOrRefresh:function(){var e=this.grid.getVisibility();this._isDataGridSizingAvailable()?(e===be.VISIBILITY_STATE_RENDER?this.grid.render(this.root):e===be.VISIBILITY_STATE_REFRESH&&this.grid.refresh(this.root),this.grid.setVisibility(be.VISIBILITY_STATE_VISIBLE)):e===be.VISIBILITY_STATE_VISIBLE&&this.grid.setVisibility(be.VISIBILITY_STATE_HIDDEN)},_getHeaderByIndex:function(e,t,i,n){var o,s,r;return t<0?null:(o=i.children().first().children().last()).hasClass(this._getMappedStyle("headercell"))?i.children().first().children("."+this._getMappedStyle("headercell")).eq(e-n):o.hasClass(this._getMappedStyle("endheadercell"))?i.children().first().children("."+this._getMappedStyle("endheadercell")).eq(e-n):null==(s=this._getGroupingContainer(e,t,0,i.children().first().children()))?null:t<=parseInt(s.attr(this._getMappedAttribute("level")),10)+parseInt(s.children().eq(0).attr(this._getMappedAttribute("depth")),10)-1?s.children().eq(0):(r=e-(n=parseInt(s.attr(this._getMappedAttribute("start")),10))+1,s.children().eq(r))},_getGroupingContainer:function(e,t,i,n){var o,s,r,a,l;if(null==n.eq(1)||n.eq(1).hasClass(this._getMappedStyle("headercell"))||n.eq(1).hasClass(this._getMappedStyle("endheadercell")))return t===i?n.eq(0).parent():null;for(r=(a=n.parent().parent()).hasClass(this._getMappedStyle("header"))||a.hasClass(this._getMappedStyle("endheader"))?0:1;r<n.length;r++)if(o=parseInt(n.eq(r).attr(this._getMappedAttribute("start")),10),s=parseInt(n.eq(r).attr(this._getMappedAttribute("extent")),10),l=parseInt(n.eq(r).children().eq(0).attr(this._getMappedAttribute("depth")),10),e>=o&&e<o+s)return t<i+l?n.eq(r):this._getGroupingContainer(e,t,i+l,n.eq(r).children());return null},_getHeaderIndex:function(e){var t;if(e.parent().hasClass(this._getMappedStyle("groupingcontainer"))){if(t=parseInt(e.parent().attr(this._getMappedAttribute("start")),10),e.get(0)===e.parent().children(":first").get(0))return t;t--}else t=e.hasClass(this._getMappedStyle("rowheadercell"))?this.grid.getStartRowHeader():e.hasClass(this._getMappedStyle("colheadercell"))?this.grid.getStartColumnHeader():e.hasClass(this._getMappedStyle("colendheadercell"))?this.grid.getStartColumnEndHeader():this.grid.getStartRowEndHeader();return t+=e.index()},_getHeaderLevel:function(e){var t;return e.parent().hasClass(this._getMappedStyle("groupingcontainer"))?(t=parseInt(e.parent().attr(this._getMappedAttribute("level")),10),e.get(0)===e.parent().children(":first").get(0)?t:t+1):0},_isMultipleSelection:function(){return null!=this.options.selectionMode&&("multiple"===this.options.selectionMode.row||"multiple"===this.options.selectionMode.cell)},_remove:function(e){$(e).remove()},_uniqueId:function(e,t){t?$(e).removeUniqueId():$(e).uniqueId()},_compareValues:function(e,t){return i.Object.compareValues(e,t)},scrollTo:function(e){this.grid.scroll(e)},whenReady:function(){if(this._ready)return Promise.resolve(!0);if(!this._readyPromise){var e=this;this._readyPromise=new Promise(function(t){e._readyPromiseResolve=t})}return this._readyPromise},_NotReady:function(){if(this._ready=!1,!this._readyResolveFunc){var e=i.Context.getContext(this.element[0]).getBusyContext(),t={description:"The component identified by '"+this.element.attr("id")+"' is being loaded."};this._readyResolveFunc=e.addBusyState(t)}},_MakeReady:function(){this._readyPromiseResolve&&(this._readyPromiseResolve(!0),this._readyPromiseResolve=null),this._ready=!0,this._promise=null,this._readyResolveFunc&&(this._readyResolveFunc(),this._readyResolveFunc=null)},_CompareOptionValues:function(e,t,n){switch(e){case"currentCell":case"selection":return i.Object.compareValues(t,n);default:return this._super(e,t,n)}}}),be.prototype._setupActions=function(){this.actions={ACTIONABLE:this._handleActionable,EXIT_ACTIONABLE:this._handleExitActionable,TAB_NEXT_IN_CELL:this._handleActionableTab,TAB_PREV_IN_CELL:this._handleActionablePrevTab,EDITABLE:this._handleEditable,EXIT_EDITABLE:this._handleExitEditable,DATA_ENTRY:this._handleDataEntry,EXIT_DATA_ENTRY:this._handleExitDataEntry,EDIT:this._handleEdit,EXIT_EDIT:this._handleExitEdit,CANCEL_EDIT:this._handleCancelEdit,NO_OP:this._handleNoOp,EAT:this._handleEat,FOCUS_LEFT:this._handleFocusLeft,FOCUS_RIGHT:this._handleFocusRight,FOCUS_UP:this._handleFocusUp,FOCUS_DOWN:this._handleFocusDown,FOCUS_ROW_FIRST:this._handleFocusRowFirst,FOCUS_ROW_LAST:this._handleFocusRowLast,FOCUS_COLUMN_FIRST:this._handleFocusColumnFirst,FOCUS_COLUMN_LAST:this._handleFocusColumnLast,FOCUS_COLUMN_HEADER:this._handleFocusColumnHeader,FOCUS_COLUMN_END_HEADER:this._handleFocusColumnEndHeader,FOCUS_ROW_HEADER:this._handleFocusRowHeader,FOCUS_ROW_END_HEADER:this._handleFocusRowEndHeader,READ_CELL:this.readCurrentContent,SORT:this._handleSortKey,SELECT_DISCONTIGUOUS:this._handleSelectDiscontiguous,SELECT_EXTEND_LEFT:this._handleExtendSelectionLeft,SELECT_EXTEND_RIGHT:this._handleExtendSelectionRight,SELECT_EXTEND_UP:this._handleExtendSelectionUp,SELECT_EXTEND_DOWN:this._handleExtendSelectionDown,SELECT_ROW:this._handleSelectRow,SELECT_COLUMN:this._handleSelectColumn,SELECT_ALL:this._handleSelectAll,CUT:this._handleCut,CANCEL_REORDER:this._handleCancelReorder,PASTE:this._handlePaste}},be.prototype._getActionFromKeyDown=function(e,t,i){var n={cellOrHeader:t,isLabel:i,readOnly:!this._isCellEditable(),currentMode:this._getCurrentMode(),activeMove:null!=this.m_cutCells,rowMove:this._isMoveEnabled("row"),columnSort:"column"==t&&this._isDOMElementSortable(this._getActiveElement()),selection:this._isSelectionEnabled(),selectionMode:this.m_options.getSelectionMode(),multipleSelection:this.isMultipleSelection()};return this.actions[this.m_keyboardHandler.getAction(e,n)]},be.prototype.isActionableMode=function(){return"actionable"===this.m_currentMode},be.prototype.setActionableMode=function(e){this.m_currentMode=e?"actionable":"navigation",this._setAccInfoText(this.isActionableMode()?"accessibleActionableMode":"accessibleNavigationMode")},be.prototype._handleActionable=function(e,t){return this._enterActionableMode(t),!1},be.prototype._handleExitActionable=function(e,t){return this._exitActionableMode(),this._highlightActive(),!1},be.prototype._handleActionableTab=function(e,t){var i=this.getFocusableElementsInNode(t);return i.length>0&&e.target==i[i.length-1]&&(i[0].focus(),!0)},be.prototype._handleActionablePrevTab=function(e,t){var i=this.getFocusableElementsInNode(t);return i.length>0&&e.target==i[0]&&(i[i.length-1].focus(),!0)},be.prototype._getEditMode=function(){return null==this.m_editMode&&(this.m_editMode=this.m_options.getEditMode()),this.m_editMode},be.prototype._getCurrentMode=function(){return null==this.m_currentMode&&(this.m_currentMode="navigation"),this.m_currentMode},be.prototype._isEditOrEnter=function(){return"edit"===this._getCurrentMode()},be.prototype._isGridEditable=function(){var e=this._getEditMode();return"cellNavigation"===e||"cellEdit"===e},be.prototype._isCellEditable=function(){return"cellEdit"===this._getEditMode()},be.prototype._handleEditable=function(e,t){return this._isGridEditable()?(this.m_editMode=null,this.m_setOptionCallback("editMode","cellEdit",{_context:{writeback:!0,internalSet:!0}}),this.m_utils.removeCSSClassName(this.m_root,this.getMappedStyle("readOnly")),this.m_utils.addCSSClassName(this.m_root,this.getMappedStyle("editable")),this._updateEdgeCellBorders(""),this._setAccInfoText("accessibleEditableMode"),this._setEditableClone(t)):this._handleActionable(e,t),!1},be.prototype._handleExitEditable=function(e,t){this.m_editMode=null,this.m_setOptionCallback("editMode","cellNavigation",{_context:{writeback:!0,internalSet:!0}}),this.m_utils.addCSSClassName(this.m_root,this.getMappedStyle("readOnly")),this.m_utils.removeCSSClassName(this.m_root,this.getMappedStyle("editable")),this._updateEdgeCellBorders("none"),this._setAccInfoText("accessibleNavigationMode"),delete this.m_editableClone},be.prototype._handleDataEntry=function(e,t){var i;return i={event:e,ui:{cell:t,cellContext:t[this.getResources().getMappedAttribute("context")]}},this.fireEvent("beforeEdit",i)&&(this._reRenderCell(t,"edit",this.getMappedStyle("cellEdit"),this.m_editableClone),this._enableAllFocusableElements(t),this._overwriteFlag=!0,this._setFocusToFirstFocusableElement(t)?this.m_currentMode="edit":this.m_utils.removeCSSClassName(t,this.getMappedStyle("cellEdit")),this._overwriteFlag=!1),!1},be.prototype._handleExitDataEntry=function(e,t){return this._leaveEditing(e,t,!1)},be.prototype._handleEdit=function(e,t){var n,o;if(n={event:e,ui:{cell:t,cellContext:t[this.getResources().getMappedAttribute("context")]}},o=this.fireEvent("beforeEdit",n)){this._reRenderCell(t,"edit",this.getMappedStyle("cellEdit"),this.m_editableClone);var s=this;i.Context.getContext(t).getBusyContext().whenReady().then(function(){s._enableAllFocusableElements(t),s._setFocusToFirstFocusableElement(t)?s.m_currentMode="edit":s.m_utils.removeCSSClassName(t,s.getMappedStyle("cellEdit"))})}else o=!1,this._enterActionableMode(t);return o},be.prototype._handleExitEdit=function(e,t){return this._leaveEditing(e,t,!1)},be.prototype._handleCancelEdit=function(e,t){return!!this._leaveEditing(e,t,!0)&&(this._setEditableClone(t),!0)},be.prototype._leaveEditing=function(e,t,i){var n,o;return n={event:e,ui:{cell:t,cellContext:t[this.getResources().getMappedAttribute("context")],cancelEdit:i}},i||(this._disableAllFocusableElements(t),this._highlightActive()),(o=this.fireEvent("beforeEditEnd",n))?(this.m_currentMode="navigation",this._disableAllFocusableElements(t),this._highlightActive(),this._reRenderCell(t,"navigation",this.getMappedStyle("cellEdit"),this.m_editableClone)):(o=!1,this._scrollToActive(this.m_active),this._enableAllFocusableElements(t),this._setFocusToFirstFocusableElement(t)),o},be.prototype._handleFocusKey=function(e,t,i,n,o){var s,r,a,l=!0,u=!0;if(null!=this.m_active){if("cell"==this.m_active.type)return this._isEditOrEnter()?(s=!0,l=this._leaveEditing(e,t,!1),u=!1):this.isActionableMode()&&this._exitActionableMode(),!l||(a=this.m_active,r=this.handleFocusChange(i,n,e,u,o),this._isGridEditable()&&a!=this.m_active&&s&&this.m_utils.isTouchDevice()?this._handleDataEntry(e,this._getActiveElement()):r);if("header"==this.m_active.type)return this.handleHeaderFocusChange(i,e,n,o);if("label"==this.m_active.type)return this.handleLabelFocusChange(i,e,n,o)}return!1},be.prototype._handleFocusLeft=function(e,t){return this._handleFocusKey(e,t,be.keyCodes.LEFT_KEY,!1,!1)},be.prototype._handleFocusRight=function(e,t){return this._handleFocusKey(e,t,be.keyCodes.RIGHT_KEY,!1,!1)},be.prototype._handleFocusUp=function(e,t){return this._handleFocusKey(e,t,be.keyCodes.UP_KEY,!1,!1)},be.prototype._handleFocusDown=function(e,t){return this._handleFocusKey(e,t,be.keyCodes.DOWN_KEY,!1,!1)},be.prototype._handleFocusRowFirst=function(e,t){return this._handleFocusKey(e,t,be.keyCodes.PAGEUP_KEY,!1,!1)},be.prototype._handleFocusRowLast=function(e,t){return this._handleFocusKey(e,t,be.keyCodes.PAGEDOWN_KEY,!1,!1)},be.prototype._handleFocusColumnFirst=function(e,t){return this._handleFocusKey(e,t,be.keyCodes.HOME_KEY,!1,!1)},be.prototype._handleFocusColumnLast=function(e,t){return this._handleFocusKey(e,t,be.keyCodes.END_KEY,!1,!1)},be.prototype._handleFocusRowHeader=function(e,t){return this._handleFocusKey(e,t,be.keyCodes.LEFT_KEY,!1,!0)},be.prototype._handleFocusRowEndHeader=function(e,t){return this._handleFocusKey(e,t,be.keyCodes.RIGHT_KEY,!1,!0)},be.prototype._handleFocusColumnHeader=function(e,t){return this._handleFocusKey(e,t,be.keyCodes.UP_KEY,!1,!0)},be.prototype._handleFocusColumnEndHeader=function(e,t){return this._handleFocusKey(e,t,be.keyCodes.DOWN_KEY,!1,!0)},be.prototype._handleSelectRow=function(e,t){var i,n,o,s,r;if(!this._isSelectionEnabled()||!this.isMultipleSelection()&&"row"!=this.m_options.getSelectionMode())return!1;if(this.m_utils.containsCSSClassName(t,this.getMappedStyle("cell")))i=r=this.m_active.indexes.row,n=r,s=this.m_rowHeaderLevelCount-1;else{if(null==this.m_active||"header"!=this.m_active.type||-1==this.m_active.axis.indexOf("row"))return!1;this.m_active.axis,r=this.m_active.index,s=this.m_active.level,this.m_rowHeaderLevelCount-1===s?(i=r,n=r):(o=this._getActiveElement(),n=(i=this._getAttribute(o.parentNode,"start",!0))+this._getAttribute(o.parentNode,"extent",!0)-1)}return this.m_selectionFrontier&&this.m_selectionFrontier.axis&&-1!=this.m_selectionFrontier.axis.indexOf("column")?(this._handleSelectAll(e),!0):(this.setHeaderSelectionFrontier("row",n,r,s,t,!0),this._selectEntireRow(i,n,e),this._setAccInfoText("accessibleRowSelected",{row:r+1}),!0)},be.prototype._handleSelectColumn=function(e,t){var i,n,o,s,r;if(!this._isSelectionEnabled()||!this.isMultipleSelection()||"cell"!=this.m_options.getSelectionMode())return!1;if(this.m_utils.containsCSSClassName(t,this.getMappedStyle("cell")))i=r=this.m_active.indexes.column,n=r,s=this.m_columnHeaderLevelCount-1;else{if(null==this.m_active||"header"!=this.m_active.type||-1==this.m_active.axis.indexOf("column"))return!1;this.m_active.axis,r=this.m_active.index,s=this.m_active.level,this.m_columnHeaderLevelCount-1===s?(i=r,n=r):(o=this._getActiveElement(),n=(i=this._getAttribute(o.parentNode,"start",!0))+this._getAttribute(o.parentNode,"extent",!0)-1)}return this.m_selectionFrontier&&this.m_selectionFrontier.axis&&-1!=this.m_selectionFrontier.axis.indexOf("row")?(this._handleSelectAll(e),!0):(this.setHeaderSelectionFrontier("column",n,r,s,t,!0),this._selectEntireColumn(i,n,e),this._setAccInfoText("accessibleColumnSelected",{column:r+1}),!0)},be.prototype._handleSelectDiscontiguous=function(e,t){return this.setDiscontiguousSelectionMode(!this.m_discontiguousSelection),!0},be.prototype._handleExtendSelectionLeft=function(e,t){return this._handleFocusKey(e,t,be.keyCodes.LEFT_KEY,!0,!1)},be.prototype._handleExtendSelectionRight=function(e,t){return this._handleFocusKey(e,t,be.keyCodes.RIGHT_KEY,!0,!1)},be.prototype._handleExtendSelectionUp=function(e,t){return this._handleFocusKey(e,t,be.keyCodes.UP_KEY,!0,!1)},be.prototype._handleExtendSelectionDown=function(e,t){return this._handleFocusKey(e,t,be.keyCodes.DOWN_KEY,!0,!1)},be.prototype._handleSortKey=function(e,t){return"true"==t.getAttribute(this.getResources().getMappedAttribute("sortable"))?(this._handleKeyboardSort(t,e),!0):this._handleActionable(e,t)},be.prototype._handleNoOp=function(e,t){return!1},be.prototype._handleEat=function(e,t){return!0};var De=function(e){this.grid=e};De.prototype.getAction=function(e,t){var i,n,o,s,r,a,l,u,h,d,c,p,_,m;switch(i=e.keyCode,o=this.grid.m_utils.ctrlEquivalent(e),s=e.shiftKey,r=e.altKey,n=be.keyCodes,a=t.cellOrHeader,l=t.readOnly,u=t.currentMode,h=t.activeMove,d=t.rowMove,c=t.columnSort,p=t.selection,_=t.selectionMode,m=t.multipleSelection,i){case n.TAB_KEY:if("actionable"===u)return s?"TAB_PREV_IN_CELL":"TAB_NEXT_IN_CELL";if(!l)return s?"FOCUS_LEFT":"FOCUS_RIGHT";break;case n.ENTER_KEY:if("column"===a&&c)return"SORT";if(!r&&l&&"navigation"===u||"cell"!=a)return"ACTIONABLE";if(!l&&!r)return s?"FOCUS_UP":"FOCUS_DOWN";if(r&&l&&"navigation"===u)return"EDITABLE";if(!l&&("navigation"==u||"edit"===u))return"EDIT";break;case n.ESC_KEY:if("actionable"===u)return"EXIT_ACTIONABLE";if(h)return"CANCEL_REORDER";if(l){if(this.grid.m_discontiguousSelection)return"SELECT_DISCONTIGUOUS"}else{if("navigation"===u)return"EXIT_EDITABLE";if("edit"===u)return"CANCEL_EDIT"}break;case n.SPACE_KEY:if(-1!=a.indexOf("row")&&p&&("cell"==_&&m||"row"==_))return"SELECT_ROW";if(-1!=a.indexOf("column")&&p&&"cell"==_&&m)return"SELECT_COLUMN";if("cell"===a)if(l&&"navigation"===u){if(o&&p&&"cell"==_&&m)return"SELECT_COLUMN";if(s&&p&&("cell"==_&&m||"row"==_))return"SELECT_ROW"}else if("navigation"===u)return"DATA_ENTRY";break;case n.PAGEUP_KEY:if("edit"!==u)return"FOCUS_ROW_FIRST";break;case n.PAGEDOWN_KEY:if("edit"!==u)return"FOCUS_ROW_LAST";break;case n.END_KEY:if("edit"!==u)return"FOCUS_COLUMN_LAST";break;case n.HOME_KEY:if("edit"!==u)return"FOCUS_COLUMN_FIRST";break;case n.LEFT_KEY:if("actionable"===u)return"NO_OP";if("edit"!==u)return s&&p&&"cell"==_&&m?"SELECT_EXTEND_LEFT":o?"FOCUS_ROW_HEADER":"FOCUS_LEFT";break;case n.UP_KEY:if("actionable"===u)return"NO_OP";if("edit"!==u)return s&&p&&m?"SELECT_EXTEND_UP":o?"FOCUS_COLUMN_HEADER":"FOCUS_UP";break;case n.RIGHT_KEY:if("actionable"===u)return"NO_OP";if("edit"!==u)return s&&p&&"cell"==_&&m?"SELECT_EXTEND_RIGHT":o?"FOCUS_ROW_END_HEADER":"FOCUS_RIGHT";break;case n.DOWN_KEY:if("actionable"===u)return"NO_OP";if("edit"!==u)return s&&p&&m?"SELECT_EXTEND_DOWN":o?"FOCUS_COLUMN_END_HEADER":"FOCUS_DOWN";break;case n.F2_KEY:if("cell"!=a)return"ACTIONABLE";if(l&&"navigation"===u)return"EDITABLE";if(!l&&"navigation"==u)return"EDIT";break;case n.F8_KEY:if(s&&p&&m)return"SELECT_DISCONTIGUOUS";break;case n.F10_KEY:if(s)return"NO_OP";break;case n.V_KEY:if("navigation"===u&&o&&d)return"PASTE";if(!l&&"navigation"===u)return"DATA_ENTRY";break;case n.X_KEY:if("navigation"===u&&o&&d)return"CUT";if(!l&&"navigation"===u)return"DATA_ENTRY";break;case n.SHIFT_KEY:case n.CTRL_KEY:case n.ALT_KEY:break;case n.A_KEY:if(o&&p&&m)return"SELECT_ALL";case n.NUM5_KEY:if(o&&r)return"READ_CELL";default:if((i<n.F1_KEY||i>n.F15_KEY)&&!l&&"navigation"===u&&"cell"==a)return"DATA_ENTRY"}return"NO_OP"},i.CustomElementBridge.registerMetadata("oj-data-grid","baseComponent",{properties:{bandingInterval:{type:"object",properties:{row:{type:"number"},column:{type:"number"}}},cell:{type:"object",properties:{className:{type:"string|function"},renderer:{},style:{type:"string|function"}}},currentCell:{type:"object",writeback:!0},data:{},dnd:{type:"object",properties:{reorder:{type:"object",properties:{row:{type:"string",enumValues:["disable","enable"]}}}}},editMode:{type:"string",enumValues:["none","cellNavigation","cellEdit"]},gridlines:{type:"object",properties:{horizontal:{type:"string",enumValues:["visible","hidden"]},vertical:{type:"string",enumValues:["visible","hidden"]}}},header:{type:"object",properties:{column:{type:"object",properties:{className:{type:"string|function"},label:{type:"object",properties:{className:{type:"string|function"},renderer:{},style:{type:"string|function"}}},renderer:{},resizable:{type:"object",properties:{width:{type:"string|function",enumValues:["disable","enable"]},height:{type:"string|function",enumValues:["disable","enable"]}}},sortable:{type:"string|function",enumValues:["auto","disable","enable"]},style:{type:"string|function"}}},columnEnd:{type:"object",properties:{className:{type:"string|function"},label:{type:"object",properties:{className:{type:"string|function"},renderer:{},style:{type:"string|function"}}},renderer:{},resizable:{type:"object",properties:{width:{type:"string|function",enumValues:["disable","enable"]},height:{type:"string|function",enumValues:["disable","enable"]}}},sortable:{type:"string|function",enumValues:["auto","disable","enable"]},style:{type:"string|function"}}},row:{type:"object",properties:{className:{type:"string|function"},label:{type:"object",properties:{className:{type:"string|function"},renderer:{},style:{type:"string|function"}}},renderer:{},resizable:{type:"object",properties:{width:{type:"string|function",enumValues:["disable","enable"]},height:{type:"string|function",enumValues:["disable","enable"]}}},sortable:{type:"string|function",enumValues:["auto","disable","enable"]},style:{type:"string|function"}}},rowEnd:{type:"object",properties:{className:{type:"string|function"},label:{type:"object",properties:{className:{type:"string|function"},renderer:{},style:{type:"string|function"}}},renderer:{},resizable:{type:"object",properties:{width:{type:"string|function",enumValues:["disable","enable"]},height:{type:"string|function",enumValues:["disable","enable"]}}},sortable:{type:"string|function",enumValues:["auto","disable","enable"]},style:{type:"string|function"}}}}},scrollPolicy:{type:"string",enumValues:["auto","loadMoreOnScroll","scroll"]},scrollPolicyOptions:{type:"object",properties:{maxRowCount:{type:"number"},maxColumnCount:{type:"number"}}},scrollPosition:{writeback:!0,type:"object",properties:{rowIndex:{type:"number"},columnIndex:{type:"number"},rowKey:{type:"*"},columnKey:{type:"*"},x:{type:"number"},y:{type:"number"},offsetX:{type:"number"},offsetY:{type:"number"}}},selection:{type:"Array<object>",writeback:!0},selectionMode:{type:"object",properties:{row:{type:"string",enumValues:["none","single","multiple"]},cell:{type:"string",enumValues:["none","single","multiple"]}}},translations:{type:"Object",properties:{accessibleActionableMode:{type:"string"},accessibleColumnContext:{type:"string"},accessibleColumnEndHeaderContext:{type:"string"},accessibleColumnHeaderContext:{type:"string"},accessibleColumnSelected:{type:"string"},accessibleColumnSpanContext:{type:"string"},accessibleFirstColumn:{type:"string"},accessibleFirstRow:{type:"string"},accessibleLastColumn:{type:"string"},accessibleLastRow:{type:"string"},accessibleLevelContext:{type:"string"},accessibleMultiCellSelected:{type:"string"},accessibleNavigationMode:{type:"string"},accessibleRangeSelectModeOff:{type:"string"},accessibleRangeSelectModeOn:{type:"string"},accessibleRowCollapsed:{type:"string"},accessibleRowContext:{type:"string"},accessibleRowEndHeaderContext:{type:"string"},accessibleRowExpanded:{type:"string"},accessibleRowHeaderContext:{type:"string"},accessibleRowSelected:{type:"string"},accessibleRowSpanContext:{type:"string"},accessibleSelectionAffordanceBottom:{type:"string"},accessibleSelectionAffordanceTop:{type:"string"},accessibleSortAscending:{type:"string"},accessibleSortDescending:{type:"string"},accessibleStateSelected:{type:"string"},accessibleSummaryEstimate:{type:"string"},accessibleSummaryExact:{type:"string"},accessibleSummaryExpanded:{type:"string"},labelCut:{type:"string"},labelDisableNonContiguous:{type:"string"},labelEnableNonContiguous:{type:"string"},labelPaste:{type:"string"},labelResize:{type:"string"},labelResizeDialogSubmit:{type:"string"},labelResizeHeight:{type:"string"},labelResizeWidth:{type:"string"},labelSortCol:{type:"string"},labelSortColAsc:{type:"string"},labelSortColDsc:{type:"string"},labelSortRow:{type:"string"},labelSortRowAsc:{type:"string"},labelSortRowDsc:{type:"string"},msgFetchingData:{type:"string"},msgNoData:{type:"string"}}}},methods:{getContextByNode:{}},events:{beforeCurrentCell:{},beforeEdit:{},beforeEditEnd:{},resize:{},scroll:{},sort:{}},extension:{_WIDGET_NAME:"ojDataGrid"}}),i.CustomElementBridge.register("oj-data-grid",{metadata:i.CustomElementBridge.getMetadata("oj-data-grid")});var Ae,Ie={GENERATED_OPTIONS_SELECTOR:"oj-select-options-generated",KEY:{TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isControl:function(e){switch(e.which){case Ie.KEY.SHIFT:case Ie.KEY.CTRL:case Ie.KEY.ALT:return!0}return!(!e.metaKey&&!e.ctrlKey)},isFunctionKey:function(e){return(e=e.which?e.which:e)>=112&&e<=123}},DEFAULT_FETCH_SIZE:15,DEFAULT_QUERY_DELAY:70,ValueChangeTriggerTypes:{ENTER_PRESSED:"enter_pressed",OPTION_SELECTED:"option_selected",BLUR:"blur",SEARCH_ICON_CLICKED:"search_icon_clicked"},lastMousePosition:{x:0,y:0},nextUid:(Ae=1,function(){return Ae++}),scrollBarDimensions:null,each2:function(e,t){for(var i=$.isFunction(e[0])?$(e[0]()):$(e[0]),n=-1,o=e.length;++n<o&&(i.context=i[0]=$.isFunction(e[0])?e[n]():e[n])&&!1!==t.call(i[0],n,i););return e},measureScrollbar:function(){var e=$("<div class='oj-listbox-measure-scrollbar'></div>");e.appendTo("body");var t={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),t},splitVal:function(e,t){var i,n,o;if(null===e||e.length<1)return[];for(n=0,o=(i=e.split(t)).length;n<o;n+=1)i[n]=$.trim(i[n]);return i},getSideBorderPadding:function(e){return e.outerWidth(!1)-e.width()},installKeyUpChangeEvent:function(e){var t="keyup-change-value";e.on("keydown",function(){void 0===$.data(e,t)&&$.data(e,t,e.val())}),e.on("keyup",function(i){if(i.which!==Ie.KEY.ENTER){var n=$.data(e,t);void 0!==n&&e.val()!==n&&($.removeData(e,t),e.trigger("keyup-change"))}else i.preventDefault()})},getSearchText:function(e){var t,i=e.which||e.keyCode;return e&&"keydown"==e.type&&(32==i||i>47&&i<58||i>64&&i<91||i>95&&i<112||i>185&&i<193||i>218&&i<223)&&(i>=96&&i<=105&&(i-=48),t=String.fromCharCode(i),e.shiftKey||(t=t.toLowerCase()),e.preventDefault()),t},installFilteredMouseMove:function(e){e.on("mousemove",function(e){var t=Ie.lastMousePosition;void 0!==t&&t.x===e.pageX&&t.y===e.pageY||($(e.target).trigger("mousemove-filtered",e),Ie.lastMousePosition.x=e.pageX,Ie.lastMousePosition.y=e.pageY)})},thunk:function(e){var t,i=!1;return function(){return!1===i&&(t=e(),i=!0),t}},_focus:function(e,t){if(t[0]!==document.activeElement){var n=Ie._addBusyState(e.container,"setting focus");i.TimerUtils.getTimer(40).getPromise().then(function(){var e,i=t[0],o=t.val().length;t.focus(),t.is(":visible")&&i===document.activeElement&&(i.setSelectionRange?i.setSelectionRange(o,o):i.createTextRange&&((e=i.createTextRange()).collapse(!1),e.select())),n()})}},getCursorInfo:function(e){var t=0,i=0;if("selectionStart"in(e=$(e)[0]))t=e.selectionStart,i=e.selectionEnd-t;else if("selection"in document){e.focus();var n=document.selection.createRange();i=document.selection.createRange().text.length,n.moveStart("character",-e.value.length),t=n.text.length-i}return{offset:t,length:i}},killEvent:function(e){e.preventDefault()},killEventImmediately:function(e){e.preventDefault(),e.stopImmediatePropagation()},defaultEscapeMarkup:function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return String(e).replace(/[&<>"'\\]/g,function(e){return t[e]})},local:function(e,t){var i,n,o=e,s=function(e){return""+e.label};$.isArray(o)&&(o={results:n=o}),!1===$.isFunction(o)&&(n=o,o=function(){return n});var r=o();return r&&r.text&&(s=r.text,$.isFunction(s)||(i=r.text,s=function(e){return e[i]})),function(e){var i=e.term,n={results:[]};""!==i||t?(o()&&Ie.each2($(o().results),function(i,o){Ie._processData(e,o,n.results,t,!0,s)}),e.callback(n)):e.callback(o())}},createOptionTag:function(e,t,i,n){var o=$("<option>");return o.addClass("oj-listbox-result oj-listbox-result-selectable oj-listbox-results-depth-"+e),o.attr("role","option"),o.attr("id","oj-listbox-result-label-"+Ie.nextUid()),o.text(n(i)),o.attr("value",t),o},createOptgroupTag:function(e,t,i){var n=$("<optgroup>");return n.addClass("oj-listbox-results-sub"),n.attr("label",i(t)),e.addClass("oj-listbox-result-with-children"),n},listPopulateResults:function(e,t,i){var n=function(e,t,o){var s,r,a,l;t.each(function(t){(r=$(this)).is("li")&&(r.children("ul").length>0?(a=r.contents().filter(function(){return 1!==this.nodeType||"ul"!==this.tagName.toLowerCase()}).text(),s=Ie.createOptgroupTag(e,a,i),l=r.children("ul"),n(s,l.children(),o+1)):s=Ie.createOptionTag(o,r.attr("oj-data-value"),r.text(),i),s.appendTo(e))})};n(e,t,0)},ojOptionPopulateResults:function(e,t,i){var n=function(e,t,o){var s,r,a;t.each(function(t){(r=$(this)).is("oj-option")?(a=r.text()||r.attr("label"),s=Ie.createOptionTag(o,r.prop("value"),a,i)):r.is("oj-optgroup")?(a=r.text()||r.attr("label"),s=Ie.createOptgroupTag(e,a,i),n(s,r.children(),o+1)):r.is("option")&&(s=r),s.appendTo(e)})};n(e,t,0)},lookupOptionKeys:function(e,t,i){return e[i=t[i]||i]},arrayPopulateResults:function(e,t,i,n){var o=function(e,t,n,s){for(var r,a,l,u,h,d=0,c=t.length;d<c;d++)r=t[d],l=Ie.lookupOptionKeys(r,s,"children"),u=Ie.lookupOptionKeys(r,s,"label"),l&&l.length>0?(a=Ie.createOptgroupTag(e,u,i),o(a,l,n+1,s.childKeys||{})):(h=Ie.lookupOptionKeys(r,s,"value"),a=Ie.createOptionTag(n,h,u,i)),a.appendTo(e)};o(e,t,0,n||{})},cleanupResults:function(e){e.children().not("oj-option, oj-optgroup").remove(),e.removeClass("oj-listbox-result-with-children")},_addBusyState:function(e,t){var n={description:"The component identified by '"+e.attr("id")+"' "+t};return i.Context.getContext(e[0]).getBusyContext().addBusyState(n)},_clearBusyState:function(e){e&&e()},isDataProvider:function(e){return!(!e||!i.DataProviderFeatureChecker)&&i.DataProviderFeatureChecker.isIteratingDataProvider(e)},getDataProvider:function(e){var t=e._dataProvider||e.options;return Ie.isDataProvider(t)?t:null},clearDataProviderWrapper:function(e){e.options._dataProvider=null},_findOption:function(e,t){if(e.children){var n=Ie._findOption(e.children,t);if(n)return n}else if(i.Object.compareValues(t,e.value))return e;return null},findOption:function(e,t){if(Array.isArray(e)){for(var i=0,n=e.length;i<n;i++){var o=Ie._findOption(e[i],t);if(o)return o}return null}return Ie._findOption(e,t)},findOptions:function(e,t){for(var i=[],n=0;n<t.length;n++){var o=Ie.findOption(e,t[n]);o&&i.push(o)}return i},findOptionFromResult:function(e,t,i){var n,o=Ie.getLastQueryResult(e);return o&&(n=Ie.findOption(o,t)),n?{value:t,label:n.label}:i},mergeValueAndValueOptions:function(e){var t=e.options.value,i=!1;if(e.multiple){var n,o=e.options.valueOptions;if(t&&t.length>0)o&&o.length&&(n=Ie.findOptions(o,t)),n&&n.length===o.length||(i=!0);else o&&Ie.syncValueWithValueOptions(e,o,t)}else{var s,r=e.options.valueOption;if(null!=t)r&&(s=Ie.findOption(r,t)),s||(i=!0);else r&&Ie.syncValueWithValueOption(e,r,t)}return i},syncValueWithValueOption:function(e,t,n){var o=t?t.value:null;i.Object.compareValues(o,n)||e._SetValue(o,null,{doValueChangeCheck:!1,_context:{internalSet:!0,writeback:!0}})},syncValueWithValueOptions:function(e,t,n){if(t){for(var o=[],s=0;s<t.length;s++)o.push(t[s].value);i.Object.compareValues(o,n)||e._SetValue(o,null,{doValueChangeCheck:!1,_context:{internalSet:!0,writeback:!0}})}},setValueOptions:function(e,t){var i,n={internalSet:!0,changed:!0,writeback:!0};if(e.multiple){if(t&&t.length){i=[];for(var o=0;o<t.length;o++)i.push({value:t[o].value,label:t[o].label})}else i=t;e.option("valueOptions",i,{_context:n}),e.combobox&&e.combobox.opts?e.combobox.opts.valueOptions=i:e.select&&e.select.opts&&(e.select.opts.valueOptions=i)}else Array.isArray(t)&&(t=t[0]),t?(i={value:t.value,label:t.label},e.option("valueOption",{value:t.value,label:t.label},{_context:n})):i=t,e.option("valueOption",i,{_context:n}),e.combobox&&e.combobox.opts?e.combobox.opts.valueOption=i:e.select&&e.select.opts&&(e.select.opts.valueOption=i)},updateValueOptions:function(e){if(e){var t=e.datalist?e.datalist:e.opts.element;e.opts.initSelection.call(null,t,function(t){var i=e.ojContext.multiple;if(void 0===t&&"oj-combobox"===e._classNm){var n=e.ojContext.options.value;if(i){t=[];for(var o=0;o<n.length;o++)t.push(e.opts.manageNewEntry(n[o]))}else t=e.opts.manageNewEntry(n)}t&&(e.setValOpts(t),i?e._updateSelection(t):e._updateSelectedOption(t))})}},applyValueOptions:function(e,t){if(e&&!e.ojContext._resolveValueOptionsLater&&("oj-combobox"===e._classNm||"oj-select"===e._classNm)){var i;if(e.ojContext.multiple){if((i=t.valueOptions)&&0==i.length&&t.placeholder)return!1}else i=t.valueOption;if(i)return e._updateSelection(i),!0}return!1},wrapDataProviderIfNeeded:function(e,t){var n=e.options.options;if(Ie.isDataProvider(n)){var o,s=e.options.optionsKeys;if(!s||null==s.label&&null==s.value)i.DataProviderFeatureChecker.isFetchByKeys(n)||n instanceof i.ListDataProviderView||(o=new i.ListDataProviderView(n));else if(!(n instanceof i.ListDataProviderView)){o=new i.ListDataProviderView(n,{dataMapping:{mapFields:function(e){var t=e.data,i={data:{}};for(var n in t)i.data[n]=t[n];return null!=s.label&&(i.data.label=t[s.label]),null!=s.value&&(i.data.value=t[s.value]),i.metadata={key:t[s.value]},i}}})}o&&(e.options._dataProvider=o,t&&(t._dataProvider=o))}},getLabel:function(e){return null!=e.label?e.label:String(e.value)},_handleDataProviderEvents:function(e,t){if("mutate"===t.type&&null!=t.detail.remove){for(var i=t.detail.remove.data,n=!1,o=[].concat(e.options.value),s=0;s<i.length;s++){var r=o.indexOf(i[s].value);r>=0&&(o.splice(r,1),n=!0)}n&&e._setOption("value",o)}e._setOption("options",e.options.options)},addDataProviderEventListeners:function(e){var t=Ie.getDataProvider(e.options);if(t){Ie.removeDataProviderEventListeners(e);var i=Ie._handleDataProviderEvents.bind(null,e);e._saveDataProviderEH=i,t.addEventListener("mutate",i),t.addEventListener("refresh",i)}},removeDataProviderEventListeners:function(e){var t=Ie.getDataProvider(e.options),i=e._saveDataProviderEH;null!=t&&i&&(t.removeEventListener("mutate",i),t.removeEventListener("refresh",i),e._saveDataProviderEH=void 0)},addLoadingIndicator:function(e){if(null==e._saveLoadingIndicator){var t=$(document.createElement("div"));t.uniqueId().attr("role","presentation").addClass("oj-listbox-loading-icon-container");var i=$(document.createElement("div"));i.addClass("oj-icon oj-listbox-loading-icon"),t.append(i),e.prepend(t),e._saveLoadingIndicator=t}},removeLoadingIndicator:function(e){null!=e._saveLoadingIndicator&&e._saveLoadingIndicator.remove(),e._saveLoadingIndicator=void 0},addDropdownMessage:function(e,t,i){if(!e._saveDropdownMessage){var n=$(document.createElement("div"));n.addClass("oj-listbox-filter-message-box");var o=$(document.createElement("div"));o.addClass("oj-listbox-filter-message-text oj-listbox-liveregion"),o.attr({role:"region","aria-live":"polite"});var s=$(document.createElement("div"));s.addClass("oj-listbox-filter-message-separator"),n.append(o),n.append(s),e.prepend(n),o.text(i),e._saveDropdownMessage=n}},removeDropdownMessage:function(e){e._saveDropdownMessage&&(e._saveDropdownMessage.remove(),e._saveDropdownMessage=void 0)},fetchFilteredData:function(e,t,n,o,s){var r=[],a={size:t},l=e.getCapability("filter"),u=i.AttributeFilterOperator.AttributeOperator.$co,h=!1;if(l){var d=l.operators;if(d&&d.length>0)for(var c=0;c<d.length;c++)if(d[c]===u){h=!0;break}}if(h&&o&&o.term){var p,_=n.options.optionsKeys;p=_&&_.label?_.label:"label",a.filterCriterion={op:u,attribute:p,value:o.term}}var m=e.fetchFirst(a)[Symbol.asyncIterator]();return m.next().then(function e(t){if(t){var i=t.value.data;if(i)if(h)r=i;else for(var l,u=0;u<i.length;u++)l=i[u],o&&o.matcher&&!o.matcher(o.term,l.label,l)||r.push(l);if(s&&Ie.removeDropdownMessage(s),s&&!t.done&&r.length>=a.size)Ie.addDropdownMessage(s,n,n.getTranslatedString("filterFurther")),n._hasMore=!0;else{if(!t.done&&r.length<a.size)return m.next().then(e);n._hasMore=!1}}return Promise.resolve(r)})},rejectedError:new Object,fetchFromDataProvider:function(e,t,i,n){var o=e.ojContext,s=e.selection;o._fetchResolveFunc||(o._fetchResolveFunc=Ie._addBusyState(e.container,"fetching data")),o._saveRejectFunc&&o._saveRejectFunc(Ie.rejectedError);var r=new Promise(function(e,t){o._saveRejectFunc=t});s&&"init"==t.fetchType&&(Ie.addLoadingIndicator(s),t.fetchType=null);var a=Ie.fetchFilteredData(Ie.getDataProvider(t),n||t.fetchSize||Ie.DEFAULT_FETCH_SIZE,o,i,e.dropdown).then(function(e){return s&&Ie.removeLoadingIndicator(s),o._resultCount=e?e.length:0,e});Promise.race([r,a]).then(function(t){o._saveRejectFunc=null,o._resolveSearchBoxLater&&e._showSearchBox(""),i.callback({results:t}),o._fetchResolveFunc&&(o._fetchResolveFunc(),o._fetchResolveFunc=null)},function(e){e!==Ie.rejectedError&&o._fetchResolveFunc&&(i.callback(),o._fetchResolveFunc(),o._fetchResolveFunc=null)})},fetchFirstBlockFromDataProvider:function(e,t,i){var n=Ie._addBusyState(e,"fetching selected data"),o={size:i||Ie.DEFAULT_FETCH_SIZE};return t.fetchFirst(o)[Symbol.asyncIterator]().next().then(function(e){return Ie._clearBusyState(n),e.value.data},function(e){return Ie._clearBusyState(n),null})},fetchByKeyFromDataProvider:function(e,t,n){if(i.DataProviderFeatureChecker.isFetchByKeys(t)){var o=Ie._addBusyState(e,"fetching selected data");t.fetchByKeys({keys:n.value}).then(function(e){var t=[];e.results.forEach(function(e,i,n){t.push(e.data)}),n.callback({results:t}),Ie._clearBusyState(o)},function(e){n.callback(),Ie._clearBusyState(o)})}},validateFromDataProvider:function(e,t,i){return new Promise(function(n,o){Ie.fetchByKeyFromDataProvider(e,t,{value:Array.isArray(i)?i:[i],callback:function(e){var t=null;if(e&&e.results.length){(t={}).value=[],t.valueOptions=[];for(var i=0;i<e.results.length;i++)t.valueOptions.push(e.results[i]),t.value.push(e.results[i].value)}n(t)}})})},remote:function(e,t){return function(i){var n={component:this.ojContext};i.value?n.value=i.value:n.term=i.term||"",e(n).then(function(e){var n={results:[]};e&&Ie.each2($(e),function(e,o){Ie._processData(i,o,n.results,t,!1)}),i.callback(n)})}},_processData:function(e,t,i,n,o,s){var r,a;if(!(t=t[0]).label&&n&&n.label&&(t.label=t[n.label]),!t.value&&n&&n.value&&(t.value=t[n.value]),!t.children&&n&&n.children&&(t.children=t[n.children],delete t[n.children]),t.children){for(a in r={},t)t.hasOwnProperty(a)&&(r[a]=t[a]);r.children=[],Ie.each2($(t.children),function(t,i){Ie._processData(e,i,r.children,n&&n.childKeys?n.childKeys:null,o,s)}),(!o||e.matcher(e.term,s(r),t)||r.children.length)&&i.push(r)}else o&&!e.matcher(e.term,s(t),t)||i.push(t)},checkFormatter:function(e,t,i){if($.isFunction(t))return!0;if(!t)return!1;throw new Error(i+" must be a function or a false value")},clazz:function(e,t){var n=function(){};return i.Object.createSubclass(n,e,""),n.prototype=$.extend(n.prototype,t),n},LAST_QUERY_RESULT:"last-query-result",getLastQueryResult:function(e){return $.data(e.container,e._classNm+"-"+Ie.LAST_QUERY_RESULT)},saveLastQueryResult:function(e,t){$.data(e.container,e._classNm+"-"+Ie.LAST_QUERY_RESULT,t)}},Oe=Ie.clazz(Object,{_bind:function(e){var t=this;return function(){e.apply(t,arguments)}},_customOptionRenderer:function(e){var t,i=this;e.each(function(e){(t=$(this)).is("oj-option")?t.wrap("<li></li>"):t.is("oj-optgroup")&&(t.wrap("<li></li>"),i._customOptionRenderer(t.children()),t.children().wrapAll("<ul class='oj-listbox-result-sub'></ul>"))})},_init:function(e){var t,i,n=this._classNm,o=this._elemNm;this.ojContext=e.ojContext,this.opts=e=this._prepareOpts(e),this.id=e.id,this.headerInitialized=!1,this.isOjOption=this.ojContext._IsCustomElement()&&!e.options&&e.element.find("oj-option").length>0,void 0!==e.element.data(o)&&null!==e.element.data(o)&&e.element.data(o)._destroy(),this.container=this._createContainer();var s=e.rootAttributes;this.containerId=s&&s.id?s.id:"ojChoiceId_"+(this._getAttribute("id")||"autogen"+Ie.nextUid()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=Ie.thunk(function(){return e.element.closest("body")}),this.container.attr("style",this._getAttribute("style")),this.elementTabIndex=this._getAttribute("tabindex"),this.opts.element.data(o,this).attr("tabindex","-1").before(this.container),this.container.data(o,this),this.dropdown=this.container.find(".oj-listbox-drop"),this.dropdown.data("ojlistbox",this),this._setPickerAttributes(e.pickerAttributes);var r=this.containerId;this.dropdown.attr("data-oj-containerid",r),this.results=t=this.container.find(".oj-listbox-results"),this.results.on("click",Ie.killEvent);var a=this.ojContext._GetLabelElement();if(a){var l=a.attr("id");l?t.attr("aria-labelledby",l):t.attr("aria-label",a.text())}else{var u=this.ojContext.element.attr("aria-label");u&&t.attr("aria-label",u)}if(e.list&&$("#"+e.list).is("ul")){var h=$("#"+e.list);this.dropdownListParent=h.parent(),h.addClass("oj-listbox-results").attr("role","listbox"),this.results.replaceWith(h),this.results=t=this.container.find(".oj-listbox-results"),this.results.css("display","")}if(this.isOjOption){var d=e.element.children();this._customOptionRenderer(d),this.results.append(e.element.children()),this.datalist=this.results}i="oj-select"==n?this.container.find("input.oj-listbox-input"):this.container.find("input."+n+"-input"),this.search=i,this.queryCount=0,this.resultsPage=0,this.context=null,this._initContainer(),this.container.on("click",Ie.killEvent),Ie.installFilteredMouseMove(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",".oj-listbox-results",this._bind(this._highlightUnderEvent)),$(this.container).on("change","."+n+"-input",function(e){e.stopPropagation()}),$(this.dropdown).on("change","."+n+"-input",function(e){e.stopPropagation()});var c=this;if(Ie.installKeyUpChangeEvent(i),i.on("keyup-change input paste",this._bind(this._updateResults)),i.on("focus",function(){i.addClass(n+"-focused"),"oj-select"!==n&&c.container.addClass("oj-focus")}),i.on("blur",function(){i.removeClass(n+"-focused"),"oj-select"!==n&&c.container.removeClass("oj-focus")}),this.dropdown.on("mouseup",".oj-listbox-results",this._bind(function(e){$(e.target).closest(".oj-listbox-result-selectable").length>0&&(this._highlightUnderEvent(e),this._selectHighlighted(null,e))})),this.dropdown.on("click mouseup mousedown",function(e){e.stopPropagation()}),$.isFunction(this.opts.initSelection)){this.opts.fetchType="init";var p=this.getValOpts();(!this.ojContext.multiple||p&&0!=p.length)&&(this.ojContext.multiple||p)||(p=null),this._initSelection(p)}var _=e.element.prop("disabled");void 0===_&&(_=!1),this._enable(!_);var m=e.element.prop("readonly");void 0===m&&(m=!1),this._readonly(m),Ie.scrollBarDimensions=Ie.scrollBarDimensions||Ie.measureScrollbar(),this.autofocus=e.element.prop("autofocus"),e.element.prop("autofocus",!1),this.autofocus&&this._focus(),Ie.addDataProviderEventListeners(e.ojContext)},_clickAwayHandler:function(e){var t=this.dropdown;$(e.target).closest(t).length||$(e.target).closest("#"+t.attr("data-oj-containerid")).length||t.length>0&&t.data("ojlistbox").close(e)},_surrogateRemoveHandler:function(){this.dropdown&&this.dropdown.remove()},_destroy:function(){var e=this._closeDelayTimer;isNaN(e)||(delete this._closeDelayTimer,window.clearTimeout(e));var t=this.opts.element,i=t.data(this._elemNm);this.close(),this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.opts.list&&this.results?(this._cleanupList(this.results),this.dropdownListParent&&this.dropdownListParent.append(this.results)):this.isOjOption&&this.results&&(this._unwrapOjOptions(this.results),this.opts.element.append(this.results.children())),void 0!==i&&(i.container.after(t),i.container.remove(),i.dropdown.remove(),t.removeAttr("aria-hidden").removeData(this._elemNm).off("."+this._classNm).prop("autofocus",this.autofocus||!1),this.elementTabIndex?t.attr({tabindex:this.elementTabIndex}):t.removeAttr("tabindex"),t.show())},_unwrapOjOptions:function(e){var t,i=e.children(),n=this;i.each(function(e){(t=$(this)).is("li")&&(t.hasClass("oj-listbox-result-with-children")||t.children("oj-optgroup").length>0?(t.hasClass("oj-listbox-result-with-children")&&t.children(".oj-listbox-result-label").remove(),n._unwrapOjOptions(t.find("oj-optgroup").children()),t.find("oj-optgroup").children().children().unwrap(),t.find("oj-optgroup").unwrap()):t.hasClass("oj-listbox-result")?t.find("oj-option").unwrap().unwrap():t.find("oj-option").unwrap())})},_cleanupList:function(e){if(e&&e.is("ul")){e.removeClass("oj-listbox-results oj-listbox-result-sub"),e.removeAttr("role");for(var t=e.children().length-1;t>=0;t--)this._cleanupList($(e.children()[t]))}else if(e.is("li")){(e.hasClass("oj-listbox-placeholder")||e.hasClass("oj-listbox-no-results"))&&e.remove(),e.attr("class")&&e.attr("class",e.attr("class").replace(/\oj-listbox-\S+/g,""));var i=e.children(".oj-listbox-result-label");i&&i.contents().unwrap(),"none"==e.css("display")&&e.css("display",""),this._cleanupList(e.children("ul"))}},_optionToData:function(e){if(e.is("option")||e.is("oj-option"))return{value:e.prop("value")||e.attr("value"),label:e.text()||e.attr("label"),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:"locked"===e.attr("locked")||!0===e.data("locked")};if(e.is("optgroup")||e.is("oj-optgroup"))return{label:e.prop("label")||e.attr("label"),disabled:e.prop("disabled"),children:[],element:e.get(),css:e.attr("class")};if(e.is("li")){var t,i,n,o=null,s=e.children();if(s&&s.length>0&&s.is("ul"))t=e.attr("oj-data-label")?e.attr("oj-data-label"):e.clone().children().remove().end().text().trim(),i=e.attr("oj-data-value"),o=[];else if(s&&s.length>0&&s.is("oj-optgroup"))t=s.prop("label"),n=s.prop("disabled"),o=[];else{var r=e.find("oj-option");t=e.attr("oj-data-label")?e.attr("oj-data-label"):e.text().trim(),i=r.length>0?r.prop("value"):e.attr("oj-data-value"),n=r.length>0?r.prop("disabled"):void 0}return{value:i,label:t,disabled:n,element:e.get(),css:e.attr("class"),children:o}}},_prepareOpts:function(e){var t,i=this;e.options&&Array.isArray(e.options)&&e.optionsKeys&&(e.options=$.extend(!0,[],e.options));var n=(t=e.element).get(0).tagName.toLowerCase();if(e.ojContext._IsCustomElement()?!e.options&&e.element.children().length>0&&(this.datalist=$(t)):"input"===n&&t.attr("list")?this.datalist=$("#"+t.attr("list")):"select"===n&&t.children().length>0?this.datalist=t:e.list&&(this.datalist=$("#"+e.list)),(e=$.extend({},{populateResults:function(t,o,s,r){var a,l=this.opts.id,u=this.opts.optionRenderer;"function"!=typeof u&&(u=null),this.opts.ojContext._WrapCustomElementRenderer&&(u=this.opts.ojContext._WrapCustomElementRenderer(u)),(a=function(t,o,r,h,d){var c,p,_,m,g,f,v,C,y=function(e,t){if(t.children&&t.children.length>0){var i=t.element&&$(t.element[0]).is("li")&&$(t.element[0]).children("ul"),n=i?$(t.element[0]).children("ul"):$("<ul></ul>");n.hasClass("oj-listbox-result-sub")||n.addClass("oj-listbox-result-sub"),a(t,t.children,n,h+1,!1),i||e.append(n)}},b=function(e,t,i){e.length&&i&&i.length&&e.each(function(){!function e(i,n){var o=0;if(3===i.nodeType){var s=i.data.toUpperCase().indexOf(n);if(s>=0){var r=document.createElement("span");r.className=t;var a=i.splitText(Math.min(s,i.data.length)),l=(a.splitText(Math.min(n.length,a.data.length)),a.cloneNode(!0));r.appendChild(l),a.parentNode.replaceChild(r,a),o=1}}else if(1===i.nodeType&&i.childNodes&&!/(script|style)/i.test(i.tagName))for(var u=0;u<i.childNodes.length;++u)u+=e(i.childNodes[u],n);return o}(this,i.toUpperCase())})},S=function(t){if(e.highlightTermInOptions(s)){var i=t.find(".oj-listbox-highlighter-section");i.length||(i=t),b(i,"oj-listbox-highlighter",s.term)}},E=function(n,o){if(u){var s={index:c,depth:h,leaf:!o.children,parent:t,data:o,component:e.ojContext,componentElement:i.container[0],parentElement:n.get(0)},r=u.call(e.ojContext,s);null!==r&&(null===r.parentNode||r.parentNode instanceof DocumentFragment)&&n.get(0).appendChild(r)}else void 0!==(C=e.formatResult(o))&&(n.text(C),n.attr("aria-label",C));S(n)},T=i._getPlaceholder();for(d&&null!==T&&!s.term&&r.find(".oj-listbox-placeholder").length<=0&&("select"!==n||!i.ojContext._IsRequired())&&(_={value:"",label:T},(f=$("<li></li>")).addClass("oj-listbox-placeholder oj-listbox-results-depth-0 oj-listbox-result oj-listbox-result-selectable"),f.attr("role","presentation"),(v=$(document.createElement("div"))).addClass("oj-listbox-result-label"),v.attr("id","oj-listbox-result-label-"+Ie.nextUid()),v.attr("role","option"),void 0!==(C=e.formatResult(_))&&v.text(C),v.attr("aria-label",C),f.append(v),f.data(i._elemNm,_),r.prepend(f)),c=0,p=o.length;c<p;c+=1){m=!(g=!0===(_=o[c]).disabled)&&void 0!==l(_);var D=_.element&&$(_.element[0]).is("li");if((f=D?$(_.element[0]):$("<li></li>")).hasClass("oj-listbox-result"))_.children&&_.children.length>0&&y(f,_),S($(_.element[0]).children("div")),$(_.element[0]).css("display","");else if(f.addClass("oj-listbox-results-depth-"+h),f.addClass("oj-listbox-result"),f.addClass(m?"oj-listbox-result-selectable":"oj-listbox-result-unselectable"),g&&f.addClass("oj-disabled"),_.children&&f.addClass("oj-listbox-result-with-children"),f.attr("role","presentation"),(v=$(document.createElement("div"))).addClass("oj-listbox-result-label"),v.attr("id","oj-listbox-result-label-"+Ie.nextUid()),v.attr("role","option"),g&&v.attr("aria-disabled","true"),D||(E(v,_),f.append(v)),_.children&&_.children.length>0&&y(f,_),f.data(i._elemNm,_),D){var A=$(_.element[0]);if(A.children("oj-optgroup").length>0){var I=A.children("oj-optgroup").prop("label")+"";A.prepend(v.text(I))}else A.children("oj-option").length>0?A.contents().wrapAll(v):A.contents().filter(function(){return"UL"!==this.tagName}).wrapAll(v);S(A.children("div")),A.css("display","")}else r.append(f)}})(null,o,t,0,r)},highlightTermInOptions:function(e){return!(!0===e.initial)}},we,e)).id=function(e){return e.value},e.formatResult=function(e){var t=Ie.getLabel(e);return isNaN(t)?t:this.ojContext._formatValue(t)},e.formatSelection=function(e){var t=Ie.getLabel(e);return e&&t?isNaN(t)?t:this.ojContext._formatValue(t):void 0},"select"!==n&&null!==e.manageNewEntry&&(e.manageNewEntry=function(e){var t={};return t.value=t.label=$.trim(e),t}),this.datalist)e.query=this._bind(function(e){var t,n,o={results:[],more:!1},s=e.term;n=function(t,o){var r,a,l=t.children()&&t.children().length>0&&(t.children().is("ul")||t.children().is("oj-optgroup"));t.is("option")||t.is("oj-option")||t.is("li")&&!l?e.matcher(s,t.text()||t.attr("label"),t)&&o.push(i._optionToData(t)):(t.is("optgroup")||t.is("oj-optgroup")||t.is("li")&&l)&&(r=i._optionToData(t),t.is("optgroup")||t.is("oj-optgroup")?a=t.children():t.children("oj-optgroup")?a=t.children().children("ul").children():t.children("ul").children(),Ie.each2(a,function(e,t){n(t,r.children)}),r.children.length>0&&o.push(r))},t=this.datalist.children(),void 0!==this._getPlaceholder()&&t.length>0&&""==t.first().attr("value")&&(t=t.slice(1)),Ie.each2(t,function(e,t){n(t,o.results)}),e.callback(o)});else if("options"in e){var o,s=e.options;Ie.isDataProvider(s)&&(o=Ie.getDataProvider(e)),o?e.query=function(t){t.value?Ie.fetchByKeyFromDataProvider(i.container,o,t):Ie.fetchFromDataProvider(i,e,t)}:$.isFunction(s)?e.query=Ie.remote(s,e.optionsKeys?e.optionsKeys:null):e.query=Ie.local(s,e.optionsKeys?e.optionsKeys:null)}return e},_createHeader:function(){var e=this.opts.element.find(".oj-listbox-header");if(e.length){this.header=$("<li>",{class:"oj-listbox-result-header oj-listbox-result-unselectable",role:"presentation"}),this.header.append(e.children()),this._initializeHeaderItems();var t=$("<ul>",{class:"oj-listbox-results-with-header",role:"listbox"});t.append(this.header),t.appendTo(this.results.parent());var i=$("<li>",{role:"presentation"});t.append(i),this.results.attr("role","presentation"),this.results.appendTo(i)}this.headerInitialized=!0},_initializeHeaderItems:function(){this.headerItems=this.header.find("li[role='option'], li:not([role])"),this.headerItems.uniqueId(),this.header.find("ul").attr("role","presentation"),this.header.find("li:not([role])").attr("role","option");this.header.find("a, input, select, textarea, button, object, .oj-component-initnode").each(function(){$(this).attr("tabIndex",-1)})},_isHeaderItem:function(e){var t=!1;return this.headerItems.each(function(){if($(this).attr("id")===e)return t=!0,!1}),t},_getNextHeaderItem:function(e){if(!this.headerItems)return null;if(!e)return this.headerItems.first();var t=!1,i=null;return this.headerItems.each(function(){if(t)return i=$(this),!1;t=$(this).attr("id")===e}),i},_getPreviousHeaderItem:function(e){if(!this.headerItems)return null;var t=null;return this.headerItems.each(function(){if($(this).attr("id")===e)return!1;t=$(this)}),t},_setFocusOnHeaderItem:function(e){var t=e.find(".oj-component .oj-enabled").first();if(0===t.length){0===(t=e.find("a, input, select, textarea, button, object, .oj-component-initnode").first()).length&&(t=e.children().first())}t&&t.addClass("oj-focus oj-focus-highlight oj-focus-only")},_removeHighlightFromHeaderItems:function(){this.headerItems&&this.headerItems.find(".oj-focus").removeClass("oj-focus oj-focus-highlight oj-focus-only")},_triggerSelect:function(e){var t=$.Event(this._elemNm+"-selecting",{val:this.id(e),object:e});return this.opts.element.trigger(t),!t.isDefaultPrevented()},_isInterfaceEnabled:function(){return!0===this.enabledInterface},_enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e!==this.enabledInterface&&(this.container.toggleClass("oj-disabled",t),this.close(),this.enabledInterface=e,!0)},_enable:function(e){void 0===e&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.container.toggleClass("oj-enabled",e),this._enableInterface())},_disable:function(){this._enable(!1)},_readonly:function(e){return void 0===e&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this._enableInterface(),!0)},_opened:function(){return this.container.hasClass("oj-listbox-dropdown-open")},_getDropdownPositionElement:function(){return this.container.children().first()},_usingHandler:function(e,t){if(i.PositionUtils.isAligningPositionClipped(t)){var n=Ie._addBusyState(this.container,"closing popup");this._closeDelayTimer=window.setTimeout(function(){$.proxy(this.close,this),n()},1)}else{var o=this.container,s=t.element.element;s.css(e),"bottom"===t.vertical?(o.addClass("oj-listbox-drop-above"),s.addClass("oj-listbox-drop-above")):(o.removeClass("oj-listbox-drop-above"),s.removeClass("oj-listbox-drop-above"))}},_getDropdownPosition:function(){var e={my:"start top",at:"start bottom",of:this._getDropdownPositionElement(),collision:"flip",using:$.proxy(this._usingHandler,this)},t="rtl"===i.DomUtils.getReadingDirection();return i.PositionUtils.normalizeHorizontalAlignment(e,t)},_positionDropdown:function(){var e=this.dropdown,t=this._getDropdownPosition(),i=this.container;e.css("width",i.outerWidth()),e.position(t)},_shouldOpen:function(e){if(this._opened())return!1;if(!1===this._enabled||!0===this._readonly)return!1;var t={component:this.opts.element};return this.ojContext._trigger("beforeExpand",e,t)},_clearDropdownAlignmentPreference:function(){this.container.removeClass("oj-listbox-drop-above"),this.dropdown.removeClass("oj-listbox-drop-above")},open:function(e,t){return!!this._shouldOpen(e)&&(this._opening(e,t),!0)},_opening:function(){this.headerInitialized||this._createHeader(),this.container.addClass("oj-listbox-dropdown-open")},_showDropDown:function(){if(this._opened()&&"true"!==this._getActiveContainer().attr("aria-expanded")){this._clearDropdownAlignmentPreference();var e=this.dropdown.parent();if("oj-select"===this._classNm&&!0!==this.opts.multiple&&e&&e.hasClass("oj-listbox-drop-layer"))i.PopupService.getInstance().triggerOnDescendents(e,i.PopupService.EVENT.POPUP_REFRESH);else{this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),this.dropdown.appendTo(this.body()),this.header&&(this.dropdown.find(".oj-listbox-results-with-header").prepend(this.header),this.header.show());var t={};t[i.PopupService.EVENT.POPUP_CLOSE]=$.proxy(this.close,this),t[i.PopupService.EVENT.POPUP_REMOVE]=$.proxy(this._surrogateRemoveHandler,this),t[i.PopupService.EVENT.POPUP_AUTODISMISS]=$.proxy(this._clickAwayHandler,this),t[i.PopupService.EVENT.POPUP_REFRESH]=$.proxy(this._positionDropdown,this);var n={};n[i.PopupService.OPTION.POPUP]=this.dropdown,n[i.PopupService.OPTION.LAUNCHER]=this.opts.element,n[i.PopupService.OPTION.EVENTS]=t,n[i.PopupService.OPTION.POSITION]=this._getDropdownPosition(),n[i.PopupService.OPTION.LAYER_SELECTORS]="oj-listbox-drop-layer",n[i.PopupService.OPTION.CUSTOM_ELEMENT]=this.ojContext._IsCustomElement(),i.PopupService.getInstance().open(n),$("#oj-listbox-drop").removeAttr("id"),this.dropdown.attr("id","oj-listbox-drop");var o=this.containerId;this.dropdown.attr("data-oj-containerid",o)}this._positionDropdown(),this._getActiveContainer().attr("aria-expanded",!0)}},close:function(e){if(this._opened()){this.container.removeClass("oj-listbox-dropdown-open");var t=this._getActiveContainer().attr("aria-expanded");if(delete this.ojContext._resolveSearchBoxLater,t&&"false"!==t){var n=this.containerId,o="scroll."+n,s="resize."+n,r="orientationchange."+n;this.container.parents().add(window).each(function(){$(this).off(o).off(s).off(r)}),this._clearDropdownAlignmentPreference();var a={};a[i.PopupService.OPTION.POPUP]=this.dropdown,i.PopupService.getInstance().close(a),this.header&&(this.header.hide(),this.header.appendTo(this.container)),this.dropdown.removeAttr("data-oj-containerid"),this.dropdown.removeAttr("id"),this.opts.list||this.isOjOption?this._removeHighlight():(this.dropdown.detach(),this.results.empty()),this._getActiveContainer().attr("aria-expanded",!1),"ojcombobox"===this._elemNm&&this._getActiveContainer().removeAttr("aria-activedescendant"),$.removeData(this.container,this._classNm+"-last-term")}}},_setPickerAttributes:function(e){i.EditableValueUtils.setPickerAttributes(this.dropdown,e)},_clearSearch:function(){},_ensureHighlightVisible:function(){var e,t,i,n,o,s,r,a=this.results;(t=this._highlight())<0||(e=this._findHighlightableChoices(),n=(i=$(e[t])).offset().top+i.outerHeight(!0),t===e.length-1&&(r=a.find("li.oj-listbox-more-results")).length>0&&(n=r.offset().top+r.outerHeight(!0)),n>(o=a.offset().top+a.outerHeight(!0))&&a.scrollTop(a.scrollTop()+(n-o)),(s=i.offset().top-a.offset().top)<0&&"none"!=i.css("display")&&a.scrollTop(a.scrollTop()+s))},_findHighlightableChoices:function(){return this.results.find(".oj-listbox-result-selectable:not(.oj-disabled, .oj-selected)").filter(function(){return"none"!=$(this).css("display")})},_moveHighlight:function(e){var t=this._findHighlightableChoices(),i=this._highlight();if(this.header&&(i<=0||i===t.length-1)){var n=this._getActiveContainer().attr("aria-activedescendant"),o=this._isHeaderItem(n);o||(n=null);var s=null;if(e>0&&(i<0||i===t.length-1)?s=this._getNextHeaderItem(n):e<0&&(o&&i<0||0===i)&&(s=this._getPreviousHeaderItem(n)),s)return this._removeHighlight(),this._setFocusOnHeaderItem(s),void this._getActiveContainer().attr("aria-activedescendant",s.attr("id"));o&&e<0&&(i=0)}for(;i>=-1&&i<t.length;){(i+=e)==t.length?i=0:-1==i&&(i=t.length-1);var r=$(t[i]);if(r.hasClass("oj-listbox-result-selectable")&&!r.hasClass("oj-disabled")&&!r.hasClass("oj-selected")){this._highlight(i);break}}},_highlight:function(e){var t,i=this._findHighlightableChoices(),n=this.dropdown.find(".oj-listbox-search"),o=n&&!n.attr("aria-hidden");if(0===arguments.length){var s=i.filter(".oj-hover");return s.length||(s=i.children(".oj-hover").closest(".oj-listbox-result")),o&&this._updateMatchesCount(s.text()),i.get().indexOf(s[0])}if(e>=i.length&&(e=i.length-1),e<0&&(e=0),this._removeHighlight(),(t=$(i[e])).hasClass("oj-listbox-result-with-children")){var r=t.children(".oj-listbox-result-label");r.addClass("oj-hover"),o&&this._updateMatchesCount(r.text())}else t.addClass("oj-hover"),o&&this._updateMatchesCount(t.text());this._getActiveContainer().attr("aria-activedescendant",t.find(".oj-listbox-result-label").attr("id")),this._ensureHighlightVisible()},_removeHighlight:function(){this.results.find(".oj-hover").removeClass("oj-hover"),this._removeHighlightFromHeaderItems(),"ojcombobox"===this._elemNm&&this._getActiveContainer().removeAttr("aria-activedescendant")},_highlightUnderEvent:function(e){var t=$(e.target).closest(".oj-listbox-result-selectable");if(t.length>0&&!t.is(".oj-hover")){var i=this._findHighlightableChoices();this._highlight(i.index(t))}else 0==t.length&&this._removeHighlight()},_updateMatchesCount:function(e){if(!this.dropdown.find(".oj-listbox-filter-message-text").length){var t=this.container.find(".oj-listbox-liveregion");t.length&&t.text(e)}},_updateResults:function(e){var t=this.search,n=this,o=t.val(),s=$.data(this.container,this._classNm+"-last-term");if((!0===e||!s||o!==s||!0===this.opts.multiple)&&(s||o||!e||"input"!==e.type)){$.data(this.container,this._classNm+"-last-term",o);var r=this.opts.minLength||0;o.length>=r?(this._queryTimer&&this._queryTimer.clear(),e&&!0!==e?(this._queryResolveBusyState=Ie._addBusyState(this.container,"query results"),this._queryTimer=i.TimerUtils.getTimer(Ie.DEFAULT_QUERY_DELAY),this._queryTimer.getPromise().then(function(t){t&&n._queryResults(e)}).then(this._queryResolveBusyState)):this._queryResults(e)):this.close()}},_queryResults:function(e){var t,i,n=this.search,o=this.results,s=this.opts,r=this,a=n.val();function l(){if(r._positionDropdown(),r.header&&r.headerItems.length){var e=r._findHighlightableChoices(),t=r.headerItems.length+e.length;if(r.headerItems.attr("aria-setsize",t),e.length){var i=e.children("[role='option']");i.attr("aria-setsize",t),i.first().attr("aria-posinset",r.headerItems.length+1)}}}(s.minLength||0)>a.length?this.close():(this.open(null,!0),i=++this.queryCount,this._removeHighlight(),a=null!=(t=this.search.val())&&(!0!==e||s.inputSearch||"rawValue"===s.filterOnOpen||s.minLength>0)?t:"",this.resultsPage=1,s.query({element:s.element,term:a,page:this.resultsPage,context:null,matcher:s.matcher,callback:this._bind(function(t){if(i===this.queryCount&&this._opened())if(s.ojContext._hasMore||Ie.removeDropdownMessage(r.dropdown),this.context=t&&void 0!==t.context?t.context:null,(!t||t.results&&0===t.results.length||this._isDataSelected(t)&&this.ojContext.isValid())&&Ie.checkFormatter(r.ojContext,s.formatNoMatches,"formatNoMatches")){var a=s.formatNoMatches(r.ojContext,n.val());if("oj-select"===this._classNm||this.header){if(this._showDropDown(),this._preprocessResults(o),l(),Ie.addDropdownMessage(r.dropdown,r.ojContext,a),!this._hasSearchBox()){var u=r.dropdown.find(".oj-listbox-filter-message-separator");u.length&&u.css("display","none")}}else this.close();this._updateMatchesCount(a)}else Ie.saveLastQueryResult(this,t.results),this._showDropDown(),this._preprocessResults(o),r.opts.populateResults.call(this,o,t.results,{term:n.val(),page:this.resultsPage,context:null,initial:e},this._showPlaceholder()),this._postprocessResults(t,e),l(),this._updateMatchesCount(s.formatMoreMatches(r.ojContext,this._findHighlightableChoices().length))})}))},_preprocessResults:function(e){if(this.opts.list||this.isOjOption){var t=e.children();t.find(".oj-listbox-highlighter");this._hideResultList(t)}else e.empty()},_normalizeHighlighterLabel:function(e){var t,i;if(e.children("div").children("oj-option").length>0?(t=e.children("div").children("oj-option").children(".oj-listbox-highlighter"),i=e.children("div").children("oj-option")[0]):(t=e.children("div").children(".oj-listbox-highlighter"),i=e.children("div")[0]),t.length>0){for(var n=0;n<t.length;n++)$(t[n].childNodes).unwrap();i.normalize()}},_hideResultList:function(e){for(var t=0;t<e.length;t++){var i,n=$(e[t]);n.is("LI")&&((n.hasClass("oj-listbox-no-results")||n.hasClass("oj-listbox-placeholder"))&&n.remove(),n.css("display","none"),n.hasClass("oj-selected")&&n.removeClass("oj-selected"),this._normalizeHighlighterLabel(n)),(i=n.children("oj-optgroup")?n.children("oj-optgroup").children("ul"):n.children("ul"))&&i.children()&&this._hideResultList(i.children())}},_cancel:function(e){this.close(e)},_focusSearch:function(){Ie._focus(this,this.search)},_selectHighlighted:function(e,t){if(this.header){var i=this._getActiveContainer().attr("aria-activedescendant");if(this._isHeaderItem(i)){var n=$("#"+i),o=n.find("a, input, select, textarea, button, object").first();return 0===o.length&&(o=n.children()),o.length&&o[0].click(),void this.close(t)}}var s=this._highlight(),r=this.results.find(".oj-hover").closest(".oj-listbox-result").data(this._elemNm);if(r){this._highlight(s);var a=this.getVal();(e=e||{}).trigger=Ie.ValueChangeTriggerTypes.OPTION_SELECTED,this._onSelect(r,e,t),this._triggerUpdateEvent(r,e,t),this._triggerValueUpdatedEvent(r,a),t&&"keydown"===t.type&&(this.enterKeyEventHandled=!0)}else e&&e.noFocus&&this.close(t)},_getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},_setPlaceholder:function(){var e=this._getPlaceholder();e&&(this.search.attr("placeholder",e),this.container.removeClass(this._classNm+"-allowclear"))},_initContainerWidth:function(){var e=function(){var e,t,i,n,o;if(null!=(e=this._getAttribute("style")))for(n=0,o=(t=e.split(";")).length;n<o;n+=1)if(null!==(i=t[n].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&i.length>=1)return i[1]}.call(this);null!==e&&this.container.css("width",e)},getVal:function(){return this.ojContext.option("value")},setVal:function(e,t,i){var n={doValueChangeCheck:!1};if(i&&(n._context=i),!this._skipSetValueOptions){var o,s=Ie.getLastQueryResult(this);s&&(o=this.ojContext.multiple?Ie.findOptions(s,e):Ie.findOption(s,e)),o?this.setValOpts(o):"oj-combobox"===this._classNm?this.ojContext._resolveValueOptionsLater=null!=Ie.findOption(this.getValOpts(),e):this.ojContext._resolveValueOptionsLater=!0}Array.isArray(e)||this.ojContext._IsCustomElement()?this.ojContext._SetValue(e,t,n):this.ojContext._SetValue([e],t,n),this.opts.element.val(e)},getValOpts:function(){var e=this.ojContext;return e.multiple?e.option("valueOptions"):e.option("valueOption")},setValOpts:function(e){var t=this.ojContext;Ie.setValueOptions(t,e),t.multiple?this.opts.valueOptions=e:this.opts.valueOption=e},_triggerUpdateEvent:function(e,t,i){},_triggerValueUpdatedEvent:function(e,t){},_showPlaceholder:function(){return!1},_getActiveContainer:function(){return this.search},_getAttribute:function(e){return this.opts.ojContext._IsCustomElement()?this.opts.ojContext.OuterWrapper.getAttribute(e):this.opts.element.attr(e)},_showSearchBox:function(e){var t=!1,i=this.dropdown.find(".oj-listbox-search");if(i&&(this._hasSearchBox()?(this.dropdown.find(".oj-listbox-search-wrapper").removeClass("oj-helper-hidden-accessible"),$(i).removeAttr("aria-hidden"),this.search.val(e),t=!0):(this.dropdown.find(".oj-listbox-search-wrapper").addClass("oj-helper-hidden-accessible"),$(i).attr("aria-hidden","true"))),Ie._focus(this,t?this.search:this.selection),t){var n=this;i.find(".oj-listbox-spyglass-box").on("mouseup click",function(e){n.search.focus(),e.preventDefault()})}},_hasSearchBox:function(){if(this._userTyping)return!0;var e,t=this.opts.minimumResultsForSearch;return this.opts.list?e=$("#"+this.opts.list).find("li").length:Ie.isDataProvider(this.opts.options)?void 0===this.ojContext._resultCount?(e=t+1,this.ojContext._resolveSearchBoxLater=!0):(e=this.ojContext._resultCount,delete this.ojContext._resolveSearchBoxLater):this.datalist?e=this.ojContext._IsCustomElement()?this.datalist.children().find("oj-option").length:this.datalist[0].length:this.opts.options&&(e=this.opts.options.length),e>t},_isDataSelected:function(e){return!1},_findItem:function(e,t){for(var i=0;i<e.length;i++)if($(e[i]).data(this._elemNm).value===t)return e[i];return null}}),we={closeOnSelect:!0,openOnEnter:!0,formatNoMatches:function(e,t){return e.getTranslatedString("noMatchesFound")},formatMoreMatches:function(e,t){return 1===t?e.getTranslatedString("oneMatchesFound"):e.getTranslatedString("moreMatchesFound",{num:""+t})},id:function(e){return e.id},matcher:function(e,t){return(""+t).toUpperCase().indexOf((""+e).toUpperCase())>=0},separator:","},Re=Ie.clazz(Oe,{_enableInterface:function(){Re.superclass._enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this._isInterfaceEnabled())},_focus:function(){this._opened()&&this.close()},_destroy:function(){$("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),Re.superclass._destroy.apply(this,arguments)},_clear:function(e){if(this.selection.data(this._elemNm)){e||i.Logger.warn("Event should not be null when user modified the value in UI");var t=this.ojContext._IsCustomElement()?"":[];"oj-select"===this._classNm&&this.ojContext._IsRequired()||this.setVal(t,e),this.search.val(""),this.selection.removeData(this._elemNm)}this._setPlaceholder()},_initSelection:function(){if(!Ie.applyValueOptions(this,this.opts)){var e=this.datalist?this.datalist:this.opts.element;this.opts.initSelection.call(null,e,this._bind(this._updateSelectedOption))}},_containerKeydownHandler:function(e){if(this._isInterfaceEnabled())if(e.which!==Ie.KEY.PAGE_UP&&e.which!==Ie.KEY.PAGE_DOWN){switch(e.which){case Ie.KEY.UP:case Ie.KEY.DOWN:return this._opened()?this._moveHighlight(e.which===Ie.KEY.UP?-1:1):this.open(e),void e.preventDefault();case Ie.KEY.ENTER:return this._selectHighlighted(null,e),e.preventDefault(),void(this._opened()||(this._userTyping=!1));case Ie.KEY.TAB:return this.close(e),void(this._userTyping=!1);case Ie.KEY.ESC:return this._opened()&&(this._cancel(e),e.preventDefault()),void(this._userTyping=!1)}this._userTyping=!0}else e.preventDefault()},_containerKeyupHandler:function(e){this._isInterfaceEnabled()&&(this._opened()||this.open(e))},_initContainer:function(){var e,t,i=this.container,n=(this.dropdown,this.opts.rootAttributes),o=n&&n.id?n.id:this._getAttribute("id")||Ie.nextUid();this.selection=e=i.find("."+this._classNm+"-choice"),e.attr("id",this._classNm+"-choice-"+o),(t=$("label[for='"+this._getAttribute("id")+"']")).attr("id")||t.attr("id",this._classNm+"-label-"+o),e.find("."+this._classNm+"-input").attr("id",this._classNm+"-input-"+o),this.results.attr("id")||this.results.attr("id","oj-listbox-results-"+o);var s=i.find(".oj-listbox-liveregion");s.length&&s.attr("id","oj-listbox-live-"+o),"oj-select"!==this._classNm&&this.search.attr("aria-owns",this.results.attr("id")),this.search.attr("aria-labelledby",t.attr("id")),this.opts.element.attr("aria-labelledby",t.attr("id")),this.search.attr("id")&&t.attr("for",this.search.attr("id")),this._getAttribute("aria-label")&&this.search.attr("aria-label",this._getAttribute("aria-label")),this._getAttribute("aria-controls")&&this.search.attr("aria-controls",this._getAttribute("aria-controls")),e.on("keydown",this._bind(this._containerKeydownHandler)),e.on("mousedown","abbr",this._bind(function(e){this._isInterfaceEnabled()&&(this._clear(e),Ie.killEventImmediately(e),this.close(e),this.selection.focus())})),e.on("mousedown",this._bind(function(t){if(!("end"===t.target.getAttribute("slot")||$(this._endSlot).find(t.target).length>0)){this.opts.element.prop("disabled")&&Ie.killEvent(t),e.removeClass("oj-focus-highlight"),this._opened()?this.close(t):this._isInterfaceEnabled()&&this.open(t);var i=this.search.parent().attr("aria-hidden");i&&"true"==i?this.selection.focus():this.search.focus(),$(t.target).hasClass("oj-combobox-open-icon")&&Ie.killEvent(t),this.container.addClass("oj-active")}})),e.on("mouseup",this._bind(function(e){this.container.removeClass("oj-active")})),e.on("focus",this._bind(function(e){Ie.killEvent(e)})),this.search.on("input",this._bind(function(e){this.ojContext._SetRawValue(this.search.val(),e)})),this.search.on("focus",this._bind(function(){this._previousDisplayValue=this.search.val()})),this.search.on("blur keyup",this._bind(function(e){if("keyup"!==e.type||10===e.keyCode||13===e.keyCode){if(void 0!==this.search.val()&&this.results.find(".oj-hover").length<=0&&("keyup"!==e.type||!this.enterKeyEventHandled))if(this.opts.manageNewEntry){var t=this.search.val(),i=this.opts.manageNewEntry(t),n={trigger:"blur"===e.type?Ie.ValueChangeTriggerTypes.BLUR:Ie.ValueChangeTriggerTypes.ENTER_PRESSED},o=this.selection.data(this._elemNm),s=this.getVal();!o&&""!==t||o&&o.label!==t||!this.ojContext.isValid()&&t!==this._previousDisplayValue?(this._onSelect(i,n,e),"blur"!==e.type&&(this._triggerUpdateEvent(i,n,e),this._triggerValueUpdatedEvent(i,s))):"keyup"===e.type&&(o&&o.label===t&&(i=o),this._triggerUpdateEvent(i,n,e),this._triggerValueUpdatedEvent(i,s))}else if(null==this.opts.manageNewEntry){i=this.selection.data(this._elemNm);if(""==this.search.val())"oj-select"!==this._classNm&&this._clear(e);else if(i||""===this.search.val()){if("oj-select"!==this._classNm){var r=this.opts.formatSelection(i);void 0!==r&&this.search.val(r)}}else this._clearSearch()}this.search.removeClass(this._classNm+"-focused"),this.container.removeClass("oj-focus"),this.enterKeyEventHandled=!1}})),this._initContainerWidth(),this.opts.element.hide().attr("aria-hidden",!0),this.container.append(this.opts.element),this._setPlaceholder()},_prepareOpts:function(){var e=Re.superclass._prepareOpts.apply(this,arguments),t=this,n=e.element.get(0).tagName.toLowerCase();if("input"===n&&e.element.attr("list")||"select"===n&&e.element.children().length>0||e.ojContext._IsCustomElement()&&!e.options||e.list){var o=e.list?"li":"option";e.ojContext._IsCustomElement()&&(o="oj-option"),e.initSelection=function(s,r){var a,l=t.getVal();Array.isArray(l)&&!e.ojContext._IsCustomElement()&&(l=l[0]),null!=l&&(a=t._optionToData(s.find(o).filter(function(){var e;return"li"==o?e=this.getAttribute("oj-data-value"):"option"!=o&&"oj-option"!=o||(e=this.value),i.Object.compareValues(e,l)})),"select"===n&&void 0===a&&(l=null)),null==l&&(a=t._optionToData(s.find(o).filter(function(){return"li"==o?!0===this.getAttribute("oj-data-selected"):"option"==o?this.selected:void 0})),"oj-select"===t._classNm&&void 0===a&&e.ojContext._IsCustomElement()&&(a=t._optionToData($(s.find(o)[0])))),r(a)},e.validate=function(e,n){var s;return null!=n&&(s=t._optionToData(e.find(o).filter(function(){var e;return"li"==o?e=this.getAttribute("oj-data-value"):"option"!=o&&"oj-option"!=o||(e=this.value),i.Object.compareValues(e,n)}))),!!s}}else("options"in e||this.getVal()&&this.getVal().length>0)&&(Ie.isDataProvider(e.options)||$.isFunction(e.options)?e.initSelection=function(n,o){var s=function(t,n){for(var o=0,r=t.length;o<r;o++){var a=t[o];if(i.Object.compareValues(n,e.id(a)))return a;if(a.children){var l=s(a.children,n);if(l)return l}}return null},r=t._getValueItem(),a=null;if(r){var l=Ie.getLastQueryResult(t);if(l&&(a=s(l,r)),!a){var u=t.currentItem;u&&u.length&&i.Object.compareValues(r,e.id(u[0]))&&(a=u[0])}a||t.valueChangeTrigger?o(a):e.query({value:[r],callback:$.isFunction(o)?function(e){e&&e.results&&(a=s(e.results,r)),o(a)}:$.noop})}else o(a)}:(e.initSelection=function(o,s){var r=t._getValueItem(),a="select"==n&&t.ojContext._HasPlaceholderSet()&&!t.ojContext._IsRequired()?t._getPlaceholder():null,l=null;e.query({matcher:function(t,n,o){var s=i.Object.compareValues(r,e.id(o));return s&&(l=o),null==a&&(a=o),s},callback:$.isFunction(s)?function(){l||"select"!==n||t.ojContext._isOptionDataPending()||(l=a),s(l)}:$.noop})},e.validate=function(t,n){var o=n,s=null;return e.query({matcher:function(t,n,r){var a=i.Object.compareValues(o,e.id(r));return a&&(s=r),a},callback:$.noop}),!!s}));return e},_postprocessResults:function(e,t,n){var o,s=-1,r=this;o=this._findHighlightableChoices(),Ie.each2(o,function(e,t){var n=r._getValueItem();if(n&&i.Object.compareValues(n,r.id(t.data(r._elemNm))))return s=e,!1}),!1!==n&&!0===t&&s>=0&&this._highlight(s)},_onSelect:function(e,t,i){var n,o;this._triggerSelect(e)&&(t&&t.trigger&&(n={optionMetadata:{trigger:t.trigger}}),this.close(i),0===this.id(e).length?(o=this.ojContext._IsCustomElement()?"":[],e=[]):o=this.id(e),"oj-combobox"===this._classNm&&(this._skipSetValueOptions=!0,this.setValOpts(Ie.findOptionFromResult(this,o,e))),this.setVal(o,i,n),this._skipSetValueOptions=!1,"blur"!==i.type&&this._focusSearch())},_clearSearch:function(){this.search.val("")},_getValueItem:function(){var e=null,t=this.getVal();return null!=t&&(e=!this.ojContext._IsCustomElement()&&t.length?t[0]:t),e}}),xe=Ie.clazz(Re,{_elemNm:"ojcombobox",_classNm:"oj-combobox",_createContainer:function(){var e=$(document.createElement("div")).attr({class:"oj-combobox oj-component"}).html(["<div class='oj-combobox-choice' tabindex='-1' role='presentation'>","   <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off'","       spellcheck='false' class='oj-combobox-input' role='combobox' aria-expanded='false' aria-autocomplete='list' />","   <abbr class='oj-combobox-clear-entry' role='presentation'></abbr>","   <span class='oj-combobox-divider' role='presentation'></span>","   <a class='oj-combobox-arrow oj-combobox-icon oj-component-icon oj-clickable-icon-nocontext oj-combobox-open-icon'","       role='button' aria-label='expand'></a>","</div>","<div class='oj-listbox-drop' style='display:none' role='presentation'>","   <ul class='oj-listbox-results' role='listbox'>","   </ul>","</div>"].join(""));if(this.ojContext._IsCustomElement()){var t=i.BaseCustomElementBridge.getSlotMap(this.ojContext.OuterWrapper).end;t&&(e.find(".oj-combobox-divider").remove(),e.find(".oj-combobox-arrow").remove(),e.find(".oj-combobox-choice").append(t),this._endSlot=t)}return e},_triggerValueUpdatedEvent:function(e,t){if(this.ojContext._IsCustomElement()){var i=this.id(e);if(null==i&&(i=e.label?e.label:""),void 0!==this.ojContext._Validate(i,null,null)&&this.ojContext.isValid()){var n={},o=this.ojContext.OuterWrapper;n.value=i,n.previousValue=t;var s=new CustomEvent("ojValueUpdated",{detail:n});o.dispatchEvent(s)}}},_enable:function(e){xe.superclass._enable.apply(this,arguments),this._enabled?this.container.find(".oj-combobox-arrow").removeClass("oj-disabled"):this.container.find(".oj-combobox-arrow").addClass("oj-disabled")},close:function(e){this._opened()&&xe.superclass.close.apply(this,arguments)},_opening:function(e,t){xe.superclass._opening.apply(this,arguments),t||this._updateResults(!0)},_containerKeydownHandler:function(e){Ie.KEY.isControl(e)||Ie.KEY.isFunctionKey(e)||xe.superclass._containerKeydownHandler.apply(this,arguments)},_updateSelection:function(e){var t,i=[];this.selection.data(this._elemNm,e),null!==e&&0!=e.length?(void 0!==(t=this.opts.formatSelection(e))&&this.search.val()!==t&&this.search.val(t),this.search.removeClass(this._classNm+"-default"),i.push(e)):(this.search.val(""),this._setPlaceholder()),this.currentItem=i,this.opts.allowClear&&this.container.addClass(this._classNm+"-allowclear")},_updateSelectedOption:function(e){if(null!=e)this._updateSelection(e);else{var t=this.getVal(),i=t?Array.isArray(t)?Array.isArray(t)&&t.length?{label:t[0]}:null:{label:t}:null;this._updateSelection(i)}this.setValOpts(e)}}),Le=Ie.clazz(Re,{_elemNm:"ojselect",_classNm:"oj-select",_userTyping:!1,_createContainer:function(){return $(document.createElement("div")).attr({class:"oj-select oj-component"}).html(["<div class='oj-select-choice' tabindex='0' role='combobox' ","     aria-autocomplete='none' aria-expanded='false'>","  <span class='oj-select-chosen'></span>","  <abbr class='oj-select-search-choice-close' role='presentation'></abbr>","  <a class='oj-select-arrow oj-component-icon oj-clickable-icon-nocontext oj-select-open-icon' role='presentation'>","</a></div>","<div class='oj-listbox-drop' style='display:none' role='dialog'>","  <div class='oj-listbox-search-wrapper'>","  <div class='oj-listbox-search'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off'","           spellcheck='false' class='oj-listbox-input' title='Search field' ","           role='combobox' aria-expanded='false' aria-autocomplete='list' />","    <span class='oj-listbox-spyglass-box'>","      <span class='oj-component-icon oj-clickable-icon-nocontext oj-listbox-search-icon' role='presentation'>","       <b role='presentation'></b></span>","    </span>","  </div>","  </div>","   <ul class='oj-listbox-results' role='listbox'>","   </ul>","</div>","<div role='region' class='oj-helper-hidden-accessible oj-listbox-liveregion' aria-live='polite'></div>"].join(""))},_enable:function(e){Le.superclass._enable.apply(this,arguments),this._enabled?(this.selection.attr("tabindex","0"),this.container.find(".oj-select-arrow").removeClass("oj-disabled")):(this.selection.attr("tabindex","-1"),this.container.find(".oj-select-arrow").addClass("oj-disabled"))},close:function(e){this._opened()&&(Le.superclass.close.apply(this,arguments),this.selection.attr("aria-expanded",!1).removeAttr("aria-haspopup").removeAttr("aria-owns"),this.search.attr("aria-expanded",!1).removeAttr("aria-controls"),this._testClear(e)||this._clearSearch(),e instanceof MouseEvent&&e.target!=this.selection&&e.target!=this.search||Ie._focus(this,this.selection),this.container.find(".oj-listbox-spyglass-box").off("mouseup click"))},_opening:function(e,t){Le.superclass._opening.apply(this,arguments);var i=Ie.getSearchText(e);this._showSearchBox(i),t||(i?this._updateResults():this._updateResults(!0))},_showDropDown:function(){if(this._opened()){var e="true"!==this.selection.attr("aria-expanded");Le.superclass._showDropDown.apply(this,arguments),e&&(this.selection.attr("aria-expanded",!0).attr("aria-haspopup","dialog").attr("aria-owns",this.results.attr("id")),this.search.attr("aria-expanded",!0).attr("aria-controls",this.results.attr("id")+" "+this.container.find(".oj-listbox-liveregion").attr("id")))}},_initContainer:function(){var e=this.containerId+"_selected";this.text=this.container.find(".oj-select-chosen").attr("id",e),Le.superclass._initContainer.apply(this,arguments),this.selection.attr({"aria-labelledby":this.search.attr("aria-labelledby"),"aria-describedby":e});var t=this._getAttribute("aria-label");t&&this.selection.attr("aria-label",t),this.search.on("keydown",this._bind(this._containerKeydownHandler)),this.search.on("keyup-change input",this._bind(this._containerKeyupHandler)),this.search.attr("title",this.ojContext.getTranslatedString("searchField"));var i=this;this.selection.on("blur",function(e){i._testClear(e)})},_initSelection:function(){this._isPlaceholderOptionSelected()?(this._updateSelection(null),this.close(),this._setPlaceholder()):Le.superclass._initSelection.apply(this,arguments)},_updateSelectedOption:function(e){if(null!=e){var t,n=this.getVal();Array.isArray(n)&&!this.ojContext._IsCustomElement()&&(n=n[0]),void 0===(t=this.opts.id(e))&&(t=null),i.Object.compareValues(n,t)||this.ojContext._setInitialSelectedValue(t),this.setValOpts(e),this._updateSelection(e),this.close()}else this.setValOpts(null)},_updateSelection:function(e){this.selection.data(this._elemNm,e),null!==e&&this.text.text("string"==typeof e?e:Ie.getLabel(e)),e&&""!=e.id&&this.text.removeClass(this._classNm+"-default"),this.opts.allowClear&&this.container.addClass(this._classNm+"-allowclear")},_getActiveContainer:function(){return this.search.attr("aria-expanded")&&this._hasSearchBox()?this.search:this.selection},_isPlaceholderOptionSelected:function(){if(null===this._getPlaceholder())return!1;var e=this.getVal();return""===(e=Array.isArray(e)?e[0]:e)||null==e},_getPlaceholder:function(){return this.opts.placeholder},_showPlaceholder:function(){return!0},_setPlaceholder:function(){var e=this._getPlaceholder();this._isPlaceholderOptionSelected()&&void 0!==e&&(void 0===e&&(e=""),this.text.text(e).addClass(this._classNm+"-default"),this.container.removeClass(this._classNm+"-allowclear"))},setVal:function(e,t,i){Le.superclass.setVal.call(this,e,t,i),this.selection.data("selectVal",e)},_containerKeydownHandler:function(e){if(!(Ie.KEY.isControl(e)&&e.which!=Ie.KEY.SHIFT||e.which==Ie.KEY.SHIFT||Ie.KEY.isFunctionKey(e))){switch(e.which){case Ie.KEY.TAB:return this.close(e),this.selection.focus(),void this._testClear(e);case Ie.KEY.ENTER:if(e.target===this.selection[0]&&!this._opened())return this.open(e),void e.preventDefault()}if(Le.superclass._containerKeydownHandler.apply(this,arguments),this._userTyping)if(this._opened()){var t=this.dropdown.find(".oj-listbox-search");if("true"===$(t).attr("aria-hidden")){var i=Ie.getSearchText(e);i&&(this._showSearchBox(i),this._updateResults())}}else this.open(e)}},_testClear:function(e){return""==this.text.text()&&((!this.datalist||!this.selection.data(this._elemNm).value)&&(this._clear(e),!0))}}),Ne=Ie.clazz(Oe,{_prepareOpts:function(){var e=Ne.superclass._prepareOpts.apply(this,arguments),t=this,n=e.element.get(0).tagName.toLowerCase();if("input"===n&&e.element.attr("list")||"select"===n&&e.element.children().length>0||e.ojContext._IsCustomElement()&&!e.options||e.list){var o=e.list?"li":"option";e.ojContext._IsCustomElement()&&(o="oj-option"),e.initSelection=function(e,s){var r=[];if(t.getVal())for(var a=t.getVal(),l=0;l<a.length;l++){var u=a[l];(h=e.find(o).filter(function(){var e;return"li"==o?e=this.getAttribute("oj-data-value"):"option"!=o&&"oj-option"!=o||(e=this.value),i.Object.compareValues(e,u)}))&&h.length?r.push(t._optionToData(h)):"ojcombobox"===t._elemNm&&r.push({value:u,label:u})}else if("select"!==n){var h;h=e.find(o).filter(function(){return"option"===o?this.selected:"li"===o?!0===this.getAttribute("oj-data-selected"):"oj-option"===o?!0===this.getAttribute("selected"):void 0}),Ie.each2(h,function(e,i){r.push(t._optionToData(i))})}s(r)}}else"options"in e&&(Ie.isDataProvider(e.options)||$.isFunction(e.options)?e.initSelection=function(n,o){var s=function(t,i){for(var n=[],o=0,r=t.length;o<r;o++){var a=t[o];if(i.indexOf(e.id(a))>=0&&n.push(a),a.children){var l=s(a.children,i);l&&l.length&&$.merge(n,l)}}return n},r=t.getVal(),a=[],l=Ie.getLastQueryResult(t);l&&(a=s(l,r));var u=function(){for(var n=[],s=0;s<r.length;s++){for(var l=r[s],u=!1,h=0;h<a.length;h++){var d=a[h];if(i.Object.compareValues(l,e.id(d))){n.push(d),a.splice(h,1),u=!0;break}}if(!u){var c=t.currentItem;if(c&&c.length)for(var p=0;p<c.length;p++)if(i.Object.compareValues(l,e.id(c[p]))){n.push(c[p]),u=!0;break}u||"ojcombobox"!==t._elemNm||n.push({value:l,label:l})}}o(n)};t.valueChangeTrigger?u():e.query({value:r,callback:function(e){if(e&&e.results){var t=s(e.results,r);t&&t.length&&$.merge(a,t)}u()}})}:e.initSelection=function(n,o){var s=t.getVal();if(s&&0!==s.length){var r=[];e.query({matcher:function(t,n,o){var a=$.grep(s,function(t){return i.Object.compareValues(t,e.id(o))}).length;return a&&r.push(o),a},callback:$.isFunction(o)?function(){for(var n=[],a=0;a<s.length;a++){for(var l=s[a],u=!1,h=0;h<r.length;h++){var d=r[h];if(i.Object.compareValues(l,e.id(d))){n.push(d),r.splice(h,1),u=!0;break}}u||"ojcombobox"!==t._elemNm||n.push({value:l,label:l})}o(n)}:$.noop})}});return e},_selectChoice:function(e){var t=this.container.find("."+this._classNm+"-selected-choice.oj-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("oj-focus"),e&&e.length&&("ojcombobox"===this._elemNm&&this.close(),e.addClass("oj-focus"),this.container.find("."+this._classNm+"-description").text(e.attr("valueText")+". Press back space to delete.").attr("aria-live","assertive"),this.opts.element.trigger("choice-selected",e)))},_destroy:function(){$("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),Ne.superclass._destroy.apply(this,arguments)},_initContainer:function(){var e,t,i="."+this._classNm+"-choices",n=Ie.nextUid();this.searchContainer=this.container.find("."+this._classNm+"-search-field"),this.selection=e=this.container.find(i);var o=this;this.selection.on("click","."+this._classNm+"-selected-choice:not(."+this._classNm+"-locked)",function(e){"ojcombobox"===this._elemNm&&o.search[0].focus(),o._selectChoice($(this))}),(t=$("label[for='"+this._getAttribute("id")+"']")).attr("id")||t.attr("id",this._classNm+"-label-"+n),this._contentElement="ojcombobox"===this._elemNm?this.search:this.selection,e.find("."+this._classNm+"-input").attr("id",this._classNm+"-input-"+n),this.results.attr("id")||this.results.attr("id","oj-listbox-results-"+n),this._contentElement.attr("aria-owns",this.results.attr("id")),this._contentElement.attr("aria-labelledby",t.attr("id")),this.opts.element.attr("aria-labelledby",t.attr("id")),this.search.attr("id")&&t.attr("for",this.search.attr("id")),this._getAttribute("aria-label")&&this._contentElement.attr("aria-label",this._getAttribute("aria-label")),this._getAttribute("aria-controls")&&this._contentElement.attr("aria-controls",this._getAttribute("aria-controls")),this.elementTabIndex&&this._contentElement.attr("tabindex",this.elementTabIndex),this.keydowns=0,"ojselect"===this._elemNm&&(this.selection.on("keydown",this._bind(this._containerKeydownHandler)),this.selection.on("keyup",this._bind(function(e){this.keydowns=0}))),this.search.on("keydown",this._bind(this._containerKeydownHandler)),this.search.on("keyup",this._bind(function(e){this.keydowns=0})),this.search.on("input",this._bind(function(e){this.ojContext._SetRawValue(this.search.val(),e)})),this.search.on("blur keyup",this._bind(function(e){if("keyup"!==e.type||10===e.keyCode||13===e.keyCode){if(this.opts.manageNewEntry&&this.search.val()&&this.results.find(".oj-hover").length<=0){var t=this.opts.manageNewEntry(this.search.val()),i={trigger:"blur"===e.type?Ie.ValueChangeTriggerTypes.BLUR:Ie.ValueChangeTriggerTypes.ENTER_PRESSED};this._onSelect(t,i,e)}this.search.removeClass(this._classNm+"-focused"),this.container.removeClass("oj-focus"),this._selectChoice(null),this._opened()||"oj-select"===this._classNm||this._clearSearch(),e.stopImmediatePropagation()}})),this.container.on("click touchstart",i,this._bind(function(e){this._isInterfaceEnabled()&&($(e.target).closest("."+this._classNm+"-selected-choice").length>0||(this._selectChoice(null),this._opened()?this.close(e):(this.open(e),("ojcombobox"===this._elemNm||this._hasSearchBox())&&this._focusSearch()),e.preventDefault()))})),this.container.on("focus",i,this._bind(function(){this._isInterfaceEnabled()})),this._initContainerWidth(),this.opts.element.hide().attr("aria-hidden",!0),this.container.append(this.opts.element),this._clearSearch()},_containerKeydownHandler:function(e){if(this._isInterfaceEnabled()){++this.keydowns;var t=this.selection.find("."+this._classNm+"-selected-choice.oj-focus"),i=t.prev("."+this._classNm+"-selected-choice:not(."+this._classNm+"-locked)"),n=t.next("."+this._classNm+"-selected-choice:not(."+this._classNm+"-locked)"),o="ojselect"!==this._elemNm||this._userTyping?Ie.getCursorInfo(this.search):Ie.getCursorInfo(this.selection);if(t.length&&(e.which==Ie.KEY.LEFT||e.which==Ie.KEY.RIGHT||e.which==Ie.KEY.BACKSPACE||e.which==Ie.KEY.DELETE||e.which==Ie.KEY.ENTER)){var s=t;return e.which==Ie.KEY.LEFT&&i.length?s=i:e.which==Ie.KEY.RIGHT?s=n.length?n:null:e.which===Ie.KEY.BACKSPACE?(this._unselect(t.first(),e),this._resetSearchWidth(),s=i.length?i:n):e.which==Ie.KEY.DELETE?(this._unselect(t.first(),e),this._resetSearchWidth(),s=n.length?n:null):e.which==Ie.KEY.ENTER&&(s=null),this._selectChoice(s),e.preventDefault(),void(s&&s.length||this.open(e))}if((e.which===Ie.KEY.BACKSPACE&&1==this.keydowns||e.which==Ie.KEY.LEFT)&&0==o.offset&&!o.length)return this._selectChoice(this.selection.find("."+this._classNm+"-selected-choice:not(."+this._classNm+"-locked)").last()),void e.preventDefault();if(this._selectChoice(null),this._opened()){switch(e.which){case Ie.KEY.UP:case Ie.KEY.DOWN:return this._moveHighlight(e.which===Ie.KEY.UP?-1:1),void e.preventDefault();case Ie.KEY.ENTER:return this._selectHighlighted(null,e),void e.preventDefault();case Ie.KEY.TAB:return void this.close(e);case Ie.KEY.ESC:return this._cancel(e),void e.preventDefault()}!1!==this._userTyping||Ie.KEY.isControl(e)||Ie.KEY.isFunctionKey(e)||(this._userTyping=!0,this.close())}if(!(e.which===Ie.KEY.TAB||Ie.KEY.isControl(e)||Ie.KEY.isFunctionKey(e)||e.which===Ie.KEY.ESC||e.which===Ie.KEY.ENTER&&this.search.val()&&"ojcombobox"===this._elemNm)){switch(e.which){case Ie.KEY.UP:case Ie.KEY.DOWN:return this.open(e),void e.preventDefault();case Ie.KEY.PAGE_UP:case Ie.KEY.PAGE_DOWN:case Ie.KEY.ENTER:return void e.preventDefault()}this._userTyping=!0}}},_enableInterface:function(){Ne.superclass._enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this._isInterfaceEnabled())},_initSelection:function(e){if(null!==this.getVal()&&0!==this.getVal().length||"oj-select"!==this._classNm&&""!==this.opts.element.text().trim()||(this._updateSelection(e||[]),this.close(),this._clearSearch()),this.datalist||null!==this.getVal()&&this.getVal().length){var t,i=this;t=this.datalist?this.datalist:this.opts.element,Ie.applyValueOptions(this,this.opts)||this.opts.initSelection.call(null,t,function(e){null!=e&&0!==e.length&&(i._updateSelection(e),i.close(),i._clearSearch())})}},close:function(e){this._opened()&&Ne.superclass.close.apply(this,arguments)},_focus:function(){this.close(),this.search.focus()},_updateSelection:function(e){var t=[],i=[],n=this;$(e).each(function(){t.indexOf(n.id(this))<0&&(t.push(n.id(this)),i.push(this))}),e=i,"init"==this.opts.fetchType&&e&&e.length>0&&("oj-combobox"==this._classNm||"oj-select"==this._classNm)&&this.setValOpts(e),this.selection.find("."+this._classNm+"-selected-choice").remove(),this.selection.find(".oj-select-default").remove(),$(e).each(function(){n._addSelectedChoice(this)}),this.currentItem=e,this.opts.element.val(0===t.length?"":t.join(this.opts.separator)),n._postprocessResults()},_onSelect:function(e,t,i){if(this._triggerSelect(e)){var n;t&&t.trigger&&(n={optionMetadata:{trigger:t.trigger}});var o=this.id(e),s=this.getVal()?this.getVal().slice(0):[],r=this.getValOpts()?this.getValOpts().slice(0):[],a="oj-combobox"===this._classNm||"oj-select"===this._classNm;this.ojContext.isValid()||(s=Ie.splitVal(this.opts.element.val(),this.opts.separator));var l=this;$(e).each(function(t){s.indexOf(o)<0&&""!==o&&(s.push(o),a&&(Array.isArray(e)?r.push(Ie.findOptionFromResult(l,o,e[t])):r.push(Ie.findOptionFromResult(l,o,e))))}),a&&(this._skipSetValueOptions=!0,this.setValOpts(r)),this.setVal(s,i,n),this._skipSetValueOptions=!1,!this.select&&this.opts.closeOnSelect||this._postprocessResults(e,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect&&(this.close(i),this._resetSearchWidth()),t&&t.noFocus||"ojcombobox"!==this._elemNm||this._focusSearch()}},_cancel:function(e){this.close(e),"ojcombobox"===this._elemNm&&this._focusSearch()},_addSelectedChoice:function(e){var t,i=!e.locked,n=$("<li class='"+this._classNm+"-selected-choice'>    <div></div>    <a href='#' onclick='return false;' role='button' aria-label='remove' class='"+this._classNm+"-clear-entry       oj-component-icon oj-clickable-icon-nocontext "+this._classNm+"-clear-entry-icon' tabindex='-1'>    </a></li>"),o=$("<li class='"+this._classNm+"-selected-choice "+this._classNm+"-locked'><div></div></li>"),s=i?n:o;this.id(e);void 0!==(t=this.opts.formatSelection(e))&&(s.find("div").addClass(this._classNm+"-selected-choice-label").text(t),s.find("."+this._classNm+"-clear-entry").attr("aria-label",t+" remove"),s.attr("valueText",t)),i&&s.find("."+this._classNm+"-clear-entry").on("mousedown",Ie.killEvent).on("click dblclick",this._bind(function(e){this._isInterfaceEnabled()&&($(e.target).closest("."+this._classNm+"-selected-choice").fadeOut("fast",this._bind(function(){this._unselect($(e.target),e),this.selection.find("."+this._classNm+"-selected-choice.oj-focus").removeClass("oj-focus"),this.close(e),"ojcombobox"===this._elemNm&&this._focusSearch()})).dequeue(),Ie.killEvent(e))})),s.data(this._elemNm,e),"ojcombobox"===this._elemNm?s.insertBefore(this.searchContainer):this.selection.append(s)},_syncValueOptions:function(e,t,n){var o=[];if(t&&n){for(var s=0;s<t.length;s++)for(var r=0;r<n.length;r++){var a=n[r];i.Object.compareValues(a.value,t[s])&&o.push(a)}Ie.setValueOptions(e,o)}},_unselect:function(e,t){var i,n,o=this.getVal()?this.getVal().slice(0):[];if(0===(e=e.closest("."+this._classNm+"-selected-choice")).length)throw"Invalid argument: "+e+". Must be ."+this._classNm+"-selected-choice";if(i=e.data(this._elemNm)){for(this.ojContext.isValid()||(o=Ie.splitVal(this.opts.element.val(),this.opts.separator));(n=o.indexOf(this.id(i)))>=0;)o.splice(n,1),this._syncValueOptions(this.ojContext,o,this.getValOpts()),this._skipSetValueOptions=!0,this.setVal(o,t),this._skipSetValueOptions=!1,this.select&&this._postprocessResults();e.remove()}},_postprocessResults:function(e,t,i){var n=this.getVal()&&(this.opts.element.val()||this.ojContext.isValid())?this.getVal():[],o=this.results.find(".oj-listbox-result"),s=this.results.find(".oj-listbox-result-with-children"),r=this;Ie.each2(o,function(e,t){var i=r.id(t.data(r._elemNm));n&&n.indexOf(i)>=0&&(t.addClass("oj-selected"),t.find(".oj-listbox-result-selectable").addClass("oj-selected"))}),Ie.each2(s,function(e,t){t.is(".oj-listbox-result-selectable")||0!==t.find(".oj-listbox-result-selectable:not(.oj-selected)").length||t.addClass("oj-selected")}),!o.filter(".oj-listbox-result:not(.oj-selected)").length>0&&"oj-select"!==this._classNm&&this.close()},_isDataSelected:function(e){var t=this.getVal();if(!t||0==t.length)return!1;for(var i=e.results,n=0;n<i.length;n++)if(-1==t.indexOf(this.id(i[n])))return!1;return!0},_resetSearchWidth:function(){},setVal:function(e,t,i){var n;n=[],"string"==typeof e&&(e=Ie.splitVal(e,this.opts.separator));for(var o=0;o<e.length;o++)n.indexOf(e[o])<0&&n.push(e[o]);var s={doValueChangeCheck:!1};if(i&&(s._context=i),!this._skipSetValueOptions){var r,a=Ie.getLastQueryResult(this);a&&(r=Ie.findOptions(a,e)),r&&r.length&&Ie.setValueOptions(this.ojContext,r)}this.ojContext._SetValue(n,t,s),(this.ojContext.isValid()||0===n.length)&&this.opts.element.val(0===n.length?"":n.join(this.opts.separator)),this.search.attr("aria-activedescendant",this.opts.element.attr("id"))}}),Pe=Ie.clazz(Ne,{_elemNm:"ojcombobox",_classNm:"oj-combobox",_createContainer:function(){return $(document.createElement("div")).attr({class:"oj-combobox oj-combobox-multi oj-component"}).html(["<ul class='oj-combobox-choices'>","  <li class='oj-combobox-search-field'><span style='display:none'>&nbsp;</span>","    <input type='text' role='combobox' aria-expanded='false' aria-autocomplete='list' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='oj-combobox-input'>","  </li>","</ul>","<div class='oj-combobox-description oj-helper-hidden-accessible'/>","<div class='oj-listbox-drop oj-listbox-drop-multi' style='display:none'>","   <ul class='oj-listbox-results' role='listbox'>","   </ul>","</div>"].join(""))},_opening:function(e,t){this._resizeSearch(),Pe.superclass._opening.apply(this,arguments),this._focusSearch(),t||this._updateResults(!0),this.search.focus()},_clearSearch:function(){var e=this._getPlaceholder(),t=this._getMaxSearchWidth();void 0===e||this.getVal()&&0!==this.getVal().length||this.getValOpts()&&this.getValOpts().length?(this.search.attr("placeholder",""),this.search.val("").width(10),this.searchContainer.width("auto")):(this.search.attr("placeholder",e),this.search.val("").width(t>0?t:this.container.css("width")),this.searchContainer.width("100%"))},_resetSearchWidth:function(){this.search.width(10)},_getMaxSearchWidth:function(){return this.selection.width()-Ie.getSideBorderPadding(this.search)},_textWidth:function(e){var t=document.createElement("span"),i=document.createTextNode(e);t.style.display="none",t.appendChild(i),$("body").append(t);var n=$("body").find("span:last").width();return $("body").find("span:last").remove(),n},_resizeSearch:function(){var e,t,i,n,o=Ie.getSideBorderPadding(this.search);e=this._textWidth(this.search.val())+10,t=this.search.offset().left,(n=(i=this.selection.width())-(t-this.selection.offset().left)-o)<e&&(n=i-o),n<40&&(n=i-o),n<=0&&(n=e),this.search.width(Math.floor(n))}}),Me=Ie.clazz(Ne,{_elemNm:"ojselect",_classNm:"oj-select",_userTyping:!1,_createContainer:function(){return $(document.createElement("div")).attr({class:"oj-select oj-select-multi oj-component"}).html(["<ul class='oj-select-choices' tabindex='0' role='combobox' ","  aria-autocomplete='none' aria-expanded='false'>","</ul>","<div class='oj-listbox-drop' style='display:none' role='dialog'>","  <div class='oj-listbox-search-wrapper'>","  <div class='oj-listbox-search'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off'","           spellcheck='false' class='oj-listbox-input' title='Search field' ","           role='combobox' aria-expanded='false' aria-autocomplete='list' />","    <span class='oj-listbox-spyglass-box'>","      <span class='oj-component-icon oj-clickable-icon-nocontext oj-listbox-search-icon' role='presentation'>","       <b role='presentation'></b></span>","    </span>","  </div>","  </div>","   <ul class='oj-listbox-results' role='listbox'>","   </ul>","</div>","<div role='region' class='oj-helper-hidden-accessible oj-listbox-liveregion' aria-live='polite'></div>"].join(""))},_containerKeydownHandler:function(e){Me.superclass._containerKeydownHandler.apply(this,arguments),this._userTyping&&!this._opened()&&this.open(e)},_opening:function(e,t){Me.superclass._opening.apply(this,arguments);var i=Ie.getSearchText(e);this._showSearchBox(i),t||(i?this._updateResults():this._updateResults(!0))},close:function(e){!0===this._userTyping&&(this._userTyping=!1),Me.superclass.close.apply(this,arguments),!e||e instanceof MouseEvent&&e.target!=this.selection&&e.target!=this.search||Ie._focus(this,this.selection)},_clearSearch:function(){var e=this._getPlaceholder();if(e&&(!this.getVal()||0===this.getVal().length)){var t=$("<li></li>");t.addClass("oj-select-default"),t.text(e),this.selection.append(t)}}}),je=Ie.clazz(xe,{_elemNm:"ojinputsearch",_classNm:"oj-inputsearch",_createContainer:function(){var e=$(document.createElement("div")).attr({class:"oj-inputsearch oj-component"}).html(["<div class='oj-inputsearch-choice' tabindex='-1' role='presentation'>","   <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off'","       spellcheck='false' class='oj-inputsearch-input' role='combobox' aria-expanded='false' aria-autocomplete='list' />","   <a class='oj-inputsearch-search-button oj-inputsearch-search-icon oj-component-icon oj-clickable-icon-nocontext'","       role='button' aria-label='search'></a>","</div>","<div class='oj-listbox-drop' style='display:none' role='presentation'>","   <ul class='oj-listbox-results' role='listbox'>","   </ul>","</div>","<div role='region' class='oj-helper-hidden-accessible oj-listbox-liveregion' aria-live='polite'></div>"].join("")),t=e.find(".oj-inputsearch-search-button");return this._attachSearchIconClickHandler(t),e},_attachSearchIconClickHandler:function(e){var t=this;e.on("click",function(e,i){if(t._isInterfaceEnabled()){if(t.opts.manageNewEntry){var n=t.search.val(),o=t.opts.manageNewEntry(n),s={trigger:Ie.ValueChangeTriggerTypes.SEARCH_ICON_CLICKED},r=t.selection.data(t._elemNm);!r&&""!==n||r&&r.label!==n||!t.ojContext.isValid()&&n!==t._previousDisplayValue?(t._onSelect(o,s,e),t._triggerUpdateEvent(o,s,e)):(r&&r.label===n&&(o=r),t._triggerUpdateEvent(o,s,e))}return!1}}).on("mousedown",function(e){return e.stopPropagation(),!1})},_enable:function(e){je.superclass._enable.apply(this,arguments),this._enabled?this.container.find(".oj-inputsearch-search-button").removeClass("oj-disabled"):this.container.find(".oj-inputsearch-search-button").addClass("oj-disabled")},_triggerUpdateEvent:function(e,t,i){var n;t&&(n=t.trigger);var o={_context:{optionMetadata:{trigger:n}}},s=this.id(e);if(s&&0!==s.length||(s=e.label?e.label:[]),void 0!==this.ojContext._Validate(s,i,o)&&this.ojContext.isValid()){"string"==typeof s&&(s=[s]);var r={value:s,optionMetadata:{trigger:n}};this.ojContext._trigger("update",i,r)}},_prepareOpts:function(e){return(e=je.superclass._prepareOpts.apply(this,arguments)).highlightTermInOptions=function(e){return!0},e}});i.__registerWidget("oj.ojCombobox",$.oj.editableValue,{defaultElement:"<input>",widgetEventPrefix:"oj",options:{converter:void 0,filterOnOpen:"none",placeholder:null,options:null,optionsKeys:{label:null,value:null,children:null,childKeys:null},pickerAttributes:null,optionRenderer:null,minLength:0,rawValue:void 0,required:!1,validators:void 0,valueOption:null,valueOptions:null,valueUpdated:null},widget:function(){return this.combobox.container},_ComponentCreate:function(){this._super(),Ie.wrapDataProviderIfNeeded(this,null),this._setup()},_AfterCreate:function(){if(this._super(),this._IsCustomElement()){var e=this.OuterWrapper.id;e&&i.EditableValueUtils.setSubIdForCustomLabelFor(this._GetContentElement()[0],e)}},_InitOptions:function(e,t){if(this._super(e,t),i.EditableValueUtils.initializeOptionsFromDom([{attribute:"disabled",validateOption:!0},{attribute:"placeholder"},{attribute:"required",coerceDomValue:!0,validateOption:!0},{attribute:"title"}],t,this),this.multiple=this._IsCustomElement()?"OJ-COMBOBOX-MANY"===this.OuterWrapper.nodeName:this.options.multiple,void 0===this.options.value)this._IsCustomElement()||(this.options.value=void 0!==this.element.attr("value")?Ie.splitVal(this.element.val(),","):null);else{var n=this.options.value;Array.isArray(n)?this._IsCustomElement()||(n=n.slice(0)):"string"==typeof n&&(!0===this.multiple?n=Ie.splitVal(n,","):this._IsCustomElement()||(n=[n])),this.options.value=n}},_IsRequired:function(){return this.options.required},_AfterSetOptionRequired:i.EditableValueUtils._AfterSetOptionRequired,_AfterSetOptionValidators:i.EditableValueUtils._AfterSetOptionValidators,_AfterSetOptionConverter:i.EditableValueUtils._AfterSetOptionConverter,_ResetConverter:i.EditableValueUtils._ResetConverter,_GetConverter:i.EditableValueUtils._GetConverter,_GetNormalizedValidatorsFromOption:i.EditableValueUtils._GetNormalizedValidatorsFromOption,_setup:function(){var e={};e.element=this.element,e.ojContext=this,e=$.extend(this.options,e),this.combobox=this.multiple?new Pe:new xe,this.combobox._init(e),this._refreshRequired(this.options.required),this._resolveValueOptionsLater=Ie.mergeValueAndValueOptions(this)},_refreshRequired:i.EditableValueUtils._refreshRequired,_AriaRequiredUnsupported:function(){return!1},_destroy:function(){this.combobox._destroy(),this._super()},refresh:function(){this._super(),this.combobox._destroy(),this._setup(),this._SetRootAttributes()},_setOption:function(e,t,i){"value"===e&&(Array.isArray(t)?this._IsCustomElement()||(t=t.slice(0)):"string"==typeof t&&(!0===this.multiple?t=Ie.splitVal(t,","):this._IsCustomElement()||(t=[t])),i&&i._context&&i._context.optionMetadata?this.combobox.valueChangeTrigger=i._context.optionMetadata.trigger:this.combobox.valueChangeTrigger=null,"string"==typeof this.options.placeholder&&(null==t||t&&0==t.length||this._IsCustomElement()&&""==t)&&Ie.setValueOptions(this,this.multiple?[]:"")),"options"===e&&(Ie.removeDataProviderEventListeners(this),Ie.clearDataProviderWrapper(this)),this._super(e,t,i),"valueOption"===e&&!0!==this.multiple?Ie.syncValueWithValueOption(this,t,null):"valueOptions"===e&&!0===this.multiple&&Array.isArray(t)?Ie.syncValueWithValueOptions(this,t,null):"value"===e?Ie.updateValueOptions(this.combobox):"options"===e?(Ie.isDataProvider(t)&&(Ie.wrapDataProviderIfNeeded(this,this.combobox?this.combobox.opts:null),Ie.addDataProviderEventListeners(this)),this.combobox.opts.options=t,this.combobox.opts=this.combobox._prepareOpts(this.combobox.opts)):"disabled"===e&&(t?this.combobox._disable():this.combobox._enable())},_AfterSetOption:function(e,t,i){switch(this._superApply(arguments),e){case"required":this._AfterSetOptionRequired(e);break;case"validators":this._AfterSetOptionValidators(e);break;case"converter":this._AfterSetOptionConverter(e)}},_NotifyDetached:function(){this._superApply(arguments),this.combobox.close()},_NotifyHidden:function(){this._superApply(arguments),this.combobox.close()},_VerifyConnectedForSetup:function(){return!0},_SetDisplayValue:function(e){Ie.applyValueOptions(this.combobox,this.options)?this.multiple&&this.combobox._clearSearch():this.combobox._initSelection(),this._resolveValueOptionsLater=!1},_SetPlaceholder:function(e){this.combobox&&(this.combobox.opts.placeholder=e,this.combobox._setPlaceholder&&this.combobox._setPlaceholder())},validate:i.EditableValueUtils.validate,_parseValue:function(e){var t;if("string"==typeof e&&(!0===this.multiple?e=Ie.splitVal(e,","):this._IsCustomElement()||(e=[e])),Array.isArray(e)){t=[];for(var i=0;i<e.length;i++){var n=this._super(e[i]);t.push(n)}}else t=this._super(e);return t},_GetMessagingLauncherElement:function(){return this.combobox.search},_NotifyContextMenuGesture:function(e,t,i){var n=this._GetMessagingLauncherElement();this._OpenContextMenu(t,i,{launcher:n})},_GetContentElement:function(){return this.combobox.search},_GetDefaultStyleClass:function(){return"oj-combobox"},_ValidateReturnBoolean:function(){var e=this.combobox.search.val(),t=null;if(!0!==this.multiple)t=this._IsCustomElement()?e:null==e||""===e?[]:[e];else{var i=[];this.isValid()&&(i=this.combobox.getVal()),null==e||""===e?t=i:(i.push(e),t=i)}return this._SetValue(t,null,this._VALIDATE_METHOD_OPTIONS)},_getDropdown:function(){if(this.combobox&&this.combobox._opened())for(var e=$(".oj-listbox-drop"),t=0;t<e.length;t++)if("oj-listbox-drop"==$(e[t]).attr("id")&&$(e[t]).attr("data-oj-containerid")==this.combobox.containerId)return $(e[t]);return null},_findItem:function(e,t){for(var i=0;i<e.length;i++)if($(e[i]).data("ojcombobox").value===t)return e[i];return null},getNodeBySubId:function(e){var t,i=null;if(null==e)return this.combobox.container?this.combobox.container[0]:null;if(!(i=this._super(e))){"oj-combobox-drop"===(t=e.subId)&&(t="oj-listbox-drop"),"oj-combobox-results"===t&&(t="oj-listbox-results"),"oj-combobox-selection"===t&&(t="oj-combobox-selected-choice");var n=this._getDropdown();switch(t){case"oj-combobox-input":case"oj-combobox-arrow":i=this.widget().find("."+t)[0];break;case"oj-listitem":if(n){var o=n.find(".oj-listbox-result");i=this._findItem(o,e.value)}break;case"oj-combobox-remove":var s=this.widget().find(".oj-combobox-selected-choice"),r=this._findItem(s,e.value);i=r?$(r).find(".oj-combobox-clear-entry-icon")[0]:null;break;case"oj-listbox-drop":n&&(i=n[0]);break;case"oj-listbox-results":n&&(i=n.find("."+t)[0]);break;case"oj-combobox-selected-choice":i=this.widget().find("."+t).toArray()}}return i||null},getSubIdByNode:function(e){var t=null;if(null!=e){var i=$(e);t=i.hasClass("oj-combobox-input")?{subId:"oj-combobox-input"}:i.hasClass("oj-combobox-arrow")?{subId:"oj-combobox-arrow"}:i.hasClass("oj-listbox-result")?{subId:"oj-listitem",value:i.data("ojcombobox").value}:i.hasClass("oj-combobox-clear-entry-icon")?{subId:"oj-combobox-remove",value:i.closest(".oj-combobox-selected-choice").data("ojcombobox").value}:this._super(e)}return t}}),i.__registerWidget("oj.ojInputSearch",$.oj.editableValue,{defaultElement:"<input>",widgetEventPrefix:"oj",options:{placeholder:void 0,required:!1,list:void 0,options:null,optionsKeys:null,pickerAttributes:null,optionRenderer:null,minLength:0,beforeExpand:null,rawValue:void 0,optionChange:null,update:null,validators:void 0},widget:function(){return this.inputSearch.container},_ComponentCreate:function(){this._super(),this._setup()},_InitOptions:function(e,t){if(this._super(e,t),i.EditableValueUtils.initializeOptionsFromDom([{attribute:"disabled",validateOption:!0},{attribute:"placeholder"},{attribute:"required",coerceDomValue:!0,validateOption:!0},{attribute:"title"}],t,this),void 0===this.options.value)this.options.value=void 0!==this.element.attr("value")?Ie.splitVal(this.element.val(),","):null;else{var n=this.options.value;Array.isArray(n)?n=n.slice(0):"string"==typeof n&&(n=[n]),this.options.value=n}},_AfterSetOption:function(e,t,i){switch(this._superApply(arguments),e){case"required":this._AfterSetOptionRequired(e);break;case"validators":this._AfterSetOptionValidators(e)}},_IsRequired:function(){return this.options.required},_AfterSetOptionRequired:i.EditableValueUtils._AfterSetOptionRequired,_AfterSetOptionValidators:i.EditableValueUtils._AfterSetOptionValidators,_refreshRequired:i.EditableValueUtils._refreshRequired,_GetNormalizedValidatorsFromOption:i.EditableValueUtils._GetNormalizedValidatorsFromOption,_AriaRequiredUnsupported:function(){return!1},_setup:function(){var e={};e.element=this.element,e.ojContext=this,e.inputSearch=!0,e=$.extend(this.options,e),this.inputSearch=new je,this.inputSearch._init(e),this._refreshRequired(this.options.required)},_destroy:function(){this.inputSearch._destroy(),this._super()},refresh:function(){this._super(),this.inputSearch._destroy(),this._setup(),this._SetRootAttributes()},_setOption:function(e,t,n){"value"===e&&(null!=t&&(Array.isArray(t)?t=t.slice(0):"string"==typeof t?t=[t]:i.Logger.error("ojInputSearch value has to be an array of string or a string.")),n&&n._context&&n._context.optionMetadata?this.inputSearch.valueChangeTrigger=n._context.optionMetadata.trigger:this.inputSearch.valueChangeTrigger=null),this._super(e,t,n),"options"===e&&(this.inputSearch.opts.options=t,this.inputSearch.opts=this.inputSearch._prepareOpts(this.inputSearch.opts)),"disabled"===e&&(t?this.inputSearch._disable():this.inputSearch._enable())},_NotifyDetached:function(){this._superApply(arguments),this.inputSearch.close()},_NotifyHidden:function(){this._superApply(arguments),this.inputSearch.close()},_SetDisplayValue:function(e){this.inputSearch._initSelection()},_SetPlaceholder:function(e){this.inputSearch&&(this.inputSearch.opts.placeholder=e,this.inputSearch._setPlaceholder&&this.inputSearch._setPlaceholder())},validate:function(){var e=this.inputSearch.search.val(),t=null,i=[];return this.isValid()&&(i=this.inputSearch.getVal()),t=null==e||""===e?i:[e],this._SetValue(t,null,this._VALIDATE_METHOD_OPTIONS)},_parseValue:function(e){var t=[];if(null==e)return t;if(Array.isArray(e))for(var n=0;n<e.length;n++){var o=this._super(e[n]);t.push(o.toString())}else if("string"==typeof e){o=this._super(e);t.push(o.toString())}else i.Logger.error("ojInputSearch value has to be an array of string or a string.");return t},_GetMessagingLauncherElement:function(){return this.inputSearch.search},_GetContentElement:function(){return this.inputSearch.search},_GetDefaultStyleClass:function(){return"oj-inputsearch"},_getDropdown:function(){if(this.inputSearch&&this.inputSearch._opened())for(var e=$(".oj-listbox-drop"),t=0;t<e.length;t++)if("oj-listbox-drop"==$(e[t]).attr("id")&&$(e[t]).attr("data-oj-containerid")==this.inputSearch.containerId)return $(e[t]);return null},expand:function(){this.inputSearch.open()},collapse:function(){this.inputSearch.close()},getNodeBySubId:function(e){var t,i=null;if(null===e)return this.inputSearch.container?this.inputSearch.container[0]:null;if(!(i=this._super(e)))switch("oj-inputsearch-search"===(t=e.subId)&&(t="oj-inputsearch-search-button"),t){case"oj-inputsearch-input":case"oj-inputsearch-search-button":i=this.widget().find("."+t)[0];break;case"oj-listitem":var n=this._getDropdown();if(n){var o=n.find(".oj-listbox-result");i=this.inputSearch._findItem(o,e.value)}}return i||null},getSubIdByNode:function(e){var t=null;if(null!=e){var i=$(e);t=i.hasClass("oj-inputsearch-input")?{subId:"oj-inputsearch-input"}:i.hasClass("oj-inputsearch-search-button")?{subId:"oj-inputsearch-search"}:i.hasClass("oj-listbox-result")?{subId:"oj-listitem",value:i.data("ojinputsearch").value}:this._super(e)}return t}}),i.__registerWidget("oj.ojSelect",$.oj.editableValue,{defaultElement:"<select>",widgetEventPrefix:"oj",options:{minimumResultsForSearch:15,placeholder:null,optionRenderer:null,options:null,optionsKeys:{label:null,value:null,children:null,childKeys:null},pickerAttributes:null,required:!1,renderMode:"jet",valueOption:null,valueOptions:null},widget:function(){return this.select?this.select.container:this.element.parent()},_ComponentCreate:function(){this._super(),Ie.wrapDataProviderIfNeeded(this,null),this._setup()},_AfterCreate:function(){if(this._super(),this._IsCustomElement()){var e=this.uuid+"_Label",t=i.EditableValueUtils.getOjLabelId($(this.OuterWrapper),e);t&&this._GetContentElement().attr("aria-labelledby",t)}},_AfterSetOption:function(e,t,i){switch(this._superApply(arguments),e){case"required":this._AfterSetOptionRequired(e)}},_IsRequired:function(){return this.options.required},_AfterSetOptionRequired:i.EditableValueUtils._AfterSetOptionRequired,_nativeSetDisabled:function(e){e?(this.element.attr("disabled",""),this.element.parent().addClass("oj-disabled").removeClass("oj-enabled")):(this.element.removeAttr("disabled"),this.element.parent().removeClass("oj-disabled").addClass("oj-enabled"))},_nativeChangeHandler:function(e){var t=[],i=[],n=!this._IsRequired()&&this._HasPlaceholderSet();$(e.target).find("option").each(function(){this.selected&&(this.value||n&&""===this.value)&&(t.push(this.value),i.push({value:this.value,label:this.text}))}),this._IsCustomElement()&&!0!==this.multiple?(this._SetValue(t[0],e,{doValueChangeCheck:!1,_context:{internalSet:!0}}),Ie.setValueOptions(this,i[0])):(this._SetValue(t,e,{doValueChangeCheck:!1,_context:{internalSet:!0}}),Ie.setValueOptions(this,i))},_nativeQueryCallback:function(e){if(e){var t=this.element;Ie.arrayPopulateResults(t,e,this._formatValue.bind(this),Ie.isDataProvider(this.options.options)?null:this.options.optionsKeys),t.addClass(Ie.GENERATED_OPTIONS_SELECTOR)}},_nativeSetSelected:function(e){var t=null;e?t=e:(this._HasPlaceholderSet()&&(this.options.required&&(t=this._nativeFindFirstEnabledOptionValue()),this._SetPlaceholder(this.options.placeholder)),null===t&&(t=this._nativeFindFirstEnabledOptionValue())),this._setInitialSelectedValue(t)},_nativeFetchFromDataProvider:function(e){var t=this;Ie.fetchFirstBlockFromDataProvider(this.element,e).then(function(i){if(t._nativeQueryCallback(i),i.length){var n=t.options.value;n?Ie.validateFromDataProvider(t.element,e,n).then(function(e){if(e){var i=e.valueOptions;Array.isArray(i)&&i.length&&Ie.setValueOptions(t,i);var n=e.value;Array.isArray(n)&&n.length&&t._nativeSetSelected(t.multiple?n:n[0])}}):t._nativeSetSelected()}})},_nativeSetup:function(){var e=this.element;if(e.wrap("<div>").parent().addClass("oj-select-native oj-component oj-select oj-form-control"),e.addClass("oj-select-select oj-component-initnode"),this.multiple?(e[0].multiple||(e[0].multiple=!0),e.parent().prepend("<a class='oj-select-arrow oj-component-icon oj-clickable-icon-nocontext oj-select-multiple-open-icon' role='presentation'></a>")):e.parent().prepend("<a class='oj-select-arrow oj-component-icon oj-clickable-icon-nocontext oj-select-open-icon' role='presentation'></a>"),this._nativeSetDisabled(this.options.disabled),this.options.list)Ie.listPopulateResults(e,$("#"+this.options.list).children(),this._formatValue.bind(this)),e.addClass(Ie.GENERATED_OPTIONS_SELECTOR);else if(this.options.options){(i=Ie.getDataProvider(this.options))?this._nativeFetchFromDataProvider(i):this._nativeQueryCallback(this.options.options)}else if(this._IsCustomElement()){var t=e.children();1===t.length&&t.hasClass("oj-listbox-placeholder")||(Ie.ojOptionPopulateResults(e,t,this._formatValue.bind(this)),e.addClass(Ie.GENERATED_OPTIONS_SELECTOR))}this._focusable({element:e,applyHighlight:!0});var i=Ie.getDataProvider(this.options);this.options.value||this._HasPlaceholderSet()||i||this._setInitialSelectedValue(this._nativeFindFirstEnabledOptionValue()),e.change(this._nativeChangeHandler.bind(this)),Ie.addDataProviderEventListeners(this)},_jetSetup:function(){var e={};e.element=this.element,e.ojContext=this,e=$.extend(this.options,e),this.select=this.multiple?new Me:new Le,this.select._init(e),this.select.container.addClass("oj-select-jet oj-form-control"),this._focusable({element:this.select.selection,applyHighlight:!0})},_setInitialSelectedValue:function(e){var t;t=this._IsCustomElement()?e:Array.isArray(e)?e:[e],this._SetValue(t,null,{doValueChangeCheck:!1,_context:{internalSet:!0,writeback:!0},changed:!0})},_setup:function(){this._resolveValueOptionsLater=Ie.mergeValueAndValueOptions(this),this._isNative()?this._nativeSetup():this._jetSetup(),this._refreshRequired(this.options.required)},refresh:function(){this._super(),this._cleanup(),this._setup(),this._isNative()&&this.options.value&&this.element.val(this.options.value),this._SetRootAttributes()},_refreshRequired:i.EditableValueUtils._refreshRequired,_AriaRequiredUnsupported:function(){return!1},_destroy:function(){this._cleanup(),this._super()},_NotifyDetached:function(){this._superApply(arguments),this.select&&this.select.close()},_NotifyHidden:function(){this._superApply(arguments),this.select&&this.select.close()},_VerifyConnectedForSetup:function(){return!0},_SetPlaceholder:function(e){if(this._isNative()&&null!=e){var t=$(this.element.children("option:first-child"));t&&""===t.attr("value")?(t.text(this.options.placeholder),t.attr("value","")):((t=Ie.createOptionTag(0,"",e,this._formatValue.bind(this))).addClass("oj-listbox-placeholder"),this._hidePlaceholder(t,this._IsRequired()),t.prependTo(this.element))}},_HasPlaceholderSet:function(){return"string"==typeof this.options.placeholder},_ClearPlaceholder:function(){this._SetPlaceholderOption(null),this._SetPlaceholder(null)},_InitOptions:function(e,t){if(this._super(e,t),i.EditableValueUtils.initializeOptionsFromDom([{attribute:"disabled",validateOption:!0},{attribute:"placeholder"},{attribute:"required",coerceDomValue:!0,validateOption:!0},{attribute:"title"}],t,this),this.multiple=this._IsCustomElement()?"OJ-SELECT-MANY"===this.OuterWrapper.nodeName:this.options.multiple,void 0===this.options.value)this._IsCustomElement()||(this.options.value=void 0!==this.element.attr("value")?Ie.splitVal(this.element.val(),","):null);else{var n=this.options.value;Array.isArray(n)&&(this._IsCustomElement()||(n=n.slice(0))),this.options.value=n}},validate:i.EditableValueUtils.validate,_SetDisplayValue:function(e){if(this.select)Ie.applyValueOptions(this.select,this.options)||this.select._initSelection(),this._resolveValueOptionsLater=!1;else{var t;if(null==e)this._HasPlaceholderSet()&&(this.element[0].selectedIndex=0,this.element.addClass("oj-select-default")),this._resolveValueOptionsLater&&(t={value:"",label:this.options.placeholder},this.multiple&&(t=[t]),Ie.setValueOptions(this,t));else{var n=this._nativeFindLabel(e);if(null!==n||this.multiple?this.element.val(e):(i.Logger.warn("JET select: selected value not found"),this.element[0].options&&this.element[0].options.length>0?(this.element[0].selectedIndex=0,e=this.element[0].value,n=this.element[0].text):(n=String(e),this.element.val(e))),this._resolveValueOptionsLater){if(this.multiple){var o=this.element[0].selectedOptions;t=[];for(var s=0;s<o.length;s++)t.push({value:e[s],label:o[s].text})}else t={value:e,label:n};Ie.setValueOptions(this,t)}}this._resolveValueOptionsLater=!1}},_ValidateReturnBoolean:function(){if(!0===this.multiple){var e=this.select.search.val(),t=[],i=null;return this.isValid()&&(t=this.select.getVal()),null==e||""===e?i=t:(t.push(e),i=t),this._SetValue(i,null,this._VALIDATE_METHOD_OPTIONS)}return!this.select||this._SetValue(this.select.getVal(),null,this._VALIDATE_METHOD_OPTIONS)},_nativeFindFirstEnabledOptionValue:function(){var e=this.element.children("option:not(:disabled)");return e.length>0?[$(e[0]).attr("value")]:null},_nativeSetOptions:function(e){var t=this.options.value,i=this.element;if(i.hasClass(Ie.GENERATED_OPTIONS_SELECTOR))Ie.cleanupResults(i);else{var n=i.children();n.length>0&&n.remove()}if(Ie.isDataProvider(e))this._nativeFetchFromDataProvider(e);else{Ie.arrayPopulateResults(i,e,this._formatValue.bind(this),this.options.optionsKeys);var o=null;this._HasPlaceholderSet()&&(this.options.required&&(o=this._nativeFindFirstEnabledOptionValue()),this._SetPlaceholder()),null===o&&(o=this._nativeFindFirstEnabledOptionValue()),this.options.value=o,this.option("value",t)}i.addClass(Ie.GENERATED_OPTIONS_SELECTOR)},_removePlaceholderInMultiValues:function(e){for(var t,i=[],n=0;n<e.length;n++)null!=(t=e[n])&&(t.length>0?(1==i.length&&""===i[0]&&i.pop(),i.push(t)):0==i.length&&i.push(t));return i},_nativeFindLabel:function(e){var t=this.element[0].options;if(t&&t.length>0)for(var i=0;i<t.length;i++)if(t[i].value===e)return $(t[i]).text();return null},_setOption:function(e,t,i){if("value"!==e){if("placeholder"===e?this.select?(this.select.opts.placeholder=t,this.select._setPlaceholder()):(n=this.options.value)&&0!==n.length&&n[0]||(this.element[0].selectedIndex=0):"minimumResultsForSearch"===e?this.select&&(this.select.opts.minimumResultsForSearch=t):"renderMode"===e&&(this._cleanup(),this.options.renderMode=t,this.refresh()),"options"===e&&(Ie.removeDataProviderEventListeners(this),Ie.clearDataProviderWrapper(this)),this._super(e,t,i),"disabled"===e)this.select?t?this.select._disable():this.select._enable():this._nativeSetDisabled(t);else if("valueOption"===e&&!0!==this.multiple)Ie.syncValueWithValueOption(this,t,null);else if("valueOptions"===e&&!0===this.multiple&&Array.isArray(t))Ie.syncValueWithValueOptions(this,t,null);else if("options"===e)if(Ie.isDataProvider(t)&&(Ie.wrapDataProviderIfNeeded(this,this.select?this.select.opts:null),Ie.addDataProviderEventListeners(this)),this.select){var n=this.select.getVal();if((r=Ie.getDataProvider(this.options))&&n){l=this,u=this._super;Ie.applyValueOptions(this.select,this.options)?(this.select.opts.options=t,this.select.opts=l.select._prepareOpts(this.select.opts)):Ie.validateFromDataProvider(this.select.container,r,this.options.value).then(function(e){var i=e?e.value:null;if(i){var o=e.valueOptions;Array.isArray(o)&&o.length&&Ie.setValueOptions(l,o),Array.isArray(i)&&i.length&&u.call(l,"value",l.multiple?i:i[0])}else l.options.placeholder?l.select._updateSelectedOption(l.options.placeholder):Ie.fetchFirstBlockFromDataProvider(l.select.container,r,1).then(function(e){e&&e.length>0&&n===l.select.getVal()?l.select._updateSelectedOption(e[0]):(u.call(l,"value",null),l.multiple||l.select.text.text(""))});l.select.opts.options=t,l.select.opts=l.select._prepareOpts(l.select.opts)})}else this.select.opts.options=t,this.select.opts=this.select._prepareOpts(this.select.opts),this.select.setValOpts(null),this._super("value",n)}else this._nativeSetOptions(t);else if("required"===e&&this._isNative()){var o=$(this.element.find(".oj-listbox-placeholder"));o&&""===o.attr("value")&&this._hidePlaceholder(o,t)}}else{if(this._HasPlaceholderSet()&&(t&&0==t.length||this._IsCustomElement()&&""==t))return Ie.setValueOptions(this,this.multiple?[]:""),void this._super(e,t,i);var s;this.select&&((s=this.select.datalist)||(s=this.select.opts.element));var r,a=this._IsCustomElement()&&!this.multiple;if(Array.isArray(t)||a||(t=[t]),this._isNative()&&(a||(t=this._removePlaceholderInMultiValues(t)),1==t.length&&""==t[0]?this.element.addClass("oj-select-default"):this.element.removeClass("oj-select-default")),(r=Ie.getDataProvider(this.options))&&t){var l=this,u=this._super;return this.select&&(this.select.opts.options=r),void Ie.validateFromDataProvider(this._isNative()?this.element:this.select.container,r,t).then(function(t){if(t){var i=t.valueOptions;Array.isArray(i)&&i.length&&Ie.setValueOptions(l,i);var n=t.value;Array.isArray(n)&&n.length&&u.call(l,e,l.multiple?n:n[0])}})}if(a)return void(this.select&&this.select.opts.validate&&!this.select.opts.validate(s,t)&&!this._isOptionDataPending()||(this._super(e,t,i),Ie.updateValueOptions(this.select)));for(var h=[],d=0;d<t.length;d++)this.select?(!this.select.opts.validate||this.select.opts.validate(s,t[d])||this._isOptionDataPending())&&h.push(t[d]):this.element.find("option[value='"+t[d]+"']").length>0&&h.push(t[d]);(h.length>0||this.multiple)&&(this._super(e,h,i),Ie.updateValueOptions(this.select))}},_isOptionDataPending:function(){var e=this.options.options,t=this.select.datalist;if(t){if(0===t.children().length)return!0}else{if(Ie.isDataProvider(e))return!0;if(!e||0===e.length)return!0}return!1},_getDropdown:function(){if(this.select&&this.select._opened()){var e=this.select.dropdown;if(e&&e.attr("data-oj-containerid")===this.select.containerId)return e}return null},_hidePlaceholder:function(e,t){t?(e.attr("disabled",""),e.attr("hidden","")):(e.removeAttr("disabled"),e.removeAttr("hidden"))},_isNative:function(){return"native"===this.options.renderMode},_cleanup:function(){var e=this._isNative();e&&this.element.parent().hasClass("oj-select-native")?(this.element.off("change"),this.element.hasClass(Ie.GENERATED_OPTIONS_SELECTOR)&&Ie.cleanupResults(this.element),this.element.parent().hasClass("oj-select-native")&&(this.element.parent().children(".oj-select-arrow").remove(),this.element.unwrap()),this.element.removeClass("oj-select-select oj-component-initnode"),this.element.attr({"aria-labelledby":""})):!e&&this.select&&(this.select._destroy(),this.select=void 0)},getNodeBySubId:function(e){var t,i=null;if(null==e){var n=this.widget();return n?n[0]:null}if(this._isNative())return null;if(!(i=this._super(e))){var o=this._getDropdown();switch(t=e.subId){case"oj-select-drop":o&&(i=o[0]);break;case"oj-select-results":o&&(i=o.find(".oj-listbox-results")[0]);break;case"oj-select-search":o&&(i=o.find(".oj-listbox-search")[0]);break;case"oj-select-input":case"oj-listbox-input":o&&(i=o.find(".oj-listbox-input")[0]);break;case"oj-select-choice":case"oj-select-chosen":case"oj-select-arrow":i=this.widget().find("."+t)[0];break;case"oj-listitem":if(o){var s=o.find(".oj-listbox-result");i=this.select._findItem(s,e.value)}break;case"oj-select-remove":var r=this.widget().find(".oj-select-selected-choice"),a=this.select._findItem(r,e.value);i=a?$(a).find(".oj-select-clear-entry-icon")[0]:null;break;case"oj-listbox-result-label":if(o){var l=$("#"+this.select.results.attr("id")).children(),u=e.index;l.length&&u<l.length&&(i=l.eq(u).find("."+t)[0])}}}return i||null},getSubIdByNode:function(e){if(this._isNative())return this._super(e);var t=null;if(null!=e){var i=$(e);t=i.hasClass("oj-listbox-input")?{subId:"oj-select-input"}:i.hasClass("oj-select-arrow")?{subId:"oj-select-arrow"}:i.hasClass("oj-listbox-result")?{subId:"oj-listitem",value:i.data("ojselect").value}:i.hasClass("oj-select-clear-entry-icon")?{subId:"oj-select-remove",value:i.closest(".oj-select-selected-choice").data("ojselect").value}:this._super(e)}return t},_GetDefaultStyleClass:function(){return"oj-select"},_GetMessagingLauncherElement:function(){return this.select?this.select.selection:this.element},_GetContentElement:function(){return this.select?this.select.selection:this.element}}),i.Components.setDefaultOptions({ojSelect:{displayOptions:{converterHint:["none"]},renderMode:i.Components.createDynamicPropertyGetter(function(){return(i.ThemeUtils.parseJSONFromFontFamily("oj-select-option-defaults")||{}).renderMode})}}),i.CustomElementBridge.registerMetadata("oj-combobox-one","editableValue",{properties:{converter:{type:"Object"},filterOnOpen:{type:"string",enumValues:["none","rawValue"]},minLength:{type:"number"},optionRenderer:{},options:{},optionsKeys:{type:"Object",properties:{label:{type:"string"},value:{type:"string"},children:{type:"string"},childKeys:{type:"Object",properties:{label:{type:"string"},value:{type:"string"},children:{type:"string"}}}}},pickerAttributes:{type:"Object"},placeholder:{type:"string"},rawValue:{type:"string",readOnly:!0,writeback:!0},required:{type:"boolean"},translations:{type:"Object",properties:{filterFurther:{type:"string",value:"More results available, please filter further."},noMatchesFound:{type:"string",value:"No matches found"},required:{type:"Object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}}}},value:{type:"any",writeback:!0},validators:{type:"Array"},valueOption:{type:"Object",writeback:!0}},events:{valueUpdated:{}},methods:{validate:{}},extension:{_INNER_ELEM:"input",_WIDGET_NAME:"ojCombobox"}}),i.CustomElementBridge.register("oj-combobox-one",{metadata:i.CustomElementBridge.getMetadata("oj-combobox-one")}),i.CustomElementBridge.registerMetadata("oj-combobox-many","editableValue",{properties:{converter:{type:"Object"},minLength:{type:"number"},optionRenderer:{},options:{},optionsKeys:{type:"Object",properties:{label:{type:"string"},value:{type:"string"},children:{type:"string"},childKeys:{type:"Object",properties:{label:{type:"string"},value:{type:"string"},children:{type:"string"}}}}},pickerAttributes:{type:"Object"},placeholder:{type:"string"},rawValue:{type:"string",readOnly:!0,writeback:!0},required:{type:"boolean"},translations:{type:"Object",properties:{filterFurther:{type:"string",value:"More results available, please filter further."},noMatchesFound:{type:"string",value:"No matches found"},required:{type:"Object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}}}},value:{type:"Array",writeback:!0},validators:{type:"Array"},valueOptions:{type:"Array",writeback:!0}},methods:{validate:{}},extension:{_INNER_ELEM:"input",_WIDGET_NAME:"ojCombobox"}}),i.CustomElementBridge.register("oj-combobox-many",{metadata:i.CustomElementBridge.getMetadata("oj-combobox-many")}),i.CustomElementBridge.registerMetadata("oj-select-one","editableValue",{properties:{minimumResultsForSearch:{type:"number"},optionRenderer:{},options:{},optionsKeys:{type:"Object",properties:{label:{type:"string"},value:{type:"string"},children:{type:"string"},childKeys:{type:"Object",properties:{label:{type:"string"},value:{type:"string"},children:{type:"string"}}}}},pickerAttributes:{type:"Object"},placeholder:{type:"string"},renderMode:{type:"string"},required:{type:"boolean"},translations:{type:"Object",properties:{filterFurther:{type:"string",value:"More results available, please filter further."},moreMatchesFound:{type:"string",value:"num matches found"},noMatchesFound:{type:"string",value:"No matches found"},oneMatchesFound:{type:"string",value:"One match found"},required:{type:"Object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}},searchField:{type:"string",value:"Search field"}}},value:{type:"any",writeback:!0},valueOption:{type:"Object",writeback:!0}},methods:{validate:{}},extension:{_INNER_ELEM:"select",_WIDGET_NAME:"ojSelect"}}),i.CustomElementBridge.register("oj-select-one",{metadata:i.CustomElementBridge.getMetadata("oj-select-one")}),i.CustomElementBridge.registerMetadata("oj-select-many","editableValue",{properties:{minimumResultsForSearch:{type:"number"},optionRenderer:{},options:{},optionsKeys:{type:"Object",properties:{label:{type:"string"},value:{type:"string"},children:{type:"string"},childKeys:{type:"Object",properties:{label:{type:"string"},value:{type:"string"},children:{type:"string"}}}}},pickerAttributes:{type:"Object"},placeholder:{type:"string"},renderMode:{type:"string"},required:{type:"boolean"},translations:{type:"Object",properties:{filterFurther:{type:"string",value:"More results available, please filter further."},moreMatchesFound:{type:"string",value:"num matches found"},noMatchesFound:{type:"string",value:"No matches found"},oneMatchesFound:{type:"string",value:"One match found"},required:{type:"Object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}},searchField:{type:"string",value:"Search field"}}},value:{type:"Array",writeback:!0},valueOptions:{type:"Array",writeback:!0}},methods:{validate:{}},extension:{_INNER_ELEM:"select",_WIDGET_NAME:"ojSelect"}}),i.CustomElementBridge.register("oj-select-many",{metadata:i.CustomElementBridge.getMetadata("oj-select-many")});var He,Ue,ke=i.ThemeUtils.parseJSONFromFontFamily("oj-datepicker-config")||{},Be=((Ue=ke.dateTimePickerDropDownThresholdWidth)&&(He="(min-width: "+Ue+")"),window.matchMedia(He||i.ResponsiveUtils.getFrameworkQuery(i.ResponsiveUtils.FRAMEWORK_QUERY_KEY.MD_UP)||"(min-width: 768px)")),Fe=Be.matches,Ve=function(){Fe=Be.matches};function Ge(e,t){t=e.parse(t);var n=i.IntlConverterUtils._dateTime(t,["date","fullYear","month","hours","minutes","seconds"],!0),o=new Date;return o.setFullYear(n.fullYear),o.setDate(n.date),o.setMonth(n.month),o.setHours(n.hours),o.setMinutes(n.minutes),o.setSeconds(n.seconds),o.setMilliseconds(0),o}function $e(e){return this.options.converter.parse(e)}function ze(e,t,n){var o=e.translations.dateTimeRange||{},s=[{category:"hint",entries:["min","max","inRange"]},{category:"messageDetail",entries:["rangeUnderflow","rangeOverflow"]},{category:"messageSummary",entries:["rangeUnderflow","rangeOverflow"]}],r={min:e.min,max:e.max,converter:t,translationKey:{"oj-inputdatetime":"datetime","oj-inputtime":"time","oj-inputdate":"date"}[n]};if(!$.isEmptyObject(o))for(var a=0,l=s.length;a<l;a++){var u=o[s[a].category];if(u){for(var h={},d=s[a].entries,c=0,p=d.length;c<p;c++)h[d[c]]=u[d[c]];r[s[a].category]=h}}return i.Validation.validatorFactory(i.ValidatorFactory.VALIDATOR_TYPE_DATETIMERANGE).createValidator(r)}function Ke(e,t){var i=e.filter("span");t?i.addClass("oj-disabled").removeClass("oj-enabled oj-default"):i.removeClass("oj-disabled").addClass("oj-enabled oj-default")}function We(e,t,i){if(!e||t===i.length)return e;var n=t+1;return We(e[i[t]],n,i)||We(e["*"],n,i)}function Ye(e){var t;t=e._isInLine?$(e.element[0]).parent():$(e.element[0]).parent().parent(),e._AddActiveable(t)}function qe(e){return"native"===e.options.renderMode&&window.cordova&&window.datePicker}window.addEventListener("resize",Ve,!1);var Xe=i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({year:"numeric"});function Ze(e){var t=e.split(":");if(4!==t.length)throw new Error("timeIncrement value should be in the format of hh:mm:ss:SSS");var i={hourIncr:parseInt(t[0].substring(0),10),minuteIncr:parseInt(t[1],10),secondIncr:parseInt(t[2],10),millisecondIncr:parseInt(t[3],10)},n=0;for(var o in i)n+=i[o];if(0===n)throw new Error("timeIncrement must have a non 00:00:00:000 value");return i}function Je(e,t){var n,o,s=e.resolvedOptions(),r={},a=["hour","hour12","minute","second","millisecond","timeFormat","timeZone","timeZoneName","isoStrFormat","dst"];for(n=0,o=a.length;n<o;n++)a[n]in s&&("timeFormat"===a[n]&&(r.formatType="time"),r[a[n]]=s[a[n]]);var l={};if($.extend(l,r),delete l.isoStrFormat,delete l.dst,$.isEmptyObject(l))throw new Error("Empty object for creating a time picker converter");return $.extend(r,t||{}),i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter(r)}function Qe(e,t,i){var n,o,s,r,a,l=7,u=2,h=[.152,.362,.638,.848],d=.007,c=8,p=38,_=40,m=[],g=!t&&"oj-timepicker-meridian"===i;!function(t){(n=document.createElement("div")).classList.add("oj-timepicker-wheel"),t&&n.classList.add(t);n.setAttribute("id","_ojWheel"+Qe.counter++),n.setAttribute("tabIndex","0"),n.setAttribute("role","spinbutton"),e.wheel=n}(i);var f,v=$(n);return n.ojSpinUp=y,n.ojSpinDown=b,n.ojRefresh=E,n.ojDestroy=C,n.ojLinked=function(){return e.linked},f={recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_VERTICAL}],[Hammer.Tap],[Hammer.Swipe,{direction:Hammer.DIRECTION_VERTICAL}]]},v.ojHammer(f).on("tap",D).on("swipeup",A).on("swipedown",I).on("panstart",O).on("panend pancancel",w).on("panup pandown",R),n.addEventListener("wheel",x,!1),n.addEventListener("keydown",T,!1),n.addEventListener("focus",L,!1),n.addEventListener("blur",N,!1),E(),n;function C(){v.ojHammer().off("tap",D).off("swipeup",A).off("swipedown",I).off("panstart",O).off("panend pancancel",w).off("panup pandown",R),v.ojHammer("destroy")}function y(){if(m[l+1]){S(1);var t=m.shift();t&&n.removeChild(t);var i=et(e,l,g);i&&n.appendChild(i),m.push(i)}}function b(){if(m[l-1]){S(-1);var t=m.pop();t&&n.removeChild(t);var i=et(e,-l,g);i&&n.insertBefore(i,m[0]),m.unshift(i)}}function S(t){for(var i=0;i<m.length;i++){var o=m[i];o&&o.ojUpdatePosition(i-l-t)}n.setAttribute("aria-valuenow",e.getText(0))}function E(){m.forEach(function(e){e&&n.removeChild(e)}),m=[];for(var t=-l;t<=l;t++){var i=et(e,t,g);i&&n.appendChild(i),m.push(i)}n.setAttribute("aria-valuenow",e.getText(0))}function T(i){var n=i.keyCode;switch(n){case p:e.position++,i.preventDefault();break;case _:e.position--,i.preventDefault();break;case c:e.keyboardValue=e.keyboardValue.slice(0,-1),i.preventDefault();break;default:(n>47&&n<58||n>95&&n<112||!t&&n>64&&n<91)&&(e.keyboardValue+=i.key)}}function D(t){n.focus();for(var i=(t.gesture.center.y-n.getBoundingClientRect().top)/v.height(),o=0;o<4&&i>h[o];)o++;2!==o&&(e.position+=o-2)}function A(e){n.focus();var t=e.gesture.velocityY,i=t*t/d;a=Math.floor(i/v.height()*5),e.preventDefault()}function I(e){n.focus();var t=e.gesture.velocityY,i=t*t/d;a=-Math.floor(i/v.height()*5),e.preventDefault()}function O(e){n.focus(),o=s=e.gesture.center.y,r=0,a=0}function w(t){n.focus(),a&&(e.position+=a),o=s=null,r=null}function R(t){n.focus();var i=t.gesture.center.y,a=Math.round((o-i)/v.height()*5);a!==r&&Math.abs(s-i)>u&&(s=i,e.position+=a-r,r=a),t.preventDefault()}function x(t){t.deltaY&&(t.currentTarget.focus(),t.preventDefault()),t.deltaY<0&&e.position++,t.deltaY>0&&e.position--}function L(){e.keyboardValue="",n.classList.add("oj-focus")}function N(){n.classList.remove("oj-focus"),e.update()}}function et(e,t,i){var n,o,s=!1;function r(){n.parentNode.focus()}var a=e.getText(t);if(a){(n=document.createElement("div")).classList.add("oj-timepicker-wheel-item"),n.classList.add("oj-timepicker-wheel-item-position"+t),o=t,e.isDisabled(t)&&(s=!0,n.classList.add("oj-disabled")),n.ojUpdatePosition=function(e){return n.classList.remove("oj-timepicker-wheel-item-position"+o),n.classList.add("oj-timepicker-wheel-item-position"+e),o=e,Promise.resolve()};var l=document.createElement("div");l.textContent=a,l.classList.add("oj-timepicker-wheel-item-content"),i&&l.setAttribute("title",a),n.appendChild(l),Object.defineProperty(n,"ojDisabled",{enumerable:!0,get:function(){return s},set:function(e){e!==s&&($(n).toggleClass("oj-disabled"),s=e)}}),n.addEventListener("focus",r,!1),l.addEventListener("focus",r,!1)}return n}function tt(e,t){var i,n,o,s,r,a,l,u=[150,100,50,25,16],h=0,d=0,c=0,p=1,_=1,m=1,g="",f=1,v=!1,C=this;function y(e){if(e)for(var t in e)C[t]=e[t]}function b(){var t=!1,l=e.value;C.value=D(l);var u,h=e.max;u=A(l)===A(h)?D(h)+1:_,o!==u&&(t=!0,o=u);var d,c=e.min;d=A(l)===A(c)?D(c):0,n!==d&&(t=!0,n=d);var p=e.increment,g=function e(t,i){if(0===i)return t;return e(i,t%i)}(p,a);g===a?(n=0,o=1,t=!0):C.linked&&p>r?g=p:0===E(g,r)?g/=r:g=1,m!==g&&(m=g,t=!0),i=Math.floor(_/m),s=i>4,C.wheel&&t&&C.wheel.ojRefresh()}function S(){a=r*_,l=f*p}function E(e,t){return(e%t+t)%t}function T(e,t){return Math.floor(e/a)*a+E(t,_)*r+E(e,r)}function D(e){return E(Math.floor(e/r),_)}function A(e){return Math.floor(e/a)}Object.defineProperty(C,"position",{enumerable:!0,get:function(){return d},set:function(e){var t=E(e,i)*m;t>=n&&t<o&&e!==d&&(C.value+=(e-d)*m)}}),Object.defineProperty(C,"value",{enumerable:!0,get:function(){return h},set:function(t){(function(e){return!!s||n<=e&&e<o})(t=Math.round(t/m)*m)&&h!==t&&(h=E(t,_),function(){var t,n=E((t=h,Math.floor(t/m)),i),o=E(C.position,i),r=n-o;s&&(n>o?o+i-n<Math.abs(r)&&(r=n-o-i):n+i-o<Math.abs(r)&&(r=n+i-o)),0!==r&&(d+=r,C.wheel?v||(v=!0,function t(){if(C.wheel){u.forEach(function(e){C.wheel.classList.remove("oj-timepicker-wheel-spin-"+e)});var i,n=Math.abs(d-c);if(0!==n)n--,n=Math.min(n,u.length-1),i=u[n],C.wheel.classList.add("oj-timepicker-wheel-spin-"+u[n]),d>c&&(c++,C.wheel.ojSpinUp()),d<c&&(c--,C.wheel.ojSpinDown()),i&&(e.disableSpin?t.call(C):setTimeout(t.bind(C),i));else v=!1}}.call(C)):c=d)}(),C.linked&&(2==_&&(e.disableSpin=!0),e.value=T(e.value,h),e.disableSpin=!1))}}),Object.defineProperty(C,"increment",{enumerable:!0,get:function(){return m},set:function(e){m!==e&&(m=e,S())}}),Object.defineProperty(C,"valueMultiplier",{enumerable:!0,get:function(){return r},set:function(e){r!==e&&(r=e,S())}}),Object.defineProperty(C,"valueRange",{enumerable:!0,get:function(){return _},set:function(e){_!==e&&(_=e,S())}}),Object.defineProperty(C,"displayMultiplier",{enumerable:!0,get:function(){return f},set:function(e){f!==e&&(f=e,S())}}),Object.defineProperty(C,"displayRange",{enumerable:!0,get:function(){return p},set:function(e){p!==e&&(p=e,S())}}),Object.defineProperty(C,"keyboardValue",{enumerable:!0,get:function(){return g},set:function(e){if(g=e,C.parser&&g){var t=C.parser(g);t>=0&&(i=h,s=t,t=Math.floor(i/l)*l+E(s,p)*f+E(i,f),n<=t&&t<o&&(C.value=t)),g.length>=2?g="":setTimeout(function(){g=""},1e3)}var i,s}}),C.getText=function(e){var t,n=E(c,i)+e,o=s||n>=0&&n<i;if(C.formatter&&o){var r=function(e){return t=function(e){return E(E(e,i)*m,_)}(e),E(Math.floor(t/f),p);var t}(c+e);t=C.formatter(r)}return t},C.isDisabled=function(e){var t=E(c+e,i)*m;return 0!==n&&t<n||o!==_&&t>=o},C.update=function(){e.value=T(e.value,h)},C.refresh=b,C.setProperties=y,y(t)}i.__registerWidget("oj.ojInputDate",$.oj.inputBase,{widgetEventPrefix:"oj",_CLASS_NAMES:"oj-inputdatetime-input",_WIDGET_CLASS_NAMES:"oj-inputdatetime-date-only oj-component oj-inputdatetime",_ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES:"",_INPUT_HELPER_KEY:"inputHelp",_ATTR_CHECK:[{attr:"type",setMandatory:"text"}],_GET_INIT_OPTIONS_PROPS_FOR_WIDGET:[{attribute:"disabled",validateOption:!0},{attribute:"pattern"},{attribute:"title"},{attribute:"placeholder"},{attribute:"value",coerceDomValue:$e},{attribute:"required",coerceDomValue:!0,validateOption:!0},{attribute:"readonly",option:"readOnly",validateOption:!0},{attribute:"min",coerceDomValue:$e},{attribute:"max",coerceDomValue:$e}],_TRIGGER_CLASS:"oj-inputdatetime-input-trigger",_TRIGGER_CALENDAR_CLASS:"oj-inputdatetime-calendar-icon",_CURRENT_CLASS:"oj-datepicker-current-day",_DAYOVER_CLASS:"oj-datepicker-days-cell-over",_UNSELECTABLE_CLASS:"oj-datepicker-unselectable",_DATEPICKER_DIALOG_DESCRIPTION_ID:"oj-datepicker-dialog-desc",_DATEPICKER_DESCRIPTION_ID:"oj-datepicker-desc",_CALENDAR_DESCRIPTION_ID:"oj-datepicker-calendar",_MAIN_DIV_ID:"oj-datepicker-div",_INLINE_CLASS:"oj-datepicker-inline",_INPUT_CONTAINER_CLASS:" oj-inputdatetime-input-container",_INLINE_WIDGET_CLASS:" oj-inputdatetime-inline",_ON_CLOSE_REASON_SELECTION:"selection",_ON_CLOSE_REASON_CANCELLED:"cancelled",_ON_CLOSE_REASON_TAB:"tab",_ON_CLOSE_REASON_CLOSE:"close",_KEYBOARD_EDIT_OPTION_ENABLED:"enabled",_KEYBOARD_EDIT_OPTION_DISABLED:"disabled",options:{datePicker:{footerLayout:"",changeMonth:"select",changeYear:"select",currentMonthPos:0,daysOutsideMonth:"hidden",numberOfMonths:1,showOn:"focus",stepMonths:"numberOfMonths",stepBigMonths:12,weekDisplay:"none",yearRange:"c-10:c+10"},converter:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({day:"2-digit",month:"2-digit",year:"2-digit"}),keyboardEdit:"enabled",max:void 0,min:void 0,pickerAttributes:null,renderMode:"jet",dayFormatter:null},_InitBase:function(){this._triggerNode=null,this._inputContainer=null,this._redirectFocusToInputContainer=!1,this._isMobile=!1,this._ignoreShow=!1,this._nativePickerShowing=!1,this._maxRows=4,this._currentDay=0,this._drawMonth=this._currentMonth=0,this._drawYear=this._currentYear=0,this._datePickerDefaultValidators={},this._nativePickerConverter=null;var e,t,n=this.element[0].nodeName.toLowerCase();if(this._isInLine="div"===n||"span"===n,this._dpDiv=(e=$('<div class="oj-datepicker-popup" style="display:none"><div id="'+this._GetSubId(this._MAIN_DIV_ID)+'" role="region" aria-describedby="'+this._GetSubId(this._DATEPICKER_DESCRIPTION_ID)+'" class="oj-datepicker-content"></div></div>'),t=".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-calendar td a",e.delegate(t,"mouseout",function(){$(this).removeClass("oj-hover")}).delegate(t,"mouseover",function(){$(this).addClass("oj-hover")}).delegate(t,"focus",function(){$(this).addClass("oj-focus")}).delegate(t,"blur",function(){$(this).removeClass("oj-focus")})),$("body").append(this._dpDiv),this._isInLine)this._WIDGET_CLASS_NAMES+=this._INLINE_WIDGET_CLASS,this._CLASS_NAMES="";else{this._ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES+=this._INPUT_CONTAINER_CLASS;var o=this;this._popUpDpDiv=this._dpDiv.ojPopup({initialFocus:"none",role:"dialog",modality:Fe?"modeless":"modal",open:function(){o._popUpDpDiv.attr("aria-describedby",o._GetSubId(o._DATEPICKER_DIALOG_DESCRIPTION_ID)),"image"===o.options.datePicker.showOn&&o._dpDiv.find(".oj-datepicker-calendar").focus()},animateStart:function(e,t){"open"===t.action&&(e.preventDefault(),i.AnimationUtils.slideIn(t.element,{offsetY:t.element.offsetHeight+"px"}).then(t.endCallback))},animation:{open:null,close:null}}).attr("data-oj-internal",""),this.element.attr("data-oj-popup-"+this._popUpDpDiv.attr("id")+"-parent","");var s=this.options.pickerAttributes;s&&i.EditableValueUtils.setPickerAttributes(this._popUpDpDiv.ojPopup("widget"),s)}},_ComponentCreate:function(){this._InitBase();var e,t=this._super();if(this.options.dayMetaData&&(this.options.dayFormatter=(e=this.options.dayMetaData,function(t){return We(e,0,[t.fullYear,t.month,t.date])})),this.options.value){var i=this._GetConverter().format(this.options.value);this._SetValue(i,{})}return this._setCurrentDate(this._getDateIso()),this._isInLine?(this.element.append(this._dpDiv),this.element.addClass(this._INLINE_CLASS),this._dpDiv.css("display","block")):(this._processReadOnlyKeyboardEdit(),this._attachTrigger()),this._registerSwipeHandler(),Ye(this),t},_AfterCreate:function(){var e=this._superApply(arguments);if(this._disableEnable(this.options.disabled),this._IsCustomElement()){if(this._inputContainer){var t=this.uuid+"_Label";(o=i.EditableValueUtils.getOjLabelId(this.widget(),t))&&this._inputContainer.attr("aria-labelledby",o)}}else{var n=this.$label;if(this._inputContainer&&n&&1===n.length){var o=n.attr("id");this._inputContainer.attr("aria-labelledby",o)}}return e},_setOption:function(e,t,n){var o=null;if("value"===e){if(t||(t=null),o=this._super(e,t,n),this._setCurrentDate(t),this._datepickerShowing()){var s=!(this._isInLine&&this._timePicker&&this._timePicker[0]===document.activeElement);this._updateDatepicker(s)}return o}if("dayMetaData"!==e){o=this._super(e,t,n),"disabled"===e?this._disableEnable(t):"max"===e||"min"===e?(this._datePickerDefaultValidators[i.ValidatorFactory.VALIDATOR_TYPE_DATETIMERANGE]=this._getValidator("min"),this._AfterSetOptionValidators()):"readOnly"===e?(this._processReadOnlyKeyboardEdit(),t&&this._hide(this._ON_CLOSE_REASON_CLOSE),this._AfterSetOptionDisabledReadOnly("readOnly",i.EditableValueUtils.readOnlyOptionOptions)):"keyboardEdit"===e?this._processReadOnlyKeyboardEdit():"dayFormatter"===e?(this._datePickerDefaultValidators[i.ValidatorFactory.VALIDATOR_TYPE_DATERESTRICTION]=this._getValidator("dayFormatter"),this._AfterSetOptionValidators()):"converter"===e&&(this._nativePickerConverter=null),"datePicker"===e&&"currentMonthPos"===n.subkey&&this._setCurrentDate(this._getDateIso());return this._datepickerShowing()&&e in{max:!0,min:!0,dayFormatter:!0,datePicker:!0,translations:!0}&&this._updateDatepicker(),o}this.option("dayFormatter",function(e){return We(t,0,[e.fullYear,e.month,e.date])},n)},_processReadOnlyKeyboardEdit:function(){var e=this.options.readOnly||this._isKeyboardEditDisabled();this.element.prop("readOnly",!!e)},_isKeyboardEditDisabled:function(){return this.options.keyboardEdit===this._KEYBOARD_EDIT_OPTION_DISABLED},_AppendInputHelperParent:function(){return this._triggerNode},_destroy:function(){return this._cleanUpDateResources(),this._super()},_datepickerShowing:function(){return this._isInLine||i.Components.isComponentInitialized(this._popUpDpDiv,"ojPopup")&&this._popUpDpDiv.ojPopup("isOpen")||this._nativePickerShowing},_SetupResources:function(){return this._isInLine||(this._resizePopupBind=function(){i.Components.isComponentInitialized(this._popUpDpDiv,"ojPopup")&&this._popUpDpDiv.ojPopup("option","modality",Fe?"modeless":"modal")}.bind(this),window.addEventListener("resize",this._resizePopupBind,!1)),this._super()},_ReleaseResources:function(){return this._IsCustomElement()&&this._cleanUpListeners(),this._super()},_cleanUpDateResources:function(){var e;e=this._isInLine?$(this.element[0]).parent():$(this.element[0]).parent().parent(),this._RemoveActiveable(e),this.element.off("focus touchstart"),this._wrapper.off("touchstart"),this._triggerNode&&this._triggerNode.remove(),this._isInLine&&(this.element.removeProp("disabled"),this.element.removeProp("readonly")),this._cleanUpListeners(),this._animationResolve&&(this._animationResolve(),this._animationResolve=null),this._popUpDpDiv&&i.Components.isComponentInitialized(this._popUpDpDiv,"ojPopup")&&this._popUpDpDiv.ojPopup("destroy"),this._dpDiv.remove()},_cleanUpListeners:function(){this._resizePopupBind&&window.removeEventListener("resize",this._resizePopupBind),window.removeEventListener("resize",Ve)},_WrapElement:function(){this._inputContainer=this._superApply(arguments),this._inputContainer.attr({role:"combobox","aria-haspopup":"true",tabindex:"-1"})},_onElementFocus:function(){var e=this.options.datePicker.showOn;this._redirectFocusToInputContainer?(this._redirectFocusToInputContainer=!1,this._inputContainer.focus()):"focus"===e?this.show():this._datepickerShowing()&&this._hide(this._ON_CLOSE_REASON_CLOSE)},_OnElementTouchStart:function(){if("focus"===this.options.datePicker.showOn)if(this._datepickerShowing())this._ignoreShow=!0,this._hide(this._ON_CLOSE_REASON_CLOSE);else{var e=this.element[0]===document.activeElement;this.show(),this._redirectFocusToInputContainer=!0,e&&this._inputContainer.focus()}},_attachTrigger:function(){var e=this.options.datePicker.showOn,t=$("<span>").addClass(this._TRIGGER_CLASS),i=$("<span title='"+this._GetCalendarTitle()+"'/>").addClass(this._TRIGGER_CALENDAR_CLASS+" oj-clickable-icon-nocontext oj-component-icon");t.append(i),this.element.on("focus",$.proxy(this._onElementFocus,this)),this.element.on("touchstart",$.proxy(this._OnElementTouchStart,this));var n=this;this._wrapper.on("touchstart",function(e){n._isMobile=!0}),"image"===e&&(i.css("display","block"),this._IsRTL()?(this.element.css("border-top-left-radius",0),this.element.css("border-bottom-left-radius",0)):(this.element.css("border-top-right-radius",0),this.element.css("border-bottom-right-radius",0))),i.on("click",function(){return n._datepickerShowing()?n._hide(n._ON_CLOSE_REASON_CLOSE):(n.show(),n._dpDiv.find(".oj-datepicker-calendar").focus()),!1}),this._AddHoverable(i),this._AddActiveable(i),this._triggerIcon=i,this._triggerNode=t,this.element.after(t)},_doCalendarKeyDown:function(e){var t,i=!1,n=$.ui.keyCode,o=this._IsRTL();if(this._datepickerShowing())switch(e.keyCode){case 84:e.altKey&&e.ctrlKey&&(this._dpDiv.find(".oj-datepicker-current").focus(),i=!0);break;case n.TAB:break;case n.SPACE:case n.ENTER:return(t=$("td."+this._DAYOVER_CLASS,this._dpDiv))[0]&&this._selectDay(this._currentMonth,this._currentYear,t[0],e),e.preventDefault(),e.stopPropagation(),!1;case n.ESCAPE:this._hide(this._ON_CLOSE_REASON_CANCELLED),i=!0;break;case n.PAGE_UP:e.ctrlKey&&e.altKey?this._adjustDate(-this.options.datePicker.stepBigMonths,"M",!0):e.altKey?this._adjustDate(-1,"Y",!0):this._adjustDate(-this._getStepMonths(),"M",!0),i=!0;break;case n.PAGE_DOWN:e.ctrlKey&&e.altKey?this._adjustDate(+this.options.datePicker.stepBigMonths,"M",!0):e.altKey?this._adjustDate(1,"Y",!0):this._adjustDate(+this._getStepMonths(),"M",!0),i=!0;break;case n.END:this._currentDay=this._getDaysInMonth(this._currentYear,this._currentMonth),this._changeCurrentDay(),i=!0;break;case n.HOME:this._currentDay=1,this._changeCurrentDay(),i=!0;break;case n.LEFT:e.originalEvent&&e.originalEvent.altKey||e.altKey?this._adjustDate(e.ctrlKey?-this.options.datePicker.stepBigMonths:-this._getStepMonths(),"M",!0):this._adjustDate(o?1:-1,"D",!0),i=!0;break;case n.UP:this._adjustDate(-7,"D",!0),i=!0;break;case n.RIGHT:e.originalEvent&&e.originalEvent.altKey||e.altKey?this._adjustDate(e.ctrlKey?+this.options.datePicker.stepBigMonths:+this._getStepMonths(),"M",!0):this._adjustDate(o?-1:1,"D",!0),i=!0;break;case n.DOWN:this._adjustDate(7,"D",!0),i=!0}i&&(e.preventDefault(),e.stopPropagation())},_changeCurrentDay:function(){var e=$("."+this._DAYOVER_CLASS,this._dpDiv),t=this._currentDay+"";1===e.length&&e.removeClass(this._DAYOVER_CLASS);var i=$("table.oj-datepicker-calendar",this._dpDiv);if(1===(e=$("a.oj-enabled:contains("+this._currentDay+")",i).filter(function(){return $(this).text()===t})).length){var n=e.parent();i.addClass("oj-focus-highlight"),i.attr("aria-activedescendant",n.attr("id")+""),n.addClass(this._DAYOVER_CLASS)}},_doMonthViewKeyDown:function(e){var t,i=!1,n=$.ui.keyCode,o=this._IsRTL();if(this._datepickerShowing())switch(e.keyCode){case 84:e.altKey&&e.ctrlKey&&(this._dpDiv.find(".oj-datepicker-current").focus(),i=!0);break;case n.SPACE:case n.ENTER:return(t=$("td."+this._DAYOVER_CLASS,this._dpDiv))[0]&&this._selectMonthYear(t[0],"M"),e.preventDefault(),e.stopPropagation(),!1;case n.ESCAPE:this.hide(),i=!0;break;case n.PAGE_UP:e.ctrlKey&&e.altKey?this._adjustDate(-this.options.datePicker.stepBigMonths,"M",!0,"month"):e.altKey?this._adjustDate(-1,"Y",!0,"month"):this._adjustDate(-this._getStepMonths(),"M",!0,"month"),i=!0;break;case n.PAGE_DOWN:e.ctrlKey&&e.altKey?this._adjustDate(+this.options.datePicker.stepBigMonths,"M",!0,"month"):e.altKey?this._adjustDate(1,"Y",!0,"month"):this._adjustDate(+this._getStepMonths(),"M",!0,"month"),i=!0;break;case n.END:this._currentMonth=11,this._updateDatepicker(!0,"month"),i=!0;break;case n.HOME:this._currentMonth=0,this._updateDatepicker(!0,"month"),i=!0;break;case n.LEFT:this._adjustDate(o?1:-1,"M",!0,"month"),i=!0;break;case n.UP:this._adjustDate(-3,"M",!0,"month"),i=!0;break;case n.RIGHT:this._adjustDate(o?-1:1,"M",!0,"month"),i=!0;break;case n.DOWN:this._adjustDate(3,"M",!0,"month"),i=!0}i&&(e.preventDefault(),e.stopPropagation())},_doYearViewKeyDown:function(e){var t,i=!1,n=$.ui.keyCode,o=this._IsRTL();if(this._datepickerShowing())switch(e.keyCode){case 84:e.altKey&&e.ctrlKey&&(this._dpDiv.find(".oj-datepicker-current").focus(),i=!0);break;case n.SPACE:case n.ENTER:return(t=$("td."+this._DAYOVER_CLASS,this._dpDiv))[0]&&this._selectMonthYear(t[0],"Y"),e.preventDefault(),e.stopPropagation(),!1;case n.ESCAPE:this.hide(),i=!0;break;case n.PAGE_UP:e.altKey&&this._adjustDate(-1,"Y",!0,"year"),i=!0;break;case n.PAGE_DOWN:e.altKey&&this._adjustDate(1,"Y",!0,"year"),i=!0;break;case n.END:this._currentYear=10*Math.floor(this._currentYear/10)+9,this._updateDatepicker(!0,"year"),i=!0;break;case n.HOME:this._currentYear=10*Math.floor(this._currentYear/10),this._updateDatepicker(!0,"year"),i=!0;break;case n.LEFT:this._adjustDate(o?1:-1,"Y",!0,"year"),i=!0;break;case n.UP:this._adjustDate(-3,"Y",!0,"year"),i=!0;break;case n.RIGHT:this._adjustDate(o?-1:1,"Y",!0,"year"),i=!0;break;case n.DOWN:this._adjustDate(3,"Y",!0,"year"),i=!0}i&&(e.preventDefault(),e.stopPropagation())},_getDatepickerContent:function(){return $(this._dpDiv.find(".oj-datepicker-content")[0])},_isDateTimeSwitcher:function(){return this._dateTimeSwitcherActive},_updateDatepicker:function(e,t,n){var o;this._maxRows=4,(o="year"===t?this._generateViewHTML("Y"):"month"===t?this._generateViewHTML("M"):this._generateViewHTML("D")).html="<div"+(this._isDateTimeSwitcher()?"":" class='oj-datepicker-wrapper'")+">"+o.html+"</div>",this._currentView=t;var s=this._getDatepickerContent();if(n){var r=s.children().first();r.css({position:"absolute",left:0,top:0}),s.prepend(o.html);var a=s.children().first(),l="previous"==n?"end":"start";if(!this._animationResolve){var u=i.Context.getContext(this.element[0]).getBusyContext();this._animationResolve=u.addBusyState({description:"The datepicker id='"+this.element.attr("id")+"' is animating."})}i.AnimationUtils.startAnimation(a[0],"open",{effect:"slideIn",direction:l});var h=i.AnimationUtils.startAnimation(r[0],"close",{effect:"slideOut",direction:l,persist:"all"}),d=this;h.then(function(){r&&r.remove(),d._setupNewView(e,t,o.dayOverId),d._animationResolve(),d._animationResolve=null})}else s.empty().append(o.html),this._setupNewView(e,t,o.dayOverId)},_setupNewView:function(e,t,i){this._attachHandlers(),i&&this._dpDiv.find(".oj-datepicker-calendar").attr("aria-activedescendant",i);var n=this._getNumberOfMonths(),o=n[1],s=275;if(this._dpDiv.removeClass("oj-datepicker-multi-2 oj-datepicker-multi-3 oj-datepicker-multi-4").width(""),"year"===t||"month"===t)this._dpDiv.removeClass("oj-datepicker-multi");else{if((o=(n=this._getNumberOfMonths())[1])>1){var r=this._dpDiv.find(".oj-datepicker-calendar"),a=r.find("tbody a"),l=parseFloat(a.css("width")),u=parseFloat(r.css("margin-left"));isNaN(l)||isNaN(u)||(s=l*("number"===this.options.datePicker.weekDisplay?8:7)+2*u),this._dpDiv.addClass("oj-datepicker-multi-"+o).css("width",s*o+(this._isInLine?2:0)+"px")}this._dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("oj-datepicker-multi")}this._datepickerShowing()&&this.element.is(":visible")&&!this.element.is(":disabled")&&(e?this._placeFocusOnCalendar():this._isInLine||this.element[0]===document.activeElement||this.element.focus())},_placeFocusOnCalendar:function(){var e=this._dpDiv.find(".oj-datepicker-calendar");e[0]!==document.activeElement&&$(e[0]).focus()},_adjustDate:function(e,t,i,n,o){if(!this.options.disabled){var s=this._currentMonth,r=this._currentYear;this._adjustInstDate(e+("M"===t?this.options.datePicker.currentMonthPos:0),t),"D"===t&&s===this._currentMonth&&r===this._currentYear?this._changeCurrentDay():this._updateDatepicker(i,n,o)}},_gotoToday:function(){var e=new Date;this._currentDay=e.getDate(),this._drawMonth=this._currentMonth=e.getMonth(),this._drawYear=this._currentYear=e.getFullYear(),this._adjustDate(null,null,!0,"day")},_selectMonthYear:function(e,t){var n,o=i.IntlConverterUtils,s=this._getDateIso(),r=e.getAttribute("data-year");r&&(n=parseInt(r,10),this._currentYear=this._drawYear=n),"M"===t?(n=parseInt(e.getAttribute("data-month"),10),this._currentMonth=this._drawMonth=n,s=o._dateTime(s,{fullYear:this._currentYear,month:this._currentMonth})):s=o._dateTime(s,{fullYear:this._currentYear}),$("#"+this._GetSubId(this._CALENDAR_DESCRIPTION_ID)).html(this._EscapeXSS(this.options.monthWide[this._drawMonth])+" "+Xe.format(i.IntlConverterUtils.dateToLocalIso(new Date(this._drawYear,this._drawMonth,1)))),this._adjustDate(0,0,!0,"M"===t?"day":this._toYearFromView)},_selectDay:function(e,t,n,o){if(!$(n).hasClass(this._UNSELECTABLE_CLASS)&&!this.options.disabled){this._isDateTimeSwitcher()||this._hide(this._ON_CLOSE_REASON_SELECTION),this._currentDay=$("a",n).html(),this._currentMonth=e,this._currentYear=t;var s=i.IntlConverterUtils,r=this.options.value,a=new Date(this._currentYear,this._currentMonth,this._currentDay);r=r?s._dateTime(r,{fullYear:a.getFullYear(),month:a.getMonth(),date:a.getDate()}):s.dateToLocalIso(a),this._setDisplayAndValue(r,{}),this._isDateTimeSwitcher()&&this._placeFocusOnCalendar()}},_setDisplayAndValue:function(e,t){if(this._isDateTimeSwitcher()){if(this._switcherDateValue=e,this._setCurrentDate(e),this._datepickerShowing()){var i=!(this._isInLine&&this._timePicker&&this._timePicker[0]===document.activeElement);this._updateDatepicker(i)}}else{var n=this._GetConverter().format(e);this._SetDisplayValue(n),this._SetValue(n,t)}},_getDefaultIsoDate:function(){return i.IntlConverterUtils.dateToLocalIso(this._getTodayDate())},_setCurrentDate:function(e){var t=i.IntlConverterUtils._dateTime(e||this._getDefaultIsoDate(),["fullYear","month","date"],!0);this._currentDay=t.date,this._currentMonth=t.month,this._isMultiMonth()||(this._drawMonth=t.month),this._drawYear=this._currentYear=t.fullYear,this._adjustInstDate()},_getStepMonths:function(){var e=this.options.datePicker.stepMonths;return $.isNumeric(e)?e:this.options.datePicker.numberOfMonths},_isButtonActivated:function(e){return!this.options.disabled&&("click"===e.type||"keydown"===e.type&&(32===e.keyCode||13===e.keyCode))},_gotoPrev:function(e){"year"===this._currentView?this._adjustDate(-10,"Y",!0,"year","previous"):"month"===this._currentView?this._adjustDate(-1,"Y",!0,"month","previous"):this._adjustDate(-e,"M",!0,"day","previous")},_gotoNext:function(e){"year"===this._currentView?this._adjustDate(10,"Y",!0,"year","next"):"month"===this._currentView?this._adjustDate(1,"Y",!0,"month","next"):this._adjustDate(+e,"M",!0,"day","next")},_attachHandlers:function(){var e=this._getStepMonths(),t=this,n=function(e){var t=!1;return"keydown"===e.type&&e.keyCode===$.ui.keyCode.TAB&&(t=!0),t};this._dpDiv.find("[data-handler]").map(function(){var i={prev:function(i){return t._isButtonActivated(i)&&t._gotoPrev(e),n(i)},next:function(i){return t._isButtonActivated(i)&&t._gotoNext(e),n(i)},today:function(e){return t._isButtonActivated(e)&&t._gotoToday(),n(e)},selectDay:function(e){return t._isButtonActivated(e)&&t._selectDay(+this.getAttribute("data-month"),+this.getAttribute("data-year"),this,e),n(e)},selectMonth:function(e){return t._isButtonActivated(e)&&t._selectMonthYear(this,"M"),n(e)},selectYear:function(e){return t._isButtonActivated(e)&&t._selectMonthYear(this,"Y"),n(e)},calendarKey:function(e){"year"===t._currentView?t._doYearViewKeyDown(e):"month"===t._currentView?t._doMonthViewKeyDown(e):t._doCalendarKeyDown(e)},selectMonthHeader:function(e){return t._isButtonActivated(e)&&("month"===t._currentView?t._updateDatepicker(!0,"day"):t._updateDatepicker(!0,"month")),n(e)},selectYearHeader:function(e){return t._isButtonActivated(e)&&("year"===t._currentView?t._updateDatepicker(!0,"day"):(t._toYearFromView=t._currentView,t._updateDatepicker(!0,"year"))),n(e)}};$(this).bind(this.getAttribute("data-event"),i[this.getAttribute("data-handler")])}),this._dpDiv.find(".oj-datepicker-calendar").map(function(){i.DomUtils.makeFocusable({element:$(this),applyHighlight:!0})});var o=this._dpDiv.find(".oj-datepicker-header a, .oj-datepicker-buttonpane a");this._AddHoverable(o),this._AddActiveable(o)},_registerSwipeHandler:function(){if(i.DomUtils.isTouchSupported()){var e=this,t=this._getStepMonths(),n=this._IsRTL(),o={recognizers:[[Hammer.Swipe,{direction:Hammer.DIRECTION_HORIZONTAL}]]};this._dpDiv.ojHammer(o).on(n?"swiperight":"swipeleft",function(i){return e._gotoNext(t),!1}).on(n?"swipeleft":"swiperight",function(i){return e._gotoPrev(t),!1})}},_getMinMaxDateIso:function(e){var t=this.options[e];if(t){var n=this._getDateIso();t=i.IntlConverterUtils._minMaxIsoString(t,n)}return t},_generateHeader:function(e,t,i,n,o){var s,r,a,l,u,h=this._IsRTL();return r=this._EscapeXSS(this.getTranslatedString("prevText")),a=n?"<a role='button' href='#' onclick='return false;' class='oj-datepicker-prev-icon oj-enabled oj-default oj-component-icon oj-clickable-icon-nocontext' data-handler='prev' data-event='click keydown' aria-label='"+r+"'></a>":"<a class='oj-datepicker-prev-icon oj-disabled oj-component-icon oj-clickable-icon-nocontext' title='"+r+"'></a>",l=this._EscapeXSS(this.getTranslatedString("nextText")),u=o?"<a role='button' href='#' onclick='return false;' class='oj-datepicker-next-icon oj-enabled oj-default oj-component-icon oj-clickable-icon-nocontext' data-handler='next' data-event='click keydown' aria-label='"+l+"'></a>":"<a class='oj-datepicker-next-icon oj-disabled oj-component-icon oj-clickable-icon-nocontext' title='"+l+"'></a>",s="<div class='oj-datepicker-header"+(this.options.disabled?" oj-disabled ":" oj-enabled oj-default ")+"'>",s+=/all|left/.test(i)?h?u:a:"",s+=/all|right/.test(i)?h?a:u:"",s+=this._generateMonthYearHeader(e,t),s+="</div>"},_generateFooter:function(e,t){var i="",n=this._EscapeXSS(this.getTranslatedString("currentText")),o=(this.options.disabled,"<a role='button' href='#' onclick='return false;' class='oj-datepicker-current oj-priority-secondary "+(this.options.disabled?"oj-disabled' disabled":"oj-enabled'")+" data-handler='today' data-event='click keydown'>"+n+"</a>");if(e.length>1){var s=0,r=[{index:e.indexOf("today"),content:this._isInRange(t)?o:""}];for(r.sort(function(e,t){return e.index-t.index});s<r.length&&r[s].index<0;)s++;for(;s<r.length;)i+=r[s++].content;i.length>0&&(i="<div class='oj-datepicker-buttonpane'>"+i+"</div>")}return i},_isMultiMonth:function(){var e=this._getNumberOfMonths();return 1!==e[0]||1!==e[1]},_generateViewHTML:function(e){var t,n,o,s,r,a,l,u=i.IntlConverterUtils,h=["date","month","fullYear"],d=this._GetConverter(),c=new Date,p=new Date(c.getFullYear(),c.getMonth(),c.getDate()),_=this._IsRTL(),m=this.options.datePicker.footerLayout,g=this._getNumberOfMonths(),f=this.options.datePicker.currentMonthPos,v=this._isMultiMonth(),C=this._getMinMaxDateIso("min"),y=this._getMinMaxDateIso("max"),b=this._drawMonth-f,S=this._drawYear,E=new Date(this._currentYear,this._currentMonth,this._currentDay),T=this._getDateIso(),D=u._dateTime(T,h,!0),A=D.fullYear,I=D.date,O=D.month,w=new Date(A,O,I),R=this.options.disabled,x=this._EscapeXSS(this.getTranslatedString("weekText"));if(C&&(C=d.parse(C),a=u._dateTime(C,h,!0)),y&&(y=d.parse(y),l=u._dateTime(y,h,!0)),T=u._clearTime(T),b<0&&(b+=12,S--),a){var L=new Date(a.fullYear,a.month,a.date);for(l&&d.compareISODates(y,C)<0&&(L=new Date(l.fullYear,l.month,l.date));new Date(S,b,this._getDaysInMonth(S,b))<L;)++b>11&&(b=0,S++)}if(l)for(t=new Date(l.fullYear,l.month-g[0]*g[1]+1,l.date),a&&d.compareISODates(y,C)<0&&(t=new Date(a.fullYear,a.month,a.date));new Date(S,b,1)>t;)--b<0&&(b=11,S--);return this._drawMonth=b,this._drawYear=S,n=this._canAdjustMonth(-1,S,b)&&!R,o=this._canAdjustMonth(1,S,b)&&!R,s=this._generateFooter(m,p),r=this.options.datePicker.weekDisplay,"D"===e?this._generateDayHTMLContent(n,o,u,d,s,r,p,_,g,v,a,l,b,S,E,D,A,I,O,w,R,x):"M"===e?this._generateMonthHTMLContent(n,o,d,s,a,l,b,S,w,R):this._generateYearHTMLContent(n,o,u,s,a,l,b,S,w,R)},_generateDayHTMLContent:function(e,t,i,n,o,s,r,a,l,u,h,d,c,p,_,m,g,f,v,C,y,b){var S,E,T,D,A,I,O,w,R,x,L,N,P,M,j,H,U,k,B,F,V,G,$,z,K=this.options.dayWide,W=this.options.dayNarrow,Y=this.options.firstDayOfWeek,q="",X=this.options.dayFormatter,Z=null;S=this.options.datePicker.daysOutsideMonth,E="";var J="all";for(D=0;D<l[0];D++){for(A="",this._maxRows=4,I=0;I<l[1];I++){if(J=0===D?"all":"",L="",u){if(L+="<div class='oj-datepicker-group",l[1]>1)switch(I){case 0:L+=" oj-datepicker-group-first",J=0===D?a?"right":"left":"";break;case l[1]-1:L+=" oj-datepicker-group-last",J=0===D?a?"left":"right":"";break;default:L+=" oj-datepicker-group-middle",J=""}L+="'>"}for(L+=this._generateHeader(c,p,J,e,t),L+="<table class='oj-datepicker-calendar"+("number"===s?" oj-datepicker-weekdisplay":"")+(y?" oj-disabled ":" oj-enabled oj-default ")+"' tabindex=-1 data-handler='calendarKey' data-event='keydown' aria-readonly='true' role='grid' aria-labelledby='"+this._GetSubId(this._CALENDAR_DESCRIPTION_ID)+"'><thead role='presentation'><tr role='row'>",N="number"===s?"<th class='oj-datepicker-week-col'>"+this._EscapeXSS(this.getTranslatedString("weekHeader"))+"</th>":"",T=0;T<7;T++)N+="<th role='columnheader' aria-label='"+K[P=(T+parseInt(Y,10))%7]+"'"+((T+Y+6)%7>=5?" class='oj-datepicker-week-end'":"")+"><span title='"+K[P]+"'>"+W[P]+"</span></th>";for(L+=N+"</tr></thead><tbody role='presentation'>",M=this._getDaysInMonth(p,c),p===g&&c===v&&(f=Math.min(f,M)),j=(this._getFirstDayOfMonth(p,c)-Y+7)%7,H=Math.ceil((j+M)/7),U=u&&this._maxRows>H?this._maxRows:H,this._maxRows=U,k=new Date(p,c,1-j),B=0;B<U;B++){for(L+="<tr role='row'>",z=this._GetConverter().calculateWeek(i.dateToLocalIso(k)),F="none"===s?"":"<td class='oj-datepicker-week-col' role='rowheader' aria-label='"+b+" "+z+"'>"+z+"</td>",T=0;T<7;T++){G=k.getMonth()!==c,O=k.getTime()===C.getTime(),w="oj-dp-"+this.uuid+"-"+B+"-"+T+"-"+D+"-"+I,(R=k.getTime()===_.getTime()&&c===this._currentMonth)?(q=w,x=" "+this._DAYOVER_CLASS):x="",V=[!0,""];var Q=k.getFullYear(),ee=k.getMonth(),te=k.getDate();X&&(Z=X({fullYear:Q,month:ee+1,date:te}))&&(V=[!Z.disabled,Z.className||""],Z.tooltip&&V.push(Z.tooltip));var ie=k.getTime()===C.getTime();F+="<td role='gridcell' aria-disabled='"+!!($=G&&"selectable"!==S||!V[0]||this._outSideMinMaxRange(k,h,d))+"' aria-selected='"+O+"' id='"+w+"' class='"+((T+Y+6)%7>=5?" oj-datepicker-week-end":"")+(G?" oj-datepicker-other-month":"")+x+($||y?" "+this._UNSELECTABLE_CLASS+" oj-disabled":" oj-enabled ")+(G&&"hidden"===S?"":" "+V[1]+(O?" "+this._CURRENT_CLASS:"")+(k.getTime()===r.getTime()?" oj-datepicker-today":""))+"'"+(G&&"hidden"===S||!V[2]?"":" title='"+V[2].replace(/'/g,"&#39;")+"'")+($?"":" data-handler='selectDay' data-event='click' data-month='"+k.getMonth()+"' data-year='"+k.getFullYear()+"'")+">"+(G&&"hidden"===S?"&#xa0;":$||y?"<span class='oj-disabled'>"+k.getDate()+"</span>":"<a role='button' class='oj-enabled"+(ie?" oj-selected":"")+(G?" oj-priority-secondary":"")+"' "+(R?"":"tabindex='-1' ")+" onclick='return false;' href='#'>"+k.getDate()+"</a>")+"</td>",k.setDate(k.getDate()+1)}L+=F+"</tr>"}++c>11&&(c=0,p++),A+=L+="</tbody></table>"+(u?"</div>"+(l[0]>0&&I===l[1]-1?"<div class='oj-datepicker-row-break'></div>":""):"")}E+=A}return{html:E+=o,dayOverId:q}},_generateMonthYearHeader:function(e,t){var n=this.options.datePicker.changeMonth,o=this.options.datePicker.changeYear,s=i.LocaleData.isMonthPriorToYear()?"before":"after",r="<div class='oj-datepicker-title'>",a="",l=i.IntlConverterUtils,u=this.options.monthWide,h=this.options.disabled;return u&&("none"===n?a+="<span class='oj-datepicker-month'>"+u[e]+"</span>":(a+="<a role='button' onclick='return false;' href='#' data-handler='selectMonthHeader' data-event='click keydown' class='oj-datepicker-month "+(h?"oj-disabled' disabled":"oj-enabled'")+">",a+=u[e]+"</a>"),"before"===s&&(r+=a+("select"!==n||"select"!==o?"&#xa0;":""))),this.yearshtml||(this.yearshtml="","none"===o?r+="<span class='oj-datepicker-year'>"+Xe.format(l.dateToLocalIso(new Date(t,e,1)))+"</span>":(r+="<a role='button' onclick='return false;' href='#' data-handler='selectYearHeader' data-event='click keydown' class='oj-datepicker-year "+(h?"oj-disabled' disabled":"oj-enabled'")+">",r+=Xe.format(l.dateToLocalIso(new Date(t,e,1)))+"</a>",this.yearshtml=null)),u&&"after"===s&&(r+=("select"!==n||"select"!==o?"&#xa0;":"")+a),r+="<span aria-hidden='true' class='oj-helper-hidden-accessible' id='"+this._GetSubId(this._DATEPICKER_DIALOG_DESCRIPTION_ID)+"'>",r+=this._EscapeXSS(this.getTranslatedString("picker"))+"</span>",r+="<span aria-hidden='true' class='oj-helper-hidden-accessible' id='"+this._GetSubId(this._CALENDAR_DESCRIPTION_ID)+"'>",r+=(u?u[e]+" ":"")+Xe.format(l.dateToLocalIso(new Date(t,e,1)))+"</span>",r+="<span aria-hidden='true' class='oj-helper-hidden-accessible' id='"+this._GetSubId(this._DATEPICKER_DESCRIPTION_ID)+"'>"+this._EscapeXSS(this.getTranslatedString("datePicker"))+"</span>",r+="</div>"},_adjustInstDate:function(e,t){var i=this._drawYear+("Y"===t?e:0),n=this._drawMonth+("M"===t?e:0),o=Math.min(this._currentDay,this._getDaysInMonth(i,n))+("D"===t?e:0),s=new Date(i,n,o);this._currentDay=s.getDate(),this._drawMonth=this._currentMonth=s.getMonth(),this._drawYear=this._currentYear=s.getFullYear()},_generateMonthHTMLContent:function(e,t,i,n,o,s,r,a,l,u){this.options.monthWide;var h,d,c,p,_,m,g,f,v,C,y,b=this.options.monthAbbreviated,S="";for(e=this._canAdjustYear(-1,a)&&!u,t=this._canAdjustYear(1,a)&&!u,h="",this._maxRows=4,g="",g+=this._generateHeader(r,a,"all",e,t),g+="<table class='oj-datepicker-calendar oj-datepicker-monthview"+(u?" oj-disabled ":" oj-enabled oj-default ")+"' tabindex=-1 data-handler='calendarKey' data-event='keydown' aria-readonly='true' role='grid' aria-labelledby='"+this._GetSubId(this._CALENDAR_DESCRIPTION_ID)+"'>",g+="<tbody role='presentation'>",f=new Date(a,0,1),v=0;v<4;v++){for(g+="<tr role='row'>",C="",d=0;d<3;d++){var E=3*v+d;c=f.getMonth()===l.getMonth(),p="oj-dp-"+this.uuid+"-"+v+"-"+d+"-0-0",(_=E===this._currentMonth)?(S=p,m=" "+this._DAYOVER_CLASS):m="";var T=f.getMonth()===l.getMonth(),D=o&&o.fullYear===a,A=s&&s.fullYear===a;C+="<td role='gridcell' aria-disabled='"+!!(y=!((!D||E>=o.month)&&(!A||E<=s.month)))+"' aria-selected='"+c+"' id='"+p+"' class='"+m+(y||u?" "+this._UNSELECTABLE_CLASS+" oj-disabled":" oj-enabled ")+(c?" "+this._CURRENT_CLASS:"")+"'"+(y?"":" data-handler='selectMonth' data-event='click' data-month='"+f.getMonth()+"' data-year='"+f.getFullYear()+"'")+">"+(y||u?"<span class='oj-disabled'>"+b[E]+"</span>":"<a role='button' class='oj-enabled"+(T?" oj-selected":"")+"' "+(_?"":"tabindex='-1' ")+" onclick='return false;' href='#'>"+b[E]+"</a>")+"</td>",f.setMonth(f.getMonth()+1)}g+=C+"</tr>"}return++r>11&&(r=0,a++),h+=g+="</tbody></table>",{html:h+=n,dayOverId:S}},_generateYearHTMLContent:function(e,t,i,n,o,s,r,a,l,u){var h,d,c,p,_,m,g,f,v,C,y,b="";e=this._canAdjustDecade(-1,a)&&!u,t=this._canAdjustDecade(1,a)&&!u,h="",this._maxRows=4,g="",g+=this._generateHeader(r,a,"all",e,t),g+="<table class='oj-datepicker-calendar oj-datepicker-yearview"+(u?" oj-disabled ":" oj-enabled oj-default ")+"' tabindex=-1 data-handler='calendarKey' data-event='keydown' aria-readonly='true' role='grid' aria-labelledby='"+this._GetSubId(this._CALENDAR_DESCRIPTION_ID)+"'>",g+="<tbody role='presentation'>";var S=this._getYearRange(a,o,s),E=10*Math.floor(a/10);for(f=new Date(E,r,1),v=0;v<4;v++){for(g+="<tr role='row'>",C="",d=0;d<3&&(3!=v||1!=d);d++){var T=E+3*v+d;c=f.getFullYear()===l.getFullYear(),p="oj-dp-"+this.uuid+"-"+v+"-"+d+"-0-0",(_=T===this._currentYear)?(b=p,m=" "+this._DAYOVER_CLASS):m="";var D=f.getFullYear()===l.getFullYear(),A=Xe.format(i.dateToLocalIso(new Date(T,r,1)));C+="<td role='gridcell' aria-disabled='"+!!(y=T<S.startYear||T>S.endYear)+"' aria-selected='"+c+"' id='"+p+"' class='"+m+(y||u?" "+this._UNSELECTABLE_CLASS+" oj-disabled":" oj-enabled ")+(c?" "+this._CURRENT_CLASS:"")+"'"+(y?"":" data-handler='selectYear' data-event='click' data-month='"+f.getMonth()+"' data-year='"+f.getFullYear()+"'")+">"+(y||u?"<span class='oj-disabled'>"+A+"</span>":"<a role='button' class='oj-enabled"+(D?" oj-selected":"")+"' "+(_?"":"tabindex='-1' ")+" onclick='return false;' href='#'>"+A+"</a>")+"</td>",f.setFullYear(f.getFullYear()+1)}g+=C+"</tr>"}return++r>11&&(r=0,a++),h+=g+="</tbody></table>",{html:h+=n,dayOverId:b}},_getYearRange:function(e,t,i){var n,o,s,r,a;return n=this.options.datePicker.yearRange.split(":"),o=(new Date).getFullYear(),r=(s=function(t){var i=t.match(/c[+\-].*/)?e+parseInt(t.substring(1),10):t.match(/[+\-].*/)?o+parseInt(t,10):parseInt(t,10);return isNaN(i)?o:i})(n[0]),a=Math.max(r,s(n[1]||"")),{startYear:r=t?Math.max(r,t.fullYear):r,endYear:a=i?Math.min(a,i.fullYear):a}},_getNumberOfMonths:function(){var e=this.options.datePicker.numberOfMonths;return null==(e="string"==typeof e?parseInt(e,10):e)?[1,1]:"number"==typeof e?[1,e]:e},_getDaysInMonth:function(e,t){return 32-new Date(e,t,32).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i){var n=this._getNumberOfMonths(),o=new Date(t,i+(e<0?e:n[0]*n[1]),1);return e<0&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(o)},_canAdjustYear:function(e,t){var i;return e<0?(i=new Date(t+e,12,1)).setDate(this._getDaysInMonth(i.getFullYear(),i.getMonth())):i=new Date(t+e,1,1),this._isInRange(i)},_canAdjustDecade:function(e,t){var i,n=10*Math.floor(t/10);return e<0?(i=new Date(n+9+10*e,12,1)).setDate(this._getDaysInMonth(i.getFullYear(),i.getMonth())):i=new Date(n+10*e,1,1),this._isInRange(i)},_outSideMinMaxRange:function(e,t,i){var n=t?new Date(t.fullYear,t.month,t.date):null,o=i?new Date(i.fullYear,i.month,i.date):null;return null!==n&&e<n||null!==o&&e>o},_isInRange:function(e){var t,n,o,s,r=i.IntlConverterUtils,a=this._GetConverter(),l=this._getMinMaxDateIso("min"),u=null,h=this._getMinMaxDateIso("max"),d=null,c=this.options.datePicker.yearRange;if(c&&(t=c.split(":"),n=(new Date).getFullYear(),u=parseInt(t[0],10),d=parseInt(t[1],10),t[0].match(/[+\-].*/)&&(u+=n),t[1].match(/[+\-].*/)&&(d+=n)),l){l=a.parse(l);var p=r._dateTime(l,["fullYear","month","date"],!0);o=new Date(p.fullYear,p.month,p.date)}if(h){h=a.parse(h);var _=r._dateTime(h,["fullYear","month","date"],!0);s=new Date(_.fullYear,_.month,_.date)}return(!o||e.getTime()>=o.getTime())&&(!s||e.getTime()<=s.getTime())&&(!u||e.getFullYear()>=u)&&(!d||e.getFullYear()<=d)},_GetCalendarTitle:function(){return this._EscapeXSS(this.getTranslatedString("tooltipCalendar"+(this.options.disabled?"Disabled":"")))},_disableEnable:function(e){this._triggerNode&&(Ke(this._triggerNode.children(),e),this._triggerNode.find("."+this._TRIGGER_CALENDAR_CLASS).attr("title",this._GetCalendarTitle())),e&&this._hide(this._ON_CLOSE_REASON_CLOSE),this._isInLine&&this._updateDatepicker()},_AppendInputHelper:function(){this._isInLine||this._superApply(arguments)},_onBlurHandler:function(e){this._isInLine||this._superApply(arguments)},_onKeyDownHandler:function(e){if(!this._isInLine){this._superApply(arguments);var t=$.ui.keyCode,n=!1;if(this._datepickerShowing())switch(e.keyCode){case t.TAB:this._hide(this._ON_CLOSE_REASON_TAB);break;case t.ESCAPE:this._hide(this._ON_CLOSE_REASON_CANCELLED),n=!0;break;case t.UP:case t.DOWN:var o=this._dpDiv.find(".oj-datepicker-calendar")[0];i.FocusUtils.focusFirstTabStop(o)||o.focus(),n=!0}else switch(e.keyCode){case t.UP:case t.DOWN:this._SetValue(this._GetDisplayValue(),e),this.show(),n=!0}return n?(e.preventDefault(),e.stopPropagation(),!1):void 0}},_SetDisplayValue:function(e){if(this._isInLine||this._superApply(arguments),this._setCurrentDate(this._getDateIso()),this._datepickerShowing()){var t=!(this._isInLine&&this._timePicker&&this._timePicker[0]===document.activeElement);this._updateDatepicker(t)}},_GetConverter:function(){return this.options.converter?this._superApply(arguments):$.oj.ojInputDate.prototype.options.converter},_GetElementValue:function(){return this.options.value||""},_GetDefaultStyleClass:function(){return"oj-inputdate"},_GetImplicitValidators:function(){var e=this._superApply(arguments);return null==this.options.min&&null==this.options.max||(this._datePickerDefaultValidators[i.ValidatorFactory.VALIDATOR_TYPE_DATETIMERANGE]=this._getValidator("min")),null!=this.options.dayFormatter&&(this._datePickerDefaultValidators[i.ValidatorFactory.VALIDATOR_TYPE_DATERESTRICTION]=this._getValidator("dayFormatter")),$.extend(this._datePickerDefaultValidators,e)},_NotifyDetached:function(){this._hide(this._ON_CLOSE_REASON_CLOSE),this._superApply(arguments)},_NotifyHidden:function(){this._hide(this._ON_CLOSE_REASON_CLOSE),this._superApply(arguments)},_getValidator:function(e){var t=null;if("min"===e||"max"===e)t=ze(this.options,this._GetConverter(),this._GetDefaultStyleClass());else if("dayFormatter"===e){var n={dayFormatter:this.options.dayFormatter,converter:this._GetConverter()};$.extend(n,this.options.translations.dateRestriction||{}),t=i.Validation.validatorFactory(i.ValidatorFactory.VALIDATOR_TYPE_DATERESTRICTION).createValidator(n)}return t},_getTodayDate:function(){var e=new Date;return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e},_getDateIso:function(){var e=this.options.value||this._getDefaultIsoDate();return this._isDateTimeSwitcher()&&this._switcherDateValue&&(e=this._switcherDateValue),e},getNodeBySubId:function(e){var t=null,i=e&&e.subId,n=this._dpDiv,o=this._getDatepickerContent();if(i)switch(i){case"oj-datepicker-content":t=o[0];break;case"oj-inputdatetime-calendar-icon":t=$(".oj-inputdatetime-calendar-icon",this._triggerNode)[0];break;case"oj-datepicker-prev-icon":t=$(".oj-datepicker-prev-icon",n)[0];break;case"oj-datepicker-next-icon":t=$(".oj-datepicker-next-icon",n)[0];break;case"oj-datepicker-month":t=$(".oj-datepicker-month",n)[0];break;case"oj-datepicker-year":t=$(".oj-datepicker-year",n)[0];break;case"oj-datepicker-current":t=$(".oj-datepicker-current",n)[0];break;case"oj-inputdatetime-date-input":t=this._isInLine?null:this.element[0];break;default:t=null}return t||this._superApply(arguments)},getSubIdByNode:function(e){var t=this._dpDiv,i=null,n=[{selector:".oj-inputdatetime-calendar-icon",ele:this._triggerNode},{selector:".oj-datepicker-prev-icon",ele:t},{selector:".oj-datepicker-next-icon",ele:t},{selector:".oj-datepicker-month",ele:t},{selector:".oj-datepicker-year",ele:t},{selector:".oj-datepicker-current",ele:t}];if(e===t[0])return"oj-datepicker-content";if(!this._isInLine&&e===this.element[0])return"oj-inputdatetime-date-input";for(var o=0,s=n.length;o<s;o++){var r=n[o],a=$(r.selector,r.ele);if(1===a.length&&a[0]===e){i=r.selector.substr(1);break}}return i||this._superApply(arguments)},hide:function(){return this._hide(this._ON_CLOSE_REASON_CLOSE)},_hide:function(e){return qe(this)||!this._datepickerShowing()||this._isInLine||(this._popUpDpDiv.ojPopup("close"),this._onClose(e)),this},_onClose:function(e){this._isMobile&&"focus"===this.options.datePicker.showOn?this._inputContainer.focus():("focus"===this.options.datePicker.showOn&&(this._ignoreShow=!0),this.element.focus())},refresh:function(){return this._triggerNode&&this._triggerNode.find("."+this._TRIGGER_CALENDAR_CLASS).attr("title",this._GetCalendarTitle()),this._superApply(arguments)||this},show:function(){if(!(this._datepickerShowing()||this.options.disabled||this.options.readOnly)){if(!this._ignoreShow){if(qe(this)){this.element.blur();var e={};return e.date=Ge(this._getNativeDatePickerConverter(),this._getDateIso()),e.mode="date",this._ShowNativeDatePicker(e)}return this._ShowHTMLDatePicker()}this._ignoreShow=!1}},_getNativeDatePickerConverter:function(){if(null===this._nativePickerConverter){var e=this._GetConverter().resolvedOptions(),t={};$.extend(t,e,{isoStrFormat:"offset"}),this._nativePickerConverter=i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter(t)}return this._nativePickerConverter},_ShowNativeDatePicker:function(e){var t=this._getMinMaxDateIso("min"),n=this._getMinMaxDateIso("max"),o=this._getNativeDatePickerConverter();t&&(e.minDate=Ge(o,t).valueOf()),n&&(e.maxDate=Ge(o,t).valueOf());var s=this;s._nativePickerShowing=!0,window.datePicker.show(e,$.proxy(this._OnDatePicked,this),function(e){s._nativePickerShowing=!1,e.startsWith("cancel")?s._onClose(s._ON_CLOSE_REASON_CANCELLED):i.Logger.log("Error: native date or time picker failed: "+e)})},_OnDatePicked:function(e){if(this._nativePickerShowing=!1,e){var t=i.IntlConverterUtils._dateTime(this._getDateIso(),{month:e.getMonth(),date:e.getDate(),fullYear:e.getFullYear()}),n=this._GetConverter().format(t);this._SetValue(n,{})}this._onClose(this._ON_CLOSE_REASON_SELECTION)},_ShowHTMLDatePicker:function(){var e=this._IsRTL();if(this._switcherPrevValue=this._getDateIso(),this._switcherPrevDay=this._currentDay,this._switcherPrevMonth=this._currentMonth,this._switcherPrevYear=this._currentYear,this._getDatepickerContent().empty(),this._updateDatepicker(),Fe){var t=i.PositionUtils.normalizeHorizontalAlignment({my:"start top",at:"start bottom",of:this.element,collision:"flipfit flipfit"},e);this._popUpDpDiv.ojPopup("open",this.element.parent(),t)}else this._popUpDpDiv.ojPopup("open",this.element.parent(),{my:{horizontal:"center",vertical:"bottom"},at:{horizontal:"center",vertical:"bottom"},of:window,collision:"flipfit flipfit"}),this._dpDiv.find(".oj-datepicker-calendar").focus();return this}}),i.Components.setDefaultOptions({ojInputDate:{firstDayOfWeek:i.Components.createDynamicPropertyGetter(function(){return i.LocaleData.getFirstDayOfWeek()}),dayWide:i.Components.createDynamicPropertyGetter(function(){return i.LocaleData.getDayNames("wide")}),dayNarrow:i.Components.createDynamicPropertyGetter(function(){return i.LocaleData.getDayNames("narrow")}),monthWide:i.Components.createDynamicPropertyGetter(function(){return i.LocaleData.getMonthNames("wide")}),monthAbbreviated:i.Components.createDynamicPropertyGetter(function(){return i.LocaleData.getMonthNames("abbreviated")}),datePicker:i.Components.createDynamicPropertyGetter(function(){return(i.ThemeUtils.parseJSONFromFontFamily("oj-inputdatetime-option-defaults")||{}).datePicker}),renderMode:i.Components.createDynamicPropertyGetter(function(){return(i.ThemeUtils.parseJSONFromFontFamily("oj-inputdatetime-option-defaults")||{}).renderMode}),keyboardEdit:i.Components.createDynamicPropertyGetter(function(){return(i.ThemeUtils.parseJSONFromFontFamily("oj-inputdatetime-option-defaults")||{}).keyboardEdit})}}),i.__registerWidget("oj.ojInputTime",$.oj.inputBase,{widgetEventPrefix:"oj",_CLASS_NAMES:"oj-inputdatetime-input",_WIDGET_CLASS_NAMES:"oj-inputdatetime-time-only oj-component oj-inputdatetime",_INPUT_CONTAINER_CLASS:"oj-inputdatetime-input-container",_ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES:"",_INPUT_HELPER_KEY:"inputHelp",_ATTR_CHECK:[{attr:"type",setMandatory:"text"}],_GET_INIT_OPTIONS_PROPS_FOR_WIDGET:[{attribute:"disabled",validateOption:!0},{attribute:"pattern"},{attribute:"title"},{attribute:"placeholder"},{attribute:"value",coerceDomValue:$e},{attribute:"required",coerceDomValue:!0,validateOption:!0},{attribute:"readonly",option:"readOnly",validateOption:!0},{attribute:"min",coerceDomValue:$e},{attribute:"max",coerceDomValue:$e}],_TIME_PICKER_ID:"ojInputTime",_TRIGGER_CLASS:"oj-inputdatetime-input-trigger",_TRIGGER_TIME_CLASS:"oj-inputdatetime-time-icon",_ON_CLOSE_REASON_SELECTION:"selection",_ON_CLOSE_REASON_CANCELLED:"cancelled",_ON_CLOSE_REASON_TAB:"tab",_ON_CLOSE_REASON_CLOSE:"close",_KEYBOARD_EDIT_OPTION_ENABLED:"enabled",_KEYBOARD_EDIT_OPTION_DISABLED:"disabled",options:{converter:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"2-digit",minute:"2-digit"}),keyboardEdit:"enabled",max:void 0,min:void 0,datePickerComp:null,pickerAttributes:null,renderMode:"jet",timePicker:{footerLayout:"",timeIncrement:"00:05:00:00",showOn:"focus"}},_InitOptions:function(e,t){this._super(e,t),null!==this.options.datePickerComp||this._IsCustomElement()||i.EditableValueUtils.initializeOptionsFromDom(this._GET_INIT_OPTIONS_PROPS_FOR_WIDGET,t,this)},_getPrependNode:function(){return this._isIndependentInput()?$("body"):$(".oj-popup-content",this._datePickerComp.widget._popUpDpDiv.ojPopup("widget"))},_InitBase:function(){this._timePickerDefaultValidators={},this._datePickerComp=this.options.datePickerComp,this._inputContainer=null,this._redirectFocusToInputContainer=!1,this._isMobile=!1,this._ignoreShow=!1,this._nativePickerShowing=!1;var e=this.options.pickerAttributes;if(this._wheelPicker=$('<div class="oj-timepicker-popup" style="display:none"><div id="'+this._GetSubId(this._TIME_PICKER_ID)+'" class="oj-timepicker-content"></div></div>'),this._getPrependNode().prepend(this._wheelPicker),this._isIndependentInput()){this._popUpWheelPicker=this._wheelPicker.ojPopup({initialFocus:"none",role:"dialog",chrome:"default",modality:Fe?"modeless":"modal",open:function(){},beforeClose:function(){},animateStart:function(e,t){"open"===t.action&&(e.preventDefault(),i.AnimationUtils.slideIn(t.element,{offsetY:t.element.offsetHeight+"px"}).then(t.endCallback))},animation:{open:null,close:null}}).attr("data-oj-internal",""),this.element.attr("data-oj-popup-"+this._popUpWheelPicker.attr("id")+"-parent",""),e&&i.EditableValueUtils.setPickerAttributes(this._popUpWheelPicker.ojPopup("widget"),e)}this._isIndependentInput()&&(this._ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES+=this._INPUT_CONTAINER_CLASS)},_timepickerShowing:function(){if(this._isIndependentInput()){var e=this._popUpWheelPicker;return i.Components.isComponentInitialized(e,"ojPopup")&&e.ojPopup("isOpen")||this._nativePickerShowing}var t=this._datePickerComp.widget;e=t._popUpDpDiv;return t._isShowingDatePickerSwitcher()&&i.Components.isComponentInitialized(e,"ojPopup")&&e.ojPopup("isOpen")||this._nativePickerShowing},_ComponentCreate:function(){this._InitBase();var e=this._superApply(arguments);if(this._isContainedInDateTimePicker()&&!this._isDatePickerInline())this._CLASS_NAMES="";else{if(this.options.value){var t=this._GetConverter().format(this.options.value);this._SetValue(t,{})}Ye(this)}return this._processReadOnlyKeyboardEdit(),this._isIndependentInput()&&this._attachTrigger(),e},_AfterCreate:function(){var e=this._superApply(arguments);if(this._isIndependentInput())if(Ke(this._triggerNode.children(),this.options.disabled),this._IsCustomElement()){if(this._inputContainer){var t=this.uuid+"_Label";(o=i.EditableValueUtils.getOjLabelId(this.widget(),t))&&this._inputContainer.attr("aria-labelledby",o)}}else{var n=this.$label;if(this._inputContainer&&n&&1===n.length){var o=n.attr("id");this._inputContainer.attr("aria-labelledby",o)}}return e},_setOption:function(e,t,n){var o,s=null;if("value"===e)return t||(t=null),s=this._super(e,t,n),this._createWheelPickerDom(!0),s;"timePicker"===e&&void 0===t.footerLayout&&(o=this.options.timePicker.footerLayout),s=this._superApply(arguments),o&&(this.options.timePicker.footerLayout=o),"disabled"===e&&this._isIndependentInput()?(t&&this._hide(this._ON_CLOSE_REASON_CLOSE),this._triggerNode.find("."+this._TRIGGER_TIME_CLASS).attr("title",this._getTimeTitle()),Ke(this._triggerNode.children(),t)):"max"!==e&&"min"!==e||this._isContainedInDateTimePicker()?"readOnly"===e?(this._processReadOnlyKeyboardEdit(),t&&this._hide(this._ON_CLOSE_REASON_CLOSE),this._AfterSetOptionDisabledReadOnly("readOnly",i.EditableValueUtils.readOnlyOptionOptions)):"keyboardEdit"===e&&this._processReadOnlyKeyboardEdit():(this._timePickerDefaultValidators[i.ValidatorFactory.VALIDATOR_TYPE_DATETIMERANGE]=ze(this.options,this._GetConverter(),this._GetDefaultStyleClass()),this._AfterSetOptionValidators());return e in{max:!0,min:!0,converter:!0,timePicker:!0}&&this._createWheelPickerDom(),s},_destroy:function(){return this._cleanUpTimeResources(),this._super()},_clearWheelModels:function(){var e=this._timePickerModel;if(e){var t=e.getWheelModel("hour");t&&(t.wheel=void 0),(t=e.getWheelModel("minute"))&&(t.wheel=void 0),(t=e.getWheelModel("ampm"))&&(t.wheel=void 0)}},_destroyHammer:function(){if(this._wheelGroup&&this._wheelGroup.length)for(var e=this._wheelGroup[0].children,t=0;t<e.length;t++)e[t].ojDestroy()},_SetupResources:function(){return this._resizePopupBind=function(){$(".oj-timepicker-content",this._wheelPicker)[Fe?"removeClass":"addClass"]("oj-timepicker-fixedheight"),this._isIndependentInput()&&i.Components.isComponentInitialized(this._popUpWheelPicker,"ojPopup")&&this._popUpWheelPicker.ojPopup("option","modality",Fe?"modeless":"modal")}.bind(this),window.addEventListener("resize",this._resizePopupBind,!1),this._super()},_ReleaseResources:function(){return this._IsCustomElement()&&this._cleanUpListeners(),this._super()},_cleanUpTimeResources:function(){this._isIndependentInput()&&(this.element.off("focus touchstart"),this._wrapper.off("touchstart")),this._triggerNode&&this._triggerNode.remove(),this._cleanUpListeners(),this._destroyHammer(),this._wheelPicker&&(this._wheelPicker.remove(),this._clearWheelModels()),this._isIndependentInput()&&i.Components.isComponentInitialized(this._popUpWheelPicker,"ojPopup")&&this._popUpWheelPicker.ojPopup("destroy")},_cleanUpListeners:function(){this._resizePopupBind&&window.removeEventListener("resize",this._resizePopupBind),window.removeEventListener("resize",Ve)},_processReadOnlyKeyboardEdit:function(){if(this._isIndependentInput()){var e=this.options.readOnly||this._isKeyboardEditDisabled();this.element.prop("readOnly",!!e)}},_isKeyboardEditDisabled:function(){return this.options.keyboardEdit===this._KEYBOARD_EDIT_OPTION_DISABLED},_AppendInputHelper:function(){this._isIndependentInput()&&this._superApply(arguments)},_onKeyDownHandler:function(e){if(this._isIndependentInput()){this._superApply(arguments);var t=$.ui.keyCode,i=!1;if(this._timepickerShowing())switch(e.keyCode){case t.TAB:this._hide(this._ON_CLOSE_REASON_TAB);break;case t.ESCAPE:this._hide(this._ON_CLOSE_REASON_CANCELLED),i=!0;break;case t.UP:case t.DOWN:this._wheelGroup.children().first().focus(),i=!0}else switch(e.keyCode){case t.UP:case t.DOWN:this._SetValue(this._GetDisplayValue(),e),this.show(),i=!0}if(i||e.keyCode===t.ENTER)return e.preventDefault(),e.stopPropagation(),!1}},_getTimeTitle:function(){return this._EscapeXSS(this.getTranslatedString("tooltipTime"+(this.options.disabled?"Disabled":"")))},_WrapElement:function(){this._inputContainer=this._superApply(arguments),this._inputContainer.attr({role:"combobox","aria-haspopup":"true",tabindex:"-1"})},_onElementFocus:function(){var e=this.options.timePicker.showOn;this._redirectFocusToInputContainer?(this._redirectFocusToInputContainer=!1,qe(this)?this._inputContainer.focus():this._wheelGroup.children().first().focus()):"focus"===e?this.show():this._timepickerShowing()&&this._hide(this._ON_CLOSE_REASON_CLOSE)},_OnElementTouchStart:function(){if("focus"===this.options.timePicker.showOn)if(this._timepickerShowing())this._ignoreShow=!0,this._hide(this._ON_CLOSE_REASON_CLOSE);else{var e=this.element[0]===document.activeElement;this.show(),this._redirectFocusToInputContainer=!0,qe(this)&&e&&this._inputContainer.focus()}},_attachTrigger:function(){var e=this.options.timePicker.showOn,t=$("<span>").addClass(this._TRIGGER_CLASS),i=$("<span title='"+this._getTimeTitle()+"'/>").addClass(this._TRIGGER_TIME_CLASS+" oj-clickable-icon-nocontext oj-component-icon"),n=this;this.element.on("focus",$.proxy(this._onElementFocus,this)),this.element.on("touchstart",$.proxy(this._OnElementTouchStart,this)),this._wrapper.on("touchstart",function(e){n._isMobile=!0}),"image"===e&&(i.css("display","block"),this._IsRTL()?(this.element.css("border-top-left-radius",0),this.element.css("border-bottom-left-radius",0)):(this.element.css("border-top-right-radius",0),this.element.css("border-bottom-right-radius",0))),qe(this)||(t.append(i),i.on("click",function(){n._timepickerShowing()?n._hide(n._ON_CLOSE_REASON_CLOSE):(n.show(),n._wheelGroup.children().first().focus())}),this._AddHoverable(i),this._AddActiveable(i),this._triggerIcon=i),this._triggerNode=t,this.element.after(t)},_getValue:function(){return this._isContainedInDateTimePicker()?this._datePickerComp.widget.getValueForInputTime():this.options.value},_onBlurHandler:function(e){this._isIndependentInput()&&this._superApply(arguments)},show:function(){if(!(this._timepickerShowing()||this.options.disabled||this.options.readOnly)){if(!this._ignoreShow)return qe(this)?(this.element.blur(),this._showNativeTimePicker()):this._showWheelPicker();this._ignoreShow=!1}},_showNativeTimePicker:function(){var e={},t=Je(this._GetConverter(),{isoStrFormat:"offset"}),n=Ge(t,this._getIsoDateValue(t));e.date=n,e.mode="time";var o=Ze(this.options.timePicker.timeIncrement);e.minuteInterval=0===o.hourIncr?o.minuteIncr:1;var s=this._isContainedInDateTimePicker()?this._datePickerComp.widget.options.min:this.options.min,r=this._isContainedInDateTimePicker()?this._datePickerComp.widget.options.max:this.options.max;if(s){var a=Ge(t,i.IntlConverterUtils._minMaxIsoString(s,this._getIsoDateValue(t)));e.minDate=a.valueOf()}if(r){var l=Ge(t,i.IntlConverterUtils._minMaxIsoString(r,this._getIsoDateValue(t)));e.maxDate=l.valueOf()}var u=this;this._nativePickerShowing=!0,window.datePicker.show(e,function(e){if(u._nativePickerShowing=!1,e){var t=Je(u._GetConverter(),{isoStrFormat:"offset"}),n=i.IntlConverterUtils._dateTime(u._getIsoDateValue(t),{hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds()}),o=u._GetConverter().format(n);u._SetValue(o,{})}u._onClose(u._ON_CLOSE_REASON_SELECTION)},function(e){u._nativePickerShowing=!1,e.startsWith("cancel")?u._onClose(u._ON_CLOSE_REASON_CANCELLED):i.Logger.log("Error: native time picker failed: "+e)})},hide:function(){return this._hide(this._ON_CLOSE_REASON_CLOSE)},_hide:function(e){return!qe(this)&&this._timepickerShowing()&&(this._popUpWheelPicker.ojPopup("close"),this._onClose(e)),this},_onClose:function(e){this._isMobile&&"focus"===this.options.timePicker.showOn?(this._isIndependentInput()?this._inputContainer:this._datePickerComp.widget._inputContainer).focus():("focus"===this.options.timePicker.showOn&&(this._isIndependentInput()?this._ignoreShow=!0:this._datePickerComp.widget._ignoreShow=!0),this.element.focus())},refresh:function(){return this._triggerNode&&this._triggerNode.find("."+this._TRIGGER_TIME_CLASS).attr("title",this._getTimeTitle()),this._superApply(arguments)||this},_SetDisplayValue:function(e){this._isIndependentInput()&&this._superApply(arguments),this._timepickerShowing()&&this._createWheelPickerDom(!0)},_SetValue:function(e,t,n){var o=!1;if(this._isContainedInDateTimePicker())try{var s,r=this._datePickerComp.widget,a=(s=t&&t.target&&t.target===this.element[0]&&!this._isDatePickerInline()?r._GetConverter():this._GetConverter()).parse(e),l=i.IntlConverterUtils,u=r.getValueForInputTime()||l.dateToLocalIso(new Date);if(a&&0===s.compareISODates(u,a))return!1;var h=l._copyTimeOver(a||l.dateToLocalIso(new Date),u);r.timeSelected(h,t),this._isDatePickerInline()&&(o=this._super(e,null,n))}catch(t){o=this._super(e,null,n)}else o=this._superApply(arguments);return o},_DoWrapElement:function(){return this._isIndependentInput()},_isIndependentInput:function(){return!this._isContainedInDateTimePicker()||this._isDatePickerInline()},_GetDefaultStyleClass:function(){return"oj-inputtime"},_GetElementValue:function(){return this.options.value||""},_GetImplicitValidators:function(){var e=this._superApply(arguments);return null==this.options.min&&null==this.options.max||this._isContainedInDateTimePicker()||(this._timePickerDefaultValidators[i.ValidatorFactory.VALIDATOR_TYPE_DATETIMERANGE]=ze(this.options,this._GetConverter(),this._GetDefaultStyleClass())),$.extend(this._timePickerDefaultValidators,e)},_GetConverter:function(){return this.options.converter?this._superApply(arguments):$.oj.ojInputTime.prototype.options.converter},_isContainedInDateTimePicker:function(){return null!==this._datePickerComp},_isDatePickerInline:function(){return this._datePickerComp.inline},_NotifyDetached:function(){this._hide(this._ON_CLOSE_REASON_CLOSE),this._superApply(arguments)},_NotifyHidden:function(){this._hide(this._ON_CLOSE_REASON_CLOSE),this._superApply(arguments)},_generateHeader:function(){this._IsRTL();var e=this._EscapeXSS(this.getTranslatedString("cancelText")),t="<a role='button' onclick='return false;' href='#' class='oj-enabled oj-default oj-timepicker-cancel-button' aria-label='"+e+"'>"+e+"</a>",i=this._EscapeXSS(this.getTranslatedString("okText")),n="<a role='button' onclick='return false;' href='#' class='oj-enabled oj-default oj-timepicker-ok-button' aria-label='"+i+"'>"+i+"</a>",o="<div class='oj-timepicker-header"+(this.options.disabled?" oj-disabled ":" oj-enabled oj-default ")+"'>";return o+=t,o+=n,o+="</div>"},_generateFooter:function(e,t){var i="",n="<a role='button' onclick='return false;' href='#' class='oj-timepicker-now oj-priority-secondary oj-enabled'>"+this._EscapeXSS(this.getTranslatedString("currentTimeText"))+"</a>";if(e&&e.length>1){var o=0,s=[{index:e.indexOf("now"),content:t?n:""}];for(s.sort(function(e,t){return e.index-t.index});o<s.length&&s[o].index<0;)o++;for(;o<s.length;)i+=s[o++].content;i.length>0&&(i="<div class='oj-timepicker-footer'>"+i+"</div>")}return i},_getIsoDateLimit:function(e,t,n){var o=this._isContainedInDateTimePicker()?this._datePickerComp.widget.options[t]:this.options[t],s=(o=(o=o?i.IntlConverterUtils._minMaxIsoString(o,this._getValue()):o)?e.parse(o):o)?i.IntlConverterUtils._clearTime(o):null;return n&&s&&n.substring(0,n.indexOf("T"))!==s.substring(0,s.indexOf("T"))&&(o=null),o},_getIsoDateValue:function(e){var t=this._getValue();return t||((t=new Date).setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t=i.IntlConverterUtils.dateToLocalIso(t)),t=e.parse(t)},_getAmPmStrings:function(){var e=i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({pattern:"a"});return[e.format("2016-01-01T01:00:00Z"),e.format("2016-01-01T13:00:00Z")]},_getWheelPickerContent:function(e){return e?$(e.find(".oj-timepicker-content")[0]):null},_createWheelPickerDom:function(e){e||this._detachWheelHandler();var t=this._wheelPicker,n=this._getWheelPickerContent(t);this._destroyHammer(),e?$(".oj-timepicker-wheel-group",n).remove():n.empty();var o=this._GetConverter(),s=$.extend({},o.resolvedOptions());"zulu"===s.isoStrFormat&&(s.isoStrFormat="offset",s=(o=i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter(s)).resolvedOptions());var r=i.IntlConverterUtils,a=this._getValue(),l=new Date;a||(a=i.IntlConverterUtils.dateToLocalIso(l)),a=o.parse(a);var u=r._clearTime(a),h=this._getIsoDateLimit(o,"min",u),d=this._getIsoDateLimit(o,"max",u),c=this.options.timePicker.footerLayout,p=this._timePickerModel=new function(e){var t,i,n,o=/^.*T(\d{2})(?::?(\d{2}).*$)/,s=720,r={h:function(e){return 0===e?"12":""+e},hh:function(e){return 0===e?"12":(e="0"+e).slice(-2)},H:function(e){return""+e},HH:A,k:function(e){return 0===e?"24":""+e},kk:function(e){return 0===e?"24":(e="0"+e).slice(-2)},K:function(e){return""+e},KK:function(e){return(e="0"+e).slice(-2)},mm:I},a={h:w,hh:w,H:O,HH:O,k:R,kk:R,K:O,KK:O,mm:O},l=0,u=0,h=0,d=1440,c=1440,p="auto",_="",m=["AM","PM"],g=new tt(this,{valueRange:60,displayRange:60,valueMultiplier:1,displayMultiplier:1}),f=new tt(this,{valueMultiplier:60,displayMultiplier:1}),v=new tt(this,{valueRange:2,displayRange:2,formatter:function(e){return m[e]},parser:function(e){return"a"===(e=e.toLowerCase().charAt())?0:"p"===e?1:-1},valueMultiplier:s,displayMultiplier:1}),C=[g,f,v],y=!1,b=this;function S(e){try{if(y=!0,e)for(var t in e)b[t]=e[t]}finally{y=!1,E()}}function E(){if(!y){if(h=Math.ceil(u/t)*t,(c=Math.ceil((d-1)/t)*t)<h)throw new Error("Invalid min and max settings with current increment: "+u+" "+d+ +t);if(l<h&&(l=h),l>c&&(l=c),l=Math.round(l/t)*t,n){f.displayRange=12;var e=p;if("auto"===e){var i=x(t,60);i===t||60===i?e="hoursMeridiem":(i=x(t,s),e="all")}switch(e){case"all":g.displayMultiplier=1,g.valueMultiplier=1,g.valueRange=1440,g.linked=!0,f.displayMultiplier=60,f.valueMultiplier=1,f.valueRange=1440,f.linked=!0,v.displayMultiplier=1,v.valueMultiplier=720,v.valueRange=2,v.linked=!0;break;case"hoursMeridiem":g.displayMultiplier=1,g.valueMultiplier=1,g.valueRange=60,g.linked=!1,f.displayMultiplier=1,f.valueMultiplier=60,f.valueRange=24,f.linked=!0,v.displayMultiplier=1,v.valueMultiplier=720,v.valueRange=2,v.linked=!0}}else{f.displayRange=24;var e=p;if("auto"===e){var i=x(t,60);e=i===t||60===i?"none":"all"}switch(e){case"none":case"hoursMeridiem":g.displayMultiplier=1,g.valueMultiplier=1,g.valueRange=60,g.linked=!1,f.displayMultiplier=1,f.valueMultiplier=60,f.valueRange=24,f.linked=!1;break;case"all":case"hoursMinutes":g.displayMultiplier=1,g.valueMultiplier=1,g.valueRange=1440,g.linked=!0,f.displayMultiplier=60,f.valueMultiplier=1,f.valueRange=1440,f.linked=!0}}for(var o=0;o<C.length;o++)C[o].refresh()}}function T(e){var t=o.exec(e),i=parseInt(t[1],10),n=parseInt(t[2],10);return 60*i+n}function D(e){e=Math.floor(e);var t=Math.floor(e/60);return e%=60,"T"+A(t)+":"+I(e)}function A(e){return(e="0"+e).slice(-2)}function I(e){return(e="0"+e).slice(-2)}function O(e){return e.match(/^\d+$/)?parseInt(e,10):-1}function w(e){if(e.match(/^\d+$/)){var t=parseInt(e,10);return 0===t&&(t=-1),24===t&&(t=0),t}return-1}function R(e){if(e.match(/^\d+$/)){var t=parseInt(e,10);return 0===t&&(t=-1),24===t&&(t=0),t}return-1}function x(e,t){return 0===t?e:x(t,e%t)}y=!0,Object.defineProperty(b,"increment",{enumerable:!0,get:function(){return t},set:function(e){t=Math.floor(e),E()}}),b.increment=1,Object.defineProperty(b,"grouped",{enumerable:!0,get:function(){return p},set:function(e){switch(e){case"auto":case"all":case"none":case"hoursMinutes":case"hoursMeridiem":p=e;break;default:throw new Error("invalid grouped value: "+e)}E()}}),Object.defineProperty(b,"min",{enumerable:!0,get:function(){return u},set:function(e){u=Math.floor(e),E()}}),Object.defineProperty(b,"isoMin",{enumerable:!0,get:function(){return D(u)},set:function(e){var t=T(e);isNaN(t)?console.log("Invalid ISO min time: "+e):b.min=t}}),Object.defineProperty(b,"max",{enumerable:!0,get:function(){return d-1},set:function(e){d=Math.floor(e)+1,E()}}),Object.defineProperty(b,"isoMax",{enumerable:!0,get:function(){return D(d)},set:function(e){var t=T(e);isNaN(t)?console.log("Invalid ISO max time: "+e):b.max=t}}),Object.defineProperty(b,"value",{enumerable:!0,get:function(){return l},set:function(e){l=Math.floor(e),E()}}),Object.defineProperty(b,"isoValue",{enumerable:!0,get:function(){return D(l)},set:function(e){var t=T(e);isNaN(t)?console.log("Invalid ISO value time: "+e):b.value=t}}),Object.defineProperty(b,"format",{enumerable:!0,get:function(){return i},set:function(e){i=e;var t=(e=e.replace(/\'[^']*\'/g,"").replace(/[^hHkKma]*/g,"")).match(/([hHkK]+)/),o=t[1];f.formatter=r[o],f.parser=a[o];var s=(t=e.match(/(m+)/))[1];g.formatter=r[s],g.parser=a[s],n=_.indexOf("a")>=0,E()}}),Object.defineProperty(b,"wheelOrder",{enumerable:!0,get:function(){return _},set:function(e){_=e}}),Object.defineProperty(b,"ampmStrings",{enumerable:!0,get:function(){return m},set:function(e){m=e}}),y=!1,b.setProperties=S,S(e),b.getWheelModel=function(e){switch(e){case"hour":return f;case"minute":return g;case"ampm":return n?v:null}}}(null),_=["","","",""],m=o._getTimePositioning();for(var g in m)_[m[g]]=g;p.wheelOrder=_.filter(function(e){return!!e}).join("");var f=s.pattern||s.patternFromOptions;f&&(p.format=f),p.ampmStrings=this._getAmPmStrings();var v=this.options.timePicker.timeIncrement;if(v){var C=Ze(v);p.increment=60*C.hourIncr+C.minuteIncr}p.isoValue=this._getIsoDateValue(o),h&&(p.isoMin=h),d&&(p.isoMax=d),!this._isIndependentInput()||e&&0!==$(".oj-timepicker-header",n).length||n.append($(this._generateHeader(t))),this._wheelGroup=$(function(e){var t,i=37,n=39,o=[];return(t=document.createElement("div")).classList.add("oj-timepicker-wheel-group"),t.ojRefresh=l,t.addEventListener("keydown",s,!1),l(),t;function s(e){var t=e.target,o=e.keyCode;switch(o){case i:$(t).prev().focus();break;case n:$(t).next().focus()}}function r(e){var t=e.target;if(t.ojLinked())for(var i=0;i<o.length;i++)o[i].ojLinked()&&o[i].classList.add("oj-active");else t.classList.add("oj-active")}function a(){for(var e=0;e<o.length;e++)o[e].classList.remove("oj-active")}function l(){for(var i;i=t.firstChild;)i.ojDestroy(),t.removeChild(i);o=[],function(){var i,n,s=e.wheelOrder,l=Qe(e.getWheelModel("hour"),!0,"oj-timepicker-hour"),u=Qe(e.getWheelModel("minute"),!0,"oj-timepicker-minute");s.indexOf("a")>=0&&(i=e.getWheelModel("ampm"),n=Qe(i,!1,"oj-timepicker-meridian"));var h,d=s.split("");for(h=0;h<d.length;h++)switch(d[h]){case"h":o.push(l);break;case"m":o.push(u);break;case"a":o.push(n);break;default:console.log("Unknown wheelOrder code: "+d[h])}for(h=0;h<o.length;h++){var c=o[h];c.addEventListener("focus",r,!1),c.addEventListener("blur",a,!1),t.appendChild(c)}}()}}(p)),this._isIndependentInput()?this._wheelGroup.insertAfter($(".oj-timepicker-header",n)):n.append(this._wheelGroup),e&&0!==$(".oj-timepicker-footer",n).length||n.append($(this._generateFooter(c,l))),n.find(".oj-timepicker-hour").attr("aria-label",this.getTranslatedString("hourWheelLabel")),n.find(".oj-timepicker-minute").attr("aria-label",this.getTranslatedString("minuteWheelLabel")),n.find(".oj-timepicker-meridian").attr("aria-label",this.getTranslatedString("ampmWheelLabel")),e||this._attachWheelHandler()},_detachWheelHandler:function(){this._wheelPicker.find(".oj-timepicker-now").off("click"),this._isIndependentInput()?(this._wheelPicker.find(".oj-timepicker-cancel-button").off("click"),this._wheelPicker.find(".oj-timepicker-ok-button").off("click"),this._wheelPicker.off("keydown")):this._wheelPicker.find(".oj-timepicker-wheel").off("blur")},_attachWheelHandler:function(){var e=this;if(this._wheelPicker.find(".oj-timepicker-now").on("click",function(t){var n=i.IntlConverterUtils.dateToLocalIso(new Date);n=e._GetConverter().parse(n),e._timePickerModel.isoValue=n,e._isIndependentInput()||e._SetValue(e._timePickerModel.isoValue,t),t.preventDefault()}),!this._isIndependentInput())return this._wheelPicker.find(".oj-timepicker-wheel").on("blur",function(t){e._SetValue(e._timePickerModel.isoValue,t)}),this._datePickerComp.widget._togglePicker(),void this._wheelGroup.children().first().focus();this._wheelPicker.find(".oj-timepicker-cancel-button").on("click",function(t){t.preventDefault(),e._hide(e._ON_CLOSE_REASON_CANCELLED)}),this._wheelPicker.find(".oj-timepicker-ok-button").on("click",function(t){e._hide(e._ON_CLOSE_REASON_SELECTION),e._SetValue(e._timePickerModel.isoValue,t),t.preventDefault()}),this._wheelPicker.on("keydown",function(t){t.keyCode==$.ui.keyCode.ESCAPE&&(t.preventDefault(),e._hide(e._ON_CLOSE_REASON_CANCELLED))})},_showWheelPicker:function(){this._createWheelPickerDom();var e=this._popUpWheelPicker;if(e)if(Fe){var t=i.PositionUtils.normalizeHorizontalAlignment({my:"start top",at:"start bottom",of:this.element,collision:"flipfit flipfit"},this._IsRTL());e.ojPopup("open",this.element.parent(),t)}else e.ojPopup("open",this.element.parent(),{my:{horizontal:"center",vertical:"bottom"},at:{horizontal:"center",vertical:"bottom"},of:window,collision:"flipfit flipfit"}),this._wheelGroup.children().first().focus()},getNodeBySubId:function(e){var t=null,i=e&&e.subId,n=this._wheelPicker,o=this._getWheelPickerContent(n);if(i)switch(i){case"oj-inputdatetime-time-icon":t=$(".oj-inputdatetime-time-icon",this._triggerNode)[0];break;case"oj-inputdatetime-time-input":t=this.element[0];break;case"oj-timepicker-content":t=o?o[0]:null;break;case"oj-timepicker-cancel-button":t=$(".oj-timepicker-cancel-button",n)[0];break;case"oj-timepicker-ok-button":t=$(".oj-timepicker-ok-button",n)[0];break;case"oj-timepicker-hour":t=$(".oj-timepicker-hour",n)[0];break;case"oj-timepicker-minute":t=$(".oj-timepicker-minute",n)[0];break;case"oj-timepicker-meridian":t=$(".oj-timepicker-meridian",n)[0];break;case"oj-timepicker-now":t=$(".oj-timepicker-now",n)[0];break;default:t=null}return t||this._superApply(arguments)},getSubIdByNode:function(e){var t=$(".oj-inputdatetime-time-icon",this._triggerNode),i=null,n=this._wheelPicker,o=this._getWheelPickerContent(n),s=[{selector:".oj-timepicker-cancel-button",ele:n},{selector:".oj-timepicker-ok-button",ele:n},{selector:".oj-timepicker-hour",ele:n},{selector:".oj-timepicker-minute",ele:n},{selector:".oj-timepicker-meridian",ele:n},{selector:".oj-timepicker-now",ele:n}];if(e===t[0])i="oj-inputdatetime-time-icon";else if(e===this.element[0])i="oj-inputdatetime-time-input";else if(o&&e===o[0])i="oj-timepicker-content";else for(var r=0;r<s.length;r++){var a=s[r],l=$(a.selector,a.ele);if(1===l.length&&l[0]===e){i=a.selector.substr(1);break}}return i||this._superApply(arguments)},widget:function(){return this._isIndependentInput()?this._super():this._datePickerComp.widget.widget()}}),i.Components.setDefaultOptions({ojInputTime:{renderMode:i.Components.createDynamicPropertyGetter(function(){return(i.ThemeUtils.parseJSONFromFontFamily("oj-inputdatetime-option-defaults")||{}).renderMode}),keyboardEdit:i.Components.createDynamicPropertyGetter(function(){return(i.ThemeUtils.parseJSONFromFontFamily("oj-inputdatetime-option-defaults")||{}).keyboardEdit}),timePicker:i.Components.createDynamicPropertyGetter(function(){return(i.ThemeUtils.parseJSONFromFontFamily("oj-inputdatetime-option-defaults")||{}).timePicker})}}),Qe.counter=0;var it=$.oj.ojInputDate.prototype.options.converter,nt=$.oj.ojInputTime.prototype.options.converter;i.__registerWidget("oj.ojInputDateTime",$.oj.ojInputDate,{widgetEventPrefix:"oj",_WIDGET_CLASS_NAMES:"oj-inputdatetime-date-time oj-component oj-inputdatetime",_INPUT_HELPER_KEY:"inputHelpBoth",_TRIGGER_CALENDAR_CLASS:"oj-inputdatetime-calendar-clock-icon",options:{converter:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}),renderMode:"jet",timePicker:{timeIncrement:"00:05:00:00",showOn:"focus"}},_InitBase:function(){if(this._super(),this._timePickerElement=this.element,this._timePicker=null,this._timeConverter=null,this._previousValue=null,this._switcherDiv=null,this._switcherPrevValue=null,this._switcherPrevDay=null,this._switcherPrevMonth=null,this._switcherPrevYear=null,this._switcherDateValue=null,this._switcherTimeValue=null,this._dateTimeSwitcherActive=null,!this._isInLine){this._switcherDiv=$(this._generateSwitcher()),$(".oj-popup-content",this._popUpDpDiv.ojPopup("widget")).append(this._switcherDiv);var e=this;this._popUpDpDiv.on("ojclose",function(t,i){null===e._switcherDateValue&&null===e._switcherTimeValue||(e._currentDay=e._switcherPrevDay,e._drawMonth=e._currentMonth=e._switcherPrevMonth,e._drawYear=e._currentYear=e._switcherPrevYear,e._SetValue(e._switcherPrevValue),e._switcherTimeValue=e._switcherDateValue=e._switcherPrevDay=e._switcherPrevMonth=e._switcherPrevYear=e._switcherPrevValue=null)}),this._switcherDiv.find("[data-handler]").map(function(){var t={switchMe:function(t){var i=t.keyCode;if("keydown"===t.type&&($.ui.keyCode.ENTER===i||$.ui.keyCode.SPACE===i)||"click"===t.type)return e._isShowingDatePickerSwitcher()?(e.show(),e._placeFocusOnCalendar()):e._timePicker.ojInputTime("show"),!1},switchDone:function(t){var n=t.keyCode;if("keydown"===t.type&&($.ui.keyCode.ENTER===n||$.ui.keyCode.SPACE===n)||"click"===t.type){var o=e._getDateIso();e._switcherDateValue&&(o=e._switcherDateValue),e._switcherTimeValue&&(o=i.IntlConverterUtils._copyTimeOver(e._switcherTimeValue,o));var s=e._GetConverter().format(o);return e._SetDisplayValue(s),e._SetValue(s,{}),e._switcherTimeValue=e._switcherDateValue=e._switcherPrevDay=e._switcherPrevMonth=e._switcherPrevYear=e._switcherPrevValue=null,e._hide(e._ON_CLOSE_REASON_SELECTION),!1}},switchCancel:function(t){var i=t.keyCode;if("keydown"===t.type&&($.ui.keyCode.ENTER===i||$.ui.keyCode.SPACE===i)||"click"===t.type)return e._hide(e._ON_CLOSE_REASON_CANCELLED),!1}};$(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})}},_ComponentCreate:function(){var e=this._super(),t=null;try{t=this._getTimePickerConverter(this._GetConverter())}finally{if(null===t)throw new Error("Please use ojInputDate if your converter doesn't specify a time format.")}if(this._isInLine){var i=$("<input type='text'>");i.insertAfter(this.element),this._timePickerElement=i}else{var n=this._switcherDiv.find("a");this._AddHoverable(n),this._AddActiveable(n)}for(var o=["title","placeholder","disabled","required","readOnly","keyboardEdit","pickerAttributes"],s={},r=0,a=o.length;r<a;r++)s[o[r]]=this.options[o[r]];var l=this.options.displayOptions.messages,u=this.options.timePicker;return this._isInLine||$.extend(u,{footerLayout:"now"}),this._timePicker=this._timePickerElement.ojInputTime($.extend(s,{converter:t,displayOptions:{converterHint:"none",title:"none",messages:l},value:this.options.value,timePicker:u,datePickerComp:{widget:this,inline:this._isInLine}})),e},_AfterCreate:function(){var e=this._superApply(arguments);return this._dateTimeSwitcherActive=!qe(this)&&this._timePicker&&!this._isInLine,e},_setOption:function(e,t,i){var n=this._superApply(arguments);if("value"===e&&(this._previousValue=this.options.value),this._timePicker){e in{disabled:!0,readOnly:!0,keyboardEdit:!0}?this._timePicker.ojInputTime("option",e,t):"timePicker"===e?this._timePicker.ojInputTime("option","timePicker.timeIncrement",t.timeIncrement):"converter"===e&&(this._timeConverter=null,this._timePicker.ojInputTime("option",e,this._getTimePickerConverter(this._GetConverter())))}return n},_destroy:function(){return this._cleanUpDateTimeResources(),this._super()},_cleanUpDateTimeResources:function(){if(this._timePicker.ojInputTime("destroy"),this._isInLine)this._timePickerElement.remove();else{var e=this._switcherDiv.find("a");this._RemoveActiveable(e),this._RemoveHoverable(e),this._switcherDiv&&this._switcherDiv.remove()}},_GetCalendarTitle:function(){return this._EscapeXSS(this.getTranslatedString("tooltipCalendarTime"+(this.options.disabled?"Disabled":"")))},_generateSwitcher:function(){return"<div class='oj-datetimepicker-switcher'><div data-handler='switchMe' data-event='click keydown'><div class='oj-inputdatetime-time-icon oj-clickable-icon-nocontext oj-component-icon oj-enabled oj-default'></div><a onclick='return false;' href='#' class='oj-enabled oj-datetimepicker-switcher-text' role='button'></a></div><div class='oj-datetimepicker-switcher-buttons'><a onclick='return false;' href='#' class='oj-enabled' data-handler='switchDone' data-event='click keydown' role='button'>"+this._EscapeXSS(this.getTranslatedString("done"))+"</a><a onclick='return false;' href='#' class='oj-enabled' data-handler='switchCancel' data-event='click keydown' role='button'>"+this._EscapeXSS(this.getTranslatedString("cancel"))+"</a></div></div>"},_updateSwitcherText:function(){var e="";e=this._isShowingDatePickerSwitcher()?it.format(this._switcherDateValue||this._getDateIso()):nt.format(this._switcherTimeValue||this._getDateIso()),$(".oj-datetimepicker-switcher-text",this._switcherDiv).text(e)},_isShowingDatePickerSwitcher:function(){return!this._switcherDiv||0===$(".oj-inputdatetime-time-icon",this._switcherDiv).length},_togglePicker:function(){var e,t,i,n,o,s=this._switcherDiv,r=!this._isShowingDatePickerSwitcher();r?(n="oj-inputdatetime-calendar-icon",i="oj-inputdatetime-time-icon",o="Set Date"):(n="oj-inputdatetime-time-icon",i="oj-inputdatetime-calendar-icon",o="Set Time");var a=$(s.children()[0]).children();$(a[0]).removeClass(i).addClass(n),$(a[1]).text(o),(a=$(".oj-popup-content",this._popUpDpDiv.ojPopup("widget")).children())[0].classList.contains("oj-datepicker-popup")?(e=$(a[0]),t=$(a[1])):(e=$(a[1]),t=$(a[0])),r?(e.css("display","none"),t.css("display","block")):(t.css("display","none"),e.css("display","block")),this._updateSwitcherText()},_getTimePickerConverter:function(e){return null!==this._timeConverter?this._timeConverter:(this._timeConverter=Je(e),this._timeConverter)},timeSelected:function(e,t){if(this._dateTimeSwitcherActive)this._switcherTimeValue=e;else{var i=this._GetConverter().format(e);this._SetDisplayValue(i),this._SetValue(i,t)}},getValueForInputTime:function(){var e=null;if(this.isValid())e=this.options.value;else if(this._previousValue)try{e=this._GetConverter().parse(this._previousValue)}catch(t){e=this.options.value}else e=null;return this._isDateTimeSwitcher()&&(e=this._switcherDateValue||e,this._switcherTimeValue&&e&&(e=i.IntlConverterUtils._copyTimeOver(this._switcherTimeValue,e))),e},_SetValue:function(e,t,i){var n=this._superApply(arguments);return this._previousValue=e,n},_SetDisplayValue:function(e){if(this._isInLine){var t=!(this._isInLine&&this._timePicker&&this._timePicker[0]===document.activeElement);this._updateDatepicker(t)}else this._superApply(arguments),this._updateSwitcherText();this._switcherTimeValue=null},_onKeyDownHandler:function(e){var t=$.ui.keyCode,i=!1;switch(e.keyCode){case t.UP:case t.DOWN:e.shiftKey&&(this._SetValue(this._GetDisplayValue(),e),this._timePicker.ojInputTime("show"),i=!0)}return i?(e.preventDefault(),e.stopPropagation(),!1):this._superApply(arguments)},show:function(){return this._isShowingDatePickerSwitcher()&&this._togglePicker(),this._super()},_ShowNativeDatePicker:function(e){e.mode="datetime";var t=Ze(this.options.timePicker.timeIncrement);return e.minuteInterval=0===t.hourIncr?t.minuteIncr:1,this._super(e)},_OnDatePicked:function(e){if(this._nativePickerShowing=!1,e){var t=i.IntlConverterUtils._dateTime(this._getDateIso(),{month:e.getMonth(),date:e.getDate(),fullYear:e.getFullYear(),hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds()}),n=this._GetConverter().format(t);this._SetValue(n,{})}this._onClose(this._ON_CLOSE_REASON_SELECTION)},_ShowHTMLDatePicker:function(){var e=this._superApply(arguments);return this._switcherPrevValue=this.options.value?this._getDateIso():"",this._switcherPrevDay=this._currentDay,this._switcherPrevMonth=this._currentMonth,this._switcherPrevYear=this._currentYear,this._updateSwitcherText(),e},showTimePicker:function(){this._datepickerShowing()||this.show(),this._isShowingDatePickerSwitcher()||this._timePicker.ojInputTime("show")},hideTimePicker:function(){return this.hide()},refresh:function(){var e=this._superApply(arguments)||this;return this._timePicker.ojInputTime("refresh"),this._switcherDiv&&($("a[data-handler='switchDone']",this._switcherDiv).text(this.getTranslatedString("done")),$("a[data-handler='switchCancel']",this._switcherDiv).text(this.getTranslatedString("cancel"))),e},getNodeBySubId:function(e){var t=e&&e.subId,i=null;return t&&(i="oj-inputdatetime-date-input"===t?this._isInLine?this._timePickerElement[0]:this.element[0]:"oj-inputdatetime-calendar-clock-icon"===t?$(".oj-inputdatetime-calendar-clock-icon",this._triggerNode)[0]:this._timePicker.ojInputTime("getNodeBySubId",e)),i||this._superApply(arguments)},getSubIdByNode:function(e){var t=null;return this._isInLine?e===this._timePickerElement[0]&&(t="oj-inputdatetime-date-input"):e===this.element[0]?t="oj-inputdatetime-date-input":e===$(".oj-inputdatetime-calendar-clock-icon",this._triggerNode)[0]&&(t="oj-inputdatetime-calendar-clock-icon"),t||this._timePicker.ojInputTime("getSubIdByNode",e)||this._superApply(arguments)},_GetConverter:function(){return this.options.converter?this._superApply(arguments):$.oj.ojInputDateTime.prototype.options.converter},_NotifyDetached:function(){this._timePicker&&this.hideTimePicker(),this._superApply(arguments)},_NotifyHidden:function(){this._timePicker&&this.hideTimePicker(),this._superApply(arguments)},_GetMessagingLauncherElement:function(){return this._isInLine?this._timePickerElement:this._super()},_GetDefaultStyleClass:function(){return"oj-inputdatetime"},_GetTranslationsSectionName:function(){return"oj-ojInputDate"}}),i.CustomElementBridge.registerMetadata("oj-input-time","inputBase",{properties:{converter:{type:"Object"},keyboardEdit:{type:"string"},pickerAttributes:{type:"Object"},renderMode:{type:"string"},min:{type:"string"},max:{type:"string"},timePicker:{type:"Object",properties:{footerLayout:{type:"string"},timeIncrement:{type:"string"},showOn:{type:"string"}}},value:{type:"string",writeback:!0},translations:{type:"Object",properties:{ampmWheelLabel:{type:"string",value:"AMPM"},cancelText:{type:"string",value:"Prev"},currentTimeText:{type:"string",value:"Now"},dateTimeRange:{type:"Object",properties:{hint:{type:"Object",properties:{inRange:{type:"string"},max:{type:"string"},min:{type:"string"}}},messageDetail:{type:"Object",properties:{rangeOverflow:{type:"string"},rangeUnderflow:{type:"string"}}},messageSummary:{type:"Object",properties:{rangeOverflow:{type:"string"},rangeUnderflow:{type:"string"}}}}},hourWheelLabel:{type:"string",value:"Hour"},minuteWheelLabel:{type:"string",value:"Minute"},okText:{type:"string",value:"OK"},regexp:{type:"Object",properties:{messageDetail:{type:"string"},messageSummary:{type:"string"}}},required:{type:"Object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}},tooltipTime:{type:"string",value:"Select Time"},tooltipTimeDisabled:{type:"string",value:"Select Time Disabled"}}}},methods:{hide:{},show:{}},extension:{_WIDGET_NAME:"ojInputTime"}}),i.CustomElementBridge.register("oj-input-time",{metadata:i.CustomElementBridge.getMetadata("oj-input-time")}),function(){i.CustomElementBridge.registerMetadata("oj-input-date","inputBase",{properties:{converter:{type:"Object"},datePicker:{type:"Object",properties:{footerLayout:{type:"string"},changeMonth:{type:"string"},changeYear:{type:"string"},currentMonthPos:{type:"number"},daysOutsideMonth:{type:"string"},numberOfMonths:{type:"number"},showOn:{type:"string"},stepMonths:{type:"string"},stepBigMonths:{type:"number"},weekDisplay:{type:"string"},yearRange:{type:"string"}}},min:{type:"string"},max:{type:"string"},dayFormatter:{type:"function"},dayMetaData:{type:"Object"},keyboardEdit:{type:"string"},pickerAttributes:{type:"Object"},renderMode:{type:"string"},translations:{type:"Object",properties:{currentText:{type:"string",value:"Today"},dateRestriction:{type:"Object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}},dateTimeRange:{type:"Object",properties:{hint:{type:"Object",properties:{inRange:{type:"string"},max:{type:"string"},min:{type:"string"}}},messageDetail:{type:"Object",properties:{rangeOverflow:{type:"string"},rangeUnderflow:{type:"string"}}},messageSummary:{type:"Object",properties:{rangeOverflow:{type:"string"},rangeUnderflow:{type:"string"}}}}},nextText:{type:"string",value:"Next"},prevText:{type:"string",value:"Prev"},regexp:{type:"Object",properties:{messageDetail:{type:"string"},messageSummary:{type:"string"}}},required:{type:"Object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}},tooltipCalendar:{type:"string",value:"Select Date"},tooltipCalendarDisabled:{type:"string",value:"Select Date Disabled"},tooltipCalendarTime:{type:"string",value:"Select Date Time"},tooltipCalendarTimeDisabled:{type:"string",value:"Select Date Time Disabled"},weekHeader:{type:"string",value:"Wk"}}},value:{type:"string",writeback:!0}},methods:{hide:{},show:{}},extension:{_WIDGET_NAME:"ojInputDate"}}),i.CustomElementBridge.register("oj-input-date",{metadata:i.CustomElementBridge.getMetadata("oj-input-date")});var e=i.CollectionUtils.copyInto({},i.CustomElementBridge.getMetadata("oj-input-date"),void 0,!0);e.extension._INNER_ELEM="div",i.CustomElementBridge.register("oj-date-picker",{metadata:e})}(),function(){i.CustomElementBridge.registerMetadata("oj-input-date-time","oj-input-date",{properties:{timePicker:{type:"Object",properties:{footerLayout:{type:"string"},timeIncrement:{type:"string"},showOn:{type:"string"}}},translations:{type:"Object",properties:{cancel:{type:"string",value:"Cancel"},currentText:{type:"string",value:"Today"},dateRestriction:{type:"Object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}},dateTimeRange:{type:"Object",properties:{hint:{type:"Object",properties:{inRange:{type:"string"},max:{type:"string"},min:{type:"string"}}},messageDetail:{type:"Object",properties:{rangeOverflow:{type:"string"},rangeUnderflow:{type:"string"}}},messageSummary:{type:"Object",properties:{rangeOverflow:{type:"string"},rangeUnderflow:{type:"string"}}}}},done:{type:"string",value:"Done"},nextText:{type:"string",value:"Next"},prevText:{type:"string",value:"Prev"},regexp:{type:"Object",properties:{messageDetail:{type:"string"},messageSummary:{type:"string"}}},required:{type:"Object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}},tooltipCalendar:{type:"string",value:"Select Date"},tooltipCalendarDisabled:{type:"string",value:"Select Date Disabled"},tooltipCalendarTime:{type:"string",value:"Select Date Time"},tooltipCalendarTimeDisabled:{type:"string",value:"Select Date Time Disabled"},weekHeader:{type:"string",value:"Wk"}}}},methods:{hideTimePicker:{},showTimePicker:{}},extension:{_WIDGET_NAME:"ojInputDateTime"}}),i.CustomElementBridge.register("oj-input-date-time",{metadata:i.CustomElementBridge.getMetadata("oj-input-date-time")});var e=i.CollectionUtils.copyInto({},i.CustomElementBridge.getMetadata("oj-input-date-time"),void 0,!0);e.extension._INNER_ELEM="div",i.CustomElementBridge.register("oj-date-time-picker",{metadata:e})}(),i.__registerWidget("oj.ojTable",$.oj.baseComponent,{version:"1.0.0",defaultElement:"<table>",widgetEventPrefix:"oj",options:{accessibility:null,animateStart:null,animateEnd:null,as:"",currentRow:null,data:null,display:"list",dnd:{drag:null,drop:null,reorder:{columns:"disabled"}},editMode:"none",emptyText:null,horizontalGridVisible:"auto",rowRenderer:null,scrollPolicy:"auto",scrollPolicyOptions:{fetchSize:25,maxCount:500},firstSelectedRow:{key:null,data:null},selection:[],selectionMode:null,selectionRequired:!1,verticalGridVisible:"auto",columns:[{renderer:null,className:null,field:null,footerClassName:null,footerRenderer:null,footerStyle:null,footerTemplate:null,headerClassName:null,headerRenderer:null,headerStyle:null,headerTemplate:null,headerText:null,id:null,resizable:"disabled",sortable:"auto",sortProperty:null,style:null,template:null,width:null}],columnsDefault:{renderer:null,className:null,field:null,footerClassName:null,footerRenderer:null,footerStyle:null,footerTemplate:null,headerClassName:null,headerRenderer:null,headerStyle:null,headerTemplate:null,headerText:null,resizable:"disabled",sortable:"auto",sortProperty:null,style:null,template:null,width:null},beforeCurrentRow:null,beforeRowEdit:null,beforeRowEditEnd:null,ready:null,sort:null},_BUNDLE_KEY:{_MSG_FETCHING_DATA:"msgFetchingData",_MSG_NO_DATA:"msgNoData",_MSG_INITIALIZING:"msgInitializing",_MSG_STATUS_SORT_ASC:"msgStatusSortAscending",_MSG_STATUS_SORT_DSC:"msgStatusSortDescending",_LABEL_SELECT_COLUMN:"labelSelectColumn",_LABEL_SELECT_ROW:"labelSelectRow",_LABEL_EDIT_ROW:"labelEditRow",_LABEL_SELECT_AND_EDIT_ROW:"labelSelectAndEditRow"},_LOGGER_MSG:{_ERR_PRECURRENTROW_ERROR_SUMMARY:"Did not change current row due to error.",_ERR_PRECURRENTROW_ERROR_DETAIL:"Error detail: {error}.",_ERR_CURRENTROW_UNAVAILABLE_INDEX_SUMMARY:"Did not change current row due to unavailable row index.",_ERR_CURRENTROW_UNAVAILABLE_INDEX_DETAIL:"Unavailable row index: {rowIdx}.",_ERR_REFRESHROW_INVALID_INDEX_SUMMARY:"Invalid row index value.",_ERR_REFRESHROW_INVALID_INDEX_DETAIL:"Row index: {rowIdx}.",_ERR_DATA_INVALID_TYPE_SUMMARY:"Invalid data type.",_ERR_DATA_INVALID_TYPE_DETAIL:"Please specify the appropriate data type.",_ERR_ELEMENT_INVALID_TYPE_SUMMARY:"Invalid element type.",_ERR_ELEMENT_INVALID_TYPE_DETAIL:"Only a <table> element can be specified for ojTable."},_FIELD_ID:"id",_CONST_ATTRIBUTE:"attribute",_CONST_DATA:"data",_CONST_METADATA:"metadata",_CONST_INDEXES:"indexes",_CONST_INDEX:"index",_CONST_KEY:"key",_CONST_KEYS:"keys",_CONST_AFTERKEYS:"afterKeys",_CONST_STARTINDEX:"startIndex",_CONST_ENDINDEX:"endIndex",_CONST_PAGESIZE:"size",_CONST_OFFSET:"offset",_CONST_COLUMN:"column",_CONST_ROW:"row",_CONST_VALUE:"value",_CONST_SORTCRITERIA:"sortCriteria",_COLUMN_HEADER_ID:"_headerColumn",_COLUMN_HEADER_TEXT_ID:"_headerColumnText",_COLUMN_HEADER_ASC_ID:"_headerColumnAsc",_COLUMN_HEADER_DSC_ID:"_headerColumnDsc",_COLUMN_HEADER_ID_PREFIX:"_hdrCol",_FOCUS_CALLED:"_focusedCalled",_ROW_TEMPLATE:"rowTemplate",_CELL_TEMPLATE:"template",_HEADER_TEMPLATE:"headerTemplate",_FOOTER_TEMPLATE:"footerTemplate",_OPTION_AUTO:"auto",_OPTION_ENABLED:"enabled",_OPTION_DISABLED:"disabled",_OPTION_EDIT_MODE:{_NONE:"none",_ROW_EDIT:"rowEdit"},_OPTION_SELECTION_MODES:{_SINGLE:"single",_MULTIPLE:"multiple"},_OPTION_SCROLL_POLICY:{_AUTO:"auto",_LOADMORE_ON_SCROLL:"loadMoreOnScroll"},_COLUMN_SORT_ORDER:{_ASCENDING:"ascending",_DESCENDING:"descending"},_DND_REORDER_TABLE_ID_DATA_KEY:"oj-table-dnd-reorder-table-id",_KEYBOARD_CODES:{_KEYBOARD_CODE_SPACEBAR:32,_KEYBOARD_CODE_ENTER:13,_KEYBOARD_CODE_UP:38,_KEYBOARD_CODE_DOWN:40,_KEYBOARD_CODE_LEFT:37,_KEYBOARD_CODE_RIGHT:39,_KEYBOARD_CODE_HOME:36,_KEYBOARD_CODE_END:35,_KEYBOARD_CODE_TAB:9,_KEYBOARD_CODE_ESC:27,_KEYBOARD_CODE_F2:113,_KEYBOARD_MODIFIER_SHIFT:"shiftKey"},getContextByNode:function(e){var t=this.getSubIdByNode(e,!0);if(t&&"oj-table-cell"==t.subId){var i=t.rowIndex,n=this._getRowKeyForRowIdx(i);t.key=n}return t},getDataForVisibleRow:function(e){var t=this._getTableDomUtils().getTableBodyRow(e);return null!=t?{key:$(t).data("rowKey"),data:$(t).data("rowData"),index:e}:null},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;var t=e.subId;if("oj-table-cell"===t){var n=parseInt(e.rowIndex,10),o=parseInt(e.columnIndex,10);return this._getTableDomUtils().getTableBodyLogicalCells(n)[o]}if("oj-table-header"===t||"oj-table-sort-ascending"===t||"oj-table-sort-descending"===t){o=e.index;var s=this._getTableDomUtils().getTableHeaderLogicalColumns()[o];if(null!=s){if("oj-table-header"===t)return s;if("oj-table-sort-ascending"===t){var r=s.querySelectorAll("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_LINK_CLASS);if(r.length>0)return r[0]}else{var a=s.querySelectorAll("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_LINK_CLASS);if(a.length>0)return a[0]}}}else if("oj-table-footer"===t){o=e.index;var l=this._getTableDomUtils().getTableFooterLogicalCells()[o];if(null!=l)return l}return null},getSubIdByNode:function(e,t){var n=$(e).closest("."+i.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_CLASS);if(n.length>0)return{subId:"oj-table-cell",rowIndex:this._getTableDomUtils().getElementRowIdx(n[0]),columnIndex:this._getTableDomUtils().getElementColumnIdx(n[0])};var o=$(e).closest("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_LINK_CLASS);if(o.length>0)return{subId:t?"oj-table-header":"oj-table-sort-ascending",index:this._getTableDomUtils().getElementColumnIdx(o[0])};var s=$(e).closest("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_LINK_CLASS);if(s.length>0)return{subId:t?"oj-table-header":"oj-table-sort-descending",index:this._getTableDomUtils().getElementColumnIdx(s[0])};var r=$(e).closest("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS);if(r.length>0)return{subId:"oj-table-header",index:this._getTableDomUtils().getElementColumnIdx(r[0])};var a=$(e).closest("."+i.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS);return a.length>0?{subId:"oj-table-footer",index:this._getTableDomUtils().getElementColumnIdx(a[0])}:null},refresh:function(){this._super(),this._refresh()},refreshRow:function(e){return this._refreshRow(e,!0)},_refreshRow:function(e,t){var n=this._getData();if(!n)return Promise.resolve(!1);var o=this._getTableDomUtils().getTableBodyRows();if(isNaN(e)||e<0||null!=o&&e>=o.length||null==o||0==o.length){var s=this._LOGGER_MSG._ERR_REFRESHROW_INVALID_INDEX_SUMMARY,r=i.Translations.applyParameters(this._LOGGER_MSG._ERR_REFRESHROW_INVALID_INDEX_DETAIL,{rowIdx:e.toString()});throw new RangeError(s+"\n"+r)}var a=this._getRowKeyForRowIdx(e),l=this;return l._queueTask(function(){return n.fetchByKeys({keys:[a]}).then(function(i){if(null==i||null==i.results||0==i.results.size)return Promise.resolve(!1);var n=l._getTableDomUtils().getTableBodyRow(e);t=t&&$.contains(n,document.activeElement),l._refreshTableBodyRow(e,{data:i.results.get(a).data,index:e,key:a}),t&&l._getTableDomUtils().getTable().focus(),n=l._getTableDomUtils().getTableBodyRow(e);var o=l._getAllBusyContextsForElement(n);if(null!=o){var s,r=[];for(s=0;s<o.length;s++)r.push(o[s].whenReady());return Promise.all(r)}return Promise.resolve()})})},widget:function(){var e=this._getTableDomUtils().getTableContainer();return null!=e?$(e):this.element},_ComponentCreate:function(){if(this._super(),this._initTemplateEngine(),this._draw(),this._registerCustomEvents(),this._on(this._events),this._isTouchDevice()){var e=this._getTableDomUtils().getTableContainer();this._on($(e),this._eventsContainer)}this._registerDomEventListeners(),this._cachedOptions=$.extend(!0,{},this.options),this._setEditableRowIdx(null)},_AfterCreate:function(){this._super(),this._getTableDomUtils().createContextMenu(this._handleContextMenuSelect.bind(this)),this._isInitFetch=!0},_SetupResources:function(){this._super(),this._registerResizeListener(),this._registerDataSourceEventListeners(),this._isInitFetch?(this._initFetch(),this._isInitFetch=!1):this._invokeDataFetchRows(null,!1)},_ReleaseResources:function(){this._super(),this._unregisterDataSourceEventListeners(),this._unregisterResizeListener()},_NotifyAttached:function(){this._super(),this._getTableDomUtils().refreshTableDimensions()},_NotifyShown:function(){this._super(),this._getTableDomUtils().refreshTableDimensions()},_VerifyConnectedForSetup:function(){return!0},_GetDefaultContextMenu:function(){return this._defaultContextMenu},_NotifyContextMenuGesture:function(e,t,i){var n={};if(this._contextMenuEvent=t.originalEvent,!(this._isNodeEditable(this._contextMenuEvent.target)||this._isNodeClickable(this._contextMenuEvent.target)||"touch"==i&&this._isNodeDraggable(this._contextMenuEvent.target))){var o=this._getTableDomUtils().getFirstAncestor(this._contextMenuEvent.target,"oj-table-column-header-cell");o=null==o?this._getTableDomUtils().getTableHeaderColumn(this._activeColumnIndex):o,this._contextMenuEventHeaderColumn=o;var s=this._getTableDomUtils().getFirstAncestor(this._contextMenuEvent.target,"oj-table-data-cell");if(null!=s){var r=this._getTableDomUtils().getElementColumnIdx(s);o=this._getTableDomUtils().getTableHeaderColumn(r)}if("keydown"===this._contextMenuEvent.type){var a=this._tableDomUtils.getTable();if(this._contextMenuEvent.target==a)if(null!=o)n.position={my:"start top",at:"start bottom",of:o};else{var l=this._getFocusedRowIdx();if(l>=0){var u=this._getTableDomUtils().getTableBodyRow(l);n.position={my:"start top",at:"start bottom",of:u}}else n.position={my:"start top",at:"start bottom",of:this._contextMenuEvent.target}}else n.position={my:"start top",at:"start bottom",of:this._contextMenuEvent.target}}var h,d,c,p=e.element?e.element[0]:e;o&&o.getAttribute("data-oj-sortable")==this._OPTION_ENABLED?((h=p.querySelectorAll("[data-oj-command=oj-table-sortAsc]")).length>0&&(h=h[0]).classList.remove("oj-disabled"),(d=p.querySelectorAll("[data-oj-command=oj-table-sortDsc]")).length>0&&(d=d[0]).classList.remove("oj-disabled")):((h=p.querySelectorAll("[data-oj-command=oj-table-sortAsc]")).length>0&&(h=h[0]).classList.add("oj-disabled"),(d=p.querySelectorAll("[data-oj-command=oj-table-sortDsc]")).length>0&&(d=d[0]).classList.remove("oj-disabled")),o&&o.getAttribute("data-oj-resizable")==this._OPTION_ENABLED?(c=p.querySelectorAll("[data-oj-command=oj-table-resize]")).length>0&&(c=c[0]).classList.remove("oj-disabled"):(c=p.querySelectorAll("[data-oj-command=oj-table-resize]")).length>0&&(c=c[0]).classList.add("oj-disabled"),this._OpenContextMenu(t,i,n)}},_destroy:function(){$(this._getTableDomUtils().getTableBody()).removeAttr(i.Components._OJ_CONTAINER_ATTR),this.element.children().remove("."+i.TableDomUtils.CSS_CLASSES._TABLE_HEADER_CLASS),this.element.children().remove("."+i.TableDomUtils.CSS_CLASSES._TABLE_BODY_CLASS),this.element.children().remove("."+i.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CLASS),this.element.children().remove("."+i.TableDomUtils.CSS_CLASSES._TABLE_STATUS_MESSAGE_CLASS),this.element.children().remove("."+i.TableDomUtils.CSS_CLASSES._TABLE_BODY_MESSAGE_ROW_CLASS),i.DomUtils.unwrap(this.element,$(this._getTableDomUtils().getTableContainer())),this.element[0].classList.remove(i.TableDomUtils.CSS_CLASSES._TABLE_CLASS),this._readyResolveFunc&&(this._readyResolveFunc(),this._readyResolveFunc=null),this._dataResolveFunc&&(this._dataResolveFunc(),this._dataResolveFunc=null),this._data instanceof i.TableDataSourceAdapter&&this._data.destroy(),(this._hasHeaderTemplate||this._hasCellTemplate||this._hasFooterTemplate)&&this._cleanTemplateNodes(this.element[0]),this._componentDestroyed=!0},_draw:function(){if(this.options,this._setFinalTask(function(){if(this._getTableDomUtils().refreshTableDimensions(),this._setSelection(this.options.selection),this._setSelectionDefault(),this._hasEditableRow()){var e=this._getEditableRowIdx(),t=this._getTableDomUtils().getTableBodyRow(e);null!=t&&t.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_EDIT_CLASS)}this._isLoadMoreOnScroll()&&!this._dataFetching&&this._domScroller&&this._domScroller.checkViewport().then(this._domScrollerSuccessFunc,null)}),!this.element.is("table")){var e=this._LOGGER_MSG._ERR_ELEMENT_INVALID_TYPE_SUMMARY,t=this._LOGGER_MSG._ERR_ELEMENT_INVALID_TYPE_DETAIL;throw new RangeError(e+"\n"+t)}this.element[0].classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_ELEMENT_CLASS),this._getTableDomUtils().createInitialTable(this._isTableHeaderless(),this._isTableFooterless()),this._getTableDomUtils().styleInitialTable();var n=this;this._queueTask(function(){n._refreshTableHeader(),n._refreshTableFooter(),n._refreshTableBody(),n._processSlottedChildren(),n._getTableDomUtils().refreshTableDimensions()}),this.options.disabled&&this.disable()},_events:{focusout:function(e){var t=this._getTableDomUtils().getTable(),n=null;if(null!=e.relatedTarget?n=e.relatedTarget:null==e.originalEvent||null==e.originalEvent.explicitOriginalTarget&&null==e.originalEvent.target?this._getTableDomUtils()._isIE()&&null!=document.activeElement&&(n=document.activeElement):n=e.originalEvent.explicitOriginalTarget||e.originalEvent.target,null==n||!(n==t||$(t).has(n).length>0)){for(var o=i.ZOrderUtils.findOpenPopups(),s=0;s<o.length;s++){var r=i.DomUtils.getLogicalParent($(o[s]).children());if($(t).has(r.get(0)).length>0)return}this._focusOutHandler($(t)),this._focusOutHandler($(this._getTableDomUtils().getTableContainer())),this._clearKeyboardKeys(),this._clearFocusedHeaderColumn(),this._clearFocusedRow(!1),this._getTableResizeUtils().clearTableHeaderColumnsResize(),this._setTableEditable(!1,!1,0,!0,e),this._setTableActionableMode(!1)}},"blur .oj-table-data-cell":function(e){var t=this._getEventTargetElement(e);t.classList.contains(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_EDIT_CLASS)&&t.classList.remove(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_EDIT_CLASS)},focus:function(e){this._checkRowOrHeaderColumnFocus(e)},focusin:function(e){this._focusInHandler($(this._getTableDomUtils().getTable())),this._focusInHandler($(this._getTableDomUtils().getTableContainer()));var t=this._getTableDomUtils().getTableBody();if($(t).has(e.target).length>0){var i=this._getFocusedRowIdx(),n=this._getFocusedHeaderColumnIdx();if(!(this._isNodeEditable(e.target)||this._isNodeClickable(e.target)||this._isTableActionableMode()||this._hasEditableRow()||this._temporaryTableChildElementFocus||null!=i||null!=n)){var o=this;setTimeout(function(){o._getTableDomUtils().getTable().focus()},0)}}},"focus .oj-table-column-header-acc-asc-link":function(e){var t=this;setTimeout(function(){t._checkRowOrHeaderColumnFocus(e),t=null},0)},"focus .oj-table-data-cell":function(e){var t=this._getEventTargetElement(e);this._getTableDomUtils().getElementRowIdx(t)==this._getEditableRowIdx()&&t.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_EDIT_CLASS)},"click .oj-table-checkbox-acc-select-column":function(e){var t=this._getEventTargetElement(e),i=this._getTableDomUtils().getElementColumnIdx(t),n=$(t).is(":checked");n&&this._setHeaderColumnFocus(i,!0,!0,null,null),this._setHeaderColumnSelection(i,n,t,e,!0),e.stopPropagation()},"click .oj-table-checkbox-acc-select-row":function(e){var t=this._getEventTargetElement(e),i=this._getTableDomUtils().getElementRowIdx(t),n=$(t).is(":checked"),o=!1;n?o=this._setRowFocus(i,!0,!0,null,e,!0):this._setTableEditable(!1,!1,0,!0,e),o&&(this._setRowSelection(i,n,t,e,!0),this._setTableEditable(!0,!1,0,!0,e)),e.stopPropagation()},keydown:function(e){this._addKeyboardKey(e.keyCode);var t=this._getKeyboardKeys()[0];t!=this._KEYBOARD_CODES._KEYBOARD_CODE_ESC&&t!=this._KEYBOARD_CODES._KEYBOARD_CODE_ENTER&&t!=this._KEYBOARD_CODES._KEYBOARD_CODE_F2&&t!=this._KEYBOARD_CODES._KEYBOARD_CODE_TAB&&(this._isNodeEditable(e.target)||null!=this._getTableDomUtils().getTableFooter()&&$(this._getTableDomUtils().getTableFooter()).has(e.target).length>0)||(1==this._getKeyboardKeys().length||2==this._getKeyboardKeys().length&&e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT])&&((this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_UP)||this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_DOWN)||this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_SPACEBAR)||this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_HOME)||this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_END))&&(e.preventDefault(),e.stopPropagation()),this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_UP)||this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_DOWN)?this._handleKeydownUpDown(e):this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_LEFT)||this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_RIGHT)?this._handleKeydownLeftRight(e):this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_TAB)?this._handleKeydownTab(e):t==this._KEYBOARD_CODES._KEYBOARD_CODE_F2?this._handleKeydownF2(e):t==this._KEYBOARD_CODES._KEYBOARD_CODE_SPACEBAR?this._handleKeydownSpacebar(e):t==this._KEYBOARD_CODES._KEYBOARD_CODE_ENTER?this._handleKeydownEnter(e):t==this._KEYBOARD_CODES._KEYBOARD_CODE_HOME?this._handleKeydownHome(e):t==this._KEYBOARD_CODES._KEYBOARD_CODE_END?this._handleKeydownEnd(e):t==this._KEYBOARD_CODES._KEYBOARD_CODE_ESC&&this._handleKeydownEsc(e))},keyup:function(e){if(1==this._getKeyboardKeys().length){var t=this._getKeyboardKeys()[0];if(this._isNodeEditable(e.target)||null!=this._getTableDomUtils().getTableFooter()&&$(this._getTableDomUtils().getTableFooter()).has(e.target).length>0)return void this._removeKeyboardKey(t);this._removeKeyboardKey(t)}this._removeKeyboardKey(e.keyCode)},"mousedown .oj-table-body":function(e){if(this._mouseDownRowIdx=this._getTableDomUtils().getElementRowIdx(e.target),null!=this._mouseDownRowIdx){var t=this._getTableDomUtils().getTableBodyRow(this._mouseDownRowIdx);if(null!=t&&t.draggable)this._mouseDownRowIdx=null;else if(null!=this._mouseDownRowIdx&&!e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT]&&!i.DomUtils.isMetaKeyPressed(e)&&1===e.which){if(this._getRowSelection(this._mouseDownRowIdx)&&1==this._getSelectedRowIdxs().length)return;this._nonContiguousSelection||this._clearSelectedRows(!0)}}},"mouseup .oj-table-body":function(e){this._mouseDownRowIdx=null},"mouseenter .oj-table-body-row":function(e){var t=this._getEventTargetElement(e);t.classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._HOVER);var n=this._getTableDomUtils().getElementRowIdx(t);this._updateRowStateCellsClass(n,{hover:!0}),this._handleMouseEnterSelection(e.target)},"mouseleave .oj-table-body-row":function(e){var t=this._getEventTargetElement(e);t.classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._HOVER);var n=this._getTableDomUtils().getElementRowIdx(t);this._updateRowStateCellsClass(n,{hover:!1})},"mousedown .oj-table-column-header-cell":function(e){if(1===e.which&&!this._getTableResizeUtils().handleHeaderColumnResizeStart(e)){var t=this._getTableDomUtils().getElementColumnIdx(this._getEventTargetElement(e));this._setHeaderColumnFocus(t,!0,!0,e,null),$(e.target).data(this._FOCUS_CALLED,!0)}},"mouseenter .oj-table-column-header-cell":function(e){if(!this._getTableResizeUtils().setResizeCursor(e)){var t=this._getEventTargetElement(e);t.classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._HOVER);var n=this._getTableDomUtils().getElementColumnIdx(t);this._showTableHeaderColumnSortLink(n)}},"mousemove .oj-table-header":function(e){this._getTableResizeUtils().setResizeCursor(e)},"mousemove .oj-table-column-header-cell":function(e){var t=this._getEventTargetElement(e);this._getTableResizeUtils().setResizeCursor(e)?t.classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._HOVER):t.classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._HOVER)},"mouseleave .oj-table-column-header-cell":function(e){var t=this._getEventTargetElement(e);t.classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._HOVER);var n=this._getTableDomUtils().getElementColumnIdx(t);this._hideTableHeaderColumnSortLink(n,!0),this._hideTableHeaderColumnSortLink(n,!1)},"mouseup .oj-table-column-header-cell":function(e){this._getTableResizeUtils().handleHeaderColumnResizeEnd(e)},"mousedown .oj-table-data-cell":function(e){var t=this._getEventTargetElement(e),i=this._getTableDomUtils().getElementRowIdx(t);this._setRowFocus(i,!0,!0,t,e),$(e.target).data(this._FOCUS_CALLED,!0)},"mouseup .oj-table-data-cell":function(e){this._getTableResizeUtils().handleHeaderColumnResizeEnd(e)},"click .oj-table-column-header-asc-link":function(e){var t=this._getTableDomUtils().getElementColumnIdx(e.target),i=this._getTableDomUtils().getTableHeaderColumn(t);i&&($(i).data("sorted")==this._COLUMN_SORT_ORDER._ASCENDING?this._handleSortTableHeaderColumn(t,!1,e):this._handleSortTableHeaderColumn(t,!0,e),e.preventDefault(),e.stopPropagation())},"click .oj-table-column-header-acc-asc-link":function(e){if(this._getKeyboardKeys().length>0&&this._getKeyboardKeys()[0]==this._KEYBOARD_CODES._KEYBOARD_CODE_ENTER)return e.preventDefault(),void e.stopPropagation();var t=this._getTableDomUtils().getElementColumnIdx(e.target),i=this._getTableDomUtils().getTableHeaderColumn(t);i&&($(i).data("sorted")==this._COLUMN_SORT_ORDER._DESCENDING?this._handleSortTableHeaderColumn(t,!0,e):this._handleSortTableHeaderColumn(t,!1,e),e.preventDefault(),e.stopPropagation())},"click .oj-table-column-header-dsc-link":function(e){var t=this._getTableDomUtils().getElementColumnIdx(e.target),i=this._getTableDomUtils().getTableHeaderColumn(t);i&&($(i).data("sorted")==this._COLUMN_SORT_ORDER._DESCENDING?this._handleSortTableHeaderColumn(t,!0,e):this._handleSortTableHeaderColumn(t,!1,e),e.preventDefault(),e.stopPropagation())},"click .oj-table-column-header-acc-dsc-link":function(e){if(this._getKeyboardKeys().length>0&&this._getKeyboardKeys()[0]==this._KEYBOARD_CODES._KEYBOARD_CODE_ENTER)return e.preventDefault(),void e.stopPropagation();var t=this._getTableDomUtils().getElementColumnIdx(e.target),i=this._getTableDomUtils().getTableHeaderColumn(t);i&&($(i).data("sorted")==this._COLUMN_SORT_ORDER._DESCENDING?this._handleSortTableHeaderColumn(t,!0,e):this._handleSortTableHeaderColumn(t,!1,e),e.preventDefault(),e.stopPropagation())},"click .oj-table-data-cell":function(e){var t=this._getEventTargetElement(e),n=this._getTableDomUtils().getElementRowIdx(t);if(!$(e.target).data(this._FOCUS_CALLED)){var o=this._setRowFocus(n,!0,!0,t,e);if($(e.target).data(this._FOCUS_CALLED,!1),!o)return}if(e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT]){var s,r=this._getLastRowSelection();if(null!=r)if(window.getSelection().removeAllRanges(),n<r)for(s=n;s<=r;s++)this._setRowSelection(s,!0,t,e,!0);else for(s=r;s<=n;s++)this._setRowSelection(s,!0,t,e,!0)}else if(i.DomUtils.isMetaKeyPressed(e))this._setRowSelection(n,!this._getRowSelection(n),t,e,!0);else if(0==this._getKeyboardKeys().length){var a=this._getRowSelection(n);this._setRowSelection(n,!a,t,e,!0),this._isTouchDevice()&&this._getRowSelectionMode()==this._OPTION_SELECTION_MODES._MULTIPLE&&!a&&this._getTableDomUtils().createTableBodyRowTouchSelectionAffordance(n)}},"dblclick .oj-table-data-cell":function(e){var t=this._getTableDomUtils().getElementColumnIdx(e.target);this._setTableEditable(!0,!1,t,!0,e)},"contextmenu .oj-table-data-cell":function(e){var t=this._getTableDomUtils().getElementRowIdx(this._getEventTargetElement(e)),i=this._getRowKeyForRowIdx(t);this._setCurrentRow({rowKey:i},e,!1)},"click .oj-table-column-header-cell":function(e){var t=this._getEventTargetElement(e),n=this._getTableDomUtils().getElementColumnIdx(t);if($(e.target).data(this._FOCUS_CALLED)||(this._setHeaderColumnFocus(n,!0,!0,e,null),$(e.target).data(this._FOCUS_CALLED,!1)),e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT]){var o,s=this._getLastHeaderColumnSelection();if(null!=s)if(n<s)for(o=n;o<=s;o++)this._setHeaderColumnSelection(o,!0,t,e,!0);else for(o=s;o<=n;o++)this._setHeaderColumnSelection(o,!0,t,e,!0)}else if(i.DomUtils.isMetaKeyPressed(e))this._setHeaderColumnSelection(n,!this._getHeaderColumnSelection(n),t,e,!0);else if(0==this._getKeyboardKeys().length){var r=this._getSelectedHeaderColumnIdxs();null!=r&&r.length>0&&(-1==r.indexOf(n)||r.length>1)&&this._clearSelectedHeaderColumns(),this._setHeaderColumnSelection(n,!this._getHeaderColumnSelection(n),t,e,!0),this._getTableDndContext().setTableHeaderColumnDraggable(n,!0)}},"dragstart .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDragStart(e)},"dragenter .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDragEnter(e)},"dragover .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDragOver(e)},"dragleave .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDragLeave(e)},"drop .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDrop(e)},"dragend .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDragEnd(e)},"dragstart .oj-table-body-row":function(e){return this._getTableDndContext().handleRowDragStart(e)},"drag .oj-table-body-row":function(e){return this._getTableDndContext().handleRowDrag(e)},"dragend .oj-table-body-row":function(e){return this._getTableDndContext().handleRowDragEnd(e)},"dragenter .oj-table-body":function(e){return this._getTableDndContext().handleRowDragEnter(e)},"dragover .oj-table-body":function(e){return this._getTableDndContext().handleRowDragOver(e)},"dragleave .oj-table-body":function(e){return this._getTableDndContext().handleRowDragLeave(e)},"drop .oj-table-body":function(e){return this._getTableDndContext().handleRowDrop(e)}},_eventsContainer:{"touchstart .oj-table-body-row-touch-selection-affordance-touch-area":function(e){1==e.originalEvent.touches.length&&this._getRowSelectionMode()==this._OPTION_SELECTION_MODES._MULTIPLE&&(e.target.classList.contains(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOP_CLASS)||e.target.classList.contains(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOP_ICON_CLASS)?(e.preventDefault(),this._mouseDownRowIdx=$(this._getTableDomUtils().getTableBodyRowTouchSelectionAffordanceBottom()).data("rowIdx")):(e.target.classList.contains(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_BOTTOM_CLASS)||e.target.classList.contains(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_BOTTOM_ICON_CLASS))&&(e.preventDefault(),this._mouseDownRowIdx=$(this._getTableDomUtils().getTableBodyRowTouchSelectionAffordanceTop()).data("rowIdx")))},"touchstart .oj-table-column-header-cell":function(e){1==e.originalEvent.touches.length&&this._isTableColumnsResizable()&&this._getTableResizeUtils().handleHeaderColumnResizeStart(e)&&e.preventDefault()},"touchmove .oj-table-header":function(e){this._isTableColumnsResizable()&&this._getTableResizeUtils().setResizeCursor(e)},"touchmove .oj-table-body-row-touch-selection-affordance-touch-area":function(e){if(null!=this._mouseDownRowIdx){e.preventDefault();var t=this._getEventTargetElement(e);this._handleMouseEnterSelection(t)}},touchend:function(e){if(null!=this._mouseDownRowIdx){var t=this._getEventTargetElement(e);this._handleMouseEnterSelection(t)}this._mouseDownRowIdx=null,this._getTableResizeUtils().handleHeaderColumnResizeEnd(e)&&e.preventDefault()},"touchend .oj-table-body":function(e){var t=this;this._touchEventDoubleTapFunction(e,function(e){return function(){var i=t._getEventTargetElement(e),n=t._getTableDomUtils().getElementColumnIdx(i);t._setTableEditable(!0,!1,n,!0,e),e.preventDefault()}}(e))},touchcancel:function(e){this._mouseDownRowIdx=null,this._getTableResizeUtils().clearTableHeaderColumnsResize()}},_refresh:function(){var e=!1;this._dataOption!=this.options[this._CONST_DATA]&&(this._clearCachedDataMetadata(),null==this._data&&(e=!0));var t=this._GetContextMenu();if(null!=t&&t!=this._getTableDomUtils().getContextMenu()&&this._getTableDomUtils().createContextMenu(this._handleContextMenuSelect.bind(this)),this._getTableDomUtils().clearCachedDom(),this._getTableDomUtils().refreshContextMenu(),this._refreshTableStatusMessage(),e)return this._initFetch();var i=this;return this._queueTask(function(){var e=i._invokeDataFetchRows(null,!1);return i=null,e})},_setOption:function(e,t){"selection"==e?(this._clearSelectedRows(),this._clearSelectedHeaderColumns(),this._setSelection(t),this._setSelectionDefault(),this._superApply(arguments)):"currentRow"==e?this._setCurrentRow(t,null,!0)&&this._superApply(arguments):(this._superApply(arguments),this._isTableRefreshNeeded(e,t)&&("columns"==e&&(this._clearCachedMetadata(),this._refreshTableHeader()),this._refresh()))},_addKeyboardKey:function(e){var t=!1;for(var i in this._KEYBOARD_CODES)this._KEYBOARD_CODES.hasOwnProperty(i)&&this._KEYBOARD_CODES[i]==e&&(t=!0);if(t){var n,o=this._getKeyboardKeys(),s=!1,r=o.length;for(n=0;n<r;n++)if(o[n]==e){s=!0;break}s||o.push(e)}},_addComponentBusyState:function(e){var t=i.Context.getContext(this.element[0]).getBusyContext(),n={description:"The component identified by '"+this._getTableDomUtils().getTableId()+"' "+e};return t.addBusyState(n)},_addSingleTableBodyRow:function(e,t,n,o){var s=this._getTableDomUtils().createTableBodyRow(e,t[this._CONST_KEY]);return this._getTableDomUtils().styleTableBodyRow(s,!0),this._getTableDomUtils().insertTableBodyRow(e,s,t,n),s=this._refreshTableBodyRow(e,t,s,n,o,!0),n||i.Components.subtreeAttached(s),s},_animateVisibleRows:function(e,t,i){if(i=null==this._animationActionOverride?i:this._animationActionOverride,this._hasPendingTasks())return this._animationActionOverride="update",Promise.resolve();this._animationActionOverride=null;var n,o=this._getVisibleRowIdxs(),s=[];for(n=0;n<t.length;n++)-1==o.indexOf(t[n])&&s.push(t[n]);for(s.sort(function(e,t){return e-t}),n=s.length-1;n>=0;n--)e.splice(s[n],1);this._unregisterResizeListener();var r=this;return this._getTableAnimationUtils().animateTableBodyRows(e,i).then(function(){r._registerResizeListener()})},_checkRowOrHeaderColumnFocus:function(e){var t=this._getFocusedRowIdx(),i=this._getFocusedHeaderColumnIdx();if(null==t&&null==i){var n=null,o=this._getCurrentRow(),s=null!=o?o.rowKey:null;null!=s&&(n=this._getRowIdxForRowKey(s)),null==n?this._isTableHeaderless()?this._setRowFocus(0,!0,!0,null,e):this._setHeaderColumnFocus(0,!0,!1,e,!0):this._setRowFocus(n,!0,!0,null,e)}},_cleanTemplateNodes:function(e){var t=this._getTemplateEngine();null!=t&&t.clean(e)},_clearCachedMetadata:function(){this._columnDefArray=null,this._setTableActionableMode(!1)},_clearCachedDataMetadata:function(){null!=this._data&&this._unregisterDataSourceEventListeners(),this._data=null},_clearDataWaitingState:function(){this._hideInlineMessage(),this._hideStatusMessage(),this._dataFetching=!1,this._dataResolveFunc&&(this._dataResolveFunc(),this._dataResolveFunc=null)},_clearKeyboardKeys:function(){this._keyboardKeys=[]},_clearFocusedHeaderColumn:function(){var e=this._getFocusedHeaderColumnIdx();null!=e&&this._setHeaderColumnFocus(e,!1,!1,null,null),this._activeColumnIndex=-1},_clearFocusedRow:function(e){null!=this._getFocusedRowIdx()&&this._setRowFocus(-1,!0,e,null,null)},_clearSelectedHeaderColumns:function(){var e,t=this._getSelectedHeaderColumnIdxs(),i=t.length;for(e=0;e<i;e++)this._setHeaderColumnSelection(t[e],!1,null,null,!1,!0)},_clearSelectedRows:function(){var e,t=this._getSelectedRowIdxs(),i=t.length;for(e=0;e<i;e++)this._setRowSelection(t[e],!1,null,null,!1,!0);this._isTouchDevice()&&this._getRowSelectionMode()==this._OPTION_SELECTION_MODES._MULTIPLE&&this._getTableDomUtils().removeTableBodyRowTouchSelectionAffordance()},_clearSortedHeaderColumn:function(e){var t=this._getSortedTableHeaderColumnIdx();if(null!=t){var n=this._getTableDomUtils().getTableHeaderColumn(t),o=$(n).data("sorted");if($(n).data("sorted",null),null==e||t!==e)this._hideTableHeaderColumnSortLink(t,o==this._COLUMN_SORT_ORDER._ASCENDING);else{var s=n.querySelectorAll("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_LINK_CLASS);s.length>0&&(s=s[0]).classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED);var r=n.querySelectorAll("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_LINK_CLASS);r.length>0&&(r=r[0]).classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)}}},_executeTableBodyRowsAdd:function(e){var t=this;this._queueTask(function(){var n=!1,o=[],s=[];if(e.length>1){var r,a=e.length,l=!0;for(r=0;r<a;r++)0!=r&&e[r-1].rowIdx!=e[r].rowIdx-1&&(l=!1),s.push(e[r].rowIdx);if(l){var u=t._getTableDomUtils().getTableBody(),h=document.createDocumentFragment();for(a=e.length,r=0;r<a;r++)o.push(t._addSingleTableBodyRow(e[r].rowIdx,e[r].row,h,e[0].rowIdx));if(0==e[0].rowIdx)u.insertBefore(h,u.firstChild);else{var d=t._getTableDomUtils().getTableBodyRow(e[0].rowIdx);null!=d?u.insertBefore(h,d):u.appendChild(h,null)}t._getTableDomUtils().clearCachedDomRowData(),i.Components.subtreeAttached(u),n=!0}}if(!n)for(a=e.length,r=0;r<a;r++)o.push(t._addSingleTableBodyRow(e[r].rowIdx,e[r].row));return t._getTableDomUtils().clearCachedDomRowData(),t._refreshTableFooter(),t._IsCustomElement()?t._animateVisibleRows(o,s,"add"):Promise.resolve()})},_executeTableBodyRowsChange:function(e,t){var i,n,o=this,s=e.length,r=[],a=[];this._queueTask(function(){for(i=0;i<s;i++)n=o._refreshTableBodyRow(e[i].rowIdx,e[i].row),r.push(n),a.push(e[i].rowIdx);return o._refreshTableFooter(),o._IsCustomElement()?o._animateVisibleRows(r,a,"update"):Promise.resolve()})},_executeTableBodyRowsRemove:function(e){e.sort(function(e,t){return t.rowIdx-e.rowIdx});var t=this,i=this._getCurrentRow(),n=null!=i?i.rowIndex:0,o=null!=i?i.rowKey:null;this._queueTask(function(){var i,s,r,a,l=[],u=[],h=[],d=e.length,c=!1,p=t._getTableDomUtils().getTableBodyRows();if(null!=p&&p.length>0){for(i=0;i<p.length;i++)l.push(i);for(i=0;i<d;i++)for(r=e[i].rowIdx,u.push(r),s=0;s<l.length;s++)if(l[s]==r){a=this._getTableDomUtils().getTableBodyRow(r),h.push(a),l.splice(s,1);break}0==l.length&&(c=!0)}var _=this._getTableDomUtils().getTableBody(),m=$.contains(_,document.activeElement),g=!1;if(c)m&&(g=!0),t._setSelection(null),t.option("selection",null,{_context:{writeback:!0,internalSet:!0}});else for(i=0;i<d;i++)if(r=e[i].rowIdx,a=this._getTableDomUtils().getTableBodyRow(r),m&&null!=a&&$.contains(a,document.activeElement)){g=!0,m=!1;break}var f=function(){for(i=0;i<d;i++)r=e[i].rowIdx,t._getTableDomUtils().removeTableBodyRow(r)},v=function(){t._refreshTableFooter(),null!=(p=t._getTableDomUtils().getTableBodyRows())&&0!=p.length||t._showNoDataMessage(),null!=o&&(null==p||c||n>=p.length?t._setCurrentRow(null,null,!1):t._setCurrentRow({rowIndex:n,rowKey:null},null,!1)),g&&t._getTableDomUtils().getTable().focus()};if(!c)return new Promise(function(e,i){t._IsCustomElement()?t._animateVisibleRows(h,u,"remove").then(function(){f(),v(),e(!0)}):(f(),v(),e(!0))});t._getTableDomUtils().removeAllTableBodyRows(),v()})},_getAllBusyContextsForElement:function(e){if(!e)return null;var t=e.querySelectorAll("[data-oj-context]");if(t.length>0){var n,o=[];for(n=0;n<t.length;n++)o.push(i.Context.getContext(t[n]).getBusyContext());return o}return null},_getColumnDefs:function(){return this._columnDefArray||(this._columnDefArray=this._getColumnMetadata()),this._columnDefArray},_getColumnMetadata:function(){var e=this.options.columns,t=this.options.columnsDefault;if((0==e.length||1==e.length&&null==e[0].id&&null==e[0].headerText&&null==e[0].field)&&null==t.headerText&&null==t.field)return[];var i,n=[],o=e.length;for(i=0;i<o;i++)n[i]=$.extend({},t,e[i]);var s=[],r=n.length;for(i=0;i<r;i++)s.push(n[i]);var a=this._getData(),l=!1;for(null!=a&&null!=a.getCapability("sort")&&(l=!0),i=0;i<r;i++)null==s[i][this._FIELD_ID]&&(s[i][this._FIELD_ID]=this._COLUMN_HEADER_ID_PREFIX+i),null!=s[i].sortable&&s[i].sortable!=this._OPTION_AUTO||!l||(s[i].sortable=this._OPTION_ENABLED);return s},_getColumnIdxForColumnKey:function(e){var t=this._getColumnDefs();if(null!=t){var n,o,s=t.length;for(n=0;n<s;n++)if(o=t[n],i.Object.compareValues(o.id,e))return n}return null},_getColumnIdxsForElementsWithStyleClass:function(e){var t=this._getTableDomUtils().getTable().querySelectorAll(e),i=[];if(t&&t.length>0){var n,o,s,r,a,l=t.length;for(n=0;n<l;n++){for(r=this._getTableDomUtils().getElementColumnIdx(t[n]),s=!1,a=i.length,o=0;o<a;o++)i[o]==r&&(s=!0);s||i.push(r)}}return i},_getColumnKeyForColumnIdx:function(e){var t=this._getColumnDefs();return null!=t&&e<t.length?t[e][this._FIELD_ID]:null},_getColumnRenderer:function(e,t){var i=this._getColumnDefs()[e],n=null;return"cell"==t?n=i.renderer:"footer"==t?n=i.footerRenderer:"header"==t&&(n=i.headerRenderer),this._WrapCustomElementRenderer(n)},_getCurrentRow:function(){return this._getData()?this._currentRow:null},_getData:function(){if(!this._data&&null!=this.options.data){var e=this.options.data;if(i.TableDataSource&&e instanceof i.TableDataSource||i.PagingTableDataSource&&e instanceof i.PagingTableDataSource)this._data=new i.TableDataSourceAdapter(e);else{if(!i.DataProviderFeatureChecker.isIteratingDataProvider(e)){var t=this._LOGGER_MSG._ERR_DATA_INVALID_TYPE_SUMMARY,n=this._LOGGER_MSG._ERR_DATA_INVALID_TYPE_DETAIL;throw new Error(t+"\n"+n)}e instanceof i.ListDataProviderView?this._data=e:this._data=new i.ListDataProviderView(e)}this._dataOption=this.options.data,this._registerDataSourceEventListeners()}return this._data},_getFocusedHeaderColumnIdx:function(){return this._getColumnIdxsForElementsWithStyleClass("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS+"."+i.TableDomUtils.MARKER_STYLE_CLASSES._FOCUS_HIGHLIGHT+",."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS+"."+i.TableDomUtils.MARKER_STYLE_CLASSES._FOCUS)[0]},_getFocusedRowIdx:function(){return this._getRowIdxsForElementsWithStyleClass("."+i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS+"."+i.TableDomUtils.MARKER_STYLE_CLASSES._FOCUS_HIGHLIGHT+",."+i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS+"."+i.TableDomUtils.MARKER_STYLE_CLASSES._FOCUS)[0]},_getHeaderColumnSelection:function(e){return this._getTableDomUtils().getTableHeaderColumn(e).classList.contains(i.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)},_getColumnSelectionMode:function(){return null==this.options.selectionMode?null:this.options.selectionMode[this._CONST_COLUMN]},_getKeyboardKeys:function(){return this._keyboardKeys||(this._keyboardKeys=[]),this._keyboardKeys.reverse()},_getLastHeaderColumnSelection:function(){return null!=this._lastSelectedColumnIdxArray&&this._lastSelectedColumnIdxArray.length>0?this._lastSelectedColumnIdxArray[0]:null},_getLastRowSelection:function(){return null!=this._lastSelectedRowIdxArray&&this._lastSelectedRowIdxArray.length>0?this._lastSelectedRowIdxArray[0]:null},_getRowIdxRowArray:function(e,t){var i=[];if(null!=e){var n,o=e[this._CONST_INDEXES].length;for(n=0;n<o;n++)i.push({row:{data:e[this._CONST_DATA][n],metadata:e[this._CONST_METADATA]?e[this._CONST_METADATA][n]:null,key:e[this._CONST_KEYS][n],index:e[this._CONST_INDEXES][n]},rowIdx:t+n})}return i},_getRowIdxForRowKey:function(e){var t=this._getTableDomUtils().getTableBodyRows();if(null!=t&&t.length>0){var n,o=t.length;for(n=0;n<o;n++)if(i.Object.compareValues($(t[n]).data("rowKey"),e))return n}return null},_getDataSourceRowIndexForRowKey:function(e){var t=this._getTableDomUtils().getTableBodyRows();if(null!=t&&t.length>0){var n,o=t.length;for(n=0;n<o;n++)if(i.Object.compareValues($(t[n]).data("rowKey"),e)){var s=this._getData(),r=0;return this._isPagingModelDataProvider()&&(r=s.getStartItemIndex()),n+r}}return null},_getEditableRowIdx:function(){var e=null;return null!=this._getEditableRowKey()&&null!==(e=this._getRowIdxForRowKey(this._getEditableRowKey()))?e:this._editableRowIdx},_getEditableRowKey:function(){return this._editableRowKey},_getEventTargetElement:function(e){return 0==e.type.indexOf("touch")?this._getTouchEventTargetElement(e):e.currentTarget},_getRowIdxsForElementsWithStyleClass:function(e){var t=this._getTableDomUtils().getTable().querySelectorAll(e),i=[];if(t&&t.length>0){var n,o,s,r,a,l=t.length;for(n=0;n<l;n++){for(s=this._getTableDomUtils().getElementRowIdx(t[n]),a=!1,r=i.length,o=0;o<r;o++)i[o]==s&&(a=!0);a||i.push(s)}}return i},_getRowKeyForDataSourceRowIndex:function(e){var t=this._getTableDomUtils().getTableBodyRows();if(null!=t&&t.length>0){var i=this._getData(),n=0;this._isPagingModelDataProvider()&&(n=i.getStartItemIndex());var o,s=t.length;for(o=0;o<s;o++)if(n+o==e)return $(t[o]).data("rowKey")}return null},_getRowKeyForRowIdx:function(e){var t=this._getTableDomUtils().getTableBodyRow(e);return null!=t?$(t).data("rowKey"):null},_getRowRenderer:function(){return this._WrapCustomElementRenderer(this.options.rowRenderer)},_getRowSelection:function(e){return this._getTableDomUtils().getTableBodyRow(e).classList.contains(i.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)},_getRowSelectionMode:function(){return null==this.options.selectionMode?null:this.options.selectionMode[this._CONST_ROW]},_getSelectedHeaderColumnIdxs:function(){return this._getColumnIdxsForElementsWithStyleClass("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS+"."+i.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)},_getSelectedRowIdxs:function(){return this._getRowIdxsForElementsWithStyleClass("."+i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS+"."+i.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)},_getSelection:function(){var e=this._getSelectedRowIdxs(),t=this._getSelectedHeaderColumnIdxs(),i=null,n=!0;if(null!=e&&e.length>0)i=e;else{if(!(null!=t&&t.length>0))return[];i=t,n=!1}var o,s,r,a,l,u=[],h=0,d=null,c=i.length;for(l=0;l<c;l++)r=i[l],0==l?((o={})[this._CONST_STARTINDEX]={},o[this._CONST_ENDINDEX]={},o.startKey={},o.endKey={},n?(a=this._getRowKeyForRowIdx(r),s=this._getDataSourceRowIndexForRowKey(a),o.startKey[this._CONST_ROW]=a,o.endKey[this._CONST_ROW]=a,o[this._CONST_STARTINDEX][this._CONST_ROW]=s,o[this._CONST_ENDINDEX][this._CONST_ROW]=s):(o[this._CONST_STARTINDEX][this._CONST_COLUMN]=r,o[this._CONST_ENDINDEX][this._CONST_COLUMN]=r,a=this._getColumnKeyForColumnIdx(r),o.startKey[this._CONST_COLUMN]=a,o.endKey[this._CONST_COLUMN]=a),u[0]=o):(o=u[h],n?(a=this._getRowKeyForRowIdx(r),s=this._getDataSourceRowIndexForRowKey(a),o.endKey[this._CONST_ROW]=a,o[this._CONST_ENDINDEX][this._CONST_ROW]=s):(o[this._CONST_ENDINDEX][this._CONST_COLUMN]=r,a=this._getColumnKeyForColumnIdx(r),o.endKey[this._CONST_COLUMN]=a),r!=d+1&&(n?(a=this._getRowKeyForRowIdx(d),s=this._getDataSourceRowIndexForRowKey(a),o.endKey[this._CONST_ROW]=a,o[this._CONST_ENDINDEX][this._CONST_ROW]=s,(o={})[this._CONST_STARTINDEX]={},o[this._CONST_ENDINDEX]={},o.startKey={},o.endKey={},a=this._getRowKeyForRowIdx(r),s=this._getDataSourceRowIndexForRowKey(a),o.startKey[this._CONST_ROW]=a,o.endKey[this._CONST_ROW]=a,o[this._CONST_STARTINDEX][this._CONST_ROW]=s,o[this._CONST_ENDINDEX][this._CONST_ROW]=s):(o[this._CONST_ENDINDEX][this._CONST_COLUMN]=d,a=this._getColumnKeyForColumnIdx(d),o.endKey[this._CONST_COLUMN]=a,(o={})[this._CONST_STARTINDEX]={},o[this._CONST_ENDINDEX]={},o.startKey={},o.endKey={},o[this._CONST_STARTINDEX][this._CONST_COLUMN]=r,o[this._CONST_ENDINDEX][this._CONST_COLUMN]=r,a=this._getColumnKeyForColumnIdx(r),o.startKey[this._CONST_COLUMN]=a,o.endKey[this._CONST_COLUMN]=a),u[++h]=o)),d=r;return u},_getSlotTemplate:function(e){var t;return this._IsCustomElement()&&e&&(t=i.BaseCustomElementBridge.getSlotMap(this._getRootElement())[e])&&t.length>0&&"template"===t[0].tagName.toLowerCase()?t[0]:null},_getSortedTableHeaderColumnIdx:function(){var e,t=this._getTableDomUtils().getTableHeaderColumns(),i=t?t.length:0;for(e=0;e<i;e++)if(null!=$(t[e]).data("sorted"))return e;return null},_getTabbableElements:function(e,t){var i=null;return null!=(i=t?$(e).find(":tabbable"):$(e).find(":tabbable").not(".oj-helper-hidden-accessible"))&&i.length>0?i.toArray():null},_getTableAnimationUtils:function(){return this._tableAnimationUtils||(this._tableAnimationUtils=new i.TableAnimationUtils(this)),this._tableAnimationUtils},_getTableDndContext:function(){return this._tableDndContext||(this._tableDndContext=new i.TableDndContext(this)),this._tableDndContext},_getTableDomUtils:function(){return this._tableDomUtils||(this._tableDomUtils=new i.TableDomUtils(this)),this._tableDomUtils},_getTableResizeUtils:function(){return this._tableResizeUtils||(this._tableResizeUtils=new i.TableResizeUtils(this)),this._tableResizeUtils},_getTemplateEngine:function(){return this._templateEngine},_getTouchEventTargetElement:function(e){var t=e.originalEvent.changedTouches[0];return document.elementFromPoint(t.clientX,t.clientY)},_getVisibleRowIdxs:function(){var e=[],t=this._getTableDomUtils().getTableBodyRows();if(null!=t&&t.length>0){var i,n=$(window).height(),o=this.element[0].getBoundingClientRect();if(o.top>=0&&o.bottom<=n)for(i=0;i<t.length;i++)e.push(i);else{if(o.top>n)return e;var s,r,a=o.left>=0?o.left+1:o.right-1,l=document.elementFromPoint(a,0),u=null;for(null!=l&&(u=this._getTableDomUtils().getElementRowIdx(l)),s=null!=u?u:0,o.bottom>n?(u=null,null!=(l=document.elementFromPoint(a,n-1))&&(u=this._getTableDomUtils().getElementRowIdx(l)),r=null!=u?u:t.length-1):r=t.length-1,i=s;i<=r;i++)e.push(i)}}return e},_handleContextMenuSelect:function(e,t){var i,n=(i=t?t.item:$(e.target)).attr("data-oj-command"),o=this._getTableDomUtils().getFirstAncestor(this._contextMenuEvent.target,"oj-table-column-header-cell");o=null==o?this._contextMenuEventHeaderColumn:o;var s=this._getTableDomUtils().getFirstAncestor(this._contextMenuEvent.target,"oj-table-data-cell"),r=null;if(null!=o&&(r=this._getTableDomUtils().getElementColumnIdx(o)),null!=s&&(r=this._getTableDomUtils().getElementColumnIdx(s)),null!==r)if("oj-table-sortAsc"==n)this._handleSortTableHeaderColumn(r,!0,e);else if("oj-table-sortDsc"==n)this._handleSortTableHeaderColumn(r,!1,e);else if("oj-table-enableNonContiguousSelection"==n)this._nonContiguousSelection=!0,i.attr("data-oj-command","oj-table-disableNonContiguousSelection"),i.children().first().text(this.getTranslatedString("labelDisableNonContiguousSelection"));else if("oj-table-disableNonContiguousSelection"==n)this._nonContiguousSelection=!1,i.attr("data-oj-command","oj-table-enableNonContiguousSelection"),i.children().first().text(this.getTranslatedString("labelEnableNonContiguousSelection"));else if("oj-table-resize"==n){var a=this._getTableDomUtils().getContextMenuResizePopup();a.setAttribute("data-oj-columnIdx",r);var l=null!=o?o.getBoundingClientRect():s.getBoundingClientRect(),u=document.getElementById(this._getTableDomUtils().getTableId()+"_resize_popup_spinner");$(u).ojInputNumber("option","value",Math.round(l.width));var h=null!=o?o:null!=s?s:this.getTable();$(a).ojPopup("open",h)}},_handleContextMenuResizePopup:function(e){var t=document.getElementById(this._getTableDomUtils().getTableId()+"_resize_popup_spinner"),i=$(t).ojInputNumber("option","value"),n=this._getTableDomUtils().getContextMenuResizePopup(),o=parseInt(n.getAttribute("data-oj-columnIdx"),10);$(n).ojPopup("close");var s,r=[],a=this.options.columns.length;for(s=0;s<a;s++)r[s]=$.extend({},{},this.options.columns[s]);r[o].width=i,this.option("columns",r,{_context:{writeback:!0,internalSet:!0}}),this._clearCachedMetadata();var l=this;this._refresh().then(function(){l._getTableDomUtils().getTable().focus()})},_handleDataAppend:function(e){try{var t=this;this._queueTask(function(){var i,n=[],o=e[t._CONST_DATA].length;for(i=0;i<o;i++)n[i]=i+e[t._CONST_STARTINDEX];t._refreshAll({data:e[t._CONST_DATA],keys:e[t._CONST_KEYS],indexes:n},e[t._CONST_STARTINDEX]),t=null})}catch(e){i.Logger.error(e)}finally{this._clearDataWaitingState()}},_handleDataError:function(e){this._clearDataWaitingState(),i.Logger.error(e)},_handleDataFetchStart:function(e){this._setDataWaitingState()},_handleDataRefresh:function(e){try{if(this._dataFetching)return;var t=this;this._queueTask(function(){var e=t._invokeDataFetchRows({});return t=null,e})}catch(e){i.Logger.error(e)}finally{this._clearDataWaitingState()}},_handleDataRowMutate:function(e){this._dataFetching||(null!=e.detail.remove&&this._handleDataRowRemove(e.detail.remove),null!=e.detail.add&&this._handleDataRowAdd(e.detail.add),null!=e.detail.update&&this._handleDataRowChange(e.detail.update))},_handleDataRowAdd:function(e){try{var t=this._getData(),n=e[this._CONST_DATA],o=e[this._CONST_INDEXES],s=[];e[this._CONST_KEYS].forEach(function(e){s.push(e)});var r=[];null!=e[this._CONST_AFTERKEYS]&&e[this._CONST_AFTERKEYS].forEach(function(e){r.push(e)}),n instanceof Array||(n=[n]);var a=0;this._isPagingModelDataProvider()&&(a=t.getStartItemIndex());var l=null;t instanceof i.TableDataSourceAdapter&&(i.FlattenedTreeTableDataSource&&t.tableDataSource instanceof i.FlattenedTreeTableDataSource?l=t.tableDataSource:i.PagingTableDataSource&&t.tableDataSource instanceof i.PagingTableDataSource&&i.FlattenedTreeTableDataSource&&t.tableDataSource.dataSource instanceof i.FlattenedTreeTableDataSource&&(l=t.tableDataSource.dataSource));var u,h,d,c,p=[],_=null,m=this._getTableDomUtils().getTableBodyRows(),g=null!=m?m.length:0,f=n.length;for(c=0;c<f;c++)d=null!=r?r[c]:"",h=null!=(u=this._getRowIdxForRowKey(d))&&u>=0?u+a:o[c]>=0?o[c]:0==c?g:o[c-1]+1,o[c]=h;for(c=0;c<f;c++)if(void 0!==(u=o[c]-a)){l&&(_=l._getMetadata(u));var v={data:n[c],metadata:_,key:s[c],index:o[c]};p.push({row:v,rowIdx:u})}p.length>0&&this._executeTableBodyRowsAdd(p)}catch(e){i.Logger.error(e)}finally{this._clearDataWaitingState()}},_handleDataRowChange:function(e){try{var t=e[this._CONST_DATA],n=[];e[this._CONST_KEYS].forEach(function(e){n.push(e)}),t instanceof Array||(t=[t]);var o,s=[],r=t.length;for(o=0;o<r;o++){var a=this._getRowIdxForRowKey(n[o]);if(void 0!==a){var l={data:t[o],key:n[o],index:a};s.push({row:l,rowIdx:a})}}s.length>0&&this._executeTableBodyRowsChange(s)}catch(e){i.Logger.error(e)}finally{this._clearDataWaitingState()}},_handleDataRowRemove:function(e){try{var t=e[this._CONST_DATA],n=[];e[this._CONST_KEYS].forEach(function(e){n.push(e)}),t instanceof Array||(t=[t]);var o,s=[],r=t.length;for(o=0;o<r;o++){var a=this._getRowIdxForRowKey(n[o]);if(void 0!==a){var l={data:t[o],key:n[o],index:a};s.push({row:l,rowIdx:a})}}s.length>0&&this._executeTableBodyRowsRemove(s)}catch(e){i.Logger.error(e)}finally{this._clearDataWaitingState()}},_handleKeydownEnd:function(e){if(!this._isTableActionableMode()){var t=this._getFocusedHeaderColumnIdx();if(null!=t&&t!=this._getColumnDefs().length-1)this._setHeaderColumnFocus(this._getColumnDefs().length-1,!0,!1,null,!1);else if(!this._hasEditableRow()){var i=this._getFocusedRowIdx(),n=this._getTableDomUtils().getTableBodyRows(),o=null!=n?n.length:0;null!=i&&i!=o-1&&o>0&&this._setRowFocus(o-1,!0,!0,null,e)}}},_handleKeydownEnter:function(e){if(!this._isTableActionableMode()){var t=this._getFocusedHeaderColumnIdx();if(null!=t&&this._getColumnDefs()[t].sortable==this._OPTION_ENABLED){var i=this._getTableDomUtils().getTableHeaderColumn(t),n=$(i).data("sorted");null==n||n==this._COLUMN_SORT_ORDER._DESCENDING?this._handleSortTableHeaderColumn(t,!0,e):this._handleSortTableHeaderColumn(t,!1,e)}else{var o=this._getCurrentRow();if((o=o||{}).rowIndex>=0)if(this._isTableEditMode()){if(!this._hasEditableRow())return void this._setTableEditable(!0,!1,0,!0,e);var s=this._getTableDomUtils().getElementColumnIdx(e.target);e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT]?this._setPreviousRowEditable(s,e):this._setNextRowEditable(s,e)}else this._setTableActionableMode(!0)}}},_handleKeydownEsc:function(e){e.preventDefault(),e.stopPropagation(),this._setTableEditable(!1,!0,0,!0,e),this._getTableDomUtils().getTable().focus(),this._setTableActionableMode(!1),this._getTableResizeUtils().clearTableHeaderColumnsResize()},_handleKeydownF2:function(e){e.preventDefault(),e.stopPropagation(),this._isTableEditMode()?this._hasEditableRow()?this._setTableEditable(!1,!1,0,!0,e):this._setTableEditable(!0,!1,0,!0,e):this._isTableActionableMode()?this._setTableActionableMode(!1):this._setTableActionableMode(!0)},_handleKeydownHome:function(e){if(!this._isTableActionableMode()){var t=this._getFocusedHeaderColumnIdx();if(null!=t&&0!=t)this._setHeaderColumnFocus(0,!0,!1,null,!0);else if(!this._hasEditableRow()){var i=this._getFocusedRowIdx();null!=i&&0!=i&&this._setRowFocus(0,!0,!0,null,e)}}},_handleKeydownLeftRight:function(e){if(!this._isTableActionableMode()){var t=this._getFocusedHeaderColumnIdx(),i=this._getColumnDefs();if(null!=t){var n=t;if(this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_LEFT)?n=t>0?t-1:t:this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_RIGHT)&&(n=t<i.length-1?t+1:t),n!=t&&(this._setHeaderColumnFocus(n,!0,!1,null,this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_RIGHT)),e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT])){var o=this._getHeaderColumnSelection(n);this._setHeaderColumnSelection(n,!o,null,e,!0),o&&this._getHeaderColumnSelection(t)&&this._setHeaderColumnSelection(t,!1,null,e,!0)}}}},_handleKeydownSpacebar:function(e){if(!this._isTableActionableMode()){var t=this._getFocusedRowIdx();if(null!=t)this._setRowSelection(t,!this._getRowSelection(t),null,e,!0);else if(!this._hasEditableRow()){var i=this._getFocusedHeaderColumnIdx();null!=i&&(this._clearSelectedRows(),this._setHeaderColumnSelection(i,!this._getHeaderColumnSelection(i),null,e,!0))}}},_handleKeydownTab:function(e){var t=!1,n=this._getFocusedRowIdx(),o=this._getFocusedHeaderColumnIdx();if((null!=n||null!=o)&&(this._isTableActionableMode()||this._hasEditableRow())){var s=document.activeElement,r=this._getTableDomUtils().getTableBody(),a=this._getTableDomUtils().getTableHeader();if(this._getEditableRowIdx()===n){var l=this._getTableDomUtils().getTableBodyRow(n),u=this._getTabbableElements(l),h=null!=u?u.length:0,d=$(u).index(s);if(d==h-1&&!e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT])return this._setNextRowEditable(0,e),e.preventDefault(),void e.stopPropagation();if(0!=d||!e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT])return;var c=this._getTableDomUtils().getTableHeaderColumns();if(c){var p=c.length;return this._setPreviousRowEditable(p-1,e),e.preventDefault(),void e.stopPropagation()}}else if($.contains(r,s)||$.contains(a,s)){var _=null;if($.contains(r,s)?_=this._getTableDomUtils().getTableBodyRow(n):$.contains(a,s)&&(_=this._getTableDomUtils().getTableHeader()),(g=this._getTabbableElements(_)).length>0){var m;if(g.length>1){if(e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT]){if(s==g[0])$(g[g.length-1]).focus(),e.preventDefault(),e.stopPropagation();else for(m=0;m<g.length;m++)if(s==g[m]){g[m-1].focus(),e.preventDefault(),e.stopPropagation();break}}else if(s==g[g.length-1])$(g[0]).focus(),e.preventDefault(),e.stopPropagation();else for(m=0;m<g.length;m++)if(s==g[m]){g[m+1].focus(),e.preventDefault(),e.stopPropagation();break}}else e.preventDefault(),e.stopPropagation();return}}if((null!=n&&!this._hasEditableRow()||null!=o)&&!e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT]){var g;if(t=!0,_=null,null!=n?_=this._getTableDomUtils().getTableBodyRow(n):null!=o&&(_=this._getTableDomUtils().getTableHeaderColumn(o)),null!=(g=this._getTabbableElements(_)))$(g[0]).focus();else if(null!=n){var f=this._getTabbableElements(r);$(f[0]).focus()}else if(null!=o){var v=this._getTabbableElements(a);$(v[0]).focus()}e.preventDefault(),e.stopPropagation()}}if(t)this._removeKeyboardKey(e.keyCode);else{this._clearKeyboardKeys(),this._clearFocusedHeaderColumn(),this._clearFocusedRow(!1),this._setTableActionableMode(!1);var C=this._getTableDomUtils().getTable(),y=this._getTabbableElements(C,!0),b=null!=y?y.length:0,S=C;if(!e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT]&&b>0)if(this._getTableDomUtils()._isFF()){var E=this._getTableDomUtils().getTableContainer();(S=document.createElement(i.TableDomUtils.DOM_ELEMENT._A)).setAttribute(i.TableDomUtils.DOM_ATTR._TABINDEX,"0"),S.setAttribute(i.TableDomUtils.DOM_ATTR._HREF,"#"),S.classList.add(i.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),E.appendChild(S),this._temporaryFocusForFF=S}else S=y[b-1];this._temporaryTableChildElementFocus=!0,S.focus();var T=this;setTimeout(function(){T._temporaryTableChildElementFocus=!1,T._temporaryFocusForFF&&($(T._temporaryFocusForFF).remove(),T._temporaryFocusForFF=null)},0)}},_handleKeydownUpDown:function(e){if(!this._isTableActionableMode()){var t=this._getFocusedRowIdx(),i=this._getFocusedHeaderColumnIdx();if(null==t||this._hasEditableRow())null!=i&&this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_DOWN)&&this._setRowFocus(0,!0,!0,null,e);else{var n=this._getTableDomUtils().getTableBodyRows(),o=null!=n?n.length:0,s=t;if(this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_UP)?t>0?s=t-1:this._hasEditableRow()||(s=t):this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_DOWN)&&(s=t<o-1?t+1:t),s!=t){if(!this._setRowFocus(s,!0,!0,null,e))return;if(this._getTableDomUtils().getTable().focus(),e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT]){var r=this._getRowSelection(s);this._setRowSelection(s,!r,null,e,!0),r&&this._getRowSelection(t)&&this._setRowSelection(t,!1,null,e,!0)}}else s==t&&0==t&&this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_UP)&&this._setHeaderColumnFocus(0,!0,!1,null,!0)}}},_handleMouseEnterSelection:function(e){var t=this._getTableDomUtils().getElementRowIdx(e);if(null!=t&&null!=this._mouseDownRowIdx&&this._mouseDownRowIdx!=t){var i=this._mouseDownRowIdx,n=this._getSelectedRowIdxs();if(t<i){for(o=0;o<n.length;o++)(n[o]<t||n[o]>i)&&this._setRowSelection(n[o],!1,e,null,!0);for(o=i;o>=t;o--)this._setRowSelection(o,!0,e,null,!0),this._getTableDomUtils().moveTableBodyRowTouchSelectionAffordanceTop(o)}else{var o;for(o=0;o<n.length;o++)(n[o]>t||n[o]<i)&&this._setRowSelection(n[o],!1,e,null,!0);for(o=i;o<=t;o++)this._setRowSelection(o,!0,e,null,!0),this._getTableDomUtils().moveTableBodyRowTouchSelectionAffordanceBottom(o)}}},_handleScrollerMaxRowCount:function(){var e=this.getTranslatedString("msgScrollPolicyMaxCountSummary"),t=this.getTranslatedString("msgScrollPolicyMaxCountDetail");this._showInlineMessage(e,t,i.Message.SEVERITY_LEVEL.WARNING)},_handleScrollerScrollLeft:function(e){this._scrollLeft=e;var t=this._getTableDomUtils().getTableHeaderRow();t&&("rtl"===this._GetReadingDirection()?t.style[i.TableDomUtils.CSS_PROP._RIGHT]="-"+e+i.TableDomUtils.CSS_VAL._PX:t.style[i.TableDomUtils.CSS_PROP._LEFT]="-"+e+i.TableDomUtils.CSS_VAL._PX);var n=this._getTableDomUtils().getTableFooterRow();n&&("rtl"===this._GetReadingDirection()?n.style[i.TableDomUtils.CSS_PROP._RIGHT]="-"+e+i.TableDomUtils.CSS_VAL._PX:n.style[i.TableDomUtils.CSS_PROP._LEFT]="-"+e+i.TableDomUtils.CSS_VAL._PX)},_handleScrollerScrollTop:function(e){this._scrollTop=e},_handleSortTableHeaderColumn:function(e,t,i){this._clearSortedHeaderColumn(e);var n=this._getColumnDefs()[e],o=null==n.sortProperty?n.field:n.sortProperty;this._invokeDataSort(o,t,i),this._sortColumn=n,this._refreshSortTableHeaderColumn(o,t)},_hasEditableRow:function(){return!!this._isTableEditMode()&&null!==this._getEditableRowIdx()},_hasRowOrCellRendererOrTemplate:function(e){if(null!=this._getRowRenderer())return!0;var t=null,i=null,n=this._getColumnDefs();if(null!=e)t=this._getColumnRenderer(e,"cell"),i=this._getSlotTemplate(n[e][this._CELL_TEMPLATE]);else{var o,s=n.length;for(o=0;o<s&&null==(t=this._getColumnRenderer(o,"cell"))&&null==(i=this._getSlotTemplate(n[o][this._CELL_TEMPLATE]));o++);}return null!=t||null!=i},_hideInlineMessage:function(){if(this._inlineMessageShown){var e=this._getTableDomUtils().getTableInlineMessage();this._getTableDomUtils().getTableContainer().classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._WARNING),e.classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._WARNING),e.style[i.TableDomUtils.CSS_PROP._BOTTOM]="",e.style[i.TableDomUtils.CSS_PROP._DISPLAY]=i.TableDomUtils.CSS_VAL._NONE,this._inlineMessageShown=!1}},_hideNoDataMessage:function(){if(this._noDataMessageShown){var e=this._getTableDomUtils().getTableBodyMessageRow();null!=e&&$(e).remove(),this._noDataMessageShown=!1}},_hideStatusMessage:function(){this._showStatusTimeout&&(clearTimeout(this._showStatusTimeout),this._showStatusTimeout=null),this._statusMessageShown&&(this._getTableDomUtils().getTableStatusMessage().style[i.TableDomUtils.CSS_PROP._DISPLAY]=i.TableDomUtils.CSS_VAL._NONE,this._statusMessageShown=!1)},_hideTableHeaderColumnSortLink:function(e,t){if(this._getColumnDefs()[e].sortable==this._OPTION_ENABLED){var n=this._getTableDomUtils().getTableHeaderColumn(e),o=$(n).data("sorted");if(!t||null!=o&&o!=this._COLUMN_SORT_ORDER._DESCENDING){if(!t&&(null==o||o==this._COLUMN_SORT_ORDER._ASCENDING)){var s=n.querySelectorAll("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_LINK_CLASS);s.length>0&&((s=s[0]).classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED),s.classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._ENABLED),s.classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED))}}else{var r=n.querySelectorAll("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_LINK_CLASS);r.length>0&&((r=r[0]).classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED),r.classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._ENABLED),r.classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED))}}},_initFetch:function(e,t){e=e||{};var n=this,o=this._getData();return null==o||!i.DataProviderFeatureChecker.isIteratingDataProvider(o)||this._isPagingModelDataProvider()&&!t?null==o?this._queueTask(function(){return Promise.resolve()}):void 0:this._queueTask(function(){return n._getTableDomUtils().getScroller().scrollTop=0,o instanceof i.TableDataSourceAdapter&&(e.fetchType="init",n._isLoadMoreOnScroll()&&(e[n._CONST_OFFSET]=0)),n._invokeDataFetchRows(e,!0)})},_initTemplateEngine:function(){var e=this;this._queueTask(function(){try{var t=i.Config.__getTemplateEngine().then(function(t){e._templateEngine=t},function(e){i.Logger.warn(e)})}catch(e){i.Logger.warn(e),t=Promise.resolve(null)}return t})},_invokeDataFetchRows:function(e,t){!(e=e||{})[this._CONST_PAGESIZE]&&this._isLoadMoreOnScroll()?e[this._CONST_PAGESIZE]=this.options.scrollPolicyOptions.fetchSize:e[this._CONST_PAGESIZE]=-1;var n=this._getData();if(null!=n){var o=this;return new Promise(function(s,r){o._setDataWaitingState(),o._dataProviderAsyncIterator=n.fetchFirst(e)[Symbol.asyncIterator](),o._dataProviderAsyncIterator.next().then(function(e){var r=e[o._CONST_VALUE],a=r[o._CONST_DATA],l=r.metadata.map(function(e){return e[o._CONST_KEY]}),u=0;n instanceof i.TableDataSourceAdapter&&(u=n[o._CONST_OFFSET]);var h=0;o._isPagingModelDataProvider()&&(h=n.getStartItemIndex());var d,c=[],p=a.length;for(d=0;d<p;d++)c[d]=u+h+d;o._refreshAll({data:a,metadata:[],keys:l,indexes:c},u,t,t),o._clearDataWaitingState(),o._processFetchSort(r),o._isLoadMoreOnScroll()&&o._registerDomScroller(),o=null,s(e)},function(e){o._clearDataWaitingState();var t=o._getTableDomUtils().getTableBodyRows();null!=t&&0!=t.length||o._showNoDataMessage(),s(null)})})}return Promise.resolve(null)},_invokeDataSort:function(e,t,i){if(!this._getData())return null;this._showStatusMessage();var n=[],o={};o[this._CONST_ATTRIBUTE]=e,o.direction=t?this._COLUMN_SORT_ORDER._ASCENDING:this._COLUMN_SORT_ORDER._DESCENDING,n.push(o),this._trigger("sort",i,{header:n[0][this._CONST_ATTRIBUTE],direction:n[0].direction}),this._initFetch({sortCriteria:n},!0)},_isColumnMetadataUpdated:function(){if(null!=this._columnDefArray){var e=this._getColumnMetadata();if(this._columnDefArray.length!=e.length)return!0;var t,i,n=e.length;for(t=0;t<n;t++)for(i in e[t])if(e[t].hasOwnProperty(i)&&e[t][i]!=this._columnDefArray[t][i]&&("id"!=i||null==e[t][i]||0!=e[t][i].indexOf(this._COLUMN_HEADER_ID_PREFIX)||null==this._columnDefArray[t][i]||0!=this._columnDefArray[t][i].indexOf(this._COLUMN_HEADER_ID_PREFIX)))return!0;return!1}return!0},_isKeyboardKeyPressed:function(e){var t,i=this._getKeyboardKeys(),n=i.length;for(t=0;t<n;t++)if(i[t]==e)return!0;return!1},_isLoadMoreOnScroll:function(){return this.options.scrollPolicy==this._OPTION_SCROLL_POLICY._LOADMORE_ON_SCROLL},_isNodeEditable:function(e){return this._isNodeType(e,/^INPUT|TEXTAREA/)},_isNodeClickable:function(e){return this._isNodeType(e,/SELECT|OPTION|BUTTON|^A\b/)},_isNodeDraggable:function(e){return $(e).closest("[draggable='true']").length>0},_isNodeType:function(e,t){for(var n,o=this._getTableDomUtils().getTable();null!=e&&e!=o&&(n=e.nodeName)!=i.TableDomUtils.DOM_ELEMENT._TD&&n!=i.TableDomUtils.DOM_ELEMENT._TH;)if(3!=e.nodeType){var s=e.getAttribute(i.TableDomUtils.DOM_ATTR._TABINDEX);if(n.match(t)&&-1!=s)return!0;e=e.parentNode}else e=e.parentNode;return!1},_isPagingModelDataProvider:function(){var e=this._getData();return null!=e.getStartItemIndex&&null!==e.getStartItemIndex()&&e.getStartItemIndex()>=0},_isStatusMessageShown:function(){return this._statusMessageShown},_isTableActionableMode:function(){return this._tableActionableMode},_isTableEditMode:function(){return this.options.editMode==this._OPTION_EDIT_MODE._ROW_EDIT},_isTableFooterless:function(){var e,t,i,n=this._getColumnDefs(),o=n.length;for(e=0;e<o;e++){if(t=this._getColumnRenderer(e,"footer"),i=this._getSlotTemplate(n[e][this._FOOTER_TEMPLATE]),null!=t)return!1;if(null!=i)return!1}return!0},_isTableHeaderless:function(){var e,t,i=this._getColumnDefs(),n=i.length;for(e=0;e<n;e++)if(t=this._getSlotTemplate(i[e][this._HEADER_TEMPLATE]),null!=i[e].headerText||null!=i[e].headerStyle||null!=i[e].sortable&&i[e].sortable!=this._OPTION_DISABLED||null!=i[e].sortProperty||null!=i[e].headerRenderer||null!=t)return!1;return!0},_isTableHeaderColumnsRendered:function(){return 1==this._renderedTableHeaderColumns},_isTableRefreshNeeded:function(e,t){var n=this._cachedOptions,o=!1;return"contextMenu"==e&&t=="#"+this._getTableDomUtils().getTableId()+"_contextmenu"?o=!1:"columns"!=e||this._isColumnMetadataUpdated()?"selection"==e||"currentRow"==e||i.Object.compareValues(t,n[e])||(o=!0):o=!1,this._cachedOptions=$.extend(!0,{},this.options),o},_isTableSortable:function(){var e,t=this._getColumnDefs(),i=t.length;for(e=0;e<i;e++)if(t[e].sortable==this._OPTION_ENABLED)return!0;return!1},_isTableColumnsResizable:function(){var e,t=this._getColumnDefs(),i=t.length;for(e=0;e<i;e++)if(t[e].resizable==this._OPTION_ENABLED)return!0;return!1},_isTableColumnsWidthSet:function(){var e,t=this._getColumnDefs(),i=t.length;for(e=0;e<i;e++)if(null!==t[e].width)return!0;return!1},_isTouchDevice:function(){if(null==this._isTouch){var e=navigator.userAgent.toLowerCase();-1!=e.indexOf("mobile")||-1!=e.indexOf("android")?this._isTouch=!0:this._isTouch=!1}return this._isTouch},_processFetchSort:function(e){try{var t=this,n=e.fetchParameters,o=this._getColumnDefs(),s=n[this._CONST_SORTCRITERIA];if(null!=s&&s.length>0){var r=s[0];this._refreshSortTableHeaderColumn(r.attribute,r.direction==this._COLUMN_SORT_ORDER._ASCENDING);var a=this.options.selection;if(null!=a){var l=!1;if(a.length>1)l=!0;else if(null!=a[0]){var u=a[0][this._CONST_STARTINDEX],h=a[0][this._CONST_ENDINDEX];i.Object.compareValues(u,h)||null==h||(l=!0)}l&&(this._setSelection(null),this.option("selection",[],{_context:{writeback:!0,internalSet:!0}}))}this._setCurrentRow(this.options.currentRow,null,!1);var d,c,p,_=null,m=o.length;for(d=0;d<m;d++)if(p=null==(c=o[d]).sortProperty?c.field:c.sortProperty,r.attribute==p){_=d;break}null!=_&&setTimeout(function(){t._scrollColumnIntoViewport(_),t=null,_=null},0)}else this._clearSortedHeaderColumn()}catch(e){i.Logger.error(e)}},_processSlottedChildren:function(){var e=this._getTableDomUtils().getTableBottomSlot();null!=e&&$(e).remove();var t=i.BaseCustomElementBridge.getSlotMap(this._getRootElement());for(var n in t)if(t.hasOwnProperty(n)&&n.length>0&&"bottom"===n){var o,s=t[n];if(null!=s)for(e=this._getTableDomUtils().createTableBottomSlot(),o=0;o<s.length;o++)e.appendChild(s[o])}},_refreshAll:function(e,t,n,o){if((this._isColumnMetadataUpdated()||!this._isTableHeaderColumnsRendered()&&!this._isTableHeaderless())&&(this._clearCachedMetadata(),this._refreshTableHeader(),null!=this._sortColumn)){var s,r,a=!1,l=this._getColumnDefs();if(null!=l){var u=l.length;for(s=0;s<u;s++)if(r=l[s],i.Object.compareValues(r,this._sortColumn)){a=!0;break}a||this._initFetch(null,!0)}}this._refreshTableFooter(),this._refreshTableBody(e,t,n,o)},_refreshSortTableHeaderColumn:function(e,t){var n,o,s=this._getColumnDefs(),r=null,a=s.length;for(n=0;n<a;n++)if(e==(null==(o=s[n]).sortProperty?o.field:o.sortProperty)){r=n;break}if(null!=r){this._clearSortedHeaderColumn(r);var l=this._getTableDomUtils().getTableHeaderColumn(r);if(null!=l){var u=$(l).data("sorted");if(t&&u!=this._COLUMN_SORT_ORDER._ASCENDING){$(l).data("sorted",this._COLUMN_SORT_ORDER._ASCENDING);var h=l.querySelectorAll("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_LINK_CLASS);h.length>0&&((h=h[0]).classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._ENABLED),h.classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED)),(c=l.querySelectorAll("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_CLASS)).length>0&&(c=c[0]).classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED),(d=l.querySelectorAll("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_CLASS)).length>0&&(d=d[0]).classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED),this._hideTableHeaderColumnSortLink(r,!t)}else if(!t&&u!=this._COLUMN_SORT_ORDER._DESCENDING){$(l).data("sorted",this._COLUMN_SORT_ORDER._DESCENDING);var d,c,p=l.querySelectorAll("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_LINK_CLASS);p.length>0&&((p=p[0]).classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._ENABLED),p.classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED)),(d=l.querySelectorAll("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_CLASS)).length>0&&(d=d[0]).classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED),(c=l.querySelectorAll("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_CLASS)).length>0&&(c=c[0]).classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED)}}}},_refreshTableBody:function(e,t,n,o){var s=this._getTableDomUtils().getTableBody();if(null!=s){var r,a,l=this._getRowIdxRowArray(e,t),u=$.contains(s,document.activeElement),h=!1;if(0==t)u&&(h=!0),this._getTableDomUtils().removeAllTableBodyRows();else if(null!=(r=this._getTableDomUtils().getTableBodyRows())&&r.length>0)for(d=r.length-1;d>=t;d--)u&&null!=(a=this._getTableDomUtils().getTableBodyRow(d))&&$.contains(a,document.activeElement)&&(h=!0,u=!1),this._getTableDomUtils().removeTableBodyRow(d);if(h&&this._getTableDomUtils().getTable().focus(),this._getTableDomUtils().clearCachedDomRowData(),this._hideNoDataMessage(),r=s.children,0!=l.length||null!=r&&0!=r.length){var d,c,p,_=document.createDocumentFragment(),m=l.length;for(d=0;d<m;d++)c=l[d].row,p=l[d].rowIdx,null!=c&&(a=this._getTableDomUtils().createTableBodyRow(p,c[this._CONST_KEY]),this._getTableDomUtils().styleTableBodyRow(a,!0),this._getTableDomUtils().insertTableBodyRow(p,a,c,_),this._refreshTableBodyRow(p,c,a,_,t,!0));s.appendChild(_),this._getTableDomUtils().clearCachedDomRowData(),this._hasRowOrCellRendererOrTemplate()&&(this._getTableDomUtils().refreshTableDimensions(null,null,n,o),i.Components.subtreeAttached(s))}else this._showNoDataMessage()}},_refreshTableBodyRow:function(e,t,n,o,s,r){this.options;var a=this._getRowRenderer(),l=(this._getColumnDefs(),this._getTableDomUtils().getTableBody());(isNaN(e)||e<0)&&i.Logger.error("Error: Invalid rowIdx value: "+e);var u=this._getTableDomUtils().hashCode(t[this._CONST_KEY]);if(null==n){if(!(n=this._getTableDomUtils().getTableBodyRow(e)))return null;$(n).empty(),this._getTableDomUtils().createTableBodyCellAccSelect(e,t[this._CONST_KEY],u,n,!0)}this._hideNoDataMessage();var h=this._getCurrentRow();h=h||{};var d=i.TableRendererUtils.getRendererContextObject(this,n,{row:t,isCurrentRow:h.rowIndex==e}),c={rowContext:d,row:t[this._CONST_DATA],componentElement:d.componentElement,parentElement:d.parentElement,data:t[this._CONST_DATA]};if(null!=a){var p=a(c);null!=p?n.appendChild(p):(null==o?n=l.children[e]:(s=null==s?0:s,n=o.children?o.children[e-s]:$(o).children()[e-s]),this._getTableDomUtils().clearCachedDomRowData(),this._getTableDomUtils().setTableBodyRowAttributes(t,n),this._getTableDomUtils().styleTableBodyRow(n,!1)),this._getTableDomUtils().createTableBodyCellAccSelect(e,t[this._CONST_KEY],u,n,!1);var _,m,g,f,v=n.getElementsByTagName(i.TableDomUtils.DOM_ELEMENT._TD),C=v.length;for(_=1;_<C;_++)m=v[_],this._getTableDomUtils().setTableBodyCellAttributes(e,t[this._CONST_KEY],u,_-1,m),this._getTableDomUtils().styleTableBodyCell(_-1,m,!1);if(null!=this._columnsDestMap)for(_=0;_<this._columnsDestMap.length-1;_++)this._columnsDestMap[_]>_&&(g=v[this._columnsDestMap[_]+1],f=v[_+1],g.parentNode.insertBefore(g,f),v=n.getElementsByTagName(i.TableDomUtils.DOM_ELEMENT._TD))}else i.TableRendererUtils.tableBodyRowDefaultRenderer(this,e,t,c);return n},_refreshTableFooter:function(){var e=this._getColumnDefs(),t=this._getTableDomUtils().getTableFooter();if(!t){if(this._isTableFooterless())return;t=this._getTableDomUtils().createTableFooter(),this._getTableDomUtils().styleTableFooter(t)}var n=this._getTableDomUtils().getTableFooterRow();if(this._hasFooterTemplate&&(this._cleanTemplateNodes(n),this._hasFooterTemplate=!1),$(n).empty(),e&&e.length>0){this._getTableDomUtils().createTableFooterAccSelect(n);var o,s,r,a,l,u=e.length;for(o=0;o<u;o++)if(s=e[o],r=this._getColumnRenderer(o,"footer"),a=this._getTableDomUtils().createTableFooterCell(o,this._getColumnSelectionMode()),this._getTableDomUtils().styleTableFooterCell(o,a),this._getTableDomUtils().insertTableFooterCell(o,a),r){var h=i.TableRendererUtils.getRendererContextObject(this,a,{});null!=(l=r({footerContext:h,columnIndex:o,componentElement:h.componentElement,parentElement:h.parentElement}))?(a.empty(),a.appendChild(l)):(a=$(n).children(":not(."+i.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS+")")[o],this._getTableDomUtils().styleTableFooterCell(o,a,this._getColumnSelectionMode()))}else{var d=this._getSlotTemplate(s[this._FOOTER_TEMPLATE]);if(d){var c=this._getRootElement(),p=this._getTemplateEngine();if(null!=p){var _=i.TableRendererUtils.getSlotTemplateContextObject(this),m=p.execute(c,d,_,this.options.as);m instanceof Array||(m=[m]),m.map(function(e){a.appendChild(e)}),this._hasFooterTemplate=!0}}}}},_refreshTableHeader:function(){var e=this,t=this._getColumnDefs(),n=this._getTableDomUtils().getTableHeader();if(!n){if(this._isTableHeaderless())return;n=this._getTableDomUtils().createTableHeader(),this._getTableDomUtils().styleTableHeader(n)}var o=this._getTableDomUtils().getTableHeaderRow();if(this._unregisterChildStateListeners(o),this._hasHeaderTemplate&&(this._cleanTemplateNodes(o),this._hasHeaderTemplate=!1),$(o).empty(),t&&t.length>0){var s=this._getTableDomUtils().createTableHeaderAccSelectRowColumn();o.appendChild(s);var r,a,l,u,h,d,c,p=t.length;for(r=0;r<p;r++){if(a=t[r],l=this._getColumnRenderer(r,"header"),u=this._getTableDomUtils().createTableHeaderColumn(r,this._getColumnSelectionMode()),l)c={headerContext:d=i.TableRendererUtils.getRendererContextObject(this,u,{}),columnIndex:r,data:a.headerText,componentElement:d.componentElement,parentElement:d.parentElement},a.sortable==i.TableDomUtils._OPTION_ENABLED?c.columnHeaderSortableIconRenderer=function(t,n){i.TableRendererUtils.columnHeaderSortableIconRenderer(e,this,t,n)}:c.columnHeaderDefaultRenderer=function(t,n){i.TableRendererUtils.columnHeaderDefaultRenderer(e,this,t,n)},null!=(h=l(c))?($(u).empty(),$(u).append(h)):(u=$(o).children(":not(."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ACC_SELECT_ROW_CLASS+")")[r],this._getTableDomUtils().setTableHeaderColumnAttributes(r,u),this._getTableDomUtils().styleTableHeaderColumn(r,u,this._getColumnSelectionMode(),!1));else{var _=this._getSlotTemplate(a[this._HEADER_TEMPLATE]);if(_){var m=this._getRootElement(),g=this._getTemplateEngine();if(null!=g){u&&$(u).empty();var f=i.TableRendererUtils.getHeaderSlotTemplateContextObject(this,a.headerText,r),v=g.execute(m,_,f,this.options.as);v instanceof Array||(v=[v]),v.map(function(e){u.appendChild(e)}),this._hasHeaderTemplate=!0}}}this._getTableDomUtils().createTableHeaderColumnAccSelect(r,this._getColumnSelectionMode())}this._renderedTableHeaderColumns=!0}},_refreshTableStatusMessage:function(){var e=this._getTableDomUtils().getTableStatusMessage();null!=e&&$(e).remove(),this._getTableDomUtils().createTableStatusMessage()},_registerCustomEvents:function(){var e=$.event.special;e.ojtablebeforecurrentrow={handle:function(e){return e.handleObj.handler.apply(this,[e,arguments[1]])}},e.ojtablesort={handle:function(e){return e.handleObj.handler.apply(this,[e,arguments[1]])}}},_registerDataSourceEventListeners:function(){var e=this._getData();if(null!=e){var t;this._unregisterDataSourceEventListeners(),this._dataProviderEventHandlers=[],this._dataProviderEventHandlers.push({eventType:"mutate",eventHandler:this._handleDataRowMutate.bind(this)}),this._dataProviderEventHandlers.push({eventType:"refresh",eventHandler:this._handleDataRefresh.bind(this)});var i,n=this._dataProviderEventHandlers.length;for(t=0;t<n;t++)(i=e.addEventListener(this._dataProviderEventHandlers[t].eventType,this._dataProviderEventHandlers[t].eventHandler))&&(this._dataProviderEventHandlers[t].eventHandler=i)}},_registerDomEventListeners:function(){null!=this._getTableDomUtils().getScroller()&&$(this._getTableDomUtils().getScroller()).scroll(function(e){this._handleScrollerScrollLeft(this._getTableDomUtils().getScrollLeft(e.target)),this._handleScrollerScrollTop(e.target.scrollTop)}.bind(this))},_registerDomScroller:function(){var e=this;null!=this._domScroller&&this._domScroller.destroy(),this._domScrollerSuccessFunc=function(t){if(e._clearDataWaitingState(),null!=t)if(t.maxCountLimit)e._handleScrollerMaxRowCount();else{var i=t[e._CONST_VALUE],n=i[e._CONST_DATA],o=i.metadata.map(function(t){return t[e._CONST_KEY]});o=o.filter(function(t,i){return null===e._getRowIdxForRowKey(t)||(n.splice(i,1),!1)}),e._queueTask(function(){var t,i=this._getTableDomUtils().getTableBodyRows(),s=null!=i?i.length:0,r=[];for(t=0;t<n.length;t++)r[t]=s+t;e._refreshAll({data:n,keys:o,indexes:r},s)})}};var t=this._getTableDomUtils().getTableBodyRows(),n=null!=t?t.length:0;this._domScroller=new i.DomScroller(this._getTableDomUtils().getScroller(),this._getData(),{asyncIterator:this._dataProviderAsyncIterator,fetchSize:this.options.scrollPolicyOptions.fetchSize,maxCount:this.options.scrollPolicyOptions.maxCount,initialRowCount:n,success:this._domScrollerSuccessFunc.bind(this),request:this._handleDataFetchStart.bind(this),fetchTrigger:1})},_registerResizeListener:function(){var e=this._getTableDomUtils().getTableContainer();if(!this._resizeListener){var t=this;this._resizeListener=function(e,n){if(i.Context.getContext(t.element[0]).getBusyContext().isReady()){var o=$(t._getTableDomUtils().getTableContainer()).outerHeight(),s=$(t._getTableDomUtils().getTableContainer()).outerWidth();t._getTableDomUtils().refreshTableDimensions(s,o)}}}this._isResizeListenerAdded||(i.DomUtils.addResizeListener(e,this._resizeListener,50),this._isResizeListenerAdded=!0)},_removeKeyboardKey:function(e){var t,i=this._getKeyboardKeys(),n=i.length;for(t=0;t<n;t++)i[t]==e&&i.splice(t,1)},_scrollColumnIntoViewport:function(e){var t="rtl"===this._GetReadingDirection(),i=this._getTableDomUtils().getTableBody(),n=this._getTableDomUtils().getTableHeaderColumn(e);if(n){var o=this._getTableDomUtils().getScrollbarWidth(),s=n.getBoundingClientRect(),r=i.getBoundingClientRect(),a=!1;if(t){if(s.left<r.left+o){var l=r.left-s.left+o;this._getTableDomUtils()._isIE()||(l*=-1),$(i).scrollLeft($(i).scrollLeft()+l),a=!0}s.right>r.right&&!a&&(l=s.right-r.right,this._getTableDomUtils()._isIE()||(l*=-1),$(i).scrollLeft($(i).scrollLeft()-l))}else s.left<r.left&&(l=r.left-s.left,$(i).scrollLeft($(i).scrollLeft()-l),a=!0),s.right>r.right-o&&!a&&(l=s.right-r.right+o,$(i).scrollLeft($(i).scrollLeft()+l))}},_scrollRowIntoViewport:function(e){var t=this._getTableDomUtils().getTableBodyRow(e),i=this._getTableDomUtils().getScrollbarHeight(),n=t.getBoundingClientRect(),o=this._getTableDomUtils().getScroller(),s=o.getBoundingClientRect(),r=!1;if(n.bottom>s.bottom-i){var a=n.bottom-s.bottom+i;$(o).scrollTop($(o).scrollTop()+a),r=!0}n.top<s.top&&!r&&(a=s.top-n.top,$(o).scrollTop($(o).scrollTop()-a))},_setCurrentRow:function(e,t,n){var o,s,r,a,l=this._currentRow,u=!0;if(null==e){if(null!=l){try{u=this._trigger("beforeCurrentRow",t,{currentRow:null,previousCurrentRow:this._currentRow})}catch(e){var h=this._LOGGER_MSG._ERR_PRECURRENTROW_ERROR_SUMMARY,d=i.Translations.applyParameters(this._LOGGER_MSG._ERR_PRECURRENTROW_ERROR_DETAIL,{error:e.toString()});return i.Logger.info(h+"\n"+d),!1}if(!u)return!1;if(s=l.rowIndex,r=this._getRowKeyForDataSourceRowIndex(s),a=this._getRowIdxForRowKey(r),!1===this._setTableEditable(!1,!1,0,!0,t)){this._currentRow=l;var c=document.activeElement,p=this._getTableDomUtils().getElementColumnIdx(c),_=this;return this._queueTask(function(){var e=a,t=p;null!=e&&null!=t?setTimeout(function(){_._setCellFocus(e,t)},0):null!=e&&setTimeout(function(){_._setRowFocus(e,!0,!1,null,null)},0)}),!1}this._currentRow=null,this.option("currentRow",null,{_context:{writeback:!0,originalEvent:t,internalSet:!0}}),null==t&&this._setRowFocus(-1,!0,!1,null,t),null!=(o=this._getTableDomUtils().getTableBodyRow(a))&&o.classList.remove(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_CURRENT_ROW_CLASS)}return!0}var m,g=this._getData(),f=e.rowIndex,v=e.rowKey;if(null==v&&(v=this._getRowKeyForDataSourceRowIndex(f)),e={rowIndex:f=this._getDataSourceRowIndexForRowKey(v),rowKey:v},-1!=(m=this._getRowIdxForRowKey(v))&&(!g||m<-1||null===m||null===v)){if(h=this._LOGGER_MSG._ERR_CURRENTROW_UNAVAILABLE_INDEX_SUMMARY,d=i.Translations.applyParameters(this._LOGGER_MSG._ERR_CURRENTROW_UNAVAILABLE_INDEX_DETAIL,{rowIdx:m}),n)throw new Error(h+"\n"+d);return i.Logger.info(h+"\n"+d),!1}var C=this._getFocusedRowIdx(),y=!i.Object.compareValues(this._currentRow,e);if(y){try{u=this._trigger("beforeCurrentRow",t,{currentRow:{rowIndex:f,rowKey:v},previousCurrentRow:this._currentRow})}catch(e){return h=this._LOGGER_MSG._ERR_PRECURRENTROW_ERROR_SUMMARY,d=i.Translations.applyParameters(this._LOGGER_MSG._ERR_PRECURRENTROW_ERROR_DETAIL,{error:e.toString()}),i.Logger.info(h+"\n"+d),!1}if(!u)return!1;if(this._currentRow={rowIndex:f,rowKey:v},null!=l&&(s=l.rowIndex,r=this._getRowKeyForDataSourceRowIndex(s),a=this._getRowIdxForRowKey(r)),!1===this._setTableEditable(!1,!1,0,!0,t))return this._currentRow=l,c=document.activeElement,p=this._getTableDomUtils().getElementColumnIdx(c),_=this,this._queueTask(function(){var e=a,t=p;null!=e&&null!=t?setTimeout(function(){_._setCellFocus(e,t)},0):null!=e&&setTimeout(function(){_._setRowFocus(e,!0,!1,null,null)},0)}),!1;this.option("currentRow",this._currentRow,{_context:{writeback:!0,originalEvent:t,internalSet:!0}}),null!=(o=this._getTableDomUtils().getTableBodyRow(m))&&o.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_CURRENT_ROW_CLASS),null!=l&&null!=(o=this._getTableDomUtils().getTableBodyRow(a))&&o.classList.remove(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_CURRENT_ROW_CLASS)}return(y||C!=e.rowIndex)&&null==t&&this._setRowFocus(m,!0,!1,null,t),!0},_setDataWaitingState:function(){this._showStatusMessage(),this._hideNoDataMessage(),this._dataFetching=!0,this._dataResolveFunc||(this._dataResolveFunc=this._addComponentBusyState("is waiting for data."))},_setCellFocus:function(e,t){var i=this._getTableDomUtils().getTableBodyCell(e,t);if(!i)return!1;var n,o=!1,s=i.querySelectorAll("*");for(n=0;n<s.length;n++)o||$(s[n]).is(":focusable")&&($(s[n]).focus(),o=$(s[n]).is(":focus")||s[n]==document.activeElement);return o},_setCellInRowFocus:function(e,t,i){if(!this._setCellFocus(e,t)){var n=this._getTableDomUtils().getTableBodyCells(e);if(n){var o,s,r=n.length;for(o=0;o<r;o++)if(s=o,i||(s=r-o-1),this._setCellFocus(e,s))return}}},_setComponentNotReady:function(){this._readyResolveFunc||(this._readyResolveFunc=this._addComponentBusyState("is being loaded."))},_setComponentReady:function(){this._readyResolveFunc&&(this._readyResolveFunc(),this._readyResolveFunc=null)},_setEditableRowIdx:function(e){this._editableRowKey=this._getRowKeyForRowIdx(e),this._editableRowIdx=e},_setFocusInHandler:function(e){this._focusInHandler=e},_setFocusOutHandler:function(e){this._focusOutHandler=e},_setHeaderColumnFocus:function(e,t,i,n,o){var s=null;if(null!=n&&(s=this._getEventTargetElement(n)),t){this._clearFocusedRow(!0),i&&this._clearSelectedRows();var r=this._getFocusedHeaderColumnIdx(),a=this._getColumnDefs();if(null!==o)if(o){for(;e<=a.length-1&&!((l=this._getTableDomUtils().getTableHeaderColumn(e))&&l.clientWidth>0);)e++;e>a.length-1&&(e=null!==r?r:a.length-1)}else{for(;e>=0;){var l;if((l=this._getTableDomUtils().getTableHeaderColumn(e))&&l.clientWidth>0)break;e--}e<0&&(e=null!==r?r:0)}null!==r&&r!=e&&this._setHeaderColumnFocus(r,!1,!1,n,null),this._scrollColumnIntoViewport(e),this._activeColumnIndex=e}this._setHeaderColumnState(e,{focused:t},s)},_setHeaderColumnSelection:function(e,t,n,o,s,r){if(this._getColumnSelectionMode()==this._OPTION_SELECTION_MODES._SINGLE||this._getColumnSelectionMode()==this._OPTION_SELECTION_MODES._MULTIPLE){if((isNaN(e)||e<0)&&i.Logger.error("Error: Invalid column selection value: "+e),!r&&"true"==new String(this.options.selectionRequired).toLowerCase()&&!t){var a=this._getSelectedHeaderColumnIdxs();if(null!=a&&1==a.length)return}this._getColumnSelectionMode()==this._OPTION_SELECTION_MODES._SINGLE&&t&&this._clearSelectedHeaderColumns(),this._setHeaderColumnState(e,{selected:t},n,o),this._setLastHeaderColumnSelection(e,t),this._getTableDomUtils().getTableHeaderColumnAccSelect(e).getElementsByClassName(i.TableDomUtils.CSS_CLASSES._CHECKBOX_ACC_SELECT_COLUMN_CLASS)[0].checked=t}if(s){var l=this._getSelection();this.option("selection",l,{_context:{writeback:!0,internalSet:!0}}),t&&this.option("firstSelectedRow",{key:null,data:null},{_context:{writeback:!0,internalSet:!0}})}},_setHeaderColumnState:function(e,t,n,o){var s=this._getTableDomUtils().getTableHeaderColumn(e);if(s){var r=t.focused,a=t.selected;null!=a&&s.classList.contains(i.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)!=a&&(a?s.classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED):s.classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)),null!=r&&(r?(this._focusInHandler($(s)),this._showTableHeaderColumnSortLink(e)):(this._focusOutHandler($(s)),this._hideTableHeaderColumnSortLink(e,!0),this._hideTableHeaderColumnSortLink(e,!1))),this._updateHeaderColumnStateCellsClass(e)}},_setLastHeaderColumnSelection:function(e,t){this._lastSelectedColumnIdxArray||(this._lastSelectedColumnIdxArray=[]);var i,n=this._lastSelectedColumnIdxArray.length;for(i=0;i<n;i++)if(this._lastSelectedColumnIdxArray[i]==e){this._lastSelectedColumnIdxArray.splice(i,1);break}t&&this._lastSelectedColumnIdxArray.push(e)},_setLastRowSelection:function(e,t){this._lastSelectedRowIdxArray||(this._lastSelectedRowIdxArray=[]);var i,n=this._lastSelectedRowIdxArray.length;for(i=0;i<n;i++)if(this._lastSelectedRowIdxArray[i]==e){this._lastSelectedRowIdxArray.splice(i,1);break}t&&this._lastSelectedRowIdxArray.push(e)},_setNextRowEditable:function(e,t){var i=this._getTableDomUtils().getTableBodyRows(),n=null!=i?i.length:0,o=this._getEditableRowIdx();o>=0&&o<n-1?(this._setTableEditable(!1,!1,e,!0,t),this._setCurrentRow({rowIndex:o+1},t,!1),this._setTableEditable(!0,!1,e,!0,t)):o===n-1&&(this._setTableEditable(!1,!1,e,!0,t),this._getTableDomUtils().getTable().focus())},_setPreviousRowEditable:function(e,t){var i=this._getEditableRowIdx();i>=1?(this._setTableEditable(!1,!1,e,!1,t),this._setCurrentRow({rowIndex:i-1},t,!1),this._setTableEditable(!0,!1,e,!1,t)):0===i&&(this._setTableEditable(!1,!1,e,!1,t),this._getTableDomUtils().getTable().focus())},_setRowFocus:function(e,t,i,n,o){if(-1==e)return null!=(r=this._getFocusedRowIdx())&&this._setRowFocus(r,!1,i,null,null),!(i&&!this._setCurrentRow(null,o,!1));var s=this._getTableDomUtils().getTableBodyRow(e);if(!s)return!1;if(t){var r;if(null!=(r=this._getFocusedRowIdx())&&r!=e&&this._setRowFocus(r,!1,i,n,null),i){var a=this._getRowKeyForRowIdx(e);if(!this._setCurrentRow({rowKey:a},o,!1))return!1}this._focusInHandler($(s)),this._scrollRowIntoViewport(e),this._updateRowStateCellsClass(e,{focused:!0,hover:!1}),this._clearFocusedHeaderColumn(),this._clearSelectedHeaderColumns(),this._setTableActionableMode(!1)}else this._focusOutHandler($(s)),this._updateRowStateCellsClass(e,{focused:!1});return!0},_setRowSelection:function(e,t,n,o,s,r){if(this._getRowSelectionMode()==this._OPTION_SELECTION_MODES._SINGLE||this._getRowSelectionMode()==this._OPTION_SELECTION_MODES._MULTIPLE){if((isNaN(e)||e<0)&&i.Logger.error("Error: Invalid row selection value: "+e),!r&&"true"==new String(this.options.selectionRequired).toLowerCase()&&!t){var a=this._getSelectedRowIdxs();if(null!=a&&1==a.length)return}this._getRowSelectionMode()==this._OPTION_SELECTION_MODES._SINGLE&&t&&this._clearSelectedRows();var l=this._getTableDomUtils().getTableBodyRow(e);if(null!=l){var u=!1;if(l.classList.contains(i.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)!=t){t?l.classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED):l.classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED),u=!0;var h=this.options.dnd.drag;h&&("rows"===h||h.rows)&&(l.draggable=t)}if(u&&(t?this._updateRowStateCellsClass(e,{hover:!1,focused:!1,selected:!0}):this._updateRowStateCellsClass(e,{selected:!1})),this._setLastRowSelection(e,t),this._getTableDomUtils().getTableBodyCellAccSelect(l).getElementsByClassName(i.TableDomUtils.CSS_CLASSES._CHECKBOX_ACC_SELECT_ROW_CLASS)[0].checked=t,s){var d=this._getSelection();if(this.option("selection",d,{_context:{writeback:!0,internalSet:!0}}),null!=d&&d.length>0){var c=d[0].startKey;if(null!=c&&null!=c[this._CONST_ROW]){var p=this.getDataForVisibleRow(this._getRowIdxForRowKey(c[this._CONST_ROW]));if(p)return void this.option("firstSelectedRow",{key:p[this._CONST_KEY],data:p[this._CONST_DATA]},{_context:{writeback:!0,internalSet:!0}})}}this.option("firstSelectedRow",{key:null,data:null},{_context:{writeback:!0,internalSet:!0}})}}}},_setSelection:function(e){if(null==e)return this._clearSelectedRows(),void this._clearSelectedHeaderColumns();var t,n,o,s,r,a,l,u,h,d,c,p,_=e.length;for(t=0;t<_;t++){if(null==(o=e[t]).startKey&&null==o[this._CONST_STARTINDEX]||null==o.endKey&&null==o[this._CONST_ENDINDEX])return i.Logger.error("Error: Invalid range object in selection. Both start and end objects must be specified"),null;if(s=null,r=null,a=null,l=null,u=null,h=null,d=null,c=null,p=!1,null!=o.startKey&&null!=o.startKey[this._CONST_ROW]&&(a=this._getDataSourceRowIndexForRowKey(o.startKey[this._CONST_ROW]),null!=o[this._CONST_STARTINDEX]&&null!=o[this._CONST_STARTINDEX][this._CONST_ROW]&&a!=o[this._CONST_STARTINDEX][this._CONST_ROW]&&(p=!0)),null!=o.endKey&&null!=o.endKey[this._CONST_ROW]&&(l=this._getDataSourceRowIndexForRowKey(o.endKey[this._CONST_ROW]),null!=o[this._CONST_ENDINDEX]&&null!=o[this._CONST_ENDINDEX][this._CONST_ROW]&&l!=o[this._CONST_ENDINDEX][this._CONST_ROW]&&(p=!0)),null!=o.startKey&&null!=o.startKey[this._CONST_COLUMN]&&(d=this._getColumnIdxForColumnKey(o.startKey[this._CONST_COLUMN]),null!=o[this._CONST_STARTINDEX]&&null!=o[this._CONST_STARTINDEX][this._CONST_COLUMN]&&d!=o[this._CONST_STARTINDEX][this._CONST_COLUMN]&&(p=!0)),null!=o.endKey&&null!=o.endKey[this._CONST_COLUMN]&&(c=this._getColumnIdxForColumnKey(o.endKey[this._CONST_COLUMN]),null!=o[this._CONST_ENDINDEX]&&null!=o[this._CONST_ENDINDEX][this._CONST_COLUMN]&&c!=o[this._CONST_ENDINDEX][this._CONST_COLUMN]&&(p=!0)),null==a&&null!=o[this._CONST_STARTINDEX]&&(a=o[this._CONST_STARTINDEX][this._CONST_ROW]),null==l&&null!=o[this._CONST_ENDINDEX]&&(l=o[this._CONST_ENDINDEX][this._CONST_ROW]),null==d&&null!=o[this._CONST_STARTINDEX]&&(d=o[this._CONST_STARTINDEX][this._CONST_COLUMN]),null==c&&null!=o[this._CONST_ENDINDEX]&&(c=o[this._CONST_ENDINDEX][this._CONST_COLUMN]),null!=a&&null!=l&&null!=d&&null!=c)return i.Logger.error("Error: Invalid range object in selection - Can only support row or column selection. Not both"),null;if(null!=a&&a>=0&&null!=l&&l>=0)for(s=this._getRowKeyForDataSourceRowIndex(a),r=this._getRowKeyForDataSourceRowIndex(l),u=this._getRowIdxForRowKey(s),h=this._getRowIdxForRowKey(r),n=u;n<=h;n++)try{this._setRowSelection(n,!0,null,null,p)}catch(e){i.Logger.error("Error: "+e)}else{if(null==d||null==c)return i.Logger.error("Error: Invalid range object in selection - \n start row: "+a+"\nend row: "+l+"\nstart column: "+d+"\nend column: "+c),null;for(n=d;n<=c;n++)try{this._setHeaderColumnSelection(n,!0,null,null,p)}catch(e){i.Logger.error("Error: "+e)}}}},_setSelectionDefault:function(){if("true"==new String(this.options.selectionRequired).toLowerCase())if(this._getRowSelectionMode()==this._OPTION_SELECTION_MODES._MULTIPLE||this._getRowSelectionMode()==this._OPTION_SELECTION_MODES._SINGLE){var e=this._getSelectedRowIdxs();null!=e&&0!=e.length||this._setRowSelection(0,!0,null,null,!0)}else if(this._getColumnSelectionMode()==this._OPTION_SELECTION_MODES._MULTIPLE||this._getColumnSelectionMode()==this._OPTION_SELECTION_MODES._SINGLE){var t=this._getSelectedHeaderColumnIdxs();null!=t&&0!=t.length||this._setHeaderColumnSelection(0,!0,null,null,!0)}},_setTableActionableMode:function(e){if(this._isTableEditMode())this._tableActionableMode=!1;else if(!(null!=this._tableActionableMode&&this._tableActionableMode===e||null==this._tableActionableMode&&!1===e))if(e){var t=this._getFocusedRowIdx(),i=this._getFocusedHeaderColumnIdx();if(null!=t||null!=i){var n=null;if(null!=(n=null!=t?this._getTableDomUtils().getTableBodyRow(t):this._getTableDomUtils().getTableHeaderColumn(i))){var o=this._getTabbableElements(n);null!=o&&o.length>0&&(this._tableActionableMode=e,o[0].focus())}}}else{this._tableActionableMode=e;var s=this._getTableDomUtils().getTableBody();$.contains(s,document.activeElement)&&this._getTableDomUtils().getTable().focus()}},_setTableEditable:function(e,t,n,o,s){if(this._isTableEditMode()){var r=this._getCurrentRow();if(null!=r){var a,l=r.rowKey,u=this._getRowIdxForRowKey(l);try{if(e&&!this._hasEditableRow()){var h=this._getTableDomUtils().getTableBodyRow(u),d=i.TableRendererUtils.getRendererContextObject(this,h,{row:{key:l,index:r.rowIndex},isCurrentRow:!0});a=this._trigger("beforeRowEdit",s,{rowContext:d})}else{if(e||!this._hasEditableRow())return;h=this._getTableDomUtils().getTableBodyRow(this._getEditableRowIdx()),l=this._getRowKeyForRowIdx(this._getEditableRowIdx()),d=i.TableRendererUtils.getRendererContextObject(this,h,{row:{key:l,index:this._getDataSourceRowIndexForRowKey(l)},isCurrentRow:!0}),a=this._trigger("beforeRowEditEnd",s,{rowContext:d,cancelEdit:t})}}catch(e){return!1}if(!a)return!1;var c=this._getEditableRowIdx(),p=this;e?(this._setEditableRowIdx(u),this._refreshRow(u,!1).then(function(){p._queueTask(function(){var e=u,t=n,i=o;p._setCellInRowFocus(e,t,i)})})):(this._setEditableRowIdx(null),this._getTableDomUtils().getTable().focus()),null!=c&&null!=this._getTableDomUtils().getTableBodyRow(c)&&this._refreshRow(c,!1).then(function(){p._queueTask(function(){var e=c,t=this._getTableDomUtils().getTableBodyRow(e);null!=t&&t.classList.remove(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_EDIT_CLASS)})})}}},_showInlineMessage:function(e,t,n){if(!this._inlineMessageShown){this._getTableDomUtils().setTableInlineMessage(e,t,n);var o=this._getTableDomUtils().getTableInlineMessage(),s=this._getTableDomUtils().getTableContainer();n==i.Message.SEVERITY_LEVEL.WARNING&&(s.classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._WARNING),o.classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._WARNING)),o.style[i.TableDomUtils.CSS_PROP._DISPLAY]=i.TableDomUtils.CSS_VAL._BLOCK,o.style[i.TableDomUtils.CSS_PROP._WIDTH]="100%",o.style[i.TableDomUtils.CSS_PROP._BOX_SIZING]=i.TableDomUtils.CSS_VAL._BORDER_BOX,this._inlineMessageShown=!0}},_showNoDataMessage:function(){if(!this._noDataMessageShown){var e=this._getTableDomUtils().getTableBodyMessageRow(),t=this._getData(),i=null;i=null!=this.options.emptyText?this.options.emptyText:this.getTranslatedString(this._BUNDLE_KEY._MSG_NO_DATA);var n=null!=t?i:this.getTranslatedString(this._BUNDLE_KEY._MSG_INITIALIZING);null==e?this._getTableDomUtils().createTableBodyMessageRow(this._getColumnDefs().length,n):this._getTableDomUtils().setTableBodyMessage(n),this._noDataMessageShown=!0}},_showStatusMessage:function(){if(!this._showStatusTimeout&&!this._statusMessageShown){var e=this._getTableDomUtils().getTableStatusMessage(),t=this;this._showStatusTimeout=setTimeout(function(){e.style[i.TableDomUtils.CSS_PROP._DISPLAY]=i.TableDomUtils.CSS_VAL._INLINE,t._statusMessageShown=!0,t._getTableDomUtils().refreshTableStatusPosition()},this._getShowStatusDelay())}},_getShowStatusDelay:function(){var e;return null==this._defaultOptions&&(this._defaultOptions=i.ThemeUtils.parseJSONFromFontFamily("oj-table-option-defaults")),e=parseInt(this._defaultOptions.showIndicatorDelay,10),isNaN(e)?0:e},_showTableHeaderColumnSortLink:function(e){if(this._getColumnDefs()[e].sortable==this._OPTION_ENABLED){var t=this._getTableDomUtils().getTableHeaderColumn(e);if(!t)return;if(null==$(t).data("sorted")){var n=t.querySelectorAll("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_LINK_CLASS);n.length>0&&((n=n[0]).classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._ENABLED),n.classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED));var o=t.querySelectorAll("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_CLASS);o.length>0&&(o=o[0]).classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED);var s=t.querySelectorAll("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_CLASS);s.length>0&&(s=s[0]).classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED)}}},_touchEventDoubleTapFunction:function(e,t){var i=$(e.target);null!=this._lastTapTime&&(new Date).getTime()-this._lastTapTime<250&&this._lastTapTarget[0]==i[0]?(this._lastTapTime=null,this._lastTapTarget=null,t()):(this._lastTapTarget=i,this._lastTapTime=(new Date).getTime())},_unregisterChildStateListeners:function(e){var t,i=this,n=e.querySelectorAll("*");for(t=0;t<n.length;t++)i._UnregisterChildNode(n[t]);i=null},_unregisterDataSourceEventListeners:function(){var e=this._getData();if(null!=this._dataProviderEventHandlers&&null!=e){var t,i=this._dataProviderEventHandlers.length;for(t=0;t<i;t++)e.removeEventListener(this._dataProviderEventHandlers[t].eventType,this._dataProviderEventHandlers[t].eventHandler)}},_unregisterResizeListener:function(){var e=this._getTableDomUtils().getTableContainer();i.DomUtils.removeResizeListener(e,this._resizeListener),this._isResizeListenerAdded=!1},_updateHeaderColumnStateCellsClass:function(e,t){var n=this._getHeaderColumnSelection(e),o=this._getSelectedRowIdxs(),s=this._getTableDomUtils().getTableBodyRows();if(null!=s&&s.length>0){var r,a,l,u,h,d=s.length;for(r=0;r<d;r++)if(l=this._getTableDomUtils().getTableBodyCell(r,e),n)l.classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED);else{for(u=!1,h=o.length,a=0;a<h;a++)if(r==o[a]){u=!0;break}u||l.classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)}}},_updateRowStateCellsClass:function(e,t,n){var o=this._getTableDomUtils().getTableBodyCells(e),s=t.focused,r=t.selected,a=t.hover;if(o){if(null!=a){var l=o.length;for(u=0;u<l;u++)a?o[u].classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._HOVER):o[u].classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._HOVER)}if(null!=s)for(l=o.length,u=0;u<l;u++)s?this._focusInHandler($(o[u])):this._focusOutHandler($(o[u]));var u;if(null!=r)for(l=o.length,u=0;u<l;u++)r?o[u].classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED):o[u].classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)}},_setFinalTask:function(e){this._finalTask=e?e.bind(this):void 0},_hasPendingTasks:function(){return this._taskCount>1},_queueTask:function(e){var t=this;return this._pendingTasks||(this._taskCount=0,this._pendingTasks=Promise.resolve(),this._setComponentNotReady()),this._taskCount++,this._pendingTasks=this._pendingTasks.then(function(){if(!t._componentDestroyed)return e.bind(t)()}).then(function(e){if(t._taskCount--,0==t._taskCount){t._pendingTasks=void 0;try{t._componentDestroyed||(t._finalTask&&t._finalTask(),t._trigger("ready"))}catch(e){i.Logger.error(e)}t._setComponentReady(),t=null}return e},function(e){return t._taskCount--,0==t._taskCount&&(t._pendingTasks=void 0,i.Logger.error(e),t._setComponentReady(),t=null),Promise.reject(e)}),this._pendingTasks},_CompareOptionValues:function(e,t,n){switch(e){case"columns":case"currentRow":case"selection":return i.Object.compareValues(t,n);default:return this._super(e,t,n)}}}),i.Components.setDefaultOptions({ojTable:{display:i.Components.createDynamicPropertyGetter(function(){return(i.ThemeUtils.parseJSONFromFontFamily("oj-table-option-defaults")||{}).display})}}),i.TableAnimationUtils=function(e){this.component=e,this.options=e.options,this.Init()},i.Object.createSubclass(i.TableAnimationUtils,i.Object,"oj.TableAnimationUtils"),i.TableAnimationUtils.prototype.Init=function(){i.TableAnimationUtils.superclass.Init.call(this)},i.TableAnimationUtils.prototype.animateTableBodyRow=function(e,t){if(this._isAnimationDisabled(t))return Promise.resolve(!1);var i=this;return new Promise(function(n,o){i._startAnimation(e,t).then(function(){n(!0)})})},i.TableAnimationUtils.prototype.animateTableBodyRows=function(e,t){if(this._isAnimationDisabled(t))return Promise.resolve(!1);var i,n,o=this,s=[];for(i=0;i<e.length;i++)n=e[i],s.push(function(e){return o.animateTableBodyRow(e,t)}(n));return s.length>0?Promise.all(s):Promise.resolve(!1)},i.TableAnimationUtils.prototype._getAnimationEffect=function(e){var t;return null==this.defaultAnimations&&(t=i.ThemeUtils.parseJSONFromFontFamily("oj-table-option-defaults"),this.defaultAnimations=t.animation||{}),this.defaultAnimations[e]},i.TableAnimationUtils.prototype._isAnimationDisabled=function(e){var t=this._getAnimationEffect(e);return null==t||0==t.length},i.TableAnimationUtils.prototype._startAnimation=function(e,t,n){return null==n&&(n=this._getAnimationEffect(t)),i.AnimationUtils.startAnimation(e,t,n,this.component)},i.TableDndContext=function(e){this.component=e,this.options=e.options,this.Init()},i.Object.createSubclass(i.TableDndContext,i.Object,"oj.TableDndContext"),i.TableDndContext.prototype.Init=function(){i.TableDndContext.superclass.Init.call(this)},i.TableDndContext.prototype._addDragMarkerClass=function(e){this._getTableDomUtils().getTableHeaderColumn(e).classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._DRAG),this._getTableDomUtils().setTableColumnCellsClass(e,!0,i.TableDomUtils.MARKER_STYLE_CLASSES._DRAG)},i.TableDndContext.prototype._removeDragMarkerClass=function(){var e=this._getTableDomUtils().getTableHeader().querySelectorAll("."+i.TableDomUtils.MARKER_STYLE_CLASSES._DRAG);if(null!=e&&e.length>0){var t,n=e.length;for(t=0;t<n;t++)e[t].classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._DRAG)}this._getTableDomUtils().setTableColumnCellsClass(null,!1,i.TableDomUtils.MARKER_STYLE_CLASSES._DRAG)},i.TableDndContext.prototype._cloneTableContainer=function(e){var t,n=e.querySelectorAll(i.TableDomUtils.DOM_ELEMENT._TBODY)[0],o=$(n).scrollLeft(),s=$(n).scrollTop(),r=(t=e.cloneNode(!0)).querySelectorAll(i.TableDomUtils.DOM_ELEMENT._TBODY)[0];return r.style[i.TableDomUtils.CSS_PROP._OVERFLOW]=i.TableDomUtils.CSS_VAL._HIDDEN,r.style[i.TableDomUtils.CSS_PROP._OVERFLOW_X]=i.TableDomUtils.CSS_VAL._HIDDEN,r.style[i.TableDomUtils.CSS_PROP._OVERFLOW_Y]=i.TableDomUtils.CSS_VAL._HIDDEN,r.style[i.TableDomUtils.CSS_PROP._BACKGROUND_COLOR]=i.TableDomUtils.CSS_VAL._TRANSPARENT,r.style[i.TableDomUtils.CSS_PROP._WIDTH]=$(n).width()+i.TableDomUtils.CSS_VAL._PX,r.style[i.TableDomUtils.CSS_PROP._HEIGHT]=$(n).height()+i.TableDomUtils.CSS_VAL._PX,t.style[i.TableDomUtils.CSS_PROP._POSITION]=i.TableDomUtils.CSS_VAL._ABSOLUTE,t.style[i.TableDomUtils.CSS_PROP._TOP]=-1e4+i.TableDomUtils.CSS_VAL._PX,$(r).scrollLeft(1*o),$(r).scrollTop(1*s),document.body.appendChild(t),t},i.TableDndContext.prototype._destroyDragImage=function(){this._dragImage&&($(this._dragImage).remove(),this._dragImage=null)},i.TableDndContext.prototype._getEventColumnIndex=function(e){return this._getTableDomUtils().getElementColumnIdx(e.currentTarget)},i.TableDndContext.prototype._getOverRowIndex=function(e){var t,n=$(e.target).closest(i.TableDomUtils.DOM_ELEMENT._TR),o=this.component.getContextByNode(e.target);if(o&&"oj-table-cell"==o.subId)t=o.rowIndex;else if(n&&n.hasClass(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_DRAG_INDICATOR_BEFORE_CLASS))t=this._dropRowIndex;else{var s=this._getTableDomUtils().getTableBodyRows();t=s?s.length:0}return t},i.TableDndContext.prototype._getTableDomUtils=function(){return this.component._getTableDomUtils()},i.TableDndContext.prototype.handleColumnDragStart=function(e){if(this._isColumnReorderEnabled()){var t=this._getEventColumnIndex(e);return this._dragStartColumnIdx=t,this._setReorderColumnsDataTransfer(e,t),this.component._setSelection(null),this.component.option("selection",null,{_context:{writeback:!0,internalSet:!0}}),setTimeout(function(){window.getSelection().removeAllRanges()},0),this._addDragMarkerClass(t),!0}},i.TableDndContext.prototype.handleColumnDragEnd=function(e){this._isColumnReorderEnabled()&&(this.setTableHeaderColumnDraggable(null,!1),this._dragStartColumnIdx=null,this._getTableDomUtils().removeDragOverIndicatorColumn(),this._getTableDomUtils().removeTableHeaderColumnDragImage(),this._removeDragMarkerClass())},i.TableDndContext.prototype.handleColumnDragEnter=function(e){if(!this._isColumnReordering()){var t=this._getEventColumnIndex(e);return this._invokeDropCallback("columns","dragEnter",e,{columnIndex:t})}},i.TableDndContext.prototype.handleColumnReorderDragOver=function(e){var t=this._getEventColumnIndex(e),i=this._dragStartColumnIdx;null!=i&&i!=t&&(this._currentDropColumnBefore=this._isDragOverBeforeColumn(e),this._currentDropColumnBefore&&i==t-1||!this._currentDropColumnBefore&&i==t+1||this._getTableDomUtils().displayDragOverIndicatorColumn(t,this._currentDropColumnBefore),e.preventDefault())},i.TableDndContext.prototype.handleColumnDragOver=function(e){if(this._isColumnReordering())return this.handleColumnReorderDragOver(e);var t=this._getEventColumnIndex(e);this._currentDropColumnBefore=this._isDragOverBeforeColumn(e);var i=this._invokeDropCallback("columns","dragOver",e,{columnIndex:t});return(!1===i||e.isDefaultPrevented())&&this._getTableDomUtils().displayDragOverIndicatorColumn(t,this._isDragOverBeforeColumn(e)),i},i.TableDndContext.prototype.handleColumnDragLeave=function(e){if(!this._isColumnReordering()){this._getTableDomUtils().removeDragOverIndicatorColumn();var t=this._getEventColumnIndex(e);return this._invokeDndCallback("drop","columns","dragLeave",e,{columnIndex:t})}},i.TableDndContext.prototype.handleColumnReorderDrop=function(e){var t=this._getEventColumnIndex(e);this._currentDropColumnBefore||t++,this.component._columnsDestMap=this._getTableDomUtils().moveTableHeaderColumn(this._dragStartColumnIdx,t,e),e.preventDefault()},i.TableDndContext.prototype.handleColumnDrop=function(e){if(this._isColumnReordering())return this.handleColumnReorderDrop(e);this._getTableDomUtils().removeDragOverIndicatorColumn();var t=this._getEventColumnIndex(e);return this._currentDropColumnBefore||t++,this._invokeDropCallback("columns","drop",e,{columnIndex:t})},i.TableDndContext.prototype.handleRowDragStart=function(e){var t=this.options.dnd.drag;if(t&&t.rows){var i=this._setDragRowsDataTransfer(e,t.rows.dataTypes,this.component._getSelectedRowIdxs());return!!i&&this._invokeDndCallback("drag","rows","dragStart",e,i)}},i.TableDndContext.prototype.handleRowDrag=function(e){return this._invokeDndCallback("drag","rows","drag",e)},i.TableDndContext.prototype.handleRowDragEnd=function(e){return this._destroyDragImage(),this._invokeDndCallback("drag","rows","dragEnd",e)},i.TableDndContext.prototype.handleRowDragEnter=function(e){var t=this._getOverRowIndex(e),i=this._invokeDropCallback("rows","dragEnter",e,{rowIndex:t});return(!1===i||e.isDefaultPrevented())&&this._updateDragRowsState(e,t),i},i.TableDndContext.prototype.handleRowDragOver=function(e){return this._invokeDropCallback("rows","dragOver",e,{rowIndex:this._dropRowIndex})},i.TableDndContext.prototype.handleRowDragLeave=function(e){var t=this._invokeDndCallback("drop","rows","dragLeave",e,{rowIndex:this._dropRowIndex});return this._isDndEventInElement(e,e.currentTarget)||(this._getTableDomUtils().removeDragOverIndicatorRow(),this._dropRowIndex=null),t},i.TableDndContext.prototype.handleRowDrop=function(e){var t=this._dropRowIndex;return this._getTableDomUtils().removeDragOverIndicatorRow(),this._dropRowIndex=null,this._invokeDropCallback("rows","drop",e,{rowIndex:t})},i.TableDndContext.prototype._hideUnselectedRows=function(e,t){for(var n,o=null,s=(n=e.querySelectorAll("."+i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS)).length-1;s>=0;s--)-1==t.indexOf(s)?n[s].style[i.TableDomUtils.CSS_PROP._VISIBILITY]=i.TableDomUtils.CSS_VAL._HIDDEN:o=s;var r=e.querySelectorAll(i.TableDomUtils.DOM_ELEMENT._THEAD);null!=r&&r.length>0&&(r[0].style[i.TableDomUtils.CSS_PROP._VISIBILITY]=i.TableDomUtils.CSS_VAL._HIDDEN);var a=e.querySelectorAll(i.TableDomUtils.DOM_ELEMENT._TFOOT);return null!=a&&a.length>0&&(a[0].style[i.TableDomUtils.CSS_PROP._VISIBILITY]=i.TableDomUtils.CSS_VAL._HIDDEN),o},i.TableDndContext.prototype._invokeDndCallback=function(e,t,n,o,s){var r,a=this.options.dnd[e];if(a&&a[t]){var l=a[t][n];if(l&&"function"==typeof l)try{this.component._IsCustomElement()?l(o.originalEvent,s):(o.dataTransfer=o.originalEvent.dataTransfer,r=l(o,s))}catch(e){i.Logger.error("Error: "+e)}}return r},i.TableDndContext.prototype._invokeDropCallback=function(e,t,i,n){var o=this._invokeDndCallback("drop",e,t,i,n);return void 0===o&&this._matchDragDataType(i,e)&&i.preventDefault(),o},i.TableDndContext.prototype._isColumnReorderEnabled=function(){var e=this.options.dnd;return!(!e||!e.reorder||e.reorder.columns!=this.component._OPTION_ENABLED)},i.TableDndContext.prototype._isColumnReordering=function(){return null!=this._dragStartColumnIdx},i.TableDndContext.prototype._isDndEventInElement=function(e,t){var i=t.getBoundingClientRect(),n=e.originalEvent;return n.clientX>=Math.ceil(i.left)&&n.clientX<Math.floor(i.right)&&n.clientY>=Math.ceil(i.top)&&n.clientY<Math.floor(i.bottom)},i.TableDndContext.prototype._isDragOverBeforeColumn=function(e){var t=e.currentTarget.getBoundingClientRect();if(null!=e.originalEvent.clientX){var n=t.right-e.originalEvent.clientX<(t.right-t.left)/2;return"rtl"===i.DomUtils.getReadingDirection()?n:!n}return!1},i.TableDndContext.prototype._matchDragDataType=function(e,t){var i=e.originalEvent.dataTransfer.types,n=this.options.dnd.drop;if(n&&n[t]&&n[t].dataTypes)for(var o=n[t].dataTypes,s="string"==typeof o?[o]:o,r=0;r<i.length;r++)if(s.indexOf(i[r])>=0)return!0;return!1},i.TableDndContext.prototype._setHeaderColumnDraggable=function(e,t){e.draggable=t,t&&(e.style[i.TableDomUtils.CSS_PROP._CURSOR]=i.TableDomUtils.CSS_VAL._MOVE,e.classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._DRAGGABLE))},i.TableDndContext.prototype._clearHeaderColumnDraggable=function(e){e.draggable="",e.style[i.TableDomUtils.CSS_PROP._CURSOR]=i.TableDomUtils.CSS_VAL._AUTO,e.classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._DRAGGABLE)},i.TableDndContext.prototype._setDragRowsData=function(e,t,i){if(t){var n=e.dataTransfer,o=JSON.stringify(i);if("string"==typeof t)n.setData(t,o);else for(var s=0;s<t.length;s++)n.setData(t[s],o)}},i.TableDndContext.prototype._setDragRowsDataTransfer=function(e,t,n){for(var o=[],s=0;s<n.length;s++){var r=this.component.getDataForVisibleRow(n[s]);r&&o.push(r)}return o.length?(this._setDragRowsData(e.originalEvent,t,o),this._dragImage=this._setDragRowsImage(e.originalEvent,$(e.currentTarget).closest(i.TableDomUtils.DOM_ELEMENT._TABLE).parent()[0],n),{rows:o}):null},i.TableDndContext.prototype._setDragRowsImage=function(e,t,n){var o=this._cloneTableContainer(t);this._hideUnselectedRows(o,n);var s=t.getBoundingClientRect(),r=t.querySelectorAll(i.TableDomUtils.DOM_ELEMENT._TBODY)[0],a=$(r).scrollLeft(),l=$(r).scrollTop(),u=e.clientX-s.left+a,h=e.clientY-s.top+l;return e.dataTransfer.setDragImage(o,u,h),o},i.TableDndContext.prototype._setReorderColumnsDataTransfer=function(e,t){var i=e.originalEvent.dataTransfer,n=this._getTableDomUtils().hashCode(this._getTableDomUtils().getTableUID());i.setData("Text",this.component._DND_REORDER_TABLE_ID_DATA_KEY+":"+n+":"+t);var o=this._getTableDomUtils().createTableHeaderColumnDragImage(t);try{i.setDragImage(o,0,0)}catch(e){}},i.TableDndContext.prototype.setTableHeaderColumnDraggable=function(e,t){if(this._isColumnReorderEnabled()){var i,n=this._getTableDomUtils().getTableHeaderColumns();if(null!=n&&n.length>0)for(i=0;i<n.length;i++){var o=n[i];null!=e&&i==e?this._setHeaderColumnDraggable(o,t):this._clearHeaderColumnDraggable(o)}}},i.TableDndContext.prototype._updateDragRowsState=function(e,t){if(this._dropRowIndex!=t){var n=$(e.target).closest(i.TableDomUtils.DOM_ELEMENT._TR)[0];this._dropRowIndex=t,this._getTableDomUtils().displayDragOverIndicatorRow(this._dropRowIndex,!0,n)}},i.TableDomUtils=function(e){this.component=e,this.options=e.options,this.element=e.element[0],this.OuterWrapper=e.OuterWrapper,this.Init()},i.Object.createSubclass(i.TableDomUtils,i.Object,"oj.TableDomUtils"),i.TableDomUtils.prototype.Init=function(){i.TableDomUtils.superclass.Init.call(this)},i.TableDomUtils.prototype.clearCachedDom=function(){this.clearCachedDomRowData(),this._clearCachedDom(null),this._tableDimensions=null},i.TableDomUtils.prototype.clearCachedDomRowData=function(){this._cachedDomTableBodyRows=null},i.TableDomUtils.prototype.createAccLabelSpan=function(e,t){var n=document.createElement("span");return null!=t&&n.classList.add(t),n.classList.add(i.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),n.appendChild(document.createTextNode(e)),n},i.TableDomUtils.prototype.createContextMenu=function(e){var t=this.component._GetContextMenu(),n=!!this.component._isTouchDevice()&&this.component._getRowSelectionMode()==this.component._OPTION_SELECTION_MODES._MULTIPLE;if(t){var o=t.querySelectorAll("[data-oj-command]");if(null!=o&&o.length>0){var s,r,a;for(r=0;r<o.length;r++)"OJ-OPTION"!==o[r].tagName&&0!==o[r].getElementsByTagName(i.TableDomUtils.DOM_ELEMENT._A).length||(s=o[r].getAttribute("data-oj-command").split("-"),a=this.createContextMenuItem(s[s.length-1],this.component._IsCustomElement()),"OJ-OPTION"===o[r].tagName?o[r].innerHTML=a.innerHTML:$(o[r]).replaceWith(a));this._menuContainer=t,$(t).data("oj-ojMenu")&&(this.component._IsCustomElement()?t.refresh():$(t).ojMenu("refresh")),this.component._IsCustomElement()?t.addEventListener("ojAction",e):$(t).on("ojselect",e)}}else if(this.component._isTableSortable()||n||this.component._isTableColumnsResizable()){if((t=document.createElement(i.TableDomUtils.DOM_ELEMENT._UL)).style[i.TableDomUtils.CSS_PROP._DISPLAY]=i.TableDomUtils.CSS_VAL._NONE,t.setAttribute(i.TableDomUtils.DOM_ATTR._ID,this.getTableId()+"_contextmenu"),this.getTableContainer().appendChild(t),this.component._isTableSortable()){var l=this.createContextMenuItem("sort");t.appendChild(l)}if(n){var u=this.createContextMenuItem("enableNonContiguousSelection");t.appendChild(u)}if(this.component._isTableColumnsResizable()){var h=this.createContextMenuItem("resize");t.appendChild(h)}$(t).ojMenu(),this._menuContainer=t,$(t).on("ojselect",e);this.options.contextMenu;this.component.option("contextMenu","#"+t.getAttribute(i.TableDomUtils.DOM_ATTR._ID),{_context:{internalSet:!0}}),this.component._defaultContextMenu=t}return t},i.TableDomUtils.prototype.createContextMenuItem=function(e,t){if("sort"===e){var n=this.createContextMenuListItem(e,t),o=document.createElement(i.TableDomUtils.DOM_ELEMENT._UL);return n.appendChild(o),o.appendChild(this.createContextMenuListItem("sortAsc",t)),o.appendChild(this.createContextMenuListItem("sortDsc",t)),n}return"sortAsc"===e?this.createContextMenuListItem(e,t):"sortDsc"===e?this.createContextMenuListItem(e,t):"enableNonContiguousSelection"==e?this.createContextMenuListItem(e,t):"disableNonContiguousSelection"==e?this.createContextMenuListItem(e,t):"resize"===e?(this.createContextMenuResizePopup(0),this.createContextMenuListItem(e)):null},i.TableDomUtils.prototype.createContextMenuListItem=function(e,t){var i=document.createElement(t?"oj-option":"li");return i.setAttribute("data-oj-command","oj-table-"+e),i.appendChild(this.createContextMenuLabel(e,t)),i},i.TableDomUtils.prototype.createContextMenuLabel=function(e,t){var n=null;"sort"==e?n=this.component.getTranslatedString("labelSort"):"sortAsc"==e?n=this.component.getTranslatedString("labelSortAsc"):"sortDsc"==e?n=this.component.getTranslatedString("labelSortDsc"):"enableNonContiguousSelection"==e?n=this.component.getTranslatedString("labelEnableNonContiguousSelection"):"disableNonContiguousSelection"==e?n=this.component.getTranslatedString("labelDisableNonContiguousSelection"):"resize"==e&&(n=this.component.getTranslatedString("labelResize"));var o=document.createTextNode(n);if(t)return o;var s=document.createElement(i.TableDomUtils.DOM_ELEMENT._A);return s.setAttribute(i.TableDomUtils.DOM_ATTR._HREF,"#"),s.appendChild(o),s},i.TableDomUtils.prototype.createContextMenuResizePopup=function(e){e=Math.round(e);var t=this.getContextMenuResizePopup();if(null==t){var n=this.getTableContainer();(t=document.createElement(i.TableDomUtils.DOM_ELEMENT._DIV)).setAttribute("id",this.getTableId()+"_resize_popup"),t.setAttribute("data-oj-context",""),n.appendChild(t);var o=document.createElement(i.TableDomUtils.DOM_ELEMENT._DIV),s=document.createElement(i.TableDomUtils.DOM_ELEMENT._DIV);t.appendChild(o),t.appendChild(s),(l=document.createElement(i.TableDomUtils.DOM_ELEMENT._INPUT)).setAttribute("id",this.getTableId()+"_resize_popup_spinner");var r=document.createElement(i.TableDomUtils.DOM_ELEMENT._LABEL);r.setAttribute("for",this.getTableId()+"_resize_popup_spinner"),r.textContent=this.component.getTranslatedString("labelResizePopupSpinner");var a=document.createElement(i.TableDomUtils.DOM_ELEMENT._BUTTON);a.setAttribute("id",this.getTableId()+"_resize_popup_popupsubmit"),o.appendChild(r),o.appendChild(l),s.appendChild(a),$(a).ojButton({component:"ojButton",label:this.component.getTranslatedString("labelResizePopupSubmit")}),$(a).on("click",this.component._handleContextMenuResizePopup.bind(this.component)),$(l).ojInputNumber({component:"ojInputNumber",max:1e4,min:10,step:1,value:e,validators:[{type:"regExp",options:{pattern:"^[1-9][0-9]*$",messageDetail:this.component.getTranslatedString("msgColumnResizeWidthValidation")}}]}),$(t).ojPopup({modality:"modal",position:{my:"start top",at:"start bottom",collision:"flipfit"}}),this._cacheDomElement(this.getTableId()+"_resize_popup",t)}else{var l=document.getElementById(this.getTableId()+"_resize_popup_spinner");$(l).ojInputNumber("option","value",e)}return t},i.TableDomUtils.prototype.createInitialTable=function(e,t){var i=this.getTable();return this.createTableContainer(),e||this.createTableHeader(),t||this.createTableFooter(),this.createTableBody(),this.createTableStatusMessage(),this.createTableInlineMessage(),this.createTableStatusAccNotification(),i},i.TableDomUtils.prototype.createTableBody=function(){var e=this.getTable(),t=document.createElement(i.TableDomUtils.DOM_ELEMENT._TBODY);return e.appendChild(t),this._cacheDomElement(i.TableDomUtils.CSS_CLASSES._TABLE_BODY_CLASS,t),t},i.TableDomUtils.prototype.createTableBodyCell=function(e,t){return document.createElement(i.TableDomUtils.DOM_ELEMENT._TD)},i.TableDomUtils.prototype.createTableBodyCellAccSelect=function(e,t,n,o,s){var r=null;if(s||(r=this.getTableBodyCellAccSelect(o)),null!=r)return r;var a=null!=t?t.toString():e.toString(),l=null==n?this.hashCode(a):n;if((r=document.createElement(i.TableDomUtils.DOM_ELEMENT._TD)).classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_ACC_SELECT_CLASS),r.style.padding="0",r.style.border="0",!this.component._isTableHeaderless()){var u=this.options.accessibility,h=null;h=null!=u&&null!=u.rowHeader?u.rowHeader:this.component._getColumnDefs()[0].id;var d=this.getTableId()+":"+h+"_"+l;r.setAttribute(i.TableDomUtils.DOM_ATTR._HEADERS,this.getTableId()+":"+i.TableDomUtils._COLUMN_HEADER_ROW_SELECT_ID+" "+d)}var c=document.createElement(i.TableDomUtils.DOM_ELEMENT._INPUT);c.setAttribute(i.TableDomUtils.DOM_ATTR._ID,this.getTableId()+":acc_sel_row_"+l),c.setAttribute(i.TableDomUtils.DOM_ATTR._TYPE,"checkbox"),c.setAttribute(i.TableDomUtils.DOM_ATTR._TABINDEX,"-1");var p=null,_=this.options.editMode,m=null!=this.component._getRowSelectionMode();return p=_==this.component._OPTION_EDIT_MODE._ROW_EDIT?m?this.component.getTranslatedString(this.component._BUNDLE_KEY._LABEL_SELECT_AND_EDIT_ROW):this.component.getTranslatedString(this.component._BUNDLE_KEY._LABEL_EDIT_ROW):this.component.getTranslatedString(this.component._BUNDLE_KEY._LABEL_SELECT_ROW),c.setAttribute(i.TableDomUtils.DOM_ATTR._TITLE,p),c.classList.add(i.TableDomUtils.CSS_CLASSES._CHECKBOX_ACC_SELECT_ROW_CLASS),c.classList.add(i.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),this.component._getEditableRowIdx()==e?c.checked=!0:c.checked=!1,r.appendChild(c),o.insertBefore(r,o.firstChild),r},i.TableDomUtils.prototype.createTableBodyMessageCell=function(e,t,n){var o=document.createElement(i.TableDomUtils.DOM_ELEMENT._TD);return o.setAttribute(i.TableDomUtils.DOM_ATTR._COLSPAN,t+1),o.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_BODY_MESSAGE_CLASS),o.appendChild(document.createTextNode(n)),e.appendChild(o),o},i.TableDomUtils.prototype.createTableBodyMessageRow=function(e,t){var n=this.getTableBody(),o=document.createElement(i.TableDomUtils.DOM_ELEMENT._TR);return o.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_BODY_MESSAGE_ROW_CLASS),this.createTableBodyMessageCell(o,e,t),n.appendChild(o),o},i.TableDomUtils.prototype.createTableBodyRow=function(e,t){var n=document.createElement(i.TableDomUtils.DOM_ELEMENT._TR);return this.createTableBodyCellAccSelect(e,t,null,n,!0),n},i.TableDomUtils.prototype.createTableBodyRowTouchSelectionAffordance=function(e){var t=document.createElement(i.TableDomUtils.DOM_ELEMENT._DIV);t.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOP_CLASS),t.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOUCH_AREA_CLASS),$(t).data("rowIdx",e);var n=document.createElement(i.TableDomUtils.DOM_ELEMENT._DIV);n.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOP_ICON_CLASS),n.setAttribute(i.TableDomUtils.DOM_ATTR._ROLE,"button"),n.setAttribute(i.TableDomUtils.DOM_ATTR._ARIA_LABEL,this.component.getTranslatedString("labelAccSelectionAffordanceTop")),$(n).data("rowIdx",e),t.appendChild(n);var o=document.createElement(i.TableDomUtils.DOM_ELEMENT._DIV);o.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_BOTTOM_CLASS),o.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOUCH_AREA_CLASS),$(o).data("rowIdx",e);var s=document.createElement(i.TableDomUtils.DOM_ELEMENT._DIV);s.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_BOTTOM_ICON_CLASS),s.setAttribute(i.TableDomUtils.DOM_ATTR._ROLE,"button"),s.setAttribute(i.TableDomUtils.DOM_ATTR._ARIA_LABEL,this.component.getTranslatedString("labelAccSelectionAffordanceBottom")),$(s).data("rowIdx",e),o.appendChild(s);var r=this.getTableContainer();r.appendChild(t),r.appendChild(o),this.moveTableBodyRowTouchSelectionAffordanceTop(e),this.moveTableBodyRowTouchSelectionAffordanceBottom(e)},i.TableDomUtils.prototype.createTableBottomSlot=function(){var e=this.getTableContainer(),t=document.createElement(i.TableDomUtils.DOM_ELEMENT._DIV);return t.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_BOTTOM_SLOT_CLASS),e.appendChild(t),this._cacheDomElement(i.TableDomUtils.CSS_CLASSES._TABLE_BOTTOM_SLOT_CLASS,t),t},i.TableDomUtils.prototype.createTableContainer=function(){var e;this.options;return this.OuterWrapper?e=this.OuterWrapper:(e=document.createElement(i.TableDomUtils.DOM_ELEMENT._DIV),this.element.parentNode.replaceChild(e,this.element),e.insertBefore(this.element,e.firstChild)),this._cacheDomElement(i.TableDomUtils.CSS_CLASSES._TABLE_CONTAINER_CLASS,e),e},i.TableDomUtils.prototype.createTableFooter=function(){var e=this.getTable(),t=document.createElement(i.TableDomUtils.DOM_ELEMENT._TFOOT),n=document.createElement(i.TableDomUtils.DOM_ELEMENT._TR);this.createTableFooterAccSelect(n),t.appendChild(n);var o=this.getTableHeader();if(null!=o)o.parentNode.insertBefore(t,o.nextSibling);else{var s=this.getTableBody();null!=s?s.parentNode.insertBefore(t,s):e.appendChild(t)}return this._cacheDomElement(i.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CLASS,t),t},i.TableDomUtils.prototype.createTableFooterAccSelect=function(e){var t=e.getElementsByClassName(i.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS);return null!=t&&t.length>0?t[0]:((t=document.createElement(i.TableDomUtils.DOM_ELEMENT._TD)).classList.add(i.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),t.setAttribute(i.TableDomUtils.DOM_ATTR._TABINDEX,"-1"),e.insertBefore(t,e.firstChild),t)},i.TableDomUtils.prototype.createTableFooterCell=function(e){return document.createElement(i.TableDomUtils.DOM_ELEMENT._TD)},i.TableDomUtils.prototype.createTableHeader=function(){var e=this.getTable(),t=document.createElement(i.TableDomUtils.DOM_ELEMENT._THEAD),n=document.createElement(i.TableDomUtils.DOM_ELEMENT._TR);t.appendChild(n);var o=this.getTableFooter();if(null!=o)o.parentNode.insertBefore(t,o);else{var s=this.getTableBody();null!=s?s.parentNode.insertBefore(t,s):e.appendChild(t)}return this._cacheDomElement(i.TableDomUtils.CSS_CLASSES._TABLE_HEADER_ROW_CLASS,n),this._cacheDomElement(i.TableDomUtils.CSS_CLASSES._TABLE_HEADER_CLASS,t),t},i.TableDomUtils.prototype.createTableHeaderAccSelectRowColumn=function(){var e,t=document.createElement(i.TableDomUtils.DOM_ELEMENT._TH);t.classList.add(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ACC_SELECT_ROW_CLASS),t.setAttribute(i.TableDomUtils.DOM_ATTR._ID,this.getTableId()+":"+i.TableDomUtils._COLUMN_HEADER_ROW_SELECT_ID);var n=this.options.editMode,o=null!=this.component._getRowSelectionMode();e=n==this.component._OPTION_EDIT_MODE._ROW_EDIT?o?this.component.getTranslatedString(this.component._BUNDLE_KEY._LABEL_SELECT_AND_EDIT_ROW):this.component.getTranslatedString(this.component._BUNDLE_KEY._LABEL_EDIT_ROW):this.component.getTranslatedString(this.component._BUNDLE_KEY._LABEL_SELECT_ROW),t.setAttribute(i.TableDomUtils.DOM_ATTR._TITLE,e),t.style.padding="0",t.style.border="0";var s=document.createElement(i.TableDomUtils.DOM_ELEMENT._SPAN);return s.appendChild(document.createTextNode(e)),s.classList.add(i.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),t.appendChild(s),t},i.TableDomUtils.prototype.createTableHeaderColumn=function(e,t){var n=this.component._getColumnDefs()[e],o=document.createElement(i.TableDomUtils.DOM_ELEMENT._TH);this.styleTableHeaderColumn(e,o,t,!0),o.setAttribute("abbr",n.headerText),o.setAttribute(i.TableDomUtils.DOM_ATTR._TITLE,n.headerText),this.insertTableHeaderColumn(e,o);var s={columnIndex:e,headerContext:{component:this.component,parentElement:o}};return n.resizable==i.TableDomUtils._OPTION_ENABLED&&o.setAttribute("data-oj-resizable",i.TableDomUtils._OPTION_ENABLED),n.sortable==i.TableDomUtils._OPTION_ENABLED?(o.setAttribute("data-oj-sortable",i.TableDomUtils._OPTION_ENABLED),i.TableRendererUtils.columnHeaderSortableIconRenderer(this.component,s,null,null)):i.TableRendererUtils.columnHeaderDefaultRenderer(this.component,s,null,null),o},i.TableDomUtils.prototype.createTableHeaderColumnDragImage=function(e){var t=this.getTableHeaderColumn(e).cloneNode(!0);return t.classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._DRAG),t.classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._FOCUS),t.classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._FOCUS_HIGHLIGHT),t.classList.remove(i.TableDomUtils.MARKER_STYLE_CLASSES._HOVER),t.classList.add(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_IMAGE),t.style[i.TableDomUtils.CSS_PROP._POSITION]=i.TableDomUtils.CSS_VAL._ABSOLUTE,t.style[i.TableDomUtils.CSS_PROP._TOP]="0",t.style[i.TableDomUtils.CSS_PROP._LEFT]="-999em",t.style[i.TableDomUtils.CSS_PROP._ZINDEX]="-999",document.body.appendChild(t),t},i.TableDomUtils.prototype.createTableHeaderColumnAccSelect=function(e,t){if(t!=i.TableDomUtils._OPTION_SELECTION_MODES._SINGLE&&t!=i.TableDomUtils._OPTION_SELECTION_MODES._MULTIPLE)return null;var n=this.getTableHeaderColumn(e),o=this.getTableHeaderColumnAccSelect(e);if(null!=o)return o;(o=document.createElement(i.TableDomUtils.DOM_ELEMENT._DIV)).classList.add(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ACC_SELECT_COLUMN_CLASS),o.classList.add(i.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS);var s=document.createElement(i.TableDomUtils.DOM_ELEMENT._INPUT);s.setAttribute(i.TableDomUtils.DOM_ATTR._ID,this.getTableId()+":acc_sel_col"+e),s.setAttribute(i.TableDomUtils.DOM_ATTR._TYPE,"checkbox"),s.setAttribute(i.TableDomUtils.DOM_ATTR._TABINDEX,"-1");var r=this.component.getTranslatedString(this.component._BUNDLE_KEY._LABEL_SELECT_COLUMN);return s.setAttribute(i.TableDomUtils.DOM_ATTR._TITLE,r),s.classList.add(i.TableDomUtils.CSS_CLASSES._CHECKBOX_ACC_SELECT_COLUMN_CLASS),o.appendChild(s),n.insertBefore(o,n.firstChild),o},i.TableDomUtils.prototype.createTableHeaderColumnResizeIndicator=function(){var e=this.getTableHeaderColumnResizeIndicator();if(!e){var t=this.getTableContainer();e=document.createElement(i.TableDomUtils.DOM_ELEMENT._DIV),t.appendChild(e),e.classList.add(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_RESIZE_INDICATOR_CLASS),this._cacheDomElement(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_RESIZE_INDICATOR_CLASS,e)}return e},i.TableDomUtils.prototype.createTableInlineMessage=function(){var e=this.getTableContainer(),t=document.createElement(i.TableDomUtils.DOM_ELEMENT._DIV);return t.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_INLINE_MESSAGE_CLASS),t.style[i.TableDomUtils.CSS_PROP._DISPLAY]=i.TableDomUtils.CSS_VAL._NONE,e.appendChild(t),this._cacheDomElement(i.TableDomUtils.CSS_CLASSES._TABLE_INLINE_MESSAGE_CLASS,t),t},i.TableDomUtils.prototype.createTableStatusAccNotification=function(){var e=this.getTableContainer(),t=document.createElement(i.TableDomUtils.DOM_ELEMENT._DIV);return t.setAttribute(i.TableDomUtils.DOM_ATTR._ROLE,"status"),t.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_STATUS_ACC_NOTIFICATION_CLASS),t.classList.add(i.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),e.appendChild(t),this._cacheDomElement(i.TableDomUtils.CSS_CLASSES._TABLE_STATUS_ACC_NOTIFICATION_CLASS,t),t},i.TableDomUtils.prototype.createTableStatusMessage=function(){var e=this.getTableContainer(),t=document.createElement(i.TableDomUtils.DOM_ELEMENT._DIV);t.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_STATUS_MESSAGE_CLASS),t.style[i.TableDomUtils.CSS_PROP._DISPLAY]=i.TableDomUtils.CSS_VAL._NONE;var n=document.createElement(i.TableDomUtils.DOM_ELEMENT._DIV);return n.classList.add(i.TableDomUtils.CSS_CLASSES._ICON_CLASS),n.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_LOADING_ICON_CLASS),n.setAttribute("aria-label",this.component.getTranslatedString(this.component._BUNDLE_KEY._MSG_FETCHING_DATA)),t.appendChild(n),e.appendChild(t),this._cacheDomElement(i.TableDomUtils.CSS_CLASSES._TABLE_STATUS_MESSAGE_CLASS,t),t},i.TableDomUtils.prototype.displayDragOverIndicatorColumn=function(e,t){this.removeDragOverIndicatorColumn();var n=this.getTableHeaderRow(),o=this.getTableHeaderColumn(e);if(null!=o)t?o.classList.add(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_BEFORE_CLASS):o.classList.add(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_AFTER_CLASS);else{var s=this.component._getColumnDefs();null!=s&&0!=s.length||(t?n.classList.add(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_BEFORE_CLASS):n.classList.add(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_AFTER_CLASS))}},i.TableDomUtils.prototype.displayDragOverIndicatorRow=function(e,t,n){this.removeDragOverIndicatorRow();var o=document.createElement(i.TableDomUtils.DOM_ELEMENT._TR);t?o.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_DRAG_INDICATOR_BEFORE_CLASS):o.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_DRAG_INDICATOR_AFTER_CLASS),n&&$(o).height(parseInt($(n).height(),10));var s=document.createElement(i.TableDomUtils.DOM_ELEMENT._TD),r=this.component._getColumnDefs();s.setAttribute(i.TableDomUtils.DOM_ATTR._COLSPAN,r.length+1),o.appendChild(s);var a=this.getTableBodyRow(e);if(null!=a)t?a.parentNode.insertBefore(o,a):a.parentNode.insertBefore(o,a.nextSibling);else{var l=this.getTableBodyRows();null!=l&&0!=l.length||this.component._hideNoDataMessage(),this.getTableBody().appendChild(o)}},i.TableDomUtils.prototype.getContextMenu=function(){return this._menuContainer},i.TableDomUtils.prototype.getContextMenuResizePopup=function(){var e=this.getTableId()+"_resize_popup";if(!this._isCachedDomElement(e)){var t=document.getElementById(e);this._cacheDomElement(e,t)}return this._getCachedDomElement(e)},i.TableDomUtils.prototype.getElementColumnIdx=function(e){var t=this.getFirstAncestor(e,i.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_CLASS);if(null!=t)return $(t.parentNode).children("."+i.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_CLASS).index(t);var n=this.getFirstAncestor(e,i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS);if(null!=n)return $(n.parentNode).children("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS).index(n);var o=this.getFirstAncestor(e,i.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS);return null!=o?$(o.parentNode).children("."+i.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS).index(o):null},i.TableDomUtils.prototype.getElementRowIdx=function(e){var t=this.getFirstAncestor(e,i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS);if(null!=t){var n=this.getTableBodyRows();return $(n).index(t)}return null},i.TableDomUtils.prototype.getFirstAncestor=function(e,t){var i;return null==e?null:e.classList.contains(t)?e:0!=(i=$(e).parents("."+t)).length?i[0]:null},i.TableDomUtils.prototype.getScrollbarHeight=function(){var e=this.getScroller();return e.clientHeight>0?e.offsetHeight-e.clientHeight:0},i.TableDomUtils.prototype.getScrollbarWidth=function(){var e=this.getScroller();return e.clientWidth>0?e.offsetWidth-e.clientWidth:0},i.TableDomUtils.prototype.getScroller=function(){return this.getTableBody()},i.TableDomUtils.prototype.getScrollLeft=function(e){var t=e.scrollLeft;"rtl"===this.component._GetReadingDirection()&&(t=Math.abs(t),this._isWebkit()&&(t=e.scrollWidth-e.clientWidth-t));return t},i.TableDomUtils.prototype.getTable=function(){return this.element},i.TableDomUtils.prototype.getTableBody=function(){return this._getTableElementByClassName(i.TableDomUtils.CSS_CLASSES._TABLE_BODY_CLASS,!0)},i.TableDomUtils.prototype.getTableBodyCell=function(e,t,i){var n=this.getTableBodyCells(e,i);return n&&n.length>t?n[t]:null},i.TableDomUtils.prototype.getTableBodyCellAccSelect=function(e){if(null!=e){var t=e.getElementsByClassName(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_ACC_SELECT_CLASS);if(null!=t&&t.length>0)return t[0]}return null},i.TableDomUtils.prototype.getTableBodyLogicalCells=function(e,t){var i=this.getTableBodyCells(e,t);return i?this._getColspanLogicalElements(i):null},i.TableDomUtils.prototype.getTableBodyCells=function(e,t){if(t||(t=this.getTableBodyRow(e)),!t)return null;var n=t.getElementsByClassName(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_CLASS);return null!=n&&n.length>0?n:null},i.TableDomUtils.prototype.getTableBodyMessageCell=function(){var e=this.getTableBody();if(e){var t=e.querySelectorAll("."+i.TableDomUtils.CSS_CLASSES._TABLE_BODY_MESSAGE_CLASS);if(t&&t.length>0)return t[0]}return null},i.TableDomUtils.prototype.getTableBodyMessageRow=function(){var e=this.getTableBody();if(e){var t=e.getElementsByClassName(i.TableDomUtils.CSS_CLASSES._TABLE_BODY_MESSAGE_ROW_CLASS);if(t&&t.length>0)return t[0]}return null},i.TableDomUtils.prototype.getTableBodyRow=function(e){var t=this.getTableBodyRows();return t?null==e?null:t.length>e?t[e]:null:null},i.TableDomUtils.prototype.getTableBodyRows=function(){if(!this._cachedDomTableBodyRows){var e=this.getTableBody();if(null!=e){var t=e.getElementsByClassName(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS);null!=t&&t.length>0&&(this._cachedDomTableBodyRows=t)}}return this._cachedDomTableBodyRows},i.TableDomUtils.prototype.getTableBodyRowTouchSelectionAffordanceTop=function(){var e=this.getTableContainer().getElementsByClassName(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOP_CLASS);return null!=e&&e.length>0?e=e[0]:null},i.TableDomUtils.prototype.getTableBodyRowTouchSelectionAffordanceBottom=function(){var e=this.getTableContainer().getElementsByClassName(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_BOTTOM_CLASS);return null!=e&&e.length>0?e=e[0]:null},i.TableDomUtils.prototype.getTableBottomSlot=function(){return this._getTableElementByClassName(i.TableDomUtils.CSS_CLASSES._TABLE_BOTTOM_SLOT_CLASS,!0)},i.TableDomUtils.prototype.getTableContainer=function(){return this._isCachedDomElement(i.TableDomUtils.CSS_CLASSES._TABLE_CONTAINER_CLASS)||this._cacheDomElement(i.TableDomUtils.CSS_CLASSES._TABLE_CONTAINER_CLASS,this.element.parentNode),this._getCachedDomElement(i.TableDomUtils.CSS_CLASSES._TABLE_CONTAINER_CLASS)},i.TableDomUtils.prototype.getTableFooter=function(){return this._getTableElementByClassName(i.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CLASS,!0)},i.TableDomUtils.prototype.getTableFooterCell=function(e){var t=this.getTableFooterCells();return null!=t&&t.length>e?t[e]:null},i.TableDomUtils.prototype.getTableFooterCells=function(){var e=this.getTableFooterRow(),t=null!=e?e.getElementsByClassName(i.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS):null;return null!=t&&t.length>0?t:null},i.TableDomUtils.prototype.getTableFooterLogicalCells=function(){var e=this.getTableFooterCells();return e?this._getColspanLogicalElements(e):null},i.TableDomUtils.prototype.getTableFooterRow=function(){return this._getTableElementByClassName(i.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_ROW_CLASS)},i.TableDomUtils.prototype.getTableHeader=function(){return this._getTableElementByClassName(i.TableDomUtils.CSS_CLASSES._TABLE_HEADER_CLASS,!0)},i.TableDomUtils.prototype.getTableHeaderColumn=function(e){var t=this.getTableHeaderColumns();return t&&t.length>e&&e>=0?t[e]:null},i.TableDomUtils.prototype.getTableHeaderColumnAccSelect=function(e){var t=this.getTableHeaderColumn(e);if(null!=t){var n=t.getElementsByClassName(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ACC_SELECT_COLUMN_CLASS);if(null!=n&&n.length>0)return n[0]}return null},i.TableDomUtils.prototype.getTableHeaderColumnResizeIndicator=function(){return this._getTableElementByClassName(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_RESIZE_INDICATOR_CLASS,!0)},i.TableDomUtils.prototype.getTableHeaderColumns=function(){var e=this.getTableHeaderRow();if(null!=e){var t=e.getElementsByClassName(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS);if(null!=t&&t.length>0)return t}return null},i.TableDomUtils.prototype.getTableHeaderLogicalColumns=function(){var e=this.getTableHeaderColumns();return e?this._getColspanLogicalElements(e):null},i.TableDomUtils.prototype.getTableHeaderRow=function(){return this._getTableElementByClassName(i.TableDomUtils.CSS_CLASSES._TABLE_HEADER_ROW_CLASS)},i.TableDomUtils.prototype.getTableId=function(){if(!this._tableId){var e=this.component._IsCustomElement()?this.getTableContainer():this.getTable();this._tableId=e.getAttribute(i.TableDomUtils.DOM_ATTR._ID)}return this._tableId},i.TableDomUtils.prototype.getTableInlineMessage=function(){return this._getTableElementByClassName(i.TableDomUtils.CSS_CLASSES._TABLE_INLINE_MESSAGE_CLASS,!0)},i.TableDomUtils.prototype.getTableStatusAccNotification=function(){return this._getTableElementByClassName(i.TableDomUtils.CSS_CLASSES._TABLE_STATUS_ACC_NOTIFICATION_CLASS,!0)},i.TableDomUtils.prototype.getTableStatusMessage=function(){return this._getTableElementByClassName(i.TableDomUtils.CSS_CLASSES._TABLE_STATUS_MESSAGE_CLASS,!0)},i.TableDomUtils.prototype.getTableUID=function(){if(!this._tableUID){var e=this.getTableId();null==e&&(e=(1e32*Math.random()).toString(36)),this._tableUID=e}return this._tableUID},i.TableDomUtils.prototype.hashCode=function(e){"string"!=$.type(e)&&(e=e.toString());var t=0;if(0==e.length)return t;var i,n=e.length;for(i=0;i<n;i++)t=(t<<5)-t+e.charCodeAt(i),t&=t;return t},i.TableDomUtils.prototype.insertTableBodyCell=function(e,t,n,o,s,r,a){if(this.setTableBodyCellAttributes(e,t,n,o,s),a)return r.appendChild(s),s;if(0==o){var l=r.getElementsByClassName(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_ACC_SELECT_CLASS);null!=l&&l.length>0?(l=l[0]).parentNode.insertBefore(s,l.nextSibling):r.insertBefore(s,r.firstChild)}else{var u=r.getElementsByClassName(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_CLASS);if(u.length>=o){var h=u[o-1];h.parentNode.insertBefore(s,h.nextSibling)}else r.appendChild(s)}return s},i.TableDomUtils.prototype.insertTableBodyRow=function(e,t,n,o){if(this.setTableBodyRowAttributes(n,t),null==o){var s=this.getTableBody(),r=s.getElementsByClassName(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS);if(0==e)s.insertBefore(t,s.firstChild);else if(r.length>=e){var a=r[e-1];a.parentNode.insertBefore(t,a.nextSibling)}else s.appendChild(t)}else o.appendChild(t);this.clearCachedDomRowData()},i.TableDomUtils.prototype.insertTableFooterCell=function(e,t){var n=this.getTableFooterRow(),o=n.getElementsByClassName(i.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS);if(0==e){var s=n.getElementsByClassName(i.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS);null!=s&&s.length>0?(s=s[0]).parentNode.insertBefore(t,s.nextSibling):n.insertBefore(t,n.firstChild)}else if(n.length>=e){var r=o[e-1];r.parentNode.insertBefore(t,r.nextSibling)}else n.appendChild(t);return t},i.TableDomUtils.prototype.insertTableHeaderColumn=function(e,t){var n=this.getTableHeaderRow(),o=this.getTableHeaderColumns();this.setTableHeaderColumnAttributes(e,t);var s=this.getTableHeaderColumn(e);if(s)$(s).replaceWith($(t));else if(0==e){var r=n.getElementsByClassName(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ACC_SELECT_ROW_CLASS);null!=r&&r.length>0?(r=r[0]).parentNode.insertBefore(t,r.nextSibling):n.insertBefore(t,n.firstChild)}else if(o&&o.length>=e){var a=o[e-1];a.parentNode.insertBefore(t,a.nextSibling)}else n.appendChild(t)},i.TableDomUtils.prototype.isTableContainerScrollable=function(){var e=this.getTableContainer(),t=this.getTable(),i=this.component._isStatusMessageShown();i&&this.component._hideStatusMessage();var n=[];return e.clientHeight>0?t.clientHeight>e.clientHeight?n[0]=1:e.clientHeight-t.clientHeight>1?n[0]=-1:n[0]=0:n[0]=0,e.clientWidth>0?t.clientWidth>e.clientWidth?n[1]=1:e.clientWidth-t.clientWidth>1?n[1]=-1:n[1]=0:n[1]=0,i&&this.component._showStatusMessage(),n},i.TableDomUtils.prototype.moveTableBodyRowTouchSelectionAffordanceTop=function(e){var t=this.getTableBodyRowTouchSelectionAffordanceTop();if(null!=t){$(t).data("rowIdx",e),$(t.children[0]).data("rowIdx",e);var n=this.getTableBody(),o=this.getTableBodyRow(e).getBoundingClientRect(),s=this.getTableContainer().getBoundingClientRect();t.style[i.TableDomUtils.CSS_PROP._TOP]=o.top-s.top-t.clientHeight/2+i.TableDomUtils.CSS_VAL._PX,t.style[i.TableDomUtils.CSS_PROP._LEFT]=n.clientWidth/2+i.TableDomUtils.CSS_VAL._PX}},i.TableDomUtils.prototype.moveTableBodyRowTouchSelectionAffordanceBottom=function(e){var t=this.getTableBodyRowTouchSelectionAffordanceBottom();if(null!=t){$(t).data("rowIdx",e),$(t.children[0]).data("rowIdx",e);var n=this.getTableBody(),o=this.getTableBodyRow(e).getBoundingClientRect(),s=this.getTableContainer().getBoundingClientRect();t.style[i.TableDomUtils.CSS_PROP._TOP]=o.top-s.top+o.height-t.clientHeight/2+i.TableDomUtils.CSS_VAL._PX,t.style[i.TableDomUtils.CSS_PROP._LEFT]=n.clientWidth/2+i.TableDomUtils.CSS_VAL._PX}},i.TableDomUtils.prototype.moveTableHeaderColumn=function(e,t,n){var o=this.component._getColumnDefs(),s=this.getTableHeaderColumn(e),r=this.getTableFooterCell(e),a=null,l=null,u=null,h=null,d=null,c=!1;t==o.length&&(t-=1,c=!0),null!=s&&(d=s.getAttribute(i.TableDomUtils.DOM_ATTR._COLSPAN),null==(l=this.getTableHeaderColumn(t))||null!=d&&1!=d||(c?l.parentNode.insertBefore(s,l.nextSibling):l.parentNode.insertBefore(s,l))),null!=r&&(d=r.getAttribute(i.TableDomUtils.DOM_ATTR._COLSPAN),null==(u=this.getTableFooterCell(t))||null!=d&&1!=d||(c?u.parentNode.insertBefore(r,u.nextSibling):u.parentNode.insertBefore(r,u)));var p,_=this.getTableBodyRows();if(null!=_)for(p=0;p<_.length;p++)null!=(a=this.getTableBodyCell(p,e,null))&&(h=this.getTableBodyCell(p,t,null),d=a.getAttribute(i.TableDomUtils.DOM_ATTR._COLSPAN),null==h||null!=d&&1!=d||(c?h.parentNode.insertBefore(a,h.nextSibling):h.parentNode.insertBefore(a,h)));var m=[],g=this.options.columns.length;for(p=0;p<g;p++)m[p]=$.extend({},{},this.options.columns[p]);var f=e<t&&!c?t-1:t,v=m.splice(e,1);m.splice(f,0,v[0]);var C=this.component._columnDefArray.splice(e,1);if(this.component._columnDefArray.splice(f,0,C[0]),!this._columnsDestMap)for(this._columnsDestMap=[],p=0;p<m.length;p++)this._columnsDestMap[p]=p;var y=this._columnsDestMap.splice(e,1);return this._columnsDestMap.splice(f,0,y[0]),this.component.option("columns",m,{_context:{writeback:!0,originalEvent:n,internalSet:!0}}),this.component._queueTask(function(){}),this._columnsDestMap},i.TableDomUtils.prototype.refreshContextMenu=function(){var e=this._menuContainer;if(e){var t,n=e.querySelectorAll("[data-oj-command]");for(t=0;t<n.length;t++){var o=$(n[t]).children(i.TableDomUtils.DOM_ELEMENT._A);if(o.length>0){var s,r=n[t].getAttribute("data-oj-command").split("-");"sort"==(r=r[r.length-1])?s=this.component.getTranslatedString("labelSort"):"sortAsc"==r?s=this.component.getTranslatedString("labelSortAsc"):"sortDsc"==r?s=this.component.getTranslatedString("labelSortDsc"):"resize"==r&&(s=this.component.getTranslatedString("labelResize")),o.contents().filter(function(){return 3===this.nodeType})[0].nodeValue=s}}}},i.TableDomUtils.prototype.refreshTableDimensions=function(e,t,i,n){this._refreshTableDimensions(e,t,i,n),this.component._setCurrentRow(this.options.currentRow,null)},i.TableDomUtils.prototype.removeDragOverIndicatorColumn=function(){var e=this.getTable().querySelectorAll("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_BEFORE_CLASS+",."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_AFTER_CLASS),t=0;if(e&&e.length>0){var n=e.length;for(t=0;t<n;t++)e[t].classList.remove(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_BEFORE_CLASS),e[t].classList.remove(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_AFTER_CLASS)}},i.TableDomUtils.prototype.removeDragOverIndicatorRow=function(){var e=this.getTableBody(),t=e.getElementsByClassName(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_DRAG_INDICATOR_BEFORE_CLASS),n=e.getElementsByClassName(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_DRAG_INDICATOR_AFTER_CLASS),o=0;if(t&&t.length>0){var s=t.length;for(o=0;o<s;o++)$(t[o]).remove()}if(n&&n.length>0){var r=n.length;for(o=0;o<r;o++)$(n[o]).remove()}var a=this.getTableBodyRows();null!=a&&0!=a.length||this.component._showNoDataMessage()},i.TableDomUtils.prototype.removeTableBodyRow=function(e){var t=this.getTableBodyRow(e);null!=t&&(i.Components.subtreeDetached(t),this.component._hasCellTemplate&&this.component._cleanTemplateNodes(t),$(t).remove(),this.clearCachedDomRowData())},i.TableDomUtils.prototype.removeAllTableBodyRows=function(){var e=this.getTableBodyRows();if(null!=e&&e.length>0){var t=this.getTableBody();null!=t&&(i.Components.subtreeDetached(t),this.component._hasCellTemplate&&(this.component._cleanTemplateNodes(t),this.component._hasCellTemplate=!1),$(t).empty()),this.clearCachedDomRowData()}},i.TableDomUtils.prototype.removeTableBodyRowTouchSelectionAffordance=function(){var e,t=this.getTableContainer().getElementsByClassName(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOUCH_AREA_CLASS);if(null!=t&&t.length>0)for(e=0;e<t.length;e++)$(t[e]).remove()},i.TableDomUtils.prototype.removeTableHeaderColumnDragImage=function(){var e=this.getTableContainer().querySelectorAll("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_IMAGE);if(e&&e.length>0){var t,n=e.length;for(t=0;t<n;t++)$(e[t]).remove()}},i.TableDomUtils.prototype.removeTableHeaderColumnResizeIndicator=function(){var e=this.getTableHeaderColumnResizeIndicator();e&&($(e).remove(),this._clearCachedDom(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_RESIZE_INDICATOR_CLASS))},i.TableDomUtils.prototype.setScrollLeft=function(e,t){"rtl"===this.component._GetReadingDirection()&&(t=Math.abs(t),this._isWebkit()?t=e.scrollWidth-e.clientWidth-t:this._isFF()&&(t*=-1));e.scrollLeft!=t&&(e.scrollLeft=t)},i.TableDomUtils.prototype.setTableBodyCellAttributes=function(e,t,n,o,s){var r=s.getAttribute(i.TableDomUtils.DOM_ATTR._ID);if(!(null!=r&&r.length>0)){var a=this.options.accessibility,l=this.component._getColumnDefs()[o];if(null!=l){var u=null,h=this.component._isTableHeaderless();u=null!=a&&null!=a.rowHeader?a.rowHeader:this.component._getColumnDefs()[0].id;var d=null!=t?t.toString():e.toString(),c=null==n?this.hashCode(d):n,p=this.getTableId()+":"+u+"_"+c,_=this.getTableId()+":"+l.id;u==l.id?(r=p,h&&(_="")):(r=p+"_"+o,_=h?p:_+" "+p),s.setAttribute(i.TableDomUtils.DOM_ATTR._ID,r),s.getAttribute(i.TableDomUtils.DOM_ATTR._HEADERS)||s.setAttribute(i.TableDomUtils.DOM_ATTR._HEADERS,_)}}},i.TableDomUtils.prototype.setTableBodyRowAttributes=function(e,t){$(t).data("rowKey",e.key),$(t).data("rowData",e.data)},i.TableDomUtils.prototype.setTableHeaderColumnAttributes=function(e,t){var n=this.component._getColumnDefs()[e];t.getAttribute(i.TableDomUtils.DOM_ATTR._ID)||t.setAttribute(i.TableDomUtils.DOM_ATTR._ID,this.getTableId()+":"+n.id)},i.TableDomUtils.prototype.setTableColumnCellsClass=function(e,t,i){var n=this.getTableBodyRows();if(null!=n&&n.length>0)if(null===e){var o=null;if(null!=(o=t?this.getTableBody().querySelectorAll("[td]"):this.getTableBody().querySelectorAll("."+i))&&o.length>0){var s=o.length;for(r=0;r<s;r++)t?o[r].classList.add(i):o[r].classList.remove(i)}}else{var r,a,l=n.length;for(r=0;r<l;r++)a=this.getTableBodyCell(r,e,null),t?a.classList.add(i):a.classList.remove(i)}},i.TableDomUtils.prototype.setTableBodyMessage=function(e){var t=this.getTableBodyMessageCell();$(t).empty(),t.appendChild(document.createTextNode(e))},i.TableDomUtils.prototype.setTableInlineMessage=function(e,t,n){var o=this.getTableInlineMessage();$(o).empty(),$(o).append(i.PopupMessagingStrategyUtils.buildMessageHtml(document,e,t,n,null))},i.TableDomUtils.prototype.setTableStatusAccNotification=function(e){var t=this.getTableStatusAccNotification();$(t).empty(),t.appendChild(document.createTextNode(e))},i.TableDomUtils.prototype.styleInitialTable=function(){var e=this.getTable(),t=(this.getTableContainer(),e.getElementsByTagName(i.TableDomUtils.DOM_ELEMENT._THEAD));t=t.length>0?t[0]:null;var n=e.getElementsByTagName(i.TableDomUtils.DOM_ELEMENT._TFOOT);n=n.length>0?n[0]:null;var o=e.getElementsByTagName(i.TableDomUtils.DOM_ELEMENT._TBODY);o=o.length>0?o[0]:null,e.setAttribute(i.TableDomUtils.DOM_ATTR._TABINDEX,"0"),this.component._focusable({element:e,applyHighlight:!0,setupHandlers:this._focusSetupHandlers.bind(this)}),this.styleTableHeader(t),this.styleTableFooter(n),this.styleTableBody(o)},i.TableDomUtils.prototype.styleTableBody=function(e){e.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_BODY_CLASS),e.setAttribute(i.Components._OJ_CONTAINER_ATTR,this.component.widgetName)},i.TableDomUtils.prototype.styleTableBodyCell=function(e,t,n){this.options;var o=this.component._getColumnDefs()[e];!n&&t.classList.contains(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_CLASS)||(t.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_CLASS),t.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_DATE_CELL_FORM_CONTROL_CLASS),null==o||null==o.style||!n&&t.getAttribute(i.TableDomUtils.DOM_ATTR._STYLE)==o.style||t.setAttribute(i.TableDomUtils.DOM_ATTR._STYLE,o.style),null==o||null==o.className||!n&&$(t).hasClass(o.className)||$(t).addClass(o.className)),this._isVerticalGridEnabled()&&(!n&&t.classList.contains(i.TableDomUtils.CSS_CLASSES._TABLE_VGRID_LINES_CLASS)||t.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_VGRID_LINES_CLASS))},i.TableDomUtils.prototype.styleTableBodyRow=function(e,t){!t&&e.classList.contains(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS)||e.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS),this._isHorizontalGridEnabled()&&(!t&&e.classList.contains(i.TableDomUtils.CSS_CLASSES._TABLE_HGRID_LINES_CLASS)||e.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_HGRID_LINES_CLASS))},i.TableDomUtils.prototype.styleTableContainer=function(e){e.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_CLASS),e.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_CONTAINER_CLASS),e.classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._WIDGET),this.options.display==i.TableDomUtils._OPTION_DISPLAY._GRID?e.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_COMPACT_CLASS):e.classList.remove(i.TableDomUtils.CSS_CLASSES._TABLE_COMPACT_CLASS);var t=this.options.editMode;null!=t&&t!=this.component._OPTION_EDIT_MODE._NONE?e.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_EDIT_CLASS):e.classList.remove(i.TableDomUtils.CSS_CLASSES._TABLE_EDIT_CLASS)},i.TableDomUtils.prototype.styleTableFooter=function(e){e&&(e.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CLASS),e.getElementsByTagName(i.TableDomUtils.DOM_ELEMENT._TR)[0].classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_ROW_CLASS))},i.TableDomUtils.prototype.styleTableFooterCell=function(e,t){this.options,this.component._getColumnDefs().length;var n=this.component._getColumnDefs()[e];null!=n.footerStyle&&t.setAttribute(i.TableDomUtils.DOM_ATTR._STYLE,n.footerStyle),t.classList.contains(i.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS)||t.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS),this._isVerticalGridEnabled()&&!t.classList.contains(i.TableDomUtils.CSS_CLASSES._TABLE_VGRID_LINES_CLASS)&&t.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_VGRID_LINES_CLASS),n.footerClassName&&$(t).addClass(n.footerClassName)},i.TableDomUtils.prototype.styleTableHeader=function(e){if(e){e.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_HEADER_CLASS),e.style[i.TableDomUtils.CSS_PROP._DISPLAY]="table-header-group";var t=e.getElementsByTagName(i.TableDomUtils.DOM_ELEMENT._TR)[0];t.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_HEADER_ROW_CLASS),t.style[i.TableDomUtils.CSS_PROP._POSITION]=i.TableDomUtils.CSS_VAL._RELATIVE}},i.TableDomUtils.prototype.styleTableHeaderColumn=function(e,t,n,o){var s=this.component._getColumnDefs()[e];!o&&t.classList.contains(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS)||(t.classList.add(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS),this._isVerticalGridEnabled()&&(!o&&t.classList.contains(i.TableDomUtils.CSS_CLASSES._TABLE_VGRID_LINES_CLASS)||t.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_VGRID_LINES_CLASS)),null==s.headerStyle||!o&&t.getAttribute(i.TableDomUtils.DOM_ATTR._STYLE)==s.headerStyle||t.setAttribute(i.TableDomUtils.DOM_ATTR._STYLE,s.headerStyle),null==s.headerClassName||!o&&$(t).hasClass(s.headerClassName)||$(t).addClass(s.headerClassName))},i.TableDomUtils.prototype._getColspanLogicalElements=function(e){var t,n,o=0,s=[],r=e.length;for(t=0;t<r;t++){var a=e[t].getAttribute(i.TableDomUtils.DOM_ATTR._COLSPAN);if(null!=a){for(a=parseInt(a,10),n=0;n<a;n++)s[o+n]=e[t];o+=a}else s[o++]=e[t]}return s},i.TableDomUtils.prototype._isHorizontalGridEnabled=function(){return this.options.horizontalGridVisible==i.TableDomUtils._OPTION_ENABLED||this.options.horizontalGridVisible==i.TableDomUtils._OPTION_AUTO},i.TableDomUtils.prototype._isVerticalGridEnabled=function(){return this.options.verticalGridVisible==i.TableDomUtils._OPTION_ENABLED||this.options.verticalGridVisible==i.TableDomUtils._OPTION_AUTO&&this.options.display==i.TableDomUtils._OPTION_DISPLAY._GRID},i.TableDomUtils.prototype._isFF=function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},i.TableDomUtils.prototype._isIE=function(){if(void 0===this._browserIsIE){var e=navigator.userAgent;if("Microsoft Internet Explorer"==navigator.appName){var t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(e);null!=t&&(this._browserIsIE=parseFloat(t[1]))}else e.indexOf("Trident")>=0?this._browserIsIE=11:this._browserIsIE=null}return this._browserIsIE},i.TableDomUtils.prototype._isWebkit=function(){if(void 0===this._browserIsWebkit){var e=navigator.userAgent.toLowerCase();this._browserIsWebkit=/webkit/.test(e)&&!/edge/.test(e)}return this._browserIsWebkit},i.TableDomUtils.prototype._refreshTableDimensions=function(e,t,n,o){this.options;var s=this.getTable(),r=this.getTableContainer(),a=this.getTableBody(),l=null,u=null;null!=this.component._scrollTop&&this.component._scrollTop>0&&(l=this.component._scrollTop),null!=this.component._scrollLeft&&this.component._scrollLeft>0&&(u=this.component._scrollLeft),this._removeTableDimensionsStyling(),this.styleTableContainer(r);var h=this.isTableContainerScrollable();if(1===h[0]?this._tableHeightConstrained=!0:this._tableHeightConstrained=!1,1===h[1]?this._tableWidthConstrained=!0:this._tableWidthConstrained=!1,null!=a){if(this._tableHeightConstrained||this._tableWidthConstrained){var d=this.getTableHeader(),c=this.getTableFooter(),p=this.getTableBottomSlot();r.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_SCROLL_CLASS),this._tableDimensions||(this._tableDimensions={}),e>0||t>0?(e>0&&this._tableWidthConstrained&&(this._tableDimensions[i.TableDomUtils.CSS_PROP._WIDTH]=e),t>0&&this._tableHeightConstrained&&(this._tableDimensions[i.TableDomUtils.CSS_PROP._HEIGHT]=t)):(this._tableHeightConstrained?this._tableDimensions[i.TableDomUtils.CSS_PROP._HEIGHT]=r.offsetHeight:this._tableDimensions[i.TableDomUtils.CSS_PROP._HEIGHT]=0,this._tableWidthConstrained?this._tableDimensions[i.TableDomUtils.CSS_PROP._WIDTH]=r.offsetWidth:this._tableDimensions[i.TableDomUtils.CSS_PROP._WIDTH]=0),null==this._tableBorderWidth&&(this._tableBorderWidth=$(r).outerWidth()-$(r).innerWidth()),null==this._tableBorderHeight&&(this._tableBorderHeight=$(r).outerHeight()-$(r).innerHeight());var _=0;this._tableHeightConstrained&&!this._tableWidthConstrained&&(r.style[i.TableDomUtils.CSS_PROP._OVERFLOW]=i.TableDomUtils.CSS_VAL._AUTO,_=r.offsetWidth-r.clientWidth,this._tableDimensions[i.TableDomUtils.CSS_PROP._WIDTH]>0?s.style[i.TableDomUtils.CSS_PROP._WIDTH]=r.clientWidth+i.TableDomUtils.CSS_VAL._PX:(s.style[i.TableDomUtils.CSS_PROP._WIDTH]=r.scrollWidth+_+i.TableDomUtils.CSS_VAL._PX,1===(h=this.isTableContainerScrollable())[1]&&(s.style[i.TableDomUtils.CSS_PROP._WIDTH]=r.clientWidth+i.TableDomUtils.CSS_VAL._PX)),r.style[i.TableDomUtils.CSS_PROP._OVERFLOW]=""),this._setColumnWidths(),this._tableHeightConstrained&&r.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_SCROLL_VERTICAL_CLASS),this._tableWidthConstrained&&r.classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_SCROLL_HORIZONTAL_CLASS);var m=s.clientWidth;_>0&&(s.style[i.TableDomUtils.CSS_PROP._WIDTH]=r.offsetWidth+i.TableDomUtils.CSS_VAL._PX);var g=0,f=s.getElementsByTagName("caption");if(null!=f&&f.length>0&&(f=f[0],g=$(f).outerHeight(),f.style[i.TableDomUtils.CSS_PROP._DISPLAY]=i.TableDomUtils.CSS_VAL._INLINE,null!=d)){var v=window.getComputedStyle(r);d.style[i.TableDomUtils.CSS_PROP._BORDER_TOP]=v[i.TableDomUtils.CSS_PROP._BORDER_TOP]}var C=0;null!=d&&(C=$(d).outerHeight());var y,b=0,S=0;this._tableWidthConstrained?a.style[i.TableDomUtils.CSS_PROP._WIDTH]=this._tableDimensions[i.TableDomUtils.CSS_PROP._WIDTH]-this._tableBorderWidth+i.TableDomUtils.CSS_VAL._PX:_>0&&(a.style[i.TableDomUtils.CSS_PROP._WIDTH]=m-this._tableBorderWidth+_+i.TableDomUtils.CSS_VAL._PX),null!=c&&(b=$(c).outerHeight(),a.style[i.TableDomUtils.CSS_PROP._TOP]=-1*b+i.TableDomUtils.CSS_VAL._PX);var E=0,T=this.getTableInlineMessage();null!=T&&T.style[i.TableDomUtils.CSS_PROP._DISPLAY]!=i.TableDomUtils.CSS_VAL._NONE&&T.clientHeight>0&&(E=$(T).outerHeight());var D=0;if(null!=p&&p.style[i.TableDomUtils.CSS_PROP._DISPLAY]!=i.TableDomUtils.CSS_VAL._NONE&&p.clientHeight>0&&(D=$(p).outerHeight()),this._tableHeightConstrained?(S=this._tableDimensions[i.TableDomUtils.CSS_PROP._HEIGHT]-C-b-g-E-D-this._tableBorderHeight)>0&&(a.style[i.TableDomUtils.CSS_PROP._HEIGHT]=S+i.TableDomUtils.CSS_VAL._PX,a.style[i.TableDomUtils.CSS_PROP._MIN_HEIGHT]=S+i.TableDomUtils.CSS_VAL._PX):S=$(a).outerHeight(),y=this.getScrollbarWidth(),this._tableWidthConstrained){var A=this.getTableBodyRows();if(null!=A&&A.length>0){if(a.style[i.TableDomUtils.CSS_PROP._OVERFLOW_X]=i.TableDomUtils.CSS_VAL._AUTO,r.style[i.TableDomUtils.CSS_PROP._OVERFLOW_X]=i.TableDomUtils.CSS_VAL._HIDDEN,r.style[i.TableDomUtils.CSS_PROP._OVERFLOW_Y]=i.TableDomUtils.CSS_VAL._HIDDEN,null!=d){var I=this._tableDimensions[i.TableDomUtils.CSS_PROP._WIDTH]-this._tableBorderWidth;I>0&&(d.style[i.TableDomUtils.CSS_PROP._WIDTH]=y>0?I-y+i.TableDomUtils.CSS_VAL._PX:I+i.TableDomUtils.CSS_VAL._PX)}}else a.style[i.TableDomUtils.CSS_PROP._OVERFLOW_X]=i.TableDomUtils.CSS_VAL._HIDDEN,r.style[i.TableDomUtils.CSS_PROP._OVERFLOW_X]=i.TableDomUtils.CSS_VAL._AUTO,r.style[i.TableDomUtils.CSS_PROP._OVERFLOW_Y]=i.TableDomUtils.CSS_VAL._HIDDEN}null!=c&&(c.style[i.TableDomUtils.CSS_PROP._TOP]=S+i.TableDomUtils.CSS_VAL._PX),this._setHeaderColumnLastWidth()}else this.component._isTableColumnsWidthSet()&&this._setColumnWidths();if(this._setHeaderColumnOverflowWidths(),this._removeTableBodyRowBottomBorder(h[0]<0),this.refreshTableStatusPosition(),null==l||n)n&&(this.getScroller().scrollTop=0,$(this.getScroller()).scroll());else{var O=this.getScroller().scrollHeight-this.getScroller().clientHeight;l=l>O?O:l,this.component._isLoadMoreOnScroll()&&O==l&&l--,this.getScroller().scrollTop=l,$(this.getScroller()).scroll()}null==u||o?o&&(this.setScrollLeft(this.getScroller(),0),$(this.getScroller()).scroll()):(this.setScrollLeft(this.getScroller(),u),$(this.getScroller()).scroll())}},i.TableDomUtils.prototype.refreshTableStatusPosition=function(){if(this.component._isStatusMessageShown()){var e=this.getTableContainer(),t=this.getTableBody(),n=this.getTableStatusMessage(),o=e;t.clientHeight>0&&(o=t),n.style[i.TableDomUtils.CSS_PROP._HEIGHT]=t.clientHeight+i.TableDomUtils.CSS_VAL._PX,n.style[i.TableDomUtils.CSS_PROP._WIDTH]=t.clientWidth+i.TableDomUtils.CSS_VAL._PX;var s=n.children[0],r="rtl"===this.component._GetReadingDirection(),a={my:"center",at:"center",collision:"none",of:o};a=i.PositionUtils.normalizeHorizontalAlignment(a,r),$(n).position(a);var l={my:"center",at:"center",collision:"none",of:n};l=i.PositionUtils.normalizeHorizontalAlignment(l,r),$(s).position(l)}},i.TableDomUtils.prototype._cacheDomElement=function(e,t){this._domCache||(this._domCache={}),this._domCache[e]=t},i.TableDomUtils.prototype._clearCachedDom=function(e){e&&this._domCache?delete this._domCache[e]:this._domCache={}},i.TableDomUtils.prototype._getCachedDomElement=function(e){return this._domCache?this._domCache[e]:null},i.TableDomUtils.prototype._isCachedDomElement=function(e){return this._domCache||(this._domCache={}),-1!==Object.keys(this._domCache).indexOf(e)},i.TableDomUtils.prototype._getTableElementByClassName=function(e,t){if(!this._isCachedDomElement(e)){var i=this.getTableContainer();if(i)if(this._cacheDomElement(e,null),t){if(this._cacheDomElement(e,this._getChildElementByClassName(i,e)),null==this._getCachedDomElement(e)){var n=this.getTable();this._cacheDomElement(e,this._getChildElementByClassName(n,e))}}else{var o=i.getElementsByClassName(e);o&&o.length>0&&this._cacheDomElement(e,o[0])}}return this._getCachedDomElement(e)},i.TableDomUtils.prototype._getChildElementByClassName=function(e,t){var i;if(null!=e.childNodes&&e.childNodes.length>0)for(i=0;i<e.childNodes.length;i++)if(null!=e.childNodes[i].classList&&e.childNodes[i].classList.contains(t))return e.childNodes[i];return null},i.TableDomUtils.prototype._focusSetupHandlers=function(e,t){this.component._setFocusInHandler(e),this.component._setFocusOutHandler(t)},i.TableDomUtils.prototype._removeHeaderColumnAndCellColumnWidths=function(){var e,t,n,o=this.component._getColumnDefs().length;for(e=0;e<o;e++)null!=(t=this.getTableHeaderColumn(e))&&(t.style[i.TableDomUtils.CSS_PROP._MIN_WIDTH]="");var s,r,a=this.getTableBodyRows();if(null!=a&&a.length>0)for(e=0;e<o;e++)if(null!=(s=this.getTableBodyCell(0,e,null))&&(s.style[i.TableDomUtils.CSS_PROP._MIN_WIDTH]="",null!=this._forcedWidthColumns&&this._forcedWidthColumns[e]))for(r=0;r<a.length;r++)(s=this.getTableBodyCell(r,e,null)).style[i.TableDomUtils.CSS_PROP._MIN_WIDTH]="",s.style[i.TableDomUtils.CSS_PROP._WIDTH]="",s.style[i.TableDomUtils.CSS_PROP._MAX_WIDTH]="";for(e=0;e<o;e++)null!=(n=this.getTableFooterCell(e))&&(n.style[i.TableDomUtils.CSS_PROP._MIN_WIDTH]="")},i.TableDomUtils.prototype._removeTableBodyRowBottomBorder=function(e){if(this._isHorizontalGridEnabled()){var t=this.getTableBodyRows();if(null!=t&&t.length>0){var n,o=t.length;for(n=0;n<o;n++)t[n].classList.contains(i.TableDomUtils.CSS_CLASSES._TABLE_HGRID_LINES_CLASS)||t[n].classList.add(i.TableDomUtils.CSS_CLASSES._TABLE_HGRID_LINES_CLASS);var s=t[t.length-1];e||s.classList.remove(i.TableDomUtils.CSS_CLASSES._TABLE_HGRID_LINES_CLASS)}}},i.TableDomUtils.prototype._removeTableDimensionsStyling=function(){var e=this.getTable(),t=this.getTableContainer(),n=this.getTableHeader(),o=this.getTableHeaderRow(),s=this.getTableFooter(),r=this.getTableFooterRow(),a=this.getTableBody();if(t.classList.remove(i.TableDomUtils.CSS_CLASSES._TABLE_SCROLL_CLASS),t.classList.remove(i.TableDomUtils.CSS_CLASSES._TABLE_SCROLL_VERTICAL_CLASS),t.classList.remove(i.TableDomUtils.CSS_CLASSES._TABLE_SCROLL_HORIZONTAL_CLASS),t.style[i.TableDomUtils.CSS_PROP._OVERFLOW]=i.TableDomUtils.CSS_VAL._VISIBLE,null!=n){n.setAttribute(i.TableDomUtils.DOM_ATTR._STYLE,""),o.setAttribute(i.TableDomUtils.DOM_ATTR._STYLE,"");var l,u=o.querySelectorAll("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_TEXT_CLASS);if(u&&u.length>0){var h=u.length;for(l=0;l<h;l++)u[l].style[i.TableDomUtils.CSS_PROP._WIDTH]=""}}null!=s&&(s.setAttribute(i.TableDomUtils.DOM_ATTR._STYLE,""),r.setAttribute(i.TableDomUtils.DOM_ATTR._STYLE,"")),e.style[i.TableDomUtils.CSS_PROP._DISPLAY]="",e.style[i.TableDomUtils.CSS_PROP._WIDTH]="",null!=a&&a.setAttribute(i.TableDomUtils.DOM_ATTR._STYLE,""),this._removeHeaderColumnAndCellColumnWidths()},i.TableDomUtils.prototype._setColumnWidths=function(){var e,t,n,o=this.component._getColumnDefs(),s=[],r=[],a=[],l=[],u=[];this._forcedWidthColumns=[];var h,d,c,p,_,m,g,f,v,C,y=o.length;for(h=0;h<y;h++)null!=(c=this.getTableHeaderColumn(h))&&(p=window.getComputedStyle(c),o[h].width>0?(this._forcedWidthColumns[h]=!0,v=o[h].width):(this._forcedWidthColumns[h]=!1,v=parseInt(p[i.TableDomUtils.CSS_PROP._WIDTH],10)||0),s[h]=v,n=this.component._getColumnRenderer(h,"header"),e||null!=n?r[h]=null!=n?(parseFloat(p[i.TableDomUtils.CSS_PROP._PADDING_RIGHT])||0)+(parseFloat(p[i.TableDomUtils.CSS_PROP._PADDING_LEFT])||0):e:(e=(parseFloat(p[i.TableDomUtils.CSS_PROP._PADDING_RIGHT])||0)+(parseFloat(p[i.TableDomUtils.CSS_PROP._PADDING_LEFT])||0),r[h]=e),(m=c.querySelectorAll("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_TEXT_CLASS))&&m.length>0&&(a[h]=m[0].clientHeight+i.TableDomUtils.CSS_VAL._PX));var b,S,E,T,D=[],A=this.getTableBodyRows();if(null!=A&&A.length>0)for(h=0;h<y;h++)null!=(b=this.getTableBodyCell(0,h,null))&&(this.component._getColumnRenderer(h,"cell"),this.component._hasRowOrCellRendererOrTemplate(h)?(S=window.getComputedStyle(b),E=(parseFloat(S[i.TableDomUtils.CSS_PROP._PADDING_RIGHT])||0)+(parseFloat(S[i.TableDomUtils.CSS_PROP._PADDING_LEFT])||0)):(t||(S=window.getComputedStyle(b),t=(parseFloat(S[i.TableDomUtils.CSS_PROP._PADDING_RIGHT])||0)+(parseFloat(S[i.TableDomUtils.CSS_PROP._PADDING_LEFT])||0)),E=t),l[h]=E,T=null,T=E>r[h]?s[h]-E+r[h]:s[h]+r[h]-E,D[h]=T);for(h=0;h<y;h++)null!=(g=this.getTableFooterCell(h))&&(f=window.getComputedStyle(g),u[h]=(parseFloat(f[i.TableDomUtils.CSS_PROP._PADDING_RIGHT])||0)+(parseFloat(f[i.TableDomUtils.CSS_PROP._PADDING_LEFT])||0));for(h=0;h<y;h++){if(null!=(c=this.getTableHeaderColumn(h))&&(a[h]&&(_=c.querySelectorAll("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CLASS))&&_.length>0&&(_[0].style[i.TableDomUtils.CSS_PROP._MIN_HEIGHT]=a[h]),this._forcedWidthColumns[h]?(C=s[h]-r[h]+i.TableDomUtils.CSS_VAL._PX,c.style[i.TableDomUtils.CSS_PROP._MIN_WIDTH]=C,c.style[i.TableDomUtils.CSS_PROP._WIDTH]=C,c.style[i.TableDomUtils.CSS_PROP._MAX_WIDTH]=C):c.style[i.TableDomUtils.CSS_PROP._MIN_WIDTH]=s[h]+i.TableDomUtils.CSS_VAL._PX),null!=(b=this.getTableBodyCell(0,h,null)))if(this._forcedWidthColumns[h])for(C=s[h]-l[h]+i.TableDomUtils.CSS_VAL._PX,d=0;d<A.length;d++)(b=this.getTableBodyCell(d,h,null)).style[i.TableDomUtils.CSS_PROP._MIN_WIDTH]=C,b.style[i.TableDomUtils.CSS_PROP._WIDTH]=C,b.style[i.TableDomUtils.CSS_PROP._MAX_WIDTH]=C;else b.style[i.TableDomUtils.CSS_PROP._MIN_WIDTH]=D[h]+i.TableDomUtils.CSS_VAL._PX;null!=(g=this.getTableFooterCell(h))&&(this._forcedWidthColumns[h]?(C=s[h]-u[h]+i.TableDomUtils.CSS_VAL._PX,g.style[i.TableDomUtils.CSS_PROP._MIN_WIDTH]=C,g.style[i.TableDomUtils.CSS_PROP._WIDTH]=C,g.style[i.TableDomUtils.CSS_PROP._MAX_WIDTH]=C):(T=u[h]>r[h]?s[h]-u[h]+r[h]:s[h]+r[h]-u[h],g.style[i.TableDomUtils.CSS_PROP._MIN_WIDTH]=T+i.TableDomUtils.CSS_VAL._PX))}},i.TableDomUtils.prototype._setHeaderColumnLastWidth=function(){var e=this.getScrollbarWidth();if(e>0&&this.getScrollbarHeight()<=1){var t=this.component._getColumnDefs(),n=t.length,o=this.getTableHeaderColumn(n-1),s=0;if(null!=o){var r,a,l;for(r=0;r<n;r++)t[r],a=this.getTableHeaderColumn(r),l=window.getComputedStyle(a),s+=parseInt(l[i.TableDomUtils.CSS_PROP._WIDTH],10)||0;var u=this.getTableHeader(),h=window.getComputedStyle(u);if((parseInt(h[i.TableDomUtils.CSS_PROP._WIDTH],10)||0)>s){var d=window.getComputedStyle(o),c=parseInt(d[i.TableDomUtils.CSS_PROP._WIDTH],10)||0;o.style[i.TableDomUtils.CSS_PROP._MIN_WIDTH]=c+e+i.TableDomUtils.CSS_VAL._PX}}}},i.TableDomUtils.prototype._setHeaderColumnOverflowWidths=function(){var e,t,n,o,s,r,a,l=this.component._getColumnDefs(),u=l.length;for(e=0;e<u;e++)t=l[e],null!=(n=this.getTableHeaderColumn(e))&&(o=n.getElementsByClassName(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CLASS)).length>0&&(o=o[0],(s=n.querySelectorAll("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_TEXT_CLASS))&&s.length>0&&(a=0,t.sortable==i.TableDomUtils._OPTION_ENABLED&&(a=n.querySelectorAll("."+i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_SORT_PACEHOLDER_CLASS)[0].clientWidth),o.clientWidth>0&&s[0].clientWidth+a>o.clientWidth&&(s[0].style[i.TableDomUtils.CSS_PROP._WIDTH]="",s[0].clientWidth>(r=n.clientWidth-a)+1&&(s[0].style[i.TableDomUtils.CSS_PROP._WIDTH]=r+i.TableDomUtils.CSS_VAL._PX))))},i.TableDomUtils.CSS_CLASSES={_CHECKBOX_ACC_SELECT_COLUMN_CLASS:"oj-table-checkbox-acc-select-column",_CHECKBOX_ACC_SELECT_ROW_CLASS:"oj-table-checkbox-acc-select-row",_TABLE_CONTAINER_CLASS:"oj-table-container",_TABLE_SCROLLER_CLASS:"oj-table-scroller",_TABLE_CLASS:"oj-table",_TABLE_COMPACT_CLASS:"oj-table-grid-display",_TABLE_EDIT_CLASS:"oj-table-editable",_TABLE_SCROLL_CLASS:"oj-table-scroll",_TABLE_SCROLL_VERTICAL_CLASS:"oj-table-scroll-vertical",_TABLE_SCROLL_HORIZONTAL_CLASS:"oj-table-scroll-horizontal",_TABLE_ELEMENT_CLASS:"oj-table-element",_TABLE_FOOTER_CLASS:"oj-table-footer",_TABLE_FOOTER_ROW_CLASS:"oj-table-footer-row",_TABLE_HEADER_CLASS:"oj-table-header",_TABLE_HEADER_ROW_CLASS:"oj-table-header-row",_TABLE_BOTTOM_SLOT_CLASS:"oj-table-slot-bottom",_COLUMN_HEADER_CELL_CLASS:"oj-table-column-header-cell",_COLUMN_HEADER_DROP_EMPTY_CELL_CLASS:"oj-table-column-header-drop-empty-cell",_COLUMN_HEADER_ACC_SELECT_COLUMN_CLASS:"oj-table-column-header-acc-select-column",_COLUMN_HEADER_ACC_SELECT_ROW_CLASS:"oj-table-column-header-acc-select-row",_COLUMN_HEADER_ACC_SELECT_ROW_TEXT_CLASS:"oj-table-column-header-acc-select-row-text",_COLUMN_HEADER_CLASS:"oj-table-column-header",_COLUMN_HEADER_TEXT_CLASS:"oj-table-column-header-text",_COLUMN_HEADER_ASC_CLASS:"oj-table-column-header-asc",_COLUMN_HEADER_DSC_CLASS:"oj-table-column-header-dsc",_COLUMN_HEADER_SORT_PACEHOLDER_CLASS:"oj-table-column-header-sort-placeholder",_COLUMN_HEADER_ACC_ASC_LINK_CLASS:"oj-table-column-header-acc-asc-link",_COLUMN_HEADER_ACC_DSC_LINK_CLASS:"oj-table-column-header-acc-dsc-link",_COLUMN_HEADER_ASC_LINK_CLASS:"oj-table-column-header-asc-link",_COLUMN_HEADER_DSC_LINK_CLASS:"oj-table-column-header-dsc-link",_COLUMN_HEADER_ASC_ICON_CLASS:"oj-table-column-header-asc-icon",_COLUMN_HEADER_DSC_ICON_CLASS:"oj-table-column-header-dsc-icon",_COLUMN_HEADER_DRAG_INDICATOR_BEFORE_CLASS:"oj-table-column-header-drag-indicator-before",_COLUMN_HEADER_DRAG_INDICATOR_AFTER_CLASS:"oj-table-column-header-drag-indicator-after",_COLUMN_HEADER_DRAG_IMAGE:"oj-table-column-header-cell-drag-image",_COLUMN_HEADER_RESIZE_INDICATOR_CLASS:"oj-table-column-header-resize-indicator",_TABLE_BODY_CLASS:"oj-table-body",_TABLE_DATA_ROW_CLASS:"oj-table-body-row",_TABLE_DATA_ROW_DRAG_INDICATOR_BEFORE_CLASS:"oj-table-body-row-drag-indicator-before",_TABLE_DATA_ROW_DRAG_INDICATOR_AFTER_CLASS:"oj-table-body-row-drag-indicator-after",_TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOP_CLASS:"oj-table-body-row-touch-selection-affordance-top",_TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_BOTTOM_CLASS:"oj-table-body-row-touch-selection-affordance-bottom",_TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOP_ICON_CLASS:"oj-table-body-row-touch-selection-affordance-top-icon",_TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_BOTTOM_ICON_CLASS:"oj-table-body-row-touch-selection-affordance-bottom-icon",_TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOUCH_AREA_CLASS:"oj-table-body-row-touch-selection-affordance-touch-area",_TABLE_DATA_ROW_EDIT_CLASS:"oj-table-body-row-edit",_TABLE_DATA_CURRENT_ROW_CLASS:"oj-table-body-current-row",_TABLE_DATA_CELL_CLASS:"oj-table-data-cell",_TABLE_DATA_CELL_ACC_SELECT_CLASS:"oj-table-data-cell-acc-select",_TABLE_DATA_CELL_EDIT_CLASS:"oj-table-data-cell-edit",_TABLE_DATE_CELL_FORM_CONTROL_CLASS:"oj-form-control-inherit",_TABLE_VGRID_LINES_CLASS:"oj-table-vgrid-lines",_TABLE_HGRID_LINES_CLASS:"oj-table-hgrid-lines",_TABLE_FOOTER_CELL_CLASS:"oj-table-footer-cell",_TABLE_FOOTER_DROP_EMPTY_CELL_CLASS:"oj-table-footer-drop-empty-cell",_TABLE_INLINE_MESSAGE_CLASS:"oj-table-inline-message",_TABLE_STATUS_ACC_NOTIFICATION_CLASS:"oj-table-status-acc-notification",_TABLE_STATUS_MESSAGE_CLASS:"oj-table-status-message",_TABLE_STATUS_MESSAGE_TEXT_CLASS:"oj-table-status-message-text",_TABLE_LOADING_ICON_CLASS:"oj-table-loading-icon",_TABLE_BODY_MESSAGE_CLASS:"oj-table-body-message",_TABLE_BODY_MESSAGE_ROW_CLASS:"oj-table-body-message-row",_ICON_CLASS:"oj-icon",_WIDGET_ICON_CLASS:"oj-component-icon",_HIDDEN_CONTENT_ACC_CLASS:"oj-helper-hidden-accessible"},i.TableDomUtils.CSS_PROP={_DISPLAY:"display",_VISIBILITY:"visibility",_POSITION:"position",_HEIGHT:"height",_WIDTH:"width",_TOP:"top",_BOTTOM:"bottom",_LEFT:"left",_RIGHT:"right",_PADDING_TOP:"padding-top",_PADDING_LEFT:"padding-left",_PADDING_RIGHT:"padding-right",_OVERFLOW:"overflow",_OVERFLOW_X:"overflow-x",_OVERFLOW_Y:"overflow-y",_MIN_WIDTH:"min-width",_MAX_WIDTH:"max-width",_MIN_HEIGHT:"min-height",_FLOAT:"float",_BORDER_TOP:"border-top",_BORDER_BOTTOM_WIDTH:"border-bottom-width",_BORDER_LEFT_WIDTH:"border-left-width",_MARGIN_BOTTOM:"margin-bottom",_VERTICAL_ALIGN:"vertical-align",_CURSOR:"cursor",_ZINDEX:"z-index",_BACKGROUND_COLOR:"background-color",_BOX_SIZING:"box-sizing"},i.TableDomUtils.CSS_VAL={_NONE:"none",_BLOCK:"block",_INLINE_BLOCK:"inline-block",_RELATIVE:"relative",_ABSOLUTE:"absolute",_INLINE:"inline",_AUTO:"auto",_HIDDEN:"hidden",_VISIBLE:"visible",_LEFT:"left",_PX:"px",_MIDDLE:"middle",_MOVE:"move",_FIXED:"fixed",_TRANSPARENT:"transparent",_BORDER_BOX:"border-box"},i.TableDomUtils.DOM_ATTR={_STYLE:"style",_TABINDEX:"tabindex",_TYPE:"type",_ID:"id",_TITLE:"title",_HREF:"href",_HEADERS:"headers",_COLSPAN:"colspan",_ROLE:"role",_ARIA_LABEL:"aria-label",_ARIA_HIDDEN:"aria-hidden"},i.TableDomUtils.DOM_ELEMENT={_DIV:"div",_A:"a",_TR:"tr",_TD:"td",_TH:"th",_TABLE:"table",_TBODY:"tbody",_THEAD:"thead",_TFOOT:"tfoot",_INPUT:"input",_UL:"ul",_SPAN:"span",_BUTTON:"button",_LABEL:"label"},i.TableDomUtils.MARKER_STYLE_CLASSES={_WIDGET:"oj-component",_ACTIVE:"oj-active",_CLICKABLE_ICON:"oj-clickable-icon-nocontext",_DISABLED:"oj-disabled",_ENABLED:"oj-enabled",_FOCUS:"oj-focus",_FOCUS_HIGHLIGHT:"oj-focus-highlight",_HOVER:"oj-hover",_SELECTED:"oj-selected",_WARNING:"oj-warning",_DRAGGABLE:"oj-draggable",_DRAG:"oj-drag"},i.TableDomUtils._COLUMN_HEADER_ROW_SELECT_ID="_hdrColRowSel",i.TableDomUtils._OPTION_AUTO="auto",i.TableDomUtils._OPTION_ENABLED="enabled",i.TableDomUtils._OPTION_DISABLED="disabled",i.TableDomUtils._OPTION_SELECTION_MODES={_SINGLE:"single",_MULTIPLE:"multiple"},i.TableDomUtils._OPTION_DISPLAY={_LIST:"list",_GRID:"grid"},i.TableRendererUtils={},i.TableRendererUtils.columnHeaderDefaultRenderer=function(e,t,n,o){var s=t.headerContext.parentElement,r=document.createElement(i.TableDomUtils.DOM_ELEMENT._DIV);r.classList.add(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CLASS),$(s).empty(),s.appendChild(r);var a=document.createElement(i.TableDomUtils.DOM_ELEMENT._DIV);a.classList.add(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_TEXT_CLASS),r.insertBefore(a,r.firstChild),null!=o?o($(a)):this.columnHeaderDefaultTextRenderer(e,a,t)},i.TableRendererUtils.columnHeaderSortableIconRenderer=function(e,t,n,o){var s=t.columnIndex,r=e._getColumnDefs()[s],a=t.headerContext.parentElement,l=document.createElement(i.TableDomUtils.DOM_ELEMENT._DIV);l.classList.add(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CLASS),$(a).empty(),a.appendChild(l),"rtl"===e._GetReadingDirection()?l.style[i.TableDomUtils.CSS_PROP._PADDING_LEFT]="0px":l.style[i.TableDomUtils.CSS_PROP._PADDING_RIGHT]="0px";var u=document.createElement(i.TableDomUtils.DOM_ELEMENT._DIV);u.classList.add(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_CLASS),l.appendChild(u);var h,d,c=document.createElement(i.TableDomUtils.DOM_ELEMENT._A);c.setAttribute(i.TableDomUtils.DOM_ATTR._ARIA_HIDDEN,"true"),c.classList.add(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_LINK_CLASS),c.classList.add(i.TableDomUtils.CSS_CLASSES._WIDGET_ICON_CLASS),c.classList.add(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_ICON_CLASS),c.classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED),c.classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._CLICKABLE_ICON),e._AddHoverable($(c)),u.appendChild(c),void 0!==i.TableRendererUtils._headerColumnAscWidth?(h=i.TableRendererUtils._headerColumnAscWidth,d=i.TableRendererUtils._headerColumnAscHeight):(h=$(u).width(),d=$(u).height(),h>0&&d>0&&(i.TableRendererUtils._headerColumnAscWidth=h,i.TableRendererUtils._headerColumnAscHeight=d));var p=document.createElement(i.TableDomUtils.DOM_ELEMENT._A);p.setAttribute(i.TableDomUtils.DOM_ATTR._TABINDEX,"0"),p.setAttribute(i.TableDomUtils.DOM_ATTR._HREF,"#"),p.classList.add(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ACC_ASC_LINK_CLASS),p.classList.add(i.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),p.setAttribute(i.TableDomUtils.DOM_ATTR._ARIA_LABEL,e.getTranslatedString("labelSortAsc")+" "+r.headerText),u.appendChild(p);var _=document.createElement(i.TableDomUtils.DOM_ELEMENT._DIV);_.classList.add(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_SORT_PACEHOLDER_CLASS),_.style[i.TableDomUtils.CSS_PROP._DISPLAY]=i.TableDomUtils.CSS_VAL._INLINE_BLOCK,_.style[i.TableDomUtils.CSS_PROP._VERTICAL_ALIGN]=i.TableDomUtils.CSS_VAL._MIDDLE,_.style[i.TableDomUtils.CSS_PROP._WIDTH]=h+i.TableDomUtils.CSS_VAL._PX,_.style[i.TableDomUtils.CSS_PROP._HEIGHT]=d+i.TableDomUtils.CSS_VAL._PX,l.appendChild(_);var m=document.createElement(i.TableDomUtils.DOM_ELEMENT._DIV);m.classList.add(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_CLASS),m.classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED),l.appendChild(m);var g=document.createElement(i.TableDomUtils.DOM_ELEMENT._A);g.setAttribute(i.TableDomUtils.DOM_ATTR._ARIA_HIDDEN,"true"),g.classList.add(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_LINK_CLASS),g.classList.add(i.TableDomUtils.CSS_CLASSES._WIDGET_ICON_CLASS),g.classList.add(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_ICON_CLASS),g.classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED),g.classList.add(i.TableDomUtils.MARKER_STYLE_CLASSES._CLICKABLE_ICON),e._AddHoverable($(g)),m.appendChild(g);var f=document.createElement(i.TableDomUtils.DOM_ELEMENT._A);f.setAttribute(i.TableDomUtils.DOM_ATTR._TABINDEX,"0"),f.setAttribute(i.TableDomUtils.DOM_ATTR._HREF,"#"),f.classList.add(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ACC_DSC_LINK_CLASS),f.classList.add(i.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),f.setAttribute(i.TableDomUtils.DOM_ATTR._ARIA_LABEL,e.getTranslatedString("labelSortDsc")+" "+r.headerText),m.appendChild(f);var v=document.createElement(i.TableDomUtils.DOM_ELEMENT._DIV);v.classList.add(i.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_TEXT_CLASS),l.insertBefore(v,l.firstChild),null!=o?o($(v)):this.columnHeaderDefaultTextRenderer(e,v,t)},i.TableRendererUtils.columnHeaderDefaultTextRenderer=function(e,t,i){var n=i.columnIndex,o=e._getColumnDefs()[n],s=null==o.headerText?"":o.headerText;t.appendChild(document.createTextNode(s))},i.TableRendererUtils.tableBodyRowDefaultRenderer=function(e,t,i,n){var o=n.rowContext.parentElement,s=e._getTableDomUtils().hashCode(i.key),r=e._getColumnDefs();e._getTableDomUtils().setTableBodyRowAttributes(i,o);var a,l=r.length;for(a=0;a<l;a++)this.tableBodyCellDefaultRenderer(e,t,a,i,s,n)},i.TableRendererUtils.tableBodyCellDefaultRenderer=function(e,t,n,o,s,r){var a=r.rowContext.parentElement,l=e._getColumnDefs()[n],u=e._getTableDomUtils().createTableBodyCell(t,n);e._getTableDomUtils().styleTableBodyCell(n,u,!0),e._getTableDomUtils().insertTableBodyCell(t,o.key,s,n,u,a,!0);var h=null;null!=l.field&&(h=i.TableRendererUtils._getObjectPath(o.data,l.field));var d=e._getColumnRenderer(n,"cell"),c=this.getRendererContextObject(e,u,{row:o}),p={cellContext:c,columnIndex:n,data:h,row:$.extend({},o.data),componentElement:c.componentElement,parentElement:c.parentElement};if(d){var _=d(p);null!=_?$(u).append(_):(u=$(a).children(":not(."+i.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_ACC_SELECT_CLASS+")")[n],e._getTableDomUtils().setTableBodyCellAttributes(t,o.key,s,n,u),e._getTableDomUtils().styleTableBodyCell(n,u,!1))}else{var m=e._getSlotTemplate(l.template);if(m){var g=e._getRootElement(),f=e._getTemplateEngine();if(null!=f){var v=i.TableRendererUtils.getCellSlotTemplateContextObject(e,p),C=f.execute(g,m,v,e.options.as);C instanceof Array||(C=[C]),C.map(function(e){u.appendChild(e)}),e._hasCellTemplate=!0}}else{var y=null==(h=i.TableRendererUtils._getVal(h))?"":h;u.appendChild(document.createTextNode(y))}}},i.TableRendererUtils.getRendererContextObject=function(e,t,n){var o={};o.component=i.Components.__GetWidgetConstructor(e.element,"ojTable");var s=e.options.data;if(i.PagingTableDataSource&&s instanceof i.PagingTableDataSource&&(s=s.getWrappedDataSource()),o.datasource=s,o.parentElement=t,null!=n.row){var r=n.row,a=r.key;if(o.status=this.getRendererStatusObject(e,r),e._hasEditableRow()){var l=e._getEditableRowKey();i.Object.compareValues(a,l)?o.mode="edit":o.mode="navigation"}else o.mode="navigation";this._copyMetadata(o,r,s)}return e._FixRendererContext(o)},i.TableRendererUtils.getRendererStatusObject=function(e,t){return{rowIndex:t.index,rowKey:t.key,currentRow:$.extend({},e._getCurrentRow())}},i.TableRendererUtils.getCellSlotTemplateContextObject=function(e,t){var i=this.getSlotTemplateContextObject(e),n=t.cellContext.status.rowIndex,o=t.cellContext.status.rowKey,s=t.columnIndex;return i[e._CONST_DATA]=t.data,i.row=t.row,i[e._CONST_INDEX]=n,i.columnIndex=s,i.mode=t.cellContext.mode,i[e._CONST_KEY]=o,i},i.TableRendererUtils.getHeaderSlotTemplateContextObject=function(e,t,i){var n=this.getSlotTemplateContextObject(e);return n[e._CONST_DATA]=t,n.columnIndex=i,n},i.TableRendererUtils.getSlotTemplateContextObject=function(e){return{componentElement:e._getRootElement()}},i.TableRendererUtils._copyMetadata=function(e,t,n){if(i.FlattenedTreeTableDataSource&&n instanceof i.FlattenedTreeTableDataSource){var o,s=t.metadata;for(o in null==s&&(s=n._getMetadata(t.index)),s)s.hasOwnProperty(o)&&(e[o]=s[o])}},i.TableRendererUtils._getObjectPath=function(e,t){if(null!=e&&("string"==typeof t||t instanceof String)&&(-1!=t.indexOf(".")||-1!=t.indexOf("[")&&-1!=t.indexOf("]"))){var i=e,n=!1;if(t.split(".").map(function(e){if(null!=i&&-1!=e.indexOf("[")&&-1!=e.indexOf("]")){var t=e.substr(0,e.indexOf("[")),o=parseInt(e.substr(e.indexOf("[")+1,e.indexOf("]")-e.indexOf("[")-1),10);i=i[t][o],n=!0}else null!=i&&void 0!==i[e]&&(i=i[e],n=!0)}),n)return i}else if(null==e)return null;return e[t]},i.TableRendererUtils._getVal=function(e){return"function"==typeof e?e():e},i.TableResizeUtils=function(e){this.component=e,this.options=e.options,this.Init()},i.Object.createSubclass(i.TableResizeUtils,i.Object,"oj.TableResizeUtils"),i.TableResizeUtils.prototype.Init=function(){i.TableResizeUtils.superclass.Init.call(this)},i.TableResizeUtils.prototype.setResizeCursor=function(e){var t=this.component._getEventTargetElement(e),i=this.component._getTableDomUtils().getElementColumnIdx(t);if(null==i)return!1;if(this.component._getColumnDefs()[i].resizable==this.component._OPTION_DISABLED&&this._resizeStartColumnIdx!==i-1&&this._resizeStartColumnIdx!==i+1)return!1;if(null==this._resizeStartColumnIdx)return null!==this._isHeaderColumnResizeStart(e)?(t.style.cursor="col-resize",!0):(t.style.cursor="",!1);var n=this.component._getTableDomUtils().getTableHeaderColumns();if(!n)return!1;var o=n.length;if(i==this._resizeStartColumnIdx||this._resizeColumnStart&&i==this._resizeStartColumnIdx-1||!this._resizeColumnStart&&i==this._resizeStartColumnIdx+1){if(0==this._resizeStartColumnIdx&&this._resizeColumnStart)return!1;if(this._resizeStartColumnIdx==o-1&&!this._resizeColumnStart)return!1;var s=this.component._getTableDomUtils().getTableHeaderColumnResizeIndicator();if(null!=s){if("rtl"===this.component._GetReadingDirection()){var r=e.target.getBoundingClientRect();this._resizeColumnStart?s.style.left=this._getPageX(e)-r.left+r.width+"px":s.style.left=this._getPageX(e)-r.left+"px"}else s.style.left=this._getPageX(e)+"px";return!0}}return!1},i.TableResizeUtils.prototype.handleHeaderColumnResizeStart=function(e){var t=this.component._getEventTargetElement(e),i=this.component._getTableDomUtils().getElementColumnIdx(t);if(null!=i){var n=this.component._getColumnDefs()[i];if(this._resizeColumnStart=this._isHeaderColumnResizeStart(e),n.resizable==this.component._OPTION_ENABLED&&null!==this._resizeColumnStart)return this._resizeStartColumnIdx=i,this._resizeStartPageX=this._getPageX(e),this._setTableHeaderColumnsResizeStyling(),this._setTableHeaderColumnResizeIndicator(i),!0}return this._resizeStartColumnIdx=null,this._resizeStartPageX=null,!1},i.TableResizeUtils.prototype.handleHeaderColumnResizeEnd=function(e){var t=this.component._getEventTargetElement(e),i=this.component._getTableDomUtils().getElementColumnIdx(t);if(null!==i&&i===this._resizeStartColumnIdx||this._resizeColumnStart&&i===this._resizeStartColumnIdx-1||!this._resizeColumnStart&&i===this._resizeStartColumnIdx+1){var n=this.component._getTableDomUtils().getTableHeaderColumn(this._resizeStartColumnIdx);if(null!=n){var o,s,r=n.getBoundingClientRect().width;if(s=this._resizeColumnStart?this._resizeStartPageX-this._getPageX(e):this._getPageX(e)-this._resizeStartPageX,Math.abs(s)>2){o=r+s;var a,l,u,h=[],d=this.options.columns.length;for(a=0;a<d;a++)h[a]=$.extend({},{},this.options.columns[a]);if(h[this._resizeStartColumnIdx].width=o,this._resizeColumnStart&&(u=this._resizeStartColumnIdx-1,l=this.component._getTableDomUtils().getTableHeaderColumn(u))){var c=l.getBoundingClientRect().width;h[u].width=c-s}return this.component.option("columns",h,{_context:{writeback:!0,internalSet:!0}}),this.component._clearCachedMetadata(),this.component._refresh(),this.clearTableHeaderColumnsResize(),!0}}}return this.clearTableHeaderColumnsResize(),!1},i.TableResizeUtils.prototype.clearTableHeaderColumnsResize=function(){this._resizeStartColumnIdx=null,this._resizeColumnStart=null,this._resizeStartPageX=null,this._clearTableHeaderColumnsResizeStyling(),this.component._getTableDomUtils().removeTableHeaderColumnResizeIndicator()},i.TableResizeUtils.prototype._getPageX=function(e){return void 0!==e.pageX?e.pageX:void 0!==e.changedTouches?e.changedTouches[0].pageX:0},i.TableResizeUtils.prototype._isHeaderColumnResizeStart=function(e){var t=null,n=e.target.getBoundingClientRect(),o=Math.abs(this._getPageX(e)-n.left),s=Math.abs(this._getPageX(e)-n.right);return o<=i.TableResizeUtils.RESIZE_OFFSET?t="rtl"!==this.component._GetReadingDirection():s<=i.TableResizeUtils.RESIZE_OFFSET&&(t="rtl"===this.component._GetReadingDirection()),t},i.TableResizeUtils.prototype._setTableHeaderColumnResizeIndicator=function(e){var t=this.component._getTableDomUtils().getTableHeaderColumnResizeIndicator();null==t&&(t=this.component._getTableDomUtils().createTableHeaderColumnResizeIndicator());var i=this.component._getTableDomUtils().getTable().getBoundingClientRect(),n=this.component._getTableDomUtils().getTableHeaderColumn(e).getBoundingClientRect(),o=t.getBoundingClientRect();t.style.height=i.height+"px",this._resizeColumnStart?("rtl"===this.component._GetReadingDirection()?t.style.left=n.left-o.left+n.width+"px":t.style.left=-1*o.left+n.left+"px",t.style.borderLeftWidth="2px",t.style.borderRightWidth="0"):("rtl"===this.component._GetReadingDirection()?t.style.left=n.left-o.left+"px":t.style.left=-1*o.left+n.left+n.width+"px",t.style.borderRightWidth="2px",t.style.borderLeftWidth="0")},i.TableResizeUtils.prototype._setTableHeaderColumnsResizeStyling=function(){this.component._getTableDomUtils().getTable().classList.add(i.TableResizeUtils.CSS_CLASSES._COLUMN_HEADER_RESIZING_CLASS)},i.TableResizeUtils.prototype._clearTableHeaderColumnsResizeStyling=function(){var e,t=this.component._getTableDomUtils().getTableHeaderColumns();if(t)for(e=0;e<t.length;e++)t[e].style.cursor="";this.component._getTableDomUtils().getTable().classList.remove(i.TableResizeUtils.CSS_CLASSES._COLUMN_HEADER_RESIZING_CLASS)},i.TableResizeUtils.RESIZE_OFFSET=10,i.TableResizeUtils.CSS_CLASSES={_COLUMN_HEADER_RESIZING_CLASS:"oj-table-column-header-resizing"},i.CustomElementBridge.registerMetadata("oj-table","baseComponent",{properties:{accessibility:{type:"Object",properties:{rowHeader:{type:"string"}}},as:{type:"string"},columns:{type:"Array<Object>",writeback:!0},columnsDefault:{type:"Object",properties:{className:{type:"string"},field:{type:"string"},footerClassName:{type:"string"},footerRenderer:{},footerStyle:{type:"string"},footerTemplate:{type:"string"},headerClassName:{type:"string"},headerRenderer:{},headerStyle:{type:"string"},headerTemplate:{type:"string"},headerText:{type:"string"},renderer:{},resizable:{type:"string"},sortable:{type:"string",enumValues:["auto","enabled","disabled","none"]},sortProperty:{type:"string"},style:{type:"string"},template:{type:"string"},width:{type:"number"}}},currentRow:{type:"Object",writeback:!0},data:{},display:{type:"string",enumValues:["list","grid"]},dnd:{type:"Object",properties:{drag:{type:"Object",properties:{rows:{type:"Object",properties:{dataTypes:{type:"string|Array<string>"},dragStart:{},drag:{},dragEnd:{}}}}},drop:{type:"Object",properties:{columns:{type:"Object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{},dragOver:{},dragLeave:{},drop:{}}},rows:{type:"Object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{},dragOver:{},dragLeave:{},drop:{}}}}},reorder:{type:"Object",properties:{columns:{type:"string",enumValues:["disabled","enabled"]}}}}},editMode:{type:"string",enumValues:["none","rowEdit"]},firstSelectedRow:{type:"Object",writeback:!0},horizontalGridVisible:{type:"string",enumValues:["auto","enabled","disabled"]},rowRenderer:{},scrollPolicy:{type:"string",enumValues:["auto","loadMoreOnScroll"]},scrollPolicyOptions:{type:"Object",properties:{fetchSize:{type:"number"},maxCount:{type:"number"}}},selection:{type:"Array<Object>",writeback:!0},selectionMode:{type:"Object",properties:{row:{type:"string",enumValues:["single","multiple"]},column:{type:"string",enumValues:["single","multiple"]}}},selectionRequired:{type:"boolean"},translations:{type:"Object",properties:{labelAccSelectionAffordanceBottom:{type:"string"},labelAccSelectionAffordanceTop:{type:"string"},labelDisableNonContiguousSelection:{type:"string"},labelEditRow:{type:"string",value:"Edit Row"},labelEnableNonContiguousSelection:{type:"string"},labelResize:{type:"string"},labelResizePopupSpinner:{type:"string"},labelResizePopupSubmit:{type:"string"},labelSelectAndEditRow:{type:"string",value:"Select And Edit Row"},labelSelectColum:{type:"string",value:"Select Column"},labelSelectRow:{type:"string",value:"Select Row"},labelSort:{type:"string",value:"Sort"},labelSortAsc:{type:"string",value:"Sort Ascending"},labelSortDsc:{type:"string",value:"Sort Descending"},msgColumnResizeWidthValidation:{type:"string",value:"Width value must be an integer."},msgFetchingData:{type:"string",value:"Fetching Data..."},msgInitializing:{type:"string",value:"Initializing..."},msgNoData:{type:"string",value:"No data to display."},msgScrollPolicyMaxCountDetail:{type:"string",value:"Please reload with smaller data set."},msgScrollPolicyMaxCountSummary:{type:"string",value:"Exceeded maximum rows for table scrolling."},msgStatusSortAscending:{type:"string",value:"{0} sorted in ascending order."},msgStatusSortDescending:{type:"string",value:"{0} sorted in descending order."}}},verticalGridVisible:{type:"string",enumValues:["auto","enabled","disabled"]}},methods:{getContextByNode:{},getDataForVisibleRow:{},refreshRow:{}},events:{animateEnd:{},animateStart:{},beforeCurrentRow:{},beforeRowEdit:{},beforeRowEditEnd:{},sort:{}},extension:{_INNER_ELEM:"table",_WIDGET_NAME:"ojTable"}}),i.CustomElementBridge.register("oj-table",{metadata:i.CustomElementBridge.getMetadata("oj-table")}),i.AttributeGroupHandler=function(e){this.Init(e)},i.Object.createSubclass(i.AttributeGroupHandler,i.Object,"oj.AttributeGroupHandler"),i.AttributeGroupHandler.prototype.Init=function(e){for(var t in this._assignments={},this._valueIndex=0,this._matchRules={},e)this.addMatchRule(t,e[t])},i.AttributeGroupHandler.prototype.getValueRamp=function(){return[]},i.AttributeGroupHandler.prototype.getValue=function(e){return this._matchRules[e]?this._matchRules[e]:(this._assignments[e]||(this._values||(this._values=this.getValueRamp().slice()),this._assignments[e]=this._values[this._valueIndex],this._valueIndex++,this._valueIndex==this._values.length&&(this._valueIndex=0)),this._assignments[e])},i.AttributeGroupHandler.prototype.getCategoryAssignments=function(){var e=[];for(var t in this._assignments)e.push({category:t,value:this._assignments[t]});return e},i.AttributeGroupHandler.prototype.addMatchRule=function(e,t){this._matchRules[e]=t},i.ColorAttributeGroupHandler=function(e){if(this._attributeValues=[],$(document.body).hasClass("oj-hicontrast"))this._attributeValues=i.ColorAttributeGroupHandler._DEFAULT_COLORS.slice();else{var t=i.ColorAttributeGroupHandler.__createAttrDiv();t&&(i.ColorAttributeGroupHandler.__processAttrDiv(t),t.remove()),i.ColorAttributeGroupHandler._colors.length>0?this._attributeValues=i.ColorAttributeGroupHandler._colors.slice():this._attributeValues=i.ColorAttributeGroupHandler._DEFAULT_COLORS.slice()}this.Init(e)},i.Object.createSubclass(i.ColorAttributeGroupHandler,i.AttributeGroupHandler,"oj.ColorAttributeGroupHandler"),i.ColorAttributeGroupHandler._DEFAULT_COLORS=["#237bb1","#68c182","#fad55c","#ed6647","#8561c8","#6ddbdb","#ffb54d","#e371b2","#47bdef","#a2bf39","#a75dba","#f7f37b"],i.ColorAttributeGroupHandler._STYLE_CLASSES=["oj-dvt-category1","oj-dvt-category2","oj-dvt-category3","oj-dvt-category4","oj-dvt-category5","oj-dvt-category6","oj-dvt-category7","oj-dvt-category8","oj-dvt-category9","oj-dvt-category10","oj-dvt-category11","oj-dvt-category12"],i.ColorAttributeGroupHandler._colors=null,i.ColorAttributeGroupHandler.prototype.getValueRamp=function(){return this._attributeValues},i.ColorAttributeGroupHandler.createAttrDiv=function(){return i.ColorAttributeGroupHandler.__createAttrDiv()},i.ColorAttributeGroupHandler.processAttrDiv=function(e){i.ColorAttributeGroupHandler.__processAttrDiv(e)},i.ColorAttributeGroupHandler.__createAttrDiv=function(){if(i.ColorAttributeGroupHandler._colors)return null;var e=$(document.createElement("div"));e.attr("style","display:none;"),e.attr("id","attrGps"),$(document.body).append(e);for(var t=0;t<i.ColorAttributeGroupHandler._STYLE_CLASSES.length;t++){var n=$(document.createElement("div"));n.addClass(i.ColorAttributeGroupHandler._STYLE_CLASSES[t]),e.append(n)}return e},i.ColorAttributeGroupHandler.__processAttrDiv=function(e){i.ColorAttributeGroupHandler._colors=[];for(var t=e.children(),n=0;n<t.length;n++){var o=$(t[n]).css("color");o&&i.ColorAttributeGroupHandler._colors.push(o)}};var ot={_SHAPE_REGEXP:/\d/,_SHAPE_ENUMS:{circle:!0,ellipse:!0,square:!0,rectangle:!0,diamond:!0,triangleUp:!0,triangleDown:!0,plus:!0,human:!0,star:!0},shapeParseFunction:function(e,t){var i=t||ot._SHAPE_ENUMS;return function(n,o,s,r){if(e[o]){if(ot._SHAPE_REGEXP.test(n))return n;if(i[n])return n;throw new Error("Found: '"+n+"'. Expected one of the following: "+Object.keys(t).toString())}return r(n)}}},st=function(e,t){this._path=t,this._root=e,this._delimiter="/"};st.prototype._resolveLeafObjectAndProperty=function(e,t,i,n){for(var o={};e&&t.indexOf(i)>-1;){var s=t.substring(0,t.indexOf(i));n&&void 0===e[s]&&(e[s]={}),e=e[s],t=t.substring(t.indexOf(i)+1,t.length)}return e&&(o.object=e,o.parameter=t),o},st.prototype._resolvePath=function(e){if(void 0===this._leaf){var t=this._resolveLeafObjectAndProperty(this._root,this._path,this._delimiter,e);this._leaf=t.object,this._param=t.parameter}},st.prototype.getValue=function(){return this._resolvePath(!1),void 0===this._leaf?void 0:this._leaf[this._param]},st.prototype.setValue=function(e,t){this._resolvePath(!0),!t&&this._leaf[this._param]||(this._leaf[this._param]=e)};var rt,at,lt={TEXT:function(e){var t={};return e&&(e.hasClass("oj-gauge-metric-label")?(t["font-size"]=!0,t.color=!0):e.hasClass("oj-treemap-node-header")&&(t["font-weight"]=!0)),lt._buildTextCssPropertiesObject(e,t)},BACKGROUND:function(e,t,i,n){return lt._buildCssBackgroundPropertiesObject(e)},ANIM_DUR:function(e){var t=e.css("animation-duration");if(t)return"ms"==t.slice(-2)?t=parseInt(t.slice(0,-2),10):"s"==t.slice(-1)&&(t=1e3*parseFloat(t.slice(0,-1))),t}};lt._INHERITED_FONT_COLOR="rgb(254, 0, 254)",lt._INHERITED_FONT_FAMILY="Times",lt._INHERITED_FONT_SIZE="1px",lt._INHERITED_FONT_WEIGHT="1",lt._INHERITED_FONT_STYLE="normal",lt._FONT_SIZE_BUFFER=4,lt._styleCache={},lt.defaultStyleProcessor=function(e,t){return e.css(t)},lt._buildCssBackgroundPropertiesObject=function(e){var t={};return e.css("border-top-color")&&(t.borderColor=e.css("border-top-color")),e.css("border-width")&&e.css("border-style")&&"none"!=e.css("border-style")&&(t.borderWidth=e.css("border-width")),e.css("background-color")&&(t.backgroundColor=e.css("background-color")),t},lt._buildTextCssPropertiesObject=function(e,t){var i={},n=e.css("font-family");return n&&n!==lt._INHERITED_FONT_FAMILY&&(i.fontFamily=n.replace(/"/g,"'")),!(n=e.css("font-size"))||n.indexOf("px")>-1&&parseFloat(n)<lt._FONT_SIZE_BUFFER||t["font-size"]||(i.fontSize=n),(n=e.css("font-weight"))&&n!==lt._INHERITED_FONT_WEIGHT&&!t["font-weight"]&&(i.fontWeight=n),(n=e.css("color"))&&n!==lt._INHERITED_FONT_COLOR&&!t.color&&(i.color=n),(n=e.css("font-style"))&&n!==lt._INHERITED_FONT_STYLE&&(i.fontStyle=n),i},lt.processStyles=function(e,t,n,o){for(var s=null,r=null,a="",l=0;l<n.length;l++)a=a+n[l]+" ";var u={},h={};for(var d in o){var c=o[d];c instanceof Array||(c=[c]);var p=lt._hasUncachedProperty(d,c);r||s||!p||((s=$(document.createElement("div"))).attr("style","display:none;"),e.append(s),s.attr("class",a),$(document.body).append(s),(r=$(document.createElement("div"))).css("font-size",lt._INHERITED_FONT_SIZE),r.css("color",lt._INHERITED_FONT_COLOR),r.css("font-weight",lt._INHERITED_FONT_WEIGHT),r.css("font-style",lt._INHERITED_FONT_STYLE),s.append(r)),u[d]=c,p&&(h[d]=lt._createStyleDivs(r,d,c))}var _=i.ColorAttributeGroupHandler.__createAttrDiv();for(var d in o)lt._processStyle(h[d],t,d,u[d]);_&&(i.ColorAttributeGroupHandler.__processAttrDiv(_),_.remove()),s&&s.remove()},lt._createStyleDivs=function(e,t,i){lt._styleCache[t]||(lt._styleCache[t]={});for(var n=null,o=0;o<i.length;o++){var s=i[o].property;if(s)void 0===lt._styleCache[t][s]&&(n||((n=$(document.createElement("div"))).addClass(t),e.append(n)))}return n},lt._processStyle=function(e,t,i,n){for(var o=0;o<n.length;o++){var s=n[o],r=s.property;if(r){var a=lt._styleCache[i][r];if(void 0===a&&e&&(a=lt._resolveStyle(e,r),lt._styleCache[i][r]=a),null!=a){var l=new st(t,s.path),u=l.getValue(),h="object"==typeof u;if(h&&u){var d=Object.keys(a);for(o=0;o<d.length;o++){var c=d[o];void 0===u[c]&&(u[c]=a[c])}}else l.setValue(a,h)}}}},lt._resolveStyle=function(e,t){var i=lt[t],n=i?i(e):lt.defaultStyleProcessor(e,t);return null==n||"string"==typeof n&&""==n.replace(/^\s+/g,"")?null:n},lt._hasUncachedProperty=function(e,t){var i=lt._styleCache[e];if(!i)return!0;for(var n=0;n<t.length;n++){var o=t[n].property;if(o)if(void 0===i[o])return!0}return!1},i.ShapeAttributeGroupHandler=function(e){this.Init(e)},i.Object.createSubclass(i.ShapeAttributeGroupHandler,i.AttributeGroupHandler,"oj.ShapeAttributeGroupHandler"),i.ShapeAttributeGroupHandler._attributeValues=["square","circle","diamond","plus","triangleDown","triangleUp","human"],i.ShapeAttributeGroupHandler.prototype.getValueRamp=function(){return i.ShapeAttributeGroupHandler._attributeValues},i.__registerWidget("oj.dvtBaseComponent",$.oj.baseComponent,{options:{trackResize:"on"},_ComponentCreate:function(){this._super(),this._renderCount=0,this._numDeferredObjs=0,this._optionsCopy=null,this._templateMap={};for(var e=this._GetComponentStyleClasses(),t=0;t<e.length;t++)this.element.addClass(e[t]);this._referenceDiv=$(document.createElement("div")),this._referenceDiv.attr("style","visibility:hidden;"),this.element.append(this._referenceDiv);var n=this.element[0].parentElement;n&&n._dvtcontext?this._context=n._dvtcontext:this._context=new dvt.Context(this.element[0],null,this._referenceDiv[0]),this._context.oj=i,this._context.setReadingDirection(this._GetReadingDirection()),this._context.setTooltipAttachedCallback(i.Components.subtreeAttached),this._context.setOverlayAttachedCallback(i.Components.subtreeAttached),this._context.setTooltipStyleClass("oj-dvt-tooltip"),this._context.setDatatipStyleClass("oj-dvt-datatip"),this._context.setFixContextCallback(this._FixRendererContext.bind(this)),this._context.setCustomElement(this._IsCustomElement()),$(document.body).hasClass("oj-hicontrast")&&dvt.Agent.setHighContrast(!0),this._component=this._CreateDvtComponent(this._context,this._HandleEvent,this),this._context.getStage().addChild(this._component),!1!==dvt.requireJS&&(this._setLocaleHelpers(),this._processTranslations()),this._LoadResources(),this._dataProviderEventListeners=[],this.options._environment="jet",this.options._widgetConstructor=i.Components.__GetWidgetConstructor(this.element)},_AfterCreate:function(){this._super(),"off"!=this.options.trackResize&&this._addResizeListener(),this._ProcessOptions(),this._Render()},refresh:function(){this._super(),this._context.setReadingDirection(this._GetReadingDirection()),this._processTranslations(),this._Render()},getNodeBySubId:function(e){var t=this._component&&this._component.getAutomation?this._component.getAutomation():null;if(t){var i=this._ConvertLocatorToSubId(e);return t.getDomElementForSubId(i)}return null},getSubIdByNode:function(e){var t=this._component&&this._component.getAutomation?this._component.getAutomation():null;if(t){var i=t.getSubIdForDomElement(e);return i?this._ConvertSubIdToLocator(i):null}return null},_ConvertLocatorToSubId:function(e){return null},_ConvertSubIdToLocator:function(e){return null},_ProcessStyles:function(){lt.processStyles(this.element,this.options,this._GetComponentStyleClasses(),this._GetChildStyleClasses())},_GetComponentStyleClasses:function(){return["oj-dvtbase"]},_GetChildStyleClasses:function(){var e={"oj-dvt-no-data-message":{path:"_statusMessageStyle",property:"TEXT"}};return e},_GetEventTypes:function(){return[]},_GetTranslationMap:function(){var e=this.options.translations,t={"DvtUtilBundle.CLEAR_SELECTION":e.labelClearSelection,"DvtUtilBundle.COLON_SEP_LIST":e.labelAndValue,"DvtUtilBundle.INVALID_DATA":e.labelInvalidData,"DvtUtilBundle.NO_DATA":e.labelNoData,"DvtUtilBundle.DATA_VISUALIZATION":e.labelDataVisualization,"DvtUtilBundle.STATE_SELECTED":e.stateSelected,"DvtUtilBundle.STATE_UNSELECTED":e.stateUnselected,"DvtUtilBundle.STATE_MAXIMIZED":e.stateMaximized,"DvtUtilBundle.STATE_MINIMIZED":e.stateMinimized,"DvtUtilBundle.STATE_EXPANDED":e.stateExpanded,"DvtUtilBundle.STATE_COLLAPSED":e.stateCollapsed,"DvtUtilBundle.STATE_ISOLATED":e.stateIsolated,"DvtUtilBundle.STATE_HIDDEN":e.stateHidden,"DvtUtilBundle.STATE_VISIBLE":e.stateVisible,"DvtUtilBundle.SCALING_SUFFIX_THOUSAND":e.labelScalingSuffixThousand,"DvtUtilBundle.SCALING_SUFFIX_MILLION":e.labelScalingSuffixMillion,"DvtUtilBundle.SCALING_SUFFIX_BILLION":e.labelScalingSuffixBillion,"DvtUtilBundle.SCALING_SUFFIX_TRILLION":e.labelScalingSuffixTrillion,"DvtUtilBundle.SCALING_SUFFIX_QUADRILLION":e.labelScalingSuffixQuadrillion},n=i.LocaleData.getMonthNames("abbreviated");return t["DvtUtilBundle.MONTH_SHORT_JANUARY"]=n[0],t["DvtUtilBundle.MONTH_SHORT_FEBRUARY"]=n[1],t["DvtUtilBundle.MONTH_SHORT_MARCH"]=n[2],t["DvtUtilBundle.MONTH_SHORT_APRIL"]=n[3],t["DvtUtilBundle.MONTH_SHORT_MAY"]=n[4],t["DvtUtilBundle.MONTH_SHORT_JUNE"]=n[5],t["DvtUtilBundle.MONTH_SHORT_JULY"]=n[6],t["DvtUtilBundle.MONTH_SHORT_AUGUST"]=n[7],t["DvtUtilBundle.MONTH_SHORT_SEPTEMBER"]=n[8],t["DvtUtilBundle.MONTH_SHORT_OCTOBER"]=n[9],t["DvtUtilBundle.MONTH_SHORT_NOVEMBER"]=n[10],t["DvtUtilBundle.MONTH_SHORT_DECEMBER"]=n[11],t},_VerifyConnectedForSetup:function(){return!0},_SetupResources:function(){this._super(),this._addDataProviderEventListeners()},_ReleaseResources:function(){this._super(),this._removeDataProviderEventListeners()},_processTranslations:function(){var e=this._GetTranslationMap();dvt.Bundle.addLocalizedStrings(e)},_setLocaleHelpers:function(){var e={};e.numberConverterFactory=i.Validation.getDefaultConverterFactory("number"),e.isoToDateConverter=function(e){if("string"==typeof e){var t=i.IntlConverterUtils.isoToDate(e),n=t.toJSON()?i.IntlConverterUtils.dateToLocalIso(t):e;return i.IntlConverterUtils.isoToLocalDate(n)}return e},e.dateToIsoWithTimeZoneConverter=function(e){if(e instanceof Date){var t=-1*e.getTimezoneOffset(),n=t>=0?"+":"-",o=Math.floor(Math.abs(t)/60),s=Math.abs(t)%60,r=n+(2!==o.toString().length?"0"+o:o)+":"+(2!==s.toString().length?s+"0":s);return i.IntlConverterUtils.dateToLocalIso(e)+r}return e},this._context.setLocaleHelpers(e)},_destroy:function(){this._context.hideTooltips(),this._context.destroy(),this._context=null;var e=this.element[0].parentElement;e&&e._dvtcontext&&(e._dvtcontext=null),this._component.destroy&&this._component.destroy(),this._component=null,this._removeResizeListener(),this._CleanAllTemplates(),this.element.children().remove(),this.element.removeAttr("role").removeAttr("tabIndex").removeAttr("aria-activedescendant");for(var t=this._GetComponentStyleClasses(),i=0;i<t.length;i++)this.element.removeClass(t[i]);this._MakeReady(),this._super()},_setOptions:function(e,t){this._superApply(arguments);var i=this.options.trackResize;if("off"==i&&this._resizeListener?this._removeResizeListener():"off"==i||this._resizeListener||this._addResizeListener(),this._ProcessOptions(),!this._bUserDrivenChange){var n=!1,o=this._GetEventTypes(),s=["highlightedCategories","selection","dataCursorPosition"];$.each(e,function(e,t){if(o.indexOf(e)<0&&s.indexOf(e)<0)return n=!0,!1}),n?this._Render():(void 0!==e.highlightedCategories&&this._component.highlight(e.highlightedCategories),void 0!==e.selection&&this._component.select(e.selection),void 0!==e.dataCursorPosition&&this._component.positionDataCursor&&this._component.positionDataCursor(e.dataCursorPosition))}},_CreateDvtComponent:function(e,t,i){return null},_HandleEvent:function(e){var t=e.type;"selection"===t?this._UserOptionChange("selection",e.selection):"categoryHide"===t||"categoryShow"===t?this._UserOptionChange("hiddenCategories",e.hiddenCategories):"categoryHighlight"===t?this._UserOptionChange("highlightedCategories",e.categories):"optionChange"===t?this._UserOptionChange(e.key,e.value,e.optionMetadata):"touchHoldRelease"===t&&this._GetContextMenu()?this._OpenContextMenu($.Event(e.nativeEvent),"touch"):"ready"===t&&0===this._numDeferredObjs&&this._MakeReady()},_addResizeListener:function(){this._resizeListener||(this._resizeListener=this._handleResize.bind(this),i.DomUtils.addResizeListener(this.element[0],this._resizeListener,250))},_removeResizeListener:function(){this._resizeListener&&(i.DomUtils.removeResizeListener(this.element[0],this._resizeListener),this._resizeListener=null)},_handleResize:function(e,t){var i=this.element.width(),n=this.element.height();(null==this._width||null==this._height||Math.abs(i-this._width)+Math.abs(n-this._height)>=5)&&this._Render(!0)},_LoadResources:function(){},_Render:function(e){this._context.hideTooltips(),this._NotReady(),this._context.isReadyToRender()?(this._width=this._IsFlowingLayoutSupported()?null:this.element.width(),this._height=this._IsFlowingLayoutSupported()?null:this.element.height(),this._context.setDefaultFontFamily(this._referenceDiv.css("font-family")),this.options._width=this._width,this.options._height=this._height,this.options._locale=i.Config.getLocale(),this._IsDraggable()&&this.element.attr("draggable",!0),this._ProcessStyles(),this._renderCount++,e?0===this._numDeferredObjs&&this._RenderComponent(this._optionsCopy,e):this._resolveDeferredDataItems()&&this._RenderComponent(this._optionsCopy),this._renderNeeded=!1):(this._renderNeeded=!0,this._MakeReady())},_IsDraggable:function(){return!!this.options.dnd},_NotifyShown:function(){this._super(),this._notifyShownAttached()},_NotifyAttached:function(){this._super(),this._notifyShownAttached()},_NotifyDetached:function(){this._super(),this._notifyHiddenDetached()},_NotifyHidden:function(){this._super(),this._notifyHiddenDetached()},_notifyShownAttached:function(){this._renderNeeded&&this._Render()},_notifyHiddenDetached:function(){this._context.hideTooltips(),this._MakeReady()},_UserOptionChange:function(e,t,i){this._bUserDrivenChange=!0,this.option(e,t,{_context:{writeback:!0,optionMetadata:i,internalSet:!0}}),this._bUserDrivenChange=!1},_NotifyContextMenuGesture:function(e,t,i){if("touch"!==i)if("keyboard"===i){var n=this.element[0].getBoundingClientRect(),o=this._component.getKeyboardFocus()?this._component.getKeyboardFocus().getBoundingClientRect():null,s=o?"left+"+(o.left+.5*o.width-n.left)+" top+"+(o.top+.5*o.height-n.top):"center";this._OpenContextMenu(t,i,{position:{at:s}})}else this._super(e,t,i)},_GetDvtComponent:function(e){var t=i.Components.__GetWidgetConstructor(e)("instance");return t?t._component:null},_GetStringFromIndexPath:function(e){for(var t="",i=0;i<e.length;i++)t+="["+e[i]+"]";return t},_GetIndexPath:function(e){for(var t=[],i=0;e.indexOf("[",i)>0;){var n=e.indexOf("[",i)+1,o=e.indexOf("]",i);t.push(Number(e.substring(n,o))),i=o+1}return t},_GetFirstIndex:function(e){return Number(this._GetFirstBracketedString(e))},_GetFirstBracketedString:function(e){var t=e.indexOf("[")+1,i=e.indexOf("]");return e.substring(t,i)},_GetComponentDeferredDataPaths:function(){return{}},_GetComponentNoClonePaths:function(){if(!this._noClonePaths){this._noClonePaths={};var e=this,t=this._GetComponentDeferredDataPaths().root;t&&t.forEach(function(t){e._noClonePaths[t]=!0})}return this._noClonePaths},_resolveDeferredDataItems:function(){this._optionsCopy=dvt.JsonUtils.clone(this.options,null,this._GetComponentNoClonePaths()),this._FixCustomRenderers(this._optionsCopy),this._numDeferredObjs=0;var e=this,t=this._GetComponentDeferredDataPaths();for(var i in t){t[i].forEach(function(t){if("root"===i)e._resolveDeferredDataItem.bind(e)(e.options,e._optionsCopy,t);else{var n=e.options[i];if(n&&n instanceof Array)for(var o=0;o<n.length;o++)e._resolveDeferredDataItem.bind(e)(n[o],e._optionsCopy[i][o],t)}})}return 0===this._numDeferredObjs},_resolveDeferredDataItem:function(e,t,n){var o=new st(e,n),s=o.getValue();if(s instanceof Function?s=Promise.resolve(s(this._GetDataContext(e))):this._IsCustomElement()&&Array.isArray(s)&&(s=Promise.resolve(s),o.setValue(s,!0)),s&&i.DataProviderFeatureChecker.isIteratingDataProvider(s)){var r=this;s=new Promise(function(e,t){var i=r._getTemplateEngine(),n=r._fetchAllData(s);Promise.all([i,n]).then(function(t){r._dataObjects=t[1];var i=r._ProcessTemplates(t[1],t[0]);e(i)})})}if(s instanceof Promise){var a=this._renderCount;r=this;s.then(function(e){e.paths?r._renderDeferredData(a,t,e.paths,e.values):r._renderDeferredData(a,t,[n],[e])},function(e){r._renderDeferredData(a,t,[n],[[]])}),this._numDeferredObjs++}},_renderDeferredData:function(e,t,i,n){if(e===this._renderCount){this._numDeferredObjs--;for(var o=0;o<i.length;o++)new st(t,i[o]).setValue(n[o],!0);0===this._numDeferredObjs&&(this._RenderComponent(this._optionsCopy),this._optionsCopy=null)}},_fetchAllData:function(e){var t={data:[],keys:[]},i=e.fetchFirst({size:-1})[Symbol.asyncIterator](),n=function(e){for(var o=0;o<e.value.data.length;o++)t.data.push(e.value.data[o]),t.keys.push(e.value.metadata[o].key);return e.done?Promise.resolve(t):i.next().then(n)};return i.next().then(n)},_getTemplateEngine:function(){return this._templateEnginePromise?this._templateEnginePromise:(this._templateEnginePromise=new Promise(function(e,t){i.Config.__getTemplateEngine().then(function(t){e(t)},function(e){throw"Error loading template engine: "+e})}),this._templateEnginePromise)},getTemplates:function(){return i.BaseCustomElementBridge.getSlotMap(this.element[0])},_ProcessTemplates:function(e,t){var n=this._GetSimpleDataProviderConfig(),o=n.templateName,s=n.templateElementName,r=n.resultPath;if(o&&s&&r){var a=this.options.as,l=this.getTemplates()[o],u=Object.keys(i.CustomElementBridge.getMetadata(s).properties),h=this.element[0],d=e.data,c=e.keys,p=[],_=document.createElement("div");_.setAttribute("data-oj-context","");for(var m=document.createDocumentFragment(),g=0;g<d.length;g++){var f,v={data:d[g],key:c[g],index:g,componentElement:h};try{for(var C=t.execute(h,l[0],v,a),y=0;y<C.length;y++)if(C[y].tagName&&C[y].tagName.toLowerCase()===s){f=C[y];break}}catch(e){i.Logger.error(e)}p.push(f),m.appendChild(f)}_.appendChild(m),document.body.appendChild(_);return i.Context.getContext(_).getBusyContext().whenReady().then(function(){for(var e=[],i=0;i<d.length;i++){for(var n=p[i],o={id:c[i],_itemData:d[i]},s=0;s<u.length;s++){var a=n.getProperty(u[s]);void 0!==a&&(o[u[s]]=a)}e.push(o)}return t.clean(_),document.body.removeChild(_),_=null,{paths:[r],values:[e]}})}return Promise.resolve({paths:[],values:[]})},_GetSimpleDataProviderConfig:function(){return{}},_RenderComponent:function(e,t){if(this._context.isReadyToRender()){this._CleanAllTemplates();var i=this._IsFlowingLayoutSupported()&&this._resizeListener;i&&this._removeResizeListener(),this._component.render(t?null:e,this._width,this._height),i&&this._addResizeListener(),this.element.attr("role")?this.element.attr("tabindex",0):this.element.attr("tabindex",null)}else this._renderNeeded=!0,this._MakeReady()},_GetDataProviderEventHandler:function(e,t){var n=this,o=function(e,t){if(!t)return[];for(var n=new i.KeySetImpl(t),o=new Map,s=0;s<e.keys.length;s++){var r=e.keys[s],a=n.get(r);null!=a&&o.set(a,s)}var l=[];return t.forEach(function(e){l.push(o.get(e))}),l},s=function(i){Promise.all([i,n._getTemplateEngine()]).then(function(i){n._dataObjects=i[0];var o=n._ProcessTemplates(i[0],i[1]),s="root"==t[0]?{}:e.options[t[0]];s[t[1]]=o,e._setOptions(s)})};return function(e){if("refresh"===e.type)s(n._fetchAllData(this));else if("mutate"===e.type){var t=e.detail.add,i=e.detail.remove,r=e.detail.update,a=n._dataObjects,l=function(e,t,i){var n=i?1:0,o=0;t.keys.forEach(function(i){a.data.splice(e[o],n,t.data[o]),a.keys.splice(e[o],n,i),o++}),s(Promise.resolve(a))};if(t)0==(d=t.indexes||o(a,t.afterKeys)).length&&d.push(a.data.length),Array.isArray(t.data)?l(d,t,!1):this.fetchByKeys({keys:t.keys}).then(function(e){if(e.results.size>0){var i=[];t.keys.forEach(function(t){i.push(e.results.get(t).data)}),t.data=i,l(d,t,!1)}});else if(i){for(var u=i.indexes||o(a,i.keys),h=0;h<u.length;h++)a.data.splice(u[h],1),a.keys.splice(u[h],1);s(Promise.resolve(a))}else if(r){var d=r.indexes||o(a,r.keys);Array.isArray(r.data)?l(d,r,!0):this.fetchByKeys({keys:r.keys}).then(function(e){if(e.results.size>0){var t=[];r.keys.forEach(function(i){t.push(e.results.get(i).data)}),r.data=t,l(d,r,!0)}})}}}},_addDataProviderEventListeners:function(){for(var e=this._GetComponentDeferredDataPaths(),t=Object.keys(e),n=0;n<t.length;n++)for(var o=t[n],s=e[o],r=0;r<s.length;r++){var a=s[r],l="root"===o?this.options[a]:this.options[o]?this.options[o][a]:null;if(l&&i.DataProviderFeatureChecker.isIteratingDataProvider(l)){var u=this._GetDataProviderEventHandler(this,[o,a]);l.addEventListener("mutate",u),l.addEventListener("refresh",u),this._dataProviderEventListeners.push({dataProvider:l,listener:u})}}},_removeDataProviderEventListeners:function(){for(var e=0;e<this._dataProviderEventListeners.length;e++){var t=this._dataProviderEventListeners[e],i=t.dataProvider,n=t.listener;i.removeEventListener("mutate",n),i.removeEventListener("refresh",n)}this._dataProviderEventListeners=[]},_GetDataContext:function(e){return{}},_IsFlowingLayoutSupported:function(){return!1},whenReady:function(){if(this._ready)return Promise.resolve(!0);if(!this._promise){var e=this;this._promise=new Promise(function(t){e._promiseResolve=t})}return this._promise},_NotReady:function(){if(this._ready=!1,0===this._numDeferredObjs&&!this._readyResolveFunc){var e=i.Context.getContext(this.element[0]).getBusyContext(),t={description:"The component identified by '"+this.element.attr("id")+"' is being loaded."};this._readyResolveFunc=e.addBusyState(t)}},_MakeReady:function(){this._promiseResolve&&(this._promiseResolve(!0),this._promiseResolve=null),this._ready=!0,this._promise=null,this._readyResolveFunc&&(this._readyResolveFunc(),this._readyResolveFunc=null)},_ProcessOptions:function(){var e=this.options.tooltip;e&&e._renderer&&(this.options.tooltip={renderer:this._GetTemplateRenderer(e._renderer,"tooltip")})},_WrapCustomElementRenderer:function(e){var t=this;return function(i){i._dvtcontext=t._context;var n=e(i);if(i._templateName&&i._templateCleanup&&t._AddTemplate(i._templateName,i._templateCleanup),n&&!0!==n.preventDefault&&n.insert){var o=n.insert;return o.classList&&o.classList.contains("oj-dvtbase")?t._GetDvtComponent(o):o}return null}},_FixCustomRenderers:function(e){if(this._IsCustomElement())for(var t=this._GetComponentRendererOptions(),i=0;i<t.length;i++){var n=t[i],o=new st(e,n),s=o.getValue();s&&o.setValue(this._WrapCustomElementRenderer(s),!0)}},_GetComponentRendererOptions:function(){return["tooltip/renderer"]},_GetTemplateRenderer:function(e,t){var i=this;return function(n){var o=document.createElement("div");o.style.display="none",e({parentElement:o,context:n});var s=o.children[0];return s?(i._AddTemplate(t,function(){$(o).remove()}),o.removeChild(s),$(o).remove(),s):null}},_GetTemplateDataRenderer:function(e,t){var i=this;return function(n){var o=document.createElement("div");o.style.display="none",o._dvtcontext=i._context,i.element.append(o),e({parentElement:o,data:n.data});var s=o.children[0];return s?(i._AddTemplate(t,function(){$(o).remove()}),"http://www.w3.org/2000/svg"===s.namespaceURI?(o.removeChild(s),$(o).remove(),s):i._GetDvtComponent(s)):null}},_CleanAllTemplates:function(){for(var e in this._templateMap)this._CleanTemplate(e);this._templateMap={}},_CleanTemplate:function(e){if(this._templateMap[e]){for(var t=this._templateMap[e].length,i=0;i<t;i++)this._templateMap[e][i]();this._templateMap[e]=[]}},_AddTemplate:function(e,t){this._templateMap[e]||(this._templateMap[e]=[]),this._templateMap[e].push(t)},_CompareOptionValues:function(e,t,n){switch(e){case"hiddenCategories":case"highlightedCategories":case"selection":return i.Object.compareValues(t,n);default:return this._super(e,t,n)}}},!0),rt={properties:{trackResize:{type:"string",enumValues:["on","off"]},translations:{properties:{labelAndValue:{type:"string"},labelClearSelection:{type:"string"},labelCountWithTotal:{type:"string"},labelDataVisualization:{type:"string"},labelInvalidData:{type:"string"},labelNoData:{type:"string"},stateCollapsed:{type:"string"},stateDrillable:{type:"string"},stateExpanded:{type:"string"},stateHidden:{type:"string"},stateIsolated:{type:"string"},stateMaximized:{type:"string"},stateMinimized:{type:"string"},stateSelected:{type:"string"},stateUnselected:{type:"string"},stateVisible:{type:"string"}}}},methods:{},extension:{_WIDGET_NAME:"dvtBaseComponent",_DVT_PARSE_FUNC:ot.shapeParseFunction}},i.CustomElementBridge.registerMetadata("dvtBaseComponent","baseComponent",rt),i.__registerWidget("oj.dvtTimeComponent",$.oj.dvtBaseComponent,{_GetEventTypes:function(){return["optionChange","viewportChange"]},_GetTranslationMap:function(){this.options.translations;var e=this._super(),t=i.LocaleData.getMonthNames("wide");e["DvtUtilBundle.MONTH_JANUARY"]=t[0],e["DvtUtilBundle.MONTH_FEBRUARY"]=t[1],e["DvtUtilBundle.MONTH_MARCH"]=t[2],e["DvtUtilBundle.MONTH_APRIL"]=t[3],e["DvtUtilBundle.MONTH_MAY"]=t[4],e["DvtUtilBundle.MONTH_JUNE"]=t[5],e["DvtUtilBundle.MONTH_JULY"]=t[6],e["DvtUtilBundle.MONTH_AUGUST"]=t[7],e["DvtUtilBundle.MONTH_SEPTEMBER"]=t[8],e["DvtUtilBundle.MONTH_OCTOBER"]=t[9],e["DvtUtilBundle.MONTH_NOVEMBER"]=t[10],e["DvtUtilBundle.MONTH_DECEMBER"]=t[11];var n=i.LocaleData.getDayNames("wide");e["DvtUtilBundle.DAY_SUNDAY"]=n[0],e["DvtUtilBundle.DAY_MONDAY"]=n[1],e["DvtUtilBundle.DAY_TUESDAY"]=n[2],e["DvtUtilBundle.DAY_WEDNESDAY"]=n[3],e["DvtUtilBundle.DAY_THURSDAY"]=n[4],e["DvtUtilBundle.DAY_FRIDAY"]=n[5],e["DvtUtilBundle.DAY_SATURDAY"]=n[6];var o=i.LocaleData.getDayNames("abbreviated");return e["DvtUtilBundle.DAY_SHORT_SUNDAY"]=o[0],e["DvtUtilBundle.DAY_SHORT_MONDAY"]=o[1],e["DvtUtilBundle.DAY_SHORT_TUESDAY"]=o[2],e["DvtUtilBundle.DAY_SHORT_WEDNESDAY"]=o[3],e["DvtUtilBundle.DAY_SHORT_THURSDAY"]=o[4],e["DvtUtilBundle.DAY_SHORT_FRIDAY"]=o[5],e["DvtUtilBundle.DAY_SHORT_SATURDAY"]=o[6],e},_HandleEvent:function(e){if("viewportChange"===e.type){var t=new Date(e.viewportStart).toISOString(),i=new Date(e.viewportEnd).toISOString(),n=e.minorAxisScale,o={viewportStart:t,viewportEnd:i,minorAxisScale:n};this._UserOptionChange("viewportStart",t),this._UserOptionChange("viewportEnd",i),this._UserOptionChange("minorAxis.scale",n),this._trigger("viewportChange",null,o)}else this._super(e)},_LoadResources:function(){null==this.options._resources&&(this.options._resources={});var e=this.options._resources;e.grabbingCursor=i.Config.getResourceUrl("resources/internal-deps/dvt/chart/hand-closed.cur"),e.grabCursor=i.Config.getResourceUrl("resources/internal-deps/dvt/chart/hand-open.cur");var t=i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME),n=t.createConverter({hour:"numeric",minute:"2-digit",second:"2-digit"}),o=t.createConverter({hour:"numeric",minute:"2-digit"}),s=t.createConverter({hour:"numeric"}),r=t.createConverter({month:"numeric",day:"2-digit"}),a=t.createConverter({month:"long"}),l={seconds:n,minutes:o,hours:s,days:r,weeks:r,months:a,quarters:a,years:t.createConverter({year:"numeric"})};e.converter=l,e.converterFactory=t,e.firstDayOfWeek=i.LocaleData.getFirstDayOfWeek()}}),i.CustomElementBridge.registerMetadata("dvtTimeComponent","dvtBaseComponent",{properties:{},methods:{getContextByNode:{}},extension:{_WIDGET_NAME:"dvtTimeComponent"}}),i.__registerWidget("oj.dvtBaseGauge",$.oj.dvtBaseComponent,{_ProcessStyles:function(){this._super(),this.options._thresholdColors=[this.options._threshold1,this.options._threshold2,this.options._threshold3],this.options._threshold1=null,this.options._threshold2=null,this.options._threshold3=null},_AfterCreate:function(){this._super();var e={_context:{writeback:!0,internalSet:!0,readOnly:!0}};this.option("rawValue",this.options.value,e)},_GetChildStyleClasses:function(){var e=this._super();return e["oj-gauge-metric-label"]={path:"metricLabel/style",property:"TEXT"},e["oj-gauge-tick-label"]={path:"tickLabel/style",property:"TEXT"},e["oj-gauge-threshold1"]={path:"_threshold1",property:"color"},e["oj-gauge-threshold2"]={path:"_threshold2",property:"color"},e["oj-gauge-threshold3"]={path:"_threshold3",property:"color"},e},_GetEventTypes:function(){return["input","optionChange"]},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtGaugeBundle.EMPTY_TEXT"]=e.labelNoData,t["DvtUtilBundle.GAUGE"]=e.componentName,t},_HandleEvent:function(e){if("valueChange"===e.type){var t=e.newValue;e.complete?this._UserOptionChange("value",t):(this._trigger("input",null,{value:t}),this._UserOptionChange("rawValue",t))}else this._super(e)},_setOption:function(e,t,n){if("rawValue"!==e){if("value"===e){var o={_context:{writeback:!0,internalSet:!0,readOnly:!0}};this.option("rawValue",t,o)}this._super(e,t,n)}else i.Logger.error("'rawValue' is a read-only option and cannot be set")},_ConvertLocatorToSubId:function(e){var t=e.subId;return"oj-dialgauge-tooltip"!=t&&"oj-ledgauge-tooltip"!=t&&"oj-ratinggauge-tooltip"!=t&&"oj-statusmetergauge-tooltip"!=t||(t="tooltip"),"oj-ratinggauge-item"==t&&null!=e.index&&(t="item["+e.index+"]"),t}},!0),i.__registerWidget("oj.ojDialGauge",$.oj.dvtBaseGauge,{widgetEventPrefix:"oj",options:{rawValue:void 0},_CreateDvtComponent:function(e,t,i){return this._focusable({element:this.element,applyHighlight:!0}),dvt.DialGauge.newInstance(e,t,i)},_ConvertSubIdToLocator:function(e){var t={};return"tooltip"==e&&(t.subId="oj-dialgauge-tooltip"),t},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-dialgauge"),e},_Render:function(){this.element.attr("title")?(this.options.shortDesc=this.element.attr("title"),this.element.data(this.element,"title",this.element.attr("title")),this.element.removeAttr("title")):this.element.data("title")&&(this.options.shortDesc=this.element.data("title")),this._setImages(),this._super()},_setImages:function(){var e=this.options.background;null==e&&(e="circleAlta",this.options.background="circleAlta");var t=this.options.indicator;if(null==t&&(t="needleAlta",this.options.indicator="needleAlta"),"string"==typeof e){var n=[{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/alta-circle-200x200.png"),width:200,height:200},{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/alta-circle-400x400.png"),width:400,height:400}];"rectangleAlta"===e?n=[{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/alta-rectangle-200x200.png"),width:200,height:154},{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/alta-rectangle-400x400.png"),width:400,height:309}]:"domeAlta"===e?n=[{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/alta-dome-200x200.png"),width:200,height:154},{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/alta-dome-400x400.png"),width:400,height:309}]:"circleAntique"===e?n=[{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/antique-circle-200x200.png"),width:200,height:200},{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/antique-circle-400x400.png"),width:400,height:400}]:"rectangleAntique"===e?n=[{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/antique-rectangle-200x200.png"),width:200,height:168},{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/antique-rectangle-400x400.png"),width:400,height:335}]:"domeAntique"===e?n=[{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/antique-dome-200x200.png"),width:200,height:176},{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/antique-dome-400x400.png"),width:400,height:352}]:"circleLight"===e?n=[{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/light-circle-200x200.png"),width:200,height:200},{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/light-circle-400x400.png"),width:400,height:400}]:"rectangleLight"===e?n=[{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/light-rectangle-200x200.png"),width:200,height:154},{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/light-rectangle-400x400.png"),width:400,height:307}]:"domeLight"===e?n=[{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/light-dome-200x200.png"),width:200,height:138},{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/light-dome-400x400.png"),width:400,height:276}]:"circleDark"===e?n=[{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/dark-circle-200x200.png"),width:200,height:200},{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/dark-circle-400x400.png"),width:400,height:400}]:"rectangleDark"===e?n=[{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/dark-rectangle-200x200.png"),width:200,height:154},{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/dark-rectangle-400x400.png"),width:400,height:307}]:"domeDark"===e&&(n=[{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/dark-dome-200x200.png"),width:200,height:138},{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/dark-dome-400x400.png"),width:400,height:276}]),this.options._backgroundImages=n}if("string"==typeof t){var o=[{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/alta-needle-1600x1600.png"),width:374,height:575}];"needleAntique"===t?o=[{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/antique-needle-1600x1600.png"),width:81,height:734}]:"needleDark"===t?o=[{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/dark-needle-1600x1600.png"),width:454,height:652}]:"needleLight"===t&&(o=[{src:i.Config.getResourceUrl("resources/internal-deps/dvt/gauge/light-needle-1600x1600.png"),width:454,height:652}]),this.options._indicatorImages=o}},getMetricLabel:function(){return this._component.getAutomation().getMetricLabel()}}),i.__registerWidget("oj.ojLedGauge",$.oj.dvtBaseGauge,{widgetEventPrefix:"oj",options:{borderColor:"",color:"#393737",label:{style:{},text:""},metricLabel:{converter:null,rendered:"off",scaling:"auto",style:{},text:"",textType:"number"},max:100,min:0,rotation:0,size:1,svgClassName:"",svgStyle:{},thresholds:[],tooltip:{renderer:null},type:"circle",value:null,visualEffects:"auto"},_CreateDvtComponent:function(e,t,i){return this._focusable({element:this.element,applyHighlight:!0}),dvt.LedGauge.newInstance(e,t,i)},_ConvertSubIdToLocator:function(e){var t={};return"tooltip"==e&&(t.subId="oj-ledgauge-tooltip"),t},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-ledgauge"),e},_Render:function(){this.element.attr("title")?(this.options.shortDesc=this.element.attr("title"),this.element.data(this.element,"title",this.element.attr("title")),this.element.removeAttr("title")):this.element.data("title")&&(this.options.shortDesc=this.element.data("title")),this._super()},getMetricLabel:function(){return this._component.getAutomation().getMetricLabel()}}),i.__registerWidget("oj.ojRatingGauge",$.oj.dvtBaseGauge,{widgetEventPrefix:"oj",options:{changed:!1,changedState:{borderColor:"",color:"#ED2C02",shape:"star",source:"",svgClassName:"",svgStyle:{}},hoverState:{borderColor:"",color:"#007CC8",shape:"star",source:"",svgClassName:"",svgStyle:{}},max:5,min:0,orientation:"horizontal",preserveAspectRatio:"meet",rawValue:null,readonly:!1,selectedState:{borderColor:"",color:"#F8C15A",shape:"star",source:"",svgClassName:"",svgStyle:{}},step:1,thresholds:[],tooltip:{renderer:null},unselectedState:{borderColor:"",color:"#C4CED7",shape:"star",source:"",svgClassName:"",svgStyle:{}},value:null,visualEffects:"auto"},_CreateDvtComponent:function(e,t,i){return this._focusable({element:this.element,applyHighlight:!0}),dvt.RatingGauge.newInstance(e,t,i)},_ConvertSubIdToLocator:function(e){var t={};return"tooltip"==e?t.subId="oj-ratinggauge-tooltip":0==e.indexOf("item")&&(t.subId="oj-ratinggauge-item",t.index=this._GetFirstIndex(e)),t},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-ratinggauge"),e},_Render:function(){this.element.attr("title")?(this.options.shortDesc=this.element.attr("title"),this.element.data(this.element,"title",this.element.attr("title")),this.element.removeAttr("title")):this.element.data("title")&&(this.options.shortDesc=this.element.data("title")),this._super()},_UserOptionChange:function(e,t){this._superApply(arguments),"value"==e&&this._UserOptionChange("changed",!0)}}),i.__registerWidget("oj.ojStatusMeterGauge",$.oj.dvtBaseGauge,{widgetEventPrefix:"oj",options:{angleExtent:360,animationOnDataChange:"none",animationOnDisplay:"none",animationDuration:void 0,borderColor:"",borderRadius:"auto",center:{renderer:null},color:"#393737",indicatorSize:1,innerRadius:.7,label:{position:"auto",style:{},text:""},max:100,metricLabel:{converter:null,position:"auto",rendered:"auto",scaling:"auto",style:{},text:"",textType:"number"},min:0,orientation:"horizontal",plotArea:{borderColor:void 0,borderRadius:"auto",color:void 0,rendered:"auto",svgClassName:"",svgStyle:{}},rawValue:null,readonly:!1,referenceLines:[],startAngle:90,step:null,svgClassName:"",svgStyle:{},tooltip:{renderer:null},thresholdDisplay:"onIndicator",thresholds:[],value:null,visualEffects:"auto"},_CreateDvtComponent:function(e,t,i){return this._focusable({element:this.element,applyHighlight:!0}),dvt.StatusMeterGauge.newInstance(e,t,i)},_ConvertSubIdToLocator:function(e){var t={};return"tooltip"==e&&(t.subId="oj-statusmetergauge-tooltip"),t},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-statusmetergauge"),e},_GetComponentRendererOptions:function(){return["tooltip/renderer","center/renderer"]},_ProcessOptions:function(){this._super();var e=this.options.center;e&&e._renderer&&(e.renderer=this._GetTemplateRenderer(e._renderer,"center"))},_GetChildStyleClasses:function(){var e=this._super();return e["oj-dvtbase oj-statusmetergauge"]={path:"animationDuration",property:"ANIM_DUR"},e},_Render:function(){this.element.attr("title")?(this.options.shortDesc=this.element.attr("title"),this.element.data(this.element,"title",this.element.attr("title")),this.element.removeAttr("title")):this.element.data("title")&&(this.options.shortDesc=this.element.data("title")),this._super()},getMetricLabel:function(){return this._component.getAutomation().getMetricLabel()}}),i.CustomElementBridge.registerMetadata("dvtBaseGauge","dvtBaseComponent",{properties:{translations:{properties:{componentName:{type:"string"}}}},methods:{},extension:{_WIDGET_NAME:"dvtBaseGauge"}}),function(){i.CustomElementBridge.registerMetadata("oj-led-gauge","dvtBaseGauge",{properties:{borderColor:{type:"string"},svgClassName:{type:"string"},color:{type:"string"},max:{type:"number"},metricLabel:{type:"object",properties:{converter:{type:"object"},rendered:{type:"string",enumValues:["on","off"]},scaling:{type:"string",enumValues:["auto","none","thousand","million","billion","trillion","quadrillion"]},style:{type:"object"},text:{type:"string"},textType:{type:"string",enumValues:["percent","number"]}}},min:{type:"number"},rotation:{type:"number",enumValues:["0","90","180","270"]},size:{type:"number"},svgStyle:{type:"object"},thresholds:{type:"Array<object>"},label:{type:"object",properties:{style:{type:"object"},text:{type:"string"}}},tooltip:{type:"object",properties:{renderer:{}}},type:{type:"string"},value:{type:"number",writeback:!0},visualEffects:{type:"string",enumValues:["none","auto"]},translations:{type:"Object",properties:{componentName:{type:"string",value:"Gauge"},labelAndValue:{type:"string",value:"{0}: {1}"},labelClearSelection:{type:"string",value:"Clear Selection"},labelCountWithTotal:{type:"string",value:"{0} of {1}"},labelDataVisualization:{type:"string",value:"Data Visualization"},labelInvalidData:{type:"string",value:"Invalid data"},labelNoData:{type:"string",value:"No data to display"},stateCollapsed:{type:"string",value:"Collapsed"},stateDrillable:{type:"string",value:"Drillable"},stateExpanded:{type:"string",value:"Expanded"},stateHidden:{type:"string",value:"Hidden"},stateIsolated:{type:"string",value:"Isolated"},stateMaximized:{type:"string",value:"Maximized"},stateMinimized:{type:"string",value:"Minimized"},stateSelected:{type:"string",value:"Selected"},stateUnselected:{type:"string",value:"Unselected"},stateVisible:{type:"string",value:"Visible"}}}},methods:{getMetricLabel:{}},extension:{_WIDGET_NAME:"ojLedGauge"}});var e=i.CustomElementBridge.getMetadata("oj-led-gauge");i.CustomElementBridge.register("oj-led-gauge",{metadata:e,parseFunction:e.extension._DVT_PARSE_FUNC({type:!0},{arrow:!0,square:!0,rectangle:!0,circle:!0,diamond:!0,triangle:!0,human:!0,star:!0})})}(),function(){i.CustomElementBridge.registerMetadata("oj-rating-gauge","dvtBaseGauge",{properties:{changed:{type:"boolean",writeback:!0},changedState:{type:"object",properties:{borderColor:{type:"string"},svgClassName:{type:"string"},color:{type:"string"},shape:{type:"string"},source:{type:"string"},svgStyle:{type:"object"}}},hoverState:{type:"object",properties:{borderColor:{type:"string"},svgClassName:{type:"string"},color:{type:"string"},shape:{type:"string"},source:{type:"string"},svgStyle:{type:"object"}}},max:{type:"number"},min:{type:"number"},orientation:{type:"string",enumValues:["vertical","horizontal"]},preserveAspectRatio:{type:"string",enumValues:["none","meet"]},readonly:{type:"boolean"},selectedState:{type:"object",properties:{borderColor:{type:"string"},svgClassName:{type:"string"},color:{type:"string"},shape:{type:"string"},source:{type:"string"},svgStyle:{type:"object"}}},step:{type:"number",enumValues:["1","0.5"]},transientValue:{type:"number",writeback:!0,readOnly:!0},thresholds:{type:"Array<object>"},tooltip:{type:"object",properties:{renderer:{}}},translations:{type:"Object",properties:{componentName:{type:"string",value:"Gauge"},labelAndValue:{type:"string",value:"{0}: {1}"},labelClearSelection:{type:"string",value:"Clear Selection"},labelCountWithTotal:{type:"string",value:"{0} of {1}"},labelDataVisualization:{type:"string",value:"Data Visualization"},labelInvalidData:{type:"string",value:"Invalid data"},labelNoData:{type:"string",value:"No data to display"},stateCollapsed:{type:"string",value:"Collapsed"},stateDrillable:{type:"string",value:"Drillable"},stateExpanded:{type:"string",value:"Expanded"},stateHidden:{type:"string",value:"Hidden"},stateIsolated:{type:"string",value:"Isolated"},stateMaximized:{type:"string",value:"Maximized"},stateMinimized:{type:"string",value:"Minimized"},stateSelected:{type:"string",value:"Selected"},stateUnselected:{type:"string",value:"Unselected"},stateVisible:{type:"string",value:"Visible"}}},unselectedState:{type:"object",properties:{borderColor:{type:"string"},svgClassName:{type:"string"},color:{type:"string"},shape:{type:"string"},source:{type:"string"},svgStyle:{type:"object"}}},value:{type:"number",writeback:!0},visualEffects:{type:"string",enumValues:["none","auto"]}},methods:{},extension:{_ALIASED_PROPS:{transientValue:"rawValue"},_WIDGET_NAME:"ojRatingGauge"}});var e=/\d/,t={circle:!0,square:!0,diamond:!0,triangle:!0,human:!0,star:!0},n={circle:!0,square:!0,diamond:!0,triangle:!0,human:!0,star:!0,dot:!0,none:!0},o={"changed-state.shape":!0,"hover-state.shape":!0,"selected-state.shape":!0,"unselected-state.shape":!0};i.CustomElementBridge.register("oj-rating-gauge",{metadata:i.CustomElementBridge.getMetadata("oj-rating-gauge"),parseFunction:function(i,s,r,a){if(o[s]||"unselected-state.shape"===s){if(e.test(i))return i;if(o[s]&&!t[s])throw"Found: "+i+". Expected: "+t.toString();if("unselected-state.shape"!==s||n[s])return i;throw"Found: "+i+". Expected: "+n.toString()}return a(i)}})}(),i.CustomElementBridge.registerMetadata("oj-status-meter-gauge","dvtBaseGauge",{properties:{angleExtent:{type:"number"},animationDuration:{type:"number"},animationOnDataChange:{type:"string",enumValues:["auto","none"]},animationOnDisplay:{type:"string",enumValues:["auto","none"]},borderColor:{type:"string"},borderRadius:{type:"string"},center:{type:"object",properties:{renderer:{}}},svgClassName:{type:"string"},color:{type:"string"},indicatorSize:{type:"number"},innerRadius:{type:"number"},max:{type:"number"},metricLabel:{type:"object",properties:{converter:{type:"object"},position:{type:"string",enumValues:["auto","center","insideIndicatorEdge","outsideIndicatorEdge","outsidePlotArea","withLabel"]},rendered:{type:"string",enumValues:["auto","on","off"]},scaling:{type:"string",enumValues:["auto","none","thousand","million","billion","trillion","quadrillion"]},style:{type:"object"},text:{type:"string"},textType:{type:"string",enumValues:["percent","number"]}}},min:{type:"number"},orientation:{type:"string",enumValues:["circular","horizontal","vertical"]},plotArea:{type:"object",properties:{borderColor:{type:"string"},borderRadius:{type:"string"},svgClassName:{type:"string"},color:{type:"string"},rendered:{type:"string",enumValues:["auto","on","off"]},svgStyle:{type:"object"}}},readonly:{type:"boolean"},referenceLines:{type:"Array<object>"},startAngle:{type:"number"},step:{type:"number"},svgStyle:{type:"object"},transientValue:{type:"number",writeback:!0,readOnly:!0},thresholdDisplay:{type:"string",enumValues:["currentOnly","all","onIndicator"]},thresholds:{type:"Array<object>"},translations:{type:"Object",properties:{componentName:{type:"string",value:"Gauge"},labelAndValue:{type:"string",value:"{0}: {1}"},labelClearSelection:{type:"string",value:"Clear Selection"},labelCountWithTotal:{type:"string",value:"{0} of {1}"},labelDataVisualization:{type:"string",value:"Data Visualization"},labelInvalidData:{type:"string",value:"Invalid data"},labelNoData:{type:"string",value:"No data to display"},stateCollapsed:{type:"string",value:"Collapsed"},stateDrillable:{type:"string",value:"Drillable"},stateExpanded:{type:"string",value:"Expanded"},stateHidden:{type:"string",value:"Hidden"},stateIsolated:{type:"string",value:"Isolated"},stateMaximized:{type:"string",value:"Maximized"},stateMinimized:{type:"string",value:"Minimized"},stateSelected:{type:"string",value:"Selected"},stateUnselected:{type:"string",value:"Unselected"},stateVisible:{type:"string",value:"Visible"}}},label:{type:"object",properties:{position:{type:"string",enumValues:["auto","center","start"]},style:{type:"object"},text:{type:"string"}}},tooltip:{type:"object",properties:{renderer:{}}},value:{type:"number",writeback:!0},visualEffects:{type:"string",enumValues:["none","auto"]}},methods:{getMetricLabel:{}},extension:{_ALIASED_PROPS:{transientValue:"rawValue"},_WIDGET_NAME:"ojStatusMeterGauge"}}),i.CustomElementBridge.register("oj-status-meter-gauge",{metadata:i.CustomElementBridge.getMetadata("oj-status-meter-gauge")}),function(){var e,t,n,o,s,r="/",a="oj_Router",l=" | ",u=1024,h="popstate",d="hasChanged",c={hasChanged:!1},p=!1,_=[],m=window.location,g="parameters";function f(e){return e?e.split("/"):[]}function v(e){return V(f(e)[0])}function C(e,t){var n=document.createElement("a");return n.href=m.href,void 0!==e.search&&(n.search=e.search),void 0!==e.pathname&&(n.pathname=e.pathname),n.search=function(e,t){var n,o,s="",r=e.indexOf(a);if(-1!==r){var l=e.indexOf("&",r);-1===l&&(l=e.length),n=e.substring(0,r),o=e.substr(l)}else n=e+(-1===e.indexOf("?")?"?":"&"),o="";t&&Object.getOwnPropertyNames(t).length>0?s=function(e){var t=JSON.stringify(e),n=encodeURIComponent(t),o=i.LZString.compressToEncodedURIComponent(t),s=!1,r=a+"=";o.length<=n.length&&(s=!0);r+=s?"1"+o:"0"+n;if(r.length>u)throw new Error("Size of bookmarkable data is too big.");return r}(t):n=n.substring(0,n.length-1);return n+s+o}(n.search,t),n.href.replace(/\?$/,"")}function y(e){return e._parentRouter?y(e._parentRouter)+"."+e._name:e._name}function b(e,t){var i;return e._childRouters.every(function(e){if(e._parentState){if(e._parentState===t)return i=e,!1}else i=e;return!0}),i}function S(e){var t=e.filter(function(e){return e.value!==e.router._stateId()});return i.Logger.option("level")===i.Logger.LEVEL_INFO&&(i.Logger.info("Potential changes are: "),t.forEach(function(e){i.Logger.info("   { router: %s, value: %s }",e.router&&y(e.router),e.value)})),t}function E(e){var t=this[e.router._name];void 0!==t&&(e.router._extra=t)}function T(){return _[0]&&_[0].cancel}function D(e){var t,n,o=e.charAt(0);if(e=e.slice(1),"0"===o)e=decodeURIComponent(e);else{if("1"!==o)throw new Error("Error retrieving bookmarkable data. Format is invalid");e=i.LZString.decompressFromEncodedURIComponent(e)}if(t=JSON.parse(e),i.Logger.option("level")===i.Logger.LEVEL_INFO)for(n in i.Logger.info("Bookmarkable data: "),t)i.Logger.info("   { router: %s, value: %s }",n,t[n]);return t}function A(e,t,i){var n;return e._childRouters.every(function(e){return!((!e._parentState||e._parentState===i)&&e.stateFromIdCallback(t))||(n=e,!1)}),n}function I(e){i.Router._transitionedToState.dispatch(e)}function O(e,t){this.router=e,this.value=t}function w(e){var t,i,n=e[e.length-1];for(n?(t=n.router,i=v(n.value)):(t=s,(i=s._defaultStateId)&&e.push(new O(t,i)));t=b(t,i);)(i=t._defaultStateId)&&e.push(new O(t,i));var o=function e(t){var i=[];return t._currentState()&&(i.push(new O(t)),t._childRouters.forEach(function(t){i=i.concat(e(t))})),i}(s),r=[];return o.forEach(function(t,i){var n=e[i];n&&t.router===n.router||r.unshift(t)}),e=r.concat(e)}function R(e,t,n){var o=e();return o||i.Logger.info("%s is false for state: %s",t,n),o}function x(e,t,i,n){return"function"==typeof e&&(t=t?t.then(function(t){return t&&(t=R(e,i,n)),t}):new Promise(function(t){t(R(e,i,n))})),t}function L(e){var t;return T()?Promise.resolve(!1):(i.Logger.info("Start _canExit."),t=e?null===(t=function e(t,i){var n,o=t._currentState();if(o){for(n=0;n<t._childRouters.length;n++)i=e(t._childRouters[n],i);i=x(o.viewModel&&o.viewModel.canExit?o.viewModel.canExit:o._canExit,i,"canExit",o._id)}return i}(e,null))?Promise.resolve(!0):t.then(function(e){return e&&!T()}):Promise.resolve(!0))}function N(e,t){if(T())return Promise.resolve();i.Logger.info("Start _canEnter.");var n=null;return e.forEach(function(e){var t=e.getState();t&&(n=x(t._canEnter,n,"canEnter",t._id))}),n=null===n?Promise.resolve({allChanges:e,origin:t}):n.then(function(i){var n;return i&&!T()&&(n={allChanges:e,origin:t}),n})}function P(e){if(!e)return Promise.resolve(c);var t,n=Promise.resolve().then(function(){i.Logger.info("Entering _updateAll."),i.Router._updating=!0}),o=e.allChanges;return o.forEach(function(o){t=o.router.currentState.peek(),n=n.then(function(){if(!T())return function(e,t){var n=e.router.stateFromIdCallback(v(e.router._stateId())),o=e.getState();return Promise.resolve().then(function(){i.Logger.option("level")===i.Logger.LEVEL_INFO&&i.Logger.info("Updating state of %s to %s.",y(e.router),e.value)}).then(n?n._exit:void 0).then(function(){var i,n,s,r=e.router;if("popState"===t){for(i=(n=r._navHistory.length)-1;i>=0;i--)if(r._navHistory[i]===e.value){s=!0,r._navHistory.splice(i,n-i);break}n-i==1&&(r._navigationType="back")}if(s||(delete r._navigationType,r._navHistory.push(v(r._stateId()))),e.value&&o){var a=f(e.value);o._paramOrder.forEach(function(e,t){var i=V(a[t+1]);i!==o._parameters[e]&&(o._parameters[e]=i)})}r._stateId(e.value)}).then(o?o._enter:void 0)}(o,e.origin)})}),n.then(function(){var e,n,s=!1;if(o.length){s=!T();var r=o[o.length-1];e=r.router,n=r.state}return i.Router._updating=!1,i.Logger.info("_updateAll returns %s.",String(s)),{hasChanged:s,router:e,oldState:t,newState:n}},function(e){return i.Router._updating=!1,Promise.reject(e)})}function M(e){var i;try{i=S(i=t.parse())}catch(e){return Promise.reject(e)}return N(i,e).then(P)}function j(e,t){if(i.Logger.option("level")===i.Logger.LEVEL_INFO){var n=t.path?"path="+t.path:"",o=t.deferredHandling?"deferredHandling=true":"",s=t.router?y(t.router):"null";i.Logger.info(">> %s: origin=%s router=%s %s %s",e,t.origin,s,n,o)}}function H(){var t,n=_[0];return j("Resolving",n),n.cancel?(j("Cancelled",n),t=Promise.resolve(c)):t=function(e){if(j("Executing",e),!e.deferredHandling){if("sync"===e.origin)return M();if("popState"===e.origin)return L(e.router).then(function(t){return t?M(e.origin):Promise.resolve(c)})}return e.router._go(e)}(n),t.then(function(t){if(j("Done with",_.shift()),!0===t[d]){var i,n=function e(t){if(!t)return{title:"",segment:""};var i=e(b(t,t._stateId()));if(""===i.title){var n=t._currentState();if(n){var o=n._title;void 0!==o?("function"==typeof o&&(o=o()),i.title=String(o)):void 0!==(o=n._label)&&(o=String(o),""!==i.segment&&(o+=l+i.segment),i.segment=o)}}return i}(s);""!==n.title?i=n.title:e&&e.length>0?(i=e,""!==n.segment&&(i+=l+n.segment)):i=n.segment,i!==window.document.title&&(window.document.title=i)}return I(t),t},function(e){return _=[],i.Logger.error("Error when executing transition: %o",e||"Unknown"),I(c),Promise.reject(e)})}function U(e){var t,n;j("Queuing  ",e);e.path,i.Context.getPageContext().getBusyContext();return 1===(n=_.push(e))?o=H():((t=_[n-2]).deferredHandling||(j("Cancelling",t),t.cancel=!0),o=o.then(H)),o}function k(){var e,t,n=v(s._stateId()),o=null;if(i.Logger.info("Handling popState event with URL: %s",m.href),n)for(e=0;e<s._childRouters.length;e++)if(n===(t=s._childRouters[e])._parentState){o=t;break}U({router:o,origin:"popState"})}function B(){p||(t||(t=new i.Router.urlPathAdapter),t.init(r),e=window.document.title,window.addEventListener(h,k,!1),i.Logger.info("Initializing rootInstance."),i.Logger.info("Base URL is %s",r),i.Logger.info("Current URL is %s",m.href),p=!0)}function F(e){var t=e;return t&&t.replace&&(t=(t=t.replace(/~/g,"~0")).replace(/\//g,"~1")),t}function V(e){var t=e;return t&&t.replace&&(t=(t=t.replace(/~1/g,"/")).replace(/~0/g,"~")),t}O.prototype.getState=function(){return this.state||this.value&&(this.state=this.router.stateFromIdCallback(v(this.value))),this.state},O.prototype.addParameter=function(e){e&&(this.value+="/"+e)},i.Router=function(e,t,i){var n=this;function o(e,t){var i={};if(i.name=t.moduleConfig.name,e){var n={};i.params=n;var o=n.ojRouter={};o.parentRouter=t,Object.defineProperty(o,"direction",{get:function(){return t._navigationType},enumerable:!0});var s,r=o[g]={},a=e[g];Object.keys(a).forEach(function(e){s=a[e],r[e]=ko.observable(s)}),i.lifecycleListener=function(e){var i=t.currentState();i&&(i.viewModel=e.viewModel)}}return i}this._name=e,this._parentState=i||(t?v(t._stateId()):void 0),this._parentRouter=t,this._childRouters=[],this._extra=void 0,this._stateId=ko.observable(),this._stateIdComp=ko.pureComputed({read:function(){return v(this._stateId())},write:function(e){this.go(e).then(null,function(e){throw e})},owner:n}),this._states=null,this._defaultStateId=void 0,this._currentState=ko.pureComputed(function(){var e=v(n._stateId());return ko.ignoreDependencies(n.stateFromIdCallback,n,[e])}),this._currentValue=ko.pureComputed(function(){var e,t=v(n._stateId()),i=ko.ignoreDependencies(n.stateFromIdCallback,n,[t]);return i&&(e=i.value),e}),this._navigationType=void 0,this._navHistory=[],this._moduleConfig=Object.create(null,{name:{value:ko.pureComputed(function(){var e,t=v(this._stateId())||this._defaultStateId||this._states[0],i=this.stateFromIdCallback(t);return i&&((e=i.value)&&"string"==typeof e||(e=i._id)),e},n),enumerable:!0},params:{value:Object.create(null,{ojRouter:{value:new function(){Object.defineProperties(this,{parentRouter:{value:n,enumerable:!0},direction:{get:function(){return n._navigationType},enumerable:!0}})},enumerable:!0}}),enumerable:!0},lifecycleListener:{value:Object.create(null,{attached:{value:function(e){var t=ko.unwrap(e.valueAccessor()).params.ojRouter.parentRouter._currentState();t&&(t.viewModel=e.viewModel)},writable:!0,enumerable:!0}}),enumerable:!0}}),this._getObservableModuleConfig=function(){if(!this._observableModuleConfig){var e=n.currentState,t=e.peek(),i=ko.observable(o(t,n));e.subscribe(function(e){var t=i.peek();if(t.name!=function(e){var t="oj-blank";if(e)return(t=e.value)&&"string"==typeof t||(t=e._id),t}(e))i(o(e,n));else{var s,r=t.params.ojRouter[g];for(var a in r)s=e[g][a],r[a](s)}}),this._observableModuleConfig=i}return this._observableModuleConfig},Object.defineProperties(this,{parent:{value:this._parentRouter,enumerable:!0}})},Object.defineProperties(i.Router.prototype,{name:{get:function(){return this._name},enumerable:!0},states:{get:function(){return this._states},enumerable:!0},stateId:{get:function(){return this._stateIdComp},enumerable:!0},currentState:{get:function(){return this._currentState},enumerable:!0},currentValue:{get:function(){return this._currentValue},enumerable:!0},direction:{get:function(){return this._navigationType},enumerable:!0},defaultStateId:{get:function(){return this._defaultStateId},set:function(e){this._defaultStateId=e},enumerable:!0},moduleConfig:{get:function(){return this._moduleConfig},enumerable:!0},observableModuleConfig:{get:function(){return this._getObservableModuleConfig()},enumerable:!0}}),s=new i.Router("root",void 0,void 0),i.Router.prototype.getChildRouter=function(e){var t;return e&&"string"==typeof e&&(e=e.trim()).length>0&&this._childRouters.every(function(i){return i._name!==e||(t=i,!1)}),t},i.Router.prototype.getCurrentChildRouter=function(){return b(this,v(this._stateId()||this._defaultStateId))},i.Router.prototype.createChildRouter=function(e,t){var n,o,s;for(i.Assert.assertString(e),t=t||v(this._stateId()),e=encodeURIComponent(e.trim()),n=0;n<this._childRouters.length;n++){if((o=this._childRouters[n])._name===e)throw new Error('Invalid router name "'+e+'", it already exists.');if(o._parentState===t)throw new Error('Cannot create more than one child router for parent state id "'+o._parentState+'".')}return s=new i.Router(e,this,t),this._childRouters.push(s),s},i.Router.prototype.stateFromIdCallback=function(e){return function(e,t){var n;return t&&e._states&&(i.Assert.assertString(t),e._states.every(function(e){return e._id!==t||(n=e,!1)})),n}(this,e)},i.Router.prototype.configure=function(e){return this._stateId(void 0),delete this._defaultStateId,this._navigationType=void 0,this._navHistory=[],"function"==typeof e?(this._states=null,this.stateFromIdCallback=e):(this._states=[],delete this.stateFromIdCallback,Object.keys(e).forEach(function(t){var n=e[t];this._states.push(new i.RouterState(t,n,this)),"boolean"==typeof n.isDefault&&n.isDefault&&(this._defaultStateId=t)},this)),this},i.Router.prototype.getState=function(e){return this.stateFromIdCallback(e)},i.Router.prototype.go=function(e,t){return B(),t=t||[],Array.isArray(e)&&(e=e.map(F).join("/")),U({router:this,path:e,origin:"go",historyUpdate:t.historyUpdate})},i.Router.prototype._go=function(e){var o,s,r=!0,a=e.path,l=!1,u=!1;switch(e.historyUpdate){case"skip":u=!0;break;case"replace":l=!0}if(a){if("string"!=typeof a)return Promise.reject(new Error("Invalid object type for state id."));r=!1}if(r&&!(a=this._defaultStateId))return i.Logger.info(function(){return"Undefined state id with no default id on router "+y(this)}),Promise.resolve(c);if("/"===a.charAt(0))o=a;else{if(!(o=function e(t){var i,n;return t?(i=e(t._parentRouter))&&((n=t._stateId())?i+=n+"/":i=void 0):i="/",i}(this._parentRouter)))return Promise.reject(new Error('Invalid path "'+a+'". The parent router does not have a current state.'));o+=a}i.Logger.info("Destination path: %s",o);try{s=w(s=function(e,t){var i,o,s,r,a,l=[],u=[],h=e,d=f(t),c=0;for(d.splice(0,1);h;)u.unshift(h),h=h._parentRouter;for(;i=d.shift();){if(r){if(r._paramOrder[c]){a.addParameter(i),c++;continue}c=0}if(!(h=u.shift())&&!(h=A(o,i,s)))return n=t,l;if(!(r=(a=new O(h,i)).getState()))throw new Error('Invalid path "'+t+'". State id "'+i+'" does not exist on router "'+h._name+'".');l.push(a),o=h,s=i}return l}(this,o))}catch(e){return Promise.reject(e)}var h=S(s);return l||h.length>0?(i.Logger.info("Deferred mode or new state is different."),L(this).then(function(e){return e?N(h).then(P).then(function(e){if(e[d])if(u)i.Logger.info("Skip history update.");else{var n=t.buildUrlFromStates(s);i.Logger.info("%s URL to %s",l?"Replacing":"Pushing",n),window.history[l?"replaceState":"pushState"](null,"",n)}return e}):Promise.resolve(c)})):Promise.resolve(c)},i.Router.prototype.store=function(e){this._extra=e;for(var t,i,n,o,s={},r=this;r;)void 0!==r._extra&&(s[r._name]=r._extra),r=r._parentRouter;for(r=this;r;){for(i=0;i<r._childRouters.length;i++)if(n=r._childRouters[i],(o=v(r._stateId()))&&o===n._parentState){void 0!==n._extra&&(s[n._name]=n._extra),t=n;break}r=t,t=void 0}window.history.replaceState(null,"",C({},s))},i.Router.prototype.retrieve=function(){return this._extra},i.Router.prototype.dispose=function(){for(var n,o;this._childRouters.length>0;)this._childRouters[0].dispose();if(this._parentRouter){for(n=this._parentRouter._childRouters,o=0;o<n.length;o++)if(n[o]._name===this._name){n.splice(o,1);break}delete this._parentState}else r="/",t=null,this._name="root",window.document.title=e,window.removeEventListener(h,k),i.Router._transitionedToState.removeAll(),p=!1;delete this._navigationType,this._navHistory=[],this._states=null,delete this._defaultStateId,delete this._extra},i.Router._transitionedToState=new signals.Signal,i.Router._updating=!1,Object.defineProperties(i.Router,{rootInstance:{value:s,enumerable:!0},transitionedToState:{value:i.Router._transitionedToState,enumerable:!0}}),i.Router.defaults={},Object.defineProperties(i.Router.defaults,{urlAdapter:{get:function(){return t||(t=new i.Router.urlPathAdapter),t},set:function(e){if(p)throw new Error("Incorrect operation. Cannot change URL adapter after calling sync() or go().");t=e},enumerable:!0,readonly:!1},baseUrl:{get:function(){return r},set:function(e){if(p)throw new Error("Incorrect operation. Cannot change base URL after calling sync() or go().");r=e?e.match(/[^?#]+/)[0]:"/"},enumerable:!0,readonly:!1},rootInstanceName:{get:function(){return s._name},set:function(e){if(p)throw new Error("Incorrect operation. Cannot change the name of the root instance after calling sync() or go().");i.Assert.assertString(e),s._name=encodeURIComponent(e.trim())},enumerable:!0,readonly:!1}}),i.Router.sync=function(){var e={router:s,origin:"sync"};return B(),i.Logger.info("Entering sync with URL: %s",m.href),n?(e.path=n,e.deferredHandling=!0,e.historyUpdate="replace",n=void 0,U(e)):i.Router._updating?(i.Logger.info("Sync called while updating, waiting for updates to end."),new Promise(function(e){i.Router._transitionedToState.addOnce(function(t){i.Logger.info("Sync updates done."),e(t)})})):U(e)},i.Router.urlPathAdapter=function(){var e="";this.init=function(t){var i=document.createElement("a");i.href=t;var n=i.pathname;"/"!==(n=n.replace(/^([^\/])/,"/$1")).slice(-1)&&(n+="/"),e=n},this.parse=function(){var t,n,o,r,l=s,u=m.pathname.replace(e,""),h=f(decodeURIComponent(u)).map(V),d=[];for(i.Logger.info("Parsing: %s",u);l&&(n=h.shift());)(o=(r=new O(l,n)).getState())&&o._paramOrder.forEach(function(e){r.addParameter(h.shift())}),d.push(r),l=b(l,n);return d=w(d),(t=m.search.split(a+"=")[1])&&(t=t.split("&")[0])&&d.forEach(E,D(t)),d},this.buildUrlFromStates=function(t){for(var i,n=!1,o="",s={};i=t.pop();)i.value&&(n||i.value!==i.router._defaultStateId)&&(o=o?i.value+"/"+o:i.value,n=!0),void 0!==i.router._extra&&(s[i.router._name]=i.router._extra);return C({pathname:e+o},s)}},i.Router.urlParamAdapter=function(){this.init=function(){},this.parse=function(){var e,t,n,o,r,l=m.search,u=function(e){var t={};return(e=e.split("?")[1])&&e.split("&").forEach(function(e){var i,n=e.split(/\=(.+)?/),o=n[0];o.length&&(i=n[1]&&decodeURIComponent(n[1]),t[o]=i)}),t}(l),h=s,d=[];for(i.Logger.info("Parsing: %s",l);h;)t=u[h._name]||h._defaultStateId,t=(n=f(t)).shift(),r=new O(h,t),t&&((o=r.getState())&&o._paramOrder.forEach(function(e){r.addParameter(n.shift())}),d.push(r)),h=b(h,t);return d=w(d),(e=u[a])&&d.forEach(E,D(e)),d},this.buildUrlFromStates=function(e){for(var t,i,n,o=!1,s="",r={};t=e.pop();)t.value&&(o||t.value!==t.router._defaultStateId)&&(i="&"+t.router._name+"=",n=t.value,s=i+encodeURIComponent(n)+s,o=!0),void 0!==t.router._extra&&(r[t.router._name]=t.router._extra);return s&&(s="?"+s.substr(1)),C({search:s},r)}}}(),function(){i.LZString={compressToEncodedURIComponent:function(e){return null===e?"":function(e,t,i){if(null===e)return"";var n,o,s,r,a,l={},u={},h="",d=2,c=3,p=2,_="",m=0,g=0,f=e.length;for(a=0;a<f;a++)if(s=e[a],Object.prototype.hasOwnProperty.call(l,s)||(l[s]=c++,u[s]=!0),r=h+s,Object.prototype.hasOwnProperty.call(l,r))h=r;else{if(Object.prototype.hasOwnProperty.call(u,h)){if(h.charCodeAt(0)<256){for(n=p;n--;)m<<=1,g==t-1?(g=0,_+=i(m),m=0):g++;for(o=h.charCodeAt(0),n=8;n--;)m=m<<1|1&o,g==t-1?(g=0,_+=i(m),m=0):g++,o>>=1}else{for(o=1,n=p;n--;)m=m<<1|o,g==t-1?(g=0,_+=i(m),m=0):g++,o=0;for(o=h.charCodeAt(0),n=16;n--;)m=m<<1|1&o,g==t-1?(g=0,_+=i(m),m=0):g++,o>>=1}0==--d&&(d=Math.pow(2,p),p++),delete u[h]}else for(o=l[h],n=p;n--;)m=m<<1|1&o,g==t-1?(g=0,_+=i(m),m=0):g++,o>>=1;0==--d&&(d=Math.pow(2,p),p++),l[r]=c++,h=String(s)}if(""!==h){if(Object.prototype.hasOwnProperty.call(u,h)){if(h.charCodeAt(0)<256){for(n=p;n--;)m<<=1,g==t-1?(g=0,_+=i(m),m=0):g++;for(o=h.charCodeAt(0),n=8;n--;)m=m<<1|1&o,g==t-1?(g=0,_+=i(m),m=0):g++,o>>=1}else{for(o=1,n=p;n--;)m=m<<1|o,g==t-1?(g=0,_+=i(m),m=0):g++,o=0;for(o=h.charCodeAt(0),n=16;n--;)m=m<<1|1&o,g==t-1?(g=0,_+=i(m),m=0):g++,o>>=1}0==--d&&(d=Math.pow(2,p),p++),delete u[h]}else for(o=l[h],n=p;n--;)m=m<<1|1&o,g==t-1?(g=0,_+=i(m),m=0):g++,o>>=1;0==--d&&(d=Math.pow(2,p),p++)}for(o=2,n=p;n--;)m=m<<1|1&o,g==t-1?(g=0,_+=i(m),m=0):g++,o>>=1;for(;;){if(m<<=1,g==t-1){_+=i(m);break}g++}return _}(e,6,function(e){return n.charAt(e)})},decompressFromEncodedURIComponent:function(i){return null===i?"":""===i?null:function(e,i,n){var o,s,r,a,l,u,h,d=[],c=4,p=4,_=3,m="",g="",f={val:n(0),position:i,index:1};for(o=0;o<3;o+=1)d[o]=o;r=0,l=Math.pow(2,2),u=1;for(;u!=l;)a=f.val&f.position,f.position>>=1,0==f.position&&(f.position=i,f.val=n(f.index++)),r|=(a>0?1:0)*u,u<<=1;switch(r){case 0:for(r=0,l=Math.pow(2,8),u=1;u!=l;)a=f.val&f.position,f.position>>=1,0==f.position&&(f.position=i,f.val=n(f.index++)),r|=(a>0?1:0)*u,u<<=1;h=t(r);break;case 1:for(r=0,l=Math.pow(2,16),u=1;u!=l;)a=f.val&f.position,f.position>>=1,0==f.position&&(f.position=i,f.val=n(f.index++)),r|=(a>0?1:0)*u,u<<=1;h=t(r);break;case 2:return""}d[3]=h,s=g=h;for(;;){if(f.index>e)return"";for(r=0,l=Math.pow(2,_),u=1;u!=l;)a=f.val&f.position,f.position>>=1,0==f.position&&(f.position=i,f.val=n(f.index++)),r|=(a>0?1:0)*u,u<<=1;switch(h=r){case 0:for(r=0,l=Math.pow(2,8),u=1;u!=l;)a=f.val&f.position,f.position>>=1,0==f.position&&(f.position=i,f.val=n(f.index++)),r|=(a>0?1:0)*u,u<<=1;d[p++]=t(r),h=p-1,c--;break;case 1:for(r=0,l=Math.pow(2,16),u=1;u!=l;)a=f.val&f.position,f.position>>=1,0==f.position&&(f.position=i,f.val=n(f.index++)),r|=(a>0?1:0)*u,u<<=1;d[p++]=t(r),h=p-1,c--;break;case 2:return g}if(0==c&&(c=Math.pow(2,_),_++),d[h])m=d[h];else{if(h!==p)return null;m=s+s[0]}g+=m,d[p++]=s+m[0],s=m,0==--c&&(c=Math.pow(2,_),_++)}}(i.length,32,function(t){return function(t,i){var n;e||(e={});if(!e[t])for(e[t]={},n=0;n<t.length;n++)e[t][t[n]]=n;return e[t][i]}(n,i.charAt(t))})}};var e,t=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$"}(),at=/^{(\w+)}$/,i.RouterState=function(e,t,n){t=t||{},i.Assert.assertString(e);var o=(e=e.trim()).split("/");this._id=o.shift(),this._parameters={},this._paramOrder=new Array(o.length),o.forEach(function(e,t){var i=e.match(at);i&&(e=i[1],this._parameters[e]=null,this._paramOrder[t]=e)},this),this._canEnter=t.canEnter,this._canEnter&&i.Assert.assertFunctionOrNull(this._canEnter),this._enter=t.enter,this._enter&&i.Assert.assertFunctionOrNull(this._enter),this._canExit=t.canExit,this._canExit&&i.Assert.assertFunctionOrNull(this._canExit),this._exit=t.exit,this._exit&&i.Assert.assertFunctionOrNull(this._exit),this._value=t.value,this._label=t.label,this._title=t.title,this._router=n,this.viewModel=void 0,Object.defineProperties(this,{id:{value:this._id,enumerable:!0},value:{get:function(){return this._value},set:function(e){this._value=e},enumerable:!0},label:{get:function(){return this._label},set:function(e){this._label=e},enumerable:!0},title:{get:function(){return this._title},set:function(e){this._title=e},enumerable:!0},canEnter:{get:function(){return this._canEnter},set:function(e){this._canEnter=e},enumerable:!0},enter:{get:function(){return this._enter},set:function(e){this._enter=e},enumerable:!0},canExit:{get:function(){return this._canExit},set:function(e){this._canExit=e},enumerable:!0},exit:{get:function(){return this._exit},set:function(e){this._exit=e},enumerable:!0},parameters:{get:function(){return this._parameters},enumerable:!0}})},i.RouterState.prototype.go=function(){return this._router?this._router.go(this._id):(i.Router._transitionedToState.dispatch({hasChanged:!1}),Promise.reject(new Error("Router is not defined for this RouterState object.")))},i.RouterState.prototype.isCurrent=function(){if(!this._router)throw new Error("Router is not defined for this RouterState object.");return this._router._stateId()===this._id},i.Cube=function(e,t){this.Init(),this._rows=e,this._layout=t,this.BuildCube()},i.Object.createSubclass(i.Cube,i.Object,"oj.Cube"),i.Cube.prototype.Init=function(){i.Cube.superclass.Init.call(this)},i.Cube.prototype.getAxes=function(){var e=this._getPinnedCube(),t=[];Array.prototype.push.apply(t,e?e.getAxes():this._axes);for(var i=2;i<this._axes.length;i++)t.push(this._axes[i]);return t},i.Cube.prototype.getValues=function(e){for(var t=this._getPinnedCube(),i=t._normalizeIndices(e),n=t._walkIndex(i,0,[],[]),o=n;Array.isArray(o)&&1===o.length;)if(o=o[0],!Array.isArray(o))return o;return n},i.Cube.prototype.setPage=function(e){e instanceof Array?this._pin=e:this._pin=[e]},i.Cube.prototype.pivot=function(e,t,n,o,s){var r=this._layout,a=this._findAxisInLayout(e);if(!a)return!1;var l=null;n<r.length?l=this._findAxisInLayout(n):(l={axis:n,levels:[]},r.push(l));var u=a.levels,h=l.levels,d=t<u.length?u[t]:null;return!!d&&(o>=h.length?(h.push(d),u.splice(t,1)):s===i.Cube.PivotType.SWAP?(u[t]=h[o],h[o]=d):(s===i.Cube.PivotType.AFTER&&o++,h.splice(o,0,d),h===u&&o<t&&t++,u.splice(t,1)),this.BuildCube(),!0)},i.Cube.prototype._findAxisInLayout=function(e){for(var t=0;t<this._layout.length;t++)if(this._layout[t].axis===e)return this._layout[t];return null},i.Cube.prototype.getLayout=function(){return this._layout},i.Cube.PivotType={BEFORE:"before",AFTER:"after",SWAP:"swap"},i.Cube.prototype._walkIndex=function(e,t,i,n){if(0===e.length){var o=i.slice(0);return this._getValue(o)}var s=e.slice(1),r=e[0].start,a=e[0].count;for(i[t]=r;i[t]<r+a;i[t]++)n.push(this._walkIndex(s,t+1,i,[]));return n},i.Cube.prototype._normalizeIndices=function(e){var t=[];if(!e)return t;for(var i=Math.min(e.length,this._axes.length),n=0;n<i;n++){var o=e[n];o instanceof Object&&(o.hasOwnProperty("start")||o.hasOwnProperty("count"))?o.hasOwnProperty("start")?o.hasOwnProperty("count")?t.push(this._generateIndex(o.start,o.count,n)):t.push(this._generateIndex(o.start,1,n)):t.push(this._generateIndex(0,o.count,n)):t.push(this._generateIndex(o,1,n))}return t},i.Cube.prototype._generateIndex=function(e,t,i){var n=this.getAxes()[i].getExtent();return(e>=n||e<0)&&(e=0),{start:e,index:e,count:t=Math.min(t,n-e)}},i.Cube.prototype._getValue=function(e){var t=this._createCubeKeys(e);if(t){var n=t.GetHashCodes();if(n.length>0){var o=this._data[n[0].key];if(o)return new i.CubeDataValue(o.value,e,o.aggType,o.rows,o.square)}}return new i.CubeDataValue(null,e,void 0,[])},i.Cube.prototype.GenerateAxes=function(){var e=this._getPageLayout();this._pin=[];for(var t=0;t<e.length;t++)this._getAxis(e[t].axis,e[t].levels),this._pin.push({axis:e[t].axis,index:0});if(0===e.length){var i=this._getNonPageLayout();for(t=0;t<i.length;t++)this._getAxis(i[t].axis,i[t].levels)}},i.Cube.prototype._getPageLayout=function(){for(var e=[],t=0;t<this._layout.length;t++){this._layout[t].axis>1&&e.push(this._layout[t])}return e},i.Cube.prototype._getNonPageLayout=function(){for(var e=[],t=0;t<this._layout.length;t++){this._layout[t].axis<2&&e.push(this._layout[t])}return e},i.Cube.prototype.BuildCube=function(){if(this._axes=[],this._data=[],this._cubes=[],this.GenerateAxes(),null!==this._rows)for(var e=0;e<this._rows.length;e++){for(var t=new i.CubeKeys,n=2;n<this._axes.length;n++)t=this._axes[n].ProcessRow(this._rows[e],t);for(var o=t.GetHashCodes(),s=0;s<o.length;s++){var r=o[s].key,a=this._cubes[r];a||(a=this._cubes[r]=this.GenerateCube(this._getNonPageLayout()));var l=new i.CubeKeys,u=a._axes.length;for(n=0;n<u;n++)l=a._axes[n].ProcessRow(this._rows[e],l);var h=l.GetHashCodes(),d=h;if(void 0!==o[s].dataValue){d=[];for(var c=0;c<h.length;c++)d.push(o[s])}a._storeData(h,d,this._rows[e])}}},i.Cube.prototype._storeData=function(e,t,i){for(var n=0;n<e.length;n++)this._data[e[n].key]=this._aggregate(t[n],this._data[e[n].key],i)},i.Cube.prototype._getPinnedCube=function(){return this._cubes[this._getHashFromPin(this._pin)]},i.Cube.prototype._getHashFromPin=function(e){var t=new i.CubeKeys;if(e&&e.length>0){e.sort(function(e,t){return e.axis-t.axis});for(var n=this._axes,o=0;o<e.length;o++)t=n[e[o].axis].GetCubeKeys(e[o].index,t)}return t.GetHashCodes()[0].key},i.Cube._isValid=function(e){return!!e&&(void 0!==e.value&&null!==e.value)},i.Cube.prototype._createAggValue=function(e,t,i,n,o){i.push(n);var s={};for(var r in o)o.hasOwnProperty(r)&&(s[r]=o[r]);return s.value=e,s.aggType=t,s.rows=i,s},i.Cube._isNumber=function(e){return!i.StringUtils.isString(e.value)&&!isNaN(e.value)},i.Cube.prototype._aggregate=function(e,t,n){var o=this.GetAggType(e.dataValue),s=o.aggregation,r=i.Cube._isValid(t),a=i.Cube._isValid(e),l=r&&i.Cube._isNumber(t),u=a&&i.Cube._isNumber(e);switch(s){case i.CubeAggType.SUM:return r&&a?l&&u?this._createAggValue(t.value+e.value,s,t.rows,n,{}):this._createAggValue(NaN,s,t.rows,n,{}):a&&!r?u?this._createAggValue(e.value,s,[],n,{}):this._createAggValue(NaN,s,[],n,{}):t;case i.CubeAggType.AVERAGE:return r&&a?l&&u?this._createAggValue((t.sum+e.value)/(t.rows.length+1),s,t.rows,n,{sum:t.sum+e.value}):this._createAggValue(NaN,s,t.rows,n,{sum:t.sum}):a&&!r?u?this._createAggValue(e.value,s,[],n,{sum:e.value}):this._createAggValue(NaN,s,[],n,{sum:NaN}):t;case i.CubeAggType.VARIANCE:case i.CubeAggType.STDDEV:if(r&&a){if(l&&u){var h=t.rows.length+1,d=t.value+(e.value-t.value)/h;return this._createAggValue(d,s,t.rows,n,{square:t.square+(e.value-t.value)*(e.value-d)})}return this._createAggValue(NaN,s,t.rows,n,{square:NaN})}return a&&!r?u?this._createAggValue(e.value,s,[],n,{square:0}):this._createAggValue(NaN,s,[],n,{square:NaN}):t;case i.CubeAggType.NONE:return this._createAggValue(null,s,r?t.rows:[],n,{});case i.CubeAggType.FIRST:return r?this._createAggValue(t.value,s,t.rows,n,{}):a?this._createAggValue(e.value,s,[],n,{}):t;case i.CubeAggType.MIN:return r&&a?l&&u?this._createAggValue(Math.min(t.value,e.value),s,t.rows,n,{}):this._createAggValue(NaN,s,t.rows,n,{}):a&&!r?u?this._createAggValue(e.value,s,[],n,{}):this._createAggValue(NaN,s,[],n,{}):t;case i.CubeAggType.MAX:return r&&a?l&&u?this._createAggValue(Math.max(t.value,e.value),s,t.rows,n,{}):this._createAggValue(NaN,s,t.rows,n,{}):a&&!r?u?this._createAggValue(e.value,s,[],n,{}):this._createAggValue(NaN,s,[],n,{}):t;case i.CubeAggType.COUNT:return r&&a?this._createAggValue(t.value+1,s,t.rows,n,{}):a&&!r?this._createAggValue(1,s,[],n,{}):t;case i.CubeAggType.CUSTOM:var c=o.callback.call(this,r?t.value:void 0,a?e.value:void 0);return this._createAggValue(c,s,r?t.rows:[],n,{})}},i.Cube.prototype._getAxis=function(e,t){if(e>=this._axes.length){var n=new Array(e-this._axes.length+1);Array.prototype.push.apply(this._axes,n)}return this._axes[e]||(this._axes[e]=new i.CubeAxis(t,e,this)),this._axes[e]},i.Cube.prototype._createCubeKeys=function(e){for(var t=this.getAxes(),n=new i.CubeKeys,o=0;o<e.length;o++)n=t[o].GetCubeKeys(e[o],n);return n},i.Cube.prototype.ProcessLevel=function(e,t,n,o,s,r){i.Assert.failedInAbstractFunction()},i.Cube.prototype.GenerateCube=function(e){i.Assert.failedInAbstractFunction()},i.Cube.prototype.GenerateLevel=function(e,t){i.Assert.failedInAbstractFunction()},i.Cube.prototype.GetAggType=function(e){return i.Assert.failedInAbstractFunction(),{}},i.CubeAggType={SUM:"sum",AVERAGE:"avg",STDDEV:"stddev",VARIANCE:"variance",NONE:"none",FIRST:"first",MIN:"min",MAX:"max",COUNT:"count",CUSTOM:"custom"},i.CubeAxisValue=function(e,t,i,n){this.Init(),this._children=[],this._parent=n,this._cubeLevel=i,this._data={},this._data.value=e,this._data.label=t},i.Object.createSubclass(i.CubeAxisValue,i.Object,"oj.CubeAxisValue"),i.CubeAxisValue.prototype.Init=function(){i.CubeAxisValue.superclass.Init.call(this)},i.CubeAxisValue.prototype.getLevel=function(){return this._cubeLevel},i.CubeAxisValue.prototype.getDepth=function(){return 1},i.CubeAxisValue.prototype.getParents=function(){for(var e=[],t=this._parent;t&&t._parent;)e.unshift(t),t=t._parent;return e},i.CubeAxisValue.prototype.getChildren=function(){return this._children},i.CubeAxisValue.prototype.getExtent=function(){if(this._extent>-1)return this._extent;if(this._children&&0!==this._children.length){this._extent=0;for(var e=0;e<this.getChildren().length;e++)this._extent+=this.getChildren()[e].getExtent()}else this._extent=1;return this._extent},i.CubeAxisValue.prototype.getStart=function(){if(this._start>-1)return this._start;if(!this._parent)return 0;for(var e=this._parent.getStart(),t=this._parent._getPrevChild(this);t;)e+=t.getExtent(),t=this._parent._getPrevChild(t);return this._start=e,e},i.CubeAxisValue.prototype.getValue=function(){return this._data.value},i.CubeAxisValue.prototype.getLabel=function(){if(this._data.label)return this._data.label;var e=this.getValue();return e?e.toString():null},i.CubeAxisValue.prototype.GetChild=function(e){var t=this._getChildLevel();if(null===t)return null;if(t.isDataValue())return this._getDataValueChild(e);var i=e[t.attribute];if(i)for(var n=0;n<this._children.length;n++)if(this._children[n].getValue()===i)return this._children[n];return null},i.CubeAxisValue.prototype._getDataValueChild=function(e){for(var t=0;t<this._children.length;t++){var i=this._children[t].getValue();if(e.hasOwnProperty(i)&&e[i]===i)return this._children[t]}return null},i.CubeAxisValue.prototype._getChildLevel=function(){return this._children&&this._children.length>0?this._children[0].getLevel():null},i.CubeAxisValue.prototype.GetChildAt=function(e){return this._findChild(e,0,this._children.length-1)},i.CubeAxisValue.prototype._findChild=function(e,t,i){if(t>i)return null;var n=Math.floor((t+i)/2),o=this._children[n],s=o.getStart();return s>e?this._findChild(e,t,n-1):s+o.getExtent()-1<e?this._findChild(e,n+1,i):o},i.CubeAxisValue.prototype.AddNode=function(e,t,n){for(var o=0;o<this._children.length;o++)if(this._children[o].getValue()===e)return this._children[o];var s=new i.CubeAxisValue(e,t,n,this);return this._children.push(s),s},i.CubeAxisValue.prototype.GetHashCode=function(){var e={};return e[this.getLevel().attribute]=this.getValue(),e},i.CubeAxisValue.prototype._getPrevChild=function(e){for(var t=0;t<this._children.length;t++)if(this._children[t]===e)return t>0?this._children[t-1]:null;return null},i.CubeAxis=function(e,t,n){this.Init(),this.axis=t,this._levels=[];for(var o=0;o<e.length;o++)this._levels.push(n.GenerateLevel(e[o],this));this._cube=n,this._values=new i.CubeAxisValue(null,null,null,null)},i.Object.createSubclass(i.CubeAxis,i.Object,"oj.CubeAxis"),i.CubeAxis.prototype.Init=function(){i.CubeAxis.superclass.Init.call(this)},i.CubeAxis.prototype.getLevels=function(){return this._levels},i.CubeAxis.prototype.getExtent=function(){return this._values.getExtent()},i.CubeAxis.prototype.getValues=function(e){for(var t=[],i=this._values;i;)(i=i.GetChildAt(e))&&t.push(i);return t},i.CubeAxis.prototype.getIndex=function(e){for(var t=e?JSON.parse(e):{},i=this._values,n=null;i;)n=i,i=i.GetChild(t);return n?n.getStart():-1},i.CubeAxis.prototype.axis,i.CubeAxis.prototype.GetCubeKeys=function(e,t){return this.GetPartialCubeKeys(e,this.getLevels().length-1,t)},i.CubeAxis.prototype.GetPartialCubeKeys=function(e,t,i){for(var n=this.getValues(e),o=this.getLevels()[t],s=0;s<n.length;s++){var r=n[s];if(r.getLevel().isDataValue()?i.AddDataValue(r.getValue()):i.UpdateKeys(r),r.getLevel()===o)break}return i},i.CubeAxis.prototype.ProcessRow=function(e,t){return this._cube.ProcessLevel(this,0,this._values,e,t,!0)},i.CubeCellSet=function(e,t){var n=t.row?t.row.start:0,o=t.row?t.row.count:0,s=t.column?t.column.start:0,r=t.column?t.column.count:0;i.Assert.assertNumber(n,null),i.Assert.assertNumber(o,null),i.Assert.assertNumber(s,null),i.Assert.assertNumber(r,null),this._cube=e,this._starts={row:n,column:s},this._values=this._cube.getValues([{start:s,count:r},{start:n,count:o}]);var a=Array.isArray(this._values);(r=a?this._values.length:1)>0&&(o=a?this._values[0].length:1),this._counts={row:o,column:r}},i.CubeCellSet.prototype.getData=function(e){var t=e.row,i=e.column,n=Array.isArray(this._values)?this._values[i-this._starts.column][t-this._starts.row]:this._values;return n?n.getValue():null},i.CubeCellSet.prototype.getMetadata=function(e){var t={keys:{}};return t.keys.row=this._getAxisMetadata(e,"row",2),t.keys.column=this._getAxisMetadata(e,"column",1),t},i.CubeCellSet.prototype._getAxisMetadata=function(e,t,n){var o=this._cube.getAxes();if(void 0!==e[t]&&o.length>=n){var s=new i.CubeKeys;return(s=o[i.CubeDataGridDataSource._convertAxes(t)].GetCubeKeys(e[t],s)).GetHashCodes()[0].key}return null},i.CubeCellSet.prototype.getStart=function(e){return this._starts[e]},i.CubeCellSet.prototype.getCount=function(e){return this._counts[e]},i.CubeCellSet.prototype.getExtent=function(e){return{row:{extent:1,more:{before:!1,after:!1}},column:{extent:1,more:{before:!1,after:!1}}}},i.CubeDataGridDataSource=function(e){i.CubeDataGridDataSource.superclass.constructor.call(this,e)},i.Object.createSubclass(i.CubeDataGridDataSource,i.DataGridDataSource,"oj.CubeDataGridDataSource"),i.CubeDataGridDataSource.prototype.setCube=function(e){this.data=e,this._fireRefresh()},i.CubeDataGridDataSource.prototype.setPage=function(e){this.data.setPage(e),this._fireRefresh()},i.CubeDataGridDataSource.prototype._fireRefresh=function(){var e={};e.source=this,e.operation="refresh",this.handleEvent("change",e)},i.CubeDataGridDataSource.prototype.getCount=function(e){var t=this._getAxis(e);return t?t.getExtent():0},i.CubeDataGridDataSource.prototype.getCountPrecision=function(e){return"exact"},i.CubeDataGridDataSource.prototype.fetchHeaders=function(e,t,n){var o=new i.CubeHeaderSet(this._getAxis(e.axis),this.data,e.start,e.count);t.success.call(n?n.success:void 0,o,e)},i.CubeDataGridDataSource.prototype.fetchCells=function(e,t,n){for(var o={},s=0;s<e.length;s++){var r=void 0===e[s].start?0:e[s].start;if("row"===e[s].axis){var a=void 0===e[s].count?this.data.getAxes()[1].getExtent():e[s].count;o.row={start:r,count:a}}if("column"===e[s].axis){a=void 0===e[s].count?this.data.getAxes()[0].getExtent():e[s].count;o.column={start:r,count:a}}}var l=new i.CubeCellSet(this.data,o);t.success.call(n?n.success:void 0,l,e)},i.CubeDataGridDataSource.prototype.keys=function(e){var t={};return t=this._getKey(e,"row",t),t=this._getKey(e,"column",t),Promise.resolve(t)},i.CubeDataGridDataSource.prototype._getKey=function(e,t,n){var o=this._getAxis(t),s=e[t],r=new i.CubeKeys;return r=o?o.GetCubeKeys(s,r):"",n[t]=r.GetHashCodes()[0].key,n},i.CubeDataGridDataSource.prototype.indexes=function(e){var t={};return t=this._getIndex(e,"row",t),t=this._getIndex(e,"column",t),Promise.resolve(t)},i.CubeDataGridDataSource.prototype._getIndex=function(e,t,i){return i[t]=this._getAxis(t).getIndex(e[t]),i},i.CubeDataGridDataSource.prototype.sort=function(e,t,n){i.Assert.failedInAbstractFunction()},i.CubeDataGridDataSource.prototype.move=function(e,t,n,o,s){i.Assert.failedInAbstractFunction()},i.CubeDataGridDataSource.prototype.moveOK=function(e,t,i){return"invalid"},i.CubeDataGridDataSource.prototype.getCapability=function(e){switch(e){case"sort":case"move":return"none"}return null},i.CubeDataGridDataSource._convertAxes=function(e){return"row"===e?1:0},i.CubeDataGridDataSource.prototype._getAxis=function(e){var t=i.CubeDataGridDataSource._convertAxes(e),n=this.data.getAxes();return n.length>t?n[t]:null},i.CubeDataValue=function(e,t,i,n,o){this.Init(),this._data={},this._data.value=e,this._data.indices=t,this._data.aggType=i,this._data.rows=n,this._data.square=o},i.Object.createSubclass(i.CubeDataValue,i.Object,"oj.CubeDataValue"),i.CubeDataValue.prototype.Init=function(){i.CubeDataValue.superclass.Init.call(this)},i.CubeDataValue.prototype.getValue=function(){switch(this._data.aggType){case i.CubeAggType.STDDEV:return Math.sqrt(this._getVariance());case i.CubeAggType.VARIANCE:return this._getVariance();default:return this._data.value}},i.CubeDataValue.prototype.getIndices=function(){return this._data.indices},i.CubeDataValue.prototype.getRows=function(){return this._data.rows},i.CubeDataValue.prototype.getAggregation=function(){return this._data.aggType},i.CubeDataValue.prototype._getVariance=function(){if(isNaN(this._data.square))return NaN;var e=this._data.rows.length;return e>1?this._data.square/(e-1):0},i.CubeHeaderSet=function(e,t,i,n){this._cube=t,this._axis=e,this._start=void 0===i?0:i,this._count=void 0===n?this._axis.getExtent():Math.min(n,this._axis.getExtent()-i),this._end=i+n-1},i.CubeHeaderSet.prototype.getData=function(e,t){var i=this._getValue(e,t);return i?i.getLabel():null},i.CubeHeaderSet.prototype.getMetadata=function(e,t){var n=new i.CubeKeys,o=(n=this._axis.GetPartialCubeKeys(e,t,n)).GetHashCodes();return o&&o.length>0?{key:o[0].key}:null},i.CubeHeaderSet.prototype.getLevelCount=function(){return this._axis.getLevels().length},i.CubeHeaderSet.prototype.getExtent=function(e,t){var i=this._getValue(e,t),n=i.getExtent(),o=i.getStart(),s=o+n-1,r=e>o,a=e<o+n-1;return o<this._start&&(n-=this._start-o),s>this._end&&(n-=s-this._end),{extent:n,more:{before:r,after:a}}},i.CubeHeaderSet.prototype.getDepth=function(e,t){return this._getValue(e,t).getDepth()},i.CubeHeaderSet.prototype.getCount=function(){return this._count},i.CubeHeaderSet.prototype.getStart=function(){return this._start},i.CubeHeaderSet.prototype.getLabel=function(){return null},i.CubeHeaderSet.prototype._getValue=function(e,t){void 0===t&&(t=0);var i=this._axis.getValues(e);return i&&i.length>t?i[t]:null},i.CubeKeys=function(){this._key=[],this._data=[]},i.CubeKeys.prototype.UpdateKeys=function(e){this._key.push(e)},i.CubeKeys.prototype.AddDataValue=function(e,t){this._data.push({name:e,value:t})},i.CubeKeys.prototype.GetHashCodes=function(){var e=[],t=this._buildKeyHash();if(0===this._data.length)e.push({key:JSON.stringify(t)});else for(var i=0;i<this._data.length;i++){var n=$.extend(!0,{},t);n[this._data[i].name]=this._data[i].name,e.push({key:JSON.stringify(n),dataValue:this._data[i].name,value:this._data[i].value})}return e},i.CubeKeys.prototype._buildKeyHash=function(){for(var e={},t=0;t<this._key.length;t++){var i=this._key[t].GetHashCode();for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])}return e},i.CubeLevel=function(e,t,i){this.Init(),this.attribute=e,this._axisObj=t,this.axis=t.axis,this._dataValue=i},i.Object.createSubclass(i.CubeLevel,i.Object,"oj.CubeLevel"),i.CubeLevel.prototype.Init=function(){i.CubeLevel.superclass.Init.call(this)},i.CubeLevel.prototype.attribute,i.CubeLevel.prototype.axis,i.CubeLevel.prototype.getValue=function(e){var t=this._axisObj.getValues(e);if(t)for(var i=0;i<t.length;i++)if(t[i].getLevel()===this)return t[i];return null},i.CubeLevel.prototype.isDataValue=function(){return this._dataValue},i.CubeLevel.prototype._dataValue=!1,i.CubeLevel.prototype._axisObj=null,i.DataColumnCube=function(e,t,n){this.Init(),this._dataValues=n,this._valueAttr=n.valueAttr,this._labelAttr=n.labelAttr;var o=n.defaultAggregation;this._defaultAggregation=o?i.DataColumnCube._getDefaultAgg(o):{aggregation:i.CubeAggType.SUM},this._aggregation=n.aggregation,this._buildAggTypeLookup(),i.DataColumnCube.superclass.constructor.call(this,e,t)},i.Object.createSubclass(i.DataColumnCube,i.Cube,"oj.DataColumnCube"),i.DataColumnCube.prototype.Init=function(){i.DataColumnCube.superclass.Init.call(this)},i.DataColumnCube.prototype.BuildCube=function(){i.DataColumnCube.superclass.BuildCube.call(this)},i.DataColumnCube.prototype.GetAggType=function(e){return this._dataValueAggType[e]?this._dataValueAggType[e]:this._defaultAggregation},i.DataColumnCube.prototype.GenerateCube=function(e){return new i.DataColumnCube(null,e,this._dataValues)},i.DataColumnCube.prototype.GenerateLevel=function(e,t){return e.attribute===this._labelAttr?new i.CubeLevel(e.attribute,t,!0):new i.CubeLevel(e.attribute,t,!1)},i.DataColumnCube.prototype.ProcessLevel=function(e,t,i,n,o,s){if(t>=e.getLevels().length)return o;var r=e.getLevels()[t],a=n[r.attribute],l=i.AddNode(a,null,r);return r.isDataValue()?o.AddDataValue(a,n[this._valueAttr]):o.UpdateKeys(l),this.ProcessLevel(e,t+1,l,n,o,s)},i.DataColumnCube._getDefaultAgg=function(e){return i.StringUtils.isString(e)?{aggregation:e}:{aggregation:e.aggregation,callback:e.callback}},i.DataColumnCube.prototype._buildAggTypeLookup=function(){if(this._dataValueAggType=[],this._aggregation)for(var e=0;e<this._aggregation.length;e++){var t=this._aggregation[e],i=t.aggregation;this._dataValueAggType[t.value]=i?{aggregation:i,callback:t.callback}:this._defaultAggregation}},i.DataValueAttributeCube=function(e,t,n){this.Init(),this._dataValues=n,this._aggTypeLookup=this._buildAggTypeLookup(),i.DataValueAttributeCube.superclass.constructor.call(this,e,t)},i.Object.createSubclass(i.DataValueAttributeCube,i.Cube,"oj.DataValueAttributeCube"),i.DataValueAttributeCube.prototype._rows=null,i.DataValueAttributeCube.prototype.Init=function(){i.DataValueAttributeCube.superclass.Init.call(this)},i.DataValueAttributeCube.prototype.BuildCube=function(){i.DataValueAttributeCube.superclass.BuildCube.call(this)},i.DataValueAttributeCube.prototype.GetAggType=function(e){return this._dataValueAggType[e]},i.DataValueAttributeCube.prototype.GenerateLevel=function(e,t){return e.dataValue?new i.CubeLevel(null,t,!0):new i.CubeLevel(e.attribute,t,!1)},i.DataValueAttributeCube.prototype.GenerateCube=function(e){return new i.DataValueAttributeCube(null,e,this._dataValues)},i.DataValueAttributeCube.prototype.ProcessLevel=function(e,t,i,n,o,s){if(t>=e.getLevels().length)return o;var r=e.getLevels()[t];if(r.isDataValue())return this._processDataValue(e,i,n,t,o);var a=n[r.attribute],l=i.AddNode(a,null,r);return s&&o.UpdateKeys(l),this.ProcessLevel(e,t+1,l,n,o,s)},i.DataValueAttributeCube.prototype._processDataValue=function(e,t,i,n,o){for(var s=!0,r=0;r<this._dataValues.length;r++){var a=this._dataValues[r].attribute,l=this._dataValues[r].label;if(i.hasOwnProperty(a)){var u=t.AddNode(a,l,e.getLevels()[n]);o.AddDataValue(a,i[a]),this.ProcessLevel(e,n+1,u,i,o,s),s=!1}}return o},i.DataValueAttributeCube.prototype._buildAggTypeLookup=function(){this._dataValueAggType=[];for(var e=0;e<this._dataValues.length;e++){var t=this._dataValues[e],n=t.aggregation;this._dataValueAggType[t.attribute]=n?{aggregation:t.aggregation,callback:t.callback}:{aggregation:i.CubeAggType.SUM,callback:t.callback}}},i.IndexerModel=function(){},i.IndexerModel.SECTION_OTHERS={id:"__others__",label:i.Translations.getTranslatedString("oj-ojIndexer.indexerOthers")},i.ListViewIndexerModel=function(e){this.listview=e,this.Init()},i.Object.createSubclass(i.ListViewIndexerModel,i.EventSource,"oj.ListViewIndexerModel"),i.ListViewIndexerModel.prototype.getIndexableSections=function(){return this.listview.ojContext.getTranslatedString("indexerCharacters").split("|")},i.ListViewIndexerModel.prototype.getMissingSections=function(){return null==this.missingSections&&(this.missingSections=this._getMissingSections()),this.missingSections},i.ListViewIndexerModel.prototype._getMissingSections=function(){var e,t,i,n,o,s,r=[];for(e=this.listview._getGroupItemsCache(),t=this.getIndexableSections(),i=0;i<t.length;i++)n=t[i],o=!1,e.each(function(e){if((s=$(this).text()).length>0&&s.charAt(0)==n)return o=!0,!1}),o||r.push(n);return r},i.ListViewIndexerModel.prototype.setSection=function(e){return e==i.IndexerModel.SECTION_OTHERS?this._setOtherSection():this._setSection(e)},i.ListViewIndexerModel.prototype._setOtherSection=function(){var e,t,n,o,s,r=this;return e=this.getIndexableSections(),new Promise(function(a,l){t=null,r.listview._getGroupItemsCache().each(function(i){for(n=$(this).text(),o=0;o<e.length;o++)if(s=e[o],0==n.indexOf(s))return!0;return t=this,!1}),t?(r.listview._scrollToGroupHeader(t),a(i.IndexerModel.SECTION_OTHERS)):a(null)})},i.ListViewIndexerModel.prototype._setSection=function(e){var t,i,n,o=this,s=null;return t=this.getIndexableSections(),i=t.indexOf(e),new Promise(function(r,a){if(-1==i)r(null);else{for(;i<t.length;){if(e=t[i],null!=(n=o._findGroupHeader(e))){o.listview._scrollToGroupHeader(n),s=e;break}i++}r(s)}})},i.ListViewIndexerModel.prototype._findGroupHeader=function(e){var t;return this.listview._getGroupItemsCache().each(function(i){if(0==$(this).text().indexOf(e))return t=this,!1}),t},i.__registerWidget("oj.ojIndexer",$.oj.baseComponent,{defaultElement:"<ul>",version:"1.2",widgetEventPrefix:"oj",options:{data:null},_ComponentCreate:function(){this._super(),this._setup()},_AfterCreate:function(){this._super(),this._createIndexerContent(),this._setAriaProperties(),this._createInstructionText()},_destroy:function(){this._super(),this._unsetAriaProperties(),this.element.removeClass("oj-component-initnode"),i.DomUtils.unwrap(this.element,this._getIndexerContainer())},_setOption:function(e,t){this._superApply(arguments),"data"==e&&this.refresh()},_SetupResources:function(){this._super();var e=this._getIndexerContainer()[0];this._registerResizeListener(e),this._registerTouchHandler(e)},_ReleaseResources:function(){this._super();var e=this._getIndexerContainer()[0];this._unregisterResizeListener(e),this._unregisterTouchHandler(e),this._resolveBusyState()},_resolveBusyState:function(){this.busyStateResolve&&(this.busyStateResolve(null),this.busyStateResolve=null)},widget:function(){return this._getIndexerContainer()},refresh:function(){this._super(),this.element.empty(),this._createIndexerContent(),this._setAriaProperties(),this.m_current=null},getNodeBySubId:function(e){var t,i,n,o,s,r;if(null==e)return this.element?this.element[0]:null;if("oj-indexer-section"===e.subId)for(t=e.section,i=this.element.children("li"),n=0;n<i.length;n++){if(s=i.get(n),$(s).data("data-range")==t)return s;if(null!=(r=$(s).data("data-includes")))for(o=0;o<r.length;o++)if(r[o]==t)return s}return null},getSubIdByNode:function(e){var t;return null!=e&&null!=(t=$(e).data("data-range"))?{subId:"oj-indexer-section",section:t}:null},_setAriaProperties:function(){this.element.attr("role","slider").attr("aria-orientation","vertical").attr("aria-describedby",this.element.prop("id")+":desc").attr("aria-valuemin",0).attr("aria-valuemax",Math.max(0,this.element.children().length-1))},_unsetAriaProperties:function(){this.element.removeAttr("role").removeAttr("aria-orientation").removeAttr("aria-describedby").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuetext")},_createInstructionText:function(){var e,t;e=i.DomUtils.isTouchSupported()?"ariaTouchInstructionText":"ariaKeyboardInstructionText",(t=$(document.createElement("div"))).prop("id",this.element.prop("id")+":desc"),t.addClass("oj-helper-hidden-accessible").text(this.getTranslatedString(e)),this._getIndexerContainer().append(t)},_getIndexerContainer:function(){return null==this.m_container&&(this.m_container=this._createIndexerContainer()),this.m_container},_createIndexerContainer:function(){var e;return this.OuterWrapper?e=$(this.OuterWrapper):(e=$(document.createElement("div")),this.element.parent()[0].replaceChild(e[0],this.element[0])),e.addClass("oj-indexer oj-component"),e.prepend(this.element),e},_createIndexerContent:function(){var e,t,i,n,o,s,r,a,l,u,h,d,c,p,_;if(null!=(e=this._getIndexerModel())){for(t=this.element,i=e.getIndexableSections(),e.getMissingSections&&(n=e.getMissingSections()),o=this.getTranslatedString("indexerOthers"),s=this.widget().outerHeight(),r=this._createItem(i[0],n),t.append(r),a=r.outerHeight(),l=Math.floor(s/a),this._getIndexerContainer().removeClass("oj-indexer-abbr"),(u=Math.floor((i.length+1)/l)+1)>1&&this._getIndexerContainer().addClass("oj-indexer-abbr"),h=1+u;h<i.length;h=h+u+1)u>1?(c=this._createSeparator(i,h-u,h-1),t.append(c)):h--,d=i[h],c=this._createItem(d,n),t.append(c);p=this._createItem(i[i.length-1],n),t.append(p),(_=this._createItem(o)).attr("data-others","true"),t.append(_)}},_createItem:function(e,t){var i,n;return i=e.label?e.label:e,(n=$(document.createElement("li"))).data("data-range",e).text(i),null!=t&&t.indexOf(e)>-1&&n.addClass("oj-disabled"),n},_createSeparator:function(e,t,i){var n,o,s=[];for((n=$(document.createElement("li"))).addClass("oj-indexer-ellipsis").data("data-range",e[t+Math.round((i-t)/2)]),o=t;o<=i;o++)s.push(e[o]);return n.data("data-includes",s),n},_setup:function(){var e=this;this.element.uniqueId().addClass("oj-component-initnode").attr("tabIndex",0),this._on(this.element,{click:function(t){e._handleClick(t)},keydown:function(t){e._handleKeyDown(t)},focus:function(t){e._handleFocus(t)},blur:function(t){e._handleBlur(t)}}),this._focusable({applyHighlight:!0,setupHandlers:function(t,i){e._focusInHandler=t,e._focusOutHandler=i}})},_handleClick:function(e){var t;0===e.button&&(t=$(e.target),this._setCurrent(t))},_handleFocus:function(e){this._getIndexerContainer().addClass("oj-focus-ancestor"),null==this.m_current?this._setFocus(this.element.children("li").first()):this._setFocus(this.m_current)},_handleBlur:function(e){this._getIndexerContainer().removeClass("oj-focus-ancestor")},_handleKeyDown:function(e){var t,i=!1;switch(e.keyCode){case 38:t=this.m_current.prev();break;case 40:t=this.m_current.next();break;case 13:this._setCurrent(this.m_current),i=!0}null!=t&&t.length>0&&(i=!0,this._setFocus(t)),i&&e.preventDefault()},_setFocus:function(e){null!=this.m_current&&this._focusOutHandler(this.m_current),this._focusInHandler(e),this._updateAriaProperties(e),this.m_current=e},_getIndexerModel:function(){var e=this.option("data");if(null!=e&&(null==e.setSection||null==e.getIndexableSections))throw"Invalid IndexerModel";return e},_setCurrent:function(e){var t=e.data("data-range");e.attr("data-others")&&(t=i.IndexerModel.SECTION_OTHERS),this._setCurrentSection(t)},_setCurrentSection:function(e){var t,n,o=this;t=i.Context.getContext(this.element[0]).getBusyContext(),this.busyStateResolve=t.addBusyState({description:"setCurrentSection"}),this._getIndexerModel().setSection(e).then(function(e){null!=e&&null!=(n=o._findItem(e))&&o._setFocus(n),o._resolveBusyState()},function(e){o._resolveBusyState()})},_updateAriaProperties:function(e){var t,n,o,s,r="";null!=(t=e.data("data-includes"))?t.length>0&&(o=t[0].label?t[0].label:t[0],s=t[t.length-1].label?t[t.length-1].label:t[t.length-1],r=this.getTranslatedString("ariaInBetweenText",{first:o,second:s})):r=(n=e.data("data-range"))===i.IndexerModel.SECTION_OTHERS?this.getTranslatedString("ariaOthersLabel"):n,e.hasClass("oj-disabled")&&(r=r+". "+this.getTranslatedString("ariaDisabledLabel")),this.element.attr("aria-valuetext",r),this.element.attr("aria-valuenow",e.index())},_findItem:function(e){var t,i,n,o,s;for(t=this.element.children(),i=0;i<t.length;i++)if(n=t.get(i),o=$(n).data("data-range"),s=$(n).data("data-includes"),null!=o&&o==e||null!=s&&s.indexOf(e)>-1)return $(n);return null},_unregisterResizeListener:function(e){e&&this._resizeHandler&&i.DomUtils.removeResizeListener(e,this._resizeHandler)},_registerResizeListener:function(e){e&&(null==this._resizeHandler&&(this._resizeHandler=this._handleResize.bind(this)),i.DomUtils.addResizeListener(e,this._resizeHandler))},_unregisterTouchHandler:function(e){this.hammer&&(this.hammer.off("panstart panmove panend"),$(e).ojHammer("destroy")),this.hammer=null},_registerTouchHandler:function(e){var t,i,n,o,s,r,a,l,u,h,d,c,p=this;t={recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_VERTICAL}]]},this.hammer=$(e).ojHammer(t).on("panstart",function(e){i=e.gesture.target,n=p.element[0].getBoundingClientRect().left+5,o=i.getBoundingClientRect().top,p._setCurrent($(i)),s=i,r=$(i).data("data-range"),a=o}).on("panmove",function(e){l=a,a=o+e.gesture.deltaY,null!=(i=document.elementFromPoint(n,a))&&(u=a-l,s==i?null!=(h=$(i).data("data-includes"))&&(d=h.indexOf(r),c=null,u>0&&d<h.length-1?c=h[d+1]:u<0&&d>0&&(c=h[d-1]),null!=c&&(r=c,p._setCurrentSection(c))):$(i).data("data-range")&&(h=$(i).data("data-includes"),c=null,null!=h&&(u>0&&i==s.nextElementSibling?c=h[0]:u<0&&i==s.previousElementSibling&&(c=h[h.length-1])),null==c&&(c=$(i).data("data-range")),s=i,r=c,p._setCurrentSection(r)))}).on("panend",function(e){s=null,r=null,a=null,c=null})},_handleResize:function(e,t){e>0&&t>0&&this.refresh()}}),i.CustomElementBridge.registerMetadata("oj-indexer","baseComponent",{properties:{data:{},translations:{type:"Object",properties:{ariaDisabledLabel:{type:"string"},ariaInBetweenText:{type:"string"},ariaKeyboardInstructionText:{type:"string"},ariaOthersLabel:{type:"string"},ariaTouchInstructionText:{type:"string"},indexerCharacters:{type:"string"},indexerOthers:{type:"string"}}}},extension:{_INNER_ELEM:"ul",_WIDGET_NAME:"ojIndexer"}}),i.CustomElementBridge.register("oj-indexer",{metadata:i.CustomElementBridge.getMetadata("oj-indexer")}),i.DataSourceContentHandler=function(e,t,i){this.m_root=t,this.m_widget=e,this.m_fetching=!1,this.setDataSource(i),this.Init()},i.Object.createSubclass(i.DataSourceContentHandler,i.Object,"oj.DataSourceContentHandler"),i.DataSourceContentHandler.prototype.Init=function(){i.DataSourceContentHandler.superclass.Init.call(this)},i.DataSourceContentHandler.prototype.HandleResize=function(e,t){},i.DataSourceContentHandler.prototype.notifyShown=function(){},i.DataSourceContentHandler.prototype.notifyAttached=function(){},i.DataSourceContentHandler.prototype.cleanItems=function(e){var t,i;if(void 0===e&&(e=this.getTemplateEngine()),e&&this.m_root)for(t=this.m_root.childNodes,i=0;i<t.length;i++)e.clean(t[i])},i.DataSourceContentHandler.prototype.Destroy=function(){null!=this.m_superRoot&&(this.m_root=this.m_superRoot),this.cleanItems(),$(this.m_root).empty(),this.m_widget=null,this.m_root=null,this.m_superRoot=null},i.DataSourceContentHandler.prototype.IsReady=function(){return!this.m_fetching},i.DataSourceContentHandler.prototype.setRootAriaProperties=function(){this.shouldUseGridRole()?this.m_root.setAttribute("role","grid"):this.IsHierarchical()?this.m_root.setAttribute("role","tree"):this.m_root.setAttribute("role","listbox")},i.DataSourceContentHandler.prototype.RenderContent=function(){var e,t;this.signalTaskStart("rendering content"),this.setRootAriaProperties(),this.shouldUseGridRole()&&this.isCardLayout()&&!this.IsHierarchical()&&(e=document.createElement("li"),t=document.createElement("ul"),e.appendChild(t),$(e).attr("role","presentation").css("width","100%"),$(t).attr("role","row").addClass(this.m_widget.getGroupStyleClass()),this.m_root.appendChild(e),this.m_superRoot=this.m_root,this.m_root=t),this.fetchRows(!1),this.signalTaskEnd()},i.DataSourceContentHandler.prototype.GetKey=function(e){return e.key},i.DataSourceContentHandler.prototype.FindElementByKey=function(e){var t,n,o;for(t=$(this.m_root).find("."+this.m_widget.getItemElementStyleClass()),n=0;n<t.length;n++)if(o=t[n],e==this.GetKey(o)||i.Object.compareValues(e,this.GetKey(o)))return o;return null},i.DataSourceContentHandler.prototype.getDataSource=function(){return this.m_dataSource},i.DataSourceContentHandler.prototype.setDataSource=function(e){this.m_dataSource=e},i.DataSourceContentHandler.prototype.loadTemplateEngine=function(){var e=this;return null!=this.m_widget.getItemTemplate()&&null==this.m_widget._getItemRenderer()?new Promise(function(t,n){i.Config.__getTemplateEngine().then(function(i){e.m_engine=i,t(i)},function(e){throw"Error loading template engine: "+e})}):Promise.resolve(null)},i.DataSourceContentHandler.prototype.getTemplateEngine=function(){return this.m_engine},i.DataSourceContentHandler.prototype.fetchRows=function(e){this.m_widget.showStatusText()},i.DataSourceContentHandler.prototype.addItem=function(e,t,i,n,o,s){var r,a,l,u;return r=document.createElement("li"),$(r).uniqueId(),a=-1===t?null:t===(l=$(e).children("."+this.m_widget.getItemElementStyleClass()+", ."+this.m_widget.getEmptyTextStyleClass()+", .oj-listview-temp-item")).length?null:l[t],this.m_widget.BeforeInsertItem(),e.insertBefore(r,a),u=$(e).children().index(r),this._addOrReplaceItem(r,u,e,t,i,n,o,s)},i.DataSourceContentHandler.prototype.replaceItem=function(e,t,i,n,o,s){var r,a,l;this.signalTaskStart("replace item"),r=e.parentNode,a=$(r).children().index(e),l=document.createElement("li"),o&&o.clean(e),$(e).replaceWith(l),this._addOrReplaceItem(l,a,r,t,i,n,o,s)},i.DataSourceContentHandler.prototype._addOrReplaceItem=function(e,t,i,n,o,s,r,a){var l,u,h,d,c,p,_,m,g;if(null==a&&(a=this.afterRenderItem.bind(this)),l=this.createContext(t,o,s,e),u=this.m_widget._getItemRenderer(),h=this.m_widget.getItemTemplate(),null!=u)null!=(d=u.call(this,l))&&(null===d.parentNode||d.parentNode instanceof DocumentFragment?e.appendChild(d):null!=d.parentNode||d.toString&&((c=document.createElement("span")).appendChild(document.createTextNode(d.toString())),e.appendChild(c)));else if(null!=h&&null!=r)for(p=this.m_widget.getRootElement()[0],_=this.GetBindingContext(l),m=r.execute(p,h,_,this.m_widget.GetOption("as")),g=0;g<m.length;g++){if("LI"===m[g].tagName){i.replaceChild(m[g],e);break}e.appendChild(m[g])}else(c=document.createElement("span")).appendChild(document.createTextNode(null==o?"":o.toString())),e.appendChild(c);return e=i.children?i.children[t]:this._getItemFromDocumentFragment(i,t),l.parentElement=e,$.data(e,"data",o),a(e,l),{item:e,context:l}},i.DataSourceContentHandler.prototype._getItemFromDocumentFragment=function(e,t){var i,n,o=0,s=0;for(i=e.childNodes;n=i[o++];)if(1===n.nodeType){if(s===t)return n;s++}return null},i.DataSourceContentHandler.prototype.GetBindingContext=function(e){var t={};return t.data=e.data,t.index=e.index,t.key=e.key,t.componentElement=e.componentElement,t},i.DataSourceContentHandler.prototype.afterRenderItem=function(e,t){var i;e.key=t.key,(e=$(e)).uniqueId(),i=this.m_widget.getSingleFocusableElement(e),this.shouldUseGridRole()?null==t.leaf||t.leaf?this.isCardLayout()?i.attr("role","gridcell"):(e.attr("role","row"),i!=e?i.attr("role","gridcell"):i.children().wrapAll("<div role='gridcell' class='oj-listview-cell-element'></div>")):e.attr("role","presentation"):(i.attr("role",this.IsHierarchical()?"treeitem":"option"),i!=e&&e.attr("role","presentation")),i.addClass(this.m_widget.getFocusedElementStyleClass()),this.isFocusable(t)||e.addClass("oj-skipfocus"),e.addClass(this.m_widget.getItemElementStyleClass())},i.DataSourceContentHandler.prototype.createContext=function(e,t,i,n){var o,s;for(s in(o={}).parentElement=n,o.index=e,o.data=t,o.component=this.m_widget.getWidgetConstructor(),o.datasource=this.getDataSource(),o=this.m_widget._FixRendererContext(o),i)i.hasOwnProperty(s)&&(o[s]=i[s]);return o},i.DataSourceContentHandler.prototype.isFocusable=function(e){return this.m_widget.getItemFocusable(e)},i.DataSourceContentHandler.prototype.isSelectable=function(e){return this.m_widget.getItemSelectable(e)},i.DataSourceContentHandler.prototype.isCardLayout=function(){return this.m_widget.isCardLayout()},i.DataSourceContentHandler.prototype.shouldUseGridRole=function(){return this.m_widget.ShouldUseGridRole()},i.DataSourceContentHandler.prototype.isAsyncRendering=function(){return!1},i.DataSourceContentHandler.prototype.signalTaskStart=function(e){this.m_widget&&this.m_widget.signalTaskStart("DataSource ContentHandler "+e)},i.DataSourceContentHandler.prototype.signalTaskEnd=function(){this.m_widget&&this.m_widget.signalTaskEnd()},i.TreeDataSourceContentHandler=function(e,t,n){i.TreeDataSourceContentHandler.superclass.constructor.call(this,e,t,n)},i.Object.createSubclass(i.TreeDataSourceContentHandler,i.DataSourceContentHandler,"oj.TreeDataSourceContentHandler"),i.TreeDataSourceContentHandler.prototype.Init=function(){i.TreeDataSourceContentHandler.superclass.Init.call(this)},i.TreeDataSourceContentHandler.prototype.IsHierarchical=function(){return!0},i.TreeDataSourceContentHandler.prototype.fetchRows=function(e){this.signalTaskStart("fetching rows"),i.TreeDataSourceContentHandler.superclass.fetchRows.call(this,e),this.fetchChildren(0,null,this.m_root,null),this.signalTaskEnd()},i.TreeDataSourceContentHandler.prototype.fetchChildren=function(e,t,i,n){var o,s,r,a,l,u=this;this.signalTaskStart("fetching children from index: "+e),o=this.loadTemplateEngine(),null!=t&&(s=i.parentNode.firstElementChild.firstElementChild.firstElementChild)&&(s=$(s),r=this.m_widget.getCollapseIconStyleClass(),s.hasClass(r)&&(a=this.m_widget.getExpandingIconStyleClass(),s.removeClass(r).addClass(a))),this.m_fetching=!0,l={start:e,count:this.m_dataSource.getChildCount(t)},this.signalTaskStart("first fetch"),this.m_dataSource.fetchChildren(t,l,{success:function(e){o.then(function(o){u._handleFetchSuccess(e,t,i,n,o),u.signalTaskEnd()})},error:function(e){u._handleFetchError(e),u.signalTaskEnd()}}),this.signalTaskEnd()},i.TreeDataSourceContentHandler.prototype._handleFetchSuccess=function(e,t,n,o,s){var r,a,l,u,h,d,c,p,_=this;if(null!=this.m_widget){for(this.signalTaskStart("handling successful fetch"),(r=e.getStart())+(a=e.getCount()),l=document.createDocumentFragment(),u=0;u<a;u++)h=e.getData(r+u),d=e.getMetadata(r+u),this.addItem(l,-1,h,d,s);n.appendChild(l),this.shouldUseGridRole()&&this.isCardLayout()&&null!=t&&a>1&&(c=n.parentNode.firstElementChild.firstElementChild,$(c).attr("aria-colspan",a)),this.m_fetching=!1,p=function(){_.m_widget&&(null!=o&&o.call(null,n),_.m_widget.renderComplete())},this.isAsyncRendering()?i.Context.getContext(this.m_root).getBusyContext().whenReady().then(function(){p()}):p(),this.m_initialized=!0,this.signalTaskEnd()}},i.TreeDataSourceContentHandler.prototype.GetBindingContext=function(e){var t=i.TreeDataSourceContentHandler.superclass.GetBindingContext.call(this,e);return t.depth=e.depth,t.leaf=e.leaf,t.parentKey=e.parentKey,t},i.TreeDataSourceContentHandler.prototype.afterRenderItem=function(e,t){var n,o,s,r,a,l,u,h,d;this.signalTaskStart("after rendering an item"),i.TreeDataSourceContentHandler.superclass.afterRenderItem.call(this,e,t),n=this.m_widget.getGroupStyleClass(),o=this.m_widget.getItemStyleClass(),s=this.m_widget.getGroupItemStyleClass(!0),r=this.m_widget.getGroupCollapseStyleClass(),l=this.m_widget.getCollapseIconStyleClass(),a=this.m_widget.getFocusedElementStyleClass(),e=$(e),0==t.leaf?(e.children().wrapAll("<div></div>"),e.hasClass(a)?e.removeClass(a).children().first().addClass(a).attr("aria-expanded","false"):e.children().first().attr("role","presentation").find("."+a).attr("aria-expanded","false"),(u=e.children().first()).uniqueId().addClass(s),this.m_widget.isExpandable()&&(e.addClass("oj-collapsed"),h=document.createElement("a"),$(h).attr("href","#").attr("aria-labelledby",u.get(0).id).addClass("oj-component-icon oj-clickable-icon-nocontext").addClass(l),u.prepend(h)),this.shouldUseGridRole()&&(u.get(0).removeAttribute("aria-expanded"),u.removeClass(a),u.attr("role","row"),u.children().wrapAll("<div role='gridcell' aria-expanded='false' class='oj-listview-cell-element "+a+"'></div>")),d=document.createElement("ul"),$(d).addClass(n).addClass(r).attr("role",this.shouldUseGridRole()?this.isCardLayout()?"row":"presentation":"group"),e.append(d)):1==t.leaf&&e.addClass(o),this.m_widget._isSelectionEnabled()&&this.isSelectable(t)&&this.m_widget.getFocusItem(e).attr("aria-selected",!1),this.m_widget.itemRenderComplete(e[0],t),this.signalTaskEnd()},i.TreeDataSourceContentHandler.prototype._handleFetchError=function(e){null!=this.m_widget?(this.signalTaskStart("handling fetch error: "+e),i.Logger.error(e),this.m_widget.renderComplete(),this.signalTaskEnd()):i.Logger.info("handleFetchError: widget has already been destroyed")},i.TreeDataSourceContentHandler.prototype.Expand=function(e,t){var i,n;this.signalTaskStart("expanding an item"),i=this.GetKey(e[0]),n=e.children("ul")[0],this.fetchChildren(0,i,n,t),this.signalTaskEnd()},i.TreeDataSourceContentHandler.prototype.Collapse=function(e){var t=this.getTemplateEngine();t&&t.clean(e.get(0)),e.empty()},i.StaticContentHandler=function(e,t){this.m_widget=e,this.m_root=t},i.Object.createSubclass(i.StaticContentHandler,i.Object,"oj.StaticContentHandler"),i.StaticContentHandler.prototype.Init=function(){i.StaticContentHandler.superclass.Init.call(this)},i.StaticContentHandler.prototype.Destroy=function(){this.m_root.hasAttribute("role")&&(this.restoreContent(this.m_root,0),this.unsetRootAriaProperties(),this.shouldUseGridRole()&&this.isCardLayout()&&!this.IsHierarchical()&&$(this.m_root).children().first().children().unwrap().children().unwrap())},i.StaticContentHandler.prototype.IsReady=function(){return!0},i.StaticContentHandler.prototype.HandleResize=function(e,t){},i.StaticContentHandler.prototype.notifyShown=function(){},i.StaticContentHandler.prototype.notifyAttached=function(){},i.StaticContentHandler.prototype.RenderContent=function(){var e=this.m_root;this.shouldUseGridRole()&&this.isCardLayout()&&!this.IsHierarchical()&&$(e).children("li").length>0&&($(this.m_root).children().wrapAll("<li role='presentation' style='width:100%'><ul role='row' class='"+this.m_widget.getGroupStyleClass()+"'></ul></li>"),e=$(this.m_root).children("li").first().children("ul").first().get(0)),this.modifyContent(e,0),this.setRootAriaProperties(),this.m_widget.renderComplete()},i.StaticContentHandler.prototype.Expand=function(e,t){var i,n;i="."+this.m_widget.getGroupStyleClass(),n=$(e).children(i)[0],$(n).css("display",""),t.call(null,n)},i.StaticContentHandler.prototype.Collapse=function(e){},i.StaticContentHandler.prototype.IsHierarchical=function(){return null==this.m_hier&&(this.m_hier=$(this.m_root).children("li").children("ul").length>0),this.m_hier},i.StaticContentHandler.prototype.restoreContent=function(e,t){var i,n,o,s,r,a,l,u,h,d,c;for(i=this.m_widget.getGroupStyleClass(),n=this.m_widget.getGroupCollapseStyleClass(),o=this.m_widget.getGroupExpandStyleClass(),s=this.m_widget.getGroupItemStyleClass(!0),r=this.m_widget.getItemStyleClass(),a=this.m_widget.getItemElementStyleClass(),l=e.children,u=0;u<l.length;u++)(h=$(l[u])).hasClass(a)&&(this.unsetAriaProperties(h.get(0)),h.removeClass(a).removeClass(r).removeClass(this.m_widget.getDepthStyleClass(t)).removeClass("oj-skipfocus").removeClass("oj-focus").removeClass("oj-hover").removeClass("oj-expanded").removeClass("oj-collapsed").removeClass("oj-selected"),(d=h.children("ul")).length>0&&(h.children("."+s).children().unwrap(),this.shouldUseGridRole()&&this.unsetGroupAriaProperties(h),h.children(".oj-component-icon").remove(),(c=$(d[0])).removeClass(i).removeClass(o).removeClass(n).removeAttr("role"),this.restoreContent(c[0],t+1)))},i.StaticContentHandler.prototype.modifyContent=function(e,t){var i,n,o,s,r,a,l,u,h,d,c,p,_,m,g,f,v;for(i=this.m_widget.getItemStyleClass(),n=this.m_widget.getItemElementStyleClass(),o=this.m_widget.getGroupStyleClass(),s=this.m_widget.getGroupItemStyleClass(!0),r=this.m_widget.getGroupCollapseStyleClass(),a=this.m_widget.getCollapseIconStyleClass(),l=this.m_widget.getFocusedElementStyleClass(),u=e.children,h=this.m_widget.isExpandable(),d=0;d<u.length;d++)c=$(u[d]),p=this.createContext(c),this.setAriaProperties(c,p),c.uniqueId().addClass(n),t>0&&c.addClass(this.m_widget.getDepthStyleClass(t)),this.isFocusable(p)||c.addClass("oj-skipfocus"),(_=c.children("ul")).length>0?(this.m_hier=!0,c.children(":not(ul)").wrapAll("<div></div>"),(m=c.children().first()).addClass(s),(v=this.getItemsCount(_[0]))>0&&(c.hasClass(l)?(c.removeClass(l),m.addClass(l).attr("aria-expanded","false")):(m.attr("role","presentation"),m.find("."+l).attr("aria-expanded","false")),h&&(c.addClass("oj-collapsed"),m.uniqueId(),g=document.createElement("a"),$(g).attr("href","#").attr("role","button").attr("aria-labelledby",m.get(0).id).addClass("oj-component-icon oj-clickable-icon-nocontext").addClass(a),m.prepend(g))),this.shouldUseGridRole()&&this.setGroupAriaProperties(m,v),(f=$(_[0])).addClass(o).addClass(r).attr("role",this.shouldUseGridRole()?this.isCardLayout()?"row":"presentation":"group").css("display","none"),this.modifyContent(f[0],t+1)):c.addClass(i),this.m_widget._isSelectionEnabled()&&this.isSelectable(p)&&this.m_widget.getFocusItem(c).attr("aria-selected",!1),this.m_widget.itemRenderComplete(c[0],p)},i.StaticContentHandler.prototype.setRootAriaProperties=function(){this.shouldUseGridRole()?this.m_root.setAttribute("role","grid"):this.IsHierarchical()?this.m_root.setAttribute("role","tree"):this.m_root.setAttribute("role","listbox")},i.StaticContentHandler.prototype.unsetRootAriaProperties=function(){this.m_root.removeAttribute("role")},i.StaticContentHandler.prototype.getItemsCount=function(e){return $(e).children("li").length},i.StaticContentHandler.prototype.createContext=function(e){var t,i;return(t={}).key=e.attr("id"),t.parentElement=e.children().first()[0],t.index=e.index(),t.data=e[0],t.component=this.m_widget.getWidgetConstructor(),t=this.m_widget._FixRendererContext(t),this.IsHierarchical()&&(t.leaf=0==e.children("ul").length,i=e.parents("li."+this.m_widget.getItemElementStyleClass()),t.depth=i.length,0==i.length?t.parentKey=null:t.parentKey=i.first().attr("id")),t},i.StaticContentHandler.prototype.setAriaProperties=function(e,t){var i=this.m_widget.getSingleFocusableElement(e);this.shouldUseGridRole()?null==t.leaf||t.leaf?this.isCardLayout()?i.attr("role","gridcell"):(e.attr("role","row"),i!=e?i.attr("role","gridcell"):i.children().wrapAll("<div role='gridcell' class='oj-listview-cell-element'></div>")):(e.attr("role","presentation"),i!=e&&i.attr("role","gridcell")):(i.attr("role",this.IsHierarchical()?"treeitem":"option"),i!=e&&e.attr("role","presentation")),i.addClass(this.m_widget.getFocusedElementStyleClass())},i.StaticContentHandler.prototype.setGroupAriaProperties=function(e,t){var i=this.m_widget.getFocusedElementStyleClass();e.get(0).removeAttribute("aria-expanded"),e.removeClass(i),e.attr("role","row"),e.children().wrapAll("<div role='gridcell' aria-expanded='false' class='oj-listview-cell-element "+i+"'></div>"),this.isCardLayout()&&t>1&&e.children().first().attr("aria-colspan",t)},i.StaticContentHandler.prototype.unsetGroupAriaProperties=function(e){e.children("div").first().children().unwrap()},i.StaticContentHandler.prototype.unsetAriaProperties=function(e){var t=this.m_widget.getSingleFocusableElement($(e));t.removeAttr("role"),t.removeAttr("aria-selected"),t.removeAttr("aria-expanded"),t.removeClass(this.m_widget.getFocusedElementStyleClass()),this.shouldUseGridRole()&&!this.isCardLayout()&&(t!=e?($(e).removeAttr("role"),t.children().first().children().unwrap()):t.children().first().children().unwrap().children().unwrap())},i.StaticContentHandler.prototype.GetKey=function(e){return $(e).attr("id")},i.StaticContentHandler.prototype.FindElementByKey=function(e){return document.getElementById(e)},i.StaticContentHandler.prototype.isFocusable=function(e){return this.m_widget.getItemFocusable(e)},i.StaticContentHandler.prototype.isSelectable=function(e){return this.m_widget.getItemSelectable(e)},i.StaticContentHandler.prototype.isCardLayout=function(){return this.m_widget.isCardLayout()},i.StaticContentHandler.prototype.shouldUseGridRole=function(){return this.m_widget.ShouldUseGridRole()},i.KeyMap=function(){},i.KeyMap.prototype.set=function(e,t){var i;void 0===this._mapKeys&&void 0===this._mapValues&&(this._mapKeys=[],this._mapValues=[]),(i=this._mapKeys.indexOf(e))>-1?this._mapValues.splice(i,1,t):(this._mapKeys.push(e),this._mapValues.push(t))},i.KeyMap.prototype.get=function(e){var t;return this._mapKeys&&this._mapValues&&(t=this._mapKeys.indexOf(e))>-1&&this._mapValues.length>t?this._mapValues[t]:null},i.KeyMap.prototype.deleteValue=function(e){for(var t=this._mapValues.indexOf(e);t>-1;)this._mapValues.splice(t,1),this._mapKeys.splice(t,1),t=this._mapValues.indexOf(e,t)},i._ojListViewExpandedKeySet=function(){i._ojListViewExpandedKeySet.superclass.constructor.call(this)},i.Object.createSubclass(i._ojListViewExpandedKeySet,i.ExpandedKeySet,"ListViewExpandedKeySet");var ut=function(e,t){var n=function(){};return i.Object.createSubclass(n,e,""),n.prototype=$.extend(n.prototype,t),n};i._ojListView=ut(Object,{LEFT_KEY:37,RIGHT_KEY:39,DOWN_KEY:40,UP_KEY:38,TAB_KEY:9,ENTER_KEY:13,ESC_KEY:27,F2_KEY:113,SPACE_KEY:32,STATE_EXPANDED:0,STATE_COLLAPSED:1,STATE_NONE:2,MINIMUM_ITEM_HEIGHT:20,init:function(e){var t,n=this;this.readinessStack=[],this.element=e.element,this.ojContext=e.ojContext,this.OuterWrapper=e.OuterWrapper,this.options=e,this.element.uniqueId().addClass(this.GetStyleClass()+" oj-component-initnode"),this.OuterWrapper&&this.element[0].setAttribute("data-oj-context",""),this.signalTaskStart("Initializing"),this.SetRootElementTabIndex(),(t=this.GetDnDContext())&&(this.m_dndContext=t,this.ojContext._on(this.element,{dragstart:function(e){return t._handleDragStart(e)},dragenter:function(e){return t._handleDragEnter(e)},dragover:function(e){return t._handleDragOver(e)},dragleave:function(e){return t._handleDragLeave(e)},dragend:function(e){return n.m_preActive=!1,t._handleDragEnd(e)},drag:function(e){return t._handleDrag(e)},drop:function(e){return n.m_preActive=!1,t._handleDrop(e)}})),this.ojContext._on(this.element,{click:function(e){n.HandleMouseClick(e)},touchstart:function(e){n.HandleMouseDownOrTouchStart(e)},touchend:function(e){n.HandleTouchEndOrCancel(e)},touchcancel:function(e){n.HandleTouchEndOrCancel(e)},mousedown:function(e){0===e.button?n._recentTouch()||n.HandleMouseDownOrTouchStart(e):n.m_preActive=!0},mouseup:function(e){n._handleMouseUpOrPanMove(e),n.m_preActive=!1},mouseout:function(e){n._handleMouseOut(e)},mouseover:function(e){n._handleMouseOver(e)},keydown:function(e){n.HandleKeyDown(e)},keyup:function(e){n.HandleKeyUp(e)},ojpanmove:function(e){n._handleMouseUpOrPanMove(e)}}),this.ojContext._on(this.ojContext.element,{focus:function(e){n.HandleFocus(e)},blur:function(e){n.HandleBlur(e)}}),i.AgentUtils.getAgentInfo().browser===i.AgentUtils.BROWSER.FIREFOX&&this._getListContainer().attr("tabIndex",-1),this.ojContext._on(this.ojContext.element,{focusin:function(e){n.HandleFocus(e)},focusout:function(e){n.HandleFocusOut(e)}}),this._registerScrollHandler(),this.ojContext._focusable({applyHighlight:n.ShouldApplyHighlight(),recentPointer:n.RecentPointerCallback(),setupHandlers:function(e,t){n._focusInHandler=e,n._focusOutHandler=t}})},setupResources:function(){this.ojContext.document.bind("touchend.ojlistview touchcancel.ojlistview",this.HandleTouchEndOrCancel.bind(this)),this.InitContentHandler(),this._registerResizeListener(this._getListContainer()[0])},releaseResources:function(){this.ojContext.document.off(".ojlistview"),this.DestroyContentHandler(),this._unregisterResizeListener(this._getListContainer())},afterCreate:function(){this._buildList(),this.signalTaskEnd()},refresh:function(){this._resetInternal(),this.signalTaskStart("Refresh"),this.SetAriaProperties(),this.InitContentHandler(),this._registerScrollHandler(),this.signalTaskEnd()},whenReady:function(){return this.readyPromise},destroy:function(){this.element.removeClass(this.GetStyleClass()+" oj-component-initnode"),this._unregisterResizeListener(this._getListContainer()),this._resetInternal(),i.DomUtils.unwrap(this.element,this._getListContainer())},_clearBusyState:function(){if(this.readinessStack&&this.readinessStack.length>0)for(i.Logger.warn("ListView did not end with a clean state, this could happen if ListView is detached before fetch is complete.  State: "+this.readinessStack);this.readinessStack.length>0;)this.signalTaskEnd()},_resetInternal:function(){this.UnsetAriaProperties(),this._cleanupTabbableElementProperties(this.element),this.DestroyContentHandler(),this.m_active=null,this.m_isExpandAll=null,this.m_disclosing=null,this.m_itemHeight=null,this.ClearCache(),null!=this.m_dndContext&&this.m_dndContext.reset()},notifyAttached:function(){null!=this.m_contentHandler&&(this.syncScrollPosition(),this.m_contentHandler.notifyAttached())},notifyDetached:function(){this._getListContainer().removeClass("oj-focus-ancestor"),null!=this.m_active&&$(this.m_active.elem).removeClass("oj-focus oj-focus-highlight"),null!=this.m_hoverItem&&this._unhighlightElem(this.m_hoverItem,"oj-hover")},notifyShown:function(){null!=this.m_contentHandler&&(this.syncScrollPosition(),this.m_contentHandler.notifyShown())},getNodeBySubId:function(e){var t,i,n,o;if(null==e)return this.element[0];if("oj-listview-disclosure"===(t=e.subId)||"oj-listview-icon"===t){if(null!=(i=e.key)&&null!=(n=this.FindElementByKey(i))&&(o=$(n).find(".oj-clickable-icon-nocontext").first(),this._isExpandCollapseIcon(o)))return o.get(0)}else if("oj-listview-item"===t&&null!=(i=e.key))return this.FindElementByKey(i);return null},getSubIdByNode:function(e){var t,i;return null!=e&&this._isExpandCollapseIcon(e)&&null!=(t=this.FindItem(e))&&t.length>0&&null!=(i=this.GetKey(t[0]))?{subId:"oj-listview-disclosure",key:i}:null},getContextByNode:function(e){var t,i,n,o;return null!=(t=this.FindItem(e))&&t.length>0&&null!=(i=this.GetKey(t[0]))?(o={subId:"oj-listview-item",key:i,index:(n=t.parent()).children("."+this.getItemElementStyleClass()).index(t)},n.get(0)!=this.element.get(0)&&(o.parent=n.parent().get(0)),t.children().first().hasClass(this.getGroupItemStyleClass())?o.group=!0:o.group=!1,o):null},getDataForVisibleItem:function(e){var t,i,n,o;return null!=(t=e.key)&&(o=this.FindElementByKey(t)),null==o&&(i=e.index,n=null==(n=e.parent)?this.element.get(0):$(n).children("ul."+this.getGroupStyleClass()).first(),o=$(n).children("li").get(i)),null!=o&&$(o).hasClass(this.getItemStyleClass())?this._getDataForItem(o):null},_getDataForItem:function(e){return null==this.GetOption("data")?e:$.data(e,"data")},_unregisterResizeListener:function(e){e&&this._resizeHandler&&i.DomUtils.removeResizeListener(e,this._resizeHandler)},_registerResizeListener:function(e){e&&(null==this._resizeHandler&&(this._resizeHandler=this.HandleResize.bind(this)),i.DomUtils.addResizeListener(e,this._resizeHandler))},GetDnDContext:function(){if(void 0!==i.ListViewDndContext)return new i.ListViewDndContext(this)},HandleResize:function(e,t){e>0&&t>0&&null!=this.m_contentHandler&&this.m_contentHandler.HandleResize(e,t)},ShouldApplyHighlight:function(){return!0},RecentPointerCallback:function(){return function(){return!1}},ShouldRefresh:function(e){return null!=e.data||null!=e.drillMode||null!=e.groupHeaderPosition||null!=e.item||null!=e.scrollPolicy||null!=e.scrollPolicyOptions},_isKeySet:function(e){return e.values&&e.isAddAll},setOptions:function(e,t){var i,n,o,s,r,a=this;if(this.ShouldRefresh(e))return!0;if(null!=e.expanded&&this.m_contentHandler.IsHierarchical())if(this._collapsedKeys=void 0,n=e.expanded,Array.isArray(n)||n.values){this.signalTaskStart("Set expanded option"),this._collapseAll(),this._ignoreExpanded=!0;try{(this._isKeySet(n)?n.values():n).forEach(function(e){a.expandKey(e,!0,!0,!0)})}finally{this._ignoreExpanded=void 0,this.signalTaskEnd()}}else if("all"===n||n.deletedValues)return!0;return null!=e.currentItem?null!=(i=this.FindElementByKey(e.currentItem))&&(i=$(i),this.SkipFocus(i)||((o=document.activeElement)&&this.element.get(0).contains(o)?this.ActiveAndFocus(i,null):this._setActive(i,null,!0))):null===e.currentItem&&(this.UnhighlightActive(),this.m_active=null,this.SetRootElementTabIndex()),this.HandleSelectionOption(e),null!=e.selectionMode&&(this._clearSelection(!0),this.SetAriaProperties(),this.UpdateItemAriaProperties(e.selectionMode)),null!=e.scrollTop&&(s=this._getScroller(),null==(r=e.scrollTop)||isNaN(r)||(s.scrollTop=r)),null!=e.scrollPosition&&(this._setCurrentScrollPosition(e.scrollPosition),delete e.scrollPosition),this._shouldDragSelectedItems()&&null!=this.m_active&&null!=e.dnd&&null!=e.dnd.reorder&&("enabled"===e.dnd.reorder.items?this.m_dndContext._setItemDraggable(this.m_active.elem):"disabled"===e.dnd.reorder.items&&this.m_dndContext._unsetItemDraggable(this.m_active.elem)),!1},HandleSelectionOption:function(e){var t,i,n;if(null!=e.selection&&this._isSelectionEnabled())for(e.selection=this._filterSelection(e.selection),i=e.selection,this._clearSelection(!1),n=0;n<i.length;n++)null!=(t=this.FindElementByKey(i[n]))&&this._applySelection(t,i[n])},Trigger:function(e,t,i){return this.ojContext._trigger(e,t,i)},SetOption:function(e,t,i){this.ojContext.option(e,t,i)},GetOption:function(e){return this.ojContext.option(e)},_getBusyDescription:function(e){return"The component identified by '"+(this.ojContext._IsCustomElement()?this.getRootElement().attr("id"):this.element.attr("id"))+"', "+e},signalTaskStart:function(e){var t,n,o=this;this.readinessStack&&(0==this.readinessStack.length&&(this.readyPromise=new Promise(function(e,t){o.readyResolve=e}),t=i.Context.getContext(this.element[0]).getBusyContext(),n=null!=e?{description:this._getBusyDescription(e)}:{},o.busyStateResolve=t.addBusyState(n)),this.readinessStack.push(null!=e?e:"unknown task"))},signalTaskEnd:function(){this.readinessStack&&this.readinessStack.length>0&&(this.readinessStack.pop(),0==this.readinessStack.length&&(this.readyResolve(null),this.busyStateResolve(null),this.busyStateResolve=null))},isReady:function(){return null==this.busyStateResolve},throwError:function(e){if(this.readinessStack)for(;this.readinessStack.length>0;)this.signalTaskEnd();throw e},getItems:function(e){var t,i=this,n=[];return $.each(e,function(e,o){null!=(t=i.FindElementByKey(o))&&n.push(t)}),n},isCardLayout:function(){return(this.ojContext._IsCustomElement()?this.getRootElement():this.element).hasClass("oj-listview-card-layout")},ShouldUseGridRole:function(){return!0},ShouldUpdateScrollPosition:function(){return this.ShouldUseGridRole()&&this.ojContext._IsCustomElement()},DestroyContentHandler:function(){null!=this.m_contentHandler&&(this.m_contentHandler.Destroy(),delete this.m_contentHandler,this.m_contentHandler=null),this._clearBusyState()},InitContentHandler:function(){var e;this.signalTaskStart("Initialize ContentHandler"),this.showStatusText(),null!=(e=this.GetOption("data"))?void 0!==i.TableDataSource&&e instanceof i.TableDataSource?this.m_contentHandler=new i.IteratingDataProviderContentHandler(this,this.element[0],new i.TableDataSourceAdapter(e)):void 0!==i.TreeDataSource&&e instanceof i.TreeDataSource?this.m_contentHandler=new i.TreeDataSourceContentHandler(this,this.element[0],e):i.DataProviderFeatureChecker.isIteratingDataProvider(e)?this.m_contentHandler=new i.IteratingDataProviderContentHandler(this,this.element[0],e):this.throwError("Invalid data or missing module"):this.m_contentHandler=new i.StaticContentHandler(this,this.element[0]),this.m_contentHandler.RenderContent(),this.signalTaskEnd()},UpdateActiveDescendant:function(e){this.element.attr("aria-activedescendant",e.attr("id"))},SetAriaProperties:function(){this._isMultipleSelection()?this.element.attr("aria-multiselectable",!0):this._isSelectionEnabled()&&this.element.attr("aria-multiselectable",!1)},UnsetAriaProperties:function(){this.element.removeAttr("aria-activedescendant").removeAttr("aria-multiselectable")},UpdateItemAriaProperties:function(e){var t,i,n,o=this;for("none"==e?(this.element.removeAttr("aria-multiselectable"),t=function(e){o.getFocusItem(e).removeAttr("aria-selected")}):("single"==e?this.element.attr("aria-multiselectable",!1):this.element.attr("aria-multiselectable",!0),t=function(e){o.getFocusItem(e).attr("aria-selected","false")}),i=this._getItemsCache(),n=0;n<i.length;n++)t($(i[n]))},_buildList:function(e){var t,i,n;t=this._getListContainer(),this.SetAriaProperties(),this.m_elementOffset=this.element.get(0).offsetTop,i=this._buildStatus(),t.append(i),this.m_status=i,n=this._buildAccInfo(),t.append(n),this.m_accInfo=n,this._isTouchSupport()&&null!=this.m_dndContext&&t.append(this._buildAccInstructionText())},_buildStatus:function(){var e,t;return(e=$(document.createElement("div"))).addClass("oj-icon oj-listview-loading-icon"),(t=$(document.createElement("div"))).addClass("oj-listview-status-message oj-listview-status").attr({id:this._createSubId("status"),role:"status"}),t.append(e),t},_buildAccInfo:function(){var e=$(document.createElement("div"));return e.addClass("oj-helper-hidden-accessible").attr({id:this._createSubId("info"),role:"status"}),e},_buildAccInstructionText:function(){var e=$(document.createElement("div"));return e.addClass("oj-helper-hidden-accessible").attr({id:this._createSubId("instr")}),e.text(this.ojContext.getTranslatedString("accessibleReorderTouchInstructionText")),e},_setAccInfoText:function(e){""!=e&&this.m_accInfo.text()!=e&&this.m_accInfo.text(e)},showStatusText:function(){var e,t,i,n,o=this;this.m_showStatusTimeout||(this.m_showStatusTimeout=setTimeout(function(){$(document.getElementById(o._createSubId("empty"))).remove(),e=o.ojContext.getTranslatedString("msgFetchingData"),i=o._getListContainer(),o.m_status.attr("aria-label",e).css("left",Math.max(0,i.outerWidth()/2-o.m_status.outerWidth()/2)).css("top",Math.max(0,i.outerHeight()/2-o.m_status.outerHeight()/2)).show(),void 0===o.m_minHeightSet&&(t=o.m_status.get(0).offsetHeight,n=i.get(0).offsetHeight,i.css("minHeight",Math.max(n,t+o._getListContainerBorderWidth())),o.m_minHeightSet=!0),o.m_showStatusTimeout=null},this._getShowStatusDelay()))},_getShowStatusDelay:function(){var e;return null==this.defaultOptions&&(this.defaultOptions=i.ThemeUtils.parseJSONFromFontFamily(this.getOptionDefaultsStyleClass())),e=parseInt(this.defaultOptions.showIndicatorDelay,10),isNaN(e)?0:e},hideStatusText:function(){this.m_showStatusTimeout&&(clearTimeout(this.m_showStatusTimeout),this.m_showStatusTimeout=null),this.m_status.hide()},getRootElement:function(){return this._getListContainer()},_getListContainer:function(){return null==this.m_container&&(this.m_container=this._createListContainer()),this.m_container},_createListContainer:function(){var e;return this.OuterWrapper?e=$(this.OuterWrapper):(e=$(document.createElement("div")),this.element.parent()[0].replaceChild(e[0],this.element[0])),e.addClass(this.GetContainerStyleClass()).addClass("oj-component"),e.prepend(this.element),e},_getEmptyText:function(){return this.ojContext.getTranslatedString("msgNoData")},_buildEmptyText:function(){var e,t;return e=this._getEmptyText(),(t=document.createElement("li")).id=this._createSubId("empty"),t.className=this.getEmptyTextStyleClass()+" "+this.getEmptyTextMarkerClass(),t.textContent=e,t},GetState:function(e){var t=this.getFocusItem(e).attr("aria-expanded");return"true"==t?this.STATE_EXPANDED:"false"==t?this.STATE_COLLAPSED:this.STATE_NONE},SetState:function(e,t){var i=this.isExpandable();t==this.STATE_EXPANDED?(this.getFocusItem(e).attr("aria-expanded","true"),i&&e.removeClass("oj-collapsed").addClass("oj-expanded")):t==this.STATE_COLLAPSED&&(this.getFocusItem(e).attr("aria-expanded","false"),i&&e.removeClass("oj-expanded").addClass("oj-collapsed"))},_getItemOption:function(e,t,i){var n;return"function"==typeof(n=this.GetOption("item")[e])&&i?n.call(this,t):n},getItemFocusable:function(e){return this._getItemOption("focusable",e,!0)},getItemSelectable:function(e){return this.getItemFocusable(e)&&this._getItemOption("selectable",e,!0)},_getItemRenderer:function(){var e=this._getItemOption("renderer",null,!1);return"function"!=typeof e?null:this._WrapCustomElementRenderer(e)},getItemTemplate:function(){var e;return void 0===this.m_template&&(this.m_template=null,this.ojContext._IsCustomElement()&&(e=i.BaseCustomElementBridge.getSlotMap(this.getRootElement()[0]).itemTemplate)&&e.length>0&&"template"===e[0].tagName.toLowerCase()&&(this.m_template=e[0])),this.m_template},itemInsertComplete:function(e,t){},BeforeInsertItem:function(){},itemRemoveComplete:function(e){if(null!=this.m_active&&this.m_active.elem&&$(this.m_active.elem).get(0)==e){var t=e.nextElementSibling;null!=t&&$(t).hasClass(this.getItemElementStyleClass())||null!=(t=e.previousElementSibling)&&$(t).hasClass(this.getItemElementStyleClass())||this.SetOption("currentItem",null),null!=t&&$(t).hasClass(this.getItemElementStyleClass())&&this.SetOption("currentItem",this.GetKey(t))}null!=e&&e.id&&null!=this.m_keyElemMap&&this.m_keyElemMap.deleteValue(e.id)},itemRenderComplete:function(e,t){var n,o,s,r,a,l,u,h;if(null!=this.m_dndContext&&this.m_dndContext.itemRenderComplete(e),this._disableAllTabbableElements(e),n=t.key,this._isSelectionEnabled())if(o=this.GetOption("selection"),this.IsSelectable(e)){for(r=0;r<o.length;r++)if((o[r]==n||i.Object.compareValues(o[r],n))&&(this._applySelection(e,o[r]),!this._isMultipleSelection())){o.length>1&&(s=this.FindElementByKey(n),this._setSelectionOption([n],null,s,t.data));break}0==o.length&&this._isSelectionRequired()&&(this._applySelection(e,n),this._setSelectionOption([n],null,[e],t.data))}else if((a=this.GetIndexOf(o,n))>-1){for((l=o.slice(0)).splice(a,1),s=new Array(l.length),r=0;r<l.length;r++)s[r]=this.FindElementByKey(l[r]);this._setSelectionOption(l,null,s)}this.m_contentHandler.IsHierarchical()&&null==this._ignoreExpanded&&this.GetState($(e))==this.STATE_COLLAPSED&&(u=this.GetOption("expanded"),this._isExpandAll()?(this.ojContext._IsCustomElement()||null==this._collapsedKeys)&&this.ExpandItem($(e),null,!1,null,!1,!1,!1):!this.ojContext._IsCustomElement()&&Array.isArray(u)?(h=this,$.each(u,function(t,i){i!=n||null!=h._collapsedKeys&&-1!=h._collapsedKeys.indexOf(i)||h.ExpandItem($(e),null,!1,null,!1,!1,!1)})):u.has&&u.has(n)&&this.ExpandItem($(e),null,!1,null,!1,!1,!1)),null!=this.m_active&&n==this.m_active.key&&null!=this.m_active.elem&&e!=this.m_active.elem.get(0)&&(this.m_active.elem=$(e))},renderComplete:function(){var e,t,i,n;if(this.hideStatusText(),$(document.getElementById(this._createSubId("empty"))).remove(),this.m_items=null,this.m_groupItems=null,this._isEmptyGrid()&&this.element[0].removeChild(this.element[0].children[0]),0==this.element[0].childElementCount)return e=this._buildEmptyText(),this.element.append(e),void this.Trigger("ready",null,{});this.ShouldUpdateScrollPosition()&&null==this.m_itemHeight&&(this.m_contentHandler.IsHierarchical()?(t=this.element.children("li."+this.getItemElementStyleClass()).first()).length>0&&(this.m_itemHeight=t.get(0).firstElementChild.offsetHeight):(t=$(this._getRootNodeForItems()).children("li."+this.getItemStyleClass()).first()).length>0&&(this.m_itemHeight=t.get(0).offsetHeight)),null!=(i=this.GetOption("currentItem"))&&(null==(n=this.FindElementByKey(i))?this.SetOption("currentItem",null):null!=this.m_active||this.SkipFocus($(n))||this.ActiveAndFocus($(n),null)),this._getListContainer().hasClass("oj-focus-ancestor")&&null==this.m_active&&null==i&&this._initFocus(),this.m_scrollAndFetch=void 0,this.m_ticking&&null==this.m_scrollPosition||this.syncScrollPosition(),this.Trigger("ready",null,{})},_isEmptyGrid:function(){return this.ShouldUseGridRole()&&this.isCardLayout()&&!this.m_contentHandler.IsHierarchical()&&this.element[0].children[0]&&0==this.element[0].children[0].children[0].childElementCount},_setScrollY:function(e,t){this._skipScrollUpdate||this.signalTaskStart("waiting for scroll handler"),this._skipScrollUpdate=!0,e.scrollTop=t,this._handlePinGroupHeader()},_setScrollX:function(e,t){this._skipScrollUpdate||this.signalTaskStart("waiting for scroll handler"),this._skipScrollUpdate=!0,i.DomUtils.setScrollLeft(e,t)},_getScrollX:function(e){return i.DomUtils.getScrollLeft(e)},syncScrollPosition:function(e){var t,i,n,o,s,r,a;if((t=this._getScroller()).scrollHeight!=t.clientHeight)if(this.ShouldUpdateScrollPosition()&&(null!=this.m_scrollPosition?e=this.m_scrollPosition:void 0===e&&(e=this.GetOption("scrollPosition")),n=(i=this._getScrollCoordinates(e)).x,o=i.y,isNaN(n)&&isNaN(o)))null!=this.m_scrollPosition&&(this.SetOption("scrollPosition",this._getCurrentScrollPosition(s),{_context:{originalEvent:null,internalSet:!0}}),this.signalTaskEnd(),this.m_scrollPosition=null);else{if(void 0===i&&(o=this.GetOption("scrollTop")),s=t.scrollTop,!isNaN(n)&&isNaN(o)||!isNaN(n)&&o==s&&n!=this._getScrollX(t,n))this._setScrollX(t,n),r=this.GetOption("scrollPosition"),a={x:n=this._getScrollX(t),y:r.y,index:r.index,key:r.key,offsetX:n,offsetY:r.offsetY},r.parent&&(a.parent=r.parent),this.SetOption("scrollPosition",a,{_context:{originalEvent:null,internalSet:!0}});else if(o!=s){if(this._setScrollY(t,o),isNaN(n)||n==this._getScrollX(t,n)||this._setScrollX(t,n),s=t.scrollTop,Math.abs(s-o)>=1&&this.m_contentHandler.hasMoreToFetch&&this.m_contentHandler.hasMoreToFetch())return null==this.m_scrollPosition&&this.signalTaskStart("Scroll position needs to resolve further"),this.m_scrollAndFetch=!0,void(this.m_scrollPosition=e);this.SetOption("scrollPosition",this._getCurrentScrollPosition(s),{_context:{originalEvent:null,internalSet:!0}})}else e&&(null==e.key||isNaN(e.index))&&this.SetOption("scrollPosition",this._getCurrentScrollPosition(s),{_context:{originalEvent:null,internalSet:!0}});null!=this.m_scrollPosition&&(this.signalTaskEnd(),this.m_scrollPosition=null)}},restoreCurrentItem:function(){var e=this.GetOption("currentItem");if(null!=e){var t=this.FindElementByKey(e);null==t||this.SkipFocus($(t))||this.ActiveAndFocus($(t),null)}},ClearCache:function(){this.m_items=null,this.m_groupItems=null},StartAnimation:function(e,t,n){return null==n&&(n=this.getAnimationEffect(t)),i.AnimationUtils.startAnimation(e,t,n,this.ojContext)},notifyContextMenuGesture:function(e,t,i){var n,o,s;if(this.IsNodeEditableOrClickable($(t.target)))return!1;n=$(t.target).closest("."+this.getItemElementStyleClass()),this.PrepareContextMenu(n),n.length>0&&!this.SkipFocus($(n[0]))&&this.SetCurrentItem($(n[0]),null),s=this.element,2===t.button?s=this._findItem($(t.target)):null!=this.m_active&&(s=this.m_active.elem),o={launcher:s,initialFocus:"menu"},"keyboard"===i&&(o.position={my:"start top",at:"start bottom",of:this.m_active.elem}),this.ojContext._OpenContextMenu(t,i,o)},PrepareContextMenu:function(e){null!=this.m_dndContext&&this.m_dndContext.prepareContextMenu(this.ojContext._GetContextMenu())},IsElementEditableOrClickable:function(e){return null!=e.prop("nodeName").match(/^INPUT|SELECT|OPTION|BUTTON|^A\b|TEXTAREA/)},IsNodeEditableOrClickable:function(e){for(;null!=e&&e[0]!=this.element[0]&&"LI"!=e.prop("nodeName");)if(3!=e[0].nodeType){var t=e.attr("tabIndex"),i=e.attr("data-oj-tabindex");if(null!=t&&t>=0&&!e.hasClass(this.getFocusedElementStyleClass())&&!e.hasClass("oj-listview-cell-element"))return!0;if(this.IsElementEditableOrClickable(e)&&(-1!=t||-1!=i))return!0;e=e.parent()}else e=e.parent();return!1},_disableAllTabbableElements:function(e,t){var i,n;(i=$(e)).hasClass(this.getItemStyleClass())||(i=$(i.get(0).firstElementChild)),i.children().first().hasClass("oj-listview-cell-element")&&(i=$(i.get(0).firstElementChild)),i.find("a, input, select, textarea, button, object, .oj-component-initnode, [tabIndex]").each(function(e){$(this).removeAttr("data-first").removeAttr("data-last"),n=parseInt($(this).attr("tabIndex"),10),!(isNaN(n)||n>=0)||void 0!==t&&this==document.activeElement||$(this).attr("tabIndex",-1).attr("data-tabmod",isNaN(n)?-1:n)})},_disableAllTabbableElementsBeforeItem:function(e){var t,i,n;for(i=(t=this._getItemsCache()).index(e),n=0;n<=i;n++)this._disableAllTabbableElements(t[n],!0)},_disableAllTabbableElementsAfterItem:function(e){var t,i,n;if(-1!=(i=(t=this._getItemsCache()).index(e)))for(n=i;n<=t.length-1;n++)this._disableAllTabbableElements(t[n],!0)},_enableAllTabbableElements:function(e){var t,i;(t=(t=$(e).find("[data-tabmod]").each(function(e){i=parseInt($(this).attr("data-tabmod"),10),$(this).removeAttr("data-tabmod"),-1==i?$(this).removeAttr("tabIndex"):$(this).attr("tabIndex",i)})).filter(":visible")).first().attr("data-first","true"),t.last().attr("data-last","true")},_cleanupTabbableElementProperties:function(e){$(e).find("[data-tabmod]").removeAttr("tabIndex").removeAttr("data-tabmod").removeAttr("data-first").removeAttr("data-last")},SkipFocus:function(e){return e.hasClass("oj-skipfocus")},GetFocusElement:function(){var e;if(this._getListContainer().hasClass("oj-focus-ancestor")){if(this.m_active)return this.getFocusItem(this.m_active.elem)[0];if((e=this.element.children("."+this.getEmptyTextStyleClass()).first()).length>0&&0==e.attr("tabIndex"))return e[0]}return this.element[0]},_isFocusBlurTriggeredByDescendent:function(e){return void 0===e.relatedTarget||!(null==e.relatedTarget||!$.contains(this.ojContext.element.get(0),e.relatedTarget))},HandleFocus:function(e){var t;this._getListContainer().addClass("oj-focus-ancestor"),null==this.m_active?(t=this._findItem($(e.target)),this.m_preActive||this._isFocusBlurTriggeredByDescendent(e)||null!=t&&!this.SkipFocus(t)||this._initFocus(e)):(this.m_preActive||e.target!==this.ojContext.element[0]||this._isFocusBlurTriggeredByDescendent(e)||(this.HighlightActive(),this._focusItem(this.m_active.elem)),this.RemoveRootElementTabIndex(),this._setTabIndex(this.m_active.elem))},_initFocus:function(e){var t,i,n,o;for(t=this._getItemsCache(),i=0;i<t.length;i++)if(n=$(t[i]),!this.SkipFocus(n)){this.SetCurrentItem(n,e);break}0==t.length&&(o=this.element.children("."+this.getEmptyTextStyleClass()).first()).length>0&&(o.attr("tabIndex",0),o.focus(),this.RemoveRootElementTabIndex())},HandleFocusOut:function(e){this.HandleBlur(e)},_supportRelatedTargetOnBlur:function(){var e=i.AgentUtils.getAgentInfo();return!(e.browser==i.AgentUtils.BROWSER.FIREFOX&&parseInt(e.browserVersion,10)<48)},_isExtraBlurEvent:function(e){var t=i.AgentUtils.getAgentInfo();return null==e.relatedTarget&&t.browser==i.AgentUtils.BROWSER.IE&&e.target==this.ojContext.element.get(0)},HandleBlur:function(e){this._supportRelatedTargetOnBlur()&&!this._isExtraBlurEvent(e)&&(this._isFocusBlurTriggeredByDescendent(e)||this.m_preActive||this._doBlur(),this._isExpandCollapseIcon(e.target)&&this._focusOutHandler($(e.target)))},_doBlur:function(){var e;this._getListContainer().removeClass("oj-focus-ancestor"),this.UnhighlightActive(),null!=this.m_active?(this._resetTabIndex(this.m_active.elem),this._removeSkipItemAriaLabel(this.m_active.elem)):(e=this.element.children("."+this.getEmptyTextStyleClass()).first()).length>0&&e.removeAttr("tabIndex"),this.SetRootElementTabIndex()},_handleMouseOut:function(e){var t=this.FindItem(e.target);null!=t&&(this.m_hoverItem=null,this._unhighlightElem(t,"oj-hover"))},_handleMouseOver:function(e){if(!this._recentTouch()){var t=this.FindItem(e.target);null==t||this.SkipFocus(t)||(this.m_hoverItem=t,this._highlightElem(t,"oj-hover"))}},_recentTouch:function(){return Date.now()-this._lastTouch<500},HandleKeyDown:function(e){var t,i,n;if(this.isExpandable()&&((t=e.keyCode)===this.LEFT_KEY||t===this.RIGHT_KEY))if(i=this.m_active.elem,t===this.LEFT_KEY){if(this.GetState(i)==this.STATE_EXPANDED)return void this.CollapseItem(i,e,!0,this.m_active.key,!0,!0)}else if(this.GetState(i)==this.STATE_COLLAPSED)return void this.ExpandItem(i,e,!0,this.m_active.key,!0,!0,!0);n=this.HandleSelectionOrActiveKeyDown(e),null!=this.m_dndContext&&(n=n||this.m_dndContext.HandleKeyDown(e)),!0===n&&e.preventDefault(),this.m_keyProcessed=n},HandleKeyUp:function(e){e.keyCode==this.ESC_KEY&&this.m_keyProcessed&&e.stopPropagation(),this.m_keyProcessed=void 0},_handleMouseUpOrPanMove:function(e){this.m_preActiveItem&&this._unhighlightElem(this.m_preActiveItem,"oj-focus"),null!=this.m_dndContext&&this.m_dndContext._unsetDraggable($(e.target))},HandleMouseDownOrTouchStart:function(e){var t,i;i=$(e.target),null!=this.m_dndContext&&this.m_dndContext._setDraggable(i),null!=(t=this._findItem(i,!0))&&this._isClickthroughDisabled(t)&&(this.m_preActive=!0,t=null),null==t||0==t.length||this.SkipFocus(t)||i.hasClass("oj-listview-drag-handle")||(this.m_preActive=!0,this._getListContainer().hasClass("oj-focus-ancestor")||this._getListContainer().addClass("oj-focus-ancestor"),this.m_preActiveItem=t,this._highlightElem(t,"oj-focus"),this._makeFocusable(t),t.get(0).contains(document.activeElement)||this._focusItem(t),this.RemoveRootElementTabIndex(),null!=this.m_active&&this.m_active.elem.get(0)!=t.get(0)&&this._resetTabIndex(this.m_active.elem),e.originalEvent.touches&&e.originalEvent.touches.length>0&&(this.m_touchPos={x:e.originalEvent.changedTouches[0].pageX,y:e.originalEvent.changedTouches[0].pageY}))},HandleTouchEndOrCancel:function(e){var t,i,n,o;null!=this.m_preActiveItem&&(this._unhighlightElem(this.m_preActiveItem,"oj-focus"),null!=this.m_touchPos&&(t=this.m_preActiveItem.offset(),(i=this.getAnimationEffect("pointerUp")).offsetX=this.m_touchPos.x-t.left+"px",i.offsetY=this.m_touchPos.y-t.top+"px",n=(o=this.m_preActiveItem.children("."+this.getGroupItemStyleClass())).length>0?o.get(0):this.getFocusItem(this.m_preActiveItem).get(0),this.StartAnimation(n,"pointerUp",i),this.m_touchPos=null)),this._lastTouch=Date.now(),this._handleMouseOut(e)},_enterActionableMode:function(){var e;e=this.m_active.elem,this._disableAllTabbableElements(e),this._enableAllTabbableElements(e),e.find("[data-first]").length>0&&this._setActionableMode(!0)},_exitActionableMode:function(){this._setActionableMode(!1),this._disableAllTabbableElements(this.m_active.elem)},HandleMouseClick:function(e){var t,i,n,o,s;if(0===e.button)if(t=this.getCollapseIconStyleClass(),i=this.getExpandIconStyleClass(),n=this.getGroupItemStyleClass(),(o=$(e.target)).hasClass(i))this._collapse(e),e.preventDefault();else if(o.hasClass(t))this._expand(e),e.preventDefault();else{if(null==(s=this._findItem(o))||0==s.length||this.SkipFocus(s))return;if(this._isActionableMode()&&null!=this.m_active&&this.m_active.elem.get(0)!=s.get(0)&&this._exitActionableMode(),this._getListContainer().hasClass("oj-focus-ancestor")||this._getListContainer().addClass("oj-focus-ancestor"),this._isSelectionEnabled()&&this.IsSelectable(s[0])?(this._isTouchSupport()?this._handleTouchSelection(s,e):this.HandleClickSelection(s,e),this.ShouldUseGridRole()&&e.target==s.get(0)&&this._focusItem(s),this._shouldDragSelectedItems()&&this.m_dndContext.setSelectionDraggable()):this.HandleClickActive(s,e),this._isInputElement(o.get(0)))return void this._enterActionableMode();this.isExpandable()&&o.closest("."+n)&&(this.GetState(s)==this.STATE_COLLAPSED?this._expand(e):this.GetState(s)==this.STATE_EXPANDED&&this._collapse(e))}},_shouldDragSelectedItems:function(){return null!=this.m_dndContext&&!this.m_dndContext.shouldDragCurrentItem()},_isTouchSupport:function(){return i.DomUtils.isTouchSupported()},_isNonWindowTouch:function(){return this._isTouchSupport()&&i.AgentUtils.getAgentInfo().os!=i.AgentUtils.OS.WINDOWS},_ctrlEquivalent:function(e){return i.DomUtils.isMetaKeyPressed(e)},_createSubId:function(e){return[this.element.attr("id"),e].join(":")},FindItem:function(e){return $(e).closest("."+this.getItemElementStyleClass())},_isClickthroughDisabled:function(e){return e.hasClass("oj-clickthrough-disabled")},_findItem:function(e,t){for(var i=e;i.length>0;){if(this._isClickthroughDisabled(i))return t?i:null;if(i.hasClass(this.getItemElementStyleClass()))return i;i=i.parent()}return null},_getListContainerBorderWidth:function(){return null==this.m_borderWidth&&(this.m_borderWidth=parseInt(this._getListContainer().css("border-top-width"),10)+parseInt(this._getListContainer().css("border-bottom-width"),10)),this.m_borderWidth},scrollToItem:function(e){var t,i,n;null!=(t=e.key)&&null!=(i=this.FindElementByKey(t))&&($(i).hasClass(this.getItemStyleClass())?this._scrollToVisible(i):(n=$(i).children("."+this.getGroupItemStyleClass()).first(),this._scrollToGroupHeader(n.get(0))))},_scrollToVisible:function(e){var t,i,n,o,s,r,a,l,u=0;t=e.offsetTop,i=e.offsetHeight,o=(n=this._getListContainer()[0]).scrollTop,s=n.offsetHeight,null!=this.m_groupItemToPin&&(r=parseInt(this.m_groupItemToPin.style.top,10),a=$(this.m_groupItemToPin).outerHeight(),t<=r&&r<t+i?u=(i+t-r)/2:t>=r&&t<r+a&&(u=(r+a-t)/2)),t>=o&&t+i<=o+s?u>0&&(n.scrollTop=o-u):((l=Math.max(0,Math.min(t-u,Math.abs(t+i-s))))>o&&(l+=this._getListContainerBorderWidth()),n.scrollTop=l)},GetKey:function(e){return this.m_contentHandler.GetKey(e)},FindElementByKey:function(e){var t;return null!=this.m_keyElemMap&&null!=(t=this.m_keyElemMap.get(e))?document.getElementById(t):this.m_contentHandler.FindElementByKey(e)},GetIndexOf:function(e,t){var n;for(n=0;n<e.length;n++)if(t==e[n]||i.Object.compareValues(t,e[n]))return n;return-1},_isExpandCollapseIcon:function(e){return $(e).hasClass(this.getExpandIconStyleClass())||$(e).hasClass(this.getCollapseIconStyleClass())},IsArrowKey:function(e){return this.isCardLayout()?e==this.UP_KEY||e==this.DOWN_KEY||e==this.LEFT_KEY||e==this.RIGHT_KEY:e==this.UP_KEY||e==this.DOWN_KEY},_getItemsCache:function(){var e,t;return null==this.m_items&&(e=this.getGroupCollapseStyleClass(),t="."+this.getItemElementStyleClass()+":visible",this.m_items=this.element.find(t).filter(function(t){return!$(this).parent().hasClass(e)||!$(this).parent().parent().hasClass("oj-collapsed")})),this.m_items},_handleLastItemKeyboardFocus:function(e){var t=e.get(0).nextElementSibling;if(null==t||!$(t).hasClass(this.getItemElementStyleClass())){if(this.m_contentHandler.IsHierarchical()&&e.parent().hasClass(this.getGroupStyleClass())&&null!=e.parent().parent().get(0).nextElementSibling)return;var i=this._getScroller();i.scrollTop<i.scrollHeight&&(i.scrollTop=i.scrollHeight)}},HandleArrowKeys:function(e,t,i){var n,o;if(!this.m_contentHandler.IsReady())return!0;switch(n=!t||this.m_isNavigate?this.m_active.elem:this.m_selectionFrontier,o=!1,e){case this.UP_KEY:this.isCardLayout()&&$(n).hasClass(this.getItemStyleClass())?this._gotoItemAbove(n,t,i):this._gotoPrevItem(n,t,i),o=!0;break;case this.DOWN_KEY:this.isCardLayout()&&$(n).hasClass(this.getItemStyleClass())?this._gotoItemBelow(n,t,i):this._gotoNextItem(n,t,i),o=!0;break;case this.LEFT_KEY:case this.RIGHT_KEY:this.isCardLayout()&&("rtl"==this.ojContext._GetReadingDirection()&&(e=e==this.LEFT_KEY?this.RIGHT_KEY:this.LEFT_KEY),e==this.LEFT_KEY?this._gotoPrevItem(n,t,i):this._gotoNextItem(n,t,i),o=!0)}return o},_gotoNextItem:function(e,t,i){var n,o,s;if(o=(n=this._getItemsCache()).index(e),++o<n.length){for(s=$(n[o]);this.SkipFocus(s);){if(++o==n.length)return;s=$(n[o])}t?(this._extendSelection(s,i),this.m_isNavigate=!1):(this.SetCurrentItem(s,i),this.m_isNavigate=!0),this._handleLastItemKeyboardFocus(s)}},_gotoPrevItem:function(e,t,i){var n,o,s;if(o=(n=this._getItemsCache()).index(e),--o>=0){for(s=$(n[o]);this.SkipFocus(s);){if(--o<0)return;s=$(n[o])}t?(this._extendSelection(s,i),this.m_isNavigate=!1):(this.SetCurrentItem(s,i),this.m_isNavigate=!0)}},_getColumnCount:function(e){var t,i,n;return e.each(function(e){if(i=this.offsetTop,void 0===n)n=i;else if(n!=i)return!1;t=e}),t+1},_updateSkipItemAriaLabel:function(e,t){var i,n,o;i=this._createSubId("extra_info"),null==this.m_skipAriaLabelText&&((n=$(document.createElement("div"))).addClass("oj-helper-hidden-accessible").attr("id",i),this._getListContainer().append(n),this.m_skipAriaLabelText=n),this.m_skipAriaLabelText.text(this.ojContext.getTranslatedString("accessibleNavigateSkipItems",{numSkip:t})),(o=this.getFocusItem(e)).uniqueId().attr("aria-labelledby",i+" "+o.prop("id"))},_removeSkipItemAriaLabel:function(e){var t=this.getFocusItem(e);t.length>0&&t.get(0).removeAttribute("aria-labelledby")},_gotoItemAbove:function(e,t,i){var n,o,s,r,a,l,u;if(e.hasClass(this.getItemStyleClass())){if(o=(n=e.parent()).children("li."+this.getItemStyleClass()),s=this._getColumnCount(o),(a=(r=o.index(e))-s)<0?n.hasClass(this.getGroupStyleClass())&&(l=n.parent(),u=r):(l=$(o.get(a)),u=s-1),l.length>0){if(this.SkipFocus(l))return;t?(this._extendSelection(l,i),this.m_isNavigate=!1):(null!=u&&u>0&&this._updateSkipItemAriaLabel(l,u),this.SetCurrentItem(l,i),this.m_isNavigate=!0)}}else this._gotoPrevItem(e)},_gotoItemBelow:function(e,t,i){var n,o,s,r,a,l,u,h;if(e.hasClass(this.getItemStyleClass())){if(o=(n=e.parent()).children("li."+this.getItemStyleClass()),s=this._getColumnCount(o),(a=(r=o.index(e))+s)>=o.length?(l=Math.ceil(o.length/s),h=o.length-1-r,r<Math.max(0,(l-1)*s)?(u=o.last(),h--):n.hasClass(this.getGroupStyleClass())&&(u=n.parent().next("li."+this.getItemElementStyleClass()))):(u=$(o.get(a)),h=s-1),u.length>0){if(this.SkipFocus(u))return;t?(this._extendSelection(u,i),this.m_isNavigate=!1):(null!=h&&h>0&&this._updateSkipItemAriaLabel(u,h),this.SetCurrentItem(u,i),this.m_isNavigate=!0)}}else this._gotoNextItem(e)},_isActionableMode:function(){return"actionable"==this.m_keyMode},_setActionableMode:function(e){this.m_keyMode=e?"actionable":"navigation",e||this.element[0].focus()},getFocusItem:function(e){var t;return e.hasClass(this.getFocusedElementStyleClass())?this.ShouldUseGridRole()&&"row"==e.attr("role")?0==(t=e.children(".oj-listview-cell-element").first()).length?e.children().first():t:e:$(e.find("."+this.getFocusedElementStyleClass()).first())},SetRootElementTabIndex:function(){this.element.attr("tabIndex",0)},RemoveRootElementTabIndex:function(){this.element.removeAttr("tabIndex")},_setTabIndex:function(e){this.getFocusItem(e).attr("tabIndex",0)},_resetTabIndex:function(e){var t;t=!0,"presentation"===e.attr("role")&&(t=!1),e=this.getFocusItem(e),t?e.removeAttr("tabIndex"):e.attr("tabIndex",-1)},_makeFocusable:function(e){this._setTabIndex(e)},getSingleFocusableElement:function(e){var t,i;return t="a, input, select, textarea, button",1===(i=e.children(t)).length&&0===i.first().find(t).length?i.first():e},_setCurrentItemOption:function(e,t,i){var n={item:this.ojContext._IsCustomElement()?i:$(i)};this.SetOption("currentItem",e,{_context:{originalEvent:t,internalSet:!0,extraData:n},changed:!0})},_setActive:function(e,t,i){var n,o,s,r;if(null!=e){if(n=e[0],o=this.GetKey(n),null==this.m_active||o!=this.m_active.key)return s={key:o,item:e},null!=this.m_active&&(s.previousKey=this.m_active.key,s.previousItem=this.m_active.elem,this._shouldDragSelectedItems()&&this._isTouchSupport()&&this.m_dndContext._unsetDraggable(s.previousItem),this._removeSkipItemAriaLabel(s.previousItem)),!!this.Trigger("beforeCurrentItem",t,s)&&(r={key:o,elem:e},this.m_active=r,this._shouldDragSelectedItems()&&this._isTouchSupport()&&this.m_dndContext._setDraggable(e),void 0!==i&&i||(this._makeFocusable(e),this.HighlightActive(),(null==t||t.originalEvent&&"click"!=t.originalEvent.type)&&this._focusItem(e),this.RemoveRootElementTabIndex(),s.previousItem&&this._resetTabIndex(s.previousItem)),!0);o==this.m_active.key&&(r={key:o,elem:e},this.m_active=r,void 0!==i&&i||(this._makeFocusable(e),this.RemoveRootElementTabIndex()))}else this.m_active=null;return!1},_focusItem:function(e){this.getFocusItem(e).focus()},HighlightActive:function(){var e;null!=this.m_active&&this._getListContainer().hasClass("oj-focus-ancestor")&&(e=this.m_active.elem,this._highlightElem(e,"oj-focus"))},UnhighlightActive:function(){null!=this.m_active&&this._unhighlightElem(this.m_active.elem,"oj-focus")},HandleClickActive:function(e,t){var i=null!=this.m_active?this.m_active.elem.get(0):null;null==i||$(i).hasClass(this.getItemStyleClass())||(i=i.firstElementChild),null!=t&&null!=i&&i!=t.target&&i.contains(t.target)||this.SetCurrentItem(e,t,!this.ShouldUseGridRole()||t.target!=e.get(0))},SetCurrentItem:function(e,t,i){this.ActiveAndFocus(e,t,i)&&this._setCurrentItemOption(this.GetKey(e[0]),t,e.get(0))},ActiveAndFocus:function(e,t,i){var n;return this._scrollToVisible(e[0]),this.UnhighlightActive(),n=this._setActive(e,t,i),this.HighlightActive(),n},enforceSelectionRequired:function(){var e;this._isSelectionEnabled()&&this._isSelectionRequired()&&(null!=(e=this.GetOption("selection"))&&0!=e.length||this._selectFirstSelectableItem())},_getFirstSelectableItem:function(){var e=this.element[0].querySelector(".oj-listview-cell-element[aria-selected]");return null==e?null:e.parentNode},_selectFirstSelectableItem:function(){var e,t;(e=this._getFirstSelectableItem())&&null!=(t=this.m_contentHandler.GetKey(e))&&(this._applySelection(e,t),this._setSelectionOption([t],null,[e]))},_isSelectionEnabled:function(){return"none"!=this.GetOption("selectionMode")},_isSelectionRequired:function(){return this.GetOption("selectionRequired")},_isMultipleSelection:function(){return"multiple"==this.GetOption("selectionMode")},IsSelectable:function(e){return(e=this.getFocusItem($(e)).get(0)).hasAttribute("aria-selected")},_filterSelection:function(e){var t,i,n;for(t=[],i=0;i<e.length&&(!(null==(n=this.FindElementByKey(e[i]))||null!=n&&this.IsSelectable(n))||(t.push(e[i]),this._isMultipleSelection()));i++);return t},_setSelectionOption:function(e,t,n,o){var s,r,a={key:null,data:null};null!=(s=this.GetOption("firstSelectedItem"))&&((null==e||0==e.length)&&null!=s.key||e[0]!=s.key&&!i.Object.compareValues(e[0],s.key))&&(null!=e&&e.length>0&&(a={key:e[0],data:null!=o?o:this.getDataForVisibleItem({key:e[0]})}),this.SetOption("firstSelectedItem",a,{_context:{originalEvent:t,internalSet:!0},changed:!0})),r={items:this.ojContext._IsCustomElement()?n:null==n?$({}):$(n)},this.SetOption("selection",e,{_context:{originalEvent:t,internalSet:!0,extraData:r},changed:!0})},_unhighlightSelection:function(){var e,t;null!=this.m_keyElemMap&&(e=this,$.each(this.GetOption("selection"),function(i,n){null!=(t=e.FindElementByKey(n))&&e._unhighlightElem(t,"oj-selected")}))},_highlightElem:function(e,t){this.HighlightUnhighlightElem(e,t,!0)},_unhighlightElem:function(e,t){this.HighlightUnhighlightElem(e,t,!1)},HighlightUnhighlightElem:function(e,t,i){var n;e=$(e),"oj-selected"==t&&this.getFocusItem(e).attr("aria-selected",i?"true":"false"),(n=e.children("."+this.getGroupItemStyleClass())).length>0&&(e=$(n[0])),"oj-focus"===t?i?"actionable"!=this.m_keyMode&&this._focusInHandler(e):this._focusOutHandler(e):i?e.addClass(t):e.removeClass(t)},HandleClickSelection:function(e,t){var i,n;this._scrollToVisible(e[0]),i=this._ctrlEquivalent(t),n=t.shiftKey,this._isMultipleSelection()&&(i||n)?!i&&n?this._extendSelection(e,t):this._augmentSelectionAndFocus(e,t):this.SelectAndFocus(e,t)},_handleTouchSelection:function(e,t){this._isMultipleSelection()?t.shiftKey?this._extendSelection(e,t):this._augmentSelectionAndFocus(e,t):this.SelectAndFocus(e,t)},_clearSelection:function(e,t){this._unhighlightSelection(),e&&(this._isSelectionRequired()?this._selectFirstSelectableItem():this._setSelectionOption([],null,null)),this.m_selectionFrontier=void 0===t?null:t},SelectAndFocus:function(e,t){var i,n,o;i=this.GetKey(e[0]),n=this.GetOption("selection"),o=this.GetIndexOf(n,i),this._clearSelection(o>-1),-1==o&&this._augmentSelectionAndFocus(e,t,[])},_extendSelection:function(e,t){null!=this.m_active&&this.m_selectionFrontier!=e&&(this._unhighlightElem(e,"oj-focus"),this._extendSelectionRange(this.m_active.elem,e,t))},_extendSelectionRange:function(e,t,i,n){!0===n?this._clearSelection(!1,this.m_selectionFrontier):this._clearSelection(!1,t),this._highlightRange(e,t,i),this.HighlightActive(),this._scrollToVisible(t[0])},_highlightRange:function(e,t,i){var n,o,s,r,a,l,u,h,d,c;for(n=[],o=[],(r=(s=this._getItemsCache()).index(e))>(a=s.index(t))?(l=a,u=r):(l=r,u=a),h=l;h<=u;h++)d=s[h],this.IsSelectable(d)&&(c=this.m_contentHandler.GetKey(d),this._applySelection(d,c),n.push(c),o.push(d));this._setSelectionOption(n,i,o)},_applySelection:function(e,t){null==this.m_keyElemMap&&(this.m_keyElemMap=new i.KeyMap),this.m_keyElemMap.set(t,$(e).attr("id")),this._highlightElem(e,"oj-selected")},_augmentSelectionAndFocus:function(e,t,i){var n,o,s,r,a,l;if(n=e,o=this.GetKey(e[0]),null==i&&(i=this.GetOption("selection").slice(0)),null==(s=null!=this.m_active?this.m_active.elem.get(0):null)||$(s).hasClass(this.getItemStyleClass())||(s=s.firstElementChild),null==t||null!=s&&s!=t.target&&s.contains(t.target)||(this.UnhighlightActive(),this._setActive(n,t)&&this._setCurrentItemOption(o,t,n.get(0)),this.HighlightActive()),null!=(s=null!=this.m_active?this.m_active.elem.get(0):null)&&s==n.get(0)){for((r=this.GetIndexOf(i,o))>-1?(this._unhighlightElem(e,"oj-selected"),i.splice(r,1)):(this.m_selectionFrontier=e,this._applySelection(e,o),i.push(o)),a=new Array(i.length),l=0;l<i.length;l++)a[l]=this.FindElementByKey(i[l]);this._setSelectionOption(i,t,a)}else null!=i&&0==i.length&&this._setSelectionOption(i,t,[])},ToggleSelection:function(e,t,i){var n,o,s,r,a,l;if(n=this.GetOption("selection").slice(0),s=this.m_active.elem,r=this.m_active.key,(a=this.GetIndexOf(n,r))>-1){if(i||1==n.length&&this._isSelectionRequired())return;this._unhighlightElem(s,"oj-selected"),n.splice(a,1),0==n.length&&(this.m_selectionFrontier=null)}else this.IsSelectable(s[0])&&(t||(this._clearSelection(!1),n.length=0),this.m_selectionFrontier=s,this._applySelection(s,r),n.push(r));for(o=new Array(n.length),l=0;l<n.length;l++)o[l]=this.FindElementByKey(n[l]);this._setSelectionOption(n,e,o)},_isInputElement:function(e){return null!=e.nodeName.match(/^INPUT|SELECT|OPTION|TEXTAREA/)&&!e.readOnly},HandleSelectionOrActiveKeyDown:function(e){var t,i,n,o,s,r,a=!1;return null!=this.m_active&&(t=e.keyCode,i=this.m_active.elem,this._isActionableMode()?t==this.ESC_KEY?(this._exitActionableMode(),this.HighlightActive(),this._focusItem(i),this._setTabIndex(i),a=!0):t===this.TAB_KEY&&(s=i.find("[data-first]"),r=i.find("[data-last]"),e.shiftKey?s.length>0&&r.length>0&&s!=r&&e.target==s[0]&&(r[0].focus(),a=!0):s.length>0&&r.length>0&&s!=r&&e.target==r[0]&&(s[0].focus(),a=!0)):t==this.F2_KEY?(this._enterActionableMode(),(s=i.find("[data-first]")).length>0&&(s[0].focus(),this._isExpandCollapseIcon(s)&&this._focusInHandler(s),i.hasClass(this.getItemStyleClass())||(i=i.children("."+this.getGroupItemStyleClass()).first()),i.removeClass("oj-focus-highlight"))):t==this.SPACE_KEY&&this._isSelectionEnabled()?(n=this._ctrlEquivalent(e),(o=e.shiftKey)&&!n&&null!=this.m_selectionFrontier&&this._isMultipleSelection()?this._extendSelectionRange(this.m_selectionFrontier,this.m_active.elem,e,!0):this.ToggleSelection(e,n&&!o&&this._isMultipleSelection(),!1),a=!0):t==this.ENTER_KEY&&this._isSelectionEnabled()?this.ToggleSelection(e,!1,!0):this.IsArrowKey(t)?(n=this._ctrlEquivalent(e),o=e.shiftKey,n||(a=this.HandleArrowKeys(t,o&&this._isSelectionEnabled()&&this._isMultipleSelection(),e))):t===this.TAB_KEY&&(e.shiftKey?this._disableAllTabbableElementsBeforeItem(i):this._disableAllTabbableElementsAfterItem(i)),a)},_isDisclosing:function(e){return!(!e||!this.m_disclosing)&&this.m_disclosing.indexOf(e)>-1},_setDisclosing:function(e,t){var i;if(null!=e)if(null==this.m_disclosing&&(this.m_disclosing=[]),t)this.m_disclosing.push(e);else for(i=this.m_disclosing.indexOf(e);i>-1;)this.m_disclosing.splice(i,1),i=this.m_disclosing.indexOf(e)},getAnimationEffect:function(e){var t;return null==this.defaultOptions&&(this.defaultOptions=i.ThemeUtils.parseJSONFromFontFamily(this.getOptionDefaultsStyleClass())),null==(t=this.defaultOptions.animation)?null:t[e]},isExpandable:function(){return"none"!=this.GetOption("drillMode")},_isExpandAll:function(){var e=this.GetOption("expanded");if("auto"===e){if(!this.isExpandable())return!0}else if("all"===e)return!0;return!!e.isAddAll&&(!this.isExpandable()&&e instanceof i._ojListViewExpandedKeySet||e.isAddAll())},expandKey:function(e,t,i,n,o){var s=this.FindElementByKey(e);null!=s&&this.ExpandItem($(s),null,o,e,t,n,i)},_expand:function(e){var t=this.FindItem(e.target);null!=t&&t.length>0&&this.ExpandItem(t,e,!0,null,!0,!0,!0)},ExpandItem:function(e,t,i,n,o,s,r){var a,l;this.GetState(e)==this.STATE_COLLAPSED&&(null==n&&(n=this.GetKey(e[0])),i&&this._isDisclosing(n)||(a={item:e,key:n},r&&!this.Trigger("beforeExpand",t,a)&&o||(this.signalTaskStart("Expand item: "+n),i&&this._setDisclosing(n,!0),this.m_contentHandler.Expand(e,function(e){this._expandSuccess(e,i,t,a,s)}.bind(this)),this.m_items=null,null!=t&&t.stopPropagation(),this.ojContext._IsCustomElement()||null==this._collapsedKeys||-1!=(l=this._collapsedKeys.indexOf(n))&&this._collapsedKeys.splice(l,1),this.signalTaskEnd())))},_expandSuccess:function(e,t,i,n,o){var s,r,a,l,u,h,d,c,p=this;this.signalTaskStart("Handle results from successful expand"),e.key=n.key,s=this.AnimateExpand($(e),t,i),r=e.parentNode,r=$(r),this.SetState(r,this.STATE_EXPANDED),a=this.getCollapseIconStyleClass(),l=this.getExpandIconStyleClass(),u=this.getExpandingIconStyleClass(),h=this.getGroupItemStyleClass(),r.children("."+h).find("."+a+", ."+u).removeClass(a).removeClass(u).addClass(l),o&&s.then(function(){p.ojContext._IsCustomElement()&&(d=p.GetOption("expanded"),p._isKeySet(d)&&!d.has(e.key)&&(c=d.add([e.key]),p.SetOption("expanded",c,{_context:{originalEvent:i,internalSet:!0},changed:!0}))),p.Trigger("expand",i,n)}),s.then(function(){p.signalTaskEnd()})},_adjustAncestorsMaxHeight:function(e,t){var i;e.parentsUntil("ul.oj-component-initnode","ul."+this.getGroupStyleClass()).each(function(e){(i=parseInt($(this).css("maxHeight"),10))>0&&$(this).css("maxHeight",i+t+"px")})},AnimateExpand:function(e,t,i){var n,o,s,r=0,a=this;return n=new Promise(function(e,t){o=e}),t?(this.signalTaskStart("Animate expand of group item"),e.children().each(function(){r+=$(this).outerHeight(!0)}),this._isTouchSupport()&&this._adjustAncestorsMaxHeight(e,r),e.css("maxHeight",r+"px"),this.signalTaskStart("Kick off expand animation"),s=e.get(0),this.StartAnimation(s,"expand").then(function(t){a._handleExpandTransitionEnd(e,o)}),this.signalTaskEnd()):(this._isTouchSupport()?(e.children().each(function(){r+=$(this).outerHeight(!0)}),e.css("maxHeight",r+"px"),this._adjustAncestorsMaxHeight(e,r)):e.css("maxHeight",""),this.AnimateExpandComplete(e),o(null)),n},_handleExpandTransitionEnd:function(e,t){this._isTouchSupport()||e.css("maxHeight",""),this.AnimateExpandComplete(e),t(null),this.signalTaskEnd()},AnimateExpandComplete:function(e){e.removeClass(this.getGroupCollapseStyleClass()).addClass(this.getGroupExpandStyleClass()),this._setDisclosing(e[0].key,!1)},collapseKey:function(e,t,i,n){var o=this.FindElementByKey(e);null!=o&&this.CollapseItem($(o),null,n,e,t,i)},_collapse:function(e){var t=this.FindItem(e.target);null!=t&&t.length>0&&this.CollapseItem(t,e,!0,null,!0,!0)},CollapseItem:function(e,t,i,n,o,s){var r,a,l,u,h,d,c=this;this.GetState(e)==this.STATE_EXPANDED&&(null==n&&(n=this.GetKey(e[0])),i&&this._isDisclosing(n)||(r={item:e,key:n},!this.Trigger("beforeCollapse",t,r)&&o||(this.signalTaskStart("Collapse item: "+n),i&&this._setDisclosing(n,!0),a=this.AnimateCollapse(e,n,i,t),this.SetState(e,this.STATE_COLLAPSED),l=this.getCollapseIconStyleClass(),u=this.getExpandIconStyleClass(),e.find("."+u).first().removeClass(u).addClass(l),this.m_items=null,null!=t&&t.stopPropagation(),s&&a.then(function(){c.ojContext._IsCustomElement()&&(h=c.GetOption("expanded"),c._isKeySet(h)&&(d=h.delete([n]),c.SetOption("expanded",d,{_context:{originalEvent:t,internalSet:!0},changed:!0}))),c.Trigger("collapse",t,r)}),this.ojContext._IsCustomElement()||(null==this._collapsedKeys&&(this._collapsedKeys=[]),-1==this._collapsedKeys.indexOf(n)&&this._collapsedKeys.push(n)),a.then(function(){c.signalTaskEnd()}))))},AnimateCollapse:function(e,t,i,n){var o,s,r,a,l,u=0,h=this;return s=new Promise(function(e,t){r=e}),(o=e.children("ul").first())[0].key=t,i?(this.signalTaskStart("Animate collapse"),o.children().each(function(){u+=$(this).outerHeight()}),o.css("maxHeight",u+"px"),(a=this.getAnimationEffect("collapse")).persist="all",this.signalTaskStart("Kick off collapse animation"),l=o.get(0),this.StartAnimation(l,"collapse",a).then(function(e){h._handleCollapseTransitionEnd(o,r)}),this.signalTaskEnd()):(o.css("maxHeight","0px"),this.AnimateCollapseComplete(o),r(null)),s},_handleCollapseTransitionEnd:function(e,t){this.AnimateCollapseComplete(e),t(null),this.signalTaskEnd()},AnimateCollapseComplete:function(e){e.removeClass(this.getGroupExpandStyleClass()).addClass(this.getGroupCollapseStyleClass()),null!=this.m_contentHandler&&this.m_contentHandler.Collapse(e),this._setDisclosing(e[0].key,!1)},_collapseAll:function(){var e;this.signalTaskStart("Collapse all"),e=this,this._getItemsCache().each(function(){e.CollapseItem($(this),null,!1,null,!1,!1)}),this.signalTaskEnd()},getExpanded:function(){var e,t,i;return e=[],t=this,this._getItemsCache().each(function(){i=$(this),t.GetState(i)==t.STATE_EXPANDED&&e.push(t.GetKey(i[0]))}),e},getWidgetConstructor:function(){return i.Components.__GetWidgetConstructor(this.element)},GetContainerStyleClass:function(){return this._isNonWindowTouch()?"oj-listview oj-listview-container-touch":"oj-listview oj-listview-container"},GetStyleClass:function(){return"oj-listview-element"},getItemStyleClass:function(){return"oj-listview-item"},getFocusedElementStyleClass:function(){return"oj-listview-focused-element"},getItemElementStyleClass:function(){return"oj-listview-item-element"},getGroupItemStyleClass:function(e){return e&&this._isPinGroupHeader()&&this._isPositionStickySupported()?"oj-listview-group-item oj-sticky":"oj-listview-group-item"},getGroupStyleClass:function(){return"oj-listview-group"},getGroupExpandStyleClass:function(){return"oj-listview-collapsible-transition"},getGroupCollapseStyleClass:function(){return this.getGroupExpandStyleClass()},getCollapseIconStyleClass:function(){return"oj-listview-collapse-icon"},getExpandIconStyleClass:function(){return"oj-listview-expand-icon"},getExpandingIconStyleClass:function(){return"oj-listview-expanding-icon"},getEmptyTextStyleClass:function(){return"oj-listview-no-data-message"},getEmptyTextMarkerClass:function(){return"oj-listview-empty-text"},getDepthStyleClass:function(e){return""},getOptionDefaultsStyleClass:function(){return"oj-listview-option-defaults"},_isPositionStickySupported:function(){return this._isTouchSupport()&&i.AgentUtils.getAgentInfo().os===i.AgentUtils.OS.IOS},_preventMouseWheelOverscroll:function(e,t){var i=t.originalEvent.wheelDelta;isNaN(i)||void 0===this.m_contentHandler.hasMoreToFetch||(i<0?this.m_contentHandler.hasMoreToFetch()&&e.scrollTop+e.clientHeight+Math.abs(i)>=e.scrollHeight&&(e.scrollTop=e.scrollHeight,t.preventDefault()):e.scrollTop>0&&e.scrollTop-i<=0&&(e.scrollTop=0,t.preventDefault()))},_getScrollEventElement:function(){var e=this._getScroller();return e==document.body||e==document.documentElement?window:e},_setCurrentScrollPosition:function(e){var t,n,o,s=!0,r=this;(t=e.key)&&null==this.FindElementByKey(t)&&this.m_contentHandler instanceof i.IteratingDataProviderContentHandler&&(n=this.m_contentHandler.getDataSource()).containsKeys&&((o=new Set).add(t),n.containsKeys({keys:o}).then(function(t){0==t.results.size&&delete e.key,r.syncScrollPosition(e)}),s=!1),s&&this.syncScrollPosition(e)},_findClosestElementToTop:function(e,t,i){var n,o,s,r,a,l=!1;if(!(0==e.length||t>=e.length)){if(r={index:t,elem:n=e[t],offsetTop:o=n.offsetTop,offset:s=i-o},Math.abs(s)<1)return r;for((a=s>0)?t++:t--;!l&&t>=0&&t<e.length;){if(o=(n=e[t]).offsetTop,l=(s=Math.abs(i-o))<1||(a?i<=o:i>=o)){(s<1||!a)&&(r={index:t,elem:n,offsetTop:o,offset:s});break}a&&r.offsetTop==o||(r={index:t,elem:n,offsetTop:o,offset:s}),a?t++:t--}return l||(t=a?e.length-1:0,r.index=t,r.elem=e[t]),r}},_getRootNodeForItems:function(){return this.isCardLayout()?this.element.get(0).firstElementChild.firstElementChild:this.element.get(0)},_getCurrentScrollPosition:function(e){var t,i,n,o,s,r,a,l,u={};return t=this._getScroller(),void 0===e&&(e=t.scrollTop),u.x=this._getScrollX(t),u.y=e,i=this.m_contentHandler.IsHierarchical(),!isNaN(this.m_itemHeight)&&this.m_itemHeight>0&&(n=i?this._getItemsCache():$(this._getRootNodeForItems()).children("li."+this.getItemElementStyleClass()),o=this.GetOption("scrollPosition"),Math.abs(o.y-e)<this.MINIMUM_ITEM_HEIGHT&&null!=o.key&&!isNaN(o.index)&&(i?null!=(a=this.FindElementByKey(o.key))&&(s=n.index(a)):s=o.index),isNaN(s)&&(s=Math.floor(e/this.m_itemHeight)),null!=(r=this._findClosestElementToTop(n,s,e))&&(a=r.elem,i?((l=a.parentNode)!=this.element.get(0)&&(u.parent=this.GetKey(l.parentNode)),u.key=this.GetKey(r.elem),u.index=$(l).children().index(a)):(u.index=r.index,u.key=this.GetKey(r.elem)),u.offsetY=r.offset,u.offsetX=u.x)),u},_getOffsetTop:function(e){var t=this.element.get(0).offsetTop;return isNaN(this.m_elementOffset)||this.m_elementOffset==t?e.offsetTop:Math.max(0,e.offsetTop-t)},_getScrollTopByIndex:function(e,t){var i,n;return null!=t?null!=(i=this.FindElementByKey(t))&&(i=$(i).children("ul").first()):(i=this.element.get(0),this.isCardLayout()&&(i=i.firstElementChild.firstElementChild)),null!=i&&null!=(n=$(i).children("."+this.getItemElementStyleClass())[e])?this._getOffsetTop(n):this.m_contentHandler.hasMoreToFetch&&this.m_contentHandler.hasMoreToFetch()?this._getScroller().scrollHeight:void 0},_getScrollTopByKey:function(e){var t=this.FindElementByKey(e);return null!=t?this._getOffsetTop(t):this.m_contentHandler.hasMoreToFetch&&this.m_contentHandler.hasMoreToFetch()?this._getScroller().scrollHeight:void 0},_getScrollCoordinates:function(e){var t,i,n,o,s,r,a;return this._getScroller(),t=e.x,r=e.offsetX,isNaN(t)||isNaN(r)||(t+=r),s=e.key,isNaN(i)&&null!=s&&(i=this._getScrollTopByKey(s)),n=e.parent,o=e.index,isNaN(i)&&!isNaN(o)&&(i=this._getScrollTopByIndex(o,n)),a=e.offsetY,isNaN(i)||isNaN(a)||(i+=a),isNaN(i)&&!isNaN(e.y)&&(i=e.y),{x:t,y:i}},_handleScroll:function(e){var t;null!=this.m_contentHandler&&(t=this._getScroller().scrollTop,this.ojContext._IsCustomElement()||this.SetOption("scrollTop",t,{_context:{originalEvent:e,internalSet:!0}}),this.ShouldUpdateScrollPosition()&&this.SetOption("scrollPosition",this._getCurrentScrollPosition(t),{_context:{originalEvent:e,internalSet:!0}}),this._handlePinGroupHeader())},_registerScrollHandler:function(){var e,t=this;e=$(this._getScrollEventElement()),this.ojContext._off(e,"scroll mousewheel"),this.ojContext._on(e,{scroll:function(e){t._skipScrollUpdate||t.m_ticking||(window.requestAnimationFrame(function(){t._handleScroll(e),t.m_ticking=!1}),t.m_ticking=!0),t._skipScrollUpdate&&t.signalTaskEnd(),t._skipScrollUpdate=!1}}),"loadMoreOnScroll"==this.options.scrollPolicy&&this.ojContext._on(e,{mousewheel:function(e){t._preventMouseWheelOverscroll(t._getScroller(),e)}})},_isPinGroupHeader:function(){return"static"!=this.GetOption("groupHeaderPosition")&&this.m_contentHandler.IsHierarchical()},_getGroupItemsCache:function(){var e;return null==this.m_groupItems&&(e="."+this.getGroupItemStyleClass()+":visible",this.m_groupItems=this.element.find(e).filter(function(e){return!$(this).parent().hasClass("oj-collapsed")&&$(this).next().children().length>0})),this.m_groupItems},_unpinGroupItem:function(e){$(e).removeClass("oj-pinned"),e.style.top="auto",e.style.width="auto"},_getNextGroupItem:function(e){var t,i;return(i=(t=this._getGroupItemsCache()).index(e))>-1&&i<t.length-1?t[i+1]:null},_pinGroupItem:function(e,t){var i,n,o;i=e.offsetWidth,n=e.offsetHeight,null!=(o=this._getNextGroupItem(e))&&o.offsetTop<=t+n+5&&(t-=n),$(e).addClass("oj-pinned"),e.style.top=t+"px",e.style.width=i+"px"},_handlePinGroupHeader:function(){var e,t,i,n,o,s,r,a,l;if(this._isPinGroupHeader()&&!this._isPositionStickySupported()){if(e=this._getScroller().scrollTop,null!=this.m_groupItemToPin&&0==e)return this._unpinGroupItem(this.m_groupItemToPin),void(this.m_groupItemToPin=null);for(i=this._getGroupItemsCache(),n=0,null!=this.m_groupItemToPin&&(n=this.m_groupItemToPin.offsetHeight),o=0;o<i.length;o++)if(s=i[o],this.m_groupItemToPin!=s&&(a=(r=i[o].offsetTop)+s.parentNode.offsetHeight,r<e&&a>e+n)){t=s;break}if(null!=t&&t!=this.m_groupItemToPin)null!=this.m_groupItemToPin&&this._unpinGroupItem(this.m_groupItemToPin),this._pinGroupItem(t,e),this.m_groupItemToPin=t;else if(null!=this.m_groupItemToPin){if(null!=(l=this._getNextGroupItem(this.m_groupItemToPin))&&l.offsetTop<=e+n)return void(this.m_groupItemToPin.style.top=l.offsetTop-n+"px");this.m_groupItemToPin.style.top=e+"px"}}},_getScroller:function(){var e,t;return null!=(e=this.GetOption("scrollPolicyOptions"))&&null!=(t=e.scroller)?t:this._getListContainer().get(0)},_scrollToGroupHeader:function(e){var t,i,n;i=(t=this._getScroller()).scrollTop,null!=this.m_groupItemToPin&&(this._unpinGroupItem(this.m_groupItemToPin),this.m_groupItemToPin=null),n=e.offsetTop,this._isPinGroupHeader()&&this._isPositionStickySupported()&&n<i&&(n=Math.max(0,n-e.parentNode.offsetHeight+e.offsetHeight)),t.scrollTop=n,i==t.scrollTop&&this._handlePinGroupHeader(),this._setFirstFocusableItemInGroupCurrent(e)},_setFirstFocusableItemInGroupCurrent:function(e){var t,i=this;$(e).next().children().each(function(){if(t=$(this),!i.SkipFocus(t))return i.SetOption("currentItem",this.key),!1})}}),i.__registerWidget("oj.ojListView",$.oj.baseComponent,{widgetEventPrefix:"oj",options:{as:"",currentItem:null,data:null,dnd:{drag:null,drop:null,reorder:{items:"disabled"}},drillMode:"collapsible",expanded:new i._ojListViewExpandedKeySet,firstSelectedItem:{key:null,data:null},groupHeaderPosition:"sticky",item:{focusable:!0,renderer:null,selectable:!0},scrollPolicy:"auto",scrollPolicyOptions:{fetchSize:25,maxCount:500},scrollPosition:{x:0,y:0},scrollTop:0,selection:[],selectionMode:"none",selectionRequired:!1,animateStart:null,animateEnd:null,beforeCurrentItem:null,beforeExpand:null,beforeCollapse:null,collapse:null,copy:null,cut:null,expand:null,paste:null,ready:null,reorder:null},_ComponentCreate:function(){this._super(),this._setup()},_setup:function(){var e={};e.element=this.element,e.OuterWrapper=this.OuterWrapper,e.ojContext=this,this._IsCustomElement()||this.options.expanded instanceof i._ojListViewExpandedKeySet&&(this.options.expanded="auto"),e=$.extend(this.options,e),this.listview=new i._ojListView,this.listview.init(e)},_AfterCreate:function(){this._super();var e=this;this.listview._FixRendererContext=function(t){return e._FixRendererContext(t)},this.listview._WrapCustomElementRenderer=function(t){return e._WrapCustomElementRenderer(t)},this.listview.afterCreate()},_SetupResources:function(){this._super(),this.listview.setupResources()},_ReleaseResources:function(){this._super(),this.listview.releaseResources()},GetFocusElement:function(){return null!=this.listview?this.listview.GetFocusElement():this._super()},_destroy:function(){this.listview.destroy(),this._super()},_NotifyContextMenuGesture:function(e,t,i){this.listview.notifyContextMenuGesture(e,t,i)},_setOptions:function(e,t){var i=this.listview.setOptions(e,t);this._super(e,t),i?this.listview.refresh():(e.selectionRequired||e.selection||e.selectionMode)&&this.listview.enforceSelectionRequired()},_setOption:function(e,t,i){var n,o=!0;if("selectionMode"==e?o="none"==t||"single"==t||"multiple"==t:"drillMode"==e?o="collapsible"==t||"none"==t:"scrollPolicy"==e?o="auto"==t||"loadMoreOnScroll"==t:"groupHeaderPosition"==e?o="static"==t||"sticky"==t:"firstSelectedItem"==e&&(o=!1),!o)throw"Invalid value: "+t+" for key: "+e;"selection"==e?(n=this.listview.getItems(t),i={_context:{extraData:{items:this._IsCustomElement()?n:$(n)}}}):"currentItem"==e&&(n=this.listview.getItems([t])[0],i={_context:{extraData:{items:this._IsCustomElement()?n:$(n)}}}),this._super(e,t,i)},_NotifyAttached:function(){this.listview.notifyAttached()},_NotifyDetached:function(){this.listview.notifyDetached()},_NotifyShown:function(){this.listview.notifyShown()},_VerifyConnectedForSetup:function(){return!0},widget:function(){return this.listview.getRootElement()},refresh:function(){this._super(),this.listview.refresh()},whenReady:function(){return this.listview.whenReady()},getNodeBySubId:function(e){return this.listview.getNodeBySubId(e)},getSubIdByNode:function(e){return this.listview.getSubIdByNode(e)},getContextByNode:function(e){return this.listview.getContextByNode(e)},getDataForVisibleItem:function(e){return this.listview.getDataForVisibleItem(e)},expand:function(e,t){this.listview.expandKey(e,t,!0,!0)},collapse:function(e,t){this.listview.collapseKey(e,t,!0)},getExpanded:function(){return this.listview.getExpanded()},getIndexerModel:function(){return null==this.indexerModel&&i.ListViewIndexerModel&&(this.indexerModel=new i.ListViewIndexerModel(this.listview)),this.indexerModel},scrollToItem:function(e){this.listview.scrollToItem(e)},_CompareOptionValues:function(e,t,n){switch(e){case"currentItem":case"selection":return i.Object.compareValues(t,n);default:return this._super(e,t,n)}}}),i.IteratingDataProviderContentHandler=function(e,t,n){i.IteratingDataProviderContentHandler.superclass.constructor.call(this,e,t,n)},i.Object.createSubclass(i.IteratingDataProviderContentHandler,i.DataSourceContentHandler,"oj.IteratingDataProviderContentHandler"),i.IteratingDataProviderContentHandler.prototype.Init=function(){i.IteratingDataProviderContentHandler.superclass.Init.call(this)},i.IteratingDataProviderContentHandler.prototype.IsHierarchical=function(){return!1},i.IteratingDataProviderContentHandler.prototype._destroyDomScroller=function(){null!=this.m_domScroller&&(this.m_domScroller.destroy(),this.m_domScroller=null,this.m_domScrollerMaxCountFunc=null)},i.IteratingDataProviderContentHandler.prototype.Destroy=function(){i.IteratingDataProviderContentHandler.superclass.Destroy.call(this),this._removeDataSourceEventListeners(),this._destroyDomScroller(),this.m_loadingIndicator=null},i.IteratingDataProviderContentHandler.prototype.HandleResize=function(e,t){this._isLoadMoreOnScroll()&&null!=this.m_height&&this.m_height!=t&&(this.m_height=t,this.checkViewport())},i.IteratingDataProviderContentHandler.prototype.notifyShown=function(){this._isLoadMoreOnScroll()&&this.checkViewport()},i.IteratingDataProviderContentHandler.prototype.notifyAttached=function(){var e,t;null!=(e=this._getFetchTrigger())&&null!=this.m_domScroller&&(this._getScroller(),e!=(t=this._getFetchTrigger())&&this.m_domScroller.setFetchTrigger(t),this.checkViewport())},i.IteratingDataProviderContentHandler.prototype._isLoadMoreOnScroll=function(){return"loadMoreOnScroll"==this.m_widget.options.scrollPolicy},i.IteratingDataProviderContentHandler.prototype._getFetchSize=function(){return Math.max(0,this.m_widget.options.scrollPolicyOptions.fetchSize)},i.IteratingDataProviderContentHandler.prototype._getTotalSize=function(){return-1},i.IteratingDataProviderContentHandler.prototype._getScroller=function(){var e=this.m_widget.options.scrollPolicyOptions.scroller;return null!=e&&$.contains(e,this.m_root)?(void 0===this._fetchTrigger&&(this._fetchTrigger=i.DomScroller.calculateOffsetTop(e,this.m_root)+this._getLoadingIndicatorHeight()),e):this.m_widget.getRootElement()},i.IteratingDataProviderContentHandler.prototype._getFetchTrigger=function(){return void 0===this._fetchTrigger&&(this._fetchTrigger=this._getLoadingIndicatorHeight()),this._fetchTrigger},i.IteratingDataProviderContentHandler.prototype._getLoadingIndicatorHeight=function(){var e,t,i;return(e=$(document.createElement("div"))).addClass(this.m_widget.getItemStyleClass()).css({visibility:"hidden",overflow:"hidden",position:"absolute"}),(t=$(document.createElement("div"))).addClass("oj-icon oj-listview-loading-icon"),e.append(t),$(this.m_widget.getRootElement()).append(e),i=e.get(0).offsetHeight,e.remove(),i},i.IteratingDataProviderContentHandler.prototype._getMaxCount=function(){return this.m_widget.options.scrollPolicyOptions.maxCount},i.IteratingDataProviderContentHandler.prototype.setDataSource=function(e){this._removeDataSourceEventListeners(),null!=e&&(this.m_handleModelMutateEventListener=this.handleModelMutateEvent.bind(this),this.m_handleModelRefreshEventListener=this.handleModelRefreshEvent.bind(this),e.addEventListener("mutate",this.m_handleModelMutateEventListener),e.addEventListener("refresh",this.m_handleModelRefreshEventListener)),i.IteratingDataProviderContentHandler.superclass.setDataSource.call(this,e)},i.IteratingDataProviderContentHandler.prototype._appendLoadingIndicator=function(){var e,t;null==this.m_loadingIndicator&&((e=$(document.createElement("li"))).uniqueId().attr("role","presentation").addClass(this.m_widget.getItemStyleClass()).addClass("oj-listview-loading-icon-container"),(t=$(document.createElement("div"))).addClass("oj-icon oj-listview-loading-icon"),e.append(t),$(this.m_root).append(e),this.m_loadingIndicator=e)},i.IteratingDataProviderContentHandler.prototype._removeLoadingIndicator=function(){null!=this.m_loadingIndicator&&this.m_loadingIndicator.remove(),this.m_loadingIndicator=null},i.IteratingDataProviderContentHandler.prototype.hasMoreToFetch=function(){return null!=this.m_loadingIndicator},i.IteratingDataProviderContentHandler.prototype.afterRenderItem=function(e,t){var n;i.IteratingDataProviderContentHandler.superclass.afterRenderItem.call(this,e,t),$(e).addClass(this.m_widget.getItemStyleClass()),this.m_widget._isSelectionEnabled()&&this.isSelectable(t)&&this.m_widget.getFocusItem($(e)).attr("aria-selected",!1),this._isLoadMoreOnScroll()&&(-1===(n=Math.min(this._getTotalSize(),this._getMaxCount()))&&(n=this._getMaxCount()),n>0&&$(e).attr("aria-setsize",n).attr("aria-posinset",t.index+1)),this.m_widget.itemRenderComplete(e,t)},i.IteratingDataProviderContentHandler.prototype.afterRenderItemForInsertEvent=function(e,t){var n,o,s,r;this.signalTaskStart("after render item from model insert event"),e.setAttribute("data-oj-context",""),this.afterRenderItem(e,t),n=$(e),o=e.className,e.className="oj-listview-temp-item oj-listview-item-add-remove-transition",this.shouldUseGridRole()||n.children().wrapAll("<div></div>"),(s=n.children().first())[0].className=o,s[0].key=e.key,this.shouldUseGridRole()||(s.attr("role",e.getAttribute("role")),n[0].hasAttribute("aria-selected")&&s.attr("aria-selected",e.getAttribute("aria-selected"))),r=this,i.Context.getContext(e).getBusyContext().whenReady().then(function(){null!=r.m_widget&&(r.signalTaskStart("kick off animation for insert item"),r.m_widget.StartAnimation(e,"add").then(function(i){e.removeAttribute("data-oj-context"),r._handleAddTransitionEnd(t,e)}),r.signalTaskEnd())})},i.IteratingDataProviderContentHandler.prototype._handleScrollerMaxRowCount=function(){i.Logger.error("max count reached")},i.IteratingDataProviderContentHandler.prototype._removeDataSourceEventListeners=function(){var e=this.getDataSource();null!=e&&(e.removeEventListener("mutate",this.m_handleModelMutateEventListener),e.removeEventListener("refresh",this.m_handleModelRefreshEventListener))},i.IteratingDataProviderContentHandler.prototype.fetchRows=function(e){var t,n,o,s,r,a,l,u=0;if(this.signalTaskStart("fetching rows"),this.IsReady())return this.m_fetching=!0,i.IteratingDataProviderContentHandler.superclass.fetchRows.call(this,e),o=this.loadTemplateEngine(),this.signalTaskStart("first fetch"),(t={}).size=this._isLoadMoreOnScroll()?this._getFetchSize():-1,n=this,this.m_dataProviderAsyncIterator=this.getDataSource().fetchFirst(t)[Symbol.asyncIterator](),s=this.m_dataProviderAsyncIterator.next(),Promise.all([s,o]).then(function(e){null!=n.m_widget&&(r=e[0],a=e[1],(l=n.getDataSource())instanceof i.TableDataSourceAdapter&&(u=l.offset),0==u&&(a&&n.cleanItems(a),$(n.m_root).empty()),n._handleFetchedData(r,a))},function(e){n._handleFetchError(e),n.signalTaskEnd()}),void this.signalTaskEnd();this.signalTaskEnd()},i.IteratingDataProviderContentHandler.prototype._handleFetchError=function(e){i.Logger.error(e),null!=this.m_widget?(this._isLoadMoreOnScroll()&&this._removeLoadingIndicator(),this.m_widget.renderComplete()):i.Logger.info("handleFetchError: widget has already been destroyed")},i.IteratingDataProviderContentHandler.prototype._handleFetchSuccess=function(e,t,i){var n,o,s,r;if(null!=this.m_widget){for(n=this.m_root.childElementCount,o=document.createDocumentFragment(),s=0;s<e.length;s++)r=e[s],this.addItem(o,-1,r,this.getMetadata(n,t[s],r),i),n+=1;this.m_root.appendChild(o)}},i.IteratingDataProviderContentHandler.prototype._registerDomScroller=function(){var e,t=this;this.m_domScrollerMaxCountFunc=function(e){null!=e?(t.signalTaskStart("handle results when maxCountLimit reached"),t._removeLoadingIndicator(),t.IsReady()&&t.signalTaskStart("dummy task"),t._handleFetchedData(e,t.getTemplateEngine()),t.signalTaskEnd(),t.signalTaskEnd()):(t._removeLoadingIndicator(),t.signalTaskEnd())},e={fetchSize:this._getFetchSize(),fetchTrigger:this._getFetchTrigger(),maxCount:this._getMaxCount(),asyncIterator:this.m_dataProviderAsyncIterator,initialRowCount:this.m_root.childElementCount,success:this.m_domScrollerMaxCountFunc,error:this.signalTaskEnd.bind(this)},this.m_domScroller=new i.DomScroller(this._getScroller(),this.getDataSource(),e),this.m_domScroller._handleScrollerScrollTop=function(e,n){n-e<=1&&t.hasMoreToFetch()&&t.signalTaskStart("starts highwatermark scrolling"),i.DomScroller.prototype._handleScrollerScrollTop.call(this,e,n)}},i.IteratingDataProviderContentHandler.prototype._pushToEventQueue=function(e){null==this.m_eventQueue&&(this.m_eventQueue=[]),this.m_eventQueue.push(e)},i.IteratingDataProviderContentHandler.prototype._clearEventQueue=function(){null!=this.m_eventQueue&&(this.m_eventQueue.length=0)},i.IteratingDataProviderContentHandler.prototype._processEventQueue=function(){var e,t;if(null!=this.m_eventQueue&&this.m_eventQueue.length>0){for(e=0;e<this.m_eventQueue.length;e++)if("refresh"==(t=this.m_eventQueue[e]).type)return void this.handleModelRefreshEvent(t.event);"mutate"==(t=this.m_eventQueue.shift()).type&&this.handleModelMutateEvent(t.event)}},i.IteratingDataProviderContentHandler.prototype.handleModelMutateEvent=function(e){null!=e.detail.remove&&this.handleModelRemoveEvent(e),null!=e.detail.add&&this.handleModelAddEvent(e),null!=e.detail.update&&this.handleModelChangeEvent(e)},i.IteratingDataProviderContentHandler.prototype._getIndex=function(e,t){var i,n;return null==e||0==e.length||t>=e.length?-1:(i=e[t],null!=(n=this.FindElementByKey(i))?$(this.m_root).children().index(n):-1)},i.IteratingDataProviderContentHandler.prototype.handleModelAddEvent=function(e){var t,i,n,o,s,r,a,l;if(null!=this.m_root)if(this.IsReady()){if(this.signalTaskStart("handling model add event"),i=(t=e.detail.add).data,n=[],t.keys.forEach(function(e){n.push(e)}),t.afterKeys&&(o=[],t.afterKeys.forEach(function(e){o.push(e)})),s=this.getTemplateEngine(),r=t.indexes,null!=i&&null!=n&&n.length>0&&i.length>0&&n.length==i.length&&(null==r||r.length==i.length)){for(a=0;a<i.length;a++)this.signalTaskStart("handling model add event for item: "+n[a]),l=null==r?this._getIndex(o,a)+1:r[a],this.addItem(this.m_root,l,i[a],this.getMetadata(l,n[a],i[a]),s,this.afterRenderItemForInsertEvent.bind(this)),this.signalTaskEnd();this.IsReady()&&this.signalTaskStart("dummy task"),this.fetchEnd()}this.signalTaskEnd()}else this._pushToEventQueue({type:e.type,event:e})},i.IteratingDataProviderContentHandler.prototype._handleAddTransitionEnd=function(e,t){var i;null!=this.m_widget?(i=$(t).children().first().attr("class"),t.className=i,this.shouldUseGridRole()?$(t).children().first()[0].className="oj-listview-cell-element":$(t).children().children().unwrap(),this.m_widget.itemInsertComplete(t,e),this.signalTaskEnd()):this.signalTaskEnd()},i.IteratingDataProviderContentHandler.prototype.handleModelRemoveEvent=function(e){var t,i,n,o,s,r,a,l=this;if(t=e.detail.remove.keys,null!=this.m_root&&null!=t&&0!=t.size)if(this.IsReady()){if(this.signalTaskStart("handling model remove event"),n=this.m_widget.options.selection,o=n.slice(0),t.forEach(function(e){null!=(i=l.FindElementByKey(e))&&(l.signalTaskStart("handling model remove event for item: "+e),l._removeItem(i),l.signalTaskEnd()),(s=l.m_widget.GetIndexOf(n,e))>-1&&o.splice(s,1)}),n.length!=o.length){for(a=new Array(o.length),r=0;r<o.length;r++)a[r]=this.FindElementByKey(o[r]);this.m_widget._setSelectionOption(o,null,a)}this.m_widget.ClearCache(),this.signalTaskEnd()}else this._pushToEventQueue({type:e.type,event:e})},i.IteratingDataProviderContentHandler.prototype._removeItem=function(e){var t,i,n,o,s=this;this.signalTaskStart("removing an item"),t=document.activeElement,i=e.contains(t),n=(e=$(e)).get(0).className,e.children().wrapAll("<div class='"+n+"'></div>"),e.get(0).className="oj-listview-item-add-remove-transition",this.signalTaskStart("kick off animation to remove an item"),o=e.get(0),this.m_widget.StartAnimation(o,"remove").then(function(t){s._handleRemoveTransitionEnd(e,i)}),this.signalTaskEnd()},i.IteratingDataProviderContentHandler.prototype._handleRemoveTransitionEnd=function(e,t){var i,n;null!=this.m_widget&&0!=(i=(e=$(e)).parent()).length?(this.m_widget.itemRemoveComplete(e.get(0)),(n=this.getTemplateEngine())&&n.clean(e.get(0)),e.remove(),0==i.get(0).childElementCount&&this.m_widget.renderComplete(),this.m_widget.enforceSelectionRequired(),t&&this.m_root.focus(),this.signalTaskEnd()):this.signalTaskEnd()},i.IteratingDataProviderContentHandler.prototype.handleModelChangeEvent=function(e){var t,i,n,o,s,r,a,l;if(null!=this.m_root){for(this.signalTaskStart("handling model update event"),n=(t=e.detail.update).data,i=[],t.keys.forEach(function(e){i.push(e)}),o=this.getTemplateEngine(),s=t.indexes,r=0;r<i.length;r++)null!=(a=this.FindElementByKey(i[r]))&&(this.signalTaskStart("handling model update event for item: "+i[r]),l=null==s?-1:s[r],this.replaceItem(a,l,n[r],this.getMetadata(l,i[r],n[r]),o,this.afterRenderItemForChangeEvent.bind(this)),this.signalTaskEnd());this.m_widget.ClearCache(),this.signalTaskEnd()}},i.IteratingDataProviderContentHandler.prototype.afterRenderItemForChangeEvent=function(e,t){var i=this;this.signalTaskStart("after render item for model change event"),this.afterRenderItem(e,t),this.m_widget.StartAnimation(e,"update").then(function(t){i._handleReplaceTransitionEnd(e)}),this.signalTaskEnd()},i.IteratingDataProviderContentHandler.prototype._handleReplaceTransitionEnd=function(e){null!=this.m_widget?($(e).removeClass("oj-listview-item-add-remove-transition"),this.m_widget.restoreCurrentItem(),this.signalTaskEnd()):this.signalTaskEnd()},i.IteratingDataProviderContentHandler.prototype.handleModelRefreshEvent=function(e){null!=this.m_root&&(this.IsReady()?(this.signalTaskStart("handling model reset event"),this._clearEventQueue(),this.m_widget.ClearCache(),this._destroyDomScroller(),this.fetchRows(!0),this.signalTaskEnd()):this._pushToEventQueue({type:e.type,event:e}))},i.IteratingDataProviderContentHandler.prototype._handleFetchedData=function(e,t){var n,o,s=!1;return null==this.m_root||null==e.value?s:(n=e.value.data,o=e.value.metadata.map(function(e){return e.key}),n.length==o.length&&(this._handleFetchSuccess(n,o,t),this._isLoadMoreOnScroll()&&((s=!e.done&&this._isLoadMoreOnScroll())&&(null!=o&&0==o.length&&i.Logger.info("handleFetchedData: zero data returned while done flag is false"),null==this.m_domScroller&&this._registerDomScroller(),e.maxCountLimit||this._appendLoadingIndicator()),e.maxCountLimit&&this._handleScrollerMaxRowCount()),this.fetchEnd()),s)},i.IteratingDataProviderContentHandler.prototype.fetchEnd=function(){var e,t,n=this;this.m_fetching=!1,e=function(){n.m_widget&&(n.m_widget.renderComplete(),n._processEventQueue(),n.checkViewport())},this.isAsyncRendering()?((t=this.m_widget.m_scrollAndFetch)&&n.signalTaskEnd(),i.Context.getContext(this.m_root).getBusyContext().whenReady().then(function(){t&&n.signalTaskStart("scroll and fetch"),e()})):e(),n.signalTaskEnd()},i.IteratingDataProviderContentHandler.prototype.checkViewport=function(){var e,t=this;this.signalTaskStart("checking viewport"),null!=this.m_domScroller&&this.IsReady()&&null!=(e=this.m_domScroller.checkViewport())&&(this.signalTaskStart("got promise from checking viewport"),e.then(function(e){null!=e&&t.m_domScrollerMaxCountFunc(e),t.signalTaskEnd()},null)),this.signalTaskEnd()},i.IteratingDataProviderContentHandler.prototype.getMetadata=function(e,t,i){var n=i.context;return null==n&&(n={}),null==n.index&&(n.index=e),null==n.key&&(n.key=t),n},i.CustomElementBridge.registerMetadata("oj-list-view","baseComponent",{properties:{as:{type:"string"},currentItem:{type:"any",writeback:!0},data:{},dnd:{type:"object",properties:{drag:{type:"object",properties:{items:{type:"object",properties:{dataTypes:{type:"Array<string>"},drag:{},dragEnd:{},dragStart:{}}}}},drop:{type:"object",properties:{items:{type:"object",properties:{dataTypes:{type:"Array<string>"},dragEnter:{},dragLeave:{},dragOver:{},drop:{}}}}},reorder:{type:"object",properties:{items:{type:"string",enumValues:["disabled","enabled"]}}}}},drillMode:{type:"string",enumValues:["collapsible","none"]},expanded:{type:"object",writeback:!0},firstSelectedItem:{type:"object",writeback:!0,readOnly:!0},groupHeaderPosition:{type:"string",enumValues:["sticky","static"]},item:{type:"object",properties:{focusable:{},renderer:{},selectable:{}}},scrollPolicy:{type:"string"},scrollPolicyOptions:{type:"object",properties:{fetchSize:{type:"number"},maxCount:{type:"number"},scroller:{}}},scrollPosition:{type:"object",writeback:!0,properties:{x:{type:"number"},y:{type:"number"},offsetX:{type:"number"},offsetY:{type:"number"},key:{type:"any"},index:{type:"number"},parent:{type:"any"}}},selection:{type:"Array<any>",writeback:!0},selectionMode:{type:"string",enumValues:["none","single","multiple"]},selectionRequired:{type:"boolean"},translations:{type:"Object",properties:{accessibleNavigateSkipItems:{type:"string"},accessibleReorderAfterItem:{type:"string"},accessibleReorderBeforeItem:{type:"string"},accessibleReorderInsideItem:{type:"string"},accessibleReorderTouchInstructionText:{type:"string"},indexerCharacters:{type:"string"},labelCopy:{type:"string"},labelCut:{type:"string"},labelPaste:{type:"string"},labelPasteAfter:{type:"string"},labelPasteBefore:{type:"string"},msgFetchingData:{type:"string"},msgNoData:{type:"string"}}}},events:{animateEnd:{},animateStart:{},beforeCollapse:{},beforeCurrentItem:{},beforeExpand:{},collapse:{},copy:{},cut:{},expand:{},paste:{},reorder:{}},methods:{getContextByNode:{},getDataForVisibleItem:{},getIndexerModel:{},scrollToItem:{}},extension:{_INNER_ELEM:"ul",_GLOBAL_TRANSFER_ATTRS:["aria-label"],_WIDGET_NAME:"ojListView"}}),i.CustomElementBridge.register("oj-list-view",{metadata:i.CustomElementBridge.getMetadata("oj-list-view")}),i.DefaultNavListHandler=function(e,t,i){this.m_widget=e,this.m_root=t,this.m_component=i,this.m_widget.GetOption(this.m_widget.OPTION_EDGE)===this.m_widget.OPTION_EDGE_END&&this.m_root.addClass(this.m_widget.getNavListEndEdgeStyleClass())},i.DefaultNavListHandler.prototype.Destroy=function(){this.m_root.removeClass(this.m_widget.getNavListExpandedStyleClass()).removeClass(this.m_widget.getNavListVerticalStyleClass()).removeClass(this.m_widget.getNavListEndEdgeStyleClass())},i.DefaultNavListHandler.prototype.Expand=function(e,t,i){return Promise.resolve(null)},i.DefaultNavListHandler.prototype.Collapse=function(e,t,i,n){return Promise.resolve(null)},i.DefaultNavListHandler.prototype.HandleExpandAndCollapseKeys=function(e,t,i,n){return!1},i.DefaultNavListHandler.prototype.ModifyListItem=function(e,t){this.m_widget.isTabBar()&&this.m_widget.getSingleFocusableElement(e).attr("role","tab")},i.DefaultNavListHandler.prototype.UpdateAriaPropertiesOnSelectedItem=function(e,t){e.attr("aria-selected",t?"true":"false")},i.DefaultNavListHandler.prototype.BeforeRenderComplete=function(){var e=this.m_widget.element.attr("role");e&&"presentation"!=e&&(this.m_widget.element.attr("role","presentation"),this.m_widget.isTabBar()?this.m_root.attr("role","tablist"):this.m_root.attr("role",e))},i.DefaultNavListHandler.prototype.ItemInsertComplete=function(e,t){},i.DefaultNavListHandler.prototype.ItemRemoveComplete=function(e){},i.DefaultNavListHandler.prototype.HandleArrowKeys=function(e,t,i){return ht.superclass.HandleArrowKeys.apply(this.m_widget,arguments)},i.DefaultNavListHandler.prototype.IsArrowKey=function(e){return ht.superclass.IsArrowKey.apply(this.m_widget,arguments)},i.DefaultNavListHandler.prototype.GetState=function(e){return ht.superclass.GetState.apply(this.m_widget,arguments)},i.DefaultNavListHandler.prototype.SetState=function(e,t){ht.superclass.SetState.apply(this.m_widget,arguments)},i.DefaultNavListHandler.prototype.Init=function(e){this.m_root.addClass(this.m_widget.getNavListExpandedStyleClass()).addClass(this.m_widget.getNavListVerticalStyleClass())},i.DefaultNavListHandler.prototype.IsSelectable=function(e){return ht.superclass.IsSelectable.apply(this.m_widget,arguments)},i.DefaultNavListHandler.prototype.RestoreItem=function(e,t,i){},i.DefaultNavListHandler.prototype.SetOptions=function(e){},i.DefaultNavListHandler.prototype.HandleBlur=function(e){return ht.superclass.HandleBlur.apply(this.m_widget,arguments)},i.DefaultNavListHandler.prototype.HandleFocus=function(e){return ht.superclass.HandleFocus.apply(this.m_widget,arguments)},i.DefaultNavListHandler.prototype.GetNodeBySubId=function(e){return null},i.DefaultNavListHandler.prototype.GetSubIdByNode=function(e){return null},i.DefaultNavListHandler.prototype.HandleResize=function(e,t){},i.DefaultNavListHandler.prototype.NotifyAttached=function(){},i.DefaultNavListHandler.prototype.GetAnimationEffect=function(e){return ht.superclass.getAnimationEffect.apply(this.m_widget,arguments)},i.DefaultNavListHandler.prototype.IsOptionUpdateAllowed=function(e,t,i){return!0},i.DefaultNavListHandler.prototype.OptionUpdated=function(e,t,i){},i.DefaultNavListHandler.prototype.BeforeInsertItem=function(){},i.DefaultNavListHandler.prototype.HandleClick=function(e){},i.DefaultNavListHandler.prototype.HandleKeydown=function(e){},i.HorizontalNavListHandler=function(e,t,n){this.m_duringInit=!0,i.HorizontalNavListHandler.superclass.constructor.call(this,e,t,n),this.m_widget.GetOption(this.m_widget.OPTION_EDGE)===this.m_widget.OPTION_EDGE_BOTTOM&&this.m_root.addClass(this.m_widget.getNavListBottomEdgeStyleClass())},i.Object.createSubclass(i.HorizontalNavListHandler,i.DefaultNavListHandler,"oj.HorizontalNavListHandler"),i.HorizontalNavListHandler.prototype.Destroy=function(){this.m_root.removeClass(this.m_widget.getNavListExpandedStyleClass()).removeClass(this.m_widget.getHorizontalNavListStyleClass()).removeClass(this.m_widget.getNavListBottomEdgeStyleClass()),this.m_root.find("."+this.m_widget.getDividerStyleClass()).remove(),this._destroyOverflowMenu(),null!=this.m_overflowMenuItem&&(this.m_overflowMenuItem.remove(),this.m_overflowMenuItem=null),this.m_overflowMenuItems=[],this.m_duringInit=!0},i.HorizontalNavListHandler.prototype.UpdateAriaPropertiesOnSelectedItem=function(e,t){e.attr(this._isTabBar()?"aria-selected":"aria-pressed",t?"true":"false")},i.HorizontalNavListHandler.prototype._isTabBar=function(){return this.m_widget.isTabBar()},i.HorizontalNavListHandler.prototype.HandleArrowKeys=function(e,t,i){e===$.ui.keyCode.LEFT?e=this.m_widget.isRtl()?$.ui.keyCode.DOWN:$.ui.keyCode.UP:e===$.ui.keyCode.RIGHT&&(e=this.m_widget.isRtl()?$.ui.keyCode.UP:$.ui.keyCode.DOWN);var n=ht.superclass.HandleArrowKeys.call(this.m_widget,e,t,i);return this.m_widget.m_active.elem[0].scrollIntoView(!1),n},i.HorizontalNavListHandler.prototype.IsArrowKey=function(e){return e===this.m_widget.UP_KEY||e===this.m_widget.DOWN_KEY||e===this.m_widget.LEFT_KEY||e===this.m_widget.RIGHT_KEY},i.HorizontalNavListHandler.prototype.ModifyListItem=function(e,t){var i=this.m_widget.getSingleFocusableElement(e);i.attr("role",this._isTabBar()?"tab":"button"),!this._isTabBar()&&i[0].hasAttribute("aria-selected")&&(i.attr("aria-pressed","false"),i.removeAttr("aria-selected"))},i.HorizontalNavListHandler.prototype.BeforeRenderComplete=function(){var e,t,i=this;this._isTabBar()?this.m_root.attr("role","tablist"):this.m_root.attr("role","toolbar"),this.m_widget.element.attr("role","presentation"),(t=this.m_widget.element.find("."+this.m_widget.getItemElementStyleClass()+":visible")).each(function(n){e=$(this),n>0&&i._addSeparator(this,n),n===t.length-1?e.addClass(i.m_widget.getLastItemStyleClass()):e.removeClass(i.m_widget.getLastItemStyleClass())}),this.m_duringInit&&(this.m_duringInit=!1,this._handleOverflow())},i.HorizontalNavListHandler.prototype._addSeparator=function(e,t){var i=$(e),n=i.prev();t>0&&n.length&&!n.is("li."+this.m_widget.getDividerStyleClass())&&i.before('<li role="separator" class="'+this.m_widget.getDividerStyleClass()+'"></li>')},i.HorizontalNavListHandler.prototype.ItemInsertComplete=function(e,t){this._addSeparator(e,t.index),this._handleOverflow()},i.HorizontalNavListHandler.prototype.ItemRemoveComplete=function(e){var t=$(e),i=t.prev();if(i.length&&i.is("li."+this.m_widget.getDividerStyleClass()))i.remove();else{var n=t.next();n.is("li."+this.m_widget.getDividerStyleClass())&&n.remove()}this._handleOverflow()},i.HorizontalNavListHandler.prototype.IsSelectable=function(e){var t="aria-selected";return this._isTabBar()||(t="aria-pressed"),!(this.m_overflowMenuItem&&this.m_overflowMenuItem[0]===$(e)[0])&&this.m_widget.getFocusItem($(e))[0].hasAttribute(t)},i.HorizontalNavListHandler.prototype.Init=function(e){this.m_root.addClass(this.m_widget.getNavListExpandedStyleClass()).addClass(this.m_widget.getHorizontalNavListStyleClass()),this.m_overflowMenuItems=[]},i.HorizontalNavListHandler.prototype.HandleClick=function(e){$(e.target).closest("."+this.m_widget.getOverflowItemStyleClass()+" a."+this.m_widget.getItemContentStyleClass()).length>0&&this._launchOverflowMenu(e)},i.HorizontalNavListHandler.prototype.HandleKeydown=function(e){$(e.target).closest("."+this.m_widget.getOverflowItemStyleClass()+" a."+this.m_widget.getItemContentStyleClass()).length>0&&e.keyCode===$.ui.keyCode.SPACE&&this._launchOverflowMenu(e)},i.HorizontalNavListHandler.prototype.NotifyAttached=function(){this._handleOverflow()},i.HorizontalNavListHandler.prototype.HandleResize=function(e,t){this.m_ignoreNextResize?this.m_ignoreNextResize=!1:this._handleOverflow()},i.HorizontalNavListHandler.prototype.SetOptions=function(e){var t,i,n=this.m_widget.GetOption("overflow"),o=this.m_widget.GetOption("truncation");e.overflow&&n!==e.overflow&&(t=e.overflow),e.truncation&&o!==e.truncation&&(i=e.truncation),(t||i)&&this._handleOverflow(t,i)},i.HorizontalNavListHandler.prototype.GetAnimationEffect=function(e){return"add"===e||"remove"===e?ht.superclass.getAnimationEffect.call(this.m_widget,e+"HorizontalItem"):ht.superclass.getAnimationEffect.apply(this.m_widget,arguments)},i.HorizontalNavListHandler.prototype.GetNodeBySubId=function(e){var t,i,n,o,s=null;if(e.subId===this.m_widget.getItemSubIdKey()&&this.m_overflowMenuItems.length>0)for(i=this._getOverflowMenu(),t=e.key,n=i.find(".oj-menu-item"),o=0;o<n.length;o++)if(this.m_widget.compareValues($(n[o]).data("key"),t)){s=n[o],this._launchOverflowMenu(null);break}return s},i.HorizontalNavListHandler.prototype.GetSubIdByNode=function(e){var t,i,n=null;return i=$(e).closest(".oj-menu-item"),null!==this._getOverflowMenu()&&i.closest("."+this.m_widget.getOverflowMenuStyleClass())[0]!==this._getOverflowMenu()[0]?null:(null!=i&&i.length>0&&null!=(t=i.data("key"))&&(n={subId:this.m_widget.getItemSubIdKey(),key:t}),n)},i.HorizontalNavListHandler.prototype.OptionUpdated=function(e,t,i){"selection"===e&&this._toggleOverflowBtnSelection(t)},i.HorizontalNavListHandler.prototype.IsOptionUpdateAllowed=function(e,t,i){return"currentItem"!==e||!this.m_overflowMenuItem||this.m_overflowMenuItem.attr("id")!==t},i.HorizontalNavListHandler.prototype._handleOverflow=function(e,t){var n,o,s=-1;if(0!==(n=this._getItems()).length){if(e||(e=this.m_widget.GetOption("overflow")),t||(t=this.m_widget.GetOption("truncation")),!(o=new i._HorizontalNavListOverflowHandler(n,e,t,this)).shouldHandleOverflow())return o.unApplyTruncation(),void this._releaseContainerWidth();this.showAllItems(n,e),o.unApplyTruncation(),o.checkForOverflow()&&o.applyTruncation()&&(s=o.getOverflowThreshold()),this._applyThreshold(s),this._releaseContainerWidth()}},i.HorizontalNavListHandler.prototype.BeforeInsertItem=function(){this._fixContainerWidth()},i.HorizontalNavListHandler.prototype._fixContainerWidth=function(){var e,t;0!==(e=(t=this.m_widget.getRootElement())[0].getBoundingClientRect().width)&&(this.m_freezedCotnainerWidth=e,t.css("maxWidth",e))},i.HorizontalNavListHandler.prototype._releaseContainerWidth=function(){var e;(e=this.m_widget.getRootElement()).css("maxWidth","none"),e[0].getBoundingClientRect().width,this.m_freezedCotnainerWidth&&(this.m_ignoreNextResize=!0,this.m_freezedCotnainerWidth=null)},i.HorizontalNavListHandler.prototype.showAllItems=function(e,t){var i=this;"popup"===t&&this._showOrHideItem(this._getOverflowMenuButton(),!0),e.each(function(e,t){i._showOrHideItem($(t),!0)})},i.HorizontalNavListHandler.prototype._getItems=function(){return this.m_root.find("."+this.m_widget.getItemElementStyleClass()+":not(."+this.m_widget.getOverflowItemStyleClass()+")")},i.HorizontalNavListHandler.prototype._hasSeparators=function(){return this.m_root.hasClass(this.m_widget.getNavListItemsDividerStyleClass())},i.HorizontalNavListHandler.prototype._showOrHideItem=function(e,t){var i;this._hasSeparators()&&(i=e.prev("."+this.m_widget.getDividerStyleClass())),t?(e.show(),i&&i.show()):(e.hide(),i&&i.hide())},i.HorizontalNavListHandler.prototype._applyThreshold=function(e){var t,i,n,o,s=this,r=this._getItems(),a=[];0!==r.length&&(this.m_root.find("."+this.m_widget.getLastItemStyleClass()).removeClass(this.m_widget.getLastItemStyleClass()),-1===e||e>=r.length?this.m_overflowMenuItem&&this._showOrHideItem(this.m_overflowMenuItem,!1):(this._addSeparator(this._getOverflowMenuButton(),r.length),this._showOrHideItem(this._getOverflowMenuButton(),!0),n=!0),r.each(function(n,o){var r=$(o);-1!==e&&e<=n?(r.hasClass("oj-focus")&&s.m_widget.ActiveAndFocus(s._getOverflowMenuButton(),null),s._showOrHideItem(r,!1),t={},a.push(t),t.key=s.m_widget.GetKey(o),t.label=s._getItemLabel(r),r.hasClass("oj-disabled")&&(t.disabled=!0)):(i=r,s._showOrHideItem(r,!0),s.m_overflowMenuItem&&s.m_overflowMenuItem.hasClass("oj-focus")&&s.m_widget.compareValues(s.m_widget.GetKey(o),s.m_widget.GetOption("currentItem"))&&s.m_widget.ActiveAndFocus(i,null))}),n?this._getOverflowMenuButton().addClass(this.m_widget.getLastItemStyleClass()):i.addClass(this.m_widget.getLastItemStyleClass()),this.m_overflowMenuItems=a,this.m_widget.ClearCache(),o=this.m_overflowMenu&&this.m_overflowMenu.is(":visible"),this._destroyOverflowMenu(),o&&this._launchOverflowMenu(null))},i.HorizontalNavListHandler.prototype._destroyOverflowMenu=function(){this.m_overflowMenu&&(this.m_overflowMenu.ojMenu("destroy"),this.m_overflowMenu.remove(),this.m_overflowMenu=null)},i.HorizontalNavListHandler.prototype._getOverflowMenuButton=function(){var e,t,i,n,o;return this.m_overflowMenuItem||(n=$(document.createElement("li")),e=$(document.createElement("a")),t=$(document.createElement("span")),i=$(document.createElement("span")),o=this._getItems(),n.uniqueId().attr("role","presentation").addClass(this.m_widget.getItemElementStyleClass()).addClass(this.m_widget.getItemStyleClass()).addClass(this.m_widget.getOverflowItemStyleClass()).addClass("oj-default").append(e),e.addClass(this.m_widget.getFocusedElementStyleClass()).addClass(this.m_widget.getItemContentStyleClass()),e.attr("role","button").attr("aria-haspopup","true").attr("aria-pressed","false").attr("tabindex","-1").attr("data-tabmod","-1").attr("href","#").append(i).append(t),this.m_root.find("ul:first").hasClass(this.m_widget.getHasIconsStyleClass())||e.addClass(this.m_widget.getHasNoIconStyleClass()),t.text(this.m_widget.ojContext.getTranslatedString("overflowItemLabel")).addClass(this.m_widget.getItemLabelStyleClass()),i.addClass(this.m_widget.getItemIconStyleClass()).addClass("oj-fwk-icon").addClass(this.m_widget.getOverflowItemIconStyleClass()),n[0].key=n.attr("id"),this.m_root.find("."+this.m_widget.GetStyleClass()).append(n),this._addSeparator(n,o.length),this.m_overflowMenuItem=n),this.m_overflowMenuItem},i.HorizontalNavListHandler.prototype._getOverflowMenu=function(){var e,t,i,n,o=this.m_overflowMenuItems;if(0===o.length)return null;if(!this.m_overflowMenu){for((n=$(document.createElement("ul"))).addClass(this.m_widget.getOverflowMenuStyleClass()).hide(),this.m_root.append(n),i=0;i<o.length;i++)e=$(document.createElement("li")),(t=$(document.createElement("a"))).attr("href","#").text(o[i].label),e.data("key",o[i].key),o[i].disabled&&e.addClass("oj-disabled"),e.append(t),n.append(e);n.ojMenu({openOptions:{display:"auto"},open:this.__handleOverflowMenuOpen.bind(this),close:this.__handleOverflowMenuClose.bind(this),select:this.__handleOverflowMenuSelection.bind(this)}),this.m_overflowMenu=n}return this.m_overflowMenu},i.HorizontalNavListHandler.prototype._launchOverflowMenu=function(e){this._getOverflowMenu().is(":visible")||(this._getOverflowMenuButton().addClass("oj-selected").removeClass("oj-default"),this._getOverflowMenu().ojMenu("open",e,{launcher:this._getOverflowMenuButton(),initialFocus:"firstItem",position:{my:"end bottom",at:"end top",collision:"flipfit"}}))},i.HorizontalNavListHandler.prototype._toggleOverflowBtnSelection=function(e){var t,i;if(this.m_overflowMenuItem&&this.m_overflowMenuItems.length>0){if(e)for(i=0;i<this.m_overflowMenuItems.length;i++)if(this.m_widget.compareValues(this.m_overflowMenuItems[i].key,e)){t=!0;break}t||this._getOverflowMenuButton().addClass("oj-default").removeClass("oj-selected")}},i.HorizontalNavListHandler.prototype.__handleOverflowMenuOpen=function(e,t){this._getOverflowMenuButton().find("."+this.m_widget.getItemContentStyleClass()).attr("tabindex","0")},i.HorizontalNavListHandler.prototype.__handleOverflowMenuClose=function(e,t){var i=this.m_widget.ojContext.option("selection");this._toggleOverflowBtnSelection(i),this._getOverflowMenuButton().find("."+this.m_widget.getItemContentStyleClass()).focus()},i.HorizontalNavListHandler.prototype.__handleOverflowMenuSelection=function(e,t){var i,n=t.item.data("key"),o={selection:n},s=this.m_widget.FindElementByKey(n);this.m_widget.HandleSelectionOption(o),(i=o.selection)&&this.m_widget.SetOption("selection",i,{_context:{originalEvent:e,internalSet:!0,extraData:{items:$(s)}},changed:!0})},i.HorizontalNavListHandler.prototype._getItemLabel=function(e){var t=e.find("."+this.m_widget.getItemTitleStyleClass()+":first");return t.length>0?t.text():e.find("."+this.m_widget.getItemLabelStyleClass()+":first").text()},i._HorizontalNavListOverflowHandler=function(e,t,i,n){this._overflow=t,this._truncation=i,this._items=e,this._navlistHandler=n},i._HorizontalNavListOverflowHandler.prototype._getOverflowMenuButton=function(){return this._navlistHandler._getOverflowMenuButton()},i._HorizontalNavListOverflowHandler.prototype._getWidget=function(){return this._navlistHandler.m_widget},i._HorizontalNavListOverflowHandler.prototype.shouldHandleOverflow=function(){return"popup"===this._overflow||"progressive"===this._truncation},i._HorizontalNavListOverflowHandler.prototype.unApplyTruncation=function(){var e=this;this._items.each(function(t,i){$(i).find("."+e._getWidget().getItemLabelStyleClass()).css("max-width","")})},i._HorizontalNavListOverflowHandler.prototype.checkForOverflow=function(){return!!this.shouldHandleOverflow()&&(this._overflowData||(this._overflowData=this._collectOverflowData()),this._isOverflowed(this._overflowData.containerEdgePos,this._overflowData.itemEdgePos,0))},i._HorizontalNavListOverflowHandler.prototype.applyTruncation=function(){"progressive"===this._truncation&&this._applyLabelMaxWidth(this._overflowData);var e=this._items.last()[0].getBoundingClientRect()["ltr"===i.DomUtils.getReadingDirection()?"right":"left"];return this._isOverflowed(this._overflowData.containerEdgePos,e,0)},i._HorizontalNavListOverflowHandler.prototype.getOverflowThreshold=function(){var e=-1;return"popup"===this._overflow&&(e=this._calculateThreshold(this._overflowData)),e},i._HorizontalNavListOverflowHandler.prototype._collectOverflowData=function(){var e,t,n,o,s,r,a;return e="ltr"===i.DomUtils.getReadingDirection()?"right":"left",a=this._getWidget().ojContext.element,t=this._items.last(),"progressive"===this._truncation&&(n=this._calculateItemNonTextWidth()),r=a[0].getBoundingClientRect()[e],s=a[0].getBoundingClientRect().width,"popup"===this._overflow&&(o=this._getOverflowMenuButton()[0].getBoundingClientRect().width),{containerEdgePos:r,containerWidth:s,overflowItemWidth:o,itemEdgePos:t[0].getBoundingClientRect()[e],itemNonTextWidth:n}},i._HorizontalNavListOverflowHandler.prototype._calculateItemNonTextWidth=function(){var e,t,i=null,n=this._items,o=this;return this._getWidget().getRootElement().hasClass("."+this._getWidget().getHasIconsStyleClass())&&(n=n.filter(function(e,t){return $(t).find("."+o._getWidget().getItemIconStyleClass()).length>0})),t=(i=(e=n.filter(function(e,t){return $(t).find("."+o._getWidget().getRemovableStyleClass()).length>0}))&&e.length>0?e.last():n.last()).find("."+this._getWidget().getItemLabelStyleClass())[0].getBoundingClientRect().width,i[0].getBoundingClientRect().width-t},i._HorizontalNavListOverflowHandler.prototype._isOverflowed=function(e,t,n){return n=n||0,"ltr"===i.DomUtils.getReadingDirection()?t-e+n>.1:e-t+n>.1},i._HorizontalNavListOverflowHandler.prototype._calculateThreshold=function(e){var t,n,o,s;for(n=this._items,t="ltr"===i.DomUtils.getReadingDirection()?"right":"left",o=n[s=n.length-1].getBoundingClientRect()[t];this._isOverflowed(e.containerEdgePos,o,e.overflowItemWidth)&&s>0;)o=n[s-=1].getBoundingClientRect()[t];return s+1},i._HorizontalNavListOverflowHandler.prototype._applyLabelMaxWidth=function(e){var t=this._items,i=this,n=this._getMinLabelWidth(this._items),o=e.containerWidth/t.length-e.itemNonTextWidth;o<n&&(o=n),t.each(function(e,t){$(t).find("."+i._getWidget().getItemLabelStyleClass()).css({"max-width":o+"px"})})},i._HorizontalNavListOverflowHandler.prototype._getMinLabelWidth=function(e){var t=window.getComputedStyle(e.first().find("."+this._getWidget().getItemLabelStyleClass())[0],null).getPropertyValue("min-width");return t.indexOf("px")>0?parseInt(t.substring(0,t.length-2),10):0},i.CollapsibleNavListHandler=function(e,t,n){i.CollapsibleNavListHandler.superclass.constructor.call(this,e,t,n)},i.Object.createSubclass(i.CollapsibleNavListHandler,i.DefaultNavListHandler,"oj.CollapsibleNavListHandler"),i.CollapsibleNavListHandler.prototype.Destroy=function(){this.m_root.removeClass(this.m_widget.getNavListCollapsibleStyleClass()).removeClass(this.m_widget.getNavListVerticalStyleClass())},i.CollapsibleNavListHandler.prototype.Init=function(e){this.m_root.addClass(this.m_widget.getNavListCollapsibleStyleClass()).addClass(this.m_widget.getNavListVerticalStyleClass())},i.CollapsibleNavListHandler.prototype.Expand=function(e,t,i){return ht.superclass.AnimateExpand.apply(this.m_widget,arguments)},i.CollapsibleNavListHandler.prototype.Collapse=function(e,t,i,n){return ht.superclass.AnimateCollapse.apply(this.m_widget,arguments)},i.CollapsibleNavListHandler.prototype.HandleExpandAndCollapseKeys=function(e,t,i,n){var o=i.children("."+this.m_widget.getGroupStyleClass()).length>0;if(t===this.m_widget.LEFT_KEY||t===this.m_widget.RIGHT_KEY)return t===this.m_widget.LEFT_KEY&&!this.m_widget.isRtl()||t===this.m_widget.RIGHT_KEY&&this.m_widget.isRtl()?this.m_widget.GetState(i)===this.m_widget.STATE_EXPANDED&&this.m_widget.CollapseItem(i,e,!0,n,!0,!0):this.m_widget.GetState(i)===this.m_widget.STATE_COLLAPSED&&this.m_widget.ExpandItem(i,e,!0,n,!0,!0,!0),!0;if(o&&(t===$.ui.keyCode.ENTER||t===$.ui.keyCode.SPACE)){if(i.length<=0)return;return this.m_widget.GetState(i)===this.m_widget.STATE_COLLAPSED?this.m_widget.ExpandItem(i,null,!0,n,!0,!0,!0):this.m_widget.GetState(i)===this.m_widget.STATE_EXPANDED&&this.m_widget.CollapseItem(i,null,!0,n,!0,!0),!0}return!1},i.SlidingNavListHandler=function(e,t,n){i.SlidingNavListHandler.superclass.constructor.call(this,e,t,n),this.m_expanded=[]},i.Object.createSubclass(i.SlidingNavListHandler,i.CollapsibleNavListHandler,"oj.SlidingNavListHandler"),i.SlidingNavListHandler.prototype.Destroy=function(){this.m_root.removeClass("oj-navigationlist-slider").removeClass(this.m_widget.getNavListVerticalStyleClass()),this._toolbar.remove()},i.SlidingNavListHandler.prototype._slideAnimation=function(e,t,i,n,o){var s,r=this,a=this.m_widget.getRootElement(),l=(this.m_widget.isRtl(),this.m_widget.getRootElement().hasClass("oj-focus-ancestor"));s=t?"sliderExpand":"sliderCollapse",this.m_widget.StartAnimation(a.get(0),s,this.m_widget.getAnimationEffect(s)).then(function(){r._slideAnimationComplete(e,t,i,n,l),o(null)})},i.SlidingNavListHandler.prototype._slideAnimationComplete=function(e,t,i,n,o){null!==this.m_widget.m_contentHandler&&(i&&(o&&this.m_widget.getRootElement().addClass("oj-focus-ancestor"),n&&0===n.button&&this.m_widget.AvoidFocusHighLight(!0),this.m_widget.SetCurrentItem(i,n),this.m_widget.AvoidFocusHighLight(!1)),t?this.m_widget.AnimateExpandComplete(e.children("."+this.m_widget.getGroupStyleClass())):this.m_widget.AnimateCollapseComplete(e.children("."+this.m_widget.getGroupStyleClass())))},i.SlidingNavListHandler.prototype.Expand=function(e,t,i){var n,o,s=new Promise(function(e,t){n=e}),r=$(e).parents(".oj-navigationlist-item-element:first"),a=r.children("."+this.m_widget.getGroupStyleClass()),l=null,u=r.closest("."+this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS);if(u.length>0){u.removeClass(this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS),r.addClass(this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS),l=a.find("."+this.m_widget.getItemElementStyleClass()+":eq(0)");var h=r.parentsUntil(u,"ul");h=u.is(this.m_widget.element)?h.get().concat(u.get()):h.get();var d,c=this;(h=$(h.reverse())).each(function(e,t){o=$(t).is(c.m_widget.element)?c.m_widget.getRootLabel():c.m_widget.getItemLabel($(t).parent()),d=e===h.length-1?r:$(h.get(e+1)).parent(),c._addItemToHviewMenu(c.m_widget.GetKey(d[0]),c.m_widget.getItemLabel(d),o),c.m_expanded.push(d)})}return t?this._slideAnimation(r,!0,l,i,n):(this._slideAnimationComplete(r,!0,l,i,!1),n(null)),r.siblings().attr("aria-hidden","true"),r.children("."+this.m_widget.getGroupItemStyleClass()).children("."+this.m_widget.getItemContentStyleClass()).attr("aria-hidden","true"),a.removeAttr("aria-hidden"),e.css("display",""),r.addClass("oj-skipfocus"),s},i.SlidingNavListHandler.prototype.Collapse=function(e,t,i,n){var o,s=new Promise(function(e,t){o=e}),r=e.children("."+this.m_widget.getGroupStyleClass()),a=e.parent();return e.children("."+this.m_widget.getGroupItemStyleClass()).children("."+this.m_widget.getItemContentStyleClass()).removeAttr("aria-hidden"),r.attr("aria-hidden","true"),e.siblings().removeAttr("aria-hidden"),e.removeClass("oj-skipfocus"),e.removeClass(this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS),0===e.closest("."+this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS).length&&(a.closest("."+this.m_widget.getItemElementStyleClass()).addClass(this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS),this.m_widget.element.is(a)&&this.m_widget.element.addClass(this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS)),i?this._slideAnimation(e,!1,r.parent(),n,o):(this._slideAnimationComplete(e,!1,r.parent(),n,!1),o(null)),this._removeItemFromHviewMenu(),s},i.SlidingNavListHandler.prototype.UpdateAriaPropertiesOnSelectedItem=function(e,t){t?e.attr("aria-describedby",this._selectedLabelId):e.removeAttr("aria-describedby")},i.SlidingNavListHandler.prototype.GetState=function(e){var t=this.m_widget.getFocusItem(e).attr("aria-expanded");return"true"===t?this.m_widget.STATE_EXPANDED:"false"===t?this.m_widget.STATE_COLLAPSED:this.m_widget.STATE_NONE},i.SlidingNavListHandler.prototype.SetState=function(e,t){t===this.m_widget.STATE_EXPANDED?(this.m_widget.getFocusItem(e).attr("aria-expanded","true"),e.removeClass(this.m_widget.COLLAPSED_STYLE_CLASS).addClass(this.m_widget.EXPANDED_STYLE_CLASS)):t===this.m_widget.STATE_COLLAPSED&&(this.m_widget.getFocusItem(e).attr("aria-expanded","false"),e.removeClass(this.m_widget.EXPANDED_STYLE_CLASS).addClass(this.m_widget.COLLAPSED_STYLE_CLASS))},i.SlidingNavListHandler.prototype.ModifyListItem=function(e,t){var i=this.m_widget.getFocusItem(e);e.attr("role","presentation"),i.attr("role","menuitem"),t.attr("id")||t.uniqueId();var n=e.children("."+this.m_widget.getGroupStyleClass());n.length>0&&(i.attr("aria-haspopup","true"),n.attr("role","menu"),n.css("display",""),e.removeAttr("aria-expanded"),i.attr("aria-expanded","false"))},i.SlidingNavListHandler.prototype.BeforeRenderComplete=function(){this.m_root.attr("role","menu"),this.m_widget.element.attr("role","presentation")},i.SlidingNavListHandler.prototype.Init=function(e){this.m_root.addClass("oj-navigationlist-slider").addClass(this.m_widget.getNavListVerticalStyleClass()),e.element.addClass("oj-navigationlist-current"),this._buildSlidingNavListHeader(e),this._initializeHierarchicalView()},i.SlidingNavListHandler.prototype.HandleClick=function(e){$(e.target).closest(".oj-navigationlist-previous-link, .oj-navigationlist-previous-button").length>0&&this.CollapseCurrentList(e)},i.SlidingNavListHandler.prototype.HandleKeydown=function(e){$(e.target).closest(".oj-navigationlist-previous-link, .oj-navigationlist-previous-button").length>0&&e.keyCode===$.ui.keyCode.ENTER&&this.CollapseCurrentList(e),$(e.target).closest("."+this.m_widget.GetStyleClass()).length>0&&(e.keyCode!==$.ui.keyCode.ESCAPE||e.isDefaultPrevented()||this.CollapseCurrentList(e))},i.SlidingNavListHandler.prototype._buildSlidingNavListHeader=function(e){var t;this._toolbar=$(document.createElement("div")),this._toolbar.addClass("oj-navigationlist-toolbar"),this._previousLink=$(document.createElement("a")),this._prevButton=$(document.createElement("a")),this._prevButton.addClass("oj-navigationlist-previous-button"),this._prevButton.css("visibility","hidden").attr("tabindex","-1"),this._previousLink.addClass("oj-navigationlist-previous-link").attr("tabindex","-1"),this._headerLabel=$(document.createElement("label")),this._headerLabel.addClass("oj-navigationlist-current-header").text(this.m_widget.getRootLabel()),this._vSeparator=$(document.createElement("span")),this._vSeparator.attr("role","separator").attr("aria-orientation","vertical").addClass("oj-navigationlist-toolbar-separator"),this._hviewBtn=$(document.createElement("button")),this._hviewBtn.addClass("oj-navigationlist-hierarchical-button").attr("tabindex","-1"),this._hviewMenu=$(document.createElement("ul")),this._hviewMenu.addClass("oj-navigationlist-hierarchical-menu").hide(),(t=$(document.createElement("label"))).uniqueId().addClass("oj-helper-hidden-accessible").attr("aria-hidden","true"),this._selectedLabelId=t.attr("id"),t.text(this.m_component.getTranslatedString("selectedLabel")),this._previousLink.append(this._headerLabel),this._toolbar.append(this._prevButton),this._toolbar.append(this._previousLink).append(this._vSeparator).append(this._hviewBtn).append(this._hviewMenu).append(t),this.m_root.prepend(this._toolbar),this._showOrHideHierarchyMenu(e.hierarchyMenuDisplayThresholdLevel)},i.SlidingNavListHandler.prototype.CollapseCurrentList=function(e){var t=this.m_expanded.pop();t&&this.m_widget.CollapseItem(t,e,!0,null,!0,!0)},i.SlidingNavListHandler.prototype._initializeHierarchicalView=function(){var e=this,t=this._hviewMenu.uniqueId().attr("id");this._hviewMenu.ojMenu({openOptions:{position:{my:"end top",at:"end bottom"}},select:function(t,i){var n,o,s=i.item.nextAll(),r=e.m_expanded,a=i.item.data("key");for(e.m_widget.signalTaskStart();r.length>0&&(o=r.pop(),n=e.m_widget.GetKey(o[0]),e.m_widget.CollapseItem($(o),t,!0,n,!0,!0),!e.m_widget.compareValues(a,n)););s.remove(),i.item.remove(),e._hviewMenu.ojMenu("refresh"),e.m_widget.signalTaskEnd()}}),this._hviewBtn.ojButton({label:this.m_component.getTranslatedString("hierMenuBtnLabel"),display:"icons",icons:{start:"oj-fwk-icon oj-hier-icon"},menu:"#"+t,disabled:!0,chroming:"half"}),this._prevButton.ojButton({label:this.m_component.getTranslatedString("previousIcon"),display:"icons",icons:{start:"oj-navigationlist-previous-icon oj-component-icon oj-clickable-icon-nocontext"},chroming:"half"})},i.SlidingNavListHandler.prototype._addItemToHviewMenu=function(e,t,i){var n;if(this._hviewBtn){var o=this._hviewMenu.find("li").length,s=$(document.createElement("li")),r=$(document.createElement("a"));if(r.attr("href","#"),s.append(r),o>0){for(n=0;n<o;n++)n>0&&r.append($(document.createElement("span")).addClass("oj-navigationlist-hvitem-space"));r.append($(document.createElement("span")).addClass("oj-menu-item-icon oj-icon oj-navigationlist-level-indicator"))}var a=$(document.createElement("span")).addClass("oj-navigationlist-hierarchical-menu-label");a.text(i),r.append(a),s.data("key",e),this._hviewMenu.append(s),this._hviewMenu.ojMenu("refresh"),this._showOrHideHierarchyMenu(this.m_widget.GetOption("hierarchyMenuDisplayThresholdLevel")),this._hviewBtn.ojButton("option","disabled",!1),this._prevButton.css("visibility","visible"),this.m_widget.getRootElement().hasClass("oj-focus-ancestor")&&this._prevButton.attr("tabindex","0"),this._headerLabel.text(t)}},i.SlidingNavListHandler.prototype.SetOptions=function(e){void 0!==e.hierarchyMenuDisplayThresholdLevel&&(this.m_widget.GetOption("hierarchyMenuDisplayThresholdLevel")!==e.hierarchyMenuDisplayThresholdLevel&&this._showOrHideHierarchyMenu(e.hierarchyMenuDisplayThresholdLevel))},i.SlidingNavListHandler.prototype._showOrHideHierarchyMenu=function(e){var t=this._hviewMenu.find("li").length;-1===e||t<e?(this._vSeparator.css("visibility","hidden"),this._hviewBtn[0]===document.activeElement&&this.m_root.focusin(),this._hviewBtn.css("visibility","hidden")):t>=e&&(this._vSeparator.css("visibility","visible"),this._hviewBtn.css("visibility","visible"))},i.SlidingNavListHandler.prototype._removeItemFromHviewMenu=function(){if(this._hviewBtn){var e=this._hviewMenu.find("li").last().remove();this._hviewMenu.ojMenu("refresh"),this._showOrHideHierarchyMenu(this.m_widget.GetOption("hierarchyMenuDisplayThresholdLevel")),0===this._hviewMenu.children("li").length?(this._hviewBtn.ojButton("option","disabled",!0),this._prevButton.css("visibility","hidden"),this._prevButton.attr("tabindex","-1"),this._headerLabel.text(this.m_widget.getRootLabel())):this._headerLabel.text(e.children("a").text())}},i.SlidingNavListHandler.prototype.RestoreItem=function(e,t,i){e.removeClass(this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS),t.removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-describedby").removeAttr("aria-hidden")},i.SlidingNavListHandler.prototype._makeToolbarItemsFocusable=function(e){e?(this._hviewMenu.find("li").length&&this._prevButton.attr("tabindex","0"),this._hviewBtn.attr("tabindex","0")):(this._prevButton.attr("tabindex","-1"),this._hviewBtn.attr("tabindex","-1"))},i.SlidingNavListHandler.prototype.HandleFocus=function(e){$.contains(this._toolbar.get(0),e.target)||this._hviewMenu.get(0)===e.relatedTarget||(this._makeToolbarItemsFocusable(!0),ht.superclass.HandleFocus.apply(this.m_widget,arguments))},i.SlidingNavListHandler.prototype.HandleBlur=function(e){$.contains(this._toolbar.get(0),e.relatedTarget)||this._hviewMenu.get(0)===e.relatedTarget?this.m_widget.UnhighlightActive():(null!=e.relatedTarget&&$.contains(this.m_root.get(0),e.relatedTarget)||this._makeToolbarItemsFocusable(!1),ht.superclass.HandleBlur.apply(this.m_widget,arguments))},i.SlidingNavListHandler.prototype.GetNodeBySubId=function(e){return"oj-navigationlist-previous-link"===e.subId?this._prevButton?this._prevButton[0]:null:"oj-navigationlist-hierarchical-button"===e.subId?this._hviewBtn?this._hviewBtn[0]:null:"oj-navigationlist-hierarchical-menu"===e.subId&&this._hviewMenu?this._hviewMenu[0]:null},i.SlidingNavListHandler.prototype.GetSubIdByNode=function(e){return $(e).closest(this._prevButton).length>0?{subId:"oj-navigationlist-previous-link"}:$(e).closest(this._hviewBtn).length>0?{subId:"oj-navigationlist-hierarchical-button"}:$(e).closest(this._hviewMenu).length>0?{subId:"oj-navigationlist-hierarchical-menu"}:null};var ht=function(e,t){var n=function(){};return i.Object.createSubclass(n,e,""),$.extend(n.prototype,t),n}(i._ojListView,{OPTION_DRILL_MODE:"drillMode",OPTION_DRILL_MODE_NONE:"none",OPTION_DRILL_MODE_COLLAPSIBLE:"collapsible",OPTION_DRILL_MODE_SLIDING:"sliding",OPTION_DISPLAY:"display",OPTION_DISPLAY_ICONS:"icons",OPTION_DISPLAY_ALL:"all",OPTION_EDGE:"edge",OPTION_EDGE_TOP:"top",OPTION_EDGE_END:"end",OPTION_EDGE_START:"start",OPTION_EDGE_BOTTOM:"bottom",OPTION_SELECTION:"selection",OPTION_CURRENT_ITEM:"currentItem",TAG_NAME_TAB_BAR:"oj-tab-bar",NAVLIST_ITEM_SUBID_KEY:{navlist:"oj-navigationlist-item",tabbar:"oj-tabbar-item"},NAVLIST_EXPANDED_STYLE_CLASS:{navlist:"oj-navigationlist-expanded",tabbar:"oj-tabbar-expanded"},NAVLIST_COLLAPSIBLE_STYLE_CLASS:{navlist:"oj-navigationlist-collapsible",tabbar:"oj-tabbar-collapsible"},NAVLIST_VERTICAL_STYLE_CLASS:{navlist:"oj-navigationlist-vertical",tabbar:"oj-tabbar-vertical"},ITEM_CONTENT_STYLE_CLASS:{navlist:"oj-navigationlist-item-content",tabbar:"oj-tabbar-item-content"},NAVLIST_DIVIDERS_STYLE_CLASS:{navlist:"oj-navigationlist-item-dividers",tabbar:"oj-tabbar-item-dividers"},LAST_ITEM_STYLE_CLASS:{navlist:"oj-navigationlist-item-last-child",tabbar:"oj-tabbar-item-last-child"},EXPANDED_STYLE_CLASS:"oj-expanded",COLLAPSED_STYLE_CLASS:"oj-collapsed",SLIDING_NAVLIST_CURRENT_STYLE_CLASS:"oj-navigationlist-current",DIVIDER_STYLE_CLASS:{navlist:"oj-navigationlist-divider",tabbar:"oj-tabbar-divider"},NAVLIST_OVERFLOW_MENU_ITEM:{navlist:"oj-navigationlist-overflow-menu-item",tabbar:"oj-tabbar-overflow-menu-item"},NAVLIST_OVERFLOW_MENU:{navlist:"oj-navigationlist-overflow-menu",tabbar:"oj-tabbar-overflow-menu"},NAVLIST_OVERFLOW_ITEM_ICON:{navlist:"oj-navigationlist-overflow-item-icon",tabbar:"oj-tabbar-overflow-item-icon"},_CATEGORY_DIVIDER_STYLE_CLASS:{navlist:"oj-navigationlist-category-divider",tabbar:"oj-tabbar-category-divider"},_ITEM_LABEL_STYLE_CLASS:{navlist:"oj-navigationlist-item-label",tabbar:"oj-tabbar-item-label"},_ICON_ONLY_STYLE_CLASS:{navlist:"oj-navigationlist-icon-only",tabbar:"oj-tabbar-icon-only"},_ITEM_ICON_STYLE_CLASS:{navlist:"oj-navigationlist-item-icon",tabbar:"oj-tabbar-item-icon"},_HORIZONTAL_NAVLIST_STYLE_CLASS:{navlist:"oj-navigationlist-horizontal",tabbar:"oj-tabbar-horizontal"},_NAVLIST_END_EDGE_STYLE_CLASS:{navlist:"oj-navigationlist-vertical-end",tabbar:"oj-tabbar-vertical-end"},_NAVLIST_BOTTOM_EDGE_STYLE_CLASS:{navlist:"oj-navigationlist-horizontal-bottom",tabbar:"oj-tabbar-horizontal-bottom"},_NAVLIST_HAS_ICONS:{navlist:"oj-navigationlist-has-icons",tabbar:"oj-tabbar-has-icons"},_NAVLIST_ITEM_HAS_NO_ICON:{navlist:"oj-navigationlist-item-no-icon",tabbar:"oj-tabbar-item-no-icon"},_NAVLIST_ITEM_TITLE:{navlist:"oj-navigationlist-item-title",tabbar:"oj-tabbar-item-title"},_NAVLIST_STYLE_CLASS:{navlist:"oj-navigationlist",tabbar:"oj-tabbar"},_NAVLIST_TOUCH_STYLE_CLASS:{navlist:"oj-navigationlist-touch",tabbar:"oj-tabbar-touch"},_NAVLIST_LISTVIEW_CONTAINER_STYLE_CLASS:{navlist:"oj-navigationlist-listview-container",tabbar:"oj-tabbar-listview-container"},_IS_TITLE_ATTR_ADDED_DUE_TO_TRUNCATION:"IsTitleAttrDueToTruncation",_APPLICATION_LEVEL_NAV_STYLE_CLASS:"oj-navigationlist-app-level",_PAGE_LEVEL_NAV_STYLE_CLASS:"oj-navigationlist-page-level",_NAVLIST_ITEM_ICON_HAS_TITLE:"navigationListItemIconHastitle",_NAVLIST_NO_FOLLOW_LINK_CLASS:{navlist:"oj-navigationlist-nofollow-link",tabbar:"oj-tabbar-nofollow-link"},_CONTAINER_STYLE_CLASS:{navlist:"oj-navigationlist-listview",tabbar:"oj-tabbar-listview"},_ELEMENT_STYLE_CLASS:{navlist:"oj-navigationlist-element",tabbar:"oj-tabbar-element"},_ELEMENT_EMPTY_TEXT_STYLE_CLASS:{navlist:"oj-navigationlist-empty-text",tabbar:"oj-tabbar-empty-text"},_ELEMENT_NO_DATA_MSG_STYLE_CLASS:{navlist:"oj-navigationlist-no-data-message",tabbar:"oj-tabbar-no-data-message"},_FOCUSED_ELEMENT_STYLE_CLASS:{navlist:"oj-navigationlist-focused-element",tabbar:"oj-tabbar-focused-element"},_ITEM_ELEMENT_STYLE_CLASS:{navlist:"oj-navigationlist-item-element",tabbar:"oj-tabbar-item-element"},_ITEM_STYLE_CLASS:{navlist:"oj-navigationlist-item",tabbar:"oj-tabbar-item"},_OPTION_DEFAULT_STYLE_CLASS:{navlist:"oj-navigationlist-option-defaults",tabbar:"oj-tabbar-option-defaults"},getItemLabel:function(e){var t=this.getItemContentElement(e);return t.is("a")?$.trim(t.text()):$.trim(t.find("."+this.getItemTitleStyleClass()).text())},getItemContentElement:function(e){var t=e.children("."+this.getItemContentStyleClass());return 0===t.length&&0===(t=e.children("."+this.getGroupItemStyleClass()).children("."+this.getItemContentStyleClass())).length&&(t=e.children("."+this.getGroupItemStyleClass()).children(":not(."+this.getExpandIconStyleClass()+"):not(."+this.getCollapseIconStyleClass()+")")),t},isRtl:function(){return"rtl"===this.ojContext._GetReadingDirection()},_initNavigationMode:function(e){e[0].tagName.toLowerCase()===this.TAG_NAME_TAB_BAR?this._navigationMode="tabbar":this._navigationMode="navlist"},_getNavigationMode:function(){return this._navigationMode},renderComplete:function(){this.m_listHandler.BeforeRenderComplete(),ht.superclass.renderComplete.apply(this,arguments)},itemInsertComplete:function(e,t){this.m_listHandler.ItemInsertComplete(e,t)},itemRemoveComplete:function(e){this.m_listHandler.ItemRemoveComplete(e),ht.superclass.itemRemoveComplete.apply(this,arguments)},_restoreContent:function(e){var t,i,n,o,s,r,a=e.children();for(e.removeAttr("style").removeClass(this.getHasIconsStyleClass()).removeAttr("aria-hidden"),t=0;t<a.length;t++)i=a[t],(i=$(i)).hasClass(this.getDividerStyleClass())?i.remove():((n=this.getItemContentElement(i)).removeClass(this.getItemContentStyleClass()).removeClass(this.getHasNoIconStyleClass()).removeAttr("aria-haspopup"),(o=n.children("."+this.getItemIconStyleClass()))&&o.length>0&&(o.removeAttr("role"),o.removeAttr("aria-label"),this._removeToolTipOnIcon(o)),i.removeClass("oj-default").removeAttr("role").removeAttr("aria-disabled").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-pressed"),(s=this.getFocusItem(i)).removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-pressed"),n.children("."+this.getItemLabelStyleClass()).contents().unwrap(),s.data(this._IS_TITLE_ATTR_ADDED_DUE_TO_TRUNCATION)&&s.removeAttr("title"),(r=i.children("ul")).length>0?(this.m_listHandler.RestoreItem(i,n,r),this._restoreContent(r)):this.m_listHandler.RestoreItem(i,n))},GetDnDContext:function(){if(void 0!==i.NavigationListDndContext&&this.ojContext.element[0].tagName.toLowerCase()===this.TAG_NAME_TAB_BAR)return new i.NavigationListDndContext(this)},IsNodeEditableOrClickable:function(e){return!(e.hasClass(this.getItemContentStyleClass())||e.hasClass(this.getExpandIconStyleClass())||e.hasClass(this.getCollapseIconStyleClass()))&&ht.superclass.IsNodeEditableOrClickable.apply(this,arguments)},IsElementEditableOrClickable:function(e){return e.prop("nodeName").match(/^INPUT|SELECT|OPTION|BUTTON|^A\b|TEXTAREA/)&&!e.hasClass(this.getItemContentStyleClass())||e.hasClass("oj-component")},_focusable:function(e){return $(e.data).is("li")?!$(e.data).hasClass("oj-disabled"):!$(e.parentElement).hasClass("oj-disabled")},_prepareListViewOptions:function(e){var t=$.extend({},e);return t.drillMode="none"!==e.drillMode?"collapsible":"none",t.selection=null!==e.selection?[e.selection]:[],t.selectionMode="single",t.item=$.extend({focusable:this._focusable},e.item),t.element=this._list,t},getRootLabel:function(){return this.ojContext.options.rootLabel?this.ojContext.options.rootLabel:this.ojContext.getTranslatedString("defaultRootLabel")},SetAriaProperties:function(){this.ojContext.element.attr("aria-multiselectable",!1)},HandleFocus:function(e){return this.m_listHandler.HandleFocus(e)},HandleBlur:function(e){return this.m_listHandler.HandleBlur(e)},SetRootElementTabIndex:function(){this.ojContext.element.attr("tabIndex",0)},RemoveRootElementTabIndex:function(){this.ojContext.element.removeAttr("tabIndex")},UnsetAriaProperties:function(){this.ojContext.element.removeAttr("aria-activedescendant").removeAttr("aria-multiselectable")},ShouldUseGridRole:function(){return!1},init:function(e){var t,n=this,o=e.ojContext.element;this._initNavigationMode(o),o.addClass(this.getNavListStyleClass()),i.DomUtils.isTouchSupported()&&o.addClass(this.getNavListTouchStyleClass()),this._list=o.children("ul:first"),0===this._list.length&&(this._list=$(document.createElement("ul")),o.append(this._list));var s=$(document.createElement("div"));s.addClass(this.getNavListContainerStyleClass()),s.attr("role","presentation"),this._list.wrap(s),t=this._prepareListViewOptions(e),ht.superclass.init.call(this,t),this.getRootElement().attr("role","presentation"),this.element.removeClass("oj-component-initnode"),this.ojContext._on(this.ojContext.element,{click:function(e){n.m_listHandler.HandleClick(e)},keydown:function(e){n.m_listHandler.HandleKeydown(e)},mouseup:function(e){n._clearActiveState(e)},mouseover:function(e){if($(e.target).closest("a."+n.getItemContentStyleClass()).length>0){var t=$(e.target).closest("a."+n.getItemContentStyleClass()),i=t.find("."+n.getItemLabelStyleClass());i[0].offsetWidth<i[0].scrollWidth&&!t.attr("title")&&(t.attr("title",i.text().trim()),t.data(n._IS_TITLE_ATTR_ADDED_DUE_TO_TRUNCATION,"true"))}},mouseout:function(e){if($(e.target).closest("a."+n.getItemContentStyleClass()).length>0){var t=$(e.target).closest("a."+n.getItemContentStyleClass());t.data(n._IS_TITLE_ATTR_ADDED_DUE_TO_TRUNCATION)&&(t.removeData(n._IS_TITLE_ATTR_ADDED_DUE_TO_TRUNCATION),t.removeAttr("title")),n._clearActiveState(e)}}})},_initListHandler:function(){var e,t;t=this.ojContext.options.drillMode,e=this.ojContext.options.edge,t===this.OPTION_DRILL_MODE_SLIDING?this.m_listHandler=new i.SlidingNavListHandler(this,this.ojContext.element,this.ojContext):t===this.OPTION_DRILL_MODE_COLLAPSIBLE?this.m_listHandler=new i.CollapsibleNavListHandler(this,this.ojContext.element,this.ojContext):t!==this.OPTION_DRILL_MODE_NONE||e!==this.OPTION_EDGE_TOP&&e!==this.OPTION_EDGE_BOTTOM?this.m_listHandler=new i.DefaultNavListHandler(this,this.ojContext.element,this.ojContext):this.m_listHandler=new i.HorizontalNavListHandler(this,this.ojContext.element,this.ojContext),this.m_listHandler.Init(this.options);var n=this.ojContext.options.navigationLevel;this._setNavigationLevel(n)},_setNavigationLevel:function(e){"none"===this.ojContext.options.drillMode&&("application"===e||"oj-navigation-list"===this.ojContext.element[0].tagName.toLowerCase()?(this.ojContext.element.addClass(this._APPLICATION_LEVEL_NAV_STYLE_CLASS),this.ojContext.element.removeClass(this._PAGE_LEVEL_NAV_STYLE_CLASS)):"page"===e&&(this.ojContext.element.addClass(this._PAGE_LEVEL_NAV_STYLE_CLASS),this.ojContext.element.removeClass(this._APPLICATION_LEVEL_NAV_STYLE_CLASS)))},_clearActiveState:function(e){var t=this.FindItem($(e.target));null!=t&&this.HighlightUnhighlightElem(t,"oj-active",!1)},afterCreate:function(){this._initListHandler(),ht.superclass.afterCreate.apply(this,arguments)},getAnimationEffect:function(e){return this.m_listHandler.GetAnimationEffect(e)},notifyAttached:function(){ht.superclass.notifyAttached.apply(this,arguments),this.m_listHandler.NotifyAttached()},HandleResize:function(e,t){ht.superclass.HandleResize.apply(this,arguments),e>0&&t>0&&null!=this.m_listHandler&&this.m_listHandler.HandleResize(e,t)},BeforeInsertItem:function(){this.m_listHandler.BeforeInsertItem()},HandleMouseDownOrTouchStart:function(e){ht.superclass.HandleMouseDownOrTouchStart.apply(this,arguments);var t=this.FindItem($(e.target));t&&!t.hasClass("oj-disabled")&&this.HighlightUnhighlightElem(t,"oj-active",!0)},HandleTouchEndOrCancel:function(e){this._clearActiveState(e),ht.superclass.HandleTouchEndOrCancel.apply(this,arguments)},getItemContentStyleClass:function(){return this.ITEM_CONTENT_STYLE_CLASS[this._getNavigationMode()]},getNavListExpandedStyleClass:function(){return this.NAVLIST_EXPANDED_STYLE_CLASS[this._getNavigationMode()]},getNavListCollapsibleStyleClass:function(){return this.NAVLIST_COLLAPSIBLE_STYLE_CLASS[this._getNavigationMode()]},getNavListVerticalStyleClass:function(){return this.NAVLIST_VERTICAL_STYLE_CLASS[this._getNavigationMode()]},getNavListItemsDividerStyleClass:function(){return this.NAVLIST_DIVIDERS_STYLE_CLASS[this._getNavigationMode()]},getLastItemStyleClass:function(){return this.LAST_ITEM_STYLE_CLASS[this._getNavigationMode()]},getDividerStyleClass:function(){return this.DIVIDER_STYLE_CLASS[this._getNavigationMode()]},getOverflowItemStyleClass:function(){return this.NAVLIST_OVERFLOW_MENU_ITEM[this._getNavigationMode()]},getOverflowMenuStyleClass:function(){return this.NAVLIST_OVERFLOW_MENU[this._getNavigationMode()]},getOverflowItemIconStyleClass:function(){return this.NAVLIST_OVERFLOW_ITEM_ICON[this._getNavigationMode()]},getCategoryDividerStyleClass:function(){return this._CATEGORY_DIVIDER_STYLE_CLASS[this._getNavigationMode()]},getItemLabelStyleClass:function(){return this._ITEM_LABEL_STYLE_CLASS[this._getNavigationMode()]},getIconOnlyStyleClass:function(){return this._ICON_ONLY_STYLE_CLASS[this._getNavigationMode()]},getItemIconStyleClass:function(){return this._ITEM_ICON_STYLE_CLASS[this._getNavigationMode()]},getHorizontalNavListStyleClass:function(){return this._HORIZONTAL_NAVLIST_STYLE_CLASS[this._getNavigationMode()]},getNavListEndEdgeStyleClass:function(){return this._NAVLIST_END_EDGE_STYLE_CLASS[this._getNavigationMode()]},getNavListBottomEdgeStyleClass:function(){return this._NAVLIST_BOTTOM_EDGE_STYLE_CLASS[this._getNavigationMode()]},getHasIconsStyleClass:function(){return this._NAVLIST_HAS_ICONS[this._getNavigationMode()]},getHasNoIconStyleClass:function(){return this._NAVLIST_ITEM_HAS_NO_ICON[this._getNavigationMode()]},getItemTitleStyleClass:function(){return this._NAVLIST_ITEM_TITLE[this._getNavigationMode()]},getNavListStyleClass:function(){return this._NAVLIST_STYLE_CLASS[this._getNavigationMode()]},getNavListTouchStyleClass:function(){return this._NAVLIST_TOUCH_STYLE_CLASS[this._getNavigationMode()]},getNavListContainerStyleClass:function(){return this._NAVLIST_LISTVIEW_CONTAINER_STYLE_CLASS[this._getNavigationMode()]},getNoFollowLinkStyleClass:function(){return this._NAVLIST_NO_FOLLOW_LINK_CLASS[this._getNavigationMode()]},getItemSubIdKey:function(){return this.isTabBar()?this.NAVLIST_ITEM_SUBID_KEY.tabbar:this.NAVLIST_ITEM_SUBID_KEY.navlist},GetContainerStyleClass:function(){return this._CONTAINER_STYLE_CLASS[this._getNavigationMode()]},GetStyleClass:function(){return this._ELEMENT_STYLE_CLASS[this._getNavigationMode()]},getEmptyTextMarkerClass:function(){return this._ELEMENT_EMPTY_TEXT_STYLE_CLASS[this._getNavigationMode()]},getEmptyTextStyleClass:function(){return this._ELEMENT_NO_DATA_MSG_STYLE_CLASS[this._getNavigationMode()]},getNavListRemoveIcon:function(){return"oj-tabbar-remove-icon"},getNavListRemoveCommand:function(){return"oj-tabbar-remove"},getRemovableStyleClass:function(){return"oj-removable"},getItemStyleClass:function(){return this._ITEM_STYLE_CLASS[this._getNavigationMode()]},getFocusedElementStyleClass:function(){return this._FOCUSED_ELEMENT_STYLE_CLASS[this._getNavigationMode()]},getItemElementStyleClass:function(){return this._ITEM_ELEMENT_STYLE_CLASS[this._getNavigationMode()]},getCollapseIconStyleClass:function(){return"oj-navigationlist-collapse-icon"},getExpandIconStyleClass:function(){return"oj-navigationlist-expand-icon"},getDepthStyleClass:function(e){return"oj-navigationlist-depth-"+e},getGroupItemStyleClass:function(){return"oj-navigationlist-group-item"},getGroupStyleClass:function(){return"oj-navigationlist-group"},getGroupExpandStyleClass:function(){return"oj-navigationlist-collapsible-transition"},getGroupCollapseStyleClass:function(){return this.getGroupExpandStyleClass()},getOptionDefaultsStyleClass:function(){return this._OPTION_DEFAULT_STYLE_CLASS[this._getNavigationMode()]},AnimateExpand:function(e,t,i){return this.m_listHandler.Expand(e,t,i)},AnimateCollapse:function(e,t,i,n){return this.m_listHandler.Collapse(e,t,i,n)},HandleArrowKeys:function(e,t,i){return this.m_listHandler.HandleArrowKeys(e,t,i)},IsArrowKey:function(e){return this.m_listHandler.IsArrowKey(e)},GetState:function(e){return this.m_listHandler.GetState(e)},SetState:function(e,t){this.m_listHandler.SetState(e,t)},HandleMouseClick:function(e){var t=$(e.target),i=this.FindItem(t);if(null!=i&&0!==i.length)if(t.hasClass(this.getNavListRemoveIcon())&&this.isTabBar())this._handleRemove(e,i);else if(this.SkipFocus(i))e.preventDefault();else if(!this.IsNodeEditableOrClickable(t)){var n=this.getItemContentElement(i).attr("href");n&&"#"!==n&&0===e.button&&(e.shiftKey||e.ctrlKey)||(ht.superclass.HandleMouseClick.apply(this,arguments),e.preventDefault())}},HandleKeyDown:function(e){var t,i,n,o;if(this.m_active)if(t=e.keyCode,i=this.m_active.elem,n=this.m_active.key,t===$.ui.keyCode.HOME||t===$.ui.keyCode.END)o=t===$.ui.keyCode.HOME?this.element.find("."+this.getItemContentStyleClass()+":visible").first().closest("."+this.getItemElementStyleClass()):this.element.find("."+this.getItemContentStyleClass()+":visible").last().closest("."+this.getItemElementStyleClass()),this.SetCurrentItem(o,e),e.preventDefault();else if(t===$.ui.keyCode.DELETE&&this.isTabBar())this._handleRemove(e,i);else{var s=this.HandleSelectionOrActiveKeyDown(e),r=this.m_listHandler.HandleExpandAndCollapseKeys(e,t,i,n);(s=s||r||null!=this.m_dndContext&&this.m_dndContext.HandleKeyDown(e))&&e.preventDefault()}},AvoidFocusHighLight:function(e){this._avoidFocusHighLight=e},RecentPointerCallback:function(){var e=this;return function(){return!!e._avoidFocusHighLight}},ShouldApplyHighlight:function(){return!0},ToggleSelection:function(e,t,i){var n=this.m_active.elem;this.IsSelectable(n[0])&&(this._isSelected(n)||this._fireBeforeSelectEvent(e,n)&&(ht.superclass.ToggleSelection.apply(this,arguments),this._initiateNavigation(n)))},HighlightUnhighlightElem:function(e,t,i){var n;e=$(e),"oj-selected"===t&&this.m_listHandler.UpdateAriaPropertiesOnSelectedItem(this.getFocusItem(e),i),(n=e.children("."+this.getGroupItemStyleClass())).length>0&&(e=$(n[0])),"oj-focus"===t?i?this._focusInHandler(e):this._focusOutHandler(e):i?e.addClass(t):e.removeClass(t),e.hasClass("oj-selected")||e.hasClass("oj-hover")||e.hasClass("oj-active")||e.hasClass("oj-disabled")?e.removeClass("oj-default"):e.addClass("oj-default")},IsSelectable:function(e){return!$(e).hasClass("oj-disabled")&&this.m_listHandler.IsSelectable($(e))},Trigger:function(e,t,i){return"ready"===e||this.ojContext._trigger(e,t,i)},SetOption:function(e,t,i){if(this.m_listHandler.IsOptionUpdateAllowed(e,t,i)){var n=null;if("selection"===e){var o=i._context,s=o&&o.extraData&&o.extraData.items;s&&(o.extraData.item=this.ojContext._IsCustomElement()?0===s.length?null:s[0]:s,o.extraData.items=void 0),t&&t.length>0&&(n=t[0]),this._fireDeselectEvent(o.originalEvent,s,t)}else n=t;this.ojContext.option(e,n,i),this.options[e]=t,this.m_listHandler.OptionUpdated(e,n,i)}},ShouldRefresh:function(e){return null!=e.data||null!=e.drillMode||null!=e.item||null!=e.display||null!=e.edge},setOptions:function(e,t){var i,n={skipOptions:[]};return this.m_listHandler.SetOptions(e),void 0!==e.navigationLevel&&this._setNavigationLevel(e.navigationLevel),void 0!==e.selection&&(i=e.selection),n.needRefresh=ht.superclass.setOptions.call(this,e,t),void 0!==i&&void 0===e.selection&&n.skipOptions.push("selection"),void 0!==i&&(e.selection=i),n},compareValues:function(e,t){return e==t||i.Object.compareValues(e,t)},HandleSelectionOption:function(e){var t;if(void 0!==e.selection)if(t=e.selection){var i=this.GetOption("selection");if(i&&0!==i.length&&this.compareValues(i[0],t))delete e.selection;else{var n=this.FindElementByKey(t);if(!n||this.IsSelectable(n))this._fireBeforeSelectEvent(null,$(n),t)?(this._fireDeselectEvent(null,n,t),e.selection=[t],n&&this._initiateNavigation($(n))):delete e.selection;else delete e.selection}}else e.selection=[];ht.superclass.HandleSelectionOption.call(this,e)},GetOption:function(e){var t=this.ojContext.option(e);return"selection"===e?t?[t]:[]:("item"!==e||t.focusable||(t.focusable=this._focusable),null===t?this.options[e]:t)},getWidgetConstructor:function(){return i.Components.__GetWidgetConstructor(this.ojContext.element)},SelectAndFocus:function(e,t){e.hasClass("oj-disabled")||this.IsSelectable(e[0])&&(!this._isSelected(e)&&this._fireBeforeSelectEvent(t,e)?(ht.superclass.SelectAndFocus.apply(this,arguments),this._initiateNavigation(e)):this.HandleClickActive(e,t))},isTabBar:function(){return this.ojContext.element[0].tagName.toLowerCase()===this.TAG_NAME_TAB_BAR},_fireBeforeDeselectEvent:function(e,t,i){i||(i=this.GetKey(t[0]));var n=this.GetOption("selection"),o=this.FindElementByKey(n);return this.Trigger("beforeDeselect",e,{toItem:t,toKey:i,fromItem:o,fromKey:n})},_fireBeforeSelectEvent:function(e,t,i){var n=!0;return i||(i=this.GetKey(t[0])),this.isTabBar()&&(n=this._fireBeforeDeselectEvent(e,t,i)),n&&this.Trigger("beforeSelect",e,{item:t,key:i})},_fireRemoveEvent:function(e,t){var i=this.GetKey(t[0]);return this.Trigger("beforeRemove",e,{item:t,key:i})&&this.Trigger("remove",e,{item:t,key:i})},_fireDeselectEvent:function(e,t,i){var n=this.GetOption("selection"),o=this.FindElementByKey(n);this.Trigger("deselect",e,{toItem:t,toKey:i,fromItem:o,fromKey:n})},_initiateNavigation:function(e){if(this.ojContext.element.hasClass(this.getNoFollowLinkStyleClass()))return!1;var t=this.getItemContentElement(e),i=t.attr("href"),n=t.attr("target");return!(!i||"#"===i)&&(n&&"_self"!==n?window.open(i,n):window.location.href=i,!0)},_isSelected:function(e){var t,i;return t=this.GetOption("selection"),i=this.GetKey(e[0]),!(!t||1!==t.length||!this.compareValues(t[0],i))},_setToolTipOnIcon:function(e,t){e.attr("title")||e.attr("title",t)},_removeToolTipOnIcon:function(e){e.data(this._NAVLIST_ITEM_ICON_HAS_TITLE)?e.removeData(this._NAVLIST_ITEM_ICON_HAS_TITLE):e.removeAttr("title")},getSingleFocusableElement:function(e){var t,i,n=this;return t="a, input, select, textarea, button",1===(i=e.children(t).filter(function(e){return!$(this).hasClass(n.getNavListRemoveIcon())})).length&&0===i.first().find(t).length?i.first():e},PrepareContextMenu:function(e){null!=this.m_dndContext&&this.m_dndContext.prepareContextMenu(this.ojContext._GetContextMenu());var t=this.ojContext._GetContextMenu();if(e.hasClass(this.getRemovableStyleClass())&&t){this.m_contextMenu!=t&&(this.m_contextMenu=t,t.addEventListener("ojBeforeOpen",this._handleContextMenuBeforeOpen.bind(this)),t.addEventListener("ojAction",this._handleContextMenuSelect.bind(this)));var i=$(t).find("[data-oj-command="+this.getNavListRemoveCommand()+"]"),n=this.ojContext.getTranslatedString("labelRemove");this.ojContext._IsCustomElement()?i.empty().append(document.createTextNode(n)):i.empty().append($('<a href="#"></a>').text(n)),t.refresh()}},_handleContextMenuSelect:function(e,t){$(e.target).attr("data-oj-command")===this.getNavListRemoveCommand()&&this._handleRemove(e,this.m_contextMenuItem)},_handleContextMenuBeforeOpen:function(e){this.m_contextMenuItem=e.detail.openOptions.launcher},_handleRemove:function(e,t){t.hasClass(this.getRemovableStyleClass())&&this._fireRemoveEvent(e,t)},_wrapInner:function(e,t){for(var i=e.childNodes;i.length>0;)t.appendChild(i[0]);e.appendChild(t)},itemRenderComplete:function(e,t){var i=$(e);if(i.hasClass(this.getCategoryDividerStyleClass()))return i.removeClass(this.getItemElementStyleClass()),i.removeClass(this.getFocusedElementStyleClass()),i.removeClass(this.getItemStyleClass()),i.removeAttr("aria-selected"),i.children().remove(),void i.attr("role","separator");var n,o=this.getGroupItemStyleClass(),s=this.getCollapseIconStyleClass(),r=this.getExpandIconStyleClass(),a=this.getItemIconStyleClass(),l=i.children("."+o);if(l.length>0){l.addClass(this.getItemStyleClass()),n=l.children(":not(."+r+"):not(."+s+")");var u=l.children("."+r);0===u.length&&(u=l.children("."+s)),u.attr("role","presentation"),u.removeAttr("aria-labelledby"),i.hasClass("oj-disabled")&&l.addClass("oj-disabled")}else n=i.children().first();if(n.length>0){n.addClass(this.getItemContentStyleClass());var h=n.find("."+a),d=document.createElement("span");if(d.classList.add(this.getItemLabelStyleClass()),this._wrapInner(n[0],d),h.length>0){if(h.insertBefore(d),h.attr("title")&&h.data(this._NAVLIST_ITEM_ICON_HAS_TITLE,h.attr("title")),"icons"===this.ojContext.options.display){this.ojContext.element.addClass(this.getIconOnlyStyleClass());var c=this.getItemLabel(i);h.attr("aria-label",c),h.attr("role","img"),this._setToolTipOnIcon(h,c)}i.closest("ul").addClass(this.getHasIconsStyleClass())}else n.addClass(this.getHasNoIconStyleClass())}if(i.hasClass("oj-disabled")?this.getFocusItem(i).attr("aria-disabled","true"):l.length>0?l.addClass("oj-default"):i.addClass("oj-default"),i.hasClass(this.getRemovableStyleClass())&&this.isTabBar()){var p=$("<a>");p.addClass(this.getNavListRemoveIcon()).addClass("oj-clickable-icon-nocontext oj-component-icon").attr("aria-label",this.ojContext.getTranslatedString("removeCueText")).attr("role","presentation").attr("aria-hidden","true"),i.append(p),n.attr("aria-describedby",p.uniqueId().attr("id"))}this.m_listHandler.ModifyListItem(i,n),ht.superclass.itemRenderComplete.apply(this,arguments)},DestroyContentHandler:function(){null===this.GetOption("data")&&this._restoreContent(this.element),ht.superclass.DestroyContentHandler.apply(this,arguments)},getNodeBySubId:function(e){var t,i=null;return null==e?this.ojContext.element?this.ojContext.element[0]:null:((i=this.m_listHandler.GetNodeBySubId(e))||e.subId===this.getItemSubIdKey()&&(t=e.key,i=this.FindElementByKey(t)),i)},getSubIdByNode:function(e){var t,i,n=null;return null!=e&&((n=this.m_listHandler.GetSubIdByNode(e))||null!=(t=this.FindItem(e))&&t.length>0&&null!=(i=this.GetKey(t[0]))&&(n={subId:this.getItemSubIdKey(),key:i})),n},getContextByNode:function(e){var t=ht.superclass.getContextByNode.call(this,e);return t&&"oj-listview-item"==t.subId?(t.subId=this.getItemSubIdKey(),t):null},refresh:function(){this._resetNavlist(),this._initListHandler(),ht.superclass.refresh.apply(this,arguments)},_resetNavlist:function(){this.ojContext.element.removeClass(this.getIconOnlyStyleClass()),this.ojContext.element.removeClass(this._APPLICATION_LEVEL_NAV_STYLE_CLASS),this.ojContext.element.removeClass(this._PAGE_LEVEL_NAV_STYLE_CLASS),this._restoreContent(this.element),this.m_listHandler.Destroy()},destroy:function(){this._resetNavlist(),ht.superclass.destroy.apply(this,arguments),this._list.unwrap(),this._list.is(":empty")&&this._list.remove(),this.ojContext.element.removeClass(this.getNavListStyleClass()+" "+this.getNavListTouchStyleClass()),this.ojContext._off(this.element,"click"),this.ojContext._off(this.element,"focus"),this.ojContext._off(this.element,"blur"),this.ojContext._off(this.element,"mouseover"),this.ojContext._off(this.element,"mousein"),this.ojContext._off(this.element,"mouseout"),this.ojContext._off(this.element,"keydown")}});i.__registerWidget("oj.ojNavigationList",$.oj.baseComponent,{widgetEventPrefix:"oj",options:{currentItem:null,drillMode:"none",reorderable:"disabled",truncation:"none",edge:"start",hierarchyMenuDisplayThresholdLevel:0,rootLabel:null,selection:null,expanded:new i._ojListViewExpandedKeySet,data:null,display:"all",navigationLevel:"page",overflow:"hidden",item:{renderer:null,selectable:!0},animateStart:null,animateEnd:null,beforeSelect:null,beforeCollapse:null,beforeCurrentItem:null,beforeDeselect:null,collapse:null,deselect:null,beforeExpand:null,expand:null,reorder:null},_ComponentCreate:function(){this._super(),this._setup()},_AfterCreate:function(){this._super();var e=this;this.navlist._FixRendererContext=function(t){return e._FixRendererContext(t)},this.navlist._WrapCustomElementRenderer=function(t){return e._WrapCustomElementRenderer(t)},this.navlist.afterCreate()},_NotifyContextMenuGesture:function(e,t,i){this.navlist.notifyContextMenuGesture(e,t,i)},_setup:function(){var e,t;for(e in this.navlist=new ht,this.options)this._validateOptionValues(e,this.options[e]);this._validateOptionsForIconsOnlyAndHorizontalList(this.options[this.navlist.OPTION_DRILL_MODE],this.options[this.navlist.OPTION_DISPLAY],this.options[this.navlist.OPTION_EDGE]),(t={}).ojContext=this,t=$.extend(this.options,t),this.navlist.init(t)},getNodeBySubId:function(e){return this.navlist.getNodeBySubId(e)},getSubIdByNode:function(e){return this.navlist.getSubIdByNode(e)},getContextByNode:function(e){return this.navlist.getContextByNode(e)},expand:function(e,t,i){this.navlist.expandKey(e,t,!0,!0,i)},collapse:function(e,t,i){this.navlist.collapseKey(e,t,!0,i)},getExpanded:function(){return this.navlist.getExpanded()},_validateOptionsForIconsOnlyAndHorizontalList:function(e,t,i){if(e!==this.navlist.OPTION_DRILL_MODE_NONE){if(t===this.navlist.OPTION_DISPLAY_ICONS)throw"Icon only navigation list should have drillMode set to 'none'.";if(i===this.navlist.OPTION_EDGE_TOP)throw"Horizontal navigation list should have drillMode set to 'none'."}},_validateOptionValues:function(e,t){var i=!0;if(e===this.navlist.OPTION_DRILL_MODE?i=t===this.navlist.OPTION_DRILL_MODE_NONE||t===this.navlist.OPTION_DRILL_MODE_COLLAPSIBLE||t===this.navlist.OPTION_DRILL_MODE_SLIDING:e===this.navlist.OPTION_DISPLAY?i=t===this.navlist.OPTION_DISPLAY_ALL||t===this.navlist.OPTION_DISPLAY_ICONS:e===this.navlist.OPTION_EDGE&&(i=this.element[0].tagName.toLowerCase()===this.navlist.TAG_NAME_TAB_BAR?t===this.navlist.OPTION_EDGE_TOP||t===this.navlist.OPTION_EDGE_START||t===this.navlist.OPTION_EDGE_END||t===this.navlist.OPTION_EDGE_BOTTOM:t===this.navlist.OPTION_EDGE_TOP||t===this.navlist.OPTION_EDGE_START),!i)throw"Invalid value: "+t+" for key: "+e},_setOption:function(e,t){var i,n;switch(this._validateOptionValues(e,t),e){case this.navlist.OPTION_DRILL_MODE:this._validateOptionsForIconsOnlyAndHorizontalList(t,this.options[this.navlist.OPTION_DISPLAY],this.options[this.navlist.OPTION_EDGE]);break;case this.navlist.OPTION_DISPLAY:this._validateOptionsForIconsOnlyAndHorizontalList(this.options[this.navlist.OPTION_DRILL_MODE],t,this.options[this.navlist.OPTION_EDGE]);break;case this.navlist.OPTION_EDGE:this._validateOptionsForIconsOnlyAndHorizontalList(this.options[this.navlist.OPTION_DRILL_MODE],this.options[this.navlist.OPTION_DISPLAY],t);break;case this.navlist.OPTION_SELECTION:case this.navlist.OPTION_CURRENT_ITEM:n=this.navlist.getItems([t])[0],i={_context:{extraData:{item:this._IsCustomElement()?n:$(n)}}}}return i?this._super(e,t,i):this._super(e,t)},_setOptions:function(e,t){var i,n=this.navlist.setOptions(e,t),o={};for(i in e)n.skipOptions.indexOf(i)<0&&(o[i]=e[i]);return this._super(o,t),n.needRefresh&&this.navlist.refresh(),this},_NotifyAttached:function(){this.navlist.notifyAttached()},_NotifyDetached:function(){this.navlist.notifyDetached()},_NotifyShown:function(){this.navlist.notifyShown()},_VerifyConnectedForSetup:function(){return!0},refresh:function(){this._super(),this.navlist.refresh()},whenReady:function(){return this.navlist.whenReady()},_SetupResources:function(){this._super(),this.navlist.setupResources()},_ReleaseResources:function(){this._super(),this.navlist.releaseResources()},_destroy:function(){this.navlist.destroy(),this._super()},_CompareOptionValues:function(e,t,n){switch(e){case"currentItem":case"selection":return i.Object.compareValues(t,n);default:return this._super(e,t,n)}}}),i.Components.setDefaultOptions({ojNavigationList:{hierarchyMenuDisplayThresholdLevel:i.Components.createDynamicPropertyGetter(function(){return(i.ThemeUtils.parseJSONFromFontFamily("oj-navigationlist-option-defaults")||{}).hierarchyMenuDisplayThresholdLevel})}}),function(){i.CustomElementBridge.registerMetadata("oj-navigation-list","baseComponent",{properties:{currentItem:{type:"any",writeback:!0},data:{},display:{type:"string",enumValues:["all","icons"]},drillMode:{type:"string",enumValues:["sliding","collapsible","none"]},expanded:{type:"object",writeback:!0},edge:{type:"string",enumValues:["top","start"]},hierarchyMenuThreshold:{type:"number"},item:{type:"object",properties:{renderer:{},selectable:{}}},overflow:{type:"string",enumValues:["popup","hidden"]},rootLabel:{type:"string"},selection:{type:"any",writeback:!0},translations:{type:"Object",properties:{defaultRootLabel:{type:"string",value:"Navigation List"},hierMenuBtnLabel:{type:"string",value:"Hierarchical Menu button"},previousIcon:{type:"string",value:"Previous"}}}},events:{animateEnd:{},animateStart:{},beforeCollapse:{},beforeCurrentItem:{},beforeExpand:{},beforeSelect:{},collapse:{},expand:{}},methods:{getContextByNode:{}},extension:{_ALIASED_PROPS:{hierarchyMenuThreshold:"hierarchyMenuDisplayThresholdLevel"},_WIDGET_NAME:"ojNavigationList"}}),i.CustomElementBridge.register("oj-navigation-list",{metadata:i.CustomElementBridge.getMetadata("oj-navigation-list")});i.CustomElementBridge.registerMetadata("oj-tab-bar","baseComponent",{properties:{currentItem:{type:"any",writeback:!0},data:{},display:{type:"string",enumValues:["all","icons"]},reorderable:{type:"string",enumValues:["enabled","disabled"]},truncation:{type:"string",enumValues:["none","progressive"]},edge:{type:"string",enumValues:["top","start","end","bottom"]},item:{type:"object",properties:{renderer:{},selectable:{}}},overflow:{type:"string",enumValues:["popup","hidden"]},selection:{type:"any",writeback:!0},translations:{type:"Object",properties:{accessibleReorderAfterItem:{type:"string",value:"After {item}"},accessibleReorderBeforeItem:{type:"string",value:"Before {item}"},accessibleReorderTouchInstructionText:{type:"string",value:"Double tap and hold.  Wait for the sound then drag to rearrange."},labelCut:{type:"string",value:"Cut"},labelPasteAfter:{type:"string",value:"Paste After"},labelPasteBefore:{type:"string",value:"Paste Before"},labelRemove:{type:"string",value:"Remove"},msgFetchingData:{type:"string",value:"Fetching Data..."},msgNoData:{type:"string",value:"No items to display."},overflowItemLabel:{type:"string",value:"More"},removeCueText:{type:"string",value:"Removable"},selectedLabel:{type:"string",value:"selected"}}}},events:{animateEnd:{},animateStart:{},beforeCurrentItem:{},beforeSelect:{},beforeRemove:{},remove:{},beforeDeselect:{},deselect:{},reorder:{}},methods:{getContextByNode:{}},extension:{_WIDGET_NAME:"ojNavigationList"}}),i.CustomElementBridge.register("oj-tab-bar",{metadata:i.CustomElementBridge.getMetadata("oj-tab-bar")})}(),i.EmptyNodeSet=function(e,t){this.m_parent=e,this.m_start=t},i.EmptyNodeSet.prototype.getParent=function(){return this.m_parent},i.EmptyNodeSet.prototype.getStart=function(){return this.m_start},i.EmptyNodeSet.prototype.getCount=function(){return 0},i.EmptyNodeSet.prototype.getData=function(e){return null},i.EmptyNodeSet.prototype.getMetadata=function(e){return null},i.FlattenedNodeSet=function(e,t){this.m_nodeSet=e,this.m_start=t},i.FlattenedNodeSet.prototype.getParent=function(){return this.m_nodeSet.getParent()},i.FlattenedNodeSet.prototype.getStart=function(){return null!=this.m_start?this.m_start:this.m_nodeSet.getStart()},i.FlattenedNodeSet.prototype.getCount=function(){return void 0===this.m_count&&(this.m_count=this._getCount(this.m_nodeSet,0),null!=this.m_start&&(this.m_count=this.m_count-this.m_start)),this.m_count},i.FlattenedNodeSet.prototype._getCount=function(e,t){var i,n,o,s;if(i=e.getStart(),t+=n=e.getCount(),e.getChildNodeSet)for(o=0;o<n;o++)null!=(s=e.getChildNodeSet(o+i))&&(t=this._getCount(s,t));return t},i.FlattenedNodeSet.prototype.getData=function(e){return this._getDataOrMetadata(this.m_nodeSet,e,{index:this.m_nodeSet.getStart()},this._getData)},i.FlattenedNodeSet.prototype.getMetadata=function(e){return this._getDataOrMetadata(this.m_nodeSet,e,{index:this.m_nodeSet.getStart()},this._getMetadata)},i.FlattenedNodeSet.prototype._getMetadata=function(e,t){return e.getMetadata(t)},i.FlattenedNodeSet.prototype._getData=function(e,t){return e.getData(t)},i.FlattenedNodeSet.prototype._getDataOrMetadata=function(e,t,i,n){var o,s,r,a,l,u;for(o=e.getStart(),s=e.getCount(),r=0;r<s;r++){if((a=i.index)===t)return n.call(this,e,r+o);if(i.index=a+1,e.getChildNodeSet&&null!=(l=e.getChildNodeSet(r+o))&&null!=(u=this._getDataOrMetadata(l,t,i,n)))return u}return null},i.MergedNodeSet=function(e,t,i){this.m_nodeSet1=e,this.m_nodeSet2=t,this.m_mergeAt=this._findIndex(i)},i.MergedNodeSet.prototype._findIndex=function(e){var t,i,n;for(i=(t=this.m_nodeSet1.getStart())+this.m_nodeSet1.getCount(),n=t;n<i;n++)if(e===this.m_nodeSet1.getMetadata(n).key)return n;return i-1},i.MergedNodeSet.prototype.getParent=function(){return this.m_nodeSet1.getParent()},i.MergedNodeSet.prototype.getStart=function(){return this.m_nodeSet1.getStart()},i.MergedNodeSet.prototype.getCount=function(){return this.m_nodeSet1.getCount()+this.m_nodeSet2.getCount()},i.MergedNodeSet.prototype.getData=function(e){var t,i,n;return i=(t=this._getRelativeIndex(e)).set,n=t.index,i.getData(n)},i.MergedNodeSet.prototype.getMetadata=function(e){var t,i,n;return i=(t=this._getRelativeIndex(e)).set,n=t.index,i.getMetadata(n)},i.MergedNodeSet.prototype._getRelativeIndex=function(e){if(e<=this.m_mergeAt)return{set:this.m_nodeSet1,index:e};var t=this.m_nodeSet2.getCount();return e>this.m_mergeAt+t?{set:this.m_nodeSet1,index:e-t}:{set:this.m_nodeSet2,index:e-this.m_mergeAt-1+this.m_nodeSet2.getStart()}},i.NodeSetWrapper=function(e,t,i,n){this.m_nodeSet=e,this.m_callback=t,this.m_range=i,this.m_collapsedKeys=n},i.NodeSetWrapper.prototype.getParent=function(){return this.m_nodeSet.getParent()},i.NodeSetWrapper.prototype.getStart=function(){return null!=this.m_range?this.m_range.start:this.m_nodeSet.getStart()},i.NodeSetWrapper.prototype.getCount=function(){var e,t;return e=this.m_nodeSet.getStart(),t=this.m_nodeSet.getCount(),null!=this.m_range&&(t=Math.min(this.m_range.count,t),this.m_range.start<e&&(t=0)),t},i.NodeSetWrapper.prototype.getData=function(e){return this.m_nodeSet.getData(this._getRelativeIndex(e))},i.NodeSetWrapper.prototype.getMetadata=function(e){var t,i;return(t=this.m_nodeSet.getMetadata(this._getRelativeIndex(e))).index=e,t.parentKey=this.getParent(),i=t.key,this.m_callback.call(null,i,t),t},i.NodeSetWrapper.prototype.getChildNodeSet=function(e){var t;return null!=this.m_collapsedKeys&&-1!=this.m_collapsedKeys.indexOf(this.m_nodeSet.getMetadata(e).key)||!this.m_nodeSet.getChildNodeSet||null==(t=this.m_nodeSet.getChildNodeSet(e))?null:new i.NodeSetWrapper(t,this.m_callback,null,this.m_collapsedKeys)},i.NodeSetWrapper.prototype._getRelativeIndex=function(e){return null==this.m_range?e:e-this.m_range.start+this.m_nodeSet.getStart()},i.FlattenedTreeDataSource=function(e,t){this.m_wrapped=e,this.m_options=t||{},i.FlattenedTreeDataSource.superclass.constructor.call(this)},i.Object.createSubclass(i.FlattenedTreeDataSource,i.DataSource,"oj.FlattenedTreeDataSource"),i.FlattenedTreeDataSource.prototype.Init=function(){var e;i.FlattenedTreeDataSource.superclass.Init.call(this),this.m_wrapped.on("change",this._handleModelEvent.bind(this)),this.m_busy=!1,this.m_fetchSize=parseInt(this.m_options.fetchSize,10),isNaN(this.m_fetchSize)&&(this.m_fetchSize=25),this.m_maxCount=parseInt(this.m_options.maxCount,10),isNaN(this.m_maxCount)&&(this.m_maxCount=500),e=this.m_options.expanded,Array.isArray(e)?this.m_expandedKeys=e:("all"===e&&(this.m_collapsedKeys=[]),this.m_expandedKeys=[]),this.m_cache=[]},i.FlattenedTreeDataSource.prototype.handleEvent=function(e,t){return i.FlattenedTreeDataSource.superclass.handleEvent.call(this,e,t)},i.FlattenedTreeDataSource.prototype.Destroy=function(){delete this.m_cache,delete this.m_expandedKeys,delete this.m_collapsedKeys,this.m_queue&&delete this.m_queue,this.m_wrapped.off("change"),this.m_wrapped.Destroy&&this.m_wrapped.Destroy()},i.FlattenedTreeDataSource.prototype.getFetchSize=function(){return this.m_fetchSize},i.FlattenedTreeDataSource.prototype.getMaxCount=function(){return this.m_maxCount},i.FlattenedTreeDataSource.prototype.getExpandedKeys=function(){return this.m_expandedKeys},i.FlattenedTreeDataSource.prototype.getOption=function(e){return null!=this.m_options?this.m_options[e]:null},i.FlattenedTreeDataSource.prototype.getWrappedDataSource=function(){return this.m_wrapped},i.FlattenedTreeDataSource.prototype._getFetchSizeToUse=function(e){var t,i;return t=this.getFetchSize(),i=this.getMaxCount(),-1===t?-1===e?i:e:-1===e?Math.min(t,i):t},i.FlattenedTreeDataSource.prototype.fetchRows=function(e,t){this.m_busy=!0,this._isExpandAll()?this._fetchRowsFromDescendants(e,t):this._fetchRowsFromChildren(e,t)},i.FlattenedTreeDataSource.prototype._fetchRowsFromChildren=function(e,t){var n,o,s,r,a,l,u,h,d,c,p;if(e.start>this._getLastIndex()){if(n=this._getMaxFetchSize(),this._getLastIndex()<0)return(d={}).start=e.start,d.count=Math.min(n,e.count),void this.m_wrapped.fetchChildren(null,d,{success:function(i){this._handleFetchSuccess(i,null,0,e,d,0,t)}.bind(this),error:function(e){this._handleFetchError(e,t)}.bind(this)});if(n>0)return o=this._getLastEntry(),s=o.parent,r=this.m_wrapped.getChildCount(s),a=o.index,l=o.depth,void(-1===r||a<r-1?(h=this._getFetchSizeToUse(r),(d={}).start=a+1,d.count=-1===r?Math.min(h,e.count):Math.min(n,Math.min(Math.min(h,e.count),r-d.start)),this.m_wrapped.fetchChildren(s,d,{success:function(i){this._handleFetchSuccess(i,s,l,e,d,r,t)}.bind(this),error:function(e){this._handleFetchError(e,t)}.bind(this)})):(c=o.key,p=this.m_wrapped.getChildCount(c),(this._isExpanded(c)&&(-1===p||p>0)?this._fetchFromAncestors(o,l+1,e,t,n):this._fetchFromAncestors(s,l,e,t,n))||(u=new i.EmptyNodeSet(null,e.start),null!=t&&null!=t.success&&t.success.call(null,u),this.m_busy=!1)))}this.handleMaxCountReached(e,t),this.m_busy=!1},i.FlattenedTreeDataSource.prototype.moveOK=function(e,t,i){return this.m_wrapped.moveOK(e,t,i)},i.FlattenedTreeDataSource.prototype.move=function(e,t,i,n){this.m_wrapped.move(e,t,i,n)},i.FlattenedTreeDataSource.prototype._getMaxFetchSize=function(){return this.getMaxCount()-(this._getLastIndex()+1)},i.FlattenedTreeDataSource.prototype._handleFetchError=function(e,t){null!=t&&null!=t.error&&t.error.call(null,e),this.m_busy=!1},i.FlattenedTreeDataSource.prototype._handleFetchSuccess=function(e,t,n,o,s,r,a,l){var u,h,d,c;u=[],this._processNodeSet(e,t,n,u),h={start:o.start,count:e.getCount()},e=new i.NodeSetWrapper(e,this.insertMetadata.bind(this),h),0!==u.length?((d=[]).push(u),(c={}).callbacks={success:function(e){this._verifyFetchResults(e,t,n,o,s,r,a,l)}.bind(this),error:function(e){this._handleFetchError(e,a)}.bind(this)},c.nodeSet=e,c.keys=[],this._syncExpandRows(d,c)):this._verifyFetchResults(e,t,n,o,s,r,a,l)},i.FlattenedTreeDataSource.prototype._verifyFetchResults=function(e,t,n,o,s,r,a,l){var u,h,d,c,p,_,m;if(null!=l&&null!=(u=l.prevNodeSet)&&(h=u.getStart()+u.getCount()-1,d=u.getMetadata(h).key,c=new i.MergedNodeSet(u,e,d)),e.getCount()<o.count&&null!=t&&n>0)(p={}).start=o.start+e.getCount(),p.count=o.count-e.getCount(),(_={}).prevNodeSet=null==c?e:c,m=this._fetchFromAncestors(t,n,p,a,void 0,_);else if(e.getCount()>o.count){var g=e.getCount()-o.count;null!=c?(c=new i.NodeSetWrapper(c,this.insertMetadata.bind(this),{start:c.getStart(),count:c.getCount()-g}),this._removeEntry(c.getStart()+c.getCount(),g)):(e=new i.NodeSetWrapper(e,this.insertMetadata.bind(this),{start:e.getStart(),count:e.getCount()-g}),this._removeEntry(e.getStart()+e.getCount(),g))}m||null!=a&&null!=a.success&&a.success.call(null,null==c?e:c),this.m_busy=!1},i.FlattenedTreeDataSource.prototype.getChildCount=function(e){return this.m_wrapped.getChildCount(e)},i.FlattenedTreeDataSource.prototype._fetchFromAncestors=function(e,t,i,n,o,s){var r,a,l,u,h,d,c,p,_,m;for(m=!1,void 0===o&&(o=this._getMaxFetchSize()),this._isBatchFetching()&&(p={queueOnly:!0}),c=this._getFetchSizeToUse(-1),r=this._getLastIndex();r>=0;r--)if(a=this._getEntry(r),(l=a.depth)<t){if(e=a.parent,u=this.m_wrapped.getChildCount(e),h=a.index,(d=-1===u)||h<u-1){if((_={}).start=h+1,d?(_.count=Math.min(o,Math.max(0,c)),p=void 0):_.count=Math.min(o,Math.min(c,u-_.start)),0==_.count)break;this.m_wrapped.fetchChildren(e,_,{success:function(t){this._handleFetchSuccess(t,e,l,i,_,u,n,s)}.bind(this),error:function(e){this._handleFetchError(e,n)}.bind(this)},p),m=!0;break}t-=1}return null!=p&&(this.m_wrapped.fetchChildren(e,{start:i.count,count:0},{success:function(t){this._handleFetchSuccess(t,e,l,i,_,u,n,s)}.bind(this),error:function(e){this._handleFetchError(e,n)}.bind(this)}),m=!0),m},i.FlattenedTreeDataSource.prototype._processNodeSet=function(e,t,i,n){var o,s,r,a;for(o=e.getStart(),s=e.getCount(),r=0;r<s;r++)a=e.getMetadata(o+r).key,this._addEntry(a,i,o+r,t),this._isExpanded(a)&&n.push(a)},i.FlattenedTreeDataSource.prototype.insertMetadata=function(e,t){this._isExpanded(e)&&!t.leaf?t.state="expanded":t.leaf?t.state="leaf":t.state="collapsed"},i.FlattenedTreeDataSource.prototype._fetchRowsFromDescendants=function(e,t){var i={maxCount:this.getMaxCount()};this._getLastIndex()>=0&&(i.start=this._getEntry(this._getLastIndex()).key),this.m_wrapped.fetchDescendants(null,{success:function(i){this._handleFetchDescendantsSuccess(i,e,t)}.bind(this),error:function(e){this._handleFetchError(e,t)}.bind(this)},i)},i.FlattenedTreeDataSource.prototype.getSortCriteria=function(){return this.m_wrapped.getSortCriteria()},i.FlattenedTreeDataSource.prototype._handleFetchDescendantsSuccess=function(e,t,n){var o,s,r,a,l;t.start>this._getLastIndex()?(o=this._getMaxFetchSize(),s=Math.min(o,t.count),e=new i.NodeSetWrapper(e,this.insertMetadata.bind(this),null,this.m_collapsedKeys),this._getLastIndex()>=0?(r=this._getLastEntry(),a={index:0,found:!1,count:0},this._processDescendantsNodeSet(e,null,0,r,s,a),l=a.index+1):(a={count:0},this._processDescendantsNodeSet(e,null,0,null,s,a),l=0),null!=n&&null!=n.success&&(e=null!=a?0===a.count?new i.EmptyNodeSet(null,t.start):new i.FlattenedNodeSet(e,l):new i.FlattenedNodeSet(e),n.success.call(null,e))):this.handleMaxCountReached(t,n),this.m_busy=!1,this._processQueue()},i.FlattenedTreeDataSource.prototype._processDescendantsNodeSet=function(e,t,i,n,o,s){var r,a,l,u,h,d;for(r=e.getStart(),a=e.getCount(),l=0;l<a;l++){if(s.count==o)return;h=(u=e.getMetadata(r+l)).key,s.checkDepth&&n.depth===i&&(s.found=!0,s.checkDepth=!1),(null==n||s.found)&&(this._addEntry(h,i,r+l,t),s.count=s.count+1,u.leaf?u.state="leaf":u.state="expanded"),null==n||s.found||(h===n.key?u.leaf||this._isExpanded(h)?s.found=!0:s.checkDepth=!0:s.index=s.index+1),e.getChildNodeSet&&this._isExpanded(h)&&null!=(d=e.getChildNodeSet(l))&&this._processDescendantsNodeSet(d,h,i+1,n,o,s)}},i.FlattenedTreeDataSource.prototype.expand=function(e){this._expand(e)},i.FlattenedTreeDataSource.prototype._expand=function(e,t){var n,o,s;this.m_busy=!0,n=this.m_wrapped.getChildCount(e),o=this._getFetchSizeToUse(n),s=this.getMaxCount(),(this._getLastIndex()+1!==s||this.getIndex(e)!=s-1)&&0!=o?this.m_wrapped.fetchChildren(e,{start:0,count:o},{success:function(i){this.handleExpandSuccess(e,i,n,t)}.bind(this),error:function(t){this.handleExpandError(e,t)}.bind(this)}):this.handleExpandSuccess(e,new i.EmptyNodeSet(e,0),0,t)},i.FlattenedTreeDataSource.prototype._processQueue=function(){var e,t;if(this.m_queue&&this.m_queue.length>0){for(e=this.m_queue.length-1;e>=0;e--)t=this.m_queue[e],this.collapse(t.key);this.m_queue.length=0}},i.FlattenedTreeDataSource.prototype._queueOp=function(e,t){null==this.m_queue&&(this.m_queue=[]),this.m_queue.push({op:e,key:t})},i.FlattenedTreeDataSource.prototype.collapse=function(e){var t,i,n,o,s,r,a,l;if(this.m_busy)this._queueOp("collapse",e);else if(t=this.getIndex(e)+1,null!=(i=this._getEntry(t-1))){for(n=0,o=i.depth,s=this._getLastIndex(),a=t;a<s+1;a++){var u=this._getEntry(a).depth;if(u>o)n+=1;else if(u==o)break}if(0!=n){for(this._isExpandAll()?this.m_collapsedKeys.push(e):this._removeExpanded(e),l=[],r=0;r<n;r++)l.push({key:this._getEntry(t+r).key,index:t+r});this._removeEntry(t,n),this.removeRows(l),this.handleEvent("collapse",{rowKey:e})}else this.handleEvent("collapse",{rowKey:e})}},i.FlattenedTreeDataSource.prototype._isExpanded=function(e){return this._isExpandAll()?!(this.m_collapsedKeys&&this.m_collapsedKeys.length>0)||-1===this._getCollapsedKeyIndex(e):!!(this.m_expandedKeys&&this.m_expandedKeys.length>0)&&this._getExpandedKeyIndex(e)>-1},i.FlattenedTreeDataSource.prototype._getCollapsedKeyIndex=function(e){return this._getKeyIndex(this.m_collapsedKeys,e)},i.FlattenedTreeDataSource.prototype._getExpandedKeyIndex=function(e){return this._getKeyIndex(this.m_expandedKeys,e)},i.FlattenedTreeDataSource.prototype._getKeyIndex=function(e,t){var i,n;for(n=-1,i=0;i<e.length;i++)e[i]===t&&(n=i);return n},i.FlattenedTreeDataSource.prototype._removeExpanded=function(e){var t=this._getExpandedKeyIndex(e);t>-1&&this.m_expandedKeys.splice(t,1)},i.FlattenedTreeDataSource.prototype._removeCollapsed=function(e){var t=this._getCollapsedKeyIndex(e);t>-1&&this.m_collapsedKeys.splice(t,1)},i.FlattenedTreeDataSource.prototype.handleExpandError=function(e,t){this.handleEvent("expand",{rowKey:e})},i.FlattenedTreeDataSource.prototype.handleExpandSuccess=function(e,t,n,o){var s,r,a,l,u,h,d,c,p,_,m,g,f,v,C;for(t=new i.NodeSetWrapper(t,this.insertMetadata.bind(this)),r=s=this.getIndex(e)+1,a=t.getStart(),l=t.getCount(),h=(u=this._getEntry(s-1)).depth+1,p=[],_=a;_<l;_++)c=(d=t.getMetadata(_)).key,this._isExpanded(c)&&p.push(c),this._insertRow(s,d,u.key,_,h),s++;if(this._isExpandAll()?this._removeCollapsed(e):-1===this.m_expandedKeys.indexOf(e)&&this.m_expandedKeys.push(e),null!=o&&(g=o.queue,f=o.prevNodeSetInfo),null!=f&&(t=new i.MergedNodeSet(f.nodeSet,t,e)),0==p.length&&(void 0===g||0==g.length)){if(null!=f){if(null!=(C=f.callbacks))return C.success.call(null,t),void(this.m_busy=!1);this.insertRows(f.firstIndex,f.firstKey,t)}else this.insertRows(r,e,t);if(v=this.getMaxCount(),-1===n&&l===this.getFetchSize()||n>l||s==v?this._deleteAllRowsBelow(s):this._getLastIndex()>=v&&this._deleteAllRowsBelow(v),null!=f)for(m=0;m<f.keys.length;m++)this.handleEvent("expand",{rowKey:f.keys[m]});this.m_busy=!1,this.handleEvent("expand",{rowKey:e})}else void 0===g&&(g=[]),p.length>0&&g.push(p),void 0===f&&((f={}).firstIndex=r,f.firstKey=e,f.keys=[]),f.nodeSet=t,f.keys.push(e),this._syncExpandRows(g,f);this.m_busy=!1,g&&0==g.length&&this._processQueue()},i.FlattenedTreeDataSource.prototype._syncExpandRows=function(e,t){var i,n;n=(i=e[e.length-1]).shift(),0===i.length&&e.pop(),this._expand(n,{prevNodeSetInfo:t,queue:e})},i.FlattenedTreeDataSource.prototype._expandRows=function(e){var t,i;for(this._isBatchFetching()&&(t={queueOnly:!0}),i=0;i<e.length;i++)i==e.length-1?this._expand(e[i]):this._expand(e[i],t)},i.FlattenedTreeDataSource.prototype._insertRow=function(e,t,i,n,o){var s;s=t.key,e<=this._getLastIndex()?this._addEntry(s,o,n,i,e):this._addEntry(s,o,n,i)},i.FlattenedTreeDataSource.prototype._deleteAllRowsBelow=function(e,t){var i;null==t&&(t=this._getLastIndex()+1-e),i=[];for(var n=0;n<t;n++)i.push({key:this._getEntry(e+n).key,index:e+n});this._removeEntry(e,t),this.removeRows(i)},i.FlattenedTreeDataSource.prototype._handleModelEvent=function(e){var t,i,n,o;t=e.operation,i=e.parent,n=Array.isArray(i)?i[i.length-1]:i,o=e.index,"insert"===t?this._handleInsertEvent(n,o,e.data):"delete"===t?this._handleDeleteEvent(n,o):"refresh"===t&&this._handleRefreshEvent(n)},i.FlattenedTreeDataSource.prototype._handleInsertEvent=function(e,t,i){var n,o,s,r;n=this.getIndex(e),o=this._getEntry(n).depth+1,s=n+t+1,r=i.getMetadata(i.getStart()),this._insertRow(s,r,e,t,o)},i.FlattenedTreeDataSource.prototype._handleDeleteEvent=function(e,t){var n,o,s,r,a,l;for(n=this.getIndex(e),o=this._getEntry(n),s=n+t,r=this._getEntry(s),i.Assert.assert(r.parent===o&&r.depth===o.depth+1),1,a=s+1,l=this._getLastIndex();a<=l&&this._getEntry(a).depth==r.depth;)a++;this._deleteAllRowsBelow(s,1)},i.FlattenedTreeDataSource.prototype._handleRefreshEvent=function(e){null==e&&this.refresh()},i.FlattenedTreeDataSource.prototype._isExpandAll=function(){var e=this.m_wrapped.getCapability("fetchDescendants");return null!=this.m_collapsedKeys&&null!=e&&"disable"!=e},i.FlattenedTreeDataSource.prototype._isBatchFetching=function(){return"enable"===this.m_wrapped.getCapability("batchFetch")},i.FlattenedTreeDataSource.prototype.refresh=function(){this._clearAll()},i.FlattenedTreeDataSource.prototype.getIndex=function(e){var t,i;for(t=this._getLastIndex(),i=0;i<=t;i++)if(this._getEntry(i).key==e)return i;return-1},i.FlattenedTreeDataSource.prototype.getKey=function(e){return e<0||e>this._getLastIndex()?null:this._getEntry(e).key},i.FlattenedTreeDataSource.prototype.getFetchedRange=function(){return{start:0,end:this._getLastIndex()+1}},i.FlattenedTreeDataSource.prototype.getAncestors=function(e){var t,i,n;for(t=[],i=this.getIndex(e),n=this._getParent(i);null!=n;)t.push(n),i=this.getIndex(n),n=this._getParent(i);return t.reverse()},i.FlattenedTreeDataSource.prototype.handleMaxCountReached=function(e,t){null!=t&&null!=t.error&&t.error.call(null)},i.FlattenedTreeDataSource.prototype.insertRows=function(e,t,n){i.Assert.failedInAbstractFunction()},i.FlattenedTreeDataSource.prototype.removeRows=function(e){i.Assert.failedInAbstractFunction()},i.FlattenedTreeDataSource.prototype._getLastIndex=function(){return this.m_cache.length-1},i.FlattenedTreeDataSource.prototype._getLastEntry=function(){return this.m_cache[this._getLastIndex()]},i.FlattenedTreeDataSource.prototype._getEntry=function(e){return this.m_cache[e]},i.FlattenedTreeDataSource.prototype._getParent=function(e){var t=this.m_cache[e];return null!=t?t.parent:null},i.FlattenedTreeDataSource.prototype._addEntry=function(e,t,i,n,o){var s=new Object;s.key=e,s.depth=t,s.index=i,s.parent=n,void 0===o?this.m_cache.push(s):this.m_cache.splice(o,0,s)},i.FlattenedTreeDataSource.prototype._removeEntry=function(e,t){this.m_cache.splice(e,t)},i.FlattenedTreeDataSource.prototype._clearAll=function(){this.m_cache.length=0},i.FlattenedTreeDataSource.prototype.getCapability=function(e){return this.m_wrapped.getCapability(e)},i.__registerWidget("oj.ojRowExpander",$.oj.baseComponent,{version:"1.0.0",widgetEventPrefix:"oj",options:{context:null,expanded:null,expand:null,collapse:null},classNames:{root:"oj-rowexpander",icon:"oj-component-icon",clickable:"oj-clickable-icon-nocontext",expand:"oj-rowexpander-expand-icon",collapse:"oj-rowexpander-collapse-icon",leaf:"oj-rowexpander-leaf-icon",lazyload:"oj-rowexpander-lazyload-icon",toucharea:"oj-rowexpander-touch-area",indent:"oj-rowexpander-indent",iconspacer:"oj-rowexpander-icon-spacer",depth0:"oj-rowexpander-depth-0",depth1:"oj-rowexpander-depth-1",depth2:"oj-rowexpander-depth-2",depth3:"oj-rowexpander-depth-3",depth4:"oj-rowexpander-depth-4",depth5:"oj-rowexpander-depth-5",depth6:"oj-rowexpander-depth-6",depth7:"oj-rowexpander-depth-7"},constants:{MAX_STYLE_DEPTH:7,NUM5_KEY:53},_ComponentCreate:function(){this._super(),this.element.addClass(this.classNames.root),this._initContent()},_initContent:function(){var e,t=this;if(null!=(e=this.options.context).component)this.component="function"==typeof e.component?e.component("instance"):e.component;else if(e.componentElement){var n=e.componentElement;n=$(n).hasClass("oj-component-initnode")?n:$(n).find(".oj-component-initnode")[0],this.component=i.Components.__GetWidgetConstructor(n)("instance")}this.datasource=e.datasource,this.depth=e.depth,this.iconState=e.state,this.rowKey=e.key,this.index=e.index,this.parentKey=e.parentKey,this._addIndentation(),this._addIcon(),this._setIconStateClass(),"expanded"===this.iconState||"collapsed"===this.iconState?($(this.toucharea).on("touchend",function(e){e.preventDefault(),t._fireExpandCollapse()}),$(this.toucharea).on("click",function(e){e.preventDefault(),t._fireExpandCollapse()}),$(this.element).on("keypress",function(e){var i=e.keyCode||e.which;i!==$.ui.keyCode.ENTER&&i!==$.ui.keyCode.SPACE||(t._fireExpandCollapse(),e.preventDefault(),e.target.focus())}),this.handleKeyDownCallback=this._handleKeyDownEvent.bind(this),this.component.element.get(0).addEventListener("keydown",this.handleKeyDownCallback,!0),this.handleExpandCallback=this._handleExpandEvent.bind(this),this.handleCollapseCallback=this._handleCollapseEvent.bind(this),this.datasource.on("expand",this.handleExpandCallback,this),this.datasource.on("collapse",this.handleCollapseCallback,this),this._initExpanded()):"leaf"===this.iconState&&(this.handleKeyDownCallback=this._handleKeyDownEvent.bind(this),this.component.element.get(0).addEventListener("keydown",this.handleKeyDownCallback,!0),$(this.icon).attr("tabindex",-1)),this.handleActiveKeyChangeCallback=this._handleActiveKeyChangeEvent.bind(this),this.component._IsCustomElement()?$(this.component.element).on("ojBeforeCurrentCell",this.handleActiveKeyChangeCallback):$(this.component.element).on("ojbeforecurrentcell",this.handleActiveKeyChangeCallback)},_initExpanded:function(){var e=this.options.expanded;null!=e?e&&"collapsed"===this.iconState?this._expand():e||"expanded"!==this.iconState||this._collapse():this.options.expanded="collapsed"!==this.iconState},refresh:function(){this.element.empty(),this._initContent()},_destroy:function(){this.component.element.get(0).removeEventListener("ojkeydown",this.handleKeyDownCallback,!0),$(this.component.element).off("ojbeforecurrentcell",this.handleActiveKeyChangeCallback),this.datasource.off("expand",this.handleExpandCallback,this),this.datasource.off("collapse",this.handleCollapseCallback,this),this.element.removeClass(this.classNames.root),this.element.empty()},_expand:function(){return"collapsed"===this.iconState&&(this._loading(),this.datasource.expand(this.rowKey),!0)},_collapse:function(){return"expanded"===this.iconState&&(this._loading(),this.datasource.collapse(this.rowKey),!0)},_setOption:function(e,t,i){"expanded"!=e||null!=i._context&&1==i._context.internalSet?(this._super(e,t,i),"context"==e&&null!=i._context&&1!=i._context.internalSet&&this.refresh()):t?this._expand():this._collapse()},_addIndentation:function(){var e,t,i;if((i=this.depth-1)<this.constants.MAX_STYLE_DEPTH)this._appendSpacer(i);else{for(t=1;t<=i/this.constants.MAX_STYLE_DEPTH;t++)this._appendSpacer(this.constants.MAX_STYLE_DEPTH);(e=i%this.constants.MAX_STYLE_DEPTH)<this.constants.MAX_STYLE_DEPTH&&this._appendSpacer(e)}},_appendSpacer:function(e){var t=$(document.createElement("span")).addClass(this.classNames.indent).addClass(this.classNames["depth"+e]);this.element.append(t)},_addIcon:function(){var e;e=$(document.createElement("div")).addClass(this.classNames.iconspacer),this.toucharea=$(document.createElement("div")).addClass(this.classNames.toucharea),this.icon=$(document.createElement("a")).attr("href","#").attr("aria-labelledby",this._getLabelledBy()).addClass(this.classNames.icon).addClass(this.classNames.clickable).attr("aria-label",this.getTranslatedString("accessibleLevelDescription",{level:this.depth})),this.element.append(e.append(this.toucharea.append(this.icon))),this._focusable({element:this.icon,applyHighlight:!0})},_addIconClass:function(e){this.icon.addClass(this.classNames[e])},_removeIconClass:function(e){this.icon.removeClass(this.classNames[e])},_setIconStateClass:function(){switch(this.iconState){case"leaf":this._removeIconClass("icon"),this._removeIconClass("clickable"),this._addIconClass("leaf");break;case"collapsed":this._addIconClass("expand"),this._ariaExpanded(!1);break;case"expanded":this._addIconClass("collapse"),this._ariaExpanded(!0);break;case"loading":this._removeIconClass("clickable"),this._addIconClass("lazyload")}},_removeIconStateClass:function(){switch(this.iconState){case"leaf":this._removeIconClass("leaf"),this._addIconClass("icon"),this._addIconClass("clickable");break;case"collapsed":this._removeIconClass("expand");break;case"expanded":this._removeIconClass("collapse");break;case"loading":this._removeIconClass("lazyload"),this._addIconClass("clickable")}},_handleActiveKeyChangeEvent:function(e,t){var i,n,o,s;null==t&&(t=e.detail),null!=t.currentCell&&(i="cell"==t.currentCell.type?t.currentCell.keys.row:t.currentCell.key,null!=t.previousValue&&(n="cell"==t.previousCurrentCell.type?t.previousCurrentCell.keys.row:t.previousCurrentCell.key),this.rowKey===i&&n!=i&&this.component._setAccessibleContext&&(o=this.getTranslatedString("accessibleRowDescription",{level:this.depth,num:this.index+1,total:this.datasource.getWrappedDataSource().getChildCount(this.parentKey)}),s="collapsed"===this.iconState?this.getTranslatedString("accessibleStateCollapsed"):"expanded"===this.iconState?this.getTranslatedString("accessibleStateExpanded"):"",this.component._setAccessibleContext({context:o,state:s})))},_handleKeyDownEvent:function(e){var t,n,o,s,r,a,l=i.Components.__GetWidgetConstructor(this.component.element.get(0))("getContextByNode",e.target);if(null!=l&&(null==(t=l.key)&&(t=l.keys.row),this.rowKey===t&&(n=e.keyCode||e.which,i.DomUtils.isMetaKeyPressed(e))))if(n==$.ui.keyCode.RIGHT){if(this._expand())return void e.preventDefault()}else if(n==$.ui.keyCode.LEFT){if(this._collapse())return void e.preventDefault()}else if(e.altKey&&n==this.constants.NUM5_KEY&&this.component._setAccessibleContext){if(null!=(r=this.datasource.getAncestors(this.rowKey))&&r.length>0)for(s=[],a=0;a<r.length;a++)s.push({key:r[a],label:this.getTranslatedString("accessibleLevelDescription",{level:a+1})});o=this.getTranslatedString("accessibleRowDescription",{level:this.depth,num:this.index+1,total:this.datasource.getWrappedDataSource().getChildCount(this.parentKey)}),this.component._setAccessibleContext({context:o,state:"",ancestors:s})}},_loading:function(){this._removeIconStateClass(),this.iconState="loading",this._setIconStateClass()},_handleExpandEvent:function(e){var t=e.rowKey;if(t===this.rowKey){this._removeIconStateClass(),this.iconState="expanded",this._setIconStateClass(),this._ariaExpanded(!0),this._updateContextState("expanded");var i=this.options.expanded;(null==i||null!=i&&!i)&&(this._trigger("expand",null,{rowKey:t}),this._updateExpandedState(!0))}},_handleCollapseEvent:function(e){var t=e.rowKey;if(t===this.rowKey){this._removeIconStateClass(),this.iconState="collapsed",this._setIconStateClass(),this._ariaExpanded(!1),this._updateContextState("collapsed");var i=this.options.expanded;(null==i||null!=i&&i)&&(this._trigger("collapse",null,{rowKey:t}),this._updateExpandedState(!1))}},_updateExpandedState:function(e){this.option("expanded",e,{changed:!0,_context:{internalSet:!0,writeback:!0}})},_updateContextState:function(e){var t=this.options.context;t.state=e,this.option("context",t,{changed:!0,_context:{internalSet:!0}})},_fireExpandCollapse:function(){var e=this.iconState;this._loading(),"collapsed"===e?this.datasource.expand(this.rowKey):"expanded"===e&&this.datasource.collapse(this.rowKey)},_ariaExpanded:function(e){this.icon.attr("aria-expanded",e)},getNodeBySubId:function(e){var t;return null==e?this.element?this.element[0]:null:"oj-rowexpander-disclosure"!==(t=e.subId)&&"oj-rowexpander-icon"!==t||null==this.icon?null:this.icon.get(0)},getSubIdByNode:function(e){return e===this.icon.get(0)?{subId:"oj-rowexpander-disclosure"}:null},_NotifyAttached:function(){this._super(),this.icon.attr("aria-labelledby",this._getLabelledBy())},_getLabelledBy:function(){return this.element.parent().closest("[id]").attr("id")}}),i.CustomElementBridge.registerMetadata("oj-row-expander","baseComponent",{properties:{context:{type:"object"},expanded:{type:"boolean",writeback:!0},translations:{type:"Object",properties:{accessibleLevelDescription:{type:"string"},accessibleRowCollapsed:{type:"string"},accessibleRowDescription:{type:"string"},accessibleRowExpanded:{type:"string"},accessibleStateCollapsed:{type:"string"},accessibleStateExpanded:{type:"string"}}}},events:{collapse:{},expand:{}},extension:{_WIDGET_NAME:"ojRowExpander"}}),i.CustomElementBridge.register("oj-row-expander",{metadata:i.CustomElementBridge.getMetadata("oj-row-expander")}),i._TouchProxy=function(e){this._init(e)},i._TouchProxy.prototype._init=function(e){this._elem=e,this._touchHandled=!1,this._touchMoved=!1,this._touchStartHandler=$.proxy(this._touchStart,this),this._touchEndHandler=$.proxy(this._touchEnd,this),this._touchMoveHandler=$.proxy(this._touchMove,this),this._elem.on({touchstart:this._touchStartHandler,touchend:this._touchEndHandler,touchmove:this._touchMoveHandler,touchcancel:this._touchEndHandler})},i._TouchProxy.prototype._destroy=function(){this._elem&&this._touchStartHandler&&(this._elem.off({touchstart:this._touchStartHandler,touchmove:this._touchMoveHandler,touchend:this._touchEndHandler,touchcancel:this._touchEndHandler}),this._touchStartHandler=void 0,this._touchEndHandler=void 0,this._touchMoveHandler=void 0)},i._TouchProxy.prototype._touchHandler=function(e,t){if(!(e.originalEvent.touches.length>1)){"touchstart"!==e.type&&"touchend"!==e.type&&e.preventDefault();var i=e.originalEvent.changedTouches[0],n=document.createEvent("MouseEvent");n.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),i.target.dispatchEvent(n)}},i._TouchProxy.prototype._touchStart=function(e){this._touchHandled||(this._touchHandled=!0,this._touchMoved=!1,this._touchHandler(e,"mouseover"),this._touchHandler(e,"mousemove"),this._touchHandler(e,"mousedown"))},i._TouchProxy.prototype._touchMove=function(e){this._touchHandled&&(this._touchMoved=!0,this._touchHandler(e,"mousemove"))},i._TouchProxy.prototype._touchEnd=function(e){this._touchHandled&&(this._touchHandler(e,"mouseup"),this._touchHandler(e,"mouseout"),this._touchMoved||"touchend"!==e.type||this._touchHandler(e,"click"),this._touchHandled=!1)},i._TouchProxy._TOUCH_PROXY_KEY="_ojTouchProxy",i._TouchProxy.prototype.touchMoved=function(){return this._touchMoved},i._TouchProxy.addTouchListeners=function(e){var t=$(e),n=t.data(i._TouchProxy._TOUCH_PROXY_KEY);return n||(n=new i._TouchProxy(t),t.data(i._TouchProxy._TOUCH_PROXY_KEY,n)),n},i._TouchProxy.removeTouchListeners=function(e){var t=$(e),n=t.data(i._TouchProxy._TOUCH_PROXY_KEY);n&&(n._destroy(),t.removeData(i._TouchProxy._TOUCH_PROXY_KEY))},i.Composite={},i.Composite.getMetadata=function(e){var t=i.Composite.getComponentMetadata(e);return t?Promise.resolve(t):null},i.Composite.getComponentMetadata=function(e){var t=i.BaseCustomElementBridge.getRegistered(e);return t&&t.composite?i.BaseCustomElementBridge.__GetDescriptor(e)[i.BaseCustomElementBridge.DESC_KEY_META]:null},i.Composite.register=function(e,t){i.CompositeElementBridge.register(e,t)},i.Composite.getContainingComposite=function(e,t){for(var n=null;e;)if((e=i.CompositeTemplateRenderer.getEnclosingComposite(e))&&"oj-module"!==e.nodeName.toLowerCase()){if(t&&!(16&e.compareDocumentPosition(t)))break;n=e}return n},i.Composite.getBindingProviderName=function(e){return e?e[i.Composite.__BINDING_PROVIDER]:null},i.Composite.__COMPOSITE_PROP="__oj_composite",i.Composite.__BINDING_PROVIDER="__oj_binding_prvdr",i.CompositeElementBridge={},i.CompositeElementBridge.proto=Object.create(i.BaseCustomElementBridge.proto),i.CollectionUtils.copyInto(i.CompositeElementBridge.proto,{beforePropertyChangedEvent:function(e,t,n){var o={property:t};i.CollectionUtils.copyInto(o,n,void 0,!0),i.CompositeTemplateRenderer.invokeViewModelMethod(this._VIEW_MODEL,"propertyChanged",[o])},AddComponentMethods:function(e){var t=function(e,t,n,o,s,r){if(!t.SaveEarlyPropertySet(n,o)){var a=t.SetProperty(e,n,o,s,r);if(a.propertySet)if(a.isSubproperty)i.CompositeElementBridge._getPropertyTracker(t,a.property).valueHasMutated()}};e.setProperty=function(e,n){var o=i.BaseCustomElementBridge.getInstance(this);t(this,o,e,n,this,!0)},e.getProperty=function(e){return i.BaseCustomElementBridge.getInstance(this).GetProperty(this,e,this)},e._propsProto.setProperty=function(e,i){t(this._ELEMENT,this._BRIDGE,e,i,this,!1)},e._propsProto.getProperty=function(e){return this._BRIDGE.GetProperty(this,e,this)},e.getNodeBySubId=function(e){var t=i.BaseCustomElementBridge.getInstance(this),n=t._getViewModel(this);return n.getNodeBySubId?n.getNodeBySubId(e,t._getNodeBySubId.bind(this)):t._getNodeBySubId.bind(this)(e)},e.getSubIdByNode=function(e){var t=i.BaseCustomElementBridge.getInstance(this),n=t._getViewModel(this);return n.getSubIdByNode?n.getSubIdByNode(e,t._getSubIdByNode.bind(this)):t._getSubIdByNode.bind(this)(e)}},CreateComponent:function(e){var t={},n=i.BaseCustomElementBridge.getSlotMap(e,!0);for(var o in n)t[o]=n[o].length;this._SLOT_MAP=n;var s={element:e,props:Promise.resolve(this._PROPS),properties:this._PROPS,slotNodeCounts:Promise.resolve(t),slotCounts:t,unique:i.BaseCustomElementBridge.__GetUnique()};s.uniqueId=e.id?e.id:s.unique,this._VM_CONTEXT=s;var r=i.BaseCustomElementBridge.__GetDescriptor(e.tagName)[i.BaseCustomElementBridge.DESC_KEY_VIEW_MODEL];r="function"==typeof r?new r(s):i.CompositeTemplateRenderer.invokeViewModelMethod(r,"initialize",[s])||r,this._VIEW_MODEL=r;var a=i.CompositeTemplateRenderer.invokeViewModelMethod(r,"activated",[s])||Promise.resolve(!0),l=this;a.then(function(n){var o={props:l._PROPS,slotMap:l._SLOT_MAP,slotNodeCounts:t,unique:l._VM_CONTEXT.unique,uniqueId:l._VM_CONTEXT.uniqueId,viewModel:l._VIEW_MODEL,viewModelContext:l._VM_CONTEXT};Object.defineProperty(e,i.Composite.__BINDING_PROVIDER,{value:"knockout"}),i.Components&&i.Components.unmarkPendingSubtreeHidden(e);var s=i.BaseCustomElementBridge.__GetCache(e.tagName),r=i.CompositeElementBridge._getDomNodes(s.view,e);i.CompositeTemplateRenderer.renderTemplate(o,e,r),l.__READY_TO_FIRE=!0,l.resolveDelayedReadyPromise()}).catch(function(t){l._throwError(e,t)})},DefineMethodCallback:function(e,t,n){e[t]=function(){var e=n.internalName||t,o=i.BaseCustomElementBridge.getInstance(this)._getViewModel(this);return o[e].apply(o,arguments)}},DefinePropertyCallback:function(e,t,n){var o=function(e,o){if(!this._BRIDGE.SaveEarlyPropertySet(t,e)){var s=i.CompositeElementBridge._getPropertyTracker(this._BRIDGE,t),r=s.peek();if(!i.BaseCustomElementBridge.__CompareOptionValues(t,n,e,r)&&(o&&(e=this._BRIDGE.ValidatePropertySet(this._ELEMENT,t,e)),n._eventListener&&this._BRIDGE.SetEventListenerProperty(this._ELEMENT,t,e),s(e),!n._derived)){var a=o?"external":"internal";i.BaseCustomElementBridge.__FirePropertyChangeEvent(this._ELEMENT,t,e,r,a)}}},s=function(e){var o=i.CompositeElementBridge._getPropertyTracker(this._BRIDGE,t),s=e?o.peek():o();return void 0===s&&(s=n.value,Array.isArray(s)?s=s.slice():"object"==typeof s&&(s=i.CollectionUtils.copyInto({},s,void 0,!0)),o(s)),s};n._derived||i.BaseCustomElementBridge.__DefineDynamicObjectProperty(e._propsProto,t,function(){return s.bind(this,!1)()},function(e){o.bind(this)(e,!1)}),i.BaseCustomElementBridge.__DefineDynamicObjectProperty(e,t,function(){var e=i.BaseCustomElementBridge.getInstance(this);return s.bind(e._PROPS,!0)()},function(e){var t=i.BaseCustomElementBridge.getInstance(this);o.bind(t._PROPS)(e,!0)})},GetMetadata:function(e){return e._metadata},HandleDetached:function(e){i.BaseCustomElementBridge.proto.HandleDetached.call(this,e),i.CompositeTemplateRenderer.invokeViewModelMethod(this._VIEW_MODEL,"detached",[e]),i.CompositeTemplateRenderer.invokeViewModelMethod(this._VIEW_MODEL,"disconnected",[e])},HandleReattached:function(e){i.BaseCustomElementBridge.proto.HandleReattached.call(this,e),i.CompositeTemplateRenderer.invokeViewModelMethod(this._VIEW_MODEL,"connected",[this._VM_CONTEXT])},InitializeElement:function(e){i.BaseCustomElementBridge.proto.InitializeElement.call(this,e),i.Components&&i.Components.markPendingSubtreeHidden(e);var t=i.BaseCustomElementBridge.__GetCache(e.tagName);if(!t.view){var n=i.BaseCustomElementBridge.__GetDescriptor(e.tagName)[i.BaseCustomElementBridge.DESC_KEY_VIEW];t.view||("string"==typeof n&&(t.view=i.CompositeElementBridge._getDomNodes(n,e)),t.view=n)}if(!t.css){var o=i.BaseCustomElementBridge.__GetDescriptor(e.tagName)[i.BaseCustomElementBridge.DESC_KEY_CSS];if(o){var s=document.createElement("style");s.type="text/css",s.styleSheet?s.styleSheet.cssText=o:s.appendChild(document.createTextNode(o)),document.head.appendChild(s),t.css=!0}}i.BaseCustomElementBridge.__InitProperties(e,this._PROPS)},InitializePrototype:function(e){i.BaseCustomElementBridge.proto.InitializePrototype.call(this,e),Object.defineProperty(e,"_propsProto",{value:{}})},InitializeBridge:function(e){i.BaseCustomElementBridge.proto.InitializeBridge.call(this,e),e._propsProto&&(this._PROPS=Object.create(e._propsProto),this._PROPS._BRIDGE=this,this._PROPS._ELEMENT=e)},_getNodeBySubId:function(e){var t=i.CompositeElementBridge.__GetSubIdMap(this)[e.subId];if(t){if(t.alias){var n=i.CollectionUtils.copyInto({},e,void 0,!0);n.subId=t.alias;var o=t.node;return o.getNodeBySubId?o.getNodeBySubId(n):i.Components.__GetWidgetConstructor(o)("getNodeBySubId",n)}return t.node}return null},_getSubIdByNode:function(e){if(!this.contains(e))return null;var t=i.CompositeElementBridge.__GetNodeMap(this),n=i.Composite.getContainingComposite(e,this);if(null!=n){var o;if(o=t[a=n.node.getAttribute("data-oj-subid-map")])if(n.getSubIdByNode)if(l=n.getSubIdByNode(e)){var s=o.map[l.subId];return l.subId=s,l}return null}for(var r=e;r!==this;){var a;if(a=r.getAttribute("data-oj-subid-map")||r.getAttribute("data-oj-subid"))break;r=r.parentNode}if(o=t[a]){if(!o.map)return{subId:a};var l,u=o.node;if(l=u.getSubIdByNode?u.getSubIdByNode(e):i.Components.__GetWidgetConstructor(u)("getSubIdByNode",e))return l.subId=o.map[l.subId],l}return null},_getViewModel:function(e){return this._VIEW_MODEL||this._throwError(e,"Cannot access methods before element is upgraded."),this._VIEW_MODEL}}),i.CompositeElementBridge.register=function(e,t){var n={};if(n[i.BaseCustomElementBridge.DESC_KEY_META]=i.CompositeElementBridge._getResource(t,i.BaseCustomElementBridge.DESC_KEY_META),n[i.BaseCustomElementBridge.DESC_KEY_VIEW]=i.CompositeElementBridge._getResource(t,i.BaseCustomElementBridge.DESC_KEY_VIEW),n[i.BaseCustomElementBridge.DESC_KEY_CSS]=i.CompositeElementBridge._getResource(t,i.BaseCustomElementBridge.DESC_KEY_CSS),n[i.BaseCustomElementBridge.DESC_KEY_VIEW_MODEL]=i.CompositeElementBridge._getResource(t,i.BaseCustomElementBridge.DESC_KEY_VIEW_MODEL),n[i.BaseCustomElementBridge.DESC_KEY_PARSE_FUN]=t[i.BaseCustomElementBridge.DESC_KEY_PARSE_FUN],i.BaseCustomElementBridge.__Register(e,n,i.CompositeElementBridge.proto,!0)){var o=n[i.BaseCustomElementBridge.DESC_KEY_META];if(o){var s=o.name;s?e!=s&&i.Logger.warn("Warning registering composite %s. Registered name: %s does not match name: %s provided in metadata.",e,e,s):i.Logger.warn('Warning registering composite %s. Required property "name" missing from metadata.',e),o.version||i.Logger.warn('Warning registering composite %s. Required property "version" missing from metadata.',e),o.jetVersion||i.Logger.warn('Warning registering composite %s. Required composite "jetVersion" missing from metadata.',e)}else i.Logger.warn("Composite registered'"+e.toLowerCase()+"' without Metadata."),o={};if(null==n[i.BaseCustomElementBridge.DESC_KEY_VIEW])throw new Error("Cannot register composite '"+e.toLowerCase()+"' without a View.");n._metadata=i.BaseCustomElementBridge.__ProcessEventListeners(o,!1),customElements.define(e.toLowerCase(),i.CompositeElementBridge.proto.getClass(n))}},i.CompositeElementBridge._getDomNodes=function(e,t){if("string"==typeof e)return i.__HtmlUtils.stringToNodeArray(e);if(i.CompositeElementBridge._isDocumentFragment(e)){for(var n=e.cloneNode(!0),o=[],s=0;s<n.childNodes.length;s++)o.push(n.childNodes[s]);return o}if(Array.isArray(e)){for(n=[],s=0;s<e.length;s++)n.push(e[s].cloneNode(!0));return n}i.BaseCustomElementBridge.getInstance(t)._throwError(t,"The composite View is not one of the following supported types: string, Array of DOM nodes, DocumentFragment")},i.CompositeElementBridge._generateSubIdMap=function(e,t){if(!e._SUBID_MAP){for(var n={},o={},s=t.children,r=0;r<s.length;r++)i.CompositeElementBridge._walkSubtree(n,o,s[r]);e._NODE_MAP=o,e._SUBID_MAP=n}},i.CompositeElementBridge._walkSubtree=function(e,t,n){if(!n.hasAttribute("slot")&&(i.CompositeElementBridge._addNodeToSubIdMap(e,t,n),!i.BaseCustomElementBridge.getRegistered(n.tagName)&&!i.Components.__GetWidgetConstructor(n)))for(var o=n.children,s=0;s<o.length;s++)i.CompositeElementBridge._walkSubtree(e,t,o[s])},i.CompositeElementBridge._addNodeToSubIdMap=function(e,t,i){var n=i.getAttribute("data-oj-subid"),o=i.getAttribute("data-oj-subid-map");if(o){var s=JSON.parse(o);if("object"==typeof s&&!(s instanceof Array)){var r=s,a={};for(var l in r)e[l]={alias:r[l],node:i},a[r[l]]=l;t[o]={map:a,node:i}}}else n&&(e[n]={node:i},t[n]={node:i})},i.CompositeElementBridge.__GetSubIdMap=function(e){var t=i.BaseCustomElementBridge.getInstance(e);return i.CompositeElementBridge._generateSubIdMap(t,e),t._SUBID_MAP},i.CompositeElementBridge.__GetNodeMap=function(e){var t=i.BaseCustomElementBridge.getInstance(e);return i.CompositeElementBridge._generateSubIdMap(t,e),t._NODE_MAP},i.CompositeElementBridge._getPropertyTracker=function(e,t){return e._TRACKERS||(e._TRACKERS={}),e._TRACKERS[t]||(e._TRACKERS[t]=i.CompositeTemplateRenderer.createTracker()),e._TRACKERS[t]},i.CompositeElementBridge._getResource=function(e,t){var i=e[t];if(null!=i){if(i.hasOwnProperty("inline"))return i.inline;if(i.hasOwnProperty("promise"))throw new Error("The 'promise' resource type for descriptor key '"+t+"' is no longer supported. The resource should be passed directly as the value instead.");return i}},i.CompositeElementBridge._isDocumentFragment=function(e){return window.DocumentFragment?e instanceof DocumentFragment:e&&11===e.nodeType};i.Composite.register("oj-avatar",{view:'<div class="oj-avatar-outer" data-bind="css: !$properties.initials || $properties.src ? \'oj-avatar-\'  + $properties.size : \'oj-avatar-has-initials oj-avatar-\'+ $properties.size"aria-hidden="true">  <div class="oj-avatar-inner">    \x3c!-- ko if: $properties.src --\x3e    <div class="oj-avatar-background-image"         data-bind="style:{\'background-image\':\'url(\' + $properties.src + \')\'}">      <div class="oj-avatar-initials" data-bind="text: $properties.initials"></div>    </div>    \x3c!-- /ko --\x3e    \x3c!-- ko if: $properties.initials && !$properties.src --\x3e    <div class="oj-avatar-initials" data-bind="text: $properties.initials"></div>    \x3c!-- /ko --\x3e    \x3c!-- ko if: !$properties.initials && !$properties.src --\x3e    <div class="oj-avatar-placeholder"></div>    \x3c!-- /ko --\x3e  </div></div>',metadata:{properties:{initials:{description:"Initials for avatar, used if no image",type:"string"},src:{description:"Source for background image",type:"string"},size:{description:"Size of the avatar",type:"string",enumValues:["xxs","xs","sm","md","lg","xl","xxl"],value:"md"}}}});var dt=function(){};i.Object.createSubclass(dt,i.Object,"KeySet"),i.KeySet=dt,dt.prototype.InitializeWithKeys=function(e){this._keys=this._populate(e)},dt.prototype.SetInternal=function(e){this._keys=e},dt.prototype.AddOrDeleteInternal=function(e,t){var i,n;return null==(i=e?this._add(t):this._remove(t))?this:((n=Object.create(Object.getPrototypeOf(this))).SetInternal(i),n)},dt.prototype._add=function(e){var t=this,i=null;return e.forEach(function(e){null==t.FindEquals(e)&&(null==i&&(i=t.Clone()),i.add(e))}),i},dt.prototype._remove=function(e){var t,i=this,n=null;return 0==this._keys.size?null:(e.forEach(function(e){null!=(t=i.FindEquals(e))&&(null==n&&(n=i.Clone()),n.delete(t))}),n)},dt.prototype.FindEquals=function(e){var t,n,o=null;if(this._keys.has(e))return e;if("function"==typeof Symbol&&"function"==typeof Set.prototype[Symbol.iterator])for(n=(t=this._keys[Symbol.iterator]()).next();!n.done;){if(i.Object.compareValues(n.value,e)||n.value==e)return n.value;n=t.next()}else this._keys.forEach(function(t){(null==o&&i.Object.compareValues(t,e)||t==e)&&(o=t)});return o},dt.prototype.GetInternalSize=function(){return this._keys.size},dt.prototype.Clone=function(){return this._populate(this._keys)},dt.prototype._populate=function(e){var t=new Set(e);return null!=e&&0==t.size&&e.forEach(function(e){t.add(e)}),t};var ct=function(e){this.InitializeWithKeys(e)};i.Object.createSubclass(ct,dt,"ExpandedKeySet"),i.ExpandedKeySet=ct,ct.prototype.add=function(e){return this.AddOrDeleteInternal(!0,e)},ct.prototype.addAll=function(){return new pt},ct.prototype.isAddAll=function(){return!1},ct.prototype.delete=function(e){return this.AddOrDeleteInternal(!1,e)},ct.prototype.clear=function(){return 0==this.GetInternalSize()?this:new ct},ct.prototype.has=function(e){return null!=this.FindEquals(e)},ct.prototype.values=function(){return this.Clone()};var pt=function(){this.InitializeWithKeys(null)};i.Object.createSubclass(pt,dt,"ExpandAllKeySet"),i.ExpandAllKeySet=pt,pt.prototype.add=function(e){return this.AddOrDeleteInternal(!1,e)},pt.prototype.addAll=function(){return 0==this.GetInternalSize()?this:new pt},pt.prototype.isAddAll=function(){return!0},pt.prototype.delete=function(e){return this.AddOrDeleteInternal(!0,e)},pt.prototype.clear=function(){return new ct},pt.prototype.has=function(e){return null==this.FindEquals(e)},pt.prototype.deletedValues=function(){return this.Clone()};i.KeySetImpl=function(e){this.has=function(e){return null!=this.get(e)},this.get=function(e){var t,n,o=null;if(this._keys.has(e))return e;if(e!==Object(e))return null;if("function"==typeof Symbol&&"function"==typeof Set.prototype[Symbol.iterator])for(n=(t=this._keys[Symbol.iterator]()).next();!n.done;){if(i.Object.compareValues(n.value,e)||n.value===e)return n.value;n=t.next()}else this._keys.forEach(function(t){(null==o&&i.Object.compareValues(t,e)||t===e)&&(o=t)});return o},this.InitializeWithKeys=function(e){this._keys=this._populate(e)},this._populate=function(e){var t=new Set(e);return null!=e&&0===t.size&&e.forEach(function(e){t.add(e)}),t},this.InitializeWithKeys(e)},i.__registerWidget("oj.ojAccordion",$.oj.baseComponent,{widgetEventPrefix:"oj",options:{multiple:!1,expanded:null,beforeExpand:null,expand:null,beforeCollapse:null,collapse:null},_ComponentCreate:function(){this._super(),this.element.addClass("oj-accordion oj-component").attr("role","group"),this.options.expanded=this._expandedIndexToId(this.options.expanded),this._refresh()},_NotifyContextMenuGesture:function(e,t,i){this._OpenContextMenu(t,i,{launcher:this.element.find(".oj-collapsible-header-icon").first()})},_destroy:function(){this.element.removeClass("oj-accordion oj-component").removeAttr("role"),this.element.children().removeClass("oj-accordion-collapsible"),this.element.children(".oj-accordion-created").removeClass("oj-accordion-created").ojCollapsible("destroy")},_setOption:function(e,t,i){if("multiple"===e)!t&&this.options.multiple&&this.element.children(".oj-expanded").first().siblings(".oj-collapsible").ojCollapsible("collapse",!1);else if("expanded"===e)return void this._setExpandedOption(t);this._super(e,t,i)},refresh:function(){this._super(),this._refresh()},_refresh:function(){this._makeCollapsible(),this._internalSetExpanded=!0,this._setExpandedOption(this.options.expanded),this._internalSetExpanded=!1,this._setupEvents()},_makeCollapsible:function(){this.collapsibles=this.element.children(),this._IsCustomElement()?(this.element.children("oj-collapsible").each(function(e,t){t.setAttribute("expand-area","header")}),this.collapsibles.not("oj-collapsible").ojCollapsible({expandArea:"header"}).addClass("oj-accordion-created").attr("data-oj-internal","")):(this.element.children(":oj-collapsible").each(function(){$(this).ojCollapsible("option","expandArea","header")}),this.collapsibles.not(":oj-ojCollapsible").ojCollapsible({expandArea:"header"}).addClass("oj-accordion-created").attr("data-oj-internal","")),this.collapsibles.addClass("oj-accordion-collapsible")},_setupEvents:function(){var e;e=this._IsCustomElement()?{keydown:this._keydown,ojBeforeExpand:this._beforeExpandHandler,ojExpand:this._expandHandler,ojBeforeCollapse:this._beforeCollapseHandler,ojCollapse:this._collapseHandler}:{keydown:this._keydown,ojbeforeexpand:this._beforeExpandHandler,ojexpand:this._expandHandler,ojbeforecollapse:this._beforeCollapseHandler,ojcollapse:this._collapseHandler},this._off(this.collapsibles),this._on(this.collapsibles,e)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey&&($(e.target).hasClass("oj-collapsible-header")||$(e.target).hasClass("oj-collapsible-header-icon"))){var t=$.ui.keyCode,i=this.collapsibles.not(".oj-disabled"),n=i.length,o=$(e.target).closest(".oj-collapsible"),s=i.index(o),r=!1;if(s>=0)switch(e.keyCode){case t.RIGHT:case t.DOWN:r=i[(s+1)%n];break;case t.LEFT:case t.UP:r=i[(s-1+n)%n];break;case t.HOME:r=i[0];break;case t.END:r=i[n-1]}r&&(o&&$(o).trigger("ojfocusout"),$(r).trigger("ojfocus"),e.preventDefault())}},_findTargetSiblings:function(e){if(!this.options.multiple){var t=$(e.target).closest(".oj-collapsible");if(t.parent().is(":oj-ojAccordion"))return t.siblings(".oj-collapsible.oj-expanded").map(function(){return $(this).data("oj-ojCollapsible")})}return $()},_beforeExpandHandler:function(e,t){if(!this._isTargetMyCollapsible(e))return!0;var i;this._expandTarget=$(e.target);var n=null;if(this._findTargetSiblings(e).each(function(){var t={header:(n=this.element).find(".oj-collapsible-header"),content:n.find(".oj-collapsible-content")};return(i=this._trigger("beforeCollapse",e,t))||(this._expandTarget=null),i}),!this.options.multiple){var o=this._initEventData(n,this._expandTarget);i=this._trigger("beforeExpand",e,o)}var s=this;return i&&this._findTargetSiblings(e).each(function(){this.collapse(!1,e,t),s._collapsedCollapsible=this.widget()}),i},_expandHandler:function(e,t){var i=null;if(this._collapsedCollapsible&&(i=this._collapsedCollapsible,this._collapsedCollapsible=null),this._isTargetMyCollapsible(e)&&!this._duringSetExpandedOption){var n,o=this;this._findTargetSiblings(e).each(function(){this.collapse(!1,e,t),n=o._initEventData(this.element,$(e.target))}),n||(n=o._initEventData(i,$(e.target))),this.options.multiple||this._trigger("expand",e,n),this._updateExpanded(),this._expandTarget=null}},_beforeCollapseHandler:function(e,t){var i=t;return!(this._isTargetMyCollapsible(e)&&!this.options.multiple)||(!i&&e.originalEvent instanceof CustomEvent&&(i=e.originalEvent.detail),this._trigger("beforeCollapse",e,this._initCollapseEventData(e,i)))},_collapseHandler:function(e,t){var i=t;if(!this._duringSetExpandedOption&&this._isTargetMyCollapsible(e)){!i&&e.originalEvent instanceof CustomEvent&&(i=e.originalEvent.detail);var n=this._initCollapseEventData(e,i);this.options.multiple||this._trigger("collapse",e,n),this._updateExpanded()}},_initEventData:function(e,t){return{fromCollapsible:e,toCollapsible:t}},_initCollapseEventData:function(e,t){var i;return t.toCollapsible?i=t:e.originalEvent&&e.originalEvent.target&&(i=this._initEventData($(e.target),this._expandTarget)),!i&&this._expandTarget&&(i=this._initEventData($(e.target),this._expandTarget)),i},_isTargetMyCollapsible:function(e){return $(e.target).is(this.collapsibles)},_updateExpanded:function(){var e,t,n=[];this.collapsibles.each(function(i){("oj-collapsible"===this.tagName.toLowerCase()?"true"===this.getAttribute("expanded"):$(this).ojCollapsible("option","expanded"))&&(t={},(e=$(this).attr("id"))&&(t.id=e),t.index=i,n.push(t))}),i.Object._compareArrayIdIndexObject(n,this.options.expanded)||this.option("expanded",n,{_context:{internalSet:!0,writeback:!0}})},_expandedIndexToId:function(e){if(Array.isArray(e)){for(var t,i=[],n=[],o=0;o<e.length;o++){var s=e[o];"number"==typeof s||"string"==typeof s?n.push(s):"number"==typeof s.index?n.push(s.index):"string"==typeof s.id&&n.push(s.id)}return this.element.children().each(function(e){(t=$(this).attr("id"))?-1===n.indexOf(t)&&-1===n.indexOf(e)||i.push({id:t,index:e}):-1!==n.indexOf(e)&&i.push({index:e})}),!this.options.multiple&&i.length>1&&(i=[i[i.length-1]]),i}return null},_setExpandedOption:function(e){var t=e;if(this._internalSetExpanded||(t=this._expandedIndexToId(t)),t){var n,o,s,r,a=this,l=0;this.collapsibles.each(function(e){n=$(this),o=n.attr("id"),s=!1,(r=t[l])&&(o?o===r.id&&(s=!0):e===r.index&&(s=!0),s&&(l+=1));var u="oj-collapsible"===this.tagName.toLowerCase();(u?"true"===this.getAttribute("expanded")||""===this.getAttribute("expanded"):n.ojCollapsible("option","expanded"))!==s&&(i.Logger.warn("JET Accordion: override collapsible "+e+" expanded setting"),a._duringSetExpandedOption=!0,u?this.setAttribute("expanded",s):n.ojCollapsible("option","expanded",s),a._duringSetExpandedOption=!1)})}this._updateExpanded()},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;var t=e.subId,i=e.index;if("number"!=typeof i||i<0||i>=this.collapsibles.length)return null;var n=this.collapsibles[i];switch(t){case"oj-accordion-content":t="oj-collapsible-content";break;case"oj-accordion-header":t="oj-collapsible-header";break;case"oj-accordion-disclosure":case"oj-accordion-header-icon":t="oj-collapsible-disclosure";break;case"oj-accordion-collapsible":return n;default:return null}return $(n).ojCollapsible("getNodeBySubId",{subId:t})},getSubIdByNode:function(e){for(var t=-1,i=e;i&&-1===(t=Array.prototype.indexOf.call(this.collapsibles,i));)i=i.parentElement;var n=null;if(-1!==t){var o=$(this.collapsibles[t]).ojCollapsible("getSubIdByNode",e);switch((o=o||{}).subId){case"oj-collapsible-content":n="oj-accordion-content";break;case"oj-collapsible-header":n="oj-accordion-header";break;case"oj-collapsible-disclosure":case"oj-collapsible-header-icon":n="oj-accordion-disclosure";break;default:n="oj-accordion-collapsible"}}return n?{subId:n,index:t}:null},_CompareOptionValues:function(e,t,n){return"expanded"===e?i.Object.compareValues(t,n):this._super(e,t,n)}}),i.CustomElementBridge.registerMetadata("oj-accordion","baseComponent",{properties:{expanded:{type:"Array",writeback:!0},multiple:{type:"boolean"}},events:{beforeCollapse:{},beforeExpand:{},collapse:{},expand:{}},extension:{_WIDGET_NAME:"ojAccordion"}}),i.CustomElementBridge.register("oj-accordion",{metadata:i.CustomElementBridge.getMetadata("oj-accordion")}),i.AnimationUtils={},i.AnimationUtils._getName=function(e,t){if(!i.AnimationUtils._nameMap){i.AnimationUtils._nameMap={};var n=i.AnimationUtils._nameMap,o=e.style;n.backfaceVisibility=void 0!==o.webkitBackfaceVisibility?"webkitBackfaceVisibility":"backfaceVisibility",n.transform=void 0!==o.webkitTransform?"webkitTransform":"transform",n.transformOrigin=void 0!==o.webkitTransformOrigin?"webkitTransformOrigin":"transformOrigin",n.transition=void 0!==o.webkitTransition?"webkitTransition":"transition",n.transitionend=void 0!==o.webkitTransition?"webkitTransitionEnd":"transitionend"}var s=i.AnimationUtils._nameMap[t];return s||t},i.AnimationUtils._getElementStyle=function(e,t){return e.style[i.AnimationUtils._getName(e,t)]},i.AnimationUtils._setElementStyle=function(e,t,n){e.style[i.AnimationUtils._getName(e,t)]=n},i.AnimationUtils._animate=function(e,t,n,o,s,r){var a=[].concat(s),l=function(l,u){var h=function(e){var t=0==e.propertyName.indexOf("-webkit-")?e.propertyName.substr(8):e.propertyName;t=i.AnimationUtils._getCamelCasePropName(t);var n=a.indexOf(t);n>-1&&(a.length>1?a.splice(n,1):p())},d=0,c=!1,p=function(){c||(d&&(window.cancelAnimationFrame(d),d=0),e.removeEventListener(i.AnimationUtils._getName(e,"transitionend"),h),l&&l(!0),c=!0)};null==n&&(n={}),null==n.css&&(n.css={}),n.css.transition=i.AnimationUtils._createTransitionValue(e,s,o);var _=i.AnimationUtils._saveStyle(e,t,n,o,r||s);i.AnimationUtils._applyState(e,t,_>1),e.addEventListener(i.AnimationUtils._getName(e,"transitionend"),h);var m=o.duration,g=o.delay,f=o._skipPromise;function v(){d=0,i.AnimationUtils._applyState(e,n,_>1)}null==t?v():(o._noReflow||(i.AnimationUtils._x=e.offsetWidth),d=window.requestAnimationFrame(v));var C=i.AnimationUtils._getTotalTiming(m,g);f||setTimeout(p,C+100)};return o._skipPromise?(l(null),null):new Promise(l).then(function(){t&&t.addClass&&$(e).removeClass(t.addClass),n&&n.addClass&&$(e).removeClass(n.addClass),i.AnimationUtils._restoreStyle(e)})},i.AnimationUtils._saveCssValues=function(e,t,n,o){for(var s in t)n.hasOwnProperty(s)||o&&-1!=o.indexOf(s)||(n[s]=i.AnimationUtils._getElementStyle(e,s))},i.AnimationUtils._saveStyle=function(e,t,n,o,s){var r=e._ojSavedStyle||{},a=t&&t.css?t.css:{},l=n&&n.css?n.css:{};o&&"all"===o.persist||(s=null),i.AnimationUtils._saveCssValues(e,a,r,s),i.AnimationUtils._saveCssValues(e,l,r,s),e._ojSavedStyle=r;var u=e._ojEffectCount||0;return e._ojEffectCount=++u,u},i.AnimationUtils._restoreStyle=function(e){var t=e._ojEffectCount;if(t>1)e._ojEffectCount=t-1;else{var n=e._ojSavedStyle;if(n){for(var o in n)i.AnimationUtils._setElementStyle(e,o,n[o]);delete e._ojSavedStyle,delete e._ojEffectCount}}},i.AnimationUtils._getCamelCasePropName=function(e){if(e.indexOf("-")>=0){for(var t="",i=e.split("-"),n=0;n<i.length;n++){var o=i[n];o&&(t?t+=o.charAt(0).toUpperCase()+o.slice(1):t=o)}return t}return e},i.AnimationUtils._getHyphenatedPropName=function(e){var t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return 0==t.indexOf("webkit")&&(t="-"+t),t},i.AnimationUtils._concatMultiValue=function(e,t,n,o,s){if(t.css[n]){var r=i.AnimationUtils._getElementStyle(e,n);r&&0!=r.indexOf(o)&&(t.css[n]=r+s+t.css[n])}},i.AnimationUtils._splitTransform=function(e){var t=[];if(e&&"none"!=e)for(var i;(i=e.indexOf(")"))>0;){var n=e.substr(0,i+1);t.push(n.trim()),e=e.slice(i+1)}return t},i.AnimationUtils._getTransformFuncName=function(e){var t=e.indexOf("(");return t>=1?e.substr(0,t):e},i.AnimationUtils._applyTransform=function(e,t){for(var n=i.AnimationUtils._getElementStyle(e,"transform"),o=i.AnimationUtils._splitTransform(n),s=i.AnimationUtils._splitTransform(t),r=[],a=0;a<s.length;a++){var l=i.AnimationUtils._getTransformFuncName(s[a]),u=!1;if(l)for(var h=0;h<o.length;h++)0==o[h].indexOf(l+"(")&&(o[h]=s[a],u=!0);u||r.push(s[a])}return(o=o.concat(r)).join(" ")},i.AnimationUtils._applyState=function(e,t,n){if(t){if(t.css){n&&i.AnimationUtils._concatMultiValue(e,t,"transition","all",", "),t.css.transform&&(t.css.transform=i.AnimationUtils._applyTransform(e,t.css.transform));var o=t.css;for(var s in o)i.AnimationUtils._setElementStyle(e,s,o[s])}t.addClass&&$(e).addClass(t.addClass),t.removeClass&&$(e).removeClass(t.removeClass)}},i.AnimationUtils._getTimingValue=function(e){var t=parseFloat(e);return isNaN(t)?0:e.indexOf("ms")>-1?t:1e3*t},i.AnimationUtils._getTotalTiming=function(e,t){var n=i.AnimationUtils._getTimingValue(e);return n>0?n+(t?i.AnimationUtils._getTimingValue(t):0):0},i.AnimationUtils._calcCssTime=function(e,t,n){for(var o=e.split(","),s=t.split(","),r=n.split(","),a=o.length,l=s.length,u=r.length,h=0,d=0;d<a;d++){var c=r[d%u],p=s[d%l],_=i.AnimationUtils._getTotalTiming(c,p);h=Math.max(h,_)}return h},i.AnimationUtils._calcEffectTime=function(e){var t,n,o,s=window.getComputedStyle(e);t=s.animationName||s.webkitAnimationName,n=s.animationDelay||s.webkitAnimationDelay,o=s.animationDuration||s.webkitAnimationDuration;var r=i.AnimationUtils._calcCssTime(t,n,o);t=s.transitionProperty||s.webkitTransitionProperty,n=s.transitionDelay||s.webkitTransitionDelay,o=s.transitionDuration||s.webkitTransitionDuration;var a=i.AnimationUtils._calcCssTime(t,n,o);return Math.max(r,a)},i.AnimationUtils._fillEmptyOptions=function(e,t){e.delay=e.delay||t.delay,e.duration=e.duration||t.duration,e.timingFunction=e.timingFunction||t.timingFunction,e.persist=e.persist||t.persist},i.AnimationUtils._triggerEvent=function(e,t,i,n){var o;if(n&&n._trigger)o=!n._trigger(t,null,i);else{var s="oj"+t.substr(0,1).toUpperCase()+t.substr(1),r=new CustomEvent(s,{detail:i,bubbles:!0,cancelable:!0}),a=n||e;a.dispatchEvent&&a.dispatchEvent(r),o=r.defaultPrevented}return o},i.AnimationUtils.startAnimation=function(e,t,n,o){return e=$(e)[0],new Promise(function(s,r){var a=$(e),l="oj-animate-"+t,u=l+"-active",h=!1,d=!1,c=function(){if(h&&d){a.removeClass(l),a.removeClass(u),i.AnimationUtils._restoreStyle(e),s(!0);var n={action:t,element:e};i.AnimationUtils._triggerEvent(e,"animateEnd",n,o)}},p=function(){h=!0,c()},_=function(){d=!0,c()};i.AnimationUtils._saveStyle(e,null,null,null,null);var m={action:t,element:e,endCallback:p};if(!i.AnimationUtils._triggerEvent(e,"animateStart",m,o)){for(var g=[].concat(n),f=[],v={},C=0;C<g.length;C++){var y,b=g[C],S="";null!=b&&"none"!=b&&("string"==typeof b?(S=b,y={}):"object"==typeof b&&(S=b.effect,y=$.extend({},b)),i.AnimationUtils._fillEmptyOptions(y,v),v=$.extend({},y)),S&&i.AnimationUtils[S]&&f.push(i.AnimationUtils[S](e,y))}f.length?Promise.all(f).then(p):p()}a.addClass(l);var E=window.requestAnimationFrame(function(){E=0,a.addClass(u);var t=i.AnimationUtils._calcEffectTime(e);t>0?setTimeout(_,t+100):_()});setTimeout(function(){E&&(window.cancelAnimationFrame(E),E=0,_())},1e3)})},i.AnimationUtils._mergeOptions=function(e,t){return null==i.AnimationUtils._defaultOptions&&(i.AnimationUtils._defaultOptions=i.ThemeUtils.parseJSONFromFontFamily("oj-animation-effect-default-options")),$.extend({duration:"400ms"},i.AnimationUtils._defaultOptions?i.AnimationUtils._defaultOptions[e]:null,t)},i.AnimationUtils._createTransitionValue=function(e,t,n){var o="";if(t)for(var s=0;s<t.length;s++){var r=i.AnimationUtils._getName(e,t[s]);o+=(s>0?", ":"")+i.AnimationUtils._getHyphenatedPropName(r)+" "+n.duration,n.timingFunction&&(o+=" "+n.timingFunction),n.delay&&(o+=" "+n.delay)}return o},i.AnimationUtils._fade=function(e,t,n,o,s){var r={css:{opacity:o}},a={css:{opacity:s}};return(t=i.AnimationUtils._mergeOptions(n,t))&&(t.startOpacity&&(r.css.opacity=t.startOpacity),t.endOpacity&&(a.css.opacity=t.endOpacity)),i.AnimationUtils._animate(e,r,a,t,["opacity"])},i.AnimationUtils.fadeIn=function(e,t){return i.AnimationUtils._fade(e,t,"fadeIn",0,1)},i.AnimationUtils.fadeOut=function(e,t){return i.AnimationUtils._fade(e,t,"fadeOut",1,0)},i.AnimationUtils.expand=function(e,t){return i.AnimationUtils._expandCollapse(e,t,!0)},i.AnimationUtils.collapse=function(e,t){return i.AnimationUtils._expandCollapse(e,t,!1)},i.AnimationUtils._wrapRowContent=function(e,t){var i=[],n=e.children,o=[],s=[];e._ojSavedHeight=e.style.height;for(var r=0;r<n.length;r++){var a=n[r],l=window.getComputedStyle(a);o.push(l.padding),s.push(l.textAlign),a._ojSavedPadding=a.style.padding}for(r=0;r<n.length;r++){a=n[r];var u=document.createElement("div");u.style.overflow="hidden;";var h=document.createElement("div");for(h.style.display="table-cell",h.style.verticalAlign="middle",h.style.boxSizing="border-box",h.style.height=t,h.style.padding=o[r],h.style.textAlign=s[r],u.appendChild(h);a.firstChild;)h.appendChild(a.firstChild);a.appendChild(u),a.style.padding="0",i.push(u)}return e.style.height="0",i},i.AnimationUtils._unwrapRowContent=function(e){for(var t=e.children,i=0;i<t.length;i++){var n=t[i],o=n.children[0];if(o){var s=o.children[0];if(s)for(;s.firstChild;)n.appendChild(s.firstChild);n.removeChild(o)}n.style.padding=n._ojSavedPadding,delete n._ojSavedPadding}e.style.height=e._ojSavedHeight,delete e._ojSavedHeight},i.AnimationUtils._expandCollapseRow=function(e,t,n){var o,s=e.offsetHeight+"px",r=i.AnimationUtils._wrapRowContent(e,s),a=$.extend({},t);if(n?a.endMaxHeight||(a.endMaxHeight=s):a.startMaxHeight||(a.startMaxHeight=s),a.persist="all",a._noReflow=!0,r.length)for(var l=0;l<r.length;l++)0==l?(a._skipPromise=!1,o=i.AnimationUtils._expandCollapse(r[l],a,n)):(a._skipPromise=!0,i.AnimationUtils._expandCollapse(r[l],a,n));else o=Promise.resolve();return o.then(function(){null!=t&&"all"==t.persist||i.AnimationUtils._unwrapRowContent(e)})},i.AnimationUtils._getSizeLimit=function(e,t,i,n,o){var s=i;if(!s)if(n)s="0";else{var r=o?t.maxWidth:t.maxHeight;s="none"!==r?r:(o?e.offsetWidth:e.offsetHeight)+"px"}return s},i.AnimationUtils._expandCollapse=function(e,t,n){if(e&&"TR"==e.tagName)return i.AnimationUtils._expandCollapseRow(e,t,n);var o={},s={},r=(t=i.AnimationUtils._mergeOptions(n?"expand":"collapse",t)).direction||"height",a=o.css={},l=s.css={},u=window.getComputedStyle(e),h=[];if("both"===r||"height"===r){var d=i.AnimationUtils._getSizeLimit(e,u,t.startMaxHeight,n,!1),c=i.AnimationUtils._getSizeLimit(e,u,t.endMaxHeight,!n,!1);a.maxHeight=d,l.maxHeight=c,h.push("maxHeight")}if("both"===r||"width"===r){var p=i.AnimationUtils._getSizeLimit(e,u,t.startMaxWidth,n,!0),_=i.AnimationUtils._getSizeLimit(e,u,t.endMaxWidth,!n,!0);a.maxWidth=p,l.maxWidth=_,h.push("maxWidth")}a.overflow=t.overflow?t.overflow:"hidden";var m=[].concat(h);return m.push("overflow"),i.AnimationUtils._animate(e,o,s,t,h,m)},i.AnimationUtils.zoomIn=function(e,t){return i.AnimationUtils._zoom(e,t,!0)},i.AnimationUtils.zoomOut=function(e,t){return i.AnimationUtils._zoom(e,t,!1)},i.AnimationUtils._zoom=function(e,t,n){var o={},s={},r=(t=i.AnimationUtils._mergeOptions(n?"zoomIn":"zoomOut",t)).axis||"both",a="both"===r?"scale":"x"===r?"scaleX":"scaleY",l=o.css={},u=s.css={};return l.transform=a+"("+(n?0:1)+") translateZ(0)",u.transform=a+"("+(n?1:0)+") translateZ(0)",l.transformOrigin=t.transformOrigin||"center",i.AnimationUtils._animate(e,o,s,t,["transform"])},i.AnimationUtils.slideIn=function(e,t){return i.AnimationUtils._slide(e,t,!0)},i.AnimationUtils.slideOut=function(e,t){return i.AnimationUtils._slide(e,t,!1)},i.AnimationUtils._slide=function(e,t,n){var o={},s={},r=(t=i.AnimationUtils._mergeOptions(n?"slideIn":"slideOut",t)).direction||"start",a="0",l="0",u=o.css={},h=s.css={};if(t.offsetX||t.offsetY)t.offsetX&&(a=t.offsetX),t.offsetY&&(l=t.offsetY);else{var d="rtl"===i.DomUtils.getReadingDirection();switch(r){case"left":a=(n?e.offsetWidth:-e.offsetWidth)+"px";break;case"right":a=(n?-e.offsetWidth:e.offsetWidth)+"px";break;case"top":l=(n?e.offsetHeight:-e.offsetHeight)+"px";break;case"bottom":l=(n?-e.offsetHeight:e.offsetHeight)+"px";break;case"end":a=(n?-e.offsetWidth:e.offsetWidth)*(d?-1:1)+"px";break;default:a=(n?e.offsetWidth:-e.offsetWidth)*(d?-1:1)+"px"}}return n?(u.transform="translate("+a+","+l+") translateZ(0)",h.transform="translate(0,0) translateZ(0)"):(u.transform="translate(0,0) translateZ(0)",h.transform="translate("+a+","+l+") translateZ(0)"),i.AnimationUtils._animate(e,o,s,t,["transform"])},i.AnimationUtils.ripple=function(e,t){t=i.AnimationUtils._mergeOptions("ripple",t);var n={},o={},s=e.offsetWidth,r=e.offsetHeight,a=$("<div style='position:absolute; overflow:hidden'>"),l=$("<div class='oj-animation-effect-ripple oj-animation-rippler'>"),u="static"==window.getComputedStyle(e).position?{left:e.offsetLeft,top:e.offsetTop}:{left:0,top:0};e.insertBefore(a[0],e.firstChild),a.css({left:u.left+"px",top:u.top+"px",width:s+"px",height:r+"px"}),a.prepend(l);var h=n.css={},d=o.css={};return i.AnimationUtils._setRippleOptions(h,l,a,t),h.transform="scale(0) translateZ(0)",h.opacity=t.startOpacity||l.css("opacity"),d.transform="scale(1) translateZ(0)",d.opacity=t.endOpacity||0,t.persist="all",i.AnimationUtils._animate(l[0],n,o,t,["transform","opacity"]).then(function(){a.remove()})},i.AnimationUtils._setRippleOptions=function(e,t,n,o){var s=t.width(),r=n.width(),a=n.height();if(o.diameter){var l=o.diameter,u=parseInt(l,10);isNaN(u)||(s="%"==l.charAt(l.length-1)?Math.floor(Math.min(r,a)*(u/100)):u,e.width=s+"px",e.height=s+"px")}var h,d="static"==n.css("position")?n.position():{left:0,top:0};null!=(h=i.AnimationUtils._calcRippleOffset(o.offsetX,s,r,d.left))&&(e.left=h+"px"),null!=(h=i.AnimationUtils._calcRippleOffset(o.offsetY,s,a,d.top))&&(e.top=h+"px"),o.color&&(e.backgroundColor=o.color)},i.AnimationUtils._calcRippleOffset=function(e,t,i,n){var o;e=e||"50%";var s=parseInt(e,10);return isNaN(s)||(o="%"==e.charAt(e.length-1)?i*(s/100)-t/2:s-t/2,o=Math.floor(o+n)),o},i.AnimationUtils._removeRipple=function(e,t){var n=(t=t||{}).removeEffect||"fadeOut",o=$(".oj-animation-rippler",e);if(0!==o.length)return n in{fadeOut:1,collapse:1,zoomOut:1,slideOut:1}?i.AnimationUtils[n](o,t).then(function(){o.remove()}):o.remove();console.warn("No rippler so returning")},i.AnimationUtils._calcBackfaceAngle=function(e){var t,i=e.match(/^([\+\-]?\d*\.?\d*)(.*)$/),n=parseFloat(i[1]),o=i[2];switch(o){case"deg":t=n-180+o;break;case"grad":t=n-200+o;break;case"rad":t=n-3.1416+o;break;case"turn":t=n-.5+o;break;default:console.log("Unknown angle unit in flip animation: "+o)}return t},i.AnimationUtils._flip=function(e,t,n,o,s){if(t&&"children"==t.flipTarget){var r,a=[],l=$(e).children(),u=$.extend({},t);delete u.flipTarget;var h=$.extend({},u);h.startAngle=i.AnimationUtils._calcBackfaceAngle(t.startAngle||o),h.endAngle=i.AnimationUtils._calcBackfaceAngle(t.endAngle||s);for(var d=0;d<l.length;d++)r=$(l[d]).hasClass("oj-animation-backface")?h:u,a.push(i.AnimationUtils._flip(l[d],r,n,o,s));return Promise.all(a)}var c,p={},_={},m={css:p},g={css:_},f="rotateY(",v="2000px",C="hidden",y="center";(t=i.AnimationUtils._mergeOptions(n,t))&&("x"===t.axis&&(f="rotateX("),t.startAngle&&(o=t.startAngle),t.endAngle&&(s=t.endAngle),t.perspective&&(v=t.perspective),t.backfaceVisibility&&(C=t.backfaceVisibility),t.transformOrigin&&(y=t.transformOrigin)),c="perspective("+v+") "+f;return p.transform=c+o+")",p.backfaceVisibility=C,p.transformOrigin=y,_.transform=c+s+")",i.AnimationUtils._animate(e,m,g,t,["transform"],["transform","backfaceVisibility","transformOrigin"])},i.AnimationUtils.flipIn=function(e,t){return i.AnimationUtils._flip(e,t,"flipIn","-180deg","0deg")},i.AnimationUtils.flipOut=function(e,t){return i.AnimationUtils._flip(e,t,"flipOut","0deg","180deg")},i.AnimationUtils.addTransition=function(e,t){return t=i.AnimationUtils._mergeOptions("addTransition",t),i.AnimationUtils._animate(e,null,null,t,t.transitionProperties)},i.ArrayCellSet=function(e,t,i,n,o){this.m_startRow=e,this.m_endRow=t,this.m_startColumn=i,this.m_endColumn=n,this.m_callback=o},i.ArrayCellSet.prototype.getData=function(e){var t,i,n,o;return t=this,n=e.row,o=e.column,i={},Object.defineProperty(i,"data",{enumerable:!0,get:function(){return t.m_callback._getCellData(n,o)},set:function(e){t.m_callback._setCellData(n,o,e)}}),i},i.ArrayCellSet.prototype.getMetadata=function(e){return this.m_callback._getCellMetadata(e.row,e.column)},i.ArrayCellSet.prototype.getStart=function(e){return"row"==e?this.m_startRow:"column"==e?this.m_startColumn:-1},i.ArrayCellSet.prototype.getCount=function(e){return"row"===e?Math.max(0,this.m_endRow-this.m_startRow):"column"===e?Math.max(0,this.m_endColumn-this.m_startColumn):0},i.ArrayCellSet.prototype.getExtent=function(e){return{row:{extent:1,more:{before:!1,after:!1}},column:{extent:1,more:{before:!1,after:!1}}}},i.ArrayCellSet.prototype.getStartRow=function(){return this.m_startRow},i.ArrayCellSet.prototype.getStartColumn=function(){return this.m_startColumn},i.ArrayDataGridDataSource=function(e,t){if(!(e instanceof Array)&&"function"!=typeof e&&"function"!=typeof e.subscribe)throw"_ERR_DATA_INVALID_TYPE_SUMMARY","_ERR_DATA_INVALID_TYPE_DETAIL",new Error("_ERR_DATA_INVALID_TYPE_SUMMARY\n_ERR_DATA_INVALID_TYPE_DETAIL");this.rowHeaderKey=this._getRowHeaderFromOptions(t),null!=t&&(this.columns=t.columns,this.sortCriteria=t.initialSort),i.ArrayDataGridDataSource.superclass.constructor.call(this,e)},i.Object.createSubclass(i.ArrayDataGridDataSource,i.DataGridDataSource,"oj.ArrayDataGridDataSource"),i.ArrayDataGridDataSource.prototype.Init=function(){null==this.columns&&(this.columns=this._getColumnsForScaffolding(this.getDataArray())),this._initializeRowKeys(),"function"==typeof this.data&&this.data.subscribe(this._subscribe.bind(this),null,"arrayChange"),i.ArrayDataGridDataSource.superclass.Init.call(this)},i.ArrayDataGridDataSource.prototype.comparator=null,i.ArrayDataGridDataSource.prototype.sortCriteria=null,i.ArrayDataGridDataSource.prototype._getRowHeaderFromOptions=function(e){if(null!=e&&null!=e.rowHeader){var t=e.rowHeader;if("object"==typeof t){if(null!=t.default){if("none"==t.default)return;if("index"==t.default)return"m_defaultIndex"}}else if(null!=t)return t}return"m_defaultIndex"},i.ArrayDataGridDataSource.prototype._initializeRowKeys=function(){var e;for(e=this.getDataArray(),this.lastKey=0;this.lastKey<e.length;this.lastKey+=1)e[this.lastKey].ojKey=this.lastKey.toString()},i.ArrayDataGridDataSource.prototype._getColumnsForScaffolding=function(e){var t,i;if("number"!=typeof e.length||0===e.length)return[];for(t in i=[],e[0])e[0].hasOwnProperty(t)&&(null!=this.rowHeaderKey&&t==this.rowHeaderKey||i.push(t));return i},i.ArrayDataGridDataSource.prototype.getCount=function(e){return"row"===e?this._size():"column"===e?this.columns.length:0},i.ArrayDataGridDataSource.prototype.getCountPrecision=function(e){return"exact"},i.ArrayDataGridDataSource.prototype._getHeaderData=function(e,t){return"row"===e?null==this.rowHeaderKey?null:"m_defaultIndex"==this.rowHeaderKey?this._getRowKeyByIndex(t):this.getDataArray()[t][this.rowHeaderKey]:"column"===e?this.columns[t]:void 0},i.ArrayDataGridDataSource.prototype._getHeaderMetadata=function(e,t){var i;return"row"===e?{key:this._getRowKeyByIndex(t)}:"column"===e?(i=this._getHeaderData(e,t),null!=this.sortCriteria&&this.sortCriteria.key===i?{key:this._getHeaderData(e,t),sortDirection:this.sortCriteria.direction}:{key:i}):void 0},i.ArrayDataGridDataSource.prototype.fetchHeaders=function(e,t,n){var o,s,r,a,l,u;o=e.axis,s=e.start,r=e.count,s=Math.max(0,s),"column"===o?a=Math.min(this.columns.length,s+r):(u=this.getDataArray(),a=void 0===this.rowHeaderKey?s:Math.min(u.length,s+r)),l=new i.ArrayHeaderSet(s,a,o,this),null!=t&&null!=t.success&&(null==n&&(n={}),t.success.call(n.success,l,e,null))},i.ArrayDataGridDataSource.prototype._getCellData=function(e,t){var i=this.columns[t];return this.getDataArray()[e][i]},i.ArrayDataGridDataSource.prototype._setCellData=function(e,t,i){this.getDataArray()[e][this.columns[t]]=i},i.ArrayDataGridDataSource.prototype._getCellMetadata=function(e,t){return{keys:{row:this._getRowKeyByIndex(e),column:this.columns[t]}}},i.ArrayDataGridDataSource.prototype.fetchCells=function(e,t,n){var o,s,r,a,l,u,h;for(o=0;o<e.length;o+=1)"row"===(s=e[o]).axis?(r=s.start,a=Math.min(this._size(),r+s.count)):"column"===s.axis&&(u=s.start,h=Math.min(this.columns.length,u+s.count));void 0!==a&&void 0!==h?(l=new i.ArrayCellSet(r,a,u,h,this),null!=t&&null!=t.success&&(null==n&&(n={}),t.success.call(n.success,l,e))):null!=t&&null!=t.error&&(null==n&&(n={}),t.error.call(n.error))},i.ArrayDataGridDataSource.prototype.keys=function(e){var t=e.row,i=e.column;return new Promise(function(e,n){e({row:this._getRowKeyByIndex(t),column:this.columns[i]})}.bind(this))},i.ArrayDataGridDataSource.prototype.indexes=function(e){var t=e.row,i=e.column;return new Promise(function(e,n){e({row:this._getRowIndexByKey(t),column:this.columns.indexOf(i)})}.bind(this))},i.ArrayDataGridDataSource.prototype.sort=function(e,t,i){var n,o,s,r,a=[],l=[];if(null!=t&&null==i&&(i={}),null==this.origData&&(this._origSortCriteria=this.sortCriteria,this.origData=this.data.slice()),null==e?e=this.sortCriteria:this.sortCriteria=e,null!=e)if(s=e.axis,r=e.key,e.direction,"column"===s)this.getDataArray().sort(this._getComparator()),null!=t&&null!=t.success&&t.success.call(i.success);else if("row"===s){for(o=this._getRowIndexByKey(r),n=0;n<this.columns.length;n+=1)a[n]=this.getDataArray()[o][this.columns[n]];for(a.sort(this._getComparator()),n=0;n<this.columns.length;n+=1)l[n]=this.columns[a.indexOf(this.getDataArray()[o][this.columns[n]])];this.origColumns=this.columns,this.columns=l,null!=t&&null!=t.success&&t.success.call(i.success)}else null!==t&&null!=t.error&&t.error.call(i.error,"Invalid axis value");else this._resetSortOrder(t,i)},i.ArrayDataGridDataSource.prototype._resetSortOrder=function(e,t){null!=this.origData&&(this.data=this.origData,this.sortCriteria=this._origSortCriteria),null!=this.origColumns&&(this.columns=this.origColumns),null!=e&&null!=e.success&&e.success.call(t.success)},i.ArrayDataGridDataSource.prototype.getCapability=function(e){return"sort"===e?"column":"move"===e?"row":null},i.ArrayDataGridDataSource.prototype._getComparator=function(){var e,t,i,n;return null==(e=this.comparator)?(t=this.sortCriteria.key,i=this.sortCriteria.direction,n=this.sortCriteria.axis,this._naturalSort(i,t,n)):e},i.ArrayDataGridDataSource.prototype._naturalSort=function(e,t,i){return"ascending"===e?function(e,n){var o,s;return null!=t&&"column"==i&&(e instanceof Array?(e=e[parseInt(t,10)],n=n[parseInt(t,10)]):(e=e[t],n=n[t])),o=isNaN(e),s=isNaN(n),e instanceof Date&&(e=e.toISOString(),o=!0),n instanceof Date&&(n=n.toISOString(),s=!0),o&&s?e<n?-1:e===n?0:1:o?1:s?-1:e-n}:"descending"===e?function(e,n){var o,s;return null!=t&&"column"==i&&(e instanceof Array?(e=e[parseInt(t,10)],n=n[parseInt(t,10)]):(e=e[t],n=n[t])),o=isNaN(e),s=isNaN(n),e instanceof Date&&(e=e.toISOString(),o=!0),n instanceof Date&&(n=n.toISOString(),s=!0),o&&s?e>n?-1:e===n?0:1:o?-1:s?1:n-e}:void 0},i.ArrayDataGridDataSource.prototype.move=function(e,t,i,n,o){var s,r,a,l;s=this._getRowIndexByKey(e),r=this.data.splice(s,1)[0],this.data instanceof Array&&(l=this._getModelEvent("delete",e,null,s,-1,!0),this.handleEvent("change",l)),null===t?(this.data.push(r),a=this.data.length-1):(a=this._getRowIndexByKey(t),this.data.splice(a,0,r)),this.data instanceof Array&&(l=this._getModelEvent("insert",e,null,a,-1),this.handleEvent("change",l)),null!=this.origData&&(this.origData=this.data.slice())},i.ArrayDataGridDataSource.prototype.moveOK=function(e,t,i){return"valid"},i.ArrayDataGridDataSource.prototype.getDataArray=function(){return"function"==typeof this.data?this.data():this.data},i.ArrayDataGridDataSource.prototype._getRowIndexByKey=function(e){var t,i=this.getDataArray();for(t=0;t<i.length;t++)if(i[t].ojKey===e)return t;return-1},i.ArrayDataGridDataSource.prototype._getRowKeyByIndex=function(e){var t=this.getDataArray();return t[e]?t[e].ojKey:null},i.ArrayDataGridDataSource.prototype._getModelEvent=function(e,t,i,n,o,s){var r={};return r.source=this,r.operation=e,r.keys={row:t,column:i},r.indexes={row:n,column:o},r.silent=s,r},i.ArrayDataGridDataSource.prototype._subscribe=function(e){var t,i,n,o,s,r,a=!1,l=!1,u=[],h=[];for(t=0;t<e.length;t++){if(void 0!==(r=e[t]).moved){l=!0,s=this._getModelEvent("refresh",null,null),this.handleEvent("change",s);break}"added"===r.status&&(a=!0)}if(!l){for(t=0;t<e.length;t++)"deleted"===(r=e[t]).status&&(i=r.value,o=r.index,n=i.ojKey,u.push({row:n,column:-1}),h.push({row:o,column:-1}));for(u.length>0&&(s={source:this,operation:"delete",keys:u,indexes:h,silent:a},this.handleEvent("change",s)),t=0;t<e.length;t++)"added"===(r=e[t]).status&&(i=r.value,o=r.index,null==i.ojKey&&(i.ojKey=this.lastKey.toString(),this.lastKey++),n=i.ojKey,s=this._getModelEvent("insert",n,null,o,-1),this.handleEvent("change",s))}null!=this.origData&&(this.origData=this.data.slice())},i.ArrayDataGridDataSource.prototype._size=function(){return this.getDataArray().length},i.ArrayDataGridDataSource.prototype.getRowHeaderKey=function(){return this.rowHeaderKey},i.ArrayDataGridDataSource.prototype.getColumns=function(){return this.columns},i.ArrayDataGridDataSource.prototype.getData=function(){return this.data},i.ArrayHeaderSet=function(e,t,i,n){this.m_start=e,this.m_end=t,this.m_axis=i,this.m_callback=n},i.ArrayHeaderSet.prototype.getData=function(e,t){return null==this.m_callback?null:(i.Assert.assert(e<=this.m_end&&e>=this.m_start,"index out of bounds"),i.Assert.assert(null==t||0==t,"level out of bounds"),this.m_callback._getHeaderData(this.m_axis,e))},i.ArrayHeaderSet.prototype.getMetadata=function(e,t){return null==this.m_callback?null:(i.Assert.assert(e<=this.m_end&&e>=this.m_start,"index out of bounds"),i.Assert.assert(null==t||0==t,"level out of bounds"),this.m_callback._getHeaderMetadata(this.m_axis,e))},i.ArrayHeaderSet.prototype.getLevelCount=function(){return this.getCount()>0?1:0},i.ArrayHeaderSet.prototype.getExtent=function(e,t){return i.Assert.assert(e<=this.m_end&&e>=this.m_start,"index out of bounds"),i.Assert.assert(null==t||0==t,"level out of bounds"),{extent:1,more:{before:!1,after:!1}}},i.ArrayHeaderSet.prototype.getDepth=function(e,t){return i.Assert.assert(e<=this.m_end&&e>=this.m_start,"index out of bounds"),i.Assert.assert(null==t||0==t,"level out of bounds"),1},i.ArrayHeaderSet.prototype.getLabel=function(){return null},i.ArrayHeaderSet.prototype.getCount=function(){return null==this.m_callback?0:Math.max(0,this.m_end-this.m_start)},i.ArrayHeaderSet.prototype.getStart=function(){return this.m_start},i.ArrayPagingDataSource=function(e){this.data=e,this.current=0,this.Init(),this._setPageSize(10)},i.Object.createSubclass(i.ArrayPagingDataSource,i.DataSource,"oj.ArrayPagingDataSource"),i.ArrayPagingDataSource.prototype.Init=function(){i.ArrayPagingDataSource.superclass.Init.call(this)},i.ArrayPagingDataSource.prototype._getSize=function(){return this._hasMore()?this.currentPageSize:this.totalSize()-this.current},i.ArrayPagingDataSource.prototype._refreshDataWindow=function(e){e=e||{},this.dataWindow=new Array(this._getSize());for(var t=0;t<this.dataWindow.length;t++)this.dataWindow[t]=this.data[this.current+t];this._refreshObservableDataWindow(),this._endIndex=this._startIndex+this.dataWindow.length-1,e.silent||this.handleEvent("sync",{data:this.dataWindow,startIndex:this.current})},i.ArrayPagingDataSource.prototype._refreshObservableDataWindow=function(){if(void 0!==this.observableDataWindow){this.observableDataWindow.removeAll();for(var e=0;e<this.dataWindow.length;e++)this.observableDataWindow.push(this.dataWindow[e])}},i.ArrayPagingDataSource.prototype.handleEvent=function(e,t){return i.ArrayPagingDataSource.superclass.handleEvent.call(this,e,t)},i.ArrayPagingDataSource.prototype.getWindow=function(){return this.dataWindow},i.ArrayPagingDataSource.prototype.getWindowObservable=function(){return void 0===this.observableDataWindow&&(this.observableDataWindow=ko.observableArray(),this._refreshObservableDataWindow()),this.observableDataWindow},i.ArrayPagingDataSource.prototype.getPage=function(){return this._page},i.ArrayPagingDataSource.prototype.setPage=function(e,t){t=t||{},e=parseInt(e,10);try{i.ArrayPagingDataSource.superclass.handleEvent.call(this,i.PagingModel.EventType.BEFOREPAGE,{page:e,previousPage:this._page})}catch(e){return Promise.reject(null)}this.pageSize=null!=t.pageSize?t.pageSize:this.pageSize,t.startIndex=e*this.pageSize;var n=this._page;this._page=e,this._startIndex=t.startIndex;var o=this;return new Promise(function(e,s){o._fetchInternal(t).then(function(t){i.ArrayPagingDataSource.superclass.handleEvent.call(o,i.PagingModel.EventType.PAGE,{page:o._page,previousPage:n}),e(null)},function(e){o._page=n,o._startIndex=o._page*o.pageSize,s(null)})})},i.ArrayPagingDataSource.prototype.getStartItemIndex=function(){return this._startIndex},i.ArrayPagingDataSource.prototype.getEndItemIndex=function(){return this._endIndex},i.ArrayPagingDataSource.prototype.getPageCount=function(){var e=this.totalSize();return-1==e?-1:Math.ceil(e/this.pageSize)},i.ArrayPagingDataSource.prototype.fetch=function(e){var t=e||{};if(void 0!==t.pageSize&&void 0!==t.startIndex){if(!this._hasMore())return Promise.resolve();this.currentPageSize=t.startIndex+t.pageSize}return this._refreshDataWindow(null),Promise.resolve()},i.ArrayPagingDataSource.prototype._fetchInternal=function(e){var t=e||{};return void 0!==t.startIndex&&(this.current=t.startIndex),void 0!==t.pageSize&&(this.pageSize=t.pageSize,this.currentPageSize=t.pageSize),this._refreshDataWindow(e),Promise.resolve({data:this.dataWindow,startIndex:this.current})},i.ArrayPagingDataSource.prototype._hasMore=function(){return this.current+this.currentPageSize<this.totalSize()},i.ArrayPagingDataSource.prototype._setPageSize=function(e){this.pageSize=e,this.currentPageSize=e,this._refreshDataWindow(null)},i.ArrayPagingDataSource.prototype.totalSize=function(){return this.data.length},i.ArrayPagingDataSource.prototype.totalSizeConfidence=function(){return"actual"},i.ArrayPagingDataSource.prototype.getCapability=function(e){return null},i.ArrayTableDataSource=function(e,t){if(this.data=e||{},!(e instanceof Array)&&"function"!=typeof e&&"function"!=typeof e.subscribe){var n=i.TableDataSource._LOGGER_MSG._ERR_DATA_INVALID_TYPE_SUMMARY,o=i.TableDataSource._LOGGER_MSG._ERR_DATA_INVALID_TYPE_DETAIL;throw new Error(n+"\n"+o)}null!=t&&null!=t.idAttribute||i.Logger.info(i.ArrayTableDataSource._LOGGER_MSG._INFO_ARRAY_TABLE_DATASOURCE_IDATTR),i.ArrayTableDataSource.superclass.constructor.call(this,e,t),this._eventHandlers=[],this._rows={},null!=e&&void 0!==e&&(this._idAttribute=null,null!=t&&null!=t.idAttribute&&(this._idAttribute=t.idAttribute),this._data=e instanceof Array?e:e(),this._totalSize=this._data.length,this._subscribeObservableArray(e)),(null==t||"enabled"!=t.startFetch&&null!=t.startFetch)&&null!=t||(this._startFetchEnabled=!0)},i.Object.createSubclass(i.ArrayTableDataSource,i.TableDataSource,"oj.ArrayTableDataSource"),i.ArrayTableDataSource.prototype.comparator=null,i.ArrayTableDataSource.prototype.sortCriteria=null,i.ArrayTableDataSource.prototype.Init=function(){i.ArrayTableDataSource.superclass.Init.call(this)},i.ArrayTableDataSource.prototype.add=function(e,t){t=t||{},this._checkDataLoaded();var i=t.at;return this._addToRowSet(e,i,t)},i.ArrayTableDataSource.prototype.at=function(e,t){var i;return this._checkDataLoaded(),i=e<0||e>=this._rows.data.length?null:{data:this._rows.data[e],index:e,key:this._getId(this._rows.data[e])},new Promise(function(e,t){e(i)})},i.ArrayTableDataSource.prototype.change=function(e,t){t=t||{},this._checkDataLoaded();var n,o,s,r,a=t.silent,l={data:[],keys:[],indexes:[]};for(e instanceof Array||(e=[e]),n=0;n<e.length;n++)null!=(o=e[n])&&(s=this._getId(o),r=this._getInternal(s,!1),l.data.push(this._wrapWritableValue(o)),l.keys.push(s),l.indexes.push(r.index),this._rows.data[r.index]=o);return!a&&l.data.length>0&&i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.CHANGE,l),Promise.resolve(l)},i.ArrayTableDataSource.prototype.fetch=function(e){return"init"!=(e=e||{}).fetchType||this._startFetchEnabled?this._fetchInternal(e):Promise.resolve()},i.ArrayTableDataSource.prototype.get=function(e,t){return t=t||{},this._checkDataLoaded(),Promise.resolve(this._getInternal(e,!0))},i.ArrayTableDataSource.prototype.getCapability=function(e){return"full"},i.ArrayTableDataSource.prototype.remove=function(e,t){return t=t||{},this._checkDataLoaded(),this._removeInternal(e,t)},i.ArrayTableDataSource.prototype.reset=function(e,t){(t=t||{}).previousRows=this._rows;var n=t.silent;return null!=e&&(this._data=e,this._subscribeObservableArray(e),this.data=e),this._rows={},this._totalSize=0,n||i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.RESET,null),Promise.resolve()},i.ArrayTableDataSource.prototype.sort=function(e){null==e?e=this.sortCriteria:this.sortCriteria=e,this._checkDataLoaded();var t=this;return new Promise(function(n,o){e=e||{};var s=t._getComparator();t._rows.data.sort(function(e,n){return i.ArrayTableDataSource._sortFunc(e,n,s,t)}),t._sorted=!0;var r={header:e.key,direction:e.direction};i.TableDataSource.superclass.handleEvent.call(t,i.TableDataSource.EventType.SORT,r),n(r)})},i.ArrayTableDataSource.prototype.totalSize=function(){return this._totalSize},i.ArrayTableDataSource.prototype._addToRowSet=function(e,t,n){var o,s,r,a,l=(n=n||{}).silent,u={data:[],keys:[],indexes:[]};for(e instanceof Array||(e=[e]),null==t||t instanceof Array||(t=[t]),o=0;o<e.length;o++)if(null!=(r=e[o])){if(a=this._getId(r),u.data.push(this._wrapWritableValue(r)),u.keys.push(a),1==this._sorted&&this._rows.data.length>0){for(s=0;s<this._rows.data.length;s++){if(i.ArrayTableDataSource._sortFunc(r,this._rows.data[s],this._getComparator(),this)<0){this._rows.data.splice(s,0,r),u.indexes.push(s);break}if(s==this._rows.data.length-1){this._rows.data.push(r),u.indexes.push(s+1);break}}}else null==t?(this._rows.data.push(r),u.indexes.push(this._rows.data.length-1)):(this._rows.data.splice(t[o],0,r),u.indexes.push(t[o]));this._totalSize++,this._realignRowIndices()}return!l&&u.data.length>0&&i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.ADD,u),Promise.resolve(u)},i.ArrayTableDataSource.prototype._checkDataLoaded=function(){this._isDataLoaded()||(this.data instanceof Array||"function"!=typeof this.data||"function"!=typeof this.data.subscribe||(this._data=this.data()),this._rows=this._getRowArray(this._data),this._totalSize=this._data.length)},i.ArrayTableDataSource.prototype._isDataLoaded=function(){return null!=this._rows&&null!=this._rows.data},i.ArrayTableDataSource.prototype._fetchInternal=function(e){var t;e=e||{},this._startFetch(e),this._checkDataLoaded();try{t=e.pageSize>0?e.pageSize:-1,this._startIndex||(this._startIndex=0),this._startIndex=null==e.startIndex?this._startIndex:e.startIndex;var n,o,s,r=i.ArrayTableDataSource._getEndIndex(this._rows,this._startIndex,t),a=[],l=[];for(n=this._startIndex;n<=r;n++)o=this._getId(this._rows.data[n]),s=this._wrapWritableValue(this._rows.data[n]),a[n-this._startIndex]=s,l[n-this._startIndex]=o}catch(t){return this._endFetch(e,null,t),Promise.reject(t)}r<this._startIndex&&(this._startIndex=r+1),e.pageSize=t,e.startIndex=this._startIndex,e.refresh=!0;var u={data:a,keys:l,startIndex:this._startIndex};return this._endFetch(e,u,null),Promise.resolve(u)},i.ArrayTableDataSource.prototype._getInternal=function(e,t){var i,n,o,s,r=null;for(i=0;i<this._rows.data.length;i++)if(void 0!==(o=this._rows.data[i]))if(s=this._getId(o),$.isArray(s)&&$.isArray(e)){if(s.length==e.length){var a=!0;for(n=0;n<e.length;n++)if(s[n]!=e[n]){a=!1;break}if(a){r=t?{data:this._wrapWritableValue(o),key:s,index:this._rows.indexes[i]}:{data:o,key:s,index:this._rows.indexes[i]};break}}}else if(s==e){r=t?{data:this._wrapWritableValue(o),key:s,index:this._rows.indexes[i]}:{data:o,key:s,index:this._rows.indexes[i]};break}return r},i.ArrayTableDataSource.prototype._getComparator=function(){var e=this.comparator;if(null==e){var t=this.sortCriteria.key,i=this.sortCriteria.direction;"ascending"==i?e=function(e){return $.isFunction(e[t])?e[t]():e[t]}:"descending"==i&&(e=function(e,i){var n,o;return $.isFunction(e[t])?(n=e[t](),o=i[t]()):(n=e[t],o=i[t]),n===o?0:n>o?-1:1})}return e},i.ArrayTableDataSource.prototype._realignRowIndices=function(){for(var e=0;e<this._rows.data.length;e++)this._rows.indexes[e]=e},i.ArrayTableDataSource.prototype._removeInternal=function(e,t){var n,o,s,r,a=(t=t||{}).silent,l={data:[],keys:[],indexes:[]};e instanceof Array||(e=[e]);var u=[];for(n=0;n<e.length;n++)null!=(o=e[n])&&(s=this._getId(o),null!=(r=this._getInternal(s,!1))&&u.push({data:r.data,key:r.key,index:r.index}));for(u.sort(function(e,t){return e.index-t.index}),n=0;n<u.length;n++)l.data.push(u[n].data),l.keys.push(u[n].key),l.indexes.push(u[n].index);for(n=l.indexes.length-1;n>=0;n--)this._rows.data.splice(l.indexes[n],1),this._rows.indexes.splice(l.indexes[n],1),this._totalSize--;return this._realignRowIndices(),!a&&l.data.length>0&&i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.REMOVE,l),Promise.resolve(l)},i.ArrayTableDataSource.prototype._setRow=function(e,t){this._rows[e]=t,t.index=e},i.ArrayTableDataSource.prototype._startFetch=function(e){e.silent||i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.REQUEST,{startIndex:e.startIndex})},i.ArrayTableDataSource.prototype._endFetch=function(e,t,n){null!=n?i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.ERROR,n):e.silent||i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.SYNC,t)},i.ArrayTableDataSource.prototype._handleRowChange=function(e){e.startIndex=this._startIndex,i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.CHANGE,e)},i.ArrayTableDataSource._compareKeys=function(e,t,i){if("descending"==i){if(e<t)return 1;if(t<e)return-1}else{if(e>t)return 1;if(t>e)return-1}return 0},i.ArrayTableDataSource._getEndIndex=function(e,t,i){var n=e.data.length-1;return i>0&&(n=(n=t+i-1)>e.data.length-1?e.data.length-1:n),n},i.ArrayTableDataSource._getKey=function(e,t){return"function"==typeof e[t]?e[t]():e[t]},i.ArrayTableDataSource.prototype._getRowArray=function(e){var t,i,n=e.length-1,o={};for(o.data=[],o.indexes=[],this._attributes=null,t=0;t<=n;t++){var s={},r=e[t];for(i in r)r.hasOwnProperty(i)&&(s[i]=r[i],0==t&&(null==this._attributes&&(this._attributes=[]),this._attributes.push(i)));o.data[t]=s,o.indexes[t]=t}return o},i.ArrayTableDataSource.prototype._getId=function(e){var t,n=this._getIdAttr(e);if($.isArray(n)){var o;for(t=[],o=0;o<n.length;o++){if(!(n[o]in e)){var s=i.Translations.applyParameters(i.ArrayTableDataSource._LOGGER_MSG._ERR_ARRAY_TABLE_DATASOURCE_IDATTR_NOT_IN_ROW,[n[o]]);throw new Error(s)}t[o]=i.ArrayTableDataSource._getKey(e,n[o])}}else{if(!(n in e)){s=i.Translations.applyParameters(i.ArrayTableDataSource._LOGGER_MSG._ERR_ARRAY_TABLE_DATASOURCE_IDATTR_NOT_IN_ROW,[n]);throw new Error(s)}t=i.ArrayTableDataSource._getKey(e,n)}return t},i.ArrayTableDataSource.prototype._getIdAttr=function(e){if(null!=this._idAttribute)return this._idAttribute;var t;if(null==this._attributes)for(t in this._attributes=[],e)e.hasOwnProperty(t)&&this._attributes.push(t);return this._attributes.hasOwnProperty("id")?"id":this._attributes},i.ArrayTableDataSource._sortFunc=function(e,t,n,o){var s,r,a,l,u=o.sortCriteria.direction;if($.isFunction(n)){if(1===n.length){s=n.call(o,e),r=n.call(o,t);var h=i.StringUtils.isString(s)?s.split(","):[s],d=i.StringUtils.isString(r)?r.split(","):[r];for(a=0;a<h.length;a++)if(0!==(l=i.ArrayTableDataSource._compareKeys(h[a],d[a],u)))return l;return 0}return n.call(o,e,t)}if(i.StringUtils.isString(n)){var c=n.split(",");for(a=0;a<c.length;a++)if(s=i.ArrayTableDataSource._getKey(e,c[a]),r=i.ArrayTableDataSource._getKey(t,c[a]),0!==(l=i.ArrayTableDataSource._compareKeys(s,r,u)))return l}return 0},i.ArrayTableDataSource.prototype._subscribeObservableArray=function(e){if(!(e instanceof Array)){var t=this;e.subscribe(function(e){if(t._isDataLoaded()){var i,n=[],o=[];for(i=0;i<e.length;i++)"deleted"===e[i].status&&n.push(e[i].value);for(t.remove(n,null),n=[],o=[],i=0;i<e.length;i++)"added"===e[i].status&&(n.push(e[i].value),o.push(e[i].index));t.add(n,{at:o})}},null,"arrayChange")}},i.ArrayTableDataSource.prototype._wrapWritableValue=function(e){var t,n={},o=Object.keys(e);for(t=0;t<o.length;t++)i.ArrayTableDataSource._defineProperty(n,e,o[t]);return n},i.ArrayTableDataSource._defineProperty=function(e,t,i){Object.defineProperty(e,i,{get:function(){return t[i]},set:function(e){t[i]=e},enumerable:!0})},i.ArrayTableDataSource._LOGGER_MSG={_INFO_ARRAY_TABLE_DATASOURCE_IDATTR:"idAttribute option has not been specified. Will default to using 'id' if the field exists. If not, will use all the fields.",_ERR_ARRAY_TABLE_DATASOURCE_IDATTR_NOT_IN_ROW:"Specified idAttribute {0} not in row data. Please ensure all specified idAttribute fields are in the row data or do not specify idAttribute and all fields will be used as id."};var _t,mt,gt,ft=function(){function e(e,t,n){this.treeData=e,this.options=t,this._rootDataProvider=n,this.TreeAsyncIterator=function(){function e(e,t){this._parent=e,this._baseIterable=t}return e.prototype.next=function(){var e=this;return this._baseIterable[Symbol.asyncIterator]().next().then(function(t){for(var i=t.value.metadata,n=0;n<i.length;n++)i[n]=e._parent._getNodeMetadata(t.value.data[n]);return t})},e}(),this.TreeAsyncIterable=function(){return function(e,t){this._parent=e,this._asyncIterator=t,this[Symbol.asyncIterator]=function(){return this._asyncIterator}}}(),this._baseDataProvider=new i.ArrayDataProvider(e,t),this._mapKeyToNode=new Map,this._mapNodeToKey=new Map,this._nodeSequenceNum=0,null==n&&this._subscribeObservableArray(e,[])}return e.prototype.containsKeys=function(e){return this.fetchByKeys(e).then(function(t){var i=new Set;return e.keys.forEach(function(e){null!=t.results.get(e)&&i.add(e)}),Promise.resolve({containsParameters:e,results:i})})},e.prototype.getCapability=function(e){return this._baseDataProvider.getCapability(e)},e.prototype.getTotalSize=function(){return this._baseDataProvider.getTotalSize()},e.prototype.isEmpty=function(){return this._baseDataProvider.isEmpty()},e.prototype.getChildDataProvider=function(t,i){var n=this._getNodeForKey(t);if(n){var o=this._getChildren(n);if(o)return new e(o,this.options,this._getRootDataProvider())}return null},e.prototype.fetchFirst=function(e){var t=this._baseDataProvider.fetchFirst(e);return new this.TreeAsyncIterable(this,new this.TreeAsyncIterator(this,t))},e.prototype.fetchByOffset=function(e){var t=this._baseDataProvider.fetchByOffset(e),i=this;return t.then(function(e){for(var t=e.results,n=[],o=0;o<t.length;o++){var s=t[o].metadata,r=t[o].data;s=i._getNodeMetadata(r),n.push({data:r,metadata:s})}return{done:e.done,fetchParameters:e.fetchParameters,results:n}})},e.prototype.fetchByKeys=function(e){var t=this,i=new Map;return e.keys.forEach(function(e){var n=t._getNodeForKey(e);n&&i.set(e,{metadata:{key:e},data:n})}),Promise.resolve({fetchParameters:e,results:i})},e.prototype._getChildren=function(e){var t=this.options&&this.options.childrenAttribute?this.options.childrenAttribute:"children";return this._getVal(e,t)},e.prototype._getRootDataProvider=function(){return this._rootDataProvider?this._rootDataProvider:this},e.prototype._handleArrayChange=function(e,t,n){var o,s=this,r=[],a=[],l=[],u=[],h=!1,d=!1,c=!1;for(o=0;o<e.length;o++)if("deleted"===e[o].status){h=!0;break}for(o=0;o<e.length;o++)if("added"===e[o].status){d=!0;break}if(d&&h&&(c=!0),h){for(o=0;o<e.length;o++)if("deleted"===e[o].status){var p=e[o].value,_=s._getKeyForNode(p);a.push(_),r.push(p),l.push(e[o].index),s._deleteMapEntry(_,p)}if(a.length>0&&!c){u=a.map(function(e){return{key:e}});var m=new Set;a.map(function(e){m.add(e)});var g={remove:{data:r,indexes:l,keys:m,metadata:u}};s.dispatchEvent(new i.DataProviderMutationEvent(g))}}if(d){var f=t();for(o=0;o<e.length;o++)if("added"===e[o].status){p=e[o].value;var v=s._createKeyObj(p,n,-1);s._setMapEntry(v.key,p),a.push(v.key),r.push(p),l.push(e[o].index)}if(a.length>0&&!c){u=a.map(function(e){return{key:e}});var C=new Set;a.map(function(e){C.add(e)});var y=new Set;l.map(function(e){var t;t=e>=f.length-1?"":s._getKeyForNode(f[e+1]),y.add(t)});g={add:{afterKeys:y,data:r,indexes:l,keys:C,metadata:u}};s.dispatchEvent(new i.DataProviderMutationEvent(g))}c&&s.dispatchEvent(new i.DataProviderRefreshEvent)}},e.prototype._subscribeObservableArray=function(e,t){var i,n=this;if(e instanceof Array)i=e;else{if(!ko.isObservable(e)||void 0===e.destroyAll)throw new Error("Invalid data type. ArrayTreeDataProvider only supports Array or observableArray.");e.subscribe(function(i){n._handleArrayChange(i,e,t)},null,"arrayChange"),i=e()}i.forEach(function(e,i){var o=n._createKeyObj(e,t,i);n._setMapEntry(o.key,e),++n._nodeSequenceNum;var s=n._getChildren(e);s&&n._subscribeObservableArray(s,o.keyPath)})},e.prototype._createKeyObj=function(e,t,i){var n=this._getId(e),o=t?t.slice():[];return null==n?(o.push(i>=0?i:this._nodeSequenceNum++),n=o):(o.push(n),this.options&&"siblings"==this.options.keyAttributesScope&&(n=o)),{key:n,keyPath:o}},e.prototype._getId=function(e){var t,i=null!=this.options?this.options.keyAttributes:null;if(null!=i){var n;if(Array.isArray(i))for(t=[],n=0;n<i.length;n++)t[n]=this._getVal(e,i[n]);else t="@value"==i?this._getAllVals(e):this._getVal(e,i);return t}return null},e.prototype._getVal=function(e,t){if("string"==typeof t){var i=t.indexOf(".");if(i>0){var n=t.substring(0,i),o=t.substring(i+1),s=e[n];if(s)return this._getVal(s,o)}}return"function"==typeof e[t]?e[t]():e[t]},e.prototype._getAllVals=function(e){var t=this;return Object.keys(e).map(function(i){return t._getVal(e,i)})},e.prototype._getNodeMetadata=function(e){return{key:this._getKeyForNode(e)}},e.prototype._getNodeForKey=function(e){return this._getRootDataProvider()._mapKeyToNode.get(e)},e.prototype._getKeyForNode=function(e){return this._getRootDataProvider()._mapNodeToKey.get(e)},e.prototype._setMapEntry=function(e,t){var i=this._getRootDataProvider();i._mapKeyToNode.set(e,t),i._mapNodeToKey.set(t,e)},e.prototype._deleteMapEntry=function(e,t){var i=this._getRootDataProvider();i._mapKeyToNode.delete(e),i._mapNodeToKey.delete(t)},e}();i.ArrayTreeDataProvider=ft,i.ArrayTreeDataProvider=ft,i.EventTargetMixin.applyMixin(ft),function(){var e,t;i.__registerWidget("oj.ojButton",$.oj.baseComponent,{defaultElement:"<button>",widgetEventPrefix:"oj",options:{chroming:"full",disabled:!1,display:"all",label:null,icons:{start:null,end:null},menu:null,action:null},_InitOptions:function(e,t){this._super(e,t),this._IsCustomElement()&&this._processSlots(),this._initButtonTypes(),"disabled"in t||this.option("disabled",!!this.element.prop("disabled"),{_context:{internalSet:!0}}),"label"in t||(this.keepDomLabel=!0,this.option("label","inputPush"===this.type?this.buttonElement.val():this.buttonElement.html(),{_context:{internalSet:!0}})),this._IsCustomElement()||!this.options.menu||t.icons&&void 0!==t.icons.end||this.option("icons.end","oj-component-icon oj-button-menu-dropdown-icon",{_context:{writeback:!0,internalSet:!0}})},_ComponentCreate:function(){this._super(),this.menuEventNamespace=this.eventNamespace+"menu",this._initButtonTypes2(),this.hasTitle=!!this.rootElement.attr("title");var o=this,s=(this.options,this._isToggle),r=s?"":"oj-active";this.rootElement.addClass(n),l(this.rootElement,this.options.chroming);var a=function(){o.rootElement.removeClass(r),o.rootElement.removeClass("oj-hover"),o._toggleDefaultClasses()};if(this.buttonElement.bind("touchstart"+this.eventNamespace,function(){o._IsEffectivelyDisabled()||(o.rootElement.addClass(r),o._toggleDefaultClasses(),o.document.one("touchend",a))}).bind("touchend"+this.eventNamespace+" touchcancel"+this.eventNamespace,a).bind("mouseenter"+this.eventNamespace,function(){o._IsEffectivelyDisabled()||i.DomUtils.recentTouchEnd()||(this===e&&o.rootElement.addClass("oj-active"),o.rootElement.addClass("oj-hover").removeClass("oj-default oj-focus-only"))}).bind("mouseleave"+this.eventNamespace,function(){o.rootElement.removeClass("oj-hover"),o._IsEffectivelyDisabled()||(o.rootElement.removeClass(r),o._toggleDefaultClasses())}),this._disabledClickHandler=function(e){o._IsEffectivelyDisabled()&&(e.preventDefault(),e.stopImmediatePropagation())},this._ojActionClickHandler=function(e){o._trigger("action",e,{})},this._IsCustomElement()?(this.rootElement[0].addEventListener("click",this._disabledClickHandler,!0),this.rootElement[0].addEventListener("click",this._ojActionClickHandler,!1)):this.buttonElement[0].addEventListener("click",this._disabledClickHandler,!0),this._focusable({element:this.rootElement,applyHighlight:!0,afterToggle:function(){o._toggleDefaultClasses()}}),s&&(this.element.bind("change"+this.eventNamespace,function(e){o._applyCheckedStateFromDom(!0);var t=o._getEnclosingContainerComponent("buttonset"),i=t&&t._getCheckedFromDom(t.$buttons);t&&void 0!==i&&t.option("checked",i,{_context:{writeback:!0,originalEvent:e,internalSet:!0}})}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){o._IsEffectivelyDisabled()||(t=this,o.document.one("mouseup",function(){t=null}))}).bind("mouseup"+this.eventNamespace,function(e){o._IsEffectivelyDisabled()||this===t&&o.element.focus()})),"checkbox"===this.type)this.buttonElement.bind("click"+this.eventNamespace,function(e){if(o._IsEffectivelyDisabled())return!1}),this.element.bind("keyup"+this.eventNamespace,function(e){e.keyCode===$.ui.keyCode.ENTER&&(o._IsEffectivelyDisabled()||o.element.click())});else if("radio"===this.type)this.buttonElement.bind("click"+this.eventNamespace,function(){if(o._IsEffectivelyDisabled())return!1}),this.element.bind("keyup"+this.eventNamespace,function(e){e.keyCode===$.ui.keyCode.ENTER&&(o.element[0].checked||o._IsEffectivelyDisabled()||(o.element[0].checked=!0,o.element.change(),o.element.click()))});else if(this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){if(o._IsEffectivelyDisabled())return!1;1!==t.which||i.DomUtils.recentTouchEnd()||(o.rootElement.addClass("oj-active").removeClass("oj-default oj-focus-only"),e=this,o.document.one("mouseup",function(){e=null}))}).bind("mouseup"+this.eventNamespace,function(){if(o._IsEffectivelyDisabled())return!1;o.rootElement.removeClass("oj-active"),o._toggleDefaultClasses()}).bind("keydown"+this.eventNamespace,function(e){if(o._IsEffectivelyDisabled())return e.keyCode===$.ui.keyCode.TAB||e.keyCode===$.ui.keyCode.LEFT||e.keyCode===$.ui.keyCode.RIGHT;var t=e.keyCode===$.ui.keyCode.SPACE,i="anchor"===o.type;i&&t&&e.preventDefault(),(t&&!i||e.keyCode===$.ui.keyCode.ENTER)&&o.rootElement.addClass("oj-active").removeClass("oj-default oj-focus-only")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){o.rootElement.removeClass("oj-active"),o._toggleDefaultClasses()}),"anchor"===this.type){var u=this.buttonElement.attr("tabindex");(null===u||isNaN(u))&&this.buttonElement.attr("tabindex","0")}this.options.disabled&&this._manageAnchorTabIndex(!1,!0),this._updateEffectivelyDisabled();var h=o._getEnclosingContainerComponent("buttonset");this._IsCustomElement()||h&&h._IsCustomElement()?this._setDisplayOptionOnDom():this._handleLabelAndIconsAtCreateTime(),this._setupMenuButton(null),this._toggleDefaultClasses()},_NotifyContextMenuGesture:function(e,t,i){this._OpenContextMenu(t,i,{position:{of:"keyboard"===i?this.rootElement:t}})},_processSlots:function(){var e=this,t=this.element[0],n=t.parentNode,o="OJ-MENU-BUTTON"===n.tagName,s=i.BaseCustomElementBridge.getSlotMap(n);if(o)var r=["startIcon","","endIcon","menu"];else r=["startIcon","","endIcon"];$.each(r,function(e,i){s[i]&&""!=i&&$.each(s[i],function(e,i){t.appendChild(i)})}),$(n).children().not(t).not("[slot='contextMenu']").remove();var a=i.BaseCustomElementBridge.getSlotMap(t);$.each(r,function(i,n){a[n]&&$.each(a[n],function(i,o){if(t.appendChild(o),""===n){var s=o,r=s;3===s.nodeType&&(r=document.createElement("span"),$(s).replaceWith(r),r.appendChild(s)),$(r).addClass("oj-button-text"),e._setTextSpanIdAndLabelledBy($(r))}else if("startIcon"===n)$(o).addClass("oj-button-icon"),$(o).addClass("oj-start");else if("endIcon"===n)$(o).addClass("oj-button-icon"),$(o).addClass("oj-end");else if("menu"===n&&($(o).uniqueId(),e.menuSlot="#"+o.id,void 0===a.endIcon)){var l=document.createElement("span");l.className="oj-button-icon oj-end oj-component-icon oj-button-menu-dropdown-icon",l.slot="endIcon",t.insertBefore(l,o)}})});var l=$("<div>");l.addClass("oj-button-label"),$(t).children().wrapAll(l)},_getMenuNode:function(){return this._IsCustomElement()?this.menuSlot:this.options.menu},_initButtonTypes:function(){if(this.element.is("input[type=checkbox]"))this.type="checkbox",this._isToggle=!0;else if(this.element.is("input[type=radio]"))this.type="radio",this._isToggle=!0;else if(this.element.is("input[type=button],input[type=submit],input[type=reset]"))this.type="inputPush";else if(this.element.is("button"))this.type="button";else{if(!this.element.is("a"))throw new Error("JET Button not supported on this element type");this.type="anchor"}if(this._isToggle){var e="label[for='"+this.element.attr("id")+"']";this.buttonElement=this.element.siblings().filter(e)}else this.buttonElement=this.element},_initButtonTypes2:function(){this._isToggle?(this.buttonElement.addClass("oj-button-label"),this.element.addClass("oj-button-input oj-helper-hidden-accessible").attr("data-oj-internal","").add(this.buttonElement).wrapAll("<span></span>"),this.rootElement=this.element.parent(),this.rootElement.addClass("oj-button-jqui oj-button-toggle"),this.element[0].checked&&this.rootElement.addClass("oj-selected").removeClass("oj-default oj-focus-only")):this._IsCustomElement()?(this.rootElement=this.element.parent(),this.element.addClass("oj-button-button")):(this.rootElement=this.element,this.element.addClass("oj-button-jqui"))},widget:function(){return this.rootElement},_destroy:function(){this._removeMenuBehavior(this._getMenuNode()),this.buttonElement[0].removeEventListener("click",this._disabledClickHandler,!0),this.buttonElement[0].removeEventListener("click",this._ojActionClickHandler,!1),this.element.removeClass("oj-helper-hidden-accessible").removeAttr("aria-labelledby").removeUniqueId(),this.options.disabled&&this._manageAnchorTabIndex(!0,!1);var e=this._isToggle;e||this.rootElement.removeClass(n+" oj-button-jqui "+o+" "+s+" "+r),this.buttonElement.html(this.buttonElement.find(".oj-button-text").html()),e?(this.buttonElement.removeClass("oj-button-label"),i.DomUtils.unwrap(this.element)):this.hasTitle||this.rootElement.removeAttr("title"),t===this.buttonElement[0]&&(t=null)},_NotifyDetached:function(){this._super(),this._toggleDefaultClasses()},__setAncestorComponentDisabled:function(e){this._super(e),this._updateEffectivelyDisabled()},_updateEffectivelyDisabled:function(){var t=this._IsEffectivelyDisabled();this.rootElement.toggleClass("oj-disabled",t),this.rootElement.toggleClass("oj-enabled",!t),"anchor"!==this.type?(this.element.prop("disabled",t),this.rootElement.removeAttr("aria-disabled")):(this.element.attr("aria-disabled",t),this._IsCustomElement()&&this.rootElement.removeAttr("aria-disabled")),t?(this.widget().removeClass("oj-active oj-default oj-focus-only oj-hover oj-focus oj-focus-highlight"),e=null,this._dismissMenu(this._getMenuNode())):this._toggleDefaultClasses()},_setOption:function(e,t,i){var n=this.options[e];switch(this._super(e,t,i),e){case"chroming":l(this.rootElement,t);break;case"disabled":this._manageAnchorTabIndex(n,t),this._updateEffectivelyDisabled();break;case"label":this._setLabelOption();break;case"display":"inputPush"!==this.type&&this._setDisplayOptionOnDom();break;case"icons":this._setIconsOption(!0);break;case"menu":this._setupMenuButton(n)}},refresh:function(){this._super(),this._ancestorDisabled&&!this._getEnclosingContainerElement("buttonset").length&&this.__setAncestorComponentDisabled(!1),l(this.rootElement,this.options.chroming)},_applyCheckedStateFromDom:function(e){"radio"===this.type?(e?u(this.element[0]):this.element).each(function(){var e=$(this).data("oj-ojButton");this.checked?e.rootElement.addClass("oj-selected").removeClass("oj-default oj-focus-only"):(e.rootElement.removeClass("oj-selected"),e._toggleDefaultClasses())}):"checkbox"===this.type&&(this.element[0].checked?this.rootElement.addClass("oj-selected").removeClass("oj-default oj-focus-only"):(this.rootElement.removeClass("oj-selected"),this._toggleDefaultClasses()))},_handleLabelAndIconsAtCreateTime:function(){if("inputPush"===this.type)this._setLabelOnDomOfSpanlessButton();else{var e=this._setLabelOnDomAtCreateTime(),t=this._setIconOnDom(!0),i=this._setIconOnDom(!1);this._setDisplayOptionOnDom(e,t,i)}},_setLabelOnDomAtCreateTime:function(){var e=this.buttonElement,t=$("<span class='oj-button-text'></span>",this.document[0]);if(this.keepDomLabel?t.append(e.contents()):(e.empty(),t.text(this.options.label)),"button"===this.type){var i=$("<div></div>").addClass("oj-button-label");i.append(t),this.element.append(i)}else e.append(t);return"button"!==this.type&&"anchor"!==this.type||this.element[0].hasAttribute("aria-label")||this.element[0].hasAttribute("aria-labelledby")||this._setTextSpanIdAndLabelledBy(t),t},_setTextSpanIdAndLabelledBy:function(e){e.uniqueId(),this.element.attr("aria-labelledby",e.attr("id"))},_setLabelOption:function(){if("inputPush"===this.type)this._setLabelOnDomOfSpanlessButton();else{var e=this.buttonElement.find(".oj-button-text");e.text(this.options.label),this._setDisplayOptionOnDom(e)}},_setLabelOnDomOfSpanlessButton:function(){this.options.label&&this.element.val(this.options.label)},_setIconsOption:function(){if("inputPush"!==this.type){var e=this._setIconOnDom(!0),t=this._setIconOnDom(!1);this._setDisplayOptionOnDom(void 0,e,t)}},_setIconOnDom:function(e){var t=this.buttonElement;if("button"===this.type&&(t=this.element.children("div.oj-button-label")),e)var i=".oj-button-icon.oj-start",n="oj-button-icon oj-start",o=this.options.icons.start,s="_lastStartIcon",r="prependTo";else i=".oj-button-icon.oj-end",n="oj-button-icon oj-end",o=this.options.icons.end,s="_lastEndIcon",r="appendTo";var a=t.find(i);if(o){if(a.length){var l=this[s];a.removeClass(l)}else a=$("<span></span>").addClass(n)[r](t);a.addClass(o)}else a.remove();return this[s]=o,!!o},_setDisplayOptionOnDom:function(e,t,i){var n=this.buttonElement.children(".oj-button-label");if(!n.length){var o=this._getEnclosingContainerComponent("buttonset");n=this._IsCustomElement()||o&&o._IsCustomElement()?this.buttonElement.children("oj-option"):this.buttonElement}void 0===e&&(e=n.children(".oj-button-text")),void 0===t&&(t=!!this.options.icons.start||n.children("[slot='startIcon']").length),void 0===i&&(i=!!this.options.icons.end||n.children("[slot='endIcon']").length);var r=t&&i,a=t||i,l="icons"===this.options.display;if(a&&l){if(e.addClass("oj-helper-hidden-accessible"),!this.hasTitle){var u=e.text();this.rootElement.attr("title",$.trim(u))}}else e.removeClass("oj-helper-hidden-accessible"),this.hasTitle||this.rootElement.removeAttr("title");var h=a?l?r?"oj-button-icons-only":"oj-button-icon-only":r?"oj-button-text-icons":t?"oj-button-text-icon-start":"oj-button-text-icon-end":"oj-button-text-only";this.rootElement.removeClass(s).addClass(h)},_manageAnchorTabIndex:function(e,t){if(!e!=!t&&"anchor"===this.type&&!this._getEnclosingContainerElement("buttonset").length&&!this._getEnclosingContainerElement("toolbar").length)if(t){var i=this.element.attr("tabindex");this._oldAnchorTabIndex=this._isInteger(Number(i))?i:null,this.element.attr("tabindex",-1)}else null==this._oldAnchorTabIndex?this.element.removeAttr("tabindex"):this.element.attr("tabindex",this._oldAnchorTabIndex)},_isInteger:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},_selectorMap:{buttonset:".oj-buttonset",toolbar:".oj-toolbar"},_constructorMap:{buttonset:"ojButtonset",toolbar:"ojToolbar"},_getEnclosingContainerElement:function(e){return this.rootElement.closest(this._selectorMap[e])},_getEnclosingContainerComponent:function(e){var t=this._getEnclosingContainerElement(e)[0],n=i.Components.__GetWidgetConstructor(t,this._constructorMap[e]);return n&&n("instance")},_setupMenuButton:function(e){if(this._getMenuNode()&&this.element.is("input"))throw new Error("Menu Button functionality is not supported on input elements.");if(this._removeMenuBehavior(e),this._getMenuNode()){var t=this;this.element.attr("aria-haspopup",!0).on("keydown"+this.menuEventNamespace,function(e){if(e.which===$.ui.keyCode.DOWN)return t._showMenu(e,"firstItem"),e.preventDefault(),!0;if(e.which===$.ui.keyCode.ESCAPE){var i=!t.rootElement.hasClass("oj-selected");return t._dismissMenu(t._getMenuNode(),e),i}return!0}).on("click"+this.menuEventNamespace,function(e){var i=t._getMenu();return i.__spaceEnterDownInMenu||t._showMenu(e,"firstItem"),i.__spaceEnterDownInMenu=!1,e.preventDefault(),!0})}},_removeMenuBehavior:function(e){this.element.removeAttr("aria-haspopup").off(this.menuEventNamespace),this._dismissMenu(e),$(e).off(this.menuEventNamespace),this._menuListenerSet=!1},_getMenu:function(){var e=this._getMenuOnly(this._getMenuNode());if(!e)throw new Error('JET Button: "menu" option specified, but does not reference a valid JET Menu.');if(!this._menuListenerSet){var t=this;if(this._IsCustomElement())i="ojClose";else var i="ojclose";e.widget().on(i+this.menuEventNamespace,function(e,i){t._menuDismissHandler(e)}),this._menuListenerSet=!0}return e},_getMenuOnly:function(e){var t=i.Components.__GetWidgetConstructor($(e)[0],"ojMenu");return t&&t("instance")},_showMenu:function(e,t){if(!this._IsEffectivelyDisabled()){var i=this._getMenu(),n=i.widget();i.open(e,{launcher:this.element,initialFocus:t}),n.is(":visible")&&(this._menuVisible=!0,n.attr("aria-label")||n.attr("aria-labelledby")||(this.element.uniqueId(),this._setAriaLabelledBy=!0,n.attr("aria-labelledby",this.element.attr("id"))),this.rootElement.addClass("oj-selected").removeClass("oj-default oj-focus-only"))}},_dismissMenu:function(e,t){if(this._menuVisible){var i=this._getMenuOnly(e);i&&(i.__collapseAll(t,!0),i.__dismiss(t))}},_menuDismissHandler:function(e){this._setAriaLabelledBy&&($(this._getMenuNode()).removeAttr("aria-labelledby"),this._setAriaLabelledBy=!1),this.rootElement.removeClass("oj-selected"),this._toggleDefaultClasses(),this._menuVisible=!1},_toggleDefaultClasses:function(){var e,t;if(this.rootElement.is(".oj-hover, .oj-active, .oj-selected, .oj-disabled"))e=!1,t=!1;else{var i=this.rootElement.is(".oj-focus");e=!i,t=i}this.rootElement.toggleClass("oj-default",e),this.rootElement.toggleClass("oj-focus-only",t)}}),i.__registerWidget("oj.ojButtonset",$.oj.baseComponent,{_items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a",widgetEventPrefix:"oj",options:{checked:null,chroming:"full",display:"all",focusManagement:"oneTabstop"},_setCheckedOnDom:function(e,t){var i,n=$.type(e);if((i="OJ-BUTTONSET-MANY"===this.element[0].tagName||t.length>0&&t.filter("input[type=checkbox]").length===t.length)&&"array"!=n)throw new Error("Invalid 'checked' value set on JET Buttonset: "+e);if(!i&&t.length>0){var o=t[0].name;(o||t.length<=1)&&(t.filter("input[type=radio][name="+o+"]").length,t.length)}if(!(this._setCheckedOnButtons(e,t,n,i)||null===e||this._IsCustomElement()&&t.length!==this.element.children().length))throw new Error("Invalid 'checked' value set on JET Buttonset: "+e)},_setCheckedOnButtons:function(e,t,i,n){var o=this._shallowCompare(e,t,n);return this._shouldDeepCompare(e,n,o)&&(o=this._deepCompare(e,t,n,o)),n?o===e.length:1===o},_shallowCompare:function(e,t,i){var n=this,o=0;return t.each(function(){var t=n._getInputValue(this);(i?e.indexOf(t)>-1:t===e)?(this.checked=!0,o++):this.checked=!1}),o},_shouldDeepCompare:function(e,t,i){return t?i!==e.length:!i},_deepCompare:function(e,t,i,n){var o=this;return t.each(function(){var t=o._getInputValue(this);if(i)for(var s=0;s<e.length;s++)o._deepCompareValues(t,e[s])&&(this.checked=!0,n++);else o._deepCompareValues(t,e)&&(this.checked=!0,n++)}),n},_deepCompareValues:function(e,t){return"object"==$.type(e)&&e.ojCompareValues?0===e.ojCompareValues(e,t):i.Object.compareValues(e,t)},_getInputValue:function(e){return this._IsCustomElement()?this._getOjOptionFromInput(e).value:e.value},_getOjOptionFromInput:function(e){return $(e).prev().children()[0]},_getCheckedFromDom:function(e){var t=void 0,i=null,n=null,o=this;return e.each(function(e){if("input"!==this.tagName.toLowerCase())return t=void 0,!1;var s,r,a=this.type.toLowerCase();if("radio"===a)s=!0,r=this.name.toLowerCase();else{if("checkbox"!==a)return t=void 0,!1;s=!1,r=null}if(void 0!==t&&(s!==i||r!==n||i&&!n))return t=void 0,!1;var l=o._getInputValue(this);void 0===t?(t=s?this.checked?l:null:this.checked?[l]:[],i=s,n=r):this.checked&&(i?t=l:t.push(l))}),t},_CompareOptionValues:function(e,t,i){return"checked"===e?t===i||"array"===$.type(t)&&"array"===$.type(i)&&this._compareArraysAsSets(t,i):this._superApply(arguments)},_compareArraysAsSets:function(e,t){return!e.some(function(e){return t.indexOf(e)<0})&&!t.some(function(t){return e.indexOf(t)<0})},_removeNonOjOptions:function(){this.element.children(":not(oj-option)").remove()},_processOjOptions:function(){var e=this,t=this.element.find("oj-option");$.each(t,function(t,i){i.customOptionRenderer=e._customOptionRenderer.bind(e)})},_customOptionRenderer:function(e){this._removeOptionDecoration(e),this._addOptionDecoration(e)},_addOptionDecoration:function(e){var t=$(e);this._addOptionClasses(e);var i="OJ-BUTTONSET-ONE"===this.element[0].tagName,n=i?"radio":"checkbox",o=e.value,s=e.disabled,r=$("<input>"),a=$("<label>");r.uniqueId(),r.prop("value",o),r.prop("type",n),r.prop("disabled",s);var l=r[0].id;a.prop("for",l),i&&(this._name||(this._name="_n_"+l),r.prop("name",this._name)),t.before(a),a.append(t),a.after(r),this._setup(!1),this._setCheckedOnDom(this.options.checked,this.$buttons)},_removeOptionDecoration:function(e){var t=$(e).parent();if("LABEL"===t.prop("tagName")){this._removeOptionClasses(e);var i=t.siblings(".oj-button-input");i.ojButton("destroy"),i.removeUniqueId(),i.remove(),t.replaceWith(e)}},_addOptionClasses:function(e){var t=i.BaseCustomElementBridge.getSlotMap(e),n=t[""]?t[""]:null,o=t.startIcon?t.startIcon[0]:null,s=t.endIcon?t.endIcon[0]:null;if(o&&($(o).addClass("oj-button-icon"),$(o).addClass("oj-start")),n)for(var r=0;r<n.length;r++){var a=n[r],l=a;3===a.nodeType&&(l=$("<span>"),$(a).replaceWith(l),l.append(a)),$(l).addClass("oj-button-text")}s&&($(s).addClass("oj-button-icon"),$(s).addClass("oj-end"))},_removeOptionClasses:function(e){var t=i.BaseCustomElementBridge.getSlotMap(e),n=t[""]?t[""]:null,o=t.startIcon?t.startIcon[0]:null,s=t.endIcon?t.endIcon[0]:null;if(o&&($(o).removeClass("oj-button-icon"),$(o).removeClass("oj-start")),n)for(var r=0;r<n.length;r++)$(n[r]).removeClass("oj-button-text");s&&($(s).removeClass("oj-button-icon"),$(s).removeClass("oj-end"))},_InitOptions:function(e,t){if(this._super(e,t),this.$buttons=this.element.find(this._items),!("checked"in t)){this.initCheckedFromDom=!0;var i=this._getCheckedFromDom(this.$buttons);"array"!==$.type(i)&&"OJ-BUTTONSET-MANY"!==this.element[0].tagName||(this.options.checked=[]),void 0!==i&&this.option("checked",i,{_context:{internalSet:!0}})}},_ComponentCreate:function(){this._super(),this.element.attr(i.Components._OJ_CONTAINER_ATTR,this.widgetName).addClass("oj-buttonset oj-component"),this._setRole(this.options.focusManagement),this._IsCustomElement()&&(this._removeNonOjOptions(),this._processOjOptions()),this._setup(!0)},_NotifyContextMenuGesture:function(e,t,i){var n=this.element.find(":oj-button[tabindex=0]");this._OpenContextMenu(t,i,{launcher:n,position:{of:"keyboard"===i?n.ojButton("widget"):t}})},_propagateDisabled:function(e){e=!!e,this.$buttons.each(function(){$(this).data("oj-ojButton").__setAncestorComponentDisabled(e)})},_setRole:function(e){"oneTabstop"===e?this.element.attr("role","toolbar"):this.element.removeAttr("role")},_setOption:function(e,t,i){this._superApply(arguments),"disabled"===e?this._propagateDisabled(t):"checked"===e?(this._setCheckedOnDom(t,this.$buttons),this.$buttons.each(function(){$(this).data("oj-ojButton")._applyCheckedStateFromDom(!1)})):"focusManagement"===e?this._setRole(t):"chroming"===e?(l(this.element,t),this.$buttons.ojButton("refresh")):"display"===e&&this.$buttons.ojButton("option",e,t)},refresh:function(){this._super(),this._IsCustomElement()&&this._processOjOptions(),this._setup(!1)},_setup:function(e){var t=this;this.isRtl="rtl"===this._GetReadingDirection(),l(this.element,this.options.chroming),!e||this.initCheckedFromDom||this._IsCustomElement()||this._setCheckedOnDom(this.options.checked,this.$buttons),e||(this.$buttons=this.element.find(this._items)),this.element.toggleClass("oj-buttonset-multi",this.$buttons.length>1),this.$buttons.filter(":oj-button").ojButton("refresh").each(function(){$(this).data("oj-ojButton")._applyCheckedStateFromDom(!1)}).end().not(":oj-button").ojButton({display:this.options.display}).end().map(function(){return $(this).ojButton("widget")[0]}).removeClass("oj-buttonset-first oj-buttonset-last").filter(":first").addClass("oj-buttonset-first").end().filter(":last").addClass("oj-buttonset-last").end().end(),this._propagateDisabled(this.options.disabled),"oneTabstop"===this.options.focusManagement&&(this.$buttons.unbind("keydown"+this.eventNamespace).bind("keydown"+this.eventNamespace,function(e){t._handleKeyDown(e,$(this))}).unbind("click"+this.eventNamespace).bind("click"+this.eventNamespace,function(e){$(this).data("oj-ojButton")._IsEffectivelyDisabled()||t._setTabStop($(this))}).unbind("focus"+this.eventNamespace).bind("focus"+this.eventNamespace,function(e){t._setTabStop($(this))}),this.$enabledButtons=this.$buttons.filter(function(e){return!$(this).data("oj-ojButton")._IsEffectivelyDisabled()}),this._initTabindexes(e))},_initTabindexes:function(e){var t,i=$(this._lastTabStop);this._lastTabStop=void 0,this.$buttons.attr("tabindex","-1"),t=e||!i.is(this.$enabledButtons)?this.$enabledButtons.first():i,this._setTabStop(t)},_mapToTabbable:function(e){var t=this.$enabledButtons;return e.map(function(e,i){if("radio"!=i.type||i.checked||""==i.name)return i;var n=u(i,t).filter(":checked");return n.length?n[0]:i})},_setTabStop:function(e){var t=(e=this._mapToTabbable(e))[0],i=this._lastTabStop;t!==i&&($(i).attr("tabindex","-1"),e.attr("tabindex","0"),this._lastTabStop=t)},_handleKeyDown:function(e,t){switch(e.which){case $.ui.keyCode.UP:case $.ui.keyCode.DOWN:if("radio"!=t.attr("type"))break;case $.ui.keyCode.LEFT:case $.ui.keyCode.RIGHT:e.preventDefault();var i=this.$enabledButtons,n=i.length;if(n<2)break;var o=(i.index(t)+(e.which==$.ui.keyCode.DOWN||e.which==$.ui.keyCode.RIGHT^this.isRtl?1:-1)+n)%n;i.eq(o).focus()}},_destroy:function(){this.element.removeClass("oj-buttonset oj-component "+r).removeAttr(i.Components._OJ_CONTAINER_ATTR).removeAttr("role"),"oneTabstop"===this.options.focusManagement&&this.$buttons.attr("tabindex","0"),this.$buttons.map(function(){return $(this).ojButton("widget")[0]}).removeClass("oj-buttonset-first oj-buttonset-last").end().ojButton("destroy")}});var n="oj-button oj-component oj-enabled oj-default",o="oj-hover oj-active oj-selected",s="oj-button-icons-only oj-button-icon-only oj-button-text-icons oj-button-text-icon-start oj-button-text-icon-end oj-button-text-only",r="oj-button-full-chrome oj-button-half-chrome oj-button-outlined-chrome",a={full:"oj-button-full-chrome",half:"oj-button-half-chrome",outlined:"oj-button-outlined-chrome"},l=function(e,t){e.removeClass(r).addClass(a[t])},u=function(e,t){var i,n=e.name,o=e.form;if(n){var s=":radio[name='"+(n=n.replace(/'/g,"\\'"))+"']:oj-button";i=t?t.filter(s):o?$(o).find(s):$(s,e.ownerDocument).filter(function(){return!this.form})}else i=(t?t.filter(e):$(e)).filter(":oj-button");return i},h={button:["ojButtonset","ojToolbar"],buttonset:["ojToolbar"]},d=function(e,t,n){var o=function(e,t,n){for(var o=0;o<n.length;++o){var s=n[o];if(t.indexOf(s)>=0)for(;;e=e.parentNode){var r=i.Components.__GetWidgetConstructor(e,s);if(r)return r}}return null}(t,n,h[e]);return o?o("option","chroming"):(i.ThemeUtils.parseJSONFromFontFamily("oj-"+e+"-option-defaults")||{}).chroming};i.Components.setDefaultOptions({ojButton:{chroming:i.Components.createDynamicPropertyGetter(function(e){return d("button",e.element,e.containers)})},ojButtonset:{chroming:i.Components.createDynamicPropertyGetter(function(e){return d("buttonset",e.element,e.containers)})}})}(),i.CustomElementBridge.registerMetadata("oj-button","baseComponent",{properties:{chroming:{type:"string",enumValues:["full","half","outlined"]},disabled:{type:"boolean"},display:{type:"string",enumValues:["all","icons"]}},events:{action:{}},extension:{_WIDGET_NAME:"ojButton"}}),i.CustomElementBridge.register("oj-button",{metadata:i.CustomElementBridge.getMetadata("oj-button"),innerDomFunction:function(e){return e.getAttribute("href")?"a":"button"}}),i.CustomElementBridge.registerMetadata("oj-menu-button","baseComponent",{properties:{chroming:{type:"string",enumValues:["full","half","outlined"]},disabled:{type:"boolean"},display:{type:"string",enumValues:["all","icons"]}},extension:{_WIDGET_NAME:"ojButton"}}),i.CustomElementBridge.register("oj-menu-button",{metadata:i.CustomElementBridge.getMetadata("oj-menu-button"),innerDomFunction:function(e){return e.getAttribute("href")?"a":"button"}}),i.CustomElementBridge.registerMetadata("oj-buttonset-one","baseComponent",{properties:{chroming:{type:"string",enumValues:["full","half","outlined"]},disabled:{type:"boolean"},display:{type:"string",enumValues:["all","icons"]},focusManagement:{type:"string",enumValues:["oneTabstop","none"]},value:{type:"any",writeback:!0}},extension:{_WIDGET_NAME:"ojButtonset",_ALIASED_PROPS:{value:"checked"}}}),i.CustomElementBridge.register("oj-buttonset-one",{metadata:i.CustomElementBridge.getMetadata("oj-buttonset-one")}),i.CustomElementBridge.registerMetadata("oj-buttonset-many","baseComponent",{properties:{chroming:{type:"string",enumValues:["full","half","outlined"]},disabled:{type:"boolean"},display:{type:"string",enumValues:["all","icons"]},focusManagement:{type:"string",enumValues:["oneTabstop","none"]},value:{type:"Array",writeback:!0}},extension:{_WIDGET_NAME:"ojButtonset",_ALIASED_PROPS:{value:"checked"}}}),i.CustomElementBridge.register("oj-buttonset-many",{metadata:i.CustomElementBridge.getMetadata("oj-buttonset-many")}),i.ChartDataProviderHandler=function(e,t,n){this._component=e,this._templateEngine=n,this._templates=e.getTemplates(),this._data=t,this._templates.itemTemplate?this.Init():i.Logger.error("No itemTemplate slot specified.")},i.Object.createSubclass(i.ChartDataProviderHandler,i.Object,"oj.ChartDataProviderHandler"),i.ChartDataProviderHandler.prototype.Init=function(){this._parentElement=this._component.element[0],this._itemTemplate=this._templates.itemTemplate[0],this._seriesTemplate=this._templates.seriesTemplate?this._templates.seriesTemplate[0]:null,this._groupTemplate=this._templates.groupTemplate?this._templates.groupTemplate[0]:null,this._alias=this._component.options.as,this._seriesComparator=this._component.options.seriesComparator,this._groupComparator=this._component.options.groupComparator,this._itemMap={},this._seriesContexts={},this._groupContexts={},this._itemContexts={};var e=this._data.data,t=this._data.keys,n=0,o=0,s=Object.keys(i.CustomElementBridge.getMetadata("oj-chart-item").properties),r=[],a=document.createElement("div");a.setAttribute("data-oj-context","");for(var l=document.createDocumentFragment(),u=0;u<e.length;u++){var h,d;h={data:e[u],key:t[u],index:u,componentElement:this._parentElement};try{for(var c=this._templateEngine.execute(this._parentElement,this._itemTemplate,h,this._alias),p=0;p<c.length;p++)if(c[p].tagName&&"oj-chart-item"===c[p].tagName.toLowerCase()){d=c[p];break}}catch(e){i.Logger.error(e),r=[];break}this._itemContexts[u]=h,r.push(d),l.appendChild(d)}a.appendChild(l),document.body.appendChild(a);var _=this,m=i.Context.getContext(a).getBusyContext().whenReady().then(function(){for(var i=[],l=0;l<r.length;l++){for(var u=r[l],h=_._itemContexts[l],d={id:t[l],_itemData:e[l]},c=0;c<s.length;c++){var p=u.getProperty(s[c]);void 0!==p&&(d[s[c]]=p)}if(!_._itemMap[d.seriesId]||!_._itemMap[d.seriesId][d.groupId]){i.push(d),delete h.componentElement;var m=d.seriesId;if(_._seriesContexts[m])_._seriesContexts[m].items.push(h);else{var g;g={componentElement:_._parentElement,id:m,items:[h],index:n},_._seriesContexts[m]=g,n++}var f=d.groupId,v=o;_._groupContexts[f.slice(0,f.length-1)]||o++,_._groupContexts=_._addToGroupContexts(_._groupContexts,h,f,1,v),_._itemMap[d.seriesId]||(_._itemMap[d.seriesId]={}),_._itemMap[d.seriesId][d.groupId]=d}}return _._templateEngine.clean(a),document.body.removeChild(a),a=null,i});this._groups=m.then(function(e){return _._createGroups(e).then(function(e){return _._groupComparator&&(e=_._sortGroups(e)),e})}),this._series=this._groups.then(function(e){return _._createSeries(e).then(function(e){return _._seriesComparator&&(e=_._sortSeries(e)),e})})},i.ChartDataProviderHandler.prototype.getSeries=function(){return this._series||Promise.resolve([])},i.ChartDataProviderHandler.prototype.getGroups=function(){return this._groups||Promise.resolve([])},i.ChartDataProviderHandler.prototype._addToGroupContexts=function(e,t,i,n,o){var s=n-1;if(s<i.length){var r=i[s],a=e[r];a?a.items.push(t):(e[r]={},e[r]={ids:i,componentElement:this._parentElement,items:[t],depth:n,leaf:n==i.length,index:o}),o=a?a.items.length-1:0,e=this._addToGroupContexts(e,t,i,n+1,o)}return e},i.ChartDataProviderHandler.prototype._createSeries=function(e){var t,n,o=Object.keys(this._seriesContexts),s=Object.keys(i.CustomElementBridge.getMetadata("oj-chart-series").properties),r=[];if(this._seriesTemplate){(t=document.createElement("div")).setAttribute("data-oj-context","");for(var a=document.createDocumentFragment(),l=0;l<o.length;l++){var u,h=o[l],d=this._seriesContexts[h];try{for(var c=this._templateEngine.execute(this._parentElement,this._seriesTemplate,d,this._alias),p=0;p<c.length;p++)if(c[p].tagName&&"oj-chart-series"===c[p].tagName.toLowerCase()){u=c[p];break}}catch(e){i.Logger.error(e),r=[];break}r.push(u),a.appendChild(u)}t.appendChild(a),document.body.appendChild(t),n=i.Context.getContext(t).getBusyContext().whenReady()}else n=Promise.resolve();var _=this;return n.then(function(){for(var i=[],n=0;n<o.length;n++){var a=o[n],l={id:a,name:a};if(r.length>0)for(var u=r[n],h=0;h<s.length;h++){var d=u.getProperty(s[h]);void 0!==d&&(l[s[h]]=d)}i.push(l)}return t&&(_._templateEngine.clean(t),document.body.removeChild(t),t=null),_._addItemsToSeries(i,e)})},i.ChartDataProviderHandler.prototype._addItemsToSeries=function(e,t){for(var i=function(e){if(e.groups){for(var t=[],n=0;n<e.groups.length;n++)t.push([e.id].concat(i(e.groups[n])));return t}return[e.id]},n=[],o=0;o<t.length;o++){var s=t[o],r=i(s);n=n.concat(r)}for(o=0;o<e.length;o++){for(var a=e[o],l=[],u=0;u<n.length;u++){var h=n[u],d=this._itemMap[a.id][h]||null;d&&(delete d.groupId,delete d.seriesId),l.push(d)}e[o].items=l}return e},i.ChartDataProviderHandler.prototype._createGroups=function(e){var t,n,o=Object.keys(i.CustomElementBridge.getMetadata("oj-chart-group").properties),s={};if(this._groupTemplate){(t=document.createElement("div")).setAttribute("data-oj-context","");for(var r=document.createDocumentFragment(),a=Object.keys(this._groupContexts),l=0;l<a.length;l++){var u,h=a[l],d=this._groupContexts[h];try{for(var c=this._templateEngine.execute(this._parentElement,this._groupTemplate,d,this._alias),p=0;p<c.length;p++)if(c[p].tagName&&"oj-chart-group"===c[p].tagName.toLowerCase()){u=c[p];break}}catch(e){i.Logger.error(e),s={};break}t.appendChild(u),s[h]=u}t.appendChild(r),document.body.appendChild(t),n=i.Context.getContext(t).getBusyContext().whenReady()}else n=Promise.resolve();var _=this;return n.then(function(){for(var i=[],n=0;n<e.length;n++){var r=e[n];i=_._addGroupItem(r,r.groupId,i,o,s)}return t&&(_._templateEngine.clean(t),document.body.removeChild(t),t=null),i})},i.ChartDataProviderHandler.prototype._addGroupItem=function(e,t,i,n,o){i||(i=[]);for(var s,r=t[0],a=null,l=0;l<i.length;l++)i[l].id==r&&(a=l);if(null!=a)s=i[a];else{s={id:r,name:r};var u=o[r];if(u)for(var h=0;h<n.length;h++){var d=u.getProperty(n[h]);void 0!==d&&(s[n[h]]=d)}i.push(s)}return t.length>1&&(s.groups=this._addGroupItem(e,t.slice(1),s.groups,n,o)),i},i.ChartDataProviderHandler.prototype._sortSeries=function(e){var t,i;e.sort((t=this._seriesContexts,i=this._seriesComparator,function(e,n){return i(t[e.id],t[n.id])}));for(var n=0;n<e.length;n++){var o=e[n].id;this._seriesContexts[o].index=n}return e},i.ChartDataProviderHandler.prototype._sortGroups=function(e){var t,i;e.sort((t=this._groupContexts,i=this._groupComparator,function(e,n){var o=e.id,s=n.id,r=t[o],a=t[s];return i(r,a)}));for(var n=0;n<e.length;n++){var o=e[n].id;this._groupContexts[o].index=n,e[n].groups&&(e[n].groups=this._sortGroups(e[n].groups))}return e},i.__registerWidget("oj.ojChart",$.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{data:null,selectInput:null,viewportChange:null,viewportChangeInput:null,drill:null},_CreateDvtComponent:function(e,t,i){return dvt.Chart.newInstance(e,t,i)},_ConvertLocatorToSubId:function(e){var t=e.subId;return"oj-chart-item"===t?t="dataItem["+e.seriesIndex+"]["+e.itemIndex+"]":"oj-chart-group"===t?t="group"+this._GetStringFromIndexPath(e.indexPath):"oj-chart-series"===t?t="series["+e.index+"]":"oj-chart-axis-title"===t?t=e.axis+":title":"oj-chart-reference-object"===t?t=e.axis+":referenceObject["+e.index+"]":"oj-legend-item"===t?(t="legend:section"+this._GetStringFromIndexPath(e.sectionIndexPath),t+=":item["+e.itemIndex+"]"):"oj-chart-tooltip"===t?t="tooltip":"oj-chart-pie-center-label"===t&&(t="pieCenterLabel"),t},_ProcessTemplates:function(e,t){var n=new i.ChartDataProviderHandler(this,e,t);return Promise.all([n.getSeries(),n.getGroups(),e]).then(function(e){return{paths:["series","groups","data"],values:e}})},_ProcessOptions:function(){this._super();var e=this.options.pieCenter;e&&e._renderer&&(e.renderer=this._GetTemplateRenderer(e._renderer,"center"));var t=this.options.selection;this._IsCustomElement()&&t&&"object"==typeof t[0]&&!this.options.data&&(this.options.selection=null)},_ConvertSubIdToLocator:function(e){var t={};if(0===e.indexOf("dataItem")){var i=this._GetIndexPath(e);t.subId="oj-chart-item",t.seriesIndex=i[0],t.itemIndex=i[1]}else if(0===e.indexOf("group"))t.subId="oj-chart-group",t.indexPath=this._GetIndexPath(e);else if(0===e.indexOf("series"))t.subId="oj-chart-series",t.index=this._GetFirstIndex(e);else if(e.indexOf("Axis:title")>0)t.subId="oj-chart-axis-title",t.axis=e.substring(0,e.indexOf(":"));else if(e.indexOf("Axis:referenceObject")>0)t.subId="oj-chart-reference-object",t.axis=e.substring(0,e.indexOf(":")),t.index=this._GetFirstIndex(e);else if(0===e.indexOf("legend")){if(e.indexOf(":item")>0){var n=e.indexOf(":item"),o=e.substring(0,n),s=e.substring(n);t.subId="oj-legend-item",t.sectionIndexPath=this._GetIndexPath(o),t.itemIndex=this._GetFirstIndex(s)}}else"tooltip"===e?t.subId="oj-chart-tooltip":"pieCenterLabel"===e&&(t.subId="oj-chart-pie-center-label");return t},_ProcessStyles:function(){if(this._super(),this.options.styleDefaults||(this.options.styleDefaults={}),!this.options.styleDefaults.colors){var e=new i.ColorAttributeGroupHandler;this.options.styleDefaults.colors=e.getValueRamp()}},_GetComponentRendererOptions:function(){return["tooltip/renderer","pieCenter/renderer"]},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-chart"),e},_GetChildStyleClasses:function(){var e=this._super();return e["oj-chart-data-label"]={path:"styleDefaults/dataLabelStyle",property:"TEXT"},e["oj-chart-data-cursor-line"]={path:"styleDefaults/dataCursor/lineColor",property:"color"},e["oj-chart-stack-label"]={path:"styleDefaults/stackLabelStyle",property:"TEXT"},e["oj-chart-pie-center-label"]={path:"pieCenter/labelStyle",property:"TEXT"},e["oj-chart-slice-label"]={path:"styleDefaults/sliceLabelStyle",property:"TEXT"},e["oj-chart-stock-falling"]={path:"styleDefaults/stockFallingColor",property:"background-color"},e["oj-chart-stock-range"]={path:"styleDefaults/stockRangeColor",property:"background-color"},e["oj-chart-stock-rising"]={path:"styleDefaults/stockRisingColor",property:"background-color"},e["oj-chart-tooltip-label"]={path:"styleDefaults/tooltipLabelStyle",property:"TEXT"},e["oj-chart-xaxis-tick-label"]={path:"xAxis/tickLabel/style",property:"TEXT"},e["oj-chart-xaxis-title"]={path:"xAxis/titleStyle",property:"TEXT"},e["oj-chart-yaxis-tick-label"]={path:"yAxis/tickLabel/style",property:"TEXT"},e["oj-chart-yaxis-title"]={path:"yAxis/titleStyle",property:"TEXT"},e["oj-chart-y2axis-tick-label"]={path:"y2Axis/tickLabel/style",property:"TEXT"},e["oj-chart-y2axis-title"]={path:"y2Axis/titleStyle",property:"TEXT"},e["oj-legend"]={path:"legend/textStyle",property:"TEXT"},e["oj-legend-title"]={path:"legend/titleStyle",property:"TEXT"},e},_GetEventTypes:function(){return["drill","optionChange","selectInput","viewportChange","viewportChangeInput"]},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtChartBundle.DEFAULT_GROUP_NAME"]=e.labelDefaultGroupName,t["DvtChartBundle.LABEL_SERIES"]=e.labelSeries,t["DvtChartBundle.LABEL_GROUP"]=e.labelGroup,t["DvtChartBundle.LABEL_VALUE"]=e.labelValue,t["DvtChartBundle.LABEL_TARGET_VALUE"]=e.labelTargetValue,t["DvtChartBundle.LABEL_X"]=e.labelX,t["DvtChartBundle.LABEL_Y"]=e.labelY,t["DvtChartBundle.LABEL_Z"]=e.labelZ,t["DvtChartBundle.LABEL_PERCENTAGE"]=e.labelPercentage,t["DvtChartBundle.LABEL_LOW"]=e.labelLow,t["DvtChartBundle.LABEL_HIGH"]=e.labelHigh,t["DvtChartBundle.LABEL_OPEN"]=e.labelOpen,t["DvtChartBundle.LABEL_CLOSE"]=e.labelClose,t["DvtChartBundle.LABEL_VOLUME"]=e.labelVolume,t["DvtChartBundle.LABEL_Q1"]=e.labelQ1,t["DvtChartBundle.LABEL_Q2"]=e.labelQ2,t["DvtChartBundle.LABEL_Q3"]=e.labelQ3,t["DvtChartBundle.LABEL_MIN"]=e.labelMin,t["DvtChartBundle.LABEL_MAX"]=e.labelMax,t["DvtChartBundle.LABEL_OTHER"]=e.labelOther,t["DvtChartBundle.PAN"]=e.tooltipPan,t["DvtChartBundle.MARQUEE_SELECT"]=e.tooltipSelect,t["DvtChartBundle.MARQUEE_ZOOM"]=e.tooltipZoom,t["DvtUtilBundle.CHART"]=e.componentName,t},_HandleEvent:function(e){var t=e.type;if("selection"===t){var i=e.selection;if(i){for(var n=[],o=[],s=0;s<i.length;s++){var r;r=this._IsCustomElement()?i[s].id:{id:i[s].id,series:i[s].series,group:i[s].group};var a={data:i[s].data,seriesData:i[s].seriesData,groupData:i[s].groupData,itemData:i[s].itemData};n.push(r),o.push(a)}var l={endGroup:e.endGroup,startGroup:e.startGroup,xMax:e.xMax,xMin:e.xMin,yMax:e.yMax,yMin:e.yMin,y2Max:e.y2Max,y2Min:e.y2Min,selectionData:o};this._IsCustomElement()||(l.component=e.component),e.complete?this._UserOptionChange("selection",n,l):(l.items=n,this._trigger("selectInput",null,l))}}else if("viewportChange"===t){var u={endGroup:e.endGroup,startGroup:e.startGroup,xMax:e.xMax,xMin:e.xMin,yMax:e.yMax,yMin:e.yMin};e.complete&&(this.options.xAxis||(this.options.xAxis={}),this.options.yAxis||(this.options.yAxis={}),this.options.xAxis.viewportStartGroup=null,this.options.xAxis.viewportEndGroup=null,null!=e.xMin&&null!=e.xMax&&(this.options.xAxis.viewportMin=e.xMin,this.options.xAxis.viewportMax=e.xMax),null!=e.yMin&&null!=e.yMax&&(this.options.yAxis.viewportMin=e.yMin,this.options.yAxis.viewportMax=e.yMax)),this._trigger(e.complete?"viewportChange":"viewportChangeInput",null,u)}else"drill"===t?this._trigger("drill",null,{id:e.id,series:e.series,group:e.group,data:e.data,seriesData:e.seriesData,groupData:e.groupData,itemData:e.itemData,component:e.component}):this._super(e)},_LoadResources:function(){null==this.options._resources&&(this.options._resources={});var e=this.options._resources;e.overviewGrippy=i.Config.getResourceUrl("resources/internal-deps/dvt/chart/drag_horizontal.png"),e.panCursorDown=i.Config.getResourceUrl("resources/internal-deps/dvt/chart/hand-closed.cur"),e.panCursorUp=i.Config.getResourceUrl("resources/internal-deps/dvt/chart/hand-open.cur"),e.panUp="oj-chart-pan-icon",e.panUpHover="oj-chart-pan-icon oj-hover",e.panDown="oj-chart-pan-icon oj-active",e.panDownHover="oj-chart-pan-icon oj-hover oj-active",e.selectUp="oj-chart-select-icon",e.selectUpHover="oj-chart-select-icon oj-hover",e.selectDown="oj-chart-select-icon oj-active",e.selectDownHover="oj-chart-select-icon oj-hover oj-active",e.zoomUp="oj-chart-zoom-icon",e.zoomUpHover="oj-chart-zoom-icon oj-hover",e.zoomDown="oj-chart-zoom-icon oj-active",e.zoomDownHover="oj-chart-zoom-icon oj-hover oj-active"},getTitle:function(){return this._component.getAutomation().getTitle()},getGroup:function(e){return this._component.getAutomation().getGroup(e)},getSeries:function(e){return this._component.getAutomation().getSeries(e)},getGroupCount:function(){return this._component.getAutomation().getGroupCount()},getSeriesCount:function(){return this._component.getAutomation().getSeriesCount()},getDataItem:function(e,t){return this._component.getAutomation().getDataItem(e,t)},getLegend:function(){return this._component.getAutomation().getLegend()},getPlotArea:function(){return this._component.getAutomation().getPlotArea()},getXAxis:function(){return this._component.getAutomation().getXAxis()},getYAxis:function(){return this._component.getAutomation().getYAxis()},getY2Axis:function(){return this._component.getAutomation().getY2Axis()},getValuesAt:function(e,t){return this._component.getValuesAt(e,t)},getContextByNode:function(e){var t=this.getSubIdByNode(e);return t&&"oj-chart-tooltip"!==t.subId?t:null},_GetComponentDeferredDataPaths:function(){return{root:["groups","series","data"]}},_CompareOptionValues:function(e,t,n){return"dataCursorPosition"===e?i.Object.compareValues(t,n):this._super(e,t,n)}}),i.__registerWidget("oj.ojSparkChart",$.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{data:null,items:null,referenceObjects:[],tooltip:{renderer:null},type:"line",color:"#267DB3",areaColor:"",areaSvgClassName:"",areaSvgStyle:{},svgClassName:"",svgStyle:{},firstColor:"",lastColor:"",highColor:"",lowColor:"",animationDuration:void 0,animationOnDataChange:"none",animationOnDisplay:"none",visualEffects:"auto",baselineScaling:"min",lineWidth:1,lineStyle:"solid",lineType:"straight",markerShape:"auto",markerSize:5,barGapRatio:.25},_CreateDvtComponent:function(e,t,i){return this._focusable({element:this.element,applyHighlight:!0}),dvt.SparkChart.newInstance(e,t,i)},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-sparkchart"),e},_GetChildStyleClasses:function(){var e=this._super();return e["oj-dvtbase oj-sparkchart"]={path:"animationDuration",property:"ANIM_DUR"},e},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtUtilBundle.CHART"]=e.componentName,t},_Render:function(){this.element.attr("title")?(this.options.shortDesc=this.element.attr("title"),this.element.data(this.element,"title",this.element.attr("title")),this.element.removeAttr("title")):this.element.data("title")&&(this.options.shortDesc=this.element.data("title")),this._super()},getDataItem:function(e){var t=this._component.getAutomation().getDataItem(e);return this._AddAutomationGetters(t),t&&(t.getFloatValue=t.getLow),t},_GetComponentDeferredDataPaths:function(){return{root:["items","data"]}},_AddAutomationGetters:function(e){if(e){var t={};for(var i in e)this._addGetter(e,i,t);Object.defineProperties(e,t)}},_addGetter:function(e,t,i){i[("selected"==t?"is":"get")+t.charAt(0).toUpperCase()+t.slice(1)]={value:function(){return e[t]}}}}),function(){i.CustomElementBridge.registerMetadata("oj-chart","dvtBaseComponent",{properties:{animationOnDataChange:{type:"string",enumValues:["auto","slideToLeft","slideToRight","none"]},animationOnDisplay:{type:"string",enumValues:["auto","alphaFade","zoom","none"]},as:{type:"string"},coordinateSystem:{type:"string",enumValues:["polar","cartesian"]},data:{type:"DataProvider"},dataCursor:{type:"string",enumValues:["on","off","auto"]},dataCursorBehavior:{type:"string",enumValues:["smooth","snap","auto"]},dataCursorPosition:{type:"object",properties:{x:{type:"number|string"},y:{type:"number"},y2:{type:"number"}},writeback:!0},dataLabel:{},dnd:{type:"object",properties:{drag:{type:"object",properties:{groups:{type:"object",properties:{dataTypes:{type:"Array<string>"},drag:{},dragEnd:{},dragStart:{}}},items:{type:"object",properties:{dataTypes:{type:"Array<string>"},drag:{},dragEnd:{},dragStart:{}}},series:{type:"object",properties:{dataTypes:{type:"Array<string>"},drag:{},dragEnd:{},dragStart:{}}}}},drop:{type:"object",properties:{legend:{type:"object",properties:{dataTypes:{type:"Array<string>"},dragEnter:{},dragLeave:{},dragOver:{},drop:{}}},plotArea:{type:"object",properties:{dataTypes:{type:"Array<string>"},dragEnter:{},dragLeave:{},dragOver:{},drop:{}}},xAxis:{type:"object",properties:{dataTypes:{type:"Array<string>"},dragEnter:{},dragLeave:{},dragOver:{},drop:{}}},y2Axis:{type:"object",properties:{dataTypes:{type:"Array<string>"},dragEnter:{},dragLeave:{},dragOver:{},drop:{}}},yAxis:{type:"object",properties:{dataTypes:{type:"Array<string>"},dragEnter:{},dragLeave:{},dragOver:{},drop:{}}}}}}},dragMode:{type:"string",enumValues:["pan","zoom","select","off","user"]},drilling:{type:"string",enumValues:["on","seriesOnly","groupsOnly","off"]},groupComparator:{},groups:{type:"Array<any>|Promise"},hiddenCategories:{type:"Array<string>",writeback:!0},hideAndShowBehavior:{type:"string",enumValues:["withRescale","withoutRescale","none"]},highlightedCategories:{type:"Array<string>",writeback:!0},highlightMatch:{type:"string",enumValues:["any","all"]},hoverBehavior:{type:"string",enumValues:["dim","none"]},initialZooming:{type:"string",enumValues:["first","last","none"]},legend:{type:"object",properties:{backgroundColor:{type:"string"},borderColor:{type:"string"},maxSize:{type:"string"},position:{type:"string",enumValues:["start","end","bottom","top","auto"]},referenceObjectSection:{type:"object",properties:{title:{type:"string"},titleHalign:{type:"string",enumValues:["center","end","start"]},titleStyle:{type:"object"}}},rendered:{type:"string",enumValues:["on","off","auto"]},scrolling:{type:"string",enumValues:["off","asNeeded"]},sections:{type:"Array<object>"},seriesSection:{type:"object",properties:{title:{type:"string"},titleHalign:{type:"string",enumValues:["center","end","start"]},titleStyle:{type:"object"}}},size:{type:"string"},symbolHeight:{type:"number"},symbolWidth:{type:"number"},textStyle:{type:"object"},title:{type:"string"},titleHalign:{type:"string",enumValues:["center","end","start"]},titleStyle:{type:"object"}}},orientation:{type:"string",enumValues:["horizontal","vertical"]},otherThreshold:{type:"number"},overview:{type:"object",properties:{content:{type:"object"},height:{type:"string"},rendered:{type:"string",enumValues:["on","off"]}}},pieCenter:{type:"object",properties:{converter:{type:"object"},label:{type:"string"},labelStyle:{type:"object"},renderer:{},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]}}},pieCenterLabel:{type:"object",properties:{style:{type:"object"},text:{type:"string"}}},plotArea:{type:"object",properties:{backgroundColor:{type:"string"},borderColor:{type:"string"},borderWidth:{type:"number"},rendered:{type:"string",enumValues:["on","off"]}}},polarGridShape:{type:"string",enumValues:["polygon","circle"]},selection:{type:"Array<any>",writeback:!0},selectionMode:{type:"string",enumValues:["single","multiple","none"]},seriesComparator:{},series:{type:"Array<object>|Promise"},sorting:{type:"string",enumValues:["ascending","descending","off"]},splitDualY:{type:"string",enumValues:["on","off","auto"]},splitterPosition:{type:"number"},stack:{type:"string",enumValues:["on","off"]},stackLabel:{type:"string",enumValues:["on","off"]},styleDefaults:{type:"object",properties:{animationDownColor:{type:"string"},animationDuration:{type:"number"},animationIndicators:{type:"string",enumValues:["none","all"]},animationUpColor:{type:"string"},barGapRatio:{type:"number"},borderColor:{type:"string"},borderWidth:{type:"number"},boxPlot:{type:"object",properties:{medianSvgClassName:{type:"string"},medianSvgStyle:{type:"object"},whiskerSvgClassName:{type:"string"},whiskerEndSvgClassName:{type:"string"},whiskerEndLength:{type:"string"},whiskerEndSvgStyle:{type:"object"},whiskerSvgStyle:{type:"object"}}},colors:{type:"Array<string>"},dataCursor:{type:"object",properties:{lineColor:{type:"string"},lineStyle:{type:"string",enumValues:["dotted","dashed","solid"]},lineWidth:{type:"number"},markerColor:{type:"string"},markerDisplayed:{type:"string",enumValues:["on","off"]},markerSize:{type:"number"}}},dataItemGaps:{type:"string"},dataLabelPosition:{type:"string|Array<string>",enumValues:["center","outsideSlice","aboveMarker","belowMarker","beforeMarker","afterMarker","insideBarEdge","outsideBarEdge","none","auto"]},dataLabelStyle:{type:"object|Array<object>"},funnelBackgroundColor:{type:"string"},groupSeparators:{type:"object",properties:{color:{type:"string"},rendered:{type:"string",enumValues:["auto","off"]}}},hoverBehaviorDelay:{type:"number"},lineStyle:{type:"string",enumValues:["dotted","dashed","solid"]},lineType:{type:"string",enumValues:["straight","curved","stepped","centeredStepped","segmented","centeredSegmented","none","auto"]},lineWidth:{type:"number"},markerColor:{type:"string"},markerDisplayed:{type:"string",enumValues:["on","off","auto"]},markerShape:{type:"string"},markerSize:{type:"number"},marqueeBorderColor:{type:"string"},marqueeColor:{type:"string"},maxBarWidth:{type:"number"},otherColor:{type:"string"},patterns:{type:"Array<string>"},pieFeelerColor:{type:"string"},pieInnerRadius:{type:"number"},selectionEffect:{type:"string",enumValues:["explode","highlightAndExplode","highlight"]},seriesEffect:{type:"string",enumValues:["color","pattern","gradient"]},shapes:{type:"Array<string>"},stackLabelStyle:{type:"object"},stockFallingColor:{type:"string"},stockRangeColor:{type:"string"},stockRisingColor:{type:"string"},stockVolumeColor:{type:"string"},threeDEffect:{type:"string",enumValues:["on","off"]},tooltipLabelStyle:{type:"object"},tooltipValueStyle:{type:"object"}}},timeAxisType:{type:"string",enumValues:["enabled","mixedFrequency","skipGaps","disabled","auto"]},tooltip:{type:"object",properties:{renderer:{}}},touchResponse:{type:"string",enumValues:["touchStart","auto"]},translations:{type:"Object",properties:{componentName:{type:"string",value:"Chart"},labelAndValue:{type:"string",value:"{0}: {1}"},labelClearSelection:{type:"string",value:"Clear Selection"},labelClose:{type:"string",value:"Close"},labelCountWithTotal:{type:"string",value:"{0} of {1}"},labelDataVisualization:{type:"string",value:"Data Visualization"},labelDate:{type:"string",value:"Value"},labelDefaultGroupName:{type:"string",value:"Group {0}"},labelGroup:{type:"string",value:"Group"},labelHigh:{type:"string",value:"High"},labelInvalidData:{type:"string",value:"Invalid data"},labelLow:{type:"string",value:"Low"},labelNoData:{type:"string",value:"No data to display"},labelOpen:{type:"string",value:"Open"},labelOther:{type:"string",value:"Other"},labelPercentage:{type:"string",value:"Percentage"},labelQ1:{type:"string",value:"Q1"},labelQ2:{type:"string",value:"Q2"},labelQ3:{type:"string",value:"Q3"},labelSeries:{type:"string",value:"Series"},labelTargetValue:{type:"string",value:"Target"},labelValue:{type:"string",value:"Value"},labelVolume:{type:"string",value:"Volume"},labelX:{type:"string",value:"X"},labelY:{type:"string",value:"Y"},labelZ:{type:"string",value:"Z"},stateCollapsed:{type:"string",value:"Collapsed"},stateDrillable:{type:"string",value:"Drillable"},stateExpanded:{type:"string",value:"Expanded"},stateHidden:{type:"string",value:"Hidden"},stateIsolated:{type:"string",value:"Isolated"},stateMaximized:{type:"string",value:"Maximized"},stateMinimized:{type:"string",value:"Minimized"},stateSelected:{type:"string",value:"Selected"},stateUnselected:{type:"string",value:"Unselected"},stateVisible:{type:"string",value:"Visible"},tooltipPan:{type:"string",value:"Pan"},tooltipSelect:{type:"string",value:"Marquee select"},tooltipZoom:{type:"string",value:"Marquee zoom"}}},type:{type:"string",enumValues:["line","area","lineWithArea","stock","boxPlot","combo","pie","scatter","bubble","funnel","pyramid","bar"]},valueFormats:{type:"object",properties:{series:{type:"object",properties:{tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},group:{type:"object",properties:{tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},x:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},y:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},y2:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},z:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},value:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},targetValue:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},low:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},high:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},open:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},close:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},volume:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},q1:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},q2:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},q3:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},label:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}}}},xAxis:{type:"object",properties:{axisLine:{type:"object",properties:{lineColor:{type:"string"},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["on","off"]}}},baselineScaling:{type:"string",enumValues:["min","zero"]},dataMax:{type:"number"},dataMin:{type:"number"},majorTick:{type:"object",properties:{baselineColor:{type:"string",enumValues:["inherit","auto"]},baselineStyle:{type:"string",enumValues:["dotted","dashed","solid"]},baselineWidth:{type:"number"},lineColor:{type:"string"},lineStyle:{type:"string",enumValues:["dotted","dashed","solid"]},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["on","off","auto"]}}},max:{type:"number|string"},maxSize:{type:"string"},min:{type:"number|string"},minorStep:{type:"number"},minorTick:{type:"object",properties:{lineColor:{type:"string"},lineStyle:{type:"string",enumValues:["dotted","dashed","solid"]},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["on","off","auto"]}}},minStep:{type:"number"},referenceObjects:{type:"Array<object>"},rendered:{type:"string",enumValues:["off","on"]},scale:{type:"string",enumValues:["log","linear"]},size:{type:"string"},step:{type:"number"},tickLabel:{type:"object",properties:{converter:{type:"object"},rendered:{type:"string",enumValues:["off","on"]},rotation:{type:"string",enumValues:["none","auto"]},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},style:{type:"object"}}},title:{type:"string"},titleStyle:{type:"object"},viewportEndGroup:{type:"number|string"},viewportMax:{type:"number|string"},viewportMin:{type:"number|string"},viewportStartGroup:{type:"number|string"}}},y2Axis:{type:"object",properties:{alignTickMarks:{type:"string",enumValues:["off","on"]},axisLine:{type:"object",properties:{lineColor:{type:"string"},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["on","off","auto"]}}},baselineScaling:{type:"string",enumValues:["min","zero"]},dataMax:{type:"number"},dataMin:{type:"number"},majorTick:{type:"object",properties:{baselineColor:{type:"string",enumValues:["inherit","auto"]},baselineStyle:{type:"string",enumValues:["dotted","dashed","solid"]},baselineWidth:{type:"number"},lineColor:{type:"string"},lineStyle:{type:"string",enumValues:["dotted","dashed","solid"]},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["off","on","auto"]}}},max:{type:"number"},maxSize:{type:"string"},min:{type:"number"},minorStep:{type:"number"},minorTick:{type:"object",properties:{lineColor:{type:"string"},lineStyle:{type:"string",enumValues:["dotted","dashed","solid"]},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["on","auto","off"]}}},minStep:{type:"number"},position:{type:"string",enumValues:["start","end","top","bottom","auto"]},referenceObjects:{type:"Array<object>"},rendered:{type:"string",enumValues:["off","on"]},scale:{type:"string",enumValues:["log","linear"]},size:{type:"string"},step:{type:"number"},tickLabel:{type:"object",properties:{converter:{type:"object"},position:{type:"string",enumValues:["inside","outside"]},rendered:{type:"string",enumValues:["off","on"]},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},style:{type:"object"}}},title:{type:"string"},titleStyle:{type:"object"}}},yAxis:{type:"object",properties:{axisLine:{type:"object",properties:{lineColor:{type:"string"},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["off","on","auto"]}}},baselineScaling:{type:"string",enumValues:["min","zero"]},dataMax:{type:"number"},dataMin:{type:"number"},majorTick:{type:"object",properties:{baselineColor:{type:"string",enumValues:["inherit","auto"]},baselineStyle:{type:"string",enumValues:["dotted","dashed","solid"]},baselineWidth:{type:"number"},lineColor:{type:"string"},lineStyle:{type:"string",enumValues:["dotted","dashed","solid"]},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["on","off","auto"]}}},max:{type:"number"},maxSize:{type:"string"},min:{type:"number"},minorStep:{type:"number"},minorTick:{type:"object",properties:{lineColor:{type:"string"},lineStyle:{type:"string",enumValues:["dotted","dashed","solid"]},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["on","off","auto"]}}},minStep:{type:"number"},position:{type:"string",enumValues:["start","end","top","bottom","auto"]},referenceObjects:{type:"Array<object>"},rendered:{type:"string",enumValues:["off","on"]},scale:{type:"string",enumValues:["log","linear"]},size:{type:"string"},step:{type:"number"},tickLabel:{type:"object",properties:{converter:{type:"object"},position:{type:"string",enumValues:["inside","outside"]},rendered:{type:"string",enumValues:["off","on"]},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},style:{type:"object"}}},title:{type:"string"},titleStyle:{type:"object"},viewportMax:{type:"number"},viewportMin:{type:"number"}}},zoomAndScroll:{type:"string",enumValues:["delayedScrollOnly","liveScrollOnly","delayed","live","off"]},zoomDirection:{type:"string",enumValues:["x","y","auto"]}},methods:{getContextByNode:{},getDataItem:{},getGroup:{},getGroupCount:{},getLegend:{},getPlotArea:{},getSeries:{},getSeriesCount:{},getValuesAt:{},getXAxis:{},getY2Axis:{},getYAxis:{}},events:{drill:{},viewportChange:{},selectInput:{},viewportChangeInput:{}},extension:{_WIDGET_NAME:"ojChart"}});var e=i.CustomElementBridge.getMetadata("oj-chart"),t=e.extension._DVT_PARSE_FUNC({"style-defaults.marker-shape":!0},{square:!0,circle:!0,diamond:!0,plus:!0,triangleDown:!0,triangleUp:!0,human:!0,star:!0,auto:!0});i.CustomElementBridge.register("oj-chart",{metadata:e,parseFunction:function(e,i,n,o){return"number|string"===n.type?isNaN(e)?e:Number(e):"style-defaults.data-label-style"===i?JSON.parse(e):t(e,i,n,o)}})}(),function(){i.CustomElementBridge.registerMetadata("oj-spark-chart","dvtBaseComponent",{properties:{animationDuration:{type:"number"},animationOnDataChange:{type:"string",enumValues:["auto","none"]},animationOnDisplay:{type:"string",enumValues:["auto","none"]},areaSvgClassName:{type:"string"},areaColor:{type:"string"},areaSvgStyle:{type:"object"},barGapRatio:{type:"number"},baselineScaling:{type:"string",enumValues:["zero","min"]},svgClassName:{type:"string"},color:{type:"string"},firstColor:{type:"string"},highColor:{type:"string"},items:{type:"Array<number>|Promise"},lastColor:{type:"string"},lineStyle:{type:"string",enumValues:["dotted","dashed","solid"]},lineType:{type:"string",enumValues:["curved","stepped","centeredStepped","segmented","centeredSegmented","none","straight"]},lineWidth:{type:"number"},lowColor:{type:"string"},markerShape:{type:"string"},markerSize:{type:"number"},referenceObjects:{type:"Array<object>"},svgStyle:{type:"object"},tooltip:{type:"object",properties:{renderer:{}}},translations:{type:"Object",properties:{componentName:{type:"string",value:"Chart"},labelAndValue:{type:"string",value:"{0}: {1}"},labelClearSelection:{type:"string",value:"Clear Selection"},labelCountWithTotal:{type:"string",value:"{0} of {1}"},labelDataVisualization:{type:"string",value:"Data Visualization"},labelInvalidData:{type:"string",value:"Invalid data"},labelNoData:{type:"string",value:"No data to display"},stateCollapsed:{type:"string",value:"Collapsed"},stateDrillable:{type:"string",value:"Drillable"},stateExpanded:{type:"string",value:"Expanded"},stateHidden:{type:"string",value:"Hidden"},stateIsolated:{type:"string",value:"Isolated"},stateMaximized:{type:"string",value:"Maximized"},stateMinimized:{type:"string",value:"Minimized"},stateSelected:{type:"string",value:"Selected"},stateUnselected:{type:"string",value:"Unselected"},stateVisible:{type:"string",value:"Visible"}}},type:{type:"string",enumValues:["area","lineWithArea","bar","line"]},visualEffects:{type:"string",enumValues:["none","auto"]}},methods:{getDataItem:{}},extension:{_WIDGET_NAME:"ojSparkChart"}});var e=i.CustomElementBridge.getMetadata("oj-spark-chart");i.CustomElementBridge.register("oj-spark-chart",{metadata:e,parseFunction:e.extension._DVT_PARSE_FUNC({"marker-shape":!0},{square:!0,circle:!0,diamond:!0,plus:!0,triangleDown:!0,triangleUp:!0,human:!0,star:!0,auto:!0})})}(),function(){i.CustomElementBridge.registerMetadata("oj-chart-item",null,{properties:{borderColor:{type:"string"},borderWidth:{type:"number"},boxPlot:{type:"object",properties:{medianSvgClassName:{type:"string"},medianSvgStyle:{type:"object"},q2Color:{type:"string"},q2SvgClassName:{type:"string"},q2SvgStyle:{type:"object"},q3SvgClassName:{type:"string"},q3SvgStyle:{type:"object"},whiskerEndLength:{type:"string"},whiskerEndSvgClassName:{type:"string"},whiskerEndSvgStyle:{type:"object"},whiskerSvgClassName:{type:"string"},whiskerSvgStyle:{type:"object"}}},categories:{type:"Array<string>"},close:{type:"number"},color:{type:"string"},drilling:{type:"string",enumValues:["on","off","inherit"]},groupId:{type:"Array<string>"},high:{type:"number"},items:{type:"Array<object>|Array<number>"},label:{type:"string|Array<string>"},labelPosition:{type:"string|Array<string>",enumValues:["center","outsideSlice","aboveMarker","belowMarker","beforeMarker","afterMarker","insideBarEdge","outsideBarEdge","none","auto"]},labelStyle:{type:"object|Array<object>"},low:{type:"number"},markerDisplayed:{type:"string",enumValues:["on","off","auto"]},markerShape:{type:"string"},markerSize:{type:"number"},open:{type:"number"},pattern:{type:"string",enumValues:["auto","largeChecker","largeCrosshatch","largeDiagonalLeft","largeDiagonalRight","largeDiamond","largeTriangle","smallChecker","smallCrosshatch","smallDiagonalLeft","smallDiagonalRight","smallDiamond","smallTriangle"]},q1:{type:"number"},q2:{type:"number"},q3:{type:"number"},seriesId:{type:"string"},shortDesc:{type:"string"},source:{type:"string"},sourceHover:{type:"string"},sourceHoverSelected:{type:"string"},sourceSelected:{type:"string"},svgClassName:{type:"string"},svgStyle:{type:"object"},targetValue:{type:"number"},value:{type:"number"},volume:{type:"number"},x:{type:"number|string"},y:{type:"number"},z:{type:"number"}},extension:{_CONSTRUCTOR:function(){}}});var e=i.CustomElementBridge.getMetadata("dvtBaseComponent");i.CustomElementBridge.register("oj-chart-item",{metadata:i.CustomElementBridge.getMetadata("oj-chart-item"),parseFunction:e.extension._DVT_PARSE_FUNC({"marker-shape":!0},{square:!0,circle:!0,diamond:!0,plus:!0,triangleDown:!0,triangleUp:!0,human:!0,star:!0,auto:!0})})}(),function(){i.CustomElementBridge.registerMetadata("oj-chart-series",null,{properties:{areaColor:{type:"string"},areaSvgClassName:{type:"string"},areaSvgStyle:{type:"object"},assignedToY2:{type:"string",enumValues:["on","off"]},borderColor:{type:"string"},borderWidth:{type:"number"},boxPlot:{type:"object",properties:{medianSvgClassName:{type:"string"},medianSvgStyle:{type:"object"},q2Color:{type:"string"},q2SvgClassName:{type:"string"},q2SvgStyle:{type:"object"},q3Color:{type:"string"},q3SvgClassName:{type:"string"},q3SvgStyle:{type:"object"},whiskerEndLength:{type:"string"},whiskerEndSvgClassName:{type:"string"},whiskerEndSvgStyle:{type:"object"},whiskerSvgClassName:{type:"string"},whiskerSvgStyle:{type:"object"}}},categories:{type:"Array<string>"},color:{type:"string"},displayInLegend:{type:"string",enumValues:["auto","off","on"]},drilling:{type:"string",enumValues:["on","off","inherit"]},lineStyle:{type:"string",enumValues:["dashed","dotted","solid"]},lineType:{type:"string",enumValues:["auto","centeredSegmented","centeredStepped","curved","none","segmented","stepped","straight"]},lineWidth:{type:"number"},markerColor:{type:"string"},markerDisplayed:{type:"string",enumValues:["on","off","auto"]},markerShape:{type:"string"},markerSize:{type:"number"},markerSvgClassName:{type:"string"},markerSvgStyle:{type:"object"},name:{type:"string"},pattern:{type:"string",enumValues:["auto","largeChecker","largeCrosshatch","largeDiagonalLeft","largeDiagonalRight","largeDiamond","largeTriangle","smallChecker","smallCrosshatch","smallDiagonalLeft","smallDiagonalRight","smallDiamond","smallTriangle"]},pieSliceExplode:{type:"number"},shortDesc:{type:"string"},source:{type:"string"},sourceHover:{type:"string"},sourceHoverSelected:{type:"string"},sourceSelected:{type:"string"},stackCategory:{type:"string"},svgClassName:{type:"string"},svgStyle:{type:"object"},type:{type:"string",enumValues:["area","auto","bar","boxPlot","candlestick","line","lineWithArea"]}},extension:{_CONSTRUCTOR:function(){}}});var e=i.CustomElementBridge.getMetadata("dvtBaseComponent");i.CustomElementBridge.register("oj-chart-series",{metadata:i.CustomElementBridge.getMetadata("oj-chart-series"),parseFunction:e.extension._DVT_PARSE_FUNC({"marker-shape":!0},{square:!0,circle:!0,diamond:!0,plus:!0,triangleDown:!0,triangleUp:!0,human:!0,star:!0,auto:!0})})}(),i.CustomElementBridge.registerMetadata("oj-chart-group",null,{properties:{drilling:{type:"string",enumValues:["on","inherit","off"]},labelStyle:{type:"object"},name:{type:"string"},shortDesc:{type:"string"}},extension:{_CONSTRUCTOR:function(){}}}),i.CustomElementBridge.register("oj-chart-group",{metadata:i.CustomElementBridge.getMetadata("oj-chart-group")}),function(){i.__registerWidget("oj.ojCheckboxset",$.oj.editableValue,{version:"1.0.0",defaultElement:"<div>",widgetEventPrefix:"oj",options:{disabled:!1,labelledBy:null,required:!1,value:[]},refresh:function(){this._super(),this._setup()},widget:function(){return this.uiCheckboxset},validate:i.EditableValueUtils.validate,_InitOptions:function(e,t){var n,o,s=new Array;this._super(e,t),this._IsCustomElement()||i.EditableValueUtils.initializeOptionsFromDom([{attribute:"disabled",validateOption:!0},{attribute:"title"},{attribute:"required",coerceDomValue:!0,validateOption:!0}],t,this),this._IsCustomElement()?this._checkValueType(this.options.value):void 0===t.value?(this.$checkboxes=this._findCheckboxesWithMatchingName(),(n=this.$checkboxes.filter(":checked")).length>0&&(n.each(function(){s.push($(this).val())}),o=s,this.option("value",o,{_context:{writeback:!0,internalSet:!0}})),void 0===this.options.value&&(this.options.value=[])):this._checkValueType(this.options.value)},_ComponentCreate:function(){var e=this.element;if(this._super(),e.is("fieldset"))throw new Error("ojCheckboxset cannot be bound to a fieldset. Use a div instead.");e.uniqueId(),this._processOjOptions(),this.$checkboxes=this._findCheckboxesWithMatchingName(),this.$checkboxes._ojRadioCheckbox().attr("data-oj-internal",""),this.uiCheckboxset=e.addClass("oj-checkboxset oj-component").attr("role","group"),$(e.get(0).childNodes).filter(function(){return!this.getAttribute||"contextMenu"!==this.getAttribute("slot")}).wrapAll("<div class='oj-checkboxset-wrapper'></div>"),this._on(this._events),this._setup()},_ResetComponentState:function(){this._processOjOptions(),this.$checkboxes=this._findCheckboxesWithMatchingName(),this.$checkboxes.filter(".oj-checkbox").each(function(){var e=void 0!==$(this).attr("disabled")&&!!$(this).prop("disabled");$(this)._ojRadioCheckbox("option","disabled",e)}),this.$checkboxes.not(".oj-checkbox")._ojRadioCheckbox()},GetFocusElement:function(){return this._GetContentElement().not(":disabled").first()[0]},_SetDisabledDom:function(e){},_IsRequired:function(){return this.options.required},_refreshRequired:i.EditableValueUtils._refreshRequired,_ValidateReturnBoolean:i.EditableValueUtils._ValidateReturnBoolean,_processOjOptions:function(){if(this._IsCustomElement()){var e,t,i=this._customOptionRenderer.bind(this),n=this.element.children("oj-option");if(n.length>0)for(e=0,t=n.length;e<t;e++)n[e].customOptionRenderer=i,this._initInputLabelFromOjOption(n[e]);if((n=this.element.children(".oj-checkboxset-wrapper").find("oj-option")).length>0)for(e=0,t=n.length;e<t;e++)n[e].customOptionRenderer=i,this._initInputLabelFromOjOption(n[e])}},_initInputLabelFromOjOption:function(e){var t,i,n=e;$(n).uniqueId();var o=n.getAttribute("id"),s=o+"|cb",r=document.getElementById(s);if(null!==r){for(i=n;(i=i.parentElement)&&"LABEL"!==i.tagName;);i&&(n.textContent&&""!==n.textContent?i.classList.remove("oj-helper-hidden"):i.classList.add("oj-helper-hidden"))}else t=document.createElement("span"),r=document.createElement("input"),i=document.createElement("label"),t.setAttribute("class","oj-choice-item"),r.setAttribute("type","checkbox"),r.setAttribute("value",n.value),r.setAttribute("id",s),i.setAttribute("for",s),n.textContent&&""!==n.textContent||i.classList.add("oj-helper-hidden"),n.parentElement.insertBefore(t,n),i.appendChild(n),t.appendChild(r),t.appendChild(i);var a=this.element[0].id,l=n.getAttribute("aria-label"),u=n.getAttribute("aria-labelledby");r.setAttribute("data-oj-option-id",o),a&&""!=a?r.setAttribute("name",a):r.removeAttribute("name"),l&&""!=l?r.setAttribute("aria-label",l):r.removeAttribute("aria-label"),u&&""!=u?r.setAttribute("aria-labelledby",u):r.removeAttribute("aria-labelledby"),n.disabled?r.setAttribute("disabled",!0):r.removeAttribute("disabled")},_customOptionRenderer:function(e){var t=e,i=t.getAttribute("id")+"|cb",n=document.getElementById(i);null!==n&&n.classList.contains("oj-checkbox")&&$(n)._ojRadioCheckbox("option","disabled",t.disabled)},_updateLabelledBy:i.EditableValueUtils._updateLabelledBy,_findCheckboxesWithMatchingName:function(){var e,t,n=this.element.find("input[type=checkbox]:first");return 0===n.length&&i.Logger.warn("Could not find any input type=checkbox within this element"),void 0===(e=n.attr("name"))?this.element.find("input[type=checkbox]").not("[name]"):(t="input[type=checkbox][name="+e+"]",this.element.find(t))},_NotifyContextMenuGesture:function(e,t,i){var n=this.element.find("input[type=checkbox]:tabbable").first();this._OpenContextMenu(t,i,{launcher:n})},_GetMessagingLauncherElement:function(){return this.widget()},_setup:function(){this._propagateDisabled(this.options.disabled),null!==this.$checkboxes&&(1===this.$checkboxes.length?this.element.addClass("oj-checkboxset-single"):this.element.removeClass("oj-checkboxset-single")),this.element.hasClass("oj-choice-direction-column")||this.element.hasClass("oj-choice-direction-row")||this.element.addClass("oj-choice-direction-column"),this._refreshRequired(this.options.required),this._updateLabelledBy(null,this.options.labelledBy,this.widget())},_events:{change:function(e){this._HandleChangeEvent(e)}},_checkValueType:function(e){void 0===e?this.option("value",[],{_context:{writeback:!0,internalSet:!0}}):this._confirmValueIsArray(e)},_confirmValueIsArray:function(e){if(!Array.isArray(e))throw new Error("Invalid 'value' set on JET Checkboxset: "+e+".It must be an Array. ")},_HandleChangeEvent:function(t){var i,n;(n=this.$checkboxes).length>0&&n.each(function(){this===t.target&&$(this)._ojRadioCheckbox("setSelectedClass",t.target.checked)}),i=this._GetDisplayValue(),this._SetValue(i,t,e)},_GetDisplayValue:function(e){return this._GetElementValue()},_SetDisplayValue:function(e){var t,i,n,o,s=this.$checkboxes.length;if(this._checkValueType(e),null==e||0===e.length)this.$checkboxes._ojRadioCheckbox("option","checked",!1);else for(t=0;t<s;t++){n=this.$checkboxes[t],o=$(n),i=this._GetOptionValue(n);var r=this._GetOptionIndex(e,i),a=o._ojRadioCheckbox("option","checked");-1!==r?a||o._ojRadioCheckbox("option","checked",!0):a&&o._ojRadioCheckbox("option","checked",!1)}},_GetElementValue:function(){var e=this,t=new Array,i=this.$checkboxes.filter(":checked");return 0===i.length?[]:(i.each(function(){t.push(e._GetOptionValue(this))}),t)},_GetOptionIndex:function(e,t){var n,o=e.indexOf(t);if(-1==o){n=e.length;for(var s=0;s<n;s++)if(i.Object.compareValues(e[s],t)){o=s;break}}return o},_GetOptionValue:function(e){var t,i;return this._IsCustomElement()?(t=document.getElementById(e.getAttribute("data-oj-option-id")))&&(i=t.value):i=e.value,i},_GetDefaultStyleClass:function(){return"oj-checkboxset"},_GetContentElement:function(){return null!=this.$checkboxes?this.$checkboxes:(this.$checkboxes=this._findCheckboxesWithMatchingName(),this.$checkboxes)},_AriaRequiredUnsupported:function(){return!0},_AfterSetOptionRequired:i.EditableValueUtils._AfterSetOptionRequired,_propagateDisabled:function(e){e=!!e,this.$checkboxes.each(function(){$(this).data("oj-_ojRadioCheckbox").__setAncestorComponentDisabled(e)}),this.$checkboxes._ojRadioCheckbox("refreshDisabled")},_setOption:function(e,t,i){var n=this.options.labelledBy;switch(this._super(e,t,i),e){case"disabled":this._propagateDisabled(t);break;case"labelledBy":this._updateLabelledBy(n,t,this.widget())}},_AfterSetOption:function(e,t,i){switch(this._superApply(arguments),e){case"required":this._AfterSetOptionRequired(e)}},getNodeBySubId:function(e){var t,i,n=this._super(e);if(!n)switch(t=this.$checkboxes.get(),e.subId){case"oj-checkboxset-inputs":n=t;break;case"oj-checkboxset-checkbox":if(void 0!==(i=e.value)){var o,s,r=t.length,a=[];for(o=0;o<r;o++)a[o]=this._GetOptionValue(t[o]);-1!==(s=this._GetOptionIndex(a,i))&&(n=t[s])}}return n||null},getSubIdByNode:function(e){for(var t=this._GetContentElement()[0].parentElement.parentElement.parentElement,i=e;i&&i!=t;){if("LABEL"==i.nodeName&&(i=document.getElementById(i.for)),"INPUT"==i.nodeName)return{subId:"oj-checkboxset-checkbox",value:this._GetOptionValue(i)};i=i.parentElement}return this._super(e)},_destroy:function(){var e=this._super(),t=this.element[0].firstElementChild;return this.$checkboxes&&this.$checkboxes._ojRadioCheckbox("destroy"),$(t).contents().unwrap(),e}});var e={doValueChangeCheck:!1}}(),i.CustomElementBridge.registerMetadata("oj-checkboxset","editableValue",{properties:{disabled:{type:"boolean"},labelledBy:{type:"string"},required:{type:"boolean"},value:{type:"Array"},translations:{type:"Object",properties:{required:{type:"Object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}}}}},methods:{validate:{}},extension:{_WIDGET_NAME:"ojCheckboxset"}}),i.CustomElementBridge.register("oj-checkboxset",{metadata:i.CustomElementBridge.getMetadata("oj-checkboxset")}),_t=0,mt="oj-collapsible-open-icon",gt="oj-collapsible-close-icon",i.__registerWidget("oj.ojCollapsible",$.oj.baseComponent,{widgetEventPrefix:"oj",options:{expanded:!1,disabled:!1,expandOn:"click",expandArea:"header",beforeExpand:null,expand:null,beforeCollapse:null,collapse:null},_ComponentCreate:function(){this._super(),this.element.addClass("oj-collapsible oj-component"),this._processPanels(),this._refresh(),this._initialRender=!0;var e=this.element[0];this._expandCollapseHandler(this._createEventObject(e,this.options.expanded?"ojexpand":"ojcollapse")),this._initialRender=void 0},_createEventObject:function(e,t){return{type:t,target:e,currentTarget:e,preventDefault:$.noop}},_NotifyContextMenuGesture:function(e,t,i){this._OpenContextMenu(t,i,{launcher:this._getCollapsibleIcon().first()})},_createIcons:function(){var e=this.options.expanded?mt:gt;(this._isDisabled()?$("<span>"):$("<a href='#'>")).addClass("oj-component-icon oj-clickable-icon-nocontext oj-collapsible-header-icon "+e).attr("aria-labelledby",this.header.attr("id")).prependTo(this.header)},_destroyIcons:function(){this.header.children(".oj-collapsible-header-icon").remove()},_destroy:function(){this._resolveBusyContext(),this._cleanup(),this.element.removeClass("oj-collapsible oj-component oj-expanded oj-collapsed oj-disabled"),this._isDisabled()&&this._findFocusables(this.header).removeAttr("tabIndex"),this.header.removeClass("oj-collapsible-header").each(function(){/^oj-collapsible/.test(this.id)&&this.removeAttribute("id")}),this._findFirstFocusableInHeader().removeAttr("role").removeAttr("aria-controls").removeAttr("aria-expanded").removeAttr("aria-disabled"),this._destroyIcons(),this.content.css("display","").removeAttr("aria-hidden").removeAttr("tabIndex").removeClass("oj-component-content oj-collapsible-content").each(function(){/^oj-collapsible/.test(this.id)&&this.removeAttribute("id")})},_cleanup:function(){this._tearDownEvents(),this.content&&(i.DomUtils.unwrap(this.content),this.wrapper=null)},_isDisabled:function(){return this.element.hasClass("oj-disabled")},_getExpandAreaSelector:function(){return"header"===this.options.expandArea?"> .oj-collapsible-header":"> .oj-collapsible-header > .oj-collapsible-header-icon"},_getCollapsibleIcon:function(){return this.header.find(".oj-collapsible-header-icon")},_setOption:function(e,t,i){if("expanded"!==e){if("disabled"===e)return this._super(e,t,i),void this.refresh();"expandOn"===e||"expandArea"===e?(this._tearDownEvents(),this._super(e,t,i),this._setupEvents()):this._super(e,t,i)}else{if(t===this.options.expanded)return;t?this.expand(!0):this.collapse(!0)}},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var t=$.ui.keyCode;switch(e.keyCode){case t.SPACE:case t.ENTER:this._toggleHandler(e)}}},refresh:function(){this._super(),this._cleanup(),this._processPanels(),this._destroyIcons(),this._refresh()},_processHeaderSlots:function(){var e,t=this.element[0],n=!1,o=i.BaseCustomElementBridge.getSlotMap(t).header;if(o&&o.length)if(1===o.length)e=o[0];else{var s=$("<span slot='header'></span>");e=s[0];for(var r=0;r<o.length;r++)e.appendChild(o[r]);s.children().attr("slot",""),n=!0}else e=$("<span slot='header'></span>")[0],n=!0;return(n||0!==this.element.children().index(e))&&t.insertBefore(e,t.firstChild),$(e)},_processDefaultSlots:function(){var e,t=this.element[0],n=i.BaseCustomElementBridge.getSlotMap(t)[""];if(n&&1===n.length)e=n[0];else{if(e=$("<div></div>")[0],n&&n.length)for(var o=0;o<n.length;o++)e.appendChild(n[o]);t.appendChild(e)}return $(e)},_processPanels:function(){this._IsCustomElement()?this.header=this._processHeaderSlots():this.header=this.element.children(":first-child"),this.header.addClass("oj-collapsible-header"),this._IsCustomElement()?this.content=this._processDefaultSlots():this.content=this.header.next(),this.content.addClass("oj-collapsible-content oj-component-content"),this.content.wrap("<div></div>"),this.wrapper=this.content.parent().addClass("oj-collapsible-wrapper"),this.options.disabled&&this.element.addClass("oj-disabled"),this._isDisabled()&&this._findFocusables(this.header).attr("tabIndex",-1)},_refresh:function(){var e=this.header,t=this.content,i=this.options,n=this.element.attr("id");n||(n=_t+=1);var o="oj-collapsible-"+n;this.collapsibleId=o;var s=e.attr("id"),r=t.attr("id");s||(s=o+"-header",e.attr("id",s)),r||(r=o+"-content",t.attr("id",r)),this._createIcons();var a=this._findFirstFocusableInHeader();a.attr("role","button").attr("aria-controls",r).attr("aria-expanded",i.expanded),this._isDisabled()&&a.attr("aria-disabled","true"),i.expanded?t.removeAttr("aria-hidden"):(this.wrapper.css({"max-height":0,"overflow-y":"hidden",display:"none"}),t.attr("aria-hidden","true")),this._setupEvents()},_setupEvents:function(){var e={keydown:this._keydown},t=this.options.expandOn;if(t){var n=this;$.each(t.split(" "),function(t,o){i.DomUtils.isValidIdentifier(o)&&(e[o]=n._toggleHandler)})}var o=this.element.find(this._getExpandAreaSelector());this._on(o,e),this._on(this.wrapper,{transitionend:this._transitionEndHandler,webkitTransitionEnd:this._transitionEndHandler}),this._isDisabled()||(this._on(this.element,{ojfocus:this._focusHandler,ojfocusout:this._focusHandler}),this._focusable({element:this._getCollapsibleIcon(),applyHighlight:!0}),this._AddHoverable(o),this._AddActiveable(o))},_tearDownEvents:function(){var e=this.element.find(this._getExpandAreaSelector());this._RemoveHoverable(e),this._RemoveActiveable(e),this._off(e),this.wrapper&&this._off(this.wrapper),this._off(this.element.add(this.content))},_toggleHandler:function(e){this._isDisabled()||e.isDefaultPrevented()||(this.options.expanded?this.collapse(!0,e):this.expand(!0,e),e.preventDefault(),e.stopPropagation(),this._getCollapsibleIcon().focus())},_calcEffectTime:function(e){for(var t=e.css("transitionProperty"),i=e.css("transitionDelay"),n=e.css("transitionDuration"),o=t.split(","),s=i.split(","),r=n.split(","),a=o.length,l=s.length,u=r.length,h=0,d=0;d<a;d++){var c=r[d%u],p=c.indexOf("ms")>-1?parseFloat(c):1e3*parseFloat(c);if(p>0){var _=s[d%l],m=_.indexOf("ms")>-1?parseFloat(_):1e3*parseFloat(_);h=Math.max(h,m+p)}}return h+100},_resolveTransition:function(e){var t=this;this._transitionTimer=setTimeout(function(){t._transitionEndHandler()},t._calcEffectTime(e))},_expandCollapseHandler:function(e){if((!this._isDisabled()||this._initialRender)&&e.target===this.element[0]&&(this._initialRender||!e.isDefaultPrevented||!e.isDefaultPrevented())){var t=this.element,n=this.content,o=this.wrapper,s="ojexpand"===e.type,r=this;if(e.preventDefault(),this._initialRender||this._changeExpandedOption(s),this._initialRender||document.hidden||this.element.hasClass("oj-collapsible-skip-animation"))s||(o.css("max-height",0),o.hide()),r._afterExpandCollapse(s,e);else{if(o.contentHeight=o.outerHeight(),!this._animationResolve){var a=i.Context.getContext(t[0]).getBusyContext();this._animationResolve=a.addBusyState({description:"The collapsible id='"+this.element.attr("id")+"' is animating."})}this._transitionEnded=!1,s?(o.show(),setTimeout(function(){o.contentHeight+=n.outerHeight(),o.addClass("oj-collapsible-transition").css({"max-height":o.contentHeight}),r._resolveTransition(o)},0)):(o.removeClass("oj-collapsible-transition"),o.css({"max-height":o.contentHeight,"overflow-y":"hidden"}),0===o.contentHeight?r._transitionEndHandler():setTimeout(function(){o.addClass("oj-collapsible-transition").css({"max-height":0}),r._resolveTransition(o)},20))}}},_focusHandler:function(e){this._isDisabled()||("ojfocusout"===e.type?(this._findFirstFocusableInHeader().attr("tabIndex",-1),e.preventDefault(),e.stopPropagation()):"ojfocus"===e.type&&(this._findFirstFocusableInHeader().attr("tabIndex",0).focus(),e.preventDefault(),e.stopPropagation()))},_findFirstFocusableInHeader:function(){return this._findFocusables(this.header).first()},_findFocusables:function(e){return this._isDisabled()?e.find("span"):e.find("a,:input")},expand:function(e,t){if(!this._isDisabled()){var i={header:this.header,content:this.content};e&&!1===this._trigger("beforeExpand",t,i)||this._expandCollapseHandler(this._createEventObject(this.element[0],"ojexpand"))}},collapse:function(e,t){if(!this._isDisabled()){var i={header:this.header,content:this.content};e&&!1===this._trigger("beforeCollapse",t,i)||this._expandCollapseHandler(this._createEventObject(this.element[0],"ojcollapse"))}},_transitionEndHandler:function(e){if(!(this._isDisabled()||e&&e.target!==this.element[0])){var t=!1;e&&e.originalEvent&&(t="max-height"===e.originalEvent.propertyName),t&&this._transitionTimer&&(clearTimeout(this._transitionTimer),this._transitionTimer=void 0),e&&(e.preventDefault(),e.stopImmediatePropagation()),this._transitionEnded||(!t&&e||(this._transitionEnded=!0),this.options.expanded?this.wrapper.css({"max-height":9999,"overflow-y":""}):this.wrapper.hide(),this.wrapper.removeClass("oj-collapsible-transition"),this._afterExpandCollapse(this.options.expanded,e))}},_resolveBusyContext:function(){this._animationResolve&&(this._animationResolve(),this._animationResolve=null)},_afterExpandCollapse:function(e,t){var n=this.element,o=this.wrapper;e?(n.removeClass("oj-collapsed"),n.addClass("oj-expanded"),i.Components.subtreeShown(o[0])):(n.removeClass("oj-expanded"),n.addClass("oj-collapsed"),i.Components.subtreeHidden(o[0])),this._getCollapsibleIcon().toggleClass(mt,e).toggleClass(gt,!e||!1).end(),e?this.content.removeAttr("aria-hidden"):this.content.attr("aria-hidden","true"),this._findFirstFocusableInHeader().attr("aria-expanded",e),this._resolveBusyContext();var s={header:this.header,content:this.content};this._initialRender||(e?this._trigger("expand",t,s):this._trigger("collapse",t,s))},_changeExpandedOption:function(e){this.option("expanded",e,{_context:{writeback:!0,internalSet:!0}})},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;switch(e.subId){case"oj-collapsible-content":return this.content[0];case"oj-collapsible-header":return this.header[0];case"oj-collapsible-disclosure":case"oj-collapsible-header-icon":return this._getCollapsibleIcon()[0]}return null},getSubIdByNode:function(e){for(var t=this.getNodeBySubId({subId:"oj-collapsible-disclosure"}),i=e;i;){if(i===this.content[0])return{subId:"oj-collapsible-content"};if(i===this.header[0])return{subId:"oj-collapsible-header"};if(i===t)return{subId:"oj-collapsible-disclosure"};i=i.parentElement}return null}}),i.CustomElementBridge.registerMetadata("oj-collapsible","baseComponent",{properties:{disabled:{type:"boolean"},expandArea:{type:"string",enumValues:["header","disclosureIcon"]},expanded:{type:"boolean",writeback:!0}},events:{beforeCollapse:{},beforeExpand:{},collapse:{},expand:{}},extension:{_WIDGET_NAME:"ojCollapsible",_CONTROLS_SUBTREE_HIDDEN:!0}}),i.CustomElementBridge.register("oj-collapsible",{metadata:i.CustomElementBridge.getMetadata("oj-collapsible")}),i.CollectionCellSet=function(e,t,n,o,s){i.Assert.assertArrayOrNull(s),this.m_startRow=e,this.m_endRow=t,this.m_startColumn=n,this.m_endColumn=o,this.m_columns=s},i.CollectionCellSet.prototype.setModels=function(e){i.Assert.assertArray(e),null!=e&&e.length===this.getCount("row")&&(this.m_models=e)},i.CollectionCellSet.prototype.getData=function(e){var t,i,n;return null==(i=this._getModel(e))?null:(t=this.m_columns[e.column],this,n={},Object.defineProperty(n,"data",{enumerable:!0,get:function(){return i.get(t)},set:function(e){i.set(t,e,{silent:!0})}}),n)},i.CollectionCellSet.prototype.getMetadata=function(e){var t,n;return null==(n=this._getModel(e))?null:(t=e.column,{keys:{row:i.CollectionDataGridUtils._getModelKey(n),column:this.m_columns[t]}})},i.CollectionCellSet.prototype._getModel=function(e){var t,n;return null==this.m_models?null:(i.Assert.assertObject(e),t=e.row,n=e.column,i.Assert.assert(t>=this.m_startRow&&t<=this.m_endRow&&n>=this.m_startColumn&&n<=this.m_endColumn),this.m_models[t-this.m_startRow])},i.CollectionCellSet.prototype.getCount=function(e){return"row"===e?Math.max(0,this.m_endRow-this.m_startRow):"column"===e?Math.max(0,this.m_endColumn-this.m_startColumn):0},i.CollectionCellSet.prototype.getExtent=function(e){return{row:{extent:1,more:{before:!1,after:!1}},column:{extent:1,more:{before:!1,after:!1}}}},i.CollectionCellSet.prototype.getStartRow=function(){return this.m_startRow},i.CollectionCellSet.prototype.getEndRow=function(){return this.m_endRow},i.CollectionCellSet.prototype.getStartColumn=function(){return this.m_startColumn},i.CollectionCellSet.prototype.getEndColumn=function(){return this.m_endColumn},i.CollectionCellSet.prototype.getColumns=function(){return this.m_columns},i.CollectionDataGridDataSource=function(e,t){this.collection=e,null!=t&&(this.rowHeader=t.rowHeader,this.columns=t.columns),this._setSortInfo(),i.CollectionDataGridDataSource.superclass.constructor.call(this)},i.Object.createSubclass(i.CollectionDataGridDataSource,i.DataGridDataSource,"oj.CollectionDataGridDataSource"),i.CollectionDataGridDataSource.prototype.Init=function(){i.CollectionDataGridDataSource.superclass.Init.call(this),this.pendingHeaderCallback={},this._registerEventListeners()},i.CollectionDataGridDataSource.prototype._registerEventListeners=function(){this.collection.on("add",this._handleModelAdded.bind(this)),this.collection.on("remove",this._handleModelDeleted.bind(this)),this.collection.on("change",this._handleModelChanged.bind(this)),this.collection.on("refresh",this._handleCollectionRefresh.bind(this)),this.collection.on("reset",this._handleCollectionReset.bind(this))},i.CollectionDataGridDataSource.prototype._isDataAvailable=function(){return null!=this.data},i.CollectionDataGridDataSource.prototype.getCount=function(e){var t;return null==this.precision&&(this.precision={}),"row"==e?-1===(t=this._totalSize())||0===t&&(!this._isDataAvailable()||this._size()>0)?(this.precision[e]="estimate",-1):(this.precision[e]="exact",this._size()):"column"==e?null!=this.columns?(this.precision[e]="exact",this.columns.length):(this.precision[e]="estimate",-1):0},i.CollectionDataGridDataSource.prototype.getCountPrecision=function(e){return null!=this.precision&&null!=this.precision[e]||this.getCount(e),this.precision[e]},i.CollectionDataGridDataSource.prototype.fetchHeaders=function(e,t,i){var n,o;null!=t&&(n=e.axis,(o={}).headerRange=e,o.callbacks=t,o.callbackObjects=i,this.pendingHeaderCallback[n]=o)},i.CollectionDataGridDataSource.prototype._handleHeaderFetchSuccess=function(e,t,n,o){var s,r,a,l,u;if(s=e.axis,r=e.start,a=e.count,"column"===s)null!=this.columns&&(l=Math.min(this.columns.length,r+a),u=new i.CollectionHeaderSet(r,l,this.columns,void 0,this._sortInfo));else if("row"===s&&null!=this.rowHeader)return null!=o&&(a=o.count),l=Math.min(this._size(),r+a),u=new i.CollectionHeaderSet(r,l,this.columns,this.rowHeader),void this._resolveModels(r,l,u,e,t,n);null!=t&&t.success&&t.success.call(n.success,u,e,null)},i.CollectionDataGridDataSource.prototype._getRanges=function(e){var t,i,n,o,s,r;for(t=0;t<e.length;t+=1)"row"===(i=e[t]).axis?(n=i.start,o=i.count):"column"===i.axis&&(s=i.start,r=i.count);return{rowStart:n,rowCount:o,colStart:s,colCount:r}},i.CollectionDataGridDataSource.prototype._handleCellFetchSuccess=function(e,t,n,o){var s,r,a,l,u,h;r=(s=this._getRanges(e)).rowStart,a=null!=o?Math.min(this._size(),r+o.count):Math.min(this._size(),r+s.rowCount),l=s.colStart,u=Math.min(null==this.columns?0:this.columns.length,l+s.colCount),h=new i.CollectionCellSet(r,a,l,u,this.columns),this._resolveModels(r,a,h,e,t,n)},i.CollectionDataGridDataSource.prototype._resolveModels=function(e,t,i,n,o,s){var r,a;for(r=[],a=e;a<t;a++)r.push(this.collection.at(a,{deferred:!0}));Promise.all(r).then(function(e){i.setModels(e),o.success.call(s.success,i,n)})},i.CollectionDataGridDataSource.prototype.fetchCells=function(e,t,i){null!=t&&(this.pendingCellCallback={},this.pendingCellCallback.cellRanges=e,this.pendingCellCallback.callbacks=t,this.pendingCellCallback.callbackObjects=i),this._fetchCells(e)},i.CollectionDataGridDataSource.prototype._processPendingHeaderCallbacks=function(e){var t,i,n,o,s;null!=(t=this.pendingHeaderCallback[e])&&(i=t.headerRange,n=t.callbacks,o=t.callbackObjects,"row"===e&&(s=t.actualRange),this._handleHeaderFetchSuccess(i,n,o,s),this.pendingHeaderCallback[e]=null)},i.CollectionDataGridDataSource.prototype._processPendingCellCallbacks=function(){var e,t,i,n;e=this.pendingCellCallback.cellRanges,t=this.pendingCellCallback.callbacks,i=this.pendingCellCallback.callbackObjects,n=this.pendingCellCallback.actualRange,this._handleCellFetchSuccess(e,t,i,n),this.pendingCellCallback=null},i.CollectionDataGridDataSource.prototype._fetchCells=function(e){var t,i,n;t=this._getRanges(e),i=t.rowStart,n=t.rowCount,this.collection.setRangeLocal(i,n).then(function(t){this.data=!0,this._setActualCallbackRanges(t.start,t.count),void 0!==this.columns?this._fetchCellsComplete(e):this.collection.at(i,{deferred:!0}).then(function(t){null!=t&&this._setupColumns(t),this._fetchCellsComplete(e)}.bind(this))}.bind(this),function(e){this._fetchCellsError(e)}.bind(this))},i.CollectionDataGridDataSource.prototype._fetchCellsError=function(e){i.Logger.error(e),null!=this.pendingHeaderCallback&&(this._processPendingHeaderErrorCallbacks("column",e),this._processPendingHeaderErrorCallbacks("row",e)),null!=this.pendingCellCallback&&this._processPendingCellErrorCallbacks(e)},i.CollectionDataGridDataSource.prototype._processPendingHeaderErrorCallbacks=function(e,t){var i,n,o,s;null!=(i=this.pendingHeaderCallback[e])&&(n=i.callbacks,o=i.callbackObjects,s=i.headerRange,n.error&&n.error.call(o.error,t,s),this.pendingHeaderCallback[e]=null)},i.CollectionDataGridDataSource.prototype._processPendingCellErrorCallbacks=function(e){var t,i,n;t=this.pendingCellCallback.callbacks,i=this.pendingCellCallback.callbackObjects,n=this.pendingCellCallback.cellRanges,t.error&&t.error.call(i.error,e,n),this.pendingCellCallback=null},i.CollectionDataGridDataSource.prototype._fetchCellsComplete=function(e){this.pendingCellCallback.cellRanges==e&&(null!=this.pendingHeaderCallback&&(this._processPendingHeaderCallbacks("column"),this._processPendingHeaderCallbacks("row")),null!=this.pendingCellCallback&&this._processPendingCellCallbacks())},i.CollectionDataGridDataSource.prototype._setActualCallbackRanges=function(e,t){var i={start:e,count:t};null!=this.pendingHeaderCallback.row&&(this.pendingHeaderCallback.row.actualRange=i),null!=this.pendingCellCallback&&(this.pendingCellCallback.actualRange=i)},i.CollectionDataGridDataSource.prototype._setupColumns=function(e){this.columns=e.keys(),-1!=this.columns.indexOf(this.rowHeader)&&this.columns.splice(this.columns.indexOf(this.rowHeader),1)},i.CollectionDataGridDataSource.prototype.keys=function(e){var t,n,o,s,r;return t=e.row,n=e.column,r=this,new Promise(function(e,a){r.collection.at(t,{deferred:!0}).then(function(t){null==t?e({row:null,column:null}):(o=i.CollectionDataGridUtils._getModelKey(t),null==r.columns&&r._setupColumns(t),s=r.columns[n],e({row:o,column:s}))}.bind(r))})},i.CollectionDataGridDataSource.prototype.indexes=function(e){var t,i,n,o;return t=e.row,i=e.column,o=this,new Promise(function(e,s){o.collection.indexOf(t,{deferred:!0}).then(function(t){-1!=t&&null==o.columns?o.collection.at(t,{deferred:!0}).then(function(s){o._setupColumns(s),n=o.columns.indexOf(i),e({row:t,column:n})}.bind(o)):(n=o.columns.indexOf(i),e({row:t,column:n}))}.bind(o))})},i.CollectionDataGridDataSource.prototype.getCapability=function(e){return"sort"===e?"column":"move"===e?"row":null},i.CollectionDataGridDataSource.prototype.sort=function(e,t,i){var n,o,s;null==i&&(i={}),null!=e?(o=e.direction,s=e.key,"column"===e.axis?(this.collection.IsVirtual()?(this.collection.comparator=s,this.collection.sortDirection="ascending"===o?1:-1):("ascending"===o&&(n=function(e,t){var i,n;return e=e.get(s),t=t.get(s),i=isNaN(e),n=isNaN(t),e instanceof Date&&(e=e.toISOString(),i=!0),t instanceof Date&&(t=t.toISOString(),n=!0),i&&n?e<t?-1:e===t?0:1:i?1:n?-1:e-t}),"descending"===o&&(n=function(e,t){var i,n;return e=e.get(s),t=t.get(s),i=isNaN(e),n=isNaN(t),e instanceof Date&&(e=e.toISOString()),t instanceof Date&&(t=t.toISOString()),i&&n?e>t?-1:e===t?0:1:i?-1:n?1:t-e}),this.collection.comparator=n),this.collection.sort(),this._setSortInfo(s),null!=t&&null!=t.success&&t.success.call(i.success)):null!=t&&null!=t.error&&t.error.call(i.error,"Axis value not supported")):this._resetSortOrder(t,i)},i.CollectionDataGridDataSource.prototype._resetSortOrder=function(e,t){this.collection.comparator=null,this.collection.reset(),null!=e&&null!=e.success&&e.success.call(t.success)},i.CollectionDataGridDataSource.prototype._setSortInfo=function(e){var t,i;t=this.collection.comparator,i=-1===this.collection.sortDirection?"descending":"ascending",null!=e||"function"!=typeof t?(this._sortInfo={},this._sortInfo.axis="column",this._sortInfo.direction=i,this._sortInfo.key=null==e?t:null):this._sortInfo={}},i.CollectionDataGridDataSource.prototype.move=function(e,t,i,n,o){var s;this.collection.get(e,{deferred:!0}).then(function(i){null==t?(this.collection.remove(i),this.collection.add(i),null!=n&&null!=n.success&&n.success.call(o.success)):(e===t?(s=this.collection.indexOf(t,{deferred:!0}),this.collection.remove(i)):(this.collection.remove(i),s=this.collection.indexOf(t,{deferred:!0})),s.then(function(e){this.collection.add(i,{at:e,force:!0}),null!=n&&null!=n.success&&n.success.call(o.success)}.bind(this)))}.bind(this))},i.CollectionDataGridDataSource.prototype.moveOK=function(e,t,i){return"valid"},i.CollectionDataGridDataSource.prototype._getModelEvent=function(e,t,i,n,o){var s={};return s.source=this,s.operation=e,s.keys={row:t,column:i},s.indexes={row:n,column:o},s},i.CollectionDataGridDataSource.prototype._handleModelAdded=function(e,t,n){var o,s;s=i.CollectionDataGridUtils._getModelKey(e),o=this._getModelEvent("insert",s,null,e.index,-1),this.handleEvent("change",o)},i.CollectionDataGridDataSource.prototype._handleModelDeleted=function(e,t,n){var o,s;s=i.CollectionDataGridUtils._getModelKey(e),o=this._getModelEvent("delete",s,null,n.index,-1),this.handleEvent("change",o)},i.CollectionDataGridDataSource.prototype._handleModelChanged=function(e,t,n){var o,s;s=i.CollectionDataGridUtils._getModelKey(e),o=this._getModelEvent("update",s,null,e.index,-1),this.handleEvent("change",o)},i.CollectionDataGridDataSource.prototype._handleCollectionRefresh=function(){var e;this.data=null,e=this._getModelEvent("refresh",null,null),this.handleEvent("change",e)},i.CollectionDataGridDataSource.prototype._handleCollectionReset=function(){var e;this.data=null,e=this._getModelEvent("reset",null,null),this.handleEvent("change",e)},i.CollectionDataGridDataSource.prototype._size=function(){return this.collection.size()},i.CollectionDataGridDataSource.prototype._totalSize=function(){return void 0===this.collection.totalResults?-1:this.collection.totalResults},i.CollectionDataGridDataSource.prototype.getCollection=function(){return this.collection},i.CollectionDataGridDataSource.prototype.getColumns=function(){return this.columns},i.CollectionDataGridDataSource.prototype.getRowHeader=function(){return this.rowHeader},i.CollectionDataGridDataSource.prototype.getData=function(){return this.data},i.CollectionDataGridUtils=function(){},i.CollectionDataGridUtils._getModelKey=function(e){var t;return null==(t=e.GetId())&&(t=e.GetCid()),t},i.CollectionHeaderSet=function(e,t,n,o,s){i.Assert.assertArrayOrNull(n),this.m_start=e,this.m_end=t,this.m_headers=n,this.m_rowHeader=o,this.m_sortInfo=s},i.CollectionHeaderSet.prototype.setModels=function(e){i.Assert.assertArray(e),null!=e&&e.length===this.getCount()&&(this.m_models=e)},i.CollectionHeaderSet.prototype.getData=function(e,t){return i.Assert.assert(e<=this.m_end&&e>=this.m_start,"index out of bounds"),i.Assert.assert(null==t||0==t,"level out of bounds"),null!=this.m_rowHeader?null==this.m_models?null:this.m_models[e-this.m_start].get(this.m_rowHeader):this.m_headers[e]},i.CollectionHeaderSet.prototype.getMetadata=function(e,t){var n,o;return i.Assert.assert(e<=this.m_end&&e>=this.m_start,"index out of bounds"),i.Assert.assert(null==t||0==t,"level out of bounds"),null!=this.m_rowHeader?null==this.m_models?null:(o=this.m_models[e-this.m_start],{key:i.CollectionDataGridUtils._getModelKey(o)}):(n=this.getData(e,t),this.m_sortInfo.key===n?{key:n,sortDirection:this.m_sortInfo.direction}:{key:n})},i.CollectionHeaderSet.prototype.getLevelCount=function(){return this.getCount()>0?1:0},i.CollectionHeaderSet.prototype.getExtent=function(e,t){return i.Assert.assert(e<=this.m_end&&e>=this.m_start,"index out of bounds"),i.Assert.assert(null==t||0==t,"level out of bounds"),{extent:1,more:{before:!1,after:!1}}},i.CollectionHeaderSet.prototype.getLabel=function(){return null},i.CollectionHeaderSet.prototype.getDepth=function(e,t){return i.Assert.assert(e<=this.m_end&&e>=this.m_start,"index out of bounds"),i.Assert.assert(null==t||0==t,"level out of bounds"),1},i.CollectionHeaderSet.prototype.getCount=function(){return Math.max(0,this.m_end-this.m_start)},i.CollectionHeaderSet.prototype.getStart=function(){return this.m_start},i.CollectionHeaderSet.prototype.getEnd=function(){return this.m_end},i.CollectionHeaderSet.prototype.getHeaders=function(){return this.m_headers},i.CollectionHeaderSet.prototype.getRowHeader=function(){return this.m_rowHeader},i.CollectionPagingDataSource=function(e){this.collection=e,this.current=0,this.Init();this.dataWindow=[],this._noInit=!0;try{this._setPageSize(10)}finally{this._noInit=!1}},i.Object.createSubclass(i.CollectionPagingDataSource,i.DataSource,"oj.CollectionPagingDataSource"),i.CollectionPagingDataSource.prototype.Init=function(){i.CollectionPagingDataSource.superclass.Init.call(this)},i.CollectionPagingDataSource.prototype._getSize=function(){return this._hasMore()?this.currentPageSize:this.totalSize()-this.current},i.CollectionPagingDataSource.prototype._refreshDataWindow=function(){this.dataWindow=new Array(this._getSize());var e=this;return this.collection.IterativeAt(this.current,this.current+this.dataWindow.length).then(function(t){for(var i=0;i<t.length;i++)e.dataWindow[i]=t[i];e._refreshObservableDataWindow(),e._endIndex=e._startIndex+e.dataWindow.length-1})},i.CollectionPagingDataSource.prototype._refreshObservableDataWindow=function(){if(void 0!==this.observableDataWindow){this.observableDataWindow.removeAll();for(var e=0;e<this.dataWindow.length;e++)this.observableDataWindow.push(i.KnockoutUtils.map(this.dataWindow[e]))}},i.CollectionPagingDataSource.prototype.getWindow=function(){return this.dataWindow},i.CollectionPagingDataSource.prototype.getWindowObservable=function(){return void 0===this.observableDataWindow&&(this.observableDataWindow=ko.observableArray(),this._refreshObservableDataWindow()),this.observableDataWindow},i.CollectionPagingDataSource.prototype.getPage=function(){return this._page},i.CollectionPagingDataSource.prototype.setPage=function(e,t){t=t||{},e=parseInt(e,10);try{i.CollectionPagingDataSource.superclass.handleEvent.call(this,i.PagingModel.EventType.BEFOREPAGE,{page:e,previousPage:this._page})}catch(e){return Promise.reject(null)}this.pageSize=null!=t.pageSize?t.pageSize:this.pageSize,t.startIndex=e*this.pageSize;var n=this._page;this._page=e,this._startIndex=t.startIndex;var o=this;return new Promise(function(e,s){o._fetchInternal(t).then(function(t){i.CollectionPagingDataSource.superclass.handleEvent.call(o,i.PagingModel.EventType.PAGE,{page:o._page,previousPage:n}),e(null)},function(e){o._page=n,o._startIndex=o._page*o.pageSize,s(null)})})},i.CollectionPagingDataSource.prototype.getStartItemIndex=function(){return this._startIndex},i.CollectionPagingDataSource.prototype.getEndItemIndex=function(){return this._endIndex},i.CollectionPagingDataSource.prototype.getPageCount=function(){var e=this.totalSize();return-1==e?-1:Math.ceil(e/this.pageSize)},i.CollectionPagingDataSource.prototype.fetch=function(e){var t=e||{};if(void 0!==t.pageSize&&void 0!==t.startIndex){if(!this._hasMore())return this._processSuccess(null),Promise.resolve();this.currentPageSize=t.startIndex+t.pageSize;var i=this;return this._refreshDataWindow().then(function(){i._processSuccess(null)})}return this._fetchInternal(e)},i.CollectionPagingDataSource.prototype._fetchInternal=function(e){var t=e||{};void 0!==t.startIndex&&(this.current=t.startIndex),void 0!==t.pageSize&&(this.pageSize=t.pageSize,this.currentPageSize=t.pageSize);var i=this;return new Promise(function(e,n){try{i.collection.fetch({success:function(){i._refreshDataWindow().then(function(){i._processSuccess(t),e({data:i.getWindow(),startIndex:i.current})})}})}catch(n){i._refreshDataWindow().then(function(){i._processSuccess(t),e({data:i.getWindow(),startIndex:i.current})})}})},i.CollectionPagingDataSource.prototype._processSuccess=function(e){var t=e||{};t.silent||this.handleEvent("sync",{data:this.getWindow(),startIndex:this.current}),t.success&&t.success()},i.CollectionPagingDataSource.prototype.handleEvent=function(e,t){return i.CollectionPagingDataSource.superclass.handleEvent.call(this,e,t)},i.CollectionPagingDataSource.prototype._hasMore=function(){return this.current+this.currentPageSize<this.totalSize()},i.CollectionPagingDataSource.prototype._setPageSize=function(e){this.pageSize=e,this.currentPageSize=e},i.CollectionPagingDataSource.prototype.setFetchCallback=function(e){this.fetchCallback=e},i.CollectionPagingDataSource.prototype.size=function(){var e=this.getWindow();return e?e.length:0},i.CollectionPagingDataSource.prototype.totalSize=function(){return this.collection.length},i.CollectionPagingDataSource.prototype.totalSizeConfidence=function(){return"actual"},i.CollectionPagingDataSource.prototype.getCapability=function(e){return null},i.CollectionTableDataSource=function(e,t){if(this.data={},!(e instanceof i.Collection)){var n=i.TableDataSource._LOGGER_MSG._ERR_DATA_INVALID_TYPE_SUMMARY,o=i.TableDataSource._LOGGER_MSG._ERR_DATA_INVALID_TYPE_DETAIL;throw new Error(n+"\n"+o)}i.CollectionTableDataSource.superclass.constructor.call(this,e,t),this._collection=e,this._addCollectionEventListeners(),this.Init(),(null==t||"enabled"!=t.startFetch&&null!=t.startFetch)&&null!=t||(this._startFetchEnabled=!0)},i.Object.createSubclass(i.CollectionTableDataSource,i.TableDataSource,"oj.CollectionTableDataSource"),i.CollectionTableDataSource.prototype.comparator=null,i.CollectionTableDataSource.prototype.Init=function(){i.CollectionTableDataSource.superclass.Init.call(this)},i.CollectionTableDataSource.prototype.at=function(e,t){(t=t||{}).deferred=!0;var n,o=this._collection.at(e,t),s=this;return s._isFetchingForAt=!0,new Promise(function(t,r){null!=o?o.then(function(i){s._isFetchingForAt=!1,n={data:i.attributes,index:e,key:i.id},t(n)},function(e){s._isFetchingForAt=!1,i.TableDataSource.superclass.handleEvent.call(s,i.TableDataSource.EventType.ERROR,e),r(e)}):t(null)})},i.CollectionTableDataSource.prototype.fetch=function(e){return"init"!=(e=e||{}).fetchType||this._startFetchEnabled?this._fetchInternal(e):Promise.resolve()},i.CollectionTableDataSource.prototype.get=function(e,t){(t=t||{}).deferred=!0;var n,o,s=this._collection.get(e,t),r=this;return new Promise(function(e,t){null!=s?s.then(function(t){o=r._wrapWritableValue(t,t.attributes),n={data:o,index:t.index,key:t.id},e(n)},function(e){i.TableDataSource.superclass.handleEvent.call(r,i.TableDataSource.EventType.ERROR,e),t(e)}):e(null)})},i.CollectionTableDataSource.prototype.sort=function(e){null==e?e=this.sortCriteria:this.sortCriteria=e;var t=this.comparator,i=this;return new Promise(function(n,o){null==t?(i._collection.comparator=e.key,"ascending"==e.direction?i._collection.sortDirection=1:i._collection.sortDirection=-1):i._collection.comparator=t,i._collection.sort(null),n({header:e.key,direction:e.direction})})},i.CollectionTableDataSource.prototype.totalSize=function(){var e=this._collection.totalResults>=0?this._collection.totalResults:-1;if(e>-1){var t=this._collection.size();return t>e?t:e}if(this._fetchResultSize>0)e=this._fetchResultSize;else if("atLeast"==this.totalSizeConfidence())return this._collection.size();return e},i.CollectionTableDataSource.prototype.totalSizeConfidence=function(){return this._collection.totalResults>=0?"actual":this._collection.hasMore?"atLeast":"unknown"},i.CollectionTableDataSource.prototype._addCollectionEventListeners=function(){var e=this;this._collection.on(i.Events.EventType.SYNC,function(t){if(t instanceof i.Model)i.TableDataSource.superclass.handleEvent.call(e,i.TableDataSource.EventType.CHANGE,{data:[t.attributes],keys:[t.id],indexes:[t.index]});else if(t instanceof i.Collection&&!e._isFetchingForAt&&!e._isFetching){var n=t.offset,o=t.lastFetchCount||t.lastFetchSize;if(o>0||e._collection.IsVirtual()){e._startIndex=n,e._pageSize=o;var s=0;(e._collection.totalResults>0||e._collection.hasMore)&&(s=n+o),e._isFetchingForAt=!0,t.IterativeAt(n,s).then(function(t){e._isFetchingForAt=!1;var i,o,s,r=[],a=[];for(i=0;i<t.length;i++)null!=t[i]&&(o=t[i],s=e._wrapWritableValue(o,o.attributes),r.push(s),a.push(o.id));var l={data:r,keys:a,startIndex:n};e._endFetch.call(e,{silent:!1},l,null)})}else{var r=e._getRowArray();e._endFetch.call(e,{silent:!1},r,null)}}}),this._collection.on(i.Events.EventType.ALLADDED,function(t,n){var o,s,r,a=[],l=[],u=[];for(o=0;o<n.length;o++)s=n[o],r=e._wrapWritableValue(s,s.attributes),a.push(r),l.push(s.id),u.push(s.index);i.TableDataSource.superclass.handleEvent.call(e,i.TableDataSource.EventType.ADD,{data:a,keys:l,indexes:u})}),this._collection.on(i.Events.EventType.ALLREMOVED,function(t,n){var o,s,r=[],a=[],l=[];for(o=0;o<n.length;o++)s=n[o],r.push(s.attributes),a.push(s.id),l.push(s.index);i.TableDataSource.superclass.handleEvent.call(e,i.TableDataSource.EventType.REMOVE,{data:r,keys:a,indexes:l})}),this._collection.on(i.Events.EventType.RESET,function(t){i.TableDataSource.superclass.handleEvent.call(e,i.TableDataSource.EventType.RESET,t)}),this._collection.on(i.Events.EventType.SORT,function(t,n){if(null==n||!n.add){var o={};null==t||null==!t.comparator||$.isFunction(t.comparator)||(o.header=t.comparator,o.direction=1===t.sortDirection?"ascending":"descending"),i.TableDataSource.superclass.handleEvent.call(e,i.TableDataSource.EventType.SORT,o)}}),this._collection.on(i.Events.EventType.CHANGE,function(t){i.TableDataSource.superclass.handleEvent.call(e,i.TableDataSource.EventType.CHANGE,{data:[t.attributes],keys:[t.id],indexes:[t.index]})}),this._collection.on(i.Events.EventType.DESTROY,function(t){i.TableDataSource.superclass.handleEvent.call(e,i.TableDataSource.EventType.DESTROY,t)}),this._collection.on(i.Events.EventType.REFRESH,function(t){i.TableDataSource.superclass.handleEvent.call(e,i.TableDataSource.EventType.REFRESH,t)}),this._collection.on(i.Events.EventType.ERROR,function(t,n,o){i.TableDataSource.superclass.handleEvent.call(e,i.TableDataSource.EventType.ERROR,t,n,o)}),this._collection.on(i.Events.EventType.REQUEST,function(t){e._isFetching||i.TableDataSource.superclass.handleEvent.call(e,i.TableDataSource.EventType.REQUEST,t)})},i.CollectionTableDataSource.prototype._fetchInternal=function(e){this._startFetch(e),e=e||{};var t=this;return this._isPaged=e.pageSize>0,this._startIndex=null==e.startIndex?this._startIndex:e.startIndex,this._pageSize=e.pageSize>0?e.pageSize:-1,e.pageSize=this._pageSize,e.startIndex=this._startIndex,e.refresh=!0,new Promise(function(i,n){var o=t._pageSize;t._isPaged||(o=25),t._collection.setRangeLocal(t._startIndex,o).then(function(n){var o;if(t._isPaged||t._collection.IsVirtual()){var s,r,a,l=[],u=[];for(s=0;s<n.models.length;s++)r=n.models[s],a=t._wrapWritableValue(r,r.attributes),l[s]=a,u[s]=r.id;o={data:l,keys:u,startIndex:t._startIndex},n.models.length<t._pageSize?t.totalSize()<0&&(t._fetchResultSize=t._startIndex+n.models.length):t._fetchResultSize=null}else o=t._getRowArray();t._endFetch.call(t,e,o,null),i(o)},function(i){t._endFetch.call(t,e,null,i),n(i)})})},i.CollectionTableDataSource.prototype._startFetch=function(e){this._isFetching=!0,e.silent||i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.REQUEST,{startIndex:e.startIndex})},i.CollectionTableDataSource.prototype._endFetch=function(e,t,n){this._isFetching=!1,null!=n?i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.ERROR,n):e.silent||i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.SYNC,t)},i.CollectionTableDataSource.prototype._getRowArray=function(){var e,t,i,n=this._collection.size()-1,o=[],s=[];for(e=0;e<=n;e++)i=this._collection.at(e),t=this._wrapWritableValue(i,i.attributes),o[e]=t,s[e]=i.id;return{data:o,keys:s,startIndex:this._startIndex}},i.CollectionTableDataSource.prototype.getCapability=function(e){return null},i.CollectionTableDataSource.prototype._wrapWritableValue=function(e,t){var i,n={};for(i in t)t.hasOwnProperty(i)&&function(){var t=i,o=e;Object.defineProperty(n,i,{get:function(){return o.get(t)},set:function(e){o.set(t,e,{silent:!0})},enumerable:!0})}();return n},i.CollectionNodeSet=function(e,t,i,n,o,s){this.parentKey=e,this.collection=t,this.models=i,this.childNodeSet=[],this.treeDataSource=n,this.start=o<i.length?o:0===i.length?0:i.length-1,this.count=-1===s?i.length:Math.min(i.length,s)},i.CollectionNodeSet.prototype.FetchDescendants=function(e){this._fetchDescendants(this,!0).then(function(){e.success&&e.success()})},i.CollectionNodeSet.prototype._fetchDescendants=function(e,t){return new Promise(function(t,i){var n=e.getCount();!function i(o){o<n?e.FetchChildNodeSet(o,{success:function(t){null!==t?e._fetchDescendants(t,!1).then(function(){i(o+1)}):i(o+1)}}):t(void 0)}(0)})},i.CollectionNodeSet.prototype.FetchChildNodeSet=function(e,t){var i=this.models[e];if(this.treeDataSource.parseMetadata(i).leaf)return this.childNodeSet[e]=null,void t.success(null);var n=this.treeDataSource.GetChildCollection(i),o=this.treeDataSource.parseMetadata(i).key,s=this;this.treeDataSource.FetchCollection(n,0,-1,{success:function(i){s.childNodeSet[e]=i,t.success(i)}},o)},i.CollectionNodeSet.prototype._getCollection=function(){return this.collection},i.CollectionNodeSet.prototype.getParent=function(){return this.parentKey},i.CollectionNodeSet.prototype.getStart=function(){return this.start},i.CollectionNodeSet.prototype.getCount=function(){return this.count},i.CollectionNodeSet.prototype.getData=function(e){return this._checkRange(e),this.models[e].attributes},i.CollectionNodeSet.prototype._checkRange=function(e){if(e<this.start||e>this.start+this.count)throw"Out of range"},i.CollectionNodeSet.prototype.getMetadata=function(e){this._checkRange(e);var t={leaf:!1,depth:-1},i=this.models[e],n=this.treeDataSource.parseMetadata(i);return t.key=n.key,t.leaf=n.leaf,t.depth=n.depth,t},i.CollectionNodeSet.prototype.getChildNodeSet=function(e){return this.treeDataSource._virtual?null:(this._checkRange(e),this.childNodeSet[e])},i.CollectionTreeDataSource=function(e){e=e||{},this.rootCollection=e.root,this.childCollectionCallback=e.childCollectionCallback,this.parseMetadata=e.parseMetadata,this.sortkey=null,this.sortdir="none",this.cache={},this._virtual=!1,i.CollectionTreeDataSource.superclass.constructor.call(this)},i.CollectionTreeDataSource.prototype.parseMetadata=function(e){return{key:e.idAttribute+"="+e.id}},i.Object.createSubclass(i.CollectionTreeDataSource,i.TreeDataSource,"oj.CollectionTreeDataSource"),i.CollectionTreeDataSource.prototype.Init=function(){i.CollectionTreeDataSource.superclass.Init.call(this)},i.CollectionTreeDataSource.prototype.getChildCount=function(e){var t=this.__getParentsChildCollectionFromCache(e);return t&&t.length>0?t.length:-1},i.CollectionTreeDataSource.prototype.getChildCollection=function(e,t){this.fetchChildren(e,null,{success:function(e){t.success(e._getCollection())},error:t.error})},i.CollectionTreeDataSource.prototype.fetchChildren=function(e,t,i,n){var o=(t=t||{}).start?t.start:0,s=t.count?t.count:-1;if(null!==e){var r=this;this._getModelForId(this.rootCollection,o,s,e,0).then(function(t){if(t){var n=r.GetChildCollection(t.model);try{r.FetchCollection(n,o,s,i,e)}catch(e){i&&i.error&&i.error({status:e.message})}}else i&&i.error&&i.error(e)})}else this.FetchCollection(null,o,s,i,null)},i.CollectionTreeDataSource.prototype.ModelAdded=function(e,t,i){var n=0;i&&i.at&&(n=i.at);var o=this._getParentChain(t),s=null!=o&&o.length>0?o[o.length-1]:null,r=this._createEvent(this,"insert",n,o,this._putModelInNodeSet(s,e));this.handleEvent("change",r)},i.CollectionTreeDataSource.prototype.ModelRemoved=function(e,t,i){var n=0;i&&i.index&&(n=i.index),this._removeCollectionFromCache(e);var o=this._createEvent(this,"delete",n,this._getParentChain(t),null);this.handleEvent("change",o)},i.CollectionTreeDataSource.prototype.ModelUpdated=function(e,t){var i=e.collection,n=e.GetIndex(),o=null;i&&(o=this._getParentChain(i));var s=null!=o&&o.length>0?o[o.length-1]:null,r=this._createEvent(this,"update",n,o,this._putModelInNodeSet(s,e));this.handleEvent("change",r)},i.CollectionTreeDataSource.prototype.CollectionRefreshed=function(e,t,i){var n=this._createEvent(this,"refresh",null,this._getParentChain(e),null);this.handleEvent("refresh",n)},i.CollectionTreeDataSource.prototype._putModelInNodeSet=function(e,t){var n=new i.Collection;return n.add(t),this._getNodeSet(n,e,0,1,[t])},i.CollectionTreeDataSource.prototype._getParentChain=function(e){var t=[],n=null,o=e;do{null!==(n=this._getParentOfCollection(o))&&(n!==i.CollectionTreeDataSource.ROOT_CACHE_KEY&&t.unshift(n),o=this._getCollectionOfKey(n))}while(null!=n);return t},i.CollectionTreeDataSource.ROOT_CACHE_KEY="%!@ROOT%#@!",i.CollectionTreeDataSource.prototype._getCacheKey=function(e){var t=e instanceof i.Model?this.parseMetadata(e).key:e;return e?t:i.CollectionTreeDataSource.ROOT_CACHE_KEY},i.CollectionTreeDataSource.prototype.__getParentsChildCollectionFromCache=function(e){return this.cache[this._getCacheKey(e)]},i.CollectionTreeDataSource.prototype._setCollectionInCache=function(e,t){t.on(i.Events.EventType.ADD,this.ModelAdded,this),t.on(i.Events.EventType.REMOVE,this.ModelRemoved,this),t.on(i.Events.EventType.CHANGE,this.ModelUpdated,this),t.on(i.Events.EventType.SYNC,this.CollectionRefreshed,this);var n=this._getCacheKey(e);return this.cache[n]=t,this.cache[n]},i.CollectionTreeDataSource.prototype._removeCollectionFromCache=function(e){var t=this._getCacheKey(e);for(var i in this.cache)if(this.cache.hasOwnProperty(i)&&i===t)return this.cache[t].off(null,null,this),void delete this.cache[t]},i.CollectionTreeDataSource.prototype._keyInCollection=function(e,t){for(var i=t.length,n=null,o=0;o<i;o++){if(n=t.models[o])if(e===this._getCacheKey(n))return!0}return!1},i.CollectionTreeDataSource.prototype._getCollectionOfKey=function(e){for(var t in this.cache)if(this.cache.hasOwnProperty(t)){var i=this.cache[t];if(this._keyInCollection(e,i))return i}return null},i.CollectionTreeDataSource.prototype._getParentOfCollection=function(e){for(var t in this.cache)if(this.cache.hasOwnProperty(t)&&this.cache[t]===e)return t;return null},i.CollectionTreeDataSource.prototype.GetChildCollection=function(e){var t=!0,i=this.__getParentsChildCollectionFromCache(e);return i||(t=!1,null!=(i=this.childCollectionCallback(this.rootCollection,e))&&(this._applySortToCollection(i),this._setCollectionInCache(e,i))),{collection:i,cached:t}},i.CollectionTreeDataSource.prototype._createEvent=function(e,t,i,n,o){return{source:e,operation:t,index:i,parent:n,data:o}},i.CollectionTreeDataSource.prototype.FetchCollection=function(e,t,i,n,o){var s=this;null===e&&((e=this.__getParentsChildCollectionFromCache(null))?e={collection:e,cached:!0}:(e={collection:s.rootCollection,cached:!1},s._setCollectionInCache(null,this.rootCollection))),e&&s._fetch(e,t,i,function(e,r){e.IsVirtual()&&(s._virtual=!0),n.success&&n.success(s._getNodeSet(e,o,t,i,r))},n.error)},i.CollectionTreeDataSource.prototype._getNodeSet=function(e,t,n,o,s){return new i.CollectionNodeSet(t,e,s,this,n,o)},i.CollectionTreeDataSource.prototype._scanForKey=function(e,t){var i=this,n=new Array(e.length);return new Promise(function(o,s){!function e(t,s,r){t<s.length?s.at(t,{deferred:!0}).then(function(a){if(n[t]=a,a){var l=i.parseMetadata(a);if(r===l.key)return void o({model:a,models:n})}e(++t,s,r)}):o({model:null,models:n})}(0,e,t)})},i.CollectionTreeDataSource.prototype._getModelForId=function(e,t,i,n,o){var s=this;return new Promise(function(r,a){s._scanForKey(e,n).then(function(e){e.model?r({model:e.model,depth:o}):function e(s,a,l){if(s<a.length){var u=l.GetChildCollection(a[s]);u.collection?l._fetch(u,t,i,function(u,h){l._getModelForId(u,t,i,n,o+1).then(function(t){t?r(t):e(++s,a,l)})},null):e(++s,a,l)}else r(null)}(0,e.models,s)})})},i.CollectionTreeDataSource.prototype._getModelsFromCollection=function(e){if(e.IsVirtual()){var t=new Array(e.length);return new Promise(function(i,n){(function(e,t,i,n){return new Promise(function(o,s){var r,a=function(t){return new Promise(function(i,o){e.at(t).then(function(e){n[t]=e,i(t+1)},o)})},l=Promise.resolve(0);for(r=t;r<i;r++)l=l.then(a);return l.then(o,s)})})(e,0,e.length,t).then(function(){i(t)})})}return new Promise(function(t,i){t(e.models)})},i.CollectionTreeDataSource.prototype._fetch=function(e,t,i,n,o){var s=this;if(e.cached)this._getModelsFromCollection(e.collection).then(function(t){n(e.collection,t)});else{if(this.sortkey&&"none"!==this.sortkey&&(e.collection.comparator=this.sortkey,e.collection.sortDirection=this.sortdir),e.collection.length>0||!e.collection.IsUrlBased(null))return void n(e.collection,e.collection.models);-1===i?(e.collection.modelLimit=-1,e.collection.fetch({success:function(e){s._getModelsFromCollection(e).then(function(t){n(e,t)})},error:o})):(e.collection.modelLimit=-1,e.collection.setRangeLocal(t,i).then(function(t){e.models=t.models,n(e.collection,t.models)}))}},i.CollectionTreeDataSource.prototype.fetchDescendants=function(e,t,n){this._virtual&&i.Assert.failedInAbstractFunction();var o=this;null!==e?this._getModelForId(this.rootCollection,0,-1,e,0).then(function(i){if(i){var n=o.GetChildCollection(i.model);o.FetchCollection(n,0,-1,{success:function(e){e.FetchDescendants({success:function(){t.success&&t.success(e)}})}},e)}}):this.FetchCollection(null,0,-1,{success:function(e){e.FetchDescendants({success:function(){t.success&&t.success(e)}})}},null)},i.CollectionTreeDataSource.prototype.sort=function(e,t){var i=e.key,n=e.direction,o=!1;if(i!==this.sortkey&&(this.sortkey=i,o=!0),n!==this.sortdir&&(this.sortdir=n,o=!0),o)for(var s in"none"===this.sortdir&&(this.cache={}),this.cache)if(this.cache.hasOwnProperty(s)){var r=this.cache[s];this._applySortToCollection(r)}t&&t.success&&t.success()},i.CollectionTreeDataSource.prototype._applySortToCollection=function(e){e.comparator=this.sortkey,e.sortDirection="ascending"===this.sortdir?1:-1,e.sort()},i.CollectionTreeDataSource.prototype.getSortCriteria=function(){return{key:this.sortkey,direction:this.sortdir}},i.CollectionTreeDataSource.prototype.move=function(e,t,n,o){i.Assert.failedInAbstractFunction()},i.CollectionTreeDataSource.prototype.moveOK=function(e,t,i){return"invalid"},i.CollectionTreeDataSource.prototype.getCapability=function(e){return"sort"===e?"default":"move"===e?"none":"batchFetch"===e?"disable":"fetchDescendants"===e?"disable":null},function(){var e=/^\s+/,t=/\s+$/,n=Math.round,o=Math.min,s=Math.max;function r(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var i=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=o(t,s(0,parseFloat(e))),i&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function a(e){return parseInt(e,16)}function l(e){return e<=1&&(e=100*e+"%"),e}i.Color=function(i){var n;n=function(i){var n={r:0,g:0,b:0},u=1,h=null,d=null,_=null,m=!1;"string"==typeof i&&(i=function(i){if("transparent"==(i=i.replace(e,"").replace(t,"").toLowerCase()))return{r:0,g:0,b:0,a:0};var n;if(n=c.rgb.exec(i))return{r:n[1],g:n[2],b:n[3]};if(n=c.rgba.exec(i))return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=c.hsl.exec(i))return{h:n[1],s:n[2],l:n[3]};if(n=c.hsla.exec(i))return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=c.hsv.exec(i))return{h:n[1],s:n[2],v:n[3]};if(n=c.hsva.exec(i))return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=c.hex6.exec(i))return{r:a(n[1]),g:a(n[2]),b:a(n[3])};if(n=c.hex3.exec(i))return{r:a(n[1]+""+n[1]),g:a(n[2]+""+n[2]),b:a(n[3]+""+n[3])};return!1}(i));"object"==typeof i&&(p(i.r)&&p(i.g)&&p(i.b)?(g=i.r,f=i.g,v=i.b,n={r:255*r(g,255),g:255*r(f,255),b:255*r(v,255)},m=!0):p(i.h)&&p(i.s)&&p(i.v)?(h=l(i.s),d=l(i.v),n=function(e,t,i){e=6*r(e,360),t=r(t,100),i=r(i,100);var n=Math.floor(e),o=e-n,s=i*(1-t),a=i*(1-o*t),l=i*(1-(1-o)*t),u=n%6;return{r:255*[i,a,s,s,l,i][u],g:255*[l,i,i,a,s,s][u],b:255*[s,s,l,i,i,a][u]}}(i.h,h,d),m=!0):p(i.h)&&p(i.s)&&p(i.l)&&(h=l(i.s),_=l(i.l),n=function(e,t,i){var n,o,s;function a(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}if(e=r(e,360),t=r(t,100),i=r(i,100),0===t)n=o=s=i;else{var l=i<.5?i*(1+t):i+t-i*t,u=2*i-l;n=a(u,l,e+1/3),o=a(u,l,e),s=a(u,l,e-1/3)}return{r:255*n,g:255*o,b:255*s}}(i.h,h,_),m=!0),void 0!==i.a&&(u=i.a));var g,f,v;if(!m)throw new Error("Invalid Color format");return u=function(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}(u),{r:o(255,s(n.r,0)),g:o(255,s(n.g,0)),b:o(255,s(n.b,0)),a:u}}(i=i||""),this._r=n.r,this._g=n.g,this._b=n.b,this._a=Math.round(100*n.a)/100},i.Color.prototype.getRed=function(e){return(e=e||!1)?this._r:n(this._r)},i.Color.prototype.getGreen=function(e){return(e=e||!1)?this._g:n(this._g)},i.Color.prototype.getBlue=function(e){return(e=e||!1)?this._b:n(this._b)},i.Color.prototype.getAlpha=function(){return this._a},i.Color.prototype.toString=function(){return"rgb"+((t=(e=this)._a<1)?"a(":"(")+n(e._r)+", "+n(e._g)+", "+n(e._b)+(t?", "+e._a:"")+")";var e,t},i.Color.prototype.isEqual=function(e){var t=!1;return e instanceof i.Color&&(t=this._r===e._r&&this._g===e._g&&this._b===e._b&&this._a===e._a),t},i.Color.ALICEBLUE=null,i.Color.ANTIQUEWHITE=null,i.Color.AQUA=null,i.Color.AQUAMARINE=null,i.Color.AZURE=null,i.Color.BEIGE=null,i.Color.BISQUE=null,i.Color.BLACK=null,i.Color.BLANCHEDALMOND=null,i.Color.BLUE=null,i.Color.BLUEVIOLET=null,i.Color.BROWN=null,i.Color.BURLYWOOD=null,i.Color.CADETBLUE=null,i.Color.CHARTREUSE=null,i.Color.CHOCOLATE=null,i.Color.CORAL=null,i.Color.CORNFLOWERBLUE=null,i.Color.CORNSILK=null,i.Color.CRIMSON=null,i.Color.CYAN=null,i.Color.DARKBLUE=null,i.Color.DARKCYAN=null,i.Color.DARKGOLDENROD=null,i.Color.DARKGRAY=null,i.Color.DARKGREY=null,i.Color.DARKGREEN=null,i.Color.DARKKHAKI=null,i.Color.DARKMAGENTA=null,i.Color.DARKOLIVEGREEN=null,i.Color.DARKORANGE=null,i.Color.DARKORCHID=null,i.Color.DARKRED=null,i.Color.DARKSALMON=null,i.Color.DARKSEAGREEN=null,i.Color.DARKSLATEBLUE=null,i.Color.DARKSLATEGRAY=null,i.Color.DARKSLATEGREY=null,i.Color.DARKTURQUOISE=null,i.Color.DARKVIOLET=null,i.Color.DEEPPINK=null,i.Color.DEEPSKYBLUE=null,i.Color.DIMGRAY=null,i.Color.DIMGREY=null,i.Color.DODGERBLUE=null,i.Color.FIREBRICK=null,i.Color.FLORALWHITE=null,i.Color.FORESTGREEN=null,i.Color.FUCHSIA=null,i.Color.GAINSBORO=null,i.Color.GHOSTWHITE=null,i.Color.GOLD=null,i.Color.GOLDENROD=null,i.Color.GRAY=null,i.Color.GREEN=null,i.Color.GREENYELLOW=null,i.Color.GREY=null,i.Color.HONEYDEW=null,i.Color.HOTPINK=null,i.Color.INDIANRED=null,i.Color.INDIGO=null,i.Color.IVORY=null,i.Color.KHAKI=null,i.Color.LAVENDER=null,i.Color.LAVENDERBLUSH=null,i.Color.LAWNGREEN=null,i.Color.LEMONCHIFFON=null,i.Color.LIGHTBLUE=null,i.Color.LIGHTCORAL=null,i.Color.LIGHTCYAN=null,i.Color.LIGHTGOLDENRODYELLOW=null,i.Color.LIGHTGRAY=null,i.Color.LIGHTGREEN=null,i.Color.LIGHTGREY=null,i.Color.LIGHTPINK=null,i.Color.LIGHTSALMON=null,i.Color.LIGHTSEAGREEN=null,i.Color.LIGHTSKYBLUE=null,i.Color.LIGHTSLATEGRAY=null,i.Color.LIGHTSLATEGREY=null,i.Color.LIGHTSTEELBLUE=null,i.Color.LIGHTYELLOW=null,i.Color.LIME=null,i.Color.LIMEGREEN=null,i.Color.LINEN=null,i.Color.MAGENTA=null,i.Color.MAROON=null,i.Color.MEDIUMAQUAMARINE=null,i.Color.MEDIUMBLUE=null,i.Color.MEDIUMORCHID=null,i.Color.MEDIUMPURPLE=null,i.Color.MEDIUMSEAGREEN=null,i.Color.MEDIUMSLATEBLUE=null,i.Color.MEDIUMSPRINGGREEN=null,i.Color.MEDIUMTURQUOISE=null,i.Color.MEDIUMVIOLETRED=null,i.Color.MIDNIGHTBLUE=null,i.Color.MINTCREAM=null,i.Color.MISTYROSE=null,i.Color.MOCCASIN=null,i.Color.NAVAJOWHITE=null,i.Color.NAVY=null,i.Color.OLDLACE=null,i.Color.OLIVE=null,i.Color.OLIVEDRAB=null,i.Color.ORANGE=null,i.Color.ORANGERED=null,i.Color.ORCHID=null,i.Color.PALEGOLDENROD=null,i.Color.PALEGREEN=null,i.Color.PALETURQUOISE=null,i.Color.PALEVIOLETRED=null,i.Color.PAPAYAWHIP=null,i.Color.PEACHPUFF=null,i.Color.PERU=null,i.Color.PINK=null,i.Color.PLUM=null,i.Color.POWDERBLUE=null,i.Color.PURPLE=null,i.Color.REBECCAPURPLE=null,i.Color.RED=null,i.Color.ROSYBROWN=null,i.Color.ROYALBLUE=null,i.Color.SADDLEBROWN=null,i.Color.SALMON=null,i.Color.SANDYBROWN=null,i.Color.SEAGREEN=null,i.Color.SEASHELL=null,i.Color.SIENNA=null,i.Color.SILVER=null,i.Color.SKYBLUE=null,i.Color.SLATEBLUE=null,i.Color.SLATEGRAY=null,i.Color.SLATEGREY=null,i.Color.SNOW=null,i.Color.SPRINGGREEN=null,i.Color.STEELBLUE=null,i.Color.TAN=null,i.Color.TEAL=null,i.Color.THISTLE=null,i.Color.TOMATO=null,i.Color.TURQUOISE=null,i.Color.VIOLET=null,i.Color.WHEAT=null,i.Color.WHITE=null,i.Color.WHITESMOKE=null,i.Color.YELLOW=null,i.Color.YELLOWGREEN=null,i.Color.TRANSPARENT=null;var u,h,d,c=(h="[\\s|\\(]+("+(u="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+u+")[,|\\s]+("+u+")\\s*\\)?",d="[\\s|\\(]+("+u+")[,|\\s]+("+u+")[,|\\s]+("+u+")[,|\\s]+("+u+")\\s*\\)?",{CSS_UNIT:new RegExp(u),rgb:new RegExp("rgb"+h),rgba:new RegExp("rgba"+d),hsl:new RegExp("hsl"+h),hsla:new RegExp("hsla"+d),hsv:new RegExp("hsv"+h),hsva:new RegExp("hsva"+d),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function p(e){return!!c.CSS_UNIT.exec(e)}Object.defineProperty(i.Color,"ALICEBLUE",{writable:!1,value:new i.Color("f0f8ff")}),Object.defineProperty(i.Color,"ANTIQUEWHITE",{writable:!1,value:new i.Color("faebd7")}),Object.defineProperty(i.Color,"AQUA",{writable:!1,value:new i.Color("0ff")}),Object.defineProperty(i.Color,"AQUAMARINE",{writable:!1,value:new i.Color("7fffd4")}),Object.defineProperty(i.Color,"AZURE",{writable:!1,value:new i.Color("f0ffff")}),Object.defineProperty(i.Color,"BEIGE",{writable:!1,value:new i.Color("f5f5dc")}),Object.defineProperty(i.Color,"BISQUE",{writable:!1,value:new i.Color("ffe4c4")}),Object.defineProperty(i.Color,"BLACK",{writable:!1,value:new i.Color("000")}),Object.defineProperty(i.Color,"BLANCHEDALMOND",{writable:!1,value:new i.Color("ffebcd")}),Object.defineProperty(i.Color,"BLUE",{writable:!1,value:new i.Color("00f")}),Object.defineProperty(i.Color,"BLUEVIOLET",{writable:!1,value:new i.Color("8a2be2")}),Object.defineProperty(i.Color,"BROWN",{writable:!1,value:new i.Color("a52a2a")}),Object.defineProperty(i.Color,"BURLYWOOD",{writable:!1,value:new i.Color("deb887")}),Object.defineProperty(i.Color,"CADETBLUE",{writable:!1,value:new i.Color("5f9ea0")}),Object.defineProperty(i.Color,"CHARTREUSE",{writable:!1,value:new i.Color("7fff00")}),Object.defineProperty(i.Color,"CHOCOLATE",{writable:!1,value:new i.Color("d2691e")}),Object.defineProperty(i.Color,"CORAL",{writable:!1,value:new i.Color("ff7f50")}),Object.defineProperty(i.Color,"CORNFLOWERBLUE",{writable:!1,value:new i.Color("6495ed")}),Object.defineProperty(i.Color,"CORNSILK",{writable:!1,value:new i.Color("fff8dc")}),Object.defineProperty(i.Color,"CRIMSON",{writable:!1,value:new i.Color("dc143c")}),Object.defineProperty(i.Color,"CYAN",{writable:!1,value:new i.Color("0ff")}),Object.defineProperty(i.Color,"DARKBLUE",{writable:!1,value:new i.Color("00008b")}),Object.defineProperty(i.Color,"DARKCYAN",{writable:!1,value:new i.Color("008b8b")}),Object.defineProperty(i.Color,"DARKGOLDENROD",{writable:!1,value:new i.Color("b8860b")}),Object.defineProperty(i.Color,"DARKGRAY",{writable:!1,value:new i.Color("a9a9a9")}),Object.defineProperty(i.Color,"DARKGREY",{writable:!1,value:new i.Color("a9a9a9")}),Object.defineProperty(i.Color,"DARKGREEN",{writable:!1,value:new i.Color("006400")}),Object.defineProperty(i.Color,"DARKKHAKI",{writable:!1,value:new i.Color("bdb76b")}),Object.defineProperty(i.Color,"DARKMAGENTA",{writable:!1,value:new i.Color("8b008b")}),Object.defineProperty(i.Color,"DARKOLIVEGREEN",{writable:!1,value:new i.Color("556b2f")}),Object.defineProperty(i.Color,"DARKORANGE",{writable:!1,value:new i.Color("ff8c00")}),Object.defineProperty(i.Color,"DARKORCHID",{writable:!1,value:new i.Color("9932cc")}),Object.defineProperty(i.Color,"DARKRED",{writable:!1,value:new i.Color("8b0000")}),Object.defineProperty(i.Color,"DARKSALMON",{writable:!1,value:new i.Color("e9967a")}),Object.defineProperty(i.Color,"DARKSEAGREEN",{writable:!1,value:new i.Color("8fbc8f")}),Object.defineProperty(i.Color,"DARKSLATEBLUE",{writable:!1,value:new i.Color("483d8b")}),Object.defineProperty(i.Color,"DARKSLATEGRAY",{writable:!1,value:new i.Color("2f4f4f")}),Object.defineProperty(i.Color,"DARKSLATEGREY",{writable:!1,value:new i.Color("2f4f4f")}),Object.defineProperty(i.Color,"DARKTURQUOISE",{writable:!1,value:new i.Color("00ced1")}),Object.defineProperty(i.Color,"DARKVIOLET",{writable:!1,value:new i.Color("9400d3")}),Object.defineProperty(i.Color,"DEEPPINK",{writable:!1,value:new i.Color("ff1493")}),Object.defineProperty(i.Color,"DEEPSKYBLUE",{writable:!1,value:new i.Color("00bfff")}),Object.defineProperty(i.Color,"DIMGRAY",{writable:!1,value:new i.Color("696969")}),Object.defineProperty(i.Color,"DIMGREY",{writable:!1,value:new i.Color("696969")}),Object.defineProperty(i.Color,"DODGERBLUE",{writable:!1,value:new i.Color("1e90ff")}),Object.defineProperty(i.Color,"FIREBRICK",{writable:!1,value:new i.Color("b22222")}),Object.defineProperty(i.Color,"FLORALWHITE",{writable:!1,value:new i.Color("fffaf0")}),Object.defineProperty(i.Color,"FORESTGREEN",{writable:!1,value:new i.Color("228b22")}),Object.defineProperty(i.Color,"FUCHSIA",{writable:!1,value:new i.Color("f0f")}),Object.defineProperty(i.Color,"GAINSBORO",{writable:!1,value:new i.Color("dcdcdc")}),Object.defineProperty(i.Color,"GHOSTWHITE",{writable:!1,value:new i.Color("f8f8ff")}),Object.defineProperty(i.Color,"GOLD",{writable:!1,value:new i.Color("ffd700")}),Object.defineProperty(i.Color,"GOLDENROD",{writable:!1,value:new i.Color("daa520")}),Object.defineProperty(i.Color,"GRAY",{writable:!1,value:new i.Color("808080")}),Object.defineProperty(i.Color,"GREY",{writable:!1,value:new i.Color("808080")}),Object.defineProperty(i.Color,"GREEN",{writable:!1,value:new i.Color("008000")}),Object.defineProperty(i.Color,"GREENYELLOW",{writable:!1,value:new i.Color("adff2f")}),Object.defineProperty(i.Color,"HONEYDEW",{writable:!1,value:new i.Color("f0fff0")}),Object.defineProperty(i.Color,"HOTPINK",{writable:!1,value:new i.Color("ff69b4")}),Object.defineProperty(i.Color,"INDIANRED",{writable:!1,value:new i.Color("cd5c5c")}),Object.defineProperty(i.Color,"INDIGO",{writable:!1,value:new i.Color("4b0082")}),Object.defineProperty(i.Color,"IVORY",{writable:!1,value:new i.Color("fffff0")}),Object.defineProperty(i.Color,"KHAKI",{writable:!1,value:new i.Color("f0e68c")}),Object.defineProperty(i.Color,"LAVENDER",{writable:!1,value:new i.Color("e6e6fa")}),Object.defineProperty(i.Color,"LAVENDERBLUSH",{writable:!1,value:new i.Color("fff0f5")}),Object.defineProperty(i.Color,"LAWNGREEN",{writable:!1,value:new i.Color("7cfc00")}),Object.defineProperty(i.Color,"LEMONCHIFFON",{writable:!1,value:new i.Color("fffacd")}),Object.defineProperty(i.Color,"LIGHTBLUE",{writable:!1,value:new i.Color("add8e6")}),Object.defineProperty(i.Color,"LIGHTCORAL",{writable:!1,value:new i.Color("f08080")}),Object.defineProperty(i.Color,"LIGHTCYAN",{writable:!1,value:new i.Color("e0ffff")}),Object.defineProperty(i.Color,"LIGHTGOLDENRODYELLOW",{writable:!1,value:new i.Color("fafad2")}),Object.defineProperty(i.Color,"LIGHTGRAY",{writable:!1,value:new i.Color("d3d3d3")}),Object.defineProperty(i.Color,"LIGHTGREY",{writable:!1,value:new i.Color("d3d3d3")}),Object.defineProperty(i.Color,"LIGHTGREEN",{writable:!1,value:new i.Color("90ee90")}),Object.defineProperty(i.Color,"LIGHTPINK",{writable:!1,value:new i.Color("ffb6c1")}),Object.defineProperty(i.Color,"LIGHTSALMON",{writable:!1,value:new i.Color("ffa07a")}),Object.defineProperty(i.Color,"LIGHTSEAGREEN",{writable:!1,value:new i.Color("20b2aa")}),Object.defineProperty(i.Color,"LIGHTSKYBLUE",{writable:!1,value:new i.Color("87cefa")}),Object.defineProperty(i.Color,"LIGHTSLATEGRAY",{writable:!1,value:new i.Color("789")}),Object.defineProperty(i.Color,"LIGHTSLATEGREY",{writable:!1,value:new i.Color("789")}),Object.defineProperty(i.Color,"LIGHTSTEELBLUE",{writable:!1,value:new i.Color("b0c4de")}),Object.defineProperty(i.Color,"LIGHTYELLOW",{writable:!1,value:new i.Color("ffffe0")}),Object.defineProperty(i.Color,"LIME",{writable:!1,value:new i.Color("0f0")}),Object.defineProperty(i.Color,"LIMEGREEN",{writable:!1,value:new i.Color("32cd32")}),Object.defineProperty(i.Color,"LINEN",{writable:!1,value:new i.Color("faf0e6")}),Object.defineProperty(i.Color,"MAGENTA",{writable:!1,value:new i.Color("f0f")}),Object.defineProperty(i.Color,"MAROON",{writable:!1,value:new i.Color("800000")}),Object.defineProperty(i.Color,"MEDIUMAQUAMARINE",{writable:!1,value:new i.Color("66cdaa")}),Object.defineProperty(i.Color,"MEDIUMBLUE",{writable:!1,value:new i.Color("0000cd")}),Object.defineProperty(i.Color,"MEDIUMORCHID",{writable:!1,value:new i.Color("ba55d3")}),Object.defineProperty(i.Color,"MEDIUMPURPLE",{writable:!1,value:new i.Color("9370db")}),Object.defineProperty(i.Color,"MEDIUMSEAGREEN",{writable:!1,value:new i.Color("3cb371")}),Object.defineProperty(i.Color,"MEDIUMSLATEBLUE",{writable:!1,value:new i.Color("7b68ee")}),Object.defineProperty(i.Color,"MEDIUMSPRINGGREEN",{writable:!1,value:new i.Color("00fa9a")}),Object.defineProperty(i.Color,"MEDIUMTURQUOISE",{writable:!1,value:new i.Color("48d1cc")}),Object.defineProperty(i.Color,"MEDIUMVIOLETRED",{writable:!1,value:new i.Color("c71585")}),Object.defineProperty(i.Color,"MIDNIGHTBLUE",{writable:!1,value:new i.Color("191970")}),Object.defineProperty(i.Color,"MINTCREAM",{writable:!1,value:new i.Color("f5fffa")}),Object.defineProperty(i.Color,"MISTYROSE",{writable:!1,value:new i.Color("ffe4e1")}),Object.defineProperty(i.Color,"MOCCASIN",{writable:!1,value:new i.Color("ffe4b5")}),Object.defineProperty(i.Color,"NAVAJOWHITE",{writable:!1,value:new i.Color("ffdead")}),Object.defineProperty(i.Color,"NAVY",{writable:!1,value:new i.Color("000080")}),Object.defineProperty(i.Color,"OLDLACE",{writable:!1,value:new i.Color("fdf5e6")}),Object.defineProperty(i.Color,"OLIVE",{writable:!1,value:new i.Color("808000")}),Object.defineProperty(i.Color,"OLIVEDRAB",{writable:!1,value:new i.Color("6b8e23")}),Object.defineProperty(i.Color,"ORANGE",{writable:!1,value:new i.Color("ffa500")}),Object.defineProperty(i.Color,"ORANGERED",{writable:!1,value:new i.Color("ff4500")}),Object.defineProperty(i.Color,"ORCHID",{writable:!1,value:new i.Color("da70d6")}),Object.defineProperty(i.Color,"PALEGOLDENROD",{writable:!1,value:new i.Color("eee8aa")}),Object.defineProperty(i.Color,"PALEGREEN",{writable:!1,value:new i.Color("98fb98")}),Object.defineProperty(i.Color,"PALETURQUOISE",{writable:!1,value:new i.Color("afeeee")}),Object.defineProperty(i.Color,"PALEVIOLETRED",{writable:!1,value:new i.Color("db7093")}),Object.defineProperty(i.Color,"PAPAYAWHIP",{writable:!1,value:new i.Color("ffefd5")}),Object.defineProperty(i.Color,"PEACHPUFF",{writable:!1,value:new i.Color("ffdab9")}),Object.defineProperty(i.Color,"PERU",{writable:!1,value:new i.Color("cd853f")}),Object.defineProperty(i.Color,"PINK",{writable:!1,value:new i.Color("ffc0cb")}),Object.defineProperty(i.Color,"PLUM",{writable:!1,value:new i.Color("dda0dd")}),Object.defineProperty(i.Color,"POWDERBLUE",{writable:!1,value:new i.Color("b0e0e6")}),Object.defineProperty(i.Color,"PURPLE",{writable:!1,value:new i.Color("800080")}),Object.defineProperty(i.Color,"REBECCAPURPLE",{writable:!1,value:new i.Color("663399")}),Object.defineProperty(i.Color,"RED",{writable:!1,value:new i.Color("f00")}),Object.defineProperty(i.Color,"ROSYBROWN",{writable:!1,value:new i.Color("bc8f8f")}),Object.defineProperty(i.Color,"ROYALBLUE",{writable:!1,value:new i.Color("4169e1")}),Object.defineProperty(i.Color,"SADDLEBROWN",{writable:!1,value:new i.Color("8b4513")}),Object.defineProperty(i.Color,"SALMON",{writable:!1,value:new i.Color("fa8072")}),Object.defineProperty(i.Color,"SANDYBROWN",{writable:!1,value:new i.Color("f4a460")}),Object.defineProperty(i.Color,"SEAGREEN",{writable:!1,value:new i.Color("2e8b57")}),Object.defineProperty(i.Color,"SEASHELL",{writable:!1,value:new i.Color("fff5ee")}),Object.defineProperty(i.Color,"SIENNA",{writable:!1,value:new i.Color("a0522d")}),Object.defineProperty(i.Color,"SILVER",{writable:!1,value:new i.Color("c0c0c0")}),Object.defineProperty(i.Color,"SKYBLUE",{writable:!1,value:new i.Color("87ceeb")}),Object.defineProperty(i.Color,"SLATEBLUE",{writable:!1,value:new i.Color("6a5acd")}),Object.defineProperty(i.Color,"SLATEGRAY",{writable:!1,value:new i.Color("708090")}),Object.defineProperty(i.Color,"SLATEGREY",{writable:!1,value:new i.Color("708090")}),Object.defineProperty(i.Color,"SNOW",{writable:!1,value:new i.Color("fffafa")}),Object.defineProperty(i.Color,"SPRINGGREEN",{writable:!1,value:new i.Color("00ff7f")}),Object.defineProperty(i.Color,"STEELBLUE",{writable:!1,value:new i.Color("4682b4")}),Object.defineProperty(i.Color,"TAN",{writable:!1,value:new i.Color("d2b48c")}),Object.defineProperty(i.Color,"TEAL",{writable:!1,value:new i.Color("008080")}),Object.defineProperty(i.Color,"THISTLE",{writable:!1,value:new i.Color("d8bfd8")}),Object.defineProperty(i.Color,"TOMATO",{writable:!1,value:new i.Color("ff6347")}),Object.defineProperty(i.Color,"TURQUOISE",{writable:!1,value:new i.Color("40e0d0")}),Object.defineProperty(i.Color,"VIOLET",{writable:!1,value:new i.Color("ee82ee")}),Object.defineProperty(i.Color,"WHEAT",{writable:!1,value:new i.Color("f5deb3")}),Object.defineProperty(i.Color,"WHITE",{writable:!1,value:new i.Color("fff")}),Object.defineProperty(i.Color,"WHITESMOKE",{writable:!1,value:new i.Color("f5f5f5")}),Object.defineProperty(i.Color,"YELLOW",{writable:!1,value:new i.Color("ff0")}),Object.defineProperty(i.Color,"YELLOWGREEN",{writable:!1,value:new i.Color("9acd32")}),Object.defineProperty(i.Color,"TRANSPARENT",{writable:!1,value:new i.Color("rgba(0,0,0,0)")})}(),i.__registerWidget("oj.ojColorPalette",$.oj.editableValue,{widgetEventPrefix:"oj",defaultElement:"<input>",options:{labelledBy:null,palette:null,swatchSize:"lg",labelDisplay:"off",layout:"grid",value:null},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;var t,i=e.subId,n=e.index,o=this._super(e);if(!o)switch(i){case"oj-palette-entry":(t=this._$LV.find(".oj-listview-item")).length&&n<t.length&&(o=t[n])}return o},getSubIdByNode:function(e){var t,i,n=$(e),o=null,s=-1,r=null;return n.is("li")&&n.hasClass("oj-listview-item-element")&&(o="oj-palette-entry",t=n.attr("id"),i=this._$LV.find(".oj-listview-item"),$.each(i,function(e,i){if($(i).attr("id")===t)return s=e,!1})),o&&(r={subId:o},s>=0&&(r.index=s)),null==r&&(r=this._super(e)),r},add:function(e){var t=null;e instanceof i.Color?t={color:e}:"object"==typeof e&&e.color instanceof i.Color&&(t=e),t&&(this._setPaletteBusyContext("The swatch add is being animated in the palette (id="+this.element.attr("id")+")."),t.id=this._getNewSwatchId(),this._opStack||(this._opStack=[]),this._opStack.push({op:"a",obj:t}),this._palDataSource.add(t),this._waitForLV())},remove:function(e){var t,n,o=null;"number"==(t=typeof e)?e>=0&&e<this._palette.length?o=this._palette[e].id:i.Logger.error("JET Color Palette (id='"+this.element.attr("id")+"'): Invalid index for remove ("+e+")"):"object"===t&&(n=e instanceof i.Color?e:e.color,o=this._findSwatchIdOfColorInPalette(n)),o&&(e={id:o},this._setPaletteBusyContext("The removed swatch is being animated in the palette (id="+this.element.attr("id")+")."),this._opStack||(this._opStack=[]),this._opStack.push({op:"r",obj:e}),this._palDataSource.remove(e),this._waitForLV())},whenReady:function(){var e=this;return new Promise(function(t,i){e._$LV.ojListView("whenReady").then(function(e){t(!0)})})},_destroy:function(){this._resolvePaletteBusyContext(),this._$LV&&(this._opStack=[],this._$LV.ojListView("destroy")),this._palDataSource=null,this._$paletteContainer.remove(),this._$boundElem.removeClass("oj-colorpalette"),this._clear(),this._super()},_ComponentCreate:function(){this._super(),this._initPalette()},_AfterCreate:function(){var e;if(this._super(),this._updateLabelledBy(null,this.options.labelledBy,this._$LV),this._IsCustomElement()||(e=this._GetLabelElement()),e){var t=e.attr("id");t?this._$LV.attr("aria-labelledby",t):i.Logger.warn("JET Color Palette: The label for this component needs an id in order to be accessible")}else{var n=this.element.attr("aria-label");n&&this._$LV.attr("aria-label",n)}},_setOption:function(e,t,i){var n=this.options.labelledBy,o=!1;switch(e){case"value":o=this._setOptValue(t);break;case"palette":this._setOptPalette(t);break;case"swatchSize":this._setOptSwatchSize(t);break;case"layout":this._setOptLayout(t);break;case"labelDisplay":this._setOptLabelDisplay(t);break;case"disabled":this._setOptDisabled(t,!0);break;case"labelledBy":this._updateLabelledBy(n,t,this._$LV)}o||this._super(e,t,i)},_updateLabelledBy:i.EditableValueUtils._updateLabelledBy,_onLVOptionChange:function(e,t){"selection"===t.option&&this._selected(e,t)},_waitForLV:function(){if(!this._LVResolve){var e=this;this._LVResolve=i.Context.getContext(this._$LV[0]).getBusyContext(),this._LVResolve.whenReady().then(function(){var t,i,n,o,s,r;if(e._LVResolve=null,e._resolvePaletteBusyContext(),e._opStack){for(n=!1,s=0;s<e._opStack.length;s++)i=(t=e._opStack[s]).obj,"a"!==t.op&&"r"!==t.op||(n=!0,o||(o=e._palette.slice(0)),"a"===t.op?o.push(i):"r"===t.op&&(r=e._findIndexOfSwatchById(o,i.id),o.splice(r,1),t.index=r));if(n)for(e._fireOptionChangeEvent("palette",o,null);e._opStack.length;)i=(t=e._opStack.shift()).obj,"a"===t.op?e._palette.push(i):"r"===t.op&&e._palette.splice(t.index,1)}},function(){i.Logger.error("JET Color Palette (id='"+e.element.attr("id")+"'): ListView timed out."),e._opStack=[]})}},_compareColorValues:function(e,t){var n=e instanceof i.Color,o=t instanceof i.Color,s=!1;return n&&o&&(s=e.isEqual(t)),s},_fireOptionChangeEvent:function(e,t,i){"palette"===e&&this.option(e,t,{_context:{originalEvent:i,internalSet:!0},changed:!0})},_findColorInPalette:function(e){var t,i,n=-1,o=this._palette,s=o.length;for(t=0;t<s;t++)if(i=o[t],e.isEqual(i.color)){n=t;break}return n},_findSwatchIdOfColorInPalette:function(e){var t,i,n=null,o=this._palette,s=o.length;for(t=0;t<s;t++)if(i=o[t],e.isEqual(i.color)){n=i.id;break}return n},_findIndexOfSwatchById:function(e,t){var i,n=-1,o=e.length;for(i=0;i<o;i++)if(e[i].id===t){n=i;break}return n},_setPaletteBusyContext:function(e){if(!this._resolve){var t=i.Context.getContext(this.element[0]).getBusyContext();this._resolve=t.addBusyState({description:e})}},_resolvePaletteBusyContext:function(){this._resolve&&(this._resolve(),this._resolve=null)},_renderer:function(e){var t,n,o,s,r,a;(t=e.data.color)instanceof i.Color||(t=i.Color.BLACK,i.Logger.warn("JET Color Palette (id='"+this.element.attr("id")+"'): Substituting oj.Color.BLACK for an object that is not an instance of oj.Color")),n=o=e.data.label,s="auto"===this._labelDisplay&&"list"===this._layout&&"sm"===this._swatchSize||"auto"===this._labelDisplay&&"grid"===this._layout&&"lg"===this._swatchSize,null!=t&&(a=n||this._convHex.format(t),s?(n=a||this._convHex.format(t),n=o?n:n.toUpperCase()):n=null,r=!!(this._isTransparent(t)||n&&"none"===n.toLowerCase()));var l,u="";return this._initSelection===e.data.id&&(u="oj-selected",this._initSelection=-1,this._selectedParent=e.parentElement),l="list"===this._layout?"oj-colorpalette-swatchsize-"+this._swatchSize+(r?" oj-colorpalette-swatch-none":""):this._swatchClass+(r?" oj-colorpalette-swatch-none":""),r?this._renderNone(s,n,a,l,u):this._renderStandard(t,s,n,a,l,u)},_renderStandard:function(e,t,i,n,o,s){var r;return r="<div class='oj-colorpalette-swatch-entry "+o+(t?" oj-colorpalette-swatch-showlabel":"")+"'><div class='oj-colorpalette-swatch-container'><div class='oj-colorpalette-swatch "+s+"' style='background-color:"+e.toString()+"'"+(i?"":" title='"+n+"'")+"></div></div>",i&&(r+="<span class='oj-colorpalette-swatch-text'>"+i+"</span>"),r+="</div>",$(r)[0]},_renderNone:function(e,t,i,n,o){var s;return s="<div class='oj-colorpalette-swatch-entry "+n+(e?" oj-colorpalette-swatch-showlabel":"")+"'><div class='oj-colorpalette-swatch-container'><div class='oj-colorpalette-swatch "+o+"'"+(t?"":" title='"+i+"'")+"><div class='oj-colorpalette-swatch-none-icon'></div></div></div>",t&&(s+="<span class='oj-colorpalette-swatch-text'>"+t+"</span>"),s+="</div>",$(s)[0]},_selected:function(e,t){var i,n,o=null;if((i=$(t.items[0]).find(".oj-colorpalette-swatch")).addClass("oj-selected"),n=this._selectedSwatch,this._selectedSwatch=i,n||this._selectedParent&&(n=$(this._selectedParent).find(".oj-colorpalette-swatch"),this._selectedParent=null),n&&n.removeClass("oj-selected"),1===t.value.length){for(var s=0;s<this._palette.length;s++)if(this._palette[s].id===t.value[0]){o=this._palette[s].color;break}this._SetValue(o,e),this._value=o}},_setOptDisabled:function(e,t){var i,n;(!t||t&&e!==this._disabled)&&(this._$LV&&this._$LV.ojListView("option","disabled",e),i=$(".oj-colorpalette-container .oj-colorpalette-swatch"),n=this,e?(this._disabledBG=[],$.each(i,function(e,t){n._disabledBG.push(t.style.backgroundColor),t.style.backgroundColor="#eee"})):(this._disabledBG&&this._disabledBG.length&&$.each(i,function(e,t){t.style.backgroundColor=n._disabledBG[e]}),this._disabledBG=null),this._disabled=e)},_setOptValue:function(e){var t=-1,n=[];if(this._palette.length>0&&e instanceof i.Color&&!this._compareColorValues(this._value,e)){if((t=this._findColorInPalette(e))>=0&&null!=this._palette[t].id){var o=this._palette[t].id;n.push(o)}this._$LV.ojListView("option","selection",n),this._value=e}return n.length>0},_setOptPalette:function(e){$.isArray(e)&&(this._isPaletteEqual(e,this._palette)||(this._setPaletteBusyContext("The palette (id="+this.element.attr("id")+") option change in progress."),this._opStack=[],this._palette=e.slice(0),this._initSelection=this._findColorInPalette(this._value),this._setData(e,this._initSelection,!0),this._waitForLV()))},_setOptSwatchSize:function(e){"string"==typeof e&&e!==this._swatchSize&&(this._swatchSize=e,this._swatchClass="oj-colorpalette-swatchsize-"+("lg"===e?"lg":"sm"===e?"sm":"xs"),this._$LV.ojListView("refresh"))},_setOptLabelDisplay:function(e){"string"==typeof e&&e!==this._labelDisplay&&("auto"!==e&&"off"!==e||(this._labelDisplay=e,this._$LV.ojListView("refresh")))},_setOptLayout:function(e){"string"==typeof e&&e!==this._layout&&(this._layout=e,this._setDisplayFormat(),this._$LV.ojListView("refresh"))},_setDisplayFormat:function(){var e="grid"===this._layout,t=e?"oj-colorpalette-grid":"oj-colorpalette-list";this._$LV.removeClass("oj-colorpalette-grid oj-colorpalette-list oj-listview-card-layout"),this._$LV.addClass(t),e&&this._$LV.addClass("oj-listview-card-layout")},_setData:function(e,t,n){this._addIdsToPalette(e),this._palDataSource=new i.ArrayTableDataSource(e,{idAttribute:"id"}),t>=0&&(this._palette[t].id&&(t=this._palette[t].id),0===this._palInitSelected.length?this._palInitSelected.push(t):this._palInitSelected[0]=t),n&&this._$LV.ojListView("option","data",this._palDataSource)},_initPalette:function(){this._setPaletteBusyContext("Palette (id="+this.element.attr("id")+") is initializing."),this._initData(),this._setup()},_setup:function(){this._$boundElem.append(this._markup),this._$boundElem.addClass("oj-colorpalette"),this._$paletteContainer=this._$boundElem.find(".oj-colorpalette-container"),this._$LV=this._$paletteContainer.find(":first"),this._$LV.attr("data-oj-context",""),this._value&&this._value instanceof i.Color&&(this._initSelection=this._findColorInPalette(this._value)),this._swatchId=0,this._setData(this._palette,this._initSelection,!1),this._$LV.ojListView({data:this._palDataSource,item:{renderer:this._renderer.bind(this)},optionChange:this._onLVOptionChange.bind(this),selectionMode:"single",selection:this._palInitSelected,rootAttributes:{style:"height:100%;width:100%"}}).attr("data-oj-internal","");var e=this;i.Context.getContext(this._$LV[0]).getBusyContext().whenReady().then(function(){if(e._$LV.ojListView("option","translations.msgNoData",""),e._setOptDisabled(e._disabled),e._$LV[0].scrollWidth>e._$LV[0].clientWidth){var t=e._getScrollbarWidth(),i="rtl"===e._GetReadingDirection();e._$LV.css(i?"padding-left":"padding-right",t+1)}e._resolvePaletteBusyContext()})},_initData:function(){var e;this._applyOptions(),this._converterFactory=i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_COLOR),this._convHex=this._converterFactory.createConverter({format:"hex"}),this._labelNone=this.getTranslatedString("labelNone"),e="grid"===this._layout?"oj-colorpalette-grid oj-listview-card-layout":"oj-colorpalette-list",this._markup=["<div class='oj-colorpalette-container'>","<ul class='"+e+"'/>","</div>"].join("")},_applyOptions:function(){var e,t=this.options;this._doc=this.element[0].ownerDocument,this._body=this._doc.body,this._$boundElem=$(this.element),this._disabled=!1,this._palInitSelected=[],this._palDataSource=null,"string"==typeof(e=t.swatchSize)&&"lg"!==(e=e.toLowerCase())&&"sm"!==e&&"xs"!==e&&(e="lg"),this._swatchSize=e,this._swatchClass="oj-colorpalette-swatchsize-"+e,"string"==typeof(e=t.labelDisplay)&&"auto"!==(e=e.toLowerCase())&&"off"!==e&&(e="auto"),this._labelDisplay=e,"string"==typeof(e=t.layout)&&("grid"!==(e=e.toLowerCase())&&"list"!==e&&(e="grid"),"grid"!==e&&"xs"===this._swatchSize&&(e="grid")),this._layout=e,(e=t.value)instanceof i.Color||(e=null),this._value=e||i.Color.BLACK,e=t.palette,$.isArray(e)||(e=[]),this._palette=e.slice(0),"boolean"==typeof(e=t.disabled)&&(this._disabled=e)},_isTransparent:function(e){var t=e.getRed(),i=e.getGreen(),n=e.getBlue(),o=e.getAlpha();return 0===t&&0===i&&0===n&&0===o},_isPaletteEqual:function(e,t){var i,n,o,s,r=e.length;if(s=!1,r===t.length){for(o=0;o<r&&(i=e[o],n=t[o],!this._compareColorValues(i.color,n.color)||i.label===n.label);o++);s=o>=r}return s},_addIdsToPalette:function(e){var t,i=e.length;for(t=0;t<i;t++)e[t].id=this._getNewSwatchId()},_getNewSwatchId:function(){var e=this._swatchId.toString();return this._swatchId++,e},_clear:function(){this._converterFactory=this._convHex=this._markup=this._$LV=null},_getScrollbarWidth:function(){var e=$("<div style='overflow: scroll; width: 100px; height: 100px; position: absolute; visibility: hidden;'><div style='width: 100%; height: 100%;'></div></div>");this.element.append(e);var t=e[0].offsetWidth,i=e.children()[0].offsetWidth;return e.remove(),t-i},_GetMessagingLauncherElement:function(){return this.element},_GetContentElement:function(){return this._$LV},_GetElementValue:function(){return this._value},_SetDisplayValue:function(e){e?this._value="string"==typeof e?new i.Color(e):e:(this._value=i.Color.BLACK,i.Logger.warn("JET Color Palette (id='"+this.element.attr("id")+"'): Substituting oj.Color.BLACK since display value is not defined."))},_GetDisplayValue:function(){return this._value.toString()},_GetDefaultStyleClass:function(){return"oj-colorpalette"}}),i.CustomElementBridge.registerMetadata("oj-color-palette","editableValue",{properties:{labelDisplay:{type:"string",enumValues:["auto","off"]},labelledBy:{type:"string"},layout:{type:"string",enumValues:["grid","list"]},palette:{type:"Array"},swatchSize:{type:"string",enumValues:["lg","sm","xs"]},translations:{type:"Object",properties:{labelNone:{type:"string",value:"None"}}},value:{writeback:!0}},extension:{_WIDGET_NAME:"ojColorPalette"}}),i.CustomElementBridge.register("oj-color-palette",{metadata:i.CustomElementBridge.getMetadata("oj-color-palette")}),function(){function e(e){var t=function(e,t,i){e/=255,t/=255,i/=255;var n,o,s=Math.max(e,t,i),r=Math.min(e,t,i),a=(s+r)/2;if(s==r)n=o=0;else{var l=s-r;switch(o=a>.5?l/(2-s-r):l/(s+r),s){case e:n=(t-i)/l+(t<i?6:0);break;case t:n=(i-e)/l+2;break;case i:n=(e-t)/l+4}n/=6}return[n,o,a]}(e.getRed(),e.getGreen(),e.getBlue());return t[0]*=360,t[1]*=100,t[2]*=100,t.push(e.getAlpha()),t}i.__registerWidget("oj.ojColorSpectrum",$.oj.editableValue,{widgetEventPrefix:"oj",defaultElement:"<input>",options:{labelledBy:null,value:null,rawValue:null},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;var t=e.subId,i=this._super(e);if(!i)switch(t){case"oj-spectrum":i=this._$spectrum[0];break;case"oj-spectrum-thumb":i=this._$spectrumThumb[0];break;case"oj-hue-slider-bar":i=this._$hueSlider.ojSlider("getNodeBySubId",{subId:"oj-slider-bar"});break;case"oj-hue-slider-bar-value":i=this._$hueSlider.ojSlider("getNodeBySubId",{subId:"oj-slider-bar-value"});break;case"oj-hue-slider-thumb":i=this._$hueSlider.ojSlider("getNodeBySubId",{subId:"oj-slider-thumb-0"});break;case"oj-opacity-slider-bar":i=this._$alphaSlider.ojSlider("getNodeBySubId",{subId:"oj-slider-bar"});break;case"oj-opacity-slider-bar-value":i=this._$alphaSlider.ojSlider("getNodeBySubId",{subId:"oj-slider-bar-value"});break;case"oj-opacity-slider-thumb":i=this._$alphaSlider.ojSlider("getNodeBySubId",{subId:"oj-slider-thumb-0"})}return i},getSubIdByNode:function(e){if(!e)return null;var t,i=$(e),n=null;return i.hasClass("oj-colorspectrum-spectrum")?n="oj-spectrum":i.hasClass("oj-colorspectrum-thumb")?n="oj-spectrum-thumb":(t=i.closest(".oj-slider").hasClass("oj-slider-vertical")?"hue":"opacity",i.hasClass("oj-slider-bar")?n="oj-"+t+"-slider-bar":i.hasClass("oj-slider-bar-value")?n="oj-"+t+"-slider-bar-value":i.hasClass("oj-slider-thumb")&&(n="oj-"+t+"-slider-thumb")),null!=n?{subId:n}:this._super(e)},_destroy:function(){this._$boundElem&&(this._clearListeners(),this._destroySliders(),this._removeMarkup(),this._$boundElem.removeClass("oj-colorspectrum"),this._clear()),this._super()},_ComponentCreate:function(){this._super(),this._initEditor()},_AfterCreate:function(){var e;if(this._super(),this._updateLabelledBy(null,this.options.labelledBy,this._$spectrumThumb),this._IsCustomElement()||(e=this._GetLabelElement()),e){var t=e.attr("id");t?this._$spectrumThumb.attr("aria-labelledby",t):i.Logger.warn("JET Color Spectrum: The label for this component needs an id in order to be accessible")}else{var n=this.element.attr("aria-label");n&&this._$spectrumThumb.attr("aria-label",n)}},_setOption:function(e,t,i){var n=this.options.labelledBy;switch(e){case"value":this._setOptValue(t);break;case"disabled":this._setOptDisabled(t,!0);break;case"labelledBy":this._updateLabelledBy(n,t,this._$spectrumThumb)}this._super(e,t,i)},_SetRawValue:function(e,t){if("string"==typeof e)try{e=new i.Color(e)}catch(t){i.Logger("ojColorSpectrum (id='"+this.element.attr("id")+"'): invalid "+this._transientValueName+" ("+e+"), defaulting to black"),e=i.Color.BLACK}var n={};n._context={originalEvent:t,writeback:!0,internalSet:!0,readOnly:!0},this._comparedRoundedColor(this.options[this._transientValueName],e)||this.option(this._transientValueName,e,n)},_updateLabelledBy:i.EditableValueUtils._updateLabelledBy,_comparedRoundedColor:function(e,t){return e.getRed()===t.getRed()&&e.getGreen()===t.getGreen()&&e.getBlue()===t.getBlue()&&e.getAlpha()===t.getAlpha()},_compareColorValues:function(e,t){var n=e instanceof i.Color,o=t instanceof i.Color;return n&&o&&e.isEqual(t)},_setOptDisabled:function(e,t){var i=!t||t&&e!==this._disabled;return i&&(this._enableSliders(!e),e?(this.element.addClass("oj-disabled"),this._makeThumbDraggable(!1)):(this.element.removeClass("oj-disabled"),this._makeThumbDraggable(!0)),this._disabled=e),i},_setOptValue:function(e){e instanceof i.Color&&(this._compareColorValues(this._value,e)||(this._setColorVals(e),this._setSliderValue(this._hueVal,!0),this._setSliderValue(this._alphaVal,!1),this._setSpectrumHue(this._hueVal,this._satVal,this._lumVal,this._alphaVal,!0)))},_onSliderOptionChange:function(e,t){var n,o,s,r,a,l,u,h;this._sliderSetup&&("rawValue"!=t.option&&"value"!=t.option||void 0===t.value||("value"==t.option&&(this._isOrigEvent=!!e.originalEvent),l=(h=$(e.target)).hasClass("oj-colorspectrum-hue"),u=h.hasClass("oj-colorspectrum-alpha"),(l||u)&&(o=this._hueVal,s=this._satVal,r=this._lumVal,a=this._alphaVal,l?(o=t.value,this._updateAlphaBG(o,s,r),this._setSpectrumHue(o,s,r,a,!1)):(a=t.value,this._setAriaText(o,s,r,a)),n=new i.Color({h:o,s:s,l:r,a:a}),(e.originalEvent||this._isOrigEvent)&&(this._isOrigEvent=!1,"rawValue"===t.option?this._SetRawValue(n,e):"value"===t.option&&this._SetValue(n,e)),this._setColorVals(n))))},_setSliderValue:function(e,t){(t?this._$hueSlider:this._$alphaSlider).ojSlider("option","value",e)},_setSpectrumHue:function(e,t,i,n,o){var s="hsl("+e+", 100%, 50%)";if(this._$spectrum.css("background-color",s),o){var r=this._getSatLumSpectrumPosition(t,i);this._setThumbPosition(r.x,r.y)}this._setAriaText(e,t,i,n)},_setSpectrumMask:function(){var e,t=" -___-linear-gradient(top, hsl(0, 0%, 100%) 0%, hsla(0, 0%, 100%, 0) 50%, hsla(0, 0%, 0%, 0) 50%, hsl(0, 0%, 0%) 100%), -___-linear-gradient(left, hsl(0, 0%, 50%) 0%, hsla(0, 0%, 50%, 0) 100%)";switch(i.AgentUtils.getAgentInfo().browser){case i.AgentUtils.BROWSER.FIREFOX:e="moz";break;case i.AgentUtils.BROWSER.CHROME:case i.AgentUtils.BROWSER.SAFARI:default:e="webkit";break;case i.AgentUtils.BROWSER.IE:e="ms"}t=(t=" -___-linear-gradient(top, hsl(0, 0%, 100%) 0%, hsla(0, 0%, 100%, 0) 50%, hsla(0, 0%, 0%, 0) 50%, hsl(0, 0%, 0%) 100%), -___-linear-gradient(left, hsl(0, 0%, 50%) 0%, hsla(0, 0%, 50%, 0) 100%)").replace(/___/g,e),this._$spectrum.css("backgroundImage",t)},_setThumbPosition:function(e,t){isNaN(e)||(this._xThumb=e),isNaN(t)||(this._yThumb=t),this._moveThumb(0,0)},_getSatLumSpectrumPosition:function(e,t){var i=Math.min(e/100*this._spectrumWidth,this._spectrumWidth),n=this._spectrumHeight-Math.min(t/100*this._spectrumHeight,this._spectrumHeight);return{x:Math.round(i),y:Math.round(n)}},_moveThumb:function(e,t){var i,n;(i=this._xThumb+e)<0&&(i=0),(n=this._yThumb+t)<0&&(n=0),i>=this._spectrumWidth&&(i=this._spectrumWidth-1),n>=this._spectrumHeight&&(n=this._spectrumHeight-1),this._xThumb=i,this._yThumb=n,i=i-this._spectrumThumbRadius+"px",n=n-this._spectrumThumbRadius+"px",this._$spectrumThumb[0].style.left=i,this._$spectrumThumb[0].style.top=n},_spectrumClick:function(e){if(!this._disabled){var t,n,o,s,r=this._$spectrum.offset(),a=e.pageX-r.left,l=e.pageY-r.top;a=Math.round(a),l=Math.round(l),n=(s=this._getSatLumFromPosition(a,l)).s,o=s.l,t=this._hueVal,this._updateAlphaBG(t,n,o);var u=new i.Color({h:t,s:n,l:o,a:this._alphaVal});this._SetRawValue(u,e),this._SetValue(u,e),this._setAriaText(t,n,o,this._alphaVal),this._value=u,this._setSatLum(n,o),this._setThumbPosition(a,l),this._$spectrumThumb.focus()}},_keyDown:function(e){var t,i,n,o,s=1;if(this._keyNow=(new Date).getTime(),this._keyStart<0&&(this._keyStart=this._keyNow,this._keyCount=0),o=this._keyNow-this._keyStart,this._keyCount++,(o>1400||this._keyCount>25)&&(s=3),i=n=0,40==(t=e.keyCode))n=s;else if(38==t)n=-s;else if(39==t)i=s;else if(37==t)i=-s;else if(36==t)this._setThumbPosition(0,0),this._keyStart=-1;else if(35==t)this._setThumbPosition(this._spectrumWidth-1,this._spectrumHeight-1),this._keyStart=-1;else if(33==t)this._setThumbPosition(NaN,0),this._keyStart=-1;else{if(34!=t)return;this._setThumbPosition(NaN,this._spectrumHeight-1),this._keyStart=-1}return this._moveThumb(i,n),this._handleThumbMoved(e,this._xThumb,this._yThumb),e.preventDefault(),!1},_keyUp:function(e){this._keyStart=-1;var t=this._getSatLumFromPosition(this._xThumb,this._yThumb);this._setAriaText(this._hueVal,t.s,t.l,this._alphaVal);var i=this.options[this._transientValueName];this._SetValue(i,e)},_initThumbDraggable:function(){this._$spectrum[0].getBoundingClientRect();this._thumbDragHandler||(this._thumbDragHandler=this._thumbDrag.bind(this)),this._$spectrumThumb.draggable({drag:this._thumbDragHandler,stop:this._thumbDragHandler})},_makeThumbDraggable:function(e){this._$spectrumThumb.draggable(e?"enable":"disable")},_thumbDrag:function(e,t){var i,n,o,s;t.position.left<-this._spectrumThumbRadius?(t.position.left=-this._spectrumThumbRadius,i=0):t.position.left+this._spectrumThumbRadius>=this._spectrumWidth&&(t.position.left=this._spectrumWidth-1-this._spectrumThumbRadius,n=this._spectrumWidth-1),t.position.top<-this._spectrumThumbRadius?(t.position.top=-this._spectrumThumbRadius,n=0):t.position.top+this._spectrumThumbRadius>=this._spectrumHeight&&(t.position.top=this._spectrumHeight-1-this._spectrumThumbRadius,n=this._spectrumHeight-1),o=this._$spectrumThumb.offset(),s=this._$spectrum.offset(),0!=i&&(i=o.left+this._spectrumThumbRadius-s.left),0!=n&&(n=o.top+this._spectrumThumbRadius-s.top),this._xThumb===i&&this._yThumb===n||("drag"===e.type?(this._xThumb=i,this._yThumb=n):(i=this._xThumb,n=this._yThumb),this._handleThumbMoved(e,i,n))},_handleThumbMoved:function(e,t,n){var o,s,r,a,l,u=!1;o=this._hueVal,s=(a=this._getSatLumFromPosition(t,n)).s,r=a.l,this._updateAlphaBG(o,s,r),l=new i.Color({h:o,s:s,l:r,a:this._alphaVal}),this._SetRawValue(l,e),"dragstop"===e.type&&(this._SetValue(l,e.originalEvent),u=!0),this._value=l,this._setSatLum(s,r),u&&this._setAriaText(o,s,r,this._alphaVal)},_getSatLumFromPosition:function(e,t){return this._hueVal,{s:e/(this._spectrumWidth-1)*100,l:100-t/(this._spectrumHeight-1)*100}},_updateAlphaBG:function(e,t,i){var n,o="hsla("+e+","+t+"%,"+i+"%, 0)",s="hsla("+e+","+t+"%,"+i+"%, 1.0)";this._isRtl&&(n=s,s=o,o=n),n=(n="linear-gradient(90deg, "+o+", "+s+")")+","+this._alphaBgUrl,this._disabledAlphaBG=n,this._$alphaBarBack.css("background",n)},_getRoundedHsl:function(e,t,i,n){var o="hsl",s="number"==typeof n&&n<1;return o+=s?"a(":"(",o+=(e=Math.round(e))+", "+(t=Math.round(100*t)/100)+"%, "+(i=Math.round(100*i)/100)+"%"+(s?","+n:"")+")"},_setSatLum:function(e,t){this._satVal=e,this._lumVal=t},_setColorVals:function(t){if(t){this._value=t;var i=e(t);this._hueVal=i[0],this._satVal=i[1],this._lumVal=i[2],this._alphaVal=i[3]}},_setAriaText:function(e,t,i,n){var o=this._getRoundedHsl(e,t,i,n);this._$spectrumThumb.attr("aria-valuetext",o)},_initEditor:function(){this._initData(),this._setup()},_setup:function(){this._$boundElem.append(this._markup),this._$boundElem.addClass("oj-colorspectrum"),$(".oj-colorspectrum-hue").uniqueId(),$(".oj-colorspectrum-alpha").uniqueId(),this._$editorContainer=this._$boundElem.find(".oj-colorspectrum-container"),this._$hueSlider=this._$boundElem.find(".oj-colorspectrum-hue"),this._$alphaSlider=this._$boundElem.find(".oj-colorspectrum-alpha"),this._$spectrum=this._$boundElem.find(".oj-colorspectrum-spectrum"),this._$spectrumThumb=this._$boundElem.find(".oj-colorspectrum-thumb"),this._spectrumThumbRadius=this._$spectrumThumb[0].offsetWidth/2,this._spectrumThumbRadius<=0&&(this._spectrumThumbRadius=this._$spectrumThumb.width()/2),this._isTouch=i.DomUtils.isTouchSupported(),this._spectrumWidth=this._$spectrum.width(),this._spectrumHeight=this._$spectrum.height(),this._$spectrumThumb.attr("aria-describedby",this._$boundElem.find(".oj-colorspectrum-thumb-description").uniqueId().attr("id"));var t=document.createElement("div");t.className="oj-colorspectrum-alpha-bg",this._$boundElem[0].appendChild(t),this._alphaBgUrl=window.getComputedStyle(t,null).getPropertyValue("background-image"),this._$boundElem[0].removeChild(t);var n=!!this._disabled,o=e(this._value);this._hueVal=o[0],this._satVal=o[1],this._lumVal=o[2],this._alphaVal=o[3],this._sliderSetup=!1,this._$hueSlider.ojSlider({max:360,min:0,step:1,value:this._hueVal,orientation:"vertical",optionChange:this._onSliderOptionChange.bind(this),rootAttributes:{class:"oj-slider-color-picker"}}).attr("data-oj-internal",""),this._$alphaSlider.ojSlider({max:1,min:0,step:.01,value:this._alphaVal,orientation:"horizontal",optionChange:this._onSliderOptionChange.bind(this),rootAttributes:{class:"oj-slider-color-picker"}}).attr("data-oj-internal",""),this._initSliders(),this._setSpectrumMask(),this._setSpectrumHue(this._hueVal,this._satVal,this._lumVal,this._alphaVal,!0),this._$spectrum.click(this._spectrumClick.bind(this)),this._initThumbDraggable(),this._setOptDisabled(n),this._$spectrumThumb.keydown(this._keyDown.bind(this)),this._$spectrumThumb.keyup(this._keyUp.bind(this)),this._$spectrum.focus(this._nofocus.bind(this)),this._focusable({element:this._$spectrumThumb,applyHighlight:!0}),i.DomUtils.isTouchSupported()&&this._setupTouch(this._$spectrumThumb)},_nofocus:function(e){return this._$spectrumThumb.focus(),!1},_initSliders:function(){var e={subId:"oj-slider-bar"};this._$hueBarBack=$(this._$hueSlider.ojSlider("getNodeBySubId",e)),this._$alphaBarBack=$(this._$alphaSlider.ojSlider("getNodeBySubId",e)),e.subId="oj-slider-bar-value",this._$hueBarValue=$(this._$hueSlider.ojSlider("getNodeBySubId",e)),this._$alphaBarValue=$(this._$alphaSlider.ojSlider("getNodeBySubId",e));var t="linear-gradient(0deg, #ff0000 0%, #ffff00 17%, #00ff00 33%, #00ffff 50%, #0000ff 67%, #ff00ff 83%, #ff0000 100%)";this._$hueBarBack.css("background",t),this._disabledHueBG=t,this._updateAlphaBG(this._hueVal,this._satVal,this._lumVal),this._sliderSetup=!0},_initData:function(){this._applyOptions(),this._xThumb=0,this._yThumb=0;var e=this._EscapeXSS(this.getTranslatedString("labelHue")),t=this._EscapeXSS(this.getTranslatedString("labelOpacity")),i=this._EscapeXSS(this.getTranslatedString("labelThumbDesc"));this._markup=["<div class='oj-colorspectrum-container'>","<div class='oj-colorspectrum-spectrum' tabindex='-1' style='position:relative'>","<div class='oj-colorspectrum-thumb' role='slider' aria-describedby='' style='position:absolute;top:-9999px;left:-9999px;' tabIndex='0'></div>","</div>","<div class='oj-colorspectrum-thumb-description oj-helper-hidden-accessible'>"+i+"</div>","<input class='oj-colorspectrum-hue' aria-label='"+e+"'></input>","<input class='oj-colorspectrum-alpha' aria-label='"+t+"'></input>","</div>"].join(""),this._keyStart=-1,this._isRtl="rtl"===this._GetReadingDirection()},_applyOptions:function(){var e,t=this.options;this._doc=this.element[0].ownerDocument,this._body=this._doc.body,this._$boundElem=$(this.element),this._disabled=!1,this._transientValueName=this._IsCustomElement()?"transientValue":"rawValue",(e=t.value)instanceof i.Color||(e=null),this._value=e||i.Color.BLACK,t[this._transientValueName]=this._value,e=t.disabled,this._disabled="boolean"==typeof e&&e},_enableSliders:function(e){var t=!e;if(e){this._$hueSlider.ojSlider("option","disabled",t),this._$alphaSlider.ojSlider("option","disabled",t);var i={subId:"oj-slider-bar"};this._$hueSlider=this._$boundElem.find(".oj-colorspectrum-hue"),this._$alphaSlider=this._$boundElem.find(".oj-colorspectrum-alpha"),this._$hueBarBack=$(this._$hueSlider.ojSlider("getNodeBySubId",i)),this._$alphaBarBack=$(this._$alphaSlider.ojSlider("getNodeBySubId",i)),this._disabledAlphaBG&&this._$alphaBarBack.css("background",this._disabledAlphaBG),this._disabledHueBG&&this._$hueBarBack.css("background",this._disabledHueBG)}else{var n=this._$hueBarBack.css("background");n&&n.length>0&&(this._disabledHueBG=n),(n=this._$alphaBarBack.css("background"))&&n.length>0&&(this._disabledAlphaBG=n),this._$hueBarBack.css("background",""),this._$alphaBarBack.css("background",""),this._$hueSlider.ojSlider("option","disabled",t),this._$alphaSlider.ojSlider("option","disabled",t)}},_destroySliders:function(){this._$hueSlider.ojSlider("destroy"),this._$alphaSlider.ojSlider("destroy")},_removeMarkup:function(){this._$boundElem.empty()},_clearListeners:function(){this._$spectrum.off("click"),this._$spectrumThumb.off("mousedown"),this._$spectrumThumb.off("keydown"),this._$spectrumThumb.off("keyup"),this._touchProxy&&this._tearDownTouch(this._$spectrumThumb)},_clear:function(){this._markup=this._$boundElem=this._$editorContainer=this._$hue=this._$alpha=this._$editorContainer=this._$hueSlider=this._$alphaSlider=this._$spectrum=this._$spectrumThumb=this._spectrumThumbSize=this._strings=this._mouseMoveHandler=this._mouseUpHandler=null},_setupTouch:function(e){this._touchProxy=i._TouchProxy.addTouchListeners(e)},_tearDownTouch:function(e){i._TouchProxy.removeTouchListeners(e)},_GetMessagingLauncherElement:function(){return this.element},_GetContentElement:function(){return this._$spectrumThumb},_GetElementValue:function(){return this._value},_SetDisplayValue:function(e){this._value="string"==typeof e?new i.Color(e):e},_GetDisplayValue:function(){return this._value.toString()},_GetDefaultStyleClass:function(){return"oj-colorspectrum"},_EscapeXSS:function(e){return $("<span>"+e+"</span>").text()}})}(),i.CustomElementBridge.registerMetadata("oj-color-spectrum","editableValue",{properties:{labelledBy:{type:"string"},transientValue:{readOnly:!0,writeback:!0},value:{writeback:!0},translations:{type:"Object",properties:{labelHue:{type:"string",value:"Hue"},labelOpacity:{type:"string",value:"Opacity"},labelSatLum:{type:"string",value:"Saturation/Luminance"},labelThumbDesc:{type:"string",value:"color spectrum four way slider"}}}},methods:{},extension:{_WIDGET_NAME:"ojColorSpectrum"}}),i.CustomElementBridge.register("oj-color-spectrum",{metadata:i.CustomElementBridge.getMetadata("oj-color-spectrum")}),function(){function e(e){if(null!=e){var t=i.__AttributeUtils.getExpressionInfo(e).expr;return null==t&&(t="'"+e+"'"),t}return null}i.__KO_CUSTOM_BINDING_PROVIDER_INSTANCE.addPostprocessor({preprocessNode:function(t,i){var n;if(1===t.nodeType){var o,s=["name","slot"],r=t.nodeName.toLowerCase(),a=!1;if("oj-slot"===r||"oj-bind-slot"===r?(a=!0,s.push("index"),o="ko _ojBindSlot_:{"):"oj-bind-template-slot"===r&&(a=!0,s.push("data"),s.push("as"),o="ko _ojBindTemplateSlot_:{"),a){for(var l=[],u=0;u<s.length;u++){var h=s[u],d=e(t.getAttribute(h));d&&l.push(h+":"+d)}o+=l.join(","),o+="}";var c=document.createComment(o),p=document.createComment("/ko");n=[c];var _=t.parentNode;for(_.insertBefore(c,t);t.childNodes.length>0;){var m=t.childNodes[0];_.insertBefore(m,t),n.push(m)}n.push(p),_.replaceChild(p,t)}}return n||i}})}(),i.CompositeTemplateRenderer={},i.CompositeTemplateRenderer.renderTemplate=function(e,t,n){var o=i.CompositeTemplateRenderer._storeNodes(t,n);ko.virtualElements.setDomNodeChildren(t,n),i.CompositeTemplateRenderer.invokeViewModelMethod(e.viewModel,"attached",[e.viewModelContext]),i.CompositeTemplateRenderer.invokeViewModelMethod(e.viewModel,"connected",[e.viewModelContext]);var s=i.CompositeTemplateRenderer._createKoBindingContext(t).createChildContext(e.viewModel,void 0,function(n){n[i.Composite.__COMPOSITE_PROP]=t,n.__oj_slots=e.slotMap,n.__oj_nodestorage=o,n.$slotNodeCounts=e.slotNodeCounts,n.$slotCounts=e.slotNodeCounts,n.$props=e.props,n.$properties=e.props,n.$unique=e.unique,n.$uniqueId=e.uniqueId,n.$parent=null,n.$parentContext=null,n.$parents=null});ko.applyBindingsToDescendants(s,t),i.CompositeTemplateRenderer.invokeViewModelMethod(e.viewModel,"bindingsApplied",[e.viewModelContext])},i.CompositeTemplateRenderer.getEnclosingComposite=function(e){for(var t=null,n=ko.contextFor(e);n&&!t;n=n.$parentContext)t=n[i.Composite.__COMPOSITE_PROP];return t},i.CompositeTemplateRenderer.createTracker=function(){return ko.observable()},i.CompositeTemplateRenderer.invokeViewModelMethod=function(e,t,i){if(null!=e){var n=e[t];return"function"==typeof n?ko.ignoreDependencies(n,e,i):void 0}},i.CompositeTemplateRenderer._storeNodes=function(e,t){var n,o=e.childNodes;if(o){(n=document.createElement("div")).setAttribute("data-bind","_ojNodeStorage_"),n.style.display="none",t.push(n);for(var s=[],r=0;r<o.length;r++){var a=o[r];i.BaseCustomElementBridge.isSlotAssignable(a)&&s.push(a)}s.forEach(function(e){n.appendChild(e)}),i.Components&&i.Components.subtreeHidden(n)}return n},i.CompositeTemplateRenderer._createKoBindingContext=function(e){var t=document.createElement("div");ko.applyBindings(null,t);var i=ko.contextFor(t);return ko.cleanNode(t),i},ko.bindingHandlers._ojNodeStorage_={init:function(){return{controlsDescendantBindings:!0}}},ko.bindingHandlers._ojBindSlot_={init:function(e,t,n,o,s){ko.utils.domNodeDisposal.addDisposeCallback(e,bt.cleanup.bind(null,e,s));var r=s.__oj_slots,a=t(),l=ko.utils.unwrapObservable,u=l(a.name)||"",h=l(a.index),d=null!=h?[r[u][h]]:r[u];if(d){for(var c=0;c<d.length;c++){d[c].__oj_slots=l(a.slot)||""}if(ko.virtualElements.setDomNodeChildren(e,d),i.Components)for(c=0;c<d.length;c++)i.Components.subtreeShown(d[c]);return{controlsDescendantBindings:!0}}}},ko.virtualElements.allowedBindings._ojBindSlot_=!0;var vt,Ct,yt,bt={};function St(e,t,i,n,o,s,r,a){this._elem=e,this._orientation=t,this._contentParent=i,this._bRtl=n,o&&(o.prevButtonId&&(this._prevButtonId=o.prevButtonId),o.nextButtonId&&(this._nextButtonId=o.nextButtonId),o.prevButtonStyleClass&&(this._prevButtonStyleClass=o.prevButtonStyleClass),o.nextButtonStyleClass&&(this._nextButtonStyleClass=o.nextButtonStyleClass),o.prevButtonIcon&&(this._prevButtonIcon=o.prevButtonIcon),o.nextButtonIcon&&(this._nextButtonIcon=o.nextButtonIcon)),s&&(s.scrollFunc&&(this._scrollFunc=s.scrollFunc),s.firstVisibleItemChangedFunc&&(this._firstVisibleItemChangedFunc=s.firstVisibleItemChangedFunc),s.callbackObj&&(this._callbackObj=s.callbackObj),s.addResizeListener&&(this._addResizeListenerFunc=s.addResizeListener),s.removeResizeListener&&(this._removeResizeListenerFunc=s.removeResizeListener),s.addStyleClassName&&(this._addStyleClassNameFunc=s.addStyleClassName),s.removeStyleClassName&&(this._removeStyleClassNameFunc=s.removeStyleClassName),s.hasStyleClassName&&(this._hasStyleClassNameFunc=s.hasStyleClassName),s.filterContentElements&&(this._filterContentElementsFunc=s.filterContentElements),s.subtreeDetached&&(this._subtreeDetachedFunc=s.subtreeDetached),s.subtreeAttached&&(this._subtreeAttachedFunc=s.subtreeAttached),s.addBusyState&&(this._addBusyStateFunc=s.addBusyState)),r&&(r.overflowContainerStyleClass&&(this._overflowContainerStyleClass=r.overflowContainerStyleClass),r.contentContainerStyleClass&&(this._contentContainerStyleClass=r.contentContainerStyleClass),r.itemStyleClass&&(this._itemStyleClass=r.itemStyleClass),r.hiddenStyleClass&&(this._hiddenStyleClass=r.hiddenStyleClass)),this._bExternalScroll=!0,this._firstVisibleItemIndex=0,a&&(this._agentVersion=a.browserVersion);var l=navigator.userAgent.toLowerCase();-1!==l.indexOf("gecko/")?this._bAgentGecko=!0:-1!==l.indexOf("opera")?this._bAgentOpera=!0:a&&"safari"===a.browser?this._bAgentSafari=!0:a&&"edge"===a.browser?this._bAgentEdge=!0:-1===l.indexOf("applewebkit")&&-1===l.indexOf("safari")||(this._bAgentWebkit=!0)}bt.cleanup=function(e,t){var n=t.__oj_nodestorage;if(n)for(var o=ko.virtualElements.firstChild(e);o;){var s=ko.virtualElements.nextSibling(o);null!=o.__oj_slots&&(n.appendChild(o),i.Components&&i.Components.subtreeHidden(o)),o=s}},ko.bindingHandlers._ojBindTemplateSlot_={init:function(e,t,n,o,s){ko.utils.domNodeDisposal.addDisposeCallback(e,bt.cleanup.bind(null,e,s));var r=s.__oj_slots,a=t(),l=ko.utils.unwrapObservable,u=l(a.name)||"",h=r[u],d=h&&h[h.length-1],c=!1;if(!d)for(var p=ko.virtualElements.childNodes(e),_=0;_<p.length;_++)if("TEMPLATE"===p[_].tagName){c=!0,d=p[_];break}if(d){var m=s[i.Composite.__COMPOSITE_PROP];"TEMPLATE"!==d.tagName&&i.Logger.error("Slot content for slot '"+u+"' under "+m.tagName.toLowerCase()+" with id '"+m.id+"' should be wrapped inside a <template> node."),d.__oj_slots=l(a.slot)||"",ko.computed(function(){var t=l(a.data),i=l(a.as),n=templateEngine.execute(c?e:m,d,t,c?i:null);ko.virtualElements.setDomNodeChildren(e,n)})}else ko.virtualElements.setDomNodeChildren(e,[]);return{controlsDescendantBindings:!0}}},ko.virtualElements.allowedBindings._ojBindTemplateSlot_=!0,St.prototype.setup=function(e){var t=this,i=St;if(e){this._createInnerContainers(),this._createPrevButton(this._prevButtonId,this._prevButtonStyleClass,this._prevButtonIcon),this._createNextButton(this._nextButtonId,this._nextButtonStyleClass,this._nextButtonIcon);var n=this._nextButton;this._buttonWidth=n.offsetWidth,this._buttonHeight=n.offsetHeight,this._hidePrevButton(),this._hideNextButton(),this._mouseWheelListener=function(e){t._handleMouseWheel(e)},i._addBubbleEventListener(this._elem,"mousewheel",this._mouseWheelListener),i._addBubbleEventListener(this._elem,"wheel",this._mouseWheelListener),this._touchStartListener=function(e){t._handleTouchStart(e)},i._addBubbleEventListener(this._overflowContainer,"touchstart",this._touchStartListener),this._touchMoveListener=function(e){t._handleTouchMove(e)},i._addBubbleEventListener(this._overflowContainer,"touchmove",this._touchMoveListener),this._touchEndListener=function(e){t._handleTouchEnd(e)},i._addBubbleEventListener(this._overflowContainer,"touchend",this._touchEndListener),i._addBubbleEventListener(this._overflowContainer,"touchcancel",this._touchEndListener),this._origScroll=0}else this._reinitializeInnerDom();this._clearCachedSizes(),this._adjustOverflowSize(e),this._handleResize(!0),e&&(this._addResizeListenerFunc&&(this._handleResizeFunc=function(e,i){t._handleResize(!1)},this._addResizeListenerFunc.call(this._callbackObj,this._elem,this._handleResizeFunc),this._addResizeListenerFunc.call(this._callbackObj,this._contentContainer,this._handleResizeFunc)),this._subtreeAttachedFunc&&this._subtreeAttachedFunc(this._contentContainer))},St.prototype.destroy=function(){this._resolveBusyState();var e=this._elem,t=St;t._removeBubbleEventListener(e,"mousewheel",this._mouseWheelListener),t._removeBubbleEventListener(e,"wheel",this._mouseWheelListener),t._removeBubbleEventListener(this._overflowContainer,"touchstart",this._touchStartListener),t._removeBubbleEventListener(this._overflowContainer,"touchmove",this._touchMoveListener),t._removeBubbleEventListener(this._overflowContainer,"touchend",this._touchEndListener),t._removeBubbleEventListener(this._overflowContainer,"touchcancel",this._touchEndListener),t._removeBubbleEventListener(this._overflowContainer,"scroll",this._scrollListener),this._mouseWheelListener=null,this._touchStartListener=null,this._touchMoveListener=null,this._touchEndListener=null,this._scrollListener=null,this._removeResizeListenerFunc&&this._handleResizeFunc&&(this._removeResizeListenerFunc.call(this._callbackObj,e,this._handleResizeFunc),this._removeResizeListenerFunc.call(this._callbackObj,this._contentContainer,this._handleResizeFunc)),this._handleResizeFunc=null,this._reparentChildrenFromContentContainer(this._contentContainer,e),e.removeChild(this._overflowContainer),e.removeChild(this._nextButton),e.removeChild(this._prevButton),this._nextButton=null,this._prevButton=null,this._overflowContainer=null,this._contentContainer=null,this._clearCachedSizes(),this._elem=null,this._scrollFunc=null,this._firstVisibleItemChangedFunc=null,this._addResizeListenerFunc=null,this._removeResizeListenerFunc=null,this._addStyleClassNameFunc=null,this._removeStyleClassNameFunc=null,this._hasStyleClassNameFunc=null,this._filterContentElementsFunc=null,this._subtreeDetachedFunc=null,this._subtreeAttachedFunc=null,this._addBusyStateFunc=null,this._callbackObj=null,this._contentParent=null},St.prototype.setFirstVisibleItem=function(e){for(var t=this._getSizes(),i=0;i<t.length;i++){var n=t[i];if(n.id===e){this._setCurrScroll(n.start,!0);break}}},St.prototype.handleResize=function(){this._handleResize(!1)},St.prototype.setScroll=function(e,t){this._setCurrScroll(e,t)},St.prototype.getScroll=function(){return this._getCurrScroll()},St.prototype._reparentChildrenToContentContainer=function(e,t){for(var i=e.childNodes;i.length>0;){var n=i[0];this._subtreeDetachedFunc&&this._subtreeDetachedFunc(n),t.appendChild(n),1===n.nodeType&&this._itemStyleClass&&this._addStyleClassNameFunc(n,this._itemStyleClass)}},St.prototype._reparentChildrenFromContentContainer=function(e,t){if(e)for(var i=e.childNodes;i.length>0;){var n=i[0];t.appendChild(n),1===n.nodeType&&this._itemStyleClass&&this._removeStyleClassNameFunc(n,this._itemStyleClass)}},St._getComputedStyle=function(e){var t=e.ownerDocument.defaultView;return t?t.getComputedStyle(e,null):e.currentStyle},St._getElemInnerWidth=function(e){var t=St,i=t._getComputedStyle(e);return t._getCSSLengthAsInt(i.width)},St._getElemInnerHeight=function(e){var t=St,i=t._getComputedStyle(e);return t._getCSSLengthAsInt(i.height)},St._getCSSLengthAsInt=function(e){if(e.length>0&&"auto"!=e){var t=parseInt(e,10);return isNaN(t)&&(t=0),t}return 0},St._addBubbleEventListener=function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i)},St._removeBubbleEventListener=function(e,t,i){e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent&&e.detachEvent("on"+t,i)},St._getWheelDelta=function(e){return null!=e.wheelDelta?e.wheelDelta:null!=e.deltaY?-e.deltaY:-e.detail},St._createTableDiv=function(){var e=document.createElement("div");return e.style.display="table",e},St._createTableRowDiv=function(){var e=document.createElement("div");return e.style.display="table-row",e},St._createTableCellDiv=function(){var e=document.createElement("div");return e.style.display="table-cell",e},St._wrapAndRestrictSize=function(e,t,i,n){var o=document.createElement("div"),s=o.style;return s.display="inline-block",o.appendChild(e),t.appendChild(o),i&&(s.maxWidth=o.offsetWidth+"px"),n&&(s.maxHeight=o.offsetHeight+"px"),o},St.prototype._isHorizontal=function(){return"horizontal"===this._orientation},St.prototype._isEmpty=function(){return!this._getContentParent().hasChildNodes()},St.prototype._reinitializeInnerDom=function(){this._origScroll=this._getCurrScroll(),this._setOverflowScroll(0),this._hidePrevButton(),this._hideNextButton()},St.prototype._clearCachedSizes=function(){this._totalSize=null,this._sizes=null},St.prototype._handleResize=function(e){e||this._reinitializeInnerDom(),this._clearCachedSizes(),this._totalSize&&this._sizes||(this._totalSize=this._measureContents()),e||this._adjustOverflowSize(!1),this._alignButtons()},St.prototype._alignButtons=function(){var e=this._nextButton,t=this._prevButton,i=e.style,n=t.style,o=this._contentContainer,s=this._totalSize;this._sizes;if(this._isHorizontal()){var r=.5*(s.h-o.offsetHeight);i.top=r+"px",n.top=r+"px"}else{var a=.5*(s.w-o.offsetWidth);this._bRtl&&(a=-a),i.left=a+"px",n.left=a+"px"}},St.prototype._adjustOverflowSize=function(e){var t=this._contentContainer,i=this._isHorizontal(),n=St,o=i?n._getElemInnerWidth(this._elem):n._getElemInnerHeight(this._elem);this._minScroll=0,this._maxScroll=i?t.offsetWidth-o+this._buttonWidth:t.offsetHeight-o+this._buttonHeight,this._maxScroll<0&&(this._maxScroll=0),this._hidePrevButton(),this._hideNextButton(),this._setCurrScroll(e?this._minScroll:this._origScroll,!0),this._origScroll=0},St.prototype._createInnerContainers=function(){var e=this,t=this._elem,i=St,n=document.createElement("div");this._overflowContainer=n,this._overflowContainerStyleClass&&this._addStyleClassNameFunc(n,this._overflowContainerStyleClass);var o=document.createElement("div");this._contentContainer=o,this._contentContainerStyleClass&&this._addStyleClassNameFunc(o,this._contentContainerStyleClass),this._reparentChildrenToContentContainer(t,o),t.appendChild(n),n.appendChild(o),this._scrollListener=function(t){e._handleScroll(t)},i._addBubbleEventListener(n,"scroll",this._scrollListener)},St.prototype._getContentElements=function(){for(var e=[],t=this._contentParent?this._contentParent:this._contentContainer,i=t.children,n=i.length,o=0;o<n;o++){var s=i[o];1===s.nodeType&&e.push(s)}this._filterContentElementsFunc&&(e=(0,this._filterContentElementsFunc)(e));if(t===this._contentContainer&&this._itemStyleClass)for(o=0;o<e.length;o++){var r=e[o];this._hasStyleClassNameFunc(r,this._itemStyleClass)||this._addStyleClassNameFunc(r,this._itemStyleClass)}return e},St.prototype._createPrevButton=function(e,t,i){var n=this,o=document.createElement("div");this._prevButton=o,e&&o.setAttribute("id",e),o.setAttribute("class",t),o.setAttribute("aria-hidden","true");this._isHorizontal();St._addBubbleEventListener(o,"click",function(e){n._scrollPrev()}),i&&o.appendChild(i),this._elem.insertBefore(o,this._overflowContainer)},St.prototype._createNextButton=function(e,t,i){var n=this,o=document.createElement("div");this._nextButton=o,e&&o.setAttribute("id",e),o.setAttribute("class",t),o.setAttribute("aria-hidden","true");this._isHorizontal();St._addBubbleEventListener(o,"click",function(e){n._scrollNext()}),i&&o.appendChild(i),this._elem.appendChild(o)},St.prototype._getContentParent=function(){var e=this._contentParent;return e||(e=this._contentContainer),e},St.prototype._measureContents=function(){var e=this._getContentParent(),t=this._getContentElements(),i={w:0,h:0},n=[];if(e.hasChildNodes()&&t&&t.length>0){var o,s=t,r=this._isHorizontal();o=this._contentContainer.offsetWidth;for(var a=0,l=null,u=0;u<s.length;u++){var h=s[u];if(1===h.nodeType){var d=h.offsetWidth,c=h.offsetHeight,p={w:d,h:c,id:h.id};if(r){var _=h.offsetLeft;if(!this._contentParent&&0===_)_=h.parentNode.offsetLeft;this._bRtl?p.start=o-(_+d):p.start=_,0===u&&(a=p.start),p.start-=a,i.w=p.start+d,i.h=Math.max(i.h,c),p.end=i.w-1}else{var m=h.offsetTop;if(!this._contentParent&&0===m)m=h.parentNode.offsetTop;p.start=m,i.w=Math.max(i.w,d),i.h=p.start+c,p.end=i.h-1}if(l&&l.end>=p.start){var g=l.end-(p.start-1);l.end-=g,r?l.w-=g:l.h-=g}n.push(p),l=p}}}return this._sizes=n,i},St.prototype._getSizes=function(){if(!this._sizes){var e=this._measureContents();this._totalSize||(this._totalSize=e)}return this._sizes},St.prototype._showNextButton=function(){this._removeStyleClassNameFunc(this._nextButton,this._hiddenStyleClass)},St.prototype._showPrevButton=function(){this._removeStyleClassNameFunc(this._prevButton,this._hiddenStyleClass)},St.prototype._hideNextButton=function(){this._addStyleClassNameFunc(this._nextButton,this._hiddenStyleClass)},St.prototype._hidePrevButton=function(){this._addStyleClassNameFunc(this._prevButton,this._hiddenStyleClass)},St.prototype._isNextButtonShown=function(){return!this._hasStyleClassNameFunc(this._nextButton,this._hiddenStyleClass)},St.prototype._isPrevButtonShown=function(){return!this._hasStyleClassNameFunc(this._prevButton,this._hiddenStyleClass)},St.prototype._getButtonSize=function(){return this._isHorizontal()?this._buttonWidth:this._buttonHeight},St.prototype._updateButtonVisibility=function(e){var t=this._getButtonSize(),i=this._getCurrScroll(),n=(this._getCurrViewportSize(),this._needsScroll());e<=this._minScroll?(this._isPrevButtonShown()&&(t,i-=t),this._hidePrevButton()):n&&(this._isPrevButtonShown()||(t,i+=t),this._showPrevButton()),e>=this._maxScroll?(this._isNextButtonShown()&&t,this._hideNextButton()):n&&(this._isNextButtonShown()||t,this._showNextButton()),this._setOverflowScroll(i)},St.prototype._setOverflowScroll=function(e){var t=this._overflowContainer;this._isHorizontal()?t.scrollLeft=this._convertScrollLogicalToBrowser(e):t.scrollTop=e},St.prototype._getCurrViewportSize=function(){var e=this._overflowContainer;return this._isHorizontal()?e.offsetWidth:e.offsetHeight},St.prototype._setCurrScroll=function(e,t){this._bScrolling||(this._bExternalScroll=!1,this._setCurrScrollHelper(e,t))},St.prototype._setCurrScrollHelper=function(e,t){if(!this._isEmpty()){this._bScrolling=!0,e=this._constrainScroll(e),this._updateButtonVisibility(e);var i=this._scrollFunc;if(t||!i||e===this._getCurrScroll())this._onScrollAnimEnd(this._bExternalScroll?this._getCurrScroll():e);else{this._addBusyStateFunc&&(this._busyStateResolveFunc=this._addBusyStateFunc("scrolling"));var n=St,o=Math.abs(this._getCurrScroll()-e)/n._SCROLL_SPEED,s=this;i.call(this._callbackObj,this._overflowContainer,this._convertScrollLogicalToBrowser(e),o,function(){s._onScrollAnimEnd(e),s._resolveBusyState()})}}},St.prototype._resolveBusyState=function(){this._busyStateResolveFunc&&(this._busyStateResolveFunc(),this._busyStateResolveFunc=null)},St.prototype._getCurrScroll=function(){var e=this._overflowContainer;return this._isHorizontal()?this._convertScrollBrowserToLogical(e.scrollLeft):e.scrollTop},St.prototype._needsScroll=function(){var e=this._contentContainer,t=this._overflowContainer;return this._isHorizontal()?e.offsetWidth>t.offsetWidth:e.offsetHeight>t.offsetHeight},St.prototype._constrainScroll=function(e){return!this._needsScroll()||e<this._minScroll?e=this._minScroll:e>this._maxScroll&&(e=this._maxScroll),e},St.prototype._handleMouseWheel=function(e){var t=this._bScrolling;if(this._needsScroll()&&!this._bScrolling){var i=St._getWheelDelta(e);i<0&&this._isNextButtonShown()?(t=!0,this._scrollNext()):i>0&&this._isPrevButtonShown()&&(t=!0,this._scrollPrev())}t&&(e.preventDefault(),e.stopPropagation())},St.prototype._handleTouchStart=function(e){var t=e.touches;if(this._needsScroll()&&!this._bScrolling&&1===t.length){this._bTouch=!0;var i=t[0];this._touchStartCoord=this._isHorizontal()?i.pageX:i.pageY,this._touchStartScroll=this._getCurrScroll(),this._touchStartNextScroll=this._calcNextScroll(),this._touchStartPrevScroll=this._calcPrevScroll(),this._touchStartNextButtonShown=this._isNextButtonShown(),this._touchStartPrevButtonShown=this._isPrevButtonShown()}},St.prototype._handleTouchMove=function(e){var t=this._isHorizontal(),i=e.touches[0],n=(t?i.pageX:i.pageY)-this._touchStartCoord,o=t&&this._bRtl?n>0:n<0,s=o&&this._touchStartNextButtonShown||!o&&this._touchStartPrevButtonShown;if(this._bTouch&&s){var r=St,a=this._overflowContainer,l=r._SWIPE_THRESHOLD*(t?a.offsetWidth:a.offsetHeight);Math.abs(n)<l?(this._setCurrScroll(this._touchStartScroll-n,!0),(this._touchStartNextButtonShown&&!this._isNextButtonShown()||this._touchStartPrevButtonShown&&!this._isPrevButtonShown())&&(this._bTouch=!1)):(this._setCurrScroll(o?this._touchStartNextScroll:this._touchStartPrevScroll,!1),this._bTouch=!1),this._scrolledForThisTouch=!0}this._scrolledForThisTouch&&(e.preventDefault(),e.stopPropagation())},St.prototype._handleTouchEnd=function(e){this._bTouch&&this._setCurrScroll(this._touchStartScroll,!1),this._bTouch=!1,this._scrolledForThisTouch=!1},St.prototype._handleScroll=function(e){this._bExternalScroll&&!this._bScrolling&&this._setCurrScrollHelper(this._getCurrScroll(),!0)},St.prototype._onScrollAnimEnd=function(e){if(this._setOverflowScroll(e),this._bExternalScroll=!0,this._bScrolling=!1,this._firstVisibleItemChangedFunc){this._firstVisibleItemIndex=this._calcFirstVisibleItemIndex();var t=this._calcLastVisibleItemIndex(),i=this._getSizes(),n=i[this._firstVisibleItemIndex];this._firstVisibleItemIndex!==t&&this._getCurrScroll()>n.start&&this._firstVisibleItemIndex<i.length-2&&(this._firstVisibleItemIndex++,n=i[this._firstVisibleItemIndex]),this._firstVisibleItemId=n.id,this._firstVisibleItemChangedFunc.call(this._callbackObj,this._firstVisibleItemId)}},St.prototype._setExternalScrollTimeout=function(){var e=this;window.setTimeout(function(){e&&(e._bExternalScroll=!0)},0)},St.prototype._scrollNext=function(){this._bScrolling||this._setCurrScroll(this._calcNextScroll(),!1)},St.prototype._scrollPrev=function(){this._bScrolling||this._setCurrScroll(this._calcPrevScroll(),!1)},St.prototype._calcNextScroll=function(){var e=this._calcNextVisibleItemIndex();return e===this._calcFirstVisibleItemIndex()?this._getCurrScroll()+this._getCurrViewportSize():this._calcStartScroll(e)},St.prototype._calcPrevScroll=function(){var e=this._calcPrevVisibleItemIndex(),t=0;return t=e===this._calcLastVisibleItemIndex()?this._getCurrScroll()-this._getCurrViewportSize():this._calcEndScroll(e),this._isNextButtonShown()||(t+=this._getButtonSize()),t<this._getButtonSize()&&(t=this._minScroll),t},St.prototype._calcStartScroll=function(e){return this._getSizes()[e].start},St.prototype._calcEndScroll=function(e){return this._getSizes()[e].end-this._getCurrViewportSize()+1},St.prototype._calcFirstVisibleItemIndex=function(){var e=this._getCurrScroll(),t=this._calcItemIndex(e);return t<0?0:t},St.prototype._calcLastVisibleItemIndex=function(){var e=this._getCurrViewportSize(),t=this._getCurrScroll()+e-1,i=this._calcItemIndex(t),n=this._getSizes();return i<0?n.length-1:i},St.prototype._calcPrevVisibleItemIndex=function(){var e=this._getCurrScroll()-1,t=this._calcItemIndex(e);return t<0?0:t},St.prototype._calcNextVisibleItemIndex=function(){var e=this._getCurrViewportSize(),t=this._getCurrScroll()+e,i=this._calcItemIndex(t),n=this._getSizes();return i<0?n.length-1:i},St.prototype._calcItemIndex=function(e){for(var t=this._getSizes(),i=0;i<t.length;i++){if(e<=t[i].end)return i}return-1},St.prototype._convertScrollLogicalToBrowser=function(e){var t=e;if(this._bRtl&&this._isHorizontal())if(this._bAgentGecko||this._bAgentSafari&&this._agentVersion>=10)t=-e;else if(this._bAgentWebkit||this._bAgentOpera||this._bAgentSafari&&this._agentVersion<10){var i=this._contentContainer,n=this._overflowContainer;t=i.offsetWidth-n.offsetWidth-e}return t},St.prototype._convertScrollBrowserToLogical=function(e){return this._convertScrollLogicalToBrowser(e)},St._SCROLL_SPEED=1.1,St._SWIPE_THRESHOLD=.33,function(){i.__registerWidget("oj.ojConveyorBelt",$.oj.baseComponent,{defaultElement:"<div>",widgetEventPrefix:"oj",options:{orientation:"horizontal",contentParent:null},_ComponentCreate:function(){this._super(),this.element.addClass("oj-conveyorbelt oj-component"),this.options.disabled&&i.Logger.warn(e),this._setup(!0)},refresh:function(){this._super();var e,t="rtl"===this._GetReadingDirection(),i=this._bRTL!=t;i||(e=this._cbCommon.getScroll()),this._destroyCBCommon(),this._setup(!0),i||this._cbCommon.setScroll(e,!0)},_NotifyShown:function(){if(this._super(),this._needsSetup)this._setup(this._needsSetup[0]);else if(this._cbCommon){this._cbCommon.handleResize()}},_NotifyAttached:function(){if(this._super(),this._needsSetup)this._setup(this._needsSetup[0]);else if(this._cbCommon){this._cbCommon.handleResize()}},_setup:function(e){var n=this,o=this.element,s=this.options,r=s.orientation;if("vertical"===r?o.addClass("oj-conveyorbelt-vertical"):o.removeClass("oj-conveyorbelt-vertical"),!this._canCalculateSizes()){var a=!1;return this._needsSetup&&(a=this._needsSetup[0]),void(this._needsSetup=[e||a])}if(this._needsSetup=null,this._bRTL="rtl"===this._GetReadingDirection(),e&&!this._cbCommon){var l=null,u=null,h=null,d=null,c=null;"vertical"!==r?(l="oj-enabled oj-conveyorbelt-overflow-indicator oj-start oj-default",u="oj-enabled oj-conveyorbelt-overflow-indicator oj-end oj-default",h=this._createIcon("oj-conveyorbelt-overflow-icon oj-start"),d=this._createIcon("oj-conveyorbelt-overflow-icon oj-end"),c=this._animateScrollLeft):(l="oj-enabled oj-conveyorbelt-overflow-indicator oj-top oj-default",u="oj-enabled oj-conveyorbelt-overflow-indicator oj-bottom oj-default",h=this._createIcon("oj-conveyorbelt-overflow-icon oj-top"),d=this._createIcon("oj-conveyorbelt-overflow-icon oj-bottom"),c=this._animateScrollTop);var p={};p.prevButtonStyleClass=l,p.nextButtonStyleClass=u,p.prevButtonIcon=h,p.nextButtonIcon=d;var _={overflowContainerStyleClass:"oj-conveyorbelt-overflow-container",contentContainerStyleClass:"oj-conveyorbelt-content-container",itemStyleClass:"oj-conveyorbelt-item",hiddenStyleClass:"oj-helper-hidden"},m={addResizeListener:function(e,n){i.DomUtils.addResizeListener(e,n,t)}};m.removeResizeListener=i.DomUtils.removeResizeListener,m.addStyleClassName=this._addStyleClassName,m.removeStyleClassName=this._removeStyleClassName,m.hasStyleClassName=this._hasStyleClassName,m.filterContentElements=function(e){return n._filterContentElements(e)},m.subtreeDetached=i.Components.subtreeDetached,m.subtreeAttached=i.Components.subtreeAttached,m.addBusyState=function(e){return n._addBusyState(e)},"enabled"!==i.Config.getAutomationMode()&&(m.scrollFunc=c);var g=null;s.contentParent&&(g=$(s.contentParent)[0]);var f=i.AgentUtils.getAgentInfo(navigator.userAgent);this._cbCommon=new St(o[0],r,g,this._bRTL,p,m,_,f)}if(this._cbCommon.setup(e),e)for(var v=o.find(".oj-conveyorbelt-overflow-indicator"),C=0;C<v.length;C++)this._setupButtonMouseStyles($(v[C]))},_destroy:function(){this._destroyCBCommon(),this.element.removeClass("oj-conveyorbelt oj-component oj-conveyorbelt-vertical"),this._super()},_setOption:function(t,n,o){var s=!1,r=this.options;switch(t){case"containerParent":case"orientation":s=r.orientation!=n;break;case"disabled":i.Logger.warn(e)}s&&this._destroyCBCommon(),this._super(t,n,o),s&&this._setup(!0)},_destroyCBCommon:function(){var e=this._cbCommon;e&&(this.element.find(".oj-conveyorbelt-overflow-indicator").off(this.eventNamespace),e.destroy());this._cbCommon=null},_canCalculateSizes:function(){var e=document.createElement("div"),t=e.style;t.width="10px",t.height="10px",t["-webkit-flex"]="0 0 auto",t.flex="0 0 auto";var i=this.element[0];i.appendChild(e);var n=!1;try{n=e.offsetWidth>0&&e.offsetHeight>0}catch(e){}return i.removeChild(e),n},_setupButtonMouseStyles:function(e){this._AddHoverable({element:e,afterToggle:function(t){"mouseenter"===t?e.removeClass("oj-default"):"mouseleave"===t&&e.addClass("oj-default")}}),this._AddActiveable({element:e,afterToggle:function(t){"mousedown"===t||"touchstart"===t||"mouseenter"===t?e.removeClass("oj-default"):"mouseup"!==t&&"touchend"!==t&&"touchcancel"!==t&&"mouseleave"!==t||e.addClass("oj-default")}})},_createIcon:function(e){var t=document.createElement("span");return t.setAttribute("class","oj-component-icon "+e),t},_animateScrollLeft:function(e,t,i,n){var o={};o.scrollLeft=t,$(e).animate(o,i,"swing",n)},_animateScrollTop:function(e,t,i,n){var o={};o.scrollTop=t,$(e).animate(o,i,"swing",n)},_addStyleClassName:function(e,t){$(e).addClass(t)},_removeStyleClassName:function(e,t){$(e).removeClass(t)},_hasStyleClassName:function(e,t){return $(e).hasClass(t)},_filterContentElements:function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];this._hasStyleClassName(n,"oj-helper-detect-expansion")||this._hasStyleClassName(n,"oj-helper-detect-contraction")||t.push(n)}return t},_addBusyState:function(e){var t=this.element,n=i.Context.getContext(t[0]).getBusyContext(),o="ConveyorBelt";o+=" (id='"+t.attr("id")+"')";var s={description:o+=": "+e};return n.addBusyState(s)},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;var t=e.subId;return"oj-conveyorbelt-start-overflow-indicator"===t?this.widget().find(".oj-conveyorbelt-overflow-indicator.oj-start")[0]:"oj-conveyorbelt-end-overflow-indicator"===t?this.widget().find(".oj-conveyorbelt-overflow-indicator.oj-end")[0]:"oj-conveyorbelt-top-overflow-indicator"===t?this.widget().find(".oj-conveyorbelt-overflow-indicator.oj-top")[0]:"oj-conveyorbelt-bottom-overflow-indicator"===t?this.widget().find(".oj-conveyorbelt-overflow-indicator.oj-bottom")[0]:null},getSubIdByNode:function(e){for(var t=this.getNodeBySubId({subId:"oj-conveyorbelt-start-overflow-indicator"}),i=this.getNodeBySubId({subId:"oj-conveyorbelt-end-overflow-indicator"}),n=this.getNodeBySubId({subId:"oj-conveyorbelt-top-overflow-indicator"}),o=this.getNodeBySubId({subId:"oj-conveyorbelt-bottom-overflow-indicator"}),s=e,r=this.element[0];s&&s!=r;){if(s===t)return{subId:"oj-conveyorbelt-start-overflow-indicator"};if(s===i)return{subId:"oj-conveyorbelt-end-overflow-indicator"};if(s===n)return{subId:"oj-conveyorbelt-top-overflow-indicator"};if(s===o)return{subId:"oj-conveyorbelt-bottom-overflow-indicator"};s=s.parentElement}return null}});var e="JET ConveyorBelt: 'disabled' property not supported",t=25}(),i.CustomElementBridge.registerMetadata("oj-conveyor-belt","baseComponent",{properties:{contentParent:{type:"string"},orientation:{type:"string",enumValues:["horizontal","vertical"]}},extension:{_WIDGET_NAME:"ojConveyorBelt"}}),i.CustomElementBridge.register("oj-conveyor-belt",{metadata:i.CustomElementBridge.getMetadata("oj-conveyor-belt")}),i.DataCollectionEditUtils={},i.DataCollectionEditUtils.basicHandleEditEnd=function(e,t){var n,o;null!=t&&null!=t.cellContext||(t=e.detail),n=$(t.cellContext.parentElement).find(".oj-component-initnode")[0],o=i.Components.__GetWidgetConstructor(n),t.cancelEdit?o("reset"):(o("validate"),o("isValid")||e.preventDefault())},i.DataCollectionEditUtils.basicHandleRowEditEnd=function(e,t){var n,o,s,r=$(t.rowContext.parentElement).find(".oj-component-initnode");for(n=0;n<r.length;n++){s=i.Components.__GetWidgetConstructor(r[n]),o=t.cancelEdit;try{if(o)s("reset");else if(s("validate"),!s("isValid"))return!1}catch(e){}}return!0},i.__KO_CUSTOM_BINDING_PROVIDER_INSTANCE.addPostprocessor({nodeHasBindings:function(e,t){return t||1===e.nodeType&&"oj-defer"===e.nodeName.toLowerCase()},getBindingAccessors:function(e,t,i){return 1===e.nodeType&&"oj-defer"===e.nodeName.toLowerCase()&&((i=i||{})._ojDefer_=function(){}),i}}),ko.bindingHandlers._ojDefer_={init:function(e,t,i,n,o){if(e._shown)ko.applyBindingsToDescendants(o,e);else{if(!e._savedChildNodes){for(var s=document.createDocumentFragment(),r=e.childNodes;r.length>0;)s.appendChild(r[0]);e._savedChildNodes=s}Object.defineProperty(e,"_activateDescedantBindings",{value:function(){ko.applyBindingsToDescendants(o,e),delete e._activateDescedantBindings},configurable:!0})}return{controlsDescendantBindings:!0}}},i.DeferElement={},i.DeferElement.register=function(){var e=Object.create(HTMLElement.prototype);Object.defineProperty(e,"_activate",{value:function(){this._activateDescedantBindings?(this._savedChildNodes&&(this.appendChild(this._savedChildNodes),delete this._savedChildNodes),this._activateDescedantBindings()):Object.defineProperty(this,"_shown",{configurable:!1,value:!0})},writable:!1});var t=function(){var e=window.Reflect;return void 0!==e?e.construct(HTMLElement,[],this.constructor):HTMLElement.call(this)};Object.defineProperty(e,"constructor",{value:t,writable:!0,configurable:!0}),t.prototype=e,Object.setPrototypeOf(t,HTMLElement),customElements.define("oj-defer",t)},i.DeferElement.register(),i.ConversionDiagramDataSource=function(e,t){this.childDataCallback=t?t.childData:null,i.ConversionDiagramDataSource.superclass.constructor.call(this,e)},i.Object.createSubclass(i.ConversionDiagramDataSource,i.DiagramDataSource,"oj.ConversionDiagramDataSource"),i.ConversionDiagramDataSource.prototype.getData=function(e){if(e){var t=e.nodes;if(void 0===t&&this.childDataCallback){var i=this.childDataCallback(e);return Promise.resolve(i).then(function(e){return Promise.resolve({nodes:e})},function(e){return Promise.resolve({nodes:[]})})}return Promise.resolve({nodes:t})}if(this.data){var n=this.data.nodes,o=this.data.links;return n instanceof Function&&(n=n()),o instanceof Function&&(o=o()),Promise.all([n,o]).then(function(e){return Promise.resolve({nodes:e[0],links:e[1]})},function(e){return Promise.resolve({nodes:[],links:[]})})}return Promise.resolve(null)},i.ConversionDiagramDataSource.prototype.getChildCount=function(e){if(e){var t=e.nodes;return Array.isArray(t)?t.length:void 0===t&&this.childDataCallback?-1:0}return-1},i.ConversionDiagramDataSource.prototype.getDescendantsConnectivity=function(e){return"unknown"},i.DiagramUtils=function(){},i.DiagramUtils.getLayout=function(e){return function(t){if(e.nodes&&t.getNodeCount()>0)for(var n=i.DiagramUtils._dataArrayToMap(e.nodes),o=e.nodeDefaults&&e.nodeDefaults.labelLayout?e.nodeDefaults.labelLayout:null,s=0;s<t.getNodeCount();s++){var r=t.getNodeByIndex(s),a=n[r.getId()];i.DiagramUtils._positionChildNodes(r.getChildNodes(),a?a.nodes:null,t,o),i.DiagramUtils._positionNodeAndLabel(r,a,t,o)}if(e.links&&t.getLinkCount()>0)for(var l=i.DiagramUtils._dataArrayToMap(e.links),u=e.linkDefaults&&e.linkDefaults.path?e.linkDefaults.path:null,h=(o=e.linkDefaults&&e.linkDefaults.labelLayout?e.linkDefaults.labelLayout:null,0);h<t.getLinkCount();h++){var d=t.getLinkByIndex(h),c=l[d.getId()];c&&c.path?d.setPoints(c.path):u&&u instanceof Function&&d.setPoints(u(t,d)),c&&c.coordinateSpace&&d.setCoordinateSpace(c.coordinateSpace),c&&c.labelLayout?i.DiagramUtils._setLabelPosition(d,c.labelLayout):o&&o instanceof Function&&i.DiagramUtils._setLabelPosition(d,o(t,d))}if(e.viewport){var p=e.viewport;p instanceof Function?t.setViewport(p(t)):t.setViewport(p)}}},i.DiagramUtils._dataArrayToMap=function(e){var t={};if(e)for(var i=0;i<e.length;i++)t[e[i].id]=e[i];return t},i.DiagramUtils._positionChildNodes=function(e,t,n,o){if(e&&t)for(var s=i.DiagramUtils._dataArrayToMap(t),r=0;r<e.length;r++){var a=e[r],l=s[a.getId()];i.DiagramUtils._positionChildNodes(a.getChildNodes(),l?l.nodes:null,n,o),i.DiagramUtils._positionNodeAndLabel(a,l,n,o)}},i.DiagramUtils._positionNodeAndLabel=function(e,t,n,o){e&&t&&(e.setPosition({x:t.x,y:t.y}),t.labelLayout?i.DiagramUtils._setLabelPosition(e,t.labelLayout):o&&o instanceof Function?i.DiagramUtils._setLabelPosition(e,o(n,e)):o&&i.DiagramUtils._setLabelPosition(e,o,e.getPosition()))},i.DiagramUtils._setLabelPosition=function(e,t,i){i=i||{x:0,y:0},e.setLabelPosition({x:t.x+i.x,y:t.y+i.y});var n=t.rotationPointX,o=t.rotationPointY;isNaN(n)||isNaN(o)||e.setLabelRotationPoint({x:n+i.x,y:o+i.y}),e.setLabelRotationAngle(t.angle),e.setLabelHalign(t.halign),e.setLabelValign(t.valign)},i.__registerWidget("oj.ojDiagram",$.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{animationOnDataChange:"none",animationOnDisplay:"none",dnd:{drag:null,drop:null},expanded:new i.ExpandedKeySet,selection:null,selectionMode:"none",panning:"none",panDirection:"auto",tooltip:{renderer:null},zooming:"none",minZoom:0,maxZoom:1,hiddenCategories:[],hoverBehavior:"none",highlightedCategories:[],highlightMatch:"all",nodeHighlightMode:"node",linkHighlightMode:"link",renderer:null,hoverRenderer:null,selectionRenderer:null,focusRenderer:null,zoomRenderer:null,data:null,linkProperties:null,nodeProperties:null,promotedLinkBehavior:"lazy",styleDefaults:{hoverBehaviorDelay:200,nodeDefaults:{labelStyle:{},showDisclosure:"on",icon:{pattern:"none",shape:"circle",width:10,height:10,svgClassName:""}},linkDefaults:{svgClassName:"",width:1,labelStyle:{},startConnectorType:"none",endConnectorType:"none"},promotedLink:{color:"#778999",svgClassName:"",width:1,startConnectorType:"none",endConnectorType:"none"}},touchResponse:"auto",beforeExpand:null,expand:null,beforeCollapse:null,collapse:null},_InitOptions:function(e,t){this._super(e,t);var i=this.options.styleDefaults;this.options.styleDefaults=i},_ProcessOptions:function(){this._super(),this.options._logger=i.Logger,this.options._templateFunction&&(this.options.renderer=this._GetTemplateDataRenderer(this.options._templateFunction,"node")),this.options.renderer&&(this.options._contextHandler=this._getContextHandler()),this.options.nodes&&(this.options.nodeProperties=this.options.nodeProperties?this.options.nodeProperties:function(e){return e},this.options.linkProperties=this.options.linkProperties?this.options.linkProperties:function(e){return e},this.options.data=new i.ConversionDiagramDataSource({nodes:this.options.nodes,links:this.options.links},{childData:this.options.childNodes})),this.options.expanded||(this.options.expanded=new i.ExpandedKeySet),this.options.dnd.drag||(this.options.dnd.drag={nodes:{},ports:{}}),this.options.dnd.drop||(this.options.dnd.drop={background:{},nodes:{},links:{},ports:{}})},_IsDraggable:function(){var e=this.options.dnd?this.options.dnd.drag:null;return!!e&&(e.nodes&&Object.keys(e.nodes).length>0||e.ports&&Object.keys(e.ports).length>0)},_GetComponentRendererOptions:function(){return["tooltip/renderer","renderer","focusRenderer","hoverRenderer","selectionRenderer","zoomRenderer"]},_getContextHandler:function(){var e=this;return function(t,n,o,s,r,a){var l={component:i.Components.__GetWidgetConstructor(e.element),parentElement:t,rootElement:n,content:o,data:s,state:r,previousState:a,id:s.id,type:"node",label:s.label};return e._IsCustomElement()&&(l.renderDefaultHover=e.renderDefaultHover.bind(e,l),l.renderDefaultSelection=e.renderDefaultSelection.bind(e,l),l.renderDefaultFocus=e.renderDefaultFocus.bind(e,l)),e._FixRendererContext(l)}},renderDefaultHover:function(e){e.previousState&&e.state.hovered==e.previousState.hovered||this._GetDvtComponent(this.element).processDefaultHoverEffect(e.id,e.state.hovered)},renderDefaultSelection:function(e){e.previousState&&e.state.selected==e.previousState.selected||this._GetDvtComponent(this.element).processDefaultSelectionEffect(e.id,e.state.selected)},renderDefaultFocus:function(e){e.previousState&&e.state.focused==e.previousState.focused||this._GetDvtComponent(this.element).processDefaultFocusEffect(e.id,e.state.focused)},_CreateDvtComponent:function(e,t,i){return dvt.Diagram.newInstance(e,t,i)},_ConvertLocatorToSubId:function(e){var t=e.subId;return"oj-diagram-link"==t?t="link["+e.index+"]":"oj-diagram-node"==t?t="node["+e.index+"]":"oj-diagram-tooltip"==t&&(t="tooltip"),t},_ConvertSubIdToLocator:function(e){var t={};return 0==e.indexOf("link")?(t.subId="oj-diagram-link",t.index=this._GetFirstIndex(e)):0==e.indexOf("node")?(t.subId="oj-diagram-node",t.index=this._GetFirstIndex(e)):"tooltip"==e&&(t.subId="oj-diagram-tooltip"),t},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-diagram"),e},_GetChildStyleClasses:function(){var e=this._super();return e["oj-dvtbase oj-diagram"]={path:"styleDefaults/animationDuration",property:"ANIM_DUR"},e["oj-diagram-node-label"]={path:"styleDefaults/nodeDefaults/labelStyle",property:"TEXT"},e["oj-diagram-node oj-selected"]={path:"styleDefaults/nodeDefaults/selectionColor",property:"border-color"},e["oj-diagram-node oj-hover"]=[{path:"styleDefaults/nodeDefaults/hoverOuterColor",property:"border-top-color"},{path:"styleDefaults/nodeDefaults/hoverInnerColor",property:"border-bottom-color"}],e["oj-diagram-link"]={path:"styleDefaults/linkDefaults/color",property:"color"},e["oj-diagram-link-label"]={path:"styleDefaults/linkDefaults/labelStyle",property:"TEXT"},e["oj-diagram-link oj-selected"]={path:"styleDefaults/linkDefaults/selectionColor",property:"border-color"},e["oj-diagram-link oj-hover"]=[{path:"styleDefaults/linkDefaults/hoverOuterColor",property:"border-top-color"},{path:"styleDefaults/linkDefaults/hoverInnerColor",property:"border-bottom-color"}],e},_GetEventTypes:function(){return["optionChange","beforeExpand","beforeCollapse","expand","collapse"]},_HandleEvent:function(e){var t=e.type;"beforeExpand"===t?this.expand(e.id,!0):"beforeCollapse"===t?this.collapse(e.id,!0):"expand"===t||"collapse"===t?this._trigger(t,null,{nodeId:e.id}):this._super(e)},_setOptions:function(e,t){var i=function(t){return Object.prototype.hasOwnProperty.call(e,t)};(i("expanded")||i("data"))&&this._component.clearDisclosedState(),this._superApply(arguments)},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtDiagramBundle.PROMOTED_LINK"]=e.promotedLink,t["DvtDiagramBundle.PROMOTED_LINKS"]=e.promotedLinks,t["DvtDiagramBundle.PROMOTED_LINK_ARIA_DESC"]=e.promotedLinkAriaDesc,t["DvtUtilBundle.DIAGRAM"]=e.componentName,t},_LoadResources:function(){null==this.options._resources&&(this.options._resources={});var e=this.options._resources;"rtl"===i.DomUtils.getReadingDirection()?(e.collapse_ena={src:i.Config.getResourceUrl("resources/internal-deps/dvt/diagram/container-collapse-button-ena_rtl.svg"),width:20,height:20},e.collapse_ovr={src:i.Config.getResourceUrl("resources/internal-deps/dvt/diagram/container-collapse-button-ovr_rtl.svg"),width:20,height:20},e.collapse_dwn={src:i.Config.getResourceUrl("resources/internal-deps/dvt/diagram/container-collapse-button-dwn_rtl.svg"),width:20,height:20},e.expand_ena={src:i.Config.getResourceUrl("resources/internal-deps/dvt/diagram/container-expand-button-ena_rtl.svg"),width:20,height:20},e.expand_ovr={src:i.Config.getResourceUrl("resources/internal-deps/dvt/diagram/container-expand-button-ovr_rtl.svg"),width:20,height:20},e.expand_dwn={src:i.Config.getResourceUrl("resources/internal-deps/dvt/diagram/container-expand-button-dwn_rtl.svg"),width:20,height:20}):(e.collapse_ena={src:i.Config.getResourceUrl("resources/internal-deps/dvt/diagram/container-collapse-button-ena.svg"),width:20,height:20},e.collapse_ovr={src:i.Config.getResourceUrl("resources/internal-deps/dvt/diagram/container-collapse-button-ovr.svg"),width:20,height:20},e.collapse_dwn={src:i.Config.getResourceUrl("resources/internal-deps/dvt/diagram/container-collapse-button-dwn.svg"),width:20,height:20},e.expand_ena={src:i.Config.getResourceUrl("resources/internal-deps/dvt/diagram/container-expand-button-ena.svg"),width:20,height:20},e.expand_ovr={src:i.Config.getResourceUrl("resources/internal-deps/dvt/diagram/container-expand-button-ovr.svg"),width:20,height:20},e.expand_dwn={src:i.Config.getResourceUrl("resources/internal-deps/dvt/diagram/container-expand-button-dwn.svg"),width:20,height:20})},_GetComponentNoClonePaths:function(){var e=this._super();return e.data=!0,e},collapse:function(e,t){var i=this._trigger("beforeCollapse",null,{nodeId:e});t&&!1===i||(this._NotReady(),this._component.collapse(e))},expand:function(e,t){var i=this._trigger("beforeExpand",null,{nodeId:e});t&&!1===i||(this._NotReady(),this._component.expand(e))},getNodeCount:function(){return this._component.getAutomation().getNodeCount()},getNode:function(e){return this._component.getAutomation().getNode(e)},getLinkCount:function(){return this._component.getAutomation().getLinkCount()},getLink:function(e){return this._component.getAutomation().getLink(e)},getPromotedLink:function(e,t){return this._component.getAutomation().getPromotedLink(e,t)},getContextByNode:function(e){var t=this.getSubIdByNode(e);return t&&"oj-diagram-tooltip"!==t.subId?t:null}}),i.Components.setDefaultOptions({ojDiagram:{styleDefaults:i.Components.createDynamicPropertyGetter(function(e){return e.isCustomElement?{linkDefaults:{svgStyle:{}},nodeDefaults:{icon:{svgStyle:{}}},promotedLink:{svgStyle:{}}}:{}})}}),function(){i.CustomElementBridge.registerMetadata("oj-diagram","dvtBaseComponent",{properties:{animationOnDataChange:{type:"string",enumValues:["auto","none"]},animationOnDisplay:{type:"string",enumValues:["auto","none"]},data:{},dnd:{type:"object",properties:{drag:{type:"object",properties:{nodes:{type:"object",properties:{dataTypes:{type:"Array<string>"},drag:{},dragEnd:{},dragStart:{}}},ports:{type:"object",properties:{dataTypes:{type:"Array<string>"},linkStyle:{},selector:{type:"string"},drag:{},dragEnd:{},dragStart:{}}}}},drop:{type:"object",properties:{background:{type:"object",properties:{dataTypes:{type:"Array<string>"},dragEnter:{},dragLeave:{},dragOver:{},drop:{}}},nodes:{type:"object",properties:{dataTypes:{type:"Array<string>"},dragEnter:{},dragLeave:{},dragOver:{},drop:{}}},links:{type:"object",properties:{dataTypes:{type:"Array<string>"},dragEnter:{},dragLeave:{},dragOver:{},drop:{}}},ports:{type:"object",properties:{dataTypes:{type:"Array<string>"},feedbackStyle:{},selector:{type:"string"},dragEnter:{},dragLeave:{},dragOver:{},drop:{}}}}}}},expanded:{writeback:!0},focusRenderer:{},hiddenCategories:{type:"Array<string>",writeback:!0},highlightedCategories:{type:"Array<string>",writeback:!0},highlightMatch:{type:"string",enumValues:["any","all"]},hoverBehavior:{type:"string",enumValues:["dim","none"]},hoverRenderer:{},layout:{},linkHighlightMode:{type:"string",enumValues:["linkAndNodes","link"]},linkProperties:{},maxZoom:{type:"number"},minZoom:{type:"number"},nodeHighlightMode:{type:"string",enumValues:["nodeAndIncomingLinks","nodeAndOutgoingLinks","nodeAndLinks","node"]},nodeProperties:{},panDirection:{type:"string",enumValues:["x","y","auto"]},panning:{type:"string",enumValues:["auto","none"]},promotedLinkBehavior:{type:"string",enumValues:["none","lazy","full"]},renderer:{},selection:{type:"Array<string>",writeback:!0},selectionMode:{type:"string",enumValues:["none","single","multiple"]},selectionRenderer:{},styleDefaults:{type:"object",properties:{animationDuration:{type:"number"},hoverBehaviorDelay:{type:"number"},linkDefaults:{type:"object",properties:{color:{type:"string"},endConnectorType:{type:"string",enumValues:["arrowOpen","arrow","arrowConcave","circle","rectangle","rectangleRounded","none"]},labelStyle:{type:"object"},startConnectorType:{type:"string",enumValues:["arrowOpen","arrow","arrowConcave","circle","rectangle","rectangleRounded","none"]},svgStyle:{type:"object"},width:{type:"number"}}},nodeDefaults:{type:"object",properties:{icon:{type:"object",properties:{borderColor:{type:"string"},borderWidth:{type:"number"},color:{type:"string"},height:{type:"number"},pattern:{type:"string",enumValues:["smallChecker","smallCrosshatch","smallDiagonalLeft","smallDiagonalRight","smallDiamond","smallTriangle","largeChecker","largeCrosshatch","largeDiagonalLeft","largeDiagonalRight","largeDiamond","largeTriangle","none"]},shape:{type:"string"},source:{type:"string"},sourceHover:{type:"string"},sourceHoverSelected:{type:"string"},sourceSelected:{type:"string"},svgStyle:{type:"object"},width:{type:"number"}}},labelStyle:{type:"object"},showDisclosure:{type:"string",enumValues:["on","off"]}}},promotedLink:{type:"object",properties:{color:{type:"string"},endConnectorType:{type:"string",enumValues:["arrowOpen","arrow","arrowConcave","circle","rectangle","rectangleRounded","none"]},startConnectorType:{type:"string",enumValues:["arrowOpen","arrow","arrowConcave","circle","rectangle","rectangleRounded","none"]},svgStyle:{type:"object"},width:{type:"number"}}}}},tooltip:{type:"object",properties:{renderer:{}}},touchResponse:{type:"string",enumValues:["touchStart","auto"]},translations:{type:"Object",properties:{componentName:{type:"string",value:"Diagram"},labelAndValue:{type:"string",value:"{0}: {1}"},labelClearSelection:{type:"string",value:"Clear Selection"},labelCountWithTotal:{type:"string",value:"{0} of {1}"},labelDataVisualization:{type:"string",value:"Data Visualization"},labelInvalidData:{type:"string",value:"Invalid data"},labelNoData:{type:"string",value:"No data to display"},promotedLink:{type:"string",value:"{0} link"},promotedLinkAriaDesc:{type:"string",value:"Indirect"},promotedLinks:{type:"string",value:"{0} links"},stateCollapsed:{type:"string",value:"Collapsed"},stateDrillable:{type:"string",value:"Drillable"},stateExpanded:{type:"string",value:"Expanded"},stateHidden:{type:"string",value:"Hidden"},stateIsolated:{type:"string",value:"Isolated"},stateMaximized:{type:"string",value:"Maximized"},stateMinimized:{type:"string",value:"Minimized"},stateSelected:{type:"string",value:"Selected"},stateUnselected:{type:"string",value:"Unselected"},stateVisible:{type:"string",value:"Visible"}}},zooming:{type:"string",enumValues:["auto","none"]},zoomRenderer:{}},events:{beforeCollapse:{},beforeExpand:{},collapse:{},expand:{}},methods:{getContextByNode:{},getLink:{},getLinkCount:{},getNode:{},getNodeCount:{},getPromotedLink:{}},extension:{_WIDGET_NAME:"ojDiagram"}});var e=i.CustomElementBridge.getMetadata("oj-diagram");i.CustomElementBridge.register("oj-diagram",{metadata:e,parseFunction:e.extension._DVT_PARSE_FUNC({"style-defaults.node-defaults.icon.shape":!0})})}(),vt="oj-dialog-body",Ct="oj-dialog-footer",yt="oj-dialog-header",i.__registerWidget("oj.ojDialog",$.oj.baseComponent,{version:"1.0.0",widgetEventPrefix:"oj",options:{cancelBehavior:"icon",dragAffordance:"title-bar",initialVisibility:"hide",modality:"modal",position:{my:{horizontal:"center",vertical:"center"},offset:{x:0,y:0},at:{horizontal:"center",vertical:"center"},of:"window",collision:"fit",using:function(e){var t=$(this).css(e).offset().top;t<0&&$(this).css("top",e.top-t)}},resizeBehavior:"resizable",role:"dialog",title:null,beforeClose:null,beforeOpen:null,close:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null,animateStart:null,animateEnd:null},_ComponentCreate:function(){if(this._super(),this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this.element.removeAttr("title"),this.element.hide(),this.element.uniqueId(),this.element.addClass("oj-dialog oj-component"),this.element.attr({tabIndex:-1}),this._IsCustomElement()&&this.element[0].hasAttribute("role")||this.element.attr("role",this.options.role),this._on(this.element,{keydown:this._keydownHandler.bind(this)}),this.userDefinedDialogHeader=!1,!this._IsCustomElement())for(var e=this.element.children(),t=0;t<e.length;t++){var n=$(e[t]);n.is(".oj-dialog-header")?(this.userDefinedDialogHeader=!0,this._userDefinedHeader=n,this._userDefinedHeaderDiv=e[t]):n.is(".oj-dialog-body")?(this._createContentDiv(),this._uiDialogContent=$(this._contentDiv),this.element[0].insertBefore(this._contentDiv,e[t]),i.Components.subtreeAttached(this._contentDiv),this._contentDiv.appendChild(e[t]),i.Components.subtreeAttached(e[t]),this._uiDialogBody=n,this._uiDialogBodyDiv=e[t]):n.is(".oj-dialog-footer")&&(this._uiDialogFooter=n,this._uiDialogFooterDiv=e[t])}this._IsCustomElement()&&this._processSlottedChildren(),this.userDefinedDialogHeader?(this._userDefinedTitleDiv=this._userDefinedHeaderDiv.querySelector(".oj-dialog-title"),this._userDefinedTitle=$(this._userDefinedTitleDiv),null!==this._userDefinedTitleDiv&&void 0!==this._userDefinedTitleDiv&&(this._userDefinedTitle.uniqueId(),this.element.attr({"aria-labelledby":this._userDefinedTitle.attr("id")}))):this._createTitlebar(),this._uiDialogContent||(this._createContentDiv(),this._uiDialogContent=$(this._contentDiv),this._userDefinedHeader?this.element[0].insertBefore(this._contentDiv,this._userDefinedHeaderDiv):this.element[0].insertBefore(this._contentDiv,this._uiDialogTitlebarDiv),i.Components.subtreeAttached(this._contentDiv)),this._setupFocus(this.element);var o=this.options;o.position=i.PositionUtils.coerceToJet(o.position)},_createHeaderSlot:function(){this._headerSlot=document.createElement("div"),this._headerSlot.classList.add(yt),this.element[0].appendChild(this._headerSlot),i.Components.subtreeAttached(this._headerSlot),this.userDefinedDialogHeader=!0,this._userDefinedHeaderDiv=this._headerSlot,this._userDefinedHeader=$(this._headerSlot)},_createFooterSlot:function(){this._footerSlot=document.createElement("div"),this.element[0].appendChild(this._footerSlot),i.Components.subtreeAttached(this._footerSlot),this._uiDialogFooterDiv=this._footerSlot,this._uiDialogFooter=$(this._footerSlot)},_createContentDiv:function(){this._contentDiv=document.createElement("div"),this._contentDiv.classList.add("oj-dialog-content","oj-dialog-default-content")},_createBodySlot:function(){this._createContentDiv(),this.element[0].appendChild(this._contentDiv),i.Components.subtreeAttached(this._contentDiv),this._bodySlot=document.createElement("div"),this._contentDiv.appendChild(this._bodySlot),this._uiDialogContent=$(this._contentDiv),this._uiDialogBodyDiv=this._bodySlot,this._uiDialogBody=$(this._bodySlot)},_GetContextMenu:function(){return this._IsCustomElement()?this._contextmenuSlot&&this._contextmenuSlot.length>0?this._contextmenuSlot[0]:this._super():null},_processSlottedChildren:function(){null!=this._footerSlot&&this.element[0].removeChild(this._footerSlot),null!=this._headerSlot&&this.element[0].removeChild(this._headerSlot),null!=this._bodySlot&&this.element[0].removeChild(this._bodySlot),null!=this._contextmenuSlot&&this.element[0].removeChild(this._contextmenuSlot);var e,t,n=i.BaseCustomElementBridge.getSlotMap(this.element[0]),o=Object.keys(n);for(t=0;t<o.length;t++)"header"!==(e=o[t])&&"footer"!==e&&"body"!==e&&""!==e&&"contextMenu"!==e&&n[e].parentNode.removeChild(n[e]);var s=Object.prototype.hasOwnProperty;s.call(n,"header")&&this._createHeaderSlot(),(s.call(n,"body")||s.call(n,""))&&this._createBodySlot(),s.call(n,"footer")&&this._createFooterSlot(),s.call(n,"contextMenu")&&(this._contextmenuSlot=n.contextMenu);var r=this._bodySlot;for(t=0;t<o.length;t++){switch(e=o[t]){case"header":r=this._headerSlot;break;case"footer":r=this._footerSlot;break;case"body":case"":r=this._bodySlot}var a=n[e];if(null!=a)for(var l=0;l<a.length;l++)switch(r.appendChild(a[l]),e){case"header":break;case"footer":r=this._footerSlot,n[e][l].classList.add(Ct);break;case"body":case"":r=this._bodySlot,n[e][l].classList.add(vt)}}},_AfterCreateEvent:function(){"show"===this.options.initialVisibility&&this.open()},_destroy:function(){this._off(this.element,"keydown"),i.ZOrderUtils.getStatus(this.element)===i.ZOrderUtils.STATUS.OPEN&&this._closeImplicitly(),this._setWhenReady("none"),this._resizableComponent&&this._resizableComponent("instance")&&(this._resizableComponent("destroy"),this._resizableComponent=null),this.element.hasClass("oj-draggable")&&(this.element.draggable("destroy"),this.element.removeClass("oj-draggable")),this._destroyCloseButton(),this.userDefinedDialogHeader&&this._userDefinedTitle.removeUniqueId(),this._uiDialogBody&&this._uiDialogBody.insertAfter(this._uiDialogContent),this._uiDialogContent.remove(),this._uiDialogBody=null,this._uiDialogContent=null,this.element.removeUniqueId().removeClass("oj-dialog oj-component").css(this.originalCss),this.element.stop(!0,!0),this.originalTitle&&this.element.attr("title",this.originalTitle),this._uiDialogTitlebar&&(this._uiDialogTitlebar.remove(),this._uiDialogTitlebar=null),delete this._popupServiceEvents,this._super()},disable:$.noop,enable:$.noop,close:function(e){if(!this._isOperationPending("close",[e])&&i.ZOrderUtils.getStatus(this.element)===i.ZOrderUtils.STATUS.OPEN&&(!1!==this._trigger("beforeClose",e)||this._ignoreBeforeCloseResultant)){if(this._setWhenReady("close"),this._focusedElement=null,this.opener.filter(":focusable").focus().length||$(this.document[0].activeElement).blur(),"modal"===this.options.modality){var t=Array.prototype.forEach,n=this.element[0].getElementsByClassName("oj-helper-element-in-dialog-with-accesskey");t.call(n,function(e){e.classList.remove("oj-helper-element-in-dialog-with-accesskey")});var o=document.getElementsByClassName("oj-helper-element-with-accesskey");t.call(o,function(e){e.setAttribute("accesskey",e.getAttribute("data-ojAccessKey")),e.removeAttribute("data-ojAccessKey"),e.classList.remove("oj-helper-element-with-accesskey")})}var s={};s[i.PopupService.OPTION.POPUP]=this.element,s[i.PopupService.OPTION.CONTEXT]={closeEvent:e},i.PopupService.getInstance().close(s)}},_beforeCloseHandler:function(e){var t=e[i.PopupService.OPTION.POPUP],n=(i.ThemeUtils.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).animation;if(!this._ignoreBeforeCloseResultant&&n&&n.close){var o=t.attr("style");return i.AnimationUtils.startAnimation(t[0],"close",n.close,this).then(function(){t.attr("style",o),t.hide()})}t.hide()},_afterCloseHandler:function(e){var t,n=e[i.PopupService.OPTION.CONTEXT];n&&(t=n.closeEvent),this._trigger("close",t)},isOpen:function(){var e=i.ZOrderUtils.getStatus(this.element);return e===i.ZOrderUtils.STATUS.OPENING||e===i.ZOrderUtils.STATUS.OPEN||e===i.ZOrderUtils.STATUS.CLOSING},open:function(e){if(!this._isOperationPending("open",[e])&&!1!==this._trigger("beforeOpen",e))if(i.ZOrderUtils.getStatus(this.element)!==i.ZOrderUtils.STATUS.OPEN){this._setWhenReady("open"),this.userDefinedDialogHeader?void 0!==this.closeButton&&null!==this.closeButton||"icon"!==this.options.cancelBehavior||this._createCloseButton(this._userDefinedHeaderDiv):this._createTitlebarCloseButton(),this.opener=$(this.document[0].activeElement),"title-bar"===this.options.dragAffordance&&$.fn.draggable&&this._makeDraggable(),"resizable"===this.options.resizeBehavior&&this._makeResizable();var t="rtl"===this._GetReadingDirection(),n=i.PositionUtils.coerceToJqUi(this.options.position);if(n=i.PositionUtils.normalizeHorizontalAlignment(n,t),"modal"===this.options.modality){var o=Array.prototype.forEach,s=this.element[0].querySelectorAll("[accesskey]");o.call(s,function(e){e.classList.add("oj-helper-element-in-dialog-with-accesskey")});var r=document.querySelectorAll("[accesskey]");o.call(r,function(e){e.classList.contains("oj-helper-element-in-dialog-with-accesskey")||(e.classList.add("oj-helper-element-with-accesskey"),e.setAttribute("data-ojAccessKey",e.getAttribute("accesskey")),e.removeAttribute("accesskey"))})}var a={};a[i.PopupService.OPTION.POPUP]=this.element,a[i.PopupService.OPTION.LAUNCHER]=this.opener,a[i.PopupService.OPTION.POSITION]=n,a[i.PopupService.OPTION.MODALITY]=this.options.modality,a[i.PopupService.OPTION.EVENTS]=this._getPopupServiceEvents(),a[i.PopupService.OPTION.LAYER_SELECTORS]="oj-dialog-layer",a[i.PopupService.OPTION.LAYER_LEVEL]=i.PopupService.LAYER_LEVEL.TOP_LEVEL,a[i.PopupService.OPTION.CUSTOM_ELEMENT]=this._IsCustomElement(),i.PopupService.getInstance().open(a)}else this._focusTabbable()},_beforeOpenHandler:function(e){var t=e[i.PopupService.OPTION.POPUP],n=e[i.PopupService.OPTION.POSITION];t.show(),t.position(n),t.parent().addClass("oj-animate-open");var o=(i.ThemeUtils.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).animation;if(o&&o.open)return i.AnimationUtils.startAnimation(t[0],"open",o.open,this)},_afterOpenHandler:function(e){e[i.PopupService.OPTION.POPUP].parent().removeClass("oj-animate-open"),this._trigger("open"),this._focusTabbable()},refresh:function(){this._super()},_focusTabbable:function(){var e=this._focusedElement;e&&e.length>0&&i.DomUtils.isAncestorOrSelf(this.element[0],e[0])||(e||(e=this.element.find("[autofocus]")),e.length||(e=this._uiDialogContent.find(":tabbable")),e.length||this._uiDialogFooter&&this._uiDialogFooter.length&&(e=this._uiDialogFooter.find(":tabbable")),e.length||this.closeButton&&(e=this.closeButton.filter(":focusable")),e.length||(e=this.element),e.length>0&&(e.eq(0).focus(),this._trigger("focus")))},_keydownHandler:function(e){if("none"!==this.options.cancelBehavior&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===$.ui.keyCode.ESCAPE)return e.preventDefault(),e.stopImmediatePropagation(),void this.close(e);if(e.keyCode===$.ui.keyCode.TAB){var t=this.element.find(":tabbable"),i=t.filter(":first"),n=t.filter(":last");e.shiftKey?e.shiftKey&&(document.activeElement===i[0]||document.activeElement===this.element[0]?(n.focus(),e.preventDefault()):1===t.index(document.activeElement)&&t[0]&&(t[0].focus(),e.preventDefault())):document.activeElement===n[0]||document.activeElement===this.element[0]?(i.focus(),e.preventDefault()):0===t.index(document.activeElement)&&t[1]&&(t[1].focus(),e.preventDefault())}},_setupFocus:function(e){var t=this;this._focusable({applyHighlight:!0,setupHandlers:function(i,n){t._on(e,{focus:function(e){i($(e.currentTarget))},blur:function(e){n($(e.currentTarget))}})}})},_destroyCloseButton:function(){null!==this.closeButtonDiv&&void 0!==this.closeButtonDiv&&(this.closeButtonDiv.parentElement&&(i.Components.subtreeDetached(this.closeButtonDiv),this.closeButtonDiv.parentElement.removeChild(this.closeButtonDiv)),this.closeButton=null),this._headerSlot&&this._headerSlot.classList.remove("oj-dialog-header-close"),this._uiDialogTitlebarDiv&&this._uiDialogTitlebarDiv.classList.remove("oj-dialog-header-close")},_createCloseButton:function(e){if(this._IsCustomElement()){this.closeButtonDiv=document.createElement("oj-button"),this.closeButtonDiv.classList.add("oj-dialog-header-close-wrapper"),this.closeButtonDiv.setAttribute("data-oj-binding-provider","none"),this.closeButtonDiv.setAttribute("display","icons"),this.closeButtonDiv.setAttribute("chroming","half");var t=document.createElement("span");t.textContent=this.getTranslatedString("labelCloseIcon");var n=document.createElement("span");n.className="oj-fwk-icon oj-fwk-icon-cross",n.setAttribute("slot","startIcon"),this.closeButtonDiv.appendChild(n),this.closeButtonDiv.appendChild(t),e.appendChild(this.closeButtonDiv),i.Components.subtreeAttached(this.closeButtonDiv),this.closeButton=$(this.closeButtonDiv)}this._IsCustomElement()||(this.closeButton=$("<button><\button>").addClass("oj-dialog-header-close-wrapper"),this.closeButton.ojButton({display:"icons",chroming:"half",label:this.getTranslatedString("labelCloseIcon"),icons:{start:"oj-component-icon oj-fwk-icon-cross"}}).attr("tabindex","1").appendTo(e),this.closeButtonDiv=this.closeButton[0]),this._on(this.closeButton,{click:function(e){e.preventDefault(),e.stopImmediatePropagation(),this.close(e)}}),this._headerSlot&&this._headerSlot.classList.add("oj-dialog-header-close"),this._uiDialogTitlebarDiv&&this._uiDialogTitlebarDiv.classList.add("oj-dialog-header-close")},_createTitlebarCloseButton:function(){void 0!==this.closeButton&&null!==this.closeButton||"icon"!==this.options.cancelBehavior||this._createCloseButton(this._uiDialogTitlebarDiv),this._on(this._uiDialogTitlebar,{mousedown:function(e){i.DomUtils.isAncestorOrSelf(this.closeButtonDiv,e.target)||this.element.focus()}})},_createTitlebar:function(){this._uiDialogTitlebarDiv=document.createElement("div"),this._uiDialogTitlebarDiv.classList.add(yt),this.element[0].insertBefore(this._uiDialogTitlebarDiv,this.element[0].firstChild),i.Components.subtreeAttached(this._uiDialogTitlebarDiv),this._uiDialogTitlebar=$(this._uiDialogTitlebarDiv);var e=document.createElement("div");e.classList.add("oj-dialog-title"),$(e).uniqueId(),this._uiDialogTitlebarDiv.appendChild(e),i.Components.subtreeAttached(e),this._title(e),this.element.attr({"aria-labelledby":e.id})},_title:function(e){var t=e;this.options.title||(t.innerHTML="&#160;"),t.textContent=this.options.title},_makeDraggable:function(){var e=this,t=this.options;function i(e){return{position:e.position,offset:e.offset}}this.element.draggable({addClasses:!1,handle:".oj-dialog-header",containment:"document",start:function(t,n){$(this).addClass("oj-dialog-dragging"),e._positionDescendents(),e._trigger("dragStart",t,i(n))},drag:function(t,n){e._positionDescendents(),e._trigger("drag",t,i(n))},stop:function(n,o){var s=o.offset.left-e.document.scrollLeft(),r=o.offset.top-e.document.scrollTop();t.position={my:{horizontal:"left",vertical:"top"},at:{horizontal:"left",vertical:"top"},offset:{x:s>=0?s:0,y:r>=0?r:0},of:window},$(this).removeClass("oj-dialog-dragging"),e._positionDescendents(),e._trigger("dragStop",n,i(o))}}),this.element.addClass("oj-draggable")},_makeResizable:function(){var e=this;function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}this._resizableComponent=this.element.ojResizable.bind(this.element),this._resizableComponent({cancel:".oj-dialog-content",containment:"document",handles:"n,e,s,w,se,sw,ne,nw",start:function(i,n){e._isResizing=!0,$(this).addClass("oj-dialog-resizing"),e._trigger("resizeStart",i,t(n))},resize:function(i,n){e._trigger("resize",i,t(n))},stop:function(i,n){e._isResizing=!1,$(this).removeClass("oj-dialog-resizing"),e._trigger("resizeStop",i,t(n))}})},_position:function(){var e="rtl"===this._GetReadingDirection(),t=i.PositionUtils.coerceToJqUi(this.options.position);t=i.PositionUtils.normalizeHorizontalAlignment(t,e),this.element.position(t),this._positionDescendents()},_positionDescendents:function(){i.PopupService.getInstance().triggerOnDescendents(this.element,i.PopupService.EVENT.POPUP_REFRESH)},_setOption:function(e,t,n){var o,s;if("disabled"!==e)switch(this._super(e,t,n),e){case"dragAffordance":(o=this.element.hasClass("oj-draggable"))&&"none"===t&&(this.element.draggable("destroy"),this.element.removeClass("oj-draggable")),o||"title-bar"!==t||this._makeDraggable();break;case"position":var r=this.options;return r.position=i.PositionUtils.coerceToJet(t,r.position),void this._position();case"resizeBehavior":s=!1,this._resizableComponent&&(s=!0),s&&"resizable"!==t&&(this._resizableComponent("instance")&&this._resizableComponent("destroy"),this._resizableComponent=null),s||"resizable"!==t||this._makeResizable();break;case"title":this.userDefinedDialogHeader?this._title(this._userDefinedHeaderDiv.querySelector(".oj-dialog-title")):this._title(this._uiDialogTitlebarDiv.querySelector(".oj-dialog-title"));break;case"role":this.element.attr("role",t);break;case"modality":if(i.ZOrderUtils.getStatus(this.element)===i.ZOrderUtils.STATUS.OPEN){var a={};a[i.PopupService.OPTION.POPUP]=this.element,a[i.PopupService.OPTION.MODALITY]=t,i.PopupService.getInstance().changeOptions(a)}break;case"cancelBehavior":"none"===t||"escape"===t?this._destroyCloseButton():"icon"===t&&(this.userDefinedDialogHeader?(this._destroyCloseButton(),this._createCloseButton(this._userDefinedHeaderDiv),this._userDefinedTitleDiv=this._userDefinedHeaderDiv.querySelector(".oj-dialog-title"),this._userDefinedTitle=$(this._userDefinedTitleDiv)):(this._destroyCloseButton(),this._createCloseButton(this._uiDialogTitlebarDiv),this.standardTitleDiv=this._uiDialogTitlebarDiv.querySelector(".oj-dialog-title"),this.standardTitle=$(this.standardTitleDiv)))}},getNodeBySubId:function(e){if(null===e)return this.element?this.element[0]:null;function t(e){for(var t=[],i=/\w|_|-/,n=0;n<e.length;n++){var o=e.substring(n,n+1);i.test(o)?t.push(o):t.push("\\"+o)}return t.join("")}var i=e.subId;if(!this._IsCustomElement()||i!==Ct&&i!==vt){var n,o;switch(i){case yt:case Ct:case"oj-dialog-content":case"oj-resizable-n":case"oj-resizable-e":case"oj-resizable-s":case"oj-resizable-w":case"oj-resizable-se":case"oj-resizable-sw":case"oj-resizable-ne":case"oj-resizable-nw":return n=this.element[0].nodeName+'[id="'+t(this.element.attr("id"))+'"] > ',n+="."+i,(o=this.element.parent().find(n))&&0!==o.length?o[0]:null;case"oj-dialog-close-icon":case"oj-dialog-close":return null;case vt:return n=this.element[0].nodeName+'[id="'+t(this.element.attr("id"))+'"] > ',n+=".oj-dialog-content > ",n+="."+i,(o=this.element.parent().find(n))&&0!==o.length?o[0]:null;case"oj-dialog-header-close-wrapper":return n=this.element[0].nodeName+'[id="'+t(this.element.attr("id"))+'"] > ',n+=".oj-dialog-header > ",n+="."+i,(o=this.element.parent().find(n))&&0!==o.length?o[0]:null}}else{if(i===vt)return this._uiDialogBodyDiv.querySelector(".oj-dialog-body");if(i===Ct)return this._uiDialogFooterDiv.querySelector(".oj-dialog-footer")}return null},getSubIdByNode:function(e){if(null!=e){var t=$(e);if(t.hasClass(yt))return{subId:yt};if(t.hasClass(Ct))return{subId:Ct};if(t.hasClass("oj-dialog-content"))return{subId:"oj-dialog-content"};if(t.hasClass("oj-dialog-header-close-wrapper"))return{subId:"oj-dialog-header-close-wrapper"};if(t.hasClass("oj-resizable-n"))return{subId:"oj-resizable-n"};if(t.hasClass("oj-resizable-e"))return{subId:"oj-resizable-e"};if(t.hasClass("oj-resizable-s"))return{subId:"oj-resizable-s"};if(t.hasClass("oj-resizable-w"))return{subId:"oj-resizable-w"};if(t.hasClass("oj-resizable-se"))return{subId:"oj-resizable-se"};if(t.hasClass("oj-resizable-sw"))return{subId:"oj-resizable-sw"};if(t.hasClass("oj-resizable-ne"))return{subId:"oj-resizable-ne"};if(t.hasClass("oj-resizable-nw"))return{subId:"oj-resizable-nw"}}return null},_surrogateRemoveHandler:function(){this.element.remove()},_getPopupServiceEvents:function(){if(!this._popupServiceEvents){var e={};e[i.PopupService.EVENT.POPUP_CLOSE]=this._closeImplicitly.bind(this),e[i.PopupService.EVENT.POPUP_REMOVE]=this._surrogateRemoveHandler.bind(this),e[i.PopupService.EVENT.POPUP_REFRESH]=this._positionDescendents.bind(this),e[i.PopupService.EVENT.POPUP_BEFORE_OPEN]=this._beforeOpenHandler.bind(this),e[i.PopupService.EVENT.POPUP_AFTER_OPEN]=this._afterOpenHandler.bind(this),e[i.PopupService.EVENT.POPUP_BEFORE_CLOSE]=this._beforeCloseHandler.bind(this),e[i.PopupService.EVENT.POPUP_AFTER_CLOSE]=this._afterCloseHandler.bind(this),this._popupServiceEvents=e}return this._popupServiceEvents},_closeImplicitly:function(){this._ignoreBeforeCloseResultant=!0,this.close(),delete this._ignoreBeforeCloseResultant},_setWhenReady:function(e){var t=this._whenReadyMediator;t&&(t.destroy(),delete this._whenReadyMediator),["open","close"].indexOf(e)<0||(this._whenReadyMediator=new i.PopupWhenReadyMediator(this.element,e,"ojDialog",this._IsCustomElement()))},_isOperationPending:function(e,t){var i=this._whenReadyMediator;return!!i&&i.isOperationPending(this,e,e,t)},_NotifyDetached:function(){i.ZOrderUtils.getStatus(this.element)===i.ZOrderUtils.STATUS.OPEN&&this._closeImplicitly(),this._super()}}),i.Components.setDefaultOptions({ojDialog:{resizeBehavior:i.Components.createDynamicPropertyGetter(function(){return(i.ThemeUtils.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).resizeBehavior}),cancelBehavior:i.Components.createDynamicPropertyGetter(function(){return(i.ThemeUtils.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).cancelBehavior}),dragAffordance:i.Components.createDynamicPropertyGetter(function(){return(i.ThemeUtils.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).dragAffordance})}}),$.widget("oj.ojResizable",{version:"1.0.0",widgetEventPrefix:"oj",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(e,t){if("hidden"===$(e).css("overflow"))return!1;var i,n=t&&"left"===t?"scrollLeft":"scrollTop";return e[n]>0||(e[n]=1,i=e[n]>0,e[n]=0,i)},_create:function(){this._super();var e,t,i,n,o=this,s=this.options,r=this.element.mouse.bind(this.element);if(r(),this.mouse=r("instance"),this.mouse._mouseCapture=function(e){return o._mouseCapture(e)},this.mouse._mouseStart=function(e){return o._mouseStart(e)},this.mouse._mouseDrag=function(e){return o._mouseDrag(e)},this.mouse._mouseStop=function(e){return this.element&&this.element.focus(),o._mouseStop(e)},this.element.addClass("oj-resizable"),$.extend(this,{originalElement:this.element,_proportionallyResizeElements:[],_helper:null}),this._initialResize=!0,this.handles=s.handles||($(".oj-resizable-handle",this.element).length?{n:".oj-resizable-n",e:".oj-resizable-e",s:".oj-resizable-s",w:".oj-resizable-w",se:".oj-resizable-se",sw:".oj-resizable-sw",ne:".oj-resizable-ne",nw:".oj-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},t=0;t<e.length;t++)i=$.trim(e[t]),n=$("<div class='oj-resizable-handle oj-resizable-"+i+"'></div>"),this.handles[i]=".oj-resizable-"+i,this.element.append(n);this._renderAxis=function(e){var t;for(t in e=e||this.element,this.handles)this.handles[t].constructor===String&&(this.handles[t]=this.element.children(this.handles[t]).first().show())},this._renderAxis(this.element),this._handles=$(".oj-resizable-handle",this.element),this._handles.mouseover(function(){o.resizing||(this.className&&(n=this.className.match(/oj-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se")}),this.mouse._mouseInit()},_destroy:function(){this.mouse&&this.mouse._mouseDestroy();try{this.mouse.destroy(),this.mouse=null}catch(e){}var e;return e=this.originalElement,$(e).removeClass("oj-resizable oj-resizable-disabled oj-resizable-resizing").removeData("resizable").removeData("oj-resizable").unbind(".resizable").find(".oj-resizable-handle").remove(),this},_mouseCapture:function(e){var t,i,n=!1;for(t in this.handles)((i=$(this.handles[t])[0])===e.target||$.contains(i,e.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(e){var t,i,n,o=this.options,s=this.element.position(),r=this.element;return this.resizing=!0,/absolute/.test(r.css("position"))?r.css({position:"absolute",top:r.css("top"),left:r.css("left")}):r.is(".oj-draggable")&&r.css({position:"absolute",top:s.top,left:s.left}),this._renderProxy(),t=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),o.containment&&(t+=$(o.containment).scrollLeft()||0,i+=$(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:t,top:i},this.size={width:r.width(),height:r.height()},this.originalSize={width:r.width(),height:r.height()},this.originalPosition={left:t,top:i},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio=this.originalSize.width/this.originalSize.height||1,n=$(".oj-resizable-"+this.axis).css("cursor"),$("body").css("cursor","auto"===n?this.axis+"-resize":n),r.addClass("oj-resizable-resizing"),this._propagate("start",e),this._alsoresize_start(e),this._containment_start(e),!0},_mouseDrag:function(e){var t,i=this.helper,n={},o=this.originalMousePosition,s=this.axis,r=e.pageX-o.left||0,a=e.pageY-o.top||0,l=this._change[s];return this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height},!!l&&(t=l.apply(this,[e,r,a]),this._updateVirtualBoundaries(e.shiftKey),e.shiftKey&&(t=this._updateRatio(t,e)),t=this._respectSize(t,e),this._updateCache(t),this._propagate("resize",e),this._alsoresize_resize(e,this.ui()),this._containment_resize(e,this.ui()),this.position.top!==this.prevPosition.top&&(n.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(n.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(n.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(n.height=this.size.height+"px"),i.css(n),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),$.isEmptyObject(n)||this._trigger("resize",e,this.ui()),!1)},_mouseStop:function(e){return this.resizing=!1,$("body").css("cursor","auto"),this.element.removeClass("oj-resizable-resizing"),this._propagate("stop",e),this._alsoresize_stop(e),this._containment_stop(e),!1},_updateVirtualBoundaries:function(e){var t,i,n,o,s,r=this.options;s={minWidth:this._isNumber(r.minWidth)?r.minWidth:0,maxWidth:this._isNumber(r.maxWidth)?r.maxWidth:1/0,minHeight:this._isNumber(r.minHeight)?r.minHeight:0,maxHeight:this._isNumber(r.maxHeight)?r.maxHeight:1/0},e&&(t=s.minHeight*this.aspectRatio,n=s.minWidth/this.aspectRatio,i=s.maxHeight*this.aspectRatio,o=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),n>s.minHeight&&(s.minHeight=n),i<s.maxWidth&&(s.maxWidth=i),o<s.maxHeight&&(s.maxHeight=o)),this._vBoundaries=s},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,n=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===n&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===n&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,n=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,s=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,r=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,u=/sw|nw|w/.test(i),h=/nw|ne|n/.test(i);return s&&(e.width=t.minWidth),r&&(e.height=t.minHeight),n&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),s&&u&&(e.left=a-t.minWidth),n&&u&&(e.left=a-t.maxWidth),r&&h&&(e.top=l-t.minHeight),o&&h&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,n,o,s=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(o=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[o.css("borderTopWidth"),o.css("borderRightWidth"),o.css("borderBottomWidth"),o.css("borderLeftWidth")],n=[o.css("paddingTop"),o.css("paddingRight"),o.css("paddingBottom"),o.css("paddingLeft")],t=0;t<i.length;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(n[t],10)||0);o.css({height:s.height()-this.borderDif[0]-this.borderDif[2]||0,width:s.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element;this.options,this.elementOffset=e.offset(),this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(e,t,i){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,t,i]))},sw:function(e,t,i){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,t,i]))},ne:function(e,t,i){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,t,i]))},nw:function(e,t,i){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,t,i]))}},_propagate:function(e,t){"resize"!==e&&this._trigger(e,t,this.ui())},_alsoresize_start:function(){var e=this.options,t=function(e){$(e).each(function(){var e=$(this);e.data("oj-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof e.alsoResize||e.alsoResize.parentNode?t(e.alsoResize):e.alsoResize.length?(e.alsoResize=e.alsoResize[0],t(e.alsoResize)):$.each(e.alsoResize,function(e){t(e)})},_alsoresize_resize:function(e,t){var i=this.options,n=this.originalSize,o=this.originalPosition,s={height:this.size.height-n.height||0,width:this.size.width-n.width||0,top:this.position.top-o.top||0,left:this.position.left-o.left||0},r=function(e,i){$(e).each(function(){var e=$(this),n=$(this).data("oj-resizable-alsoresize"),o={},r=i&&i.length?i:e.parents(t.originalElement[0]).length?["width","height"]:["width","height","top","left"];$.each(r,function(e,t){var i=(n[t]||0)+(s[t]||0);i&&i>=0&&(o[t]=i||null)}),e.css(o)})};"object"!=typeof i.alsoResize||i.alsoResize.nodeType?r(i.alsoResize,null):$.each(i.alsoResize,function(e,t){r(e,t)})},_alsoresize_stop:function(){$(this).removeData("oj-resizable-alsoresize")},_containment_start:function(){var e,t,i,n,o,s,r,a=this,l=a.options,u=a.element,h=l.containment,d=h instanceof $?h.get(0):/parent/.test(h)?u.parent().get(0):h;d&&(a.containerElement=$(d),/document/.test(h)||h===document?(a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight}):(e=$(d),t=[],$(["Top","Right","Left","Bottom"]).each(function(i,n){t[i]=a._num(e.css("padding"+n))}),a.containerOffset=e.offset(),a.containerPosition=e.position(),a.containerSize={height:e.innerHeight()-t[3],width:e.innerWidth()-t[1]},i=a.containerOffset,n=a.containerSize.height,o=a.containerSize.width,s=a._hasScroll(d,"left")?d.scrollWidth:o,r=a._hasScroll(d)?d.scrollHeight:n,a.parentData={element:d,left:i.left,top:i.top,width:s,height:r}))},_containment_resize:function(e,t){var i,n,o,s,r=this.options,a=this.containerOffset,l=this.position,u=e.shiftKey,h={top:0,left:0},d=this.containerElement,c=!0;d[0]!==document&&/static/.test(d.css("position"))&&(h=a),l.left<(this._helper?a.left:0)&&(this.size.width=this.size.width+(this._helper?this.position.left-a.left:this.position.left-h.left),u&&(this.size.height=this.size.width/this.aspectRatio,c=!1),this.position.left=r.helper?a.left:0),l.top<(this._helper?a.top:0)&&(this.size.height=this.size.height+(this._helper?this.position.top-a.top:this.position.top),u&&(this.size.width=this.size.height*this.aspectRatio,c=!1),this.position.top=this._helper?a.top:0),this.offset.left=this.parentData.left+this.position.left,this.offset.top=this.parentData.top+this.position.top,i=Math.abs((this._helper?this.offset.left-h.left:this.offset.left-a.left)+this.sizeDiff.width),n=Math.abs((this._helper?this.offset.top-h.top:this.offset.top-a.top)+this.sizeDiff.height),o=this.containerElement.get(0)===this.element.parent().get(0),s=/relative|absolute/.test(this.containerElement.css("position")),o&&s&&(i-=Math.abs(this.parentData.left)),i+this.size.width>=this.parentData.width&&(this.size.width=this.parentData.width-i,u&&(this.size.height=this.size.width/this.aspectRatio,c=!1)),n+this.size.height>=this.parentData.height&&(this.size.height=this.parentData.height-n,u&&(this.size.width=this.size.height*this.aspectRatio,c=!1)),c||(this.position.left=t.prevPosition.left,this.position.top=t.prevPosition.top,this.size.width=t.prevSize.width,this.size.height=t.prevSize.height)},_containment_stop:function(){var e=this.options,t=this.containerOffset,i=this.containerPosition,n=this.containerElement,o=$(this.helper),s=o.offset(),r=o.outerWidth()-this.sizeDiff.width,a=o.outerHeight()-this.sizeDiff.height;this._helper&&!e.animate&&/relative/.test(n.css("position"))&&$(this).css({left:s.left-i.left-t.left,width:r,height:a}),this._helper&&!e.animate&&/static/.test(n.css("position"))&&$(this).css({left:s.left-i.left-t.left,width:r,height:a})},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition,prevSize:this.prevSize,prevPosition:this.prevPosition}}}),i.CustomElementBridge.registerMetadata("oj-dialog","baseComponent",{properties:{cancelBehavior:{type:"string",enumValues:["icon","escape","none"]},dragAffordance:{type:"string",enumValues:["title-bar","none"]},initialVisibility:{type:"string",enumValues:["hide","show"]},modality:{type:"string",enumValues:["modal","modeless"]},position:{type:"object",properties:{my:{type:"object|string",properties:{horizontal:{type:"string",enumValues:["start","end","left","center","right"]},vertical:{type:"string",enumValues:["top","center","bottom"]}}},at:{type:"object|string",properties:{horizontal:{type:"string",enumValues:["start","end","left","center","right"]},vertical:{type:"string",enumValues:["top","center","bottom"]}}},offset:{type:"object",properties:{x:{type:"number"},y:{type:"number"}}},of:{type:"string|{x:number, y:number}"},collision:{type:"string",enumValues:["flip","fit","flipfit","none"]}}},resizeBehavior:{type:"string",enumValues:["resizable","none"]},translations:{type:"Object",properties:{labelCloseIcon:{type:"string",value:"Close"}}}},events:{animateEnd:{},animateStart:{},beforeClose:{},beforeOpen:{},close:{},open:{},focus:{},resize:{},resizeStart:{},resizeStop:{}},methods:{close:{},isOpen:{},open:{},refresh:{}},extension:{_WIDGET_NAME:"ojDialog"}}),i.CustomElementBridge.register("oj-dialog",{metadata:i.CustomElementBridge.getMetadata("oj-dialog")}),i.DomScroller=function(e,t,i){i=i||{},this._data=t,this._asyncIterator=i.asyncIterator,this._element=$(e)[0],this._fetchSize=i.fetchSize,this._fetchSize=this._fetchSize>0?this._fetchSize:25,this._maxCount=i.maxCount,this._maxCount=this._maxCount>0?this._maxCount:500,this._rowCount=i.initialRowCount>0?i.initialRowCount:0,this._successCallback=i.success,this._requestCallback=i.request,this._errorCallback=i.error,this._registerDataSourceEventListeners(),this._fetchTrigger=i.fetchTrigger,(null==this._fetchTrigger||isNaN(this._fetchTrigger))&&(this._fetchTrigger=0),this._initialScrollTop=this._element.scrollTop,$(this._getScrollEventElement()).on("scroll.domscroller",function(e){var t=this._element,i=this._getScrollTop(t),n=t.scrollHeight-t.clientHeight;n>0&&this._handleScrollerScrollTop(i,n)}.bind(this))},i.DomScroller.prototype.setFetchTrigger=function(e){null!=e&&!isNaN(e)&&e>=0&&(this._fetchTrigger=e)},i.DomScroller.prototype._getScrollEventElement=function(){return this._element==document.body||this._element==document.documentElement?window:this._element},i.DomScroller.calculateOffsetTop=function(e,t){for(var i=0,n=t;n&&n!=e&&$.contains(e,n);)i+=n.offsetTop,n=n.offsetParent;return i},i.DomScroller.prototype._getScrollTop=function(e){var t=this._fetchTrigger;return e==document.documentElement&&(void 0===this._useBodyScrollTop&&(this._useBodyScrollTop=this._initialScrollTop==e.scrollTop),this._useBodyScrollTop)?t+document.body.scrollTop:t+e.scrollTop},i.DomScroller.prototype.destroy=function(){this._unregisterDataSourceEventListeners(),$(this._getScrollEventElement()).off("scroll.domscroller")},i.DomScroller.prototype.checkViewport=function(){return this._asyncIterator&&this._element.clientHeight>0&&!this._checkOverflow()?this._fetchMoreRows():Promise.resolve(null)},i.DomScroller.prototype._handleScrollerScrollTop=function(e,t){if(t-e<=1&&e>this._fetchTrigger&&!this._fetchPromise)if(this._asyncIterator){var i=this;this._fetchMoreRows().then(function(e){i._successCallback&&i._successCallback(e)},function(e){i._errorCallback&&i._errorCallback(e)})}else null!=this._errorCallback&&this._errorCallback()},i.DomScroller.prototype._checkOverflow=function(){var e=this._element;return e.scrollHeight>e.clientHeight+this._fetchTrigger},i.DomScroller.prototype._fetchMoreRows=function(){if(this._fetchPromise)return this._fetchPromise;var e=this._maxCount-this._rowCount;if(e>0){this._fetchSize;var t=this;if(e<this._fetchSize&&e,this._asyncIterator)return null!=this._requestCallback&&this._requestCallback(),this._fetchPromise=this._asyncIterator.next().then(function(i){return t._fetchPromise=null,null!=i&&null!=i.value&&(i.value.data.length>0&&(t._rowCount=t._rowCount+i.value.data.length,e<t._fetchSize&&(i.maxCount=t._maxCount,i.maxCountLimit=!0,i.value.data.length>e&&(i.value.data=i.value.data.slice(0,e),i.value.metadata=i.value.metadata.slice(0,e),null!=i.value.fetchParameters&&(i.value.fetchParameters.size=e)))),i.done&&(t._asyncIterator=null)),Promise.resolve(i)}),this._fetchPromise}return Promise.resolve({maxCount:this._maxCount,maxCountLimit:!0})},i.DomScroller.prototype._handleDataRowMutateEvent=function(e){var t=null,i=null;if(null!=e.detail.remove&&(t="remove",i=e.detail.remove),null!=e.detail.add&&(t="add",i=e.detail.add),null!=t){var n,o=i.indexes,s=o.length;for(n=0;n<s;n++){var r=o[n];void 0!==r&&this._rowCount>0&&r<=this._rowCount&&("add"==t?this._rowCount=this._rowCount+1:"remove"==t&&(this._rowCount=this._rowCount-1))}}},i.DomScroller.prototype._registerDataSourceEventListeners=function(){var e,t,i=this._data;if(null!=i)for(this._unregisterDataSourceEventListeners(),this._dataProviderEventHandlers=[],this._dataProviderEventHandlers.push({eventType:"mutate",eventHandler:this._handleDataRowMutateEvent.bind(this)}),e=0;e<this._dataProviderEventHandlers.length;e++)(t=i.addEventListener(this._dataProviderEventHandlers[e].eventType,this._dataProviderEventHandlers[e].eventHandler))&&(this._dataProviderEventHandlers[e].eventHandler=t)},i.DomScroller.prototype._unregisterDataSourceEventListeners=function(){var e,t=this._data;if(null!=this._dataProviderEventHandlers&&null!=t)for(e=0;e<this._dataProviderEventHandlers.length;e++)t.removeEventListener(this._dataProviderEventHandlers[e].eventType,this._dataProviderEventHandlers[e].eventHandler)};i.Composite.register("oj-file-picker",{view:"<input type='file' style='display:none'       data-bind=\"attr:{multiple: $properties.selectionMode == 'multiple',                         accept: acceptStr}\"></input><div class='oj-filepicker-clickable'>  <oj-bind-slot name='trigger'>    <div tabindex='0'         class='oj-filepicker-dropzone'>      <p class='oj-filepicker-text' data-bind='text: defDropzoneText'></p>    </div>  </oj-bind-slot></div>",viewModel:function(e){var t,n,o=e.element,s=e.properties,r=!1;function a(e){var i=t[0],n=$(o).find(".oj-filepicker-clickable")[0];switch(function(e){e&&(e.removeEventListener("dragenter",_,!1),e.removeEventListener("dragover",m,!1),e.removeEventListener("dragleave",g,!1),e.removeEventListener("dragend",g,!1),e.removeEventListener("drop",f,!1))}(i),function(e){e&&(e.removeEventListener("click",l,!1),e.removeEventListener("keypress",l,!1))}(n),e){case"click":d(n);break;case"drop":c(i),n&&n.addEventListener("keypress",l,!1);break;case"auto":case"clickAndDrop":default:d(n),c(i)}}function l(e){return r=!0,e.preventDefault(),n.click(),!0}function u(e){e.preventDefault(),e.stopPropagation();var t=e.target.files;t.length>0&&v(t,e),r=!1}function h(e){var t,n=s.accept;if(!n||0===n.length||!e)return!0;for(var o=0;o<n.length;o++){if(!(t=i.StringUtils.trim(n[o])))return!0;if(t.startsWith(".",0)){if(!e.name||e.name&&e.name.endsWith(t))return!0}else{if(!e.type)return!1;if("image/*"===t){if(e.type.startsWith("image/",0))return!0}else if("video/*"===t){if(e.type.startsWith("video/",0))return!0}else if("audio/*"===t){if(e.type.startsWith("audio/",0))return!0}else if(e.type===t)return!0}}return!1}function d(e){e&&(e.addEventListener("click",l,!1),e.addEventListener("keypress",l,!1))}function c(e){e&&(e.addEventListener("dragenter",_,!1),e.addEventListener("dragover",m,!1),e.addEventListener("dragleave",g,!1),e.addEventListener("dragend",g,!1),e.addEventListener("drop",f,!1))}function p(e){var t="single"!==o.selectionMode||1===e.length;return t?function(e){if(e)for(var t=0;t<e.length;t++)if(!h(e[t]))return!1;return!0}(e):t}function _(e){e.preventDefault(),e.stopPropagation()}function m(e){e.preventDefault(),e.stopPropagation();var i=e.dataTransfer,n=!i.items||p(i.items);return n?(i.dropEffect="copy",t.addClass("oj-valid-drop")):i.dropEffect="none",n}function g(e){e.preventDefault(),e.stopPropagation(),t.removeClass("oj-valid-drop")}function f(e){var t=e.dataTransfer.files;p(t)?v(t,e):i.Logger.warn("oj-file-picker: Files "+function(e){var t="";if(e)for(var i=0;i<e.length;i++)t+=e[i].name+" ";return t}(t)+" are not acceptable."),g(e)}function v(e,t){var i=new CustomEvent("ojSelect",{detail:{files:e,originalEvent:t}});o.dispatchEvent(i)}this.acceptStr=ko.pureComputed(function(){var e=s.accept;return e&&e.length?e.join(","):null},this),o.addEventListener("selectOnChanged",function(e){a(e.detail.value)}),this.defDropzoneText=i.Translations.getTranslatedString("oj-ojFilePicker.dropzoneText"),this.bindingsApplied=function(){var e=$(o);e.addClass("oj-filepicker"),t=e.find(".oj-filepicker-dropzone"),a(s.selectOn);var l=e.find("input");l.length&&(n=l[0]).addEventListener("change",u,!1),t.length&&(t[0].addEventListener("focus",function(){r||(i.DomUtils.recentPointer()?t.removeClass("oj-focus-highlight"):t.addClass("oj-focus-highlight"))}),t[0].addEventListener("focusout",function(){r||t.removeClass("oj-focus-highlight")}))}},metadata:{properties:{accept:{type:"Array"},selectOn:{type:"string",enumValues:["auto","click","drop","clickAndDrop"],value:"auto"},selectionMode:{type:"string",enumValues:["multiple","single"],value:"multiple"}},events:{select:{}}}}),i.FilmStripPagingModel=function(){this.Init()},i.Object.createSubclass(i.FilmStripPagingModel,i.EventSource,"oj.FilmStripPagingModel"),i.FilmStripPagingModel.prototype.Init=function(){i.FilmStripPagingModel.superclass.Init.call(this),this._page=-1,this._totalSize=0,this._pageSize=-1},i.FilmStripPagingModel.prototype.setTotalSize=function(e){this._totalSize=e},i.FilmStripPagingModel.prototype.getPageSize=function(){return this._pageSize},i.FilmStripPagingModel.prototype.getPage=function(){return this._page},i.FilmStripPagingModel.prototype.setPage=function(e,t){e=parseInt(e,10);try{var i=this.getPageCount(),n=this._page,o=this._pageSize,s=o;if(t&&t.pageSize&&(s=t.pageSize),0===this._totalSize&&-1===s)return Promise.resolve();var r=Math.ceil(this._totalSize/s);if(e<0||e>r-1)throw new Error("JET FilmStrip: Invalid 'page' set: "+e);var a=!1;if(e!=n||s!=o){if(!1===this.handleEvent("beforePage",{page:e,previousPage:n}))return Promise.reject();a=!0}this._page=e,this._pageSize=s;var l=this.getPageCount(),u=this;return new Promise(function(o,s){if(i!=l&&u.handleEvent("pageCount",{pageCount:l,previousPageCount:i}),a){var r={page:e,previousPage:n};t&&t.loopDirection&&(r.loopDirection=t.loopDirection),u.handleEvent("page",r)}o(null)})}catch(e){return Promise.reject(e)}},i.FilmStripPagingModel.prototype.getStartItemIndex=function(){return-1===this._page&&-1===this._pageSize?-1:this._page*this._pageSize},i.FilmStripPagingModel.prototype.getEndItemIndex=function(){return Math.min(this.getStartItemIndex()+this._pageSize,this._totalSize)-1},i.FilmStripPagingModel.prototype.getPageCount=function(){return Math.ceil(this._totalSize/this._pageSize)},i.FilmStripPagingModel.prototype.totalSize=function(){return this._totalSize},i.FilmStripPagingModel.prototype.totalSizeConfidence=function(){return"actual"},function(){i.__registerWidget("oj.ojFilmStrip",$.oj.baseComponent,{defaultElement:"<div>",widgetEventPrefix:"oj",options:{maxItemsPerPage:0,orientation:"horizontal",currentItem:{index:0},arrowPlacement:"adjacent",arrowVisibility:"auto",looping:"off"},_ComponentCreate:function(){this._super();var t=this.element;t.addClass("oj-filmstrip oj-component").attr("tabindex",0).attr("role","region"),t.uniqueId();var o=this.options;if(o.disabled&&i.Logger.warn(se),o.orientation!==f&&o.orientation!==te)throw new Error(h+o.orientation);if(o.arrowPlacement!==e&&o.arrowPlacement!==Z)throw new Error(d+o.arrowPlacement);if(o.arrowVisibility!==ie&&o.arrowVisibility!==m&&o.arrowVisibility!==v&&o.arrowVisibility!==n)throw new Error(c+o.arrowVisibility);if(o.looping!==W&&o.looping!==Y)throw new Error(p+o.looping);this.touchEventNamespace=this.eventNamespace+"Touch",this.mouseEventNamespace=this.eventNamespace+"Mouse",this.keyEventNamespace=this.eventNamespace+"Key",this.navArrowHoverableEventNamespace=this.eventNamespace+"NavArrowHoverable",o.currentItem=this._convertItemToObj(o.currentItem),this._setup(!0),this._populateItemObj(o.currentItem),this.option(C,o.currentItem,{_context:{internalSet:!0,writeback:!0}})},refresh:function(){this._super(),this._setup(!1)},getItemsPerPage:function(){return this._itemsPerPage},getPagingModel:function(){return this._pagingModel},_NotifyShown:function(){this._super(),this._needsSetup?this._setup(this._needsSetup[0]):this._handleResize()},_NotifyAttached:function(){this._super(),this._needsSetup?this._setup(this._needsSetup[0]):this._handleResize()},_setup:function(e){var t=this;if(e&&!this._pagingModel&&(this._pagingModel=new i.FilmStripPagingModel),e&&!this._filterNestedFilmStripsFunc&&(this._filterNestedFilmStripsFunc=function(e,i){return $(i).closest(".oj-filmstrip")[0]===t.element[0]}),!this._canCalculateSizes()){var n=!1;return this._needsSetup&&(n=this._needsSetup[0]),void(this._needsSetup=[e||n])}this._needsSetup=null,this._bRTL="rtl"===this._GetReadingDirection(),this._bTouchSupported=i.DomUtils.isTouchSupported();var o=this.element;e?(this._itemsPerPage=0,this._handlePageFunc=function(e){t._handlePage(e)},this._componentSize=0,this._itemSize=-1,this._handleTransitionEndFunc=function(e){t._handleTransitionEnd()},this._handleResizeFunc=function(e,i){t._handleResize()},this._bTouchSupported&&(this._handleTouchStartFunc=function(e){t._handleTouchStart(e)},this._handleTouchMoveFunc=function(e){t._handleTouchMove(e)},this._handleTouchEndFunc=function(e){t._handleTouchEnd(e)},this._addTouchListeners()),this._handleMouseDownFunc=function(e){t._handleMouseDown(e)},this._handleMouseMoveFunc=function(e){t._handleMouseMove(e)},this._handleMouseUpFunc=function(e){t._handleMouseUp(e)},this._addMouseListeners(),this._handleKeyDownFunc=function(e){t._handleKeyDown(e)},this._addKeyListeners()):this._destroyInternal();for(var s=o.children(),r=0;r<s.length;r++)i.Components.subtreeDetached(s[r]);var a=this._pagingModel;if(e&&a.on("page",this._handlePageFunc),a.setTotalSize(s.length),this._wrapChildren(),s.length>0){this._adjustSizes();for(r=0;r<s.length;r++)i.Components.subtreeAttached(s[r]);i.DomUtils.addResizeListener(o[0],this._handleResizeFunc,ee)}},_destroy:function(){this._bTouchSupported&&(this._removeTouchListeners(),this._handleTouchStartFunc=null,this._handleTouchMoveFunc=null,this._handleTouchEndFunc=null),this._removeMouseListeners(),this._handleMouseDownFunc=null,this._handleMouseMoveFunc=null,this._handleMouseUpFunc=null,this._removeKeyListeners(),this._handleKeyDownFunc=null,this._destroyInternal(),this._pagingModel.off("page",this._handlePageFunc),this._handlePageFunc=null,this._pagingModel=null,this._handleResizeFunc=null,this._handleTransitionEndFunc=null,this._filterNestedFilmStripsFunc=null;var e=this.element;e.removeClass("oj-filmstrip oj-component "+I).removeAttr("tabindex role").removeAttr("aria-labelledby"),e.removeUniqueId(),this._super()},_destroyInternal:function(){this._deferredHandleResize=!1,this._resolveBusyState();var e=this.element;i.DomUtils.removeResizeListener(e[0],this._handleResizeFunc),this._itemSize=-1,this._queuedHandleResize&&(clearTimeout(this._queuedHandleResize),this._queuedHandleResize=null);for(var t=this._getItems(),n=0;n<t.length;n++)i.Components.subtreeDetached(t[n]);this._clearCalculatedSizes(),this._getItemContainers().unwrap(),this._unwrapChildren();for(n=0;n<t.length;n++)i.Components.subtreeAttached(t[n])},_setOption:function(t,o,s){var r=this.options,a=!1,l=-1,_=this._pagingModel,g=_.getPage();switch(t){case"disabled":i.Logger.warn(se);break;case"orientation":if(o!==f&&o!==te)throw new Error(h+o);a=r.orientation!=o;break;case"maxItemsPerPage":a=r.maxItemsPerPage!=o;break;case"arrowPlacement":if(o!==e&&o!==Z)throw new Error(d+o);a=r.arrowPlacement!=o;break;case"arrowVisibility":if(o!==ie&&o!==m&&o!==v&&o!==n)throw new Error(c+o);a=r.arrowVisibility!=o;break;case"looping":if(o!==W&&o!==Y)throw new Error(p+o);a=r.looping!=o;break;case C:o=this._convertItemToObj(o),this._populateItemObj(o);var y=r.currentItem;if(y&&o&&(y.id!=o.id||y.index!=o.index)&&((l=this._findPage(o))<0||l>=_.getPageCount()))throw new Error(u+o)}switch(this._super(t,o,s),t){case C:l>-1&&l!=g&&_.setPage(l)}a&&this._setup(!1)},_handleResize:function(){if(this._busyStateResolveFunc)this._deferredHandleResize=!0;else if(this._bHandlingResize){if(!this._queuedHandleResize){var e=this;this._queuedHandleResize=setTimeout(function(){e._queuedHandleResize=null,e._handleResize()},0)}}else this._bHandlingResize=!0,this._adjustSizes(!0),this._bHandlingResize=!1},_isHorizontal:function(){return this.options.orientation!==te},_isLoopingPage:function(){return this.options.looping===Y},_getCssPositionAttr:function(){return this._isHorizontal()?this._bRTL?"right":"left":"top"},_getCssSizeAttr:function(){return this._isHorizontal()?"width":"height"},_canCalculateSizes:function(){var e=document.createElement("div"),t=e.style;t.position="absolute",t.width="10px",t.height="10px";var i=this.element[0];i.appendChild(e);var n=!1;try{n=e.offsetWidth>0&&e.offsetHeight>0}catch(e){}return i.removeChild(e),n},_wrapChildren:function(){var t=this.element,i=this._isHorizontal(),n=t.children();n.addClass(O).wrap("<div class='"+A+" "+w+"'></div>");var o=this._getCssPositionAttr(),s=t.children().wrapAll("<div class='"+A+" "+x+"' style='"+o+": 0px;'></div>").parent();this._pagesWrapper=s;var r=this.options;r.arrowVisibility!==m&&r.arrowPlacement===e&&(this._contentWrapper=s.wrap("<div class='"+A+" oj-filmstrip-content-container'></div>").parent()),t.addClass(A),i||t.addClass(G);var a=this._createPageInfoElem(),l=t.attr("id"),u=a.attr("id");t.append(a),t.attr("aria-labelledby",l+" "+u),this._pageInfoElem=a,r.arrowVisibility!==m&&n.length>0&&(this._prevButton=this._createPrevNavArrow(),this._nextButton=this._createNextNavArrow(),this._navArrowsShownOnHover()&&this._setupNavArrowsHoverable())},_unwrapChildren:function(){var e=this.element,t=this._getItems();this._tearDownNavArrowsHoverable(),this._prevButton&&(this._UnregisterChildNode(this._prevButton),this._prevButton=null),this._nextButton&&(this._UnregisterChildNode(this._nextButton),this._nextButton=null);var i=e.children(J+T);i&&i.remove(),this._pageInfoElem&&(this._UnregisterChildNode(this._pageInfoElem),this._pageInfoElem.remove(),this._pageInfoElem=null),t.removeClass(O).unwrap().unwrap(),this._pagesWrapper=null,this._contentWrapper&&(t.unwrap(),this._contentWrapper=null),e.removeClass(A+" "+G)},_createPageInfoElem:function(){var e=$(document.createElement("div"));return e.uniqueId(),e.addClass("oj-helper-hidden-accessible oj-filmstrip-liveregion"),e.attr({role:"region","aria-live":"polite","aria-atomic":"true"}),e},_updatePageInfoElem:function(){var e=this._pagingModel,t=e.getPage(),i=e.getPageCount(),n=le(this.getTranslatedString("labelAccFilmStrip",{pageIndex:t+1,pageCount:i})),o=this._pageInfoElem;o&&o.attr("aria-label",n)},_setupNavArrowsHoverable:function(){this.element.on("mouseenter"+this.navArrowHoverableEventNamespace,function(e){$(e.currentTarget).hasClass("oj-disabled")||$(e.currentTarget).addClass(I)}).on("mouseleave"+this.navArrowHoverableEventNamespace,function(e){$(e.currentTarget).removeClass(I)})},_tearDownNavArrowsHoverable:function(){this.element.off(this.navArrowHoverableEventNamespace)},_navArrowsShownOnHover:function(){var e=this.options,t=e.arrowVisibility;return t===v||t===n&&e.arrowPlacement===Z},_hasPrevPage:function(){return this._pagingModel.getPage()>0},_hasNextPage:function(){var e=this._pagingModel;return e.getPage()<e.getPageCount()-1},_prevPage:function(){var e=this._pagingModel;if(this._hasPrevPage())e.setPage(e.getPage()-1);else{var t=e.getPageCount();this._isLoopingPage()&&t>1&&e.setPage(t-1,{loopDirection:X})}},_nextPage:function(){var e=this._pagingModel;if(this._hasNextPage())e.setPage(e.getPage()+1);else{var t=e.getPageCount();this._isLoopingPage()&&t>1&&e.setPage(0,{loopDirection:q})}},_displayNavigationArrow:function(t,i){this.options.arrowPlacement===e?i.css("visibility",t?"":m):i.parent().css("display",t?"":y)},_updateNavigationArrowsDisplay:function(){if(this.options.arrowVisibility!==m){var e=this._pagingModel,t=e.getPage(),i=e.getPageCount(),n=this._isLoopingPage()&&i>1;this._displayNavigationArrow(n||0!==t,this._prevButton),this._displayNavigationArrow(n||t!==i-1,this._nextButton)}},_createPrevNavArrow:function(){var e=this.element,t=this._isHorizontal()?z:K,i=this._createNavigationArrowContainer(t);this.options.arrowPlacement===Z?e.append(i):e.prepend(i);var n=le(this.getTranslatedString("labelAccArrowPreviousPage")),o=le(this.getTranslatedString("tipArrowPreviousPage")),s=this._createNavigationArrow(i,t,n,o),r=this;return s.on("click",function(){r._prevPage()}),s},_createNextNavArrow:function(){var e=this.element,t=this._isHorizontal()?S:b,i=this._createNavigationArrowContainer(t);e.append(i);var n=le(this.getTranslatedString("labelAccArrowNextPage")),o=le(this.getTranslatedString("tipArrowNextPage")),s=this._createNavigationArrow(i,t,n,o),r=this;return s.on("click",function(){r._nextPage()}),s},_createNavigationArrowContainer:function(e){var t=$(document.createElement("div"));return t.addClass(T+" "+e),this.options.arrowPlacement===Z&&(t.addClass("oj-filmstrip-arrow-container-overlay"),this._navArrowsShownOnHover()&&t.addClass(D)),t},_createNavigationArrow:function(t,i,n,o){var s="<div class='"+E+" oj-default oj-enabled "+i+"' role='button' tabindex='-1'";s+="><span class='oj-filmstrip-arrow-icon "+i+" oj-component-icon'></span></div>",t.append(s);var r=t.children(J+E).eq(0);r.uniqueId();var a=r.attr("id");n&&r.attr("aria-label",n),o&&r.attr("title",o);var l=this._pageInfoElem.attr("id");return r.attr("aria-labelledby",l+" "+a),this._AddHoverable(r),this._AddActiveable(r),this.options.arrowPlacement===e&&this._navArrowsShownOnHover()&&r.addClass(D),r},_getItemContainers:function(){return this._pagesWrapper.find(J+w).filter(this._filterNestedFilmStripsFunc)},_getItems:function(){return this._pagesWrapper.find(J+O).filter(this._filterNestedFilmStripsFunc)},_getPages:function(){return this._pagesWrapper.children(J+R)},_clearCalculatedSizes:function(){var e=this._pagesWrapper;this._getPages().css(_,l).css(oe,l),this._getItemContainers().css(_,l).css(oe,l),e.css(this._getCssSizeAttr(),l)},_adjustSizes:function(n){this._clearCalculatedSizes();var s=this.options,r=this._isHorizontal(),a=s.maxItemsPerPage,u=a<1,h=this.element,d=this._getItemContainers();if(this._itemSize<0){var c=this._getItemIndex(s.currentItem),p=$(d[c]),g=p.children(J+O);g.css(o,l),i.Components.subtreeShown(g[0]),this._itemSize=r?p.width():p.height()}var f=r?h.width():h.height();if(s.arrowVisibility!==m&&s.arrowPlacement===e){var v=h.children(J+T).eq(0);f-=2*(r?v.width():v.height())}if(this._componentSize=f,!u){var C=Math.max(Math.floor(f/this._itemSize),1);C<a&&(a=C)}var b=u?Math.max(Math.floor(f/this._itemSize),1):a,S=f/b;d.css(_,S+Q).css(oe,S+Q);var E=Math.ceil(d.length/b),D=this._getPages(),I=!1,w=this._pagingModel;if(w.getPageCount()!=E||this._itemsPerPage!=b||!D||D.length<1){if(I=!0,n)for(var x=0;x<d.length;x++)i.Components.subtreeDetached(d[x]);D&&D.length>0&&d.unwrap();for(x=0;x<d.length;x+=b){d.slice(x,x+b).wrapAll("<div class='"+A+" "+R+"' style='"+o+": "+y+";' "+t+"='true'></div>")}if(n)for(x=0;x<d.length;x++)i.Components.subtreeAttached(d[x])}(D=this._getPages()).css(_,f+Q).css(oe,f+Q);var L=this._pagesWrapper,N=this._contentWrapper;L.css(this._getCssSizeAttr(),f),N&&N.css(this._getCssSizeAttr(),f);var P=0;if(s.currentItem&&(P=this._findPage(s.currentItem,b)),w.getPageCount()!=E||this._itemsPerPage!=b||w.getPage()!=P)w.setPage(P,{pageSize:b});else if(I){var M=w.getPage();this._handlePage({previousPage:M,page:M})}},_handlePage:function(e){var t=e.page,i=e.loopDirection,n=e.previousPage,o=this._pagesWrapper,s=this._getPages(),r=this._pagingModel,a=r.getPageSize(),l=r.getPageCount(),u=n<0||n==t||this._itemsPerPage!=a,h=this._isLoopingPage();this._itemsPerPage=a;var d=null;u||(d=$(s[n]));var c=this._getCssPositionAttr(),p=$(s[t]),_=p.is(g);_&&this._unhidePage(p);var m=this._bDragInit;if(n>-1&&!u){var f=t>n;h&&i&&(f=i===q);var v=h&&!f&&l>1&&0==n,C=h&&f&&l>1&&n==l-1;m=!0,o.css(this._getCssSizeAttr(),2*this._componentSize),f||_&&o.css(c,-this._componentSize+Q),f?(d.addClass(P),p.addClass(N),C&&p.addClass(V)):(d.addClass(j),p.addClass(M),v&&p.addClass(F))}if(this._busyStateResolveFunc=this._addBusyState("scrolling"),m){var y=this,b=this._bDragInit;if(b&&n<0)s.filter(ne).addClass(L);setTimeout(function(){y._finishHandlePage(t,n,f,u,b)},25)}else this._finishHandlePage(t,n,f,u)},_finishHandlePage:function(e,t,i,n,o){var s=this._pagesWrapper;if(n||(this._bPageChangeTransition=!0,s.on("transitionend"+this.eventNamespace+" webkitTransitionEnd"+this.eventNamespace,this._handleTransitionEndFunc)),n)this._handleTransitionEnd();else{var r=this._getPages();if(o&&ae(r),t>-1){var a=$(r[t]),l=$(r[e]);a.addClass(L),l.addClass(L),i?(a.removeClass(P),l.removeClass(N),a.addClass(U),l.addClass(H)):(a.removeClass(j),l.removeClass(M),a.addClass(B),l.addClass(k))}else if(o){var u=r.filter(ne);re(u,"translate3d(0, 0, 0)")}}},_handleTransitionEnd:function(){this._bPageChangeTransition=!1;var e=this._pagesWrapper,t=this._getCssPositionAttr();e.off(this.eventNamespace).css(this._getCssSizeAttr(),this._componentSize).css(t,"0px");var n=null;(i.FocusUtils.containsFocus(e[0])||this._nextButton&&i.FocusUtils.containsFocus(this._nextButton[0])||this._prevButton&&i.FocusUtils.containsFocus(this._prevButton[0]))&&(n=document.activeElement);for(var o=this._pagingModel.getPage(),s=this._getPages(),r=0;r<s.length;r++)r!=o&&this._hidePage($(s[r]));if(s.removeClass(L+" "+U+" "+H+" "+B+" "+k+" "+F+" "+V),ae(s),this._updateNavigationArrowsDisplay(),n&&$(n).is(g)){var a=this.element,l=i.FocusUtils.getFirstTabStop(s[o]);l?i.FocusUtils.focusElement(l):i.FocusUtils.focusElement(a[0])}var u=this.options;if(this._findPage(u.currentItem)!=o){var h=this._getFirstItemOnPage(o);h&&this.option(C,h,{_context:{writeback:!0}})}this._deferredHandleResize&&(this._deferredHandleResize=!1,this._handleResize()),this._updatePageInfoElem(),this._resolveBusyState()},_getItemIndex:function(e){var t=-1;if(e){var n=this._getItems();if(e.id&&i.DomUtils.isValidIdentifier(e.id))for(var o=0;o<n.length;o++){var s=n[o].id;if(s&&s.length>0&&s===e.id){t=o;break}}else null!=e.index&&e.index>=0&&e.index<n.length&&(t=e.index)}return t},_convertItemToObj:function(e){var t=null;return"object"==typeof e?t=e:"number"==typeof e?t={index:e}:"string"==typeof e&&(t={id:e}),t},_populateItemObj:function(e){if(e&&this._pagingModel.getPage()>=0){var t=this._getItemIndex(e);if(e.index=t,null==e.id&&-1!==t){var i=this._getItems();e.id=i[t].id}}},_findPage:function(e,t){var i=this._getItemIndex(e),n=-1;return i>-1&&(void 0===t&&(t=this._itemsPerPage),n=Math.floor(i/t)),n},_getFirstItemOnPage:function(e,t,i){var n=this._pagingModel;if(void 0===t&&(t=n.getPageCount()),e>=0&&e<t){var o=this._getItems();void 0===i&&(i=this._itemsPerPage);var s=e*i;if(s<o.length)return{id:o[s].id,index:s}}return null},_hidePage:function(e){i.Components.subtreeHidden(e[0]),e.css(o,y).attr(t,"true"),e.find(J+O).filter(this._filterNestedFilmStripsFunc).css(o,y)},_unhidePage:function(e){e.css(o,l).removeAttr(t),e.find(J+O).filter(this._filterNestedFilmStripsFunc).css(o,l),i.Components.subtreeShown(e[0])},_addKeyListeners:function(){this.element.on("keydown"+this.keyEventNamespace,this._handleKeyDownFunc)},_removeKeyListeners:function(){this.element.off(this.keyEventNamespace)},_addMouseListeners:function(){this.element.on("mousedown"+this.mouseEventNamespace,this._handleMouseDownFunc).on("mousemove"+this.mouseEventNamespace,this._handleMouseMoveFunc).on("mouseup"+this.mouseEventNamespace,this._handleMouseUpFunc)},_removeMouseListeners:function(){this.element.off(this.mouseEventNamespace)},_addTouchListeners:function(){this.element.on("touchstart"+this.touchEventNamespace,this._handleTouchStartFunc).on("touchmove"+this.touchEventNamespace,this._handleTouchMoveFunc).on("touchend"+this.touchEventNamespace,this._handleTouchEndFunc).on("touchcancel"+this.touchEventNamespace,this._handleTouchEndFunc)},_removeTouchListeners:function(){this.element.off(this.touchEventNamespace)},_handleKeyDown:function(e){var t=this._pagingModel,i=t.getPage(),n=t.getPageCount(),o=-2;switch(e.keyCode){case $.ui.keyCode.RIGHT:o=this._bRTL?i-1:i+1;break;case $.ui.keyCode.LEFT:o=this._bRTL?i+1:i-1;break;case $.ui.keyCode.DOWN:o=i+1;break;case $.ui.keyCode.UP:o=i-1;break;case $.ui.keyCode.HOME:o=0;break;case $.ui.keyCode.END:o=n-1;break;default:return}if(o>-1&&o<n)t.setPage(o);else if(this._isLoopingPage()&&n>1){var s={};o==n&&(o=0,s.loopDirection=q),-1==o&&(o=n-1,s.loopDirection=X),t.setPage(o,s)}e.preventDefault()},_handleMouseDown:function(e){var t=e.originalEvent;this._dragScrollStart(t)},_handleMouseMove:function(e){var t=e.originalEvent;this._dragScrollMove(e,t)},_handleMouseUp:function(e){this._dragScrollEnd()},_handleTouchStart:function(e){var t=e.originalEvent.touches;if(1===t.length){var i=t[0];this._dragScrollStart(i)}},_handleTouchMove:function(e){var t=e.originalEvent.touches[0];this._dragScrollMove(e,t),(this._bTouch||this._scrolledForThisTouch)&&e.preventDefault()},_handleTouchEnd:function(e){this._dragScrollEnd()},_dragScrollStart:function(e){if(this._pagingModel.getPageCount()>1&&!this._bPageChangeTransition){this._bTouch=!0,this._bDragInit=!1,this._bFirstToLast=!1,this._bLastToFirst=!1;var t=this._isHorizontal();this._touchStartCoord=t?e.pageX:e.pageY,this._touchStartCoord2=t?e.pageY:e.pageX}},_initDragScroll:function(e,t,i){var n=this._isHorizontal();this._touchStartCoord=n?e.pageX:e.pageY,this._touchStartCoord2=n?e.pageY:e.pageX;var o=this._getCssPositionAttr(),s=this._pagesWrapper,r=this._pagingModel,a=r.getPage(),l=r.getPageCount(),u=this._getPages(),h=1;t||i?(t&&(this._unhidePage($(u[l-1])),s.css(o,-this._componentSize+Q),h++,$(u[l-1]).addClass(F)),i&&(this._unhidePage($(u[0])),h++,$(u[0]).addClass(V))):(a>0&&(this._unhidePage($(u[a-1])),s.css(o,-this._componentSize+Q),h++),a<l-1&&(this._unhidePage($(u[a+1])),h++)),h>1&&s.css(this._getCssSizeAttr(),h*this._componentSize),this._touchStartScroll=parseInt(s.css(o),10)},_dragScrollMove:function(e,t){if(this._bTouch){var i=this._isHorizontal(),n=(i?t.pageX:t.pageY)-this._touchStartCoord,o=(i?t.pageY:t.pageX)-this._touchStartCoord2,l=i&&this._bRTL?n>0:n<0,u=this._pagingModel,h=u.getPage(),d=u.getPageCount(),c=this._isLoopingPage(),p=c&&!l&&d>1&&0==h,_=c&&l&&d>1&&h==d-1;if(!this._bDragInit)return Math.abs(o)>Math.abs(n)&&(this._bTouch=!1,this._scrolledForThisTouch=!1),Math.abs(n)>s&&(this._initDragScroll(t,p,_),this._bDragInit=!0),this._bFirstToLast=p,void(this._bLastToFirst=_);if(p==this._bFirstToLast&&_==this._bLastToFirst||(this._dragScrollResetPages(),this._initDragScroll(t,p,_),this._bFirstToLast=p,this._bLastToFirst=_),l&&h<u.getPageCount()-1||!l&&h>0||c){var m=this.element[0],g=Math.min(r*(i?m.offsetWidth:m.offsetHeight),a),f=this._getCssPositionAttr(),v=this._pagesWrapper,C=this._getPages();if(Math.abs(n)>=g){var y,b,S={};if(p||_?(p?(y=d-1,b=d>2?1:-1):_&&(y=0,b=d>2?d-2:-1),S.loopDirection=l?q:X):(y=l?h+1:h-1,b=l?h-1:h+1),b>-1&&b<u.getPageCount()&&this._hidePage($(C[b])),l&&b>-1&&!_){var E=parseInt(v.css(f),10);v.css(f,E+this._componentSize+Q)}v.css(this._getCssSizeAttr(),2*this._componentSize),this._bTouch=!1,u.setPage(y,S)}else{var T=i?"translate3d("+n+"px, 0, 0)":"translate3d(0, "+n+"px, 0)";re(C.filter(ne),T)}this._scrolledForThisTouch=!0}this._scrolledForThisTouch&&(e.preventDefault(),e.stopPropagation())}},_dragScrollEnd:function(){if(this._bTouch&&this._bDragInit){var e=this._pagingModel.getPage();this._handlePage({previousPage:e,page:e})}this._bTouch=!1,this._bDragInit=!1,this._bFirstToLast=!1,this._bLastToFirst=!1,this._scrolledForThisTouch=!1},_dragScrollResetPages:function(){for(var e=this._pagesWrapper,t=this._getCssPositionAttr(),i=this._pagingModel,n=i.getPage(),o=i.getPageCount(),s=this._getPages(),r=0;r<s.length;r++)r!=n&&this._hidePage($(s[r]));e.css(t,"0px"),$(s[0]).removeClass(V),$(s[o-1]).removeClass(F)},_addBusyState:function(e){var t=this.element,n=i.Context.getContext(t[0]).getBusyContext(),o="FilmStrip";o+=" (id='"+t.attr("id")+"')";var s={description:o+=": "+e};return n.addBusyState(s)},_resolveBusyState:function(){this._busyStateResolveFunc&&(this._busyStateResolveFunc(),this._busyStateResolveFunc=null)},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;var t=e.subId;return"oj-filmstrip-start-arrow"===t?this.widget().find(J+E+J+z).filter(this._filterNestedFilmStripsFunc)[0]:"oj-filmstrip-end-arrow"===t?this.widget().find(J+E+J+S).filter(this._filterNestedFilmStripsFunc)[0]:"oj-filmstrip-top-arrow"===t?this.widget().find(J+E+J+K).filter(this._filterNestedFilmStripsFunc)[0]:"oj-filmstrip-bottom-arrow"===t?this.widget().find(J+E+J+b).filter(this._filterNestedFilmStripsFunc)[0]:null},getSubIdByNode:function(e){for(var t=this.getNodeBySubId({subId:"oj-filmstrip-start-arrow"}),i=this.getNodeBySubId({subId:"oj-filmstrip-end-arrow"}),n=this.getNodeBySubId({subId:"oj-filmstrip-top-arrow"}),o=this.getNodeBySubId({subId:"oj-filmstrip-bottom-arrow"}),s=e,r=this.element[0];s&&s!=r;){if(s===t)return{subId:"oj-filmstrip-start-arrow"};if(s===i)return{subId:"oj-filmstrip-end-arrow"};if(s===n)return{subId:"oj-filmstrip-top-arrow"};if(s===o)return{subId:"oj-filmstrip-bottom-arrow"};s=s.parentElement}return null},_CompareOptionValues:function(e,t,n){return"currentItem"==e?i.Object.compareValues(t,n):this._super(e,t,n)}});var e="adjacent",t="aria-hidden",n="auto",o="display",s=3,r=.33,a=100,l="",u="JET FilmStrip: Value of 'currentItem' property not found: ",h="JET FilmStrip: Unsupported value set as 'orientation' property: ",d="Unsupported value set as 'arrowPlacement' property: ",c="Unsupported value set as 'arrowVisibility' property: ",p="Unsupported value set as 'looping' property: ",_="flex-basis",m="hidden",g=":hidden",f="horizontal",v="hover",C="currentItem",y="none",b="oj-bottom",S="oj-end",E="oj-filmstrip-arrow",T="oj-filmstrip-arrow-container",D="oj-filmstrip-arrow-transition",A="oj-filmstrip-container",I="oj-filmstrip-hover",O="oj-filmstrip-item",w="oj-filmstrip-item-container",R="oj-filmstrip-page",x="oj-filmstrip-pages-container",L="oj-filmstrip-transition",N="oj-filmstrip-transition-next-newpage-from",P="oj-filmstrip-transition-next-oldpage-from",M="oj-filmstrip-transition-prev-newpage-from",j="oj-filmstrip-transition-prev-oldpage-from",H="oj-filmstrip-transition-next-newpage-to",U="oj-filmstrip-transition-next-oldpage-to",k="oj-filmstrip-transition-prev-newpage-to",B="oj-filmstrip-transition-prev-oldpage-to",F="oj-filmstrip-transition-display-as-firstpage",V="oj-filmstrip-transition-display-as-lastpage",G="oj-filmstrip-vertical",z="oj-start",K="oj-top",W="off",Y="page",q="next",X="prev",Z="overlay",J=".",Q="px",ee=25,te="vertical",ie="visible",ne=":visible",oe="-webkit-flex-basis",se="JET FilmStrip: 'disabled' property not supported",re=function(e,t){e.css("-webkit-transform",t).css("-ms-transform",t).css("transform",t)},ae=function(e){e.css("-webkit-transform",l).css("-ms-transform",l).css("transform",l)},le=function(e){var t=$("<div></div>");return t.text(e),t[0].innerHTML}}(),i.CustomElementBridge.registerMetadata("oj-film-strip","baseComponent",{properties:{arrowPlacement:{type:"string",enumValues:["adjacent","overlay"]},arrowVisibility:{type:"string",enumValues:["visible","hidden","hover","auto"]},currentItem:{type:"object",writeback:!0,properties:{id:{type:"string"},index:{type:"number"}}},maxItemsPerPage:{type:"number"},orientation:{type:"string",enumValues:["horizontal","vertical"]},looping:{type:"string",enumValues:["off","page"]},translations:{type:"Object",properties:{labelAccFilmStrip:{type:"string",value:"Displaying page {pageIndex} of {pageCount}"},labelAccArrowNextPage:{type:"string",value:"Select Next to display next page"},labelAccArrowPreviousPage:{type:"string",value:"Select Previous to display previous page"},tipArrowNextPage:{type:"string",value:"Next"},tipArrowPreviousPage:{type:"string",value:"Previous"}}}},methods:{getItemsPerPage:{},getPagingModel:{}},extension:{_WIDGET_NAME:"ojFilmStrip"}}),i.CustomElementBridge.register("oj-film-strip",{metadata:i.CustomElementBridge.getMetadata("oj-film-strip")}),i.FlattenedTreeCellSet=function(e,t,n,o,s,r){i.Assert.assertArrayOrNull(r),this.m_startRow=e,this.m_endRow=t,this.m_startColumn=n,this.m_endColumn=o,this.m_nodeSet=s,this.m_columns=r},i.FlattenedTreeCellSet.prototype.getData=function(e){var t,n,o,s,r,a,l,u;return null==(t=this._getRelIndexes(e))?null:(n=t[0],o=t[1],i.Assert.assert(n<this.m_nodeSet.getStart()+this.m_nodeSet.getCount()&&o<this.m_columns.length),s=this.m_columns[o],null!=(r=this.m_nodeSet.getData(n))?(a={},l=r.get?function(){return r.get(s)}:function(){return r[s]},u=r.set?function(e){return r.set(s,e)}:function(e){r[s]=e},Object.defineProperty(a,"data",{enumerable:!0,get:l,set:u}),a):null)},i.FlattenedTreeCellSet.prototype.getMetadata=function(e){var t,n,o,s,r,a;return null==(t=this._getRelIndexes(e))?null:(n=t[0],o=t[1],i.Assert.assert(n<this.m_nodeSet.getStart()+this.m_nodeSet.getCount()&&o<this.m_columns.length),s=this.m_columns[o],a=(r=this.m_nodeSet.getMetadata(n)).key,r.keys={row:a,column:s},r)},i.FlattenedTreeCellSet.prototype._getRelIndexes=function(e){var t,n;return i.Assert.assertObject(e),null==this.m_nodeSet||0==this.m_nodeSet.length?null:(t=e.row-this.m_startRow+this.m_nodeSet.getStart(),n=e.column,i.Assert.assertNumber(t,null),i.Assert.assertNumber(n,null),i.Assert.assert(t>=0&&n>=0),[t,n])},i.FlattenedTreeCellSet.prototype.getStart=function(e){return"row"===e?this.m_startRow:"column"===e?this.m_startColumn:0},i.FlattenedTreeCellSet.prototype.getCount=function(e){return"row"===e?Math.min(this.m_endRow-this.m_startRow,this.m_nodeSet.getCount()):"column"===e?this.m_endColumn-this.m_startColumn:0},i.FlattenedTreeCellSet.prototype.getExtent=function(e){return{row:{extent:1,more:{before:!1,after:!1}},column:{extent:1,more:{before:!1,after:!1}}}},i.FlattenedTreeDataGridDataSource=function(e,t){i.FlattenedTreeDataGridDataSource.superclass.constructor.call(this,e,t)},i.Object.createSubclass(i.FlattenedTreeDataGridDataSource,i.FlattenedTreeDataSource,"oj.FlattenedTreeDataGridDataSource"),i.FlattenedTreeDataGridDataSource.prototype.Init=function(){i.FlattenedTreeDataGridDataSource.superclass.Init.call(this),this.m_columns=i.FlattenedTreeDataGridDataSource.superclass.getOption.call(this,"columns"),this.m_rowHeader=i.FlattenedTreeDataGridDataSource.superclass.getOption.call(this,"rowHeader")},i.FlattenedTreeDataGridDataSource.prototype.getCountPrecision=function(e){return"row"===e?"estimate":"actual"},i.FlattenedTreeDataGridDataSource.prototype.getCount=function(e){return"row"===e?-1:"column"===e?this.m_columns.length:0},i.FlattenedTreeDataGridDataSource.prototype.fetchHeaders=function(e,t,n){var o,s,r;if("column"===(o=e.axis))(r=e.start+e.count)>this.getCount("column")&&(r=this.getCount("column")-e.start),s=new i.FlattenedTreeHeaderSet(e.start,r,this.m_columns);else if("row"===o&&null!=this.m_rowHeader)return void(this.m_fetchHeaderRequest={range:e,callbacks:t,callbackObjects:n});null!=t&&null!=t.success&&(null==n&&(n={}),t.success.call(n.success,s,e,null))},i.FlattenedTreeDataGridDataSource.prototype.fetchCells=function(e,t,n){var o,s,r,a;for(o=0;o<e.length;o++)if("row"==(s=e[o]).axis){r=s.start,a=s.count;break}i.FlattenedTreeDataGridDataSource.superclass.fetchRows.call(this,{start:r,count:a},{success:function(i){this._handleFetchRowsSuccess(i,e,t,n,0)}.bind(this),error:function(e){this._handleFetchRowsError(e,{start:r,count:a},t,n)}.bind(this)})},i.FlattenedTreeDataGridDataSource.prototype.keys=function(e){var t,n;return t=e.row,n=e.column,new Promise(function(e,o){t>i.FlattenedTreeDataGridDataSource.superclass.getFetchedRange.call(this).end||n>this.m_columns.length?e(null):e({row:i.FlattenedTreeDataGridDataSource.superclass.getKey.call(this,t),column:this.m_columns[n]})}.bind(this))},i.FlattenedTreeDataGridDataSource.prototype.indexes=function(e){var t,n,o,s,r;return o=e.row,s=e.column,new Promise(function(e,a){for(t=i.FlattenedTreeDataGridDataSource.superclass.getIndex.call(this,o),r=0;r<this.m_columns.length;r++)if(this.m_columns[r]===s){n=r;break}e(t>=0||n>=0?{row:t,column:n}:null)}.bind(this))},i.FlattenedTreeDataGridDataSource.prototype.sort=function(e,t,n){return i.FlattenedTreeDataGridDataSource.superclass.getWrappedDataSource.call(this).sort(e,{success:function(){this._handleSortSuccess(t,n)}.bind(this),error:t.error})},i.FlattenedTreeDataGridDataSource.prototype._handleSortSuccess=function(e,t){this.refresh(),e.success&&(null==t&&(t={}),e.success.call(t.success))},i.FlattenedTreeDataGridDataSource.prototype.move=function(e,t,n,o){i.FlattenedTreeDataGridDataSource.superclass.getWrappedDataSource.call(this).move(e,t,n,o)},i.FlattenedTreeDataGridDataSource.prototype.getCapability=function(e){return"default"===i.FlattenedTreeDataGridDataSource.superclass.getWrappedDataSource.call(this).getCapability(e)?"column":"none"},i.FlattenedTreeDataGridDataSource.prototype.insertMetadata=function(e,t){i.FlattenedTreeDataGridDataSource.superclass.insertMetadata.call(this,e,t)},i.FlattenedTreeDataGridDataSource.prototype._handleFetchRowsSuccess=function(e,t,n,o){var s,r,a,l,u,h,d,c;for(s=0;s<t.length;s++)"row"==(r=t[s]).axis?(a=r.start,l=r.count):"column"==r.axis&&(u=r.start)+(h=r.count)>this.getCount("column")&&(h=this.getCount("column")-u);this.m_fetchHeaderRequest&&(d=this.m_fetchHeaderRequest.range).start==a&&d.count==l&&(this._handleRowHeaderFetchSuccess(e,d,this.m_fetchHeaderRequest.callbacks,this.m_fetchHeaderRequest.callbackObjects),this.m_fetchHeaderRequest=null),c=new i.FlattenedTreeCellSet(a,a+l,u,u+h,e,this.m_columns),n.success&&(null==o&&(o={}),n.success.call(o.success,c,t))},i.FlattenedTreeDataGridDataSource.prototype._handleFetchRowsError=function(e,t,i,n){var o,s,r;this.m_fetchHeaderRequest&&((o=this.m_fetchHeaderRequest.range).start==t.start&&o.count==t.count&&(s=this.m_fetchHeaderRequest.callbacks,r=this.m_fetchHeaderRequest.callbackObjects,s.error&&(null==r&&(r={}),s.error.call(r.error,e))),this.m_fetchHeaderRequest=null),i.error&&(null==n&&(n={}),i.success.call(n.error,e))},i.FlattenedTreeDataGridDataSource.prototype._handleRowHeaderFetchSuccess=function(e,t,n,o){var s=new i.FlattenedTreeHeaderSet(t.start,t.start+t.count,this.m_columns,e,this.m_rowHeader);n.success&&(null==o&&(o={}),n.success.call(o.success,s,t,null))},i.FlattenedTreeDataGridDataSource.prototype.insertRows=function(e,t,n){var o,s,r,a,l,u;for(s=null,this.m_rowHeader&&(s=new i.FlattenedTreeHeaderSet(e,e+n.getCount(),this.m_columns,n,this.m_rowHeader)),o=new i.FlattenedTreeCellSet(e,e+n.getCount(),0,this.m_columns.length,n,this.m_columns),l=[],u=[],a=0;a<n.getCount();a++)l.push({row:this._getEntry(e+a).key}),u.push({row:e+a,column:-1});(r={}).source=this,r.operation="insert",r.result=o,s&&(r.header=s),r.keys=l,r.indexes=u,i.FlattenedTreeDataGridDataSource.superclass.handleEvent.call(this,"change",r)},i.FlattenedTreeDataGridDataSource.prototype.removeRows=function(e){var t,n,o,s;for(t=[],s=[],n=0;n<e.length;n++)t.push({row:e[n].key}),s.push({row:e[n].index,column:-1});(o={}).source=this,o.operation="delete",o.keys=t,o.indexes=s,i.FlattenedTreeDataGridDataSource.superclass.handleEvent.call(this,"change",o)},i.FlattenedTreeDataGridDataSource.prototype.handleMaxCountReached=function(e,t){var n=new i.EmptyNodeSet(null,e.start);t.success.call(null,n)},i.FlattenedTreeHeaderSet=function(e,t,n,o,s){i.Assert.assertArrayOrNull(n),this.m_start=e,this.m_end=t,this.m_headers=n,this.m_nodeSet=o,this.m_rowHeader=s},i.FlattenedTreeHeaderSet.prototype.getData=function(e,t){var n;return i.Assert.assert(e<=this.m_end&&e>=this.m_start,"index out of bounds"),i.Assert.assert(null==t||0==t,"level out of bounds"),null!=this.m_rowHeader&&null!=this.m_nodeSet?null!=(n=this.m_nodeSet.getData(e-this.m_start+this.m_nodeSet.getStart()))?n.get?n.get(this.m_rowHeader):n[this.m_rowHeader]:null:this.m_headers[e]},i.FlattenedTreeHeaderSet.prototype.getMetadata=function(e,t){return i.Assert.assert(e<=this.m_end&&e>=this.m_start,"index out of bounds"),i.Assert.assert(null==t||0==t,"level out of bounds"),null!=this.m_rowHeader&&null!=this.m_nodeSet?this.m_nodeSet.getMetadata(e-this.m_start+this.m_nodeSet.getStart()):{key:this.getData(e)}},i.FlattenedTreeHeaderSet.prototype.getCount=function(){return null!=this.m_rowHeader&&null!=this.m_nodeSet?Math.min(this.m_nodeSet.getCount(),this.m_end-this.m_start):Math.max(0,this.m_end-this.m_start)},i.FlattenedTreeHeaderSet.prototype.getLevelCount=function(){return this.getCount()>0?1:0},i.FlattenedTreeHeaderSet.prototype.getExtent=function(e,t){return i.Assert.assert(e<=this.m_end&&e>=this.m_start,"index out of bounds"),i.Assert.assert(null==t||0==t,"level out of bounds"),{extent:1,more:{before:!1,after:!1}}},i.FlattenedTreeHeaderSet.prototype.getDepth=function(e,t){return i.Assert.assert(e<=this.m_end&&e>=this.m_start,"index out of bounds"),i.Assert.assert(null==t||0==t,"level out of bounds"),1},i.FlattenedTreeHeaderSet.prototype.getLabel=function(){return null},i.FlattenedTreeTableDataSource=function(e,t){if(t=t||{},!(e instanceof i.FlattenedTreeDataSource)){var n=i.TableDataSource._LOGGER_MSG._ERR_DATA_INVALID_TYPE_SUMMARY,o=i.TableDataSource._LOGGER_MSG._ERR_DATA_INVALID_TYPE_DETAIL;throw new Error(n+"\n"+o)}this._data=e,this._eventHandlers=[],this._startIndex=0,this._nodeSetList=[],this._hasMore=!0,null==this._data.getOption("fetchSize")&&(this._data.getFetchSize=function(){return-1});var s=this;this._data.insertRows=function(e,t,n){var o,r,a,l,u,h=[],d=[],c=[];for(o=0;o<n.getCount();o++){for(a=n.getData(o),u=n.getMetadata(o).key,l=e+o,s._nodeSetList.splice(l,0,{}),s._nodeSetList[l].nodeSet=n,s._nodeSetList[l].startIndex=e,r=l+1;r<s._nodeSetList.length;r++)s._nodeSetList[r].startIndex=s._nodeSetList[r].startIndex+1;h.push(s._wrapWritableValue(a)),d.push(u),c.push(l),s._rows.data.splice(l,0,a),s._rows.keys.splice(l,0,u),s._rows.indexes.splice(l,0,l)}s._realignRowIndices(),s._hasMore=!0,i.TableDataSource.superclass.handleEvent.call(s,i.TableDataSource.EventType.ADD,{data:h,keys:d,indexes:c})},this._data.removeRows=function(e){var t,n,o,r=[],a=[],l=[];for(t=e.length-1;t>=0;t--){for(o=e[t].index,r.push(""),a.push(e[t].key),l.push(o),s._nodeSetList.splice(o,1),n=o;n<s._nodeSetList.length;n++)s._nodeSetList[n].startIndex=s._nodeSetList[n].startIndex-1;s._rows.data.splice(o,1),s._rows.keys.splice(o,1),s._rows.indexes.splice(o,1)}l=l.sort(function(e,t){return e-t}),s._realignRowIndices(),s._hasMore=!0,i.TableDataSource.superclass.handleEvent.call(s,i.TableDataSource.EventType.REMOVE,{data:r,keys:a,indexes:l})},this.Init(),(null==t||"enabled"!=t.startFetch&&null!=t.startFetch)&&null!=t||(this._startFetchEnabled=!0)},i.Object.createSubclass(i.FlattenedTreeTableDataSource,i.TableDataSource,"oj.FlattenedTreeTableDataSource"),i.FlattenedTreeTableDataSource.prototype.Init=function(){i.FlattenedTreeTableDataSource.superclass.Init.call(this)},i.FlattenedTreeTableDataSource.prototype.getCapability=function(e){return"full"},i.FlattenedTreeTableDataSource.prototype.getWrappedDataSource=function(){return this._data},i.FlattenedTreeTableDataSource.prototype.fetch=function(e){return"init"!=(e=e||{}).fetchType||this._startFetchEnabled?this._fetchInternal(e):Promise.resolve()},i.FlattenedTreeTableDataSource.prototype.at=function(e,t){var i;return i=e<0||e>=this._rows.data.length?null:{data:this._rows.data[e],index:e,key:this._rows.keys[e]},new Promise(function(e,t){e(i)})},i.FlattenedTreeTableDataSource.prototype.collapse=function(e){this._data.collapse(e)},i.FlattenedTreeTableDataSource.prototype.expand=function(e){this._data.expand(e)},i.FlattenedTreeTableDataSource.prototype.get=function(e,t){var i=this._data.getIndex(Object(e)),n=this._rows.data[i],o={data:this._wrapWritableValue(n),key:e,index:i};return Promise.resolve(o)},i.FlattenedTreeTableDataSource.prototype.on=function(e,t){"expand"==e||"collapse"==e?this._data.on(e,t):i.FlattenedTreeTableDataSource.superclass.on.call(this,e,t)},i.FlattenedTreeTableDataSource.prototype.off=function(e,t){"expand"==e||"collapse"==e?this._data.off(e,t):i.FlattenedTreeTableDataSource.superclass.off.call(this,e,t)},i.FlattenedTreeTableDataSource.prototype.sort=function(e){null==e?e=this.sortCriteria:this.sortCriteria=e;var t=this;return e.axis="column",new Promise(function(n,o){t._data.getWrappedDataSource().sort(e,{success:function(o){setTimeout(function(){t._data.refresh(),t._rows=null;var o={header:e.key,direction:e.direction};i.TableDataSource.superclass.handleEvent.call(t,i.TableDataSource.EventType.RESET,null),n(o)},0)}.bind(this),error:function(e){o(e)}.bind(this)})})},i.FlattenedTreeTableDataSource.prototype.totalSize=function(){return this._hasMore?-1:this._rows.data.length},i.FlattenedTreeTableDataSource.prototype.totalSizeConfidence=function(){return this._hasMore?"unknown":"actual"},i.FlattenedTreeTableDataSource.prototype._getMetadata=function(e){var t=this._nodeSetList[e].nodeSet.getStart();return this._nodeSetList[e].nodeSet.getMetadata(t+e-this._nodeSetList[e].startIndex)},i.FlattenedTreeTableDataSource.prototype._fetchInternal=function(e){e=e||{},this._startFetch(e),this._startIndex=null==e.startIndex?this._startIndex:e.startIndex;var t=Number.MAX_VALUE;this._pageSize=null==e.pageSize?this._pageSize:e.pageSize,null!=this._pageSize&&(t=this._pageSize);var n=this._startIndex;if(null!=this._rows)if(null!=this._pageSize){var o=this._rows.data.length-1;if(this._startIndex+this._pageSize-1<=o){o=i.FlattenedTreeTableDataSource._getEndIndex(this._rows,this._startIndex,this._pageSize);var s,r,a=[],l=[];for(s=this._startIndex;s<=o;s++)r=this._rows.keys[s],a[s-this._startIndex]=this._wrapWritableValue(this._rows.data[s]),l[s-this._startIndex]=r;var u={data:a,keys:l,startIndex:this._startIndex};return this._endFetch(e,u,null),Promise.resolve(u)}this._startIndex<=o&&(n=o+1)}else this._data.refresh(),this._rows=null;else n=0;var h={start:n,count:t},d=this;return new Promise(function(t,n){d._data.fetchRows(h,{success:function(n){d._handleFetchRowsSuccess(n),e.refresh=!0;var o,s,r=i.FlattenedTreeTableDataSource._getEndIndex(d._rows,d._startIndex,d._pageSize),a=[],l=[];for(o=d._startIndex;o<=r;o++)s=d._rows.keys[o],a[o-d._startIndex]=d._wrapWritableValue(d._rows.data[o]),l[o-d._startIndex]=s;a.length>0?null!=d._pageSize&&a.length<d._pageSize?d._hasMore=!1:d._hasMore=!0:d._hasMore=!1;var u={data:a,keys:l,startIndex:d._startIndex};d._endFetch(e,u,null),t(u)}.bind(this),error:function(t){d._endFetch(e,null,t),n(t)}.bind(this)})})},i.FlattenedTreeTableDataSource.prototype._handleFetchRowsSuccess=function(e){var t,n,o=e.getStart();for(t=0;t<e.getCount();t++)n=o+t,this._nodeSetList[n]={},this._nodeSetList[n].nodeSet=e,this._nodeSetList[n].startIndex=o;this._rows||(this._rows={},this._rows.data=[],this._rows.keys=[],this._rows.indexes=[]),i.FlattenedTreeTableDataSource._getRowArray(e,this,this._rows,o)},i.FlattenedTreeTableDataSource.prototype._startFetch=function(e){e.silent||i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.REQUEST,{startIndex:e.startIndex})},i.FlattenedTreeTableDataSource.prototype._endFetch=function(e,t,n){null!=n?i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.ERROR,n):e.silent||i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.SYNC,t)},i.FlattenedTreeTableDataSource._getEndIndex=function(e,t,i){var n=e.data.length-1;return i>0&&(n=(n=t+i-1)>e.data.length-1?e.data.length-1:n),n},i.FlattenedTreeTableDataSource._getRowArray=function(e,t,i,n){var o;for(o=0;o<e.getCount();o++){var s=e.getData(e.getStart()+o);i.data[n+o]=s,i.keys[n+o]=e.getMetadata(e.getStart()+o).key,i.indexes[n+o]=n+o}},i.FlattenedTreeTableDataSource.prototype._realignRowIndices=function(){for(var e=0;e<this._rows.data.length;e++)this._rows.indexes[e]=e},i.FlattenedTreeTableDataSource.prototype._wrapWritableValue=function(e){var t,n=$.extend(!0,{},e),o=Object.keys(e);for(t=0;t<o.length;t++)i.FlattenedTreeTableDataSource._defineProperty(n,e,o[t]);return n},i.FlattenedTreeTableDataSource._defineProperty=function(e,t,i){Object.defineProperty(e,i,{get:function(){return t[i]},set:function(e){t[i]=e},enumerable:!0})};var Et={properties:{direction:{type:"string",enumValues:["column","row"],value:"column"},labelEdge:{type:"string",enumValues:["start","top"],value:"top"},labelWidth:{type:"string",value:"33%"},labelWrapping:{type:"string",enumValues:["truncate","wrap"],value:"wrap"},maxColumns:{type:"number",value:1}},extension:{_CONSTRUCTOR:function(e){var t,n,o,s,r,a,l=this,u=e.element,h="-labelled-by",d="data-oj-formlayout-bonus-dom",c="["+d+"]",p=!0;function _(){n&&(n(),n=null)}function m(){t&&(t(),t=null)}function g(e){var t=null;return e instanceof Element&&"labelHint"in e&&(O(e),t=function(e){var t=document.createElement("oj-label");t.setAttribute(d,""),t.setAttribute("data-oj-internal",""),t.setAttribute("data-oj-binding-provider","none"),t.setAttribute("data-oj-context","");var i=document.createElement("span");return i.id=e.id+"|hint",i.textContent=e.labelHint,t.appendChild(i),function(e,t){"labelledBy"in t?(e.id=t.id+h,t.labelledBy=e.id):e.setAttribute("for",t.id)}(t,e),t}(e),e.parentElement.insertBefore(t,e),function(e,t){i.Context.getContext(t).getBusyContext().whenReady().then(function(){var i=e.helpHints;i&&(i.definition||i.source)&&(t.help=i),t.showRequired=e.required})}(e,t),function(e){e.addEventListener("labelHintChanged",f),e.addEventListener("helpHintsChanged",v),e.addEventListener("requiredChanged",C)}(e)),t}function f(e){var t=e.target,i=document.getElementById(t.id+"|hint");i&&(i.innerText=e.detail.value)}function v(e){var t=e.target,i=y(t);i&&(i.help=e.detail.value)}function C(e){var t=e.target,i=y(t);i&&(i.showRequired=e.detail.value)}function y(e){return"labelledBy"in e?document.getElementById(e.labelledBy):u.querySelector('oj-label[for="'+e.id+'"]')}function b(){var e,t,i=[],n=o.children.length,r="column"===u.direction,a=0,l=0;for(!function(e,t){var i=e.length;for(;i--;)t[i]=e[i]}(o.children,i);a<n;){if(e=i[a],-1===s.indexOf(e)){var h=e.tagName.toLowerCase();t=T(e,"oj-label"===h?i[++a]:null,r||l%u.maxColumns==0)}l++,a++}!function(e,t){var i=u.maxColumns,n=t%i;if("column"!=u.direction&&e&&n>0)for(var o=n;o<i;o++)E(e)}(t,l)}function S(){return"column"===u.direction?"100%":Math.floor(1e5/u.maxColumns)/1e3+"%"}function E(e){E(e,S())}function E(e,t){var i=D("oj-flex-item");i.style.webkitFlex="0 1 "+t,i.style.flex="0 1 "+t,i.style.maxWidth=t,i.style.width=t,e.appendChild(i)}function T(e,t,i){var n,o,s;n=i?D("oj-flex"):e.previousElementSibling;var l=t?function(){if(!a&&(a=r,"start"===u.labelEdge&&"row"===u.direction)){var e=u.labelWidth.match(/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/);switch(e[2]){case"vw":case"vmin":case"vmax":case"%":a=e[1]/u.maxColumns+e[2]}}return a}():S();return t||E(n,"0px"),o=D("oj-flex-item"),n.appendChild(o),e.parentElement.insertBefore(n,e),o.appendChild(e),o.style.flex="0 0 "+l,o.style.maxWidth=l,o.style.width=l,t&&(s=D("oj-flex-item"),n.appendChild(s),s.appendChild(t),s.style.webkitFlex="1 1 0",s.style.flex="1 1 0"),n}function D(e){var t=document.createElement("div");return t.setAttribute(d,""),t.setAttribute("data-oj-internal",""),t.classList.add(e),t}function A(e){for(var t=e,i=!0;t!==u;){if("OJ-FORM-LAYOUT"===t.tagName){i=!1;break}if(null==(t=t.parentElement)){i=!1;break}}return i}function I(e){for(;e.firstElementChild;)e.parentNode.insertBefore(e.firstElementChild,e);e.parentNode.removeChild(e)}function O(e){e.id||(e.id="oflId_"+Dt++)}l._rootElementMutationObserver=new MutationObserver(function(e){document.body.contains(u)?(!function(e){for(var t=e.length,i=0;i<t;i++){var n=e[i];if("attributes"===n.type&&"class"===n.attributeName){var o=s.indexOf(n.target);if(-1!==o&&n.target.classList.contains("oj-complete")){s.splice(o,1);var r=g(n.target);r&&T(r,n.target,n.target.hasAttribute("data-oj-needs-oj-flex-div"))}}}}(e),function(e){for(var t=e.length,i=0;i<t;i++){var n=e[i];if("childList"===n.type)for(var s=n.addedNodes.length,r=0;r<s;r++){var a=n.addedNodes[r];a.parentNode===u&&o.appendChild(a)}}}(e),function(e){for(var t=!0,i=e.length,n=0;n<i;n++){var o=e[n];if("childList"===o.type&&((s=o.target)===u||s&&"DIV"===s.tagName&&s.hasAttribute(d))&&A(o.target)){t=!1;break}}var s;return t}(e)||(!function(e){for(var t=e.length,i=0;i<t;i++){var n=e[i];if("childList"===n.type)for(var o=n.removedNodes.length,s=0;s<o;s++){var r=n.removedNodes[s];1===r.nodeType&&(r.removeEventListener("labelHintChanged",f),r.removeEventListener("helpHintsChanged",v),r.removeEventListener("requiredChanged",C))}}}(e),u.refresh())):this.disconnect()}),this.createDOM=function(){for(u.classList.add("oj-form-layout"),(o=document.createElement("div")).classList.add("oj-form"),o.setAttribute("data-oj-context",""),o.setAttribute("data-oj-internal",""),o.setAttribute(d,"");u.firstChild;)o.appendChild(u.firstChild);u.appendChild(o)},this.updateDOM=function(){!function(){if(!n){var e=i.Context.getContext(u).getBusyContext(),t={description:"The oj-form-layout component with id = '"+u.id+"' is being rendered."};n=e.addBusyState(t)}}(),s=[],a=null,r="start"===u.labelEdge?u.labelWidth:"100%";var e=i.Context.getContext(o).getBusyContext();e.whenReady().then(function(){!function(){if(!t){var e=i.Context.getContext(o).getBusyContext(),n={description:"The oj-form div for oj-form-layout component with id = '"+u.id+"' is being rendered."};t=e.addBusyState(n)}}(),l._rootElementMutationObserver.disconnect(),function(){var e=u.maxColumns;"start"===u.labelEdge?(o.classList.add("oj-form-cols-labels-inline"),o.classList.add("oj-formlayout-labels-inline"),o.classList.remove("oj-form-cols")):(o.classList.add("oj-form-cols"),o.classList.remove("oj-form-cols-labels-inline"),o.classList.remove("oj-formlayout-labels-inline"));"truncate"===u.labelWrapping?o.classList.add("oj-formlayout-labels-nowrap"):o.classList.remove("oj-formlayout-labels-nowrap");"row"===u.direction?(e=1,o.classList.add("oj-formlayout-form-across")):(e=u.maxColumns,o.classList.remove("oj-formlayout-form-across"));o.style.columnCount=e,o.style.webkitColumnCount=e,o.style.MozColumnCount=e}(),p||function(){for(var e=o.querySelectorAll(c),t=e.length,i=0;i<t;++i){var n=e[i];A(n)&&("OJ-LABEL"===n.tagName?n.parentElement.removeChild(n):I(n))}}(),function(){var e=o.firstElementChild,t=0,i="column"===u.direction;for(;e;){var n=e.tagName.toLowerCase();if(-1!==n.indexOf("-"))if("oj-label"===n){var r=e;if(!(e=e.nextElementSibling))throw O(u),O(r),m(),_(),new Error("oj-form-layout component with id='"+u.id+"' has an oj-label child element with id='"+r.id+"' but has no next sibling element that it is associated with.")}else"oj-label-value"===n?p||e.refresh():e.classList.contains("oj-complete")?g(e):((i||t%u.maxColumns==0)&&e.setAttribute("data-oj-needs-oj-flex-div",""),s.push(e));t++,e=e.nextElementSibling}}(),b(),l._rootElementMutationObserver.observe(u,{childList:!0,subtree:!0,attributes:!0}),m(),_(),p&&(p=!1)})}}}};Object.freeze(Et);var Tt,Dt=0;i.CustomElementBridge.registerMetadata("oj-form-layout",null,Et),i.CustomElementBridge.register("oj-form-layout",{metadata:i.CustomElementBridge.getMetadata("oj-form-layout")}),i.__registerWidget("oj.ojGantt",$.oj.dvtTimeComponent,{widgetEventPrefix:"oj",options:{axisPosition:"top",animationOnDataChange:"none",animationOnDisplay:"none",dependencies:null,dnd:{move:{tasks:"disabled"}},end:"",gridlines:{horizontal:"auto",vertical:"auto"},minorAxis:{converter:{default:null,seconds:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric",minute:"2-digit",second:"2-digit"}),minutes:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric",minute:"2-digit"}),hours:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric"}),days:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"numeric",day:"2-digit"}),weeks:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"numeric",day:"2-digit"}),months:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"long"}),quarters:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"long"}),years:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({year:"numeric"})},scale:null,zoomOrder:null},majorAxis:{converter:{default:null,seconds:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric",minute:"2-digit",second:"2-digit"}),minutes:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric",minute:"2-digit"}),hours:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric"}),days:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"numeric",day:"2-digit"}),weeks:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"numeric",day:"2-digit"}),months:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"long"}),quarters:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"long"}),years:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({year:"numeric"})},scale:null,zoomOrder:null},referenceObjects:[],rowAxis:{rendered:"off",maxWidth:"none",width:"max-content",label:{renderer:null}},rows:null,selection:[],selectionMode:"none",start:"",taskDefaults:{borderRadius:"0",labelPosition:["end","innerCenter","start","max"],height:null,svgClassName:"",svgStyle:{},type:"auto",progress:{borderRadius:"0",height:"100%",svgClassName:"",svgStyle:{}},baseline:{borderRadius:"0",height:null,svgClassName:"",svgStyle:{}}},tooltip:{renderer:null},valueFormats:{row:{tooltipLabel:void 0,tooltipDisplay:"auto"},start:{converter:null,tooltipLabel:void 0,tooltipDisplay:"auto"},end:{converter:null,tooltipLabel:void 0,tooltipDisplay:"auto"},date:{converter:null,tooltipLabel:void 0,tooltipDisplay:"auto"},label:{tooltipLabel:void 0,tooltipDisplay:"auto"},progress:{converter:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_NUMBER).createConverter({style:"percent"}),tooltipLabel:void 0,tooltipDisplay:"auto"},baselineStart:{converter:null,tooltipLabel:void 0,tooltipDisplay:"auto"},baselineEnd:{converter:null,tooltipLabel:void 0,tooltipDisplay:"auto"},baselineDate:{converter:null,tooltipLabel:void 0,tooltipDisplay:"auto"}},viewportEnd:"",viewportStart:"",viewportChange:null,move:null},_CreateDvtComponent:function(e,t,i){return e.styleClasses=this._getComponentStyleMap(),dvt.Gantt.newInstance(e,t,i)},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-gantt"),e},_getComponentStyleMap:function(){var e=new Object;return e.databody="oj-gantt-container",e.dependencyLine="oj-gantt-dependency-line",e.dependencyLineConnector="oj-gantt-dependency-line-connector",e.nodata="oj-gantt-no-data-message",e.hgridline="oj-gantt-horizontal-gridline",e.vgridline="oj-gantt-vertical-gridline",e.majorAxis="oj-gantt-major-axis",e.majorAxisTicks="oj-gantt-major-axis-separator",e.majorAxisLabels="oj-gantt-major-axis-label",e.minorAxis="oj-gantt-minor-axis",e.minorAxisTicks="oj-gantt-minor-axis-separator",e.minorAxisLabels="oj-gantt-minor-axis-label",e.row="oj-gantt-row",e.rowLabel="oj-gantt-row-label",e.task="oj-gantt-task",e.taskBar="oj-gantt-task-bar",e.taskMilestone="oj-gantt-task-milestone",e.taskSummary="oj-gantt-task-summary",e.taskDragImage="oj-gantt-task-drag-image",e.baseline="oj-gantt-baseline",e.baselineBar="oj-gantt-baseline-bar",e.baselineMilestone="oj-gantt-baseline-milestone",e.taskLabel="oj-gantt-task-label",e.taskProgress="oj-gantt-task-progress",e.tooltipLabel="oj-gantt-tooltip-label",e.tooltipValue="oj-gantt-tooltip-value",e.tooltipTable="oj-gantt-tooltip-content",e.referenceObject="oj-gantt-reference-object",e.selected="oj-selected",e.hover="oj-hover",e.focus="oj-focus",e.draggable="oj-draggable",e.activeDrop="oj-active-drop",e.invalidDrop="oj-invalid-drop",e},_IsDraggable:function(){return this.options.dnd&&this.options.dnd.move&&"enabled"===this.options.dnd.move.tasks},_ConvertLocatorToSubId:function(e){var t=e.subId;return"oj-gantt-taskbar"==t?t="taskbar["+e.rowIndex+"]["+e.index+"]":"oj-gantt-row-label"==t?t="rowLabel["+e.index+"]":"oj-gantt-tooltip"==t&&(t="tooltip"),t},_ConvertSubIdToLocator:function(e){var t={};if(0==e.indexOf("taskbar")){var i=this._GetIndexPath(e);t.subId="oj-gantt-taskbar",t.rowIndex=i[0],t.index=i[1]}else if(0==e.indexOf("rowLabel")){i=this._GetIndexPath(e);t.subId="oj-gantt-row-label",t.index=i[0]}else"tooltip"==e&&(t.subId="oj-gantt-tooltip");return t},_GetChildStyleClasses:function(){var e=this._super();return e["oj-gantt"]={path:"_resources/animationDuration",property:"ANIM_DUR"},e["oj-gantt-zoomin-icon"]=[{path:"_resources/zoomIn_bgc",property:"background-color"},{path:"_resources/zoomIn_bc",property:"border-color"}],e["oj-gantt-zoomin-icon oj-hover"]=[{path:"_resources/zoomIn_h_bgc",property:"background-color"},{path:"_resources/zoomIn_h_bc",property:"border-color"}],e["oj-gantt-zoomin-icon oj-active"]=[{path:"_resources/zoomIn_a_bgc",property:"background-color"},{path:"_resources/zoomIn_a_bc",property:"border-color"}],e["oj-gantt-zoomin-icon oj-disabled"]=[{path:"_resources/zoomIn_d_bgc",property:"background-color"},{path:"_resources/zoomIn_d_bc",property:"border-color"}],e["oj-gantt-zoomout-icon"]=[{path:"_resources/zoomOut_bgc",property:"background-color"},{path:"_resources/zoomOut_bc",property:"border-color"}],e["oj-gantt-zoomout-icon oj-hover"]=[{path:"_resources/zoomOut_h_bgc",property:"background-color"},{path:"_resources/zoomOut_h_bc",property:"border-color"}],e["oj-gantt-zoomout-icon oj-active"]=[{path:"_resources/zoomOut_a_bgc",property:"background-color"},{path:"_resources/zoomOut_a_bc",property:"border-color"}],e["oj-gantt-zoomout-icon oj-disabled"]=[{path:"_resources/zoomOut_d_bgc",property:"background-color"},{path:"_resources/zoomOut_d_bc",property:"border-color"}],e["oj-gantt-major-axis-label"]={path:"_resources/majorAxisLabelFontProp",property:"TEXT"},e["oj-gantt-minor-axis-label"]={path:"_resources/minorAxisLabelFontProp",property:"TEXT"},e["oj-gantt-container"]={path:"_resources/chartArea/strokeWidth",property:"stroke-width"},e["oj-gantt-horizontal-gridline"]={path:"_resources/horizontalGridlineWidth",property:"stroke-width"},e["oj-gantt-task-label"]={path:"_resources/taskLabelFontProp",property:"TEXT"},e["oj-gantt-row-label"]={path:"_resources/rowLabelFontProp",property:"TEXT"},e},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtUtilBundle.GANTT"]=e.componentName,t["DvtUtilBundle.ZOOM_IN"]=e.tooltipZoomIn,t["DvtUtilBundle.ZOOM_OUT"]=e.tooltipZoomOut,t},_LoadResources:function(){this._super();var e=this.options._resources;e.zoomIn="oj-gantt-zoomin-icon",e.zoomIn_h="oj-gantt-zoomin-icon oj-hover",e.zoomIn_a="oj-gantt-zoomin-icon oj-active",e.zoomIn_d="oj-gantt-zoomin-icon oj-disabled",e.zoomOut="oj-gantt-zoomout-icon",e.zoomOut_h="oj-gantt-zoomout-icon oj-hover",e.zoomOut_a="oj-gantt-zoomout-icon oj-active",e.zoomOut_d="oj-gantt-zoomout-icon oj-disabled";var t=i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_NUMBER);e.percentConverter=t.createConverter({style:"percent"})},_HandleEvent:function(e){var t=e.type;if("viewportChange"===t){var i=new Date(e.viewportStart).toISOString(),n=new Date(e.viewportEnd).toISOString(),o=e.majorAxisScale,s=e.minorAxisScale,r={viewportStart:i,viewportEnd:n,majorAxisScale:o,minorAxisScale:s};this._UserOptionChange("viewportStart",i),this._UserOptionChange("viewportEnd",n),this._UserOptionChange("majorAxis.scale",o),this._UserOptionChange("minorAxis.scale",s),this._trigger("viewportChange",null,r)}else if("move"===t){var a={taskContexts:e.taskContexts,value:e.value,start:e.start,end:e.end,baselineStart:e.baselineStart,baselineEnd:e.baselineEnd,rowContext:e.rowContext};this._trigger("move",null,a)}else this._super(e)},_GetComponentNoClonePaths:function(){var e=this._super();return e.start=!0,e.end=!0,e.viewportStart=!0,e.viewportEnd=!0,e.referenceObjects={value:!0},e},_GetComponentDeferredDataPaths:function(){return{root:["rows","dependencies"]}},getContextByNode:function(e){var t=this.getSubIdByNode(e);return t&&"oj-gantt-tooltip"!==t.subId?t:null}}),i.CustomElementBridge.registerMetadata("oj-gantt","dvtTimeComponent",{properties:{animationOnDataChange:{type:"string",enumValues:["auto","none"]},animationOnDisplay:{type:"string",enumValues:["auto","none"]},axisPosition:{type:"string",enumValues:["bottom","top"]},dependencies:{type:"Array<object>|Promise"},dnd:{type:"object",properties:{move:{type:"object",properties:{tasks:{type:"string",enumValues:["disabled","enabled"]}}}}},end:{type:"string"},gridlines:{type:"object",properties:{horizontal:{type:"string",enumValues:["hidden","visible","auto"]},vertical:{type:"string",enumValues:["hidden","visible","auto"]}}},majorAxis:{type:"object",properties:{converter:{type:"object",properties:{days:{},default:{},hours:{},minutes:{},months:{},quarters:{},seconds:{},weeks:{},years:{}}},scale:{type:"string",enumValues:["seconds","minutes","hours","days","weeks","months","quarters","years"]},zoomOrder:{type:"Array<string>"}}},minorAxis:{type:"object",properties:{converter:{type:"object",properties:{days:{},default:{},hours:{},minutes:{},months:{},quarters:{},seconds:{},weeks:{},years:{}}},scale:{type:"string",enumValues:["seconds","minutes","hours","days","weeks","months","quarters","years"]},zoomOrder:{type:"Array<string>"}}},referenceObjects:{type:"Array<object>"},rowAxis:{type:"object",properties:{label:{type:"object",properties:{renderer:{}}},maxWidth:{type:"string"},width:{type:"string"},rendered:{type:"string",enumValues:["on","off"]}}},rows:{type:"Array<object>|Promise"},selection:{type:"Array<string>",writeback:!0},selectionMode:{type:"string",enumValues:["single","multiple","none"]},start:{type:"string"},taskDefaults:{type:"object",properties:{borderRadius:{type:"string"},height:{type:"number"},labelPosition:{type:"Array<string>|string",enumValues:["start","innerCenter","innerStart","innerEnd","none","end"]},svgClassName:{type:"string"},svgStyle:{type:"object"},progress:{type:"object",properties:{borderRadius:{type:"string"},height:{type:"number"},svgClassName:{type:"string"},svgStyle:{type:"object"}}},baseline:{type:"object",properties:{borderRadius:{type:"string"},height:{type:"number"},svgClassName:{type:"string"},svgStyle:{type:"object"}}},type:{type:"string",enumValues:["normal","milestone","summary","auto"]}}},tooltip:{type:"object",properties:{renderer:{}}},translations:{type:"Object",properties:{accessibleDependencyInfo:{type:"string",value:"Dependency type {0}, connects {1} to {2}"},accessiblePredecessorInfo:{type:"string",value:"{0} predecessors"},accessibleSuccessorInfo:{type:"string",value:"{0} successors"},accessibleTaskTypeMilestone:{type:"string",value:"Milestone"},accessibleTaskTypeSummary:{type:"string",value:"Summary"},componentName:{type:"string",value:"Gantt"},finishFinishDependencyAriaDesc:{type:"string",value:"finish to finish"},finishStartDependencyAriaDesc:{type:"string",value:"finish to start"},labelAndValue:{type:"string",value:"{0}: {1}"},labelBaselineDate:{type:"string",value:"Baseline Date"},labelBaselineEnd:{type:"string",value:"Baseline End"},labelBaselineStart:{type:"string",value:"Baseline Start"},labelClearSelection:{type:"string",value:"Clear Selection"},labelCountWithTotal:{type:"string",value:"{0} of {1}"},labelDataVisualization:{type:"string",value:"Data Visualization"},labelDate:{type:"string",value:"Date"},labelEnd:{type:"string",value:"End"},labelInvalidData:{type:"string",value:"Invalid data"},labelLabel:{type:"string",value:"Label"},labelNoData:{type:"string",value:"No data to display"},labelProgress:{type:"string",value:"Progress"},labelRow:{type:"string",value:"Row"},labelStart:{type:"string",value:"Start"},startFinishDependencyAriaDesc:{type:"string",value:"start to finish"},startStartDependencyAriaDesc:{type:"string",value:"start to start"},stateCollapsed:{type:"string",value:"Collapsed"},stateDrillable:{type:"string",value:"Drillable"},stateExpanded:{type:"string",value:"Expanded"},stateHidden:{type:"string",value:"Hidden"},stateIsolated:{type:"string",value:"Isolated"},stateMaximized:{type:"string",value:"Maximized"},stateMinimized:{type:"string",value:"Minimized"},stateSelected:{type:"string",value:"Selected"},stateUnselected:{type:"string",value:"Unselected"},stateVisible:{type:"string",value:"Visible"},tooltipZoomIn:{type:"string",value:"Zoom In"},tooltipZoomOut:{type:"string",value:"Zoom Out"}}},valueFormats:{type:"object",properties:{row:{type:"object",properties:{tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},start:{type:"object",properties:{converter:{},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},end:{type:"object",properties:{converter:{},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},date:{type:"object",properties:{converter:{},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},label:{type:"object",properties:{tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},progress:{type:"object",properties:{converter:{},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},baselineStart:{type:"object",properties:{converter:{},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},baselineEnd:{type:"object",properties:{converter:{},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},baselineDate:{type:"object",properties:{converter:{},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}}}},viewportEnd:{type:"string"},viewportStart:{type:"string"}},methods:{getContextByNode:{}},events:{move:{},viewportChange:{}},extension:{_WIDGET_NAME:"ojGantt"}}),i.CustomElementBridge.register("oj-gantt",{metadata:i.CustomElementBridge.getMetadata("oj-gantt")}),i.IndexerModelTreeDataSource=function(e,t,i,n){this.data=e,this.idAttr=t,this.listener=i,this.options=n,this.Init()},i.Object.createSubclass(i.IndexerModelTreeDataSource,i.TreeDataSource,"oj.IndexerModelTreeDataSource"),i.IndexerModelTreeDataSource.prototype.Init=function(){var e,t,n,o,s,r,a,l,u,h,d,c,p,_,m;for(i.IndexerModelTreeDataSource.superclass.Init.call(this),null==(e=this.options.sections)&&(t=i.Translations.getTranslatedString("oj-ojIndexer.indexerCharacters"),e=t.split("|")),e.push(i.IndexerModel.SECTION_OTHERS),null==(n=this.options.groupingStrategy)&&(o=this.options.groupingAttribute,n=function(t){return s=t[o]?t[o]:t,r=s.toString().toUpperCase()[0],e.indexOf(r)>-1?r:i.IndexerModel.SECTION_OTHERS}),a=this.options.sortComparatorFunction,this.data=this.data.sort(function(t,i){return l=n(t),u=n(i),h=e.indexOf(l),d=e.indexOf(u),0==(c=h-d)&&a?a(t,i):c}),_=0;_<this.data.length;_++)p!=(m=n(this.data[_]))&&(p=m,this._set(m,_));this.sections=e},i.IndexerModelTreeDataSource.prototype._set=function(e,t){null==this.pos&&(this.pos=[]),this.pos.push({key:e,value:t})},i.IndexerModelTreeDataSource.prototype._get=function(e){var t;for(t=0;t<this.pos.length;t++)if(this.pos[t].key==e)return this.pos[t].value;return null},i.IndexerModelTreeDataSource.prototype.getIndexableSections=function(){return this.sections.slice(0,this.sections.length-1)},i.IndexerModelTreeDataSource.prototype.getMissingSections=function(){var e,t,i;if(null==this.missing){for(e=[],t=0;t<this.sections.length-1;t++)i=this.sections[t],null==this._get(i)&&e.push(i);this.missing=e}return this.missing},i.IndexerModelTreeDataSource.prototype.setSection=function(e){return this.listener.call(this,e)},i.IndexerModelTreeDataSource.prototype.getChildCount=function(e){var t,n,o,s,r;if(null==e)return t=this.sections.length-this.getMissingSections().length,null!=this._get(i.IndexerModel.SECTION_OTHERS)?t:t-1;if(null!=(n=this._get(e))){if((o=this.sections.indexOf(e))==this.sections.length-1)return this.data.length-n;for(o++,s=this.sections[o],r=this._get(s);null==r&&o<this.sections.length;)o++,s=this.sections[o],r=this._get(s);return(isNaN(r)||null==r)&&(r=this.data.length),r-n}return 0},i.IndexerModelTreeDataSource.prototype.fetchChildren=function(e,t,i,n){var o,s,r=this;null==e?(o=this.sections.filter(function(e){return null!=r._get(e)}),s={getParent:function(){return e},getStart:function(){return 0},getCount:function(){return o.length},getData:function(e){return o[e]},getMetadata:function(e){return{key:o[e],leaf:!1,depth:0}}}):s={getParent:function(){return e},getStart:function(){return 0},getCount:function(){return r.getChildCount(e)},getData:function(t){return r.data[r._get(e)+t]},getMetadata:function(t){var i=r.data[r._get(e)+t];return{key:null!=r.idAttr?i[r.idAttr]:i,leaf:!0,depth:1}}},null!=i&&null!=i.success&&i.success.call(null,s)},i.__registerWidget("oj.ojInputNumber",$.oj.editableValue,{version:"1.0.0",defaultElement:"<input>",widgetEventPrefix:"oj",_ALLOWED_TYPES:["number","text"],options:{autocomplete:void 0,autofocus:!1,converter:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_NUMBER).createConverter(),max:null,min:null,name:"",placeholder:"",rawValue:void 0,readOnly:!1,required:!1,step:1,validators:void 0,value:null,virtualKeyboard:"auto"},getNodeBySubId:function(e){var t,i=this._superApply(arguments);return i||("oj-inputnumber-up"===(t=e.subId)&&(i=this.widget().find(".oj-inputnumber-up")[0]),"oj-inputnumber-down"===t&&(i=this.widget().find(".oj-inputnumber-down")[0]),"oj-inputnumber-input"===t&&(i=this.widget().find(".oj-inputnumber-input")[0])),i||null},getSubIdByNode:function(e){var t=null;return null!=e&&(e===this.widget().find(".oj-inputnumber-up")[0]?t={subId:"oj-inputnumber-up"}:e===this.widget().find(".oj-inputnumber-down")[0]?t={subId:"oj-inputnumber-down"}:e===this.widget().find(".oj-inputnumber-input")[0]&&(t={subId:"oj-inputnumber-input"})),t||this._superApply(arguments)},refresh:function(){this._super(),this._setup()},stepDown:function(e){this._step(e,!1)},stepUp:function(e){this._step(e,!0)},widget:function(){return this.uiInputNumber},_InitOptions:function(e,t){var n=this.options,o=this;if(this._superApply(arguments),this._IsCustomElement()||i.EditableValueUtils.initializeOptionsFromDom([{attribute:"disabled",validateOption:!0},{attribute:"placeholder"},{attribute:"value"},{attribute:"readonly",option:"readOnly",validateOption:!0},{attribute:"required",coerceDomValue:!0,validateOption:!0},{attribute:"title"},{attribute:"min"},{attribute:"max"},{attribute:"step"}],t,this,function(e){for(var t=["value","step","min","max"],i=0;i<t.length;i++){var s=t[i],r=s in e?e[s]:n[s];null!=r&&(e[s]="step"===s?o._parseStep(r):o._parse(s,r))}}),this._IsCustomElement()){var s=n.step;null!=s&&o._parseStep(s)}if(void 0===n.value)throw new Error("ojInputNumber has no value");if(this.initialValue=n.value,null!=n.min&&null!=n.max&&n.max<n.min)throw new Error("ojInputNumber's max must not be less than min")},_ComponentCreate:function(){this._super(),this._draw(),this._inputNumberDefaultValidators={},this._setup(),this._on(this._events),this._focusable(this.uiInputNumber)},_AfterSetOption:function(e,t,n){switch(this._superApply(arguments),e){case"min":case"max":this._Refresh(e,this.options[e]);break;case"readOnly":this._AfterSetOptionDisabledReadOnly(e,i.EditableValueUtils.readOnlyOptionOptions);break;case"required":this._AfterSetOptionRequired(e);break;case"validators":this._AfterSetOptionValidators(e);break;case"converter":this._AfterSetOptionConverter(e);break;case"virtualKeyboard":this._SetInputType(this._ALLOWED_TYPES)}},_CanSetValue:function(){return!!this._super()&&!this.options.readOnly},_AfterSetOptionValue:function(e,t){this._superApply(arguments);var i,n,o=t?t._context:null;o&&(i=!!o.originalEvent,n=o.doNotClearMessages||!1),i||n||(this.initialValue=this.options.value)},_IsRequired:function(){return this.options.required},_AfterSetOptionRequired:i.EditableValueUtils._AfterSetOptionRequired,_AfterSetOptionValidators:i.EditableValueUtils._AfterSetOptionValidators,_AfterSetOptionConverter:i.EditableValueUtils._AfterSetOptionConverter,_ResetConverter:i.EditableValueUtils._ResetConverter,_GetConverter:function(){return this.options.converter?this._getConverter():$.oj.ojInputNumber.prototype.options.converter},_GetNormalizedValidatorsFromOption:i.EditableValueUtils._GetNormalizedValidatorsFromOption,_AriaRequiredUnsupported:function(){return!1},_setOption:function(e,t,i){var n;n=this._IsCustomElement()||"value"!==e&&"max"!==e&&"min"!==e?"step"===e?this._parseStep(t):t:this._parse(e,t),this._super(e,n,i),"max"!==e&&"min"!==e||(this._createRangeValidator(),this._AfterSetOptionValidators()),"disabled"===e&&this.element.prop("disabled",!!t),"readOnly"===e&&(this.element.prop("readonly",!!t),this._refreshStateTheming("readOnly",this.options.readOnly),this._refreshRoleSpinbutton("readOnly",this.options.readOnly))},_destroy:function(){var e=this._super();return this.buttonSet.ojButtonset("destroy"),this.buttonSet.remove(),this.upButton=null,this.downButton=null,this.buttonSet=null,this.initialValue=null,i.DomUtils.unwrap(this.element,this.uiInputNumber),clearTimeout(this.timer),e},validate:i.EditableValueUtils.validate,_Refresh:function(e,t,i){var n;switch(this._superApply(arguments),e){case"disabled":case"max":case"min":case"value":n=this._getConvertedDisplayValue(),this._updateButtons(n);case"max":case"min":case"value":this._refreshAriaMinMaxValue(n);break;case"converter":n=this._getConvertedDisplayValue(),this._refreshAriaText(n);break;case"required":this._refreshRequired(t)}},_refreshRequired:i.EditableValueUtils._refreshRequired,_GetImplicitValidators:function(){var e=this._superApply(arguments);return null==this.options.min&&null==this.options.max||this._createRangeValidator(),$.extend(this._inputNumberDefaultValidators,e)},_GetDefaultStyleClass:function(){return"oj-inputnumber"},_events:{input:function(e){this._SetRawValue(this.element.val(),e)},keydown:function(e){var t=$.ui.keyCode;e.keyCode===t.ENTER?(this._blurEnterSetValue(e),e.preventDefault()):this._start()&&this._keydown(e)&&e.preventDefault()},keyup:function(e){this._stop(e)},blur:function(e){this._blurEnterSetValue(e)},"touchstart .oj-inputnumber-button.oj-enabled":function(e){this._start(),this._repeat(null,$(e.currentTarget).hasClass("oj-inputnumber-up")?1:-1,e)},"touchend .oj-inputnumber-button":function(e){this._stop(e)},"touchcancel .oj-inputnumber-button":function(e){this._stop(e)},"mousedown .oj-inputnumber-button.oj-enabled":function(e){this._isRealMouseEvent(e)&&(this._start(),this._repeat(null,$(e.currentTarget).hasClass("oj-inputnumber-up")?1:-1,e))},"mouseup .oj-inputnumber-button":function(e){this._isRealMouseEvent(e)&&this._stop(e)},"mouseenter .oj-inputnumber-button.oj-enabled":function(e){$(e.currentTarget).hasClass("oj-active")&&this._isRealMouseEvent(e)&&(this._start(),this._repeat(null,$(e.currentTarget).hasClass("oj-inputnumber-up")?1:-1,e))},"mouseleave .oj-inputnumber-button":function(e){this._isRealMouseEvent(e)&&this._stop(e)}},_BUNDLE_KEY:{_TOOLTIP_DECREMENT:"tooltipDecrement",_TOOLTIP_INCREMENT:"tooltipIncrement"},_OPTION_TO_CSS_MAPPING:{readOnly:"oj-read-only"},_setup:function(){var e=this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_INCREMENT),t=this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_DECREMENT),i=this._getConvertedDisplayValue();this.upButton.ojButton({label:e}),this.downButton.ojButton({label:t}),this._refreshAriaMinMaxValue(i),this._updateButtons(i),"boolean"==typeof this.options.readOnly&&this.element.prop("readonly",this.options.readOnly),this._refreshStateTheming("readOnly",this.options.readOnly),this._refreshRoleSpinbutton("readOnly",this.options.readOnly),this._refreshRequired(this.options.required)},_markInternalComponents:function(){this.upButton.attr("data-oj-internal",""),this.downButton.attr("data-oj-internal",""),this.buttonSet.attr("data-oj-internal","")},_createOjButtonset:function(){var e=this.uiInputNumber.find(".oj-inputnumber-up"),t=this.uiInputNumber.find(".oj-inputnumber-down"),i=e[0].parentNode;this.upButton=e.ojButton({display:"icons",icons:{start:"oj-component-icon oj-inputnumber-up-icon"}}),this.downButton=t.ojButton({display:"icons",icons:{start:"oj-component-icon oj-inputnumber-down-icon"}}),this.buttonSet=$(i).ojButtonset({focusManagement:"none"}),this._markInternalComponents()},_draw:function(){var e,t=this.element;this.uiInputNumber=t.addClass("oj-inputnumber-input").wrap(this._uiInputNumberHtml()).parent().append(this._buttonHtml()),this.OuterWrapper?(this.uiInputNumber=$(this.OuterWrapper).append(this.uiInputNumber),this.uiInputNumber.addClass("oj-inputnumber oj-component")):this.uiInputNumber=this.uiInputNumber.wrap("<div class='oj-inputnumber oj-component'></div>").parent(),this._IsCustomElement()&&(e=this.widget().attr("id"))&&i.EditableValueUtils.setSubIdForCustomLabelFor(this._GetContentElement()[0],e),this.saveType=t.prop("type"),this._SetInputType(this._ALLOWED_TYPES),this.uiInputNumber.find(".oj-inputnumber-button").attr("tabIndex","-1"),this._createOjButtonset()},_keydown:function(e){var t=$.ui.keyCode;switch(e.keyCode){case t.UP:return this._repeat(null,1,e),!0;case t.DOWN:return this._repeat(null,-1,e),!0}return!1},_uiInputNumberHtml:function(){return"<span class='oj-inputnumber-wrapper'></span>"},_buttonHtml:function(){return"<div class='oj-buttonset-width-auto'><button type='button' class='oj-inputnumber-button oj-inputnumber-down'></button><button type='button' class='oj-inputnumber-button oj-inputnumber-up'></button></div>"},_start:function(){return this.spinning=!0,!0},_repeat:function(e,t,i){var n=!1;t>0?this.upButton.hasClass("oj-disabled")&&(n=!0):this.downButton.hasClass("oj-disabled")&&(n=!0),e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){n||this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this._getConvertedDisplayValue(),n=this.options,o=n.min,s=n.max,r=n.step,a=this.initialValue,l=this._precision(o,r,a);i=this._adjustValue(i,e,o,s,r,l,a),this._CanSetValue()&&(this.element.val(i),this._refreshAriaMinMaxValue(i),this._updateButtons(i),this._SetRawValue(this.element.val(),t)),this._SetValue(i,t,{validationMode:this._VALIDATION_MODE.VALIDATORS_ONLY})},_precision:function(e,t,i){var n=this._precisionOf(t);return null!=e&&(n=Math.max(n,this._precisionOf(e))),null!=i&&(n=Math.max(n,this._precisionOf(i))),n},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e,t,n,o,s,r,a){var l,u,h;if(r>0)return this._adjustValueForFractions(e,t,n,o,s,r,a);null==(u=null!=n?n:a)&&(u=0);try{e=parseFloat(e.toFixed(r))}catch(t){t instanceof TypeError&&(i.Logger.warn("inputNumber's value after conversion is not a number. \n                      The converter must convert the value to a Number. coercing using +"),e=+e)}h=e-u;var d=Math.round(h/s)*s;if(l=(d=parseFloat(d.toFixed(r)))===h?e+t:u+(h=t<0?Math.ceil(h/s)*s:Math.floor(h/s)*s)+t,l=parseFloat(l.toFixed(r)),null!=n&&l<n)return n;if(null!=o&&l>o){var c=Math.floor((o-u)/s)*s+u;return c=parseFloat(c.toFixed(r))}return l},_adjustValueForFractions:function(e,t,n,o,s,r,a){i.Assert.assert(r>0);var l=Math.pow(10,r),u=null!=n?Math.round(n*l):n,h=null!=o?Math.round(o*l):o,d=null!=s?Math.round(s*l):s;return this._adjustValue(Math.round(e*l),Math.round(t*l),u,h,d,0,Math.round(a*l))/l},_stop:function(e){this.spinning&&(clearTimeout(this.timer),this.spinning=!1)},_isRealMouseEvent:function(e){return!i.DomUtils.recentTouchEnd()},_updateButtons:function(e){var t,i,n=this.options,o=n.max,s=n.min,r=this.downButton,a=this.upButton,l=null!=o,u=null!=s;this.uiInputNumber&&(r||a)&&(t=r.hasClass("oj-disabled"),i=a.hasClass("oj-disabled"),n.disabled||void 0===e||l&&u&&o===s&&e===o?(t||r.ojButton("disable"),i||a.ojButton("disable")):l&&e>=o?(t&&r.ojButton("enable"),i||a.ojButton("disable")):u&&e<=s?(t||r.ojButton("disable"),i&&a.ojButton("enable")):(t&&r.ojButton("enable"),i&&a.ojButton("enable")))},_getConverter:i.EditableValueUtils._GetConverter,_getConvertedDisplayValue:function(){var e,t;try{t=this._GetDisplayValue()||0,e=this._parseValue(t)}catch(t){e=void 0}return e},_blurEnterSetValue:function(e){var t,i=this.element.val();this._stop(),t=this._getConvertedDisplayValue(),this._refreshAriaMinMaxValue(t),this._updateButtons(t),this._SetValue(i,e)},_createRangeValidator:function(){var e,t,n,o,s,r,a,l,u,h,d=this.options,c=d.min,p=d.max,_=null!=c?c:void 0,m=null!=p?p:void 0,g=d.translations,f=g&&g.numberRange||{},v=f.hint||{},C=f.messageDetail||{},y=f.messageSummary||{};null!==v&&(e=v.min||null,t=v.max||null,n=v.inRange||null,o=v.exact||null),null!==C&&(s=C.rangeOverflow||null,r=C.rangeUnderflow||null,a=C.exact||null),null!==y&&(l=y.rangeOverflow||null,u=y.rangeUnderflow||null),h={min:_,max:m,hint:{min:e||null,max:t||null,inRange:n||null,exact:o||null},messageDetail:{rangeOverflow:s||null,rangeUnderflow:r||null,exact:a||null},messageSummary:{rangeOverflow:l||null,rangeUnderflow:u||null},converter:this._GetConverter()},this._inputNumberDefaultValidators[i.ValidatorFactory.VALIDATOR_TYPE_NUMBERRANGE]=i.Validation.validatorFactory(i.ValidatorFactory.VALIDATOR_TYPE_NUMBERRANGE).createValidator(h)},_parse:function(e,t){var i;if(i=null!==t?+t:t,isNaN(i))throw new Error("ojInputNumber's "+e+" option is not a number");return i},_parseStep:function(e){var t;if(null===e)return 1;if((t=this._parse("step",e))<=0)throw new Error("Invalid step for ojInputNumber; step must be > 0");return(null===t||t<=0)&&(t=1),t},_refreshStateTheming:function(e,t){-1!=Object.keys(this._OPTION_TO_CSS_MAPPING).indexOf(e)&&this.widget().toggleClass(this._OPTION_TO_CSS_MAPPING[e],!!t)},_refreshRoleSpinbutton:function(e,t){(t=!!t)?this.element.removeAttr("role"):this.element.attr("role","spinbutton")},_refreshAriaMinMaxValue:function(e){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":e}),this._refreshAriaText(e)},_refreshAriaText:function(e){var t=this.element,i=t.val();this._CompareOptionValues("value",""+e,i)||t.attr({"aria-valuetext":i})},_step:function(e,t){this._start(),t?this._spin((e||1)*this.options.step):this._spin((e||1)*-this.options.step),this._stop()},_SetInputType:i.EditableValueUtils._SetInputType,_ValidateReturnBoolean:i.EditableValueUtils._ValidateReturnBoolean}),i.CustomElementBridge.registerMetadata("oj-input-number","editableValue",{properties:{autocomplete:{type:"string",extension:{_COPY_TO_INNER_ELEM:!0}},autofocus:{type:"boolean",extension:{_COPY_TO_INNER_ELEM:!0}},converter:{type:"Object"},max:{type:"number"},min:{type:"number"},name:{type:"string",extension:{_COPY_TO_INNER_ELEM:!0}},placeholder:{type:"string"},rawValue:{type:"string",writeback:!0,readOnly:!0},readonly:{type:"boolean"},required:{type:"boolean"},step:{type:"number"},translations:{type:"Object",properties:{numberRange:{type:"Object",properties:{hint:{type:"Object",properties:{exact:{type:"string"},inRange:{type:"string"},max:{type:"string"},min:{type:"string"}}},messageDetail:{type:"Object",properties:{exact:{type:"string"},rangeOverflow:{type:"string"},rangeUnderflow:{type:"string"}}},messageSummary:{type:"Object",properties:{rangeOverflow:{type:"string"},rangeUnderflow:{type:"string"}}}}},required:{type:"Object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}},tooltipDecrement:{type:"string",value:"Decrement"},tooltipIncrement:{type:"string",value:"Increment"}}},validators:{type:"Array"},value:{type:"number",writeback:!0},virtualKeyboard:{type:"string",enumValues:["auto","number","text"]}},methods:{stepDown:{},stepUp:{},validate:{}},extension:{_ALIASED_PROPS:{readonly:"readOnly"},_INNER_ELEM:"input",_WIDGET_NAME:"ojInputNumber",_GLOBAL_TRANSFER_ATTRS:["accesskey","aria-label","tabindex"]}}),i.CustomElementBridge.register("oj-input-number",{metadata:i.CustomElementBridge.getMetadata("oj-input-number")}),Hammer?($.fn.ojHammer=function(e){switch(e){case"instance":return this.data("ojHammer");case"destroy":return this.each(function(){var e=$(this),t=e.data("ojHammer");t&&(t.destroy(),e.removeData("ojHammer"))});default:return this.each(function(){var t=$(this);t.data("ojHammer")||t.data("ojHammer",new Hammer.Manager(t[0],e))})}},Hammer.Manager.prototype.emit=(Tt=Hammer.Manager.prototype.emit,function(e,t){Tt.call(this,e,t),$(this.element).trigger({type:e,gesture:t})})):i.Logger.warn("Hammer jQuery extension loaded without Hammer."),i.JsonDiagramDataSource=function(e,t){this.childDataCallback=t?t.childData:null,this._nodesMapById={},i.JsonDiagramDataSource.superclass.constructor.call(this,e)},i.Object.createSubclass(i.JsonDiagramDataSource,i.DiagramDataSource,"oj.JsonDiagramDataSource"),i.JsonDiagramDataSource.prototype.getData=function(e){if(e)return void 0===(t=e.nodes)&&this.childDataCallback?(t=this.childDataCallback(e),this._updateLocalData(this._nodesMapById[e.id],t),t):(this._updateNodesMap({nodes:t}),Promise.resolve({nodes:t}));if(this.data)return this._updateNodesMap(this.data),Promise.resolve(this.data);if(this.childDataCallback){var t=this.childDataCallback();return this._updateLocalData(null,t),t}return Promise.resolve(null)},i.JsonDiagramDataSource.prototype._updateNodesMap=function(e){if(this.childDataCallback&&e.nodes)for(var t=e.nodes,i=0;i<t.length;i++)this._nodesMapById[t[i].id]=t[i]},i.JsonDiagramDataSource.prototype._updateLocalData=function(e,t){if(t instanceof Promise){var i=this;t.then(function(t){e||i.data||(i.data={}),Array.isArray(t.nodes)&&(e?e.nodes=t.nodes:i.data.nodes=t.nodes,i._updateNodesMap(t)),Array.isArray(t.links)&&(i.data.links=Array.isArray(i.data.links)?i.data.links.concat(t.links):t.links),i.handleEvent("ADD",{data:t,parentId:e?e.id:null,index:0})},function(e){})}},i.JsonDiagramDataSource.prototype.getChildCount=function(e){if(e){var t=e.nodes;return Array.isArray(t)?t.length:void 0===t&&this.childDataCallback?-1:0}return-1},i.JsonDiagramDataSource.prototype.getDescendantsConnectivity=function(e){return"unknown"},i.JsonNodeSet=function(e,t,n,o,s){i.Assert.assertNumber(e,null),i.Assert.assertNumber(t,null),this.m_depth=s,this.m_key=o,this.m_startNode=e,this.m_endNode=t,this.m_nodes=n},i.JsonNodeSet.prototype.getParent=function(){return this.m_key},i.JsonNodeSet.prototype.getStart=function(){return this.m_startNode},i.JsonNodeSet.prototype.getCount=function(){return Math.max(0,this.m_endNode-this.m_startNode)},i.JsonNodeSet.prototype.getData=function(e){return i.Assert.assert(e<=this.m_endNode&&e>=this.m_startNode),e-=this.m_startNode,this.m_nodes[e]?this.m_nodes[e].attr:null},i.JsonNodeSet.prototype.getMetadata=function(e){var t={leaf:!1,depth:-1};return i.Assert.assert(e<=this.m_endNode&&e>=this.m_startNode),e-=this.m_startNode,t.key=this.m_nodes[e].id?this.m_nodes[e].id:this.m_nodes[e].attr.id,t.leaf=this.m_nodes[e].leaf,t.depth=this.m_nodes[e].depth,null==t.leaf&&(this.m_nodes[e].children&&this.m_nodes[e].children.length>0?t.leaf=!1:t.leaf=!0),t},i.JsonNodeSet.prototype._updateDepth=function(e,t){var i;if(t++,e.depth=t,e.children&&0!=e.children.length)for(i=0;i<e.children.length;i++)this._updateDepth(e.children[i],t)},i.JsonNodeSet.prototype.getChildNodeSet=function(e){var t,n,o,s;if(i.Assert.assert(e<=this.m_endNode&&e>=this.m_startNode),e-=this.m_startNode,o=this.m_nodes[e].depth,null==(t=this.m_nodes[e].children)||0==t.length)return null;for(n=this.m_nodes[e].id?this.m_nodes[e].id:this.m_nodes[e].attr.id,s=0;s<t.length;s++)this._updateDepth(t[s],o);return new i.JsonNodeSet(0,t.length,t,n,0)},i._JsonTreeNodeDataSource=function(){this.id=null,this.depth=0,this.parent=null,this.children=null,this.title=null,this.attr=null,this.leaf=null},i._JsonTreeNodeDataSource.prototype._ascending=function(e){return function(t,i){return null!=t.attr&&null!=i.attr&&null!=t.attr[e]&&null!=i.attr[e]?t.attr[e]<i.attr[e]?-1:t.attr[e]===i.attr[e]?0:1:t[e]<i[e]?-1:t[e]===i[e]?0:1}},i._JsonTreeNodeDataSource.prototype._descending=function(e){return function(t,i){return null!=t.attr&&null!=i.attr&&null!=t.attr[e]&&null!=i.attr[e]?t.attr[e]<i.attr[e]?1:t.attr[e]===i.attr[e]?0:-1:t[e]<i[e]?1:t[e]===i[e]?0:-1}},i._JsonTreeNodeDataSource.prototype._sortRecursive=function(e){var t=e.key;if(null==this.children)return this;"ascending"===e.direction?this.children.sort(this._ascending(t)):"descending"===e.direction&&this.children.sort(this._descending(t));for(var i=0,n=this.children.length;i<n;i++)this.children[i]._sortRecursive(e);return this},i.JsonTreeDataSource=function(e){var t;t=new i._JsonTreeNodeDataSource,null==e.id&&(t.id="root"),this.data=this._createTreeDataSource({count:0},t,e),i.JsonTreeDataSource.superclass.constructor.call(this,t)},i.Object.createSubclass(i.JsonTreeDataSource,i.TreeDataSource,"oj.JsonTreeDataSource"),i.JsonTreeDataSource.prototype.Init=function(){i.JsonTreeDataSource.superclass.Init.call(this)},i.JsonTreeDataSource.prototype._createTreeDataSource=function(e,t,n,o){var s,r,a,l,u,h,d;for(l in null==o&&(o=0),n)if("children"==l||0==o&&n instanceof Array)for(s=0==o&&n instanceof Array?n:n[l],t.children=[],o++,d=0;d<s.length;d++){for(u in a=s[d],r=new i._JsonTreeNodeDataSource,null==a.id&&(e.count++,null==a.attr?r.id="rid_"+e.count:null==a.attr.id&&(a.attr.id="rid_"+e.count)),a)for(h in r)u==h&&"children"!=u&&(r[h]=a[u]),"depth"==h&&(r[h]=o);for(h in t.children.push(r),a)"children"==h&&this._createTreeDataSource(e,t.children[d],a,o)}return t},i.JsonTreeDataSource.prototype.getChildCount=function(e){var t;return null==e&&(e=this.data.id),(t=this._searchTreeById(this.data,e)).children?t.children.length:0},i.JsonTreeDataSource.prototype.fetchChildren=function(e,t,n,o){var s,r,a,l,u,h,d,c;for(0,0,u=[],null==e&&(e=this.data.id),d=null!=(h=this._searchTreeById(this.data,e)).children?h.children.length:0,t||((t=[]).start=0,t.count=d),t.count||(t.count=d),t.start||(t.start=0),r=t.start,a=Math.min(d,r+t.count),s=r;s<a;s+=1)c=new i._JsonTreeNodeDataSource,null!=h.children[s].attr&&(c.attr=h.children[s].attr),null!=h.children[s].id&&(c.id=h.children[s].id),null!=h.children[s].depth&&(c.depth=h.children[s].depth),null!=h.children[s].title&&(c.title=h.children[s].title),null!=h.children[s].parent&&(c.parent=h.children[s].parent),null!=h.children[s].children?c.leaf=!1:c.leaf=!0,u.push(c);l=new i.JsonNodeSet(r,a,u,e,h.depth),null!=n&&null!=n.success&&n.success.call(null,l)},i.JsonTreeDataSource.prototype.fetchDescendants=function(e,t,n){var o,s,r,a,l,u,h,d;for(0,0,u=[],null==e&&(e=this.data.id),d=null!=(h=this._searchTreeById(this.data,e)).children?h.children.length:0,(o=[]).start=0,o.count=d,r=o.start,a=Math.min(d,r+o.count),s=r;s<a;s+=1)null!=h.children[s].children?h.children[s].leaf=!1:h.children[s].leaf=!0,u.push(h.children[s]);l=new i.JsonNodeSet(0,u.length,u,e,h.depth),null!=t&&null!=t.success&&t.success.call(null,l)},i.JsonTreeDataSource.prototype.moveOK=function(e,t,i){return"valid"},i.JsonTreeDataSource.prototype.move=function(e,t,n,o){var s,r,a,l,u,h,d;if(u=n,a=e,null==(l=t)||l==this.data.id){if("inside"!=u)return void i.Logger.log("Error: root can not be the reference node if position equals to "+u);l||(l=this.data.id)}s=this._searchTreeById(null,a),this._searchTreeById(s,l)?i.Logger.log("Error: the node to move contains the reference node as its sub-tree."):(r=this._searchTreeById(null,l),h=this._getParentById(l),this._removeFromTree(s),"inside"==u?(this._updateDepth(s,s.depth-(r.depth+1)),null==r.children&&(r.children=[]),r.children.push(s)):"before"==u?(this._updateDepth(s,s.depth-r.depth),(d=h.children.indexOf(r))>-1&&(0!=d?h.children.splice(d,0,s):h.children.unshift(s))):"after"==u?(this._updateDepth(s,s.depth-r.depth),(d=h.children.indexOf(r))>-1&&h.children.splice(d+1,0,s)):"first"==u?(this._updateDepth(s,s.depth-r.depth),h.children.unshift(s)):"last"==u&&(this._updateDepth(s,s.depth-r.depth),h.children.push(s)),null!=o&&null!=o.success&&o.success.call(null,this.data))},i.JsonTreeDataSource.prototype.sort=function(e,t){var i,n;n=this.data.id,(i=this._searchTreeById(this.data,n))._sortRecursive(e),null!=t&&null!=t.success&&t.success.call(null,i)},i.JsonTreeDataSource.prototype.getSortCriteria=function(){return{key:null,direction:"none"}},i.JsonTreeDataSource.prototype._getParentById=function(e,t){var i,n=null,o=!1;if(e==this.data.id)return null;if(null==t&&(t=this.data),t.children&&t.children.length>0){for(i=0;i<t.children.length;i++)if(t.children[i].id&&t.children[i].id==e||t.children[i].attr&&t.children[i].attr.id==e)return o=!0,t;if(!o)for(i=0;i<t.children.length;i++)if(n=this._getParentById(e,t.children[i]))return o=!0,n}return n},i.JsonTreeDataSource.prototype._searchTreeById=function(e,t){var i,n=null;if(null==e&&(e=this.data),e.id&&e.id==t||e.attr&&e.attr.id==t)return e;if(null!=e.children){for(i=0;i<e.children.length;i++){if(n)return n;n=e.children[i].id&&e.children[i].id==t||e.children[i].attr&&e.children[i].attr.id==t?e.children[i]:this._searchTreeById(e.children[i],t)}return n}return n},i.JsonTreeDataSource.prototype._updateDepth=function(e,t){var i;if(e.depth=e.depth-t,e.children&&0!=e.children.length)for(i=0;i<e.children.length;i++)this._updateDepth(e.children[i],t)},i.JsonTreeDataSource.prototype._removeFromTree=function(e){var t,i,n;null!=e.id?n=e.id:null!=e.attr&&(n=e.attr.id),(t=this._getParentById(n))||(t=this.data),(i=t.children.indexOf(e))>-1&&t.children.splice(i,1)},i.JsonTreeDataSource.prototype.getCapability=function(e){return"fetchDescendants"===e?"enable":"sort"===e?"default":"batchFetch"===e?"disable":"move"===e?"full":null};var At=function(e){e=e||new i.ExpandedKeySet;var t=ko.observable(e);return Object.setPrototypeOf(t,At.proto),t};At.proto=Object.create(ko.observable.fn),ko.utils.arrayForEach(["add","addAll","clear","delete"],function(e){At.proto[e]=function(){var t=this.peek();return this(t[e].apply(t,arguments)),this}}),i.KnockoutUtils=function(){},i.KnockoutUtils.internalObjectProperty="oj._internalObj",i.KnockoutUtils.underUpdateProp="oj._underUpdate",i.KnockoutUtils.collUpdatingProp="oj.collectionUpdating",i.KnockoutUtils.subscriptionProp="oj.collectionSubscription",i.KnockoutUtils.updatingCollectionFunc="oj.collectionUpdatingFunc",i.KnockoutUtils.map=function(e,t,n){var o,s,r,a,l,u,h,d,c,p,_,m;function g(t){return function(n){o[i.KnockoutUtils.underUpdateProp]||e.set(t,n)}}if(e instanceof i.Collection){var f,v=new Array(e._getLength());if(o=n?ko.observableArray(v):v,i.KnockoutUtils._storeOriginalObject(o,e),n)for(s=0;s<e._modelIndices.length;s++)f=e._modelIndices[s],o()[f]=i.KnockoutUtils.map(e._atInternal(f,null,!0,!1),t);else for(s=0;s<e._modelIndices.length;s++)f=e._modelIndices[s],o[f]=i.KnockoutUtils.map(e._atInternal(f,null,!0,!1),t);r=function(t){var n;try{if(!o[i.KnockoutUtils.underUpdateProp]){for(o[i.KnockoutUtils.collUpdatingProp]=!0,n=0;n<t.length;n++){var s=t[n].index,r=i.KnockoutUtils._getModel(t[n].value),a=t[n].status;"added"===a?s>=e.length-1?e.add(r):e.add(r,{at:s}):"deleted"===a&&e._removeInternal(r,s)}e.comparator&&(o[i.KnockoutUtils.underUpdateProp]=!0,o.sort(function(t,n){return i.KnockoutUtils._callSort(t,n,e.comparator,e,this)}),o[i.KnockoutUtils.underUpdateProp]=!1)}}catch(e){throw e}finally{o[i.KnockoutUtils.collUpdatingProp]=!1}},n&&o.subscribe&&(o[i.KnockoutUtils.updatingCollectionFunc]=r,o[i.KnockoutUtils.subscriptionProp]=o.subscribe(r,null,"arrayChange")),a=function(e,t,n){var s;try{if(o[i.KnockoutUtils.collUpdatingProp])return;t instanceof i.Collection&&(o[i.KnockoutUtils.underUpdateProp]=!0,s=n.index,o.splice(s,1))}catch(e){throw e}finally{o[i.KnockoutUtils.underUpdateProp]=!1}},l=function(e,n,s){var r,a;try{if(o[i.KnockoutUtils.collUpdatingProp])return;if(n instanceof i.Collection&&(o[i.KnockoutUtils.underUpdateProp]=!0,void 0!==(r=n._localIndexOf(e))&&r>-1))if(a=i.KnockoutUtils.map(e,t),s.fillIn){for(var l=Array.isArray(o)?o.length:o().length;l<r;l++)o.splice(l,0,i.KnockoutUtils.map(n._atInternal(l,null,!0,!1),t));o.splice(r,1,a)}else o.splice(r,0,a)}catch(e){throw e}finally{o[i.KnockoutUtils.underUpdateProp]=!1}},_=function(e,t){try{if(o[i.KnockoutUtils.collUpdatingProp])return;e instanceof i.Collection&&(o[i.KnockoutUtils.underUpdateProp]=!0,ko.isObservable(o)?(o[i.KnockoutUtils.subscriptionProp]&&o[i.KnockoutUtils.subscriptionProp].dispose(),o.removeAll(),o[i.KnockoutUtils.updatingCollectionFunc]&&o.subscribe(o[i.KnockoutUtils.updatingCollectionFunc],null,"arrayChange")):o=[])}catch(e){throw e}finally{o[i.KnockoutUtils.underUpdateProp]=!1}},m=function(t,n){try{if(o[i.KnockoutUtils.collUpdatingProp])return;t instanceof i.Collection&&(o[i.KnockoutUtils.underUpdateProp]=!0,o.sort(function(n,o){return i.KnockoutUtils._callSort(n,o,e.comparator,t,this)}))}catch(e){throw e}finally{o[i.KnockoutUtils.underUpdateProp]=!1}},e.OnInternal(i.Events.EventType.ADD,l,void 0,void 0,!0),e.OnInternal(i.Events.EventType.REMOVE,a,void 0,void 0,!0),e.OnInternal(i.Events.EventType.RESET,_,void 0,void 0,!0),e.OnInternal(i.Events.EventType.SORT,m,void 0,void 0,!0)}else{if(void 0===e)return;for(h in o={},h=null,u=e.attributes)u.hasOwnProperty(h)&&(d=ko.observable(e.get(h)),o[h]=d,(c=g(h))._prop=h,d.subscribe&&d.subscribe(c));p=function(e,t){var n,s;try{for(s in o[i.KnockoutUtils.underUpdateProp]=!0,n=e.changedAttributes())n.hasOwnProperty(s)&&o[s](e.get(s))}catch(e){throw e}finally{o[i.KnockoutUtils.underUpdateProp]=!1}},e.OnInternal(i.Events.EventType.CHANGE,p,void 0,void 0,!0),i.KnockoutUtils._storeOriginalObject(o,e),t&&t(o)}return o},i.KnockoutUtils._getModel=function(e){return e instanceof i.Model?e:e.hasOwnProperty(i.KnockoutUtils.internalObjectProperty)?e[i.KnockoutUtils.internalObjectProperty]:e},i.KnockoutUtils._callSort=function(e,t,n,o,s){return i.Collection.SortFunc(i.KnockoutUtils._getModel(e),i.KnockoutUtils._getModel(t),n,o,s)},i.KnockoutUtils._storeOriginalObject=function(e,t){Object.defineProperty(e,i.KnockoutUtils.internalObjectProperty,{value:t,enumerable:!1})},i.__registerWidget("oj.ojLabel",$.oj.baseComponent,{version:"1.0.0",defaultElement:"<label>",widgetEventPrefix:"oj",options:{for:null,help:{definition:null,source:null},labelId:null,showRequired:!1,rootAttributes:null},_BUNDLE_KEY:{_TOOLTIP_HELP:"tooltipHelp",_TOOLTIP_REQUIRED:"tooltipRequired"},widget:function(){return this.uiLabel},refresh:function(){this._super(),this._refreshRequired(),this._refreshHelp(),this._addIdsToDom()},_InitOptions:function(e,t){this._super(e,t),this._isCustomElement=this._IsCustomElement(),this._checkRequiredOption()},_ComponentCreate:function(){this._super(),this._touchEatClickNamespace=this.eventNamespace+"TouchEatClick",this._touchEatContextMenuNamespace=this.eventNamespace+"TouchEatContextMenu",this._helpDefPopupNamespace=this.eventNamespace+"HelpDefPopup",this._bTouchSupported=i.DomUtils.isTouchSupported(),this._drawOnCreate()},_SaveAttributes:function(e){this._IsCustomElement()||(this._savedClasses=e.attr("class"))},_RestoreAttributes:function(){this._IsCustomElement()||(this._savedClasses?this.element.attr("class",this._savedClasses):this.element.removeAttr("class"))},_NotifyDetached:function(){this._superApply(arguments),this._handleCloseHelpDefPopup()},_NotifyHidden:function(){this._superApply(arguments),this._handleCloseHelpDefPopup()},_GetTranslationsSectionName:function(){return this._IsCustomElement(),"oj-ojLabel"},_drawOnCreate:function(){var e,t=null;this.OuterWrapper?(this.uiLabel=$(this.OuterWrapper).append(this.element.wrap(this._createOjLabelGroupDom()).parent()),this.uiLabel.addClass("oj-label oj-component")):this.uiLabel=this.element.wrap(this._createRootDomElement()).closest(".oj-component"),this._addIdsToDom(),e=this.element[0].id,this.helpSpanId=e+"_helpIcon",this.requiredSpanId=e+"_requiredIcon",this._isCustomElement||this._moveLabelStyleClassesToRootDom(),this.options.showRequired&&(this._createRequiredIconSpanDom(),this._isCustomElement&&this._addRequiredDescribedByOnCustomFormElement()),this._isCustomElement&&this._refreshFor(),this._needsHelpIcon()&&(t=this._createIconSpan(this.helpSpanId,!0),this._createHelp(t),this._isCustomElement&&this._addHelpSpanIdOnTarget(this.helpSpanId))},_getCustomLabelFormElement:function(){var e,t=null;return this._isCustomElement?(null==(t=this._getForTargetElement())&&(this.OuterWrapper&&(e=this.OuterWrapper.id),null==(t=this._getTargetElementFromLabelledAttr("labelled-by",e))&&(t=this._getTargetElementFromLabelledAttr("aria-labelledby",this.options.labelId))),t):null},_addRequiredDescribedByOnCustomFormElement:function(){var e,t;this.OuterWrapper&&(e=this.OuterWrapper.id),(t=this._getTargetElementFromLabelledAttr("labelled-by",e))&&this._isElementCustomElementAriaRequiredUnsupported(t)&&this._addElementAttribute(t,this.requiredSpanId,"described-by")},_removeRequiredDescribedByOnCustomFormElement:function(){var e,t;this.OuterWrapper&&(e=this.OuterWrapper.id),(t=this._getTargetElementFromLabelledAttr("labelled-by",e))&&this._isElementCustomElementAriaRequiredUnsupported(t)&&this._removeElementAttribute(t,this.requiredSpanId,"described-by")},_addHelpSpanIdOnTarget:function(e){var t,i=this._getCustomLabelFormElement();i&&(t=this._getAriaAttributeForTarget(i),this._addElementAttribute(i,e,t))},_removeHelpSpanIdOnTarget:function(e){var t,i=this._getCustomLabelFormElement();i&&(t=this._getAriaAttributeForTarget(i),this._removeElementAttribute(i,e,t))},_getAriaAttributeForTarget:function(e){return this._isElementCustomElement(e)?"described-by":"group"===e.getAttribute("role")?"aria-labelledby":"aria-describedby"},_getForTargetElement:function(){return document.getElementById(this.options.for)},_getTargetElementFromLabelledAttr:function(e,t){var i;return t?(i="["+e+"~='"+t+"']",document.querySelector(i)):null},_isElementCustomElement:function(e){return i.Assert.assertDomElement(e),-1!==e.tagName.indexOf("-")},_isElementCustomElementAriaRequiredUnsupported:function(e){var t;i.Assert.assertDomElement(e);var n,o=["oj-radioset","oj-checkboxset"],s=o.length,r=!1;if(e){n=e.tagName.toLowerCase();for(var a=0;a<s&&!r;a++)t=o[a],0===n.indexOf(t)&&(r=!0)}return r},_addElementAttribute:function(e,t,i){var n,o,s=e.getAttribute(i);o=s?s.split(/\s+/):[],-1===$.inArray(t,o)&&o.push(t),n=$.trim(o.join(" ")),e.setAttribute(i,n)},_removeElementAttribute:function(e,t,i){var n,o,s,r=e.getAttribute(i);s=r?r.split(/\s+/):[],-1!==(o=$.inArray(t,s))&&s.splice(o,1),(n=$.trim(s.join(" ")))?e.setAttribute(i,n):e.setAttribute(i,"")},_addForOnLabel:function(e){var t=this.element[0],i=this.options.for;this._isElementCustomElement(e)?t.setAttribute("for",i+"|input"):t.setAttribute("for",i)},_createHelp:function(e){var t=this.options.help.definition,i=this.options.help.source,n=this._createHelpIconAnchorDomElement(t,i);$(e).prepend(n),this._attachHelpDefToIconAnchor(),this._focusable({element:n,applyHighlight:!0})},_createRequiredIconSpanDom:function(){this._createIconSpan(this.requiredSpanId,!1).appendChild(this._createRequiredIconDomElement())},_checkRequiredOption:function(){var e=this.options.showRequired;if(null!==e&&"boolean"!=typeof e)throw new Error("Option 'showRequired' has invalid value set: "+e)},_addIdsToDom:function(){this._isCustomElement&&this._refreshLabelId(),null==this.element.attr("id")&&this.element.uniqueId()},_moveLabelStyleClassesToRootDom:function(){var e,t,i,n=this.element.attr("class");if(n){i=(e=n.split(/\s+/)).length;for(var o=0;o<i;o++)(t=e[o]).indexOf("-label")>0&&(this.uiLabel.addClass(t),this.element.removeClass(t))}},_createIconSpan:function(e,t){var i=document.createElement("span");return i.setAttribute("id",e),t?this.uiLabel.find(".oj-label-group").prepend(i):this.element.before(i),i},_createRootDomElement:function(){var e,t,i=this.options.rootAttributes,n="oj-label oj-component";return i&&(e=i.class),e&&(n=n+" "+e),(t=document.createElement("div")).className=n,t.appendChild(this._createOjLabelGroupDom()),t},_createOjLabelGroupDom:function(){var e;return(e=document.createElement("div")).className="oj-label-group",e},_createRequiredIconDomElement:function(){var e=this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_REQUIRED),t=document.createElement("span");return t.className="oj-label-required-icon oj-component-icon",t.setAttribute("role","img"),t.setAttribute("title",e),t.setAttribute("aria-label",e),t},_createHelpIconAnchorDomElement:function(e,t){var n;if((n=document.createElement("a")).setAttribute("tabindex","0"),n.setAttribute("target","_blank"),n.className="oj-label-help-icon-anchor oj-label-help-icon oj-component-icon oj-clickable-icon-nocontext",t)try{i.DomUtils.validateURL(t),n.setAttribute("href",t)}catch(e){throw new Error(e+". The source option ("+t+") is invalid.")}else n.setAttribute("role","img");return e?n.setAttribute("aria-label",e):n.setAttribute("aria-label",this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_HELP)),n},_attachHelpDefToIconAnchor:function(){var e,t,i,n=this;0!==(t=this.widget().find(".oj-label-help-icon-anchor")).length&&(e=this._createHelpDefPopupDiv(),this._bTouchSupported&&(this._eatClickOnHelpIconListener&&this.widget().off(this._touchEatClickNamespace),this._eatClickOnHelpIconListener=function(e){return!1},this._eatContextMenuOnHelpIconListener=function(e){return!1},t.on("contextmenu"+this._touchEatContextMenuNamespace,this._eatContextMenuOnHelpIconListener)),this._openPopupForHelpDefCallbackListener||(this._openPopupForHelpDefCallbackListener=function(i){n._handleOpenHelpDefPopup(i,e,t)}),this._closePopupForHelpDefCallbackListener||(this._closePopupForHelpDefCallbackListener=function(e){n._handleCloseHelpDefPopup()}),this._addShowHelpDefinitionEventHandlers(t),i={my:"start bottom",at:"end top",collision:"flipcenter",of:t},e.ojPopup({position:i,modality:"modeless",animation:{open:null,close:null}}))},_createHelpDefPopupDiv:function(){var e,t,i,n,o=this.options.help.definition;return n=o||this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_HELP),this._helpDefPopupDivId?(i=$(document.getElementById(this._helpDefPopupDivId)))&&i.find(".oj-help-popup-container").first().text(n):((t=document.createElement("div")).className="oj-help-popup",t.style.display="none",(i=$(t)).uniqueId(),this._helpDefPopupDivId=i.prop("id"),(e=document.createElement("div")).className="oj-help-popup-container",t.appendChild(e),$(e).text(n),document.getElementsByTagName("body")[0].appendChild(t)),i},_addShowHelpDefinitionEventHandlers:function(e){var t;e.on("focusin"+this._helpDefPopupNamespace+" mouseenter"+this._helpDefPopupNamespace,this._openPopupForHelpDefCallbackListener),e.on("mouseleave"+this._helpDefPopupNamespace,this._closePopupForHelpDefCallbackListener),this._bTouchSupported&&(this.options.help.source?(t={recognizers:[[Hammer.Press,{time:i.DomUtils.PRESS_HOLD_THRESHOLD}]]},e.ojHammer(t),this._on(e,{press:this._openPopupForHelpDefCallbackListener})):(t={recognizers:[[Hammer.Tap],[Hammer.Press,{time:i.DomUtils.PRESS_HOLD_THRESHOLD}]]},e.ojHammer(t),this._on(e,{press:this._openPopupForHelpDefCallbackListener,tap:this._openPopupForHelpDefCallbackListener})))},_handleOpenHelpDefPopup:function(e,t,n){if(!t.ojPopup("isOpen"))if(this._bTouchSupported){if("press"===e.type){var o=this.widget();o.on("click"+this._touchEatClickNamespace,this._eatClickOnHelpIconListener);var s=this;t.on("ojclose",function(e,t){o.off(s._touchEatClickNamespace)})}else t.off("ojclose");"press"!==e.type&&"tap"!==e.type&&(i.DomUtils.recentTouchStart()||"focusin"!==e.type&&"mouseenter"!==e.type)||t.ojPopup("open",n)}else t.ojPopup("open",n)},_handleCloseHelpDefPopup:function(){null!=this._helpDefPopupDivId&&$(document.getElementById(this._helpDefPopupDivId)).ojPopup("close")},_removeHelpDefIconEventListeners:function(e){this._bTouchSupported&&(this.widget().off(this._touchEatClickNamespace),e.off(this._touchEatContextMenuNamespace),this._eatClickOnHelpIconListener=null,this._eatContextMenuOnHelpIconListener=null,e.ojHammer("destroy")),e.off(this._helpDefPopupNamespace),this._openPopupForHelpDefCallbackListener=null,this._closePopupForHelpDefCallbackListener=null},_removeHelpDefPopup:function(){var e;null!=this._helpDefPopupDivId&&((e=$(document.getElementById(this._helpDefPopupDivId)))&&(e.ojPopup("destroy"),e.remove()),this._helpDefPopupDivId=null)},_needsHelpIcon:function(){var e,t,i=this.options,n=i.help.source;return(t=""!==n&&null!=n)||(t=""!==(e=i.help.definition)&&null!=e),t},_refreshHelp:function(){var e,t,i=this.helpSpanId;1===(t=this.uiLabel.find(".oj-label-help-icon")).length&&(this._removeHelpDefIconEventListeners(t),this._removeHelpDefPopup(),t.remove()),e=document.getElementById(i),this._needsHelpIcon()?(null==e&&(e=this._createIconSpan(i,!0)),this._createHelp(e),this._isCustomElement&&this._addHelpSpanIdOnTarget(i)):null!==e&&(e.parentNode.removeChild(e),this._isCustomElement&&this._removeHelpSpanIdOnTarget(i))},_refreshRequired:function(){var e,t,i=this.requiredSpanId;e=document.getElementById(i),this.options.showRequired?e?(t=this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_REQUIRED),this.uiLabel.find(".oj-label-required-icon").attr("title",t)):(this._createRequiredIconSpanDom(),this._isCustomElement&&this._addRequiredDescribedByOnCustomFormElement()):(null!==(e=document.getElementById(i))&&e.parentNode.removeChild(e),this._isCustomElement&&this._removeRequiredDescribedByOnCustomFormElement())},_refreshFor:function(){var e;this._isCustomElement&&(e=this._getForTargetElement())&&this._addForOnLabel(e)},_refreshLabelId:function(){var e,t;this._isCustomElement&&((e=this.options.labelId)?this.element.attr("id",e):(t=this.uiLabel.attr("id"))&&this.element.attr("id",t+"|label"))},_setOption:function(e,t){switch(this._superApply(arguments),e){case"showRequired":this._refreshRequired();break;case"help":this._refreshHelp();break;case"for":this._isCustomElement&&this._refreshFor();break;case"labelId":this._isCustomElement&&this._refreshLabelId()}},getNodeBySubId:function(e){var t;return(t=this._super(e))||"oj-label-help-icon"===e.subId&&(t=this.widget().find(".oj-label-help-icon")[0]),t||null},getSubIdByNode:function(e){var t=null;return null!=e&&e===this.widget().find(".oj-label-help-icon")[0]&&(t={subId:"oj-label-help-icon"}),t||this._superApply(arguments)},_destroy:function(){var e=this.uiLabel.find(".oj-label-help-icon");return this._removeHelpDefIconEventListeners(e),this._removeHelpDefPopup(),this.helpSpanId=null,this.requiredSpanId=null,this._isCustomElement=null,i.DomUtils.unwrap(this.element,this.uiLabel),this._super()}}),i.CustomElementBridge.registerMetadata("oj-label","baseComponent",{properties:{help:{type:"Object",properties:{definition:{type:"string"},source:{type:"string"}}},showRequired:{type:"boolean"},labelId:{type:"string"},for:{type:"string"},translations:{type:"Object",properties:{tooltipHelp:{type:"string",value:"Help"},tooltipRequired:{type:"string",value:"Required"}}}},extension:{_INNER_ELEM:"label",_WIDGET_NAME:"ojLabel",_GLOBAL_TRANSFER_ATTRS:["accesskey"]}}),i.CustomElementBridge.register("oj-label",{metadata:i.CustomElementBridge.getMetadata("oj-label")});var It={properties:{labelEdge:{type:"string",enumValues:["start","top","inherit"],value:"inherit"},labelWidth:{type:"string",value:"inherit"}},extension:{_CONSTRUCTOR:function(e){var t,i,n=e.element;this.createDOM=function(){var e;for(n.classList.add("oj-label-value","oj-form"),(e=document.createElement("div")).classList.add("oj-flex"),e.setAttribute("data-oj-context",""),e.setAttribute("data-oj-internal",""),(t=document.createElement("div")).classList.add("oj-flex-item"),t.setAttribute("data-oj-context",""),t.setAttribute("data-oj-internal",""),(i=document.createElement("div")).classList.add("oj-flex-item"),i.setAttribute("data-oj-context",""),i.setAttribute("data-oj-internal","");n.firstElementChild;){var o=n.firstElementChild;switch(o.getAttribute("slot")){case"label":t.appendChild(o);break;case"value":i.appendChild(o);break;default:n.removeChild(o)}}e.appendChild(t),e.appendChild(i),n.appendChild(e)},this.updateDOM=function(){var e=function(){for(var e=n.parentElement;e;e=e.parentElement)if(-1!==e.tagName.indexOf("-"))return e;return null}(),o=function(e){var t="top";"inherit"===n.labelEdge?e&&"labelEdge"in e&&(t=e.labelEdge):t=n.labelEdge;return t}(e),s="start"===o?function(e){var t="33%";"inherit"===n.labelWidth?e&&"labelWidth"in e&&(t=e.labelWidth):t=n.labelWidth;return t}(e):"100%";"start"===o?n.classList.add("oj-formlayout-labels-inline"):n.classList.remove("oj-formlayout-labels-inline"),t.style.webkitFlex="0 1 "+s,t.style.flex="0 1 "+s,t.style.maxWidth=s,t.style.width=s,i.style.webkitFlex="1 1 0",i.style.flex="1 1 0"}}}};Object.freeze(It),i.CustomElementBridge.registerMetadata("oj-label-value",null,It),i.CustomElementBridge.register("oj-label-value",{metadata:i.CustomElementBridge.getMetadata("oj-label-value")}),i.__registerWidget("oj.ojLegend",$.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{drilling:"off",halign:"start",hiddenCategories:[],hideAndShowBehavior:"off",highlightedCategories:[],hoverBehavior:"none",hoverBehaviorDelay:200,orientation:"vertical",scrolling:"asNeeded",sections:null,symbolHeight:0,symbolWidth:0,textStyle:void 0,valign:"top",drill:null},_CreateDvtComponent:function(e,t,i){return dvt.Legend.newInstance(e,t,i)},_ConvertLocatorToSubId:function(e){var t=e.subId;return"oj-legend-item"==t?(t="section"+this._GetStringFromIndexPath(e.sectionIndexPath),t+=":item["+e.itemIndex+"]"):"oj-legend-tooltip"==t&&(t="tooltip"),t},_ConvertSubIdToLocator:function(e){var t={};if(e.indexOf(":item")>0){var i=e.indexOf(":item"),n=e.substring(0,i),o=e.substring(i);t.subId="oj-legend-item",t.sectionIndexPath=this._GetIndexPath(n),t.itemIndex=this._GetFirstIndex(o)}else"tooltip"==e&&(t.subId="oj-legend-tooltip");return t},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-legend"),e},_GetChildStyleClasses:function(){var e=this._super();return e["oj-legend"]={path:"textStyle",property:"TEXT"},e["oj-legend-title"]={path:"titleStyle",property:"TEXT"},e["oj-legend-section-title"]={path:"_sectionTitleStyle",property:"TEXT"},e},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtUtilBundle.LEGEND"]=e.componentName,t},_GetEventTypes:function(){return["drill"]},_HandleEvent:function(e){"drill"===e.type?this._trigger("drill",null,{id:e.id}):this._super(e)},_LoadResources:function(){null==this.options._resources&&(this.options._resources={});var e=this.options._resources;e.closedEnabled="oj-legend-section-close-icon",e.closedOver="oj-legend-section-close-icon oj-hover",e.closedDown="oj-legend-section-close-icon oj-active",e.openEnabled="oj-legend-section-open-icon",e.openOver="oj-legend-section-open-icon oj-hover",e.openDown="oj-legend-section-open-icon oj-active"},_Render:function(){this._super()},getTitle:function(){return this._component.getAutomation().getTitle()},getSection:function(e){var t=this._component.getAutomation().getSection(e);return t&&(t.getSection=function(e){return t.sections?t.sections[e]:null},t.getItem=function(e){return t.items?t.items[e]:null}),t},getItem:function(e){return this._component.getAutomation().getItem(e)},getPreferredSize:function(e,t){for(var i=!1,n=this.options.sections?this.options.sections:[],o=0;o<n.length;o++){var s=n[o].items;s&&s.then&&(i=!0)}var r=i?null:this.options,a=this._component.getPreferredSize(r,e,t);return{width:a.getWidth(),height:a.getHeight()}},getContextByNode:function(e){var t=this.getSubIdByNode(e);return t&&"oj-legend-tooltip"!==t.subId?t:null},_GetComponentDeferredDataPaths:function(){return{sections:["items"]}},_GetComponentNoClonePaths:function(){return{sections:{items:!0}}}}),i.CustomElementBridge.registerMetadata("oj-legend","dvtBaseComponent",{properties:{drilling:{type:"string",enumValues:["on","off"]},halign:{type:"string",enumValues:["center","end","start"]},hiddenCategories:{type:"Array<string>",writeback:!0},hideAndShowBehavior:{type:"string",enumValues:["on","off"]},highlightedCategories:{type:"Array<string>",writeback:!0},hoverBehavior:{type:"string",enumValues:["dim","none"]},hoverBehaviorDelay:{type:"number"},orientation:{type:"string",enumValues:["horizontal","vertical"]},scrolling:{type:"string",enumValues:["asNeeded","off"]},sections:{type:"Array<object>"},symbolHeight:{type:"number"},symbolWidth:{type:"number"},textStyle:{type:"object"},translations:{type:"Object",properties:{componentName:{type:"string",value:"Legend"},labelAndValue:{type:"string",value:"{0}: {1}"},labelClearSelection:{type:"string",value:"Clear Selection"},labelCountWithTotal:{type:"string",value:"{0} of {1}"},labelDataVisualization:{type:"string",value:"Data Visualization"},labelInvalidData:{type:"string",value:"Invalid data"},labelNoData:{type:"string",value:"No data to display"},stateCollapsed:{type:"string",value:"Collapsed"},stateDrillable:{type:"string",value:"Drillable"},stateExpanded:{type:"string",value:"Expanded"},stateHidden:{type:"string",value:"Hidden"},stateIsolated:{type:"string",value:"Isolated"},stateMaximized:{type:"string",value:"Maximized"},stateMinimized:{type:"string",value:"Minimized"},stateSelected:{type:"string",value:"Selected"},stateUnselected:{type:"string",value:"Unselected"},stateVisible:{type:"string",value:"Visible"}}},valign:{type:"string"}},events:{drill:{}},methods:{getContextByNode:{},getItem:{},getPreferredSize:{},getSection:{}},extension:{_WIDGET_NAME:"ojLegend"}}),i.CustomElementBridge.register("oj-legend",{metadata:i.CustomElementBridge.getMetadata("oj-legend")});var Ot=function(){function e(e,t){this.dataProvider=e,this.options=t,this._KEY="key",this._KEYS="keys",this._DATA="data",this._STARTINDEX="startIndex",this._SORT="sort",this._SORTCRITERIA="sortCriteria",this._FILTERCRITERION="filterCriterion",this._METADATA="metadata",this._FROM="from",this._OFFSET="offset",this._REFRESH="refresh",this._MUTATE="mutate",this._SIZE="size",this._FETCHPARAMETERS="fetchParameters",this._VALUE="value",this._DONE="done",this._DATAMAPPING="dataMapping",this._MAPFIELDS="mapFields",this._MAPSORTCRITERIA="mapSortCriteria",this._MAPFILTERCRITERION="mapFilterCriterion",this._UNMAPSORTCRITERIA="mapSortCriteria",this._RESULTS="results",this._CONTAINSPARAMETERS="containsParameters",this._DEFAULT_SIZE=25,this._CONTAINSKEYS="containsKeys",this._FETCHBYKEYS="fetchByKeys",this._FETCHBYOFFSET="fetchByOffset",this._FETCHFIRST="fetchFirst",this._ADDEVENTLISTENER="addEventListener",this.AsyncIterable=function(){return function(e,t){this._parent=e,this._asyncIterator=t,this[Symbol.asyncIterator]=function(){return this._asyncIterator}}}(),this.AsyncIterator=function(){function e(e,t,i){this._parent=e,this._nextFunc=t,this._params=i}return e.prototype.next=function(){var e=this._nextFunc(this._params);return Promise.resolve(e)},e}(),this.AsyncIteratorResult=function(){return function(e,t,i){this._parent=e,this.value=t,this.done=i,this[e._VALUE]=t,this[e._DONE]=i}}(),this.FetchListResult=function(){return function(e,t,i,n){this._parent=e,this.fetchParameters=t,this.data=i,this.metadata=n,this[e._FETCHPARAMETERS]=t,this[e._DATA]=i,this[e._METADATA]=n}}(),this.Item=function(){return function(e,t,i){this._parent=e,this.metadata=t,this.data=i,this[e._METADATA]=t,this[e._DATA]=i}}(),this.ItemMetadata=function(){return function(e,t){this._parent=e,this.key=t,this[e._KEY]=t}}(),this.FetchListParameters=function(){return function(e,t,i,n){this._parent=e,this.size=t,this.sortCriteria=i,this.filterCriterion=n,this[e._SIZE]=t,this[e._SORTCRITERIA]=i,this[e._FILTERCRITERION]=n}}(),this.FetchByOffsetParameters=function(){return function(e,t,i,n,o){this._parent=e,this.offset=t,this.size=i,this.sortCriteria=n,this.filterCriterion=o,this[e._SIZE]=i,this[e._SORTCRITERIA]=n,this[e._OFFSET]=t,this[e._FILTERCRITERION]=o}}(),this.FetchByKeysResults=function(){return function(e,t,i){this._parent=e,this.fetchParameters=t,this.results=i,this[e._FETCHPARAMETERS]=t,this[e._RESULTS]=i}}(),this.ContainsKeysResults=function(){return function(e,t,i){this._parent=e,this.containsParameters=t,this.results=i,this[e._CONTAINSPARAMETERS]=t,this[e._RESULTS]=i}}(),this[this._FROM]=null==this.options?null:this.options[this._FROM],this[this._OFFSET]=null==this.options?0:this.options[this._OFFSET]>0?this.options[this._OFFSET]:0,this[this._SORTCRITERIA]=null==this.options?null:this.options[this._SORTCRITERIA],this[this._DATAMAPPING]=null==this.options?null:this.options[this._DATAMAPPING],this._addEventListeners(e)}return e.prototype.containsKeys=function(e){var t=this;return this.dataProvider[t._CONTAINSKEYS]?this.dataProvider[t._CONTAINSKEYS](e):this.fetchByKeys(e).then(function(i){var n=new Set;return e[t._KEYS].forEach(function(e){null!=i[t._RESULTS].get(e)&&n.add(e)}),Promise.resolve(new t.ContainsKeysResults(t,e,n))})},e.prototype.fetchByKeys=function(e){var t=this;if(this.dataProvider[t._FETCHBYKEYS])return this.dataProvider[t._FETCHBYKEYS](e).then(function(i){var n=i[t._RESULTS],o=new Map;return n.forEach(function(e,i){var n=t._getMappedItems([e]);o.set(i,n[0])}),new t.FetchByKeysResults(t,e,o)});var i={};i[this._SIZE]=this._DEFAULT_SIZE;var n=new Map,o=this.dataProvider[t._FETCHFIRST](i)[Symbol.asyncIterator]();return this._fetchNextSet(e,o,n).then(function(i){var n=new Map;return i.forEach(function(e,i){var o=t._getMappedItems([e]);n.set(i,o[0])}),new t.FetchByKeysResults(t,e,n)})},e.prototype.fetchFirst=function(e){var t={};t[this._DATA]=[],t[this._KEYS]=[],t[this._DONE]=!1,t[this._STARTINDEX]=0;var n=null!=e?e[this._SIZE]:null,o=null!=e?e[this._SORTCRITERIA]:null;null==o&&(o=this[this._SORTCRITERIA]);var s=this._getMappedSortCriteria(o),r=null!=e?e[this._FILTERCRITERION]:null,a=this._getMappedFilterCriterion(r),l=this;if(null==l[this._FROM]&&l[this._OFFSET]>0&&i.DataProviderFeatureChecker.isFetchByOffset(l.dataProvider)){var u=l[this._OFFSET];return new this.AsyncIterable(this,new this.AsyncIterator(this,function(e){return function(){var t=new l.FetchByOffsetParameters(l,u,n,s,a);return l.dataProvider[l._FETCHBYOFFSET](t).then(function(t){var i=t.results,o=i.map(function(e){return e[l._DATA]}),s=(i.map(function(e){return e[l._METADATA]}),i.map(function(e){return e[l._METADATA][l._KEY]}));u+=s.length;var r=l._getMappedDataAndKeys(s,o);l._cacheResult(e,r[l._DATA],r[l._KEYS]),e[l._DONE]=t[l._DONE];var a=t[l._FETCHPARAMETERS],h=null!=a?a[l._SORTCRITERIA]:null,d=l._getUnmappedSortCriteria(h),c=new l.FetchByOffsetParameters(l,l[l._OFFSET],n,d);return Promise.resolve(new l.AsyncIteratorResult(l,new l.FetchListResult(l,c,r[l._DATA],r[l._METADATA]),e[l._DONE]))})}}(t),e))}var h=new this.FetchListParameters(this,n,s,a),d=this.dataProvider[l._FETCHFIRST](h)[Symbol.asyncIterator]();return new this.AsyncIterable(this,new this.AsyncIterator(this,function(t,i){return function(){return i.next().then(function(n){var o=n[l._VALUE][l._DATA],s=n[l._VALUE][l._METADATA],r=s.map(function(e){return e[l._KEY]}),a=(o.map(function(e,t){return new l.Item(l,s[t],o[t])}),l._getMappedDataAndKeys(r,o));l._cacheResult(t,a[l._DATA],a[l._KEYS]),t[l._DONE]=n[l._DONE];var u=null!=e?e[l._SIZE]:null,h=(null!=e&&e[l._OFFSET],n[l._VALUE][l._FETCHPARAMETERS]),d=null!=h?h[l._SORTCRITERIA]:null,c=l._getUnmappedSortCriteria(d),p=new l.FetchListParameters(l,u,c);return l._fetchUntilKey(p,l[l._FROM],t,i).then(function(){return l._fetchUntilOffset(p,l[l._OFFSET]+t[l._STARTINDEX],o.length,t,i)})})}}(t,d),e))},e.prototype.getCapability=function(e){return this.dataProvider.getCapability(e)},e.prototype.getTotalSize=function(){return this.dataProvider.getTotalSize()},e.prototype.isEmpty=function(){return this.dataProvider.isEmpty()},e.prototype._fetchNextSet=function(e,t,n){var o=this;return t.next().then(function(s){var r=s[o._VALUE],a=r[o._DATA],l=r[o._METADATA],u=l.map(function(e){return e[o._KEY]}),h=!0;return e[o._KEYS].forEach(function(e){n.has(e)||u.map(function(t,s){i.Object.compareValues(t,e)&&n.set(e,new o.Item(o,l[s],a[s]))}),n.has(e)||(h=!1)}),h||s[o._DONE]?n:o._fetchNextSet(e,t,n)})},e.prototype._fetchUntilKey=function(e,t,i,n){var o=this;if(null!=t){var s=i[this._KEYS].filter(function(e){if(t==e)return!0});if(s.length>0){var r=i[this._KEYS].indexOf(s[0]);i[this._KEYS]=i[this._KEYS].slice(r,i[this._KEYS].length),i[this._DATA]=i[this._DATA].slice(r,i[this._DATA].length)}else{if(!i[o._DONE])return n.next().then(function(e){var t=e[o._VALUE][o._DATA],s=e[o._VALUE][o._METADATA].map(function(e){return e[o._KEY]}),r=o._getMappedDataAndKeys(s,t);return o._cacheResult(i,r[o._DATA],r[o._KEYS]),i[o._DONE]=e[o._DONE],o._fetchUntilKey(e[o._FETCHPARAMETERS],r[o._KEYS],i,n)});i[this._DATA]=[],i[this._KEYS]=[]}}return Promise.resolve(null)},e.prototype._fetchUntilOffset=function(e,t,i,n,o){var s=this,r=null!=e&&e[this._SIZE]>0?e[this._SIZE]:i;t=t>0?t:0;var a=n[this._KEYS].slice(t,t+r),l=n[this._DATA].slice(t,t+r),u=a.map(function(e){return new s.ItemMetadata(s,e)});return l.length<r?n[s._DONE]?(n[this._STARTINDEX]=n[this._STARTINDEX]+l.length,Promise.resolve(new s.AsyncIteratorResult(s,new s.FetchListResult(s,e,l,u),!0))):o.next().then(function(e){var i=e[s._VALUE][s._DATA],r=e[s._VALUE][s._METADATA].map(function(e){return e[s._KEY]}),a=s._getMappedDataAndKeys(r,i);return s._cacheResult(n,a[s._DATA],a[s._KEYS]),n[s._DONE]=e[s._DONE],s._fetchUntilOffset(e[s._VALUE][s._FETCHPARAMETERS],t,i.length,n,o)}):(n[this._STARTINDEX]=n[this._STARTINDEX]+l.length,Promise.resolve(new s.AsyncIteratorResult(s,new s.FetchListResult(s,e,l,u),n[s._DONE])))},e.prototype._cacheResult=function(e,t,i){var n=this;t.map(function(t){e[n._DATA].push(t)}),i.map(function(t){e[n._KEYS].push(t)})},e.prototype._getMappedItems=function(e){var t=this;if(null!=this[this._DATAMAPPING]){var i=this[this._DATAMAPPING][this._MAPFIELDS];if(null!=i&&null!=e&&e.length>0){new Array;return e.map(function(e){return i.bind(t)(e)})}}return e},e.prototype._getMappedDataAndKeys=function(e,t){var i=this,n=t.map(function(n,o){return new i.Item(i,new i.ItemMetadata(i,e[o]),t[o])}),o=this._getMappedItems(n),s=o.map(function(e){return e[i._DATA]}),r=o.map(function(e){return e[i._METADATA][i._KEY]}),a=o.map(function(e){return e[i._METADATA]}),l={};return l[this._DATA]=s,l[this._KEYS]=r,l[this._METADATA]=a,l},e.prototype._getMappedFilterCriterion=function(e){if(null!=this[this._DATAMAPPING]){var t=this[this._DATAMAPPING][this._MAPFILTERCRITERION];if(null!=t&&null!=e)return t(e)}return e},e.prototype._getMappedSortCriteria=function(e){if(null!=this[this._DATAMAPPING]){var t=this[this._DATAMAPPING][this._MAPSORTCRITERIA];if(null!=t&&null!=e&&e.length>0)return t(e)}return e},e.prototype._getUnmappedSortCriteria=function(e){if(null!=this[this._DATAMAPPING]){var t=this[this._DATAMAPPING][this._UNMAPSORTCRITERIA];if(null!=t&&null!=e&&e.length>0)return t(e)}return e},e.prototype._addEventListeners=function(e){var t=this;e[t._ADDEVENTLISTENER](this._REFRESH,function(e){t.dispatchEvent(e)}),e[t._ADDEVENTLISTENER](this._MUTATE,function(e){t.dispatchEvent(e)})},e}();function wt(e,t,i,n,o,s){var r=wt;null==r._agentTypeAndVersion&&(r._agentTypeAndVersion=r._getAgentTypeAndVersion(navigator.userAgent)),this._elem=e,this._rtl=t,this._automationEnabled=i,n&&n.tiles&&(this._tilesSelector=n.tiles),o&&o.transitionShowFromStyleClass&&(this._transitionShowFromStyleClass=o.transitionShowFromStyleClass),s&&(s.addStyleClassName&&(this._addStyleClassNameFunc=s.addStyleClassName),s.removeStyleClassName&&(this._removeStyleClassNameFunc=s.removeStyleClassName),s.getSizeStyleClassName&&(this._getSizeStyleClassNameFunc=s.getSizeStyleClassName),s.getTileSpan&&(this._getTileSpanFunc=s.getTileSpan),s.showTileOnEndFunc&&(this._showTileOnEndFunc=s.showTileOnEndFunc),s.hideTileOnEndFunc&&(this._hideTileOnEndFunc=s.hideTileOnEndFunc),s.startAnimationFunc&&(this._startAnimationFunc=s.startAnimationFunc),s.layoutOnEndFunc&&(this._layoutOnEndFunc=s.layoutOnEndFunc),s.layoutCycleOnStartFunc&&(this._layoutCycleOnStartFunc=s.layoutCycleOnStartFunc),s.layoutCycleOnEndFunc&&(this._layoutCycleOnEndFunc=s.layoutCycleOnEndFunc),s.sortTilesOriginalOrderFunc&&(this._sortTilesOriginalOrderFunc=s.sortTilesOriginalOrderFunc),s.subtreeAttached&&(this._subtreeAttachedFunc=s.subtreeAttached),s.subtreeDetached&&(this._subtreeDetachedFunc=s.subtreeDetached),s.addBusyState&&(this._addBusyStateFunc=s.addBusyState));var a=document.createElement("div"),l=a.style;l.display="inline-block",l.overflow="hidden",l.visibility="hidden";var u=document.createElement("div");(l=u.style).display="inline-block",a.appendChild(u),e.insertBefore(a,e.firstChild),this._sizeDivWrapper=a,this._sizeDiv=u;var h=this;this._hideTilesFunc=function(){h._hideTiles()},this._resolveBusyStateFunc=function(){h._resolveBusyState()}}i.ListDataProviderView=Ot,i.ListDataProviderView=Ot,i.EventTargetMixin.applyMixin(Ot),i.FetchByOffsetMixin.applyMixin(Ot),i.ListViewDndContext=function(e){this.listview=e},i.Object.createSubclass(i.ListViewDndContext,i.Object,"oj.ListViewDndContext"),i.ListViewDndContext.C_KEY=67,i.ListViewDndContext.V_KEY=86,i.ListViewDndContext.X_KEY=88,i.ListViewDndContext.CUT_COMMAND="cut",i.ListViewDndContext.COPY_COMMAND="copy",i.ListViewDndContext.PASTE_COMMAND="paste",i.ListViewDndContext.PASTE_BEFORE_COMMAND="pasteBefore",i.ListViewDndContext.PASTE_AFTER_COMMAND="pasteAfter",i.ListViewDndContext.prototype.reset=function(){this._unsetSelectionDraggable(),this.m_itemsDragged=null,this.m_dragImage=null,this.m_currentDragItem=null,this.m_dragItems=null,this.m_contextMenuItem=null},i.ListViewDndContext.prototype._getDndOptions=function(e){var t=this.listview.GetOption("dnd");return null!=t&&t[e]?t[e].items:null},i.ListViewDndContext.prototype._getDragOptions=function(){return this._getDndOptions("drag")},i.ListViewDndContext.prototype._getDropOptions=function(){return this._getDndOptions("drop")},i.ListViewDndContext.prototype.IsItemReOrdering=function(){return"enabled"==this._getDndOptions("reorder")},i.ListViewDndContext.prototype.GetDragAffordanceClass=function(){return"oj-listview-drag-handle"},i.ListViewDndContext.prototype.GetDragImageClass=function(){return"oj-listview-drag-image"},i.ListViewDndContext.prototype.GetDragItemClass=function(){return"oj-listview-drag-item"},i.ListViewDndContext.prototype.GetCutStyleClass=function(){return"oj-listview-cut"},i.ListViewDndContext.prototype.GetCommandPrefix=function(){return"oj-listview-"},i.ListViewDndContext.prototype._findItem=function(e){return this.listview.FindItem(e)},i.ListViewDndContext.prototype._getSelectedItems=function(e){var t,i,n,o;if(t=[],this.listview._isSelectionEnabled())for(i=this.listview.GetOption("selection"),n=0;n<i.length;n++)null==(o=this.listview.FindElementByKey(i[n]))||this.listview.SkipFocus($(o))||t.push(o);else null!=(o=this._getActiveItem())&&t.push(o);return!e&&null!=this.m_contextMenuItem&&this.m_contextMenuItem.length>0&&(this.listview.element.get(0).contains(this.m_contextMenuItem.get(0))?-1==t.indexOf(this.m_contextMenuItem.get(0))&&t.push(this.m_contextMenuItem.get(0)):this.m_contextMenuItem=null),t},i.ListViewDndContext.prototype._getActiveItem=function(){return null==this.listview.m_active?null:this.listview.m_active.elem[0]},i.ListViewDndContext.prototype._getKeyAndIndex=function(e){return{key:this.listview.GetKey(e.get(0)),index:this.listview._getItemsCache().index(e)}},i.ListViewDndContext.prototype.itemRenderComplete=function(e,t){var i,n;$(e).hasClass(this.listview.getItemStyleClass())||(e=e.firstElementChild),null!=(i=$(e).find("."+this.GetDragAffordanceClass()))&&i.length>0&&(null==(n=i.attr("aria-labelledby"))?i.attr("aria-labelledby",this.listview._createSubId("instr")):i.attr("aria-labelledby",n+" "+this.listview._createSubId("instr")),this.listview._isTouchSupport()&&i.attr("draggable","true"))},i.ListViewDndContext.prototype._unsetSelectionDraggable=function(){this.m_draggableSelection&&$.each(this.m_draggableSelection,function(e,t){$(t).removeClass("oj-draggable")})},i.ListViewDndContext.prototype.setSelectionDraggable=function(){var e,t,i,n=[];for(this._unsetSelectionDraggable(),e=this.listview.GetOption("selection"),t=0;t<e.length;t++)null==(i=this.listview.FindElementByKey(e[t]))||this.listview.SkipFocus($(i))||(n.push(i),$(i).addClass("oj-draggable"));this.m_draggableSelection=n},i.ListViewDndContext.prototype._setItemDraggable=function(e){var t,i;return t=this.GetDragAffordanceClass(),null!=(i=e.find("."+t))&&i.length>0||(e.addClass("oj-draggable"),!1)},i.ListViewDndContext.prototype._unsetItemDraggable=function(e){e.removeClass("oj-draggable")},i.ListViewDndContext.prototype._setDraggable=function(e){var t,i,n,o;if(null!=this._getDragOptions()||this.IsItemReOrdering()){if(t=this.GetDragAffordanceClass(),e.hasClass(t))n=$(e);else if(i=this._findItem(e),this.shouldDragCurrentItem())n=i;else{if(null!=i&&this._setItemDraggable(i))return;(o=this._getSelectedItems(!0)).length>0&&(null!=i&&o.indexOf(i[0])>-1?n=i:$(o[0]).removeClass("oj-draggable"))}null!=n&&n.attr("draggable",!0)}},i.ListViewDndContext.prototype._unsetDraggable=function(e){var t,i;(null!=this._getDragOptions()||this.IsItemReOrdering())&&(t=this.GetDragAffordanceClass(),null!=(i=e.hasClass(t)?$(e):this._findItem(e))&&i.removeAttr("draggable"))},i.ListViewDndContext.prototype._invokeDndCallback=function(e,t,n,o){var s,r,a;if(s="drag"===e?this._getDragOptions():this._getDropOptions())if((r=s[t])&&"function"==typeof r)try{this.listview.ojContext._IsCustomElement()?(r(n.originalEvent,o),n.originalEvent.defaultPrevented&&n.preventDefault()):(n.dataTransfer=n.originalEvent.dataTransfer,a=r(n,o))}catch(e){i.Logger.error("Error: "+e)}else a=-1;else a=-1;return a},i.ListViewDndContext.prototype._setDragItemDataTransfer=function(e,t,i){var n,o,s=[];for(n=0;n<i.length;n++)(o=this.listview._getDataForItem(i[n]))&&(o.innerHTML&&o.tagName&&"LI"==o.tagName?s.push(o.innerHTML):s.push(o));return s.length>0?(this._setDragItemData(e.originalEvent,t,s),this.SetDragItemImage(e.originalEvent,i),{items:s}):null},i.ListViewDndContext.prototype._setDragItemData=function(e,t,i){var n,o,s;if(n=e.dataTransfer,o=JSON.stringify(i),"string"==typeof t)n.setData(t,o);else if(t)for(s=0;s<t.length;s++)n.setData(t[s],o);n.setData(this.GetDragSourceType(),this.listview.element.get(0).id)},i.ListViewDndContext.prototype.SetDragItemImage=function(e,t){var i,n,o,s,r,a,l=Number.MAX_VALUE,u=0,h=0;if(i=e.target,t.length>1){for((n=$(document.createElement("ul"))).get(0).className=this.listview.element.get(0).className,n.addClass(this.GetDragImageClass()).css({width:this.listview.element.css("width"),height:this.listview.element.css("height")}),o=0;o<t.length;o++)l=Math.min(l,t[o].offsetTop);for(o=0;o<t.length;o++)s=t[o].offsetTop-l,r=t[o].offsetWidth,(a=$(t[o].cloneNode(!0))).removeClass("oj-selected oj-focus oj-hover").css({position:"absolute",top:s,width:r}),n.append(a)}else $(i).hasClass(this.GetDragAffordanceClass())?(s=0,$.contains(t[0],i.offsetParent)&&(s=i.offsetTop),u=Math.max(0,i.offsetLeft-t[0].offsetLeft)+i.offsetWidth/2,h=s+i.offsetHeight/2):(u=Math.max(0,e.offsetX),h=Math.max(0,e.offsetY)),(a=$(t[0].cloneNode(!0))).removeClass("oj-selected oj-focus oj-hover").addClass("oj-drag"),(n=$(document.createElement("ul"))).get(0).className=this.listview.element.get(0).className,n.addClass(this.GetDragImageClass()).css({width:this.GetDragImageWidth(t[0]),height:2*t[0].offsetHeight}).append(a);this.listview.isCardLayout()&&n.addClass("oj-listview-card-layout"),$("body").append(n),this.m_dragImage=n,e.dataTransfer.setDragImage(n.get(0),u,h)},i.ListViewDndContext.prototype.GetDragImageWidth=function(e){return this.listview.element.css("width")},i.ListViewDndContext.prototype.GetDefaultDataType=function(){return"text/ojlistview-items-data"},i.ListViewDndContext.prototype._handleDragStart=function(e){var t,i,n,o,s;if((null!=(t=this._getDragOptions())||this.IsItemReOrdering())&&(i=null!=t?t.dataTypes:this.GetDefaultDataType(),$(e.target).hasClass(this.GetDragAffordanceClass())||this.shouldDragCurrentItem()?(n=[]).push(this._findItem(e.target)[0]):n=this._getSelectedItems(!0),n.length>0))return this.m_dragItems=n,this.m_currentDragItem=$(n[0]),!!(o=this._setDragItemDataTransfer(e,i,n))&&(-1===(s=this._invokeDndCallback("drag","dragStart",e,o))?void 0:s)},i.ListViewDndContext.prototype._handleDrag=function(e){return this._invokeDndCallback("drag","drag",e)},i.ListViewDndContext.prototype._destroyDragImage=function(){null!=this.m_dragImage&&(this.m_dragImage.remove(),this.m_dragImage=null)},i.ListViewDndContext.prototype._handleDragEnd=function(e){var t;if(null!=this.m_currentDragItem&&null!=this.m_dragItems)for(this.m_currentDragItem.find("."+this.GetDragAffordanceClass()).removeAttr("draggable"),this.m_currentDragItem.removeClass("oj-drag oj-draggable").removeAttr("draggable"),t=0;t<this.m_dragItems.length;t++)$(this.m_dragItems[t]).removeClass(this.GetDragItemClass()).css("display","");this._cleanupDropTarget(),this._destroyDragImage(),this._unsetSelectionDraggable(),this._invokeDndCallback("drag","dragEnd",e),this.m_itemsDragged=this.m_dragItems,this.m_dragImage=null,this.m_currentDragItem=null,this.m_dragItems=null,this.listview._doBlur()},i.ListViewDndContext.prototype._matchDragDataType=function(e){var t,i,n,o,s;if((i=this._getDropOptions())&&i.dataTypes)for(o="string"==typeof(n=i.dataTypes)?[n]:n,t=e.originalEvent.dataTransfer.types,s=0;s<t.length;s++)if(o.indexOf(t[s])>=0)return!0;return!1},i.ListViewDndContext.prototype._invokeDropCallback=function(e,t,i){var n=this._invokeDndCallback("drop",e,t,i);return void 0!==n&&-1!==n||this._matchDragDataType(t)&&t.preventDefault(),n},i.ListViewDndContext.prototype._createDropTarget=function(e){var t;return null==this.m_dropTarget&&((t=$(e.get(0).cloneNode(!1))).addClass("oj-drop").removeClass("oj-drag oj-draggable oj-hover oj-focus oj-selected").css({display:"block",height:e.outerHeight(),width:e.outerWidth()}),this.m_dropTarget=t),this.m_dropTarget},i.ListViewDndContext.prototype._cleanupGroupItem=function(){null!=this.m_currentDropItem&&-1===this.m_dropTargetIndex&&this.m_currentDropItem.children("."+this.listview.getGroupItemStyleClass()).removeClass("oj-drop")},i.ListViewDndContext.prototype._cleanupEmptyList=function(){null!=this.m_currentDropItem&&this.m_currentDropItem.hasClass(this.listview.getEmptyTextStyleClass())&&(this.m_currentDropItem.removeClass("oj-drop"),this.m_currentDropItem.get(0).textContent=this.listview._getEmptyText())},i.ListViewDndContext.prototype._cleanupDropTarget=function(){null!=this.m_dropTarget&&(this.m_dropTarget.css("height","0"),this.m_dropTarget.remove(),this.m_dropTarget=null),this._cleanupEmptyList(),this._cleanupGroupItem()},i.ListViewDndContext.prototype._handleDragEnter=function(e){var t,i;if(t=this._findItem(e.target),-1!=(i=this._invokeDropCallback("dragEnter",e,{item:t.get(0)})))return i},i.ListViewDndContext.prototype._setCurrentDropItem=function(e){null!=this.m_currentDropItem&&this.m_currentDropItem.removeClass("oj-valid-drop oj-invalid-drop"),this.m_currentDropItem=e,this.m_currentDropItem.addClass("oj-valid-drop")},i.ListViewDndContext.prototype._setAccInfo=function(e,t){var i,n,o;null==(i=e.attr("aria-label"))&&(i=e.text()),n="accessibleReorder"+t.charAt(0).toUpperCase()+t.substr(1)+"Item",o=this.listview.ojContext.getTranslatedString(n,{item:i}),this.listview._setAccInfoText(o)},i.ListViewDndContext.prototype._adjustGroupItemStyle=function(){null==this.m_maxHeightAdjusted&&this.listview._isTouchSupport()&&(this.listview.element.find("ul."+this.listview.getGroupStyleClass()).each(function(e){$(this).attr("oldMaxHeight",$(this).css("maxHeight").toString()),$(this).css("maxHeight",1e4)}),this.m_maxHeightAdjusted="adjusted")},i.ListViewDndContext.prototype._restoreGroupItemStyle=function(){this.listview._isTouchSupport()&&this.listview.element.find("ul."+this.listview.getGroupStyleClass()).each(function(e){$(this).css("maxHeight",parseInt($(this).attr("oldMaxHeight"),10)),$(this).removeAttr("oldMaxHeight")}),this.m_maxHeightAdjusted=null},i.ListViewDndContext.prototype._handleDragOver=function(e){var t,i,n,o,s,r;if(this._adjustGroupItemStyle(),null!=this.m_dragItems&&"none"!=$(this.m_dragItems[0]).css("display")){if(t=$(this.m_dragItems[0]),-1===(o=this._invokeDropCallback("dragOver",e,{item:t.get(0)}))&&this.IsItemReOrdering()||!1===o||e.isDefaultPrevented()){for(i=this._createDropTarget(t),n=0;n<this.m_dragItems.length;n++)$(this.m_dragItems[n]).addClass(this.GetDragItemClass()).css("display","none");i.insertBefore(t),this.m_dropTargetIndex=i.index()}}else null!=(t=this._findItem(e.target))&&t.length>0?-1===(o=this._invokeDropCallback("dragOver",e,{item:t.get(0)}))&&this.IsItemReOrdering()||!1===o||e.isDefaultPrevented()?(t.hasClass(this.listview.getItemStyleClass())?(this._cleanupGroupItem(),t.hasClass("oj-drop")||(i=this._createDropTarget(t),s=t.index(),null==this.m_dropTargetIndex||this.m_dropTargetIndex<s?(i.insertAfter(t),this.m_dropPosition="after"):(i.insertBefore(t),this.m_dropPosition="before"),this._setAccInfo(t,this.m_dropPosition),this._setCurrentDropItem(t),this.m_dropTargetIndex=i.index())):(this._cleanupDropTarget(),t.children("."+this.listview.getGroupItemStyleClass()).addClass("oj-drop"),this._setCurrentDropItem(t),this.m_dropTargetIndex=-1,this.m_dropPosition="inside",this._setAccInfo(t,this.m_dropPosition)),e.preventDefault()):$(e.target).hasClass(this.listview.getGroupStyleClass())||(t.addClass("oj-invalid-drop"),this._cleanupDropTarget()):null!=(r=this.listview.element.children("."+this.listview.getEmptyTextStyleClass()))&&r.length>0&&(r.addClass("oj-drop"),r.get(0).textContent="",this._setCurrentDropItem(r),e.preventDefault());return o},i.ListViewDndContext.prototype._isDndEventInElement=function(e,t){var i,n;return i=t.getBoundingClientRect(),(n=e.originalEvent).clientX>=i.left&&n.clientX<i.right&&n.clientY>=i.top&&n.clientY<i.bottom},i.ListViewDndContext.prototype._handleDragLeave=function(e){var t,i;if(null!=this.m_currentDropItem)return null!=(t=this._findItem(e.target))&&t.length>0?(t.removeClass("oj-valid-drop oj-invalid-drop"),i=this._invokeDropCallback("dragLeave",e,{item:t.get(0)}),!this._isDndEventInElement(e,e.currentTarget)&&t.hasClass("oj-drop")&&(this._cleanupDropTarget(),this._restoreGroupItemStyle())):this._isDndEventInElement(e,e.currentTarget)||this._cleanupEmptyList(),-1!=i?i:void 0},i.ListViewDndContext.prototype._handleDrop=function(e){var t,i,n;if(null!=this.m_currentDropItem)return t=e.originalEvent.dataTransfer.getData(this.GetDragSourceType()),i=this.m_currentDropItem.hasClass(this.listview.getEmptyTextStyleClass())?{}:{item:this.m_currentDropItem.get(0),position:this.m_dropPosition},this.IsItemReOrdering()&&t===this.listview.element.get(0).id?i.reorder=!0:i.reorder=!1,null!=this.m_currentDropItem&&this.m_currentDropItem.removeClass("oj-valid-drop"),this._cleanupDropTarget(),this._restoreGroupItemStyle(),this._destroyDragImage(),n=this._invokeDropCallback("drop",e,i),i.reorder&&(i.items=null==this.m_dragItems?this.m_itemsDragged:this.m_dragItems,this.listview.Trigger("reorder",e,this.CreateReorderPayload(i.items,i.position,i.item)),e.preventDefault()),this.m_currentDropItem=null,this.m_dropTargetIndex=-1,this.m_dropPosition=null,this.m_itemsDragged=null,-1===n?void 0:n},i.ListViewDndContext.prototype.CreateReorderPayload=function(e,t,i){return{items:e,position:t,reference:i}},i.ListViewDndContext.prototype.prepareContextMenu=function(e){var t,i,n=this;this.IsItemReOrdering()&&(t=$(e),this.m_contextMenu!=e&&(this.m_contextMenu=e,"OJ-MENU"===e.tagName?(e.addEventListener("ojBeforeOpen",this._handleContextMenuBeforeOpen.bind(this)),e.addEventListener("ojAction",this._handleContextMenuSelect.bind(this))):(t.on("ojbeforeopen",this._handleContextMenuBeforeOpen.bind(this)),t.on("ojselect",this._handleContextMenuSelect.bind(this)))),i=this._getCommands(e,function(e,t){var i=n._buildContextMenuItem(t,e.tagName);"OJ-OPTION"===e.tagName?(e.innerHTML=i.get(0).innerHTML,$(e).attr("data-oj-command",i.attr("data-oj-command"))):(i.get(0).className=$(e).get(0).className,$(e).replaceWith(i))}),this.m_menuItemsSet=i,i.length>0&&t.data("oj-ojMenu")&&("OJ-MENU"===e.tagName?e.refresh():$(e).ojMenu("refresh")))},i.ListViewDndContext.prototype._getDndContextMenuItemSelector=function(){var e=this,t="",i=["cut","copy","paste","paste-before","paste-after","pasteBefore","pasteAfter"];return this.m_dndMenuItemSelector||(i.forEach(function(n,o){t+="[data-oj-command="+e.GetCommandPrefix()+n+"],",t+="[data-oj-command="+n+"]",o<i.length-1&&(t+=",")}),this.m_dndMenuItemSelector=t),this.m_dndMenuItemSelector},i.ListViewDndContext.prototype._getCommands=function(e,t){var n,o;return o=this,n=[],$(e).find(this._getDndContextMenuItemSelector()).each(function(){var e;0===$(this).children("a").length?0==$(this).attr("data-oj-command").indexOf(o.GetCommandPrefix())&&(e=$(this).attr("data-oj-command").substring(o.GetCommandPrefix().length),t&&t(this,e)):(e=$(this).attr("data-oj-command"))==i.ListViewDndContext.PASTE_BEFORE_COMMAND?e="paste-before":e==i.ListViewDndContext.PASTE_AFTER_COMMAND&&(e="paste-after"),e&&n.push(e)}),n},i.ListViewDndContext.prototype._buildContextMenuItem=function(e,t){return"paste-before"===e?this._buildContextMenuListItem(i.ListViewDndContext.PASTE_BEFORE_COMMAND,t):"paste-after"===e?this._buildContextMenuListItem(i.ListViewDndContext.PASTE_AFTER_COMMAND,t):this._buildContextMenuListItem(e,t)},i.ListViewDndContext.prototype._buildContextMenuListItem=function(e,t){var i=$(document.createElement(t));return i.attr("data-oj-command",e),i.append(this._buildContextMenuLabel(e,"OJ-OPTION"===t)),i},i.ListViewDndContext.prototype._buildContextMenuLabel=function(e,t){var i="label"+e.charAt(0).toUpperCase()+e.slice(1),n=document.createTextNode(this.listview.ojContext.getTranslatedString(i));return t?n:$('<a href="#"></a>').append(n)},i.ListViewDndContext.prototype._handleCut=function(e){var t;null!=this.m_clipboard&&$(this.m_clipboard).removeClass(this.GetCutStyleClass()),t=this.GetCutItems(e),this.listview.ojContext.element.focus(),$(t).addClass(this.GetCutStyleClass()),this.m_clipboard=t,this.listview.Trigger("cut",e,{items:t})},i.ListViewDndContext.prototype.GetCutItems=function(e){return this._getSelectedItems()},i.ListViewDndContext.prototype._handleCopy=function(e){var t;null!=this.m_clipboard&&$(this.m_clipboard).removeClass(this.GetCutStyleClass()),t=this._getSelectedItems(),this.m_clipboard=t,this.listview.Trigger("copy",e,{items:t})},i.ListViewDndContext.prototype._handlePaste=function(e,t,i){this.listview.Trigger("paste",e,{item:t.get(0)}),$(this.m_clipboard).removeClass(this.GetCutStyleClass()),this.listview.Trigger("reorder",e,this.CreateReorderPayload(this.m_clipboard,i,t.get(0))),this.m_clipboard=null},i.ListViewDndContext.prototype._handleContextMenuSelect=function(e,t){if(null!=this.m_contextMenuItem)switch((t?t.item:$(e.target)).attr("data-oj-command")){case i.ListViewDndContext.CUT_COMMAND:this._handleCut(e);break;case i.ListViewDndContext.COPY_COMMAND:this._handleCopy(e);break;case i.ListViewDndContext.PASTE_COMMAND:var n=!0;case i.ListViewDndContext.PASTE_BEFORE_COMMAND:var o=!0;case i.ListViewDndContext.PASTE_AFTER_COMMAND:var s="after";n?s="inside":o&&(s="before"),this._handlePaste(e,this.m_contextMenuItem,s),this.m_contextMenuItem=null}},i.ListViewDndContext.prototype._appendToMenuContainer=function(e,t){null!=this.m_menuItemsSet&&("paste-before"==t?t=i.ListViewDndContext.PASTE_BEFORE_COMMAND:"paste-after"==t&&(t=i.ListViewDndContext.PASTE_AFTER_COMMAND),e.find("[data-oj-command='"+t+"']").removeClass("oj-disabled"))},i.ListViewDndContext.prototype._handleContextMenuBeforeOpen=function(e,t){var i,n;(i=$(e.target)).find(this._getDndContextMenuItemSelector()).addClass("oj-disabled"),null!=(n=t?t.openOptions.launcher:e.detail.openOptions.launcher)&&null!=this.m_menuItemsSet&&0!=this.m_menuItemsSet.length?(n.children().first().hasClass(this.listview.getGroupItemStyleClass())?null!=this.m_clipboard&&this._appendToMenuContainer(i,"paste"):(this._appendToMenuContainer(i,"cut"),this._appendToMenuContainer(i,"copy"),null!=this.m_clipboard&&(this._appendToMenuContainer(i,"paste-before"),this._appendToMenuContainer(i,"paste-after"))),"OJ-MENU"!=i.get(0).tagName&&i.ojMenu("refresh"),this.m_contextMenuItem=n):"OJ-MENU"!=i.get(0).tagName&&i.ojMenu("refresh")},i.ListViewDndContext.prototype.HandleKeyDown=function(e){var t,n,o,s,r;if((e.ctrlKey||e.metaKey)&&((t=e.keyCode)===i.ListViewDndContext.X_KEY||t===i.ListViewDndContext.C_KEY||i.ListViewDndContext.V_KEY)){if(!this.IsItemReOrdering())return!1;if(null==(n=this.listview.ojContext._GetContextMenu()))return!1;if(0==(o=this._getCommands(n)).length)return!1;if(t===i.ListViewDndContext.X_KEY&&o.indexOf("cut")>-1)return this._handleCut(e),!0;if(t===i.ListViewDndContext.C_KEY&&o.indexOf("copy")>-1)return this._handleCopy(e),!0;if(t===i.ListViewDndContext.V_KEY&&null!=this.m_clipboard&&((s=$(this._getActiveItem())).children().first().hasClass(this.listview.getGroupItemStyleClass())?o.indexOf("paste")>-1&&(r="inside"):o.indexOf("paste-before")>-1?r="before":o.indexOf("paste-after")>-1&&(r="after"),null!=r))return this._handlePaste(e,s,r),!0}return!1},i.ListViewDndContext.prototype.shouldDragCurrentItem=function(){return!1},i.ListViewDndContext.prototype.GetDragSourceType=function(){return"text/ojlistview-dragsource-id"},wt.prototype.setup=function(e,t){var i=!1;return e?(i=!!this._layout(),this._reorderTilesForLayout()):(this._addBusyStateFunc&&(this._busyStateResolveFunc=this._addBusyStateFunc("performing layout (setup)")),this._layoutCycleOnStartFunc&&this._layoutCycleOnStartFunc(),this._transitionStart(t),i=this._transitionLayout()),i},wt.prototype.destroy=function(){this._resolveBusyState();for(var e=this._elem,t=this._getTileChildren(),i=0;i<t.length;i++){var n=t[i].style;this._rtl?n.right="":n.left="",n.top=""}e.removeChild(this._sizeDivWrapper),this._sizeDivWrapper=null,this._sizeDiv=null,this._hideTilesFunc=null,this._resolveBusyStateFunc=null,this._arMovedInfolets=null,this._arInfoletsToResize=null,this._arInfoletsToShow=null,this._arInfoletsToHide=null,this._arFireHideOnEnd=null,this._elem=null,this._addStyleClassNameFunc=null,this._removeStyleClassNameFunc=null,this._getSizeStyleClassNameFunc=null,this._getTileSpanFunc=null,this._showTileOnEndFunc=null,this._hideTileOnEndFunc=null,this._startAnimationFunc=null,this._layoutOnEndFunc=null,this._layoutCycleOnStartFunc=null,this._layoutCycleOnEndFunc=null,this._sortTilesOriginalOrderFunc=null,this._subtreeAttachedFunc=null,this._subtreeDetachedFunc=null,this._addBusyStateFunc=null},wt.prototype.resizeTile=function(e,t){var i=this._elem.querySelector(e);if(i){this._arInfoletsToResize||(this._arInfoletsToResize=[]);var n=this._arInfoletsToResize;n.push(i),n.push(t),this._resizingInfolet=!0,this._queueRelayout()}},wt.prototype.insertTileDomElem=function(e,t){var i=this._getTileChildren();this._sortTilesOriginalOrderFunc&&this._sortTilesOriginalOrderFunc(i);var n=null;t>=0&&t<i.length&&(n=i[t]),this._elem.insertBefore(e,n),this._queueRelayout()},wt.prototype.showTile=function(e){var t=this._elem.querySelector(e);if(t){this._arInfoletsToShow||(this._arInfoletsToShow=[]),this._arInfoletsToShow.push(t),this._showingInfolets=!0;var i=wt;this._layoutPhase!==i._PHASE_HIDE&&this._layoutPhase!==i._PHASE_LAYOUT?this._queueRelayout():this._showingInfolets=!1}},wt.prototype.hideTile=function(e){var t=this._elem.querySelector(e);t&&(this._arInfoletsToHide||(this._arInfoletsToHide=[]),this._arInfoletsToHide.push(t),this._hidingInfolets=!0,this._queueRelayout())},wt.prototype.resizeNotify=function(){this._resizingInfolet||this._hidingInfolets||this._showingInfolets||(this._addBusyStateFunc&&(this._busyStateResolveFunc=this._addBusyStateFunc("performing layout (resizeNotify)")),this._layoutCycleOnStartFunc&&this._layoutCycleOnStartFunc(),this._transitionStart(!1),this._transitionLayout())},wt.prototype.getCellSize=function(){return this._cellSize},wt.prototype.isAnimationEnabled=function(){if(this._temporarilyDisableAnimation)return!1;if(!this._cachedAnimationEnabled){if(this._automationEnabled)this._animationEnabled=!1;else{var e=wt,t=e._agentTypeAndVersion[0],i=e._agentTypeAndVersion[1];this._animationEnabled=e._isMinimumAgentMet(t,i,["gecko",16,"trident",6,"webkit",533.1])}this._cachedAnimationEnabled=!0}return this._animationEnabled},wt.prototype.isInLayoutCycle=function(){return null!=this._layoutPhase||null!=this._arMovedInfolets&&this._arMovedInfolets.length>0},wt.prototype.finishLayoutCycle=function(){this._temporarilyDisableAnimation=!0,this._removeStyleClassFromTiles(this._transitionShowFromStyleClass);for(var e=wt,t=this._getTileChildren(),i=0;i<t.length;i++){var n=t[i];n._afrCellSize&&delete n._afrCellSize}this._hideTilesInternalTimeout?(clearTimeout(this._hideTilesInternalTimeout),this._hideTilesInternalTimeout=null,this._handleHideTransitionEnd(null)):this._hideTilesAnimationStarted?(this._hideTilesAnimationStarted=!1,this._handleHideTransitionEnd(null)):this._showTilesTimeout?(clearTimeout(this._showTilesTimeout),this._showTilesTimeout=null,this._showTiles()):this._layoutPhase===e._PHASE_LAYOUT||null!=this._arMovedInfolets&&this._arMovedInfolets.length>0?this._handleTransitionEnd(null):this._layoutPhase===e._PHASE_SHOW&&this._handleShowTransitionEnd(null),this._temporarilyDisableAnimation=!1},wt._getElemSize=function(e){var t=wt,i=t._getComputedStyle(e),n=t._getCSSLengthAsInt(i.marginLeft)+t._getCSSLengthAsInt(i.marginRight),o=t._getCSSLengthAsInt(i.marginTop)+t._getCSSLengthAsInt(i.marginBottom);return{w:e.offsetWidth+n,h:e.offsetHeight+o}},wt._getElemInsets=function(e){var t=wt,i=t._getComputedStyle(e);return{paddingLeft:t._getCSSLengthAsInt(i.paddingLeft),paddingRight:t._getCSSLengthAsInt(i.paddingRight),paddingTop:t._getCSSLengthAsInt(i.paddingTop),paddingBottom:t._getCSSLengthAsInt(i.paddingBottom),borderLeftWidth:t._getCSSLengthAsInt(i.borderLeftWidth),borderRightWidth:t._getCSSLengthAsInt(i.borderRightWidth),borderTopWidth:t._getCSSLengthAsInt(i.borderTopWidth),borderBottomWidth:t._getCSSLengthAsInt(i.borderBottomWidth)}},wt._getComputedStyle=function(e){var t=e.ownerDocument.defaultView;return t?t.getComputedStyle(e,null):e.currentStyle},wt._getCSSLengthAsInt=function(e){if(e.length>0&&"auto"!=e){var t=parseInt(e,10);return isNaN(t)&&(t=0),t}return 0},wt._arrayIndexOf=function(e,t){if(e)for(var i=0;i<e.length;i++)if(e[i]==t)return i;return-1},wt._isMinimumAgentMet=function(e,t,i){var n=i.length;if(n%2==0)for(var o=0;o<=n-2;o+=2){if(e==i[o])return t>=i[1+o]}return!1},wt._getAgentTypeAndVersion=function(e){var t=wt._parseFloatVersion,i=null,n=-1,o=e.toLowerCase();if(-1!=o.indexOf("msie")||-1!=o.indexOf("trident")){i="trident";var s=t(o,/trident\/(\d+[.]\d+)/);-1!=s?n=s:(-1==(s=t(o,/msie (\d+\.\d+);/))&&(s=t(o,/msie (\d+\.\d+)b;/)),n=s-4),null!=document.documentMode&&(n=Math.min(n,document.documentMode-4))}else-1!=o.indexOf("applewebkit")?(i="webkit",n=t(o,/applewebkit\/(\d+([.]\d+)*)/)):-1!=o.indexOf("gecko/")&&(i="gecko",n=t(o,/rv:(\d+[.]\d+)/));return[i,n]},wt._parseFloatVersion=function(e,t){var i=e.match(t);if(i){var n=i[1];if(n)return parseFloat(n)}return-1},wt._compareTilePositions=function(e,t){return e.startRow>t.startRow?1:e.startRow<t.startRow?-1:e.startCol>t.startCol?1:e.startCol<t.startCol?-1:0},wt.prototype._queueRelayout=function(){this._hideTilesTimeout||(this._layoutPhase?this._queuedRelayout||(this._queuedRelayout=!0):(this._addBusyStateFunc&&(this._busyStateResolveFunc=this._addBusyStateFunc("performing layout")),this._hideTilesTimeout=setTimeout(this._hideTilesFunc,0)))},wt.prototype._getTileChildren=function(){for(var e=this._elem.querySelectorAll(this._tilesSelector),t=[],i=0;i<e.length;i++){var n=e[i],o=n.style;n.offsetWidth>0&&n.offsetHeight>0&&"hidden"!=o.visibility&&t.push(n)}return t},wt.prototype._transitionLayout=function(){var e=this._arMovedInfolets,t=this._layout();if(this._arInfoletsToResize){var i=this._arInfoletsToResize;t||(t=[]);for(var n=wt,o=0;o<i.length;o+=2){var s=i[o];n._arrayIndexOf(t,s)<0&&t.push(s)}}var r=!1;!t||t.length<1?(!e||e.length<1)&&(this._arMovedInfolets=null,this._handleTransitionEnd(null),r=!0):this._arMovedInfolets=t;var a=null!=t&&t.length>0;return this.isAnimationEnabled()||r||this._handleTransitionEnd(null),a},wt.prototype._layout=function(){var e=this._elem,t=this._getTileChildren();this._sortTilesOriginalOrderFunc&&this._sortTilesOriginalOrderFunc(t),this._cellSize=null;var i=null;this._cols=0,this._rows=1,this._occupancyMap=null;var n=[],o=[],s=[],r=[],a=this._rtl,l=wt,u=l._getElemInsets(e),h=0,d=[];this._arTilePositions=d;for(var c=0;c<t.length;c++){(D=t[c])._afrCellSize&&(this._cellSize=D._afrCellSize,delete D._afrCellSize);var p=this._getTileSpanFunc(D);if(this._cellSize||(this._cellSize=this._calcCellSize(D,p)),i=this._cellSize,!this._occupancyMap){var _=e.offsetWidth-u.paddingLeft-u.paddingRight-u.borderLeftWidth-u.borderRightWidth;this._cols=Math.max(Math.floor(_/i.w),1),this._initOccupancyMap(this._cols,this._rows),h=this._cols}p.colSpan>h&&(h=p.colSpan),p.colSpan>this._cols&&(p.colSpan=this._cols);for(var m=!1,g=0;g<this._rows;g++){for(var f=0;f<this._cols;f++)if(this._fits(f,g,p)){var v={top:(A=D.style).top};a?v.right=A.right:v.left=A.left,o.push(v);var C=this._calcPosition(D,f,g,p,i,u);s.push(C),a&&r.push(f),m=!0,d.push({startCol:f,startRow:g,tile:D});break}if(m)break;g===this._rows-1&&this._addRow()}}if(i){var y=this._sizeDiv.style;if(y){var b=h*i.w,S=this._rows*i.h,E=y.width?wt._getCSSLengthAsInt(y.width.toString()):0,T=y.height?wt._getCSSLengthAsInt(y.height.toString()):0;(E>b||T>S)&&(this._afrSizeDivDims={},this._afrSizeDivDims.width=b+"px",this._afrSizeDivDims.height=S+"px"),y.width=(E>b?E:b)+"px",y.height=(T>S?T:S)+"px"}}for(c=0;c<t.length;c++){var D,A=(D=t[c]).style;C=s[c];""!=(v=o[c]).top&&(a&&parseInt(C.right,10)!==parseInt(v.right,10)||!a&&parseInt(C.left,10)!==parseInt(v.left,10)||parseInt(C.top,10)!==parseInt(v.top,10))&&(n.push(D),this._layoutTransition&&l._arrayIndexOf(this._arInfoletsToResize,D)<0&&this._animateLayout(D,this._reorderTransitionStarted?"reorder":"move")),A.top=C.top,this._rtl?A.right=C.right:A.left=C.left}return n.length<1&&(n=null),n},wt.prototype._updateSizeDivOnEnd=function(){if(this._afrSizeDivDims){var e=this._sizeDiv.style;e.width=this._afrSizeDivDims.width,e.height=this._afrSizeDivDims.height,delete this._afrSizeDivDims}},wt.prototype._reorderTilesForLayout=function(){var e=this._arTilePositions;this._arTilePositions=null;var t=wt;e=e.sort(t._compareTilePositions);for(var i=this._getTileChildren(),n=0;n<i.length;n++){var o=i[n],s=e[n].tile;if(o!=s){this._subtreeDetachedFunc(s),o.parentNode.insertBefore(s,o),this._subtreeAttachedFunc(s);var r=t._arrayIndexOf(i,s);r>n&&(i.splice(r,1),i.splice(n,0,s))}}},wt.prototype._initOccupancyMap=function(e,t){this._occupancyMap=[];for(var i=this._occupancyMap,n=0;n<t;n++){var o=[];i.push(o);for(var s=0;s<e;s++)o[s]=!1}},wt.prototype._addRow=function(){this._rows++;var e=[];this._occupancyMap.push(e);for(var t=0;t<this._cols;t++)e[t]=!1},wt.prototype._fits=function(e,t,i){for(var n=i.colSpan,o=i.rowSpan,s=t;s<t+o;s++){s>=this._rows&&this._addRow();for(var r=e;r<e+n;r++){if(r>=this._cols)return!1;if(this._occupancyMap[s][r])return!1}}return!0},wt.prototype._calcPosition=function(e,t,i,n,o,s){for(var r=n.colSpan,a=n.rowSpan,l=this._occupancyMap,u=i;u<i+a;u++)for(var h=t;h<t+r;h++)l[u][h]=!0;var d={},c=s.paddingTop+i*o.h;if(d.top=c+"px",this._rtl){var p=s.paddingRight+t*o.w;d.right=p+"px"}else{var _=s.paddingLeft+t*o.w;d.left=_+"px"}return d},wt.prototype._removeStyleClassFromTiles=function(e){for(var t=this._getTileChildren(),i=0;i<t.length;i++)this._removeStyleClassNameFunc(t[i],e)},wt.prototype._animateLayout=function(e,t){if(this.isAnimationEnabled()){var i=this;i._startAnimationFunc(e,t).then(function(){i._layoutTransition&&i._handleTransitionEnd(e)})}},wt.prototype._transitionStart=function(e){this._layoutTransition||(this._reorderTransitionStarted=e,this._layoutTransition=!0)},wt.prototype._handleTransitionEnd=function(e){var t=!0;if(this._arMovedInfolets){var i=this._arMovedInfolets;if(e){for(var n=0;n<i.length;n++)if(e===i[n]){this._arMovedInfolets=[],i=this._arMovedInfolets;break}}else this.isAnimationEnabled()||(this._arMovedInfolets=[],i=this._arMovedInfolets);i.length>0&&(t=!1)}if(t){if(this._arInfoletsToResize){var o=this._arInfoletsToResize;if(this._arInfoletsToResize=null,this.isAnimationEnabled())for(n=0;n<o.length;n+=2)o[n]}this._reorderTransitionStarted&&(this._reorderTransitionStarted=!1);var s=wt;if(this._layoutTransition=!1,this._resizingInfolet=!1,this._hidingInfolets=!1,this._showingInfolets=!1,this._reorderTilesForLayout(),this._layoutOnEndFunc&&this._layoutOnEndFunc(),this._updateSizeDivOnEnd(),this._layoutPhase===s._PHASE_LAYOUT)if(this.isAnimationEnabled()){var r=this;this._showTilesTimeout=setTimeout(function(){r._showTiles()},0)}else this._showTiles();else this._layoutPhase||this._layoutCycleOnEndFunc&&this._layoutCycleOnEndFunc(this._resolveBusyStateFunc)}},wt.prototype._calcCellSize=function(e,t){var i=wt._getElemSize(e);return{w:i.w/t.colSpan,h:i.h/t.rowSpan}},wt.prototype._hideTiles=function(){this._hideTilesTimeout&&(clearTimeout(this._hideTilesTimeout),this._hideTilesTimeout=null),this._layoutCycleOnStartFunc&&this._layoutCycleOnStartFunc();var e=wt;if(this._layoutPhase=e._PHASE_HIDE,this._arInfoletsToHide&&this.isAnimationEnabled()){var t=this._arInfoletsToHide,i=this;this._hideTilesAnimationStarted=!0;for(var n=0;n<t.length;n++){var o=t[n];this._startAnimationFunc(o,"remove").then(function(){i._handleHideTransitionEnd(o)})}}else this._handleHideTransitionEnd(null)},wt.prototype._handleHideTransitionEnd=function(e){this._hideTilesInternalTimeout?(clearTimeout(this._hideTilesInternalTimeout),this._hideTilesInternalTimeout=null):this._hideTilesAnimationStarted&&(this._hideTilesAnimationStarted=!1);var t=wt;if(e){var i=e;if(o=this._arInfoletsToHide){for(var n=0;n<o.length;n++){if((s=o[n])===i){o.splice(n,1),this._arFireHideOnEnd||(this._arFireHideOnEnd=[]),(r=this._arFireHideOnEnd).push(i);break}}o.length<1&&(this._arInfoletsToHide=null)}}else if(!this.isAnimationEnabled()){var o;if(o=this._arInfoletsToHide){for(n=0;n<o.length;n++){var s=o[n];this._arFireHideOnEnd||(this._arFireHideOnEnd=[]),(r=this._arFireHideOnEnd).push(s)}this._arInfoletsToHide=null}}if(!this._arInfoletsToHide){if(this._arFireHideOnEnd){var r=this._arFireHideOnEnd;for(n=0;n<r.length;n++){var a=(i=r[n]).style;this._rtl?a.right="":a.left="",a.top="",this._hideTileOnEndFunc&&this._hideTileOnEndFunc(i)}this._arFireHideOnEnd=null}if(this._layoutPhase=t._PHASE_LAYOUT,this._transitionStart(!1),this._arInfoletsToResize){var l=this._arInfoletsToResize;for(n=0;n<l.length;n+=2){i=l[n];var u=l[n+1],h=this._getSizeStyleClassNameFunc(i);this.isAnimationEnabled()&&(i._afrCellSize=this._cellSize,this._animateLayout(i,"resize")),this._removeStyleClassNameFunc(i,h),this._addStyleClassNameFunc(i,u)}}this._transitionLayout()}},wt.prototype._showTiles=function(){this._showTilesTimeout&&(clearTimeout(this._showTilesTimeout),this._showTilesTimeout=null);var e=wt;if(this._layoutPhase=e._PHASE_SHOW,this._arInfoletsToShow&&this.isAnimationEnabled())for(var t=this,i=this._arInfoletsToShow,n=0;n<i.length;n++){var o=i[n];this._removeStyleClassNameFunc(o,this._transitionShowFromStyleClass),this._startAnimationFunc(o,"insert").then(function(){t._handleShowTransitionEnd(o)})}else{if(this._arInfoletsToShow)for(i=this._arInfoletsToShow,n=0;n<i.length;n++){o=i[n];this._removeStyleClassNameFunc(o,this._transitionShowFromStyleClass)}this._handleShowTransitionEnd(null)}},wt.prototype._handleShowTransitionEnd=function(e){if(e){var t=e;if(n=this._arInfoletsToShow){for(var i=0;i<n.length;i++){if((o=n[i])===t){n.splice(i,1),this._showTileOnEndFunc&&this._showTileOnEndFunc(t);break}}n.length<1&&(this._arInfoletsToShow=null)}}else if(!this.isAnimationEnabled()){var n;if(n=this._arInfoletsToShow){for(i=0;i<n.length;i++){var o=n[i];this._showTileOnEndFunc&&this._showTileOnEndFunc(o)}this._arInfoletsToShow=null}}this._arInfoletsToShow||(this._layoutPhase=null,this._layoutCycleOnEndFunc&&this._layoutCycleOnEndFunc(this._resolveBusyStateFunc),this._queuedRelayout&&(this._queuedRelayout=!1,this._queueRelayout()))},wt.prototype._resolveBusyState=function(){this._busyStateResolveFunc&&(this._busyStateResolveFunc(),this._busyStateResolveFunc=null)},wt._PHASE_HIDE=1,wt._PHASE_LAYOUT=2,wt._PHASE_SHOW=3,function(){i.__registerWidget("oj.ojMasonryLayout",$.oj.baseComponent,{defaultElement:"<div>",widgetEventPrefix:"oj",options:{reorderHandle:null,animateStart:null,animateEnd:null,beforeInsert:null,insert:null,beforeRemove:null,remove:null,beforeResize:null,resize:null,beforeReorder:null,reorder:null},_ComponentCreate:function(){this._super(),this.element.addClass("oj-masonrylayout oj-component"),this.options.disabled&&i.Logger.warn(d),this.reorderHandleEventNamespace=this.eventNamespace+"ReorderHandle",this._menu={},this._menu.usermenu=!1,this._menu.$container=!1,this._menu.$elemCut=!1,this._menu.$elemPasteBefore=!1,this._menu.$elemPasteAfter=!1,this._initMenu(),this._applyMenu(),this._setup(!0)},refresh:function(){this._super();var e="rtl"===this._GetReadingDirection()!==this._bRTL;e&&this._destroyMLCommon(),this._setup(e)},_NotifyShown:function(){(this._super(),this._needsSetup)?this._setup(this._needsSetup[0]):this._mlCommon.setup(!0)},_NotifyAttached:function(){(this._super(),this._needsSetup)?this._setup(this._needsSetup[0]):this._mlCommon.setup(!0)},_NotifyContextMenuGesture:function(e,t,i){this._prepareContextMenuBeforeOpen(t);var n=this._menu.$container.children().not(".oj-helper-hidden");n&&n.length>0&&this._OpenContextMenu(t,i,{launcher:$(t.target).closest(":tabbable")})},_setup:function(e){if(!this._canCalculateSizes()){var t=!1;return this._needsSetup&&(t=this._needsSetup[0]),void(this._needsSetup=[e||t])}this._needsSetup=null,this._bRTL="rtl"===this._GetReadingDirection(),this._bTouchSupported=i.DomUtils.isTouchSupported();var n=this.element,o=this.options;if(e){var s=this;if(this._showTileOnEndFunc=function(e){s._showTileOnEnd(e)},this._hideTileOnEndFunc=function(e){s._hideTileOnEnd(e)},this._startAnimationFunc=function(e,t){return s._startAnimation(e,t)},this._layoutOnEndFunc=function(){s._layoutOnEnd()},this._layoutCycleOnStartFunc=function(){s._layoutCycleOnStart()},this._layoutCycleOnEndFunc=function(e){s._layoutCycleOnEnd(e)},!this._mlCommon){var r={};r.tiles=u;var a={};a.transitionShowFromStyleClass=h;var l={};l.addStyleClassName=C,l.removeStyleClassName=y,l.getSizeStyleClassName=b,l.getTileSpan=S,l.showTileOnEndFunc=this._showTileOnEndFunc,l.hideTileOnEndFunc=this._hideTileOnEndFunc,l.startAnimationFunc=this._startAnimationFunc,l.layoutOnEndFunc=this._layoutOnEndFunc,l.layoutCycleOnStartFunc=this._layoutCycleOnStartFunc,l.layoutCycleOnEndFunc=this._layoutCycleOnEndFunc,l.sortTilesOriginalOrderFunc=E,l.subtreeAttached=i.Components.subtreeAttached,l.subtreeDetached=i.Components.subtreeDetached,l.addBusyState=function(e){return s._addBusyState(e)},this._applyTileStyleClass(),this._saveTilesOriginalOrder(),this._mlCommon=new wt(n[0],this._bRTL,"enabled"===i.Config.getAutomationMode(),r,a,l)}this._handleDragStartFunc=function(e){s._handleDragStart(e)},this._handleDragEnterFunc=function(e){s._handleDragEnter(e)},this._handleDragOverFunc=function(e){s._handleDragOver(e)},this._handleDragLeaveFunc=function(e){s._handleDragLeave(e)},this._handleDragEndFunc=function(e){s._handleDragEnd(e)},this._handleDropFunc=function(e){s._handleDrop(e)},o.reorderHandle&&this._setupReorderHandles()}else{this._applyTileStyleClass();var d=n.children();this._tearDownReorderHandlesForElem(d),this._setupReorderHandlesForElem(d),this._checkTilesOriginalOrder()}this._mlCommon.setup(e),e&&(this._handleResizeFunc=function(e,t){s._handleResize()},i.DomUtils.addResizeListener(n[0],this._handleResizeFunc,f))},_destroy:function(){this._clearMenu();var e=this.element;i.DomUtils.removeResizeListener(e[0],this._handleResizeFunc),this._handleResizeFunc=null,this._restoreTilesOriginalOrder();for(var t=this._getTileElements(),n=t.length,o=0;o<n;o++){delete t[o]._jetDataMasonryOriginalOrder}this._destroyMLCommon(),e.removeClass("oj-masonrylayout oj-component"),this.options.reorderHandle&&this._tearDownReorderHandles(),e.children("."+a).removeClass(a),this._handleDragStartFunc=null,this._handleDragEnterFunc=null,this._handleDragOverFunc=null,this._handleDragLeaveFunc=null,this._handleDragEndFunc=null,this._handleDropFunc=null,this._showTileOnEndFunc=null,this._hideTileOnEndFunc=null,this._startAnimationFunc=null,this._layoutOnEndFunc=null,this._layoutCycleOnStartFunc=null,this._layoutCycleOnEndFunc=null,this._arTilesToInsert=null,this._super()},_setOption:function(e,t,n){this.element,this.options;var o=!1,s=!1;switch(e){case"reorderHandle":this._tearDownReorderHandles(),o=!0;break;case"disabled":i.Logger.warn(d);break;case"contextMenu":i.DomUtils.isTouchSupported()||(this._clearMenu(),t&&this._initMenu(t));break;case"translations":i.Object.compareValues(t,this.options[e])||(s=!0)}this._super(e,t,n),s&&this._refreshMenu(),o&&t&&this._setupReorderHandles()},resizeTile:function(e,t){var i=this._mlCommon;i.isInLayoutCycle()&&i.finishLayoutCycle();var n=$(e),o=n[0],s=b(o);if(t==s)throw new Error("JET MasonryLayout: Unable to resize child "+e+" to style class "+t+" because "+t+" is already applied.");var r={tile:n,previousSizeStyleClass:s,sizeStyleClass:t};!1!==this._trigger("beforeResize",null,r)&&(this._arResizingTiles||(this._arResizingTiles=[]),this._arResizingTiles.push(o,s,t),i.resizeTile(e,t))},insertTile:function(e,t){var n=this._mlCommon;n.isInLayoutCycle()&&n.finishLayoutCycle(),isNaN(t)&&(t=-1);var o=$(e),s=o[0];o.addClass(a);var r={tile:o,index:t};if(!1!==this._trigger("beforeInsert",null,r)){s._jetDataTileInsertIndex=t,n.isAnimationEnabled()&&o.addClass(h);var l=s.style;l.top="-1px",this._bRTL?l.right="-1px":l.left="-1px",this._insertTileOriginalOrder(s,t),n.insertTileDomElem(s,t),i.Components.subtreeAttached(s),this._arTilesToInsert||(this._arTilesToInsert=[]),this._arTilesToInsert.push(e)}},removeTile:function(e){var t=this._mlCommon;t.isInLayoutCycle()&&t.finishLayoutCycle();var n=$(e),o=n[0];if(i.FocusUtils.containsFocus(o)){var s=this._getTileElements(!0),r=s.indexOf(o);r>0&&(this._deletingTileWithFocusPrev=s[r-1])}var a={tile:n};!1!==this._trigger("beforeRemove",null,a)&&t.hideTile(e)},_handleResize:function(){this._bDragging||this._inLayoutCycle||this._mlCommon.resizeNotify()},_showTileOnEnd:function(e){var t=$(e),i=e._jetDataTileInsertIndex;delete e._jetDataTileInsertIndex,this.options.reorderHandle&&this._setupReorderHandlesForElem(t);var n={tile:t,index:i};this._eventsToFire.push("insert",n)},_hideTileOnEnd:function(e){var t=$(e);this.options.reorderHandle&&this._tearDownReorderHandlesForElem(t),t.removeClass(a),i.Components.subtreeDetached(e),e.parentNode.removeChild(e),this._removeTileOriginalOrder(e);var n={tile:t};this._eventsToFire.push("remove",n)},_startAnimation:function(e,t){var n=(i.ThemeUtils.parseJSONFromFontFamily("oj-masonrylayout-option-defaults")||{}).animation,o=n?n[t]:null;return i.AnimationUtils.startAnimation(e,t,o,this)},_layoutOnEnd:function(){if(this._arTilesToInsert){for(var e=this._mlCommon,t=this._arTilesToInsert,i=0;i<t.length;i++){var n=t[i];e.showTile(n)}this._arTilesToInsert=null}if(this._arResizingTiles){var o=this._arResizingTiles;for(i=0;i<o.length;i+=3){var s=o[i],r=o[i+1],a=o[i+2],l={tile:$(s),previousSizeStyleClass:r,sizeStyleClass:a};this._eventsToFire.push("resize",l)}this._arResizingTiles=null}this._bDragging&&(this._bDragMoveTransition?this._handleDragMoveTransitionEnd():this._bDragEndTransition&&this._handleDragEndTransitionEnd())},_layoutCycleOnStart:function(){this._inLayoutCycle=!0,this._layoutStartActiveDomElem=null,this._eventsToFire=[];var e=document.activeElement;e&&i.DomUtils.isAncestor(this.element[0],e)&&(this._layoutStartActiveDomElem=e)},_layoutCycleOnEnd:function(e){this._inLayoutCycle=!1;var t=this.element[0];if(this._layoutStartActiveDomElem){var n=this._layoutStartActiveDomElem;if(this._layoutStartActiveDomElem=null,this._deletingTileWithFocusPrev){var o=this._deletingTileWithFocusPrev;if(this._deletingTileWithFocusPrev=null,o&&i.DomUtils.isAncestor(t,o)){var s=this._getTileElements(t,!0),r=s.indexOf(o);r>=0&&r<s.length-1?i.FocusUtils.focusFirstTabStop(s[r+1]):i.FocusUtils.focusFirstTabStop(o)}}else i.DomUtils.isAncestor(t,n)?i.FocusUtils.focusElement(n):i.FocusUtils.focusFirstTabStop(t)}if(e&&e(),this._eventsToFire){var a=this._eventsToFire;this._eventsToFire=null;for(var l=0;l<a.length;l+=2){var u=a[l],h=a[l+1];this._trigger(u,null,h)}}},_destroyMLCommon:function(){var e=this._mlCommon;e&&e.destroy(),this._mlCommon=null},_canCalculateSizes:function(){var e=document.createElement("div"),t=e.style;t.width="10px",t.height="10px";var i=this.element[0];i.appendChild(e);var n=!1;try{n=e.offsetWidth>0&&e.offsetHeight>0}catch(e){}return i.removeChild(e),n},_getTileElements:function(e){for(var i=this.element.children(u),o=i.length,s=[],r=0;r<o;r++){var a=i[r];if(!e||e&&a!==this._dropSite){var l=a.style;l.visibility!==t&&l.display!==n&&s.push(a)}}return s},_saveTilesOriginalOrder:function(){var e=this._getTileElements();if(e)for(var t=0;t<e.length;t++){var i=e[t];i._jetDataMasonryOriginalOrder||(i._jetDataMasonryOriginalOrder=t+1)}},_checkTilesOriginalOrder:function(){var e=this._getTileElements();if(e)for(var t=0;t<e.length;t++){var i=e[t];i._jetDataMasonryOriginalOrder||this._insertTileOriginalOrder(i,t)}},_restoreTilesOriginalOrder:function(){var e=this._getTileElements(),t=this._getTileElements();E(t);for(var n=0;n<e.length;n++){var o=e[n],s=t[n];if(o!=s){i.Components.subtreeDetached(s),o.parentNode.insertBefore(s,o),i.Components.subtreeAttached(s);var r=e.indexOf(s);r>n&&(e.splice(r,1),e.splice(n,0,s))}}},_insertTileOriginalOrder:function(e,t){var i=this._getTileElements();if(t<0&&(t=i.length),i)for(var n=0;n<i.length;n++){var o=i[n];o._jetDataMasonryOriginalOrder&&o._jetDataMasonryOriginalOrder>=t+1&&o._jetDataMasonryOriginalOrder++}e._jetDataMasonryOriginalOrder=t+1},_removeTileOriginalOrder:function(e){if(e._jetDataMasonryOriginalOrder){var t=this._getTileElements();if(t)for(var i=0;i<t.length;i++){var n=t[i];n._jetDataMasonryOriginalOrder&&n._jetDataMasonryOriginalOrder>e._jetDataMasonryOriginalOrder&&n._jetDataMasonryOriginalOrder--}delete e._jetDataMasonryOriginalOrder}},_applyTileStyleClass:function(){var e=this.element.children();(e=(e=e.not("."+a)).filter(function(e,t){return t.className.match(l)})).addClass(a)},_initMenu:function(e){var t=this._GetContextMenu();if(e||t||this._IsCustomElement()||(t=this.element.attr("contextmenu"))&&(this.options.contextMenu="#"+t),e||t){if(t=e||t,"function"==$.type(t)){try{t=t()}catch(e){t=null}$.type(t)}if(t){var i=$(t);if(i){i.css("display",n);var o=this._menu;if(!o)return;o.$container=i,o.usermenu=!0}this._menu.usermenu&&e&&this._applyMenu()}}},_applyMenu:function(){if(this._menu&&this._menu.usermenu&&this.options.reorderHandle){var e=this._menu.$container,t=this;"OJ-MENU"===e[0].tagName?e[0].addEventListener("ojAction",this._handleContextMenuSelect.bind(this)):e.on("ojselect",this._handleContextMenuSelect.bind(this));var i=e.find("[data-oj-command]"),n=!1;i.each(function(){var i=$(this).attr("data-oj-command");i.indexOf("oj-masonrylayout-")>=0&&(i=i.slice("oj-masonrylayout-".length));var o="OJ-MENU"===e[0].tagName?this.tagName:"li",s=t._buildContextMenuItem(i,o);$(this).attr("id",s.attr("id")),"OJ-OPTION"===this.tagName?(this.innerHTML=s.get(0).innerHTML,$(this).attr("data-oj-command",s.attr("data-oj-command"))):(s.get(0).className=$(this).get(0).className,$(this).replaceWith(s)),n=!0}),n&&("OJ-MENU"===e[0].tagName?e[0].refresh():e.ojMenu("refresh")),this._menu.$elemCut=e.find("#"+c),this._menu.$elemPasteBefore=e.find("#"+p),this._menu.$elemPasteAfter=e.find("#"+_)}},_clearMenu:function(){var e=this._menu;e&&e.usermenu&&(e.usermenu=!1,"OJ-MENU"===e.$container[0].tagName?e.$container[0].removeEventListener("ojAction",this._handleContextMenuSelect):e.$container.off("ojselect"),e.$container=null)},_refreshMenu:function(){this._clearMenu(),this._initMenu(),this._applyMenu()},_prepareContextMenuBeforeOpen:function(e){var t=this.element,i=e.originalEvent.target,n=this.options.reorderHandle,o=!1;if(n){var r=$(i).closest(n);r&&r.length>0&&(o=!0)}var a=D(i,t[0]);if(this._menu.tile=a,this._menu.usermenu){var l=this._menu.cutTile,u=!1,h=this._menu.$elemCut;if(h){var d=h.hasClass("oj-helper-hidden");o||d?o&&d&&(h.removeClass("oj-helper-hidden"),u=!0):(h.addClass("oj-helper-hidden"),u=!0);var c=h.hasClass(s),p=!1;l&&a===l&&(p=!0),p&&!c?(h.addClass(s),u=!0):!p&&c&&(h.removeClass(s),u=!0)}var _=this._menu.$elemPasteBefore;if(_){var m=_.hasClass("oj-helper-hidden");o||m?o&&m&&(_.removeClass("oj-helper-hidden"),u=!0):(_.addClass("oj-helper-hidden"),u=!0);var g=_.hasClass(s);p=!1;l&&a!==l&&a!==A(l)||(p=!0),p&&!g?(_.addClass(s),u=!0):!p&&g&&(_.removeClass(s),u=!0)}var f=this._menu.$elemPasteAfter;if(f){var v=f.hasClass("oj-helper-hidden");o||v?o&&v&&(f.removeClass("oj-helper-hidden"),u=!0):(f.addClass("oj-helper-hidden"),u=!0);var C=f.hasClass(s);p=!1;l&&l!==a&&l!==A(a)||(p=!0),p&&!C?(f.addClass(s),u=!0):!p&&C&&(f.removeClass(s),u=!0)}if(u){var y=this._menu.$container;"OJ-MENU"===y[0].tagName?y[0].refresh():y.ojMenu("refresh")}}},_buildContextMenuItem:function(e,t){var i=m[e],n=$(document.createElement(t));return n.attr("id",i),n.attr("data-oj-command",e),n.append(this._buildContextMenuLabel(e,"OJ-OPTION"===t)),n},_buildContextMenuLabel:function(e,t){var i=g[e],n=document.createTextNode(this.getTranslatedString(i));return t?n:$('<a href="#"></a>').append(n)},_menuCut:function(e){e&&(this._menu.cutTile=e)},_menuPaste:function(e,t){if(e&&this._menu.cutTile){var i=this._menu.cutTile;this._menu.cutTile=!1,this._doPaste(i,e,t)}},_doPaste:function(e,t,i){var n=e._jetDataMasonryOriginalOrder-1,o=$(e),s={tile:o,fromIndex:n};if(!1!==this._trigger("beforeReorder",null,s)){this._removeTileOriginalOrder(e);var r=t._jetDataMasonryOriginalOrder-1;i||r++;var a=this.element[0];if(i)this._insertTileOriginalOrder(e,r),a.insertBefore(e,t);else{var l=A(t);this._insertTileOriginalOrder(e,r),a.insertBefore(e,l)}this._mlCommon.setup(!0);var u={tile:o,fromIndex:n,toIndex:r};this._trigger("reorder",null,u)}},_handleContextMenuSelect:function(e,t){var i=(t?t.item:$(e.target)).attr("id");i===c?this._menuCut(this._menu.tile):i===p?this._menuPaste(this._menu.tile,!0):i===_&&this._menuPaste(this._menu.tile,!1)},_getTileIndex:function(e){var t=this._getTileElements(!0);E(t);for(var i=t.length,n=0;n<i;n++)if(t[n]===e)return n;return-1},_setupReorderHandles:function(){var e=this.element,t=e.children();this._setupReorderHandlesForElem(t),e.on("dragstart"+this.reorderHandleEventNamespace,this._handleDragStartFunc).on("dragenter"+this.reorderHandleEventNamespace,this._handleDragEnterFunc).on("dragover"+this.reorderHandleEventNamespace,this._handleDragOverFunc).on("dragleave"+this.reorderHandleEventNamespace,this._handleDragLeaveFunc).on("dragend"+this.reorderHandleEventNamespace,this._handleDragEndFunc).on("drop"+this.reorderHandleEventNamespace,this._handleDropFunc)},_setupReorderHandlesForElem:function(e){var t=this.options;e.filter(t.reorderHandle).attr(o,"true").addClass(r),e.find(t.reorderHandle).attr(o,"true").addClass(r)},_tearDownReorderHandles:function(){var e=this.element,t=e.children();this._tearDownReorderHandlesForElem(t),e.off(this.reorderHandleEventNamespace)},_tearDownReorderHandlesForElem:function(e){var t=this.options;e.filter(t.reorderHandle).removeAttr(o).removeClass(r),e.find(t.reorderHandle).removeAttr(o).removeClass(r)},_handleDragStart:function(e){var t=this.options;if(t.reorderHandle){var i=e.originalEvent.target,n=$(i).closest(t.reorderHandle);if(!n||n.length<1)return}if(t.reorderHandle&&!this._bDragging){i=e.target;var o=this.element,s=D(i,o[0]);if(s){var r=this._getTileIndex(s);s._jetDataMasonryDragSourceIndex=r;var a={tile:$(s),fromIndex:r};if(!1!==this._trigger("beforeReorder",null,a)){var l=e.originalEvent;this._dragStart(s,l.pageX,l.pageY,l.dataTransfer)}}}},_handleDragEnter:function(e){if(this._bDragging){var t=e.originalEvent,n=t.relatedTarget,o=this.element[0],s=!1;if(n)s=o!=n&&!i.DomUtils.isAncestor(o,n);else if(this._dragLeftMasonryLayout){var r=document.elementFromPoint(t.clientX,t.clientY);s=r&&(r==o||i.DomUtils.isAncestor(o,r))}if(s)if(this._dragLeftMasonryLayout=!1,this._draggedTile){if(this._dropSite){$(this._dropSite).css("display",""),this._mlCommon.setup(!1,!0)}}else t.dataTransfer.dropEffect="none"}},_handleDragOver:function(e){if(!this._bDragging)return!1;var t=e.originalEvent;return t.dataTransfer.dropEffect="move",this._dragMove(t.pageX,t.clientX,t.clientY),e.preventDefault(),!1},_handleDragLeave:function(e){if(this._bDragging){var t=e.originalEvent,o=t.relatedTarget,s=this.element[0],r=!1;if(o)r=s!=o&&!i.DomUtils.isAncestor(s,o);else{var a=document.elementFromPoint(t.clientX,t.clientY);r=a&&a!=s&&!i.DomUtils.isAncestor(s,a)}if(r)if(this._dragLeftMasonryLayout=!0,this._dropSite)$(this._dropSite).css("display",n),this._mlCommon.setup(!1,!0)}},_clearDragStartHideTileTimeout:function(){if(this._dragStartHideTileTimeout){clearTimeout(this._dragStartHideTileTimeout),this._dragStartHideTileTimeout=null;var e=this._draggedTile;e&&$(e).removeClass("oj-drag")}},_handleDragEnd:function(e){if(this._clearDragStartHideTileTimeout(),this._bDragging&&!this._bDropping){var t=this._draggedTile;if(t&&this._dropSite){var n=this._dropSite,o=this.element[0];if(i.DomUtils.isAncestor(o,t))$(n).css("display",""),this._removeTileOriginalOrder(n),n.parentNode.removeChild(n),$(t).css("display",""),this._insertTileOriginalOrder(t,t._jetDataMasonryOriginalOrder-1),this._mlCommon.setup(!1,!0);delete t._jetDataMasonryDragSourceIndex}this._draggedTile=null,this._dropSite=null,this._prevTileUnderPoint=null,this._prevCellUnderPoint=null,this._bDragMoveTransition=!1,this._bMouseMoved=!1,this._dragOffset=null,this._bDragEndTransition=!1,this._bDragging=!1}},_handleDrop:function(e){if(!this._bDragging)return!1;var t=this._mlCommon;t.isInLayoutCycle()&&t.finishLayoutCycle(),this._clearDragStartHideTileTimeout();var i=e.originalEvent;return this._drop(this._draggedTile,i.pageX,i.pageY),e.stopPropagation(),!1},_dragStart:function(e,t,o,s){this._bDragging=!0,this._bDropping=!1,this._bMouseMoved=!1,this._bDragStartTileHidden=!1,this._draggedTile=e;var r=this.element[0],l=b(e);this._dropSite=document.createElement("div");var u=this._dropSite;u._jetDataMasonryOriginalOrder=e._jetDataMasonryOriginalOrder,u.className=l+" oj-drop "+a;var h=u.style,d=e.style;h.top=d.top,this._bRTL?h.right=d.right:h.left=d.left;var c=v(e);r.insertBefore(u,e);var p={left:t-c.left,top:o-c.top};this._dragOffset=p,$(e).addClass("oj-drag"),s.effectAllowed="move",s.setData("text/html",e.outerHTML),s.setDragImage(e,p.left,p.top);var _=this;this._dragStartHideTileTimeout=setTimeout(function(){_._bDragStartTileHidden=!0,d.display=n,$(e).removeClass("oj-drag"),_._dragStartHideTileTimeout=null,i.Components.subtreeHidden(e)},0)},_dragMove:function(e,t,i){if(this._bMouseMoved=!0,this._bDragStartTileHidden&&!this._bDragMoveTransition){var n=this.element[0],o=document.elementFromPoint(t,i),s=D(o,n),r=!1;if(s){var a=$(s),l=this.options.reorderHandle;if(l)if(a.is(l))r=!0;else{var u=a.find(l);r=u&&u.length>0}}var h=!1;if(null==s||s===this._dropSite||s===this._draggedTile)this._prevTileUnderPoint=null,this._prevCellUnderPoint=null;else if(this._prevTileUnderPoint&&this._prevCellUnderPoint&&this._prevTileUnderPoint!=s){var d=this._getCellPosition(t,i);d&&d.row==this._prevCellUnderPoint.row&&d.col==this._prevCellUnderPoint.col&&(h=!0)}if(s&&!h&&s!==this._dropSite&&s!==this._draggedTile&&r){var c=e-v(n).left,p=A(this._dropSite),_=c>=s.offsetLeft+.5*s.offsetWidth;if(this._removeTileOriginalOrder(this._dropSite),_&&!this._bRTL||!_&&this._bRTL){var m=A(s);m?(this._insertTileOriginalOrder(this._dropSite,m._jetDataMasonryOriginalOrder-1),n.insertBefore(this._dropSite,m)):(this._insertTileOriginalOrder(this._dropSite,s._jetDataMasonryOriginalOrder),n.appendChild(this._dropSite))}else this._insertTileOriginalOrder(this._dropSite,s._jetDataMasonryOriginalOrder-1),n.insertBefore(this._dropSite,s);if(p!==A(this._dropSite)){var g=this._mlCommon,f=s,C=this._getCellPosition(t,i);this._bDragMoveTransition=g.setup(!1,!0),this._bDragMoveTransition&&(this._prevTileUnderPoint=f,this._prevCellUnderPoint=C)}}}},_handleDragMoveTransitionEnd:function(){this._bDragMoveTransition=!1},_drop:function(t,n,o){this._bDropping=!0;var s=this.element[0],r=this._dropSite;this._dropSite=null,this._prevTileUnderPoint=null,this._prevCellUnderPoint=null,i.Components.subtreeDetached(t),s.insertBefore(t,r),s.removeChild(r),i.Components.subtreeAttached(t),t._jetDataMasonryOriginalOrder=r._jetDataMasonryOriginalOrder;var a=t.style;a.display="",i.Components.subtreeShown(t);var l=v(s),u=this._dragOffset;a.top=o-u.top-l.top+e;var h=n-u.left-l.left;if(this._bRTL?(a.right=s.offsetWidth-(h+$(t).outerWidth(!0))+e,a.left=""):a.left=h+e,this._dragOffset=null,this._bMouseMoved){var d=this._mlCommon;this._bDragEndTransition=d.setup(!1,!0)}else this._handleDragEndTransitionEnd()},_handleDragEndTransitionEnd:function(){this._bDragEndTransition=!1,this._bDragging=!1,this._bDropping=!1,this._bMouseMoved=!1,this._bDragStartTileHidden=!1;var e=this._draggedTile;this._draggedTile=null;var t=e._jetDataMasonryDragSourceIndex;delete e._jetDataMasonryDragSourceIndex;var i=this._getTileIndex(e),n={tile:$(e),fromIndex:t,toIndex:i};this._trigger("reorder",null,n)},_getCellPosition:function(e,t){var i=this._mlCommon.getCellSize(),n=null;return i&&(n={col:parseInt(e/i.w,10),row:parseInt(t/i.h,10)}),n},_addBusyState:function(e){var t=this.element,n=i.Context.getContext(t[0]).getBusyContext(),o="MasonryLayout";o+=" (id='"+t.attr("id")+"')";var s={description:o+=": "+e};return n.addBusyState(s)},getNodeBySubId:function(e){return this._super(e)},getSubIdByNode:function(e){return this._super(e)}});var e="px",t="hidden",n="none",o="draggable",s="oj-disabled",r="oj-draggable",a="oj-masonrylayout-tile",l=/oj-masonrylayout-tile-[0-9]+x[0-9]+/,u="."+a,h="oj-masonrylayout-tile-transition-show-from",d="JET MasonryLayout: 'disabled' property not supported",c="ojmasonrylayoutcut",p="ojmasonrylayoutpastebefore",_="ojmasonrylayoutpasteafter",m={cut:c,"paste-before":p,"paste-after":_},g={cut:"labelCut","paste-before":"labelPasteBefore","paste-after":"labelPasteAfter"},f=25,v=function(e){return $(e).offset()},C=function(e,t){$(e).addClass(t)},y=function(e,t){$(e).removeClass(t)},b=function(e){var t=null,i=$(e).attr("class").match(l);return i&&(t=i[0]),t},S=function(e){var t=null,i=$(e).attr("class").match(l);if(i){var n=i[0].substring(a.length+1),o=n.indexOf("x"),s=n.substring(0,o),r=n.substring(o+1);t={colSpan:wt._getCSSLengthAsInt(s),rowSpan:wt._getCSSLengthAsInt(r)}}return t},E=function(e){return e&&e.sort(T),e},T=function(e,t){return t._jetDataMasonryOriginalOrder<e._jetDataMasonryOriginalOrder?1:e._jetDataMasonryOriginalOrder<t._jetDataMasonryOriginalOrder?-1:0},D=function(e,i){for(var o=e;o;){var s=o.style;if(s&&(s.visibility===t||s.display===n))break;var r=o.parentNode;if(r===i)return o;o=r}return null},A=function(e){for(var i=e;i;){var o=i.nextSibling,s=!0;if(o){var r=o.style;!r||r.visibility!==t&&r.display!==n||(s=!1)}if(o&&1===o.nodeType&&s)return o;i=o}return null}}(),i.CustomElementBridge.registerMetadata("oj-masonry-layout","baseComponent",{properties:{reorderHandle:{type:"string"},translations:{type:"Object",properties:{labelCut:{type:"string",value:"Cut"},labelPasteAfter:{type:"string",value:"Paste After"},labelPasteBefore:{type:"string",value:"Paste Before"}}}},methods:{insertTile:{},removeTile:{},resizeTile:{}},events:{animateEnd:{},animateStart:{},beforeInsert:{},beforeRemove:{},beforeReorder:{},beforeResize:{},insert:{},remove:{},reorder:{},resize:{}},extension:{_WIDGET_NAME:"ojMasonryLayout"}}),i.CustomElementBridge.register("oj-masonry-layout",{metadata:i.CustomElementBridge.getMetadata("oj-masonry-layout")}),function(){i.__registerWidget("oj.ojMenu",$.oj.baseComponent,{defaultElement:"<ul>",delay:300,role:"menu",widgetEventPrefix:"oj",options:{menuSelector:"ul",openOptions:{display:"auto",initialFocus:"menu",launcher:null,position:{my:{horizontal:"start",vertical:"top"},offset:{x:0,y:0},at:{horizontal:"start",vertical:"bottom"},of:void 0,collision:"flipfit"}},submenuOpenOptions:{position:{my:"start top",at:"end top",collision:"flipfit"}},animateStart:null,animateEnd:null,beforeOpen:null,close:null,open:null,action:null},_ComponentCreate:function(){if(this._super(),this._focusForTesting=this._focus,this._nextForTesting=this._next,this._selectForTesting=this._select,this._IsCustomElement()){var e=this.element.parent();if(e.is("oj-option"))e.parent().is("oj-menu")&&(this._isSubmenu=!0,this._createAsSubmenu());this._isSubmenu||this._createAsTopLevelMenu();var t=this.options;t.openOptions.position=i.PositionUtils.coerceToJet(t.openOptions.position)}else{if(r&&"ul"!==this.element[0].tagName.toLowerCase())throw new Error("Cancel item supported for <ul> menus only.");this._createAsTopLevelMenu()}},_createAsTopLevelMenu:function(){var e=this;this.activeMenu=this.element,this.mouseHandled=!1,this._setupSwipeBehavior(),this.element.uniqueId().addClass("oj-menu oj-component").hide().attr({role:this.role,tabIndex:"0"}),this._on(!0,{"mousedown .oj-menu-item":function(e){this.options.disabled&&e.preventDefault()},click:function(e){this.options.disabled&&e.preventDefault()},keydown:function(e){this.options.disabled&&(e.keyCode!==$.ui.keyCode.ESCAPE&&e.keyCode!==$.ui.keyCode.TAB||(e.keyCode===$.ui.keyCode.TAB&&e.preventDefault(),this._launcher&&this._focusLauncherAndDismiss(e)))}}),this.options.disabled&&this.element.addClass("oj-disabled").attr("aria-disabled","true");var t=function(e){if(!this.focusHandled){this.focusHandled=!0;var t=$(e.currentTarget);try{this._focusIsFromPointer=!0,this._focus(e,t)}finally{this._focusIsFromPointer=!1}}}.bind(this),i=function(e){e&&e.target&&!$(e.target).is(":visible")||this._collapse(e,"eventSubtree")}.bind(this);this._on({"mousedown .oj-menu-item > a":function(e){e.preventDefault()},"click .oj-disabled > a":function(e){e.preventDefault()},click:function(e){this.mouseHandled=!1},touchstart:function(e){this.focusHandled=!1},mouseover:function(e){this.focusHandled=!1},"click .oj-menu-item:has(a)":function(e){var t=$(e.target).closest(".oj-menu-item");if(!this.mouseHandled&&t.not(".oj-disabled").length){if(this.mouseHandled=!0,e.preventDefault(),this.active&&this.active.closest(t).length&&this.active.get(0)!=t.get(0))return;t.has(".oj-menu").length?this._expand(e):(this._select(e),this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".oj-menu").length&&this._clearTimer&&this._clearTimer()))}},"mouseenter .oj-menu-item":t,"touchstart .oj-menu-item":t,mouseleave:i,"mouseleave .oj-menu":i,focus:function(e,t){if(!t){var i=this.active||this.element.children(".oj-menu-item").eq(0);this._focus(e,i)}},keydown:this._keydown,keyup:function(e){e.keyCode!=$.ui.keyCode.ENTER&&e.keyCode!=$.ui.keyCode.SPACE||(this.__spaceEnterDownInMenu=!1)}}),this._focusable({applyHighlight:!o,recentPointer:function(){return e._focusIsFromPointer},setupHandlers:function(t,i){e._focusInHandler=t,e._focusOutHandler=i}}),this._usingCallback=$.proxy(this._usingHandler,this),this._setup()},_createAsSubmenu:function(){this.element.attr(i.Components._OJ_CONTAINER_ATTR,this.widgetName),this.element.uniqueId().addClass("oj-menu oj-component oj-menu-submenu oj-menu-dropdown").hide().attr({role:this.role,tabIndex:"0"}),this._setup()},__contextMenuPressHoldJustEnded:function(e){if(!arguments.length)return t;t=e},_processOjOptions:function(){var e=this;e._maxEndIconCount=0,e._maxStartIconCount=0,e._startIconWidth=0,e._endIconWidth=0;var t=this.element.find("oj-option");$.each(t,function(t,i){i.customOptionRenderer=e._customOptionRenderer.bind(e)})},_customOptionRenderer:function(e){var t=$(e),n=this;this._clearOption(t),this._hasSubmenus=!1;for(var o=t.children("a"),s=0;s<o.length;s++){var r=$(o[s]);if("opt"===r.attr("ojmenu")){r.children().removeClass("oj-menu-item-icon").removeClass("oj-menu-item-end-icon"),r.replaceWith(r.contents());break}}if(/[^\-\u2014\u2013\s]/.test(t.text())){this._initMenuItems(t);var a=document.createElement("a");a.setAttribute("href","#"),a.setAttribute("ojmenu","opt"),(r=$(a)).uniqueId().attr({tabIndex:"-1",role:this._itemRole()}),t.prepend(a);var l=i.BaseCustomElementBridge.getSlotMap(e);$.each(["startIcon","","endIcon"],function(e,t){if(l[t])if(""===t)$.each(l[t],function(e,t){$(t).is("oj-menu")?(n._setupSubmenu(r,$(t)),this._hasSubmenus=!0):r.append(t)});else if("startIcon"===t){var i=l[t].length;n._maxStartIconCount=Math.max(n._maxStartIconCount,i),$.each(l[t],function(e,t){$(t).addClass("oj-menu-item-icon"),r.append(t),i>1&&n._positionStartIcon(t,e,i)})}else if("endIcon"===t){var o=l[t].length;n._maxEndIconCount=Math.max(n._maxEndIconCount,o),$.each(l[t],function(e,t){$(t).addClass("oj-menu-item-end-icon"),r.append(t),o>1&&n._positionEndIcon(t,e,o)})}}),1==e.disabled?(t.addClass("oj-disabled"),r.attr("aria-disabled","true")):0==e.disabled&&(t.removeClass("oj-disabled"),r.removeAttr("aria-disabled"))}else this._initDividers(t);var u=this.element.children(),h=u.filter(".oj-menu-divider");this._initDividerNeighbors(u,h)},_positionStartIcon:function(e,t,i){if(this.isRtl)var n="margin-right";else n="margin-left";var o=parseInt($(e).css(n),10);this._startIconWidth=-1*o,$(e).css(n,o*(i-t)+"px")},_positionEndIcon:function(e,t,i){if(this.isRtl)var n="margin-left",o="margin-right";else n="margin-right",o="margin-left";var s=parseInt($(e).css(n),10);this._endIconWidth=-1*parseInt($(e).css(o),10),$(e).css(n,s+this._endIconWidth*(i-t-1)+"px")},_updateMenuPadding:function(e){var t=e.children().children(),i=t.children(".oj-menu-item-icon:not(.oj-menu-cancel-icon)").length;e.toggleClass("oj-menu-icons",!!i).toggleClass("oj-menu-text-only",!i),this._maxStartIconCount&&this._maxStartIconCount>1&&this._applyAnchorIconPadding(t,this._startIconWidth,this._maxStartIconCount,!0);var n=t.children(".oj-menu-item-end-icon").length;e.toggleClass("oj-menu-end-icons",!!n),this._maxEndIconCount&&this._maxEndIconCount>1&&this._applyAnchorIconPadding(t,this._endIconWidth,this._maxEndIconCount,!1)},_applyAnchorIconPadding:function(e,t,i,n){if(this.isRtl&&n||!this.isRtl&&!n)var o="padding-right";else o="padding-left";e.each(function(){var e=parseInt($(this).css(o),10);$(this).css(o,e+t*(i-1)+"px")})},_clickAwayHandler:function(i){if("focus"===i.type||"mousedown"===i.type||"touchstart"===i.type||93==i.which||121==i.which&&i.shiftKey||93==i.keyCode){if("mousedown"===i.type&&t)return;var n=this,o=e.slice(0,e.length);$.each(o,function(e,t){if(!$(i.target).closest(t.element).length&&("keydown"===i.type||"mousedown"===i.type&&3===i.which||!$(i.target).closest(t._launcher).length||t._launcherClickShouldDismiss&&("mousedown"===i.type&&3!==i.which||"touchstart"===i.type))&&!t._dismissEvent){t._dismissEvent=i;var o=t._collapse(i,"eventSubtree");n._runOnPromise(o,function(){t._dismissEvent&&(t._launcher&&t.__dismiss(i),t._dismissEvent=null)})}})}},_setOption:function(e,t){switch(this._superApply(arguments),e){case"translations.labelCancel":case"translations":this._cancelAnchor&&this._cancelAnchor.text(this.options.translations.labelCancel)}},_destroy:function(){this.element.is(":visible")&&this.__dismiss(),this._setWhenReady("none"),this._clearTimer&&this._clearTimer(),delete this._clearTimer,this.element.removeAttr("aria-activedescendant").removeClass("oj-component").find(".oj-menu").addBack().removeClass("oj-menu oj-menu-submenu oj-menu-icons oj-menu-end-icons oj-menu-text-only").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".oj-menu-item").removeClass("oj-menu-item").removeAttr("role").children("a").removeAttr("aria-disabled").removeUniqueId().removeClass("oj-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=$(this);e.data("oj-ojMenu-submenu-icon")&&e.remove()}),this.element.find("a").removeAttr("aria-expanded"),this.element.find(".oj-menu-divider").removeClass("oj-menu-divider").removeAttr("role"),e.indexOf(this)>=0&&e.splice(e.indexOf(this),1),delete this._popupServiceEvents,delete this._usingCallback;var t=this._clearCloseDelayTimer;delete this._clearCloseDelayTimer,t&&t(),this._cancelDom&&this._cancelDom.remove(),this.element.ojHammer("destroy"),this._super()},_keydown:function(e){var t,i,n,o,s,r=!0;function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}switch(e.keyCode){case $.ui.keyCode.HOME:this._move("first","first",e);break;case $.ui.keyCode.END:this._move("last","last",e);break;case $.ui.keyCode.UP:this._previous(e);break;case $.ui.keyCode.DOWN:this._next(e);break;case $.ui.keyCode.LEFT:case $.ui.keyCode.RIGHT:e.keyCode===$.ui.keyCode.RIGHT^this.isRtl?this.active&&!this.active.is(".oj-disabled")&&this._expand(e):this._collapse(e,"active");break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this._handleEnterSpace(e),this.__spaceEnterDownInMenu=!0;var l=this;setTimeout(function(){l.__spaceEnterDownInMenu=!1},100);break;case $.ui.keyCode.TAB:e.preventDefault(),this._launcher&&this._focusLauncherAndDismiss(e);break;case $.ui.keyCode.ESCAPE:if(this._launcher){var u=this.element.attr("aria-activedescendant"),h="#"+this.element.attr("id")+">*>a";u&&!$("#"+u).is(h)?this._collapse(e,"active"):this._focusLauncherAndDismiss(e)}else this._collapse(e,"active");break;default:r=!1,i=this.previousFilter||"",n=String.fromCharCode(e.keyCode),o=!1,clearTimeout(this.filterTimer),n===i?o=!0:n=i+n,s=new RegExp("^"+a(n),"i"),t=this.activeMenu.children(".oj-menu-item").filter(function(){return s.test($(this).children("a").text())}),(t=o&&-1!==t.index(this.active.next())?this.active.nextAll(".oj-menu-item"):t).length||(n=String.fromCharCode(e.keyCode),s=new RegExp("^"+a(n),"i"),t=this.activeMenu.children(".oj-menu-item").filter(function(){return s.test($(this).children("a").text())})),t.length?(this._focus(e,t),t.length>1?(this.previousFilter=n,this.filterTimer=setTimeout(function(){delete this.previousFilter}.bind(this),1e3)):delete this.previousFilter):delete this.previousFilter}r&&e.preventDefault()},_handleEnterSpace:function(e){this.active&&!this.active.is(".oj-disabled")&&(this.active.children("a[aria-haspopup='true']").length?this._expand(e):this._select(e))},refresh:function(){this._super(),this._setup();var e=this.element;if(e.is(":visible")){var t=e.data(n);if(t&&(t.of instanceof $.Event||t.of instanceof Window||$(t.of).is(":visible")))e.position(t),e.find(".oj-menu").each(function(){var e=$(this);e.is(":visible")&&(t=e.data(n))&&e.position(t)})}},_setup:function(){this.isRtl="rtl"===this._GetReadingDirection(),this._IsCustomElement()?(this._processOjOptions(),this._isSubmenu&&(this.options.openOptions.launcher=this.element.parent()),this._updateMenuPadding(this.element)):this._setupWidgetMenus(),this.active&&!$.contains(this.element[0],this.active[0])&&this._blur()},_setupWidgetMenus:function(){var e=this,t=this.element.find(this.options.menuSelector),i=t.add(this.element),n=i.children();this._hasSubmenus=!!t.length,n.filter(".oj-menu-divider").has("a").removeClass("oj-menu-divider oj-menu-item").removeAttr("role");var o=n.filter(":not(.oj-menu-item):has(a)"),s=o.children("a");this._initMenuItems(o),this._initAnchors(s);var r=n.filter(function(e,t){var i=$(t);return i.is(":not(.oj-menu-item)")&&!/[^\-\u2014\u2013\s]/.test(i.text())});this._initDividers(r),this._initDividerNeighbors(n,r),n.filter(".oj-disabled").children("a").attr("aria-disabled","true"),n.filter(":not(.oj-disabled)").children("a").removeAttr("aria-disabled"),t.filter(":not(.oj-menu)").addClass("oj-menu oj-menu-submenu oj-menu-dropdown").hide().attr({role:this.role,"aria-hidden":"true"}).each(function(){var t=$(this);e._setupSubmenu(e._getSubmenuAnchor(t),t)}),i.each(function(){e._updateMenuPadding($(this))})},_setupSubmenu:function(e,t){var i=$("<span>");i.addClass("oj-menu-submenu-icon oj-component-icon").data("oj-ojMenu-submenu-icon",!0),e.attr("aria-haspopup","true").attr("aria-expanded","false").append(i),t.attr("aria-labelledby",e.attr("id"))},_initMenuItems:function(e){e.addClass("oj-menu-item").attr("role","presentation")},_initAnchors:function(e){e.uniqueId().attr({tabIndex:"-1",role:this._itemRole()})},_initDividers:function(e){e.addClass("oj-menu-divider").attr("role","separator")},_initDividerNeighbors:function(e,t){e.removeClass("oj-menu-item-before-divider oj-menu-item-after-divider"),t.prev().addClass("oj-menu-item-before-divider"),t.next().addClass("oj-menu-item-after-divider")},_clearOption:function(e){e.removeClass("oj-menu-item-before-divider oj-menu-item-after-divider oj-menu-divider oj-menu-item").removeAttr("role")},_getSubmenuAnchor:function(e){return e.prev("a")},_getSubmenuWidget:function(e){var t=i.Components.__GetWidgetConstructor(e,"ojMenu");return t&&t("instance")},_itemRole:function(){return"menuitem"},_getAdjacentDividers:function(e,t){var i=e.prev(".oj-menu-divider").add(e.next(".oj-menu-divider"));return t&&(i=i.add(e)),i},_focus:function(e,t){e&&"focus"===e.type||this._clearTimer&&this._clearTimer(),t=t.first(),this._makeActive(t,e);var i=t.parent(),n=i.closest(".oj-menu-item");i.find(".oj-focus-ancestor").removeClass("oj-focus-ancestor"),this._getAdjacentDividers(n,!0).addClass("oj-focus-ancestor"),e&&"keydown"===e.type?this._close():this._clearTimer=this._setTimer(function(){delete this._clearTimer,this._close()},this._getSubmenuBusyStateDescription("closing"),this.delay);var o=t.children(".oj-menu");o.length&&e&&/^mouse/.test(e.type)&&!this.active.hasClass("oj-disabled")&&this._startOpening(e,o),this.activeMenu=t.parent()},_makeActive:function(e,t){if(!e.is(this.active)){var i=this.active?this.active:$(),n=e.children("a");this.active=e,this.element.attr("aria-activedescendant",n.attr("id")),this._focusOutHandler(i),this._focusInHandler(e),this._getAdjacentDividers(i).removeClass("oj-focus"),this._getAdjacentDividers(e).addClass("oj-focus"),this._trigger("_activeItem",t,{previousItem:i,item:e,privateNotice:"The _activeItem event is private.  Do not use."})}},_removeActive:function(e){if(this.active){var t=this.active;this.active=null,this.element.removeAttr("aria-activedescendant"),this._focusOutHandler(t),this._getAdjacentDividers(t).removeClass("oj-focus"),this._trigger("_activeItem",e,{previousItem:t,item:$(),privateNotice:"The _activeItem event is private.  Do not use."})}},_blur:function(e){this._clearTimer&&this._clearTimer(),this._removeActive(e)},_focusLauncherAndDismiss:function(e,t){this._launcher.focus(),this.__dismiss(e,t)},__dismiss:function(e,t){if(!this._isOperationPending("close","__dismiss",[e,t])){var n=this.element.is(":visible");this._setWhenReady("close");var o={};o[i.PopupService.OPTION.POPUP]=this.element,o[i.PopupService.OPTION.CONTEXT]={event:e,selectUi:t,isOpen:n},i.PopupService.getInstance().close(o)}},_getDefaultAnimation:function(e,t){var n,o;return(n=(i.ThemeUtils.parseJSONFromFontFamily("oj-menu-option-defaults")||{}).animation)&&n[e]&&(o=n[e][t]),o},_isAnimationDisabled:function(){return!this._IsCustomElement()||this._disableAnimation},_replaceAnimationOptions:function(e,t){if(t&&e&&"string"!=typeof e){var i=JSON.stringify(e);for(var n in t)i=i.replace(new RegExp(n,"g"),t[n]);e=JSON.parse(i)}return e},_runOnPromise:function(e,t){return e?e.then(t):t()},_beforeCloseHandler:function(e){var t=e[i.PopupService.OPTION.POPUP];if(this._IsCustomElement()){var n=e[i.PopupService.OPTION.CONTEXT],o=n.selectUi;if(o&&o.item.length){var s={},r=o.item[0],a=n.event;a&&(s.originalEvent=a instanceof $.Event?a.originalEvent:a);var l={detail:s,cancelable:!0,bubbles:!0},u=new CustomEvent("ojAction",l);r.dispatchEvent(u),n.event=u}}if(!this._isAnimationDisabled()){var h=this._getDefaultAnimation(this._sheetMenuIsOpen?"sheet":"dropdown","close"),d=i.AnimationUtils.startAnimation(t[0],"close",i.PositionUtils.addTransformOriginAnimationEffectsOption(t,h),this);return d.then(function(){t.hide()}),d}t.hide()},_afterCloseHandler:function(t){var o=t[i.PopupService.OPTION.CONTEXT],s=o.event,r=o.selectUi,a=o.isOpen;(this.element.removeData(n),this._launcher=void 0,this._sheetMenuIsOpen=!1,!this._IsCustomElement()&&r)&&(s=this._trigger2("select",s,r).event);a&&this._trigger("close",s,{}),this._currentOpenOptions=null,e.indexOf(this)>=0&&e.splice(e.indexOf(this),1)},getCurrentOpenOptions:function(){return $.extend(!0,{},this._currentOpenOptions||this.options.openOptions)},open:function(t,o){var s=arguments[2];if(!this._isOperationPending("open","open",[t,o,s])){this._dismissEvent&&(this._disableAnimation=!0,this.__dismiss(this._dismissEvent),this._dismissEvent=null),(o=$.extend({},this.options.openOptions,o)).position=$.extend({},o.position),this._IsCustomElement()&&this._setPosition(o.position),s=$.extend({},this.options.submenuOpenOptions,s);var r=this._currentOpenOptions;this._currentOpenOptions=o,i.PositionUtils._normalizeEventForPosition(t),this._launcherClickShouldDismiss=this.element[0].__openingContextMenu;var a=this._trigger2("beforeOpen",t,{openOptions:o});if(!a.proceed)return this._currentOpenOptions=r,void(this._disableAnimation=!1);this.element.is(":visible")&&(this._disableAnimation=!0,this._currentOpenOptions=r,this.__dismiss(a.event),this._dismissEvent=null,this._currentOpenOptions=o);var d=o.launcher;if(!(d=this._IsCustomElement()?"string"===$.type(d)?$(document.getElementById(d)):$(d):"string"===$.type(d)?$(d):d)||!d.length)return i.Logger.warn("When calling Menu.open(), must specify openOptions.launcher via the component option, method param, or beforeOpen listener.  Ignoring the call."),this._currentOpenOptions=null,void(this._disableAnimation=!1);var c,p,_=this._isDropDown(o.display);if(this._toggleCancelDom(_),_){if(this.element.addClass("oj-menu-dropdown").removeClass("oj-menu-sheet"),p=l,this._IsCustomElement()?(o.position=i.PositionUtils.coerceToJet(o.position,this.options.openOptions.position),c=i.PositionUtils.coerceToJqUi(o.position)):c=o.position,(c=i.PositionUtils.normalizeHorizontalAlignment(c,this.isRtl)).of=i.PositionUtils.normalizePositionOf(c.of,d,t),null==c.of)return i.Logger.warn("position.of passed to Menu.open() is 'event', but the event is null.  Ignoring the call."),this._currentOpenOptions=null,void(this._disableAnimation=!1)}else this.element.addClass("oj-menu-sheet").removeClass("oj-menu-dropdown"),p=u,c={my:"bottom",at:h,of:window,collision:"flipfit"};var m=this.element[0],g=e.slice(0,e.length);$.each(g,function(e,i){i.element[0]!==m&&(i._collapse(t,"eventSubtree"),i._launcher&&i.__dismiss(t))}),this._submenuPosition=i.PositionUtils.normalizeHorizontalAlignment(s.position,this.isRtl);var f=this._usingCallback;$.isFunction(c.using)&&c.using!==f&&(c.origUsing=c.using),c.using=f,this.element.data(n,c),this._setWhenReady("open");var v={};v[i.PopupService.OPTION.POPUP]=this.element,v[i.PopupService.OPTION.LAUNCHER]=d,v[i.PopupService.OPTION.POSITION]=c,v[i.PopupService.OPTION.EVENTS]=this._getPopupServiceEvents(),v[i.PopupService.OPTION.LAYER_SELECTORS]="oj-menu-layer",v[i.PopupService.OPTION.MODALITY]=p,v[i.PopupService.OPTION.CONTEXT]={event:t,initialFocus:o.initialFocus,launcher:d,isDropDown:_},v[i.PopupService.OPTION.CUSTOM_ELEMENT]=this._IsCustomElement(),i.PopupService.getInstance().open(v),this._disableAnimation=!1}},_setPosition:function(e){var t=this.options;e&&(t.openOptions.position=i.PositionUtils.coerceToJet(e,t.openOptions.position))},_beforeOpenHandler:function(e){var t,n=e[i.PopupService.OPTION.POPUP],o=e[i.PopupService.OPTION.POSITION],s=e[i.PopupService.OPTION.CONTEXT].isDropDown;if(n.show(),n.position(o),!this._isAnimationDisabled()){var r=this._getDefaultAnimation(s?"dropdown":"sheet","open");t=i.AnimationUtils.startAnimation(n[0],"open",i.PositionUtils.addTransformOriginAnimationEffectsOption(n,r),this)}return t},_afterOpenHandler:function(t){var n=t[i.PopupService.OPTION.CONTEXT],o=n.event,s=n.initialFocus,r=n.launcher,a=n.isDropDown,l="firstItem"===s;(l||"menu"===s)&&this.element.focus(),l?this._focus(o,this.element.children().first()):this._blur(o),this._launcher=r,this._sheetMenuIsOpen=!a,e.push(this),this._trigger("open",o,{})},_startOpening:function(e,t){this._clearTimer&&this._clearTimer(),"true"===t.attr("aria-hidden")&&(this._clearTimer=this._setTimer(function(){delete this._clearTimer,this._close(),this._open(e,t)},this._getSubmenuBusyStateDescription("closing and opening"),this.delay))},_open:function(t,o){if("true"===o.attr("aria-hidden")&&this.active){if(this._IsCustomElement()){var s=this._getSubmenuWidget(o);if(!s._trigger2("beforeOpen",t).proceed)return;var r=i.PositionUtils.coerceToJqUi(s.options.openOptions.position);r=i.PositionUtils.normalizeHorizontalAlignment(r,this.isRtl)}else r=this._submenuPosition;if(r=$.extend({of:this.active},r),this._clearTimer&&this._clearTimer(),this.element.find(".oj-menu").not(o.parents(".oj-menu")).hide().attr("aria-hidden","true").removeData(n),o.show().removeAttr("aria-hidden").position(r).data(n,r),this._getSubmenuAnchor(o).attr("aria-expanded","true"),!this._launcher&&e.indexOf(this)<0&&e.push(this),!this._isAnimationDisabled()){var a=this._getDefaultAnimation("submenu","open");a=this._replaceAnimationOptions(a,{"#myPosition":r.my}),i.AnimationUtils.startAnimation(o[0],"open",a,this)}}},__collapseAll:function(e,t,n){var o;this._clearTimer&&this._clearTimer();var s=this,r=function(){delete s._clearTimer;var i=t?s.element:$(e&&e.target).closest(s.element.find(".oj-menu"));i.length||(i=s.element);var n=s._close(i);return n=s._runOnPromise(n,function(){s._blur(e),s.activeMenu=i})};if(n?this._isAnimationDisabled()?s._clearTimer=s._setTimer(r,s._getSubmenuBusyStateDescription("closing"),n):o=new Promise(function(e,t){s._clearTimer=s._setTimer(r,s._getSubmenuBusyStateDescription("closing"),n,function(){e(!0)})}):o=r(),o){var a=i.Context.getContext(this.element[0]).getBusyContext().addBusyState({description:"closing submenus"});o.then(a)}return o},_close:function(t){var o;t||(t=this.active?this.active.parent():this.element);var s=this,r=s._getDefaultAnimation("submenu","close"),a=t.find(".oj-menu"),l=function(e){e.hide().attr("aria-hidden","true").removeData(n),s._getSubmenuAnchor(e).attr("aria-expanded","false")};if(this._isAnimationDisabled())l(a),t.find(".oj-focus-ancestor").removeClass("oj-focus-ancestor");else{var u=function(e){var t=null;return e.children().children(".oj-menu").each(function(e,o){var a=$(o);if(a.is(":visible")){var h=u(a);t=s._runOnPromise(h,function(){var e=a.data(n),t=s._replaceAnimationOptions(r,{"#myPosition":e?e.my:null});return i.AnimationUtils.startAnimation(o,"close",t,s).then(function(){l(a)})})}else l(a)}),t};o=u(t),o=this._runOnPromise(o,function(){t.find(".oj-focus-ancestor").removeClass("oj-focus-ancestor")})}return this._launcher||e.indexOf(this)>=0&&t===this.element&&e.splice(e.indexOf(this),1),o},_collapse:function(e,t){var n;if(null==t||"active"===t){var o=this.activeMenu&&this.activeMenu.closest(".oj-menu-item",this.element);if(o&&o.length){var s=this;n=this._close(),n=this._runOnPromise(n,function(){s._focus(e,o)})}}else"all"===t||"eventSubtree"===t?n=this.__collapseAll(e,"all"===t,this.delay):i.Logger.warn("Invalid param "+t+" passed to Menu._collapse().  Ignoring the call.");return n},_expand:function(e){var t=this.active&&this.active.children(".oj-menu ").children(".oj-menu-item").first();t&&t.length&&(this._open(e,t.parent()),this._clearTimer&&this._clearTimer(),this._clearTimer=this._setTimer(function(){delete this._clearTimer,this._focus(e,t)},this._getBusyStateDescription("focusing an item")))},_next:function(e){this._move("next","first",e)},_previous:function(e){this._move("prev","last",e)},_isFirstItem:function(){return this.active&&!this.active.prevAll(".oj-menu-item").length},_isLastItem:function(){return this.active&&!this.active.nextAll(".oj-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".oj-menu-item").eq(-1):this.active[e+"All"](".oj-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".oj-menu-item")[t]()),this._focus(i,n)},_select:function(e){if(!this.active&&e&&e.target){var t=$(e.target).closest(".oj-menu-item");t.closest(this.element).length&&this._makeActive(t,e)}if(this.active)if(this.active.has(".oj-menu").length||this.active.is(".oj-disabled"))i.Logger.warn("Selecting a disabled menu item or parent menu item is not allowed.");else{var n=this.active.is(this._cancelItem)?void 0:{item:this.active},o=this.__collapseAll(e,!0);if(this._launcher){var s=this;this._runOnPromise(o,function(){s._focusLauncherAndDismiss(e,n)})}}else i.Logger.warn("Menu._select() called when no menu item is focused and no menu item can be inferred from event param.")},_surrogateRemoveHandler:function(){this.element.remove()},_getPopupServiceEvents:function(){if(!this._popupServiceEvents){var e=this._popupServiceEvents={};e[i.PopupService.EVENT.POPUP_CLOSE]=this._closeAll.bind(this),e[i.PopupService.EVENT.POPUP_REMOVE]=this._surrogateRemoveHandler.bind(this),e[i.PopupService.EVENT.POPUP_REFRESH]=this.refresh.bind(this),e[i.PopupService.EVENT.POPUP_AUTODISMISS]=this._clickAwayHandler.bind(this),e[i.PopupService.EVENT.POPUP_BEFORE_OPEN]=this._beforeOpenHandler.bind(this),e[i.PopupService.EVENT.POPUP_AFTER_OPEN]=this._afterOpenHandler.bind(this),e[i.PopupService.EVENT.POPUP_BEFORE_CLOSE]=this._beforeCloseHandler.bind(this),e[i.PopupService.EVENT.POPUP_AFTER_CLOSE]=this._afterCloseHandler.bind(this)}return this._popupServiceEvents},_closeAll:function(){this._disableAnimation=!0,this._close(this.element),this.__dismiss(null),this._setWhenReady("none")},_usingHandler:function(e,t){var o=t.element.element;o.css(e),i.PositionUtils.captureTransformOriginAnimationEffectsOption(o,t);var s=o.data(n);if(s){var r=s.origUsing;r&&r(e,t)}i.PositionUtils.isAligningPositionClipped(t)&&(this._clearCloseDelayTimer=this._setTimer(this._closeAll,this._getSubmenuBusyStateDescription("closing"),1))},getNodeBySubId:function(e){switch(e&&e.subId){case p:return this._cancelDomAttached?this._cancelItem[0]:null;default:return this._super(e)}},getSubIdByNode:function(e){return this._cancelItem&&this._cancelItem.is($(e).parents().addBack(e))?{subId:p}:this._super(e)},_isDropDown:function(e){if(this._hasSubmenus)return!0;switch(e){case"dropDown":return!0;case"sheet":return!1;case"auto":return c.matches;default:throw new Error("Invalid value for Menu openOptions.display: "+e)}},_toggleCancelDom:function(e){r&&(e?this._cancelDomAttached&&(this._getCancelDom().detach().eq(0).prev().removeClass("oj-menu-item-before-divider"),this._cancelDomAttached=!1):(this._getCancelDom().appendTo(this.element).eq(0).prev().addClass("oj-menu-item-before-divider"),this._cancelDomAttached=!0))},_getCancelDom:function(){if(!this._cancelDom){var e=$("<li></li>",this.document[0]),t=$("<a href='#'></a>",this.document[0]).text(this.options.translations.labelCancel);$("<span class='oj-menu-item-icon oj-component-icon oj-menu-cancel-icon'></span>",this.document[0]).prependTo(t);var i=$("<li></li>",this.document[0]).addClass("oj-menu-item-cancel oj-menu-item-after-divider").append(t);this._initDividers(e),this._initAnchors(t),this._initMenuItems(i),this._cancelAnchor=t,this._cancelItem=i,this._cancelDom=$([e[0],i[0]])}return this._cancelDom},_setupSwipeBehavior:function(){a&&(this.element.ojHammer(d),this._on({swipedown:function(e){this._sheetMenuIsOpen&&"touch"===e.gesture.pointerType&&(this.__collapseAll(e,!0),this._focusLauncherAndDismiss(e))}}))},_setWhenReady:function(e){var t=this._whenReadyMediator;t&&(t.destroy(),delete this._whenReadyMediator),["open","close"].indexOf(e)<0||(this._whenReadyMediator=new i.PopupWhenReadyMediator(this.element,e,"ojMenu",this._IsCustomElement()))},_isOperationPending:function(e,t,i){var n=this._whenReadyMediator;return!!n&&n.isOperationPending(this,e,t,i)},_setTimer:function(e,t,n,o){var s=i.Context.getContext(this.element[0]).getBusyContext().addBusyState({description:t}),r=function(){s&&(s(),s=null,o&&o())},a=this,l=setTimeout(function(){var t=e.bind(a)();t&&t instanceof Promise?t.then(r):r()},n||0);return function(){clearTimeout(l),r()}},_getBusyStateDescription:function(e){return"Menu with id '"+this.element.attr("id")+"' is busy "+e+"."},_getSubmenuBusyStateDescription:function(e){return this._getBusyStateDescription(e+" a submenu")},_NotifyDetached:function(){i.ZOrderUtils.getStatus(this.element)===i.ZOrderUtils.STATUS.OPEN&&this._closeAll(),this._super()}}),i.Components.setDefaultOptions({ojMenu:{openOptions:i.Components.createDynamicPropertyGetter(function(e){return{position:null!=i.BaseCustomElementBridge.getRegistered(e.element.tagName)?e.containers.indexOf("ojMenu")>=0?{my:{horizontal:"start",vertical:"top"},at:{horizontal:"end",vertical:"top"},offset:{x:0,y:0},collision:"flipfit"}:{my:{horizontal:"start",vertical:"top"},at:{horizontal:"start",vertical:"bottom"},offset:{x:0,y:0},collision:"flipfit"}:{my:"start top",at:"start bottom",collision:"flipfit"}}})}});var e=new Array,t=!1,n="oj-menu-position",o=navigator.userAgent.indexOf("Macintosh")>-1&&navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome"),s=i.ThemeUtils.parseJSONFromFontFamily("oj-menu-config")||{},r="menuItem"===s.sheetCancelAffordance,a="dismiss"===s.sheetSwipeDownBehavior,l=s.dropDownModality||"modeless",u=s.sheetModality||"modal",h="bottom-"+(s.sheetMarginBottom||0),d=a&&{recognizers:[[Hammer.Swipe,{direction:Hammer.DIRECTION_DOWN}]]},c=function(){var e=s.dropDownThresholdWidth;null==e&&(e="768px");var t="(min-width: "+e+")";return window.matchMedia(t)}(),p="oj-menu-cancel-command"}(),i.CustomElementBridge.registerMetadata("oj-menu","baseComponent",{properties:{disabled:{type:"boolean"},openOptions:{type:"object",properties:{display:{type:"string",enumValues:["auto","dropDown","sheet"]},initialFocus:{type:"string",enumValues:["firstItem","menu","none"]},launcher:{type:"string"},position:{type:"object",properties:{my:{type:"string|object",properties:{horizontal:{type:"string",enumValues:["start","end","left","center","right"]},vertical:{type:"string",enumValues:["top","center","bottom"]}}},at:{type:"string|object",properties:{horizontal:{type:"string",enumValues:["start","end","left","center","right"]},vertical:{type:"string",enumValues:["top","center","bottom"]}}},offset:{type:"object",properties:{x:{type:"number"},y:{type:"number"}}},of:{type:"string|object"},collision:{type:"string",enumValues:["flip","fit","flipfit","flipcenter","none"]}}}}},translations:{type:"Object",properties:{labelCancel:{type:"string",value:"Cancel"}}}},methods:{getSubIdByNode:{},open:{},refresh:{}},events:{animateStart:{},animateEnd:{},beforeOpen:{},close:{},open:{}},extension:{_WIDGET_NAME:"ojMenu"}}),i.CustomElementBridge.register("oj-menu",{metadata:i.CustomElementBridge.getMetadata("oj-menu")});function Rt(e){this._composite=e.element,this.containerId=[e.unique,"mc"].join("_"),this._messagesContainerId=this.containerId,this.handleCloseIcon=this._handleCloseIcon.bind(this),this.close=this._closeMessage.bind(this),this.bindingsApplied=this._bindingsApplied.bind(this),this.disconnected=this._disconnected.bind(this),this.connected=this._connected.bind(this),this.propertyChanged=this._propertyChanged.bind(this),this.messageCreatedTime=(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),this.handleKeydown=this._handleKeydown.bind(this),this._properties=e.properties,this._initDefaultTranslations(),this._createObservables()}function xt(e,t){this._element=e,this._operation=t,this._init()}Rt.prototype._connected=function(e){var t=this._operationMediator;t&&"none"===t.getPendingOperation()&&this._isMessageOpen()&&this._scheduleAutoClose()},Rt.prototype._disconnected=function(e){var t=this._operationMediator;t&&"none"===t.getPendingOperation()&&this._clearAutoClose()},Rt.prototype._bindingsApplied=function(e){this._openMessage()},Rt.prototype._propertyChanged=function(e){function t(e,t,i){if("external"===e.updatedFrom&&e.property===t){var n=e.subproperty;if(n)return[t,i].join(".")===n.path;var o=e.previousValue[i];return e.value[i]!==o}return!1}this._properties.message;t(e,"message","autoTimeout")&&(this._clearAutoClose(),this._scheduleAutoClose()),t(e,"message","closeAffordance")&&(this.hasCloseAffordance("defaults"===this._computeCloseAffordance()),this._unregisterSwipeHandler(),this._registerSwipeHandler()),t(e,"message","icon")&&(this.computedIconStyle(this._computeIconStyle()),this.computedIconClass(this._computeIconClass())),t(e,"message","category")&&this.computedCategory(this._computeCategory()),t(e,"message","severity")&&(this.computedSeverity(this._computeSeverity()),this.computedCategory(this._computeCategory()),this.computedIconClass(this._computeIconClass())),t(e,"message","timestamp")&&this.computedTimestamp(this._computeTimestamp()),t(e,"message","summary")&&this.computedSummary(this._computeSummary()),t(e,"message","detail")&&this.computedDetail(this._computeDetail()),t(e,"translations","labelCloseIcon")&&this.computedLabelCloseIcon(this._computeLabelCloseIcon())},Rt.prototype._registerSwipeHandler=function(){if(i.DomUtils.isTouchSupported()&&"defaults"===this._computeCloseAffordance()){var e=$(document.getElementById(this._messagesContainerId)),t={recognizers:[[Hammer.Swipe,{direction:Hammer.DIRECTION_HORIZONTAL}]]},n="rtl"===i.DomUtils.getReadingDirection()?"swipeleft":"swiperight";this._hammerSwipe=e.ojHammer(t).on(n,function(e){e.preventDefault(),this._closeMessage()}.bind(this))}},Rt.prototype._unregisterSwipeHandler=function(){if(i.DomUtils.isTouchSupported()&&this._hammerSwipe){var e="rtl"===i.DomUtils.getReadingDirection()?"swipeleft":"swiperight";this._hammerSwipe.off(e),delete this._hammerSwipe}},Rt.prototype._scheduleAutoClose=function(){this._computeAutoTimeout()>-1&&(this._autoCloseTimer=window.setTimeout(this._closeMessage.bind(this),this._computeAutoTimeout()))},Rt.prototype._clearAutoClose=function(){isNaN(this._autoCloseTimer)||(window.clearTimeout(this._autoCloseTimer),delete this._autoCloseTimer)},Rt.prototype._isMessageOpen=function(){var e=document.getElementById(this._messagesContainerId);return!(!e||!$(e).is(":visible"))},Rt.prototype._closeMessage=function(e){var t=this._operationMediator;if(this._unregisterSwipeHandler(),!t.isOperationPending("close",this._closeMessage.bind(this,e))){t.destroy(),this._clearAutoClose(),this._operationMediator=new xt(this._composite,"close");var n=document.getElementById(this._messagesContainerId),o=this._getAnimateOptionDefaults("close");i.AnimationUtils.startAnimation(n,"close",o,this._composite).then(function(){$(n).hide(),i.Components.subtreeHidden(n);var t={bubbles:!0,cancelable:!1,detail:{message:this._properties.message}},o=new CustomEvent("ojClose",t);e&&Object.defineProperty(o,"_originalEvent",{value:e,writable:!1}),this._composite.dispatchEvent(o)}.bind(this))}},Rt.prototype._computeSeverity=function(){var e=this._properties.message;return i.StringUtils.isEmptyOrUndefined(e.severity)?Rt._getMessageDefault("severity"):e.severity},Rt.prototype._computeTimestamp=function(){var e=this._properties.message;if(!i.StringUtils.isEmptyOrUndefined(e.timestamp))try{var t=i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({pattern:"MM/dd/yy, hh:mm a"}).format(e.timestamp);return this._isDateToday(e.timestamp)&&(t=t.split(", ")[1]),t}catch(t){return void i.Logger.info(["JET oj-message id='",Rt._toSelector(this._composite),"': failed to parse or format the supplied value to message.timestamp='",e.timestamp,"'."].join(""))}},Rt.prototype._isDateToday=function(e){var t=new Date,n=i.IntlConverterUtils.isoToLocalDate(e);return t.getUTCFullYear()===n.getUTCFullYear()&&t.getUTCMonth()===n.getUTCMonth()&&t.getUTCDate()===n.getUTCDate()},Rt.prototype._computeCategory=function(){var e=this._properties.message;return i.StringUtils.isEmptyOrUndefined(e.category)?i.Translations.getComponentTranslations("oj-ojMessage").categories[this._computeSeverity()]:e.category},Rt.prototype._computeAutoTimeout=function(){var e=this._properties.message;return isNaN(e.autoTimeout)?Rt._getMessageDefault("autoTimeout"):0===e.autoTimeout?this._getThemedAutoTimeoutDefault():e.autoTimeout},Rt.prototype._computeIconStyle=function(){var e=this._properties.message;if(!i.StringUtils.isEmptyOrUndefined(e.icon))return["url('",e.icon,"') no-repeat"].join("")},Rt.prototype._computeIconClass=function(){var e=this._properties.message;if(i.StringUtils.isEmptyOrUndefined(e.icon)){var t=this._computeSeverity();if("none"!==t){var n=["oj-component-icon","oj-message-status-icon"];return n.push(["oj","message",t,"icon"].join("-")),n.join(" ")}}},Rt.prototype._computeCloseAffordance=function(){var e=this._properties.message;return i.StringUtils.isEmptyOrUndefined(e.closeAffordance)?Rt._getMessageDefault("closeAffordance"):e.closeAffordance},Rt.prototype._computeSound=function(){var e=this._properties.message;return void 0===e.sound?Rt._getMessageDefault("sound"):e.sound},Rt.prototype._computeLabelCloseIcon=function(){var e=this._properties.translations;return i.StringUtils.isEmptyOrUndefined(e.labelCloseIcon)?i.Translations.getTranslatedString("oj-ojMessage.labelCloseIcon"):e.labelCloseIcon},Rt.prototype._computeSummary=function(){var e=this._properties.message;if(!i.StringUtils.isEmptyOrUndefined(e.summary))return e.summary},Rt.prototype._computeDetail=function(){var e=this._properties.message;if(!i.StringUtils.isEmptyOrUndefined(e.detail))return e.detail},Rt.prototype._handleCloseIcon=function(e){this._closeMessage(e)},Rt.prototype._openMessage=function(){this._operationMediator=new xt(this._composite,"open"),Promise.resolve().then(function(){var e={bubbles:!0,cancelable:!1,detail:{message:this._properties.message}};this._composite.dispatchEvent(new CustomEvent("ojBeforeOpen",e));var t=document.getElementById(this._messagesContainerId),n=this._getAnimateOptionDefaults("open");i.AnimationUtils.startAnimation(t,"open",n,this._composite).then(function(){e={bubbles:!0,cancelable:!1,detail:{message:this._properties.message}};var t=this._computeSound();"none"!==t&&(this._initAudioContext(),this._playSound(t)),this._registerSwipeHandler(),this._scheduleAutoClose(),this._composite.dispatchEvent(new CustomEvent("ojOpen",e))}.bind(this))}.bind(this))},Rt.prototype._handleKeydown=function(e){e.defaultPrevented||"defaults"!==this._computeCloseAffordance()||e.keyCode===$.ui.keyCode.ESCAPE&&(e.preventDefault(),this._closeMessage(e))},Rt.prototype._playSound=function(e){if("defaults"!==e){var t=document.createElement("AUDIO");t.src=e,t.addEventListener("error",function(){i.Logger.info(["JET oj-message id='",Rt._toSelector(this._composite),"': failed to load or play media file for URL in property message.sound='",e,"'."].join(""))}.bind(this)),t.play()}else if(void 0===window.audioContext)i.Logger.info(["JET oj-message id='",Rt._toSelector(this._composite),"': failed to load or play default sound for message because user agent does\n","not support Web Audio API'"].join(""));else{var n=window.audioContext.createGain();n.connect(window.audioContext.destination);var o=window.audioContext.createOscillator();o.connect(n),o.start(),o.stop(window.audioContext.currentTime+.01)}},Rt.prototype._initAudioContext=function(){if(void 0===window.audioContext)try{window.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch(e){}},Rt.prototype._createObservables=function(){this.hasCloseAffordance=ko.observable("defaults"===this._computeCloseAffordance()),this.computedIconStyle=ko.observable(this._computeIconStyle()),this.computedIconClass=ko.observable(this._computeIconClass()),this.computedSeverity=ko.observable(this._computeSeverity()),this.computedCategory=ko.observable(this._computeCategory()),this.computedTimestamp=ko.observable(this._computeTimestamp()),this.computedLabelCloseIcon=ko.observable(this._computeLabelCloseIcon()),this.computedSummary=ko.observable(this._computeSummary()),this.computedDetail=ko.observable(this._computeDetail())},Rt.prototype._initDefaultTranslations=function(){var e=this._properties;i.StringUtils.isEmptyOrUndefined(e.translations.labelCloseIcon)&&(e.translations.labelCloseIcon=this._computeLabelCloseIcon())},Rt._getMessageDefault=function(e){return Rt._DEFAULTS.message[e]},Rt._DEFAULTS={autoTimeout:4e3,animation:{open:{effect:"fadeIn",duration:"300ms"},close:{effect:"fadeOut",duration:"300ms"}},message:{severity:"none",autoTimeout:-1,closeAffordance:"defaults",sound:"none"}},Rt.prototype._getThemedAutoTimeoutDefault=function(){var e=i.ThemeUtils.parseJSONFromFontFamily("oj-message-option-defaults");return e&&e.autoTimeout?e.autoTimeout:Rt._DEFAULTS.autoTimeout},Rt.prototype._getAnimateOptionDefaults=function(e){return Rt._DEFAULTS.animation[e]},Rt._toSelector=function(e){var t="";if(e)if(e.id&&e.id.length>0)t="#"+e.id;else{t=e.nodeName;var i=e.getAttribute("class");if(i&&(t+="."+i.split(" ").join(".")),e.parentNode)return Rt._toSelector(e.parentNode)+" > "+t}return t},xt.prototype._init=function(){this._resolvedQueue=[],this._callback=this._eventHandler.bind(this);var e=this._operation,t=["oj"];t.push(e.charAt(0).toUpperCase()),t.push(e.slice(1));var n=t.join("");this._eventType=n,this._element.addEventListener(n,this._callback);var o=i.Context.getContext(this._element).getBusyContext(),s={description:this._getBusyStateDescription.bind(this,this._element,this._operation)},r=o.addBusyState(s);this.addPromiseExecutor(function(e){window.setImmediate(function(){e()})}.bind(this,r))},xt.prototype._getBusyStateDescription=function(e,t){return[e.nodeName," identified by '",Rt._toSelector(e),"' is busy animating on the '",t,"' operation."].join("")},xt.prototype._deliverResolved=function(e){var t=this._resolvedQueue;this._resolvedQueue=[],e=e||this._operation,this._operation=null;for(var i=0;i<t.length;i++)t[i](e)},xt.prototype.destroy=function(){this._deliverResolved("none"),this._callback=null,this._element=null,this._operation=null,this._eventType=null},xt.prototype._eventHandler=function(e){e.target===this._element&&(this._element.removeEventListener(e.type,this._callback),this._deliverResolved(),this._callback=null)},xt.prototype.getPendingOperation=function(){return this._operation?this._operation:"none"},xt.prototype.addPromiseExecutor=function(e,t){this._resolvedQueue.push(e)},xt.prototype.isOperationPending=function(e,t){if(!this._element)return!1;var n=!1,o=this.getPendingOperation();return e===o?(i.Logger.info(["An oj-message id='",Rt._toSelector(this._element),"' invoked a '",e,"' operation while pending animation of the same type of operation. ","The second request will be ignored."].join("")),n=!0):"none"!==o&&(i.Logger.info(["An oj-message id='",Rt._toSelector(this._element),"' invoked a '",e,"' operation while pending animation of a '",o,"' operation. The second request will be invoked after the pending ","operation completes."].join("")),this.addPromiseExecutor(t),n=!0),n},i.Composite.register("oj-message",{view:'<div :id="[[containerId]]" class="oj-message-container" on-keydown="[[handleKeydown]]">  <div class="oj-message-header">    <div class="oj-message-leading-header" :title="[[computedCategory]]">      <oj-bind-if test="[[computedIconStyle]]">        <div class="oj-component-icon oj-message-status-icon oj-message-custom-icon" role="img"          :style.background="[[computedIconStyle]]">        </div>      </oj-bind-if>      <oj-bind-if test="[[computedIconClass]]">        <div role="img"           :class="[[computedIconClass]]">         </div>      </oj-bind-if>      <oj-bind-if test="[[computedCategory]]">        <div class="oj-message-category" tabindex="-1">          <h1 :title="[[computedCategory]]">            <oj-bind-text value="[[computedCategory]]"></oj-bind-text>           </h1>        </div>      </oj-bind-if>    </div>    <div class="oj-message-trailing-header">      <oj-bind-if test="[[computedTimestamp]]">        <div class="oj-message-timestamp">          <oj-bind-text value="[[computedTimestamp]]"></oj-bind-text>         </div>      </oj-bind-if>      <oj-bind-if test="[[hasCloseAffordance]]">        <div class="oj-message-close">          <oj-button display="icons" chroming="half" on-click="[[handleCloseIcon]]">            <span slot="startIcon" class="oj-fwk-icon oj-fwk-icon-cross"></span>            <span>              <oj-bind-text value="[[computedLabelCloseIcon]]"></oj-bind-text>            </span>          </oj-button>        </div>      </oj-bind-if>    </div>    </div>  <div class="oj-message-body">    <div class="oj-message-summary">      <oj-bind-text value="[[computedSummary]]"></oj-bind-text>    </div>    <div class="oj-message-detail">      <oj-bind-text value="[[computedDetail]]"></oj-bind-text>    </div>  <div></div>',viewModel:Rt,metadata:{name:"oj-message",displayName:"oj-message",version:"1.0.0",jetVersion:"^5.0.0",properties:{message:{type:"object",writeback:!1,value:{icon:"",category:"",severity:"none",summary:"",detail:"",autoTimeout:-1,closeAffordance:"defaults",sound:"none"},properties:{icon:{type:"string",value:""},category:{type:"string",value:""},severity:{type:"string",enumValues:["error","warning","confirmation","info","none"],value:"none"},timestamp:{type:"string",value:""},summary:{type:"string",value:""},detail:{type:"string",value:""},autoTimeout:{type:"number",translatable:!1,value:-1},closeAffordance:{type:"string",enumValues:["none","defaults"],value:"defaults"},sound:{type:"string",value:"none"}}},translations:{type:"object",writeback:!1,value:{labelCloseIcon:""},properties:{labelCloseIcon:{type:"string",translatable:!0}}}},methods:{close:{}},events:{ojAnimateEnd:{bubbles:!0,cancelable:!1,detail:{action:{type:"string",enumValues:["open","close"]},element:{type:"Element"}}},ojAnimateStart:{bubbles:!0,cancelable:!1,detail:{action:{type:"string",enumValues:["open","close"]},element:{type:"Element"},endCallback:{type:"function"}}},ojClose:{bubbles:!0,cancelable:!1,detail:{message:{type:"object"}}},ojOpen:{bubbles:!0,cancelable:!1,detail:{message:{type:"object"}}}},slots:{}}});function Lt(e){this._composite=e.element,this.containerId=[e.unique,"mc"].join("_"),this._messagesContainerId=this.containerId,this.handleOpen=this._handleOpen.bind(this),this.handleClose=this._handleClose.bind(this),this.handleAnimateStart=this._handleAnimateStart.bind(this),this.bindingsApplied=this._bindingsApplied.bind(this),this.disconnected=this._disconnected.bind(this),this.connected=this._connected.bind(this),this.close=this._close.bind(this),this.closeAll=this._closeAll.bind(this),this.propertyChanged=this._propertyChanged.bind(this),this._properties=e.properties,this._createObservables(),this._updateLandmark()}function Nt(e){this.Init(e)}Lt.prototype._bindingsApplied=function(){var e=document.getElementById(this._messagesContainerId);e.addEventListener("ojFocus",this._navigationEventListener.bind(this),!1),e.addEventListener("ojBeforeOpen",this._handleBeforeOpen.bind(this),!1)},Lt.prototype._disconnected=function(){Lt.NAVIGATION_TRACKER.remove(this._messagesContainerId),i.ZOrderUtils.getStatus(this._composite)===i.ZOrderUtils.STATUS.OPEN&&this._closeOverlay()},Lt.prototype._connected=function(){Lt.NAVIGATION_TRACKER.add(this._messagesContainerId)},Lt.prototype._closeAll=function(e){if(this._isMessagesShown())for(var t=this._getDefaultSlotMessageElements(),i=0;i<t.length;i++){var n=t[i].message,o=!0;e&&(o=e(n)),o&&t[i].close()}},Lt.prototype._propertyChanged=function(e){"external"===e.updatedFrom&&"position"===e.property?e.previousValue&&e.value?this._refresh():!e.previousValue&&e.value?this._getDefaultSlotMessageElements().length>0&&(this._isMessagesShown()&&this._hideMessages(),this._openOverlay()):e.previousValue&&!e.value&&this._getDefaultSlotMessageElements().length>0&&(this._isOverlayOpen()&&this._closeOverlay(),this._showMessages()):"external"===e.updatedFrom&&"display"===e.property?this._getDefaultSlotMessageElements().length>0&&(this._isOverlayOpen()?(this._closeOverlay(),this._openOverlay(),this._refresh()):this._isMessagesShown()&&(this._hideMessages(),this._showMessages())):"external"===e.updatedFrom&&"translations"===e.property&&this._updateLandmark()},Lt.prototype._close=function(e){if(e&&this._isMessagesShown())for(var t=this._getDefaultSlotMessageElements(),i=0;i<t.length;i++){$(t[i]).prop("message")===e&&t[i].close()}},Lt.prototype._isEventPertaining=function(e){var t=e.target,n=document.getElementById(this._messagesContainerId);return!("OJ-MESSAGE"!==t.nodeName||!i.DomUtils.isAncestor(n,t))},Lt.prototype._handleBeforeOpen=function(e){e.defaultPrevented||!this._isEventPertaining(e)||this._isMessagesShown()||(this._isPresentationInline()?this._showMessages():this._openOverlay())},Lt.prototype._handleOpen=function(e){if(!e.defaultPrevented&&this._isEventPertaining(e)){var t=e.detail.message,n=i.Translations.getComponentTranslations("oj-ojMessage").categories,o={category:t.category?t.category:n[t.severity],summary:t.summary},s=this._getLiveRegion(),r=i.Translations.getTranslatedString("oj-ojMessages.ariaLiveRegion.newMessage",o);s.announce(r),this._refresh()}},Lt.prototype._handleClose=function(e){if(!e.defaultPrevented&&this._isEventPertaining(e)){var t,i=e.target;e._originalEvent&&(t=this._getNextFocus(i)),t&&t.focus(),$(i).remove(),0===this._getDefaultSlotMessageElements().length&&(Lt.NAVIGATION_TRACKER.togglePreviousFocus(this._messagesContainerId),this._isOverlayOpen()?this._closeOverlay():this._hideMessages())}},Lt.prototype._getNextFocus=function(e){var t,i,n=this._getDefaultSlotMessageElements(),o=n.indexOf(e);return o-1>-1?t=n[o-1]:o+1<=n.length-1&&(t=n[o+1]),t&&(i=t.querySelector('.oj-message-category[tabindex="-1"]')),i},Lt.prototype._handleAnimateStart=function(e){if(!e.defaultPrevented&&this._isEventPertaining(e)){e.preventDefault();var t=e.detail.element,n=e.detail.action,o=this._isPresentationInline()?"general":this._computeDisplay(),s=this._getThemedAnimateOptions(o,n),r=e.detail.endCallback;i.AnimationUtils[s.effect](t,s).then(r)}},Lt._DEFAULTS={general:{animation:{open:{effect:"expand",duration:"300ms"},close:{effect:"collapse",duration:"300ms"}},position:{my:{horizontal:"center",vertical:"top"},at:{horizontal:"center",vertical:"top"},of:"window",collision:"none"}},notification:{animation:{open:{effect:"slideIn",duration:"300ms"},close:{effect:"slideOut",duration:"300ms",direction:"end"}},position:{my:{horizontal:"end",vertical:"top"},at:{horizontal:"end",vertical:"top"},of:"window",collision:"none"}}},Lt.prototype._getThemedAnimateOptions=function(e,t){var n=i.ThemeUtils.parseJSONFromFontFamily("oj-messages-option-defaults");return n&&n[e]&&n[e].animation&&n[e].animation[t]?n[e].animation[t]:Lt._DEFAULTS[e].animation[t]},Lt.prototype._computeDisplay=function(){return this._properties.display},Lt.prototype._isPresentationInline=function(){return!this._properties.position},Lt.prototype._computeContainerSelectors=function(){var e=this._computeDisplay(),t=$(this._composite);return t.removeClass("oj-messages-general oj-messages-notification oj-messages-inline"),this._isPresentationInline()?t.addClass("oj-messages-inline"):t.addClass(["oj-messages",e].join("-")),"oj-messages-container"},Lt.prototype._getThemedPosition=function(){var e=this._computeDisplay(),t=i.ThemeUtils.parseJSONFromFontFamily("oj-messages-option-defaults");return t[e]&&t[e].position?t[e].position:Lt._DEFAULTS[e].position},Lt.prototype._getPositionAsJqUi=function(){var e=i.PositionUtils.coerceToJqUi(this._computePosition()),t="rtl"===i.DomUtils.getReadingDirection();return e=i.PositionUtils.normalizeHorizontalAlignment(e,t)},Lt.prototype._computePosition=function(){var e=this._properties.position;return i.PositionUtils.coerceToJet(e,this._getThemedPosition())},Lt.prototype._getDefaultSlotMessageElements=function(){function e(t){var i="";if(t)if(t.id&&t.id.length>0)i="#"+t.id;else{i=t.nodeName;var n=t.getAttribute("class");if(n&&(i+="."+n.split(" ").join(".")),t.parentNode)return e(t.parentNode)+" > "+i}return i}for(var t=document.getElementById(this._messagesContainerId),n=[],o=i.BaseCustomElementBridge.getSlotMap(t)[""],s=0;o&&s<o.length;s++)"OJ-MESSAGE"!==o[s].nodeName?i.Logger.error(["JET oj-messages id='",e(this._composite),"': can contain only oj-message children in its default slot. ","Found a child element id='",e(o[s]),"'."].join("")):n.push(o[s]);return n},Lt.prototype._isMessagesShown=function(){return $(this._composite).is(":visible")},Lt.prototype._showMessages=function(){this._isMessagesShown()||($(this._composite).show(),i.Components.subtreeShown($(this._composite))),Lt.NAVIGATION_TRACKER.add(this._messagesContainerId),this._announceNavigation()},Lt.prototype._hideMessages=function(){this._isMessagesShown()&&($(this._composite).hide(),i.Components.subtreeHidden(this._composite),Lt.NAVIGATION_TRACKER.remove(this._messagesContainerId),this._liveRegion&&(this._liveRegion.destroy(),delete this._liveRegion))},Lt.prototype._openOverlay=function(){var e=$(this._composite),t={};t[i.PopupService.OPTION.POPUP]=e,t[i.PopupService.OPTION.LAUNCHER]=e,t[i.PopupService.OPTION.POSITION]=this._getPositionAsJqUi(),t[i.PopupService.OPTION.EVENTS]=this._getPopupServiceEvents(),t[i.PopupService.OPTION.LAYER_SELECTORS]=["oj","messages","layer"].join("-"),t[i.PopupService.OPTION.MODALITY]=i.PopupService.MODALITY.MODELESS,t[i.PopupService.OPTION.CUSTOM_ELEMENT]=!0,i.PopupService.getInstance().open(t),this._showMessages(),this._overlayEventsCallback=Lt._overlayEventsListener.bind(this,e),e[0].addEventListener("keydown",this._overlayEventsCallback,!1)},Lt.prototype._closeOverlay=function(){this._hideMessages();var e=$(this._composite),t={};t[i.PopupService.OPTION.POPUP]=e,i.PopupService.getInstance().close(t);var n=this._overlayEventsCallback;delete this._overlayEventsCallback,e[0].removeEventListener("keydown",n,!1)},Lt.prototype._isOverlayOpen=function(){var e=this._composite,t=i.ZOrderUtils.getStatus(e);return t===i.ZOrderUtils.STATUS.OPENING||t===i.ZOrderUtils.STATUS.OPEN||t===i.ZOrderUtils.STATUS.CLOSING},Lt._overlayEventsListener=function(e,t){if(!t.defaultPrevented&&t.keyCode===$.ui.keyCode.TAB){var i=t.target,n=e.find(":tabbable");if(n.length>0){var o=n[0],s=n[n.length-1];o===s&&i===o?t.preventDefault():o===i&&t.shiftKey?(t.preventDefault(),s.focus()):s!==i||t.shiftKey||(t.preventDefault(),o.focus())}else t.preventDefault()}},Lt.prototype._navigationEventListener=function(e){e.target.id===this._messagesContainerId&&(e.preventDefault(),this._announceNavigation(!0))},Lt.prototype._announceNavigation=function(e){var t,n=i.AgentUtils.getAgentInfo().os===i.AgentUtils.OS.IOS||i.AgentUtils.getAgentInfo().os===i.AgentUtils.OS.ANDROID;t=e?n?void 0:"ariaLiveRegion.navigationFromKeyboard":n?"ariaLiveRegion.navigationToTouch":"ariaLiveRegion.navigationToKeyboard";var o=this._getLiveRegion(),s=i.Translations.getTranslatedString(["oj-ojMessages",t].join("."));o.announce(s)},Lt.prototype._getLiveRegion=function(){var e=this._messagesContainerId;return this._liveRegion||(this._liveRegion=new Nt(e)),this._liveRegion},Lt.prototype._getPopupServiceEvents=function(){var e={};return e[i.PopupService.EVENT.POPUP_CLOSE]=this._closeOverlay.bind(this),e[i.PopupService.EVENT.POPUP_REMOVE]=this._surrogateRemoveHandler.bind(this),e[i.PopupService.EVENT.POPUP_REFRESH]=this._refresh.bind(this),e},Lt.prototype._refresh=function(){if(this._isOverlayOpen()){var e=this._getPositionAsJqUi();$(this._composite).position(e)}},Lt.prototype._surrogateRemoveHandler=function(){this._closeOverlay(),this._composite.parentElement.removeChild(this._composite)},Lt.prototype._createObservables=function(){this.containerSelectors=ko.pureComputed(this._computeContainerSelectors.bind(this),this)},Lt.prototype._computeLabelLandmark=function(){var e=this._properties;return i.StringUtils.isEmptyOrUndefined(e.translations.labelLandmark)?i.Translations.getTranslatedString("oj-ojMessages.labelLandmark"):e.translations.labelLandmark},Lt.prototype._updateLandmark=function(){var e=this._computeLabelLandmark();this._composite.setAttribute("aria-label",e),this._composite.setAttribute("role","complementary")},Lt.NAVIGATION_TRACKER={_messagesContainerIds:[],_priorFocusCache:{},add:function(e){this.remove(e),this._messagesContainerIds.push(e),this._start(e)},remove:function(e){var t=this._messagesContainerIds,i=t.indexOf(e);i>-1&&t.splice(i,1),this._stop(e)},togglePreviousFocus:function(e){var t=this._priorFocusCache,n=t[e];return!!(n&&$(n).is(":visible")&&i.ZOrderUtils.isAboveTopModalLayer(n))&&(n.focus(),delete t[e],!0)},_addPriorFocusCache:function(e,t){this._priorFocusCache[e]=t},_start:function(e){var t=document.getElementById(e);if(t){var i=this._messageContainerListener.bind(this,e);if(t.addEventListener("focus",i,!0),t.addEventListener("keydown",i,!1),t.addEventListener("click",i,!1),$(t).data("oj_messages_nmtl",i),!this._documentCallback){this._documentCallback=this._documentListener.bind(this);var n=document.documentElement;n.addEventListener("keydown",this._documentCallback,!1),n.addEventListener("blur",this._documentCallback,!0)}}},_stop:function(e){var t=document.getElementById(e);if(t){var i=$(t).data("oj_messages_nmtl");i&&(t.removeEventListener("focus",i,!0),t.removeEventListener("keydown",i,!1),t.removeEventListener("click",i,!1))}if(this._documentCallback&&!(this._messagesContainerIds.length>0)){var n=document.documentElement;n.removeEventListener("keydown",this._documentCallback,!1),n.removeEventListener("blur",this._documentCallback,!0),delete this._documentCallback}},_indexOfFocusWithin:function(e){for(var t=this._messagesContainerIds,n=0;n<t.length;n++){var o=document.getElementById(t[n]);if(o&&i.DomUtils.isAncestorOrSelf(o,e))return n}return-1},_documentListener:function(e){if(!e.defaultPrevented){var t=this._messagesContainerIds;if("keydown"===e.type&&117===e.keyCode&&t.length>0){var n=this._indexOfFocusWithin(e.target);if(n>-1)return;for(var o=n=t.length-1;o>-1;o++){var s=document.getElementById(t[o]);if(s&&$(s).is(":visible")&&i.ZOrderUtils.isAboveTopModalLayer(s)){var r=s.querySelector('.oj-message-category[tabindex="-1"]');e.preventDefault(),this._addPriorFocusCache(t[o],e.target),r.focus();var a=new CustomEvent("ojFocus",{bubbles:!1,cancelable:!0});s.dispatchEvent(a);break}}}else"blur"===e.type&&(this._prevActiveElement=e.target)}},_messageContainerListener:function(e,t){if(!t.defaultPrevented)if("focus"===t.type||"click"===t.type){var n=document.getElementById(e),o=this._prevActiveElement;o&&n&&!i.DomUtils.isAncestorOrSelf(n,o)&&this._addPriorFocusCache(e,o)}else"keydown"!==t.type||117!==t.keyCode&&t.keyCode!==$.ui.keyCode.ESCAPE||this.togglePreviousFocus(e)&&t.preventDefault()}},Nt.prototype.Init=function(e){this._id=e},Nt.prototype.destroy=function(){var e=$(document.getElementById(Nt._LIVE_REGION_ID)),t=this._id;delete this._id,e.find('div[data-container-id="'+t+'"]').remove(),e.children("div").length<1&&e.remove()},Nt.prototype.announce=function(e){var t=Nt._getLiveRegion(),i=this._id;$("<div>").attr("data-container-id",i).text(e).appendTo(t)},Nt._getLiveRegion=function(){var e=$(document.getElementById(Nt._LIVE_REGION_ID));return 0===e.length&&((e=$("<div>")).attr({id:Nt._LIVE_REGION_ID,role:"log","aria-live":"polite","aria-relevant":"additions"}),e.addClass("oj-helper-hidden-accessible"),e.appendTo(document.body)),e},Nt._LIVE_REGION_ID="__oj_messages_arialiveregion",i.Composite.register("oj-messages",{view:'<div role="presentation" :id="[[containerId]]" :class="[[containerSelectors]]"      on-oj-open="[[handleOpen]]" on-oj-close="[[handleClose]]"      on-oj-animate-start="[[handleAnimateStart]]">  <oj-bind-slot>  </oj-bind-slot>    \x3c!-- ko foreach: $props.messages --\x3e    <oj-message message="[[$data]]">    </oj-message>    \x3c!-- /ko --\x3e</div>',viewModel:Lt,metadata:{name:"oj-messages",displayName:"oj-messages",version:"1.0.0",jetVersion:"^5.0.0",properties:{messages:{type:"Array<object>",writeback:!1,value:null},display:{type:"string",enumValues:["general","notification"],translatable:!1,value:"general"},position:{type:"object",translatable:!1,properties:{my:{type:"object|string",properties:{horizontal:{type:"string",enumValues:["start","end","left","center","right"]},vertical:{type:"string",enumValues:["top","center","bottom"]}}},at:{type:"object|string",properties:{horizontal:{type:"string",enumValues:["start","end","left","center","right"]},vertical:{type:"string",enumValues:["top","center","bottom"]}}},offset:{type:"object",properties:{x:{type:"number"},y:{type:"number"}}},of:{type:"string|object"},collision:{type:"string",enumValues:["flip","fit","flipfit","flipcenter","none"]}}},translations:{type:"object",writeback:!1,value:{labelLandmark:""},properties:{labelLandmark:{type:"string",translatable:!0}}}},methods:{close:{params:[{name:"message",type:"object"}]},closeAll:{params:[{name:"filter",type:"function"}]}}}}),i.ModuleBinding={},i.ModuleBinding.defaults={viewPath:"text!views/",viewSuffix:".html",modelPath:"viewModels/",initializeMethod:"initialize",disposeMethod:"dispose",activatedHandler:"handleActivated",attachedHandler:"handleAttached",detachedHandler:"handleDetached",bindingsAppliedHandler:"handleBindingsApplied",deactivatedHandler:"handleDeactivated",transitionCompletedHandler:"handleTransitionCompleted"},i.ModuleBinding._EMPTY_MODULE="oj:blank",function(){function e(e,t,i){t=t||e;var n=[];i&&e===t&&(i.parentNode.removeChild(i),n.push(i)),ko.virtualElements.setDomNodeChildren(t,n)}function t(e,t){e.forEach(function(e){t.appendChild(e)})}function n(e,t,i){var n={};i[0]&&(n.viewModel=i[0]),i[1]&&(n.view=i[1]);var o=new CustomEvent(t,{detail:n});e.dispatchEvent(o)}function o(e,t,i){if(e&&e[t]){var n={element:i[0],valueAccessor:i[1]};return i.length>2&&(n.viewModel=i[2],i.length>3&&(n["boolean"==typeof i[3]?"fromCache":"cachedNodes"]=i[3])),ko.ignoreDependencies(e[t],e,[n])}}function s(e,t,n){if(null!=e){var o=i.ModuleBinding.defaults[t];if(null!=o&&e){var s=e[o];if("function"==typeof s){var r=void 0;return n&&(r={element:n[0],valueAccessor:n[1]},n.length>2&&(r["boolean"==typeof n[2]?"fromCache":"cachedNodes"]=n[2])),ko.ignoreDependencies(s,e,[r])}}}}function r(e,t){if(e&&t){var i=e[t];"function"==typeof i&&ko.ignoreDependencies(i,e)}}function a(e,t,i){for(var n=e;null!=n;){var o=ko.virtualElements.nextSibling(n),s=n.nodeType;n===t||1!==s&&8!==s||i(n),n=o}}function l(e,t){for(var i=t.length-1;i>=0;i--)ko.virtualElements.prepend(e,t[i])}function u(e,t){if(t)for(var i=0;i<e.length;i++){var n=e[i];1===n.nodeType&&t(n)}}function h(e,t){return e=e||require,new Promise(function(n,o){e([t],function(e){n(e)},function(e){i.Logger.error("ojModule failed to load "+t),o(e)})})}ko.bindingHandlers.ojModule={init:function(d,c,p,_,m){var g,f,v,C,y,b,S,E,T={},D=-1,A=d.parentNode&&"OJ-MODULE"===d.parentNode.nodeName,I=A?function(){}:s,O=A?function(){}:o,w=A?r:function(){},R=A?n:function(){};function x(){b&&(b(),b=null)}var L=function(e){I(e,"disposeMethod",[d,c])},N=function(){L(g)};ko.utils.domNodeDisposal.addDisposeCallback(d,function(){N();for(var e=Object.keys(T),t=0;t<e.length;t++){var i=T[e[t]].model;L(i)}x()});var P=new Error("Promise cancelled because ojModule is fetching new View and ViewModel"),M=function(e){if(e!=D)throw P},j=d;return 8===d.nodeType&&(j=d.parentNode,ko.virtualElements.setDomNodeChildren(d,[]),y=d.nextSibling),ko.computed(function(){if(D++,!b){var n=i.Context.getContext(j).getBusyContext();b=n.addBusyState({description:"ojModule binding on a node with the Id "+d.id+"is loading the module. Binding evaluator: "+c.toString()})}var o,s,r,p,_,L,H,U,k,B,F,V,G,$,z=0===D,K=ko.utils.unwrapObservable,W=K(c());"string"==typeof W?o=W:(o=K(W.name),s=K(W.viewName),r=K(W.params),p=K(W.viewModelFactory),_=K(W.createViewFunction),L=K(W.cacheKey),H=K(W.lifecycleListener),U=K(W.animation),V=K(W.view),G=K(W.viewModel),k=K(W.require),$=K(W.cleanupMode)),null==k||k instanceof Function||(F=k.viewPath,B=k.modelPath,k=k.instance),s=null==s?o:s;var Y,q,X,Z=i.ModuleBinding._EMPTY_MODULE===s,J=O(H,"activated",[d,c]);if(R(j,"ojTransitionStart",[G]),Z)Y=Promise.resolve([]),q=Promise.resolve(null);else{var Q=null==L?null:T[L];null!=Q&&(delete T[L],Y=Promise.resolve(Q.view),q=Promise.resolve(Q.model))}if(null==Y&&null!=V&&(Y=Promise.resolve(V)),null==q&&(null!=G?q=Promise.resolve(G):null!=p&&(q=ko.ignoreDependencies(p.createViewModel,p,[r,c])),null==q&&null!=o&&(null==B&&(B=i.ModuleBinding.defaults.modelPath),q=h(k,B+o)),null!=q&&(q=q.then(function(e,t){return M(e),t="function"==typeof t?new t(r):I(t,"initializeMethod",[d,c])||t}.bind(null,D)),null==Y&&null!=_&&(Y=q.then(function(e,t){if(M(e),null==t)throw x(),"createViewFunction option cannot be used when the ViewModel is null";var i=t[_];if(null==i)throw x(),"function specified by the createViewFunction option was not found on the ViewModel";return i.call(t)}.bind(null,D)))),null==Y)){if(null==s)throw x(),new Error("View name or view instance must be specified");null==F&&(F=i.ModuleBinding.defaults.viewPath),Y=h(k,F+s+i.ModuleBinding.defaults.viewSuffix)}if(null==Y)throw x(),new Error("ojModule is missing a View");null!=q&&(X=q.then(function(e,t){return M(e),I(t,"activatedHandler",[d,c])}.bind(null,D))),Promise.all([Y,q,J,X,f]).then(function(n,o){if(n==D){var s=o[0];if(null==s)throw x(),"The module's View was resolved to null";var h,p=function(e,t){if("string"==typeof e)e=ko.utils.parseHtmlFragment(e);else if(function(e){return window.DocumentFragment?e instanceof DocumentFragment:e&&11===e.nodeType}(e))e=ko.utils.arrayPushAll([],e.childNodes);else{if(!Array.isArray(e))throw t(),"The View ("+e+") has an unsupported type";e=ko.utils.arrayPushAll([],e)}return e}(s,x),_=o[1],b=!1,P=function(e,t,i){for(var n=[],o=ko.virtualElements.firstChild(e);null!=o&&o!=i;o=o.nextSibling)o!=t&&n.push(o);return n}(d,C,y),M=function(e,t){var i=[];return a(ko.virtualElements.firstChild(e),t,function(e){i.push(e)}),i}(d,C);null==v||S?A&&(h=P):(b=!0,h=P,C||((C=document.createElement("div")).className="oj-helper-module-cache",ko.virtualElements.prepend(d,C)));var k=!1,B=function(n){if(!k){if(k=!0,b)t(P,C),e(d,n||d,C);else if(A&&"none"===E)for(var o=0;o<h.length;o++){var s=h[o];s.parentNode.removeChild(s)}else M.forEach(function(e){ko.cleanNode(e)}),e(d,n||d,C);z||(O(H,"detached",[d,c,g,h]),I(g,"detachedHandler",[d,c,h]),w(g,"disconnected"),R(j,"ojViewDisconnected",[g,h]),O(H,"deactivated",[d,c,g]),I(g,"deactivatedHandler",[d,c])),b?(u(h,i.Components?i.Components.subtreeHidden:null),T[v]={model:g,view:h}):A&&"none"===E||N(),g=_,v=L,S=Z,E=$}},F=function(e){l(e=e||d,p);var t=null!=Q;t&&u(p,i.Components?i.Components.subtreeShown:null),O(H,"attached",[e,c,_,t]),I(_,"attachedHandler",[e,c,t]),w(_,"connected"),R(j,"ojViewConnected",[_]);var n=A&&function(e,t){for(var i,n=0;n<e.length&&!(i=ko.contextFor(e[n]));n++);return i&&i.$module&&i.$module==t}(p,_);if(!t&&!n){var o=m.createChildContext(_,void 0,function(e){e.$module=_,e.$params=r});A&&(o.$parent=void 0,o.$parents=void 0,o.$parentContext=void 0,o.$props=void 0,o.$properties=void 0,o.$slotNodeCounts=void 0,o.$slotCounts=void 0,o.$unique=void 0,o.$uniqueId=void 0),function(e,t,i,n){var o=ko.bindingProvider.instance,s=o.preprocessNode;s&&(a(t,n,function(e){s.call(o,e)}),t=ko.virtualElements.firstChild(e));a(t,n,function(e){ko.applyBindings(i,e)})}(e,p[0],o,C),O(H,"bindingsApplied",[e,c,_]),I(_,"bindingsAppliedHandler",[e,c])}},V=function(){O(H,"transitionCompleted",[d,c,_]),I(_,"transitionCompletedHandler",[d,c]),w(_,"transitionCompleted"),R(j,"ojTransitionEnd",[_]),x()};if(null!=U){var G=function(e,n,o,s,r,a,h){var d,c,p=n.canAnimate;if(null!=p&&!p.call(n,e))return;var _=n.prepareAnimation.call(n,e);_&&(d=_.newViewParent,c=_.oldViewParent);var m=d||o;c&&c!==o?t(s,c):m===o&&a(null);m!==o&&ko.virtualElements.setDomNodeChildren(m,[]);r(m);var g=Array.prototype.slice.call(m.childNodes),f=!1,v=function(){if(!f&&(f=!0,o!==m)){l(o,g);var e=o.parentNode&&"OJ-MODULE"===o.parentNode.nodeName;i.Components&&!e&&(u(g,i.Components.subtreeDetached),u(g,i.Components.subtreeAttached))}},C=a.bind(null,c);e.newViewParent=d,e.oldViewParent=c,e.oldViewNodes=s,e.removeOldView=C,e.insertNewView=v;var y=function(){C(),v(),h()};return n.animate.call(n,e).then(y,function(e){y(),i.Logger.error("ojModule animation promise was rejected")})}(function(e,t,i,n,o,s){return{node:s?e.parentNode:e,valueAccessor:s?null:t,isInitial:i,oldViewModel:n,newViewModel:o}}(d,c,z,g,_,A),U,d,P,F,B,V);f=function(e){if(!e)return e;return new Promise(function(t,i){e.then(t,t)})}(G)}else f=void 0;f||(B(null),F(null),V())}}.bind(null,D),function(e,t){t!==P&&null!=t&&(x(),i.Logger.error(t))}.bind(null,D))},null,{disposeWhenNodeIsRemoved:d}),{controlsDescendantBindings:!0}}},ko.virtualElements.allowedBindings.ojModule=!0}();i.Composite.register("oj-module",{view:'\x3c!-- ko ojModule: {"view":$properties.config.view, "viewModel":$properties.config.viewModel,"cleanupMode":$properties.config.cleanupMode,"animation":animation} --\x3e\x3c!-- /ko --\x3e',metadata:{properties:{config:{type:"object",properties:{viewModel:{type:"object"},view:{type:"array<object>"},cleanupMode:{type:"string",enumValues:["onDisconnect","none"],value:"onDisconnect"}}},animation:{type:"object"}},events:{transitionStart:{},transitionEnd:{},viewConnected:{},viewDisconnected:{}}},viewModel:function(e){var t=e.element,i=e.properties,n=this;function o(e){var i=e?e.view:null;return i&&i.length>0&&t.contains(i[0])}function s(e,t){var i=e&&e[t];"function"==typeof i&&ko.ignoreDependencies(i,e)}this.animation=e.properties.animation,this.propertyChanged=function(e){"animation"===e.property&&(n.animation=e.value)},this.connected=function(e){o(i&&i.config)&&s(i.config?i.config.viewModel:null,"connected")},this.disconnected=function(e){o(i&&i.config)&&s(i.config?i.config.viewModel:null,"disconnected")}}});var Pt,Mt,jt,Ht,Ut=function(){};function kt(e){this.updateDOM=function(){var t=e.element.customOptgroupRenderer;t&&"function"==typeof t&&t(e.element)}}function Bt(e){function t(e){var t=i.BaseCustomElementBridge.getSlotMap(e),n=["startIcon","","endIcon"];$.each(t,function(t,i){-1==n.indexOf(t)&&function(e,t){$.each(t,function(t,i){e.removeChild(i)})}(e,i)}),$.each(n,function(i,n){t[n]&&function(e,t){$.each(t,function(t,i){e.appendChild(i)})}(e,t[n])})}this.updateDOM=function(){var i=e.element.customOptionRenderer;t(e.element),i&&"function"==typeof i&&i(e.element)}}i.Object.createSubclass(Ut,i.Object,"ModuleElementUtils"),i.ModuleElementUtils=Ut,Ut.createView=function(e){if(!e||!e.viewPath)return Promise.resolve([]);var t=new Promise(function(t,i){(e.require?e.require:require)(["text!"+e.viewPath],t,i)});return new Promise(function(e,n){t.then(function(t){var n=i.__HtmlUtils.stringToNodeArray(t);return e(n)},function(e){return n(e)})})},Ut.createViewModel=function(e){return e&&e.viewModelPath?new Promise(function(t,i){(e.require?e.require:require)([e.viewModelPath],t,i)}):Promise.resolve(null)},i.ModuleAnimations={},i.ModuleAnimations._addContainedElements=function(e,t){for(var i=ko.virtualElements.firstChild(e);i;)1===i.nodeType?t.push(i):8===i.nodeType&&this._addContainedElements(i,t),i=ko.virtualElements.nextSibling(i)},i.ModuleAnimations._cacheVirtualViewRoot=function(e,t){e._ojOldRoot=t},i.ModuleAnimations._getVirtualViewRoot=function(e){return e._ojOldRoot},i.ModuleAnimations._defaultCanAnimate=function(e){if(e.isInitial)return!1;if(1===e.node.nodeType)return!0;if(8===e.node.nodeType){var t=[];if(i.ModuleAnimations._addContainedElements(e.node,t),t&&1===t.length)return i.ModuleAnimations._cacheVirtualViewRoot(e,t[0]),!0}return!1},i.ModuleAnimations._getOldView=function(e){var t;return 1===e.node.nodeType?t=e.node:8===e.node.nodeType&&(t=i.ModuleAnimations._getVirtualViewRoot(e)),t},i.ModuleAnimations._createViewParent=function(e){var t=$(document.createElement("div")),i={position:"absolute",height:e.offsetHeight+"px",width:e.offsetWidth+"px",left:e.offsetLeft+"px",top:e.offsetTop+"px"};t.appendTo(e.offsetParent),t.css(i),t.addClass("oj-animation-host-viewport");var n=document.createElement("div");return n.className="oj-animation-host",t.append(n),n},i.ModuleAnimations.createAnimation=function(e,t,n){return{canAnimate:i.ModuleAnimations._defaultCanAnimate,prepareAnimation:function(o){var s={},r=i.ModuleAnimations._getOldView(o);return t&&!n&&(s.newViewParent=i.ModuleAnimations._createViewParent(r)),e&&(s.oldViewParent=i.ModuleAnimations._createViewParent(r)),t&&n&&(s.newViewParent=i.ModuleAnimations._createViewParent(r)),s},animate:function(n){var o=n.oldViewParent,s=n.newViewParent,r=[];return o&&e&&r.push(i.AnimationUtils.startAnimation(o,"close",e)),s&&t&&r.push(i.AnimationUtils.startAnimation(s,"open",t)),Promise.all(r).then(function(){i.ModuleAnimations._postAnimationProcess(n)})}}},i.ModuleAnimations._removeViewParent=function(e,t){var i=e[t];if(i){var n=i.parentNode;n&&n.parentNode&&n.parentNode.removeChild(n)}},i.ModuleAnimations._postAnimationProcess=function(e){e.removeOldView(),e.insertNewView(),i.ModuleAnimations._removeViewParent(e,"newViewParent"),i.ModuleAnimations._removeViewParent(e,"oldViewParent")},i.ModuleAnimations._getModuleEffect=function(e){return null==i.ModuleAnimations._moduleEffects&&(i.ModuleAnimations._moduleEffects=i.ThemeUtils.parseJSONFromFontFamily("oj-animation-module-effects")),i.ModuleAnimations._moduleEffects?i.ModuleAnimations._moduleEffects[e]:null},i.ModuleAnimations._getImplementation=function(e){var t=i.ModuleAnimations._getModuleEffect(e);return t?i.ModuleAnimations.createAnimation(t.oldViewEffect,t.newViewEffect,t.newViewOnTop):null},i.ModuleAnimations._getNavigateMethod=function(e,t){return null==i.ModuleAnimations._navigateMethods&&(i.ModuleAnimations._navigateMethods=i.ThemeUtils.parseJSONFromFontFamily("oj-animation-navigate-methods")),i.ModuleAnimations._navigateMethods?i.ModuleAnimations._navigateMethods[t]:null},i.ModuleAnimations._navigateCanAnimate=function(e,t){var n=i.ModuleAnimations._getNavigateMethod(e,t);return!!i.ModuleAnimations[n]&&(null==i.ModuleAnimations[n].canAnimate||i.ModuleAnimations[n].canAnimate(e))},i.ModuleAnimations._navigatePrepareAnimation=function(e,t){var n=i.ModuleAnimations._getNavigateMethod(e,t);return i.ModuleAnimations[n]&&i.ModuleAnimations[n].prepareAnimation?i.ModuleAnimations[n].prepareAnimation(e):null},i.ModuleAnimations._navigateAnimate=function(e,t){var n=i.ModuleAnimations._getNavigateMethod(e,t);return i.ModuleAnimations[n]&&i.ModuleAnimations[n].animate?i.ModuleAnimations[n].animate(e):Promise.resolve()},i.ModuleAnimations._getNavigateImplementation=function(e){return{canAnimate:function(t){return i.ModuleAnimations._navigateCanAnimate(t,e)},prepareAnimation:function(t){return i.ModuleAnimations._navigatePrepareAnimation(t,e)},animate:function(t){return i.ModuleAnimations._navigateAnimate(t,e)}}},i.ModuleAnimations.coverLeft=i.ModuleAnimations._getImplementation("coverLeft"),i.ModuleAnimations.coverRight=i.ModuleAnimations._getImplementation("coverRight"),i.ModuleAnimations.revealLeft=i.ModuleAnimations._getImplementation("revealLeft"),i.ModuleAnimations.revealRight=i.ModuleAnimations._getImplementation("revealRight"),i.ModuleAnimations.coverStart="rtl"===i.DomUtils.getReadingDirection()?i.ModuleAnimations.coverRight:i.ModuleAnimations.coverLeft,i.ModuleAnimations.revealEnd="rtl"===i.DomUtils.getReadingDirection()?i.ModuleAnimations.revealLeft:i.ModuleAnimations.revealRight,i.ModuleAnimations.coverUp=i.ModuleAnimations._getImplementation("coverUp"),i.ModuleAnimations.revealDown=i.ModuleAnimations._getImplementation("revealDown"),i.ModuleAnimations.zoomIn=i.ModuleAnimations._getImplementation("zoomIn"),i.ModuleAnimations.zoomOut=i.ModuleAnimations._getImplementation("zoomOut"),i.ModuleAnimations.fade=i.ModuleAnimations._getImplementation("fade"),i.ModuleAnimations.pushStart=i.ModuleAnimations._getImplementation("pushStart"),i.ModuleAnimations.pushEnd=i.ModuleAnimations._getImplementation("pushEnd"),i.ModuleAnimations.navChild=i.ModuleAnimations._getNavigateImplementation("navChild"),i.ModuleAnimations.navParent=i.ModuleAnimations._getNavigateImplementation("navParent"),i.ModuleAnimations.drillIn=i.ModuleAnimations.navChild,i.ModuleAnimations.drillOut=i.ModuleAnimations.navParent,i.ModuleAnimations.navSiblingEarlier=i.ModuleAnimations._getNavigateImplementation("navSiblingEarlier"),i.ModuleAnimations.navSiblingLater=i.ModuleAnimations._getNavigateImplementation("navSiblingLater"),i.ModuleAnimations.switcher=function(e){return new function(){var t;function n(e){return function(i){return t[e].call(t,i)}}var o=this;this.canAnimate=function(s){var r=e(s);if(!(t=null==r?null:i.ModuleAnimations[r]))return!1;for(var a=["prepareAnimation","animate"],l=0;l<a.length;l++){var u=a[l];o[u]=n(u)}return n("canAnimate")(s)}}},void 0!==i.ListViewDndContext&&(i.NavigationListDndContext=function(e){i.NavigationListDndContext.superclass.constructor.call(this,e)},i.Object.createSubclass(i.NavigationListDndContext,i.ListViewDndContext,"oj.NavigationListDndContext"),i.NavigationListDndContext.prototype.GetDragAffordanceClass=function(){return"oj-tabbar-drag-handle"},i.NavigationListDndContext.prototype.GetDragImageClass=function(){return"oj-tabbar-drag-image"},i.NavigationListDndContext.prototype.GetDragItemClass=function(){return"oj-tabbar-drag-item"},i.NavigationListDndContext.prototype.GetCutStyleClass=function(){return"oj-tabbar-cut"},i.NavigationListDndContext.prototype.GetCommandPrefix=function(){return"oj-tabbar-"},i.NavigationListDndContext.prototype.shouldDragCurrentItem=function(){return!0},i.NavigationListDndContext.prototype.GetDragImageWidth=function(e){var t=this.listview.GetOption("edge");return"top"===t||"bottom"===t?e.offsetWidth:i.NavigationListDndContext.superclass.GetDragImageWidth.call(this,e)},i.NavigationListDndContext.prototype.GetDragSourceType=function(){return"text/ojnavigationlist-dragsource-id"},i.NavigationListDndContext.prototype.CreateReorderPayload=function(e,t,i){return{item:e[0],position:t,reference:i}},i.NavigationListDndContext.prototype.IsItemReOrdering=function(){return"enabled"==this.listview.GetOption("reorderable")},i.NavigationListDndContext.prototype.GetDefaultDataType=function(){return"text/ojnavigationlist-items-data"},i.NavigationListDndContext.prototype.SetDragItemImage=function(e,t){var i,n,o,s;e.target,o=Math.max(0,e.offsetX),s=Math.max(0,e.offsetY),(n=$(t[0].cloneNode(!0))).removeClass("oj-selected oj-focus oj-focus-highlight  oj-hover").addClass("oj-drag"),(i=$(document.createElement("div"))).get(0).className=this.listview.ojContext.element.get(0).className,i.addClass(this.GetDragImageClass()).css({width:this.GetDragImageWidth(t[0]),height:t[0].offsetHeight}).append(n),$("body").append(i),this.m_dragImage=i,e.dataTransfer.setDragImage(i.get(0),o,s)},i.NavigationListDndContext.prototype.GetCutItems=function(e){var t=[];return t.push(this.m_contextMenuItem&&this.m_contextMenuItem.length>0?this.m_contextMenuItem[0]:this._getActiveItem()),t}),i.__registerWidget("oj.ojNBox",$.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{animationOnDataChange:"none",animationOnDisplay:"none",cellContent:"auto",cellMaximize:"on",cells:null,columns:null,columnsTitle:"",countLabel:null,groupBehavior:"withinCell",groupAttributes:["color","indicatorColor","indicatorIconColor","indicatorIconPattern","indicatorIconShape"],hiddenCategories:[],hoverBehavior:"none",highlightedCategories:[],highlightMatch:"all",labelTruncation:"on",maximizedColumn:"",maximizedRow:"",nodes:null,otherColor:"#636363",otherThreshold:0,rows:null,rowsTitle:"",selection:[],selectionMode:"multiple",styleDefaults:{animationDuration:void 0,cellDefaults:{labelHalign:"start",labelStyle:void 0,maximizedSvgStyle:void 0,minimizedSvgStyle:void 0,showCount:"auto",svgStyle:void 0},columnLabelStyle:void 0,columnsTitleStyle:void 0,hoverBehaviorDelay:200,nodeDefaults:{borderColor:"",borderWidth:0,color:void 0,iconDefaults:{borderColor:"#000000",borderRadius:0,borderWidth:0,color:"",height:0,opacity:1,pattern:"none",shape:"square",source:"",width:0},indicatorColor:"",indicatorIconDefaults:{borderColor:"#000000",borderRadius:0,borderWidth:0,color:"",height:10,opacity:1,pattern:"none",shape:"square",source:"",width:10},labelStyle:void 0,secondaryLabelStyle:void 0},rowLabelStyle:void 0,rowsTitleStyle:void 0},tooltip:{renderer:null},touchResponse:"auto"},_CreateDvtComponent:function(e,t,i){return dvt.NBox.newInstance(e,t,i)},_ConvertLocatorToSubId:function(e){var t=e.subId;if("oj-nbox-cell"==t)t="cell["+e.row+","+e.column+"]";else if("oj-nbox-dialog"==t)t="dialog";else if("oj-nbox-dialog-close-button"==t)t="dialog#closeButton";else if("oj-nbox-group-node"==t)t=e.row&&e.column?"cell["+e.row+","+e.column+"]#groupNode[":"groupNode[",t+=e.groupCategory+"]";else if("oj-nbox-node"==t){t="";var i=e.id;t+="node["+this._component.getAutomation().getNodeIndexFromId(i)+"]"}else"oj-nbox-overflow"==t?t="cell["+e.row+","+e.column+"]#overflow":"oj-nbox-tooltip"==t&&(t="tooltip");return t},_ConvertSubIdToLocator:function(e){var t={};if(0==e.indexOf("node")){t.subId="oj-nbox-node";var i=this._GetFirstIndex(e),n=this._component.getAutomation();t.id=n.getNodeIdFromIndex(i)}else if(0==e.indexOf("cell")){var o=this._GetFirstBracketedString(e),s=o.indexOf(",");t.row=o.substring(0,s),t.column=o.substring(s+1);var r=e.indexOf("#");e.indexOf("#groupNode")>0?(t.subId="oj-nbox-group-node",t.groupCategory=this._GetFirstBracketedString(e.substring(r))):e.indexOf("#overflow")>0?t.subId="oj-nbox-overflow":t.subId="oj-nbox-cell"}else 0==e.indexOf("dialog")?e.indexOf("#closeButton")>0?t.subId="oj-nbox-dialog-close-button":t.subId="oj-nbox-dialog":0==e.indexOf("groupNode")?(t.subId="oj-nbox-group-node",t.groupCategory=this._GetFirstBracketedString(e)):"tooltip"==e&&(t.subId="oj-nbox-tooltip");return t},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-nbox"),e},_GetChildStyleClasses:function(){var e=this._super();return e["oj-dvtbase oj-nbox"]={path:"styleDefaults/animationDuration",property:"ANIM_DUR"},e["oj-nbox-columns-title"]={path:"styleDefaults/columnsTitleStyle",property:"TEXT"},e["oj-nbox-rows-title"]={path:"styleDefaults/rowsTitleStyle",property:"TEXT"},e["oj-nbox-column-label"]={path:"styleDefaults/columnLabelStyle",property:"TEXT"},e["oj-nbox-row-label"]={path:"styleDefaults/rowLabelStyle",property:"TEXT"},e["oj-nbox-cell"]={path:"styleDefaults/cellDefaults/_style",property:"BACKGROUND"},e["oj-nbox-cell oj-minimized"]={path:"styleDefaults/cellDefaults/minimizedStyle",property:"BACKGROUND"},e["oj-nbox-cell oj-maximized"]={path:"styleDefaults/cellDefaults/maximizedStyle",property:"BACKGROUND"},e["oj-nbox-cell-label"]={path:"styleDefaults/cellDefaults/labelStyle",property:"TEXT"},e["oj-nbox-cell-countlabel"]={path:"styleDefaults/cellDefaults/bodyCountLabelStyle",property:"TEXT"},e["oj-nbox-cell-countlabel oj-nbox-cell-header"]={path:"styleDefaults/cellDefaults/countLabelStyle",property:"TEXT"},e["oj-nbox-node"]={path:"styleDefaults/nodeDefaults/color",property:"background-color"},e["oj-nbox-node oj-hover"]={path:"styleDefaults/nodeDefaults/hoverColor",property:"border-color"},e["oj-nbox-node oj-selected"]={path:"styleDefaults/nodeDefaults/selectionColor",property:"border-color"},e["oj-nbox-node-label"]={path:"styleDefaults/nodeDefaults/labelStyle",property:"TEXT"},e["oj-nbox-node-secondarylabel"]={path:"styleDefaults/nodeDefaults/secondaryLabelStyle",property:"TEXT"},e["oj-nbox-node-categorylabel"]={path:"styleDefaults/_categoryNodeDefaults/labelStyle",property:"TEXT"},e["oj-nbox-dialog"]=[{path:"styleDefaults/_drawerDefaults/background",property:"background-color"},{path:"styleDefaults/_drawerDefaults/borderColor",property:"border-color"}],e["oj-nbox-dialog-label"]={path:"styleDefaults/_drawerDefaults/labelStyle",property:"TEXT"},e["oj-nbox-dialog-countlabel"]={path:"styleDefaults/_drawerDefaults/countLabelStyle",property:"TEXT"},e},_GetEventTypes:function(){return["optionChange"]},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtUtilBundle.NBOX"]=e.componentName,t["DvtNBoxBundle.HIGHLIGHTED_COUNT"]=e.highlightedCount,t["DvtNBoxBundle.OTHER"]=e.labelOther,t["DvtNBoxBundle.GROUP_NODE"]=e.labelGroup,t["DvtNBoxBundle.SIZE"]=e.labelSize,t["DvtNBoxBundle.ADDITIONAL_DATA"]=e.labelAdditionalData,t},_HandleEvent:function(e){if("adfPropertyChange"===e.type){var t=e.properties;for(var i in t){var n=t[i];"_drawer"==i?this.options[i]=n?{id:n}:null:"maximizedRow"!=i&&"maximizedColumn"!=i||this._UserOptionChange(i,n)}}else this._super(e)},_LoadResources:function(){null==this.options._resources&&(this.options._resources={});var e=this.options._resources;e.overflow_dwn={src:i.Config.getResourceUrl("resources/internal-deps/dvt/nbox/overflow_dwn.png"),width:34,height:9},e.overflow_ovr={src:i.Config.getResourceUrl("resources/internal-deps/dvt/nbox/overflow_ovr.png"),width:34,height:9},e.overflow_ena={src:i.Config.getResourceUrl("resources/internal-deps/dvt/nbox/overflow_ena.png"),width:34,height:9},e.overflow_dis={src:i.Config.getResourceUrl("resources/internal-deps/dvt/nbox/overflow_dis.png"),width:34,height:9},e.close_dwn={src:i.Config.getResourceUrl("resources/internal-deps/dvt/nbox/close_dwn.png"),width:16,height:16},e.close_ovr={src:i.Config.getResourceUrl("resources/internal-deps/dvt/nbox/close_ovr.png"),width:16,height:16},e.close_ena={src:i.Config.getResourceUrl("resources/internal-deps/dvt/nbox/close_ena.png"),width:16,height:16}},getNodeBySubId:function(e){return this._super(e)},getSubIdByNode:function(e){return this._super(e)},getRowsTitle:function(){return this._component.getAutomation().getData("rowsTitle")},getRowCount:function(){return this._component.getAutomation().getData("rowCount")},getRow:function(e){return this._component.getAutomation().getData("row",e)},getColumnsTitle:function(){return this._component.getAutomation().getData("columnsTitle")},getColumnCount:function(){return this._component.getAutomation().getData("columnCount")},getColumn:function(e){return this._component.getAutomation().getData("column",e)},getCell:function(e,t){var i=this._component.getAutomation(),n=i.getCell(e,t);return n&&(n.getGroupNode=function(e){return i.getCellGroupNode(n,e)},n.getNode=function(e){return i.getCellNode(n,e)}),n},getGroupBehavior:function(){return this._component.getAutomation().getData("groupBehavior")},getGroupNode:function(e){return this._component.getAutomation().getGroupNode(e)},getDialog:function(){var e=this._component.getAutomation(),t=e.getDialog();return t&&(t.getNode=function(t){return e.getDialogNode(t)}),t},getContextByNode:function(e){var t=this.getSubIdByNode(e);return t&&"oj-nbox-tooltip"!==t.subId&&"oj-nbox-dialog-close-button"!==t.subId&&"oj-nbox-overflow"!==t.subId?t:null},_GetComponentDeferredDataPaths:function(){return{root:["cells","rows","columns","nodes"]}}}),function(){i.CustomElementBridge.registerMetadata("oj-n-box","dvtBaseComponent",{properties:{animationOnDataChange:{type:"string",enumValues:["auto","none"]},animationOnDisplay:{type:"string",enumValues:["auto","none"]},cellContent:{type:"string",enumValues:["counts","auto"]},cellMaximize:{type:"string",enumValues:["off","on"]},cells:{type:"Array<object>|Promise"},columns:{type:"Array<object>|Promise"},columnsTitle:{type:"string"},countLabel:{},groupAttributes:{type:"Array<string>"},groupBehavior:{type:"string",enumValues:["acrossCells","none","withinCell"]},hiddenCategories:{type:"Array<string>",writeback:!0},highlightedCategories:{type:"Array<string>",writeback:!0},highlightMatch:{type:"string",enumValues:["any","all"]},hoverBehavior:{type:"string",enumValues:["dim","none"]},labelTruncation:{type:"string",enumValues:["ifRequired","on"]},maximizedColumn:{type:"string",writeback:!0},maximizedRow:{type:"string",writeback:!0},nodes:{type:"Array<object>|Promise"},otherColor:{type:"string"},otherThreshold:{type:"number"},rows:{type:"Array<object>|Promise"},rowsTitle:{type:"string"},selection:{type:"Array<string>",writeback:!0},selectionMode:{type:"string",enumValues:["none","single","multiple"]},styleDefaults:{type:"object",properties:{animationDuration:{type:"number"},cellDefaults:{type:"object",properties:{labelHalign:{type:"string",enumValues:["center","end","start"]},labelStyle:{type:"object"},maximizedSvgStyle:{type:"object"},minimizedSvgStyle:{type:"object"},showCount:{type:"string",enumValues:["on","off","auto"]},svgStyle:{type:"object"}}},columnLabelStyle:{type:"object"},columnsTitleStyle:{type:"object"},hoverBehaviorDelay:{type:"number"},nodeDefaults:{type:"object",properties:{borderColor:{type:"string"},borderWidth:{type:"number"},color:{type:"string"},iconDefaults:{type:"object",properties:{borderColor:{type:"string"},borderRadius:{type:"string"},borderWidth:{type:"number"},color:{type:"string"},height:{type:"number"},opacity:{type:"number"},pattern:{type:"string",enumValues:["smallChecker","smallCrosshatch","smallDiagonalLeft","smallDiagonalRight","smallDiamond","smallTriangle","largeChecker","largeCrosshatch","largeDiagonalLeft","largeDiagonalRight","largeDiamond","largeTriangle","none"]},shape:{type:"string"},source:{type:"string"},width:{type:"number"}}},indicatorColor:{type:"string"},indicatorIconDefaults:{type:"object",properties:{borderColor:{type:"string"},borderRadius:{type:"string"},borderWidth:{type:"number"},color:{type:"string"},height:{type:"number"},opacity:{type:"number"},pattern:{type:"string",enumValues:["smallChecker","smallCrosshatch","smallDiagonalLeft","smallDiagonalRight","smallDiamond","smallTriangle","largeChecker","largeCrosshatch","largeDiagonalLeft","largeDiagonalRight","largeDiamond","largeTriangle","none"]},shape:{type:"string"},source:{type:"string"},width:{type:"number"}}},labelStyle:{type:"object"},secondaryLabelStyle:{type:"object"}}},rowLabelStyle:{type:"object"},rowsTitleStyle:{type:"object"}}},tooltip:{type:"object",properties:{renderer:{}}},touchResponse:{type:"string",enumValues:["touchStart","auto"]},translations:{type:"Object",properties:{componentName:{type:"string",value:"NBox"},highlightedCount:{type:"string",value:"{0}/{1}"},labelAdditionalData:{type:"string",value:"Additional Data"},labelAndValue:{type:"string",value:"{0}: {1}"},labelClearSelection:{type:"string",value:"Clear Selection"},labelCountWithTotal:{type:"string",value:"{0} of {1}"},labelDataVisualization:{type:"string",value:"Data Visualization"},labelGroup:{type:"string",value:"Group"},labelInvalidData:{type:"string",value:"Invalid data"},labelNoData:{type:"string",value:"No data to display"},labelOther:{type:"string",value:"Other"},labelSize:{type:"string",value:"Size"},stateCollapsed:{type:"string",value:"Collapsed"},stateDrillable:{type:"string",value:"Drillable"},stateExpanded:{type:"string",value:"Expanded"},stateHidden:{type:"string",value:"Hidden"},stateIsolated:{type:"string",value:"Isolated"},stateMaximized:{type:"string",value:"Maximized"},stateMinimized:{type:"string",value:"Minimized"},stateSelected:{type:"string",value:"Selected"},stateUnselected:{type:"string",value:"Unselected"},stateVisible:{type:"string",value:"Visible"}}}},events:{},methods:{getCell:{},getColumn:{},getColumnCount:{},getColumnsTitle:{},getContextByNode:{},getDialog:{},getGroupBehavior:{},getGroupNode:{},getRow:{},getRowCount:{},getRowsTitle:{}},extension:{_WIDGET_NAME:"ojNBox"}});var e=i.CustomElementBridge.getMetadata("oj-n-box");i.CustomElementBridge.register("oj-n-box",{metadata:e,parseFunction:e.extension._DVT_PARSE_FUNC({"style-defaults.node-defaults.icon-defaults.shape":!0,"style-defaults.node-defaults.indicator-icon-defaults.shape":!0})})}(),i.OffcanvasUtils={},i.OffcanvasUtils._DATA_EDGE_KEY="oj-offcanvasEdge",i.OffcanvasUtils._DATA_OFFCANVAS_KEY="oj-offcanvas",i.OffcanvasUtils._DATA_MEDIA_QUERY_KEY="oj-mediaQueryListener",i.OffcanvasUtils._DATA_HAMMER_KEY="oj-offcanvasHammer",i.OffcanvasUtils._DATA_STYLE_KEY="oj-offcanvasStyle",i.OffcanvasUtils.SELECTOR_KEY="selector",i.OffcanvasUtils.CONTENT_KEY="content",i.OffcanvasUtils.EDGE_START="start",i.OffcanvasUtils.EDGE_END="end",i.OffcanvasUtils.EDGE_TOP="top",i.OffcanvasUtils.EDGE_BOTTOM="bottom",i.OffcanvasUtils.DISPLAY_MODE_KEY="displayMode",i.OffcanvasUtils.DISPLAY_MODE_PUSH="push",i.OffcanvasUtils.DISPLAY_MODE_OVERLAY="overlay",i.OffcanvasUtils.DISPLAY_MODE_PIN="pin",i.OffcanvasUtils.MODALITY_KEY="modality",i.OffcanvasUtils.MODALITY_NONE="none",i.OffcanvasUtils.MODALITY_MODAL="modal",i.OffcanvasUtils.DISMISS_HANDLER_KEY="_dismissHandler",i.OffcanvasUtils.OPEN_PROMISE_KEY="_openPromise",i.OffcanvasUtils.CLOSE_PROMISE_KEY="_closePromise",i.OffcanvasUtils.GLASS_PANE_KEY="_glassPane",i.OffcanvasUtils.SURROGATE_KEY="_surrogate",i.OffcanvasUtils.ANIMATE_WRAPPER_KEY="_animateWrapper",i.OffcanvasUtils.ANIMATE_KEY="_animate",i.OffcanvasUtils.SURROGATE_ATTR="data-oj-offcanvas-surrogate-id",i.OffcanvasUtils.OUTER_WRAPPER_SELECTOR="oj-offcanvas-outer-wrapper",i.OffcanvasUtils.OPEN_SELECTOR="oj-offcanvas-open",i.OffcanvasUtils.TRANSITION_SELECTOR="oj-offcanvas-transition",i.OffcanvasUtils.PIN_WRAPPER_SELECTOR="oj-offcanvas-pin",i.OffcanvasUtils.PIN_TRANSITION_SELECTOR="oj-offcanvas-pin-transition",i.OffcanvasUtils.GLASSPANE_SELECTOR="oj-offcanvas-glasspane",i.OffcanvasUtils.GLASSPANE_DIM_SELECTOR="oj-offcanvas-glasspane-dim",i.OffcanvasUtils.VETO_BEFOREOPEN_MSG="ojbeforeopen veto",i.OffcanvasUtils.VETO_BEFORECLOSE_MSG="ojbeforeclose veto",i.OffcanvasUtils._shiftSelector={start:"oj-offcanvas-shift-start",end:"oj-offcanvas-shift-end",top:"oj-offcanvas-shift-down",bottom:"oj-offcanvas-shift-up"},i.OffcanvasUtils._drawerSelector={start:"oj-offcanvas-start",end:"oj-offcanvas-end",top:"oj-offcanvas-top",bottom:"oj-offcanvas-bottom"},i.OffcanvasUtils._getDisplayMode=function(e){var t=e[i.OffcanvasUtils.DISPLAY_MODE_KEY];return t!==i.OffcanvasUtils.DISPLAY_MODE_OVERLAY&&t!==i.OffcanvasUtils.DISPLAY_MODE_PUSH&&t!==i.OffcanvasUtils.DISPLAY_MODE_PIN&&(t=(i.ThemeUtils.parseJSONFromFontFamily("oj-offcanvas-option-defaults")||{}).displayMode),t},i.OffcanvasUtils._getDrawer=function(e){return $(e[i.OffcanvasUtils.SELECTOR_KEY])},i.OffcanvasUtils._isModal=function(e){return e[i.OffcanvasUtils.MODALITY_KEY]===i.OffcanvasUtils.MODALITY_MODAL},i.OffcanvasUtils._isOpen=function(e){return e.hasClass(i.OffcanvasUtils.OPEN_SELECTOR)},i.OffcanvasUtils._getOuterWrapper=function(e){return e.closest("."+i.OffcanvasUtils.OUTER_WRAPPER_SELECTOR)},i.OffcanvasUtils._getAnimateWrapper=function(e){var t=i.OffcanvasUtils._getDrawer(e);return i.OffcanvasUtils._noInnerWrapper(e)||e[i.OffcanvasUtils.DISPLAY_MODE_KEY]===i.OffcanvasUtils.DISPLAY_MODE_OVERLAY?t:e[i.OffcanvasUtils.ANIMATE_WRAPPER_KEY]?t.closest("."+e[i.OffcanvasUtils.ANIMATE_WRAPPER_KEY]):t.parent()},i.OffcanvasUtils._getShiftSelector=function(e){var t=i.OffcanvasUtils._shiftSelector[e];if(!t)throw new Error("Invalid edge: "+e);return t},i.OffcanvasUtils._isRTL=function(){return"rtl"===i.DomUtils.getReadingDirection()},i.OffcanvasUtils._setTransform=function(e,t){e.css({"-webkit-transform":t,transform:t})},i.OffcanvasUtils._getTranslationX=function(e,t,n){var o=e===i.OffcanvasUtils.EDGE_END;return(i.OffcanvasUtils._isRTL()||n)&&(o=!o),"translate3d("+(o?"-":"")+t+", 0, 0)"},i.OffcanvasUtils._setTranslationX=function(e,t,n){i.OffcanvasUtils._setTransform(e,i.OffcanvasUtils._getTranslationX(t,n,!1))},i.OffcanvasUtils._getTranslationY=function(e,t){return"translate3d(0, "+(e===i.OffcanvasUtils.EDGE_BOTTOM?"-":"")+t+", 0)"},i.OffcanvasUtils._setTranslationY=function(e,t,n){i.OffcanvasUtils._setTransform(e,i.OffcanvasUtils._getTranslationY(t,n))},i.OffcanvasUtils._getTranslationY2=function(e,t){return"translate3d(0, "+(t?"-":"")+e+", 0)"},i.OffcanvasUtils._setAnimateClass=function(e,t,n,o,s){t.addClass(i.OffcanvasUtils.TRANSITION_SELECTOR),i.OffcanvasUtils._setTransform(t,o),n.addClass(i.OffcanvasUtils.TRANSITION_SELECTOR),i.OffcanvasUtils._setTransform(n,s)},i.OffcanvasUtils._saveEdge=function(e){var t=e.edge,n=i.OffcanvasUtils._getDrawer(e);return t&&t.length||(t=n.hasClass("oj-offcanvas-start")?i.OffcanvasUtils.EDGE_START:n.hasClass("oj-offcanvas-end")?i.OffcanvasUtils.EDGE_END:n.hasClass("oj-offcanvas-top")?i.OffcanvasUtils.EDGE_TOP:n.hasClass("oj-offcanvas-bottom")?i.OffcanvasUtils.EDGE_BOTTOM:i.OffcanvasUtils.EDGE_START),$.data(n[0],i.OffcanvasUtils._DATA_EDGE_KEY,t),t},i.OffcanvasUtils._getEdge=function(e){return $.data(e[0],i.OffcanvasUtils._DATA_EDGE_KEY)},i.OffcanvasUtils._toggleClass=function(e,t,n){var o=e[i.OffcanvasUtils.DISPLAY_MODE_KEY],s=i.OffcanvasUtils._getDrawer(e),r=i.OffcanvasUtils.OPEN_SELECTOR,a=o===i.OffcanvasUtils.DISPLAY_MODE_OVERLAY?i.OffcanvasUtils.TRANSITION_SELECTOR+" oj-offcanvas-overlay":i.OffcanvasUtils.TRANSITION_SELECTOR;if(n)s.addClass(r),void 0===e[i.OffcanvasUtils.ANIMATE_KEY]&&t.addClass(a);else{e.makeFocusable&&i.DomUtils.makeFocusable({element:s,remove:!0});var l=e.tabindex;void 0===l?s.removeAttr("tabindex"):s.attr("tabindex",l),s.removeClass(r),t.removeClass(a)}},i.OffcanvasUtils._setFocus=function(e){var t,n=e,o=i.OffcanvasUtils._getDrawer(n),s=o.find("[autofocus]");if(0===s.length&&(s=o.find(":tabbable")),0===s.length){var r=o.attr("tabindex");void 0!==r&&(n.tabindex=r),o.attr("tabindex","-1"),t=o,i.DomUtils.makeFocusable({element:o,applyHighlight:!0}),n.makeFocusable=!0}else t=s[0];i.FocusUtils.focusElement(t)},i.OffcanvasUtils._isAutoDismiss=function(e){return"none"!==e.autoDismiss},i.OffcanvasUtils._calcTransitionTime=function(e){for(var t=e.css("transitionProperty").split(","),i=e.css("transitionDelay").split(","),n=e.css("transitionDuration").split(","),o=0,s=0;s<t.length;s++){var r=n[s%n.length],a=r.indexOf("ms")>-1?parseFloat(r):1e3*parseFloat(r);if(a>0){var l=i[s%i.length],u=l.indexOf("ms")>-1?parseFloat(l):1e3*parseFloat(l);o=Math.max(o,u+a)}}return o+100},i.OffcanvasUtils._onTransitionEnd=function(e,t){var n,o="transitionend.oc webkitTransitionEnd.oc",s=function(){n&&(clearTimeout(n),n=void 0),e.off(o,s),t(e)};e.on(o,s),n=setTimeout(s,i.OffcanvasUtils._calcTransitionTime(e))},i.OffcanvasUtils._closeWithCatch=function(e){i.OffcanvasUtils.close(e).catch(function(e){i.Logger.warn("Offcancas close failed: "+e)})},i.OffcanvasUtils._registerCloseHandler=function(e){var t=e;if(i.OffcanvasUtils._unregisterCloseHandler(t),i.OffcanvasUtils._isAutoDismiss(t)){var n=i.OffcanvasUtils._getDrawer(t),o=function(e){var o=e.target;i.DomUtils.isChromeEvent(e)||"focus"===e.type&&!$(o).is(":focusable")||(null!=$.data(n[0],i.OffcanvasUtils._DATA_OFFCANVAS_KEY)?i.DomUtils.isLogicalAncestorOrSelf(n[0],o)||i.OffcanvasUtils._closeWithCatch(t):i.OffcanvasUtils._unregisterCloseHandler(t))};t[i.OffcanvasUtils.DISMISS_HANDLER_KEY]=o;var s=document.documentElement;i.DomUtils.isTouchSupported()&&s.addEventListener("touchstart",o,!0),s.addEventListener("mousedown",o,!0),s.addEventListener("focus",o,!0)}i.OffcanvasUtils._registerSwipeHandler(t)},i.OffcanvasUtils._unregisterCloseHandler=function(e){var t=e,n=t[i.OffcanvasUtils.DISMISS_HANDLER_KEY];if(n){var o=document.documentElement;i.DomUtils.isTouchSupported()&&o.removeEventListener("touchstart",n,!0),o.removeEventListener("mousedown",n,!0),o.removeEventListener("focus",n,!0),delete t[i.OffcanvasUtils.DISMISS_HANDLER_KEY],t[i.OffcanvasUtils.DISMISS_HANDLER_KEY]=null}i.OffcanvasUtils._unregisterSwipeHandler(t)},i.OffcanvasUtils._registerSwipeHandler=function(e){if(i.DomUtils.isTouchSupported()){var t,n,o,s=e,r=s[i.OffcanvasUtils.SELECTOR_KEY],a=$(r),l=i.OffcanvasUtils._getEdge(a);l===i.OffcanvasUtils.EDGE_START&&!i.OffcanvasUtils._isRTL()||l===i.OffcanvasUtils.EDGE_END&&i.OffcanvasUtils._isRTL()?(n={recognizers:[[Hammer.Swipe,{direction:Hammer.DIRECTION_LEFT}]]},t="swipeleft"):l===i.OffcanvasUtils.EDGE_START&&i.OffcanvasUtils._isRTL()||l===i.OffcanvasUtils.EDGE_END&&!i.OffcanvasUtils._isRTL()?(n={recognizers:[[Hammer.Swipe,{direction:Hammer.DIRECTION_RIGHT}]]},t="swiperight"):l===i.OffcanvasUtils.EDGE_TOP?(n={recognizers:[[Hammer.Swipe,{direction:Hammer.DIRECTION_UP}]]},t="swipeup"):l===i.OffcanvasUtils.EDGE_BOTTOM&&(n={recognizers:[[Hammer.Swipe,{direction:Hammer.DIRECTION_DOWN}]]},t="swipedown"),o=a.ojHammer(n).on(t,function(e){e.target===a[0]&&(e.preventDefault(),i.OffcanvasUtils._closeWithCatch(s))}),$.data($(r)[0],i.OffcanvasUtils._DATA_HAMMER_KEY,{event:t,hammer:o})}},i.OffcanvasUtils._unregisterSwipeHandler=function(e){var t=i.OffcanvasUtils._getDrawer(e);if(t.length>0){var n=$.data(t[0],i.OffcanvasUtils._DATA_HAMMER_KEY);n&&n.hammer.off(n.event)}},i.OffcanvasUtils._isFixed=function(e){return i.OffcanvasUtils._getOuterWrapper(e).hasClass("oj-offcanvas-page")},i.OffcanvasUtils._isPin=function(e){return e[i.OffcanvasUtils.DISPLAY_MODE_KEY]===i.OffcanvasUtils.DISPLAY_MODE_PIN},i.OffcanvasUtils._noInnerWrapper=function(e){return e[i.OffcanvasUtils.CONTENT_KEY]||i.OffcanvasUtils._isFixed(i.OffcanvasUtils._getDrawer(e))||i.OffcanvasUtils._isPin(e)},i.OffcanvasUtils._saveStyles=function(e){var t=e.attr("style");void 0!==t&&$.data(e[0],i.OffcanvasUtils._DATA_STYLE_KEY,t)},i.OffcanvasUtils._restoreStyles=function(e){var t=$.data(e[0],i.OffcanvasUtils._DATA_STYLE_KEY);t?e.attr("style",t):e.removeAttr("style")},i.OffcanvasUtils._toggleOuterWrapper=function(e,t,n){var o=i.OffcanvasUtils._getEdge(t),s=i.OffcanvasUtils._getShiftSelector(o),r=i.OffcanvasUtils._getOuterWrapper(t);i.Assert.assertPrototype(r,$);var a=r.hasClass(s);return n||r.toggleClass(s,!a),a},i.OffcanvasUtils._afterCloseHandler=function(e){var t=i.OffcanvasUtils._getAnimateWrapper(e);if(""===t.get(0).style.transform){i.OffcanvasUtils._unregisterCloseHandler(e);var n=i.OffcanvasUtils._getDrawer(e),o=i.OffcanvasUtils._isPin(e),s=null;try{s=$.data(n[0],i.OffcanvasUtils._DATA_OFFCANVAS_KEY)}catch(e){}s===e&&(o?n.removeClass(i.OffcanvasUtils.OPEN_SELECTOR+" "+i.OffcanvasUtils.PIN_TRANSITION_SELECTOR):i.OffcanvasUtils._toggleClass(e,t,!1),i.OffcanvasUtils._removeModality(e),o&&(i.OffcanvasUtils._getOuterWrapper(n).removeClass(i.OffcanvasUtils.PIN_WRAPPER_SELECTOR),i.OffcanvasUtils._restoreStyles(n)),n.trigger("ojclose",e),$.removeData(n[0],i.OffcanvasUtils._DATA_OFFCANVAS_KEY))}},i.OffcanvasUtils._setVisible=function(e,t,n){var o=$(e),s=!!t;s&&i.OffcanvasUtils._isOpen(o)&&i.OffcanvasUtils._close(e,!1),o.toggleClass(i.OffcanvasUtils._drawerSelector[n],!s)},i.OffcanvasUtils.setupResponsive=function(e){var t=e.query;if(null!==t){var n=e[i.OffcanvasUtils.SELECTOR_KEY],o=window.matchMedia(t),s=i.OffcanvasUtils._saveEdge(e),r=function(e){i.OffcanvasUtils._setVisible(n,e.matches,s)};o.addListener(r),i.OffcanvasUtils._setVisible(n,o.matches,s),$.data($(n)[0],i.OffcanvasUtils._DATA_MEDIA_QUERY_KEY,{mqList:o,mqListener:r})}},i.OffcanvasUtils.tearDownResponsive=function(e){var t=i.OffcanvasUtils._getDrawer(e),n=$.data(t[0],i.OffcanvasUtils._DATA_MEDIA_QUERY_KEY);n&&(n.mqList.removeListener(n.mqListener),$.removeData(t[0],i.OffcanvasUtils._DATA_MEDIA_QUERY_KEY))},i.OffcanvasUtils._openPush=function(e,t,n,o){var s=i.OffcanvasUtils._getDrawer(e),r=$(e[i.OffcanvasUtils.CONTENT_KEY]);i.Assert.assertPrototype(r,$);var a,l=!0,u=e.size,h=function(n){n.removeClass(i.OffcanvasUtils.TRANSITION_SELECTOR),l?l=!1:(o!==i.OffcanvasUtils.EDGE_END&&o!==i.OffcanvasUtils.EDGE_BOTTOM||i.OffcanvasUtils._setFocus(e),s.trigger("ojopen",e),i.OffcanvasUtils._registerCloseHandler(e),t(!0))};s.addClass(i.OffcanvasUtils.OPEN_SELECTOR),window.setTimeout(function(){o===i.OffcanvasUtils.EDGE_START||o===i.OffcanvasUtils.EDGE_END?(void 0===u&&(u=s.outerWidth(!0)+"px"),a=i.OffcanvasUtils._getTranslationX(o,u,!1)):(void 0===u&&(u=s.outerHeight(!0)+"px"),i.OffcanvasUtils._setTransform(s,i.OffcanvasUtils._getTranslationY2(u,o===i.OffcanvasUtils.EDGE_TOP)),a=i.OffcanvasUtils._getTranslationY2(u,o!==i.OffcanvasUtils.EDGE_TOP)),window.setTimeout(function(){i.OffcanvasUtils._setAnimateClass(e,s,r,"translate3d(0, 0, 0)",a),i.OffcanvasUtils._toggleOuterWrapper(e,s,!1),i.OffcanvasUtils._onTransitionEnd(r,h),i.OffcanvasUtils._onTransitionEnd(s,h)},0)},0),i.OffcanvasUtils._applyModality(e,s),o!==i.OffcanvasUtils.EDGE_START&&o!==i.OffcanvasUtils.EDGE_TOP||i.OffcanvasUtils._setFocus(e)},i.OffcanvasUtils._openOverlay=function(e,t,n,o){var s=i.OffcanvasUtils._getDrawer(e);i.OffcanvasUtils._toggleClass(e,s,!0);var r=e.size;r&&(o===i.OffcanvasUtils.EDGE_START||o===i.OffcanvasUtils.EDGE_END?i.OffcanvasUtils._setTransform(s,i.OffcanvasUtils._getTranslationX(o,r,!0)):i.OffcanvasUtils._setTransform(s,i.OffcanvasUtils._getTranslationY(o,r))),window.setTimeout(function(){i.OffcanvasUtils._toggleOuterWrapper(e,s,!1)},20),i.OffcanvasUtils._applyModality(e,s),o!==i.OffcanvasUtils.EDGE_START&&o!==i.OffcanvasUtils.EDGE_TOP||i.OffcanvasUtils._setFocus(e),i.OffcanvasUtils._onTransitionEnd(s,function(){s.removeClass(i.OffcanvasUtils.TRANSITION_SELECTOR),o!==i.OffcanvasUtils.EDGE_END&&o!==i.OffcanvasUtils.EDGE_BOTTOM||i.OffcanvasUtils._setFocus(e),s.trigger("ojopen",e),i.OffcanvasUtils._registerCloseHandler(e),t(!0)})},i.OffcanvasUtils._closePush=function(e,t,n,o,s){var r=$(e[i.OffcanvasUtils.CONTENT_KEY]),a=!0,l=function(){a||(r.removeClass(i.OffcanvasUtils.TRANSITION_SELECTOR),i.OffcanvasUtils._setTransform(r,""),i.OffcanvasUtils._afterCloseHandler(e),t(!0)),a=!1};i.OffcanvasUtils._setTransform(o,""),i.OffcanvasUtils._setTransform(r,""),i.OffcanvasUtils._toggleOuterWrapper(e,o,!1),i.OffcanvasUtils._isModal(e)&&e[i.OffcanvasUtils.GLASS_PANE_KEY].removeClass(i.OffcanvasUtils.GLASSPANE_DIM_SELECTOR),s?(r.addClass(i.OffcanvasUtils.TRANSITION_SELECTOR),o.addClass(i.OffcanvasUtils.TRANSITION_SELECTOR),i.OffcanvasUtils._onTransitionEnd(o,l),i.OffcanvasUtils._onTransitionEnd(r,l)):(a=!1,l())},i.OffcanvasUtils._closeOverlay=function(e,t,n,o,s){var r=function(){i.OffcanvasUtils._afterCloseHandler(e),t(!0)};i.OffcanvasUtils._toggleOuterWrapper(e,o,!1),i.OffcanvasUtils._isModal(e)&&e[i.OffcanvasUtils.GLASS_PANE_KEY].removeClass(i.OffcanvasUtils.GLASSPANE_DIM_SELECTOR),s?(o.addClass(i.OffcanvasUtils.TRANSITION_SELECTOR),i.OffcanvasUtils._onTransitionEnd(o,r)):r()},i.OffcanvasUtils._openOldDrawer=function(e,t,n,o,s){var r,a=i.OffcanvasUtils._getDrawer(e),l=i.OffcanvasUtils._getAnimateWrapper(e);i.Assert.assertPrototype(l,$),i.OffcanvasUtils._toggleClass(e,l,!0),o===i.OffcanvasUtils.EDGE_START||o===i.OffcanvasUtils.EDGE_END?(r=void 0===r?a.outerWidth(!0)+"px":r,s===i.OffcanvasUtils.DISPLAY_MODE_PUSH&&i.OffcanvasUtils._setTranslationX(l,o,r)):(r=void 0===r?a.outerHeight(!0)+"px":r,s===i.OffcanvasUtils.DISPLAY_MODE_PUSH&&i.OffcanvasUtils._setTranslationY(l,o,r)),window.setTimeout(function(){i.OffcanvasUtils._toggleOuterWrapper(e,a,!1)},10),i.OffcanvasUtils._applyModality(e,a),o!==i.OffcanvasUtils.EDGE_START&&o!==i.OffcanvasUtils.EDGE_TOP||i.OffcanvasUtils._setFocus(e),i.OffcanvasUtils._onTransitionEnd(l,function(){l.removeClass(i.OffcanvasUtils.TRANSITION_SELECTOR),o!==i.OffcanvasUtils.EDGE_END&&o!==i.OffcanvasUtils.EDGE_BOTTOM||i.OffcanvasUtils._setFocus(e),a.trigger("ojopen",e),i.OffcanvasUtils._registerCloseHandler(e),t(!0)})},i.OffcanvasUtils._closeOldDrawer=function(e,t,n,o,s){var r=e[i.OffcanvasUtils.DISPLAY_MODE_KEY],a=i.OffcanvasUtils._getAnimateWrapper(e),l=function(){i.OffcanvasUtils._afterCloseHandler(e),t(!0)};r===i.OffcanvasUtils.DISPLAY_MODE_PUSH&&i.OffcanvasUtils._setTransform(a,""),i.OffcanvasUtils._toggleOuterWrapper(e,o,!1),i.OffcanvasUtils._isModal(e)&&e[i.OffcanvasUtils.GLASS_PANE_KEY].removeClass(i.OffcanvasUtils.GLASSPANE_DIM_SELECTOR),s?(a.addClass(i.OffcanvasUtils.TRANSITION_SELECTOR),i.OffcanvasUtils._onTransitionEnd(a,l)):l()},i.OffcanvasUtils.open=function(e){var t,n=i.OffcanvasUtils._getDrawer(e),o=$.data(n[0],i.OffcanvasUtils._DATA_OFFCANVAS_KEY);if(o){if(o[i.OffcanvasUtils.CLOSE_PROMISE_KEY])return o[i.OffcanvasUtils.CLOSE_PROMISE_KEY];if(o[i.OffcanvasUtils.OPEN_PROMISE_KEY])return o[i.OffcanvasUtils.OPEN_PROMISE_KEY]}var s=!1,r=new Promise(function(o,r){i.Assert.assertPrototype(n,$);var a=i.OffcanvasUtils._saveEdge(e),l=$.Event("ojbeforeopen");if(n.trigger(l,e),!1===l.result)return r(i.OffcanvasUtils.VETO_BEFOREOPEN_MSG),void(s=!0);var u=i.OffcanvasUtils._getDisplayMode(e),h=i.OffcanvasUtils._isPin(e);!h||a!==i.OffcanvasUtils.EDGE_TOP&&a!==i.OffcanvasUtils.EDGE_BOTTOM||(u=i.OffcanvasUtils.DISPLAY_MODE_PUSH);var d=$.extend({},e);if(d[i.OffcanvasUtils.DISPLAY_MODE_KEY]=u,$.data(n[0],i.OffcanvasUtils._DATA_OFFCANVAS_KEY,d),e[i.OffcanvasUtils.CONTENT_KEY]){if(!i.OffcanvasUtils._noInnerWrapper(e))throw new Error("Error: Both main content selector and the inner wrapper <div class='oj-offcanvas-inner-wrapper'> are provided. Please remove the inner wrapper.");var c=i.Context.getContext(n[0]).getBusyContext();t=c.addBusyState({description:"The offcanvas selector ='"+e[i.OffcanvasUtils.SELECTOR_KEY]+"' doing the open animation."}),h||(u===i.OffcanvasUtils.DISPLAY_MODE_PUSH?i.OffcanvasUtils._openPush(d,o,r,a):i.OffcanvasUtils._openOverlay(d,o,r,a))}else i.OffcanvasUtils._openOldDrawer(d,o,r,a,u)});if(r=r.then(function(e){return t&&t(),e},function(e){throw t&&t(),e}),!s){var a=$.data(n[0],i.OffcanvasUtils._DATA_OFFCANVAS_KEY);a&&(a[i.OffcanvasUtils.OPEN_PROMISE_KEY]=r,i.Components.subtreeShown(n[0]))}return r},i.OffcanvasUtils.close=function(e){return i.OffcanvasUtils._close(e[i.OffcanvasUtils.SELECTOR_KEY],void 0===e[i.OffcanvasUtils.ANIMATE_KEY])},i.OffcanvasUtils._close=function(e,t){var n=$(e);i.Assert.assertPrototype(n,$);var o,s=$.data(n[0],i.OffcanvasUtils._DATA_OFFCANVAS_KEY);if(s&&s[i.OffcanvasUtils.CLOSE_PROMISE_KEY])return s[i.OffcanvasUtils.CLOSE_PROMISE_KEY];var r=!1,a=new Promise(function(a,l){if(i.OffcanvasUtils._isOpen(n)){e!==s[i.OffcanvasUtils.SELECTOR_KEY]&&a(!0),i.OffcanvasUtils._toggleOuterWrapper(s,n,!0)||a(!0);var u=$.Event("ojbeforeclose");if(n.trigger(u,s),!1===u.result)return l(i.OffcanvasUtils.VETO_BEFORECLOSE_MSG),void(r=!0);if(t){var h=i.Context.getContext(n[0]).getBusyContext();o=h.addBusyState({description:"The offcanvas selector ='"+s[i.OffcanvasUtils.SELECTOR_KEY]+"' doing the close animation."})}var d=s[i.OffcanvasUtils.DISPLAY_MODE_KEY];s[i.OffcanvasUtils.CONTENT_KEY]?d===i.OffcanvasUtils.DISPLAY_MODE_PUSH?i.OffcanvasUtils._closePush(s,a,l,n,t):i.OffcanvasUtils._closeOverlay(s,a,l,n,t):i.OffcanvasUtils._closeOldDrawer(s,a,l,n,t)}else a(!0)});return a=a.then(function(e){return o&&o(),e},function(e){throw o&&o(),e}),r||(s=$.data(n[0],i.OffcanvasUtils._DATA_OFFCANVAS_KEY))&&(s[i.OffcanvasUtils.CLOSE_PROMISE_KEY]=a,i.Components.subtreeHidden(n[0])),a},i.OffcanvasUtils.toggle=function(e){var t=i.OffcanvasUtils._getDrawer(e);return i.Assert.assertPrototype(t,$),i.OffcanvasUtils._isOpen(t)?i.OffcanvasUtils.close(e):i.OffcanvasUtils.open(e)},i.OffcanvasUtils._addGlassPane=function(e){var t=$("<div>");return t.addClass(i.OffcanvasUtils.GLASSPANE_SELECTOR),t.attr("role","presentation"),t.attr("aria-hidden","true"),t.appendTo(e.parent()),t.on("keydown keyup keypress mousedown mouseup mouseover mouseout click focusin focus",function(e){e.stopPropagation(),e.preventDefault()}),t},i.OffcanvasUtils._createSurrogate=function(e){var t=$("<span style='display:none'>");t.attr("aria-hidden","true");var n,o=e.attr("id");return o?(n=[o,"surrogate"].join("_"),t.attr("id",n)):n=t.uniqueId(),t.insertBefore(e),e.attr(i.OffcanvasUtils.SURROGATE_ATTR,n),t},i.OffcanvasUtils._swapOrder=function(e,t){e[i.OffcanvasUtils.SURROGATE_KEY]=i.OffcanvasUtils._createSurrogate(t),t.appendTo(t.parent())},i.OffcanvasUtils._restoreOrder=function(e){var t=i.OffcanvasUtils._getDrawer(e),n=e[i.OffcanvasUtils.SURROGATE_KEY];t&&n&&t.attr(i.OffcanvasUtils.SURROGATE_ATTR)===n.attr("id")&&(t.insertAfter(n),t.removeAttr(i.OffcanvasUtils.SURROGATE_ATTR),n.remove())},i.OffcanvasUtils._applyModality=function(e,t){var n=e;i.OffcanvasUtils._isModal(n)&&(n[i.OffcanvasUtils.GLASS_PANE_KEY]=i.OffcanvasUtils._addGlassPane(t),i.OffcanvasUtils._swapOrder(n,t),$(n[i.OffcanvasUtils.CONTENT_KEY]).attr("aria-hidden","true"),window.setTimeout(function(){n[i.OffcanvasUtils.GLASS_PANE_KEY].addClass(i.OffcanvasUtils.GLASSPANE_DIM_SELECTOR)},0))},i.OffcanvasUtils._removeModality=function(e){i.OffcanvasUtils._isModal(e)&&(e[i.OffcanvasUtils.GLASS_PANE_KEY].remove(),i.OffcanvasUtils._restoreOrder(e),$(e[i.OffcanvasUtils.CONTENT_KEY]).removeAttr("aria-hidden"))},i.OffcanvasUtils.setupPanToReveal=function(e){var t,n,o,s,r,a,l,u,h,d,c,p,_,m=e;null==$(m).attr("oj-data-pansetup")&&($(m).attr("oj-data-pansetup","true"),m.displayMode="push",t=i.OffcanvasUtils._getDrawer(m),o=i.OffcanvasUtils._getOuterWrapper(t),r={recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_HORIZONTAL}]]},a=!1,$(o).ojHammer(r).on("panstart",function(e){switch(l=null,e.gesture.direction){case Hammer.DIRECTION_LEFT:Math.abs(e.gesture.deltaY)<Math.abs(e.gesture.deltaX)&&(l=i.OffcanvasUtils._isRTL()?"end":"start");break;case Hammer.DIRECTION_RIGHT:Math.abs(e.gesture.deltaY)<Math.abs(e.gesture.deltaX)&&(l=i.OffcanvasUtils._isRTL()?"start":"end")}null!==l&&(e.gesture.angle<0&&(e.gesture.deltaX<-100||e.gesture.deltaY<-100)||(u={direction:l,distance:Math.abs(e.gesture.deltaX)},h=$.Event("ojpanstart"),t.trigger(h,u),h.isDefaultPrevented()||(i.Context.getContext(o.get(0)).getBusyContext().whenReady().then(function(){null==(n=m.size)&&(n=t.outerWidth(),m.size=n),a=!0}),m._closePromise=null,(s=i.OffcanvasUtils._getAnimateWrapper(m)).off(".oc"),i.OffcanvasUtils._toggleClass(m,s,!0),e.gesture.srcEvent.stopPropagation(),e.stopPropagation())))}).on("panmove",function(e){a&&(d=e.gesture.deltaX,"start"===l&&d>0||"end"===l&&d<0?i.OffcanvasUtils._setTranslationX(s,"start","0px"):(t.css("width",Math.abs(d)),s.removeClass(i.OffcanvasUtils.TRANSITION_SELECTOR),i.OffcanvasUtils._setTranslationX(s,"start",d+"px"),u={direction:l,distance:Math.abs(d)},h=$.Event("ojpanmove"),t.trigger(h,u),e.gesture.srcEvent.stopPropagation(),e.stopPropagation()))}).on("panend",function(e){if(a){if(a=!1,d=Math.abs(e.gesture.deltaX),u={distance:d},h=$.Event("ojpanend"),t.trigger(h,u),e.stopPropagation(),!h.isDefaultPrevented())return null==(c=m.edge)&&(c=t.hasClass("oj-offcanvas-start")?"start":"end"),i.OffcanvasUtils._animateWrapperAndDrawer(s,t,c,n,m),$.data(t[0],i.OffcanvasUtils._DATA_OFFCANVAS_KEY,m),$.data(t[0],i.OffcanvasUtils._DATA_EDGE_KEY,c),void i.OffcanvasUtils._registerCloseHandler(m);p="transitionend webkitTransitionEnd otransitionend oTransitionEnd",_=function(){i.OffcanvasUtils._toggleClass(m,s,!1),s.removeClass(i.OffcanvasUtils.TRANSITION_SELECTOR),s.off(p,_),t.trigger("ojclose",m)},s.on(p,_),s.addClass(i.OffcanvasUtils.TRANSITION_SELECTOR),i.OffcanvasUtils._setTranslationX(s,"start","0px")}}))},i.OffcanvasUtils._animateWrapperAndDrawer=function(e,t,n,o,s){var r,a,l,u,h,d,c,p,_,m,g,f;e.removeClass(i.OffcanvasUtils.TRANSITION_SELECTOR),r=Math.round(1e3/60),"none"!==(a=e.css("transform"))&&(l=a.split("(")[1].split(")")[0].split(","),u=parseInt(l[4],10),h=u,d="end"===n?0-o:o,p=Math.max(1,Math.abs(d-u)/(400/r)),_=(new Date).getTime(),m=function(){h===u||""!==e.get(0).style.transform?(g=(new Date).getTime(),f=Math.max(p,p*Math.max((g-_)/r)),_=g,u<d?u=Math.min(d,u+f):u>d&&(u=Math.max(d,u-f)),i.OffcanvasUtils._setTranslationX(e,n,Math.abs(u)+"px"),t.css("width",Math.abs(u)+"px"),u===d?(window.cancelAnimationFrame(c),e.addClass(i.OffcanvasUtils.TRANSITION_SELECTOR),t.trigger("ojopen",s)):c=window.requestAnimationFrame(m)):window.cancelAnimationFrame(c)},c=window.requestAnimationFrame(m))},i.OffcanvasUtils.tearDownPanToReveal=function(e){var t=i.OffcanvasUtils._getDrawer(e),n=i.OffcanvasUtils._getOuterWrapper(t);$(n).off("panstart panmove panend")},Pt={properties:{disabled:{type:"boolean",value:!1},label:{type:"string",value:""},customOptgroupRenderer:{}},extension:{_CONSTRUCTOR:kt}},i.CustomElementBridge.registerMetadata("oj-optgroup",null,Pt),i.CustomElementBridge.register("oj-optgroup",{metadata:i.CustomElementBridge.getMetadata("oj-optgroup")}),Mt={properties:{disabled:{type:"boolean",value:!1},value:{type:"any",value:null},customOptionRenderer:{}},events:{action:{}},extension:{_CONSTRUCTOR:Bt}},i.CustomElementBridge.registerMetadata("oj-option",null,Mt),i.CustomElementBridge.register("oj-option",{metadata:i.CustomElementBridge.getMetadata("oj-option")}),i.PagingCellSet=function(e,t){this.m_cellSet=e,this.m_startIndex=t},i.PagingCellSet.prototype.getData=function(e){var t={column:e.column,row:e.row+this.m_startIndex};return this.m_cellSet.getData(t)},i.PagingCellSet.prototype.getMetadata=function(e){var t={column:e.column,row:e.row+this.m_startIndex};return this.m_cellSet.getMetadata(t)},i.PagingCellSet.prototype.getCount=function(e){return this.m_cellSet.getCount(e)},i.PagingCellSet.prototype.getCellSet=function(){return this.m_cellSet},i.PagingCellSet.prototype.getStartIndex=function(){return this.m_startIndex},i.PagingCellSet.prototype.getExtent=function(e){var t={column:e.column,row:e.row+this.m_startIndex};return this.m_cellSet.getExtent(t)},i.PagingDataGridDataSource=function(e,t){if(!(e instanceof i.DataGridDataSource))throw new i.Message("Not a datagridatasource","Not a datagridatasource",i.Message.SEVERITY_LEVEL.ERROR);this.dataSource=e,this._startIndex=0,this.Init()},i.Object.createSubclass(i.PagingDataGridDataSource,i.DataGridDataSource,"oj.PagingDataGridDataSource"),i.PagingDataGridDataSource.prototype.Init=function(){i.PagingDataGridDataSource.superclass.Init.call(this),this._registerEventListeners()},i.PagingDataGridDataSource.prototype._registerEventListeners=function(){this.dataSource.on("change",this._handleChange.bind(this))},i.PagingDataGridDataSource.prototype.getPage=function(){return this._page},i.PagingDataGridDataSource.prototype.setPage=function(e,t){t=t||{},e=parseInt(e,10);try{i.PagingDataGridDataSource.superclass.handleEvent.call(this,i.PagingModel.EventType.BEFOREPAGE,{page:e,previousPage:this._page})}catch(e){return Promise.reject(null)}this._pageSize=null!=t.pageSize?t.pageSize:this._pageSize,t.startIndex=e*this._pageSize;var n=this._page;this._page=e,this._startIndex=t.startIndex;var o=this;return new Promise(function(e,i){o._fetchInternal(t).then(function(t){e(null)},function(e){o._page=n,o._startIndex=o._page*o._pageSize,i(null)})})},i.PagingDataGridDataSource.prototype._fetchInternal=function(e){this._initialized=!0,this._startIndex=e.startIndex;var t=this;return new Promise(function(e,i){t.handleEvent("change",{operation:"sync",pageSize:t._pageSize}),e(void 0)})},i.PagingDataGridDataSource.prototype.fetch=function(e){return this._pageSize=e.pageSize+e.startIndex,e.startIndex=0,this._fetchInternal(e)},i.PagingDataGridDataSource.prototype.getStartItemIndex=function(){return this._startIndex},i.PagingDataGridDataSource.prototype.getEndItemIndex=function(){return this._endIndex},i.PagingDataGridDataSource.prototype.getPageCount=function(){var e=this.totalSize();return-1==e?-1:Math.ceil(e/this._pageSize)},i.PagingDataGridDataSource.prototype._handleChange=function(e){switch(e.operation){case"refresh":this._startIndex=0,this._page=0,this.handleEvent("change",{operation:"sync",pageSize:this._pageSize}),this.handleEvent(i.PagingTableDataSource.EventType.REFRESH,null);break;case"reset":this.handleEvent(i.PagingTableDataSource.EventType.RESET,null);break;case"insert":this.handleEvent(i.PagingTableDataSource.EventType.ADD,{index:e.indexes.row});break;case"delete":this.handleEvent(i.PagingTableDataSource.EventType.REMOVE,null);break;case"update":e.indexes.row=e.indexes.row-this._startIndex>=0?e.indexes.row-this._startIndex:-1,this.handleEvent("change",e);break;default:this.handleEvent("change",e),this.handleEvent(i.PagingTableDataSource.EventType.SYNC,null)}},i.PagingDataGridDataSource.prototype.getCount=function(e){var t=this.dataSource.getCount(e);return"row"===e&&t>=0?this._startIndex+this._pageSize<t?this._pageSize:t-this._startIndex:t},i.PagingDataGridDataSource.prototype.getCountPrecision=function(e){return this.dataSource.getCountPrecision(e)},i.PagingDataGridDataSource.prototype.fetchHeaders=function(e,t,i){null==this._initialized?null!=t&&t.success&&t.success.call(i.success,null,e,null):"row"===e.axis?(e.start+=this._startIndex,e.start+e.count>this._startIndex+this._pageSize&&(e.count=this._pageSize-e.start),this._pendingRowHeaderCallback={headerRange:e,callbacks:t,callbackObjects:i},this.dataSource.fetchHeaders(e,{success:this._handleRowHeaderFetchSuccess.bind(this),error:this._handleRowHeaderFetchError.bind(this)},i)):this.dataSource.fetchHeaders(e,t,i)},i.PagingDataGridDataSource.prototype._handleRowHeaderFetchSuccess=function(e,t,n){var o,s,r,a;this._pendingRowHeaderCallback.headerRange==t&&(t.start-=this._startIndex,t.count+=1,null!=e&&(o=new i.PagingHeaderSet(e,this._startIndex)),null!=n&&(s=new i.PagingHeaderSet(n,this._startIndex)),r=this._pendingRowHeaderCallback.callbacks.success,a=this._pendingRowHeaderCallback.callbackObjects.success,this._pendingRowHeaderCallback=null,r.call(a,o,t,s))},i.PagingDataGridDataSource.prototype._handleRowHeaderFetchError=function(e){var t,i;t=this._pendingRowHeaderCallback.callbacks.error,i=this._pendingRowHeaderCallback.callbackObjects.error,this._pendingRowHeaderCallback=null,t.call(i,e)},i.PagingDataGridDataSource.prototype.fetchCells=function(e,t,i){var n;if(null==this._initialized){var o={getData:function(){return null},getMetaData:function(){return null},getStart:function(){return 0},getCount:function(){return 0},getLevelCount:function(){return 0},getExtent:function(){return 0},getDepth:function(){return 1}};null!=t&&t.success&&t.success.call(i.success,o,e)}else{for(n=0;n<e.length;n+=1)"row"===e[n].axis&&(e[n].start+=this._startIndex,e[n].start+e[n].count>this._startIndex+this._pageSize&&(e[n].count=this._pageSize-e[n].start));this._pendingCellCallback={cellRanges:e,callbacks:t,callbackObjects:i},this.dataSource.fetchCells(e,{success:this._handleCellsFetchSuccess.bind(this),error:this._handleCellsFetchError.bind(this)},i)}},i.PagingDataGridDataSource.prototype._handleCellsFetchSuccess=function(e,t){var n,o,s,r;if(!this._pendingCellCallback.cellRanges!=t){for(n=0;n<t.length;n+=1)"row"===t[n].axis&&(t[n].start-=this._startIndex,t[n].count+=1);o=new i.PagingCellSet(e,this._startIndex),s=this._pendingCellCallback.callbacks.success,r=this._pendingCellCallback.callbackObjects.success,this._pendingCellCallback=null,this._endIndex=this._startIndex+e.getCount("row")-1,this.handleEvent("sync",{data:new Array(e.getCount("row")),startIndex:this._startIndex}),s.call(r,o,t)}},i.PagingDataGridDataSource.prototype._handleCellsFetchError=function(e){var t,i;t=this._pendingCellCallback.callbacks.error,i=this._pendingCellCallback.callbackObjects.error,this._pendingCellCallback=null,t.call(i,e)},i.PagingDataGridDataSource.prototype.keys=function(e){var t={column:e.column,row:e.row+this._startIndex};return this.dataSource.keys(t)},i.PagingDataGridDataSource.prototype.indexes=function(e){var t=this.dataSource.indexes(e);return-1!=t.row&&(t.row-=this._startIndex),t},i.PagingDataGridDataSource.prototype.getCapability=function(e){return this.dataSource.getCapability(e)},i.PagingDataGridDataSource.prototype.size=function(){var e;return null==this._initialized?-1:(e=this.dataSource.getCount("row"),this.dataSource.getCount("row")>this._pageSize?this._pageSize:e)},i.PagingDataGridDataSource.prototype.sort=function(e,t,i){this.dataSource.sort(e,t,i)},i.PagingDataGridDataSource.prototype.totalSize=function(){return null==this._initialized?-1:this.dataSource.getCount("row")},i.PagingDataGridDataSource.prototype.totalSizeConfidence=function(){return"actual"},i.PagingDataGridDataSource.prototype.moveOK=function(e,t,i){return this.dataSource.moveOK(e,t,i)},i.PagingDataGridDataSource.prototype.move=function(e,t,i,n,o){this.dataSource.move(e,t,i,n,o)},i.PagingHeaderSet=function(e,t){this.m_headerSet=e,this.m_startIndex=t},i.PagingHeaderSet.prototype.getData=function(e,t){return this.m_headerSet.getData(e+this.m_startIndex,t)},i.PagingHeaderSet.prototype.getMetadata=function(e,t){return this.m_headerSet.getMetadata(e+this.m_startIndex,t)},i.PagingHeaderSet.prototype.getCount=function(){return this.m_headerSet.getCount()},i.PagingHeaderSet.prototype.getLevelCount=function(){return this.m_headerSet.getLevelCount()},i.PagingHeaderSet.prototype.getExtent=function(e,t){return this.m_headerSet.getExtent(e+this.m_startIndex,t)},i.PagingHeaderSet.prototype.getDepth=function(e,t){return this.m_headerSet.getDepth(e+this.m_startIndex,t)},i.PagingHeaderSet.prototype.getHeaderSet=function(){return this.m_headerSet},i.PagingHeaderSet.prototype.getStartIndex=function(){return this.m_startIndex},i.PagingHeaderSet.prototype.getLabel=function(e){return this.m_headerSet.getLabel(e)},i.PagingModel=function(){},i.PagingModel.EventType={BEFOREPAGE:"beforePage",PAGE:"page",PAGECOUNT:"pageCount"},i.PagingTableDataSource=function(e,t){if(t=t||{},!(e instanceof i.TableDataSource)){var n=i.TableDataSource._LOGGER_MSG._ERR_DATA_INVALID_TYPE_SUMMARY,o=i.TableDataSource._LOGGER_MSG._ERR_DATA_INVALID_TYPE_DETAIL;throw new Error(n+"\n"+o)}this.dataSource=e,this._startIndex=0,this._endIndex=-1,this._dataSourceWrappedEventHandlers=[],this.Init(),Object.defineProperty(this,"sortCriteria",{configurable:!1,enumerable:!0,get:function(){return this.dataSource.sortCriteria},set:function(e){this.dataSource.sortCriteria=e}})},i.Object.createSubclass(i.PagingTableDataSource,i.TableDataSource,"oj.PagingTableDataSource"),i.PagingTableDataSource.prototype.Init=function(){i.PagingTableDataSource.superclass.Init.call(this)},i.PagingTableDataSource.prototype.getWrappedDataSource=function(){return this.dataSource},i.PagingTableDataSource.prototype.getPage=function(){return"loadMore"==this._fetchType?0:this._getPageFromStartIndex()},i.PagingTableDataSource.prototype.setPage=function(e,t){t=t||{},e=parseInt(e,10);try{i.PagingTableDataSource.superclass.handleEvent.call(this,i.PagingModel.EventType.BEFOREPAGE,{page:e,previousPage:this._getPageFromStartIndex()})}catch(e){return Promise.reject(e)}var n=this._getPageFromStartIndex();this._pageSize=null!=t.pageSize?t.pageSize:this._pageSize,t.pageSize=this._pageSize,t.startIndex=e*this._pageSize,this._startIndex=null==t.startIndex?this._startIndex:t.startIndex,this._fetchType="page";var o=this;return new Promise(function(e,s){o._pageSize>0?o.dataSource.fetch(t).then(function(t){t.startIndex=0,t.data.length>0?o._updateEndIndex(o._startIndex+t.data.length-1,!0):o._updateEndIndex(-1,!0),i.PagingTableDataSource.superclass.handleEvent.call(o,i.PagingModel.EventType.PAGE,{page:o._getPageFromStartIndex(),previousPage:n}),e(null)},function(e){o._startIndex=n*o._pageSize,s(e)}):e(null)})},i.PagingTableDataSource.prototype.getStartItemIndex=function(){return"loadMore"==this._fetchType?0:this._startIndex},i.PagingTableDataSource.prototype.getEndItemIndex=function(){return this._endIndex},i.PagingTableDataSource.prototype.getPageCount=function(){var e=this.totalSize();return-1==e?-1:Math.ceil(e/this._pageSize)},i.PagingTableDataSource.prototype.at=function(e,t){return this.dataSource.at(e,t)},i.PagingTableDataSource.prototype.fetch=function(e){if(null==(e=e||{}).startIndex)return this.setPage(this.getPage());this._fetchType="loadMore",this._startIndex=null==e.startIndex?this._startIndex:e.startIndex;var t=null==e.pageSize?this._pageSize:e.pageSize;null==this._pageSize&&(this._pageSize=t),e.pageSize=t,e.startIndex=this._startIndex;var i=this;return new Promise(function(n,o){t>0?i.dataSource.fetch(e).then(function(e){e.data.length>0?i._updateEndIndex(i._startIndex+e.data.length-1,!0):i._updateEndIndex(-1,!0),n(e)},function(e){o(e)}):n(null)})},i.PagingTableDataSource.prototype.get=function(e,t){return this.dataSource.get(e,t)},i.PagingTableDataSource.prototype.getCapability=function(e){return this.dataSource.getCapability(e)},i.PagingTableDataSource.prototype.on=function(e,t){var n=this,o=this.dataSource;if(e==i.TableDataSource.EventType.SYNC){var s=function(e){n._handleSyncEvent(e,t)};this._dataSourceWrappedEventHandlers.push({eventType:e,eventHandler:t,wrappedEventHandler:s}),o.on(e,s)}else if(e==i.TableDataSource.EventType.ADD||e==i.TableDataSource.EventType.REMOVE||e==i.TableDataSource.EventType.CHANGE){s=function(e){n._handleRowEvent(e,t)};this._dataSourceWrappedEventHandlers.push({eventType:e,eventHandler:t,wrappedEventHandler:s}),o.on(e,s)}else if(e==i.TableDataSource.EventType.REFRESH||e==i.TableDataSource.EventType.RESET){s=function(e){n._startIndex=0,t(e)};this._dataSourceWrappedEventHandlers.push({eventType:e,eventHandler:t,wrappedEventHandler:s}),o.on(e,s)}else e==i.PagingModel.EventType.PAGE||e==i.PagingModel.EventType.BEFOREPAGE||e==i.PagingModel.EventType.PAGECOUNT?i.PagingTableDataSource.superclass.on.call(this,e,t):o.on(e,t)},i.PagingTableDataSource.prototype.off=function(e,t){e!=i.PagingModel.EventType.PAGE&&e!=i.PagingModel.EventType.PAGECOUNT||i.PagingTableDataSource.superclass.off.call(this,e,t);var n=this.dataSource;if(null!=this._dataSourceWrappedEventHandlers){var o,s=this._dataSourceWrappedEventHandlers.length;for(o=0;o<s;o++)if(this._dataSourceWrappedEventHandlers[o].eventType==e&&this._dataSourceWrappedEventHandlers[o].eventHandler==t){n.off(e,this._dataSourceWrappedEventHandlers[o].wrappedEventHandler),this._dataSourceWrappedEventHandlers.splice(o,1);break}}n.off(e,t)},i.PagingTableDataSource.prototype.sort=function(e){return this.dataSource.sort(e)},i.PagingTableDataSource.prototype.totalSize=function(){return this.dataSource.totalSize()},i.PagingTableDataSource.prototype.totalSizeConfidence=function(){return this.dataSource.totalSizeConfidence()},i.PagingTableDataSource.prototype._getPageFromStartIndex=function(){return this._pageSize>0?Math.floor(this._startIndex/this._pageSize):0},i.PagingTableDataSource.prototype._handleRowEvent=function(e,t){var i,n=[];for(i=0;i<e.indexes.length;i++){var o=e.indexes[i];void 0!==o&&("page"==this._fetchType&&(o-=this._startIndex),(o<0||o>=this._startIndex+this._pageSize)&&n.push(i))}if(n.length>0)for(n.sort(function(e,t){return e-t}),i=n.length-1;i>=0;i--)e.data.splice(n[i],1),e.indexes.splice(n[i],1),e.keys.splice(n[i],1);e.indexes.length>0&&this._updateEndIndex(e.indexes[e.indexes.length-1],!1),e.startIndex=this._startIndex,t(e)},i.PagingTableDataSource.prototype._handleSyncEvent=function(e,t){if(e.startIndex!=this._startIndex&&(this._startIndex=e.startIndex),e.data.length>0?this._updateEndIndex(e.startIndex+e.data.length-1,!0):this._updateEndIndex(-1,!0),"page"==this._fetchType){var n={};i.CollectionUtils.copyInto(n,e),n.startIndex=0,t(n)}else t(e)},i.PagingTableDataSource.prototype._updateEndIndex=function(e,t){this._endIndex=t?e:e>this._endIndex?e:this._endIndex;var i=this.totalSize();i>0&&(this._endIndex=this._endIndex>i-1?i-1:this._endIndex)},i.PagingTableDataSource.EventType={ADD:"add",REMOVE:"remove",RESET:"reset",SYNC:"sync",REFRESH:"refresh",SORT:"sort",CHANGE:"change",REQUEST:"request",ERROR:"error"},i.__registerWidget("oj.ojPictoChart",$.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{animationDuration:void 0,animationOnDataChange:"none",animationOnDisplay:"none",columnCount:null,columnWidth:null,data:null,drilling:"off",hiddenCategories:[],highlightedCategories:[],highlightMatch:"all",hoverBehavior:"none",hoverBehaviorDelay:200,items:null,layout:"horizontal",layoutOrigin:"topStart",rowCount:null,rowHeight:null,selection:[],selectionMode:"none",tooltip:{renderer:null},drill:null},_CreateDvtComponent:function(e,t,i){return dvt.PictoChart.newInstance(e,t,i)},_ConvertLocatorToSubId:function(e){var t=e.subId;return"oj-pictochart-item"==t?t="item["+e.index+"]":"oj-pictochart-tooltip"==t&&(t="tooltip"),t},_ConvertSubIdToLocator:function(e){var t={};return 0==e.indexOf("item")?(t.subId="oj-pictochart-item",t.index=this._GetFirstIndex(e)):"tooltip"==e&&(t.subId="oj-pictochart-tooltip"),t},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-pictochart"),e},_GetChildStyleClasses:function(){var e=this._super();return e["oj-pictochart-item"]={path:"_defaultColor",property:"background-color"},e["oj-dvtbase oj-pictochart"]={path:"animationDuration",property:"ANIM_DUR"},e},_GetEventTypes:function(){return["optionChange"]},_HandleEvent:function(e){"drill"===e.type?this._trigger("drill",null,{id:e.id}):this._super(e)},getItem:function(e){return this._component.getAutomation().getItem(e)},getItemCount:function(){return this._component.getAutomation().getItemCount()},getContextByNode:function(e){var t=this.getSubIdByNode(e);return t&&"oj-pictochart-tooltip"!==t.subId?t:null},_GetComponentDeferredDataPaths:function(){return{root:["items","data"]}},_IsFlowingLayoutSupported:function(){return!0}}),i.CustomElementBridge.registerMetadata("oj-picto-chart","dvtBaseComponent",{properties:{animationDuration:{type:"number"},animationOnDataChange:{type:"string",enumValues:["auto","none"]},animationOnDisplay:{type:"string",enumValues:["auto","popIn","alphaFade","zoom","none"]},columnCount:{type:"number"},columnWidth:{type:"number"},drilling:{type:"string",enumValues:["on","off"]},hiddenCategories:{type:"Array<string>",writeback:!0},highlightedCategories:{type:"Array<string>",writeback:!0},highlightMatch:{type:"string",enumValues:["any","all"]},hoverBehavior:{type:"string",enumValues:["dim","none"]},hoverBehaviorDelay:{type:"number"},items:{type:"Array<object>|Promise"},layout:{type:"string",enumValues:["horizontal","vertical"]},layoutOrigin:{type:"string",enumValues:["topEnd","bottomStart","bottomEnd","topStart"]},rowCount:{type:"number"},rowHeight:{type:"number"},selection:{type:"Array<string>",writeback:!0},selectionMode:{type:"string",enumValues:["single","multiple","none"]},tooltip:{type:"object",properties:{renderer:{}}},translations:{type:"Object",properties:{componentName:{type:"string",value:"Picture Chart"},labelAndValue:{type:"string",value:"{0}: {1}"},labelClearSelection:{type:"string",value:"Clear Selection"},labelCountWithTotal:{type:"string",value:"{0} of {1}"},labelDataVisualization:{type:"string",value:"Data Visualization"},labelInvalidData:{type:"string",value:"Invalid data"},labelNoData:{type:"string",value:"No data to display"},stateCollapsed:{type:"string",value:"Collapsed"},stateDrillable:{type:"string",value:"Drillable"},stateExpanded:{type:"string",value:"Expanded"},stateHidden:{type:"string",value:"Hidden"},stateIsolated:{type:"string",value:"Isolated"},stateMaximized:{type:"string",value:"Maximized"},stateMinimized:{type:"string",value:"Minimized"},stateSelected:{type:"string",value:"Selected"},stateUnselected:{type:"string",value:"Unselected"},stateVisible:{type:"string",value:"Visible"}}}},events:{drill:{}},methods:{getContextByNode:{},getItem:{},getItemCount:{}},extension:{_WIDGET_NAME:"ojPictoChart"}}),i.CustomElementBridge.register("oj-picto-chart",{metadata:i.CustomElementBridge.getMetadata("oj-picto-chart")}),jt=["oj-left","oj-center","oj-right","oj-top","oj-middle","oj-bottom"],Ht={"right-top":"oj-right oj-top","right-middle":"oj-right oj-middle","right-bottom":"oj-right oj-bottom","left-top":"oj-left oj-top","left-middle":"oj-left oj-middle","left-bottom":"oj-left oj-bottom","center-top":"oj-center oj-top","center-middle":"oj-left oj-middle","center-bottom":"oj-center oj-bottom"},i.__registerWidget("oj.ojPopup",$.oj.baseComponent,{widgetEventPrefix:"oj",options:{animation:null,autoDismiss:"focusLoss",chrome:"default",initialFocus:"auto",position:{my:{horizontal:"start",vertical:"top"},offset:{x:0,y:0},at:{horizontal:"start",vertical:"bottom"},of:void 0,collision:"flip"},tail:"none",modality:"modeless",role:"tooltip",beforeOpen:null,open:null,beforeClose:null,close:null,focus:null,animateStart:null,animateEnd:null},_ComponentCreate:function(){this._super();var e=this._getRootStyle(),t=this.element;t.hide().addClass(e).attr("aria-hidden","true"),t.addClass("oj-component");var n=$("<div>");n.addClass([e,"content"].join("-")),n.attr("role","presentation"),n.append(t[0].childNodes),n.appendTo(t),this._content=n,this._setChrome(),this._setupFocus(t);var o=this.options;o.position=i.PositionUtils.coerceToJet(o.position)},_AfterCreate:function(){this._super(),this.element.uniqueId(),this._createTail()},_destroy:function(){i.ZOrderUtils.getStatus(this.element)===i.ZOrderUtils.STATUS.OPEN&&this._closeImplicitly(),this._setWhenReady("none"),this._destroyTail(),delete this._popupServiceEvents;var e=this.element;e.hide().attr("aria-hidden","true").removeUniqueId();var t=this._content;delete this._content,e.append(t[0].childNodes),t.remove();var n=this._closeDelayTimer;n&&(delete this._closeDelayTimer,n()),this._super()},open:function(e,t){if(!this._isOperationPending("open",[e,t])){i.ZOrderUtils.getStatus(this.element)===i.ZOrderUtils.STATUS.OPEN&&this._closeImplicitly(),this._setLauncher(e);var n=this.element;if(e=this._launcher,!1!==this._trigger("beforeOpen")){this._setWhenReady("open");var o=this.options;(t=t||o.position).of||(this._hasPositionOfLauncherOverride=!0,t.of=e),this._setPosition(t),this._setAutoDismiss(o.autoDismiss),this._addDescribedBy(),this._IsCustomElement()&&n[0].hasAttribute("role")||n.attr("role",o.role),t=this._getPositionAsJqUi();var s=this._getRootStyle(),r=[s,"layer"].join("-"),a=o.tail;"none"!==a&&(r+=" "+[s,"tail",a].join("-"));var l={};l[i.PopupService.OPTION.POPUP]=n,l[i.PopupService.OPTION.LAUNCHER]=e,l[i.PopupService.OPTION.POSITION]=t,l[i.PopupService.OPTION.EVENTS]=this._getPopupServiceEvents(),l[i.PopupService.OPTION.LAYER_SELECTORS]=r,l[i.PopupService.OPTION.MODALITY]=o.modality,l[i.PopupService.OPTION.CUSTOM_ELEMENT]=this._IsCustomElement(),i.PopupService.getInstance().open(l)}}},_beforeOpenHandler:function(e){var t=e[i.PopupService.OPTION.POPUP],n=e[i.PopupService.OPTION.POSITION];t.show(),t.position(n);var o=this.options.animation;if(o&&o.open){var s=o.actionPrefix,r=s?[s,"open"].join("-"):"open";return i.AnimationUtils.startAnimation(t[0],r,i.PositionUtils.addTransformOriginAnimationEffectsOption(t,o.open),this)}},_afterOpenHandler:function(e){var t=e[i.PopupService.OPTION.POPUP],n=e[i.PopupService.OPTION.LAUNCHER];this._initVoiceOverAssist(),this._trigger("open"),this._intialFocus(),this._on(t,{keydown:this._keyHandler,keyup:this._keyHandler}),n&&n.length>0&&this._on(n,{keydown:this._keyHandler,keyup:this._keyHandler})},_GetContextMenu:function(){if(!this._IsCustomElement())return this._super();var e=i.BaseCustomElementBridge.getSlotMap(this._content[0]).contextMenu;return e&&e.length>0?e[0]:void 0},close:function(){if(!this._isOperationPending("close",[])&&i.ZOrderUtils.getStatus(this.element)===i.ZOrderUtils.STATUS.OPEN&&(!1!==this._trigger("beforeClose")||this._ignoreBeforeCloseResultant)){this._setWhenReady("close"),this._restoreFocus();var e=this._launcher,t=this.element;this._off(t,"keydown keyup"),e&&e.length>0&&this._off(e,"keydown keyup"),this._destroyVoiceOverAssist();var n={};n[i.PopupService.OPTION.POPUP]=t,i.PopupService.getInstance().close(n)}},_beforeCloseHandler:function(e){var t=e[i.PopupService.OPTION.POPUP],n=this.options.animation;if(!this._ignoreBeforeCloseResultant&&n&&n.close){var o=t.attr("style"),s=n.actionPrefix,r=s?[s,"close"].join("-"):"close";return i.AnimationUtils.startAnimation(t[0],r,i.PositionUtils.addTransformOriginAnimationEffectsOption(t,n.close),this).then(function(){t.attr("style",o),t.hide()})}t.hide()},_afterCloseHandler:function(e){this._removeDescribedBy(),this._setAutoDismiss(),delete this._launcher,this._trigger("close"),this._hasPositionOfLauncherOverride&&(this.options.position.of=null,delete this._hasPositionOfLauncherOverride)},isOpen:function(){var e=i.ZOrderUtils.getStatus(this.element);return e===i.ZOrderUtils.STATUS.OPENING||e===i.ZOrderUtils.STATUS.OPEN||e===i.ZOrderUtils.STATUS.CLOSING},refresh:function(){if(this._super(),i.ZOrderUtils.getStatus(this.element)===i.ZOrderUtils.STATUS.OPEN&&this._reposition()){var e=this.element;i.PopupService.getInstance().triggerOnDescendents(e,i.PopupService.EVENT.POPUP_REFRESH)}},_setOption:function(e,t){var n=this.options;switch(e){case"tail":t!==n.tail&&this._setTail(t);break;case"chrome":t!==n.chrome&&this._setChrome(t);break;case"position":return this._setPosition(t),void this.refresh();case"autoDismiss":i.ZOrderUtils.getStatus(this.element)===i.ZOrderUtils.STATUS.OPEN&&t!==n.autoDismiss&&this._setAutoDismiss(t);break;case"modality":if(i.ZOrderUtils.getStatus(this.element)===i.ZOrderUtils.STATUS.OPEN){var o=this.element,s={};s[i.PopupService.OPTION.POPUP]=o,s[i.PopupService.OPTION.MODALITY]=t,i.PopupService.getInstance().changeOptions(s)}}this._superApply(arguments)},_getRootStyle:function(){return"oj-popup"},_setTail:function(e){this._destroyTail(),this._createTail(e),this._reposition()},_createTail:function(e){var t=e||this.options.tail;if("none"!==t){var n=this._getRootStyle(),o=[n,"tail"].join("-"),s=[o,t].join("-"),r=$("<div>").hide();r.addClass(o).addClass(s),r.attr("role","presentation"),this._tailId=r.attr("id",this._getSubId("tail")).attr("id");var a=this.element;if(r.appendTo(a),a.addClass(s),i.ZOrderUtils.getStatus(this.element)===i.ZOrderUtils.STATUS.OPEN){var l=[n,"layer"].join("-");l+=" "+s;var u={};u[i.PopupService.OPTION.POPUP]=a,u[i.PopupService.OPTION.LAYER_SELECTORS]=l,i.PopupService.getInstance().changeOptions(u)}}},_getTail:function(){var e=this._tailId;return e?$(document.getElementById(e)):null},_destroyTail:function(){var e=this._getTail();e&&e.remove(),delete this._tailId;var t=this.options.tail,n=this._getRootStyle(),o=[n,"tail",t].join("-"),s=this.element;if(s.removeClass(o),i.ZOrderUtils.getStatus(this.element)===i.ZOrderUtils.STATUS.OPEN){var r=[n,"layer"].join("-"),a={};a[i.PopupService.OPTION.POPUP]=s,a[i.PopupService.OPTION.LAYER_SELECTORS]=r,i.PopupService.getInstance().changeOptions(a)}},_setChrome:function(e){var t=e||this.options.chrome,i=[this._getRootStyle(),"no-chrome"].join("-"),n=this.element;"default"===t&&n.hasClass(i)?n.removeClass(i):"none"!==t||n.hasClass(i)||n.addClass(i)},_setLauncher:function(e){if(e?"string"===$.type(e)?e=$(e):1===e.nodeType&&(e=$(e)):e=$(document.activeElement),e instanceof $&&e.length>1)for(var t=this.element,n=0;n<e.length;n++){var o=e[0];if(!i.DomUtils.isAncestorOrSelf(t[0],o)){e=$(o);break}}else e instanceof $&&!(e instanceof $&&0===e.length)||(e=$(document.activeElement));this._launcher=e},_setPosition:function(e){var t=this.options;e&&(t.position=i.PositionUtils.coerceToJet(e,t.position))},_getPositionAsJqUi:function(){var e=this.options,t=i.PositionUtils.coerceToJqUi(e.position),n="rtl"===this._GetReadingDirection(),o=(t=i.PositionUtils.normalizeHorizontalAlignment(t,n)).using;return o=$.isFunction(o)?o:null,t.using=this._usingHandler.bind(this,o),t},_resolveBusyStateAndCloseImplicitly:function(e){e(),delete this._closeDelayTimer,this._closeImplicitly()},_resolveBusyStateAndCancelDelayedClosure:function(e,t){window.clearTimeout(e),t()},_usingHandler:function(e,t,n){var o=n.element.element;if(t.top!==o.css("top")||t.left!==o.css("left")){var s=this._getTail();if(s){s.hide();for(var r=0;r<jt.length;r++)s.removeClass(jt[r]),o.removeClass(jt[r]);if(s.removeAttr("style"),n.target&&0===n.target.height&&0===n.target.width){var a="rtl"===this._GetReadingDirection(),l=i.PositionUtils.normalizeHorizontalAlignment(this.options.position,a).my;if(!i.StringUtils.isEmptyOrUndefined(l)){var u="center"===l.horizontal?l.horizontal:n.horizontal,h="center"===l.vertical?"middle":l.vertical;n.horizontal=u,n.vertical=h}}var d=[n.horizontal,n.vertical].join("-"),c=Ht[d];if(s.addClass(c),o.addClass(c),s.show(),"left"===n.horizontal){var p=s.outerWidth();p-=p+i.DomUtils.getCSSLengthAsInt(s.css("left")),t.left=t.left+(p-2)}else"right"===n.horizontal&&(p=s.outerWidth(),p-=p+i.DomUtils.getCSSLengthAsInt(s.css("right")),t.left=t.left-(p-2));if("top"===n.vertical){var _=s.outerHeight();_-=_+i.DomUtils.getCSSLengthAsInt(s.css(n.vertical)),t.top=t.top+(_-2)}else"bottom"===n.vertical&&(_=s.outerHeight(),_-=_+i.DomUtils.getCSSLengthAsInt(s.css(n.vertical)),t.top=t.top-(_-2));if(o.css(t),"center"===n.horizontal&&"middle"!==n.vertical){var m=o.width(),g=Math.round((m/2-s.outerWidth()/2)/m*100);s.css({left:g+"%"})}else if("middle"===n.vertical){var f=o.height(),v=Math.round((f/2-s.outerHeight()/2)/f*100);s.css({top:v+"%"})}}else o.css(t);if(i.PositionUtils.captureTransformOriginAnimationEffectsOption(o,n),e&&e(t,n),"focusLoss"===this.options.autoDismiss&&i.PositionUtils.isAligningPositionClipped(n)){this._ignoreRestoreFocus=!0;var C=i.Context.getContext(this.element[0]).getBusyContext(),y={description:["ojPopup identified by '",this.element.attr("id"),"' is pending implicit closure."].join("")},b=C.addBusyState(y),S=window.setTimeout(this._resolveBusyStateAndCloseImplicitly.bind(this,b),0);this._closeDelayTimer=this._resolveBusyStateAndCancelDelayedClosure.bind(this,S,b)}}},_reposition:function(){var e=this.element,t=this._getPositionAsJqUi();if(i.StringUtils.isString(t.of)){var n=$(t.of);if(0===n.length)return!1;t.of=n}return e.position(t),!0},_intialFocus:function(e){var t=this._deriveInitialFocus();if(e&&"none"===t&&(t="popup"),"firstFocusable"===t){for(var n,o=this._content.find(":focusable"),s=0;s<o.length;s++)if(i.FocusUtils.isFocusable(o[s])){n=o[s];break}n?(n.focus(),this._trigger("focus")):t="popup"}if("popup"===t){var r=this.element;r.attr("tabindex","-1");var a=this._closeSkipLink;a?a.getLink().focus():r.focus(),this._trigger("focus")}},_deriveInitialFocus:function(){var e=this.options,t=e.initialFocus;return"auto"===t&&(t="modal"===e.modality?i.DomUtils.isTouchSupported()?"popup":"firstFocusable":"none"),t},_isFocusInPopup:function(e,t){if(e||(e=document.activeElement),!e)return!1;var n=this.element;return t&&(n=n.parent()),i.DomUtils.isAncestorOrSelf(n[0],e)},_isFocusInLauncher:function(e){e||(e=document.activeElement);var t=this._launcher;return i.DomUtils.isAncestorOrSelf(t[0],e)},_restoreFocus:function(){this._ignoreRestoreFocus?delete this._ignoreRestoreFocus:this._isFocusInPopup(null,!0)&&this._launcher.focus()},_keyHandler:function(e){if(!e.isDefaultPrevented()){var t=e.type,i=this._content,n=e.target;if("keyup"===t&&e.keyCode===$.ui.keyCode.ESCAPE&&(this._isFocusInPopup(n)||this._isFocusInLauncher(n)))e.preventDefault(),this.close();else if("keydown"===t&&117===e.keyCode)this._isFocusInPopup(n)?"modeless"===this.options.modality?(e.preventDefault(),this._launcher.focus()):this.close():this._isFocusInLauncher(n)&&(e.preventDefault(),this._intialFocus(!0));else if("keydown"===t&&e.keyCode===$.ui.keyCode.TAB&&this._isFocusInPopup(n)){var o=i.find(":tabbable");if(o.length>0){var s=o[0],r=o[o.length-1],a=this.element;s!==n&&a[0]!==n||!e.shiftKey?r!==n||e.shiftKey||(e.preventDefault(),r===s?(a.attr("tabindex","-1"),a.focus()):$(s).focus()):(e.preventDefault(),s===r&&s===n?(a.attr("tabindex","-1"),a.focus()):$(r).focus())}else e.preventDefault(),"modeless"===this.options.modality?this._launcher.focus():this.close()}}},_setAutoDismiss:function(e){var t=this._focusLossCallback,n=this._getPopupServiceEvents();if(t&&(delete n[i.PopupService.EVENT.POPUP_AUTODISMISS],delete this._focusLossCallback),"focusLoss"===e&&(t=this._focusLossCallback=this._dismissalHandler.bind(this),n[i.PopupService.EVENT.POPUP_AUTODISMISS]=t),i.ZOrderUtils.getStatus(this.element)===i.ZOrderUtils.STATUS.OPEN){var o=this.element,s={};s[i.PopupService.OPTION.POPUP]=o,s[i.PopupService.OPTION.EVENTS]=n,i.PopupService.getInstance().changeOptions(s)}},_dismissalHandler:function(e){if(i.ZOrderUtils.getStatus(this.element)===i.ZOrderUtils.STATUS.OPEN){var t=this._launcher,n=this.element.parent(),o=e.target,s=this._focusSkipLink;if(s){var r=s.getLink();if(r&&i.DomUtils.isAncestorOrSelf(r[0],o))return}if(!i.DomUtils.isAncestorOrSelf(t[0],o)&&!i.DomUtils.isAncestorOrSelf(n[0],o)){if(i.FocusUtils.isFocusable(o)){if("mousedown"===e.type||"touchstart"===e.type)return;this._ignoreRestoreFocus=!0}this.close()}}},_addDescribedBy:function(){var e=this._launcher,t=this.element.attr("id"),i=e.attr("aria-describedby"),n=i?i.split(/\s+/):[];n.push(t),i=$.trim(n.join(" ")),e.attr("aria-describedby",i)},_removeDescribedBy:function(){var e=this._launcher,t=this.element;if(e&&0!==e.length){var i=t.attr("id"),n=e.attr("aria-describedby"),o=n?n.split(/\s+/):[],s=$.inArray(i,o);-1!==s&&o.splice(s,1),(n=$.trim(o.join(" ")))?e.attr("aria-describedby",n):e.removeAttr("aria-describedby")}},_initVoiceOverAssist:function(){var e,t=i.AgentUtils.getAgentInfo().os===i.AgentUtils.OS.IOS||i.AgentUtils.getAgentInfo().os===i.AgentUtils.OS.ANDROID,n=this._liveRegion;n||(n=this._liveRegion=new i.PopupLiveRegion);var o=this._deriveInitialFocus();if(e=t?this.getTranslatedString("none"===o?"ariaLiveRegionInitialFocusNoneTouch":"ariaLiveRegionInitialFocusFirstFocusableTouch"):this.getTranslatedString("none"===o?"ariaLiveRegionInitialFocusNone":"ariaLiveRegionInitialFocusFirstFocusable"),n.announce(e),t){var s=this._getSubId("focusSkipLink"),r=this._launcher,a=this._intialFocus.bind(this,!0);e=this.getTranslatedString("ariaFocusSkipLink"),this._focusSkipLink=new i.PopupSkipLink(r,e,a,s);var l=this._content,u=this._getSubId("closeSkipLink");a=this._closeImplicitly.bind(this),e=this.getTranslatedString("ariaCloseSkipLink"),this._closeSkipLink=new i.PopupSkipLink(l,e,a,u)}},_destroyVoiceOverAssist:function(){this._liveRegion.destroy(),delete this._liveRegion;var e=this._focusSkipLink;e&&(e.destroy(),delete this._focusSkipLink);var t=this._closeSkipLink;t&&(t.destroy(),delete this._closeSkipLink)},_getSubId:function(e){var t=this.element.attr("id");return i.StringUtils.isEmptyOrUndefined(t)&&(t=this.uuid),[t,e].join("_")},_surrogateRemoveHandler:function(){this.element.remove()},_getPopupServiceEvents:function(){if(!this._popupServiceEvents){var e=this._popupServiceEvents={};e[i.PopupService.EVENT.POPUP_CLOSE]=this._closeImplicitly.bind(this),e[i.PopupService.EVENT.POPUP_REMOVE]=this._surrogateRemoveHandler.bind(this),e[i.PopupService.EVENT.POPUP_REFRESH]=this.refresh.bind(this),e[i.PopupService.EVENT.POPUP_BEFORE_OPEN]=this._beforeOpenHandler.bind(this),e[i.PopupService.EVENT.POPUP_AFTER_OPEN]=this._afterOpenHandler.bind(this),e[i.PopupService.EVENT.POPUP_BEFORE_CLOSE]=this._beforeCloseHandler.bind(this),e[i.PopupService.EVENT.POPUP_AFTER_CLOSE]=this._afterCloseHandler.bind(this)}return this._popupServiceEvents},_closeImplicitly:function(){this._ignoreBeforeCloseResultant=!0,this.close(),delete this._ignoreBeforeCloseResultant},_setWhenReady:function(e){var t=this._whenReadyMediator;t&&(t.destroy(),delete this._whenReadyMediator),["open","close"].indexOf(e)<0||(this._whenReadyMediator=new i.PopupWhenReadyMediator(this.element,e,"ojPopup",this._IsCustomElement()))},_isOperationPending:function(e,t){var i=this._whenReadyMediator;return!!i&&i.isOperationPending(this,e,e,t)},_setupFocus:function(e){var t=this;this._focusable({applyHighlight:!0,setupHandlers:function(i,n){t._on(e,{focus:function(e){i($(e.currentTarget))},blur:function(e){n($(e.currentTarget))}})}})},_NotifyDetached:function(){i.ZOrderUtils.getStatus(this.element)===i.ZOrderUtils.STATUS.OPEN&&this._closeImplicitly(),this._super()}}),i.Components.setDefaultOptions({ojPopup:{modality:i.Components.createDynamicPropertyGetter(function(){return(i.ThemeUtils.parseJSONFromFontFamily("oj-popup-option-defaults")||{}).modality}),animation:i.Components.createDynamicPropertyGetter(function(){return(i.ThemeUtils.parseJSONFromFontFamily("oj-popup-option-defaults")||{}).animation})}}),i.CustomElementBridge.registerMetadata("oj-popup","baseComponent",{properties:{autoDismiss:{type:"string",enumValues:["focusLoss","none"]},chrome:{type:"string",enumValues:["default","none"]},initialFocus:{type:"string",enumValues:["auto","none","firstFocusable","popup"]},modality:{type:"string",enumValues:["modeless","modal"]},position:{type:"object",properties:{my:{type:"object|string",properties:{horizontal:{type:"string",enumValues:["start","end","left","center","right"]},vertical:{type:"string",enumValues:["top","center","bottom"]}}},at:{type:"object|string",properties:{horizontal:{type:"string",enumValues:["start","end","left","center","right"]},vertical:{type:"string",enumValues:["top","center","bottom"]}}},offset:{type:"object",properties:{x:{type:"number"},y:{type:"number"}}},of:{type:"string|object"},collision:{type:"string",enumValues:["flip","fit","flipfit","flipcenter","none"]}}},tail:{type:"string",enumValues:["simple","none"]}},events:{beforeOpen:{},open:{},beforeClose:{},close:{},focus:{},animateStart:{},animateEnd:{}},methods:{close:{},isOpen:{},open:{}},extension:{_WIDGET_NAME:"ojPopup"}}),i.CustomElementBridge.register("oj-popup",{metadata:i.CustomElementBridge.getMetadata("oj-popup")}),i.PopupService=function(){this.Init()},i.Object.createSubclass(i.PopupService,i.Object,"oj.PopupService"),i.PopupService.prototype.Init=function(){i.PopupService.superclass.Init.call(this)},i.PopupService.getInstance=function(e){return i.PopupService._popupService||(i.PopupService._popupService=new i.PopupServiceImpl),i.PopupService._popupService},i.PopupService.prototype.open=function(e){i.Assert.failedInAbstractFunction()},i.PopupService.prototype.close=function(e){i.Assert.failedInAbstractFunction()},i.PopupService.prototype.changeOptions=function(e){i.Assert.failedInAbstractFunction()},i.PopupService.prototype.triggerOnDescendents=function(e,t,n){i.Assert.failedInAbstractFunction()},i.PopupService.prototype.destroy=function(){i.PopupService._popupService=null},i.PopupService.MODALITY={NONE:"none",MODAL:"modal",MODELESS:"modeless"},i.PopupService.EVENT={POPUP_REMOVE:"ojPopupRemove",POPUP_CLOSE:"ojPopupClose",POPUP_REFRESH:"ojPopupRefresh",POPUP_AUTODISMISS:"ojPopupAutoDismiss",POPUP_BEFORE_OPEN:"ojPopupBeforeOpen",POPUP_AFTER_OPEN:"ojPopupAfterOpen",POPUP_BEFORE_CLOSE:"ojPopupBeforeClose",POPUP_AFTER_CLOSE:"ojPopupAfterClose"},i.PopupService.LAYER_LEVEL={TOP_LEVEL:"topLevel",NEAREST_ANCESTOR:"nearestAncestor"},i.PopupService.OPTION={POPUP:"popup",EVENTS:"events",MODALITY:"modality",LAUNCHER:"launcher",POSITION:"position",LAYER_SELECTORS:"layerSelectors",LAYER_LEVEL:"layerLevel",CONTEXT:"context",CUSTOM_ELEMENT:"customElement"},i.PopupServiceImpl=function(){this.Init()},i.Object.createSubclass(i.PopupServiceImpl,i.PopupService,"oj.PopupServiceImpl"),i.PopupServiceImpl.prototype.open=function(e){i.Assert.assertObject(e);var t=e[i.PopupService.OPTION.POPUP];i.Assert.assertPrototype(t,$);var n=i.ZOrderUtils.getStatus(t);if(n===i.ZOrderUtils.STATUS.UNKNOWN||n===i.ZOrderUtils.STATUS.CLOSE){var o=e[i.PopupService.OPTION.LAUNCHER];i.Assert.assertPrototype(o,$);var s=e[i.PopupService.OPTION.POSITION];i.Assert.assertObjectOrNull(s);var r=e[i.PopupService.OPTION.EVENTS];i.Assert.assertObject(r);var a=e[i.PopupService.OPTION.MODALITY];(!a||i.PopupService.MODALITY.MODELESS!==a&&i.PopupService.MODALITY.MODAL!==a)&&(a=i.PopupService.MODALITY.NONE);var l=e[i.PopupService.OPTION.LAYER_SELECTORS];i.Assert.assertString(l);var u=e[i.PopupService.OPTION.CUSTOM_ELEMENT],h=e[i.PopupService.OPTION.LAYER_LEVEL];(!h||i.PopupService.LAYER_LEVEL.TOP_LEVEL!==h&&i.PopupService.LAYER_LEVEL.NEAREST_ANCESTOR!==h)&&(h=i.PopupService.LAYER_LEVEL.NEAREST_ANCESTOR);var d=r[i.PopupService.EVENT.POPUP_BEFORE_OPEN];d&&$.isFunction(d)||(d=i.PopupServiceImpl._defaultBeforeOpenCallback);var c=r[i.PopupService.EVENT.POPUP_AFTER_OPEN];i.ZOrderUtils.setStatus(t,i.ZOrderUtils.STATUS.OPENING),i.DomUtils.setLogicalParent(t,o),i.ZOrderUtils.addToAncestorLayer(t,o,a,l,h,u);var p,_=function(){try{t.removeAttr("aria-hidden"),this._assertEventSink(),i.Components.subtreeShown(t[0])}catch(e){i.Logger.error("Error opening popup:\n%o",e)}finally{c&&c(e);var n=i.ZOrderUtils.getFirstAncestorLayer(t);i.Assert.assertPrototype(n,$),i.ZOrderUtils.applyEvents(n,r),i.ZOrderUtils.setStatus(t,i.ZOrderUtils.STATUS.OPEN)}};_=_.bind(this);try{p=d(e)}catch(e){i.Logger.error("Error before open popup:\n%o",e)}finally{p&&p instanceof Promise?p.then(_):_()}}else this._assertEventSink()},i.PopupServiceImpl._defaultBeforeOpenCallback=function(e){var t=e[i.PopupService.OPTION.POPUP];i.Assert.assertPrototype(t,$);var n=e[i.PopupService.OPTION.POSITION];t.show(),n&&t.position(n)},i.PopupServiceImpl.prototype.close=function(e){i.Assert.assertObject(e);var t=e[i.PopupService.OPTION.POPUP];i.Assert.assertPrototype(t,$);var n=i.ZOrderUtils.getOpenPopupLayer(t);i.Assert.assertPrototype(n,$);var o=e[i.PopupService.OPTION.EVENTS];if(o=o?$.extend(i.ZOrderUtils.getEvents(n),o):e[i.PopupService.OPTION.EVENTS]=i.ZOrderUtils.getEvents(n),i.ZOrderUtils.getStatus(t)===i.ZOrderUtils.STATUS.OPEN&&o){var s=o[i.PopupService.EVENT.POPUP_BEFORE_CLOSE];s&&$.isFunction(s)||(s=i.PopupServiceImpl._defaultBeforeCloseCallback);var r=o[i.PopupService.EVENT.POPUP_AFTER_CLOSE];i.ZOrderUtils.setStatus(t,i.ZOrderUtils.STATUS.CLOSING),i.ZOrderUtils.applyEvents(n,{});var a,l=function(){try{t.hide(),t.attr("aria-hidden","true"),t.css({top:"auto",bottom:"auto",left:"auto",right:"auto"}),i.ZOrderUtils.removeFromAncestorLayer(t),i.DomUtils.setLogicalParent(t,null),this._assertEventSink(),i.Components.subtreeHidden(t[0])}catch(e){i.Logger.error("Error closing popup:\n%o",e)}finally{r&&$.isFunction(r)&&r(e),i.ZOrderUtils.setStatus(t,i.ZOrderUtils.STATUS.CLOSE)}};l=l.bind(this);try{a=s(e)}catch(e){i.Logger.error("Error before close popup:\n%o",e)}finally{a&&a instanceof Promise?a.then(l):l()}}else this._assertEventSink()},i.PopupServiceImpl._defaultBeforeCloseCallback=function(e){var t=e[i.PopupService.OPTION.POPUP];i.Assert.assertPrototype(t,$),t.hide()},i.PopupServiceImpl.prototype.changeOptions=function(e){i.Assert.assertObject(e);var t=e[i.PopupService.OPTION.POPUP];if(i.Assert.assertPrototype(t,$),i.ZOrderUtils.getStatus(t)===i.ZOrderUtils.STATUS.OPEN){var n=i.ZOrderUtils.getOpenPopupLayer(t);i.Assert.assertPrototype(n,$);var o=e[i.PopupService.OPTION.EVENTS];o&&i.ZOrderUtils.applyEvents(n,o);var s=e[i.PopupService.OPTION.MODALITY];s&&i.ZOrderUtils.applyModality(n,s);var r=e[i.PopupService.OPTION.LAYER_SELECTORS];i.StringUtils.isEmptyOrUndefined(r)||n.attr("class",r)}},i.PopupServiceImpl.prototype.triggerOnDescendents=function(e,t,n){if(i.ZOrderUtils.isPopupOpen(e)){var o={};o.event=t,o.argsArray=n;var s=i.ZOrderUtils.getFirstAncestorLayer(e);i.ZOrderUtils.postOrderVisit(s,this._triggerOnDescendentsVisitCallback,o)}},i.PopupServiceImpl.prototype._triggerOnDescendentsVisitCallback=function(e,t){var n=t.event,o=t.argsArray,s=i.ZOrderUtils.getEvents(e);return s&&$.isFunction(s[n])&&s[n].apply(this,o),i.ZOrderUtils.VISIT_RESULT.ACCEPT},i.PopupServiceImpl.prototype._assertEventSink=function(){var e=i.ZOrderUtils.hasPopupsOpen(),t=this._callbackEventFilter;if(!e&&t){window.removeEventListener("resize",i.PopupServiceImpl._refreshCallback,!0),window.removeEventListener("scroll",i.PopupServiceImpl._refreshCallback,!0),(r=document.documentElement).removeEventListener("mousewheel",i.PopupServiceImpl._refreshCallback,!0),r.removeEventListener("DOMMouseScroll",i.PopupServiceImpl._refreshCallback,!0),this._callbackEventFilter=null;for(var n=0;n<i.PopupServiceImpl._REDISTRIBUTE_EVENTS.length;n++){var o=i.PopupServiceImpl._REDISTRIBUTE_EVENTS[n];r.removeEventListener(o,t,!0)}var s=this._simpleTapRecognizer;s&&(s.destroy(),this._simpleTapRecognizer=null)}else if(e&&!t){var r;window.addEventListener("resize",i.PopupServiceImpl._refreshCallback,!0),window.addEventListener("scroll",i.PopupServiceImpl._refreshCallback,!0),(r=document.documentElement).addEventListener("mousewheel",i.PopupServiceImpl._refreshCallback,!0),r.addEventListener("DOMMouseScroll",i.PopupServiceImpl._refreshCallback,!0),t=this._callbackEventFilter=this._eventFilterCallback.bind(this);for(n=0;n<i.PopupServiceImpl._REDISTRIBUTE_EVENTS.length;n++){o=i.PopupServiceImpl._REDISTRIBUTE_EVENTS[n];r.addEventListener(o,t,!0)}i.DomUtils.isTouchSupported()&&(this._simpleTapRecognizer=new i.SimpleTapRecognizer(t))}},i.PopupServiceImpl.prototype._eventFilterCallback=function(e){var t=$(e.target);if(i.ZOrderUtils.hasPopupsOpen()){if(!i.DomUtils.isChromeEvent(e)&&("focus"!==e.type||t.is(":focusable"))){var n=i.ZOrderUtils.getDefaultLayer();if("keydown"!==e.type||!i.ZOrderUtils.hasModalDialogOpen()||i.DomUtils.isAncestor(n[0],t[0])){var o,s=i.ZOrderUtils.getFirstAncestorLayer(t);if(n[0]!==s[0]){if(!s.hasClass(i.PopupServiceImpl._FOCUS_WITHIN_SELECTOR))(o=this._lastFocusLayer)&&o.removeClass(i.PopupServiceImpl._FOCUS_WITHIN_SELECTOR),s.addClass(i.PopupServiceImpl._FOCUS_WITHIN_SELECTOR),this._lastFocusLayer=s}else(o=this._lastFocusLayer)&&(o.removeClass(i.PopupServiceImpl._FOCUS_WITHIN_SELECTOR),this._lastFocusLayer=null);if("focus"!==e.type||"-1"!==t.attr("tabindex")){var r={},a={};for(var l in e)i.PopupServiceImpl._COPY_SAFE_EVENT_PROPERTIES[l]&&!$.isFunction(e[l])&&(a[l]=e[l]);r.event=$.Event(e,a),i.ZOrderUtils.postOrderVisit(n,i.PopupServiceImpl._redistributeVisitCallback,r)}}else i.ZOrderUtils.eatEvent(e)}}else this._assertEventSink()},i.PopupServiceImpl._redistributeVisitCallback=function(e,t){var n=i.ZOrderUtils.getEvents(e),o=t.event;o.type;return n&&$.isFunction(n[i.PopupService.EVENT.POPUP_AUTODISMISS])&&n[i.PopupService.EVENT.POPUP_AUTODISMISS](o),i.ZOrderUtils.VISIT_RESULT.ACCEPT},i.PopupServiceImpl._refreshCallback=function(e){var t=i.PopupServiceImpl._refreshTimerId;isNaN(t)&&(i.PopupServiceImpl._refreshTimerId=window.setTimeout(function(){i.PopupServiceImpl._refreshTimerId=Number.NaN;var e=i.ZOrderUtils.getDefaultLayer();$.isFunction(window.requestAnimationFrame)?i.PopupServiceImpl._afRequestId=window.requestAnimationFrame(function(){i.PopupServiceImpl._afRequestId=null,i.ZOrderUtils.postOrderVisit(e,i.PopupServiceImpl._refreshVisitCallback)}):i.ZOrderUtils.postOrderVisit(e,i.PopupServiceImpl._refreshVisitCallback)},i.PopupServiceImpl._REFRESH_DELAY))},i.PopupServiceImpl._refreshVisitCallback=function(e,t){if(t.level>0)return i.ZOrderUtils.VISIT_RESULT.REJECT;var n=i.ZOrderUtils.getEvents(e);return n&&$.isFunction(n[i.PopupService.EVENT.POPUP_REFRESH])&&n[i.PopupService.EVENT.POPUP_REFRESH](),i.ZOrderUtils.VISIT_RESULT.ACCEPT},i.PopupServiceImpl.prototype.destroy=function(){i.PopupServiceImpl.superclass.destroy.call(this)},i.PopupServiceImpl._FOCUS_WITHIN_SELECTOR="oj-focus-within",i.PopupServiceImpl._REDISTRIBUTE_EVENTS=["focus","mousedown","keydown"],i.PopupServiceImpl._COPY_SAFE_EVENT_PROPERTIES={altKey:!0,bubbles:!0,cancelable:!0,ctrlKey:!0,currentTarget:!0,eventPhase:!0,metaKey:!0,relatedTarget:!0,shiftKey:!0,target:!0,timeStamp:!0,view:!0,which:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pageX:!0,pageY:!0,screenX:!0,screenY:!0,toElement:!0,char:!0,charCode:!0,key:!0,keyCode:!0},i.PopupServiceImpl._REFRESH_DELAY=10,i.ZOrderUtils={},i.ZOrderUtils.STATUS={UNKNOWN:0,OPENING:1,OPEN:2,CLOSING:3,CLOSE:4},i.ZOrderUtils._STATUS_DATA="oj-popup-status",i.ZOrderUtils.getStatus=function(e){e instanceof Element&&(e=$(e));var t=e.data(i.ZOrderUtils._STATUS_DATA);return isNaN(t)?i.ZOrderUtils.STATUS.UNKNOWN:t},i.ZOrderUtils.setStatus=function(e,t){e instanceof Element&&(e=$(e)),t>=1&&t<=4&&e.data(i.ZOrderUtils._STATUS_DATA,t)},i.ZOrderUtils.getFirstAncestorLayer=function(e){if(!e)return i.ZOrderUtils.getDefaultLayer();for(var t=e;t&&t.length>0&&t.attr(i.ZOrderUtils._SURROGATE_ATTR)!==i.ZOrderUtils._DEFAULT_LAYER_ID;){if(i.ZOrderUtils._hasSurrogate(t[0]))return t;t=t.parent()}return i.ZOrderUtils.getDefaultLayer()},i.ZOrderUtils.getDefaultLayer=function(){var e=$(document.getElementById(i.ZOrderUtils._DEFAULT_LAYER_ID));return e.length>0?e:((e=$("<div>")).attr("role","presentation"),e.attr("id",i.ZOrderUtils._DEFAULT_LAYER_ID),e.prependTo($(document.body)),e)},i.ZOrderUtils.addToAncestorLayer=function(e,t,n,o,s,r){var a=e[0];if(i.ZOrderUtils._hasSurrogate(a.parentNode))throw new Error("JET Popup is already open - id: "+a.getAttribute("id"));var l=i.ZOrderUtils.getFirstAncestorLayer(s===i.PopupService.LAYER_LEVEL.TOP_LEVEL?null:t),u=$("<div>"),h=e.attr("id");i.StringUtils.isEmptyOrUndefined(h)?u.uniqueId():u.attr("id",[h,"layer"].join("_")),u.attr("role","presentation"),u.addClass(o),e.after(u);i.ZOrderUtils._createSurrogate(u,r);i.Components.subtreeDetached(a),e.appendTo(u),e.data(i.ZOrderUtils._LAYER_ID_DATA,u.attr("id")),u.appendTo(l),i.Components.subtreeAttached(a),i.ZOrderUtils.applyModality(u,n)},i.ZOrderUtils.applyEvents=function(e,t,n){if(!n){var o=e.attr(i.ZOrderUtils._SURROGATE_ATTR);o&&(n=$(document.getElementById(o)))}e.data(i.ZOrderUtils._EVENTS_DATA,t),n&&n.length>0&&t&&$.isFunction(t[i.PopupService.EVENT.POPUP_REMOVE])&&i.Components.setComponentOption(n[0],"beforeDestroy",t[i.PopupService.EVENT.POPUP_REMOVE])},i.ZOrderUtils.getEvents=function(e){return e.data(i.ZOrderUtils._EVENTS_DATA)},i.ZOrderUtils._createSurrogate=function(e,t){var n="script";t&&(n="oj-surrogate");var o=$(document.createElement(n)),s=e.attr("id");i.StringUtils.isEmptyOrUndefined(s)||o.attr("id",[s,"surrogate"].join("_")),t&&o.attr("data-oj-binding-provider","none"),o.insertBefore(e),t||o.ojSurrogate();var r=o.attr("id");return e.attr(i.ZOrderUtils._SURROGATE_ATTR,r),o},i.ZOrderUtils._removeSurrogate=function(e){var t=e.attr(i.ZOrderUtils._SURROGATE_ATTR);e.removeAttr(i.ZOrderUtils._SURROGATE_ATTR);var n=$(document.getElementById(t));e.insertAfter(n),n.length>0&&i.Components.setComponentOption(n[0],"beforeDestroy",null),n.remove()},i.ZOrderUtils.getOpenPopupLayer=function(e){var t=e.parent();if(!t||0===t.length){var n=e.data(i.ZOrderUtils._LAYER_ID_DATA);t=$(document.getElementById(n))}return t},i.ZOrderUtils.removeFromAncestorLayer=function(e){var t=i.ZOrderUtils.getOpenPopupLayer(e);i.ZOrderUtils.preOrderVisit(t,i.ZOrderUtils._closeDescendantPopupsCallback),i.ZOrderUtils._removeOverlayFromAncestorLayer(t),t.removeData(i.ZOrderUtils._EVENTS_DATA),t.removeData(i.ZOrderUtils._MODALITY_DATA),e.removeData(i.ZOrderUtils._LAYER_ID_DATA);var n=e[0];i.Components.subtreeDetached(n),i.ZOrderUtils._removeSurrogate(t),n&&n.parentElement?i.DomUtils.unwrap(e,t):t.remove(),i.Components.subtreeAttached(n)},i.ZOrderUtils._closeDescendantPopupsCallback=function(e,t){if(t.level>0)return i.ZOrderUtils.VISIT_RESULT.REJECT;var n=e.data(i.ZOrderUtils._EVENTS_DATA);return n&&$.isFunction(n[i.PopupService.EVENT.POPUP_CLOSE])&&n[i.PopupService.EVENT.POPUP_CLOSE](),i.ZOrderUtils.VISIT_RESULT.ACCEPT},i.ZOrderUtils.applyModality=function(e,t){var n=e.data(i.ZOrderUtils._MODALITY_DATA);if(e.data(i.ZOrderUtils._MODALITY_DATA,t),i.StringUtils.isEmptyOrUndefined(n))i.PopupService.MODALITY.MODAL===t?i.ZOrderUtils._addOverlayToAncestorLayer(e):i.ZOrderUtils._removeOverlayFromAncestorLayer(e);else{if(n===t)return;t!==n&&t===i.PopupService.MODALITY.MODAL?i.ZOrderUtils._addOverlayToAncestorLayer(e):i.ZOrderUtils._removeOverlayFromAncestorLayer(e)}},i.ZOrderUtils.hasModalDialogOpen=function(){for(var e=i.ZOrderUtils.getDefaultLayer().children(),t=e.length-1;t>-1;t--){if($(e[t]).hasClass(i.ZOrderUtils._OVERLAY_SELECTOR))return!0}return!1},i.ZOrderUtils._addOverlayToAncestorLayer=function(e){var t=$("<div>");t.addClass(i.ZOrderUtils._OVERLAY_SELECTOR),t.addClass(e[0].className),t.attr("role","presentation");var n=e.attr("id");i.StringUtils.isEmptyOrUndefined(n)?t.uniqueId():t.attr("id",[n,"overlay"].join("_")),e.before(t);var o=t.attr("id");e.attr(i.ZOrderUtils._OVERLAY_ATTR,o)},i.ZOrderUtils._removeOverlayFromAncestorLayer=function(e){var t=e.attr(i.ZOrderUtils._OVERLAY_ATTR);i.StringUtils.isEmptyOrUndefined(t)||(e.removeAttr(i.ZOrderUtils._OVERLAY_ATTR),$(document.getElementById(t)).remove())},i.ZOrderUtils.VISIT_RESULT={ACCEPT:0,REJECT:1,COMPLETE:2},i.ZOrderUtils._VISIT_TRAVERSAL={PRE_ORDER:0,POST_ORDER:1},i.ZOrderUtils.postOrderVisit=function(e,t,n){n||(n={}),n.level=0,n.type=i.ZOrderUtils._VISIT_TRAVERSAL.POST_ORDER,i.ZOrderUtils._visitTree(e,t,n)},i.ZOrderUtils.preOrderVisit=function(e,t,n){n||(n={}),n.level=0,n.type=i.ZOrderUtils._VISIT_TRAVERSAL.PRE_ORDER,i.ZOrderUtils._visitTree(e,t,n)},i.ZOrderUtils._visitTree=function(e,t,n){for(var o=n.level,s=e.children(),r=s.length-1;r>-1;r--){var a=$(s[r]);if(i.ZOrderUtils._hasSurrogate(a[0])){var l;if(n.type===i.ZOrderUtils._VISIT_TRAVERSAL.PRE_ORDER){if((l=t(a,n))===i.ZOrderUtils.VISIT_RESULT.COMPLETE)return l;if(l===i.ZOrderUtils.VISIT_RESULT.REJECT)break}if(n.level=o+1,l=i.ZOrderUtils._visitTree(a,t,n),n.level=o,l===i.ZOrderUtils.VISIT_RESULT.COMPLETE)return l;if(n.type===i.ZOrderUtils._VISIT_TRAVERSAL.POST_ORDER){if((l=t(a,n))===i.ZOrderUtils.VISIT_RESULT.COMPLETE)return l;if(l===i.ZOrderUtils.VISIT_RESULT.REJECT)break}}}return i.ZOrderUtils.VISIT_RESULT.ACCEPT},i.ZOrderUtils._hasSurrogate=function(e){return!(!e||1!==e.nodeType||!e.hasAttribute(i.ZOrderUtils._SURROGATE_ATTR))},i.ZOrderUtils.hasPopupsOpen=function(){return i.ZOrderUtils.getDefaultLayer().children().length>0},i.ZOrderUtils.getOpenPopupCount=function(){var e={popupCount:0},t=i.ZOrderUtils.getDefaultLayer();return i.ZOrderUtils.preOrderVisit(t,i.ZOrderUtils._openPopupCountCallback,e),e.popupCount},i.ZOrderUtils._openPopupCountCallback=function(e,t){return t.popupCount=t.popupCount+1,i.ZOrderUtils.VISIT_RESULT.ACCEPT},i.ZOrderUtils.findOpenPopups=function(){var e={},t=[];e.popups=t;var n=i.ZOrderUtils.getDefaultLayer();return i.ZOrderUtils.preOrderVisit(n,i.ZOrderUtils._openPopupsCallback,e),t=e.popups,$(t)},i.ZOrderUtils._openPopupsCallback=function(e,t){return t.popups.push(e[0]),i.ZOrderUtils.VISIT_RESULT.ACCEPT},i.ZOrderUtils.isAboveTopModalLayer=function(e){if(!e||!i.ZOrderUtils.hasPopupsOpen())return!0;var t,n,o=(t={topLayer:null},n=i.ZOrderUtils.getDefaultLayer(),i.ZOrderUtils.preOrderVisit(n,function(e,t){if(t.level>0)return i.ZOrderUtils.VISIT_RESULT.REJECT;var n=t.topLayer;n?i.ZOrderUtils.compareStackingContexts($(e),$(n))>0&&(t.topLayer=e):t.topLayer=e},t),t.topLayer?t.topLayer[0]:void 0);if(!o)return!0;var s=function(e){var t={topModalPopup:null};return e.hasAttribute(i.ZOrderUtils._OVERLAY_ATTR)&&(t.topModalPopup=$(e)),i.ZOrderUtils.postOrderVisit($(e),function(e,t){return e[0].hasAttribute(i.ZOrderUtils._OVERLAY_ATTR)?(t.topModalPopup=e,i.ZOrderUtils.VISIT_RESULT.COMPLETE):i.ZOrderUtils.VISIT_RESULT.ACCEPT},t),t.topModalPopup?t.topModalPopup[0]:void 0}(o);return!s||(i.DomUtils.isAncestorOrSelf(s,e)||i.ZOrderUtils.compareStackingContexts($(s),$(e))<0)},i.ZOrderUtils.compareStackingContexts=function(e,t){function n(e,t){for(var n=["absolute","relative","fixed"],o=e.parents(),s=[],r=o.length-1;r>-1;r--)s.push($(o[r]));(o=s).push(e);var a=[],l=0;for(r=0;r<o.length;r++){var u=o[r],h=u.css("position"),d=i.DomUtils.getCSSLengthAsFloat(u.css("opacity")),c=i.DomUtils.getCSSLengthAsInt(u.css("z-index")),p=$.inArray(u[0],u.parent().children());if($.inArray(h,n)>-1&&c>0)a.push({weight:[l++,c,p],order:[p]});else if(d<1)a.push({weight:[l++,1,p],order:[p]});else{if(!t)continue;a.push({weight:[0,0,p],order:[p]})}}return a}function o(e,t){for(var i=Math.max(e.length,t.length),n=0;n<i;n++){var o=n<e.length?e[n]:0,s=n<t.length?t[n]:0;if(o!==s)return o<s?-1:1}return 0}i.Assert.assertPrototype(e,$),i.Assert.assertPrototype(t,$);for(var s=n(e,!1),r=n(t,!1),a=Math.max(s.length,r.length),l=0;l<a;l++){var u=l<s.length?s[l].weight:[-1],h=l<r.length?r[l].weight:[-1];if(0!==(d=o(u,h)))return d}s=n(e,!0),r=n(t,!0),a=Math.max(s.length,r.length);for(l=0;l<a;l++){var d;if(0!==(d=o(u=l<s.length?s[l].order:[-1],h=l<r.length?r[l].order:[-1])))return d}return 0},i.ZOrderUtils.eatEvent=function(e){e.stopPropagation(),e.preventDefault()},i.ZOrderUtils.isPopupOpen=function(e){var t=e.parent();return!(!t||1!==t.length||!i.ZOrderUtils._hasSurrogate(t[0]))},i.ZOrderUtils._EVENTS_DATA="oj-popup-events",i.ZOrderUtils._MODALITY_DATA="oj-popup-modality",i.ZOrderUtils._DEFAULT_LAYER_ID="__oj_zorder_container",i.ZOrderUtils._SURROGATE_ATTR="data-oj-surrogate-id",i.ZOrderUtils._LAYER_ID_DATA="oj-popup-layer-id",i.ZOrderUtils._OVERLAY_ATTR="data-oj-overlayid",i.ZOrderUtils._OVERLAY_SELECTOR="oj-component-overlay",i.__registerWidget("oj.ojSurrogate",$.oj.baseComponent,{version:"1.0.0",widgetEventPrefix:"oj",options:{beforeDestroy:null},_ComponentCreate:function(){this._super(),this.element.uniqueId()},_invokeBeforeDestroy:function(){var e=this.options.beforeDestroy;this.options.beforeDestroy=null,e&&e()},_destroy:function(){this._invokeBeforeDestroy(),this.element.removeUniqueId(),this._super()},_NotifyDetached:function(){this._invokeBeforeDestroy(),this._super()}});i.CustomElementBridge.registerMetadata("oj-surrogate","baseComponent",{properties:{beforeDestroy:{type:"function"}},extension:{_WIDGET_NAME:"ojSurrogate"}}),i.CustomElementBridge.register("oj-surrogate",{metadata:i.CustomElementBridge.getMetadata("oj-surrogate")}),i.SimpleTapRecognizer=function(e){this._tapCallback=e,this.Init()},i.Object.createSubclass(i.SimpleTapRecognizer,i.Object,"oj.SimpleTapRecognizer"),i.SimpleTapRecognizer.prototype.Init=function(){i.SimpleTapRecognizer.superclass.Init.call(this);for(var e=this._eventHandlerCallback=this._eventHandler.bind(this),t=document.documentElement,n=0;n<i.SimpleTapRecognizer._TOUCHEVENTS.length;n++)t.addEventListener(i.SimpleTapRecognizer._TOUCHEVENTS[n],e,!0)},i.SimpleTapRecognizer.prototype._eventHandler=function(e){var t=this._tapCallback,n=e.type;if("touchstart"===n)this._touchStartEvent=e,this._touchStartEvent._tapStart=(new Date).getTime();else if("touchmove"===n||"touchcancel"===n)this._touchStartEvent=null;else if("touchend"===n){if(this._touchStartEvent){var o=this._touchStartEvent._tapStart;if(isNaN(o))t(this._touchStartEvent);else(new Date).getTime()-o<i.SimpleTapRecognizer._PRESSHOLDTHRESSHOLD&&t(this._touchStartEvent)}this._touchStartEvent=null}},i.SimpleTapRecognizer.prototype.destroy=function(){this._tapCallback=null;var e=this._eventHandlerCallback;this._eventHandlerCallback=null;for(var t=document.documentElement,n=0;n<i.SimpleTapRecognizer._TOUCHEVENTS.length;n++)t.removeEventListener(i.SimpleTapRecognizer._TOUCHEVENTS[n],e,!0)},i.SimpleTapRecognizer._TOUCHEVENTS=["touchstart","touchmove","touchcancel","touchend"],i.SimpleTapRecognizer._PRESSHOLDTHRESSHOLD=700,i.PopupLiveRegion=function(){this.Init()},i.Object.createSubclass(i.PopupLiveRegion,i.Object,"oj.PopupLiveRegion"),i.PopupLiveRegion.prototype.Init=function(){i.PopupLiveRegion.superclass.Init.call(this),isNaN(i.PopupLiveRegion._refCounter)?i.PopupLiveRegion._refCounter=1:++i.PopupLiveRegion._refCounter},i.PopupLiveRegion.prototype.destroy=function(){if(!isNaN(i.PopupLiveRegion._refCounter)&&(--i.PopupLiveRegion._refCounter,i.PopupLiveRegion._refCounter<1)){var e=$(document.getElementById(i.PopupLiveRegion._POPUP_LIVE_REGION_ID));e.length>0&&e.remove()}},i.PopupLiveRegion.prototype.announce=function(e){if(!i.StringUtils.isEmpty(e)){var t=i.PopupLiveRegion._getLiveRegion();t.children().remove(),$("<div>").text(e).appendTo(t)}},i.PopupLiveRegion._getLiveRegion=function(){var e=$(document.getElementById(i.PopupLiveRegion._POPUP_LIVE_REGION_ID));return 0===e.length&&((e=$("<div>")).attr({id:i.PopupLiveRegion._POPUP_LIVE_REGION_ID,role:"log","aria-live":"polite","aria-relevant":"additions"}),e.addClass("oj-helper-hidden-accessible"),e.appendTo(document.body)),e},i.PopupLiveRegion._POPUP_LIVE_REGION_ID="__oj_popup_arialiveregion",i.PopupSkipLink=function(e,t,n,o){i.Assert.assertPrototype(e,$),i.Assert.assertString(t),i.Assert.assertFunction(n),i.Assert.assertStringOrNull(o),this._sibling=e,this._message=t,this._callback=n,this._id=o,this.Init()},i.Object.createSubclass(i.PopupSkipLink,i.Object,"oj.PopupSkipLink"),i.PopupSkipLink.prototype.Init=function(){i.PopupSkipLink.superclass.Init.call(this);var e=this._sibling,t=this._callback,n=this._message;this._message=null;var o=this._id;this._id=null;var s=$("<a>").attr({tabindex:"-1",href:"#",role:"link"});s.attr("id",o),s.addClass("oj-helper-hidden-accessible"),s.text(n),s.insertAfter(e),s.on("click",i.PopupSkipLink._activateHandler.bind(this,t)),s.on("keydown keyup keypress",i.PopupSkipLink._keyHandler),e.data(i.PopupSkipLink._SKIPLINK_ATTR,s)},i.PopupSkipLink._activateHandler=function(e,t){i.ZOrderUtils.eatEvent(t),window.setImmediate(e)},i.PopupSkipLink._keyHandler=function(e){e.keyCode===$.ui.keyCode.ENTER&&i.ZOrderUtils.eatEvent(e)},i.PopupSkipLink.prototype.destroy=function(){var e=this._sibling;if(delete this._sibling,delete this._callback,e){var t=e.data(i.PopupSkipLink._SKIPLINK_ATTR);e.removeData(i.PopupSkipLink._SKIPLINK_ATTR),t&&(t.off("click keydown keyup keypress"),t.remove())}},i.PopupSkipLink.prototype.getLink=function(){var e,t=this._sibling;return t&&(e=t.data(i.PopupSkipLink._SKIPLINK_ATTR)),e},i.PopupSkipLink._SKIPLINK_ATTR="oj-skiplink",i.PopupWhenReadyMediator=function(e,t,i,n){this._element=e,this._operation=t,this._widgetName=i,this._isCustomElement=!!n,this.Init()},i.Object.createSubclass(i.PopupWhenReadyMediator,i.Object,"oj.PopupWhenReadyMediator"),i.PopupWhenReadyMediator.prototype.Init=function(){i.PopupWhenReadyMediator.superclass.Init.call(this),this._resolvedQueue=[],this._callback=this._eventHandler.bind(this);var e=this._operation,t=["oj"];this._isCustomElement?(t.push(e.charAt(0).toUpperCase()),t.push(e.slice(1))):t.push(e);var n=this._eventType=t.join("");this._element.on(n,this._callback);var o=i.Context.getContext(this._element[0]).getBusyContext(),s={description:this._getBusyStateDescription.bind(this,this._element,this._operation,this._widgetName)},r=o.addBusyState(s);this.AddPromiseExecutor(r),this._whenReadyPromise=new Promise(this.AddPromiseExecutor.bind(this))},i.PopupWhenReadyMediator.prototype._getBusyStateDescription=function(e,t,i){return i+" identified by '"+e.attr("id")+"' is busy animating on the '"+t+"' operation."},i.PopupWhenReadyMediator.prototype._deliverResolved=function(e){var t=this._resolvedQueue;this._resolvedQueue=null,e=e||this._operation,this._operation=null;for(var n=0;n<t.length;n++)try{t[n](e)}catch(e){i.Logger.error("Error resolving whenReady promises:\n%o",e)}this._whenReadyPromise=Promise.resolve("none")},i.PopupWhenReadyMediator.prototype.destroy=function(){if(this._resolvedQueue&&this._deliverResolved("none"),this._callback){var e=this._eventType;this._element.off(e,this._callback)}this._callback=null,this._element=null,this._operation=null,this._whenReadyPromise=null,this._widgetName=null,this._eventType=null},i.PopupWhenReadyMediator.prototype.getWhenReadyPromise=function(){return this._whenReadyPromise},i.PopupWhenReadyMediator.prototype._eventHandler=function(e){e.target===this._element[0]&&(this._element.off(e.type,this._callback),this._deliverResolved(),this._callback=null)},i.PopupWhenReadyMediator.prototype._getPendingOperation=function(){return this._operation?this._operation:"none"},i.PopupWhenReadyMediator.prototype.AddPromiseExecutor=function(e,t){this._resolvedQueue&&this._resolvedQueue.push(e)},i.PopupWhenReadyMediator.prototype.isOperationPending=function(e,t,n,o){var s=!1,r=this._widgetName,a=this._getPendingOperation();if(t===a)i.Logger.info("An %s instance invoked a '%s' operation while pending animation of the same type of operation.  The second request will be ignored.",r,t),s=!0;else if("none"!==a){i.Logger.info("An %s instance invoked a '%s' operation while pending animation of a '%s' operation. The second request will be invoked after the pending operation completes.",r,t,a),new Promise(this.AddPromiseExecutor.bind(this)).then(function(){this[n].apply(this,o)}.bind(e)),s=!0}return s},i.PositionUtils={},i.PositionUtils.normalizeHorizontalAlignment=function(e,t){for(var n=$.extend({},e),o=0;o<i.PositionUtils._ALIGN_RULE_PROPERTIES.length;o++){var s=i.PositionUtils._ALIGN_RULE_PROPERTIES[o],r=n[s];if(r)if(i.StringUtils.isString(r))n[s]=r.replace("start",t?"right":"left").replace("end",t?"left":"right").replace("<",t?"+":"-").replace(">",t?"-":"+");else for(var a=0;a<i.PositionUtils._SUB_ALIGN_RULE_PROPERTIES.length;a++){var l=i.PositionUtils._SUB_ALIGN_RULE_PROPERTIES[a],u=r[l];i.StringUtils.isString(u)&&(r[l]=u.replace("start",t?"right":"left").replace("end",t?"left":"right").replace("<",t?"+":"-").replace(">",t?"-":"+"))}}return n},i.PositionUtils.normalizePositionOf=function(e,t,i){return"event"===e?i:null==e||"launcher"===e?t:e},i.PositionUtils._normalizeEventForPosition=function(e){$.each(["pageX","pageY"],function(t,i){if(e&&void 0===e[i]&&e.originalEvent){var n=e.originalEvent,o=n.type,s="touchstart"===o||"touchmove"===o?"touches":"touchend"===o?"changedTouches":null;if(s){var r=n[s][0];r&&(e[i]=r[i])}}})},i.PositionUtils._ALIGN_RULE_PROPERTIES=["my","at"],i.PositionUtils._SUB_ALIGN_RULE_PROPERTIES=["vertical","horizontal"],i.PositionUtils.isAligningPositionClipped=function(e){if(e.target&&e.target.height>0&&e.target.width>0){var t=e.target.element;return!i.PositionUtils.isWithinViewport(t)}return!1},i.PositionUtils.isWithinViewport=function(e){function t(e,t){if(["hidden","scroll","auto"].indexOf(t.overflowY)>-1){if(e.bottom-t.top<-1)return!1;var n="auto"===t.overflowX&&t.scrollWidth>t.innerWidth||"scroll"===t.overflowX?i.DomUtils.getScrollBarWidth():0;if(t.bottom-n-e.top<1)return!1}return!(["hidden","scroll","auto"].indexOf(t.overflowX)>-1&&(n="auto"===t.overflowY&&t.scrollHeight>t.innerHeight||"scroll"===t.overflowY?i.DomUtils.getScrollBarWidth():0,e.right-(t.left+("rtl"===i.DomUtils.getReadingDirection()?n:0))<-1||e.left-(t.right-("ltr"===i.DomUtils.getReadingDirection()?n:0))>-1))}function n(e){return"visible"!==e.css("overflow-x")||"visible"!==e.css("overflow-y")}function o(e){var t=e[0];if(1===t.nodeType){var i=$.extend({},t.getBoundingClientRect());return i.overflowX=e.css("overflow-x"),i.overflowY=e.css("overflow-y"),i.innerHeight=e.innerHeight(),i.innerWidth=e.innerWidth(),i.scrollHeight=t.scrollHeight,i.scrollWidth=t.scrollWidth,i}return{height:0,width:0}}function s(e){return["fixed","absolute","relative"].indexOf(e.css("position"))>-1&&(Math.abs(i.DomUtils.getCSSLengthAsInt(e.css("top")))>0||Math.abs(i.DomUtils.getCSSLengthAsInt(e.css("bottom")))>0||Math.abs(i.DomUtils.getCSSLengthAsInt(e.css("left")))>0||Math.abs(i.DomUtils.getCSSLengthAsInt(e.css("right")))>0)}if(!e)return!1;if($.isWindow(e[0])||s(e))return!0;for(var r=o(e),a=!0,l=e.parent();a&&l&&l.length>0&&"BODY"!==l[0].nodeName&&1===l[0].nodeType&&!s(l);){if(n(l)){var u=o(l);u.height>0&&u.width>0&&(a=t(r,u))}l=l.parent()}return a},i.PositionUtils._ANIMATION_TRANSFORM_ORIGIN_RULES={"right-top":"right top","right-middle":"right center","right-bottom":"right bottom","left-top":"left top","left-middle":"left center","left-bottom":"left bottom","center-top":"center top","center-middle":"center center","center-bottom":"center bottom"},i.PositionUtils._ALIGN_MNEMONIC_DATA="oj-popup-align-mnemonic",i.PositionUtils.captureTransformOriginAnimationEffectsOption=function(e,t){var n=[t.horizontal,t.vertical].join("-");e.data(i.PositionUtils._ALIGN_MNEMONIC_DATA,n)},i.PositionUtils.addTransformOriginAnimationEffectsOption=function(e,t){var n,o;i.StringUtils.isString(t)?(o=!0,n=t):(o=!1,n=JSON.stringify(t));var s=/#myPosition/g;if(n.match(s)){var r=e.data(i.PositionUtils._ALIGN_MNEMONIC_DATA);i.StringUtils.isEmptyOrUndefined(r)&&(r="center-middle");var a=i.PositionUtils._ANIMATION_TRANSFORM_ORIGIN_RULES[r];n=n.replace(s,a),t=o?n:JSON.parse(n)}return t},i.PositionUtils._JQUI_MNEMONIC_GRP_REGX=/^(\w+)(\+|\-)?(\d+)?/,i.PositionUtils._VERTICAL_ENUM_TST_REGX=/^top$|^center$|^bottom$/,i.PositionUtils._HORIZONTAL_ENUM_TST_REGX=/^start$|^left$|^center$|^end$|^right$/,i.PositionUtils._COLLISION_ENUM_TST_REGX=/^none$|^flip$|^flipfit$|^fit$|^flipcenter$/,i.PositionUtils._parsePositionNmnemonic=function(e,t){var n=[null,Number.NaN],o=i.PositionUtils._JQUI_MNEMONIC_GRP_REGX.exec(e);if(o[1]&&t.test(o[1])&&(n[0]=o[1],o[2])){var s=parseInt(o[3],10);isNaN(s)||(s*="-"===o[2]?-1:1,n[1]=s)}return n},i.PositionUtils._parseJSON=function(e){if(i.StringUtils.isString(e)&&/^{/.test(e)&&/}$/.test(e))try{return JSON.parse(e)}catch(e){}return null},i.PositionUtils._coerceMyAtToJet=function(e,t,n,o){var s=i.PositionUtils._parseJSON(t);s&&(t=s),(s=i.PositionUtils._parseJSON(n))&&(n=s),o||(o={});var r,a=$.extend({},o),l={x:0,y:0};if(n&&"x"in n&&"y"in n&&(l.x=i.DomUtils.getCSSLengthAsInt(n.x),l.y=i.DomUtils.getCSSLengthAsInt(n.y)),i.StringUtils.isString(t)){var u=t.split(/\s/);u.length>0&&!i.StringUtils.isEmpty(u[0])&&(r=i.PositionUtils._parsePositionNmnemonic(u[0],i.PositionUtils._HORIZONTAL_ENUM_TST_REGX))[0]&&(a.horizontal=r[0],isNaN(r[1])||(l.x=r[1])),u.length>1&&!i.StringUtils.isEmpty(u[1])&&(r=i.PositionUtils._parsePositionNmnemonic(u[1],i.PositionUtils._VERTICAL_ENUM_TST_REGX))[0]&&(a.vertical=r[0],isNaN(r[1])||(l.y=r[1]))}else t&&("horizontal"in t&&(r=i.PositionUtils._parsePositionNmnemonic(t.horizontal,i.PositionUtils._HORIZONTAL_ENUM_TST_REGX))[0]&&(a.horizontal=r[0],isNaN(r[1])||(l.x=r[1])),"vertical"in t&&(r=i.PositionUtils._parsePositionNmnemonic(t.vertical,i.PositionUtils._VERTICAL_ENUM_TST_REGX))[0]&&(a.vertical=r[0],isNaN(r[1])||(l.y=r[1])));var h={};return h[e]=a,h.offset=l,h},i.PositionUtils._coerceCollisionToJet=function(e,t){var n=t;return i.PositionUtils._COLLISION_ENUM_TST_REGX.test(e)&&(n=e),{collision:n}},i.PositionUtils._coerceOfToJet=function(e,t){var n=i.PositionUtils._parseJSON(e);n&&(e=n);var o=t;if(i.StringUtils.isString(e))o=e;else if($.isWindow(e))o="window";else if(e instanceof Element||e instanceof $){(e=$(e)).uniqueId(),o="#"+function(e){for(var t=[],i=/\w|_|-/,n=0;n<e.length;n++){var o=e.substring(n,n+1);i.test(o)?t.push(o):t.push("\\"+o)}return t.join("")}(e.attr("id"))}else e instanceof Event||e instanceof $.Event?("pageX"in e||"pageY"in e)&&((o={}).x=i.DomUtils.getCSSLengthAsFloat(e.pageX),o.y=i.DomUtils.getCSSLengthAsFloat(e.pageY)):e&&("x"in e||"y"in e)&&((o={}).x=i.DomUtils.getCSSLengthAsFloat(e.x),o.y=i.DomUtils.getCSSLengthAsFloat(e.y));return{of:o}},i.PositionUtils.coerceToJet=function(e,t){e||(e={});var n=i.PositionUtils._parseJSON(e);n&&(e=n),t||(t={});var o=t.my,s=t.at,r=t.collision,a=t.of,l=i.PositionUtils._coerceMyAtToJet("my",e.my,e.offset,o),u=i.PositionUtils._coerceMyAtToJet("at",e.at,null,s),h={offset:{x:l.offset.x+u.offset.x,y:l.offset.y+u.offset.y}};return delete l.offset,delete u.offset,$.extend({},l,u,h,i.PositionUtils._coerceCollisionToJet(e.collision,r),i.PositionUtils._coerceOfToJet(e.of,a),function(e,t){return{using:$.isFunction(e)?e:t}}(e.using,void 0))},i.PositionUtils.coerceToJqUi=function(e){function t(t,i){var n=[];if(e[t][i]?n.push(e[t][i]):n.push("center"),"my"===t&&e.offset){var o="horizontal"===i?"x":"y",s=e.offset[o];isNaN(s)||0===s||(n.push(s>0?"+":""),n.push(Math.floor(s).toString()))}return n.join("")}var n={};["my","at"].forEach(function(i){if(e[i]){var o=[];o.push(t(i,"horizontal")),o.push(" "),o.push(t(i,"vertical")),n[i]=o.join("")}});var o=e.of;if(i.StringUtils.isString(o))n.of="window"===o?window:o;else if(o&&!i.StringUtils.isString(o)&&"x"in o&&"y"in o){var s=o.x,r=o.y,a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,1,s,r,s,r,!1,!1,!1,!1,0,null),n.of=$.Event(a,{pageX:s,pageY:r})}else n.of=o;return e.collision&&(n.collision=e.collision),e.using&&(n.using=e.using),n},$.ui.position.flipcenter={left:function(e,t){var n=e.left;$.ui.position.flip.left.call(this,e,t);var o=t.within,s=o.isWindow?o.scrollLeft:o.offset.left,r=o.width,a=e.left-t.collisionPosition.marginLeft,l=s-a,u=a+t.collisionWidth-r-s;(l>0||u>0)&&("right"===t.at[0]?n-=t.targetWidth/2:"left"===t.at[0]&&(n+=t.targetWidth/2),n-=("rtl"===i.DomUtils.getReadingDirection()?-1:1)*(t.elemWidth/2),e.left=Math.max(0,n))},top:function(e,t){var i=e.top;$.ui.position.flip.top.call(this,e,t);var n=t.within,o=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,r=e.top-t.collisionPosition.marginTop,a=o-r,l=r+t.collisionHeight-s-o;(a>0||l>0)&&("top"===t.at[1]?i+=t.targetHeight/2:"bottom"===t.at[1]&&(i-=t.targetHeight/2),i+=t.elemHeight/2,e.top=Math.max(0,i))}};var Ft=$.ui.position.flip.left;$.ui.position.flip={left:Ft.bind(this),top:function(e,t){var i,n,o=t.within,s=o.offset.top+o.scrollTop,r=o.height,a=o.isWindow?o.scrollTop:o.offset.top,l=e.top-t.collisionPosition.marginTop,u=l-a,h=l+t.collisionHeight-r-a,d="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,c="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,p=-2*t.offset[1];u<0?((i=e.top+d+c+p+t.collisionHeight-r-s)<0||i<Math.abs(u))&&h<0&&u>h&&(e.top+=d+c+p):h>0&&((n=e.top-t.collisionPosition.marginTop+d+c+p-a)>0||Math.abs(n)<h)&&(e.top+=d+c+p)}},i.__registerWidget("oj.ojProgressbar",$.oj.baseComponent,{version:"1.0.0",defaultElement:"<div>",widgetEventPrefix:"oj",options:{max:100,value:0,type:"bar",disabled:!1},min:0,_indeterminate:!1,_ComponentCreate:function(){this._super(),this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progress","aria-valuemin":this.min}),this.element.addClass("oj-component"),this._setUpProgressType()},_setUpProgressType:function(){"circle"===this.options.type?(this.element.addClass("oj-progress-circle"),this._setupCircleSVG()):(this.element.addClass("oj-progress-bar"),this.valueDiv=$("<div class='oj-progress-bar-value'></div>").appendTo(this.element)),this._refreshValue()},_InitOptions:function(e,t){var i=this.element;if(this._super(e,t),void 0===t.max){var n=i.attr("max")||void 0;null!=n&&(this.options.max=n)}},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this._indeterminate=-1==e,"number"!=typeof e&&(e=isNaN(e)?0:Number(e)),this._indeterminate?-1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e,t){var i=e.value;delete e.value,this._super(e,t),this.options.disabled||(this.options.value=this._constrainedValue(i),this._refreshValue())},_setupCircleSVG:function(){if(this.svg&&this.svg.remove(),!this._indeterminate){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg"),i=document.createElementNS(e,"circle"),n=document.createElementNS(e,"circle"),o=.5*Math.min(this.element.outerWidth(),this.element.outerHeight());t.setAttribute("width",2*o),t.setAttribute("height",2*o),t.setAttribute("class","oj-progress-circle-transform"),i.setAttribute("r",.9*o),i.setAttribute("cx",o),i.setAttribute("cy",o),i.setAttribute("class","oj-progress-circle-base"),n.setAttribute("r",.9*o),n.setAttribute("cx",o),n.setAttribute("cy",o),n.setAttribute("class","oj-progress-circle-base oj-progress-circle-value");var s=2*o*.9*Math.PI,r=s-this._percentage()/100*s;n.setAttribute("style","stroke-dasharray:"+s.toString()+";stroke-dashoffset:"+r),t.appendChild(i),t.appendChild(n),this.svg=$(t),this.element[0].appendChild(t)}},_setOption:function(e,t,i){"max"===e&&(t=Math.max(this.min,t)),"type"===e&&("circle"===this.options.type?(this.element.removeClass("oj-progress-circle"),this.svg&&this.svg.remove()):(this.element.removeClass("oj-progress-bar"),this.valueDiv.remove()),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this._super(e,t,i),"type"===e&&this._setUpProgressType()},_percentage:function(){return Math.min(this._indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min),100)},_refreshValue:function(){var e=this.options.value,t=this._percentage(),i="circle"===this.options.type;if(i?this._setupCircleSVG():i||(this.valueDiv.toggle(this._indeterminate||e>this.min).width(t.toFixed(0)+"%"),this.element.toggleClass("oj-progress-bar-indeterminate",this._indeterminate)),this._indeterminate){if(this.element.attr({"aria-valuetext":this.getTranslatedString("ariaIndeterminateProgressText")}),this.element.removeAttr("aria-valuenow"),this.element.removeAttr("aria-valuemin"),this.element.removeAttr("aria-valuemax"),!this.overlayDiv){if(i){this.overlayDiv=$("<div class='oj-progress-circle-overlay'></div>").appendTo(this.element);var n=Math.min(this.element.outerWidth(),this.element.outerHeight());this.overlayDiv.css("width",n),this.overlayDiv.css("height",n)}else this.overlayDiv=$("<div class='oj-progress-bar-overlay'></div>").appendTo(this.valueDiv);this.overlayDiv.addClass("oj-indeterminate")}}else this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)},_destroy:function(){"circle"===this.options.type?(this.element.removeClass("oj-progress-circle oj-component"),this.svg&&this.svg.remove()):(this.element.removeClass("oj-progress-bar oj-component"),this.valueDiv.remove(),this._indeterminate&&this.element.removeClass("oj-progress-bar-indeterminate")),this.element.removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.overlayDiv&&this.overlayDiv.remove(),this._super()}}),i.CustomElementBridge.registerMetadata("oj-progress","baseComponent",{properties:{max:{type:"number"},type:{type:"string",enumValues:["bar","circle"]},radius:{type:"number"},translations:{type:"Object",properties:{ariaIndeterminateProgressText:{type:"string",value:"In Progress"}}},value:{type:"number",writeback:!0}},methods:{},extension:{_WIDGET_NAME:"ojProgressbar"}}),i.CustomElementBridge.register("oj-progress",{metadata:i.CustomElementBridge.getMetadata("oj-progress")}),i.ProgressItem=function(){},i.ProgressItem.Status={QUEUED:"queued",LOADSTARTED:"loadstarted",ABORTED:"aborted",ERRORED:"errored",TIMEDOUT:"timedout",LOADED:"loaded"},i.ProgressItem.EventType={LOADSTART:"loadstart",PROGRESS:"progress",ABORT:"abort",ERROR:"error",LOAD:"load",TIMEOUT:"timeout",LOADEND:"loadend"};i.Composite.register("oj-progress-item",{view:"    <div class='oj-flex oj-sm-justify-content-space-between'>      <div class='oj-flex-item oj-flex oj-sm-flex-direction-column'>        <span data-bind='text: $properties.data.name' class='oj-progresslist-name'></span>        <div data-bind='text: message' class='oj-progresslist-error-message'></div>      </div>      <div class='oj-flex oj-sm-align-items-center'>        <oj-bind-slot name='itemInfo'>          <div class='oj-flex-item oj-flex oj-progresslist-info'>            <span data-bind='text: $data.getSizeInBKMGT($properties.data.size)'></span>          </div>        </oj-bind-slot>        <div class='oj-flex-item oj-flex'>          <oj-progress-status status='{{status}}'                              progress='{{progress}}'>          </oj-progress-status>        </div>      </div>    </div>",viewModel:function(e){var t,n,o,s=this;t=function(e){e.target&&e.lengthComputable&&(s.status(i.ProgressItem.Status.LOADSTARTED),s.progress(parseInt(e.loaded/e.total*100,10)))},n=function(e){var t=e.target;t&&(s.message(e.error.message),s.status(i.ProgressItem.Status.ERRORED),l(t))},o=function(e){var t=e.target;t&&(s.status(i.ProgressItem.Status.LOADED),l(t))},s.status=ko.observable(i.ProgressItem.Status.QUEUED),s.progress=ko.observable(-1),s.message=ko.observable("");var r,a=["B","KB","MB","GB","TB"];function l(e){e.removeEventListener(i.ProgressItem.EventType.PROGRESS,t,!1),e.removeEventListener(i.ProgressItem.EventType.ERROR,n,!1),e.removeEventListener(i.ProgressItem.EventType.TIMEOUT,n,!1),e.removeEventListener(i.ProgressItem.EventType.ABORT,n,!1),e.removeEventListener(i.ProgressItem.EventType.LOAD,o,!1)}s.getSizeInBKMGT=function(e){var t,i=e;if(isNaN(i))return null;for(t=0;i>=1024&&t<4;t++)i/=1024;return i.toFixed(2)+a[t]},(r=e.properties.data).addEventListener(i.ProgressItem.EventType.PROGRESS,t),r.addEventListener(i.ProgressItem.EventType.ERROR,n),r.addEventListener(i.ProgressItem.EventType.TIMEOUT,n),r.addEventListener(i.ProgressItem.EventType.ABORT,n),r.addEventListener(i.ProgressItem.EventType.LOAD,o)},metadata:{properties:{data:{type:"object"}}}});i.Composite.register("oj-progress-list",{view:"<oj-list-view data-bind=\"attr: {id: $unique + '_list'}\"              aria-label='list using array'              data='{{$properties.data}}'              item.renderer='{{renderer()}}'              selection-mode='single'></oj-list-view><script type='text/html' data-bind=\"attr: {id: tempId}\">  <li class='oj-progresslist-item' tabindex='0'>    <oj-progress-item data='{{$data}}'>    </oj-progress-item>  </li><\/script>",viewModel:function(e){var t=this;t.tempId=e.unique+"_templ",t.renderer=function(){return i.KnockoutTemplateUtils.getRenderer(t.tempId,!0)}},metadata:{properties:{data:{type:"Object"}}}});i.Composite.register("oj-progress-status",{view:"  <div data-bind='visible: ($properties.status == \"queued\")'       class='oj-progressstatus-cell'>    <div class='oj-component-icon oj-progressstatus-cancel-icon'         role='img' title='cancel'></div>  </div>  <div data-bind='visible: ($properties.status == \"loadstarted\")'       class='oj-progressstatus-cell'>    <oj-progress type='circle' value='{{$properties.progress}}'>    </oj-progress>  </div>  <div data-bind='visible: ($properties.status == \"loaded\")'       class='oj-progressstatus-cell'>    <div class='oj-component-icon oj-progressstatus-done-icon' role='img' title='done'></div>  </div>  <div data-bind='visible: ($properties.status == \"errored\" || $properties.status == \"timedout\" || $properties.status == \"aborted\")'       class='oj-progressstatus-cell'>    <div class='oj-component-icon oj-progressstatus-error-icon' role='img' title='error'></div>  </div>",metadata:{properties:{status:{type:"string"},progress:{type:"number"}}}}),i.PullToRefreshUtils={},i.PullToRefreshUtils.setupPullToRefresh=function(e,t,n){var o,s,r,a,l,u,h,d,c,p,_,m,g,f;i.PullToRefreshUtils.tearDownPullToRefresh(e),o=$(document.createElement("div")).addClass("oj-pulltorefresh-outer"),i.PullToRefreshUtils._renderAccessibleLink(e,o,t,n),s=$(document.createElement("div")).addClass("oj-pulltorefresh-panel"),o.append(s),(r=$(e)).prepend(o),r.on("touchstart.pulltorefresh",function(e){null==$.data(s[0],"data-pullstart")&&0===r[0].scrollTop&&(i.PullToRefreshUtils._handlePull(e,s,n),(c=s.find(".oj-pulltorefresh-icon")).length>0&&(p=c.parent().outerHeight(!0)),n&&!isNaN(n.threshold)&&(l=parseInt(n.threshold,10)),l=isNaN(l)?s.outerHeight(!0):Math.max(0,Math.min(l,s.outerHeight(!0))),s.css("height",0),s.removeClass("oj-pulltorefresh-transition"),$.data(s[0],"data-pullstart",e.originalEvent.touches[0].clientY),$.data(s[0],"data-pullstart-horiz",e.originalEvent.touches[0].clientX),a=!0)}).on("touchmove.pulltorefresh",function(e){if(null!=(u=$.data(s[0],"data-pullstart"))&&!((h=e.originalEvent.touches[0].clientY-parseInt(u,10))<0)&&(e.preventDefault(),null==$.data(s[0],"data-closing")))if(null==$.data(s[0],"data-loading")){if(a){if(d=e.originalEvent.touches[0].clientX-parseInt($.data(s[0],"data-pullstart-horiz"),10),Math.abs(d)>h)return;a=!1}s.css("height",h),i.PullToRefreshUtils._fireEvent(e,"pull",s,h),null!=c&&c.length>0&&(null!=(_=$.data(s[0],"data-lasticonclass"))&&c.removeClass(_),(g=10*Math.round(h/l*10))>=100?(f="oj-pulltorefresh-icon-full",m=i.Translations.getTranslatedString("oj-pullToRefresh.titleIconFull")):(f="oj-pulltorefresh-icon-"+g+"-percent",m=i.Translations.getTranslatedString("oj-pullToRefresh.titleIcon"+g+"percent")),c.addClass(f),c.attr("title",m),$.data(s[0],"data-lasticonclass",f),i.PullToRefreshUtils._showHideDefaultText(s,h>p))}else s.css("height",Math.max(h,l))}).on("touchcancel.pulltorefresh",function(e){i.PullToRefreshUtils._cleanup(s)}).on("touchend.pulltorefresh",function(n){if(null!=(u=$.data(s[0],"data-pullstart"))&&null==$.data(s[0],"data-closing"))return null!=$.data(s[0],"data-loading")?(h=$.data(s[0],"data-panelheight"),void s.css("height",h)):void(s.outerHeight()<l?(s.addClass("oj-pulltorefresh-transition").css("height",0),i.PullToRefreshUtils._cleanup(s)):i.PullToRefreshUtils._handleRelease(n,e,s,t))})},i.PullToRefreshUtils._handlePull=function(e,t,n){var o,s;i.PullToRefreshUtils._fireEvent(e,"pull",t,0),0==t.children().length&&(n&&(o=n.primaryText,s=n.secondaryText),i.PullToRefreshUtils._createDefaultContent(t,o,s)),t.prev().text(i.Translations.getTranslatedString("oj-pullToRefresh.ariaRefreshingLink")),t.css("height","auto"),$.data(t[0],"data-panelheight",t.outerHeight())},i.PullToRefreshUtils._handleRelease=function(e,t,n,o){var s,r,a,l,u;s=$.data(n[0],"data-panelheight"),n.addClass("oj-pulltorefresh-transition").css("height",s),i.PullToRefreshUtils._fireEvent(e,"release",n,s),$.data(n[0],"data-loading",!0),(r=n.find(".oj-pulltorefresh-icon")).length>0&&(null!=(a=$.data(n[0],"data-lasticonclass"))&&r.removeClass(a),r.addClass("oj-pulltorefresh-icon-full")),l=i.Context.getContext(t).getBusyContext().addBusyState({description:"PullToRefresh:handleRelease"}),$.data($(t)[0],"data-pulltorefresh-busystate",l),o().then(function(o){u=function(){i.PullToRefreshUtils._fireEvent(e,"complete",n,s),i.PullToRefreshUtils._cleanup(n),n.off("transitionend",u),n.prev().text(""),i.PullToRefreshUtils._resolveBusyState(t)},n.prev().text(i.Translations.getTranslatedString("oj-pullToRefresh.ariaRefreshCompleteLink")),n.prev().prev().css("position",""),$.data(n[0],"data-closing",!0),n.on("transitionend",u),n.css("height",0)},function(e){u=function(){i.PullToRefreshUtils._cleanup(n),n.off("transitionend",u),n.prev().text(""),i.PullToRefreshUtils._resolveBusyState(t)},n.prev().prev().css("position",""),$.data(n[0],"data-closing",!0),n.on("transitionend",u),n.css("height",0)})},i.PullToRefreshUtils.tearDownPullToRefresh=function(e){$(e).children(".oj-pulltorefresh-outer").remove(),$(e).off(".pulltorefresh"),i.PullToRefreshUtils._resolveBusyState(e)},i.PullToRefreshUtils._resolveBusyState=function(e){var t,i;t=$(e)[0],(i=$.data(t,"data-pulltorefresh-busystate"))&&(i(null),$.removeData(t,"data-pulltorefresh-busystate"))},i.PullToRefreshUtils._fireEvent=function(e,t,i,n){var o=$.Event("oj"+t);o.originalEvent=e,i.trigger(o,{content:i,distance:n})},i.PullToRefreshUtils._createDefaultContent=function(e,t,i){var n,o,s,r;e.addClass("oj-pulltorefresh-content").attr("aria-hidden","true"),(n=$(document.createElement("div"))).addClass("oj-icon oj-pulltorefresh-icon oj-pulltorefresh-icon-initial"),(o=$(document.createElement("div"))).addClass("oj-pulltorefresh-icon-container"),o.append(n),$.data(e[0],"data-lasticonclass","oj-pulltorefresh-icon-initial"),e.append(o),null!=t&&(s=$(document.createElement("div")).addClass("oj-pulltorefresh-primary-text").text(t),e.append(s),null!=i&&(r=$(document.createElement("div")).addClass("oj-pulltorefresh-secondary-text").text(i),e.append(r)))},i.PullToRefreshUtils._showHideDefaultText=function(e,t){var i,n;i=e.find(".oj-pulltorefresh-primary-text"),n=e.find(".oj-pulltorefresh-secondary-text"),t?(i&&i.show(),n&&n.show()):(i&&i.hide(),n&&n.hide())},i.PullToRefreshUtils._renderAccessibleLink=function(e,t,n,o){var s,r,a;(s=$(document.createElement("a"))).text(i.Translations.getTranslatedString("oj-pullToRefresh.ariaRefreshLink")),s.addClass("oj-helper-hidden-accessible").attr("href","#").focus(function(){s.css("position","static")}).blur(function(e){null!=e.relatedTarget&&s.css("position","")}).click(function(s){r=t.children().last(),i.PullToRefreshUtils._handlePull(s,r,o),i.PullToRefreshUtils._handleRelease(s,e,r,n),n()}),(a=$(document.createElement("div"))).addClass("oj-helper-hidden-accessible").attr("aria-live","polite"),t.append(s),t.append(a)},i.PullToRefreshUtils._cleanup=function(e){$.removeData(e[0],"data-pullstart"),$.removeData(e[0],"data-pullstart-horiz"),$.removeData(e[0],"data-loading"),$.removeData(e[0],"data-closing"),e.find(".oj-pulltorefresh-icon").length>0&&e.empty()},i.__registerWidget("oj._ojRadioCheckbox",$.oj.baseComponent,{version:"1.0.0",defaultElement:"<input>",widgetEventPrefix:"oj",options:{disabled:null,checked:null,type:null},label:function(){return void 0===this.$label&&(this.$label=this._getLabelsForElement()),this.$label},refresh:function(){this._super(),this._setup()},refreshDisabled:function(){this._renderDisabled()},setSelectedClass:function(e){this.element.toggleClass("oj-selected",e),this.$label.toggleClass("oj-selected",e),this.$choiceItem.toggleClass("oj-selected",e)},widget:function(){return this.uiRadioCheckbox},_InitOptions:function(e,t){var i,n;if(this._super(e,t),"checked"in t||(this.initCheckedFromDom=!0,i=!!this.element.prop("checked"),this.option("checked",i,{_context:{internalSet:!0}})),"boolean"!=typeof this.options.checked)throw new Error("checked option must be a boolean");if("disabled"in t||(n=!!this.element.prop("disabled"),this.option("disabled",n,{_context:{internalSet:!0}})),"boolean"!=typeof this.options.disabled)throw new Error("disabled option must be a boolean");"type"in t||this.option("type",this.element.prop("type"),{_context:{internalSet:!0}})},_ComponentCreate:function(){this._super();var e=this.options.type;"checkbox"==e?(this.uiRadioCheckbox=this.element.addClass("oj-checkbox oj-component"),this.$label=this._getLabelsForElement(),this.$label.addClass("oj-checkbox-label")):"radio"==e&&(this.uiRadioCheckbox=this.element.addClass("oj-radio oj-component"),this.$label=this._getLabelsForElement(),this.$label.addClass("oj-radio-label")),this.$choiceItem=this._getChoiceItem();var t=document.createElement("span");t.setAttribute("class","oj-radiocheckbox-icon"),this.element.wrapAll(t);this._focusable(this.element),this._AddHoverable(this.$choiceItem),this._AddActiveable(this.$choiceItem),this._focusable({element:this.$choiceItem,applyHighlight:!0}),this._AddHoverable(this.$label),this._AddActiveable(this.$label),$.each(this.$label,function(){$(this.childNodes).wrapAll("<span class='oj-radiocheckbox-label-text'></span>")}),this._setup()},_SaveAttributes:function(e){this._savedClasses=e.attr("class")},_RestoreAttributes:function(){this._savedClasses?this.element.attr("class",this._savedClasses):this.element.removeAttr("class")},_setup:function(){this._renderDisabled(),this.initCheckedFromDom||this._setCheckedOnDom(this.options.checked),this.options.checked&&this.setSelectedClass(this.options.checked)},_setCheckedOnDom:function(e){e=!!e,this.element.prop("checked",e)},_renderDisabled:function(){this._IsEffectivelyDisabled()?(this.element.prop("disabled",!0).removeAttr("aria-disabled").removeClass("oj-enabled").addClass("oj-disabled"),this.$label.removeClass("oj-enabled").addClass("oj-disabled"),this.$choiceItem.removeClass("oj-enabled").addClass("oj-disabled")):(this.element.prop("disabled",!1).removeAttr("aria-disabled").removeClass("oj-disabled").addClass("oj-enabled"),this.$label.addClass("oj-enabled").removeClass("oj-disabled"),this.$choiceItem.addClass("oj-enabled").removeClass("oj-disabled"))},_setOption:function(e,t){this._superApply(arguments),"disabled"===e&&(t=!!t,this._renderDisabled(t)),"checked"===e&&(this._setCheckedOnDom(t),this.setSelectedClass(t))},_getLabelsForElement:function(){var e,t=this.element.closest("label"),n="label[for='"+this.element.prop("id")+"']",o=$(n);return 0!==t.length&&i.Logger.error("Found a label that is an input's ancestor. This is not supported in the ojCheckboxset or ojRadioset component and the component will\n      not work correctly. Use a label as a sibling to the input and use the label 'for' attribute to tie the two together."),0===(o=o.not(t)).length&&(e=this.element.siblings(n),o=o.add(e)),o},_getChoiceItem:function(){var e,t,n,o=null;return(e=this.element.parent())&&(e.hasClass("oj-choice-item")||e.hasClass("oj-choice-row")||e.hasClass("oj-choice-row-inline"))?o=e:(i.Logger.warn("The radioset/checkboxset's input and label dom should be wrapped in a dom node with class 'oj-choice-item'. JET is adding this missing dom to make the component work correctly."),"<span class='oj-choice-item oj-choice-item-added'></span>",t="label[for='"+this.element.attr("id")+"']",0!==(n=this.element.siblings().filter(t)).length?(this.element.add(n).wrapAll("<span class='oj-choice-item oj-choice-item-added'></span>"),o=this.element.parent()):(this.element.wrapAll("<span class='oj-choice-item oj-choice-item-added'></span>"),o=this.element.parent())),o},getNodeBySubId:function(e){var t=this._super(e);if(!t){var i=e.subId;"oj-radiocheckbox-input"===i&&(t=this.element[0]),"oj-radiocheckbox-label"===i&&(t=this.label()[0])}return t||null},_destroy:function(){var e=this._super();this._RemoveHoverable(this.$choiceItem),this._RemoveActiveable(this.$choiceItem),this._RemoveHoverable(this.$label),this._RemoveActiveable(this.$label);var t=this.options.type;"checkbox"==t?this.$label.removeClass("oj-enabled oj-disabled oj-selected oj-checkbox-label"):"radio"==t&&this.$label.removeClass("oj-enabled oj-disabled oj-selected oj-radio-label"),this.$choiceItem.removeClass("oj-enabled oj-disabled oj-selected");return $.each(this.$label,function(){var e=this.getElementsByClassName("oj-radiocheckbox-label-text");void 0!==e&&$(e[0].childNodes[0]).unwrap()}),this.element.unwrap(),this.$choiceItem.hasClass("oj-choice-item-added")&&this.element.unwrap(),this.$choiceItem=null,this.$label=null,e}}),function(){i.__registerWidget("oj.ojRadioset",$.oj.editableValue,{version:"1.0.0",defaultElement:"<div>",widgetEventPrefix:"oj",options:{disabled:!1,labelledBy:null,required:!1,value:void 0},refresh:function(){this._super(),this._setup()},widget:function(){return this.uiRadioset},validate:i.EditableValueUtils.validate,_InitOptions:function(e,t){var n,o;this._super(e,t),this._IsCustomElement()||(i.EditableValueUtils.initializeOptionsFromDom([{attribute:"disabled",validateOption:!0},{attribute:"required",coerceDomValue:!0,validateOption:!0},{attribute:"title"}],t,this),void 0===t.value&&(this.$radios=this._findRadiosWithMatchingName(),void 0!==(o=0===(n=this.$radios.filter(":checked")).length?void 0:n.val())&&this.option("value",o,{_context:{writeback:!0,internalSet:!0}}),void 0===this.options.value&&(this.options.value=null)))},_ComponentCreate:function(){var e=this.element;if(this._super(),e.uniqueId(),this._processOjOptions(),this.$radios=this._findRadiosWithMatchingName(),e.is("fieldset"))throw new Error("ojRadioset cannot be bound to a fieldset. Use a div instead.");this.$radios._ojRadioCheckbox().attr("data-oj-internal",""),this.uiRadioset=e.addClass("oj-radioset oj-component").attr("role","radiogroup"),$(e.get(0).childNodes).filter(function(){return!this.getAttribute||"contextMenu"!==this.getAttribute("slot")}).wrapAll("<div class='oj-radioset-wrapper'></div>"),this._on(this._events),this._setup()},_ResetComponentState:function(){this._processOjOptions(),this.$radios=this._findRadiosWithMatchingName(),this.$radios.filter(".oj-radio").each(function(){var e=void 0!==$(this).attr("disabled")&&!!$(this).prop("disabled");$(this)._ojRadioCheckbox("option","disabled",e)}),this.$radios.not(".oj-radio")._ojRadioCheckbox()},GetFocusElement:function(){return this._GetContentElement().not(":disabled").first()[0]},_IsRequired:function(){return this.options.required},_SetDisabledDom:function(e){},_refreshRequired:i.EditableValueUtils._refreshRequired,_ValidateReturnBoolean:i.EditableValueUtils._ValidateReturnBoolean,_processOjOptions:function(){if(this._IsCustomElement()){var e,t,i=this._customOptionRenderer.bind(this),n=this.element.children("oj-option");for(e=0,t=n.length;e<t;e++)n[e].customOptionRenderer=i,this._initInputLabelFromOjOption(n[e]);if((n=this.element.children(".oj-radioset-wrapper").find("oj-option")).length>0)for(e=0,t=n.length;e<t;e++)n[e].customOptionRenderer=i,this._initInputLabelFromOjOption(n[e])}},_initInputLabelFromOjOption:function(e){var t,i,n=e;$(n).uniqueId();var o=n.getAttribute("id"),s=o+"|rb",r=document.getElementById(s);null!==r||(t=document.createElement("span"),r=document.createElement("input"),i=document.createElement("label"),t.setAttribute("class","oj-choice-item"),r.setAttribute("type","radio"),r.setAttribute("value",n.value),r.setAttribute("id",s),i.setAttribute("for",s),n.parentElement.insertBefore(t,n),i.appendChild(n),t.appendChild(r),t.appendChild(i));var a=this.element[0].id,l=n.getAttribute("aria-label"),u=n.getAttribute("aria-labelledby");r.setAttribute("data-oj-option-id",o),a&&""!=a&&r.setAttribute("name",a),l&&""!=l?r.setAttribute("aria-label",l):r.removeAttribute("aria-label"),u&&""!=u?r.setAttribute("aria-labelledby",u):r.removeAttribute("aria-labelledby"),n.disabled?r.setAttribute("disabled",!0):r.removeAttribute("disabled")},_customOptionRenderer:function(e){var t=e,i=t.getAttribute("id")+"|rb",n=document.getElementById(i);null!==n&&n.classList.contains("oj-radio")&&$(n)._ojRadioCheckbox("option","disabled",t.disabled)},_updateLabelledBy:i.EditableValueUtils._updateLabelledBy,_findRadiosWithMatchingName:function(){var e,t,n=this.element,o=n.find("input[type=radio]:first");return 0===o.length&&i.Logger.warn("Could not find any input type=radio within this element"),void 0===(e=o.attr("name"))?n.find("input[type=radio]").not("[name]"):(t="input[type=radio][name="+e+"]",n.find(t))},_NotifyContextMenuGesture:function(e,t,i){var n=this.element.find("input[type=radio]"),o=n.filter(":checked"),s=o.length?o:n.filter(":enabled").first();this._OpenContextMenu(t,i,{launcher:s})},_GetMessagingLauncherElement:function(){return this.widget()},_setup:function(){this._propagateDisabled(this.options.disabled),this.element.hasClass("oj-choice-direction-column")||this.element.hasClass("oj-choice-direction-row")||this.element.addClass("oj-choice-direction-column"),this._refreshRequired(this.options.required),this._updateLabelledBy(null,this.options.labelledBy,this.widget())},_events:{change:function(e){this._HandleChangeEvent(e)}},_HandleChangeEvent:function(t){var i=this._GetDisplayValue();this._SetValue(i,t,e)},_GetDisplayValue:function(e){return this._GetElementValue()},_SetDisplayValue:function(e){var t,n,o=this.$radios.length,s=-1,r=this.$radios.get(),a=[];for(t=0;t<o;t++)if(a[t]=this._GetOptionValue(r[t]),a[t]===e){s=t;break}if(-1===s)for(t=0;t<o;t++)if(i.Object.compareValues(a[t],e)){s=t;break}for(t=0;t<o;t++){var l=(n=$(this.$radios[t]))._ojRadioCheckbox("option","checked");t===s?l||n._ojRadioCheckbox("option","checked",!0):l&&n._ojRadioCheckbox("option","checked",!1)}},_GetElementValue:function(){var e=this.$radios.filter(":checked");return 0===e.length?null:this._GetOptionValue(e[0])},_GetOptionValue:function(e){var t,i;return this._IsCustomElement()?(t=document.getElementById(e.getAttribute("data-oj-option-id")))&&(i=t.value):i=e.value,i},_GetDefaultStyleClass:function(){return"oj-radioset"},_GetContentElement:function(){return null!=this.$radios?this.$radios:(this.$radios=this._findRadiosWithMatchingName(),this.$radios)},_AriaRequiredUnsupported:function(){return!0},_AfterSetOptionRequired:i.EditableValueUtils._AfterSetOptionRequired,_propagateDisabled:function(e){e=!!e,this.$radios.each(function(){$(this).data("oj-_ojRadioCheckbox").__setAncestorComponentDisabled(e)}),this.$radios._ojRadioCheckbox("refreshDisabled")},_setOption:function(e,t,i){var n=this.options.labelledBy;switch(this._super(e,t,i),e){case"disabled":this._propagateDisabled(t);break;case"labelledBy":this._updateLabelledBy(n,t,this.widget())}},_AfterSetOption:function(e,t,i){switch(this._superApply(arguments),e){case"required":this._AfterSetOptionRequired(e)}},getNodeBySubId:function(e){var t,n,o=this._super(e);if(!o)switch(t=this.$radios.get(),e.subId){case"oj-radioset-inputs":o=t;break;case"oj-radioset-radio":if(void 0!==(n=e.value)){for(var s=t.length,r=-1,a=[],l=0;l<s;l++)if(a[l]=this._GetOptionValue(t[l]),a[l]===n){r=l;break}if(-1===r)for(l=0;l<s;l++)if(i.Object.compareValues(a[l],n)){r=l;break}-1!==r&&(o=t[r])}}return o||null},getSubIdByNode:function(e){for(var t=this._GetContentElement()[0].parentElement.parentElement.parentElement,i=e;i&&i!=t;){if("LABEL"==i.nodeName&&(i=document.getElementById(i.for)),"INPUT"==i.nodeName)return{subId:"oj-radioset-radio",value:this._GetOptionValue(i)};i=i.parentElement}return this._super(e)},_destroy:function(){var e=this._super(),t=this.element[0].firstElementChild;return this.$radios&&this.$radios._ojRadioCheckbox("destroy"),$(t).contents().unwrap(),e}});var e={doValueChangeCheck:!1}}(),i.CustomElementBridge.registerMetadata("oj-radioset","editableValue",{properties:{disabled:{type:"boolean"},labelledBy:{type:"string"},required:{type:"boolean"},translations:{type:"Object",properties:{required:{type:"Object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}}}},value:{type:"any",writeback:!0}},methods:{validate:{}},extension:{_WIDGET_NAME:"ojRadioset"}}),i.CustomElementBridge.register("oj-radioset",{metadata:i.CustomElementBridge.getMetadata("oj-radioset")}),i.__registerWidget("oj.ojSlider",$.oj.editableValue,{defaultElement:"<input>",version:"1.0.1",widgetEventPrefix:"oj",options:{max:100,min:0,orientation:"horizontal",readOnly:!1,disabled:!1,step:1,type:"fromMin",value:0,rawValue:null},_numPages:5,_defaultElementId:null,_sliderDisplayValue:null,_isRTL:function(){return"rtl"===i.DomUtils.getReadingDirection()},_ComponentCreate:function(){if(this._super(),this._inputtag=!1,this.element.is("INPUT"))if(this._inputtag=!0,this.element[0].style&&(this._styleFromInputTag=this.element[0].style.cssText),this._inputElementOriginalDisplay=this.element.css("display"),this.element.css("display","none"),this.OuterWrapper)this._elementWrapped=$(this.OuterWrapper);else{var e=$(this.element).wrap("<div> </div>");this._elementWrapped=e.parent()}else this._elementWrapped=this.element;this._transientValueName=this._IsCustomElement()?"transientValue":"rawValue",this._componentSetup()},_SetRawValue:function(e,t){var n={};n._context={originalEvent:t,writeback:!0,internalSet:!0,readOnly:!0},i.Object.compareValues(this.options[this._transientValueName],e)||this.option(this._transientValueName,e,n)},_componentSetup:function(){this._newMultiValue=[],this._thumbIndex=null;var e="oj-slider ";this._isVertical()?e+="oj-slider-vertical":e+="oj-slider-horizontal",e+=" oj-component oj-form-control",this.options.readonly&&(e+=" oj-read-only"),this.options.disabled&&(e+=" oj-disabled"),this._elementWrapped.removeClass(),this._elementWrapped.addClass(e),"range"===this.options.type?this._multipleThumbs=!0:this._multipleThumbs=!1,this._calculateNewMax(),this._createSliderContainer(),this._createBarBackground(),this._buildValueOption(),this._createRange(),this._createThumbs(),this._updateUI(),this._setupEvents()},_copyLabelledbyToThumb:function(e){var t=this._elementWrapped.find(".oj-slider-thumb");if(t.attr("aria-labelledby",e),t.length>1){var i=t[1];$(i).attr("aria-labelledby",String(e))}},_AfterCreate:function(){if(this._super(),this._makeDraggable(),this.OuterWrapper){var e=this.uuid+"_Label",t=i.EditableValueUtils.getOjLabelId(this.widget(),e);t&&this.element.attr("aria-labelledby",t)}if(this.OuterWrapper){var n=this.element.attr("aria-labelledby");if(null!=n)return void this._copyLabelledbyToThumb(n)}var o=this._GetLabelElementLocal();if(o){var s=o.attr("id");s||(s=o.attr("for")),s.length>0&&this._copyLabelledbyToThumb(s)}else{var r;(r=this.OuterWrapper?this._elementWrapped.attr("aria-label"):this.element.attr("aria-label"))&&this._elementWrapped.find(".oj-slider-thumb").attr("aria-label",r)}},_GetLabelElementLocal:function(){var e=this._getAriaLabelledByElementLocal();return null!==e&&0!==e.length?e:null!==(e=this._getAriaLabelForElementLocal())&&0!==e.length?e:null},_getAriaLabelForElementLocal:function(){var e;if(void 0!==(e=this.element.prop("id"))){var t=$("label[for='"+e+"']");if(t.length>0)return t;var i="span[for='"+e+"']";if(0!==$(i).length)return $(i)}return null},_getAriaLabelledByElementLocal:function(){var e=this.element.attr("aria-labelledby");if(void 0===e&&this.OuterWrapper){var t=this._elementWrapped.attr("aria-labelledby");if(t&&null!==document.getElementById(t))return $(document.getElementById(t))}if(void 0!==e){var i=$("label[id='"+e+"']");if(i.length>0)return i;var n=$("span[id='"+e+"']");if(n.length>0)return n}return null},widget:function(){return this._elementWrapped},_SetDisplayValue:function(e){this._sliderDisplayValue=e},_GetDisplayValue:function(){return this._sliderDisplayValue},_getElementId:function(){return this.OuterWrapper?(this._elementWrapped[0].id||this._elementWrapped.uniqueId(),this._elementWrapped[0].id):(this.element[0].id||this.element.uniqueId(),this.element[0].id)},_getThumbId:function(e){return this._getElementId()+"-thumb"+e},_getBarValueId:function(){return this._getElementId()+"-barValue"},_getBarBackgroundId:function(){return this._getElementId()+"-barBack"},_getSliderWrapperId:function(){return this._getElementId()+"-sliderWrapper"},_createThumbs:function(){var e,t,i="",n="class='oj-slider-thumb ui-state-default' tabindex='0' role='slider'aria-valuemin = '"+this._valueMin()+"' aria-valuemax = '"+this._valueMax()+"' ></span>",o=[];for(t=this._multipleThumbs?2:1,e=0;e<t;e++)i="<span id='"+this._getThumbId(e)+"' "+n,o.push(i);this._thumbs=$(o.join("")).appendTo(this._sliderContainer),this._thumb=this._thumbs.eq(0),this._refreshThumbOptions()},_refreshThumbOptions:function(){var e=this;this._thumbs.each(function(){$(this).data("oj-slider-thumb-index"),e._isVertical()&&$(this).attr("aria-orientation","vertical"),e.options.disabled?($(this).attr("aria-disabled","true"),$(this).removeAttr("tabindex")):$(this).removeAttr("aria-disabled"),e.options.readOnly?$(this).attr("title","read only"):$(this).removeAttr("title")})},_createSliderContainer:function(){var e=this._getSliderWrapperId(),t=this._elementWrapped.find("#"+e);t.length&&t.remove(),this._sliderContainer=$("<div></div>"),$(this._sliderContainer).attr("id",e),this._sliderContainer.addClass("oj-slider-container"),this.element.after(this._sliderContainer),this._sliderContainer[0].style.cssText=this._styleFromInputTag},_createBarBackground:function(){var e=this._getBarBackgroundId(),t=this._elementWrapped.find("#"+e);t.length&&t.remove(),this._barback=$("<div></div>"),$(this._barback).attr("id",e),this._barback.addClass("oj-slider-bar"),this._sliderContainer.append(this._barback);var i=this;this._barback.on("mousedown"+i.eventNamespace,function(e){i._repositionThumb(e),i._mouseStop(e),i._getActiveThumb().focus()})},_buildValueOption:function(){if(this.options.type)if(null==this.options.value)this._multipleThumbs?this.options.value=[this._valueMin(),this._valueMax()]:this.options.value=this._valueMin(),this.option("value",this.options.value,{_context:{writeback:!0,internalSet:!0}});else if(this._multipleThumbs){var e;2!==this.options.value.length&&(e=this.options.value.length>0?this.options.value[0]:this._valueMin(),this.options.value=[e,this._valueMax()],this.option("value",this.options.value,{_context:{writeback:!0,internalSet:!0}}))}},_createRange:function(){var e=this.options,t="";if(e.type){this._range=$("<div></div>"),$(this._range).attr("id",this._getBarValueId()),this._sliderContainer.append(this._range),t="oj-slider-range oj-slider-bar-value";var i=this;this._range.on("mousedown"+i.eventNamespace,function(e){i._repositionThumb(e),i._mouseStop(e),i._getActiveThumb().focus()}),this._range=this._sliderContainer.find("#"+this._getBarValueId());var n="";"fromMin"===e.type?n=" oj-slider-range-min":"fromMax"===e.type&&(n=" oj-slider-range-max"),this._range.addClass(t+n)}else this._range&&this._range.remove(),this._range=null},_setupTouch:function(e){this._touchProxy=i._TouchProxy.addTouchListeners(e)},_tearDownTouch:function(e){i._TouchProxy.removeTouchListeners(e)},_setupEvents:function(){this._CanSetValue()&&this._AddHoverable(this._elementWrapped),this._thumbs.toArray().forEach(function(e){var t=$(e);this._UnregisterChildNode(t),this._on(t,this._thumbEvents),this._setupTouch(t),this._focusable({element:t,applyHighlight:!0})},this)},_GetMessagingLauncherElement:function(){return this._elementWrapped},_GetContentElement:function(){return this._getActiveThumb()},_destroySliderDom:function(){this._thumbs.toArray().forEach(function(e){var t=$(e);this._tearDownTouch(t)},this),this._destroyDraggable(),this._range&&this._range.remove(),this._sliderContainer&&this._sliderContainer.remove(),this.OuterWrapper?(this._elementWrapped.removeUniqueId(),this._RemoveHoverable(this._elementWrapped)):(this.element.removeUniqueId(),this._RemoveHoverable(this.element))},_unwrapSlider:function(){i.DomUtils.unwrap(this.element,this._elementWrapped),this.element.css("display",this._inputElementOriginalDisplay),this._RestoreAttributes(this.element)},_destroy:function(){return this._destroySliderDom(),this._unwrapSlider(),this._super()},_repositionThumb:function(e){var t,i,n,o=this.options,s=0,r=this;return this._closestThumb=this._thumb,!(o.disabled||o.readOnly||(t={x:e.pageX,y:e.pageY},i=this._getNormValueFromMouse(t),n=this._valueMax()-this._valueMin()+1,this._multipleThumbs&&this._thumbs.each(function(e){var t=Math.abs(i-r._getMultiValues(e));(n>t||n===t&&(e===r._lastChangedValueIndex||r._getMultiValues(e)===o.min))&&(n=t,this._closestThumb=$(this),s=e)}),this._thumbIndex=s,this._closestThumb&&(this._thumbs.hasClass("ui-state-hover")||this._slide(e,s,i),this._getActiveThumb().addClass("oj-active").focus(),this._range.addClass("oj-active"),0)))},_initDragging:function(e,t){var i=this.options;return!i.disabled&&!i.readOnly&&(t.removeClass("oj-focus-highlight"),t.addClass("oj-active").focus(),this._range.addClass("oj-active"),!0)},_mouseDragInternal:function(e,t){var i=this._getNormValueFromThumb(t);this._slide(e,this._thumbIndex,i,!0);var n=100*this._getFracFromThumb(t);return this._multipleThumbs?this._setRangeMultiThumb(n,this._thumbIndex):this._setRange(n),!1},_mouseStop:function(e,t){this._thumbs.removeClass("oj-active"),this._range.removeClass("oj-active");var i=this._getNormValueFromThumb(t);return this._slide(e,this._thumbIndex,i),this._change(e,this._thumbIndex,!1),this._thumbIndex=null,!1},_isVertical:function(){return"vertical"===this.options.orientation},_getOrientationAdjustedFrac:function(e){var t=e;return t>1&&(t=1),t<0&&(t=0),this._isVertical()&&(t=1-t),t},_getNormValueFromMouse:function(e){var t,i,n=this._getFracFromMouse(e);return t=this._valueMax()-this._valueMin(),this._isRTL()&&!this._isVertical()&&(n=1-n),i=this._valueMin()+n*t,this._trimAlignValue(i)},_getFracFromMouse:function(e){var t,i,n;return this._isVertical()?(t=this._barback.height(),i=e.y-this._barback.offset().top):(t=this._barback.width(),i=e.x-this._barback.offset().left),0===t?1:(n=i/t,n=this._getOrientationAdjustedFrac(n))},_getActiveThumb:function(){return this._multipleThumbs?$(this._thumbs[this._thumbIndex]):this._thumb},_getFracFromThumb:function(e){var t,i,n,o,s=e;if(e||(s=this._getActiveThumb()),this._isVertical()){var r=s.outerHeight()/2;o=s.offset().top+r,t=this._barback.height(),i=o-this._barback.offset().top}else{var a=s.outerWidth()/2;o=s.offset().left+a,t=this._barback.width(),i=o-this._barback.offset().left}return 0===t?1:(n=i/t,n=this._getOrientationAdjustedFrac(n))},_getNormValueFromThumb:function(e){var t,i,n;return t=this._getFracFromThumb(e),i=this._valueMax()-this._valueMin(),this._isRTL()&&!this._isVertical()&&(t=1-t),n=this._valueMin()+t*i,this._trimAlignValue(n)},_getOtherThumbValue:function(e){return this._getMultiValues(e?0:1)},_getNewThumbValueLimited:function(e,t,i){return 2===this.options.value.length&&(0===e&&t>i||1===e&&t<i)?i:t},_slide:function(e,t,i,n){var o;if(this._multipleThumbs){o=this._getOtherThumbValue(t);var s=this._getNewThumbValueLimited(t,i,o);s!==this._getMultiValues(t)&&this._setMultiValue(e,t,s,n)}else i!==this._getSingleValue()&&(this._setSingleValue(e,i,n),n||this._inputtag&&this.element.val(i))},_setSingleValue:function(e,t,i){this._newValue=this._trimAlignValue(t),this._SetRawValue(this._newValue,e),i||(this.options[this._transientValueName]=this._newValue,this._SetValue(this._newValue,e),this._updateUI())},_change:function(e,t,i){this._multipleThumbs?(this._lastChangedValues=this._getNewValues(t,this._newMultiValue[t]),this._SetRawValue(this._lastChangedValues,e),i||this._SetValue(this._lastChangedValues,e)):(this._SetRawValue(this._newValue,e),i||this._SetValue(this._newValue,e)),this._lastChangedValueIndex=t},_getNewValues:function(e,t){var i,n;for(i=this.options.value.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return e===this._thumbIndex&&(i[e]=t),i},_getSingleValue:function(){return this._getValueAligned()},_getMultiValues:function(e){return this._getValuesAligned(e)},_setMultiValue:function(e,t,i,n){this._newMultiValue[t]=this._trimAlignValue(i),this._change(e,t,n),n||this._updateUI()},_setOption:function(e,t,i){var n;if("value"===e)if(Array.isArray(t))if(isNaN(t[0]))this._multipleThumbs=!1,n=this._parse(e,t[0]),this._checkValueBounds(n,this._valueMin(),this._valueMax());else{this._multipleThumbs=!0,n=t;for(var o=0;o<n.length;o+=1)this._checkValueBounds(n[o],this._valueMin(),this._valueMax())}else this._multipleThumbs=!1,n=this._IsCustomElement()?t:this._parse(e,t),this._checkValueBounds(n,this._valueMin(),this._valueMax());switch("max"===e||"min"===e?(n=this._IsCustomElement()?t:this._parse(e,t),"min"===e?(this._checkMinMax(n,this._valueMax()),this._multipleThumbs?(this._getMultiValues(0)<n&&this._super("value",[n,this._getMultiValues(1)],i),this._getMultiValues(1)<n&&this._super("value",[this._getMultiValues(0),n],i)):this._getSingleValue()<n&&this._super("value",n,i)):"max"===e&&(this._checkMinMax(this._valueMin(),n),this._multipleThumbs?(this._getMultiValues(0)>n&&this._super("value",[n,this._getMultiValues(1)],i),this._getMultiValues(1)>n&&this._super("value",[this._getMultiValues(0),n],i)):this._getSingleValue()>n&&this._super("value",n,i))):n="step"===e?this._parseStep(t):t,this._super(e,n,i),"readOnly"===e&&(this.options.readonly=n),"disabled"===e&&(this.options.disabled=n),e){case"disabled":this._refreshThumbOptions(),this.options.disabled?this._disableDraggable():this._makeDraggable();break;case"value":this._updateUI(),this._makeDraggable();break;case"min":case"max":this._calculateNewMax(),this._updateUI(),this._makeDraggable();break;case"orientation":case"readonly":case"step":case"type":this._reCreate()}},_reCreate:function(){this._destroySliderDom(),this._componentSetup(),this.OuterWrapper&&this._elementWrapped.addClass("oj-complete"),this._AfterCreate()},_getValueAligned:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_getValuesAligned:function(e){return this._trimAlignValue(this.options.value[e])},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var e=this._valueMin();if((this.options.max-e)/this.options.step%1!=0){var t=(this.options.max-e)%this.options.step;this.max=this.options.max-t+this.options.step}else this.max=this.options.max},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_getGrid:function(){var e;e=this.options.step>0?(this._valueMax()-this._valueMin())/this.options.step:100;var t=(this._isVertical()?this._barback.height():this._barback.width())/e;return t<1&&(t=1),this._isVertical()?[1,t]:[t,1]},_getThumbsValueFrac:function(e){return(this._getMultiValues(e)-this._valueMin())/(this._valueMax()-this._valueMin())},_updateUI:function(){var e,t,i,n;this._multipleThumbs?this._thumbs.toArray().forEach(function(t,o){var s=$(t);e=100*this._getThumbsValueFrac(o),this._isRTL()&&!this._isVertical()&&(e=100-e),this._isVertical()?s.css({top:100-e+"%"}):s.css({left:e+"%"}),s.hasClass("oj-active")||(s.attr("aria-valuenow",this._getMultiValues(o)),s.attr("aria-valuemin",i),s.attr("aria-valuemax",n)),this._setRangeMultiThumb(e,o)},this):(t=this._getValueAligned(),i=this._valueMin(),n=this._valueMax(),e=n!==i?(t-i)/(n-i)*100:0,this._isRTL()&&!this._isVertical()&&(e=100-e),this._isVertical()?this._thumb.css({top:100-e+"%"}):this._thumb.css({left:e+"%"}),$(this._thumb).hasClass("oj-active")||($(this._thumb).attr("aria-valuenow",t),$(this._thumb).attr("aria-valuemin",i),$(this._thumb).attr("aria-valuemax",n)),this._setRange(e))},_setRange:function(e){var t=this.options.type;this._isVertical()?("fromMin"===t&&this._range.css({height:e+"%"}),"fromMax"===t&&this._range.css({height:100-e+"%"})):this._isRTL()?("fromMin"===t&&this._range.css({width:100-e+"%"}),"fromMax"===t&&this._range.css({width:e+"%"})):("fromMin"===t&&this._range.css({width:e+"%"}),"fromMax"===t&&this._range.css({width:100-e+"%"}))},_setRangeMultiThumb:function(e,t){var i=this._range.attr("id");if(0===t){var n=100*this._getThumbsValueFrac(1);switch(this.options.type){case"fromMin":this._isVertical()?this._range.css({height:e+"%"}):this._range.css({width:e+"%"});break;case"range":this._isVertical()?(this._range.css({top:100-n+"%"}),this._range.css({height:n-e+"%"})):this._isRTL()?(this._range.css({left:100-n+"%"}),this._range.css({width:n-(100-e)+"%"})):(this._range.css({left:e+"%"}),this._range.css({width:n-e+"%"}))}}else{var o=100*this._getThumbsValueFrac(0);switch(this.options.type){case"fromMax":this._isVertical()?this._range.css({height:100-e+"%"}):this._range.css({width:100-e+"%"});break;case"range":if(this._isVertical())document.getElementById(i)&&(this._range.css({top:100-e+"%"}),this._range.css({height:e-o+"%"}));else if(this._isRTL())document.getElementById(i)&&(this._range.css({left:e+"%"}),this._range.css({width:100-e-o+"%"}));else if(document.getElementById(i)){var s=parseInt(document.getElementById(i).style.left,10);this._range.css({width:e-s+"%"})}}}},_thumbEvents:{keydown:function(e){var t,i,n,o,s=$(e.target).data("oj-slider-thumb-index");switch(this._thumbIndex=s,e.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:e.preventDefault(),$(e.target).addClass("oj-active")}switch(n=this.options.step,t=i=this._multipleThumbs?this._getMultiValues(s):this._getSingleValue(),e.keyCode){case $.ui.keyCode.HOME:i=this._valueMin();break;case $.ui.keyCode.END:i=this._valueMax();break;case $.ui.keyCode.PAGE_UP:i=this._trimAlignValue(t+(this._valueMax()-this._valueMin())/this._numPages);break;case $.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(t-(this._valueMax()-this._valueMin())/this._numPages);break;case $.ui.keyCode.UP:if(t===this._valueMax())return;o=t+n,i=this._trimAlignValue(o);break;case $.ui.keyCode.RIGHT:if(!this._isRTL()||this._isVertical()){if(t===this._valueMax())return;o=t+n}else{if(t===this._valueMin())return;o=t-n}i=this._trimAlignValue(o);break;case $.ui.keyCode.DOWN:if(t===this._valueMin())return;o=t-n,i=this._trimAlignValue(o);break;case $.ui.keyCode.LEFT:if(!this._isRTL()||this._isVertical()){if(t===this._valueMin())return;o=t-n}else{if(t===this._valueMax())return;o=t+n}i=this._trimAlignValue(o)}this._slide(e,s,i)},keyup:function(e){switch(e.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:var t=$(e.target).data("oj-slider-thumb-index");this._thumbIndex=t,this._change(e,t,!1),$(e.target).removeClass("oj-active"),this._updateUI(!0),this._thumbIndex=null}}},_InitOptions:function(e,t){var n=this.options,o=this;if(this._superApply(arguments),i.EditableValueUtils.initializeOptionsFromDom([{attribute:"disabled",validateOption:!0},{attribute:"value"},{attribute:"title"},{attribute:"min"},{attribute:"max"},{attribute:"step"}],t,this,function(e){for(var t=["value","step","min","max"],i=0;i<t.length;i++){var s=t[i],r=s in e?e[s]:n[s];null!=r&&("step"===s?e[s]=o._parseStep(r):"min"===s||"max"===s?e[s]=o._parse(s,r):"value"===s&&(Array.isArray(r)?e[s]=r:e[s]=o._parse(s,r)))}}),!this._IsCustomElement()&&void 0===n.value)throw new Error(this.getTranslatedString("noValue"));if(this._checkMinMax(n.min,n.max),Array.isArray(n.value))for(var s=0;s<n.value.length;s+=1)this._checkValueBounds(n.value[s],n.min,n.max);else this._checkValueBounds(n.value,n.min,n.max)},_checkValueBounds:function(e,t,i){if(null!=t&&e<t)throw new Error(this.getTranslatedString("valueRange"));if(null!=i&&e>i)throw new Error(this.getTranslatedString("valueRange"))},_checkMinMax:function(e,t){if(null!=e&&null!=t&&e>=t)throw new Error(this.getTranslatedString("maxMin"))},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;var t=e.subId;return"oj-slider-thumb-0"===t?this.widget().find(".oj-slider-thumb")[0]:"oj-slider-thumb-1"===t?this.widget().find(".oj-slider-thumb")[1]:"oj-slider-bar"===t?this.widget().find("."+t)[0]:"oj-slider-bar-value"===t?this.widget().find("."+t)[0]:null},getSubIdByNode:function(e){if(null!=e){if(e.id===this._getThumbId(0)&&$(e).hasClass("oj-slider-thumb"))return{subId:"oj-slider-thumb-0"};if(e.id===this._getThumbId(1)&&$(e).hasClass("oj-slider-thumb"))return{subId:"oj-slider-thumb-1"};if($(e).hasClass("oj-slider-bar"))return{subId:"oj-slider-bar"};if($(e).hasClass("oj-slider-bar-value"))return{subId:"oj-slider-bar-value"}}return null},_GetDefaultStyleClass:function(){return"oj-slider"},_parse:function(e,t){var i;if(i=null!==t?+t:t,isNaN(i))throw new Error(this.getTranslatedString("optionNum",{option:e}));return i},_parseStep:function(e){var t;if(null===e)return 1;if((t=this._parse("step",e))<=0)throw new Error(this.getTranslatedString("invalidStep"));return(null===t||t<=0)&&(t=1),t},_getEndInterval:function(){return this._barback.offset().left+this._barback.width()},_getStartInterval:function(){return this._barback.offset().left},_callDraggable:function(e){var t,i=this._getGrid(),n=e[0].style;t=this._isVertical()?"y":"x";var o=this;e.draggable({axis:t,grid:i,disabled:!1,start:function(t){e[0]===$(o._thumbs)[0]?o._thumbIndex=0:e[0]===$(o._thumbs)[1]&&(o._thumbIndex=1),o._initDragging(t,e)},drag:function(t,i){var s=i.position;if(o._isVertical()?(n.left="",s.left=""):(n.top="",s.top=""),o._mouseDragInternal(t,e),o._isVertical()?(s.top<0&&(s.top=0),s.top>o._barback.height()&&(s.top=o._barback.height())):(s.left<0&&(s.left=0),s.left>o._barback.width()&&(s.left=o._barback.width())),o._multipleThumbs){var r,a;if(r=0===o._thumbIndex?$(o._thumbs[1]):$(o._thumbs[0]),o._isVertical()){var l=e.outerHeight()/2,u=o._barback.offsetParent().offset().top;a=r.offset().top+l-u}else{var h=e.outerWidth()/2,d=o._barback.offsetParent().offset().left;a=r.offset().left+h-d}0===o._thumbIndex?o._isVertical()?s.top<a&&(s.top=a):o._isRTL()?s.left<a&&(s.left=a):s.left>a&&(s.left=a):o._isVertical()?s.top>a&&(s.top=a):o._isRTL()?s.left>a&&(s.left=a):s.left<a&&(s.left=a)}},stop:function(t){this.style.width="",this.style.height="",o._mouseStop(t,e)}})},_makeDraggable:function(){this.options.disabled||(this._multipleThumbs?this._thumbs.toArray().forEach(function(e){var t=$(e);this._callDraggable(t)},this):this._callDraggable(this._thumb))},_disableDraggable:function(){this._multipleThumbs?this._thumbs.toArray().forEach(function(e){var t=$(e);t.is(".ui-draggable")&&t.draggable("disable")},this):this._thumb.is(".ui-draggable")&&this._thumb.draggable("disable")},_destroyDraggable:function(){this._multipleThumbs?this._thumbs.toArray().forEach(function(e){var t=$(e);t.is(".ui-draggable")&&t.draggable("destroy")},this):this._thumb.is(".ui-draggable")&&this._thumb.draggable("destroy")}}),i.CustomElementBridge.registerMetadata("oj-slider","editableValue",{properties:{max:{type:"number"},min:{type:"number"},orientation:{type:"string",enumValues:["horizontal","vertical"]},step:{type:"number"},transientValue:{type:"number",readOnly:!0,writeback:!0},type:{type:"string",enumValues:["single","fromMin","fromMax"]},translations:{type:"Object",properties:{invalidStep:{type:"string",value:"Invalid step; step must be > 0"},maxMin:{type:"string",value:"Max must not be less than min"},noValue:{type:"string",value:"ojSlider has no value"},optionNum:{type:"string",value:"{option} option is not a number"},valueRange:{type:"string",value:"Value must be within min to max range"}}},value:{type:"number",writeback:!0}},methods:{},extension:{_INNER_ELEM:"input",_WIDGET_NAME:"ojSlider"}}),i.CustomElementBridge.register("oj-slider",{metadata:i.CustomElementBridge.getMetadata("oj-slider")}),i.__registerWidget("oj.ojSunburst",$.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{animationDuration:void 0,animationOnDataChange:"none",animationOnDisplay:"none",animationUpdateColor:"",displayLevels:Number.MAX_VALUE,expanded:new i.ExpandAllKeySet,hiddenCategories:[],highlightedCategories:[],highlightMatch:"all",hoverBehavior:"none",hoverBehaviorDelay:200,tooltip:{renderer:null},selectionMode:"multiple",rotation:"on",sorting:"off",rootNodeContent:{renderer:null},startAngle:90,colorLabel:"",sizeLabel:"",drilling:"off",rootNode:"",nodes:null,nodeDefaults:{borderColor:"rgba(255,255,255,0.3)",borderWidth:1,showDisclosure:"off",labelHalign:"center",labelStyle:void 0,labelMinLength:1,labelDisplay:"auto",hoverColor:void 0,selectedInnerColor:void 0,selectedOuterColor:void 0},selection:[],touchResponse:"auto",rotateInput:null,beforeDrill:null,drill:null,beforeExpand:null,expand:null,beforeCollapse:null,collapse:null},_CreateDvtComponent:function(e,t,i){return dvt.Sunburst.newInstance(e,t,i)},_ConvertLocatorToSubId:function(e){var t=e.subId;return"oj-sunburst-node"==t?t="node"+this._GetStringFromIndexPath(e.indexPath):"oj-sunburst-tooltip"==t&&(t="tooltip"),t},_ConvertSubIdToLocator:function(e){var t={};return 0==e.indexOf("node")?(t.subId="oj-sunburst-node",t.indexPath=this._GetIndexPath(e)):"tooltip"==e&&(t.subId="oj-sunburst-tooltip"),t},_ProcessOptions:function(){this._super();var e=this.options.rootNodeContent;e&&e._renderer&&(e.renderer=this._GetTemplateRenderer(e._renderer,"rootNodeContent")),this.options.expanded||(this.options.expanded=new i.ExpandAllKeySet)},_GetComponentRendererOptions:function(){return["tooltip/renderer","rootNodeContent/renderer"]},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-sunburst"),e},_GetChildStyleClasses:function(){var e=this._super();return e["oj-dvtbase oj-sunburst"]={path:"animationDuration",property:"ANIM_DUR"},e["oj-sunburst-attribute-type-text"]={path:"styleDefaults/_attributeTypeTextStyle",property:"TEXT"},e["oj-sunburst-attribute-value-text"]={path:"styleDefaults/_attributeValueTextStyle",property:"TEXT"},e["oj-sunburst-drill-text"]={path:"styleDefaults/_drillTextStyle",property:"TEXT"},e["oj-sunburst-current-drill-text"]={path:"styleDefaults/_currentTextStyle",property:"TEXT"},e["oj-sunburst-node"]={path:"nodeDefaults/labelStyle",property:"TEXT"},e["oj-sunburst-node oj-hover"]={path:"nodeDefaults/hoverColor",property:"border-top-color"},e["oj-sunburst-node oj-selected"]=[{path:"nodeDefaults/selectedOuterColor",property:"border-top-color"},{path:"nodeDefaults/selectedInnerColor",property:"border-bottom-color"}],e},_GetEventTypes:function(){return["optionChange","rotateInput","beforeDrill","drill","beforeExpand","expand","beforeCollapse","collapse"]},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtSunburstBundle.COLLAPSE"]=e.tooltipCollapse,t["DvtSunburstBundle.COLOR"]=e.labelColor,t["DvtSunburstBundle.EXPAND"]=e.tooltipExpand,t["DvtSunburstBundle.SIZE"]=e.labelSize,t["DvtUtilBundle.SUNBURST"]=e.componentName,t},_HandleEvent:function(e){var t=e.type,i={id:e.id,data:e.data};this._IsCustomElement()||(i.component=e.component),"rotation"===t?e.complete?this._UserOptionChange("startAngle",e.startAngle):this._trigger("rotateInput",null,{value:e.startAngle}):"drill"==t?e.id&&this._trigger("beforeDrill",null,i)&&(this._UserOptionChange("rootNode",e.id),this._Render(),this._trigger("drill",null,i)):"expand"==t?e.id&&this._trigger("beforeExpand",null,i)&&(this._UserOptionChange("expanded",e.expanded),this._Render(),this._trigger("expand",null,i)):"collapse"==t?e.id&&this._trigger("beforeCollapse",null,i)&&(this._UserOptionChange("expanded",e.expanded),this._Render(),this._trigger("collapse",null,i)):this._super(e)},_LoadResources:function(){null==this.options._resources&&(this.options._resources={});var e=this.options._resources;e.rotateCursor=i.Config.getResourceUrl("resources/internal-deps/dvt/sunburst/rotate.cur"),e.expand="oj-sunburst-expand-icon",e.expandOver="oj-sunburst-expand-icon oj-hover",e.expandDown="oj-sunburst-expand-icon oj-active",e.collapse="oj-sunburst-collapse-icon",e.collapseOver="oj-sunburst-collapse-icon oj-hover",e.collapseDown="oj-sunburst-collapse-icon oj-active"},getNode:function(e){return this._component.getAutomation().getNode(e)},getContextByNode:function(e){var t=this.getSubIdByNode(e);return t&&"oj-sunburst-tooltip"!==t.subId?t:null},_GetComponentDeferredDataPaths:function(){return{root:["nodes"]}}}),i.CustomElementBridge.registerMetadata("oj-sunburst","dvtBaseComponent",{properties:{animationDuration:{type:"number"},animationOnDataChange:{type:"string",enumValues:["auto","none"]},animationOnDisplay:{type:"string",enumValues:["auto","none"]},animationUpdateColor:{type:"string"},colorLabel:{type:"string"},displayLevels:{type:"number"},drilling:{type:"string",enumValues:["on","off"]},expanded:{writeback:!0},hiddenCategories:{type:"Array<string>",writeback:!0},highlightedCategories:{type:"Array<string>",writeback:!0},highlightMatch:{type:"string",enumValues:["any","all"]},hoverBehavior:{type:"string",enumValues:["dim","none"]},hoverBehaviorDelay:{type:"number"},nodeDefaults:{type:"object",properties:{borderColor:{type:"string"},borderWidth:{type:"number"},hoverColor:{type:"string"},labelDisplay:{type:"string",enumValues:["auto","horizontal","rotated","off"]},labelHalign:{type:"string",enumValues:["inner","outer","center"]},labelStyle:{type:"object"},selectedInnerColor:{type:"string"},selectedOuterColor:{type:"string"},showDisclosure:{type:"string",enumValues:["on","off"]}}},nodes:{type:"Array<object>|Promise"},rootNode:{type:"string"},rotation:{type:"string",enumValues:["off","on"]},rootNodeContent:{type:"object",properties:{renderer:{}}},selection:{type:"Array<string>",writeback:!0},selectionMode:{type:"string",enumValues:["none","single","multiple"]},sizeLabel:{type:"string"},sorting:{type:"string",enumValues:["on","off"]},startAngle:{type:"number",writeback:!0},tooltip:{type:"object",properties:{renderer:{}}},touchResponse:{type:"string",enumValues:["touchStart","auto"]},translations:{type:"Object",properties:{componentName:{type:"string",value:"Sunburst"},labelAndValue:{type:"string",value:"{0}: {1}"},labelClearSelection:{type:"string",value:"Clear Selection"},labelColor:{type:"string",value:"Color"},labelCountWithTotal:{type:"string",value:"{0} of {1}"},labelDataVisualization:{type:"string",value:"Data Visualization"},labelInvalidData:{type:"string",value:"Invalid data"},labelNoData:{type:"string",value:"No data to display"},labelSize:{type:"string",value:"Size"},stateCollapsed:{type:"string",value:"Collapsed"},stateDrillable:{type:"string",value:"Drillable"},stateExpanded:{type:"string",value:"Expanded"},stateHidden:{type:"string",value:"Hidden"},stateIsolated:{type:"string",value:"Isolated"},stateMaximized:{type:"string",value:"Maximized"},stateMinimized:{type:"string",value:"Minimized"},stateSelected:{type:"string",value:"Selected"},stateUnselected:{type:"string",value:"Unselected"},stateVisible:{type:"string",value:"Visible"},tooltipCollapse:{type:"string",value:"Collapse"},tooltipExpand:{type:"string",value:"Expand"}}}},methods:{getContextByNode:{},getNode:{}},events:{rotateInput:{},beforeDrill:{},drill:{},beforeExpand:{},expand:{},beforeCollapse:{},collapse:{}},extension:{_WIDGET_NAME:"ojSunburst"}}),i.CustomElementBridge.register("oj-sunburst",{metadata:i.CustomElementBridge.getMetadata("oj-sunburst")}),i.__registerWidget("oj.ojSwipeActions",$.oj.baseComponent,{version:"1.0.0",defaultElement:"<div>",widgetEventPrefix:"oj",options:{action:null},_ComponentCreate:function(){var e,t,i,n=this,o=!1,s=!1,r=!1;this._super(),this.element.uniqueId(),this.element[0].classList.add("oj-swipeactions","oj-component"),this.element[0].setAttribute("tabIndex","-1"),this._on(!0,{touchstart:function(e){null!=(i=n.element[0].querySelector(".oj-offcanvas-open"))&&i.offsetWidth>0&&e.preventDefault(),o=!0},touchend:function(e){o&&n._handleAction(e),o=!1},keydown:function(e){27===e.keyCode?(i=e.target.parentNode.parentNode).classList.contains("oj-offcanvas-open")&&(n._close({selector:i,_animate:!1}),e.preventDefault()):13===e.keyCode&&e.target.classList.contains("oj-swipeactions-action-panel")&&(s=!0)},keyup:function(e){13===e.keyCode&&s&&n._handleAction(e),s=!1},ojdefaultaction:function(t,i){(e=$(i.selector).children("oj-option.oj-swipetoreveal-default")).length>0&&(n._fireActionEvent(e[0],null),r=!0)},ojopen:function(e,t){r&&n._close(t),r=!1},ojclose:function(e,i){(t=$(i.selector).children(".oj-swipeactions-hide-actions-link")).length>0&&t[0].parentNode.removeChild(t[0])}}),this._focusable({applyHighlight:!0,setupHandlers:function(e,t){n._focusInHandler=e,n._focusOutHandler=t}}),this._setup()},_close:function(e){var t,n;t=i.Context.getContext(this.element[0]).getBusyContext(),n=t.addBusyState({description:"closing offcanvas"}),i.OffcanvasUtils.close(e).then(function(){n()})},_handleAction:function(e){var t=$(e.target).parents("oj-option");t.length>0&&(this._fireActionEvent(t[0],e),this._close({selector:t[0].parentNode}))},_SetupResources:function(){this._super(),this._setupOrReleaseOffcanvas(i.SwipeToRevealUtils.tearDownSwipeActions),this._setupOrReleaseOffcanvas(i.SwipeToRevealUtils.setupSwipeActions)},_ReleaseResources:function(){this._super(),this._setupOrReleaseOffcanvas(i.SwipeToRevealUtils.tearDownSwipeActions)},_setupOrReleaseOffcanvas:function(e){this._applyOffcanvas("oj-offcanvas-start",e),this._applyOffcanvas("oj-offcanvas-end",e)},_closeAllOffcanvas:function(){var e,t=this;e=function(e){t._close({selector:e})},this._applyOffcanvas("oj-offcanvas-start",e),this._applyOffcanvas("oj-offcanvas-end",e)},_applyOffcanvas:function(e,t){var i=this.element[0].querySelector("."+e);i&&t(i)},_fireActionEvent:function(e,t){var n,o;n={},t&&(n.originalEvent=t instanceof $.Event?t.originalEvent:t),(o={detail:n}).cancelable=!0,o.bubbles=!0,i.DomUtils.dispatchEvent(e,new CustomEvent("ojAction",o))},refresh:function(){this._super(),this._setupOrReleaseOffcanvas(i.SwipeToRevealUtils.tearDownSwipeActions),this._setup(),this._setupOrReleaseOffcanvas(i.SwipeToRevealUtils.setupSwipeActions)},_createOffcanvas:function(e,t){var i,n=e[t];n&&n.length>0&&"TEMPLATE"===n[0].tagName&&((i=document.createElement("div")).className="start"===t?"oj-offcanvas-start":"oj-offcanvas-end",this.element[0].appendChild(i),this._renderAccessibleLink(i))},_setup:function(){var e,t,n=this;this.element[0].classList.add("oj-offcanvas-inner-wrapper"),this.element[0].parentNode.classList.add("oj-offcanvas-outer-wrapper"),(t=(e=i.BaseCustomElementBridge.getSlotMap(this.element[0]))[""])&&t.length>0&&t[0].classList.add("oj-swipeactions-content"),this._createOffcanvas(e,"start"),this._createOffcanvas(e,"end"),$(this.element).on("ojpanstart",function(e,t){e.isDefaultPrevented()||n._renderOffcanvas(e.target)})},_renderOffcanvas:function(e,t){var n,o,s,r,a=this;e.setAttribute("role","toolbar"),e.setAttribute("data-oj-context",""),n=i.BaseCustomElementBridge.getSlotMap(this.element[0]),o=e.classList.contains("oj-offcanvas-start")?n.start[0]:n.end[0],s=i.Context.getContext(a.element[0]).getBusyContext(),r=s.addBusyState({description:"rendering ojoptions"}),i.Config.__getTemplateEngine().then(function(n){a._render(n,e,o),t?(s=i.Context.getContext(e).getBusyContext()).whenReady().then(function(){t(),r()}):r()},function(e){throw r(),"Error loading template engine: "+e})},_showAccessibleLinks:function(){var e,t,i=0;for(e=this.element[0].querySelectorAll("a.oj-helper-hidden-accessible"),t=0;t<e.length;t++)e[t].style.left=i+"px",e[t].className="oj-swipeactions-accessible-link",i=i+e[t].offsetWidth+5},_hideAccessibleLinks:function(){var e,t;for(e=this.element[0].querySelectorAll("a.oj-swipeactions-accessible-link"),t=0;t<e.length;t++)e[t].className="oj-helper-hidden-accessible"},_isIE11:function(){var e=i.AgentUtils.getAgentInfo();return"ie"===e.browser&&11===e.browserVersion},_renderAccessibleLink:function(e){var t,n,o,s,r,a,l,u=!1,h=this;(t=document.createElement("a")).setAttribute("tabIndex","0"),t.setAttribute("href","#"),t.textContent=this.getTranslatedString(e.classList.contains("oj-offcanvas-start")?"ariaShowStartActionsDescription":"ariaShowEndActionsDescription"),(n=i.AgentUtils.getAgentInfo().os===i.AgentUtils.OS.ANDROID)?(t.style.color="transparent",t.className="oj-swipeactions-accessible-link",e.classList.contains("oj-offcanvas-end")&&null!=(o=this.element[0].querySelector("a.oj-swipeactions-accessible-link"))&&(t.style.marginLeft=o.offsetWidth+5+"px"),t.addEventListener("touchstart",function(e){u=e.touches[0].force>0})):t.className="oj-helper-hidden-accessible",t.addEventListener("focus",function(){n||h._showAccessibleLinks(),h._closeAllOffcanvas()}),t.addEventListener("blur",function(e){null==e.relatedTarget||e.relatedTarget.classList.contains("oj-swipeactions-accessible-link")?null==e.relatedTarget&&h._isIE11()&&setTimeout(function(){document.activeElement.classList.contains("oj-swipeactions-accessible-link")||h._hideAccessibleLinks()},0):setTimeout(function(){n||h._hideAccessibleLinks()},0)}),t.addEventListener("click",function(t){u||(t.stopPropagation(),h._renderOffcanvas(e,function(){$(e).children("oj-option").addClass("oj-swipetoreveal-action").children().attr("tabIndex",0),(s={}).selector=e,s.autoDismiss="none",s._animate=!1,(r=document.createElement("a")).className="oj-swipeactions-hide-actions-link",r.setAttribute("tabIndex","0"),r.setAttribute("href","#"),r.setAttribute("aria-label",h.getTranslatedString("ariaHideActionsDescription")),r.addEventListener("click",function(e){h._close(s)}),n&&r.addEventListener("touchend",function(e){h._close(s)}),a=i.Context.getContext(h.element[0]).getBusyContext(),l=a.addBusyState({description:"opening offcanvas"}),i.OffcanvasUtils.open(s).then(function(){e.appendChild(r),l()})}))}),this.element[0].appendChild(t)},_render:function(e,t,i){var n,o=this;$(t).children("oj-option").remove(),n=[],e.execute(this.element[0],i,null).forEach(function(e){"OJ-OPTION"===e.tagName&&n.push(e)}),n.forEach(function(e){e.customOptionRenderer=o._customOptionRenderer.bind(o),t.appendChild(e)})},_customOptionRenderer:function(e){var t,n,o,s,r,a,l,u=this;$(e).children("div").length>0||(e.setAttribute("role","button"),e.classList.contains("oj-swipeactions-default")&&e.classList.add("oj-swipetoreveal-default"),(t=document.createElement("div")).className="oj-flex-bar oj-swipeactions-action-panel",t.addEventListener("focus",function(e){u._focusInHandler($(t))}),t.addEventListener("blur",function(e){u._focusOutHandler($(t))}),(n=document.createElement("div")).className="oj-flex-bar-center-absolute",t.appendChild(n),(o=document.createElement("div")).className="oj-flex oj-sm-flex-direction-column",n.appendChild(o),(r=(s=i.BaseCustomElementBridge.getSlotMap(e)).startIcon)&&r.forEach(function(e){o.appendChild(e)}),(a=document.createElement("div")).className="oj-flex-item oj-swipeactions-action-text",o.appendChild(a),(l=s[""])&&l.forEach(function(e){a.appendChild(e)}),$(e).prepend(t))}}),i.CustomElementBridge.registerMetadata("oj-swipe-actions","baseComponent",{properties:{},events:{action:{}},extension:{_WIDGET_NAME:"ojSwipeActions"}}),i.CustomElementBridge.register("oj-swipe-actions",{metadata:i.CustomElementBridge.getMetadata("oj-swipe-actions")}),i.SwipeToRevealUtils={},i.SwipeToRevealUtils.setupSwipeActions=function(e,t){var n,o,s,r,a,l,u,h,d,c,p;(n=$(e)).hasClass("oj-swipetoreveal")||(n.addClass("oj-swipetoreveal"),o=n.hasClass("oj-offcanvas-start")?"end":"start",(s={}).selector=n,s._animateWrapperSelector="oj-offcanvas-inner-wrapper",i.OffcanvasUtils.setupPanToReveal(s),r=i.OffcanvasUtils._getOuterWrapper(n),u=!1,r.on("click.swipetoreveal",function(e){u&&(e.stopImmediatePropagation(),u=!1)}),r.on("touchstart.swipetoreveal",function(e){u=!1}),n.on("ojpanstart",function(e,s){s.direction!=o?e.preventDefault():(i.Context.getContext(r.get(0)).getBusyContext().whenReady().then(function(){n.children().addClass("oj-swipetoreveal-action").css("min-width",""),c=n.children(".oj-swipetoreveal-default").get(0),null==l&&(null!=t&&(a=t.threshold),null!=a?(a=parseInt(a,10),/%$/.test(t.threshold)&&(a=a/100*r.outerWidth())):a=.55*r.outerWidth(),l=Math.min(.3*r.outerWidth(),n.outerWidth()))}),d=(new Date).getTime())}).on("ojpanmove",function(e,t){u||n.children().css("min-width",0),u=!0,null!=c&&(t.distance>a?n.children().each(function(){this!=c&&$(this).addClass("oj-swipetoreveal-hide-when-full")}):n.children().removeClass("oj-swipetoreveal-hide-when-full"))}).on("ojpanend",function(e,t){p=t.distance,null!=c&&p>a&&(h=$.Event("ojdefaultaction"),n.trigger(h,s),e.preventDefault()),p<l&&((new Date).getTime()-d>200||p<10)&&e.preventDefault()}))},i.SwipeToRevealUtils.tearDownSwipeActions=function(e){var t,n,o;(t=$(e)).removeClass("oj-swipetoreveal"),(n={}).selector=t,null!=(o=i.OffcanvasUtils._getOuterWrapper(t))&&o.off(".swipetoreveal"),i.OffcanvasUtils.tearDownPanToReveal(n)},i.__registerWidget("oj.ojSwitch",$.oj.editableValue,{version:"1.1.0",defaultElement:"<input>",widgetEventPrefix:"oj",options:{disabled:!1,readOnly:!1,value:!1},widget:function(){return this._element2},getNodeBySubId:function(e){var t,i=this._super(e),n=this.widget();return i||(i=null==e||null==e.subId?n:null)||"oj-switch-thumb"!==(t=e.subId)&&"oj-switch-track"!==t?i||null:n.find("."+t)[0]},getSubIdByNode:function(e){var t,i=$(this.element).attr("id"),n=this._super(e);return null!=e&&($(e).hasClass("oj-switch-track")||$(e).hasClass("oj-switch-thumb"))&&(i===(t=$(e).parents("div.oj-switch").find("input.oj-component-initnode").attr("id"))&&$(e).hasClass("oj-switch-track")?n={subId:"oj-switch-track"}:i===t&&$(e).hasClass("oj-switch-thumb")&&(n={subId:"oj-switch-thumb"})),n},_BUNDLE_KEY:{_SWITCH_OFF:"SwitchOFF",_SWITCH_ON:"SwitchON"},_InitOptions:function(e,t){var n,o;n=[{attribute:"disabled",validateOption:!0},{attribute:"readonly",option:"readOnly",validateOption:!0},{attribute:"checked",option:"value",validateOption:!1,coerceDomValue:function(e){return!!e}},{attribute:"title"}],this._super(e,t),this._IsCustomElement()||(i.EditableValueUtils.initializeOptionsFromDom(n,t,this),o=this.option("value"),this.option({value:!!o},{_context:{writeback:!0,internalSet:!0}}))},_ComponentCreate:function(){if(this._super(),!this.element.is("input"))throw new Error("ojSwitch can be bound to INPUT only.");this._inputElementOriginalDisplay=this.element.css("display"),this.element.css("display","none").attr("type","checkbox").attr("checked",this.option("value")).attr("tabindex","-1").attr("disabled",this.option("disabled")).attr("readonly",this.option("readOnly")),this.OuterWrapper?this._element2=$(this.OuterWrapper):this._element2=this.element.wrap("<div></div>").parent(),this._element2.addClass("oj-switch oj-component oj-form-control"),this._element2.append("<div class='oj-switch-container'><div class='oj-switch-track'><div class='oj-switch-thumb' tabIndex='0'></div></div></div>"),this.switchThumb=this._element2.find(".oj-switch-thumb"),this.switchThumb.attr("role",this._setSwitchRole())},_AfterCreate:function(){this._super();var e=this.switchThumb;this._SetAriaInfo(e)},_SetAriaInfo:function(e){var t,n;if(t=this.OuterWrapper?this._element2[0]:this._element2[0].querySelector("input"),this._IsCustomElement()){var o=this.uuid+"_Label";n=i.EditableValueUtils.getOjLabelId(this.widget(),o)}else{var s=this._GetLabelElement();s&&(n=s.attr("id"))}if(n)e.attr("aria-labelledby",n);else{var r=t.getAttribute("aria-label");r&&(e.attr("aria-label",r),t.removeAttribute("aria-label"))}},_setup:function(){var e=$(this.widget());this._setupEvents(),void 0!==e&&(this.element.attr("checked",this.option("value")),e.removeClass("oj-disabled oj-read-only oj-selected oj-hover oj-active"),$(this.switchThumb).attr("tabindex","0"),$(this.switchThumb).html(""),(this.option("disabled")||this.option("readOnly"))&&(this.option("disabled")?e.addClass("oj-disabled"):(e.addClass("oj-read-only"),$(this.switchThumb).html(this._setReadOnlyValue())),$(this.switchThumb).removeAttr("tabindex")),this.option("value")&&e.addClass("oj-selected"),$(this.switchThumb).attr("aria-checked",this.option("value")),$(this.switchThumb).removeAttr("aria-disabled"),e.removeAttr("aria-disabled"),this._CanSetValue()||$(this.switchThumb).attr("aria-disabled","true"))},_setReadOnlyValue:function(){var e=this._BUNDLE_KEY._SWITCH_OFF;return this.option("value")&&(e=this._BUNDLE_KEY._SWITCH_ON),this.getTranslatedString(e)},_setupEvents:function(){this._off(this._element2,"keydown keyup mousedown mouseup mouseleave mouseenter touchstart touchend"),this._CanSetValue()&&(this._on(this._element2,this._switchEvents),this._AddHoverable(this._element2)),this._focusable({element:this.switchThumb,applyHighlight:!0})},_switchEvents:{keydown:function(e){e.which!==$.ui.keyCode.ENTER&&e.which!==$.ui.keyCode.SPACE||($(e.currentTarget).addClass("oj-active"),e.preventDefault())},keyup:function(e){e.which!==$.ui.keyCode.ENTER&&e.which!==$.ui.keyCode.SPACE||this._SetValue(!this.option("value"),e)},mousedown:function(e){1===e.which&&($(e.currentTarget).addClass("oj-active"),e.preventDefault())},mouseup:function(e){1===e.which&&this._SetValue(!this.option("value"),e)},mouseleave:function(e){1===e.which&&$(e.currentTarget).removeClass("oj-active")},mouseenter:function(e){1===e.which&&$(e.currentTarget).addClass("oj-active")},touchstart:function(e){$(e.currentTarget).addClass("oj-active"),e.preventDefault()},touchend:function(e){this._SetValue(!this.option("value"),e)}},_GetDefaultStyleClass:function(){return"oj-switch"},_CanSetValue:function(){return!!this._super()&&!this.options.readOnly},_setSwitchRole:function(){return"switch checkbox"},_destroy:function(){return this._CanSetValue()&&this._RemoveHoverable(this._element2),this._element2.find(".oj-switch-track").remove(),i.DomUtils.unwrap(this.element),this._RestoreAttributes(this.element),this._super()},_GetMessagingLauncherElement:function(){return this._element2},_GetContentElement:function(){return this.switchThumb},_AfterSetOption:function(e,t,n){switch(this._superApply(arguments),e){case"readOnly":this._AfterSetOptionDisabledReadOnly(e,i.EditableValueUtils.readOnlyOptionOptions)}},_setOption:function(e,t,i){var n;switch(e){case"disabled":case"readOnly":case"value":n=!!t;break;default:n=t}this._super(e,n,i)},_Refresh:function(e,t,i){this._superApply(arguments),this._setup()}}),i.CustomElementBridge.registerMetadata("oj-switch","editableValue",{properties:{value:{type:"boolean",writeback:!0},readonly:{type:"boolean"}},methods:{},extension:{_ALIASED_PROPS:{readonly:"readOnly"},_INNER_ELEM:"input",_WIDGET_NAME:"ojSwitch"}}),i.CustomElementBridge.register("oj-switch",{metadata:i.CustomElementBridge.getMetadata("oj-switch")});var Vt,Gt,$t={properties:{value:{type:"string",value:""}},extension:{_CONSTRUCTOR:function(e){var t="value",n="_ojSwitcher_orig_display_style",o=this,s=e.element,r=!0,a=null;function l(){a=null}function u(e,o){var a=s[t];void 0===e[n]&&Object.defineProperty(e,n,{value:e.style.display}),o===a?function(e){"none"===e.style.display?(e.style.display="",i.Components.subtreeShown(e,r?{initialRender:!0}:void 0)):r&&i.Components.subtreeShown(e,{initialRender:!0})}(e):function(e){"none"!==e.style.display&&(e.style.display="none",i.Components.subtreeHidden(e))}(e)}o._caseElementMutationObserver=new MutationObserver(function(e){e.forEach(function(e){"childList"===e.type&&(e.addedNodes&&Array.prototype.forEach.call(e.addedNodes,function(e){if(1===e.nodeType){var t=e.getAttribute("slot");u(e,t),l()}}),e.removedNodes&&Array.prototype.forEach.call(e.removedNodes,function(e){1===e.nodeType&&(void 0!==e[n]&&(e.style.display=e[n]),l())}))})}),this.createDOM=function(){o._caseElementMutationObserver.observe(s,{childList:!0})},this.updateDOM=function(){var e=function(){a||(a=i.BaseCustomElementBridge.getSlotMap(s));return a}();for(var t in e)e[t].forEach(function(e){u(e,t)});r&&(r=!1)}},_CONTROLS_SUBTREE_HIDDEN:!0}};function zt(){}i.CustomElementBridge.registerMetadata("oj-switcher",null,$t),i.CustomElementBridge.register("oj-switcher",{metadata:i.CustomElementBridge.getMetadata("oj-switcher")}),Vt={cut:"ojtabscut","paste-before":"ojtabspastebefore","paste-after":"ojtabspasteafter",remove:"ojtabsremove"},Gt={cut:"labelCut","paste-before":"labelPasteBefore","paste-after":"labelPasteAfter",remove:"labelRemove"},i.__registerWidget("oj.ojTabs",$.oj.baseComponent,{widgetEventPrefix:"oj",delay:300,options:{selected:0,disabledTabs:null,truncation:"auto",selectOn:"click",orientation:"horizontal",edge:"top",removable:!1,reorderable:!1,beforeSelect:null,select:null,beforeDeselect:null,deselect:null,beforeRemove:null,remove:null,beforeReorder:null,reorder:null},_ComponentCreate:function(){var e=this.options;this._super(),this.running=!1,this._initialRender=!0,this._setupEdge(e.edge),this._isOldMarkup=0===this.element.children("ul").length,this._createTabbarFromOldMarkup(),this._processTabs(),this._menu={},this._menu.usermenu=!1,this._menu.$menuItems=[],this._menu.$container=null,this._menu.$elemPasteBefore=null,this._menu.$elemPasteAfter=null,this._initMenu(),this._refresh();var t=this._getIndexByTabOrContentId(e.selected);void 0===t&&(t=0),this._fireSelectEvents(t),this._initialRender=void 0},_fireSelectEvents:function(e,t){var i=e;this._isTabDisabled(i)&&(i=this._getNextEnabledTab(i)),this._activate(void 0===i?void 0:$(this.tabs[i]),t)},_NotifyContextMenuGesture:function(e,t,i){if(this._isInATab(t.target)&&(!this._touchProxy||!this._touchProxy.touchMoved())){var n="keyboard"===i;if("contextmenu"!==t.type&&!n&&"touch"!==i)return;var o=$(t.target).closest("li"),s={launcher:o};if(this._menu.tab=n?this.active:s.launcher,!this._menu.tab)return void t.preventDefault();if(this._menu.$elemRemove){var r=o.hasClass("oj-disabled");if((r||0===this._getCloseIcons(o).length)&&1===this._menu.$container.children().length)return void t.preventDefault();r||!this._isTabRemovable(o)?this._menu.$elemRemove.addClass("oj-disabled"):this._menu.$elemRemove.removeClass("oj-disabled")}if(this._menu.$elemPasteBefore||this._menu.$elemPasteAfter){var a=!this._menu.cutTab;this._menu.$elemPasteBefore.hasClass("oj-disabled")!==a&&(a?(this._menu.$elemPasteBefore.addClass("oj-disabled"),this._menu.$elemPasteAfter.addClass("oj-disabled")):(this._menu.$elemPasteBefore.removeClass("oj-disabled"),this._menu.$elemPasteAfter.removeClass("oj-disabled")),this._menu.$container.ojMenu("refresh"))}this._OpenContextMenu(t,i,s)}},_tabKeydown:function(e){if(!this._handlePageNav(e)){var t=$(this.document[0].activeElement).closest("li"),i=this._getEnabledTabs(),n=i.index(t),o=i.length;switch(e.keyCode){case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:n=(n+1)%o;break;case $.ui.keyCode.UP:case $.ui.keyCode.LEFT:n=((0===n?o:n)-1)%o;break;case $.ui.keyCode.END:n=o-1;break;case $.ui.keyCode.HOME:n=0;break;case 46:var s=this.active;return void(s&&this._getCloseIcons(s).length>0&&(e.preventDefault(),this._removeTab(s,null,e)));default:return}e.preventDefault(),clearTimeout(this.activating);var r=$(i[n]);if(r.focus(),!e.ctrlKey){t.attr("aria-selected","false"),r.attr("aria-selected","true");var a=this;this.activating=this._delay(function(){a&&a.tabs&&a._activate(r,e)},this.delay)}}},_panelKeydown:function(e){$(e.target).closest(".oj-tabs-selected").attr("id")===this.element.children(".oj-tabs-selected").attr("id")&&(this._handlePageNav(e)||e.ctrlKey&&e.keyCode===$.ui.keyCode.UP&&(e.preventDefault(),this.active.focus()))},_handlePageNav:function(e){var t=this._getSelectedIndex();return e.ctrlKey&&e.keyCode===$.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(t,!1)),!0):!(!e.ctrlKey||e.keyCode!==$.ui.keyCode.PAGE_DOWN||(this._activate(this._focusNextTab(t,!0)),0))},_isTabDisabled:function(e){return e>=0&&e<this.tabs.length&&$(this.tabs[e]).hasClass("oj-disabled")},_focusNextTab:function(e,t){var i=this._getEnabledTabs(),n=i.index(this.tabs[e]),o=i.length;n=t?(n+1)%o:((0===n?o:n)-1)%o;var s=$(i[n]);return s.focus(),s},_getNextEnabledTab:function(e){for(var t=e+1,i=this.tabs.length-1;t<=i;){if(!this._isTabDisabled(t))return t;t+=1}for(t=e-1;t>=0;){if(!this._isTabDisabled(t))return t;t-=1}},_isHorizontal:function(){return"top"===this.options.edge||"bottom"===this.options.edge},_setOption:function(e,t,i){var n=t;if("selected"!==e){if("disabledTabs"!==e)if("removable"!==e&&"truncation"!==e)if("reorderable"!==e){if("orientation"!==e)if("edge"!==e){if("selectOn"===e)return this._tearDownEvents(!0),this._super(e,n,i),void this._setupEvents();"contextMenu"===e&&(this._clearMenu(),n&&this._initMenu(n)),this._super(e,n,i),"translations"===e&&i&&"removeCueText"===i.subkey&&this.tablist&&this._getCloseIcons(this.tablist).attr("aria-label",n?n.removeCueText:"")}else this._setupEdge(n)&&(this._edgeSpecified=!0,this._super(e,n,i),this.refresh());else if(!this._edgeSpecified){var o=this._orientationToEdge(n);o&&this._setupEdge(o)&&this.refresh()}}else n!==this.options.reorderable&&(this._super(e,n,i),this.refresh());else n!==this.options[e]&&(this._super(e,n,i),this.refresh());else if(null===n&&(n=[]),Array.isArray(n)){this._setOjDisabledOnTab(n);var s=this._getSelectedIndex();this._isTabDisabled(s)&&this._fireSelectEvents(s),this.refresh()}}else{if(void 0===(n=this._getTab(n)))return;this._activate(n)}},refresh:function(){if(this._super(),this._processTabs(),this._refresh(),!this.element.children(".oj-tabs-selected").length){var e=this._getNextEnabledTab(-1);e>=0&&this._fireSelectEvents(e)}},_refresh:function(){var e=this.element.children(".oj-tabs-selected");e.length?this.active=this.tablist.children(".oj-selected"):this.active=$(),this._createCloseIcons(),this._setupEvents(),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:"-1"}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("oj-selected").attr({"aria-selected":"true",tabIndex:"0"}),e.show().attr("aria-expanded","true").removeAttr("aria-hidden")):$(this.tabs[0]).attr("tabIndex","0"),this._isHorizontal()&&(this.tabs.length>0?(this._truncateBeforeOverflow(),this._addConveyor()):this._getTabbarWrapper(),this._addFacets()),void 0===this.options.selected||0===this._getSelectedIndex()?this.element.addClass("oj-first-child-selected"):this.element.removeClass("oj-first-child-selected"),this._setupReorder()},_addConveyor:function(){var e=this.tablist.uniqueId().attr("id"),t=this._getTabbarWrapper().parent();this.conveyor=t.ojConveyorBelt({orientation:"horizontal",contentParent:"#"+e}).attr("data-oj-internal","");var i=this.conveyor.parent();if(i.hasClass("oj-tabs-conveyorbelt-wrapper")){var n="0 1 "+this._getConveyorWrapperMaxWidth()+"px";i.css("flex",n),i.css("-webkit-flex",n),i.css("-ms-flex",n)}},_processTabs:function(){var e=this,t=this.options.edge;this._destroyTabBar(),this._createTabbar(),this.tablist=this.element.children("ul").addClass("oj-tabs-nav oj-helper-clearfix").attr("role","tablist");var i,n,o=this.tablist.index();this.element.children(".oj-tabs-facet").each(function(){var e=$(this);e.index()<o?(e.addClass("oj-start"),i=e):(n||(n=e),e.removeClass("oj-start"))}),"start"===t||"top"===t?i?i.after(this.tablist):this.element.prepend(this.tablist):n?n.before(this.tablist):this.element.append(this.tablist),this.tabs=$(),this.panels=$(),this.tablist.children("li").each(function(){var t=$(this).addClass("oj-tabs-tab").attr({role:"tab",tabIndex:"-1"}).removeAttr("aria-hidden"),i=t.children();i.addClass("oj-tabs-tab-content");var n=i.children();n.addClass("oj-tabs-anchor").attr({role:"presentation",tabIndex:"-1"}),n.children().addClass("oj-tabs-title").removeAttr("aria-hidden"),e.tabs=e.tabs.add(t);var o=n.uniqueId().attr("id"),s=t.attr("data-content"),r=e.element.find(e._sanitizeIdSelector(s));t.attr({"aria-controls":s,"aria-labelledby":o}),e.panels=e.panels.add(r),r.attr("aria-labelledby",o).attr("role","tabpanel")}),"start"!==t&&"end"!==t||e.tablist.addClass("oj-tabs-nav-root"),this._initialRender&&this._setOjDisabledOnTab(this.options.disabledTabs)},_setupEvents:function(){var e=this,t={keydown:this._tabKeydown},n=this.options.selectOn,o=!1;n&&$.each(n.split(" "),function(n,s){"click"===s&&(o=!0),i.DomUtils.isValidIdentifier(s)&&(t[s]=e._eventHandler)});var s=this._getEnabledTabs();if(this._on(s,t),o||this._on(s,{click:function(e){e.preventDefault()}}),this.panels.on("keydown"+this.eventNamespace,this._panelKeydown.bind(this)),this.options.removable){var r={click:this._removeTabHandler},a=this._getCloseIcons(s);this._on(a,r),this._AddHoverable(a),this._AddActiveable(a)}this._focusable({element:s,applyHighlight:!0}),this._AddHoverable(s),this._AddActiveable({element:s,afterToggle:function(e){"mousedown"===e&&s.filter(".oj-focus-highlight").blur()}})},_tearDownEvents:function(e){var t=this._getEnabledTabs();e||this._UnregisterChildNode(this._getCloseIcons(t)),this._UnregisterChildNode(t),this.panels&&this.panels.off("keydown"+this.eventNamespace)},_eventHandler:function(e,t){var i=this.active,n=$(e.currentTarget).closest("li"),o=i&&n[0]===i[0],s=this._getPanelForTab(n),r=i&&i.length?this._getPanelForTab(i):$(),a={fromTab:i,fromContent:r,toTab:n,toContent:s};e.preventDefault();var l=t||e;n.hasClass("oj-disabled")||this.running||o||r&&r.length&&!1===this._trigger("beforeDeselect",l,a)||!this._initialRender&&!1===this._trigger("beforeSelect",l,a)||(this._initialRender?this.options.selected=this._getTabIdOrIndex(n):this.option("selected",this._getTabIdOrIndex(n),{_context:{originalEvent:l,internalSet:!0}}),this.active=n,s.addClass("oj-tabs-selected"),r&&r.length&&r.removeClass("oj-tabs-selected"),this._toggle(l,a))},_toggle:function(e,t){var n=this,o=t.toTab.closest("li"),s=t.toContent,r=t.fromContent;this.running=!0;var a=t.fromTab.closest("li").removeClass("oj-selected");r.hide(),r.length>0&&i.Components.subtreeHidden(r[0]),o.addClass("oj-selected"),n._isHorizontal()&&n.tabs.length>0&&(0===o.index()?n.element.addClass("oj-first-child-selected"):n.element.removeClass("oj-first-child-selected")),s.show(),s.length>0&&i.Components.subtreeShown(s[0],{initialRender:n._initialRender}),n.running=!1,n._initialRender||(n._trigger("deselect",e,t),n._trigger("select",e,t)),r.attr({"aria-expanded":"false","aria-hidden":"true"}),a.attr("aria-selected","false"),s.length&&r.length?a.attr("tabIndex","-1"):s.length&&this.tabs.filter(function(){return"0"===$(this).attr("tabIndex")}).attr("tabIndex","-1"),s.attr("aria-expanded","true").removeAttr("aria-hidden"),o.attr({"aria-selected":"true",tabIndex:"0"})},_activate:function(e,t){var i;void 0!==e&&(this.active&&e[0]===this.active[0]||(i=e.find(".oj-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:$.noop},t)))},_createCloseIcons:function(){if(this.options.removable&&this._isHorizontal()){var e=this.getTranslatedString("removeCueText"),t=this;this._getEnabledTabs().each(function(i){if(t._isTabRemovable($(this))){var n=$(this).find("> :first-child");n.addClass("oj-removable");var o="ojtabs-id_rm_"+i;$(this).attr("aria-describedby",o),$("<a href='#'>").addClass("oj-tabs-icon oj-component-icon oj-clickable-icon-nocontext oj-tabs-close-icon").attr({id:o,tabIndex:"-1","aria-label":e,role:"presentation"}).appendTo(n)}})}},_getEnabledTabs:function(){return $(this.tabs.not(".oj-disabled"))},_getCloseIcons:function(e){return e.find(".oj-tabs-close-icon")},_destroyTabBar:function(){this.tabs&&this._tearDownEvents(),this._hasResizeListener&&(i.DomUtils.removeResizeListener(this.element[0],this._resizeHandler),this._hasResizeListener=!1,this._originalWidth=void 0),this._sortable&&(i.DomUtils.isTouchSupported()&&this._tearDownTouchReorder(),this.tablist.sortable("instance")&&this.tablist.sortable("destroy"),this._sortable=void 0);var e=this.element.children(".oj-tabs-nav-root"),t=!e.hasClass("oj-tabs-nav");if(this.tabs&&(this._getCloseIcons(this.tabs).remove(),e.length)){var n=e,o=!0,s=this.tablist;e.children().each(function(){var e=$(this);if(e.hasClass("oj-tabs-conveyorbelt-wrapper"))e=s;else if(!e.hasClass("oj-tabs-facet"))return;o=!1,n.after(e),n=e}),o&&t&&e.after(s)}this.conveyor&&(this.conveyor.ojConveyorBelt("destroy"),this.conveyor.remove(),this.conveyor=null,this.active=null),t&&e.remove(),this.tabs=null,this.tablist=null},_destroy:function(){this._clearMenu(),this._isHorizontal()?this.element.removeClass("oj-tabs oj-component oj-tabs-horizontal oj-tabs-top oj-tabs-bottom oj-first-child-selected"):this.element.removeClass("oj-tabs oj-component oj-tabs-vertical oj-tabs-start oj-tabs-end oj-helper-clearfix");var e,t,i,n,o=this;this.tabs.each(function(s){(e=$(this)).removeAttr("tabIndex").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-controls").removeAttr("aria-disabled").removeAttr("aria-describedby").removeAttr("role").removeAttr("data-content").removeClass("oj-active oj-disabled oj-selected oj-tabs-gen-id oj-tabs-tab").removeUniqueId().css("display",""),t=e.children("div").removeClass("oj-tabs-tab-content"),i=t.children("a").removeClass("oj-tabs-anchor").removeAttr("tabIndex").removeAttr("role"),(n=i.children()).removeClass("oj-tabs-title").removeAttr("aria-hidden"),o._isOldMarkup?n.prependTo(o.panels.get(s)):t.hasClass("oj-tabs-gen-div")&&i.hasClass("oj-tabs-gen-a")?(n.prependTo(e),t.remove()):i.hasClass("oj-tabs-gen-a")?(n.prependTo(t),i.remove()):t.hasClass("oj-tabs-gen-div")&&(i.prependTo(e),t.remove())});var s=this.tablist;this._destroyTabBar(),s.removeAttr("tabIndex").removeAttr("role").removeClass("oj-tabs-nav oj-tabs-nav-root oj-helper-clearfix").removeUniqueId(),this._isOldMarkup&&s.remove(),this.panels.each(function(){$(this).removeAttr("tabIndex").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("role").removeClass("oj-active oj-tabs-selected oj-tabs-gen-id oj-tabs-panel").removeUniqueId().css("display","")}),this.element.children(".oj-tabs-facet").removeClass("oj-start")},_isTabRemovable:function(e){var t=this.options.removable;return t&&(!Array.isArray(t)||t.indexOf(e.attr("id"))>-1)},_removeTab:function(e,t,i){if(this._isTabRemovable(e)){var n=this._getPanelForTab(e),o={tab:e,content:n},s=i||t?t:{target:e,currentTarget:e,preventDefault:$.noop};if(e&&!1!==this._trigger("beforeRemove",s,o)){if(t&&t.preventDefault(),e.hasClass("oj-selected")){var r=this.tabs.index(e),a=this._getNextEnabledTab(r);if(void 0===a)this.active=void 0,this.option("selected",void 0,{_context:{originalEvent:s,internalSet:!0}});else{this._fireSelectEvents(a,s);var l=this._getTabIdOrIndex($(this.tabs[a]));"number"==typeof l&&l>r&&(l-=1),this.option("selected",l,{_context:{originalEvent:s,internalSet:!0}})}}this._tearDownEvents(),this.tabs=this.tabs.not(e),e.remove(),n.remove(),this._updateDisabledTabs(),this.refresh(),this._trigger("remove",s,o)}}},_removeTabHandler:function(e,t){this._removeTab($(e.currentTarget).closest("li"),e,t)},removeTab:function(e){if("string"!=typeof e)throw new Error("'"+e+"' is not a tab id");this._removeTab(this._getTab(e),null,null)},_wrapLi:function(e,t){var i;if("li"===e.prop("tagName").toLowerCase()){var n=(i=e).children("div");if(1===n.length&&n.hasClass("oj-tabs-tab-content")){var o=n.children("a");1!==o.length&&(i.wrapInner("<a href='#'></a>"),o.addClass("oj-tabs-gen-a"))}else(n=i.wrapInner("<div><a href='#'></a></div>").children()).addClass("oj-tabs-gen-div oj-tabs-tab-content"),n.children().addClass("oj-tabs-gen-a")}else(i=e.wrap("<li><div><a href='#'></a></div></li>").parent().parent().parent()).addClass("oj-tabs-gen-li"),i.children().addClass("oj-tabs-gen-div oj-tabs-tab-content");return t&&i.attr("data-content",t),i},addTab:function(e){var t,i,n=-1;e.tab&&e.content?(i=e.content,t=this._wrapLi(e.tab,this._getUniqueId(i)),void 0!==e.index&&(n=e.index)):(i=e,t=this._wrapLi($(e).find("> :first-child"),this._getUniqueId(i)));var o,s=this.element.children(".oj-tabs-nav-root"),r=!1;if((o=s.hasClass("oj-tabs-nav")?s:s.length?s.find(".oj-tabs-nav"):this.element.children(".oj-tabs-nav")).length||(o=$("<ul>"),r=!0),r&&o.prependTo(this.element),n>=0&&n<o.children().length){var a=o.children(":eq("+n+")"),l=this.element.children(this._sanitizeIdSelector(a.attr("aria-controls")));a.before(t),l.before(i)}else t.appendTo(o),i.appendTo(this.element);this.refresh(),0===this.active.length&&this._fireSelectEvents(0),t[0].scrollIntoView(!1)},_setupTouchReorder:function(){this._touchProxy=i._TouchProxy.addTouchListeners(this.tablist)},_tearDownTouchReorder:function(){i._TouchProxy.removeTouchListeners(this.tablist)},_setupReorder:function(){if(this.options.reorderable){var e=this;i.DomUtils.isTouchSupported()&&this._setupTouchReorder(),this.tablist.sortable({axis:e._isHorizontal()?"x":"y",distance:10,start:function(){e.tablist.children(".ui-sortable-placeholder").each(function(){$(this).addClass("oj-sortable-placeholder")})},stop:function(t,i){var n=i.item;e._doReorder(t,n,n.prev())||e.tablist.sortable("cancel")}}),this._sortable=!0}else this._tearDownTouchReorder(),this._sortable=!1},_InitOptions:function(e,t){var i=t.edge;this._edgeSpecified="top"===i||"bottom"===i||"start"===i||"end"===i,this._super(e,t)},_orientationToEdge:function(e){return"horizontal"===e?"top":"vertical"===e?"start":null},_setupEdge:function(e){var t=e;(this._initialRender&&!this._edgeSpecified||!t)&&(t=this._orientationToEdge(this.options.orientation));var i=this.options.edge;switch(this.element.removeClass("oj-tabs-top oj-tabs-bottom oj-tabs-start oj-tabs-end"),t){case"top":case"bottom":!this.panels||"start"!==i&&"end"!==i||this.element.removeClass("oj-tabs-vertical oj-helper-clearfix"),this.element.addClass("oj-tabs oj-component oj-tabs-horizontal"),"bottom"===t?this.element.addClass("oj-tabs-bottom"):this.element.addClass("oj-tabs-top"),this._initialRender?this.options.orientation="horizontal":"horizontal"!==this.options.orientation&&this.option("orientation","horizontal",{_context:{internalSet:!0},changed:!0});break;case"start":case"end":!this.panels||"top"!==i&&"bottom"!==i||this.element.removeClass("oj-tabs-horizontal"),this.element.addClass("oj-tabs oj-component oj-tabs-vertical oj-helper-clearfix"),"end"===t?this.element.addClass("oj-tabs-end"):this.element.addClass("oj-tabs-start"),this._initialRender?this.options.orientation="vertical":"vertical"!==this.options.orientation&&this.option("orientation","vertical",{_context:{internalSet:!0},changed:!0});break;default:return!1}return this._initialRender?this.options.edge=t:this.options.edge!==t&&this.option("edge",t,{_context:{internalSet:!0},changed:!0}),!0},_getTabbarWrapper:function(){var e=this.tablist.parent();return e.hasClass("oj-tabs-conveyor")||(e=this.tablist.wrap("<div>").parent().addClass("oj-tabs-conveyor"),(this.element.children(".oj-tabs-facet").length>0?e.wrap("<div>").wrap("<div>").parent().parent().addClass("oj-tabs-conveyorbelt-wrapper"):e).wrap("<div>").parent().addClass("oj-tabs-nav-root").uniqueId().attr("id")),e},_addPrefixId:function(e){e.id.indexOf("ojtabs-id_")<0&&$(e).attr("id","ojtabs-id_"+e.id)},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;var t=e.subId,i=e.index;if("oj-conveyorbelt"!==t&&("number"!=typeof i||i<0||i>=this.panels.length))return null;switch(t){case"oj-conveyorbelt":return this.conveyor?this.conveyor[0]:null;case"oj-tabs-panel":return this._getPanelForTab(this.tabs[i])[0];case"oj-tabs-tab":return this.tabs[i];case"oj-tabs-title":return $(this.tabs[i]).find(".oj-tabs-title")[0];case"oj-tabs-close-icon":case"oj-tabs-close":return $(this.tabs[i]).find(".oj-tabs-close-icon")[0]}return null},getSubIdByNode:function(e){for(var t=[],i=0;i<this.tabs.length;i++)t.push(this._getPanelForTab(this.tabs[i])[0]);for(var n=-1,o=-1,s=e;s;){if(this.conveyor&&s===this.conveyor[0])return{subId:"oj-conveyorbelt"};if(-1!==(n=Array.prototype.indexOf.call(this.tabs,s)))break;if(-1!==(o=t.indexOf(s)))return{subId:"oj-tabs-panel",index:o};s=s.parentElement}if(-1!==n){var r=this.getNodeBySubId({subId:"oj-tabs-title",index:n}),a=this.getNodeBySubId({subId:"oj-tabs-close",index:n});for(s=e;s;){if(s===r)return{subId:"oj-tabs-title",index:n};if(s===a)return{subId:"oj-tabs-close",index:n};if(s===this.tabs[n])return{subId:"oj-tabs-tab",index:n};s=s.parentElement}}return null},_getConveyorWrapperMaxWidth:function(){return this._originalWidth+10},_getTabsWidth:function(){var e=this.element.find(".oj-tabs-conveyorbelt-wrapper");return e.length?e[0].clientWidth:this.element[0].clientWidth},_isOverflow:function(){return this._originalWidth>this._getTabsWidth()},_getTabMaxWidth:function(){var e=Math.floor(this._getTabsWidth()/this.tabs.length);return this.options.removable&&(e-=28),e},_applyTabMaxWidth:function(){var e=this._getTabMaxWidth();this.tablist.find(".oj-tabs-title").each(function(){$(this).css("max-width",e+"px").addClass("oj-tabs-title-overflow")})},_removeTabMaxWidth:function(){this.tablist.find(".oj-tabs-title").each(function(){$(this).css("max-width","").removeClass("oj-tabs-title-overflow")})},_logMessage:function(){},_handleResize:function(){this._isProgressive()&&(this._isOverflow()?this._applyTabMaxWidth():this._removeTabMaxWidth())},_isProgressive:function(){return"auto"===this.options.truncation||"progressive"===this.options.truncation},_truncateBeforeOverflow:function(){this._isHorizontal()&&this.tabs.length>0&&(null==this._resizeHandler&&(this._resizeHandler=this._handleResize.bind(this)),i.DomUtils.addResizeListener(this.element[0],this._resizeHandler),this._hasResizeListener=!0,this._originalWidth=this._getTabbarWrapper()[0].scrollWidth,this._isProgressive()&&this._isOverflow()&&this._applyTabMaxWidth())},_NotifyShown:function(){this._super(),this.refresh()},_NotifyAttached:function(){this._super(),this.refresh()},_buildContextMenuItem:function(e){return $("<a>").text(this.getTranslatedString(Gt[e])).attr("href","#").wrap("<li>").parent().attr("id",Vt[e]).addClass("oj-menu-item")},_menu_cut:function(e){return!(!e||!e.length||(this._menu.cutTab=e,0))},_menu_paste:function(e,t,i){if(!t||!t.length)return!1;if(!this._menu.cutTab)return!1;var n=this._menu.cutTab;return this._menu.cutTab=!1,this._doReorder(e,n,t,i),!0},_menu_remove:function(e,t){return!(!t||!t.length||(this._removeTab(t,null,e),0))},_handleContextMenuSelect:function(e,t){var i=t?t.item.attr("id"):void 0;"ojtabscut"===i?this._menu_cut(this._menu.tab):"ojtabspastebefore"===i?this._menu_paste(e,this._menu.tab,!0):"ojtabspasteafter"===i?this._menu_paste(e,this._menu.tab,!1):"ojtabsremove"===i&&this._menu_remove(e,this._menu.tab)},_initMenu:function(e){var t=e||this.options.contextMenu;if(t){var i=$.type(t);if("function"===i){try{t=t()}catch(e){t=null}i=$.type(t)}t&&$(t).length&&(this.options.contextMenu=t)}this._menu.usermenu=!!t,this._addContextMenu()},_addIfNotExist:function(e,t,i){if(-1===t.indexOf(i)){var n=this._buildContextMenuItem(i);e.append(n),this._menu.$menuItems.push(n)}},_addContextMenu:function(){var e=$(this.options.contextMenu);if(0!==e.length||this.options.reorderable||this.options.removable){var t=this;if(0===e.length){var i=this.options.reorderable?"labelReorder":Gt.remove,n=this.element.uniqueId().attr("id")+"contextmenu";(e=$("<ul>")).css("display","none").attr("id",n).attr("aria-label",this.getTranslatedString(i)),$(document.body).append(e),e.ojMenu(),this.options.contextMenu=this._sanitizeIdSelector(n)}var o=[];e.find("[data-oj-command]").each(function(){if(0===$(this).children("a").length){var e=$(this).attr("data-oj-command").slice("oj-tabs-".length);$(this).replaceWith(t._buildContextMenuItem(e)),$(this).addClass("oj-menu-item"),o.push(e)}}),this.options.reorderable&&(this._addIfNotExist(e,o,"cut"),this._addIfNotExist(e,o,"paste-before"),this._addIfNotExist(e,o,"paste-after"),this._menu.$elemPasteBefore=e.find("#ojtabspastebefore"),this._menu.$elemPasteAfter=e.find("#ojtabspasteafter")),this.options.removable&&(this._addIfNotExist(e,o,"remove"),this._menu.$elemRemove=e.find("#ojtabsremove")),this._menu.$container=e,e.ojMenu("refresh"),e.on("ojselect",$.proxy(this._handleContextMenuSelect,this))}},_clearMenu:function(){var e=this._menu;if(e&&e.$container){if(e.$container.off("ojselect"),e.usermenu||(e.$container.ojMenu("destroy"),e.$container.remove()),e.$menuItems)for(;e.$menuItems.length>0;)e.$menuItems.pop().remove();e.$container=null}e.$elemPasteBefore=null,e.$elemPasteAfter=null,e.$elemRemove=null},_doReorder:function(e,t,i,n){var o=this._getPanelForTab(t),s={tab:t,content:o};if(!1===this._trigger("beforeReorder",e,s))return!1;var r=this.tabs.index(t);if(i.length){if(this.tabs.index(i)===r)return!0;var a=this._getPanelForTab(i);n?(i.before(t),a.before(o)):(i.after(t),a.after(o))}else if(this.tabs.length>0){if(0===r)return!0;this.tabs.first().before(t),this.panels.first().before(o)}return this._updateDisabledTabs(),this.refresh(),i.blur(),t.focus(),this._trigger("reorder",e,s),!0},_sanitizeSelector:function(e){return e?e.replace(/[#!\"$%&'()*+,./:;<=>?@\[\]^`{|}~]/g,"\\$&"):""},_sanitizeIdSelector:function(e){return e?"#"+this._sanitizeSelector(e):""},_getPanelForTab:function(e){return this.element.find(this._sanitizeIdSelector($(e).attr("aria-controls")))},_getUniqueId:function(e){var t=e.attr("id");return t||(t=e.uniqueId().attr("id"),e.addClass("oj-tabs-gen-id")),t},_getTab:function(e){var t=this._getIndexByTabOrContentId(e);if(-1!==t)return $(this.tabs[t])},_getIndexByTabOrContentId:function(e){var t=-1;if("number"==typeof e)e>=0&&e<this.tabs.length&&(t=e);else if("string"==typeof e){var n=this._sanitizeSelector(e);if(i.DomUtils.isValidIdentifier(n)){var o=this.element.find(this._sanitizeIdSelector(n));o.length&&-1===(t=this.tabs.index(o))&&(t=this.panels.index(o))}}return t},_getSelectedIndex:function(){var e=this.options.selected;return"number"==typeof e?e:this.tabs.index($(this._sanitizeIdSelector(e)))},_getTabIdOrIndex:function(e){if(e)return e.attr("id")||this.tabs.index(e)},_setOjDisabledOnTab:function(e){var t=(this.tablist?this.tablist:this.element.children("ul")).children("li");t.removeClass("oj-disabled").removeAttr("aria-disabled");var i=[];if(e&&e.length>0)for(var n,o,s=0;s<e.length;s++)(o=this._getTab(e[s]))&&(o.addClass("oj-disabled"),o.attr("aria-disabled","true"),o.find(".oj-tabs-anchor").removeAttr("href"),n=o.attr("id"),i.push(n||t.index(o)));this._updateDisabledTabs(i)},_updateDisabledTabs:function(e){var t=e;if(!t){t=[];var n=this;this.tablist.children().each(function(){var e=$(this);e.hasClass("oj-disabled")&&t.push(n._getTabIdOrIndex(e))})}if(!i.Object._compareArrayIdIndexObject(t,this.options.disabledTabs))if(this._initialRender)this.options.disabledTabs=t;else{var o={internalSet:!0,writeback:!0};this.option({disabledTabs:t},{_context:o,changed:!0})}},_isInATab:function(e){var t=!1;return this.tabs.each(function(){return this!==e&&!$.contains(this,e)||(t=!0,!1)}),t},_createTabbar:function(){var e=this._getContentIds(),t=this,i=this.element.children("ul");i.length>0&&i.children("li").each(function(i){t._wrapLi($(this),e[i])})},_createTabbarFromOldMarkup:function(){var e=this.element.children("ul");if(0===e.length){var t=this,i=this._getContentIds();e=$("<ul>"),this.element.children().each(function(n){t._wrapLi($(this).find("> :first-child"),i[n]).appendTo(e)}),e.prependTo(this.element)}},_addFacets:function(){var e=this.element.children(".oj-tabs-nav-root"),t=this,i=e.children(".oj-tabs-conveyorbelt-wrapper");this.element.children(".oj-tabs-facet").each(function(){var n=$(this),o=t._getUniqueId(n);0===e.find(t._sanitizeIdSelector(o)).length&&(n.hasClass("oj-start")?i.before(n):n.appendTo(e))})},_getContentIds:function(){var e=[],t=this;return this.element.children(":not(ul):not(.oj-tabs-facet)").each(function(){var i=$(this);i.addClass("oj-tabs-panel"),e.push(t._getUniqueId(i))}),e}}),i.__registerWidget("oj.ojTagCloud",$.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{animationOnDataChange:"none",animationOnDisplay:"none",hiddenCategories:[],highlightedCategories:[],highlightMatch:"all",hoverBehavior:"none",items:null,layout:"rectangular",selection:[],selectionMode:"none",tooltip:{renderer:null},styleDefaults:{animationDuration:void 0,hoverBehaviorDelay:200},touchResponse:"auto"},_CreateDvtComponent:function(e,t,i){return dvt.TagCloud.newInstance(e,t,i)},_ConvertLocatorToSubId:function(e){var t=e.subId;return"oj-tagcloud-item"==t?t="item["+e.index+"]":"oj-tagcloud-tooltip"==t&&(t="tooltip"),t},_ConvertSubIdToLocator:function(e){var t={};return 0==e.indexOf("item")?(t.subId="oj-tagcloud-item",t.index=this._GetFirstIndex(e)):"tooltip"==e&&(t.subId="oj-tagcloud-tooltip"),t},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-tagcloud"),e},_GetChildStyleClasses:function(){var e=this._super();return e["oj-dvtbase oj-tagcloud"]={path:"styleDefaults/animationDuration",property:"ANIM_DUR"},e["oj-tagcloud"]={path:"styleDefaults/svgStyle",property:"TEXT"},e},_GetEventTypes:function(){return["optionChange"]},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtUtilBundle.TAG_CLOUD"]=e.componentName,t},_InitOptions:function(e,t){this._super(e,t);var i=this.options.styleDefaults;this.options.styleDefaults=i},getItem:function(e){return this._component.getAutomation().getItem(e)},getItemCount:function(){return this._component.getAutomation().getItemCount()},getContextByNode:function(e){var t=this.getSubIdByNode(e);return t&&"oj-tagcloud-tooltip"!==t.subId?t:null},_GetComponentDeferredDataPaths:function(){return{root:["data","items"]}}}),i.Components.setDefaultOptions({ojTagCloud:{styleDefaults:i.Components.createDynamicPropertyGetter(function(e){return e.isCustomElement?{svgStyle:{}}:{}})}}),i.CustomElementBridge.registerMetadata("oj-tag-cloud","dvtBaseComponent",{properties:{animationOnDataChange:{type:"string",enumValues:["auto","none"]},animationOnDisplay:{type:"string",enumValues:["auto","none"]},hiddenCategories:{type:"Array<string>",writeback:!0},highlightedCategories:{type:"Array<string>",writeback:!0},highlightMatch:{type:"string",enumValues:["any","all"]},hoverBehavior:{type:"string",enumValues:["dim","none"]},items:{type:"Array<object>|Promise"},layout:{type:"string",enumValues:["cloud","rectangular"]},selection:{type:"Array<string>",writeback:!0},selectionMode:{type:"string",enumValues:["single","multiple","none"]},styleDefaults:{type:"object",properties:{animationDuration:{type:"number"},hoverBehaviorDelay:{type:"number"},svgStyle:{type:"object"}}},tooltip:{type:"object",properties:{renderer:{}}},touchResponse:{type:"string",enumValues:["touchStart","auto"]},translations:{type:"Object",properties:{componentName:{type:"string",value:"Tag Cloud"},labelAndValue:{type:"string",value:"{0}: {1}"},labelClearSelection:{type:"string",value:"Clear Selection"},labelCountWithTotal:{type:"string",value:"{0} of {1}"},labelDataVisualization:{type:"string",value:"Data Visualization"},labelInvalidData:{type:"string",value:"Invalid data"},labelNoData:{type:"string",value:"No data to display"},stateCollapsed:{type:"string",value:"Collapsed"},stateDrillable:{type:"string",value:"Drillable"},stateExpanded:{type:"string",value:"Expanded"},stateHidden:{type:"string",value:"Hidden"},stateIsolated:{type:"string",value:"Isolated"},stateMaximized:{type:"string",value:"Maximized"},stateMinimized:{type:"string",value:"Minimized"},stateSelected:{type:"string",value:"Selected"},stateUnselected:{type:"string",value:"Unselected"},stateVisible:{type:"string",value:"Visible"}}}},methods:{getContextByNode:{},getItem:{},getItemCount:{}},extension:{_WIDGET_NAME:"ojTagCloud"}}),i.CustomElementBridge.register("oj-tag-cloud",{metadata:i.CustomElementBridge.getMetadata("oj-tag-cloud")}),i.__registerWidget("oj.ojThematicMap",$.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{animationDuration:void 0,animationOnDisplay:"none",areas:null,focusRenderer:null,hiddenCategories:[],highlightedCategories:[],highlightMatch:"all",hoverBehavior:"none",hoverRenderer:null,initialZooming:"none",isolatedItem:"",labelDisplay:"off",labelType:"short",links:null,mapProvider:{geo:{},propertiesKeys:{id:"",shortLabel:"",longLabel:""}},markers:null,markerZoomBehavior:"fixed",maxZoom:6,panning:"none",renderer:null,selection:[],selectionMode:"none",selectionRenderer:null,styleDefaults:{dataAreaDefaults:{borderColor:void 0,hoverColor:void 0,selectedInnerColor:void 0,selectedOuterColor:void 0},dataMarkerDefaults:{borderColor:void 0,borderWidth:.5,borderStyle:"solid",color:void 0,height:8,labelStyle:{},opacity:1,shape:"circle",width:8},hoverBehaviorDelay:200,labelStyle:{},linkDefaults:{color:void 0,width:2}},tooltip:{renderer:null},tooltipDisplay:"auto",touchResponse:"auto",zooming:"none"},_currentLocale:"",_loadedBasemaps:[],_basemapPath:"resources/internal-deps/dvt/thematicMap/basemaps/",_supportedLocales:{ar:"ar",cs:"cs",da:"da",de:"de",el:"el",es:"es",fi:"fi",fr:"fr","fr-ca":"fr_CA",he:"iw",hu:"hu",it:"it",ja:"ja",ko:"ko",nl:"nl",no:"no",pl:"pl",pt:"pt_BR","pt-pt":"pt",ro:"ro",ru:"ru",sk:"sk",sv:"sv",th:"th",tr:"tr","zh-hans":"zh_CN","zh-hant":"zh_TW"},_ComponentCreate:function(){this._super(),this._checkBasemaps=[],this._initiallyRendered=!1,this._dataLayersToUpdate=[]},_CreateDvtComponent:function(e,t,i){return dvt.ThematicMap.newInstance(e,t,i)},_ConvertLocatorToSubId:function(e){var t=e.subId;return"oj-thematicmap-area"==t?t=this._getDataLayerId(e.dataLayer,e.index,"area")+":area["+e.index+"]":"oj-thematicmap-marker"==t?t=this._getDataLayerId(e.dataLayer,e.index,"marker")+":marker["+e.index+"]":"oj-thematicmap-link"==t?t=this._getDataLayerId(e.dataLayer,e.index,"link")+":link["+e.index+"]":"oj-thematicmap-tooltip"==t&&(t="tooltip"),t},_ConvertSubIdToLocator:function(e){var t={};return e.indexOf(":area")>0?(t.subId="oj-thematicmap-area",this._IsCustomElement()||(t.dataLayer=e.substring(0,e.indexOf(":"))),t.index=this._GetFirstIndex(e)):e.indexOf(":marker")>0?(t.subId="oj-thematicmap-marker",this._IsCustomElement()||(t.dataLayer=e.substring(0,e.indexOf(":"))),t.index=this._GetFirstIndex(e)):e.indexOf(":link")>0?(t.subId="oj-thematicmap-link",this._IsCustomElement()||(t.dataLayer=e.substring(0,e.indexOf(":"))),t.index=this._GetFirstIndex(e)):"tooltip"==e&&(t.subId="oj-thematicmap-tooltip"),t},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-thematicmap"),e},_GetChildStyleClasses:function(){var e=this._super();return e["oj-dvtbase oj-thematicmap"]={path:"animationDuration",property:"ANIM_DUR"},e["oj-thematicmap-arealayer"]=[{path:"styleDefaults/areaSvgStyle",property:"BACKGROUND"},{path:"styleDefaults/labelStyle",property:"TEXT"}],e["oj-thematicmap-area"]={path:"styleDefaults/dataAreaDefaults/borderColor",property:"border-top-color"},e["oj-thematicmap-area oj-hover"]={path:"styleDefaults/dataAreaDefaults/hoverColor",property:"border-top-color"},e["oj-thematicmap-area oj-selected"]=[{path:"styleDefaults/dataAreaDefaults/selectedInnerColor",property:"border-top-color"},{path:"styleDefaults/dataAreaDefaults/selectedOuterColor",property:"border-bottom-color"}],e["oj-thematicmap-marker"]=[{path:"styleDefaults/dataMarkerDefaults/labelStyle",property:"TEXT"},{path:"styleDefaults/dataMarkerDefaults/color",property:"background-color"},{path:"styleDefaults/dataMarkerDefaults/opacity",property:"opacity"},{path:"styleDefaults/dataMarkerDefaults/borderColor",property:"border-top-color"}],e["oj-thematicmap-link"]={path:"styleDefaults/linkDefaults/color",property:"color"},e["oj-thematicmap-link oj-hover"]={path:"styleDefaults/linkDefaults/_hoverColor",property:"color"},e["oj-thematicmap-link oj-selected"]={path:"styleDefaults/linkDefaults/_selectedColor",property:"border-color"},e},_GetEventTypes:function(){return["optionChange"]},_InitOptions:function(e,t){this._super(e,t);var i=this.options.styleDefaults;this.options.styleDefaults=i},_setOptions:function(e,t){var n=Object.keys(e).length,o=e.areaLayers,s=this.options.areaLayers,r=e.pointDataLayers;if(1==n&&o&&s&&s.length>0)for(var a=0;a<o.length;a++){var l=o[a],u=s[a],h=!0;for(var d in l)"areaDataLayer"!=d&&l[d]!=u[d]&&(h=h&&!1);h&&!i.Object.compareValues(u.areaDataLayer,l.areaDataLayer)&&this._dataLayersToUpdate.push({options:l.areaDataLayer,parentLayer:l.layer,isADL:!0})}else if(1==n&&r&&this.options.pointDataLayers&&this.options.pointDataLayers.length>0)for(a=0;a<r.length;a++)i.Object.compareValues(this.options.pointDataLayers[a],r[a])||this._dataLayersToUpdate.push({options:r[a],parentLayer:r[a].id,isADL:!1});this._super(e,t)},_GetComponentRendererOptions:function(){return["tooltip/renderer","_tooltip/renderer","renderer","focusRenderer","hoverRenderer","selectionRenderer"]},_ProcessOptions:function(){this._super();var e=this.options.tooltip,t=e?e.renderer:null;if(t){var n=this;this.options._tooltip={renderer:function(e){var o=n._IsCustomElement()?{insert:e.tooltip}:e.tooltip;try{return t(e)||o}catch(e){return i.Logger.warn("Showing default tooltip. "+e),o}}}}var o=this.options.areaLayers;if(o)for(var s=0;s<o.length;s++){var r=o[s].areaDataLayer;if(r)(l=r._templateRenderer)&&(r.renderer=this._GetTemplateDataRenderer(l,"area"))}var a=this.options.pointDataLayers;if(a)for(s=0;s<a.length;s++){var l,u=a[s];if(u)(l=u._templateRenderer)&&(u.renderer=this._GetTemplateDataRenderer(l,"point"))}this.options._contextHandler=this._getContextHandler()},_Render:function(){this._NotReady();var e=this.options.areaLayers;if(this._IsCustomElement()){if(!this.options.mapProvider.geo.type)return void this._MakeReady()}else{if(!this.options.basemap||!e||e.length<1)return void this._MakeReady();this._loadBasemap();for(var t=0;t<this._checkBasemaps.length;t++)if(!this._loadedBasemaps[this._checkBasemaps[t]])return;this._checkBasemaps=[]}if(this._initiallyRendered&&this._dataLayersToUpdate.length>0){if(this._context.isReadyToRender()){for(t=0;t<this._dataLayersToUpdate.length;t++){var i=this._dataLayersToUpdate[t],n=i.isADL;n?this._CleanTemplate("area"):this._CleanTemplate("point"),this._component.updateLayer(i.options,i.parentLayer,n)}this._dataLayersToUpdate=[]}this._MakeReady()}else this._super(),this._initiallyRendered=!0},_RenderComponent:function(e,t){this._IsCustomElement()&&this._mapCustomElementOptions(e),this._updateDataLayerSelection(e),this._super(e,t)},_getContextHandler:function(){var e=this;return function(t,n,o,s,r){var a={component:i.Components.__GetWidgetConstructor(e.element),parentElement:t,rootElement:n,data:o,state:s,previousState:r,id:o.id,label:o.label,color:o.color,location:o.location,x:o.x,y:o.y};return e._IsCustomElement()&&(a.renderDefaultHover=e.renderDefaultHover.bind(e,a),a.renderDefaultSelection=e.renderDefaultSelection.bind(e,a),a.renderDefaultFocus=e.renderDefaultFocus.bind(e,a)),e._FixRendererContext(a)}},renderDefaultHover:function(e){e.previousState&&e.state.hovered==e.previousState.hovered||this._component.processDefaultHoverEffect(e.id,e.state.hovered)},renderDefaultSelection:function(e){e.previousState&&e.state.selected==e.previousState.selected||this._component.processDefaultSelectionEffect(e.id,e.state.selected)},renderDefaultFocus:function(e){e.previousState&&e.state.focused==e.previousState.focused||this._component.processDefaultFocusEffect(e.id,e.state.focused)},_loadBasemap:function(){var e=this.options.basemap;if(e){var t=i.Config.getLocale();t!==this._currentLocale&&(this._currentLocale=t,this._loadedBasemaps=[]);var n=this.options.areaLayers;if(n)for(var o=0;o<n.length;o++){var s=n[o].layer;s&&this._loadBasemapHelper(e,s,t)}var r=this.options.pointDataLayers;!this.options.mapProvider.geo.type&&r&&r.length>0&&this._loadBasemapHelper(e,"cities",t)}},_loadResourceByUrl:function(e,t){if(!this._loadedBasemaps[e]){var n=this,o=function(){n._loadedBasemaps[e]=!0,n._Render()},s=$.getScript(i.Config.getResourceUrl(e),function(e,t){o()});t&&s.fail(function(e,t,i){o()})}},_loadBasemapHelper:function(e,t,i){var n=!0;try{n=Object.keys(dvt.DvtBaseMapManager.getLayerIds(e,t)).length>0}catch(e){n=!1}if(!n&&!this.options.mapProvider.geo.type){var o=this._basemapPath+"ojthematicmap-"+e+"-"+t+".js";-1==this._checkBasemaps.indexOf(o)&&(this._checkBasemaps.push(o),this._loadResourceByUrl(o,!1))}if(-1===i.indexOf("en")){var s=i.toLowerCase().split("-"),r=[s[0]];s.length>1&&r.unshift(s[0]+"-"+s[1]),s.length>2&&r.unshift(s[0]+"-"+s[2],s[0]+"-"+s[1]+"-"+s[2]),e=e.charAt(0).toUpperCase()+e.slice(1),t=t.charAt(0).toUpperCase()+t.slice(1);for(var a=this._basemapPath+"resourceBundles/"+e+t+"Bundle_",l=0;l<r.length;l++)if(this._supportedLocales[r[l]]){var u=a+this._supportedLocales[r[l]]+".js";-1==this._checkBasemaps.indexOf(u)&&(this._checkBasemaps.push(u),this._loadResourceByUrl(u,!0));break}}},_HandleEvent:function(e){var t=e.type;if(this._IsCustomElement()||"selection"!==t)this._super(e);else{var i={},n=e.clientId;if(i[n]=e.selection,this.options.selection)for(var o in this.options.selection)n!==o&&(i[o]=this.options.selection[o]);this._UserOptionChange("selection",i)}},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtUtilBundle.THEMATIC_MAP"]=e.componentName,t},_updateDataLayerSelection:function(e){var t=e.selection;if(t){var i=e.pointDataLayers;if(i)if(this._IsCustomElement()&&i[0])i[0].selection=t;else for(var n=0;n<i.length;n++)t[i[n].id]&&(i[n].selection=t[i[n].id]);var o=e.areaLayers;if(o&&o[0]){var s=o[0].areaDataLayer;this._IsCustomElement()&&s?s.selection=t:s&&t[s.id]&&(s.selection=t[s.id])}}},getArea:function(e){return this._IsCustomElement()?this._component.getAutomation().getData(this._getDataLayerId(null,e,"area"),"area",e):this._component.getAutomation().getData(arguments[0],"area",arguments[1])},getMarker:function(e){return this._IsCustomElement()?this._component.getAutomation().getData(this._getDataLayerId(null,e,"marker"),"marker",e):this._component.getAutomation().getData(arguments[0],"marker",arguments[1])},getLink:function(e){return this._IsCustomElement()?this._component.getAutomation().getData(this._getDataLayerId(null,e,"link"),"link",e):this._component.getAutomation().getData(arguments[0],"link",arguments[1])},getContextByNode:function(e){var t=this.getSubIdByNode(e);return t&&(this._IsCustomElement()&&delete t.dataLayer,"oj-thematicmap-tooltip"!==t.subId)?t:null},_GetComponentDeferredDataPaths:function(){return this._IsCustomElement()?{root:["areas","markers","links"]}:{areaLayers:["areaDataLayer/areas","areaDataLayer/markers","areaDataLayer/links"],pointDataLayers:["markers","links"]}},_GetComponentNoClonePaths:function(){return this._IsCustomElement()?{areas:!0,markers:!0,links:!0,mapProvider:!0}:{mapProvider:!0,areaLayers:{areaDataLayer:{areas:!0,markers:!0,links:!0}},pointDataLayers:{markers:!0,links:!0}}},_GetDataContext:function(e){if(this._IsCustomElement())return this._super();var t=this.options.basemap,i=e.layer?e.layer:"cities";return{basemap:t,layer:i,ids:dvt.DvtBaseMapManager.getLayerIds(t,i)}},_mapCustomElementOptions:function(e){var t=e.animationOnDisplay;t&&(e.animationOnMapChange=t);var i=[{}];e.areaLayers=i;var n=i[0],o={id:"adl1"};n.areaDataLayer=o;var s=[{id:"pdl1"}];e.pointDataLayers=s;var r=s[0],a=["labelDisplay","labelType"];this._mapOptionHelper(e,a,[n]),a=["animationOnDataChange","focusRenderer","hoverRenderer","renderer","selectionMode","selectionRenderer"],this._mapOptionHelper(e,a,[o,r]),a=["areas","isolatedItem"],this._mapOptionHelper(e,a,[o]),this._idToDataLayerMap={};var l=e.areas;if(l)for(var u=0;u<l.length;u++){var h=l[u];this._idToDataLayerMap[h.id]="adl1"}var d=e.markers;if(d){this._markerToDataLayerMap=[];var c=[],p=[];for(u=0;u<d.length;u++){var _=d[u];_.location?(c.push(_),this._markerToDataLayerMap[u]="adl1",this._idToDataLayerMap[_.id]="adl1"):_.x&&_.y&&(p.push(_),this._markerToDataLayerMap[u]="pdl1",this._idToDataLayerMap[_.id]="pdl1")}c.length>0&&(o.markers=c),p.length>0&&(r.markers=p)}var m=e.links;if(m){this._linkToDataLayerMap=[];var g=[],f=[];for(u=0;u<m.length;u++){var v=m[u],C=v.startLocation;if(C&&C.location)g.push(v),this._linkToDataLayerMap[u]="adl1";else if(C&&C.x&&C.y)f.push(v),this._linkToDataLayerMap[u]="pdl1";else if(C&&C.id){var y=this._idToDataLayerMap[C.id];"adl1"===y?g.push(v):f.push(v),this._linkToDataLayerMap[u]=y}}g.length>0&&(o.links=g),f.length>0&&(r.links=f)}},_mapOptionHelper:function(e,t,i){for(var n=0;n<t.length;n++){var o=t[n],s=e[o];if(s)for(var r=0;r<i.length;r++)i[r][o]=s}},_getDataLayerId:function(e,t,i){if(!this._IsCustomElement())return e;switch(i){case"area":return"adl1";case"marker":return this._markerToDataLayerMap[t];case"link":return this._linkToDataLayerMap[t];default:return""}}}),i.Components.setDefaultOptions({ojThematicMap:{styleDefaults:i.Components.createDynamicPropertyGetter(function(e){return e.isCustomElement?{areaSvgStyle:{}}:{}})}}),function(){i.CustomElementBridge.registerMetadata("oj-thematic-map","dvtBaseComponent",{properties:{animationDuration:{type:"number"},animationOnDisplay:{type:"string",enumValues:["auto","none"]},areas:{type:"Array<object>|Promise"},focusRenderer:{},hiddenCategories:{type:"Array<string>",writeback:!0},highlightedCategories:{type:"Array<string>",writeback:!0},highlightMatch:{type:"string"},hoverBehavior:{type:"string",enumValues:["dim","none"]},hoverRenderer:{},initialZooming:{type:"string",enumValues:["auto","none"]},isolatedItem:{type:"string"},labelDisplay:{type:"string",enumValues:["auto","on","off"]},labelType:{type:"string",enumValues:["short","long"]},links:{type:"Array<object>|Promise"},mapProvider:{type:"object",properties:{geo:{type:"object"},propertiesKeys:{type:"object"}}},markers:{type:"Array<object>|Promise"},markerZoomBehavior:{type:"string",enumValues:["fixed","zoom"]},maxZoom:{type:"number"},panning:{type:"string",enumValues:["none","auto"]},renderer:{},selection:{type:"Array<string>",writeback:!0},selectionMode:{type:"string",enumValues:["none","single","multiple"]},selectionRenderer:{},styleDefaults:{type:"object",properties:{areaSvgStyle:{type:"object"},dataAreaDefaults:{type:"object",properties:{borderColor:{type:"string"},hoverColor:{type:"string"},selectedInnerColor:{type:"string"},selectedOuterColor:{type:"string"}}},dataMarkerDefaults:{type:"object",properties:{borderColor:{type:"string"},borderStyle:{type:"string",enumValues:["solid","none"]},borderWidth:{type:"number"},color:{type:"string"},height:{type:"number"},labelStyle:{type:"object"},opacity:{type:"number"},shape:{type:"string"},width:{type:"number"}}},hoverBehaviorDelay:{type:"number"},labelStyle:{type:"object"},linkDefaults:{type:"object",properties:{color:{type:"string"},width:{type:"number"}}}}},tooltip:{type:"object",properties:{renderer:{}}},tooltipDisplay:{type:"string",enumValues:["auto","shortDesc","labelAndShortDesc","none"]},touchResponse:{type:"string",enumValues:["auto","touchStart"]},translations:{type:"Object",properties:{componentName:{type:"string",value:"Thematic Map"},labelAndValue:{type:"string",value:"{0}: {1}"},labelClearSelection:{type:"string",value:"Clear Selection"},labelCountWithTotal:{type:"string",value:"{0} of {1}"},labelDataVisualization:{type:"string",value:"Data Visualization"},labelInvalidData:{type:"string",value:"Invalid data"},labelNoData:{type:"string",value:"No data to display"},stateCollapsed:{type:"string",value:"Collapsed"},stateDrillable:{type:"string",value:"Drillable"},stateExpanded:{type:"string",value:"Expanded"},stateHidden:{type:"string",value:"Hidden"},stateIsolated:{type:"string",value:"Isolated"},stateMaximized:{type:"string",value:"Maximized"},stateMinimized:{type:"string",value:"Minimized"},stateSelected:{type:"string",value:"Selected"},stateUnselected:{type:"string",value:"Unselected"},stateVisible:{type:"string",value:"Visible"}}},zooming:{type:"string",enumValues:["none","auto"]}},methods:{getArea:{},getContextByNode:{},getLink:{},getMarker:{}},extension:{_WIDGET_NAME:"ojThematicMap"}});var e=i.CustomElementBridge.getMetadata("oj-thematic-map");i.CustomElementBridge.register("oj-thematic-map",{metadata:e,parseFunction:e.extension._DVT_PARSE_FUNC({"style-defaults.data-marker-defaults.shape":!0})})}(),i.__registerWidget("oj.ojTimeAxis",$.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{converter:{default:null,seconds:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric",minute:"2-digit",second:"2-digit"}),minutes:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric",minute:"2-digit"}),hours:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric"}),days:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"numeric",day:"2-digit"}),weeks:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"numeric",day:"2-digit"}),months:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"long"}),quarters:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"long"}),years:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({year:"numeric"})},start:"",end:"",scale:null},_CreateDvtComponent:function(e,t,i){return dvt.TimeAxis.newInstance(e,t,i)},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-timeaxis"),e},_GetChildStyleClasses:function(){var e=this._super();return e["oj-timeaxis-label"]={path:"labelStyle",property:"TEXT"},e},_GetEventTypes:function(){return["optionChange"]},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtUtilBundle.TIMEAXIS"]=e.componentName,t},_GetComponentRendererOptions:function(){return[]},_ProcessOptions:function(){this._super();var e=this,t=function(t){var i=typeof e.options[t];"number"!==i&&"string"!==i&&(e.options[t]=null)};t("start"),t("end")},_LoadResources:function(){null==this.options._resources&&(this.options._resources={});var e=this.options._resources,t=i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME),n=t.createConverter({hour:"numeric",minute:"2-digit",second:"2-digit"}),o=t.createConverter({hour:"numeric",minute:"2-digit"}),s=t.createConverter({hour:"numeric"}),r=t.createConverter({month:"numeric",day:"2-digit"}),a=t.createConverter({month:"long"}),l=t.createConverter({year:"numeric"}),u=t.createConverter({month:"short"}),h={seconds:n,minutes:o,hours:s,days:r,weeks:r,months:a,quarters:a,years:l},d={seconds:n,minutes:o,hours:s,days:r,weeks:r,months:u,quarters:u,years:t.createConverter({year:"2-digit"})};e.converterFactory=t,e.converter=h,e.converterVert=d,e.axisClass="oj-timeaxis-container",e.axisLabelClass="oj-timeaxis-label",e.axisSeparatorClass="oj-timeaxis-separator",e.borderTopVisible=!1,e.borderRightVisible=!1,e.borderBottomVisible=!1,e.borderLeftVisible=!1,e.firstDayOfWeek=i.LocaleData.getFirstDayOfWeek()}}),i.CustomElementBridge.registerMetadata("oj-time-axis","dvtBaseComponent",{properties:{converter:{type:"object",properties:{days:{},default:{},hours:{},minutes:{},months:{},quarters:{},seconds:{},weeks:{},years:{}}},end:{type:"string"},scale:{type:"string",enumValues:["seconds","minutes","hours","days","weeks","months","quarters","years"]},start:{type:"string"},translations:{type:"Object",properties:{componentName:{type:"string",value:"Time Axis"},labelAndValue:{type:"string",value:"{0}: {1}"},labelClearSelection:{type:"string",value:"Clear Selection"},labelCountWithTotal:{type:"string",value:"{0} of {1}"},labelDataVisualization:{type:"string",value:"Data Visualization"},labelInvalidData:{type:"string",value:"Invalid data"},labelNoData:{type:"string",value:"No data to display"},stateCollapsed:{type:"string",value:"Collapsed"},stateDrillable:{type:"string",value:"Drillable"},stateExpanded:{type:"string",value:"Expanded"},stateHidden:{type:"string",value:"Hidden"},stateIsolated:{type:"string",value:"Isolated"},stateMaximized:{type:"string",value:"Maximized"},stateMinimized:{type:"string",value:"Minimized"},stateSelected:{type:"string",value:"Selected"},stateUnselected:{type:"string",value:"Unselected"},stateVisible:{type:"string",value:"Visible"}}}},methods:{},extension:{_WIDGET_NAME:"ojTimeAxis"}}),i.CustomElementBridge.register("oj-time-axis",{metadata:i.CustomElementBridge.getMetadata("oj-time-axis")}),i.__registerWidget("oj.ojTimeline",$.oj.dvtTimeComponent,{widgetEventPrefix:"oj",options:{animationOnDataChange:"none",animationOnDisplay:"none",end:"",minorAxis:{converter:{default:null,seconds:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric",minute:"2-digit",second:"2-digit"}),minutes:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric",minute:"2-digit"}),hours:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric"}),days:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"numeric",day:"2-digit"}),weeks:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"numeric",day:"2-digit"}),months:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"long"}),quarters:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"long"}),years:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({year:"numeric"})},scale:null,svgStyle:{},zoomOrder:null},majorAxis:{converter:{default:null,seconds:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric",minute:"2-digit",second:"2-digit"}),minutes:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric",minute:"2-digit"}),hours:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric"}),days:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"numeric",day:"2-digit"}),weeks:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"numeric",day:"2-digit"}),months:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"long"}),quarters:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"long"}),years:i.Validation.converterFactory(i.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({year:"numeric"})},scale:null,svgStyle:{}},orientation:"horizontal",overview:{rendered:"off",svgStyle:{}},referenceObjects:[],selection:[],selectionMode:"none",series:null,start:"",styleDefaults:{animationDuration:void 0,borderColor:void 0,item:{backgroundColor:void 0,borderColor:void 0,descriptionStyle:void 0,hoverBackgroundColor:void 0,hoverBorderColor:void 0,selectedBackgroundColor:void 0,selectedBorderColor:void 0,titleStyle:void 0},minorAxis:{backgroundColor:void 0,borderColor:void 0,labelStyle:void 0,separatorColor:void 0},majorAxis:{labelStyle:void 0,separatorColor:void 0},overview:{backgroundColor:void 0,labelStyle:void 0,window:{backgroundColor:void 0,borderColor:void 0}},referenceObject:{color:void 0},series:{backgroundColor:void 0,colors:["#237bb1","#68c182","#fad55c","#ed6647","#8561c8","#6ddbdb","#ffb54d","#e371b2","#47bdef","#a2bf39","#a75dba","#f7f37b"],emptyTextStyle:void 0,labelStyle:void 0}},viewportEnd:"",viewportStart:"",viewportChange:null},_CreateDvtComponent:function(e,t,i){return dvt.Timeline.newInstance(e,t,i)},_ConvertLocatorToSubId:function(e){var t=e.subId;return"oj-timeline-item"==t&&(t="timelineItem["+e.seriesIndex+"]["+e.itemIndex+"]"),t},_ConvertSubIdToLocator:function(e){var t={};if(0==e.indexOf("timelineItem")){var i=this._GetIndexPath(e);t.subId="oj-timeline-item",t.seriesIndex=i[0],t.itemIndex=i[1]}return t},_ProcessStyles:function(){if(this._super(),this.options.styleDefaults||(this.options.styleDefaults={}),this.options.styleDefaults.series||(this.options.styleDefaults.series={}),!this.options.styleDefaults.series.colors){var e=new i.ColorAttributeGroupHandler;this.options.styleDefaults.series.colors=e.getValueRamp()}},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-timeline"),e},_GetComponentRendererOptions:function(){return[]},_GetChildStyleClasses:function(){var e=this._super();return e["oj-dvtbase oj-timeline"]={path:"styleDefaults/animationDuration",property:"ANIM_DUR"},e["oj-timeline"]={path:"styleDefaults/borderColor",property:"border-color"},e["oj-timeline-item"]=[{path:"styleDefaults/item/borderColor",property:"border-color"},{path:"styleDefaults/item/backgroundColor",property:"background-color"}],e["oj-timeline-item oj-hover"]=[{path:"styleDefaults/item/hoverBorderColor",property:"border-color"},{path:"styleDefaults/item/hoverBackgroundColor",property:"background-color"}],e["oj-timeline-item oj-selected"]=[{path:"styleDefaults/item/selectedBorderColor",property:"border-color"},{path:"styleDefaults/item/selectedBackgroundColor",property:"background-color"}],e["oj-timeline-item-description"]={path:"styleDefaults/item/descriptionStyle",property:"TEXT"},e["oj-timeline-item-title"]={path:"styleDefaults/item/titleStyle",property:"TEXT"},e["oj-timeline-major-axis-label"]={path:"styleDefaults/majorAxis/labelStyle",property:"TEXT"},e["oj-timeline-major-axis-separator"]={path:"styleDefaults/majorAxis/separatorColor",property:"color"},e["oj-timeline-minor-axis"]=[{path:"styleDefaults/minorAxis/backgroundColor",property:"background-color"},{path:"styleDefaults/minorAxis/borderColor",property:"border-color"}],e["oj-timeline-minor-axis-label"]={path:"styleDefaults/minorAxis/labelStyle",property:"TEXT"},e["oj-timeline-minor-axis-separator"]={path:"styleDefaults/minorAxis/separatorColor",property:"color"},e["oj-timeline-overview"]={path:"styleDefaults/overview/backgroundColor",property:"background-color"},e["oj-timeline-overview-label"]={path:"styleDefaults/overview/labelStyle",property:"TEXT"},e["oj-timeline-overview-window"]=[{path:"styleDefaults/overview/window/backgroundColor",property:"background-color"},{path:"styleDefaults/overview/window/borderColor",property:"border-color"}],e["oj-timeline-reference-object"]={path:"styleDefaults/referenceObject/color",property:"color"},e["oj-timeline-series"]={path:"styleDefaults/series/backgroundColor",property:"background-color"},e["oj-timeline-series-empty-text"]={path:"styleDefaults/series/emptyTextStyle",property:"TEXT"},e["oj-timeline-series-label"]={path:"styleDefaults/series/labelStyle",property:"TEXT"},e["oj-timeline-zoomin-icon"]=[{path:"_resources/zoomIn_bgc",property:"background-color"},{path:"_resources/zoomIn_bc",property:"border-color"}],e["oj-timeline-zoomin-icon oj-hover"]=[{path:"_resources/zoomIn_h_bgc",property:"background-color"},{path:"_resources/zoomIn_h_bc",property:"border-color"}],e["oj-timeline-zoomin-icon oj-active"]=[{path:"_resources/zoomIn_a_bgc",property:"background-color"},{path:"_resources/zoomIn_a_bc",property:"border-color"}],e["oj-timeline-zoomin-icon oj-disabled"]=[{path:"_resources/zoomIn_d_bgc",property:"background-color"},{path:"_resources/zoomIn_d_bc",property:"border-color"}],e["oj-timeline-zoomout-icon"]=[{path:"_resources/zoomOut_bgc",property:"background-color"},{path:"_resources/zoomOut_bc",property:"border-color"}],e["oj-timeline-zoomout-icon oj-hover"]=[{path:"_resources/zoomOut_h_bgc",property:"background-color"},{path:"_resources/zoomOut_h_bc",property:"border-color"}],e["oj-timeline-zoomout-icon oj-active"]=[{path:"_resources/zoomOut_a_bgc",property:"background-color"},{path:"_resources/zoomOut_a_bc",property:"border-color"}],e["oj-timeline-zoomout-icon oj-disabled"]=[{path:"_resources/zoomOut_d_bgc",property:"background-color"},{path:"_resources/zoomOut_d_bc",property:"border-color"}],e},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtUtilBundle.TIMELINE"]=e.componentName,t["DvtUtilBundle.TIMELINE_SERIES"]=e.labelSeries,t["DvtUtilBundle.ZOOM_IN"]=e.tooltipZoomIn,t["DvtUtilBundle.ZOOM_OUT"]=e.tooltipZoomOut,t},_LoadResources:function(){this._super();var e=this.options._resources,t=e.converter,i=e.converterFactory,n=i.createConverter({month:"short"}),o=i.createConverter({year:"2-digit"}),s={seconds:t.seconds,minutes:t.minutes,hours:t.hours,days:t.days,weeks:t.weeks,months:n,quarters:n,years:o};e.converterVert=s,e.zoomIn="oj-timeline-zoomin-icon",e.zoomIn_h="oj-timeline-zoomin-icon oj-hover",e.zoomIn_a="oj-timeline-zoomin-icon oj-active",e.zoomIn_d="oj-timeline-zoomin-icon oj-disabled",e.zoomOut="oj-timeline-zoomout-icon",e.zoomOut_h="oj-timeline-zoomout-icon oj-hover",e.zoomOut_a="oj-timeline-zoomout-icon oj-active",e.zoomOut_d="oj-timeline-zoomout-icon oj-disabled",e.overviewHandleHor="oj-timeline-overview-window-handle-horizontal",e.overviewHandleVert="oj-timeline-overview-window-handle-vertical"},_GetComponentDeferredDataPaths:function(){return{root:["series"]}},getContextByNode:function(e){return this.getSubIdByNode(e)}}),i.CustomElementBridge.registerMetadata("oj-timeline","dvtTimeComponent",{properties:{animationOnDataChange:{type:"string",enumValues:["auto","none"]},animationOnDisplay:{type:"string",enumValues:["auto","none"]},end:{type:"string"},majorAxis:{type:"object",properties:{converter:{type:"object",properties:{days:{},default:{},hours:{},minutes:{},months:{},quarters:{},seconds:{},weeks:{},years:{}}},scale:{type:"string",enumValues:["seconds","minutes","hours","days","weeks","months","quarters","years"]},svgStyle:{type:"object"}}},minorAxis:{type:"object",properties:{converter:{type:"object",properties:{days:{},default:{},hours:{},minutes:{},months:{},quarters:{},seconds:{},weeks:{},years:{}}},scale:{type:"string",enumValues:["seconds","minutes","hours","days","weeks","months","quarters","years"]},svgStyle:{type:"object"},zoomOrder:{type:"Array<string>"}}},orientation:{type:"string",enumValues:["horizontal","vertical"]},overview:{type:"object",properties:{rendered:{type:"string",enumValues:["on","off"]},svgStyle:{type:"object"}}},referenceObjects:{type:"Array<object>"},selection:{type:"Array<string>",writeback:!0},selectionMode:{type:"string",enumValues:["single","multiple","none"]},series:{type:"Array<object>|Promise"},start:{type:"string"},styleDefaults:{type:"object",properties:{animationDuration:{type:"number"},borderColor:{type:"string"},item:{type:"object",properties:{item:{backgroundColor:{type:"string"},borderColor:{type:"string"},descriptionStyle:{type:"object"},hoverBackgroundColor:{type:"string"},hoverBorderColor:{type:"string"},selectedBackgroundColor:{type:"string"},selectedBorderColor:{type:"string"},titleStyle:{type:"object"}}}},majorAxis:{type:"object",properties:{majorAxis:{labelStyle:{type:"object"},separatorColor:{type:"string"}}}},minorAxis:{type:"object",properties:{minorAxis:{backgroundColor:{type:"string"},borderColor:{type:"string"},labelStyle:{type:"object"},separatorColor:{type:"string"}}}},overview:{type:"object",properties:{overview:{backgroundColor:{type:"string"},labelStyle:{type:"object"},window:{type:"object",properties:{window:{backgroundColor:{type:"string"},borderColor:{type:"string"}}}}}}},referenceObject:{type:"object",properties:{referenceObject:{color:{type:"string"}}}},series:{type:"object",properties:{series:{backgroundColor:{type:"string"},colors:{type:"Array<string>"},emptyTextStyle:{type:"object"},labelStyle:{type:"object"}}}}}},translations:{type:"Object",properties:{accessibleItemDesc:{type:"string",value:"Description is {0}."},accessibleItemEnd:{type:"string",value:"End time is {0}."},accessibleItemStart:{type:"string",value:"Start time is {0}."},accessibleItemTitle:{type:"string",value:"Title is {0}."},componentName:{type:"string",value:"Timeline"},labelAndValue:{type:"string",value:"{0}: {1}"},labelClearSelection:{type:"string",value:"Clear Selection"},labelCountWithTotal:{type:"string",value:"{0} of {1}"},labelDataVisualization:{type:"string",value:"Data Visualization"},labelInvalidData:{type:"string",value:"Invalid data"},labelNoData:{type:"string",value:"No data to display"},labelSeries:{type:"string",value:"Series"},stateCollapsed:{type:"string",value:"Collapsed"},stateDrillable:{type:"string",value:"Drillable"},stateExpanded:{type:"string",value:"Expanded"},stateHidden:{type:"string",value:"Hidden"},stateIsolated:{type:"string",value:"Isolated"},stateMaximized:{type:"string",value:"Maximized"},stateMinimized:{type:"string",value:"Minimized"},stateSelected:{type:"string",value:"Selected"},stateUnselected:{type:"string",value:"Unselected"},stateVisible:{type:"string",value:"Visible"},tooltipZoomIn:{type:"string",value:"Zoom In"},tooltipZoomOut:{type:"string",value:"Zoom Out"}}},viewportEnd:{type:"string"},viewportStart:{type:"string"}},methods:{getContextByNode:{}},events:{viewportChange:{}},extension:{_WIDGET_NAME:"ojTimeline"}}),i.CustomElementBridge.register("oj-timeline",{metadata:i.CustomElementBridge.getMetadata("oj-timeline")}),i.TimeUtils=function(){},i.TimeUtils.getPosition=function(e,t,i,n){var o=((e=new Date(e).getTime())-(t=new Date(t).getTime()))*n,s=(i=new Date(i).getTime())-t;return 0==o||0==s?0:o/s},i.TimeUtils.getLength=function(e,t,n,o,s){var r;return e=new Date(e).getTime(),t=new Date(t).getTime(),n=new Date(n).getTime(),o=new Date(o).getTime(),r=i.TimeUtils.getPosition(e,n,o,s),i.TimeUtils.getPosition(t,n,o,s)-r},i.TimeUtils.getDate=function(e,t,i,n){t=new Date(t).getTime();var o=e*((i=new Date(i).getTime())-t);return 0==o||0==n?t:o/n+t},i.TimezoneData={},i.TimezoneData.__mergeIntoLocaleElements=function(e){var t=i.LocaleData.__getBundle();i.CollectionUtils.copyInto(t,e,void 0,!0)},i.TimezoneData.__getBundleNames=function(){return i.TimezoneData._bundleNames},i.TimezoneData.__registerBundleName=function(e){i.TimezoneData._bundleNames.push(e)},i.TimezoneData._bundleNames=[],i.TimezoneData.__registerBundleName("/timezoneData"),i.TimezoneData.__mergeIntoLocaleElements("undefined"==typeof ojtd?{}:ojtd),function(){i.__registerWidget("oj.ojToolbar",$.oj.baseComponent,{widgetEventPrefix:"oj",options:{chroming:"half"},_InitOptions:function(e,t){this._super(e,t),"disabled"in t&&i.Logger.warn("Caller attempted to set the 'disabled' option on Toolbar, but Toolbar does not support the 'disabled' option.  See API doc.")},_ComponentCreate:function(){this._super(),this.element.attr(i.Components._OJ_CONTAINER_ATTR,this.widgetName).addClass("oj-toolbar oj-component").attr("role","toolbar"),this._setup()},_NotifyContextMenuGesture:function(e,t,i){var n=this.element.find(":oj-button[tabindex=0]");this._OpenContextMenu(t,i,{launcher:n,position:{of:"keyboard"===i?n.ojButton("widget"):t}})},_setOption:function(e,t){"disabled"!==e?(this._superApply(arguments),"chroming"===e&&this._refreshChildren()):i.Logger.warn("Caller attempted to set the 'disabled' option on Toolbar, but Toolbar does not support the 'disabled' option.  See API doc.  Ignoring the call.")},refresh:function(){this._super(),this._setup()},_setup:function(){var e=this;this.isRtl="rtl"===this._GetReadingDirection(),this.$enabledButtons=$(),this._IsCustomElement()?(this._focusinListener=function(t){e._handleInitialFocus()},this.element[0].addEventListener("focusin",this._focusinListener,!0),this.$topLevelChildren=this.element.find("oj-button").add(this.element.find("oj-menu-button")).add(this.element.find("oj-buttonset-one")).add(this.element.find("oj-buttonset-many")),this._refreshChildren()):(this.$buttons=this.element.find(":oj-button").unbind("keydown"+this.eventNamespace).bind("keydown"+this.eventNamespace,function(t){e._handleKeyDown(t,$(this))}).unbind("click"+this.eventNamespace).bind("click"+this.eventNamespace,function(t){$(this).ojButton("option","disabled")||e._setTabStop($(this))}).unbind("focus"+this.eventNamespace).bind("focus"+this.eventNamespace,function(t){e._handleFocus($(this))}),this.$buttonsets=this.element.find(":oj-buttonset").ojButtonset("refresh"),this.$topLevelButtons=this.$buttons.not(this.$buttonsets.find(":oj-button")).ojButton("refresh"))},_handleFocus:function(e){this._IsCustomElement()||0!=this.$enabledButtons.length?this._setTabStop(e):(this.$enabledButtons=this.$buttons.filter(function(e){return!$(this).ojButton("option","disabled")}),this._initTabindexes(null==this._lastTabStop),this.$enabledButtons[0].focus())},_handleInitialFocus:function(){var e=this;this.element[0].removeEventListener("focusin",this._focusinListener,!0);var t=this.element.find("oj-button").add(this.element.find("oj-menu-button")),i=this.element.find("oj-buttonset-one").add(this.element.find("oj-buttonset-many"));this.$topLevelChildren=t.add(i),this.$buttons=t.add(i.find(".oj-button")).unbind("keydown"+this.eventNamespace).bind("keydown"+this.eventNamespace,function(t){var i=$(this);e._handleKeyDown(t,i)}).unbind("click"+this.eventNamespace).bind("click"+this.eventNamespace,function(t){var i=$(this);i.hasClass("oj-disabled")||e._setTabStop(i)}).unbind("focusin"+this.eventNamespace).bind("focusin"+this.eventNamespace,function(t){var i=$(this);e._handleFocus(i)}),this.$enabledButtons=this.$buttons.filter(function(e){return!$(this).hasClass("oj-disabled")}),this._initTabindexes(null==this._lastTabStop),this._getButtonFocusElem(this.$enabledButtons[0]).focus()},_getButtonFocusElem:function(e){if(this._IsCustomElement()){var t=$(e);return t.hasClass("oj-button-toggle")?t.children("input")[0]:t.children("button")[0]}return e},_initTabindexes:function(e){var t,i=$(this._lastTabStop);if(this._lastTabStop=void 0,this._IsCustomElement())for(var n=0;n<this.$buttons.length;n++)this._getButtonFocusElem(this.$buttons[n]).setAttribute("tabindex","-1");else this.$buttons.attr("tabindex","-1");t=e||!i.is(this.$enabledButtons)?this.$enabledButtons.first():i,this._setTabStop(t)},_mapToTabbable:function(t){for(var i=[],n=0;n<this.$enabledButtons.length;n++)i.push(this._getButtonFocusElem(this.$enabledButtons[n]));var o=$(i);return t.map(function(t,i){if("radio"!=i.type||i.checked||""==i.name)return i;var n=e(i,o).filter(":checked");return n.length?n[0]:i})},_setTabStop:function(e){var t=(e=this._IsCustomElement()?this._mapToTabbable($(this._getButtonFocusElem(e[0]))):this._mapToTabbable(e))[0],i=this._lastTabStop;t!==i&&($(i).attr("tabindex","-1"),e.attr("tabindex","0"),this._lastTabStop=t)},_handleKeyDown:function(e,t){switch(e.which){case $.ui.keyCode.UP:case $.ui.keyCode.DOWN:if("radio"!=t.attr("type"))break;case $.ui.keyCode.LEFT:case $.ui.keyCode.RIGHT:e.preventDefault();var i=this.$enabledButtons,n=i.length;if(n<2)break;var o=(i.index(t)+(e.which==$.ui.keyCode.DOWN||e.which==$.ui.keyCode.RIGHT^this.isRtl?1:-1)+n)%n;this._getButtonFocusElem(i.eq(o)[0]).focus()}},_destroy:function(){this.element.removeClass("oj-toolbar oj-component").removeAttr(i.Components._OJ_CONTAINER_ATTR).removeAttr("role"),this.$buttons.attr("tabindex","0"),this._refreshChildren()},_refreshChildren:function(){if(this._IsCustomElement())for(var e=0;e<this.$topLevelChildren.length;e++){var t=this.$topLevelChildren[e];"OJ-BUTTON"==t.tagName||"OJ-MENU-BUTTON"==t.tagName?i.Components.__GetWidgetConstructor(this._getButtonFocusElem(t),"ojButton")&&t.refresh():"OJ-BUTTONSET-ONE"!=t.tagName&&"OJ-BUTTONSET-MANY"!=t.tagName||i.Components.__GetWidgetConstructor(t,"ojButtonset")&&t.refresh()}else this.$buttonsets.ojButtonset("refresh"),this.$topLevelButtons.ojButton("refresh")}});var e=function(e,t){var i,n=e.name;if(n){var o=":radio[name='"+(n=n.replace(/'/g,"\\'"))+"']:oj-button";i=t.filter(o)}else i=t.filter(e).filter(":oj-button");return i}}(),i.Components.setDefaultOptions({ojToolbar:{chroming:i.Components.createDynamicPropertyGetter(function(e){return(i.ThemeUtils.parseJSONFromFontFamily("oj-toolbar-option-defaults")||{}).chroming})}}),i.CustomElementBridge.registerMetadata("oj-toolbar","baseComponent",{properties:{chroming:{type:"string",enumValues:["half","full","outlined"]}},extension:{_WIDGET_NAME:"ojToolbar"}}),i.CustomElementBridge.register("oj-toolbar",{metadata:i.CustomElementBridge.getMetadata("oj-toolbar")}),i.__registerWidget("oj.ojTrain",$.oj.baseComponent,{version:"1.0.0",defaultElement:"<div>",widgetEventPrefix:"oj",options:{steps:[],selected:"",selectedStep:"",beforeDeselect:null,deselect:null,beforeSelect:null,select:null},_stepNum:0,_stepArray:null,_ComponentCreate:function(){this._super(),this._setupTrain()},_setupTrain:function(){var e=this.options,t=e.steps;this._stepNum=t.length,this._wrapper=$("<div class='oj-train-wrapper'></div>"),this._wrapper.appendTo(this.element),this._connectorWrapper=$("<div class='oj-train-connector-wrapper'></div>"),this._connectorWrapper.appendTo(this._wrapper);var i=this.element.attr("class");this._stretch=null!=i&&i.indexOf("oj-train-stretch")>=0,this._stretch&&this._connectorWrapper.css("padding","0 "+100/(2*this._stepNum)+"%"),this._connector=$("<div class='oj-train-connector'></div>"),this._connector.appendTo(this._connectorWrapper),this._stepList=$("<ul>"),this._stepList.addClass("oj-train-step-list"),this._connectorFill=$("<div class='oj-train-connector-fill'></div>"),this._connectorFill.appendTo(this._connectorWrapper),this._setupArray(),this._selectedIndex=this._getStepIndex(e.selectedStep||e.selected),-1===this._selectedIndex&&t[0]&&t[0].id&&(this._selectedIndex=0,e.selectedStep=t[0].id,e.selected=t[0].id);for(var n=0;n<this._stepNum;n++){var o=$("<li>").addClass("oj-train-step-list-item").attr({id:this._stepArray[n][1]}),s=this._stepArray[n][4];"confirmation"===s?o.addClass("oj-confirmation"):"info"===s?o.addClass("oj-info"):"error"===s||"fatal"===s?o.addClass("oj-invalid"):"warning"===s&&o.addClass("oj-warning"),o.appendTo(this._stepList),this._drawLabel(n),this._drawStepFill(n),this._drawIndividualConnectorLine(n),this._drawButton(n),this._drawStepNumberLabel(n),this._drawMessageType(n),this._stretch&&o.css("width",100/this._stepNum+"%")}var r=this._stepNum-1===this._selectedIndex?100:100/(2*(this._stepNum-1))+this._selectedIndex/(this._stepNum-1)*100;this._connectorFill.css({width:r+"%"}),this._stepList.appendTo(this._wrapper),this.element.addClass("oj-train")},_setupArray:function(){var e=this.options;this._stepArray=[];for(var t=0;t<this._stepNum;t++){var i=e.steps[t];this._stepArray[t]=new Array(5),this._stepArray[t][0]=i.label?i.label:null,this._stepArray[t][1]=i.id?i.id:null,this._stepArray[t][2]=!!i.disabled,this._stepArray[t][3]=!!i.visited,this._stepArray[t][4]=i.messageType?i.messageType:null}},_drawButton:function(e){var t=$("<div/>").addClass("oj-train-button"),i=$("<span/>"),n=this,o="";if(this._stepArray[e]){var s=this._stepArray[e][3],r=this._stepArray[e][2];this._selectedIndex===e?(t.addClass("oj-selected"),o=" current "):s&&!r?(t.addClass("oj-visited"),o=" visited "):s||r?t.addClass("oj-disabled"):(t.addClass("oj-default"),o=" not visited "),this._stepArray[e][2]||this._selectedIndex===e||(this._AddHoverable(t),this._AddActiveable(t),t.on("click"+this.eventNamespace,function(e){n._fireSelectedStepOptionChange(this.parentNode.parentNode.id,e),n.refresh(),n._setFocus(this.parentNode.parentNode.id)}));var a=this._stepList.children().eq(e).find(".oj-train-button-connector");a.length>=1?(a.children().remove(),a.append(t)):a.append(t),i.text(o),i.addClass("oj-helper-hidden-accessible"),this._stepList.children().eq(e).find("a").append(i)}},_drawMessageType:function(e){if(this._stepArray[e]&&this._stepArray[e][4]){var t=$("<div/>").addClass("oj-train-icon oj-component-icon").attr("aria-hidden","true"),i=$("<span/>"),n="",o=this,s=this._stepArray[e][4];"confirmation"===s?(t.addClass("oj-confirmation"),n=" Confirmation "):"info"===s?(t.addClass("oj-info"),n=" Info "):"error"===s?(t.addClass("oj-error"),n=" Error "):"fatal"===s?(t.addClass("oj-error"),n=" Error "):"warning"===s&&(t.addClass("oj-warning"),n=" Warning ");var r=this._stepList.children().eq(e).find(".oj-train-button");r.children().length>=2&&r.children()[1].remove(),this._stepArray[e][2]||this._selectedIndex===e||t.on("click"+this.eventNamespace,function(e){o._fireSelectedStepOptionChange(this.parentNode.parentNode.parentNode.id,e),o.refresh(),o._setFocus(this.parentNode.parentNode.parentNode.id)}),null!=s&&(i.text(n),i.addClass("oj-helper-hidden-accessible"),this._stepList.children().eq(e).find("a").append(i),r.append(t))}},_fireOptionChange:function(e,t,i){var n={fromStep:this.getStep(e),toStep:this.getStep(t),optionMetadata:{writeback:i?"shouldWrite":"shouldNotWrite"}};if(!1!==this._trigger("beforeDeselect",i,n)&&!1!==this._trigger("beforeSelect",i,n)){var o=this._getStepIndex(e);-1!==o&&(this.options.steps[o].visited=!0),this._trigger("deselect",i,n),this.options.selectedStep&&this.option("selectedStep",t,{_context:{originalEvent:i,internalSet:!0}}),this.options.selected&&this.option("selected",t,{_context:{originalEvent:i,internalSet:!0}}),this._trigger("select",i,n)}},_drawStepNumberLabel:function(e){var t=$("<div/>").addClass("oj-train-button-text");t.append((e+1).toString()),this._stepList.children().eq(e).find(".oj-train-button").append(t)},_drawIndividualConnectorLine:function(e){if(e!=this._stepNum-1){var t=$("<div/>").addClass("oj-train-step-individual-connector");e<this._selectedIndex&&t.addClass("oj-train-connector-before-selected-step"),this._stepList.children().eq(e).prepend(t)}},_drawStepFill:function(e){var t=$("<div/>");if(t.addClass("oj-train-button-connector"),this._stepArray[e]){e<=this._selectedIndex&&t.addClass("oj-train-fill");var i=this._stepList.children().eq(e).children();t.insertBefore(i)}},_drawLabel:function(e){var t=this;if(this._stepArray[e]){var i=$("<div/>").addClass("oj-train-label-wrapper"),n=$("<a>");n.text(this._stepArray[e][0]);var o=this._stepArray[e][2];i.append(n),n.addClass("oj-train-label"),e===this._selectedIndex?n.addClass("oj-selected"):this._stepArray[e][3]&&!o?n.addClass("oj-visited"):o&&n.addClass("oj-disabled"),o||(n.attr("href","#"),this._focusable({element:n,applyHighlight:!0}),this._AddHoverable(n),this._AddActiveable(n),n.on("click keydown"+this.eventNamespace,function(e){e.keyCode!==$.ui.keyCode.ENTER&&"click"!==e.type||(e.preventDefault(),t._fireSelectedStepOptionChange(this.parentNode.parentNode.id,e),t.refresh(),t._setFocus(this.parentNode.parentNode.id))}));var s=this._stepList.children().eq(e).children();s.length>=2&&s[1].remove(),this._stepList.children().eq(e).append(i)}},_getStepIndex:function(e){for(var t=0;t<this._stepNum;t++)if(this._stepArray[t]&&this._stepArray[t][1]===e)return t;return-1},getStep:function(e){for(var t=0;t<this._stepNum;t++)if(this._stepArray[t]&&this._stepArray[t][1]===e)return $.extend({},this.options.steps[t]);return null},nextSelectableStep:function(){return this.getNextSelectableStep()},previousSelectableStep:function(){return this.getPreviousSelectableStep()},getNextSelectableStep:function(){for(var e=this._getStepIndex(this.options.selectedStep||this.options.selected);e<this._stepNum;e++)if(e+1<this._stepNum&&this._stepArray[e+1]&&!this._stepArray[e+1][2])return this._stepArray[e+1][1];return null},getPreviousSelectableStep:function(){for(var e=this._getStepIndex(this.options.selectedStep||this.options.selected);e>=0;e--)if(this._stepArray[e-1]&&!this._stepArray[e-1][2])return this._stepArray[e-1][1];return null},setStep:function(e){e.id&&this.updateStep(e.id,e)},updateStep:function(e,t){if(e){var i=this.getStep(e),n=this._getStepIndex(e);if(-1!==n){var o=this.options.steps[n];t.label&&(i[0]=t.label,o.label=t.label),"string"==typeof t.id&&(i[1]=t.id,o.id=t.id),"boolean"==typeof t.disabled&&(i[2]=t.disabled,o.disabled=t.disabled),"boolean"==typeof t.visited&&(i[3]=t.visited,o.visited=t.visited),t.messageType&&(i[4]=t.messageType,o.messageType=t.messageType),this.refresh()}}},_setOptions:function(e){this._super(e),this.refresh()},_setOption:function(e,t,i){if(("selectedStep"==e||"selected"==e)&&this._stepArray&&this._stepArray[this._selectedIndex]){if(t==this._stepArray[this._selectedIndex][1])return;this._fireOptionChange(this._stepArray[this._selectedIndex][1],t,null)}else this._super(e,t,i)},refresh:function(){this._super(),this._destroy(),this._setupTrain()},_destroy:function(){this._stepList.children().each(function(){$(this).remove()}),this.element.removeClass("oj-train"),this.element.find(".oj-train-wrapper").remove(),this.element.find(".oj-train-connector-wrapper").remove(),this.element.find(".oj-train-step-list").remove(),this.element.find(".oj-train-step-list").remove(),this._super()},_fireSelectedStepOptionChange:function(e,t){var i=this._stepArray[this._selectedIndex][1];i!=e&&this._fireOptionChange(i,e,t)},_setFocus:function(e){var t=this._getStepIndex(e);this._stepList.children().eq(t).find(".oj-train-label").focus()},getNodeBySubId:function(e){if(null===e)return this.element?this.element[0]:null;var t=e.subId,i=e.index;if("number"!=typeof i||i<0||i>=this._stepNum)return null;switch(t){case"oj-train-step":case"oj-train-button":return this._stepList.children().eq(i).find(".oj-train-button")[0];case"oj-train-button-connector":return this._stepList.children().eq(i).find(".oj-train-button-connector")[0];case"oj-train-connector":return this._connector;case"oj-train-connector-fill":return this._connectorFill;case"oj-train-icon":return this._stepList.children().eq(i).find(".oj-train-icon")[0];case"oj-train-label":return this._stepList.children().eq(i).find(".oj-train-label")[0]}return null},getSubIdByNode:function(e){for(var t=e,i=this._stepArray?this._stepArray.length:0,n=0;n<i;n++){var o={subId:"oj-train-step",index:n},s=this.getNodeBySubId(o);if($(t).closest(s).length>0||$(t).closest($(s.parentNode.parentNode).find(".oj-train-label")[0]).length>0)return o}return null}}),i.CustomElementBridge.registerMetadata("oj-train","baseComponent",{properties:{selectedStep:{type:"string",writeback:!0},steps:{type:"Array<object>"}},methods:{getStep:{},getNextSelectableStep:{},getPreviousSelectableStep:{},updateStep:{}},extension:{_WIDGET_NAME:"ojTrain"},events:{select:{},deselect:{},beforeDeselect:{},beforeSelect:{}}}),i.CustomElementBridge.register("oj-train",{metadata:i.CustomElementBridge.getMetadata("oj-train")}),i.TreeDndContext=function(e){this.Init(e)},i.Object.createSubclass(i.TreeDndContext,i.Object,"oj.TreeDndContext"),i.TreeDndContext.prototype.Init=function(e){i.TreeDndContext.superclass.Init.call(this),this.component=e,this.options=e.options,this._reset()},i.TreeDndContext.prototype.isDragEnabled=function(){var e=this._dnd;return e.reorder||e.dragFromEnabled},i.TreeDndContext.prototype.isDropEnabled=function(){var e=this._dnd;return e.reorder||e.dropToEnabled},i.TreeDndContext.prototype.handleDnDOptionChange=function(e){var t=this._dnd,n=i.TreeDndContext,o=t.reorder,s=t.dragFromEnabled;this._dndCleanAll(),this.initDnDOpts(),o==(t=this._dnd).reorder&&s==t.dragFromEnabled||t.reorder||t.dragFromEnabled||this.component._getContainerList().find("li").removeClass(n._OJ_DRAGGABLE).removeClass(n._OJ_DRAG).removeClass(n._OJ_VALID_DROP).removeAttr("draggable"),this.initDnD()},i.TreeDndContext.prototype.initDnDOpts=function(){var e,t,n,o=this.options.dnd,s=this._dnd,r=i.TreeDndContext,a=!0;s.reorder=!1,"object"==typeof o?("string"==typeof(e=o[r._DND_REORDER])&&("enable"===e?(s.reorder=!0,a=!1):"disable"==e&&(a=!1)),a&&(this.options.dnd.reorder="disable"),"object"==typeof(e=o[r._DND_DRAG])&&"object"==typeof(n=e[r._DND_NODE])&&("function"==typeof(t=n[r._DND_DRAGSTART_CB])&&(s.dragStartCallback=t,s.dragFromEnabled=!0),"function"==typeof(t=n[r._DND_DRAGDRAG_CB])&&(s.dragDragCallback=t,s.dragFromEnabled=!0),"function"==typeof(t=n[r._DND_DRAGEND_CB])&&(s.dragEndCallback=t,s.dragFromEnabled=!0),t=n[r._DND_DATATYPES],$.isArray(t)?(s.dragDataTypes=t.slice(),s.dragFromEnabled=!0):"string"==typeof t&&(s.dragDataTypes=[t],s.dragFromEnabled=!0)),"object"==typeof(e=o[r._DND_DROP])&&"object"==typeof(n=e[r._DND_NODE])&&("function"==typeof(t=n[r._DND_DROPDRAGENTER_CB])&&(s.dropDragEnterCallback=t,s.dropToEnabled=!0),"function"==typeof(t=n[r._DND_DROPDRAGOVER_CB])&&(s.dropDragOverCallback=t,s.dropToEnabled=!0),"function"==typeof(t=n[r._DND_DROPDRAGLEAVE_CB])&&(s.dropDragLeaveCallback=t,s.dropToEnabled=!0),"function"==typeof(t=n[r._DND_DROPDROP_CB])&&(s.dropDropCallback=t,s.dropToEnabled=!0),t=n[r._DND_DATATYPES],$.isArray(t)?(s.dropDataTypes=t.slice(),s.dropToEnabled=!0):"string"==typeof t&&(s.dropDataTypes=[t],s.dropToEnabled=!0)),s.reorder||(s.dragDataTypes||s.dragStartCallback||(s.dragFromEnabled=!1,s.dragStartCallback=s.dragDragCallback=s.dragEndCallback=s.dragDataTypes=null),s.dropDropCallback||(s.dropToEnabled=!1,s.dropDragEnterCallback=s.dropDragOverCallback=s.dropDragLeaveCallback=s.dropDropCallback=s.dropDataTypes=null)),s.pureReorder=s.reorder&&!s.dragFromEnabled):this.options.dnd={reorder:"disable"}},i.TreeDndContext.prototype.initDnD=function(){var e=this._dnd,t=e.vars,n=i.TreeDndContext;if(e.dragFromEnabled||e.dropToEnabled||e.reorder){i.TreeDndContext._dragMarker?(t.m=i.TreeDndContext._dragMarker,t.ml=i.TreeDndContext._dragMarkerLine):(t.m=$("<div class='oj-tree-drop-marker'><span class='oj-tree-drop-ptr oj-component-icon'>&#160;</span></div>").css("pointer-events","none").hide().appendTo("body"),t.ml=$("<div />").addClass(n._OJT_DROP_MARKER_LINE).css("pointer-events","none").hide().appendTo("body"),i.TreeDndContext._dragMarker=t.m,i.TreeDndContext._dragMarkerLine=t.ml),e.ml_width=t.ml.width();var o=this.component.element[0],s=$(o).children("ul:eq(0)");(e.reorder||e.dragFromEnabled)&&(e.fnDragStart=this._dragStart.bind(this),e.fnDragEnd=this._dragEnd.bind(this),$(o).on("dragstart",e.fnDragStart),$(o).on("dragend",e.fnDragEnd),s.length&&s.find("li").addClass(n._OJ_DRAGGABLE).addClass(n._OJ_DRAG).addClass(n._OJ_VALID_DROP).attr("draggable","true")),(e.reorder||e.dropToEnabled)&&(e.fnDrag=this._drag.bind(this),e.fnDragEnter=this._dragEnter.bind(this),e.fnDragOver=this._dragOver.bind(this),e.fnDragLeave=this._dragLeave.bind(this),e.fnDragDrop=this._dragDrop.bind(this),$(o).on("drag",e.fnDrag),$(o).on("dragenter",e.fnDragEnter),$(o).on("dragover",e.fnDragOver),$(o).on("dragleave",e.fnDragLeave),$(o).on("drop",e.fnDragDrop))}},i.TreeDndContext.prototype._closedown=function(){this._dndCleanAll()},i.TreeDndContext.prototype._dragStart=function(e){var t,n,o,s,r,a=$(e.target).closest("li"),l=e.originalEvent.dataTransfer;i.TreeDndContext;if((n=(t=this._dnd).vars).o=null,n.r=null,t.nodeLastEnter=null,t.nodeLastLeft=null,t.nodeDraggedId=null,t.dragStarted=!1,!t.reorder&&!t.dragFromEnabled||a.hasClass(zt._OJ_DISABLED)||this.component._isTreeDisabled())e.preventDefault();else{if(!this.component._canTypedNodeMove(a,"move"))return!1;if(s=this.component.isSelected(a)?this.component._getNode(null,!0):s=a,(t.dragFromEnabled||t.pureReorder)&&this._setDataTypes(l,s),this._setDragImage(l,s),t.dragStartCallback){if(o=this._getDraggedItemArray(s),r=t.dragStartCallback(e,{item:o}),e.isDefaultPrevented()||"boolean"==typeof r&&!r)return r;if(!t.dragDataTypes&&!this._checkAddedDataTypes(l)&&!t.reorder)return e.preventDefault(),!1}"uninitialized"===l.effectAllowed&&(t.pureReorder?l.effectAllowed="move":l.effectAllowed=i.DomUtils.isMetaKeyPressed(e)?"copy":"move"),this._dndStartDrag(s,a,e)}},i.TreeDndContext.prototype._drag=function(e){var t=this._dnd;t.dragDragCallback&&t.dragDragCallback(e)},i.TreeDndContext.prototype._dragEnter=function(e){this.component._$container_ul[0].firstChild||this._addInternalNode();var t,n=$(e.target),o=this.component._getNode(n),s=this._dnd,r=s.vars,a=o&&o.length>0&&o.hasClass("oj-tree-node"),l=e.originalEvent.dataTransfer,u=i.TreeDndContext,h=!1,d=!1;if(a&&o.hasClass(zt._OJ_TEMPNODE)&&(s.bInternalNode=!0),!a||"UL"!=e.target.tagName||"group"!=e.target.getAttribute("role"))if(s.foreign=!s.dragStarted,!s.foreign&&!s.reorder||s.foreign&&this._isDtType(l,u._DND_INTERNAL_DT_REORDER))this._dndClean();else if(!s.foreign||(h=this._isDtType(l,u._DND_INTERNAL_DT),s.dropToEnabled)){if(r.r=!1,s.nodeLastEnter&&this._clearDropClasses(s.nodeLastEnter),n.hasClass("oj-tree")&&(o=s.nodeLastEnter),!o||!o.length||o.attr("id")!=s.nodeDraggedId)return h&&a&&(s.nodeLastEnter=null,r.o=2),s.foreign&&!h&&(r.o=1),r.r=o,s.nodeLastEnter=o,this._dndPlacement(e,o),this._dndEnter(o)?(r.r.removeClass(u._OJ_INVALID_DROP).addClass(u._OJ_VALID_DROP).addClass(u._OJ_ACTIVE_DROP),s.dropDragEnterCallback&&(t=s.dropDragEnterCallback(e,{item:s.bInternalNode?null:o,position:s.bInternalNode?"first":s.place,reference:s.bInternalNode?null:r.r})),void 0===t?this._isDtAcceptDataTypes(l)?(e.preventDefault(),e.stopPropagation()):d=s.foreign||!s.reorder:!1===t||e.isDefaultPrevented()?(e.preventDefault(),e.stopPropagation()):!s.foreign&&s.reorder||(d=s.foreign||!s.reorder),d&&this._dndClean(),t):(this._clearDropClasses(r.r),r.r=null,void this._dndHideMarker());this._dndHideMarker()}else this._dndClean()},i.TreeDndContext.prototype._dragOver=function(e){var t,i,n=this._dnd,o=n.vars,s=e.originalEvent.dataTransfer,r=!1;if(o.r&&o.r.length)if((t=o.r).hasClass("oj-tree-node"))if(t.attr("id")!=n.nodeDraggedId){if(this._dndPlacement(e,t),this._dndPrepare())return n.dropDragOverCallback&&(i=n.dropDragOverCallback(e,{item:n.bInternalNode?null:t,reference:n.bInternalNode?null:o.r,position:n.bInternalNode?"first":o.last_pos})),void 0===i?this._isDtAcceptDataTypes(s)?(e.preventDefault(),e.stopPropagation()):r=n.foreign||!n.reorder:!1===i||e.isDefaultPrevented()?(e.preventDefault(),e.stopPropagation()):!n.foreign&&n.reorder||(r=n.foreign||!n.reorder),r&&this._dndClean(),i;this._dndHideMarker()}else this._dndHideMarker();else this._dndHideMarker();else this._dndHideMarker()},i.TreeDndContext.prototype._dragDrop=function(e){var t,i=this._dnd,n=i.vars,o=(e.originalEvent.dataTransfer,"boolean"==typeof n.o&&n.o,!1);return n.r&&(i.dropDropCallback?t=i.dropDropCallback(e,{reference:i.bInternalNode?null:n.r,position:i.bInternalNode?"first":n.last_pos,reorder:!i.foreign&&i.reorder}):!i.foreign&&i.reorder||(o=!0),o||t&&!e.isDefaultPrevented()||this._dndFinishReorder(e)),i.foreign&&this._dndClean(),o||(e.preventDefault(),e.stopPropagation()),i.nodeLastLeft=null,t},i.TreeDndContext.prototype._dragEnd=function(e){var t=this._dnd,i=t.vars;t.dragEndCallback&&t.dragEndCallback(e,{reorder:t.reorder&&!1===i.o}),this._dndStopDrag(),this._dndClean()},i.TreeDndContext.prototype._addInternalNode=function(){this._internalNode||(this._internalNode=$("<li class='"+zt._OJ_TEMPNODE+" oj-tree-node oj-tree-leaf oj-valid-drop' id='"+zt._OJ_TEMPNODE+"'><ins class='oj-tree-icon'></ins><a href='#'><ins class='oj-tree-icon'></ins><span class='oj-tree-title'></span></a></li>")),this.component._$container_ul.append(this._internalNode)},i.TreeDndContext.prototype._dragLeave=function(e){var t=this._dnd,n=t.vars,o=$(e.target),s=o.closest("li"),r=s&&s.length>0&&s.hasClass("oj-tree-node"),a=(s.attr("id"),e.originalEvent.dataTransfer);i.TreeDndContext;t.dropDragLeaveCallback&&t.dropDragLeaveCallback(e,{item:t.bInternalNode?null:s}),o.hasClass("oj-tree")||!r||"none"==a.dropEffect?this._dndLeave(e):t.nodeLastLeft=s,n.r&&this._clearDropClasses(n.r)},i.TreeDndContext.prototype._dndEnter=function(e){var t,n=this._dnd,o=n.vars;i.TreeDndContext;n.prepared=!1,t=this._dndPrepare();var s=n.openTimeoutMs;s&&(n.openTimer_Id&&clearTimeout(n.openTimerId),o.r&&o.r.length&&o.r.hasClass(zt._OJ_COLLAPSED)&&(n.openTimerId=setTimeout(this._dndOpen.bind(this),s)));var r=typeof t;return t="boolean"==r&&t||"string"==r},i.TreeDndContext.prototype._dndOpen=function(){var e=this._dnd,t=e.vars;e.openTimerId=!1,this.component._expand(t.r,this._dndPrepare.bind(this),!0)},i.TreeDndContext.prototype._dndFinishReorder=function(e){var t=this._dnd,n=t.vars;t.dragStarted&&t.reorder&&"object"==typeof n.o&&n.o.length>0&&(this.component._moveNode(n.o,n.r,n.last_pos,i.DomUtils.isMetaKeyPressed(e)),n.o=!1)},i.TreeDndContext.prototype._dndFinishSelection=function(e){e.hasClass(zt._OJ_SELECTED)&&(e.removeClass(zt._OJ_SELECTED),this.component._select(e,!0));var t,i=this.component.getChildren(e),n=i&&i.length?i.length:0;for(t=0;t<n;t++)this._dndFinishSelection($(i[t]))},i.TreeDndContext.prototype._dndPlacement=function(e,t){var i=this._dnd;t&&(t.hasClass(zt._OJ_TEMPNODE)?i.place="after":(e=e.originalEvent,i.off=t.offset(),i.place=e.pageY-(i.off.top||0),i.place=i.place>=this.component._getNodeHeight()?"after":i.place<0?"before":"inside","after"===i.place&&t.hasClass(zt._OJ_EXPANDED)&&(i.place="first")))},i.TreeDndContext.prototype._dndLeave=function(e){var t=this._dnd,i=t.vars;t.after=!1,t.before=!1,t.inside=!1,t.lastNodeEnter=null,this._dndHideMarker(),i.r&&i.r[0]===e.target.parentNode&&t.openTimerId&&(clearTimeout(t.openTimerId),t.openTimerId=!1)},i.TreeDndContext.prototype._dndClean=function(){this._dndHideMarker();var e=this._dnd,t=e.vars;t.o=!1,t.r=!1,e.openTimerId&&clearTimeout(e.openTimerId),e.nodeDraggedId=null,e.foreign=!1,e.nodeLastEnter=null,e.nodeLastLeft=null,e.after=!1,e.before=!1,e.inside=!1,e.off=!1,e.prepared=!1,e.openTimerId=!1,e.foreign=!1,e.bInternalNode=!1},i.TreeDndContext.prototype._dndCleanAll=function(){var e,t=this._dnd;(e=$(this.component._getContainer()[0])).off("dragstart",t.fnDragStart),e.off("dragend",t.fnDragEnd),e.off("drag",t.fnDrag),e.off("dragenter",t.fnDragEnter),e.off("dragover",t.fnDragOver),e.off("dragleave",t.fnDragLeave),e.off("drop",t.fnDragDrop),this._dndClean(),this._reset()},i.TreeDndContext.prototype._dndPrepare=function(){var e=this._dnd,t=e.vars,i=this.component,n=!1;if(!t.r||!t.r.length)return!1;if("number"!=typeof t.o||1!==t.o&&2!==t.o){if(!t.o)return!1}else n=!0;return e.off=t.r.offset(),this.component._isRtl&&(e.off.right=e.off.left+t.r.width()-t.r.find(">a").width()-30),e.targ_ml_width=t.r.find("a").width(),n?(e.before="before"==e.place,e.after="after"==e.place,e.inside="inside"==e.place):(i._prepare_move(t.o,t.r,"before"),e.before=i._checkMove(),i._prepare_move(t.o,t.r,"after"),e.after=i._checkMove(),this.component._is_loaded(t.r)?(i._prepare_move(t.o,t.r,"inside"),e.inside=i._checkMove()):e.inside=!1),e.prepared=!0,this._dndShowMarker()},i.TreeDndContext.prototype._dndShowMarker=function(){var e,t,n,o,s,r=this._dnd,a=i.TreeDndContext,l=r.vars,u=this.component._isRtl,h=this.component._getNodeHeight(),d=!1;if(!r.prepared)return this._dndHideMarker(),d;if(("after"==r.place&&r.after||"inside"==r.place&&r.inside||"before"==r.place&&r.before||"first"==r.place)&&(d=r.place),"first"===d){var c=l.r.find("li:eq(0)");r.off=c.offset()}switch(s=u?r.off.right-18:r.off.left+5,e=!this.component.isLeaf(l.r),t=u?s+r.targ_ml_width+18:s,n=u?t-r.ml_width:s+8,o=r.off.top-3,d){case"before":case"first":this._moveMarkerUI(l.m,{left:t,top:o-7}),l.ml&&this._moveMarkerUI(l.ml,{left:n,top:o});break;case"after":o+=h,this._moveMarkerUI(l.m,{left:t,top:o-2}),l.ml&&this._moveMarkerUI(l.ml,{left:n,top:o+6});break;case"inside":this._moveMarkerUI(l.m,{left:t+(u?e?-4:0:4),top:r.off.top+h/2-8}),l.ml&&l.ml.hide();break;default:this._dndHideMarker()}return d?l.r.removeClass(a._OJ_INVALID_DROP).addClass(a._OJ_VALID_DROP):l.r.removeClass(a._OJ_VALID_DROP).removeClass(a._OJ_VALID_DROP),l.last_pos=d,d},i.TreeDndContext.prototype._dndHideMarker=function(){var e=this._dnd.vars;i.TreeDndContext;e&&(e.m&&e.m.hide(),e.ml&&e.ml.hide(),e.r&&this._clearDropClasses(e.r))},i.TreeDndContext.prototype._moveMarkerUI=function(e,t){this._dnd.vars;t.left=t.left+"px",t.top=t.top+"px",e.css(t).show()},i.TreeDndContext.prototype._dndStartDrag=function(e,t,n){var o,s=this._dnd,r=s.vars,a=i.TreeDndContext;r.o=e,r.o.addClass(a._OJ_DRAG),s.nodeDraggedId=t.attr("id");try{n.currentTarget.unselectable="on",n.currentTarget.onselectstart=function(){return!1},n.currentTarget.style&&(n.currentTarget.style.MozUserSelect="none")}catch(e){}this.component._isTheme()&&r.m&&r.m.addClass("oj-tree-"+this.component._getTheme()),o=this.component._getContainer(),s.cof=o.offset(),s.cw=parseInt(o.width(),10),s.ch=parseInt(o.height(),10),s.dragStarted=!0},i.TreeDndContext.prototype._dndStopDrag=function(){var e=this._dnd,t=e.vars,n=i.TreeDndContext;t.r&&this._clearDropClasses(t.r),"number"!=typeof t.o&&t.o&&t.o.removeClass(n._OJ_DRAG),this._dragImg&&(document.body.removeChild(this._dragImg),this._dragImg=null),e.dragStarted=!1},i.TreeDndContext.prototype._setDataTypes=function(e,t){var n,o,s,r=this._dnd,a=i.TreeDndContext;if((n=this.component.__getJson(t))&&(o=JSON.stringify(n)),r.dragDataTypes)for(s=0;s<r.dragDataTypes.length;s++)e.setData(r.dragDataTypes[s],o);e.setData(a._DND_INTERNAL_DT,"0"),r.pureReorder&&e.setData(a._DND_INTERNAL_DT_REORDER,"0")},i.TreeDndContext.prototype._setDragImage=function(e,t){var i,n,o,s,r,a=t.length;if(1!==a){for(i=$("<div></div>"),n=$("<ul style='padding:0px;margin:0;'></ul>"),i.append(n),r=0;r<a;r++)(s=t[r].cloneNode(!0)).style.marginLeft=0,s.style.paddingLeft=0,n.append(s);o=i[0],document.body.appendChild(o),o.style.position="absolute",o.style.top="-"+2*i.height()+"px",o.style.right="0",this._dragImg=o,e.setDragImage(o,0,0)}else this._dragImg=null},i.TreeDndContext.prototype._isDtType=function(e,t){var i,n=e.types,o=n.length;for(i=0;i<o;i++)if(t==n[i])return!0;return!1},i.TreeDndContext.prototype._isDtAcceptDataTypes=function(e){var t,i=this._dnd.dropDataTypes,n=!1;if(i){for(n=!(i.length>0),t=0;t<i.length;t++)if(this._isDtType(e,i[t])){n=!0;break}}else n=!0;return n},i.TreeDndContext.prototype._checkAddedDataTypes=function(e){var t,n,o=e.types,s=o&&o.length?o.length:0,r=i.TreeDndContext,a=!1;for(n=0;n<s;n++)if((t=o[n])!=r._DND_INTERNAL_DT&&t!=r._DND_INTERNAL_DT_REORDER){a=!0;break}return a},i.TreeDndContext.prototype._clearDropClasses=function(e){var t=i.TreeDndContext;e&&e.removeClass(t._OJ_VALID_DROP).removeClass(t._OJ_INVALID_DROP).removeClass(t._OJ_ACTIVE_DROP)},i.TreeDndContext.prototype._getDraggedItemArray=function(e){var t=[];return e&&e.each(function(){t.push(this)}),t},i.TreeDndContext.prototype._reset=function(){var e={};this._dnd=e,e.reorder=!1,e.pureReorder=!1,e.foreign=!1,e.dragStarted=!1,e.nodeDraggedId=null,e.nodeLastEnter=null,e.fnDragStart=null,e.fnDragEnd=null,e.fnDrag=null,e.fnDragEnter=null,e.fnDragOver=null,e.fnDragLeave=null,e.fnDragDrop=null,e.dragFromEnabled=!1,e.dropToEnabled=!1,e.dragStartCallback=null,e.dragDragCallback=null,e.dragDragEndCallback=null,e.dropDragEnterCallback=null,e.dropDragOverCallback=null,e.dropDragLeaveCallback=null,e.dragDropCallback=null,e.dropDataTypes=null,e.after=!1,e.inside=!1,e.before=!1,e.off=!1,e.prepared=!1,e.openTimerId=!1,e.cof=!1,e.cw=!1,e.ch=!1,e.ml_width=100,e.targ_ml_width=100,e.openTimeoutMs=500,e.vars={},e.vars.o=!1,e.vars.r=!1,e.vars.m=!1,e.vars.ml=!1},i.TreeDndContext.prototype._trace=function(e){this.component._trace(e)},i.TreeDndContext._OJ_DRAGGABLE="oj-draggable",i.TreeDndContext._OJ_DRAG="oj-drag",i.TreeDndContext._OJ_ACTIVE_DROP="oj-active-drop",i.TreeDndContext._OJ_VALID_DROP="oj-valid-drop",i.TreeDndContext._OJ_INVALID_DROP="oj-invalid-drop",i.TreeDndContext._OJ_DROP="oj-drop",i.TreeDndContext._OJT_DROP_MARKER="oj-tree-drop-marker",i.TreeDndContext._OJT_DROP_MARKER_LINE="oj-tree-drop-marker-line",i.TreeDndContext._DND_REORDER="reorder",i.TreeDndContext._DND_DRAG="drag",i.TreeDndContext._DND_DROP="drop",i.TreeDndContext._DND_NODE="node",i.TreeDndContext._DND_DATATYPES="dataTypes",i.TreeDndContext._DND_DRAGSTART_CB="dragStart",i.TreeDndContext._DND_DRAGDRAG_CB="drag",i.TreeDndContext._DND_DRAGEND_CB="dragEnd",i.TreeDndContext._DND_DROPDRAGENTER_CB="dragEnter",i.TreeDndContext._DND_DROPDRAGOVER_CB="dragOver",i.TreeDndContext._DND_DROPDRAGLEAVE_CB="dragLeave",i.TreeDndContext._DND_DROPDROP_CB="drop",i.TreeDndContext._DND_INTERNAL_DT="_ojtree",i.TreeDndContext._DND_INTERNAL_DT_REORDER="_ojtreereorder",zt._OJ_EXPANDED="oj-expanded",zt._OJ_COLLAPSED="oj-collapsed",zt._OJ_HOVER="oj-hover",zt._OJ_SELECTED="oj-selected",zt._OJ_DISABLED="oj-disabled",zt._OJ_DEFAULT="oj-default",zt._OJ_TEMPNODE="oj-treenode-temp",function(){var e,t,n,o="oj-tree-leaf",s="oj-tree-icon",r="oj-tree-node-icon",a="oj-tree-loading",l="oj-tree-icon oj-tree-disclosure-icon oj-component-icon oj-clickable-icon-nocontext oj-default",u="oj-tree-children",h={cut:"ojtreecut",copy:"ojtreecopy",paste:"ojtreepaste","paste-after":"ojtreepasteafter","paste-before":"ojtreepastebefore",remove:"ojtreeremove",rename:"ojtreerename"},d={cut:"labelCut",copy:"labelCopy",paste:"labelPaste","paste-after":"labelPasteAfter","paste-before":"labelPasteBefore",remove:"labelRemove",rename:"labelRename"},c=["id","title","class","role","draggable","style"];$(function(){/msie/.test(navigator.userAgent.toLowerCase())?(t=$('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),n=$('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),e=t.width()-n.width(),t.add(n).remove()):(t=$("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1e3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200}),e=100-t.width(),t.parent().remove())});var p=[];function _(e){var t="";i.DomUtils.isMetaKeyPressed(e)?t+="ctrl+":e.shiftKey&&(t+="shift+");var n=e.which;switch(n){case 32:t+="space";break;case 37:t+="left";break;case 38:t+="up";break;case 39:t+="right";break;case 40:t+="down";break;case 46:t+="del";break;case 33:t+="pgup";break;case 34:t+="pgdn";break;case 35:t+="end";break;case 36:t+="home";break;case 56:t="*";break;case 113:case 121:t+="f"+("1"-(112-n))}if(0===t.length||"shift+"==t||"ctrl+"==t)return!0;var o=null;return $.each(p,function(i,n){if(n._this._data.ui.focused)return n._this._data.ui.touchEvent=!1,"shift+f10"==t?(n._this._data.menu.activeNode=n._this._data.ui.hovered,n._this._data.menu.activeNode||(n._this._data.menu.activeNode=n._this._data.ui.lastSelected)):n._handler[t]&&(e.preventDefault(),o=n._handler[t].call(n._this,e)),!1}),null!=o?o:void 0}function m(e,t){var i=!1,n=!0;if(e.str)return e.title&&(i=$("style[id='"+e.title+"-stylesheet']")[0]),i?n=!1:((i=document.createElement("style")).setAttribute("type","text/css"),e.title&&i.setAttribute("id",e.title+"-stylesheet")),i.styleSheet?n?(document.getElementsByTagName("head")[0].appendChild(i),i.styleSheet.cssText=e.str):i.styleSheet.cssText=i.styleSheet.cssText+" "+e.str:(i.appendChild(document.createTextNode(e.str)),document.getElementsByTagName("head")[0].appendChild(i)),i.sheet||i.styleSheet}var g=-1;i.__registerWidget("oj.ojTree",$.oj.baseComponent,{widgetEventPrefix:"oj",defaultElement:"<div>",options:{dnd:{reorder:"disable"},expandParents:!1,initExpanded:null,initLoaded:[],selection:[],selectionMode:"single",selectedParentCollapse:!1,selectedParentExpand:!0,selectPrevOnDelete:!1,data:null,emptyText:null,icons:!0,types:null,before:null,collapse:null,create:null,collapseAll:null,cut:null,dehover:null,remove:null,destroy:null,expand:null,expandAll:null,hover:null,loaded:null,move:null,paste:null,refresh:null,rename:null},collapse:function(e,t){var i=(t=t||!1)?0:this._animDuration;if(!(e=this._getNode(e)).length||-1===e||!e.hasClass(zt._OJ_EXPANDED)||this._data.core.locked||e.hasClass(zt._OJ_DISABLED))return!1;var n=this._emitEvent({obj:e,func:"collapse"},"before");("boolean"!=typeof n||n)&&(e.removeClass(zt._OJ_EXPANDED).addClass(zt._OJ_COLLAPSED).attr("aria-expanded","false"),$(e.children()[0]).removeClass(zt._OJ_SELECTED).addClass("oj-default"),this._busyStack.push({op:"c",id:e.attr("id")}),this._addBusyState("Tree (id='"+this._elemId+"') : node id='"+e.attr("id")+"' is animating."),!t&&i?this._slide(e,!0):this._transitionEnd($(e.children("UL")[0]),e))},_slide:function(e,t){var i,n,o;i=$(e.children("ul")),this._isSafari?i[0].addEventListener("webkitTransitionEnd",this._proxyTransitionEndHandler):i[0].addEventListener("transitionend",this._proxyTransitionEndHandler),t?(n=i[0].offsetHeight,o=0):(n=0,o=this._getElemHeight(i[0])),i.css("max-height",n+"px"),this._overflow=i.css("overflow"),i.css("overflow","hidden"),t||(i[0].style.display="block"),setTimeout(function(){i.addClass("oj-tree-transition"),i.css("max-height",o+"px")},20)},_getElemHeight:function(e){var t,i,n,o,s=$("<div style='position: absolute'>");return t=e.parentNode,i=e.nextSibling,t.removeChild(e),o=e.style.display,e.style.display="block",s.append(e),this._$container[0].appendChild(s[0]),n=e.offsetHeight||e.scrollHeight,e.style.display=o,this._$container[0].removeChild(s[0]),s[0].removeChild(e),i?t.insertBefore(e,i):t.appendChild(e),n+10},_transitionEndHandler:function(e){var t=$(e.target),i=t.closest("li");this._isSafari?t[0].removeEventListener("webkitTransitionEnd",this._proxyTransitionEndHandler):t[0].removeEventListener("transitionend",this._proxyTransitionEndHandler),t.removeClass("oj-tree-transition"),this._transitionEnd(t,i)},_transitionEnd:function(e,t){var i;t.hasClass(zt._OJ_COLLAPSED)?(i="c",e[0].style.display="none",e.css("max-height",""),this._emitEvent({obj:t},"collapse"),this.after_close(t)):(i="e",e[0].style.display="block",e.css("max-height",""),this._emitEvent({obj:t},"expand")),this._overflow&&(e.css("overflow",this._overflow),this._overflow=null),this._removeFromBusyStack(i,t.attr("id")),this._resolveIfBusyStackEmpty()},collapseAll:function(e,t){var i=e||-1,n=this;if(!this._data.core.locked&&((e=e?this._getNode(e):this._$container)&&-1!==i&&(i=e),e&&-1!==i||(e=this._$container_ul),!e.hasClass(zt._OJ_DISABLED))){var o;-1!==i&&this.isExpanded(e)&&(o=e[0]);var s=e.find("li.oj-expanded");s.length&&s.each(function(){n.collapse(this,!t)}),o&&(this.collapse(o,!t),s.splice(0,0,o)),s.length&&this._emitEvent({obj:s,targ:i},"collapseAll")}},expand:function(e,t){this._expand(e,!1,t)},expanded:function(e,t){var i,n,o=this;if(e&&"array"===$.type(e))return this._data.core.locked?null:(n=e.length,$.each(e,function(e,i){o._expand(i,!1,t)}),null);n=(e=this._$container_ul.find("li.oj-expanded")).length,i=[];for(var s=0;s<n;s++)i.push(e[s]);return $(i)},expandAll:function(e,t){this._expandAll(e,t)},toggleExpand:function(e,t){if((e=this._getNode(e))&&e.length&&-1!==e&&!e.hasClass(zt._OJ_DISABLED)&&!this._data.core.locked)return e.hasClass(zt._OJ_COLLAPSED)?this.expand(e,t):e.hasClass(zt._OJ_EXPANDED)?this.collapse(e,t):void 0},deselect:function(e){var t=this.options.selection.slice(0);this._deselect(e),this._fireOptionChangeEvent("selection",t,null,null)},deselectAll:function(e){if(!this._data.core.locked){var t=this.options.selection.slice(0);this._deselectAll(e),this._fireOptionChangeEvent("selection",t,null,null)}},select:function(e){this._select(e,!0)},toggleSelect:function(e){return!!(e=this._getNode(e)).length&&(!e.hasClass(zt._OJ_DISABLED)&&!this._data.core.locked&&(this._isSelected(e)?this.deselect(e):this._select(e,!0),!0))},isCollapsed:function(e){return(e=this._getNode(e))&&-1!==e&&e.hasClass(zt._OJ_COLLAPSED)},isExpanded:function(e){return(e=this._getNode(e))&&-1!==e&&e.hasClass(zt._OJ_EXPANDED)},isLeaf:function(e){return this._isLeaf(e)},isSelected:function(e){return this._isSelected(e)},create:function(e,t,i){var n,o,s;if(!(o=$.isArray(i))||1==i.length)return n=this._createNode(e,t,o?i[0]:i),this._getDndContext()._dndFinishSelection(n),n;if(o=[],"before"!=t)for(s=i.length-1;s>=0;s--)n=this._createNode(e,t,i[s]),o.unshift(n[0]),this._getDndContext()._dndFinishSelection(n);else for(s=0;s<i.length;s++)n=this._createNode(e,t,i[s]),o.push(n[0]),this._getDndContext()._dndFinishSelection(n);return $(o)},remove:function(e){if(!(e=this._getNode(e)).length||e.hasClass(zt._OJ_DISABLED)||this._data.core.locked)return!1;var t=this._emitEvent({obj:e,func:"remove"},"before");if("boolean"==typeof t&&!t)return!1;this.__rollback();var i=this._getParent(e),n=$([]),s=this,r=this._getPrev(e);return e.each(function(){n=n.add(s._getPrev(this))}),e=e.detach(),-1!==i&&0===i.find("> ul > li").length&&i.removeClass("oj-expanded oj-collapsed").addClass(o).removeAttr("aria-expanded"),this._cleanNode(i),this._emitEvent({obj:e,prev:r,parent:i},"remove"),e},getText:function(e){return!!(e=this._getNode(e)).length&&(e=(e=e.children("a:eq(0)")).find("span:eq(0)"))[0].textContent},rename:function(e,t){t=this._escapeHtml(t),this._renameNode(e,t)},hover:function(e){this._hover(e)},dehover:function(){this._dehover()},getPath:function(e,t){var i=[],n=this;return!(-1===(e=this._getNode(e))||!e||!e.length)&&(e.parentsUntil(".oj-tree","li").each(function(){i.push(t?this.id:n.getText(this))}),i.reverse(),i.push(t?e.attr("id"):this.getText(e)),i)},getRoot:function(){return this._$container.children("ul:eq(0)")},refresh:function(e){this._super(),this._data.core.locked||this._refresh(e||-1)},move:function(e,t,i,n){this._moveNode(e,t,i,n)},getType:function(e){return this._getType(e)},setType:function(e,t){return this._setType(e,t)},getNodeBySubId:function(e){return e?this._processSubId(e):this.element?this.element[0]:null},getSubIdByNode:function(e){return this._getSubIdFromNodeElem(e)},getContextByNode:function(e){var t;return e=null==e||null==e?0:e,(t=-1!=(e=this._getNode(e))&&e.length>0)||-1==e?{subId:t?"oj-tree-node":"oj-tree",item:t?e[0]:null,node:!!t&&e,leaf:!!t&&this._isLeaf(e)}:null},getParent:function(e){var t=this._getParent(e);return t&&t.length>0?t:null},getPrevSibling:function(e){var t=this._getPrev(e,!0);return t&&t.length>0?t:null},getNextSibling:function(e){var t=this._getNext(e,!0);return t&&t.length>0?t:null},getChildren:function(e){e=e||-1;var t=this._getChildren(e);return(t=t&&t.length?t.not("."+zt._OJ_TEMPNODE):t)&&t.length>0?t:null},scrollIntoView:function(e,t,i){var n,o;if(e?(n=e.node,n=this._getNode(n)):n=-1,-1==n&&(n=this._$container.find("> ul > li:first-child")),n&&n.length)return o="top"==t,(i=!!i)&&(this._$container_ul.focus(),this.hover(n)),n[0].scrollIntoView(o),this},_ComponentCreate:function(){if(this._super(),this._index=this._newIndex(),this._elemId=this.element.attr("id"),void 0===this._elemId&&(this._elemId="oj-tree-"+this._getIndex(),this.element.attr("id",this._elemId)),this._$container=this.element,this._$container_ul=null,this._data={},this._tds=null,this._isRtl="rtl"===this._GetReadingDirection(),this._isTouch=i.DomUtils.isTouchSupported(),this._initTree(),this._animDuration=this._getAnimDuration(),this._animDuration){var e=i.AgentUtils.getAgentInfo();this._isSafari=e.browser===i.AgentUtils.BROWSER.SAFARI,this._proxyTransitionEndHandler=this._transitionEndHandler.bind(this)}this._busyStack=[],this._start()},_destroy:function(){this._resolveBusyContext(),this._clearTree(),this._data.html.markup_ul&&(this._unTransformElemIds(this._data.html.markup_ul),this._$container.append(this._data.html.markup_ul),this._data.html.markup_div.remove(),this._data.html.markup_div=!1,this._data.html.useExistingMarkup=!1),this._data.ds.type=0,this._super()},_setOption:function(e,t,i){var n;if("selection"===e)t="string"==typeof t?[t]:t&&t.length?t:[],this._data.core.suppressSelectEvent=!0,this._handleSelectionOptionChange(t),this._data.core.suppressSelectEvent=!1,t=this._getSelected();else if("selectionMode"===e)"none"===t?n=0:"single"===t?n=1:"multiple"===t?n=-1:(n=0,t="none"),n!=this._data.core.selectMode&&(this._data.core.selectMode=n);else if("icons"===e)"boolean"==$.type(t)&&t!=this._data.themes.icons&&(this._data.themes.icons=t,t?this._showIcons():this._hideIcons());else if("contextMenu"===e)this._clearMenu(),t&&(this._initMenuOpts(),this._initMenu(t));else if("disabled"===e)this._handleDisabledChanged(t);else{if("data"===e)return this._super(e,t,i),this._initDSOpts(),this._initDataSource(),this._initExpandedOpts(),void this._loadNodes();if("dnd"===e)return this._super(e,t,i),void this._getDndContext().handleDnDOptionChange(t);"emptyText"==e&&(t=this._escapeHtml(t))}this._super(e,t,i)},_CompareOptionValues:function(e,t,i){return"selection"===e?this._compareSelectionValues(t,i):this._superApply(arguments)},_compareSelectionValues:function(e,t){var i,n,o,s,r,a=!1,l=!1;if((s=e&&e.length?e.length:0)!==(r=t&&t.length?t.length:0))a=!0;else if(0==s&&0===r)a=!1;else for(i=0;i<s;i++){for(o=$(e[i]).attr("id"),l=!1,n=0;n<r;n++)if(o==$(t[n]).attr("id")){l=!0;break}if(!l){a=!0;break}}return!a},_addBusyState:function(e){if(!this._animationResolve){var t=i.Context.getContext(this.element[0]).getBusyContext();this._animationResolve=t.addBusyState({description:e})}},_resolveBusyContext:function(){this._animationResolve&&(this._animationResolve(),this._animationResolve=null)},_isOnBusyStack:function(e,t){var i,n=this._busyStack,o=n.length,s=-1;for(i=0;i<o;i++)if(n[i].id===t&&n[i].op===e){s=i;break}return s},_removeFromBusyStack:function(e,t){var i=this._isOnBusyStack(e,t);return i>=0&&this._busyStack.splice(i,1),i},_resolveIfBusyStackEmpty:function(){0===this._busyStack.length&&this._resolveBusyContext()},_clearTree:function(){this._TreeDndContext&&(this._TreeDndContext._closedown(),this._TreeDndContext=null);var e=this._getIndex();this._$container.unbind(".oj-tree").undelegate(".oj-tree").removeData("oj-tree-instance-id").find("[class^='oj-tree']").addBack().attr("class",function(){return this.className.replace(/oj-tree[^ ]*|$/gi,"")});var t,i=this._$container.attr("class");0===(i=i.trim()).length&&this._$container.removeAttr("class"),t=this._$container_ul,$.each(p,function(e){if(p[e]._selector===t)return $(t).off("keydown"),p[e]=null,p.splice(e,1),!1}),$(document).unbind(".oj-tree-"+e).undelegate(".oj-tree-"+e),this._$container_ul.remove(),this._$container_ul=null},_getNode:function(e,t){if(null==e)return t?this._data.ui.selected:this._data.ui.lastSelected;var i=$(e,this._getContainer());return i.is(".oj-tree")||-1===e?-1:!!(i=i.closest("li",this._getContainer())).length&&i},_getPrev:function(e,t){if(-1===(e=this._getNode(e)))return this._$container.find("> ul > li:last-child");if(!e.length)return!1;if(t)return e.prevAll("li").length>0&&e.prevAll("li:eq(0)");if(e.prev("li").length){for(e=e.prev("li").eq(0);e.hasClass(zt._OJ_EXPANDED);)e=e.children("ul:eq(0)").children("li:last");return e}var i=e.parentsUntil(".oj-tree","li:eq(0)");return!!i.length&&i},_getNext:function(e,t){return-1===(e=this._getNode(e))?this._$container.find("> ul > li:first-child"):!!e.length&&(t?e.nextAll("li").length>0&&e.nextAll("li:eq(0)"):e.hasClass(zt._OJ_EXPANDED)?e.find("li:eq(0)"):e.nextAll("li").length>0?e.nextAll("li:eq(0)"):e.parentsUntil(".oj-tree","li").next("li").eq(0))},_getParent:function(e){if(-1==(e=this._getNode(e))||!e.length)return!1;var t=e.parentsUntil(".oj-tree","li:eq(0)");return t.length?t:-1},_getChildren:function(e){return-1===(e=this._getNode(e))?this._$container.children("ul:eq(0)").children("li"):!!e.length&&e.children("ul:eq(0)").children("li")},_isLeaf:function(e){return(e=this._getNode(e))&&-1!==e&&e.hasClass(o)},_getNodeElem:function(e){var t=this._$container_ul.find(e),i=!1;return t&&t.length&&t.length>0&&$(t).is("li")&&(i=t),i},_isSelected:function(e){var t=this._getNode(e),i=!1;return t&&t.length&&this._data.ui.selected&&(i=this._data.ui.selected.index(t)>=0),i},_reference:function(e,t){var n=e.parents("div").eq(0),o=i.Components.__GetWidgetConstructor(n);return o&&t&&o("getCI",t),this},getCI:function(e){e.ot=this},_applyDefaults:function(e,t){null!=e&&null!=t&&$.each(t,function(t,i){null==e[t]&&(e[t]=i)})},_handleDisabledChanged:function(e){var t;void 0!==e&&((t=this._$container_ul.hasClass(zt._OJ_DISABLED))||(t=!1),t!=e&&(e?(this._$container_ul.addClass(zt._OJ_DISABLED),this._$container_ul.prop("disabled",!0)):(this._$container_ul.removeClass(zt._OJ_DISABLED),this._$container_ul.prop("disabled",!1)),this._treeDisable(e)))},_treeDisable:function(e){(e=e||!1)?(this._data.core.locked=!0,this._data.ui.opacity=this._$container.children("ul").css("opacity"),this._$container_ul.addClass(zt._OJ_DISABLED).css("opacity","0.9")):(this._data.core.locked=!1,this._$container_ul.removeClass(zt._OJ_DISABLED).css("opacity",this._data.ui.opacity))},_isTreeDisabled:function(){return this._data.core.locked},_handleSelectionOptionChange:function(e){var t,i,n,o,s=e.slice(0),r=[],a=this;$.grep(s,function(e,i){return!!(t=a._getNodeElem(e))&&(r.push(t),s[i]=t[0],!0)});var l=this._getSelected();$.each(l,function(e,t){for(o=r.length,i=$(t).attr("id"),n=!1,e=0;e<o;e++)if(i==r[e].attr("id")){n=!0;break}n||a._deselect(t)}),this._setSelected(r,null)},_prepare_move:function(e,t,i,n,o){var s={};if(t=-1!==t&&t?this._getNode(t):-1,this._reference(e,s),s.rt=this,s.o=s.ot._getNode(e),s.r=t,s.p=void 0===i||!1===i?"last":i,o||!this._data.core.prepMoveBlk.o||this._data.core.prepMoveBlk.o[0]!==s.o[0]||this._data.core.prepMoveBlk.r[0]!==s.r[0]||this._data.core.prepMoveBlk.p!==s.p){if(-1!==s.r&&s.r){if(!/^(before|after)$/.test(s.p)&&!this._is_loaded(s.r))return this._load_node(s.r,function(){this._prepare_move(e,t,i,n,!0)});switch(s.p){case"before":s.cp=s.r.index(),s.cr=s.rt._getParent(s.r);break;case"after":s.cp=s.r.index()+1,s.cr=s.rt._getParent(s.r);break;case"inside":case"first":s.cp=0,s.cr=s.r;break;case"last":s.cp=s.r.find(" > ul > li").length,s.cr=s.r;break;default:s.cp=s.p,s.cr=s.r}}else switch(s.cr=-1,s.p){case"first":case"before":case"inside":s.cp=0;break;case"after":case"last":s.cp=s.rt._$container.find(" > ul > li").length;break;default:s.cp=s.p}s.np=-1==s.cr?s.rt._getContainer():s.cr,s.op=s.ot._getParent(s.o),s.cop=s.o.index(),-1===s.op&&(s.op=s.ot?s.ot._$container:this._$container),!/^(before|after)$/.test(s.p)&&s.op&&s.np&&s.op[0]===s.np[0]&&s.o.index()<s.cp&&s.cp++,s.or=s.np.find(" > ul > li:nth-child("+(s.cp+1)+")"),this._data.core.prepMoveBlk=s,n&&n.call(this,this._data.core.prepMoveBlk,"prepare_move")}else n&&n.call(this,this._data.core.prepMoveBlk)},_checkMove:function(){var e,t=this._data.core.prepMoveBlk,i=!0;if(e=-1===t.r?this._$container:t.r,!t||!t.o||t.or[0]===t.o[0])return!1;if(!t.r)return!1;if(!t.cy){if(t.op&&t.np&&t.op[0]===t.np[0]&&t.cp-1===t.o.index())return!1;t.o.each(function(){if(-1!==e.parentsUntil(".oj-tree","li").addBack().index(this))return i=!1,!1})}return i},_renameNode:function(e,t){var i;if(e=this._getNode(e),this.__rollback(),i=this.getText(e),e&&e.length){var n=this._emitEvent({obj:e,func:"rename",title:t,prevTitle:i},"before");if("boolean"==typeof n&&!n)return}e&&e.length&&this._set_text.apply(this,Array.prototype.slice.call(arguments))&&this._emitEvent({obj:e,title:t,prevTitle:i},"rename")},_moveNode:function(e,t,i,n,s,r){if(!s){e=this._getNode(e);var a=this._emitEvent({obj:e,func:"move"},"before");if("boolean"==typeof a&&!a)return!1}if(!(e.hasClass&&e.hasClass(zt._OJ_DISABLED)||this._data.core.locked)){if(!s)return this._prepare_move(e,t,i,function(e){e.ot===e.rt||e.cy||e.ot.deselect(e.o),this._moveNode(e,!1,!1,n,!0,r)});if(n&&(this._data.core.prepMoveBlk.cy=!0),!r&&!this._checkMove())return!1;this.__rollback();var l=!1;n?(l=e.o.clone(!0)).find("*[id]").addBack().each(function(){this.id&&(this.id="copy_"+this.id)}):l=e.o,e.or.length?e.or.before(l):(e.np.children("ul").length||$("<ul />").appendTo(e.np),e.np.children("ul:eq(0)").append(l));try{e.ot._cleanNode(e.op),e.rt._cleanNode(e.np),e.op.find("> ul > li").length||e.op.removeClass("oj-expanded oj-collapsed").removeAttr("aria-expanded").addClass(o).children("ul").remove()}catch(e){}n&&(this._data.core.prepMoveBlk.cy=!0,this._data.core.prepMoveBlk.oc=l);var u=$.extend(!0,{},this._data.core.prepMoveBlk);return u.obj=e.o,this._emitEvent(u,"move"),this._data.core.prepMoveBlk}},_getMoveBlk:function(){return this._data.crrm.prepMoveBlk},_getType:function(e){var t=null;return this.options.types&&(t=this._getNode(e)),!(!t||!t.length)&&(t.attr(this.options.types.attr)||"default")},_setType:function(e,t){var i,n,o=this.options.types,s=!1;return e=this._getNode(e),o&&e&&-1!=e&&e.length&&t&&(i=o.attr,n=o.types,i&&n&&n[t]&&(e.attr(i,t),e.addClass("oj-tree-type"),s=!0)),s},_canTypedNodeMove:function(e,t){var i,n,o=!0;return(i=this.options.types)&&(i=i.types)&&(i[n=this._getType(e)]&&void 0!==i[n][t]||i.default&&void 0!==i.default[t])&&!1===this._check(t,e)&&(o=!1),o},_check:function(e,t,i){t=this._getNode(t);var n=!1,o=this._getType(t),s=this._getOptions().types,r=!1;if(-1===t){if(!s[e])return;n=s[e]}else{if(!1===o)return;(r=!!this._data.types.defaults.useData&&t.data("oj-tree"))&&r.types&&void 0!==r.types[e]?n=r.types[e]:s.types[o]&&void 0!==s.types[o][e]?n=s.types[o][e]:s.types.default&&void 0!==s.types.default[e]&&(n=s.types.default[e])}return $.isFunction(n)&&(n=n.call(this,t)),n},_cleanNode:function(e){var t,n,a,u=this._getDndContext(),h=i.TreeDndContext;u.isDragEnabled()&&(t=h._OJ_DRAGGABLE,n="draggable",a=!0),u.isDropEnabled()&&(t+=" "+h._OJ_VALID_DROP),(e=(e=e&&-1!=e?$(e):this._$container_ul).is("li")?e.find("li").addBack():e.find("li")).removeClass("oj-tree-last").addClass("oj-tree-node").addClass(t).attr(n,a).filter("li:last-child").addClass("oj-tree-last").end().filter(":has(li)").not(".oj-expanded").removeClass(o).addClass(zt._OJ_COLLAPSED).attr("aria-expanded","false"),e.not(".oj-expanded, .oj-collapsed").addClass(o).children("ul").remove();var d,c,p=!!this.options.types&&this.options.types.attr;e.find("li");$.each(e,function(e,t){c=$(this),(d=c.find("> ins")).length>1&&(d=$(d[0])),c.hasClass(o)?(d.removeClass(l),d.addClass(s)):(d.addClass(l),d.removeClass(r)),p&&c.attr(p)&&c.addClass("oj-tree-type")})},_createNode:function(e,t,i,n,o){if(e=e||-1,-1!==(e=this._getNode(e))&&!e.length)return null;var s,r;this.options;if(t=void 0===t?"last":t,!o&&!this._is_loaded(e))return this._load_node(e,function(){this._createNode(e,t,i,n,!0)}),null;if(this.__rollback(),!(i=this._parseJson(i)))return null;switch(i=i.children(),s=$(i[0]),-1===e&&(e=this._$container,"before"===t&&(t="first"),"after"===t&&(t="last")),t){case"before":e.before(s),r=this._getParent(e);break;case"after":e.after(s),r=this._getParent(e);break;case"inside":case"first":e.children("ul").length||e.append("<ul />"),e.children("ul").prepend(s),r=e;break;case"last":e.children("ul").length||e.append("<ul />"),e.children("ul").append(s),r=e;break;default:e.children("ul").length||e.append("<ul />"),t||(t=0),(r=e.children("ul").children("li").eq(t)).length?r.before(s):e.children("ul").append(s),r=e}return-1!==r&&r.get(0)!==this._$container.get(0)||(r=-1),this._cleanNode(r),this._emitEvent({obj:s,parent:r},"create"),n&&n.call(this,s),this._$container_ul[0].childNodes.length>1&&this._$container_ul.find("."+zt._OJ_TEMPNODE).remove(),s},_expand:function(e,t,i){if(!(e=this._getNode(e))||!e.length)return!1;if(i=i||!1,!e.hasClass(zt._OJ_DISABLED)&&!this._data.core.locked){if(!e.hasClass(zt._OJ_COLLAPSED))return t&&t.call(),!1;var n=this._emitEvent({obj:e,func:"expand"},"before");if("boolean"!=typeof n||n){var o=i?0:this._animDuration,s=this;this._is_loaded(e)?(this.options.expandParents&&e.parentsUntil(".oj-tree",".oj-collapsed").each(function(){s._expand(this,!1,!0)}),e.removeClass(zt._OJ_COLLAPSED).addClass(zt._OJ_EXPANDED).attr("aria-expanded","true").children("a").removeClass(a),$(e.children()[0]).removeClass(zt._OJ_SELECTED).addClass("oj-default"),this._busyStack.push({op:"e",id:e.attr("id")}),this._addBusyState("Tree (id='"+this._elemId+"') : node id='"+e.attr("id")+"' is animating."),!i&&o?this._slide(e,!1):this._transitionEnd($(e.children("UL")[0]),e),t&&t.call()):(e.children("a").addClass(a),this._load_node(e,function(){s._expand(e,t,i)},t))}}},_expandAll:function(e,t,i){var n=e||-1;(e=e?this._getNode(e):-1)&&-1!==e?n=e:e=this._$container_ul,i?e=e.find("li.oj-collapsed"):(i=e,e=e.is(".oj-collapsed")?e.find("li.oj-collapsed").addBack():e.find("li.oj-collapsed"));var o=this;e.each(function(){var e=this;o._is_loaded(this)?o._expand(this,!1,!t):o.expand(this,function(){o._expandAll(e,t,i)},!t)}),0===i.find("li.oj-collapsed").length&&this._emitEvent({obj:e,targ:n},"expandAll")},_select:function(e,t,n){var o=this._data.core,s=this._data.ui,r=o.selectMode;if(0==r)return!1;if(-1==(e=this._getNode(e))||!e||!e.length)return!1;if(e.hasClass(zt._OJ_DISABLED)||o.locked)return!1;n&&"touchend"==n.type||(s.touchEvent=!1);var a=this._isSelected(e);if(!a){var l=this._emitEvent({obj:e,func:"select"},"before");if("boolean"==typeof l&&!l)return!1}var u=this.options.selection.slice(0),h=this.options,d=s.defaults.selectMultipleModifier,c=s.defaults.selectRangeModifier,p=s.defaults.disableSelectingChildren,_="on"==d||!1!==d&&n&&i.DomUtils.isMetaKeyPressed(n),m=!1!==c&&n&&n[c+"Key"]&&s.lastSelected&&this._data.ui.lastSelected[0]!==e[0]&&s.lastSelected.parent()[0]===e.parent()[0],g=!0,f=this;if(t){if(p&&_&&(e.parentsUntil(".oj-tree","li").children("a.oj-selected").length||e.children("ul").find("a.oj-selected:eq(0)").length))return!1;switch(g=!1,!0){case m:s.lastSelected.addClass("oj-tree-last-selected"),e=e[e.index()<s.lastSelected.index()?"nextUntil":"prevUntil"](".oj-tree-last-selected").addBack(),-1==r||e.length<r?(s.lastSelected.removeClass("oj-tree-last-selected"),s.selected.each(function(){this!==s.lastSelected[0]&&f._deselect(this)}),a=!1,g=!0):g=!1;break;case s.touchEvent&&-1==r:s.touchEvent=!1,this.toggleSelect(e),g=!1;break;case a&&!_:if(!n)break;this._deselectAll(),s.spacebar||(a=!1),g=!0;break;case!a&&!_:n?s.selected&&1==s.selected.length?this._deselect(s.selected):this._deselectAll(s.selected):1===r?this._deselect(s.selected):r>1&&this._deselectAll(),g=!0;break;case a&&_:this.deselect(e);break;case!a&&_:(-1==r||s.selected.length+1<=r)&&(g=!0)}}var v=!1;return g&&!a&&(m||(s.lastSelected=e),e.children("a").addClass(zt._OJ_SELECTED),e.attr("aria-selected","true"),v=!0,h.selectedParentExpand&&e.parents(".oj-collapsed").each(function(){f._expand(this,!1,!0)}),s.selected=s.selected.add(e),this._fix_scroll(e.eq(0)),o.suppressSelectEvent||this._fireOptionChangeEvent("selection",u,null,n)),v},_deselect:function(e){if(!(e=this._getNode(e)).length)return!1;e.hasClass(zt._OJ_DISABLED)||this._data.core.locked||this._isSelected(e)&&(e.children("a").removeClass(zt._OJ_SELECTED),e.removeAttr("aria-selected"),this._data.ui.selected=this._data.ui.selected.not(e),this._data.ui.lastSelected&&this._data.ui.lastSelected.length&&this._data.ui.lastSelected.get(0)===e.get(0)&&(this._data.ui.lastSelected=this._data.ui.selected.eq(0)))},_deselectAll:function(e){if(!this._data.core.locked){var t=e?$(e).find("a.oj-selected").parent():this._$container.find("a.oj-selected").parent();if(t.not(".oj-disabled"),0!==t.length){var i=this;$.each(t,function(){i._deselect(this)})}}},_setSelected:function(e,t){if(this._data.core.locked)return null;if(e&&e.length>0){var i=this;$.each(e,function(e,n){n&&i._select(n,!0,t)})}},_handleNodeTapClick:function(e){if(e.preventDefault(),e.currentTarget.blur(),!$(e.currentTarget).hasClass(a)){if(this._setFocus(),!this._data.ui.focused){var t=this._getNode(e.currentTarget);t.length>0&&-1!=t&&(this._data.ui.lastHovered=t),this._$container_ul.focus()}this._select(e.currentTarget,!0,e)}this._data.ui.touchEvent=!1},_disclosureHover:function(e,t){if(!(e=$(e)).hasClass(zt._OJ_DISABLED)&&!this._data.core.locked){var i=e.parent(),n=i.hasClass(zt._OJ_EXPANDED),o=i.hasClass(zt._OJ_COLLAPSED);(n||o)&&(t?(e.addClass(zt._OJ_HOVER),e.removeClass("oj-default"),e.removeClass(zt._OJ_SELECTED)):(e.removeClass(zt._OJ_HOVER),e.addClass("oj-default")))}},_hover:function(e){if(!this._data.menu.activeNode&&(e=this._getNode(e)).length&&!e.hasClass(zt._OJ_DISABLED)&&!this._data.core.locked&&!e.hasClass(zt._OJ_HOVER)){var t=this._emitEvent({obj:e,func:"hover"},"before");("boolean"!=typeof t||t)&&(e.hasClass(zt._OJ_HOVER)||this._dehover(),this._data.ui.hovered=e.children("a").addClass(zt._OJ_HOVER).parent(),this._$container_ul.attr("aria-activedescendant",this._data.ui.hovered.attr("id")),this._fix_scroll(e),this._emitEvent({obj:e},"hover"))}},_dehover:function(){if(!this._data.menu.activeNode){var e,t=this._data.ui.hovered;t&&t.length&&(t.hasClass(zt._OJ_DISABLED)||this._data.core.locked||((e=t.find("a.oj-hover")).length||(e=this._$container_ul.find("a.oj-hover")).length)&&(e=e.removeClass(zt._OJ_HOVER).parent(),this._$container_ul.removeAttr("aria-activedescendant"),this._data.ui.hovered=null,null!=t.attr("id")&&this._emitEvent({obj:t},"dehover")))}},_refresh:function(e){this._refresh_core(e)},_refresh_core:function(e){var t=e||-1,i=this;this._save_opened(),this._saveSelected(),e||(e=-1),(e=this._getNode(e))?t=e:e=-1,-1!==e?e.children("UL").remove():(this._$container_ul.empty(),this._processExistingMarkup()),this._load_node(e,function(){i._emitEvent({obj:t},"refresh"),i._reload_nodes(),i._rehover()})},_refresh_ui:function(e){this._saveSelected(),this._refresh_core(e)},after_close:function(e){this._emitEvent({obj:e},"after_close",!0)},_reopen:function(){var e=this;this._data.core.toExpand.length&&$.each(this._data.core.toExpand,function(t,i){e._expand(i,!1,!0)}),this._emitEvent({},"reopen",!0)},_rehover:function(){var e,t=this._data.ui.lastHovered;t&&(e=t.attr("id"))&&(t=this._getNode("#"+e)),this._data.ui.hovered=this._data.ui.lastHovered=t},_getSelected:function(e){var t,i,n,o;for(i=[],o=(t=e?$(e).find("a.oj-selected").parent():this._data.ui.selected).length,n=0;n<o;n++)i.push(t[n]);return i},_set_text:function(e,t){return!!(e=this._getNode(e)).length&&(e=(e=e.children("a:eq(0)")).find("span:eq(0)"),this._emitEvent({obj:e,name:t},"set_text",!0),e[0].textContent=t)},_loadNodes:function(){0!==this._data.ds.type&&-1!==this._data.ds.type?this._load_node(-1,function(){this._loaded(),this._reload_nodes()}):(this._applyEmptyText(),this._loaded())},_load_node:function(e,t,i){this._emitEvent({obj:e},"load_node",!0)},_is_loaded:function(e){return!0},_load_node_DS:function(e,t,i){var n=this;this._load_node_tree(e,function(){n._emitEvent({obj:n._getNode(e)},"load_node",!0),t.call(this)},i)},_is_loaded_DS:function(e){return-1===(e=this._getNode(e))||!e||e.is(".oj-expanded, .oj-tree-leaf")||e.children("ul").children("li").length>0},_refresh_DS:function(e){return(e=this._getNode(e))&&-1!==e&&e.removeData(u),this._refresh_ui(e)},_load_node_J:function(e,t,i){var n=this;this._loadNodeJson(e,function(){n._emitEvent({obj:n._getNode(e)},"load_node",!0),t.call(this)},i)},_is_loaded_J:function(e){var t=this.options.data;return-1==(e=this._getNode(e))||!e||!t.ajax&&!this._data.ds.progressiveRender&&!$.isFunction(t.data)||e.is(".oj-expanded, .oj-tree-leaf")||e.children("ul").children("li").length>0},_load_node_H:function(e,t,i){var n=this;this._loadNodeHtml(e,function(){n._emitEvent({obj:n._getNode(e)},"load_node",!0),t.call(this)},i)},_is_loaded_H:function(e){var t=this.options.data,i=null,n=null;return t&&(i=t.data||null,n=t.ajax||null),-1==(e=this._getNode(e))||!e||!n&&!$.isFunction(i)||e.is(".oj-expanded, .oj-tree-leaf")||e.children("ul").children("li").length>0},_reselect:function(){var e=this,t=this._data.ui.toSelect;(t=$.map($.makeArray(t),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}))&&t.length&&(this.options.selection.length=0,this._data.ui.selected.length=$()),$.each(t,function(t,i){i&&"#"!==i&&e.select(i)}),this._data.ui.selected=this._data.ui.selected.filter(function(){return this.parentNode})},_saveSelected:function(){var e=this._data.ui;e.toSelect=[],e.selected.each(function(){this.id&&e.toSelect.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))})},rollback:function(e){e&&($.isArray(e)||(e=[e]))},get_rollback:function(){return this._emitEvent(null,"get_rollback",!0),{i:this._getIndex(),h:this._$container.children("ul").clone(!0),d:this.data}},_load_node_tree:function(e,t,i){var n=e&&-1!=e?e[0].id:e||-1,o=this._JsonDSToJson(n,e);if(o.success){var s,r=!e||-1===e,l=this.options.data;if(l.data&&!l.ajax||l.data&&l.ajax&&r)r&&((s=this._parseJson(o.js,e))?(this._$container_ul.empty().append(s.children()),this._cleanNode()):this._data.ds.correctState&&this._$container_ul.empty()),t&&t.call(this);else if(!l.data&&l.ajax||l.data&&l.ajax&&!r)if(s=this._parseJson(o.js,e)){if(r){var u=this._$container_ul;u.empty().append(s.children()),u.attr("role","tree").attr("aria-labelledby",this._elemId).attr("tabindex","0").css("outline","none"),-1===this._data.core.selectMode&&u.attr("aria-multiselectable",!0)}else e.append(s).children("a.oj-tree-loading").removeClass(a),e.removeData("oj-tree-is-loading");this._cleanNode(e),t&&t.call(this)}else r?this._data.ds.correctState&&(this._$container_ul.empty(),t&&t.call(this)):(e.children("a.oj-tree-loading").removeClass(a),e.removeData("oj-tree-is-loading"),l.correct_state&&(this._correct_state(e),t&&t.call(this)))}},_JsonDSToJson:function(e,t){var i,n=[],o=this._tds,s={},r={success:!1,js:null};return-1==e&&(e=null,s.start=0),(i=o.getChildCount(e))>0?(s.count=i,o.fetchChildren(e,s,{success:function(e){for(var i,s=e.getCount(),a=0;a<s;a++){t={},(i=e.getData(a))&&(t.attr=i),t.title=e.m_nodes[a].title,i.metadata&&(t.metadata=e.m_nodes[a].metadata);var l=t.attr.id;if(o.getChildCount(l)>0){var u=this._JsonDSToJson(l,t);t.children=u.js}n.push(t)}r.success=!0,r.js=n}.bind(this),error:function(e){r.success=!1}})):r.success=!0,r},_refresh_json:function(e){if(e=this._getNode(e),!this._data.core.locked){var t=!e||-1!==e||!e.length;if(t||!e.hasClass(zt._OJ_DISABLED)){var i=this.options.data.json;return!t&&this._data.ds.progressiveUnload&&($.isFunction(i.data)||i.ajax)&&e.removeData(u),this._refresh_ui(e)}}},_loadNodeJson:function(e,t,i){var n,o=this._getOptions().data,s=function(){},r=function(){},l=o&&o.data||null,h=o&&o.ajax||null;if(!o||l||h||(l=o),(e=this._getNode(e))&&-1!==e&&(this._data.ds.progressiveRender||this._data.ds.progressiveUnload)&&!e.is(".oj-expanded, .oj-tree-leaf")&&0===e.children("ul").children("li").length&&e.data(u))return(n=this._parseJson(e.data(u),e))&&(e.append(n),this._data.ds.progressiveUnload||e.removeData(u)),this._cleanNode(e),void(t&&t.call(this));if(e&&-1!==e){if(e.data("oj-tree-is-loading"))return;e.data("oj-tree-is-loading",!0)}switch(!0){case!l&&!h:throw"ojTree - neither data nor ajax settings supplied.";case $.isFunction(l):l.call(this,e,function(n){(n=this._parseJson(n,e))?(-1!==e&&e?(e.append(n).children("a.oj-tree-loading").removeClass(a),e.removeData("oj-tree-is-loading")):this._$container_ul.empty().append(n.children()),this._cleanNode(e),t&&t.call(this)):(-1!==e&&e?(e.children("a.oj-tree-loading").removeClass(a),e.removeData("oj-tree-is-loading"),this._data.ds.correctState&&this._correct_state(e)):this._data.ds.correctState&&this._$container_ul.empty(),i&&i.call(this))}.bind(this));break;case!!l&&!h||!!l&&!!h&&(!e||-1===e):e&&-1!=e||((n=this._parseJson(l,e))?(this._$container_ul.empty().append(n.children()),this._cleanNode()):this._data.ds.correctState&&this._$container_ul.empty()),t&&t.call(this);break;case!l&&!!h||!!l&&!!h&&e&&-1!==e:s=function(t,n,o){var s=this.ctx;s._noteLoadFailureId(this.id,!0),s._removeFromBusyStack("j",-1===e?-1:e.attr("id")),s._resolveIfBusyStackEmpty();var r=s._getOptions().data.ajax.error;r&&r.call(s,n,o,t),-1!=e&&e.length?(e.children("a.oj-tree-loading").removeClass(a),e.removeData("oj-tree-is-loading"),"success"===n&&s._data.ds.correctState&&s._correct_state(e)):("error"==n||"success"===n&&s._data.ds.correctState)&&(s._$container_ul.empty(),s._applyEmptyText()),i&&i.call(s)},r=function(i,n,o){var r=this.ctx;r._noteLoadFailureId(this.id,!1),r._removeFromBusyStack("j",this.id);var l=r._getOptions().data.ajax.success;if(l&&(i=l.call(r,i,n,o)||i),"string"==typeof i){var u=i.replace(/^[\s\n]+$/,"");try{u=JSON.parse(u)}catch(e){u=null}if(!u)return s.call(this,o,"Bad JSON","")}if(i=r._parseJson(i,e)){if(-1!==e&&e)e.append(i).children("a.oj-tree-loading").removeClass(a),e.removeData("oj-tree-is-loading");else{var h=r._$container_ul;h.empty().append(i.children()),h.attr("role","tree").attr("aria-labelledby",r._elemId).attr("tabindex","0").css("outline","none"),-1===r._data.core.selectMode&&h.attr("aria-multiselectable",!0)}r._cleanNode(e),t&&t.call(r)}else-1!==e&&e?(e.children("a.oj-tree-loading").removeClass(a),e.removeData("oj-tree-is-loading"),r._data.ds.correctState&&(r._correct_state(e),t&&t.call(r))):r._data.ds.correctState&&(r._$container_ul.empty(),t&&t.call(r))};var d=-1===e?-1:e.attr("id");this._busyStack.push({op:"j",id:d}),this._addBusyState("Tree (id='"+this._elemId+"') : node id='"+d+"' is lazyloading.");var c={ctx:this,id:d};o.ajax.context=c,o.ajax.error=s,o.ajax.success=r,o.dataType||(o.ajax.dataType="json"),c.type=o.ajax.dataType,$.isFunction(o.ajax.url)&&(o.ajax.url=o.ajax.url.call(this,e),c.url=o.ajax.url),$.isFunction(o.ajax.data)&&(o.ajax.data=o.ajax.data.call(this,e)),$.ajax(o.ajax)}},_parseJson:function(e,t,i){var n,o,s,a,h,d,c=!1;if(!e)return c;if(this._data.ds.progressiveUnload&&t&&-1!==t&&t.data(u,c),"string"==typeof e)try{e=JSON.parse(e)}catch(t){e=[]}if($.isArray(e)){if(c=$("<ul>"),!e.length)return!1;for(o=0,s=e.length;o<s;o++)(n=this._parseJson(e[o],t,!0)).length&&(c=c.append(n));c=c.children()}else{"string"==typeof e&&(e={data:e}),d="string"==typeof e.title?e.title:" ",c=$("<li role='treeitem' />"),e.attr&&(this._data.types.defType&&!e.attr.type&&(e.attr.type="oj-tree-deftype",c.addClass("oj-tree-type")),c.attr(e.attr)),e.metadata&&c.data(e.metadata),e.children&&0===e.children.length&&c.addClass(zt._OJ_COLLAPSED),e.state&&"s"===e.state&&c.addClass(zt._OJ_SELECTED),e.data||(e.data={dummy:0});var p,_=!1;n=$("<a/>"),$.each(e.data,function(t,i){$.isFunction(i)&&(i=i.call(this,e)),"object"==typeof i&&("attr"==t?n.attr(i):"style"==t&&n.css(i),"language"==t&&n.addClass(i)),_||((p=$("<span class='oj-tree-title'>"))[0].textContent=d,n.prepend("<ins class='oj-tree-icon "+r+" oj-component-icon'>&#160;</ins>",p),_=!0),!i.icon&&e.icon&&(i.icon=e.icon),i.icon&&(-1===i.icon.indexOf("/")?n.children("ins").addClass(i.icon):n.children("ins").css("background","url('"+i.icon+"') center center no-repeat"))}),c.append(n),c.prepend("<ins class='"+l+"'>&#160;</ins>"),e.children&&(this._data.ds.progressiveRender&&"expanded"!==e.state?c.addClass(zt._OJ_COLLAPSED).attr("aria-expanded","false").data(u,e.children):(this._data.ds.progressiveUnload&&c.data(u,e.children),$.isArray(e.children)&&e.children.length&&(n=this._parseJson(e.children,t,!0)).length&&((h=$("<ul role='group' />")).append(n),c.append(h))))}return i||((a=$("<ul />")).append(c),c=a),c},__getJson:function(e,t,i,n){var o,s,r,a,l,u,h,d,c,p=[],_=this.options,m=this;return(e=this._getNode(e))&&-1!==e||(e=this._$container.find("> ul > li")),t=$.isArray(t)?t:["id","class"],!n&&_.types&&t.push(_.types.attr),i=$.isArray(i)?i:[],e.each(function(){a=$(this),o={},c=m._noteUserAttrs(a),(t.length||c&&c.length)&&(o.attr={}),c&&$.each(c,function(e,t){a.attr(t).length>0&&(o.attr[t]=a.attr(t))}),$.each(t,function(e,t){(s=a.attr(t))&&s.length&&s.replace(/oj-tree[^ ]*/gi,"").length&&(s=(" "+s).replace(/ oj-tree[^ ]*/gi,"").replace(/ oj-[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")).length&&(o.attr[t]=s)}),m._getDndContext().isDragEnabled()&&m._isSelected(a)&&(o.state="s"),function(e){var t=!0;for(var i in e)if(e.hasOwnProperty(i)){t=!1;break}return t}(r=a.data())||(o.metadata=r),l=a.children("a"),s=null,l.each(function(){u=$(this),i.length||u.children("ins").get(0).style.backgroundImage.length||u.children("ins").get(0).className&&u.children("ins").get(0).className.replace(/oj-tree[^ ]*|$/gi,"").length?(d=m.getText(u),$.each(i,function(e,t){(h=(" "+(u.attr(t)||"")).replace(/ oj-tree[^ ]*/gi,"").replace(/ oj-[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")).length&&(s||(s={attr:{}}),s.attr[t]=h)}),u.children("ins").get(0).className.replace(/oj-tree[^ ]*|$/gi,"").replace(/^\s+$/gi,"").length&&(h=u.children("ins").get(0).className.replace(/oj-tree[^ ]*|$/gi,"").replace(/ oj-[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")).length&&(s||(s={}),s.icon=h),u.children("ins").get(0).style.backgroundImage.length&&(h=u.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","")).length&&(s||(s={}),s.icon=h)):d=m.getText(u),null!=s&&(o.data||(o.data=[]),l.length>1?o.data.push(s):o.data=s),o.title=d}),(a=a.find("> ul > li")).length&&(o.children=m.__getJson(a,t,i,!0)),p.push(o)}),p},_noteUserAttrs:function(e){var t,i,n,o;if((t=e[0].attributes)&&t.length){n=[],o=c.length;for(var s=0;s<t.length;s++)if(i=t[s]){i=i.name;for(var r=0;r<o&&(c[r]!=i&&0!=i.indexOf("aria-"));r++);r>=o&&n.push(i)}}return n&&n.length>0?n:null},_correct_state:function(e){if(!(e=this._getNode(e))||-1===e)return!1;e.removeClass("oj-collapsed oj-expanded").removeAttr("aria-expanded").addClass(o).children("ul").remove(),e.find("ins:first-child").removeClass(l).addClass(s),this._emitEvent({obj:e},"correct_state",!0)},_loaded:function(){this._emitEvent(null,"loaded")},_loadNodeHtml:function(e,t,i){var n,o=this._getOptions().data,u=function(){},h=function(){},d=o&&o.data||null,c=o&&o.ajax||null;if((e=this._getNode(e))&&-1!==e){if(e.data("oj-tree-is-loading"))return;e.data("oj-tree-is-loading",!0)}switch(!0){case!d&&!c&&o&&"string"==typeof o:this._loadHtmlString(o,e,t,i);break;case $.isFunction(d):d.call(this,e,function(n){this._loadHtmlString(n,e,t,i)}.bind(this));break;case!d&&!c:e&&-1!=e||(this._$container_ul.empty().append(this._data.html.cloneMarkup).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='oj-tree-icon' >&#160;</ins>").end().filter("a").children("ins:first-child").not(".oj-tree-node-icon").addClass(r).addClass(s),this._$container_ul.find("li").children("ins:first-child").addClass(l),this._insertHtmlTextSpan(this._$container_ul),this._data.types.defType&&this._addDefType(this._$container_ul),this._cleanNode(),this._$container_ul.find("ul").attr("role","group"),this._$container_ul.find("li").attr("role","treeitem")),t&&t.call(this);break;case!!d&&!c||!!d&&!!c&&(!e||-1===e):e&&-1!=e||((n=$(d)).is("ul")||(n=$("<ul />").append(n)),this._$container_ul.empty().append(n.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='oj-tree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".oj-tree-node-icon").addClass(r).addClass(s),this._$container_ul.find("li.oj-tree-leaf ins:first-child").removeClass(l).removeClass(r).addClass(s),this._insertHtmlTextSpan(this._$container_ul),this._data.types.defType&&this._addDefType(this._$container_ul),this._cleanNode(),this._$container_ul.find("ul").attr("role","group"),this._$container_ul.find("li").attr("role","treeitem")),t&&t.call(this);break;case!d&&!!c||!!d&&!!c&&e&&-1!==e:e=this._getNode(e),u=function(t,n,o){var s=this.ctx;s._noteLoadFailureId(this.id,!0),s._removeFromBusyStack("j",-1===e?-1:e.attr("id")),s._resolveIfBusyStackEmpty();var r=s._getOptions().data.ajax.error;r&&r.call(s,t,n,o),-1!=e&&e.length?(e.children("a.oj-tree-loading").removeClass(a),e.removeData("oj-tree-is-loading"),"success"===n&&s._data.ds.correctState&&s._correct_state(e)):"success"===n&&s._data.ds.correctState&&(s._$container_ul.empty(),s._applyEmptyText()),i&&i.call(s)},h=function(i,n,o){var h,d=this.ctx;d._noteLoadFailureId(this.id,!1),d._removeFromBusyStack("j",-1===e?-1:e.attr("id"));var c=d._getOptions().data.ajax.success;if(c&&(i=c.call(d,i,n,o)||i),""===i||i&&i.toString&&""===i.toString().replace(/^[\s\n]+$/,""))return u.call(d,o,n,"");if(i){(i=$(i)).is("ul")||(i=$("<ul />").append(i)),-1!=e&&e?(e.children("a.oj-tree-loading").removeClass(a),d._removeEmptyUL(e),e.append(i).children("ul").find("li, a").filter(function(){return!d.firstChild||!d.firstChild.tagName||"INS"!==d.firstChild.tagName}).prepend("<ins class='oj-tree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".oj-tree-node-icon").addClass(r).addClass(s),e.removeData("oj-tree-is-loading"),e.find("li.oj-tree-leaf ins:first-child").removeClass(l).removeClass(r).addClass(s),h=e):(d._$container_ul.empty().append(i.children()).find("li, a").filter(function(){return!d.firstChild||!d.firstChild.tagName||"INS"!==d.firstChild.tagName}).prepend("<ins class='oj-tree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".oj-tree-node-icon").addClass(r).addClass(s),d._$container_ul.find("li.oj-tree-leaf ins:first-child").removeClass(l).removeClass(r).addClass(s),h=d._$container_ul),d._handleHtmlParentNoChildren(h),d._insertHtmlTextSpan(h);var p=h.children("UL");p.length>=1&&(p=p.first().find("span.oj-tree-title"),$.each(p,function(){this.textContent=d._escapeHtml(this.textContent)})),d._data.types.defType&&h&&d._addDefType(this._$container_ul),d._cleanNode(e),t&&t.call(d)}else e&&-1!==e?(e.children("a.oj-tree-loading").removeClass(a),e.removeData("oj-tree-is-loading"),d._data.ds.correctState&&(d._correct_state(e),t&&t.call(d))):d._data.ds.correctState&&(d._$container_ul.empty(),t&&t.call(d)),d._$container_ul.find("ul").attr("role","group"),d._$container_ul.find("li").attr("role","treeitem")};var p=-1===e?-1:e.attr("id");this._busyStack.push({op:"j",id:p}),this._addBusyState("Tree (id='"+this._elemId+"') : node id='"+p+"' is lazyloading.");var _={ctx:this,id:p};o.ajax.context=_,o.ajax.error=u,o.ajax.success=h,o.ajax.dataType||(o.ajax.dataType="html"),_.type=o.ajax.dataType,$.isFunction(o.ajax.url)&&(o.ajax.url=o.ajax.url.call(this,e),_.url=o.ajax.url),$.isFunction(o.ajax.data)&&(o.ajax.data=o.ajax.data.call(this,e)),$.ajax(o.ajax)}},_handleHtmlParentNoChildren:function(e){var t=e.find(e.is("ul")?"li ul":"ul").filter(function(){return!this.firstChild||0==this.childNodes.length||1==this.childNodes.length&&3==this.firstChild.nodeType});$.each(t,function(){$(this).closest("li").addClass(zt._OJ_COLLAPSED)})},_removeEmptyUL:function(e){var t=e.find("ul").filter(function(){return!this.firstChild||0==this.childNodes.length||1==this.childNodes.length&&3==this.firstChild.nodeType});t.length>0&&t.remove()},_loadHtmlString:function(e,t,i,n){var o;if(e&&""!==e&&e.toString&&""!==e.toString().replace(/^[\s\n]+$/,"")){(e=$(e)).is("ul")||(e=$("<ul />").append(e)),-1!=t&&t?(t.children("a.oj-tree-loading").removeClass(a),t.append(e).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='oj-tree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".oj-tree-node-icon").addClass("oj-tree-node-icon").addClass("oj-tree-icon"),t.removeData("oj-tree-is-loading"),o=t,this._addDefType(this.obj)):(this._$container_ul.empty().append(e.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='oj-tree-icon oj-tree-disclosure-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".oj-tree-node-icon").addClass(r).addClass(s),this._$container_ul.find("li.oj-tree-leaf ins:first-child").removeClass(l).removeClass(r).addClass(s),o=this._$container_ul,this._addDefType(this._$container_ul)),o&&this._insertHtmlTextSpan(o);var u=o.children("UL");if(u.length>=1){u=u.first().find("span.oj-tree-title");var h=this;$.each(u,function(){this.textContent=h._escapeHtml(this.textContent)})}this._cleanNode(t),i&&i.call(this)}else t&&-1!==t?(t.children("a.oj-tree-loading").removeClass(a),t.removeData("oj-tree-is-loading"),this._data.ds.correctState&&(this._correct_state(t),i&&i.call(this))):this._data.ds.correctState&&(this._$container_ul.empty(),i&&i.call(this))},_insertHtmlTextSpan:function(e){$.each(e.find("li a"),function(e,t){var i=t.innerHTML;i=i.replace("ins>","ins><span class='oj-tree-title'>"),i+="</span>",t.innerHTML=i})},_addDefType:function(e){var t,i;this._data.types.defType&&(t=this.options.types,i=t?t.attr:this._data.types.defaults.attr,$.each(e.find("li"),function(e,t){(t=$(t)).attr(i)||t.attr(i,"oj-tree-deftype").addClass("oj-tree-type")}))},_save_opened:function(){var e=this;this._data.core.toExpand=[],this._$container_ul.find("li.oj-expanded").each(function(){this.id&&e._data.core.toExpand.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))})},_reload_nodes:function(e){var t,i=this,n=!0,o=[],s=[];e||(this._data.core.reopen=!1,this._data.core.refreshing=!0),this._isOptExpandAll()&&(this._data.core.toExpand=[],this._$container_ul.find("li.oj-collapsed").each(function(){t="#"+$(this).attr("id"),i.isExpanded(t)||i._isLoadFailureId(t)||i._data.core.toExpand.push(t)})),this._data.core.toExpand=$.map($.makeArray(this._data.core.toExpand),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this._data.core.toLoad=$.map($.makeArray(this._data.core.toLoad),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this._data.core.toExpand.length&&(this._data.core.toLoad=this._data.core.toLoad.concat(this._data.core.toExpand),this._data.core.toLoad=this._data.core.toLoad.reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[])),this._data.core.toLoad.length&&($.each(this._data.core.toLoad,function(e,t){if("#"==t)return!0;i._$container.find(t).length?i.isExpanded(t)||o.push(t):s.push(t)}),o.length&&(this._data.core.toLoad=s,$.each(o,function(e,t){i._is_loaded(t)||(i._load_node(t,function(){i._reload_nodes(!0)},function(){i._reload_nodes(!0)}),n=!1)}))),this._data.core.toExpand.length&&$.each(this._data.core.toExpand,function(e,t){i.isExpanded(t)||i._expand(t,!1,!0)}),n&&(this._data.core.reopen&&clearTimeout(this._data.core.reopen),this._data.core.reopen=setTimeout(function(){i._emitEvent({},"reload_nodes",!0),i._resolveIfBusyStackEmpty()},50),this._data.core.refreshing=!1,this._reopen())},setTheme:function(e,t){if(!e)return!1;t||(t=this._data.themes._themes+e+"/style.css"),-1==$.inArray(t,this._data.themes.themes_loaded)&&(m({url:t}),this._data.themes.themes_loaded.push(t)),this._data.themes.theme!=e&&(this._$container.removeClass("oj-tree-"+this._data.themes.theme),this._data.themes.theme=e),this._$container.addClass("oj-tree-"+e),this._data.themes.dots?this._showDots():this._hideDots(),this._data.themes.icons?this._showIcons():this._hideIcons()},_isTheme:function(){return null!=this._data.themes},_getTheme:function(){return this._data.themes.theme},isIcons:function(){return this._data.themes.icons},_showIcons:function(){this._data.themes.icons=!0,this._$container.children("ul").removeClass("oj-tree-no-icons")},_hideIcons:function(){this._data.themes.icons=!1,this._$container.children("ul").addClass("oj-tree-no-icons")},toggleIcons:function(){},_enableKeys:function(){this._data.keys.enabled=!0},_initTree:function(){this._initData(),this._initCoreOpts(),this._initUIOpts(),this._initDSOpts(!0),this._initTypeOpts(),this._getDndContext().initDnDOpts(),this._initMenuOpts(),this._initCore(),this._initUI(),this._initThemes(),this._initDataSource(),this._initTypes(),this._getDndContext().initDnD(),this._initKeys(),this._initMenu()},_emitEvent:function(e,t,i){if(t&&"string"===$.type(t)&&(!0!==this._data.core.locked||"unlock"===t||"isLocked"===t||"lock"===t)){var n,o=Array.prototype.slice.call(arguments),s=this._$container,r="before"===t,a=!i;a||(t="_tree"+t);var l={};if(l.item=e?e.obj:void 0,l.inst=s,r?(n=e.func,l.func=n,l.args=o,"rename"===n&&(l.title=e.title,l.prevTitle=e.prevTitle)):a&&("move"==t?(l.position=e.p,l.reference=e.r,l.data=e):"rename"==t?(l.title=e.title,l.prevTitle=e.prevTitle):"remove"==t?(l.parent=e.parent,l.prev=e.prev):"delete"==t?(l.prev=e.prev,l.parent=e.parent):"expandAll"===t||"collapseAll"===t||"deselectAll"===t?l.targ=e.targ:"loaded"===t?l.item=-1:"paste"==t&&(l.position=e.p,l.reference=e.r)),a){var u=this._trigger(t,new $.Event("oj"+t),l);if(r)return void 0!==u&&(u=!!u),u}else this._$container.trigger(t,l)}},_fireOptionChangeEvent:function(e,t,i,n){"selection"===e&&(null==i&&(i=this._getSelected()),this._compareSelectionValues(t,i)||this.option(e,i,{_context:{originalEvent:n,internalSet:!0},changed:!0}))},__rollback:function(){return this.get_rollback()},_start:function(){var e;this._isRtl&&this._$container.addClass("oj-tree-rtl").css("direction","rtl"),this._$container.html("<ul role='tree' tabindex='0' class='oj-tree-list' style='outline:none'"+(-1===this._data.core.selectMode?" aria-multiselectable='true'":"")+" aria-labelledby='"+this._elemId+"'><li class='oj-tree-last oj-tree-leaf'><ins class='oj-tree-icon'>&#160;</ins><a class='oj-tree-loading' href='#'><ins class='oj-tree-icon'>&#160;</ins>"+this._getString("stateLoading")+"</a></li></ul>"),this._$container_ul=this._$container.children("ul:eq(0)"),this._$container.data("oj-tree-instance-id",this._getIndex()),this._data.core.li_height=this._$container_ul.find("li.oj-collapsed, li.oj-tree-leaf").eq(0).height()||18,this._isTouch&&this._$container.delegate(".oj-tree-list ins.oj-tree-disclosure-icon","touchend.ojtree",function(e){e.preventDefault();var t=$(e.target);this.toggleExpand(t)}.bind(this)),this._$container.delegate(".oj-tree-list ins.oj-tree-disclosure-icon","click.ojtree",function(e){var t=$(e.target);this.toggleExpand(t)}.bind(this)).delegate(".oj-tree-list ins.oj-tree-disclosure-icon","mousedown",function(e){this._data.ui.disclosureClick=!0,$(e.target).removeClass("oj-default").removeClass(zt._OJ_HOVER).addClass(zt._OJ_SELECTED)}.bind(this)).delegate(".oj-tree-list ins.oj-tree-disclosure-icon","mouseup",function(e){$(e.target).removeClass(zt._OJ_SELECTED).addClass("oj-default")}.bind(this)).bind("mousedown.ojtree",function(e){this._setFocus(),e.shiftKey&&(this._getDndContext()&&this._getDndContext().isDragEnabled()||e.preventDefault())}.bind(this)).bind("dblclick.ojtree",function(e){var t;if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){t=window.getSelection();try{t.removeAllRanges(),t.collapse(document.getElementsByTagName("body")[0],0)}catch(e){}}}),this._$container_ul.focus(function(e){return this._data.ui.disclosureClick?(this._data.ui.disclosureClick=!1,!1):(this._data.ui.focused=!0,this._data.ui.hovered?t=this._data.ui.hovered:this._data.ui.lastHovered?(this._data.ui.hovered=this._data.ui.lastHovered,t=this._data.ui.hovered):this._data.ui.lastSelected&&this._data.ui.lastSelected.length>0?(this._data.ui.hovered=this._data.ui.lastSelected,t=this._data.ui.hovered):t=this._$container_ul.find("li:first"),t&&(this.hover(t),this._data.ui.lastHovered=null,this._$container_ul.find("a.oj-selected").removeClass("oj-tree-inactive")),!1);var t}.bind(this)).blur(function(e){this._data.ui.focused=!1,this._data.ui.lastHovered=this._data.ui.hovered,this._data.ui.lastHovered&&this.dehover(this._data.ui.hovered),this._$container_ul.find("a.oj-selected").addClass("oj-tree-inactive")}.bind(this)),this._emitEvent({},"init",!0),this._loadNodes(),this._data.menu.usermenu&&this._applyMenu(),e={_handler:this._keyHandler,_selector:this._$container_ul,_this:this},p.push(e),$(e._selector).keydown(_),this._enableKeys()},_initCore:function(){this._data.core.locked=!1,this._$container.addClass("oj-tree oj-tree-"+this._getIndex()),this._$container.css("outline","none"),this._$container.css("MozUserSelect","none"),this._$container.css("WebkitTouchCallout","none"),this._$container.css("WebkitUserSelect","none"),this._$container.css("-ms-user-select","none"),this._$container.css("WebkitTapHighlightColor","rgba(0,0,0,0)")},_initUI:function(){this._data.ui.selected=$(),this._data.ui.lastSelected=!1,this._data.ui.hovered=null;var e=this.options.selection;e&&"array"===$.type(e)&&e.length>0&&(this._data.ui.toSelect=e,this.options.selection=[]),this._isTouch&&this._$container.delegate(".oj-tree-list a","touchend.ojtree",$.proxy(function(e){this._data.ui.touchEvent=!0,this._handleNodeTapClick(e),$(e.currentTarget).hasClass(a)||this.dehover()},this)),this._$container.delegate(".oj-tree-list a","click.ojtree",function(e){this._data.ui.touchEvent=!1,this._handleNodeTapClick(e)}.bind(this)).delegate(".oj-tree-list a","mouseenter.ojtree",function(e){$(e.currentTarget).hasClass(a)||this.hover(e.target)}.bind(this)).delegate(".oj-tree-list a","mouseleave.ojtree",function(e){$(e.currentTarget).hasClass(a)||this.dehover(e.target)}.bind(this)).delegate(".oj-tree-list .oj-tree-disclosure-icon","mouseenter.ojtree",function(e){$(e.currentTarget).hasClass(a)||this._disclosureHover(e.target,!0)}.bind(this)).delegate(".oj-tree-list .oj-tree-disclosure-icon","mouseleave.ojtree",function(e){$(e.currentTarget).hasClass(a)||this._disclosureHover(e.target,!1)}.bind(this)).bind("_treereopen",function(){this._reselect()}.bind(this)).bind("_treeget_rollback",function(){this.dehover(),this._saveSelected()}.bind(this)).bind("ojcollapse",function(e,t){var i=this._getNode(t.item),n=i&&i.length?i.children("ul").find("a.oj-selected"):$(),o=this;!1!==this.options.selectedParentCollapse&&n.length&&n.each(function(){"selectParent"===o.options.selectedParentCollapse?(o.deselect(this),o.select(i)):"deselect"===o.options.selectedParentCollapse&&o.deselect(this)})}.bind(this)).bind("ojremove",function(e,t){var i,n=this.options.selectPrevOnDelete,o=this._getNode(t.item),s=o&&o.length?o.find("a.oj-selected"):[],r=this;s.each(function(){r.deselect(this),r._data.ui.lastHovered&&(i=r._getNode(this))&&r._data.ui.lastHovered.attr("id")==i.attr("id")&&(r._data.ui.lastHovered=null)}),n&&s.length&&t.prev&&t.prev.each(function(){if(this.parentNode)return r.select(this),!1})}.bind(this)).bind("ojmove",function(e,t){var i,n=t.data,o=n.cy;o&&n.oc&&(n.oc.find("a.oj-selected").removeClass(zt._OJ_SELECTED),n.oc.removeAttr("aria-selected")),n.ot===n.rt||o||(i=n.ot._data.ui).lastHovered&&(n.o.attr("id")==i.lastHovered.attr("id")&&(i.lastHovered=null),i.lastSelected&&n.o.attr("id")==i.lastSelected.attr("id")&&(i.lastSelected=null))}.bind(this))},_initDataSource:function(){this._initTreeData(),this._initJsonData(),this._initHtmlData()},_initTreeData:function(){1===this._data.ds.type&&(this._tds=this.options.data||null,this._load_node=this._load_node_DS,this._is_loaded=this._is_loaded_DS,this._refresh=this._refresh_DS)},_initJsonData:function(){3===this._data.ds.type&&(this._data.ds.progressiveUnload&&this._$container.bind("_treeafter_close",function(e,t){t.item.children("ul").remove()}),this._load_node=this._load_node_J,this._is_loaded=this._is_loaded_J,this._refresh=this._refresh_json)},_initHtmlData:function(){4===this._data.ds.type&&(this._processExistingMarkup(),this._load_node=this._load_node_H,this._is_loaded=this._is_loaded_H,this._refresh=this._refresh_ui)},_processExistingMarkup:function(){this._data.html.useExistingMarkup&&(this._data.html.markup_ul||(this._data.html.markup_ul=this._$container.find(" > ul"),this._data.html.markup=this._data.html.markup_ul.find(" > li"),this._data.html.cloneMarkup=this._data.html.markup.clone(!0),this._data.html.cloneMarkup.find("li").addBack().contents().filter(function(){return 3==this.nodeType}).remove(),this._transformElemIds(this._data.html.markup_ul),this._data.html.markup_div=$("<div id='oj-tree-existing-markup-"+this._getIndex()+"' style='display:none'>").append(this._data.html.markup_ul),this._$container.after(this._data.html.markup_div)))},_transformElemIds:function(e){var t=$(e).find("li"),i=this._getIndex();t.each(function(e,t){t.setAttribute("id",i+"_"+t.getAttribute("id"))})},_unTransformElemIds:function(e){var t,i,n=$(e).find("li");this._getIndex();n.each(function(e,n){t=n.getAttribute("id"),i=t.indexOf("_"),t=t.substr(i+1),n.setAttribute("id",t)})},_initThemes:function(){!1===this._data.themes._themes&&(this._data.themes._themes="themes/"),this._$container.bind("_treeinit",$.proxy(function(){var e=this.options;this._data.themes.dots=e.dots,this._data.themes.icons=e.icons,this.setTheme(this._data.themes.theme,this._data.themes.url)},this)).bind("ojloaded",$.proxy(function(){this._data.themes.dots?this._showDots():this._hideDots(),this._data.themes.icons?this._showIcons():this._hideIcons()},this))},_initTypes:function(){var e=this.options.types;e&&this._$container.bind("_treeinit",$.proxy(function(){var t=$.extend(!0,{},e.types),i=e.attr||this._data.types.defaults.attr,n="",o=this;$.each(t,function(e,t){$.each(t,function(e,t){/^(maxDepth|maxChildren|icon|validChildren)$/.test(e)||o._data.types.attachTo.push(e)});var s=typeof t.icon;if("undefined"===s){if("boolean"!==(s=typeof t.image)||t.image){if(!t.image&&!t.position)return!0}else t.image="ojt$none";t.icon={},t.image&&(t.icon.image=t.image,delete t.image),void 0!==t.position&&(t.icon.position=t.position,delete t.position)}(t.icon.image||t.icon.position)&&("default"==e?(o._data.types.defType=!0,n+=".oj-tree-"+o._getIndex()+" .oj-tree-list li.oj-tree-type a > .oj-tree-node-icon { ",n+=o._addTypeCss(t,n),n+="} ",n+=".oj-tree-"+o._getIndex()+" .oj-tree-list li["+i+'="oj-tree-deftype"].oj-tree-type > a ins.oj-tree-node-icon { '):t.icon.image&&(n+=".oj-tree-"+o._getIndex()+" .oj-tree-list li["+i+'="'+e+'"].oj-tree-type > a > ins.oj-tree-node-icon { '),n+=o._addTypeCss(t,n),n+="} ")}),""!==n&&m({str:n,title:"oj-tree-types"})},this)).bind("ojbefore",function(e,t){var i=t.func,n=t.item,o=!!this._data.types.defaults.useData&&this._getNode(n),s=!(!o||-1===o||!o.length)&&o.data("oj-tree");if(s&&s.types&&!1===s[i])return e.stopImmediatePropagation(),!1;if(-1!==$.inArray(i,this._data.types.attachTo)){if(!t.item||!t.item.tagName&&!t.item.jquery)return;if(!this._canTypedNodeMove(n,i))return e.stopImmediatePropagation(),!1}}.bind(this))},_addTypeCss:function(e){var t="";return"ojt$none"!==e.icon.image?t+=" background-image:url("+e.icon.image+"); ":t+=" background-image:none; ",e.icon.position?t+=" background-position:"+e.icon.position+"; ":t+=" background-position:0 0; ",t},_getDndContext:function(){return this._TreeDndContext||(this._TreeDndContext=new i.TreeDndContext(this)),this._TreeDndContext},_initKeys:function(){},_initMenu:function(e){var t;if(e||this.options.contextMenu||(t=this._$container.attr("contextmenu"))&&(this.options.contextMenu="#"+t),t=e||this.options.contextMenu){var i=$(t);if(i){i.css("display","none");var n=this._data.menu;n.$container=i,n.usermenu=!0}this._data.menu.usermenu&&e&&this._applyMenu()}},_handleContextMenuSelect:function(e,t){if(!t.inst&&this._data.menu.treeDivId==this._elemId){var i=t?t.item.attr("id"):void 0;"ojtreecopy"===i?this._crrm_copy(this._data.menu.node):"ojtreecut"===i?this._crrm_cut(this._data.menu.node):"ojtreepaste"===i||"ojtreepastebefore"===i||"ojtreepasteafter"===i?this._crrm_paste(this._data.menu.node,i):"ojtreeremove"===i?this._isSelected(this._data.menu.node)?this._crrm_remove():this._crrm_remove(this._data.menu.node):"ojtreerename"===i?this._crrm_rename(this._data.menu.node):"ojtreecreate"===i&&this._crrm_create(this._data.menu.node)}},_NotifyContextMenuGesture:function(e,t,i){var n,o="keyboard"===i;if("contextmenu"==t.type||o||"touch"==i)if(this._data.menu.node=o?this._data.ui.hovered||this._data.menu.activeNode:$(t.target),this._data.menu.activeNode=null,this._data.menu.node){if(!o){var s=$(t.originalEvent.target);if(s.is("LI")||s.hasClass("oj-tree")||s.is("UL"))return}o?this._data.menu.node:this._data.menu.node.closest("li"),this._data.menu.treeDivId=this._data.menu.node.closest("div").attr("id");var r={launcher:this._$container_ul};if(o&&(n=this._data.menu.node.find(".oj-tree-title")[0],r.position={of:n}),this._data.menu.usermenu&&(this._data.menu.$elemPaste||this._data.menu.$elemPasteBefore||this._data.menu.$elemPasteAfter)){var a,l,u=!this._data.crrm.ct_nodes&&!this._data.crrm.cp_nodes,h=[this._data.menu.$elemPaste,this._data.menu.$elemPasteBefore,this._data.menu.$elemPasteAfter],d=!1;for(l=0;l<h.length;l++)(a=h[l])&&!!a.hasClass(zt._OJ_DISABLED)!=u&&(u?a.addClass(zt._OJ_DISABLED):a.removeClass(zt._OJ_DISABLED),d=!0);d&&this._data.menu.$container.ojMenu("refresh")}this._OpenContextMenu(t,i,r)}else t.preventDefault()},_initCoreOpts:function(){var e=this.options.selectionMode;"none"===(e=null==e?"single":e)?e=0:"single"===e?e=1:"multiple"===e&&(e=-1),this._data.core.selectMode=e,this._data.themes.icons=this.options.icons,this._initExpandedOpts(),this._data.core.toLoad=this.options.initLoaded},_initUIOpts:function(){},_initDSOpts:function(e){var t,n,o=this.options.data;if(this._data.ds.type=0,this._data.html.useExistingMarkup=!1,this._data.html.cloneMarkup=!1,this._loadFailureIds={},o)if("string"===(n=$.type(o)))this._isHtml(o)?this._data.ds.type=4:(this._data.ds.type=3,this._initJsonOpts());else if("array"===n)this._data.ds.type=3;else if("object"===n){try{o instanceof i.JsonTreeDataSource&&(this._data.ds.type=1)}catch(e){this._data.ds.type=-1}if(1!==this._data.ds.type)try{o instanceof i.CollectionTreeDataSource&&(this._data.ds.type=2)}catch(e){this._data.ds.type=-1}1===this._data.ds.type||2===this._data.ds.type?this._initTreeDSOpts():(o.data||o.ajax)&&((t=o.dataType)?"json"===t?(this._data.ds.type=3,this._initJsonOpts()):"html"===t&&(this._data.ds.type=4,this._initHtmlOpts()):(o.dataType="json",this._data.ds.type=3,this._initJsonOpts()))}e&&0==this._data.ds.type&&this._$container.find("ul").length>0&&(this._data.ds.type=4,this._data.html.useExistingMarkup=!0)},_initTreeDSOpts:function(){},_initJsonOpts:function(){},_initHtmlOpts:function(){},_initMenuOpts:function(){},_initTypeOpts:function(){var e=this.options.types;"object"==typeof e&&this._applyDefaults(e,{attr:this._data.types.defaults.attr})},_initExpandedOpts:function(){this._data.core.toExpand=this._varCopy(this.options,"initExpanded"),null==this._data.core.toExpand&&(this._data.core.toExpand=[])},_initData:function(){var e=this._data;e.core={initLoaded:[],selectMode:1,load_open:!1,li_height:0,toExpand:!1,toLoad:!1,prepMoveBlk:{},suppressSelectEvent:!1,strings:{}},e.ui={selected:$(),lastSelected:!1,hovered:null,lastHovered:null,disclosureClick:!1,toSelect:null,opacity:1,spacebar:!1,focused:!1,animDurDiv:null,touchEvent:!1},e.ui.defaults={selectMultipleModifier:"ctrl",selectRangeModifier:"shift",disableSelectingChildren:!1},e.crrm={},e.crrm.cp_nodes=!1,e.crrm.ct_nodes=!1,e.crrm.defaults={inputWidthLimit:200,move:{alwaysCopy:!1,openOnMove:!0,defaultPosition:"last",checkMove:function(e){return!0}}},e.crrm.prepMoveBlk={},e.ds={},e.ds.progressiveRender=!1,e.ds.progressiveUnload=!1,e.ds.correctState=!0,e.ds.type=0,e.json={},e.json.defaults={data:!1,ajax:!1},e.html={},e.html.defaults={data:!1,ajax:!1},e.html.useExistingMarkup=!1,e.html.markup_ul=!1,e.html.markup_div=!1,e.html.markup=!1,e.html.cloneMarkup=!1,e.themes={},e.themes.icons=!0,e.themes.dots=!1,e.themes.theme="default",e.themes.url=!1,e.themes.themes_loaded=[],e.themes._themes=!1,e.types={},e.types.attachTo=[],e.types.defType=!1,e.types.defaults={maxChildren:-1,maxDepth:-1,validChildren:"all",useData:!1,attr:"type",types:{default:{maxChildren:-1,maxDepth:-1,validChildren:"all"}}},e.menu={},e.menu.usermenu=!1,e.menu.$container=!1,e.menu.$elemPaste=!1,e.menu.$elemPasteAfter=!1,e.menu.$elemPasteBefore=!1,e.menu.node=!1,e.menu.activeNode=!1,e.keys={},e.keys.enabled=!0,e.keys.bound=[]},_fix_scroll:function(t){var i,n=this._$container[0];if(n.scrollHeight>n.offsetHeight){if(!(t=this._getNode(t))||-1===t||!t.length||!t.is(":visible"))return;(i=t.offset().top-this._$container.offset().top)<0&&(n.scrollTop=n.scrollTop+i-1),i+this._data.core.li_height+(n.scrollWidth>n.offsetWidth?e:0)>n.offsetHeight&&(n.scrollTop=n.scrollTop+(i-n.offsetHeight+this._data.core.li_height+1+(n.scrollWidth>n.offsetWidth?e:0)))}},_setFocus:function(){},_unsetFocus:function(){},_newIndex:function(){return++g},_getIndex:function(){return this._index},_getOptions:function(){return $.extend(!0,{},this.options)},_getContainer:function(){return this._$container},_getContainerList:function(){return this._$container_ul},_keyHandler:{up:function(){var e=this._data.ui.hovered||this._data.ui.lastSelected||-1;return this.hover(this._getPrev(e)),!1},"ctrl+up":function(){var e=this._data.ui.hovered||this._data.ui.lastSelected||-1;return this.hover(this._getPrev(e)),!1},"shift+up":function(e){var t=this._data.ui.hovered||this._data.ui.lastSelected||-1;return this.select(this._getPrev(t),-1!==this._data.ui.selectMode),!1},down:function(){var e=this._data.ui.hovered||this._data.ui.lastSelected||-1;return this.hover(this._getNext(e)),!1},"ctrl+down":function(){var e=this._data.ui.hovered||this._data.ui.lastSelected||-1;return this.hover(this._getNext(e)),!1},"shift+down":function(){var e=this._data.ui.hovered||this._data.ui.lastSelected||-1;return this.select(this._getNext(e),-1!==this._data.ui.selectMode),!1},left:function(){var e=this._data.ui.hovered||this._data.ui.lastSelected;return e&&(e.hasClass(zt._OJ_EXPANDED)?this.collapse(e):this.hover(this._getPrev(e))),!1},"ctrl+left":function(){var e=this._data.ui.hovered||this._data.ui.lastSelected;return e&&(e.hasClass(zt._OJ_EXPANDED)?this.collapse(e):this.hover(this._getPrev(e))),!1},"shift+left":function(){var e=this._data.ui.hovered||this._data.ui.lastSelected;return e&&(e.hasClass(zt._OJ_EXPANDED)?this.collapse(e):this.hover(this._getPrev(e))),!1},right:function(){var e=this._data.ui.hovered||this._data.ui.lastSelected;return e&&e.length&&(e.hasClass(zt._OJ_COLLAPSED)?this.expand(e):this.hover(this._getNext(e))),!1},"ctrl+right":function(){var e=this._data.ui.hovered||this._data.ui.lastSelected;return e&&e.length&&(e.hasClass(zt._OJ_COLLAPSED)?this.expand(e):this.hover(this._getNext(e))),!1},"shift+right":function(){var e=this._data.ui.hovered||this._data.ui.lastSelected;return e&&e.length&&(e.hasClass(zt._OJ_COLLAPSED)?this.expand(e):this.hover(this._getNext(e))),!1},space:function(){return this._data.ui.hovered&&(this._data.ui.spacebar=!0,this._data.ui.hovered.children("a:eq(0)").click(),this._data.ui.spacebar=!1),!1},home:function(){return this.hover(this._$container_ul.find("li:first")),!1},end:function(){var e=this._$container_ul.find("li.oj-tree-last:visible");return e&&e.length&&this.hover(e[e.length-1]),!1},"*":function(){this._$container_ul.find("a");return this._expandAll(-1,!1),!1},"ctrl+space":function(e){if(this._data.ui.hovered){var t=$.Event("click");t.ctrlKey=!0,this._data.ui.hovered.children("a:eq(0)").trigger(t)}return!1},"shift+space":function(e){if(this._data.ui.hovered){var t=$.Event("click");t.shiftKey=!0,this._data.ui.hovered.children("a:eq(0)").trigger(t)}return!1},"shift+home":function(e){var t,i=this._data.ui.hovered;if(i){var n=!0,o=this,s=this._$container_ul.find("li:visible");this._data.core.suppressSelectEvent=!0,t=this.options.selection.slice(0),i=i[0],$.each(s,function(e,t){return t==i&&(n=!1),o._select(t,!0),n}),this._data.core.suppressSelectEvent=!1,this._fireOptionChangeEvent("selection",t,null,e)}return!1},"shift+pgdn":function(e){var t,i=this._data.ui.lastSelected||this._data.ui.hovered;if(i){var n=!1,o=this,s=this._$container_ul.find("li:visible");this._data.core.suppressSelectEvent=!0,t=this.options.selection.slice(0),i=i[0],$.each(s,function(e,t){return n||(n=t==i),n&&!o._isSelected(t)&&o._select(t,!0),!0}),this._data.core.suppressSelectEvent=!1,this._fireOptionChangeEvent("selection",t,null,e)}return!1},f2:function(){return this._crrm_rename(this._data.ui.hovered||this._data.ui.lastSelected),!1},del:function(){return this.remove(this._data.ui.hovered||this._getNode(null)),!1}},_applyMenu:function(){if(this._data.menu.usermenu){var e=this._data.menu.$container,t=this;e.on("ojselect",this._handleContextMenuSelect.bind(this));var i=e.find("[data-oj-command]"),n=!1;i.each(function(){var e;0===$(this).children("a").length&&(e=$(this).attr("data-oj-command").split("oj-tree-"),$(this).replaceWith(t._buildContextMenuItem(e[e.length-1])),$(this).hasClass("oj-menu-divider")&&$(this).removeClass("oj-menu-divider").addClass("oj-menu-item"),n=!0)}),n&&e.ojMenu("refresh"),this._data.menu.$elemPaste=e.find("#ojtreepaste"),this._data.menu.$elemPasteAfter=e.find("#ojtreepasteafter"),this._data.menu.$elemPasteBefore=e.find("#ojtreepastebefore")}},_clearMenu:function(){var e=this._data.menu;e.usermenu&&(e.usermenu=!1,e.$container.off("ojselect"),e.$container=null)},_buildContextMenuItem:function(e){return $(this._buildContextMenuListItem(e))},_buildContextMenuListItem:function(e){return"<li id="+h[e]+">"+this._buildContextMenuLabel(e)+"</li>"},_buildContextMenuLabel:function(e){var t=d[e];return'<a href="#">'+this._getString(t)+"</a>"},_isLoadFailureId:function(e){return e="#"===(e=-1===e?"-1":e).charAt(0)?e.substr(1):e,!!this._loadFailureIds[e]},_noteLoadFailureId:function(e,t){e=-1===e?"-1":e,t?this._loadFailureIds[e]=!0:this._loadFailureIds.hasOwnProperty(e)&&delete this._loadFailureIds[e]},_crrm_cut:function(e){if(e=e.closest("li"),this._isSelected(e)&&(e=null),!(e=this._getNode(e,!0))||!e.length)return!1;this._data.crrm.cp_nodes=!1,this._data.crrm.ct_nodes=e,this._emitEvent({obj:e},"cut")},_crrm_copy:function(e){if(e=e.closest("li"),this._isSelected(e)&&(e=null),!(e=this._getNode(e,!0))||!e.length)return!1;this._data.crrm.ct_nodes=!1,this._data.crrm.cp_nodes=e,this._emitEvent({obj:e},"copy")},_crrm_paste:function(e,t){if(!(e=this._getNode(e))||!e.length)return!1;var i=this._data.crrm.ct_nodes?this._data.crrm.ct_nodes:this._data.crrm.cp_nodes;if(!this._data.crrm.ct_nodes&&!this._data.crrm.cp_nodes)return!1;var n="inside";"ojtreepasteafter"===t?n="after":"ojtreepastebefore"===t&&(n="before"),this._data.crrm.ct_nodes&&(this._crrm_move_node(this._data.crrm.ct_nodes,e,n,!1,!1,!0),this._data.crrm.ct_nodes=!1),this._data.crrm.cp_nodes&&this._crrm_move_node(this._data.crrm.cp_nodes,e,n,!0,!1,!0),this._emitEvent({obj:i,p:n,r:e},"paste")},_crrm_move_node:function(e,t,i,n,o,s){var r=this._data.crrm.defaults.move;if(!o)return void 0===i&&(i=r.defaultPosition),"inside"!==i||r.defaultPosition.match(/^(before|after)$/)||(i=r.defaultPosition),this._moveNode(e,t,i,n,!1,s);(!0===r.alwaysCopy||"multitree"===r.alwaysCopy&&e.rt._getIndex()!==e.ot._getIndex())&&(n=!0),this._moveNode(e,t,i,n,!0,s)},_crrm_remove:function(e){e=this._getNode(e,!0),this.__rollback(),e=this.remove(e)},_crrm_rename:function(e){this._emitEvent;e=this._getNode(e),this.__rollback(),this._crrm_showInput(e,function(e,t,i){})},_crrm_showInput:function(e,t){e=this._getNode(e);var i=this._isRtl,n=this._data.crrm.defaults.inputWidthLimit,o=e.children("ins").width(),s=e.find("> a:visible > ins").width()*e.find("> a:visible > ins").length,r=this.getText(e),a=$("<div />",{css:{position:"absolute",top:"-200px",left:i?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),l=e.css("position","relative").append($("<input />",{value:r,class:"oj-tree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:i?"auto":o+s+4+"px",right:i?o+s+4+"px":"auto",top:"0px",height:this._data.core.li_height-2+"px",lineHeight:this._data.core.li_height-2+"px",width:"150px"},blur:$.proxy(function(){var i=e.children(".oj-tree-rename-input"),n=i.val();""===(n=this._escapeHtml(n))&&(n=r),a.remove(),i.remove(),this._set_text(e,r),n!=r&&this._renameNode(e,n),t.call(this,e,n,r),e.css("position","")},this),keyup:function(e){var t=e.keyCode||e.which;if(27==t)return this.value=r,void this.blur();13!=t?l.width(Math.min(a.text("pW"+this.value).width(),n)):this.blur()},keypress:function(e){if(13==(e.keyCode||e.which))return!1}})).children(".oj-tree-rename-input");this._set_text(e,""),a.css({fontFamily:l.css("fontFamily")||"",fontSize:l.css("fontSize")||"",fontWeight:l.css("fontWeight")||"",fontStyle:l.css("fontStyle")||"",fontStretch:l.css("fontStretch")||"",fontVariant:l.css("fontVariant")||"",letterSpacing:l.css("letterSpacing")||"",wordSpacing:l.css("wordSpacing")||""}),l.width(Math.min(a.text("pW"+l[0].value).width(),n))[0].select()},_crrm_create:function(e,t,i,n,o){var s=this;return(e=this._getNode(e))||(e=-1),this.__rollback(),this._createNode(e,t,i,function(e){var t=this._getParent(e),i=$(e).index();n&&n.call(this,e),t.length&&t.hasClass(zt._OJ_COLLAPSED)&&this.expand(t,!1,!0),o?s._emitEvent({obj:e,name:this.getText(e),parent:t,position:i}):this._crrm_showInput(e,function(e,n,o){s._emitEvent({obj:e,name:n,parent:t,position:i})})})},_isHtml:function(e){var t=!1;return e&&e.length>=3&&(t="<"===(e=e.trim()).charAt(0)),t},_applyEmptyText:function(){var e=this.options.emptyText;if("string"!=typeof e&&(e=this._getString("labelNoData")),e&&e.length>0){var t=this._$container_ul,i=$("<li class='oj-tree-empty'></li>");i[0].textContent=e,t.empty().append(i)}},_processSubId:function(e){var t,i,n,o,s,r,a,l=null;if(e&&(t=e.subId),!t)return null;if(3===(n=t.split("[")).length&&(n[0]=n[0].trim(),"oj-tree-node"===n[0]&&(n[1]=n[1].trim(),s=n[1].charAt(0),(r=n[1].indexOf(s,1))>=0&&(o=n[1].substring(1,r).trim(),n[2]=n[2].trim(),s=n[2].charAt(0),(r=n[2].indexOf(s,1))>=0)))){l=n[2].substring(1,r).trim();try{i=this._getNode(o)}catch(e){i=null}if(l&&i&&-1!==i)switch(l){case"icon":this._data.themes.icons&&(a=i.find(" > a > ins:eq(0)"));break;case"link":a=i.find(" > a:eq(0)");break;case"disclosure":this._isLeaf(i)||(a=i.find(" > ins:eq(0)"));break;case"title":a=i.find(" > a > span")}}return a&&a.length?a[0]:null},_getSubIdFromNodeElem:function(e){var t,i,n=e?this._getNode(e):null,o=null;return n&&-1!=n&&n.length&&n.hasClass("oj-tree-node")&&e.tagName&&e.parentNode&&(t=e.tagName,i=e.parentNode.tagName,"SPAN"===t?o="title":"A"===t?o="link":"INS"===t&&(e=$(e),"LI"===i&&e.hasClass("oj-tree-disclosure-icon")?o="disclosure":"A"===i&&e.hasClass(r)&&(o="icon"))),o?{subId:"oj-tree-node['#"+n.attr("id")+"']['"+o+"']"}:null},_hideDots:function(){this._data.themes.dots=!1,this._$container.children("ul").addClass("oj-tree-no-dots")},_showDots:function(){this._data.themes.dots=!0,this._$container.children("ul").removeClass("oj-tree-no-dots")},_isOptExpandAll:function(){var e=this.options.initExpanded;return e&&"all"==e||$.isArray(e)&&e.length&&"all"==e[0]},_getString:function(e){var t,i=this._data.core.strings;return(t=i[e])||(t=this.getTranslatedString(e),t=this._escapeHtml(t),i[e]=t),t},_escapeHtml:function(e){var t=document.createElement("div");return $(t).text(e),t.textContent},_getNodeHeight:function(){return this._data.core.li_height},_getAnimDuration:function(){var e,t,i,n=0;return window.getComputedStyle&&((t=this._data.ui.animDurDiv)||(t=$("<div id='ojtree-comp-animduration'><span class='oj-tree-transition'>dummy</span></div>"),this._data.ui.animDurDiv=t,$("body").append(t)),i=t[0].childNodes[0],e=(e=window.getComputedStyle(i)).transitionDuration?e.transitionDuration:e["-webkit-transition-duration"]?e["-webkit-transition-duration"]:0,t.detach(),"string"==typeof e&&e.length>1&&("s"==e.charAt(e.length-1).toLowerCase()?(e=e.substring(0,e.length-1),e=parseFloat(e),isNaN(e)||(n=1e3*e)):e.length>2&&"ms"==e.substring(e.length-2).toLowerCase()&&(e.substring(0,e.length-2),e=parseFloat(e),isNaN(e)||(n=e)))),n},_varCopy:function(e,t){var i={};return i[t]=e[t],$.extend(!0,{},i)[t]},_trace:function(e,t){}})}(),i.TreeDataProvider=function(){},i.__registerWidget("oj.ojTreemap",$.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{animationDuration:void 0,animationOnDataChange:"none",animationOnDisplay:"none",animationUpdateColor:"",hiddenCategories:[],highlightedCategories:[],highlightMatch:"all",hoverBehavior:"none",hoverBehaviorDelay:200,nodeContent:{renderer:null},tooltip:{renderer:null},groupGaps:"outer",displayLevels:Number.MAX_VALUE,layout:"squarified",nodes:null,nodeDefaults:{labelStyle:void 0,labelDisplay:"node",groupLabelDisplay:"header",labelHalign:"center",labelMinLength:1,labelValign:"center",hoverColor:void 0,selectedInnerColor:void 0,selectedOuterColor:void 0,header:{backgroundColor:void 0,borderColor:void 0,hoverBackgroundColor:void 0,hoverInnerColor:void 0,hoverOuterColor:void 0,selectedBackgroundColor:void 0,selectedInnerColor:void 0,selectedOuterColor:void 0,labelHalign:"start",labelStyle:void 0,isolate:"on",useNodeColor:"off"}},nodeSeparators:"gaps",selectionMode:"multiple",sorting:"off",colorLabel:"",sizeLabel:"",drilling:"off",rootNode:"",selection:[],isolatedNode:"",touchResponse:"auto",beforeDrill:null,drill:null},_CreateDvtComponent:function(e,t,i){return dvt.Treemap.newInstance(e,t,i)},_ConvertLocatorToSubId:function(e){var t=e.subId;return"oj-treemap-node"==t?t="node"+this._GetStringFromIndexPath(e.indexPath):"oj-treemap-tooltip"==t&&(t="tooltip"),t},_ConvertSubIdToLocator:function(e){var t={};return 0==e.indexOf("node")?(t.subId="oj-treemap-node",t.indexPath=this._GetIndexPath(e)):"tooltip"==e&&(t.subId="oj-treemap-tooltip"),t},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-treemap"),e},_GetChildStyleClasses:function(){var e=this._super();return e["oj-dvtbase oj-treemap"]={path:"animationDuration",property:"ANIM_DUR"},e["oj-treemap-attribute-type-text"]={path:"styleDefaults/_attributeTypeTextStyle",property:"TEXT"},e["oj-treemap-attribute-value-text"]={path:"styleDefaults/_attributeValueTextStyle",property:"TEXT"},e["oj-treemap-drill-text "]={path:"styleDefaults/_drillTextStyle",property:"TEXT"},e["oj-treemap-current-drill-text "]={path:"styleDefaults/_currentTextStyle",property:"TEXT"},e["oj-treemap-node"]={path:"nodeDefaults/labelStyle",property:"TEXT"},e["oj-treemap-node oj-hover"]={path:"nodeDefaults/hoverColor",property:"border-top-color"},e["oj-treemap-node oj-selected"]=[{path:"nodeDefaults/selectedOuterColor",property:"border-top-color"},{path:"nodeDefaults/selectedInnerColor",property:"border-bottom-color"}],e["oj-treemap-node-header"]=[{path:"nodeDefaults/header/backgroundColor",property:"background-color"},{path:"nodeDefaults/header/borderColor",property:"border-top-color"},{path:"nodeDefaults/header/labelStyle",property:"TEXT"}],e["oj-treemap-node-header oj-hover"]=[{path:"nodeDefaults/header/hoverBackgroundColor",property:"background-color"},{path:"nodeDefaults/header/hoverOuterColor",property:"border-top-color"},{path:"nodeDefaults/header/hoverInnerColor",property:"border-bottom-color"},{path:"nodeDefaults/header/_hoverLabelStyle",property:"TEXT"}],e["oj-treemap-node-header oj-selected"]=[{path:"nodeDefaults/header/selectedBackgroundColor",property:"background-color"},{path:"nodeDefaults/header/selectedOuterColor",property:"border-top-color"},{path:"nodeDefaults/header/selectedInnerColor",property:"border-bottom-color"},{path:"nodeDefaults/header/_selectedLabelStyle",property:"TEXT"}],e},_GetEventTypes:function(){return["optionChange","drill","beforeDrill"]},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtTreemapBundle.COLOR"]=e.labelColor,t["DvtTreemapBundle.ISOLATE"]=e.tooltipIsolate,t["DvtTreemapBundle.RESTORE"]=e.tooltipRestore,t["DvtTreemapBundle.SIZE"]=e.labelSize,t["DvtUtilBundle.TREEMAP"]=e.componentName,t},_HandleEvent:function(e){var t=e.type;if("isolate"===t){var i=this.options._isolatedNodes;i||(this.options._isolatedNodes=[],i=this.options._isolatedNodes);var n=e.id;n?("on",i.push(n),this._UserOptionChange("isolatedNode",n)):("off",n=i.pop(),this._UserOptionChange("isolatedNode",i.length>0?i[i.length]:null))}else if("drill"==t){var o={id:e.id,data:e.data};this._IsCustomElement()||(o.component=e.component),e.id&&this._trigger("beforeDrill",null,o)&&(this._UserOptionChange("rootNode",e.id),this._Render(),this._trigger("drill",null,o))}else this._super(e)},_GetComponentRendererOptions:function(){return["tooltip/renderer","nodeContent/renderer"]},_ProcessOptions:function(){this._super();var e=this.options.nodeContent;e&&e._renderer&&(e.renderer=this._GetTemplateRenderer(e._renderer,"nodeContent"))},_LoadResources:function(){null==this.options._resources&&(this.options._resources={});var e=this.options._resources;e.isolate="oj-treemap-isolate-icon",e.isolateOver="oj-treemap-isolate-icon oj-hover",e.isolateDown="oj-treemap-isolate-icon oj-active",e.restore="oj-treemap-restore-icon",e.restoreOver="oj-treemap-restore-icon oj-hover",e.restoreDown="oj-treemap-restore-icon oj-active"},getNode:function(e){return this._component.getAutomation().getNode(e)},getContextByNode:function(e){var t=this.getSubIdByNode(e);return t&&"oj-treemap-tooltip"!==t.subId?t:null},_GetComponentDeferredDataPaths:function(){return{root:["nodes"]}}}),i.CustomElementBridge.registerMetadata("oj-treemap","dvtBaseComponent",{properties:{animationDuration:{type:"number"},animationOnDataChange:{type:"string",enumValues:["auto","none"]},animationOnDisplay:{type:"string",enumValues:["auto","none"]},animationUpdateColor:{type:"string"},colorLabel:{type:"string"},displayLevels:{type:"number"},drilling:{type:"string",enumValues:["on","off"]},groupGaps:{type:"string",enumValues:["all","none","outer"]},hiddenCategories:{type:"Array<string>",writeback:!0},highlightedCategories:{type:"Array<string>",writeback:!0},highlightMatch:{type:"string",enumValues:["any","all"]},hoverBehavior:{type:"string",enumValues:["dim","none"]},hoverBehaviorDelay:{type:"number"},isolatedNode:{type:"string",writeback:!0},layout:{type:"string",enumValues:["sliceAndDiceHorizontal","sliceAndDiceVertical","squarified"]},nodeDefaults:{type:"object",properties:{groupLabelDisplay:{type:"string",enumValues:["node","off","header"]},header:{type:"object",properties:{backgroundColor:{type:"string"},borderColor:{type:"string"},hoverBackgroundColor:{type:"string"},hoverInnerColor:{type:"string"},hoverOuterColor:{type:"string"},isolate:{type:"string",enumValues:["on","off"]},labelHalign:{type:"string",enumValues:["center","end","start"]},labelStyle:{type:"object"},selectedBackgroundColor:{type:"string"},selectedInnerColor:{type:"string"},selectedOuterColor:{type:"string"},useNodeColor:{type:"string",enumValues:["on","off"]}}},hoverColor:{type:"string"},labelDisplay:{type:"string",enumValues:["off","node"]},labelHalign:{type:"string",enumValues:["start","end","center"]},labelStyle:{type:"object"},labelValign:{type:"string",enumValues:["top","bottom","center"]},selectedInnerColor:{type:"string"},selectedOuterColor:{type:"string"}}},nodes:{type:"Array<object>|Promise"},nodeContent:{type:"object",properties:{renderer:{}}},nodeSeparators:{type:"string",enumValues:["bevels","gap"]},rootNode:{type:"string"},selection:{type:"Array<string>",writeback:!0},selectionMode:{type:"string",enumValues:["none","single","multiple"]},sizeLabel:{type:"string"},sorting:{type:"string",enumValues:["on","off"]},tooltip:{type:"object",properties:{renderer:{}}},touchResponse:{type:"string",enumValues:["touchStart","auto"]},translations:{type:"Object",properties:{componentName:{type:"string",value:"Treemap"},labelAndValue:{type:"string",value:"{0}: {1}"},labelClearSelection:{type:"string",value:"Clear Selection"},labelColor:{type:"string",value:"Color"},labelCountWithTotal:{type:"string",value:"{0} of {1}"},labelDataVisualization:{type:"string",value:"Data Visualization"},labelInvalidData:{type:"string",value:"Invalid data"},labelNoData:{type:"string",value:"No data to display"},labelSize:{type:"string",value:"Size"},stateCollapsed:{type:"string",value:"Collapsed"},stateDrillable:{type:"string",value:"Drillable"},stateExpanded:{type:"string",value:"Expanded"},stateHidden:{type:"string",value:"Hidden"},stateIsolated:{type:"string",value:"Isolated"},stateMaximized:{type:"string",value:"Maximized"},stateMinimized:{type:"string",value:"Minimized"},stateSelected:{type:"string",value:"Selected"},stateUnselected:{type:"string",value:"Unselected"},stateVisible:{type:"string",value:"Visible"},tooltipIsolate:{type:"string",value:"Isolate"},tooltipRestore:{type:"string",value:"Restore"}}}},events:{beforeDrill:{},drill:{}},methods:{getContextByNode:{},getNode:{}},extension:{_WIDGET_NAME:"ojTreemap"}}),i.CustomElementBridge.register("oj-treemap",{metadata:i.CustomElementBridge.getMetadata("oj-treemap")}),i.__registerWidget("oj.ojTreeView",$.oj.baseComponent,{version:"1.0.0",defaultElement:"<div>",widgetEventPrefix:"oj",options:{currentItem:null,data:null,dnd:{drag:null,drop:null},expanded:new i.ExpandedKeySet,item:{focusable:null,renderer:null,selectable:null},selection:[],selectionMode:"none",animateEnd:null,animateStart:null,beforeCollapse:null,beforeCurrentItem:null,beforeExpand:null,collapse:null,expand:null},_ComponentCreate:function(){this._super()},_AfterCreate:function(){this._super(),this._initRender(),this._render()},_initRender:function(){var e=this;this._on(this.element,{click:function(t){e._handleClick(t)},mouseover:function(t){e._handleMouseOver(t)},mouseout:function(t){e._handleMouseOut(t)},mousedown:function(t){e._handleMouseDown(t)},mouseup:function(t){e._handleMouseUp(t)},keydown:function(t){e._handleKeyDown(t)},dragstart:function(t){e._handleDragStart(t)},drag:function(t){e._handleDragSourceEvent(t,"drag")},dragend:function(t){e._handleDragSourceEvent(t,"dragEnd")},dragenter:function(t){e._handleDropTargetEvent(t,"dragEnter")},dragover:function(t){e._handleDropTargetEvent(t,"dragOver")},dragleave:function(t){e._handleDropTargetEvent(t,"dragLeave")},drop:function(t){e._handleDropTargetEvent(t,"drop")}});var t=$(document.createElement("span")).addClass("oj-treeview-drop-marker-icon oj-component-icon");this._dropMarker=$(document.createElement("div")).addClass("oj-treeview-drop-marker").append(t).appendTo(this.element),this._dropMarkerRect=this._dropMarker[0].getBoundingClientRect(),this._dropMarker.hide(),this._dropLine=$(document.createElement("div")).addClass("oj-treeview-drop-line").appendTo(this.element),this._dropLineRect=this._dropLine[0].getBoundingClientRect(),this._dropLine.hide()},_render:function(){var e=this;this.element.removeClass("oj-complete"),this._keyList=new Set,this.options.data?(this.element.find("ul").remove(),this._fetchChildren(null,function(t){e._renderItems(t,e.element),e._resetFocus(),e.element.addClass("oj-complete")})):(this.element.find("ul").addClass("oj-treeview-list").attr("role","group"),this.element.find("li").each(function(){var t=$(this);e._decorateItem(t)}),this._resetFocus(),this.element.addClass("oj-complete")),this._decorateTree(),this._lastSelectedItem=null},_fetchChildren:function(e,t){var n=this.options.data,o={start:0,count:n.getChildCount(e)},s=this._addBusyState("fetching data");n.fetchChildren(e,o,{success:function(e){t(e),s()},error:function(e){i.Logger.error(e),s()}})},_renderItems:function(e,t){for(var i=$(document.createElement("ul")).addClass("oj-treeview-list").attr("role","group").appendTo(t),n=0;n<e.getCount();n++)this._renderItem(i,e,n)},_renderItem:function(e,t,n){n+=t.getStart();var o=t.getData(n),s=t.getMetadata(n),r=s.key;if(this._keyList.has(r))throw new Error("JET TreeView nodes should not have duplicated keys: "+r);this._keyList.add(r);var a=this.options.item.renderer;a=this._WrapCustomElementRenderer(a);var l=$(document.createElement("li")).attr("id",r).appendTo(e);if(a){var u={};for(var h in u.parentElement=l,u.index=n,u.data=o,u.datasource=this.options.data,u.parentKey=this._getKey(this._getParentItem(l)),u.component=i.Components.__GetWidgetConstructor(this.element),this._FixRendererContext&&(u=this._FixRendererContext(u)),s)s.hasOwnProperty(h)&&(u[h]=s[h]);var d=a.call(this,u);if(null!=d)if(null===d.parentNode||d.parentNode instanceof DocumentFragment)l.append(d);else if(null!=d.parentNode);else if(d.toString){var c=document.createElement("span");c.appendChild(document.createTextNode(d.toString())),l.append(c)}l=e.children().eq(n),u.parentElement=l,null==l.attr("id")&&l.attr("id",r)}l.data("data",o).data("metadata",s),this._decorateItem(l)},_decorateTree:function(){var e=this,t=this._getRoot();this._focusable({element:t,applyHighlight:!0,setupHandlers:function(t,i){e._focusInHandler=t,e._focusOutHandler=i}}),t.attr("tabIndex",0).on("focus",function(t){e._focusInHandler(e._getItemContent(e._currentItem))}).on("blur",function(t){e._focusOutHandler(e._getItemContent(e._currentItem))}).attr("role","tree").attr("aria-labelledby",this.element.attr("id"));var i=this.options.selectionMode;"none"!=i?t.attr("aria-multiselectable","multiple"==i?"true":"false"):t.removeAttr("aria-multiselectable")},_decorateItem:function(e){e.addClass("oj-treeview-item").attr("role","treeitem");var t=this._getItemContent(e);0==t.length&&((t=$(document.createElement("div")).addClass("oj-treeview-item-content").append(e.contents()).appendTo(e)).children("ul").appendTo(e),t.find(".oj-treeview-item-icon").addClass("oj-treeview-icon")),this._select(e);var i=this._getDragOptions();t.attr("draggable",Object.keys(i).length>0?"true":"false");var n=e.children(".oj-treeview-spacer");0==n.length&&(n=$(document.createElement("ins")).addClass("oj-treeview-icon oj-treeview-spacer").prependTo(e)),this._isLeaf(e)?e.addClass("oj-treeview-leaf"):(this._isInitExpanded(e)?this._expand(e,!1):this._collapse(e,!1),n.addClass("oj-treeview-disclosure-icon oj-component-icon oj-clickable-icon-nocontext oj-default"))},_getItems:function(){return this.element.find(".oj-treeview-item")},_getKey:function(e){var t=e.data("metadata");return t?t.key:e.attr("id")},_getItemByKey:function(e){return this.element.find("li#"+e)},_getItemContent:function(e){return e.children(".oj-treeview-item-content")},_getChildItems:function(e){return e.children(".oj-treeview-list").children(".oj-treeview-item")},_getParentItem:function(e){return e.parent(".oj-treeview-list").parent(".oj-treeview-item")},_getSubtree:function(e){return e.children(".oj-treeview-list")},_getRoot:function(){return this.element.children(".oj-treeview-list")},_isLeaf:function(e){var t=e.data("metadata");return!(t?!t.leaf:this._getSubtree(e).length>0)},_isInitExpanded:function(e){var t=this._getKey(e),i=this.options.expanded;return!(!i||!i.has)&&i.has(t)},_isExpanded:function(e){return e.hasClass("oj-expanded")},_expand:function(e,t,i,n){var o=this;if(!this._isExpanded(e)&&!this._isLeaf(e)){if(t&&!this._trigger("beforeExpand",i,this._getEventPayload(e))&&!1!==n)return;if(this._lastSelectedItem=null,0==this._getSubtree(e).length)return o._fetchChildren(o._getKey(e),function(n){o._renderItems(n,e),o._expandAfterFetch(e,t,i)});o._expandAfterFetch(e,t,i)}},_expandAfterFetch:function(e,t,i){var n=this;e.removeClass("oj-collapsed").addClass("oj-expanded").attr("aria-expanded","true");var o=this._getSubtree(e);if(o.css("max-height","none"),t){var s=this._addBusyState("animating expand");e.addClass("oj-treeview-animated"),this._startAnimation(o,"expand").then(function(){e.removeClass("oj-treeview-animated"),n._trigger("expand",i,n._getEventPayload(e));var t=n.options.expanded.add([n._getKey(e)]);n._userOptionChange("expanded",t,i),s()})}},_collapse:function(e,t,i,n){var o=this;if(!e.hasClass("oj-collapsed")&&!this._isLeaf(e)){if(t&&!this._trigger("beforeCollapse",i,this._getEventPayload(e))&&!1!==n)return;e.removeClass("oj-expanded").addClass("oj-collapsed").attr("aria-expanded","false"),this._lastSelectedItem=null;var s=this._getSubtree(e);if(t){var r=this._addBusyState("animating collapse");e.addClass("oj-treeview-animated"),this._startAnimation(s,"collapse").then(function(){s.css("max-height",0),e.removeClass("oj-treeview-animated"),o._trigger("collapse",i,o._getEventPayload(e));var t=o.options.expanded.delete([o._getKey(e)]);o._userOptionChange("expanded",t,i),r()})}else s.css("max-height",0)}},_startAnimation:function(e,t){this.defaultOptions||(this.defaultOptions=i.ThemeUtils.parseJSONFromFontFamily("oj-treeview-option-defaults"));var n=(this.defaultOptions.animation||{})[t];return i.AnimationUtils.startAnimation(e[0],t,n,this)},_getEventPayload:function(e){return{key:this._getKey(e),item:e[0]}},_isActionable:function(e,t){var i=this.options.item[t+"able"];return!1!==i&&("function"!=typeof i||i(this.getContextByNode(e[0])))},_isSelected:function(e){var t=this.options.selectionMode,i=this.options.selection;if("none"===t)return!1;"single"===t&&i.length>1&&(i=[i[0]]);var n=this._getKey(e);return-1!=i.indexOf(n)},_select:function(e,t){var n=this.options.selectionMode;if("none"!==n&&this._isActionable(e,"select")){var o=this._isSelected(e);if(t){var s=i.DomUtils.isTouchSupported(),r=i.DomUtils.isMetaKeyPressed(t),a="multiple"===n,l=40==t.keyCode||38==t.keyCode,u=this._getKey(e),h=[];if(a&&t.shiftKey&&!l){r?h=this.options.selection.slice(0):this._clearSelection();for(var d=this._lastSelectedItem,c=d&&d.offset().top<e.offset().top?this._getNextActionableItem.bind(this):this._getPreviousActionableItem.bind(this);d&&d[0]!=e[0];){var p=this._getKey(d);-1==h.indexOf(p)&&(h.push(p),this._setSelected(d)),d=c(d,"select")}o=!0,h.push(u)}else a&&(r||s||l)?(o=!o,h=this.options.selection.slice(0),o?h.push(u):h.splice(h.indexOf(u),1)):(this._clearSelection(),(s||32==t.keyCode)&&o?(o=!1,h=[]):(o=!0,h=[u]));this._userOptionChange("selection",h,t),this._lastSelectedItem=e}o?this._setSelected(e):this._setUnselected(e)}},_setSelected:function(e){this._getItemContent(e).addClass("oj-selected"),e.attr("aria-selected","true")},_setUnselected:function(e){this._getItemContent(e).removeClass("oj-selected"),e.attr("aria-selected","false")},_clearSelection:function(){this._setUnselected(this._getItems())},_focus:function(e,t){if(this._isActionable(e,"focus")){if(t){var i=this._getEventPayload(e);if(this._currentItem&&(i.previousKey=this._getKey(this._currentItem),i.previousItem=this._currentItem[0]),!this._trigger("beforeCurrentItem",t,i))return;this._userOptionChange("currentItem",this._getKey(e),t)}this._focusOutHandler(this._getItemContent(this._currentItem)),this._focusInHandler(this._getItemContent(e)),this._setCurrentItem(e)}},_resetFocus:function(){if(this.options.currentItem){var e=this._getItemByKey(this.options.currentItem);if(e.length>0)return void this._setCurrentItem(e)}var t=this._getItems().first();this._setCurrentItem(t),this._userOptionChange("currentItem",this._getKey(this._currentItem),null)},_setCurrentItem:function(e){this._currentItem=e,this._getRoot().attr("aria-activedescendant",this._getKey(e))},_addBusyState:function(e){var t=i.Context.getContext(this.element[0]).getBusyContext(),n=this.element.attr("id");return t.addBusyState({description:"The component identified by '"+n+"', "+e})},_userOptionChange:function(e,t,i){this.option(e,t,{_context:{originalEvent:i,writeback:!0,internalSet:!0}})},_getDragOptions:function(){return((this.options.dnd||{}).drag||{}).items||{}},_getDropOptions:function(){return((this.options.dnd||{}).drop||{}).items||{}},_getClosestItem:function(e){return e.closest(".oj-treeview-item")},_getClosestItemContent:function(e){return e.closest(".oj-treeview-item-content")},_getClosestDisclosureIcon:function(e){return e.closest(".oj-treeview-disclosure-icon")},_handleClick:function(e){var t=this._getClosestDisclosureIcon($(e.target));if(t.length>0){var i=t.closest(".oj-treeview-item");this._isExpanded(i)?this._collapse(i,!0,e):this._expand(i,!0,e)}else{var n=this._getClosestItemContent($(e.target));if(n.length>0)return i=n.parent(),this._select(i,e),void this._focus(i,e);"none"!=this.options.selectionMode&&(this._clearSelection(),this._lastSelectedItem=null,this._userOptionChange("selection",[],e))}},_handleMouseOver:function(e){if(!i.DomUtils.isTouchSupported()){var t=this._getClosestDisclosureIcon($(e.target));0==t.length&&(t=this._getClosestItemContent($(e.target))),t.removeClass("oj-default"),t.addClass("oj-hover")}},_handleMouseOut:function(e){if(!i.DomUtils.isTouchSupported()){var t=this._getClosestDisclosureIcon($(e.target));t.removeClass("oj-selected"),0==t.length&&(t=this._getClosestItemContent($(e.target))),t.addClass("oj-default"),t.removeClass("oj-hover")}},_handleMouseDown:function(e){this._getClosestDisclosureIcon($(e.target)).addClass("oj-selected")},_handleMouseUp:function(e){this._getClosestDisclosureIcon($(e.target)).removeClass("oj-selected")},_handleKeyDown:function(e){var t,i=e.keyCode,n=this._currentItem;if(38==i||40==i)(t=40==i?this._getNextActionableItem(n,"focus"):this._getPreviousActionableItem(n,"focus"))&&(e.preventDefault(),this._isSelected(n)&&e.shiftKey&&this._select(this._isSelected(t)?n:t,e),this._focus(t,e));else if(37==i||39==i){var o="rtl"==this._GetReadingDirection(),s=!o&&39==i||o&&37==i;!s||this._isLeaf(n)||this._isExpanded(n)?s||this._isLeaf(n)||!this._isExpanded(n)?(t=s?this._getNextActionableItem(n,"focus"):this._getPreviousActionableItem(n,"focus"))&&(e.preventDefault(),this._focus(t,e)):(e.preventDefault(),this._collapse(n,!0,e)):(e.preventDefault(),this._expand(n,!0,e))}else 13!=i&&32!=i||(e.preventDefault(),this._select(n,e))},_getNextItem:function(e){if(!this._isLeaf(e)&&this._isExpanded(e)){var t=this._getChildItems(e).first();if(t.length>0)return t}for(var i=e;i.length>0;){var n=i.next(".oj-treeview-item");if(n.length>0)return n;i=this._getParentItem(i)}return null},_getNextActionableItem:function(e,t){for(;null!=e;)if(null!=(e=this._getNextItem(e))&&this._isActionable(e,t))return e;return null},_getPreviousItem:function(e){for(var t=e.prev(".oj-treeview-item");t.length>0;){if(this._isLeaf(t)||!this._isExpanded(t))return t;var i=this._getChildItems(t).last();if(!(i.length>0))return t;t=i}var n=this._getParentItem(e);return n.length>0?n:null},_getPreviousActionableItem:function(e,t){for(;null!=e;)if(null!=(e=this._getPreviousItem(e))&&this._isActionable(e,t))return e;return null},_handleDragStart:function(e){var t=this,n="rtl"==this._GetReadingDirection(),o=this._getClosestItem($(e.target));if(0!=o.length){var s=$();if(this._isSelected(o))for(var r=this.options.selection,a=0;a<r.length;a++)s=s.add(this._getItemByKey(r[a]));else this._select(o,e),s=s.add(o);var l=this._getDragOptions(),u=e.originalEvent.dataTransfer,h=$(document.createElement("ul")).addClass("oj-treeview-drag-image oj-treeview-list");i.AgentUtils.getAgentInfo().browser===i.AgentUtils.BROWSER.SAFARI&&h.css("position","absolute");var d=[],c=1/0,p=1/0;s.each(function(e){var i=$(this);d.push(i.data("data"));var o=i.offset();n&&(o.left=t._getItemContent(i).offset().left);var s=i.clone().css({top:o.top,left:o.left});t._getSubtree(s).remove(),o.top<c&&(c=o.top),o.left<p&&(p=o.left),h.append(s)}),h.children().each(function(){$(this).css({top:parseFloat($(this).css("top"))-c,left:parseFloat($(this).css("left"))-p})});var _=l.dataTypes||[];for(a=0;a<_.length;a++)u.setData(_[a],JSON.stringify(d));$("body").append(h),u.setDragImage(h[0],e.pageX-p,e.pageY-c),setTimeout(function(){h.remove()},0);var m=l.dragStart;m&&m(e.originalEvent,{items:d})}},_handleDragSourceEvent:function(e,t){var i=this._getDragOptions()[t];i&&i(e.originalEvent)},_handleDropTargetEvent:function(e,t){var i=this._getDropOptions(),n=i.dataTypes||[],o=i[t],s=$(e.target).closest(".oj-treeview-item"),r=s.children(".oj-treeview-spacer")[0],a=r.getBoundingClientRect(),l=r.offsetTop,u=r.offsetLeft,h=l+a.height/2,d="inside",c=e.pageY-a.top;c<.25*a.height?d="before":c>.75*a.height&&(d=this._isExpanded(s)?"first":"after"),o&&o(e.originalEvent,{item:s[0],position:d});for(var p=0;p<n.length;p++){var _=e.originalEvent.dataTransfer.types;if(_&&_.indexOf(n[p])>=0){e.preventDefault();break}}if("dragEnter"!=t&&"dragOver"!=t||!e.originalEvent.defaultPrevented)this._dropMarker.hide(),this._dropLine.hide();else{var m="rtl"==this._GetReadingDirection(),g=h,f=m?u-this._dropLineRect.width:u+a.width,v=h-this._dropMarkerRect.height/2,C=u+a.width/2-this._dropMarkerRect.width/2;if("before"==d)v-=a.height/2,g-=a.height/2;else if(("after"==d||"first"==d)&&(v+=a.height/2,g+=a.height/2,"first"==d)){var y=(m?-1:1)*a.width;C+=y,f+=y}this._dropMarker.css("top",v+"px").css("left",C+"px").show(),"inside"!=d?this._dropLine.css("top",g+"px").css("left",f+"px").show():this._dropLine.hide()}},_NotifyContextMenuGesture:function(e,t,i){if("keyboard"===i){var n=this._currentItem?this._getItemContent(this._currentItem):this.element,o={launcher:n,initialFocus:"menu",position:{my:"start top",at:"start bottom",of:n}};this._OpenContextMenu(t,i,o)}else this._superApply(arguments)},refresh:function(){this._super(),this._render()},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;var t,i=e.key,n=e.subId,o=this._getItemByKey(i);return"oj-treeview-disclosure"===n?t=o.children(".oj-treeview-disclosure-icon")[0]:"oj-treeview-item"===n&&(t=o.children(".oj-treeview-item-content")[0]),t||null},getSubIdByNode:function(e){if(!$.contains(this.element[0],e))return null;var t,i=this._getClosestDisclosureIcon($(e)),n=this._getClosestItem($(e));if(i.length>0)t="oj-treeview-disclosure";else{if(!(n.length>0))return null;t="oj-treeview-item"}return{subId:t,key:this._getKey(n)}},getContextByNode:function(e){if(!$.contains(this.element[0],e))return null;var t=this._getClosestItem($(e));if(t.length<1)return null;var n={subId:"oj-treeview-item"};n.index=t.parent().children(".oj-treeview-item").index(t),n.parentKey=this._getKey(this._getParentItem(t)),n.component=i.Components.__GetWidgetConstructor(this.element),this._FixRendererContext&&(n=this._FixRendererContext(n));var o=t.data("metadata");if(o)for(var s in n.data=t.data("data"),n.datasource=this.options.data,o)o.hasOwnProperty(s)&&(n[s]=o[s]);else n.key=this._getKey(t),n.leaf=this._isLeaf(t),n.depth=t.parents(".oj-treeview-list").length;return n},_setOption:function(e,t,i){var n=this;if(this._superApply(arguments),"expanded"==e)this._getItems().each(function(){var e=$(this);n._isInitExpanded(e)?n._expand(e,!0):n._collapse(e,!0)});else if("selection"==e)this._getItems().each(function(){var e=$(this);n._select(e)});else{if("currentItem"!=e)return void this.refresh();this._resetFocus()}},_destroy:function(){this._super()}}),i.CustomElementBridge.registerMetadata("oj-tree-view","baseComponent",{properties:{currentItem:{type:"any",readOnly:!0,writeback:!0},data:{},dnd:{type:"object",properties:{drag:{type:"object",properties:{items:{type:"object",properties:{dataTypes:{type:"Array<string>"},drag:{},dragEnd:{},dragStart:{}}}}},drop:{type:"object",properties:{items:{type:"object",properties:{dataTypes:{type:"Array<string>"},dragEnter:{},dragLeave:{},dragOver:{},drop:{}}}}}}},expanded:{writeback:!0},item:{type:"object",properties:{focusable:{},renderer:{},selectable:{}}},selection:{type:"Array<object>",writeback:!0},selectionMode:{type:"string",enumValues:["none","single","multiple"]}},events:{animateEnd:{},animateStart:{},beforeCollapse:{},beforeCurrentItem:{},beforeExpand:{},collapse:{},expand:{}},methods:{getContextByNode:{}},extension:{_WIDGET_NAME:"ojTreeView"}}),i.CustomElementBridge.register("oj-tree-view",{metadata:i.CustomElementBridge.getMetadata("oj-tree-view")});var Kt={properties:{valid:{type:"string",enumValues:["valid","invalidShown","invalidHidden","pending"],readOnly:!0,writeback:!0}},methods:{focusOn:{},showMessages:{}},extension:{_CONSTRUCTOR:function(e){var t,n=this,o=e.element,s=[];function r(){s=[],function e(t){var i;var n;var o;var r;var a=[];n=t.childNodes;r=n.length;for(o=0;o<r;o++)i=n[o],c(i)?s.push(i):a.push(i);r=a.length;for(o=0;o<r;o++)e(a[o])}(o),e.props.valid=d();for(var t=s.length,i=0;i<t;i++)a(s[i])}function a(e){e.addEventListener("validChanged",u.bind(this)),e.addEventListener("disabledChanged",h.bind(this)),e.addEventListener("readonlyChanged",h.bind(this))}function l(e){e.removeEventListener("validChanged",u),e.removeEventListener("disabledChanged",h),e.removeEventListener("readonlyChanged",h)}function u(t){e.props.valid=d()}function h(t){var i=t.target,n=i.valid,o=!(i.readonly||i.disabled);"valid"!==n&&(e.props.valid=o&&"invalidShown"===n?"invalidShown":d())}function d(){for(var e,t,i,n,o="valid",r=s.length,a=0;a<r&&"invalidShown"!==o;a++)g(e=s[a])&&(i=e.valid,t=e.disabled,n=e.readonly,t||n||("invalidShown"===i?o="invalidShown":"invalidHidden"===i?o="invalidHidden":"pending"===i&&"valid"===o&&(o="pending")));return o}function c(e){return!!(1===e.nodeType&&-1!==e.tagName.indexOf("-")&&"valid"in e&&g(e)&&void 0!==e.valid)}function p(e,t){var i=t.length;if(c(e))return!0;for(var n=0;n<i;n++)if(c(t[n]))return!0;return!1}function _(e){var t=s.length;if(1!==e.nodeType)return!1;for(var i=0;i<t;i++)if(s[i].contains(e))return!0;return!1}function m(e){for(var t,i=s.length,n=0;n<e.length;n++)if(1===(t=e[n]).nodeType){if(-1!==s.indexOf(t))return!0;for(var o=0;o<i;o++)if(t.contains(s[o]))return!0}return!1}function g(e){var t,n,o;return t=i.BaseCustomElementBridge.getInstance(e),void 0!==(n=t._WIDGET_ELEM)&&(o=i.Components.__GetWidgetConstructor(n)),!(void 0!==n&&!o)}n._rootElementMutationObserver=new MutationObserver(function(e){if(document.body.contains(o)){for(var t,i,n,s,a=e.length,u=!1,h=0;h<a&&!u;h++)i=e[h],s=i.target,n=i.removedNodes,t=i.addedNodes,!(u=m(n))&&t.length>0&&!_(s)&&p(s,t)&&(u=!0);u&&(!function(e){for(var t=e.length,i=0;i<t;i++)for(var n=e[i],o=n.removedNodes.length,s=0;s<o;s++){var r=n.removedNodes[s];1===r.nodeType&&l(r)}}(e),r())}else this.disconnect()}),n.createDOM=function(){for(o.classList.add("oj-validation-group"),(t=document.createElement("div")).setAttribute("data-oj-context","");o.firstChild;)t.appendChild(o.firstChild);o.appendChild(t)},n.updateDOM=function(){var e=i.Context.getContext(t).getBusyContext();e.whenReady().then(function(){for(var e=s.length,t=0;t<e;t++)l(s[t]);r(),n._rootElementMutationObserver.observe(o,{childList:!0,subtree:!0})})},n.handlePropertyChanged=function(e,t){return!0},n.showMessages=function(){for(var e,t=0;t<s.length;t++)(e=s[t]).disabled||e.readonly||"showMessages"in e&&e.showMessages()},n.focusOn=function(e){var t=null,n=null;"@firstInvalidShown"===e?(n=function(){var e,t=[];if("invalidShown"!==o.valid)return null;for(var i=s.length,n=0;n<i;n++)(e=s[n]).disabled||e.readonly||"invalidShown"===e.valid&&t.push(e);if(0===t.length)return null;return t.sort(function(e,t){return e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1}),t[0]}())&&("focusOn"in n?n.focusOn("@firstInvalidShown"):n.focus()):void 0===e?(t=function(){for(var e=null,t=s.length,i=0;i<t;i++)if(!(e=s[i]).readonly&&!e.disabled)return e;return null}())&&("focusOn"in t?t.focusOn():t.focus()):i.Logger.info("focusOn's parameter value is not '@firstInvalidShown' or empty, so it's a no-op.")}}}};Object.freeze(Kt),i.CustomElementBridge.registerMetadata("oj-validation-group",null,Kt),i.CustomElementBridge.register("oj-validation-group",{metadata:i.CustomElementBridge.getMetadata("oj-validation-group")})}();