/**
 * @license
 * Copyright (c) 2014, 2019, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";!function(){ES6Promise.polyfill();var e={LEVEL_NONE:0,LEVEL_ERROR:1,LEVEL_WARN:2,LEVEL_INFO:3,LEVEL_LOG:4,_METHOD_ERROR:"error",_METHOD_WARN:"warn",_METHOD_INFO:"info",_METHOD_LOG:"log"};e._defaultOptions={level:e.LEVEL_ERROR,writer:null},e._options=e._defaultOptions,e.error=function(t){e._write(e.LEVEL_ERROR,e._METHOD_ERROR,arguments)},e.info=function(t){e._write(e.LEVEL_INFO,e._METHOD_INFO,arguments)},e.warn=function(t){e._write(e.LEVEL_WARN,e._METHOD_WARN,arguments)},e.log=function(t){e._write(e.LEVEL_LOG,e._METHOD_LOG,arguments)},e.option=function(t,i){var n,o,s={};if(0===arguments.length){for(o=Object.keys(e._options),n=0;n<o.length;n++)s[o[n]]=e._options[o[n]];return s}if("string"==typeof t&&void 0===i)return void 0===e._options[t]?null:e._options[t];if("string"==typeof t)e._options[t]=i;else{var r=t;for(o=Object.keys(r),n=0;n<o.length;n++)e.option(o[n],r[o[n]])}},e._write=function(t,i,n){if(!(e.option("level")<t)){var o=e._getWriter();if(null!=o){if(1===n.length&&n[0]instanceof Function)n=[n[0]()];o[i]&&o[i].apply?o[i].apply(o,n):o[i]&&(o[i]=Function.prototype.bind.call(o[i],o),e._write(t,i,n))}}},e._getWriter=function(){var t=null;return e.option("writer")?t=e.option("writer"):"undefined"!=typeof window&&void 0!==window.console&&(t=window.console),t};var t={};"undefined"!=typeof window?t=window:"undefined"!=typeof self&&(t=self);var i=t.oj,n={version:"6.2.0",revision:"2019-03-07_18-03-40",noConflict:function(){t.oj=i}};t.oj=n,n.Assert={};n.Assert.forceDebug=function(){n.Assert.DEBUG=!0},n.Assert.clearDebug=function(){n.Assert.DEBUG=!1},n.Assert.isDebug=function(){return!0===n.Assert.DEBUG},n.Assert.assert=function(e,t){if(n.Assert.DEBUG&&!e){var i=t||"";if(arguments.length>2){i+="(";for(var o=2;o<arguments.length;o+=1)i+=arguments[o];i+=")"}n.Assert.assertionFailed(i,1)}},n.Assert.failedInAbstractFunction=function(){n.Assert.DEBUG&&n.Assert.assertionFailed("Abstract function called",1)},n.Assert.assertPrototype=function(e,t,i){if(n.Assert.DEBUG){var o=t.prototype;if(null!=e)n.Assert.assertType(t,"function",null,1,!1),Object.prototype.isPrototypeOf.call(o,e)||n.Assert.assertionFailed("object '"+e+"' doesn't match prototype "+o,1,i);else n.Assert.assertionFailed("null object doesn't match prototype "+o,1,i)}},n.Assert.assertPrototypeOrNull=function(e,t,i){if(n.Assert.DEBUG&&null!=e){n.Assert.assertType(t,"function",null,1,!1);var o=t.prototype;Object.prototype.isPrototypeOf.call(o,e)||n.Assert.assertionFailed("object '"+e+"' doesn't match prototype "+o,1,i)}},n.Assert.assertPrototypes=function(e,t,i,o){if(n.Assert.DEBUG){var s=t.prototype,r=i.prototype,a=Object.prototype.isPrototypeOf;a.call(s,e)||a.call(r,e)||n.Assert.assertionFailed("object '"+e+"' doesn't match prototype "+s+" or "+r,1,o)}},n.Assert.assertDomNodeOrNull=function(e,t){n.Assert.DEBUG&&e&&void 0===e.nodeType&&n.Assert.assertionFailed(e+" is not a DOM Node",t+1)},n.Assert.assertDomNode=function(e,t){n.Assert.DEBUG&&(e&&void 0!==e.nodeType||n.Assert.assertionFailed(e+" is not a DOM Node",t+1))},n.Assert.assertDomElement=function(e,t){n.Assert.DEBUG&&(n.Assert.assertDomNode(e,1),1!==e.nodeType?n.Assert.assertionFailed(e+" is not a DOM Element",1):t&&e.nodeName!==t&&n.Assert.assertionFailed(e+" is not a "+t+" Element",1))},n.Assert.assertDomElementOrNull=function(e,t){n.Assert.DEBUG&&null!=e&&(n.Assert.assertDomNode(e,1),1!==e.nodeType?n.Assert.assertionFailed(e+" is not a DOM Element",1):t&&e.nodeName!==t&&n.Assert.assertionFailed(e+" is not a "+t+" Element",1))},n.Assert.assertType=function(e,t,i,o,s){if(n.Assert.DEBUG&&!(null==e&&s||typeof e===t)){var r=e+" is not of type "+t;i&&(r=i+r),o||(o=0),n.Assert.assertionFailed(r,o+1)}},n.Assert.assertObject=function(e,t){n.Assert.DEBUG&&n.Assert.assertType(e,"object",t,1,!1)},n.Assert.assertObjectOrNull=function(e,t){n.Assert.DEBUG&&n.Assert.assertType(e,"object",t,1,!0)},n.Assert.assertNonEmptyString=function(e,t){n.Assert.DEBUG&&(n.Assert.assertType(e,"string",t,1,!1),n.Assert.assert(e.length>0,"empty string"))},n.Assert.assertString=function(e,t){n.Assert.DEBUG&&n.Assert.assertType(e,"string",t,1,!1)},n.Assert.assertStringOrNull=function(e,t){n.Assert.DEBUG&&n.Assert.assertType(e,"string",t,1,!0)},n.Assert.assertFunction=function(e,t){n.Assert.DEBUG&&n.Assert.assertType(e,"function",t,1,!1)},n.Assert.assertFunctionOrNull=function(e,t){n.Assert.DEBUG&&n.Assert.assertType(e,"function",t,1,!0)},n.Assert.assertBoolean=function(e,t){n.Assert.DEBUG&&n.Assert.assertType(e,"boolean",t,1,!1)},n.Assert.assertNumber=function(e,t){n.Assert.DEBUG&&n.Assert.assertType(e,"number",t,1,!1)},n.Assert.assertNumberOrNull=function(e,t){n.Assert.DEBUG&&n.Assert.assertType(e,"number",t,1,!0)},n.Assert.assertArray=function(e,t){n.Assert.DEBUG&&(Array.isArray(e)||(void 0===t&&(t=e+" is not an array"),n.Assert.assertionFailed(t,1)))},n.Assert.assertArrayOrNull=function(e,t){n.Assert.DEBUG&&null!=e&&(Array.isArray(e)||(void 0===t&&(t=e+" is not an array"),n.Assert.assertionFailed(t,1)))},n.Assert.assertNonNumeric=function(e,t){n.Assert.DEBUG&&(isNaN(e)||(void 0===t&&(t=e+" is convertible to a number"),n.Assert.assertionFailed(t,1)))},n.Assert.assertNumeric=function(e,t){n.Assert.DEBUG&&isNaN(e)&&(void 0===t&&(t=e+" is not convertible to a number"),n.Assert.assertionFailed(t,1))},n.Assert.assertInSet=function(e,t,i){if(null==e||void 0===t[e.toString()]){if(void 0===i){for(var o=" is not in set: {",s=Object.keys(t),r=0;r<s.length;r++){o+=s[r],o+=","}i=e+(o+="}")}n.Assert.assertionFailed(i,1)}},n.Assert.assertionFailed=function(e,t,i){t||(t=0);var n="Assertion";throw i&&(n+=" ("+i+")"),n+=" failed: ",void 0!==e&&(n+=e),new Error(n)};var o,s,r,a,l,u,d=t.__oj_Assert_DEBUG;void 0!==d&&(n.Assert.DEBUG=d),n.CollectionUtils={},n.CollectionUtils.copyInto=function(e,t,i,o,s){return n.CollectionUtils._copyIntoImpl(e,t,i,o,s,0)},n.CollectionUtils.isPlainObject=function(e){if(null!==e&&"object"==typeof e)try{var t=Object.prototype.hasOwnProperty;if(e.constructor&&t.call(e.constructor.prototype,"isPrototypeOf"))return!0}catch(e){}return!1},n.CollectionUtils._copyIntoImpl=function(e,t,i,o,s,r){var a;if(null==s&&(s=Number.MAX_VALUE),e&&t&&e!==t)for(var l=Object.keys(t),u=0;u<l.length;u++){var d=l[u];a=i?i(d):d;var h=t[d],c=!1;if(o&&r<s){var p=e[a];n.CollectionUtils.isPlainObject(h)&&(null==p||n.CollectionUtils.isPlainObject(p))&&(c=!0,e[a]=p||{},n.CollectionUtils._copyIntoImpl(e[a],h,i,!0,s,r+1))}c||(e[a]=h)}return e},n.Object=function(){this.Init()},n.Object.superclass=null,n.Object._typeName="oj.Object",n.Object._GET_FUNCTION_NAME_REGEXP=/function\s+([\w$][\w$\d]*)\s*\(/,n.Object.prototype={},n.Object.prototype.constructor=n.Object,n.Object.createSubclass=function(e,t,i){n.Assert.assertFunction(e),n.Assert.assertFunctionOrNull(t),n.Assert.assertStringOrNull(i),void 0===t&&(t=n.Object),n.Assert.assert(e!==t,"Class can't extend itself");var o=n.Object._tempSubclassConstructor;o.prototype=t.prototype,e.prototype=new o,e.prototype.constructor=e,e.superclass=t.prototype,i&&(e._typeName=i)},n.Object.copyPropertiesForClass=function(e,t){n.Assert.assertFunction(e),n.Assert.assert(null!=t,"source object cannot be null");for(var i=Object.keys(t),o=0;o<i.length;o++){var s=i[o];e.prototype[s]=t[s]}},n.Object._tempSubclassConstructor=function(){},n.Object.prototype.getClass=function(e){if(void 0===e)e=this;else if(null===e)return null;return e.constructor},n.Object.prototype.clone=function(){var e=new this.constructor;return n.CollectionUtils.copyInto(e,this),e},n.Object.prototype.toString=function(){return this.toDebugString()},n.Object.prototype.toDebugString=function(){return this.getTypeName()+" Object"},n.Object.getTypeName=function(e){n.Assert.assertFunction(e);var t=e._typeName;if(null==t){var i=e.toString(),o=n.Object._GET_FUNCTION_NAME_REGEXP.exec(i);t=o?o[1]:"anonymous",e._typeName=t}return t},n.Object.prototype.getTypeName=function(){return n.Object.getTypeName(this.constructor)},n.Object.prototype.Init=function(){n.Assert.isDebug()&&n.Assert.assert(this.getTypeName,"Not an oj.Object");var e=this.constructor;e._initialized||n.Object._initClasses(e)},n.Object.ensureClassInitialization=function(e){n.Assert.assertFunction(e),e._initialized||n.Object._initClasses(e)},n.Object.prototype.equals=function(e){return this===e},n.Object.createCallback=function(e,t){return n.Assert.assertFunction(t),t.bind(e)},n.Object._initClasses=function(e){n.Assert.isDebug()&&(n.Assert.assertFunction(e),n.Assert.assert(!e._initialized)),e._initialized=!0;var t=e.superclass;if(t){var i=t.constructor;i&&!i._initialized&&n.Object._initClasses(i)}var o=e.InitClass;o&&o.call(e)},n.Object.compareValues=function(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if(null===e||null===t)return!1;if(e.constructor===t.constructor){if(Array.isArray(e))return n.Object._compareArrayValues(e,t);if(e.constructor===Object)return n.Object.__innerEquals(e,t);if(e.valueOf&&"function"==typeof e.valueOf)return e.valueOf()===t.valueOf()}return!1},n.Object._compareArrayValues=function(e,t){if(e.length!==t.length)return!1;for(var i=0,o=e.length;i<o;i++)if(!n.Object.compareValues(e[i],t[i]))return!1;return!0},n.Object._compareIdIndexObject=function(e,t){if("number"==typeof e&&"number"==typeof t||"string"==typeof e&&"string"==typeof t)return e===t;if("object"==typeof e&&"object"==typeof t){if(e.id&&t.id)return e.id===t.id&&(!e.index||!t.index||e.index===t.index);if(e.index&&t.index)return e.index===t.index}return!1},n.Object._compareArrayIdIndexObject=function(e,t){if(!e)return!t||0===t.length;if(!t)return!e||0===e.length;if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++){for(var o=!1,s=0;s<t.length;s++)if(n.Object._compareIdIndexObject(e[i],t[s])){o=!0;break}if(!o)return!1}return!0},n.Object.__innerEquals=function(e,t){if(e===t)return!0;if(!(e instanceof Object&&t instanceof Object))return!1;if(e.constructor!==t.constructor)return!1;var i,o,s=Object.prototype.hasOwnProperty,r=Object.keys(e);for(o=0;o<r.length;o++)if(i=r[o],s.call(e,i)){if(!s.call(t,i))return!1;if(e[i]!==t[i]){if("object"!=typeof e[i])return!1;if(!n.Object.__innerEquals(e[i],t[i]))return!1}}var a=Object.keys(t);for(o=0;o<a.length;o++)if(i=a[o],s.call(t,i)&&!s.call(e,i))return!1;return 0!==r.length||0!==a.length||JSON.stringify(e)===JSON.stringify(t)},n.Object.isEmpty=function(e){var t;if(null==e)return!0;for(t in e)if(e.hasOwnProperty(t))return!1;return!0},n.__isAmdLoaderPresent=function(){return"function"==typeof define&&define.amd},n.StringUtils={},n.StringUtils._TRIM_ALL_RE=/^\s*|\s*$/g,n.StringUtils.isEmpty=function(e){return null===e||0===n.StringUtils.trim(e).length},n.StringUtils.isEmptyOrUndefined=function(e){return!(void 0!==e&&!n.StringUtils.isEmpty(e))},n.StringUtils.isString=function(e){return null!==e&&("string"==typeof e||e instanceof String)},n.StringUtils.trim=function(e){return n.StringUtils.isString(e)?e.replace(n.StringUtils._TRIM_ALL_RE,""):e},n.StringUtils.hashCode=function(e){var t=0;if(0===e.length)return t;for(var i=0;i<e.length;i++){t=(t<<5)-t+e.charCodeAt(i),t&=t}return t},String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var i=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>i.length)&&(t=i.length),t-=e.length;var n=i.lastIndexOf(e,t);return-1!==n&&n===t}),n.AgentUtils=function(){},n.AgentUtils.BROWSER={IE:"ie",FIREFOX:"firefox",SAFARI:"safari",CHROME:"chrome",EDGE:"edge",UNKNOWN:"unknown"},n.AgentUtils.ENGINE={TRIDENT:"trident",WEBKIT:"webkit",GECKO:"gecko",BLINK:"blink",EDGE_HTML:"edgehtml",UNKNOWN:"unknown"},n.AgentUtils.OS={WINDOWS:"Windows",SOLARIS:"Solaris",MAC:"Mac",UNKNOWN:"Unknown",ANDROID:"Android",IOS:"IOS",WINDOWSPHONE:"WindowsPhone",LINUX:"Linux"},n.AgentUtils.DEVICETYPE={PHONE:"phone",TABLET:"tablet",OTHERS:"others"},n.AgentUtils.getAgentInfo=function(e){n.StringUtils.isEmptyOrUndefined(e)&&(e=navigator.userAgent),e=e.toLowerCase();var t=n.StringUtils.hashCode(e),i=n.AgentUtils._currAgentInfo;if(i&&i.hashCode===t)return{os:i.os,browser:i.browser,browserVersion:i.browserVersion,deviceType:i.deviceType,engine:i.engine,engineVersion:i.engineVersion,hashCode:i.hashCode};var o=n.AgentUtils.OS.UNKNOWN,s=n.AgentUtils.BROWSER.UNKNOWN,r=0,a=n.AgentUtils.DEVICETYPE.OTHERS,l=n.AgentUtils.ENGINE.UNKNOWN,u=0;return e.indexOf("iphone")>-1||e.indexOf("ipad")>-1?o=n.AgentUtils.OS.IOS:e.indexOf("mac")>-1?o=n.AgentUtils.OS.MAC:e.indexOf("sunos")>-1?o=n.AgentUtils.OS.SOLARIS:e.indexOf("android")>-1?o=n.AgentUtils.OS.ANDROID:e.indexOf("linux")>-1?o=n.AgentUtils.OS.LINUX:e.indexOf("windows phone")>-1?o=n.AgentUtils.OS.WINDOWSPHONE:e.indexOf("win")>-1&&(o=n.AgentUtils.OS.WINDOWS),o===n.AgentUtils.OS.ANDROID?a=e.indexOf("mobile")>-1?n.AgentUtils.DEVICETYPE.PHONE:n.AgentUtils.DEVICETYPE.TABLET:o===n.AgentUtils.OS.IOS&&(a=e.indexOf("iphone")>-1?n.AgentUtils.DEVICETYPE.PHONE:n.AgentUtils.DEVICETYPE.TABLET),e.indexOf("msie")>-1?(s=n.AgentUtils.BROWSER.IE,r=n.AgentUtils._parseFloatVersion(e,/msie (\d+[.]\d+)/),e.indexOf("trident")&&(l=n.AgentUtils.ENGINE.TRIDENT,u=n.AgentUtils._parseFloatVersion(e,/trident\/(\d+[.]\d+)/))):e.indexOf("trident")>-1?(s=n.AgentUtils.BROWSER.IE,r=n.AgentUtils._parseFloatVersion(e,/rv:(\d+[.]\d+)/),e.indexOf("trident")&&(l=n.AgentUtils.ENGINE.TRIDENT,u=n.AgentUtils._parseFloatVersion(e,/trident\/(\d+[.]\d+)/))):e.indexOf("edge")>-1?(s=n.AgentUtils.BROWSER.EDGE,r=u=n.AgentUtils._parseFloatVersion(e,/edge\/(\d+[.]\d+)/),l=n.AgentUtils.ENGINE.EDGE_HTML):e.indexOf("chrome")>-1?(s=n.AgentUtils.BROWSER.CHROME,(r=n.AgentUtils._parseFloatVersion(e,/chrome\/(\d+[.]\d+)/))>=28?(l=n.AgentUtils.ENGINE.BLINK,u=r):(l=n.AgentUtils.ENGINE.WEBKIT,u=n.AgentUtils._parseFloatVersion(e,/applewebkit\/(\d+[.]\d+)/))):e.indexOf("safari")>-1?(s=n.AgentUtils.BROWSER.SAFARI,r=n.AgentUtils._parseFloatVersion(e,/version\/(\d+[.]\d+)/),l=n.AgentUtils.ENGINE.WEBKIT,u=n.AgentUtils._parseFloatVersion(e,/applewebkit\/(\d+[.]\d+)/)):e.indexOf("firefox")>-1&&(s=n.AgentUtils.BROWSER.FIREFOX,r=n.AgentUtils._parseFloatVersion(e,/rv:(\d+[.]\d+)/),l=n.AgentUtils.ENGINE.GECKO,u=n.AgentUtils._parseFloatVersion(e,/gecko\/(\d+)/)),i={hashCode:t,os:o,browser:s,browserVersion:r,deviceType:a,engine:l,engineVersion:u},n.AgentUtils._currAgentInfo=i,{os:i.os,browser:i.browser,browserVersion:i.browserVersion,deviceType:i.deviceType,engine:i.engine,engineVersion:i.engineVersion,hashCode:i.hashCode}},n.AgentUtils._parseFloatVersion=function(e,t){var i=e.match(t);if(i){var n=i[1];if(n)return parseFloat(n)}return 0},o=/(^array)|(\|array)/,s=/(^object)|(\|object)/,r=/\s*\[[^]*\]\s*/,a=/\s*\{[^]*\}\s*/,l=/^(?:\{\{)([^]+)(?:\}\})$/,u=/^(?:\[\[)([^]+)(?:\]\])$/,n.__AttributeUtils={},n.__AttributeUtils.getExpressionInfo=function(e){var t={};if(e){var i=e.trim(),n=l.exec(i);(n=n?n[1]:null)||(t.downstreamOnly=!0,n=(n=u.exec(i))?n[1]:null),t.expr=n}return t},n.__AttributeUtils.attributeToPropertyName=function(e){return e.toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()})},n.__AttributeUtils.propertyNameToAttribute=function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})},n.__AttributeUtils.eventTypeToEventListenerProperty=function(e){return"on"+e.substr(0,1).toUpperCase()+e.substr(1)},n.__AttributeUtils.eventListenerPropertyToEventType=function(e){return/^on[A-Z]/.test(e)?e.substr(2,1).toLowerCase()+e.substr(3):null},n.__AttributeUtils.propertyNameToChangeEventType=function(e){return e+"Changed"},n.__AttributeUtils.eventTriggerToEventType=function(e){return"oj"+e.substr(0,1).toUpperCase()+e.substr(1)},n.__AttributeUtils.coerceValue=function(e,t,i,n){if(!n)throw new Error("Unable to parse "+t+"='"+i+"' for "+e+" with id "+e.id+" . This attribute only supports data bound values. Check the API doc for supported types");var l=n.toLowerCase(),u=r.test(i),d=a.test(i);if(o.test(l)&&u||s.test(l)&&d||"any"===l&&(u||d))try{return JSON.parse(i)}catch(n){throw new Error("Unable to parse "+t+"='"+i+"' for "+e.tagName+" with id "+e.id+" to a JSON Object. Check the value for correct JSON syntax, e.g. double quoted strings. "+n)}else if("boolean"===l){if(null==i||"true"===i||""===i||i.toLowerCase()===t)return!0;if("false"===i)return!1}else if("number"===l){if(!isNaN(i))return Number(i)}else if(-1!==n.split("|").indexOf("string")||"any"===l)return i;throw new Error("Unable to parse "+t+"='"+i+"' for "+e+" with id "+e.id+" to a "+n+".")},"undefined"!=typeof window&&window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(e){var t,i=(this.document||this.ownerDocument).querySelectorAll(e),n=this;do{for(t=i.length;--t>=0&&i.item(t)!==n;);}while(t<0&&(n=n.parentElement));return n}),n.EventSource=function(){this.Init()},n.Object.createSubclass(n.EventSource,n.Object,"oj.EventSource"),n.EventSource.prototype.Init=function(){this._eventHandlers=[],n.EventSource.superclass.Init.call(this)},n.EventSource.prototype.on=function(e,t){for(var i=!1,n=0;n<this._eventHandlers.length;n++)if(this._eventHandlers[n].eventType===e&&this._eventHandlers[n].eventHandlerFunc===t){i=!0;break}i||this._eventHandlers.push({eventType:e,eventHandlerFunc:t})},n.EventSource.prototype.off=function(e,t){for(var i=this._eventHandlers.length-1;i>=0;i--)if(this._eventHandlers[i].eventType===e&&this._eventHandlers[i].eventHandlerFunc===t){this._eventHandlers.splice(i,1);break}},n.EventSource.prototype.handleEvent=function(e,t){for(var i=0;i<this._eventHandlers.length;i++){var n=this._eventHandlers[i];if(n.eventType===e&&!1===n.eventHandlerFunc.apply(this,Array.prototype.slice.call(arguments).slice(1)))return!1}return!0},n.KeyUtils={},n.KeyUtils.equals=function(e,t){return n.Object.compareValues(e,t)},function(){if("undefined"!=typeof window){var e;if(!((e=document.createEvent("Event")).initEvent("foo",!0,!0),e.preventDefault(),e.defaultPrevented)){var t=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(t.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}"function"!=typeof window.CustomEvent&&(i.prototype=window.Event.prototype,window.CustomEvent=i)}function i(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}}(),function(){var e,t;"undefined"!=typeof window&&!window.setImmediate&&window.postMessage&&(window.setImmediate=function(){var n=arguments[0],o=Array.prototype.slice.call(arguments,1);"function"!=typeof n&&(n=new Function(n.toString()));var s=(isNaN(t)&&(t=0),t+=1);return e||(e=new Map),e.set(s,{callback:n,args:o}),1===e.size&&window.addEventListener("message",i),window.postMessage({id:s,message:"oj-setImmediate"},"*"),s},window.clearImmediate=n);function i(t){var i=t.data;if(i&&"oj-setImmediate"===i.message){var o=i.id,s=e.get(o);if(n(o),s){var r=s.callback,a=s.args;r.apply(window,a)}}}function n(t){e&&(e.delete(t),e.size<1&&(window.removeEventListener("message",i),e=null))}}(),function(){if("undefined"!=typeof window&&!window.__extends){var e,t=this&&this.__extends||(e=Object.setPrototypeOf,function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});window.__extends=t}}(),"undefined"!=typeof window&&(window.Symbol?(window.Symbol.asyncIterator||(window.Symbol.asyncIterator="asyncIterator"),window.Symbol.iterator||(window.Symbol.iterator="iterator")):(window.Symbol={},window.Symbol.asyncIterator="asyncIterator",window.Symbol.iterator="iterator"));var h=t.__ojCheckpointManager;n.CHECKPOINT_MANAGER={},n.CHECKPOINT_MANAGER.startCheckpoint=function(e,t){h&&h.startCheckpoint(e,t)},n.CHECKPOINT_MANAGER.endCheckpoint=function(e){h&&h.endCheckpoint(e)},n.CHECKPOINT_MANAGER.getRecord=function(e){return h?h.getRecord(e):void 0},n.CHECKPOINT_MANAGER.matchRecords=function(e){return h?h.matchRecords(e):[]},n.CHECKPOINT_MANAGER.dump=function(t){e.info(function(){for(var e="Checkpoint Records:",i=n.CHECKPOINT_MANAGER.matchRecords(t),o=0;o<i.length;o++){var s=i[o];e=e+"\n"+s.name;var r=s.description;null!=r&&(e=e+" ("+r+")"),e=(e+=":\n")+"start: "+s.start+"\tduration: "+s.duration}return e})},n.BusyContext=function(e){this.Init(e)},n.Object.createSubclass(n.BusyContext,n.Object,"oj.BusyContext"),n.BusyContext._defaultTimeout=Number.NaN,n.BusyContext.setDefaultTimeout=function(e){isNaN(e)||(n.BusyContext._defaultTimeout=e)},n.BusyContext.prototype.Init=function(e){n.BusyContext.superclass.Init.call(this),this._hostNode=e,this._statesMap=new Map,this._mediator={getMasterWhenReadyPromise:function(){return this._masterWhenReadyPromise||(this._masterWhenReadyPromise=new Promise(this._captureWhenReadyPromiseResolver.bind(this))),this._masterWhenReadyPromise},resolveMasterWhenReadyPromise:function(){this._masterWhenReadyPromiseResolver&&this._masterWhenReadyPromiseResolver(!0),this._masterWhenReadyPromise=null,this._masterWhenReadyPromiseResolver=null,this._masterWhenReadyPromiseRejecter=null},rejectMasterWhenReadyPromise:function(e){this._masterWhenReadyPromiseRejecter&&this._masterWhenReadyPromiseRejecter(e),this._masterWhenReadyPromise=null,this._masterWhenReadyPromiseRejecter=null,this._masterWhenReadyPromiseResolver=null},getSlaveTimeoutPromise:function(e,t,i){var n,o=new Promise(function(e,o){n=window.setTimeout(function(){o(t())},i)});return this._slaveTimeoutPromiseTimers.push(n),Promise.race([e,o]).then(this._clearAllSlaveTimeouts.bind(this))},getNextTickPromise:function(){return this._nextTickPromise||(this._nextTickPromise=new Promise(function(e){window.setImmediate(function(){this._nextTickPromise=null,e(!0)}.bind(this))}.bind(this))),this._nextTickPromise},_clearAllSlaveTimeouts:function(){var e=this._slaveTimeoutPromiseTimers;this._slaveTimeoutPromiseTimers=[];for(var t=0;t<e.length;t++)window.clearTimeout(e[t]);return!0},_captureWhenReadyPromiseResolver:function(e,t){this._masterWhenReadyPromiseResolver=e,this._masterWhenReadyPromiseRejecter=t},_slaveTimeoutPromiseTimers:[]}},n.BusyContext._log=function(t){if(e.option("level")===e.LEVEL_LOG){e.log(">> Busy states: %d",t.size);var i=n.BusyContext._values(t);i.length>0&&e.log(i.join("\n"))}},n.BusyContext._values=function(e){var t=[];return e.forEach(function(e){t.push(e)}),t},n.BusyContext.prototype.addBusyState=function(t){e.log("BusyContext.addBusyState: start scope='%s'",this._getDebugScope());var i=this._statesMap,o=new n.BusyState(t[n.BusyContext._DESCRIPTION]);return e.log(">> "+o),i.set(o.id,o),this._addBusyStateToParent(),e.log("BusyContext.addBusyState: end scope='%s'",this._getDebugScope()),this._removeBusyState.bind(this,o)},n.BusyContext.prototype.dump=function(t){e.info("BusyContext.dump: start scope='%s' %s",this._getDebugScope(),t||"");var i=this._statesMap;e.info(">> Busy states: %d",i.size);var o=n.BusyContext._values(i);o.length>0&&e.info(o.join("\n")),e.info("BusyContext.dump: start scope='%s' %s",this._getDebugScope(),t||"")},n.BusyContext.prototype.getBusyStates=function(){var e=this._statesMap;return n.BusyContext._values(e)},n.BusyContext.prototype.clear=function(){e.log("BusyContext.clear: start scope='%s'",this._getDebugScope());for(var t=this._statesMap,i=n.BusyContext._values(t),o=0;o<i.length;o++){var s=i[o];try{this._removeBusyState(s)}catch(t){e.log("BusyContext.clear: %o",t)}Object.defineProperty(s,n.BusyContext._OJ_RIP,{value:!0,enumerable:!1})}e.log("BusyContext.clear: end scope='%s'",this._getDebugScope())},n.BusyContext.prototype.whenReady=function(t){var i=this._getDebugScope();e.log("BusyContext.whenReady: start, scope='%s', timeout=%d",i,t);var o=this._statesMap,s=this._mediator,r=s.getNextTickPromise(),a=n.BusyContext._BOOTSTRAP_MEDIATOR.whenReady(),l=Promise.all([r,a]).then(function(){e.log("BusyContext.whenReady: bootstrap mediator ready scope=%s",i);try{n.BusyContext._deliverThrottledUpdates()}catch(t){throw e.error("Fatal exception delivering binding updates: %o",t),t}return 0!==o.size||this._waitingOnNextTickBusynessEval?(e.log("BusyContext.whenReady: busy states returning master scope=%s",i),s.getMasterWhenReadyPromise()):(e.log("BusyContext.whenReady: resolved no busy states scope=%s",i),!0)}.bind(this));if(isNaN(t)&&!isNaN(n.BusyContext._defaultTimeout)&&(t=n.BusyContext._defaultTimeout),!isNaN(t)){l=s.getSlaveTimeoutPromise(l,function(){var s,r="whenReady timeout of "+t+"ms expired ";n.BusyContext._log(o);var a=n.BusyContext._values(o);return(s=n.BusyContext._BOOTSTRAP_MEDIATOR.isReady()?new Error(r+"with the following busy states: "+a.join(", ")):new Error(r+'while the application is loading. Busy state enabled by setting the "window.oj_whenReady = true;" global variable. Application bootstrap busy state is released by calling "oj.Context.getPageContext().getBusyContext().applicationBootstrapComplete();".')).busyStates=a,e.log("BusyContext.whenReady: rejected scope='%s'\n%s",i,s.message),s},t)}return e.log("BusyContext.whenReady: end scope='%s'",this._getDebugScope()),l},n.BusyContext.prototype.isReady=function(){e.log("BusyContext.isReady: start scope='%s'",this._getDebugScope());var t=!1;if(n.BusyContext._BOOTSTRAP_MEDIATOR.isReady()&&!this._waitingOnNextTickBusynessEval){var i=this._statesMap;t=0===i.size,n.BusyContext._log(i)}return e.log("BusyContext.isReady: end scope='%s'",this._getDebugScope()),t},n.BusyContext.prototype._removeBusyState=function(t){var i=this._getDebugScope();e.log("BusyContext._removeBusyState: start scope='%s'",i);var o=this._statesMap;if(t[n.BusyContext._OJ_RIP])e.log("Busy state has been forcefully resolved via clear:\n"+t);else{if(!o.delete(t.id))throw new Error("Busy state has already been resolved:\n"+t);e.log("BusyContext._removeBusyState: resolving busy state:\n"+t),0!==o.size||this._waitingOnNextTickBusynessEval||(this._waitingOnNextTickBusynessEval=!0,window.setImmediate(this._evalBusyness.bind(this))),e.log("BusyContext._removeBusyState: end scope='%s'",i)}},n.BusyContext.prototype._evalBusyness=function(){var t=this._getDebugScope();e.log("BusyContext._evalBusyness: begin scope='%s'",t);try{n.BusyContext._deliverThrottledUpdates()}catch(t){return e.error("Fatal exception delivering binding updates: %o",t),this._mediator.rejectMasterWhenReadyPromise(t),void(this._waitingOnNextTickBusynessEval=!1)}var i=this._statesMap,o=this._mediator;this._waitingOnNextTickBusynessEval=!1,0===i.size?(e.log("BusyContext._evalBusyness: resolving whenReady promises"),o.resolveMasterWhenReadyPromise(),this._resolveBusyStateForParent()):n.BusyContext._log(i),e.log("BusyContext._evalBusyness: end scope='%s'",t)},n.BusyContext.prototype.applicationBootstrapComplete=function(){var t=this._getDebugScope();e.log("BusyContext.applicationBootstrapComplete: begin scope='%s'",t),n.BusyContext._BOOTSTRAP_MEDIATOR.notifyComplete(),e.log("BusyContext.applicationBootstrapComplete: end scope='%s'",t)},n.BusyContext.prototype._getParentBusyContext=function(){if(this._hostNode){var e=n.Context.getContext(n.Context.getParentElement(this._hostNode));if(e)return e.getBusyContext()}return null},n.BusyContext.prototype._addBusyStateToParent=function(){if(!this._parentNotified){this._parentNotified=!0;var e=this._getParentBusyContext();if(e){var t={};t[n.BusyContext._DESCRIPTION]=this._getCompoundDescription.bind(this),this._parentResolveCallback=e.addBusyState(t)}}},n.BusyContext.prototype._resolveBusyStateForParent=function(){this._parentNotified=!1,this._parentResolveCallback&&(this._parentResolveCallback(),this._parentResolveCallback=null)},n.BusyContext.prototype._getCompoundDescription=function(){return"["+n.BusyContext._values(this._statesMap).join(", ")+"]"},n.BusyContext.prototype._getDebugScope=function(){function e(e){var t="undefined";if(e)if(e.id&&e.id.length>0)t="#"+e.id;else{t=e.nodeName,e.hasAttribute("data-oj-context")&&(t+="[data-oj-context]");var i=e.getAttribute("class");i&&(t+="."+i.split(" ").join("."))}return t}return this._debugScope||(this._hostNode?this._debugScope=e(this._hostNode.parentElement)+" > "+e(this._hostNode):this._debugScope="page"),this._debugScope},n.BusyContext.prototype.toString=function(){var e="Busy Context: [scope=";return e+=this._getDebugScope(),e+=" states="+this._getCompoundDescription()+"]"},n.BusyContext._deliverThrottledUpdates=function(){n.ComponentBinding&&n.ComponentBinding.deliverChanges()},n.BusyContext._DESCRIPTION="description",n.BusyContext._OJ_RIP="__ojRip",n.BusyContext._BOOTSTRAP_MEDIATOR=new function(){var e,t,i;"undefined"!=typeof window&&(e=window.oj_whenReady),this.whenReady=function(){return t||(t=e?new Promise(function(e){i=e}):Promise.resolve(!0))},this.isReady=function(){return!e},this.notifyComplete=function(){i?window.setImmediate(function(){e=!1,i(!0),i=null}):e=!1}},n.BusyState=function(e){this._description=e,this._addedWaitTs=n.BusyState._getTs(),this._id=this._addedWaitTs.toString(36)+"_"+Math.random().toString(36)},Object.defineProperties(n.BusyState.prototype,{id:{get:function(){return this._id},enumerable:!0},description:{get:function(){if(this._description)return this._description instanceof Function?this._description():this._description.toString()},enumerable:!0}}),n.BusyState.prototype.toString=function(){var e="Busy state: [description=",t=this.description;return null!==t&&(e+=t),e+=", elapsed="+(n.BusyState._getTs()-this._addedWaitTs)+"]"},n.BusyState._getTs=function(){return window.performance?window.performance.now():(new Date).getTime()};var c=function(e){this.Init(e)};n.Object.createSubclass(c,n.Object,"oj.Context"),c.prototype.Init=function(e){c.superclass.Init.call(this),this._node=e},c.getContext=function(e){for(;e;){var t=e[c._OJ_CONTEXT_INSTANCE];if(t)return t;if(e.hasAttribute(c._OJ_CONTEXT_ATTRIBUTE))return t=new c(e),Object.defineProperty(e,c._OJ_CONTEXT_INSTANCE,{value:t}),t;e=c.getParentElement(e)}return c.getPageContext()},c.getPageContext=function(){return c._pageContext||(c._pageContext=new c),c._pageContext},c.prototype.getBusyContext=function(){return this._busyContext||(this._busyContext=new n.BusyContext(this._node)),this._busyContext},c.setBusyContextDefaultTimeout=function(e){n.BusyContext.setDefaultTimeout(e)},c._OJ_CONTEXT_ATTRIBUTE="data-oj-context",c._OJ_CONTEXT_INSTANCE="__ojContextInstance",c._OJ_SURROGATE_ATTR="data-oj-surrogate-id",c.getParentElement=function(e){if(e&&e.hasAttribute(c._OJ_SURROGATE_ATTR)){var t=document.getElementById(e.getAttribute(c._OJ_SURROGATE_ATTR));if(t)return t.parentElement}return e.parentElement};var p={getDeviceType:function(){return n.AgentUtils.getAgentInfo().deviceType},getLocale:function(){if(n.__isAmdLoaderPresent()){n.Assert.assert("undefined"!=typeof ojt,"ojtranslations module must be defined");var e=ojt._ojLocale_;return"root"===e?"en":e}var t=p._locale;return null==t&&((t=document.documentElement.lang)||(t=void 0===navigator?"en":(navigator.language||navigator.userLanguage||"en").toLowerCase()),t=t.toLowerCase(),p._locale=t),t},setLocale:function(e,t){if(n.__isAmdLoaderPresent()){var i="ojL10n!ojtranslations/nls/",o=[i+e+"/ojtranslations"],s=0;if(n.LocaleData&&(o.push(i+e+"/localeElements"),n.TimezoneData)){var r=n.TimezoneData.__getBundleNames();s=r.length,r.forEach(function(t){o.push(i+e+t)})}require(o,function(e,i){ojt=e,i&&n.LocaleData.__updateBundle(i);for(var o=0;o<s;o++){var r=arguments[o+2];n.TimezoneData.__mergeIntoLocaleElements(r)}t&&t()})}else p._locale=e,t&&t()},getResourceUrl:function(e){if(null==e||/^\/|:/.test(e))return e;var t=p._resourceBaseUrl;null==t&&(t=p._getOjBaseUrl()||"");var i=t.length;return t+(0===i||"/"===t.charAt(i-1)?"":"/")+e},setResourceBaseUrl:function(e){p._resourceBaseUrl=e},setAutomationMode:function(e){p._automationMode=e},getAutomationMode:function(){return p._automationMode},getVersionInfo:function(){var e="Oracle JET Version: "+n.version+"\n";e+="Oracle JET Revision: "+n.revision+"\n";var t="undefined"!=typeof window;return t&&window.navigator&&(e+="Browser: "+window.navigator.userAgent+"\n",e+="Browser Platform: "+window.navigator.platform+"\n"),$&&($.fn&&(e+="jQuery Version: "+$.fn.jquery+"\n"),$.ui&&$.ui.version&&(e+="jQuery UI Version: "+$.ui.version+"\n")),n.ComponentBinding&&(e+="Knockout Version: "+n.ComponentBinding.__getKnockoutVersion()+"\n"),t&&window.require&&(e+="Require Version: "+window.require.version+"\n"),e},logVersionInfo:function(){console.log(p.getVersionInfo())},_getOjBaseUrl:function(){var e=null;n.__isAmdLoaderPresent()&&(e=require.toUrl("ojs/_foo_").replace(/[^/]*$/,"../"));return e},__getTemplateEngine:function(){if(!p._templateEnginePromise){if(!n.__isAmdLoaderPresent())throw new Error("JET Template engine cannot be loaded with an AMD loader");p._templateEnginePromise=new Promise(function(e,t){require(["./ojtemplateengine"],e,t)})}return p._templateEnginePromise},getConfigBundle:function(){return ojt}},_=function(){};_.getThemeName=function(){return(_.parseJSONFromFontFamily("oj-theme-json")||{}).name},_.getThemeTargetPlatform=function(){return(_.parseJSONFromFontFamily("oj-theme-json")||{}).targetPlatform},_.clearCache=function(){this._cache=null},_.parseJSONFromFontFamily=function(t){null==this._cache&&(this._cache={},this._null_cache_value={},this._headfontstring=window.getComputedStyle(document.head).getPropertyValue("font-family"));var i=this._cache[t];if(i===this._null_cache_value)return null;if(null!=i)return i;var n=document.createElement("meta");n.className=t,document.head.appendChild(n);var o=window.getComputedStyle(n).getPropertyValue("font-family");if(null!=o)if(o===this._headfontstring)e.warn("parseJSONFromFontFamily: When the selector ",t," is applied the font-family read off the dom element is ",o,". The parent dom elment has the same font-family value."," This is interpreted to mean that no value was sent down for selector ",t,". Null will be returned.");else{var s=o.replace(/^['"]+|\s+|\\|(;\s?})+|['"]$/g,"");if(s)try{i=JSON.parse(s)}catch(o){var r=s.indexOf(","),a=!1;if(r>-1){s=s.substring(r+2);try{i=JSON.parse(s),a=!0}catch(e){}}if(!1===a)throw e.error("Error parsing json for selector "+t+".\nString being parsed is "+s+". Error is:\n",o),document.head.removeChild(n),o}}return document.head.removeChild(n),this._cache[t]=null==i?this._null_cache_value:i,i};var m={};function g(){}g.prototype.getPromise=function(){},g.prototype.clear=function(){},m.getTimer=function(e){return new m._TimerImpl(e)},m._TimerImpl=function(e){var t,i,n;function o(e){n=null,i(e)}this.getPromise=function(){return t},this.clear=function(){window.clearTimeout(n),n=null,o(!1)},t="undefined"==typeof window?Promise.reject():new Promise(function(t){i=t,n=window.setTimeout(o.bind(null,!0),e)})};var f=function(){};f.SCREEN_RANGE={SM:"sm",MD:"md",LG:"lg",XL:"xl",XXL:"xxl"},f.FRAMEWORK_QUERY_KEY={SM_UP:"sm-up",MD_UP:"md-up",LG_UP:"lg-up",XL_UP:"xl-up",XXL_UP:"xxl-up",SM_ONLY:"sm-only",MD_ONLY:"md-only",LG_ONLY:"lg-only",XL_ONLY:"xl-only",MD_DOWN:"md-down",LG_DOWN:"lg-down",XL_DOWN:"xl-down",HIGH_RESOLUTION:"high-resolution"},(f._RANGE={})[f.SCREEN_RANGE.SM]=0,f._RANGE[f.SCREEN_RANGE.MD]=1,f._RANGE[f.SCREEN_RANGE.LG]=2,f._RANGE[f.SCREEN_RANGE.XL]=3,f._RANGE[f.SCREEN_RANGE.XXL]=4,f._getMediaQueryFromClass=function(e){var t=document.getElementsByClassName(e).item(0);return null===t&&((t=document.createElement("meta")).className=e,document.head.appendChild(t)),window.getComputedStyle(t).getPropertyValue("font-family").replace(/^[/\\'"]+|(;\s?})+|[/\\'"]+$/g,"")},f.getFrameworkQuery=function(t){var i=f._getMediaQueryFromClass("oj-mq-"+t);return"null"===i?(e.warn("Framework query not found. Please check that the value of the theming variable$includeResponsiveMediaQueryClasses is set to true, if itis set to false the media queries are not sent down to the browser."),null):i},f.compare=function(e,t){var i=f._RANGE[e],n=f._RANGE[t];if(null==i)throw new Error("size1 param "+e+" illegal, please use one of the screen size constants like oj.ResponsiveUtils.SCREEN_RANGE.MD");if(null==n)throw new Error("size2 param "+t+" illegal, please use one of the screen size constants like oj.ResponsiveUtils.SCREEN_RANGE.MD");return i-n};var v={setBundle:function(e){v._bundle=e},getResource:function(e){return v._getResourceString(e)},applyParameters:function(e,t){return null==e?null:v._format(e,t)},getTranslatedString:function(e,t){var i=v._getResourceString(e);if(null==i)return e;var n={};return arguments.length>2?n=Array.prototype.slice.call(arguments,1):2===arguments.length&&("object"==typeof(n=arguments[1])||n instanceof Array||(n=[n])),v.applyParameters(i,n)},getComponentTranslations:function(e){var t=v._getBundle()[e];if(null==t)return{};for(var i={},n=Object.keys(t),o=0;o<n.length;o++){var s=n[o];i[s]=t[s]}return i},_getResourceString:function(e){var t=e?e.split("."):[],i=v._getBundle();n.Assert.assertObject(i);for(var o=0;o<t.length&&i;o++){i=i[t[o]]}return i||null},_format:function(e,t){var i,n,o=e.length,s=[],r=null,a=!1,l=!1,u=!1,d=!1;for(n=0;n<o;n++){var h=e.charAt(n),c=!1;if(a)c=!0,a=!1;else switch(h){case"$":a=!0;break;case"{":d||(l||(i=!1,r=[]),l=!0);break;case"}":if(l&&r.length>0){var p=t[r.join("")];s.push(void 0===p?"null":p)}l=!1;break;case"[":l||(u?d=!0:u=!0);break;case"]":d?d=!1:u=!1;break;default:c=!0}c&&(l?","===h||" "===h?i=!0:i||r.push(h):d||s.push(h))}return s.join("")},_getBundle:function(){var e=v._bundle;if(e)return e;if(n.__isAmdLoaderPresent()){var t=p.getConfigBundle();return n.Assert.assert(void 0!==t,"ojtranslations module must be defined"),t}return{}}};n.Logger=e,n.Context=c,n.Config=p,n.ResponsiveUtils=f,n.ThemeUtils=_,n.TimerUtils=m,n.Translations=v;var y=function(e){this.NOT_A_KEY={},this.has=function(e){return this.get(e)!==this.NOT_A_KEY},this.get=function(e){var t,i,o=this.NOT_A_KEY,s=this;if(this._keys.has(e))return e;if(e!==Object(e))return this.NOT_A_KEY;if("function"==typeof Symbol&&"function"==typeof Set.prototype[Symbol.iterator])for(i=(t=this._keys[Symbol.iterator]()).next();!i.done;){if(n.KeyUtils.equals(i.value,e))return i.value;i=t.next()}else this._keys.forEach(function(t){o===s.NOT_A_KEY&&n.KeyUtils.equals(t,e)&&(o=t)});return o},this.InitializeWithKeys=function(e){this._keys=this._populate(e)},this._populate=function(e){var t=new Set(e);return null!=e&&0===t.size&&e.forEach(function(e){t.add(e)}),t},this.InitializeWithKeys(e)},b=function(e){this.Init(e)};n.Object.createSubclass(b,n.Object,"AttributeGroupHandler"),b.prototype.Init=function(e){if(this._assignments={},this._valueIndex=0,this._matchRules={},null!=e)for(var t=Object.keys(e),i=0;i<t.length;i++){var n=t[i];this.addMatchRule(n,e[n])}},b.prototype.getValueRamp=function(){return[]},b.prototype.getValue=function(e){return this._matchRules[e]?this._matchRules[e]:(this._assignments[e]||(this._values||(this._values=this.getValueRamp().slice()),this._assignments[e]=this._values[this._valueIndex],this._valueIndex+=1,this._valueIndex===this._values.length&&(this._valueIndex=0)),this._assignments[e])},b.prototype.getCategoryAssignments=function(){for(var e=[],t=Object.keys(this._assignments),i=0;i<t.length;i++){var n=t[i];e.push({category:n,value:this._assignments[n]})}return e},b.prototype.addMatchRule=function(e,t){this._matchRules[e]=t};var C=function(e){if(this._attributeValues=[],$(document.body).hasClass("oj-hicontrast"))this._attributeValues=C._DEFAULT_COLORS.slice();else{var t=C.__createAttrDiv();t&&(C.__processAttrDiv(t),t.remove()),C._colors.length>0?this._attributeValues=C._colors.slice():this._attributeValues=C._DEFAULT_COLORS.slice()}this.Init(e)};n.Object.createSubclass(C,b,"ColorAttributeGroupHandler"),C._DEFAULT_COLORS=["#237bb1","#68c182","#fad55c","#ed6647","#8561c8","#6ddbdb","#ffb54d","#e371b2","#47bdef","#a2bf39","#a75dba","#f7f37b"],C._STYLE_CLASSES=["oj-dvt-category1","oj-dvt-category2","oj-dvt-category3","oj-dvt-category4","oj-dvt-category5","oj-dvt-category6","oj-dvt-category7","oj-dvt-category8","oj-dvt-category9","oj-dvt-category10","oj-dvt-category11","oj-dvt-category12"],C._colors=null,C.prototype.getValueRamp=function(){return this._attributeValues},C.createAttrDiv=function(){return C.__createAttrDiv()},C.processAttrDiv=function(e){C.__processAttrDiv(e)},C.__createAttrDiv=function(){if(C._colors)return null;var e=$(document.createElement("div"));e.attr("style","display:none;"),e.attr("id","attrGps"),$(document.body).append(e);for(var t=0;t<C._STYLE_CLASSES.length;t++){var i=$(document.createElement("div"));i.addClass(C._STYLE_CLASSES[t]),e.append(i)}return e},C.__processAttrDiv=function(e){C._colors=[];for(var t=e.children(),i=0;i<t.length;i++){var n=$(t[i]).css("color");n&&C._colors.push(n)}};var S=function(e){this.Init(e)};n.Object.createSubclass(S,b,"ShapeAttributeGroupHandler"),S._attributeValues=["square","circle","diamond","plus","triangleDown","triangleUp","human"],S.prototype.getValueRamp=function(){return S._attributeValues};var E={};E.AttributeGroupHandler=b,E.ColorAttributeGroupHandler=C,E.ShapeAttributeGroupHandler=S,n.Events=n.Events={on:function(e,t,i){return this.OnInternal(e,t,i,!1,!1)},off:function(e,t,i){return this._offInternal(e,t,i,!1)},trigger:function(e){var t=Array.prototype.slice.call(arguments);return t.unshift(!1),n.Events.TriggerInternal.apply(this,t)},once:function(e,t,i){return this._onceInternal(e,t,i,!1,null)},listenTo:function(e,t,i){var o,s,r,a,l,u,d,h={};for(d in t.constructor===String?h[t]=i:h=t,h)if(h.hasOwnProperty(d))for(o=n.Events._getEvents(d),s=0;s<o.length;s+=1)u={event:r=o[s].event,attribute:a=o[s].attribute,object:e,callback:h[d]},l=a?r+":"+a:r,void 0===this._listeningTo&&(this._listeningTo=[]),this._listeningTo.push(u),e.OnInternal(l,h[d],null,!0,!1);return this},listenToOnce:function(e,t,i){var o,s,r,a,l,u,d,h={};for(d in t.constructor===String?h[t]=i:h=t,h)if(h.hasOwnProperty(d))for(o=n.Events._getEvents(d),s=0;s<o.length;s+=1)u={event:r=o[s].event,attribute:a=o[s].attribute,object:e,callback:h[d]},l=a?r+":"+a:r,void 0===this._listeningTo&&(this._listeningTo=[]),this._listeningTo.push(u),e._onceInternal(l,h[d],null,!0,this);return this},stopListening:function(e,t,i){var o,s,r,a,l,u,d,h,c,p,_,m,g,f={};if(null==arguments||arguments.length<=1){for(m=this._listeningTo?this._listeningTo.length:0,_=0;_<m;_++)u=this._listeningTo[_],(d=!e||e===u.object)&&u.object._offInternal.apply(u.object,[u.event,u.callback,u.context,!0]);return this._listeningTo=[],this}for(g in s=t,e&&e.constructor===String&&(s=e),s.constructor===String?f[s]=i:f=s,f)if(f.hasOwnProperty(g))for(o=n.Events._getEvents(g),r=0;r<o.length;r+=1)for(a=o[r].event,l=o[r].attribute,_=(m=this._listeningTo?this._listeningTo.length:0)-1;_>=0;_-=1)u=this._listeningTo[_],d=!e||e===u.object,h=!a||a===u.event,c=!i||f[g]===u.callback,p=!l||l===u.attribute,d&&h&&c&&p&&(this._listeningTo[_].object._offInternal.apply(this._listeningTo[_].object,[this._listeningTo[_].event,this._listeningTo[_].callback,this._listeningTo[_].context,!0]),this._listeningTo.splice(_,1));return this}},n.Events.bind=n.Events.on,n.Events.unbind=n.Events.off,n.Events.EventType={ADD:"add",ALLADDED:"alladded",REMOVE:"remove",RESET:"reset",REFRESH:"refresh",SORT:"sort",CHANGE:"change",DESTROY:"destroy",ALLREMOVED:"allremoved",REQUEST:"request",SYNC:"sync",ERROR:"error",INVALID:"invalid",READY:"ready",ALL:"all"},n.Events.Mixin=function(e,t){var i,n=t||this;for(i in n)"function"==typeof n[i]&&(e[i]=n[i]);e.eventHandlers={},e._listeningTo=[]},n.Events._onceInternal=function(e,t,i,n,o){var s,r,a,l,u,d,h;d=this._getEventMap(e,t,i),u=d.map,h=d.context;var c=this;return Object.keys(u||{}).forEach(function(e){if(Object.prototype.hasOwnProperty.call(u,e))for(s=c._getEvents(e),r=0;r<s.length;r+=1)a=s[r].event,l=s[r].attribute,void 0===c.eventHandlers&&(c.eventHandlers=[]),void 0===c.eventHandlers[a]&&(c.eventHandlers[a]=[]),c.eventHandlers[a].push({callback:u[e],context:h,attribute:l,once:!0,fired:!1,listen:n,otherObj:o})}),this},n.Events._shouldFire=function(e){return!e.once||!e.fired&&(e.fired=!0,!0)},n.Events._getContext=function(e,t){return t.context||t.otherObj||e},n.Events.TriggerInternal=function(e,t){var i,o,s,r,a,l,u,d,h,c=this._getEvents(t);for(r=[],i=0;i<c.length;i+=1)o=c[i].event,s=c[i].attribute,r.push({event:o,attribute:s});for(i=0;i<r.length;i+=1){for(d=this._getHandlers(this.eventHandlers,n.Events.EventType.ALL),a=n.Events._getHandlers(this.eventHandlers,r[i].event,!1),l=0;l<(a?a.length:0);l+=1)a[l].attribute===r[i].attribute&&a[l].callback&&(u=Array.prototype.slice.call(arguments),a&&a[l]&&a[l].once&&(this._removeHandler(n.Events._getHandlers(this.eventHandlers,r[i].event,!0),a[l]),a[l].otherObj&&a[l].otherObj.stopListening(this,t,a[l].callback)),a&&a[l]&&this._shouldFire(a[l])&&(h=a[l].callback,e&&!a[l].ignoreSilent||h.apply(n.Events._getContext(this,a[l]),u.slice(2))));for(l=0;l<(d?d.length:0);l+=1)(u=Array.prototype.slice.call(arguments)).length>0&&(r[i].attribute?u[1]=r[i].event+":"+r[i].attribute:u[1]=r[i].event),d&&d[l]&&d[l].callback&&this._shouldFire(d[l])&&(h=d[l].callback,e&&!d[l].ignoreSilent||h.apply(n.Events._getContext(this,d[l]),u.slice(1))),d&&d[l]&&d[l].once&&(this._removeHandler(this._getHandlers(this.eventHandlers,n.Events.EventType.ALL,!0),d[l]),d[l].otherObj&&d[l].otherObj.stopListening(this,n.Events.EventType.ALL,d[l].callback))}return this},n.Events.OnInternal=function(e,t,i,o,s){var r,a,l,u,d,h,c,p,_=this._getEventMap(e,t,i);for(p in r=_.map,c=_.context,r)if(r.hasOwnProperty(p))for(a=this._getEvents(p),l=0;l<a.length;l+=1)u=a[l].event,d=a[l].attribute,void 0===this.eventHandlers&&(this.eventHandlers=[]),void 0===this.eventHandlers[u]&&(this.eventHandlers[u]=[]),h={callback:r[p],context:c,attribute:d,listen:o,ignoreSilent:s},-1===this._checkForHandler(this.eventHandlers[u],h,n.Events._handlersIdentical)&&this.eventHandlers[u].push(h);return this},n.Events._offInternal=function(e,t,i,n){var o,s,r,a;if(null==arguments||0===arguments.length)return this.eventHandlers={},this;if(null==e)return this._removeEvent(e,t,i,n),this;for(a in o=(s=this._getEventMap(e,t,i)).map,r=s.context,o)o.hasOwnProperty(a)&&this._removeEvent(a,o[a],r,n);return this},n.Events._getEventMap=function(e,t,i){var n={};return e.constructor!==String?{map:n=e,context:t}:(n[e]=t,{map:n,context:i})},n.Events._removeEvent=function(e,t,i,o){var s,r,a,l,u,d,h,c,p,_=[];if(e)_=n.Events._getEvents(e);else if(void 0!==this.eventHandlers){var m=this;Object.keys(this.eventHandlers||{}).forEach(function(e){Object.prototype.hasOwnProperty.call(m.eventHandlers,e)&&_.push({event:e})})}for(s=0;s<_.length;s+=1)if(r=_[s].event,l=_[s].attribute,void 0!==this.eventHandlers&&this.eventHandlers[r]instanceof Array){for(a=(u=this.eventHandlers[r]).length-1;a>=0;a-=1)d=null==t||u[a].callback===t,h=null==i||u[a].context===i,c=null==l||u[a].attribute===l,p=null==o||u[a].listen===o,d&&h&&c&&p&&u.splice(a,1);0===u.length&&delete this.eventHandlers[r]}},n.Events._removeHandler=function(e,t){var i,n,o,s,r,a;if(e)for(i=e.length-1;i>=0;i-=1)n=void 0===t.callback||null===t.callback||e[i].callback===t.callback,o=void 0===t.context||null===t.context||e[i].context===t.context,s=void 0===t.attribute||null===t.attribute||e[i].attribute===t.attribute,r=void 0===t.listen||null===t.listen||e[i].listen===t.listen,a=void 0===t.once||null===t.once||e[i].once===t.once,n&&o&&s&&r&&a&&e.splice(i,1)},n.Events._getEvents=function(e){var t,i,n,o,s=e?e.split(" "):[],r=[];for(t=0;t<s.length;t+=1)n=(i=s[t].split(":"))[0],o=i.length>1?i[1]:null,r.push({event:n,attribute:o});return r},n.Events._handlersIdentical=function(e,t){return e.callback===t.callback&&e.attribute===t.attribute&&e.context===t.context&&e.listen===t.listen&&e.once===t.once},n.Events._listenersIdentical=function(e,t){return e.event===t.event&&e.attribute===t.attribute&&e.context===t.context&&e.object===t.object},n.Events._checkForHandler=function(e,t,i){var n;if(void 0===e)return-1;for(n=0;n<e.length;n+=1)if(i(e[n],t))return n;return-1},n.Events._getHandlers=function(e,t,i){if(e&&e[t]instanceof Array){if(i)return e[t];var n,o=[];for(n=0;n<e[t].length;n++)o.push(e[t][n]);return o}return null},n.Collection=function(e,t){n.Collection._justExtending||n.Collection._init(this,e,t,null)},n.Object.createSubclass(n.Collection,n.Object,"oj.Collection"),n.Collection.prototype.model=null,n.Collection.prototype.modelId=function(e){var t=this.model;return t&&e?e[t.idAttribute||t.prototype.idAttribute||"id"]:null},n.Collection.prototype.length=void 0,n.Collection.prototype.models=void 0,n.Collection.prototype._modelIndices=[],n.Collection.prototype.url=null,n.Collection.prototype.changes=[],n.Collection.prototype.customURL=null,n.Collection.prototype.customPagingOptions=null,n.Collection.prototype.lastFetchSize=void 0,n.Collection.prototype.hasMore=!1,n.Collection.prototype.totalResults=void 0,n.Collection.prototype.lastFetchCount=void 0,n.Collection.prototype.modelLimit=-1,n.Collection.prototype.offset=void 0,n.Collection.prototype.fetchSize=-1,n.Collection.prototype.sortDirection=1,n.Collection.prototype.comparator=null,n.Collection.prototype.omitLanguageHeader=!1,n.Collection.prototype.Init=function(){n.Collection.superclass.Init.call(this)},n.Collection.extend=function(e,t){var i,o=null;return n.Collection._justExtending=!0,o=new n.Collection,n.Collection._justExtending=!1,$.extend(o,this.prototype),i=e&&e.constructor&&Object.prototype.hasOwnProperty.call(e,"constructor")?e.constructor:function(t,i){n.Collection._init(this,t,i,e)},t&&Object.keys(t).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e])}),e&&Object.keys(e).forEach(function(t){Object.prototype.hasOwnProperty.call(e,t)&&(o[t]=e[t])}),$.extend(i,this),i.prototype=o,i.extend=n.Collection.extend,i.prototype.constructor=i,i},n.Collection._init=function(e,t,i,o){var s,r,a,l;if(e.Init(),n.Events.Mixin(e),o)for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(e[l]=o[l]);var u=i||{};for(r=["comparator","customPagingOptions","customURL",n.Collection._FETCH_SIZE_PROP,"model","modelLimit","sortDirection","url"],s=0;s<r.length;s++)Object.prototype.hasOwnProperty.call(u,r[s])&&void 0!==u[r[s]]&&(e[r[s]]=u[r[s]]);void 0===e._getFetchSize(null)&&e.setFetchSize(-1),void 0===e.modelLimit&&e.setModelLimit(-1),e.hasMore=!1,e.lruCount=0,e._setModels([],!0);var d=t;u.parse&&(d=e.parse(t)),null!=d&&(u.noparse=!0,a=d instanceof Array?d:[d],e._addInternal(a,u,!0,!1)),e._setLength(),d||(e.totalResults=void 0),o&&o.initialize&&o.initialize.call(e,d,u)},n.Collection.prototype.on=function(e,t){},n.Collection.prototype.OnInternal=function(e,t,i,n,o){},n.Collection.prototype.TriggerInternal=function(e,t,i,n,o){},n.Collection.prototype._fireRequest=function(e,t,i,o){this.TriggerInternal(o,n.Events.EventType.REQUEST,e,t,i)},n.Collection.prototype._resetChanges=function(){this.changes=[]},n.Collection.prototype._setChangeAt=function(e,t){for(var i=e;i<e+t;i++)-1===this.changes.indexOf(i)&&this.changes.push(i)},n.Collection.prototype._setModels=function(e,t){if(this.models=e,t)this._modelIndices=[],this._resetChanges();else for(var i=0;i<e.length;i++)e[i]&&this._modelIndices.push(i)},n.Collection.prototype._getModels=function(){return this.models},n.Collection.prototype._getModelsLength=function(){return this._getModels().length},n.Collection.prototype._overUpperLimit=function(e){return!(e<this._getModelsLength())&&!(this.IsVirtual()&&(!this._hasTotalResults()||0===this._getModelsLength()))},n.Collection.prototype._hasTotalResults=function(){return n.Collection._defined(this.totalResults)},n.Collection._defined=function(e){return null!=e},n.Collection.prototype._pushModel=function(e){this._getModels().push(e),this._modelIndices.push(this._getModelsLength()-1),this._setChangeAt(this._getModelsLength()-1,1)},n.Collection.prototype._pushModels=function(e){this._makeModelHead(e),this._pushModel(e),this.lruCount=this.lruCount+1,e.SetIndex(this._getModelsLength()-1)},n.Collection.prototype._reduceLRU=function(e){if(e)for(var t=0;t<e.length;t++)e[t]&&(this.lruCount=this.lruCount-1)},n.Collection.prototype._spliceModels=function(e,t,i){for(var n=e;n<e+t;n++)this._removePrevNext(this._getModel(n));void 0===i?(this._reduceLRU(this._getModels().splice(e,t)),this._spliceModelIndices(e,e+t-1)):(this._reduceLRU(this._getModels().splice(e,t,i)),this._spliceModelIndices(e,e+t-1),this._insertModelIndex(e),this._makeModelHead(i)),this._setChangeAt(e,t),this.lruCount<0&&(this.lruCount=0),this._realignModelIndices(e)},n.Collection.prototype._getModel=function(e){return this._getModels()[e]},n.Collection.prototype._realignModelIndices=function(e){for(var t,i=0;i<this._modelIndices.length;i++)(t=this._modelIndices[i])>=e&&this._getModel(t)&&this._getModel(t).SetIndex(t)},n.Collection.prototype._removePrevNext=function(e){if(e){var t=e.GetPrevious(),i=e.GetNext();t?t.SetNext(i):this.head=i,i?i.SetPrevious(t):this.tail=t}},n.Collection.prototype._makeModelHead=function(e){e.SetNext(this.head),this.head?this.head.SetPrevious(e):this.tail=e,e.SetPrevious(null),this.head=e},n.Collection.prototype._setModelIndex=function(e){-1===this._modelIndices.indexOf(e)&&this._modelIndices.push(e)},n.Collection.prototype._insertModelIndex=function(e){for(var t=0;t<this._modelIndices.length;t++)this._modelIndices[t]>=e&&(this._modelIndices[t]=this._modelIndices[t]+1);this._modelIndices.push(e)},n.Collection.prototype._spliceModelIndices=function(e,t){var i=void 0===t?e:t;this._clearModelIndices(e,i);for(var n=i-e+1,o=0;o<this._modelIndices.length;o++)this._modelIndices[o]>i&&(this._modelIndices[o]-=n)},n.Collection.prototype._clearModelIndices=function(e,t){for(var i=void 0===t?e:t,n=e;n<=i;n++){var o=this._modelIndices.indexOf(e);o>-1&&this._modelIndices.splice(o,1)}},n.Collection.prototype._setModel=function(e,t){var i=this._getModel(e);this._removePrevNext(i),i||(this.lruCount=this.lruCount+1),this._setChangeAt(e,1),this._getModels()[e]=t,t&&(this._setModelIndex(e),t.SetIndex(e),this._makeModelHead(t))},n.Collection.prototype._clearOutModels=function(e){var t,i,n=this.tail,o=0;for(this.tail=null;n&&o<e;)t=n.GetIndex(),(i=this._getModel(t))&&i.hasChanged()?(this.tail||(this.tail=n),n=n.GetPrevious()):(this.lruCount=this.lruCount-1,t>-1&&(this._setModel(t,void 0),this._clearModelIndices(t,t)),n.SetNext(null),n=n.SetPrevious(null),o+=1);this.tail||(this.tail=n),this.lruCount<0&&(this.lruCount=0),0===this.lruCount&&(this.head=null,this.tail=null)},n.Collection.prototype._resetLRU=function(){this.lruCount=0,this.head=null,this.tail=null},n.Collection.prototype._manageLRU=function(e){if(this.IsVirtual()){var t=this._getModelLimit();t>-1&&this.lruCount+e>t&&this._clearOutModels(this.lruCount+e-t)}},n.Collection.prototype.clone=function(){return this._cloneInternal(!0)},n.Collection.prototype._cloneInternal=function(e){var t,i,n=new this.constructor;if(this.IsVirtual()&&(n=this._copyFetchProperties(n))._resetModelsToFullLength(this.totalResults),n=this._copyProperties(n),e){var o,s=[];for(t=0;t<this._modelIndices.length;t++)s.push(this._modelIndices[t]);for(s.sort(function(e,t){return e-t}),t=0;t<s.length;t++)o=s[t],(i=this._atInternal(o,null,!0,!1))&&n._addInternal(i.clone(),{at:o},!0,!1)}return n},n.Collection.prototype._copyProperties=function(e){var t,i,n=["comparator","model","modelId"];for(i=0;i<n.length;i++)e[t=n[i]]=this[t];return e},n.Collection.prototype._copyFetchProperties=function(e){var t,i,o=["totalResults","hasMore",n.Collection._FETCH_SIZE_PROP];for(i=0;i<o.length;i++)e[t=o[i]]=this[t];return e},n.Collection.prototype._getLength=function(){return this.length},n.Collection.prototype._setLength=function(){var e=this._getModelsLength();this.length=e,this.IsVirtual()||(this.totalResults=e)},n.Collection._createModel=function(e,t,i){return e.model?$.isFunction(e.model)?new e.model(t,i):new e.model.constructor(t,i):null},n.Collection.prototype._newModel=function(e,t,i,o){var s,r=null,a=i||{};return a.ignoreDefaults=o,e instanceof n.Model?r=e:this.model?r=n.Collection._createModel(this,e,a):(a.collection=this,r=new n.Model(e,a)),a.validate&&r.validate&&(s=r.validate(r.attributes))?(a.validationError=s,this.TriggerInternal(!1,n.Events.EventType.INVALID,r,s,a),null):r},n.Collection.prototype.add=function(e,t){this._manageLRU(1);var i=t||{};return this._handlePromise(this._addInternal(e,t,!1,i.deferred))},n.Collection.prototype._addInternal=function(t,i,o,s){var r,a,l,u=i||{},d=[],h=u.at,c=u.silent,p=u.force,_=u.merge||!1,m=u.sort,g=!0,f=!1,v=[],y=[];function b(t,i,s,r,d){var y,b=null;return!p&&_&&s?(g=s.Merge(i,t.comparator,c),b=s):(p||(y=o&&r.isNew()?void 0:t._getLocal(r))&&o&&h!==y.index&&e.warn("Duplicate ID fetched or added without merging, the id = "+y.GetId()),void 0===y?(!function(e,t){void 0===h?(e._pushModels(t),a=e._getModelsLength()-1,e._getModel(a).SetCid()):(a=h,e.IsVirtual()&&o?e._setModel(a,t):e._spliceModels(a,0,t),e._getModel(a).SetCid(),h+=1),void 0===t.GetCollection()&&t.SetCollection(e),e._setLength(),e._listenToModel(t),f=!0}(t,r),b=r):b=y),function(e,t,i,s,r){var d=u||{};o&&(d.fillIn=!0);var p=d.comparator||e._hasComparator();if((!o||o&&p)&&g&&void 0===t&&!m&&void 0===h&&e._getLength()>1){a>-1&&(l=e._getModel(a).cid);var _={};n.CollectionUtils.copyInto(_,d),_.add=!0,e.sort(_),a>-1&&(a=e.IsVirtual()?-1:e.indexOf(e.getByCid(l),r))}f&&(d.at&&(d.index=a),s?(s.TriggerInternal(c,n.Events.EventType.ADD,s,e,d),v.push(s)):(i.TriggerInternal(c,n.Events.EventType.ADD,i,e,d),v.push(i)))}(t,y,s,r,d),b}function C(e,t,i){f=!1;var s=e._newModel(t,!0,u,!1),r=null,l=null;if(null!=s){if(a=-1,s.SetupId(),r=t instanceof n.Model?t:s,i)return p?new Promise(function(t){var n=b(e,r,void 0,s,i);y.push(n),t(n)}):e._getInternal(r,{silent:!0},i,!0).then(function(t){l=t.m;var n=b(e,r,l,s,i);y.push(n)});!p&&_&&(l=o?e._getLocal(r):e.get(r));var d=b(e,r,l,s,i);d&&y.push(d)}else y.push(!1);return Promise.resolve()}function S(e,t){return e.parse&&u.parse&&!u.noparse?e.parse(t):t}if(void 0!==h&&h<0&&(h+=this._getLength()+1),t instanceof Array?d=t:d.push(t),!o&&(this.IsVirtual()||s)){var E=this;return new Promise(function(e,t){var i=function(e){return new Promise(function(t,i){C(E,d[e],!0).then(function(){t(e+1)},i)})},o=Promise.resolve(0);for(d=S(E,d),r=0;r<d.length;r++)o=o.then(i);o.then(function(){v.length>0&&E.TriggerInternal(u.silent,n.Events.EventType.ALLADDED,E,v,u),e(n.Collection._returnModels(y))},t)})}for(d=S(this,d),r=0;r<d.length;r++)C(this,d[r],!1);return v.length>0&&this.TriggerInternal(u.silent,n.Events.EventType.ALLADDED,this,v,u),n.Collection._returnModels(y)},n.Collection._returnModels=function(e){return 1===e.length?e[0]:e},n.Collection.prototype._hasComparator=function(){return n.Collection._defined(this.comparator)},n.Collection.prototype.sort=function(e){var t,i,o=e||{},s=o.silent,r=this.comparator;if(!this._hasComparator())return null;if(this.IsVirtual()){var a=this.totalResults;this._hasTotalResults()?this._setModels(new Array(a),!0):(this._setModels([],!0),this._resetLRU(),this._setLength()),i=o.add?{add:!0}:null,this.TriggerInternal(s,n.Events.EventType.SORT,this,i,null);var l=o.startIndex;return null!=l?this.setRangeLocal(l,this._getFetchSize(o)):null}return t=this,this._getModels().sort(function(e,i){return n.Collection.SortFunc(e,i,r,t,t)}),this._realignModelIndices(0),i=o.add?{add:!0}:null,this.TriggerInternal(s,n.Events.EventType.SORT,this,i,null),null},n.Collection._getKey=function(e,t){return e instanceof n.Model?e.get(t):n.Model.GetPropValue(e,t)},n.Collection.SortFunc=function(e,t,i,o,s){var r,a,l,u;if($.isFunction(i)){if(1===i.length){r=i.call(s,e),a=i.call(s,t);var d=n.StringUtils.isString(r)?r.split(","):[r],h=n.StringUtils.isString(a)?a.split(","):[a];for(l=0;l<d.length;l++)if(0!==(u=n.Collection._compareKeys(d[l],h[l],o.sortDirection)))return u}return i.call(s,e,t)}if(n.StringUtils.isString(i)){var c=i.split(",");for(l=0;l<c.length;l++)if(r=n.Collection._getKey(e,c[l]),a=n.Collection._getKey(t,c[l]),0!==(u=n.Collection._compareKeys(r,a,o.sortDirection)))return u}return 0},n.Collection.prototype.sortedIndex=function(e,t){var i,o,s=t||this.comparator;return s?(this._throwErrIfVirtual("sortedIndex"),i=this,o=function(e,t){var o,r;if($.isFunction(s)){if(1===s.length){o=s.call(i,e),r=s.call(i,t);var a,l,u=n.StringUtils.isString(o)?o.split(","):[o],d=n.StringUtils.isString(r)?r.split(","):[r];for(l=0;l<u.length;l++)if(0!==(a=n.Collection._compareKeys(u[l],d[l],i.sortDirection)))return a}return s.call(i,e,t)}return n.StringUtils.isString(s)?(o=e.get(s),r=t.get(s),n.Collection._compareKeys(o,r,i.sortDirection)):0},n.Collection._find(this._getModels(),e,o)):-1},n.Collection._find=function(e,t,i){return function n(o,s){var r,a,l;return o>s?-1:(r=t.GetCid(),a=t.GetId(),e[o].Match(a,r)?o:e[s].Match(a,r)?s:(l=Math.floor((s+o)/2),-1===i(e[l],t)?n(o+1,l):1===i(e[l],t)?n(l,s-1):l))}(0,e.length-1)},n.Collection._compareKeys=function(e,t,i){if(-1===i){if(e<t)return 1;if(t<e)return-1}else{if(e>t)return 1;if(t>e)return-1}return 0},n.Collection.prototype.unshift=function(e,t){var i={};return n.CollectionUtils.copyInto(i,t||{}),i.at||(i.at=0),this._manageLRU(1),this._handlePromise(this._addInternal(e,i,!1,i.deferred))},n.Collection.prototype._handlePromise=function(e){return $.isFunction(e.then)?this._addPromise(function(){return e}):e},n.Collection.prototype.shift=function(e){var t,i=e||{},o=this._getDeferred(i);if(this.IsVirtual()||o){var s=this;return this._atInternal(0,i,!1,!0).then(function(e){return t=s._removeInternal(e,0,i),s.TriggerInternal(i.silent,n.Events.EventType.ALLREMOVED,s,[t],i),t})}return t=this._removeInternal(this.at(0),0,i),this.TriggerInternal(i.silent,n.Events.EventType.ALLREMOVED,this,[t],i),t},n.Collection.prototype.initial=function(e){var t=void 0===e?1:e;this._throwErrIfVirtual("initial");var i,n=[];for(i=0;i<this._getLength()-t;i+=1)n.push(this.at(i));return n},n.Collection.prototype._getDeferred=function(e){return(e||{}).deferred},n.Collection.prototype.last=function(e,t){var i,n=this._getDeferred(t),o=void 0===e?1:e;if(1===o)return 0===(i=this._getModelsLength())&&(i=o),i>0?this._atInternal(i-1,t,!1,n):null;var s,r=[];if(i=this._getLength(),n||this.IsVirtual()){var a=i-e;a<0&&(a=0),0===i&&(i=e);var l=this;return this._addPromise(function(){return l.IterativeAt(a,i)})}for(s=i-e;s<i;s+=1)r.push(this.at(s));return r},n.Collection.prototype.IterativeAt=function(e,t){var i,n=[],o=this;return new Promise(function(s,r){var a=function(e){return o.IsVirtual()&&o._hasTotalResults()&&e>=o.totalResults?Promise.resolve(e+1):new Promise(function(t,i){o._deferredAt(e,null).then(function(i){n.push(i),t(e+1)},i)})},l=Promise.resolve(e);for(i=e;i<t;i++)l=l.then(a);l.then(function(){s(n)},r)})},n.Collection.prototype._getDefaultFetchSize=function(e){return null==e?this[n.Collection._FETCH_SIZE_PROP]:e},n.Collection.prototype._calculateNextStart=function(){var e=this.lastFetchCount;return null==e&&(e=this[n.Collection._FETCH_SIZE_PROP]),void 0===this.offset||null===this.offset?e:this.offset+e},n.Collection.prototype.next=function(e,t){var i=t||{};i[n.Collection._FETCH_SIZE_PROP]=this._getDefaultFetchSize(e);var o=this._calculateNextStart(),s=this._getLength();if(0===s&&i[n.Collection._FETCH_SIZE_PROP]>0)o=0;else if(o>=s){return i.success&&i.success.call(n.Model.GetContext(i,this),this,null,i),null}return i.startIndex=o,this.fetch(i)},n.Collection.prototype._calculatePrevStart=function(e){return void 0===this.offset||null===this.offset?0:this.offset-e},n.Collection.prototype.previous=function(e,t){var i=t||{};if(0===this.offset){return i.success&&this.lastFetchCount&&i.success.call(n.Model.GetContext(i,this),this,null,i),null}i[n.Collection._FETCH_SIZE_PROP]=this._getDefaultFetchSize(e);var o=this._calculatePrevStart(i[n.Collection._FETCH_SIZE_PROP]);return o<0&&(i[n.Collection._FETCH_SIZE_PROP]=this.offset,o=0),i.startIndex=o,this.fetch(i)},n.Collection.prototype.setModelLimit=function(e){this.modelLimit=e,this._manageLRU(0)},n.Collection.prototype._getModelLimit=function(){return this.modelLimit},n.Collection.prototype.setFetchSize=function(e){this[n.Collection._FETCH_SIZE_PROP]=e},n.Collection.prototype.rest=function(e,t){var i,n=this._getDeferred(t),o=void 0===e?1:e,s=[];if(this.IsVirtual()||n){var r=this;return this._addPromise(function(){return r.IterativeAt(o,r._getLength())})}for(i=o;i<this._getLength();i+=1)s.push(this.at(i));return s},n.Collection.prototype.remove=function(e,t){var i,o=t||{},s=[];e instanceof Array?s=e:s.push(e);var r=[];for(i=s.length-1;i>=0;i-=1)r.unshift(this._removeInternal(s[i],-1,o));return this.TriggerInternal(o.silent,n.Events.EventType.ALLREMOVED,this,s,o),n.Collection._returnModels(r)},n.Collection.prototype._removeInternal=function(e,t,i){var o=i||{},s=-1===t?this._getInternal(e):n.Collection._getModinfo(t,e),r=o.silent,a=s.index;if(a>-1){var l=s.m;void 0!==l&&l.GetCollection()===this&&l.SetCollection(null),this._spliceModels(a,1),this._setLength();var u={};n.CollectionUtils.copyInto(u,o),u.index=a,void 0!==l&&l.TriggerInternal(r,n.Events.EventType.REMOVE,l,this,u),this._unlistenToModel(l)}return s.m},n.Collection.prototype._unlistenToModel=function(e){void 0!==e&&e.off(null,null,this)},n.Collection.prototype._listenToModel=function(e){e.OnInternal(n.Events.EventType.ALL,this._modelEvent,this,!1,!0)},n.Collection.prototype._modelEvent=function(e,t,i,o){if(e===n.Events.EventType.DESTROY&&this.remove(t),!(void 0!==i&&i instanceof n.Collection&&i!==this)){var s=o&&o.silent;this.TriggerInternal(s,e,t,i,o)}},n.Collection.prototype.refresh=function(e){var t,i=e||{},o=this;return this._addPromise(function(){return new Promise(function(e,s){if(!o.IsVirtual()){t=void 0!==i.silent&&i.silent;try{o.reset(null,{silent:!0});var r={};return Object.keys(i).forEach(function(e){Object.prototype.hasOwnProperty.call(i,e)&&(r[e]=i[e])}),r.success=function(i,s,r){o.TriggerInternal(t,n.Events.EventType.REFRESH,o,r,null),e({collection:i,response:s,options:r})},r.error=function(e,t,r){s(n.Collection._createRejectionError(e,t,r,o,i,!1))},void o._fetchInternal(r,-1,!1)}catch(s){if(s instanceof n.URLError)return o.TriggerInternal(t,n.Events.EventType.REFRESH,o,i,null),void e({collection:o,options:i});throw s}}var a=i.startIndex;o._setModels([],!0),o._resetLRU(),o.totalResults=void 0,o._setLength(),t=void 0!==i.silent&&i.silent,o.TriggerInternal(t,n.Events.EventType.REFRESH,o,i,null),null==a&&(a=0),null!=a?o._setRangeLocalInternal(a,o._getFetchSize(i)).then(function(t){e(t)},function(e){s(e)}):e(void 0)})})},n.Collection.prototype.reset=function(e,t){var i,o,s={};n.CollectionUtils.copyInto(s,t||{}),s.previousModels=this._getModels();for(var r=0;r<this._modelIndices.length;r++)i=this._modelIndices[r],(o=this._getModel(i))&&(this._unlistenToModel(o),o.SetCollection(null));this._setModels([],!0),this._resetLRU();var a=void 0!==s.silent&&s.silent;if(!e)return this._setLength(),this.totalResults=void 0,this.TriggerInternal(a,n.Events.EventType.RESET,this,s,null),null;var l,u=e;return s.parse&&(u=this.parse(e)),this._manageLRU(u instanceof Array?u.length:1),s.noparse=!0,l=this._addInternal(u,s,!0,!1),this._setLength(),this.TriggerInternal(a,n.Events.EventType.RESET,this,s,null),this._handlePromise(l)},n.Collection.prototype.at=function(e,t){var i=this._getDeferred(t);return this._atInternal(e,t,!1,i)},n.Collection.prototype._atInternal=function(e,t,i,n){var o=e;if(o<0&&(o+=this._getLength()),o<0||this._overUpperLimit(o))return i||!this.IsVirtual()&&!n?null:this._addPromise(function(){return Promise.resolve(null)});var s=this;return i||!this.IsVirtual()&&!n?this._getModel(o):this._addPromise(function(){return s._deferredAt(o,t)})},n.Collection.prototype.whenReady=function(){return this._promises?this._promises:Promise.resolve()},n.Collection.prototype._addPromise=function(e){var t=this;return void 0===this._promises&&(this._promiseCount=0,this._promises=Promise.resolve()),this._promiseCount=this._promiseCount+1,this._promises=this._promises.then(e.bind(t)).then(function(e){return t._promiseCount-=1,0===t._promiseCount&&(t._promises=void 0,t.TriggerInternal(!1,n.Events.EventType.READY,t,null,null)),e},function(e){return t._promiseCount-=1,0===t._promiseCount&&(t._promises=void 0),Promise.reject(e)}),this._promises},n.Collection.prototype._addxhr=function(e){if(e&&e.abort){void 0===this._xhrs&&(this._xhrs=[]);var t=this;this._xhrs.push(e),e.done(function(){var i=t._xhrs?t._xhrs.indexOf(e):-1;i>-1&&t._xhrs.splice(i,1)})}},n.Collection.prototype.abort=function(){var e=this;function t(t,i){e._xhrs[t].then(function(n,o){"abort"===o&&(e._xhrs.splice(t,1),0===e._xhrs.length&&e.whenReady().then(function(){i(null)},function(){i(null)}))},function(){e._xhrs.splice(t,1),0===e._xhrs.length&&e.whenReady().then(function(){i(null)},function(){i(null)})})}return this._xhrs&&this._xhrs.length>0?new Promise(function(i){for(var n=e._xhrs.length-1;n>=0;n--)t(n,i),e._xhrs[n].abort()}):Promise.resolve()},n.Collection.prototype._deferredAt=function(e,t){var i=this,o=i._getModel(e);return void 0===o?new Promise(function(o,s){var r={};n.CollectionUtils.copyInto(r,t||{}),r.context=i,r.startIndex=e,r.error=function(e,o,r){s(n.Collection._createRejectionError(e,o,r,i,t,!1))},r.success=function(){o(i._getModel(e))},i._fetchInternal(r,-1,!1)}):new Promise(function(e){e(o)})},n.Collection.prototype.getByCid=function(e){for(var t,i=this._getModels(),n=null,o=0;o<this._modelIndices.length;o++)if(i[t=this._modelIndices[o]]&&e===i[t].cid){n=i[t];break}if(n)return n;if(this.IsVirtual())throw new Error("Not found locally and not supported by server for virtual collections");return null},n.Collection.prototype.get=function(e,t){var i=this._getDeferred(t),n=this._getInternal(e,t,i);if(n){if($.isFunction(n.then))return this._addPromise(function(){return new Promise(function(e,t){n.then(function(t){e(t.m)},function(e){t(e)})})});if(this.IsVirtual())return this._addPromise(function(){return new Promise(function(e){e(n.m)})});if(Object.prototype.hasOwnProperty.call(n,"m"))return n.m}return null},n.Collection.prototype._getLocal=function(e){var t=this._getLocalInternal(e);return t?t.m:null},n.Collection.prototype._getLocalInternal=function(e){var t=e,i=e;e instanceof n.Model?(t=e.GetCid(),i=e.GetId()):n.Collection._defined(e)&&void 0!==e.id&&(i=e.id);for(var o,s,r=null,a=this._modelIndices.length,l=this._getModels(),u=0;u<a;u++)if(void 0!==(o=l[s=this._modelIndices[u]])&&o.Match(i,t)){r=n.Collection._getModinfo(s,o);break}return r||n.Collection._getModinfo(-1,void 0)},n.Collection.prototype._getInternal=function(e,t,i,o){var s=e,r=e,a=void 0!==o&&o;e instanceof n.Model?(s=e.GetCid(),r=e.GetId()):n.Collection._defined(e)&&void 0!==e.id&&(r=e.id);for(var l,u=null,d=this._getModels(),h=0;h<this._modelIndices.length;h++)if(d[l=this._modelIndices[h]]&&d[l].Match(r,s)){var c=n.Collection._getModinfo(l,d[l]);u=c;break}if(u)return i?new Promise(function(e){e(u)}):u;if(this.IsVirtual()){if(void 0===r&&void 0!==s)return new Promise(function(e){e(n.Collection._getModinfo(-1,void 0))});var p=this;return new Promise(function(e,i){var o={};n.CollectionUtils.copyInto(o,t||{}),o.context=p,o.startID=r,o.error=function(e,o,s){i(n.Collection._createRejectionError(e,o,s,p,t,!1))},o.success=function(t,i){!function(t){if(null!=t){var i=p._getOffset(),o=p._getModel(i);void 0!==o&&o.Match(r,s)?e(n.Collection._getModinfo(i,o)):e(n.Collection._getModinfo(-1,void 0))}else e(n.Collection._getModinfo(-1,void 0))}(i)},p._fetchInternal(o,-1,a)})}var _=n.Collection._getModinfo(-1,void 0);return i?new Promise(function(e){e(_)}):_},n.Collection._getModinfo=function(e,t){return{index:e,m:t}},n.Collection.prototype._parseImpl=function(e){if(e instanceof Array)return e;if(!e)return e;var t;for(t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]instanceof Array)return e[t];return e},n.Collection.prototype.parse=n.Collection.prototype._parseImpl,n.Collection.prototype._checkActual=function(e,t,i){return!!(this._hasTotalResults()&&i.start+i.count>=this.totalResults)||i.start===e&&i.count===t},n.Collection.prototype.setRangeLocal=function(e,t){var i=this;return this._addPromise(function(){return i._setRangeLocalInternal(e,t)})},n.Collection.prototype._setRangeLocalInternal=function(e,t){this.IsVirtual()&&this._resetModelsToFullLength(this.totalResults);var i=this._getLocalRange(e,t),n=this;if(this._checkActual(e,t,i))return new Promise(function(e){e(i)});var o=this._getModelLimit();return o>-1&&o<t&&(this.modelLimit=t),new Promise(function(i,o){n._setRangeLocalFetch(e,t,-1,{start:e,count:t},i,o,!0)})},n.Collection.prototype._setRangeLocalFetch=function(e,t,i,o,s,r,a){var l=this,u=e,d=u+t;this[n.Collection._FETCH_SIZE_PROP]&&this[n.Collection._FETCH_SIZE_PROP]>t&&(d=this[n.Collection._FETCH_SIZE_PROP]+u);var h=null;if(this.IsVirtual()){var c=this._getFirstMissingModel(u,d);c>u&&(d=(u=c)+t,this[n.Collection._FETCH_SIZE_PROP]&&this[n.Collection._FETCH_SIZE_PROP]>t&&(d=this[n.Collection._FETCH_SIZE_PROP]+u)),h={context:this,startIndex:u,fetchSize:d-u}}else h={context:this};h.error=function(e,t,i){r(n.Collection._createRejectionError(e,t,i,l,null,!1))},h.success=function(){!function(){var e=l._getLocalRange(o.start,o.count);if(a&&l._hasTotalResults()&&e.count<o.count){var i=e.start+e.count,n=u+(l.lastFetchCount?l.lastFetchCount:t);n<l.totalResults?l._setRangeLocalFetch(n,t,i,o,s,r,a):s(e)}else s(e)}()};try{this._fetchInternal(h,i,i>-1)}catch(e){if(e instanceof n.URLError){var p=l._getLocalRange(u,t);s(p)}}},n.Collection._createRejectionError=function(e,t,i,o,s,r){var a=!1;s&&s.silent&&(a=s.silent),r&&n.Model._triggerError(o,a,s,t,i,e);var l=new Error(t);return l.xhr=e,l.error=i,l.collection=o,l.status=t,l},n.Collection.prototype._getMaxLength=function(e,t){var i=this._getModelsLength();return 0===i?e+t:e+t>i?i:e+t},n.Collection.prototype.isRangeLocal=function(e,t){var i=this._getLocalRange(e,t);return 0===this._getModelsLength()?0===t:e===i.start&&(t===i.count||e+t>this._getModelsLength())},n.Collection.prototype._getModelArray=function(e,t){for(var i=[],n=this._getModels(),o=e+t,s=e;s<o;s++)i.push(n[s]);return i},n.Collection.prototype._getLocalRange=function(e,t){if(!this.IsVirtual()){if(this._getModelsLength()>0){if(e+t>this._getModelsLength()){var i=this._getModelsLength()-e;return{start:e,count:i,models:this._getModelArray(e,i)}}return{start:e,count:t,models:this._getModelArray(e,t)}}return{start:e,count:0,models:[]}}var n=this._getMaxLength(e,t);if(!this._hasTotalResults()&&n<e+t)return{start:e,count:n-e,models:this._getModelArray(e,n-e)};if(0===n)return{start:e,count:0,models:[]};var o=this._getFirstMissingModel(e,n);if(o>-1)return{start:e,count:o-e,models:this._getModelArray(e,o-e)};var s=t;return e>n?s=0:e+s>n&&(s=n-e),{start:e,count:s,models:this._getModelArray(e,s)}},n.Collection.prototype._getFirstMissingModel=function(e,t){for(var i=e;i<t;i++)if(void 0===this._getModel(i))return i;return-1},n.Collection.prototype.fetch=function(e){var t=this._fetchInternal(e,-1,!1);return this._addPromise(function(){return Promise.resolve(t)}),t},n.Collection.prototype._fetchInternal=function(e,t,i){function o(e,t,i,n){e.IsVirtual()?i||e._resetModelsToFullLength(n):t.add||t.useset||e.reset(null,{silent:!0})}var s,r=e||{},a=r.success,l=r.error;return r.set&&(r.useset=!!r.set),void 0===r.parse&&(r.parse=!0),s=this,r.error=function(t,i,o){n.Model._triggerError(s,!1,e,i,o,t),l&&l.call(n.Model.GetContext(e,s),t,i,o)},r.success=function(l){var u,d;try{u=s.parse(l,e)}catch(t){return void n.Collection._reportError(s,t,r.error,e)}s._setPagingReturnValues(l,e,u,i)||(d=s.totalResults);var h=null,c=!1,p=t;if(r.add||s.model){o(s,r,i,d);try{-1===t&&(c=!0,p=s._getOffset()),h=s._fillInCollectionWithParsedData(u,p,c,r)}catch(t){return void n.Collection._reportError(s,t,r.error,e)}}else i||(s.IsVirtual()?(o(s,r,i,d),-1===t&&(c=!0,p=s._getOffset()),h=s._putDataIntoCollection(u,p,c)):r.useset?s._setInternal(u,!1,r,!1):s.reset(u,{silent:!0}));s.IsVirtual()&&h&&(s.lastFetchCount=h.length);var _=!!r.silent;s.TriggerInternal(_,n.Events.EventType.SYNC,s,l,r),a&&a.call(n.Model.GetContext(e,s),s,l,r)},this._fetchCall(r)},n.Collection.prototype._putDataIntoCollection=function(e,t,i){var n;if(e){n=e instanceof Array?e:[e];var o={};i&&this._manageLRU(n.length);for(var s=t,r=this.IsVirtual(),a=null,l=0;l<n.length;l+=1)r&&(o={at:s},a=this._atInternal(s,null,!0,!1)),o.silent=!0,this._addInternal(n[l],o,!0,!1),this._atInternal(s,null,!0,!1)!==a&&(s+=1)}return n},n.Collection.prototype._fillInCollectionWithParsedData=function(e,t,i,o){var s=o||{},r=s.parse,a=n.Collection._createModel(this),l=null;if(e){l=e instanceof Array?e:[e];var u,d={};i&&this._manageLRU(l.length);var h,c=this.IsVirtual();if(s.useset&&!c){for(h=0;h<l.length;h+=1)u=a&&r?a.parse(l[h]):l[h],l[h]=u;this._setInternal(l,!1,s,!1)}else{var p=null,_=t;for(h=0;h<l.length;h+=1)u=a&&r?a.parse(l[h]):l[h],c&&(d={at:_},p=this._atInternal(_,d,!0,!1)),d.silent=!0,this._addInternal(u,d,!0,!1),this._atInternal(_,null,!0,!1)!==p&&(_+=1)}}return l},n.Collection._reportError=function(t,i,o,s){e.error(i.toString()),o&&o.call(n.Model.GetContext(s,t),t,i,s)},n.Collection.prototype._fetchOnly=function(e){var t,i,o=e||{},s=o.success;return void 0===o.parse&&(o.parse=!0),i=this,o.success=function(r){var a,l,u,d=null,h=[];try{u=i.parse(r,e)}catch(t){return void n.Collection._reportError(i,t,o.error,e)}if(o.add||i.model){if(l=n.Collection._createModel(i),u)for(d=u instanceof Array?u:[u],a=0;a<d.length;a+=1){if(l&&o.parse)try{t=l.parse(d[a])}catch(t){return void n.Collection._reportError(i,t,o.error,e)}else t=d[a];h.push(i._newModel(t))}}else d=u instanceof Array?u:[u];i.TriggerInternal(!1,n.Events.EventType.SYNC,i,r,o),s&&s.call(n.Model.GetContext(e,i),i,h,o)},this._fetchCall(o)},n.Collection.prototype._fetchCall=function(e){try{return n.Model._internalSync("read",this,e)}catch(t){throw n.Model._triggerError(this,!1,e,null,t,null),t}},n.Collection.prototype._resetModelsToFullLength=function(e){return void 0!==e&&this._getModelsLength()!==e&&(this._setModels(new Array(e),!0),this._resetLRU(),this._setLength(),!0)},n.Collection.prototype._getFetchSize=function(e){return(e||{})[n.Collection._FETCH_SIZE_PROP]||this[n.Collection._FETCH_SIZE_PROP]},n.Collection.prototype.IsVirtual=function(){return this._getFetchSize(null)>-1},n.Collection.prototype._getReturnProperty=function(e,t,i,o,s){var r=parseInt(n.Collection._getProp(e,t,i),10);return null==r||isNaN(r)?o||s:r},n.Collection.prototype._cleanTotalResults=function(e){if(-1!==e)return e},n.Collection.prototype._setPagingReturnValues=function(e,t,i,o){var s={};this.customPagingOptions&&((s=this.customPagingOptions.call(this,e))||(s={}));var r=t||{};this.lastFetchSize=this._getReturnProperty(s,e,"limit",r.fetchSize,this.fetchSize),this.offset=this._getReturnProperty(s,e,"offset",r.startIndex,0),this.lastFetchCount=this._getReturnProperty(s,e,"count",this.lastFetchCount,this.lastFetchCount),this.totalResults=this._cleanTotalResults(this._getReturnProperty(s,e,"totalResults",this.totalResults,this.totalResults)),this.hasMore=this._getHasMore(n.Collection._getProp(s,e,"hasMore"),this.offset,this.lastFetchSize,this.totalResults);var a=!1;if(!o){var l=this._cleanTotalResults(parseInt(n.Collection._getProp(s,e,"totalResults"),10)),u=parseInt(n.Collection._getProp(s,e,"count"),10);this.totalResults=this._adjustTotalResults(l,this.hasMore,this.offset,u,i&&Array.isArray(i)?i.length:0),a=void 0===l||isNaN(l)||null===l}return!this.IsVirtual()&&this.totalResults&&this.totalResults!==this.lastFetchCount&&this.lastFetchSize&&this.setFetchSize(this.lastFetchSize),a},n.Collection.prototype._adjustTotalResults=function(e,t,i,n,o){if(!t&&isNaN(e))return(isNaN(n)?o:n)+i;return this.totalResults},n.Collection.prototype._getHasMore=function(e,t,i,o){return n.Collection._defined(e)?e:null==o||!(t+i>o)},n.Collection._getProp=function(e,t,i){return Object.prototype.hasOwnProperty.call(e,i)?e[i]:t?t[i]:void 0},n.Collection.prototype._getOffset=function(){return n.Collection._defined(this.offset)?this.offset:0},n.Collection.prototype.create=function(e,t){var i=this,o=t||{},s=this._getDeferred(o);function r(t,i,o,s){return i.save(e instanceof n.Model?null:e,s),i}function a(e,t){return o.wait?i.IsVirtual()||s?i._addPromise(function(){return Promise.resolve(void 0)}):null:i.add(e,t)}var l=this._newModel(e,!0,o,!1),u=o.success,d=o.context;o.validate;if(o.context=this,o.success=function(e,t,n){n.xhr&&(o.xhr=n.xhr),o.wait&&i.add(l,o),u&&u.call(null!=d?d:i,e,t,o)},null==l)return!1;o.forceNew=null!=l.GetId();var h=n.Model._copyOptions(o);return l.SetCollection(this),s||this.IsVirtual()?new Promise(function(e){h.merge=!0,h.deferred=!0,a(l,h).then(function(){o.success=function(t,n,s){s.xhr&&(o.xhr=s.xhr),o.wait?(i.IsVirtual()&&(h.force=!0),i.add(l,h).then(function(){u&&u.call(null!=d?d:i,t,n,o),e(t)})):(u&&u.call(null!=d?d:i,t,n,o),e(t))};var t=r(0,l,0,o);t||e(t)})}):(h.merge=!0,a(l,h),r(0,l,0,o))},n.Collection.prototype.pluck=function(e){var t,i=[];for(this._throwErrIfVirtual("pluck"),t=0;t<this._getLength();t+=1)i.push(this.at(t).get(e));return i},n.Collection.prototype.where=function(e,t){return this._handlePromise(this._whereInternal(e,t))},n.Collection.prototype._whereInternal=function(e,t){var i=t||{},o=this._getDeferred(i),s=this;if(this.IsVirtual())return new Promise(function(t,o){var r={query:e,all:!0,success:function(e,i){t(i)},error:function(e,t,r){o(n.Collection._createRejectionError(e,t,r,s,i,!0))}};s._fetchOnly(r)});var r,a,l=[];for(r=0;r<this._getLength();r+=1)(a=this.at(r)).Contains(e)&&l.push(a);return o?new Promise(function(e){e(l)}):l},n.Collection.prototype.whereToCollection=function(e,t){var i=t||{},o=this._getDeferred(i),s=this;if(this.IsVirtual()||o)return s._addPromise(function(){return new Promise(function(t,n){return s._whereInternal(e,i).then(function(e){var i=s._makeNewCollection(e);t(i)},function(e){n(e)})})});var r=this._whereInternal(e,i),a=this._makeNewCollection(r);return a[n.Collection._FETCH_SIZE_PROP]=-1,a._setLength(),a},n.Collection.prototype._makeNewCollection=function(e){var t=this._cloneInternal(!1);return t._setModels(e,!1),t._resetLRU(),t._setLength(),t},n.Collection.prototype._throwErrIfVirtual=function(e){if(this.IsVirtual())throw new Error(e+" not valid on a virtual Collection")},n.Collection.prototype.map=function(e,t){var i,n=[];return this._throwErrIfVirtual("map"),this._getModels().forEach(function(o){i=e.call(t||this,o),n.push(i)}),n},n.Collection.prototype.each=function(e,t){this._throwErrIfVirtual("each"),this._getModels().forEach(e,t)},n.Collection.prototype.size=function(){return this._getLength()},n.Collection.prototype.sortBy=function(e,t){var i,o=[];return this._throwErrIfVirtual("sortBy"),this._getModels().forEach(function(e){o.push(e)}),i=this,o.sort(function(o,s){var r,a;return $.isFunction(e)?(r=e.call(t||i,o),a=e.call(t||i,s),n.Collection._compareKeys(r,a,i.sortDirection)):(r=o.get(e),a=s.get(e),n.Collection._compareKeys(r,a,i.sortDirection))}),o},n.Collection.prototype.groupBy=function(e,t){var i,n={};return this._throwErrIfVirtual("groupBy"),this._getModels().forEach(function(o){i=$.isFunction(e)?e.call(t||this,o):o.get(e),void 0===n[i]&&(n[i]=[]),n[i].push(o)},this),n},n.Collection.prototype.indexBy=function(e,t){var i,n={};return this._throwErrIfVirtual("indexBy"),this._getModels().forEach(function(o){i=$.isFunction(e)?e.call(t||this,o):o.get(e),n[i]=o},this),n},n.Collection.prototype.min=function(e,t){var i,n,o={};return this._throwErrIfVirtual("min"),0===this._getModelsLength()?null:(o=this._getModel(0),i=e.call(t||this,this._getModel(0)),this._getModels().forEach(function(s,r){r>=1&&(n=e.call(t||this,s))<i&&(o=s,i=n)},this),o)},n.Collection.prototype.max=function(e,t){var i,n,o={};return this._throwErrIfVirtual("max"),0===this._getModelsLength()?null:(o=this._getModel(0),i=e.call(t,this._getModel(0)),this._getModels().forEach(function(s,r){r>=1&&(n=e.call(t||this,s))>i&&(o=s,i=n)},this),o)},n.Collection.prototype.filter=function(e,t){var i=[];return this._throwErrIfVirtual("filter"),this._getModels().forEach(function(n){e.call(t||this,n)&&i.push(n)}),i},n.Collection.prototype.without=function(e){var t,i,n,o,s,r=[];this._throwErrIfVirtual("without");for(var a=0;a<this._getModels().length;a++){for(o=!0,s=this._getModel(a),t=0;t<arguments.length;t+=1)if(n=arguments[t].GetCid(),i=arguments[t].GetId(),s.Match(i,n)){o=!1;break}o&&r.push(s)}return r},n.Collection.prototype.difference=function(e){var t,i,n,o,s,r,a=[];this._throwErrIfVirtual("difference");for(var l=0;l<this._getModels().length;l++){for(s=!0,r=this._getModel(l),t=0;t<arguments.length;t+=1){for(i=0;i<arguments[t].length;i++)if(o=arguments[t][i].GetCid(),n=arguments[t][i].GetId(),r.Match(n,o)){s=!1;break}if(!s)break}s&&a.push(r)}return a},n.Collection.prototype.isEmpty=function(){return 0===this._getLength()},n.Collection.prototype.any=function(e,t){var i;this._throwErrIfVirtual("any");for(var n=0;n<this._getModelsLength();n+=1)if(i=this._getModel(n),e.call(t||this,i))return!0;return!1},n.Collection.prototype.findWhere=function(e,t){var i=this._getDeferred(t),n=this;if(this.IsVirtual()||i)return this._addPromise(function(){return new Promise(function(i){n._whereInternal(e,t).then(function(e){e&&e.length>0&&i(e[0]),i(null)})})});var o=this._whereInternal(e,t);return o.length>0?o[0]:null},n.Collection.prototype.slice=function(e,t,i){var n,o=this._getDeferred(i),s=[],r=t;if(void 0===r){if(this.IsVirtual()&&!this._hasTotalResults())throw new Error("End must be set for virtual collections with no totalResults");r=this._getModelsLength()}if(o||this.IsVirtual()){var a=this;return this._addPromise(function(){return a.IterativeAt(e,r)})}for(n=e;n<r;n+=1)s.push(this._getModel(n));return s},n.Collection.prototype.set=function(e,t){var i=this._getDeferred(t);return this._setInternal(e,!0,t,i||this.IsVirtual())},n.Collection._removeAfterSet=function(e,t,i,n,o){if(i)for(var s=t.length-1;s>=0;s-=1)-1===n.indexOf(s)&&e._removeInternal(t[s],s,o)},n.Collection.prototype._swapModels=function(e,t,i,n){if(this._hasComparator()||!i||!n)return{index:e,swapped:!1};var o=this._getModelsLength();if(e>=o||t>=o)return{index:e,swapped:!1};var s=this._getModel(e),r=this._getModel(t);return this._setModel(e,r),r.SetIndex(e),this._setModel(t,s),s.SetIndex(t),{index:t,swapped:t!==e}},n.Collection.prototype._setInternal=function(e,t,i,o){var s,r,a=i||{},l=void 0===a.add||a.add,u=void 0===a.remove||a.remove,d=void 0===a.merge||a.merge,h=[],c=null,p=t?this.parse(e):e;if(r=Array.isArray(p)?p:[p],o){var _=this;return this._addPromise(function(){return _._deferredSet(r,_._getModels(),a,u,l,d,t)})}var m=!1;for(s=0;s<r.length;s+=1)if(-1!==(c=this._updateModel(this._newModel(r[s],t,a,!0),l,d,o))){var g=this._swapModels(c,s,u,l),f=g.index;g.swapped&&(m=!0),-1===h.indexOf(f)&&h.push(f)}if(m){var v=a.add?{add:!0}:null;this.TriggerInternal(a.silent,n.Events.EventType.SORT,this,v,null)}return n.Collection._removeAfterSet(this,this._getModels(),u,h,a),null},n.Collection.prototype._deferredSet=function(e,t,i,o,s,r,a){var l,u=[],d=this;return new Promise(function(h,c){var p=function(t){return new Promise(function(n,o){d._updateModel(d._newModel(e[t],a,i,!0),s,r,!0).then(function(e){-1!==e&&u.push(e),n(t+1)},o)})},_=Promise.resolve(0);for(l=0;l<e.length;l+=1)_=_.then(p);_.then(function(){n.Collection._removeAfterSet(d,t,o,u,i),h(void 0)},c)})},n.Collection.prototype._updateModel=function(e,t,i,n){function o(n,o,s){var r=o?o.index:-1,a=o?o.m:null,l={};if(a){if(i){if(l={merge:i},s)return new Promise(function(t){n._addInternal(e,l,!1,!0).then(function(){t(r)})});n.add(e,l)}}else if(t){if(s)return new Promise(function(t){n._addInternal(e,l,!1,!0).then(function(){t(n._getLength()-1)})});n.add(e),r=n._getLength()-1}return r}if(n||this.IsVirtual()){var s=this;return new Promise(function(t){s._getInternal(e,{silent:!0},n).then(function(e){o(s,e,!0).then(function(e){t(e)})})})}return o(this,this._getInternal(e),!1)},n.Collection.prototype.toJSON=function(){var e=[];return this._throwErrIfVirtual("toJSON"),this._getModels().forEach(function(t){e.push(t.toJSON())}),e},n.Collection.prototype.first=function(e,t){var i,n=this._getDeferred(t),o=this._getLength(),s=[],r=this,a=e;a?o=a:a=1;var l=this.IsVirtual()||n;if(1===a)return l?this._addPromise(function(){return r._deferredAt(0,null)}):this._getModelsLength()>0?this._getModel(0):null;if(o>this._getModelsLength()&&(this.IsVirtual()&&!this._hasTotalResults()||(o=this._getModelsLength())),l)return this._addPromise(function(){return r.IterativeAt(0,o)});for(i=0;i<o;i+=1)s.push(this._getModel(i));return s},n.Collection.prototype.indexOf=function(e,t){var i=this._getDeferred(t);if(this.IsVirtual()||i){var n=this;return this._addPromise(function(){return n._getInternal(e,null,!0).then(function(e){return e.index})})}return this._getInternal(e).index},n.Collection.prototype.contains=function(e,t){var i=this._getDeferred(t);if(this.IsVirtual()||i){var n=this;return this._addPromise(function(){return n._getInternal(e,null,!0).then(function(e){return e.index>-1})})}return this._getInternal(e).index>-1},n.Collection.prototype.include=n.Collection.prototype.contains,n.Collection.prototype._localIndexOf=function(e){var t=this._getLocalInternal(e);return void 0!==t?t.index:-1},n.Collection.prototype.pop=function(e){var t=this._getDeferred(e);if(this.IsVirtual()||t){var i=this;return this._atInternal(this._getLength()-1,e,!1,!0).then(function(t){return i.remove(t,e),t})}var n=this.at(this._getLength()-1);return this.remove(n,e),n},n.Collection.prototype.push=function(e,t){var i=this._getDeferred(t);return this._manageLRU(1),this._handlePromise(this._addInternal(e,t,!1,i))},n.Collection.prototype.lastIndexOf=function(e,t){var i,o=t;for(this._throwErrIfVirtual("lastIndexOf"),void 0===o&&(o=0),i=this._getLength()-1;i>=o;i-=1)if(n.Object.__innerEquals(e,this.at(i)))return i;return-1},n.Collection.prototype._getSortAttrs=function(e){return void 0===e?[]:e.split(",")},n.Collection._getQueryString=function(e){function t(e,t,i){return e+i+t}function i(e,i){var o,s=i;return Object.keys(e||{}).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i))for(var r=Array.isArray(e[i])?e[i]:[e[i]],a=0;a<r.length;a++){if(n.Model.IsComplexValue(r[a])){var l=r[a].value,u=null,d=r[a].comparator;u=$.isFunction(d)?d(null,i,l):d,o=t(i,l,u)}else o=t(i,e[i],"=");s+=o+"+"}}),s=s.substring(0,s.length-1)+","}var o,s=Array.isArray(e)?e:[e],r="";for(o=0;o<s.length;o++)r=i(s[o],r);return","===r.substring(r.length-1)?r.substring(0,r.length-1):r},n.Collection.prototype.ModifyOptionsForCustomURL=function(e){var t={};Object.keys(e||{}).forEach(function(i){Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])});var i=this.comparator;if(i&&n.StringUtils.isString(i)){for(var o=this._getSortAttrs(i),s=0;s<o.length;s++)0===s?t.sort=o[s]:t.sort+=","+o[s];t.sortDir=this._getSortDirStr()}return this.IsVirtual()&&(t[n.Collection._FETCH_SIZE_PROP]=this._getFetchSize(t)),t},n.Collection.prototype.IsUrlBased=function(e){var t=this.customURL;if($.isFunction(t))return!0;var i=this.GetCollectionFetchUrl(e);return n.Collection._defined(i)},n.Collection.prototype.GetCollectionFetchUrl=function(e){var t=n.Model.GetPropValue(this,"url");if(this.IsVirtual()){var i=e||{},o=i.all,s=null;if(o)s=this.totalResults||this._getFetchSize(i);else s=this._getFetchSize(i);if(t&&t.indexOf("?")>-1?t+="&":t+="?",t+="limit="+s,o||(n.Collection._defined(i.startIndex)&&(t+="&offset="+i.startIndex),i.startID&&(t+="&fromID="+i.startID),i.since&&(t+="&since="+i.since),i.until&&(t+="&until="+i.until)),i.query){var r=n.Collection._getQueryString(i.query);r&&r.length>0&&(t+="&q="+r)}var a=this.comparator;if(a&&n.StringUtils.isString(a)){var l,u=this._getSortAttrs(a),d=this._getSortDirStr();for(l=0;l<u.length;l++)t+=0===l?"&orderBy="+u[l]+":"+d:","+u[l]+":"+d}t+="&totalResults=true"}return t},n.Collection.prototype._getSortDirStr=function(){return-1===this.sortDirection?"desc":"asc"},n.Collection.prototype.sync=function(e,t,i){return n.sync(e,t,i)},n.Collection._FETCH_SIZE_PROP="fetchSize",n.Model=function(e,t){n.Model._init(this,e,t,null)},n.Object.createSubclass(n.Model,n.Object,"oj.Model"),n.Model.prototype.Init=function(){n.Model.superclass.Init.call(this)},n.Model.prototype.attributes={},n.Model.prototype.defaults={},n.Model.prototype.id=null,n.Model.prototype.idAttribute="id",n.Model.prototype.urlRoot=null,n.Model.prototype.customURL=null,n.Model.prototype.validate=null,n.Model.prototype.validationError=null,n.Model.prototype.omitLanguageHeader=!1,n.Model._idCount=0,n.Model._init=function(e,t,i,o){var s,r,a;if(!n.Model._justExtending){e.Init(),n.Events.Mixin(e),e._clearChanged(),e.previousAttrs={},e.nestedSet=!1,e.index=-1;var l=i||{};for(a in e.attributes={},e.defaults&&!l.ignoreDefaults&&(e.attributes=n.Model._cloneAttributes($.isFunction(e.defaults)?e.defaults():e.defaults,null)),o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);if(t)if(s=l.parse,$.isFunction(s)&&(e.parse=s),r=n.Model._cloneAttributes(t,e.attributes),e.attributes=r,null==(r=s?e.parse(r):r)||void 0===r)e.attributes={};else for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&e._setProp(a,r[a],!1,!1,l,!0);e.SetCid(),e.SetCollection(l.collection),l.customURL&&(e.customURL=l.customURL),l.url&&(e.url=l.url),l.urlRoot&&(e.urlRoot=l.urlRoot),e.initialize&&e.initialize(t,l),e.SetupId()}},n.Model.extend=function(e,t){var i;n.Model._justExtending=!0,i=new n.Model,n.Model._justExtending=!1,$.extend(i,this.prototype);var o,s=e||{};return Object.keys(s).forEach(function(e){Object.prototype.hasOwnProperty.call(s,e)&&(i[e]=s[e])}),o=s&&s.constructor&&Object.prototype.hasOwnProperty.call(s,"constructor")?s.constructor:function(e,t){n.Model._init(this,e,t,s)},$.extend(o,this),o.prototype=i,o.extend=n.Model.extend,o.prototype.constructor=o,n.Events.Mixin(o,this),t&&Object.keys(t).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e])}),o},n.Model.prototype.TriggerInternal=function(e,t,i,n,o){},n.Model.prototype.SetCid=function(){this.GetCid()||(this.cid="id"+n.Model._idCount,n.Model._idCount+=1)},n.Model.prototype.GetCid=function(){return this.cid},n.Model.prototype.SetIndex=function(e){this.index=e},n.Model.prototype.GetIndex=function(){return this.index},n.Model.prototype.SetNext=function(e){var t=this.nextModel;return this.nextModel=e,t},n.Model.prototype.GetNext=function(){return this.nextModel},n.Model.prototype.SetPrevious=function(e){var t=this.previousModel;return this.previousModel=e,t},n.Model.prototype.GetPrevious=function(){return this.previousModel},n.Model.prototype.Merge=function(e,t,i){var o,s=!1,r=n.StringUtils.isString(t),a=!1,l=this;return Object.keys(e.attributes||{}).forEach(function(n){Object.prototype.hasOwnProperty.call(e.attributes,n)&&(o=l.attributes[n]!==e.attributes[n],r?n===t&&o&&(s=!0):o&&(s=!0),o&&(a=!0,l.attributes[n]=e.attributes[n],l._addChange(n,e.attributes[n]),l._fireAttrChange(n,l.attributes[n],null,i)))}),this.SetupId(),a&&this._fireChange(null,i),s},n.Model._hasProperties=function(e){var t;if(e&&e instanceof Object)for(t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1},n.Model.prototype.SetCollection=function(e){null!=e?(this.collection=e,this.SetupId()):delete this.collection},n.Model.prototype.GetCollection=function(){return this.collection},n.Model.prototype._fireAttrChange=function(e,t,i,o){null!=e&&this.TriggerInternal(o,n.Events.EventType.CHANGE+":"+e,this,t,i)},n.Model.prototype._fireChange=function(e,t){this.TriggerInternal(t,n.Events.EventType.CHANGE,this,e,null)},n.Model.prototype.SetupId=function(){var e=null;if(this.collection&&this.collection.modelId){var t=this.collection.modelId;e=$.isFunction(t)?t.call(this.collection,this.attributes):t}if(!e){var i=this._getIdAttr();e=null!=this.attributes?this.attributes[i]:null}this.id=e},n.Model.prototype._setPropInternal=function(e,t,i){var o=n.Object.__innerEquals(this.attributes[e],t);return!(!i&&o)&&(this.attributes[e]=t,this.SetupId(),!o)},n.Model.prototype._clearChanged=function(){this.changed={}},n.Model.prototype._addChange=function(e,t){this.changed[e]=t},n.Model.prototype._setProp=function(e,t,i,o,s,r){if(null==e)return!0;var a,l={},u=this.nestedSet;if(o?Object.keys(e).forEach(function(t){Object.prototype.hasOwnProperty.call(e,t)&&(l[t]=e[t])}):l[e]=t,a=s||{},!this._checkValid(l,{validate:a.validate},!1))return!1;u||(this._clearChanged(),this.changes=[]),this.nestedSet||r||(this.previousAttrs=n.Model._cloneAttributes(this.attributes,null)),this.nestedSet=!0;var d=this;Object.keys(l).forEach(function(e){Object.prototype.hasOwnProperty.call(l,e)&&(d._setPropInternal(e,l[e],i)?(d._addChange(e,l[e]),d.changes.push(e)):delete l[e])});var h=a.silent;if(Object.keys(l).forEach(function(e){Object.prototype.hasOwnProperty.call(l,e)&&(!h&&(d.changes.length>0||u&&-1===d.changes.indexOf(e))&&(d.pendingChanges=!0,d.pendingOpts=a),d._fireAttrChange(e,l[e],a,h))}),u)return!0;if(!h&&!u)for(;this.pendingChanges;)this.pendingChanges=!1,this._fireChange(this.pendingOpts,h);return this.nestedSet=!1,!0},n.Model.prototype.clear=function(e){var t,i,o={silent:!0},s=e||{};t=s.silent,o.validate=s.validate,this._clearChanged();for(i in this.attributes)if(Object.prototype.hasOwnProperty.call(this.attributes,i)){if(!this._unsetInternal(i,o,!0))return!1;this.TriggerInternal(t,n.Events.EventType.CHANGE+":"+i,this,void 0,null)}return this.attributes={},this.SetupId(),this._fireAttrChange(null,null,null,t),this._fireChange(null,t),this},n.Model._cloneAttributes=function(e,t){var i,o,s=t||{},r=!0;if(("object"==typeof s?Object.keys(s):[]).length>0){for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&Object.prototype.hasOwnProperty.call(e,i)&&void 0===e[i]&&delete e[i];return n.CollectionUtils.copyInto(s,e,void 0,!0,1e4),s}for(i in e)if("function"===(o=$.type(e[i]))||"undefined"===o||"date"===o||"array"===o||"object"===o){r=!1;break}return r?s=JSON.parse(JSON.stringify(e)):"object"==typeof e&&n.CollectionUtils.copyInto(s,e,void 0,!0,1e4),s},n.Model.prototype.clone=function(){var e,t=new this.constructor;for(e in this)Object.prototype.hasOwnProperty.call(this,e)&&this[e]!==this.attributes&&(t[e]=this[e]);return t.attributes=n.Model._cloneAttributes(this.attributes,null),delete t.cid,t.SetCid(),t.SetupId(),t},n.Model.prototype.Match=function(e,t){var i,n=this.GetId();return void 0!==n&&n==e||void 0!==(i=this.cid)&&i==t},n.Model.prototype.set=function(e,t,i){var o,s=i||{},r=!0;if(arguments&&arguments.length>0)if(n.StringUtils.isString(e))s.unset?this._unsetInternal(e,null,!1):this._setProp(e,t,!1,!1,s,!1)||(r=!1);else if((s=t||{}).unset)for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&this._unsetInternal(o,null,!1);else this._setProp(e,null,!0,!0,s,!1)||(r=!1);return!!r&&this},n.Model.prototype.unset=function(e,t){return this._unsetInternal(e,t,!1)},n.Model.prototype._unsetInternal=function(e,t,i){var n=t||{},o=n.silent;if(this.has(e)){if(!this._checkValid({},n,!1))return!1;i||this._clearChanged(),delete this.attributes[e],this._addChange(e,void 0),this._fireAttrChange(e,null,null,o),this._fireChange(null,o)}return this.SetupId(),!0},n.Model.prototype.get=function(e){return this.attributes[e]},n.Model.prototype.has=function(e){return n.Collection._defined(this.attributes[e])},n.Model.prototype.fetch=function(e){var t,i=e||{},o=i.success,s=i.error,r=this;return(t=n.Model._copyOptions(i)).error=function(e,t,o){n.Model._triggerError(r,!1,i,t,o,e),s&&s.apply(r,arguments)},t.success=function(e){t.xhr&&(i.xhr=t.xhr),n.Model._fireSyncEvent(r,e,t,!1),$.isFunction(r.parse)&&r.set(r.parse(e),t),o&&o.call(n.Model.GetContext(t,r),r,e,i)},n.Model._internalSync("read",this,t)},n.Model.prototype._parseImpl=function(e){return e},n.Model.prototype.parse=n.Model.prototype._parseImpl,n.Model.prototype.url=function(){var e,t,i=this._getUrlRoot(),o=this.GetId();if(i)return o?i+"/"+encodeURIComponent(o):i;if(e=this.collection)return t=n.Model.GetPropValue(e,"url"),o&&t?t+("/"===n.Model._getLastChar(t)?"":"/")+encodeURIComponent(this.GetId()):t;throw new n.URLError},n.Model.prototype.keys=function(){var e=[],t=this;return Object.keys(t.attributes||{}).forEach(function(i){Object.prototype.hasOwnProperty.call(t.attributes,i)&&e.push(i)}),e},n.Model.prototype.values=function(){var e=[],t=this;return Object.keys(t.attributes||{}).forEach(function(i){Object.prototype.hasOwnProperty.call(t.attributes,i)&&e.push(t.get(i))}),e},n.Model.prototype.pairs=function(){var e,t=[],i=this;return Object.keys(i.attributes||{}).forEach(function(n){Object.prototype.hasOwnProperty.call(i.attributes,n)&&((e=[]).push(n),e.push(i.get(n)),t.push(e))}),t},n.Model.prototype.omit=function(e){var t,i=[],n={};if(e instanceof Array)i=e;else for(t=0;t<arguments.length;t++)i.push(arguments[t]);var o=this;return Object.keys(o.attributes||{}).forEach(function(e){Object.prototype.hasOwnProperty.call(o.attributes,e)&&-1===i.indexOf(e)&&(n[e]=o.get(e))}),n},n.Model.prototype.pick=function(e){var t,i=[],n={};if(e instanceof Array)i=e;else for(t=0;t<arguments.length;t++)i.push(arguments[t]);for(t=0;t<i.length;t++)Object.prototype.hasOwnProperty.call(this.attributes,i[t])&&(n[i[t]]=this.get(i[t]));return n},n.Model.prototype.invert=function(){var e,t={},i=this;return Object.keys(i.attributes||{}).forEach(function(n){Object.prototype.hasOwnProperty.call(i.attributes,n)&&(e=i.get(n),t[e]=n)}),t},n.Model._getLastChar=function(e){return e.charAt(e.length-1)},n.Model.prototype._saveUrl=function(){var e=this._getUrlRoot();return e||(this.GetCollection()?this.GetCollection().url:null)},n.Model.prototype._getUrlRoot=function(){return n.Model.GetPropValue(this,"urlRoot")},n.Model.prototype._parseSaveImpl=function(e){return e},n.Model.prototype.parseSave=n.Model.prototype._parseSaveImpl,n.Model.prototype.isValid=function(){var e={};return e.validate=this.validate,this._checkValid(this.attributes,e,!1)},n.Model._isValidateSet=function(e,t){var i=e||{};return void 0!==i.validate&&null!==i.validate?i.validate:t},n.Model.prototype._checkValid=function(e,t,i){var o=t||{},s=this.validate;return!(s&&n.Model._isValidateSet(o,i)&&(this.validationError=s.call(this,e,o),this.validationError))||(this.TriggerInternal(!1,n.Events.EventType.INVALID,this,this.validationError,o),!1)},n.Model._processArgs=function(e){var t,i=!1,o={},s={};if(e&&e.length>0){if(e.length>1&&e[e.length-1]&&n.Model._hasProperties(e[e.length-1])&&(i=!0,o=e[e.length-1]||{}),null==e[0])return{attributes:null,options:o};if(n.Model._hasProperties(e[0])||n.Object.isEmpty(e[0]))Object.keys(e[0]).forEach(function(t){Object.prototype.hasOwnProperty.call(e[0],t)&&(s[t]=e[0][t])});else for(t=0;t<e.length;t+=2)(void 0!==e[t]||t<e.length-1||!i&&t===e.length-1)&&(s[e[t]]=e[t+1])}return{attributes:s,options:o}},n.Model._copyOptions=function(e){var t={},i=e||{};return Object.keys(i).forEach(function(e){Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])}),t},n.Model._triggerError=function(e,t,i,o,s,r){var a=i||{};a.textStatus=o,a.errorThrown=s,e.TriggerInternal(t,n.Events.EventType.ERROR,e,r,a)},n.Model.prototype.save=function(e,t){var i,o,s,r,a,l,u,d,h,c=n.Model._processArgs(arguments);h=void 0===e?void 0:c.attributes;var p=t||{};u=n.Model._copyOptions(c.options);var _=$.extend(!0,{},this.attributes,h);return!!this._checkValid(_,u,!0)&&(u.wait||this.set(h),i=void 0!==u.forceNew&&u.forceNew,r=this,a=u.error,l=u.patch,u.error=function(e,t,i){n.Model._triggerError(r,!1,p,t,i,e),a&&a.apply(r,arguments)},u.saveAttrs=u.wait?this._attrUnion(h):this.attributes,d=this.attributes,this.attributes=u.saveAttrs,u.saveAttrs=this.toJSON(),this.attributes=d,i||this.isNew()?(s=n.Model._getSuccess(u),u.success=function(e){var t;if(u.xhr&&(p.xhr=u.xhr),e&&!n.Object.isEmpty(e)){if(t=$.isFunction(r.parse)?r.parse(e):e,!r._checkValid(t,u,!0))return;r.attributes=$.extend(!0,r.attributes,t),u.wait&&Object.keys(h||{}).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&(h[e]=t[e])}),r.SetupId()}n.Model._fireSyncEvent(r,e,u,!1),u.wait&&r.set(h),s&&s.call(n.Model.GetContext(u,r),r,e,p),r._clearChanged()},u.attrs||(u.attrs=u.saveAttrs),u.parse=!0,l&&(u.saveAttrs=u.attrs),n.Model._internalSync("create",this,u)):(o=u.success,u.success=function(e){var t;u.xhr&&(p.xhr=u.xhr),e&&!n.Object.isEmpty(e)&&(t=$.isFunction(r.parse)?r.parse(e):e,r.attributes=$.extend(!0,r.attributes,t),u.wait&&Object.keys(h||{}).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&(h[e]=t[e])}),r.SetupId()),n.Model._fireSyncEvent(r,e,u,!1),u.wait&&r.set(h),o&&o.call(n.Model.GetContext(u,r),r,e,p),r._clearChanged()},u.attrs||(u.attrs=void 0===h?void 0:l?h:u.saveAttrs),n.Model._internalSync(l?"patch":"update",this,u)))},n.Model.prototype._attrUnion=function(e){var t={},i=this;return Object.keys(i.attributes||{}).forEach(function(e){Object.prototype.hasOwnProperty.call(i.attributes,e)&&(t[e]=i.attributes[e])}),Object.keys(e||{}).forEach(function(i){Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}),t},n.Model.GetPropValue=function(e,t){return e?$.isFunction(e[t])?e[t]():e[t]:$.isFunction(t)?t():t},n.Model.IsComplexValue=function(e){return e&&Object.prototype.hasOwnProperty.call(e,"value")&&Object.prototype.hasOwnProperty.call(e,"comparator")},n.Model.prototype._hasAttrs=function(e){var t;for(t in e)if(Object.prototype.hasOwnProperty.call(e,t)){if(!Object.prototype.hasOwnProperty.call(this.attributes,t))return!1;for(var i=Array.isArray(e[t])?e[t]:[e[t]],o=0;o<i.length;o++)if(n.Model.IsComplexValue(i[o])){var s=i[o].comparator,r=i[o].value;if(n.StringUtils.isString(s))throw new Error("String comparator invalid for local where/findWhere");if(!s(this,t,r))return!1}else if(e[t]!==this.attributes[t])return!1}return!0},n.Model.prototype.matches=function(e){return function(t){for(var i in e)if(t.get(i)!==e[i])return!1;return!0}(this)},n.Model.prototype.Contains=function(e){var t,i=e.constructor===Array?e:[e];for(t=0;t<i.length;t++)if(this._hasAttrs(i[t]))return!0;return!1},n.Model._getSuccess=function(e){return null!=e&&e.success?e.success:null},n.Model.GetContext=function(e,t){return void 0!==e&&void 0!==e.context?e.context:t},n.Model.prototype.isNew=function(){return void 0===this.GetId()},n.Model.prototype._getIdAttr=function(){return this.idAttribute||"id"},n.Model.prototype.GetId=function(){return this.id},n.Model.prototype.changedAttributes=function(e){if(e){var t={},i=this;return Object.keys(e).forEach(function(o){Object.prototype.hasOwnProperty.call(e,o)&&(n.Object.__innerEquals(e[o],i.attributes[o])||(t[o]=e[o]))}),!n.Object.isEmpty(t)&&t}return!n.Object.isEmpty(this.changed)&&this.changed},n.Model.prototype.hasChanged=function(e){return void 0!==e?n.Model._hasProperties(this.changed)&&Object.prototype.hasOwnProperty.call(this.changed,e):n.Model._hasProperties(this.changed)},n.Model.prototype.destroy=function(e){var t,i,o,s=e||{},r=s.wait,a=s.error,l=this;o=n.Model._copyOptions(s),t=n.Model._getSuccess(o);var u=this.GetCollection();return o.success=function(e){if(o.xhr&&(s.xhr=o.xhr),u){var i=n.StringUtils.isString(e)&&!n.StringUtils.isEmpty(e)?JSON.parse(e):e;u._setPagingReturnValues(i,null,e,!0)}r&&l._fireDestroy(!1),n.Model._fireSyncEvent(l,e,o,!1),t&&t.call(n.Model.GetContext(o,l),l,e,s)},o.error=function(e){l.TriggerInternal(!1,n.Events.EventType.ERROR,l,e,s),a&&a.apply(l,arguments)},this.isNew()?(r||this._fireDestroy(!1),t&&t.call(n.Model.GetContext(o,l),l,null,s),!1):(i=n.Model._internalSync("delete",this,o),r||this._fireDestroy(!1),i)},n.Model.prototype._fireRequest=function(e,t,i,o){this.TriggerInternal(o,n.Events.EventType.REQUEST,e,t,i)},n.Model.prototype._fireDestroy=function(e){this.TriggerInternal(e,n.Events.EventType.DESTROY,this,this.collection,null)},n.Model._fireSyncEvent=function(e,t,i,o){e.TriggerInternal(o,n.Events.EventType.SYNC,e,t,i)},n.Model.prototype.toJSON=function(){var e={},t=this;return Object.keys(t.attributes||{}).forEach(function(i){Object.prototype.hasOwnProperty.call(t.attributes,i)&&(Array.isArray(t.attributes[i])?e[i]=t.attributes[i].slice(0):e[i]=t.attributes[i])}),e},n.Model.prototype.previous=function(e){return this.previousAttrs[e]},n.Model.prototype.previousAttributes=function(){return this.previousAttrs},n.Model.prototype.sync=function(e,t,i){return n.sync(e,t,i)},n.Model._internalSync=function(e,t,i){var o=i||{};t.oauth&&(o.oauthHeader=t.oauth.getHeader()),!o.dataType&&t.dataType&&(o.dataType=t.dataType),!o.jsonpCallback&&t.jsonpCallback&&(o.jsonpCallback=t.jsonpCallback),"create"!==e&&"patch"!==e&&"update"!==e||(o.parsedData=t.parseSave.call(t,"patch"===e?o.attrs:o.saveAttrs));var s=null;t instanceof n.Model&&(s=t.GetId());var r={};Object.keys(o||{}).forEach(function(e){r[e]=o[e]});var a=n.Model.SetCustomURLOptions(s,t,o);return Object.keys(a||{}).forEach(function(e){r[e]=a[e]}),o.xhr=t.sync(e,t,r),r.xhr&&(o.xhr=r.xhr),o.xhr},n.Model.SetCustomURLOptions=function(e,t,i){var o=t instanceof n.Collection?t.ModifyOptionsForCustomURL(i):{};return e&&(o.recordID=e),o},n.sync=function(e,t,i){var o,s=i||{};function r(e){return t._fireRequest(t,e,s,s.silent),e}var a,l=s.success,u=s.error;if("create"===e.valueOf())return a=(a=t._saveUrl())||n.Model.GetPropValue(t,"url"),r((o=new n.RestImpl(a,t)).addRecord(s.parsedData,u,s,t));if("read"===e.valueOf())return t instanceof n.Model?(a=s.url?s.url:n.Model.GetPropValue(t,"url"),r((o=new n.RestImpl(a,t)).getRecord(l,u,t.GetId(),s,n.Model.GetContext(s,t)))):(a=t.GetCollectionFetchUrl(s),r((o=new n.RestImpl(a,t)).getRecords(l,u,s,t)));o=new n.RestImpl(n.Model.GetPropValue(t,"url"),t);var d=null;return t instanceof n.Model&&(d=t.GetId()),"update"===e.valueOf()?r(o.updateRecord(l,d,s.parsedData,u,s,t,!1)):"patch"===e.valueOf()?r(o.updateRecord(l,d,s.parsedData,u,s,t,!0)):"delete"===e.valueOf()?r(o.deleteRecord(d,u,s,t)):null},n.Model._urlError=function(e){if(!e.url)throw new Error("The url property or function must be specified")},n.ajax=function(e){return arguments&&arguments.length>0&&n.Model._urlError(arguments[0]),$.ajax.apply(n,arguments)},n.OAuth=function(e,t){n.OAuth._init(this,t||{},e||"Authorization")},n.Object.createSubclass(n.OAuth,n.Object,"oj.OAuth"),n.OAuth.prototype.Init=function(){n.OAuth.superclass.Init.call(this)},n.OAuth.prototype.getHeader=function(){var e={};return this.accessTokenResponse.access_token||this.clientCredentialGrant(),e[this.accessTokenRequest.auth_header]="Bearer "+this.accessTokenResponse.access_token,e},n.OAuth.prototype.isInitialized=function(){return!(!this.accessTokenResponse||!this.accessTokenResponse.access_token)},n.OAuth.prototype.clientCredentialGrant=function(){var e={},t=this;e[t.accessTokenRequest.auth_header]="Basic "+n.OAuth._base64_encode(t.accessTokenRequest.client_id+":"+t.accessTokenRequest.client_secret),$.ajax({type:"POST",async:!1,url:this.accessTokenRequest.bearer_url,data:"grant_type=client_credentials",headers:e,success:function(e){t.accessTokenResponse=n.OAuth._initAccessToken(t.accessTokenResponse,e)},error:function(e){throw new Error(e.responseText)}})},n.OAuth.prototype.setAccessTokenResponse=function(e){this.accessTokenResopnse=n.OAuth._initAccessToken(this.accessTokenResponse,e)},n.OAuth.prototype.getAccessTokenResponse=function(){return this.accessTokenResponse},n.OAuth.prototype.cleanAccessTokenResponse=function(){n.OAuth._cleanAccessToken(this.accessTokenResponse)},n.OAuth.prototype.setAccessTokenRequest=function(e){this.accessTokenRequest=n.OAuth._initAccessToken(this.accessTokenRequest,e)},n.OAuth.prototype.getAccessTokenRequest=function(){return this.accessTokenRequest},n.OAuth.prototype.cleanAccessTokenRequest=function(){n.OAuth._cleanAccessToken(this.accessTokenRequest)},n.OAuth._init=function(e,t,i){var o=e;o.Init(),o.accessTokenRequest={},o.accessTokenResponse={},t.access_token?o.accessTokenResponse=n.OAuth._initAccessToken(o.accessTokenResponse,t):t.client_id&&t.client_secret&&t.bearer_url&&(o.accessTokenResponse=n.OAuth._initAccessToken(o.accessTokenRequest,t)),o.accessTokenRequest.auth_header=i},n.OAuth._initAccessToken=function(e,t){var i=t||{},n=e||{};return Object.keys(i).forEach(function(e){Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}),n},n.OAuth._cleanAccessToken=function(e){var t=e||{};Object.keys(t).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&"auth_header"!==e&&(t[e]=null,delete t[e])})},n.OAuth._base64_encode=function(e){var t,i,n,o,s=0,r=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=[];do{t=e.charCodeAt(s),s+=1,i=e.charCodeAt(s),s+=1,n=e.charCodeAt(s),s+=1,t=(o=t<<16|i<<8|n)>>18&63,i=o>>12&63,n=o>>6&63,o&=63,l[r]=a.charAt(t)+a.charAt(i)+a.charAt(n)+a.charAt(o),r+=1}while(s<e.length);return l=l.join(""),((t=e.length%3)?l.slice(0,t-3):l)+"===".slice(t||3)},n.RestImpl=function(e,t){this.rootURL=e,this.model=t,this.customURL=t.customURL,$.support.cors=!0},n.RestImpl._HEADER_PROP="headers",n.RestImpl.addOptions=function(e,t,i){var o=$.extend(!0,e,i);return t&&Object.keys(t||{}).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&"oauthHeader"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||(o[e]=t[e]),e===n.RestImpl._HEADER_PROP&&(o[e]=$.extend(!0,o[e],t[e])))}),t.oauthHeader&&(o[n.RestImpl._HEADER_PROP]||(o[n.RestImpl._HEADER_PROP]={}),Object.keys(t.oauthHeader||{}).forEach(function(e){Object.prototype.hasOwnProperty.call(t.oauthHeader,e)&&(Object.prototype.hasOwnProperty.call(o[n.RestImpl._HEADER_PROP],e)||(o[n.RestImpl._HEADER_PROP][e]=t.oauthHeader[e]))})),o},n.RestImpl.prototype.getRecords=function(e,t,i,o){var s=i||{},r="jsonp"===s.dataType,a=this._getURL("read",this.rootURL,this.customURL,null,o,s),l={crossDomain:s.crossDomain||!r,dataType:this._getDataType(s),jsonpCallback:s.jsonpCallback,context:null!==o?o:this,success:e,error:t};return l=this._addHeaderProp(l),l=n.RestImpl.addOptions(l,s,a),s.xhr=this.ajax(l,o),s.xhr},n.RestImpl.prototype._addHeaderProp=function(e){var t=e||{};return this.model&&this.model.omitLanguageHeader||(t[n.RestImpl._HEADER_PROP]={"Accept-Language":this.getLocale()}),t},n.RestImpl.prototype.getRecord=function(e,t,i,o,s){var r=o||{},a="jsonp"===r.dataType,l=this._getURL("read",this.rootURL,this.customURL,i,s,r),u={crossDomain:r.crossDomain||!a,dataType:this._getDataType(r),jsonpCallback:r.jsonpCallback,context:null!==s?s:this,success:e,error:t};return u=this._addHeaderProp(u),u=n.RestImpl.addOptions(u,r,l),r.xhr=this.ajax(u,s),r.xhr},n.RestImpl.prototype.updateRecord=function(e,t,i,o,s,r,a){var l=s||{},u="jsonp"===l.dataType,d=this._getURL(a?"patch":"update",this.rootURL,this.customURL,t,r,l),h=n.RestImpl._emulateHTTP(l),c={crossDomain:l.crossDomain||!u,contentType:this._getContentType(l),dataType:this._getDataType(l),jsonpCallback:l.jsonpCallback,data:this._getData(JSON.stringify(i),l,d),emulateHTTP:h,emulateJSON:n.RestImpl._emulateJSON(l),success:e,error:o,context:null!==r?r:this};return c=this._addHeaderProp(c),c=n.RestImpl.addOptions(c,l,d),c=n.RestImpl._beforeSendMod(h,c),l.xhr=this.ajax(c,r),l.xhr},n.RestImpl._beforeSendMod=function(e,t){var i=t||{};if(e){var n=i.beforeSend;i.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",i._method),n?n.apply(this,arguments):null}}return i},n.RestImpl.prototype._getData=function(e,t,i){if(n.RestImpl._emulateJSON(t)){var o={_method:i._method?i._method:i.type};return e&&(o.model=e),o}return e},n.RestImpl.prototype._getHTTPMethod=function(e,t){if(t.type)return{method:t.type};var i=null;if("create"===e&&(i="POST"),"delete"===e&&(i="DELETE"),"patch"===e&&(i="PATCH"),"update"===e&&(i="PUT"),n.RestImpl._emulateHTTP(t)){var o={method:"POST"};return o._method=i,o}return null===i&&(i="GET"),{method:i}},n.RestImpl._emulateHTTP=function(e){return e.emulateHTTP||n.emulateHTTP},n.RestImpl._emulateJSON=function(e){return e.emulateJSON||n.emulateJSON},n.RestImpl.prototype._getURL=function(e,t,i,o,s,r){var a=this._getHTTPMethod(e,r);if($.isFunction(i)){var l=i.call(this,e,s,n.Model.SetCustomURLOptions(o,s,r));if(n.StringUtils.isString(l)){var u={url:l,type:a.method};return a._method&&(u._method=a._method),u}if(l)return l.url=Object.prototype.hasOwnProperty.call(l,"url")?l.url:t,Object.prototype.hasOwnProperty.call(l,"type")||(l.type=a.method),Object.prototype.hasOwnProperty.call(l,"data")||a._method&&(l._method=a._method),l}var d={url:n.Model.GetPropValue(null,t),type:a.method};return a._method&&(d._method=a._method),d},n.RestImpl.prototype.deleteRecord=function(e,t,i,o){var s=i||{},r="jsonp"===s.dataType,a=this._getURL("delete",this.rootURL,this.customURL,e,o,s),l=n.RestImpl._emulateHTTP(s),u=n.RestImpl._emulateJSON(s),d={crossDomain:s.crossDomain||!r,success:s.success,error:t,context:null!==o?o:this,emulateHTTP:l,emulateJSON:u},h=this._getData(null,s,a);return h&&(d.data=h),d=n.RestImpl.addOptions(d,s,a),d=n.RestImpl._beforeSendMod(l,d),s.xhr=this.ajax(d,o),s.xhr},n.RestImpl.prototype.addRecord=function(e,t,i,o){var s=i||{},r=JSON.stringify(e),a="jsonp"===s.dataType,l=this._getURL("create",this.rootURL,this.customURL,null,o,s),u=n.RestImpl._emulateHTTP(s),d={crossDomain:s.crossDomain||!a,contentType:s.contentType||"application/json",dataType:this._getDataType(s),jsonpCallback:s.jsonpCallback,data:this._getData(r,s,l),success:s.success,error:t,emulateHTTP:u,emulateJSON:n.RestImpl._emulateJSON(s),context:null!==o?o:this};return d=this._addHeaderProp(d),d=n.RestImpl.addOptions(d,s,l),s.xhr=this.ajax(d,o),s.xhr},n.RestImpl.prototype._getDataType=function(e){return n.RestImpl._emulateJSON(e)&&!n.RestImpl._emulateHTTP(e)?"application/x-www-form-urlencoded":e.dataType||"json"},n.RestImpl.prototype._getContentType=function(e){return n.RestImpl._emulateJSON(e)&&!n.RestImpl._emulateHTTP(e)?"application/x-www-form-urlencoded":e.contentType||"application/json"},n.RestImpl.prototype.getLocale=function(){return p.getLocale()},n.RestImpl.prototype.ajax=function(e,t){if(null===e.url||void 0===e.url)throw new n.URLError;var i=n.ajax(e);return t._addxhr&&t._addxhr(i),i},n.URLError=function(){this.name="URLError",this.message="No URL defined"},n.URLError.prototype=new Error,n.URLError.constructor=n.URLError;var T={};T.Collection=n.Collection,T.Events=n.Events,T.Model=n.Model,T.OAuth=n.OAuth,T.URLError=n.URLError,n.Message=function(e,t,i){this.Init(e,t,i)},n.Message.SEVERITY_TYPE={CONFIRMATION:"confirmation",INFO:"info",WARNING:"warning",ERROR:"error",FATAL:"fatal"},n.Message.SEVERITY_LEVEL={FATAL:5,ERROR:4,WARNING:3,INFO:2,CONFIRMATION:1},n.Object.createSubclass(n.Message,n.Object,"oj.Message"),n.Message.prototype.Init=function(e,t,i){n.Message.superclass.Init.call(this),this.summary=e,this.detail=t,this.severity=i||n.Message.SEVERITY_TYPE.ERROR},n.Message.getSeverityLevel=function(e){var t=e;if(t)if("string"==typeof e){var i=n.Message._LEVEL_TO_TYPE.indexOf(t,1);t=-1===i?n.Message.SEVERITY_LEVEL.ERROR:i}else"number"==typeof t&&(t<n.Message.SEVERITY_LEVEL.CONFIRMATION||t>n.Message.SEVERITY_LEVEL.FATAL)&&(t=n.Message.SEVERITY_LEVEL.ERROR);return t||n.Message.SEVERITY_LEVEL.ERROR},n.Message.getSeverityType=function(e){var t=e;t&&("string"==typeof t?-1===n.Message._LEVEL_TO_TYPE.indexOf(t,1)&&(t=n.Message.SEVERITY_TYPE.ERROR):"number"==typeof t&&(t=t<n.Message.SEVERITY_LEVEL.CONFIRMATION||t>n.Message.SEVERITY_LEVEL.FATAL?n.Message.SEVERITY_TYPE.ERROR:n.Message._LEVEL_TO_TYPE[e]));return t||n.Message.SEVERITY_TYPE.ERROR},n.Message.getMaxSeverity=function(e){var t=-1;return e&&e.length>0&&$.each(e,function(e,i){var o=n.Message.getSeverityLevel(i.severity);t=t<o?o:t}),t},n.Message.isValid=function(e){return!(n.Message.getMaxSeverity(e)>=n.Message.SEVERITY_LEVEL.ERROR)},n.Message._LEVEL_TO_TYPE=["none",n.Message.SEVERITY_TYPE.CONFIRMATION,n.Message.SEVERITY_TYPE.INFO,n.Message.SEVERITY_TYPE.WARNING,n.Message.SEVERITY_TYPE.ERROR,n.Message.SEVERITY_TYPE.FATAL];var D=n.Message;function A(e){var t=e.extension;if(t){var i=t["oj-dynamic"];if(i)return i.promiseProperties}return null}function I(){var e,t,i=new Promise(function(i,n){e=i,t=n});return Object.defineProperty(i,"resolve",{value:e}),Object.defineProperty(i,"reject",{value:t}),i}n.ComponentMessage=function(e,t,i,n){this.Init(e,t,i,n)},n.Object.createSubclass(n.ComponentMessage,n.Message,"oj.ComponentMessage"),n.ComponentMessage.DISPLAY={SHOWN:"shown",HIDDEN:"hidden"},n.ComponentMessage._DEFAULT_OPTIONS={display:n.ComponentMessage.DISPLAY.SHOWN,context:""},n.ComponentMessage.prototype.Init=function(e,t,i,o){n.ComponentMessage.superclass.Init.call(this,e,t,i),this._options=$.extend({},n.ComponentMessage._DEFAULT_OPTIONS,o)},n.ComponentMessage.prototype.clone=function(){return new n.ComponentMessage(this.summary,this.detail,this.severity,this._options)},n.ComponentMessage.prototype.canDisplay=function(){return!(this._options&&this._options.display&&this._options.display===n.ComponentMessage.DISPLAY.HIDDEN)},n.ComponentMessage.prototype._forceDisplayToShown=function(){return!(!this._options||n.ComponentMessage.DISPLAY.HIDDEN!==this._options.display)&&(this._options.display=n.ComponentMessage.DISPLAY.SHOWN,!0)},n.ComponentMessage.prototype._isMessageAddedByComponent=function(){return!(!this._options||!this._options.context)},n.BaseCustomElementBridge={},n.BaseCustomElementBridge.proto={getClass:function(e){var t=Object.create(HTMLElement.prototype);this.InitializePrototype(t);var i=this.GetMetadata(e);n.BaseCustomElementBridge._enumerateMetadataForKey(t,i,"properties",this.DefinePropertyCallback.bind(this)),n.BaseCustomElementBridge._enumerateMetadataForKey(t,i,"methods",this.DefineMethodCallback.bind(this)),this.AddComponentMethods(t),t.setProperties=function(e){n.BaseCustomElementBridge.getInstance(this)._setProperties(this,e)},Object.defineProperty(t,"set",{value:function(e,t){this.setProperty(e,t)}}),Object.defineProperty(t,"unset",{value:function(e){this.setProperty(e,void 0)}}),t.attributeChangedCallback=this._attributeChangedCallback,t.connectedCallback=this._connectedCallback,t.disconnectedCallback=this._detachedCallback;var o=function(){var e=window.Reflect;return void 0!==e?e.construct(HTMLElement,[],this.constructor):HTMLElement.call(this)},s=this;return Object.defineProperty(o,"observedAttributes",{get:function(){return s.GetAttributes(i)}}),Object.defineProperty(t,"constructor",{value:o,writable:!0,configurable:!0}),o.prototype=t,Object.setPrototypeOf(o,HTMLElement),o},resolveBindingProvider:function(e){this._bpResolve?this._bpResolve(e):this._bpInst=e},resolveDelayedReadyPromise:function(){this.GetDelayedReadyPromise().resolvePromise()},whenCreated:function(){return this._whenCreatedPromise},AddComponentMethods:function(e){},CreateComponent:function(e){},DefineMethodCallback:function(e,t,i){},DefinePropertyCallback:function(e,t,i){},GetDelayedReadyPromise:function(){return this._delayedReady||(this._delayedReady=new n.BaseCustomElementBridge.__DelayedPromise),this._delayedReady},GetAttributes:function(e){return n.BaseCustomElementBridge.getAttributes(e.properties)},GetMetadata:function(e){return e[n.BaseCustomElementBridge.DESC_KEY_META]},GetAliasForProperty:function(e){return e},GetDefaultValue:function(e){return n.BaseCustomElementBridge._consolidateDefaults(e)},HandleAttributeChanged:function(e,t,i,n){},HandleBindingsApplied:function(e,t){},HandleDetached:function(e){},HandleReattached:function(e){},InitializeElement:function(e){},InitializePrototype:function(e){},BatchedPropertySet:function(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++){var o=i[n];e.setProperty(o,t[o])}},GetProperty:function(e,t,i){var o=n.__AttributeUtils.eventListenerPropertyToEventType(t),s=n.BaseCustomElementBridge.__GetPropertyMetadata(t,n.BaseCustomElementBridge.getProperties(this,e));return o||!s||-1===t.indexOf(".")?i[t]:n.BaseCustomElementBridge.__GetProperty(i,t)},InitializeBridge:function(e){var t=n.BaseCustomElementBridge.__GetDescriptor(e.tagName);this.METADATA=this.GetMetadata(t),this._eventListeners={}},PlaybackEarlyPropertySets:function(e){if(this._bCanSetProperty=!0,this._earlySets)for(;this._earlySets.length;){var t=this._earlySets.shift();e.setProperty(t.property,t.value)}},SaveEarlyPropertySet:function(e,t){return!this.__INITIALIZING_PROPS&&!this._bCanSetProperty&&(this._earlySets||(this._earlySets=[]),this._earlySets.push({property:e,value:t}),!0)},SetEventListenerProperty:function(e,t,i){var o=n.__AttributeUtils.eventListenerPropertyToEventType(t),s=this._eventListeners[o];s||(s=this._createEventListenerWrapper(),this._eventListeners[o]=s,e.addEventListener(o,s)),null==i||i instanceof Function?s.setListener(i):n.BaseCustomElementBridge.__ThrowTypeError(e,t,i,"function")},SetProperty:function(e,t,i,o,s){var r=n.__AttributeUtils.eventListenerPropertyToEventType(t),a=n.BaseCustomElementBridge.__GetPropertyMetadata(t,n.BaseCustomElementBridge.getProperties(this,e));if(r||!a)e[t]=i;else{var l=e.getProperty(t),u=t.split(".")[0],d=o[u];if(n.CollectionUtils.isPlainObject(d)&&(d=n.CollectionUtils.copyInto({},d,void 0,!0)),!n.BaseCustomElementBridge.__CompareOptionValues(t,a,i,l)){var h=-1!==t.indexOf(".");if(h&&(this._SKIP_PROP_CHANGE_EVENT=!0),s?this.ValidateAndSetProperty(this.GetAliasForProperty.bind(this),o,t,i,e):n.BaseCustomElementBridge.__SetProperty(this.GetAliasForProperty.bind(this),o,t,i),this._SKIP_PROP_CHANGE_EVENT=!1,h){var c={};c.path=t,c.value=i,c.previousValue=l;var p=s?"external":"internal";n.BaseCustomElementBridge.__FirePropertyChangeEvent(e,u,o[u],d,p,c)}return{property:u,propertySet:!0,isSubproperty:h}}}return{property:null,propertySet:!1,isSubproperty:!1}},ValidateAndSetProperty:function(e,t,i,o,s){var r=this.ValidatePropertySet(s,i,o);n.BaseCustomElementBridge.__SetProperty(e,t,i,r)},ValidatePropertySet:function(t,i,o){var s=n.BaseCustomElementBridge.getProperties(this,t),r=n.BaseCustomElementBridge.__GetPropertyMetadata(i,s),a=i.split(".");if(r)return s[a[0]].readOnly&&this.throwError(t,"Read-only property '"+i+"' cannot be set."),n.BaseCustomElementBridge.checkEnumValues(t,i,o,r),null!=o?n.BaseCustomElementBridge.checkType(t,i,o,r):o;e.warn(n.BaseCustomElementBridge.getElementInfo(t)+": Ignoring property set for undefined property '"+i+"'.")},_attributeChangedCallback:function(e,t,i){var o=n.BaseCustomElementBridge.getInstance(this);if(o._bCreateCalled){var s=n.__AttributeUtils.attributeToPropertyName(e),r=n.BaseCustomElementBridge.__GetPropertyMetadata(s,n.BaseCustomElementBridge.getProperties(o,this));n.BaseCustomElementBridge.__CheckOverlappingAttribute(this,e),null===i&&(i=void 0);var a={detail:{attribute:e,value:i,previousValue:t}};this.dispatchEvent(new CustomEvent("attribute-changed",a)),n.__AttributeUtils.getExpressionInfo(i).expr||(r&&this.setProperty(s,n.BaseCustomElementBridge.__ParseAttrValue(this,e,s,i,r)),o.HandleAttributeChanged(this,e,t,i))}},_connected:function(e){if(this._bConnected=!0,this._bCreateCalled)this._complete?this.HandleReattached(e):this._registerBusyState(e);else{this._bCreateCalled=!0,this._registerBusyState(e),this._monitorReadyPromise(e),this.InitializeElement(e);var t=this,i=this._getBindingProvider(e);"none"!==n.BaseCustomElementBridge.getTrackChildrenOption(e)&&(i=i.then(function(){return t._whenChildrenCreated(e)})),this._whenCreatedPromise=i.then(function(){try{t.CreateComponent(e)}catch(i){t.throwError(e,"Error while rendering component. "+i)}})}},_connectedCallback:function(){n.BaseCustomElementBridge.getInstance(this)._connected(this)},_detachedCallback:function(){var e=n.BaseCustomElementBridge.getInstance(this);e._bConnected=!1,e._complete?e.HandleDetached(this):e._resolveBusyState(this)},_createEventListenerWrapper:function(){var e,t=function(t){e&&e(t)};return t.setListener=function(t){e=t},t},_monitorReadyPromise:function(e){var t=this,i=function(){t._bConnected&&t._resolveBusyState(e),t._complete=!0};this.GetDelayedReadyPromise().getPromise().then(function(){e.classList.add("oj-complete"),i()},function(){e.classList.add("oj-incomplete"),i()})},_registerBusyState:function(e){var t=c.getContext(e).getBusyContext();this._initCompleteCallback=t.addBusyState({description:n.BaseCustomElementBridge.getElementInfo(e)+" is being upgraded."})},_resolveBusyState:function(e){var t=this._initCompleteCallback;t||this.throwError(e,"Unexpected call to _resolveBusyState()."),this._initCompleteCallback=null,t()},_setProperties:function(e,t){for(var i=[],n={},o=!1,s=Object.keys(t),r=0;r<s.length;r++){var a=s[r];a.indexOf(".")>=0?i.push(a):(n[a]=t[a],o=!0)}o&&this.BatchedPropertySet(e,n);for(var l=0;l<i.length;l++){var u=i[l];e.setProperty(u,t[u])}},throwError:function(e,t){throw this.GetDelayedReadyPromise().rejectPromise(),new Error(n.BaseCustomElementBridge.getElementInfo(e)+": "+t)},_setBpResolver:function(e){this._bpResolve=e},_getBindingProvider:function(e){var t=this._getBindingProviderName(e);return t===n.BaseCustomElementBridge._NO_BINDING_PROVIDER?(this.PlaybackEarlyPropertySets(e),Promise.resolve(null)):"knockout"===t?this._bpInst?Promise.resolve(this._bpInst):new Promise(this._setBpResolver.bind(this)):void this.throwError(e,"Unknown binding provider '"+t+"'.")},_getBindingProviderName:function(e){var t=e._ojBndgPrv;if(t)return t;if(!(t=e.getAttribute("data-oj-binding-provider")||n.BaseCustomElementBridge._getCompositeBindingProviderName(e))){var i=e.parentElement;null==i?e===document.documentElement?t="knockout":this.throwError(e,"Cannot determine binding provider for a disconnected subtree."):t=this._getBindingProviderName(i)}return Object.defineProperty(e,"_ojBndgPrv",{value:t}),t},_getChildrenToTrack:function(e,t,i){for(var o=e.childNodes,s=0;s<o.length;s++){var r=o[s];n.BaseCustomElementBridge.isValidCustomElementName(r.localName)?i.push(r):"nearestCustomElement"===t&&this._getChildrenToTrack(r,t,i)}return i},_whenChildrenCreated:function(t){var i=n.BaseCustomElementBridge.getTrackChildrenOption(t),o=c.getContext(t).getBusyContext(),s=this._getChildrenToTrack(t,i,[]).map(function(t){var i=o.addBusyState({description:"Waiting for element "+t.localName+" to be defined."}),s=setInterval(function(){e.warn("Warning: waiting for element "+t.localName+" to be defined.")},2e4);return customElements.whenDefined(t.localName).then(function(){return i(),clearInterval(s),n.BaseCustomElementBridge.getRegistered(t.tagName)?n.BaseCustomElementBridge.getInstance(t).whenCreated():null}).catch(function(e){throw i(),clearInterval(s),new Error("Error defining element "+t.localName+" : "+e)})});return Promise.all(s)}},n.BaseCustomElementBridge.getAttributes=function(e){var t=[];return n.BaseCustomElementBridge._getAttributesFromProperties("",e,t),t},n.BaseCustomElementBridge.getTrackChildrenOption=function(e){var t=n.BaseCustomElementBridge.getInstance(e);return t&&t.METADATA.extension&&t.METADATA.extension._TRACK_CHILDREN?t.METADATA.extension._TRACK_CHILDREN:"none"},n.BaseCustomElementBridge.isValidCustomElementName=function(e){var t=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]).has(e),i=/^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/.test(e);return!t&&i&&!e.startsWith("oj-bind-",0)},n.BaseCustomElementBridge._getAttributesFromProperties=function(e,t,i){if(t)for(var o=Object.keys(t),s=0;s<o.length;s++){var r=o[s],a=t[r];if(!a.readOnly){var l=e+r;i.push(n.__AttributeUtils.propertyNameToAttribute(l)),a.properties&&n.BaseCustomElementBridge._getAttributesFromProperties(l+".",a.properties,i)}}},n.BaseCustomElementBridge.getElementInfo=function(e){return e?e.tagName.toLowerCase()+" with id '"+e.id+"'":""},n.BaseCustomElementBridge.getInstance=function(t){var i=t[n.BaseCustomElementBridge._INSTANCE_KEY];if(!i){var o=n.BaseCustomElementBridge._registry[t.tagName.toLowerCase()];o||e.error(n.BaseCustomElementBridge.getElementInfo(t)+" Attempt to interact with the custom element before it has been registered."),(i=Object.create(o.bridgeProto)).InitializeBridge(t),Object.defineProperty(t,n.BaseCustomElementBridge._INSTANCE_KEY,{value:i})}return i},n.BaseCustomElementBridge.getProperties=function(e,t){return e.METADATA.properties},n.BaseCustomElementBridge.getRegistered=function(e){if(e){var t=n.BaseCustomElementBridge._registry[e.toLowerCase()];if(t)return{composite:t.composite}}return null},n.BaseCustomElementBridge.getSlotMap=function(e){for(var t={},i=e.childNodes,o=0;o<i.length;o++){var s=i[o];if(n.BaseCustomElementBridge.isSlotAssignable(s)){var r=n.BaseCustomElementBridge.getSlotAssignment(s);t[r]||(t[r]=[]),t[r].push(s)}}return t},n.BaseCustomElementBridge.getSlotAssignment=function(e){var t=null!=e.__oj_slots?e.__oj_slots:e.getAttribute&&e.getAttribute("slot");return t||(t=""),t},n.BaseCustomElementBridge.isPromiseType=function(e,t){var i=n.BaseCustomElementBridge.getInstance(e);if(!i._PROMISE_TYPE_MAP){i._PROMISE_TYPE_MAP={};var o=A(i.METADATA);if(o)for(var s=0;s<o.length;s++)i._PROMISE_TYPE_MAP[o[s]]=!0}return!0===i._PROMISE_TYPE_MAP[t]},n.BaseCustomElementBridge.isSlotAssignable=function(e){return 1===e.nodeType||3===e.nodeType&&e.nodeValue.trim()},n.BaseCustomElementBridge._NO_BINDING_PROVIDER="none",n.BaseCustomElementBridge._enumerateMetadataForKey=function(e,t,i,n){if(t&&t[i]){var o=t[i];Object.keys(o).forEach(function(t){n(e,t,o[t])})}},n.BaseCustomElementBridge._getCompositeBindingProviderName=function(e){return n.Composite?n.Composite.getBindingProviderName(e.parentElement):null},n.BaseCustomElementBridge._verifyMetadata=function(t,i){if(i){var o=i.properties;if(o)for(var s=n.BaseCustomElementBridge._GLOBAL_PROPERTIES,r=0;r<s.length;r++)o[s[r]]&&e.error("Error registering composite %s. Redefined global HTML element attribute '%s' in metadata.",t,s[r])}},n.BaseCustomElementBridge.checkEnumValues=function(e,t,i,o){if("string"==typeof i&&o){var s=o.enumValues;if(s&&-1===s.indexOf(i))n.BaseCustomElementBridge.getInstance(e).throwError(e,"Invalid value '"+i+"' found for property '"+t+"'. Expected one of the following '"+s.toString()+"'.")}},n.BaseCustomElementBridge.checkType=function(e,t,i,o){var s=o.type;if(s){var r=(s=s.toLowerCase()).split("|"),a=typeof i;if(1===r.length)("array"===s.substring(0,5)&&!Array.isArray(i)||"object"===s.substring(0,6)&&"object"!==a||"number"===s&&("number"!=typeof i||!isFinite(i))||"string"===s&&"string"!==a)&&n.BaseCustomElementBridge.__ThrowTypeError(e,t,i,s),"boolean"===s&&(i=!!i);else if(2===r.length){var l,u=r.indexOf("string"),d=r.indexOf("promise");-1!==u&&"string"!==a?("function"===(l=0===u?r[1]:r[0])&&"function"!==a||"array"===l.substring(0,5)&&!Array.isArray(i)||"object"===l.substring(0,6)&&"object"!==a)&&n.BaseCustomElementBridge.__ThrowTypeError(e,t,i,s):-1===d||i instanceof Promise||"array"!==(l=0===d?r[1]:r[0]).substring(0,5)||Array.isArray(i)||n.BaseCustomElementBridge.__ThrowTypeError(e,t,i,s)}}return i},n.BaseCustomElementBridge.__CompareOptionValues=function(e,t,i,o){return t.writeback?n.Object.compareValues(i,o):i===o},n.BaseCustomElementBridge.__ThrowTypeError=function(e,t,i,o){n.BaseCustomElementBridge.getInstance(e).throwError(e,"Invalid type '"+typeof i+"' found for property '"+t+"'. Expected value of type '"+o+"'.")},n.BaseCustomElementBridge.__GetDescriptor=function(e){return n.BaseCustomElementBridge._registry[e.toLowerCase()].descriptor},n.BaseCustomElementBridge.__GetCache=function(e){return e?n.BaseCustomElementBridge._registry[e.toLowerCase()].cache:null},n.BaseCustomElementBridge.__CheckOverlappingAttribute=function(e,t){var i=t.split(".");if(i.length>1)for(i.pop();i.length;){var o=i.join(".");if(e.hasAttribute(o))n.BaseCustomElementBridge.getInstance(e).throwError(e,"Cannot set overlapping attributes '"+t+"' and '"+o+"'.");i.pop()}},n.BaseCustomElementBridge.__GetPropertyMetadata=function(e,t){for(var i=t,n=e.split("."),o=0;o<n.length&&(i=i[n[o]])&&(!(n.length>1&&o<n.length-1)||(i=i.properties));o++);return i},n.BaseCustomElementBridge.__InitProperties=function(e,t){var i=n.BaseCustomElementBridge.getInstance(e);i.__INITIALIZING_PROPS=!0;var o=n.BaseCustomElementBridge.getProperties(i,e);if(o){for(var s=e.attributes,r=0;r<s.length;r++){var a=s[r],l=n.__AttributeUtils.attributeToPropertyName(a.nodeName),u=n.BaseCustomElementBridge.__GetPropertyMetadata(l,o);if(u&&!u.readOnly)if(n.BaseCustomElementBridge.__CheckOverlappingAttribute(e,a.nodeName),!n.__AttributeUtils.getExpressionInfo(a.value).expr){var d=n.BaseCustomElementBridge.__ParseAttrValue(e,a.nodeName,l,a.value,u);i.ValidateAndSetProperty(i.GetAliasForProperty.bind(i),t,l,d,e)}}var h=A(i.METADATA);if(h)for(var c=0;c<h.length;c++){t[h[c]]=I()}}i.__INITIALIZING_PROPS=!1},n.BaseCustomElementBridge.__SetProperty=function(e,t,i,n){var o,s=t,r=i.split("."),a=e(r[0]);r.length>1&&!t[a]&&(s=o={});for(var l=0;l<r.length;l++){var u=e(r[l]);l===r.length-1?s[u]=n:s[u]||(s[u]={}),s=s[u]}o&&(t[a]=o[a])},n.BaseCustomElementBridge.__GetProperty=function(e,t){for(var i=e,n=t.split("."),o=0;o<n.length;o++){var s=n[o];if(o===n.length-1)return i[s];if(!i[s])return;i=i[s]}},n.BaseCustomElementBridge.__ParseAttrValue=function(e,t,i,o,s){if(null==o)return o;var r=s.type,a=n.BaseCustomElementBridge.getInstance(e);function l(i){var o;try{o=n.__AttributeUtils.coerceValue(e,t,i,r)}catch(t){a.throwError(e,t)}return o}var u=n.BaseCustomElementBridge.__GetDescriptor(e.tagName).parseFunction;return u?u(o,i,s,function(e){return l(e)}):l(o)},n.BaseCustomElementBridge.__ProcessEventListeners=function(e){var t=n.CollectionUtils.copyInto({},e,void 0,!0,1);return t.properties=t.properties||{},n.BaseCustomElementBridge._enumerateMetadataForKey(null,t,"properties",function(e,i){var o=n.__AttributeUtils.propertyNameToChangeEventType(i),s=n.__AttributeUtils.eventTypeToEventListenerProperty(o);t.properties[s]={_derived:!0,_eventListener:!0}}),n.BaseCustomElementBridge._enumerateMetadataForKey(null,t,"events",function(e,i){var o=n.__AttributeUtils.eventTypeToEventListenerProperty(i);t.properties[o]={_derived:!0,_eventListener:!0}}),t},n.BaseCustomElementBridge.__Register=function(t,i,o,s){var r=t.toLowerCase();return!n.BaseCustomElementBridge._registry[r]&&(i||e.error("Cannot register "+t+". Missing a descriptor."),n.BaseCustomElementBridge._verifyMetadata(t,i[n.BaseCustomElementBridge.DESC_KEY_META]),n.BaseCustomElementBridge._registry[r]={descriptor:i,bridgeProto:o,composite:s,cache:{}},!0)},n.BaseCustomElementBridge.__FirePropertyChangeEvent=function(e,t,i,o,s,r){var a=n.BaseCustomElementBridge.getInstance(e);if(!a._SKIP_PROP_CHANGE_EVENT){var l={};r&&(l.subproperty=r),l.value=i,l.previousValue=o,l.updatedFrom=s,a.beforePropertyChangedEvent&&a.beforePropertyChangedEvent(e,t,l),("external"!==s||a.__READY_TO_FIRE)&&e.dispatchEvent(new CustomEvent(t+"Changed",{detail:l}))}},n.BaseCustomElementBridge.__DefineDynamicObjectProperty=function(e,t,i,n){Object.defineProperty(e,t,{enumerable:!0,get:i,set:n})};var O=0;n.BaseCustomElementBridge.__GetUnique=function(){var e="_ojcustomelem"+O;return O+=1,e},n.BaseCustomElementBridge._consolidateDefaults=function(e){var t=e.value;if(void 0!==t)return Array.isArray(t)?t.slice():"object"==typeof t?n.CollectionUtils.copyInto({},t,void 0,!0):t;var i=e.properties;if(i){for(var o={},s=Object.keys(i),r=0;r<s.length;r++){var a=n.BaseCustomElementBridge._consolidateDefaults(i[s[r]]);void 0!==a&&(o[s[r]]=a)}return Object.keys(o).length>0?o:void 0}},n.BaseCustomElementBridge._registry={},n.BaseCustomElementBridge.DESC_KEY_CSS="css",n.BaseCustomElementBridge.DESC_KEY_META="metadata",n.BaseCustomElementBridge.DESC_KEY_PARSE_FUN="parseFunction",n.BaseCustomElementBridge.DESC_KEY_VIEW="view",n.BaseCustomElementBridge.DESC_KEY_VIEW_MODEL="viewModel",n.BaseCustomElementBridge._GLOBAL_PROPERTIES=["accesskey","autocapitalize","class","contenteditable","contextmenu","dir","draggable","dropzone","hidden","id","is","itemid","itemprop","itemref","itemscope","itemtype","lang","slot","spellcheck","style","tabindex","title","translate"],n.BaseCustomElementBridge._INSTANCE_KEY="_ojBridge",n.BaseCustomElementBridge.__DelayedPromise=function(){var e,t,i;this.getPromise=function(){return e||(e=new Promise(function(e,n){t=e,i=n})),e},this.rejectPromise=function(e){i&&i(e)},this.resolvePromise=function(e){t&&t(e)}},n.Components={};var w=n.Components;n.Components._OJ_CONTAINER_ATTR="data-oj-container";var R="oj-component-names",x="oj-component-initnode",L="oj-subtree-hidden",N="oj-pending-subtree-hidden";function P(e,t){var i=function(){var e=$(this),i=e.data(R);if(null!=i)for(var n=0;n<i.length;n++){var o=e.data("oj-"+i[n]);null!=o&&t(o)}},n=$(e);n.hasClass(x)&&i.call(e),n.find("."+x).each(i)}function j(e,t,i){function n(e){if(t&&e.classList.contains(x)){var n=$(e),o=n.data(R);if(null!=o)for(var s=0;s<o.length;s++){var r=n.data("oj-"+o[s]);null!=r&&t(r)}}i&&"oj-defer"===e.tagName.toLowerCase()&&e._activate()}if(!function(e){for(var t=e;t;){if(t.nodeType===Node.DOCUMENT_NODE)return!1;if(t.classList.contains(L))return!0;t=t.parentNode}return!0}(e)){n(e);var o=["."+x];i&&o.push("oj-defer");var s=[];o.forEach(function(e){s.push("."+L+" "+e),s.push("."+N+" "+e)});for(var r=o.join(","),a=s.join(","),l=function(e,t){for(var i=[],n=0,o=0;o<t.length;o++){for(var s=t[o];n<e.length&&e[n]!==s;)i.push(e[n]),n+=1;n+=1}for(;n<e.length;)i.push(e[n]),n+=1;return i}(e.querySelectorAll(r),e.querySelectorAll(a)),u=0;u<l.length;u++)n(l[u])}}function M(e){this.getCallback=function(){return e}}function H(e,t,i){return Object.keys(t).forEach(function(n){var o=e[n]||[],s=t[n];i?o=o.concat(s):o.push(s),e[n]=o}),e}function k(e){return n.BaseCustomElementBridge.getRegistered(e.tagName)}function U(e){return!!n.Components.__GetWidgetConstructor(e)}function B(e){return k(e)||U(e)}n.Components.setDefaultOptions=function(e){var t=n.Components._defaultProperties||{};Object.keys(e).forEach(function(i){var o=e[i];if(!n.CollectionUtils.isPlainObject(o))throw new Error("Invalid default options");t[i]=H(t[i]||{},o,!1)}),n.Components._defaultProperties=t},n.Components.getDefaultOptions=function(){return n.Components._defaultProperties||{}},n.Components.createDynamicPropertyGetter=function(e){return new M(e)},n.Components.getWidgetConstructor=function(e,t){return e&&!n.BaseCustomElementBridge.getRegistered(e.tagName)?n.Components.__GetWidgetConstructor(e,t):null},n.Components.__GetWidgetConstructor=function(e,t){var i=$(e),n=i.data(R);if(n&&(null==t?t=n[0]:n.indexOf(t)<0&&(t=void 0),null!=t)){var o=i[t];if("function"==typeof o)return o.bind(i)}return null},n.Components.subtreeAttached=function(e){n.DomUtils.fixResizeListeners(e),P(e,function(e){e.__handleSubtreeAttached()})},n.Components.subtreeDetached=function(e){P(e,function(e){e.__handleSubtreeDetached()})},n.Components.subtreeShown=function(e,t){var i=(t||{}).initialRender;i||n.DomUtils.fixResizeListeners(e);var o=$(e)[0];o.classList.remove(L),j(o,function(e){i?e._NotifyInitShown():e._NotifyShown()},!0)},n.Components.subtreeHidden=function(e){var t=$(e)[0];j(t,function(e){e._NotifyHidden()},!1),t.classList.add(L)},n.Components.markPendingSubtreeHidden=function(e){e.classList.add(N)},n.Components.unmarkPendingSubtreeHidden=function(e){e.classList.remove(N)},n.Components.isComponentInitialized=function(e,t){var i=e.data(R);return!!($.isArray(i)&&i.indexOf(t)>-1&&e.is("."+x))},n.Components.__getDefaultOptions=function(e){for(var t={},i=n.Components.getDefaultOptions(),o=e.length-1;o>=0;o--){var s=i[e[o]];void 0!==s&&(t=H(t,s,!0))}return t},n.Components.getComponentElementByNode=function(e){return function e(t,i){if(null==t)return null;var o=1===t.nodeType;var s=n.Composite&&!i?n.Composite.getContainingComposite(t):null;if(s)return s;if(o&&t.hasAttribute("data-oj-internal"))return t.parentNode instanceof Element&&t.parentNode.hasAttribute("data-oj-surrogate-id")?(t=document.querySelector("[data-oj-popup-"+t.id+"-parent]"),e(t,i)):e(t.parentNode,i);if(B(t))return t;if(o&&t.classList.contains("oj-component")){if(U(t=t.querySelector(".oj-component-initnode:not([data-oj-internal])")||t))return t}else if(o&&t.hasAttribute("data-oj-containerid"))return t=document.getElementById(t.getAttribute("data-oj-containerid")),e(t,i);return e(t.parentNode,i)}(e,!!(arguments.length>1&&arguments[1]))},n.Components.getSubIdByNode=function(e,t){return n.Components.callComponentMethod(e,"getSubIdByNode",t)},n.Components.getNodeBySubId=function(e,t){return n.Components.callComponentMethod(e,"getNodeBySubId",t)},n.Components.getComponentOption=function(e,t){if(!B(e))throw new Error("node is not a component element");return k(e)?e.getProperty?e.getProperty.call(e,t):void 0:n.Components.__GetWidgetConstructor(e)("option",t)},n.Components.setComponentOption=function(e,t,i){if(!B(e))throw new Error("node is not a component element");k(e)?e.setProperty&&e.setProperty.call(e,t,i):n.Components.__GetWidgetConstructor(e)("option",t,i)},n.Components.callComponentMethod=function(e,t,i){if(!B(e))throw new Error("node is not a component element");return k(e)?e[t]?e[t].apply(e,[].slice.call(arguments,2)):void 0:n.Components.__GetWidgetConstructor(e).apply($(e),[].slice.call(arguments,1))};var F,V={isDefaultPrevented:function(){return!1},preventDefault:function(){this.isDefaultPrevented=W},stopPropagation:function(){this.isPropagationStopped=W},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=W}};function G(e,t,i,n,o,s,r){var a=i,l=!1,u={};delete n[o],Object.defineProperty(n,o,{get:function(){if(l)return a;if(null!=e._settingNestedKey)return a;var i=s(r?r():o);return z([t,i,a],u)},set:function(t){a=t,null!=e._settingNestedKey?u[e._settingNestedKey]=!0:l=!0},enumerable:!0})}function K(e){if(1===e.length){var t=e[0];return t instanceof M?t.getCallback():null}for(var i=!1,n=0;n<e.length&&!i;n++){var o=e[n];null!=o&&o instanceof M&&(i=!0)}if(i){return function(t){var i=[];return e.forEach(function(e){null!=e&&e instanceof M?i.push(e.getCallback()(t)):i.push(e)}),z(i)}}return null}function z(e,t){for(var i,n=0;n<e.length;n++){var o=e[n];if(void 0!==o)if($.isPlainObject(o))i=Y({},$.isPlainObject(i)?[i,o]:[o],n===e.length-1?null:t,null);else i=o}return i}function Y(e,t,i,n){for(var o=t.length,s=0;s<o;s++)for(var r=t[s],a=Object.keys(r),l=0;l<a.length;l++){var u,d=a[l];if(u=null==i?null:null==n?d:n+"."+d,null==i||!i[u]){var h=r[d];if(void 0!==h)if($.isPlainObject(h)){var c=$.isPlainObject(e[d])?[e[d],h]:[h];e[d]=Y({},c,i,u)}else e[d]=h}}return e}function W(){return!0}$.widget("oj.baseComponent",{options:{contextMenu:null,rootAttributes:null,optionChange:void 0,destroy:void 0},refresh:function(){this._propertyContext=null,this._SetupContextMenu()},_createWidget:function(e,t){e&&(this.OuterWrapper=e._wrapper),this._originalDefaults=this.options||{},this._constructorOptions=e||{},this._super(e,t),this._AfterCreateEvent()},_SetRootAttributes:function(){var e=this.options.rootAttributes;if(e){var t=this.widget();if(null==t)return;var i=e.class;i&&t.addClass(i);var n=e.style;if(n){var o=t.attr("style");o?t.attr("style",o+";"+n):t.attr("style",n)}delete(e=$.extend({},e)).class,delete e.style,t.attr(e),delete e.id;var s=Object.keys(e);if(s.length)throw new Error("Unsupported values passed to rootAttributes option: "+s.toString())}},_create:function(){this._SaveAttributes(this.element),this._InitOptions(this._originalDefaults,this._constructorOptions),delete this._originalDefaults,delete this._constructorOptions,this._ComponentCreate(),this._AfterCreate(),this._SetupResources(),this.element.addClass(x)},_InitOptions:function(e,t){this._setupDefaultOptions(e,t),this._initContextMenuOption(t)},_ComponentCreate:function(){var e,t,i;e=this.element,t=this.widgetName,(i=e.data(R))||(i=[],e.data(R,i)),i.indexOf(t)<0&&i.push(t),this.activeableEventNamespace=this.eventNamespace+"activeable",this.hoverableEventNamespace=this.eventNamespace+"hoverable"},_AfterCreate:function(){this._SetRootAttributes(),this.contextMenuEventNamespace=this.eventNamespace+"contextMenu",this.activeableEventNamespace=this.eventNamespace+"activeable",this.hoverableEventNamespace=this.eventNamespace+"hoverable"},_AfterCreateEvent:$.noop,_setOptionClasses:function(){},_setOptionDisabled:function(){},_classes:function(){return""},_removeClass:function(){return this},_addClass:function(){return this},_toggleClass:function(){return this},_SaveAttributes:function(e){},_SaveAllAttributes:function(e){var t=this;this._savedAttributes=[],$.each(e,function(e,i){var n={},o={element:i,attributes:n},s=i.attributes;t._savedAttributes.push(o),$.each(s,function(e,t){var i=t.name;n[i]={attr:t.value}})})},_GetSavedAttributes:function(e){var t=this._savedAttributes;if(void 0===t)return null;for(var i=e[0],n=0,o=t.length;n<o;n++){var s=t[n];if(s.element===i)return s.attributes}return{}},_RestoreAttributes:function(){},_RestoreAllAttributes:function(){$.each(this._savedAttributes,function(e,t){var i=$(t.element),n=t.attributes;if(1===i.length){var o,s,r=t.element.attributes,a=[];for(o=0,s=r.length;o<s;o++)r[o].name in n||a.push(r[o].name);for(o=0,s=a.length;o<s;o++)i.removeAttr(a[o]);var l=Object.keys(n);for(o=0;o<l.length;o++){var u=l[o];i.attr(u,n[u].attr)}}})},_GetTranslationsSectionName:function(){return this.widgetFullName},_CompareOptionValues:function(e,t,i){return this._IsCustomElement()&&this._getWritebackOption(e)?n.Object.compareValues(t,i):t===i},getTranslatedString:function(e,t){var i={};arguments.length>2?i=Array.prototype.slice.call(arguments,1):2===arguments.length&&("object"==typeof(i=arguments[1])||i instanceof Array||(i=[i]));var n=this.option("translations."+e);return null==n?e:v.applyParameters(n.toString(),i)},getNodeBySubId:function(e){return null!=e&&null!=e.subId||!this.element?null:this.element[0]},getSubIdByNode:function(e){return null},destroy:function(){if(this._IsCustomElement())throw new Error("destroy cannot be called on a custom element");this._trigger("destroy"),n.DomUtils.dispatchEvent(this.element[0],new CustomEvent("_ojDestroy")),this._ReleaseResources(),this._super(),this.element.removeClass(x),this.widget().removeClass("oj-disabled"),this._removeStateClasses(this.element),function(e,t){var i=e.data(R);if(i){var n=i.indexOf(t);n>=0&&(i.splice(n,1),0===i.length&&e.removeData(R))}}(this.element,this.widgetName),this._RestoreAttributes(),this._initialCmDomAttr?this.element.attr("contextmenu",this._initialCmDomAttr):this.element.removeAttr("contextmenu"),this._propertyContext=null},option:function(t,i){if(0===arguments.length)return $.widget.extend({},this.options);var o,s=arguments[0],r=s,a=null,l={};if("string"==typeof s){r={};var u=s.split(".");if(s=u.shift(),u.length){var d;a=u.join(".");try{arguments.length>1&&(this._settingNestedKey=a),d=$.widget.extend({},this.options[s]),r[s]=d}finally{this._settingNestedKey=null}for(o=0;o<u.length-1;o++)d[u[o]]=d[u[o]]||{},d=d[u[o]];if(s=u.pop(),1===arguments.length)return void 0===d[s]?null:d[s];d[s]=i}else{if(1===arguments.length)return void 0===this.options[s]?null:this.options[s];r[s]=i}l=arguments[2]||l}else l=arguments[1]||l;if(null!=a){var h={path:t,value:i};l=$.widget.extend({},l,{subkey:a,subproperty:h})}var c=l?l._context:null,p=!!c&&c.internalSet,_={},m=Object.keys(r);for(o=0;o<m.length;o++){var g=m[o],f=r[g],v=this.options[g];l&&l.changed||!this._CompareOptionValues(g,v,f)?_[g]=f:this._IsCustomElement()&&e.info(n.BaseCustomElementBridge.getElementInfo(this.element[0])+": Ignoring property set for property '"+g+"' with same value.")}return Object.keys(_).length>0&&(p?this._internalSetOptions(_,l):this._setOptions(_,l)),this},_internalSetOptions:function(e,t){for(var i=Object.keys(e),n=0;n<i.length;n++){var o=i[n],s=e[o],r=this.options[o];this.options[o]=s,this._optionChanged(o,s,r,t)}},_setOptions:function(e,t){for(var i=Object.keys(e),n=0;n<i.length;n++){var o=i[n],s=e[o];this._setOption(o,s,t)}return this},_setOption:function(e,t,i){var n=this.options[e];if("disabled"===e)this.options[e]=t,this.widget().toggleClass("oj-disabled",!!t).attr("aria-disabled",t),t&&this._removeStateClasses(this.widget());else{try{var o=null==i?null:i.subkey;null!=o&&(this._settingNestedKey=o),this._super(e,t)}finally{this._settingNestedKey=null}"contextMenu"===e&&this._SetupContextMenu()}return this._optionChanged(e,t,n,i),this},_optionChanged:function(e,t,i,n){var o,s=null,r=!1,a=!1,l=null,u="external",d=null;if(n&&(s=n._context)){if(s.skipEvent)return;l=s.originalEvent,r=void 0===s.writeback?null!=l:s.writeback,a=s.readOnly,d=s.optionMetadata,o=s.extraData,s.internalSet&&(u="internal")}(d=d||{}).writeback=r?"shouldWrite":"shouldNotWrite",a&&(d.readOnly=!0);var h={option:e,previousValue:i,value:t,optionMetadata:d,updatedFrom:u},c=null==n?null:n.subkey;if(c){var p=c.split("."),_=i;p.forEach(function(e){_&&(_=_[e])});var m=n.subproperty;m.previousValue=_,h.subproperty=m}null!=o&&(h=$.extend({},o,h)),this._trigger("optionChange",l,h)},_SetupResources:function(){this._SetupContextMenu()},_ReleaseResources:function(){this._ReleaseContextMenu()},_trigger:function(e,t,i){return this._trigger2(e,t,i).proceed},_trigger2:function(e,t,i){var n=i||{};if(this._IsCustomElement())return this._triggerCustomEvent(e,t,n);var o=this.options[e],s=$.Event(t,V);return s.type=(this.widgetEventPrefix+e).toLowerCase(),s.target=this.element[0],this.element.trigger(s,n),{proceed:!($.isFunction(o)&&!1===o.apply(this.element[0],[s].concat(n))||s.isDefaultPrevented()),event:s}},_triggerCustomEvent:function(e,t,i){var o,s,r,a={},l=this._getRootElement();if("optionChange"===e){var u=n.CustomElementBridge.getPropertyForAlias(l,i.option);if(!n.CustomElementBridge.isKnownProperty(l,u))return{proceed:!0,event:null};o=n.__AttributeUtils.propertyNameToChangeEventType(u);for(var d=Object.keys(i),h=0;h<d.length;h++){var c=d[h];if("option"!==c)if("optionMetadata"===c)for(var p=Object.keys(i[c]),_=0;_<p.length;_++){var m=p[_];"writeback"!==m&&"component"!==m&&(a[m]=i[c][m])}else a[c]=i[c]}}else{if(o=n.__AttributeUtils.eventTriggerToEventType(e),!n.CustomElementBridge.isKnownEvent(l,o))return{proceed:!0,event:null};s=!0,r=!0,a=this._resolveJQueryObjects(i)}t&&(a.originalEvent=t instanceof $.Event?t.originalEvent:t);var g={detail:a};s&&(g.bubbles=!0),r&&(g.cancelable=!0);var f=new CustomEvent(o,g);return l.dispatchEvent(f),{proceed:!f.defaultPrevented,event:f}},_resolveJQueryObjects:function(e){for(var t=n.CollectionUtils.copyInto({},e),i=Object.keys(t),o=0;o<i.length;o++){var s=i[o],r=t[s];r&&r instanceof $&&(0===r.length?t[s]=null:1===r.length?t[s]=r[0]:t=r.toArray())}return t},_initContextMenuOption:function(e){var t=this.element.attr("contextmenu");this._initialCmDomAttr=t,!t||"contextMenu"in e||this.option("contextMenu",document.getElementById(t),{_context:{internalSet:!0}})},_handleContextMenuGesture:function(e,t,i){if(!this._IsEffectivelyDisabled()){var o;if("OJ-MENU"===e.tagName)o=e;else{var s=n.Components.__GetWidgetConstructor(e,"ojMenu");if(!(o=s&&s("instance")))throw new Error("Invalid JET Menu.")}this._NotifyContextMenuGesture(o,t,i),$(e).is(":visible")&&t.preventDefault()}},_SetupContextMenu:function(){var e=this._GetContextMenu();if(e||(e=this._GetDefaultContextMenu()),e&&void 0===this._contextMenuGestureInit){this._contextMenuGestureInit=e;var t=this;n.GestureUtils.startDetectContextMenuGesture(this.widget()[0],function(i,n){t._handleContextMenuGesture(e,i,n)})}},_ReleaseContextMenu:function(){this._contextMenuGestureInit=void 0,n.GestureUtils.stopDetectContextMenuGesture(this.widget()[0])},_GetContextMenu:function(){if(this._IsCustomElement()){var e=n.BaseCustomElementBridge.getSlotMap(this._getRootElement()).contextMenu;if(e&&e.length>0)return e[0]}else if(this.options.contextMenu)return $(this.options.contextMenu).first()[0];return null},_NotifyContextMenuGesture:function(e,t,i){this._OpenContextMenu(t,i)},_OpenContextMenu:function(e,t,i,o,s){var r=this._GetContextMenu();if(r||(r=this._contextMenuGestureInit&&$(this._contextMenuGestureInit).is(":visible")?this._contextMenuGestureInit:this._GetDefaultContextMenu()),r){var a={mouse:{my:"start top",at:"start bottom",of:e,collision:"flipfit"},touch:{my:"start>40 center",at:"start bottom",of:e,collision:"flipfit"},keyboard:{my:"start top",at:"start bottom",of:"launcher",collision:"flipfit"}},l={launcher:this.element,position:a[t]},u={initialFocus:"menu"},d=s?$.extend(l,i,u):$.extend(!0,l,i,u);if(r.__openingContextMenu=!0,"OJ-MENU"===r.tagName)r.open(e,d,o);else{var h=n.Components.__GetWidgetConstructor(r,"ojMenu");(h&&h("instance")).open(e,d,o);var c=function(e){e.preventDefault()};r.addEventListener("contextmenu",c),window.setTimeout(function(){r.removeEventListener("contextmenu",c)},50)}r.__openingContextMenu=!1}},_GetDefaultContextMenu:function(){return null},_removeStateClasses:function(e){e.removeClass("oj-hover oj-focus oj-focus-highlight oj-active"),e.find(".oj-hover").removeClass("oj-hover"),e.find(".oj-focus").removeClass("oj-focus"),e.find(".oj-focus-highlight").removeClass("oj-focus-highlight"),e.find(".oj-active").removeClass("oj-active")},_isRealMouseEvent:function(){return!n.DomUtils.recentTouchEnd()},_AddHoverable:function(e){var t;$.isPlainObject(e)?t=e.element:(t=e,e={});var i=e.afterToggle||$.noop;t.on("mouseenter"+this.hoverableEventNamespace,this._hoverStartHandler.bind(this,i)).on("mouseleave"+this.hoverableEventNamespace,this._hoverAndActiveEndHandler.bind(this,"oj-hover",i))},_RemoveHoverable:function(e){e&&e.off(this.hoverableEventNamespace)},_AddActiveable:function(e){var t;$.isPlainObject(e)?t=e.element:(t=e,e={});var i=e.afterToggle||$.noop;n.DomUtils.isTouchSupported()&&t.on("touchstart"+this.activeableEventNamespace,this._activeStartHandler.bind(this,i)).on("touchend"+this.activeableEventNamespace+" touchcancel"+this.activeableEventNamespace,this._hoverAndActiveEndHandler.bind(this,"oj-active",i)),t.on("mousedown"+this.activeableEventNamespace,this._activeStartHandler.bind(this,i)).on("mouseup"+this.activeableEventNamespace,this._hoverAndActiveEndHandler.bind(this,"oj-active",i)).on("mouseenter"+this.activeableEventNamespace,this._activeStartHandler.bind(this,i)).on("mouseleave"+this.activeableEventNamespace,this._hoverAndActiveEndHandler.bind(this,"oj-active",i))},_RemoveActiveable:function(e){e&&(e.off(this.activeableEventNamespace),F=null)},_activeStartHandler:function(e,t){var i=$(t.currentTarget);("mouseenter"!==t.type||this._isTargetInActiveElement(t.currentTarget))&&(i.hasClass("oj-disabled")||"touchstart"!==t.type&&!this._isRealMouseEvent(t)||(i.addClass("oj-active"),e(t.type),"mousedown"===t.type&&(F=t.currentTarget,this.document.one("mouseup",function(){F=null}))))},_hoverStartHandler:function(e,t){var i=$(t.currentTarget);!i.hasClass("oj-disabled")&&this._isRealMouseEvent(t)&&(i.addClass("oj-hover"),e(t.type))},_hoverAndActiveEndHandler:function(e,t,i){("oj-active"!==e||"mouseleave"!==i.type||this._isTargetInActiveElement(i.currentTarget))&&($(i.currentTarget).removeClass(e),t(i.type))},_isTargetInActiveElement:function(e){return F===e||null!=F&&$.contains(F,e)},_hoverable:function(){},_focusable:function(e){$.isPlainObject(e)||(e={element:e}),e.component=this,n.DomUtils.makeFocusable(e)},_UnregisterChildNode:function(e){if(e){$(e).off(this.eventNamespace);var t=this.bindings;t&&(this.bindings=$(t.not(e)))}},_GetReadingDirection:function(){return n.DomUtils.getReadingDirection()},_NotifyAttached:function(){this._propertyContext=null},_NotifyDetached:function(){this._propertyContext=null,this._removeStateClasses(this.widget())},_NotifyInitShown:function(){},_NotifyShown:function(){},_NotifyHidden:function(){},_IsEffectivelyDisabled:function(){return!(!this.options.disabled&&!this._ancestorDisabled)},__setAncestorComponentDisabled:function(e){this._ancestorDisabled=e},_getTranslationSectionLoader:function(){var e=[],t=this,i=0;this._traverseWidgetHierarchy(function(n){var o=0===i?t._GetTranslationsSectionName():n.widgetFullName;i+=1;var s=v.getComponentTranslations(o);null==s||$.isEmptyObject(s)||e.push(o)});var n=e.length;return n>0?function(){if(1===n)return v.getComponentTranslations(e[0]);for(var t={},i=n-1;i>=0;i--)$.widget.extend(t,v.getComponentTranslations(e[i]));return t}:null},_getDynamicPropertyContext:function(){if(!this._propertyContext){var e={};this._propertyContext=e;var t=this.element[0];e.containers=function(e){for(var t=e,i=[];t;){var o=t.getAttribute,s=o?o.call(t,n.Components._OJ_CONTAINER_ATTR):null;null!=s&&i.push(s),t=t.parentNode}return i}(t),e.element=t,e.isCustomElement=this._IsCustomElement()}return this._propertyContext},_setupDefaultOptions:function(e,t){var i=this.options,n=this._getTranslationSectionLoader(),o=t.translations;null==n||void 0!==o&&!$.isPlainObject(o)||G(this,void 0,t.translations,i,"translations",n),this._loadGlobalDefaultOptions(e,t)},_loadGlobalDefaultOptions:function(e,t){var i=this.options,o=[];this._traverseWidgetHierarchy(function(e){o.push(e.widgetName)}),o.push("default");var s=n.Components.__getDefaultOptions(o);if(!$.isEmptyObject(s))for(var r=this,a=function(){return r._getDynamicPropertyContext()},l=Object.keys(s),u=0;u<l.length;u++){var d=l[u],h=t[d];if(void 0===h||$.isPlainObject(h)){var c=s[d];if(c){var p=K(c);if(p)G(this,e[d],h,i,d,p,a);else{var _=[e[d]].concat(c);_.push(h),i[d]=z(_)}}}}},_traverseWidgetHierarchy:function(e){for(var t=this.constructor.prototype;null!=t&&"oj"===t.namespace;)e(t),t=Object.getPrototypeOf(t)},_getRootElement:function(){return this.OuterWrapper||this.element[0]},_IsCustomElement:function(){return null!=n.BaseCustomElementBridge.getRegistered(this._getRootElement().tagName)},_FixRendererContext:function(e){if(this._IsCustomElement()){var t=n.CollectionUtils.copyInto({},e);return delete t.component,t.componentElement=this._getRootElement(),t}return e},_WrapCustomElementRenderer:function(e){return this._IsCustomElement()&&"function"==typeof e?function(t){var i=e(t);return i&&i.insert?i.insert:null}:e},__saveWritebackOptions:function(e){this._writebackOptions=e},_getWritebackOption:function(e){return!(!this._writebackOptions||!this._writebackOptions[e])},__handleSubtreeAttached:function(){this._IsCustomElement()||this._NotifyAttached()},__handleSubtreeDetached:function(){this._IsCustomElement()||this._NotifyDetached()},_VerifyConnectedForSetup:function(){return!1},__handleConnected:function(){this._NotifyAttached(),this.__delayConnectDisconnect(0)||this._SetupResources()},__handleDisconnected:function(){this.__delayConnectDisconnect(1)||this._ReleaseResources(),this._NotifyDetached()},__delayConnectDisconnect:function(e){if(!this._VerifyConnectedForSetup())return!1;if(void 0===this.connectedState){var t=this;Promise.resolve().then(function(){t.connectedState===e&&(0===e?t._SetupResources():t._ReleaseResources()),t.connectedState=void 0})}return this.connectedState=e,!0},__getFocusElement:function(){return this.GetFocusElement()},GetFocusElement:function(){return this.element[0]}}),delete $.fn.baseComponent,n.__registerWidget=function(e,t,i,n){if($.widget(e,t,i),n){var o=e.split(".")[1];delete $.fn[o]}if("oj.oj"===e.substring(0,5)||"oj._oj"===e.substring(0,6)){var s,r=e.split("."),a=r[0],l=r[1],u=a+"-"+l;s="_"===l.substring(0,1)?"_"+a+"-"+l.substring(3):a+"-"+l.substring(2),$.expr.pseudos[s.toLowerCase()]=function(e){return!!$.data(e,u)}}},n.ComponentMessaging=function(e){this.Init(e)},n.Object.createSubclass(n.ComponentMessaging,n.Object,"oj.ComponentMessaging"),n.ComponentMessaging._DISPLAY_TYPE={NONE:"none",NOTEWINDOW:"notewindow",PLACEHOLDER:"placeholder",INLINE:"inline"},n.ComponentMessaging._DISPLAY_TYPE_TO_CALLBACK={},n.ComponentMessaging.registerMessagingStrategy=function(e,t){e&&"function"==typeof t&&(n.ComponentMessaging._DISPLAY_TYPE_TO_CALLBACK[e]=t)},n.ComponentMessaging.prototype.Init=function(e){n.ComponentMessaging.superclass.Init.call(this),this._component=e,this._activated=!1,this._initializeMessagingStrategies()},n.ComponentMessaging.prototype.activate=function(e,t,i){var o=this;n.Assert.assertObject(i),this._launcher=e,this._contentElement=t,this._messagingContent=n.CollectionUtils.copyInto(this._messagingContent||{},i),this._isActive()?this._reactivate():($.each(this._strategies,function(e,t){t.activate(o)}),this._activated=!0)},n.ComponentMessaging.prototype.update=function(e){n.Assert.assertObject(e),n.Assert.assertBoolean(this._activated),this._messagingContent=n.CollectionUtils.copyInto(this._messagingContent||{},e),this._activated&&$.each(this._strategies,function(t,i){i.shouldUpdate(e)&&i.update()})},n.ComponentMessaging.prototype.deactivate=function(){$.each(this._strategies,function(e,t){t.deactivate()}),this._activated=!1,this._component=null,this._launcher=null,this._contentElement=null,this._strategies={}},n.ComponentMessaging.prototype.close=function(){$.each(this._strategies,function(e,t){t.close()})},n.ComponentMessaging.prototype._createMessagingStrategy=function(e,t){return new(n.ComponentMessaging._DISPLAY_TYPE_TO_CALLBACK[e]||n.ComponentMessaging._DISPLAY_TYPE_TO_CALLBACK[n.ComponentMessaging._DISPLAY_TYPE.NONE])(t)},n.ComponentMessaging.prototype._getComponent=function(){return this._component||null},n.ComponentMessaging.prototype._getLauncher=function(){return this._launcher||null},n.ComponentMessaging.prototype._getContentElement=function(){return this._contentElement||null},n.ComponentMessaging.prototype._getMessagingContent=function(){return this._messagingContent||{}},n.ComponentMessaging.prototype._isActive=function(){return this._activated},n.ComponentMessaging.prototype._getResolvedMessagingDisplayOptions=function(){for(var e={},t=!1,i=this._component.options.placeholder,o=this._component.options.displayOptions||{},s={},r=Object.keys(o),a=0;a<r.length;a++){var l=r[a],u=o[l];t=!1;var d=l+"";if(Array.isArray(u))for(var h=0;h<u.length;h++){var c=u[h];t||(t=this._resolveDisplayTypeForArtifact(d,c,i,s))}else"string"==typeof u&&(t||(t=this._resolveDisplayTypeForArtifact(d,u,i,s)));t||(s[d]=n.ComponentMessaging._DISPLAY_TYPE.NONE)}return $.each(n.ComponentMessaging._DISPLAY_TYPE,function(t,i){e[i]=[]}),$.each(s,function(t,i){e[i].push(t)}),e},n.ComponentMessaging.prototype._resolveDisplayTypeForArtifact=function(e,t,i,o){var s=!1;switch(t){case n.ComponentMessaging._DISPLAY_TYPE.PLACEHOLDER:"converterHint"===e&&(s||i||(o[e]=t,s=!0));break;case n.ComponentMessaging._DISPLAY_TYPE.INLINE:"messages"===e&&(s||(o[e]=t,s=!0));break;default:s||(o[e]=t,s=!0)}return s},n.ComponentMessaging.prototype._initializeMessagingStrategies=function(){var e=this._getResolvedMessagingDisplayOptions(),t=e[n.ComponentMessaging._DISPLAY_TYPE.NOTEWINDOW],i=e[n.ComponentMessaging._DISPLAY_TYPE.NONE],o=e[n.ComponentMessaging._DISPLAY_TYPE.PLACEHOLDER],s=e[n.ComponentMessaging._DISPLAY_TYPE.INLINE],r={};t.length>0&&(r[n.ComponentMessaging._DISPLAY_TYPE.NOTEWINDOW]=this._createMessagingStrategy(n.ComponentMessaging._DISPLAY_TYPE.NOTEWINDOW,t)),o.length>0&&(r[n.ComponentMessaging._DISPLAY_TYPE.PLACEHOLDER]=this._createMessagingStrategy(n.ComponentMessaging._DISPLAY_TYPE.PLACEHOLDER,o)),s.length>0&&(r[n.ComponentMessaging._DISPLAY_TYPE.INLINE]=this._createMessagingStrategy(n.ComponentMessaging._DISPLAY_TYPE.INLINE,s)),r[n.ComponentMessaging._DISPLAY_TYPE.NONE]=this._createMessagingStrategy(n.ComponentMessaging._DISPLAY_TYPE.NONE,i),this._strategies=r},n.ComponentMessaging.prototype._reactivate=function(){var e,t=this._getResolvedMessagingDisplayOptions(),i=this;$.each(t,function(t,o){t+="",e=i._strategies[t],o&&o.length>0?e?e&&e.reactivate(o):(e=i._createMessagingStrategy(t,o),i._strategies[t]=e,e.activate(i)):e&&n.ComponentMessaging._DISPLAY_TYPE.NONE!==t&&(e.deactivate(),delete i._strategies[t])})},n.MessagingStrategy=function(e){this.Init(e)},n.Object.createSubclass(n.MessagingStrategy,n.Object,"oj.MessagingStrategy"),n.MessagingStrategy.prototype.Init=function(e){n.Assert.assertArray(e),n.MessagingStrategy.superclass.Init.call(this),this._displayOptions=e},n.MessagingStrategy.prototype.activate=function(e){this._componentMessaging=e},n.MessagingStrategy.prototype.deactivate=function(){},n.MessagingStrategy.prototype.close=function(){},n.MessagingStrategy.prototype.reactivate=function(e){this.Init(e)},n.MessagingStrategy.prototype.shouldUpdate=function(e){return!0},n.MessagingStrategy.prototype.update=function(){},n.MessagingStrategy.prototype.GetLauncher=function(){return this._componentMessaging._getLauncher()},n.MessagingStrategy.prototype.GetContentElement=function(){return this._componentMessaging._getContentElement()},n.MessagingStrategy.prototype.GetComponent=function(){return this._componentMessaging._getComponent()},n.MessagingStrategy.prototype.GetMessages=function(){return this.GetValidityState().getMessages()},n.MessagingStrategy.prototype.GetMaxSeverity=function(){return this.GetValidityState().getMaxSeverity()},n.MessagingStrategy.prototype.GetConverterHint=function(){var e=[],t=this._getMessagingContent(),i=t&&t.converterHint;return i&&e.push(i),e},n.MessagingStrategy.prototype.GetValidatorHints=function(){var e=[],t=this._getMessagingContent(),i=t&&t.validatorHint||[];return $.each(i,function(t,i){e.push(i)}),e},n.MessagingStrategy.prototype.GetTitle=function(){var e=this._getMessagingContent();return e&&e.title||""},n.MessagingStrategy.prototype.GetValidityState=function(){var e=this._getMessagingContent();return e&&e.validityState||null},n.MessagingStrategy.prototype.HasMessages=function(){var e=this.GetMessages();return!!(e&&e.length>0)},n.MessagingStrategy.prototype.ShowMessages=function(){return-1!==this._displayOptions.indexOf("messages")},n.MessagingStrategy.prototype.ShowConverterHint=function(){return-1!==this._displayOptions.indexOf("converterHint")},n.MessagingStrategy.prototype.ShowValidatorHint=function(){return-1!==this._displayOptions.indexOf("validatorHint")},n.MessagingStrategy.prototype.ShowTitle=function(){return-1!==this._displayOptions.indexOf("title")||-1!==this._displayOptions.indexOf("helpInstruction")},n.MessagingStrategy.prototype.IsInvalid=function(){return this.GetValidityState().isInvalid()},n.MessagingStrategy.prototype._getMessagingContent=function(){return this._componentMessaging?this._componentMessaging._getMessagingContent():{}},n.DefaultMessagingStrategy=function(e){this.Init(e)},n.ComponentMessaging.registerMessagingStrategy(n.ComponentMessaging._DISPLAY_TYPE.NONE,n.DefaultMessagingStrategy),n.DefaultMessagingStrategy._SELECTOR_STATE_INVALID="oj-invalid",n.DefaultMessagingStrategy._SELECTOR_STATE_WARNING="oj-warning",n.Object.createSubclass(n.DefaultMessagingStrategy,n.MessagingStrategy,"oj.DefaultMessagingStrategy"),n.DefaultMessagingStrategy.prototype.update=function(){n.DefaultMessagingStrategy.superclass.update.call(this);var e=this.GetLauncher(),t=this.GetMaxSeverity(),i=[],o=[],s=!1,r=this.GetComponent().widget();e&&(this.IsInvalid()?(i.push(n.DefaultMessagingStrategy._SELECTOR_STATE_WARNING),o.push(n.DefaultMessagingStrategy._SELECTOR_STATE_INVALID),s=!0):this.HasMessages()&&t===D.SEVERITY_LEVEL.WARNING?(i.push(n.DefaultMessagingStrategy._SELECTOR_STATE_INVALID),o.push(n.DefaultMessagingStrategy._SELECTOR_STATE_WARNING)):(i.push(n.DefaultMessagingStrategy._SELECTOR_STATE_INVALID),i.push(n.DefaultMessagingStrategy._SELECTOR_STATE_WARNING)),r.removeClass(i.join(" ")).addClass(o.join(" ")),this.GetContentElement().attr({"aria-invalid":s}))},n.DefaultMessagingStrategy.prototype.deactivate=function(){this.GetComponent().widget().removeClass(n.DefaultMessagingStrategy._SELECTOR_STATE_INVALID).removeClass(n.DefaultMessagingStrategy._SELECTOR_STATE_WARNING),this.GetContentElement().removeAttr("aria-invalid"),n.DefaultMessagingStrategy.superclass.deactivate.call(this)},n.PlaceholderMessagingStrategy=function(e){this.Init(e)},n.ComponentMessaging.registerMessagingStrategy(n.ComponentMessaging._DISPLAY_TYPE.PLACEHOLDER,n.PlaceholderMessagingStrategy),n.Object.createSubclass(n.PlaceholderMessagingStrategy,n.MessagingStrategy,"oj.PlaceholderMessagingStrategy"),n.PlaceholderMessagingStrategy.prototype.Init=function(e){n.PlaceholderMessagingStrategy.superclass.Init.call(this,e)},n.PlaceholderMessagingStrategy.prototype.activate=function(e){n.PlaceholderMessagingStrategy.superclass.activate.call(this,e),this._refreshPlaceholder()},n.PlaceholderMessagingStrategy.prototype.reactivate=function(e){n.PlaceholderMessagingStrategy.superclass.reactivate.call(this,e),this._refreshPlaceholder()},n.PlaceholderMessagingStrategy.prototype.shouldUpdate=function(e){return!(!e||void 0===e.converterHint)},n.PlaceholderMessagingStrategy.prototype.update=function(){n.PlaceholderMessagingStrategy.superclass.update.call(this),this._refreshPlaceholder()},n.PlaceholderMessagingStrategy.prototype._refreshPlaceholder=function(){var e=this.GetLauncher();if(this.ShowPlaceholderContent()&&e){var t=this.GetConverterHint(),i=t.length?t[0]:"",n={internalMessagingSet:!0};this.GetComponent().option({placeholder:i},{_context:n})}},n.PlaceholderMessagingStrategy.prototype.ShowPlaceholderContent=function(){return this.ShowConverterHint()},n.ComponentValidity=function(e,t){this.Init(e,t)},n.ComponentValidity.isInvalid=function(e){return D.getMaxSeverity(e)>=D.SEVERITY_LEVEL.ERROR},n.Object.createSubclass(n.ComponentValidity,n.Object,"oj.ComponentValidity"),n.ComponentValidity.prototype.Init=function(e,t){n.ComponentValidity.superclass.Init.call(this),this._initialize(e,t)},n.ComponentValidity.prototype.isInvalid=function(){return this._invalid},n.ComponentValidity.prototype.getMessages=function(){return this._messages},n.ComponentValidity.prototype.getMaxSeverity=function(){return this._maxSeverity},n.ComponentValidity.prototype.update=function(e,t){this._initialize(e,t)},n.ComponentValidity.prototype._initialize=function(e,t){this._compValid=e,this._compMessages=t,this._messages=this._getImmediateMessages(),this._maxSeverity=D.getMaxSeverity(this._messages),this._invalid=n.ComponentValidity.isInvalid(this._messages)},n.ComponentValidity.prototype._getImmediateMessages=function(){for(var e=this._compMessages||[],t=[],i=0;i<e.length;i++){var o=e[i];o instanceof n.ComponentMessage&&!o.canDisplay()||t.push(o)}return t},n.CustomElementBridge={},n.CustomElementBridge.proto=Object.create(n.BaseCustomElementBridge.proto),n.CollectionUtils.copyInto(n.CustomElementBridge.proto,{AddComponentMethods:function(e){e.setProperty=function(e,t){var i=n.BaseCustomElementBridge.getInstance(this);i.SaveEarlyPropertySet(e,t)||(i._setEventProperty(this,e,t)||i._validateAndSetCopyProperty(this,e,t,null)||(n.BaseCustomElementBridge.__GetPropertyMetadata(e,n.BaseCustomElementBridge.getProperties(i,this))?n.CustomElementBridge._getPropertyAccessor(this,e)(t):this[e]=t))},e.getProperty=function(e){var t=n.BaseCustomElementBridge.getInstance(this),i=n.BaseCustomElementBridge.__GetPropertyMetadata(e,n.BaseCustomElementBridge.getProperties(t,this));if(n.__AttributeUtils.eventListenerPropertyToEventType(e)||!i)return this[e];var o=i?i.extension:null;return o&&o._COPY_TO_INNER_ELEM?t._getCopyProperty(this,e,i):n.CustomElementBridge._getPropertyAccessor(this,e)()},e.focus=function(){var e=n.BaseCustomElementBridge.getInstance(this);if(e._WIDGET_INSTANCE){var t=e._WIDGET_INSTANCE.__getFocusElement();t&&(t!==this?t.focus():HTMLElement.prototype.focus.call(this))}else HTMLElement.prototype.focus.call(this)},e.blur=function(){var e=n.BaseCustomElementBridge.getInstance(this);if(e._WIDGET_INSTANCE){var t=e._WIDGET_INSTANCE.__getFocusElement();t&&(t!==this?t.blur():HTMLElement.prototype.blur.call(this))}else HTMLElement.prototype.focus.call(this)}},BatchedPropertySet:function(e,t){var i,o=Object.keys(t),s={};for(i=0;i<o.length;i++){var r=o[i],a=t[r];this._setEventProperty(e,r,a)||this._validateAndSetCopyProperty(e,r,a,null)||(a=this.ValidatePropertySet(e,r,a),s[r=this.GetAliasForProperty(r)]=a)}var l=n.Components.__GetWidgetConstructor(this._WIDGET_ELEM);if(l)l("option",s);else for(i=0;i<o.length;i++){var u=o[i];e.setProperty(u,t[u])}},CreateComponent:function(e){var t=this._INNER_DOM_FUNCTION;if(this._WIDGET_ELEM=n.CustomElementBridge._getWidgetElement(e,t?t(e):this._EXTENSION._INNER_ELEM),this._WIDGET_ELEM!==e){for(var i=this._EXTENSION._GLOBAL_TRANSFER_ATTRS||[],o=0;o<i.length;o++){var s=i[o];e.hasAttribute(s)&&(this._WIDGET_ELEM.setAttribute(s,e.getAttribute(s)),this._removingTransfer=!0,e.removeAttribute(s))}this._copyProperties()}n.Components.unmarkPendingSubtreeHidden(e);var r=$(this._WIDGET_ELEM),a=$(this._WIDGET_ELEM)[this._EXTENSION._WIDGET_NAME].bind(r);a(this._PROPS),this._WIDGET=a,this._WIDGET_INSTANCE=a("instance"),this._WRITEBACK_PROPS&&this._WIDGET_INSTANCE.__saveWritebackOptions(this._WRITEBACK_PROPS),e.hasAttribute("disabled")&&!this._disabledProcessed&&n.CustomElementBridge._removeDisabledAttribute(e);var l=function(t){return function(){var i=document.createEvent("UIEvent");i.initEvent(t,!1,!1),e.dispatchEvent(i)}},u=this._WIDGET_INSTANCE.__getFocusElement();u&&u!==e&&(u.addEventListener("focus",l("focus")),u.addEventListener("blur",l("blur"))),this.__READY_TO_FIRE=!0,this.resolveDelayedReadyPromise()},DefineMethodCallback:function(e,t,i){e[t]=function(){var e=n.BaseCustomElementBridge.getInstance(this),o=i.internalName||t;return e._WIDGET.apply(null,[o].concat([].slice.call(arguments)))}},DefinePropertyCallback:function(e,t,i){var o,s=i.extension;Object.defineProperty(e,t,{enumerable:!0,get:function(){return i._eventListener?o:s&&s._COPY_TO_INNER_ELEM?n.BaseCustomElementBridge.getInstance(this)._getCopyProperty(this,t,i):n.CustomElementBridge._getPropertyAccessor(this,t)()},set:function(e){var s=n.BaseCustomElementBridge.getInstance(this);if(!s.SaveEarlyPropertySet(t,e))if(i._eventListener)s.SetEventListenerProperty(this,t,e),o=e;else if(!s._validateAndSetCopyProperty(this,t,e,i)){var r={};if(void 0===e&&(r={_context:{skipEvent:!0}},e=s.GetDefaultValue(i),s.__READY_TO_FIRE)){var a=this[t];n.BaseCustomElementBridge.__FirePropertyChangeEvent(this,t,void 0,a,"external")}n.CustomElementBridge._getPropertyAccessor(this,t,r)(e)}}})},GetAttributes:function(e){var t=n.BaseCustomElementBridge.getAttributes(e.properties);return e.extension._GLOBAL_TRANSFER_ATTRS?t.concat(e.extension._GLOBAL_TRANSFER_ATTRS):t},GetAliasForProperty:function(e){var t=this._EXTENSION._ALIASED_PROPS;return t&&t[e]?t[e]:e},InitializeElement:function(e){n.BaseCustomElementBridge.proto.InitializeElement.call(this,e),this._EXTENSION._CONTROLS_SUBTREE_HIDDEN&&n.Components.markPendingSubtreeHidden(e),n.BaseCustomElementBridge.__InitProperties(e,this._PROPS)},HandleAttributeChanged:function(e,t,i,n){var o=this._EXTENSION._GLOBAL_TRANSFER_ATTRS,s=o&&-1!==o.indexOf(t);!this._removingTransfer&&s&&this._WIDGET_ELEM?(this._WIDGET_ELEM.setAttribute(t,n),this._removingTransfer=!0,e.removeAttribute(t)):this._removingTransfer&&s&&(this._removingTransfer=!1)},HandleDetached:function(e){n.BaseCustomElementBridge.proto.HandleDetached.call(this,e),n.Components.__GetWidgetConstructor(this._WIDGET_ELEM)&&this._WIDGET_INSTANCE&&this._WIDGET_INSTANCE.__handleDisconnected()},HandleReattached:function(e){n.BaseCustomElementBridge.proto.HandleReattached.call(this,e),this._WIDGET_INSTANCE&&this._WIDGET_INSTANCE.__handleConnected()},InitializeBridge:function(e){n.BaseCustomElementBridge.proto.InitializeBridge.call(this,e);var t=n.BaseCustomElementBridge.__GetDescriptor(e.tagName);this._INNER_DOM_FUNCTION=t.innerDomFunction,this._EXTENSION=this.METADATA.extension||{},this._PROPS=this._EXTENSION._INNER_ELEM||this._INNER_DOM_FUNCTION?{_wrapper:e}:{},this._setupPropertyAccumulator(e,this._PROPS),this._processProperties(e)},_attributeChangedCallback:function(t,i,o){var s=n.BaseCustomElementBridge.getInstance(this);"disabled"===t&&s._disabledProcessed?null!=o&&(e.warn("Ignoring 'disabled' attribute change after component initialization. Use element property setter instead."),n.CustomElementBridge._removeDisabledAttribute(this)):n.BaseCustomElementBridge.proto._attributeChangedCallback.call(this,t,i,o)},_copyProperties:function(){if(this._COPY_ATTRS)for(var e=0;e<this._COPY_ATTRS.length;e++){var t=this._COPY_ATTRS[e],i=n.__AttributeUtils.attributeToPropertyName(t);if(Object.prototype.hasOwnProperty.call(this._PROPS,i)){var o=this._PROPS[i];this._setCopyProperty(t,o),delete this._PROPS[i]}}},_getCopyProperty:function(e,t,i){var o=n.__AttributeUtils.propertyNameToAttribute(t);if(i.extension._ATTRIBUTE_ONLY){if(this._WIDGET_ELEM.hasAttribute(o)){var s,r=this._WIDGET_ELEM.getAttribute(o);try{s=n.__AttributeUtils.coerceValue(e,o,r,i.type)}catch(t){this.throwError(e,t)}return s}return null}return this._WIDGET_ELEM[t]},_processProperties:function(e){var t=n.BaseCustomElementBridge.getProperties(this,e);if(t)for(var i=Object.keys(t),o=0;o<i.length;o++){var s=i[o],r=t[s];r.writeback&&(this._WRITEBACK_PROPS||(this._WRITEBACK_PROPS={}),this._WRITEBACK_PROPS[s]=!0);var a=r.extension;a&&a._COPY_TO_INNER_ELEM&&(this._COPY_ATTRS||(this._COPY_ATTRS=[]),this._COPY_ATTRS.push(s))}},_setCopyProperty:function(e,t){null==t||!1===t?this._WIDGET_ELEM.removeAttribute(e):!0===t?this._WIDGET_ELEM.setAttribute(e,""):this._WIDGET_ELEM.setAttribute(e,t)},_setupPropertyAccumulator:function(e,t){this._WIDGET=function(i,o,s){if("option"===i)return n.BaseCustomElementBridge.__SetProperty(this.GetAliasForProperty.bind(this),t,o,s),t[o];throw this.throwError(e,"Cannot access methods before element is upgraded.")}},_validateAndSetCopyProperty:function(e,t,i,o){var s=n.__AttributeUtils.propertyNameToAttribute(t),r=this._COPY_ATTRS&&-1!==this._COPY_ATTRS.indexOf(s);if(r)if(i=this.ValidatePropertySet(e,t,i),this._WIDGET_ELEM){o||(o=n.BaseCustomElementBridge.__GetPropertyMetadata(t,n.BaseCustomElementBridge.getProperties(this,e)));var a=this._getCopyProperty(e,t,o);this._setCopyProperty(s,i),n.BaseCustomElementBridge.__FirePropertyChangeEvent(e,t,this._getCopyProperty(e,t,o),a,"external")}else this._PROPS[s]=i;return r},_setEventProperty:function(e,t,i){var o=!1;return n.__AttributeUtils.eventListenerPropertyToEventType(t)&&(e[t]=i,o=!0),o}}),n.CustomElementBridge.getMetadata=function(e){return n.CustomElementBridge._METADATA_MAP[e.toLowerCase()]},n.CustomElementBridge.isKnownEvent=function(e,t){var i=n.BaseCustomElementBridge.getInstance(e);return null!=(i.METADATA.events&&i.METADATA.events[t])},n.CustomElementBridge.isKnownProperty=function(e,t){var i=n.BaseCustomElementBridge.getInstance(e);return null!=(i.METADATA.properties&&i.METADATA.properties[t])},n.CustomElementBridge.getPropertyForAlias=function(e,t){var i=n.BaseCustomElementBridge.getInstance(e)._EXTENSION._COMPONENT_TO_ELEMENT_ALIASES;return i&&i[t]?i[t]:t},n.CustomElementBridge.register=function(e,t){var i=t[n.BaseCustomElementBridge.DESC_KEY_META];i=n.BaseCustomElementBridge.__ProcessEventListeners(i),t[n.BaseCustomElementBridge.DESC_KEY_META]=i,n.CustomElementBridge._METADATA_MAP[e.toLowerCase()]=i;var o=i.extension,s=o&&o._WIDGET_NAME?n.CustomElementBridge.proto:n.DefinitionalElementBridge.proto,r=o._ALIASED_PROPS;r&&(o._COMPONENT_TO_ELEMENT_ALIASES={},Object.keys(r).forEach(function(e){o._COMPONENT_TO_ELEMENT_ALIASES[r[e]]=e}));n.BaseCustomElementBridge.__Register(e,t,s)&&customElements.define(e.toLowerCase(),s.getClass(t))},n.CustomElementBridge._getPropertyAccessor=function(e,t,i){return function(o){var s=n.BaseCustomElementBridge.getInstance(e);return 1===arguments.length?(o=s.ValidatePropertySet(e,t,o),t=s.GetAliasForProperty(t),void s._WIDGET("option",t,o,i)):(t=s.GetAliasForProperty(t),s._WIDGET("option",t))}.bind(e)},n.CustomElementBridge._getWidgetElement=function(e,t){var i=e;if(t){var o=e.firstElementChild;if(o&&o.tagName.toLowerCase()===t)i=o;else{i=document.createElement(t);for(var s=[],r=e.childNodes,a=0;a<r.length;a++)s.push(r[a]);for(e.appendChild(i);s.length;){var l=s.shift();n.BaseCustomElementBridge.getSlotAssignment(l)||i.appendChild(l)}}i.setAttribute("data-oj-internal","")}return i},n.CustomElementBridge._removeDisabledAttribute=function(e){n.BaseCustomElementBridge.getInstance(e)._disabledProcessed=!0,e.removeAttribute("disabled")},n.CustomElementBridge._METADATA_MAP={};var q,X,Z,J,Q,ee,te,ie=function(){function e(){}return e.isDataProvider=function(e){return!!e.fetchFirst},e.isTreeDataProvider=function(e){return!!e.getChildDataProvider},e}();n.DataProviderFeatureChecker=ie,n.DefinitionalElementBridge={},n.DefinitionalElementBridge.proto=Object.create(n.BaseCustomElementBridge.proto),n.CollectionUtils.copyInto(n.DefinitionalElementBridge.proto,{beforePropertyChangedEvent:function(e,t,i){var n=t,o=i.value;i.subproperty&&(n=i.subproperty.path,o=i.subproperty.value),this._partialRender(e,n,o)},AddComponentMethods:function(e){e.refresh=function(){n.BaseCustomElementBridge.getInstance(this)._fullRender(this)},e.setProperty=function(e,t){var i=n.BaseCustomElementBridge.getInstance(this);i.SaveEarlyPropertySet(e,t)||i.SetProperty(this,e,t,this,!0)},e.getProperty=function(e){return n.BaseCustomElementBridge.getInstance(this).GetProperty(this,e,this)},e._propsProto.setProperty=function(e,t){this._BRIDGE.SetProperty(this._ELEMENT,e,t,this,!1)},e._propsProto.getProperty=function(e){return this._BRIDGE.GetProperty(this,e,this)}},CreateComponent:function(e){n.Components.unmarkPendingSubtreeHidden(e),!this._INSTANCE&&this._EXTENSION._CONSTRUCTOR&&(this._CONTEXT={element:e,props:this._PROPS_PROXY,unique:n.BaseCustomElementBridge.__GetUnique()},this._CONTEXT.uniqueId=e.id?e.id:this._CONTEXT.unique,this._INSTANCE=new this._EXTENSION._CONSTRUCTOR(this._CONTEXT),this._INSTANCE.createDOM&&this._INSTANCE.createDOM(),this._INSTANCE.updateDOM&&this._INSTANCE.updateDOM()),this.__READY_TO_FIRE=!0,this.resolveDelayedReadyPromise()},DefineMethodCallback:function(e,t,i){e[t]=function(){var e=n.BaseCustomElementBridge.getInstance(this);if(e._INSTANCE){var o=i.internalName||t;return e._INSTANCE[o].apply(e._INSTANCE,arguments)}}},DefinePropertyCallback:function(t,i,o){function s(t,s){if(!this._BRIDGE.SaveEarlyPropertySet(i,t)){var r=this._BRIDGE._PROPS[i];n.BaseCustomElementBridge.__CompareOptionValues(i,o,t,r)?e.info(n.BaseCustomElementBridge.getElementInfo(this._ELEMENT)+": Ignoring property set for property '"+i+"' with same value."):(s&&(t=this._BRIDGE.ValidatePropertySet(this._ELEMENT,i,t)),o._eventListener?(this._BRIDGE.SetEventListenerProperty(this._ELEMENT,i,t),this._BRIDGE._PROPS[i]=t):(this._BRIDGE._PROPS[i]=t,n.BaseCustomElementBridge.__FirePropertyChangeEvent(this._ELEMENT,i,t,r,s?"external":"internal")))}}function r(){var e=this._BRIDGE._PROPS[i];return void 0===e&&(e=this._BRIDGE.GetDefaultValue(o),this._BRIDGE._PROPS[i]=e),e}o._derived||n.BaseCustomElementBridge.__DefineDynamicObjectProperty(t._propsProto,i,function(){return r.bind(this)()},function(e){s.bind(this)(e,!1)}),n.BaseCustomElementBridge.__DefineDynamicObjectProperty(t,i,function(){var e=n.BaseCustomElementBridge.getInstance(this);return r.bind(e._PROPS_PROXY)()},function(e){var t=n.BaseCustomElementBridge.getInstance(this);s.bind(t._PROPS_PROXY)(e,!0)})},InitializeElement:function(e){n.BaseCustomElementBridge.proto.InitializeElement.call(this,e),this._EXTENSION._CONTROLS_SUBTREE_HIDDEN&&n.Components.markPendingSubtreeHidden(e),n.BaseCustomElementBridge.__InitProperties(e,this._PROPS_PROXY)},InitializePrototype:function(e){n.BaseCustomElementBridge.proto.InitializePrototype.call(this,e),Object.defineProperty(e,"_propsProto",{value:{}})},InitializeBridge:function(e){n.BaseCustomElementBridge.proto.InitializeBridge.call(this,e),this._EXTENSION=this.METADATA.extension||{},this._PROPS={},e._propsProto&&(this._PROPS_PROXY=Object.create(e._propsProto),this._PROPS_PROXY._BRIDGE=this,this._PROPS_PROXY._ELEMENT=e)},_fullRender:function(e){this._INSTANCE&&this._INSTANCE.updateDOM&&this._INSTANCE.updateDOM()},_partialRender:function(e,t,i){if(this._INSTANCE){var n=this._INSTANCE.handlePropertyChanged;(!n||!n(t,i))&&this._INSTANCE.updateDOM&&this._INSTANCE.updateDOM()}}}),n.DomUtils={},n.DomUtils._HTML_START_TAG="<html>",n.DomUtils._HTML_END_TAG="</html>",n.DomUtils._LEGAL_ELEMENTS={SPAN:1,B:1,I:1,EM:1,BR:1,HR:1,LI:1,OL:1,UL:1,P:1,TT:1,BIG:1,SMALL:1,PRE:1},n.DomUtils._LEGAL_ATTRIBUTES={class:1,style:1},n.DomUtils.isHTMLContent=function(e){return 0===e.indexOf(n.DomUtils._HTML_START_TAG)&&e.lastIndexOf(n.DomUtils._HTML_END_TAG)===e.length-7},n.DomUtils.cleanHtml=function(e){var t=$(document.createElement("span")).get(0);return t.innerHTML=e,e&&e.indexOf("<")>=0&&n.DomUtils._cleanElementHtml(t),t},n.DomUtils._cleanElementHtml=function(e){for(var t=e.childNodes,i=t.length-1;i>=0;i--){var o=t.item(i);if(o&&1===o.nodeType)if(n.DomUtils._LEGAL_ELEMENTS[o.nodeName]){for(var s=o.attributes,r=s.length-1;r>=0;r--){var a=s[r];void 0!==$(o).attr(a.name)&&(n.DomUtils._LEGAL_ATTRIBUTES[a.name]||o.removeAttribute(a.nodeName))}n.DomUtils._cleanElementHtml(o)}else o&&e.removeChild(o)}},n.DomUtils.isAncestor=function(e,t){for(var i=t.parentNode;i;){if(i===e)return!0;i=i.parentNode}return!1},n.DomUtils.isAncestorOrSelf=function(e,t){return t===e||n.DomUtils.isAncestor(e,t)},n.DomUtils.addResizeListener=function(e,t,i){var o=$(e),s=o.data(n.DomUtils._RESIZE_TRACKER_KEY);null==s&&(s=new n.DomUtils._ResizeTracker(e),o.data(n.DomUtils._RESIZE_TRACKER_KEY,s),s.start()),s.addListener(t,i)},n.DomUtils.removeResizeListener=function(e,t){var i=$(e),o=i.data(n.DomUtils._RESIZE_TRACKER_KEY);null!=o&&(o.removeListener(t),o.isEmpty()&&(o.stop(),i.removeData(n.DomUtils._RESIZE_TRACKER_KEY)))},n.DomUtils.fixResizeListeners=function(e){$(e).find(".oj-helper-detect-expansion").parent().each(function(e,t){var i=$(t).data(n.DomUtils._RESIZE_TRACKER_KEY);null!=i&&i.init(!0)})},n.DomUtils.isMetaKeyPressed=function(e){var t=n.AgentUtils.getAgentInfo();return n.AgentUtils.OS.MAC===t.os?e.metaKey:e.ctrlKey},n.DomUtils.dispatchEvent=function(e,t){var i="disabled",n=e[i];try{e[i]=!1,e.dispatchEvent(t)}finally{e[i]=n}},n.DomUtils._invokeAfterPaint=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,0)}).bind(window),n.DomUtils._cancelInvokeAfterPaint=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||function(e){return window.clearTimeout(e)}).bind(window),n.DomUtils._ResizeTracker=function(e){var t=$.Callbacks(),i=[],o=[],s=2,r=0,a=null,l=null,u=null,d=null,h=null,c=null,p=null;function _(e){var t=!1;if(null!=d.offsetParent){var i=d.offsetWidth,n=d.offsetHeight;l===i&&u===n||(r=s,g(i,n),t=!0,e&&m(!0))}return t}function m(o){var s=e.offsetWidth,r=e.offsetHeight;t.has()&&(o?(null!==a&&n.DomUtils._cancelInvokeAfterPaint(a),a=n.DomUtils._invokeAfterPaint(function(){a=null,t.fire(s,r)})):t.fire(s,r));for(var l=0;l<i.length;l++)i[l].getCallback()(s,r)}function g(e,t){l=e,u=t;var i=d.firstChild.style,n=1;do{i.width=e+n+"px",i.height=t+n+"px",d.scrollLeft=n,d.scrollTop=n,n+=1}while((0===d.scrollTop||0===d.scrollLeft)&&n<=5);h.scrollLeft=e,h.scrollTop=t}this.addListener=function(e,s){void 0===s||0===s?t.add(e):(i.push(new n.DomUtils._collapsingListenerManager(e,s)),o.push(e))},this.removeListener=function(e){var n=o.indexOf(e);n>=0?(o.splice(n,1),i.splice(n,1)[0].stop()):t.remove(e)},this.isEmpty=function(){return!t.has()&&0===o.length},this.start=function(){if(p=function(e){e.stopPropagation(),_(!0)||r>0&&null!=d.offsetParent&&(0===d.scrollLeft||0===d.scrollTop)&&(r-=1,g(l,u))}.bind(this),e.attachEvent)c=function(){m(!1)}.bind(this),e.attachEvent("onresize",c);else{var t=e.childNodes[0];(d=document.createElement("div")).className="oj-helper-detect-expansion";var i=document.createElement("div");d.appendChild(i),null!=t?e.insertBefore(d,t):e.appendChild(d),d.addEventListener("scroll",p,!1),(h=document.createElement("div")).className="oj-helper-detect-contraction";var n=document.createElement("div");n.style.width="200%",n.style.height="200%",h.appendChild(n),e.insertBefore(h,d),h.addEventListener("scroll",p,!1),this.init(!1)}},this.stop=function(){null!=a&&(n.DomUtils._cancelInvokeAfterPaint(a),a=null),null!=d?(d.removeEventListener("scroll",p),h.removeEventListener("scroll",p),d.parentNode&&e.removeChild(d),h.parentNode&&e.removeChild(h)):e.detachEvent("onresize",c)},this.init=function(e){var t=_(e);e&&!t&&null!=d.offsetParent&&g(l,u)}},n.DomUtils._RESIZE_TRACKER_KEY="_ojResizeTracker",n.DomUtils.isValidIdentifier=function(e){return/^[A-Za-z][0-9A-Z_a-z-]*$/.test(e)},n.DomUtils._collapsingListenerManager=function(e,t){var i=null,n=null,o=function(){e.apply(null,i),n=null},s=function(){i=Array.prototype.slice.call(arguments),null==n&&(n=window.setTimeout(o,t))};this.getCallback=function(){return s},this.stop=function(){null!=n&&(window.clearTimeout(n),n=null)}},n.DomUtils.isTouchSupported=function(){return"ontouchstart"in window||navigator.msMaxTouchPoints>0||navigator.maxTouchPoints>0},n.DomUtils.setInKoCleanExternal=function(e){n.DomUtils._koCleanNode=e},n.DomUtils.unwrap=function(e,t){var i=n.DomUtils._koCleanNode;i&&e.get(0)===i||(t?t.replaceWith(e):e.unwrap())},n.DomUtils.isChromeEvent=function(e){function t(e){var t=e.target,i=$(t),o=t.getBoundingClientRect(),s=n.DomUtils.getScrollBarWidth(),r="ltr"===n.DomUtils.getReadingDirection();return!(!r||"HTML"!==t.nodeName&&"visible"===i.css("overflow-x")||!(e.clientX>o.right-s))||(!r&&"HTML"===t.nodeName&&e.clientX>o.left-s||(!r&&"visible"!==i.css("overflow-x")&&e.clientX<o.left+s||("HTML"===t.nodeName||"visible"!==i.css("overflow-y"))&&e.clientY>o.bottom-s))}if(!("clientX"in e&&"clientY"in e))return!1;var i=n.AgentUtils.getAgentInfo();return n.AgentUtils.OS.ANDROID!==i.os&&n.AgentUtils.OS.IOS!==i.os&&(n.AgentUtils.ENGINE.GECKO===i.engine?function(e){try{return!e.originalTarget.localName}catch(e){return!0}}(e):n.AgentUtils.ENGINE.WEBKIT===i.engine||n.AgentUtils.ENGINE.BLINK===i.engine?t(e):n.AgentUtils.BROWSER.IE===i.browser&&t(e))},n.DomUtils.getScrollBarWidth=function(){var e=n.DomUtils._scrollBarWidth;if($.isNumeric(e))return e;var t=$("<div />");$(document.body).append(t),t.width(50).height(50).css({overflow:"scroll",visibility:"hidden",position:"absolute"});var i=$("<div />");i.height(1),t.append(i);var o=i.width(),s=t.width();return t.remove(),e=s-o,n.DomUtils._scrollBarWidth=e,e},n.DomUtils.getReadingDirection=function(){var e=document.documentElement.getAttribute("dir");return e&&(e=e.toLowerCase()),"rtl"===e?"rtl":"ltr"},n.DomUtils.getScrollLeft=function(e){if("rtl"===n.DomUtils.getReadingDirection()){var t=n.AgentUtils.getAgentInfo().browser;return t===n.AgentUtils.BROWSER.FIREFOX||t===n.AgentUtils.BROWSER.IE||t===n.AgentUtils.BROWSER.EDGE?Math.abs(e.scrollLeft):Math.max(0,e.scrollWidth-e.clientWidth-e.scrollLeft)}return e.scrollLeft},n.DomUtils.setScrollLeft=function(e,t){if("rtl"===n.DomUtils.getReadingDirection()){var i=n.AgentUtils.getAgentInfo().browser;i===n.AgentUtils.BROWSER.FIREFOX?e.scrollLeft=-t:i===n.AgentUtils.BROWSER.IE||i===n.AgentUtils.BROWSER.EDGE?e.scrollLeft=t:e.scrollLeft=Math.max(0,e.scrollWidth-e.clientWidth-t)}else e.scrollLeft=t},n.DomUtils.getCSSLengthAsInt=function(e){if(!isNaN(e))return parseInt(e,10);if(e&&e.length>0&&"auto"!==e){var t=parseInt(e,10);return isNaN(t)&&(t=0),t}return 0},n.DomUtils.getCSSLengthAsFloat=function(e){if(!isNaN(e))return parseFloat(e);if(e&&e.length>0){var t=parseFloat(e);return isNaN(t)&&(t=0),t}return 0},n.DomUtils._LOGICAL_PARENT_DATA="oj-logical-parent",n.DomUtils.getLogicalParent=function(e){if(e)return e.data(n.DomUtils._LOGICAL_PARENT_DATA)},n.DomUtils.setLogicalParent=function(e,t){e&&(null===t?e.removeData(n.DomUtils._LOGICAL_PARENT_DATA):e.data(n.DomUtils._LOGICAL_PARENT_DATA,t))},n.DomUtils.isLogicalAncestorOrSelf=function(e,t){n.Assert.assertDomElement(e),n.Assert.assertDomElement(t);for(var i=t;i;){if(i===e)return!0;var o=n.DomUtils.getLogicalParent($(i));i=o?o[0]:i.parentNode}return!1},n.DomUtils.validateURL=function(e,t){var i=t||["http:","https:"],n=document.createElement("a");n.href=e;var o=n.protocol;if(null!=o&&(o=o.toLowerCase()),i.indexOf(o)<0)throw new Error(o+" is not a valid URL protocol")},n.DomUtils._supressNativeContextMenu=function(){$(document.body).hasClass("oj-hybrid")&&document.body.addEventListener("contextmenu",function(e){e.preventDefault()},!0)},n.DomUtils._supressNativeContextMenu(),n.DomUtils.PRESS_HOLD_THRESHOLD=750,n.DomUtils.recentTouchEnd=function(){var e=0;function t(){e=Date.now()}return document.addEventListener("touchend",t,!0),document.addEventListener("touchcancel",t,!0),function(){return Date.now()-e<500}}(),n.DomUtils.recentTouchStart=function(){var e=0,t=n.DomUtils.PRESS_HOLD_THRESHOLD+50;return document.addEventListener("touchstart",function(){e=Date.now()},!0),function(){return Date.now()-e<t}}(),n.DomUtils.recentPointer=(X=0,Z=n.DomUtils.PRESS_HOLD_THRESHOLD+600,document.addEventListener("mousedown",function(){var e=Date.now();(!q||e>X+n.DomUtils.PRESS_HOLD_THRESHOLD)&&(X=e,q=!1)},!0),document.addEventListener("touchstart",function(){X=Date.now(),q=!0},!0),document.addEventListener("mouseup",function(){X=Date.now(),q=!1},!0),document.addEventListener("touchend",function(){X=Date.now(),q=!1},!0),function(){return Date.now()-X<(q?Z:600)}),n.DomUtils.makeFocusable=(J=0,Q=(n.ThemeUtils.parseJSONFromFontFamily("oj-focus-config")||{}).focusHighlightPolicy,ee=function(e,t){switch(e?e():Q){case"all":return!0;case"none":return!1;default:return!(n.DomUtils.recentPointer()||t&&t())}},function(e){var t=e.element,i="ojFocusable";if(e.remove){t.removeClass("oj-focus oj-focus-highlight");var n=t.data(i);if(null==n)return;var o=".ojFocusable"+(""+n).split(",").join(" .ojFocusable");t.off(o).removeData(i)}else{var s=e.afterToggle||$.noop,r=e.applyHighlight?function(t){t.addClass("oj-focus"),ee(e.getFocusHighlightPolicy,e.recentPointer)&&t.addClass("oj-focus-highlight"),s("focusin")}:function(e){e.addClass("oj-focus"),s("focusin")};(e.setupHandlers||function(n,o){var s=e.component,r=function(e){n($(e.currentTarget))},a=function(e){o($(e.currentTarget))};if(s)s._on(t,{focusin:r,focusout:a});else{var l=J;J+=1;var u=t.data(i);t.data(i,null==u?l:u+","+l);var d={},h=".ojFocusable"+l;d["focusin"+h]=r,d["focusout"+h]=a,t.on(d)}})(r,function(e){e.removeClass("oj-focus oj-focus-highlight"),s("focusout")})}}),n.FocusUtils={},n.FocusUtils._TABBABLE=":tabbable",n.FocusUtils.containsFocus=function(e){var t=document.activeElement;return!(!e||!t)&&n.DomUtils.isAncestorOrSelf(e,t)},n.FocusUtils.focusElement=function(e){e.focus()},n.FocusUtils.focusFirstTabStop=function(e){var t=n.FocusUtils.getFirstTabStop(e);return t&&n.FocusUtils.focusElement(t),t},n.FocusUtils.isFirstActiveElement=function(e){var t=$(e).find(n.FocusUtils._TABBABLE);if(null==t||0===t.length)return!1;var i=t[0];return document.activeElement===i||i.name===document.activeElement.name&&"radio"===i.type&&"radio"===document.activeElement.type},n.FocusUtils.isLastActiveElement=function(e){var t=$(e).find(n.FocusUtils._TABBABLE);if(null==t||0===t.length)return!1;var i=t[t.length-1];return document.activeElement===i||i.name===document.activeElement.name&&"radio"===i.type&&"radio"===document.activeElement.type},n.FocusUtils.getFirstTabStop=function(e){var t=$(e);if(t.is(n.FocusUtils._TABBABLE))return e;var i=t.find(n.FocusUtils._TABBABLE);if(i&&i.length>0){if(i[0].classList.contains("oj-radio")){var o=i.filter(".oj-selected.oj-radio");return o&&o.length?o[0]:i[0]}return i[0]}return null},n.FocusUtils.getLastTabStop=function(e){var t=$(e).find(n.FocusUtils._TABBABLE);if(t&&t.length>0){if(t[t.length-1].classList.contains("oj-radio")){var i=t.filter(".oj-selected.oj-radio");return i&&i.length?i[i.length-1]:t[t.length-1]}return t[t.length-1]}return null},n.FocusUtils.isFocusable=function(e){return!!$(e).is(":focusable")&&!("A"===e.nodeName&&!e.hasAttribute("tabindex")&&n.AgentUtils.getAgentInfo().browser===n.AgentUtils.BROWSER.SAFARI)},n.GestureUtils={},n.GestureUtils._EVENT_NAMESPACE=".contextMenu",n.GestureUtils.stopDetectContextMenuGesture=function(e){e._clickListener&&($(e).off(n.GestureUtils._EVENT_NAMESPACE).removeClass("oj-menu-context-menu-launcher")[0].removeEventListener("click",e._clickListener,!0),clearTimeout(e._contextMenuPressHoldTimer),delete e._clickListener,delete e._contextMenuPressHoldTimer)},n.GestureUtils.startDetectContextMenuGesture=function(e,t){var i,o,s,r,a=n.DomUtils.PRESS_HOLD_THRESHOLD,l=!1,u=!1,d=300,h=null,c=n.GestureUtils._EVENT_NAMESPACE,p=!1;function _(i,n,o){if((l=o)&&$(e).one("touchend"+c,function(){p=!0,setTimeout(function(){p=!1},50)}),"touchstart"===h&&"contextmenu"===i.type||"contextmenu"===h&&"touchstart"===i.type||"keydown"===h&&"contextmenu"===i.type)return"keydown"===h&&"contextmenu"===i.type&&i.preventDefault(),h=null,void clearTimeout(r);i.isDefaultPrevented()||i.originalEvent&&i.originalEvent.defaultPrevented||(t(i,n),i.isDefaultPrevented()&&("touchstart"!==i.type&&"contextmenu"!==i.type&&"keydown"!==i.type||(h=i.type,r=setTimeout(function(){h=null},d))))}var m=function(e){l&&(e.preventDefault(),e.stopPropagation(),l=!1)};e._clickListener=m,e.addEventListener("click",m,!0),$(e).on("touchstart"+c+" mousedown"+c,function(t){if("mousedown"!==t.type||!p){if(l=!1,"touchstart"===t.type&&1===t.originalEvent.touches.length){var n=t.originalEvent.touches[0];o=n.pageX,s=n.pageY,u=!0,i=setTimeout(_.bind(void 0,t,"touch",!0),a),e._contextMenuPressHoldTimer=i}return!0}}).on("touchmove"+c,function(e){var t=e.originalEvent.touches[0];return(Math.abs(o-t.pageX)>5||Math.abs(s-t.pageY)>5)&&(u=!1,clearTimeout(i)),!0}).on("touchend"+c+" touchcancel"+c,function(){return u=!1,clearTimeout(i),!0}).on("keydown"+c+" contextmenu"+c,function(e){("contextmenu"===e.type||121===e.which&&e.shiftKey)&&_(e,u?"touch":"keydown"===e.type?"keyboard":"mouse",!1);return!0}),n.DomUtils.isTouchSupported()&&$(e).addClass("oj-menu-context-menu-launcher")},$(document).ready(function(){!function(){var e=$("<div style='border: 1px solid;border-color:red green;position: absolute;top: -999px;background-image: url(data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACwAAAAAAQABAAACAkQBADs=);'></div>");e.appendTo("body");var t=e.css("backgroundImage");e.css("borderTopColor")!==e.css("borderRightColor")&&(null==t||"none"!==t&&"url (invalid-url:)"!==t)||$("body").addClass("oj-hicontrast"),e.remove()}()}),n.Test={},n.Test.ready=!1,n.Test.domNodeForLocator=function(e){var t=e;if(n.StringUtils.isString(e)){var i=e;try{t=JSON.parse(i)}catch(e){return null}}if(t&&t.element){var o=$(t.element);if(o&&o.length>0){delete t.element;var s=t;return n.Components.getNodeBySubId(o[0],s)}}return null},n.Test.getOpenPopupCount=function(){return n.ZOrderUtils.getOpenPopupCount()},n.Test.findOpenPopups=function(){return n.ZOrderUtils.findOpenPopups()},n.Test.compareStackingContexts=function(e,t){return n.ZOrderUtils.compareStackingContexts(e,t)},$.cleanData=(te=$.cleanData,function(e){for(var t=[],i=0;i<e.length;i++){var o=e[i];if(null==o)break;var s=!1,r=n.Components.__GetWidgetConstructor(o);if(r&&!(s=r("instance")._IsCustomElement())){var a=n.Components.getComponentElementByNode(o);s=a&&n.BaseCustomElementBridge.getRegistered(a.tagName)}s||t.push(o)}t.length>0&&te(t)}),n.EditableValueUtils={},n.EditableValueUtils.validationContext={COMPONENT_CREATE:1,CONVERTER_OPTION_CHANGE:2,DISABLED_OPTION_CHANGE:3,READONLY_OPTION_CHANGE:4,REFRESH_METHOD:5,REQUIRED_OPTION_CHANGE:6,RESET_METHOD:7,USER_ACTION:8,VALIDATE_METHOD:9,VALIDATORS_OPTION_CHANGE:10,VALUE_OPTION_CHANGE:11},n.EditableValueUtils.validateMethodOptions={doValueChangeCheck:!1,validationContext:n.EditableValueUtils.validationContext.VALIDATE_METHOD},n.EditableValueUtils.converterOptionOptions={doValueChangeCheck:!1,doNotClearMessages:!0,validationContext:n.EditableValueUtils.validationContext.CONVERTER_OPTION_CHANGE},n.EditableValueUtils.disabledOptionOptions={doValueChangeCheck:!1,doNotClearMessages:!0,validationContext:n.EditableValueUtils.validationContext.DISABLED_OPTION_CHANGE},n.EditableValueUtils.requiredOptionOptions={doValueChangeCheck:!1,doNotClearMessages:!0,validationContext:n.EditableValueUtils.validationContext.REQUIRED_OPTION_CHANGE},n.EditableValueUtils.readOnlyOptionOptions={doValueChangeCheck:!1,doNotClearMessages:!0,validationContext:n.EditableValueUtils.validationContext.READONLY_OPTION_CHANGE},n.EditableValueUtils.refreshMethodOptions={doValueChangeCheck:!1,doNotClearMessages:!0,validationContext:n.EditableValueUtils.validationContext.REFRESH_METHOD},n.EditableValueUtils.validatorsOptionOptions={doValueChangeCheck:!1,doNotClearMessages:!0,validationContext:n.EditableValueUtils.validationContext.VALIDATORS_OPTION_CHANGE};n.EditableValueUtils.CUSTOM_LABEL_ELEMENT_ID="|label",n.EditableValueUtils.VALIDATE_VALUES={VALID:"valid",INVALID:"invalid"},n.EditableValueUtils.getAttributeValue=function(e,t){var i,n={};if(e&&t){var o=e[0];switch(t){case"disabled":i=o.hasAttribute("disabled")?!!o.disabled:void 0;break;case"pattern":i=o.pattern||void 0;break;case"placeholder":i=o.placeholder||void 0;break;case"readonly":i=o.hasAttribute("readonly")?!!o.readOnly:void 0;break;case"required":if(o.hasAttribute("required")){var s=o.required;i=void 0===s||!!s}else i=void 0;break;case"title":i=o.hasAttribute("title")?o.title:void 0;break;case"value":i=e.val()||void 0;break;case"min":case"max":default:i=o.getAttribute(t)||void 0}}return void 0!==i?(n.fromDom=!0,n.value=i):n.fromDom=!1,n},n.EditableValueUtils.initializeOptionsFromDom=function(e,t,i,o){for(var s={},r=0;r<e.length;r++){var a,l,u=e[r],d=u.attribute,h=u.option||d,c=u.coerceDomValue,p=u.validateOption,_=i.element,m=i.options[h];void 0===t[h]&&(m=i.options[h],(l=n.EditableValueUtils.getAttributeValue(_,d)).fromDom&&(a=l.value,c&&("boolean"==typeof c?a=n.EditableValueUtils.coerceDomValueForOption(h,a):"function"==typeof c&&(a=c.call(i,a))),s[h]=a));var g=h in s?s[h]:m;p&&"boolean"==typeof p&&n.EditableValueUtils.validateValueForOption(h,g)}null!=o&&o(s),i.option(s,{_context:{writeback:!0,internalSet:!0}})},n.EditableValueUtils.validateValueForOption=function(e,t){var i=!1;switch(e){case"required":null!==t&&"boolean"!=typeof t&&(i=!0);break;case"readOnly":case"disabled":null!==t&&"boolean"!=typeof t&&(i=!0)}if(i)throw new Error("Option '"+e+"' has invalid value set: "+t)},n.EditableValueUtils.coerceDomValueForOption=function(e,t){var i=t;switch(e){case"required":i=!!t}return i},n.EditableValueUtils.setPickerAttributes=function(e,t){if(e&&t){var i=t.class;if(i)for(var n=i.split(" "),o=0,s=n.length;o<s;++o)e[0].classList.add(n[o]);var r=t.style;if(r){var a=e[0],l=a.getAttribute("style");l?a.setAttribute("style",l+";"+r):a.setAttribute("style",r)}}},n.EditableValueUtils.getOjLabelId=function(e,t){var i,o,s,r,a,l,u;if(this.hasNoLabelFlag(e))return null;var d=e[0];if(i=d.id,s=0===(o=Array.prototype.filter.call(d.parentNode.children,function(e){return e!==d&&e.getAttribute("for")===i})).length?document.querySelector("oj-label[for='"+i+"']"):o[0]){if(u=s.getAttribute("label-id"))return u;if(r=s.id)return r+n.EditableValueUtils.CUSTOM_LABEL_ELEMENT_ID;if((a=s.querySelector("label"))&&(l=a.id),l)return l;if(t)return s.setAttribute("label-id",t),t}return null},n.EditableValueUtils.hasNoLabelFlag=function(e){return e[0].hasAttribute("data-oj-no-labelledby")},n.EditableValueUtils.validate=function(){var e;if(e=this._SetValue(this._GetDisplayValue(),null,this._VALIDATE_METHOD_OPTIONS),this._IsCustomElement()){if(e instanceof Promise)return e.then(function(e){return Promise.resolve(e?"valid":"invalid")});e=Promise.resolve(e?"valid":"invalid")}return e},n.EditableValueUtils.setSubIdForCustomLabelFor=function(e,t){e.setAttribute("id",t+"|input")},n.EditableValueUtils._updateLabelledBy=function(e,t,i){var o=n.EditableValueUtils.CUSTOM_LABEL_ELEMENT_ID;this._IsCustomElement()&&(e&&(e+=o),t&&(t+=o),e&&n.EditableValueUtils._removeAriaLabelledBy(i,e),t&&n.EditableValueUtils._addAriaLabelledBy(i,t))},n.EditableValueUtils._refreshRequired=function(e){var t,i,n,o=this._AriaRequiredUnsupported();this._refreshTheming("required",e),o||(i=this._GetContentElement(),(n=e)&&i?i[0].setAttribute("aria-required",n):i[0].removeAttribute("aria-required")),this._IsCustomElement()||(this.$label||this._createOjLabel(),this.$label&&(this.$label.ojLabel("option","showRequired",e),o&&(t=this._getAriaLabelledById(this.element))&&(e?this._addAriaDescribedBy(t+"_requiredIcon"):this._removeAriaDescribedBy(t+"_requiredIcon"))))},n.EditableValueUtils._AfterSetOptionRequired=function(e){this._refreshRequired(this._IsRequired()),this._runMixedValidationAfterSetOption(n.EditableValueUtils.requiredOptionOptions)},n.EditableValueUtils._AfterSetOptionValidators=function(){var e;this._ResetAllValidators(),this._hasInvalidMessagesShowing()&&(this._clearComponentMessages(),e=this._GetDisplayValue(),this._SetValue(e,null,n.EditableValueUtils.validatorsOptionOptions))},n.EditableValueUtils._AfterSetOptionAsyncValidators=function(){this._AfterSetOptionValidators()},n.EditableValueUtils._AfterSetOptionConverter=function(e){var t;this._ResetConverter(),this._hasInvalidMessagesShowing()?(this._clearComponentMessages(),t=this._GetDisplayValue(),this._SetValue(t,null,n.EditableValueUtils.converterOptionOptions)):this._Refresh("converter",this.options[e],!0)},n.EditableValueUtils._ResetConverter=function(){this._converter=null,this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.CONVERTER_HINT))},n.EditableValueUtils._GetNormalizedValidatorsFromOption=function(){var t,i,o,s,r,a,l=!0,u=[];if(o=this.options.validators)for(t=0;t<o.length;t++)"object"==typeof(i=o[t])?(i.validate&&"function"==typeof i.validate||(l=!1),l||(a=i.type)&&"string"==typeof a&&((r=le.Validation.validatorFactory(a))?((s=n.CollectionUtils.copyInto({},i.options)||{}).converter=s.converter||this._GetConverter(),s.label=s.label||this._getLabelText(),i=r.createValidator(s)):e.error("Unable to locate a validatorFactory for the requested type: "+a)),u.push(i)):e.error("Unable to parse the validator provided:"+i);return u},n.EditableValueUtils._GetNormalizedAsyncValidatorsFromOption=function(){var t,i,n,o=[];for(n=this.options.asyncValidators,t=0;t<n.length;t++)"object"==typeof(i=n[t])?i.validate&&"function"==typeof i.validate&&o.push(i):e.error("Unable to parse the validator provided:"+i);return o},n.EditableValueUtils._GetConverter=function(){var e;return this._converter||(e=this.options.converter,this._converter=le.IntlConverterUtils.getConverterInstance(e)),this._converter||null},n.EditableValueUtils._SetBusyState=function(e){void 0===this._resolveBusyStateAsyncMap&&(this._resolveBusyStateAsyncMap=new Map);var t=this._resolveBusyStateAsyncMap.get(e);if(!t){var i=this.element[0],n=c.getContext(i).getBusyContext(),o="The page is waiting for async validators for displayValue "+e;i&&i.id&&(o+=' for "'+i.id+'" '),o+="to finish.",t=n.addBusyState({description:o}),this._resolveBusyStateAsyncMap.set(e,t)}},n.EditableValueUtils._ClearBusyState=function(e){var t;void 0!==this._resolveBusyStateAsyncMap&&(t=this._resolveBusyStateAsyncMap.get(e))&&(t(),this._resolveBusyStateAsyncMap.delete(e))},n.EditableValueUtils._SetBusyStateAsyncValidatorHint=function(e){void 0===this._resolveBusyStateAsyncValidatorHintMap&&(this._resolveBusyStateAsyncValidatorHintMap=new Map);var t=this._resolveBusyStateAsyncValidatorHintMap.get(e);if(!t){var i=this.element[0],n=c.getContext(i).getBusyContext(),o="The page is waiting for async validator hint for counter "+e;i&&i.id&&(o+=' for "'+i.id+'" '),o+="to finish.",t=n.addBusyState({description:o}),this._resolveBusyStateAsyncValidatorHintMap.set(e,t)}},n.EditableValueUtils._ClearBusyStateAsyncValidatorHint=function(e){var t;void 0!==this._resolveBusyStateAsyncValidatorHintMap&&(t=this._resolveBusyStateAsyncValidatorHintMap.get(e))&&(t(),this._resolveBusyStateAsyncValidatorHintMap.delete(e))},n.EditableValueUtils._addAriaLabelledBy=function(e,t){e.each(function(){var e,i=this.getAttribute("aria-labelledby");e=i?i.split(/\s+/):[],-1===e.indexOf(t)&&e.push(t),null==(i=e.join(" ").trim())?this.removeAttribute("aria-labelledBy"):this.setAttribute("aria-labelledBy",i)})},n.EditableValueUtils._removeAriaLabelledBy=function(e,t){var i;e.each(function(){var e,n;-1!==(e=(n=(i=this.getAttribute("aria-labelledby"))?i.split(/\s+/):[]).indexOf(t))&&n.splice(e,1),(i=n.join(" ").trim())?this.setAttribute("aria-labelledby",i):this.removeAttribute("aria-labelledby")})},n.EditableValueUtils._SetInputType=function(e){var t="text",i=n.AgentUtils.getAgentInfo();i.os!==n.AgentUtils.OS.ANDROID&&i.os!==n.AgentUtils.OS.IOS&&i.os!==n.AgentUtils.OS.WINDOWSPHONE||e.indexOf(this.options.virtualKeyboard)>=0&&(t=this.options.virtualKeyboard),null==t?this.element[0].removeAttribute("type"):this.element[0].setAttribute("type",t)};var ne="invalidShown";n.__registerWidget("oj.editableValue",$.oj.baseComponent,{widgetEventPrefix:"oj",options:{describedBy:null,disabled:!1,displayOptions:{},help:void 0,helpHints:{definition:"",source:""},labelHint:"",messagesCustom:[],messagesHidden:void 0,messagesShown:void 0,title:"",valid:void 0,value:void 0,animateStart:null,animateEnd:null},getNodeBySubId:function(e){var t;if(!(t=this._super(e))&&!this._IsCustomElement()&&"oj-label-help-icon"===e.subId){var i=this._GetLabelElement();i&&(t=i.parent().find(".oj-label-help-icon"))}return t||null},getSubIdByNode:function(e){var t,i,n,o=null;return null!=e&&null!=(t=$(e).closest("a.oj-label-help-icon"))&&null!=(i=t.closest(".oj-label"))&&(n=i.find("label")[0])&&n===this._GetLabelElement()[0]&&(o={subId:"oj-label-help-icon"}),o},isValid:function(){return void 0===this._valid&&(this._valid=!this._hasInvalidMessages()),this._valid},refresh:function(){this._super(),this._doRefresh()},reset:function(){this._clearAllMessages(),this._runDeferredValidation(this._VALIDATION_CONTEXT.RESET_METHOD),this._refreshComponentDisplayValue(this.options.value,!0)},showMessages:function(){var e,t,i,o=[],s=this.options.messagesHidden,r=s.length>0;for(e=0;e<s.length;e++)(t=s[e])instanceof n.ComponentMessage?(t._forceDisplayToShown(),i=t.clone()):i=new D(t.summary,t.detail,t.severity),o.push(i);r&&(this._clearMessages("messagesHidden"),this._updateMessagesOption("messagesShown",o),this._setValidOption(ne,null))},_VALIDATION_MODE:{FULL:1,VALIDATORS_ONLY:2,REQUIRED_VALIDATOR_ONLY:3},_VALIDATION_CONTEXT:n.EditableValueUtils.validationContext,_VALIDATE_METHOD_OPTIONS:n.EditableValueUtils.validateMethodOptions,_InitOptions:function(e,t){this._super(e,t)},_ComponentCreate:function(){var e=this.element,t=this._GetSavedAttributes(e);if(this._super(),this.options.messagesCustom=this.options.messagesCustom||[],this.options.messagesHidden=[],this.options.messagesShown=this.options.messagesCustom.length>0?this._cloneMessagesBeforeSet(this.options.messagesCustom):[],this._SetDisabledDom(e),this._HasPlaceholderSet()&&(this._SetPlaceholder(this.options.placeholder),this._customPlaceholderSet=!0),t&&!this._IsCustomElement()){var i=e[0].tagName.toLowerCase();"input"!==i&&"textarea"!==i||["required","title","pattern"].forEach(function(i){i in t&&e.removeAttr(i)})}},_AfterCreate:function(){var e;this._super(),this._refreshTheming("disabled",this.options.disabled),this.widget()[0].classList.add("oj-form-control"),this._IsCustomElement()?(void 0===this.customOjLabelElement&&(this.customOjLabelElement=this._getCustomOjLabelElement()),this.customOjLabelElement&&this.customOjLabelElement.classList.add(this._GetDefaultStyleClass()+"-label")):this._createOjLabel(),(e=this.options.describedBy)&&this._addAriaDescribedBy(e),this._initComponentMessaging(),this._runDeferredValidation(this._VALIDATION_CONTEXT.COMPONENT_CREATE),this.options.messagesShown.length>0&&this._setMessagesOption("messagesShown",this.options.messagesShown,null,!0),this._Refresh("value",this.options.value,!1)},_SaveAttributes:function(e){this._IsCustomElement()||this._SaveAllAttributes(e)},_RestoreAttributes:function(e){this._IsCustomElement()||this._RestoreAllAttributes(e)},_AfterSetOption:function(e,t){switch(e){case"disabled":this._AfterSetOptionDisabledReadOnly(e,n.EditableValueUtils.disabledOptionOptions);break;case"displayOptions":this._initComponentMessaging();break;case"help":this._IsCustomElement()?this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.TITLE)):this._Refresh(e,this.options[e]);break;case"messagesCustom":this._messagesCustomOptionChanged(t),this._setValidOption(this._determineValidFromMessagesOptions(),null);break;case"placeholder":this._placeholderOptionChanged(t);break;case"title":this._IsCustomElement()||this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.TITLE));break;case"translations":this.refresh();break;case"value":this._AfterSetOptionValue(e,t)}},_AfterSetOptionDisabledReadOnly:function(e,t){var i=!this.options[e];this._Refresh(e,this.options[e]),i&&this._runMixedValidationAfterSetOption(t)},_AfterSetOptionValue:function(e,t){var i,n=t?t._context:null,o=!1;n&&(o=!!n.originalEvent,i=n.doNotClearMessages||!1),o||(i||this._clearAllMessages(null),this._runDeferredValidation(this._VALIDATION_CONTEXT.VALUE_OPTION_CHANGE)),this._Refresh(e,this.options[e],!0)},_CanSetValue:function(){return!(this.options.disabled||!1)},_destroy:function(){var e,t,i=this._super();if(this._clearAllMessages(null,!0),this._getComponentMessaging().deactivate(),this.$label)for(t=this.$label.length,e=0;e<t;e++)this.$label[e]&&null!=w.__GetWidgetConstructor(this.$label[e])&&$(this.$label[e]).ojLabel("destroy");return i},GetFocusElement:function(){return this._GetContentElement()[0]},_setOption:function(t,i,n){var o,s,r,a=!1;if("string"==typeof t&&void 0!==i)switch(t){case"messagesHidden":case"messagesShown":case"rawValue":a=!0;break;case"describedBy":r=i,(s=this.options.describedBy)&&this._removeAriaDescribedBy(s),r&&this._addAriaDescribedBy(r)}return a?(e.error(t+" option cannot be set"),this):(o=this._superApply(arguments),this._AfterSetOption(t,n),o)},_GetContentElement:function(){return this.element},_GetLabelElement:function(){var e;if(this.$label)return this.$label;if(n.EditableValueUtils.hasNoLabelFlag(this.widget()))return null;var t=this._getAriaLabelledByElement(this.element);if(null!==t&&0!==t.length)return t;var i=this.element[0].id;return void 0!==i&&0!==(t=$("label[for='"+i+"']")).length?t:0!==(e=this.element.closest("[aria-labelledby]")).length&&null!==(t=this._getAriaLabelledByElement(e))&&0!==t.length?t:null},_GetElementValue:function(){return this.element.val()},_GetMessagingLauncherElement:function(){return this._GetContentElement()},_GetConverter:function(){return null},_GetImplicitSyncValidators:function(){return this._implicitSyncValidators||(this._implicitSyncValidators={}),this._implicitSyncValidators},_GetImplicitAsyncValidators:function(){return this._implicitAsyncValidators||(this._implicitAsyncValidators={}),this._implicitAsyncValidators},_GetDisplayValue:function(e){return this._GetContentElement().val()},_GetNormalizedValidatorsFromOption:function(){return[]},_GetNormalizedAsyncValidatorsFromOption:function(){return[]},_GetAllSyncValidators:function(){var e,t,i,n,o;if(!this._allValidators){e=[],i=this._GetImplicitSyncValidators(),n=[];var s,r=Object.keys(i),a=r.length;if(a>0){for(t=0;t<a;t++)s=r[t],n.push(i[s]);e=e.concat(n)}(o=this._GetNormalizedValidatorsFromOption()).length>0&&(e=e.concat(o)),this._allValidators=e}return this._allValidators||[]},_ResetAllValidators:function(){this._allValidators&&(this._allValidators.length=0),this._allValidators=null,this._allAsyncValidators&&(this._allAsyncValidators.length=0),this._allAsyncValidators=null,this._IsCustomElement()?this._updateValidatorMessagingHint():this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDATOR_HINTS))},_getAllAsyncValidators:function(){var e,t,i,n,o;if(!this._allAsyncValidators){e=[],t=this._GetImplicitAsyncValidators(),i=[];var s,r=Object.keys(t),a=r.length;if(a>0){for(n=0;n<a;n++)s=r[n],i.push(t[s]);e=e.concat(i)}(o=this._GetNormalizedAsyncValidatorsFromOption()).length>0&&(e=e.concat(o)),this._allAsyncValidators=e}return this._allAsyncValidators||[]},_getAllAsyncValidatorsWithHint:function(){var e,t,i=this._getAllAsyncValidators(),n=[];if(i.length>0)for(e=0;e<i.length;e++)"hint"in(t=i[e])&&n.push(t);return n},_initAsyncValidatorMessagingHint:function(){var e,t,i=this._getAllAsyncValidatorsWithHint(),n=this;this._asyncValidatorHintCounter=0,i.length>0&&(t=n._getMessagingContent(n._MESSAGING_CONTENT_UPDATE_TYPE.VALIDATOR_HINTS),e=this._asyncValidatorHintCounter,this._setBusyStateAsyncValidatorHint(e),this._addAsyncValidatorsHintsMessagingContent(i,t).then(function(){n._clearBusyStateAsyncValidatorHint(e)}))},_updateValidatorMessagingHint:function(){var e,t=this._getAllAsyncValidatorsWithHint(),i=this._getComponentMessaging(),n=this,o=this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDATOR_HINTS);t.length>0?(this._asyncValidatorHintCounter+=1,e=this._asyncValidatorHintCounter,this._setBusyStateAsyncValidatorHint(e),this._addAsyncValidatorsHintsMessagingContent(t,o).then(function(){n._clearBusyStateAsyncValidatorHint(e)})):i.update(o)},_addAsyncValidatorsHintsMessagingContent:function(e,t){var i,n=this._asyncValidatorHintCounter,o=this._getComponentMessaging(),s=[],r=this,a=[];for(i=0;i<e.length;i++)a.push(e[i].hint);function l(e){return e.then(function(e){var i,a={};return r._asyncValidatorHintCounter===n?(null!==e&&(s.push(e),a.validatorHint=t.validatorHint.concat(s),o.update(a)),i="resolved"):i="ignore",{v:e,status:i}},function(e){return{e:e,status:"rejected"}})}return new Promise(function(e){Promise.all(a.map(l)).then(function(){e(s)})})},_IsRequired:function(){return!1},_HandleChangeEvent:function(e){var t=this._GetDisplayValue();this._SetValue(t,e)},_SetRawValue:function(e,t){var i={};i._context={originalEvent:t,writeback:!0,internalSet:!0,readOnly:!0},this._CompareOptionValues("rawValue",this.options.rawValue,e)||this.option("rawValue",e,i)},_Refresh:function(e,t,i){var n,o;switch(e){case"converter":var s=this.options.value;this._refreshComponentDisplayValue(s,i);break;case"disabled":this._refreshTheming("disabled",this.options.disabled);break;case"help":this._IsCustomElement()||this.$label&&(n=this.options.help.definition,o=this.options.help.source,this.$label.ojLabel("option","help",{definition:n,source:o}),this._refreshDescribedByForLabel());break;case"value":this._refreshComponentDisplayValue(t,i)}},_NotifyHidden:function(){this._superApply(arguments),this._getComponentMessaging().close()},_NotifyDetached:function(){this._superApply(arguments),this._getComponentMessaging().close()},_ResetComponentState:function(){this.$label&&this.$label.ojLabel("refresh"),this._implicitReqValidator=null,this._converter=null,this._ResetAllValidators()},_SetDisplayValue:function(e){var t=this._GetContentElement();t.val()!==e&&t.val(e)},_SetDisabledDom:function(e){"boolean"==typeof this.options.disabled&&(e[0].disabled=this.options.disabled)},_SetPlaceholder:function(e){var t=this._GetContentElement()[0];t&&(null==e?t.removeAttribute("placeholder"):t.setAttribute("placeholder",e))},_SetPlaceholderOption:function(e){this.options.placeholder=e},_HasPlaceholderSet:function(){return this.options.placeholder},_ClearPlaceholder:function(){this._SetPlaceholderOption(""),this._SetPlaceholder("")},_SetValue:function(t,i,n){var o,s,r,a=!n||"boolean"!=typeof n.doValueChangeCheck||n.doValueChangeCheck,l=this,u=!1;return void 0===t?(e.warn("Attempt to set a value of undefined"),!1):(a&&t===l._getLastDisplayValue()?e.level>e.LEVEL_WARN&&e.info((t.toString,t.toString())):(o=t+"_"+(this._asyncValidatorValidateCounter+1),(s=this._AsyncValidate(t,i,n,o))instanceof Promise?u=s.then(function(e){return r=e,l._afterAsyncValidateUpdateValue(e,i,n)}).then(function(){return l._clearBusyState(o),void 0!==r}):(this._afterAsyncValidateUpdateValue(s,i,n),u=void 0!==s)),u)},_ParseValueShowErrors:function(e,t){var i;this._clearAllMessages(t);try{return this._parseValue(e,t)}catch(e){i=this._processValidationErrors(e),this._updateMessagesOption("messagesShown",i,t),this._setValidOption(ne,t)}},_AsyncValidate:function(t,i,n,o){var s,r,a,l=n&&n.validationMode?n.validationMode:this._VALIDATION_MODE.FULL,u=n&&n.validationContext?n.validationContext:this._VALIDATION_CONTEXT.USER_ACTION,d=n&&n.doNotClearMessages||!1;if(void 0!==t){if(this._CanSetValue()){d||this._clearAllMessages(i);try{return this._asyncValidatorValidateCounter+=1,l===this._VALIDATION_MODE.FULL?(this._setLastDisplayValue(t),r=this._parseValue(t,i,!0)):r=t,(a=this._asyncValidateValue(r,i,u))instanceof Promise?(this._setBusyState(o),a.then(function(e){if("valid"===e)return r})):a}catch(e){s=this._processValidationErrors(e,u),this._updateMessagesOption("messagesShown",s,i),this._setValidOption(ne,i)}}else e.level>e.LEVEL_WARN&&e.info("Validation skipped and value option not set as component state does not  allow setting value. For example if the component is readonly or disabled.");return a}e.warn("Attempt to set a value of undefined")},_afterAsyncValidateUpdateValue:function(e,t,i){var n,o=!1;return void 0!==e&&(i&&!0===i.doNotClearMessages?this.isValid()||!this._hasInvalidComponentMessagesShowing():this.isValid())&&(i&&i._context&&(n=i._context),this._updateValueOption(e,t,i&&i.validationContext,n,i),o=!0),o},_CompareOptionValues:function(e,t,i){return"value"===e||"rawValue"===e?n.Object.compareValues(t,i):0===e.indexOf("messages")?this._messagesEquals(t,i):this._superApply(arguments)},_GetDefaultStyleClass:function(){return n.Assert.failedInAbstractFunction(),""},_MESSAGING_CONTENT_UPDATE_TYPE:{ALL:1,VALIDITY_STATE:2,CONVERTER_HINT:3,VALIDATOR_HINTS:4,TITLE:5},_OPTION_TO_CSS_MAPPING:{disabled:"oj-disabled",required:"oj-required"},_clearAllMessages:function(e,t){t?(this.options.messagesHidden=[],this.options.messagesShown=[],this.options.messagesCustom=[]):(this._clearMessages("messagesHidden",e),this._clearMessages("messagesShown",e),this._clearMessages("messagesCustom",e))},_clearComponentMessages:function(){var e,t=this.options.messagesShown;e=t.length,this._clearMessages("messagesHidden");for(var i=e-1;i>=0;i--)t[i]instanceof n.ComponentMessage&&t.splice(i,1);t.length!==e&&this._setMessagesOption("messagesShown",t,null,!0)},_setMessagesOption:function(e,t,i,n){var o={},s=0===t.length&&0===this.options[e].length;!n&&s||(o._context={originalEvent:i,writeback:!0,internalSet:!0},"messagesCustom"!==e&&(o._context.readOnly=!0),o.changed=n||!s,this._resetValid(),this.option(e,t,o),this._updateMessagingContent())},_setValidOption:function(e,t){var i={};"pending"===e&&"valid"!==this._determineValidFromMessagesOptions()||(i._context={originalEvent:t,writeback:!0,internalSet:!0,readOnly:!0},this.option("valid",e,i))},_clearMessages:function(e,t){this._setMessagesOption(e,[],t)},_cloneMessagesBeforeSet:function(e){var t,i,n,o=[];if(e&&e.length>0)for(t=0;t<e.length;t++)n=e[t],i=new D(n.summary,n.detail,n.severity),i=Object.freeze?Object.freeze(i):i,o.push(i);return o},_createOjLabel:function(){var e,t;this._IsCustomElement()||(this.$label=this._GetLabelElement(),this.$label&&(e=this.options.help.definition,t=this.options.help.source,this.$label.ojLabel({rootAttributes:{class:this._GetDefaultStyleClass()+"-label"},help:{definition:e,source:t}}),this._createDescribedByForLabel()))},_createDescribedByForLabel:function(){var e,t=this.options.help.definition;if(null!=this.options.help.source||null!=t){var i=this.$label[0];i&&(e=i.id),e&&this._addAriaDescribedBy(e+"_helpIcon")}},_refreshDescribedByForLabel:function(){var e,t=this.options.help.definition,i=this.options.help.source,n=this.$label[0];n&&(e=n.id),e&&(null!=i||null!=t?this._addAriaDescribedBy(e+"_helpIcon"):this._removeAriaDescribedBy(e+"_helpIcon"))},_doRefresh:function(){var e,t=!1;this._ResetComponentState(),this._initComponentMessaging(),this._Refresh("disabled",this.options.disabled),this._hasInvalidMessagesShowing()&&(t=!0),this._clearComponentMessages(),t?(e=this._GetDisplayValue(),this._SetValue(e,null,n.EditableValueUtils.refreshMethodOptions)):(this._IsRequired()&&this._runDeferredValidation(n.EditableValueUtils.refreshMethodOptions.validationContext),this._Refresh("value",this.options.value,!0))},_getLastModelValue:function(){return this._oj_lastModelValue},_getLastDisplayValue:function(){return void 0===this._oj_lastElementValue&&(this._oj_lastElementValue=""),this._oj_lastElementValue},_getAriaLabelledByElement:function(e){var t=e[0].getAttribute("aria-labelledby");return void 0!==t?$("label[id='"+t+"']"):null},_getAriaLabelledById:function(e){var t=null,i=this._getAriaLabelledByElement(e);return null!==i&&0!==i.length&&(t=i[0].getAttribute("id")),t},_addAriaDescribedBy:function(e){this._GetContentElement().each(function(){var t,i=this.getAttribute("aria-describedby");t=i?i.split(/\s+/):[],-1===t.indexOf(e)&&t.push(e),null==(i=t.join(" ").trim())?this.removeAttribute("aria-describedby"):this.setAttribute("aria-describedby",i)})},_removeAriaDescribedBy:function(e){this._GetContentElement().each(function(){var t,i,n;-1!==(i=(n=(t=this.getAttribute("aria-describedby"))?t.split(/\s+/):[]).indexOf(e))&&n.splice(i,1),(t=n.join(" ").trim())?this.setAttribute("aria-describedby",t):this.removeAttribute("aria-describedby")})},_getMessages:function(){return this.options.messagesShown.concat(this.options.messagesHidden)},_getCustomOjLabelElement:function(){var e,t,i=null,o=this.options.labelledBy,s=this.widget();if(o&&(i=document.getElementById(o)),null===i&&!n.EditableValueUtils.hasNoLabelFlag(s)){var r=s[0];(t=r.id)&&(i=0===(e=Array.prototype.filter.call(r.parentNode.children,function(e){return e!==r&&e.getAttribute("for")===t})).length?document.querySelector("[for='"+t+"']"):e[0])}return i},_getLabelText:function(){return this.$label?this.$label[0].textContent:(void 0===this.customOjLabelElement&&(this.customOjLabelElement=this._getCustomOjLabelElement()),this.customOjLabelElement?this.customOjLabelElement.textContent:null)},_getValidityState:function(){return this._validityState?this._validityState:(this._validityState=new n.ComponentValidity(this.isValid(),this._getMessages()),this._validityState)},_hasInvalidMessages:function(){return!D.isValid(this._getMessages())},_hasInvalidMessagesShowing:function(){return!this.isValid()&&this.options.messagesShown.length>0},_hasInvalidComponentMessagesShowing:function(){for(var e,t,i=this.options.messagesShown,o=0;o<i.length;o++)(t=i[o])instanceof n.ComponentMessage&&t._isMessageAddedByComponent()&&(e=e||[]).push(t);return void 0!==e&&!D.isValid(e)},_initComponentMessaging:function(){var e=this._getComponentMessaging(),t=this._GetMessagingLauncherElement(),i=this._GetContentElement(),n=this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.ALL);this._customPlaceholderSet||this._ClearPlaceholder(),e.activate(t,i,n),this._IsCustomElement()&&(this._initAsyncValidatorMessagingHint(),this._asyncValidatorValidateCounter=0)},_messagesCustomOptionChanged:function(e){var t,i,o=e?e._context:null,s=this.options.messagesCustom,r=this.options.messagesShown,a=[];for(t=0;t<r.length;t++)(i=r[t])instanceof n.ComponentMessage&&i._isMessageAddedByComponent()&&a.push(i);for(t=0;t<s.length;t++)a.push(s[t]);this._setMessagesOption("messagesShown",a,o?o.originalEvent:null,e&&e.changed)},_placeholderOptionChanged:function(e){var t=!(e&&e._context||{}).internalMessagingSet,i=this.options.placeholder;this._SetPlaceholder(i),t?(this._customPlaceholderSet=!0,this._GetConverter()&&this._initComponentMessaging()):this._customPlaceholderSet=!1},_setLastModelValue:function(e){this._oj_lastModelValue=e},_setLastDisplayValue:function(e){this._oj_lastElementValue=e},_updateMessagesOption:function(e,t,i){var n,o,s;if("object"==typeof t&&Array.isArray(t))for(s=this.options[e],o=t.length,n=0;n<o;n++)s.push(t[n]);this._setMessagesOption(e,s,i,!0)},_updateMessagingContent:function(){this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDITY_STATE))},_updateValueOption:function(e,t,i,n,o){var s,r,a=n||{};switch(t&&(a.originalEvent=t),i){case this._VALIDATION_CONTEXT.CONVERTER_OPTION_CHANGE:case this._VALIDATION_CONTEXT.DISABLED_OPTION_CHANGE:case this._VALIDATION_CONTEXT.READONLY_OPTION_CHANGE:case this._VALIDATION_CONTEXT.REFRESH_METHOD:case this._VALIDATION_CONTEXT.REQUIRED_OPTION_CHANGE:case this._VALIDATION_CONTEXT.VALIDATE_METHOD:case this._VALIDATION_CONTEXT.VALIDATORS_OPTION_CHANGE:a.writeback=!0,a.doNotClearMessages=!0}if(a.internalSet=!0,o&&o.targetOptions){s={},r=!1;for(var l=0;l<o.targetOptions.length;l++)s[o.targetOptions[l]]=e,r=r||"value"===o.targetOptions[l]}else s={value:e},r=!0;this.option(s,{_context:a}),r&&this._AfterSetOptionValue("value",{_context:a})},_resetValid:function(){this._valid=void 0},_determineValidFromMessagesOptions:function(){var e=this.options.messagesHidden,t=this.options.messagesShown,i="valid";return t&&0!==t.length&&!D.isValid(t)?i=ne:e&&0!==e.length&&!D.isValid(e)&&(i="invalidHidden"),i},_formatValue:function(t){var i=t,n=this._GetConverter();return n&&"object"==typeof n&&(n.format&&"function"==typeof n.format?i=n.format(t):e.level>e.LEVEL_WARN&&e.info("converter does not support the format method.")),i},_getComponentMessaging:function(){return this._componentMessaging||(this._componentMessaging=new n.ComponentMessaging(this)),this._componentMessaging},_getHintsForAllValidators:function(e){var t,i,n=[],o="";for(this._IsRequired()&&(i=this._getImplicitRequiredValidator()).getHint&&"function"==typeof i.getHint&&(o=i.getHint())&&n.push(o),t=0;t<e.length;t++)o="","object"==typeof(i=e[t])&&i.getHint&&"function"==typeof i.getHint&&(o=i.getHint())&&n.push(o);return n},_getImplicitRequiredValidator:function(){var e,t,i={};return null==this._implicitReqValidator&&(t={hint:(i=this.options.translations&&this.options.translations.required||{}).hint||null,label:this._getLabelText(),messageSummary:i.messageSummary||null,messageDetail:i.messageDetail||null},e=le.Validation.validatorFactory(n.ValidatorFactory.VALIDATOR_TYPE_REQUIRED),this._implicitReqValidator=e?e.createValidator(t):null),this._implicitReqValidator},_getMessagingContent:function(e){var t,i,n,o={},s="",r=[];if((e=e||this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDITY_STATE)!==this._MESSAGING_CONTENT_UPDATE_TYPE.ALL&&e!==this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDITY_STATE||(n=this._getMessages(),this._getValidityState().update(this.isValid(),n),o.validityState=this._getValidityState()),e!==this._MESSAGING_CONTENT_UPDATE_TYPE.ALL&&e!==this._MESSAGING_CONTENT_UPDATE_TYPE.CONVERTER_HINT||((i=this._GetConverter())&&"object"==typeof i&&i.getHint&&"function"==typeof i.getHint&&(s=i.getHint()||""),o.converterHint=s),e!==this._MESSAGING_CONTENT_UPDATE_TYPE.ALL&&e!==this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDATOR_HINTS||(t=this._GetAllSyncValidators(),r=this._getHintsForAllValidators(t)||[],o.validatorHint=r),e===this._MESSAGING_CONTENT_UPDATE_TYPE.ALL||e===this._MESSAGING_CONTENT_UPDATE_TYPE.TITLE){var a;if(this._IsCustomElement()){var l=this.options.help;null!=l&&(a=l.instruction)}else a=this.options.title;o.title=a||""}return o},_messagesEquals:function(e,t){var i,n=-1,o=!0,s=$.extend([],e),r=$.extend([],t);return s.length===r.length&&(s.forEach(function(e){e instanceof D?i=e:(i=new D(e.summary,e.detail,e.severity),i=Object.freeze?Object.freeze(i):i),n=-1,r.forEach(function(e,t){D.getSeverityLevel(i.severity)===D.getSeverityLevel(e.severity)&&i.summary===e.summary&&i.detail===e.detail&&(n=t)}),n>-1?r.splice(n,1):o=!1}),o)},_parseValue:function(t,i,n){var o=this._GetConverter(),s=t;if(o&&"object"==typeof o)if(o.parse&&"function"==typeof o.parse)try{n&&this._setValidOption("pending",i),s=o.parse(t)}catch(e){throw e}else e.level>e.LEVEL_WARN&&e.info("converter does not support the parse method.");return s},_addValidationError:function(e,t){var i,o,s,r;e instanceof n.ConverterError||e instanceof n.ValidatorError?(o=(s=e.getMessage()).severity||D.SEVERITY_LEVEL.ERROR,r=s.summary||v.getTranslatedString("oj-message.error"),i=s.detail||v.getTranslatedString("oj-converter.detail")):e.summary||e.detail?(o=D.SEVERITY_LEVEL.ERROR,r=e.summary||v.getTranslatedString("oj-message.error"),i=e.detail||v.getTranslatedString("oj-converter.detail")):(o=D.SEVERITY_LEVEL.ERROR,r=v.getTranslatedString("oj-message.error"),i=e.message||v.getTranslatedString("oj-converter.detail")),t.push({summary:r,detail:i,severity:o})},_processValidationErrors:function(e,t,i){var o,s=[],r=e._messages||[],a={};a.context=t||0,a.display=i||n.ComponentMessage.DISPLAY.SHOWN,0===r.length&&this._addValidationError(e,r);for(var l=0;l<r.length;l++)o=r[l],s.push(this._createComponentMessage(o.summary,o.detail,o.severity,a));return s||null},_createComponentMessage:function(e,t,i,o){var s;return s=new n.ComponentMessage(e,t,i,o),s=Object.seal?Object.seal(s):s},_refreshComponentDisplayValue:function(e,t){var i;return(t||e!==this._getLastModelValue())&&(i=this._UpdateElementDisplayValue(e)),i},_refreshTheming:function(e,t){-1!==Object.keys(this._OPTION_TO_CSS_MAPPING).indexOf(e)&&(t?this.widget()[0].classList.add(this._OPTION_TO_CSS_MAPPING[e]):this.widget()[0].classList.remove(this._OPTION_TO_CSS_MAPPING[e]))},_runDeferredValidation:function(t){this._CanSetValue()?this._validateValueForRequiredOnly(this.options.value,t):e.level>e.LEVEL_WARN&&e.info("Deferred validation skipped as component is readonly or disabled."),this._setValidOption(this._determineValidFromMessagesOptions(),null)},_runMixedValidationAfterSetOption:function(e){var t,i=!1;this._hasInvalidMessagesShowing()&&(i=!0),this._clearComponentMessages(),i&&(t=this._GetDisplayValue(),this._SetValue(t,null,e)),!i&&this._IsRequired()?this._runDeferredValidation(e.validationContext):this._setValidOption(this._determineValidFromMessagesOptions(),null)},_UpdateElementDisplayValue:function(e,t){var i,n;i=e;try{i=this._formatValue(e);try{this._setLastModelValue(e),this._afterConverterFormat(i)}catch(e){throw e}n=i}catch(o){t||this._afterConverterFormatFailure(o),this._setLastModelValue(e),this._afterConverterFormat(i),n=void 0}return n},_afterConverterFormat:function(e){var t;this._SetDisplayValue(e),t=this._GetDisplayValue(),this._setLastDisplayValue(t),this._SetRawValue(t,null)},_afterConverterFormatFailure:function(e){var t;t=this._processValidationErrors(e),this._updateMessagesOption("messagesShown",t),this._setValidOption(ne,null)},_validateValueForRequiredOnly:function(e,t){var i,o;if(this._IsRequired()){o=this._getImplicitRequiredValidator();try{this._setValidOption("pending",null),o.validate(n.StringUtils.trim(e))}catch(e){(i=this._processValidationErrors(e,t,n.ComponentMessage.DISPLAY.HIDDEN))&&this._updateMessagesOption("messagesHidden",i)}}},_validateValue:function(t,i,o){var s,r,a,l,u=this._GetAllSyncValidators(),d=this._IsRequired(),h=!1,c=[];if((d||u.length>0)&&this._setValidOption("pending",i),d){a=this._getImplicitRequiredValidator();try{a.validate(n.StringUtils.trim(t))}catch(e){this._addValidationError(e,c),this._setValidOption(ne,i),h=!0}}for(s=0;s<u.length;s++)if("object"==typeof(a=u[s]))if(a.validate&&"function"==typeof a.validate)try{a.validate(t)}catch(e){this._addValidationError(e,c),h||(this._setValidOption(ne,i),h=!0)}else e.level>e.LEVEL_WARN&&e.info("validator does not support the validate method.");return c.length>0&&((l=new Error)._messages=c,r=this._processValidationErrors(l,o),this._updateMessagesOption("messagesShown",r,i)),0===c.length},_asyncValidateValue:function(t,i,o){var s,r,a,l,u=this._getAllAsyncValidators(),d=!1,h=u.length>0,c=this,p=this._asyncValidatorValidateCounter;if(h&&this._setValidOption("pending",i),l=this._validateValue(t,i,o),!h)return l&&this._setValidOption(c._determineValidFromMessagesOptions(),i),l?t:void 0;var _=[];for(s=0;s<u.length;s++)_.push(u[s].validate(n.StringUtils.trim(t)));function m(n){return n.then(function(i){var n;return c._asyncValidatorValidateCounter===p?n="resolved":(e.level>e.LEVEL_WARN&&e.info("Validate ignored because new value came in before async validator finished for "+t),n="ignore"),{v:i,status:n}},function(n){var s;return c._asyncValidatorValidateCounter===p?(a=c._processValidationErrors(n,o),c._updateMessagesOption("messagesShown",a,i),d||(c._setValidOption(ne,i),d=!0),s="rejected"):(e.level>e.LEVEL_WARN&&e.info("Validate ignored because new value came in before async validator finished for "+t),s="ignore"),{e:n,status:s}})}return new Promise(function(e){Promise.all(_.map(m)).then(function(t){t.filter(function(e){return"ignore"===e.status}).length>0?r="ignoreValidation":(r=d?ne:"valid",c._setValidOption(c._determineValidFromMessagesOptions(),i)),e(r)})})},_setBusyState:n.EditableValueUtils._SetBusyState,_clearBusyState:n.EditableValueUtils._ClearBusyState,_setBusyStateAsyncValidatorHint:n.EditableValueUtils._SetBusyStateAsyncValidatorHint,_clearBusyStateAsyncValidatorHint:n.EditableValueUtils._ClearBusyStateAsyncValidatorHint},!0),w.setDefaultOptions({editableValue:{displayOptions:w.createDynamicPropertyGetter(function(e){var t={messages:e.containers.indexOf("ojDataGrid")>=0||e.containers.indexOf("ojTable")>=0?["notewindow"]:["inline"],converterHint:["placeholder","notewindow"],validatorHint:["notewindow"]};return t[e.isCustomElement?"helpInstruction":"title"]=["notewindow"],t}),help:w.createDynamicPropertyGetter(function(e){return e.isCustomElement?{instruction:""}:{definition:null,source:null}})}}),n.InlineMessagingStrategy=function(e){this.Init(e)},n.ComponentMessaging.registerMessagingStrategy(n.ComponentMessaging._DISPLAY_TYPE.INLINE,n.InlineMessagingStrategy),n.Object.createSubclass(n.InlineMessagingStrategy,n.MessagingStrategy,"oj.InlineMessagingStrategy"),n.InlineMessagingStrategy.prototype.reactivate=function(e){n.InlineMessagingStrategy.superclass.reactivate.call(this,e),this._updateInlineMessage()},n.InlineMessagingStrategy.prototype.shouldUpdate=function(e){return!(!e||void 0===e.validityState)},n.InlineMessagingStrategy.prototype.update=function(){n.InlineMessagingStrategy.superclass.update.call(this),this._updateInlineMessage()},n.InlineMessagingStrategy.prototype.deactivate=function(){this._removeMessagingContentRootDom(),n.InlineMessagingStrategy.superclass.deactivate.call(this)},n.InlineMessagingStrategy.prototype._getDefaultAnimation=function(){if(!n.InlineMessagingStrategy._defaultAnimation){var e=(_.parseJSONFromFontFamily("oj-messaging-inline-option-defaults")||{}).animation;e=e||{},n.InlineMessagingStrategy._defaultAnimation=e}return n.InlineMessagingStrategy._defaultAnimation},n.InlineMessagingStrategy.prototype._replaceAnimationOptions=function(e,t){var i,o;n.StringUtils.isString(e)?(o=!0,i=e+""):(o=!1,i=JSON.stringify(e));for(var s=Object.keys(t),r=0;r<s.length;r++){var a=s[r];i=i.replace(new RegExp(a,"g"),t[a])}return o?i:JSON.parse(i)},n.InlineMessagingStrategy.prototype._determineAnimation=function(e,t){var i,n,o,s=this._getDefaultAnimation();if(s){var r,a=e[0],l=a.innerHTML,u=a.offsetHeight;a.innerHTML=t,r=a.offsetHeight,a.innerHTML=l,"noanimation"!==(i=r>u?"open":r<u?"close":"noanimation")&&(n=s[i])&&(o=this._replaceAnimationOptions(n,{"#oldHeight":u+"px","#newHeight":r+"px"}))}return{action:i,effect:o}},n.InlineMessagingStrategy.prototype._setBusyState=function(){if(!this._resolveBusyState){var e=this.GetComponent(),t=e?e.element:null,i=t?t[0]:null,n=c.getContext(i).getBusyContext(),o="The page is waiting for inline message ";i&&i.id&&(o+='for "'+i.id+'" '),o+="to open/close",this._resolveBusyState=n.addBusyState({description:o})}},n.InlineMessagingStrategy.prototype._clearBusyState=function(){this._resolveBusyState&&(this._resolveBusyState(),this._resolveBusyState=null)},n.InlineMessagingStrategy.prototype._queueAction=function(e){var t=this,i=this.$messagingContentRoot;t._inInlineMessagingAnimation?this._currentContentToShow=e:(this._currentContentToShow=null,this._setBusyState(),this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=setTimeout(function(){if(t._timeoutId=null,i&&i[0]){var n=t._determineAnimation(i,e),o=n.action,s=n.effect;"noanimation"===o?(i[0].innerHTML=e,t._clearBusyState()):("close"===o?i[0].setAttribute("aria-live","off"):i[0].setAttribute("aria-live","polite"),"open"===o&&(i[0].innerHTML=e),t._inInlineMessagingAnimation=!0,vi.startAnimation(i[0],"inline-"+o,s,t.GetComponent()).then(function(){var n;t._inInlineMessagingAnimation=!1,"close"===o&&(i[0].setAttribute("aria-live","polite"),i[0].innerHTML=e),null!==t._currentContentToShow?(n=t._currentContentToShow,t._currentContentToShow=null,t._queueAction(n)):t._clearBusyState()}))}else t._clearBusyState()},0))},n.InlineMessagingStrategy.prototype._updateInlineMessage=function(){var e;(e=this._buildInlineHtml())&&null==this.$messagingContentRoot&&this._createInlineMessage(),this.$messagingContentRoot&&this.$messagingContentRoot[0]&&(this.GetComponent()._IsCustomElement()?this._queueAction(e):e?this.$messagingContentRoot[0].innerHTML=e:this._removeMessagingContentRootDom())},n.InlineMessagingStrategy.prototype._createInlineMessage=function(){this.$messagingContentRoot=$(this._getInlineContentHtml()),this._addAriaDescribedBy(this.$messagingContentRoot),this._addAriaLive(this.$messagingContentRoot),this.GetComponent().widget()[0].appendChild(this.$messagingContentRoot[0])},n.InlineMessagingStrategy.prototype._getInlineContentHtml=function(){return"<div class='oj-messaging-inline-container'></div>"},n.InlineMessagingStrategy.prototype._removeMessagingContentRootDom=function(){if(null!=this.$messagingContentRoot){var e=this.$messagingContentRoot[0];this._removeAriaDescribedBy(this.$messagingContentRoot),e.parentNode.removeChild(e),this.$messagingContentRoot=null}},n.InlineMessagingStrategy.prototype._addAriaDescribedBy=function(e){var t,i,o,s,r=(i=this.GetLauncher())[0];n.Assert.assertPrototype(i,$),n.Assert.assertPrototype(e,$),o=e.uniqueId()[0].getAttribute("id"),(s=(t=r.getAttribute("aria-describedby"))?t.split(/\s+/):[]).push(o),null==(t=s.join(" ").trim())?r.removeAttribute("aria-describedby"):r.setAttribute("aria-describedby",t)},n.InlineMessagingStrategy.prototype._addAriaLive=function(e){n.Assert.assertPrototype(e,$),e[0].setAttribute("aria-live","polite")},n.InlineMessagingStrategy.prototype._removeAriaDescribedBy=function(e){var t,i,o,s,r;o=this.GetLauncher(),n.Assert.assertPrototype(o,$),n.Assert.assertPrototype(e,$),s=e[0].getAttribute("id"),-1!==(i=(r=(t=o[0].getAttribute("aria-describedby"))?t.split(/\s+/):[]).indexOf(s))&&r.splice(i,1),(t=r.join(" ").trim())?o[0].setAttribute("aria-describedby",t):o[0].removeAttribute("aria-describedby")},n.InlineMessagingStrategy.prototype._buildInlineHtml=function(){var e;return this.ShowMessages()?(e=this.GetComponent().document[0],this._buildMessagesHtml(e)):""},n.InlineMessagingStrategy.prototype._buildMessagesHtml=function(e){var t,i,o="";return this.HasMessages()&&(i=this.GetMessages(),t=this.GetMaxSeverity(),o=n.PopupMessagingStrategyUtils.buildMessagesHtml(e,i,t,!0)),o},n.PopupMessagingStrategy=function(e){this.Init(e)},n.ComponentMessaging.registerMessagingStrategy(n.ComponentMessaging._DISPLAY_TYPE.NOTEWINDOW,n.PopupMessagingStrategy),n.Object.createSubclass(n.PopupMessagingStrategy,n.MessagingStrategy,"oj.PopupMessagingStrategy"),n.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT={ojRadioset:{position:"launcher",events:{open:"focusin mouseenter press",close:"mouseleave"}},ojCheckboxset:{position:"launcher",events:{open:"focusin mouseenter press",close:"mouseleave"}},ojInputText:{position:"launcher",events:{open:"focusin"}},ojTextArea:{position:"launcher",events:{open:"focusin"}},ojInputPassword:{position:"launcher",events:{open:"focusin"}},ojSwitch:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},ojSlider:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},ojColorSpectrum:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},ojColorPalette:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},default:{position:"launcher-wrapper",events:{open:"focusin"}}},n.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT="oj-form-control-hint",n.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_CONVERTER="oj-form-control-hint-converter",n.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_VALIDATOR="oj-form-control-hint-validator",n.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_TITLE="oj-form-control-hint-title",n.PopupMessagingStrategy._OPEN_NAMESPACE=".ojPopupMessagingOpen",n.PopupMessagingStrategy._CLOSE_NAMESPACE=".ojPopupMessagingClose",n.PopupMessagingStrategy.prototype.activate=function(e){n.PopupMessagingStrategy.superclass.activate.call(this,e),this._initMessagingPopup()},n.PopupMessagingStrategy.prototype.reactivate=function(e){n.PopupMessagingStrategy.superclass.reactivate.call(this,e),this._updatePopupIfOpenOrComponentHasFocus()},n.PopupMessagingStrategy.prototype.update=function(){n.PopupMessagingStrategy.superclass.update.call(this),this._updatePopupIfOpenOrComponentHasFocus()},n.PopupMessagingStrategy.prototype.deactivate=function(){this._unregisterLauncherEvents(),this._destroyTooltip(),n.PopupMessagingStrategy.superclass.deactivate.call(this)},n.PopupMessagingStrategy.prototype.close=function(){this._closePopup()},n.PopupMessagingStrategy.prototype._closePopup=function(){this._queueAction(function(e){if(this._isPopupInitialized())return e&&this._setActionResolver(this.$messagingContentRoot,"close",e),void this.$messagingContentRoot.ojPopup("close");e&&e(!0)}.bind(this))},n.PopupMessagingStrategy.prototype._initMessagingPopup=function(){this._openPopupCallback||this._registerLauncherEvents()},n.PopupMessagingStrategy.prototype._addAnimateEventListeners=function(e){var t=function(e,t,i){var n=this.GetComponent();n&&n._trigger&&(t.stopPropagation(),n._trigger(e,null,i)||t.preventDefault())};e.on("ojanimatestart.notewindow",t.bind(this,"animateStart")),e.on("ojanimateend.notewindow",t.bind(this,"animateEnd"))},n.PopupMessagingStrategy.prototype._removeAnimateEventListeners=function(e){e.off("ojanimatestart.notewindow"),e.off("ojanimateend.notewindow")},n.PopupMessagingStrategy.prototype._setBusyState=function(e){var t=this.GetComponent(),i=t?t.element:null,n=i?i[0]:null,o=c.getContext(n).getBusyContext(),s="The page is waiting for note window ";return n&&n.id&&(s+='for "'+n.id+'" '),s+="to "+e,o.addBusyState({description:s})},n.PopupMessagingStrategy.prototype._setActionResolver=function(e,t,i){var n;this._actionCount>1&&(n=e.ojPopup("option","animation"),e.ojPopup("option","animation",null));var o=this._setBusyState(t);e.one("oj"+t,function(){n&&e.ojPopup("option","animation",n),o(),i(!0)})},n.PopupMessagingStrategy.prototype._queueAction=function(e){if(this.GetComponent()._IsCustomElement()){var t=this,i=function(e){var i=new Promise(e);return i.then(function(){t._actionCount-=1}),i};this._actionCount?(this._actionCount+=1,this._actionPromise=this._actionPromise.then(function(){return i(e)})):(this._actionCount=1,this._actionPromise=i(e))}else e(null)},n.PopupMessagingStrategy.prototype._openPopup=function(e){this._queueAction(function(t){var i,o,s;if(this._canOpenPopup()&&(o=this._buildPopupHtml(),!n.StringUtils.isEmptyOrUndefined(o))){var r=this._getPopupElement(),a=r.ojPopup("isOpen");if((i=n.PopupMessagingStrategyPoolUtils.getPopupContentNode(r)).innerHTML="",i.innerHTML=o,!a)return s=this.GetLauncher(),e&&"press"===e.type&&this._openPopupOnPressEvent(s),t&&this._setActionResolver(r,"open",t),void r.ojPopup("open",s);a&&r.ojPopup("refresh")}t&&t(!0)}.bind(this))},n.PopupMessagingStrategy.prototype._openPopupOnPressEvent=function(e){this._inPressEvent=!0,e[0].addEventListener("click",this._eatChangeAndClickOnPress,!0),e[0].addEventListener("change",this._eatChangeAndClickOnPress,!0),e.one("touchend",function(){setTimeout(function(){this._inPressEvent=!1},50)})},n.PopupMessagingStrategy.prototype._eatChangeAndClickOnPress=function(e){this._inPressEvent&&(e.preventDefault(),e.stopPropagation(),"click"===e.type&&(this._inPressEvent=!1))},n.PopupMessagingStrategy.prototype._canOpenPopup=function(){var e=this.GetComponent().options,t=e.disabled||!1,i=e.readOnly||!1;return!(t||i)},n.PopupMessagingStrategy.prototype._updatePopupIfOpenOrComponentHasFocus=function(){var e,t,i,o;e=this._buildPopupHtml(),null!=this.GetLauncher()&&(i=this.GetLauncher()[0].contains(document.activeElement),this._isPopupInitialized()?(o=this._getPopupElement()).ojPopup("isOpen")&&(e?((t=n.PopupMessagingStrategyPoolUtils.getPopupContentNode(o)).innerHTML="",t.innerHTML=e,o.ojPopup("refresh")):o.ojPopup("close")):i&&e&&this._openPopup(void 0))},n.PopupMessagingStrategy.prototype._unregisterLauncherEvents=function(){var e=this.GetLauncher();e.off(n.PopupMessagingStrategy._OPEN_NAMESPACE),e.off(n.PopupMessagingStrategy._CLOSE_NAMESPACE),e[0].removeEventListener("click",this._eatChangeAndClickOnPress,!0),e[0].removeEventListener("change",this._eatChangeAndClickOnPress,!0),n.DomUtils.isTouchSupported()&&(e.ojHammer().off("press"),e.ojHammer("destroy"),e.off("contextmenu",this._eatContextMenuOnOpenPopupListener),this._eatContextMenuOnOpenPopupListener=null,this._inPressEvent=null),this._openPopupCallback=null,this._closePopupCallback=null},n.PopupMessagingStrategy.prototype._registerLauncherEvents=function(){var e,t,i,o,s,r,a,l,u=this.GetLauncher();(o=(i=n.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT[this.GetComponent().widgetName])?i.events:n.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT.default.events).open&&((a=this._openPopupCallback)||(a=this._openPopup.bind(this),this._openPopupCallback=a),l=o.open.indexOf("press"),r=this._getNamespacedEvents(o.open.replace("press",""),n.PopupMessagingStrategy._OPEN_NAMESPACE),u.on(r,a),n.DomUtils.isTouchSupported()&&-1!==l&&(this._eatContextMenuOnOpenPopupListener=function(){return!1},u.on("contextmenu",this._eatContextMenuOnOpenPopupListener),s={recognizers:[[Hammer.Press,{time:750}]]},u.ojHammer(s).on("press",a))),o.close&&((t=this._closePopupCallback)||(t=this._closePopup.bind(this),this._closePopupCallback=t),e=this._getNamespacedEvents(o.close,n.PopupMessagingStrategy._CLOSE_NAMESPACE),u.on(e,t))},n.PopupMessagingStrategy.prototype._getNamespacedEvents=function(e,t){var i,n,o;if(""===e||""===t)return e;o=(i=e.split(" ")).length,n=[];for(var s=0;s<o;s++)i[s]&&n.push(i[s]+t);return n.join(" ")},n.PopupMessagingStrategy.prototype._getPopupPosition=function(){var e,t,i;return(e=(t=n.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT[this.GetComponent().widgetName])?t.position:n.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT.default.position)&&("launcher"===e?i=this.GetLauncher():"launcher-wrapper"===e&&(i=this.GetLauncher().parent())),i||(i=this.GetComponent().widget()),{my:"start bottom",at:"end top",collision:"flipcenter",of:i}},n.PopupMessagingStrategy.prototype._getPopupElement=function(){var e,t;if(this.$messagingContentRoot)return this.$messagingContentRoot;if(e=n.PopupMessagingStrategyPoolUtils.getNextFreePopup(),t=this._getPopupPosition(),e.ojPopup("option","position",t),e.ojPopup("option","beforeClose",this._popupBeforeCloseCallback.bind(this)),e.ojPopup("option","close",this._popupCloseCallback.bind(this)),e.ojPopup("option","open",this._popupOpenCallback.bind(this)),this.GetComponent()._IsCustomElement()){var i=(_.parseJSONFromFontFamily("oj-messaging-popup-option-defaults")||{}).animation;i.actionPrefix="notewindow",e.ojPopup("option","animation",i),this._addAnimateEventListeners(e)}else e.ojPopup("option","animation",null);return this.$messagingContentRoot=e,this.$messagingContentRoot},n.PopupMessagingStrategy.prototype._popupOpenCallback=function(e){var t=$(e.target),i=this;window.setTimeout(function(){w.isComponentInitialized(t,"ojPopup")?t.ojPopup("option","autoDismiss","focusLoss"):delete i.$messagingContentRoot},10)},n.PopupMessagingStrategy.prototype._popupBeforeCloseCallback=function(){this._resolveBusyState=this._setBusyState("close")},n.PopupMessagingStrategy.prototype._popupCloseCallback=function(e){var t=this.GetLauncher(),i=$(e.target);this._removeAnimateEventListeners(i),w.isComponentInitialized(i,"ojPopup")&&(i.ojPopup("option","autoDismiss","none"),i.ojPopup("option","open",null),i.ojPopup("option","close",null),i.ojPopup("option","beforeClose",null)),t&&t[0]&&(t[0].removeEventListener("click",this._eatChangeAndClickOnPress,!0),t[0].removeEventListener("change",this._eatChangeAndClickOnPress,!0)),this.$messagingContentRoot=null,this._inPressEvent=null,n.PopupMessagingStrategyPoolUtils.getPopupContentNode(i).innerHTML="",this._resolveBusyState&&(this._resolveBusyState(),this._resolveBusyState=null)},n.PopupMessagingStrategy.prototype._destroyTooltip=function(){this._closePopup(),n.PopupMessagingStrategyPoolUtils.destroyFreePopup()},n.PopupMessagingStrategy.prototype._buildPopupHtml=function(){var e=!1,t=this.GetComponent().document[0],i=[],o="";return this.ShowMessages()&&i.push(this._buildMessagesHtml(t)),(this.ShowConverterHint()||this.ShowValidatorHint()||this.ShowTitle())&&i.push(this._buildHintsHtml(t)),i.forEach(function(i){i&&(e?o=o.concat(n.PopupMessagingStrategyUtils.getSeparatorHtml(t)):e=!0,o=o.concat(i))}),o},n.PopupMessagingStrategy.prototype._buildMessagesHtml=function(e){var t,i="",o=this.GetMaxSeverity();return this.HasMessages()&&(t=this.GetMessages(),i=n.PopupMessagingStrategyUtils.buildMessagesHtml(e,t,o,!1)),i},n.PopupMessagingStrategy.prototype._buildHintsHtml=function(e){var t,i,o=[],s="";if(this.ShowConverterHint()&&(t=(o=this.GetConverterHint()).length?o[0]:"",s+=n.PopupMessagingStrategyUtils.buildHintHtml(e,n.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_CONVERTER,t,!1,n.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT)),this.ShowValidatorHint())for(o=this.GetValidatorHints(),i=0;i<o.length;i++)s+=n.PopupMessagingStrategyUtils.buildHintHtml(e,n.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_VALIDATOR,o[i],!1,n.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT);return this.ShowTitle()&&(s+=n.PopupMessagingStrategyUtils.buildHintHtml(e,n.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_TITLE,this.GetTitle(),!0,n.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT)),s?"<div class='oj-form-control-hints'>"+s+"</div>":""},n.PopupMessagingStrategy.prototype._isPopupInitialized=function(){return!!this.$messagingContentRoot&&w.isComponentInitialized(this.$messagingContentRoot,"ojPopup")},n.PopupMessagingStrategyUtils={},n.PopupMessagingStrategyUtils.buildHintHtml=function(e,t,i,o,s){var r;if(i){r=e.createElement("div");for(var a=s.split(" "),l=0,u=a.length;l<u;++l)r.classList.add(a[l]);r.classList.add(t),n.PopupMessagingStrategyUtils._appendTextDom(r,n.PopupMessagingStrategyUtils._getTextDom(e,i,o))}return r?r.outerHTML:""},n.PopupMessagingStrategyUtils.getSeverityTranslatedString=function(e){var t;switch(e){case D.SEVERITY_LEVEL.FATAL:t=v.getTranslatedString("oj-message.fatal");break;case D.SEVERITY_LEVEL.ERROR:t=v.getTranslatedString("oj-message.error");break;case D.SEVERITY_LEVEL.WARNING:t=v.getTranslatedString("oj-message.warning");break;case D.SEVERITY_LEVEL.INFO:t=v.getTranslatedString("oj-message.info");break;case D.SEVERITY_LEVEL.CONFIRMATION:t=v.getTranslatedString("oj-message.confirmation")}return t},n.PopupMessagingStrategyUtils.getSeparatorHtml=function(e){var t;return(t=$(e.createElement("hr")))?t.get(0).outerHTML:""},n.PopupMessagingStrategyUtils.buildMessagesHtml=function(e,t,i,o){var s,r,a,l,u,d,h,c,p="",_=[],m={};for(r=0;r<t.length;r++)u=(l=t[r])instanceof D?l:new D(l.summary,l.detail,l.severity),m[d=D.getSeverityLevel(u.severity)]||(m[d]=[]),m[d].push(u);for(r=i;r>=D.SEVERITY_LEVEL.CONFIRMATION;r--)for(_=m[r]||[],a=0;a<_.length;a++)l=_[a],d=D.getSeverityLevel(l.severity),h=n.PopupMessagingStrategyUtils.getSeverityTranslatedString(d),c=l.summary||h,s=l.detail||"",p=p.concat(n.PopupMessagingStrategyUtils.buildMessageHtml(e,c,s,d,o));return p},n.PopupMessagingStrategyUtils.buildMessageHtml=function(e,t,i,o,s){var r,a,l,u,d,h=n.PopupMessagingStrategyUtils.getSeverityTranslatedString(o);if((l=e.createElement("div")).classList.add(n.PopupMessagingStrategyUtils._SELECTOR_MESSAGE),s)for(var c=n.PopupMessagingStrategyUtils._getSeveritySelector(o).split(" "),p=0,_=c.length;p<_;++p)l.classList.add(c[p]);u=e.createElement("span");for(var m=n.PopupMessagingStrategyUtils._getSeverityIconSelector(o).split(" "),g=0,f=m.length;g<f;++g)u.classList.add(m[g]);if(null==h?u.removeAttribute("title"):u.setAttribute("title",h),u.setAttribute("role","img"),l.appendChild(u),(r=e.createElement("span")).classList.add(n.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONTENT),(d=e.createElement("div")).classList.add(n.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_SUMMARY),d.textContent=t,r.appendChild(d),i){var v=n.PopupMessagingStrategyUtils._getTextDom(e,i,!0);(a=e.createElement("div")).classList.add(n.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_DETAIL),n.PopupMessagingStrategyUtils._appendTextDom(a,v),r.appendChild(a)}return l.appendChild(r),l.outerHTML},n.PopupMessagingStrategyUtils._getSeverityIconSelector=function(e){var t;switch(e){case D.SEVERITY_LEVEL.FATAL:case D.SEVERITY_LEVEL.ERROR:t=n.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR_ICON;break;case D.SEVERITY_LEVEL.WARNING:t=n.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_WARNING_ICON;break;case D.SEVERITY_LEVEL.INFO:t=n.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_INFO_ICON;break;case D.SEVERITY_LEVEL.CONFIRMATION:t=n.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONFIRMATION_ICON}return n.PopupMessagingStrategyUtils._DEFAULT_STATUS_ICON_SELECTORS+t},n.PopupMessagingStrategyUtils._getSeveritySelector=function(e){var t;switch(e){case D.SEVERITY_LEVEL.FATAL:case D.SEVERITY_LEVEL.ERROR:t=n.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR;break;case D.SEVERITY_LEVEL.WARNING:t=n.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_WARNING;break;case D.SEVERITY_LEVEL.INFO:t=n.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_INFO;break;case D.SEVERITY_LEVEL.CONFIRMATION:default:t=n.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONFIRMATION}return t},n.PopupMessagingStrategyUtils._getTextDom=function(e,t,i){var o=null;return n.StringUtils.isString(t)&&(i&&n.DomUtils.isHTMLContent(t)?o=n.DomUtils.cleanHtml(t.substring(6,t.length-7)):(o=e.createElement("span")).textContent=t),o},n.PopupMessagingStrategyUtils._appendTextDom=function(e,t){n.StringUtils.isString(t)?e.innerHTML=t:e.appendChild(t)},n.PopupMessagingStrategyUtils._DEFAULT_STATUS_ICON_SELECTORS="oj-component-icon oj-message-status-icon ",n.PopupMessagingStrategyUtils._SELECTOR_MESSAGE="oj-message",n.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_SUMMARY="oj-message-summary",n.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_DETAIL="oj-message-detail",n.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONTENT="oj-message-content",n.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR_ICON="oj-message-error-icon",n.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_WARNING_ICON="oj-message-warning-icon",n.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_INFO_ICON="oj-message-info-icon",n.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONFIRMATION_ICON="oj-message-confirmation-icon",n.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR="oj-message-error",n.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_WARNING="oj-message-warning",n.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_INFO="oj-message-info",n.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONFIRMATION="oj-message-confirmation",n.PopupMessagingStrategyPoolUtils={},n.PopupMessagingStrategyPoolUtils.getNextFreePopup=function(){var e,t=n.PopupMessagingStrategyPoolUtils._getPool(),i=t.find("."+n.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING);if(0===i.length){(e=$(n.PopupMessagingStrategyPoolUtils._getPopupContentHtml()))[0].style.display="none",e.appendTo(t);e.ojPopup({initialFocus:"none",tail:"simple",autoDismiss:"none",modality:"modeless",animation:{open:null,close:null}})}else e=$(i[0]);return e},n.PopupMessagingStrategyPoolUtils.getPopupContentNode=function(e){return e.find("."+n.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING_CONTAINER)[0]},n.PopupMessagingStrategyPoolUtils.destroyFreePopup=function(){var e;if(n.PopupMessagingStrategyPoolUtils._getFreePoolCount()>0){var t=(e=n.PopupMessagingStrategyPoolUtils.getNextFreePopup())[0];e.ojPopup("destroy"),t.parentNode.removeChild(t)}},n.PopupMessagingStrategyPoolUtils._getPool=function(){var e=$("#"+n.PopupMessagingStrategyPoolUtils._MESSAGING_POPUP_POOL_ID);if(e.length>0)return e;var t=(e=$("<div>"))[0];return t.setAttribute("id",n.PopupMessagingStrategyPoolUtils._MESSAGING_POPUP_POOL_ID),t.setAttribute("role","presentation"),document.body.appendChild(t),e},n.PopupMessagingStrategyPoolUtils._getFreePoolCount=function(){return n.PopupMessagingStrategyPoolUtils._getPool().find("."+n.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING).length},n.PopupMessagingStrategyPoolUtils._getPopupContentHtml=function(){return'<div class="'+n.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING+'"><div class="'+n.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING_CONTAINER+'"></div></div>'},n.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING_CONTAINER="oj-messaging-popup-container",n.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING="oj-messaging-popup",n.PopupMessagingStrategyPoolUtils._MESSAGING_POPUP_POOL_ID="__oj_messaging_popup_pool";var oe={properties:{asyncValidators:{type:"Array<Object>",value:[]},autocomplete:{type:"string",value:"on",extension:{_COPY_TO_INNER_ELEM:!0}},autofocus:{type:"boolean",value:!1,extension:{_COPY_TO_INNER_ELEM:!0}},describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},labelHint:{type:"string",value:""},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},name:{type:"string",value:"",extension:{_COPY_TO_INNER_ELEM:!0}},placeholder:{type:"string"},rawValue:{type:"string",writeback:!0,readOnly:!0},readonly:{type:"boolean",value:!1},required:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{regexp:{type:"object",properties:{messageDetail:{type:"string"},messageSummary:{type:"string"}}},required:{type:"object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}}}},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},validators:{type:"Array<Object>",value:[]},value:{type:"string",writeback:!0}},methods:{refresh:{},validate:{},reset:{},showMessages:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{}},extension:{}},se={properties:{asyncValidators:{type:"Array<Object>",value:[]},autocomplete:{type:"string",value:"on",extension:{_COPY_TO_INNER_ELEM:!0}},autofocus:{type:"boolean",value:!1,extension:{_COPY_TO_INNER_ELEM:!0}},clearIcon:{type:"string",enumValues:["always","conditional","never"],value:"never"},converter:{type:"object",properties:{type:{type:"string"},options:{type:"object"}}},describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},labelHint:{type:"string",value:""},list:{type:"string",extension:{_COPY_TO_INNER_ELEM:!0}},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},name:{type:"string",value:"",extension:{_COPY_TO_INNER_ELEM:!0}},placeholder:{type:"string"},rawValue:{type:"string",writeback:!0,readOnly:!0},readonly:{type:"boolean",value:!1},required:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{regexp:{type:"object",properties:{messageDetail:{type:"string"},messageSummary:{type:"string"}}},required:{type:"object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}}}},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},validators:{type:"Array<Object>",value:[]},value:{type:"any",writeback:!0},virtualKeyboard:{type:"string",enumValues:["auto","email","number","search","tel","text","url"],value:"auto"}},methods:{refresh:{},validate:{},reset:{},showMessages:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{}},extension:{}},re={properties:{asyncValidators:{type:"Array<Object>",value:[]},autocomplete:{type:"string",value:"on",extension:{_COPY_TO_INNER_ELEM:!0}},autofocus:{type:"boolean",value:!1,extension:{_COPY_TO_INNER_ELEM:!0}},converter:{type:"object",properties:{type:{type:"string"},options:{type:"object"}}},describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},labelHint:{type:"string",value:""},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},name:{type:"string",value:"",extension:{_COPY_TO_INNER_ELEM:!0}},placeholder:{type:"string"},rawValue:{type:"string",writeback:!0,readOnly:!0},readonly:{type:"boolean",value:!1},required:{type:"boolean",value:!1},resizeBehavior:{type:"string",enumValues:["both","horizontal","none","vertical"],value:"none"},rows:{type:"number",extension:{_COPY_TO_INNER_ELEM:!0}},translations:{type:"object",value:{},properties:{regexp:{type:"object",properties:{messageDetail:{type:"string"},messageSummary:{type:"string"}}},required:{type:"object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}}}},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},validators:{type:"Array<Object>",value:[]},value:{type:"any",writeback:!0}},methods:{refresh:{},validate:{},reset:{},showMessages:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{}},extension:{}};n.__registerWidget("oj.inputBase",$.oj.editableValue,{version:"1.0.0",widgetEventPrefix:"oj",_ATTR_CHECK:[],_CLASS_NAMES:"",_WIDGET_CLASS_NAMES:"",_ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES:"",_GET_INIT_OPTIONS_PROPS_FOR_WIDGET:[{attribute:"disabled",validateOption:!0},{attribute:"pattern"},{attribute:"placeholder"},{attribute:"value"},{attribute:"readonly",option:"readOnly",validateOption:!0},{attribute:"required",coerceDomValue:!0,validateOption:!0},{attribute:"title"},{attribute:"spellcheck"}],_INPUT_HELPER_KEY:"",_BLUR_HANDLER_KEY:"blur",_KEYDOWN_HANDLER_KEY:"keydown",_KEYUP_HANDLER_KEY:"keyup",_COMPOSITIONSTART_HANDLER_KEY:"compositionstart",_COMPOSITIONEND_HANDLER_KEY:"compositionend",_INPUT_HANDLER_KEY:"input",_DROP_HANDLER_KEY:"drop",options:{asyncValidators:[],autocomplete:void 0,autofocus:!1,name:"",placeholder:"",rawValue:void 0,readOnly:!1,required:!1,validators:[]},_SaveAttributes:function(e){var t=this._superApply(arguments);return this._processAttrCheck(),t},_InitOptions:function(e,t){this._super(e,t),this._IsCustomElement()||n.EditableValueUtils.initializeOptionsFromDom(this._GET_INIT_OPTIONS_PROPS_FOR_WIDGET,t,this)},_ComponentCreate:function(){var e=this._superApply(arguments),t=this.options.readOnly;return this._rtl="rtl"===this._GetReadingDirection(),"boolean"==typeof t&&this.element.prop("readonly",t),this._DoWrapElement()?(this._wrapElementInRootDomElement(),this._DoWrapElementAndTriggers()&&this._WrapElement(),this._focusable({element:this._wrapper,applyHighlight:!0})):this._focusable({element:this.element,applyHighlight:!0}),this._defaultRegExpValidator={},this._defaultRegExpAsyncValidator={},this._eventHandlers=null,e},_AfterCreate:function(){var e,t=this._superApply(arguments),i=this;return this._refreshRequired(this.options.required),this._CLASS_NAMES&&this.element.addClass(this._CLASS_NAMES),this._attachDetachEventHandlers(),this._AppendInputHelper(),$.each(["disabled","readOnly"],function(e,t){i.options[t]&&i._processOptions(t,i.options[t])}),this._IsCustomElement()&&(e=this.widget().attr("id"))&&n.EditableValueUtils.setSubIdForCustomLabelFor(this._GetContentElement()[0],e),t},_IsRequired:function(){return this.options.required},_AfterSetOptionRequired:n.EditableValueUtils._AfterSetOptionRequired,_AfterSetOptionValidators:n.EditableValueUtils._AfterSetOptionValidators,_AfterSetOptionAsyncValidators:n.EditableValueUtils._AfterSetOptionAsyncValidators,_AfterSetOptionConverter:n.EditableValueUtils._AfterSetOptionConverter,_ResetConverter:n.EditableValueUtils._ResetConverter,_GetConverter:n.EditableValueUtils._GetConverter,_GetNormalizedValidatorsFromOption:n.EditableValueUtils._GetNormalizedValidatorsFromOption,_GetNormalizedAsyncValidatorsFromOption:n.EditableValueUtils._GetNormalizedAsyncValidatorsFromOption,_processOptions:function(e,t){"disabled"===e&&this.element.prop("disabled",t),"readOnly"===e&&(this.element.prop("readonly",t),this._refreshStateTheming("readOnly",t)),"disabled"!==e&&"readOnly"!==e||this._attachDetachEventHandlers()},_setOption:function(e,t,i){var o=this._superApply(arguments);return"disabled"!==e&&"readOnly"!==e||this._processOptions(e,t),"pattern"===e&&(this._defaultRegExpValidator[n.ValidatorFactory.VALIDATOR_TYPE_REGEXP]=this._getImplicitRegExpValidator(),this._AfterSetOptionValidators()),o},_AfterSetOption:function(e,t,i){switch(this._superApply(arguments),e){case"readOnly":this._AfterSetOptionDisabledReadOnly(e,n.EditableValueUtils.readOnlyOptionOptions);break;case"required":this._AfterSetOptionRequired(e);break;case"validators":this._AfterSetOptionValidators(e);break;case"asyncValidators":this._AfterSetOptionAsyncValidators(e);break;case"converter":this._AfterSetOptionConverter(e)}},_destroy:function(){var e=this._superApply(arguments);return this.element.off("blur drop keydown keyup compositionstart compositionend input"),this._inputHelper&&this._inputHelper.remove(),this._DoWrapElement()&&!this._IsCustomElement()&&(this._DoWrapElementAndTriggers()?n.DomUtils.unwrap(this.element,this._wrapper):n.DomUtils.unwrap(this.element)),e},_attachDetachEventHandlers:function(){if(this.options.readOnly||this.options.disabled){if(this._eventHandlers)for(var e=[this._BLUR_HANDLER_KEY,this._KEYDOWN_HANDLER_KEY,this._KEYUP_HANDLER_KEY,this._COMPOSITIONSTART_HANDLER_KEY,this._COMPOSITIONEND_HANDLER_KEY,this._INPUT_HANDLER_KEY,this._DROP_HANDLER_KEY],t=0,i=e.length;t<i;t++)this._eventHandlers[e[t]]&&(this.element.off(e[t],this._eventHandlers[e[t]]),delete this._eventHandlers[e[t]])}else{this._eventHandlers={};var n=$.proxy(this._onBlurHandler,this),o=$.proxy(this._onKeyDownHandler,this),s=$.proxy(this._onKeyUpHandler,this),r=$.proxy(this._onCompositionStartHandler,this),a=$.proxy(this._onCompositionEndHandler,this),l=$.proxy(this._onInputHandler,this),u=function(){this.focus()};this.element.on(this._BLUR_HANDLER_KEY,n),this.element.on(this._KEYDOWN_HANDLER_KEY,o),this.element.on(this._KEYUP_HANDLER_KEY,s),this.element.on(this._COMPOSITIONSTART_HANDLER_KEY,r),this.element.on(this._COMPOSITIONEND_HANDLER_KEY,a),this.element.on(this._INPUT_HANDLER_KEY,l),this.element.on(this._DROP_HANDLER_KEY,u),this._eventHandlers[this._BLUR_HANDLER_KEY]=n,this._eventHandlers[this._KEYDOWN_HANDLER_KEY]=o,this._eventHandlers[this._KEYUP_HANDLER_KEY]=s,this._eventHandlers[this._COMPOSITIONSTART_HANDLER_KEY]=r,this._eventHandlers[this._COMPOSITIONEND_HANDLER_KEY]=a,this._eventHandlers[this._INPUT_HANDLER_KEY]=l,this._eventHandlers[this._DROP_HANDLER_KEY]=u}},_OPTION_TO_CSS_MAPPING:{readOnly:"oj-read-only"},_processAttrCheck:function(){for(var e=this._ATTR_CHECK,t=0,i=e.length;t<i;t++){var n=e[t].attr;"setMandatory"in e[t]&&this.element.attr(n,e[t].setMandatory)}},_onBlurHandler:function(e){this._SetValue(this._GetDisplayValue(),e)},_onKeyDownHandler:function(e){},_onKeyUpHandler:function(e){e.keyCode===$.ui.keyCode.ENTER&&this._SetValue(this._GetDisplayValue(),e)},_onCompositionStartHandler:function(){this._isComposing=!0},_onCompositionEndHandler:function(e){this._isComposing=!1,this._SetRawValue(this._GetContentElement().val(),e)},_onInputHandler:function(e){this._isComposing||this._SetRawValue(this._GetContentElement().val(),e)},_DoWrapElement:function(){return this._WIDGET_CLASS_NAMES},_DoWrapElementAndTriggers:function(){return this._ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES},_wrapElementInRootDomElement:function(){this.OuterWrapper?(this._wrapper=$(this.OuterWrapper).addClass(this._WIDGET_CLASS_NAMES),this._wrapper.append(this.element)):($(this.element).wrap($("<div>").addClass(this._WIDGET_CLASS_NAMES)),this._wrapper=this.element.parent())},_WrapElement:function(){return $(this.element).wrap($("<div>").addClass(this._ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES)).parent()},_AppendInputHelper:function(){if(this._INPUT_HELPER_KEY&&this._DoWrapElement()){var e=this.element.attr("aria-describedby")||"",t=this._GetSubId(this._INPUT_HELPER_KEY);e+=" "+t,this.element.attr("aria-describedby",e),this._inputHelper=$("<div class='oj-helper-hidden-accessible' aria-hidden='true' id='"+t+"'>"+this._EscapeXSS(this.getTranslatedString(this._INPUT_HELPER_KEY))+"</div>"),this._AppendInputHelperParent().append(this._inputHelper)}},_EscapeXSS:function(e){return $("<span>"+e+"</span>").text()},_AppendInputHelperParent:function(){return this.widget()},_GetImplicitSyncValidators:function(){var e=this._superApply(arguments);return this.options.pattern&&(this._defaultRegExpValidator[n.ValidatorFactory.VALIDATOR_TYPE_REGEXP]=this._getImplicitRegExpValidator()),$.extend(this._defaultRegExpValidator,e)},_GetImplicitAsyncValidators:function(){var e=this._superApply(arguments);return $.extend(this._defaultRegExpAsyncValidator,e)},_CanSetValue:function(){return!!this._super()&&!(this.options.readOnly||!1)},_refreshStateTheming:function(e,t){-1!==Object.keys(this._OPTION_TO_CSS_MAPPING).indexOf(e)&&this.widget().toggleClass(this._OPTION_TO_CSS_MAPPING[e],!!t)},_getImplicitRegExpValidator:function(){if(!this.options.pattern)return null;var e={pattern:this.options.pattern,label:this._getLabelText()};return $.extend(e,this.options.translations.regexp||{}),le.Validation.validatorFactory(n.ValidatorFactory.VALIDATOR_TYPE_REGEXP).createValidator(e)},_GetSubId:function(e){return this.uuid+"_"+e},_IsRTL:function(){return this._rtl},refresh:function(){var e=this._superApply(arguments);return this._rtl="rtl"===this._GetReadingDirection(),this._refreshRequired(this.options.required),e},_refreshRequired:n.EditableValueUtils._refreshRequired,_ValidateReturnBoolean:n.EditableValueUtils._ValidateReturnBoolean,_ValidateReturnPromise:n.EditableValueUtils._ValidateReturnPromise,getNodeBySubId:function(e){return this._super(e)},validate:n.EditableValueUtils.validate,_AriaRequiredUnsupported:function(){return!1},widget:function(){return this._DoWrapElement()?this._wrapper:this.element}},!0),n.__registerWidget("oj.ojInputPassword",$.oj.inputBase,{version:"1.0.0",defaultElement:"<input>",widgetEventPrefix:"oj",_ATTR_CHECK:[{attr:"type",setMandatory:"password"}],_CLASS_NAMES:"oj-inputpassword-input",_WIDGET_CLASS_NAMES:"oj-inputpassword oj-form-control oj-component",options:{converter:null,pattern:"",value:void 0},getNodeBySubId:function(e){var t=this._superApply(arguments);return t||"oj-inputpassword-input"===e.subId&&(t=this.element?this.element[0]:null),t||null},_GetDefaultStyleClass:function(){return"oj-inputpassword"}}),n.__registerWidget("oj.ojInputText",$.oj.inputBase,{version:"1.0.0",defaultElement:"<input>",widgetEventPrefix:"oj",_ATTR_CHECK:[{attr:"type",setMandatory:"text"}],_CLASS_NAMES:"oj-inputtext-input",_WIDGET_CLASS_NAMES:"oj-inputtext oj-form-control oj-component",_ALLOWED_TYPES:["email","number","search","tel","text","url"],_CLICK_HANDLER_KEY:"click",options:{clearIcon:"never",converter:null,list:"",pattern:"",virtualKeyboard:"auto"},_ComponentCreate:function(){var e=this._super(),t=this.options.clearIcon;return this._processClearIconAttr(t),this._AddHoverable(this._wrapper),this._SetInputType(this._ALLOWED_TYPES),e},_processClearIconAttr:function(e){var t=this._wrapper[0],i=t.querySelector("a.oj-inputtext-clear-icon-btn");if("never"===e||this.options.disabled||this.options.readOnly)i&&t.removeChild(i),t.classList.remove("oj-inputtext-clearicon-visible"),t.classList.remove("oj-inputtext-clearicon-conditional");else{var n,o;if(null===i)(i=document.createElement("a")).className="oj-inputtext-clear-icon-btn oj-component-icon oj-clickable-icon-nocontext",i.setAttribute("tabindex","-1"),i.setAttribute("target","_blank"),(n=document.createElement("span")).className="oj-inputtext-clear-icon",i.appendChild(n),t.appendChild(i),i.addEventListener(this._CLICK_HANDLER_KEY,this._onClearIconClickHandler.bind(this));if("always"===e)t.classList.add("oj-inputtext-clearicon-visible");else t.classList.remove("oj-inputtext-clearicon-visible"),t.classList.add("oj-inputtext-clearicon-conditional"),(o=t.classList.contains("oj-complete")?this.element[0].value:this.options.value)&&""!==o?t.classList.remove("oj-form-control-empty-clearicon"):t.classList.add("oj-form-control-empty-clearicon")}},_AfterSetOption:function(e,t){switch(this._super(e,t),e){case"clearIcon":case"value":case"disabled":case"readOnly":this._processClearIconAttr(this.options.clearIcon);break;case"virtualKeyboard":this._SetInputType(this._ALLOWED_TYPES)}},_onInputHandler:function(e){this._super(e);var t=e.target,i=this._wrapper[0];"conditional"===this.options.clearIcon&&(""!==t.value?i.classList.remove("oj-form-control-empty-clearicon"):i.classList.add("oj-form-control-empty-clearicon"))},_onClearIconClickHandler:function(e){var t=this.element[0];t.value="",this._SetRawValue(t.value,e),t.focus(),this._wrapper[0].classList.add("oj-form-control-empty-clearicon")},_onBlurHandler:function(e){var t=this._wrapper[0],i=e.relatedTarget;i&&i.classList.contains("oj-inputtext-clear-icon-btn")&&i.parentElement&&n.DomUtils.isAncestorOrSelf(t,i.parentElement)?t.classList.add("oj-focus"):this._super(e)},getNodeBySubId:function(e){var t=this._superApply(arguments);return t||"oj-inputtext-input"===e.subId&&(t=this.element?this.element[0]:null),t||null},_GetDefaultStyleClass:function(){return"oj-inputtext"},_GetTranslationsSectionName:function(){return"oj-inputBase"},_SetInputType:n.EditableValueUtils._SetInputType}),n.__registerWidget("oj.ojTextArea",$.oj.inputBase,{version:"1.0.0",defaultElement:"<textarea>",widgetEventPrefix:"oj",_ATTR_CHECK:[],_CLASS_NAMES:"oj-textarea-input",_WIDGET_CLASS_NAMES:"oj-textarea oj-form-control oj-component",options:{converter:null,pattern:"",resizeBehavior:"none",rows:void 0},_AfterCreate:function(){var e=this._superApply(arguments);return this._GetContentElement()[0].style.resize=this.options.resizeBehavior,e},_setOption:function(e,t,i){var n=this._superApply(arguments);return"resizeBehavior"===e&&(this._GetContentElement()[0].style.resize=t),n},getNodeBySubId:function(e){var t=this._superApply(arguments);return t||"oj-textarea-input"===e.subId&&(t=this.element?this.element[0]:null),t||null},_GetDefaultStyleClass:function(){return"oj-textarea"},_GetTranslationsSectionName:function(){return"oj-inputBase"},_onKeyUpHandler:function(e){}}),oe.extension._WIDGET_NAME="ojInputPassword",oe.extension._INNER_ELEM="input",oe.extension._GLOBAL_TRANSFER_ATTRS=["accesskey","aria-label","tabindex"],oe.extension._ALIASED_PROPS={readonly:"readOnly"},n.CustomElementBridge.register("oj-input-password",{metadata:oe}),se.extension._WIDGET_NAME="ojInputText",se.extension._INNER_ELEM="input",se.extension._GLOBAL_TRANSFER_ATTRS=["accesskey","aria-label","tabindex"],se.extension._ALIASED_PROPS={readonly:"readOnly"},n.CustomElementBridge.register("oj-input-text",{metadata:se}),re.extension._WIDGET_NAME="ojTextArea",re.extension._INNER_ELEM="textarea",re.extension._GLOBAL_TRANSFER_ATTRS=["accesskey","aria-label","tabindex"],re.extension._ALIASED_PROPS={readonly:"readOnly"},n.CustomElementBridge.register("oj-text-area",{metadata:re}),n.OraI18nUtils={},n.OraI18nUtils.numeringSystems={latn:"0123456789",arab:"",thai:""},n.OraI18nUtils.regexTrim=/^\s+|\s+$|\u200f|\u200e/g,n.OraI18nUtils.regexTrimNumber=/\s+|\u200f|\u200e/g,n.OraI18nUtils.regexTrimRightZeros=/0+$/g,n.OraI18nUtils.zeros=["0","00","000"],n.OraI18nUtils._ISO_DATE_REGEXP=/^[+-]?\d{4}(?:-?\d{2}(?:-?\d{2})?)?(?:T\d{2}:?\d{2}(?::?\d{2}(?:\.\d{1,3})?)?(Z|[+-]\d{2}:\d{2})?)?$|^T\d{2}:?\d{2}(?::?\d{2}(?:\.\d{1,3})?)?(Z|[+-]\d{2}:\d{2})?$/,n.OraI18nUtils.getLocalTimeZoneOffset=function(){var e=(new Date).getTimezoneOffset();return n.OraI18nUtils.getTimeStringFromOffset("Etc/GMT",e,!1,!1)},n.OraI18nUtils.dateToLocalIso=function(e){var t=e;"number"==typeof t&&(t=new Date(t));var i=n.OraI18nUtils.padZeros(t.getFullYear(),4)+"-"+n.OraI18nUtils.padZeros(t.getMonth()+1,2)+"-"+n.OraI18nUtils.padZeros(t.getDate(),2)+"T"+n.OraI18nUtils.padZeros(t.getHours(),2)+":"+n.OraI18nUtils.padZeros(t.getMinutes(),2)+":"+n.OraI18nUtils.padZeros(t.getSeconds(),2);return t.getMilliseconds()>0&&(i+="."+n.OraI18nUtils.trimRightZeros(n.OraI18nUtils.padZeros(t.getMilliseconds(),3))),i},n.OraI18nUtils.partsToIsoString=function(e){var t=n.OraI18nUtils.padZeros(e[0],4)+"-"+n.OraI18nUtils.padZeros(e[1],2)+"-"+n.OraI18nUtils.padZeros(e[2],2)+"T"+n.OraI18nUtils.padZeros(e[3],2)+":"+n.OraI18nUtils.padZeros(e[4],2)+":"+n.OraI18nUtils.padZeros(e[5],2);return e[6]>0&&(t+="."+n.OraI18nUtils.trimRightZeros(n.OraI18nUtils.padZeros(e[6],3))),t},n.OraI18nUtils.isoToLocalDate=function(e){return e&&"string"==typeof e?this._isoToLocalDateIgnoreTimezone(e):null},n.OraI18nUtils._isoToLocalDateIgnoreTimezone=function(e){var t=n.OraI18nUtils._IsoStrParts(e);return new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5],t[6])},n.OraI18nUtils._IsoStrParts=function(e){var t,i=e.split("T"),o=e.indexOf("T"),s=new Date,r=!1,a=[s.getFullYear(),s.getMonth()+1,s.getDate(),0,0,0,0];if(""!==i[0]){n.OraI18nUtils.startsWith(i[0],"-")&&(i[0]=i[0].substr(1),r=!0);var l=i[0].split("-");for(t=0;t<l.length;t++)a[t]=parseInt(l[t],10);r&&(a[0]=-a[0])}if(-1!==o){var u=i[1].split("."),d=u[0].split(":");for(t=0;t<d.length;t++)a[3+t]=parseInt(d[t],10);2===u.length&&u[1]&&(a[6]=parseInt(n.OraI18nUtils.zeroPad(u[1],3,!1),10))}return a},n.OraI18nUtils.getISOStrFormatInfo=function(e){var t={format:null,dateTime:null,timeZone:"",isoStrParts:null},i=n.OraI18nUtils._ISO_DATE_REGEXP.exec(e);return null===i&&n.OraI18nUtils._throwInvalidISOString(e),void 0===i[1]&&void 0===i[2]?(t.format="local",t.dateTime=e,t.isoStrParts=n.OraI18nUtils._IsoStrParts(t.dateTime),t):(t.timeZone=void 0!==i[1]?i[1]:i[2],"Z"===t.timeZone?t.format="zulu":t.format="offset",t.dateTime=e.substring(0,e.indexOf(t.timeZone)),t.isoStrParts=n.OraI18nUtils._IsoStrParts(t.dateTime),t)},n.OraI18nUtils._throwInvalidISOString=function(e){var t=new Error("The string "+e+" is not a valid ISO 8601 string."),i={errorCode:"invalidISOString",parameterMap:{isoStr:e}};throw t.errorInfo=i,t},n.OraI18nUtils.trim=function(e){return(e+"").replace(n.OraI18nUtils.regexTrim,"")},n.OraI18nUtils.trimRightZeros=function(e){return(e+"").replace(n.OraI18nUtils.regexTrimRightZeros,"")},n.OraI18nUtils.trimNumber=function(e){return(e+"").replace(n.OraI18nUtils.regexTrimNumber,"")},n.OraI18nUtils.startsWith=function(e,t){return 0===e.indexOf(t)},n.OraI18nUtils.toUpper=function(e){return e.split("").join(" ").toUpperCase()},n.OraI18nUtils.padZeros=function(e,t){var i=e+"",o=!1;return e<0&&(i=i.substr(1),o=!0),t>1&&i.length<t&&(i=(i=n.OraI18nUtils.zeros[t-2]+i).substr(i.length-t,t)),o&&(i="-"+i),i},n.OraI18nUtils.zeroPad=function(e,t,i){for(var n=""+e,o=n.length;o<t;o+=1)n=i?"0"+n:n+"0";return n},n.OraI18nUtils.getTimeStringFromOffset=function(e,t,i,o){var s=i?t>=0:t<0,r=Math.abs(t),a=Math.floor(r/60),l=r%60,u=s?"-":"+";o&&(a=n.OraI18nUtils.zeroPad(a,2,!0));var d=e+u+a;return(l>0||o)&&(d+=":"+n.OraI18nUtils.zeroPad(l,2,!0)),d},n.OraI18nUtils.getNumberingSystemKey=function(e,t){if(void 0===t)return"latn";var i=n.OraI18nUtils.getNumberingExtension(t),o="symbols-numberSystem-"+i;return void 0===e.numbers[o]&&(i="latn"),i},n.OraI18nUtils.getBCP47Lang=function(e){return e.split("-")[0]},n.OraI18nUtils.getBCP47Region=function(e){var t=e.split("-");return 3===t.length?t[2]:2===t.length&&2===t[1].length?t[1]:"001"},n.OraI18nUtils.getNumberingExtension=function(e){var t=e||"en-US",i=t.indexOf("-u-nu-"),n="latn";return-1!==i&&(n=t.substr(i+6,4)),n},n.OraI18nUtils.haveSamePropertiesLength=function(e){return Object.keys(e).length},n.OraI18nUtils.getLocaleElementsMainNode=function(e){var t=e.main;return t[Object.keys(t)[0]]},n.OraI18nUtils.getLocaleElementsMainNodeKey=function(e){var t=e.main;return Object.keys(t)[0]},n.OraI18nUtils._toBoolean=function(e){if("string"==typeof e)switch(e.toLowerCase().trim()){case"true":case"1":return!0;case"false":case"0":return!1;default:return e}return e},n.OraI18nUtils.getGetOption=function(e,t){if(void 0===e)throw new Error("Internal "+t+" error. Default options missing.");return function(i,o,s,r){if(void 0!==e[i]){var a=e[i];switch(o){case"boolean":a=n.OraI18nUtils._toBoolean(a);break;case"string":a=String(a);break;case"number":a=Number(a);break;default:throw new Error("Internal error. Wrong value type.")}if(void 0!==s&&-1===s.indexOf(a)){for(var l=[],u=0;u<s.length;u++)l.push(s[u]);var d="The value '"+e[i]+"' is out of range for '"+t+"' options property '"+i+"'. Valid values: "+l,h=new RangeError(d),c={errorCode:"optionOutOfRange",parameterMap:{propertyName:i,propertyValue:e[i],propertyValueValid:l,caller:t}};throw h.errorInfo=c,h}return a}return r}},n.OraI18nUtils.matchString=function(e,t,i,o){void 0===o&&(o={sensitivity:"base",usage:"sort"});var s=n.OraI18nUtils.getGetOption(o,"oj.OraI18nUtils.matchString");o.usage=s("usage","string",["sort","search"],"sort"),o.sensitivity=s("sensitivity","string",["base","accent","case","variant"],"base");for(var r=e.length,a=t.length-1,l=0;l<r;l++)for(var u=0;u<3;u++){var d=r-l;if(d=Math.min(d,a+u),0===e.substr(l,d).localeCompare(t,i,o))return[l,l+(d-1)]}return null};var ae={fullYear:{pos:0,pad:4},month:{pos:1,pad:2},date:{pos:2,pad:2},hours:{pos:3,pad:2},minutes:{pos:4,pad:2},seconds:{pos:5,pad:2},milliseconds:{pos:6,pad:3},timeZone:{pos:7}};n.OraI18nUtils.isoToDate=function(e){return new Date(this._normalizeIsoString(e))},n.OraI18nUtils._copyTimeOver=function(e,t){if(!e||!t)throw new Error("Provided invalid arguments");var i=this._normalizeIsoString(t),n=e.indexOf("T"),o=i.indexOf("T");return i.substring(0,o)+(-1!==n?e.substring(n):"T00:00:00.000")},n.OraI18nUtils._clearTime=function(e){return this._dateTime(e,{hours:0,minutes:0,seconds:0,milliseconds:0})},n.OraI18nUtils._dateTime=function(e,t,i){if(!e||!t)throw new Error("Invalid argument invocation");var n,o,s=null,r=ae,a=this.padZeros,l=this._normalizeIsoString(e),u=/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):?(\d{2})?\.?(\d{3})?(.*)?/.exec(l);if(!u)throw new Error("Unable to capture anything");if(u=u.slice(1),Array.isArray(t)){s={};for(var d=0,h=t.length;d<h;d++){var c=t[d];if(c in r){if(o=u[n=r[c].pos],i&&"timeZone"===c)throw new Error("Dude you tried to ask timezone to be parsed");if(i){var p=parseInt(o,10);s[c]=1===n?p-1:p}else s[c]=o}}}else if($.isPlainObject(t)){for(var _=Object.keys(t),m=0;m<_.length;m++){var g=_[m],f=r[g];n=f.pos,o=t[g],1===n&&"number"==typeof o&&(o+=1),u[n]=f.pad?a(o,f.pad):o}s=u[0]+"-"+u[1]+"-"+u[2]+"T"+u[3]+":"+u[4]+":"+u[5]+(u.length>6&&u[6]?"."+u[6]+(8===u.length&&u[7]?u[7]:""):"")}return s},n.OraI18nUtils._normalizeIsoString=function(e){if(!e)throw new Error("Provided invalid arguments");var t,i=(new Date).toISOString(),n=i.substring(0,i.indexOf("T")),o=e.indexOf("T"),s=-1===o?e:e.substring(0,o);return(s=s||n)+(-1!==o?(t=e.substring(o)).split(":").length>1?t:t+":00":"T00:00:00.000")},n.OraI18nUtils.formatString=function(e,t){for(var i=t.length,n=e,o=0;o<i;o++){var s="{"+o+"}";n=n.replace(s,t[o])}return n},n.OraI18nUtils.getInitials=function(e,t){var i,n=0,o=0;if(void 0!==e&&e.length>0&&(n=e.charCodeAt(0)),n>=1536&&n<=1791)return"";if(n>=2304&&n<=2431)return e.charAt(0);if(n>=3584&&n<=3711)return e.charAt(0);if(n>=4352&&n<=4607||n>=12592&&n<=12687||n>=43360&&n<=43391||n>=44032&&n<=55295)return e;if(void 0!==t&&t.length>0&&(n=t.charCodeAt(0)),n>=11904&&n<=12255||n>=12288&&n<=12591||n>=12688&&n<=12799||n>=13056&&n<=19903||n>=19968&&n<=40959||n>=63744&&n<=64255)return t;if(n>=55296&&n<=56319){if(t.length<2)return"";if((o=t.charCodeAt(1))<56320||o>57343)return"";if((i=1024*(n-55296)+(o-56320)+65536)>=110592&&i<=110847||i>=127488&&i<=127743||i>=131072&&i<=173791||i>=173824&&i<=177983||i>=177984&&i<=178207||i>=178208&&i<=183983||i>=194560&&i<=195103)return t}return n="",o="",void 0!==e&&e.length>0&&(n=e.charAt(0).toUpperCase()),void 0!==t&&t.length>0&&(o=t.charAt(0).toUpperCase()),n+o},n.Validation={},n.Validation._converterFactories={},n.Validation._validatorFactories={},n.Validation._defaultConverterFactories={},n.Validation._defaultValidatorFactories={},n.Validation._CONTRACTS={converter:{name:"oj.ConverterFactory",type:n.ConverterFactory},validator:{name:"oj.ValidatorFactory",type:n.ValidatorFactory}},n.Validation.converterFactory=function(e,t){var i;return e&&!t?i=n.Validation._getFactory(e,n.Validation._converterFactories):e&&t&&(i=n.Validation._registerFactory(e,t,n.Validation._converterFactories,n.Validation._CONTRACTS.converter)),i},n.Validation.validatorFactory=function(e,t){var i;return e&&!t?i=n.Validation._getFactory(e,n.Validation._validatorFactories):e&&t&&(i=n.Validation._registerFactory(e,t,n.Validation._validatorFactories,n.Validation._CONTRACTS.validator)),i},n.Validation.getDefaultConverterFactory=function(e){return n.Validation._getFactory(e,n.Validation._defaultConverterFactories)},n.Validation.getDefaultValidatorFactory=function(e){return n.Validation._getFactory(e,n.Validation._defaultValidatorFactories)},n.Validation.__registerDefaultConverterFactory=function(e,t){var i=n.Validation._CONTRACTS.converter;n.Validation._registerFactory(e,t,n.Validation._defaultConverterFactories,i),n.Validation._registerFactory(e,t,n.Validation._converterFactories,i)},n.Validation.__registerDefaultValidatorFactory=function(e,t){var i=n.Validation._CONTRACTS.validator;n.Validation._registerFactory(e,t,n.Validation._defaultValidatorFactories,i),n.Validation._registerFactory(e,t,n.Validation._validatorFactories,i)},n.Validation._doImplementsCheck=function(e,t,i){if(t&&!n.Validation._quacksLike(e,t))throw new Error("Factory instance does not implement the methods expected by the factory of type "+i)},n.Validation._getFactory=function(e,t){n.Assert.assertString(e);return(t[e.toLowerCase()]||{}).instance||null},n.Validation._quacksLike=function(e,t){var i=!0;n.Assert.assertObject(e),n.Assert.assertObject(t);for(var o=Object.keys(t),s=0;s<o.length;s++){var r=o[s];if("function"==typeof t[r]&&(!e[r]||"function"!=typeof e[r])){i=!1;break}}return i},n.Validation._registerFactory=function(e,t,i,o){n.Assert.assertString(e),n.Assert.assertObject(t);var s={};s.instance=t,n.Validation._doImplementsCheck(t,o.type,o.name),i[e.toLowerCase()]=s},n.ConverterFactory={CONVERTER_TYPE_NUMBER:"number",CONVERTER_TYPE_DATETIME:"datetime",CONVERTER_TYPE_COLOR:"color",createConverter:function(e){}},n.ValidatorFactory={VALIDATOR_TYPE_REQUIRED:"required",VALIDATOR_TYPE_REGEXP:"regexp",VALIDATOR_TYPE_NUMBERRANGE:"numberRange",VALIDATOR_TYPE_LENGTH:"length",VALIDATOR_TYPE_DATETIMERANGE:"dateTimeRange",VALIDATOR_TYPE_DATERESTRICTION:"dateRestriction",createValidator:function(e){}},n.Converter=function(e){this.Init(e)},n.Object.createSubclass(n.Converter,n.Object,"oj.Converter"),n.Converter.prototype.Init=function(e){n.Converter.superclass.Init.call(this),this._options=e},n.Converter.prototype.getOptions=function(){return this._options||{}},n.Converter.prototype.resolvedOptions=function(){var e={};return $.extend(e,this._options),e},n.ConverterError=function(e,t){var i={summary:e,detail:t,severity:D.SEVERITY_LEVEL.ERROR};this.Init(i)},n.ConverterError.prototype=new Error,n.ConverterError.prototype.Init=function(e){var t=e.detail,i=e.summary;this._message=e,this.name="Converter Error",this.message=t||i},n.ConverterError.prototype.getMessage=function(){return this._message},n.Validator=function(e){this.Init(e)},n.Object.createSubclass(n.Validator,n.Object,"oj.Validator"),n.Validator.prototype.Init=function(e){n.Validator.superclass.Init.call(this)},n.ValidatorError=function(e,t){var i={summary:e,detail:t,severity:D.SEVERITY_LEVEL.ERROR};this.Init(i)},n.ValidatorError.prototype=new Error,n.ValidatorError.prototype.Init=function(e){var t=e.detail,i=e.summary;this._message=e,this.name="Validator Error",this.message=t||i},n.ValidatorError.prototype.getMessage=function(){return this._message},n.RegExpValidator=function(e){this.Init(e)},n.Object.createSubclass(n.RegExpValidator,n.Validator,"oj.RegExpValidator"),n.RegExpValidator._BUNDLE_KEY_DETAIL="oj-validator.regExp.detail",n.RegExpValidator._BUNDLE_KEY_SUMMARY="oj-validator.regExp.summary",n.RegExpValidator.prototype.Init=function(e){n.RegExpValidator.superclass.Init.call(this),this._options=e},n.RegExpValidator.prototype.validate=function(e){var t,i,o,s=this._options&&this._options.pattern||"";if(null==e||""===e)return!0;var r=e.toString(),a="^("+s+")$",l=r.match(a);if(null===l||l[0]!==r){this._options&&(o=this._options.messageSummary||null,t=this._options.messageDetail||null,i=this._options&&this._options.label||"");var u={label:i,pattern:s,value:r},d=o?v.applyParameters(o,u):v.getTranslatedString(this._getSummaryKey(),u),h=t?v.applyParameters(t,u):v.getTranslatedString(this._getDetailKey(),u);throw new n.ValidatorError(d,h)}return!0},n.RegExpValidator.prototype.getHint=function(){var e=null,t={};return this._options&&this._options.hint&&(t={pattern:this._options.pattern},e=v.applyParameters(this._options.hint,t)),e},n.RegExpValidator.prototype._getSummaryKey=function(){return n.RegExpValidator._BUNDLE_KEY_SUMMARY},n.RegExpValidator.prototype._getDetailKey=function(){return n.RegExpValidator._BUNDLE_KEY_DETAIL},n.RequiredValidator=function(e){this.Init(e)},n.Object.createSubclass(n.RequiredValidator,n.Validator,"oj.RequiredValidator"),n.RequiredValidator._BUNDLE_KEY_DETAIL="oj-validator.required.detail",n.RequiredValidator._BUNDLE_KEY_SUMMARY="oj-validator.required.summary",n.RequiredValidator.prototype.Init=function(e){n.RequiredValidator.superclass.Init.call(this),this._options=e},n.RequiredValidator.prototype.validate=function(e){var t,i,o,s,r,a="";if("number"==typeof e&&0===e||e&&0!==e.length)return!0;throw this._options&&(t=this._options.messageDetail||this._options.message||null,s=this._options.messageSummary||null,a=this._options.label||""),r={label:a},o=s?v.applyParameters(s,r):v.getTranslatedString(this._getSummaryKey(),r),i=t?v.applyParameters(t,r):v.getTranslatedString(this._getDetailKey(),r),new n.ValidatorError(o,i)},n.RequiredValidator.prototype.getHint=function(){var e="";return this._options&&this._options.hint&&(e=v.getTranslatedString(this._options.hint)),e},n.RequiredValidator.prototype._getSummaryKey=function(){return n.RequiredValidator._BUNDLE_KEY_SUMMARY},n.RequiredValidator.prototype._getDetailKey=function(){return n.RequiredValidator._BUNDLE_KEY_DETAIL},function(){function e(e,t){return"#"+function(e,t){return function(e,t,n,o){var s=[i(Math.round(e).toString(16)),i(Math.round(t).toString(16)),i(Math.round(n).toString(16))];if(o&&s[0].charAt(0)===s[0].charAt(1)&&s[1].charAt(0)===s[1].charAt(1)&&s[2].charAt(0)===s[2].charAt(1))return s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0);return s.join("")}(e._r,e._g,e._b,t)}(e,t)}function t(e,t){(function(e){return"string"==typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var i=function(e){return"string"==typeof e&&-1!==e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),i&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function i(e){return 1===e.length?"0"+e:""+e}n.ColorConverter=function(e){this.Init(e)},n.Object.createSubclass(n.ColorConverter,n.Converter,"oj.ColorConverter"),n.ColorConverter.prototype.Init=function(e){(e=e||{}).format=e.format||"rgb",n.ColorConverter.superclass.Init.call(this,e)},n.ColorConverter.prototype.format=function(i){var o=this._getFormat(),s=null;return"rgb"===o?s=i.toString():"hsl"===o?s=function(e){var i=function(e,i,n){e=t(e,255),i=t(i,255),n=t(n,255);var o,s,r=Math.max(e,i,n),a=Math.min(e,i,n),l=(r+a)/2;if(r===a)o=0,s=0;else{var u=r-a;switch(s=l>.5?u/(2-r-a):u/(r+a),r){case e:o=(i-n)/u+(i<n?6:0);break;case i:o=(n-e)/u+2;break;case n:o=(e-i)/u+4}o/=6}return{h:o,s:s,l:l}}(e._r,e._g,e._b),n=Math.round(360*i.h),o=Math.round(100*i.s),s=Math.round(100*i.l);return 1===e._a?"hsl("+n+", "+o+"%, "+s+"%)":"hsla("+n+", "+o+"%, "+s+"%, "+e._a+")"}(i):"hex"===o?s=e(i):"hex3"===o?s=e(i,!0):"hsv"===o?s=function(e){var i=function(e,i,n){e=t(e,255),i=t(i,255),n=t(n,255);var o,s=Math.max(e,i,n),r=Math.min(e,i,n),a=s,l=s-r,u=0===s?0:l/s;if(s===r)o=0;else{switch(s){case e:o=(i-n)/l+(i<n?6:0);break;case i:o=(n-e)/l+2;break;case n:o=(e-i)/l+4}o/=6}return{h:o,s:u,v:a}}(e._r,e._g,e._b),n=Math.round(360*i.h),o=Math.round(100*i.s),s=Math.round(100*i.v);return 1===e._a?"hsv("+n+", "+o+"%, "+s+"%)":"hsva("+n+", "+o+"%, "+s+"%, "+e._a+")"}(i):function(){var e=v.getTranslatedString("oj-converter.color.invalidFormat.summary"),t=v.getTranslatedString("oj-converter.color.invalidFormat.detail");throw new n.ConverterError(e,t)}(),s||n.ColorConverter.superclass.format.call(this,i)},n.ColorConverter.prototype.parse=function(e){try{return new n.Color(e)}catch(e){throw function(){var e=v.getTranslatedString("oj-converter.color.invalidSyntax.summary"),t=v.getTranslatedString("oj-converter.color.invalidSyntax.detail");throw new n.ConverterError(e,t)}()}},n.ColorConverter.prototype.getHint=function(){return this._getFormat()},n.ColorConverter.prototype.resolvedOptions=function(){return{format:this._getFormat()}},n.ColorConverter.prototype._getFormat=function(){return n.ColorConverter.superclass.getOptions.call(this).format}}(),n.IntlConverterUtils={},n.IntlConverterUtils.isoToDate=function(e){return n.OraI18nUtils.isoToDate(e)},n.IntlConverterUtils.isoToLocalDate=function(e){return n.OraI18nUtils.isoToLocalDate(e)},n.IntlConverterUtils.dateToLocalIso=function(e){return n.OraI18nUtils.dateToLocalIso(e)},n.IntlConverterUtils.getLocalTimeZoneOffset=function(){return n.OraI18nUtils.getLocalTimeZoneOffset()},n.IntlConverterUtils.getConverterInstance=function(t){var i="",o={},s=null;if(t&&("object"==typeof t&&(t instanceof n.Converter||t.parse&&"function"==typeof t.parse||t.format&&"function"==typeof t.format?s=t:(i=t.type,o=t.options||{})),!s&&(i=i||t)&&"string"==typeof i)){var r=n.Validation.converterFactory(i);null===r&&e.error("Converter of type "+i+" cannot be found. Make sure the correct converter/validation module is included."),s=r.createConverter(o)}return s},n.IntlConverterUtils._minMaxIsoString=function(e,t){if(e){var i=(t=t||this.dateToLocalIso(new Date)).indexOf("T");0===e.indexOf("T")&&i>0&&(e=t.substring(0,i)+e)}return e},n.IntlConverterUtils.__getConverterOptionError=function(e,t){n.Assert.assertObject(t);var i,o="",s="",r=t.propertyName;if("optionTypesMismatch"===e){var a=t.requiredPropertyName;i=t.requiredPropertyValueValid,o=v.getTranslatedString("oj-converter.optionTypesMismatch.summary",{propertyName:r,propertyValue:t.propertyValue,requiredPropertyName:a}),s=n.IntlConverterUtils._getOptionValueDetailMessage(a,i)}else"optionTypeInvalid"===e?(r=t.propertyName,i=t.propertyValueValid,o=v.getTranslatedString("oj-converter.optionTypeInvalid.summary",{propertyName:r}),s=n.IntlConverterUtils._getOptionValueDetailMessage(r,i)):"optionOutOfRange"===e?(o=v.getTranslatedString("oj-converter.optionOutOfRange.summary",{propertyName:r,propertyValue:t.propertyValue}),i=t.propertyValueValid,s=n.IntlConverterUtils._getOptionValueDetailMessage(r,i)):"optionValueInvalid"===e&&(o=v.getTranslatedString("oj-converter.optionValueInvalid.summary",{propertyName:r,propertyValue:t.propertyValue}),i=t.propertyValueHint,s=n.IntlConverterUtils._getOptionValueDetailMessage(r,i));return new n.ConverterError(o,s)},n.IntlConverterUtils._getOptionValueDetailMessage=function(e,t){var i;return t?("string"==typeof t?i="oj-converter.optionHint.detail":(i="oj-converter.optionHint.detail-plural",t=t.join(v.getTranslatedString("oj-converter.plural-separator"))),v.getTranslatedString(i,{propertyName:e,propertyValueValid:t})):""},n.IntlConverterUtils.__getNullFormattedValue=function(){return""},n.IntlConverterUtils._copyTimeOver=function(e,t){return n.OraI18nUtils._copyTimeOver(e,t)},n.IntlConverterUtils._clearTime=function(e){return n.OraI18nUtils._clearTime(e)},n.IntlConverterUtils._dateTime=function(e,t,i){return n.OraI18nUtils._dateTime(e,t,i)},n.IntlConverterUtils._normalizeIsoString=function(e){return n.OraI18nUtils._normalizeIsoString(e)},n.IntlConverterUtils.getInitials=function(e,t){return n.OraI18nUtils.getInitials(e,t)},n.LengthValidator=function(e){this.Init(e)},n.LengthValidator.defaults={countBy:"codeUnit"},n.Object.createSubclass(n.LengthValidator,n.Validator,"oj.LengthValidator"),n.LengthValidator.prototype.Init=function(e){var t=e.countBy;if(n.LengthValidator.superclass.Init.call(this),this._min=void 0!==e.min?parseInt(e.min,10):null,this._max=void 0!==e.max?parseInt(e.max,10):null,isNaN(this._min))throw new Error("length validator's min option is not a number. min option is "+e.min);if(isNaN(this._max))throw new Error("length validator's max option is not a number. max option is "+e.min);if(null!==this._min&&this._min<0)throw new Error("length validator's min option cannot be less than 0. min option is "+e.min);if(null!==this._max&&this._max<1)throw new Error("length validator's max option cannot be less than 1. max option is "+e.max);this._countBy=void 0===t?n.LengthValidator.defaults.countBy:t,e&&(this._hint=e.hint||{},this._customMessageSummary=e.messageSummary||{},this._customMessageDetail=e.messageDetail||{})},n.LengthValidator.prototype.getHint=function(){var e,t=null,i=this._hint,n=i.exact,o=i.inRange,s=i.max,r=i.min,a=this._max,l=this._min,u=v;return null!==l&&null!==a?l!==a?(e={min:l,max:a},t=o?u.applyParameters(o,e):u.getTranslatedString("oj-validator.length.hint.inRange",e)):(e={length:l},t=n?u.applyParameters(n,e):u.getTranslatedString("oj-validator.length.hint.exact",e)):null!==l?(e={min:l},t=r?u.applyParameters(r,e):u.getTranslatedString("oj-validator.length.hint.min",e)):null!==a&&(e={max:a},t=s?u.applyParameters(s,e):u.getTranslatedString("oj-validator.length.hint.max",e)),t},n.LengthValidator.prototype.validate=function(e){var t,i=this._customMessageDetail,o=this._customMessageSummary,s="",r=this._max,a=o.tooLong,l=o.tooShort,u=i.tooLong,d=i.tooShort,h=this._min,c="",p=v,_=""+e,m=this._getLength(_);if((null===h||m>=this._min)&&(null===r||m<=this._max))return _;throw m<this._min?(t={value:e,min:h},c=l?p.applyParameters(l,t):p.getTranslatedString("oj-validator.length.messageSummary.tooShort"),s=d?p.applyParameters(d,t):p.getTranslatedString("oj-validator.length.messageDetail.tooShort",t)):(t={value:e,max:r},c=a?p.applyParameters(a,t):p.getTranslatedString("oj-validator.length.messageSummary.tooLong"),s=u?p.applyParameters(u,t):p.getTranslatedString("oj-validator.length.messageDetail.tooLong",t)),new n.ValidatorError(c,s)},n.LengthValidator.prototype._getLength=function(e){var t,i=this._countBy.toLowerCase(),o=e.length,s=0;switch(i){case"codepoint":for(var r=0;r<o;r++)55296==(63488&e.charCodeAt(r))&&(s+=1);n.Assert.assert(s%2==0,"the number of surrogate chars must be an even number."),t=o-s/2;break;case"codeunit":default:t=o}return t},n.ColorConverterFactory=function(){return{createConverter:function(e){return function(e){return new n.ColorConverter(e)}(e)}}}(),n.Validation.__registerDefaultConverterFactory(n.ConverterFactory.CONVERTER_TYPE_COLOR,n.ColorConverterFactory),n.RequiredValidatorFactory=function(){return{createValidator:function(e){return function(e){return new n.RequiredValidator(e)}(e)}}}(),n.Validation.__registerDefaultValidatorFactory(n.ValidatorFactory.VALIDATOR_TYPE_REQUIRED,n.RequiredValidatorFactory),n.RegExpValidatorFactory=function(){return{createValidator:function(e){return function(e){return new n.RegExpValidator(e)}(e)}}}(),n.Validation.__registerDefaultValidatorFactory(n.ValidatorFactory.VALIDATOR_TYPE_REGEXP,n.RegExpValidatorFactory),n.LengthValidatorFactory=function(){return{createValidator:function(e){return function(e){return new n.LengthValidator(e)}(e)}}}(),n.Validation.__registerDefaultValidatorFactory(n.ValidatorFactory.VALIDATOR_TYPE_LENGTH,n.LengthValidatorFactory),n.LocaleData=bn;var le={};le.ColorConverter=n.ColorConverter,le.IntlConverterUtils=n.IntlConverterUtils,le.LengthValidator=n.LengthValidator,le.RegExpValidator=n.RegExpValidator,le.RequiredValidator=n.RequiredValidator,le.Validation=n.Validation,n.NumberConverter=function(){this.Init()},n.Object.createSubclass(n.NumberConverter,n.Converter,"oj.NumberConverter"),n.NumberConverter.prototype.Init=function(e){n.NumberConverter.superclass.Init.call(this,e)},n.NumberConverter.prototype.format=function(e){return n.NumberConverter.superclass.format.call(this,e)},n.NumberConverter.prototype.parse=function(e){return n.NumberConverter.superclass.parse.call(this,e)},n.NumberRangeValidator=function(e){this.Init(e)},n.Object.createSubclass(n.NumberRangeValidator,n.Validator,"oj.NumberRangeValidator"),n.NumberRangeValidator.prototype.Init=function(e){n.NumberRangeValidator.superclass.Init.call(this),e&&(this._min=e.min,this._max=e.max,this._converter=le.IntlConverterUtils.getConverterInstance(e.converter),this._hint=e.hint||{},this._customMessageSummary=e.messageSummary||{},this._customMessageDetail=e.messageDetail||{})},n.NumberRangeValidator.prototype.validate=function(e){var t=e?e.toString():e,i=parseFloat(t),o=this._customMessageSummary,s=this._customMessageDetail,r=s.rangeOverflow,a=s.rangeUnderflow,l=s.exact,u=o.rangeOverflow,d=o.rangeUnderflow,h=void 0!==this._min?parseFloat(this._min):null,c=void 0!==this._max?parseFloat(this._max):null,p=h&&this._converter?this._converter.format(h):h,_=c&&this._converter?this._converter.format(c):c,m="",g="",f=null,y=v;if(null===e)return e;if(null!==h&&null!==c){if(i>=h&&i<=c||h>c)return t}else if(null!==h){if(i>=h)return t}else if(null===c||i<=c)return t;throw null!==c&&null!==h&&h===c?(f={value:e,num:_},g=l?y.applyParameters(l,f):y.getTranslatedString("oj-validator.range.number.messageDetail.exact",f),i>c?m=u||y.getTranslatedString("oj-validator.range.number.messageSummary.rangeOverflow"):i<h&&(m=u?d:y.getTranslatedString("oj-validator.range.number.messageSummary.rangeUnderflow"))):null!==c&&i>c?(f={value:e,max:_},m=u||y.getTranslatedString("oj-validator.range.number.messageSummary.rangeOverflow"),g=r?y.applyParameters(r,f):y.getTranslatedString("oj-validator.range.number.messageDetail.rangeOverflow",f)):(f={value:e,min:p},m=d||y.getTranslatedString("oj-validator.range.number.messageSummary.rangeUnderflow"),g=a?y.applyParameters(a,f):y.getTranslatedString("oj-validator.range.number.messageDetail.rangeUnderflow",f)),new n.ValidatorError(m,g)},n.NumberRangeValidator.prototype.getHint=function(){var e=null,t=this._hint,i=t.inRange,n=t.exact,o=t.min,s=t.max,r=v,a=void 0!==this._min?parseFloat(this._min):null,l=void 0!==this._max?parseFloat(this._max):null,u=a&&this._converter?this._converter.format(a):a,d=l&&this._converter?this._converter.format(l):l;return null!==a&&null!==l?e=a!==l?i?r.applyParameters(i,{min:u,max:d}):r.getTranslatedString("oj-validator.range.number.hint.inRange",{min:u,max:d}):n?r.applyParameters(n,{num:u}):r.getTranslatedString("oj-validator.range.number.hint.exact",{num:u}):null!==a?e=o?r.applyParameters(o,{min:u}):r.getTranslatedString("oj-validator.range.number.hint.min",{min:u}):null!==l&&(e=s?r.applyParameters(s,{max:d}):r.getTranslatedString("oj-validator.range.number.hint.max",{max:d})),e},n.NumberConverterFactory=function(){return{createConverter:function(e){return function(e){return new n.IntlNumberConverter(e)}(e)}}}(),le.Validation.__registerDefaultConverterFactory(n.ConverterFactory.CONVERTER_TYPE_NUMBER,n.NumberConverterFactory),n.NumberRangeValidatorFactory=function(){return{createValidator:function(e){return function(e){return new n.NumberRangeValidator(e)}(e)}}}(),le.Validation.__registerDefaultValidatorFactory(n.ValidatorFactory.VALIDATOR_TYPE_NUMBERRANGE,n.NumberRangeValidatorFactory);var ue={};ue.NumberConverter=n.NumberConverter,ue.NumberRangeValidator=n.NumberRangeValidator,ue.IntlNumberConverter=n.IntlNumberConverter,n.IntlNumberConverter=function(e){this.Init(e)},n.Object.createSubclass(n.IntlNumberConverter,n.NumberConverter,"oj.IntlNumberConverter"),n.IntlNumberConverter.prototype.Init=function(e){n.IntlNumberConverter.superclass.Init.call(this,e)},n.IntlNumberConverter.prototype._getWrapped=function(){return this._wrapped||(this._wrapped=he.getInstance()),this._wrapped},n.IntlNumberConverter.prototype.format=function(e){if(null==e||"string"==typeof e&&0===n.StringUtils.trim(""+e).length||"number"==typeof e&&isNaN(e))return le.IntlConverterUtils.__getNullFormattedValue();var t=p.getLocale(),i=bn.__getBundle(),o=this.resolvedOptions();try{return this._getWrapped().format(e,i,o,t)}catch(t){throw this._processConverterError(t,e)}},n.IntlNumberConverter.prototype.getHint=function(){return null},n.IntlNumberConverter.prototype.getOptions=function(){return n.IntlNumberConverter.superclass.getOptions.call(this)},n.IntlNumberConverter.prototype.parse=function(e){var t,i,o;if(null==e||""===e)return null;t=p.getLocale(),i=bn.__getBundle(),o=this.resolvedOptions();try{return this._getWrapped().parse(n.StringUtils.trim(e),i,o,t)}catch(t){throw this._processConverterError(t,e)}},n.IntlNumberConverter.prototype.resolvedOptions=function(){var t,i=p.getLocale();if(i!==this._locale||!this._resolvedOptions){t=n.LocaleData.__getBundle();try{if(!t)return e.error("locale bundle for the current locale %s is unavailable",i),{};this._resolvedOptions=this._getWrapped().resolvedOptions(t,this.getOptions(),i),this._locale=i}catch(e){throw this._processConverterError(e)}}return this._resolvedOptions},n.IntlNumberConverter.prototype._processConverterError=function(e,t){var i,o,s,r,a=e.errorInfo;if(a){var l=a.errorCode,u=a.parameterMap;switch(n.Assert.assertObject(u),l){case"optionTypesMismatch":case"optionTypeInvalid":case"optionOutOfRange":case"optionValueInvalid":i=le.IntlConverterUtils.__getConverterOptionError(l,u);break;case"decimalFormatMismatch":s="oj-converter.number.decimalFormatMismatch.summary";break;case"currencyFormatMismatch":s="oj-converter.number.currencyFormatMismatch.summary";break;case"percentFormatMismatch":s="oj-converter.number.percentFormatMismatch.summary";break;case"unsupportedParseFormat":r=v.getTranslatedString("oj-converter.number.shortLongUnsupportedParse.summary"),o=v.getTranslatedString("oj-converter.number.shortLongUnsupportedParse.detail"),i=new n.ConverterError(r,o)}s&&(r=v.getTranslatedString(s,{value:t||u.value,format:u.format}),o=v.getTranslatedString("oj-converter.hint.detail",{exampleValue:this._getHintValue()}),i=new n.ConverterError(r,o))}return i||(r=e.message,o=e.message,i=new n.ConverterError(r,o)),i},n.IntlNumberConverter.prototype._getHintValue=function(){var t="";try{t=this.format(12345.98765)}catch(i){i instanceof n.ConverterError&&(t="",e.error("error retrieving hint value in format"))}return t};var de,he=function(){var t,i=/^[+-]?infinity$/i,o=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,s=/([^+-.0-9]*)([+-]?\d*\.?\d*(E[+-]?\d+)?).*$/,r=/([\^$.*+?|\[\](){}])/g,a=/(^0\.0*)([^0].*$)/,l=/^0+$/,u={trillion:[1e14,1e13,1e12],billion:[1e11,1e10,1e9],million:[1e8,1e7,1e6],thousand:[1e5,1e4,1e3]},d={trillion:1e12,billion:1e9,million:1e6,thousand:1e3},h={HALF_UP:"ceil",HALF_DOWN:"floor",DEFAULT:"round"},c=1024,p=1048576,_=1073741824,m=1099511627776;function g(e,t,i){var n;for(n=e.length;n<t;n+=1)e=i?"0"+e:e+"0";return e}function f(e,t,i,n,o){var s=e[t];return void 0!==s?(s=Number(s),(isNaN(s)||s<i||s>n)&&function(e,t,i,n){var o=new RangeError(e+" is out of range.  Enter a value between "+t+" and "+i+" for "+n),s={errorCode:"numberOptionOutOfRange",parameterMap:{value:e,minValue:t,maxValue:i,propertyName:n}};throw o.errorInfo=s,o}(s,i,n,t),Math.floor(s)):o}function v(e){var t=e||"en-US",i=t.indexOf("-u-nu-"),n="latn";return-1!==i&&(n=t.substr(i+6,4)),n}function y(t,i,o,s){var r,a=i,l=n.OraI18nUtils.getLocaleElementsMainNode(t),u=function(e,t){if(void 0===t)return"latn";var i=v(t),n="symbols-numberSystem-"+i;return void 0===e.numbers[n]&&(i="latn"),i}(l,s);a.numberingSystemKey=u,a.numberingSystem="symbols-numberSystem-"+u;var d=o.lenientParse;if(a.lenientParse=d||"full",a.style=o.style,void 0!==o.pattern&&o.pattern.length>0)r=o.pattern;else{var h;switch(a.style){case"decimal":h="decimalFormats-numberSystem-";break;case"currency":h="currencyFormats-numberSystem-";break;case"percent":h="percentFormats-numberSystem-";break;default:h="decimalFormats-numberSystem-"}h+=a.numberingSystemKey,r=l.numbers[h].standard;var c=o.decimalFormat;void 0===c&&(c=o.currencyFormat),void 0===c||"decimal"!==a.style&&"currency"!==a.style||(a.shortDecimalFormat=l.numbers["decimalFormats-numberSystem-latn"][c].decimalFormat)}var p=l.numbers[a.numberingSystem].decimal,_=l.numbers[a.numberingSystem].group,m=o.separators;if(void 0!==m){a.separators=m;var g=m.decimal,y=m.group;void 0!==g&&""!==g&&(p=m.decimal),void 0!==y&&(_=m.group)}var C=n.OraI18nUtils.getLocaleElementsMainNodeKey(t),S=C.split("-")[0];if(a.plurals=t.supplemental.plurals,a.lang=S,a.pat=r,a.minusSign=l.numbers[a.numberingSystem].minusSign,a.decimalSeparator=p,a.exponential=l.numbers[a.numberingSystem].exponential,a.groupingSeparator=_,a.currencyDisplay=o.currencyDisplay,void 0!==o.currency&&(a.currencyCode=o.currency.toUpperCase()),void 0!==o.unit&&(a.unit=o.unit.toLowerCase()),function(e,t,i,n){for(var o,s=n,r=!1,a=!1,l=0,u=0,d=!0,h=1;h>=0&&u<t.length;--h){var c=!1,p="",_="",m=-1,g=1,f=0,v=0,y=0,C=-1,S=-1,E=0;d=!0;for(var T=u;T<t.length;++T){var D=t.charAt(T);switch(E){case 0:case 2:if(c){if(D===V){T+1<t.length&&t.charAt(T+1)===V?(T+=1,d?p=p.concat("''"):_=_.concat("''")):c=!1;continue}}else{if(D===k||D===N||D===P||D===j){E=1,T-=1;continue}if(D===G){void 0===e.currency&&b("style"),s.style="currency";var A=T+1<t.length&&t.charAt(T+1)===G;A&&(T+=1),d?p=p.concat(A?"'":"'"):_=_.concat(A?"'":"'");continue}if(D===V){if(D===V){T+1<t.length&&t.charAt(T+1)===V?(T+=1,d?p=p.concat("''"):_=_.concat("''")):c=!0;continue}}else{if(D===U){0!==E&&0!==h||z(t),u=T+1,T=t.length;continue}if(D===M){s.style="percent",1!==g&&z(t),s.isPercent=!0,g=100,d?p=p.concat("'%"):_=_.concat("'%");continue}if(D===H){1!==g&&z(t),s.style="perMill",s.isPerMill=!0,g=1e3,d?p=p.concat("'"):_=_.concat("'");continue}if(D===F){d?p=p.concat("'-"):_=_.concat("'-");continue}}}d?p=p.concat(D):_=_.concat(D);break;case 1:if(1!==h){0===(l-=1)&&(E=2,d=!1);continue}if(l+=1,D===k)v>0?y+=1:f+=1,C>=0&&m<0&&(C+=1);else if(D===N)y>0&&z(t),v+=1,C>=0&&m<0&&(C+=1);else if(D===P)S=C,C=0;else{if(D!==j){if(q=T,X=B,void 0,void 0,Z=t.substr(q,X.length),null!==new RegExp(X,"i").exec(Z)){for(a&&z(t),a=!0,o=0,T+=B.length;T<t.length&&t.charAt(T)===N;)o+=1,l+=1,T+=1;(f+v<1||o<1)&&z(t),E=2,d=!1,T-=1;continue}E=2,d=!1,T-=1,l-=1;continue}m>=0&&z(t),m=f+v+y}}}if(0===v&&f>0&&m>=0){var I=m;0===I&&(I+=1),y=f-I,f=I-1,v=1}if((m<0&&y>0||m>=0&&(m<f||m>f+v)||0===C||c)&&z(t),1===h){x=w=p,L=R=_;var O=f+v+y,W=m>=0?m:O;s.minimumIntegerDigits=W-f,s.maximumIntegerDigits=a?f+s.minimumIntegerDigits:$,s.maximumFractionDigits=m>=0?O-m:0,s.minimumFractionDigits=m>=0?f+v-m:0,s.groupingSize=C>0?C:0,s.groupingSize0=S}else x=p,L=_,r=!0}var q,X,Z;0===t.length&&(w="",R="",s.minimumIntegerDigits=0,s.maximumIntegerDigits=$,s.minimumFractionDigits=0,s.maximumFractionDigits=K);s.useExponentialNotation=a,s.minExponentDigits=o,(!r||0===x.localeCompare(w)&&0===L.localeCompare(R))&&("currency"===s.style&&"ar"===s.lang?(L=R+"'-",x=w):(L=R,x="'-"+w));!function(e,t){var i=t,n={};null!==w&&(i.positivePrefix=Y(w,e,i,n));null!==R&&(i.positiveSuffix=Y(R,e,i,n));null!==x&&(i.negativePrefix=Y(x,e,i,n));null!==L&&(i.negativeSuffix=Y(L,e,i,n));void 0!==n.name&&(i.positiveSuffix=""+n.name,i.positivePrefix="","ar"===i.lang?(i.negativeSuffix=e.numbers[i.numberingSystem].minusSign+""+n.name,i.negativePrefix=""):(i.negativeSuffix=""+n.name,i.negativePrefix=e.numbers[i.numberingSystem].minusSign))}(i,s)}(o,r,l,a),void 0===o.pattern&&(a.minimumIntegerDigits=f(o,"minimumIntegerDigits",1,21,a.minimumIntegerDigits),void 0!==o.maximumFractionDigits&&(a.maximumFractionDigits=f(o,"maximumFractionDigits",0,20,a.maximumFractionDigits),a.maximumFractionDigits<a.minimumFractionDigits&&(a.minimumFractionDigits=a.maximumFractionDigits)),void 0!==o.minimumFractionDigits&&(a.minimumFractionDigits=f(o,"minimumFractionDigits",0,20,a.minimumFractionDigits)),a.maximumFractionDigits<a.minimumFractionDigits&&(a.maximumFractionDigits=a.minimumFractionDigits,e.info("maximumFractionDigits is less than minimumFractionDigits, so maximumFractionDigits will be set to minimumFractionDigits")),"currency"===a.style&&void 0===o.minimumFractionDigits)){var E=t.supplemental.currencyData.fractions[o.currency];if(void 0!==E){var T=parseInt(E._digits,10);a.minimumFractionDigits=T,a.maximumFractionDigits=T}}}function b(e){var t=new TypeError('The property "currency" is required when the property "'+e+'" is "currency". An accepted value is a three-letter ISO 4217 currency code.'),i={errorCode:"optionTypesMismatch",parameterMap:{propertyName:e,propertyValue:"currency",requiredPropertyName:"currency",requiredPropertyValueValid:"a three-letter ISO 4217 currency code"}};throw t.errorInfo=i,t}function C(e,t){var i=n.OraI18nUtils.getGetOption(e,t),o=i("style","string",["currency","decimal","percent","unit","perMill"],"decimal");if("decimal"===o||"currency"===o){var s="decimal"===o?"decimalFormat":"currencyFormat";o=i(s,"string",["standard","short","long"]),"OraNumberConverter.parse"===t&&void 0!==o&&"standard"!==o&&function(e){var t=new Error("long and short "+e+" are not supported for parsing"),i={errorCode:"unsupportedParseFormat",parameterMap:{shortFormats:e}};throw t.errorInfo=i,t}(s)}var r=i("currency","string");"currency"===o&&void 0===r&&b("style"),r=i("unit","string"),"unit"===o&&void 0===r&&function(e){var t=new TypeError('The property "unit" is required when the property "'+e+'" is "unit". An accepted value is "byte" or "bit".'),i={errorCode:"optionTypesMismatch",parameterMap:{propertyName:e,propertyValue:"unit",requiredPropertyName:"unit",requiredPropertyValueValid:"byte or bit"}};throw t.errorInfo=i,t}("style")}function S(e,t,i){var n=i.groupingSize,o=i.groupingSize0,s=i.decimalSeparator,r=e+"",a=r.split(/e/i),u=a.length>1?parseInt(a[1],10):0,d=(a=(r=a[0]).split(".")).length>1?a[1]:"",h=Math.min(i.maximumFractionDigits,d.length-u);a.length>1&&d.length>u&&(e=E(e,h,t.roundingMode||"DEFAULT"));u=(a=(r=e+"").split(/e/i)).length>1?parseInt(a[1],10):0,r=(a=(r=a[0]).split("."))[0],d=a.length>1?a[1]:"",u>0?(r+=(d=g(d,u,!1)).slice(0,u),d=d.substr(u)):u<0&&(d=(r=g(r,(u=-u)+1,!0)).slice(-u,r.length)+d,r=r.slice(0,-u)),h>0&&d.length>0?(d=d.length>h?d.slice(0,h):g(d,h,!1),!0===l.test(d)&&(d=d.slice(0,i.minimumFractionDigits)),d=s+d):d=i.minimumFractionDigits>0?s:"",d=g(d,s.length+i.minimumFractionDigits,!1);var c=i.groupingSeparator,p="";!1===t.useGrouping&&void 0===t.pattern&&(c="");var _=(r=g(r,i.minimumIntegerDigits,!0)).length-1;for(d=d.length>1?d:"";_>=0;){if(0===n||n>_)return r.slice(0,_+1)+(p.length?c+p+d:d);p=r.slice(_-n+1,_+1)+(p.length?c+p:""),_-=n,o>0&&(n=o)}return r.slice(0,_+1)+c+p+d}function E(e,t,i){var n=e.toString().split(".");if(void 0===n[1])return e;if("5"===n[1][t]&&"DEFAULT"!==i){var o=function(e,t,i){if("HALF_DOWN"===i||"HALF_EVEN"===i){var n=e.substr(t);(n=parseInt(n,10))>5&&(i="HALF_UP")}return i}(n[1],t,i);return function(e,t,i,n){if(0===t)return"5"===n[1][0]?Math[i](e):Math.round(e);var o=e.toString().split("e"),s=o[0],r=o[1],a=s+"e"+(r?parseInt(r,10)-t:-t),l=parseFloat(a),u=Math[i](l);return o=u.toString().split("e"),s=o[0],r=o[1],a=s+"e"+(r?parseInt(r,10)+t:t),l=parseFloat(a)}(e,-t,o=function(e,t,i){var n=h[t];if("HALF_EVEN"===t){var o;if(0===i){var s=e[0].length;o=parseInt(e[0][s-1],10)}else o=parseInt(e[1][i-1],10);n=o%2==0?h.HALF_DOWN:h.HALF_UP}return n}(n,o,t),n)}var s=Math.pow(10,t),r=Math.round(e*s)/s;return isFinite(r)?r:e}function T(e,t,i,o,s){var r=n.OraI18nUtils.getLocaleElementsMainNode(i);if(!isFinite(e))return e===1/0?r.numbers[o.numberingSystem].infinity:e===-1/0?r.numbers[o.numberingSystem].infinity:r.numbers[o.numberingSystem].nan;var l=Math.abs(e);!0===o.isPercent||"percent"===o.style?l*=100:!0===o.isPerMill&&(l*=1e3);var h=t.decimalFormat;void 0===h&&(h=t.currencyFormat);var f=o.style;l="decimal"!==f&&"currency"!==f||void 0===h||"standard"===h?!0===o.useExponentialNotation?function(e,t){var i=e+"",n=0,o=i.split(/e/i),s=o[0];a.lastIndex=0;var r=a.exec(s);null!==r?(n=r[1].length-1,s=r[2]):s=s.replace(".","");var l=o.length>1?parseInt(o[1],10):0,u=parseInt(s,10),d=t.minimumIntegerDigits+t.maximumFractionDigits;if(s.length>d){d-=s.length;var h=Math.pow(10,d);u=Math.round(u*h)}var c=t.minimumIntegerDigits+t.minimumFractionDigits;u=g(u+="",c,!1),-1!==i.indexOf(".")?l-=t.minimumIntegerDigits-i.indexOf(".")+n:l-=c-s.length-t.minimumFractionDigits;var p=Math.abs(l);p=g(p+"",t.minExponentDigits,!0),l<0&&(p=t.minusSign+p);var _=u.slice(0,t.minimumIntegerDigits);return u.slice(t.minimumIntegerDigits).length>0?_+=t.decimalSeparator+u.slice(t.minimumIntegerDigits)+t.exponential+p:_+=t.exponential+p,_}(l,o):"unit"===f?function(e,t,i,o){var s,r;e>=m?(s="digital-tera",r=e/m):e>=_?(s="digital-giga",r=e/_):e>=p?(s="digital-mega",r=e/p):e>=c?(s="digital-kilo",r=e/c):(s="digital-",r=e),s+=i.unit;var a=i.lang,l=i.plurals[a](r);l="unitPattern-count-"+l;var u=S(r,t,i),d=o.units.narrow[s][l];return u=n.OraI18nUtils.formatString(d,[u])}(l,t,o,r):S(l,t,o):function(e,t,i){var n,o,s,r=function(e){for(var t=Object.keys(u),i=0;i<t.length;i++)for(var n=t[i],o=u[n].length,s=0;s<o;s++)if(u[n][s]<=e)return[n,u[n][s]];return[e,null]}(e),a="";if(null!==r[1]){var l=i.lang,h=i.plurals[l](Math.floor(e/d[r[0]]));if(n=r[1]+"-count-"+h,void 0===(n=i.shortDecimalFormat[n])&&(h="other",n=r[1]+"-count-"+h,n=i.shortDecimalFormat[n]),s=(o=function(e){var t=0,i=0,n=0,o="";if("0"!==e[0]){for(;"0"!==e[t]&&t<e.length;)t+=1;o=e.substr(0,t),n=t}for(t=n;t<e.length&&"0"===e[t];t++)i+=1;return[o,i]}(n))[1],a=o[0],s<n.length){var c=1*Math.pow(10,s);e/=c=r[1]/c*10}}var p="";return void 0!==n&&(p=n.substr(s+o[0].length)),p=a+S(e,t,i)+(p=p.replace(/'\.'/g,"."))}(l,t,o);var y="";y+=e<0&&l-0!=0?o.negativePrefix+l+o.negativeSuffix:o.positivePrefix+l+o.positiveSuffix;var b=v(s);if(void 0===n.OraI18nUtils.numeringSystems[b]&&(b="latn"),"latn"!==b){var C,E=[];for(C=0;C<y.length;C++)y[C]>="0"&&y[C]<="9"?E.push(n.OraI18nUtils.numeringSystems[b][y[C]]):E.push(y[C]);return E.join("")}return y}function D(e,t){var i=t.groupingSeparator,o=t.decimalSeparator,r=t.minusSign,a="",l="",u=n.OraI18nUtils.toUpper(t.exponential),d=n.OraI18nUtils.toUpper(e),h=i;d=(d=d.split(u).join("E")).split(h).join("");var c=h.replace(/\u00A0/g," ");h!==c&&(d=d.split(c).join("")),"."===(d=d.split(o).join(".")).charAt(0)&&(d=d.substr(1),l="."),d=d.replace(r,"-");var p=l+s.exec(d)[2];return n.OraI18nUtils.startsWith(p,"-")?(p=p.substr("-".length),a="-"):n.OraI18nUtils.startsWith(d,"+")&&(p=p.substr("+".length),a="+"),[a,p]}function A(e,t,i,o){return isNaN(e)&&I(i.style,i,o),!0===i.isPercent||"percent"===i.style?e/=100:!0===i.isPerMill&&(e/=1e3),n.OraI18nUtils.getGetOption(t,"OraNumberConverter.parse")("roundDuringParse","boolean",[!0,!1],!1)&&(e=function(e,t,i){var n=t.maximumFractionDigits,o=e<0,s=i.roundingMode||"DEFAULT",r=E(Math.abs(e),n,s);return o?-r:r}(e,i,t)),e}function I(e,t,i){var n,o="Unparsable number "+i+" The expected number pattern is "+t.pat;switch(e){case"decimal":n="decimalFormatMismatch";break;case"currency":n="currencyFormatMismatch";break;case"percent":n="percentFormatMismatch"}var s=new Error(o),r={errorCode:n,parameterMap:{value:i,format:t.pat}};throw s.errorInfo=r,s}function O(e,t,s,a){var l=n.OraI18nUtils.getLocaleElementsMainNode(t),u={},d=function(e,t){var i,o=v(t);if(void 0===n.OraI18nUtils.numeringSystems[o])return e;var s=[];for(i=0;i<e.length;i++){var r=n.OraI18nUtils.numeringSystems[o].indexOf(e[i]);-1!==r?s.push(r):s.push(e[i])}return s.join("")}(e,a);y(t,u,s,a);var h=NaN,c=d.replace(/ /g,"");if(i.test(c))return h=parseFloat(d);var p=function(e,t,i,o){var s,a=n.OraI18nUtils.trimNumber(e),l="",u=!1,d=o.numbers[i.numberingSystem].plusSign,h=new RegExp("^"+d.replace(r,"\\$1"));a=a.replace(h,"");var c=n.OraI18nUtils.trimNumber(i.positivePrefix),p=n.OraI18nUtils.trimNumber(i.positiveSuffix),_=n.OraI18nUtils.trimNumber(i.negativePrefix),m=n.OraI18nUtils.trimNumber(i.negativeSuffix),g=new RegExp("^"+(c||"").replace(r,"\\$1")),f=new RegExp((p||"").replace(r,"\\$1")+"$"),v=new RegExp("^"+(_||"").replace(r,"\\$1")),y=new RegExp((m||"").replace(r,"\\$1")+"$");if(!0===v.test(a)&&!0===y.test(a))a=(a=a.replace(v,"")).replace(y,""),l="-",u=!0;else if(!0===g.test(a)&&!0===f.test(a))a=(a=a.replace(g,"")).replace(f,""),l="+",u=!0;else if("currency"===i.style){var b,C=i.currencyCode,S=C;if(void 0!==o.numbers.currencies[C]&&(S=o.numbers.currencies[C].symbol),void 0===i.currencyDisplay||"symbol"===i.currencyDisplay?b=S:"code"===i.currencyDisplay&&(b=C),void 0!==b){var E=(c||"").replace(b,""),T=(p||"").replace(b,""),A=(_||"").replace(b,""),O=(m||"").replace(b,"");g=new RegExp(("^"+E).replace(r,"\\$1")),f=new RegExp(T.replace(r,"\\$1")+"$"),v=new RegExp(("^"+A).replace(r,"\\$1")),y=new RegExp(O.replace(r,"\\$1")+"$"),!0===v.test(a)&&!0===y.test(a)?(a=(a=a.replace(v,"")).replace(y,""),l="-",u=!0):!0===g.test(a)&&!0===f.test(a)&&(a=(a=a.replace(g,"")).replace(f,""),l="+",u=!0)}}return u?s=[l,a]:"full"===i.lenientParse?(s=D(a,i))[2]=!0:I(i.style,i,e),s}(d,0,u,l),_=p[0],m=p[1];if(_=_||"+",p[2])return A(h=parseFloat(_+m),s,u,e);var g=function(e,t){var i,o,s={},r=t.decimalSeparator,a=t.groupingSeparator,l=e.replace(/ /g,""),u=t.exponential,d=l.indexOf(u.toLowerCase());d<0&&(d=l.indexOf(n.OraI18nUtils.toUpper(u))),d<0?(o=l,s.exponent=null):(o=l.substr(0,d),s.exponent=l.substr(d+u.length));var h=r,c=o.indexOf(h);c<0?(i=o,s.fraction=null):(i=o.substr(0,c),s.fraction=o.substr(c+h.length)),i=i.split(a).join("");var p=a.replace(/\u00A0/g," ");return a!==p&&(i=i.split(p).join("")),s.integer=i,s}(m,u),f=g.integer,b=g.fraction,C=g.exponent,S=_+f;if(null!==b&&(S+="."+b),null!==C){var E=function(e,t){var i,o=t.minusSign,s=t.plusSign,r=n.OraI18nUtils.trimNumber(e);return o=n.OraI18nUtils.trimNumber(o),s=n.OraI18nUtils.trimNumber(s),n.OraI18nUtils.startsWith(r,o)?i=["-",r.substr(o.length)]:n.OraI18nUtils.startsWith(r,n.OraI18nUtils.trimNumber(s))&&(i=["+",r.substr(s.length)]),i||["",r]}(C,u);S+="e"+(E[0]||"+")+E[1]}return o.test(S)?h=parseFloat(S):"full"===u.lenientParse?(S=D(d,u),h=parseFloat(S[0]+S[1])):I(u.style,u,e),A(h,s,u,e)}var w,R,x,L,N="0",P=",",j=".",M="%",H="",k="#",U=";",B="E",F="-",V="'",G="",$=2147483647,K=2147483647;function z(e){var t=new SyntaxError('Unexpected character(s) encountered in the pattern "'+e+' An example of a valid pattern is "#,##0.###".'),i={errorCode:"optionValueInvalid",parameterMap:{propertyName:"pattern",propertyValue:e,propertyValueHint:"#,##0.###"}};throw t.errorInfo=i,t}function Y(e,t,i,n){for(var o="",s=0;s<e.length;){var r=e.charAt(s);if(s+=1,r!==V){switch(r){case G:var a=i.currencyCode,l=a,u=a;void 0!==t.numbers.currencies[a]&&(l=t.numbers.currencies[a].displayName,u=t.numbers.currencies[a].symbol),void 0===i.currencyDisplay||"symbol"===i.currencyDisplay?r=u:"code"===i.currencyDisplay?r=a:(r=l,n.name=r);break;case M:r=t.numbers[i.numberingSystem].percentSign;break;case H:r=t.numbers[i.numberingSystem].perMille;break;case F:r=t.numbers[i.numberingSystem].minusSign}o=o.concat(r)}}return o}function W(){return{format:function(e,t,i,n){(arguments.length<=2||void 0===i)&&(i={useGrouping:!0,style:"decimal"}),C(i,"OraNumberConverter.format");var o={};return y(t,o,i,n),T(e,i,t,o,n)},parse:function(e,t,i,n){return"number"==typeof e?e:"[object Number]"===Object.prototype.toString.call(e)?Number(e):((arguments.length<=2||void 0===i)&&(i={useGrouping:!0,style:"decimal"}),C(i,"OraNumberConverter.parse"),O(e,t,i,n))},resolvedOptions:function(e,t,i){return(arguments.length<3||void 0===i)&&(i=n.OraI18nUtils.getLocaleElementsMainNodeKey(e)),(arguments.length<2||void 0===t)&&(t={useGrouping:!0,style:"decimal"}),function(e,t,i){var n={locale:i,style:void 0===e.style?"decimal":e.style,useGrouping:void 0===t.useGrouping||t.useGrouping,numberingSystem:e.numberingSystemKey};n.minimumIntegerDigits=e.minimumIntegerDigits,n.minimumFractionDigits=e.minimumFractionDigits,n.maximumFractionDigits=e.maximumFractionDigits,"decimal"===e.style&&void 0!==t.decimalFormat&&(n.decimalFormat=t.decimalFormat),"currency"===e.style&&void 0!==t.currencyFormat&&(n.currencyFormat=t.currencyFormat),"currency"===e.style&&(n.currency=t.currency,n.currencyDisplay=void 0===t.currencyDisplay?"symbol":t.currencyDisplay),void 0!==t.unit&&(n.unit=t.unit),void 0!==t.pattern&&(n.pattern=t.pattern);var o=t.roundingMode,s=t.roundDuringParse;void 0!==o&&(n.roundingMode=o),void 0!==s&&(n.roundDuringParse=s);var r=e.lenientParse;void 0!==r&&(n.lenientParse=r);var a=e.separators;return void 0!==a&&(n.separators=a),n}(function(e,t,i){var o={};return C(t,"OraNumberConverter.resolvedOptions"),y(e,o,t,i),o.numberingSystemKey=v(i),void 0===n.OraI18nUtils.numeringSystems[o.numberingSystemKey]&&(o.numberingSystemKey="latn"),o}(e,t,i),t,i)}}}return{getInstance:function(){return t||(t=W()),t}}}();n.DateTimeConverter=function(e){this.Init(e)},n.Object.createSubclass(n.DateTimeConverter,n.Converter,"oj.DateTimeConverter"),n.DateTimeConverter.prototype.Init=function(e){n.DateTimeConverter.superclass.Init.call(this,e)},n.DateTimeConverter.prototype.format=function(e){return n.DateTimeConverter.superclass.format.call(this,e)},n.DateTimeConverter.prototype.isHourInDaySet=function(){n.Assert.failedInAbstractFunction()},n.DateTimeConverter.prototype.isHourInAMPMSet=function(){n.Assert.failedInAbstractFunction()},n.DateTimeConverter.prototype.isMinuteSet=function(){n.Assert.failedInAbstractFunction()},n.DateTimeConverter.prototype.isSecondSet=function(){n.Assert.failedInAbstractFunction()},n.DateTimeConverter.prototype.isMilliSecondSet=function(){n.Assert.failedInAbstractFunction()},n.DateTimeConverter.prototype.isYearSet=function(){n.Assert.failedInAbstractFunction()},n.DateTimeConverter.prototype.isMonthSet=function(){n.Assert.failedInAbstractFunction()},n.DateTimeConverter.prototype.isDaySet=function(){n.Assert.failedInAbstractFunction()},n.DateTimeConverter.prototype.isDayNameSet=function(){n.Assert.failedInAbstractFunction()},n.DateTimeConverter.prototype.calculateWeek=function(e){n.Assert.failedInAbstractFunction()},n.DateTimeConverter.prototype.parse=function(e){return n.DateTimeConverter.superclass.parse.call(this,e)},n.DateTimeConverter.prototype.compareISODates=function(e,t){return n.DateTimeConverter.superclass.compareISODates.call(this,e,t)},n.DateTimeConverter.prototype.getAvailableTimeZones=function(){return n.DateTimeConverter.superclass.getAvailableTimeZones.call(this)},n.DateRestrictionValidator=function(e){this.Init(e)},n.Object.createSubclass(n.DateRestrictionValidator,n.Validator,"oj.DateRestrictionValidator"),n.DateRestrictionValidator.prototype.Init=function(e){n.DateRestrictionValidator.superclass.Init.call(this),this._dayFormatter=e.dayFormatter,this._converter=le.IntlConverterUtils.getConverterInstance(e.converter),e&&(this._messageSummary=e.messageSummary||null,this._messageDetail=e.messageDetail||null)},n.DateRestrictionValidator.prototype._inDisabled=function(e){var t=this._dayFormatter;if(t){var i=t({fullYear:e.fullYear,month:e.month+1,date:e.date});return i&&i.disabled}return!1},n.DateRestrictionValidator.prototype.validate=function(e){var t="",i="",o=v,s=this._messageSummary,r=this._messageDetail,a=e?this._converter.format(e):e,l=e?le.IntlConverterUtils._dateTime(e,["fullYear","month","date"],!0):null;if(null===e)return e;if(this._inDisabled(l))throw t=s?o.applyParameters(s,{value:a}):o.getTranslatedString("oj-validator.restriction.date.messageSummary",{value:a}),i=r?o.applyParameters(r,{value:a}):o.getTranslatedString("oj-validator.restriction.date.messageDetail",{value:a}),new n.ValidatorError(t,i);return e},n.DateRestrictionValidator.prototype.getHint=function(){return null},n.DateTimeRangeValidator=function(e){this.Init(e)},n.Object.createSubclass(n.DateTimeRangeValidator,n.Validator,"oj.DateTimeRangeValidator"),n.DateTimeRangeValidator.prototype.Init=function(e){if(n.DateTimeRangeValidator.superclass.Init.call(this),this._converter=le.IntlConverterUtils.getConverterInstance(e.converter),!this._converter)throw new Error("oj.DateTimeRangeValidator missing a converter option");this._min=e.min||null,this._max=e.max||null,this._translationKey=e.translationKey||"datetime",e&&(this._hint=e.hint||{},this._customMessageSummary=e.messageSummary||{},this._customMessageDetail=e.messageDetail||{}),v.getTranslatedString("oj-validator.range."+this._translationKey+".messageSummary.rangeOverflow")||(this._translationKey="datetime")},n.DateTimeRangeValidator.prototype.validate=function(e){var t,i,o=this._customMessageSummary,s=this._customMessageDetail,r=s.rangeOverflow,a=s.rangeUnderflow,l=o.rangeOverflow,u=o.rangeUnderflow,d=le.IntlConverterUtils,h=this._min,c=this._max,p="",_="",m=v,g=null,f=e&&this._converter.format(e);if(null===e)return e;if(f=this._converter.format(e),h&&(h=d._minMaxIsoString(h,e),t=this._converter?this._converter.format(h):h),c&&(c=d._minMaxIsoString(c,e),i=this._converter?this._converter.format(c):c),null!==h&&null!==c){if(this._converter.compareISODates(e,h)>=0&&this._converter.compareISODates(e,c)<=0||this._converter.compareISODates(h,c)>0)return e}else if(null!==h){if(this._converter.compareISODates(e,h)>=0)return e}else if(null===c||this._converter.compareISODates(e,c)<=0)return e;throw null!==c&&this._converter.compareISODates(e,c)>0?(g={value:f,max:i},p=l||m.getTranslatedString("oj-validator.range."+this._translationKey+".messageSummary.rangeOverflow"),_=r?m.applyParameters(r,g):m.getTranslatedString("oj-validator.range."+this._translationKey+".messageDetail.rangeOverflow",g)):null!==h&&this._converter.compareISODates(e,h)<0&&(g={value:f,min:t},p=u||m.getTranslatedString("oj-validator.range."+this._translationKey+".messageSummary.rangeUnderflow"),_=a?m.applyParameters(a,g):m.getTranslatedString("oj-validator.range."+this._translationKey+".messageDetail.rangeUnderflow",g)),new n.ValidatorError(p,_)},n.DateTimeRangeValidator.prototype.getHint=function(){var e=null,t=this._hint,i=t.inRange,n=t.min,o=t.max,s=this._min,r=this._max,a=s&&this._converter?this._converter.format(s):s,l=r&&this._converter?this._converter.format(r):r,u=null,d=v;return null!==s&&null!==r?(u={min:a,max:l},e=i?d.applyParameters(i,u):d.getTranslatedString("oj-validator.range."+this._translationKey+".hint.inRange",u)):null!==s?(u={min:a},e=n?d.applyParameters(n,u):d.getTranslatedString("oj-validator.range."+this._translationKey+".hint.min",u)):null!==r&&(u={max:l},e=o?d.applyParameters(o,u):d.getTranslatedString("oj-validator.range."+this._translationKey+".hint.max",u)),e},n.DateTimeConverterFactory=function(){return{createConverter:function(e){return function(e){return new n.IntlDateTimeConverter(e)}(e)}}}(),le.Validation.__registerDefaultConverterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME,n.DateTimeConverterFactory),n.DateTimeRangeValidatorFactory=function(){return{createValidator:function(e){return function(e){return new n.DateTimeRangeValidator(e)}(e)}}}(),le.Validation.__registerDefaultValidatorFactory(n.ValidatorFactory.VALIDATOR_TYPE_DATETIMERANGE,n.DateTimeRangeValidatorFactory),n.DateRestrictionValidatorFactory=function(){return{createValidator:function(e){return function(e){return new n.DateRestrictionValidator(e)}(e)}}}(),le.Validation.__registerDefaultValidatorFactory(n.ValidatorFactory.VALIDATOR_TYPE_DATERESTRICTION,n.DateRestrictionValidatorFactory),n.IntlDateTimeConverter=function(e){this.Init(e)},n.Object.createSubclass(n.IntlDateTimeConverter,n.DateTimeConverter,"oj.IntlDateTimeConverter"),n.IntlDateTimeConverter._DEFAULT_DATE=new Date(1998,10,29,15,45,31),n.IntlDateTimeConverter.prototype.Init=function(e){n.IntlDateTimeConverter.superclass.Init.call(this,e)},n.IntlDateTimeConverter.prototype._getWrapped=function(){return this._wrapped||(this._wrapped=de.getInstance()),this._wrapped},n.IntlDateTimeConverter.prototype.format=function(e){var t=bn.__getBundle(),i=p.getLocale(),o=this.resolvedOptions();if(null==e||"string"==typeof e&&0===n.StringUtils.trim(""+e).length)return n.IntlConverterUtils.__getNullFormattedValue();try{return this._getWrapped().format(e,t,o,i)}catch(t){throw this._processConverterError(t,e)}},n.IntlDateTimeConverter.prototype.formatRelative=function(e,t){var i=bn.__getBundle(),n=p.getLocale();try{return this._getWrapped().formatRelative(e,i,t,n)}catch(t){throw this._processConverterError(t,e)}},n.IntlDateTimeConverter.prototype.getHint=function(){return null},n.IntlDateTimeConverter.prototype._getHintValue=function(){var e="";try{e=this.format(le.IntlConverterUtils.dateToLocalIso(n.IntlDateTimeConverter._DEFAULT_DATE))}catch(t){t instanceof n.ConverterError&&(e="")}return e},n.IntlDateTimeConverter.prototype.getOptions=function(){return n.IntlDateTimeConverter.superclass.getOptions.call(this)},n.IntlDateTimeConverter.prototype.resolvedOptions=function(){var t,i=p.getLocale(),n=this.getOptions();if(i!==this._locale||!this._resolvedOptions){t=bn.__getBundle();try{if(!t)return e.error("locale bundle for the current locale %s is unavailable",i),{};this._resolvedOptions=this._getWrapped().resolvedOptions(t,n,i),this._locale=i}catch(e){throw this._processConverterError(e)}}return this._resolvedOptions},n.IntlDateTimeConverter.prototype.isHourInDaySet=function(){var e=this.resolvedOptions(),t=e.hour,i=e.hour12;return!(!t||i)},n.IntlDateTimeConverter.prototype.isHourInAMPMSet=function(){var e=this.resolvedOptions(),t=e.hour,i=e.hour12;return!(!t||!i)},n.IntlDateTimeConverter.prototype.isMinuteSet=function(){return this._isOptionSet("minute")},n.IntlDateTimeConverter.prototype.isSecondSet=function(){return this._isOptionSet("second")},n.IntlDateTimeConverter.prototype.isMilliSecondSet=function(){return this._isOptionSet("millisecond")},n.IntlDateTimeConverter.prototype.isYearSet=function(){return this._isOptionSet("year")},n.IntlDateTimeConverter.prototype.isMonthSet=function(){return this._isOptionSet("month")},n.IntlDateTimeConverter.prototype.isDaySet=function(){return this._isOptionSet("day")},n.IntlDateTimeConverter.prototype.isDayNameSet=function(){return this._isOptionSet("weekday")},n.IntlDateTimeConverter.prototype.calculateWeek=function(e){return this._getWrapped().calculateWeek(e,bn.__getBundle(),p.getLocale())},n.IntlDateTimeConverter.prototype.parse=function(t){if(null==t||""===t)return null;var i=bn.__getBundle(),n=p.getLocale(),o=this.resolvedOptions();try{var s=this._getWrapped().parse(t,i,o,n),r=s.value;return r&&s.warning&&e.warn("The value "+t+" was leniently parsed to represent a date "+r.toString?r.toString():r),r}catch(e){throw this._processConverterError(e,t)}},n.IntlDateTimeConverter.prototype.compareISODates=function(e,t){var i=n.StringUtils.isString;if(!i(e)||!i(t))throw new Error("Invalid arguments for compareISODates ",e,t);return this._getWrapped().compareISODates(e,t,bn.__getBundle())},n.IntlDateTimeConverter.prototype._processConverterError=function(e,t){var i,o,s,r,a=e.errorInfo;if(a){var l=a.errorCode,u=a.parameterMap||{};n.Assert.assertObject(u);var d=u.propertyName;d=v.getTranslatedString("oj-converter.datetime.datetimeOutOfRange."+d),u.propertyName=d,e instanceof TypeError?"optionTypesMismatch"!==l&&"optionTypeInvalid"!==l||(s=le.IntlConverterUtils.__getConverterOptionError(l,u)):e instanceof RangeError?"optionOutOfRange"===l?s=le.IntlConverterUtils.__getConverterOptionError(l,u):"datetimeOutOfRange"===l&&(i=v.getTranslatedString("oj-converter.datetime.datetimeOutOfRange.summary",{propertyName:d,value:u.value}),o=v.getTranslatedString("oj-converter.datetime.datetimeOutOfRange.detail",{minValue:u.minValue,maxValue:u.maxValue}),s=new n.ConverterError(i,o)):e instanceof SyntaxError?"optionValueInvalid"===l&&(s=le.IntlConverterUtils.__getConverterOptionError(l,u)):e instanceof Error&&("dateFormatMismatch"===l?r="oj-converter.datetime.dateFormatMismatch.summary":"timeFormatMismatch"===l?r="oj-converter.datetime.timeFormatMismatch.summary":"datetimeFormatMismatch"===l?r="oj-converter.datetime.datetimeFormatMismatch.summary":"invalidTimeZoneID"===l?(i=v.getTranslatedString("oj-converter.datetime.invalidTimeZoneID.summary",{timeZoneID:u.timeZoneID}),o=v.getTranslatedString("oj-converter.hint.detail",{exampleValue:this._getHintValue()}),s=new n.ConverterError(i,o)):"nonExistingTime"===l?r="oj-converter.datetime.nonExistingTime.summary":"missingTimeZoneData"===l?r="oj-converter.datetime.missingTimeZoneData.summary":"dateToWeekdayMismatch"===l?(i=v.getTranslatedString("oj-converter.datetime.dateToWeekdayMismatch.summary",{date:u.date,weekday:u.weekday}),o=v.getTranslatedString("oj-converter.datetime.dateToWeekdayMismatch.detail"),s=new n.ConverterError(i,o)):"invalidISOString"===l&&(i=v.getTranslatedString("oj-converter.datetime.invalidISOString.summary",{isoStr:u.isoStr}),o=v.getTranslatedString("oj-converter.datetime.invalidISOString.detail"),s=new n.ConverterError(i,o)),r&&(i=v.getTranslatedString(r,{value:t||u.value,format:u.format}),o=v.getTranslatedString("oj-converter.hint.detail",{exampleValue:this._getHintValue()}),s=new n.ConverterError(i,o)))}return s||(i=e.message,o=e.message,s=new n.ConverterError(i,o)),s},n.IntlDateTimeConverter.prototype._isOptionSet=function(e){return!!this.resolvedOptions()[e]},n.IntlDateTimeConverter.prototype.getAvailableTimeZones=function(){return this._getWrapped().getAvailableTimeZones(bn.__getBundle())},n.IntlDateTimeConverter.prototype._getTimePositioning=function(e){var t;return t=null===e?this.resolvedOptions():e,this._getWrapped().getTimePositioning(bn.__getBundle(),t,p.getLocale())},de=function(){var e,t={},i={},o=/(\d{1,4})\D+?(\d{1,4})/g,s=/(\d{1,4})\D+?(\d{1,4})\D+?(\d{1,4})/g,r=/^[M][^M]|[^M]M[^M]|[^M]M$|^M$/g,a=/^[L][^L]|[^L]L[^L]|[^L]L$|^L$/g,l=/^[d][^d]|[^d]d[^d]|[^d]d$|^d$|^d[^d]/,u=/(?:^|[^h])h[^h]|[^H]H[^H]|[^k]k[^k]|[^K]K[^K]|^H[^H]|^H$|[^h]h$/,d=/'.*'/,h=/'[^d]*d[^d]*'/,c=/(\d{1,2})(?:\D+?(\d{1,2}))?(?:\D+?(\d{1,2}))?(?:\D+?(\d{1,3}))?/g,p=/h|H|K|k/g,_=/([\^$.*+?|\[\](){}])/g,m=/ccccc|cccc|ccc|cc|c|EEEEE|EEEE|EEE|EE|E|dd|d|MMMMM|MMMM|MMM|MM|M|LLLLL|LLLL|LLL|LL|L|yyyy|yy|y|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|aa|a|SSS|SS|S|zzzz|zzz|zz|z|v|ZZZ|ZZ|Z|XXX|XX|X|VV|GGGGG|GGGG|GGG|GG|G/g,g=/\s?(?:\(|\[)?z{1,4}(?:\)|\])?/g,f=!1,v={0:"sun",1:"mon",2:"tue",3:"wed",4:"thu",5:"fri",6:"sat"},y={s:46,m:46,h:23,d:7,w:4,M:12},b="zulu",C="local",S="auto",E="invariant",T="offset",D="UTC",A="(\\D+|\\d\\d?\\D|\\d\\d?|\\D+\\d\\d?)",I="(\\D+|\\D+\\d\\d?)",O={MMM:{token:"months",style:"format",mLen:"abbreviated",matchIndex:0,key:"month",value:"short",regExp:A},MMMM:{token:"months",style:"format",mLen:"wide",matchIndex:0,key:"month",value:"long",regExp:A},MMMMM:{token:"months",style:"format",mLen:"narrow",matchIndex:0,key:"month",value:"narrow",regExp:A},LLL:{token:"months",style:"stand-alone",mLen:"abbreviated",matchIndex:1,key:"month",value:"short",regExp:A},LLLL:{token:"months",style:"stand-alone",mLen:"wide",matchIndex:1,key:"month",value:"long",regExp:A},LLLLL:{token:"months",style:"stand-alone",mLen:"narrow",matchIndex:1,key:"month",value:"narrow",regExp:A},E:{token:"days",style:"format",dLen:"abbreviated",matchIndex:0,key:"weekday",value:"short",regExp:I},EE:{token:"days",style:"format",dLen:"abbreviated",matchIndex:0,key:"weekday",value:"short",regExp:I},EEE:{token:"days",style:"format",dLen:"abbreviated",matchIndex:0,key:"weekday",value:"short",regExp:I},EEEE:{token:"days",style:"format",dLen:"wide",matchIndex:0,key:"weekday",value:"long",regExp:I},EEEEE:{token:"days",style:"format",dLen:"narrow",matchIndex:0,key:"weekday",value:"narrow",regExp:I},c:{token:"days",style:"stand-alone",dLen:"abbreviated",matchIndex:1,key:"weekday",value:"short",regExp:I},cc:{token:"days",style:"stand-alone",dLen:"abbreviated",matchIndex:1,key:"weekday",value:"short",regExp:I},ccc:{token:"days",style:"stand-alone",dLen:"abbreviated",matchIndex:1,key:"weekday",value:"short",regExp:I},cccc:{token:"days",style:"stand-alone",dLen:"wide",matchIndex:1,key:"weekday",value:"long",regExp:I},ccccc:{token:"days",style:"stand-alone",dLen:"narrow",matchIndex:1,key:"weekday",value:"narrow",regExp:I},h:{token:"time",timePart:"hour",start1:0,end1:11,start2:1,end2:12,key:"hour",value:"numeric",regExp:"(\\d\\d?)"},hh:{token:"time",timePart:"hour",start1:0,end1:11,start2:1,end2:12,key:"hour",value:"2-digit",regExp:"(\\d\\d?)"},K:{token:"time",timePart:"hour",start1:0,end1:11,start2:0,end2:11,key:"hour",value:"numeric",regExp:"(\\d\\d?)"},KK:{token:"time",timePart:"hour",start1:0,end1:11,start2:0,end2:11,key:"hour",value:"2-digit",regExp:"(\\d\\d?)"},H:{token:"time",timePart:"hour",start1:0,end1:23,start2:0,end2:23,key:"hour",value:"numeric",regExp:"(\\d\\d?)"},HH:{token:"time",timePart:"hour",start1:0,end1:23,start2:0,end2:23,key:"hour",value:"2-digit",regExp:"(\\d\\d?)"},k:{token:"time",timePart:"hour",start1:0,end1:23,start2:1,end2:24,key:"hour",value:"numeric",regExp:"(\\d\\d?)"},kk:{token:"time",timePart:"hour",start1:0,end1:23,start2:1,end2:24,key:"hour",value:"2-digit",regExp:"(\\d\\d?)"},m:{token:"time",timePart:"minute",start1:0,end1:59,start2:0,end2:59,key:"minute",value:"numeric",regExp:"(\\d\\d?)"},mm:{token:"time",timePart:"minute",start1:0,end1:59,start2:0,end2:59,key:"minute",value:"2-digit",regExp:"(\\d\\d?)"},s:{token:"time",timePart:"second",start1:0,end1:59,start2:0,end2:59,key:"second",value:"numeric",regExp:"(\\d\\d?)"},ss:{token:"time",timePart:"second",start1:0,end1:59,start2:0,end2:59,key:"second",value:"2-digit",regExp:"(\\d\\d?)"},S:{token:"time",timePart:"millisec",start1:0,end1:999,start2:0,end2:999,key:"millisecond",value:"numeric",regExp:"(\\d{1,3})"},SS:{token:"time",timePart:"millisec",start1:0,end1:999,start2:0,end2:999,key:"millisecond",value:"numeric",regExp:"(\\d{1,3})"},SSS:{token:"time",timePart:"millisec",start1:0,end1:999,start2:0,end2:999,key:"millisecond",value:"numeric",regExp:"(\\d{1,3})"},d:{token:"dayOfMonth",key:"day",value:"numeric",getPartIdx:2,regExp:"(\\d\\d?)"},dd:{token:"dayOfMonth",key:"day",value:"2-digit",getPartIdx:2,regExp:"(\\d\\d?)"},M:{token:"monthIndex",key:"month",value:"numeric",getPartIdx:1,regExp:"(\\d\\d?)"},MM:{token:"monthIndex",key:"month",value:"2-digit",getPartIdx:1,regExp:"(\\d\\d?)"},L:{token:"monthIndex",key:"month",value:"numeric",getPartIdx:1,regExp:"(\\d\\d?)"},LL:{token:"monthIndex",key:"month",value:"2-digit",getPartIdx:1,regExp:"(\\d\\d?)"},y:{token:"year",key:"year",value:"numeric",regExp:"(\\d{1,4})"},yy:{token:"year",key:"year",value:"2-digit",regExp:"(\\d\\d?)"},yyyy:{token:"year",key:"year",value:"numeric",regExp:"(\\d{1,4})"},a:{token:"ampm",key:"hour12",value:!0,regExp:"(\\D*)"},z:{token:"tzAbbrev",regExp:"(.+?)"},v:{token:"tzAbbrev",key:"timeZoneName",value:"short",regExp:"(.+?)"},zz:{token:"tzAbbrev",regExp:"(.+?)"},zzz:{token:"tzAbbrev",regExp:"(.+?)"},zzzz:{token:"tzFull",regExp:"(.+?)"},Z:{token:"tzhm",regExp:"([+-]?\\d{1,4})"},ZZ:{token:"tzhm",regExp:"([+-]?\\d{1,4})"},ZZZ:{token:"tzhm",regExp:"([+-]?\\d{1,4})"},X:{token:"tzh",regExp:"([+-]?\\d{1,2})"},XX:{token:"tzhm",key:"XX",regExp:"([+-]?\\d{1,4})"},XXX:{token:"tzhsepm",regExp:"([+-]?\\d{1,2}:\\d{1,2})"},VV:{token:"tzid",regExp:"(.+?)"},G:{token:"era",key:"era",value:"short",regExp:I},GG:{token:"era",key:"era",value:"short",regExp:I},GGG:{token:"era",key:"era",value:"short",regExp:I},GGGG:{token:"era",key:"era",value:"long",regExp:I},GGGGG:{token:"era",key:"era",value:"narrow",regExp:I},"/":{token:"slash",regExp:"(\\/)"}};function w(e){var t=e["two-digit-year-start"];return(void 0===t||isNaN(t))&&(t=1950),t=parseInt(t,10)}function R(e){var t=e._ojLocale_,i=n.OraI18nUtils.getBCP47Region(t);return"h"===e.supplemental.prefferedHours[i]}function x(e,t){switch(t){case 0:case 2:case 4:case 6:case 7:case 9:case 11:return 31;case 1:return function(e){return e%400==0||e%100!=0&&e%4==0}(e)?29:28;default:return 30}}function L(e,t,i){var o,s,r,a=n.OraI18nUtils.getLocaleElementsMainNode(t),l=n.OraI18nUtils.getGetOption(e,i),u=l("formatType","string",["date","time","datetime"],"date"),d=l("dateFormat","string",["short","medium","long","full"],"short"),h=l("timeFormat","string",["short","medium","long","full"],"short"),c=a.dates.calendars.gregorian,p=c.dateFormats,_=c.timeFormats;switch(d){case"full":o=p.full;break;case"long":o=p.long;break;case"medium":o=p.medium;break;case"short":o=p.short}switch(h){case"full":s=_.full;break;case"long":s=_.long;break;case"medium":s=_.medium;break;case"short":s=_.short}return void 0===o||"datetime"!==u&&"date"!==u||(r=o),void 0===s||"datetime"!==u&&"time"!==u||(f&&(s=s.replace(g,"")),r=r?r+" "+s:s),r}function N(e,t){for(var i=0,n=!1,o=0,s=e.length;o<s;o++){var r=e.charAt(o);switch(r){case"'":n?t.push("'"):i+=1,n=!1;break;case"\\":n&&t.push("\\"),n=!n;break;default:t.push(r),n=!1}}return i}function P(e,t,i){var n,o=void 0!==t.year||void 0!==t.month||void 0!==t.weekday||void 0!==t.day,s=void 0!==t.hour||void 0!==t.minute||void 0!==t.second;n=o&&s?"MM/dd/yy hh:mm:ss a":o?"MM/dd/yy":"hh:mm:ss a";var r=new SyntaxError("Unexpected character(s) "+i+' encountered in the pattern "'+e+' An example of a valid pattern is "'+n+'".'),a={errorCode:"optionValueInvalid",parameterMap:{propertyName:"pattern",propertyValue:e,"propertyValueHint ":n}};throw r.errorInfo=a,r}function j(e,t,i,o){for(var s,r=n.OraI18nUtils.getLocaleElementsMainNode(t).dates.calendars.gregorian.dateTimeFormats.availableFormats,a=["weekday","era","year","month","day","hour","minute","second","timeZoneName"],l={"2-digit":0,numeric:1,narrow:2,short:3,long:4},u=-1/0,d=Object.keys(r),h=0;h<d.length;h++){var c=d[h],p=!1,_={};_.pattern=r[c];for(var g=0,f=m.exec(c);null!==f;){var v=f[0];("h"!==v&&"hh"!==v||o)&&("H"!==v&&"HH"!==v||!o)?void 0!==O[v]&&(_[O[v].key]=O[v].value):p=!0,f=m.exec(c)}if(!p){for(var y=0;y<a.length;y++){var b=e[a[y]],C=_[a[y]];if(void 0===b&&void 0!==C)g-=20;else if(void 0!==b&&void 0===C)g-=120;else if(void 0!==b&&void 0!==C){var S=l[b],E=l[C],T=Math.max(Math.min(E-S,2),-2);2===T?g-=6:1===T?g-=3:-1===T?g-=6:-2===T&&(g-=8)}}g>u&&(u=g,s=_)}}return void 0!==s?s.pattern:null}function M(e,t,i,n){return void 0!==i?(e[t]=i,n[i]):""}function H(e,t,i){var n;if(Object.keys(t).length>1)return null;for(var o=e.length;o>0;o--)if(void 0!==(n=i[e.substr(0,o)]))return n;return e}function k(e,i,o,s){var c,_,m,g=n.OraI18nUtils.getLocaleElementsMainNode(i),f=n.OraI18nUtils.getLocaleElementsMainNodeKey(i),v=n.OraI18nUtils.getGetOption(e,s),y=v("formatMatcher","string",["basic","munger"],"munger");0===Object.keys(e).length&&(e={year:"numeric",month:"numeric",day:"numeric"});var b=v("millisecond","string",["numeric","2-digit"]),C=v("second","string",["numeric","2-digit"]);void 0!==b&&(_=v("hour","string",["numeric","2-digit"]),m=v("minute","string",["numeric","2-digit"]),e.second="2-digit");var S=function(e,t,i){var o="",s="",r={},a={},l=n.OraI18nUtils.getGetOption(e,i),u=l("era","string",["narrow","short","long"]);o+=M(r,"era",u,{narrow:"GGGGG",short:"GGG",long:"GGGG"}),o+=M(r,"year",u=l("year","string",["2-digit","numeric"]),{"2-digit":"yy",numeric:"y"}),o+=M(r,"month",u=l("month","string",["2-digit","numeric","narrow","short","long"]),{"2-digit":"MM",numeric:"M",narrow:"MMMMM",short:"MMM",long:"MMMM"}),o+=M(r,"weekday",u=l("weekday","string",["narrow","short","long"]),{narrow:"EEEEE",short:"E",long:"EEEE"}),o+=M(r,"day",u=l("day","string",["2-digit","numeric"]),{"2-digit":"dd",numeric:"d"});var d=l("hour12","boolean",[!0,!1]);return void 0===d&&(d=R(t)),s+=M(a,"hour",u=l("hour","string",["2-digit","numeric"]),!0===d?{"2-digit":"hh",numeric:"h"}:{"2-digit":"HH",numeric:"H"}),s+=M(a,"minute",u=l("minute","string",["2-digit","numeric"]),{"2-digit":"mm",numeric:"m"}),s+=M(a,"second",u=l("second","string",["2-digit","numeric"]),{"2-digit":"ss",numeric:"s"}),[o,s+=M(a,"timeZoneName",u=l("timeZoneName","string",["short","long"]),{short:"v",long:"v"}),r,a]}(e,i,s);if(void 0!==t[f]){var E=t[f].dates.calendars.gregorian.dateTimeFormats[S[0]+S[1]];if(void 0!==E)return E=O(E)}if(""===S[0]&&""===S[1])return L(e,i,s);var T=g.dates.calendars.gregorian.dateTimeFormats.availableFormats,D=T[S[0]],A=v("hour12","boolean",[!0,!1]);void 0===A&&(A=R(i)),void 0===D&&""!==S[0]&&(null===(D=H(S[0],S[2],T))&&(D=j(S[2],i,0,A)),null!==D?"basic"!==y&&(D=function(e,t,i){var o=e,s=n.OraI18nUtils.getGetOption(t,i),u=s("year","string",["2-digit","numeric"]),d={"2-digit":"yy",numeric:"yyyy"};void 0!==u&&(o=o.replace(/y{1,4}/,d[u])),void 0!==(u=s("month","string",["2-digit","numeric","narrow","short","long"]))&&(void 0!==(d={"2-digit":"MM",numeric:"M",narrow:"MMMMM",short:"MMM",long:"MMMM"})[u]&&d[u].length>2?o=(o=o.replace(/M{3,5}/,d[u])).replace(/L{3,5}/,{"2-digit":"LL",numeric:"L",narrow:"LLLLL",short:"LLL",long:"LLLL"}[u]):"2-digit"===u&&(r.lastIndex=0,r.test(e)&&(o=o.replace("M","MM")),a.test(e)&&(o=o.replace("L","LL"))));void 0!==(u=s("weekday","string",["narrow","short","long"]))&&(o=(o=o.replace(/E{1,5}/,{narrow:"EEEEE",short:"EEE",long:"EEEE"}[u])).replace(/c{1,5}/,{narrow:"ccccc",short:"ccc",long:"cccc"}[u]));if(void 0!==(u=s("day","string",["2-digit","numeric"]))&&"2-digit"===u){l.lastIndex=0,h.lastIndex=0;var c=h.test(e);!0===l.test(e)&&!1===c&&(o=o.replace("d","dd"))}return o}(D,e,s)):D=S[0]);var I=T[S[1]];return void 0===I&&""!==S[1]&&(null===(I=H(S[1],S[3],T))&&(I=j(S[3],i,0,A)),null!==I?"basic"!==y&&(I=function(e,t,i){var o=e;if("2-digit"===n.OraI18nUtils.getGetOption(t,i)("hour","string",["2-digit","numeric"])){u.lastIndex=0,d.lastIndex=0;var s=e.replace(d,""),r=u.exec(s);if(null!==r){p.lastIndex=0;var a=p.exec(r[0]),l=a[0]+a[0];o=e.replace(a[0],l)}}return o}(I,e,s)):I=S[1]),c=D||"",void 0!==I&&(""!==c?c+=" "+I:c=I),void 0===t[f]&&(t[f]={},t[f].dates={},t[f].dates.calendars={},t[f].dates.calendars.gregorian={},t[f].dates.calendars.gregorian.dateTimeFormats={}),t[f].dates.calendars.gregorian.dateTimeFormats[S[0]+S[1]]=c,c=O(c);function O(t){if(void 0!==b){var i=(s=g,r=o,a="symbols-numberSystem-"+n.OraI18nUtils.getNumberingSystemKey(s,r),s.numbers[a].decimal);i=void 0===_&&void 0===m&&void 0===C?"S":"ss"+i+"SSS",t=t.replace("ss",i),void 0===C&&(e.second=void 0)}var s,r,a,l=v("timeZoneName","string",["short","long"]);return void 0!==l&&(t=t.replace(/v/,{short:"z",long:"zzzz"}[l])),t}}function U(e){var t=e.split(" "),i=t[0].split("-"),n=new Date(i[0],i[1]-1,i[2]);return t.length>1&&(i=t[1].split(":"),n.setHours(i[0]),n.setMinutes(i[1])),n.getTime()}function B(e,t,i){var n=new Date(e[0],e[1]-1,e[2],e[3],e[4],e[5]).getTime(),o=t.split("/"),s=o[0],r=o[1],a=i[s];if(void 0===a)return null;if(void 0===(a=a[r]))return null;for(var l,u,d=a.length,h=0;h<d;h++){var c=a[h].usesMetazone._from,p=a[h].usesMetazone._to,_=a[h].usesMetazone._mzone;if(void 0===c&&void 0===p)return _;if(void 0===c&&void 0!==p&&n<=(u=U(p)))return _;if(void 0!==c&&void 0===p&&n>=(l=U(c)))return _;if(void 0!==c&&void 0!==p&&(l=U(c),u=U(p),n>=l&&n<u))return _}}function F(e,t,i,o,s){var r=n.OraI18nUtils.getLocaleElementsMainNode(e),a="",l=i.timeZone,u=n.OraI18nUtils.getGetOption(i,"OraDateTimeConverter")("dst","boolean",[!0,!1],!1);if(void 0===l)return a;var d,h,c=B(t,l,e.supplemental.metazones),p="standard",_=!s,m=V(l,e),g=G(m,t,u,_,!0);if(void 0!==r.dates.timeZoneNames.metazone&&(d=r.dates.timeZoneNames.metazone[c]),void 0===d){var f=m.ofset(g);return n.OraI18nUtils.getTimeStringFromOffset(D,f,!0,!0)}h=1===o?d.long:d.short;var v=m.ofset(g);return v<m.ofset(g+1)&&(p="daylight"),void 0!==h&&void 0!==(a=h[p])?a:n.OraI18nUtils.getTimeStringFromOffset(D,v,!0,!0)}function V(e,t){return ce.getInstance().getZone(e,t)}function G(e,t,i,n,o){var s=Date.UTC(t[0],t[1]-1,t[2],t[3],t[4],t[5]);return e.parse(s,i,n,o)}function $(e,t,i,o){var s,r,a,l=i.isoStrParts,u=0===i.dateTime.indexOf("T"),d=n.OraI18nUtils.getLocaleElementsMainNode(e),h=n.OraI18nUtils.getGetOption(t,"OraDateTimeConverter.format");r=t.pattern||k(t,e,o,"OraDateTimeConverter.format"),s=[];var c=0,p=d.dates.calendars.gregorian;function _(e,t){switch(t){case 0:return e[0];case 1:return e[1];case 2:return e[2];case 3:var i=new Date(e[0],e[1]-1,e[2],e[3],e[4],e[5]);return v[i.getDay()];default:return}}function g(e,i,o,s,r){var a;switch(s.timePart){case"hour":a=11===s.end1?i[3]%12:i[3],"h"===r||"hh"===r?0===a&&(a=12):"k"!==r&&"kk"!==r||0===a&&(a=24);break;case"minute":a=i[4];break;case"second":a=void 0===t.second&&void 0!==t.millisecond?0:i[5];break;case"millisec":a=i[6]}e.push(o>1?n.OraI18nUtils.padZeros(a,o):a)}function f(t,o,s){var r,a,l,u=o.timeZone,d=h("dst","boolean",[!0,!1],!1),c=!s;if(void 0!==u)l=G(a=V(u,e),t,d,c,!0),r=-a.ofset(l);else if(i.format!==C)switch(i.format){case T:r=i.timeZone.split(":");var p=parseInt(r[0],10),_=parseInt(r[1],10);r=60*p+(n.OraI18nUtils.startsWith(i.timeZone,"-")?-_:_);break;case b:default:r=0}return r}var y,S,E,A,I,w=t.timeZone;for(i.format!==C&&void 0!==w&&Oe(i,t,e);;){var R=m.lastIndex,x=m.exec(r);if(c+=N(r.slice(R,x?x.index:r.length),s),!x)break;if(c%2)s.push(x[0]);else{var L=x[0],j=L.length,M=O[L];switch(M.token){case"days":a=p[M.token][M.style][M.dLen],s.push(a[_(l,3)]);break;case"months":a=p[M.token][M.style][M.mLen],s.push(a[_(l,1)]);break;case"dayOfMonth":case"monthIndex":s.push((y=s,S=l,E=M.getPartIdx,A=j,void 0,I=_(S,E),void y.push(A>1?n.OraI18nUtils.padZeros(I,A):I)));break;case"year":a=l[0],2===j&&(a%=100),s.push(n.OraI18nUtils.padZeros(a,j));break;case"time":g(s,l,j,M,L);break;case"ampm":a=l[3]<12?p.dayPeriods.format.wide.am:p.dayPeriods.format.wide.pm,s.push(a);break;case"tzhm":0===(a=f(l,t,u))?"XX"===M.key?s.push("Z"):s.push("+0000"):s.push((a<=0?"-":"+")+n.OraI18nUtils.padZeros(Math.floor(Math.abs(a/60)),2)+n.OraI18nUtils.padZeros(Math.floor(Math.abs(a%60)),2));break;case"tzhsepm":0===(a=f(l,t,u))?s.push("Z"):s.push((a<=0?"-":"+")+n.OraI18nUtils.padZeros(Math.floor(Math.abs(a/60)),2)+":"+n.OraI18nUtils.padZeros(Math.floor(Math.abs(a%60)),2));break;case"tzh":0===(a=f(l,t,u))?s.push("Z"):s.push((a<=0?"-":"+")+n.OraI18nUtils.padZeros(Math.floor(Math.abs(a/60)),2));break;case"tzid":a=void 0!==w?w:i.format===b?D:"",s.push(a);break;case"tzAbbrev":a=F(e,l,t,0,u),s.push(a);break;case"tzFull":a=F(e,l,t,1,u),s.push(a);break;case"era":a=p.eras.eraAbbr,s.push(a[1]);break;case"slash":s.push("/");break;default:P(r,t,L)}}}return s.join("")}function K(e,t){return e.getFullYear()===t.getFullYear()}function z(e,t){return t.getFullYear()-e.getFullYear()==1}function Y(e,t){return K(e,t)&&e.getMonth()===t.getMonth()}function W(e,t){return K(e,t)?t.getMonth()-e.getMonth()==1:!!z(e,t)&&(11===e.getMonth()&&0===t.getMonth())}function q(e,t){var i=e.getDate(),n=t.getDate();return W(e,t)&&(n+=x(e.getFullYear,e.getMonth())),n-i}function X(e,t){var i=e._ojLocale_,o=n.OraI18nUtils.getBCP47Region(i),s=e.supplemental.weekData.firstDay,r=s[o];void 0===r&&(r=s["001"]);var a=t-r;return a<0&&(a+=7),a}function Z(e,t,i){if(!Y(t,i)&&!W(t,i))return!1;var n=q(t,i)+X(e,t.getDay());return n>=7&&n<=13}function J(e,t){return K(e,t)&&Y(e,t)&&e.getDate()===t.getDate()}function Q(e,t){return!(!Y(e,t)&&!W(e,t))&&1===q(e,t)}function ee(e,t){return Q(t,e)}function te(e,t,i){var o=n.OraI18nUtils._IsoStrParts(e),s=n.OraI18nUtils._IsoStrParts(t);return i?(o=Date.UTC(o[0],o[1]-1,o[2],0,0,0,0),s=Date.UTC(s[0],s[1]-1,s[2],0,0,0,0)):(o=Date.UTC(o[0],o[1]-1,o[2],o[3],o[4],o[5],o[6]),s=Date.UTC(s[0],s[1]-1,s[2],s[3],s[4],s[5],s[6])),o-s}function ie(e,t){return e.replace(/\{(\d+)\}/g,function(){return t[arguments[1]]})}function ne(e,t,i,o){var s=n.OraI18nUtils.getLocaleElementsMainNode(o).dates.fields,r=n.OraI18nUtils.getGetOption(i,"OraDateTimeConverter.formatRelative")("dateField","string",["day","week","month","year","hour","minute","second"]),a=n.OraI18nUtils.isoToLocalDate(e),l=n.OraI18nUtils.isoToLocalDate(t);switch(r){case"day":return J(a,l)?s.day["relative-type-0"]:Q(a,l)?s.day["relative-type-1"]:ee(a,l)?s.day["relative-type--1"]:se(e,t,o,"day");case"week":return function(e,t,i){if(t>i){var n=t;t=i,i=n}if(!Y(t,i)&&!W(t,i))return!1;var o=q(t,i)+X(e,t.getDay());return o>=0&&o<=6}(o,a,l)?s.week["relative-type-0"]:Z(o,a,l)?s.week["relative-type-1"]:function(e,t,i){return Z(e,i,t)}(o,a,l)?s.week["relative-type--1"]:se(e,t,o,"week");case"month":return Y(a,l)?s.month["relative-type-0"]:W(a,l)?s.month["relative-type-1"]:W(l,a)?s.month["relative-type--1"]:se(e,t,o,"month");case"year":return K(a,l)?s.year["relative-type-0"]:z(a,l)?s.year["relative-type-1"]:function(e,t){return z(t,e)}(a,l)?s.year["relative-type--1"]:se(e,t,o,"year");case"hour":return se(e,t,o,"hour");case"minute":return se(e,t,o,"minute");case"second":return se(e,t,o,"second")}return null}function oe(e){return e.split("-")[0]}function se(e,t,i,o){var s,r,a,l=n.OraI18nUtils.getLocaleElementsMainNodeKey(i),u=n.OraI18nUtils.getLocaleElementsMainNode(i),d=oe(l),h=i.supplemental.plurals,c=u.dates.fields,p=te(t,e,!1),_=Math.abs(p),m=(r=function(e){return 4800*e/146097}((s=_)/864e5),a=r/12,{year:Math.round(a),month:Math.round(r),week:Math.round(s/6048e5),day:Math.round(s/864e5),hour:Math.round(s/36e5),minute:Math.round(s/6e4),second:Math.round(s/1e3),millisecond:s});if(null===o&&(o=(m.second<y.s?"second":m.minute<y.m&&"minute")||m.hour<y.h&&"hour"||m.day<y.d&&"day"||m.week<y.w&&"week"||m.month<y.M&&"month"||"year"),"second"===o&&m.second<y.s)return c[o]["relative-type-0"];var g="relativeTimePattern-count-"+h[d](m[o]),f=p<0?"relativeTime-type-past":"relativeTime-type-future",v=c[o][f][g];return void 0===v&&(g="relativeTimePattern-count-other",v=c[o][f][g]),v=ie(v,[m[o]])}function re(e,t,i){var o=n.OraI18nUtils.dateToLocalIso(new Date);if("number"==typeof e)e=n.OraI18nUtils.dateToLocalIso(new Date(e));else{if("string"!=typeof e)return null;if(""===n.OraI18nUtils.trim(e))return null}void 0===i&&(i={formatUsing:"displayName"});var s=n.OraI18nUtils.getGetOption(i,"OraDateTimeConverter.formatRelative"),r=s("relativeTime","string",["fromNow","toNow"],"fromNow"),a=s("dateField","string",["day","week","month","year","hour","minute","second"]);if(e=function(e,t,i){var o=i.timeZone;if(n.OraI18nUtils.getISOStrFormatInfo(e).format===C&&void 0===o)return e;var s={isoStrFormat:"zulu"};void 0!==o&&(s.timeZone=o,s.dst=!0);var r=xe(e,t,s,"en-US");return s={timeZone:n.OraI18nUtils.getLocalTimeZoneOffset(),isoStrFormat:"local"},xe(r.value,t,s,"en-US").value}(e,t,i),"toNow"===r){var l=o;o=e,e=l}return"calendar"===s("formatUsing","string",["displayName","calendar"],"displayName")?function(e,t,i,o){var s,r,a,l,u=n.OraI18nUtils.getLocaleElementsMainNode(i),d=u.dates.calendars.gregorian.dateTimeFormats.long,h=u.dates.calendars.gregorian.days.format.wide,c=u.dates.fields,p=n.OraI18nUtils.isoToLocalDate(t),_=n.OraI18nUtils.isoToLocalDate(e),m=n.OraI18nUtils.getISOStrFormatInfo(t);if(J(_,p))s=c.day["relative-type-0"];else if(Q(_,p))s=c.day["relative-type-1"];else if(ee(_,p))s=c.day["relative-type--1"];else{a=p.getDay(),l=v[a];var g=te(t,e,!0);if((g/=864e5)<-1&&g>-7)s=c[l]["relative-type--1"];else{if(!(g>1&&g<7))return $(i,{year:"numeric",month:"numeric",day:"numeric"},m,"en-US");s=h[l]}}return o?s:(r=$(i,{hour:"numeric",minute:"numeric"},m,"en-US"),d=ie(d=d.replace(/'/g,""),[r,s]))}(o,e,t,s("dateOnly","boolean",[!0,!1],!1)):void 0!==a?ne(o,e,i,t):se(o,e,t,null)}function ae(e,t){var i=new Error("The weekday "+e+" does not match the date "+t),n={errorCode:"dateToWeekdayMismatch",parameterMap:{weekday:e,date:t}};throw i.errorInfo=n,i}function le(e,t,i){var n,o;2===i?(n='The value "'+e+'" does not match the expected date-time format "'+t+'"',o="datetimeFormatMismatch"):0===i?(n='The value "'+e+'" does not match the expected date format "'+t+'"',o="dateFormatMismatch"):(n='The value "'+e+'" does not match the expected time format "'+t+'"',o="timeFormatMismatch");var s=new Error(n),r={errorCode:o,parameterMap:{value:e,format:t}};throw s.errorInfo=r,s}function ue(e,t){if(t<100){var i=e%100;t+=100*Math.floor(e/100)+(t<i?100:0)}return t}function he(e,t){for(var i={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},o=Object.keys(e),s=0;s<o.length;s++){var r=o[s];if(n.OraI18nUtils.trim(n.OraI18nUtils.toUpper(e[r]))===n.OraI18nUtils.trim(t))return i[r]}return-1}function pe(e,t){for(var i=Object.keys(e),o=0;o<i.length;o++){var s=i[o];if(n.OraI18nUtils.trim(n.OraI18nUtils.toUpper(e[s]))===n.OraI18nUtils.trim(t))return o}return-1}function _e(e,t,i){var o,s,r=n.OraI18nUtils.getLocaleElementsMainNode(e),a=r.dates.calendars.gregorian.days.format,l=r.dates.calendars.gregorian.days["stand-alone"];switch(i){case 0:s=[a.abbreviated,a.wide];break;case 1:s=[l.abbreviated,l.wide]}return t=n.OraI18nUtils.toUpper(t),-1===(o=he(s[0],t))&&(o=he(s[1],t)),o}function me(e,t,i){var o,s=-1,r=n.OraI18nUtils.getLocaleElementsMainNode(e),a=r.dates.calendars.gregorian.months.format,l=r.dates.calendars.gregorian.months["stand-alone"];switch(i){case 0:o=[a.wide,a.abbreviated];break;case 1:o=[l.wide,l.abbreviated];break;case 2:o=[a.wide,a.abbreviated,l.wide,l.abbreviated];break;default:return-1}t=n.OraI18nUtils.toUpper(t);for(var u=0;u<o.length;u++)if(-1!==(s=pe(o[u],t)))return s;return s}function ge(e,t,i,n,o,s,r){if(t<i||t>n){var a=new RangeError(o+" is out of range.  Enter a value between "+s+" and "+r+" for "+e),l={errorCode:"datetimeOutOfRange",parameterMap:{value:o,minValue:s,maxValue:r,propertyName:e}};throw a.errorInfo=l,a}}function fe(e,t){for(var i=0;i<e.length;i++)if(void 0!==e[i][t])return i;return 0}function ve(e,t,i,o,s){var r=n.OraI18nUtils.getLocaleElementsMainNode(o).dates.calendars.gregorian.dayPeriods.format.wide.pm;c.lastIndex=0;var a=0,l=0,u=0,d=0,h=c.exec(t);switch(null===h&&le(t,i,s),void 0!==h[1]&&(a=parseInt(h[1],10)),void 0!==h[2]&&(l=parseInt(h[2],10)),void 0!==h[3]&&(u=parseInt(h[3],10)),void 0!==h[4]&&(d=parseInt(h[4],10)),p.lastIndex=0,(h=p.exec(i))[0]){case"h":12===a&&(a=0),ge("hour",a,0,11,a,1,12),-1!==n.OraI18nUtils.toUpper(t).indexOf(n.OraI18nUtils.toUpper(r))&&a<12&&(a+=12);break;case"K":ge("hour",a,0,11,a,0,11),-1!==n.OraI18nUtils.toUpper(t).indexOf(n.OraI18nUtils.toUpper(r))&&a<12&&(a+=12);break;case"H":ge("hour",a,0,23,a,0,23);break;case"k":24===a&&(a=0),ge("hour",a,0,23,a,1,24)}ge("minute",l,0,59,l,0,59),ge("second",u,0,59,u,0,59),ge("millisec",d,0,999,d,0,999),e.setHours(a,l,u,d)}function ye(e,t){for(var i=n.OraI18nUtils.getLocaleElementsMainNode(t),o=i.dates.calendars.gregorian.days.format,s=i.dates.calendars.gregorian.days["stand-alone"],r=[o.wide,o.abbreviated,s.wide,s.abbreviated],a=0;a<r.length;a++)for(var l=Object.keys(r[a]),u=0;u<l.length;u++){var d=r[a][l[u]];if(new RegExp(d+"\\b","i").test(e))return d}return null}function be(e,t,i,r,a){var l=e;e=n.OraI18nUtils.toUpper(e);var u,d,h,c=n.OraI18nUtils.getLocaleElementsMainNode(r),p=c.dates.calendars.gregorian.months.format,_=c.dates.calendars.gregorian.months["stand-alone"],m=[p.wide,p.abbreviated,_.wide,_.abbreviated],g=!1;for(d=0;d<m.length;d++){u=[];var f,v=Object.keys(m[d]);for(f=0;f<v.length;f++)h=n.OraI18nUtils.toUpper(m[d][v[f]]),u.unshift({idx:f,name:h});for(u.sort(function(e,t){return t.idx-e.idx}),f=0;f<u.length;f++)if(h=u[f].name,-1!==e.indexOf(h)){g=!0,e=e.replace(h,"");break}if(g)break}if(!g)return function(e,t,i,o,r){s.lastIndex=0;var a=s.exec(e);null===a&&le(e,t,r?2:0);var l,u,d,h,c,p,_=[{y:t.indexOf("y")},{M:t.indexOf("M")},{d:t.indexOf("d")}];_.sort(function(e,t){var i=Object.keys(e)[0],n=Object.keys(t)[0];return e[i]-t[n]});var m=fe(_,"d"),g=!1,f=!1;for(p=1;p<=3;p++){var v=a[p];(v.length>2||v>31)&&(l=v,g=!0,h=p-1)}for(g||(h=fe(_,"y"),l=a[fe(_,"y")+1]),p=0;p<3;p++)if(p!==h&&a[p+1]>12){d=a[p+1],f=!0,c=p;break}if(f){for(p=0;p<3;p++)if(p!==c&&p!==h){u=a[p+1];break}void 0===u&&(u=a[fe(_,"M")+1])}else h===fe(_,"d")?(d=a[fe(_,"y")+1],u=a[fe(_,"M")+1]):h===fe(_,"M")?(d=a[fe(_,"d")+1],u=a[fe(_,"y")+1]):(d=a[fe(_,"d")+1],u=a[fe(_,"M")+1]);var y=x(l,u-=1);f&&m!==c&&u>12&&ge("month",d,0,11,d,1,12),ge("month",u,0,11,u+1,1,12),ge("day",d,1,y,d,1,y),ge("year",l=ue(w(i),parseInt(l,10)),0,9999,l,0,9999);var b=new Date(l,u,d),C=ye(e,o);if(null!==C){var S=_e(o,C,0);b.getDay()!==S&&ae(C,b.getDate())}var E={value:b,offset:"",warning:"lenient parsing was used"};if(r){var T=e.substr(s.lastIndex);0===T.length?E.value.setHours(0,0,0,0):ve(E.value,T,t,o,2)}return E.value=n.OraI18nUtils.dateToLocalIso(E.value),E}(l,t,i,r,a);var y=me(r,h,2);ge("month",y,0,11,y,1,12);var b=ye(l,r),C=new RegExp(b+"\\W","i");null!==b&&(e=e.replace(C,"")),o.lastIndex=0;var S=o.exec(e);null===S&&le(l,t,a?2:0);var E,T,D,A=[{y:t.indexOf("y")},{d:t.indexOf("d")}];A.sort(function(e,t){var i=Object.keys(e)[0],n=Object.keys(t)[0];return e[i]-t[n]});var I=!1;for(d=1;d<=2;d++){var O=S[d];(O.length>2||O>31)&&(E=O,I=!0,D=d-1)}I||(D=fe(A,"y"),E=S[fe(A,"y")+1]),T=D===fe(A,"d")?S[fe(A,"y")+1]:S[fe(A,"d")+1],ge("year",E=ue(w(i),parseInt(E,10)),0,9999,E,0,9999);var R=new Date(E,y,T);if(null!==b){var L=_e(r,b,0);R.getDay()!==L&&ae(b,R.getDate())}var N=x(E,y);ge("day",T,1,N,T,1,N);var P={value:R,offset:"",warning:"lenient parsing was used"};if(a){var j=e.substr(o.lastIndex);0===j.length?P.value.setHours(0,0,0,0):ve(P.value,j,t,r,2)}return P.value=n.OraI18nUtils.dateToLocalIso(P.value),P}function Ce(e,t,i,o){switch(Ae(i,"OraDateTimeConverter.parse")){case 0:return be(e,t,i,o,!1);case 1:var s=new Date;return ve(s,e,t,o,1),{value:n.OraI18nUtils.dateToLocalIso(s),offset:"",warning:"lenient parsing was used"};case 2:return be(e,t,i,o,!0)}return null}function Se(e,t,i,o,s,r,a,l,u,d,h){var c,p=n.OraI18nUtils.getLocaleElementsMainNode(e).dates.calendars.gregorian[t][s];return ge(h,c="months"===t?me(e,i,r):_e(e,i,r),a,l,i,p[o][u],p[o][d]),c}function Ee(e,t,i,n){var o=t;o[i.timePart]=e,"h"===n||"hh"===n?12===e&&(o[i.timePart]=0):"k"!==n&&"kk"!==n||24===e&&(o[i.timePart]=0),ge(i.timePart,o[i.timePart],i.start1,i.end1,e,i.start2,i.end2)}function Te(e,t,i,o){var s=n.OraI18nUtils.getLocaleElementsMainNode(o),r=s.dates.calendars.gregorian.eras.eraAbbr[1],a=n.OraI18nUtils.trimNumber(r);e=e.replace(r,a);var l=n.OraI18nUtils.getGetOption(i,"OraDateTimeConverter.parse")("lenientParse","string",["none","full"],"full"),u=Ae(i,"OraDateTimeConverter.parse"),d=function(e,t){for(var i=e.replace(_,"\\\\$1"),n=["^"],o=[],s=0,r=0,a=m.exec(i);null!==a;){var l=i.slice(s,a.index);if(s=m.lastIndex,(r+=N(l,n))%2)n.push(a[0]);else{var u,d=a[0];void 0!==O[d]?u=O[d].regExp:P(e,t,d),u&&n.push(u),o.push(a[0])}a=m.exec(i)}N(i.slice(s),n),n.push("$");var h={regExp:n.join("").replace(/\s+/g,"\\s+"),groups:o};return h}(t,i),h=new RegExp(d.regExp).exec(e);if(null===h){if("full"===l)return Ce(e,t,i,o);le(e,t,u)}for(var c,p=d.groups,g=null,f=null,v=null,y=null,b="",C=null,S=!1,E={hour:0,minute:0,second:0,millisec:0},T=s.dates.calendars.gregorian.dayPeriods.format.wide.pm,D=w(i),A=0,I=p.length;A<I;A++){var R=h[A+1];if(R){var L=p[A],j=parseInt(R,10),M=O[L];switch(M.token){case"months":f=Se(o,M.token,R,M.mLen,M.style,M.matchIndex,0,11,"1","12","month name");break;case"days":c=R,y=Se(o,M.token,R,M.dLen,M.style,M.matchIndex,0,6,"sun","sat","weekday");break;case"time":Ee(j,E,M,L);break;case"dayOfMonth":if((v=j)>31&&"full"===l)return Ce(e,t,i,o);break;case"monthIndex":if((f=j-1)>11&&"full"===l)return Ce(e,t,i,o);break;case"year":ge("year",g=ue(D,j),0,9999,g,0,9999);break;case"ampm":S=-1!==n.OraI18nUtils.toUpper(R).indexOf(n.OraI18nUtils.toUpper(T));break;case"tzhm":b=R.substr(-2),b=R.substr(0,3)+":"+b;break;case"tzhsepm":b=R;break;case"tzh":b=R+":00";break;case"tzid":C=R}}}var H=new Date;null===g&&(g=H.getFullYear()),null===f&&null===v?(f=H.getMonth(),v=H.getDate()):null===v&&(v=1),ge("month",f,0,11,f+1,1,12);var k=x(g,f);ge("day",v,1,k,v,1,k),H.setFullYear(g,f,v),null!==y&&H.getDay()!==y&&ae(c,H.getDate()),S&&E.hour<12&&(E.hour+=12);var U=[g,f+1,v,E.hour,E.minute,E.second,E.millisec],B=n.OraI18nUtils.partsToIsoString(U);if(null!==C){var F=V(C,o),$=G(F,U,!1,!0,!0);b=-F.ofset($),b=n.OraI18nUtils.getTimeStringFromOffset("",b,!1,!0)}return""!==b&&(B+=b),{value:B}}function De(e,t,i){for(var n=i.replace(_,"\\\\$1"),o=["^"],s=0,r=0,a={locale:e,numberingSystem:t,calendar:"gregorian"},l=m.exec(n);null!==l;){var u=n.slice(r,l.index);if(r=m.lastIndex,(s+=N(u,o))%2==0){var d=l[0];"/"!==d&&"zzzz"!==d&&"zzz"!==d&&"zz"!==d&&"z"!==d&&(void 0!==O[d]?(void 0!==O[d].key&&(a[O[d].key]=O[d].value),"kk"===d||"HH"===d||"H"===d||"k"===d?a.hour12=!1:"KK"!==d&&"hh"!==d&&"h"!==d&&"K"!==d||(a.hour12=!0)):P(i,a,d))}l=m.exec(n)}return a}function Ae(e,t){if(void 0!==e.pattern)return function(e){var t=De("","",e),i=void 0!==t.year||void 0!==t.month||void 0!==t.weekday||void 0!==t.day,n=void 0!==t.hour||void 0!==t.minute||void 0!==t.second||void 0!==t.millisecond;return i&&n?2:n?1:0}(e.pattern);var i=n.OraI18nUtils.getGetOption(e,t),o=void 0!==i("hour","string",["2-digit","numeric"])||void 0!==i("minute","string",["2-digit","numeric"])||void 0!==i("second","string",["2-digit","numeric"])||void 0!==i("millisecond","string",["numeric"]),s=void 0!==i("year","string",["2-digit","numeric"])||void 0!==i("month","string",["2-digit","numeric","narrow","short","long"])||void 0!==i("day","string",["2-digit","numeric"])||void 0!==i("weekday","string",["narrow","short","long"]);if(s&&o)return 2;if(o)return 1;if(s)return 0;var r=i("formatType","string",["date","time","datetime"],"date");return"datetime"===r?2:"time"===r?1:0}function Ie(e,t){var i=G(e,t,!1,!0,!1),n=e.ofset(i),o=e.ofset(i+1);return Math.max(n,o)}function Oe(e,t,i){var o,s,r,a,l=e.isoStrParts,u=e.format,d=V(t.timeZone,i);switch(o=Date.UTC(l[0],l[1]-1,l[2],l[3],l[4],l[5]),u){case T:var h=e.timeZone;s=h.split(":");var c=parseInt(s[0],10),p=parseInt(s[1],10);s=60*c+(n.OraI18nUtils.startsWith(h,"-")?-p:p);break;case b:s=0}o-=6e4*((r=Ie(d,l))+s),a=d.parse(o,!1,!0,!1),r=-d.ofset(a),r-=s;var _=new Date(Date.UTC(l[0],l[1]-1,l[2],l[3],l[4],l[5])),m=_.getUTCMinutes()+r;_.setUTCHours(_.getUTCHours()+(m/60<<0),m%60),l[0]=_.getUTCFullYear(),l[1]=_.getUTCMonth()+1,l[2]=_.getUTCDate(),l[3]=_.getUTCHours(),l[4]=_.getUTCMinutes(),l[5]=_.getUTCSeconds()}function we(e,t){var i,o="";switch(e){case 0:o=n.OraI18nUtils.padZeros(t[0],4)+"-"+n.OraI18nUtils.padZeros(t[1],2)+"-"+n.OraI18nUtils.padZeros(t[2],2);break;case 1:o="T"+n.OraI18nUtils.padZeros(t[3],2)+":"+n.OraI18nUtils.padZeros(t[4],2)+":"+n.OraI18nUtils.padZeros(t[5],2),(i=t[6])>0&&(o+="."+n.OraI18nUtils.trimRightZeros(n.OraI18nUtils.padZeros(i,3)));break;default:o=n.OraI18nUtils.padZeros(t[0],4)+"-"+n.OraI18nUtils.padZeros(t[1],2)+"-"+n.OraI18nUtils.padZeros(t[2],2)+"T"+n.OraI18nUtils.padZeros(t[3],2)+":"+n.OraI18nUtils.padZeros(t[4],2)+":"+n.OraI18nUtils.padZeros(t[5],2),(i=t[6])>0&&(o+="."+n.OraI18nUtils.trimRightZeros(n.OraI18nUtils.padZeros(i,3)))}return o}function Re(e,t,i,o,s,r){var a=V(e,s),l=G(a,t,i,o,r),u=a.ofset(l);return n.OraI18nUtils.getTimeStringFromOffset("",u,!0,!0)}function xe(e,t,i,o){var s,r,a=n.OraI18nUtils.getNumberingExtension(o);if(void 0===n.OraI18nUtils.numeringSystems[a]&&(a="latn"),"latn"!==a){for(var l=[],u=0;u<e.length;u++){var d=n.OraI18nUtils.numeringSystems[a].indexOf(e[u]);-1!==d?l.push(d):l.push(e[u])}e=l.join("")}(arguments.length<=2||void 0===i)&&(i={year:"numeric",month:"numeric",day:"numeric"});var h,c,p,_={};return!0===n.OraI18nUtils._ISO_DATE_REGEXP.test(e)?(h=e,s=-1===(p=e.indexOf("T"))?0:p>0?2:1):(r=i.pattern||k(i,t,o,"OraDateTimeConverter.parse"),s=Ae(i,"OraDateTimeConverter.parse"),h=(_=Te(e,r,i,t)).value),c=n.OraI18nUtils.getISOStrFormatInfo(h),void 0!==i.timeZone&&c.format!==C&&Oe(c,i,t),h=function(e,t,i,o){var s,r,a,l=n.OraI18nUtils.getGetOption(i,"OraDateTimeConverter.parse"),u=l("isoStrFormat","string",[b,T,E,C,S],S),d=l("dst","boolean",[!0,!1],!1),h=!0,c=t.isoStrParts,p=t.timeZone,_=i.timeZone,m=t.format,g=i.isoStrFormat,f=we(e,c);if(0===e||"local"===g)return f;switch(1===e&&(h=!1),u){case T:void 0===_&&m===T?f+=p:void 0===_&&m===C?f+="":void 0===_&&m===b?f+="+00:00":void 0!==_&&(f+=a=Re(_,c,d,h,o,!0));break;case b:var v=0;if(void 0===_){if(m===T){a=p.split(":");var y=parseInt(a[0],10),D=parseInt(a[1],10);v=-(v=60*y+(n.OraI18nUtils.startsWith(a[0],"-")?-D:D))}}else r=G(s=V(_,o),c,d,h,!0),v=a=s.ofset(r);if(0!==v){var A=new Date(Date.UTC(c[0],c[1]-1,c[2],c[3],c[4],c[5],c[6]));v=A.getUTCMinutes()+v,A.setUTCHours(A.getUTCHours()+(v/60<<0),v%60),c[0]=A.getUTCFullYear(),c[1]=A.getUTCMonth()+1,c[2]=A.getUTCDate(),c[3]=A.getUTCHours(),c[4]=A.getUTCMinutes(),c[5]=A.getUTCSeconds(),f=we(e,c)}f+="Z";break;case S:void 0!==_?f+=a=Re(_,c,d,h,o,!0):(a=p)&&(f+=a)}return f}(s,c,i,t),_.value=h,_}function Le(e,t,i,n,o,s,r,a){var l={locale:a,numberingSystem:r,calendar:"gregorian"};if(0===Object.keys(e).length)return l.year="numeric",l.month="numeric",l.day="numeric",l.lenientParse="full",l;void 0!==i&&(l.timeZone=i,void 0!==o&&(l.isoStrFormat=o)),function(e,t){var i=t,n=e("formatUsing","string",["displayName","calendar"]);void 0!==n&&(i.formatUsing=n),void 0!==(n=e("dateField","string",["day","week","month","year","hour","minute","second"]))&&(i.dateField=n),void 0!==(n=e("relativeTime","string",["fromNow","toNow"]))&&(i.relativeTime=n),void 0!==(n=e("dateOnly","boolean",[!0,!1]))&&(i.dateOnly=n)}(t,l);var u=function(e,t,i,n){var o,s=t,r=!1;return void 0!==i&&(s.dst=i),void 0!==(o=e("year","string",["2-digit","numeric"]))&&(s.year=o,r=!0),void 0!==(o=e("era","string",["narrow","short","long"]))&&(s.era=o,r=!0),void 0!==(o=e("month","string",["2-digit","numeric","narrow","short","long"]))&&(s.month=o,r=!0),void 0!==(o=e("day","string",["2-digit","numeric"]))&&(s.day=o,r=!0),void 0!==(o=e("weekday","string",["narrow","short","long"]))&&(s.weekday=o,r=!0),void 0!==(o=e("hour","string",["2-digit","numeric"]))&&(s.hour=o,r=!0,void 0===(o=e("hour12","boolean",[!0,!1]))&&(o=R(n)),s.hour12=o),void 0!==(o=e("minute","string",["2-digit","numeric"]))&&(s.minute=o,r=!0),void 0!==(o=e("second","string",["2-digit","numeric"]))&&(s.second=o,r=!0),void 0!==(o=e("millisecond","string",["numeric"]))&&(s.millisecond=o,r=!0),r}(t,l,n,s);if(l["two-digit-year-start"]=w(e),!u)return function(e,t,i,n){var o=e,s=L(t,i,de.resolvedOptions),r=n("formatType","string",["date","time","datetime"],"date"),a=n("dateFormat","string",["short","medium","long","full"],"short"),l=n("timeFormat","string",["short","medium","long","full"],"short");o.formatType=r,"datetime"!==r&&"date"!==r||(o.dateFormat=a),"datetime"!==r&&"time"!==r||(o.timeFormat=l),o.patternFromOptions=s,o.lenientParse=n("lenientParse","string",["none","full"],"full")}(l,e,s,t),l;if(void 0!==i){var d=t("timeZoneName","string",["short","long"]);void 0!==d&&(l.timeZoneName=d)}return l.lenientParse=t("lenientParse","string",["none","full"],"full"),l.patternFromOptions=k(l,s,a,"OraDateTimeConverter.resolvedOptions"),l}function Ne(e,t,i){var o,s,r;(arguments.length<3||void 0===i)&&(i=n.OraI18nUtils.getLocaleElementsMainNodeKey(e)),(arguments.length<2||void 0===t)&&(t={year:"numeric",month:"numeric",day:"numeric"});var a=n.OraI18nUtils.getGetOption(t,"OraDateTimeConverter.resolvedOptions");void 0!==t&&(s=a("isoStrFormat","string",[b,T,E,C,S],S),r=a("dst","boolean",[!0,!1],!1),o=t.timeZone);var l=n.OraI18nUtils.getNumberingExtension(i);return void 0===n.OraI18nUtils.numeringSystems[l]&&(l="latn"),void 0!==t&&void 0!==t.pattern?function(e,t,i,n,o,s,r){var a=De(n,o,s.pattern);return a.pattern=s.pattern,void 0!==e&&(a.isoStrFormat=e),void 0!==t&&(a.timeZone=t),void 0!==i&&(a.dst=i),a["two-digit-year-start"]=w(s),a.lenientParse=r("lenientParse","string",["none","full"],"full"),a}(s,o,r,i,l,t,a):void 0!==t?Le(t,a,o,r,s,e,l,i):function(e,t,i){return{calendar:"gregorian",locale:t,numberingSystem:i,year:"numeric",month:"numeric",day:"numeric",patternFromOptions:k({year:"numeric",month:"numeric",day:"numeric"},e,t,"OraDateTimeConverter.resolvedOptions"),lenientParse:"full"}}(e,i,l)}function Pe(){return{format:function(e,t,i,o){var s;if("number"==typeof e)s=n.OraI18nUtils.dateToLocalIso(new Date(e));else{if("string"!=typeof e)return null;if(""===(s=n.OraI18nUtils.trim(e)))return null}(arguments.length<=2||void 0===i)&&(i={year:"numeric",month:"numeric",day:"numeric"});var r=$(t,i,n.OraI18nUtils.getISOStrFormatInfo(s),o),a=n.OraI18nUtils.getNumberingExtension(o);if(void 0===n.OraI18nUtils.numeringSystems[a]&&(a="latn"),"latn"!==a){for(var l=[],u=0;u<r.length;u++)r[u]>="0"&&r[u]<="9"?l.push(n.OraI18nUtils.numeringSystems[a][r[u]]):l.push(r[u]);return l.join("")}return r},formatRelative:function(e,t,i){return re(e,t,i)},parse:function(e,t,i,n){return xe(e,t,i,n)},resolvedOptions:function(e,t,i){return Ne(e,t,i)},calculateWeek:function(e){var t,i=n.OraI18nUtils.isoToLocalDate(e),o=new Date(i.getTime());return o.setDate(o.getDate()+4-(o.getDay()||7)),t=o.getTime(),o.setMonth(0),o.setDate(1),Math.floor(Math.round((t-o)/864e5)/7)+1},getAvailableTimeZones:function(e){return function(e){var t=ce.getInstance(),o={sensitivity:"variant"},s=n.OraI18nUtils.getLocaleElementsMainNodeKey(e),r=n.OraI18nUtils.getLocaleElementsMainNode(e),a=r.dates.timeZoneNames.metazone,l=r.dates.timeZoneNames.zone,u=[],d={},h=e.supplemental.timeZoneData,c=new Date,p=[c.getFullYear(),c.getMonth()+1,c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds()];function _(t,i,o,s){var r=t.split("/"),a=r[0],l=r[1],u="",d="",h={},c=s[a];void 0!==c&&void 0!==(u=c[l])&&void 0!==(u=u.exemplarCity)&&(u=" "+u);var _=a+"/"+l,m=e.supplemental.metazones,g=B(p,_,m);void 0!==o&&(g=o[g]),null!=g&&void 0!==g.long&&(void 0===(d=g.long.generic)&&(d=g.long.standard),void 0!==d&&(d=" - "+d));var f="("+D+")";return 0!==i&&(f="("+(f=n.OraI18nUtils.getTimeStringFromOffset(D,i,!0,!0))+")"),void 0===u||void 0===d?null:(h.offsetLocName=f+u+d,h.locName=u+d,h)}function m(i){for(var n,o=Object.keys(i),s=0;s<o.length;s++){var r=o[s],h=_(r,n=Ie(t.getZone(r,e),p),a,l);null!==h&&u.push({id:r,displayName:h}),d[r]=n}}var g=n.OraI18nUtils.getLocaleElementsMainNodeKey(e);if(void 0!==i[g]){var f=i[g].availableTimeZones;if(void 0!==f)return f}m(h.zones),m(h.links),u.sort(function(e,t){return d[t.id]-d[e.id]+e.displayName.locName.localeCompare(t.displayName.locName,s,o)});for(var v=u.length,y=0;y<v;y++)u[y].displayName=u[y].displayName.offsetLocName;return void 0===i[g]&&(i[g]={},i[g].availableTimeZones=u),u}(e)},compareISODates:function(e,t,i){var o=function(e,t){var i={isoStrFormat:C},o=n.OraI18nUtils.getISOStrFormatInfo(e),s=n.OraI18nUtils.getISOStrFormatInfo(t),r=o.format,a=s.format;return r===C||a===C?i:(i.isoStrFormat=b,i)}(e,t),s=xe(e,i,o,"en-US"),r=xe(t,i,o,"en-US"),a=s.value.replace("Z",""),l=r.value.replace("Z",""),u=n.OraI18nUtils._IsoStrParts(a);u=Date.UTC(u[0],u[1]-1,u[2],u[3],u[4],u[5],u[6]);var d=n.OraI18nUtils._IsoStrParts(l);return u-(d=Date.UTC(d[0],d[1]-1,d[2],d[3],d[4],d[5],d[6]))},isHour12:function(e){return R(e)},getTimePositioning:function(e,t,i){var o=Ne(e,t,i),s=o.pattern||o.patternFromOptions;s=(s=s.replace(/'[^']*'/g,"").replace(/[^hHkKma]*/g,"")).replace(/(h|H|k|K)+/,"h").replace(/m+/,"m");var r=oe(n.OraI18nUtils.getLocaleElementsMainNodeKey(e)),a="ar"===r||"he"===r,l={},u=0,d=s.length;for(u=0;u<d;u++)l[s.charAt(u)]=u;return a&&(u=l.h,l.h=l.m,l.m=u),l}}}return{getInstance:function(){return e||(e=Pe()),e}}}();var ce=function(){var e,t={},i=/^Etc\/GMT/i,n=6e4,o=60*n,s=-840,r=720,a="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX",l=1e-6;function u(e,t){for(var i="",n=Math.abs(e),o=Math.floor(n),s=function(e,t){for(var i=".",n="";t>0;){t-=1,e*=60;var o=Math.floor(e+l);i+=a[o],e-=o,o&&(n+=i,i="")}return n}(n-o,Math.min(t,10));o>0;)i=a[o%60]+i,o=Math.floor(o/60);return e<0&&(i="-"+i),i&&s?i+s:(s||"-"!==i)&&(i||s)||"0"}function d(e){return e>96?e-87:e>64?e-29:e-48}function h(e){var t=0,i=e.split("."),n=i[0],o=i[1]||"",s=1,r=0,a=1;for(45===e.charCodeAt(0)&&(t=1,a=-1);t<n.length;t++)r=60*r+d(n.charCodeAt(t));for(t=0;t<o.length;t++)s/=60,r+=d(o.charCodeAt(t))*s;return r*a}function c(e){for(var t=0;t<e.length;t++)e[t]=h(e[t])}function p(e,t){for(var i=[],n=0;n<t.length;n++)i[n]=e[t[n]];return i}function _(e,t){var i=t.split("|"),o=i[1].split(" "),s=i[2].split(""),r=i[3].split(" ");return c(o),c(s),c(r),function(e,t){for(var i=0;i<t;i++)e[i]=Math.round((e[i-1]||0)+e[i]*n);e[t-1]=1/0}(r,s.length),{name:e,abbrs:p(i[0].split(" "),s),offsets:p(o,s),untils:r}}function m(){var e=new Error("The input time does not exist because it falls during the transition to daylight saving time.");throw e.errorInfo={errorCode:"nonExistingTime"},e}function g(e,t){var n=t.zones[e];if(i.test(e)){var o=e.replace(i,"").split(":"),a=60*parseInt(o[0],10),l=0;if(isNaN(a))return;if(2===o.length&&(l=parseInt(o[1],10),isNaN(l)))return;if((a+=a>=0?l:-l)<s||a>r)return;a=u(a,1),n=e.replace("/etc//i","").toUpperCase()+"|"+a+"|0|"}void 0!==n&&this._set(_(e,n))}function f(e){return(e||"").toLowerCase().replace(/\//g,"_")}function v(e,i){var n=f(e);return void 0===t[n]&&function(e,i){var n=new g(e,i),o=f(n.name);t[o]=n}(e,i),t[f(e)]||null}function y(){return{getZone:function(e,t){var i=t.supplemental.timeZoneData;void 0===i&&function(){var e=new Error("TimeZone data is missing. Please call require 'ojs/ojtimezonedata' in order to load the TimeZone data.");throw e.errorInfo={errorCode:"missingTimeZoneData"},e}();var n=v(e,i);if(!n){var o=i.links[e];o&&(n=v(o,i))}return n||function(e){var t=new Error("invalid timeZone ID: "+e),i={errorCode:"invalidTimeZoneID",parameterMap:{timeZoneID:e}};throw t.errorInfo=i,t}(e),n}}}return g.prototype={_set:function(e){this.name=e.name,this.abbrs=e.abbrs,this.untils=e.untils,this.offsets=e.offsets},parse:function(e,t,i,s){for(var r=this.offsets,a=this.untils,l=a.length-1,u=0;u<l;u++){var d=r[u],h=r[u+1],c=a[u],p=c-d*n,_=p-o;if(e>=p&&e<p+o&&d>h){if(!0!==s)return u+1;m()}if(e>=_&&e<p&&d<h)return t?u:u+1;if(e<c-d*n)return!1===i?t?d<h?u:u+1:d<h?u+1:u:u}return l},abbr:function(e){return this.abbrs[e]},ofset:function(e){var t=this.offsets.length;return e>=0&&e<t?parseInt(this.offsets[e],10):parseInt(this.offsets[t-1],10)},len:function(){return this.offsets.length}},{getInstance:function(){return e||(e=y()),e}}}(),pe={};pe.DateRestrictionValidator=n.DateRestrictionValidator,pe.DateTimeConverter=n.DateTimeConverter,pe.DateTimeRangeValidator=n.DateTimeRangeValidator,pe.IntlDateTimeConverter=n.IntlDateTimeConverter;var _e,me,ge,fe,ve,ye=(new function(){var t=new WeakMap,i={},n={},o="_ojExtended",s="_ojCacheScope";function r(e){return new Function("$context","$element","with($context.$data||{}){with($context){return "+e+"}}")}function a(e,i,n){if(!n)return e(i,n);var o,r=t,a=n[s]||n;(o=r.get(a))||(o={},r.set(a,o));var l=o[i];return l||(l=e(i,n),o[i]=l),l}function l(e,t,i){var n=t.getBindingsString;if(n)return n.call(t,e,i);switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:var o=e.nodeValue.match(/^\s*ko(?:\s+([\s\S]+))?\s*$/);return o?o[1]:null;default:return null}}this.install=function(){var t=ko.bindingProvider,s=t.instance;if(!s.getBindingAccessors)return e.error("JET's Knockout bindings are not compatible with the current binding provider since it does not implement getBindingAccessors()"),this;var u={};t.instance=u;var d=[];return d.push("getBindingAccessors","nodeHasBindings","getBindings"),d.forEach(function(e){u[e]=function(e,t,n){var o="nodeHasBindings"===t;return function(s){if(o){var r=s.nodeType;if(1!==r&&8!==r)return!1}var a=n(t,e[t]),l=a?a.apply(e,arguments):null,u=i[t];if(null!=u){var d=arguments;u.forEach(function(t){var i=Array.prototype.slice.call(d);i.push(l,e),l=ko.ignoreDependencies(t,null,i)})}return l}}(s,e,function(e,t){return"getBindingAccessors"!==e?t:function(e,t){return function(i,n){if(n[o]){var s=l(i,t,n),u=s?function(e,t){return a(function(e){var t=ko.expressionRewriting.preProcessBindings(e,{valueAccessors:!0});return r("{"+t+"}")},e,t)}(s,n)(n,i):null;if(1===i.nodeType&&ko.components.isRegistered(i.tagName.toLowerCase())){var d=e.call(t,i,n),h=d.component;h&&((u=u||{}).component=h)}return u}return e.call(t,i,n)}}(t,s)})}),u.preprocessNode=function(e){var t=e.preprocessNode;return function(i){var o,s,r=null;return 1===i.nodeType&&(o=n[i.nodeName.toLowerCase()]),o||(o=t,r=e),o&&(s=ko.ignoreDependencies(o,r,[i])),Array.isArray(s)&&(s=function(e,t){for(var i=ko.bindingProvider.instance,n=t.slice(0),o=t[0],s=0,r=0;s>=0;){var a=ko.virtualElements.nextSibling(o);if(o!==e){var l=i.preprocessNode(o);Array.isArray(l)&&(n.splice.apply(n,[r,1].concat(l)),r+=l.length-1)}r+=1;var u=s+1;s=(o=a)?t.indexOf(o,u):-1,r+=s-u}return n}(i,s)),s}}(s),function(e){var t=e.nativeTemplateEngine.prototype,i="renderTemplateSource",n=t[i];t[i]=function(e,t,i,o){return n.call(this,e,t,i,o||document)}}(ko),this},this.addPostprocessor=function(e){Object.keys(e).forEach(function(t){i[t]=i[t]||[],i[t].push(e[t])})},this.registerPreprocessor=function(e,t){n[e]=t},this.getBindingsString=function(e,t,i){return l(e,t,i)},this.extendBindingContext=function(e,t,i,n,r){var a={$current:t,$root:void 0,$parent:void 0,$parents:void 0};return i&&(a[i]=t),n&&(a[n]=t),e?a=e.extend(a):a.$data={},Object.defineProperty(a,s,{value:r}),Object.defineProperty(a,o,{value:!0}),a},this.createBindingExpressionEvaluator=function(e,t){return t[o]?r(e):new Function("$context","with($context){with($data||{}){return "+e+";}}")},this.createEvaluator=function(e,t){return a(this.createBindingExpressionEvaluator,e,t)}}).install(),be={getRenderer:function(e,t){var i=function(i){var n=i._parentElement||i.parentElement,o=ko.contextFor(i.componentElement);if(o){var s=o.createChildContext(i.data,null,function(e){e.$context=i});ko.renderTemplate(e,s,{afterRender:function(e){$(e)._ojDetectCleanData()}},n,t?"replaceNode":"replaceChildren")}return null};return function(t){if(t.componentElement.classList&&t.componentElement.classList.contains("oj-dvtbase")){var n=document.createElement("div");n.style.display="none",n._dvtcontext=t._dvtcontext,t.componentElement.appendChild(n),Object.defineProperty(t,"_parentElement",{value:n,enumerable:!1}),Object.defineProperty(t,"_templateCleanup",{value:function(){$(n).remove()},enumerable:!1}),Object.defineProperty(t,"_templateName",{value:e,enumerable:!1}),i(t);var o=n.children[0];return o?("http://www.w3.org/2000/svg"===o.namespaceURI&&(n.removeChild(o),$(n).remove()),{insert:o}):{preventDefault:!0}}return i(t)}}},Ce={};function Se(){this.Init()}function Ee(e,t){var i={};return i.value=t.value,i}function Te(e,t,i){return"pieCenter"===e&&t.template&&(t._renderer=Le(i,t.template)),{pieCenter:t}}function De(e,t,i){return"optionTemplate"===e&&null!==t?{optionRenderer:function(e,t){return function(i){var n=i.parentElement,o=e.createChildContext(i.data,null,function(e){e.$optionContext=i});return ko.renderTemplate(t,o,null,n),null}}(i,String(t))}:null}function Ae(e,t){this.Init(e,t)}function Ie(e,t){var i={};return function(n){var o=n.parentElement,s=e.createChildContext(n.data,null,function(e){e.$key=n.key,e.$metadata=n.metadata,e.$headerContext=n});return we(n,t,o,s,i),null}}function Oe(e,t){var i={};return function(n){var o=n.parentElement,s=e.createChildContext(n.data,null,function(e){e.$keys=n.keys,e.$metadata=n.metadata,e.$cellContext=n,e.$cell=n.cell});return we(n,t,o,s,i),null}}function we(e,t,i,n,o){var s=function(e,t){var i=t[e];null==i&&(i=ko.utils.parseHtmlFragment(document.getElementById(e).innerHTML,document),t[e]=i);return i.map(function(e){return e.cloneNode(!0)})}(function(e,t){if("function"==typeof e)return e(t);return e}(t,e),o);ko.virtualElements.setDomNodeChildren(i,s),ko.applyBindingsToDescendants(n,i);for(var r=0;r<i.childNodes.length;r++)if(1===i.childNodes[r].nodeType){$(i.childNodes[r])._ojDetectCleanData({cleanParent:!0});break}}function Re(e,t,i){return"template"===e?{_templateFunction:Ne(i,t)}:null}function xe(e,t){for(var i=0;i<e.length;i++){var n=e[i],o=n.key,s=n.value;if(null!=o&&null!=s&&t(o.trim(),s.trim()))break}}function Le(e,t){return function(i){var n=e.createChildContext(i.context);return ko.renderTemplate(t,n,{afterRender:function(e){$(e)._ojDetectCleanData()}},i.parentElement),null}}function Ne(e,t){return function(i){var n=e.createChildContext(i.data);return ko.renderTemplate(t,n,{afterRender:function(e){$(e)._ojDetectCleanData()}},i.parentElement),null}}function Pe(e,t,i){return"tooltip"===e&&t.template&&(t._renderer=Le(i,t.template)),{tooltip:t}}function je(e,t,i){if("item"===e){var n=t.template;return null!=n&&(t.renderer=function(e,t){return function(i){var n=i.parentElement,o=e.createChildContext(i.data,null,function(e){e.$itemContext=i});return ko.renderTemplate(t,o,{afterRender:function(e){$(e)._ojDetectCleanData()}},n,"replaceNode"),null}}(i,n)),{item:t}}return null}function Me(e,t,i){return"center"===e&&t.template&&(t._renderer=Le(i,t.template)),{center:t}}function He(e,t,i){return"rootNodeContent"===e&&t.template&&(t._renderer=Le(i,t.template)),{rootNodeContent:t}}Ce.createMediaQueryObservable=function(e){if(null==e)throw new Error("ResponsiveKnockoutUtils.createMediaQueryObservable: aborting, queryString is null");var t=window.matchMedia(e),i=ko.observable(t.matches);return t.addListener(function(e){i(e.matches)}),-1!==navigator.userAgent.indexOf("WebKit")&&-1===navigator.userAgent.indexOf("Chrome")&&$(window).resize(function(){var e="oj-webkit-bug-123293";0===$("body").has("."+e).length&&$("body").append('<div aria-hidden="true" class="oj-helper-hidden-accessible '+e+'">'),$("."+e).text((new Date).getMilliseconds().toString())}),i},Ce.createScreenRangeObservable=function(){var e=f.getFrameworkQuery(f.FRAMEWORK_QUERY_KEY.XXL_UP),t=f.getFrameworkQuery(f.FRAMEWORK_QUERY_KEY.XL_UP),i=f.getFrameworkQuery(f.FRAMEWORK_QUERY_KEY.LG_UP),n=f.getFrameworkQuery(f.FRAMEWORK_QUERY_KEY.MD_UP),o=f.getFrameworkQuery(f.FRAMEWORK_QUERY_KEY.SM_UP),s=null==e?null:Ce.createMediaQueryObservable(e),r=null==t?null:Ce.createMediaQueryObservable(t),a=null==i?null:Ce.createMediaQueryObservable(i),l=null==n?null:Ce.createMediaQueryObservable(n),u=null==o?null:Ce.createMediaQueryObservable(o);return ko.computed(function(){if(s&&s())return f.SCREEN_RANGE.XXL;if(r&&r())return f.SCREEN_RANGE.XL;if(a&&a())return f.SCREEN_RANGE.LG;if(l&&l())return f.SCREEN_RANGE.MD;if(u&&u())return f.SCREEN_RANGE.SM;throw new Error(" NO MATCH in ResponsiveKnockoutUtils.createScreenRangeObservable")})},n.Object.createSubclass(Se,n.Object,"ComponentBinding.GlobalChangeQueue"),Se.prototype.Init=function(){Se.superclass.Init.call(this),this._trackers=[],this._queue=[]},Se.prototype.registerComponentChanges=function(e){-1===this._trackers.indexOf(e)&&(this._trackers.push(e),this._delayTimer||(this._delayTimer=setTimeout(n.Object.createCallback(this,this._deliverChangesImpl),1)))},Se.prototype.deliverChanges=function(){this._delayTimer&&clearTimeout(this._delayTimer),this._deliverChangesImpl()},Se.prototype._deliverChangesImpl=function(){this._delayTimer=null;var e=this._trackers;this._trackers=[];for(var t=0;t<e.length;t++){var i=e[t];this._queue.push({tracker:i,changes:i.flushChanges()})}for(;this._queue.length>0;){var n=this._queue.shift();n.tracker.applyChanges(n.changes)}},n.ComponentBinding=function(e,t){this.Init(e,t)},n.Object.createSubclass(n.ComponentBinding,n.Object,"oj.ComponentBinding"),n.ComponentBinding.create=function(e,t){if(null==e)throw new Error("Binding name is required!");for(var i=new n.ComponentBinding(e,t),o=ko.bindingHandlers,s=Array.isArray(e)?e:[e],r=0;r<s.length;r++){var a=s[r];n.ComponentBinding._REGISTERED_NAMES.push(a),o[a]=i}return i},n.ComponentBinding.getDefaultInstance=function(){return n.ComponentBinding._INSTANCE},n.ComponentBinding.prototype.setupManagedAttributes=function(e){var t=e.for;t=null==t?"@global":t;var i=this._managedAttrOptions[t]||[];i.push(e),this._managedAttrOptions[t]=i},n.ComponentBinding.deliverChanges=function(){n.ComponentBinding._changeQueue.deliverChanges()},n.ComponentBinding.prototype.Init=function(e,t){n.ComponentBinding.superclass.Init.call(this),"string"==typeof t&&(t={componentName:t}),this._bindingOptions=t||{},this._bindingNames=Array.isArray(e)?e:[e],this.init=this._init.bind(this),this.update=this._update.bind(this),this._managedAttrOptions={}},n.ComponentBinding.prototype._getBindingOptions=function(){return this._bindingOptions},n.ComponentBinding.prototype._init=function(e,t,i,n,o){return ko.applyBindingsToDescendants(o,e),{controlsDescendantBindings:!0}},n.ComponentBinding.prototype._update=function(t,i,o,s,r){var a,l,u=[],d=0,h=$(t);function c(e){u.forEach(function(e){e.dispose()}),u=[],e&&a&&(a("destroy"),a=null),l&&(l.dispose(),l=null),h.off(n.ComponentBinding._HANDLER_NAMESPACE)}function p(i,s,d){if(null!=i){var c=h[i];if("function"==typeof c){c=c.bind(h);l=new Ae(function(e){var t=n.ComponentBinding.__removeDotNotationOptions(e);c("option",e);for(var i=Object.keys(t),o=0;o<i.length;o++){var s=i[o];c("option",s,t[s])}},n.ComponentBinding._changeQueue);var p=Object.keys(d).filter(function(e){return!(null==e||e===s)}),_={component:c,changeTracker:l,componentName:i,specifiedOptions:p,computeds:u,valueAccessor:function(){return d},allBindingsAccessor:o,bindingContext:r,destroyCallback:function(){a=null},readOnlyProperties:{}};a=this._initComponent(t,_)}else e.error("Component %s is not found",i)}}ko.ignoreDependencies(function(){ko.computed(function(){var t=ko.utils.unwrapObservable(i());"object"!=typeof t&&e.error("ojComponent binding should evaluate to an object");var o,s=this._bindingOptions.componentName,r=!1;if(null==s&&null!=t){for(var a=[n.ComponentBinding._COMPONENT_OPTION,"role"],l=0;!r&&l<a.length;l++)(o=a[l])in t&&(r=!0,s=t[o]);r||e.error("component attribute is required for the ojComponent binding"),s=ko.utils.unwrapObservable(s)}0===d?d=1:ko.ignoreDependencies(c,this,[!0]),ko.ignoreDependencies(p,this,[s,o,t])},this,{disposeWhenNodeIsRemoved:t})},this),ko.utils.domNodeDisposal.addDisposeCallback(t,c.bind(this,!1))},n.ComponentBinding.prototype._initComponent=function(e,t){var i=!1,o=0,s={},r=$(e),a=t.component,l=t.componentName,u=this,d=function(o){if(o.target&&o.target===e){t.destroyCallback();var r=u._bindingOptions.beforeDestroy;r&&r(e,a,t.valueAccessor,t.allBindingsAccessor,t.bindingContext),n.ComponentBinding._deliverCreateDestroyEventToManagedProps(!1,s,e,a,t.valueAccessor,t.allBindingsAccessor,t.bindingContext),i=!0,t.changeTracker.dispose(),e.removeEventListener("_ojDestroy",d)}};e.addEventListener("_ojDestroy",d);var h=n.ComponentBinding._resolveManagedAttributes(this._managedAttrOptions,t.specifiedOptions,l),c=n.ComponentBinding.getDefaultInstance();if(this!==c){var p=c._getManagedAttributes(t.specifiedOptions,l);n.CollectionUtils.copyInto(p,h),h=p}for(var _={},m=function(){var r=this._property,l=n.ComponentBinding._toJS(t.valueAccessor()[r]);if(0===o){var u=h[r];if(null!=u){s[r]=u;var d=u.init;if(null!=d)for(var c=d(r,l,e,a,t.valueAccessor,t.allBindingsAccessor,t.bindingContext)||{},p=Object.keys(c),m=0;m<p.length;m++){var g=p[m];_[g]=n.ComponentBinding.__cloneIfArray(c[g])}}else _[r]=n.ComponentBinding.__cloneIfArray(l)}else if(!i)if(null!=h[r]){var f=h[r].update;if(null!=f)for(var v=f(r,l,e,a,t.valueAccessor,t.allBindingsAccessor,t.bindingContext)||{},y=Object.keys(v),b=0;b<y.length;b++){var C=y[b];t.changeTracker.addChange(C,n.ComponentBinding.__cloneIfArray(v[C]))}}else t.readOnlyProperties[r]||t.changeTracker.addChange(r,n.ComponentBinding.__cloneIfArray(l))},g=0;g<t.specifiedOptions.length;g++)t.computeds.push(ko.computed(m,{_property:t.specifiedOptions[g]}));o=1,n.ComponentBinding._registerWritebacks(r,t);var f=n.ComponentBinding.__removeDotNotationOptions(_);a(_),Object.keys(f).forEach(function(e){a("option",e,f[e])});var v=this._bindingOptions.afterCreate;return v&&v(e,a,t.valueAccessor,t.allBindingsAccessor,t.bindingContext),n.ComponentBinding._deliverCreateDestroyEventToManagedProps(!0,s,e,a,t.valueAccessor,t.allBindingsAccessor,t.bindingContext),_=null,a},n.ComponentBinding.prototype._getManagedAttributes=function(e,t){return n.ComponentBinding._resolveManagedAttributes(this._managedAttrOptions,e,t)},n.ComponentBinding._resolveManagedAttributes=function(e,t,i){var n={},o=[],s=function(t,i){var n=e[t];if(null!=n)for(var r=n.length-1;r>=0;r--){var a=n[r];if(null!=a.attributes&&o.push(a),i){var l=a.use;if(null!=l){l=Array.isArray(l)?l:[l];for(var u=0;u<l.length;u++)s(l[u],!0)}}}};s(i,!0);var r=$.oj[i];if(null!=r)for(var a=Object.getPrototypeOf(r.prototype);null!=a&&"oj"===a.namespace;)s(a.widgetName,!0),a=Object.getPrototypeOf(a);if(s("@global",!1),o.length>0)for(var l=0;l<t.length;l++)for(var u=t[l],d=0;d<o.length;d++){var h=o[d];if(h.attributes.indexOf(u)>=0){n[u]={init:h.init,update:h.update,afterCreate:h.afterCreate,beforeDestroy:h.beforeDestroy};break}}return n},n.ComponentBinding._HANDLER_NAMESPACE=".oj_ko",n.ComponentBinding._registerWritebacks=function(e,t){for(var i={"^slider$":[{event:"slidechange",getter:Ee}],"^oj*":[{event:"ojoptionchange",getter:function(e,t,i){var n={},o=i.optionMetadata;if(o&&"shouldWrite"===o.writeback){var s=i.option;n[s]=i.value,o.readOnly&&(e.readOnlyProperties[s]=!0)}return n}.bind(void 0,t)}]},o={},s=Object.keys(i),r=0;r<s.length;r++){var a=s[r];if(t.componentName.match(a)){for(var l=i[a],u=0;u<l.length;u++){var d=l[u];e.on(d.event+n.ComponentBinding._HANDLER_NAMESPACE,{getter:d.getter},function(i,s){if(i.target===e[0])for(var r=i.data.getter(i,s),a=t.valueAccessor(),l=Object.keys(r),u=0;u<l.length;u++){var d=l[u];t.changeTracker.suspend(d);try{if(t.specifiedOptions.indexOf(d)>=0){var h=a[n.ComponentBinding._OPTION_MAP],c=null==h?null:h[d],p=a[d];n.ComponentBinding._writeValueToProperty(d,p,r[d],c,t.bindingContext,o)}}finally{t.changeTracker.resume(d)}}})}break}}},n.ComponentBinding._writeValueToProperty=function(e,t,i,o,s,r){if(null!=t&&ko.isObservable(t))ko.isWriteableObservable(t)&&t(n.ComponentBinding.__cloneIfArray(i));else{if(!(e in r)){var a=null,l=n.__ExpressionUtils.getPropertyWriterExpression(o);null!=l&&(a=ye.createEvaluator(l,s)),r[e]=a}var u=r[e];if(u)u(s)(n.ComponentBinding.__cloneIfArray(i))}},n.ComponentBinding._toJS=function(e){var t=ko.utils.unwrapObservable(e);return(Array.isArray(t)||n.CollectionUtils.isPlainObject(t))&&t.ojConvertToJS&&(t=ko.toJS(t)),t},n.ComponentBinding.__cloneIfArray=function(e){return Array.isArray(e)&&(e=e.slice()),e},n.ComponentBinding.__removeDotNotationOptions=function(e){for(var t={},i=Object.keys(e),n=0;n<i.length;n++){var o=i[n];o.indexOf(".")>=0&&(t[o]=e[o],delete e[o])}return t},n.ComponentBinding._deliverCreateDestroyEventToManagedProps=function(e,t,i,n,o,s,r){for(var a=Object.keys(t),l=0;l<a.length;l++){var u=a[l],d=t[u],h=e?d.afterCreate:d.beforeDestroy;h&&h(u,i,n,o,s,r)}},n.ComponentBinding._changeQueue=new Se,n.ComponentBinding.__getKnockoutVersion=function(){return n.__isAmdLoaderPresent()&&ko?ko.version:""},n.ComponentBinding._isNameRegistered=function(e){return n.ComponentBinding._REGISTERED_NAMES.indexOf(e)>=0},n.ComponentBinding._REGISTERED_NAMES=[],n.ComponentBinding._COMPONENT_OPTION="component",n.ComponentBinding._OPTION_MAP="_ojOptions",_e="cleanExternalData",me=ko.utils.domNodeDisposal,ge=me[_e],me[_e]=function(e){var t=n.DomUtils?n.DomUtils.setInKoCleanExternal:null;t&&t(e);try{ge(e)}finally{t&&t(null)}},n.ComponentBinding._INSTANCE=n.ComponentBinding.create(["ojComponent","jqueryUI"]),$.widget("oj._ojDetectCleanData",{options:{cleanParent:!1},_destroy:function(){var e=ko.utils.domNodeDisposal,t=e.cleanExternalData;e.cleanExternalData=function(){};try{this.options.cleanParent&&null!=this.element[0].parentNode?ko.cleanNode(this.element[0].parentNode):ko.cleanNode(this.element[0])}finally{e.cleanExternalData=t}}}),n.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["pieCenter"],init:function(e,t,i,n,o,s,r){return Te(e,t,r)},update:function(e,t,i,n,o,s,r){return Te(e,t,r)},for:"ojChart"}),n.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["optionTemplate"],init:function(e,t,i,n,o,s,r){var a=De(e,t,r);if(null!==a)return a},update:function(e,t,i,n,o,s,r){return De(e,t,r)},for:"ComboboxOptionRenderer"}),n.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:"ojCombobox",use:"ComboboxOptionRenderer"}),n.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:"ojSelect",use:"ComboboxOptionRenderer"}),n.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:"ojInputSearch",use:"ComboboxOptionRenderer"}),n.Object.createSubclass(Ae,n.Object,"ComponentBinding.ComponentChangeTracker"),Ae.prototype.Init=function(e,t){Ae.superclass.Init.call(this),this._updateCallback=e,this._queue=t,this._changes={},this._suspendCountMap={}},Ae.prototype.addChange=function(e,t){this._isSuspended(e)||this._disposed||(this._changes[e]=t,this._queue.registerComponentChanges(this))},Ae.prototype.dispose=function(){this._disposed=!0},Ae.prototype.resume=function(t){var i=this._suspendCountMap[t]||0;(i-=1)<0?e.error("ComponentChangeTracker suspendCount underflow"):0===i?delete this._suspendCountMap[t]:this._suspendCountMap[t]=i},Ae.prototype.suspend=function(e){var t=this._suspendCountMap[e]||0;this._suspendCountMap[e]=t+1},Ae.prototype.applyChanges=function(e){this._disposed||this._updateCallback(e)},Ae.prototype.flushChanges=function(){var e=this._changes;return this._changes={},e},Ae.prototype._isSuspended=function(e){return(this._suspendCountMap[e]||0)>=1},ko.bindingHandlers.ojContextMenu={update:function(e,t,i,o,s){var r,a,l=".ojContextMenu",u=$(e),d=!1,h=!1,c=300,p=null;u.off(l).removeClass("oj-menu-context-menu-launcher")[0].removeEventListener("click",v,!0),clearTimeout(r);var _=u.data("_ojLastContextMenu");_&&S(_.selector,_.id).off(l);var m=!1,g=ko.utils.unwrapObservable(t()),f=$.isPlainObject(g)?e.getAttribute("contextmenu"):null;function v(e){if(d)return e.preventDefault(),e.stopPropagation(),d=!1,!1}function y(e){121===e.which&&e.shiftKey&&C().is(":visible")&&e.preventDefault()}function b(){var e=n.Components.__GetWidgetConstructor(C()[0],"ojMenu"),t=e&&e("instance");if(!t)throw new Error('ojContextMenu binding bound to "'+(f||g)+'", which does not reference a valid JET Menu.');return m||(t.widget().on("ojclose"+l,function(){document.removeEventListener("keyup",y)}),m=!0),t}function C(){return S(g,f)}function S(e,t){return t?$(document.getElementById(t)):$(e).first()}function E(e,t,i){d=i;var n=b();if(d&&u.one("touchend"+l,function(){n.__contextMenuPressHoldJustEnded(!0),setTimeout(function(){n.__contextMenuPressHoldJustEnded(!1)},50)}),"touchstart"===p&&"contextmenu"===e.type||"contextmenu"===p&&"touchstart"===e.type)return p=null,void clearTimeout(a);if(!e.isDefaultPrevented()){var o={launcher:u,initialFocus:"menu",position:{mouse:{my:"start top",at:"start bottom",of:e},touch:{my:"start>40 center",at:"start bottom",of:e,collision:"flipfit"},keyboard:{my:"start top",at:"start bottom",of:"launcher"}}[t]};n.__openingContextMenu=!0,n.open(e,o),n.__openingContextMenu=!1,n.widget().is(":visible")&&(e.preventDefault(),document.addEventListener("keyup",y),"touchstart"!==e.type&&"contextmenu"!==e.type||(p=e.type,a=setTimeout(function(){p=null},c)))}}u.data("_ojLastContextMenu",{selector:g,id:f}),e.addEventListener("click",v,!0),u.on("touchstart"+l+" mousedown"+l+" keydown"+l+" ",function(e){if("mousedown"!==e.type||!b().__contextMenuPressHoldJustEnded())return d=!1,"touchstart"===e.type&&(h=!0,r=setTimeout(E.bind(void 0,e,"touch",!0),750)),!0}).on("touchend"+l+" touchcancel"+l,function(){return h=!1,clearTimeout(r),!0}).on("keydown"+l+" contextmenu"+l,function(e){("contextmenu"===e.type||121===e.which&&e.shiftKey)&&E(e,h?"touch":"keydown"===e.type?"keyboard":"mouse",!1);return!0}).addClass(n.DomUtils.isTouchSupported()?"oj-menu-context-menu-launcher":"")}},n.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["header","cell"],init:function(e,t,i,n,o,s,r){if("header"===e){var a=t.row;if(null!=a){var l=a.template;null!=l&&(a.renderer=Ie(r,l))}var u=t.column;if(null!=u){var d=u.template;null!=d&&(u.renderer=Ie(r,d))}var h=t.rowEnd;if(null!=h){var c=h.template;null!=c&&(h.renderer=Ie(r,c))}var p=t.columnEnd;if(null!=p){var _=p.template;null!=_&&(p.renderer=Ie(r,_))}return{header:t}}if("cell"===e){var m=t.template;return null!=m&&(t.renderer=Oe(r,m)),{cell:t}}},update:function(e,t,i,n,o,s,r){if("header"===e){var a=t.row;if(null!=a){var l=a.template;null!=l&&(a.renderer=Ie(r,l))}var u=t.column;if(null!=u){var d=u.template;null!=d&&(u.renderer=Ie(r,d))}var h=t.rowEnd;if(null!=h){var c=h.template;null!=c&&(h.renderer=Ie(r,c))}var p=t.columnEnd;if(null!=p){var _=p.template;null!=_&&(p.renderer=Ie(r,_))}return{header:t}}if("cell"===e){var m=t.template;return null!=m&&(t.renderer=Oe(r,m)),{cell:t}}return null},for:"ojDataGrid"}),n.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["template"],init:function(e,t,i,n,o,s,r){return Re(e,t,r)},update:function(e,t,i,n,o,s,r){return Re(e,t,r)},for:"ojDiagram"}),fe=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,n.__ExpressionUtils={},n.__ExpressionUtils.getPropertyWriterExpression=function(e){if(null==e||["true","false","null","undefined"].indexOf(e)>=0)return null;var t=(e=e.trim()).match(fe);return null===t?null:"function(v){"+(t[1]?"Object("+t[1]+")"+t[2]:e)+"=v;}"},n.KnockoutTemplateUtils=be,n.ResponsiveKnockoutUtils=Ce,ye.addPostprocessor({getBindingAccessors:function(e,t,i,o){if(null==i)return null;var s=function(e){for(var t=Object.keys(e),i=0;i<t.length;i++){var o=t[i];if(n.ComponentBinding._isNameRegistered(o))return o}return null}(i);null!=s&&(i=function(e,t,i,o,s){var r=function(e,t,i,n){var o=null,s=ye.getBindingsString(e,i,n),r=ko.jsonExpressionRewriting.parseObjectLiteral(s),a=null;xe(r,function(e,i){return e===t&&(a=i,!0)}),null!=a&&0===a.indexOf("{")&&(o=ko.jsonExpressionRewriting.parseObjectLiteral(a));return{attrList:o,bindingExpr:a}}(e,t,i,o),a=r.attrList;if(null==a)return s;var l={};return xe(a,function(e,t){l[e]=t}),(s=n.CollectionUtils.copyInto({},s))[t]=function(e,t,i){var o=function(){var i={};return Object.keys(t).forEach(function(n){var o=t[n],s=ye.createEvaluator(o,e).bind(null,e);Object.defineProperty(i,n,{get:s,enumerable:!0})}),Object.defineProperty(i,n.ComponentBinding._OPTION_MAP,{value:t}),i};return o.toString=function(){return i},o}(o,l,r.bindingExpr),s}(e,s,o,t,i));return i}}),ye.addPostprocessor({nodeHasBindings:function(e,t){return n.BaseCustomElementBridge?t||1===e.nodeType&&n.BaseCustomElementBridge.getRegistered(e.nodeName):t},getBindingAccessors:function(e,t,i){if(1===e.nodeType&&n.BaseCustomElementBridge){var o=e.nodeName,s=n.BaseCustomElementBridge.getRegistered(o);s&&((i=i||{})._ojCustomElement=function(){return{composite:s.composite}})}return i}}),ve="attribute-changed",ko.bindingHandlers._ojCustomElement={after:["attr"],init:function(e,t,i,n,o){return ko.applyBindingsToDescendants(o,e),{controlsDescendantBindings:!0}},update:function(e,t,i,o,s){var r,a,l=n.BaseCustomElementBridge.getInstance(e);function u(){r&&(r.teardown(),r=null),a&&(e.removeEventListener(ve,a),a=null)}ko.ignoreDependencies(function(){ko.computed(function(){var i=t().composite;ko.computedContext.isInitial()||u(),function(t){var i=n.BaseCustomElementBridge.getProperties(l,e);r=new n.__ExpressionPropertyUpdater(e,s,t);var o={_domListener:!0};l.__INITIALIZING_PROPS=!0;for(var u=e.attributes,d=0;d<u.length;d++){var h=u[d],c=n.__AttributeUtils.attributeToPropertyName(h.nodeName),p=n.__AttributeUtils.eventListenerPropertyToEventType(c)&&!i[c];r.setupExpression(h.value,c,p?o:i[c.split(".")[0]],n.BaseCustomElementBridge.isPromiseType(e,c))}l.__INITIALIZING_PROPS=!1,a=function(e){var t=e.detail,s=t.attribute,a=n.__AttributeUtils.attributeToPropertyName(s),l=n.__AttributeUtils.eventListenerPropertyToEventType(a)&&!i[a]?o:i[a.split(".")[0]];r.setupExpression(t.value,a,l,!1)},e.addEventListener(ve,a)}(i),l.PlaybackEarlyPropertySets(e),n._KnockoutBindingProvider.getInstance().__NotifyBindingsApplied(e)},null,{disposeWhenNodeIsRemoved:e})}),ko.utils.domNodeDisposal.addDisposeCallback(e,u)}},n.__ExpressionPropertyUpdater=function(t,i,o){var s=function(){if(o)return null;return new Ae(function(e){for(var i=Object.keys(e),n=0;n<i.length;n++){var o=i[n];p(o)}try{t.setProperties(e)}finally{for(var s=0;s<i.length;s++){var r=i[s];_(r)}}},n.ComponentBinding._changeQueue)}(),r={},a={},l={},u={},d="Changed";function h(e){return e.$current||e.$data}function c(e,i,o){var s=r[i];if(s||(s=function(e){var t,i=h(e),n=function(n){t&&t(n,i,e)};return n.setListener=function(e){t=e},n}(e),r[i]=s,t.addEventListener(i,s)),null==o||o instanceof Function)s.setListener(o);else{var a=n.__AttributeUtils.eventTypeToEventListenerProperty(i),l="Invalid type '"+typeof o+"' found for attribute '"+n.__AttributeUtils.propertyNameToAttribute(a)+"'. Expected value of type 'function'.";if(!n.BaseCustomElementBridge||!n.BaseCustomElementBridge.getRegistered(t.tagName)){var u=t.tagName.toLowerCase()+" with id '"+t.id+"'";throw new Error(u+": "+l)}n.BaseCustomElementBridge.getInstance(t).throwError(t,l)}}function p(e){var t=u[e]||0;t+=1,u[e]=t}function _(t){var i=u[t];i?(i-=1,u[t]=0===i?null:i):e.error("Property count undefrlow")}function m(t,o,s,r){var a=!1,l="";ko.ignoreDependencies(function(){var e=r(i);if(ko.isObservable(e))ko.isWriteableObservable(e)?(e(n.ComponentBinding.__cloneIfArray(s)),a=!0):l="the observable is not writeable";else{var t=n.__ExpressionUtils.getPropertyWriterExpression(o);if(null!=t)ye.createEvaluator(t,i)(i)(n.ComponentBinding.__cloneIfArray(s)),a=!0;else l="the expression is not a valid update target"}}),a||l&&e.info("The expression '%s' for property '%s' was not updated because %s.",o,t,l)}this.setupExpression=function(e,o,r,g){if(r&&function(e,t){var i=e.split("."),n=t;i.shift();for(var o=0;o<i.length&&(n=n.properties);o++)n=n[i[o]];return n}(o,r)){var f=n.__AttributeUtils.getExpressionInfo(e),v=a[o];v&&(v.dispose(),a[o]=null);var y=l[o];if(y&&(t.removeEventListener(o+d,y),l[o]=null),r._domListener){var b=n.__AttributeUtils.eventListenerPropertyToEventType(o);c(i,b,null)}var C=r.readOnly,S=f.expr;if(S){var E=ye.createEvaluator(S,i);if(!C){var T=!0;ko.ignoreDependencies(function(){a[o]=ko.computed(function(){var e,a,l,u=E(i),d=ko.utils.unwrapObservable(u);if(r._domListener){var m=n.__AttributeUtils.eventListenerPropertyToEventType(o);c(i,m,d)}else Array.isArray(d)&&(d=d.slice()),r._eventListener&&d&&d instanceof Function&&(a=d,l=h(e=i),d=function(t){a(t,l,e)}),!T&&s?s.addChange(o,d):function(e,i){p(e);try{t.setProperty(e,i)}finally{_(e)}}(o,d)})}),T=!1}return g&&m(o,S,t[o],E),r.writeback&&!f.downstreamOnly&&(l[o]=function(e,i,n){var o=e.split("."),s=o[0],r=function(t){if(!function(e){return u[e]}(s)){for(var r=t.detail.value,a=1;a<o.length;a++){var l=o[a];r=r[l]}m(e,i,r,n)}};return t.addEventListener(s+d,r),r}(o,S,E)),!0}return!1}},this.teardown=function(){var e,i=Object.keys(a);for(e=0;e<i.length;e++){var n=a[i[e]];n&&n.dispose()}for(a={},i=Object.keys(l),e=0;e<i.length;e++){var o=i[e].split(".")[0];t.removeEventListener(o+d,l[o])}for(l={},i=Object.keys(r),e=0;e<i.length;e++){var u=i[e];t.removeEventListener(u,r[u])}r={},s&&s.dispose()}},function(){var e="_ojbindingsobj";function t(e,t,n,s){var r=o(e.getAttribute(n),s);if(r)return i(e,t,"ko "+t+":"+r)}function i(e,t,i){for(var n=e.tagName.toLowerCase(),o=n,s=e.attributes,r=0;r<s.length;r++){var a=s[r];o+=" ",o+=a.name,o+="='",o+=a.value,o+="'"}var l=e.parentNode,u=document.createComment(o),d=document.createComment("/"+n);l.insertBefore(u,e);var h=document.createComment(i),c=document.createComment("/ko");l.insertBefore(h,e);var p,_=[u,h];if("if"===t)for(;e.childNodes.length>0;)p=e.childNodes[0],l.insertBefore(p,e),_.push(p);else if("_ojBindForEach_"===t){for(;e.childNodes.length>0;)if(p=e.childNodes[0],l.insertBefore(p,e),_.push(p),1===p.nodeType&&"template"===p.nodeName.toLowerCase()){if(h._templateNode)throw new Error("Multiple templates found: oj-bind-for-each requires a single template element as its direct child");Object.defineProperty(h,"_templateNode",{value:p,enumerable:!1})}if(!h._templateNode)throw new Error("Template not found: oj-bind-for-each requires a single template element as its direct child")}return l.insertBefore(c,e),_.push(c),l.replaceChild(d,e),_.push(d),_}function o(e,t){if(null!=e){var i=n.__AttributeUtils.getExpressionInfo(e).expr;return null==i&&(i=t?"'"+e+"'":e),i}return null}function s(e,t,i,o,s){var r,a,l,u=n.__AttributeUtils.getExpressionInfo(o).expr;if(null==u)a=n.__AttributeUtils.coerceValue(i,"class",o,"any"),l=Array.isArray(a),r=function(){return l?a.join(" "):a};else{var d=(r=ye.createEvaluator(u,s).bind(null,s))();"function"==typeof d?(a=d(),(l=Array.isArray(a))&&(r=ko.pureComputed(function(){return d().join(" ")}))):(a=d,(l=Array.isArray(a))&&(r=function(){return a.join(" ")}))}"string"==typeof a||l?t.class=r:e.css=r}function r(e,t,i,o,s){var r=n.__AttributeUtils.getExpressionInfo(i).expr;return null==r?function(){return"object"===s?n.__AttributeUtils.coerceValue(e,t,i,s):i}:ye.createEvaluator(r,o).bind(null,o)}function a(e){return function(){for(var t={},i=Object.keys(e),n=0;n<i.length;n++){var o=i[n];t[o]=e[o]()}return t}}function l(t){if(1!==t.nodeType)return{};if(!t[e]){for(var i=!!n.BaseCustomElementBridge&&!!n.BaseCustomElementBridge.getRegistered(t.nodeName),o={},s=[],r=[],a=[],l=t.attributes,d=0;d<l.length;d++){var h=l[d],c=u(h.name);c&&("style"===c?o._STYLE_BIND=c:"style."===c.substring(0,6)?r.push(c):s.push(c)),i||"on-"!==h.name.substring(0,3)||a.push(h)}if(r.length){if(o._STYLE_BIND)throw new Error("Cannot have both style and style.* data bound attributes on "+t.tagName+" with id "+t.id);o._STYLE_BIND=r}s.length&&(o._ATTR_BIND=s),a.length&&(o._EVENT_BIND=a),Object.defineProperty(t,e,{value:o})}return t[e]}function u(e){return e&&":"===e.charAt(0)?e.slice(1):null}function d(e){return":"+e}ye.registerPreprocessor("oj-bind-text",function(e){return t(e,"text","value",!0)}),ye.registerPreprocessor("oj-bind-if",function(e){return t(e,"if","test",!1)}),ye.registerPreprocessor("oj-bind-for-each",function(e){var t=e.getAttribute("data"),s=n.__AttributeUtils.getExpressionInfo(t).expr;if(!s)try{var r=JSON.parse(t);if(!Array.isArray(r))throw new Error("got value "+t);s=t}catch(e){throw new Error("The value on the oj-bind-for-each data attribute should be either a JSON array or an expression : "+e)}var a=o(e.getAttribute("as"),!0);if(!s)return;var l="ko _ojBindForEach_:{data:"+s;return i(e,"_ojBindForEach_",l+=a?",as:"+a+"}":"}")}),ye.addPostprocessor({nodeHasBindings:function(e,t){var i=l(e);return t||null!=i._ATTR_BIND||null!=i._STYLE_BIND||null!=i._EVENT_BIND},getBindingAccessors:function(e,t,i){if(1===e.nodeType){i=i||{};var o,u,h=l(e),c=h._STYLE_BIND;if(c){if(i.style)throw new Error("Cannot have both style data-bind and JET style binding on "+e.tagName+" with id "+e.id);if("style"===c)i[c]=r(e,c,e.getAttribute(d(c)),t,"object");else{var p={};for(o=0;o<c.length;o++){u=c[o],p[n.__AttributeUtils.attributeToPropertyName(u.substring(6))]=r(e,u,e.getAttribute(d(u)),t,"string")}i.style=a(p)}}var _=h._ATTR_BIND;if(_){if(i.attr)throw new Error("Cannot have both attr data-bind and JET attribute binding on "+e.tagName+" with id "+e.id);var m={};for(o=0;o<_.length;o++)"class"===(u=_[o])?s(i,m,e,e.getAttribute(d(u)),t):m[u]=r(e,u,e.getAttribute(d(u)),t,"string");i.attr=a(m)}var g=h._EVENT_BIND;if(g){var f=new n.__ExpressionPropertyUpdater(e,t,!0);for(o=0;o<g.length;o++){var v=g[o],y=n.__AttributeUtils.attributeToPropertyName(v.nodeName);f.setupExpression(v.value,y,{_domListener:!0},!1)}ko.utils.domNodeDisposal.addDisposeCallback(e,function(){f&&(f.teardown(),f=null)})}}return i}})}(),n._KnockoutBindingProvider=function(){this.__NotifyBindingsApplied=function(e){n.BaseCustomElementBridge.getInstance(e).resolveBindingProvider(this)}},n._KnockoutBindingProvider.getInstance=function(){return n._KnockoutBindingProvider._instance},n._KnockoutBindingProvider._instance=new n._KnockoutBindingProvider,n.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["tooltip"],init:function(e,t,i,n,o,s,r){return Pe(e,t,r)},update:function(e,t,i,n,o,s,r){return Pe(e,t,r)},for:"tooltipOptionRenderer"}),function(){for(var e=["ojChart","ojDiagram","ojNBox","ojPictoChart","ojSunburst","ojTagCloud","ojThematicMap","ojTreemap","ojDialGauge","ojLedGauge","ojRatingGauge","ojSparkChart","ojStatusMeterGauge","ojGantt"],t=0;t<e.length;t++)n.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:e[t],use:"tooltipOptionRenderer"})}(),function(){var e=document&&"function"==typeof document.createDocumentFragment;function t(e,t,i){return{status:"added",value:e,index:t,key:i}}function i(e){return{status:"deleted",value:{},index:e}}var n="_ko_ffe_pending_delete_index";function o(e,i,n){if(this.element=i.element||e,this.$context=n,this.data=i.data,this.as=i.as,this.templateAlias=this.element._templateNode?this.element._templateNode.getAttribute("data-oj-as"):null,this.templateNode=function(e){var t,i=document.createElement("div");if(e._templateNode&&e._templateNode.content)t=e._templateNode.content;else if(e._templateNode)t=e._templateNode;else{var n=e.parentNode.getElementsByTagName("SCRIPT");t=n&&n.length>0?ko.utils.parseHtmlFragment(n[0].text,document):e}var o=Array.isArray(t)?t:ko.virtualElements.childNodes(t);return ko.utils.arrayForEach(o,function(e){e&&i.insertBefore(e.cloneNode(!0),null)}),i}(this.element),this.changeQueue=[],this.firstLastNodesList=[],this.indexesToDelete=[],this.rendering_queued=!1,this.pendingDeletes=[],ko.virtualElements.emptyNode(this.element),this.data.fetchFirst)this.fetchData();else{var o=ko.unwrap(this.data);this.onArrayChange(function(e,t){var i;if(e){var n=e.length;i=new Array(n);for(var o=0;o<n;o++)i[o]=t(e[o],o,e)}return i}(o,t))}this.addSubscriptions()}o.PENDING_DELETE_INDEX_KEY=n,o.prototype.addSubscriptions=function(){ko.isObservable(this.data)?(this.data.indexOf||(this.data=this.data.extend({trackArrayChanges:!0})),this.changeSubs=this.data.subscribe(this.onArrayChange,this,"arrayChange")):this.data.fetchFirst&&(this.dataMutateHandler=this.handleDataMutateEvent.bind(this),this.dataRefreshHandler=this.handleDataRefreshEvent.bind(this),this.data.addEventListener("mutate",this.dataMutateHandler),this.data.addEventListener("refresh",this.dataRefreshHandler))},o.prototype.removeSubscriptions=function(){this.changeSubs?this.changeSubs.dispose():this.data.removeEventListener&&(this.data.removeEventListener("mutate",this.dataMutateHandler),this.data.removeEventListener("refresh",this.dataRefreshHandler))},o.prototype.registerBusyState=function(){var e=this.element.parentNode;return c.getContext(e).getBusyContext().addBusyState({description:"oj-bind-for-each binding on a node with the Id "+e.id+"is loading data."})},o.prototype.fetchData=function(){var e=this.registerBusyState(),i=this.data.fetchFirst({size:-1})[Symbol.asyncIterator](),n=function(o,s,r,a){return function(l){if(r.dataPromise===a){for(var u=l.value,d=o.length,h=0;h<u.metadata.length&&h<u.data.length;h++)o.push(t(u.data[h],d,u.metadata[h].key)),d+=1;if(l.done)s.call(r,o),e();else{var c=i.next();r.dataPromise=c,c.then(n(o,s,r,c),function(){e()})}}else e()}},o=i.next();this.dataPromise=o,o.then(n([],this.onArrayChange,this,o),function(){e()})},o.prototype.getIndexesForEvent=function(e,t){var i,n=[];if(Array.isArray(e))for(i=0;i<e.length;i++)n.push(e[i]);else if(t){var o=Array.isArray(t)?t.length:t.size,s=new y(t),r=new Map,a=0;for(i=0;i<this.firstLastNodesList.length&&a<o;i++){var l=this.firstLastNodesList[i].key,u=s.get(l);u!==s.NOT_A_KEY&&(r.set(u,i),a+=1)}t.forEach(function(e){n.push(r.get(e))})}return n},o.prototype.handleDataMutateEvent=function(e){var n,o,s,r,a=e.detail.add,l=e.detail.remove,u=e.detail.update,d=[],h=this;if(a){var c=a.data;n=a.keys,s=this.getIndexesForEvent(a.indexes,a.addBeforeKeys?a.addBeforeKeys:a.afterKeys);var p=function(e){var t=s.length>e?s[e]:this.firstLastNodesList.length+e;return void 0===t?this.firstLastNodesList.length:t};Array.isArray(c)?(o=0,n.forEach(function(e){d.push(t(c[o],p(o),e)),o+=1},this)):(r=this.registerBusyState(),this.data.fetchByKeys({keys:n}).then(function(e){if(e.results.size>0){var i=0;n.forEach(function(n){var o=e.results.get(n).data;d.push(t(o,p(i),n)),i+=1}),h.onArrayChange(d)}r()},function(){r()}))}else l?(s=(s=this.getIndexesForEvent(l.indexes,l.keys)).filter(function(e){return void 0!==e}),d=s.map(i)):u&&(n=u.keys,s=this.getIndexesForEvent(u.indexes,n),Array.isArray(u.data)?(o=0,n.forEach(function(e){void 0!==s[o]&&(d.push(i(s[o])),d.push(t(u.data[o],s[o],e))),o+=1})):(r=this.registerBusyState(),this.data.fetchByKeys({keys:n}).then(function(e){var o=0;e.results.size>0&&(n.forEach(function(n){if(void 0!==s[o]){var r=e.results.get(n).data;d.push(i(s[o])),d.push(t(r,s[o],n))}o+=1}),h.onArrayChange(d)),r()},function(){r()})));d.length>0&&this.onArrayChange(d)},o.prototype.handleDataRefreshEvent=function(){this.changeQueue=[],this.firstLastNodesList=[],this.indexesToDelete=[],this.rendering_queued=!1,this.pendingDeletes=[],ko.virtualElements.emptyNode(this.element),this.fetchData()},o.prototype.onArrayChange=function(e){for(var t={added:[],deleted:[]},i=0,n=e.length;i<n;i++)if(t.added.length&&"added"===e[i].status){var o=t.added[t.added.length-1];(o.isBatch?o.index+o.values.length-1:o.index)+1===e[i].index?(o.isBatch||(o={isBatch:!0,status:"added",index:o.index,values:[o.value],keys:[o.key]},t.added.splice(t.added.length-1,1,o)),o.values.push(e[i].value),o.keys.push(e[i].key)):t[e[i].status].push(e[i])}else t[e[i].status].push(e[i]);t.deleted.length>0&&(this.changeQueue.push.apply(this.changeQueue,t.deleted),this.changeQueue.push({status:"clearDeletedIndexes"})),this.changeQueue.push.apply(this.changeQueue,t.added),this.changeQueue.length>0&&!this.rendering_queued&&(this.rendering_queued=!0,this.processQueue())},o.prototype.processQueue=function(){var e=this,t=9007199254740991;ko.utils.arrayForEach(this.changeQueue,function(i){"number"==typeof i.index&&(t=Math.min(t,i.index)),e[i.status](i)}),this.flushPendingDeletes(),this.rendering_queued=!1,this.updateIndexes(t),this.changeQueue=[]},o.prototype.added=function(e){for(var t=e.index,i=e.isBatch?e.values:[e.value],n=e.isBatch?e.keys:[e.key],o=this.getLastNodeBeforeIndex(t),s=[],r=0,a=i.length;r<a;++r){var l,u,d=this.getPendingDeleteFor(i[r]);if(d&&d.nodesets.length)l=d.nodesets.pop(),u=d.childContext;else{var h=this.templateNode.cloneNode(!0),c={data:i[r],index:t+r,observableIndex:ko.observable()};u=ye.extendBindingContext(this.$context,c,this.as,this.templateAlias,this.$context),ko.applyBindingsToDescendants(u,h),l=ko.virtualElements.childNodes(h)}s.push.apply(s,Array.prototype.slice.call(l)),this.firstLastNodesList.splice(t+r,0,{first:l[0],last:l[l.length-1],key:n?n[r]:null,childContext:u})}this.insertAllAfter(s,o)},o.prototype.getNodesForIndex=function(e){var t=[],i=this.firstLastNodesList[e].first,n=this.firstLastNodesList[e].last;for(t.push(i);i&&i!==n;)i=i.nextSibling,t.push(i);return t},o.prototype.getLastNodeBeforeIndex=function(e){return e<1||e-1>=this.firstLastNodesList.length?null:this.firstLastNodesList[e-1].last},o.prototype.insertAllAfter=function(t,i){var n,o,s=this.element;if(1===t.length)ko.virtualElements.insertAfter(s,t[0],i);else if(e){var r=document.createDocumentFragment();for(o=0,n=t.length;o!==n;++o)r.appendChild(t[o]);ko.virtualElements.insertAfter(s,r,i)}else for(o=t.length-1;o>=0;--o){var a=t[o];if(!a)break;ko.virtualElements.insertAfter(s,a,i)}return t},o.prototype.shouldDelayDeletion=function(e){return e&&("object"==typeof e||"function"==typeof e)},o.prototype.getPendingDeleteFor=function(e){var t=e&&e[n];return void 0===t?null:this.pendingDeletes[t]},o.prototype.getOrCreatePendingDeleteFor=function(e){var t=this.getPendingDeleteFor(e);return t||(t={data:e,nodesets:[]},e[n]=this.pendingDeletes.length,this.pendingDeletes.push(t),t)},o.prototype.deleted=function(e){if(this.shouldDelayDeletion(e.value)){var t=this.getOrCreatePendingDeleteFor(e.value);t.nodesets.push(this.getNodesForIndex(e.index)),t.childContext=this.firstLastNodesList[e.index].childContext}else this.removeNodes(this.getNodesForIndex(e.index));this.indexesToDelete.push(e.index)},o.prototype.removeNodes=function(e){if(e.length){!function(){for(var t=e[0].parentNode,i=e.length-1;i>=0;--i)ko.cleanNode(e[i]),t.removeChild(e[i])}()}},o.prototype.flushPendingDeletes=function(){for(var e=0,t=this.pendingDeletes.length;e!==t;++e){for(var i=this.pendingDeletes[e];i.nodesets.length;)this.removeNodes(i.nodesets.pop());i.data&&void 0!==i.data[n]&&delete i.data[n]}this.pendingDeletes=[]},o.prototype.clearDeletedIndexes=function(){for(var e=this.indexesToDelete.length-1;e>=0;--e)this.firstLastNodesList.splice(this.indexesToDelete[e],1);this.indexesToDelete=[]},o.prototype.updateIndexes=function(e){for(var t=e,i=this.firstLastNodesList.length;t<i;++t){var n=this.firstLastNodesList[t].childContext;n&&n.$current&&n.$current.observableIndex(t)}},o.prototype.getData=function(){return this.data},o.prototype.setData=function(e){this.removeSubscriptions(),this.data=e,this.addSubscriptions()},ko.bindingHandlers._ojBindForEach_={init:function(e,t,i,n,s){var r,a;return ko.computed(function(){if(a=t(),r){var e,i,n=a.data,o=r.getData();ko.ignoreDependencies(function(){e=ko.unwrap(o),i=ko.unwrap(n)});var s=ko.utils.compareArrays(e,i,{sparse:!0,dontLimitMoves:!0});r.setData(n),r.onArrayChange(s)}},null,{disposeWhenNodeIsRemoved:e}),r=new o(e,a,s),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){r.removeSubscriptions()}),{controlsDescendantBindings:!0}}},ko.virtualElements.allowedBindings._ojBindForEach_=!0}(),n.koStringTemplateEngine={},n.koStringTemplateEngine.install=function(){if(!ko.templates){var e={},t={},i=new ko.nativeTemplateEngine;i.makeTemplateSource=function(i,n){if("string"==typeof i){var o=(n=n||document).getElementById(i);return o?new ko.templateSources.domElement(o):new function(i){this._templateName=i,this.text=function(t){if(!t)return e[this._templateName];e[this._templateName]=t},this.data=function(e,i){if(t[this._templateName]||(t[this._templateName]={}),1===arguments.length)return t[this._templateName][e];t[this._templateName][e]=i}}(i)}if(i&&1===i.nodeType||8===i.nodeType)return new ko.templateSources.anonymousTemplate(i)},ko.templates=e,ko.setTemplateEngine(i)}},n.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["item"],init:function(e,t,i,n,o,s,r){var a=je(e,t,r);if(null!=a)return a},update:function(e,t,i,n,o,s,r){return je(e,t,r)},for:"ojListViewRenderer"}),n.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:"ojListView",use:"ojListViewRenderer"}),n.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:"ojNavigationList",use:"ojListViewRenderer"}),n.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["center"],init:function(e,t,i,n,o,s,r){return Me(e,t,r)},update:function(e,t,i,n,o,s,r){return Me(e,t,r)},for:"ojStatusMeterGauge"}),n.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["rootNodeContent"],init:function(e,t,i,n,o,s,r){return He(e,t,r)},update:function(e,t,i,n,o,s,r){return He(e,t,r)},for:"ojSunburst"});function ke(e,t,i){var n,o;return n=i,o=t,function(t){var i=null,s=null;if("header"===o)i=e.createChildContext(null,null,function(e){e.$columnIndex=t.columnIndex,e.$headerContext=t.headerContext,e.$data=t.data}),s=t.headerContext.parentElement;else if("cell"===o){var r=t.row;i=e.createChildContext(r,null,function(e){e.$columnIndex=t.columnIndex,e.$cellContext=t.cellContext}),s=t.cellContext.parentElement}"footer"===o&&(i=e.createChildContext(null,null,function(e){e.$columnIndex=t.columnIndex,e.$footerContext=t.footerContext}),s=t.footerContext.parentElement),ko.renderTemplate(n,i,{afterRender:function(e){$(e)._ojDetectCleanData()}},s,"replaceNode")}}function Ue(e,t){return function(i){var n=i.row,o=e.createChildContext(n,null,function(e){e.$rowContext=i.rowContext});ko.renderTemplate(t,o,{afterRender:function(e){$(e)._ojDetectCleanData()}},i.rowContext.parentElement,"replaceNode")}}function Be(e,t,i){var n,o;if("areaLayers"===e){for(n=0;n<t.length;n++){var s=t[n].areaDataLayer;s&&null!=(o=s.template)&&(s._templateRenderer=Ne(i,o))}return{areaLayers:t}}if("pointDataLayers"===e){for(n=0;n<t.length;n++)null!=(o=t[n].template)&&(t[n]._templateRenderer=Ne(i,o));return{pointDataLayers:t}}return null}function Fe(e,t,i){return"nodeContent"===e&&t.template&&(t._renderer=Le(i,t.template)),{nodeContent:t}}n.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["columns","columnsDefault","rowTemplate"],init:function(e,t,i,n,o,s,r){if("columns"===e||"columnsDefault"===e){for(var a=0;a<t.length;a++){var l=t[a],u=l.template,d=l.footerTemplate,h=l.headerTemplate;null!=u&&(l.renderer=ke(r,"cell",u)),null!=d&&(l.footerRenderer=ke(r,"footer",d)),null!=h&&(l.headerRenderer=ke(r,"header",h))}return"columns"===e?{columns:t}:{columnsDefault:t}}if("rowTemplate"===e)return{rowRenderer:Ue(r,t)}},update:function(e,t,i,n,o,s,r){if("columns"===e||"columnsDefault"===e){for(var a=0;a<t.length;a++){var l=t[a],u=l.template,d=l.footerTemplate,h=l.headerTemplate;null!=u&&(l.renderer=ke(r,"cell",u)),null!=d&&(l.footerRenderer=ke(r,"footer",d)),null!=h&&(l.headerRenderer=ke(r,"header",h))}n("columns"===e?{columns:t}:{columnsDefault:t})}else if("rowTemplate"===e)return{rowRenderer:Ue(r,t)};return null},for:"ojTable"}),n.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["areaLayers","pointDataLayers"],init:function(e,t,i,n,o,s,r){return Be(e,t,r)},update:function(e,t,i,n,o,s,r){return Be(e,t,r)},for:"ojThematicMap"}),n.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["nodeContent"],init:function(e,t,i,n,o,s,r){return Fe(e,t,r)},update:function(e,t,i,n,o,s,r){return Fe(e,t,r)},for:"ojTreemap"}),n.InvalidComponentTracker=function(){this.Init()},n.Object.createSubclass(n.InvalidComponentTracker,n.Object,"oj.InvalidComponentTracker"),n.InvalidComponentTracker._OPTION_MESSAGES_SHOWN="messagesShown",n.InvalidComponentTracker._OPTION_MESSAGES_HIDDEN="messagesHidden",n.InvalidComponentTracker._OPTION_DISABLED="disabled",n.InvalidComponentTracker._OPTION_READONLY="readOnly",n.InvalidComponentTracker.prototype.Init=function(){n.InvalidComponentTracker.superclass.Init.call(this),this._tracked=[],this._invalid=[],this._invalidHidden=[],this.invalidShown=!1,this.invalidHidden=!1},n.InvalidComponentTracker.prototype.focusOnFirstInvalid=function(){var e=null,t=this,i=this._updateCounter,n=c.getPageContext().getBusyContext().addBusyState({description:"Setting Focus to first invalid component."});return this.invalidShown&&(e=this._getFirstInvalidComponent()),setTimeout(function(){(e=i===t._updateCounter&&e||t._getFirstInvalidComponent())&&e("instance").GetFocusElement().focus(),n()},1),!!e},n.InvalidComponentTracker.prototype.showMessages=function(){var e;if(this.invalidHidden)for(var t=this._invalidHidden.length,i=0;i<t;i++)this._invalidHidden[i]&&(e=this._tracked[i].component.call(e,"showMessages"))},n.InvalidComponentTracker.prototype._getFirstInvalidComponent=function(){var e=0,t=[],i=this._invalid.length;for(e=0;e<i;e++){this._invalid[e]&&t.push(this._tracked[e])}return 0===t.length?null:(t.sort(function(e,t){var i=e.element,n=t.element;return i.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1}),t[0].component)},n.InvalidComponentTracker.prototype._remove=function(e){var t=-1,i=!1;return $.each(this._tracked,function(i,n){t<0&&n.component===e&&(t=i)}),t>=0&&(this._tracked.splice(t,1),this._invalid.splice(t,1),this._invalidHidden.splice(t,1),this._updateInvalidProperties(),i=!0),i},n.InvalidComponentTracker.prototype._update=function(e,t,i,o){var s,r=e.call(e,"isValid"),a=!0,l=-1;switch($.each(this._tracked,function(t,i){l<0&&i.component===e&&(l=t)}),i){case n.InvalidComponentTracker._OPTION_MESSAGES_SHOWN:case n.InvalidComponentTracker._OPTION_MESSAGES_HIDDEN:if(s=!1,o){if(l<0&&(l=this._tracked.push({component:e,element:t})-1,this._initializeInvalidTrackers(l,s)),!r&&n.InvalidComponentTracker._hasInvalidMessages(o)&&(s=!0,i===n.InvalidComponentTracker._OPTION_MESSAGES_SHOWN)){var u=e.call(e,"option",n.InvalidComponentTracker._OPTION_DISABLED),d=e.call(e,"option",n.InvalidComponentTracker._OPTION_READONLY);s=!(u||d)}a=this._updateInvalidTracker(i,l||0,s),this._updateInvalidProperties(),a&&(void 0===this._updateCounter&&(this._updateCounter=0),this._updateCounter+=1)}break;case n.InvalidComponentTracker._OPTION_DISABLED:case n.InvalidComponentTracker._OPTION_READONLY:a=!1,o&&(a=this._updateInvalidTracker(n.InvalidComponentTracker._OPTION_MESSAGES_SHOWN,l||0,!1),a=this._updateInvalidTracker(n.InvalidComponentTracker._OPTION_MESSAGES_HIDDEN,l||0,!1)||a,this._updateInvalidProperties())}return a},n.InvalidComponentTracker.prototype._initializeInvalidTrackers=function(e,t){void 0===this._invalid[e]&&this._updateInvalidTracker(n.InvalidComponentTracker._OPTION_MESSAGES_SHOWN,e,t),void 0===this._invalidHidden[e]&&this._updateInvalidTracker(n.InvalidComponentTracker._OPTION_MESSAGES_HIDDEN,e,t)},n.InvalidComponentTracker.prototype._updateInvalidProperties=function(){this.invalidShown=this._invalid.indexOf(!0)>=0,this.invalidHidden=this._invalidHidden.indexOf(!0)>=0},n.InvalidComponentTracker.prototype._updateInvalidTracker=function(e,t,i){var o,s=!1;return o=e===n.InvalidComponentTracker._OPTION_MESSAGES_SHOWN?this._invalid:e===n.InvalidComponentTracker._OPTION_MESSAGES_HIDDEN?this._invalidHidden:[],t>=0&&void 0!==o[t]?(s=o[t]!==i)&&(o[t]=i):(o.push(i),s=!0),s},n.InvalidComponentTracker._hasInvalidMessages=function(e){return!D.isValid(e)},n.ValueBinding=function(){},n.ValueBinding._ATTRIBUTE_INVALID_COMPONENT_TRACKER="invalidComponentTracker",n.ValueBinding._EVENT_OPTIONCHANGE="ojoptionchange",n.ValueBinding._OPTION_MESSAGES_SHOWN="messagesShown",n.ValueBinding._OPTION_MESSAGES_HIDDEN="messagesHidden",n.ValueBinding._OPTION_DISABLED="disabled",n.ValueBinding._OPTION_READONLY="readOnly",n.ValueBinding._update=function(e,t,i,o,s){var r={},a=s.call()[n.ValueBinding._ATTRIBUTE_INVALID_COMPONENT_TRACKER];if(e===n.ValueBinding._OPTION_DISABLED||e===n.ValueBinding._OPTION_READONLY){var l=a&&a.peek()||null;return null!==l&&ko.isWriteableObservable(a)&&l._update.call(l,o,i,e,t)&&a.valueHasMutated(),r[e]=t,r}},n.ValueBinding._init=function(e,t){var i={};return i[e]=t,i},n.ValueBinding._afterCreate=function(e,t,i,o){var s=o.call();return e===n.ValueBinding._ATTRIBUTE_INVALID_COMPONENT_TRACKER&&!!s[e]&&n.ValueBinding._registerInvalidComponentTrackerWriteback(e,s,t,i),{}},n.ValueBinding._beforeDestroy=function(e,t,i,o){var s,r=$(t),a=o.call()[e];e===n.ValueBinding._ATTRIBUTE_INVALID_COMPONENT_TRACKER&&(r.off(n.ValueBinding._EVENT_OPTIONCHANGE,n.ValueBinding._updateInvalidComponentTracker),a&&ko.isWriteableObservable(a)&&(s=a.peek())._remove.call(s,i)&&a.valueHasMutated())},n.ValueBinding._updateInvalidComponentTracker=function(e){var t,i=e.data.tracker,o=e.data.component,s=e.data.element,r=arguments[1],a=r.option,l=r.value;a!==n.ValueBinding._OPTION_MESSAGES_SHOWN&&a!==n.ValueBinding._OPTION_MESSAGES_HIDDEN||i&&ko.isWriteableObservable(i)&&(t=i.peek())&&t._update.call(t,o,s,a,l)&&i.valueHasMutated()},n.ValueBinding._registerInvalidComponentTrackerWriteback=function(e,t,i,o){var s,r=t[e],a=$(i);if(!ko.isObservable(r))throw new Error("Binding attribute "+n.ValueBinding._ATTRIBUTE_INVALID_COMPONENT_TRACKER+" should be bound to a ko observable.");if(null==(s=r.peek())&&r(s=new n.InvalidComponentTracker),ko.isWriteableObservable(r)){var l=o.call(o,"option",n.ValueBinding._OPTION_MESSAGES_SHOWN),u=o.call(o,"option",n.ValueBinding._OPTION_MESSAGES_HIDDEN);s._update.call(s,o,i,n.ValueBinding._OPTION_MESSAGES_SHOWN,l),s._update.call(s,o,i,n.ValueBinding._OPTION_MESSAGES_HIDDEN,u),r.valueHasMutated()}var d={tracker:r,component:o,element:i};a.on(n.ValueBinding._EVENT_OPTIONCHANGE,d,n.ValueBinding._updateInvalidComponentTracker)},n.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:"editableValue",attributes:[n.ValueBinding._ATTRIBUTE_INVALID_COMPONENT_TRACKER,n.ValueBinding._OPTION_DISABLED,n.ValueBinding._OPTION_READONLY],init:n.ValueBinding._init,update:n.ValueBinding._update,afterCreate:n.ValueBinding._afterCreate,beforeDestroy:n.ValueBinding._beforeDestroy});var Ve=function(){function e(){}return e.prototype.addEventListener=function(e,t){this._eventListeners||(this._eventListeners=[]),this._eventListeners.push({type:e.toLowerCase(),listener:t})},e.prototype.removeEventListener=function(e,t){if(this._eventListeners){var i=void 0;for(i=this._eventListeners.length-1;i>=0;i--)this._eventListeners[i].type==e&&this._eventListeners[i].listener==t&&this._eventListeners.splice(i,1)}},e.prototype.dispatchEvent=function(e){if(this._eventListeners){var t,i=this._eventListeners.slice(0);for(t=0;t<i.length;t++){var n=i[t];if(e&&e.type&&n.type==e.type.toLowerCase()&&!1===n.listener.apply(this,[e]))return!1}}return!0},e.applyMixin=function(t){[e].forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(i){"constructor"!==i&&(t.prototype[i]=e.prototype[i])})})},e}();n.EventTargetMixin=Ve;var Ge,$e,Ke=function(){return function(e,t){this.type=e,this.options=t,null!=t&&(this.detail=t.detail)}}();n.GenericEvent=Ke,function(e){!function(e){e.$co="$co",e.$eq="$eq",e.$ew="$ew",e.$pr="$pr",e.$gt="$gt",e.$ge="$ge",e.$lt="$lt",e.$le="$le",e.$ne="$ne",e.$regex="$regex",e.$sw="$sw"}(e.AttributeOperator||(e.AttributeOperator={}))}(Ge||(Ge={})),n.AttributeFilterOperator=Ge,n.AttributeFilterOperator.AttributeOperator=Ge.AttributeOperator,function(e){!function(e){e.$and="$and",e.$or="$or"}(e.CompoundOperator||(e.CompoundOperator={}))}($e||($e={})),n.CompoundFilterOperator=$e,n.CompoundFilterOperator.CompoundOperator=$e.CompoundOperator;var ze=function(e){function t(i){var n={};return n[t._DETAIL]=i,e.call(this,"mutate",n)||this}return __extends(t,e),t._DETAIL="detail",t}(Ke);n.DataProviderMutationEvent=ze,n.DataProviderMutationEvent=ze;var Ye=function(e){function t(){return e.call(this,"refresh")||this}return __extends(t,e),t}(Ke);n.DataProviderRefreshEvent=Ye,n.DataProviderRefreshEvent=Ye,n.DataProvider=function(){};var We=function(){function e(){}return e.prototype.fetchByKeys=function(e){var t=0,i=this.getIterationLimit?this.getIterationLimit():-1,n={size:25},o=new Map,s=this.fetchFirst(n)[Symbol.asyncIterator]();return function e(n,o,s){return o.next().then(function(r){var a=r.value,l=a.data,u=a.metadata,d=u.map(function(e){return e.key}),h=!0;return n.keys.forEach(function(e){s.has(e)||d.map(function(t,i){t==e&&s.set(t,{metadata:u[i],data:l[i]})}),s.has(e)||(h=!1)}),t+=l.length,h||r.done?s:-1!=i&&t>=i?s:e(n,o,s)})}(e,s,o).then(function(t){var i=new Map;return t.forEach(function(e,t){var n=[e];i.set(t,n[0])}),{fetchParameters:e,results:i}})},e.prototype.containsKeys=function(e){return this.fetchByKeys(e).then(function(t){var i=new Set;return e.keys.forEach(function(e){null!=t.results.get(e)&&i.add(e)}),Promise.resolve({containsParameters:e,results:i})})},e.prototype.getCapability=function(e){if("fetchByKeys"==e)return{implementation:"iteration"};var t=null;if(!0!==this._ojSkipLastCapability){this._ojSkipLastCapability=!0;for(var i=1;this["_ojLastGetCapability"+i];)++i;for(--i;i>0&&!(t=this["_ojLastGetCapability"+i](e));i--);delete this._ojSkipLastCapability}return t},e.applyMixin=function(t){var i=t.prototype.getCapability;if([e].forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(i){"constructor"!==i&&(t.prototype[i]=e.prototype[i])})}),i){for(var n=1;t.prototype["_ojLastGetCapability"+n];)++n;t.prototype["_ojLastGetCapability"+n]=i}},e}();n.FetchByKeysMixin=We,n.FetchByKeysMixin.applyMixin=We.applyMixin;var qe=function(){function e(){}return e.prototype.fetchByOffset=function(e){var t=e&&e.size>0?e.size:25,i=e?e.sortCriteria:null,n=e&&e.offset>0?e.offset:0,o=0,s=this.getIterationLimit?this.getIterationLimit():-1,r=!1,a={};a.size=t,a.sortCriteria=i;var l=new Array,u=this.fetchFirst(a)[Symbol.asyncIterator]();return function e(i,a,l){return a.next().then(function(u){r=u.done;var d=u.value,h=d.data,c=d.metadata,p=h.length;if(n<o+p)for(var _=n<=o?0:n-o;_<p&&l.length!=t;_++)l.push({metadata:c[_],data:h[_]});return o+=p,l.length<t&&!r?-1!=s&&o>=s?l:e(i,a,l):l})}(e,u,l).then(function(t){return{fetchParameters:e,results:t,done:r}})},e.prototype.getCapability=function(e){if("fetchByOffset"==e)return{implementation:"iteration"};var t=null;if(!0!==this._ojSkipLastCapability){this._ojSkipLastCapability=!0;for(var i=1;this["_ojLastGetCapability"+i];)++i;for(--i;i>0&&!(t=this["_ojLastGetCapability"+i](e));i--);delete this._ojSkipLastCapability}return t},e.applyMixin=function(t){var i=t.prototype.getCapability;if([e].forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(i){"constructor"!==i&&(t.prototype[i]=e.prototype[i])})}),i){for(var n=1;t.prototype["_ojLastGetCapability"+n];)++n;t.prototype["_ojLastGetCapability"+n]=i}},e}();n.FetchByOffsetMixin=qe,n.FetchByOffsetMixin.applyMixin=qe.applyMixin;var Xe={};Xe.FetchByKeysMixin=n.FetchByKeysMixin,Xe.FetchByOffsetMixin=n.FetchByOffsetMixin;var Ze=function(){function e(e){this.tableDataSource=e,this._KEY="key",this._KEYS="keys",this._AFTERKEYS="afterKeys",this._ADDBEFOREKEYS="addBeforeKeys",this._DIRECTION="direction",this._STARTINDEX="startIndex",this._ATTRIBUTE="attribute",this._SILENT="silent",this._SORT="sort",this._SORTCRITERIA="sortCriteria",this._PAGESIZE="pageSize",this._DATA="data",this._METADATA="metadata",this._INDEXES="indexes",this._OFFSET="offset",this._REFRESH="refresh",this._SIZE="size",this._VALUE="value",this._DONE="done",this._FETCHPARAMETERS="fetchParameters",this._CONTAINSPARAMETERS="containsParameters",this._RESULTS="results",this._ADD="add",this._REMOVE="remove",this._UPDATE="update",this._FETCHTYPE="fetchType",this.AsyncIterable=function(){return function(e,t){this._parent=e,this._asyncIterator=t,this[Symbol.asyncIterator]=function(){return this._asyncIterator}}}(),this.AsyncIterator=function(){function e(e,t,i){this._parent=e,this._nextFunc=t,this._params=i,this._fetchFirst=!0}return e.prototype.next=function(){var e=this._fetchFirst;return this._fetchFirst=!1,this._nextFunc(this._params,e)},e}(),this.AsyncIteratorResult=function(){return function(e,t,i){this._parent=e,this.value=t,this.done=i,this[e._VALUE]=t,this[e._DONE]=i}}(),this.FetchByKeysResults=function(){return function(e,t,i){this._parent=e,this.fetchParameters=t,this.results=i,this[e._FETCHPARAMETERS]=t,this[e._RESULTS]=i}}(),this.ContainsKeysResults=function(){return function(e,t,i){this._parent=e,this.containsParameters=t,this.results=i,this[e._CONTAINSPARAMETERS]=t,this[e._RESULTS]=i}}(),this.FetchListResult=function(){return function(e,t,i,n){this._parent=e,this.fetchParameters=t,this.data=i,this.metadata=n,this[e._FETCHPARAMETERS]=t,this[e._DATA]=i,this[e._METADATA]=n}}(),this.Item=function(){return function(e,t,i){this._parent=e,this.metadata=t,this.data=i,this[e._METADATA]=t,this[e._DATA]=i}}(),this.ItemMetadata=function(){return function(e,t){this._parent=e,this.key=t,this[e._KEY]=t}}(),this.FetchByOffsetResults=function(){return function(e,t,i,n){this._parent=e,this.fetchParameters=t,this.results=i,this.done=n,this[e._FETCHPARAMETERS]=t,this[e._RESULTS]=i,this[e._DONE]=n}}(),this.FetchListParameters=function(){return function(e,t,i){this._parent=e,this.size=t,this.sortCriteria=i,this[e._SIZE]=t,this[e._SORTCRITERIA]=i}}(),this.SortCriterion=function(){return function(e,t,i){this._parent=e,this.attribute=t,this.direction=i,this[e._ATTRIBUTE]=t,this[e._DIRECTION]=i}}(),this.DataProviderMutationEventDetail=function(){return function(e,t,i,n){this._parent=e,this.add=t,this.remove=i,this.update=n,this[e._ADD]=t,this[e._REMOVE]=i,this[e._UPDATE]=n}}(),this.DataProviderOperationEventDetail=function(){return function(e,t,i,n,o){this._parent=e,this.keys=t,this.metadata=i,this.data=n,this.indexes=o,this[e._KEYS]=t,this[e._METADATA]=i,this[e._DATA]=n,this[e._INDEXES]=o}}(),this.DataProviderAddOperationEventDetail=function(){return function(e,t,i,n,o,s,r){this._parent=e,this.keys=t,this.afterKeys=i,this.addBeforeKeys=n,this.metadata=o,this.data=s,this.indexes=r,this[e._KEYS]=t,this[e._AFTERKEYS]=i,this[e._ADDBEFOREKEYS]=n,this[e._METADATA]=o,this[e._DATA]=s,this[e._INDEXES]=r}}(),this._addTableDataSourceEventListeners(),this[this._OFFSET]=0}return e.prototype.destroy=function(){this._removeTableDataSourceEventListeners()},e.prototype.containsKeys=function(e){var t=this,i=[];return e[this._KEYS].forEach(function(e){i.push(t.tableDataSource.get(e))}),Promise.all(i).then(function(i){var n=new Set;return i.map(function(e){null!=e&&n.add(e[t._KEY])}),Promise.resolve(new t.ContainsKeysResults(t,e,n))})},e.prototype.fetchByKeys=function(e){var t=this,i=[];return e[this._KEYS].forEach(function(e){i.push(t.tableDataSource.get(e))}),Promise.all(i).then(function(i){var n=new Map;return i.map(function(e){var i=e[t._KEY],o=e[t._DATA];n.set(i,new t.Item(t,new t.ItemMetadata(t,i),o))}),Promise.resolve(new t.FetchByKeysResults(t,e,n))})},e.prototype.fetchByOffset=function(e){var t=this,i=null!=e?e[this._SIZE]:-1,n=null!=e?e[this._SORTCRITERIA]:null,o=null!=e&&e[this._OFFSET]>0?e[this._OFFSET]:0,s=new this.FetchListParameters(this,i,n);return this._startIndex=0,this._getFetchFunc(s,o)(s,!0).then(function(i){var n=i[t._VALUE],o=i[t._DONE],s=n[t._DATA],r=n[t._METADATA].map(function(e){return e[t._KEY]}),a=new Array;return s.map(function(e,i){a.push(new t.Item(t,new t.ItemMetadata(t,r[i]),s[i]))}),new t.FetchByOffsetResults(t,e,a,o)})},e.prototype.fetchFirst=function(e){return this._isPagingModelTableDataSource()||(this._startIndex=0),new this.AsyncIterable(this,new this.AsyncIterator(this,this._getFetchFunc(e),e))},e.prototype.getCapability=function(e){return e==this._SORT&&"full"==this.tableDataSource.getCapability(e)?{attributes:"multiple"}:"fetchByKeys"==e?{implementation:"lookup"}:"fetchByOffset"==e?{implementation:"lookup"}:null},e.prototype.getTotalSize=function(){return Promise.resolve(this.tableDataSource.totalSize())},e.prototype.isEmpty=function(){return this.tableDataSource.totalSize()>0?"no":"yes"},e.prototype.getPage=function(){return this._isPagingModelTableDataSource()?this.tableDataSource.getPage():-1},e.prototype.setPage=function(e,t){return this._isPagingModelTableDataSource()?this.tableDataSource.setPage(e,t):Promise.reject(null)},e.prototype.getStartItemIndex=function(){return this._isPagingModelTableDataSource()?this.tableDataSource.getStartItemIndex():-1},e.prototype.getEndItemIndex=function(){return this._isPagingModelTableDataSource()?this.tableDataSource.getEndItemIndex():-1},e.prototype.getPageCount=function(){return this._isPagingModelTableDataSource()?this.tableDataSource.getPageCount():-1},e.prototype.totalSize=function(){return this._isPagingModelTableDataSource()?this.tableDataSource.totalSize():-1},e.prototype.totalSizeConfidence=function(){return this._isPagingModelTableDataSource()?this.tableDataSource.totalSizeConfidence():null},e.prototype._getFetchFunc=function(e,t){var i=this;if(null!=e&&null!=e[this._SORTCRITERIA]){var n=e[this._SORTCRITERIA][0][this._ATTRIBUTE],o=e[this._SORTCRITERIA][0][this._DIRECTION];return this._ignoreSortEvent=!0,this._isPagingModelTableDataSource()||(this._startIndex=0),function(e,n){return function(o,s){if(s){var r={};return r[i._KEY]=e,r[i._DIRECTION]=n,i[i._OFFSET]=0,i.tableDataSource.sort(r).then(function(){return i._ignoreSortEvent=!1,i._getTableDataSourceFetch(o,t)(o)})}return i._getTableDataSourceFetch(o,t)(o)}}(n,o)}return this._getTableDataSourceFetch(e,t)},e.prototype._getTableDataSourceFetch=function(e,t){var i=this;return function(e,n){var o={};if(t=t>0?t:0,null!=i._startIndex&&(o[i._STARTINDEX]=i._startIndex+t),o[i._PAGESIZE]=null!=e&&e[i._SIZE]>0?e[i._SIZE]:null,i._isPagingModelTableDataSource()||(o[i._SILENT]=!0),null!=i.tableDataSource[i._SORTCRITERIA]&&null==e[i._SORTCRITERIA]){e[i._SORTCRITERIA]=[];var s=new i.SortCriterion(i,i.tableDataSource[i._SORTCRITERIA][i._KEY],i.tableDataSource[i._SORTCRITERIA][i._DIRECTION]);e[i._SORTCRITERIA].push(s)}return o[i._FETCHTYPE]=e[i._FETCHTYPE],i._isFetching=!0,new Promise(function(t,n){i._fetchResolveFunc=t,i._fetchRejectFunc=n,i._fetchParams=e,i._requestEventTriggered||i.tableDataSource.fetch(o).then(function(n){if(null!==n){i._isFetching=!1,void 0===n&&((n={})[i._KEYS]=[],n[i._DATA]=[]);var s=[];null!=n[i._KEYS]&&(s=n[i._KEYS].map(function(e){return new i.ItemMetadata(i,e)})),null==i._startIndex&&(i._startIndex=0);var r=!1;i._startIndex=i._startIndex+n[i._DATA].length,"actual"==i.tableDataSource.totalSizeConfidence()&&i.tableDataSource.totalSize()>0&&i._startIndex>=i.tableDataSource.totalSize()?r=!0:o[i._PAGESIZE]>0&&n[i._DATA].length<o[i._PAGESIZE]?r=!0:0==n[i._DATA].length&&(r=!0),i._fetchResolveFunc=null,i._fetchParams=null,t(new i.AsyncIteratorResult(i,new i.FetchListResult(i,e,n[i._DATA],s),r))}},function(e){n(e)})})}},e.prototype._handleSync=function(e){var t=this;if(t._startIndex=null,e[t._STARTINDEX]>0&&(t._startIndex=e[t._STARTINDEX],t[t._OFFSET]=t._startIndex),t._fetchResolveFunc&&null!=e[t._KEYS]){t._isFetching=!1;var i=e[t._KEYS].map(function(e){return new t.ItemMetadata(t,e)}),o=!1;"actual"==t.tableDataSource.totalSizeConfidence()&&t.tableDataSource.totalSize()>0&&t._startIndex>=t.tableDataSource.totalSize()&&(o=!0),t._fetchResolveFunc(new t.AsyncIteratorResult(t,new t.FetchListResult(t,t._fetchParams,e[t._DATA],i),o)),t._fetchResolveFunc=null,t._fetchParams=null}else t._requestEventTriggered||t.dispatchEvent(new n.DataProviderRefreshEvent);t._requestEventTriggered=!1},e.prototype._handleAdd=function(e){var t=this,i=e[t._KEYS].map(function(e){return new t.ItemMetadata(t,e)}),o=new Set;e[t._KEYS].map(function(e){o.add(e)});var s=new t.DataProviderAddOperationEventDetail(t,o,null,null,i,e[t._DATA],e[t._INDEXES]),r=new t.DataProviderMutationEventDetail(t,s,null,null);t.dispatchEvent(new n.DataProviderMutationEvent(r))},e.prototype._handleRemove=function(e){var t=this,i=e[t._KEYS].map(function(e){return new t.ItemMetadata(t,e)}),o=new Set;e[t._KEYS].map(function(e){o.add(e)});var s=new t.DataProviderOperationEventDetail(t,o,i,e[t._DATA],e[t._INDEXES]),r=new t.DataProviderMutationEventDetail(t,null,s,null);t.dispatchEvent(new n.DataProviderMutationEvent(r))},e.prototype._handleReset=function(e){this._requestEventTriggered||this._isPagingModelTableDataSource()||(this._startIndex=0,this.dispatchEvent(new n.DataProviderRefreshEvent))},e.prototype._handleSort=function(e){this._ignoreSortEvent||(this._startIndex=null,this.dispatchEvent(new n.DataProviderRefreshEvent))},e.prototype._handleChange=function(e){var t=this,i=e[t._KEYS].map(function(e){return new t.ItemMetadata(t,e)}),o=new Set;e[t._KEYS].map(function(e){o.add(e)});var s=new t.DataProviderOperationEventDetail(t,o,i,e[t._DATA],e[t._INDEXES]),r=new t.DataProviderMutationEventDetail(t,null,null,s);t.dispatchEvent(new n.DataProviderMutationEvent(r))},e.prototype._handleRefresh=function(e){this._isFetching||this._requestEventTriggered||(null!=e[this._OFFSET]?this._startIndex=e[this._OFFSET]:this._startIndex=null,this.dispatchEvent(new n.DataProviderRefreshEvent)),this._requestEventTriggered=!1},e.prototype._handleRequest=function(e){void 0!==n.Model&&e instanceof n.Model||this._isFetching||(e[this._STARTINDEX]>0&&0==this.getStartItemIndex()&&(this._startIndex=e[this._STARTINDEX]),this._requestEventTriggered=!0,this.dispatchEvent(new n.DataProviderRefreshEvent))},e.prototype._handleError=function(e){this._fetchRejectFunc&&this._fetchRejectFunc(e),this._isFetching=!1,this._requestEventTriggered=!1},e.prototype._handlePage=function(e){this._isFetching=!1,this._requestEventTriggered=!1;var t={};t.detail=e,this.dispatchEvent(new n.GenericEvent(n.PagingModel.EventType.PAGE,t))},e.prototype._addListener=function(e,t){this._eventHandlerFuncs[e]=t.bind(this),this.tableDataSource.on(e,this._eventHandlerFuncs[e])},e.prototype._removeListener=function(e){this.tableDataSource.off(e,this._eventHandlerFuncs[e])},e.prototype._addTableDataSourceEventListeners=function(){this._eventHandlerFuncs={},this._addListener("sync",this._handleSync),this._addListener("add",this._handleAdd),this._addListener("remove",this._handleRemove),this._addListener("reset",this._handleReset),this._addListener("sort",this._handleSort),this._addListener("change",this._handleChange),this._addListener("refresh",this._handleRefresh),this._addListener("request",this._handleRequest),this._addListener("error",this._handleError),this._addListener("page",this._handlePage)},e.prototype._removeTableDataSourceEventListeners=function(){this._removeListener("sync"),this._removeListener("add"),this._removeListener("remove"),this._removeListener("reset"),this._removeListener("sort"),this._removeListener("change"),this._removeListener("refresh"),this._removeListener("request"),this._removeListener("error"),this._removeListener("page")},e.prototype._isPagingModelTableDataSource=function(){return null!=this.tableDataSource.getStartItemIndex},e}();n.EventTargetMixin.applyMixin(Ze),n.TableDataSourceAdapter=Ze,n.TableDataSourceAdapter=Ze;var Je=function(){function e(e,t){this.data=e,this.options=t,this._KEY="key",this._KEYS="keys",this._AFTERKEYS="afterKeys",this._ADDBEFOREKEYS="addBeforeKeys",this._DIRECTION="direction",this._ATTRIBUTE="attribute",this._ATTRIBUTES="attributes",this._SORT="sort",this._SORTCRITERIA="sortCriteria",this._DATA="data",this._METADATA="metadata",this._INDEXES="indexes",this._OFFSET="offset",this._SIZE="size",this._IDATTRIBUTE="idAttribute",this._IMPLICITSORT="implicitSort",this._KEYATTRIBUTES="keyAttributes",this._SORTCOMPARATORS="sortComparators",this._COMPARATORS="comparators",this._COMPARATOR="comparator",this._RESULTS="results",this._CONTAINS="contains",this._FETCHPARAMETERS="fetchParameters",this._CONTAINSPARAMETERS="containsParameters",this._VALUE="value",this._DONE="done",this._ADD="add",this._REMOVE="remove",this._UPDATE="update",this._DETAIL="detail",this._FETCHLISTRESULT="fetchListResult",this._ATDEFAULT="@default",this._MUTATIONSEQUENCENUM="mutationSequenceNum",this.Item=function(){return function(e,t,i){this._parent=e,this.metadata=t,this.data=i,this[e._METADATA]=t,this[e._DATA]=i}}(),this.ItemMetadata=function(){return function(e,t){this._parent=e,this.key=t,this[e._KEY]=t}}(),this.FetchByKeysResults=function(){return function(e,t,i){this._parent=e,this.fetchParameters=t,this.results=i,this[e._FETCHPARAMETERS]=t,this[e._RESULTS]=i}}(),this.ContainsKeysResults=function(){return function(e,t,i){this._parent=e,this.containsParameters=t,this.results=i,this[e._CONTAINSPARAMETERS]=t,this[e._RESULTS]=i}}(),this.FetchByOffsetResults=function(){return function(e,t,i,n){this._parent=e,this.fetchParameters=t,this.results=i,this.done=n,this[e._FETCHPARAMETERS]=t,this[e._RESULTS]=i,this[e._DONE]=n}}(),this.FetchListParameters=function(){return function(e,t,i,n){this._parent=e,this.size=t,this.sortCriteria=i,this.attributes=n,this[e._SIZE]=t,this[e._SORTCRITERIA]=i,this[e._ATTRIBUTES]=n}}(),this.FetchListResult=function(){return function(e,t,i,n){this._parent=e,this.fetchParameters=t,this.data=i,this.metadata=n,this[e._FETCHPARAMETERS]=t,this[e._DATA]=i,this[e._METADATA]=n}}(),this.AsyncIterable=function(){return function(e,t){this._parent=e,this._asyncIterator=t,this[Symbol.asyncIterator]=function(){return this._asyncIterator}}}(),this.AsyncIterator=function(){function e(e,t,i,n){this._parent=e,this._nextFunc=t,this._params=i,this._offset=n,this._cachedOffset=n,this._cacheObj={},this._cacheObj[e._MUTATIONSEQUENCENUM]=e._mutationSequenceNum}return e.prototype.next=function(){var e=this._nextFunc(this._params,this._cachedOffset,this._cacheObj);return this._cachedOffset=this._cachedOffset+e.value[this._parent._DATA].length,Promise.resolve(e)},e}(),this.AsyncIteratorResult=function(){return function(e,t,i){this._parent=e,this.value=t,this.done=i,this[e._VALUE]=t,this[e._DONE]=i}}(),this.DataProviderMutationEventDetail=function(){return function(e,t,i,n){this._parent=e,this.add=t,this.remove=i,this.update=n,this[e._ADD]=t,this[e._REMOVE]=i,this[e._UPDATE]=n}}(),this.DataProviderOperationEventDetail=function(){return function(e,t,i,n,o){this._parent=e,this.keys=t,this.metadata=i,this.data=n,this.indexes=o,this[e._KEYS]=t,this[e._METADATA]=i,this[e._DATA]=n,this[e._INDEXES]=o}}(),this.DataProviderAddOperationEventDetail=function(){return function(e,t,i,n,o,s,r){this._parent=e,this.keys=t,this.afterKeys=i,this.addBeforeKeys=n,this.metadata=o,this.data=s,this.indexes=r,this[e._KEYS]=t,this[e._AFTERKEYS]=i,this[e._ADDBEFOREKEYS]=n,this[e._METADATA]=o,this[e._DATA]=s,this[e._INDEXES]=r}}(),this._cachedIndexMap=[],this._sequenceNum=0,this._mutationSequenceNum=0,this._subscribeObservableArray(e),null!=t&&null!=t[this._KEYS]&&(this._keysSpecified=!0,this._keys=t[this._KEYS])}return e.prototype.containsKeys=function(e){var t=this;return this.fetchByKeys(e).then(function(i){var n=new qn;return e[t._KEYS].forEach(function(e){null!=i[t._RESULTS].get(e)&&n.add(e)}),Promise.resolve(new t.ContainsKeysResults(t,e,n))})},e.prototype.fetchByKeys=function(e){var t=this;this._generateKeysIfNeeded();var i,o=new Cn,s=this._getKeys(),r=null!=e?e[this._ATTRIBUTES]:null,a=0;return e[t._KEYS].forEach(function(e){for(i=null,a=0;a<s.length;a++)if(n.Object.compareValues(s[a],e)){i=a;break}if(null!=i&&i>=0){var l=t._getRowData()[i];r&&r.length>0&&(l=t._filterRowAttributes(r,l)),o.set(e,new t.Item(t,new t.ItemMetadata(t,e),l))}}),Promise.resolve(new t.FetchByKeysResults(t,e,o))},e.prototype.fetchByOffset=function(e){var t=this,i=null!=e?e[this._SIZE]:-1,n=null!=e?e[this._SORTCRITERIA]:null,o=null!=e&&e[this._OFFSET]>0?e[this._OFFSET]:0,s=null!=e?e[this._ATTRIBUTES]:null;this._generateKeysIfNeeded();var r=new this.FetchListParameters(this,i,n,s),a=this._fetchFrom(r,o),l=a[this._VALUE],u=a[this._DONE],d=l[this._DATA],h=l[this._METADATA].map(function(e){return e[t._KEY]}),c=d.map(function(e,i){return new t.Item(t,new t.ItemMetadata(t,h[i]),e)});return Promise.resolve(new this.FetchByOffsetResults(this,e,c,u))},e.prototype.fetchFirst=function(e){return new this.AsyncIterable(this,new this.AsyncIterator(this,this._fetchFrom.bind(this),e,0))},e.prototype.getCapability=function(t){return e.getCapability(t)},e.getCapability=function(e){if("sort"==e)return{attributes:"multiple"};if("fetchByKeys"==e)return{implementation:"lookup"};if("fetchByOffset"==e)return{implementation:"randomAccess"};if("fetchCapability"==e){var t=new Set;return t.add("exclusion"),{attributeFilter:{expansion:{},ordering:{},defaultShape:{features:t}}}}return null},e.prototype.getTotalSize=function(){return Promise.resolve(this._getRowData().length)},e.prototype.isEmpty=function(){return this._getRowData().length>0?"no":"yes"},e.prototype.createOptimizedKeySet=function(e){return new qn(e)},e.prototype.createOptimizedKeyMap=function(e){if(e){var t=new Cn;return e.forEach(function(e,i){t.set(i,e)}),t}return new Cn},e.prototype._getRowData=function(){return this[this._DATA]instanceof Array?this[this._DATA]:this[this._DATA]()},e.prototype._getKeys=function(){return null==this._keys||this._keys instanceof Array?this._keys:this._keys()},e.prototype._indexOfKey=function(e){for(var t=this._getKeys(),i=-1,o=0;o<t.length;o++)if(n.Object.compareValues(t[o],e)){i=o;break}return i},e.prototype._subscribeObservableArray=function(e){if(!(e instanceof Array)){if(!this._isObservableArray(e))throw new Error("Invalid data type. ArrayDataProvider only supports Array or observableArray.");var t=this;e.subscribe(function(e){var i,o,s,r,a,l=[],u=[],d=[],h=[],c=[];t._mutationSequenceNum++;var p=!0,_=!0;e.forEach(function(e){"deleted"===e.status?p=!1:"added"===e.status&&(_=!1)});var m=[],g=[],f=null,v=null,y=null;if(!p&&!_){for(i=0;i<e.length;i++){r=e[i].index,a=e[i].status;var b=t._getId(e[i].value);for(o=0;o<e.length;o++)o!=i&&r===e[o].index&&a!==e[o].status&&m.indexOf(i)<0&&g.indexOf(i)<0&&(null==b||n.Object.compareValues(b,t._getId(e[o].value)))&&("deleted"===a?(g.push(i),m.push(o)):(g.push(o),m.push(i)))}for(i=0;i<e.length;i++)if(m.indexOf(i)>=0){var C=t._getKeys()[e[i].index];u.push(C),l.push(e[i].value),d.push(e[i].index)}if(u.length>0){h=u.map(function(e){return new t.ItemMetadata(t,e)});var S=new qn;u.map(function(e){S.add(e)}),f=new t.DataProviderOperationEventDetail(t,S,h,l,d)}}if(l=[],u=[],d=[],!p){for(i=0;i<e.length;i++)"deleted"===e[i].status&&m.indexOf(i)<0&&g.indexOf(i)<0&&(u.push(t._getKeys()[e[i].index]),l.push(e[i].value),d.push(e[i].index));if(u.length>0&&u.map(function(e){var i=t._indexOfKey(e);t._keys.splice(i,1)}),u.length>0){h=u.map(function(e){return new t.ItemMetadata(t,e)});var E=new qn;u.map(function(e){E.add(e)}),y=new t.DataProviderOperationEventDetail(t,E,h,l,d)}}if(l=[],u=[],d=[],!_){var T=t._generateKeysIfNeeded(),D=null==t._getKeys()||!(t._getKeys().length>0);for(i=0;i<e.length;i++)if("added"===e[i].status&&m.indexOf(i)<0&&g.indexOf(i)<0){null==(s=t._getId(e[i].value))&&(T||t._keysSpecified)&&(s=t._getKeys()[e[i].index]),null==s&&(s=t._sequenceNum++,t._keys.splice(e[i].index,0,s)),(D||-1==t._indexOfKey(s))&&t._keys.splice(e[i].index,0,s),u.push(s);var A=t._getKeys()[e[i].index+1];A=null==A?null:A,c.push(A),l.push(e[i].value),d.push(e[i].index)}if(u.length>0){h=u.map(function(e){return new t.ItemMetadata(t,e)});var I=new qn;u.map(function(e){I.add(e)});var O=new qn;c.map(function(e){O.add(e)}),v=new t.DataProviderAddOperationEventDetail(t,I,O,c,h,l,d)}}t._fireMutationEvent(v,y,f)},null,"arrayChange"),e.subscribe(function(e){t._mutationEvent?t.dispatchEvent(t._mutationEvent):t._mutationRemoveEvent||t._mutationAddEvent||t._mutationUpdateEvent?(t._mutationRemoveEvent&&t.dispatchEvent(t._mutationRemoveEvent),t._mutationAddEvent&&t.dispatchEvent(t._mutationAddEvent),t._mutationUpdateEvent&&t.dispatchEvent(t._mutationUpdateEvent)):t.dispatchEvent(new n.DataProviderRefreshEvent),t._mutationEvent=null,t._mutationRemoveEvent=null,t._mutationAddEvent=null,t._mutationUpdateEvent=null},null,"change")}},e.prototype._fireMutationEvent=function(e,t,i){var o=this,s=!1;if(["keys","indexes"].forEach(function(n){s||(s=o._hasSamePropValue(t,e,n)||o._hasSamePropValue(t,i,n)||o._hasSamePropValue(e,i,n))}),s){if(t){var r=new this.DataProviderMutationEventDetail(this,null,t,null);this._mutationRemoveEvent=new n.DataProviderMutationEvent(r)}if(e){var a=new this.DataProviderMutationEventDetail(this,e,null,null);this._mutationAddEvent=new n.DataProviderMutationEvent(a)}if(i){var l=new this.DataProviderMutationEventDetail(this,null,null,i);this._mutationUpdateEvent=new n.DataProviderMutationEvent(l)}}else{var u=new this.DataProviderMutationEventDetail(this,e,t,i);this._mutationEvent=new n.DataProviderMutationEvent(u)}},e.prototype._hasSamePropValue=function(e,t,i){var o=!1;return e&&e[i]&&e[i].forEach(function(e){!o&&t&&t[i]&&t[i].forEach(function(t){!o&&n.Object.compareValues(e,t)&&(o=!0)})}),o},e.prototype._isObservableArray=function(e){return ko.isObservable(e)&&!(void 0===e.destroyAll)},e.prototype._generateKeysIfNeeded=function(){if(null==this._keys){var e=null!=this.options?this.options[this._KEYATTRIBUTES]||this.options[this._IDATTRIBUTE]:null;this._keys=[];var t=this._getRowData(),i=void 0,n=0;for(n=0;n<t.length;n++)null!=(i=this._getId(t[n]))&&"@index"!=e||(i=this._sequenceNum++),this._keys[n]=i;return!0}return!1},e.prototype._getId=function(e){var t,i=null!=this.options?this.options[this._KEYATTRIBUTES]||this.options[this._IDATTRIBUTE]:null;if(null!=i){var n;if(Array.isArray(i))for(t=[],n=0;n<i.length;n++)t[n]=this._getVal(e,i[n]);else t="@value"==i?this._getAllVals(e):this._getVal(e,i);return t}return null},e.prototype._getVal=function(e,t){return"function"==typeof e[t]?e[t]():e[t]},e.prototype._getAllVals=function(e){var t=this;return Object.keys(e).map(function(i){return t._getVal(e,i)})},e.prototype._fetchFrom=function(e,t,i){var n=this,o=null!=e?e[this._ATTRIBUTES]:null;this._generateKeysIfNeeded();var s=null!=e?e[this._SORTCRITERIA]:null,r=this._getCachedIndexMap(s,i),a=r.map(function(e){var t=n._getRowData()[e];return o&&o.length>0&&(t=n._filterRowAttributes(o,t)),t}),l=r.map(function(e){return n._getKeys()[e]}),u=null!=e?e[this._SIZE]>0?e[this._SIZE]:e[this._SIZE]<0?n._getKeys().length:25:25,d=a.slice(t,t+u),h=l.slice(t,t+u).map(function(e){return new n.ItemMetadata(n,e)}),c=t+u<a.length,p=this._mergeSortCriteria(s);null!=p&&((e=e||{})[this._SORTCRITERIA]=p);var _=new this.FetchListResult(this,e,d,h);return new this.AsyncIteratorResult(this,_,!c)},e.prototype._getCachedIndexMap=function(e,t){if(t&&t.indexMap&&t[this._MUTATIONSEQUENCENUM]===this._mutationSequenceNum)return t.indexMap;var i=this._getRowData().map(function(e,t){return t}),n=this._sortData(i,e);return t&&(t.indexMap=n,t[this._MUTATIONSEQUENCENUM]=this._mutationSequenceNum),n},e.prototype._sortData=function(e,t){var i=this,n=e.map(function(e){return{index:e,value:i._getRowData()[e]}});return null!=t&&n.sort(this._getSortComparator(t)),n.map(function(e){return e.index})},e.prototype._getSortComparator=function(e){var t=this;return function(i,n){var o,s,r,a,l,u,d=null!=t.options?t.options[t._SORTCOMPARATORS]:null;for(o=0;o<e.length;o++)if(s=e[o][t._DIRECTION],r=e[o][t._ATTRIBUTE],a=null,null!=d&&(a=d[t._COMPARATORS].get(r)),l=t._getVal(i.value,r),u=t._getVal(n.value,r),null!=a){var h="descending"==s?-1:1,c=a(l,u)*h;if(0!=c)return c}else{var p=0,_="string"==typeof l?l:new String(l).toString(),m="string"==typeof u?u:new String(u).toString();if(0!=(p="ascending"==s?_.localeCompare(m,void 0,{numeric:!0,sensitivity:"base"}):m.localeCompare(_,void 0,{numeric:!0,sensitivity:"base"})))return p}return 0}},e.prototype._mergeSortCriteria=function(e){var t=null!=this.options?this.options[this._IMPLICITSORT]:null;if(null!=t){if(null==e)return t;var i=e.slice(0),n=void 0,o=void 0,s=void 0;for(n=0;n<t.length;n++){for(s=!1,o=0;o<i.length;o++)i[o][this._ATTRIBUTE]==t[n][this._ATTRIBUTE]&&(s=!0);s||i.push(t[n])}return i}return e},e.prototype._filterRowAttributes=function(e,t){var i=this,n=null;if(Array.isArray(e)){n={};var o,s=!1;e.forEach(function(e){e!=i._ATDEFAULT&&e.name!=i._ATDEFAULT||(s=!0)}),Object.keys(t).forEach(function(r){if(s){var a=!1,l=r,u=void 0;for(o=0;o<e.length;o++)if((u=e[o]instanceof Object?e[o].name:e[o]).startsWith("!")){if((u=u.substr(1,u.length-1))==r){a=!0;break}}else if(u==r){l=e[o];break}a||(n[r]=i._filterRowAttributes(l,t))}else e.forEach(function(e){var o;(o=e instanceof Object?e.name:e).startsWith("!")||o!=r||(n[o]=i._filterRowAttributes(e,t))})})}else if(e instanceof Object){var r=e.name,a=e.attributes;r&&!r.startsWith("!")&&(t[r]instanceof Object&&!Array.isArray(t[r])?n=i._filterRowAttributes(a,t[r]):Array.isArray(t[r])?(n=[],t[r].forEach(function(e,t){n[t]=i._filterRowAttributes(a,e)})):n=t[r])}else n=t[e];return n},e}();n.ArrayDataProvider=Je,n.EventTargetMixin.applyMixin(Je);var Qe=function(){function e(e,t){this._dataProvider=e,this._capabilityFunc=t,this._DATAPROVIDER="dataProvider",this.AsyncIterable=function(){return function(e){this._asyncIterator=e,this[Symbol.asyncIterator]=function(){return this._asyncIterator}}}(),this.AsyncIterator=function(){function e(e){this._asyncIteratorPromise=e}return e.prototype.next=function(){return this._asyncIteratorPromise.then(function(e){return e.next()})},e}()}return e.prototype.fetchFirst=function(e){var t=this._getDataProvider().then(function(t){return t.fetchFirst(e)[Symbol.asyncIterator]()});return new this.AsyncIterable(new this.AsyncIterator(t))},e.prototype.fetchByKeys=function(e){return this._getDataProvider().then(function(t){return t.fetchByKeys(e)})},e.prototype.containsKeys=function(e){return this._getDataProvider().then(function(t){return t.containsKeys(e)})},e.prototype.fetchByOffset=function(e){return this._getDataProvider().then(function(t){return t.fetchByOffset(e)})},e.prototype.getTotalSize=function(){return this._getDataProvider().then(function(e){return e.getTotalSize()})},e.prototype.isEmpty=function(){return this[this._DATAPROVIDER]?this[this._DATAPROVIDER].isEmpty():"unknown"},e.prototype.getCapability=function(e){return this._capabilityFunc?this._capabilityFunc(e):null},e.prototype.addEventListener=function(e,t){this._getDataProvider().then(function(i){i.addEventListener(e,t)})},e.prototype.removeEventListener=function(e,t){this._getDataProvider().then(function(i){i.removeEventListener(e,t)})},e.prototype.dispatchEvent=function(e){return!!this[this._DATAPROVIDER]&&this[this._DATAPROVIDER].dispatchEvent(e)},e.prototype._getDataProvider=function(){var e=this;return this._dataProvider.then(function(t){if(n.DataProviderFeatureChecker.isDataProvider(t))return e[e._DATAPROVIDER]||(e[e._DATAPROVIDER]=t),t;throw new Error("Invalid data type. DeferredDataProvider takes a Promise<DataProvider>")})},e}();n.DeferredDataProvider=Qe,n.DataSource=function(e){this.data=e,this.Init()},n.Object.createSubclass(n.DataSource,n.EventSource,"oj.DataSource"),n.DataSource.prototype.Init=function(){n.DataSource.superclass.Init.call(this)},n.TreeDataSource=function(e){n.TreeDataSource.superclass.constructor.call(this,e)},n.Object.createSubclass(n.TreeDataSource,n.DataSource,"oj.TreeDataSource"),n.TableDataSource=function(e,t){if(this.constructor===n.TableDataSource){var i=n.TableDataSource._LOGGER_MSG._ERR_TABLE_DATASOURCE_INSTANTIATED_SUMMARY,o=n.TableDataSource._LOGGER_MSG._ERR_TABLE_DATASOURCE_INSTANTIATED_DETAIL;throw new Error(i+"\n"+o)}this.data=e,this.options=t,this.isFetching=!1,this._startIndex=0,this.Init()},n.Object.createSubclass(n.TableDataSource,n.DataSource,"oj.TableDataSource"),n.TableDataSource.prototype.Init=function(){n.TableDataSource.superclass.Init.call(this)},n.TableDataSource.prototype.sortCriteria=null,n.TableDataSource.prototype.totalSizeConfidence=function(){return"actual"},n.TableDataSource.EventType={ADD:"add",REMOVE:"remove",RESET:"reset",REFRESH:"refresh",SORT:"sort",CHANGE:"change",REQUEST:"request",SYNC:"sync",ERROR:"error"},n.TableDataSource._LOGGER_MSG={_ERR_TABLE_DATASOURCE_INSTANTIATED_SUMMARY:"oj.TableDataSource constructor called.",_ERR_TABLE_DATASOURCE_INSTANTIATED_DETAIL:"Please do not instantiate oj.TableDataSource. Please use one of the subclasses instead such as oj.ArrayTableDataSource or oj.CollectionTableDataSource.",_ERR_DATA_INVALID_TYPE_SUMMARY:"Invalid data type.",_ERR_DATA_INVALID_TYPE_DETAIL:"Please specify the appropriate data type."},n.DataGridDataSource=function(e){n.DataGridDataSource.superclass.constructor.call(this,e)},n.Object.createSubclass(n.DataGridDataSource,n.DataSource,"oj.DataGridDataSource"),n.DiagramDataSource=function(e){n.DiagramDataSource.superclass.constructor.call(this,e)},n.Object.createSubclass(n.DiagramDataSource,n.DataSource,"oj.DiagramDataSource"),n.DiagramDataSource.EventType={ADD:"add",REMOVE:"remove",CHANGE:"change"};var et={properties:{data:{type:"oj.PagingModel"},loadMoreOptions:{type:"object",properties:{maxCount:{type:"number",value:500}}},mode:{type:"string",enumValues:["loadMore","page"],value:"page"},overflow:{type:"string",enumValues:["fit","none"],value:"fit"},pageOptions:{type:"object",properties:{layout:{type:"Array",enumValues:["all","auto","input","nav","pages","rangeText"],value:["auto"]},maxPageLinks:{type:"number",value:6},orientation:{type:"string",enumValues:["horizontal","vertical"],value:"horizontal"},type:{type:"string",enumValues:["dots","numbers"],value:"numbers"}}},pageSize:{type:"number",value:25},translations:{type:"object",value:{},properties:{labelAccNavFirstPage:{type:"string"},labelAccNavLastPage:{type:"string"},labelAccNavNextPage:{type:"string"},labelAccNavPage:{type:"string"},labelAccNavPreviousPage:{type:"string"},labelAccPaging:{type:"string"},labelLoadMore:{type:"string"},labelLoadMoreMaxRows:{type:"string"},labelNavInputPage:{type:"string"},labelNavInputPageMax:{type:"string"},maxPageLinksInvalid:{type:"string"},msgItemRangeCurrent:{type:"string"},msgItemRangeCurrentSingle:{type:"string"},msgItemRangeItems:{type:"string"},msgItemRangeOf:{type:"string"},msgItemRangeOfApprox:{type:"string"},msgItemRangeOfAtLeast:{type:"string"},pageInvalid:{type:"string"},tipNavFirstPage:{type:"string"},tipNavInputPage:{type:"string"},tipNavLastPage:{type:"string"},tipNavNextPage:{type:"string"},tipNavPageLink:{type:"string"},tipNavPreviousPage:{type:"string"}}}},methods:{firstPage:{},previousPage:{},nextPage:{},lastPage:{},page:{},loadNext:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};n.__registerWidget("oj.ojPagingControl",$.oj.baseComponent,{version:"1.0.0",defaultElement:"<div>",widgetEventPrefix:"oj",options:{data:null,overflow:"fit",pageSize:25,pageOptions:{layout:["auto"],type:"numbers",maxPageLinks:6,orientation:"horizontal"},loadMoreOptions:{maxCount:500},mode:"page",ready:null},_BUNDLE_KEY:{_LABEL_ACC_PAGING:"labelAccPaging",_LABEL_ACC_NAV_FIRST_PAGE:"labelAccNavFirstPage",_LABEL_ACC_NAV_LAST_PAGE:"labelAccNavLastPage",_LABEL_ACC_NAV_NEXT_PAGE:"labelAccNavNextPage",_LABEL_ACC_NAV_PREVIOUS_PAGE:"labelAccNavPreviousPage",_LABEL_ACC_NAV_PAGE:"labelAccNavPage",_LABEL_LOAD_MORE:"labelLoadMore",_LABEL_LOAD_MORE_MAX_ROWS:"labelLoadMoreMaxRows",_LABEL_NAV_INPUT_PAGE:"labelNavInputPage",_LABEL_NAV_INPUT_PAGE_MAX:"labelNavInputPageMax",_LABEL_NAV_INPUT_PAGE_SUMMARY:"labelNavInputPageSummary",_MSG_ITEM_RANGE_CURRENT:"msgItemRangeCurrent",_MSG_ITEM_RANGE_CURRENT_SINGLE:"msgItemRangeCurrentSingle",_MSG_ITEM_RANGE_ITEMS:"msgItemRangeItems",_MSG_ITEM_RANGE_ATLEAST:"msgItemRangeOfAtLeast",_MSG_ITEM_RANGE_APPROX:"msgItemRangeOfApprox",_MSG_ITEM_RANGE_OF:"msgItemRangeOf",_TIP_NAV_INPUT_PAGE:"tipNavInputPage",_TIP_NAV_PAGE_LINK:"tipNavPageLink",_TIP_NAV_NEXT_PAGE:"tipNavNextPage",_TIP_NAV_PREVIOUS_PAGE:"tipNavPreviousPage",_TIP_NAV_FIRST_PAGE:"tipNavFirstPage",_TIP_NAV_LAST_PAGE:"tipNavLastPage",_ERR_PAGE_INVALID_SUMMARY:"pageInvalid.summary",_ERR_PAGE_INVALID_DETAIL:"pageInvalid.detail",_ERR_DATA_INVALID_TYPE_SUMMARY:"dataInvalidType.summary",_ERR_DATA_INVALID_TYPE_DETAIL:"dataInvalidType.detail",_ERR_MAXPAGELINKS_INVALID_SUMMARY:"maxPageLinksInvalid.summary",_ERR_MAXPAGELINKS_INVALID_DETAIL:"maxPageLinksInvalid.detail"},_MARKER_STYLE_CLASSES:{_WIDGET:"oj-component",_ACTIVE:"oj-active",_CLICKABLE_ICON:"oj-clickable-icon-nocontext",_DISABLED:"oj-disabled",_ENABLED:"oj-enabled",_FOCUS:"oj-focus",_FOCUS_HIGHLIGHT:"oj-focus-highlight",_HOVER:"oj-hover",_SELECTED:"oj-selected"},_CSS_CLASSES:{_PAGING_CONTROL_CLASS:"oj-pagingcontrol",_PAGING_CONTROL_ACC_LABEL_CLASS:"oj-pagingcontrol-acc-label",_PAGING_CONTROL_CONTENT_CLASS:"oj-pagingcontrol-content",_PAGING_CONTROL_LOAD_MORE_CLASS:"oj-pagingcontrol-loadmore",_PAGING_CONTROL_LOAD_MORE_LINK_CLASS:"oj-pagingcontrol-loadmore-link",_PAGING_CONTROL_LOAD_MORE_MAX_ROWS_CLASS:"oj-pagingcontrol-loadmore-max-rows",_PAGING_CONTROL_LOAD_MORE_RANGE_CLASS:"oj-pagingcontrol-loadmore-range",_PAGING_CONTROL_LOAD_MORE_RANGE_CURRENT_CLASS:"oj-pagingcontrol-loadmore-range-current",_PAGING_CONTROL_LOAD_MORE_RANGE_MAX_CLASS:"oj-pagingcontrol-loadmore-range-max",_PAGING_CONTROL_NAV_CLASS:"oj-pagingcontrol-nav",_PAGING_CONTROL_NAV_ARROW_CLASS:"oj-pagingcontrol-nav-arrow",_PAGING_CONTROL_NAV_ARROW_SECTION_CLASS:"oj-pagingcontrol-nav-arrow-section",_PAGING_CONTROL_NAV_PAGE_CLASS:"oj-pagingcontrol-nav-page",_PAGING_CONTROL_NAV_PAGE_ELLIPSIS_CLASS:"oj-pagingcontrol-nav-page-ellipsis",_PAGING_CONTROL_NAV_DOT_CLASS:"oj-pagingcontrol-nav-dot",_PAGING_CONTROL_NAV_DOT_BULLET_CLASS:"oj-pagingcontrol-nav-dot-bullet",_PAGING_CONTROL_NAV_PAGE_ACC_LABEL_CLASS:"oj-pagingcontrol-nav-page-acc-label",_PAGING_CONTROL_NAV_LABEL_CLASS:"oj-pagingcontrol-nav-label",_PAGING_CONTROL_NAV_INPUT_SECTION_CLASS:"oj-pagingcontrol-nav-input-section",_PAGING_CONTROL_NAV_INPUT_CLASS:"oj-pagingcontrol-nav-input",_PAGING_CONTROL_NAV_INPUT_MAX_CLASS:"oj-pagingcontrol-nav-input-max",_PAGING_CONTROL_NAV_INPUT_SUMMARY_CLASS:"oj-pagingcontrol-nav-input-summary",_PAGING_CONTROL_NAV_INPUT_SUMMARY_CURRENT_CLASS:"oj-pagingcontrol-nav-input-summary-current",_PAGING_CONTROL_NAV_INPUT_SUMMARY_MAX_CLASS:"oj-pagingcontrol-nav-input-summary-max",_PAGING_CONTROL_NAV_PAGES_SECTION_CLASS:"oj-pagingcontrol-nav-pages-section",_PAGING_CONTROL_NAV_PAGES_LINKS_CLASS:"oj-pagingcontrol-nav-pages-links",_PAGING_CONTROL_NAV_FIRST_CLASS:"oj-pagingcontrol-nav-first",_PAGING_CONTROL_NAV_FIRST_ACC_LABEL_CLASS:"oj-pagingcontrol-nav-first-acc-label",_PAGING_CONTROL_NAV_PREVIOUS_CLASS:"oj-pagingcontrol-nav-previous",_PAGING_CONTROL_NAV_PREVIOUS_ACC_LABEL_CLASS:"oj-pagingcontrol-nav-previous-acc-label",_PAGING_CONTROL_NAV_NEXT_CLASS:"oj-pagingcontrol-nav-next",_PAGING_CONTROL_NAV_NEXT_ACC_LABEL_CLASS:"oj-pagingcontrol-nav-next-acc-label",_PAGING_CONTROL_NAV_LAST_CLASS:"oj-pagingcontrol-nav-last",_PAGING_CONTROL_NAV_LAST_ACC_LABEL_CLASS:"oj-pagingcontrol-nav-last-acc-label",_PAGING_CONTROL_NAV_FIRST_ICON_CLASS:"oj-pagingcontrol-nav-first-icon",_PAGING_CONTROL_NAV_PREVIOUS_ICON_CLASS:"oj-pagingcontrol-nav-previous-icon",_PAGING_CONTROL_NAV_NEXT_ICON_CLASS:"oj-pagingcontrol-nav-next-icon",_PAGING_CONTROL_NAV_LAST_ICON_CLASS:"oj-pagingcontrol-nav-last-icon",_PAGING_CONTROL_NAV_FIRST_VERTICAL_ICON_CLASS:"oj-pagingcontrol-nav-first-vertical-icon",_PAGING_CONTROL_NAV_PREVIOUS_VERTICAL_ICON_CLASS:"oj-pagingcontrol-nav-previous-vertical-icon",_PAGING_CONTROL_NAV_NEXT_VERTICAL_ICON_CLASS:"oj-pagingcontrol-nav-next-vertical-icon",_PAGING_CONTROL_NAV_LAST_VERTICAL_ICON_CLASS:"oj-pagingcontrol-nav-last-vertical-icon",_WIDGET_ICON_CLASS:"oj-component-icon",_HIDDEN_CONTENT_ACC_CLASS:"oj-helper-hidden-accessible"},_DATA_ATTR_PAGE_NUM:"data-oj-pagenum",_OPTION_ENABLED:"enabled",_OPTION_DISABLED:"disabled",_TAB_INDEX:"tabindex",_MODE:{_LOAD_MORE:"loadMore",_PAGE:"page"},_PAGE_OPTION_LAYOUT:{_AUTO:"auto",_ALL:"all",_INPUT:"input",_RANGE_TEXT:"rangeText",_PAGES:"pages",_NAV:"nav"},_PAGE_OPTION_DEFAULT_MAX_PAGE_LINKS:6,_TYPE:{_NUMBERS:"numbers",_DOTS:"dots"},firstPage:function(){return null!=this._getData()?this._invokeDataPage(0,!1):this._getRejectPromise()},previousPage:function(){if(null!=this._getData()){var e=this._getCurrentPage();if(e>0)return this._invokeDataPage(e-1,!1)}return this._getRejectPromise()},nextPage:function(){if(null!=this._getData()){var e=this._getCurrentPage();if(this._isTotalSizeConfidenceActual()&&e+1<=this._getTotalPages()-1||this._getTotalPages()<0||!this._isTotalSizeConfidenceActual())return this._invokeDataPage(e+1,!1)}return this._getRejectPromise()},lastPage:function(){return null!=this._getData()&&this._getTotalPages()>0?this._invokeDataPage(this._getTotalPages()-1,!1):this._getRejectPromise()},page:function(e){return null!=this._getData()&&(this._isTotalSizeConfidenceActual()&&e<=this._getTotalPages()-1||this._getTotalPages()<0||!this._isTotalSizeConfidenceActual())?this._invokeDataPage(e,!1):this._getRejectPromise()},loadNext:function(){return null!=this._getData()?this._invokeDataFetchNext():this._getRejectPromise()},refresh:function(){this._super(),this._refresh()},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;var t=e.subId,i=null;if("oj-pagingcontrol-nav-input"===t)i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_CLASS)[0];else if("oj-pagingcontrol-nav-input-max"===t)i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_MAX_CLASS)[0];else if("oj-pagingcontrol-nav-input-summary"===t)i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SUMMARY_CLASS)[0];else if("oj-pagingcontrol-nav-input-summary-current"===t)i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SUMMARY_CURRENT_CLASS)[0];else if("oj-pagingcontrol-nav-input-summary-max"===t)i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SUMMARY_MAX_CLASS)[0];else if("oj-pagingcontrol-nav-first"===t)i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_FIRST_CLASS)[0];else if("oj-pagingcontrol-nav-next"===t)i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_NEXT_CLASS)[0];else if("oj-pagingcontrol-nav-previous"===t)i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_PREVIOUS_CLASS)[0];else if("oj-pagingcontrol-nav-last"===t)i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_LAST_CLASS)[0];else if("oj-pagingcontrol-nav-page"===t){var n=e.index;i=this._getPagingControlContainer().find("["+this._DATA_ATTR_PAGE_NUM+"="+n+"]")[0]}else"oj-pagingcontrol-load-more-link"===t?i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_LINK_CLASS)[0]:"oj-pagingcontrol-load-more-range"===t?i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_RANGE_CLASS)[0]:"oj-pagingcontrol-load-more-range-current"===t?i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_RANGE_CURRENT_CLASS)[0]:"oj-pagingcontrol-load-more-range-max"===t?i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_RANGE_MAX_CLASS)[0]:"oj-pagingcontrol-load-more-max-rows"===t&&(i=this._getPagingControlContainer().find("."+this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_MAX_ROWS_CLASS)[0]);return void 0===i&&(i=null),i},getSubIdByNode:function(e){return $(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_CLASS)?{subId:"oj-pagingcontrol-nav-input"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_MAX_CLASS)?{subId:"oj-pagingcontrol-nav-input-max"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SUMMARY_CLASS)?{subId:"oj-pagingcontrol-nav-input-summary"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SUMMARY_CURRENT_CLASS)?{subId:"oj-pagingcontrol-nav-input-summary-current"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SUMMARY_MAX_CLASS)?{subId:"oj-pagingcontrol-nav-input-summary-max"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_FIRST_CLASS)?{subId:"oj-pagingcontrol-nav-first"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_NEXT_CLASS)?{subId:"oj-pagingcontrol-nav-next"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_PREVIOUS_CLASS)?{subId:"oj-pagingcontrol-nav-previous"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_LAST_CLASS)?{subId:"oj-pagingcontrol-nav-last"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_PAGE_CLASS)?{subId:"oj-pagingcontrol-nav-page",index:$(e).attr(this._DATA_ATTR_PAGE_NUM)}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_LINK_CLASS)?{subId:"oj-pagingcontrol-load-more-link"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_RANGE_CLASS)?{subId:"oj-pagingcontrol-load-more-range"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_RANGE_CURRENT_CLASS)?{subId:"oj-pagingcontrol-load-more-range-current"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_RANGE_MAX_CLASS)?{subId:"oj-pagingcontrol-load-more-range-max"}:$(e).hasClass(this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_MAX_ROWS_CLASS)?{subId:"oj-pagingcontrol-load-more-max-rows"}:null},_ComponentCreate:function(){this._super(),this._draw(),this._on(this._events)},_AfterCreate:function(){this._super(),this._registerSwipeHandler(),this._isInitFetch=!0},_SetupResources:function(){this._super(),this._registerResizeListener(this._getPagingControlContainer()),this._registerDataSourceEventListeners(),this._isInitFetch?(this._setInitialPage(),this._isInitFetch=!1):this._refresh()},_ReleaseResources:function(){this._super(),this._unregisterDataSourceEventListeners(),this._unregisterResizeListener()},_addComponentBusyState:function(e){var t=c.getContext(this.element[0]).getBusyContext(),i={description:"The component identified by '"+this.element.attr("id")+"' "+e},n=t.addBusyState(i);return this._busyStateResolvers||(this._busyStateResolvers=[]),this._busyStateResolvers.push(n),n},_removeComponentBusyState:function(e){if(this._busyStateResolvers){var t=this._busyStateResolvers.indexOf(e);t>=0&&(this._busyStateResolvers.splice(t,1),e())}},_destroy:function(){if(this._unregisterDataSourceEventListeners(),this._unregisterSwipeHandler(),this._busyStateResolvers){for(var e=this._busyStateResolvers.pop();e;)e(),e=this._busyStateResolvers.pop();this._busyStateResolvers=null}this._componentDestroyed=!0},_draw:function(){var e=this.options;this.element.addClass(this._CSS_CLASSES._PAGING_CONTROL_CLASS),this.element.addClass(this._MARKER_STYLE_CLASSES._WIDGET),this._createPagingControlAccLabel(),this._createPagingControlContent(),this._mode=e.mode,e.mode===this._MODE._LOAD_MORE?(this._createPagingControlLoadMore(),this._createPagingControlLoadMoreLink(),this._createPagingControlLoadMoreRange()):this._createPagingControlNav()},_events:{"mouseup .oj-pagingcontrol-loadmore-link":function(e){this.loadNext(),$(e.target).data("_mouseup",!0),e.preventDefault()},"click .oj-pagingcontrol-loadmore-link":function(e){$(e.target).data("_mouseup")?$(e.target).data("_mouseup",!1):this.loadNext(),e.preventDefault()},"click .oj-pagingcontrol-nav-dot":function(e){if(!$(e.currentTarget).hasClass(this._MARKER_STYLE_CLASSES._DISABLED)){var t=$(e.currentTarget).attr("data-oj-pagenum");this.page(t)}e.preventDefault()},"click .oj-pagingcontrol-nav-page":function(e){if(!$(e.currentTarget).hasClass(this._MARKER_STYLE_CLASSES._DISABLED)){var t=$(e.currentTarget).attr("data-oj-pagenum");this.page(t)}e.preventDefault()},"click .oj-pagingcontrol-nav-first":function(e){$(e.currentTarget).hasClass(this._MARKER_STYLE_CLASSES._DISABLED)||this.firstPage(),e.preventDefault()},"click .oj-pagingcontrol-nav-previous":function(e){$(e.currentTarget).hasClass(this._MARKER_STYLE_CLASSES._DISABLED)||this.previousPage(),e.preventDefault()},"click .oj-pagingcontrol-nav-next":function(e){$(e.currentTarget).hasClass(this._MARKER_STYLE_CLASSES._DISABLED)||this.nextPage(),e.preventDefault()},"click .oj-pagingcontrol-nav-last":function(e){$(e.currentTarget).hasClass(this._MARKER_STYLE_CLASSES._DISABLED)||this.lastPage(),e.preventDefault()},"keypress .oj-pagingcontrol-nav-input":function(e){13===e.which&&e.preventDefault()},"mousedown .oj-pagingcontrol-nav-first":function(e){$(e.currentTarget).hasClass(this._MARKER_STYLE_CLASSES._DISABLED)||$(e.target).addClass(this._MARKER_STYLE_CLASSES._ACTIVE),e.preventDefault()},"mousedown .oj-pagingcontrol-nav-previous":function(e){$(e.currentTarget).hasClass(this._MARKER_STYLE_CLASSES._DISABLED)||$(e.target).addClass(this._MARKER_STYLE_CLASSES._ACTIVE),e.preventDefault()},"mousedown .oj-pagingcontrol-nav-next":function(e){$(e.currentTarget).hasClass(this._MARKER_STYLE_CLASSES._DISABLED)||$(e.target).addClass(this._MARKER_STYLE_CLASSES._ACTIVE),e.preventDefault()},"mousedown .oj-pagingcontrol-nav-last":function(e){$(e.currentTarget).hasClass(this._MARKER_STYLE_CLASSES._DISABLED)||$(e.target).addClass(this._MARKER_STYLE_CLASSES._ACTIVE),e.preventDefault()},"mouseup .oj-pagingcontrol-nav-first":function(e){$(e.target).removeClass(this._MARKER_STYLE_CLASSES._ACTIVE),e.preventDefault()},"mouseup .oj-pagingcontrol-nav-previous":function(e){$(e.target).removeClass(this._MARKER_STYLE_CLASSES._ACTIVE),e.preventDefault()},"mouseup .oj-pagingcontrol-nav-next":function(e){$(e.target).removeClass(this._MARKER_STYLE_CLASSES._ACTIVE),e.preventDefault()},"mouseup .oj-pagingcontrol-nav-last":function(e){$(e.target).removeClass(this._MARKER_STYLE_CLASSES._ACTIVE),e.preventDefault()},"mouseleave .oj-pagingcontrol-nav-first":function(e){$(e.target).removeClass(this._MARKER_STYLE_CLASSES._ACTIVE),e.preventDefault()},"mouseleave .oj-pagingcontrol-nav-previous":function(e){$(e.target).removeClass(this._MARKER_STYLE_CLASSES._ACTIVE),e.preventDefault()},"mouseleave .oj-pagingcontrol-nav-next":function(e){$(e.target).removeClass(this._MARKER_STYLE_CLASSES._ACTIVE),e.preventDefault()},"mouseleave .oj-pagingcontrol-nav-last":function(e){$(e.target).removeClass(this._MARKER_STYLE_CLASSES._ACTIVE),e.preventDefault()}},_refresh:function(){this._data!==this.options.data&&(this._clearCachedDataMetadata(),this._setInitialPage());var e=0,t=0;null!=this._data&&(t=this._data.getStartItemIndex()),null!=this._data&&0!==this._data.totalSize()&&this._data.getEndItemIndex()>=0&&(e=this._data.getEndItemIndex()-t+1),this._mode=this.options.mode,this.options.mode===this._MODE._LOAD_MORE?this._refreshPagingControlLoadMore(e,t):this._refreshPagingControlNav(e,t)},_setOption:function(e,t){if(this._superApply(arguments),this._invokeDataPage(0,!0),this.options.mode!==this._MODE._LOAD_MORE&&"pageOptions"===e){var i=this._getPagingControlContent();null!=i&&(this._unregisterChildStateListeners(i),this._unregisterSwipeHandler(),i.empty()),this._clearCachedDomPagingControlNav(),this._createPagingControlNav(),this._registerSwipeHandler()}this._queueRefresh()},_clearCachedDataMetadata:function(){null!=this._data&&this._unregisterDataSourceEventListeners(),this._data=null},_clearCachedDomLoadMore:function(){this._cachedDomPagingControlLoadMore=null,this._cachedDomPagingControlLoadMoreLink=null,this._cachedDomPagingControlLoadMoreRange=null},_clearCachedDomPagingControlNav:function(){this._cachedDomPagingControlNav=null,this._cachedDomPagingControlNavInput=null,this._cachedDomPagingControlNavInputSummary=null},_createNavArrow:function(e,t,i,n,o,s){var r=$(document.createElement("a"));r.attr("role","button"),r.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_ARROW_CLASS),r.addClass(e),r.addClass(t),r.addClass(this._CSS_CLASSES._WIDGET_ICON_CLASS),r.addClass(this._MARKER_STYLE_CLASSES._CLICKABLE_ICON),r.addClass(this._MARKER_STYLE_CLASSES._DISABLED),r.attr("aria-disabled","true");var a=this.getTranslatedString(i);this._AddHoverable(r),this._focusable({element:r,applyHighlight:!0}),r.attr("title",a),r.attr(this._TAB_INDEX,"0"),r.attr("href","#"),r.attr("oncontextmenu","return false;");var l=this.getTranslatedString(n);r.attr("aria-label",l);var u=this._createAccLabelSpan(l,o);return r.append(u),s&&r.css("display","block"),r},_disableNavArrow:function(e,t){t?(e.addClass(this._MARKER_STYLE_CLASSES._DISABLED),e.removeClass(this._MARKER_STYLE_CLASSES._ENABLED),e.removeClass(this._MARKER_STYLE_CLASSES._FOCUS_HIGHLIGHT),e.removeClass(this._MARKER_STYLE_CLASSES._FOCUS),e.attr("aria-disabled","true"),e.attr("tabindex","-1")):(e.addClass(this._MARKER_STYLE_CLASSES._ENABLED),e.removeClass(this._MARKER_STYLE_CLASSES._DISABLED),e.removeAttr("aria-disabled"),e.attr(this._TAB_INDEX,"0"))},_getCurrentPage:function(){var e=this._getData(),t=0;return null!=e&&(t=e.getPage()),t},_getData:function(){return this._data||null==this.options.data||(this._data=this.options.data,this._dataMetadata=this.options.data,this._registerDataSourceEventListeners()),this._data},_getItemRange:function(e,t){var i=t>=0?t:0,n=$(document.createElement("span")),o=$(document.createElement("span"));this.options.mode===this._MODE._LOAD_MORE?o.addClass(this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_RANGE_CURRENT_CLASS):o.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SUMMARY_CURRENT_CLASS),n.append(o);var s=this._getData();if(null!=s&&null!=s.totalSize()&&null!=e){var r,a,l=this.getTranslatedString(this._BUNDLE_KEY._MSG_ITEM_RANGE_CURRENT_SINGLE,{pageFrom:i}),u=parseInt(t,10)+parseInt(e,10);if(i=u>0?i+1:0,-1!==s.totalSize()){if(i===(u=u>s.totalSize()?s.totalSize():u))l=this.getTranslatedString(this._BUNDLE_KEY._MSG_ITEM_RANGE_CURRENT_SINGLE,{pageFrom:i});else{if(i>u)return n;l=this.getTranslatedString(this._BUNDLE_KEY._MSG_ITEM_RANGE_CURRENT,{pageFrom:i,pageTo:u})}var d=this.getTranslatedString(this._BUNDLE_KEY._MSG_ITEM_RANGE_OF),h=null;"atLeast"===s.totalSizeConfidence()?h=this.getTranslatedString(this._BUNDLE_KEY._MSG_ITEM_RANGE_ATLEAST):"estimate"===s.totalSizeConfidence()&&(h=this.getTranslatedString(this._BUNDLE_KEY._MSG_ITEM_RANGE_APPROX));var c=$(document.createElement("span"));null==h?c.text(" "+d+" "):c.text(" "+h+" "),n.append(c);var p=$(document.createElement("span"));this.options.mode===this._MODE._LOAD_MORE?p.addClass(this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_RANGE_MAX_CLASS):p.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SUMMARY_MAX_CLASS),p.text(s.totalSize()),n.append(p),r=this.getTranslatedString(this._BUNDLE_KEY._MSG_ITEM_RANGE_ITEMS),(a=$(document.createElement("span"))).text(" "+r),n.append(a)}else l=0===e?this.getTranslatedString(this._BUNDLE_KEY._MSG_ITEM_RANGE_CURRENT_SINGLE,{pageFrom:0}):this.getTranslatedString(this._BUNDLE_KEY._MSG_ITEM_RANGE_CURRENT,{pageFrom:i,pageTo:u}),r=this.getTranslatedString(this._BUNDLE_KEY._MSG_ITEM_RANGE_ITEMS),(a=$(document.createElement("span"))).text(" "+r),n.append(a);o.text(l)}return n},_getMaxPageLinks:function(){var e=this.options.pageOptions.maxPageLinks;return this.options.pageOptions.type===this._TYPE._DOTS?e=Number.MAX_VALUE:e||(e=this._PAGE_OPTION_DEFAULT_MAX_PAGE_LINKS),e},_getMaxPageVal:function(e){var t=0;if(this._getTotalPages()>0&&this._isTotalSizeConfidenceActual())t=this._getTotalPages();else if(e>0){var i=this._getData();t=null==i||"atLeast"!==i.totalSizeConfidence()&&"estimate"!==i.totalSizeConfidence()?this._getCurrentPage()+2:this._getTotalPages()+1}else t=this._getCurrentPage()+1;return t},_getRejectPromise:function(){return Promise.reject()},_getTotalPages:function(){var e=this._getData(),t=0;return null!=e&&(t=e.getPageCount()),t=t>=-1?t:0},_handleDataFetchEnd:function(e){this._handleFocusAfterFetch(),this._queueRefresh()},_handleFocusAfterFetch:function(){var e=$(document.activeElement),t=this;if(e.hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_PAGE_CLASS)){var i=parseInt(e.attr("data-oj-pagenum"),10);setTimeout(function(){if(i>=0){var e=i+1,n=i-1,o=t._getPagingControlContent().find("a[data-oj-pagenum="+e+"]");if(null!=o&&o.length>0)o.focus();else{var s=t._getPagingControlContent().find("a[data-oj-pagenum="+n+"]");null!=s&&s.length>0&&s.focus()}}i=null,t=null},100)}else e.hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_FIRST_CLASS)?setTimeout(function(){t._getPagingControlContent().find("."+t._CSS_CLASSES._PAGING_CONTROL_NAV_NEXT_CLASS).focus(),t=null},100):e.hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_PREVIOUS_CLASS)?setTimeout(function(){var e=t._getPagingControlContent().find("."+t._CSS_CLASSES._PAGING_CONTROL_NAV_PREVIOUS_CLASS);e.hasClass(t._MARKER_STYLE_CLASSES._DISABLED)?t._getPagingControlContent().find("."+t._CSS_CLASSES._PAGING_CONTROL_NAV_NEXT_CLASS).focus():e.focus(),t=null},100):e.hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_NEXT_CLASS)?setTimeout(function(){var e=t._getPagingControlContent().find("."+t._CSS_CLASSES._PAGING_CONTROL_NAV_NEXT_CLASS);e.hasClass(t._MARKER_STYLE_CLASSES._DISABLED)?t._getPagingControlContent().find("."+t._CSS_CLASSES._PAGING_CONTROL_NAV_PREVIOUS_CLASS).focus():e.focus(),t=null},100):e.hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_LAST_CLASS)?setTimeout(function(){t._getPagingControlContent().find("."+t._CSS_CLASSES._PAGING_CONTROL_NAV_PREVIOUS_CLASS).focus(),t=null},100):e.hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_CLASS)?setTimeout(function(){t._getPagingControlContent().find("."+t._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_CLASS).focus(),t=null},100):e.hasClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_DOT_CLASS)&&setTimeout(function(){var e,i=t._getPagingControlContent().find("."+t._CSS_CLASSES._PAGING_CONTROL_NAV_DOT_CLASS);i.each(function(t,i){"div"===i.localName&&(e=t)}),null!=e&&(e===i.length-1?i[Math.max(e-1,0)]:i[e+1]).focus(),t=null},100)},_handleDataPage:function(e){e.page!==e.previousPage&&(this._handleFocusAfterFetch(),this._queueRefresh())},_handleDataReset:function(e){this._invokeDataPage(0,!1)},_handleDataRefresh:function(e){this._queueRefresh()},_handleDataSort:function(e){this.options.mode===this._MODE._LOAD_MORE&&this._handleDataReset(e)},_handleDataRowAdd:function(e){if(this._isOperationOnCurrentPage(e))return this.options.mode===this._MODE._PAGE?void this._invokeDataPage(this._getCurrentPage(),!0):void this._invokeDataFetchCurrent();this._queueRefresh()},_handleDataRowRemove:function(e){if(this.options.mode===this._MODE._PAGE){if(this._getTotalPages()>0&&this._getCurrentPage()>this._getTotalPages()-1)return void this._invokeDataPage(this._getTotalPages()-1,!0);if(this._isOperationOnCurrentPage(e))return void this._invokeDataPage(this._getCurrentPage(),!0)}else if(this._isOperationOnCurrentPage(e))return void this._invokeDataFetchCurrent();this._queueRefresh()},_handlePageChange:function(e,t){if("value"===t.option){var i=t.value;i!==this._getCurrentPage()+1&&!isNaN(i)&&i>0&&(i=Math.round(i),this.page(i-1))}},_invokeDataPage:function(e,t){try{e=parseInt(e,10)}catch(e){return Promise.reject(e)}this._currentStartIndex=0;var i=this;return setTimeout(function(){i._resetPagingControlNavInput()},0),t?(this._stopFetchAction=!1,this._queuePageFetch(e),Promise.resolve()):this._invokeDataSetPage(e)},_invokeDataSetPage:function(e){var t=this._getData(),i=this;return new Promise(function(n,o){if(null!=t){var s=i._addComponentBusyState("is setting page.");t.setPage(e,{pageSize:i.options.pageSize}).then(function(){i._removeComponentBusyState(s),i=null,s=null,n(null)},function(e){i._removeComponentBusyState(s),i=null,s=null,o(e)}),t=null}else i=null,n(null)})},_invokeDataFetchNext:function(){var e=this.options.pageSize;return this._currentStartIndex?this._currentStartIndex=this._currentStartIndex+e:this._currentStartIndex=e,this._invokeDataFetch({startIndex:this._currentStartIndex,pageSize:e})},_invokeDataFetch:function(e){var t=this._getData();if(!this._isTotalSizeConfidenceActual()||t.totalSize()>this._currentStartIndex&&this._isTotalSizeConfidenceActual()){var i=this;return new Promise(function(n,o){var s=i._addComponentBusyState("is fetching data.");t.fetch(e).then(function(e){i._removeComponentBusyState(s),i=null,s=null,n(e)},function(){i._removeComponentBusyState(s),i=null,s=null,o(null)}),t=null})}return Promise.resolve()},_invokeDataFetchCurrent:function(){var e=this.options.pageSize;return this._invokeDataFetch({startIndex:0,pageSize:this._currentStartIndex+e})},_isOperationOnCurrentPage:function(e){if(null==e)return!1;var t=this._getData(),i=t.getStartItemIndex();this.options.mode===this._MODE._LOAD_MORE&&(i=0);var n,o=t.getEndItemIndex();if(null!=e.index){if((n=e.index)>=i&&n<=o)return!0}else if(null!=e.indexes){var s;for(s=0;s<e.indexes.length;s++)if((n=e.indexes[s])>=i&&n<=o)return!0}return!1},_isTotalSizeConfidenceActual:function(){var e=this._getData();return null!=e&&"actual"===e.totalSizeConfidence()},_queuePageFetch:function(t){var i=this;this._pendingPageFetch||(this._pageFetchCount=0,this._pendingPageFetch=Promise.resolve()),this._pageFetchCount+=1,this._pageFetchLatestPage=t,this._pendingPageFetch=this._pendingPageFetch.then(function(){i._pageFetchCount-=1,i._stopFetchAction?i._stopFetchAction=!1:0!==i._pageFetchCount||i._componentDestroyed||(i._pendingPageFetch=void 0,i._invokeDataSetPage(i._pageFetchLatestPage).then(function(){i=null},function(t){i._pageFetchCount-=1,i._pageFetchCount<=0&&(i._pendingPageFetch=void 0,e.error(t),i=null)}))},function(t){i._pageFetchCount-=1,i._pageFetchCount<=0&&(i._pendingPageFetch=void 0,e.error(t),i=null)})},_queueRefresh:function(){var t=this;this._pendingRefreshes||(this._refreshCount=0,this._pendingRefreshes=Promise.resolve(),this._setComponentNotReady()),this._refreshCount+=1,this._pendingRefreshes=this._pendingRefreshes.then(function(){t._refreshCount-=1,0===t._refreshCount&&(t._pendingRefreshes=void 0,t._componentDestroyed||(t._refresh(),t._trigger("ready")),t._setComponentReady(),t=null)},function(i){t._refreshCount-=1,0===t._refreshCount&&(t._pendingRefreshes=void 0,e.error(i),t._setComponentReady(),t=null)})},_refreshPagingControlLoadMore:function(e,t){var i=this._getData(),n=this._getPagingControlLoadMore(),o=t+e,s=!(null!=i&&(o===i.totalSize()&&this._isTotalSizeConfidenceActual()||0===i.totalSize()));if(!n||s){var r=this._getPagingControlContent();null!=r&&r.empty(),this._clearCachedDomLoadMore(),n=this._createPagingControlLoadMore(),o=-1,null!=e&&(o=t+e),o<0||o<this.options.loadMoreOptions.maxCount?(this._createPagingControlLoadMoreLink(),this._createPagingControlLoadMoreRange(e,t)):this._createPagingControlLoadMoreMaxRows()}s||n.css("display","none")},_refreshPagingControlNav:function(e,t){var i=this.options.overflow;if(this._refreshPagingControlNavMaxPageVal(e,t),this._refreshPagingControlNavLabel(),this._refreshPagingControlNavInput(),this._refreshPagingControlNavSummaryLabel(e,t),this._refreshPagingControlNavPages(e,t),this._refreshPagingControlNavArrows(e,t),"fit"===i){var n=this.element.width(),o=this._getPagingControlNavArrowSection(),s=this._getPagingControlNavInputSection(),r=this._getPagingControlNavPageLinks(),a=this._getPagingControlNavInputSummary(),l=null!=o?o[0].offsetWidth:0,u=null!=s?s[0].offsetWidth:0,d=null!=r?r.width():0,h=null!=a?a.width():0,c=l+u+h;c>n?c-d<=n?r.css("display","none"):c-d-h<=n?(null!=r&&r.css("display","none"),null!=a&&a.css("display","none")):(null!=r&&r.css("display","none"),null!=a&&a.css("display","none"),null!=o&&o.css("display","none")):c>0&&(null!=r&&r.css("display",""),null!=a&&a.css("display",""),null!=o&&o.css("display",""))}},_refreshPagingControlNavArrows:function(e,t){var i=this.options.pageSize,n=this._getPagingControlNavArrowSection(),o=n.children("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_FIRST_CLASS);if(o&&o.length>0){o=$(o[0]);var s=this.getTranslatedString(this._BUNDLE_KEY._TIP_NAV_FIRST_PAGE);o.attr("title",s),this._disableNavArrow(o,0===this._getCurrentPage())}var r=n.children("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_PREVIOUS_CLASS);if(r&&r.length>0){r=$(r[0]);var a=this.getTranslatedString(this._BUNDLE_KEY._TIP_NAV_PREVIOUS_PAGE);r.attr("title",a),this._disableNavArrow(r,0===this._getCurrentPage())}var l=n.children("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_LAST_CLASS);if(l&&l.length>0){l=$(l[0]);var u=this.getTranslatedString(this._BUNDLE_KEY._TIP_NAV_LAST_PAGE);l.attr("title",u),this._disableNavArrow(l,this._getCurrentPage()===this._getTotalPages()-1||this._getTotalPages()<=0||!this._isTotalSizeConfidenceActual())}var d=n.children("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_NEXT_CLASS);if(d&&d.length>0){d=$(d[0]);var h=this.getTranslatedString(this._BUNDLE_KEY._TIP_NAV_NEXT_PAGE);d.attr("title",h),this._disableNavArrow(d,this._getCurrentPage()===this._getTotalPages()-1&&this._isTotalSizeConfidenceActual()||0===this._getTotalPages()||this._getTotalPages()<0&&0===e||this._getTotalPages()<0&&e<i)}},_refreshPagingControlNavPages:function(e,t){var i=this._getPagingControlNav().find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_PAGES_SECTION_CLASS);null!=i&&i.length>0&&(i=$(i.get(0)),this._unregisterChildStateListeners(i),i.empty(),this._createPagingControlNavPages(i,this._getMaxPageLinks(),e,t))},_refreshPagingControlNavLabel:function(){var e=this._getPagingControlNavInputSection();if(null!=e){var t=e.children("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_LABEL_CLASS);if(null!=t&&t.length>0){t=$(t[0]);var i=this.getTranslatedString(this._BUNDLE_KEY._LABEL_NAV_INPUT_PAGE);t.text(i)}}},_refreshPagingControlNavInput:function(){var e=this._getPagingControlNavInput();if(null!=e){var t=this.getTranslatedString(this._BUNDLE_KEY._TIP_NAV_INPUT_PAGE);e.attr("title",t),e.ojInputText("option","title",t)}},_refreshPagingControlNavSummaryLabel:function(e,t){var i=this._getPagingControlNav().children("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SUMMARY_CLASS);if(null!=i&&i.length>0){var n=this._getItemRange(e,t);(i=$(i.get(0))).empty(),n.text().length>0&&(i.append("("),i.append(n),i.append(")"))}},_refreshPagingControlNavMaxPageVal:function(e,t){var i,n=this._getMaxPageVal(e),o=this._getPagingControlNav().find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_MAX_CLASS);if(null!=o&&o.length>0)o=$(o.get(0)),this._getTotalPages()>0&&this._isTotalSizeConfidenceActual()?(i=this.getTranslatedString(this._BUNDLE_KEY._LABEL_NAV_INPUT_PAGE_MAX,{pageMax:n}),o.text(i)):o.empty();else{var s=this._getPagingControlNavInputSection();null!=s&&this._getTotalPages()>0&&this._isTotalSizeConfidenceActual()&&n>=this._getCurrentPage()+1&&((o=$(document.createElement("span"))).addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_MAX_CLASS),o.addClass("oj-label-inline"),s.append(o),i=this.getTranslatedString(this._BUNDLE_KEY._LABEL_NAV_INPUT_PAGE_MAX,{pageMax:n}),o.text(i))}var r=this._getPagingControlNav().find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_CLASS);if(null!=r&&r.length>0){(r=$(r.get(0))).ojInputText(),r.ojInputText("option","validators",[{type:"numberRange",options:{min:1,max:n}}]);var a=r.ojInputText("option","messagesShown");null!=a&&0!==a.length||this._resetPagingControlNavInput(),1===n?r.ojInputText("option","readOnly",!0):r.ojInputText("option","readOnly",!1)}},_registerDataSourceEventListeners:function(){var e=this._getData();if(null!=e){this._unregisterDataSourceEventListeners(),this._dataSourceEventHandlers=[],this._dataSourceEventHandlers.push({eventType:n.PagingModel.EventType.PAGE,eventHandler:this._handleDataPage.bind(this)}),this._dataSourceEventHandlers.push({eventType:n.PagingModel.EventType.PAGECOUNT,eventHandler:this._handleDataRefresh.bind(this)}),this._dataSourceEventHandlers.push({eventType:n.PagingTableDataSource.EventType.ADD,eventHandler:this._handleDataRowAdd.bind(this)}),this._dataSourceEventHandlers.push({eventType:n.PagingTableDataSource.EventType.REMOVE,eventHandler:this._handleDataRowRemove.bind(this)}),this._dataSourceEventHandlers.push({eventType:n.PagingTableDataSource.EventType.RESET,eventHandler:this._handleDataReset.bind(this)}),this._dataSourceEventHandlers.push({eventType:n.PagingTableDataSource.EventType.REFRESH,eventHandler:this._handleDataRefresh.bind(this)}),this._dataSourceEventHandlers.push({eventType:n.PagingTableDataSource.EventType.SYNC,eventHandler:this._handleDataFetchEnd.bind(this)}),this._dataSourceEventHandlers.push({eventType:n.PagingTableDataSource.EventType.SORT,eventHandler:this._handleDataSort.bind(this)});for(var t=0;t<this._dataSourceEventHandlers.length;t++){var i=e.on(this._dataSourceEventHandlers[t].eventType,this._dataSourceEventHandlers[t].eventHandler);i&&(this._dataSourceEventHandlers[t].eventHandler=i)}}},_registerResizeListener:function(e){if(!this._resizeListener){var t=this;this._resizeListener=function(e,i){t._queueRefresh()}}this._resizeListenerElement||(n.DomUtils.addResizeListener(e[0],this._resizeListener,50),this._resizeListenerElement=e)},_registerSwipeHandler:function(){if(n.DomUtils.isTouchSupported()&&this.options.mode===this._MODE._PAGE){var e,t=this._getPagingControlNav();if(null!=t){var i="vertical"===this.options.pageOptions.orientation,o=this;i?(e={recognizers:[[Hammer.Swipe,{direction:Hammer.DIRECTION_VERTICAL}]]},this._hammerSwipeUp=t.ojHammer(e).on("swipeup",function(e){e.preventDefault(),o.nextPage()}),this._hammerSwipeDown=t.ojHammer(e).on("swipedown",function(e){e.preventDefault(),o.previousPage()})):(e={recognizers:[[Hammer.Swipe,{direction:Hammer.DIRECTION_HORIZONTAL}]]},this._hammerSwipeLeft=t.ojHammer(e).on("swipeleft",function(e){e.preventDefault(),o.nextPage()}),this._hammerSwipeRight=t.ojHammer(e).on("swiperight",function(e){e.preventDefault(),o.previousPage()}))}}},_resetPagingControlNavInput:function(){var e=this._getPagingControlNavInput();if(null!=e&&e.hasClass("oj-component-initnode"))try{e.ojInputText("option","value",this._getCurrentPage()+1)}catch(e){}},_setComponentNotReady:function(){this._readyResolveFunc||(this._readyResolveFunc=this._addComponentBusyState("is being loaded."))},_setComponentReady:function(){this._readyResolveFunc&&(this._removeComponentBusyState(this._readyResolveFunc),this._readyResolveFunc=null)},_setInitialPage:function(){var e=this._getCurrentPage();e>0?this._invokeDataPage(e,!0):this._invokeDataPage(0,!0)},_unregisterDataSourceEventListeners:function(){var e=this._getData();if(null!=this._dataSourceEventHandlers&&null!=e)for(var t=0;t<this._dataSourceEventHandlers.length;t++)e.off(this._dataSourceEventHandlers[t].eventType,this._dataSourceEventHandlers[t].eventHandler)},_unregisterChildStateListeners:function(e){var t=this;e.find("*").each(function(){t._UnregisterChildNode(this)}),t=null},_unregisterResizeListener:function(){null!=this._resizeListenerElement&&(n.DomUtils.removeResizeListener(this._resizeListenerElement,this._resizeListener),this._resizeListenerElement=null)},_unregisterSwipeHandler:function(){n.DomUtils.isTouchSupported()&&("vertical"===this.options.pageOptions.orientation?(null!=this._hammerSwipeUp&&(this._hammerSwipeUp.off("swipeup"),this._hammerSwipeUp=null),null!=this._hammerSwipeDown&&(this._hammerSwipeDown.off("swipedown"),this._hammerSwipeDown=null)):(null!=this._hammerSwipeLeft&&(this._hammerSwipeLeft.off("swipeleft"),this._hammerSwipeLeft=null),null!=this._hammerSwipeRight&&(this._hammerSwipeRight.off("swiperight"),this._hammerSwipeRight=null)))},_createAccLabelSpan:function(e,t){var i=$(document.createElement("span"));return i.addClass(t),i.addClass(this._CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),i.text(e),i},_createPagingControlAccLabel:function(){var e=this._getPagingControlContainer(),t=this.getTranslatedString(this._BUNDLE_KEY._LABEL_ACC_PAGING),i=this._createAccLabelSpan(t,this._CSS_CLASSES._PAGING_CONTROL_ACC_LABEL_CLASS),n=this.element.attr("id")+"_oj_pgCtrl_acc_label";return i.attr("id",n),e.append(i),i},_createPagingControlAccNavPageLabel:function(){var e=this.getTranslatedString(this._BUNDLE_KEY._LABEL_ACC_NAV_PAGE);return this._createAccLabelSpan(e,this._CSS_CLASSES._PAGING_CONTROL_NAV_PAGE_ACC_LABEL_CLASS)},_createPagingControlContent:function(){var e=this._getPagingControlContainer(),t=$(document.createElement("div"));t.addClass(this._CSS_CLASSES._PAGING_CONTROL_CONTENT_CLASS);var i=this._getPagingControlAccLabel().attr("id");return t.attr("role","navigation"),t.attr("aria-labelledby",i),e.append(t),t},_createPagingControlLoadMore:function(){var e=this._getPagingControlContent(),t=$(document.createElement("div"));return t.addClass(this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_CLASS),e.append(t),t},_createPagingControlLoadMoreLink:function(){var e=this._getPagingControlLoadMore(),t=$(document.createElement("a"));t.addClass(this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_LINK_CLASS);var i=this.getTranslatedString(this._BUNDLE_KEY._LABEL_LOAD_MORE);return t.text(i),t.attr(this._TAB_INDEX,"0"),t.attr("href","#"),e.append(t),t},_createPagingControlLoadMoreMaxRows:function(){var e=this._getPagingControlLoadMore(),t=$(document.createElement("span"));t.addClass(this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_MAX_ROWS_CLASS);var i=this.getTranslatedString(this._BUNDLE_KEY._LABEL_LOAD_MORE_MAX_ROWS,{maxRows:this.options.loadMoreOptions.maxCount});return t.text(i),e.append(t),t},_createPagingControlLoadMoreRange:function(e,t){var i=this._getPagingControlLoadMore(),n=$(document.createElement("span"));n.addClass(this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_RANGE_CLASS);var o=this._getItemRange(e,t);return n.append(o),i.append(n),n},_createPagingControlNav:function(e,t){var i=this.options,n="vertical"===this.options.pageOptions.orientation,o="dots"===this.options.pageOptions.type,s=i.pageOptions.layout;null==s&&(s=[this._PAGE_OPTION_LAYOUT._AUTO]);var r=this._getPagingControlContent(),a=$(document.createElement("div"));if(a.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_CLASS),r.append(a),-1!==$.inArray(this._PAGE_OPTION_LAYOUT._AUTO,s)&&!o||-1!==$.inArray(this._PAGE_OPTION_LAYOUT._ALL,s)||-1!==$.inArray(this._PAGE_OPTION_LAYOUT._INPUT,s)){var l=$(document.createElement("div"));l.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SECTION_CLASS),a.append(l);var u=$(document.createElement("label"));u.attr("for",this.element.attr("id")+"_nav_input"),u.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_LABEL_CLASS),u.addClass("oj-label-inline");var d=this.getTranslatedString(this._BUNDLE_KEY._LABEL_NAV_INPUT_PAGE);u.text(d),l.append(u);var h=$(document.createElement("input"));h.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_CLASS);var c=this.getTranslatedString(this._BUNDLE_KEY._TIP_NAV_INPUT_PAGE);h.attr("id",this.element.attr("id")+"_nav_input"),h.attr("title",c),h.attr(this._TAB_INDEX,"0"),h.val(this._getCurrentPage()+1),l.append(h);var p=this._getMaxPageVal(e);if(this._getTotalPages()>0&&this._isTotalSizeConfidenceActual()){var _=$(document.createElement("span"));_.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_MAX_CLASS),_.addClass("oj-label-inline");var m=this.getTranslatedString(this._BUNDLE_KEY._LABEL_NAV_INPUT_PAGE_MAX,{pageMax:p});_.text(m),l.append(_)}h.ojInputText({displayOptions:{messages:["notewindow"],converterHint:["notewindow"],validatorHint:["notewindow"]},rootAttributes:{style:"width: auto; min-width: 0;"},validators:[{type:"numberRange",options:{min:1,max:p}}]}).attr("data-oj-internal",""),h.on({ojoptionchange:this._handlePageChange.bind(this)})}if(-1!==$.inArray(this._PAGE_OPTION_LAYOUT._AUTO,s)&&!o||-1!==$.inArray(this._PAGE_OPTION_LAYOUT._ALL,s)||-1!==$.inArray(this._PAGE_OPTION_LAYOUT._RANGE_TEXT,s)){var g=$(document.createElement("span"));g.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SUMMARY_CLASS),g.addClass("oj-label-inline");var f=this._getItemRange(e,t);f.text().length>0&&(g.append("("),g.append(f),g.append(")")),a.append(g)}var v=$(document.createElement("div"));if(v.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_ARROW_SECTION_CLASS),a.append(v),-1!==$.inArray(this._PAGE_OPTION_LAYOUT._AUTO,s)&&!o||-1!==$.inArray(this._PAGE_OPTION_LAYOUT._ALL,s)||-1!==$.inArray(this._PAGE_OPTION_LAYOUT._NAV,s)){var y=this._createNavArrow(this._CSS_CLASSES._PAGING_CONTROL_NAV_FIRST_CLASS,n?this._CSS_CLASSES._PAGING_CONTROL_NAV_FIRST_VERTICAL_ICON_CLASS:this._CSS_CLASSES._PAGING_CONTROL_NAV_FIRST_ICON_CLASS,this._BUNDLE_KEY._TIP_NAV_FIRST_PAGE,this._BUNDLE_KEY._LABEL_ACC_NAV_FIRST_PAGE,this._CSS_CLASSES._PAGING_CONTROL_NAV_FIRST_ACC_LABEL_CLASS,n);v.append(y);var b=this._createNavArrow(this._CSS_CLASSES._PAGING_CONTROL_NAV_PREVIOUS_CLASS,n?this._CSS_CLASSES._PAGING_CONTROL_NAV_PREVIOUS_VERTICAL_ICON_CLASS:this._CSS_CLASSES._PAGING_CONTROL_NAV_PREVIOUS_ICON_CLASS,this._BUNDLE_KEY._TIP_NAV_PREVIOUS_PAGE,this._BUNDLE_KEY._LABEL_ACC_NAV_PREVIOUS_PAGE,this._CSS_CLASSES._PAGING_CONTROL_NAV_PREVIOUS_ACC_LABEL_CLASS,n);v.append(b)}if(-1!==$.inArray(this._PAGE_OPTION_LAYOUT._AUTO,s)||-1!==$.inArray(this._PAGE_OPTION_LAYOUT._ALL,s)||-1!==$.inArray(this._PAGE_OPTION_LAYOUT._PAGES,s)){var C=$(document.createElement("div"));C.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_PAGES_SECTION_CLASS),v.append(C),this._createPagingControlNavPages(C,this._getMaxPageLinks(),e,t)}if(-1!==$.inArray(this._PAGE_OPTION_LAYOUT._AUTO,s)&&!o||-1!==$.inArray(this._PAGE_OPTION_LAYOUT._ALL,s)||-1!==$.inArray(this._PAGE_OPTION_LAYOUT._NAV,s)){var S=this._createNavArrow(this._CSS_CLASSES._PAGING_CONTROL_NAV_NEXT_CLASS,n?this._CSS_CLASSES._PAGING_CONTROL_NAV_NEXT_VERTICAL_ICON_CLASS:this._CSS_CLASSES._PAGING_CONTROL_NAV_NEXT_ICON_CLASS,this._BUNDLE_KEY._TIP_NAV_NEXT_PAGE,this._BUNDLE_KEY._LABEL_ACC_NAV_NEXT_PAGE,this._CSS_CLASSES._PAGING_CONTROL_NAV_NEXT_ACC_LABEL_CLASS,n);v.append(S);var E=this._createNavArrow(this._CSS_CLASSES._PAGING_CONTROL_NAV_LAST_CLASS,n?this._CSS_CLASSES._PAGING_CONTROL_NAV_LAST_VERTICAL_ICON_CLASS:this._CSS_CLASSES._PAGING_CONTROL_NAV_LAST_ICON_CLASS,this._BUNDLE_KEY._TIP_NAV_LAST_PAGE,this._BUNDLE_KEY._LABEL_ACC_NAV_LAST_PAGE,this._CSS_CLASSES._PAGING_CONTROL_NAV_LAST_ACC_LABEL_CLASS,n);v.append(E)}return a},_createPagingControlNavPages:function(e,t,i,n){if(t<5){var o=this.getTranslatedString(this._BUNDLE_KEY._ERR_MAXPAGELINKS_INVALID_SUMMARY),s=this.getTranslatedString(this._BUNDLE_KEY._ERR_MAXPAGELINKS_INVALID_DETAIL);throw this._stopFetchAction=!0,new Error(o+"\n"+s)}var r=$(document.createElement("div"));r.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_PAGES_LINKS_CLASS),e.append(r);var a=this._getTotalPages(),l=this._getCurrentPage(),u=this.options.pageSize,d=t,h=[];if(l>=0){var c;if(this._isTotalSizeConfidenceActual()&&a<=d)for(h[0]=0,c=1;c<a;c++)h[c]=c;else{h.push(0),0!==l&&h.push(l),l!==a-1&&this._isTotalSizeConfidenceActual()&&h.push(a-1),d-=h.length;var p=l-1,_=1;for(!this._isTotalSizeConfidenceActual()||l!==a-1&&l!==a-2||(_=0);d>_&&p>=1;)h.push(p),p-=1,d-=1;var m=l+1;for(-1===a&&(d=i>0&&i>=u?1:0);d>0&&(m<=a||-1===a);)h.push(m),m+=1,d-=1}for(h.sort(function(e,t){return e-t}),c=0;c<h.length;c++){var g=h[c];this._createPagingControlNavPage(r,g),c!==h.length-1&&g!==h[c+1]-1&&this._createPagingControlNavPage(r,-1)}!this._isTotalSizeConfidenceActual()&&i>=u&&this._createPagingControlNavPage(r,-1)}return r},_createPagingControlNavPage:function(e,t){var i=this._getCurrentPage(),n=null,o="rtl"===this._GetReadingDirection(),s="vertical"===this.options.pageOptions.orientation,r="dots"===this.options.pageOptions.type;if(-1===t)(n=$(document.createElement("span"))).addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_PAGE_ELLIPSIS_CLASS),n.text("..."),e.append(n);else{i===t?((n=$(document.createElement("div"))).addClass(this._MARKER_STYLE_CLASSES._SELECTED),n.addClass(this._MARKER_STYLE_CLASSES._ACTIVE),n.addClass(this._MARKER_STYLE_CLASSES._DISABLED),n.removeClass(this._MARKER_STYLE_CLASSES._ENABLED)):((n=$(document.createElement("a"))).removeClass(this._MARKER_STYLE_CLASSES._SELECTED),n.removeClass(this._MARKER_STYLE_CLASSES._ACTIVE),n.removeClass(this._MARKER_STYLE_CLASSES._DISABLED),n.addClass(this._MARKER_STYLE_CLASSES._ENABLED),n.attr(this._TAB_INDEX,"0"),n.attr("href","#")),n.attr("data-oj-pagenum",t),r?n.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_DOT_CLASS):n.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_PAGE_CLASS);var a=this.getTranslatedString(this._BUNDLE_KEY._TIP_NAV_PAGE_LINK,{pageNum:(t+1).toString()});this._AddHoverable(n),this._focusable({element:n,applyHighlight:!0}),n.attr("title",a),n.attr("oncontextmenu","return false;");var l=this._createPagingControlAccNavPageLabel();n.append(l);var u=$(document.createElement("span"));if(u.append((t+1).toString()),r){u.addClass(this._CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS);var d=$(document.createElement("span"));d.addClass(this._CSS_CLASSES._PAGING_CONTROL_NAV_DOT_BULLET_CLASS),this._AddHoverable(d),i===t&&(d.addClass(this._MARKER_STYLE_CLASSES._SELECTED),d.addClass(this._MARKER_STYLE_CLASSES._ACTIVE)),n.append(d)}else this._AddHoverable(n);var h=o?"rtl":"ltr";u.attr("dir",h),n.append(u),s&&n.css("display","block"),e.append(n)}return n},_getPagingControlAccLabel:function(){var e=this._getPagingControlContainer(),t=null;return e&&(t=e.find("."+this._CSS_CLASSES._PAGING_CONTROL_ACC_LABEL_CLASS))&&t.length>0&&(t=$(t.get(0))),t},_getPagingControlContainer:function(){return $(this.element)},_getPagingControlContent:function(){if(!this._cachedDomPagingControlContent){var e=this._getPagingControlContainer(),t=null;e&&(t=e.find("."+this._CSS_CLASSES._PAGING_CONTROL_CONTENT_CLASS))&&t.length>0&&(this._cachedDomPagingControlContent=$(t.get(0)))}return this._cachedDomPagingControlContent},_getPagingControlLoadMore:function(){if(!this._cachedDomPagingControlLoadMore){var e=this._getPagingControlContent(),t=null;e&&(t=e.children("."+this._CSS_CLASSES._PAGING_CONTROL_LOAD_MORE_CLASS))&&t.length>0&&(this._cachedDomPagingControlLoadMore=$(t.get(0)))}return this._cachedDomPagingControlLoadMore},_getPagingControlNav:function(){if(!this._cachedDomPagingControlNav){var e=this._getPagingControlContent(),t=null;e&&(t=e.children("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_CLASS))&&t.length>0&&(this._cachedDomPagingControlNav=$(t.get(0)))}return this._cachedDomPagingControlNav},_getPagingControlNavInput:function(){if(!this._cachedDomPagingControlNavInput){var e=this._getPagingControlNav(),t=null;e&&(t=e.find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_CLASS))&&t.length>0&&(this._cachedDomPagingControlNavInput=$(t.get(0)))}return this._cachedDomPagingControlNavInput},_getPagingControlNavInputSummary:function(){if(!this._cachedDomPagingControlNavInputSummary){var e=this._getPagingControlNav(),t=null;e&&(t=e.find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SUMMARY_CLASS))&&t.length>0&&(this._cachedDomPagingControlNavInputSummary=$(t.get(0)))}return this._cachedDomPagingControlNavInputSummary},_getPagingControlNavPageLinks:function(){var e=this._getPagingControlNav(),t=null;return e&&(t=e.find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_PAGES_LINKS_CLASS))&&t.length>0&&(t=$(t.get(0))),t},_getPagingControlNavArrowSection:function(){var e=this._getPagingControlNav(),t=null;if(e){if(!((t=e.find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_ARROW_SECTION_CLASS))&&t.length>0))return null;t=$(t.get(0))}return t},_getPagingControlNavInputSection:function(){var e=this._getPagingControlNav(),t=null;if(e){if(!((t=e.find("."+this._CSS_CLASSES._PAGING_CONTROL_NAV_INPUT_SECTION_CLASS))&&t.length>0))return null;t=$(t.get(0))}return t}}),et.extension._WIDGET_NAME="ojPagingControl",n.CustomElementBridge.register("oj-paging-control",{metadata:et});var tt={properties:{bandingInterval:{type:"object",properties:{column:{type:"number",value:0},row:{type:"number",value:0}}},cell:{type:"object",properties:{className:{type:"function|string"},renderer:{type:"function",properties:{componentElement:{type:"Element"},parentElement:{type:"Element"},cell:{type:"D"},data:{type:"D"},datasource:{type:"oj.DataProvider<K, D>"},indexes:{type:"object",properties:{row:{type:"number"},column:{type:"number"}}},keys:{type:"object",properties:{row:{type:"K"},column:{type:"K"}}},extents:{type:"object",properties:{row:{type:"number"},column:{type:"number"}}},mode:{type:'"edit"|"navigation"'}}},style:{type:"function|string"}}},currentCell:{type:"object",writeback:!0},data:{type:"oj.DataGridDataSource|oj.DataProvider"},dnd:{type:"object",properties:{reorder:{type:"object",properties:{row:{type:"string",enumValues:["disable","enable"],value:"disable"}}}}},editMode:{type:"string",writeback:!0,enumValues:["cellEdit","cellNavigation","none"],value:"none"},gridlines:{type:"object",properties:{horizontal:{type:"string",enumValues:["hidden","visible"],value:"visible"},vertical:{type:"string",enumValues:["hidden","visible"],value:"visible"}}},header:{type:"object",properties:{column:{type:"object",properties:{className:{type:"function|string"},label:{type:"object",properties:{className:{type:"function|string"},renderer:{type:"function",properties:{componentElement:{type:"Element"},parentElement:{type:"Element"},datasource:{type:"oj.DataProvider<K, D>"},axis:{type:'"column"|"columnEnd"|"row"|"rowEnd"'},key:{type:"K"},level:{type:"number"}}},style:{type:"function|string"}}},renderer:{type:"function",properties:{componentElement:{type:"Element"},parentElement:{type:"Element"},data:{type:"D"},datasource:{type:"oj.DataProvider<K, D>"},axis:{type:'"column"|"columnEnd"|"row"|"rowEnd"'},index:{type:"number"},key:{type:"K"},level:{type:"number"},extent:{type:"number"},depth:{type:"number"}}},resizable:{type:"object",properties:{height:{type:"string",enumValues:["disable","enable"],value:"disable"},width:{type:"string|function",enumValues:["disable","enable"],value:"disable"}}},sortable:{type:"function|string",enumValues:["auto","disable","enable"],value:"auto"},style:{type:"function|string"}}},columnEnd:{type:"object",properties:{className:{type:"function|string"},label:{type:"object",properties:{className:{type:"function|string"},renderer:{type:"function",properties:{componentElement:{type:"Element"},parentElement:{type:"Element"},datasource:{type:"oj.DataProvider<K, D>"},axis:{type:'"column"|"columnEnd"|"row"|"rowEnd"'},key:{type:"K"},level:{type:"number"}}},style:{type:"function|string"}}},renderer:{type:"function",properties:{componentElement:{type:"Element"},parentElement:{type:"Element"},data:{type:"D"},datasource:{type:"oj.DataProvider<K, D>"},axis:{type:'"column"|"columnEnd"|"row"|"rowEnd"'},index:{type:"number"},key:{type:"K"},level:{type:"number"},extent:{type:"number"},depth:{type:"number"}}},resizable:{type:"object",properties:{height:{type:"string",enumValues:["disable","enable"],value:"disable"},width:{type:"string|function",enumValues:["disable","enable"],value:"disable"}}},style:{type:"function|string"}}},row:{type:"object",properties:{className:{type:"function|string"},label:{type:"object",properties:{className:{type:"function|string"},renderer:{type:"function",properties:{componentElement:{type:"Element"},parentElement:{type:"Element"},datasource:{type:"oj.DataProvider<K, D>"},axis:{type:'"column"|"columnEnd"|"row"|"rowEnd"'},key:{type:"K"},level:{type:"number"}}},style:{type:"function|string"}}},renderer:{type:"function",properties:{componentElement:{type:"Element"},parentElement:{type:"Element"},data:{type:"D"},datasource:{type:"oj.DataProvider<K, D>"},axis:{type:'"column"|"columnEnd"|"row"|"rowEnd"'},index:{type:"number"},key:{type:"K"},level:{type:"number"},extent:{type:"number"},depth:{type:"number"}}},resizable:{type:"object",properties:{height:{type:"string|function",enumValues:["disable","enable"],value:"disable"},width:{type:"string",enumValues:["disable","enable"],value:"disable"}}},sortable:{type:"function|string",enumValues:["auto","disable","enable"],value:"auto"},style:{type:"function|string"}}},rowEnd:{type:"object",properties:{className:{type:"function|string"},label:{type:"object",properties:{className:{type:"function|string"},renderer:{type:"function",properties:{componentElement:{type:"Element"},parentElement:{type:"Element"},datasource:{type:"oj.DataProvider<K, D>"},axis:{type:'"column"|"columnEnd"|"row"|"rowEnd"'},key:{type:"K"},level:{type:"number"}}},style:{type:"function|string"}}},renderer:{type:"function",properties:{componentElement:{type:"Element"},parentElement:{type:"Element"},data:{type:"D"},datasource:{type:"oj.DataProvider<K, D>"},axis:{type:'"column"|"columnEnd"|"row"|"rowEnd"'},index:{type:"number"},key:{type:"K"},level:{type:"number"},extent:{type:"number"},depth:{type:"number"}}},resizable:{type:"object",properties:{height:{type:"string|function",enumValues:["disable","enable"],value:"disable"},width:{type:"string",enumValues:["disable","enable"],value:"disable"}}},style:{type:"function|string"}}}}},scrollPolicy:{type:"string",enumValues:["auto","loadMoreOnScroll","scroll"],value:"auto"},scrollPolicyOptions:{type:"object",properties:{maxColumnCount:{type:"number",value:500},maxRowCount:{type:"number",value:500}}},scrollPosition:{type:"object",writeback:!0,value:{x:0,y:0},properties:{x:{type:"number"},y:{type:"number"},rowIndex:{type:"number"},columnIndex:{type:"number"},rowKey:{type:"any"},columnKey:{type:"any"},offsetX:{type:"number"},offsetY:{type:"number"}}},selection:{type:"Array<Object>",writeback:!0,value:[]},selectionMode:{type:"object",properties:{cell:{type:"string",enumValues:["multiple","none","single"],value:"none"},row:{type:"string",enumValues:["multiple","none","single"],value:"none"}}},translations:{type:"object",value:{},properties:{accessibleActionableMode:{type:"string"},accessibleColumnContext:{type:"string"},accessibleColumnEndHeaderContext:{type:"string"},accessibleColumnHeaderContext:{type:"string"},accessibleColumnSelected:{type:"string"},accessibleColumnSpanContext:{type:"string"},accessibleFirstColumn:{type:"string"},accessibleFirstRow:{type:"string"},accessibleLastColumn:{type:"string"},accessibleLastRow:{type:"string"},accessibleLevelContext:{type:"string"},accessibleMultiCellSelected:{type:"string"},accessibleNavigationMode:{type:"string"},accessibleRangeSelectModeOff:{type:"string"},accessibleRangeSelectModeOn:{type:"string"},accessibleRowCollapsed:{type:"string"},accessibleRowContext:{type:"string"},accessibleRowEndHeaderContext:{type:"string"},accessibleRowExpanded:{type:"string"},accessibleRowHeaderContext:{type:"string"},accessibleRowSelected:{type:"string"},accessibleRowSpanContext:{type:"string"},accessibleSelectionAffordanceBottom:{type:"string"},accessibleSelectionAffordanceTop:{type:"string"},accessibleSortAscending:{type:"string"},accessibleSortDescending:{type:"string"},accessibleStateSelected:{type:"string"},accessibleSummaryEstimate:{type:"string"},accessibleSummaryExact:{type:"string"},accessibleSummaryExpanded:{type:"string"},labelCut:{type:"string"},labelDisableNonContiguous:{type:"string"},labelEnableNonContiguous:{type:"string"},labelPaste:{type:"string"},labelResize:{type:"string"},labelResizeDialogSubmit:{type:"string"},labelResizeHeight:{type:"string"},labelResizeWidth:{type:"string"},labelSortCol:{type:"string"},labelSortColAsc:{type:"string"},labelSortColDsc:{type:"string"},labelSortRow:{type:"string"},labelSortRowAsc:{type:"string"},labelSortRowDsc:{type:"string"},msgFetchingData:{type:"string"},msgNoData:{type:"string"}}}},methods:{refresh:{},getContextByNode:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojResize:{},ojSort:{},ojScroll:{},ojBeforeCurrentCell:{},ojBeforeEdit:{},ojBeforeEditEnd:{}},extension:{}};n.DataGridResources=function(e,t,i,n){this.rtlMode=e,this.translationFunction=t,this.defaultOptions=i,this.widgetName=n,this.styles={},this.styles.datagrid="oj-datagrid",this.styles.cell="oj-datagrid-cell",this.styles.banded="oj-datagrid-banded",this.styles.row="oj-datagrid-row",this.styles.databody="oj-datagrid-databody",this.styles.topcorner="oj-datagrid-top-corner",this.styles.bottomcorner="oj-datagrid-bottom-corner",this.styles.rowheaderspacer="oj-datagrid-row-header-spacer",this.styles.colheaderspacer="oj-datagrid-column-header-spacer",this.styles.status="oj-datagrid-status",this.styles.loadingicon="oj-icon oj-datagrid-loading-icon",this.styles.emptytext="oj-datagrid-empty-text",this.styles.header="oj-datagrid-header",this.styles.endheader="oj-datagrid-end-header",this.styles.groupingcontainer="oj-datagrid-header-grouping",this.styles.headercell="oj-datagrid-header-cell",this.styles.rowheader="oj-datagrid-row-header",this.styles.colheader="oj-datagrid-column-header",this.styles.colheadercell="oj-datagrid-column-header-cell",this.styles.rowheadercell="oj-datagrid-row-header-cell",this.styles.endheadercell="oj-datagrid-end-header-cell",this.styles.rowendheader="oj-datagrid-row-end-header",this.styles.colendheader="oj-datagrid-column-end-header",this.styles.colendheadercell="oj-datagrid-column-end-header-cell",this.styles.rowendheadercell="oj-datagrid-row-end-header-cell",this.styles.headerlabel="oj-datagrid-header-label",this.styles.rowheaderlabel="oj-datagrid-row-header-label",this.styles.columnheaderlabel="oj-datagrid-column-header-label",this.styles.rowendheaderlabel="oj-datagrid-row-end-header-label",this.styles.columnendheaderlabel="oj-datagrid-column-end-header-label",this.styles["scroller-mobile"]="oj-datagrid-scroller-touch",this.styles.scroller="oj-datagrid-scroller",this.styles.scrollers="oj-datagrid-scrollers",this.styles.focus="oj-focus",this.styles.hover="oj-hover",this.styles.active="oj-active",this.styles.selected="oj-selected",this.styles.topSelected="oj-datagrid-selected-top",this.styles.bottomSelected="oj-datagrid-selected-bottom",this.styles.disabled="oj-disabled",this.styles.enabled="oj-enabled",this.styles.default="oj-default",this.styles.sortcontainer="oj-datagrid-sort-icon-container",this.styles.sortascending="oj-datagrid-sort-ascending-icon",this.styles.sortdescending="oj-datagrid-sort-descending-icon",this.styles.icon="oj-component-icon",this.styles.clickableicon="oj-clickable-icon-nocontext",this.styles.info="oj-helper-hidden-accessible",this.styles.rowexpander="oj-rowexpander",this.styles.cut="oj-datagrid-cut",this.styles.selectaffordancetop="oj-datagrid-touch-selection-affordance-top",this.styles.selectaffordancebottom="oj-datagrid-touch-selection-affordance-bottom",this.styles.toucharea="oj-datagrid-touch-area",this.styles.readOnly="oj-read-only",this.styles.editable="oj-datagrid-editable",this.styles.cellEdit="oj-datagrid-cell-edit",this.styles.draggable="oj-draggable",this.styles.drag="oj-drag",this.styles.drop="oj-drop",this.styles.activedrop="oj-active-drop",this.styles.validdrop="oj-valid-drop",this.styles.invaliddrop="oj-invalid-drop",this.styles.formcontrol="oj-form-control-inherit",this.styles.borderHorizontalNone="oj-datagrid-border-horizontal-none",this.styles.borderVerticalNone="oj-datagrid-border-vertical-none",this.styles.borderHorizontalSmall="oj-datagrid-small-content-border-horizontal",this.styles.borderVerticalSmall="oj-datagrid-small-content-border-vertical",this.styles.offsetOutline="oj-datagrid-focus-offset",this.styles.depth="oj-datagrid-depth-",this.styles.popupHeader="oj-datagrid-popup-header",this.styles.popupContent="oj-datagrid-popup-content",this.styles.popupFooter="oj-datagrid-popup-footer",this.commands={},this.commands.sortCol="oj-datagrid-sortCol",this.commands.sortColAsc="oj-datagrid-sortColAsc",this.commands.sortColDsc="oj-datagrid-sortColDsc",this.commands.sortRow="oj-datagrid-sortRow",this.commands.sortRowAsc="oj-datagrid-sortRowAsc",this.commands.sortRowDsc="oj-datagrid-sortRowDsc",this.commands.resize="oj-datagrid-resize",this.commands.resizeWidth="oj-datagrid-resizeWidth",this.commands.resizeHeight="oj-datagrid-resizeHeight",this.commands.cut="oj-datagrid-cut",this.commands.paste="oj-datagrid-paste",this.commands.discontiguousSelection="oj-datagrid-discontiguousSelection",this.attributes={},this.attributes.busyContext=c._OJ_CONTEXT_ATTRIBUTE,this.attributes.context="data-oj-cellContext",this.attributes.resizable="data-oj-resizable",this.attributes.sortable="data-oj-sortable",this.attributes.sortDir="data-oj-sortdir",this.attributes.expander="data-oj-expander",this.attributes.expanderIndex="data-oj-expander-index",this.attributes.container=w._OJ_CONTAINER_ATTR,this.attributes.extent="data-oj-extent",this.attributes.start="data-oj-start",this.attributes.depth="data-oj-depth",this.attributes.level="data-oj-level",this.attributes.tabMod="data-oj-tabmod"},n.DataGridResources.prototype.isRTLMode=function(){return"rtl"===this.rtlMode},n.DataGridResources.prototype.getTranslatedText=function(e,t){return this.translationFunction(e,t)},n.DataGridResources.prototype.getDefaultOption=function(e){return this.defaultOptions?this.defaultOptions[e]:null},n.DataGridResources.prototype.getMappedStyle=function(e){return null!=e?this.styles[e]:null},n.DataGridResources.prototype.getMappedCommand=function(e){return null!=e?this.commands[e]:null},n.DataGridResources.prototype.getMappedAttribute=function(e){return null!=e?this.attributes[e]:null};var it=function(e){this.m_root=e,this.MAX_COLUMN_THRESHOLD=20,this.MAX_ROW_THRESHOLD=30,this.m_utils=new ot(this),this.m_discontiguousSelection=!1,this.m_sizingManager=new nt,this.m_keyboardHandler=new dt(this),this.m_rowHeaderWidth=null,this.m_rowEndHeaderWidth=null,this.m_colHeaderHeight=null,this.m_colEndHeaderHeight=null,this.m_styleClassDimensionMap={width:{},height:{}},this.m_isEstimateRowCount=void 0,this.m_isEstimateColumnCount=void 0,this.m_stopRowFetch=!1,this.m_stopRowHeaderFetch=!1,this.m_stopRowEndHeaderFetch=!1,this.m_stopColumnFetch=!1,this.m_stopColumnHeaderFetch=!1,this.m_stopColumnEndHeaderFetch=!1,this.m_initialized=!1,this.m_shouldFocus=null,this.callbacks={},this._setupActions(),this.m_readinessStack=[],this.m_modelEvents=[],this.m_databodyMap=new Map};it.keyCodes={TAB_KEY:9,ENTER_KEY:13,SHIFT_KEY:16,CTRL_KEY:17,ALT_KEY:18,ESC_KEY:27,SPACE_KEY:32,PAGEUP_KEY:33,PAGEDOWN_KEY:34,END_KEY:35,HOME_KEY:36,LEFT_KEY:37,UP_KEY:38,RIGHT_KEY:39,DOWN_KEY:40,NUM5_KEY:53,V_KEY:86,X_KEY:88,F1_KEY:112,F2_KEY:113,F8_KEY:119,F10_KEY:121,F15_KEY:126,A_KEY:65},it.UPDATE_ANIMATION_FADE_INOUT=1,it.UPDATE_ANIMATION_SLIDE_INOUT=2,it.UPDATE_ANIMATION_DURATION=250,it.EXPAND_ANIMATION_DURATION=500,it.COLLAPSE_ANIMATION_DURATION=400,it.MAX_OVERSCROLL_PIXEL=50,it.BOUNCE_ANIMATION_DURATION=500,it.DECELERATION_FACTOR=6e-4,it.TAP_AND_SCROLL_RESET=300,it.MIN_SWIPE_DURATION=200,it.MAX_SWIPE_DURATION=400,it.MIN_SWIPE_DISTANCE=10,it.MIN_SWIPE_TRANSITION_DURATION=100,it.MAX_SWIPE_TRANSITION_DURATION=500,it.CONTEXT_MENU_TAP_HOLD_DURATION=750,it.HEADER_TAP_SHORT_HOLD_DURATION=300,it.FETCH_PIXEL_THRESHOLD=5,it.VISIBILITY_STATE_HIDDEN="hidden",it.VISIBILITY_STATE_REFRESH="refresh",it.VISIBILITY_STATE_RENDER="render",it.VISIBILITY_STATE_VISIBLE="visible",it.prototype.SetOptions=function(e,t){this.m_options=new st(e,t)},it.prototype.SetSortOriginalEvent=function(e){this.m_sortInfo.originalEvent=e},it.prototype.UpdateOptions=function(e,t){var i,n,o=Object.keys(e);for(n=0;n<o.length;n++)(i=o[n])in this.m_options.options&&this.m_options.options[i]!==e[i]&&(this.m_options.options[i]=e[i]);for(n=0;n<o.length;n++)if(i=o[n],!this._updateDataGrid(i,t)){this.empty(),this.refresh(this.m_root);break}},it.prototype._updateDataGrid=function(e,t){var i;switch(e){case"bandingInterval":this._removeBanding(),this.updateColumnBanding(),this.updateRowBanding();break;case"currentCell":i=this.m_options.getCurrentCell(),this._updateActive(i,!0,!1);break;case"editMode":this.m_editMode=this.m_options.getEditMode();break;case"gridlines":this._updateGridlines();break;case"header":i=this.m_options.options.header,this._updateHeaderOptions(i,t);break;case"scrollPosition":i=this.m_options.getScrollPosition(),this._updateScrollPosition(i);break;case"selection":i=this.m_options.getSelection(),this._updateSelection(i);break;case"selectionMode":this._clearSelection(null);break;default:return!1}return!0},it.prototype._updateSelection=function(e){null!=e&&(this._isSelectionEnabled()?this.SetSelection(e):e.length=0)},it.prototype._updateHeaderOptions=function(e,t){if(null!=t&&null!=t.subkey){var i,n=t.subkey.split("."),o=n[0],s=n[1];if("column"===o&&null!=this.m_colHeader&&null!=this.m_colHeader.firstChild?i=this.m_colHeader.firstChild.childNodes:"row"===o&&null!=this.m_rowHeader&&null!=this.m_rowHeader.firstChild?i=this.m_rowHeader.firstChild.childNodes:"columnEnd"===o&&null!=this.m_colEndHeader&&null!=this.m_colEndHeader.firstChild?i=this.m_colEndHeader.firstChild.childNodes:"rowEnd"===o&&null!=this.m_rowEndHeader&&null!=this.m_rowEndHeader.firstChild&&(i=this.m_rowEndHeader.firstChild.childNodes),null!=i)for(var r=0;r<i.length;r++){var a=i[r],l=a[this.getResources().getMappedAttribute("context")];if(l.index=this.getHeaderCellIndex(a),"resizable"===s)this._isHeaderResizeEnabled(o,l)?this._setAttribute(a,s,"true"):this._setAttribute(a,s,"false");else if("sortable"===s){var u=this.m_utils.containsCSSClassName(a.lastChild,this.getMappedStyle("sortcontainer"));if(this._isSortEnabled(o,l)){if(!u){var d=this._buildSortIcon(l);a.appendChild(d)}this._setAttribute(a,s,"true")}else u&&this._remove(a.lastChild),this._setAttribute(a,s,"false")}}}},it.prototype._updateGridlines=function(){for(var e=this.m_options.getHorizontalGridlines(),t=this.m_options.getVerticalGridlines(),i=this.getResources().isRTLMode()?"right":"left",n=this.m_startRow;n<=this.m_endRow;n++)for(var o=this.m_startCol;o<=this.m_endCol;o++){var s=this._getCellByIndex(this.createIndex(n,o));null!=s&&("hidden"===t||this._isLastColumn(o)&&this.getRowHeaderWidth()+this.getElementDir(s,i)+this.calculateColumnWidth(s)>=this.getWidth()?this.m_utils.addCSSClassName(s,this.getMappedStyle("borderVerticalNone")):this.m_utils.removeCSSClassName(s,this.getMappedStyle("borderVerticalNone")),"hidden"===e||this._isLastRow(n)&&this.getRowBottom(s,null)>=this.getHeight()?this.m_utils.addCSSClassName(s,this.getMappedStyle("borderHorizontalNone")):this.m_utils.removeCSSClassName(s,this.getMappedStyle("borderHorizontalNone")))}},it.prototype._updateEdgeCellBorders=function(e){if(null!=this.m_active&&"header"!==this.m_active.type){var t=this._getActiveElement();null!=t&&(this._isLastRow(this.m_active.indexes.row)&&("none"===e?this.m_utils.addCSSClassName(t,this.getMappedStyle("borderHorizontalNone")):this.m_utils.removeCSSClassName(t,this.getMappedStyle("borderHorizontalNone"))),this._isLastColumn(this.m_active.indexes.column)&&("none"===e?this.m_utils.addCSSClassName(t,this.getMappedStyle("borderVerticalNone")):this.m_utils.removeCSSClassName(t,this.getMappedStyle("borderVerticalNone"))))}},it.prototype.SetResources=function(e){this.m_resources=e},it.prototype.getResources=function(){return this.m_resources},it.prototype.getStartRowHeader=function(){return this.m_startRowHeader},it.prototype.getStartColumnHeader=function(){return this.m_startColHeader},it.prototype.getStartRowEndHeader=function(){return this.m_startRowEndHeader},it.prototype.getStartColumnEndHeader=function(){return this.m_startColEndHeader},it.prototype.getMappedStyle=function(e){return this.getResources().getMappedStyle(e)},it.prototype.SetDataSource=function(e){this.m_modelEvents=[],this.m_dataSource=e},it.prototype.getDataSource=function(){return this.m_dataSource},it.prototype.setVisibility=function(e){this.m_visibility=e},it.prototype.getVisibility=function(){return null==this.m_visibility&&(null!=this.m_root.offsetParent?this.setVisibility(it.VISIBILITY_STATE_VISIBLE):this.setVisibility(it.VISIBILITY_STATE_HIDDEN)),this.m_visibility},it.prototype.SetOptionCallback=function(e){this.m_setOptionCallback=e},it.prototype.SetContextCallback=function(e){this.m_contextCallback=e},it.prototype.SetRemoveCallback=function(e){this.m_removeCallback=e},it.prototype.SetUniqueIdCallback=function(e){this._uniqueIdCallback=e},it.prototype.SetCompareValuesCallback=function(e){this._compareValuesCallback=e},it.prototype.SetSubtreeAttachedCallback=function(e){this.m_subtreeAttachedCallback=e},it.prototype.SetUpdateScrollPostionOnRefreshCallback=function(e){this.m_updateScrollPostionOnRefreshCallback=e},it.prototype._remove=function(e){this._uniqueIdCallback(e,!0),null!=this.m_removeCallback?this.m_removeCallback.call(null,e):e.parentNode.removeChild(e)},it.prototype._removeFromArray=function(e){for(var t=0;t<e.length;t++)this._remove(e[t])},it.prototype.SetNotReadyCallback=function(e){this.m_notReady=e},it.prototype.SetMakeReadyCallback=function(e){this.m_makeReady=e},it.prototype._signalTaskStart=function(){this.m_readinessStack&&(0===this.m_readinessStack.length&&this.m_notReady(),this.m_readinessStack.push(1))},it.prototype._signalTaskEnd=function(){this.m_readinessStack&&this.m_readinessStack.length>0&&(this.m_readinessStack.pop(),0===this.m_readinessStack.length&&this.m_makeReady())},it.prototype._indexes=function(e,t){var i=this,n=this.getDataSource().indexes(e);"function"==typeof n.then?(i._signalTaskStart(),n.then(function(n){t.call(i,n,e),i._signalTaskEnd()},function(){t.call(i,{row:-1,column:-1},e),i._signalTaskEnd()})):t.call(i,n,e)},it.prototype._keys=function(e,t){var i=this,n=this.getDataSource().keys(e);"function"==typeof n.then?(i._signalTaskStart(),n.then(function(n){t.call(i,n,e),i._signalTaskEnd()},function(){t.call(i,{row:null,column:null},e),i._signalTaskEnd()})):t.call(i,n,e)},it.prototype.SetCreateContextCallback=function(e){this.m_createContextCallback=e},it.prototype.SetFocusableCallback=function(e,t){this.m_focusInHandler=e,this.m_focusOutHandler=t},it.prototype.SetFixContextCallback=function(e){this.m_fixContextCallback=e},it.prototype._isHighWatermarkScrolling=function(){return"scroll"!==this.m_options.getScrollPolicy()},it.prototype.destroy=function(){delete this.m_fetching,this._removeDataSourceEventListeners(),this._removeDomEventListeners(),delete this.m_styleClassDimensionMap,this.m_styleClassDimensionMap={width:{},height:{}}},it.prototype._addDataSourceEventListeners=function(){this._removeDataSourceEventListeners(),null!=this.m_dataSource&&(this.m_handleModelEventListener=this.handleModelEvent.bind(this),this.m_handleExpandEventListener=this.handleExpandEvent.bind(this),this.m_handleCollapseEventListener=this.handleCollapseEvent.bind(this),this.m_dataSource.on("change",this.m_handleModelEventListener,this),this.m_dataSource.on("expand",this.m_handleExpandEventListener,this),this.m_dataSource.on("collapse",this.m_handleCollapseEventListener,this))},it.prototype._removeDataSourceEventListeners=function(){null!=this.m_dataSource&&(this.m_dataSource.off("change",this.m_handleModelEventListener),this.m_dataSource.off("expand",this.m_handleExpandEventListener),this.m_dataSource.off("collapse",this.m_handleCollapseEventListener))},it.prototype._addDomEventListeners=function(){this.m_handleDatabodyKeyDown||(this.m_handleDatabodyKeyDown=this.handleDatabodyKeyDown.bind(this)),this.m_handleRootFocus||(this.m_handleRootFocus=this.handleRootFocus.bind(this)),this.m_handleRootBlur||(this.m_handleRootBlur=this.handleRootBlur.bind(this)),this.m_root.addEventListener("keydown",this.m_handleDatabodyKeyDown,!1),this.m_root.addEventListener("focus",this.m_handleRootFocus,!0),this.m_root.addEventListener("blur",this.m_handleRootBlur,!0)},it.prototype._removeDomEventListeners=function(){document.removeEventListener("mousemove",this.m_docMouseMoveListener,!1),document.removeEventListener("mouseup",this.m_docMouseUpListener,!1),null!=this.m_root&&(this.m_handleDatabodyKeyDown&&this.m_root.removeEventListener("keydown",this.m_handleDatabodyKeyDown,!1),this.m_handleRootFocus&&this.m_root.removeEventListener("focus",this.m_handleRootFocus,!0),this.m_handleRootBlur&&this.m_root.removeEventListener("blur",this.m_handleRootBlur,!0))},it.prototype.getRootElement=function(){return this.m_root},it.prototype.getWidth=function(){return null==this.m_width&&(this.m_width=this.getRootElement().clientWidth),this.m_width},it.prototype.getHeight=function(){return null==this.m_height&&(this.m_height=this.getRootElement().clientHeight),this.m_height},it.prototype.getScrollableWidth=function(){var e=this.m_databody.firstChild;return this.getElementWidth(e)},it.prototype.getViewportWidth=function(){var e=this.getWidth();return Math.round(1.5*e)},it.prototype.getViewportHeight=function(){var e=this.getHeight();return Math.round(1.5*e)},it.prototype._getViewportTop=function(){return this.m_currentScrollTop},it.prototype._getViewportBottom=function(){var e=this._getViewportTop(),t=this.getElementHeight(this.m_databody),i=this.m_utils.getScrollbarSize();return this.m_hasHorizontalScroller?e+t-i:e+t},it.prototype._getViewportLeft=function(){return this.m_currentScrollLeft},it.prototype._getViewportRight=function(){var e=this._getViewportLeft(),t=this.getElementWidth(this.m_databody),i=this.m_utils.getScrollbarSize();return this.m_hasVerticalScroller?e+t-i:e+t},it.prototype.getFetchSize=function(e){return"row"===e?(null==this.m_rowFetchSize&&(this.m_rowFetchSize=Math.max(1,Math.round(this.getViewportHeight()/this.getDefaultRowHeight()))),this.m_rowFetchSize):"column"===e?(null==this.m_columnFetchSize&&(this.m_columnFetchSize=Math.max(1,Math.round(this.getViewportWidth()/this.getDefaultColumnWidth()))),this.m_columnFetchSize):0},it.prototype.getEmptyText=function(){var e=this.m_options.getEmptyText();null==e&&(e=this.getResources().getTranslatedText("msgNoData"));return e},it.prototype._buildEmptyText=function(){var e=this.getEmptyText(),t=document.createElement("div");t.id=this.createSubId("empty"),t.className=this.getMappedStyle("emptytext");var i=this.m_endColHeader>=0?this.getColumnHeaderHeight():0;this.setElementDir(t,i,"top");var n=this.getResources().isRTLMode()?"right":"left",o=this.m_endRowHeader>=0?this.getRowHeaderWidth():0;return this.setElementDir(t,o,n),t.textContent=e,this.m_empty=t,t},it.prototype.getRowThreshold=function(){return 0},it.prototype.getColumnThreshold=function(){return 0},it.prototype.setDefaultDimensions=function(){var e=document.createElement("div");e.style.visibilty="hidden";var t=this.getResources();e.className=t.getMappedStyle("rowheadercell")+" "+t.getMappedStyle("colheadercell")+" "+t.getMappedStyle("headercell"),this.m_root.appendChild(e),this.m_defaultColumnWidth=Math.round(e.getBoundingClientRect().width),this.m_defaultRowHeight=Math.round(e.getBoundingClientRect().height),this.m_root.removeChild(e)},it.prototype.getDefaultRowHeight=function(){return null==this.m_defaultRowHeight&&this.setDefaultDimensions(),this.m_defaultRowHeight},it.prototype.getDefaultColumnWidth=function(){return null==this.m_defaultColumnWidth&&this.setDefaultDimensions(),this.m_defaultColumnWidth},it.prototype._getHeaderDimension=function(e,t,i,n){var o=this.m_sizingManager.getSize(i,t);if(null!=o)return o;if(""!==e.style[n])return o=this.getElementDir(e,n),this.m_sizingManager.setSize(i,t,o),o;var s=e.className;return null==(o=this.m_styleClassDimensionMap[n][s])&&(o=this.getElementDir(e,n)),this.m_sizingManager.setSize(i,t,o),this.m_styleClassDimensionMap[n][s]=o,o},it.prototype.createSubId=function(e){var t=this.getRootElement().id;return null==t&&(t=""),[t,e].join(":")},it.prototype.isHeaderFetchComplete=function(){return!1===this.m_fetching.row&&!1===this.m_fetching.column},it.prototype.isFetchComplete=function(){return null!=this.m_fetching&&this.isHeaderFetchComplete()&&!1===this.m_fetching.cells},it.prototype._isLastRow=function(e){return this._isCountUnknown("row")?e===this.m_endRow&&this.m_stopRowFetch:e+1===this.getDataSource().getCount("row")},it.prototype._isLastColumn=function(e){return this._isCountUnknown("column")?e===this.m_endCol&&this.m_stopColumnFetch:e+1===this.getDataSource().getCount("column")},it.prototype.empty=function(){this.m_empty&&this.m_root.removeChild(this.m_empty),this.m_corner&&this._remove(this.m_corner),this.m_bottomCorner&&this._remove(this.m_bottomCorner),this.m_columnHeaderScrollbarSpacer&&this._remove(this.m_columnHeaderScrollbarSpacer),this.m_rowHeaderScrollbarSpacer&&this._remove(this.m_rowHeaderScrollbarSpacer),this.m_root.removeChild(this.m_placeHolder),this.m_root.removeChild(this.m_status),this.m_root.removeChild(this.m_accSummary),this.m_root.removeChild(this.m_accInfo),this.m_root.removeChild(this.m_stateInfo),this.m_root.removeChild(this.m_contextInfo),this._remove(this.m_colHeader),this._remove(this.m_rowHeader),this._remove(this.m_colEndHeader),this._remove(this.m_rowEndHeader),this._remove(this.m_databody),this._clearDatabodyMap()},it.prototype.refresh=function(e){this.resetInternal(),this.render(e)},it.prototype.resetInternal=function(){this.m_initialized=!1,this.m_readinessStack=[],this._signalTaskStart(),this._signalTaskEnd(),this._clearDatabodyMap(),this.m_cursor=null,this.m_corner=null,this.m_bottomCorner=null,this.m_columnHeaderScrollbarSpacer=null,this.m_rowHeaderScrollbarSpacer=null,this.m_colHeader=null,this.m_colEndHeader=null,this.m_rowHeader=null,this.m_rowEndHeader=null,this.m_databody=null,this.m_empty=null,this.m_accInfo=null,this.m_accSummary=null,this.m_contextInfo=null,this.m_placeHolder=null,this.m_stateInfo=null,this.m_status=null,this.m_headerLabels={row:[],column:[],rowEnd:[],columnEnd:[]},this.m_isEstimateRowCount=void 0,this.m_isEstimateColumnCount=void 0,this.m_stopRowFetch=!1,this.m_stopRowHeaderFetch=!1,this.m_stopRowEndHeaderFetch=!1,this.m_stopColumnFetch=!1,this.m_stopColumnHeaderFetch=!1,this.m_stopColumnEndHeaderFetch=!1,this.m_rowFetchSize=null,this.m_columnFetchSize=null,this.m_fetching=null,this.m_processingModelEvent=!1,this.m_processingEventQueue=!1,this.m_animating=!1,this.m_sizingManager.clear(),this.m_styleClassDimensionMap={width:{},height:{}},this.m_height=null,this.m_width=null,this.m_scrollHeight=null,this.m_scrollWidth=null,this.m_avgRowHeight=void 0,this.m_avgColWidth=void 0,this.m_defaultColumnWidth=null,this.m_defaultRowHeight=null,this.m_colHeaderHeight=null,this.m_colEndHeaderHeight=null,this.m_rowHeaderWidth=null,this.m_rowEndHeaderWidth=null,this.m_rowHeaderLevelWidths=[],this.m_rowEndHeaderLevelWidths=[],this.m_columnHeaderLevelHeights=[],this.m_columnEndHeaderLevelHeights=[],this.m_active=null,this.m_prevActive=null,this.m_trueIndex={},this.m_headerDragState=!1,this.m_databodyDragState=!1,this.m_databodyMove=!1,this.m_moveRow=null,this.m_moveRowHeader=null,this.m_dropTarget=null,this.m_dropTargetHeader=null,this.m_discontiguousSelection=!1,this.m_docMouseMoveListener=null,this.m_docMouseUpListener=null,this.m_modelEvents=[],this.m_hasHorizontalScroller=null,this.m_hasVerticalScroller=null,this.m_currentScrollLeft=null,this.m_currentScrollTop=null,this.m_prevScrollLeft=null,this.m_prevScrollTop=null,this.m_handleScrollOverflow=null,this.m_resizing=!1,this.m_resizingElement=null,this.m_resizingElementMin=null,this.m_startRow=null,this.m_startCol=null,this.m_endRow=null,this.m_endCol=null,this.m_startRowPixel=null,this.m_startColPixel=null,this.m_endRowPixel=null,this.m_endColPixel=null,this.m_startRowHeader=null,this.m_startColHeader=null,this.m_endRowHeader=null,this.m_endColHeader=null,this.m_startRowHeaderPixel=null,this.m_startColHeaderPixel=null,this.m_endRowHeaderPixel=null,this.m_endColHeaderPixel=null,this.m_rowHeaderLevelCount=null,this.m_columnHeaderLevelCount=null,this.m_startRowEndHeader=null,this.m_startColEndHeader=null,this.m_endRowEndHeader=null,this.m_endColEndHeader=null,this.m_startRowEndHeaderPixel=null,this.m_startColEndHeaderPixel=null,this.m_endRowEndHeaderPixel=null,this.m_endColEndHeaderPixel=null,this.m_rowEndHeaderLevelCount=null,this.m_columnEndHeaderLevelCount=null,this.m_sortInfo=null,this.m_resizeRequired=null,this.m_externalFocus=null,this.m_currentMode=null,this.m_editMode=null,this.m_hasCells=null,this.m_hasRowHeader=null,this.m_hasRowEndHeader=null,this.m_hasColHeader=null,this.m_hasColEndHeader=null,this.m_isLongScroll=null,this.m_addBorderBottom=null,this.m_addBorderRight=null},it.prototype._shouldInitialize=function(){return this.isFetchComplete()&&!this.m_initialized&&null!=this.m_databody.parentNode},it.prototype._handleInitialization=function(e){!0===e?(this.resizeGrid(),0===this.m_startRow&&0===this.m_startCol&&this.fillViewport(),this.isFetchComplete()&&(this._updateActive(this.m_options.getCurrentCell(),!1,!1),this.m_initialized=!0,this.fireEvent("ready",{}),this._runModelEventQueue())):(this.m_initialized=!0,this.fireEvent("ready",{}),this._runModelEventQueue())},it.prototype._runModelEventQueue=function(){var e;if(null!=this.m_modelEvents){if(this.m_processingEventQueue=!0,0===this.m_modelEvents.length)return void(this.m_processingEventQueue=!1);"expand"===(e=this.m_modelEvents.shift()).operation?this.handleExpandEvent(e,!0):"collapse"===e.operation?this.handleCollapseEvent(e,!0):this.handleModelEvent(e,!0)}else this.m_processingEventQueue=!1},it.prototype.render=function(e){null!=this.m_databody&&(this.destroy(),this.resetInternal()),this.m_timingStart=new Date,this.m_fetching={},this.m_startRow=0,this.m_startCol=0,this.m_endRow=-1,this.m_endCol=-1,this.m_startRowPixel=0,this.m_startColPixel=0,this.m_endRowPixel=0,this.m_endColPixel=0,this.m_startRowHeader=0,this.m_startColHeader=0,this.m_endRowHeader=-1,this.m_endColHeader=-1,this.m_startRowHeaderPixel=0,this.m_startColHeaderPixel=0,this.m_endRowHeaderPixel=0,this.m_endColHeaderPixel=0,this.m_startRowEndHeader=0,this.m_startColEndHeader=0,this.m_endRowEndHeader=-1,this.m_endColEndHeader=-1,this.m_startRowEndHeaderPixel=0,this.m_startColEndHeaderPixel=0,this.m_endRowEndHeaderPixel=0,this.m_endColEndHeaderPixel=0,this.m_currentScrollLeft=0,this.m_currentScrollTop=0,this.m_prevScrollLeft=0,this.m_prevScrollTop=0,this.m_handleScrollOverflow=!1,this.m_rowHeaderLevelWidths=[],this.m_rowEndHeaderLevelWidths=[],this.m_columnHeaderLevelHeights=[],this.m_columnEndHeaderLevelHeights=[],this.buildGrid(e)},it.prototype.buildGrid=function(e){this.m_root=e,this.m_root.setAttribute("role","application"),this._isCellEditable()?this.m_utils.addCSSClassName(this.m_root,this.getMappedStyle("editable")):this.m_utils.addCSSClassName(this.m_root,this.getMappedStyle("readOnly")),e.tabIndex=0;var t=this.buildStatus();e.appendChild(t),this.m_status=t;var i=this.buildAccSummary();e.appendChild(i),this.m_accSummary=i;var n=this.buildAccInfo();e.appendChild(n),this.m_accInfo=n;var o=this.buildStateInfo();e.appendChild(o),this.m_stateInfo=o;var s=this.buildContextInfo();e.appendChild(s),this.m_contextInfo=s;var r=this.buildPlaceHolder();if(e.appendChild(r),this.m_placeHolder=r,this.m_headerLabels={row:[],column:[],rowEnd:[],columnEnd:[]},null!=this.getDataSource()){this.m_empty=null;var a=this.getResources().isRTLMode(),l=this.buildHeaders("column",this.getMappedStyle("colheader"),this.getMappedStyle("colendheader")),u=l.root,d=l.endRoot;e.insertBefore(u,t),e.insertBefore(d,t);var h=(l=this.buildHeaders("row",this.getMappedStyle("rowheader"),this.getMappedStyle("rowendheader"))).root,c=l.endRoot;e.insertBefore(h,t),e.insertBefore(c,t);var p=this.buildDatabody();if(e.insertBefore(p,t),a&&(u.style.direction="rtl",p.style.direction="rtl"),this.m_isResizing=!1,this.m_resizingElement=null,this.m_resizingElementMin=null,this.m_databodyDragState=!1,this.m_docMouseMoveListener=this.handleMouseMove.bind(this),this.m_docMouseUpListener=this.handleMouseUp.bind(this),this.m_utils.isTouchDevice())p.addEventListener("touchstart",this.handleTouchStart.bind(this),!1),p.addEventListener("touchmove",this.handleTouchMove.bind(this),!1),p.addEventListener("touchend",this.handleTouchEnd.bind(this),!1),p.addEventListener("touchcancel",this.handleTouchCancel.bind(this),!1),u.addEventListener("touchstart",this.handleHeaderTouchStart.bind(this),!1),u.addEventListener("touchmove",this.handleHeaderTouchMove.bind(this),!1),u.addEventListener("touchend",this.handleHeaderTouchEnd.bind(this),!1),u.addEventListener("touchcancel",this.handleHeaderTouchCancel.bind(this),!1),h.addEventListener("touchstart",this.handleHeaderTouchStart.bind(this),!1),h.addEventListener("touchmove",this.handleHeaderTouchMove.bind(this),!1),h.addEventListener("touchend",this.handleHeaderTouchEnd.bind(this),!1),h.addEventListener("touchcancel",this.handleHeaderTouchCancel.bind(this),!1),d.addEventListener("touchstart",this.handleHeaderTouchStart.bind(this),!1),d.addEventListener("touchmove",this.handleHeaderTouchMove.bind(this),!1),d.addEventListener("touchend",this.handleHeaderTouchEnd.bind(this),!1),d.addEventListener("touchcancel",this.handleHeaderTouchCancel.bind(this),!1),c.addEventListener("touchstart",this.handleHeaderTouchStart.bind(this),!1),c.addEventListener("touchmove",this.handleHeaderTouchMove.bind(this),!1),c.addEventListener("touchend",this.handleHeaderTouchEnd.bind(this),!1),c.addEventListener("touchcancel",this.handleHeaderTouchCancel.bind(this),!1);else{var _=this.m_utils.getMousewheelEvent();p.addEventListener(_,this.handleDatabodyMouseWheel.bind(this),!1),p.addEventListener("mousedown",this.handleDatabodyMouseDown.bind(this),!1),p.addEventListener("mousemove",this.handleDatabodyMouseMove.bind(this),!1),p.addEventListener("mouseup",this.handleDatabodyMouseUp.bind(this),!1),p.addEventListener("mouseout",this.handleDatabodyMouseOut.bind(this),!1),p.addEventListener("mouseover",this.handleDatabodyMouseOver.bind(this),!1),p.addEventListener("dblclick",this.handleDatabodyDoubleClick.bind(this),!1),h.addEventListener(_,this.handleDatabodyMouseWheel.bind(this),!1),h.addEventListener("mousedown",this.handleHeaderMouseDown.bind(this),!1),u.addEventListener("mousedown",this.handleHeaderMouseDown.bind(this),!1),h.addEventListener("mouseover",this.handleHeaderMouseOver.bind(this),!1),u.addEventListener("mouseover",this.handleHeaderMouseOver.bind(this),!1),h.addEventListener("mousemove",this.handleRowHeaderMouseMove.bind(this),!1),u.addEventListener("mousemove",this.handleColumnHeaderMouseMove.bind(this),!1),h.addEventListener("mouseup",this.handleHeaderMouseUp.bind(this),!1),u.addEventListener("mouseup",this.handleHeaderMouseUp.bind(this),!1),h.addEventListener("mouseout",this.handleHeaderMouseOut.bind(this),!1),u.addEventListener("mouseout",this.handleHeaderMouseOut.bind(this),!1),h.addEventListener("click",this.handleHeaderClick.bind(this),!1),u.addEventListener("click",this.handleHeaderClick.bind(this),!1),c.addEventListener(_,this.handleDatabodyMouseWheel.bind(this),!1),c.addEventListener("mousedown",this.handleHeaderMouseDown.bind(this),!1),d.addEventListener("mousedown",this.handleHeaderMouseDown.bind(this),!1),c.addEventListener("mouseover",this.handleHeaderMouseOver.bind(this),!1),d.addEventListener("mouseover",this.handleHeaderMouseOver.bind(this),!1),c.addEventListener("mousemove",this.handleRowHeaderMouseMove.bind(this),!1),d.addEventListener("mousemove",this.handleColumnHeaderMouseMove.bind(this),!1),c.addEventListener("mouseup",this.handleHeaderMouseUp.bind(this),!1),d.addEventListener("mouseup",this.handleHeaderMouseUp.bind(this),!1),c.addEventListener("mouseout",this.handleHeaderMouseOut.bind(this),!1),d.addEventListener("mouseout",this.handleHeaderMouseOut.bind(this),!1),c.addEventListener("click",this.handleHeaderClick.bind(this),!1),d.addEventListener("click",this.handleHeaderClick.bind(this),!1)}this._shouldInitialize()&&this._handleInitialization(!0)}else{var m=this._buildEmptyText();this.m_root.appendChild(m),this._handleInitialization(!1)}},it.prototype.HandleResize=function(e,t){e=this.getRootElement().clientWidth,t=this.getRootElement().clientHeight,e===this.m_width&&t===this.m_height||(this.m_width=e,this.m_height=t,this.m_rowFetchSize=null,this.m_columnFetchSize=null,this.m_initialized&&(this.resizeGrid(),this.isFetchComplete()&&(this.m_resizeRequired=!0,this.fillViewport())))},it.prototype.resizeGrid=function(){var e,t,i,n=this.getWidth(),o=this.getHeight(),s=this.m_colHeader,r=this.m_colEndHeader,a=this.m_rowHeader,l=this.m_rowEndHeader,u=this.m_databody,d=u.firstChild,h=this.getColumnHeaderHeight(),c=this.getColumnEndHeaderHeight(),p=this.getRowHeaderWidth(),_=o-h-c,m=n-p-this.getRowEndHeaderWidth(),g=this.m_utils.getScrollbarSize();this._databodyEmpty()&&(null==this.m_empty?(e=this._buildEmptyText(),this.m_root.appendChild(e)):e=this.m_empty,t=this.getElementHeight(e),i=this.getElementWidth(e),t>this.getElementHeight(d)&&this.setElementHeight(d,t),i>this.getElementWidth(d)&&this.setElementWidth(d,i));var f,v,y,b,C,S=this.getElementWidth(u.firstChild),E=this.getElementHeight(u.firstChild),T=this.isDatabodyHorizontalScrollbarRequired(m);if(T)f=this.isDatabodyVerticalScrollbarRequired(_-g),u.style.overflow="auto";else if(f=this.isDatabodyVerticalScrollbarRequired(_))T=this.isDatabodyHorizontalScrollbarRequired(m-g),u.style.overflow="auto";else{this.m_handleScrollOverflow=!1;var D=this;setTimeout(function(){D.m_handleScrollOverflow||D.m_hasVerticalScroller||D.m_hasHorizontalScroller||(u.style.overflow="hidden",D.m_handleScrollOverflow=!0)},10)}this.m_hasHorizontalScroller=T,this.m_hasVerticalScroller=f,-1!==this.m_endColEndHeader?(v=Math.min(E+(T?g:0),_),y=T?v-g:v):(v=_,y=Math.min(E,T?v-g:v)),-1!==this.m_endRowEndHeader?(b=Math.min(S+(f?g:0),m),C=f?b-g:b):(b=m,C=Math.min(S,f?b-g:b));var A=p+C+(f?g:0),I=h+y+(T?g:0),O=this.getResources().isRTLMode()?"right":"left";this.setElementDir(a,0,O),this.setElementDir(a,h,"top"),this.setElementHeight(a,y),this.setElementDir(l,A,O),this.setElementDir(l,h,"top"),this.setElementHeight(l,y),this.setElementDir(s,p,O),this.setElementWidth(s,C),this.setElementDir(r,p,O),this.setElementDir(r,I,"top"),this.setElementWidth(r,C),this.setElementDir(u,h,"top"),this.setElementDir(u,p,O),this.setElementWidth(u,b),this.setElementHeight(u,v),this.m_scrollWidth=S-C,this.m_scrollHeight=E-y,this.buildCorners(),this._adjustHeaderBorders(),this._updateGridlines(),this.m_resizeRequired=!1},it.prototype._sizeDatabodyScroller=function(){var e,t,i=this.m_databody,n=i.firstChild,o=this._databodyEmpty(),s=this._isHighWatermarkScrolling(),r=this.m_utils._getMaxDivHeightForScrolling(),a=this.m_utils._getMaxDivWidthForScrolling(),l=this.getDataSource().getCount("row"),u=this.getDataSource().getCount("column"),d=0,h=0;o?(d=Math.max(Math.max(this.m_endRowHeaderPixel,this.m_endRowEndHeaderPixel),1),h=Math.max(Math.max(this.m_endColHeaderPixel,this.m_endColEndHeaderPixel),1)):(d=this.m_endRowPixel,h=this.m_endColPixel),e=-1===l||s?d:l*this.m_avgRowHeight,t=-1===u||s?h:u*this.m_avgColWidth,this.setElementHeight(n,Math.min(r,e)),this.setElementWidth(n,Math.min(a,t)),this.m_initialized&&(this.m_scrollWidth=this.getElementWidth(n)-Math.min(this.getElementWidth(n),this.getElementWidth(i)-(this.m_hasVerticalScroller?this.m_utils.getScrollbarSize():0)),this.m_scrollHeight=this.getElementHeight(n)-Math.min(this.getElementHeight(n),this.getElementHeight(i)-(this.m_hasHorizontalScroller?this.m_utils.getScrollbarSize():0)))},it.prototype._adjustLastHeadersAlongAxis=function(e,t,i,n,o,s){for(var r=0;r<t;){var a=this._getHeaderByIndex(e,r,i,t,n);s?this.m_utils.removeCSSClassName(a,o):this.m_utils.addCSSClassName(a,o),r+=this.getHeaderCellDepth(a)}},it.prototype._adjustHeaderBordersAlongAxis=function(e,t,i,n,o,s,r,a){null!=e&&i>=0&&(n?this.m_utils.addCSSClassName(o,s):this.m_utils.removeCSSClassName(o,s),t(i)&&this._adjustLastHeadersAlongAxis(i,r,e,a,s,n))},it.prototype._adjustHeaderBorders=function(){var e,t,i,n,o,s=this.m_utils.getScrollbarSize(),r=this.getWidth(),a=this.getHeight(),l=this.getColumnHeaderHeight(),u=this.getElementWidth(this.m_colHeader),d=this.getElementHeight(this.m_colEndHeader),h=this.getRowHeaderWidth(),c=this.getElementHeight(this.m_rowHeader),p=h+u+this.getElementWidth(this.m_rowEndHeader)+(this.m_hasVerticalScroller?s:0)<r,_=l+c+d+(this.m_hasHorizontalScroller?s:0)<a;if(p&&this.m_endRowEndHeader>=0?(e=!0,this.m_addBorderRight=!0):!0===this.m_addBorderRight&&(e=!1),null!=e)for(t=this.getMappedStyle("borderVerticalSmall"),null!=this.m_columnHeaderScrollbarSpacer&&(e?this.m_utils.addCSSClassName(this.m_columnHeaderScrollbarSpacer,t):this.m_utils.removeCSSClassName(this.m_columnHeaderScrollbarSpacer,t)),null!=this.m_bottomCorner&&(e?this.m_utils.addCSSClassName(this.m_bottomCorner,t):this.m_utils.removeCSSClassName(this.m_bottomCorner,t)),n=this.m_rowEndHeader.firstChild.childNodes,i=0;i<n.length;i++)e?this.m_utils.addCSSClassName(n[i],t):this.m_utils.removeCSSClassName(n[i],t);else t=this.getMappedStyle("borderVerticalNone"),o=this._isLastColumn.bind(this),this._adjustHeaderBordersAlongAxis(this.m_colHeader,o,this.m_endColHeader,p,this.m_columnHeaderScrollbarSpacer,t,this.m_columnHeaderLevelCount,this.m_startColHeader),this._adjustHeaderBordersAlongAxis(this.m_colEndHeader,o,this.m_endColEndHeader,p,this.m_bottomCorner,t,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader);if(e=null,_&&this.m_endColEndHeader>=0?(this.m_addBorderBottom=!0,e=!0):!0===this.m_addBorderBottom&&(e=!1),null!=e)for(t=this.getMappedStyle("borderHorizontalSmall"),null!=this.m_rowHeaderScrollbarSpacer&&(e?this.m_utils.addCSSClassName(this.m_rowHeaderScrollbarSpacer,t):this.m_utils.removeCSSClassName(this.m_rowHeaderScrollbarSpacer,t)),null!=this.m_bottomCorner&&(e?this.m_utils.addCSSClassName(this.m_bottomCorner,t):this.m_utils.removeCSSClassName(this.m_bottomCorner,t)),n=this.m_colEndHeader.firstChild.childNodes,i=0;i<n.length;i++)e?this.m_utils.addCSSClassName(n[i],t):this.m_utils.removeCSSClassName(n[i],t);else t=this.getMappedStyle("borderHorizontalNone"),o=this._isLastRow.bind(this),this._adjustHeaderBordersAlongAxis(this.m_rowHeader,o,this.m_endRowHeader,_,this.m_rowHeaderScrollbarSpacer,t,this.m_rowHeaderLevelCount,this.m_startRowHeader),this._adjustHeaderBordersAlongAxis(this.m_rowEndHeader,o,this.m_endRowEndHeader,_,this.m_bottomCorner,t,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader)},it.prototype.buildCorners=function(){var e,t,i,n,o,s,r=this.m_utils.getScrollbarSize(),a=this.getWidth(),l=this.getHeight(),u=this.getColumnHeaderHeight(),d=this.getElementWidth(this.m_colHeader),h=this.getColumnEndHeaderHeight(),c=this.getRowHeaderWidth(),p=this.getRowEndHeaderWidth(),_=this.getElementHeight(this.m_rowHeader),m=this.getResources().isRTLMode()?"right":"left";if(-1!==this.m_endRowHeader&&-1!==this.m_endColHeader){if(null!=this.m_corner?e=this.m_corner:((e=document.createElement("div")).id=this.createSubId("corner"),e.className=this.getMappedStyle("topcorner")),this.setElementWidth(e,c),this.setElementHeight(e,u),null==this.m_corner){this.m_utils.isTouchDevice()?e.addEventListener("touchstart",this.handleCornerMouseDown.bind(this),!1):(e.addEventListener("mousedown",this.handleCornerMouseDown.bind(this),!1),e.addEventListener("mouseover",this.handleCornerMouseOver.bind(this),!1),e.addEventListener("mouseout",this.handleCornerMouseOut.bind(this),!1)),e.addEventListener("click",this.handleCornerClick.bind(this),!1),this.m_root.appendChild(e),this.m_corner=e;var g=this.m_headerLabels.column.length?this.m_columnHeaderLevelHeights[this.m_columnHeaderLevelCount-1]:this.m_colHeaderHeight;for(s=0;s<this.m_headerLabels.row.length;s++)o=this.m_headerLabels.row[s],this.setElementHeight(o,g),e.appendChild(o);for(g=this.m_headerLabels.row.length?this.m_rowHeaderLevelWidths[this.m_rowHeaderLevelCount-1]:this.m_rowHeaderWidth,s=0;s<this.m_headerLabels.column.length;s++)o=this.m_headerLabels.column[s],this.setElementWidth(o,g),e.appendChild(o);if(this.m_headerLabels.column[this.m_columnHeaderLevelCount-1]&&this.m_headerLabels.row[this.m_rowHeaderLevelCount-1]){var f=this._getHeaderByIndex(this.m_startColHeader,this.m_columnHeaderLevelCount-1,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader),v=this.getElementHeight(f);return this.m_colHeaderHeight+=v,this.m_columnHeaderLevelHeights[this.m_columnHeaderLevelCount-1]+=v,this.resizeColumnHeightsAndShift(v,this.m_columnHeaderLevelCount-1,!1),this.setElementHeight(this.m_colHeader,this.m_colHeaderHeight),void this.manageResizeScrollbars()}}}else this.m_headerLabels.row=[],this.m_headerLabels.column=[];if(null!=this.m_corner&&null==e&&(this.m_root.removeChild(this.m_corner),this.m_corner=null),-1!==this.m_endRowHeader)if(this.m_hasHorizontalScroller||-1!==this.m_endColEndHeader){if(null!=this.m_rowHeaderScrollbarSpacer?i=this.m_rowHeaderScrollbarSpacer:((i=document.createElement("div")).id=this.createSubId("rhSbSpacer"),i.className=this.getMappedStyle("rowheaderspacer")),this.setElementDir(i,_+u,"top"),this.setElementDir(i,0,m),this.setElementWidth(i,this.m_rowHeaderWidth),-1!==this.m_endColEndHeader?this.setElementHeight(i,h+(this.m_hasHorizontalScroller?r:0)):this.setElementHeight(i,l-_-u),null==this.m_rowHeaderScrollbarSpacer)for(this.m_utils.isTouchDevice()?i.addEventListener("touchstart",this.handleCornerMouseDown.bind(this),!1):(i.addEventListener("mousedown",this.handleCornerMouseDown.bind(this),!1),i.addEventListener("mouseover",this.handleCornerMouseOver.bind(this),!1),i.addEventListener("mouseout",this.handleCornerMouseOut.bind(this),!1)),this.m_root.appendChild(i),this.m_rowHeaderScrollbarSpacer=i,s=0;s<this.m_headerLabels.columnEnd.length;s++)o=this.m_headerLabels.columnEnd[s],i.appendChild(o)}else null!=this.m_rowHeaderScrollbarSpacer&&this.m_root.removeChild(this.m_rowHeaderScrollbarSpacer),this.m_rowHeaderScrollbarSpacer=null,this.m_headerLabels.columnEnd=[];if(-1!==this.m_endColHeader)if(this.m_hasVerticalScroller||-1!==this.m_endRowEndHeader){if(null!=this.m_columnHeaderScrollbarSpacer?n=this.m_columnHeaderScrollbarSpacer:((n=document.createElement("div")).id=this.createSubId("chSbSpacer"),n.className=this.getMappedStyle("colheaderspacer")),this.setElementDir(n,c+d,m),this.setElementDir(n,0,"top"),-1!==this.m_endRowEndHeader?this.setElementWidth(n,p+(this.m_hasVerticalScroller?r:0)):this.setElementWidth(n,a-d-c),this.setElementHeight(n,this.m_colHeaderHeight),null==this.m_columnHeaderScrollbarSpacer)for(this.m_utils.isTouchDevice()?n.addEventListener("touchstart",this.handleCornerMouseDown.bind(this),!1):(n.addEventListener("mousedown",this.handleCornerMouseDown.bind(this),!1),n.addEventListener("mouseover",this.handleCornerMouseOver.bind(this),!1),n.addEventListener("mouseout",this.handleCornerMouseOut.bind(this),!1)),this.m_root.appendChild(n),this.m_columnHeaderScrollbarSpacer=n,s=0;s<this.m_headerLabels.rowEnd.length;s++)o=this.m_headerLabels.rowEnd[s],n.appendChild(o)}else null!=this.m_columnHeaderScrollbarSpacer&&this.m_root.removeChild(this.m_columnHeaderScrollbarSpacer),this.m_columnHeaderScrollbarSpacer=null,this.m_headerLabels.rowEnd=[];(this.m_hasHorizontalScroller&&this.m_hasVerticalScroller||this.m_hasVerticalScroller&&-1!==this.m_endColEndHeader||this.m_hasHorizontalScroller&&-1!==this.m_endRowEndHeader||-1!==this.m_endRowEndHeader&&-1!==this.m_endColEndHeader)&&(null!=this.m_bottomCorner?t=this.m_bottomCorner:((t=document.createElement("div")).id=this.createSubId("bcorner"),t.className=this.getMappedStyle("bottomcorner")),this.setElementDir(t,_+u,"top"),this.setElementDir(t,c+d,m),-1!==this.m_endRowEndHeader?this.setElementWidth(t,p+(this.m_hasVerticalScroller?r:0)):this.setElementWidth(t,a-d-c),-1!==this.m_endColEndHeader?this.setElementHeight(t,h+(this.m_hasHorizontalScroller?r:0)):this.setElementHeight(t,l-_-u),null==this.m_bottomCorner&&(this.m_root.appendChild(t),this.m_bottomCorner=t)),null!=this.m_bottomCorner&&null==t&&(this.m_root.removeChild(this.m_bottomCorner),this.m_bottomCorner=null)},it.prototype._updateScrollPosition=function(e){this._scrollToScrollPositionObject(e)},it.prototype._setScrollPosition=function(){this.m_setOptionCallback("scrollPosition",this._createScrollPositionObject(this.m_currentScrollLeft,this.m_currentScrollTop),{_context:{writeback:!0,internalSet:!0}})},it.prototype._clearScrollPositionKeys=function(){var e=this.m_options.getScrollPosition();e.rowKey=void 0,e.columnKey=void 0,this.m_setOptionCallback("scrollPosition",e,{_context:{internalSet:!0}})},it.prototype._createScrollPositionObject=function(e,t){var i={x:e,y:t},n=this.getResources().isRTLMode()?"right":"left",o=this._getCellAtPixel(e,t);if(null!=o)i.rowIndex=this._getIndex(o,"row"),i.columnIndex=this._getIndex(o,"column"),i.rowKey=this._getKey(o,"row"),i.columnKey=this._getKey(o,"column"),i.offsetX=e-this.getElementDir(o,n),i.offsetY=t-this.getElementDir(o,"top");else{var s=this._getHeaderAtPixel(t,"row");null!=s&&(i.rowIndex=this._getIndex(s),i.rowKey=this._getKey(s),i.offsetY=t-this.getElementDir(s,"top"));var r=this._getHeaderAtPixel(e,"column");null!=r&&(i.columnIndex=this._getIndex(r),i.columnKey=this._getKey(r),i.offsetX=e-this.getElementDir(r,n))}return i},it.prototype._getCellAtPixel=function(e,t){for(var i=this.m_databody.firstChild.childNodes,n=this.getResources().isRTLMode()?"right":"left",o=0;o<i.length;o++){var s=i[o],r=this.getElementDir(s,n),a=r+this.getElementWidth(s);if(r<=e&&e<a){var l=this.getElementDir(s,"top"),u=l+this.getElementHeight(s);if(l<=t&&t<u)return s}}return null},it.prototype._getHeaderAtPixel=function(e,t){var i,n,o,s,r=this;function a(t){for(var i=0;i<t.length;i++){var n=t[i],a=r.getElementDir(n,o),l=a+r.getElementDir(n,s);if(a<=e&&e<l)return n}}"row"===t?(i=this.m_rowHeader.firstChild.childNodes,n=this.m_rowEndHeader.firstChild.childNodes,o="top",s="height"):"column"===t&&(i=this.m_colHeader.firstChild.childNodes,n=this.m_colEndHeader.firstChild.childNodes,o=this.getResources().isRTLMode()?"right":"left",s="width");var l=a(i);return null==l&&(l=a(n)),l},it.prototype._checkScrollPosition=function(){null!=this.m_desiredScrollPositionObject?this._scrollToScrollPositionObject(this.m_desiredScrollPositionObject):this._setScrollPosition()},it.prototype._scrollToScrollPositionObject=function(e){var t=e.x,i=e.y,n=e.rowIndex,o=e.columnIndex,s=e.rowKey,r=e.columnKey,a=e.offsetX?e.offsetX:0,l=e.offsetY?e.offsetY:0,u=this.getResources().isRTLMode()?"right":"left",d=this;new Promise(function(e){null!=s||null!=r?d._indexes({row:s,column:r},function(t){e({rowIndexFromKey:t.row,columnIndexFromKey:t.column})}):e({rowIndexFromKey:null,columnIndexFromKey:null})}).then(function(h){var c=Math.floor(d._getPositionEstimate("column",u,r,h.columnIndexFromKey,o,t,a,d.m_currentScrollLeft,d._getMaxRightPixel(),d.m_avgColWidth)),p=Math.floor(d._getPositionEstimate("row","top",s,h.rowIndexFromKey,n,i,l,d.m_currentScrollTop,d._getMaxBottomPixel(),d.m_avgRowHeight));c!==d.m_currentScrollLeft&&(d.m_currentScrollLeft!==d.m_scrollWidth||c<d.m_currentScrollLeft)||p!==d.m_currentScrollTop&&(d.m_currentScrollTop!==d.m_scrollHeight||p<d.m_currentScrollTop)?(null==d.m_desiredScrollPositionObject&&d._signalTaskStart("begin scrolling to new desired location"),d.m_desiredScrollPositionObject=e,d._initiateScroll(c,p)):(null!=d.m_desiredScrollPositionObject&&d._signalTaskEnd("reached desired location"),d.m_desiredScrollPositionObject=null,d._setScrollPosition())})},it.prototype._getPositionEstimate=function(e,t,i,n,o,s,r,a,l,u){var d,h,c=this._isHighWatermarkScrolling();return null!=i&&-1!==n&&(null!=(h=this._getCellOrHeaderByKey(i,e))?d=this.getElementDir(h,t)+r:c?d=l:null!=n&&(d=u*n+r),null!=d)?d:d=null!=o?null!=(h=this._getCellOrHeaderByIndex(o,e))?this.getElementDir(h,t)+r:c?l:u*o:null!=s?s:a},it.prototype.isDatabodyHorizontalScrollbarRequired=function(e){var t,i=this.m_databody;t=null==e?this.getElementWidth(i):e;var n=i.firstChild;return this.getElementWidth(n)>t},it.prototype.isDatabodyVerticalScrollbarRequired=function(e){var t,i=this.m_databody;t=null==e?this.getElementHeight(i):e;var n=i.firstChild;return this.getElementHeight(n)>t},it.prototype.buildStatus=function(){var e=document.createElement("div");e.className=this.getMappedStyle("loadingicon");var t=document.createElement("div");return t.id=this.createSubId("status"),t.className=this.getMappedStyle("status"),t.setAttribute("role","status"),t.appendChild(e),t},it.prototype.buildAccInfo=function(){var e=document.createElement("div");return e.id=this.createSubId("info"),e.className=this.getMappedStyle("info"),e.setAttribute("role","status"),e},it.prototype.buildAccSummary=function(){var e=document.createElement("div");return e.id=this.createSubId("summary"),e.className=this.getMappedStyle("info"),e},it.prototype.buildStateInfo=function(){var e=document.createElement("div");return e.id=this.createSubId("state"),e.className=this.getMappedStyle("info"),e},it.prototype.buildContextInfo=function(){var e=document.createElement("div");return e.id=this.createSubId("context"),e.className=this.getMappedStyle("info"),e},it.prototype.buildPlaceHolder=function(){var e=document.createElement("div");return e.id=this.createSubId("placeHolder"),e.className=this.getMappedStyle("info"),e},it.prototype.populateAccInfo=function(){var e=this.getResources().getTranslatedText("accessibleSummaryExact",{rownum:this.m_endRow+1,colnum:this.m_endCol+1});this.getDataSource().getExpandedKeys&&(e=e+". "+this.getResources().getTranslatedText("accessibleSummaryExpanded",{num:this.getDataSource().getExpandedKeys().length}));e+=". ",this.m_accSummary.textContent=e},it.prototype.SetAccessibleContext=function(e){if(null!=e&&(null!=e.context&&(this.m_accessibleContext=e.context),null!=e.state&&(this.m_stateInfo.textContent=e.state),null!=e.ancestors&&this._isDatabodyCellActive())){var t="",i=e.ancestors,n=this.m_active.indexes.column;if(null!=n&&n>=0)for(var o=0;o<i.length;o++){o>0&&(t=t.concat(", "));var s=i[o],r=this._getAxisCellsByKey(s.key,"row");if(null!=r){var a=r[0].textContent;a=null!=a?a.replace(/\n|<br\s*\/?>/gi,"").trim():"",t=t.concat(s.label).concat(" ").concat(a)}}this.m_accessibleContext=t.concat(", ").concat(this.m_accessibleContext)}},it.prototype._updateStateInfo=function(e){for(var t=". ",i=0;i<e.length;i++){var n=this.getResources().getTranslatedText(e[i].key,e[i].args);null!=n&&(t=2===t.length?t+n:t+", "+n)}t=0===t.length?t:t+". ",this.m_stateInfo.textContent=t},it.prototype._updateContextInfo=function(e,t){var i,n,o;e.indexes&&(i=e.indexes.row,n=e.indexes.column);var s=e.level,r=e.rowHeader,a=e.rowEndHeader,l=e.columnHeader,u=e.columnEndHeader,d="";null!=this.m_accessibleContext||isNaN(i)||"row"===t||null!=(o=this.getResources().getTranslatedText("accessibleRowContext",{index:i+1}))&&(d=o),isNaN(n)||"column"===t||null!=(o=this.getResources().getTranslatedText("accessibleColumnContext",{index:n+1}))&&(d=0===d.length?o:d+", "+o),isNaN(r)||"rowHeader"===t||null!=(o=this.getResources().getTranslatedText("accessibleRowHeaderContext",{index:r+1}))&&(d=0===d.length?o:d+", "+o),isNaN(l)||"columnHeader"===t||null!=(o=this.getResources().getTranslatedText("accessibleColumnHeaderContext",{index:l+1}))&&(d=0===d.length?o:d+", "+o),isNaN(a)||"rowEndHeader"===t||null!=(o=this.getResources().getTranslatedText("accessibleRowEndHeaderContext",{index:a+1}))&&(d=0===d.length?o:d+", "+o),isNaN(u)||"columnEndHeader"===t||null!=(o=this.getResources().getTranslatedText("accessibleColumnEndHeaderContext",{index:u+1}))&&(d=0===d.length?o:d+", "+o),isNaN(s)||"level"===t||null!=(o=this.getResources().getTranslatedText("accessibleLevelContext",{level:s+1}))&&(d=0===d.length?o:d+", "+o),d=0===d.length?d:d+". ",null!=this.m_accessibleContext&&(d+=this.m_accessibleContext,this.m_accessibleContext=null),this.m_contextInfo.textContent=d},it.prototype._isCountUnknown=function(e){var t=this.getDataSource();if("row"===e||"rowEnd"===e){if(void 0===this.m_isEstimateRowCount){var i=t.getCountPrecision("row"),n=t.getCount("row");this.m_isEstimateRowCount="estimate"===i||n<0}return this.m_isEstimateRowCount}if("column"===e||"columnEnd"===e){if(void 0===this.m_isEstimateColumnCount){var o=t.getCountPrecision("column"),s=t.getCount("column");this.m_isEstimateColumnCount="estimate"===o||s<0}return this.m_isEstimateColumnCount}return!1},it.prototype._isCountUnknownOrHighwatermark=function(e){return this._isCountUnknown(e)||this._isHighWatermarkScrolling()},it.prototype._hideHeader=function(e){e.style.display="none"},it.prototype._showHeader=function(e){e.style.display=""},it.prototype.buildHeaders=function(e,t,i){var n=this.getMappedStyle("scroller")+(this.m_utils.isTouchDevice()?" "+this.getMappedStyle("scroller-mobile"):""),o=document.createElement("div");o.id=this.createSubId(e+"Header"),o.className=t+" "+this.getMappedStyle("header");var s=document.createElement("div");s.className=n,o.appendChild(s);var r=document.createElement("div");r.id=this.createSubId(e+"EndHeader"),r.className=i+" "+this.getMappedStyle("endheader");var a=document.createElement("div");if(a.className=n,r.appendChild(a),"column"===e?(this.m_colHeader=o,this.m_colEndHeader=r):"row"===e&&(this.m_rowHeader=o,this.m_rowEndHeader=r),this._isHighWatermarkScrolling()){this.fetchHeaders(e,0,o,r,null,null)}else{var l=this,u=this.m_options.getScrollPosition();this._getIndexesFromScrollPosition(u).then(function(t){var i=t[e];"column"===e?(l.m_startColHeader=i,l.m_startColEndHeader=i):"row"===e&&(l.m_startRowHeader=i,l.m_startRowEndHeader=i),l.m_fetching[e]=!1,l.fetchHeaders(e,i,o,r,null,null)}),this.m_fetching[e]=!0}return{root:o,endRoot:r}},it.prototype.fetchHeaders=function(e,t,i,n,o,s){if(!this.m_fetching[e]){null==o&&(o=this.getFetchCount(e,t));var r,a={axis:e,start:t,count:o,header:i,endHeader:n};this.m_fetching[e]=a,r=null!=s&&null!=s.success?s.success:this.handleHeadersFetchSuccess,this.showStatusText(),this._signalTaskStart(),this.getDataSource().fetchHeaders(a,{success:r,error:this.handleHeadersFetchError},{success:this,error:this})}},it.prototype.isHeaderFetchResponseValid=function(e){var t=e.axis;return null!=this.m_fetching&&e===this.m_fetching[t]},it.prototype.isHeaderFetchResponseInViewport=function(e){if(!this.m_initialized)return!0;var t=e.axis,i=e.start;return("row"===t?this._getLongScrollStart(this.m_currentScrollTop,this.m_prevScrollTop,t):this._getLongScrollStart(this.m_currentScrollLeft,this.m_prevScrollLeft,t)).start===i},it.prototype.handleHeadersFetchSuccess=function(e,t,i,n){var o=this.m_options.getScrollPolicyOptions(),s=o?o.maxRowCount:null,r=o?o.maxColumnCount:null;if(this.isHeaderFetchResponseValid(t)){var a=t.axis;if(this.isLongScroll()&&!this.isHeaderFetchResponseInViewport(t))return this.m_fetching[a]=!1,this.m_headerInvalid=!0,void this._signalTaskEnd();this.m_fetching[a]=!1;var l=t.header,u=t.endHeader,d=t.start,h=this.getDataSource().getCount(a);"column"===a?(null!=e&&(this.buildColumnHeaders(l,e,d,h,!1,!1),(e.getCount()<t.count||r&&r>0&&r===d+e.getCount())&&(this.m_stopColumnHeaderFetch=!0)),this.m_endColHeader<0?(this._hideHeader(l),this.m_stopColumnHeaderFetch=!0,this.m_startColHeader=0):(this.m_hasColHeader=!0,this._buildHeaderLabels(a,e)),null!=i&&(this.buildColumnEndHeaders(u,i,d,h,!1,!1),(i.getCount()<t.count||r&&r>0&&r===d+i.getCount())&&(this.m_stopColumnEndHeaderFetch=!0)),this.m_endColEndHeader<0?(this._hideHeader(u),this.m_stopColumnEndHeaderFetch=!0,this.m_startColEndHeader=0):(this.m_hasColEndHeader=!0,this._buildHeaderLabels("columnEnd",i))):"row"===a&&(null!=e&&(this.buildRowHeaders(l,e,d,h,n,!1),(e.getCount()<t.count||s&&s>0&&s===d+e.getCount())&&(this.m_stopRowHeaderFetch=!0)),this.m_endRowHeader<0?(this._hideHeader(l),this.m_stopRowHeaderFetch=!0,this.m_startRowHeader=0):(this.m_hasRowHeader=!0,this._buildHeaderLabels(a,e)),null!=i&&(this.buildRowEndHeaders(u,i,d,h,n,!1),(i.getCount()<t.count||s&&s>0&&s===d+i.getCount())&&(this.m_stopRowEndHeaderFetch=!0)),this.m_endRowEndHeader<0?(this._hideHeader(u),this.m_stopRowEndHeaderFetch=!0,this.m_startRowEndHeader=0):(this.m_hasRowEndHeader=!0,this._buildHeaderLabels("rowEnd",i))),this.isFetchComplete()&&(this.hideStatusText(),this._shouldInitialize()&&!n&&this._handleInitialization(!0)),this.m_initialized&&this._sizeDatabodyScroller(),this._signalTaskEnd()}else this._signalTaskEnd()},it.prototype.handleHeadersFetchError=function(e,t){var i=t.axis;this.m_fetching[i]=!1,this._signalTaskEnd()},it.prototype.createHeaderContext=function(e,t,i,n,o,s,r,a){var l={};l.axis=e,l.index=t,l.data=i,l.component=this,l.datasource=this.getDataSource(),l.level=s,l.depth=a,l.extent=r,null!=o&&(l.parentElement=o);for(var u=Object.keys(n),d=0;d<u.length;d++){var h=u[d];l[h]=n[h]}return null!=this.m_createContextCallback&&this.m_createContextCallback.call(this,l),this.m_fixContextCallback.call(this,l)},it.prototype._createLabelContext=function(e,t,i,n){var o={};return o.axis=e,o.level=t,o.data=i,o.component=this,o.datasource=this.getDataSource(),null!=n&&(o.parentElement=n),null!=this.m_createContextCallback&&this.m_createContextCallback.call(this,o),this.m_fixContextCallback.call(this,o)},it.prototype._buildHeaderLabels=function(e,t){if(0===this.m_headerLabels[e].length&&t&&t.getLabel){var i,n=t.getLevelCount();"rowEnd"===e?i=this.getResources().isRTLMode()?"left":"right":"row"===e?i=this.getResources().isRTLMode()?"right":"left":"column"===e?i="top":"columnEnd"===e&&(i="bottom");var o=0;if(n>0)for(var s=0;s<n;s++){var r,a=document.createElement("div"),l=t.getLabel(s);if(r="row"===e||"rowEnd"===e?"row"===e?this.m_rowHeaderLevelWidths[s]:this.m_rowEndHeaderLevelWidths[s]:"column"===e?this.m_columnHeaderLevelHeights[s]:this.m_columnEndHeaderLevelHeights[s],null!=l){var u=this._createLabelContext(e,s,l,a);a.setAttribute(this.getResources().getMappedAttribute("container"),this.getResources().widgetName),a.setAttribute(this.getResources().getMappedAttribute("busyContext"),""),this._createUniqueId(a),a[this.getResources().getMappedAttribute("context")]=u;var d=this.m_options.getInlineStyle(e,u,!0);null!=d&&(a.style.cssText=d),a.className=this.getMappedStyle("headerlabel")+" "+this.getMappedStyle(e.toLowerCase()+"headerlabel");var h=this.m_options.getStyleClass(e,u,!0);null!=h&&(a.className+=" "+h),"row"===e||"rowEnd"===e?("rowEnd"===e&&(a.style.height="100%"),this.setElementWidth(a,r),this.setElementDir(a,o,i),this.setElementDir(a,0,"bottom")):("columnEnd"===e&&(a.style.width="100%"),this.setElementHeight(a,r),this.setElementDir(a,o,i),this.setElementDir(a,0,this.getResources().isRTLMode()?"left":"right"));var c=this.m_options.getRenderer(e,!0);this._renderContent(c,u,a,l),this.m_headerLabels[e].push(a)}o+=r}}},it.prototype.buildColumnHeaders=function(e,t,i,n,o,s){if(null==this.m_columnHeaderLevelCount&&(this.m_columnHeaderLevelCount=t.getLevelCount()),0!==this.m_columnHeaderLevelCount){var r=t.getCount(),a=i>this.m_endColHeader;!1;var l=a?this.m_endColHeaderPixel:this.m_startColHeaderPixel,u=this.m_endColHeader,d=this.m_columnHeaderLevelCount,h=this.getMappedStyle("colheader")+" "+this.getMappedStyle("header"),c=this.getMappedStyle("headercell")+" "+this.getMappedStyle("colheadercell");!1;var p=this.buildAxisHeaders(e,t,"column",i,r,a,!1,null,l,u,d,h,c,!1);0;var _=p.totalHeaderDimension,m=p.totalLevelDimension;if(0===_||0!==this.m_avgColWidth&&null!=this.m_avgColWidth||(this.m_avgColWidth=_/r),this.m_colHeaderHeight||(this.m_colHeaderHeight=m,this.setElementHeight(e,this.m_colHeaderHeight)),a?(this.m_endColHeader=i+r-1,this.m_endColHeaderPixel=this.m_endColHeaderPixel+_):(this.m_startColHeader=this.m_startColHeader-r,this.m_startColHeaderPixel=this.m_startColHeaderPixel-_),-1===n&&(n=this.m_endColHeader),!this._isCountUnknown("column")&&this._isHighWatermarkScrolling()&&this.m_endColHeader+1>=n?this.m_stopColumnHeaderFetch=!0:this.m_stopColumnHeaderFetch=p.stopFetch,0===this.m_startColHeader&&0!==this.m_startColHeaderPixel&&(this._shiftHeadersAlongAxisInContainer(e.firstChild,0,-1*this.m_startColHeaderPixel,this.getResources().isRTLMode()?"right":"left",this.getMappedStyle("colheadercell")),this.m_startColHeaderPixel=0),!this.m_initialized&&this.m_startColHeader>0){var g=Math.round(this.m_avgColWidth*this.m_startColHeader);this._shiftHeadersAlongAxisInContainer(e.firstChild,this.m_startColHeader,g-this.m_startColHeaderPixel,this.getResources().isRTLMode()?"right":"left",this.getMappedStyle("colheadercell")),this.m_endColHeaderPixel=g+_,this.m_startColHeaderPixel=g}}},it.prototype.buildColumnEndHeaders=function(e,t,i,n,o,s){if(null==this.m_columnEndHeaderLevelCount&&(this.m_columnEndHeaderLevelCount=t.getLevelCount()),0!==this.m_columnEndHeaderLevelCount){var r=t.getCount(),a=i>this.m_endColEndHeader;!1;var l=a?this.m_endColEndHeaderPixel:this.m_startColEndHeaderPixel,u=this.m_endColEndHeader,d=this.m_columnEndHeaderLevelCount,h=this.getMappedStyle("colendheader")+" "+this.getMappedStyle("endheader"),c=this.getMappedStyle("endheadercell")+" "+this.getMappedStyle("colendheadercell");!1;var p=this.buildAxisHeaders(e,t,"columnEnd",i,r,a,!1,null,l,u,d,h,c,!1);0;var _=p.totalHeaderDimension,m=p.totalLevelDimension;if(0===_||0!==this.m_avgColWidth&&null!=this.m_avgColWidth||(this.m_avgColWidth=_/r),this.m_colEndHeaderHeight||(this.m_colEndHeaderHeight=m,this.setElementHeight(e,this.m_colEndHeaderHeight)),a?(this.m_endColEndHeader=i+(r-1),this.m_endColEndHeaderPixel=this.m_endColEndHeaderPixel+_):(this.m_startColEndHeader=this.m_startColEndHeader-r,this.m_startColEndHeaderPixel=this.m_startColEndHeaderPixel-_),-1===n&&(n=this.m_endColEndHeader),!this._isCountUnknown("column")&&this._isHighWatermarkScrolling()&&this.m_endColEndHeader+1>=n?this.m_stopColumnEndHeaderFetch=!0:this.m_stopColumnEndHeaderFetch=p.stopFetch,0===this.m_startColEndHeader&&0!==this.m_startColEndHeaderPixel&&(this._shiftHeadersAlongAxisInContainer(e.firstChild,0,-1*this.m_startColEndHeaderPixel,this.getResources().isRTLMode()?"right":"left",this.getMappedStyle("colendheadercell")),this.m_startColEndHeaderPixel=0),!this.m_initialized&&this.m_startColEndHeader>0){var g=Math.round(this.m_avgColWidth*this.m_startColEndHeader);this._shiftHeadersAlongAxisInContainer(e.firstChild,this.m_startColEndHeader,g-this.m_startColEndHeaderPixel,this.getResources().isRTLMode()?"right":"left",this.getMappedStyle("colendheadercell")),this.m_endColEndHeaderPixel=g+_,this.m_startColEndHeaderPixel=g}}},it.prototype.buildRowHeaders=function(e,t,i,n,o,s){if(null==this.m_rowHeaderLevelCount&&(this.m_rowHeaderLevelCount=t.getLevelCount()),0!==this.m_rowHeaderLevelCount){var r,a=t.getCount(),l=i>this.m_endRowHeader,u=l?this.m_endRowHeaderPixel:this.m_startRowHeaderPixel;o?(r=e.firstChild.childNodes[i-this.m_startRowHeader],u=this.getElementDir(r,"top")):r=null;var d=this.m_endRowHeader,h=this.m_rowHeaderLevelCount,c=this.getMappedStyle("rowheader")+" "+this.getMappedStyle("header"),p=this.getMappedStyle("headercell")+" "+this.getMappedStyle("rowheadercell"),_=this.buildAxisHeaders(e,t,"row",i,a,l,o,r,u,d,h,c,p,s),m=_.totalHeaderDimension,g=_.totalLevelDimension;if(s)return _;if(0===m||0!==this.m_avgRowHeight&&null!=this.m_avgRowHeight||(this.m_avgRowHeight=m/a),this.m_rowHeaderWidth||(this.m_rowHeaderWidth=g,this.setElementWidth(e,this.m_rowHeaderWidth)),l){if(-1!==this.m_endRowHeader&&0!==a){var f=e.firstChild.childNodes[this.m_endRowHeader-this.m_startRowHeader];null!=f&&this.m_utils.removeCSSClassName(f,this.getMappedStyle("borderHorizontalNone"))}this.m_endRowHeader=i+(a-1),this.m_endRowHeaderPixel=this.m_endRowHeaderPixel+m}else o?(i<this.m_startRowHeader&&(this.m_startRowHeader=i,this.m_startRowHeaderPixel=Math.max(0,this.m_startRowHeaderPixel-m)),this.m_endRowHeader=this.m_endRowHeader+a,this.m_endRowHeaderPixel=Math.max(0,this.m_endRowHeaderPixel+m),this.pushRowHeadersDown(r,m)):(this.m_startRowHeader=Math.max(0,this.m_startRowHeader-a),this.m_startRowHeaderPixel=this.m_startRowHeaderPixel-m);if(-1===n&&(n=this.m_endRowHeader),!this._isCountUnknown("row")&&this._isHighWatermarkScrolling()&&this.m_endRowHeader+1>=n?this.m_stopRowHeaderFetch=!0:this.m_stopRowHeaderFetch=_.stopFetch,0===this.m_startRowHeader&&0!==this.m_startRowHeaderPixel&&(this._shiftHeadersAlongAxisInContainer(e.firstChild,0,-1*this.m_startRowHeaderPixel,"top",this.getMappedStyle("rowheadercell")),this.m_startRowHeaderPixel=0),!this.m_initialized&&this.m_startRowHeader>0){var v=Math.round(this.m_avgRowHeight*this.m_startRowHeader);this._shiftHeadersAlongAxisInContainer(e.firstChild,this.m_startRowHeader,v-this.m_startRowHeaderPixel,"top",this.getMappedStyle("rowheadercell")),this.m_endRowHeaderPixel=v+m,this.m_startRowHeaderPixel=v}}},it.prototype.buildRowEndHeaders=function(e,t,i,n,o,s){if(null==this.m_rowEndHeaderLevelCount&&(this.m_rowEndHeaderLevelCount=t.getLevelCount()),0!==this.m_rowEndHeaderLevelCount){var r,a=t.getCount(),l=i>this.m_endRowEndHeader,u=l?this.m_endRowEndHeaderPixel:this.m_startRowEndHeaderPixel;o?(r=e.firstChild.childNodes[i-this.m_startRowEndHeader],u=this.getElementDir(r,"top")):r=null;var d=this.m_endRowEndHeader,h=this.m_rowEndHeaderLevelCount,c=this.getMappedStyle("rowendheader")+" "+this.getMappedStyle("endheader"),p=this.getMappedStyle("endheadercell")+" "+this.getMappedStyle("rowendheadercell"),_=this.buildAxisHeaders(e,t,"rowEnd",i,a,l,o,r,u,d,h,c,p,s);if(s)return _;var m=_.totalHeaderDimension,g=_.totalLevelDimension;if(s)return _;if(0===m||0!==this.m_avgRowHeight&&null!=this.m_avgRowHeight||(this.m_avgRowHeight=m/a),this.m_rowEndHeaderWidth||(this.m_rowEndHeaderWidth=g,this.setElementWidth(e,this.m_rowEndHeaderWidth)),l){if(-1!==this.m_endRowEndHeader&&0!==a){var f=e.firstChild.childNodes[this.m_endRowEndHeader-this.m_startRowEndHeader];null!=f&&this.m_utils.removeCSSClassName(f,this.getMappedStyle("borderHorizontalNone"))}this.m_endRowEndHeader=i+(a-1),this.m_endRowEndHeaderPixel=this.m_endRowEndHeaderPixel+m}else o?(i<this.m_startRowEndHeader&&(this.m_startRowEndHeader=i,this.m_startRowEndHeaderPixel=Math.max(0,this.m_startRowEndHeaderPixel-m)),this.m_endRowEndHeader=this.m_endRowEndHeader+a,this.m_endRowEndHeaderPixel=Math.max(0,this.m_endRowEndHeaderPixel+m),this.pushRowHeadersDown(r,m)):(this.m_startRowEndHeader=Math.max(0,this.m_startRowEndHeader-a),this.m_startRowEndHeaderPixel=this.m_startRowEndHeaderPixel-m);if(-1===n&&(n=this.m_endRowEndHeader),!this._isCountUnknown("row")&&this._isHighWatermarkScrolling()&&this.m_endRowEndHeader+1>=n?this.m_stopRowEndHeaderFetch=!0:this.m_stopRowEndHeaderFetch=_.stopFetch,0===this.m_startRowEndHeader&&0!==this.m_startRowEndHeaderPixel&&(this._shiftHeadersAlongAxisInContainer(e.firstChild,0,-1*this.m_startRowEndHeaderPixel,"top",this.getMappedStyle("rowendheadercell")),this.m_startRowEndHeaderPixel=0),!this.m_initialized&&this.m_startRowEndHeader>0){var v=Math.round(this.m_avgRowHeight*this.m_startRowEndHeader);this._shiftHeadersAlongAxisInContainer(e.firstChild,this.m_startRowEndHeader,v-this.m_startRowEndHeaderPixel,"top",this.getMappedStyle("rowendheadercell")),this.m_endRowEndHeaderPixel=v+m,this.m_startRowEndHeaderPixel=v}}},it.prototype.buildAxisHeaders=function(e,t,i,n,o,s,r,a,l,u,d,h,c,p){var _,m,g=-1!==i.indexOf("column"),f=g?"height":"width",v=!1,y=0,b=0,C=0,S=0;if(!p){if(0===o&&this._isCountUnknown(i))return{totalHeaderDimension:y,totalLevelDimension:b,stopFetch:v=!0};_=e.firstChild,-1===u&&""===e.className&&(e.className=h,e.style[f]="",_.style[f]="")}for(var E=this.m_options.getRenderer(i),T=document.createDocumentFragment(),D=0;o-D>0;){s||r?(m=n+D,C=g?l+y:0,S=g?0:l+y):(m=n+(o-1-D),C=g?l-y:0,S=g?0:l-y);var A=this.buildLevelHeaders(T,m,0,C,S,s,r,E,t,i,c,d);D+=A.count,y+=A.totalHeaderDimension,A.totalLevelDimension>b&&(b=A.totalLevelDimension)}return p?T:(s?_.appendChild(T):r?_.insertBefore(T,a):_.insertBefore(T,_.firstChild),e.hasChildNodes()||r||e.appendChild(_),{totalHeaderDimension:y,totalLevelDimension:b,stopFetch:v})},it.prototype._renderContent=function(e,t,i,n){if(null!=e){var o=e.call(this,t);null!=o&&(null===o.parentNode||o.parentNode instanceof DocumentFragment?(i.appendChild(o),this.m_subtreeAttachedCallback(o)):null!=o.parentNode||o.toString&&i.appendChild(document.createTextNode(o.toString())));var s=this.m_contextCallback(i).getBusyContext(),r=this;s.whenReady().then(function(){r._disableAllFocusableElements(i)})}else null!=n&&"object"==typeof n&&Object.prototype.hasOwnProperty.call(n,"data")&&(n=n.data),null==n&&(n=""),i.appendChild(document.createTextNode(n.toString()))},it.prototype.buildLevelHeaders=function(e,t,i,n,o,s,r,a,l,u,d,h){var c,p,_,m,g,f,v,y,b,C,S,E,T,D,A,I=0,O=0,w=0,R=0;"row"===u?(c="row",p=this.m_rowHeader,_="width",m=this.m_rowHeaderLevelWidths,g="height",f="top",v=o,y=this.getResources().isRTLMode()?"right":"left",b=n,C=this.m_startRowHeader,S=this.m_endRowHeader):"rowEnd"===u?(c="row",p=this.m_rowEndHeader,_="width",m=this.m_rowEndHeaderLevelWidths,g="height",f="top",v=o,y=this.getResources().isRTLMode()?"left":"right",b=n,C=this.m_startRowEndHeader,S=this.m_endRowEndHeader):"column"===u?(c="column",p=this.m_colHeader,_="height",m=this.m_columnHeaderLevelHeights,g="width",f=this.getResources().isRTLMode()?"right":"left",v=n,y="top",b=o,C=this.m_startColHeader,S=this.m_endColHeader):(c="column",p=this.m_colEndHeader,_="height",m=this.m_columnEndHeaderLevelHeights,g="width",f=this.getResources().isRTLMode()?"right":"left",v=n,y="bottom",b=o,C=this.m_startColEndHeader,S=this.m_endColEndHeader);var x=l.getExtent(t,i),L=x.extent,N=x.more.before,P=x.more.after,j=l.getDepth(t,i);if(N&&t===S+1){for(E=this._getHeaderContainer(t-1,i,0,null,p,h),this._setAttribute(E,"extent",this._getAttribute(E,"extent",!0)+L),T=E.firstChild,I=this.getElementDir(T,_),D=0;D<L;)v+=(A="column"===u||"columnEnd"===u?this.buildLevelHeaders(E,t+D,i+j,v,b+I,s,r,a,l,u,d,h):this.buildLevelHeaders(E,t+D,i+j,b+I,v,s,r,a,l,u,d,h)).totalHeaderDimension,w+=A.totalHeaderDimension,R+=A.count,D+=A.count;this.setElementDir(T,this.getElementDir(T,g)+w,g)}else if(P&&t===C-1){for(E=this._getHeaderContainer(t+1,i,0,null,p,h),this._setAttribute(E,"extent",this._getAttribute(E,"extent",!0)+L),this._setAttribute(E,"start",this._getAttribute(E,"start",!0)-L),T=E.firstChild,I=this.getElementDir(T,_),D=0;D<L;)v-=(A="column"===u||"columnEnd"===u?this.buildLevelHeaders(E,t-D,i+j,v,b+I,s,r,a,l,u,d,h):this.buildLevelHeaders(E,t-D,i+j,b+I,v,s,r,a,l,u,d,h)).totalHeaderDimension,w+=A.totalHeaderDimension,R+=A.count,D+=A.count;this.setElementDir(T,this.getElementDir(T,g)+w,g),this.setElementDir(T,v,f)}else{var M=l.getData(t,i),H=l.getMetadata(t,i);T=document.createElement("div");var k=this.createHeaderContext(u,t,M,H,T,i,L,j);T.setAttribute(this.getResources().getMappedAttribute("container"),this.getResources().widgetName),T.setAttribute(this.getResources().getMappedAttribute("busyContext"),""),this._createUniqueId(T),T[this.getResources().getMappedAttribute("context")]=k;var U=this.m_options.getInlineStyle(u,k),B=this.m_options.getStyleClass(u,k);null!=U&&(T.style.cssText=U),T.className=d,T.className+=" "+this.getMappedStyle("depth")+j,null!=B&&(T.className+=" "+B),this.setElementDir(T,b,y),this.setElementDir(T,v,f),I=this._getHeaderLevelDimension(i,T,m,_,j),this.setElementDir(T,I,_);var F=this._getHeaderDimension(T,k.key,c,g);if(this._setAttribute(T,"depth",j),i!==h-1&&((E=document.createElement("div")).className=this.getMappedStyle("groupingcontainer"),E.appendChild(T),this._setAttribute(E,"start",s||r?t:t-L+1),this._setAttribute(E,"extent",L),this._setAttribute(E,"level",i)),i+j===h)this.setElementDir(T,F,g),w+=F,R+=1,O=I,s||r||(v-=F,this.setElementDir(T,v,f));else{for(D=0;D<L;D++){var V=s||r?t+D:t-D;F=(A="column"===u||"columnEnd"===u?this.buildLevelHeaders(E,V,i+j,v,b+I,s,r,a,l,u,d,h):this.buildLevelHeaders(E,V,i+j,b+I,v,s,r,a,l,u,d,h)).totalHeaderDimension,v=s||r?v+F:v-F,w+=F,R+=A.count,D+=A.count-1}O=I+A.totalLevelDimension,s||r||this.setElementDir(T,v,f),this.setElementDir(T,w,g)}if("columnEnd"===u&&this.m_addBorderBottom&&this.m_utils.addCSSClassName(T,this.getMappedStyle("borderHorizontalSmall")),"rowEnd"===u&&this.m_addBorderRight&&this.m_utils.addCSSClassName(T,this.getMappedStyle("borderVerticalSmall")),this._isHeaderResizeEnabled(u,k)&&this._setAttribute(T,"resizable","true"),null!=E?this.m_root.appendChild(E):this.m_root.appendChild(T),this._renderContent(a,k,T,M),"column"===u&&this._isSortEnabled(u,k)){null!=H.sortDirection&&null==this.m_sortInfo&&(this.m_sortInfo={},this.m_sortInfo.key=H.key,this.m_sortInfo.direction=H.sortDirection,this.m_sortInfo.axis=u);var G=this._buildSortIcon(k);T.appendChild(G),this._setAttribute(T,"sortable","true")}s||r?null!=E?e.appendChild(E):e.appendChild(T):null!=E?e.firstChild?this.m_utils.containsCSSClassName(e.firstChild,this.getMappedStyle("groupingcontainer"))?e.insertBefore(E,e.firstChild):(this.m_utils.containsCSSClassName(e.firstChild,this.getMappedStyle("headercell"))||this.m_utils.containsCSSClassName(e.firstChild,this.getMappedStyle("endheadercell")))&&e.insertBefore(E,e.firstChild.nextSibling):e.appendChild(E):this.m_utils.containsCSSClassName(e,this.getMappedStyle("groupingcontainer"))?e.insertBefore(T,e.firstChild.nextSibling):e.insertBefore(T,e.firstChild)}"column"===u||"columnEnd"===u?this._isLastColumn(t+(L-1))&&this.m_utils.addCSSClassName(T,this.getMappedStyle("borderVerticalNone")):this._isLastRow(t+(L-1))&&!r&&this.m_utils.addCSSClassName(T,this.getMappedStyle("borderHorizontalNone"));var $={};return $.totalLevelDimension=O,$.totalHeaderDimension=w,$.count=R,$},it.prototype._getHeaderLevelDimension=function(e,t,i,n,o){for(var s=0,r=0;r<o;r++){var a=i[e+r];if(null==a){s=null;break}s+=a}return null!=s?s:(s=this.getElementDir(t,n),1===o&&(i[e]=s),s)},it.prototype._getHeaderContainer=function(e,t,i,n,o,s){var r;if(null==n?(n=o.firstChild.childNodes,r=0):r=1,i===s-1)return n[0].parentNode;for(;r<n.length;r++){var a=this._getAttribute(n[r],"start",!0),l=this._getAttribute(n[r],"extent",!0),u=this._getAttribute(n[r].firstChild,"depth",!0);if(e>=a&&e<a+l)return t<i+u?n[r]:this._getHeaderContainer(e,t,i+u,n[r].childNodes,o,s)}return null},it.prototype._getHeaderByIndex=function(e,t,i,n,o){var s;if(t<0)return null;if(1===n)return i.firstChild.childNodes[s=e-o];var r=this._getHeaderContainer(e,t,0,null,i,n);return null==r?null:t<=this._getAttribute(r,"level",!0)+this._getAttribute(r.firstChild,"depth",!0)-1?r.firstChild:(s=e-this._getAttribute(r,"start",!0)+1,r.childNodes[s])},it.prototype._getAttribute=function(e,t,i){var n=e.getAttribute(this.getResources().getMappedAttribute(t));return i?parseInt(n,10):n},it.prototype._setAttribute=function(e,t,i){e.setAttribute(this.getResources().getMappedAttribute(t),i)},it.prototype.buildDatabody=function(){var e=document.createElement("div");e.id=this.createSubId("databody"),e.className=this.getMappedStyle("databody"),e.tabIndex="-1",this.m_databody=e,e.addEventListener?e.addEventListener("scroll",this.handleScroll.bind(this),!1):e.attachEvent("onscroll",this.handleScroll.bind(this));var t=document.createElement("div");if(t.className=this.getMappedStyle("scroller")+(this.m_utils.isTouchDevice()?" "+this.getMappedStyle("scroller-mobile"):""),e.appendChild(t),this._isHighWatermarkScrolling()){this.fetchCells(e,0,0)}else{var i=this,n=this.m_options.getScrollPosition();this._getIndexesFromScrollPosition(n).then(function(t){var n=t.row,o=t.column;i.m_startRow=n,i.m_startCol=o,i.m_fetching.cells=!1,i.fetchCells(e,n,o)}),this.m_fetching.cells=!0}return e},it.prototype._getIndexesFromScrollPosition=function(e){var t=this,i=e.rowKey,n=e.columnKey;return new Promise(function(e){null!=i||null!=n?t._indexes({row:i,column:n},function(t){e({rowIndexFromKey:t.row,columnIndexFromKey:t.column})}):e({rowIndexFromKey:null,columnIndexFromKey:null})}).then(function(i){var n={};return null!=i.rowIndexFromKey&&i.rowIndexFromKey>0?n.row=i.rowIndexFromKey:e.rowIndex?n.row=e.rowIndex:e.y?n.row=Math.round(e.y/t.getDefaultRowHeight()):n.row=0,null!=i.columnIndexFromKey&&i.columnIndexFromKey>0?n.column=i.columnIndexFromKey:e.columnIndex?n.column=e.columnIndex:e.x?n.column=Math.round(e.x/t.getDefaultColumnWidth()):n.column=0,n})},it.prototype.getFetchCount=function(e,t){var i=this.getFetchSize(e);if(this._isHighWatermarkScrolling()){var n="row"===e?"maxRowCount":"maxColumnCount",o=this.m_options.getScrollPolicyOptions();o&&null!=o[n]&&o[n]>0&&(i=Math.max(Math.min(i,o[n]-t),0))}return i},it.prototype.fetchCells=function(e,t,i,n,o,s){var r;if(!this.m_fetching.cells){null==n&&(n=this.getFetchCount("row",t)),null==o&&(o=this.getFetchCount("column",i));var a={axis:"row",start:t,count:n},l={axis:"column",start:i,count:o,databody:e};this.m_fetching.cells={rowRange:a,columnRange:l},r=null!=s&&null!=s.success?s.success:this.handleCellsFetchSuccess,this.showStatusText(),this._signalTaskStart(),this.getDataSource().fetchCells([a,l],{success:r,error:this.handleCellsFetchError},{success:this,error:this})}},it.prototype.isCellFetchResponseValid=function(e){if(null==this.m_fetching)return!1;var t=e[0],i=e[1],n=this.m_fetching.cells;return t===n.rowRange&&i===n.columnRange},it.prototype.isLongScroll=function(){return this.m_isLongScroll},it.prototype.isCellFetchResponseInViewport=function(e,t){if(isNaN(this.m_avgRowHeight)||isNaN(this.m_avgColWidth)||null!=this.m_empty||!this.m_initialized)return!0;var i=t[0].start,n=t[1].start,o=this._getLongScrollStart(this.m_currentScrollTop,this.m_prevScrollTop,"row"),s=this._getLongScrollStart(this.m_currentScrollLeft,this.m_prevScrollLeft,"column");return o.start===i&&s.start===n},it.prototype.handleCellsFetchSuccess=function(e,t,i){var n=this.m_options.getScrollPolicyOptions(),o=n?n.maxRowCount:null,s=n?n.maxColumnCount:null,r=this.getDataSource().getCount("row"),a=this.getDataSource().getCount("column");if(void 0===i){if(i=!1,!this.isCellFetchResponseValid(t))return void this._signalTaskEnd();if(this.isLongScroll()&&(!this.isCellFetchResponseInViewport(e,t)||this.m_headerInvalid))return this.m_fetching.cells=!1,this.m_headerInvalid=!1,this.handleLongScroll(this.m_currentScrollLeft,this.m_currentScrollTop),void this._signalTaskEnd();this.m_isLongScroll=!1}var l=t[0],u=l.start,d=e.getCount("row"),h=d>0&&(u>this.m_endRow||u+d<=this.m_startRow);(0===d&&this._isCountUnknown("row")&&l.count>0||h&&this._isHighWatermarkScrolling()&&!this._isCountUnknown("row")&&this.m_endRow+d+1>=r||d<l.count||this._isHighWatermarkScrolling()&&o&&o>0&&u+d===o)&&(this.m_stopRowFetch=!0);var c=t[1],p=c.start,_=e.getCount("column"),m=_>0&&(p>this.m_endCol||p+_===this.m_startCol);(0===_&&this._isCountUnknown("column")&&c.count>0||m&&this._isHighWatermarkScrolling()&&!this._isCountUnknown("column")&&this.m_endCol+_+1>=a||_<c.count||this._isHighWatermarkScrolling()&&s&&s>0&&p+_===s)&&(this.m_stopColumnFetch=!0);var g=this.m_databody;null==g&&(g=c.databody);var f,v,y,b,C,S,E,T,D,A,I=g.firstChild;if(h||i){if(f=!(i||!(u>=this.m_startRow)))v=this.m_endRowPixel;else if(i){var O=this._getCellByIndex({row:u+d,column:this.m_startCol});v=this.getElementDir(O,"top")}else v=this.m_startRowPixel;y=p>=this.m_startCol?this.m_startColPixel:this.m_endColPixel,b=document.createDocumentFragment(),S=(C=this._addCellsToFragment(b,e,u,v,p,y)).totalColumnWidth,E=C.totalRowHeight,T=C.avgWidth,D=E/d,this._populateDatabody(I,b),f?(-1!==this.m_endRow&&0!==d&&this._highlightCellsAlongAxis(this.m_endRow,"row","index","remove",["borderHorizontalNone"]),this.m_endRow=u+(d-1),this.m_endRowPixel=this.m_endRowPixel+E):i?(u<this.m_startRow&&(this.m_startRow=u,this.m_startRowPixel=Math.max(0,this.m_startRowPixel-E)),this.m_endRow=this.m_endRow+d,this.m_endRowPixel=this.m_endRowPixel+E,this.pushRowsDown(u+d,E)):(this.m_startRow=this.m_startRow-d,this.m_startRowPixel=this.m_startRowPixel-E)}else m&&(y=(f=p>=this.m_startCol)?this.m_endColPixel:this.m_startColPixel,v=u>=this.m_startRow?this.m_startRowPixel:this.m_endRowPixel,b=document.createDocumentFragment(),C=this._addCellsToFragment(b,e,u,v,p,y),this._populateDatabody(I,b),S=C.totalColumnWidth);if(null==T||0!==this.m_avgColWidth&&null!=this.m_avgColWidth||(this.m_avgColWidth=T),null==D||0!==this.m_avgRowHeight&&null!=this.m_avgRowHeight||(this.m_avgRowHeight=D),m&&(p<this.m_startCol?(this.m_startCol=this.m_startCol-_,this.m_startColPixel=this.m_startColPixel-S):(this.m_endCol=p+(_-1),this.m_endColPixel=this.m_endColPixel+S)),this._sizeDatabodyScroller(),this.m_endCol>=0&&this.m_endRow>=0?this.m_hasCells=!0:(this.m_startCol=0,this.m_startRow=0),0===this.m_startCol&&0!==this.m_startColPixel&&(this._shiftCellsAlongAxis("column",-this.m_startColPixel,0,!0),this.m_endColPixel+=this.m_startColPixel,this.m_startColPixel=0),0===this.m_startRow&&0!==this.m_startRowPixel&&(this._shiftCellsAlongAxis("row",-this.m_startRowPixel,0,!0),this.m_endRowPixel+=this.m_startRowPixel,this.m_startRowPixel=0),!this.m_initialized&&this.m_startCol>0&&(A=Math.round(this.m_avgColWidth*this.m_startCol),this._shiftCellsAlongAxis("column",A-this.m_startColPixel,this.m_startCol,!0),this.m_endColPixel=A+S,this.m_startColPixel=A),!this.m_initialized&&this.m_startRow>0&&(A=Math.round(this.m_avgRowHeight*this.m_startRow),this._shiftCellsAlongAxis("row",A-this.m_startRowPixel,this.m_startRow,!0),this.m_endRowPixel=A+E,this.m_startRowPixel=A),this.m_fetching.cells=!1,this.isFetchComplete())if(this.hideStatusText(),this._syncScroller(),this.m_initialized?this._checkScroll&&this._checkScrollPosition():this._updateScrollPosition(this.m_options.getScrollPosition()),null!=this.m_scrollIndexAfterFetch?this.scrollToIndex(this.m_scrollIndexAfterFetch):null!=this.m_scrollHeaderAfterFetch?this.scrollToHeader(this.m_scrollHeaderAfterFetch):this.isActionableMode()||null==this._getActiveElement()||this.m_utils.containsCSSClassName(this._getActiveElement(),this.getMappedStyle("focus"))||(!0!==this.m_shouldFocus&&(this.m_shouldFocus=!1),this._highlightActive(),this._manageMoveCursor()),this._isSelectionEnabled()&&this.applySelection(u,u+d,p,p+_),this.populateAccInfo(),this.m_utils.isTouchDevice()&&Object.prototype.hasOwnProperty.call(window,"WebKitCSSMatrix")&&(g.style.webkitTransform="translate3d(0, 0, 0)",null!=this.m_rowHeader&&(this.m_rowHeader.style.webkitTransform="translate3d(0, 0, 0)"),null!=this.m_colHeader&&(this.m_colHeader.style.webkitTransform="translate3d(0, 0, 0)"),null!=this.m_rowEndHeader&&(this.m_rowEndHeader.style.webkitTransform="translate3d(0, 0, 0)"),null!=this.m_colEndHeader&&(this.m_colEndHeader.style.webkitTransform="translate3d(0, 0, 0)")),this._shouldInitialize())this._handleInitialization(!0);else if(this.m_initialized){var w;(!0===this.m_resizeRequired||this.m_endRowPixel-E<this.getElementHeight(g))&&this.resizeGrid(),h?f?w="top":i||(w="bottom"):m&&(w=p===this.m_startCol?"right":"left"),this._cleanupViewport(w),this.fillViewport(),this.isFetchComplete()&&this.fireEvent("ready",{})}this._isSelectionEnabled()&&this.isMultipleSelection()&&this.updateSelectionHeader(),this._signalTaskEnd()},it.prototype._setZIndexBefore=function(e,t,i,n){if("row"===e)for(var o=this.m_startRow,s=this.m_currentScrollTop,r=this.m_rowHeader,a=this.m_rowHeaderLevelCount,l=this.m_startRowHeader,u=this.m_rowEndHeader,d=this.m_rowEndHeaderLevelCount,h=this.m_startRowEndHeader,c=t;c>=o;c--){var p,_=this._getAxisCellsByIndex(c,e);if(this.getElementDir(_[0],"top")<s)break;for(var m=0;m<_.length;m++)this.changeStyleProperty(_[m],this.getCssSupport("z-index"),10);i&&(p=this._getHeaderByIndex(c,0,r,a,l),this.changeStyleProperty(p,this.getCssSupport("z-index"),10)),n&&(p=this._getHeaderByIndex(c,0,u,d,h),this.changeStyleProperty(p,this.getCssSupport("z-index"),10))}},it.prototype._onTransitionEnd=function(e,t,i){var n,o="transitionend";function s(){n&&(clearTimeout(n),n=void 0),e.removeEventListener(o,s),t()}e.addEventListener(o,s),n=setTimeout(s,i+100)},it.prototype._insertRowsWithAnimation=function(e,t,i,n,o,s){var r,a,l,u,d,h,c,p,_,m,g=this,f=0,v=0,y=0;g._signalTaskStart();var b=n>this.m_endRow,C=this.m_databody.firstChild,S=null!=t,E=null!=i;for(n>0&&(y=n-1,m=this._getAxisCellsByIndex(n-1,"row"),f=(v=this.getElementDir(m[0],"top"))+this.getElementHeight(m[0])),this._setZIndexBefore("row",y,S,E),S&&(l=(a=this.m_rowHeader.firstChild).childNodes[n-this.m_startRow-1]),E&&(d=(u=this.m_rowEndHeader.firstChild).childNodes[n-this.m_startRow-1]),r=0;r<e.childNodes.length;r++){var T=e.childNodes[r];p=v-(c=f+this.getElementDir(T,"top"))-this.getElementHeight(T),this.setElementDir(T,c,"top"),this.addTransformMoveStyle(T,0,0,"linear",0,p,0)}if(S)for(r=0;r<t.childNodes.length;r++)h=t.childNodes[r],p=v-(c=f+this.getElementDir(h,"top"))-this.getElementHeight(h),this.setElementDir(h,c,"top"),this.addTransformMoveStyle(h,0,0,"linear",0,p,0);if(E)for(r=0;r<i.childNodes.length;r++)_=i.childNodes[r],p=v-(c=f+this.getElementDir(_,"top"))-this.getElementHeight(_),this.setElementDir(_,c,"top"),this.addTransformMoveStyle(_,0,0,"linear",0,p,0);for(r=n-this.m_startRow;r<=this.m_endRow;r++){var D=this._getAxisCellsByIndex(r,"row");c=s+this.getElementDir(D[0],"top"),p=-s;for(var A=0;A<D.length;A++)this.setElementDir(D[A],c,"top"),this.addTransformMoveStyle(D[A],0,0,"linear",0,p,0);S&&(h=a.childNodes[r],this.setElementDir(h,c,"top"),this.addTransformMoveStyle(h,0,0,"linear",0,p,0)),E&&(_=u.childNodes[r],this.setElementDir(_,c,"top"),this.addTransformMoveStyle(_,0,0,"linear",0,p,0))}this._modifyAxisCellContextIndex("row",n,this.m_endRow-n+1,o),this.m_endRow+=o,this.m_endRowPixel+=s,S&&(this.m_endRowHeader+=t.childNodes.length,this.m_endRowHeaderPixel+=s),E&&(this.m_endRowEndHeader+=i.childNodes.length,this.m_endRowEndHeaderPixel+=s),C.appendChild(e),b?(S&&a.appendChild(t),E&&u.appendChild(i)):(S&&a.insertBefore(t,l.nextSibling),E&&u.insertBefore(i,d.nextSibling)),this.setElementHeight(C,this.m_endRowPixel-this.m_startRowPixel),this.resizeGrid(),this.updateRowBanding(),this._refreshDatabodyMap();var I=this._getCellByIndex(this.createIndex(n+(o-1),this.m_endCol));this.m_animating=!0;var O=g.m_processingEventQueue?1:it.EXPAND_ANIMATION_DURATION;this._onTransitionEnd(I,function(){g.m_stopRowFetch=!1,-1!==g.m_endRowHeader&&(g.m_stopRowHeaderFetch=!1),-1!==g.m_endRowEndHeader&&(g.m_stopRowEndHeaderFetch=!1),g._handleAnimationEnd()},O),setTimeout(function(){for(var e=it.EXPAND_ANIMATION_DURATION,t=n;t<=g.m_endRow;t++){for(var i=g._getAxisCellsByIndex(t,"row"),o=0;o<i.length;o++)g.addTransformMoveStyle(i[o],e+"ms",0,"ease-out",0,0,0);S&&g.addTransformMoveStyle(a.childNodes[t],e+"ms",0,"ease-out",0,0,0),E&&g.addTransformMoveStyle(u.childNodes[t],e+"ms",0,"ease-out",0,0,0)}},0)},it.prototype._addCellsToFragment=function(e,t,i,n,o,s){for(var r=this.getResources().isRTLMode()?"right":"left",a=this.m_options.getRenderer("cell"),l=this.m_options.getColumnBandingInterval(),u=this.m_options.getRowBandingInterval(),d=this.m_options.getHorizontalGridlines(),h=this.m_options.getVerticalGridlines(),c=t.getCount("row"),p=t.getCount("column"),_=i>=this.m_startRow,m=o>=this.m_startCol,g=0,f=n,v=[],y=[],b=0;b<c;b+=1){for(var C,S,E,T,D=s,A=_?i+b:i+(c-1-b),I=Math.floor(A/u)%2==1,O=0;O<p;O+=S.column){var w=0;C=0;var R,x=m?o+O:o+(p-1-O);S={row:(R=t.getExtent?t.getExtent(this.createIndex(A,x)):{row:{extent:1,more:{before:!1,after:!1}},column:{extent:1,more:{before:!1,after:!1}}}).row.extent,column:R.column.extent},m||(x=x-S.column+1);var L=_?A:A-S.row+1,N=this.createIndex(L,x);if(v[b]&&v[b][O])w=v[b][O].width,D=m?D+w:D-w;else{var P=this._patchExistingCells(R,x,L,v);if(P)w=P.width,T=(E=P.cell)[this.getResources().getMappedAttribute("context")];else{var j=t.getData(N),M=t.getMetadata(N);E=document.createElement("div"),T=this.createCellContext(N,j,M,E,S),E.setAttribute(this.getResources().getMappedAttribute("container"),this.getResources().widgetName),E.setAttribute(this.getResources().getMappedAttribute("busyContext"),""),this._createUniqueId(E),E[this.getResources().getMappedAttribute("context")]=T;var H=this.m_options.getInlineStyle("cell",T);null!=H&&(E.style.cssText=H),""!==E.style.height&&(E.style.height=""),""!==E.style.width&&(E.style.width=""),this.m_utils.addCSSClassName(E,this.getMappedStyle("cell")),this.m_utils.addCSSClassName(E,this.getMappedStyle("formcontrol")),(I||Math.floor(x/l)%2==1)&&this.m_utils.addCSSClassName(E,this.getMappedStyle("banded"));var k,U=this.m_options.getStyleClass("cell",T);for(null!=U&&this.m_utils.addCSSClassName(E,U),k=0;k<S.row;k++){var B=0===k?T.keys.row:this._getKey(this._getHeaderByIndex(L+k,0,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader),"row");y[b+k]=this._getCellDimension(E,L+k,B,"row","height"),C+=y[b+k]}for(this.setElementHeight(E,C),k=0;k<S.column;k++){var F=0===k?T.keys.column:this._getKey(this._getHeaderByIndex(x+k,0,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader),"column");w+=this._getCellDimension(E,x,F,"column","width")}this.setElementWidth(E,w),("hidden"===h||this._isLastColumn(x+(S.column-1))&&(this.getRowHeaderWidth()+D+w>=this.getWidth()||-1!==this.m_endRowEndHeader))&&this.m_utils.addCSSClassName(E,this.getMappedStyle("borderVerticalNone")),"hidden"===d?this.m_utils.addCSSClassName(E,this.getMappedStyle("borderHorizontalNone")):this._isLastRow(L+(S.row-1))&&(this.getRowBottom(E,f+C)>=this.getHeight()||-1!==this.m_endColEndHeader)&&this.m_utils.addCSSClassName(E,this.getMappedStyle("borderHorizontalNone")),_?this.setElementDir(E,f,"top"):this.setElementDir(E,f-C,"top"),m?this.setElementDir(E,D,r):this.setElementDir(E,D-w,r),this.m_root.appendChild(E),this._renderContent(a,T,E,j),e.appendChild(E)}this._updateTempArray(v,{width:w},b,O,S.row,S.column),D=m?D+w:D-w,0===b&&(g+=w)}}C=y[b],f=_?f+C:f-C,C}return{avgWidth:g/p,totalRowHeight:y.reduce(function(e,t){return e+t},0),totalColumnWidth:g}},it.prototype._updateCellDimension=function(e,t,i,n,o,s,r,a){var l,u,d,h,c,p=0,_="width"===r?"height":"width",m=this._getCellByIndex(this.createIndex(n,i)),g=this.getElementDir(m,r),f=m[this.getResources().getMappedAttribute("context")];f.extents[s]+=e,"row"===s?(l=n,u=this.m_rowHeader,d=this.m_rowHeaderLevelCount,h=this.m_startRowHeader):(l=i,u=this.m_colHeader,d=this.m_columnHeaderLevelCount,h=this.m_startColHeader);for(var v=1;v<=e;v++){var y=this._getKey(this._getHeaderByIndex(a?l-v:l+v,0,u,d,h),s);p+=this._getCellDimension(m,a?l-v:l+v,y,s,r);for(var b=0;b<t;b++){var C,S;"row"===s?(C=a?n-v:n+v,S=i+b):(C=n+b,S=a?i-v:i+v),this._addIndexToDatabodyMap(this.createIndex(C,S),m.id)}}a&&(c="width"===r?this.getResources().isRTLMode()?"right":"left":"top",this.setElementDir(m,this.getElementDir(m,c)-p,c),f.indexes[s]-=e);this.setElementDir(m,g+p,r);var E={};return E[r]=p,E[_]=this.getElementDir(m,_),E.cell=m,E},it.prototype._patchExistingCells=function(e,t,i,n){var o=e.column.extent,s=e.row.extent,r=e.row.more.before,a=e.row.more.after,l=e.column.more.before,u=e.column.more.after;return t-1===this.m_endCol&&l?this._updateCellDimension(o,s,this.m_endCol,i,n,"column","width",!1):i-1===this.m_endRow&&r?this._updateCellDimension(s,o,t,this.m_endRow,n,"row","height",!1):t+o===this.m_startCol&&u?this._updateCellDimension(o,s,this.m_startCol,i,n,"column","width",!0):!(i+s!==this.m_startRow||!a)&&this._updateCellDimension(s,o,t,this.m_startRow,n,"row","height",!0)},it.prototype._updateTempArray=function(e,t,i,n,o,s){for(var r=0;r<o;r++){null==e[i+r]&&(e[i+r]=[]);for(var a=0;a<s;a++)e[i+r][n+a]=t}},it.prototype._getCellDimension=function(e,t,i,n,o){var s,r,a;if("row"===n?(s=this.getMappedStyle("rowheadercell")+" "+this.getMappedStyle("headercell"),r=this.m_endRowHeader):"column"===n&&(s=this.getMappedStyle("colheadercell")+" "+this.getMappedStyle("headercell"),r=this.m_endColHeader),-1===r){var l=this.createHeaderContext(n,t,null,{key:i},null,0,0,1),u=this.m_options.getInlineStyle(n,l),d=this.m_options.getStyleClass(n,l);(a=document.createElement("div")).style.cssText=u,a.className=s+" "+d}else a=e;return this._getHeaderDimension(a,i,n,o)},it.prototype.pushRowsDown=function(e,t){for(;e<=this.m_endRow;){var i=this._getAxisCellsByIndex(e,"row");if(i.length>0)for(var n=0;n<i.length;n++){var o=i[n],s=this.getElementDir(o,"top")+t;o.style.top=s+"px"}e+=1}},it.prototype.pushRowsUp=function(e,t){this.pushRowsDown(e,-t)},it.prototype.pushRowHeadersDown=function(e,t){for(;e;){var i=this.getElementDir(e,"top")+t;e.style.top=i+"px",e=e.nextSibling}},it.prototype.pushRowHeadersUp=function(e,t){this.pushRowHeadersDown(e,-t)},it.prototype.createCellContext=function(e,t,i,n,o){var s={};s.parentElement=n,s.indexes=e,s.cell=t,s.data=null!=t&&"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"data")?t.data:t,s.component=this,s.datasource=this.getDataSource(),s.mode="navigation",s.extents=o;for(var r=Object.keys(i),a=0;a<r.length;a++){var l=r[a];s[l]=i[l]}return null!=this.m_createContextCallback&&this.m_createContextCallback.call(this,s),this.m_fixContextCallback.call(this,s)},it.prototype._createUniqueId=function(e){return this._uniqueIdCallback(e,!1)},it.prototype.getRowHeaderWidth=function(){return-1===this.m_endRowHeader?0:this.m_rowHeaderWidth},it.prototype.getColumnHeaderHeight=function(){return-1===this.m_endColHeader?0:this.m_colHeaderHeight},it.prototype.getRowEndHeaderWidth=function(){return-1===this.m_endRowEndHeader?0:this.m_rowEndHeaderWidth},it.prototype.getColumnEndHeaderHeight=function(){return-1===this.m_endColEndHeader?0:this.m_colEndHeaderHeight},it.prototype.getRowBottom=function(e,t){var i=this.getColumnHeaderHeight();if(null!=t)return i+t;var n=this.getElementDir(e,"top"),o=this.calculateRowHeight(e);return isNaN(n)||isNaN(o)?i:i+n+o},it.prototype.handleCellsFetchError=function(e,t){if(this.m_fetching.cells=!1,this.hideStatusText(),null==this.m_databody.firstChild)this._shouldInitialize()&&this._handleInitialization(!0);else{var i=t[0],n=t[1];n.start+(n.count-1)>this.m_endCol&&(this.m_stopColumnFetch=!0,this.m_stopColumnHeaderFetch=!0,this.m_stopColumnEndHeaderFetch=!0),i.start+(i.count-1)>this.m_endRow&&(this.m_stopRowFetch=!0,this.m_stopRowHeaderFetch=!0,this.m_stopRowEndHeaderFetch=!0)}},it.prototype.showStatusText=function(){var e=this;"block"===this.m_status.style.display||this.m_showStatusTimeout||(this.m_showStatusTimeout=setTimeout(function(){var t=e.getResources().getTranslatedText("msgFetchingData");e.m_status.setAttribute("aria-label",t),e.m_status.style.display="block";var i=e.getWidth()/2-e.m_status.offsetWidth/2,n=e.getHeight()/2-e.m_status.offsetHeight/2;e.m_status.style.left=i+"px",e.m_status.style.top=n+"px",e.m_showStatusTimeout=null},this.getShowStatusDelay()))},it.prototype.getShowStatusDelay=function(){var e=parseInt(this.getResources().getDefaultOption("showIndicatorDelay"),10);return isNaN(e)?0:e},it.prototype.hideStatusText=function(){this.m_showStatusTimeout&&(clearTimeout(this.m_showStatusTimeout),this.m_showStatusTimeout=null),this.m_status.style.display="none"},it.prototype.getFocusableElementsInNode=function(e,t){var i,n,o=[],s=this.getResources().getMappedAttribute("tabMod");if(document.evaluate)for(n=(i=document.evaluate(".//*[@tabindex>=0]|.//*[@"+s+">=0]|.//input|.//select|.//textarea|.//button|.//a|.//INPUT|.//SELECT|.//TEXTAREA|.//BUTTON|.//A",e,null,XPathResult.ANY_TYPE,null)).iterateNext();n;)!n.disabled&&"none"!==n.style.display&&(t||!n.tabIndex||n.tabIndex>0||parseInt(n.getAttribute(s),10)>=0)&&o.push(n),n=i.iterateNext();else for(var r=(i=e.querySelectorAll("input, select, button, a, textarea, [tabIndex]:not([tabIndex='-1']), ["+s+"]:not(["+s+"='-1'])")).length,a=0;a<r;a+=1)!(n=i[a]).disabled&&"none"!==n.style.display&&(t||!n.tabIndex||n.tabIndex>=0||parseInt(n.getAttribute(s),10)>=0)&&o.push(n);return o},it.prototype._disableAllFocusableElements=function(e){for(var t=this.getResources().getMappedAttribute("tabMod"),i=this.getFocusableElementsInNode(e),n=0;n<i.length;n++){var o=parseInt(i[n].tabIndex,10);(isNaN(o)||o>=0)&&(i[n].setAttribute(t,isNaN(o)?-1:o),i[n].setAttribute("tabIndex",-1))}},it.prototype._enableAllFocusableElements=function(e){for(var t=this.getResources().getMappedAttribute("tabMod"),i=this.getFocusableElementsInNode(e,!1),n=0;n<i.length;n++){var o=parseInt(i[n].getAttribute(t),10);i[n].removeAttribute(t),-1===o?i[n].removeAttribute("tabIndex"):i[n].setAttribute("tabIndex",o)}},it.prototype._isFocusableElement=function(e){var t=e.tagName;return"INPUT"===t||"TEXTAREA"===t||"SELECT"===t||"BUTTON"===t||"A"===t||null!=e.getAttribute("tabIndex")&&parseInt(e.getAttribute("tabIndex"),10)>=0&&this.findCell(e)!==e},it.prototype._isFocusableElementBeforeCell=function(e){if(null==e||e===this.getRootElement()||this.m_utils.containsCSSClassName(e,this.getMappedStyle("cell")))return!1;var t=e.tagName;return!!("INPUT"===t||"TEXTAREA"===t||"SELECT"===t||"BUTTON"===t||"A"===t||this.m_utils.containsCSSClassName(e,this.getMappedStyle("active"))||null!=e.getAttribute("tabIndex")&&parseInt(e.getAttribute("tabIndex"),10)>=0&&this.findCell(e)!==e)||this._isFocusableElementBeforeCell(e.parentNode)},it.prototype._setFocusToFirstFocusableElement=function(e){var t=this.getFocusableElementsInNode(e,!0);if(t.length>0){var i=t[0];if(i.focus(),i.setSelectionRange&&i.value)try{i.setSelectionRange(i.value.length,i.value.length)}catch(e){}return!0===this._overwriteFlag&&"function"==typeof t[0].select&&i.select(),!0}return!1},it.prototype.handleScroll=function(e){if(this.m_handleScrollOverflow||(this.m_hasVerticalScroller||this.m_hasHorizontalScroller||(this.m_databody.style.overflow="hidden"),this.m_handleScrollOverflow=!0),this.m_animating)e.preventDefault();else if(!this.m_utils.isTouchDevice())if(!0!==this.m_silentScroll){var t;e||(e=window.event),t=e.target?e.target:e.srcElement;var i=this.m_utils.getElementScrollLeft(t),n=t.scrollTop;this.scrollTo(i,n)}else this.m_silentScroll=!1},it.prototype._getMaxScrollWidth=function(){return this._isCountUnknownOrHighwatermark("column")&&!this.m_stopColumnFetch?Number.MAX_VALUE:this.m_scrollWidth},it.prototype._getMaxScrollHeight=function(){return this._isCountUnknownOrHighwatermark("row")&&!this.m_stopRowFetch?Number.MAX_VALUE:this.m_scrollHeight},it.prototype.scroll=function(e){if(null!=e.position){var t={};t.x=Math.max(0,Math.min(this.m_scrollWidth,e.position.scrollX)),t.y=Math.max(0,Math.min(this.m_scrollHeight,e.position.scrollY)),this._scrollToScrollPositionObject(t)}},it.prototype.scrollDelta=function(e,t){this._adjustScrollerSize();var i=Math.max(0,Math.min(this._getMaxScrollWidth(),this.m_currentScrollLeft-e)),n=Math.max(0,Math.min(this._getMaxScrollHeight(),this.m_currentScrollTop-t));this._initiateScroll(i,n)},it.prototype.adjustTouchScroll=function(e,t){return this.m_utils.isTouchDevice()&&0!==e&&0!==t&&(Math.abs(e)>Math.abs(t)?(t=0,this.m_extraScrollOverY=null):(e=0,this.m_extraScrollOverX=null)),[e,t]},it.prototype._initiateScroll=function(e,t){this.m_utils.isTouchDevice()?this.scrollTo(e,t):(this.m_utils.setElementScrollLeft(this.m_databody,e),this.m_databody.scrollTop=t)},it.prototype._disableTouchScrollAnimation=function(){this.m_databody.firstChild.style.webkitTransitionDuration="0ms",this.m_rowHeader.firstChild.style.webkitTransitionDuration="0ms",this.m_colHeader.firstChild.style.webkitTransitionDuration="0ms",this.m_rowEndHeader.firstChild.style.webkitTransitionDuration="0ms",this.m_colEndHeader.firstChild.style.webkitTransitionDuration="0ms"},it.prototype._shouldLongScroll=function(e,t){return!this._isHighWatermarkScrolling()&&(e+this.getViewportWidth()<this._getMaxLeftPixel()||t+this.getViewportHeight()<this._getMaxTopPixel()||e>this._getMaxRightPixel()||t>this._getMaxBottomPixel())},it.prototype.scrollTo=function(e,t){if(e!==this.m_currentScrollLeft&&(this.m_prevScrollLeft=this.m_currentScrollLeft,this.m_currentScrollLeft=e),t!==this.m_currentScrollTop&&(this.m_prevScrollTop=this.m_currentScrollTop,this.m_currentScrollTop=t),this._checkScroll=!1,this.m_utils.isTouchDevice()||(this._shouldLongScroll(e,t)?this.handleLongScroll(e,t):this.fillViewport()),this._checkScroll=!0,this._syncScroller(),this._adjustScrollerSize(),null!=this.m_cellToFocus){var i=this.m_cellToFocus;this.m_cellToFocus=null,this._setActive(i,this._createActiveObject(i),null,!1,!1,!0)}null!=this.m_scrollIndexAfterFetch&&this._isInViewport(this.m_scrollIndexAfterFetch)===it.INSIDE&&(this._isDatabodyCellActive()&&this.m_scrollIndexAfterFetch.row===this.m_active.indexes.row&&this.m_scrollIndexAfterFetch.column===this.m_active.indexes.column&&this._highlightActive(),this.m_scrollIndexAfterFetch=null),null!=this.m_scrollHeaderAfterFetch&&(this._isDatabodyCellActive()||this.m_scrollHeaderAfterFetch.axis!==this.m_active.axis||this.m_scrollHeaderAfterFetch.index!==this.m_active.index||this.m_scrollHeaderAfterFetch.level!==this.m_active.level||this._highlightActive(),this.m_scrollHeaderAfterFetch=null),this.m_utils.isTouchDevice()||this.m_prevScrollTop===t&&this.m_prevScrollLeft===e||this.fireEvent("scroll",{event:null,ui:{scrollX:e,scrollY:t}}),this.isFetchComplete()&&this._checkScrollPosition()},it.prototype._scrollTransitionEnd=function(){null!=this.m_scrollTransitionEnd&&this.m_databody.firstChild.removeEventListener("webkitTransitionEnd",this.m_scrollTransitionEnd),this._isSelectionEnabled()&&this._scrollTouchSelectionAffordance(),this.fireEvent("scroll",{event:null,ui:{scrollX:this.m_currentScrollLeft,scrollY:this.m_currentScrollTop}}),this._shouldLongScroll(this.m_currentScrollLeft,this.m_currentScrollTop)?this.handleLongScroll(this.m_currentScrollLeft,this.m_currentScrollTop):this.fillViewport()},it.prototype._bounceBack=function(){var e=this.m_currentScrollLeft,t=this.m_currentScrollTop,i=this.m_databody.firstChild,n=this.m_colHeader.firstChild,o=this.m_rowHeader.firstChild,s=this.m_colEndHeader.firstChild,r=this.m_rowEndHeader.firstChild;i.removeEventListener("webkitTransitionEnd",this.m_bounceBack),i.style.webkitTransitionDuration=it.BOUNCE_ANIMATION_DURATION+"ms",o.style.webkitTransitionDuration=it.BOUNCE_ANIMATION_DURATION+"ms",r.style.webkitTransitionDuration=it.BOUNCE_ANIMATION_DURATION+"ms",n.style.webkitTransitionDuration=it.BOUNCE_ANIMATION_DURATION+"ms",s.style.webkitTransitionDuration=it.BOUNCE_ANIMATION_DURATION+"ms",null==this.m_scrollTransitionEnd&&(this.m_scrollTransitionEnd=this._scrollTransitionEnd.bind(this)),i.addEventListener("webkitTransitionEnd",this.m_scrollTransitionEnd),this.getResources().isRTLMode()?(i.style.webkitTransform="translate3d("+e+"px, "+-t+"px, 0)",n.style.webkitTransform="translate3d("+e+"px, 0, 0)",s.style.webkitTransform="translate3d("+e+"px, 0, 0)"):(i.style.webkitTransform="translate3d("+-e+"px, "+-t+"px, 0)",n.style.webkitTransform="translate3d("+-e+"px, 0, 0)",s.style.webkitTransform="translate3d("+-e+"px, 0, 0)"),o.style.webkitTransform="translate3d(0, "+-t+"px, 0)",r.style.webkitTransform="translate3d(0, "+-t+"px, 0)",this.m_extraScrollOverX=null,this.m_extraScrollOverY=null},it.prototype._syncScroller=function(){var e=this.m_currentScrollLeft,t=this.m_currentScrollTop,i=this.m_databody.firstChild,n=this.m_colHeader.firstChild,o=this.m_rowHeader.firstChild,s=this.m_colEndHeader.firstChild,r=this.m_rowEndHeader.firstChild;if(this.m_utils.isTouchDevice()&&Object.prototype.hasOwnProperty.call(window,"WebKitCSSMatrix"))null!=this.m_extraScrollOverX||null!=this.m_extraScrollOverY?(null!=this.m_extraScrollOverX?e+=this.m_extraScrollOverX:t+=this.m_extraScrollOverY,null==this.m_bounceBack&&(this.m_bounceBack=this._bounceBack.bind(this)),i.addEventListener("webkitTransitionEnd",this.m_bounceBack)):"0ms"===i.style.webkitTransitionDuration?this._scrollTransitionEnd():(null==this.m_scrollTransitionEnd&&(this.m_scrollTransitionEnd=this._scrollTransitionEnd.bind(this)),i.addEventListener("webkitTransitionEnd",this.m_scrollTransitionEnd)),this.getResources().isRTLMode()?(i.style.webkitTransform="translate3d("+e+"px, "+-t+"px, 0)",n.style.webkitTransform="translate3d("+e+"px, 0, 0)",s.style.webkitTransform="translate3d("+e+"px, 0, 0)"):(i.style.webkitTransform="translate3d("+-e+"px, "+-t+"px, 0)",n.style.webkitTransform="translate3d("+-e+"px, 0, 0)",s.style.webkitTransform="translate3d("+-e+"px, 0, 0)"),o.style.webkitTransform="translate3d(0, "+-t+"px, 0)",r.style.webkitTransform="translate3d(0, "+-t+"px, 0)";else{var a=this.getResources().isRTLMode()?"right":"left";this.setElementDir(n,-e,a),this.setElementDir(s,-e,a),this.setElementDir(o,-t,"top"),this.setElementDir(r,-t,"top")}},it.prototype._adjustScrollerSize=function(){var e=this.m_databody.firstChild,t=this.getElementHeight(e),i=this.getElementWidth(e);(this._getMaxBottomPixel()>t||this.getDataSource().getCount("row")===this._getMaxBottom()+1&&!this._isCountUnknown("row")&&this._getMaxBottom()>-1)&&this.setElementHeight(e,this._getMaxBottomPixel()),(this._getMaxRightPixel()>i||this.getDataSource().getCount("column")===this._getMaxRight()+1&&!this._isCountUnknown("column")&&this._getMaxRight()>-1)&&this.setElementWidth(e,this._getMaxRightPixel())},it.prototype._getLongScrollStart=function(e,t,i){var n,o,s,r,a,l,u;if(t!==e){"row"===i?(n=this.getElementHeight(this.m_databody.firstChild),o=this.m_utils._getMaxDivHeightForScrolling(),s=this._getMaxScrollHeight(),r=this.m_avgRowHeight,a=this.m_hasHorizontalScroller?this.m_utils.getScrollbarSize():0):"column"===i&&(n=this.getElementWidth(this.m_databody.firstChild),o=this.m_utils._getMaxDivWidthForScrolling(),s=this._getMaxScrollWidth(),r=this.m_avgColWidth,a=this.m_hasVerticalScroller?this.m_utils.getScrollbarSize():0);var d=Math.max(Math.min(e/n,1),0),h=this.getDataSource().getCount(i),c=this.getFetchSize(i);l=Math.floor(h*d),u=o<=n?Math.min(e,s):l*r,(1===d||e+c*r>n-a)&&(l=Math.max(h-c,0),u=Math.max(n-c*r,0))}else"row"===i?(l=this.m_startRow,u=this.m_startRowPixel):"column"===i&&(l=this.m_startCol,u=this.m_startColPixel);return{start:l,startPixel:u}},it.prototype.handleLongScroll=function(e,t){if(this.m_isLongScroll=!0,this.isFetchComplete()&&this._isScrollBackToEditable(!0)){var i=this._getLongScrollStart(t,this.m_prevScrollTop,"row"),n=i.start,o=i.startPixel,s=this._getLongScrollStart(e,this.m_prevScrollLeft,"column"),r=s.start,a=s.startPixel;this.m_hasCells&&(this.m_startRow=n,this.m_endRow=-1,this.m_startRowPixel=o,this.m_endRowPixel=o,this.m_startCol=r,this.m_endCol=-1,this.m_startColPixel=a,this.m_endColPixel=a),this.m_hasRowHeader&&(this.m_startRowHeader=n,this.m_endRowHeader=-1,this.m_startRowHeaderPixel=o,this.m_endRowHeaderPixel=o),this.m_hasRowEndHeader&&(this.m_startRowEndHeader=n,this.m_endRowEndHeader=-1,this.m_startRowEndHeaderPixel=o,this.m_endRowEndHeaderPixel=o),this.m_hasColHeader&&(this.m_startColHeader=r,this.m_endColHeader=-1,this.m_startColHeaderPixel=a,this.m_endColHeaderPixel=a),this.m_hasColEndHeader&&(this.m_startColEndHeader=r,this.m_endColEndHeader=-1,this.m_startColEndHeaderPixel=a,this.m_endColEndHeaderPixel=a),this.m_stopRowFetch=!1,this.m_stopRowHeaderFetch=!1,this.m_stopRowEndHeaderFetch=!1,this.m_stopColumnFetch=!1,this.m_stopColumnHeaderFetch=!1,this.m_stopColumnEndHeaderFetch=!1,this.fetchHeaders("row",n,this.m_rowHeader,this.m_rowEndHeader,void 0,{success:function(e,t,i){this.handleRowHeadersFetchSuccessForLongScroll(e,t,i)}}),this.fetchHeaders("column",r,this.m_colHeader,this.m_colEndHeader,void 0,{success:function(e,t,i){this.handleColumnHeadersFetchSuccessForLongScroll(e,t,i)}}),this.fetchCells(this.m_databody,n,r,null,null,{success:function(e,t){this.handleCellsFetchSuccessForLongScroll(e,t,n,r,o,a)}})}},it.prototype.handleRowHeadersFetchSuccessForLongScroll=function(e,t,i){var n=this.m_rowHeader.firstChild,o=this.m_rowEndHeader.firstChild;null!=n&&this.m_utils.empty(n),null!=o&&this.m_utils.empty(o),this.handleHeadersFetchSuccess(e,t,i,!1)},it.prototype.handleColumnHeadersFetchSuccessForLongScroll=function(e,t,i){var n=this.m_colHeader.firstChild,o=this.m_colEndHeader.firstChild;null!=n&&this.m_utils.empty(n),null!=o&&this.m_utils.empty(o),this.handleHeadersFetchSuccess(e,t,i,!1)},it.prototype.handleCellsFetchSuccessForLongScroll=function(e,t,i,n,o,s){var r=this.m_databody.firstChild;null!=r&&this._emptyDatabody(r),this.handleCellsFetchSuccess(e,t)},it.prototype._cleanupViewport=function(e){if(!this._isHighWatermarkScrolling()&&this._isScrollBackToEditable()){null==e&&(this.m_prevScrollLeft>this.m_currentScrollLeft?e="right":this.m_prevScrollLeft<this.m_currentScrollLeft?e="left":this.m_prevScrollTop>this.m_currentScrollTop?e="bottom":this.m_prevScrollTop<this.m_currentScrollTop&&(e="top"));var t=this._getViewportLeft(),i=this._getViewportRight(),n=this._getViewportTop(),o=this._getViewportBottom();"top"===e&&n>this._getMaxTopPixel()?(this.removeRowsFromTop(this.m_databody),this.removeRowHeadersFromTop()):"bottom"===e&&o<this._getMaxBottomPixel()?(this.removeRowsFromBottom(this.m_databody),this.removeRowHeadersFromBottom()):"left"===e&&t>this._getMaxLeftPixel()?(this.removeColumnsFromLeft(this.m_databody),this.removeColumnHeadersFromLeft()):"right"===e&&i<this._getMaxRightPixel()&&(this.removeColumnsFromRight(this.m_databody),this.removeColumnHeadersFromRight())}},it.prototype.fillViewport=function(){var e,t;if(this.isFetchComplete()){var i=this._getViewportLeft(),n=this._getViewportRight()+it.FETCH_PIXEL_THRESHOLD,o=this._getViewportTop(),s=this._getViewportBottom()+it.FETCH_PIXEL_THRESHOLD;if(this._getMaxBottomPixel()<=s&&(!this.m_stopRowHeaderFetch||!this.m_stopRowEndHeaderFetch||!this.m_stopRowFetch))return e=Math.max(0,this._getMaxBottom()+1),t=Math.max(0,this.getFetchCount("row",e)),this.fetchHeaders("row",e,this.m_rowHeader,this.m_rowEndHeader,t),void this.fetchCells(this.m_databody,e,this.m_startCol,t,this.m_endCol-this.m_startCol+1);if(this._getMaxTopPixel()>o||0===this.m_currentScrollTop&&this._getMaxTop()>0)return e=Math.max(0,this._getMaxTop()-this.getFetchSize("row")),t=Math.max(0,this._getMaxTop()-e),this.fetchHeaders("row",e,this.m_rowHeader,this.m_rowEndHeader,t),void this.fetchCells(this.m_databody,e,this.m_startCol,t,this.m_endCol-this.m_startCol+1);if(this._getMaxRightPixel()<=n&&(!this.m_stopColumnHeaderFetch||!this.m_stopColumnEndHeaderFetch||!this.m_stopColumnFetch))return e=Math.max(0,this._getMaxRight()+1),t=Math.max(0,this.getFetchCount("column",e)),this.fetchHeaders("column",e,this.m_colHeader,this.m_colEndHeader,t),void this.fetchCells(this.m_databody,this.m_startRow,e,this.m_endRow-this.m_startRow+1,t);(this._getMaxLeftPixel()>i||0===this.m_currentScrollLeft&&this._getMaxLeft()>0)&&(e=Math.max(0,this._getMaxLeft()-this.getFetchSize("column")),t=Math.max(0,this._getMaxLeft()-e),this.fetchHeaders("column",e,this.m_colHeader,this.m_colEndHeader,t),this.fetchCells(this.m_databody,this.m_startRow,e,this.m_endRow-this.m_startRow+1,t))}},it.prototype._getMaxRight=function(){return Math.max(Math.max(this.m_endCol,this.m_endColHeader),this.m_endColEndHeader)},it.prototype._getMaxLeft=function(){return Math.max(Math.max(this.m_startCol,this.m_startColHeader),this.m_startColEndHeader)},it.prototype._getMaxRightPixel=function(){return Math.max(Math.max(this.m_endColPixel,this.m_endColHeaderPixel),this.m_endColEndHeaderPixel)},it.prototype._getMaxLeftPixel=function(){return Math.max(Math.max(this.m_startColPixel,this.m_startColHeaderPixel),this.m_startColEndHeaderPixel)},it.prototype._getMaxBottom=function(){return Math.max(Math.max(this.m_endRow,this.m_endRowHeader),this.m_endRowEndHeader)},it.prototype._getMaxTop=function(){return Math.max(Math.max(this.m_startRow,this.m_startRowHeader),this.m_startRowEndHeader)},it.prototype._getMaxBottomPixel=function(){return Math.max(Math.max(this.m_endRowPixel,this.m_endRowHeaderPixel),this.m_endRowEndHeaderPixel)},it.prototype._getMaxTopPixel=function(){return Math.max(Math.max(this.m_startRowPixel,this.m_startRowHeaderPixel),this.m_startRowEndHeaderPixel)},it.prototype._isScrollBackToEditable=function(e){var t=this._getCurrentMode(),i=this._getActiveElement();return"edit"!==t||!e&&!this._isCellGoingToBeRemoved(i)||this._handleExitEdit(null,i)},it.prototype._isCellGoingToBeRemoved=function(e){if(!this._isHighWatermarkScrolling()){if(this.m_endRow-this.m_startRow>this.MAX_ROW_THRESHOLD){var t=this.getElementDir(e.parentNode,"top");if(t+this.getElementHeight(e)<this.m_currentScrollTop||t<this.m_currentScrollTop+this.getViewportHeight())return!0}if(this.m_endCol-this.m_startCol>this.MAX_COLUMN_THRESHOLD){var i=this.getElementDir(e,"left");if(i+this.getElementWidth(e)<this.m_currentScrollLeft||i<this.m_currentScrollLeft+this.getViewportHeight())return!0}}},it.prototype._removeCellsAlongAxis=function(e,t,i){var n,o,s,r,a,l,u,d,h,c,p,_,m,g,f=0,v=0;for("row"===e?(o=this.m_startRow,s=this.m_endRow,r=this.m_rowHeader,a=this.m_rowHeaderLevelCount,l=this.m_startRowHeader,u="height",d=this.m_startRowPixel,h=this.m_endRowPixel,c=this.m_currentScrollTop,p="column",_=this.m_startCol,m=this.m_endCol,g="top",n=i?s:o):(o=this.m_startCol,s=this.m_endCol,r=this.m_colHeader,a=this.m_columnHeaderLevelCount,l=this.m_startColHeader,u="width",d=this.m_startColPixel,h=this.m_endColPixel,c=this.m_currentScrollLeft,p="row",_=this.m_startRow,m=this.m_endRow,g=this.getResources().isRTLMode()?"right":"left",n=i?s:o);n<=s&&n>=o;){var y=this._getKey(this._getHeaderByIndex(n,a-1,r,a,l),e);null==y&&(y=this._getKey(this._getCellByIndex("column"===e?this.createIndex(this.m_startRow,n):this.createIndex(n,this.m_startCol)),e));var b=this._getCellDimension(null,n,y,e,u);if(!(i?h-b-f>t:d+b+f<c-t))break;for(var C,S=_;S<=m;S+=C){var E=this._getCellByIndex("column"===e?this.createIndex(S,n):this.createIndex(n,S)),T=E[this.getResources().getMappedAttribute("context")],D=T.extents[e];C=T.extents[p],1===D?this._remove(E):(T.extents[e]-=1,this.setElementDir(E,this.getElementDir(E,u)-b,u),i||(T.indexes[e]+=1,this.setElementDir(E,this.getElementDir(E,g)+b,g)));for(var A=0;A<C;A++){var I="column"===e?this.createIndex(S+A,n):this.createIndex(n,S+A);this._removeIndexFromDatabodyMap(I)}}f+=b,v+=1,n=i?n-1:n+1}return{dimensionChange:f,extentChange:v}},it.prototype.removeHeadersFromStartOfContainer=function(e,t,i,n,o,s,r,a){var l=0,u=0,d=null==t?e.firstChild:t.nextSibling;if(null==d)return{extentChange:0,dimensionChange:0};for(var h=this.m_utils.containsCSSClassName(d,o),c=h?d:d.firstChild,p=this.getElementDir(c,s);i+p<a-n;){if(this._remove(d),u+=p,l+=h?1:this._getAttribute(d,"extent",!0),i+=p,null==(d=null==t?e.firstChild:t.nextSibling))return{extentChange:l,dimensionChange:u};c=(h=this.m_utils.containsCSSClassName(d,o))?d:d.firstChild,p=this.getElementDir(c,s)}if(!h){var _=this.removeHeadersFromStartOfContainer(d,d.firstChild,i,n,o,s,r,a);this._setAttribute(d,"start",this._getAttribute(d,"start",!0)+_.extentChange),this._setAttribute(d,"extent",this._getAttribute(d,"extent",!0)-_.extentChange),this.setElementDir(c,this.getElementDir(c,r)+_.dimensionChange,r),this.setElementDir(c,this.getElementDir(c,s)-_.dimensionChange,s),l+=_.extentChange,u+=_.dimensionChange}return{extentChange:l,dimensionChange:u}},it.prototype.removeHeadersFromEndOfContainer=function(e,t,i,n,o){for(var s=0,r=0,a=e.lastChild,l=this.m_utils.containsCSSClassName(a,n),u=l?a:a.firstChild,d=this.getElementDir(u,o);t-d>i;)this._remove(a),r+=d,s+=l?1:this._getAttribute(a,"extent",!0),t-=d,a=e.lastChild,u=(l=this.m_utils.containsCSSClassName(a,n))?a:a.firstChild,d=this.getElementDir(u,o);if(!l){var h=this.removeHeadersFromEndOfContainer(a,t,i,n,o);this._setAttribute(a,"extent",this._getAttribute(a,"extent",!0)-h.extentChange),this.setElementDir(u,this.getElementDir(u,o)-h.dimensionChange,o),s+=h.extentChange,r+=h.dimensionChange}return{extentChange:s,dimensionChange:r}},it.prototype.removeColumnHeadersFromLeft=function(){var e,t;if(this.m_endColHeader-this.m_startColHeader>this.MAX_COLUMN_THRESHOLD){var i=this.m_colHeader.firstChild;e=this.getColumnThreshold(),this.m_startColHeaderPixel<=this.m_currentScrollLeft-e&&(t=this.removeHeadersFromStartOfContainer(i,null,this.m_startColHeaderPixel,e,this.getMappedStyle("colheadercell"),"width",this.getResources().isRTLMode()?"right":"left",this.m_currentScrollLeft),this.m_startColHeaderPixel+=t.dimensionChange,this.m_startColHeader+=t.extentChange)}if(this.m_endColEndHeader-this.m_startColEndHeader>this.MAX_COLUMN_THRESHOLD){var n=this.m_colEndHeader.firstChild;e=this.getColumnThreshold(),this.m_startColEndHeaderPixel<this.m_currentScrollLeft-e&&(t=this.removeHeadersFromStartOfContainer(n,null,this.m_startColEndHeaderPixel,e,this.getMappedStyle("colendheadercell"),"width",this.getResources().isRTLMode()?"right":"left",this.m_currentScrollLeft),this.m_startColEndHeaderPixel+=t.dimensionChange,this.m_startColEndHeader+=t.extentChange)}},it.prototype.removeColumnsFromLeft=function(e){if(this.m_endCol-this.m_startCol>this.MAX_COLUMN_THRESHOLD){var t=e.firstChild.childNodes,i=this.getColumnThreshold();if(t.length<1)return;var n=this._removeCellsAlongAxis("column",i,!1);this.m_startColPixel+=n.dimensionChange,this.m_startCol+=n.extentChange}},it.prototype.removeColumnHeadersFromRight=function(){var e,t,i=this.m_currentScrollLeft+this.getViewportWidth()+this.getColumnThreshold();this.m_endColHeader-this.m_startColHeader>this.MAX_COLUMN_THRESHOLD&&(e=this.m_colHeader.firstChild,this.m_endColHeaderPixel>i&&(this.m_stopColumnHeaderFetch&&(this.m_stopColumnHeaderFetch=!1),t=this.removeHeadersFromEndOfContainer(e,this.m_endColHeaderPixel,i,this.getMappedStyle("colheadercell"),"width"),this.m_endColHeaderPixel-=t.dimensionChange,this.m_endColHeader-=t.extentChange)),this.m_endColEndHeader-this.m_startColEndHeader>this.MAX_COLUMN_THRESHOLD&&(e=this.m_colEndHeader.firstChild,this.m_endColEndHeaderPixel>i&&(this.m_stopColumnEndHeaderFetch&&(this.m_stopColumnEndHeaderFetch=!1),t=this.removeHeadersFromEndOfContainer(e,this.m_endColEndHeaderPixel,i,this.getMappedStyle("colendheadercell"),"width"),this.m_endColEndHeaderPixel-=t.dimensionChange,this.m_endColEndHeader-=t.extentChange))},it.prototype.removeColumnsFromRight=function(e){if(this.m_endCol-this.m_startCol>this.MAX_COLUMN_THRESHOLD){var t=e.firstChild.childNodes,i=this.m_currentScrollLeft+this.getViewportWidth()+this.getColumnThreshold();if(this.m_endColPixel<=i||t.length<1)return;this.m_stopColumnFetch&&(this.m_stopColumnFetch=!1);var n=this._removeCellsAlongAxis("column",i,!0);this.m_endColPixel-=n.dimensionChange,this.m_endCol-=n.extentChange}},it.prototype.removeRowHeadersFromTop=function(){var e,t;if(this.m_endRowHeader-this.m_startRowHeader>this.MAX_ROW_THRESHOLD){var i=this.m_rowHeader.firstChild;t=this.getRowThreshold(),this.m_startRowHeaderPixel>=this.m_currentScrollTop-t||(e=this.removeHeadersFromStartOfContainer(i,null,this.m_startRowHeaderPixel,t,this.getMappedStyle("rowheadercell"),"height","top",this.m_currentScrollTop),this.m_startRowHeaderPixel+=e.dimensionChange,this.m_startRowHeader+=e.extentChange)}if(this.m_endRowEndHeader-this.m_startRowEndHeader>this.MAX_ROW_THRESHOLD){var n=this.m_rowEndHeader.firstChild;t=this.getRowThreshold(),this.m_startRowEndHeaderPixel>=this.m_currentScrollTop-t||(e=this.removeHeadersFromStartOfContainer(n,null,this.m_startRowEndHeaderPixel,t,this.getMappedStyle("rowendheadercell"),"height","top",this.m_currentScrollTop),this.m_startRowEndHeaderPixel+=e.dimensionChange,this.m_startRowEndHeader+=e.extentChange)}},it.prototype.removeRowsFromTop=function(e){if(this.m_endRow-this.m_startRow>this.MAX_ROW_THRESHOLD){var t=this.getRowThreshold();if(this.m_startRowPixel>=this.m_currentScrollTop-t)return;var i=this._removeCellsAlongAxis("row",t,!1);this.m_startRowPixel+=i.dimensionChange,this.m_startRow+=i.extentChange}},it.prototype.removeRowHeadersFromBottom=function(){var e,t=this.m_currentScrollTop+this.getViewportHeight()+this.getRowThreshold();if(this.m_endRowHeader-this.m_startRowHeader>this.MAX_ROW_THRESHOLD){var i=this.m_rowHeader.firstChild;this.m_endRowHeaderPixel<=t||(this.m_stopRowHeaderFetch&&(this.m_stopRowHeaderFetch=!1),e=this.removeHeadersFromEndOfContainer(i,this.m_endRowHeaderPixel,t,this.getMappedStyle("rowheadercell"),"height"),this.m_endRowHeaderPixel-=e.dimensionChange,this.m_endRowHeader-=e.extentChange)}if(this.m_endRowEndHeader-this.m_startRowEndHeader>this.MAX_ROW_THRESHOLD){var n=this.m_rowEndHeader.firstChild;this.m_endRowEndHeaderPixel<=t||(this.m_stopRowEndHeaderFetch&&(this.m_stopRowEndHeaderFetch=!1),e=this.removeHeadersFromEndOfContainer(n,this.m_endRowEndHeaderPixel,t,this.getMappedStyle("rowendheadercell"),"height"),this.m_endRowEndHeaderPixel-=e.dimensionChange,this.m_endRowEndHeader-=e.extentChange)}},it.prototype.removeRowsFromBottom=function(e){if(this.m_endRow-this.m_startRow>this.MAX_ROW_THRESHOLD){var t=this.m_currentScrollTop+this.getViewportHeight()+this.getRowThreshold();if(this.m_endRowPixel<=t)return;this.m_stopRowFetch&&(this.m_stopRowFetch=!1);var i=this._removeCellsAlongAxis("row",t,!0);this.m_endRowPixel-=i.dimensionChange,this.m_endRow-=i.extentChange}},it.prototype.handleContextMenuGesture=function(e,t,i){var n,o,s,r=e.originalEvent.target,a=this.findCell(r);if("touch"===t&&null!=a&&(n=this.getCellIndexes(a),(!this.isMultipleSelection()||!this._isContainSelection(n)||this._isDatabodyCellActive()&&n.row!==this.m_active.indexes.row&&n.column!==this.m_active.indexes.column)&&(this._isSelectionEnabled()?this.handleDatabodyClickSelection(e.originalEvent):this.handleDatabodyClickActive(e.originalEvent))),!this.m_utils._isNodeEditableOrClickable(r,this.m_root)){if(null!=a)n=this.getCellIndexes(a),this.isMultipleSelection()&&this._isContainSelection(n)?(s=this._getActiveElement(),o=this._isDatabodyCellActive()?"keyboard"===t?this._getCellCapability(s):this._getCellCapability(s,a):this._getHeaderCapability(s,a)):(s=a,o=this._getCellCapability(s));else if(null==(a=this.findHeader(r))){if(null==(a=this.findLabel(r)))return;o={resize:"disable",resizeWidth:"disable",resizeHeight:"disable",sortRow:"disable",sortCol:"disable",cut:"disable",paste:"disable",sortColAsc:"disable",sortColDsc:"disable"},s=a}else o=this._getHeaderCapability(a),s=a;i.call(null,{capabilities:o,launcher:s},e,t)}},it.prototype._getCellCapability=function(e,t){var i=!0,n=!0,o="disable",s="enable",r={resize:o,resizeWidth:o,resizeHeight:o,sortRow:o,sortCol:o,cut:o,paste:o,sortColAsc:o,sortColDsc:o};if(null!=t&&(i=this._getIndex(e,"column")===this._getIndex(t,"column"),!1===(n=this._getKey(e,"row")===this._getKey(t,"row"))&&!1===i))return r;var a=this.getHeaderFromCell(e,"row"),l=this.getHeaderFromCell(e,"column"),u=this.getResources().getMappedAttribute("resizable"),d=this.getResources().getMappedAttribute("sortable");if(null!=l&&i&&("true"===l.getAttribute(u)&&(r.resize=s,r.resizeWidth=s),"true"===l.getAttribute(d))){r.sortCol=s,r.sortColAsc=s,r.sortColDsc=s;var h=l.getAttribute(this.getResources().getMappedAttribute("sortDir"));"ascending"===h?r.sortColAsc=o:"descending"===h&&(r.sortColDsc=o)}return n&&(this._isMoveEnabled("row")&&(r.cut=s,r.paste=s),null!=a&&("true"===a.getAttribute(u)&&(r.resize=s,r.resizeHeight=s),"true"===a.getAttribute(d)&&(r.sortRow=s))),r},it.prototype._getHeaderCapability=function(e,t){var i=!0,n=!0,o="disable",s="enable",r={resize:o,resizeWidth:o,resizeHeight:o,sortRow:o,sortCol:o,cut:o,paste:o,sortColAsc:o,sortColDsc:o};if(null!=t&&(i=this.getHeaderCellIndex(e)===this._getIndex(t,"column"),!1===(n=this._getKey(e,"row")===this._getKey(t,"row"))&&!1===i))return r;var a=this.getHeaderCellAxis(e),l=this.getResources().getMappedAttribute("resizable"),u=this.getResources().getMappedAttribute("sortable");if(null!==e)if("column"!==a&&"columnEnd"!==a||!i)n&&(this._isMoveEnabled("row")&&(r.cut=s,r.paste=s),"true"===e.getAttribute(l)&&(r.resize=s,r.resizeHeight=s),r.resizeWidth=this.m_options.isResizable(a,"width"),"true"===e.getAttribute(u)&&(r.sortRow=s));else if("true"===e.getAttribute(l)&&(r.resizeWidth=s,r.resize=s),r.resizeHeight=this.m_options.isResizable(a,"height"),"true"===e.getAttribute(u)){r.sortCol=s,r.sortColAsc=s,r.sortColDsc=s;var d=e.getAttribute(this.getResources().getMappedAttribute("sortDir"));"ascending"===d?r.sortColAsc=o:"descending"===d&&(r.sortColDsc=o)}return r.resize=r.resizeHeight===s||r.resizeWidth===s?s:o,r},it.prototype.handleContextMenuReturn=function(e,t,i){var n,o;null!=this.m_active&&(n=this._getActiveElement()),t===this.m_resources.getMappedCommand("resizeHeight")||t===this.m_resources.getMappedCommand("resizeWidth")?this.isResizeEnabled()&&this.handleContextMenuResize(e,t,i,n):t===this.m_resources.getMappedCommand("sortColAsc")||t===this.m_resources.getMappedCommand("sortColDsc")?(o=t===this.m_resources.getMappedCommand("sortColAsc")?"ascending":"descending",this.m_utils.containsCSSClassName(n,this.getMappedStyle("cell"))&&(n=this.getHeaderFromCell(n,"column")),this._isDOMElementSortable(n)&&this._handleCellSort(e,o,n)):t===this.m_resources.getMappedCommand("sortRowAsc")||t===this.m_resources.getMappedCommand("sortRowDsc")?(o=t===this.m_resources.getMappedCommand("sortRowAsc")?"ascending":"descending",this.m_utils.containsCSSClassName(n,this.getMappedStyle("cell"))&&(n=this.getHeaderFromCell(n,"row")),this._isDOMElementSortable(n)&&this._handleCellSort(e,o,n)):t===this.m_resources.getMappedCommand("cut")?this._handleCut(e,n):t===this.m_resources.getMappedCommand("paste")?this._handlePaste(e,n):t===this.m_resources.getMappedCommand("discontiguousSelection")&&this.setDiscontiguousSelectionMode(i)},it.prototype._isSortEnabled=function(e,t){var i=this.getDataSource().getCapability("sort"),n=this.m_options.isSortable(e,t);return!("enable"!==n&&"auto"!==n||"full"!==i&&i!==e)},it.prototype._isDOMElementSortable=function(e){if(null==e)return!1;var t=this.findHeader(e);return null!=t&&"true"===t.getAttribute(this.getResources().getMappedAttribute("sortable"))},it.prototype._isSelectionEnabled=function(){return"none"!==this.m_options.getSelectionCardinality()},it.prototype.isMultipleSelection=function(){return"multiple"===this.m_options.getSelectionCardinality()},it.prototype.isResizeEnabled=function(){return this.m_options.isResizable("row","width")||this.m_options.isResizable("row","height")||this.m_options.isResizable("column","width")||this.m_options.isResizable("column","height")||this.m_options.isResizable("rowEnd","width")||this.m_options.isResizable("rowEnd","height")||this.m_options.isResizable("columnEnd","width")||this.m_options.isResizable("columnEnd","height")},it.prototype._isHeaderResizeEnabled=function(e,t){return"column"===e||"columnEnd"===e?"enable"===this.m_options.isResizable(e,"width",t):("row"===e||"rowEnd"===e)&&"enable"===this.m_options.isResizable(e,"height",t)},it.prototype.handleMouseMove=function(e){this.isResizeEnabled()&&!1===this.m_databodyDragState&&this.handleResize(e)},it.prototype.handleRowHeaderMouseMove=function(e){this.m_databodyMove?this._handleMove(e):this.m_headerDragState&&this.m_selectionFrontier&&-1!==this.m_selectionFrontier.axis.indexOf("row")?this.extendSelectionHeader(e.target,e):this.m_isResizing||this.handleMouseMove(e)},it.prototype.handleColumnHeaderMouseMove=function(e){this.m_headerDragState&&this.m_selectionFrontier&&-1!==this.m_selectionFrontier.axis.indexOf("column")?this.extendSelectionHeader(e.target,e):this.m_isResizing||this.handleMouseMove(e)},it.prototype.handleHeaderMouseDown=function(e){var t;this._exitActionableMode();var i=e.target;if(this._isEditOrEnter()){var n=this._getActiveElement();if(!1===this._leaveEditing(e,n,!1))return}if(0===e.button){if((this.m_utils.containsCSSClassName(i,this.getMappedStyle("sortascending"))||this.m_utils.containsCSSClassName(i,this.getMappedStyle("sortdescending")))&&this._isDOMElementSortable(i))return e.preventDefault(),void this._handleSortIconMouseDown(i);this.isResizeEnabled()&&(t=this.handleResizeMouseDown(e)),!this.m_isResizing&&this._isMoveOnElementEnabled(this.findHeader(i))&&(this.m_databodyMove=!0,this.m_currentX=e.pageX,this.m_currentY=e.pageY,t=!0)}if(!this.m_isResizing){this.m_root.contains(document.activeElement)&&document.activeElement!==this.m_root||(this.m_externalFocus=!0);var o=this.m_options.getSelectionMode(),s=this.findHeader(i)[this.getResources().getMappedAttribute("context")];!this._isSelectionEnabled()||!this.isMultipleSelection()||"row"===o&&-1===s.axis.indexOf("row")||this.m_databodyMove?"row"===o&&-1!==s.axis.indexOf("row")&&this._isSelectionEnabled()?this.handleHeaderClickSelection(e):this.handleHeaderClickActive(e):(this.handleHeaderClickSelection(e),0===e.button&&(this.m_headerDragState=!0))}!0===t&&e.preventDefault()},it.prototype.handleMouseUp=function(e){this.m_headerDragState=!1,this.m_databodyDragState=!1,this.m_databodyMove?this._handleMoveMouseUp(e,!1):this.isResizeEnabled()&&this.handleResizeMouseUp(e),this.m_databodyMove=!1},it.prototype.handleHeaderMouseOver=function(e){var t=e.target;this.m_utils.addCSSClassName(this.findHeader(t),this.getMappedStyle("hover")),this._isDOMElementSortable(t)&&this._handleSortMouseOver(e)},it.prototype.handleHeaderMouseOut=function(e){var t=e.target;this.m_utils.removeCSSClassName(this.findHeader(t),this.getMappedStyle("hover")),this._isDOMElementSortable(t)&&this._handleSortMouseOut(e)},it.prototype.handleHeaderMouseUp=function(e){this.handleDragAnchorChange(e),this.m_headerDragState=!1,this.m_databodyDragState=!1,this.m_databodyMove&&this._handleMoveMouseUp(e,!0)},it.prototype.handleCornerMouseDown=function(e){var t=e.target,i=this.findLabel(t);null!=i&&this._setActive(i,this._createActiveObject(i),e,!0)},it.prototype.handleCornerMouseOver=function(e){var t=e.target;this.m_utils.addCSSClassName(this.findLabel(t),this.getMappedStyle("hover"))},it.prototype.handleCornerMouseOut=function(e){var t=e.target;this.m_utils.removeCSSClassName(this.findLabel(t),this.getMappedStyle("hover"))},it.prototype.handleCornerClick=function(e){var t=e.target;null==this.find(t,"headerlabel")&&this._handleSelectAll(e)},it.prototype.handleHeaderClick=function(e){var t=e.target;(this.m_utils.containsCSSClassName(t,this.getMappedStyle("sortascending"))||this.m_utils.containsCSSClassName(t,this.getMappedStyle("sortdescending")))&&this._isDOMElementSortable(t)&&(this._removeTouchSelectionAffordance(),this._handleHeaderSort(e),e.preventDefault())},it.prototype.handleDatabodyMouseDown=function(e){var t=e.target,i=this.findCell(t);if(null!=i){if(this._isEditOrEnter()){var n=this._getActiveElement();if(i===n)return;if(!1===this._leaveEditing(e,n,!1))return}else this._exitActionableMode();0===e.button&&this._isMoveOnElementEnabled(i)&&(this.m_databodyMove=!0,this.m_currentX=e.pageX,this.m_currentY=e.pageY),this.m_root.contains(document.activeElement)&&document.activeElement!==this.m_root||(this.m_externalFocus=!0),this._isGridEditable()&&(this.m_shouldFocus=!this._isFocusableElementBeforeCell(t)),this._isSelectionEnabled()?(this.handleDatabodyClickSelection(e),this.isMultipleSelection()&&0===e.button&&(this.m_databodyDragState=!0)):this.handleDatabodyClickActive(e)}else this.m_scrollbarFocus=!0},it.prototype.handleDatabodyMouseOut=function(e){if(!this.m_databodyMove){var t=e.target,i=this.findCell(t);this._setCellHover(i,"remove")}},it.prototype.handleDatabodyMouseOver=function(e){if(!this.m_databodyMove){var t=e.target,i=this.findCell(t);this._setCellHover(i,"add")}},it.prototype._setCellHover=function(e,t){if(null!=e){var i=this.m_options.getSelectionMode();if("cell"===i)"add"===t?this.m_utils.addCSSClassName(e,this.getMappedStyle("hover")):this.m_utils.removeCSSClassName(e,this.getMappedStyle("hover"));else if("row"===i)for(var n=this._getIndex(e,"row"),o=this._getSelectionStartAndEnd(this.createIndex(n,this.m_startCol),this.createIndex(n,this.m_endCol),0),s=o.min.row;s<=o.max.row;s++)this._highlightCellsAlongAxis(s,"row","index",t,["hover"])}},it.prototype.handleDatabodyDoubleClick=function(e){if(this._isGridEditable()){var t=e.target,i=this.findCell(t);if("edit"===this._getCurrentMode()){var n=this._getActiveElement();if(i===n)return;if(!this._handleExitEdit(e,n))return}this._handleEditable(e,i),this._handleEdit(e,i)}},it.prototype.handleDatabodyMouseMove=function(e){this.m_databodyMove?this._handleMove(e):this.m_databodyDragState&&this.handleDatabodySelectionDrag(e)},it.prototype.handleDatabodyMouseUp=function(e){this.m_databodyDragState=!1,this.m_headerDragState=!1,this.m_databodyMove&&this._handleMoveMouseUp(e,!0)},it.prototype.handleDatabodyKeyDown=function(e){var t,i=this.m_utils.ctrlEquivalent(e);if(!(e.defaultPrevented&&i&&(it.keyCodes.LEFT_KEY||it.keyCodes.RIGHT_KEY)||this.m_animating)){t=null!=this.m_active&&"header"===this.m_active.type?this._getActionFromKeyDown(e,this.m_active.axis,!1):null!=this.m_active&&"label"===this.m_active.type?this._getActionFromKeyDown(e,this.m_active.axis,!0):this._getActionFromKeyDown(e,"cell",!1);var n=this._getActiveElement();null!=t&&t.call(this,e,n)&&e.preventDefault()}},it.prototype.findPos=function(e){if(e){var t=this.findPos(e.offsetParent),i=this.getElementTranslationXYZ(e.offsetParent);return[parseInt(t[0],10)+parseInt(e.offsetLeft,10)+i[0],parseInt(t[1],10)+parseInt(e.offsetTop,10)+i[1]]}return[0,0]},it.prototype.getElementTranslationXYZ=function(e){if(e){var t=document.defaultView.getComputedStyle(e,null),i=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform"),n=i.substr(7,i.length-8).split(", ");return[isNaN(parseInt(n[4],10))?0:parseInt(n[4],10),isNaN(parseInt(n[5],10))?0:parseInt(n[5],10),isNaN(parseInt(n[6],10))?0:parseInt(n[6],10)]}return[0,0,0]},it.prototype.handleDatabodyMouseWheel=function(e){if(e.preventDefault(),!this.m_animating){var t=this.m_utils.getMousewheelScrollDelta(e),i=t.deltaX,n=t.deltaY;this.scrollDelta(i,n)}},it.prototype.handleTouchStart=function(e){var t=e.touches.length,i=e.touches[0].target;if(1===t){if(this.m_startX=e.touches[0].pageX,this.m_startY=e.touches[0].pageY,this.m_currentX=this.m_startX,this.m_currentY=this.m_startY,this.m_prevX=this.m_startX,this.m_prevY=this.m_startY,this.m_startTime=(new Date).getTime(),this.m_touchActive=!0,this.isMultipleSelection()){i.className!==this.getMappedStyle("selectaffordancetop")&&i.className!==this.getMappedStyle("selectaffordancebottom")||(i=i.parentNode);var n=null;if(i===this.m_topSelectIconContainer?n="top":i===this.m_bottomSelectIconContainer&&(n="bottom"),n){this.m_touchMultipleSelect=!0;var o=this.GetSelection();this.m_touchSelectAnchor="top"===n?o[o.length-1].endIndex:o[o.length-1].startIndex}}!this.m_touchMultipleSelect&&this._isMoveOnElementEnabled(this.findCell(i))&&(this.m_databodyMove=!0)}else this.handleTouchCancel(e)},it.prototype.handleTouchMove=function(e){var t=e.target;if(this.m_touchActive){e.preventDefault(),this.m_currentX=e.touches[0].pageX,this.m_currentY=e.touches[0].pageY;var i=this.m_currentX-this.m_prevX,n=this.m_currentY-this.m_prevY;if(this.getResources().isRTLMode()&&(i*=-1),this.m_touchMultipleSelect)this.handleDatabodySelectionDrag(e);else if(this.m_databodyMove)this._removeTouchSelectionAffordance(),this._handleMove(e);else if(this._isEditOrEnter()){var o=this._getActiveElement();this.findCell(t)!==o&&this._handleNonSwipeScroll(i,n)}else this._handleNonSwipeScroll(i,n);this.m_prevX=this.m_currentX,this.m_prevY=this.m_currentY}else this.handleTouchCancel(e)},it.prototype.handleTouchEnd=function(e){var t,i=e.target;if(this._isEditOrEnter()){if(t=this._getActiveElement(),this.findCell(i)===t)return void this.handleTouchCancel(e);this._leaveEditing(e,t,!1)}else this._exitActionableMode();if(null!=this.m_lastTapTime&&this.m_startTime-this.m_lastTapTime<250&&this.m_lastTapTarget===i?(this.m_lastTapTime=null,this.m_lastTapTarget=null,null!=(t=this.findCell(i))&&(this._handleEditable(e,t),this._handleEdit(e,t),e.preventDefault())):(this.m_lastTapTarget=e.target,this.m_lastTapTime=(new Date).getTime()),this.m_touchActive&&!e.defaultPrevented)if(this.m_touchMultipleSelect)e.preventDefault(),this.m_touchMultipleSelect=!1;else{var n=this.m_lastTapTime-this.m_startTime;if(this.m_currentX===this.m_startX&&this.m_currentY===this.m_startY)return this.m_databodyMove=!1,this._isSelectionEnabled()&&n<it.CONTEXT_MENU_TAP_HOLD_DURATION?void this.handleDatabodyClickSelection(e):void this.handleDatabodyClickActive(e);if(this.m_databodyMove)return e.preventDefault(),this.m_databodyMove=!1,void this._handleMoveMouseUp(e,!0);this._handleSwipe(e)}this.handleTouchCancel(e)},it.prototype._calculateMomentum=function(e,t,i,n,o,s){var r,a=e-t,l=Math.abs(a)/i,u=l*l/(2*it.DECELERATION_FACTOR)*(a<0?-1:1),d=l/it.DECELERATION_FACTOR;return s&&(u*=-1),n-u>o?(r=Math.max(-1*it.MAX_OVERSCROLL_PIXEL,u),u=n-o,d=(a=o-n)/l):n-u<0&&(r=Math.min(it.MAX_OVERSCROLL_PIXEL,u),u=n,d=(a=n)/l),{destination:Math.round(u),duration:Math.min(Math.max(it.MIN_SWIPE_TRANSITION_DURATION,d),it.MAX_SWIPE_TRANSITION_DURATION),overScroll:r}},it.prototype.handleTouchCancel=function(e){this.m_databodyMove&&(this._handleMoveMouseUp(e,!1),this.m_databodyMove=!1),this.m_touchSelectAnchor=null,this.m_touchMultipleSelect=!1,this.m_touchActive=!1,this.m_startX=0,this.m_startY=0,this.m_prevX=0,this.m_prevY=0,this.m_currentX=0,this.m_currentY=0,this.m_startTime=0},it.prototype.handleHeaderTouchStart=function(e){this.m_touchStart=(new Date).getTime();var t=e.touches.length,i=e.target;if(1===t){this.m_startX=e.touches[0].pageX,this.m_startY=e.touches[0].pageY,this.m_currentX=this.m_startX,this.m_currentY=this.m_startY,this.m_prevX=this.m_startX,this.m_prevY=this.m_startY,this.m_touchActive=!0;var n=this.findHeader(i);this.isResizeEnabled()&&(this.handleResize(e),this.handleResizeMouseDown(e)),!this.m_isResizing&&this._isMoveOnElementEnabled(n)&&(this.m_databodyMove=!0)}else this.handleHeaderTouchCancel(e)},it.prototype.handleHeaderTouchMove=function(e){if(this.m_touchActive){e.preventDefault(),this.m_currentX=e.touches[0].pageX,this.m_currentY=e.touches[0].pageY;var t=this.m_currentX-this.m_prevX,i=this.m_currentY-this.m_prevY;if(this.m_isResizing&&this.isResizeEnabled())this.handleResize(e);else if(this.m_databodyMove)this._removeTouchSelectionAffordance(),this._handleMove(e);else{var n=e.target,o=this.findHeader(n),s=this.getHeaderCellAxis(o);"column"===s||"columnEnd"===s?this._handleNonSwipeScroll(t,0):this._handleNonSwipeScroll(0,i)}this.m_prevX=this.m_currentX,this.m_prevY=this.m_currentY}else this.handleTouchCancel(e)},it.prototype.handleHeaderTouchEnd=function(e){var t;if(this.m_touchActive&&!e.defaultPrevented){var i=e.target;if(this.m_isResizing&&this.isResizeEnabled())this.handleResizeMouseUp(e),this.m_currentX!==this.m_startX&&this.m_currentY!==this.m_startY&&e.preventDefault();else if(this.m_currentX===this.m_startX&&this.m_currentY===this.m_startY){var n=this.m_options.getSelectionMode(),o=(t=this.findHeader(i))[this.getResources().getMappedAttribute("context")];(this.m_utils.containsCSSClassName(i,this.getMappedStyle("sortascending"))||this.m_utils.containsCSSClassName(i,this.getMappedStyle("sortdescending")))&&this._isDOMElementSortable(i)?(e.preventDefault(),this._removeTouchSelectionAffordance(),this._handleSortIconMouseDown(i),this._handleHeaderSort(e)):!this._isSelectionEnabled()||!this.isMultipleSelection()||"row"===n&&-1===o.axis.indexOf("row")||this.m_databodyMove?"row"===n&&-1!==o.axis.indexOf("row")&&this._isSelectionEnabled()?this.handleHeaderClickSelection(e):this.handleHeaderClickActive(e):(this.handleHeaderClickSelection(e),0===e.button&&(this.m_headerDragState=!0))}else this.m_databodyMove?(e.preventDefault(),this.m_databodyMove=!1,this._handleMoveMouseUp(e,!0)):(t=this.findHeader(i),this._handleSwipe(e,this.getHeaderCellAxis(t)))}this.handleHeaderTouchCancel(e)},it.prototype.handleHeaderTouchCancel=function(e){this.m_databodyMove&&(this._handleMoveMouseUp(e,!1),this.m_databodyMove=!1),this.m_touchActive=!1,this.m_startX=0,this.m_startY=0,this.m_prevX=0,this.m_prevY=0,this.m_currentX=0,this.m_currentY=0},it.prototype._handleNonSwipeScroll=function(e,t){var i=(new Date).getTime();this._disableTouchScrollAnimation();var n=this.adjustTouchScroll(e,t);e=n[0],t=n[1],this.scrollDelta(e,t),i-this.m_startTime>it.TAP_AND_SCROLL_RESET&&(this.m_startX=this.m_currentX,this.m_startY=this.m_currentY,this.m_startTime=(new Date).getTime())},it.prototype._handleSwipe=function(e,t){var i=(new Date).getTime()-this.m_startTime,n=this.getResources().isRTLMode(),o=this.m_currentX-this.m_startX,s=this.m_currentY-this.m_startY;if(n&&(o*=-1),Math.abs(o)<it.MIN_SWIPE_DISTANCE&&Math.abs(s)<it.MIN_SWIPE_DISTANCE&&i<it.MIN_SWIPE_DURATION)e.preventDefault(),this._isSelectionEnabled()&&this._scrollTouchSelectionAffordance();else if(i<it.MAX_SWIPE_DURATION){var r,a;e.preventDefault(),"row"!==t&&"rowEnd"!==t?(r=this._calculateMomentum(this.m_currentX,this.m_startX,i,this.m_currentScrollLeft,this.m_scrollWidth,n),isNaN(r.overScroll)||(r.overScroll>0||this.m_stopColumnFetch)&&(this.m_extraScrollOverX=-1*r.overScroll)):(r={duration:0,destination:0},o=0),"column"!==t&&"columnEnd"!==t?(a=this._calculateMomentum(this.m_currentY,this.m_startY,i,this.m_currentScrollTop,this.m_scrollHeight),isNaN(a.overScroll)||(a.overScroll>0||this.m_stopRowFetch)&&(this.m_extraScrollOverY=-1*a.overScroll)):(a={duration:0,destination:0},s=0);var l=Math.max(r.duration,a.duration);this.m_databody.firstChild.style.webkitTransitionDuration=l+"ms",this.m_rowHeader.firstChild.style.webkitTransitionDuration=l+"ms",this.m_colHeader.firstChild.style.webkitTransitionDuration=l+"ms",this.m_rowEndHeader.firstChild.style.webkitTransitionDuration=l+"ms",this.m_colEndHeader.firstChild.style.webkitTransitionDuration=l+"ms",o+=r.destination,s+=a.destination;var u=this.adjustTouchScroll(o,s);o=u[0],s=u[1],this.scrollDelta(o,s)}},it.prototype.fireEvent=function(e,t){if(null!=e&&null!=t){var i=this.callbacks[e];return null==i||i(t)}},it.prototype.addListener=function(e,t){this.callbacks[e]=t},it.prototype.setElementHeight=function(e,t){e.style.height=t+"px"},it.prototype.getElementHeight=function(e){return this.getElementDir(e,"height")},it.prototype.setElementWidth=function(e,t){e.style.width=t+"px"},it.prototype.getElementWidth=function(e){return this.getElementDir(e,"width")},it.prototype.setElementDir=function(e,t,i){e.style[i]=t+"px"},it.prototype.getElementDir=function(e,t){var i;return e.style[t].indexOf("px")>-1&&-1===e.style[t].indexOf("e")?parseFloat(e.style[t]):(document.body.contains(e)?i=Math.round(e["offset"+t.charAt(0).toUpperCase()+t.slice(1)]):(e.style.visibility="hidden",this.m_root.appendChild(e),i=Math.round(e["offset"+t.charAt(0).toUpperCase()+t.slice(1)]),this.m_root.removeChild(e),e.style.visibility=""),i)},it.BEFORE=1,it.AFTER=2,it.INSIDE=3,it.prototype._isInViewport=function(e){var t=e.row,i=e.column;return-1===t&&-1===i?-1:-1===t?i<this.m_startCol?it.BEFORE:i>this.m_endCol?it.AFTER:it.INSIDE:-1===i?t<this.m_startRow?it.BEFORE:t>this.m_endRow?it.AFTER:it.INSIDE:i>=this.m_startCol&&i<=this.m_endCol&&t>=this.m_startRow&&t<=this.m_endRow?it.INSIDE:-1},it.prototype._isCellBoundryInViewport=function(e,t,i,n){var o=this._getViewportTop(),s=this._getViewportBottom(),r=this._getViewportLeft(),a=this._getViewportRight();return(n<=s&&n>o||i>=o&&i<s)&&(t<=a&&t>r||e>=r&&e<a)},it.prototype.queueModelEvent=function(e){return!(this.m_initialized&&!this.m_processingEventQueue&&!this.m_animating&&!this.m_processingModelEvent)&&(null==this.m_modelEvents&&(this.m_modelEvents=[]),this.m_modelEvents.push(e),!0)},it.prototype.handleModelEvent=function(e,t){if(void 0!==t||!this.queueModelEvent(e)){var i=e.operation,o=e.keys,s=e.source,r=e.indexes,a=e.result,l=e.header,u=e.endheader,d=e.silent,h=!1;this.m_processingModelEvent=!0,"insert"===i?(this._adjustActive(i,r),this.m_shouldFocus=!0,this._adjustSelectionOnModelChange(i,o,r),null!=a?(this._handleModelInsertRangeEvent(a,l,u),h=!0):this._handleModelInsertEvent(r,o)):"update"===i?(this._handleModelUpdateEvent(r,o,a),h=!0):"delete"===i?(this._adjustActive(i,r),this._adjustSelectionOnModelChange(i,o,r),s&&n.FlattenedTreeDataGridDataSource&&s instanceof n.FlattenedTreeDataGridDataSource&&this.m_utils.supportsTransitions()?(this._handleModelDeleteEventWithAnimation(o),h=!0):this._handleModelDeleteEvent(r,o,d)):"refresh"===i||"reset"===i?this._handleModelRefreshEvent():"sync"===i&&this._handleModelSyncEvent(e),this.m_processingModelEvent=!1,!h&&t&&this._runModelEventQueue()}},it.prototype._adjustActive=function(e,t){var i,n;if(null!=this.m_active){if("cell"===this.m_active.type)n=!1,i=this.m_active.indexes.row;else{if("header"!==this.m_active.type||"row"!==this.m_active.axis)return;n=!0,i=this.m_active.index}if(Array.isArray(t)||(t=new Array(t)),!0===this.m_moveActive){if("insert"===e)return void(n?this.m_active.index=t[0].row:this.m_active.indexes.row=t[0].row);if("delete"===e&&t[0].row===i)return}for(var o="insert"===e?1:-1,s=0;s<t.length;s++){var r=t[s].row;r<i?n?this.m_active.index+=o:this.m_active.indexes.row+=o:r===i&&"delete"===e&&this._setActive(null,null)}}},it.prototype._adjustSelectionOnModelChange=function(e,t,i){Array.isArray(t)||(t=new Array(t)),Array.isArray(i)||(i=new Array(i));var n=this.GetSelection();if(null!=t&&null!=i&&t.length===i.length&&0!==n.length)for(var o="insert"===e?1:-1,s=0;s<t.length;s++)for(var r,a=t[s].row,l=i[s].row,u=n.length-1;u>=0;u--){var d=n[u],h=d.startKey.row,c=d.endKey.row,p=d.startIndex.row,_=d.endIndex.row;if(h===a){if(c===a&&"delete"===e){n.splice(u,1);continue}r=this._getKey(this._getAxisCellsByIndex(d.startIndex.row+1,"row")[0],"row"),d.startKey.row=r,d.endIndex.row+=o}else c===a?(r=this._getKey(this._getAxisCellsByIndex(d.startIndex.row-1,"row")[0],"row"),d.endKey.row=r,d.endIndex.row+=o):l<=p?(d.startIndex.row+=o,d.endIndex.row+=o):l<_&&(d.endIndex.row+=o)}else if(this.m_moveActive&&"insert"===e){var m;if(this._isSelectionEnabled()&&this._isDatabodyCellActive())m="cell"===this.m_options.getSelectionMode()?this.createRange(this.m_active.indexes,this.m_active.indexes,t[0],t[0]):this.createRange(i[0],i[0],t[0],t[0]),this.m_selectionFrontier=this.m_active.indexes,n.push(m);this.m_moveActive=!1}},it.prototype._handleModelInsertEvent=function(e,t){var i=this._isInViewport(e);if(i===it.INSIDE||i===it.AFTER&&e.row===this.m_endRow+1)null!=t.row&&(this._databodyEmpty()?(this.empty(),this.refresh(this.m_root)):(this._modifyAxisCellContextIndex("row",e.row,this.m_endRow-e.row+1,1),this._refreshDatabodyMap(),this.fetchHeaders("row",e.row,this.m_rowHeader,this.m_rowEndHeader,1,{success:this._handleHeaderInsertsFetchSuccess}),this.fetchCells(this.m_databody,e.row,this.m_startCol,1,this.m_endCol-this.m_startCol+1,{success:this._handleCellInsertsFetchSuccess})));else{if(i===it.BEFORE){this._modifyAxisCellContextIndex("row",0,this.m_endRow+1,1),this._refreshDatabodyMap(),this.m_startRow+=1,this.m_startRowHeader+=1,this.m_endRow+=1,this.m_endRowHeader+=1,this.m_startRowPixel+=this.m_avgRowHeight,this.m_startRowHeaderPixel+=this.m_avgRowHeight,this.m_endRowPixel+=this.m_avgRowHeight,this.m_endRowHeaderPixel+=this.m_avgRowHeight;var n=this.m_databody.firstChild.firstChild;null!=n&&this.pushRowsDown(n,this.m_avgRowHeight);var o=this.m_rowHeader.firstChild.firstChild;null!=o&&this.pushRowsDown(o,this.m_avgRowHeight);var s=this.m_rowEndHeader.firstChild.firstChild;null!=s&&this.pushRowsDown(s,this.m_avgRowHeight)}this.scrollToIndex(e)}},it.prototype._handleCellInsertsFetchSuccess=function(e,t){this.m_initialized=!1,this.handleCellsFetchSuccess(e,t,this.m_endRow>=t[0].start);var i=t[0].start;this._scrollRowIntoViewport(i),this._isHighWatermarkScrolling()||this._cleanupViewport("top"),this.updateRowBanding(),this.m_stopRowFetch=!1,-1!==this.m_endRowHeader&&(this.m_stopRowHeaderFetch=!1),-1!==this.m_endRowEndHeader&&(this.m_stopRowEndHeaderFetch=!1),this.fillViewport()},it.prototype._handleHeaderInsertsFetchSuccess=function(e,t,i){this.m_resizeRequired=!0,this.handleHeadersFetchSuccess(e,t,i,this.m_endRowHeader>=t.start)},it.prototype._scrollRowIntoViewport=function(e){var t=this._getAxisCellsByIndex(e,"row");if(null!=t){var i=this._getViewportTop(),n=this._getViewportBottom(),o=this.getElementDir(t[0],"top"),s=i-o;s>0?this.scrollDelta(0,s):(s=n-o)<0&&this.scrollDelta(0,s)}},it.prototype._handleModelInsertRangeEvent=function(e,t,i){var n,o,s,r,a,l,u,d,h=this._databodyEmpty(),c=e.getStart("row"),p=e.getCount("row"),_=e.getStart("column"),m=e.getCount("column");if(!(c>this.m_endRow+1))if(h)this.empty(),this.refresh(this.m_root);else if(this.m_utils.supportsTransitions()){if(null!=t){n=document.createDocumentFragment();var g=t.getCount();for(r=0,o=0,l=this.getMappedStyle("headercell")+" "+this.getMappedStyle("rowheadercell"),u=this.m_options.getRenderer("row");g-o>0;)s=c+o,o+=(a=this.buildLevelHeaders(n,s,0,0,this.m_startRowPixel+r,!0,c!==this.m_endRowHeader+1,u,t,"row",l,this.m_rowHeaderLevelCount)).count,r+=a.totalHeaderDimension}if(null!=i){d=document.createDocumentFragment();var f=i.getCount();for(r=0,o=0,l=this.getMappedStyle("endheadercell")+" "+this.getMappedStyle("rowendheadercell"),u=this.m_options.getRenderer("rowEnd");f-o>0;)s=c+o,o+=(a=this.buildLevelHeaders(d,s,0,0,this.m_startRowPixel+r,!0,c!==this.m_endRowEndHeader+1,u,i,"rowEnd",l,this.m_rowEndHeaderLevelCount)).count,r+=a.totalHeaderDimension}var v=document.createDocumentFragment();if(a=this._addCellsToFragment(v,e,c,this.m_startRowPixel,_,this.m_startColPixel),!(0!==v.childNodes.length||null!=n&&0!==n.childNodes.length||null!=d&&0!==d.childNodes.length))return;this._insertRowsWithAnimation(v,n,d,c,e.getCount("row"),a.totalRowHeight)}else{var y={axis:"row",start:c,count:p},b={axis:"column",start:_,count:m};if(null!=t){var C={axis:"row",header:this.m_rowHeader,endHeader:this.m_rowEndHeader,start:c,count:t.getCount()};this.m_fetching.row=C,this._handleHeaderInsertsFetchSuccess(t,C,i)}this._modifyAxisCellContextIndex("row",c,this.m_endRow-c+1,p),this._refreshDatabodyMap(),this._handleCellInsertsFetchSuccess(e,[y,b])}},it.prototype._handleModelUpdateEvent=function(e,t,i){if(this._isInViewport(e)===it.INSIDE)if(null!=i){var n=this.m_options.getRenderer("cell"),o=this.m_options.getColumnBandingInterval();this._updateCellsInRow(i,i.getStart("row"),n,this.m_startCol,o)}else-1!==this.m_endRowHeader&&this.fetchHeaders("row",e.row,this.m_rowHeader,this.m_rowEndHeader,1,{success:this._handleHeaderUpdatesFetchSuccess,error:this.handleHeadersFetchError}),this.fetchCells(this.m_databody,e.row,this.m_startCol,1,this.m_endCol-this.m_startCol+1,{success:this._handleCellUpdatesFetchSuccess,error:this.handleCellsFetchError})},it.prototype._handleHeaderUpdatesFetchSuccess=function(e,t,i){var n=t.axis;this.m_fetching[n]=!1;var o=t.start;this._replaceHeaders(this.buildRowHeaders.bind(this),e,this.m_rowHeader,o,this.m_startRowHeader),this._replaceHeaders(this.buildRowEndHeaders.bind(this),i,this.m_rowEndHeader,o,this.m_startRowEndHeader);var s=this.m_rowHeader.firstChild.childNodes[o-this.m_startRowHeader];null==this.m_active||"header"!==this.m_active.type||"row"!==this.m_active.axis&&"rowEnd"!==this.m_active.axis||this._getKey(s,"row")!==this.m_active.key||this._highlightActive(),this._signalTaskEnd()},it.prototype._replaceHeaders=function(e,t,i,n,o){if(null!=t){var s=e(i,t,n,1,!0,!0),r=i.firstChild,a=r.childNodes[n-o];r.replaceChild(s,a)}},it.prototype._handleCellUpdatesFetchSuccess=function(e,t){this.m_fetching.cells=!1;var i=t[0].start,n=this.m_options.getRenderer("cell"),o=this.m_options.getColumnBandingInterval();this._updateCellsInRow(e,i,n,this.m_startCol,o),this._signalTaskEnd()},it.prototype._getUpdateAnimation=function(){return it.UPDATE_ANIMATION_SLIDE_INOUT},it.prototype._getUpdateAnimationDuration=function(){return it.UPDATE_ANIMATION_DURATION},it.prototype._updateCellsInRow=function(e,t,i,n,o){var s,r=this._getUpdateAnimationDuration(),a=this._getAxisCellsByIndex(t,"row"),l=this.getElementDir(a[0],"top");if(0!==r&&this.m_utils.supportsTransitions()){var u=this;u._signalTaskStart(),this._removeFromArray(a),s=document.createDocumentFragment(),this._addCellsToFragment(s,e,t,l,n,this.m_startColPixel),a=s.childNodes;for(var d=this.getElementWidth(this.m_databody),h=0;h<a.length;h++)this.addTransformMoveStyle(a[h],0,0,"linear",d,0,0);this._populateDatabody(this.m_databody.firstChild,s),a=this._getAxisCellsByIndex(t,"row"),this.hideStatusText();this._onTransitionEnd(a[a.length-1],function(){for(var e=0;e<a.length;e++)u.removeTransformMoveStyle(a[e]);u._isSelectionEnabled()&&u.applySelection(),u._highlightActive(),u._signalTaskEnd(),u._runModelEventQueue()},r),setTimeout(function(){for(var e=0;e<a.length;e++)u.addTransformMoveStyle(a[e],r+"ms",0,"linear",0,0,0)},0)}else this._removeFromArray(a),s=document.createDocumentFragment(),this._addCellsToFragment(s,e,t,l,n,this.m_startColPixel),this._populateDatabody(this.m_databody.firstChild,s),this._isSelectionEnabled()&&this.applySelection(),this._highlightActive(),this.hideStatusText()},it.prototype._handleModelDeleteEvent=function(e,t,i){var n,o,s,r;Array.isArray(t)||(t=new Array(t),e=new Array(e));for(var a=0,l=0,u=0,d=0,h=0,c=0;c<t.length;c++){var p=t[c],_=e[c];if(null!=p.row){var m=0,g=p.row,f=this._isInViewport(_);f===it.BEFORE?(this._modifyAxisCellContextIndex("row",this.m_startRow,this.m_endRow-this.m_startRow+1,-1),d+=1,a+=this.m_avgRowHeight,this.m_startRowPixel-=this.m_avgRowHeight,this.m_endRowPixel-=this.m_avgRowHeight,-1!==this.m_endRowHeader&&(this.m_startRowHeaderPixel-=this.m_avgRowHeight,this.m_endRowHeaderPixel-=this.m_avgRowHeight),null!=(r=this._getAxisCellsByKey(g,"row"))&&this.pushRowsUp(this.m_startRow,this.m_avgRowHeight),null!=(o=this.m_rowHeader.firstChild.firstChild)&&this.pushRowHeadersUp(o,this.m_avgRowHeight),null!=(s=this.m_rowEndHeader.firstChild.firstChild)&&this.pushRowHeadersUp(s,this.m_avgRowHeight)):f===it.INSIDE?(h+=1,null!=(r=this._getAxisCellsByKey(g,"row"))&&(m=this.calculateRowHeight(r[0]),_=r[0][this.getResources().getMappedAttribute("context")].indexes.row,this._modifyAxisCellContextIndex("row",_+1,this.m_endRow-_,-1),this._removeFromArray(r),this.pushRowsUp(_,m),this.m_endRowPixel-=m),null!=(o=this._findHeaderByKey(g,this.m_rowHeader,this.getMappedStyle("rowheadercell")))&&(m=this.calculateRowHeaderHeight(o),n=o.nextSibling,this._remove(o),this.pushRowHeadersUp(n,m),this.m_endRowHeaderPixel-=m),null!=(s=this._findHeaderByKey(g,this.m_rowEndHeader,this.getMappedStyle("rowendheadercell")))&&(m=this.calculateRowHeaderHeight(s),n=s.nextSibling,this._remove(s),this.pushRowHeadersUp(n,m),this.m_endRowEndHeaderPixel-=m),l+=m):"scroll"===this.m_options.getScrollPolicy()&&(u+=this.m_avgRowHeight)}}this._refreshDatabodyMap(),this.m_startRow-=d,this.m_endRow=this.m_endRow-d-h,-1!==this.m_endRowHeader&&(this.m_startRowHeader-=d,this.m_endRowHeader=this.m_endRowHeader-d-h),-1!==this.m_endRowEndHeader&&(this.m_startRowEndHeader-=d,this.m_endRowEndHeader=this.m_endRowEndHeader-d-h);var v=a+l+u,y=this.m_databody.firstChild,b=this.getElementHeight(y)-v;this.setElementHeight(y,b),this.resizeGrid(),i||!0===this.m_moveActive||(this.m_resizeRequired=!0,this.m_stopRowFetch=!1,-1!==this.m_endRowHeader&&(this.m_stopRowHeaderFetch=!1),-1!==this.m_endRowEndHeader&&(this.m_stopRowEndHeaderFetch=!1),this.fillViewport()),this.updateRowBanding()},it.prototype._handleModelDeleteEventWithAnimation=function(e){this._collapseRowsWithAnimation(e)},it.prototype._collapseRowsWithAnimation=function(e){var t,i,n,o,s,r,a,l;if(0!==e.length){var u=this;u._signalTaskStart();var d=this.m_processingEventQueue?1:it.COLLAPSE_ANIMATION_DURATION,h=[],c=0,p=-1!==this.m_endRowHeader,_=-1!==this.m_endRowEndHeader,m=this.m_databody.firstChild,g=this._getIndex(this._getAxisCellsByKey(e[0].row,"row")[0],"row")-1;for(i=g;i>=this.m_startRow&&(t=this._getAxisCellsByIndex(i,"row"),!(this.getElementDir(t[0],"top")+this.getElementHeight(t[0])<this.m_currentScrollTop));i--)for(n=0;n<t.length;n++)this.changeStyleProperty(t[n],this.getCssSupport("z-index"),10);if(p)for(s=[],o=this._findHeaderByKey(e[0].row,this.m_rowHeader,this.getMappedStyle("rowheadercell")).previousSibling;o&&!(this.getElementDir(o,"top")+this.getElementHeight(o)<this.m_currentScrollTop);)this.changeStyleProperty(o,this.getCssSupport("z-index"),10),o=o.previousSibling;if(_)for(r=[],o=this._findHeaderByKey(e[0].row,this.m_rowEndHeader,this.getMappedStyle("rowendheadercell")).previousSibling;o&&!(this.getElementDir(o,"top")+this.getElementHeight(o)<this.m_currentScrollTop);)this.changeStyleProperty(o,this.getCssSupport("z-index"),10),o=o.previousSibling;for(i=0;i<e.length;i++){var f=e[i].row;if(null!=(t=this._getAxisCellsByKey(f,"row")))for(h.push(t),c+=this.getElementHeight(t[0]),n=0;n<t.length;n++)this.setElementDir(t[n],this.getElementDir(t[n],"top")-c,"top"),this.addTransformMoveStyle(t[n],0,0,"linear",0,c,0);p&&null!=(a=this._findHeaderByKey(f,this.m_rowHeader,this.getMappedStyle("rowheadercell")))&&(s.push(a),this.setElementDir(a,this.getElementDir(a,"top")-c,"top"),this.addTransformMoveStyle(a,0,0,"linear",0,c,0)),_&&null!=(l=this._findHeaderByKey(f,this.m_rowEndHeader,this.getMappedStyle("rowendheadercell")))&&(r.push(l),this.setElementDir(l,this.getElementDir(l,"top")-c,"top"),this.addTransformMoveStyle(l,0,0,"linear",0,c,0))}for(i=g+e.length+1;i<=this.m_endRow;i++){for(t=this._getAxisCellsByIndex(i,"row"),n=0;n<t.length;n++)this.setElementDir(t[n],this.getElementDir(t[n],"top")-c,"top"),this.addTransformMoveStyle(t[n],0,0,"linear",0,c,0);p&&(a=a.nextSibling,this.setElementDir(a,this.getElementDir(a,"top")-c,"top"),this.addTransformMoveStyle(a,0,0,"linear",0,c,0)),_&&(l=l.nextSibling,this.setElementDir(l,this.getElementDir(l,"top")-c,"top"),this.addTransformMoveStyle(l,0,0,"linear",0,c,0))}var v=this._getCellByIndex(this.createIndex(this.m_endRow,this.m_endCol));u._onTransitionEnd(v,function(){u._modifyAxisCellContextIndex("row",g+e.length+1,u.m_endRow-(g+e.length),-1*e.length);for(var t=0;t<h.length;t++){for(var i=0;i<h[t].length;i++)u._remove(h[t][i]);p&&u._remove(s[t]),_&&u._remove(r[t])}u._refreshDatabodyMap(),u.m_endRow-=h.length,u.m_endRowPixel-=c,u.m_stopRowFetch=!1,p&&(u.m_endRowHeader-=s.length,u.m_endRowHeaderPixel-=c,u.m_stopRowHeaderFetch=!1),_&&(u.m_endRowEndHeader-=s.length,u.m_endRowEndHeaderPixel-=c,u.m_stopRowEndHeaderFetch=!1),u.setElementHeight(m,u.m_endRowPixel-u.m_startRowPixel),u.resizeGrid(),u.updateRowBanding(),u.fillViewport(),u._handleAnimationEnd()},d),this.m_animating=!0,setTimeout(function(){for(i=g+1;i<=u.m_endRow;i++){for(t=u._getAxisCellsByIndex(i,"row"),n=0;n<t.length;n++)u.addTransformMoveStyle(t[n],d+"ms",0,"ease-out",0,0,0);p&&(a=u._getHeaderByIndex(i,0,u.m_rowHeader,u.m_rowHeaderLevelCount,u.m_startRowHeader),u.addTransformMoveStyle(a,d+"ms",0,"ease-out",0,0,0)),_&&(l=u._getHeaderByIndex(i,0,u.m_rowEndHeader,u.m_rowEndHeaderLevelCount,u.m_startRowEndHeader),u.addTransformMoveStyle(l,d+"ms",0,"ease-out",0,0,0))}},0)}},it.prototype._handleAnimationEnd=function(){var e,t=this.m_databody.firstChild,i=this.m_rowHeader.firstChild,n=this.m_rowEndHeader.firstChild;for(e=0;e<t.childNodes.length;e++)this.removeTransformMoveStyle(t.childNodes[e]),this.changeStyleProperty(t.childNodes[e],this.getCssSupport("z-index"),null,"remove");if(-1!==this.m_endRowHeader)for(e=0;e<i.childNodes.length;e++)this.removeTransformMoveStyle(i.childNodes[e]),this.changeStyleProperty(i.childNodes[e],this.getCssSupport("z-index"),null,"remove");if(-1!==this.m_endRowEndHeader)for(e=0;e<n.childNodes.length;e++)this.removeTransformMoveStyle(n.childNodes[e]),this.changeStyleProperty(n.childNodes[e],this.getCssSupport("z-index"),null,"remove");this.m_animating=!1,this._runModelEventQueue(),this._signalTaskEnd()},it.prototype._getCellOrHeaderByKey=function(e,t){var i=null,n=this._getAxisCellsByKey(e,t,!0);return null!=n&&n.length>0&&(i=n[0]),null==i&&("row"===t?null==(i=this._findHeaderByKey(e,this.m_rowHeader,this.getMappedStyle("rowheadercell")))&&(i=this._findHeaderByKey(e,this.m_rowEndHeader,this.getMappedStyle("rowendheadercell"))):"column"===t&&null==(i=this._findHeaderByKey(e,this.m_colHeader,this.getMappedStyle("colheadercell")))&&(i=this._findHeaderByKey(e,this.m_colEndHeader,this.getMappedStyle("colendheadercell")))),i},it.prototype._findHeaderByKey=function(e,t,i){if(null==t)return null;var n;n=t.getElementsByClassName?t.getElementsByClassName(i):t.childNodes;for(var o=0;o<n.length;o++){var s=n[o],r=this._getKey(s);if(this._shallowThenDeepCompare(r,e))return s}return null},it.prototype._handleModelRefreshEvent=function(){var e=this.getVisibility();this.m_updateScrollPostionOnRefreshCallback(),e===it.VISIBILITY_STATE_VISIBLE?(this.empty(),null!=this.m_root.offsetParent?this.refresh(this.m_root):this.setVisibility(it.VISIBILITY_STATE_REFRESH)):e===it.VISIBILITY_STATE_HIDDEN&&(this.empty(),this.setVisibility(it.VISIBILITY_STATE_REFRESH))},it.prototype._handleModelSyncEvent=function(e){var t=e.pageSize;this.m_fetching={},this.m_startRow=0,this.m_endRow=-1,this.m_startRowHeader=0,this.m_endRowHeader=-1,this.m_startRowEndHeader=0,this.m_endRowEndHeader=-1,this.m_startRowPixel=0,this.m_endRowPixel=0,this.m_startRowHeaderPixel=0,this.m_endRowHeaderPixel=0,this.m_startRowEndHeaderPixel=0,this.m_endRowEndHeaderPixel=0,this.m_startCol=0,this.m_endCol=-1,this.m_startColHeader=0,this.m_endColHeader=-1,this.m_startColEndHeader=0,this.m_endColEndHeader=-1,this.m_startColPixel=0,this.m_endColPixel=0,this.m_startColHeaderPixel=0,this.m_endColHeaderPixel=0,this.m_startColEndHeaderPixel=0,this.m_endColEndHeaderPixel=0,this.m_rowHeaderLevelCount=void 0,this.m_columnHeaderLevelCount=void 0,this.m_rowEndHeaderLevelCount=void 0,this.m_columnEndHeaderLevelCount=void 0,this.m_avgRowHeight=void 0,this.m_avgColWidth=void 0,this.m_isEstimateRowCount=void 0,this.m_isEstimateColumnCount=void 0,this.m_stopRowFetch=!1,this.m_stopRowHeaderFetch=!1,this.m_stopRowEndHeaderFetch=!1,this.m_stopColumnFetch=!1,this.m_stopColumnHeaderFetch=!1,this.m_stopColumnEndHeaderFetch=!1,this._clearScrollPositionKeys(),this.m_selection=null,this.m_active=null,this.m_prevActive=null,this.m_trueIndex={},null!=this.m_empty&&(this.m_root.removeChild(this.m_empty),this.m_empty=null),this._showHeader(this.m_rowHeader),this._showHeader(this.m_colHeader),this._showHeader(this.m_rowEndHeader),this._showHeader(this.m_colEndHeader),this.m_initialized=!1,this.fetchHeaders("row",0,this.m_rowHeader,this.m_rowEndHeader,t,{success:function(e,t,i){this.handleRowHeadersFetchSuccessForLongScroll(e,t,i)}}),this.fetchHeaders("column",0,this.m_colHeader,this.m_colEndHeader,void 0,{success:function(e,t,i){this.handleColumnHeadersFetchSuccessForLongScroll(e,t,i)}}),this.fetchCells(this.m_databody,0,0,t,null,{success:function(e,t){this.handleCellsFetchSuccessForLongScroll(e,t)}})},it.prototype._setActiveByIndex=function(e,t,i,n,o){return this._setActive(this._getCellByIndex(e),{type:"cell",indexes:e},t,i,n,o)},it.prototype._updateActive=function(e,t,i){var n;if(null==e)this._setActive(null,null,null,!0,!1,i);else if(null!=e.keys)n=this._getCellByKeys(e.keys);else if(null!=e.indexes)n=this._getCellByIndex(e.indexes);else if(null!=e.axis){var o=null==e.level?0:e.level;"column"===e.axis?null!=e.key?n=this._findHeaderByKey(e.key,this.m_colHeader,this.getMappedStyle("colheadercell")):null!=e.index&&(n=this._getHeaderByIndex(e.index,o,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader)):"row"===e.axis?null!=e.key?n=this._findHeaderByKey(e.key,this.m_rowHeader,this.getMappedStyle("rowheadercell")):null!=e.index&&(n=this._getHeaderByIndex(e.index,o,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader)):"columnEnd"===e.axis?null!=e.key?n=this._findHeaderByKey(e.key,this.m_colEndHeader,this.getMappedStyle("colendheadercell")):null!=e.index&&(n=this._getHeaderByIndex(e.index,o,this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader)):"rowEnd"===e.axis&&(null!=e.key?n=this._findHeaderByKey(e.key,this.m_rowEndHeader,this.getMappedStyle("rowendheadercell")):null!=e.index&&(n=this._getHeaderByIndex(e.index,o,this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader)))}null!=n&&(t||(this.m_shouldFocus=!1),this._setActive(n,e,null,!0,!1,i))},it.prototype._setActive=function(e,t,i,n,o,s){var r;if(null==t||s||this._scrollToActive(t),null!=e)if(r=this._createActiveObject(e),this._compareActive(r,this.m_active)){if(o||this._fireBeforeCurrentCellEvent(r,this.m_active,i))return this.m_prevActive=this.m_active,this.m_active=r,i&&"mousedown"===i.type&&(this.m_trueIndex=null),n&&this._isSelectionEnabled()&&this._clearSelection(i),this._unhighlightActiveObject(this.m_prevActive),this._highlightActiveObject(this.m_active,this.m_prevActive),this._manageMoveCursor(),this._isGridEditable()&&("cell"===r.type&&this._setEditableClone(e),this._updateEdgeCellBorders("")),o||this._fireCurrentCellEvent(r,i),!0}else this._highlightActive();else if(!this.m_scrollIndexAfterFetch&&!this.m_scrollHeaderAfterFetch)return(o||this._fireBeforeCurrentCellEvent(r,this.m_active,i))&&(this.m_prevActive=this.m_active,this.m_active=null,this._unhighlightActiveObject(this.m_prevActive),o||this._fireCurrentCellEvent(r,i)),!0;return!1},it.prototype._createActiveObject=function(e){var t=e[this.getResources().getMappedAttribute("context")];return this.m_utils.containsCSSClassName(e,this.getMappedStyle("headercell"))||this.m_utils.containsCSSClassName(e,this.getMappedStyle("endheadercell"))?{type:"header",axis:t.axis,index:this.getHeaderCellIndex(e),key:t.key,level:t.level}:this.m_utils.containsCSSClassName(e,this.getMappedStyle("headerlabel"))?{type:"label",axis:t.axis,level:t.level}:{type:"cell",indexes:{row:t.indexes.row,column:t.indexes.column},keys:{row:t.keys.row,column:t.keys.column},extents:{row:t.extents.row,column:t.extents.column}}},it.prototype._getActiveElement=function(){return this._getElementFromActiveObject(this.m_active)},it.prototype._getElementFromActiveObject=function(e){if(null!=e){if("header"!==e.type)return"label"===e.type?this._getLabel(e.axis,e.level):this._getCellByIndex(e.indexes);if("row"===e.axis)return this._findHeaderByKey(e.key,this.m_rowHeader,this.getMappedStyle("rowheadercell"));if("column"===e.axis)return this._findHeaderByKey(e.key,this.m_colHeader,this.getMappedStyle("colheadercell"));if("rowEnd"===e.axis)return this._findHeaderByKey(e.key,this.m_rowEndHeader,this.getMappedStyle("rowendheadercell"));if("columnEnd"===e.axis)return this._findHeaderByKey(e.key,this.m_colEndHeader,this.getMappedStyle("colendheadercell"))}return null},it.prototype._compareActive=function(e,t){if(null==e&&null==t)return!1;if(null==e&&null!=t||null!=e&&null==t)return!0;if(e.type!==t.type)return!0;if("header"===e.type){if(e.index!==t.index||e.key!==t.key||e.axis!==t.axis||e.level!==t.level)return!0}else if("label"===e.type){if(e.axis!==t.axis||e.level!==t.level)return!0}else if(e.indexes.row!==t.indexes.row||e.indexes.column!==t.indexes.column||e.keys.row!==t.keys.row||e.keys.column!==t.keys.column)return!0;return!1},it.prototype._fireBeforeCurrentCellEvent=function(e,t,i){var n={event:i,ui:{currentCell:e,previousCurrentCell:t}};return this.fireEvent("beforeCurrentCell",n)},it.prototype._fireCurrentCellEvent=function(e,t){var i={event:t,ui:e};return this.fireEvent("currentCell",i)},it.prototype._isDatabodyCellActive=function(){return null!=this.m_active&&"cell"===this.m_active.type},it.prototype._updateActiveContext=function(e,t){var i;if("header"===e.type){var n=e.axis,o=e.index,s=e.level,r={};"row"===e.axis?(this.m_rowHeaderLevelCount>1&&(null!=t&&s===t.level&&n===t.axis||(r.level=s)),null!=t&&o===t.index&&n===t.axis||(r.rowHeader=o)):"column"===n?(this.m_columnHeaderLevelCount>1&&(null!=t&&s===t.level&&n===t.axis||(r.level=s)),null!=t&&o===t.index&&n===t.axis||(r.columnHeader=o)):"rowEnd"===e.axis?(this.m_rowEndHeaderLevelCount>1&&(null!=t&&s===t.level&&n===t.axis||(r.level=s)),null!=t&&o===t.index&&n===t.axis||(r.rowEndHeader=o)):"columnEnd"===n&&(this.m_columnEndHeaderLevelCount>1&&(null!=t&&s===t.level&&n===t.axis||(r.level=s)),null!=t&&o===t.index&&n===t.axis||(r.columnEndHeader=o)),this._updateContextInfo(r,i)}else"cell"===e.type&&(null==t||"cell"!==t.type||null==e||this.m_externalFocus||(e.indexes.row===t.indexes.row?i="row":e.indexes.column===t.indexes.column&&(i="column")),this._updateContextInfo(e,i))},it.prototype.handleDatabodyClickActive=function(e){var t=e.target,i=this.findCell(t);null!=i&&this._setActive(i,this._createActiveObject(i),e)},it.prototype.handleHeaderClickActive=function(e){var t=e.target,i=this.findHeader(t);null!=i&&(this._clearSelection(e),this._setActive(i,this._createActiveObject(i),e))},it.prototype._scrollToActive=function(e){"header"===e.type?this.scrollToHeader(e):"cell"===e.type&&this.scrollToIndex(e.indexes)},it.prototype._getCellByKeys=function(e){if(null==e||null==e.row||null==e.column||null==this.m_databody||null==this.m_databody.firstChild)return null;for(var t=this.m_databody.firstChild.getElementsByClassName(this.getMappedStyle("cell")),i=0;i<t.length;i++){var n=t[i],o=this._getKey(n,"row");if(this._shallowThenDeepCompare(o,e.row)){var s=this._getKey(n,"column");if(this._shallowThenDeepCompare(s,e.column))return n}}return null},it.prototype._shallowThenDeepCompare=function(e,t){return e===t||this._compareValuesCallback(e,t)},it.prototype.getCellIndexes=function(e){var t=e[this.getResources().getMappedAttribute("context")];return this.createIndex(t.indexes.row,t.indexes.column)},it.prototype.getCellExtents=function(e){var t=e[this.getResources().getMappedAttribute("context")];return this.createIndex(t.extents.row,t.extents.column)},it.prototype.getCellEndIndexes=function(e){var t=this.getCellIndexes(e),i=this.getCellExtents(e);return this.createIndex(t.row+(i.row-1),t.column+(i.column-1))},it.prototype._getIndex=function(e,t){if(null!=e){if(null==t||!this.m_utils.containsCSSClassName(e,this.getMappedStyle("cell")))return this.getHeaderCellIndex(e);var i=e[this.getResources().getMappedAttribute("context")];if("row"===t)return i.indexes.row;if("column"===t)return i.indexes.column}return null},it.prototype._getExtent=function(e,t){if(null!=e){if(null==t||!this.m_utils.containsCSSClassName(e,this.getMappedStyle("cell")))return parseInt(this._getAttribute(e,"extent",!0),10);var i=e[this.getResources().getMappedAttribute("context")];if("row"===t)return i.extents.row;if("column"===t)return i.extents.column}return null},it.prototype.getHeaderCellIndex=function(e){var t,i,n;switch(this.getHeaderCellAxis(e)){case"column":t=this.m_columnHeaderLevelCount,i=this.m_startColHeader;break;case"row":t=this.m_rowHeaderLevelCount,i=this.m_startRowHeader;break;case"columnEnd":t=this.m_columnEndHeaderLevelCount,i=this.m_startColEndHeader;break;case"rowEnd":t=this.m_rowEndHeaderLevelCount,i=this.m_startRowEndHeader;break;default:return-1}if(t>1){if(n=this._getAttribute(e.parentNode,"start",!0),e===e.parentNode.firstChild)return n;n-=1}else n=i;for(;e.previousSibling;)n+=1,e=e.previousSibling;return n},it.prototype.getHeaderCellAxis=function(e){return this.m_utils.containsCSSClassName(e,this.getMappedStyle("colheadercell"))?"column":this.m_utils.containsCSSClassName(e,this.getMappedStyle("rowheadercell"))?"row":this.m_utils.containsCSSClassName(e,this.getMappedStyle("rowendheadercell"))?"rowEnd":this.m_utils.containsCSSClassName(e,this.getMappedStyle("colendheadercell"))?"columnEnd":null},it.prototype.getHeaderCellLevel=function(e){if(this.m_utils.containsCSSClassName(e,this.getMappedStyle("colheadercell"))){if(1===this.m_columnHeaderLevelCount)return 0}else if(this.m_utils.containsCSSClassName(e,this.getMappedStyle("rowheadercell"))){if(1===this.m_rowHeaderLevelCount)return 0}else if(this.m_utils.containsCSSClassName(e,this.getMappedStyle("colendheadercell"))){if(1===this.m_columnEndHeaderLevelCount)return 0}else if(this.m_utils.containsCSSClassName(e,this.getMappedStyle("rowendheadercell"))&&1===this.m_rowEndHeaderLevelCount)return 0;var t=this._getAttribute(e.parentNode,"level",!0);return e===e.parentNode.firstChild?t:t+this.getHeaderCellDepth(e.parentNode.firstChild)},it.prototype.getHeaderCellDepth=function(e){return this._getAttribute(e,"depth",!0)},it.prototype.findCellOrHeader=function(e){var t=this.findCell(e);return null==t&&(t=this.findHeader(e)),t},it.prototype.findCell=function(e){return this.find(e,"cell")},it.prototype.findLabel=function(e){return this.find(e,"headerlabel")},it.prototype.find=function(e,t,i){return null==e||e===this.getRootElement()?null:(null==i&&(i=this.getMappedStyle(t)),null==i?null:this.m_utils.containsCSSClassName(e,i)?e:this.find(e.parentNode,t,i))},it.prototype._highlightActive=function(e){this._highlightActiveObject(this.m_active,this.m_prevActive,e)},it.prototype._unhighlightActive=function(e){this._unhighlightActiveObject(this.m_active,e)},it.prototype._highlightActiveObject=function(e,t,i){if(null==i&&this.m_utils.shouldOffsetOutline()&&(i=["offsetOutline"]),null!=e){var n=this._getElementFromActiveObject(e);null!=n&&(this.m_focusInHandler(n),null!=i&&this._highlightElement(n,i),this._setAriaProperties(e,t,n))}},it.prototype._unhighlightActiveObject=function(e,t){if(null==t&&this.m_utils.shouldOffsetOutline()&&(t=["offsetOutline"]),null!=e){var i=this._getElementFromActiveObject(e);null!=i&&(this.m_focusOutHandler(i),null!=t&&this._unhighlightElement(i,t),this._unsetAriaProperties(i))}},it.prototype._highlightCellsAlongAxis=function(e,t,i,n,o){for(var s="key"===i?this._getAxisCellsByKey(e,t):this._getAxisCellsByIndex(e,t),r=0;r<s.length;r++)"add"===n?this._highlightElement(s[r],o):this._unhighlightElement(s[r],o)},it.prototype._highlightElement=function(e,t){for(var i=0;i<t.length;i++){var n=this.getMappedStyle(t[i]);this.m_utils.addCSSClassName(e,n)}},it.prototype._unhighlightElement=function(e,t){for(var i=0;i<t.length;i++){var n=this.getMappedStyle(t[i]);this.m_utils.removeCSSClassName(e,n)}},it.prototype._setAriaProperties=function(e,t,i){var n=this.getLabelledBy(e,t,i);this._updateActiveContext(e,t),i.setAttribute("tabIndex",0),i.setAttribute("aria-labelledby",n),null!=this.m_cellToFocus&&this.m_cellToFocus===i||!1===this.m_shouldFocus||i.focus(),this.m_shouldFocus=null},it.prototype._unsetAriaProperties=function(e){null!=e&&(e.setAttribute("tabIndex",-1),e.removeAttribute("aria-labelledby"))},it.prototype.getLabelledBy=function(e,t,i){var n,o,s,r,a="";if("header"===e.type){null==t||"header"!==t.type||this.m_externalFocus||("row"===t.axis?n=this._getHeaderByIndex(t.index,t.level,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader):"column"===t.axis?n=this._getHeaderByIndex(t.index,t.level,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader):"rowEnd"===t.axis?n=this._getHeaderByIndex(t.index,t.level,this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader):"columnEnd"===t.axis&&(n=this._getHeaderByIndex(t.index,t.level,this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader))),a=[this.createSubId("context"),this._getHeaderAndParentIds(i,n)].join(" ");var l=i.getAttribute(this.getResources().getMappedAttribute("sortDir"));"ascending"===l?(o="accessibleSortAscending",a=a+" "+this.createSubId("state")):"descending"===l&&(o="accessibleSortDescending",a=a+" "+this.createSubId("state")),!0===this.m_externalFocus&&(a=[this.createSubId("summary"),a].join(" "),this.m_externalFocus=!1),null!=o&&this._updateStateInfo([{key:o,args:{id:""}}]),i.setAttribute("tabIndex",0)}else if("label"===e.type)a=[this.createSubId("context"),this._getActiveElement().id].join(" ");else{null!=t&&("header"===t.type?(s="row"===t.axis?t.index:null,r="column"===t.axis?t.index:null):"cell"===t.type&&(s=t.indexes.row,r=t.indexes.column));var u=this._getHeaderLabelledBy("row",this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader,this.m_endRowHeader,e.indexes.row,s,i),d=this._getHeaderLabelledBy("rowEnd",this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader,this.m_endRowEndHeader,e.indexes.row,s,i),h=this._getHeaderLabelledBy("column",this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader,this.m_endColHeader,e.indexes.column,r,i),c=this._getHeaderLabelledBy("columnEnd",this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader,this.m_endColEndHeader,e.indexes.column,r,i),p=e.extents.row,_=e.extents.column,m=[];p>1&&m.push({key:"accessibleRowSpanContext",args:{extent:p}}),_>1&&m.push({key:"accessibleColumnSpanContext",args:{extent:_}}),this._updateStateInfo(m),a=(a=[this.createSubId("context"),u,d,h,c,i.id,this.createSubId("state")].join(" ")).replace(/ +(?= )/g,""),this.m_externalFocus&&(a=[this.createSubId("summary"),a].join(" "),this.m_externalFocus=!1)}return a},it.prototype.getHeaderFromCell=function(e,t,i){var n,o,s,r,a,l;return"row"===t?null!=this.m_rowHeader&&(n=this._getIndex(e,"row"),o=this._getExtent(e,"row"),s=this.m_rowHeaderLevelCount-1,r=this.m_rowHeader,a=this.m_rowHeaderLevelCount,l=this.m_startRowHeader):"column"===t?null!=this.m_colHeader&&(n=this._getIndex(e,"column"),o=this._getExtent(e,"column"),s=this.m_columnHeaderLevelCount-1,r=this.m_colHeader,a=this.m_columnHeaderLevelCount,l=this.m_startColHeader):"rowEnd"===t?null!=this.m_rowEndHeader&&(n=this._getIndex(e,"row"),o=this._getExtent(e,"row"),s=this.m_rowEndHeaderLevelCount-1,r=this.m_rowEndHeader,a=this.m_rowEndHeaderLevelCount,l=this.m_startRowEndHeader):"columnEnd"===t&&null!=this.m_colEndHeader&&(n=this._getIndex(e,"column"),o=this._getExtent(e,"column"),s=this.m_columnEndHeaderLevelCount-1,r=this.m_colEndHeader,a=this.m_columnEndHeaderLevelCount,l=this.m_startColEndHeader),null!=n&&null!=s&&n>-1?(i&&(n+=o-1),this._getHeaderByIndex(n,s,r,a,l)):null},it.prototype.createRange=function(e,t,i,n){var o,s,r,a,l,u,d,h;return t&&(e.row<t.row||-1===t.row?(o=e.row,s=t.row,i&&(l=i.row,u=n.row)):(o=t.row,s=e.row,i&&(l=n.row,u=i.row)),isNaN(e.column)||isNaN(t.column)?(e={row:o},t={row:s},i&&(i={row:l,column:d},n={row:u,column:h})):(e.column<t.column||-1===t.column?(r=e.column,a=t.column,i&&(d=i.column,h=n.column)):(r=t.column,a=e.column,i&&(d=n.column,h=i.column)),e={row:o,column:r},t={row:s,column:a},i&&(i={row:l,column:d},n={row:u,column:h}))),i?{startIndex:e,endIndex:t,startKey:i,endKey:n}:{startIndex:e,endIndex:t}},it.prototype._createRangeWithKeys=function(e,t,i){this._keys(e,this._createRangeStartKeyCallback.bind(this,t,i))},it.prototype._createRangeStartKeyCallback=function(e,t,i,n){e===n?this._createRangeEndKeyCallback(i,n,t,i,n):e?this._keys(e,this._createRangeEndKeyCallback.bind(this,i,n,t)):t.call(this,{startIndex:n,endIndex:n,startKey:i,endKey:i})},it.prototype._createRangeEndKeyCallback=function(e,t,i,n,o){i.call(this,this.createRange(t,o,e,n))},it.prototype.getEndIndex=function(e){return null==e.endIndex?e.startIndex:e.endIndex},it.prototype.getElementsInRange=function(e,t,i,n,o){var s,r,a,l,u;null==t&&(t=this.m_startRow),null==i&&(i=this.m_endRow+1);var d=e.startIndex,h=this.getEndIndex(e),c=d.row,p=h.row;if(-1===p&&(p=Number.MAX_VALUE),i<c||p<t)return null;if(!isNaN(d.column)&&!isNaN(h.column)&&(s=d.column,-1===(r=h.column)&&(r=Number.MAX_VALUE),this.m_endCol+1<s||r<this.m_startCol))return null;var _=[];if(null==this.m_databody.firstChild)return null;if(c=Math.max(0,c),p=Math.min(this.m_endRow,p),isNaN(s)||isNaN(r))for(s=Math.max(0,this.m_startCol),r=Math.max(s,this.m_endCol),a=c;a<=p;a+=1)for(l=s;l<=r;l+=1)null!=(u=this._getCellByIndex(this.createIndex(a,l)))&&-1===_.indexOf(u)&&_.push(u);else for(s=Math.max(0,s),r=Math.min(this.m_endCol,r),a=c;a<=p;a+=1)for(l=s;l<=r;l+=1)null!=(u=this._getCellByIndex(this.createIndex(a,l)))&&-1===_.indexOf(u)&&_.push(u);return _},it.prototype.readCurrentContent=function(){var e,t;if(null==this.m_active)return!1;if("header"===this.m_active.type)e={},"row"===this.m_active.axis?(this.m_rowHeaderLevelCount>1&&(e.level=this.m_active.level),e.rowHeader=this.m_active.index):(this.m_columnHeaderLevelCount>1&&(e.level=this.m_active.level),e.columnHeader=this.m_active.index),t=this._getActiveElement();else if("cell"===this.m_active.type){if(e=this.m_active.indexes,this._isSelectionEnabled()&&this.isMultipleSelection()&&null!=this.m_selectionFrontier&&(e=this.m_selectionFrontier),null==e)return!1;var i=this.createRange(e),n=this.getElementsInRange(i);if(null==n||0===n.length)return!1;t=n[0]}else t=this._getActiveElement();this._updateActiveContext(this.m_active,this.m_prevActive),this.m_placeHolder.tabIndex=-1;var o=t.getAttribute("aria-labelledby");return this.m_placeHolder.setAttribute("aria-labelledby",o+" "+t.id),this.m_placeHolder===document.activeElement?t.focus():this.m_placeHolder.focus(),!0},it.prototype._enterActionableMode=function(e){return this._enableAllFocusableElements(e),this._setFocusToFirstFocusableElement(e)&&(this.m_focusOutHandler(e),this.setActionableMode(!0)),!1},it.prototype._exitActionableMode=function(){if(this.isActionableMode()){var e=this._getActiveElement();this.setActionableMode(!1),this._disableAllFocusableElements(e),this.m_focusInHandler(e)}},it.prototype._reRenderCell=function(e,t,i,n){var o=this.m_options.getRenderer("cell"),s=e[this.getResources().getMappedAttribute("context")];if(s.mode=t,this.m_utils.empty(e),this.m_utils.containsCSSClassName(e,i)?this.m_utils.removeCSSClassName(e,i):this.m_utils.addCSSClassName(e,i),n){for(;n.hasChildNodes();)e.appendChild(n.firstChild);delete this.m_editableClone}else this._renderContent(o,s,e,s.data)},it.prototype._setEditableClone=function(e){if(delete this.m_editableClone,null!=e){var t=e.cloneNode(!1);this._createUniqueId(t),t[this.getResources().getMappedAttribute("context")]=e[this.getResources().getMappedAttribute("context")],t[this.getResources().getMappedAttribute("context")].parentElement=t,this.m_root.appendChild(t),this._reRenderCell(t,"edit",this.getMappedStyle("cellEdit"),null),this.m_root.removeChild(t),t[this.getResources().getMappedAttribute("context")].parentElement=e,this.m_editableClone=t}},it.prototype.isNavigationKey=function(e){return this.isArrowKey(e)||e===it.keyCodes.HOME_KEY||e===it.keyCodes.END_KEY||e===it.keyCodes.PAGEUP_KEY||e===it.keyCodes.PAGEDOWN_KEY},it.prototype.isArrowKey=function(e){return e===it.keyCodes.UP_KEY||e===it.keyCodes.DOWN_KEY||e===it.keyCodes.LEFT_KEY||e===it.keyCodes.RIGHT_KEY},it.prototype.createIndex=function(e,t){if(null==e&&null==t)return null;var i={};return null!=e&&(i.row=e),null!=t&&(i.column=t),i},it.prototype.checkCorners=function(e,t,i){return"column"===this.m_selectionFrontier.axis&&this.m_columnHeaderLevelCount!==this.m_selectionFrontier.level||"row"===this.m_selectionFrontier.axis&&this.m_rowHeaderLevelCount!==this.m_selectionFrontier.level||"rowEnd"===this.m_selectionFrontier.axis&&this.m_rowEndHeaderLevelCount!==this.m_selectionFrontier.level||"columnEnd"===this.m_selectionFrontier.axis&&this.m_columnEndHeaderLevelCount!==this.m_selectionFrontier.level||(-1!==e.indexOf("row")?t===i.startIndex.row&&this.m_selectionFrontier.end===i.endIndex.row||t===i.endIndex.row&&this.m_selectionFrontier.end===i.startIndex.row:-1!==e.indexOf("column")&&(t===i.startIndex.column&&this.m_selectionFrontier.end===i.endIndex.column||t===i.endIndex.column&&this.m_selectionFrontier.end===i.startIndex.column))},it.prototype.handleLabelFocusChange=function(e,t,i,n){var o,s,r,a,l;if(!this.isFetchComplete())return!0;this.getResources().isRTLMode()&&(e===it.keyCodes.LEFT_KEY?e=it.keyCodes.RIGHT_KEY:e===it.keyCodes.RIGHT_KEY&&(e=it.keyCodes.LEFT_KEY));var u=this.m_active.axis,d=this.m_active.level;switch("column"===u?(r=this.m_colHeader,a=this.m_startColHeader,l=this.m_columnHeaderLevelCount):"row"===u&&(r=this.m_rowHeader,a=this.m_startRowHeader,l=this.m_rowHeaderLevelCount),"columnEnd"===u&&(e===it.keyCodes.DOWN_KEY?e=it.keyCodes.UP_KEY:e===it.keyCodes.UP_KEY&&(e=it.keyCodes.DOWN_KEY),r=this.m_colEndHeader,a=this.m_startColEndHeader,l=this.m_columnEndHeaderLevelCount),"rowEnd"===u&&(e===it.keyCodes.LEFT_KEY?e=it.keyCodes.RIGHT_KEY:e===it.keyCodes.RIGHT_KEY&&(e=it.keyCodes.LEFT_KEY),r=this.m_rowEndHeader,a=this.m_startRowEndHeader,l=this.m_rowEndHeaderLevelCount),e){case it.keyCodes.DOWN_KEY:"row"!==u&&"rowEnd"!==u||(o=this._getHeaderByIndex(a,d,r,l,a),this._setActive(o,{type:"header",index:a,level:d,axis:u},t)),"column"!==u&&"columnEnd"!==u||((o=this.m_headerLabels[u][d+1])?this._setActive(o,{type:"label",level:d+1,axis:u},t):"column"===u&&d===l-1&&this.m_headerLabels.row.length?(o=this.m_headerLabels.row[this.m_headerLabels.row.length-1],this._setActive(o,{type:"label",level:this.m_headerLabels.row.length-1,axis:"row"},t)):d===l-1&&(s="column"===u?this.m_startRowHeader:this.m_endRowHeader,(o=this._getHeaderByIndex(s,this.m_rowHeaderLevelCount-1,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader))&&this._setActive(o,{type:"header",index:s,level:d,axis:"row"},t)));break;case it.keyCodes.UP_KEY:"row"===u&&d===l-1&&this.m_headerLabels.column.length&&(o=this.m_headerLabels.column[this.m_headerLabels.column.length-1],this._setActive(o,{type:"label",level:this.m_headerLabels.column.length-1,axis:"column"},t)),"column"!==u&&"columnEnd"!==u||(o=this.m_headerLabels[u][d-1])&&this._setActive(o,{type:"label",level:d-1,axis:u},t);break;case it.keyCodes.RIGHT_KEY:"row"!==u&&"rowEnd"!==u||((o=this.m_headerLabels[u][d+1])?this._setActive(o,{type:"label",level:d+1,axis:u},t):d===l-1&&(s="row"===u?this.m_startColHeader:this.m_endColHeader,(o=this._getHeaderByIndex(s,this.m_columnHeaderLevelCount,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader))&&this._setActive(o,{type:"header",index:s,level:d,axis:"column"},t))),"column"!==u&&"columnEnd"!==u||(o=this._getHeaderByIndex(a,d,r,l,a),this._setActive(o,{type:"header",index:a,level:d,axis:u},t));break;case it.keyCodes.LEFT_KEY:"row"!==u&&"rowEnd"!==u||(o=this.m_headerLabels[u][d-1])&&this._setActive(o,{type:"label",level:d-1,axis:u},t)}return!0},it.prototype.handleHeaderFocusChange=function(e,t,i,n){var o,s,r,a,l,u,d,h,c;if(!this.isFetchComplete())return!0;this.getResources().isRTLMode()&&(e===it.keyCodes.LEFT_KEY?e=it.keyCodes.RIGHT_KEY:e===it.keyCodes.RIGHT_KEY&&(e=it.keyCodes.LEFT_KEY));var p=this.m_active.axis,_=this.m_active.index,m=this.m_active.level,g=this._getActiveElement(),f=null!=g?this._getAttribute(g,"depth",!0):1;if(p||_||!this.m_active||(p=this.m_selectionFrontier.axis,_=this.m_active.indexes[p]),t.shiftKey&&!i&&this.m_selectionFrontier&&this.isMultipleSelection()&&(i=this.checkHeaderToDatabody(p,e)),!(i&&this.isArrowKey(e)&&this.isHeaderSelectionType(this.m_selectionFrontier)&&this.checkCorners(p,_,this.m_selection[this.m_selection.length-1]))||(p=this.m_selectionFrontier.axis,_=this.m_selectionFrontier.index,m=this.m_selectionFrontier.level,-1===_&&(_=this.m_active.indexes[p]),"cell"!==this.m_active.type||(e!==it.keyCodes.LEFT_KEY&&e!==it.keyCodes.RIGHT_KEY||-1===p.indexOf("row"))&&(e!==it.keyCodes.UP_KEY&&e!==it.keyCodes.DOWN_KEY||-1===p.indexOf("column")))){switch("column"===p?(l=this.m_colHeader,u=this.m_startColHeader,d=this.m_endColHeader,h=this.m_columnHeaderLevelCount,c=this.m_stopColumnHeaderFetch):"row"===p&&(l=this.m_rowHeader,u=this.m_startRowHeader,d=this.m_endRowHeader,h=this.m_rowHeaderLevelCount,c=this.m_stopRowHeaderFetch),"columnEnd"===p&&(e===it.keyCodes.DOWN_KEY?e=it.keyCodes.UP_KEY:e===it.keyCodes.UP_KEY&&(e=it.keyCodes.DOWN_KEY),l=this.m_colEndHeader,u=this.m_startColEndHeader,d=this.m_endColEndHeader,h=this.m_columnEndHeaderLevelCount,c=this.m_stopColumnEndHeaderFetch),"rowEnd"===p&&(e===it.keyCodes.LEFT_KEY?e=it.keyCodes.RIGHT_KEY:e===it.keyCodes.RIGHT_KEY&&(e=it.keyCodes.LEFT_KEY),l=this.m_rowEndHeader,u=this.m_startRowEndHeader,d=this.m_endRowEndHeader,h=this.m_rowEndHeaderLevelCount,c=this.m_stopRowEndHeaderFetch),i&&this.isArrowKey(e)&&this.isHeaderSelectionType(this.m_selectionFrontier)&&(f=null!=(g=this._getHeaderByIndex(_,m,l,h,u))?this._getAttribute(g,"depth",!0):1),e){case it.keyCodes.LEFT_KEY:if("column"===p||"columnEnd"===p)if(_>0){if(n&&this.m_headerLabels[p][m]){this._setActive(this.m_headerLabels[p][m],{type:"label",level:m,axis:p},t);break}if("column"===p&&n&&this.m_headerLabels.row[this.m_rowHeaderLevelCount-1]){this._setActive(this.m_headerLabels.row[this.m_rowHeaderLevelCount-1],{type:"label",level:this.m_rowHeaderLevelCount-1,axis:"row"},t);break}if(1===h)r=_-1,s=null!=g?g.previousSibling:null,a=m;else if(r=null!=(s=this._getHeaderByIndex(_-1,m,l,h,u))?this._getAttribute(s.parentNode,"start",!0):_-1,a=null!=s?this.getHeaderCellLevel(s):m,r<0)break;i?this.extendSelectionHeader(s,t,!0):(this._isSelectionEnabled()&&!this.m_discontiguousSelection&&(this._clearSelection(t),this.m_selectionFrontier={}),this._setActive(s,{type:"header",index:r,level:a,axis:p},t),this._highlightActive())}else this.m_headerLabels[p][m]?this._setActive(this.m_headerLabels[p][m],{type:"label",level:m,axis:p},t):"column"===p&&this.m_headerLabels.row[this.m_rowHeaderLevelCount-1]&&this._setActive(this.m_headerLabels.row[this.m_rowHeaderLevelCount-1],{type:"label",level:this.m_rowHeaderLevelCount-1,axis:"row"},t);else("row"===p||"rowEnd"===p)&&m>0&&(s=this._getHeaderByIndex(_,m-1,l,h,u),r=this._getAttribute(s.parentNode,"start",!0),a=this.getHeaderCellLevel(s),i?this.extendSelectionHeader(s,t,!0):(this._isSelectionEnabled()&&!this.m_discontiguousSelection&&(this._clearSelection(t),this.m_selectionFrontier={}),this._setActive(s,{type:"header",index:r,level:a,axis:p},t),this._highlightActive()));break;case it.keyCodes.RIGHT_KEY:"rowEnd"===p&&n&&-1!==this.m_endRowHeader?(s=this._getHeaderByIndex(_,this.m_rowHeaderLevelCount,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader),i?this.extendSelectionHeader(s,t,!0):(this._isSelectionEnabled()&&!this.m_discontiguousSelection&&(this._clearSelection(t),this.m_selectionFrontier={}),this._setActive(s,{type:"header",index:_,level:this.m_rowHeaderLevelCount,axis:p},t),this._highlightActive())):"row"===p&&n&&-1!==this.m_endRowEndHeader?(s=this._getHeaderByIndex(_,this.m_rowEndHeaderLevelCount,this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader),i?this.extendSelectionHeader(s,t,!0):(this._isSelectionEnabled()&&!this.m_discontiguousSelection&&(this._clearSelection(t),this.m_selectionFrontier={}),this._setActive(s,{type:"header",index:_,level:this.m_rowEndHeaderLevelCount,axis:p},t),this._highlightActive())):"row"===p||"rowEnd"===p?m+f>=h&&!i?(o="row"===p?this.createIndex(_,0):this._isHighWatermarkScrolling()?this.createIndex(_,this.m_endCol):this.createIndex(_,this.getDataSource().getCount("column")-1),this.m_trueIndex={row:_},this._isSelectionEnabled()?this.selectAndFocus(o,t):(this._setActiveByIndex(o,t),this._highlightActive())):(s=this._getHeaderByIndex(_,m+f,l,h,u),r=this._getAttribute(s.parentNode,"start",!0),a=this.getHeaderCellLevel(s),i?this.extendSelectionHeader(s,t,!0):(this._isSelectionEnabled()&&!this.m_discontiguousSelection&&(this._clearSelection(t),this.m_selectionFrontier={}),this._setActive(s,{type:"header",index:r,level:a,axis:p},t),this._highlightActive())):"column"===p&&n&&this.m_headerLabels.rowEnd[this.m_rowEndHeaderLevelCount-1]?this._setActive(this.m_headerLabels.rowEnd[this.m_rowEndHeaderLevelCount-1],{type:"label",level:this.m_rowEndHeaderLevelCount-1,axis:"rowEnd"},t):(1===h?(r=_+1,s=null!=g?g.nextSibling:null,a=m):(m===h-1?(r=_+1,s=this._getHeaderByIndex(r,m,l,h,u)):(r=null!=g?this._getAttribute(g.parentNode,"start",!0)+this._getAttribute(g.parentNode,"extent",!0):_+1,s=this._getHeaderByIndex(r,m,l,h,u)),a=null!=s?this.getHeaderCellLevel(s):m),r>d&&c||!(this._isCountUnknown("column")||r<this.getDataSource().getCount("column"))?"column"===p&&this.m_headerLabels.rowEnd[this.m_rowEndHeaderLevelCount-1]&&this._setActive(this.m_headerLabels.rowEnd[this.m_rowEndHeaderLevelCount-1],{type:"label",level:this.m_rowEndHeaderLevelCount-1,axis:"rowEnd"},t):i?this.extendSelectionHeader(s,t,!0):(this._isSelectionEnabled()&&!this.m_discontiguousSelection&&(this._clearSelection(t),this.m_selectionFrontier={}),this._setActive(s,{type:"header",index:r,level:a,axis:p},t),this._highlightActive()));break;case it.keyCodes.UP_KEY:if("row"===p||"rowEnd"===p){if(n&&this.m_headerLabels[p][m]){this._setActive(this.m_headerLabels[p][m],{type:"label",level:m,axis:p},t);break}if("row"===p&&n&&this.m_headerLabels.column[this.m_columnHeaderLevelCount-1]){this._setActive(this.m_headerLabels.column[this.m_columnHeaderLevelCount-1],{type:"label",level:this.m_columnHeaderLevelCount-1,axis:"column"},t);break}if(_>0){if(1===h)r=_-1,s=null!=g?g.previousSibling:null,a=m;else if(m===h-1?(r=_-1,s=this._getHeaderByIndex(r,m,l,h,u)):r=null!=(s=this._getHeaderByIndex(this._getAttribute(g.parentNode,"start",!0)-1,m,l,h,u))?this._getAttribute(s.parentNode,"start",!0):_-1,a=null!=s?this.getHeaderCellLevel(s):m,r<0)break;i?this.extendSelectionHeader(s,t,!0):(this._isSelectionEnabled()&&!this.m_discontiguousSelection&&(this.m_selectionFrontier={},this._clearSelection(t)),this._setActive(s,{type:"header",index:r,level:a,axis:p},t),this._highlightActive())}else this.m_headerLabels[p][m]?this._setActive(this.m_headerLabels[p][m],{type:"label",level:m,axis:p},t):"row"===p&&this.m_headerLabels.column[this.m_columnHeaderLevelCount-1]&&this._setActive(this.m_headerLabels.column[this.m_columnHeaderLevelCount-1],{type:"label",level:this.m_columnHeaderLevelCount-1,axis:"column"},t)}else("column"===p||"columnEnd"===p)&&m>0&&(s=this._getHeaderByIndex(_,m-1,l,h,u),r=this._getAttribute(s.parentNode,"start",!0),a=this.getHeaderCellLevel(s),i?this.extendSelectionHeader(s,t,!0):(this._isSelectionEnabled()&&!this.m_discontiguousSelection&&(this.m_selectionFrontier={},this._clearSelection(t)),this._setActive(s,{type:"header",index:r,level:a,axis:p},t),this._highlightActive()));break;case it.keyCodes.DOWN_KEY:"columnEnd"===p&&n&&-1!==this.m_endColHeader?(s=this._getHeaderByIndex(_,this.m_columnHeaderLevelCount,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader),i?this.extendSelectionHeader(s,t,!0):(this._isSelectionEnabled()&&!this.m_discontiguousSelection&&(this.m_selectionFrontier={},this._clearSelection(t)),this._setActive(s,{type:"header",index:_,level:this.m_columnHeaderLevelCount,axis:p},t),this._highlightActive())):"column"===p&&n&&-1!==this.m_endColEndHeader?(s=this._getHeaderByIndex(_,this.m_columnEndHeaderLevelCount,this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader),i?this.extendSelectionHeader(s,t,!0):(this._isSelectionEnabled()&&!this.m_discontiguousSelection&&(this._clearSelection(t),this.m_selectionFrontier={}),this._setActive(s,{type:"header",index:_,level:this.m_columnEndHeaderLevelCount,axis:p},t),this._highlightActive())):"column"===p||"columnEnd"===p?m+f>=h&&!i?(o="column"===p?this.createIndex(0,_):this._isHighWatermarkScrolling()?this.createIndex(this.m_endRow,_):this.createIndex(this.getDataSource().getCount("row")-1,_),this.m_trueIndex={column:_},this._isSelectionEnabled()?this.selectAndFocus(o,t):(this._setActiveByIndex(o,t),this._highlightActive())):(s=this._getHeaderByIndex(_,m+f,l,h,u),r=this._getAttribute(s.parentNode,"start",!0),a=this.getHeaderCellLevel(s),i?this.extendSelectionHeader(s,t,!0):(this._isSelectionEnabled()&&!this.m_discontiguousSelection&&(this._clearSelection(t),this.m_selectionFrontier={}),this._setActive(s,{type:"header",index:r,level:a,axis:p},t),this._highlightActive())):"row"===p&&n&&this.m_headerLabels.columnEnd[this.m_columnEndHeaderLevelCount-1]?this._setActive(this.m_headerLabels.columnEnd[this.m_columnEndHeaderLevelCount-1],{type:"label",level:this.m_columnEndHeaderLevelCount-1,axis:"columnEnd"},t):(1===h?(r=_+1,s=null!=g?g.nextSibling:null,a=m):(m===h-1?(r=_+1,s=this._getHeaderByIndex(r,m,l,h,u)):(r=null!=g?this._getAttribute(g.parentNode,"start",!0)+this._getAttribute(g.parentNode,"extent",!0):_+1,s=this._getHeaderByIndex(r,m,l,h,u)),a=null!=s?this.getHeaderCellLevel(s):m),r>d&&c||!(this._isCountUnknown("row")||r<this.getDataSource().getCount("row"))?"row"===p&&this.m_headerLabels.columnEnd[this.m_columnEndHeaderLevelCount-1]&&this._setActive(this.m_headerLabels.columnEnd[this.m_rowEndHeaderLevelCount-1],{type:"label",level:this.m_columnEndHeaderLevelCount-1,axis:"columnEnd"},t):i?this.extendSelectionHeader(s,t,!0):(this._isSelectionEnabled()&&!this.m_discontiguousSelection&&(this._clearSelection(t),this.m_selectionFrontier={}),this._setActive(s,{type:"header",index:r,level:a,axis:p},t),this._highlightActive()));break;case it.keyCodes.PAGEUP_KEY:"row"!==p&&"rowEnd"!==p||(g=this._getHeaderByIndex(0,m,l,h,u),this._setActive(g,{type:"header",index:0,level:m,axis:p},t));break;case it.keyCodes.PAGEDOWN_KEY:"row"!==p&&"rowEnd"!==p||(_=this._isCountUnknown("row")||this._isHighWatermarkScrolling()?Math.max(0,d):Math.max(0,this.getDataSource().getCount("row")-1),g=this._getHeaderByIndex(_,m,l,h,u),this._setActive(g,{type:"header",index:_,level:m,axis:p},t));break;case it.keyCodes.HOME_KEY:"column"!==p&&"columnEnd"!==p||(g=this._getHeaderByIndex(0,m,l,h,u),this._setActive(g,{type:"header",index:0,level:m,axis:p},t));break;case it.keyCodes.END_KEY:"column"!==p&&"columnEnd"!==p||(_=this._isCountUnknown("column")||this._isHighWatermarkScrolling()?Math.max(0,d):Math.max(0,this.getDataSource().getCount("column")-1),g=this._getHeaderByIndex(_,m,l,h,u),this._setActive(g,{type:"header",index:_,level:m,axis:p},t))}return!0}},it.prototype.checkHeaderToDatabody=function(e,t){return!("row"===e&&this.m_rowHeaderLevelCount===this.m_selectionFrontier.level&&t===it.keyCodes.RIGHT_KEY||"rowEnd"===e&&this.m_rowEndHeaderLevelCount===this.m_selectionFrontier.level&&t===it.keyCodes.LEFT_KEY||"column"===e&&this.m_columnHeaderLevelCount===this.m_selectionFrontier.level&&t===it.keyCodes.DOWN_KEY||"columnEnd"===e&&this.m_columnEndHeaderLevelCount===this.m_selectionFrontier.level&&t===it.keyCodes.UP_KEY)},it.prototype._getHeaderLabelledBy=function(e,t,i,n,o,s,r,a){var l;if(-1!==o&&(s!==r||this.m_externalFocus)){var u=this.getHeaderFromCell(a,e);return null!=r&&(l=this._getHeaderByIndex(r,i-1,t,i,n)),this._getHeaderAndParentIds(u,l)}return""},it.prototype._getHeaderAndParentIds=function(e,t){var i="",n=[];if(null==e)return"";var o=this._getHeaderAndParents(e);null!=t&&(n=this._getHeaderAndParents(t));for(var s=0;s<o.length;s++)n[s]===o[s]&&s!==o.length-1||(i+=(""===i?"":" ")+o[s].id);return i},it.prototype._getHeaderAndParents=function(e){var t,i=[e],n=this.getHeaderCellAxis(e),o=this.getHeaderCellLevel(e),s=this._getLabel(n,o);if("row"===n?t=this.m_rowHeaderLevelCount:"column"===n?t=this.m_columnHeaderLevelCount:"rowEnd"===n?t=this.m_rowEndHeaderLevelCount:"columnEnd"===n&&(t=this.m_columnEndHeaderLevelCount),s&&i.unshift(s),1===t)return i;for(o===t-1&&(e=e.parentNode.firstChild,i.unshift(e),o-=1,(s=this._getLabel(n,o))&&i.unshift(s));o>0;)e=e.parentNode.parentNode.firstChild,i.unshift(e),o-=1,(s=this._getLabel(n,o))&&i.unshift(s);return i},it.prototype.isHeaderSelectionType=function(e){return!(!e||!e.axis)},it.prototype.handleFocusChange=function(e,t,i,n,o){var s,r,a,l=1,u=1;if(!this.isFetchComplete())return!0;if(t){if(s=this.m_selectionFrontier,this.isHeaderSelectionType(this.m_selectionFrontier))return void this.handleHeaderFocusChange(e,i,t,o)}else s=this.m_active.indexes;if(null!=s){null==this.m_trueIndex&&(this.m_trueIndex={}),this.getResources().isRTLMode()&&(e===it.keyCodes.LEFT_KEY?e=it.keyCodes.RIGHT_KEY:e===it.keyCodes.RIGHT_KEY&&(e=it.keyCodes.LEFT_KEY));var d=this._isSelectionEnabled()?this.selectAndFocus.bind(this):this._setActiveByIndex.bind(this),h=s.row,c=s.column,p=this._getCellByIndex(s);if(p){var _=p[this.getResources().getMappedAttribute("context")];l=_.extents.row,u=_.extents.column}switch(e){case it.keyCodes.LEFT_KEY:this.m_trueIndex.row||t||(this.m_trueIndex={row:h}),c>0&&(!o||-1===this.m_endRowHeader)?"row"===this.m_options.getSelectionMode()?(r=this.createIndex(this.m_trueIndex.row,c-1),this._setActiveByIndex(r,i)):(t?(r=this.createIndex(h,c-1),this.extendSelection(r,i,e)):d(r=this.createIndex(this.m_trueIndex.row,c-1),i),c-1==0&&this._setAccInfoText("accessibleFirstColumn")):!t&&n&&(a=this._getHeaderByIndex(this.m_trueIndex.row,this.m_rowHeaderLevelCount-1,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader),this.m_discontiguousSelection?this.discontiguousHeaderSetActiveFromDatabody(i,"row",a,this.m_rowHeaderLevelCount):this._setActive(a,{type:"header",index:this.m_trueIndex.row,level:this.m_rowHeaderLevelCount-1,axis:"row"},i,!0));break;case it.keyCodes.RIGHT_KEY:this.m_trueIndex.row||t||(this.m_trueIndex={row:h}),this._isLastColumn(c+(u-1))||o&&-1!==this.m_endRowEndHeader?-1!==this.m_endRowEndHeader&&n?(a=this._getHeaderByIndex(this.m_trueIndex.row,this.m_rowEndHeaderLevelCount-1,this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader),this.m_discontiguousSelection?this.discontiguousHeaderSetActiveFromDatabody(i,"rowEnd",a,this.m_rowEndHeaderLevelCount):this._setActive(a,{type:"header",index:this.m_trueIndex.row,level:this.m_rowEndHeaderLevelCount-1,axis:"rowEnd"},i,!0)):t||d(s,i):"row"===this.m_options.getSelectionMode()?(r=this.createIndex(this.m_trueIndex.row,c+u),this._setActiveByIndex(r,i)):(t?(r=this.createIndex(h,c+1),this.extendSelection(r,i,e)):d(r=this.createIndex(this.m_trueIndex.row,c+u),i),this._isLastColumn(c+u)&&this._setAccInfoText("accessibleLastColumn"));break;case it.keyCodes.UP_KEY:this.m_trueIndex.column||t||(this.m_trueIndex={column:c}),h>0&&(!o||-1===this.m_endColHeader)?(t?(r=this.createIndex(h-1,c),this.extendSelection(r,i,e)):d(r=this.createIndex(h-1,this.m_trueIndex.column),i),h-1==0&&this._setAccInfoText("accessibleFirstRow")):!t&&n&&(a=this._getHeaderByIndex(this.m_trueIndex.column,this.m_columnHeaderLevelCount-1,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader),this.m_discontiguousSelection?this.discontiguousHeaderSetActiveFromDatabody(i,"column",a,this.m_columnHeaderLevelCount):this._setActive(a,{type:"header",index:this.m_trueIndex.column,level:this.m_columnHeaderLevelCount-1,axis:"column"},i,!0));break;case it.keyCodes.DOWN_KEY:this.m_trueIndex.column||t||(this.m_trueIndex={column:c}),this._isLastRow(h+(l-1))||o&&-1!==this.m_endColEndHeader?-1!==this.m_endColEndHeader&&n?(a=this._getHeaderByIndex(this.m_trueIndex.column,this.m_columnEndHeaderLevelCount-1,this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader),this.m_discontiguousSelection?this.discontiguousHeaderSetActiveFromDatabody(i,"columnEnd",a,this.m_columnEndHeaderLevelCount):this._setActive(a,{type:"header",index:this.m_trueIndex.column,level:this.m_columnEndHeaderLevelCount-1,axis:"columnEnd"},i,!0)):t||d(s,i):(t?(r=this.createIndex(h+1,c),this.extendSelection(r,i,e)):d(r=this.createIndex(h+l,this.m_trueIndex.column),i),this._isLastRow(h+l)&&this._setAccInfoText("accessibleLastRow"));break;case it.keyCodes.HOME_KEY:this.m_trueIndex.row||(this.m_trueIndex={row:h}),d(r=this.createIndex(this.m_trueIndex.row,0),i);break;case it.keyCodes.END_KEY:this.m_trueIndex.row||(this.m_trueIndex={row:h}),d(r=this._isCountUnknown("column")||this._isHighWatermarkScrolling()?this.createIndex(this.m_trueIndex.row,Math.max(0,this.m_endCol)):this.createIndex(this.m_trueIndex.row,Math.max(0,this.getDataSource().getCount("column")-1)),i);break;case it.keyCodes.PAGEUP_KEY:this.m_trueIndex.column||(this.m_trueIndex={column:c}),d(r=this.createIndex(0,c),i);break;case it.keyCodes.PAGEDOWN_KEY:this.m_trueIndex.column||(this.m_trueIndex={column:c}),d(r=this._isCountUnknown("column")||this._isHighWatermarkScrolling()?this.createIndex(Math.max(0,this.m_endRow),this.m_trueIndex.column):this.createIndex(Math.max(0,this.getDataSource().getCount("row")-1),this.m_trueIndex.column),i)}return!0}},it.prototype.scrollToIndex=function(e,t,i){var n,o,s=e.row,r=e.column;t&&(this.m_shouldFocus=!1),i&&(e.scrollToOrigin=!0);var a=this.getResources().isRTLMode()?"right":"left",l=0,u=0,d=this._getViewportTop(),h=this._getViewportBottom(),c=this._getViewportLeft(),p=this._getViewportRight();if(s<this.m_startRow||s>this.m_endRow){var _;_=s<this.m_startRow?this.m_avgRowHeight*s:this.m_avgRowHeight*(s+1)-h+d,u=this.m_currentScrollTop-_,this.m_scrollIndexAfterFetch=e,n=!0}else{o=this._getCellByIndex({row:s,column:this.m_startCol});var m=this.getElementDir(o,"top"),g=this.getElementHeight(o);i||e.scrollToOrigin?u=d-m:m+g>h?u=h-(m+g):m<d&&(u=d-m)}if(!isNaN(r)&&!0!==n)if(r<this.m_startCol||r>this.m_endCol){var f;f=r<this.m_startCol?this.m_avgColWidth*r:this.m_avgColWidth*(r+1)-p+c,l=this.m_currentScrollLeft-f,this.m_scrollIndexAfterFetch=e}else{o=this._getCellByIndex({row:this.m_startRow,column:r});var v=this.getElementDir(o,a),y=this.getElementWidth(o);i||e.scrollToOrigin?l=c-v:v<c?l=c-v:v+y>p&&(l=p-(v+y))}0!==l||0!==u?(null!=(o=this._getCellByIndex(e))&&!0!==t&&!1!==this.m_shouldFocus&&(this.m_cellToFocus=o),this.scrollDelta(l,u)):null!=this.m_scrollIndexAfterFetch&&(t||!1===this.m_shouldFocus?this.m_scrollIndexAfterFetch=null:this._setActiveByIndex(this.m_scrollIndexAfterFetch,null,!1,!1,!0)&&(this.m_scrollIndexAfterFetch=null))},it.prototype.scrollToHeader=function(e){var t,i,n,o,s,r,a,l,u,d=e.axis,h=e.index,c=e.level,p=0;"row"===d?(t=this.m_startRowHeader,i=this.m_endRowHeader,n=this.m_avgRowHeight,o=this.m_currentScrollTop,l=this._getViewportTop(),u=this._getViewportBottom()):"column"===d?(t=this.m_startColHeader,i=this.m_endColHeader,n=this.m_avgColWidth,o=this.m_currentScrollLeft,l=this._getViewportLeft(),u=this._getViewportRight()):"rowEnd"===d?(t=this.m_startRowEndHeader,i=this.m_endRowEndHeader,n=this.m_avgRowHeight,o=this.m_currentScrollTop,l=this._getViewportTop(),u=this._getViewportBottom()):"columnEnd"===d&&(t=this.m_startColEndHeader,i=this.m_endColEndHeader,n=this.m_avgColWidth,o=this.m_currentScrollLeft,l=this._getViewportLeft(),u=this._getViewportRight());var _=u-l;h<t||h>i?(p=o-(h<t?n*h:n*(h+1)-_),this.m_scrollHeaderAfterFetch=e):("row"===d||"rowEnd"===d?(a="row"===d?this._getHeaderByIndex(h,c,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader):this._getHeaderByIndex(h,c,this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader),s=this.getElementDir(a,"top"),r=this.getElementHeight(a)):"column"!==d&&"columnEnd"!==d||(a="column"===d?this._getHeaderByIndex(h,c,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader):this._getHeaderByIndex(h,c,this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader),s=this.getElementDir(a,this.getResources().isRTLMode()?"right":"left"),r=this.getElementWidth(a)),_>r?s+r>u?p=u-(s+r):s<l&&(p=l-s):p=l-s),0!==p?(null!=a&&!1!==this.m_shouldFocus&&(this.m_cellToFocus=a),"row"===d||"rowEnd"===d?this.scrollDelta(0,p):this.scrollDelta(p,0)):null!=this.m_scrollHeaderAfterFetch&&(this._updateActive(e,!0,!0),this.m_scrollHeaderAfterFetch=null)},it.prototype.findHeader=function(e,t,i){if(null==t&&(t=this.getMappedStyle("headercell")),null==i&&(i=this.getMappedStyle("endheadercell")),null!=t){if(this.m_utils.containsCSSClassName(e,t)||this.m_utils.containsCSSClassName(e,i))return e;if(e.parentNode)return this.findHeader(e.parentNode,t,i);if(e===this.m_root)return null}return null},it.prototype.updateRowBanding=function(){var e=this.m_options.getRowBandingInterval();if(e>0)for(var t=this.m_databody.firstChild.childNodes,i=this.getMappedStyle("banded"),n=0;n<t.length;n++){var o=t[n],s=this._getIndex(o,"row");Math.floor(s/e)%2==1?this.m_utils.containsCSSClassName(o,i)||this.m_utils.addCSSClassName(o,i):this.m_utils.containsCSSClassName(o,i)&&this.m_utils.removeCSSClassName(o,i)}},it.prototype.updateColumnBanding=function(){var e=this.m_options.getColumnBandingInterval();if(e>0)for(var t=this.m_databody.firstChild.childNodes,i=this.getMappedStyle("banded"),n=0;n<t.length;n+=1){var o=t[n],s=this._getIndex(o,"column");Math.floor(s/e)%2==1?this.m_utils.containsCSSClassName(o,i)||this.m_utils.addCSSClassName(o,i):this.m_utils.containsCSSClassName(o,i)&&this.m_utils.removeCSSClassName(o,i)}},it.prototype._removeBanding=function(){for(var e=this.m_databody.firstChild.childNodes,t=this.getMappedStyle("banded"),i=0;i<e.length;i++)this.m_utils.containsCSSClassName(e[i],t)&&this.m_utils.removeCSSClassName(e[i],t)},it.prototype._setAccInfoText=function(e,t){var i=this.getResources().getTranslatedText(e,t);null!=i&&(this.m_accInfo.textContent=i)},it.prototype.handleExpandEvent=function(e,t){void 0===t&&this.queueModelEvent(e)?e.operation="expand":(this._setAccInfoText("accessibleRowExpanded"),this.populateAccInfo(),t&&this._runModelEventQueue())},it.prototype.handleCollapseEvent=function(e,t){void 0===t&&this.queueModelEvent(e)?e.operation="collapse":(this._setAccInfoText("accessibleRowCollapsed"),this.populateAccInfo(),t&&this._runModelEventQueue())},it.prototype._getKey=function(e,t){return null!=e&&e[this.getResources().getMappedAttribute("context")]?null!=t&&this.m_utils.containsCSSClassName(e,this.getMappedStyle("cell"))?e[this.getResources().getMappedAttribute("context")].keys[t]:e[this.getResources().getMappedAttribute("context")].key:null},it.prototype._getActiveKey=function(e,t){if(t&&null!=this.m_prevActive){if("header"===this.m_prevActive.type&&(this.m_prevActive.axis===e||this.m_prevActive.axis===e+"End"))return this.m_prevActive.key;if("cell"===this.m_prevActive.type)return this.m_prevActive.keys[e]}else if(null!=this.m_active){if("header"===this.m_active.type&&(this.m_active.axis===e||this.m_active.axis===e+"End"))return this.m_active.key;if("cell"===this.m_active.type)return this.m_active.keys[e]}return null},it.prototype._handleCut=function(e,t){null==t&&(t=e.target);var i=this.findCellOrHeader(t);if(this._isMoveOnElementEnabled(i)){if(null!=this.m_cutCells)for(var n=0;n<this.m_cutCells.length;n++)this.m_utils.removeCSSClassName(this.m_cutCells[n],this.getMappedStyle("cut"));var o=this._getKey(i,"row");return this.m_cutCells=this._getAxisCellsByKey(o,"row"),this.m_cutRowHeader=this._findHeaderByKey(o,this.m_rowHeader,this.getMappedStyle("rowheadercell")),this.m_cutRowEndHeader=this._findHeaderByKey(o,this.m_rowEndHeader,this.getMappedStyle("rowendheadercell")),this._highlightCellsAlongAxis(o,"row","key","add",["cut"]),null!==this.m_cutRowHeader&&this.m_utils.addCSSClassName(this.m_cutRowHeader,this.getMappedStyle("cut")),null!==this.m_cutRowEndHeader&&this.m_utils.addCSSClassName(this.m_cutRowEndHeader,this.getMappedStyle("cut")),!0}return!1},it.prototype._handlePaste=function(e,t){if(null==t&&(t=e.target),null!=this.m_cutCells){for(var i=0;i<this.m_cutCells.length;i++)this.m_utils.removeCSSClassName(this.m_cutCells[i],this.getMappedStyle("cut"));null!==this.m_cutRowHeader&&(this.m_utils.removeCSSClassName(this.m_cutRowHeader,this.getMappedStyle("cut")),this.m_cutRowHeader=null),null!==this.m_cutRowEndHeader&&(this.m_utils.removeCSSClassName(this.m_cutRowEndHeader,this.getMappedStyle("cut")),this.m_cutRowEndHeader=null);var n=this._getKey(this.findCellOrHeader(t),"row"),o=this._getKey(this.m_cutCells[0],"row");return o!==n&&(this._isSelectionEnabled()&&this._clearSelection(e),this._isDatabodyCellActive()&&this._unhighlightActive(),this.m_moveActive=!0,this.getDataSource().move(o,n)),this.m_cutCells=null,!0}return!1},it.prototype._handleCancelReorder=function(e,t){if(null!=this.m_cutCells){for(var i=0;i<this.m_cutCells.length;i++)this.m_utils.removeCSSClassName(this.m_cutCells[i],this.getMappedStyle("cut"));return this.m_cutCells=null,null!==this.m_cutRowHeader&&(this.m_utils.removeCSSClassName(this.m_cutRowHeader,this.getMappedStyle("cut")),this.m_cutRowHeader=null),null!==this.m_cutRowEndHeader&&(this.m_utils.removeCSSClassName(this.m_cutRowEndHeader,this.getMappedStyle("cut")),this.m_cutRowEndHeader=null),!0}},it.prototype._handleMove=function(e){if(null==this.m_moveCells){var t=e.target,i=this.findCellOrHeader(t),n=this._getKey(i,"row");this.m_originalMoveIndex=this._getIndex(i,"row"),this.m_moveIndex=this.m_originalMoveIndex,this.m_moveCells=this._getAxisCellsByIndex(this.m_moveIndex,"row"),this.m_moveRowHeader=this._findHeaderByKey(n,this.m_rowHeader,this.getMappedStyle("rowheadercell")),this.m_moveRowEndHeader=this._findHeaderByKey(n,this.m_rowEndHeader,this.getMappedStyle("rowendheadercell")),this._highlightCellsAlongAxis(this.m_moveIndex,"row","index","add",["drag"]),this.m_originalTop=this.getElementDir(this.m_moveCells[0],"top"),this.m_dropTarget=document.createElement("div"),this.m_utils.addCSSClassName(this.m_dropTarget,this.getMappedStyle("drop")),this.setElementHeight(this.m_dropTarget,this.calculateRowHeight(this.m_moveCells[0])),this.setElementDir(this.m_dropTarget,this.m_originalTop,"top"),this.m_databody.firstChild.appendChild(this.m_dropTarget),this._addHeaderDropTarget(this.m_moveRowHeader,this.m_rowHeader,!1),this._addHeaderDropTarget(this.m_moveRowEndHeader,this.m_rowEndHeader,!0)}this.m_utils.isTouchDevice()||(this.m_prevY=this.m_currentY,this.m_currentY=e.pageY);for(var o=this.m_currentY-this.m_prevY,s=this.calculateRowHeight(this.m_moveCells[0]),r=0;r<this.m_moveCells.length;r++)this.setElementDir(this.m_moveCells[r],this.getElementDir(this.m_moveCells[r],"top")+o,"top");null!==this.m_moveRowHeader&&this.setElementDir(this.m_moveRowHeader,this.getElementDir(this.m_moveRowHeader,"top")+o,"top"),null!==this.m_moveRowEndHeader&&this.setElementDir(this.m_moveRowEndHeader,this.getElementDir(this.m_moveRowEndHeader,"top")+o,"top");var a=this.m_moveIndex+1,l=this.m_moveIndex-1,u=this._getCellByIndex(this.createIndex(a,this.m_startCol)),d=this._getCellByIndex(this.createIndex(l,this.m_startCol));null!=u&&this.getElementDir(u,"top")<this.getElementDir(this.m_moveCells[0],"top")+s/2?this._moveDropRows("nextSibling",a):null!=d&&this.getElementDir(d,"top")>this.getElementDir(this.m_moveCells[0],"top")-s/2&&this._moveDropRows("previousSibling",l)},it.prototype._addHeaderDropTarget=function(e,t,i){var n;null!==e&&(null==e.style.height&&this.setElementHeight(e,this.calculateRowHeight(e)),this.m_utils.addCSSClassName(e,this.getMappedStyle("drag")),n=document.createElement("div"),this.m_utils.addCSSClassName(n,this.getMappedStyle("drop")),this.setElementHeight(n,this.calculateRowHeight(e)),this.setElementDir(n,this.m_originalTop,"top"),t.firstChild.appendChild(n),i?this.m_dropTargetEndHeader=n:this.m_dropTargetHeader=n)},it.prototype._moveDropRows=function(e,t){var i,n,o,s,r;"nextSibling"===e?(r=this._getAxisCellsByIndex(t,"row"),i=this.m_originalTop+this.calculateRowHeight(r[0]),n=this.m_originalTop):(r=this._getAxisCellsByIndex(t,"row"),n=(i=this.getElementDir(r[0],"top"))+this.calculateRowHeight(r[0])),this.setElementDir(this.m_dropTarget,i,"top");for(var a=0;a<r.length;a++)this.setElementDir(r[a],n,"top");null!==this.m_moveRowHeader&&(o=this.m_moveRowHeader.parentNode,this.setElementDir(this.m_dropTargetHeader,i,"top"),this.setElementDir(this.m_moveRowHeader[e],n,"top")),null!==this.m_moveRowEndHeader&&(s=this.m_moveRowEndHeader.parentNode,this.setElementDir(this.m_dropTargetEndHeader,i,"top"),this.setElementDir(this.m_moveRowEndHeader[e],n,"top")),this.m_originalTop=i,this._highlightCellsAlongAxis(this.m_moveIndex+1,"row","index","remove",["activedrop"]),"nextSibling"===e?(this._modifyAxisCellContextIndex("row",this.m_moveIndex,1,1),this._modifyAxisCellContextIndex("row",this.m_moveIndex+1,1,-1),this.m_moveIndex+=1,null!==this.m_moveRowHeader&&o.insertBefore(this.m_moveRowHeader,this.m_moveRowHeader[e][e]),null!==this.m_moveRowEndHeader&&s.insertBefore(this.m_moveRowEndHeader,this.m_moveRowEndHeader[e][e])):(this._modifyAxisCellContextIndex("row",this.m_moveIndex,1,-1),this._modifyAxisCellContextIndex("row",this.m_moveIndex-1,1,1),this.m_moveIndex-=1,null!==this.m_moveRowHeader&&o.insertBefore(this.m_moveRowHeader,this.m_moveRowHeader[e]),null!==this.m_moveRowEndHeader&&s.insertBefore(this.m_moveRowEndHeader,this.m_moveRowEndHeader[e])),this._refreshDatabodyMap(),this._highlightCellsAlongAxis(this.m_moveIndex+1,"row","index","add",["activedrop"])},it.prototype._isMoveEnabled=function(e){var t=this.getDataSource().getCapability("move");return"enable"===this.m_options.isMoveable("row")&&("full"===t||t===e)},it.prototype._handleMoveMouseUp=function(e,t){if(null!=this.m_moveCells){this._remove(this.m_dropTarget),null!==this.m_moveRowHeader&&this._remove(this.m_dropTargetHeader),null!==this.m_moveRowEndHeader&&this._remove(this.m_dropTargetEndHeader),null!=this.m_active&&"column"!==this.m_active.axis&&(this.m_moveActive=!0),this._isSelectionEnabled()&&this._clearSelection(e);var i=this.m_moveCells[0],n=this._getKey(i,"row");if(!0===t){var o=this.m_moveIndex+1,s=this._getKey(this._getCellByIndex(this.createIndex(o,this.m_startCol)),"row");this.getDataSource().move(n,s)}else this.getDataSource().move(n,n);this.m_moveCells=null,this.m_originalMoveIndex=null,this.m_moveIndex=null}this.m_databodyMove=!1},it.prototype._isMoveOnElementEnabled=function(e){return!(null==e||!this._isMoveEnabled("row")||this._getActiveKey("row")!==this._getKey(e,"row"))},it.prototype._manageMoveCursor=function(){var e=this._getActiveKey("row"),t=this._getActiveKey("row",!0),i=this.getMappedStyle("draggable"),n=this.getMappedStyle("rowheadercell"),o=this.getMappedStyle("rowendheadercell");if(null!=t){this._highlightCellsAlongAxis(t,"row","key","remove",["draggable"]);var s=this._findHeaderByKey(t,this.m_rowHeader,n);this.m_utils.containsCSSClassName(s,i)&&this.m_utils.removeCSSClassName(s,i),s=this._findHeaderByKey(t,this.m_rowEndHeader,o),this.m_utils.containsCSSClassName(s,i)&&this.m_utils.removeCSSClassName(s,i)}if(null!=e){var r=this._getAxisCellsByKey(e,"row");if(this._isMoveOnElementEnabled(r[0])){this._highlightCellsAlongAxis(e,"row","key","add",["draggable"]);var a=this._findHeaderByKey(e,this.m_rowHeader,n);this.m_utils.addCSSClassName(a,i);var l=this._findHeaderByKey(e,this.m_rowEndHeader,o);this.m_utils.addCSSClassName(l,i)}}},it.prototype.handleRootFocus=function(e){if(this.m_utils.addCSSClassName(this.m_root,this.getMappedStyle("focus")),!this.m_root.contains(document.activeElement)||document.activeElement===this.m_root&&0===this.m_root.tabIndex||document.activeElement===this.m_databody&&this.m_scrollbarFocus&&0===this.m_root.tabIndex){this.m_externalFocus=!0,this._isCellEditable()?this._setAccInfoText("accessibleEditableMode"):this._isGridEditable()&&this._setAccInfoText("accessibleNavigationMode");var t=!1;if(!0===this.m_scrollbarFocus&&(this.m_shouldFocus=!1,this.m_scrollbarFocus=!1,t=!0),null!=this.m_active||this._databodyEmpty())null!=this.m_active&&this._highlightActive();else{var i=this.createIndex(0,0);t||this.scrollToIndex(i),this._setActiveByIndex(i,e,null,null,t)}}this.m_root.tabIndex=-1},it.prototype.handleRootBlur=function(e){setTimeout(function(){if(!this.m_root.contains(document.activeElement)){this.m_root.tabIndex=0;var e=this._getActiveElement();null!=e&&this._unsetAriaProperties(e)}}.bind(this),100),null==this.m_moveRow&&this.m_utils.removeCSSClassName(this.m_root,this.getMappedStyle("focus"))},it.prototype.calculateRowHeight=function(e){return""!==e.style.height?this.getElementHeight(e):null!=e.nextSibling?this.getElementDir(e.nextSibling,"top")-this.getElementDir(e,"top"):this.m_endRowPixel-this.getElementDir(e,"top")},it.prototype.calculateRowHeaderHeight=function(e){return""!==e.style.height?this.getElementHeight(e):null!=e.nextSibling?this.getElementDir(e.nextSibling,"top")-this.getElementDir(e,"top"):this.m_endRowHeaderPixel-this.getElementDir(e,"top")},it.prototype.calculateColumnWidth=function(e){if(""!==e.style.width)return this.getElementWidth(e);var t=this.getResources().isRTLMode()?"right":"left";return null!=e.nextSibling?this.getElementDir(e.nextSibling,t)-this.getElementDir(e,t):this.m_endColPixel-this.getElementDir(e,t)},it.prototype.calculateColumnHeaderWidth=function(e){if(""!==e.style.width)return this.getElementWidth(e);var t=this.getResources().isRTLMode()?"right":"left";return null!=e.nextSibling?this.getElementDir(e.nextSibling,t)-this.getElementDir(e,t):this.m_endColHeaderPixel-this.getElementDir(e,t)},it.prototype._databodyEmpty=function(){return null==this.m_databody.firstChild||null==this.m_databody.firstChild.firstChild},it.prototype.changeStyleProperty=function(e,t,i,n){void 0!==t&&(e.style[t]="remove"===n?"":i)},it.prototype.addTransformMoveStyle=function(e,t,i,n,o,s,r){this.changeStyleProperty(e,this.getCssSupport("transition-delay"),i),this.changeStyleProperty(e,this.getCssSupport("transition-timing-function"),n),this.changeStyleProperty(e,this.getCssSupport("transition-duration"),t),this.changeStyleProperty(e,this.getCssSupport("transform"),"translate3d("+o+"px,"+s+"px,"+r+"px)")},it.prototype.removeTransformMoveStyle=function(e){this.changeStyleProperty(e,this.getCssSupport("transition-delay"),null,"remove"),this.changeStyleProperty(e,this.getCssSupport("transition-timing-function"),null,"remove"),this.changeStyleProperty(e,this.getCssSupport("transition-duration"),null,"remove"),this.changeStyleProperty(e,this.getCssSupport("transform"),null,"remove")},it.prototype.getCssSupport=function(e){var t=["","-moz-","-webkit-","-o-","-ms-","-khtml-"],i=document.documentElement;for(var n=0;n<t.length;n++){var o=(t[n]+e).replace(/-([a-z])/gi,function(e,t){return t.toUpperCase()});if("Ms"===o.substr(0,2)&&(o="m"+o.substr(1)),o in i.style)return o}},it.prototype._refreshDatabodyMap=function(){this._clearDatabodyMap(),this._addNodesToDatabodyMap(this.m_databody.firstChild.childNodes)},it.prototype._populateDatabody=function(e,t){this._addNodesToDatabodyMap(t.childNodes),e.appendChild(t)},it.prototype._emptyDatabody=function(e){this._clearDatabodyMap(),this.m_utils.empty(e)},it.prototype._addNodesToDatabodyMap=function(e){for(var t=0;t<e.length;t++){var i=e[t];if(this.m_utils.containsCSSClassName(i,this.getMappedStyle("cell"))){var n=this.getCellIndexes(i),o=this.getCellExtents(i),s=i.id;this._addToDatabodyMap(n,s,o)}}},it.prototype._removeNodesFromDatabodyMap=function(e){for(var t=0;t<e.length;t++){var i=this.getCellIndexes(e[t]);this._removeIndexFromDatabodyMap(i)}},it.prototype._addToDatabodyMap=function(e,t,i){for(var n=i.row,o=i.column,s=0;s<n;s++)for(var r=0;r<o;r++)this._addIndexToDatabodyMap(this.createIndex(e.row+s,e.column+r),t)},it.prototype._addIndexToDatabodyMap=function(e,t){var i="r"+e.row+"c"+e.column;this.m_databodyMap.set(i,t)},it.prototype._removeIndexFromDatabodyMap=function(e){var t="r"+e.row+"c"+e.column;return this.m_databodyMap.delete(t)},it.prototype._getFromDatabodyMap=function(e){var t="r"+e.row+"c"+e.column;return this.m_databodyMap.get(t)},it.prototype._clearDatabodyMap=function(){return this.m_databodyMap.clear()},it.prototype._modifyAxisCellContextIndex=function(e,t,i,n){for(var o=t;o<t+i;o++)for(var s=this._getAxisCellsByIndex(o,e),r=0;r<s.length;r++){s[r][this.getResources().getMappedAttribute("context")].indexes[e]+=n}},it.prototype._getCellOrHeaderByIndex=function(e,t){var i=null,n=this._getAxisCellsByIndex(e,t,!0);return null!=n&&n.length>0&&(i=n[0]),null==i&&("row"===t&&null==(i=this._getHeaderByIndex(e,0,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader))&&(i=this._getHeaderByIndex(e,0,this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader)),"column"===t&&null==(i=this._getHeaderByIndex(e,0,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader))&&(i=this._getHeaderByIndex(e,0,this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader))),i},it.prototype._getLabel=function(e,t){return this.m_headerLabels[e][t]},it.prototype._getCellByIndex=function(e){var t=this._getFromDatabodyMap(e);return null!=t?this.m_databody.querySelector("#"+t):null},it.prototype._getAxisCellsByIndex=function(e,t,i){for(var n,o="row"===t?this.m_startCol:this.m_startRow,s="row"===t?this.m_endCol:this.m_endRow,r=[],a=o;a<=s;a+=n){var l=this._getCellByIndex(this.createIndex("row"===t?e:a,"row"===t?a:e));if(null!=l){if(n=this.getCellExtents(l)["row"===t?"column":"row"],r.push(l),i)break}else n=1}return r},it.prototype._getAxisCellsByKey=function(e,t,i){if(null==e||null==this.m_databody||null==this.m_databody.firstChild)return null;for(var n=[],o=this.m_databody.firstChild.childNodes,s=0;s<o.length;s++){var r=o[s];if(this.m_utils.containsCSSClassName(r,this.getMappedStyle("cell")))if(this._getKey(r,t)===e&&(n.push(r),i))break}return n},it.prototype._isContainFocusableElement=function(e){return this.getFocusableElementsInNode(e).length>0},it.prototype.unhighlightSelection=function(){for(var e=this.GetSelection(),t=0;t<e.length;t+=1)this.unhighlightRange(e[t])},it.prototype.unhighlightRange=function(e){var t=this.getElementsInRange(e);this.unhighlightElems(t)},it.prototype.highlightRange=function(e,t){var i,n=this.getElementsInRange(e);(this.highlightElems(n),t)&&(i=1===this.GetSelection().length?n.length:this._getCurrentSelectionCellCount(),this._setAccInfoText("accessibleMultiCellSelected",{num:i}))},it.prototype._getCurrentSelectionCellCount=function(){for(var e=0,t=this.GetSelection(),i=0;i<t.length;i++){var n=this.getElementsInRange(t[i]);null!=n&&(e+=n.length)}return e},it.prototype.unhighlightElems=function(e){if(null!=e&&0!==e.length)for(var t=0;t<e.length;t+=1){var i=e[t];this._unhighlightElement(i,["selected","topSelected","bottomSelected"])}},it.prototype.highlightElems=function(e){if(null!=e&&0!==e.length){var t=e[0],i=this._getIndex(t,"row");t=e[e.length-1];for(var n=this._getIndex(t,"row"),o=0;o<e.length;o+=1){var s=["selected"];t=e[o];var r=this._getIndex(t,"row");r===i&&s.push("topSelected"),r===n&&s.push("bottomSelected"),this._highlightElement(t,s)}}},it.prototype.applySelection=function(e,t,i,n){for(var o=this.GetSelection(),s=0;s<o.length;s+=1){var r=this.getElementsInRange(o[s],e,t,i,n);this.highlightElems(r)}},it.prototype.handleDatabodySelectionDrag=function(e){var t,i;if(this.m_utils.isTouchDevice()?t=this.findCell(document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY)):(i=e.target,t=this.findCell(i)),null!=t)if(this.isHeaderSelectionType(this.m_selectionFrontier))this.extendSelectionHeader(t,e);else{var n=this.getCellIndexes(t);this.extendSelection(n,e)}},it.prototype._isSelected=function(e){var t=this.getMappedStyle("selected");return null!=t&&this.m_utils.containsCSSClassName(e,t)},it.prototype._deselect=function(e){"row"===this.m_options.getSelectionMode()&&(e=this.createIndex(e.row));for(var t=e.row,i=e.column,n=-1,o=this.GetSelection(),s=0;s<o.length;s+=1){var r=o[s],a=r.startIndex,l=this.getEndIndex(r),u=a.row,d=l.row;if(u===t&&d===t){var h=a.column,c=l.column;if(isNaN(h)||isNaN(c)){if(isNaN(i)){n=s;break}}else if(h===i&&c===i){n=s;break}}}-1!==n&&(this.unhighlightRange(o[n]),o.splice(n,1))},it.prototype.handleHeaderClickSelection=function(e){var t,i,n,o=e.target,s=this.findHeader(o),r=e.shiftKey;if(!r&&s&&this._setActive(s,this._createActiveObject(s),e),null==this.m_active||"header"!==this.m_active.type&&!e.shiftKey)return!1;if("header"===this.m_active.type&&(t=this.m_active.axis,i=this.m_active.index,n=this.m_active.level),this.m_utils.isTouchDevice())this._removeTouchSelectionAffordance(),this._selectHeader(t,i,n,e);else if(r){if(r){var a=s[this.getResources().getMappedAttribute("context")];null==t&&(t=a.axis),(-1!==t.indexOf("row")&&-1!==a.axis.indexOf("row")||-1!==t.indexOf("column")&&-1!==a.axis.indexOf("column"))&&this.extendSelectionHeader(s,e)}}else this._selectHeader(t,i,n,e)},it.prototype.discontiguousHeaderSetActiveFromDatabody=function(e,t,i,n){var o=t.replace("End",""),s=this.m_selection[this.m_selection.length-1];this.unhighlightSelection(),s.startIndex.row===this.m_active.indexes.row&&s.endIndex.row===this.m_active.indexes.row&&s.startIndex.column===this.m_active.indexes.column&&s.endIndex.column===this.m_active.indexes.column&&this.m_selection.pop(),this._setActive(i,{type:"header",index:this.m_trueIndex[o],level:n-1,axis:t},e,!1),this.rehighlightSelection()},it.prototype.handleDragAnchorChange=function(e){if(this.m_headerDragState){var t,i,n=e.target,o=this.findHeader(n),s=o[this.getResources().getMappedAttribute("context")],r=this._getActiveElement(),a=r[this.getResources().getMappedAttribute("context")],l=this._getAttribute(r.parentNode,"start",!0),u=this._getAttribute(r.parentNode,"extent",!0);if(!s.extent)return;1===s.extent?(t=s.index,i=s.index):i=(t=this._getAttribute(o.parentNode,"start",!0))+(this._getAttribute(o.parentNode,"extent",!0)-1),u=(l=this._getAttribute(r.parentNode,"start",!0))+(this._getAttribute(r.parentNode,"extent",!0)-1),1!==a.extent?(t<=l&&i>=u||t>=l&&i<=u)&&this._setActive(o,this._createActiveObject(o),e):t!==i&&t<=l&&l<=i&&this._setActive(o,this._createActiveObject(o),e)}},it.prototype.handleDatabodyClickSelection=function(e){var t,i=e.target,n=this.findCell(i);if(null!=n&&(t=this.getCellIndexes(n)),null!=t){if(this.isMultipleSelection()&&2===e.button&&this._isContainSelection(t))return;var o=this.m_utils.ctrlEquivalent(e),s=e.shiftKey;this.isMultipleSelection()?this.m_utils.isTouchDevice()?(this._removeTouchSelectionAffordance(),null!=this.m_active&&this._unhighlightActive(),this.selectAndFocus(t,e,!1)):o||s?!o&&s?this.extendSelection(t,e):this.selectAndFocus(t,e,!0):this.selectAndFocus(t,e,!1):this.selectAndFocus(t,e,!1)}},it.prototype._handleSelectAll=function(e){return!(!this._isSelectionEnabled()||!this.isMultipleSelection())&&("row"===this.m_options.getSelectionMode()?this._selectRange(this.createIndex(0),this.createIndex(-1),e):this._selectRange(this.createIndex(0,0),this.createIndex(-1,-1),e),this.m_utils.isTouchDevice()&&this.m_topSelectIconContainer&&this.m_bottomSelectIconContainer&&(this.m_topSelectIconContainer.parentNode.removeChild(this.m_topSelectIconContainer),this.m_bottomSelectIconContainer.parentNode.removeChild(this.m_bottomSelectIconContainer)),!0)},it.prototype._isContainSelection=function(e,t){null==t&&(t=this.GetSelection());for(var i=0;i<t.length;i+=1){var n=t[i],o=n.startIndex,s=this.getEndIndex(n),r=o.row,a=s.row;if(e.row>=r&&(-1===a||e.row<=a)){var l=o.column,u=s.column;if(isNaN(l)||isNaN(u))return!0;if(e.column>=l&&(-1===u||e.column<=u))return!0}}return!1},it.prototype._compareSelections=function(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i+=1){for(var n=!1,o=0;o<t.length;o+=1)this._compareIndividualSelectionObjects(e[i],t[o])&&(n=!0);if(!1===n)return!1}return!0},it.prototype._compareIndividualSelectionObjects=function(e,t){return e.startIndex.row===t.startIndex.row&&e.startIndex.column===t.startIndex.column&&e.endIndex.row===t.endIndex.row&&e.endIndex.column===t.endIndex.column},it.prototype._clearSelection=function(e){this.unhighlightSelection(),this._removeTouchSelectionAffordance();var t=this.GetSelection();this.m_selection=[],this._compareSelectionAndFire(e,t)},it.prototype.setDiscontiguousSelectionMode=function(e){this.m_discontiguousSelection=e,this._setAccInfoText(e?"accessibleRangeSelectModeOn":"accessibleRangeSelectModeOff")},it.prototype._selectEntireRow=function(e,t,i){var n=this.createIndex(e,0),o=this.createIndex(t,-1),s=this._getSelectionStartAndEnd(n,o,0);"row"===this.m_options.getSelectionMode()?this._selectRange(this.createIndex(s.min.row),this.createIndex(s.max.row),i):this._selectRange(this.createIndex(s.min.row,0),this.createIndex(s.max.row,-1),i)},it.prototype._selectEntireColumn=function(e,t,i){var n=this.createIndex(0,e),o=this.createIndex(-1,t),s=this._getSelectionStartAndEnd(n,o,0);this._selectRange(this.createIndex(0,s.min.column),this.createIndex(-1,s.max.column),i)},it.prototype._selectRange=function(e,t,i){this.unhighlightSelection(),this._createRangeWithKeys(e,t,this._selectRangeCallback.bind(this,i))},it.prototype._selectRangeCallback=function(e,t){var i,n=this.GetSelection();(i=this.m_discontiguousSelection||!e||this.m_utils.ctrlEquivalent(e)&&0===e.button?n.slice(0):[]).push(t),this.m_selection=i,this.rehighlightSelection(),this._isDatabodyCellActive()&&e.target[this.getResources().getMappedAttribute("context")]&&!e.target[this.getResources().getMappedAttribute("context")].axis&&!this.m_selectionFrontier.axis&&(this.m_selectionFrontier=this.m_active.indexes,this._highlightActive()),this._compareSelectionAndFire(e,n)},it.prototype.rehighlightSelection=function(){for(var e=0;e<this.m_selection.length;e++)this.highlightRange(this.m_selection[e])},it.prototype.GetSelection=function(){return null==this.m_selection&&(this.m_selection=[]),this.m_selection},it.prototype.SetSelection=function(e){void 0!==e&&(null===e&&(e=[]),this.unhighlightSelection(),this.m_selection=e,null!=this.m_databody&&this.applySelection(this.m_startRow,this.m_endRow,this.m_startCol,this.m_endCol))},it.prototype.fireSelectionEvent=function(e,t){var i={event:e,ui:{selection:this.GetSelection(),previousSelection:t}};this.fireEvent("select",i)},it.prototype.extendSelection=function(e,t,i){if("header"!==this.m_active.type){var n;if(this.m_utils.isTouchDevice())n=this.m_touchSelectAnchor;else n={row:this.m_active.indexes.row,column:this.m_active.indexes.column};if(null!=n){this._resetSelectionFrontierFocus();var o=this._updateSelectionFrontier(n,e,i),s=o.min,r=o.max;"row"===this.m_options.getSelectionMode()&&(s=this.createIndex(s.row),r=this.createIndex(r.row)),this._createRangeWithKeys(s,r,this._extendSelectionCallback.bind(this,t,n))}}},it.prototype.extendSelectionHeader=function(e,t,i){if(null!==e){var n,o,s,r,a,l=this.findCellOrHeader(e),u=l[this.getResources().getMappedAttribute("context")];if(null==i&&(i=this.m_discontiguousSelection),u){if(u.cell)r=s=-1!==this.m_selectionFrontier.axis.indexOf("column")?u.indexes.column:u.indexes.row,a=s;else{if(this.m_selectionFrontier&&u.index===this.m_selectionFrontier.index&&u.level===this.m_selectionFrontier.level)return;1===u.extent?(s=u.index,r=u.index,a=u.index):r=(s=this._getAttribute(e.parentNode,"start",!0))+(this._getAttribute(e.parentNode,"extent",!0)-1)}var d,h,c,p=this._getActiveElement(),_=p[this.getResources().getMappedAttribute("context")];if(this.m_utils.isTouchDevice()?(-1===(n=-1!==this.m_selectionFrontier.axis.indexOf("column")?this.m_touchSelectAnchor.column:this.m_touchSelectAnchor.row)&&(n=0),d=n,h=n,o=this.m_selectionFrontier.axis):(h=(d=this._getAttribute(p.parentNode,"start",!0))+(this._getAttribute(p.parentNode,"extent",!0)-1),"header"===this.m_active.type&&(o=this.m_active.axis,n=this.m_active.index)),"cell"===this.m_active.type?(c=1,n=-1!==(o=u.axis).indexOf("row")?this.m_active.indexes.row:this.m_active.indexes.column):c=_.extent,i){var m=this.m_selection[this.m_selection.length-1];this.unhighlightSelection(),m&&this.checkCorners(o,n,m)&&this.m_selection.pop()}1!==c?s<=d&&r>=h||s>=d&&r<=h?(this.m_headerDragState||this._setActive(l,this._createActiveObject(l),t),n=s,a=r):s>d&&r>h?(n=d,a=r):s<d&&r<h&&(n=s,a=h):1===c&&s!==r&&(s<=n&&n<=r?(this.m_headerDragState||"cell"===this.m_active.type||this._setActive(l,this._createActiveObject(l),t),n=s,a=r):s<=n&&r<=n?(a=n,n=s):s>=n&&r>=n&&(a=r)),u.cell?this.setHeaderSelectionFrontier(o,a,a,this.m_selectionFrontier.level,e,!0):this.setHeaderSelectionFrontier(o,a,u.index,u.level,e,!0),-1!==o.indexOf("column")?t?this._selectEntireColumn(n,a,t):this._selectEntireColumn(n,a,null):-1!==o.indexOf("row")&&(t?this._selectEntireRow(n,a,t):this._selectEntireRow(n,a,null))}}},it.prototype._updateSelectionFrontier=function(e,t,i){var n,o,s;if("row"===this.m_options.getSelectionMode()?(n=this.createIndex(e.row,this.m_startCol),o=this.createIndex(t.row,this.m_endCol)):(n=e,o=t),null!=i){var r=this.GetSelection(),a=(s=r[this._getLastAnchoredSelectionIndex(r,n)]).startIndex,l=s.endIndex;a.row===this.m_selectionFrontier.row&&n.row!==a.row?n.row=l.row:l.row===this.m_selectionFrontier.row&&n.row!==l.row&&(n.row=a.row),a.column===this.m_selectionFrontier.column&&n.column!==a.column?n.column=l.column:l.column===this.m_selectionFrontier.column&&n.column!==l.column&&(n.column=a.column)}var u=this._getSelectionStartAndEnd(n,o,0),d=o;if(null!=i){var h=u.min,c=u.max;for("row"===this.m_options.getSelectionMode()&&(h=this.createIndex(h.row),c=this.createIndex(c.row));this._compareIndividualSelectionObjects(s,this.createRange(h,c));){if(i===it.keyCodes.LEFT_KEY){if(0===o.column)break;o.column-=1}else if(i===it.keyCodes.RIGHT_KEY){if(o.column===this.m_endCol)break;o.column+=1}else if(i===it.keyCodes.UP_KEY){if(0===o.row)break;o.row-=1}else{if(i!==it.keyCodes.DOWN_KEY)break;if(o.row===this.m_endRow)break;o.row+=1}h=(u=this._getSelectionStartAndEnd(n,o,0)).min,c=u.max,"row"===this.m_options.getSelectionMode()&&(h=this.createIndex(h.row),c=this.createIndex(c.row))}i===it.keyCodes.LEFT_KEY?(d.column=h.column<n.column?h.column:c.column,d.row=h.row<n.row?h.row:c.row):i===it.keyCodes.RIGHT_KEY?(d.column=c.column>n.column?c.column:h.column,d.row=h.row<n.row?h.row:c.row):i===it.keyCodes.UP_KEY?(d.row=h.row<n.row?h.row:c.row,d.column=h.column<n.column?h.column:c.column):i===it.keyCodes.DOWN_KEY&&(d.row=c.row>n.row?c.row:h.row,d.column=h.column<n.column?h.column:c.column)}else d=this.getCellIndexes(this._getCellByIndex(d));return"row"===this.m_options.getSelectionMode()&&(d=this.createIndex(d.row,this.m_active.indexes.column)),this.m_selectionFrontier=d,u},it.prototype._getMinOrMax=function(e,t,i){return isNaN(e)?isNaN(t)?null:t:isNaN(t)?e:i(e,t)},it.prototype._getSelectionStartAndEnd=function(e,t,i){var n=this.getElementsInRange(this.createRange(e,t));if(null==n||n.length===i)return{min:e,max:t};for(var o={row:this._getMinOrMax(e.row,t.row,Math.min),column:this._getMinOrMax(e.column,t.column,Math.min)},s={row:this._getMinOrMax(e.row,t.row,Math.max),column:this._getMinOrMax(e.column,t.column,Math.max)},r=0;r<n.length;r++){var a=this.getCellIndexes(n[r]),l=this.getCellEndIndexes(n[r]);(a.row<o.row||null==o.row)&&(o.row=a.row),(a.column<o.column||null==o.column)&&(o.column=a.column),(l.row>s.row||null==s.row)&&(s.row=l.row),(l.column>s.column||null==s.column)&&(s.column=l.column)}return this._getSelectionStartAndEnd(o,s,n.length)},it.prototype._getLastAnchoredSelectionIndex=function(e,t){var i;for(i=e.length-1;i>-1;i--)if(this._isContainSelection(t,[e[i]]))return i;return i-1},it.prototype._extendSelectionCallback=function(e,t,i){var n=this.GetSelection(),o=this._getLastAnchoredSelectionIndex(n,t),s=n[o];if(null!=s){var r=s.startIndex.row===i.startIndex.row;null!=s.startIndex.column&&null!=i.startIndex.column&&(r=r&&s.startIndex.column===i.startIndex.column);var a=s.endIndex.row===i.endIndex.row;if(null!=s.endIndex.column&&null!=i.endIndex.column&&(a=a&&s.endIndex.column===i.endIndex.column),!r||!a){var l;if(this.m_discontiguousSelection||e&&this.m_utils.ctrlEquivalent(e)&&0===e.button?(l=n.slice(0),this.unhighlightRange(s),l.splice(o,1)):(l=[],this.unhighlightSelection()),l.push(i),this.m_selection=l,this.m_discontiguousSelection||e&&this.m_utils.ctrlEquivalent(e)&&0===e.button)for(var u=0;u<this.m_selection.length;u++)this.highlightRange(this.m_selection[u]);else this.highlightRange(i,!0);this._makeSelectionFrontierFocus(),this._compareSelectionAndFire(e,n)}}},it.prototype._resetSelectionFrontierFocus=function(){if(!(null==this.m_selectionFrontier||this._isDatabodyCellActive()&&this.m_selectionFrontier.row===this.m_active.indexes.row&&this.m_selectionFrontier.column===this.m_active.indexes.column)){var e=this.createRange(this.m_selectionFrontier),t=this.getElementsInRange(e);null!=t&&t.length>0&&this._unsetAriaProperties(t[0])}},it.prototype._makeSelectionFrontierFocus=function(){if(!(null==this.m_selectionFrontier||this._isDatabodyCellActive()&&this.m_selectionFrontier.row===this.m_active.indexes.row&&this.m_selectionFrontier.column===this.m_active.indexes.column)){if(this._isDatabodyCellActive()){var e=this.createRange(this.m_active.indexes),t=this.getElementsInRange(e);null!=t&&t.length>0&&this._unsetAriaProperties(t[0])}var i=this.createRange(this.m_selectionFrontier),n=this.getElementsInRange(i);if(null!=n&&0!==n.length){this._updateContextInfo(this.m_selectionFrontier);var o=this.m_utils.containsCSSClassName(n[0],this.getMappedStyle("row"))?n[0].firstChild:n[0];this._setAriaProperties(this._createActiveObject(o),null,o)}}},it.prototype._selectHeader=function(e,t,i,n){var o,s;if(-1!==e.indexOf("row")&&this.m_rowHeaderLevelCount-1===i||-1!==e.indexOf("column")&&this.m_columnHeaderLevelCount-1===i)o=t,s=t;else{var r=this._getActiveElement();s=(o=this._getAttribute(r.parentNode,"start",!0))+(this._getAttribute(r.parentNode,"extent",!0)-1)}-1!==e.indexOf("row")?((o===s&&!this.isMultipleSelection()||this.isMultipleSelection())&&(this.setHeaderSelectionFrontier(e,s,t,i,n.target,!0),this._selectEntireRow(o,s,n)),this._setAccInfoText("accessibleRowSelected",{row:t+1})):-1!==e.indexOf("column")&&(this.setHeaderSelectionFrontier(e,s,t,i,n.target,!0),this._selectEntireColumn(o,s,n),this._setAccInfoText("accessibleColumnSelected",{column:t+1})),this.isMultipleSelection()&&(this.m_headerDragState=!0)},it.prototype.setHeaderSelectionFrontier=function(e,t,i,n,o,s){s&&(this.m_selectionFrontier={}),this.m_selectionFrontier.axis=e,this.m_selectionFrontier.end=t,this.m_selectionFrontier.index=i,this.m_selectionFrontier.level=n,this.m_selectionFrontier.target=o},it.prototype.updateSelectionHeader=function(){this.m_selectionFrontier&&this.m_selectionFrontier.target&&(this.m_utils.isTouchDevice()&&(this.m_touchSelectAnchor=this.m_selection[this.m_selection.length-1].startIndex),this.extendSelectionHeader(this.m_selectionFrontier.target,null))},it.prototype.selectAndFocus=function(e,t,i){null==i&&(i=!1),this._resetSelectionFrontierFocus(),this._setActiveByIndex(e,t),"row"===this.m_options.getSelectionMode()&&(e=this.createIndex(e.row));var n=this._getSelectionStartAndEnd(e,e,0),o=n.min,s=n.max;"row"===this.m_options.getSelectionMode()&&(o=this.createIndex(o.row),s=this.createIndex(s.row)),this._createRangeWithKeys(o,s,this._selectAndFocusRangeCallback.bind(this,o,t,i))},it.prototype._selectAndFocusRangeCallback=function(e,t,i,n){var o=this.GetSelection(),s=o.slice(0);i||(this.m_discontiguousSelection||!t||this.isMultipleSelection()&&this.m_utils.ctrlEquivalent(t)&&0===t.button?!this._isDatabodyCellActive()||null==this.m_prevActive||"cell"!==this.m_prevActive.type||this.m_selectionFrontier.row!==this.m_prevActive.indexes.row||this.m_selectionFrontier.column!==this.m_prevActive.indexes.column||this.m_utils.isTouchDevice()||!t.keyCode&&this.isMultipleSelection()||(s.pop(),this._isContainSelection(this.m_prevActive.indexes,s)||this._unhighlightElement(this._getCellByIndex(this.m_prevActive.indexes),["selected","topSelected","bottomSelected"])):(this.unhighlightSelection(),s=[])),this.m_selectionFrontier=e,s.push(n),this.m_selection=s,this.highlightRange(n),this._compareSelectionAndFire(t,o)},it.prototype._compareSelectionAndFire=function(e,t){var i=this.GetSelection();this.m_utils.isTouchDevice()&&this.isMultipleSelection()&&i.length>0&&(this._addTouchSelectionAffordance(e),this._moveTouchSelectionAffordance()),this._compareSelections(i,t)||this.fireSelectionEvent(e,t)},it.prototype._addTouchSelectionAffordance=function(e){if(null==this.m_topSelectIconContainer&&null==this.m_bottomSelectIconContainer){var t=this.getResources().isRTLMode()?"right":"left",i=this._getTouchSelectionAffordanceSize(),n=e.target,o=this.findCell(n);if(o||(o=this.findHeader(n)),!o)return;var s=o[this.getResources().getMappedAttribute("context")],r=this.getElementDir(o,"top"),a=r+this.getElementHeight(o);this.m_topSelectIconContainer=document.createElement("div"),this.m_topSelectIconContainer.className=this.getMappedStyle("toucharea"),this.setElementDir(this.m_topSelectIconContainer,r-i/2,"top");var l=document.createElement("div");l.className=this.getMappedStyle("selectaffordancetop"),l.setAttribute("role","button"),l.setAttribute("aria-label",this.getResources().getTranslatedText("accessibleSelectionAffordanceTop")),this.m_topSelectIconContainer.appendChild(l),this.m_bottomSelectIconContainer=document.createElement("div"),this.m_bottomSelectIconContainer.className=this.getMappedStyle("toucharea"),this.setElementDir(this.m_bottomSelectIconContainer,a-i/2,"top");var u,d=document.createElement("div");d.className=this.getMappedStyle("selectaffordancebottom"),d.setAttribute("role","button"),d.setAttribute("aria-label",this.getResources().getTranslatedText("accessibleSelectionAffordanceBottom")),this.m_bottomSelectIconContainer.appendChild(d),"row"===this.m_options.getSelectionMode()?(u=this.getElementWidth(this.m_databody)/2+this.m_currentScrollLeft-i/2,this.setElementDir(this.m_topSelectIconContainer,u,t),this.setElementDir(this.m_bottomSelectIconContainer,u,t)):s.axis&&-1!==s.axis.indexOf("row")?(u=this.getElementWidth(this.m_databody)/2+this.m_currentScrollLeft-i/2,this.setElementDir(this.m_topSelectIconContainer,u,t),this.setElementDir(this.m_bottomSelectIconContainer,u,t)):s.axis&&-1!==s.axis.indexOf("column")?(r=this.getElementHeight(this.m_databody)/2+this.m_currentScrollTop-i/2,this.setElementDir(this.m_topSelectIconContainer,r,"top"),this.setElementDir(this.m_bottomSelectIconContainer,r,"top"),u=this.getElementDir(o,t)-i/2,this.setElementDir(this.m_topSelectIconContainer,u,t),this.setElementDir(this.m_bottomSelectIconContainer,u+this.calculateColumnWidth(o),t)):(u=this.getElementDir(o,t)-i/2,this.setElementDir(this.m_topSelectIconContainer,u,t),this.setElementDir(this.m_bottomSelectIconContainer,u+this.calculateColumnWidth(o),t)),this.m_databody.firstChild.appendChild(this.m_topSelectIconContainer),this.m_databody.firstChild.appendChild(this.m_bottomSelectIconContainer)}},it.prototype._removeTouchSelectionAffordance=function(){this._isDatabodyCellActive()&&this.m_topSelectIconContainer&&this.m_topSelectIconContainer.parentNode&&(this.m_topSelectIconContainer.parentNode.removeChild(this.m_topSelectIconContainer),this.m_bottomSelectIconContainer.parentNode.removeChild(this.m_bottomSelectIconContainer))},it.prototype._moveTouchSelectionAffordance=function(){var e,t,i=this.getResources().isRTLMode()?"right":"left",n=this.GetSelection();if(n.length>0){var o=this.m_options.getSelectionMode(),s=this._getTouchSelectionAffordanceSize();if(null!=this.m_topSelectIconContainer&&null!=this.m_bottomSelectIconContainer){if("row"===o)e=this._getAxisCellsByKey(n[n.length-1].startKey.row,"row"),t=this._getAxisCellsByKey(n[n.length-1].endKey.row,"row"),this.setElementDir(this.m_topSelectIconContainer,this.getElementDir(e[0],"top")-s/2,"top"),this.setElementDir(this.m_bottomSelectIconContainer,this.getElementDir(t[0],"top")+this.getElementHeight(t[0])-s/2,"top");else if(-1!==n[n.length-1].endIndex.row&&-1===n[n.length-1].endIndex.column){e=this._getAxisCellsByKey(n[n.length-1].startKey.row,"row"),t=this._getAxisCellsByKey(n[n.length-1].endKey.row,"row"),this.setElementDir(this.m_topSelectIconContainer,this.getElementDir(e[0],"top")-s/2,"top"),this.setElementDir(this.m_bottomSelectIconContainer,this.getElementDir(t[0],"top")+this.getElementHeight(t[0])-s/2,"top");var r=this.getElementWidth(this.m_databody)/2+this.m_currentScrollLeft-s/2;this.setElementDir(this.m_topSelectIconContainer,r,i),this.setElementDir(this.m_bottomSelectIconContainer,r,i)}else if(-1!==n[n.length-1].endIndex.column&&-1===n[n.length-1].endIndex.row){e=this._getAxisCellsByKey(n[n.length-1].startKey.column,"column"),t=this._getAxisCellsByKey(n[n.length-1].endKey.column,"column");var a=this.getElementHeight(this.m_databody)/2+this.m_currentScrollTop-s/2;this.setElementDir(this.m_topSelectIconContainer,a,"top"),this.setElementDir(this.m_bottomSelectIconContainer,a,"top"),this.setElementDir(this.m_topSelectIconContainer,this.getElementDir(e[0],"left")-s/2,"left"),this.setElementDir(this.m_bottomSelectIconContainer,this.getElementDir(t[0],"left")+this.getElementWidth(t[0])-s/2,"left")}else{var l=this._getCellByIndex(n[n.length-1].startIndex),u=this._getCellByIndex(n[n.length-1].endIndex);this.setElementDir(this.m_topSelectIconContainer,this.getElementDir(l,"top")-s/2,"top"),this.setElementDir(this.m_bottomSelectIconContainer,this.getElementDir(u,"top")+this.getElementHeight(u)-s/2,"top"),this.setElementDir(this.m_topSelectIconContainer,this.getElementDir(l,i)-s/2,i),this.setElementDir(this.m_bottomSelectIconContainer,this.getElementDir(u,i)+this.getElementWidth(u)-s/2,i)}null==this.m_topSelectIconContainer.parentNode&&(this.m_databody.firstChild.appendChild(this.m_topSelectIconContainer),this.m_databody.firstChild.appendChild(this.m_bottomSelectIconContainer))}}},it.prototype._scrollTouchSelectionAffordance=function(){var e,t,i=this.m_options.getSelectionMode();if("row"===i)null!=this.m_topSelectIconContainer&&(t=this.getResources().isRTLMode()?"right":"left",e=this.getElementWidth(this.m_databody)/2+this.m_currentScrollLeft,this.setElementDir(this.m_topSelectIconContainer,e,t),this.setElementDir(this.m_bottomSelectIconContainer,e,t));else if("cell"===i&&this.isHeaderSelectionType(this.m_selectionFrontier)&&null!=this.m_topSelectIconContainer)if(-1!==this.m_selectionFrontier.axis.indexOf("row"))t=this.getResources().isRTLMode()?"right":"left",e=this.getElementWidth(this.m_databody)/2+this.m_currentScrollLeft,this.setElementDir(this.m_topSelectIconContainer,e,t),this.setElementDir(this.m_bottomSelectIconContainer,e,t);else{var n=this.getElementHeight(this.m_databody)/2+this.m_currentScrollTop;this.setElementDir(this.m_topSelectIconContainer,n,"top"),this.setElementDir(this.m_bottomSelectIconContainer,n,"top")}},it.prototype._getTouchSelectionAffordanceSize=function(){if(null==this.m_touchSelectionAffordanceSize){var e=document.createElement("div");e.className=this.getMappedStyle("toucharea"),e.style.visibilty="hidden",e.style.top="0px",e.style.visibilty="0px",this.m_root.appendChild(e);var t=e.offsetWidth;this.m_root.removeChild(e),this.m_touchSelectionAffordanceSize=t}return this.m_touchSelectionAffordanceSize},it.SORT_ANIMATION_DURATION=800,it.prototype._handleSortMouseOver=function(e){if(!this._databodyEmpty()){var t=e.target,i=this.findHeader(t);i&&this._showOrHideSortIcon(i,!1),(this.m_utils.containsCSSClassName(t,this.getMappedStyle("sortascending"))||this.m_utils.containsCSSClassName(t,this.getMappedStyle("sortdescending")))&&this.m_utils.addCSSClassName(t,this.getMappedStyle("hover"))}},it.prototype._handleSortMouseOut=function(e){if(!this._databodyEmpty()){var t=e.target,i=e.relatedTarget,n=this.findHeader(t);null!=n&&null!=i&&n===this.findHeader(i)||this._showOrHideSortIcon(n,!0),(this.m_utils.containsCSSClassName(t,this.getMappedStyle("sortascending"))||this.m_utils.containsCSSClassName(t,this.getMappedStyle("sortdescending")))&&(this.m_utils.removeCSSClassName(t,this.getMappedStyle("hover")),this.m_utils.removeCSSClassName(t,this.getMappedStyle("selected")))}},it.prototype._handleSortIconMouseDown=function(e){this._databodyEmpty()||this.m_utils.addCSSClassName(e,this.getMappedStyle("selected"))},it.prototype._toggleSortIconDirection=function(e,t){if(null!=e){var i=this._getSortIcon(e);"descending"===t&&this.m_utils.containsCSSClassName(i,this.getMappedStyle("sortascending"))?(this.m_utils.removeCSSClassName(i,this.getMappedStyle("sortascending")),this.m_utils.addCSSClassName(i,this.getMappedStyle("sortdescending"))):"ascending"===t&&this.m_utils.containsCSSClassName(i,this.getMappedStyle("sortdescending"))&&(this.m_utils.removeCSSClassName(i,this.getMappedStyle("sortdescending")),this.m_utils.addCSSClassName(i,this.getMappedStyle("sortascending")))}},it.prototype._showOrHideSortIcon=function(e,t){var i=!1;if(null!=e){var n=this._getSortIcon(e);null!=this.m_sortInfo&&(i=this.m_sortInfo.key===this._getKey(e)),!1!==t||i?!0!==t||i||(this.m_utils.removeCSSClassName(n,this.getMappedStyle("default")),this.m_utils.addCSSClassName(n,this.getMappedStyle("disabled"))):(this.m_utils.removeCSSClassName(n,this.getMappedStyle("disabled")),this.m_utils.addCSSClassName(n,this.getMappedStyle("default")))}},it.prototype._buildSortIcon=function(e){var t=document.createElement("div");t.className=this.getMappedStyle("sortcontainer");var i=document.createElement("div"),n=this.getMappedStyle("icon")+" "+this.getMappedStyle("clickableicon"),o=null!=this.m_sortInfo?this.m_sortInfo.key:null;if(e.key===o){var s=null!=this.m_sortInfo?this.m_sortInfo.direction:null;"ascending"===s?i.className=this.getMappedStyle("sortascending")+" "+n+" "+this.getMappedStyle("default"):"descending"===s&&(i.className=this.getMappedStyle("sortdescending")+" "+n+" "+this.getMappedStyle("default"))}else n+=" "+this.getMappedStyle("disabled"),i.className=this.getMappedStyle("sortascending")+" "+n;return t.appendChild(i),t},it.prototype._handleKeyboardSort=function(e,t){if(!this._databodyEmpty()){var i=e.getAttribute(this.getResources().getMappedAttribute("sortDir"));i=null==i||"descending"===i?"ascending":"descending",this._doHeaderSort(t,e,i)}},it.prototype._handleHeaderSort=function(e,t){if(!this._databodyEmpty()){var i=e.target,n=this.findHeader(i);null!=n&&(null==t&&(t=null!=this.m_sortInfo&&this.m_sortInfo.key===this._getKey(n)&&"ascending"===this.m_sortInfo.direction?"descending":"ascending"),this._doHeaderSort(e,n,t))}},it.prototype._handleCellSort=function(e,t,i){null==i||this._databodyEmpty()||(this._removeTouchSelectionAffordance(),this._doHeaderSort(e,i,t))},it.prototype._doHeaderSort=function(e,t,i){if(!0!==this.m_isSorting){this.m_delayedSort=null;var n=this._getKey(t),o=this._getAxis(t);if(this._removeSortSelection(),t.setAttribute(this.getResources().getMappedAttribute("sortDir"),i),this.m_sortInfo={event:e,key:n,axis:o,direction:i},this._toggleSortIconDirection(t,i),this._addSortSelection(),null!=i&&null!=n&&null!=o){this.m_isSorting=!0,this.showStatusText();var s={axis:o,key:n,direction:i};this.getDataSource().sort(s,{success:this._handleSortSuccess.bind(this),error:this._handleSortError.bind(this)})}this._setAccInfoText("ascending"===i?"accessibleSortAscending":"accessibleSortDescending",{id:n})}else this.m_delayedSort={event:e,header:t,direction:i}},it.prototype._handleSortError=function(){this.hideStatusText()},it.prototype._removeSortSelection=function(){if(null!=this.m_sortInfo){var e=this._findHeaderByKey(this.m_sortInfo.key,this.m_colHeader,this.getMappedStyle("colheadercell"));e.removeAttribute(this.getResources().getMappedAttribute("sortDir"));var t=this._getSortIcon(e);this._toggleSortIconDirection(e,"ascending"),"descending"===this.m_sortInfo.direction&&(this.m_utils.removeCSSClassName(t,this.getMappedStyle("sortdescending")),this.m_utils.addCSSClassName(t,this.getMappedStyle("sortascending"))),this.m_utils.addCSSClassName(t,this.getMappedStyle("disabled")),this.m_utils.removeCSSClassName(t,this.getMappedStyle("default")),this.m_utils.removeCSSClassName(this._getSortContainer(e),this.getMappedStyle("enabled"))}},it.prototype._addSortSelection=function(){if(null!=this.m_sortInfo){var e=this._findHeaderByKey(this.m_sortInfo.key,this.m_colHeader,this.getMappedStyle("colheadercell")),t=this._getSortIcon(e);this.m_utils.addCSSClassName(t,this.getMappedStyle("default")),this.m_utils.removeCSSClassName(t,this.getMappedStyle("disabled")),this.m_utils.removeCSSClassName(t,this.getMappedStyle("selected")),this.m_utils.addCSSClassName(this._getSortContainer(e),this.getMappedStyle("enabled"))}},it.prototype._getAxis=function(e){var t=this.getMappedStyle("colheadercell"),i=this.getMappedStyle("rowheadercell");return this.m_utils.containsCSSClassName(e,t)?"column":this.m_utils.containsCSSClassName(e,i)?"row":null},it.prototype._handleSortSuccess=function(){this.hideStatusText(),this._isDatabodyCellActive()?this._indexes({row:this.m_active.keys.row,column:this.m_active.keys.column},this._handlePreSortScrolling):this._fetchForSort(this.m_startRow,this.m_endRow-this.m_startRow+1,!1)},it.prototype._handlePreSortScrolling=function(e){var t=(-1===e.row?0:e.row)*this.m_avgRowHeight,i=t+this.m_avgRowHeight,n=this._isHighWatermarkScrolling();if(this.m_currentScrollTop<=t&&i<=this.m_currentScrollTop+this.getElementHeight(this.m_databody)||n)this._fetchForSort(this.m_startRow,this.m_endRow-this.m_startRow+1,!1);else{this.m_currentScrollTop=Math.min(t,this._getMaxScrollHeight());var o=Math.floor(this.m_currentScrollTop/this.m_avgRowHeight),s=o*this.m_avgRowHeight;this.m_startRow=o,this.m_endRow=-1,this.m_startRowHeader=o,this.m_endRowHeader=-1,this.m_startRowPixel=s,this.m_endRowPixel=s,this.m_startRowHeaderPixel=s,this.m_endRowHeaderPixel=s,this._fetchForSort(o,null,!0)}},it.prototype._fetchForSort=function(e,t,i){var n=document.createDocumentFragment(),o=document.createDocumentFragment();this.fetchHeaders("row",e,n,o,t,{success:this.handleHeadersFetchSuccessForSort.bind(this),error:this.handleCellsFetchError}),this.fetchCells(this.m_databody,e,this.m_startCol,t,this.m_endCol-this.m_startCol+1,{success:this.handleCellsFetchSuccessForSort.bind(this,n,o,i),error:this.handleCellsFetchError})},it.prototype.handleHeadersFetchSuccessForSort=function(e,t,i,n){var o,s,r,a,l,u,d,h=t.axis,c=t.start,p=t.header,_=t.endHeader;if(this.m_fetching[h]=!1,null!=e){for(o=e.getCount(),a=0,s=0,u=this.getMappedStyle("headercell")+" "+this.getMappedStyle("rowheadercell"),d=this.m_options.getRenderer("row");o-s>0;)r=c+s,s+=(l=this.buildLevelHeaders(p,r,0,0,this.m_startRowPixel+a,!0,n,d,e,"row",u,this.m_rowHeaderLevelCount)).count,a+=l.totalHeaderDimension;this.m_endRowHeader=this.m_startRowHeader+(o-1),this.m_endRowHeaderPixel=this.m_startRowHeaderPixel+a}if(null!=i){for(o=i.getCount(),a=0,s=0,u=this.getMappedStyle("endheadercell")+" "+this.getMappedStyle("rowendheadercell"),d=this.m_options.getRenderer("rowEnd");o-s>0;)r=c+s,s+=(l=this.buildLevelHeaders(_,r,0,0,this.m_startRowPixel+a,!0,n,d,i,"rowEnd",u,this.m_rowEndHeaderLevelCount)).count,a+=l.totalHeaderDimension;this.m_endRowEndHeader=this.m_startRowEndHeader+(o-1),this.m_endRowEndHeaderPixel=this.m_startRowEndHeaderPixel+a}this._signalTaskEnd()},it.prototype.handleCellsFetchSuccessForSort=function(e,t,i,n,o){var s;this.m_fetching.cells=!1;var r=it.SORT_ANIMATION_DURATION;this.isFetchComplete()&&this.hideStatusText();var a=o[0].start,l=n.getCount("row"),u=o[1].start,d=document.createDocumentFragment(),h=this._addCellsToFragment(d,n,a,this.m_startRowPixel,u,this.m_startColPixel);this.m_endRow=this.m_startRow+(l-1),this.m_endRowPixel=this.m_startRowPixel+h.totalRowHeight;var c=this.m_databody.firstChild,p=this.m_rowHeader.firstChild,_=this.m_rowEndHeader.firstChild;!0===i&&(s=this._isHighWatermarkScrolling(),this.m_utils.isTouchDevice()?(this._disableTouchScrollAnimation(),this.scrollTo(this.m_currentScrollLeft,this.m_currentScrollTop)):(this.m_silentScroll=!0,this.m_databody.scrollTop=this.m_currentScrollTop,this._syncScroller())),!r||0===r||!this.m_utils.supportsTransitions()||1===l||this.m_rowHeaderLevelCount>1&&null!=this.m_rowHeaderLevelCount||!1===s?(this._signalTaskStart(),this._handleSortEnd(d,e,t)):this.processSortAnimationToPosition(r,0,"ease-in",p,e,c,d,_,t),this._signalTaskEnd()},it.prototype._handleSortEnd=function(e,t,i){var n;t.childNodes.length>1&&(n=this.m_rowHeader.firstChild,this.m_utils.empty(n),n.appendChild(t)),i.childNodes.length>1&&(n=this.m_rowEndHeader.firstChild,this.m_utils.empty(n),n.appendChild(i));var o=this.m_databody.firstChild;this._emptyDatabody(o),this._populateDatabody(o,e),this._fireSortEvent(),this._restoreActive(),this.m_isSorting=!1,this._doDelayedSort(),this.m_animating=!1,this._signalTaskEnd(),this._runModelEventQueue()},it.prototype.processSortAnimationToPosition=function(e,t,i,n,o,s,r,a,l){var u,d,h,c,p,_,m,g,f,v,y,b=this;this._signalTaskStart();var C=o.childNodes.length>1,S=l.childNodes.length>1,E=this.getResources().isRTLMode()?"right":"left",T=this._getViewportBottom(),D=this._getViewportLeft(),A=this._getViewportRight(),I={},O={};for(c=0;c<s.childNodes.length;c++)p=s.childNodes[c],u=this._getKey(p,"row"),y=(v=this.getElementDir(p,E))+this.getElementWidth(p),_=(d=this.getElementDir(p,"top"))+this.getElementHeight(p),this._isCellBoundryInViewport(v,y,d,_)&&(I[u]?I[u].cell.push(p):(h=T,I[u]={cell:[p],oldTop:d,newTop:h}),h-d!=0&&(g=p));for(c=0;c<n.childNodes.length;c++)C&&(p=n.childNodes[c],u=this._getKey(p,"row"),_=(d=this.getElementDir(p,"top"))+this.getElementHeight(p),this._isCellBoundryInViewport(D,A,d,_)&&(h=T,I[u]||(I[u]={oldTop:d,newTop:h}),I[u].rowHeader=p));for(c=0;c<a.childNodes.length;c++)C&&(p=a.childNodes[c],u=this._getKey(p,"row"),_=(d=this.getElementDir(p,"top"))+this.getElementHeight(p),this._isCellBoundryInViewport(D,A,d,_)&&(h=T,I[u]||(I[u]={oldTop:d,newTop:h}),I[u].rowEndHeader=p));for(c=0;c<r.childNodes.length;c++)if(p=r.childNodes[c],u=this._getKey(p,"row"),h=this.getElementDir(p,"top"),I[u])I[u].newTop=h;else if(d=T,m=h+this.getElementHeight(p),y=(v=this.getElementDir(p,E))+this.getElementWidth(p),this._isCellBoundryInViewport(v,y,h,m)){var w=p.cloneNode(!0);w[this.getResources().getMappedAttribute("context")]=p[this.getResources().getMappedAttribute("context")],this.setElementDir(w,d,"top"),s.appendChild(w),O[u]?O[u].cell.push(w):O[u]={cell:[w],oldTop:d,newTop:h,add:!0},h-d!=0&&(g=w)}for(c=0;c<o.childNodes.length;c++)if(C){var R=o.childNodes[c];u=this._getKey(R,"row"),I[u]||(m=(h=this.getElementDir(R,"top"))+this.getElementHeight(R),d=T,this._isCellBoundryInViewport(D,A,h,m)&&((f=R.cloneNode(!0))[this.getResources().getMappedAttribute("context")]=R[this.getResources().getMappedAttribute("context")],this.setElementDir(f,d,"top"),n.appendChild(f),O[u]||(O[u]={oldTop:d,newTop:h,add:!0}),O[u].rowHeader=f))}for(c=0;c<l.childNodes.length;c++)if(S){var x=l.childNodes[c];u=this._getKey(x,"row"),I[u]||(m=(h=this.getElementDir(x,"top"))+this.getElementHeight(x),d=T,this._isCellBoundryInViewport(D,-1,h,m)&&((f=x.cloneNode(!0))[this.getResources().getMappedAttribute("context")]=x[this.getResources().getMappedAttribute("context")],this.setElementDir(f,d,"top"),a.appendChild(f),O[u].rowEndHeader=f,O[u]||(O[u]={oldTop:d,newTop:h,add:!0})))}if(null!=g){var L=this._handleSortEnd.bind(this,r,o,l);b._onTransitionEnd(g,L,e),this.m_animating=!0,setTimeout(function(){var n,o,s,r,a,l=Object.keys(I);for(a=0;a<l.length;a++){if(u=l[a],s=I[l[a]],o=t+"ms",n=s.newTop-s.oldTop,s.cell)for(r=0;r<s.cell.length;r++)b.addTransformMoveStyle(s.cell[r],e/2+"ms",o,i,0,n,0);C&&s.rowHeader&&b.addTransformMoveStyle(s.rowHeader,e/2+"ms",o,i,0,n,0),S&&s.rowEndHeader&&b.addTransformMoveStyle(s.rowEndHeader,e/2+"ms",o,i,0,n,0)}for(l=Object.keys(O),a=0;a<l.length;a++){if(u=l[a],s=O[l[a]],o=t*r+"ms",n=s.newTop-s.oldTop,s.cell)for(var d=0;d<s.cell.length;d++)b.addTransformMoveStyle(s.cell[d],e/2+"ms",o,i,0,n,0);C&&s.rowHeader&&b.addTransformMoveStyle(s.rowHeader,e/2+"ms",o,i,0,n,0),S&&s.rowEndHeader&&b.addTransformMoveStyle(s.rowEndHeader,e/2+"ms",o,i,0,n,0)}},0)}else this._handleSortEnd(r,o,l)},it.prototype._restoreActive=function(){if(null!=this.m_active){var e=this.m_active.axis,t=this.m_sortInfo.originalEvent;if("cell"===this.m_active.type){var i=this._getCellByKeys(this.m_active.keys);if(null!=i){var n=this.getCellIndexes(i);this._isSelectionEnabled()?this.selectAndFocus(n,t):this._setActiveByIndex(n,t)}else this._setActive(null,null,t,!0),this._isSelectionEnabled()&&this._clearSelection(t)}else if("row"===e||"rowEnd"===e){var o="row"===e?this.m_rowHeader:this.m_rowEndHeader,s="row"===e?this.getMappedStyle("rowheadercell"):this.getMappedStyle("rowendheadercell"),r=this._findHeaderByKey(this.m_active.key,o,s);if(null!=r){var a=r[this.getResources().getMappedAttribute("context")];this._setActive(r,{type:"header",axis:e,index:a.index,key:a.key,level:a.level},t)}else this._setActive(null,null,t)}}},it.prototype._getSortIcon=function(e){return e.lastChild.firstChild},it.prototype._getSortContainer=function(e){return e.lastChild},it.prototype._fireSortEvent=function(){var e={event:this.m_sortInfo.event,ui:{header:this.m_sortInfo.key,direction:this.m_sortInfo.direction}};this.fireEvent("sort",e)},it.prototype._doDelayedSort=function(){null!=this.m_delayedSort?this._doHeaderSort(this.m_delayedSort.event,this.m_delayedSort.header,this.m_delayedSort.direction):this.fillViewport()},it.RESIZE_OFFSET=5,it.RESIZE_TOUCH_OFFSET=8,it.prototype.handleResize=function(e){if(!1===this.m_isResizing){var t=this.find(e.target,"header");null==t&&(t=this.find(e.target,"endheader")),null==t||t!==this.m_rowHeader&&t!==this.m_colHeader&&t!==this.m_rowEndHeader&&t!==this.m_colEndHeader||(this.m_cursor=this.manageHeaderCursor(e),null!=this.m_resizingElement&&("default"===this.m_cursor?(this.m_resizingElement.style.cursor="",null!=this.m_resizingElementSibling&&(this.m_resizingElementSibling.style.cursor="")):(this.m_resizingElement.style.cursor=this.m_cursor,null!=this.m_resizingElementSibling&&(this.m_resizingElementSibling.style.cursor=this.m_cursor))))}else this.handleResizeMouseMove(e)},it.prototype.handleResizeMouseDown=function(e){return("col-resize"===this.m_cursor||"row-resize"===this.m_cursor)&&(this.m_isResizing=!0,this.m_utils.isTouchDevice()?(this.m_lastMouseX=e.touches[0].pageX,this.m_lastMouseY=e.touches[0].pageY):(document.addEventListener("mousemove",this.m_docMouseMoveListener,!1),document.addEventListener("mouseup",this.m_docMouseUpListener,!1),this.m_lastMouseX=e.pageX,this.m_lastMouseY=e.pageY),this.m_overResizeLeft=0,this.m_overResizeMinLeft=0,this.m_overResizeTop=0,this.m_overResizeMinTop=0,this.m_overResizeRight=0,this.m_overResizeBottom=0,this.m_orginalResizeDimensions={width:this.getElementWidth(this.m_resizingElement),height:this.getElementHeight(this.m_resizingElement)},!0)},it.prototype.handleResizeMouseUp=function(e){if(!0===this.m_isResizing){var t=this.getElementWidth(this.m_resizingElement),i=this.getElementHeight(this.m_resizingElement);if(t!==this.m_orginalResizeDimensions.width||i!==this.m_orginalResizeDimensions.height){var n="col-resize"===this.m_cursor?this.m_resizingElement.style.width:this.m_resizingElement.style.height,o={event:e,ui:{header:this._getKey(this.m_resizingElement),oldDimensions:{width:this.m_orginalResizeDimensions.width,height:this.m_orginalResizeDimensions.height},newDimensions:{width:this.getElementWidth(this.m_resizingElement),height:this.getElementHeight(this.m_resizingElement)},size:n}};this.fireEvent("resize",o)}this.m_isResizing=!1,this.m_cursor="default",this.m_resizingElement.style.cursor="",null!=this.m_resizingElementSibling&&(this.m_resizingElementSibling.style.cursor=""),this.m_resizingElement=null,this.m_resizingElementMin=null,this.m_resizingElementSibling=null,this.m_orginalResizeDimensions=null,document.removeEventListener("mousemove",this.m_docMouseMoveListener,!1),document.removeEventListener("mouseup",this.m_docMouseUpListener,!1)}},it.prototype._isDOMElementResizable=function(e){return null!=e&&"true"===e.getAttribute(this.getResources().getMappedAttribute("resizable"))},it.prototype.manageHeaderCursor=function(e){var t,i,n,o,s,r,a,l,u=this.find(e.target,"headercell");if(u||(u=this.find(e.target,"endheadercell")),!u)return"default";var d=this.getHeaderCellAxis(u),h=this.getHeaderCellIndex(u),c=this.getHeaderCellLevel(u);"column"===d?(s="enable"===this.m_options.isResizable(d,"height"),o=this._isDOMElementResizable(u),a=this._getHeaderByIndex(h-1,c,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader),r=this._isDOMElementResizable(a),l=this._getHeaderByIndex(h,c-1,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader)):"row"===d?(o="enable"===this.m_options.isResizable(d,"width"),s=this._isDOMElementResizable(u),a=this._getHeaderByIndex(h-1,c,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader),r=this._isDOMElementResizable(a),l=this._getHeaderByIndex(h,c-1,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader)):"columnEnd"===d?(s="enable"===this.m_options.isResizable(d).height,o=this._isDOMElementResizable(u),a=this._getHeaderByIndex(h-1,c,this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader),r=this._isDOMElementResizable(a),l=this._getHeaderByIndex(h,c-1,this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader)):"rowEnd"===d&&(o="enable"===this.m_options.isResizable(d).width,s=this._isDOMElementResizable(u),a=this._getHeaderByIndex(h-1,c,this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader),r=this._isDOMElementResizable(a),l=this._getHeaderByIndex(h,c-1,this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader)),this.m_utils.isTouchDevice()?(t=e.touches[0].pageX,i=e.touches[0].pageY,n=it.RESIZE_TOUCH_OFFSET):(t=e.pageX,i=e.pageY,n=it.RESIZE_OFFSET);var p=this.getHeaderEdgePixels(u),_=this.getResources().isRTLMode(),m="columnEnd"===d||"rowEnd"===d,g=t<p[0]+n,f=i<p[1]+n,v=t>p[2]-n,y=i>p[3]-n;if("column"===d||"columnEnd"===d){if(o&&(_?g:v))return this.m_resizingElement=u,"col-resize";if(r&&(_?v:g)){if(this.m_resizingElement=a,this.m_resizingElementSibling=u,null!==this.m_resizingElement)return"col-resize"}else if(s){if(!m&&y||m&&f)return this.m_resizingElement=u,"row-resize";if(!m&&f||m&&y)return this.m_resizingElement=l,this.m_resizingElementSibling=u,"row-resize"}}else if("row"===d||"rowEnd"===d){if(s&&y)return this.m_resizingElement=u,"row-resize";if(r&&f&&(this.m_resizingElement=a,this.m_resizingElementSibling=u,null!==this.m_resizingElement))return"row-resize";if(o){if(!m&&(_?g:v)||m&&(_?v:g))return this.m_resizingElement=u,"col-resize";if((!m&&(_?v:g)||m&&(_?g:v))&&(this.m_resizingElement=l,this.m_resizingElementSibling=u,null!==this.m_resizingElement))return"col-resize"}}return"default"},it.prototype.handleResizeMouseMove=function(e){var t,i,n,o,s;this.m_currentMouseX=e.pageX,this.m_currentMouseY=e.pageY,this.m_utils.isTouchDevice()?(this.m_currentMouseX=e.touches[0].pageX,this.m_currentMouseY=e.touches[0].pageY):(this.m_currentMouseX=e.pageX,this.m_currentMouseY=e.pageY),t=this.m_utils.containsCSSClassName(this.m_resizingElement,this.getMappedStyle("colheadercell"))||this.m_utils.containsCSSClassName(this.m_resizingElement,this.getMappedStyle("colendheadercell"))?"column":"row";var r=this.m_utils.containsCSSClassName(this.m_resizingElement,this.getMappedStyle("endheadercell"));"col-resize"===this.m_cursor?"column"===t?(i=this.calculateColumnHeaderWidth(this.m_resizingElement),n=this.getNewElementWidth("column",i,r),this.resizeColWidth(i,n)):"row"===t&&(i=this.getElementWidth(this.m_resizingElement),n=this.getNewElementWidth("row",i,r),this.resizeRowWidth(n,n-i,r)):"row-resize"===this.m_cursor&&("row"===t?(o=this.calculateRowHeaderHeight(this.m_resizingElement),s=this.getNewElementHeight("row",o,r),this.resizeRowHeight(o,s)):"column"===t&&(o=this.getElementHeight(this.m_resizingElement),s=this.getNewElementHeight("column",o,r),this.resizeColHeight(s,s-o,r))),this.buildCorners(),this.m_utils.isTouchDevice()&&this._moveTouchSelectionAffordance(),this.m_lastMouseX=this.m_currentMouseX,this.m_lastMouseY=this.m_currentMouseY},it.prototype.resizeColWidth=function(e,t){var i,n=t-e;if(0!==n){if(null!=this.m_databody.firstChild)i=this.getElementWidth(this.m_databody.firstChild)+n,this.setElementWidth(this.m_databody.firstChild,i);this.resizeColumnWidthAndShift(n),this.m_endColPixel+=n,this.m_endColHeaderPixel+=n,this.m_endColEndHeaderPixel+=n,null!=i&&(this.m_avgColWidth=i/this.getDataSource().getCount("column")),this.manageResizeScrollbars()}},it.prototype.resizeRowHeight=function(e,t){var i,n=t-e;if(0!==n){if(null!=this.m_databody.firstChild)i=this.getElementHeight(this.m_databody.firstChild)+n,this.setElementHeight(this.m_databody.firstChild,i);this.resizeRowHeightAndShift(n),this.m_endRowPixel+=n,this.m_endRowHeaderPixel+=n,this.m_endRowEndHeaderPixel+=n,null!=i&&(this.m_avgRowHeight=i/this.getDataSource().getCount("row")),this.manageResizeScrollbars()}},it.prototype.resizeColHeight=function(e,t,i){if(0!==t){var n=this.getHeaderCellLevel(this.m_resizingElement)+(this.getHeaderCellDepth(this.m_resizingElement)-1);if(i?this.m_columnEndHeaderLevelHeights[n]+=t:this.m_columnHeaderLevelHeights[n]+=t,this.resizeColumnHeightsAndShift(t,n,i,!0),i)this.m_colEndHeaderHeight+=t,this.setElementHeight(this.m_colEndHeader,this.m_colEndHeaderHeight);else if(this.m_colHeaderHeight+=t,this.setElementHeight(this.m_colHeader,this.m_colHeaderHeight),0===this.m_headerLabels.column.length)this._resizeHeaderLabelDirs(n,t,["row"],"height");else if(n===this.m_columnHeaderLevelCount-1&&this.m_headerLabels.row.length){var o=e/2,s=this._getLabel("row",this.m_rowHeaderLevelCount-1),r=this._getLabel("column",this.m_columnHeaderLevelCount-1);this.setElementHeight(r,Math.ceil(o)),this._resizeHeaderLabelDirs(this.m_rowHeaderLevelCount-1,Math.floor(o)-this.getElementHeight(s),["row"],"height")}this.manageResizeScrollbars()}},it.prototype.resizeRowWidth=function(e,t,i){if(0!==t){var n=this.getHeaderCellLevel(this.m_resizingElement)+(this.getHeaderCellDepth(this.m_resizingElement)-1);i?this.m_rowEndHeaderLevelWidths[n]+=t:this.m_rowHeaderLevelWidths[n]+=t,this.resizeRowWidthsAndShift(t,n,i),i?(this.m_rowEndHeaderWidth+=t,this.setElementWidth(this.m_rowEndHeader,this.m_rowEndHeaderWidth)):(this.m_rowHeaderWidth+=t,this.setElementWidth(this.m_rowHeader,this.m_rowHeaderWidth),n!==this.m_rowHeaderLevelCount-1&&0!==this.m_headerLabels.row.length||this._resizeHeaderLabelDirs(n,t,["column"],"width")),this.manageResizeScrollbars()}},it.prototype._resizeHeaderLabelDirs=function(e,t,i,n){for(var o=0;o<i.length;o++)for(var s=i[o],r=0;r<this.m_headerLabels[s].length;r++){var a=this.m_headerLabels[s][r],l=this.getElementDir(a,n)+t;this.setElementDir(a,l,n)}},it.prototype.getNewElementWidth=function(e,t,i,n){var o=this._getMinValue("width",e);null==n&&(n=this.getResources().isRTLMode()?this.m_lastMouseX-this.m_currentMouseX:this.m_currentMouseX-this.m_lastMouseX),i&&"row"===e&&(n*=-1);var s=t+n+this.m_overResizeLeft+this.m_overResizeMinLeft+this.m_overResizeRight,r=Math.round(this.getWidth()/2);return s<o?(this.m_overResizeMinLeft+=n-o+t,s=o):(this.m_overResizeMinLeft=0,this.m_overResizeLeft=0),"row"===e&&(s>r?(this.m_overResizeRight+=n-r+t,s=r):this.m_overResizeRight=0),s},it.prototype.getNewElementHeight=function(e,t,i,n){var o=this._getMinValue("height",e);"column"===e&&!i&&this.getHeaderCellLevel(this.m_resizingElement)+this.getHeaderCellDepth(this.m_resizingElement)===this.m_columnHeaderLevelCount&&this.m_headerLabels.row.length&&this.m_headerLabels.column.length&&(o+=this.getElementHeight(this.m_headerLabels.row[this.m_headerLabels.row.length-1])),null==n&&(n=this.m_currentMouseY-this.m_lastMouseY),i&&"column"===e&&(n*=-1);var s=t+n+this.m_overResizeTop+this.m_overResizeMinTop+this.m_overResizeBottom,r=Math.round(this.getHeight()/2);return s<o?(this.m_overResizeMinTop+=n-o+t,s=o):(this.m_overResizeMinTop=0,this.m_overResizeTop=0),"column"===e&&(s>r?(this.m_overResizeBottom+=n-r+t,s=r):this.m_overResizeBottom=0),s},it.prototype._getMinValue=function(e,t){var i,n,o=this.m_resizingElement,s=this.getHeaderCellLevel(o),r=this.getHeaderCellDepth(o),a=this._getCellPaddingBorder(e,o),l=Math.max(this.m_utils.isTouchDevice()?2*it.RESIZE_TOUCH_OFFSET:2*it.RESIZE_OFFSET,a);if("column"===t&&(1===this.m_columnHeaderLevelCount||"width"===e&&this.m_columnHeaderLevelCount===s+1||"height"===e&&1===r)||"row"===t&&(1===this.m_rowHeaderLevelCount||"height"===e&&this.m_rowHeaderLevelCount===s+1||"width"===e&&1===r))return l;var u=this.getHeaderCellIndex(o),d=this._getAttribute(this.m_resizingElement.parentNode,"extent",!0),h=this.getElementDir(o,e);return"column"===t?"width"===e?(i=this._getHeaderByIndex(u+(d-1),this.m_columnHeaderLevelCount-1,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader),n=this.getElementDir(i,e)):n=this._getHeaderLevelDimension(s+(r-1),o,this.m_columnHeaderLevelWidths,"height",1):"row"===t&&("height"===e?(i=this._getHeaderByIndex(u+(d-1),this.m_rowHeaderLevelCount-1,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader),n=this.getElementDir(i,e)):n=this._getHeaderLevelDimension(s+(r-1),o,this.m_rowHeaderLevelWidths,"width",1)),h-(n-l)},it.prototype._getCellPaddingBorder=function(e,t){if(null==this.m_resizingElementMin){for(var i=["top","right","bottom","left"],n="width"===e?1:0,o=0,s=window.getComputedStyle(t);n<4;n+=2)o+=parseFloat(s.getPropertyValue("padding-"+i[n])),o+=parseFloat(s.getPropertyValue("border-"+i[n]+"-width"));this.m_resizingElementMin=Math.round(o)}return this.m_resizingElementMin},it.prototype.manageResizeScrollbars=function(){var e=this.getWidth(),t=this.getHeight(),i=this.m_colHeader,n=this.m_colEndHeader,o=this.m_rowHeader,s=this.m_rowEndHeader,r=this.m_databody,a=r.firstChild,l=this.getColumnHeaderHeight(),u=this.getColumnEndHeaderHeight(),d=this.getRowHeaderWidth(),h=t-l-u,c=e-d-this.getRowEndHeaderWidth(),p=this.m_utils.getScrollbarSize(),_=this.getResources().isRTLMode()?"right":"left";if(this._databodyEmpty()){var m;null==this.m_empty?(m=this._buildEmptyText(),this.m_root.appendChild(m)):m=this.m_empty;var g=this.getElementHeight(m),f=this.getElementWidth(m);g>this.getElementHeight(a)&&this.setElementHeight(a,g),f>this.getElementWidth(a)&&this.setElementWidth(a,f)}var v,y,b,C,S,E=this.getElementWidth(r.firstChild),T=this.getElementHeight(r.firstChild),D=this.isDatabodyHorizontalScrollbarRequired(c);D?(v=this.isDatabodyVerticalScrollbarRequired(h-p),r.style.overflow="auto"):(v=this.isDatabodyVerticalScrollbarRequired(h))?(D=this.isDatabodyHorizontalScrollbarRequired(c-p),r.style.overflow="auto"):r.style.overflow="hidden",this.m_hasHorizontalScroller=D,this.m_hasVerticalScroller=v,-1!==this.m_endColEndHeader?(y=Math.min(T+(D?p:0),h),b=D?y-p:y):(y=h,b=Math.min(T,D?y-p:y)),-1!==this.m_endRowEndHeader?(C=Math.min(E+(v?p:0),c),S=v?C-p:C):(C=c,S=Math.min(E,v?C-p:C));var A=d+S+(v?p:0),I=l+b+(D?p:0);if(this.setElementDir(o,0,_),this.setElementDir(o,l,"top"),this.setElementHeight(o,b),this.setElementDir(s,A,_),this.setElementDir(s,l,"top"),this.setElementHeight(s,b),this.setElementDir(i,d,_),this.setElementWidth(i,S),this.setElementDir(n,d,_),this.setElementDir(n,I,"top"),this.setElementWidth(n,S),this.setElementDir(r,l,"top"),this.setElementDir(r,d,_),this.setElementWidth(r,C),this.setElementHeight(r,y),this.m_scrollWidth=E-S,this.m_scrollHeight=T-b,this.buildCorners(),this._adjustHeaderBorders(),this._updateGridlines(),this.m_utils.isTouchDevice()){var O=0,w=0;if(this.m_currentScrollLeft>this.m_scrollWidth&&(O=this.m_scrollWidth-this.m_currentScrollLeft),this.m_currentScrollTop>this.m_scrollHeight&&(w=this.m_scrollHeight-this.m_currentScrollTop),0!==O||0!==w){this._disableTouchScrollAnimation();var R=this.adjustTouchScroll(O,w);O=R[0],w=R[1],this.scrollDelta(O,w)}}},it.prototype.resizeColumnWidthAndShift=function(e){var t=this.getResources().isRTLMode()?"right":"left",i=this.m_colHeader.style.display,n=this.m_colEndHeader.style.display;this.m_databody.style.display="none",this.m_colHeader.style.display="none",this.m_colEndHeader.style.display="none";var o=this.getHeaderCellIndex(this.m_resizingElement);this.m_columnHeaderLevelCount>1&&this.m_resizingElement===this.m_resizingElement.parentNode.firstChild&&null!=this.m_resizingElement.nextSibling&&(o+=this._getAttribute(this.m_resizingElement.parentNode,"extent",!0)-1),this._shiftHeadersAlongAxisInContainer(this.m_colHeader.firstChild,o,e,t,this.getMappedStyle("colheadercell"),"column"),this._shiftHeadersAlongAxisInContainer(this.m_colEndHeader.firstChild,o,e,t,this.getMappedStyle("colendheadercell"),"column"),this._shiftCellsAlongAxis("column",e,o),this.m_databody.style.display="",this.m_colHeader.style.display=i,this.m_colEndHeader.style.display=n},it.prototype._shiftCellsAlongAxis=function(e,t,i,n){var o,s,r,a,l,u=[];if(null==n&&(n=!1),"row"===e?(o="height",s="top",r=this.m_endRow,a=this.m_startCol,l=this.m_endCol):(o="width",s=this.getResources().isRTLMode()?"right":"left",r=this.m_endCol,a=this.m_startRow,l=this.m_endRow),null!=this.m_databody.firstChild)for(var d=a;d<=l;d++){var h="row"===e?this.createIndex(i,d):this.createIndex(d,i),c=this._getCellByIndex(h),p=c[this.getResources().getMappedAttribute("context")],_=p.indexes[e],m=p.extents[e],g=i-_,f=m-g;u[d]&&u[d][i]||!0===n||(this.setElementDir(c,this.getElementDir(c,o)+t,o),"row"===e?this._updateTempArray(u,!0,d,i,p.extents.column,m-g):this._updateTempArray(u,!0,d,i,p.extents.row,m-g));var v=i;!0!==n&&(v=i+f);for(var y=v;y<=r;y++)if(!u[d]||!u[d][y]){h="row"===e?this.createIndex(y,d):this.createIndex(d,y),m=(p=(c=this._getCellByIndex(h))[this.getResources().getMappedAttribute("context")]).extents[e];var b=this.getElementDir(c,s)+t;this.setElementDir(c,b,s),"row"===e?this._updateTempArray(u,!0,d,y,p.extents.column,m):this._updateTempArray(u,!0,d,y,p.extents.row,m)}}},it.prototype.resizeRowHeightAndShift=function(e){var t=this.m_rowHeader.style.display,i=this.m_rowEndHeader.style.display;this.m_databody.style.display="none",this.m_rowHeader.style.display="none",this.m_rowEndHeader.style.display="none";var n=this.getHeaderCellIndex(this.m_resizingElement);this.m_rowHeaderLevelCount>1&&this.m_resizingElement===this.m_resizingElement.parentNode.firstChild&&null!=this.m_resizingElement.nextSibling&&(n+=this._getAttribute(this.m_resizingElement.parentNode,"extent",!0)-1),this._shiftHeadersAlongAxisInContainer(this.m_rowHeader.firstChild,n,e,"top",this.getMappedStyle("rowheadercell"),"row"),this._shiftHeadersAlongAxisInContainer(this.m_rowEndHeader.firstChild,n,e,"top",this.getMappedStyle("rowendheadercell"),"row"),this._shiftCellsAlongAxis("row",e,n),this.m_databody.style.display="",this.m_rowHeader.style.display=t,this.m_rowEndHeader.style.display=i},it.prototype._shiftHeadersAlongAxisInContainer=function(e,t,i,n,o,s){var r,a,l,u,d=0,h=e.lastChild;if(null!=h){var c=this.m_utils.containsCSSClassName(h,o);for(c?(a=h.parentNode,r=h,l=this.getHeaderCellIndex(r)):(a=h,r=h.firstChild,l=this._getAttribute(a,"start",!0));t<l;)if(c)u=this.getElementDir(r,n)+i,this.setElementDir(r,u,n),h=h.previousSibling,c=this.m_utils.containsCSSClassName(h,o),a=h.parentNode,r=h,l=this.getHeaderCellIndex(r);else{for(var p=a.getElementsByClassName(o),_=0;_<p.length;_++)u=this.getElementDir(p[_],n)+i,this.setElementDir(p[_],u,n);h=h.previousSibling,c=this.m_utils.containsCSSClassName(h,o),a=h,r=h.firstChild,l=this._getAttribute(a,"start",!0)}"column"===s?(d=this.getElementWidth(r)+i,this.setElementWidth(r,d)):"row"===s?(d=this.getElementHeight(r)+i,this.setElementHeight(r,d)):null==s&&(u=this.getElementDir(r,n)+i,this.setElementDir(r,u,n)),c||null==r.nextSibling?null!=s&&this.m_sizingManager.setSize(s,this._getKey(r),d):this._shiftHeadersAlongAxisInContainer(h,t,i,n,o,s)}},it.prototype.resizeColumnHeightsAndShift=function(e,t,i,n){var o,s,r,a;i?(o=this.m_colEndHeader,s=this.getMappedStyle("colendheadercell"),r="columnEnd",a="bottom"):(o=this.m_colHeader,s=this.getMappedStyle("colheadercell"),r="column",a="top"),o.style.display="none",this.m_databody.style.display="none",n&&this._shiftLabelsDir(this.m_headerLabels[r],e,t,a,r),this._shiftHeadersDirInContainer(o.firstChild,e,t,a,s,r),o.style.display="",this.m_databody.style.display=""},it.prototype.resizeRowWidthsAndShift=function(e,t,i){var n,o,s,r;i?(n=this.m_rowEndHeader,o=this.getMappedStyle("rowendheadercell"),s="rowEnd",r=this.getResources().isRTLMode()?"left":"right"):(n=this.m_rowHeader,o=this.getMappedStyle("rowheadercell"),s="row",r=this.getResources().isRTLMode()?"right":"left"),n.style.display="none",this.m_databody.style.display="none",this._shiftLabelsDir(this.m_headerLabels[s],e,t,r,s),this._shiftHeadersDirInContainer(n.firstChild,e,t,r,o,s),n.style.display="",this.m_databody.style.display=""},it.prototype._shiftLabelsDir=function(e,t,i,n,o){for(var s=0;s<e.length;s++){var r,a=e[s];s===i&&("column"===o||"columnEnd"===o?(r=this.getElementHeight(a)+t,this.setElementHeight(a,r)):(r=this.getElementWidth(a)+t,this.setElementWidth(a,r))),s>i&&(r=this.getElementDir(a,n)+t,this.setElementDir(a,r,n))}},it.prototype._shiftHeadersDirInContainer=function(e,t,i,n,o,s){for(var r=e.childNodes,a=0;a<r.length;a++){var l,u,d=r[a];if(this.m_utils.containsCSSClassName(d,o)){l=this.getHeaderCellLevel(d);var h=this.getHeaderCellDepth(d);l<=i&&i<l+h?"column"===s||"columnEnd"===s?(u=this.getElementHeight(d)+t,this.setElementHeight(d,u)):(u=this.getElementWidth(d)+t,this.setElementWidth(d,u)):l>i&&(u=this.getElementDir(d,n)+t,this.setElementDir(d,u,n))}else if((l=this._getAttribute(d,"level",!0))<=i)this._shiftHeadersDirInContainer(d,t,i,n,o,s);else for(var c=d.getElementsByClassName(o),p=0;p<c.length;p++)u=this.getElementDir(c[p],n)+t,this.setElementDir(c[p],u,n)}},it.prototype.handleContextMenuResize=function(e,t,i,n){this.m_overResizeLeft=0,this.m_overResizeMinLeft=0,this.m_overResizeTop=0,this.m_overResizeMinTop=0,this.m_overResizeRight=0,this.m_overResizeBottom=0;var o=parseInt(i,10),s=o-this.getElementWidth(n),r=o-this.getElementHeight(n);this.m_utils.containsCSSClassName(n,this.getMappedStyle("cell"))&&(n=t===this.m_resources.getMappedCommand("resizeHeight")?this.getHeaderFromCell(n,"row",!0):this.getHeaderFromCell(n,"column",!0)),this.m_resizingElement=n;var a=this.getElementWidth(n),l=this.getElementHeight(n),u=this.m_utils.containsCSSClassName(this.m_resizingElement,this.getMappedStyle("endheadercell"));t===this.m_resources.getMappedCommand("resizeWidth")?a!==o&&(this.m_utils.containsCSSClassName(this.m_resizingElement,this.getMappedStyle("colheadercell"))||this.m_utils.containsCSSClassName(this.m_resizingElement,this.getMappedStyle("colendheadercell"))?this._isDOMElementResizable(this.m_resizingElement)&&this.resizeColWidth(a,this.getNewElementWidth("column",a,u,s)):this.resizeRowWidth(o,o-a,u)):t===this.m_resources.getMappedCommand("resizeHeight")&&l!==o&&(this.m_utils.containsCSSClassName(this.m_resizingElement,this.getMappedStyle("colheadercell"))||this.m_utils.containsCSSClassName(this.m_resizingElement,this.getMappedStyle("colendheadercell"))?this.resizeColHeight(o,o-l,u):this._isDOMElementResizable(this.m_resizingElement)&&this.resizeRowHeight(l,this.getNewElementHeight("row",l,u,r)));var d=this.getElementWidth(n),h=this.getElementHeight(n);if(d!==a||h!==l){var c={event:e,ui:{header:this._getKey(this.m_resizingElement),oldDimensions:{width:a,height:l},newDimensions:{width:d,height:h},size:o}};this.fireEvent("resize",c),this.buildCorners(),this.m_utils.isTouchDevice()&&this._moveTouchSelectionAffordance()}this.m_resizingElement=null,this.m_resizingElementMin=null},it.prototype.getHeaderEdgePixels=function(e){var t,i,n=this.findPos(e),o=n[0],s=n[1];return this.m_utils.containsCSSClassName(e,this.getMappedStyle("colheadercell"))?(t=this.calculateColumnHeaderWidth(e),i=this.getElementHeight(e)):(t=this.getElementWidth(e),i=this.calculateRowHeaderHeight(e)),[o,s,o+t,s+i]};var nt=function(){this.sizes={column:new Map,row:new Map}};nt.prototype.setSize=function(e,t,i){this.sizes[e].set(t,i)},nt.prototype.getSize=function(e,t){var i=this.sizes[e].get(t);return null!=i?i:(this.sizes[e].forEach(function(e,o){null==i&&n.Object.compareValues(o,t)&&(i=e)}),i)},nt.prototype.clear=function(){this.sizes.column.clear(),this.sizes.row.clear()};var ot=function(e){this.scrollbarSize=-1,this.dataGrid=e;var t=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():null;this.os=this._determineOS(t),this.platform=this._determinePlatform(t)};ot.IE_PLATFORM="ie",ot.GECKO_PLATFORM="gecko",ot.WEBKIT_PLATFORM="webkit",ot.UNKNOWN_PLATFORM="unknown",ot.EDGE_PLATFORM="edge",ot.WINDOWS_OS="Windows",ot.SOLARIS_OS="Solaris",ot.MAC_OS="Mac",ot.UNKNOWN_OS="Unknown",ot.prototype._getMaxDivHeightForScrolling=function(){return null==this.m_maxDivHeightForScrolling&&this._setMaxValuesForScrolling(),this.m_maxDivHeightForScrolling},ot.prototype._getMaxDivWidthForScrolling=function(){return null==this.m_maxDivWidthForScrolling&&this._setMaxValuesForScrolling(),this.m_maxDivWidthForScrolling},ot.prototype._setMaxValuesForScrolling=function(){if(this.platform===ot.IE_PLATFORM||this.platform===ot.EDGE_PLATFORM)return this.m_maxDivHeightForScrolling=1e6,void(this.m_maxDivWidthForScrolling=1e6);var e=document.createElement("div");e.style.cssText="width:1000000000px;height:1000000000px;display:none;",document.body.appendChild(e),this.m_maxDivHeightForScrolling=parseInt(parseFloat(window.getComputedStyle(e).height)/2,10),this.m_maxDivWidthForScrolling=parseInt(parseFloat(window.getComputedStyle(e).width)/2,10),document.body.removeChild(e)},ot.prototype.calculateScrollbarSize=function(){var e=document.createElement("div");e.style.cssText="width:100px;height:100px;overflow:scroll;position:absolute;top:-9999px;",document.body.appendChild(e),this.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)},ot.prototype.getScrollbarSize=function(){return-1===this.scrollbarSize&&this.calculateScrollbarSize(),this.scrollbarSize},ot.prototype.isTouchDevice=function(){if(null==this.isTouch){var e=navigator.userAgent.toLowerCase();-1!==e.indexOf("mobile")||-1!==e.indexOf("android")?this.isTouch=!0:this.isTouch=!1}return this.isTouch},ot.prototype.addCSSClassName=function(e,t){var i=!1;if(null!=t&&null!=e){var n=e.className;if(-1===ot._getCSSClassNameIndex(n,t)){var o=n?t+" "+n:t;e.className=o,i=!0}}return i},ot.prototype.removeCSSClassName=function(e,t){var i=!1;if(null!=t&&null!=e){var n=e.className,o=ot._getCSSClassNameIndex(n,t);if(-1!==o){var s,r=o+t.length,a=0===o?null:n.substring(0,o),l=r===n.length?null:n.substring(r+1);s=null==a?null==l?"":l:null==l?a:a+l,e.className=s,i=!0}}return i},ot.prototype.containsCSSClassName=function(e,t){return null!=t&&null!=e&&-1!==ot._getCSSClassNameIndex(e.className,t)},ot._getCSSClassNameIndex=function(e,t){if(!e||!e.indexOf)return-1;if(t===e)return 0;var i=t.length,n=e.length,o=e.indexOf(t);if(o>=0){var s=0===o||" "===e.charAt(o-1),r=o+i,a=r===n||" "===e.charAt(r);if(s&&a)return o;var l=e.lastIndexOf(t);if(l!==o)return s=e.charAt(l-1),a=(r=l+i)===n||" "===e.charAt(r),s&&a?l:e.indexOf(" "+t+" ")}return-1},ot.prototype.ctrlEquivalent=function(e){return this.os===ot.MAC_OS?e.metaKey:e.ctrlKey},ot.prototype.getElementScrollLeft=function(e){if(this.dataGrid.getResources().isRTLMode()){if(this.platform===ot.GECKO_PLATFORM||this.platform===ot.IE_PLATFORM||this.platform===ot.EDGE_PLATFORM)return Math.abs(e.scrollLeft);var t=this.dataGrid.getScrollableWidth(),i=e.clientWidth;return Math.max(0,t-i-e.scrollLeft)}return e.scrollLeft},ot.prototype.setElementScrollLeft=function(e,t){if(this.dataGrid.getResources().isRTLMode())if(this.platform===ot.GECKO_PLATFORM)e.scrollLeft=-t;else if(this.platform===ot.IE_PLATFORM||this.platform===ot.EDGE_PLATFORM)e.scrollLeft=t;else{var i=this.dataGrid.getScrollableWidth()-e.clientWidth-t;e.scrollLeft=i}else e.scrollLeft=t},ot.prototype._determineOS=function(e){if(e){if(-1!==e.indexOf("win"))return ot.WINDOWS_OS;if(-1!==e.indexOf("mac"))return ot.MAC_OS;if(-1!==e.indexOf("sunos"))return ot.SOLARIS_OS}return ot.UNKNOWN_OS},ot.prototype._determinePlatform=function(e){if(e){if(-1!==e.indexOf("opera"))return ot.UNKNOWN_PLATFORM;if(-1!==e.indexOf("trident")||-1!==e.indexOf("msie"))return ot.IE_PLATFORM;if(-1!==e.indexOf("edge"))return ot.EDGE_PLATFORM;if(-1!==e.indexOf("applewebkit")||-1!==e.indexOf("safari"))return ot.WEBKIT_PLATFORM;if(-1!==e.indexOf("gecko/"))return ot.GECKO_PLATFORM}return ot.UNKNOWN_PLATFORM},ot.prototype.getMousewheelEvent=function(){return"wheel"},ot.prototype.getMousewheelScrollDelta=function(e){var t,i=e.deltaMode;return i===e.DOM_DELTA_PIXEL?t=-1:i!==e.DOM_DELTA_LINE&&i!==e.DOM_DELTA_PAGE||(t=-40),{deltaX:e.deltaX*t,deltaY:e.deltaY*t}},ot.prototype.empty=function(e){for(;e.firstChild;)this.dataGrid._remove(e.firstChild)},ot.prototype.supportsTransitions=function(){var e=(document.body||document.documentElement).style,t="transition";if(/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<11))return!1;if("string"==typeof e[t])return!0;var i=["Moz","webkit","Webkit","Khtml","O","ms"];t=t.charAt(0).toUpperCase()+t.substr(1);for(var n=0;n<i.length;n++)if("string"==typeof e[i[n]+t])return!0;return!1},ot.prototype._isNodeEditableOrClickable=function(e,t){for(;null!=e&&e!==t;){var i=e.nodeName;if(3===e.nodeType)e=e.parentNode;else{var n=parseInt(e.getAttribute("tabIndex"),10),o=parseInt(e.getAttribute(this.dataGrid.getResources().getMappedAttribute("tabindex")),10);if(null!=n&&n>=0)return!(this.containsCSSClassName(e,this.dataGrid.getResources().getMappedStyle("cell"))||this.containsCSSClassName(e,this.dataGrid.getResources().getMappedStyle("headerlabel"))||this.containsCSSClassName(e,this.dataGrid.getResources().getMappedStyle("headercell"))||this.containsCSSClassName(e,this.dataGrid.getResources().getMappedStyle("endheadercell")));if(i.match(/^INPUT|SELECT|OPTION|BUTTON|^A\b|TEXTAREA/)&&(-1!==n||-1!==o))return!0;e=e.parentNode}}return!1},ot.prototype.shouldOffsetOutline=function(){return this.os===ot.MAC_OS&&this.platform===ot.WEBKIT_PLATFORM};var st=function(e,t){this.options=e,this.rendererWrapperFunction=t};function rt(e){this.dataprovider=e,this.pendingHeaderCallback={},e.options&&e.options.implicitSort&&(this.currentSortCriteria=e.options.implicitSort),this.sortUpdated=!1;var t=this.dataprovider.getCapability("fetchByOffset");this.fetchByOffset=null!=t&&"randomAccess"===t.implementation,this._registerEventListeners(),rt.superclass.constructor.call(this)}function at(e,t,i,n){this.index=e,this.data=i,this.key=t,this.columns=n}function lt(e,t,i){this.response=e,this.results=e.results,this.cellRanges=t,this.columns=i,this._setBounds(e,t,i)}function ut(e,t,i,n){this.start=e,this.end=t,this.headers=i,this.sortCriteria=n}st.prototype.extract=function(e,t,i,n){if(null!=e){var o=this.options[e];if(null!=t&&null!=o){var s=o[t];if(null!=i&&null!=s){var r=s[i];return null!=n&&null!=r?r[n]:r}return s}return o}return null},st.prototype.evaluate=function(e,t){return"function"==typeof e?e.call(this,t):e},st.prototype.getRawProperty=function(e,t,i){var n,o,s,r;return"row"===t||"column"===t||"rowEnd"===t||"columnEnd"===t?(n="header",o=t,i?(s="label",r=e):s=e):"cell"===t&&(n="cell",o=e),this.extract(n,o,s,r)},st.prototype.getProperty=function(e,t,i,n){return void 0===i?this.extract(e,t,n):this.evaluate(this.getRawProperty(e,t,n),i)},st.prototype.getRowBandingInterval=function(){var e=this.getProperty("bandingInterval","row");return null!=e?e:0},st.prototype.getColumnBandingInterval=function(){var e=this.getProperty("bandingInterval","column");return null!=e?e:0},st.prototype.getEmptyText=function(){return this.getProperty("emptyText")},st.prototype.getHorizontalGridlines=function(){var e=this.extract("gridlines","horizontal");return null!=e?e:"visible"},st.prototype.getVerticalGridlines=function(){var e=this.extract("gridlines","vertical");return null!=e?e:"visible"},st.prototype.getScrollPosition=function(){var e=this.getProperty("scrollPosition");return null!=e?e:null},st.prototype.getSelectionCardinality=function(){var e=this.getProperty("selectionMode");if(null==e)return"none";var t=e[this.getSelectionMode()];return null!=t?t:"none"},st.prototype.getSelectionMode=function(){var e=this.getProperty("selectionMode");if(null==e)return"cell";var t=e.row;return null!=t&&"none"!==t?"row":"cell"},st.prototype.getSelection=function(){return this.getProperty("selection")},st.prototype.getCurrentCell=function(){return this.getProperty("currentCell")},st.prototype.getEditMode=function(){return this.getProperty("editMode")},st.prototype.isSortable=function(e,t){return this.getProperty("sortable",e,t)},st.prototype.isResizable=function(e,t,i){var n=this.extract("header",e,"resizable",t);return null!=i?this.evaluate(n,i):n},st.prototype.isMoveable=function(e){return this.extract("dnd","reorder",e)},st.prototype.getInlineStyle=function(e,t,i){return this.getProperty("style",e,t,i)},st.prototype.getStyleClass=function(e,t,i){return this.getProperty("className",e,t,i)},st.prototype.getRenderer=function(e,t){return this.rendererWrapperFunction?this.rendererWrapperFunction(this.getRawProperty("renderer",e,t)):this.getRawProperty("renderer",e,t)},st.prototype.getScrollPolicy=function(){var e=this.getProperty("scrollPolicy");return null==e&&(e="auto"),e},st.prototype.getScrollPolicyOptions=function(){return this.getProperty("scrollPolicyOptions")},n.__registerWidget("oj.ojDataGrid",$.oj.baseComponent,{widgetEventPrefix:"oj",options:{bandingInterval:{row:0,column:0},data:null,gridlines:{horizontal:"visible",vertical:"visible"},scrollPosition:{x:0,y:0},selectionMode:{cell:"none",row:"none"},dnd:{reorder:{row:"disable"}},scrollPolicy:"auto",scrollPolicyOptions:{maxRowCount:500,maxColumnCount:500},selection:[],currentCell:null,editMode:"none",header:{row:{className:null,label:{renderer:null,className:null,style:null},renderer:null,resizable:{width:"disable",height:"disable"},sortable:"auto",style:null},column:{className:null,label:{renderer:null,className:null,style:null},renderer:null,resizable:{width:"disable",height:"disable"},sortable:"auto",style:null},columnEnd:{className:null,label:{renderer:null,className:null,style:null},renderer:null,resizable:{width:"disable",height:"disable"},style:null},rowEnd:{className:null,label:{renderer:null,className:null,style:null},renderer:null,resizable:{width:"disable",height:"disable"},style:null}},cell:{className:null,renderer:null,style:null},resize:null,sort:null,ready:null,scroll:null,beforeCurrentCell:null,beforeEdit:null,beforeEditEnd:null},_ComponentCreate:function(){this._super(),this.root=this.element[0],this.rootId=this.root.getAttribute("id"),this.grid=new it(this.root),this.grid.setVisibility(it.VISIBILITY_STATE_RENDER),$(this.root).addClass("oj-datagrid oj-component"),$(this.root).attr(w._OJ_CONTAINER_ATTR,this.widgetName),this.root.setAttribute("x-ms-format-detection","none"),this.redrawSet={data:"all",header:["className","renderer","style","template"]}},_AfterCreate:function(){var e=this;this._unregisterResizeListener(this.root),this._removeAllChildren(),this._super(),this.resources=new n.DataGridResources(this._GetReadingDirection(),this._getTranslation.bind(e),_.parseJSONFromFontFamily("oj-datagrid-option-defaults"),this.widgetName),this._setDataSource(),this._setSelection(),null!=this.datasource&&(this.grid.SetDataSource(this.datasource),this._addContextMenu(),this._isCreate=!0,this.grid._addDataSourceEventListeners()),this._checkSelectionMode(this.options),this.grid.SetOptions(this.options,this._WrapCustomElementRenderer.bind(e)),this.grid.SetResources(this.resources),this.grid.SetCreateContextCallback(this._modifyContext.bind(e)),this.grid.SetFixContextCallback(this._FixRendererContext.bind(e)),this.grid.SetRemoveCallback(this._remove.bind(e)),this.grid.SetUniqueIdCallback(this._uniqueId.bind(e)),this.grid.SetCompareValuesCallback(this._compareValues.bind(e)),this.grid.SetNotReadyCallback(this._NotReady.bind(e)),this.grid.SetMakeReadyCallback(this._MakeReady.bind(e)),this.grid.SetOptionCallback(this.option.bind(e)),this.grid.SetSubtreeAttachedCallback(w.subtreeAttached),this.grid.SetContextCallback(c.getContext),this.grid.SetUpdateScrollPostionOnRefreshCallback(this._updateScrollPositionOnRefresh.bind(e)),this._focusable({applyHighlight:!0,setupHandlers:function(t,i){e.grid.SetFocusableCallback.call(e.grid,function(e){return t($(e))},function(e){return i($(e))})}}),this._registerEventListeners(),this._possiblyRenderOrRefresh()},_SetupResources:function(){this._super(),null!=this.datasource&&(this._isCreate||this.grid._addDataSourceEventListeners(),this.grid._addDomEventListeners(),this._registerResizeListener(this.root)),this._isCreate=!1},_ReleaseResources:function(){this._super(),this.grid._removeDataSourceEventListeners(),this.grid._removeDomEventListeners(),this._unregisterResizeListener(this.root)},_registerEventListeners:function(){var e=this;this.grid.addListener("resize",function(t){e._trigger("resize",t.event,t.ui)}),this.grid.addListener("select",function(t){e.option("selection",t.ui.selection,{_context:{originalEvent:t.event,internalSet:!0},changed:!0})}),this.grid.addListener("currentCell",function(t){e.option("currentCell",t.ui,{_context:{originalEvent:t.event,internalSet:!0},changed:!0})}),this.grid.addListener("beforeCurrentCell",function(t){return e._trigger("beforeCurrentCell",t.event,t.ui)}),this.grid.addListener("sort",function(t){var i=e._trigger2("sort",t.event,t.ui);e.grid.SetSortOriginalEvent(i.event)}),this.grid.addListener("keydown",function(t){return e._trigger("keydown",t.event,t.ui)}),this.grid.addListener("ready",function(){e._trigger("ready",null,{})}),this.grid.addListener("scroll",function(t){e._trigger("scroll",t.event,t.ui)}),this.grid.addListener("beforeEdit",function(t){return e._trigger("beforeEdit",t.event,t.ui)}),this.grid.addListener("beforeEditEnd",function(t){return e._trigger("beforeEditEnd",t.event,t.ui)})},refresh:function(){this._super(),this._ReleaseResources(),this._removeAllChildren(),this._defaultContextMenu&&(this.options.contextMenu=null,this._defaultContextMenu=null),this._setDataSource(),null!=this.datasource&&(n.FlattenedTreeDataGridDataSource&&this.datasource instanceof n.FlattenedTreeDataGridDataSource&&(this.datasource.Destroy(),this.datasource.Init()),this.grid.SetDataSource(this.datasource),this._addContextMenu()),this.grid.SetOptions(this.options,this._WrapCustomElementRenderer.bind(this)),this.grid.SetResources(this.resources),this._SetupResources(),this.grid.getVisibility()!==it.VISIBILITY_STATE_RENDER&&this.grid.setVisibility(it.VISIBILITY_STATE_REFRESH),this._possiblyRenderOrRefresh()},_updateScrollPositionOnRefresh:function(){var e,t=this.options.selection;if(null==t||0===t.length)e={x:0,y:0};else{e={};var i=t[t.length-1];i.startKey?(e.rowKey=i.startKey.row,e.columnKey=i.startKey.column):i.startIndex&&(e.rowIndex=0,e.columnIndex=0)}this.option("scrollPosition",e,{_context:{internalSet:!0},changed:!1})},_destroy:function(){$(this.root).removeAttr(w._OJ_CONTAINER_ATTR),null!=this.datasource&&this.datasource.Destroy&&this.datasource.Destroy(),this.grid.destroy(),this._unregisterResizeListener(this.root),$(this.root).empty(),this._MakeReady()},_setOptions:function(e,t){if(this.datasource){var i=this._handleOptionUpdate(e,t);this._super(e,t),"refresh"===i?this.refresh():"pass"===i&&this.grid.UpdateOptions(e,t)}else this._super(e,t),null!=e.data&&this.refresh()},_checkSelectionMode:function(e){var t=e.selectionMode;if(t&&t.row&&t.cell&&"none"!==t.row&&"none"!==t.cell)throw new Error("JET DataGrid does not support selectionMode on cell and row simultaneously.")},_NotifyShown:function(){this._super(),this._possiblyRenderOrRefresh()},_NotifyHidden:function(){this._super(),this.grid.getVisibility()===it.VISIBILITY_STATE_VISIBLE&&this.grid.setVisibility(it.VISIBILITY_STATE_HIDDEN)},_NotifyAttached:function(){this._super(),this._possiblyRenderOrRefresh()},_NotifyDetached:function(){this._super(),this.grid.getVisibility()===it.VISIBILITY_STATE_VISIBLE&&this.grid.setVisibility(it.VISIBILITY_STATE_HIDDEN)},_handleOptionUpdate:function(e,t){for(var i="ignore",n=Object.keys(e),o=0;o<n.length;o++){switch(n[o]){case"bandingInterval":case"currentCell":case"editMode":case"gridlines":case"scrollPosition":case"selection":i="pass";break;case"beforeCurrentCell":case"beforeEdit":case"beforeEditEnd":case"create":case"disabled":case"dnd":case"optionChange":case"ready":case"resize":case"rootAttributes":case"scroll":case"sort":break;case"selectionMode":this._checkSelectionMode(e),i="pass";break;case"cell":case"header":var s=t.subkey;if(null!=s){var r=s.split(".");if("resizable"===r[1]||"sortable"===r[1]){i="pass";break}}return"refresh";case"data":return this._updateScrollPositionOnRefresh(),"refresh";case"contextMenu":case"scrollPolicy":default:return"refresh"}}return i},_isResizeEnabled:function(e,t){return!(!this.options.header[e]||!this.options.header[e].resizable)&&"disable"!==this.options.header[e].resizable[t]},_isSortEnabled:function(e){return!!this.options.header[e]&&"disable"!==this.options.header[e].sortable},_removeAllChildren:function(){$(this.root).children("[slot!='contextMenu']").remove()},_GetDefaultContextMenu:function(){return this._defaultContextMenu},_addContextMenu:function(){var e=this,t=e._IsCustomElement(),i=this._GetContextMenu();if(i){null==this._menuItemsSetByGrid&&(this._menuItemsSetByGrid=[]);var n=(i=$(i)).find("[data-oj-command]"),o=[];n.each(function(){var i=e._shouldUpdateListItem(this,t);if(i.shouldUpdate){var n=$(this).attr("data-oj-command").split("-");if(t){var s=e._buildContextMenuLabel(n[n.length-1],t)[0];i.itemToUpdate?(i.itemToUpdate.textContent=s.textContent,o.push(i.itemToUpdate)):i.toFirstChild?(this.firstChild.appendChild(s),o.push(s)):(this.appendChild(s),o.push(s))}else{var r=e._buildContextMenuItem(n[n.length-1],t);$(this).replaceWith(r),o.push(r.children("a").get(0))}}}),this._menuItemsSetByGrid=o,i.data("oj-ojMenu")&&(t?i[0].refresh():i.ojMenu("refresh"))}else null!=this.datasource&&(i=this._createDefaultContextMenu())&&(this._defaultContextMenu=i[0]);i&&this._addMenuSelectListener(i)},_shouldUpdateListItem:function(e,t){var i,o=!1;if(t){if(null!=e.firstElementChild&&"opt"===e.firstElementChild.getAttribute("ojmenu")?(i=n.BaseCustomElementBridge.getSlotMap(e.firstElementChild),o=!0):i=n.BaseCustomElementBridge.getSlotMap(e),!i[""]||0===i[""].length)return{shouldUpdate:!0,toFirstChild:o};if(i[""]){var s=this._menuItemsSetByGrid.indexOf(i[""][0]);if(-1!==s)return{shouldUpdate:!0,itemToUpdate:this._menuItemsSetByGrid[s]}}return{shouldUpdate:!1}}var r=$(e).children("a");return{shouldUpdate:0===r.length||-1!==this._menuItemsSetByGrid.indexOf(r.get(0))}},_addMenuSelectListener:function(e){var t=this._handleContextMenuSelect.bind(this);this._IsCustomElement()&&!this._defaultContextMenu?e[0].addEventListener("ojAction",t):e.on("ojselect",t)},_createDefaultContextMenu:function(){var e=null,t=null,i=null,o=null,s=$("<ul>");s.css("display","none").attr("id",this.rootId+"contextmenu"),$(this.root).append(s),(this._isResizeEnabled("column","width")||this._isResizeEnabled("column","height")||this._isResizeEnabled("row","width")||this._isResizeEnabled("row","height"))&&(e=this._buildContextMenuItem("resize"));var r=this.datasource.getCapability("sort");if(this._isSortEnabled("column")&&("column"!==r&&"full"!==r||(t=this._buildContextMenuItem("sortCol"))),this._isSortEnabled("row")&&("row"!==r&&"full"!==r||(t=null!=t?t.add(this._buildContextMenuItem("sortRow")):this._buildContextMenuItem("sortRow"))),"enable"===this.options.dnd.reorder.row)switch(this.datasource.getCapability("move")){case"none":break;default:o=this._buildContextMenuListItem("cut").add(this._buildContextMenuListItem("paste"))}return this._isMultipleSelection()&&n.DomUtils.isTouchSupported()&&(this._discontiguousSelection=!1,i=this._buildContextMenuListItem("discontiguousSelection")),null!=e||null!=t||null!=o||null!=i?(s.append(e).append(t).append(o).append(i),s.ojMenu(),this.option("contextMenu",s.get(0),{_context:{internalSet:!0}}),s):null},_buildContextMenuItem:function(e,t){return"resize"===e?this._buildContextMenuListItem("resize",t).append($("<ul></ul>").append(this._buildContextMenuListItem("resizeWidth",t)).append(this._buildContextMenuListItem("resizeHeight",t))):"sortCol"===e?this._buildContextMenuListItem("sortCol",t).append($("<ul></ul>").append(this._buildContextMenuListItem("sortColAsc",t)).append(this._buildContextMenuListItem("sortColDsc",t))):"sortRow"===e?this._buildContextMenuListItem("sortRow",t).append($("<ul></ul>").append(this._buildContextMenuListItem("sortRowAsc",t)).append(this._buildContextMenuListItem("sortRowDsc",t))):-1!==Object.keys(this.resources.commands).indexOf(e)?$(this._buildContextMenuListItem(e,t)):void 0},_buildContextMenuListItem:function(e,t){var i=t?$("<oj-option></oj-option>"):$("<li></li>");return i.attr("data-oj-command",this._getMappedCommand(e)),i.append(this._buildContextMenuLabel(e,t)),i},_buildContextMenuLabel:function(e,t){var i="label"+e.charAt(0).toUpperCase()+e.slice(1);"discontiguousSelection"===e&&(i="labelEnableNonContiguous");var n=this._getTranslation(i);return t?$("<span>").text(n):$('<a href="#"></a>').text(n)},_getDataGridContextMenu:function(){return this._GetContextMenu()||this._GetDefaultContextMenu()},_getTranslation:function(e,t){return this.getTranslatedString(e,t)},_handleResizeDialog:function(e){var t=$("#"+this.rootId+"spinner").ojInputNumber("option","value");$("#"+this.rootId+"dialog").ojPopup("close"),this.grid.handleContextMenuReturn(this.contextMenuEvent,this.menuItemFunction,t),this.contextMenuEvent.target.focus()},_buildResizeDialog:function(e,t){var i=$("#"+this.rootId+"dialog"),n=$("#"+this.rootId+"spinner");if(0===i.length||0===n.length){(i=document.createElement("div")).id=this.rootId+"dialog";var o=document.createElement("div"),s=document.createElement("div"),r=document.createElement("div");o.className=this._getMappedStyle("popupHeader"),s.className=this._getMappedStyle("popupContent"),r.className=this._getMappedStyle("popupFooter"),i.appendChild(o),i.appendChild(s),i.appendChild(r);var a=document.createElement("h5");a.textContent=e,o.appendChild(a),(n=document.createElement("input")).id=this.rootId+"spinner";var l=document.createElement("button");l.id=this.rootId+"dialogsubmit",s.appendChild(n),r.appendChild(l),this.root.appendChild(i),$(l).ojButton({component:"ojButton",label:this._getTranslation("labelResizeDialogSubmit")}),l.addEventListener("click",this._handleResizeDialog.bind(this)),$(n).ojInputNumber({component:"ojInputNumber",max:1e3,min:20,step:1,value:t}),$(i).ojPopup({initialFocus:"firstFocusable",position:{my:"center center",at:"center center",collision:"none",of:$(this.root)}}),$(i).ojPopup("open")}else n.ojInputNumber("option","value",t),i.find("."+this._getMappedStyle("popupHeader"))[0].firstChild.textContent=e,i.ojPopup("open")},_handleContextMenuSelect:function(e,t){var i;if(i=t?t.item:$(e.target),this.menuItemFunction=i.attr("data-oj-command"),this.menuItemFunction===this._getMappedCommand("sortColAsc")||this.menuItemFunction===this._getMappedCommand("sortColDsc")||this.menuItemFunction===this._getMappedCommand("cut")||this.menuItemFunction===this._getMappedCommand("paste"))this.grid.handleContextMenuReturn(this.contextMenuEvent,this.menuItemFunction,null);else if(this.menuItemFunction===this._getMappedCommand("resizeWidth")||this.menuItemFunction===this._getMappedCommand("resizeHeight")){var n=$(this.contextMenuEvent.target).closest("."+this._getMappedStyle("cell"));if(0===n.length&&(n=$(this.contextMenuEvent.target).closest("."+this._getMappedStyle("headercell"))),0===n.length&&(n=$(this.contextMenuEvent.target).closest("."+this._getMappedStyle("endheadercell"))),n.length>0){var o=this.menuItemFunction===this._getMappedCommand("resizeWidth")?n.outerWidth():n.outerHeight();this._buildResizeDialog(i.text(),o)}}else if(this.menuItemFunction===this._getMappedCommand("discontiguousSelection")){this._discontiguousSelection=!this._discontiguousSelection,this.grid.handleContextMenuReturn(this.contextMenuEvent,this.menuItemFunction,this._discontiguousSelection);var s=this._discontiguousSelection?"labelDisableNonContiguous":"labelEnableNonContiguous";i.children().first().text(this._getTranslation(s))}},_NotifyContextMenuGesture:function(e,t,i){this.grid.handleContextMenuGesture(t,i,this._contextMenuGestureCallback.bind(this))},_contextMenuGestureCallback:function(e,t,i){if(null!=e){this.contextMenuEvent=t.originalEvent;var n=e.launcher,o=e.capabilities;this._manageContextMenu(o);var s="keyboard"===i?{position:{of:n},launcher:$(n)}:{launcher:$(n)};this._OpenContextMenu(t,i,s)}},_addContextMenuCapability:function(e){var t=$(this._getDataGridContextMenu());t.find("[data-oj-command="+e+"]").hasClass("oj-disabled")||t.find("[data-oj-command="+e+"]").addClass("oj-disabled")},_removeContextMenuCapability:function(e){$(this._getDataGridContextMenu()).find("[data-oj-command="+e+"]").removeClass("oj-disabled")},_manageContextMenu:function(e){for(var t=Object.keys(e),i=0;i<t.length;i++){var n=t[i],o=this.resources.getMappedCommand(n);"disable"===e[n]?this._addContextMenuCapability(o):this._removeContextMenuCapability(o)}},_findCellIndex:function(e){return e[this._getMappedAttribute("context")].indexes},_setDataSource:function(){null!=this.options.data?n.DataProviderFeatureChecker.isDataProvider(this.options.data)?(this.datasource=new rt(this.options.data),"randomAccess"!==this.options.data.getCapability("fetchByOffset").implementation&&"scroll"===this.options.scrollPolicy&&(e.error("oj.DataProvider does not support fetchByOffset and scrollPolicy is set to scroll. scrollPolicy will fall back to auto."),this.options.scrollPolicy="auto")):this.datasource=this.options.data:this.datasource=null},_setSelection:function(){var e=this.options.selection;null!=e&&this.grid.SetSelection(e)},_modifyContext:function(e){e.component=w.__GetWidgetConstructor(this.element,"ojDataGrid")},_setAccessibleContext:function(e){this.grid.SetAccessibleContext(e)},_unregisterResizeListener:function(e){e&&this._resizeHandler&&n.DomUtils.removeResizeListener(e,this._resizeHandler)},_registerResizeListener:function(e){e&&(null==this._resizeHandler&&(this._resizeHandler=this._handleResize.bind(this)),n.DomUtils.addResizeListener(e,this._resizeHandler))},_handleResize:function(e,t){e>0&&t>0&&(this._possiblyRenderOrRefresh(),this.grid.HandleResize(e,t))},getNodeBySubId:function(e){var t;if(null==e)return this.element?this.element[0]:null;var i=e.subId;if("oj-datagrid-cell"===i){var n=e.rowIndex,o=e.columnIndex;t=$(this.grid._getCellByIndex({row:n,column:o}))}else if("oj-datagrid-sort-icon"===i||"oj-datagrid-sort-ascending"===i||"oj-datagrid-sort-descending"===i||"oj-datagrid-header"===i){var s,r=e.axis,a=e.index,l=null==e.level?0:e.level;if("column"===r?s=this._getHeaderByIndex(a,l,$("#"+this.rootId+"\\:columnHeader"),this.grid.getStartColumnHeader()):"row"===r?s=this._getHeaderByIndex(a,l,$("#"+this.rootId+"\\:rowHeader"),this.grid.getStartRowHeader()):"columnEnd"===r?s=this._getHeaderByIndex(a,l,$("#"+this.rootId+"\\:columnEndHeader"),this.grid.getStartColumnEndHeader()):"rowEnd"===r&&(s=this._getHeaderByIndex(a,l,$("#"+this.rootId+"\\:rowEndHeader"),this.grid.getStartRowEndHeader())),null==s)return null;if("oj-datagrid-sort-icon"===i)return s.children("."+this._getMappedStyle("sortcontainer")).children().get(0);t="oj-datagrid-sort-ascending"===i?s.find("."+this._getMappedStyle("sortascending")):"oj-datagrid-sort-descending"===i?s.find("."+this._getMappedStyle("sortdescending")):s}else"oj-datagrid-header-label"===i&&(t=$(this.grid._getLabel(e.axis,e.level)));return null!=t&&t.length>0?t[0]:null},getSubIdByNode:function(e){var t,i=$(e).closest("."+this._getMappedStyle("cell"));if(i.length>0){var n=this._findCellIndex(i[0]);return{subId:"oj-datagrid-cell",rowIndex:n.row,columnIndex:n.column}}var o=$(e).closest("."+this._getMappedStyle("headercell"));if(0===o.length&&(o=$(e).closest("."+this._getMappedStyle("endheadercell"))),o.length>0)return t=o[0][this._getMappedAttribute("context")],{subId:$(e).hasClass(this._getMappedStyle("sortascending"))?"oj-datagrid-sort-ascending":$(e).hasClass(this._getMappedStyle("sortdescending"))?"oj-datagrid-sort-descending":"oj-datagrid-header",axis:t.axis,index:this._getHeaderIndex(o),level:t.level};var s=$(e).closest("."+this._getMappedStyle("headerlabel"));return s.length>0?{subId:"oj-datagrid-header-label",axis:(t=s[0][this._getMappedAttribute("context")]).axis,level:t.level}:null},getContextByNode:function(e){var t,i,o=$(e).closest("."+this._getMappedStyle("cell"));if(o.length>0)return t=o[0][this._getMappedAttribute("context")],(i=n.CollectionUtils.copyInto({},t,void 0,!0)).subId="oj-datagrid-cell",i;var s=$(e).closest("."+this._getMappedStyle("headercell"));if(0===s.length&&(s=$(e).closest("."+this._getMappedStyle("endheadercell"))),s.length>0)return t=s[0][this._getMappedAttribute("context")],(i=n.CollectionUtils.copyInto({},t,void 0,!0)).subId="oj-datagrid-header",i.index=this._getHeaderIndex(s),i;var r=$(e).closest("."+this._getMappedStyle("headerlabel"));return r.length>0?(t=r[0][this._getMappedAttribute("context")],(i=n.CollectionUtils.copyInto({},t,void 0,!0)).subId="oj-datagrid-header-label",i):null},_getMappedStyle:function(e){return this.resources.getMappedStyle(e)},_getMappedAttribute:function(e){return this.resources.getMappedAttribute(e)},_getMappedCommand:function(e){return this.resources.getMappedCommand(e)},_isDataGridSizingAvailable:function(){return null!=this.root.offsetParent},_possiblyRenderOrRefresh:function(){var e=this.grid.getVisibility();this._isDataGridSizingAvailable()?(e===it.VISIBILITY_STATE_RENDER?this.grid.render(this.root):e===it.VISIBILITY_STATE_REFRESH&&this.grid.refresh(this.root),this.grid.setVisibility(it.VISIBILITY_STATE_VISIBLE)):e===it.VISIBILITY_STATE_VISIBLE&&this.grid.setVisibility(it.VISIBILITY_STATE_HIDDEN)},_getHeaderByIndex:function(e,t,i,n){if(t<0)return null;var o=i.children().first().children().last();if(o.hasClass(this._getMappedStyle("headercell")))return i.children().first().children("."+this._getMappedStyle("headercell")).eq(e-n);if(o.hasClass(this._getMappedStyle("endheadercell")))return i.children().first().children("."+this._getMappedStyle("endheadercell")).eq(e-n);var s=this._getGroupingContainer(e,t,0,i.children().first().children());if(null==s)return null;if(t<=parseInt(s.attr(this._getMappedAttribute("level")),10)+parseInt(s.children().eq(0).attr(this._getMappedAttribute("depth")),10)-1)return s.children().eq(0);var r=e-(n=parseInt(s.attr(this._getMappedAttribute("start")),10))+1;return s.children().eq(r)},_getGroupingContainer:function(e,t,i,n){if(null==n.eq(1)||n.eq(1).hasClass(this._getMappedStyle("headercell"))||n.eq(1).hasClass(this._getMappedStyle("endheadercell")))return t===i?n.eq(0).parent():null;var o,s=n.parent().parent();for(o=s.hasClass(this._getMappedStyle("header"))||s.hasClass(this._getMappedStyle("endheader"))?0:1;o<n.length;o++){var r=parseInt(n.eq(o).attr(this._getMappedAttribute("start")),10),a=parseInt(n.eq(o).attr(this._getMappedAttribute("extent")),10),l=parseInt(n.eq(o).children().eq(0).attr(this._getMappedAttribute("depth")),10);if(e>=r&&e<r+a)return t<i+l?n.eq(o):this._getGroupingContainer(e,t,i+l,n.eq(o).children())}return null},_getHeaderIndex:function(e){var t;if(e.parent().hasClass(this._getMappedStyle("groupingcontainer"))){if(t=parseInt(e.parent().attr(this._getMappedAttribute("start")),10),e.get(0)===e.parent().children(":first").get(0))return t;t-=1}else t=e.hasClass(this._getMappedStyle("rowheadercell"))?this.grid.getStartRowHeader():e.hasClass(this._getMappedStyle("colheadercell"))?this.grid.getStartColumnHeader():e.hasClass(this._getMappedStyle("colendheadercell"))?this.grid.getStartColumnEndHeader():this.grid.getStartRowEndHeader();return t+=e.index()},_isMultipleSelection:function(){return null!=this.options.selectionMode&&("multiple"===this.options.selectionMode.row||"multiple"===this.options.selectionMode.cell)},_remove:function(e){$(e).remove()},_uniqueId:function(e,t){t?$(e).removeUniqueId():$(e).uniqueId()},_compareValues:function(e,t){return n.Object.compareValues(e,t)},scrollTo:function(e){this.grid.scroll(e)},whenReady:function(){if(this._ready)return Promise.resolve(!0);if(!this._readyPromise){var e=this;this._readyPromise=new Promise(function(t){e._readyPromiseResolve=t})}return this._readyPromise},_NotReady:function(){if(this._ready=!1,!this._readyResolveFunc){var e=c.getContext(this.element[0]).getBusyContext(),t={description:"The component identified by '"+this.element.attr("id")+"' is being loaded."};this._readyResolveFunc=e.addBusyState(t)}},_MakeReady:function(){this._readyPromiseResolve&&(this._readyPromiseResolve(!0),this._readyPromiseResolve=null),this._ready=!0,this._promise=null,this._readyResolveFunc&&(this._readyResolveFunc(),this._readyResolveFunc=null)},_CompareOptionValues:function(e,t,i){switch(e){case"currentCell":case"selection":return n.Object.compareValues(t,i);default:return this._super(e,t,i)}}}),n.Object.createSubclass(rt,n.DataGridDataSource,"DataProviderDataGridDataSource"),rt.prototype._registerEventListeners=function(){this._mutationListener=this._handlDataProviderMutationEvent.bind(this),this._refreshListener=this._handlDataProviderRefreshEvent.bind(this),this.dataprovider.addEventListener("mutate",this._mutationListener),this.dataprovider.addEventListener("refresh",this._refreshListener)},rt.prototype._handlDataProviderMutationEvent=function(e){var t,i=e.detail.add;if(null!=i)for(t=0;t<i.data.length;t++){var n={};n.source=this,n.operation="insert",n.keys={row:i.metadata[t].key,column:null},n.indexes={row:i.indexes[t],column:-1},n.result=new at(i.indexes[t],i.metadata[t].key,i.data[t],this.columns),this.handleEvent("change",n)}var o=e.detail.remove;if(null!=o)for(t=0;t<o.data.length;t++){var s={};s.source=this,s.operation="delete",s.keys={row:o.metadata[t].key,column:null},s.indexes={row:o.indexes[t],column:-1},this.handleEvent("change",s)}var r=e.detail.update;if(null!=r)for(t=0;t<r.data.length;t++){var a={};a.source=this,a.operation="update",a.keys={row:r.metadata[t].key,column:null},a.indexes={row:r.indexes[t],column:-1},a.result=new at(r.indexes[t],r.metadata[t].key,r.data[t],this.columns),this.handleEvent("change",a)}},at.prototype.getData=function(e){var t=this,i={};return Object.defineProperty(i,"data",{enumerable:!0,get:function(){return t.data[t.columns[e.column]]},set:function(i){t.data[t.columns[e.column]]=i}}),i},at.prototype.getMetadata=function(e){return{keys:{row:this.key,column:this.columns[e.column]}}},at.prototype.getStart=function(e){return"row"===e?this.index:0},at.prototype.getCount=function(e){return"row"===e?1:"column"===e?this.columns.length:0},at.prototype.getExtent=function(){return{row:{extent:1,more:{before:!1,after:!1}},column:{extent:1,more:{before:!1,after:!1}}}},rt.prototype._handlDataProviderRefreshEvent=function(){this.handleEvent("change",{operation:"refresh"})},rt.prototype.fetchHeaders=function(e,t,i){if(null!=t){var n=e.axis,o={};o.headerRange=e,o.callbacks=t,o.callbackObjects=i,this.pendingHeaderCallback[n]=o}},rt.prototype._processPendingHeaderCallbacks=function(e){var t=this.pendingHeaderCallback[e];if(null!=t){var i=t.headerRange,n=t.callbacks,o=t.callbackObjects;this._handleHeaderFetchSuccess(i,n,o),this.pendingHeaderCallback[e]=null}},rt.prototype._handleHeaderFetchSuccess=function(e,t,i){var n,o=e.axis,s=e.start,r=e.count;"column"===o&&null!=this.columns?n=new ut(s,Math.min(this.columns.length,s+r),this.columns,this.currentSortCriteria):n=null;null!=t&&t.success&&t.success.call(i.success,n,e,null)},lt.prototype._setBounds=function(e,t,i){for(var n=0;n<t.length;n+=1){var o=t[n];"row"===o.axis?(this.rowStart=e.fetchParameters.offset?e.fetchParameters.offset:o.start,this.rowEnd=this.rowStart+e.results.length-1):"column"===o.axis&&(this.colStart=o.start,this.colEnd=this.colStart+i.length-1)}},lt.prototype.getData=function(e){var t=this,i={};return Object.defineProperty(i,"data",{enumerable:!0,get:function(){return t.results[e.row-t.rowStart].data[t.columns[e.column]]},set:function(i){t.results[e.row-t.rowStart].data[t.columns[e.column]]=i}}),i},lt.prototype.getMetadata=function(e){return{keys:{row:this.results[e.row-this.rowStart].metadata.key,column:this.columns[e.column]}}},lt.prototype.getCount=function(e){return"row"===e?this.rowEnd-this.rowStart+1:"column"===e?this.colEnd-this.colStart+1:0},lt.prototype.getExtent=function(){return{row:{extent:1,more:{before:!1,after:!1}},column:{extent:1,more:{before:!1,after:!1}}}},rt.prototype.setUpColumns=function(e){if(null==this.columns||0===this.columns.length){var t=[];if(e.results.length)for(var i=Object.keys(e.results[0].data),n=0;n<i.length;n++)t.push(i[n]);this.columns=t}},rt.prototype.getRangeInfo=function(e){for(var t={},i=0;i<e.length;i+=1){var n=e[i];"row"===n.axis?(t.rowStart=n.start,t.rowEnd=t.rowStart+n.count-1):"column"===n.axis&&(t.colStart=n.start,t.colEnd=t.colStart+n.count-1)}return t},rt.prototype._createResults=function(e){e.results=[];for(var t=0;t<e.value.data.length;t++){var i={};i.data=e.value.data[t],i.metadata=e.value.metadata[t],e.results.push(i)}},rt.prototype.handleFetchResult=function(e,t,i,n){var o=n[0];o.results||(this._createResults(o),o.fetchParameters=o.value.fetchParameters),this.setUpColumns(o),this._processPendingHeaderCallbacks("column"),this._processPendingHeaderCallbacks("row");var s=new lt(o,e,this.columns);if(null!=t&&null!=t.success){var r=i?i.success:null;t.success.call(r,s,e)}},rt.prototype.fetchCells=function(e,t,i){this.getCount("row");var n=this.getRangeInfo(e),o=n.rowEnd-n.rowStart+1;if(this.fetchByOffset){var s=n.rowStart;this._fetchPromise=this.dataprovider.fetchByOffset({size:o,offset:s,sortCriteria:this.currentSortCriteria})}else(null==this._asyncIterator||this.sortUpdated)&&(this._asyncIterator=this.dataprovider.fetchFirst({size:o,sortCriteria:this.currentSortCriteria})[Symbol.asyncIterator]()),this._fetchPromise=this._asyncIterator.next();this.sortUpdated=!1,Promise.all([this._fetchPromise,this._getCountPromise]).then(this.handleFetchResult.bind(this,e,t,i))},rt.prototype.getCapability=function(e){if("sort"===e){var t=this.dataprovider.getCapability(e).attributes;return"multiple"===t||"single"===t?"column":t}return"none"},rt.prototype.getCount=function(e){var t=this;if("row"===e){if(void 0!==t.totalRowCount)return t.totalRowCount;t._getCountPromise=this.dataprovider.getTotalSize(),t._getCountPromise.then(function(e){t.totalRowCount=e})}else if("column"===e&&null!=this.columns)return this.columns.length;return-1},rt.prototype.getCountPrecision=function(){return"estimate"},rt.prototype.indexes=function(){return{row:-1,column:-1}},rt.prototype.keys=function(){return{row:null,column:null}},rt.prototype.move=function(){return!1},rt.prototype.moveOK=function(){return"invalid"},rt.prototype.sort=function(e,t,i){this.sortUpdated=!0,this.currentSortCriteria=[{attribute:e.key,direction:e.direction}],null==i&&(i={}),null!=t&&null!=t.success&&t.success.call(i.success)},ut.prototype.getData=function(e){return this.headers[e]},ut.prototype.getMetadata=function(e){var t=this.getData(e),i={key:t};if(null!=this.sortCriteria)for(var n=0;n<this.sortCriteria.length;n++)this.sortCriteria[n].attribute===t&&(i.sortDirection=this.sortCriteria[n].direction);return i},ut.prototype.getLevelCount=function(){return 1},ut.prototype.getExtent=function(){return{extent:1,more:{before:!1,after:!1}}},ut.prototype.getLabel=function(){return null},ut.prototype.getDepth=function(){return 1},ut.prototype.getCount=function(){return Math.max(0,this.end-this.start)},it.prototype._setupActions=function(){this.actions={ACTIONABLE:this._handleActionable,EXIT_ACTIONABLE:this._handleExitActionable,TAB_NEXT_IN_CELL:this._handleActionableTab,TAB_PREV_IN_CELL:this._handleActionablePrevTab,EDITABLE:this._handleEditable,EXIT_EDITABLE:this._handleExitEditable,DATA_ENTRY:this._handleDataEntry,EXIT_DATA_ENTRY:this._handleExitDataEntry,EDIT:this._handleEdit,EXIT_EDIT:this._handleExitEdit,CANCEL_EDIT:this._handleCancelEdit,NO_OP:this._handleNoOp,EAT:this._handleEat,FOCUS_LEFT:this._handleFocusLeft,FOCUS_RIGHT:this._handleFocusRight,FOCUS_UP:this._handleFocusUp,FOCUS_DOWN:this._handleFocusDown,FOCUS_ROW_FIRST:this._handleFocusRowFirst,FOCUS_ROW_LAST:this._handleFocusRowLast,FOCUS_COLUMN_FIRST:this._handleFocusColumnFirst,FOCUS_COLUMN_LAST:this._handleFocusColumnLast,FOCUS_COLUMN_HEADER:this._handleFocusColumnHeader,FOCUS_COLUMN_END_HEADER:this._handleFocusColumnEndHeader,FOCUS_ROW_HEADER:this._handleFocusRowHeader,FOCUS_ROW_END_HEADER:this._handleFocusRowEndHeader,READ_CELL:this.readCurrentContent,SORT:this._handleSortKey,SELECT_DISCONTIGUOUS:this._handleSelectDiscontiguous,SELECT_EXTEND_LEFT:this._handleExtendSelectionLeft,SELECT_EXTEND_RIGHT:this._handleExtendSelectionRight,SELECT_EXTEND_UP:this._handleExtendSelectionUp,SELECT_EXTEND_DOWN:this._handleExtendSelectionDown,SELECT_ROW:this._handleSelectRow,SELECT_COLUMN:this._handleSelectColumn,SELECT_ALL:this._handleSelectAll,CUT:this._handleCut,CANCEL_REORDER:this._handleCancelReorder,PASTE:this._handlePaste}},it.prototype._getActionFromKeyDown=function(e,t,i){var n={cellOrHeader:t,isLabel:i,readOnly:!this._isCellEditable(),currentMode:this._getCurrentMode(),activeMove:null!=this.m_cutCells,rowMove:this._isMoveEnabled("row"),columnSort:"column"===t&&this._isDOMElementSortable(this._getActiveElement()),selection:this._isSelectionEnabled(),selectionMode:this.m_options.getSelectionMode(),multipleSelection:this.isMultipleSelection()};return this.actions[this.m_keyboardHandler.getAction(e,n)]},it.prototype.isActionableMode=function(){return"actionable"===this.m_currentMode},it.prototype.setActionableMode=function(e){this.m_currentMode=e?"actionable":"navigation",this._setAccInfoText(this.isActionableMode()?"accessibleActionableMode":"accessibleNavigationMode")},it.prototype._handleActionable=function(e,t){return this._enterActionableMode(t),!1},it.prototype._handleExitActionable=function(e,t){return this._exitActionableMode(),this._highlightActive(),!1},it.prototype._handleActionableTab=function(e,t){var i=this.getFocusableElementsInNode(t);return i.length>0&&e.target===i[i.length-1]&&(i[0].focus(),!0)},it.prototype._handleActionablePrevTab=function(e,t){var i=this.getFocusableElementsInNode(t);return i.length>0&&e.target===i[0]&&(i[i.length-1].focus(),!0)},it.prototype._getEditMode=function(){return null==this.m_editMode&&(this.m_editMode=this.m_options.getEditMode()),this.m_editMode},it.prototype._getCurrentMode=function(){return null==this.m_currentMode&&(this.m_currentMode="navigation"),this.m_currentMode},it.prototype._isEditOrEnter=function(){return"edit"===this._getCurrentMode()},it.prototype._isGridEditable=function(){var e=this._getEditMode();return"cellNavigation"===e||"cellEdit"===e},it.prototype._isCellEditable=function(){return"cellEdit"===this._getEditMode()},it.prototype._handleEditable=function(e,t){return this._isGridEditable()?(this.m_editMode=null,this.m_setOptionCallback("editMode","cellEdit",{_context:{writeback:!0,internalSet:!0}}),this.m_utils.removeCSSClassName(this.m_root,this.getMappedStyle("readOnly")),this.m_utils.addCSSClassName(this.m_root,this.getMappedStyle("editable")),this._updateEdgeCellBorders(""),this._setAccInfoText("accessibleEditableMode"),this._setEditableClone(t)):this._handleActionable(e,t),!1},it.prototype._handleExitEditable=function(e,t){this.m_editMode=null,this.m_setOptionCallback("editMode","cellNavigation",{_context:{writeback:!0,internalSet:!0}}),this.m_utils.addCSSClassName(this.m_root,this.getMappedStyle("readOnly")),this.m_utils.removeCSSClassName(this.m_root,this.getMappedStyle("editable")),this._updateEdgeCellBorders("none"),this._setAccInfoText("accessibleNavigationMode"),delete this.m_editableClone},it.prototype._handleDataEntry=function(e,t){var i={event:e,ui:{cell:t,cellContext:t[this.getResources().getMappedAttribute("context")]}};return this.fireEvent("beforeEdit",i)&&(this._reRenderCell(t,"edit",this.getMappedStyle("cellEdit"),this.m_editableClone),this._enableAllFocusableElements(t),this._overwriteFlag=!0,this._setFocusToFirstFocusableElement(t)?this.m_currentMode="edit":this.m_utils.removeCSSClassName(t,this.getMappedStyle("cellEdit")),this._overwriteFlag=!1),!1},it.prototype._handleExitDataEntry=function(e,t){return this._leaveEditing(e,t,!1)},it.prototype._handleEdit=function(e,t){var i={event:e,ui:{cell:t,cellContext:t[this.getResources().getMappedAttribute("context")]}},n=this.fireEvent("beforeEdit",i);if(n){this._reRenderCell(t,"edit",this.getMappedStyle("cellEdit"),this.m_editableClone);var o=this;c.getContext(t).getBusyContext().whenReady().then(function(){o._enableAllFocusableElements(t),o._setFocusToFirstFocusableElement(t)?o.m_currentMode="edit":o.m_utils.removeCSSClassName(t,o.getMappedStyle("cellEdit"))})}else n=!1,this._enterActionableMode(t);return n},it.prototype._handleExitEdit=function(e,t){return this._leaveEditing(e,t,!1)},it.prototype._handleCancelEdit=function(e,t){return!!this._leaveEditing(e,t,!0)&&(this._setEditableClone(t),!0)},it.prototype._leaveEditing=function(e,t,i){var n={event:e,ui:{cell:t,cellContext:t[this.getResources().getMappedAttribute("context")],cancelEdit:i}};i||(this._disableAllFocusableElements(t),this._highlightActive());var o=this.fireEvent("beforeEditEnd",n);return o?(this.m_currentMode="navigation",this._disableAllFocusableElements(t),this._highlightActive(),this._reRenderCell(t,"navigation",this.getMappedStyle("cellEdit"),this.m_editableClone)):(o=!1,this._scrollToActive(this.m_active),this._enableAllFocusableElements(t),this._setFocusToFirstFocusableElement(t)),o},it.prototype._handleFocusKey=function(e,t,i,n,o){var s,r=!0,a=!0;if(null!=this.m_active){if("cell"===this.m_active.type){if(this._isEditOrEnter()?(s=!0,r=this._leaveEditing(e,t,!1),a=!1):this.isActionableMode()&&this._exitActionableMode(),r){var l=this.m_active,u=this.handleFocusChange(i,n,e,a,o);return this._isGridEditable()&&l!==this.m_active&&s&&this.m_utils.isTouchDevice()?this._handleDataEntry(e,this._getActiveElement()):u}return!0}if("header"===this.m_active.type)return this.handleHeaderFocusChange(i,e,n,o);if("label"===this.m_active.type)return this.handleLabelFocusChange(i,e,n,o)}return!1},it.prototype._handleFocusLeft=function(e,t){return this._handleFocusKey(e,t,it.keyCodes.LEFT_KEY,!1,!1)},it.prototype._handleFocusRight=function(e,t){return this._handleFocusKey(e,t,it.keyCodes.RIGHT_KEY,!1,!1)},it.prototype._handleFocusUp=function(e,t){return this._handleFocusKey(e,t,it.keyCodes.UP_KEY,!1,!1)},it.prototype._handleFocusDown=function(e,t){return this._handleFocusKey(e,t,it.keyCodes.DOWN_KEY,!1,!1)},it.prototype._handleFocusRowFirst=function(e,t){return this._handleFocusKey(e,t,it.keyCodes.PAGEUP_KEY,!1,!1)},it.prototype._handleFocusRowLast=function(e,t){return this._handleFocusKey(e,t,it.keyCodes.PAGEDOWN_KEY,!1,!1)},it.prototype._handleFocusColumnFirst=function(e,t){return this._handleFocusKey(e,t,it.keyCodes.HOME_KEY,!1,!1)},it.prototype._handleFocusColumnLast=function(e,t){return this._handleFocusKey(e,t,it.keyCodes.END_KEY,!1,!1)},it.prototype._handleFocusRowHeader=function(e,t){return this._handleFocusKey(e,t,it.keyCodes.LEFT_KEY,!1,!0)},it.prototype._handleFocusRowEndHeader=function(e,t){return this._handleFocusKey(e,t,it.keyCodes.RIGHT_KEY,!1,!0)},it.prototype._handleFocusColumnHeader=function(e,t){return this._handleFocusKey(e,t,it.keyCodes.UP_KEY,!1,!0)},it.prototype._handleFocusColumnEndHeader=function(e,t){return this._handleFocusKey(e,t,it.keyCodes.DOWN_KEY,!1,!0)},it.prototype._handleSelectRow=function(e,t){var i,n,o,s;if(!this._isSelectionEnabled()||!this.isMultipleSelection()&&"row"!==this.m_options.getSelectionMode())return!1;if(this.m_utils.containsCSSClassName(t,this.getMappedStyle("cell")))i=s=this.m_active.indexes.row,n=s,o=this.m_rowHeaderLevelCount-1;else{if(null==this.m_active||"header"!==this.m_active.type||-1===this.m_active.axis.indexOf("row"))return!1;if(s=this.m_active.index,o=this.m_active.level,this.m_rowHeaderLevelCount-1===o)i=s,n=s;else{var r=this._getActiveElement();n=(i=this._getAttribute(r.parentNode,"start",!0))+this._getAttribute(r.parentNode,"extent",!0)-1}}return this.m_selectionFrontier&&this.m_selectionFrontier.axis&&-1!==this.m_selectionFrontier.axis.indexOf("column")?(this._handleSelectAll(e),!0):(this.setHeaderSelectionFrontier("row",n,s,o,t,!0),this._selectEntireRow(i,n,e),this._setAccInfoText("accessibleRowSelected",{row:s+1}),!0)},it.prototype._handleSelectColumn=function(e,t){var i,n,o,s;if(!this._isSelectionEnabled()||!this.isMultipleSelection()||"cell"!==this.m_options.getSelectionMode())return!1;if(this.m_utils.containsCSSClassName(t,this.getMappedStyle("cell")))i=s=this.m_active.indexes.column,n=s,o=this.m_columnHeaderLevelCount-1;else{if(null==this.m_active||"header"!==this.m_active.type||-1===this.m_active.axis.indexOf("column"))return!1;if(s=this.m_active.index,o=this.m_active.level,this.m_columnHeaderLevelCount-1===o)i=s,n=s;else{var r=this._getActiveElement();n=(i=this._getAttribute(r.parentNode,"start",!0))+this._getAttribute(r.parentNode,"extent",!0)-1}}return this.m_selectionFrontier&&this.m_selectionFrontier.axis&&-1!==this.m_selectionFrontier.axis.indexOf("row")?(this._handleSelectAll(e),!0):(this.setHeaderSelectionFrontier("column",n,s,o,t,!0),this._selectEntireColumn(i,n,e),this._setAccInfoText("accessibleColumnSelected",{column:s+1}),!0)},it.prototype._handleSelectDiscontiguous=function(e,t){return this.setDiscontiguousSelectionMode(!this.m_discontiguousSelection),!0},it.prototype._handleExtendSelectionLeft=function(e,t){return this._handleFocusKey(e,t,it.keyCodes.LEFT_KEY,!0,!1)},it.prototype._handleExtendSelectionRight=function(e,t){return this._handleFocusKey(e,t,it.keyCodes.RIGHT_KEY,!0,!1)},it.prototype._handleExtendSelectionUp=function(e,t){return this._handleFocusKey(e,t,it.keyCodes.UP_KEY,!0,!1)},it.prototype._handleExtendSelectionDown=function(e,t){return this._handleFocusKey(e,t,it.keyCodes.DOWN_KEY,!0,!1)},it.prototype._handleSortKey=function(e,t){return"true"===t.getAttribute(this.getResources().getMappedAttribute("sortable"))?(this._handleKeyboardSort(t,e),!0):this._handleActionable(e,t)},it.prototype._handleNoOp=function(e,t){return!1},it.prototype._handleEat=function(e,t){return!0};var dt=function(e){this.grid=e};dt.prototype.getAction=function(e,t){var i=e.keyCode,n=this.grid.m_utils.ctrlEquivalent(e),o=e.shiftKey,s=e.altKey,r=it.keyCodes,a=t.cellOrHeader,l=t.readOnly,u=t.currentMode,d=t.activeMove,h=t.rowMove,c=t.columnSort,p=t.selection,_=t.selectionMode,m=t.multipleSelection;switch(i){case r.TAB_KEY:if("actionable"===u)return o?"TAB_PREV_IN_CELL":"TAB_NEXT_IN_CELL";if(!l)return o?"FOCUS_LEFT":"FOCUS_RIGHT";break;case r.ENTER_KEY:if("column"===a&&c)return"SORT";if(!s&&l&&"navigation"===u||"cell"!==a)return"ACTIONABLE";if(!l&&!s)return o?"FOCUS_UP":"FOCUS_DOWN";if(s&&l&&"navigation"===u)return"EDITABLE";if(!l&&("navigation"===u||"edit"===u))return"EDIT";break;case r.ESC_KEY:if("actionable"===u)return"EXIT_ACTIONABLE";if(d)return"CANCEL_REORDER";if(l){if(this.grid.m_discontiguousSelection)return"SELECT_DISCONTIGUOUS"}else{if("navigation"===u)return"EXIT_EDITABLE";if("edit"===u)return"CANCEL_EDIT"}break;case r.SPACE_KEY:if(-1!==a.indexOf("row")&&p&&("cell"===_&&m||"row"===_))return"SELECT_ROW";if(-1!==a.indexOf("column")&&p&&"cell"===_&&m)return"SELECT_COLUMN";if("cell"===a)if(l&&"navigation"===u){if(n&&p&&"cell"===_&&m)return"SELECT_COLUMN";if(o&&p&&("cell"===_&&m||"row"===_))return"SELECT_ROW"}else if("navigation"===u)return"DATA_ENTRY";break;case r.PAGEUP_KEY:if("edit"!==u)return"FOCUS_ROW_FIRST";break;case r.PAGEDOWN_KEY:if("edit"!==u)return"FOCUS_ROW_LAST";break;case r.END_KEY:if("edit"!==u)return"FOCUS_COLUMN_LAST";break;case r.HOME_KEY:if("edit"!==u)return"FOCUS_COLUMN_FIRST";break;case r.LEFT_KEY:if("actionable"===u)return"NO_OP";if("edit"!==u)return o&&p&&"cell"===_&&m?"SELECT_EXTEND_LEFT":n?"FOCUS_ROW_HEADER":"FOCUS_LEFT";break;case r.UP_KEY:if("actionable"===u)return"NO_OP";if("edit"!==u)return o&&p&&m?"SELECT_EXTEND_UP":n?"FOCUS_COLUMN_HEADER":"FOCUS_UP";break;case r.RIGHT_KEY:if("actionable"===u)return"NO_OP";if("edit"!==u)return o&&p&&"cell"===_&&m?"SELECT_EXTEND_RIGHT":n?"FOCUS_ROW_END_HEADER":"FOCUS_RIGHT";break;case r.DOWN_KEY:if("actionable"===u)return"NO_OP";if("edit"!==u)return o&&p&&m?"SELECT_EXTEND_DOWN":n?"FOCUS_COLUMN_END_HEADER":"FOCUS_DOWN";break;case r.F2_KEY:if("cell"!==a)return"ACTIONABLE";if(l&&"navigation"===u)return"EDITABLE";if(!l&&"navigation"===u)return"EDIT";break;case r.F8_KEY:if(o&&p&&m)return"SELECT_DISCONTIGUOUS";break;case r.F10_KEY:if(o)return"NO_OP";break;case r.V_KEY:if("navigation"===u&&n&&h)return"PASTE";if(!l&&"navigation"===u)return"DATA_ENTRY";break;case r.X_KEY:if("navigation"===u&&n&&h)return"CUT";if(!l&&"navigation"===u)return"DATA_ENTRY";break;case r.SHIFT_KEY:case r.CTRL_KEY:case r.ALT_KEY:break;case r.A_KEY:if(n&&p&&m)return"SELECT_ALL";case r.NUM5_KEY:if(n&&s)return"READ_CELL";default:if((i<r.F1_KEY||i>r.F15_KEY)&&!l&&"navigation"===u&&"cell"===a)return"DATA_ENTRY"}return"NO_OP"},tt.extension._WIDGET_NAME="ojDataGrid",n.CustomElementBridge.register("oj-data-grid",{metadata:tt});var ht,ct={properties:{asyncValidators:{type:"Array<Object>",value:[]},converter:{type:"object",properties:{type:{type:"'number'|'datetime'"},options:{type:"object"}}},describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},labelHint:{type:"string",value:""},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},minLength:{type:"number",value:0},optionRenderer:{type:"function",properties:{component:{type:"Element"},parent:{type:"Element"},index:{type:"number"},depth:{type:"number"},leaf:{type:"boolean"},data:{type:"object"},parentElement:{type:"Element"}}},options:{type:"Array<(oj.ojCombobox.Option|oj.ojCombobox.Optgroup)>|oj.DataProvider"},optionsKeys:{type:"oj.ojCombobox.OptionsKeys",properties:{childKeys:{type:"oj.ojCombobox.OptionsKeys",properties:{label:{type:"string"},value:{type:"string"},children:{type:"string"},childKeys:{type:"oj.ojCombobox.OptionsKeys",properties:{label:{type:"string"},value:{type:"string"},children:{type:"string"},childKeys:{type:"oj.ojCombobox.OptionsKeys"}}}}},children:{type:"string"},label:{type:"string"},value:{type:"string"}}},pickerAttributes:{type:"object",properties:{style:{type:"string"},class:{type:"string"}}},placeholder:{type:"string"},rawValue:{type:"string",writeback:!0,readOnly:!0},readonly:{type:"boolean",value:!1},required:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{filterFurther:{type:"string"},noMatchesFound:{type:"string"},required:{type:"object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}}}},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},validators:{type:"Array",value:[],properties:{type:{type:"string"},options:{type:"object"}}},value:{type:"Array<any>",writeback:!0},valueOptions:{type:"Array<Object>",writeback:!0}},methods:{refresh:{},validate:{},reset:{},showMessages:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{}},extension:{}},pt={properties:{asyncValidators:{type:"Array<Object>",value:[]},converter:{type:"object",properties:{type:{type:"'number'|'datetime'"},options:{type:"object"}}},describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},filterOnOpen:{type:"string",enumValues:["none","rawValue"],value:"none"},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},labelHint:{type:"string",value:""},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},minLength:{type:"number",value:0},optionRenderer:{type:"function",properties:{component:{type:"Element"},parent:{type:"Element"},index:{type:"number"},depth:{type:"number"},leaf:{type:"boolean"},data:{type:"object"},parentElement:{type:"Element"}}},options:{type:"Array<(oj.ojCombobox.Option|oj.ojCombobox.Optgroup)>|oj.DataProvider"},optionsKeys:{type:"oj.ojCombobox.OptionsKeys",properties:{childKeys:{type:"oj.ojCombobox.OptionsKeys",properties:{label:{type:"string"},value:{type:"string"},children:{type:"string"},childKeys:{type:"oj.ojCombobox.OptionsKeys",properties:{label:{type:"string"},value:{type:"string"},children:{type:"string"},childKeys:{type:"oj.ojCombobox.OptionsKeys"}}}}},children:{type:"string"},label:{type:"string"},value:{type:"string"}}},pickerAttributes:{type:"object",properties:{style:{type:"string"},class:{type:"string"}}},placeholder:{type:"string"},rawValue:{type:"string",writeback:!0,readOnly:!0},readonly:{type:"boolean",value:!1},required:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{filterFurther:{type:"string"},noMatchesFound:{type:"string"},required:{type:"object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}}}},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},validators:{type:"Array",value:[],properties:{type:{type:"string"},options:{type:"object"}}},value:{type:"any",writeback:!0},valueOption:{type:"object",writeback:!0,properties:{value:{type:"any"},label:{type:"string"}}}},methods:{refresh:{},validate:{},reset:{},showMessages:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojValueUpdated:{},ojAnimateStart:{},ojAnimateEnd:{}},extension:{}},_t={properties:{describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},labelHint:{type:"string",value:""},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},minimumResultsForSearch:{type:"number",value:15},optionRenderer:{type:"function",properties:{component:{type:"Element"},parent:{type:"Element"},index:{type:"number"},depth:{type:"number"},leaf:{type:"boolean"},data:{type:"object"},parentElement:{type:"Element"}}},options:{type:"Array<(oj.ojSelect.Option|oj.ojSelect.Optgroup)>|oj.DataProvider"},optionsKeys:{type:"oj.ojSelect.OptionsKeys",properties:{childKeys:{type:"oj.ojSelect.OptionsKeys",properties:{label:{type:"string"},value:{type:"string"},children:{type:"string"},childKeys:{type:"oj.ojSelect.OptionsKeys",properties:{label:{type:"string"},value:{type:"string"},children:{type:"string"},childKeys:{type:"oj.ojSelect.OptionsKeys"}}}}},children:{type:"string"},label:{type:"string"},value:{type:"string"}}},pickerAttributes:{type:"object",properties:{style:{type:"string"},class:{type:"string"}}},placeholder:{type:"string"},readonly:{type:"boolean",value:!1},renderMode:{type:"string",enumValues:["jet","native"]},required:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{filterFurther:{type:"string"},moreMatchesFound:{type:"string"},noMatchesFound:{type:"string"},oneMatchesFound:{type:"string"},required:{type:"object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}},searchField:{type:"string"}}},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},value:{type:"Array<any>",writeback:!0},valueOptions:{type:"Array<Object>",writeback:!0}},methods:{refresh:{},validate:{},reset:{},showMessages:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{}},extension:{}},mt={properties:{describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},labelHint:{type:"string",value:""},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},minimumResultsForSearch:{type:"number",value:15},optionRenderer:{type:"function",properties:{component:{type:"Element"},parent:{type:"Element"},index:{type:"number"},depth:{type:"number"},leaf:{type:"boolean"},data:{type:"object"},parentElement:{type:"Element"}}},options:{type:"Array<(oj.ojSelect.Option|oj.ojSelect.Optgroup)>|oj.DataProvider"},optionsKeys:{type:"oj.ojSelect.OptionsKeys",properties:{childKeys:{type:"oj.ojSelect.OptionsKeys",properties:{label:{type:"string"},value:{type:"string"},children:{type:"string"},childKeys:{type:"oj.ojSelect.OptionsKeys",properties:{label:{type:"string"},value:{type:"string"},children:{type:"string"},childKeys:{type:"oj.ojSelect.OptionsKeys"}}}}},children:{type:"string"},label:{type:"string"},value:{type:"string"}}},pickerAttributes:{type:"object",properties:{style:{type:"string"},class:{type:"string"}}},placeholder:{type:"string"},readonly:{type:"boolean",value:!1},renderMode:{type:"string",enumValues:["jet","native"]},required:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{filterFurther:{type:"string"},moreMatchesFound:{type:"string"},noMatchesFound:{type:"string"},oneMatchesFound:{type:"string"},required:{type:"object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}},searchField:{type:"string"}}},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},value:{type:"any",writeback:!0},valueOption:{type:"object",writeback:!0,properties:{value:{type:"any"},label:{type:"string"}}}},methods:{refresh:{},validate:{},reset:{},showMessages:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{}},extension:{}},gt={GENERATED_OPTIONS_SELECTOR:"oj-select-options-generated",KEY:{TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isControl:function(e){switch(e.which){case gt.KEY.SHIFT:case gt.KEY.CTRL:case gt.KEY.ALT:return!0;default:return!(!e.metaKey&&!e.ctrlKey)}},isFunctionKey:function(e){var t=e.which?e.which:e;return t>=112&&t<=123}},DEFAULT_FETCH_SIZE:15,FILTERING_FETCH_SIZE:100,DEFAULT_QUERY_DELAY:70,ValueChangeTriggerTypes:{ENTER_PRESSED:"enter_pressed",OPTION_SELECTED:"option_selected",BLUR:"blur",SEARCH_ICON_CLICKED:"search_icon_clicked"},lastMousePosition:{x:0,y:0},nextUid:(ht=1,function(){var e=ht;return ht+=1,e}),scrollBarDimensions:null,each2:function(e,t){for(var i=$.isFunction(e[0])?$(e[0]()):$(e[0]),n=-1,o=e.length;++n<o&&(i.context=i[0]=$.isFunction(e[0])?e[n]():e[n])&&!1!==t.call(i[0],n,i););return e},measureScrollbar:function(){var e=$("<div class='oj-listbox-measure-scrollbar'></div>");e.appendTo("body");var t={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),t},splitVal:function(e,t){var i,n,o;if(null===e||e.length<1)return[];for(n=0,o=(i=e.split(t)).length;n<o;n++)i[n]=$.trim(i[n]);return i},getSideBorderPadding:function(e){return e.outerWidth(!1)-e.width()},installKeyUpChangeEvent:function(e){var t="keyup-change-value";e.on("keydown",function(){void 0===$.data(e,t)&&$.data(e,t,e.val())}),e.on("keyup",function(i){if(i.which!==gt.KEY.ENTER){var n=$.data(e,t);void 0!==n&&e.val()!==n&&($.removeData(e,t),e.trigger("keyup-change"))}else i.preventDefault()})},getSearchText:function(e){var t,i=e.which||e.keyCode;return e&&"keydown"===e.type&&(32===i||i>47&&i<58||i>64&&i<91||i>95&&i<112||i>185&&i<193||i>218&&i<223)&&(i>=96&&i<=105&&(i-=48),t=String.fromCharCode(i),e.shiftKey||(t=t.toLowerCase()),e.preventDefault()),t},installFilteredMouseMove:function(e){e.on("mousemove",function(e){var t=gt.lastMousePosition;void 0!==t&&t.x===e.pageX&&t.y===e.pageY||($(e.target).trigger("mousemove-filtered",e),gt.lastMousePosition.x=e.pageX,gt.lastMousePosition.y=e.pageY)})},thunk:function(e){var t,i=!1;return function(){return!1===i&&(t=e(),i=!0),t}},_focus:function(e,t){if(t[0]!==document.activeElement){var i=gt._addBusyState(e.container,"setting focus");m.getTimer(40).getPromise().then(function(){var e,n=t[0],o=t.val().length;t.focus(),t.is(":visible")&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(o,o):n.createTextRange&&((e=n.createTextRange()).collapse(!1),e.select())),i()})}},getCursorInfo:function(e){var t=$(e)[0],i=0,n=0;if("selectionStart"in t)i=t.selectionStart,n=t.selectionEnd-i;else if("selection"in document){t.focus();var o=document.selection.createRange();n=document.selection.createRange().text.length,o.moveStart("character",-t.value.length),i=o.text.length-n}return{offset:i,length:n}},killEvent:function(e){e.preventDefault()},killEventImmediately:function(e){e.preventDefault(),e.stopImmediatePropagation()},local:function(e,t){var i,n,o=e,s=function(e){return""+e.label};$.isArray(o)&&(o={results:n=o}),!1===$.isFunction(o)&&(n=o,o=function(){return n});var r=o();return r&&r.text&&(s=r.text,$.isFunction(s)||(i=r.text,s=function(e){return e[i]})),function(e){var i=e.term,n={results:[]};""!==i||t?(o()&&gt.each2($(o().results),function(i,o){gt._processData(e,o,n.results,t,!0,s)}),e.callback(n)):e.callback(o())}},createOptionTag:function(e,t,i,n){var o=$("<option>");return o.addClass("oj-listbox-result oj-listbox-result-selectable oj-listbox-results-depth-"+e),o.attr("role","option"),o.attr("id","oj-listbox-result-label-"+gt.nextUid()),o.text(n(i)),o.attr("value",t),o},createOptgroupTag:function(e,t,i){var n=$("<optgroup>");return n.addClass("oj-listbox-results-sub"),n.attr("label",i(t)),e.addClass("oj-listbox-result-with-children"),n},listPopulateResults:function(e,t,i){var n=function(e,t,o){var s,r,a,l;t.each(function(){(r=$(this)).is("li")&&(r.children("ul").length>0?(a=r.contents().filter(function(){return 1!==this.nodeType||"ul"!==this.tagName.toLowerCase()}).text(),s=gt.createOptgroupTag(e,a,i),l=r.children("ul"),n(s,l.children(),o+1)):s=gt.createOptionTag(o,r.attr("oj-data-value"),r.text(),i),s.appendTo(e))})};n(e,t,0)},ojOptionPopulateResults:function(e,t,i){var n=function(e,t,o){var s,r,a;t.each(function(){(r=$(this)).is("oj-option")?(a=r.text()||r.attr("label"),s=gt.createOptionTag(o,r.prop("value"),a,i)):r.is("oj-optgroup")?(a=r.text()||r.attr("label"),s=gt.createOptgroupTag(e,a,i),n(s,r.children(),o+1)):r.is("option")&&(s=r),s.appendTo(e)})};n(e,t,0)},lookupOptionKeys:function(e,t,i){return e[t[i]||i]},arrayPopulateResults:function(e,t,i,n){var o=function(e,t,n,s){for(var r,a,l,u,d,h=0,c=t.length;h<c;h++)r=t[h],l=gt.lookupOptionKeys(r,s,"children"),u=gt.lookupOptionKeys(r,s,"label"),l&&l.length>0?(a=gt.createOptgroupTag(e,u,i),o(a,l,n+1,s.childKeys||{})):(d=gt.lookupOptionKeys(r,s,"value"),a=gt.createOptionTag(n,d,u,i)),a.appendTo(e)};o(e,t,0,n||{})},cleanupResults:function(e){e.children().not("oj-option, oj-optgroup").remove(),e.removeClass("oj-listbox-result-with-children")},_addBusyState:function(e,t){var i={description:"The component identified by '"+e.attr("id")+"' "+t};return c.getContext(e[0]).getBusyContext().addBusyState(i)},_clearBusyState:function(e){e&&e()},isDataProvider:function(e){return!(!e||!n.DataProviderFeatureChecker)&&n.DataProviderFeatureChecker.isDataProvider(e)},isTreeDataProvider:function(e){return!(!e||!n.DataProviderFeatureChecker)&&n.DataProviderFeatureChecker.isTreeDataProvider(e)},getDataProvider:function(e){if(e){var t=e._dataProvider||e.options;if(gt.isDataProvider(t))return t}return null},clearDataProviderWrapper:function(e){e.options._dataProvider=null},_findOption:function(e,t){if(e.children){var i=gt._findOption(e.children,t);if(i)return i}else if(n.Object.compareValues(t,e.value))return e;return null},findOption:function(e,t){if(Array.isArray(e)){for(var i=0,n=e.length;i<n;i++){var o=gt._findOption(e[i],t);if(o)return o}return null}return gt._findOption(e,t)},findOptions:function(e,t){for(var i=[],n=0;n<t.length;n++){var o=gt.findOption(e,t[n]);o&&i.push(o)}return i},findOptionFromResult:function(e,t,i){var n,o=gt.getLastQueryResult(e);return o&&(n=gt.findOption(o,t)),n?{value:t,label:n.label}:i},mergeValueAndValueOptions:function(e){var t=e.options.value,i=!1;if(e.multiple){var n,o=e.options.valueOptions;if(t&&t.length>0)o&&o.length&&(n=gt.findOptions(o,t)),n&&n.length===o.length||(i=!0);else o&&gt.syncValueWithValueOptions(e,o,t,null)}else{var s,r=e.options.valueOption;if(null!=t)r&&(s=gt.findOption(r,t)),s||(i=!0);else r&&gt.syncValueWithValueOption(e,r,t,null)}return i},syncValueWithValueOption:function(e,t,i,o){var s,r=!0;if(gt.isValueOptionsForPlaceholder(!1,t)?gt.isValueForPlaceholder(!1,i)?(s=i,r=!1):s=null:s=t?t.value:null,n.Object.compareValues(s,i)){if(!0===o){var a=e.element[0];$(a.options[a.selectedIndex]).text(gt.getLabel(t))}else if(!1===o){var l=e.select||e.combobox;l&&r&&l._updateSelection(t)}}else gt._forceSetValue(e,s)},syncValueWithValueOptions:function(e,t,i,o){var s,r=!0;if(gt.isValueOptionsForPlaceholder(!0,t))gt.isValueForPlaceholder(!0,i)?(s=i,r=!1):s=gt.getValueForPlaceholder(!0),n.Object.compareValues(s,i)||gt._forceSetValue(e,s);else if(t){s=[];for(var a=0;a<t.length;a++)s.push(t[a].value);if(n.Object.compareValues(s,i)){if(!0===o){var l=0;e.element.find("option").each(function(){if(this.selected){var e=gt.getLabel(t[l]);this.text!=e&&$(this).text(e),l+=1}})}else if(!1===o){var u=e.select||e.combobox;u&&r&&u._updateSelection(t)}}else gt._forceSetValue(e,s)}},_forceSetValue:function(e,t){var i=e;i.forceCanSetValue=!0;try{i._SetValue(t,null,{doValueChangeCheck:!1,_context:{internalSet:!0,writeback:!0}})}finally{delete i.forceCanSetValue}},isPlaceholderSpecified:function(e){return"string"==typeof e.placeholder},getFixupValueOptionsForPlaceholder:function(e){return e?[]:{value:null,label:null}},isValueOptionsForPlaceholder:function(e,t){return null==t||!e&&null==t.value||n.Object.compareValues(t,gt.getFixupValueOptionsForPlaceholder(e))},getValueOptionsForPlaceholder:function(e,t){var i=e.multiple;return e._IsCustomElement()&&gt.isPlaceholderSpecified(e.options)&&gt.isValueOptionsForPlaceholder(i,t)&&(t=gt.getFixupValueOptionsForPlaceholder(i)),t},getValueForPlaceholder:function(e){return e?[]:""},isValueForPlaceholder:function(e,t){return null==t||n.Object.compareValues(t,gt.getValueForPlaceholder(e))},setValueOptions:function(e,t){var i,n,o={internalSet:!0,changed:!0,writeback:!0};if(e.combobox&&e.combobox.opts?i=e.combobox.opts:e.select&&e.select.opts&&(i=e.select.opts),e.multiple){if(t&&t.length){n=[];for(var s=0;s<t.length;s++)n.push({value:t[s].value,label:t[s].label})}else n=t;e.option("valueOptions",n,{_context:o}),i&&(i.valueOptions=n)}else{var r=t;Array.isArray(t)&&(r=t[0]),r&&!gt.isValueOptionsForPlaceholder(e.multiple,r)?(n={value:r.value,label:r.label},e.option("valueOption",{value:r.value,label:r.label},{_context:o})):n=r,e.option("valueOption",n,{_context:o}),i&&(i.valueOption=n)}},updateValueOptions:function(e){if(e){var t=e.datalist?e.datalist:e.opts.element;e.opts.initSelection.call(null,t,function(t){var i=e.ojContext.multiple,n=t;if(void 0===n&&"oj-combobox"===e._classNm){var o=e.ojContext.options.value;if(i){n=[];for(var s=0;s<o.length;s++)n.push(e.opts.manageNewEntry(o[s]))}else n=e.opts.manageNewEntry(o)}n&&(e.setValOpts(n),i?e._updateSelection(n):e._updateSelectedOption(n))})}},applyValueOptions:function(e,t){if(e&&!e.ojContext._resolveValueOptionsLater&&("oj-combobox"===e._classNm||"oj-select"===e._classNm)){var i=e.ojContext.multiple,n=i?t.valueOptions:t.valueOption;if(gt.isValueOptionsForPlaceholder(i,n))return!1;if(n)return e._updateSelection(n),!0}return!1},isValueChanged:function(e){return e._valueHasChanged},setValueChanged:function(e,t){e._valueHasChanged=t},wrapDataProviderIfNeeded:function(e,t){var i=e.options,o=i.options;if(gt.isDataProvider(o)){var s,r=i.optionsKeys;if(r&&(null!=r.label||null!=r.value)){var a=gt.isTreeDataProvider(o);if(a&&!(o instanceof n.TreeDataProviderView)||!a&&!(o instanceof n.ListDataProviderView)){var l=function(e){for(var t=e.data,i={data:{}},n=Object.keys(t),o=0;o<n.length;o++){var s=n[o];i.data[s]=t[s]}return null!=r.label&&(i.data.label=t[r.label]),null!=r.value&&(i.data.value=t[r.value]),i.metadata={key:t[r.value]},i};s=a?new n.TreeDataProviderView(o,{dataMapping:{mapFields:l}}):new n.ListDataProviderView(o,{dataMapping:{mapFields:l}})}}s&&(i._dataProvider=s,t&&(t._dataProvider=s))}},getLabel:function(e){return null!=e.label?e.label:String(e.value)},_handleDataProviderEvents:function(e,t){if("mutate"===t.type&&null!=t.detail.remove){for(var i=t.detail.remove.data,n=!1,o=[].concat(e.options.value),s=0;s<i.length;s++){var r=o.indexOf(i[s].value);r>=0&&(o.splice(r,1),n=!0)}n&&e._setOption("value",o)}e._setOption("options",e.options.options)},addDataProviderEventListeners:function(e){var t=gt.getDataProvider(e.options);if(t){gt.removeDataProviderEventListeners(e);var i=gt._handleDataProviderEvents.bind(null,e);e._saveDataProviderEH=i,t.addEventListener("mutate",i),t.addEventListener("refresh",i)}},removeDataProviderEventListeners:function(e){var t=gt.getDataProvider(e.options),i=e._saveDataProviderEH;null!=t&&i&&(t.removeEventListener("mutate",i),t.removeEventListener("refresh",i),e._saveDataProviderEH=void 0)},addLoadingIndicator:function(e){var t=e;if(void 0===t._loadingIndicatorCount?t._loadingIndicatorCount=1:t._loadingIndicatorCount+=1,null==t._saveLoadingIndicator){var i=$(document.createElement("div"));i.uniqueId().attr("role","presentation").addClass("oj-listbox-loading-icon-container");var n=$(document.createElement("div"));n.addClass("oj-icon oj-listbox-loading-icon"),i.append(n),t.prepend(i),t._saveLoadingIndicator=i}},removeLoadingIndicator:function(e){var t=e;void 0!==t._loadingIndicatorCount&&(1===t._loadingIndicatorCount?(t._loadingIndicatorCount=void 0,null!=t._saveLoadingIndicator&&(t._saveLoadingIndicator.remove(),t._saveLoadingIndicator=void 0)):t._loadingIndicatorCount-=1)},addDropdownMessage:function(e,t,i){if(!e._saveDropdownMessage){var n=$(document.createElement("div"));n.addClass("oj-listbox-filter-message-box");var o=$(document.createElement("div"));o.addClass("oj-listbox-filter-message-text oj-listbox-liveregion"),o.attr({role:"region","aria-live":"polite"});var s=$(document.createElement("div"));s.addClass("oj-listbox-filter-message-separator"),n.append(o),n.append(s),e.prepend(n),o.text(i),e._saveDropdownMessage=n}},removeDropdownMessage:function(e){e._saveDropdownMessage&&(e._saveDropdownMessage.remove(),e._saveDropdownMessage=void 0)},fetchFlatData:function(e,t,i,n,o,s){var r=[],a=t.fetchFirst(i)[Symbol.asyncIterator]();return a.next().then(function t(l){if(l){var u=l.value.data;if(u)if(i.filterCriterion)r=u;else for(var d,h=0;h<u.length&&r.length<s;h++)d=u[h],n&&n.matcher&&!n.matcher(n.term,gt.getLabel(d),d)||r.push(d);if(o&&gt.removeDropdownMessage(o),o&&!l.done&&r.length>=s)gt.addDropdownMessage(o,e,e.getTranslatedString("filterFurther")),e._hasMore=!0;else{if(!l.done&&r.length<s)return a.next().then(t);e._hasMore=!1}}return Promise.resolve(r)})},fetchTreeData:function(e,t,i,n,o){var s=i.size;return e._hasMore=!1,o&&gt.removeDropdownMessage(o),function t(o){i.size=s;var r=[],a=o.fetchFirst(i)[Symbol.asyncIterator]();return a.next().then(function l(u){var d=u.value.data,h=function i(n){if(n<d.length){if(s>0){var a=d[n],l=o.getChildDataProvider(a.value);return l?t(l).then(function(e){return c(a,e),i(n+1)}):(c(a,[]),i(n+1))}e._hasMore=!0}return Promise.resolve(r)}(0);return h.then(function(){return u.done||s<=0?(u.done||(e._hasMore=!0),Promise.resolve(r)):a.next().then(l)});function c(e,t){var a=!n||!n.matcher||i.filterCriterion||n.matcher(n.term,gt.getLabel(e),e),l=null==o.getChildDataProvider(e.value);if(l||(a=!1),a&&0===t.length&&(s-=1),a||t.length>0){var u={label:e.label,value:e.value,data:e};e.disabled&&(u.disabled=!0),l&&!u.disabled||(u._jetUnSelectable=!0),t.length>0&&(u.children=t),r.push(u)}}})}(t).then(function(t){return e._hasMore&&o&&gt.addDropdownMessage(o,e,e.getTranslatedString("filterFurther")),t})},fetchFilteredData:function(e,t,i,o){var s=gt.getDataProvider(e.options),r={size:t},a=s.getCapability("filter"),l=n.AttributeFilterOperator.AttributeOperator.$co,u=!1;if(a){var d=a.operators;if(d&&d.length>0)for(var h=0;h<d.length;h++)if(d[h]===l){u=!0;break}}var c=gt.isTreeDataProvider(s);if(i&&i.term)if(u){var p,_=e.options.optionsKeys;p=_&&_.label?_.label:"label",r.filterCriterion={op:l,attribute:p,value:i.term}}else c||(r.size=gt.FILTERING_FETCH_SIZE);return c?gt.fetchTreeData(e,s,r,i,o):gt.fetchFlatData(e,s,r,i,o,t)},rejectedError:{},fetchFromDataProvider:function(e,t,i,n){var o=e.ojContext;o._fetchResolveFunc||(o._fetchResolveFunc=gt._addBusyState(e.container,"fetching data")),o._saveRejectFunc&&o._saveRejectFunc(gt.rejectedError);var s=new Promise(function(e,t){o._saveRejectFunc=t});e.selection&&"init"===t.fetchType&&!o._spinnerContainer&&(o._spinnerContainer=e.selection,gt.addLoadingIndicator(o._spinnerContainer),t.fetchType=null);var r=n||t.fetchSize||gt.DEFAULT_FETCH_SIZE,a=gt.fetchFilteredData(o,r,i,e.dropdown).then(function(e){return o._resultCount=e?e.length:0,e});Promise.race([s,a]).then(function(t){o._saveRejectFunc=null,o._spinnerContainer&&(gt.removeLoadingIndicator(o._spinnerContainer),o._spinnerContainer=void 0),o._resolveSearchBoxLater&&e._showSearchBox(""),i.callback({results:t}),o._fetchResolveFunc&&(o._fetchResolveFunc(),o._fetchResolveFunc=null)},function(e){e!==gt.rejectedError&&o._fetchResolveFunc&&(i.callback(),o._fetchResolveFunc(),o._fetchResolveFunc=null)})},fetchFirstBlockFromDataProvider:function(e,t,i){var n=gt.getDataProvider(t),o=gt._addBusyState(e,"fetching selected data"),s={size:i||gt.DEFAULT_FETCH_SIZE};return gt.isTreeDataProvider(n)?gt.fetchTreeData({},n,s,null,null).then(function(e){if(1===i&&e&&e.length>0){for(var t=e[0];t.children;)t=t.children[0];e=[t]}return gt._clearBusyState(o),e},function(){return gt._clearBusyState(o),null}):n.fetchFirst(s)[Symbol.asyncIterator]().next().then(function(e){return gt._clearBusyState(o),e.value.data},function(){return gt._clearBusyState(o),null})},duringFetchByKey:function(e){return e._fetchByKeys},fetchByKeyFromDataProvider:function(e,t,i){var o,s=gt.getDataProvider(t),r=e&&e.selection?e.container:e,a=gt._addBusyState(r,"fetching selected data");e&&e.selection&&("init"!==e.opts.fetchType||r._spinnerContainer||(r._spinnerContainer=e.selection,gt.addLoadingIndicator(r._spinnerContainer))),r._fetchByKeys&&r._fetchByKeys.promise&&n.Object.compareValues(i.value,r._fetchByKeys.key)?o=r._fetchByKeys.promise:(o=s.fetchByKeys({keys:i.value}),r._fetchByKeys={key:i.value,promise:o}),o.then(function(e){r._fetchByKeys=void 0,r._spinnerContainer&&(gt.removeLoadingIndicator(r._spinnerContainer),r._spinnerContainer=void 0);var t=[];e.results.forEach(function(e){t.push(e.data)}),i.callback({results:t}),gt._clearBusyState(a)},function(){r._fetchByKeys=void 0,i.callback(),gt._clearBusyState(a)})},validateFromDataProvider:function(e,t,i){return new Promise(function(n,o){gt.fetchByKeyFromDataProvider(e,t,{value:Array.isArray(i)?i:[i],callback:function(e){var t=null;if(e&&e.results.length){(t={}).value=[],t.valueOptions=[];for(var i=0;i<e.results.length;i++)t.valueOptions.push(e.results[i]),t.value.push(e.results[i].value)}n(t)}})})},isReadonly:function(e){return e._IsCustomElement()&&e.options.readOnly},remote:function(e,t){return function(i){var n={component:this.ojContext};i.value?n.value=i.value:n.term=i.term||"",e(n).then(function(e){var n={results:[]};e&&gt.each2($(e),function(e,o){gt._processData(i,o,n.results,t,!1)}),i.callback(n)})}},_processData:function(e,t,i,n,o,s){var r,a=t[0];if(!a.label&&n&&n.label&&(a.label=a[n.label]),!a.value&&n&&n.value&&(a.value=a[n.value]),!a.children&&n&&n.children&&(a.children=a[n.children],delete a[n.children]),a.children){r={};for(var l=Object.keys(a),u=0;u<l.length;u++){var d=l[u];r[d]=a[d]}r.children=[],gt.each2($(a.children),function(t,i){gt._processData(e,i,r.children,n&&n.childKeys?n.childKeys:null,o,s)}),(!o||e.matcher(e.term,s(r),a)||r.children.length)&&i.push(r)}else o&&!e.matcher(e.term,s(a),a)||i.push(a)},checkFormatter:function(e,t,i){if($.isFunction(t))return!0;if(!t)return!1;throw new Error(i+" must be a function or a false value")},clazz:function(e,t){var i=function(){};return n.Object.createSubclass(i,e,""),i.prototype=$.extend(i.prototype,t),i},LAST_QUERY_RESULT:"last-query-result",getLastQueryResult:function(e){return $.data(e.container,e._classNm+"-"+gt.LAST_QUERY_RESULT)},saveLastQueryResult:function(e,t){$.data(e.container,e._classNm+"-"+gt.LAST_QUERY_RESULT,t)}},ft={closeOnSelect:!0,openOnEnter:!0,formatNoMatches:function(e){return e.getTranslatedString("noMatchesFound")},formatMoreMatches:function(e,t){return 1===t?e.getTranslatedString("oneMatchesFound"):e.getTranslatedString("moreMatchesFound",{num:""+t})},id:function(e){return e.id},matcher:function(e,t){return(""+t).toUpperCase().indexOf((""+e).toUpperCase())>=0},separator:","},vt=gt.clazz(Object,{_bind:function(e){var t=this;return function(){e.apply(t,arguments)}},_customOptionRenderer:function(e){var t,i=this;e.each(function(){(t=$(this)).is("oj-option")?t.wrap("<li></li>"):t.is("oj-optgroup")&&(t.wrap("<li></li>"),i._customOptionRenderer(t.children()),t.children().wrapAll("<ul class='oj-listbox-result-sub'></ul>"))})},_init:function(e){var t,i,n=this._classNm,o=this._elemNm;this.ojContext=e.ojContext;var s=this._prepareOpts(e);this.opts=s,this.id=s.id,this.headerInitialized=!1,this.isOjOption=this.ojContext._IsCustomElement()&&!s.options&&s.element.find("oj-option").length>0,void 0!==s.element.data(o)&&null!==s.element.data(o)&&s.element.data(o)._destroy(),this.container=this._createContainer();var r=s.rootAttributes;this.containerId=r&&r.id?r.id:"ojChoiceId_"+(this._getAttribute("id")||"autogen"+gt.nextUid()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=gt.thunk(function(){return s.element.closest("body")}),this.container.attr("style",this._getAttribute("style")),this.elementTabIndex=this._getAttribute("tabindex"),this.opts.element.data(o,this).attr("tabindex","-1").before(this.container),this.container.data(o,this),this.dropdown=this.container.find(".oj-listbox-drop"),this.dropdown.data("ojlistbox",this),this._setPickerAttributes(s.pickerAttributes);var a=this.containerId;this.dropdown.attr("data-oj-containerid",a),t=this.container.find(".oj-listbox-results"),this.results=t,this.results.on("click",gt.killEvent);var l=this.ojContext._GetLabelElement();if(l){var u=l.attr("id");u?t.attr("aria-labelledby",u):t.attr("aria-label",l.text())}else{var d=this.ojContext.element.attr("aria-label");d&&t.attr("aria-label",d)}if(s.list&&$("#"+s.list).is("ul")){var h=$("#"+s.list);this.dropdownListParent=h.parent(),h.addClass("oj-listbox-results").attr("role","listbox"),this.results.replaceWith(h),t=this.container.find(".oj-listbox-results"),this.results=t,this.results.css("display","")}if(this.isOjOption){var c=s.element.children();this._customOptionRenderer(c),this.results.append(s.element.children()),this.datalist=this.results}i="oj-select"===n?this.container.find("input.oj-listbox-input"):this.container.find("input."+n+"-input"),this.search=i,this.queryCount=0,this.resultsPage=0,this.context=null,this._initContainer(),this.container.on("click",gt.killEvent),gt.installFilteredMouseMove(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",".oj-listbox-results",this._bind(this._highlightUnderEvent)),$(this.container).on("change","."+n+"-input",function(e){e.stopPropagation()}),$(this.dropdown).on("change","."+n+"-input",function(e){e.stopPropagation()});var p=this;if(gt.installKeyUpChangeEvent(i),i.on("keyup-change input paste",this._bind(this._updateResults)),i.on("focus",function(){i.addClass(n+"-focused"),"oj-select"!==n&&p.container.addClass("oj-focus")}),i.on("blur",function(){i.removeClass(n+"-focused"),"oj-select"!==n&&p.container.removeClass("oj-focus")}),this.dropdown.on("mouseup",".oj-listbox-results",this._bind(function(e){$(e.target).closest(".oj-listbox-result-selectable").length>0&&(this._highlightUnderEvent(e),this._selectHighlighted(null,e))})),this.dropdown.on("click mouseup mousedown",function(e){e.stopPropagation()}),$.isFunction(this.opts.initSelection)){this.opts.fetchType="init";var _=this.getValOpts();(!this.ojContext.multiple||_&&0!==_.length)&&(this.ojContext.multiple||_)||(_=null),this._initSelection(_)}var m=s.element.prop("readonly");void 0===m&&(m=!1),this._readonly(m);var g=s.element.prop("disabled");void 0===g&&(g=!1),this._enable(!g),gt.scrollBarDimensions=gt.scrollBarDimensions||gt.measureScrollbar(),this.autofocus=s.element.prop("autofocus"),s.element.prop("autofocus",!1),this.autofocus&&this._focus(),gt.addDataProviderEventListeners(s.ojContext),this.applyReadonlyState()},applyReadonlyState:function(){var e=this.ojContext._GetContentElement();gt.isReadonly(this.ojContext)?(this.container.addClass("oj-read-only"),"oj-combobox"===this._classNm?this.ojContext.multiple?(e=null,this.selection.attr("tabindex","0"),this.selection.attr("aria-labelledby",n.EditableValueUtils.getOjLabelId($(this.ojContext.OuterWrapper),this.ojContext.uuid))):e.attr("readonly",!0):"oj-select"===this._classNm&&e.attr("aria-readonly","true"),e&&(e.removeAttr("role"),e.removeAttr("aria-expanded"))):(this.container.removeClass("oj-read-only"),"oj-combobox"===this._classNm?this.ojContext.multiple?(e=null,this.selection.removeAttr("tabindex"),this.selection.removeAttr("aria-labelledby")):e.removeAttr("readonly",!0):"oj-select"===this._classNm&&e.removeAttr("aria-readonly"),e&&(e.attr("role","combobox"),e.attr("aria-expanded","false"))),this._enableInterface()},_clickAwayHandler:function(e){var t=this.dropdown;$(e.target).closest(t).length||$(e.target).closest("#"+t.attr("data-oj-containerid")).length||t.length>0&&t.data("ojlistbox").close(e)},_surrogateRemoveHandler:function(){this.dropdown&&this.dropdown.remove()},_destroy:function(){var e=this._closeDelayTimer;isNaN(e)||(delete this._closeDelayTimer,window.clearTimeout(e));var t=this.opts.element,i=t.data(this._elemNm);this.close(),this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.opts.list&&this.results?(this._cleanupList(this.results),this.dropdownListParent&&this.dropdownListParent.append(this.results)):this.isOjOption&&this.results&&(this._unwrapOjOptions(this.results),this.opts.element.append(this.results.children())),void 0!==i&&(i.container.after(t),i.container.remove(),i.dropdown.remove(),t.removeAttr("aria-hidden").removeData(this._elemNm).off("."+this._classNm).prop("autofocus",this.autofocus||!1),this.elementTabIndex?t.attr({tabindex:this.elementTabIndex}):t.removeAttr("tabindex"),t.show())},_unwrapOjOptions:function(e){var t,i=e.children(),n=this;i.each(function(){(t=$(this)).is("li")&&(t.hasClass("oj-listbox-result-with-children")||t.children("oj-optgroup").length>0?(t.hasClass("oj-listbox-result-with-children")&&t.children(".oj-listbox-result-label").remove(),n._unwrapOjOptions(t.find("oj-optgroup").children()),t.find("oj-optgroup").children().children().unwrap(),t.find("oj-optgroup").unwrap()):t.hasClass("oj-listbox-result")?t.find("oj-option").unwrap().unwrap():t.find("oj-option").unwrap())})},_cleanupList:function(e){if(e&&e.is("ul")){e.removeClass("oj-listbox-results oj-listbox-result-sub"),e.removeAttr("role");for(var t=e.children().length-1;t>=0;t--)this._cleanupList($(e.children()[t]))}else if(e.is("li")){(e.hasClass("oj-listbox-placeholder")||e.hasClass("oj-listbox-no-results"))&&e.remove(),e.attr("class")&&e.attr("class",e.attr("class").replace(/oj-listbox-\S+/g,""));var i=e.children(".oj-listbox-result-label");i&&i.contents().unwrap(),"none"===e.css("display")&&e.css("display",""),this._cleanupList(e.children("ul"))}},_optionToData:function(e){if(e.is("option")||e.is("oj-option"))return{value:e.prop("value")||e.attr("value"),label:e.text().trim()||e.attr("label"),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:"locked"===e.attr("locked")||!0===e.data("locked")};if(e.is("optgroup")||e.is("oj-optgroup"))return{label:e.prop("label")||e.attr("label"),disabled:e.prop("disabled"),children:[],element:e.get(),css:e.attr("class")};if(e.is("li")){var t,i,n,o=null,s=e.children();if(s&&s.length>0&&s.is("ul"))t=e.attr("oj-data-label")?e.attr("oj-data-label"):e.clone().children().remove().end().text().trim(),i=e.attr("oj-data-value"),o=[];else if(s&&s.length>0&&s.is("oj-optgroup"))t=s.prop("label"),n=s.prop("disabled"),o=[];else{var r=e.find("oj-option");t=e.attr("oj-data-label")?e.attr("oj-data-label"):e.text().trim(),i=r.length>0?r.prop("value"):e.attr("oj-data-value"),n=r.length>0?r.prop("disabled"):void 0}return{value:i,label:t,disabled:n,element:e.get(),css:e.attr("class"),children:o}}},_prepareOpts:function(e){var t,i,n=e,o=this;n.options&&Array.isArray(n.options)&&n.optionsKeys&&(n.options=$.extend(!0,[],n.options));var s=(t=n.element).get(0).tagName.toLowerCase();if(n.ojContext._IsCustomElement()?!n.options&&n.element.children().length>0&&(i=$(t),this.datalist=i):"input"===s&&t.attr("list")?(i=$("#"+t.attr("list")),this.datalist=i):"select"===s&&t.children().length>0?(i=t,this.datalist=i):n.list&&(i=$("#"+n.list),this.datalist=i),(n=$.extend({},{populateResults:function(e,t,i,r){var a,l=this.opts.id,u=gt.isTreeDataProvider(gt.getDataProvider(this.opts)),d=this.opts.optionRenderer;if("function"!=typeof d&&(d=null),this.opts.ojContext._IsCustomElement()&&d){var h=d;d=function(e){var t=h(e);return!t||"OJ-OPTION"!==t.tagName&&"OJ-OPTGROUP"!==t.tagName?t&&t.insert?t.insert:null:(t.hasAttribute("data-oj-binding-provider")||t.setAttribute("data-oj-binding-provider","none"),t)}}(a=function(e,t,r,h,c){var p,_,m,g,f,v,y,b,C=function(e,t){if(t.children&&t.children.length>0){var i=t.element&&$(t.element[0]).is("li")&&$(t.element[0]).children("ul"),n=i?$(t.element[0]).children("ul"):$("<ul></ul>");n.hasClass("oj-listbox-result-sub")||n.addClass("oj-listbox-result-sub"),a(t,t.children,n,h+1,!1),i||e.append(n)}},S=function(e,t,i){e.length&&i&&i.length&&e.each(function(){!function e(i,n){var o=0;if(3===i.nodeType){var s=i.data.toUpperCase().indexOf(n);if(s>=0){var r=document.createElement("span");r.className=t;var a=i.splitText(Math.min(s,i.data.length));a.splitText(Math.min(n.length,a.data.length));var l=a.cloneNode(!0);r.appendChild(l),a.parentNode.replaceChild(r,a),o=1}}else if(1===i.nodeType&&i.childNodes&&!/(script|style)/i.test(i.tagName))for(var u=0;u<i.childNodes.length;u++)u+=e(i.childNodes[u],n);return o}(this,i.toUpperCase())})},E=function(e){if(n.highlightTermInOptions(i)){var t=e.find(".oj-listbox-highlighter-section");t.length||(t=e),S(t,"oj-listbox-highlighter",i.term)}},T=function(t,i){var s;if(d){var r=u?i.data:i,a={index:p,depth:h,leaf:!i.children,parent:e,data:r,component:n.ojContext,componentElement:o.container[0],parentElement:t.get(0)},l=d.call(n.ojContext,a);null!==l&&(null===l.parentNode||l.parentNode instanceof DocumentFragment)&&(t.get(0).appendChild(l),s=l)}else void 0!==(b=n.formatResult(i))&&(t.text(b),t.attr("aria-label",b));return E(t),s},D=o._getPlaceholder();for(c&&null!==D&&!i.term&&r.find(".oj-listbox-placeholder").length<=0&&("select"!==s||!o.ojContext._IsRequired())&&(m={value:"",label:D},(v=$("<li></li>")).addClass("oj-listbox-placeholder oj-listbox-results-depth-0 oj-listbox-result oj-listbox-result-selectable"),v.attr("role","presentation"),(y=$(document.createElement("div"))).addClass("oj-listbox-result-label"),y.attr("id","oj-listbox-result-label-"+gt.nextUid()),y.attr("role","option"),void 0!==(b=n.formatResult(m))&&y.text(b),y.attr("aria-label",b),v.append(y),v.data(o._elemNm,m),r.prepend(v)),p=0,_=t.length;p<_;p++){f=!0===(m=t[p]).disabled,g=u?!m._jetUnSelectable:!f&&void 0!==l(m);var A=m.element&&$(m.element[0]).is("li");if((v=A?$(m.element[0]):$("<li></li>")).hasClass("oj-listbox-result"))m.children&&m.children.length>0&&C(v,m),E($(m.element[0]).children("div")),$(m.element[0]).css("display","");else{if(v.addClass("oj-listbox-results-depth-"+h),v.addClass("oj-listbox-result"),v.addClass(g?"oj-listbox-result-selectable":"oj-listbox-result-unselectable"),f&&v.addClass("oj-disabled"),m.children&&v.addClass("oj-listbox-result-with-children"),v.attr("role","presentation"),(y=$(document.createElement("div"))).addClass("oj-listbox-result-label"),y.attr("id","oj-listbox-result-label-"+gt.nextUid()),y.attr("role","option"),f&&y.attr("aria-disabled","true"),!A){var I=T(y,m);if(v.append(y),I&&("OJ-OPTION"===I.tagName||"OJ-OPTGROUP"===I.tagName)&&(I.getAttribute("disabled")&&(v.removeClass("oj-listbox-result-selectable"),v.addClass("oj-listbox-result-unselectable oj-disabled"),y.attr("aria-disabled","true")),"OJ-OPTGROUP"===I.tagName&&I.hasAttribute("label"))){var O=I.getAttribute("label"),w=document.createTextNode(O);I.insertBefore(w,I.firstChild)}}if(m.children&&m.children.length>0&&C(v,m),v.data(o._elemNm,m),A){var R=$(m.element[0]);if(R.children("oj-optgroup").length>0){var x=R.children("oj-optgroup").prop("label")+"";R.prepend(y.text(x))}else R.children("oj-option").length>0?R.contents().wrapAll(y):R.contents().filter(function(){return"UL"!==this.tagName}).wrapAll(y);E(R.children("div")),R.css("display","")}else r.append(v)}}})(null,t,e,0,r)},highlightTermInOptions:function(e){return!(!0===e.initial)}},ft,n)).id=function(e){return e.value},n.formatResult=function(e){var t=gt.getLabel(e);return isNaN(t)?t:this.ojContext._formatValue(t)},n.formatSelection=function(e){var t=gt.getLabel(e);if(e&&t)return isNaN(t)?t:this.ojContext._formatValue(t)},"select"!==s&&null!==n.manageNewEntry&&(n.manageNewEntry=function(e){var t={};return t.label=$.trim(e),t.value=t.label,t}),this.datalist)n.query=this._bind(function(e){var t,i,n={results:[],more:!1},s=e.term;i=function(t,n){var r,a,l=t.children()&&t.children().length>0&&(t.children().is("ul")||t.children().is("oj-optgroup"));t.is("option")||t.is("oj-option")||t.is("li")&&!l?e.matcher(s,t.text()||t.attr("label"),t)&&n.push(o._optionToData(t)):(t.is("optgroup")||t.is("oj-optgroup")||t.is("li")&&l)&&(r=o._optionToData(t),t.is("optgroup")||t.is("oj-optgroup")?a=t.children():t.children("oj-optgroup")?a=t.children().children("ul").children():t.children("ul").children(),gt.each2(a,function(e,t){i(t,r.children)}),r.children.length>0&&n.push(r))},t=this.datalist.children(),void 0!==this._getPlaceholder()&&t.length>0&&""===t.first().attr("value")&&(t=t.slice(1)),gt.each2(t,function(e,t){i(t,n.results)}),e.callback(n)});else if("options"in n){var r=n.options;gt.getDataProvider(n)?n.query=function(e){e.value?gt.fetchByKeyFromDataProvider(o,n,e):gt.fetchFromDataProvider(o,n,e)}:$.isFunction(r)?n.query=gt.remote(r,n.optionsKeys?n.optionsKeys:null):n.query=gt.local(r,n.optionsKeys?n.optionsKeys:null)}return n},_createHeader:function(){var e=this.opts.element.find(".oj-listbox-header");if(e.length){this.header=$("<li>",{class:"oj-listbox-result-header oj-listbox-result-unselectable",role:"presentation"}),this.header.append(e.children()),this._initializeHeaderItems();var t=$("<ul>",{class:"oj-listbox-results-with-header",role:"listbox"});t.append(this.header),t.appendTo(this.results.parent());var i=$("<li>",{role:"presentation"});t.append(i),this.results.attr("role","presentation"),this.results.appendTo(i)}this.headerInitialized=!0},_initializeHeaderItems:function(){this.headerItems=this.header.find("li[role='option'], li:not([role])"),this.headerItems.uniqueId(),this.header.find("ul").attr("role","presentation"),this.header.find("li:not([role])").attr("role","option");this.header.find("a, input, select, textarea, button, object, .oj-component-initnode").each(function(){$(this).attr("tabIndex",-1)})},_isHeaderItem:function(e){var t=!1;return this.headerItems.each(function(){return $(this).attr("id")!==e||(t=!0,!1)}),t},_getNextHeaderItem:function(e){if(!this.headerItems)return null;if(!e)return this.headerItems.first();var t=!1,i=null;return this.headerItems.each(function(){return t?(i=$(this),!1):(t=$(this).attr("id")===e,!0)}),i},_getPreviousHeaderItem:function(e){if(!this.headerItems)return null;var t=null;return this.headerItems.each(function(){return $(this).attr("id")!==e&&(t=$(this),!0)}),t},_setFocusOnHeaderItem:function(e){var t=e.find(".oj-component .oj-enabled").first();if(0===t.length){0===(t=e.find("a, input, select, textarea, button, object, .oj-component-initnode").first()).length&&(t=e.children().first())}t&&t.addClass("oj-focus oj-focus-highlight oj-focus-only")},_removeHighlightFromHeaderItems:function(){this.headerItems&&this.headerItems.find(".oj-focus").removeClass("oj-focus oj-focus-highlight oj-focus-only")},_triggerSelect:function(e){var t=$.Event(this._elemNm+"-selecting",{val:this.id(e),object:e});return this.opts.element.trigger(t),!t.isDefaultPrevented()},_isInterfaceEnabled:function(){return!0===this.enabledInterface},_enableInterface:function(){var e=this._enabled&&!(gt.isReadonly(this.ojContext)||this._readonly);return e!==this.enabledInterface&&(gt.isReadonly(this.ojContext)||this.container.toggleClass("oj-disabled",!e),this.close(),this.enabledInterface=e,!0)},_enable:function(e){var t=e;void 0===t&&(t=!0),this._enabled!==t&&(this._enabled=t,this.opts.element.prop("disabled",!(t||gt.isReadonly(this.ojContext))),this.container.toggleClass("oj-enabled",t),this._enableInterface())},_disable:function(){this._enable(!1)},_readonly:function(e){var t=e;return void 0===t&&(t=!1),this._readonly!==t&&(this._readonly=t,this.opts.element.prop("readonly",t),this._enableInterface(),!0)},_opened:function(){return this.container.hasClass("oj-listbox-dropdown-open")},_getDropdownPositionElement:function(){return this.container.children().first()},_usingHandler:function(e,t){if(n.PositionUtils.isAligningPositionClipped(t)){var i=gt._addBusyState(this.container,"closing popup");this._closeDelayTimer=window.setTimeout(function(){$.proxy(this.close,this),i()},1)}else{var o=this.container,s=t.element.element;s.css(e),"bottom"===t.vertical?(o.addClass("oj-listbox-drop-above"),s.addClass("oj-listbox-drop-above")):(o.removeClass("oj-listbox-drop-above"),s.removeClass("oj-listbox-drop-above"))}},_getDropdownPosition:function(){var e={my:"start top",at:"start bottom",of:this._getDropdownPositionElement(),collision:"flip",using:$.proxy(this._usingHandler,this)},t="rtl"===n.DomUtils.getReadingDirection();return n.PositionUtils.normalizeHorizontalAlignment(e,t)},_positionDropdown:function(){var e=this.dropdown,t=this._getDropdownPosition(),i=this.container;e.css("width",i.outerWidth()),e.position(t)},_shouldOpen:function(e){if(this._opened())return!1;if(!1===this._enabled||gt.isReadonly(this.ojContext)||!0===this._readonly)return!1;var t={component:this.opts.element};return this.ojContext._trigger("beforeExpand",e,t)},_clearDropdownAlignmentPreference:function(){this.container.removeClass("oj-listbox-drop-above"),this.dropdown.removeClass("oj-listbox-drop-above")},open:function(e,t){return!!this._shouldOpen(e)&&(this._opening(e,t),!0)},_opening:function(){this.headerInitialized||this._createHeader(),this.container.addClass("oj-listbox-dropdown-open")},_showDropDown:function(){if(this._opened()&&"true"!==this._getActiveContainer().attr("aria-expanded")){this._clearDropdownAlignmentPreference();var e=this.dropdown.parent();if("oj-select"===this._classNm&&!0!==this.opts.multiple&&e&&e.hasClass("oj-listbox-drop-layer"))n.PopupService.getInstance().triggerOnDescendents(e,n.PopupService.EVENT.POPUP_REFRESH);else{this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),this.dropdown.appendTo(this.body()),this.header&&(this.dropdown.find(".oj-listbox-results-with-header").prepend(this.header),this.header.show());var t={};t[n.PopupService.EVENT.POPUP_CLOSE]=$.proxy(this.close,this),t[n.PopupService.EVENT.POPUP_REMOVE]=$.proxy(this._surrogateRemoveHandler,this),t[n.PopupService.EVENT.POPUP_AUTODISMISS]=$.proxy(this._clickAwayHandler,this),t[n.PopupService.EVENT.POPUP_REFRESH]=$.proxy(this._positionDropdown,this);var i={};i[n.PopupService.OPTION.POPUP]=this.dropdown,i[n.PopupService.OPTION.LAUNCHER]=this.opts.element,i[n.PopupService.OPTION.EVENTS]=t,i[n.PopupService.OPTION.POSITION]=this._getDropdownPosition(),i[n.PopupService.OPTION.LAYER_SELECTORS]="oj-listbox-drop-layer",i[n.PopupService.OPTION.CUSTOM_ELEMENT]=this.ojContext._IsCustomElement(),n.PopupService.getInstance().open(i),$("#oj-listbox-drop").removeAttr("id"),this.dropdown.attr("id","oj-listbox-drop");var o=this.containerId;this.dropdown.attr("data-oj-containerid",o)}this._positionDropdown(),this._getActiveContainer().attr("aria-expanded",!0)}},close:function(e){if(this._opened()){this.container.removeClass("oj-listbox-dropdown-open");var t=this._getActiveContainer().attr("aria-expanded");if(delete this.ojContext._resolveSearchBoxLater,t&&"false"!==t){var i=this.containerId,o="scroll."+i,s="resize."+i,r="orientationchange."+i;this.container.parents().add(window).each(function(){$(this).off(o).off(s).off(r)}),this._clearDropdownAlignmentPreference();var a={};a[n.PopupService.OPTION.POPUP]=this.dropdown,n.PopupService.getInstance().close(a),this.header&&(this.header.hide(),this.header.appendTo(this.container)),this.dropdown.removeAttr("data-oj-containerid"),this.dropdown.removeAttr("id"),this.opts.list||this.isOjOption?this._removeHighlight():(this.dropdown.detach(),this.results.empty()),this._getActiveContainer().attr("aria-expanded",!1),"ojcombobox"===this._elemNm&&this._getActiveContainer().removeAttr("aria-activedescendant"),$.removeData(this.container,this._classNm+"-last-term")}}},_setPickerAttributes:function(e){n.EditableValueUtils.setPickerAttributes(this.dropdown,e)},_clearSearch:function(){},_ensureHighlightVisible:function(){var e,t,i,n,o,s,r=this.results,a=this._highlight();a<0||(e=this._findHighlightableChoices(),i=(t=$(e[a])).offset().top+t.outerHeight(!0),a===e.length-1&&(s=r.find("li.oj-listbox-more-results")).length>0&&(i=s.offset().top+s.outerHeight(!0)),i>(n=r.offset().top+r.outerHeight(!0))&&r.scrollTop(r.scrollTop()+(i-n)),(o=t.offset().top-r.offset().top)<0&&"none"!==t.css("display")&&r.scrollTop(r.scrollTop()+o))},_findHighlightableChoices:function(){return this.results.find(".oj-listbox-result-selectable:not(.oj-disabled, .oj-selected)").filter(function(){return"none"!==$(this).css("display")})},_moveHighlight:function(e){var t=this._findHighlightableChoices(),i=this._highlight();if(this.header&&(i<=0||i===t.length-1)){var n=this._getActiveContainer().attr("aria-activedescendant"),o=this._isHeaderItem(n);o||(n=null);var s=null;if(e>0&&(i<0||i===t.length-1)?s=this._getNextHeaderItem(n):e<0&&(o&&i<0||0===i)&&(s=this._getPreviousHeaderItem(n)),s)return this._removeHighlight(),this._setFocusOnHeaderItem(s),void this._getActiveContainer().attr("aria-activedescendant",s.attr("id"));o&&e<0&&(i=0)}for(;i>=-1&&i<t.length;){(i+=e)===t.length?i=0:-1===i&&(i=t.length-1);var r=$(t[i]);if(r.hasClass("oj-listbox-result-selectable")&&!r.hasClass("oj-disabled")&&!r.hasClass("oj-selected")){this._highlight(i);break}}},_highlight:function(e){var t,i=e,n=this._findHighlightableChoices(),o=this.dropdown.find(".oj-listbox-search"),s=o&&!o.attr("aria-hidden");if(0===arguments.length){var r=n.filter(".oj-hover");return r.length||(r=n.children(".oj-hover").closest(".oj-listbox-result")),s&&this._updateMatchesCount(r.text()),n.get().indexOf(r[0])}if(i>=n.length&&(i=n.length-1),i<0&&(i=0),this._removeHighlight(),(t=$(n[i])).hasClass("oj-listbox-result-with-children")){var a=t.children(".oj-listbox-result-label");a.addClass("oj-hover"),s&&this._updateMatchesCount(a.text())}else t.addClass("oj-hover"),s&&this._updateMatchesCount(t.text());return this._getActiveContainer().attr("aria-activedescendant",t.find(".oj-listbox-result-label").attr("id")),this._ensureHighlightVisible(),0},_removeHighlight:function(){this.results.find(".oj-hover").removeClass("oj-hover"),this._removeHighlightFromHeaderItems(),"ojcombobox"===this._elemNm&&this._getActiveContainer().removeAttr("aria-activedescendant")},_highlightUnderEvent:function(e){var t=$(e.target).closest(".oj-listbox-result-selectable");if(t.length>0&&!t.is(".oj-hover")){var i=this._findHighlightableChoices();this._highlight(i.index(t))}else 0===t.length&&this._removeHighlight()},_updateMatchesCount:function(e){if(!this.dropdown.find(".oj-listbox-filter-message-text").length){var t=this.container.find(".oj-listbox-liveregion");t.length&&t.text(e)}},_updateResults:function(e){var t=this.search,i=this,n=t.val(),o=$.data(this.container,this._classNm+"-last-term");if((!0===e||!o||n!==o||!0===this.opts.multiple)&&(o||n||!e||"input"!==e.type)){$.data(this.container,this._classNm+"-last-term",n);var s=this.opts.minLength||0;n.length>=s?(this._queryTimer&&this._queryTimer.clear(),e&&!0!==e?(this._queryResolveBusyState=gt._addBusyState(this.container,"query results"),this._queryTimer=m.getTimer(gt.DEFAULT_QUERY_DELAY),this._queryTimer.getPromise().then(function(t){t&&i._queryResults(e)}).then(this._queryResolveBusyState)):this._queryResults(e)):this.close()}},_queryResults:function(e){var t,i,n=this.search,o=this.results,s=this.opts,r=this,a=n.val();function l(){if(r._positionDropdown(),r.header&&r.headerItems.length){var e=r._findHighlightableChoices(),t=r.headerItems.length+e.length;if(r.headerItems.attr("aria-setsize",t),e.length){var i=e.children("[role='option']");i.attr("aria-setsize",t),i.first().attr("aria-posinset",r.headerItems.length+1)}}}(s.minLength||0)>a.length?this.close():(this.open(null,!0),this.queryCount+=1,i=this.queryCount,this._removeHighlight(),a=null!=(t=this.search.val())&&(!0!==e||s.inputSearch||"rawValue"===s.filterOnOpen||s.minLength>0)?t:"",this.resultsPage=1,s.query({element:s.element,term:a,page:this.resultsPage,context:null,matcher:s.matcher,callback:this._bind(function(t){if(i===this.queryCount&&this._opened())if(s.ojContext._hasMore||gt.removeDropdownMessage(r.dropdown),this.context=t&&void 0!==t.context?t.context:null,(!t||t.results&&0===t.results.length||this._isDataSelected(t)&&this.ojContext.isValid())&&gt.checkFormatter(r.ojContext,s.formatNoMatches,"formatNoMatches")){var a=s.formatNoMatches(r.ojContext,n.val());if("oj-select"===this._classNm||this.header){if(this._showDropDown(),this._preprocessResults(o),l(),gt.addDropdownMessage(r.dropdown,r.ojContext,a),!this._hasSearchBox()){var u=r.dropdown.find(".oj-listbox-filter-message-separator");u.length&&u.css("display","none")}}else this.close();this._updateMatchesCount(a)}else gt.saveLastQueryResult(this,t.results),this._showDropDown(),this._preprocessResults(o),r.opts.populateResults.call(this,o,t.results,{term:n.val(),page:this.resultsPage,context:null,initial:e},this._showPlaceholder()),this._postprocessResults(t,e),l(),this._updateMatchesCount(s.formatMoreMatches(r.ojContext,this._findHighlightableChoices().length))})}))},_preprocessResults:function(e){if(this.opts.list||this.isOjOption){var t=e.children();this._hideResultList(t)}else e.empty()},_normalizeHighlighterLabel:function(e){var t,i;if(e.children("div").children("oj-option").length>0?(t=e.children("div").children("oj-option").find(".oj-listbox-highlighter"),i=e.children("div").children("oj-option")[0]):(t=e.children("div").children(".oj-listbox-highlighter"),i=e.children("div")[0]),t.length>0){for(var n=0;n<t.length;n++)$(t[n].childNodes).unwrap();i.normalize()}},_hideResultList:function(e){for(var t=0;t<e.length;t++){var i,n=$(e[t]);n.is("LI")&&((n.hasClass("oj-listbox-no-results")||n.hasClass("oj-listbox-placeholder"))&&n.remove(),n.css("display","none"),n.hasClass("oj-selected")&&n.removeClass("oj-selected"),this._normalizeHighlighterLabel(n)),(i=n.children("oj-optgroup")?n.children("oj-optgroup").children("ul"):n.children("ul"))&&i.children()&&this._hideResultList(i.children())}},_cancel:function(e){this.close(e)},_focusSearch:function(){gt._focus(this,this.search)},_selectHighlighted:function(e,t){var i=e;if(this.header){var n=this._getActiveContainer().attr("aria-activedescendant");if(this._isHeaderItem(n)){var o=$("#"+n),s=o.find("a, input, select, textarea, button, object").first();return 0===s.length&&(s=o.children()),s.length&&s[0].click(),void this.close(t)}}var r=this._highlight(),a=this.results.find(".oj-hover").closest(".oj-listbox-result").data(this._elemNm);if(a){this._highlight(r);var l=this.getVal();(i=i||{}).trigger=gt.ValueChangeTriggerTypes.OPTION_SELECTED,this._onSelect(a,i,t),this._triggerUpdateEvent(a,i,t),this._triggerValueUpdatedEvent(a,l),t&&"keydown"===t.type&&(this.enterKeyEventHandled=!0)}else i&&i.noFocus&&this.close(t)},_getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},_setPlaceholder:function(){var e=this._getPlaceholder();e&&(this.ojContext.multiple&&"oj-select"===this._classNm?this.selection.find(".oj-select-default").text(e):this.search.attr("placeholder",e))},_initContainerWidth:function(){var e=function(){var e,t,i,n,o;if(null!=(e=this._getAttribute("style")))for(n=0,o=(t=e.split(";")).length;n<o;n++)if(null!==(i=t[n].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&i.length>=1)return i[1];return null}.call(this);null!==e&&this.container.css("width",e)},valHasChanged:function(){var e=this.container;if(gt.duringFetchByKey(e)){gt.setValueChanged(this.ojContext,!0);var t=this.selection;t._saveLoadingIndicator&&!this.ojContext.multiple&&gt.removeLoadingIndicator(t)}},getVal:function(){return this.ojContext.option("value")},setVal:function(e,t,i){this.valHasChanged();var n={doValueChangeCheck:!1};i&&(n._context=i);var o=this.ojContext.multiple;if(!this._skipSetValueOptions)if(gt.isValueForPlaceholder(o,e)&&null!==this._getPlaceholder())this.setValOpts(gt.getFixupValueOptionsForPlaceholder(o));else{var s,r=gt.getLastQueryResult(this);r&&(s=o?gt.findOptions(r,e):gt.findOption(r,e)),s?this.setValOpts(s):"oj-combobox"===this._classNm?this.ojContext._resolveValueOptionsLater=null!=gt.findOption(this.getValOpts(),e):this.ojContext._resolveValueOptionsLater=!0}Array.isArray(e)||this.ojContext._IsCustomElement()?this.ojContext._SetValue(e,t,n):this.ojContext._SetValue([e],t,n)},getValOpts:function(){var e=this.ojContext;return e.multiple?e.option("valueOptions"):e.option("valueOption")},setValOpts:function(e){var t=this.ojContext,i=t.multiple,o=gt.getFixupValueOptionsForPlaceholder(i),s=i?t.options.valueOptions:t.options.valueOption;gt.isValueOptionsForPlaceholder(i,e)&&gt.isValueOptionsForPlaceholder(i,s)&&gt.isPlaceholderSpecified(t.options)?i?t.options.valueOptions=o:t.options.valueOption=o:n.Object.compareValues(e,this.getValOpts())||gt.setValueOptions(t,e),i?this.opts.valueOptions=e:this.opts.valueOption=e},_triggerUpdateEvent:function(e,t,i){},_triggerValueUpdatedEvent:function(e,t){},_showPlaceholder:function(){return!1},_getActiveContainer:function(){return this.search},_getAttribute:function(e){return this.opts.ojContext._IsCustomElement()?this.opts.ojContext.OuterWrapper.getAttribute(e):this.opts.element.attr(e)},_showSearchBox:function(e){var t=!1,i=this.dropdown.find(".oj-listbox-search");if(i&&(this._hasSearchBox()?(this.dropdown.find(".oj-listbox-search-wrapper").removeClass("oj-helper-hidden-accessible"),$(i).removeAttr("aria-hidden"),this.search.val(e),t=!0):(this.dropdown.find(".oj-listbox-search-wrapper").addClass("oj-helper-hidden-accessible"),$(i).attr("aria-hidden","true"))),gt._focus(this,t?this.search:this.selection),t){var n=this;i.find(".oj-listbox-spyglass-box").on("mouseup click",function(e){n.search.focus(),e.preventDefault()})}},_hasSearchBox:function(){if(this._userTyping)return!0;var e,t=this.opts.minimumResultsForSearch;return this.opts.list?e=$("#"+this.opts.list).find("li").length:gt.isDataProvider(this.opts.options)?void 0===this.ojContext._resultCount?(e=t+1,this.ojContext._resolveSearchBoxLater=!0):(e=this.ojContext._resultCount,delete this.ojContext._resolveSearchBoxLater):this.datalist?e=this.ojContext._IsCustomElement()?this.datalist.children().find("oj-option").length:this.datalist[0].length:this.opts.options&&(e=this.opts.options.length),e>t},_isDataSelected:function(e){return!1},_findItem:function(e,t){for(var i=0;i<e.length;i++)if($(e[i]).data(this._elemNm).value===t)return e[i];return null}}),yt=gt.clazz(vt,{_enableInterface:function(){yt.superclass._enableInterface.apply(this,arguments)&&this.search.prop("disabled",!(this._isInterfaceEnabled()||gt.isReadonly(this.ojContext)))},_focus:function(){this._opened()&&this.close()},_destroy:function(){$("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),yt.superclass._destroy.apply(this,arguments)},_clear:function(t){if(this.selection.data(this._elemNm)){t||e.warn("Event should not be null when user modified the value in UI");var i=this.ojContext._IsCustomElement()?"":[];"oj-select"===this._classNm&&this.ojContext._IsRequired()||this.setVal(i,t),this.search.val(""),this.selection.removeData(this._elemNm)}this._setPlaceholder()},_initSelection:function(){if(!gt.applyValueOptions(this,this.opts)){var e=this.datalist?this.datalist:this.opts.element;this.opts.initSelection.call(null,e,this._bind(this._updateSelectedOption))}},_containerKeydownHandler:function(e){if(this._isInterfaceEnabled())if(e.which!==gt.KEY.PAGE_UP&&e.which!==gt.KEY.PAGE_DOWN){switch(e.which){case gt.KEY.UP:case gt.KEY.DOWN:return this._opened()?this._moveHighlight(e.which===gt.KEY.UP?-1:1):this.open(e),void e.preventDefault();case gt.KEY.ENTER:return this._selectHighlighted(null,e),e.preventDefault(),void(this._opened()||(this._userTyping=!1));case gt.KEY.TAB:return this.close(e),void(this._userTyping=!1);case gt.KEY.ESC:return this._opened()&&(this._cancel(e),e.preventDefault()),void(this._userTyping=!1)}this._userTyping=!0}else e.preventDefault()},_containerKeyupHandler:function(e){this._isInterfaceEnabled()&&(this._opened()||this.open(e))},_initContainer:function(){var e=this.container,t=this.opts.rootAttributes,i=t&&t.id?t.id:this._getAttribute("id")||gt.nextUid(),n=e.find("."+this._classNm+"-choice");this.selection=n,n.attr("id",this._classNm+"-choice-"+i);var o=$("label[for='"+this._getAttribute("id")+"']");o.attr("id")||o.attr("id",this._classNm+"-label-"+i),n.find("."+this._classNm+"-input").attr("id",this._classNm+"-input-"+i),this.results.attr("id")||this.results.attr("id","oj-listbox-results-"+i);var s=e.find(".oj-listbox-liveregion");s.length&&s.attr("id","oj-listbox-live-"+i),"oj-select"!==this._classNm&&this.search.attr("aria-owns",this.results.attr("id")),this.search.attr("aria-labelledby",o.attr("id")),this.opts.element.attr("aria-labelledby",o.attr("id")),this.search.attr("id")&&o.attr("for",this.search.attr("id")),this._getAttribute("aria-label")&&this.search.attr("aria-label",this._getAttribute("aria-label")),this._getAttribute("aria-controls")&&this.search.attr("aria-controls",this._getAttribute("aria-controls")),n.on("keydown",this._bind(this._containerKeydownHandler)),n.on("mousedown",this._bind(function(e){if(!("end"===e.target.getAttribute("slot")||$(this._endSlot).find(e.target).length>0)){this.opts.element.prop("disabled")&&gt.killEvent(e),n.removeClass("oj-focus-highlight"),this._opened()?this.close(e):this._isInterfaceEnabled()&&this.open(e);var t=this.search.parent().attr("aria-hidden");t&&"true"===t?this.selection.focus():this.search.focus(),$(e.target).hasClass("oj-combobox-open-icon")&&gt.killEvent(e),this.container.addClass("oj-active")}})),n.on("mouseup",this._bind(function(){this.container.removeClass("oj-active")})),n.on("focus",this._bind(function(e){gt.killEvent(e)})),this.search.on("compositionstart",this._bind(function(){this.ojContext._isComposing=!0})),this.search.on("compositionend",this._bind(function(e){this.ojContext._isComposing=!1,this.ojContext._SetRawValue(this.search.val(),e)})),this.search.on("input",this._bind(function(e){this.ojContext._isComposing||this.ojContext._SetRawValue(this.search.val(),e)})),this.search.on("focus",this._bind(function(){this._previousDisplayValue=this.search.val()})),this.search.on("blur keyup",this._bind(function(e){if("keyup"!==e.type||10===e.keyCode||13===e.keyCode){if(void 0!==this.search.val()&&this.results.find(".oj-hover").length<=0&&("keyup"!==e.type||!this.enterKeyEventHandled))if(this.opts.manageNewEntry){var t=this.search.val(),i=this.opts.manageNewEntry(t),n={trigger:"blur"===e.type?gt.ValueChangeTriggerTypes.BLUR:gt.ValueChangeTriggerTypes.ENTER_PRESSED},o=this.selection.data(this._elemNm),s=this.getVal();!o&&""!==t||o&&o.label!==t||!this.ojContext.isValid()&&t!==this._previousDisplayValue?(this._onSelect(i,n,e),"blur"!==e.type&&(this._triggerUpdateEvent(i,n,e),this._triggerValueUpdatedEvent(i,s))):"keyup"===e.type&&(o&&o.label===t&&(i=o),this._triggerUpdateEvent(i,n,e),this._triggerValueUpdatedEvent(i,s))}else if(null==this.opts.manageNewEntry){var r=this.selection.data(this._elemNm);if(""===this.search.val())"oj-select"!==this._classNm&&this._clear(e);else if(r||""===this.search.val()){if("oj-select"!==this._classNm){var a=this.opts.formatSelection(r);void 0!==a&&this.search.val(a)}}else this._clearSearch()}this.search.removeClass(this._classNm+"-focused"),this.container.removeClass("oj-focus"),this.enterKeyEventHandled=!1}})),this._initContainerWidth(),this.opts.element.hide().attr("aria-hidden",!0),this.container.append(this.opts.element),this._setPlaceholder()},_prepareOpts:function(){var e=yt.superclass._prepareOpts.apply(this,arguments),t=this,i=e.element.get(0).tagName.toLowerCase();if("input"===i&&e.element.attr("list")||"select"===i&&e.element.children().length>0||e.ojContext._IsCustomElement()&&!e.options||e.list){var o=e.list?"li":"option";e.ojContext._IsCustomElement()&&(o="oj-option"),e.initSelection=function(s,r){var a,l=t.getVal();Array.isArray(l)&&!e.ojContext._IsCustomElement()&&(l=l[0]),null!=l&&(a=t._optionToData(s.find(o).filter(function(){var e;return"li"===o?e=this.getAttribute("oj-data-value"):"option"!==o&&"oj-option"!==o||(e=this.value),n.Object.compareValues(e,l)})),"select"===i&&void 0===a&&(l=null)),null==l&&(a=t._optionToData(s.find(o).filter(function(){return"li"===o?!0===this.getAttribute("oj-data-selected"):"option"===o&&this.selected})),"oj-select"===t._classNm&&void 0===a&&e.ojContext._IsCustomElement()&&(a=t._optionToData($(s.find(o)[0])),n.Logger.info("Select identified by "+t.container.attr("id")+" defaults to first option because the value is not set."))),r(a)},e.validate=function(e,i){var s;return null!=i&&(s=t._optionToData(e.find(o).filter(function(){var e;return"li"===o?e=this.getAttribute("oj-data-value"):"option"!==o&&"oj-option"!==o||(e=this.value),n.Object.compareValues(e,i)}))),!!s}}else("options"in e||this.getVal()&&this.getVal().length>0)&&(gt.isDataProvider(e.options)||$.isFunction(e.options)?e.initSelection=function(o,s){var r=function(t,i){for(var o=0,s=t.length;o<s;o++){var a=t[o];if(n.Object.compareValues(i,e.id(a)))return a;if(a.children){var l=r(a.children,i);if(l)return l}}return null},a=t._getValueItem(),l=null;if(a){var u=gt.getLastQueryResult(t);if(u&&(l=r(u,a)),!l){var d=t.currentItem;d&&d.length&&n.Object.compareValues(a,e.id(d[0]))&&(l=d[0],n.Logger.info("Select identified by "+t.container.attr("id")+" defaults to first option due to invalid value."))}l||t.valueChangeTrigger?s(l):e.query({value:[a],callback:$.isFunction(s)?function(i){(!gt.isDataProvider(e.options)||n.Object.compareValues(a,t.getVal())&&!gt.isValueChanged(t.ojContext))&&(i&&i.results&&(l=r(i.results,a)),s(l),gt.setValueChanged(t.ojContext,void 0))}:$.noop})}else{var h=t.ojContext.options.optionsKeys;"select"!==i||t.ojContext._HasPlaceholderSet()||h&&(h.value||h.label)?s(l):gt.fetchFirstBlockFromDataProvider(t.container,e,1).then(function(e){e&&e.length>0&&(s(e[0]),n.Logger.info("Select identified by "+t.container.attr("id")+" defaults to first option because the value is not set."))})}}:(e.initSelection=function(o,s){var r=t._getValueItem(),a="select"===i&&t.ojContext._HasPlaceholderSet()&&!t.ojContext._IsRequired(),l=a?t._getPlaceholder():null,u=null;e.query({matcher:function(t,i,o){var s=n.Object.compareValues(r,e.id(o));return s&&(u=o),null==l&&(l=o),s},callback:$.isFunction(s)?function(){u||"select"!==i||t.ojContext._isOptionDataPending()||(u=l,n.Logger.info("Select identified by "+t.container.attr("id")+" defaults to "+(a?"placeholder":"first option")+" due to invalid value.")),s(u)}:$.noop})},e.validate=function(t,i){var o=i,s=null;return e.query({matcher:function(t,i,r){var a=n.Object.compareValues(o,e.id(r));return a&&(s=r),a},callback:$.noop}),!!s}));return e},_postprocessResults:function(e,t,i){var o,s=-1,r=this;o=this._findHighlightableChoices(),gt.each2(o,function(e,t){var i=r._getValueItem();return!i||!n.Object.compareValues(i,r.id(t.data(r._elemNm)))||(s=e,!1)}),!1!==i&&!0===t&&s>=0&&this._highlight(s)},_onSelect:function(e,t,i){if(this._triggerSelect(e)){var n,o;t&&t.trigger&&(n={optionMetadata:{trigger:t.trigger}}),this.close(i);var s=e;0===this.id(e).length?(o=this.ojContext._IsCustomElement()?gt.getValueForPlaceholder(!1):[],s=gt.getFixupValueOptionsForPlaceholder(!1)):o=this.id(e),"oj-combobox"===this._classNm&&(this._skipSetValueOptions=!0,this.setValOpts(gt.findOptionFromResult(this,o,s))),this.setVal(o,i,n),this._skipSetValueOptions=!1,"blur"!==i.type&&this._focusSearch()}},_clearSearch:function(){this.search.val("")},_getValueItem:function(){var e=null,t=this.getVal();return null!=t&&(e=!this.ojContext._IsCustomElement()&&t.length?t[0]:t),e}}),bt=gt.clazz(yt,{_elemNm:"ojcombobox",_classNm:"oj-combobox",_createContainer:function(){var e=$(document.createElement("div")).attr({class:"oj-combobox oj-component"}).html(["<div class='oj-combobox-choice' tabindex='-1' role='presentation'>","   <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off'","       spellcheck='false' class='oj-combobox-input' role='combobox' aria-expanded='false' aria-autocomplete='list' />","   <abbr class='oj-combobox-clear-entry' role='presentation'></abbr>","   <span class='oj-combobox-divider' role='presentation'></span>","   <a class='oj-combobox-arrow oj-combobox-icon oj-component-icon oj-clickable-icon-nocontext oj-combobox-open-icon'","       role='button' aria-label='expand'></a>","</div>","<div class='oj-listbox-drop' style='display:none' role='presentation'>","   <ul class='oj-listbox-results' role='listbox'>","   </ul>","</div>"].join(""));if(this.ojContext._IsCustomElement()){var t=n.BaseCustomElementBridge.getSlotMap(this.ojContext.OuterWrapper).end;t&&(e.find(".oj-combobox-divider").remove(),e.find(".oj-combobox-arrow").remove(),e.find(".oj-combobox-choice").append(t),this._endSlot=t)}return e},_triggerValueUpdatedEvent:function(e,t){if(this.ojContext._IsCustomElement()){var i=this.id(e);if(null==i&&(i=e.label?e.label:""),this.ojContext.isValid()){var n={},o=this.ojContext.OuterWrapper;n.value=i,n.previousValue=t;var s=new CustomEvent("ojValueUpdated",{detail:n});o.dispatchEvent(s)}}},_enable:function(e){bt.superclass._enable.apply(this,arguments),this._enabled?this.container.find(".oj-combobox-arrow").removeClass("oj-disabled"):this.container.find(".oj-combobox-arrow").addClass("oj-disabled")},close:function(e){this._opened()&&bt.superclass.close.apply(this,arguments)},_opening:function(e,t){bt.superclass._opening.apply(this,arguments),t||this._updateResults(!0)},_containerKeydownHandler:function(e){"end"===e.target.getAttribute("slot")||$(this._endSlot).find(e.target).length>0||gt.KEY.isControl(e)||gt.KEY.isFunctionKey(e)||bt.superclass._containerKeydownHandler.apply(this,arguments)},_updateSelection:function(e){var t,i=[];this.selection.data(this._elemNm,e),null!==e&&0!==e.length?(void 0!==(t=this.opts.formatSelection(e))&&this.search.val()!==t&&this.search.val(t),this.search.removeClass(this._classNm+"-default"),i.push(e)):(this.search.val(""),this._setPlaceholder()),this.currentItem=i},_updateSelectedOption:function(e){if(null!=e)this._updateSelection(e),this.setValOpts(e);else{var t,i=this.getVal();t=i?Array.isArray(i)?i.length?{label:i[0]}:null:{label:i}:null,this._updateSelection(t),!e&&i?this.setValOpts({value:i,label:gt.getLabel({value:i})}):this.setValOpts(e)}}}),Ct=gt.clazz(yt,{_elemNm:"ojselect",_classNm:"oj-select",_userTyping:!1,_createContainer:function(){return $(document.createElement("div")).attr({class:"oj-select oj-component"}).html(["<div class='oj-select-choice' tabindex='0' role='combobox' ","     aria-autocomplete='none' aria-expanded='false'>","  <span class='oj-select-chosen'></span>","  <abbr class='oj-select-search-choice-close' role='presentation'></abbr>","  <a class='oj-select-arrow oj-component-icon oj-clickable-icon-nocontext oj-select-open-icon' role='presentation'>","</a></div>","<div class='oj-listbox-drop' style='display:none' role='dialog'>","  <div class='oj-listbox-search-wrapper'>","  <div class='oj-listbox-search'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off'","           spellcheck='false' class='oj-listbox-input' title='Search field' ","           role='combobox' aria-expanded='false' aria-autocomplete='list' />","    <span class='oj-listbox-spyglass-box'>","      <span class='oj-component-icon oj-clickable-icon-nocontext oj-listbox-search-icon' role='presentation'>","       <b role='presentation'></b></span>","    </span>","  </div>","  </div>","   <ul class='oj-listbox-results' role='listbox'>","   </ul>","</div>","<div role='region' class='oj-helper-hidden-accessible oj-listbox-liveregion' aria-live='polite'></div>"].join(""))},_enable:function(e){Ct.superclass._enable.apply(this,arguments),this._enabled?(this.selection.attr("tabindex","0"),this.container.find(".oj-select-arrow").removeClass("oj-disabled")):(this.selection.attr("tabindex","-1"),this.container.find(".oj-select-arrow").addClass("oj-disabled"))},close:function(e){this._opened()&&(Ct.superclass.close.apply(this,arguments),this.selection.attr("aria-expanded",!1).removeAttr("aria-haspopup").removeAttr("aria-owns"),this.search.attr("aria-expanded",!1).removeAttr("aria-controls"),this._testClear(e)||this._clearSearch(),e instanceof MouseEvent&&e.target!==this.selection&&e.target!==this.search||gt._focus(this,this.selection),this.container.find(".oj-listbox-spyglass-box").off("mouseup click"))},_opening:function(e,t){Ct.superclass._opening.apply(this,arguments),this._showDropDown();var i=gt.getSearchText(e);this._showSearchBox(i),t||(i?this._updateResults():this._updateResults(!0))},_showDropDown:function(){if(this._opened()){var e="true"!==this.selection.attr("aria-expanded");Ct.superclass._showDropDown.apply(this,arguments),e&&(this.selection.attr("aria-expanded",!0).attr("aria-haspopup","dialog").attr("aria-owns",this.results.attr("id")),this.search.attr("aria-expanded",!0).attr("aria-controls",this.results.attr("id")+" "+this.container.find(".oj-listbox-liveregion").attr("id")))}},_initContainer:function(){var e=this.containerId+"_selected";this.text=this.container.find(".oj-select-chosen").attr("id",e),Ct.superclass._initContainer.apply(this,arguments),this.selection.attr({"aria-labelledby":this.search.attr("aria-labelledby"),"aria-describedby":e});var t=this._getAttribute("aria-label");t&&this.selection.attr("aria-label",t),this.search.on("keydown",this._bind(this._containerKeydownHandler)),this.search.on("keyup-change input",this._bind(this._containerKeyupHandler)),this.search.attr("title",this.ojContext.getTranslatedString("searchField"));var i=this;this.selection.on("blur",function(e){i._testClear(e)})},_initSelection:function(){this._isPlaceholderOptionSelected()?(this._updateSelection(null),this.close(),this._setPlaceholder()):Ct.superclass._initSelection.apply(this,arguments)},_updateSelectedOption:function(e){if(null!=e){var t,i=this.getVal();Array.isArray(i)&&!this.ojContext._IsCustomElement()&&(i=i[0]),void 0===(t=this.opts.id(e))&&(t=null),n.Object.compareValues(i,t)||this.ojContext._setInitialSelectedValue(t),this.setValOpts(e),this._updateSelection(e),this.close()}else this.setValOpts(null)},_updateSelection:function(e){this.selection.data(this._elemNm,e),null!==e&&this.text.text("string"==typeof e?e:gt.getLabel(e)),e&&""!==e.id&&this.text.removeClass(this._classNm+"-default")},_getActiveContainer:function(){return this.search.attr("aria-expanded")&&this._hasSearchBox()?this.search:this.selection},_isPlaceholderOptionSelected:function(){if(null===this._getPlaceholder())return!1;var e=this.getVal();return e=Array.isArray(e)?e[0]:e,gt.isValueForPlaceholder(!1,e)},_getPlaceholder:function(){return this.opts.placeholder},_showPlaceholder:function(){return!0},_setPlaceholder:function(){var e=this._getPlaceholder();this._isPlaceholderOptionSelected()&&void 0!==e&&this.text.text(e).addClass(this._classNm+"-default")},setVal:function(e,t,i){Ct.superclass.setVal.call(this,e,t,i),this.selection.data("selectVal",e)},_containerKeydownHandler:function(e){if(!(gt.KEY.isControl(e)&&e.which!==gt.KEY.SHIFT||e.which===gt.KEY.SHIFT||gt.KEY.isFunctionKey(e))){switch(e.which){case gt.KEY.TAB:return this.close(e),this.selection.focus(),void this._testClear(e);case gt.KEY.ENTER:if(e.target===this.selection[0]&&!this._opened())return this.open(e),void e.preventDefault()}if(Ct.superclass._containerKeydownHandler.apply(this,arguments),this._userTyping&&(this.open(e),this._opened())){var t=this.dropdown.find(".oj-listbox-search");if("true"===$(t).attr("aria-hidden")){var i=gt.getSearchText(e);i&&(this._showSearchBox(i),this._updateResults())}}}},_testClear:function(e){return""===this.text.text()&&(!(this.datalist&&this.selection.data(this._elemNm)&&this.selection.data(this._elemNm).value||!gt.isValueForPlaceholder(!1,this.ojContext.options.value))&&(this._clear(e),!0))}}),St=gt.clazz(vt,{_prepareOpts:function(){var e=St.superclass._prepareOpts.apply(this,arguments),t=this,i=e.element.get(0).tagName.toLowerCase();if("input"===i&&e.element.attr("list")||"select"===i&&e.element.children().length>0||e.ojContext._IsCustomElement()&&!e.options||e.list){var o=e.list?"li":"option";e.ojContext._IsCustomElement()&&(o="oj-option"),e.initSelection=function(e,s){var r,a=[];if(t.getVal())for(var l=t.getVal(),u=0;u<l.length;u++){var d=l[u];(r=e.find(o).filter(function(){var e;return"li"===o?e=this.getAttribute("oj-data-value"):"option"!==o&&"oj-option"!==o||(e=this.value),n.Object.compareValues(e,d)}))&&r.length?a.push(t._optionToData(r)):"ojcombobox"===t._elemNm&&a.push({value:d,label:d})}else"select"!==i&&(r=e.find(o).filter(function(){return"option"===o?this.selected:"li"===o?!0===this.getAttribute("oj-data-selected"):"oj-option"===o&&!0===this.getAttribute("selected")}),gt.each2(r,function(e,i){a.push(t._optionToData(i))}));s(a)}}else"options"in e&&(gt.isDataProvider(e.options)||$.isFunction(e.options)?e.initSelection=function(i,o){var s=function(t,i){for(var n=[],o=0,r=t.length;o<r;o++){var a=t[o];if(i.indexOf(e.id(a))>=0&&n.push(a),a.children){var l=s(a.children,i);l&&l.length&&$.merge(n,l)}}return n},r=t.getVal(),a=[],l=gt.getLastQueryResult(t);l&&(a=s(l,r));var u=function(){for(var i=[],s=0;s<r.length;s++){for(var l=r[s],u=!1,d=0;d<a.length;d++){var h=a[d];if(n.Object.compareValues(l,e.id(h))){i.push(h),a.splice(d,1),u=!0;break}}if(!u){var c=t.currentItem;if(c&&c.length)for(var p=0;p<c.length;p++)if(n.Object.compareValues(l,e.id(c[p]))){i.push(c[p]),u=!0;break}u||"ojcombobox"!==t._elemNm||i.push({value:l,label:l})}}o(i)};t.valueChangeTrigger?u():e.query({value:r,callback:function(i){if(i&&i.results){var o=s(i.results,r);if(o&&o.length){var l=o;if(gt.isDataProvider(e.options)){l=[];var d=t.getVal();if(n.Object.compareValues(r,d)&&!gt.isValueChanged(t.ojContext))l=o;else{var h,c,p=t.getValOpts();d.forEach(function(e){for(c=!1,h=0;h<p.length;h++)if(n.Object.compareValues(p[h].value,e)){c=!0,l.push(p[h]);break}if(!c)for(h=0;h<o.length;h++)if(n.Object.compareValues(o[h].value,e)){l.push({value:o[h].value,label:o[h].label});break}}),r=d,gt.setValueOptions(t.ojContext,l)}}$.merge(a,l)}}gt.setValueChanged(t.ojContext,void 0),u()}})}:e.initSelection=function(i,o){var s=t.getVal();if(s&&0!==s.length){var r=[];e.query({matcher:function(t,i,o){var a=$.grep(s,function(t){return n.Object.compareValues(t,e.id(o))}).length;return a&&r.push(o),a},callback:$.isFunction(o)?function(){for(var i=[],a=0;a<s.length;a++){for(var l=s[a],u=!1,d=0;d<r.length;d++){var h=r[d];if(n.Object.compareValues(l,e.id(h))){i.push(h),r.splice(d,1),u=!0;break}}u||"ojcombobox"!==t._elemNm||i.push({value:l,label:l})}o(i)}:$.noop})}});return e},_selectChoice:function(e){var t=this.container.find("."+this._classNm+"-selected-choice.oj-focus");(!t.length||e&&e[0]!==t[0])&&(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("oj-focus"),e&&e.length&&("ojcombobox"===this._elemNm&&this.close(),e.addClass("oj-focus"),this.container.find("."+this._classNm+"-description").text(e.attr("valueText")+". Press back space to delete.").attr("aria-live","assertive"),this.opts.element.trigger("choice-selected",e)))},_destroy:function(){$("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),St.superclass._destroy.apply(this,arguments)},_initContainer:function(){var e,t="."+this._classNm+"-choices",i=gt.nextUid();this.searchContainer=this.container.find("."+this._classNm+"-search-field");var n=this.container.find(t);this.selection=n;var o=this;this.selection.on("click","."+this._classNm+"-selected-choice:not(."+this._classNm+"-locked)",function(){"ojcombobox"===this._elemNm&&o.search[0].focus(),o._selectChoice($(this))}),(e=$("label[for='"+this._getAttribute("id")+"']")).attr("id")||e.attr("id",this._classNm+"-label-"+i),this._contentElement="ojcombobox"===this._elemNm?this.search:this.selection,n.find("."+this._classNm+"-input").attr("id",this._classNm+"-input-"+i),this.results.attr("id")||this.results.attr("id","oj-listbox-results-"+i),this._contentElement.attr("aria-owns",this.results.attr("id")),this._contentElement.attr("aria-labelledby",e.attr("id")),this.opts.element.attr("aria-labelledby",e.attr("id")),this.search.attr("id")&&e.attr("for",this.search.attr("id")),this._getAttribute("aria-label")&&this._contentElement.attr("aria-label",this._getAttribute("aria-label")),this._getAttribute("aria-controls")&&this._contentElement.attr("aria-controls",this._getAttribute("aria-controls")),this.elementTabIndex&&this._contentElement.attr("tabindex",this.elementTabIndex),this.keydowns=0,"ojselect"===this._elemNm&&(this.selection.on("keydown",this._bind(this._containerKeydownHandler)),this.selection.on("keyup",this._bind(function(){this.keydowns=0}))),this.search.on("keydown",this._bind(this._containerKeydownHandler)),this.search.on("keyup",this._bind(function(){this.keydowns=0})),this.search.on("compositionstart",this._bind(function(){this.ojContext._isComposing=!0})),this.search.on("compositionend",this._bind(function(e){this.ojContext._isComposing=!1,this.ojContext._SetRawValue(this.search.val(),e)})),this.search.on("input",this._bind(function(e){this.ojContext._isComposing||this.ojContext._SetRawValue(this.search.val(),e)})),this.search.on("blur keyup",this._bind(function(e){if("keyup"!==e.type||10===e.keyCode||13===e.keyCode){if(this.opts.manageNewEntry&&this.search.val()&&this.results.find(".oj-hover").length<=0){var t=this.opts.manageNewEntry(this.search.val()),i={trigger:"blur"===e.type?gt.ValueChangeTriggerTypes.BLUR:gt.ValueChangeTriggerTypes.ENTER_PRESSED};this._onSelect(t,i,e)}this.search.removeClass(this._classNm+"-focused"),this.container.removeClass("oj-focus"),this._selectChoice(null),!this._opened()&&"oj-select"!==this._classNm&&this.ojContext.isValid()&&this._clearSearch(),e.stopImmediatePropagation()}})),this.container.on("click touchstart",t,this._bind(function(e){this._isInterfaceEnabled()&&($(e.target).closest("."+this._classNm+"-selected-choice").length>0||(this._selectChoice(null),this._opened()?this.close(e):(this.open(e),("ojcombobox"===this._elemNm||this._hasSearchBox())&&this._focusSearch()),e.preventDefault()))})),this._initContainerWidth(),this.opts.element.hide().attr("aria-hidden",!0),this.container.append(this.opts.element),this._clearSearch()},_containerKeydownHandler:function(e){if(this._isInterfaceEnabled()){this.keydowns+=1;var t=this.selection.find("."+this._classNm+"-selected-choice.oj-focus"),i=t.prev("."+this._classNm+"-selected-choice:not(."+this._classNm+"-locked)"),n=t.next("."+this._classNm+"-selected-choice:not(."+this._classNm+"-locked)"),o="ojselect"!==this._elemNm||this._userTyping?gt.getCursorInfo(this.search):gt.getCursorInfo(this.selection);if(t.length&&(e.which===gt.KEY.LEFT||e.which===gt.KEY.RIGHT||e.which===gt.KEY.BACKSPACE||e.which===gt.KEY.DELETE||e.which===gt.KEY.ENTER)){var s=t;return e.which===gt.KEY.LEFT&&i.length?s=i:e.which===gt.KEY.RIGHT?s=n.length?n:null:e.which===gt.KEY.BACKSPACE?(this._unselect(t.first(),e),this._resetSearchWidth(),s=i.length?i:n):e.which===gt.KEY.DELETE?(this._unselect(t.first(),e),this._resetSearchWidth(),s=n.length?n:null):e.which===gt.KEY.ENTER&&(s=null),this._selectChoice(s),e.preventDefault(),void(s&&s.length||this.open(e))}if((e.which===gt.KEY.BACKSPACE&&1===this.keydowns||e.which===gt.KEY.LEFT)&&0===o.offset&&!o.length)return this._selectChoice(this.selection.find("."+this._classNm+"-selected-choice:not(."+this._classNm+"-locked)").last()),void e.preventDefault();if(this._selectChoice(null),this._opened()){switch(e.which){case gt.KEY.UP:case gt.KEY.DOWN:return this._moveHighlight(e.which===gt.KEY.UP?-1:1),void e.preventDefault();case gt.KEY.ENTER:return this._selectHighlighted(null,e),void e.preventDefault();case gt.KEY.TAB:return void this.close(e);case gt.KEY.ESC:return this._cancel(e),void e.preventDefault()}!1!==this._userTyping||gt.KEY.isControl(e)||gt.KEY.isFunctionKey(e)||(this._userTyping=!0,this.close())}if(!(e.which===gt.KEY.TAB||gt.KEY.isControl(e)||gt.KEY.isFunctionKey(e)||e.which===gt.KEY.ESC||e.which===gt.KEY.ENTER&&this.search.val()&&"ojcombobox"===this._elemNm)){switch(e.which){case gt.KEY.UP:case gt.KEY.DOWN:return this.open(e),void e.preventDefault();case gt.KEY.PAGE_UP:case gt.KEY.PAGE_DOWN:case gt.KEY.ENTER:return void e.preventDefault()}this._userTyping=!0}}},_enableInterface:function(){St.superclass._enableInterface.apply(this,arguments)&&this.search.prop("disabled",!(this._isInterfaceEnabled()||gt.isReadonly(this.ojContext)))},_initSelection:function(e){var t=this.getVal();if(null!==t&&0!==t.length||"oj-select"!==this._classNm&&""!==this.opts.element.text().trim()||(this._updateSelection(e||[]),this.close(),this._clearSearch()),this.datalist||null!==this.getVal()&&this.getVal().length){var i,n=this;i=this.datalist?this.datalist:this.opts.element,gt.applyValueOptions(this,this.opts)||this.opts.initSelection.call(null,i,function(e){null!=e&&0!==e.length&&(n._updateSelection(e),n.close(),n._clearSearch())})}},close:function(e){this._opened()&&St.superclass.close.apply(this,arguments)},_focus:function(){this.close(),this.search.focus()},_updateSelection:function(e){var t=[],i=[],n=this;$(e).each(function(){t.indexOf(n.id(this))<0&&(t.push(n.id(this)),i.push(this))}),"init"===this.opts.fetchType&&i&&i.length>0&&("oj-combobox"===this._classNm||"oj-select"===this._classNm)&&this.setValOpts(i),this.selection.find("."+this._classNm+"-selected-choice").remove(),this.selection.find(".oj-select-default").remove(),$(i).each(function(){n._addSelectedChoice(this)}),this.currentItem=i,this.currentValue=t,n._postprocessResults()},_onSelect:function(e,t,i){if(this._triggerSelect(e)){var n;t&&t.trigger&&(n={optionMetadata:{trigger:t.trigger}});var o=this.id(e),s=this.getVal()?this.getVal().slice(0):[],r=this.getValOpts()?this.getValOpts().slice(0):[],a=r.slice(0),l="oj-combobox"===this._classNm||"oj-select"===this._classNm;this.ojContext.isValid()||(s=this.currentValue.slice(0));var u=this;$(e).each(function(t){s.indexOf(o)<0&&""!==o&&(s.push(o),l&&(Array.isArray(e)?a.push(gt.findOptionFromResult(u,o,e[t])):a.push(gt.findOptionFromResult(u,o,e))))}),l&&(this._skipSetValueOptions=!0,this.setValOpts(a)),this.setVal(s,i,n),l&&!this.ojContext.isValid()&&this.setValOpts(r),this._skipSetValueOptions=!1,!this.select&&this.opts.closeOnSelect||this._postprocessResults(e,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect&&(this.close(i),this.ojContext.isValid()&&this._resetSearchWidth()),t&&t.noFocus||"ojcombobox"!==this._elemNm||this._focusSearch()}},_cancel:function(e){this.close(e),"ojcombobox"===this._elemNm&&this._focusSearch()},_addSelectedChoice:function(e){var t,i=!e.locked,n=$("<li class='"+this._classNm+"-selected-choice'>    <div></div>    <a href='#' onclick='return false;' role='button' aria-label='remove' class='"+this._classNm+"-clear-entry       oj-component-icon oj-clickable-icon-nocontext "+this._classNm+"-clear-entry-icon' tabindex='-1'>    </a></li>"),o=$("<li class='"+this._classNm+"-selected-choice "+this._classNm+"-locked'><div></div></li>"),s=i?n:o;if(void 0!==(t=this.opts.formatSelection(e))){var r=this._classNm+"-selected-choice-label-"+gt.nextUid();s.find("div").addClass(this._classNm+"-selected-choice-label").text(t),s.find("."+this._classNm+"-clear-entry").attr("aria-label",t+" remove"),s.attr("valueText",t);var a=this._contentElement.attr("aria-describedBy");"oj-combobox"===this._classNm&&this.selection.attr("aria-describedBy",(a?a+" ":"")+r)}i&&s.find("."+this._classNm+"-clear-entry").on("mousedown",gt.killEvent).on("click dblclick",this._bind(function(e){this._isInterfaceEnabled()&&($(e.target).closest("."+this._classNm+"-selected-choice").fadeOut("fast",this._bind(function(){this._unselect($(e.target),e),this.selection.find("."+this._classNm+"-selected-choice.oj-focus").removeClass("oj-focus"),this.close(e),"ojcombobox"===this._elemNm&&this._focusSearch()})).dequeue(),gt.killEvent(e))})),s.data(this._elemNm,e),"ojcombobox"===this._elemNm?s.insertBefore(this.searchContainer):this.selection.append(s)},_syncValueOptions:function(e,t,i){var o=[];if(t&&i){for(var s=0;s<t.length;s++)for(var r=0;r<i.length;r++){var a=i[r];n.Object.compareValues(a.value,t[s])&&o.push(a)}gt.setValueOptions(e,o)}},_unselect:function(e,t){var i=this.getVal()?this.getVal().slice(0):[],n=e.closest("."+this._classNm+"-selected-choice");if(0===n.length)throw new Error("Invalid argument: "+n+". Must be ."+this._classNm+"-selected-choice");var o=n.data(this._elemNm);if(o){this.ojContext.isValid()||(i=this.currentValue);for(var s=i.indexOf(this.id(o));s>=0;)i.splice(s,1),this._syncValueOptions(this.ojContext,i,this.getValOpts()),this._skipSetValueOptions=!0,this.setVal(i,t),this._skipSetValueOptions=!1,this.select&&this._postprocessResults(),s=i.indexOf(this.id(o));n.remove()}},_postprocessResults:function(e,t,i){if(this.ojContext.isValid()){var n=this.getVal(),o=this.results.find(".oj-listbox-result"),s=this.results.find(".oj-listbox-result-with-children"),r=this;gt.each2(o,function(e,t){var i=r.id(t.data(r._elemNm));n&&n.indexOf(i)>=0&&(t.addClass("oj-selected"),t.find(".oj-listbox-result-selectable").addClass("oj-selected"))}),gt.each2(s,function(e,t){t.is(".oj-listbox-result-selectable")||0!==t.find(".oj-listbox-result-selectable:not(.oj-selected)").length||t.addClass("oj-selected")}),!o.filter(".oj-listbox-result:not(.oj-selected)").length>0&&"oj-select"!==this._classNm&&this.close()}},_isDataSelected:function(e){var t=this.getVal();if(!t||0===t.length)return!1;for(var i=e.results,n=0;n<i.length;n++)if(-1===t.indexOf(this.id(i[n])))return!1;return!0},_resetSearchWidth:function(){},setVal:function(e,t,i){var n=[],o=e;this.valHasChanged(),"string"==typeof e&&(o=gt.splitVal(e,this.opts.separator));for(var s=0;s<o.length;s++)n.indexOf(o[s])<0&&n.push(o[s]);var r={doValueChangeCheck:!1};if(i&&(r._context=i),!this._skipSetValueOptions){var a,l=gt.getLastQueryResult(this);l&&(a=gt.findOptions(l,o)),a&&a.length&&gt.setValueOptions(this.ojContext,a)}this.ojContext._SetValue(n,t,r),(this.ojContext.isValid()||0===n.length)&&(this.currentValue=n),this.search.attr("aria-activedescendant",this.opts.element.attr("id"))}}),Et=gt.clazz(St,{_elemNm:"ojcombobox",_classNm:"oj-combobox",_createContainer:function(){return $(document.createElement("div")).attr({class:"oj-combobox oj-combobox-multi oj-component"}).html(["<ul class='oj-combobox-choices'>","  <li class='oj-combobox-search-field'><span style='display:none'>&nbsp;</span>","    <input type='text' role='combobox' aria-expanded='false' aria-autocomplete='list' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='oj-combobox-input'>","  </li>","</ul>","<div class='oj-combobox-description oj-helper-hidden-accessible'/>","<div class='oj-listbox-drop oj-listbox-drop-multi' style='display:none'>","   <ul class='oj-listbox-results' role='listbox'>","   </ul>","</div>"].join(""))},_opening:function(e,t){this._resizeSearch(),Et.superclass._opening.apply(this,arguments),this._focusSearch(),t||this._updateResults(!0),this.search.focus()},_clearSearch:function(){var e=this._getPlaceholder(),t=this._getMaxSearchWidth();null!=e&&gt.isValueForPlaceholder(!0,this.getVal())&&gt.isValueOptionsForPlaceholder(!0,this.getValOpts())?(this.search.attr("placeholder",e),this.search.val("").width(t>0?t:this.container.css("width")),this.searchContainer.width("100%")):(this.search.attr("placeholder",""),this.search.val("").width(10),this.searchContainer.width("auto"))},_resetSearchWidth:function(){this.search.width(10)},_getMaxSearchWidth:function(){return this.selection.width()-gt.getSideBorderPadding(this.search)},_textWidth:function(e){var t=document.createElement("span"),i=document.createTextNode(e);t.style.display="none",t.appendChild(i),$("body").append(t);var n=$("body").find("span:last").width();return $("body").find("span:last").remove(),n},_resizeSearch:function(){var e,t,i,n,o=gt.getSideBorderPadding(this.search);e=this._textWidth(this.search.val())+10,t=this.search.offset().left,(n=(i=this.selection.width())-(t-this.selection.offset().left)-o)<e&&(n=i-o),n<40&&(n=i-o),n<=0&&(n=e),this.search.width(Math.floor(n))}}),Tt=gt.clazz(St,{_elemNm:"ojselect",_classNm:"oj-select",_userTyping:!1,_createContainer:function(){return $(document.createElement("div")).attr({class:"oj-select oj-select-multi oj-component"}).html(["<ul class='oj-select-choices' tabindex='0' role='combobox' ","  aria-autocomplete='none' aria-expanded='false'>","</ul>","<div class='oj-listbox-drop' style='display:none' role='dialog'>","  <div class='oj-listbox-search-wrapper'>","  <div class='oj-listbox-search'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off'","           spellcheck='false' class='oj-listbox-input' title='Search field' ","           role='combobox' aria-expanded='false' aria-autocomplete='list' />","    <span class='oj-listbox-spyglass-box'>","      <span class='oj-component-icon oj-clickable-icon-nocontext oj-listbox-search-icon' role='presentation'>","       <b role='presentation'></b></span>","    </span>","  </div>","  </div>","   <ul class='oj-listbox-results' role='listbox'>","   </ul>","</div>","<div role='region' class='oj-helper-hidden-accessible oj-listbox-liveregion' aria-live='polite'></div>"].join(""))},_containerKeydownHandler:function(e){Tt.superclass._containerKeydownHandler.apply(this,arguments),this._userTyping&&!this._opened()&&this.open(e)},_opening:function(e,t){Tt.superclass._opening.apply(this,arguments),this._showDropDown();var i=gt.getSearchText(e);this._showSearchBox(i),t||(i?this._updateResults():this._updateResults(!0))},close:function(e){!0===this._userTyping&&(this._userTyping=!1),Tt.superclass.close.apply(this,arguments),!e||e instanceof MouseEvent&&e.target!==this.selection&&e.target!==this.search||gt._focus(this,this.selection)},_clearSearch:function(){var e=this._getPlaceholder();if(null!=e&&gt.isValueForPlaceholder(!0,this.getVal())&&gt.isValueOptionsForPlaceholder(!0,this.getValOpts())){var t=$("<li></li>");t.addClass("oj-select-default"),t.text(e),this.selection.append(t)}}}),Dt=gt.clazz(bt,{_elemNm:"ojinputsearch",_classNm:"oj-inputsearch",_createContainer:function(){var e=$(document.createElement("div")).attr({class:"oj-inputsearch oj-component"}).html(["<div class='oj-inputsearch-choice' tabindex='-1' role='presentation'>","   <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off'","       spellcheck='false' class='oj-inputsearch-input' role='combobox' aria-expanded='false' aria-autocomplete='list' />","   <a class='oj-inputsearch-search-button oj-inputsearch-search-icon oj-component-icon oj-clickable-icon-nocontext'","       role='button' aria-label='search'></a>","</div>","<div class='oj-listbox-drop' style='display:none' role='presentation'>","   <ul class='oj-listbox-results' role='listbox'>","   </ul>","</div>","<div role='region' class='oj-helper-hidden-accessible oj-listbox-liveregion' aria-live='polite'></div>"].join("")),t=e.find(".oj-inputsearch-search-button");return this._attachSearchIconClickHandler(t),e},_attachSearchIconClickHandler:function(e){var t=this;e.on("click",function(e){if(t._isInterfaceEnabled()){if(t.opts.manageNewEntry){var i=t.search.val(),n=t.opts.manageNewEntry(i),o={trigger:gt.ValueChangeTriggerTypes.SEARCH_ICON_CLICKED},s=t.selection.data(t._elemNm);!s&&""!==i||s&&s.label!==i||!t.ojContext.isValid()&&i!==t._previousDisplayValue?(t._onSelect(n,o,e),t._triggerUpdateEvent(n,o,e)):(s&&s.label===i&&(n=s),t._triggerUpdateEvent(n,o,e))}return!1}}).on("mousedown",function(e){return e.stopPropagation(),!1})},_enable:function(e){Dt.superclass._enable.apply(this,arguments),this._enabled?this.container.find(".oj-inputsearch-search-button").removeClass("oj-disabled"):this.container.find(".oj-inputsearch-search-button").addClass("oj-disabled")},_triggerUpdateEvent:function(e,t,i){var n;t&&(n=t.trigger);var o={_context:{optionMetadata:{trigger:n}}},s=this.id(e);if(s&&0!==s.length||(s=e.label?e.label:[]),void 0!==this.ojContext._AsyncValidate(s,i,o)&&this.ojContext.isValid()){"string"==typeof s&&(s=[s]);var r={value:s,optionMetadata:{trigger:n}};this.ojContext._trigger("update",i,r)}},_prepareOpts:function(e){var t=Dt.superclass._prepareOpts.apply(this,arguments);return t.highlightTermInOptions=function(){return!0},t}});n.__registerWidget("oj.ojCombobox",$.oj.editableValue,{defaultElement:"<input>",widgetEventPrefix:"oj",options:{asyncValidators:[],converter:null,filterOnOpen:"none",placeholder:null,options:null,optionsKeys:{},pickerAttributes:null,optionRenderer:null,minLength:0,rawValue:null,required:!1,readOnly:!1,validators:[],valueOption:null,valueOptions:null,valueUpdated:null},widget:function(){return this.combobox.container},_ComponentCreate:function(){this._super(),gt.wrapDataProviderIfNeeded(this,null),this._setup()},_AfterCreate:function(){if(this._super(),this._IsCustomElement()){var e=this.OuterWrapper.id;e&&n.EditableValueUtils.setSubIdForCustomLabelFor(this._GetContentElement()[0],e)}},_InitOptions:function(e,t){if(this._super(e,t),n.EditableValueUtils.initializeOptionsFromDom([{attribute:"disabled",validateOption:!0},{attribute:"placeholder"},{attribute:"required",coerceDomValue:!0,validateOption:!0},{attribute:"title"}],t,this),this.multiple=this._IsCustomElement()?"OJ-COMBOBOX-MANY"===this.OuterWrapper.nodeName:this.options.multiple,void 0===this.options.value)this._IsCustomElement()||(this.options.value=void 0!==this.element.attr("value")?gt.splitVal(this.element.val(),","):null);else{var i=this.options.value;Array.isArray(i)?this._IsCustomElement()||(i=i.slice(0)):"string"==typeof i&&(!0===this.multiple?i=gt.splitVal(i,","):this._IsCustomElement()||(i=[i])),this.options.value=i}},_IsRequired:function(){return this.options.required},_AfterSetOptionRequired:n.EditableValueUtils._AfterSetOptionRequired,_AfterSetOptionValidators:n.EditableValueUtils._AfterSetOptionValidators,_AfterSetOptionAsyncValidators:n.EditableValueUtils._AfterSetOptionAsyncValidators,_AfterSetOptionConverter:n.EditableValueUtils._AfterSetOptionConverter,_ResetConverter:n.EditableValueUtils._ResetConverter,_GetConverter:n.EditableValueUtils._GetConverter,_GetNormalizedValidatorsFromOption:n.EditableValueUtils._GetNormalizedValidatorsFromOption,_GetNormalizedAsyncValidatorsFromOption:n.EditableValueUtils._GetNormalizedAsyncValidatorsFromOption,_setup:function(){var e={},t=this.multiple;e.element=this.element,e.ojContext=this,gt.isValueForPlaceholder(t,this.options.value)&&(t?this.options.valueOptions=gt.getValueOptionsForPlaceholder(this,this.options.valueOptions):this.options.valueOption=gt.getValueOptionsForPlaceholder(this,this.options.valueOption)),e=$.extend(this.options,e),this.combobox=t?new Et:new bt,this.combobox._init(e),this._refreshRequired(this.options.required),this._resolveValueOptionsLater=gt.mergeValueAndValueOptions(this)},_refreshRequired:n.EditableValueUtils._refreshRequired,_AriaRequiredUnsupported:function(){return!1},_destroy:function(){this.combobox._destroy(),this._super()},refresh:function(){this._super(),this.combobox._destroy(),this._setup(),this._SetRootAttributes()},_setOption:function(e,t,i){var n=t,o=this.multiple;if("value"===e&&(Array.isArray(n)?this._IsCustomElement()||(n=n.slice(0)):"string"==typeof n&&(!0===o?n=gt.splitVal(n,","):this._IsCustomElement()||(n=[n])),i&&i._context&&i._context.optionMetadata?this.combobox.valueChangeTrigger=i._context.optionMetadata.trigger:this.combobox.valueChangeTrigger=null,"string"==typeof this.options.placeholder&&(null==n||n&&0===n.length||this._IsCustomElement()&&gt.isValueForPlaceholder(o,n))))return gt.setValueOptions(this,gt.getFixupValueOptionsForPlaceholder(o)),void this._super(e,n,i);"options"===e?(gt.removeDataProviderEventListeners(this),gt.clearDataProviderWrapper(this)):"valueOption"===e&&!0!==o?(n=gt.getValueOptionsForPlaceholder(this,n),this.combobox.opts.valueOption=n):"valueOptions"===e&&!0===o&&(n=gt.getValueOptionsForPlaceholder(this,n),this.combobox.opts.valueOptions=n),this._super(e,n,i),"valueOption"===e&&!0!==o?gt.syncValueWithValueOption(this,n,this.options.value,!1):"valueOptions"===e&&!0===o?gt.syncValueWithValueOptions(this,n,this.options.value,!1):"value"===e?gt.updateValueOptions(this.combobox):"options"===e?(gt.isDataProvider(n)&&(gt.wrapDataProviderIfNeeded(this,this.combobox?this.combobox.opts:null),gt.addDataProviderEventListeners(this)),this.combobox.opts.options=n,this.combobox.opts=this.combobox._prepareOpts(this.combobox.opts)):"disabled"===e?n?this.combobox._disable():this.combobox._enable():"readOnly"===e&&this.combobox.applyReadonlyState()},_AfterSetOption:function(e,t,i){switch(this._superApply(arguments),e){case"required":this._AfterSetOptionRequired(e);break;case"validators":this._AfterSetOptionValidators(e);break;case"converter":this._AfterSetOptionConverter(e);break;case"asyncValidators":this._AfterSetOptionAsyncValidators(e)}},_NotifyDetached:function(){this._superApply(arguments),this.combobox.close()},_NotifyHidden:function(){this._superApply(arguments),this.combobox.close()},_VerifyConnectedForSetup:function(){return!0},_SetDisplayValue:function(e){gt.applyValueOptions(this.combobox,this.options)?this.multiple&&this.combobox._clearSearch():this.combobox._initSelection(),this._resolveValueOptionsLater=!1},_SetPlaceholder:function(e){this.combobox&&(this.combobox.opts.placeholder=e,this.combobox._setPlaceholder&&this.combobox._setPlaceholder())},_parseValue:function(e){var t,i=e;if("string"==typeof i&&(!0===this.multiple?i=gt.splitVal(i,","):this._IsCustomElement()||(i=[i])),Array.isArray(i)){t=[];for(var n=0;n<i.length;n++){var o=this._super(i[n]);t.push(o)}}else t=this._super(i);return t},_GetMessagingLauncherElement:function(){return this.combobox.search},_NotifyContextMenuGesture:function(e,t,i){var n=this._GetMessagingLauncherElement();this._OpenContextMenu(t,i,{launcher:n})},_GetContentElement:function(){return this.combobox.search},_GetDefaultStyleClass:function(){return"oj-combobox"},validate:function(){var e,t=this._getDisplayValueForSetValue();return e=this._SetValue(t,null,this._VALIDATE_METHOD_OPTIONS),this._IsCustomElement()&&(e=e instanceof Promise?e.then(function(e){return Promise.resolve(e?"valid":"invalid")}):Promise.resolve(e?"valid":"invalid")),e},_CanSetValue:function(){return!!this.forceCanSetValue||this._super()},_getDisplayValueForSetValue:function(){var e=this.combobox.search.val(),t=null;if(!0!==this.multiple)t=this._IsCustomElement()?e:null==e||""===e?[]:[e];else{var i=[];this.isValid()&&(i=this.combobox.getVal()),null==e||""===e?t=i:(i.push(e),t=i)}return t},_getDropdown:function(){if(this.combobox&&this.combobox._opened())for(var e=$(".oj-listbox-drop"),t=0;t<e.length;t++)if("oj-listbox-drop"===$(e[t]).attr("id")&&$(e[t]).attr("data-oj-containerid")===this.combobox.containerId)return $(e[t]);return null},_findItem:function(e,t){for(var i=0;i<e.length;i++)if($(e[i]).data("ojcombobox").value===t)return e[i];return null},getNodeBySubId:function(e){var t,i=null;if(null==e)return this.combobox.container?this.combobox.container[0]:null;if(!(i=this._super(e))){"oj-combobox-drop"===(t=e.subId)&&(t="oj-listbox-drop"),"oj-combobox-results"===t&&(t="oj-listbox-results"),"oj-combobox-selection"===t&&(t="oj-combobox-selected-choice");var n=this._getDropdown();switch(t){case"oj-combobox-input":case"oj-combobox-arrow":i=this.widget().find("."+t)[0];break;case"oj-listitem":if(n){var o=n.find(".oj-listbox-result");i=this._findItem(o,e.value)}break;case"oj-combobox-remove":var s=this.widget().find(".oj-combobox-selected-choice"),r=this._findItem(s,e.value);i=r?$(r).find(".oj-combobox-clear-entry-icon")[0]:null;break;case"oj-listbox-drop":n&&(i=n[0]);break;case"oj-listbox-results":n&&(i=n.find("."+t)[0]);break;case"oj-combobox-selected-choice":i=this.widget().find("."+t).toArray()}}return i||null},getSubIdByNode:function(e){var t=null;if(null!=e){var i=$(e);t=i.hasClass("oj-combobox-input")?{subId:"oj-combobox-input"}:i.hasClass("oj-combobox-arrow")?{subId:"oj-combobox-arrow"}:i.hasClass("oj-listbox-result")?{subId:"oj-listitem",value:i.data("ojcombobox").value}:i.hasClass("oj-combobox-clear-entry-icon")?{subId:"oj-combobox-remove",value:i.closest(".oj-combobox-selected-choice").data("ojcombobox").value}:this._super(e)}return t}}),n.__registerWidget("oj.ojInputSearch",$.oj.editableValue,{defaultElement:"<input>",widgetEventPrefix:"oj",options:{placeholder:void 0,required:!1,list:void 0,options:null,optionsKeys:null,pickerAttributes:null,optionRenderer:null,minLength:0,beforeExpand:null,rawValue:void 0,optionChange:null,update:null,validators:void 0},widget:function(){return this.inputSearch.container},_ComponentCreate:function(){this._super(),this._setup()},_InitOptions:function(e,t){if(this._super(e,t),n.EditableValueUtils.initializeOptionsFromDom([{attribute:"disabled",validateOption:!0},{attribute:"placeholder"},{attribute:"required",coerceDomValue:!0,validateOption:!0},{attribute:"title"}],t,this),void 0===this.options.value)this.options.value=void 0!==this.element.attr("value")?gt.splitVal(this.element.val(),","):null;else{var i=this.options.value;Array.isArray(i)?i=i.slice(0):"string"==typeof i&&(i=[i]),this.options.value=i}},_AfterSetOption:function(e,t,i){switch(this._superApply(arguments),e){case"required":this._AfterSetOptionRequired(e);break;case"validators":this._AfterSetOptionValidators(e)}},_IsRequired:function(){return this.options.required},_AfterSetOptionRequired:n.EditableValueUtils._AfterSetOptionRequired,_AfterSetOptionValidators:n.EditableValueUtils._AfterSetOptionValidators,_refreshRequired:n.EditableValueUtils._refreshRequired,_GetNormalizedValidatorsFromOption:n.EditableValueUtils._GetNormalizedValidatorsFromOption,_AriaRequiredUnsupported:function(){return!1},_setup:function(){var e={};e.element=this.element,e.ojContext=this,e.inputSearch=!0,e=$.extend(this.options,e),this.inputSearch=new Dt,this.inputSearch._init(e),this._refreshRequired(this.options.required)},_destroy:function(){this.inputSearch._destroy(),this._super()},refresh:function(){this._super(),this.inputSearch._destroy(),this._setup(),this._SetRootAttributes()},_setOption:function(t,i,n){var o=i;"value"===t&&(null!=o&&(Array.isArray(o)?o=o.slice(0):"string"==typeof o?o=[o]:e.error("ojInputSearch value has to be an array of string or a string.")),n&&n._context&&n._context.optionMetadata?this.inputSearch.valueChangeTrigger=n._context.optionMetadata.trigger:this.inputSearch.valueChangeTrigger=null),this._super(t,o,n),"options"===t&&(this.inputSearch.opts.options=o,this.inputSearch.opts=this.inputSearch._prepareOpts(this.inputSearch.opts)),"disabled"===t&&(o?this.inputSearch._disable():this.inputSearch._enable())},_NotifyDetached:function(){this._superApply(arguments),this.inputSearch.close()},_NotifyHidden:function(){this._superApply(arguments),this.inputSearch.close()},_SetDisplayValue:function(e){this.inputSearch._initSelection()},_SetPlaceholder:function(e){this.inputSearch&&(this.inputSearch.opts.placeholder=e,this.inputSearch._setPlaceholder&&this.inputSearch._setPlaceholder())},validate:function(){var e=this.inputSearch.search.val(),t=null,i=[];return this.isValid()&&(i=this.inputSearch.getVal()),t=null==e||""===e?i:[e],this._SetValue(t,null,this._VALIDATE_METHOD_OPTIONS)},_parseValue:function(t){var i,n=[];if(null==t)return n;if(Array.isArray(t))for(var o=0;o<t.length;o++)i=this._super(t[o]),n.push(i.toString());else"string"==typeof t?(i=this._super(t),n.push(i.toString())):e.error("ojInputSearch value has to be an array of string or a string.");return n},_GetMessagingLauncherElement:function(){return this.inputSearch.search},_GetContentElement:function(){return this.inputSearch.search},_GetDefaultStyleClass:function(){return"oj-inputsearch"},_getDropdown:function(){if(this.inputSearch&&this.inputSearch._opened())for(var e=$(".oj-listbox-drop"),t=0;t<e.length;t++)if("oj-listbox-drop"===$(e[t]).attr("id")&&$(e[t]).attr("data-oj-containerid")===this.inputSearch.containerId)return $(e[t]);return null},expand:function(){this.inputSearch.open()},collapse:function(){this.inputSearch.close()},getNodeBySubId:function(e){var t,i=null;if(null===e)return this.inputSearch.container?this.inputSearch.container[0]:null;if(!(i=this._super(e)))switch("oj-inputsearch-search"===(t=e.subId)&&(t="oj-inputsearch-search-button"),t){case"oj-inputsearch-input":case"oj-inputsearch-search-button":i=this.widget().find("."+t)[0];break;case"oj-listitem":var n=this._getDropdown();if(n){var o=n.find(".oj-listbox-result");i=this.inputSearch._findItem(o,e.value)}}return i||null},getSubIdByNode:function(e){var t=null;if(null!=e){var i=$(e);t=i.hasClass("oj-inputsearch-input")?{subId:"oj-inputsearch-input"}:i.hasClass("oj-inputsearch-search-button")?{subId:"oj-inputsearch-search"}:i.hasClass("oj-listbox-result")?{subId:"oj-listitem",value:i.data("ojinputsearch").value}:this._super(e)}return t}}),n.__registerWidget("oj.ojSelect",$.oj.editableValue,{defaultElement:"<select>",widgetEventPrefix:"oj",options:{minimumResultsForSearch:15,placeholder:null,optionRenderer:null,options:null,optionsKeys:{},pickerAttributes:null,required:!1,readOnly:!1,renderMode:"jet",valueOption:null,valueOptions:null},widget:function(){return this.select?this.select.container:this.element.parent()},_ComponentCreate:function(){this._super(),gt.wrapDataProviderIfNeeded(this,null),this._setup()},_AfterCreate:function(){if(this._super(),this._IsCustomElement()){var e=this.uuid+"_Label",t=n.EditableValueUtils.getOjLabelId($(this.OuterWrapper),e);!t||this.multiple&&gt.isReadonly(this)||this._GetContentElement().attr("aria-labelledby",t)}},_AfterSetOption:function(e,t,i){switch(this._superApply(arguments),e){case"required":this._AfterSetOptionRequired(e)}},_IsRequired:function(){return this.options.required},_AfterSetOptionRequired:n.EditableValueUtils._AfterSetOptionRequired,_nativeSetDisabled:function(e){e?(this.element.attr("disabled",""),this.element.parent().addClass("oj-disabled").removeClass("oj-enabled")):(this.element.removeAttr("disabled"),this.element.parent().removeClass("oj-disabled").addClass("oj-enabled"))},_nativeChangeHandler:function(e){var t=[],i=[],n=!this._IsRequired()&&this._HasPlaceholderSet();$(e.target).find("option").each(function(){this.selected&&(this.value||n&&""===this.value)&&(t.push(this.value),i.push({value:this.value,label:this.text}))}),gt.duringFetchByKey(this.element)&&gt.setValueChanged(this,!0),this._IsCustomElement()&&!0!==this.multiple?(this._SetValue(t[0],e,{doValueChangeCheck:!1,_context:{internalSet:!0}}),gt.setValueOptions(this,i[0])):(this._SetValue(t,e,{doValueChangeCheck:!1,_context:{internalSet:!0}}),gt.setValueOptions(this,i))},_nativeQueryCallback:function(e){if(e){var t=this.element;gt.arrayPopulateResults(t,e,this._formatValue.bind(this),gt.isDataProvider(this.options.options)?null:this.options.optionsKeys),t.addClass(gt.GENERATED_OPTIONS_SELECTOR)}},_nativeSetSelected:function(e){var t=null;if(e)t=e;else if(this._HasPlaceholderSet()&&(this.options.required&&(t=this._nativeFindFirstEnabledOptionValue()),this._SetPlaceholder(this.options.placeholder)),null===t){var i=this._nativeFindFirstEnabledOption();t=this._nativeFindFirstEnabledOptionValue(i),gt.setValueOptions(this,{value:t,label:i.text()})}this._setInitialSelectedValue(t)},_nativeFetchFromDataProvider:function(){var e=this;gt.fetchFirstBlockFromDataProvider(this.element,e.options).then(function(t){if(e._nativeQueryCallback(t),t.length){var i=e.options.value;i?gt.validateFromDataProvider(e.element,e.options,i).then(function(t){var i,n;if(gt.isValueChanged(e)&&!1===e.multiple)gt.setValueChanged(e,void 0);else if(gt.isValueChanged(e)&&e.multiple&&(n=e.options.valueOptions,i=e.options.value,gt.setValueChanged(e,void 0)),t){var o=t.valueOptions;Array.isArray(o)&&o.length&&gt.setValueOptions(e,n?o.concat(n):o);var s=t.value;if(Array.isArray(s)&&s.length){i=i?s.concat(i):s;var r=e.multiple?i:s[0];e._nativeSetSelected(r),e.multiple&&1!==r.length||(e.element[0].value=r)}}}):e._nativeSetSelected()}})},_nativeSetup:function(){var e=this.element;if(e.wrap("<div>").parent().addClass("oj-select-native oj-component oj-select oj-form-control"),e.addClass("oj-select-select oj-component-initnode"),this.multiple?(e[0].multiple||(e[0].multiple=!0),e.parent().prepend("<a class='oj-select-arrow oj-component-icon oj-clickable-icon-nocontext oj-select-multiple-open-icon' role='presentation'></a>")):e.parent().prepend("<a class='oj-select-arrow oj-component-icon oj-clickable-icon-nocontext oj-select-open-icon' role='presentation'></a>"),this._nativeSetDisabled(this.options.disabled),this.options.list)gt.listPopulateResults(e,$("#"+this.options.list).children(),this._formatValue.bind(this)),e.addClass(gt.GENERATED_OPTIONS_SELECTOR);else if(this.options.options)gt.getDataProvider(this.options)?this._nativeFetchFromDataProvider():this._nativeQueryCallback(this.options.options);else if(this._IsCustomElement()){var t=e.children();1===t.length&&t.hasClass("oj-listbox-placeholder")||(gt.ojOptionPopulateResults(e,t,this._formatValue.bind(this)),e.addClass(gt.GENERATED_OPTIONS_SELECTOR))}this._focusable({element:e,applyHighlight:!0}),this.options.value||this._HasPlaceholderSet()||gt.getDataProvider(this.options)||this._setInitialSelectedValue(this._nativeFindFirstEnabledOptionValue()),e.change(this._nativeChangeHandler.bind(this)),gt.addDataProviderEventListeners(this)},_jetSetup:function(){var e={};e.element=this.element,e.ojContext=this,e=$.extend(this.options,e),this.select=this.multiple?new Tt:new Ct,this.select._init(e),this.select.container.addClass("oj-select-jet oj-form-control"),this._focusable({element:this.select.selection,applyHighlight:!0})},_setInitialSelectedValue:function(e){var t;t=this._IsCustomElement()?e:Array.isArray(e)?e:[e],this._SetValue(t,null,{doValueChangeCheck:!1,_context:{internalSet:!0,writeback:!0},changed:!0})},_setup:function(){gt.isValueForPlaceholder(this.multiple,this.options.value)&&(this.multiple?this.options.valueOptions=gt.getValueOptionsForPlaceholder(this,this.options.valueOptions):this.options.valueOption=gt.getValueOptionsForPlaceholder(this,this.options.valueOption)),this._resolveValueOptionsLater=gt.mergeValueAndValueOptions(this),this._isNative()?this._nativeSetup():this._jetSetup(),this._refreshRequired(this.options.required)},refresh:function(){this._super(),this._cleanup(),this._setup(),this._isNative()&&this.options.value&&this.element.val(this.options.value),this._SetRootAttributes()},_refreshRequired:n.EditableValueUtils._refreshRequired,_AriaRequiredUnsupported:function(){return!1},_destroy:function(){this._cleanup(),this._super()},_NotifyDetached:function(){this._superApply(arguments),this.select&&this.select.close()},_NotifyHidden:function(){this._superApply(arguments),this.select&&this.select.close()},_VerifyConnectedForSetup:function(){return!0},_SetPlaceholder:function(e){if(this._isNative()&&null!=e){var t=$(this.element.children("option:first-child"));t&&""===t.attr("value")?(t.text(this.options.placeholder),t.attr("value","")):((t=gt.createOptionTag(0,"",e,this._formatValue.bind(this))).addClass("oj-listbox-placeholder"),this._hidePlaceholder(t,this._IsRequired()),t.prependTo(this.element))}},_HasPlaceholderSet:function(){return gt.isPlaceholderSpecified(this.options)},_ClearPlaceholder:function(){this._SetPlaceholderOption(null),this._SetPlaceholder(null)},_InitOptions:function(e,t){if(this._super(e,t),n.EditableValueUtils.initializeOptionsFromDom([{attribute:"disabled",validateOption:!0},{attribute:"placeholder"},{attribute:"required",coerceDomValue:!0,validateOption:!0},{attribute:"title"}],t,this),this.multiple=this._IsCustomElement()?"OJ-SELECT-MANY"===this.OuterWrapper.nodeName:this.options.multiple,void 0===this.options.value)this._IsCustomElement()||(this.options.value=void 0!==this.element.attr("value")?gt.splitVal(this.element.val(),","):null);else{var i=this.options.value;Array.isArray(i)&&(this._IsCustomElement()||(i=i.slice(0))),this.options.value=i}},_SetDisplayValue:function(t){if(this.select)gt.applyValueOptions(this.select,this.options)||this.select._initSelection(),this._resolveValueOptionsLater=!1;else{var i;if(null==t)this._HasPlaceholderSet()&&(this.element[0].selectedIndex=0,this.element.addClass("oj-select-default")),this._resolveValueOptionsLater&&gt.setValueOptions(this,gt.getFixupValueOptionsForPlaceholder(this.multiple));else{var n,o=!1,s=t;if(this.multiple||(Array.isArray(t)&&(s=t[0]),null===(n=this._nativeFindLabel(s))&&(e.warn("JET select: selected value not found"),this.element[0].options&&this.element[0].options.length>0?(this.element[0].selectedIndex=0,s=this.element[0].value,n=this.element[0].text,o=!0):n=String(t))),o||this.element.val(t),t=s,this._resolveValueOptionsLater){if(this.multiple){var r=0;i=[],this.element.find("option").each(function(){this.selected&&(i.push({value:t[r],label:this.text}),r+=1)})}else i={value:t,label:n};gt.setValueOptions(this,i)}}this._resolveValueOptionsLater=!1}},validate:function(){var e;if(!0===this.multiple){var t=this.select.search.val(),i=[],n=null;this.isValid()&&(i=this.select.getVal()),null==t||""===t?n=i:(i.push(t),n=i),e=this._SetValue(n,null,this._VALIDATE_METHOD_OPTIONS)}return this.select&&(e=this._SetValue(this.select.getVal(),null,this._VALIDATE_METHOD_OPTIONS)),this._IsCustomElement()&&(e=Promise.resolve(e?"valid":"invalid")),e},_CanSetValue:function(){return!!this.forceCanSetValue||this._super()},_nativeFindFirstEnabledOption:function(){var e;return(e=gt.isTreeDataProvider(this.options.options)?this.element.find("option:not(:disabled)"):this.element.children("option:not(:disabled)")).length>0?$(e[0]):null},_nativeFindFirstEnabledOptionValue:function(e){return e||(e=this._nativeFindFirstEnabledOption()),e?this._IsCustomElement()?e.attr("value"):[e.attr("value")]:null},_nativeSetOptions:function(e){var t=this.options.value,i=this.element;if(i.hasClass(gt.GENERATED_OPTIONS_SELECTOR))gt.cleanupResults(i);else{var n=i.children();n.length>0&&n.remove()}if(gt.isDataProvider(e))this._nativeFetchFromDataProvider();else{gt.arrayPopulateResults(i,e,this._formatValue.bind(this),this.options.optionsKeys);var o=null;this._HasPlaceholderSet()&&(this.options.required&&(o=this._nativeFindFirstEnabledOptionValue()),this._SetPlaceholder()),null===o&&(o=this._nativeFindFirstEnabledOptionValue()),this.options.value=o,this.option("value",t)}i.addClass(gt.GENERATED_OPTIONS_SELECTOR)},_removePlaceholderInMultiValues:function(e){for(var t,i=[],n=0;n<e.length;n++)null!=(t=e[n])&&(t.length>0?(1===i.length&&""===i[0]&&i.pop(),i.push(t)):0===i.length&&i.push(t));return i},_nativeFindLabel:function(e){var t=this.element[0].options;if(t&&t.length>0)for(var i=0;i<t.length;i++)if(t[i].value===e)return $(t[i]).text();return null},_setOption:function(e,t,i){var n,o=t,s=this,r=this._super,a=this.multiple;if("value"!==e)if("placeholder"===e?this.select?(this.select.opts.placeholder=o,gt.isValueForPlaceholder(a,this.options.value)&&this.select._setPlaceholder()):(n=this.options.value)&&0!==n.length&&n[0]||(this.element[0].selectedIndex=0):"minimumResultsForSearch"===e?this.select&&(this.select.opts.minimumResultsForSearch=o):"renderMode"===e&&(this._cleanup(),this.options.renderMode=o,this.refresh()),"options"===e?(gt.removeDataProviderEventListeners(this),gt.clearDataProviderWrapper(this)):"valueOption"===e&&!0!==a?(o=gt.getValueOptionsForPlaceholder(this,o),this.select&&(this.select.opts.valueOption=o)):"valueOptions"===e&&!0===a&&(o=gt.getValueOptionsForPlaceholder(this,o),this.select&&(this.select.opts.valueOptions=o)),this._super(e,o,i),"disabled"===e)this.select?o?this.select._disable():this.select._enable():this._nativeSetDisabled(o);else if("readOnly"===e)this.select&&this.select.applyReadonlyState(),"native"===this.options.renderMode&&this.refresh();else if("valueOption"===e&&!0!==a)gt.syncValueWithValueOption(this,o,this.options.value,this._isNative());else if("valueOptions"===e&&!0===a)gt.syncValueWithValueOptions(this,o,this.options.value,this._isNative());else if("options"===e)gt.isDataProvider(o)&&(gt.wrapDataProviderIfNeeded(this,this.select?this.select.opts:null),gt.addDataProviderEventListeners(this)),this.select?(n=this.select.getVal(),gt.getDataProvider(this.options)&&n?gt.applyValueOptions(this.select,this.options)?(this.select.opts.options=o,this.select.opts=s.select._prepareOpts(this.select.opts)):gt.validateFromDataProvider(this.select.container,this.options,this.options.value).then(function(e){var t=e?e.value:null;if(t){var i=e.valueOptions;Array.isArray(i)&&i.length&&gt.setValueOptions(s,i),Array.isArray(t)&&t.length&&r.call(s,"value",a?t:t[0])}else s.options.placeholder?a||s.select._updateSelectedOption(s.options.placeholder):gt.fetchFirstBlockFromDataProvider(s.select.container,s.options,1).then(function(e){e&&e.length>0&&n===s.select.getVal()?s.select._updateSelectedOption(e[0]):(r.call(s,"value",null),a||s.select.text.text(""))});s.select.opts.options=o,s.select.opts=s.select._prepareOpts(s.select.opts)}):(this.select.opts.options=o,this.select.opts=this.select._prepareOpts(this.select.opts),this.select.setValOpts(null),this._super("value",n))):this._nativeSetOptions(o);else if("required"===e&&this._isNative()){var l=$(this.element.find(".oj-listbox-placeholder"));l&&""===l.attr("value")&&this._hidePlaceholder(l,o)}else"multiple"!==e||this._IsCustomElement()||(this.multiple=o);else{if(this._HasPlaceholderSet()&&(o&&0===o.length||this._IsCustomElement()&&gt.isValueForPlaceholder(a,o)))return gt.setValueOptions(this,gt.getFixupValueOptionsForPlaceholder(a)),void this._super(e,o,i);var u;this.select&&((u=this.select.datalist)||(u=this.select.opts.element));var d=this._IsCustomElement()&&!a;if(Array.isArray(o)||d||(o=[o]),this._isNative()&&(d||(o=this._removePlaceholderInMultiValues(o)),!this._IsCustomElement()&&1===o.length&&""===o[0]||this._IsCustomElement()&&this._HasPlaceholderSet()&&gt.isValueForPlaceholder(a,o)?this.element.addClass("oj-select-default"):this.element.removeClass("oj-select-default")),gt.getDataProvider(this.options)&&o)return this.select&&(this.select.opts.options=this.options.options),void gt.validateFromDataProvider(this._isNative()?this.element:this.select.container,this.options,o).then(function(t){if(t){var i=t.valueOptions;Array.isArray(i)&&i.length&&gt.setValueOptions(s,i);var n=t.value;if(Array.isArray(n)&&n.length){var o=a?n:n[0];r.call(s,e,o),s._isNative()&&(s.element[0].value=o)}}});if(!d){for(var h=[],c=0;c<o.length;c++)this.select?(!this.select.opts.validate||this.select.opts.validate(u,o[c])||this._isOptionDataPending())&&h.push(o[c]):this.element.find("option[value='"+o[c]+"']").length>0&&h.push(o[c]);return void((h.length>0||a)&&(this._isNative()?this._nativeSetSelected(h):(this._super(e,h,i),gt.updateValueOptions(this.select))))}this.select&&this.select.opts.validate&&!this.select.opts.validate(u,o)&&!this._isOptionDataPending()||(this._super(e,o,i),gt.updateValueOptions(this.select))}},_isOptionDataPending:function(){var e=this.options.options,t=this.select.datalist;if(t){if(0===t.children().length)return!0}else{if(gt.isDataProvider(e))return!0;if(!e||0===e.length)return!0}return!1},_getDropdown:function(){if(this.select&&this.select._opened()){var e=this.select.dropdown;if(e&&e.attr("data-oj-containerid")===this.select.containerId)return e}return null},_hidePlaceholder:function(e,t){t?(e.attr("disabled",""),e.attr("hidden","")):(e.removeAttr("disabled"),e.removeAttr("hidden"))},_isNative:function(){return"native"===this.options.renderMode&&!gt.isReadonly(this)},_cleanup:function(){this.element.parent().hasClass("oj-select-native")?(this.element.off("change"),this.element.hasClass(gt.GENERATED_OPTIONS_SELECTOR)&&gt.cleanupResults(this.element),this.element.parent().hasClass("oj-select-native")&&(this.element.parent().children(".oj-select-arrow").remove(),this.element.unwrap()),this.element.removeClass("oj-select-select oj-component-initnode"),this.element.attr({"aria-labelledby":""})):this.select&&(this.select._destroy(),this.select=void 0)},getNodeBySubId:function(e){var t,i=null;if(null==e){var n=this.widget();return n?n[0]:null}if(this._isNative())return null;if(!(i=this._super(e))){var o=this._getDropdown();switch(t=e.subId){case"oj-select-drop":o&&(i=o[0]);break;case"oj-select-results":o&&(i=o.find(".oj-listbox-results")[0]);break;case"oj-select-search":o&&(i=o.find(".oj-listbox-search")[0]);break;case"oj-select-input":case"oj-listbox-input":o&&(i=o.find(".oj-listbox-input")[0]);break;case"oj-select-choice":case"oj-select-chosen":case"oj-select-arrow":i=this.widget().find("."+t)[0];break;case"oj-listitem":if(o){var s=o.find(".oj-listbox-result");i=this.select._findItem(s,e.value)}break;case"oj-select-remove":var r=this.widget().find(".oj-select-selected-choice"),a=this.select._findItem(r,e.value);i=a?$(a).find(".oj-select-clear-entry-icon")[0]:null;break;case"oj-listbox-result-label":if(o){var l=$("#"+this.select.results.attr("id")).children(),u=e.index;l.length&&u<l.length&&(i=l.eq(u).find("."+t)[0])}}}return i||null},getSubIdByNode:function(e){if(this._isNative())return this._super(e);var t=null;if(null!=e){var i=$(e);t=i.hasClass("oj-listbox-input")?{subId:"oj-select-input"}:i.hasClass("oj-select-arrow")?{subId:"oj-select-arrow"}:i.hasClass("oj-listbox-result")?{subId:"oj-listitem",value:i.data("ojselect").value}:i.hasClass("oj-select-clear-entry-icon")?{subId:"oj-select-remove",value:i.closest(".oj-select-selected-choice").data("ojselect").value}:this._super(e)}return t},_GetDefaultStyleClass:function(){return"oj-select"},_GetMessagingLauncherElement:function(){return this.select?this.select.selection:this.element},_GetContentElement:function(){return this.select?this.select.selection:this.element}}),w.setDefaultOptions({ojSelect:{displayOptions:{converterHint:["none"]},renderMode:w.createDynamicPropertyGetter(function(){return(_.parseJSONFromFontFamily("oj-select-option-defaults")||{}).renderMode})}}),pt.extension._WIDGET_NAME="ojCombobox",pt.extension._INNER_ELEM="input",pt.extension._ALIASED_PROPS={readonly:"readOnly"},n.CustomElementBridge.register("oj-combobox-one",{metadata:pt}),ct.extension._WIDGET_NAME="ojCombobox",ct.extension._INNER_ELEM="input",ct.extension._ALIASED_PROPS={readonly:"readOnly"},n.CustomElementBridge.register("oj-combobox-many",{metadata:ct}),mt.extension._WIDGET_NAME="ojSelect",mt.extension._INNER_ELEM="select",mt.extension._ALIASED_PROPS={readonly:"readOnly"},n.CustomElementBridge.register("oj-select-one",{metadata:mt}),_t.extension._WIDGET_NAME="ojSelect",_t.extension._INNER_ELEM="select",_t.extension._ALIASED_PROPS={readonly:"readOnly"},n.CustomElementBridge.register("oj-select-many",{metadata:_t});var At,It,Ot={properties:{asyncValidators:{type:"Array<Object>",value:[]},autocomplete:{type:"string",value:"on",extension:{_COPY_TO_INNER_ELEM:!0}},autofocus:{type:"boolean",value:!1,extension:{_COPY_TO_INNER_ELEM:!0}},converter:{type:"object",value:'oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({"day":"2-digit","month":"2-digit","year":"2-digit"})',properties:{type:{type:"string"},options:{type:"object"}}},datePicker:{type:"object",properties:{changeMonth:{type:"string",enumValues:["none","select"],value:"select"},changeYear:{type:"string",enumValues:["none","select"],value:"select"},currentMonthPos:{type:"number",value:0},daysOutsideMonth:{type:"string",enumValues:["hidden","selectable","visible"],value:"hidden"},footerLayout:{type:"string",enumValues:["","today"],value:"today"},numberOfMonths:{type:"number",value:1},showOn:{type:"string",enumValues:["focus","image"],value:"focus"},stepBigMonths:{type:"number",value:12},stepMonths:{type:"string|number",value:"numberOfMonths"},weekDisplay:{type:"string",enumValues:["none","number"],value:"none"},yearRange:{type:"string",value:"c-10:c+10"}}},dayFormatter:{type:"function"},dayMetaData:{type:"object"},describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},keyboardEdit:{type:"string",enumValues:["disabled","enabled"]},labelHint:{type:"string",value:""},max:{type:"string"},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},min:{type:"string"},name:{type:"string",value:"",extension:{_COPY_TO_INNER_ELEM:!0}},pickerAttributes:{type:"object",properties:{style:{type:"string"},class:{type:"string"}}},placeholder:{type:"string"},rawValue:{type:"string",writeback:!0,readOnly:!0},readonly:{type:"boolean",value:!1},renderMode:{type:"string",enumValues:["jet","native"]},required:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{currentText:{type:"string"},dateRestriction:{type:"object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}},dateTimeRange:{type:"object",properties:{hint:{type:"object",properties:{inRange:{type:"string"},max:{type:"string"},min:{type:"string"}}},messageDetail:{type:"object",properties:{rangeOverflow:{type:"string"},rangeUnderflow:{type:"string"}}},messageSummary:{type:"object",properties:{rangeOverflow:{type:"string"},rangeUnderflow:{type:"string"}}}}},nextText:{type:"string"},prevText:{type:"string"},regexp:{type:"object",properties:{messageDetail:{type:"string"},messageSummary:{type:"string"}}},required:{type:"object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}},tooltipCalendar:{type:"string"},tooltipCalendarDisabled:{type:"string"},tooltipCalendarTime:{type:"string"},tooltipCalendarTimeDisabled:{type:"string"},weekHeader:{type:"string"}}},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},validators:{type:"Array<Object>",value:[]},value:{type:"string",writeback:!0}},methods:{hide:{},refresh:{},show:{},validate:{},reset:{},showMessages:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{}},extension:{}},wt={properties:{asyncValidators:{type:"Array<Object>",value:[]},autocomplete:{type:"string",value:"on",extension:{_COPY_TO_INNER_ELEM:!0}},autofocus:{type:"boolean",value:!1,extension:{_COPY_TO_INNER_ELEM:!0}},converter:{type:"object",value:'oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({"day": "2-digit", "month": "2-digit", "year": "2-digit", "hour": "2-digit", "minute": "2-digit"})',properties:{type:{type:"string"},options:{type:"object"}}},datePicker:{type:"object",properties:{changeMonth:{type:"string",enumValues:["none","select"],value:"select"},changeYear:{type:"string",enumValues:["none","select"],value:"select"},currentMonthPos:{type:"number",value:0},daysOutsideMonth:{type:"string",enumValues:["hidden","selectable","visible"],value:"hidden"},footerLayout:{type:"string",enumValues:["","today"],value:"today"},numberOfMonths:{type:"number",value:1},showOn:{type:"string",enumValues:["focus","image"],value:"focus"},stepBigMonths:{type:"number",value:12},stepMonths:{type:"string|number",value:"numberOfMonths"},weekDisplay:{type:"string",enumValues:["none","number"],value:"none"},yearRange:{type:"string",value:"c-10:c+10"}}},dayFormatter:{type:"function"},dayMetaData:{type:"object"},describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},keyboardEdit:{type:"string",enumValues:["disabled","enabled"]},labelHint:{type:"string",value:""},max:{type:"string"},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},min:{type:"string"},name:{type:"string",value:"",extension:{_COPY_TO_INNER_ELEM:!0}},pickerAttributes:{type:"object",properties:{style:{type:"string"},class:{type:"string"}}},placeholder:{type:"string"},rawValue:{type:"string",writeback:!0,readOnly:!0},readonly:{type:"boolean",value:!1},renderMode:{type:"string",enumValues:["jet","native"]},required:{type:"boolean",value:!1},timePicker:{type:"object",properties:{footerLayout:{type:"string",enumValues:["","now"],value:""},showOn:{type:"string",enumValues:["focus","image"],value:"focus"},timeIncrement:{type:"string",value:"00:05:00:00"}}},translations:{type:"object",value:{},properties:{cancel:{type:"string"},currentText:{type:"string"},dateRestriction:{type:"object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}},dateTimeRange:{type:"object",properties:{hint:{type:"object",properties:{inRange:{type:"string"},max:{type:"string"},min:{type:"string"}}},messageDetail:{type:"object",properties:{rangeOverflow:{type:"string"},rangeUnderflow:{type:"string"}}},messageSummary:{type:"object",properties:{rangeOverflow:{type:"string"},rangeUnderflow:{type:"string"}}}}},done:{type:"string"},nextText:{type:"string"},prevText:{type:"string"},regexp:{type:"object",properties:{messageDetail:{type:"string"},messageSummary:{type:"string"}}},required:{type:"object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}},tooltipCalendar:{type:"string"},tooltipCalendarDisabled:{type:"string"},tooltipCalendarTime:{type:"string"},tooltipCalendarTimeDisabled:{type:"string"},weekHeader:{type:"string"}}},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},validators:{type:"Array<Object>",value:[]},value:{type:"string",writeback:!0}},methods:{show:{},showTimePicker:{},hideTimePicker:{},hide:{},refresh:{},validate:{},reset:{},showMessages:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{}},extension:{}},Rt={properties:{asyncValidators:{type:"Array<Object>",value:[]},autocomplete:{type:"string",value:"on",extension:{_COPY_TO_INNER_ELEM:!0}},autofocus:{type:"boolean",value:!1,extension:{_COPY_TO_INNER_ELEM:!0}},converter:{type:"object",value:'oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({"hour": "2-digit", "minute": "2-digit"})',properties:{type:{type:"string"},options:{type:"object"}}},describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},keyboardEdit:{type:"string",enumValues:["disabled","enabled"]},labelHint:{type:"string",value:""},max:{type:"string"},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},min:{type:"string"},name:{type:"string",value:"",extension:{_COPY_TO_INNER_ELEM:!0}},pickerAttributes:{type:"object",properties:{style:{type:"string"},class:{type:"string"}}},placeholder:{type:"string"},rawValue:{type:"string",writeback:!0,readOnly:!0},readonly:{type:"boolean",value:!1},renderMode:{type:"string",enumValues:["jet","native"]},required:{type:"boolean",value:!1},timePicker:{type:"object",properties:{footerLayout:{type:"string",enumValues:["","now"],value:""},showOn:{type:"string",enumValues:["focus","image"],value:"focus"},timeIncrement:{type:"string",value:"00:05:00:00"}}},translations:{type:"object",value:{},properties:{ampmWheelLabel:{type:"string"},cancelText:{type:"string"},currentTimeText:{type:"string"},dateTimeRange:{type:"object",properties:{hint:{type:"object",properties:{inRange:{type:"string"},max:{type:"string"},min:{type:"string"}}},messageDetail:{type:"object",properties:{rangeOverflow:{type:"string"},rangeUnderflow:{type:"string"}}},messageSummary:{type:"object",properties:{rangeOverflow:{type:"string"},rangeUnderflow:{type:"string"}}}}},hourWheelLabel:{type:"string"},minuteWheelLabel:{type:"string"},okText:{type:"string"},regexp:{type:"object",properties:{messageDetail:{type:"string"},messageSummary:{type:"string"}}},required:{type:"object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}},tooltipTime:{type:"string"},tooltipTimeDisabled:{type:"string"}}},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},validators:{type:"Array<Object>",value:[]},value:{type:"string",writeback:!0}},methods:{show:{},hide:{},refresh:{},validate:{},reset:{},showMessages:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{}},extension:{}},xt=_.parseJSONFromFontFamily("oj-datetimepicker-config")||{},Lt=((It=xt.dateTimePickerDropDownThresholdWidth)&&(At="(min-width: "+It+")"),window.matchMedia(At||"(min-width: 768px)")),Nt=Lt.matches,Pt=function(){Nt=Lt.matches};function jt(t,i){i=t.parse(i);var n,o=new Date;try{n=le.IntlConverterUtils._dateTime(i,["date","fullYear","month","hours","minutes","seconds"],!0)}catch(t){return e.info("The value of the InputDateTime element should be an ISOString, please use a valid ISOString"),o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0),o}return o.setFullYear(n.fullYear),o.setDate(n.date),o.setMonth(n.month),o.setHours(n.hours),o.setMinutes(n.minutes),o.setSeconds(n.seconds),o.setMilliseconds(0),o}function Mt(e){return this.options.converter.parse(e)}function Ht(e,t,i){var o=e.translations.dateTimeRange||{},s=[{category:"hint",entries:["min","max","inRange"]},{category:"messageDetail",entries:["rangeUnderflow","rangeOverflow"]},{category:"messageSummary",entries:["rangeUnderflow","rangeOverflow"]}],r={min:e.min,max:e.max,converter:t,translationKey:{"oj-inputdatetime":"datetime","oj-inputtime":"time","oj-inputdate":"date"}[i]};if(!$.isEmptyObject(o))for(var a=0,l=s.length;a<l;a++){var u=o[s[a].category];if(u){for(var d={},h=s[a].entries,c=0,p=h.length;c<p;c++)d[h[c]]=u[h[c]];r[s[a].category]=d}}return n.Validation.validatorFactory(n.ValidatorFactory.VALIDATOR_TYPE_DATETIMERANGE).createValidator(r)}function kt(e,t){for(var i=0;i<e.length;i++){var n=e[i];"SPAN"===n.tagName&&(t?(n.classList.add("oj-disabled"),n.classList.remove("oj-enabled"),n.classList.remove("oj-default")):(n.classList.remove("oj-disabled"),n.classList.add("oj-enabled"),n.classList.add("oj-default")))}}function Ut(e,t,i){if(!e||t===i.length)return e;var n=t+1;return Ut(e[i[t]],n,i)||Ut(e["*"],n,i)}function Bt(e){var t;t=e._isInLine?e.element[0].parentNode:e.element[0].parentNode.parentNode,e._AddActiveable($(t))}function Ft(e){return"native"===e.options.renderMode&&window.cordova&&window.datePicker}window.addEventListener("resize",Pt,!1);var Vt=n.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({year:"numeric"});function Gt(e){var t=e.split(":");if(4!==t.length)throw new Error("timeIncrement value should be in the format of hh:mm:ss:SSS");for(var i={hourIncr:parseInt(t[0].substring(0),10),minuteIncr:parseInt(t[1],10),secondIncr:parseInt(t[2],10),millisecondIncr:parseInt(t[3],10)},n=0,o=Object.keys(i),s=0;s<o.length;s++){n+=i[o[s]]}if(0===n)throw new Error("timeIncrement must have a non 00:00:00:000 value");return i}function $t(e,t){for(var i=e.resolvedOptions(),o={},s=["hour","hour12","minute","second","millisecond","timeFormat","timeZone","timeZoneName","isoStrFormat","dst"],r=0,a=s.length;r<a;r++)s[r]in i&&("timeFormat"===s[r]&&(o.formatType="time"),o[s[r]]=i[s[r]]);var l={};if($.extend(l,o),delete l.isoStrFormat,delete l.dst,$.isEmptyObject(l))throw new Error("Empty object for creating a time picker converter");return $.extend(o,t||{}),le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter(o)}function Kt(e,t,i){var n,o,s,r,a,l=7,u=2,d=[.152,.362,.638,.848],h=.007,c=8,p=38,_=40,m=e,g=[],f=!t&&"oj-timepicker-meridian"===i;!function(){(n=document.createElement("div")).classList.add("oj-timepicker-wheel"),i&&n.classList.add(i);n.setAttribute("id","_ojWheel"+Kt.counter),Kt.counter+=1,n.setAttribute("tabIndex","0"),n.setAttribute("role","spinbutton"),m.wheel=n}();var v,y=$(n);return n.ojSpinUp=C,n.ojSpinDown=S,n.ojRefresh=T,n.ojDestroy=b,n.ojLinked=function(){return m.linked},v={recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_VERTICAL}],[Hammer.Tap],[Hammer.Swipe,{direction:Hammer.DIRECTION_VERTICAL}]]},y.ojHammer(v).on("tap",A).on("swipeup",I).on("swipedown",O).on("panstart",w).on("panend pancancel",R).on("panup pandown",x),n.addEventListener("wheel",L,!1),n.addEventListener("keydown",D,!1),n.addEventListener("focus",N,!1),n.addEventListener("blur",P,!1),T(),n;function b(){y.ojHammer().off("tap",A).off("swipeup",I).off("swipedown",O).off("panstart",w).off("panend pancancel",R).off("panup pandown",x),y.ojHammer("destroy")}function C(){if(g[l+1]){E(1);var e=g.shift();e&&n.removeChild(e);var t=zt(m,l,f);t&&n.appendChild(t),g.push(t)}}function S(){if(g[l-1]){E(-1);var e=g.pop();e&&n.removeChild(e);var t=zt(m,-l,f);t&&n.insertBefore(t,g[0]),g.unshift(t)}}function E(e){for(var t=0;t<g.length;t++){var i=g[t];i&&i.ojUpdatePosition(t-l-e)}n.setAttribute("aria-valuenow",m.getText(0))}function T(){g.forEach(function(e){e&&n.removeChild(e)}),g=[];for(var e=-l;e<=l;e++){var t=zt(m,e,f);t&&n.appendChild(t),g.push(t)}n.setAttribute("aria-valuenow",m.getText(0))}function D(e){var i=e.keyCode;switch(i){case p:m.position+=1,e.preventDefault();break;case _:m.position-=1,e.preventDefault();break;case c:m.keyboardValue=m.keyboardValue.slice(0,-1),e.preventDefault();break;default:(i>47&&i<58||i>95&&i<112||!t&&i>64&&i<91)&&(m.keyboardValue+=e.key)}}function A(e){n.focus();for(var t=(e.gesture.center.y-n.getBoundingClientRect().top)/y.height(),i=0;i<4&&t>d[i];)i+=1;2!==i&&(m.position+=i-2)}function I(e){n.focus();var t=e.gesture.velocityY,i=t*t/h;a=Math.floor(i/y.height()*5),e.preventDefault()}function O(e){n.focus();var t=e.gesture.velocityY,i=t*t/h;a=-Math.floor(i/y.height()*5),e.preventDefault()}function w(e){n.focus(),s=e.gesture.center.y,o=s,r=0,a=0}function R(){n.focus(),a&&(m.position+=a),o=null,s=null,r=null}function x(e){n.focus();var t=e.gesture.center.y,i=Math.round((o-t)/y.height()*5);i!==r&&Math.abs(s-t)>u&&(s=t,m.position+=i-r,r=i),e.preventDefault()}function L(e){e.deltaY&&(e.currentTarget.focus(),e.preventDefault()),e.deltaY<0&&(m.position+=1),e.deltaY>0&&(m.position-=1)}function N(){m.keyboardValue="",n.classList.add("oj-focus")}function P(){n.classList.remove("oj-focus"),m.update()}}function zt(e,t,i){var n,o,s=!1;function r(){n.parentNode.focus()}var a=e.getText(t);if(a){(n=document.createElement("div")).classList.add("oj-timepicker-wheel-item"),n.classList.add("oj-timepicker-wheel-item-position"+t),o=t,e.isDisabled(t)&&(s=!0,n.classList.add("oj-disabled")),n.ojUpdatePosition=function(e){return n.classList.remove("oj-timepicker-wheel-item-position"+o),n.classList.add("oj-timepicker-wheel-item-position"+e),o=e,Promise.resolve()};var l=document.createElement("div");l.textContent=a,l.classList.add("oj-timepicker-wheel-item-content"),i&&l.setAttribute("title",a),n.appendChild(l),Object.defineProperty(n,"ojDisabled",{enumerable:!0,get:function(){return s},set:function(e){e!==s&&($(n).toggleClass("oj-disabled"),s=e)}}),n.addEventListener("focus",r,!1),l.addEventListener("focus",r,!1)}return n}function Yt(e,t){var i,n,o,s,r,a,l,u=[150,100,50,25,16],d=0,h=e,c=0,p=0,_=1,m=1,g=1,f="",v=1,y=!1,b=this;function C(){if(t)for(var e=Object.keys(t),i=0;i<e.length;i++){var n=e[i];b[n]=t[n]}}function S(){var e=!1,t=h.value;b.value=A(t);var l,u=h.max;l=I(t)===I(u)?A(u)+1:m,o!==l&&(e=!0,o=l);var d,c=h.min;d=I(t)===I(c)?A(c):0,n!==d&&(e=!0,n=d);var p=h.increment,_=function e(t,i){if(0===i)return t;return e(i,t%i)}(p,a);_===a?(n=0,o=1,e=!0):b.linked&&p>r?_=p:0===T(_,r)?_/=r:_=1,g!==_&&(g=_,e=!0),i=Math.floor(m/g),s=i>4,b.wheel&&e&&b.wheel.ojRefresh()}function E(){a=r*m,l=v*_}function T(e,t){return(e%t+t)%t}function D(e,t){return Math.floor(e/a)*a+T(t,m)*r+T(e,r)}function A(e){return T(Math.floor(e/r),m)}function I(e){return Math.floor(e/a)}Object.defineProperty(b,"position",{enumerable:!0,get:function(){return c},set:function(e){var t=T(e,i)*g;t>=n&&t<o&&e!==c&&(b.value+=(e-c)*g)}}),Object.defineProperty(b,"value",{enumerable:!0,get:function(){return d},set:function(e){var t=Math.round(e/g)*g;(function(e){return!!s||n<=e&&e<o})(t)&&d!==t&&(d=T(t,m),function(){var e,t=T((e=d,Math.floor(e/g)),i),n=T(b.position,i),o=t-n;s&&(t>n?n+i-t<Math.abs(o)&&(o=t-n-i):t+i-n<Math.abs(o)&&(o=t+i-n)),0!==o&&(c+=o,b.wheel?y||(y=!0,function e(){if(b.wheel){u.forEach(function(e){b.wheel.classList.remove("oj-timepicker-wheel-spin-"+e)});var t,i=Math.abs(c-p);if(0!==i)i-=1,i=Math.min(i,u.length-1),t=u[i],b.wheel.classList.add("oj-timepicker-wheel-spin-"+u[i]),c>p&&(p+=1,b.wheel.ojSpinUp()),c<p&&(p-=1,b.wheel.ojSpinDown()),t&&(h.disableSpin?e.call(b):setTimeout(e.bind(b),t));else y=!1}}.call(b)):p=c)}(),b.linked&&(2===m&&(h.disableSpin=!0),h.value=D(h.value,d),h.disableSpin=!1))}}),Object.defineProperty(b,"increment",{enumerable:!0,get:function(){return g},set:function(e){g!==e&&(g=e,E())}}),Object.defineProperty(b,"valueMultiplier",{enumerable:!0,get:function(){return r},set:function(e){r!==e&&(r=e,E())}}),Object.defineProperty(b,"valueRange",{enumerable:!0,get:function(){return m},set:function(e){m!==e&&(m=e,E())}}),Object.defineProperty(b,"displayMultiplier",{enumerable:!0,get:function(){return v},set:function(e){v!==e&&(v=e,E())}}),Object.defineProperty(b,"displayRange",{enumerable:!0,get:function(){return _},set:function(e){_!==e&&(_=e,E())}}),Object.defineProperty(b,"keyboardValue",{enumerable:!0,get:function(){return f},set:function(e){if(f=e,b.parser&&f){var t=b.parser(f);t>=0&&(i=d,s=t,t=Math.floor(i/l)*l+T(s,_)*v+T(i,v),n<=t&&t<o&&(b.value=t)),f.length>=2?f="":setTimeout(function(){f=""},1e3)}var i,s}}),b.getText=function(e){var t,n=T(p,i)+e,o=s||n>=0&&n<i;if(b.formatter&&o){var r=function(e){return t=function(e){return T(T(e,i)*g,m)}(e),T(Math.floor(t/v),_);var t}(p+e);t=b.formatter(r)}return t},b.isDisabled=function(e){var t=T(p+e,i)*g;return 0!==n&&t<n||o!==m&&t>=o},b.update=function(){h.value=D(h.value,d)},b.refresh=S,b.setProperties=C,C()}n.__registerWidget("oj.ojInputDate",$.oj.inputBase,{widgetEventPrefix:"oj",_CLASS_NAMES:"oj-inputdatetime-input",_WIDGET_CLASS_NAMES:"oj-inputdatetime-date-only oj-component oj-inputdatetime",_ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES:"",_INPUT_HELPER_KEY:"inputHelp",_ATTR_CHECK:[{attr:"type",setMandatory:"text"}],_GET_INIT_OPTIONS_PROPS_FOR_WIDGET:[{attribute:"disabled",validateOption:!0},{attribute:"pattern"},{attribute:"title"},{attribute:"placeholder"},{attribute:"value",coerceDomValue:Mt},{attribute:"required",coerceDomValue:!0,validateOption:!0},{attribute:"readonly",option:"readOnly",validateOption:!0},{attribute:"min",coerceDomValue:Mt},{attribute:"max",coerceDomValue:Mt}],_TRIGGER_CLASS:"oj-inputdatetime-input-trigger",_TRIGGER_CALENDAR_CLASS:"oj-inputdatetime-calendar-icon",_CURRENT_CLASS:"oj-datepicker-current-day",_DAYOVER_CLASS:"oj-datepicker-days-cell-over",_UNSELECTABLE_CLASS:"oj-datepicker-unselectable",_DATEPICKER_DIALOG_DESCRIPTION_ID:"oj-datepicker-dialog-desc",_DATEPICKER_DESCRIPTION_ID:"oj-datepicker-desc",_CALENDAR_DESCRIPTION_ID:"oj-datepicker-calendar",_MAIN_DIV_ID:"oj-datepicker-div",_INLINE_CLASS:"oj-datepicker-inline",_INPUT_CONTAINER_CLASS:" oj-inputdatetime-input-container",_INLINE_WIDGET_CLASS:" oj-inputdatetime-inline",_ON_CLOSE_REASON_SELECTION:"selection",_ON_CLOSE_REASON_CANCELLED:"cancelled",_ON_CLOSE_REASON_TAB:"tab",_ON_CLOSE_REASON_CLOSE:"close",_KEYBOARD_EDIT_OPTION_ENABLED:"enabled",_KEYBOARD_EDIT_OPTION_DISABLED:"disabled",options:{datePicker:{footerLayout:"",changeMonth:"select",changeYear:"select",currentMonthPos:0,daysOutsideMonth:"hidden",numberOfMonths:1,showOn:"focus",stepMonths:"numberOfMonths",stepBigMonths:12,weekDisplay:"none",yearRange:"c-10:c+10"},converter:n.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({day:"2-digit",month:"2-digit",year:"2-digit"}),keyboardEdit:"enabled",max:void 0,min:void 0,pickerAttributes:null,renderMode:"jet",dayFormatter:null},_InitBase:function(){this._triggerNode=null,this._inputContainer=null,this._redirectFocusToInputContainer=!1,this._isMobile=!1,this._ignoreShow=!1,this._nativePickerShowing=!1,this._maxRows=4,this._currentDay=0,this._drawMonth=0,this._currentMonth=0,this._drawYear=0,this._currentYear=0,this._datePickerDefaultValidators={},this._nativePickerConverter=null;var e=this.element[0].nodeName.toLowerCase();this._isInLine="div"===e||"span"===e,this._isInLine?(this._createDpDiv(),this._WIDGET_CLASS_NAMES+=this._INLINE_WIDGET_CLASS,this._CLASS_NAMES=""):(this._ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES+=this._INPUT_CONTAINER_CLASS,!0!==this.options.readOnly&&(this._createDpDiv(),this._createPopupDpDiv()))},_createDpDiv:function(){var e=document.createElement("div");e.className="oj-datepicker-popup",e.style.display="none";var t=document.createElement("div");t.id=this._GetSubId(this._MAIN_DIV_ID),t.setAttribute("role","region"),t.setAttribute("aria-describedby",this._GetSubId(this._DATEPICKER_DESCRIPTION_ID)),t.className="oj-datepicker-content",e.appendChild(t),this._dpDiv=function(e){var t=".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){this.classList.remove("oj-hover")}).delegate(t,"mouseover",function(){this.classList.add("oj-hover")}).delegate(t,"focus",function(){this.classList.add("oj-focus")}).delegate(t,"blur",function(){this.classList.remove("oj-focus")})}($(e)),document.body.appendChild(e)},_createPopupDpDiv:function(){var e=this;this._popUpDpDiv=this._dpDiv.ojPopup({initialFocus:"none",role:"dialog",modality:Nt?"modeless":"modal",open:function(){e._popUpDpDiv.attr("aria-describedby",e._GetSubId(e._DATEPICKER_DIALOG_DESCRIPTION_ID)),"image"===e.options.datePicker.showOn&&e._dpDiv.find(".oj-datepicker-calendar").focus()},animateStart:function(e,t){"open"===t.action&&(e.preventDefault(),vi.slideIn(t.element,{offsetY:t.element.offsetHeight+"px"}).then(t.endCallback))},animation:{open:null,close:null}}).attr("data-oj-internal",""),this.element.attr("data-oj-popup-"+this._popUpDpDiv.attr("id")+"-parent","");var t=this.options.pickerAttributes;t&&n.EditableValueUtils.setPickerAttributes(this._popUpDpDiv.ojPopup("widget"),t)},_ComponentCreate:function(){this._InitBase();var e,t=this._super();if(this.options.dayMetaData&&(this.options.dayFormatter=(e=this.options.dayMetaData,function(t){return Ut(e,0,[t.fullYear,t.month,t.date])})),this.options.value){var i=this._GetConverter().format(this.options.value);this._SetValue(i,{})}return this._setCurrentDate(this._getDateIso()),this._isInLine?(this.element.append(this._dpDiv),this.element.addClass(this._INLINE_CLASS),this._dpDiv.css("display","block"),this._registerSwipeHandler()):(this._processReadOnlyKeyboardEdit(),!0!==this.options.readOnly&&(this._attachTrigger(),this._registerSwipeHandler())),Bt(this),t},_AfterCreate:function(){var e,t=this._superApply(arguments);if(this._disableEnable(this.options.disabled),!this._IsCustomElement()){var i=this.$label;this._inputContainer&&i&&1===i.length&&(e=i.attr("id"),this._inputContainer.attr("aria-labelledby",e))}return t},_setOption:function(e,t,i){var o=null;if("value"===e){if(t||(t=null),o=this._super(e,t,i),this._setCurrentDate(t),this._datepickerShowing()){var s=!(this._isInLine&&this._timePicker&&this._timePicker[0]===document.activeElement);this._updateDatepicker(s)}return o}if("dayMetaData"!==e){o=this._super(e,t,i),"disabled"===e?this._disableEnable(t):"max"===e||"min"===e?(this._datePickerDefaultValidators[n.ValidatorFactory.VALIDATOR_TYPE_DATETIMERANGE]=this._getValidator("min"),this._AfterSetOptionValidators()):"readOnly"===e?(this._isInLine||t||null!=this._dpDiv||(this._createDpDiv(),this._createPopupDpDiv(),this._attachTrigger(),this._registerSwipeHandler(),this._AppendInputHelper(),this._setupResizePopupBind()),this._processReadOnlyKeyboardEdit(),t&&this._hide(this._ON_CLOSE_REASON_CLOSE),this._AfterSetOptionDisabledReadOnly("readOnly",n.EditableValueUtils.readOnlyOptionOptions)):"keyboardEdit"===e?this._processReadOnlyKeyboardEdit():"dayFormatter"===e?(this._datePickerDefaultValidators[n.ValidatorFactory.VALIDATOR_TYPE_DATERESTRICTION]=this._getValidator("dayFormatter"),this._AfterSetOptionValidators()):"converter"===e&&(this._nativePickerConverter=null),"datePicker"===e&&"currentMonthPos"===i.subkey&&this._setCurrentDate(this._getDateIso());return this._datepickerShowing()&&e in{max:!0,min:!0,dayFormatter:!0,datePicker:!0,translations:!0}&&this._updateDatepicker(),o}this.option("dayFormatter",function(e){return Ut(t,0,[e.fullYear,e.month,e.date])},i)},_processReadOnlyKeyboardEdit:function(){var e=this.options.readOnly||this._isKeyboardEditDisabled();this.element.prop("readOnly",!!e)},_isKeyboardEditDisabled:function(){return this.options.keyboardEdit===this._KEYBOARD_EDIT_OPTION_DISABLED},_AppendInputHelperParent:function(){return this._triggerNode},_destroy:function(){return this._cleanUpDateResources(),this._super()},_datepickerShowing:function(){return this._isInLine||this._popUpDpDiv&&w.isComponentInitialized(this._popUpDpDiv,"ojPopup")&&this._popUpDpDiv.ojPopup("isOpen")||this._nativePickerShowing},_SetupResources:function(){return this._isInLine||!0!==this.options.readOnly&&this._setupResizePopupBind(),this._super()},_setupResizePopupBind:function(){this._resizePopupBind=function(){w.isComponentInitialized(this._popUpDpDiv,"ojPopup")&&this._popUpDpDiv.ojPopup("option","modality",Nt?"modeless":"modal")}.bind(this),window.addEventListener("resize",this._resizePopupBind,!1)},_ReleaseResources:function(){return this._IsCustomElement()&&this._cleanUpListeners(),this._super()},_cleanUpDateResources:function(){var e;e=this._isInLine?this.element[0].parentNode:this.element[0].parentNode.parentNode,this._RemoveActiveable($(e)),this.element.off("focus touchstart"),this._wrapper.off("touchstart"),this._triggerNode&&this._triggerNode.remove(),this._isInLine&&(this.element.removeProp("disabled"),this.element.removeProp("readonly")),this._cleanUpListeners(),this._animationResolve&&(this._animationResolve(),this._animationResolve=null),this._popUpDpDiv&&w.isComponentInitialized(this._popUpDpDiv,"ojPopup")&&this._popUpDpDiv.ojPopup("destroy"),this._dpDiv&&this._dpDiv.remove()},_cleanUpListeners:function(){this._resizePopupBind&&window.removeEventListener("resize",this._resizePopupBind),window.removeEventListener("resize",Pt)},_WrapElement:function(){this._inputContainer=this._superApply(arguments),this._inputContainer.attr({role:"presentation",tabindex:"-1"}),this.element.attr({role:"combobox","aria-haspopup":"true"})},_onElementFocus:function(){var e=this.options.datePicker.showOn;this._redirectFocusToInputContainer?(this._redirectFocusToInputContainer=!1,this._inputContainer.focus()):"focus"===e?this.show():this._datepickerShowing()&&this._hide(this._ON_CLOSE_REASON_CLOSE)},_OnElementTouchStart:function(e){if(e.preventDefault(),"focus"===this.options.datePicker.showOn)if(this._datepickerShowing())this._ignoreShow=!0,this._hide(this._ON_CLOSE_REASON_CLOSE);else{var t=this.element[0]===document.activeElement;this.show(),this._redirectFocusToInputContainer=!0,t&&this._inputContainer.focus()}},_attachTrigger:function(){var e=this.options.datePicker.showOn,t=document.createElement("span");t.className=this._TRIGGER_CLASS;var i=document.createElement("span");i.setAttribute("title",this._GetCalendarTitle()),i.className=this._TRIGGER_CALENDAR_CLASS+" oj-clickable-icon-nocontext oj-component-icon",t.appendChild(i),this.element.on("focus",$.proxy(this._onElementFocus,this)),this.element.on("touchstart",$.proxy(this._OnElementTouchStart,this));var n=this;this._wrapper.on("touchstart",function(){n._isMobile=!0}),"image"===e&&(i.style.display="block",this._IsRTL()?(this.element.css("border-top-left-radius",0),this.element.css("border-bottom-left-radius",0)):(this.element.css("border-top-right-radius",0),this.element.css("border-bottom-right-radius",0))),i.addEventListener("click",function(e){n._datepickerShowing()?n._hide(n._ON_CLOSE_REASON_CLOSE):(n.show(),n._dpDiv.find(".oj-datepicker-calendar").focus()),e.preventDefault(),e.stopPropagation()});var o=$(i);this._AddHoverable(o),this._AddActiveable(o),this._triggerIcon=o,this._triggerNode=$(t),this.element[0].parentNode.insertBefore(t,this.element[0].nextElementSibling)},_doCalendarKeyDown:function(e){var t=!1,i=$.ui.keyCode,n=this._IsRTL();if(this._datepickerShowing())switch(e.keyCode){case 84:e.altKey&&e.ctrlKey&&(this._dpDiv.find(".oj-datepicker-current").focus(),t=!0);break;case i.TAB:break;case i.SPACE:case i.ENTER:var o=$("td."+this._DAYOVER_CLASS,this._dpDiv);return o[0]&&this._selectDay(this._currentMonth,this._currentYear,o[0],e),e.preventDefault(),e.stopPropagation(),!1;case i.ESCAPE:this._hide(this._ON_CLOSE_REASON_CANCELLED),t=!0;break;case i.PAGE_UP:e.ctrlKey&&e.altKey?this._adjustDate(-this.options.datePicker.stepBigMonths,"M",!0):e.altKey?this._adjustDate(-1,"Y",!0):this._adjustDate(-this._getStepMonths(),"M",!0),t=!0;break;case i.PAGE_DOWN:e.ctrlKey&&e.altKey?this._adjustDate(+this.options.datePicker.stepBigMonths,"M",!0):e.altKey?this._adjustDate(1,"Y",!0):this._adjustDate(+this._getStepMonths(),"M",!0),t=!0;break;case i.END:this._currentDay=this._getDaysInMonth(this._currentYear,this._currentMonth),this._changeCurrentDay(),t=!0;break;case i.HOME:this._currentDay=1,this._changeCurrentDay(),t=!0;break;case i.LEFT:e.originalEvent&&e.originalEvent.altKey||e.altKey?this._adjustDate(e.ctrlKey?-this.options.datePicker.stepBigMonths:-this._getStepMonths(),"M",!0):this._adjustDate(n?1:-1,"D",!0),t=!0;break;case i.UP:this._adjustDate(-7,"D",!0),t=!0;break;case i.RIGHT:e.originalEvent&&e.originalEvent.altKey||e.altKey?this._adjustDate(e.ctrlKey?+this.options.datePicker.stepBigMonths:+this._getStepMonths(),"M",!0):this._adjustDate(n?-1:1,"D",!0),t=!0;break;case i.DOWN:this._adjustDate(7,"D",!0),t=!0}t&&(e.preventDefault(),e.stopPropagation())},_changeCurrentDay:function(){var e=$("."+this._DAYOVER_CLASS,this._dpDiv),t=this._currentDay+"";1===e.length&&e.removeClass(this._DAYOVER_CLASS);var i=$("table.oj-datepicker-calendar",this._dpDiv);if(1===(e=$("a.oj-enabled:contains("+this._currentDay+")",i).filter(function(){return $(this).text()===t})).length){var n=e.parent();i.addClass("oj-focus-highlight"),i.attr("aria-activedescendant",n.attr("id")+""),n.addClass(this._DAYOVER_CLASS)}},_doMonthViewKeyDown:function(e){var t=!1,i=$.ui.keyCode,n=this._IsRTL();if(this._datepickerShowing())switch(e.keyCode){case 84:e.altKey&&e.ctrlKey&&(this._dpDiv.find(".oj-datepicker-current").focus(),t=!0);break;case i.SPACE:case i.ENTER:var o=$("td."+this._DAYOVER_CLASS,this._dpDiv);return o[0]&&this._selectMonthYear(o[0],"M"),e.preventDefault(),e.stopPropagation(),!1;case i.ESCAPE:this.hide(),t=!0;break;case i.PAGE_UP:e.ctrlKey&&e.altKey?this._adjustDate(-this.options.datePicker.stepBigMonths,"M",!0,"month"):e.altKey?this._adjustDate(-1,"Y",!0,"month"):this._adjustDate(-this._getStepMonths(),"M",!0,"month"),t=!0;break;case i.PAGE_DOWN:e.ctrlKey&&e.altKey?this._adjustDate(+this.options.datePicker.stepBigMonths,"M",!0,"month"):e.altKey?this._adjustDate(1,"Y",!0,"month"):this._adjustDate(+this._getStepMonths(),"M",!0,"month"),t=!0;break;case i.END:this._currentMonth=11,this._updateDatepicker(!0,"month"),t=!0;break;case i.HOME:this._currentMonth=0,this._updateDatepicker(!0,"month"),t=!0;break;case i.LEFT:this._adjustDate(n?1:-1,"M",!0,"month"),t=!0;break;case i.UP:this._adjustDate(-3,"M",!0,"month"),t=!0;break;case i.RIGHT:this._adjustDate(n?-1:1,"M",!0,"month"),t=!0;break;case i.DOWN:this._adjustDate(3,"M",!0,"month"),t=!0}t&&(e.preventDefault(),e.stopPropagation())},_doYearViewKeyDown:function(e){var t=!1,i=$.ui.keyCode,n=this._IsRTL();if(this._datepickerShowing())switch(e.keyCode){case 84:e.altKey&&e.ctrlKey&&(this._dpDiv.find(".oj-datepicker-current").focus(),t=!0);break;case i.SPACE:case i.ENTER:var o=$("td."+this._DAYOVER_CLASS,this._dpDiv);return o[0]&&this._selectMonthYear(o[0],"Y"),e.preventDefault(),e.stopPropagation(),!1;case i.ESCAPE:this.hide(),t=!0;break;case i.PAGE_UP:e.altKey&&this._adjustDate(-1,"Y",!0,"year"),t=!0;break;case i.PAGE_DOWN:e.altKey&&this._adjustDate(1,"Y",!0,"year"),t=!0;break;case i.END:this._currentYear=10*Math.floor(this._currentYear/10)+9,this._updateDatepicker(!0,"year"),t=!0;break;case i.HOME:this._currentYear=10*Math.floor(this._currentYear/10),this._updateDatepicker(!0,"year"),t=!0;break;case i.LEFT:this._adjustDate(n?1:-1,"Y",!0,"year"),t=!0;break;case i.UP:this._adjustDate(-3,"Y",!0,"year"),t=!0;break;case i.RIGHT:this._adjustDate(n?-1:1,"Y",!0,"year"),t=!0;break;case i.DOWN:this._adjustDate(3,"Y",!0,"year"),t=!0}t&&(e.preventDefault(),e.stopPropagation())},_getDatepickerContent:function(){return this._dpDiv?$(this._dpDiv.find(".oj-datepicker-content")[0]):$()},_isDateTimeSwitcher:function(){return this._dateTimeSwitcherActive},_updateDatepicker:function(e,t,i){var n;this._maxRows=4,(n="year"===t?this._generateViewHTML("Y"):"month"===t?this._generateViewHTML("M"):this._generateViewHTML("D")).html="<div"+(this._isDateTimeSwitcher()?"":" class='oj-datepicker-wrapper'")+">"+n.html+"</div>",this._currentView=t;var o=this._getDatepickerContent();if(i){var s=o.children().first();s.css({position:"absolute",left:0,top:0}),o.prepend(n.html);var r=o.children().first(),a="previous"===i?"end":"start";if(!this._animationResolve){var l=c.getContext(this.element[0]).getBusyContext();this._animationResolve=l.addBusyState({description:"The datepicker id='"+this.element.attr("id")+"' is animating."})}vi.startAnimation(r[0],"open",{effect:"slideIn",direction:a});var u=vi.startAnimation(s[0],"close",{effect:"slideOut",direction:a,persist:"all"}),d=this;u.then(function(){s&&s.remove(),d._setupNewView(e,t,n.dayOverId),d._animationResolve(),d._animationResolve=null})}else o.empty().append(n.html),this._setupNewView(e,t,n.dayOverId)},_setupNewView:function(e,t,i){this._attachHandlers(),i&&this._dpDiv.find(".oj-datepicker-calendar").attr("aria-activedescendant",i);var n=this._getNumberOfMonths(),o=n[1],s=275;if(this._dpDiv.removeClass("oj-datepicker-multi-2 oj-datepicker-multi-3 oj-datepicker-multi-4").width(""),"year"===t||"month"===t)this._dpDiv.removeClass("oj-datepicker-multi");else{if((o=(n=this._getNumberOfMonths())[1])>1){var r=this._dpDiv.find(".oj-datepicker-calendar"),a=r.find("tbody a"),l=parseFloat(a.css("width")),u=parseFloat(r.css("margin-left"));isNaN(l)||isNaN(u)||(s=l*("number"===this.options.datePicker.weekDisplay?8:7)+2*u),this._dpDiv.addClass("oj-datepicker-multi-"+o).css("width",s*o+(this._isInLine?2:0)+"px")}this._dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("oj-datepicker-multi")}this._datepickerShowing()&&this.element.is(":visible")&&!this.element.is(":disabled")&&(e?this._placeFocusOnCalendar():this._isInLine||this.element[0]===document.activeElement||this.element.focus())},_placeFocusOnCalendar:function(){var e=this._dpDiv.find(".oj-datepicker-calendar");e[0]!==document.activeElement&&$(e[0]).focus()},_adjustDate:function(e,t,i,n,o){if(!this.options.disabled){var s=this._currentMonth,r=this._currentYear;this._adjustInstDate(e+("M"===t?this.options.datePicker.currentMonthPos:0),t),"D"===t&&s===this._currentMonth&&r===this._currentYear?this._changeCurrentDay():this._updateDatepicker(i,n,o)}},_gotoToday:function(){var e=new Date;this._currentDay=e.getDate(),this._currentMonth=e.getMonth(),this._drawMonth=this._currentMonth,this._currentYear=e.getFullYear(),this._drawYear=this._currentYear,this._adjustDate(null,null,!0,"day")},_selectMonthYear:function(e,t){var i,n=this._getDateIso(),o=e.getAttribute("data-year"),s="";o&&(i=parseInt(o,10),this._currentYear=i,this._drawYear=i,s=i+"_"),"M"===t?(i=parseInt(e.getAttribute("data-month"),10),this._currentMonth=i,this._drawMonth=i,s=i+"_",n=this._validateDatetime(n,{fullYear:this._currentYear,month:this._currentMonth})):n=this._validateDatetime(n,{fullYear:this._currentYear}),$("#"+this._GetSubId(s+this._CALENDAR_DESCRIPTION_ID)).html(this._EscapeXSS(this.options.monthWide[this._drawMonth])+" "+Vt.format(le.IntlConverterUtils.dateToLocalIso(new Date(this._drawYear,this._drawMonth,1)))),this._adjustDate(0,0,!0,"M"===t?"day":this._toYearFromView)},_selectDay:function(t,i,n,o){if(!$(n).hasClass(this._UNSELECTABLE_CLASS)&&!this.options.disabled){this._isDateTimeSwitcher()||this._hide(this._ON_CLOSE_REASON_SELECTION),this._currentDay=$("a",n).html(),this._currentMonth=t,this._currentYear=i;var s=le.IntlConverterUtils,r=this.options.value,a=new Date(this._currentYear,this._currentMonth,this._currentDay);if(r)try{r=s._dateTime(r,{fullYear:a.getFullYear(),month:a.getMonth(),date:a.getDate()})}catch(t){e.info("The value of the InputDateTime element should be an ISOString, please use a valid ISOString"),r=s.dateToLocalIso(a)}else r=s.dateToLocalIso(a);this._setDisplayAndValue(r,{}),this._isDateTimeSwitcher()&&this._placeFocusOnCalendar()}},_setDisplayAndValue:function(e,t){if(this._isDateTimeSwitcher()){if(this._switcherDateValue=e,this._setCurrentDate(e),this._datepickerShowing()){var i=!(this._isInLine&&this._timePicker&&this._timePicker[0]===document.activeElement);this._updateDatepicker(i)}}else{var n=this._GetConverter().format(e);this._SetDisplayValue(n),this._SetValue(n,t)}},_getDefaultIsoDate:function(){return le.IntlConverterUtils.dateToLocalIso(this._getTodayDate())},_setCurrentDate:function(e){var t;t=this._validateDatetime(e||this._getDefaultIsoDate(),["fullYear","month","date"],!0),this._currentDay=t.date,this._currentMonth=t.month,this._isMultiMonth()||(this._drawMonth=t.month),this._currentYear=t.fullYear,this._drawYear=this._currentYear,this._adjustInstDate()},_getStepMonths:function(){var e=this.options.datePicker.stepMonths;return $.isNumeric(e)?e:this.options.datePicker.numberOfMonths},_isButtonActivated:function(e){return!this.options.disabled&&("click"===e.type||"keydown"===e.type&&(32===e.keyCode||13===e.keyCode))},_gotoPrev:function(e){"year"===this._currentView?this._adjustDate(-10,"Y",!0,"year","previous"):"month"===this._currentView?this._adjustDate(-1,"Y",!0,"month","previous"):this._adjustDate(-e,"M",!0,"day","previous")},_gotoNext:function(e){"year"===this._currentView?this._adjustDate(10,"Y",!0,"year","next"):"month"===this._currentView?this._adjustDate(1,"Y",!0,"month","next"):this._adjustDate(+e,"M",!0,"day","next")},_attachHandlers:function(){var e=this._getStepMonths(),t=this,i=function(e){var t=!1;return"keydown"===e.type&&e.keyCode===$.ui.keyCode.TAB&&(t=!0),t};this._dpDiv.find("[data-handler]").map(function(){var n={prev:function(n){return t._isButtonActivated(n)&&t._gotoPrev(e),i(n)},next:function(n){return t._isButtonActivated(n)&&t._gotoNext(e),i(n)},today:function(e){return t._isButtonActivated(e)&&t._gotoToday(),i(e)},selectDay:function(e){return t._isButtonActivated(e)&&t._selectDay(+this.getAttribute("data-month"),+this.getAttribute("data-year"),this,e),i(e)},selectMonth:function(e){return t._isButtonActivated(e)&&t._selectMonthYear(this,"M"),i(e)},selectYear:function(e){return t._isButtonActivated(e)&&t._selectMonthYear(this,"Y"),i(e)},calendarKey:function(e){"year"===t._currentView?t._doYearViewKeyDown(e):"month"===t._currentView?t._doMonthViewKeyDown(e):t._doCalendarKeyDown(e)},selectMonthHeader:function(e){return t._isButtonActivated(e)&&("month"===t._currentView?t._updateDatepicker(!0,"day"):t._updateDatepicker(!0,"month")),i(e)},selectYearHeader:function(e){return t._isButtonActivated(e)&&("year"===t._currentView?t._updateDatepicker(!0,"day"):(t._toYearFromView=t._currentView,t._updateDatepicker(!0,"year"))),i(e)}};$(this).bind(this.getAttribute("data-event"),n[this.getAttribute("data-handler")])}),this._dpDiv.find(".oj-datepicker-calendar").map(function(){n.DomUtils.makeFocusable({element:$(this),applyHighlight:!0})});var o=this._dpDiv.find(".oj-datepicker-header a, .oj-datepicker-buttonpane a");this._AddHoverable(o),this._AddActiveable(o)},_registerSwipeHandler:function(){if(n.DomUtils.isTouchSupported()){var e=this,t=this._getStepMonths(),i=this._IsRTL(),o={recognizers:[[Hammer.Swipe,{direction:Hammer.DIRECTION_HORIZONTAL}]]};this._dpDiv.ojHammer(o).on(i?"swiperight":"swipeleft",function(){return e._gotoNext(t),!1}).on(i?"swipeleft":"swiperight",function(){return e._gotoPrev(t),!1})}},_getMinMaxDateIso:function(e){var t=this.options[e];if(t){var i=this._getDateIso();t=le.IntlConverterUtils._minMaxIsoString(t,i)}return t},_generateHeader:function(e,t,i,n,o){var s=this._IsRTL(),r=this._EscapeXSS(this.getTranslatedString("prevText")),a=n?"<a role='button' href='#' onclick='return false;' class='oj-datepicker-prev-icon oj-enabled oj-default oj-component-icon oj-clickable-icon-nocontext' data-handler='prev' data-event='click keydown' aria-label='"+r+"'></a>":"<a class='oj-datepicker-prev-icon oj-disabled oj-component-icon oj-clickable-icon-nocontext' title='"+r+"'></a>",l=this._EscapeXSS(this.getTranslatedString("nextText")),u=o?"<a role='button' href='#' onclick='return false;' class='oj-datepicker-next-icon oj-enabled oj-default oj-component-icon oj-clickable-icon-nocontext' data-handler='next' data-event='click keydown' aria-label='"+l+"'></a>":"<a class='oj-datepicker-next-icon oj-disabled oj-component-icon oj-clickable-icon-nocontext' title='"+l+"'></a>",d="<div class='oj-datepicker-header"+(this.options.disabled?" oj-disabled ":" oj-enabled oj-default ")+"'>";return/all|left/.test(i)&&(d+=s?u:a),/all|right/.test(i)&&(d+=s?a:u),d+=this._generateMonthYearHeader(e,t),d+="</div>"},_generateFooter:function(e,t){var i="",n=this._EscapeXSS(this.getTranslatedString("currentText")),o="<a role='button' href='#' onclick='return false;' class='oj-datepicker-current oj-priority-secondary "+(this.options.disabled?"oj-disabled' disabled":"oj-enabled'")+" data-handler='today' data-event='click keydown'>"+n+"</a>";if(e.length>1){var s=0,r=[{index:e.indexOf("today"),content:this._isInRange(t)?o:""}];for(r.sort(function(e,t){return e.index-t.index});s<r.length&&r[s].index<0;)s+=1;for(;s<r.length;)i+=r[s].content,s+=1;i.length>0&&(i="<div class='oj-datepicker-buttonpane'>"+i+"</div>")}return i},_isMultiMonth:function(){var e=this._getNumberOfMonths();return 1!==e[0]||1!==e[1]},_generateViewHTML:function(t){var i,n,o=le.IntlConverterUtils,s=["date","month","fullYear"],r=this._GetConverter(),a=new Date,l=new Date(a.getFullYear(),a.getMonth(),a.getDate()),u=this._IsRTL(),d=this.options.datePicker.footerLayout,h=this._getNumberOfMonths(),c=this.options.datePicker.currentMonthPos,p=this._isMultiMonth(),_=this._getMinMaxDateIso("min"),m=this._getMinMaxDateIso("max"),g=this._drawMonth-c,f=this._drawYear,v=new Date(this._currentYear,this._currentMonth,this._currentDay),y=this._getDateIso(),b=this._validateDatetime(y,s,!0),C=b.fullYear,S=b.date,E=b.month,T=new Date(C,E,S),D=this.options.disabled,A=this._EscapeXSS(this.getTranslatedString("weekText"));_&&(_=r.parse(_),i=this._validateDatetime(_,s,!0)),m&&(m=r.parse(m),n=this._validateDatetime(m,s,!0));try{y=o._clearTime(y)}catch(t){e.info("The value of the InputDateTime element should be an ISOString, please use a valid ISOString"),y=o._clearTime(this._getDefaultIsoDate())}if(g<0&&(g+=12,f-=1),i){var I=new Date(i.fullYear,i.month,i.date);for(n&&r.compareISODates(m,_)<0&&(I=new Date(n.fullYear,n.month,n.date));new Date(f,g,this._getDaysInMonth(f,g))<I;)(g+=1)>11&&(g=0,f+=1)}if(n){var O=new Date(n.fullYear,n.month-h[0]*h[1]+1,n.date);for(i&&r.compareISODates(m,_)<0&&(O=new Date(i.fullYear,i.month,i.date));new Date(f,g,1)>O;)(g-=1)<0&&(g=11,f-=1)}this._drawMonth=g,this._drawYear=f;var w=this._generateFooter(d,l),R=this.options.datePicker.weekDisplay;return"D"===t?this._generateDayHTMLContent(o,r,w,R,l,u,h,p,i,n,g,f,v,b,C,S,E,T,D,A):"M"===t?this._generateMonthHTMLContent(r,w,i,n,g,f,T,D):this._generateYearHTMLContent(o,w,i,n,g,f,T,D)},_generateDayHTMLContent:function(t,i,n,o,s,r,a,l,u,d,h,c,p,_,m,g,f,v,y,b){for(var C,S=this.options.dayWide,E=this.options.dayNarrow,T=this.options.firstDayOfWeek,D="",A=this.options.dayFormatter,I=null,O=this._canAdjustMonth(-1,c,h)&&!y,w=this._canAdjustMonth(1,c,h)&&!y,R=this.options.datePicker.daysOutsideMonth,x="",L="all",N=0;N<a[0];N++){var P="";this._maxRows=4;for(var j=0;j<a[1];j++){L=0===N?"all":"";var M="";if(l){if(M+="<div class='oj-datepicker-group",a[1]>1)switch(j){case 0:M+=" oj-datepicker-group-first",L=0===N?r?"right":"left":"";break;case a[1]-1:M+=" oj-datepicker-group-last",L=0===N?r?"left":"right":"";break;default:M+=" oj-datepicker-group-middle",L=""}M+="'>"}M+=this._generateHeader(h,c,L,O,w),M+="<table class='oj-datepicker-calendar"+("number"===o?" oj-datepicker-weekdisplay":"")+(y?" oj-disabled ":" oj-enabled oj-default ")+"' tabindex=-1 data-handler='calendarKey' data-event='keydown' aria-readonly='true' role='grid' aria-labelledby='"+this._GetSubId(c+"_"+h+"_"+this._CALENDAR_DESCRIPTION_ID)+"'><thead role='presentation'><tr role='row'>";var H="number"===o?"<th class='oj-datepicker-week-col'>"+this._EscapeXSS(this.getTranslatedString("weekHeader"))+"</th>":"";for(C=0;C<7;C++){var k=(C+parseInt(T,10))%7;H+="<th role='columnheader' aria-label='"+S[k]+"'"+((C+T+6)%7>=5?" class='oj-datepicker-week-end'":"")+"><span title='"+S[k]+"'>"+E[k]+"</span></th>"}M+=H+"</tr></thead><tbody role='presentation'>";var U=this._getDaysInMonth(c,h);c===m&&h===f&&(g=Math.min(g,U));var B=(this._getFirstDayOfMonth(c,h)-T+7)%7,F=Math.ceil((B+U)/7),V=l&&this._maxRows>F?this._maxRows:F;this._maxRows=V;for(var G=new Date(c,h,1-B),$=0;$<V;$++){var K;M+="<tr role='row'>";try{K=this._GetConverter().calculateWeek(t.dateToLocalIso(G))}catch(t){e.info("The value of the InputDateTime element should be an ISOString, please use a valid ISOString")}var z="none"===o?"":"<td class='oj-datepicker-week-col' role='rowheader' aria-label='"+b+" "+K+"'>"+K+"</td>";for(C=0;C<7;C++){var Y,W=G.getMonth()!==h,q=G.getTime()===v.getTime(),X="oj-dp-"+this.uuid+"-"+$+"-"+C+"-"+N+"-"+j,Z=G.getTime()===p.getTime()&&h===this._currentMonth;Z?(D=X,Y=" "+this._DAYOVER_CLASS):Y="";var J=[!0,""],Q=G.getFullYear(),ee=G.getMonth(),te=G.getDate();A&&(I=A({fullYear:Q,month:ee+1,date:te}))&&(J=[!I.disabled,I.className||""],I.tooltip&&J.push(I.tooltip));var ie=G.getTime()===v.getTime(),ne=W&&"selectable"!==R||!J[0]||this._outSideMinMaxRange(G,u,d);z+="<td role='gridcell' aria-disabled='"+!!ne+"' aria-selected='"+q+"' id='"+X+"' class='"+((C+T+6)%7>=5?" oj-datepicker-week-end":"")+(W?" oj-datepicker-other-month":"")+Y+(ne||y?" "+this._UNSELECTABLE_CLASS+" oj-disabled":" oj-enabled ")+(W&&"hidden"===R?"":" "+J[1]+(q?" "+this._CURRENT_CLASS:"")+(G.getTime()===s.getTime()?" oj-datepicker-today":""))+"'"+(W&&"hidden"===R||!J[2]?"":" title='"+J[2].replace(/'/g,"&#39;")+"'")+(ne?"":" data-handler='selectDay' data-event='click' data-month='"+G.getMonth()+"' data-year='"+G.getFullYear()+"'")+">"+(W&&"hidden"===R?"&#xa0;":ne||y?"<span class='oj-disabled'>"+G.getDate()+"</span>":"<a role='button' class='oj-enabled"+(ie?" oj-selected":"")+(W?" oj-priority-secondary":"")+"' "+(Z?"":"tabindex='-1' ")+" onclick='return false;' href='#'>"+G.getDate()+"</a>")+"</td>",G.setDate(G.getDate()+1)}M+=z+"</tr>"}(h+=1)>11&&(h=0,c+=1),M+="</tbody></table>",l&&(M+="</div>",a[0]>0&&j===a[1]-1&&(M+="<div class='oj-datepicker-row-break'></div>")),P+=M}x+=P}return{html:x+=n,dayOverId:D}},_generateMonthYearHeader:function(e,t){var i=this.options.datePicker.changeMonth,n=this.options.datePicker.changeYear,o=bn.isMonthPriorToYear()?"before":"after",s="<div class='oj-datepicker-title'>",r="",a=le.IntlConverterUtils,l=this.options.monthWide,u=this.options.disabled,d=t+"_"+e+"_";l&&("none"===i?r+="<span class='oj-datepicker-month'>"+l[e]+"</span>":(r+="<a role='button' onclick='return false;' href='#' data-handler='selectMonthHeader' data-event='click keydown' class='oj-datepicker-month "+(u?"oj-disabled' disabled":"oj-enabled'")+">",r+=l[e]+"</a>"),"before"===o&&(s+=r+("select"!==i||"select"!==n?"&#xa0;":""))),this.yearshtml||(this.yearshtml="","none"===n?s+="<span class='oj-datepicker-year'>"+Vt.format(a.dateToLocalIso(new Date(t,e,1)))+"</span>":(s+="<a role='button' onclick='return false;' href='#' data-handler='selectYearHeader' data-event='click keydown' class='oj-datepicker-year "+(u?"oj-disabled' disabled":"oj-enabled'")+">",s+=Vt.format(a.dateToLocalIso(new Date(t,e,1)))+"</a>",this.yearshtml=null)),l&&"after"===o&&(s+=("select"!==i||"select"!==n?"&#xa0;":"")+r);var h=this._drawYear===t&&this._drawMonth===e;return h&&(s+="<span aria-hidden='true' class='oj-helper-hidden-accessible' id='"+this._GetSubId(this._DATEPICKER_DIALOG_DESCRIPTION_ID)+"'>",s+=this._EscapeXSS(this.getTranslatedString("picker"))+"</span>"),s+="<span aria-hidden='true' class='oj-helper-hidden-accessible' id='"+this._GetSubId(d+this._CALENDAR_DESCRIPTION_ID)+"'>",s+=(l?l[e]+" ":"")+Vt.format(a.dateToLocalIso(new Date(t,e,1)))+"</span>",h&&(s+="<span aria-hidden='true' class='oj-helper-hidden-accessible' id='"+this._GetSubId(this._DATEPICKER_DESCRIPTION_ID)+"'>"+this._EscapeXSS(this.getTranslatedString("datePicker"))+"</span>"),s+="</div>"},_adjustInstDate:function(e,t){var i=this._drawYear+("Y"===t?e:0),n=this._drawMonth+("M"===t?e:0),o=Math.min(this._currentDay,this._getDaysInMonth(i,n))+("D"===t?e:0),s=new Date(i,n,o);this._currentDay=s.getDate(),this._currentMonth=s.getMonth(),this._drawMonth=this._currentMonth,this._currentYear=s.getFullYear(),this._drawYear=this._currentYear},_generateMonthHTMLContent:function(e,t,i,n,o,s,r,a){var l=this.options.monthAbbreviated,u="",d=this._canAdjustYear(-1,s)&&!a,h=this._canAdjustYear(1,s)&&!a,c="";this._maxRows=4;var p="";p+=this._generateHeader(o,s,"all",d,h),p+="<table class='oj-datepicker-calendar oj-datepicker-monthview"+(a?" oj-disabled ":" oj-enabled oj-default ")+"' tabindex=-1 data-handler='calendarKey' data-event='keydown' aria-readonly='true' role='grid' aria-labelledby='"+this._GetSubId(s+"_"+o+"_"+this._CALENDAR_DESCRIPTION_ID)+"'>",p+="<tbody role='presentation'>";for(var _=new Date(s,0,1),m=0;m<4;m++){p+="<tr role='row'>";for(var g="",f=0;f<3;f++){var v,y=3*m+f,b=_.getMonth()===r.getMonth(),C="oj-dp-"+this.uuid+"-"+m+"-"+f+"-0-0",S=y===this._currentMonth;S?(u=C,v=" "+this._DAYOVER_CLASS):v="";var E=_.getMonth()===r.getMonth(),T=i&&i.fullYear===s,D=n&&n.fullYear===s,A=!((!T||y>=i.month)&&(!D||y<=n.month));g+="<td role='gridcell' aria-disabled='"+!!A+"' aria-selected='"+b+"' id='"+C+"' class='"+v+(A||a?" "+this._UNSELECTABLE_CLASS+" oj-disabled":" oj-enabled ")+(b?" "+this._CURRENT_CLASS:"")+"'"+(A?"":" data-handler='selectMonth' data-event='click' data-month='"+_.getMonth()+"' data-year='"+_.getFullYear()+"'")+">"+(A||a?"<span class='oj-disabled'>"+l[y]+"</span>":"<a role='button' class='oj-enabled"+(E?" oj-selected":"")+"' "+(S?"":"tabindex='-1' ")+" onclick='return false;' href='#'>"+l[y]+"</a>")+"</td>",_.setMonth(_.getMonth()+1)}p+=g+"</tr>"}return c+=p+="</tbody></table>",{html:c+=t,dayOverId:u}},_generateYearHTMLContent:function(e,t,i,n,o,s,r,a){var l="",u=this._canAdjustDecade(-1,s)&&!a,d=this._canAdjustDecade(1,s)&&!a,h="";this._maxRows=4;var c="";c+=this._generateHeader(o,s,"all",u,d),c+="<table class='oj-datepicker-calendar oj-datepicker-yearview"+(a?" oj-disabled ":" oj-enabled oj-default ")+"' tabindex=-1 data-handler='calendarKey' data-event='keydown' aria-readonly='true' role='grid' aria-labelledby='"+this._GetSubId(s+"_"+o+"_"+this._CALENDAR_DESCRIPTION_ID)+"'>",c+="<tbody role='presentation'>";for(var p=this._getYearRange(s,i,n),_=10*Math.floor(s/10),m=new Date(_,o,1),g=0;g<4;g++){c+="<tr role='row'>";for(var f="",v=0;v<3&&(3!==g||1!==v);v++){var y,b=_+3*g+v,C=m.getFullYear()===r.getFullYear(),S="oj-dp-"+this.uuid+"-"+g+"-"+v+"-0-0",E=b===this._currentYear;E?(l=S,y=" "+this._DAYOVER_CLASS):y="";var T=m.getFullYear()===r.getFullYear(),D=Vt.format(e.dateToLocalIso(new Date(b,o,1))),A=b<p.startYear||b>p.endYear;f+="<td role='gridcell' aria-disabled='"+!!A+"' aria-selected='"+C+"' id='"+S+"' class='"+y+(A||a?" "+this._UNSELECTABLE_CLASS+" oj-disabled":" oj-enabled ")+(C?" "+this._CURRENT_CLASS:"")+"'"+(A?"":" data-handler='selectYear' data-event='click' data-month='"+m.getMonth()+"' data-year='"+m.getFullYear()+"'")+">"+(A||a?"<span class='oj-disabled'>"+D+"</span>":"<a role='button' class='oj-enabled"+(T?" oj-selected":"")+"' "+(E?"":"tabindex='-1' ")+" onclick='return false;' href='#'>"+D+"</a>")+"</td>",m.setFullYear(m.getFullYear()+1)}c+=f+"</tr>"}return h+=c+="</tbody></table>",{html:h+=t,dayOverId:l}},_getYearRange:function(e,t,i){var n=this.options.datePicker.yearRange.split(":"),o=(new Date).getFullYear();function s(t){var i;return i=t.match(/c[+-].*/)?e+parseInt(t.substring(1),10):t.match(/[+-].*/)?o+parseInt(t,10):parseInt(t,10),isNaN(i)?o:i}var r=s(n[0]),a=Math.max(r,s(n[1]||""));return{startYear:r=t?Math.max(r,t.fullYear):r,endYear:a=i?Math.min(a,i.fullYear):a}},_getNumberOfMonths:function(){var e=this.options.datePicker.numberOfMonths;return null==(e="string"==typeof e?parseInt(e,10):e)?[1,1]:"number"==typeof e?[1,e]:e},_getDaysInMonth:function(e,t){return 32-new Date(e,t,32).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i){var n=this._getNumberOfMonths(),o=new Date(t,i+(e<0?e:n[0]*n[1]),1);return e<0&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(o)},_canAdjustYear:function(e,t){var i;return e<0?(i=new Date(t+e,12,1)).setDate(this._getDaysInMonth(i.getFullYear(),i.getMonth())):i=new Date(t+e,1,1),this._isInRange(i)},_canAdjustDecade:function(e,t){var i,n=10*Math.floor(t/10);return e<0?(i=new Date(n+9+10*e,12,1)).setDate(this._getDaysInMonth(i.getFullYear(),i.getMonth())):i=new Date(n+10*e,1,1),this._isInRange(i)},_outSideMinMaxRange:function(e,t,i){var n=t?new Date(t.fullYear,t.month,t.date):null,o=i?new Date(i.fullYear,i.month,i.date):null;return null!==n&&e<n||null!==o&&e>o},_isInRange:function(e){var t,i,n=this._GetConverter(),o=this._getMinMaxDateIso("min"),s=null,r=this._getMinMaxDateIso("max"),a=null,l=this.options.datePicker.yearRange;if(l){var u=l.split(":"),d=(new Date).getFullYear();s=parseInt(u[0],10),a=parseInt(u[1],10),u[0].match(/[+-].*/)&&(s+=d),u[1].match(/[+-].*/)&&(a+=d)}if(o){o=n.parse(o);var h=this._validateDatetime(o,["fullYear","month","date"],!0);t=new Date(h.fullYear,h.month,h.date)}if(r){r=n.parse(r);var c=this._validateDatetime(r,["fullYear","month","date"],!0);i=new Date(c.fullYear,c.month,c.date)}return(!t||e.getTime()>=t.getTime())&&(!i||e.getTime()<=i.getTime())&&(!s||e.getFullYear()>=s)&&(!a||e.getFullYear()<=a)},_GetCalendarTitle:function(){return this._EscapeXSS(this.getTranslatedString("tooltipCalendar"+(this.options.disabled?"Disabled":"")))},_disableEnable:function(e){this._triggerNode&&(kt(this._triggerNode[0].children,e),this._triggerNode.find("."+this._TRIGGER_CALENDAR_CLASS).attr("title",this._GetCalendarTitle())),e&&this._hide(this._ON_CLOSE_REASON_CLOSE),this._isInLine&&this._updateDatepicker()},_AppendInputHelper:function(){this._isInLine||!0===this.options.readOnly||this._superApply(arguments)},_onBlurHandler:function(e){this._isInLine||this._superApply(arguments)},_onKeyDownHandler:function(e){if(!this._isInLine){this._superApply(arguments);var t=$.ui.keyCode,i=!1;if(this._datepickerShowing())switch(e.keyCode){case t.TAB:this._hide(this._ON_CLOSE_REASON_TAB);break;case t.ESCAPE:this._hide(this._ON_CLOSE_REASON_CANCELLED),i=!0;break;case t.UP:case t.DOWN:var o=this._dpDiv.find(".oj-datepicker-calendar")[0];n.FocusUtils.focusFirstTabStop(o)||o.focus(),i=!0}else switch(e.keyCode){case t.UP:case t.DOWN:this._SetValue(this._GetDisplayValue(),e),this.show(),i=!0}return i?(e.preventDefault(),e.stopPropagation(),!1):void 0}},_SetDisplayValue:function(e){if(this._isInLine||this._superApply(arguments),this._setCurrentDate(this._getDateIso()),this._datepickerShowing()){var t=!(this._isInLine&&this._timePicker&&this._timePicker[0]===document.activeElement);this._updateDatepicker(t)}},_GetConverter:function(){return this.options.converter?this._superApply(arguments):$.oj.ojInputDate.prototype.options.converter},_GetElementValue:function(){return this.options.value||""},_GetDefaultStyleClass:function(){return"oj-inputdate"},_GetImplicitSyncValidators:function(){var e=this._superApply(arguments);return null==this.options.min&&null==this.options.max||(this._datePickerDefaultValidators[n.ValidatorFactory.VALIDATOR_TYPE_DATETIMERANGE]=this._getValidator("min")),null!=this.options.dayFormatter&&(this._datePickerDefaultValidators[n.ValidatorFactory.VALIDATOR_TYPE_DATERESTRICTION]=this._getValidator("dayFormatter")),$.extend(this._datePickerDefaultValidators,e)},_NotifyDetached:function(){this._hide(this._ON_CLOSE_REASON_CLOSE),this._superApply(arguments)},_NotifyHidden:function(){this._hide(this._ON_CLOSE_REASON_CLOSE),this._superApply(arguments)},_getValidator:function(e){var t=null;if("min"===e||"max"===e)t=Ht(this.options,this._GetConverter(),this._GetDefaultStyleClass());else if("dayFormatter"===e){var i={dayFormatter:this.options.dayFormatter,converter:this._GetConverter()};$.extend(i,this.options.translations.dateRestriction||{}),t=n.Validation.validatorFactory(n.ValidatorFactory.VALIDATOR_TYPE_DATERESTRICTION).createValidator(i)}return t},_getTodayDate:function(){var e=new Date;return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e},_getDateIso:function(){var e=this.options.value||this._getDefaultIsoDate();return this._isDateTimeSwitcher()&&this._switcherDateValue&&(e=this._switcherDateValue),e},getNodeBySubId:function(e){var t=null,i=e&&e.subId,n=this._dpDiv,o=this._getDatepickerContent();if(i)switch(i){case"oj-datepicker-content":t=o[0];break;case"oj-inputdatetime-calendar-icon":t=$(".oj-inputdatetime-calendar-icon",this._triggerNode)[0];break;case"oj-datepicker-prev-icon":t=$(".oj-datepicker-prev-icon",n)[0];break;case"oj-datepicker-next-icon":t=$(".oj-datepicker-next-icon",n)[0];break;case"oj-datepicker-month":t=$(".oj-datepicker-month",n)[0];break;case"oj-datepicker-year":t=$(".oj-datepicker-year",n)[0];break;case"oj-datepicker-current":t=$(".oj-datepicker-current",n)[0];break;case"oj-inputdatetime-date-input":t=this._isInLine?null:this.element[0];break;default:t=null}return t||this._superApply(arguments)},getSubIdByNode:function(e){var t=this._dpDiv,i=null,n=[{selector:".oj-inputdatetime-calendar-icon",ele:this._triggerNode},{selector:".oj-datepicker-prev-icon",ele:t},{selector:".oj-datepicker-next-icon",ele:t},{selector:".oj-datepicker-month",ele:t},{selector:".oj-datepicker-year",ele:t},{selector:".oj-datepicker-current",ele:t}];if(e===t[0])return"oj-datepicker-content";if(!this._isInLine&&e===this.element[0])return"oj-inputdatetime-date-input";for(var o=0,s=n.length;o<s;o++){var r=n[o],a=$(r.selector,r.ele);if(1===a.length&&a[0]===e){i=r.selector.substr(1);break}}return i||this._superApply(arguments)},hide:function(){return this._hide(this._ON_CLOSE_REASON_CLOSE)},_hide:function(e){return Ft(this)||!this._datepickerShowing()||this._isInLine||(this._popUpDpDiv.ojPopup("close"),this._onClose(e)),this},_onClose:function(e){this._isMobile&&"focus"===this.options.datePicker.showOn?this._inputContainer.focus():("focus"===this.options.datePicker.showOn&&(this._ignoreShow=!0),this.element.focus())},refresh:function(){return this._triggerNode&&this._triggerNode.find("."+this._TRIGGER_CALENDAR_CLASS).attr("title",this._GetCalendarTitle()),this._superApply(arguments)||this},show:function(){if(!(this._datepickerShowing()||this.options.disabled||this.options.readOnly))if(this._ignoreShow)this._ignoreShow=!1;else if(Ft(this)){this.element.blur();var e={};e.date=jt(this._getNativeDatePickerConverter(),this._getDateIso()),e.mode="date",this._ShowNativeDatePicker(e)}else this._ShowHTMLDatePicker()},_getNativeDatePickerConverter:function(){if(null===this._nativePickerConverter){var e=this._GetConverter().resolvedOptions(),t={};$.extend(t,e,{isoStrFormat:"offset"}),this._nativePickerConverter=n.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter(t)}return this._nativePickerConverter},_ShowNativeDatePicker:function(t){var i=this._getMinMaxDateIso("min"),n=this._getMinMaxDateIso("max"),o=this._getNativeDatePickerConverter();i&&(t.minDate=jt(o,i).valueOf()),n&&(t.maxDate=jt(o,i).valueOf());var s=this;s._nativePickerShowing=!0,window.datePicker.show(t,$.proxy(this._OnDatePicked,this),function(t){s._nativePickerShowing=!1,t.startsWith("cancel")?s._onClose(s._ON_CLOSE_REASON_CANCELLED):e.log("Error: native date or time picker failed: "+t)})},_OnDatePicked:function(e){if(this._nativePickerShowing=!1,e){var t=this._validateDatetime(this._getDateIso(),{month:e.getMonth(),date:e.getDate(),fullYear:e.getFullYear()}),i=this._GetConverter().format(t);this._SetValue(i,{})}this._onClose(this._ON_CLOSE_REASON_SELECTION)},_validateDatetime:function(t,i,n){var o;try{o=le.IntlConverterUtils._dateTime(t,i,n)}catch(t){e.info("The value of the InputDate element should be an ISOString, please use a valid ISOString"),o=le.IntlConverterUtils._dateTime(this._getDefaultIsoDate(),i,n)}return o},_ShowHTMLDatePicker:function(){var e=this._IsRTL();if(this._switcherPrevValue=this._getDateIso(),this._switcherPrevDay=this._currentDay,this._switcherPrevMonth=this._currentMonth,this._switcherPrevYear=this._currentYear,this._getDatepickerContent().empty(),this._updateDatepicker(),Nt){var t=n.PositionUtils.normalizeHorizontalAlignment({my:"start top",at:"start bottom",of:this.element,collision:"flipfit flipfit"},e);this._popUpDpDiv.ojPopup("open",this.element.parent(),t)}else this._popUpDpDiv.ojPopup("open",this.element.parent(),{my:{horizontal:"center",vertical:"bottom"},at:{horizontal:"center",vertical:"bottom"},of:window,collision:"flipfit flipfit"}),this._dpDiv.find(".oj-datepicker-calendar").focus();return this}}),w.setDefaultOptions({ojInputDate:{firstDayOfWeek:w.createDynamicPropertyGetter(function(){return bn.getFirstDayOfWeek()}),dayWide:w.createDynamicPropertyGetter(function(){return bn.getDayNames("wide")}),dayNarrow:w.createDynamicPropertyGetter(function(){return bn.getDayNames("narrow")}),monthWide:w.createDynamicPropertyGetter(function(){return bn.getMonthNames("wide")}),monthAbbreviated:w.createDynamicPropertyGetter(function(){return bn.getMonthNames("abbreviated")}),datePicker:w.createDynamicPropertyGetter(function(){return(_.parseJSONFromFontFamily("oj-inputdatetime-option-defaults")||{}).datePicker}),renderMode:w.createDynamicPropertyGetter(function(){return(_.parseJSONFromFontFamily("oj-inputdatetime-option-defaults")||{}).renderMode}),keyboardEdit:w.createDynamicPropertyGetter(function(){return(_.parseJSONFromFontFamily("oj-inputdatetime-option-defaults")||{}).keyboardEdit})}}),n.__registerWidget("oj.ojInputTime",$.oj.inputBase,{widgetEventPrefix:"oj",_CLASS_NAMES:"oj-inputdatetime-input",_WIDGET_CLASS_NAMES:"oj-inputdatetime-time-only oj-component oj-inputdatetime",_INPUT_CONTAINER_CLASS:"oj-inputdatetime-input-container",_ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES:"",_INPUT_HELPER_KEY:"inputHelp",_ATTR_CHECK:[{attr:"type",setMandatory:"text"}],_GET_INIT_OPTIONS_PROPS_FOR_WIDGET:[{attribute:"disabled",validateOption:!0},{attribute:"pattern"},{attribute:"title"},{attribute:"placeholder"},{attribute:"value",coerceDomValue:Mt},{attribute:"required",coerceDomValue:!0,validateOption:!0},{attribute:"readonly",option:"readOnly",validateOption:!0},{attribute:"min",coerceDomValue:Mt},{attribute:"max",coerceDomValue:Mt}],_TIME_PICKER_ID:"ojInputTime",_TRIGGER_CLASS:"oj-inputdatetime-input-trigger",_TRIGGER_TIME_CLASS:"oj-inputdatetime-time-icon",_ON_CLOSE_REASON_SELECTION:"selection",_ON_CLOSE_REASON_CANCELLED:"cancelled",_ON_CLOSE_REASON_TAB:"tab",_ON_CLOSE_REASON_CLOSE:"close",_KEYBOARD_EDIT_OPTION_ENABLED:"enabled",_KEYBOARD_EDIT_OPTION_DISABLED:"disabled",options:{converter:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"2-digit",minute:"2-digit"}),keyboardEdit:"enabled",max:void 0,min:void 0,datePickerComp:null,pickerAttributes:null,renderMode:"jet",timePicker:{footerLayout:"",timeIncrement:"00:05:00:00",showOn:"focus"}},_InitOptions:function(e,t){this._super(e,t),null!==this.options.datePickerComp||this._IsCustomElement()||n.EditableValueUtils.initializeOptionsFromDom(this._GET_INIT_OPTIONS_PROPS_FOR_WIDGET,t,this)},_getPrependNode:function(){return this._isIndependentInput()?$("body"):$(".oj-popup-content",this._datePickerComp.widget._popUpDpDiv.ojPopup("widget"))},_InitBase:function(){this._timePickerDefaultValidators={},this._datePickerComp=this.options.datePickerComp,this._inputContainer=null,this._redirectFocusToInputContainer=!1,this._isMobile=!1,this._ignoreShow=!1,this._nativePickerShowing=!1,!0!==this.options.readOnly&&this._createWheelPicker(),this._isIndependentInput()&&(this._ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES+=this._INPUT_CONTAINER_CLASS)},_createWheelPicker:function(){var e=this.options.pickerAttributes,t=document.createElement("div");t.className="oj-timepicker-popup",t.style.display="none";var i=document.createElement("div");i.id=this._GetSubId(this._TIME_PICKER_ID),i.className="oj-timepicker-content",t.appendChild(i),this._wheelPicker=$(t);var o=this._getPrependNode()[0];if(o.insertBefore(t,o.firstElementChild),this._isIndependentInput()){this._popUpWheelPicker=this._wheelPicker.ojPopup({initialFocus:"none",role:"dialog",chrome:"default",modality:Nt?"modeless":"modal",open:function(){},beforeClose:function(){},animateStart:function(e,t){"open"===t.action&&(e.preventDefault(),vi.slideIn(t.element,{offsetY:t.element.offsetHeight+"px"}).then(t.endCallback))},animation:{open:null,close:null}}).attr("data-oj-internal",""),this.element.attr("data-oj-popup-"+this._popUpWheelPicker.attr("id")+"-parent",""),e&&n.EditableValueUtils.setPickerAttributes(this._popUpWheelPicker.ojPopup("widget"),e)}},_timepickerShowing:function(){var e;if(this._isIndependentInput())return(e=this._popUpWheelPicker)&&w.isComponentInitialized(e,"ojPopup")&&e.ojPopup("isOpen")||this._nativePickerShowing;var t=this._datePickerComp.widget;return e=t._popUpDpDiv,t._isShowingDatePickerSwitcher()&&w.isComponentInitialized(e,"ojPopup")&&e.ojPopup("isOpen")||this._nativePickerShowing},_ComponentCreate:function(){this._InitBase();var e=this._superApply(arguments);if(this._isContainedInDateTimePicker()&&!this._isDatePickerInline())this._CLASS_NAMES="";else{if(this.options.value){var t=this._GetConverter().format(this.options.value);this._SetValue(t,{})}Bt(this)}return this._processReadOnlyKeyboardEdit(),!0!==this.options.readOnly&&this._isIndependentInput()&&this._attachTrigger(),e},_validateTime:function(t,i,n){var o;try{o=le.IntlConverterUtils._dateTime(t,i,n)}catch(t){e.info("The value of the InputTime element should be an ISOString, please use a valid ISOString");var s=new Date;s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0);var r=le.IntlConverterUtils.dateToLocalIso(s);o=le.IntlConverterUtils._dateTime(r,i,n)}return o},_AfterCreate:function(){var e,t=this._superApply(arguments);if(this._isIndependentInput()&&(!0!==this.options.readOnly&&kt(this._triggerNode[0].children,this.options.disabled),!this._IsCustomElement())){var i=this.$label;this._inputContainer&&i&&1===i.length&&(e=i.attr("id"),this._inputContainer.attr("aria-labelledby",e))}return t},_setOption:function(e,t,i){var o,s=null;if("value"===e)return t||(t=null),s=this._super(e,t,i),this._createWheelPickerDom(!0),s;"timePicker"===e&&void 0===t.footerLayout&&(o=this.options.timePicker.footerLayout),s=this._superApply(arguments),o&&(this.options.timePicker.footerLayout=o),"disabled"===e&&this._isIndependentInput()?(t&&this._hide(this._ON_CLOSE_REASON_CLOSE),this._triggerNode&&(this._triggerNode.find("."+this._TRIGGER_TIME_CLASS).attr("title",this._getTimeTitle()),kt(this._triggerNode[0].children,t))):"max"!==e&&"min"!==e||this._isContainedInDateTimePicker()?"readOnly"===e?(this._processReadOnlyKeyboardEdit(),t?this._hide(this._ON_CLOSE_REASON_CLOSE):null==this._wheelPicker&&(this._createWheelPicker(),this._isIndependentInput()&&(this._attachTrigger(),kt(this._triggerNode[0].children,this.options.disabled)),this._setupResizePopupBind()),this._AfterSetOptionDisabledReadOnly("readOnly",n.EditableValueUtils.readOnlyOptionOptions)):"keyboardEdit"===e&&this._processReadOnlyKeyboardEdit():(this._timePickerDefaultValidators[n.ValidatorFactory.VALIDATOR_TYPE_DATETIMERANGE]=Ht(this.options,this._GetConverter(),this._GetDefaultStyleClass()),this._AfterSetOptionValidators());return e in{max:!0,min:!0,converter:!0,timePicker:!0}&&this._createWheelPickerDom(),s},_destroy:function(){return this._cleanUpTimeResources(),this._super()},_clearWheelModels:function(){var e=this._timePickerModel;if(e){var t=e.getWheelModel("hour");t&&(t.wheel=void 0),(t=e.getWheelModel("minute"))&&(t.wheel=void 0),(t=e.getWheelModel("ampm"))&&(t.wheel=void 0)}},_destroyHammer:function(){if(this._wheelGroup&&this._wheelGroup.length)for(var e=this._wheelGroup[0].children,t=0;t<e.length;t++)e[t].ojDestroy()},_SetupResources:function(){return!0!==this.options.readOnly&&this._setupResizePopupBind(),this._super()},_setupResizePopupBind:function(){this._resizePopupBind=function(){$(".oj-timepicker-content",this._wheelPicker)[Nt?"removeClass":"addClass"]("oj-timepicker-fixedheight"),this._isIndependentInput()&&w.isComponentInitialized(this._popUpWheelPicker,"ojPopup")&&this._popUpWheelPicker.ojPopup("option","modality",Nt?"modeless":"modal")}.bind(this),window.addEventListener("resize",this._resizePopupBind,!1)},_ReleaseResources:function(){return this._IsCustomElement()&&this._cleanUpListeners(),this._super()},_cleanUpTimeResources:function(){this._isIndependentInput()&&(this.element.off("focus touchstart"),this._wrapper.off("touchstart")),this._triggerNode&&this._triggerNode.remove(),this._cleanUpListeners(),this._destroyHammer(),this._wheelPicker&&(this._wheelPicker.remove(),this._clearWheelModels()),this._isIndependentInput()&&this._popUpWheelPicker&&w.isComponentInitialized(this._popUpWheelPicker,"ojPopup")&&this._popUpWheelPicker.ojPopup("destroy")},_cleanUpListeners:function(){this._resizePopupBind&&window.removeEventListener("resize",this._resizePopupBind),window.removeEventListener("resize",Pt)},_processReadOnlyKeyboardEdit:function(){if(this._isIndependentInput()){var e=this.options.readOnly||this._isKeyboardEditDisabled();this.element.prop("readOnly",!!e)}},_isKeyboardEditDisabled:function(){return this.options.keyboardEdit===this._KEYBOARD_EDIT_OPTION_DISABLED},_AppendInputHelper:function(){this._isIndependentInput()&&this._superApply(arguments)},_onKeyDownHandler:function(e){if(this._isIndependentInput()){this._superApply(arguments);var t=$.ui.keyCode,i=!1;if(this._timepickerShowing())switch(e.keyCode){case t.TAB:this._hide(this._ON_CLOSE_REASON_TAB);break;case t.ESCAPE:this._hide(this._ON_CLOSE_REASON_CANCELLED),i=!0;break;case t.UP:case t.DOWN:this._wheelGroup.children().first().focus(),i=!0}else switch(e.keyCode){case t.UP:case t.DOWN:this._SetValue(this._GetDisplayValue(),e),this.show(),i=!0}if(i||e.keyCode===t.ENTER)return e.preventDefault(),e.stopPropagation(),!1}},_getTimeTitle:function(){return this._EscapeXSS(this.getTranslatedString("tooltipTime"+(this.options.disabled?"Disabled":"")))},_WrapElement:function(){this._inputContainer=this._superApply(arguments),this._inputContainer.attr({role:"presentation",tabindex:"-1"}),this.element.attr({role:"combobox","aria-haspopup":"true"})},_onElementFocus:function(){var e=this.options.timePicker.showOn;this._redirectFocusToInputContainer?(this._redirectFocusToInputContainer=!1,Ft(this)?this._inputContainer.focus():this._wheelGroup.children().first().focus()):"focus"===e?this.show():this._timepickerShowing()&&this._hide(this._ON_CLOSE_REASON_CLOSE)},_OnElementTouchStart:function(e){if(e.preventDefault(),"focus"===this.options.timePicker.showOn)if(this._timepickerShowing())this._ignoreShow=!0,this._hide(this._ON_CLOSE_REASON_CLOSE);else{var t=this.element[0]===document.activeElement;this.show(),this._redirectFocusToInputContainer=!0,Ft(this)&&t&&this._inputContainer.focus()}},_attachTrigger:function(){var e=this.options.timePicker.showOn,t=document.createElement("span");t.className=this._TRIGGER_CLASS;var i=document.createElement("span");i.setAttribute("title",this._getTimeTitle()),i.className=this._TRIGGER_TIME_CLASS+" oj-clickable-icon-nocontext oj-component-icon";var n=this;if(this.element.on("focus",$.proxy(this._onElementFocus,this)),this.element.on("touchstart",$.proxy(this._OnElementTouchStart,this)),this._wrapper.on("touchstart",function(){n._isMobile=!0}),"image"===e&&(i.style.display="block",this._IsRTL()?(this.element.css("border-top-left-radius",0),this.element.css("border-bottom-left-radius",0)):(this.element.css("border-top-right-radius",0),this.element.css("border-bottom-right-radius",0))),!Ft(this)){t.appendChild(i),i.addEventListener("click",function(){n._timepickerShowing()?n._hide(n._ON_CLOSE_REASON_CLOSE):(n.show(),n._wheelGroup.children().first().focus())});var o=$(i);this._AddHoverable(o),this._AddActiveable(o),this._triggerIcon=o}this._triggerNode=$(t),this.element[0].parentNode.insertBefore(t,this.element[0].nextElementSibling)},_getValue:function(){return this._isContainedInDateTimePicker()?this._datePickerComp.widget.getValueForInputTime():this.options.value},_onBlurHandler:function(e){this._isIndependentInput()&&this._superApply(arguments)},show:function(){this._timepickerShowing()||this.options.disabled||this.options.readOnly||(this._ignoreShow?this._ignoreShow=!1:Ft(this)?(this.element.blur(),this._showNativeTimePicker()):this._showWheelPicker())},_showNativeTimePicker:function(){var t={},i=$t(this._GetConverter(),{isoStrFormat:"offset"}),n=jt(i,this._getIsoDateValue(i));t.date=n,t.mode="time";var o=Gt(this.options.timePicker.timeIncrement);t.minuteInterval=0===o.hourIncr?o.minuteIncr:1;var s=this._isContainedInDateTimePicker()?this._datePickerComp.widget.options.min:this.options.min,r=this._isContainedInDateTimePicker()?this._datePickerComp.widget.options.max:this.options.max;if(s){var a=jt(i,le.IntlConverterUtils._minMaxIsoString(s,this._getIsoDateValue(i)));t.minDate=a.valueOf()}if(r){var l=jt(i,le.IntlConverterUtils._minMaxIsoString(r,this._getIsoDateValue(i)));t.maxDate=l.valueOf()}var u=this;this._nativePickerShowing=!0,window.datePicker.show(t,function(e){if(u._nativePickerShowing=!1,e){var t=$t(u._GetConverter(),{isoStrFormat:"offset"}),i=le.IntlConverterUtils._dateTime(u._getIsoDateValue(t),{hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds()}),n=u._GetConverter().format(i);u._SetValue(n,{})}u._onClose(u._ON_CLOSE_REASON_SELECTION)},function(t){u._nativePickerShowing=!1,t.startsWith("cancel")?u._onClose(u._ON_CLOSE_REASON_CANCELLED):e.log("Error: native time picker failed: "+t)})},hide:function(){return this._hide(this._ON_CLOSE_REASON_CLOSE)},_hide:function(e){return!Ft(this)&&this._timepickerShowing()&&(this._popUpWheelPicker.ojPopup("close"),this._onClose(e)),this},_onClose:function(e){this._isMobile&&"focus"===this.options.timePicker.showOn?(this._isIndependentInput()?this._inputContainer:this._datePickerComp.widget._inputContainer).focus():("focus"===this.options.timePicker.showOn&&(this._isIndependentInput()?this._ignoreShow=!0:this._datePickerComp.widget._ignoreShow=!0),this.element.focus())},refresh:function(){return this._triggerNode&&this._triggerNode.find("."+this._TRIGGER_TIME_CLASS).attr("title",this._getTimeTitle()),this._superApply(arguments)||this},_SetDisplayValue:function(e){this._isIndependentInput()&&this._superApply(arguments),this._timepickerShowing()&&this._createWheelPickerDom(!0)},_SetValue:function(e,t,i){var n=!1;if(this._isContainedInDateTimePicker())try{var o=$.oj.ojInputTime.prototype.options.converter,s=this._datePickerComp.widget,r=(t&&t.target&&t.target===this.element[0]&&!this._isDatePickerInline()?s._GetConverter():this._GetConverter()).parse(e),a=le.IntlConverterUtils,l=s.getValueForInputTime()||a.dateToLocalIso(new Date);if(r&&0===o.compareISODates(l,r))return!1;var u=a._copyTimeOver(r||a.dateToLocalIso(new Date),l);s.timeSelected(u,t),this._isDatePickerInline()&&(n=this._super(e,null,i))}catch(t){n=this._super(e,null,i)}else n=this._superApply(arguments);return n},_DoWrapElement:function(){return this._isIndependentInput()},_isIndependentInput:function(){return!this._isContainedInDateTimePicker()||this._isDatePickerInline()},_GetDefaultStyleClass:function(){return"oj-inputtime"},_GetElementValue:function(){return this.options.value||""},_GetImplicitSyncValidators:function(){var e=this._superApply(arguments);return null==this.options.min&&null==this.options.max||this._isContainedInDateTimePicker()||(this._timePickerDefaultValidators[n.ValidatorFactory.VALIDATOR_TYPE_DATETIMERANGE]=Ht(this.options,this._GetConverter(),this._GetDefaultStyleClass())),$.extend(this._timePickerDefaultValidators,e)},_GetConverter:function(){return this.options.converter?this._superApply(arguments):$.oj.ojInputTime.prototype.options.converter},_isContainedInDateTimePicker:function(){return null!==this._datePickerComp},_isDatePickerInline:function(){return this._datePickerComp.inline},_NotifyDetached:function(){this._hide(this._ON_CLOSE_REASON_CLOSE),this._superApply(arguments)},_NotifyHidden:function(){this._hide(this._ON_CLOSE_REASON_CLOSE),this._superApply(arguments)},_generateHeader:function(){var e=this._EscapeXSS(this.getTranslatedString("cancelText")),t="<a role='button' onclick='return false;' href='#' class='oj-enabled oj-default oj-timepicker-cancel-button' aria-label='"+e+"'>"+e+"</a>",i=this._EscapeXSS(this.getTranslatedString("okText")),n="<a role='button' onclick='return false;' href='#' class='oj-enabled oj-default oj-timepicker-ok-button' aria-label='"+i+"'>"+i+"</a>",o="<div class='oj-timepicker-header"+(this.options.disabled?" oj-disabled ":" oj-enabled oj-default ")+"'>";return o+=t,o+=n,o+="</div>"},_generateFooter:function(e,t){var i="",n="<a role='button' onclick='return false;' href='#' class='oj-timepicker-now oj-priority-secondary oj-enabled'>"+this._EscapeXSS(this.getTranslatedString("currentTimeText"))+"</a>";if(e&&e.length>1){var o=0,s=[{index:e.indexOf("now"),content:t?n:""}];for(s.sort(function(e,t){return e.index-t.index});o<s.length&&s[o].index<0;)o+=1;for(;o<s.length;)i+=s[o].content,o+=1;i.length>0&&(i="<div class='oj-timepicker-footer'>"+i+"</div>")}return i},_getIsoDateLimit:function(e,t,i){var n=this._isContainedInDateTimePicker()?this._datePickerComp.widget.options[t]:this.options[t],o=(n=(n=n?le.IntlConverterUtils._minMaxIsoString(n,this._getValue()):n)?e.parse(n):n)?le.IntlConverterUtils._clearTime(n):null;return i&&o&&i.substring(0,i.indexOf("T"))!==o.substring(0,o.indexOf("T"))&&(n=null),n},_getIsoDateValue:function(e){var t=this._getValue();return t||((t=new Date).setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t=le.IntlConverterUtils.dateToLocalIso(t)),t=e.parse(t)},_getAmPmStrings:function(){var e=le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({pattern:"a"});return[e.format("2016-01-01T01:00:00Z"),e.format("2016-01-01T13:00:00Z")]},_getWheelPickerContent:function(e){return e?$(e.find(".oj-timepicker-content")[0]):null},_createWheelPickerDom:function(t){var i=$.oj.ojInputTime.prototype.options.converter;if(null!=this._wheelPicker){t||this._detachWheelHandler();var o=this._wheelPicker,s=this._getWheelPickerContent(o);this._destroyHammer(),t?$(".oj-timepicker-wheel-group",s).remove():s.empty();var r=this._GetConverter(),a=r.resolvedOptions(),l=$.extend({},a);if("zulu"===l.isoStrFormat)l.isoStrFormat="offset",l=(r=le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter(l)).resolvedOptions();var u=le.IntlConverterUtils,d=this._getValue(),h=new Date;d||(d=le.IntlConverterUtils.dateToLocalIso(h));var c=this._validateTime(d,{month:h.getMonth(),date:h.getDate(),fullYear:h.getFullYear(),hours:h.getHours(),minutes:h.getMinutes(),seconds:h.getSeconds()});d=r.parse(c);var p=u._clearTime(d),_=this._getIsoDateLimit(r,"min",p),m=this._getIsoDateLimit(r,"max",p),g=this.options.timePicker.footerLayout,f=new function(t){var i,n,o,s=/^.*T(\d{2})(?::?(\d{2}).*$)/,r=720,a={h:function(e){if(0===e)return"12";return""+e},hh:function(e){if(0===e)return"12";return(e="0"+e).slice(-2)},H:function(e){return""+e},HH:I,k:function(e){if(0===e)return"24";return""+e},kk:function(e){if(0===e)return"24";return(e="0"+e).slice(-2)},K:function(e){return""+e},KK:function(e){return(e="0"+e).slice(-2)},mm:O},l={h:R,hh:R,H:w,HH:w,k:x,kk:x,K:w,KK:w,mm:w},u=0,d=0,h=0,c=1440,p=1440,_="auto",m="",g=["AM","PM"],f=new Yt(this,{valueRange:60,displayRange:60,valueMultiplier:1,displayMultiplier:1}),v=new Yt(this,{valueMultiplier:60,displayMultiplier:1}),y=new Yt(this,{valueRange:2,displayRange:2,formatter:function(e){return g[e]},parser:function(e){if("a"===(e=e.toLowerCase().charAt()))return 0;if("p"===e)return 1;return-1},valueMultiplier:r,displayMultiplier:1}),b=[f,v,y],C=!1,S=this;function E(){try{if(C=!0,t)for(var e=Object.key(t),i=0;i<e.length;i++){var n=e[i];S[n]=t[n]}}finally{C=!1,T()}}function T(){if(!C){if(h=Math.ceil(d/i)*i,(p=Math.ceil((c-1)/i)*i)<h)throw new Error("Invalid min and max settings with current increment: "+d+" "+c+ +i);var e,t;if(u<h&&(u=h),u>p&&(u=p),u=Math.round(u/i)*i,o)switch(v.displayRange=12,"auto"===(e=_)&&((t=L(i,60))===i||60===t?e="hoursMeridiem":(t=L(i,r),e="all")),e){case"all":f.displayMultiplier=1,f.valueMultiplier=1,f.valueRange=1440,f.linked=!0,v.displayMultiplier=60,v.valueMultiplier=1,v.valueRange=1440,v.linked=!0,y.displayMultiplier=1,y.valueMultiplier=720,y.valueRange=2,y.linked=!0;break;case"hoursMeridiem":f.displayMultiplier=1,f.valueMultiplier=1,f.valueRange=60,f.linked=!1,v.displayMultiplier=1,v.valueMultiplier=60,v.valueRange=24,v.linked=!0,y.displayMultiplier=1,y.valueMultiplier=720,y.valueRange=2,y.linked=!0}else switch(v.displayRange=24,"auto"===(e=_)&&(t=L(i,60),e=t===i||60===t?"none":"all"),e){case"none":case"hoursMeridiem":f.displayMultiplier=1,f.valueMultiplier=1,f.valueRange=60,f.linked=!1,v.displayMultiplier=1,v.valueMultiplier=60,v.valueRange=24,v.linked=!1;break;case"all":case"hoursMinutes":f.displayMultiplier=1,f.valueMultiplier=1,f.valueRange=1440,f.linked=!0,v.displayMultiplier=60,v.valueMultiplier=1,v.valueRange=1440,v.linked=!0}for(var n=0;n<b.length;n++)b[n].refresh()}}function D(e){var t=s.exec(e),i=parseInt(t[1],10),n=parseInt(t[2],10);return 60*i+n}function A(e){e=Math.floor(e);var t=Math.floor(e/60);return e%=60,"T"+I(t)+":"+O(e)}function I(e){return(e="0"+e).slice(-2)}function O(e){return(e="0"+e).slice(-2)}function w(e){return e.match(/^\d+$/)?parseInt(e,10):-1}function R(e){if(e.match(/^\d+$/)){var t=parseInt(e,10);return 0===t&&(t=-1),24===t&&(t=0),t}return-1}function x(e){if(e.match(/^\d+$/)){var t=parseInt(e,10);return 0===t&&(t=-1),24===t&&(t=0),t}return-1}function L(e,t){return 0===t?e:L(t,e%t)}C=!0,Object.defineProperty(S,"increment",{enumerable:!0,get:function(){return i},set:function(e){i=Math.floor(e),T()}}),S.increment=1,Object.defineProperty(S,"grouped",{enumerable:!0,get:function(){return _},set:function(e){switch(e){case"auto":case"all":case"none":case"hoursMinutes":case"hoursMeridiem":_=e;break;default:throw new Error("invalid grouped value: "+e)}T()}}),Object.defineProperty(S,"min",{enumerable:!0,get:function(){return d},set:function(e){d=Math.floor(e),T()}}),Object.defineProperty(S,"isoMin",{enumerable:!0,get:function(){return A(d)},set:function(t){var i=D(t);isNaN(i)?e.error("Invalid ISO min time: %s",t):S.min=i}}),Object.defineProperty(S,"max",{enumerable:!0,get:function(){return c-1},set:function(e){c=Math.floor(e)+1,T()}}),Object.defineProperty(S,"isoMax",{enumerable:!0,get:function(){return A(c)},set:function(t){var i=D(t);isNaN(i)?e.error("Invalid ISO max time: %s",t):S.max=i}}),Object.defineProperty(S,"value",{enumerable:!0,get:function(){return u},set:function(e){u=Math.floor(e),T()}}),Object.defineProperty(S,"isoValue",{enumerable:!0,get:function(){return A(u)},set:function(t){var i=D(t);isNaN(i)?e.error("Invalid ISO value time: %s",t):S.value=i}}),Object.defineProperty(S,"format",{enumerable:!0,get:function(){return n},set:function(e){n=e;var t=e.replace(/'[^']*'/g,"").replace(/[^hHkKma]*/g,""),i=t.match(/([hHkK]+)/),s=i[1];v.formatter=a[s],v.parser=l[s];var r=(i=t.match(/(m+)/))[1];f.formatter=a[r],f.parser=l[r],o=m.indexOf("a")>=0,T()}}),Object.defineProperty(S,"wheelOrder",{enumerable:!0,get:function(){return m},set:function(e){m=e}}),Object.defineProperty(S,"ampmStrings",{enumerable:!0,get:function(){return g},set:function(e){g=e}}),C=!1,S.setProperties=E,E(),S.getWheelModel=function(e){switch(e){case"hour":return v;case"minute":return f;case"ampm":return o?y:null;default:return}}}(null);this._timePickerModel=f;for(var v=["","","",""],y=i._getTimePositioning(a),b=Object.keys(y),C=0;C<b.length;C++){var S=b[C];v[y[S]]=S}f.wheelOrder=v.filter(function(e){return!!e}).join("");var E=l.pattern||l.patternFromOptions;E?f.format=E:(E=(l=i.resolvedOptions()).pattern||l.patternFromOptions,f.format=E),f.ampmStrings=this._getAmPmStrings();var T=this.options.timePicker.timeIncrement;if(T){var D=Gt(T);f.increment=60*D.hourIncr+D.minuteIncr}try{f.isoValue=this._getIsoDateValue(r)}catch(t){f.isoValue=i.parse(c),e.info("The value of the InputTime element should be an ISOString, please use a valid ISOString")}_&&(f.isoMin=_),m&&(f.isoMax=m),!this._isIndependentInput()||t&&0!==$(".oj-timepicker-header",s).length||s.append($(this._generateHeader(o))),this._wheelGroup=$(function(t){var i,n=37,o=39,s=[];return(i=document.createElement("div")).classList.add("oj-timepicker-wheel-group"),i.ojRefresh=u,i.addEventListener("keydown",r,!1),u(),i;function r(e){var t=e.target,i=e.keyCode;switch(i){case n:$(t).prev().focus();break;case o:$(t).next().focus()}}function a(e){var t=e.target;if(t.ojLinked())for(var i=0;i<s.length;i++)s[i].ojLinked()&&s[i].classList.add("oj-active");else t.classList.add("oj-active")}function l(){for(var e=0;e<s.length;e++)s[e].classList.remove("oj-active")}function u(){for(var n=i.firstChild;n;)n.ojDestroy(),i.removeChild(n),n=i.firstChild;s=[],function(){var n,o,r=t.wheelOrder,u=Kt(t.getWheelModel("hour"),!0,"oj-timepicker-hour"),d=Kt(t.getWheelModel("minute"),!0,"oj-timepicker-minute");r.indexOf("a")>=0&&(n=t.getWheelModel("ampm"),o=Kt(n,!1,"oj-timepicker-meridian"));var h,c=r.split("");for(h=0;h<c.length;h++)switch(c[h]){case"h":s.push(u);break;case"m":s.push(d);break;case"a":s.push(o);break;default:e.error("Unknown wheelOrder code: %s",c[h])}for(h=0;h<s.length;h++){var p=s[h];p.addEventListener("focus",a,!1),p.addEventListener("blur",l,!1),i.appendChild(p)}}()}}(f)),this._isIndependentInput()?this._wheelGroup.insertAfter($(".oj-timepicker-header",s)):s.append(this._wheelGroup),t&&0!==$(".oj-timepicker-footer",s).length||s.append($(this._generateFooter(g,h))),s.find(".oj-timepicker-hour").attr("aria-label",this.getTranslatedString("hourWheelLabel")),s.find(".oj-timepicker-minute").attr("aria-label",this.getTranslatedString("minuteWheelLabel")),s.find(".oj-timepicker-meridian").attr("aria-label",this.getTranslatedString("ampmWheelLabel")),t||this._attachWheelHandler()}},_detachWheelHandler:function(){this._wheelPicker.find(".oj-timepicker-now").off("click"),this._isIndependentInput()?(this._wheelPicker.find(".oj-timepicker-cancel-button").off("click"),this._wheelPicker.find(".oj-timepicker-ok-button").off("click"),this._wheelPicker.off("keydown")):this._wheelPicker.find(".oj-timepicker-wheel").off("blur")},_attachWheelHandler:function(){var e=this;if(this._wheelPicker.find(".oj-timepicker-now").on("click",function(t){var i=le.IntlConverterUtils.dateToLocalIso(new Date);i=e._GetConverter().parse(i),e._timePickerModel.isoValue=i,e._isIndependentInput()||e._SetValue(e._timePickerModel.isoValue,t),t.preventDefault()}),!this._isIndependentInput())return this._wheelPicker.find(".oj-timepicker-wheel").on("blur",function(t){e._SetValue(e._timePickerModel.isoValue,t)}),this._datePickerComp.widget._togglePicker(),void this._wheelGroup.children().first().focus();this._wheelPicker.find(".oj-timepicker-cancel-button").on("click",function(t){t.preventDefault(),e._hide(e._ON_CLOSE_REASON_CANCELLED)}),this._wheelPicker.find(".oj-timepicker-ok-button").on("click",function(t){e._hide(e._ON_CLOSE_REASON_SELECTION),e._SetValue(e._timePickerModel.isoValue,t),t.preventDefault()}),this._wheelPicker.on("keydown",function(t){t.keyCode===$.ui.keyCode.ESCAPE&&(t.preventDefault(),e._hide(e._ON_CLOSE_REASON_CANCELLED))})},_showWheelPicker:function(){this._createWheelPickerDom();var e=this._popUpWheelPicker;if(e)if(Nt){var t=n.PositionUtils.normalizeHorizontalAlignment({my:"start top",at:"start bottom",of:this.element,collision:"flipfit flipfit"},this._IsRTL());e.ojPopup("open",this.element.parent(),t)}else e.ojPopup("open",this.element.parent(),{my:{horizontal:"center",vertical:"bottom"},at:{horizontal:"center",vertical:"bottom"},of:window,collision:"flipfit flipfit"}),this._wheelGroup.children().first().focus()},getNodeBySubId:function(e){var t=null,i=e&&e.subId,n=this._wheelPicker,o=this._getWheelPickerContent(n);if(i)switch(i){case"oj-inputdatetime-time-icon":t=$(".oj-inputdatetime-time-icon",this._triggerNode)[0];break;case"oj-inputdatetime-time-input":t=this.element[0];break;case"oj-timepicker-content":t=o?o[0]:null;break;case"oj-timepicker-cancel-button":t=$(".oj-timepicker-cancel-button",n)[0];break;case"oj-timepicker-ok-button":t=$(".oj-timepicker-ok-button",n)[0];break;case"oj-timepicker-hour":t=$(".oj-timepicker-hour",n)[0];break;case"oj-timepicker-minute":t=$(".oj-timepicker-minute",n)[0];break;case"oj-timepicker-meridian":t=$(".oj-timepicker-meridian",n)[0];break;case"oj-timepicker-now":t=$(".oj-timepicker-now",n)[0];break;default:t=null}return t||this._superApply(arguments)},getSubIdByNode:function(e){var t=$(".oj-inputdatetime-time-icon",this._triggerNode),i=null,n=this._wheelPicker,o=this._getWheelPickerContent(n),s=[{selector:".oj-timepicker-cancel-button",ele:n},{selector:".oj-timepicker-ok-button",ele:n},{selector:".oj-timepicker-hour",ele:n},{selector:".oj-timepicker-minute",ele:n},{selector:".oj-timepicker-meridian",ele:n},{selector:".oj-timepicker-now",ele:n}];if(e===t[0])i="oj-inputdatetime-time-icon";else if(e===this.element[0])i="oj-inputdatetime-time-input";else if(o&&e===o[0])i="oj-timepicker-content";else for(var r=0;r<s.length;r++){var a=s[r],l=$(a.selector,a.ele);if(1===l.length&&l[0]===e){i=a.selector.substr(1);break}}return i||this._superApply(arguments)},widget:function(){return this._isIndependentInput()?this._super():this._datePickerComp.widget.widget()}}),w.setDefaultOptions({ojInputTime:{renderMode:w.createDynamicPropertyGetter(function(){return(_.parseJSONFromFontFamily("oj-inputdatetime-option-defaults")||{}).renderMode}),keyboardEdit:w.createDynamicPropertyGetter(function(){return(_.parseJSONFromFontFamily("oj-inputdatetime-option-defaults")||{}).keyboardEdit}),timePicker:w.createDynamicPropertyGetter(function(){return(_.parseJSONFromFontFamily("oj-inputdatetime-option-defaults")||{}).timePicker})}}),Kt.counter=0;var Wt=$.oj.ojInputDate.prototype.options.converter,qt=$.oj.ojInputTime.prototype.options.converter;n.__registerWidget("oj.ojInputDateTime",$.oj.ojInputDate,{widgetEventPrefix:"oj",_WIDGET_CLASS_NAMES:"oj-inputdatetime-date-time oj-component oj-inputdatetime",_INPUT_HELPER_KEY:"inputHelpBoth",_TRIGGER_CALENDAR_CLASS:"oj-inputdatetime-calendar-clock-icon",options:{converter:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}),renderMode:"jet",timePicker:{footerLayout:"",timeIncrement:"00:05:00:00",showOn:"focus"}},_InitBase:function(){this._super(),this._timePickerElement=this.element,this._timePicker=null,this._timeConverter=null,this._previousValue=null,this._switcherDiv=null,this._switcherPrevValue=null,this._switcherPrevDay=null,this._switcherPrevMonth=null,this._switcherPrevYear=null,this._switcherDateValue=null,this._switcherTimeValue=null,this._dateTimeSwitcherActive=null,this._isInLine||!0!==this.options.readOnly&&this._createSwitcherDiv()},_createSwitcherDiv:function(){this._switcherDiv=$(this._generateSwitcher()),this._popUpDpDiv.ojPopup("widget")[0].querySelector(".oj-popup-content").appendChild(this._switcherDiv[0]);var e=this;this._popUpDpDiv.on("ojclose",function(){null===e._switcherDateValue&&null===e._switcherTimeValue||(e._currentDay=e._switcherPrevDay,e._currentMonth=e._switcherPrevMonth,e._drawMonth=e._currentMonth,e._currentYear=e._switcherPrevYear,e._drawYear=e._currentYear,e._SetValue(e._switcherPrevValue),e._switcherTimeValue=null,e._switcherDateValue=null,e._switcherPrevDay=null,e._switcherPrevMonth=null,e._switcherPrevYear=null,e._switcherPrevValue=null)}),this._switcherDiv.find("[data-handler]").map(function(){var t={switchMe:function(t){var i=t.keyCode;if("keydown"===t.type&&($.ui.keyCode.ENTER===i||$.ui.keyCode.SPACE===i)||"click"===t.type)return e._isShowingDatePickerSwitcher()?(e.show(),e._placeFocusOnCalendar()):e._timePicker.ojInputTime("show"),!1},switchDone:function(t){var i=t.keyCode;if("keydown"===t.type&&($.ui.keyCode.ENTER===i||$.ui.keyCode.SPACE===i)||"click"===t.type){var n=e._getDateIso();e._switcherDateValue&&(n=e._switcherDateValue),e._switcherTimeValue&&(n=le.IntlConverterUtils._copyTimeOver(e._switcherTimeValue,n));var o=e._GetConverter().format(n);return e._SetDisplayValue(o),e._SetValue(o,{}),e._switcherTimeValue=null,e._switcherDateValue=null,e._switcherPrevDay=null,e._switcherPrevMonth=null,e._switcherPrevYear=null,e._switcherPrevValue=null,e._hide(e._ON_CLOSE_REASON_SELECTION),!1}},switchCancel:function(t){var i=t.keyCode;if("keydown"===t.type&&($.ui.keyCode.ENTER===i||$.ui.keyCode.SPACE===i)||"click"===t.type)return e._hide(e._ON_CLOSE_REASON_CANCELLED),!1}};$(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_setupSwitcherButtons:function(){var e=this._switcherDiv.find("a");this._AddHoverable(e),this._AddActiveable(e)},_ComponentCreate:function(){var e=this._super(),t=null;try{t=this._getTimePickerConverter(this._GetConverter())}catch(e){}if(null===t)throw new Error("Please use ojInputDate if your converter doesn't specify a time format.");if(this._isInLine){var i=$("<input type='text'>");i.insertAfter(this.element),this._timePickerElement=i,this._createTimePicker()}else!0!==this.options.readOnly&&(this._setupSwitcherButtons(),this._createTimePicker());return e},_createTimePicker:function(){for(var e=["title","placeholder","disabled","required","readOnly","keyboardEdit","pickerAttributes"],t={},i=0,n=e.length;i<n;i++)t[e[i]]=this.options[e[i]];var o=this.options.displayOptions.messages,s=this.options.timePicker;this._isInLine||$.extend(s,{footerLayout:"now"});var r=this._formatValueWithTimeConverter(this.options.value);this._timePicker=this._timePickerElement.ojInputTime($.extend(t,{converter:this._timeConverter,displayOptions:{converterHint:"none",title:"none",messages:o},value:r,timePicker:s,datePickerComp:{widget:this,inline:this._isInLine}}))},_AfterCreate:function(){var e=this._superApply(arguments);return this._dateTimeSwitcherActive=!Ft(this)&&this._timePicker&&!this._isInLine,e},_setOption:function(e,t,i){var n=this._superApply(arguments);if("value"===e){var o=this._formatValueWithTimeConverter(this.options.value);this._previousValue=o}else"readOnly"===e&&(this._isInLine||t||null!=this._switcherDiv||(this._createSwitcherDiv(),this._setupSwitcherButtons(),this._createTimePicker()));if(this._timePicker){e in{disabled:!0,readOnly:!0,keyboardEdit:!0}?this._timePicker.ojInputTime("option",e,t):"timePicker"===e?this._timePicker.ojInputTime("option","timePicker.timeIncrement",t.timeIncrement):"converter"===e&&(this._timeConverter=null,this._timePicker.ojInputTime("option",e,this._getTimePickerConverter(this._GetConverter())))}return n},_destroy:function(){return this._cleanUpDateTimeResources(),this._super()},_cleanUpDateTimeResources:function(){if(this._timePicker&&this._timePicker.ojInputTime("destroy"),this._isInLine)this._timePickerElement.remove();else if(this._switcherDiv){var e=this._switcherDiv.find("a");this._RemoveActiveable(e),this._RemoveHoverable(e),this._switcherDiv.remove()}},_formatValueWithTimeConverter:function(t){var i=t;try{this._getTimePickerConverter(this._GetConverter()).format(t)}catch(t){e.info("The value of the InputDateTime element should be an ISOString, please use a valid ISOString"),i=this._getDefaultIsoDate()}return i},_GetCalendarTitle:function(){return this._EscapeXSS(this.getTranslatedString("tooltipCalendarTime"+(this.options.disabled?"Disabled":"")))},_generateSwitcher:function(){var e=document.createElement("div");e.className="oj-datetimepicker-switcher";var t=document.createElement("div");t.setAttribute("data-handler","switchMe"),t.setAttribute("data-event","click keydown");var i=document.createElement("div");return i.className="oj-inputdatetime-time-icon oj-clickable-icon-nocontext oj-component-icon oj-enabled oj-default",t.appendChild(i),(i=document.createElement("a")).setAttribute("onclick","return false;"),i.setAttribute("href","#"),i.className="oj-enabled oj-datetimepicker-switcher-text",i.setAttribute("role","button"),t.appendChild(i),e.appendChild(t),(t=document.createElement("div")).className="oj-datetimepicker-switcher-buttons",(i=document.createElement("a")).setAttribute("onclick","return false;"),i.setAttribute("href","#"),i.className="oj-enabled",i.setAttribute("data-handler","switchDone"),i.setAttribute("data-event","click keydown"),i.setAttribute("role","button"),i.textContent=this._EscapeXSS(this.getTranslatedString("done")),t.appendChild(i),(i=document.createElement("a")).setAttribute("onclick","return false;"),i.setAttribute("href","#"),i.className="oj-enabled",i.setAttribute("data-handler","switchCancel"),i.setAttribute("data-event","click keydown"),i.setAttribute("role","button"),i.textContent=this._EscapeXSS(this.getTranslatedString("cancel")),t.appendChild(i),e.appendChild(t),e},_updateSwitcherText:function(){var e="";if(this._isShowingDatePickerSwitcher())try{e=Wt.format(this._switcherDateValue||this._getDateIso())}catch(t){e=Wt.format(this._getDefaultIsoDate())}else try{e=qt.format(this._switcherTimeValue||this._getDateIso())}catch(t){e=qt.format(this._getDefaultIsoDate())}$(".oj-datetimepicker-switcher-text",this._switcherDiv).text(e)},_isShowingDatePickerSwitcher:function(){return!this._switcherDiv||0===$(".oj-inputdatetime-time-icon",this._switcherDiv).length},_togglePicker:function(){var e,t,i,n,o,s=this._switcherDiv,r=!this._isShowingDatePickerSwitcher();r?(n="oj-inputdatetime-calendar-icon",i="oj-inputdatetime-time-icon",o="Set Date"):(n="oj-inputdatetime-time-icon",i="oj-inputdatetime-calendar-icon",o="Set Time");var a=$(s.children()[0]).children();$(a[0]).removeClass(i).addClass(n),$(a[1]).text(o),(a=$(".oj-popup-content",this._popUpDpDiv.ojPopup("widget")).children())[0].classList.contains("oj-datepicker-popup")?(e=$(a[0]),t=$(a[1])):(e=$(a[1]),t=$(a[0])),r?(e.css("display","none"),t.css("display","block")):(t.css("display","none"),e.css("display","block")),this._updateSwitcherText()},_getTimePickerConverter:function(e){return null!==this._timeConverter?this._timeConverter:(this._timeConverter=$t(e),this._timeConverter)},timeSelected:function(e,t){if(this._dateTimeSwitcherActive)this._switcherTimeValue=e;else{var i=this._GetConverter().format(e);this._SetDisplayValue(i),this._SetValue(i,t)}},getValueForInputTime:function(){var e=null;if(this.isValid())e=this.options.value;else if(this._previousValue)try{e=this._GetConverter().parse(this._previousValue)}catch(t){e=this.options.value}else e=null;return this._isDateTimeSwitcher()&&(e=this._switcherDateValue||e,this._switcherTimeValue&&e&&(e=le.IntlConverterUtils._copyTimeOver(this._switcherTimeValue,e))),e},_SetValue:function(e,t,i){var n=this._superApply(arguments);return this._previousValue=e,n},_SetDisplayValue:function(e){if(this._isInLine){var t=!(this._isInLine&&this._timePicker&&this._timePicker[0]===document.activeElement);this._updateDatepicker(t)}else this._superApply(arguments),this._updateSwitcherText();this._switcherTimeValue=null},_onKeyDownHandler:function(e){var t=$.ui.keyCode,i=!1;switch(e.keyCode){case t.UP:case t.DOWN:e.shiftKey&&(this._SetValue(this._GetDisplayValue(),e),this._timePicker.ojInputTime("show"),i=!0)}return i?(e.preventDefault(),e.stopPropagation(),!1):this._superApply(arguments)},show:function(){return this._isShowingDatePickerSwitcher()&&this._togglePicker(),this._super()},_ShowNativeDatePicker:function(e){e.mode="datetime";var t=Gt(this.options.timePicker.timeIncrement);return e.minuteInterval=0===t.hourIncr?t.minuteIncr:1,this._super(e)},_OnDatePicked:function(e){if(this._nativePickerShowing=!1,e){var t;t=this._validateDatetime(this._getDateIso(),{month:e.getMonth(),date:e.getDate(),fullYear:e.getFullYear(),hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds()});var i=this._GetConverter().format(t);this._SetValue(i,{})}this._onClose(this._ON_CLOSE_REASON_SELECTION)},_ShowHTMLDatePicker:function(){var e=this._superApply(arguments);return this._switcherPrevValue=this.options.value?this._getDateIso():"",this._switcherPrevDay=this._currentDay,this._switcherPrevMonth=this._currentMonth,this._switcherPrevYear=this._currentYear,this._updateSwitcherText(),e},showTimePicker:function(){this._datepickerShowing()||this.show(),this._isShowingDatePickerSwitcher()||this._timePicker.ojInputTime("show")},hideTimePicker:function(){return this.hide()},refresh:function(){var e=this._superApply(arguments)||this;return this._timePicker&&this._timePicker.ojInputTime("refresh"),this._switcherDiv&&($("a[data-handler='switchDone']",this._switcherDiv).text(this.getTranslatedString("done")),$("a[data-handler='switchCancel']",this._switcherDiv).text(this.getTranslatedString("cancel"))),e},getNodeBySubId:function(e){var t=e&&e.subId,i=null;return t&&(i="oj-inputdatetime-date-input"===t?this._isInLine?this._timePickerElement[0]:this.element[0]:"oj-inputdatetime-calendar-clock-icon"===t?$(".oj-inputdatetime-calendar-clock-icon",this._triggerNode)[0]:this._timePicker?this._timePicker.ojInputTime("getNodeBySubId",e):null),i||this._superApply(arguments)},getSubIdByNode:function(e){var t=null;return this._isInLine?e===this._timePickerElement[0]&&(t="oj-inputdatetime-date-input"):e===this.element[0]?t="oj-inputdatetime-date-input":e===$(".oj-inputdatetime-calendar-clock-icon",this._triggerNode)[0]&&(t="oj-inputdatetime-calendar-clock-icon"),t||(this._timePicker?this._timePicker.ojInputTime("getSubIdByNode",e):null)||this._superApply(arguments)},_GetConverter:function(){return this.options.converter?this._superApply(arguments):$.oj.ojInputDateTime.prototype.options.converter},_NotifyDetached:function(){this._timePicker&&this.hideTimePicker(),this._superApply(arguments)},_NotifyHidden:function(){this._timePicker&&this.hideTimePicker(),this._superApply(arguments)},_GetMessagingLauncherElement:function(){return this._isInLine?this._timePickerElement:this._super()},_GetDefaultStyleClass:function(){return"oj-inputdatetime"},_GetTranslationsSectionName:function(){return"oj-ojInputDate"}}),Rt.extension._WIDGET_NAME="ojInputTime",Rt.extension._INNER_ELEM="input",Rt.extension._GLOBAL_TRANSFER_ATTRS=["accesskey","aria-label","tabindex"],Rt.extension._ALIASED_PROPS={readonly:"readOnly"},n.CustomElementBridge.register("oj-input-time",{metadata:Rt}),function(){Ot.extension._WIDGET_NAME="ojInputDate",Ot.extension._INNER_ELEM="input",Ot.extension._GLOBAL_TRANSFER_ATTRS=["accesskey","aria-label","tabindex"],Ot.extension._ALIASED_PROPS={readonly:"readOnly"},n.CustomElementBridge.register("oj-input-date",{metadata:Ot});var e=n.CollectionUtils.copyInto({},Ot,void 0,!0);e.extension._INNER_ELEM="div",n.CustomElementBridge.register("oj-date-picker",{metadata:e})}(),function(){wt.extension._WIDGET_NAME="ojInputDateTime",wt.extension._INNER_ELEM="input",wt.extension._GLOBAL_TRANSFER_ATTRS=["accesskey","aria-label","tabindex"],wt.extension._ALIASED_PROPS={readonly:"readOnly"},n.CustomElementBridge.register("oj-input-date-time",{metadata:wt});var e=n.CollectionUtils.copyInto({},wt,void 0,!0);e.extension._INNER_ELEM="div",n.CustomElementBridge.register("oj-date-time-picker",{metadata:e})}();var Xt={properties:{accessibility:{type:"object",properties:{rowHeader:{type:"string"}}},as:{type:"string",value:""},columns:{type:"Array<Object>",writeback:!0},columnsDefault:{type:"object",properties:{className:{type:"string"},field:{type:"string"},footerClassName:{type:"string"},footerRenderer:{type:"function"},footerStyle:{type:"string"},footerTemplate:{type:"string"},headerClassName:{type:"string"},headerRenderer:{type:"function"},headerStyle:{type:"string"},headerTemplate:{type:"string"},headerText:{type:"string"},renderer:{type:"function"},resizable:{type:"string",enumValues:["disabled","enabled"],value:"disabled"},sortProperty:{type:"string"},sortable:{type:"string",enumValues:["auto","disabled","enabled"],value:"auto"},style:{type:"string"},template:{type:"string"},width:{type:"number"}}},currentRow:{type:"object",writeback:!0},data:{type:"oj.DataProvider|oj.TableDataSource"},display:{type:"string",enumValues:["grid","list"],value:"list"},dnd:{type:"object",properties:{drag:{type:"object",properties:{rows:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragStart:{type:"function"},drag:{type:"function"},dragEnd:{type:"function"}}}}},drop:{type:"object",properties:{columns:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragOver:{type:"function"},dragLeave:{type:"function"},drop:{type:"function"}}},rows:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragOver:{type:"function"},dragLeave:{type:"function"},drop:{type:"function"}}}}},reorder:{type:"object",properties:{columns:{type:"string",enumValues:["disabled","enabled"],value:"disabled"}}}}},editMode:{type:"string",enumValues:["none","rowEdit"],value:"none"},firstSelectedRow:{type:"object",writeback:!0,readOnly:!0,value:{key:null,data:null}},horizontalGridVisible:{type:"string",enumValues:["auto","disabled","enabled"],value:"auto"},rowRenderer:{type:"function"},scrollPolicy:{type:"string",enumValues:["auto","loadMoreOnScroll"],value:"auto"},scrollPolicyOptions:{type:"object",properties:{fetchSize:{type:"number",value:25},maxCount:{type:"number",value:500}}},scrollPosition:{type:"object",writeback:!0,value:{x:0,y:0},properties:{x:{type:"number"},y:{type:"number"},columnIndex:{type:"number"},rowIndex:{type:"number"},columnKey:{type:"any"},rowKey:{type:"any"},offsetX:{type:"number"},offsetY:{type:"number"}}},selection:{type:"Array<Object>",writeback:!0,value:[]},selectionMode:{type:"Object<string, string>",properties:{column:{type:"string",enumValues:["multiple","single"]},row:{type:"string",enumValues:["multiple","single"]}}},selectionRequired:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{labelAccSelectionAffordanceBottom:{type:"string"},labelAccSelectionAffordanceTop:{type:"string"},labelDisableNonContiguousSelection:{type:"string"},labelEditRow:{type:"string"},labelEnableNonContiguousSelection:{type:"string"},labelResize:{type:"string"},labelResizePopupSpinner:{type:"string"},labelResizePopupSubmit:{type:"string"},labelSelectAndEditRow:{type:"string"},labelSelectColum:{type:"string"},labelSelectRow:{type:"string"},labelSort:{type:"string"},labelSortAsc:{type:"string"},labelSortDsc:{type:"string"},msgColumnResizeWidthValidation:{type:"string"},msgFetchingData:{type:"string"},msgInitializing:{type:"string"},msgNoData:{type:"string"},msgScrollPolicyMaxCountDetail:{type:"string"},msgScrollPolicyMaxCountSummary:{type:"string"},msgStatusSortAscending:{type:"string"},msgStatusSortDescending:{type:"string"}}},verticalGridVisible:{type:"string",enumValues:["auto","disabled","enabled"],value:"auto"}},methods:{getContextByNode:{},getDataForVisibleRow:{},refresh:{},refreshRow:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{},ojBeforeCurrentRow:{},ojBeforeRowEdit:{},ojBeforeRowEditEnd:{},ojSort:{}},extension:{}};n.__registerWidget("oj.ojTable",$.oj.baseComponent,{version:"1.0.0",defaultElement:"<table>",widgetEventPrefix:"oj",options:{accessibility:null,animateStart:null,animateEnd:null,as:"",currentRow:null,data:null,display:"list",dnd:{drag:null,drop:null,reorder:{columns:"disabled"}},editMode:"none",emptyText:null,horizontalGridVisible:"auto",rowRenderer:null,scrollPolicy:"auto",scrollPolicyOptions:{fetchSize:25,maxCount:500},scrollPosition:{x:0,y:0},firstSelectedRow:{key:null,data:null},selection:[],selectionMode:null,selectionRequired:!1,verticalGridVisible:"auto",columns:[{renderer:null,className:null,field:null,footerClassName:null,footerRenderer:null,footerStyle:null,footerTemplate:null,headerClassName:null,headerRenderer:null,headerStyle:null,headerTemplate:null,headerText:null,id:null,resizable:"disabled",sortable:"auto",sortProperty:null,style:null,template:null,width:null}],columnsDefault:{renderer:null,className:null,field:null,footerClassName:null,footerRenderer:null,footerStyle:null,footerTemplate:null,headerClassName:null,headerRenderer:null,headerStyle:null,headerTemplate:null,headerText:null,resizable:"disabled",sortable:"auto",sortProperty:null,style:null,template:null,width:null},beforeCurrentRow:null,beforeRowEdit:null,beforeRowEditEnd:null,ready:null,sort:null},_BUNDLE_KEY:{_MSG_FETCHING_DATA:"msgFetchingData",_MSG_NO_DATA:"msgNoData",_MSG_INITIALIZING:"msgInitializing",_MSG_STATUS_SORT_ASC:"msgStatusSortAscending",_MSG_STATUS_SORT_DSC:"msgStatusSortDescending",_LABEL_SELECT_COLUMN:"labelSelectColumn",_LABEL_SELECT_ROW:"labelSelectRow",_LABEL_EDIT_ROW:"labelEditRow",_LABEL_SELECT_AND_EDIT_ROW:"labelSelectAndEditRow"},_LOGGER_MSG:{_ERR_PRECURRENTROW_ERROR_SUMMARY:"Did not change current row due to error.",_ERR_PRECURRENTROW_ERROR_DETAIL:"Error detail: {error}.",_ERR_CURRENTROW_UNAVAILABLE_INDEX_SUMMARY:"Did not change current row due to unavailable row index.",_ERR_CURRENTROW_UNAVAILABLE_INDEX_DETAIL:"Unavailable row index: {rowIdx}.",_ERR_REFRESHROW_INVALID_INDEX_SUMMARY:"Invalid row index value.",_ERR_REFRESHROW_INVALID_INDEX_DETAIL:"Row index: {rowIdx}.",_ERR_DATA_INVALID_TYPE_SUMMARY:"Invalid data type.",_ERR_DATA_INVALID_TYPE_DETAIL:"Please specify the appropriate data type.",_ERR_ELEMENT_INVALID_TYPE_SUMMARY:"Invalid element type.",_ERR_ELEMENT_INVALID_TYPE_DETAIL:"Only a <table> element can be specified for ojTable.",_ERR_WIDTH_INVALID_TYPE_SUMMARY:"Invalid data type for column width.",_ERR_WIDTH_INVALID_TYPE_DETAIL:"Please specify a valid number (not a string)."},_FIELD_ID:"id",_CONST_ATTRIBUTE:"attribute",_CONST_DATA:"data",_CONST_METADATA:"metadata",_CONST_INDEXES:"indexes",_CONST_INDEX:"index",_CONST_KEY:"key",_CONST_KEYS:"keys",_CONST_AFTERKEYS:"afterKeys",_CONST_ADDBEFOREKEYS:"addBeforeKeys",_CONST_STARTINDEX:"startIndex",_CONST_ENDINDEX:"endIndex",_CONST_PAGESIZE:"size",_CONST_OFFSET:"offset",_CONST_COLUMN:"column",_CONST_ROW:"row",_CONST_VALUE:"value",_CONST_SORTCRITERIA:"sortCriteria",_COLUMN_HEADER_ID:"_headerColumn",_COLUMN_HEADER_TEXT_ID:"_headerColumnText",_COLUMN_HEADER_ASC_ID:"_headerColumnAsc",_COLUMN_HEADER_DSC_ID:"_headerColumnDsc",_COLUMN_HEADER_ID_PREFIX:"_hdrCol",_FOCUS_CALLED:"_focusedCalled",_ROW_TEMPLATE:"rowTemplate",_CELL_TEMPLATE:"template",_HEADER_TEMPLATE:"headerTemplate",_FOOTER_TEMPLATE:"footerTemplate",_OPTION_AUTO:"auto",_OPTION_ENABLED:"enabled",_OPTION_DISABLED:"disabled",_OPTION_EDIT_MODE:{_NONE:"none",_ROW_EDIT:"rowEdit"},_OPTION_SELECTION_MODES:{_SINGLE:"single",_MULTIPLE:"multiple"},_OPTION_SCROLL_POLICY:{_AUTO:"auto",_LOADMORE_ON_SCROLL:"loadMoreOnScroll"},_COLUMN_SORT_ORDER:{_ASCENDING:"ascending",_DESCENDING:"descending"},_DND_REORDER_TABLE_ID_DATA_KEY:"oj-table-dnd-reorder-table-id",_KEYBOARD_CODES:{_KEYBOARD_CODE_SPACEBAR:32,_KEYBOARD_CODE_ENTER:13,_KEYBOARD_CODE_UP:38,_KEYBOARD_CODE_DOWN:40,_KEYBOARD_CODE_LEFT:37,_KEYBOARD_CODE_RIGHT:39,_KEYBOARD_CODE_HOME:36,_KEYBOARD_CODE_END:35,_KEYBOARD_CODE_TAB:9,_KEYBOARD_CODE_ESC:27,_KEYBOARD_CODE_F2:113,_KEYBOARD_MODIFIER_SHIFT:"shiftKey"},getContextByNode:function(e){var t=this.getSubIdByNode(e,!0);if(t&&"oj-table-cell"===t.subId){var i=t.rowIndex,n=this._getRowKeyForRowIdx(i);t.key=n}return t},getDataForVisibleRow:function(e){var t=this._getTableDomUtils().getTableBodyRow(e);return null!=t?{key:$(t).data("rowKey"),data:$(t).data("rowData"),index:e}:null},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;var t,i=e.subId;if("oj-table-cell"===i){var o=parseInt(e.rowIndex,10);return t=parseInt(e.columnIndex,10),this._getTableDomUtils().getTableBodyLogicalCells(o)[t]}if("oj-table-header"===i||"oj-table-sort-ascending"===i||"oj-table-sort-descending"===i){t=e.index;var s=this._getTableDomUtils().getTableHeaderLogicalColumns()[t];if(null!=s){if("oj-table-header"===i)return s;if("oj-table-sort-ascending"===i){var r=s.querySelectorAll("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_LINK_CLASS);if(r.length>0)return r[0]}else{var a=s.querySelectorAll("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_LINK_CLASS);if(a.length>0)return a[0]}}}else if("oj-table-footer"===i){t=e.index;var l=this._getTableDomUtils().getTableFooterLogicalCells()[t];if(null!=l)return l}return null},getSubIdByNode:function(e,t){var i=$(e).closest("."+n.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_CLASS);if(i.length>0)return{subId:"oj-table-cell",rowIndex:this._getTableDomUtils().getElementRowIdx(i[0]),columnIndex:this._getTableDomUtils().getElementColumnIdx(i[0])};var o=$(e).closest("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_LINK_CLASS);if(o.length>0)return{subId:t?"oj-table-header":"oj-table-sort-ascending",index:this._getTableDomUtils().getElementColumnIdx(o[0])};var s=$(e).closest("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_LINK_CLASS);if(s.length>0)return{subId:t?"oj-table-header":"oj-table-sort-descending",index:this._getTableDomUtils().getElementColumnIdx(s[0])};var r=$(e).closest("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS);if(r.length>0)return{subId:"oj-table-header",index:this._getTableDomUtils().getElementColumnIdx(r[0])};var a=$(e).closest("."+n.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS);return a.length>0?{subId:"oj-table-footer",index:this._getTableDomUtils().getElementColumnIdx(a[0])}:null},refresh:function(){this._super(),this._refresh()},refreshRow:function(e){return this._refreshRow(e,!0)},_refreshRow:function(e,t){var i=this._getData();if(!i)return Promise.resolve(!1);var n=this._getTableDomUtils().getTableBodyRows();if(isNaN(e)||e<0||null!=n&&e>=n.length||null==n||0===n.length){var o=this._LOGGER_MSG._ERR_REFRESHROW_INVALID_INDEX_SUMMARY,s=v.applyParameters(this._LOGGER_MSG._ERR_REFRESHROW_INVALID_INDEX_DETAIL,{rowIdx:e.toString()});throw new RangeError(o+"\n"+s)}var r=this._getRowKeyForRowIdx(e),a=this;return a._queueTask(function(){return i.fetchByKeys({keys:[r]}).then(function(i){if(null==i||null==i.results||0===i.results.size)return Promise.resolve(!1);var n=a._getTableDomUtils().getTableBodyRow(e);return t=t&&$.contains(n,document.activeElement),a._refreshTableBodyRow(e,{data:i.results.get(r).data,index:e,key:r}),t&&a._getTableDomUtils().getTable().focus(),n=a._getTableDomUtils().getTableBodyRow(e),a._waitForAllComponentsToResolve(n)})})},widget:function(){var e=this._getTableDomUtils().getTableContainer();return null!=e?$(e):this.element},_ComponentCreate:function(){if(this._super(),this._initTemplateEngine(),this._draw(),this._registerCustomEvents(),this._on(this._events),this._isTouchDevice()){var e=this._getTableDomUtils().getTableContainer();this._on($(e),this._eventsContainer)}this._registerDomEventListeners(),this._cachedOptions=$.extend(!0,{},this.options),this._setEditableRowIdx(null)},_AfterCreate:function(){this._super(),this._getTableDomUtils().createContextMenu(this._handleContextMenuSelect.bind(this)),this._isInitFetch=!0},_SetupResources:function(){this._super(),this._registerResizeListener(),this._registerDataSourceEventListeners(),this._isInitFetch?(this._initFetch(),this._isInitFetch=!1):this._invokeDataFetchRows(null,!1)},_ReleaseResources:function(){this._super(),this._unregisterDataSourceEventListeners(),this._unregisterResizeListener()},_NotifyAttached:function(){this._super(),this._getTableDomUtils().refreshTableDimensions()},_NotifyShown:function(){this._super(),this._getTableDomUtils().refreshTableDimensions()},_VerifyConnectedForSetup:function(){return!0},_GetDefaultContextMenu:function(){return this._defaultContextMenu},_NotifyContextMenuGesture:function(e,t,i){var n={};if(this._contextMenuEvent=t.originalEvent,!(this._isNodeEditable(this._contextMenuEvent.target)||this._isNodeClickable(this._contextMenuEvent.target)||"touch"===i&&this._isNodeDraggable(this._contextMenuEvent.target))){var o=this._getTableDomUtils().getFirstAncestor(this._contextMenuEvent.target,"oj-table-column-header-cell");o=null==o?this._getTableDomUtils().getTableHeaderColumn(this._activeColumnIndex):o,this._contextMenuEventHeaderColumn=o;var s=this._getTableDomUtils().getFirstAncestor(this._contextMenuEvent.target,"oj-table-data-cell");if(null!=s){var r=this._getTableDomUtils().getElementColumnIdx(s);o=this._getTableDomUtils().getTableHeaderColumn(r)}if("keydown"===this._contextMenuEvent.type){var a=this._tableDomUtils.getTable();if(this._contextMenuEvent.target===a)if(null!=o)n.position={my:"start top",at:"start bottom",of:o};else{var l=this._getFocusedRowIdx();if(l>=0){var u=this._getTableDomUtils().getTableBodyRow(l);n.position={my:"start top",at:"start bottom",of:u}}else n.position={my:"start top",at:"start bottom",of:this._contextMenuEvent.target}}else n.position={my:"start top",at:"start bottom",of:this._contextMenuEvent.target}}var d,h,c,p=e.element?e.element[0]:e;o&&o.getAttribute("data-oj-sortable")===this._OPTION_ENABLED?((d=p.querySelectorAll("[data-oj-command=oj-table-sortAsc]")).length>0&&(d=d[0]).classList.remove("oj-disabled"),(h=p.querySelectorAll("[data-oj-command=oj-table-sortDsc]")).length>0&&(h=h[0]).classList.remove("oj-disabled")):((d=p.querySelectorAll("[data-oj-command=oj-table-sortAsc]")).length>0&&(d=d[0]).classList.add("oj-disabled"),(h=p.querySelectorAll("[data-oj-command=oj-table-sortDsc]")).length>0&&(h=h[0]).classList.remove("oj-disabled")),o&&o.getAttribute("data-oj-resizable")===this._OPTION_ENABLED?(c=p.querySelectorAll("[data-oj-command=oj-table-resize]")).length>0&&(c=c[0]).classList.remove("oj-disabled"):(c=p.querySelectorAll("[data-oj-command=oj-table-resize]")).length>0&&(c=c[0]).classList.add("oj-disabled"),this._OpenContextMenu(t,i,n)}},_destroy:function(){$(this._getTableDomUtils().getTableBody()).removeAttr(w._OJ_CONTAINER_ATTR),this.element.children().remove("."+n.TableDomUtils.CSS_CLASSES._TABLE_HEADER_CLASS),this.element.children().remove("."+n.TableDomUtils.CSS_CLASSES._TABLE_BODY_CLASS),this.element.children().remove("."+n.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CLASS),this.element.children().remove("."+n.TableDomUtils.CSS_CLASSES._TABLE_STATUS_MESSAGE_CLASS),this.element.children().remove("."+n.TableDomUtils.CSS_CLASSES._TABLE_BODY_MESSAGE_ROW_CLASS),n.DomUtils.unwrap(this.element,$(this._getTableDomUtils().getTableContainer())),this.element[0].classList.remove(n.TableDomUtils.CSS_CLASSES._TABLE_CLASS),this._readyResolveFunc&&(this._readyResolveFunc(),this._readyResolveFunc=null),this._dataResolveFunc&&(this._dataResolveFunc(),this._dataResolveFunc=null),this._scrollPosResolveFunc&&(this._scrollPosResolveFunc(),this._scrollPosResolveFunc=null),this._focusoutResolveFunc&&(this._focusoutResolveFunc(),this._focusoutResolveFunc=null),this._data instanceof n.TableDataSourceAdapter&&this._data.destroy(),(this._hasHeaderTemplate||this._hasCellTemplate||this._hasFooterTemplate)&&this._cleanTemplateNodes(this.element[0]),this._componentDestroyed=!0},_draw:function(){if(this._setFinalTask(function(){if(this._getTableDomUtils().refreshTableDimensions(),this._setSelection(this.options.selection),this._setSelectionDefault(),this._hasEditableRow()){var e=this._getEditableRowIdx(),t=this._getTableDomUtils().getTableBodyRow(e);null!=t&&t.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_EDIT_CLASS)}this._isLoadMoreOnScroll()&&!this._dataFetching&&this._domScroller?this._domScroller.checkViewport().then(this._domScrollerSuccessFunc,null):this._syncScrollPosition()}),!this.element.is("table")){var e=this._LOGGER_MSG._ERR_ELEMENT_INVALID_TYPE_SUMMARY,t=this._LOGGER_MSG._ERR_ELEMENT_INVALID_TYPE_DETAIL;throw new RangeError(e+"\n"+t)}this.element[0].classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_ELEMENT_CLASS),this._getTableDomUtils().createInitialTable(this._isTableHeaderless(),this._isTableFooterless()),this._getTableDomUtils().styleInitialTable();var i=this;this._queueTask(function(){i._refreshTableHeader(),i._refreshTableFooter(),i._refreshTableBody(),i._processSlottedChildren()}),this.options.disabled&&this.disable()},_events:{focusout:function(e){var t=this;this._focusoutTimeout&&clearTimeout(this._focusoutTimeout),this._focusoutResolveFunc||(this._focusoutResolveFunc=this._addComponentBusyState("handling focusout")),this._focusoutTimeout=setTimeout(function(){for(var i=t._getTableDomUtils().getTable(),o=n.ZOrderUtils.findOpenPopups(),s=0;s<o.length;s++){var r=n.DomUtils.getLogicalParent($(o[s]).children());if($(i).has(r.get(0)).length>0)return void(t._focusoutResolveFunc&&(t._focusoutResolveFunc(),t._focusoutResolveFunc=null))}t._focusOutHandler($(i)),t._focusOutHandler($(t._getTableDomUtils().getTableContainer())),t._clearKeyboardKeys(),t._clearFocusedHeaderColumn(),t._clearFocusedRow(!1),t._getTableResizeUtils().clearTableHeaderColumnsResize(),t._setTableEditable(!1,!1,0,!0,e),t._setTableActionableMode(!1),t._focusoutResolveFunc&&(t._focusoutResolveFunc(),t._focusoutResolveFunc=null)},100)},"blur .oj-table-data-cell":function(e){var t=this._getEventTargetElement(e);t.classList.contains(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_EDIT_CLASS)&&t.classList.remove(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_EDIT_CLASS)},focus:function(e){this._checkRowOrHeaderColumnFocus(e)},focusin:function(e){this._focusoutTimeout&&(clearTimeout(this._focusoutTimeout),this._focusoutTimeout=null),this._focusoutResolveFunc&&(this._focusoutResolveFunc(),this._focusoutResolveFunc=null),this._focusInHandler($(this._getTableDomUtils().getTable())),this._focusInHandler($(this._getTableDomUtils().getTableContainer()));var t=this._getTableDomUtils().getTableBody();if($(t).has(e.target).length>0){var i=this._getFocusedRowIdx(),n=this._getFocusedHeaderColumnIdx();if(!(this._isNodeEditable(e.target)||this._isNodeClickable(e.target)||this._isTableActionableMode()||this._hasEditableRow()||this._temporaryTableChildElementFocus||null!=i||null!=n)){var o=this;setTimeout(function(){o._getTableDomUtils().getTable().focus()},0)}}},"focus .oj-table-column-header-acc-asc-link":function(e){var t=this;setTimeout(function(){t._checkRowOrHeaderColumnFocus(e),t=null},0)},"focus .oj-table-data-cell":function(e){var t=this._getEventTargetElement(e);this._getTableDomUtils().getElementRowIdx(t)===this._getEditableRowIdx()&&t.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_EDIT_CLASS)},"click .oj-table-checkbox-acc-select-column":function(e){var t=this._getEventTargetElement(e),i=this._getTableDomUtils().getElementColumnIdx(t),n=$(t).is(":checked");n&&this._setHeaderColumnFocus(i,!0,!0,null,null),this._setHeaderColumnSelection(i,n,t,e,!0),e.stopPropagation()},"click .oj-table-checkbox-acc-select-row":function(e){var t=this._getEventTargetElement(e),i=this._getTableDomUtils().getElementRowIdx(t),n=$(t).is(":checked"),o=!1;n?o=this._setRowFocus(i,!0,!0,null,e,!0):this._setTableEditable(!1,!1,0,!0,e),o&&(this._setRowSelection(i,n,t,e,!0),this._setTableEditable(!0,!1,0,!0,e)),e.stopPropagation()},keydown:function(e){this._addKeyboardKey(e.keyCode);var t=this._getKeyboardKeys()[0];t!==this._KEYBOARD_CODES._KEYBOARD_CODE_ESC&&t!==this._KEYBOARD_CODES._KEYBOARD_CODE_ENTER&&t!==this._KEYBOARD_CODES._KEYBOARD_CODE_F2&&t!==this._KEYBOARD_CODES._KEYBOARD_CODE_TAB&&(this._isNodeEditable(e.target)||null!=this._getTableDomUtils().getTableFooter()&&$(this._getTableDomUtils().getTableFooter()).has(e.target).length>0)||(1===this._getKeyboardKeys().length||2===this._getKeyboardKeys().length&&e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT])&&((this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_UP)||this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_DOWN)||this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_SPACEBAR)||this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_HOME)||this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_END))&&(e.preventDefault(),e.stopPropagation()),this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_UP)||this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_DOWN)?this._handleKeydownUpDown(e):this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_LEFT)||this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_RIGHT)?this._handleKeydownLeftRight(e):this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_TAB)?this._handleKeydownTab(e):t===this._KEYBOARD_CODES._KEYBOARD_CODE_F2?this._handleKeydownF2(e):t===this._KEYBOARD_CODES._KEYBOARD_CODE_SPACEBAR?this._handleKeydownSpacebar(e):t===this._KEYBOARD_CODES._KEYBOARD_CODE_ENTER?this._handleKeydownEnter(e):t===this._KEYBOARD_CODES._KEYBOARD_CODE_HOME?this._handleKeydownHome(e):t===this._KEYBOARD_CODES._KEYBOARD_CODE_END?this._handleKeydownEnd(e):t===this._KEYBOARD_CODES._KEYBOARD_CODE_ESC&&this._handleKeydownEsc(e))},keyup:function(e){if(1===this._getKeyboardKeys().length){var t=this._getKeyboardKeys()[0];if(this._isNodeEditable(e.target)||null!=this._getTableDomUtils().getTableFooter()&&$(this._getTableDomUtils().getTableFooter()).has(e.target).length>0)return void this._removeKeyboardKey(t);this._removeKeyboardKey(t)}this._removeKeyboardKey(e.keyCode)},"mouseleave .oj-table-element":function(){this._getTableResizeUtils().clearTableHeaderColumnsResize()},"mousedown .oj-table-body":function(e){if(this._mouseDownRowIdx=this._getTableDomUtils().getElementRowIdx(e.target),null!=this._mouseDownRowIdx){var t=this._getTableDomUtils().getTableBodyRow(this._mouseDownRowIdx);if(null!=t&&t.draggable)this._mouseDownRowIdx=null;else if(null!=this._mouseDownRowIdx&&!e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT]&&!n.DomUtils.isMetaKeyPressed(e)&&1===e.which){if(this._getRowSelection(this._mouseDownRowIdx)&&1===this._getSelectedRowIdxs().length)return;this._nonContiguousSelection||this._clearSelectedRows(!0)}}},"mouseup .oj-table-body":function(){this._mouseDownRowIdx=null},"mouseenter .oj-table-body-row":function(e){var t=this._getEventTargetElement(e);t.classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._HOVER);var i=this._getTableDomUtils().getElementRowIdx(t);this._updateRowStateCellsClass(i,{hover:!0}),this._handleMouseEnterSelection(e.target)},"mouseleave .oj-table-body-row":function(e){var t=this._getEventTargetElement(e);t.classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._HOVER);var i=this._getTableDomUtils().getElementRowIdx(t);this._updateRowStateCellsClass(i,{hover:!1})},"mousedown .oj-table-column-header-cell":function(e){if(1===e.which&&!this._getTableResizeUtils().handleHeaderColumnResizeStart(e)){var t=this._getTableDomUtils().getElementColumnIdx(this._getEventTargetElement(e));this._setHeaderColumnFocus(t,!0,!0,e,null),$(e.target).data(this._FOCUS_CALLED,!0)}},"mouseenter .oj-table-column-header-cell":function(e){if(!this._getTableResizeUtils().setResizeCursor(e)){var t=this._getEventTargetElement(e);t.classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._HOVER);var i=this._getTableDomUtils().getElementColumnIdx(t);this._showTableHeaderColumnSortLink(i)}},"mousemove .oj-table-header":function(e){this._getTableResizeUtils().setResizeCursor(e)},"mousemove .oj-table-column-header-cell":function(e){var t=this._getEventTargetElement(e);this._getTableResizeUtils().setResizeCursor(e)?t.classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._HOVER):t.classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._HOVER)},"mouseleave .oj-table-column-header-cell":function(e){var t=this._getEventTargetElement(e);t.classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._HOVER);var i=this._getTableDomUtils().getElementColumnIdx(t);this._hideTableHeaderColumnSortLink(i,!0),this._hideTableHeaderColumnSortLink(i,!1)},"mouseup .oj-table-column-header-cell":function(e){this._getTableResizeUtils().handleHeaderColumnResizeEnd(e)},"mousedown .oj-table-data-cell":function(e){var t=this._getEventTargetElement(e),i=this._getTableDomUtils().getElementRowIdx(t);this._setRowFocus(i,!0,!0,t,e),$(e.target).data(this._FOCUS_CALLED,!0)},"mouseup .oj-table-data-cell":function(e){this._getTableResizeUtils().handleHeaderColumnResizeEnd(e)},"click .oj-table-column-header-asc-link":function(e){var t=this._getTableDomUtils().getElementColumnIdx(e.target),i=this._getTableDomUtils().getTableHeaderColumn(t);i&&($(i).data("sorted")===this._COLUMN_SORT_ORDER._ASCENDING?this._handleSortTableHeaderColumn(t,!1,e):this._handleSortTableHeaderColumn(t,!0,e),e.preventDefault(),e.stopPropagation())},"click .oj-table-column-header-acc-asc-link":function(e){if(this._getKeyboardKeys().length>0&&this._getKeyboardKeys()[0]===this._KEYBOARD_CODES._KEYBOARD_CODE_ENTER)return e.preventDefault(),void e.stopPropagation();var t=this._getTableDomUtils().getElementColumnIdx(e.target),i=this._getTableDomUtils().getTableHeaderColumn(t);i&&($(i).data("sorted")===this._COLUMN_SORT_ORDER._DESCENDING?this._handleSortTableHeaderColumn(t,!0,e):this._handleSortTableHeaderColumn(t,!1,e),e.preventDefault(),e.stopPropagation())},"click .oj-table-column-header-dsc-link":function(e){var t=this._getTableDomUtils().getElementColumnIdx(e.target),i=this._getTableDomUtils().getTableHeaderColumn(t);i&&($(i).data("sorted")===this._COLUMN_SORT_ORDER._DESCENDING?this._handleSortTableHeaderColumn(t,!0,e):this._handleSortTableHeaderColumn(t,!1,e),e.preventDefault(),e.stopPropagation())},"click .oj-table-column-header-acc-dsc-link":function(e){if(this._getKeyboardKeys().length>0&&this._getKeyboardKeys()[0]===this._KEYBOARD_CODES._KEYBOARD_CODE_ENTER)return e.preventDefault(),void e.stopPropagation();var t=this._getTableDomUtils().getElementColumnIdx(e.target),i=this._getTableDomUtils().getTableHeaderColumn(t);i&&($(i).data("sorted")===this._COLUMN_SORT_ORDER._DESCENDING?this._handleSortTableHeaderColumn(t,!0,e):this._handleSortTableHeaderColumn(t,!1,e),e.preventDefault(),e.stopPropagation())},"click .oj-table-data-cell":function(e){var t,i=this._getEventTargetElement(e),o=this._getTableDomUtils().getElementRowIdx(i);if(!$(e.target).data(this._FOCUS_CALLED)){var s=this._setRowFocus(o,!0,!0,i,e);if($(e.target).data(this._FOCUS_CALLED,!1),!s)return}if(e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT]){var r=this._getLastRowSelection();if(null!=r)if(window.getSelection().removeAllRanges(),o<r)for(t=o;t<=r;t++)this._setRowSelection(t,!0,i,e,!0);else for(t=r;t<=o;t++)this._setRowSelection(t,!0,i,e,!0)}else if(n.DomUtils.isMetaKeyPressed(e))this._setRowSelection(o,!this._getRowSelection(o),i,e,!0),this._lastSelectedRowIdxArray&&this._lastSelectedRowIdxArray.indexOf(o)>-1&&(this._selectionAnchorIdx=o);else if(0===this._getKeyboardKeys().length){var a=this._getRowSelection(o);this._setRowSelection(o,!a,i,e,!0),this._lastSelectedRowIdxArray&&this._lastSelectedRowIdxArray.indexOf(o)>-1&&(this._selectionAnchorIdx=o),this._isTouchDevice()&&this._getRowSelectionMode()===this._OPTION_SELECTION_MODES._MULTIPLE&&!a&&this._getTableDomUtils().createTableBodyRowTouchSelectionAffordance(o)}},"dblclick .oj-table-data-cell":function(e){var t=this._getTableDomUtils().getElementColumnIdx(e.target);this._setTableEditable(!0,!1,t,!0,e)},"contextmenu .oj-table-data-cell":function(e){var t=this._getTableDomUtils().getElementRowIdx(this._getEventTargetElement(e)),i=this._getRowKeyForRowIdx(t);this._setCurrentRow({rowKey:i},e,!1)},"click .oj-table-column-header-cell":function(e){var t,i=this._getEventTargetElement(e);if("col-resize"!==i.style.cursor){var o=this._getTableDomUtils().getElementColumnIdx(i);if($(e.target).data(this._FOCUS_CALLED)||(this._setHeaderColumnFocus(o,!0,!0,e,null),$(e.target).data(this._FOCUS_CALLED,!1)),e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT]){var s=this._getLastHeaderColumnSelection();if(null!=s)if(o<s)for(t=o;t<=s;t++)this._setHeaderColumnSelection(t,!0,i,e,!0);else for(t=s;t<=o;t++)this._setHeaderColumnSelection(t,!0,i,e,!0)}else if(n.DomUtils.isMetaKeyPressed(e))this._setHeaderColumnSelection(o,!this._getHeaderColumnSelection(o),i,e,!0);else if(0===this._getKeyboardKeys().length){var r=this._getSelectedHeaderColumnIdxs();null!=r&&r.length>0&&(-1===r.indexOf(o)||r.length>1)&&this._clearSelectedHeaderColumns(),this._setHeaderColumnSelection(o,!this._getHeaderColumnSelection(o),i,e,!0),this._getTableDndContext().setTableHeaderColumnDraggable(o,!0)}}},"dragstart .oj-table-column-header-cell":function(e){if("col-resize"!==this._getEventTargetElement(e).style.cursor)return this._getTableDndContext().handleColumnDragStart(e)},"dragenter .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDragEnter(e)},"dragover .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDragOver(e)},"dragleave .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDragLeave(e)},"drop .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDrop(e)},"dragend .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDragEnd(e)},"dragstart .oj-table-body-row":function(e){return this._getTableDndContext().handleRowDragStart(e)},"drag .oj-table-body-row":function(e){return this._getTableDndContext().handleRowDrag(e)},"dragend .oj-table-body-row":function(e){return this._getTableDndContext().handleRowDragEnd(e)},"dragenter .oj-table-body":function(e){return this._getTableDndContext().handleRowDragEnter(e)},"dragover .oj-table-body":function(e){return this._getTableDndContext().handleRowDragOver(e)},"dragleave .oj-table-body":function(e){return this._getTableDndContext().handleRowDragLeave(e)},"drop .oj-table-body":function(e){return this._getTableDndContext().handleRowDrop(e)}},_eventsContainer:{"touchstart .oj-table-body-row-touch-selection-affordance-touch-area":function(e){1===e.originalEvent.touches.length&&this._getRowSelectionMode()===this._OPTION_SELECTION_MODES._MULTIPLE&&(e.target.classList.contains(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOP_CLASS)||e.target.classList.contains(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOP_ICON_CLASS)?(e.preventDefault(),this._mouseDownRowIdx=$(this._getTableDomUtils().getTableBodyRowTouchSelectionAffordanceBottom()).data("rowIdx")):(e.target.classList.contains(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_BOTTOM_CLASS)||e.target.classList.contains(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_BOTTOM_ICON_CLASS))&&(e.preventDefault(),this._mouseDownRowIdx=$(this._getTableDomUtils().getTableBodyRowTouchSelectionAffordanceTop()).data("rowIdx")))},"touchstart .oj-table-column-header-cell":function(e){1===e.originalEvent.touches.length&&this._isTableColumnsResizable()&&this._getTableResizeUtils().handleHeaderColumnResizeStart(e)&&e.preventDefault()},"touchmove .oj-table-header":function(e){this._isTableColumnsResizable()&&this._getTableResizeUtils().setResizeCursor(e)},"touchmove .oj-table-body-row-touch-selection-affordance-touch-area":function(e){if(null!=this._mouseDownRowIdx){e.preventDefault();var t=this._getEventTargetElement(e);this._handleMouseEnterSelection(t)}},touchend:function(e){if(null!=this._mouseDownRowIdx){var t=this._getEventTargetElement(e);this._handleMouseEnterSelection(t)}this._mouseDownRowIdx=null,this._getTableResizeUtils().handleHeaderColumnResizeEnd(e)&&e.preventDefault()},"touchend .oj-table-body":function(e){var t,i=this;this._touchEventDoubleTapFunction(e,(t=e,function(){var e=i._getEventTargetElement(t),n=i._getTableDomUtils().getElementColumnIdx(e);i._setTableEditable(!0,!1,n,!0,t),t.preventDefault()}))},touchcancel:function(){this._mouseDownRowIdx=null,this._getTableResizeUtils().clearTableHeaderColumnsResize()}},_refresh:function(){var e=!1;this._dataOption!==this.options[this._CONST_DATA]&&(this._clearCachedDataMetadata(),null==this._data&&(e=!0));var t=this._GetContextMenu();if(null!=t&&t!==this._getTableDomUtils().getContextMenu()&&this._getTableDomUtils().createContextMenu(this._handleContextMenuSelect.bind(this)),this._getTableDomUtils().clearCachedDom(),this._getTableDomUtils().refreshContextMenu(),this._refreshTableStatusMessage(),e)return this._initFetch();var i=this;return this._queueTask(function(){var e=i._invokeDataFetchRows(null,!1);return i=null,e})},_setOption:function(e,t){"selection"===e?(this._clearSelectedRows(),this._clearSelectedHeaderColumns(),this._setSelection(t),this._setSelectionDefault(),this._superApply(arguments)):"currentRow"===e?this._setCurrentRow(t,null,!0)&&this._superApply(arguments):"scrollPosition"===e?this._syncScrollPosition(t):(this._superApply(arguments),this._isTableRefreshNeeded(e,t)&&("columns"===e?(this._clearCachedMetadata(),this._refreshTableHeader()):"data"===e&&this._adjustScrollPositionOnRefresh(),this._refresh()))},_adjustScrollPositionOnRefresh:function(){var e=null==this.options.scrollPosition?{}:this.options.scrollPosition;if(!isNaN(e.rowIndex)&&void 0!==e.rowKey){var t=this._getSelectedRowIdxs();null!=t&&t.length>0&&(this._getRowSelectionMode()===this._OPTION_SELECTION_MODES._SINGLE||this._getRowSelectionMode()===this._OPTION_SELECTION_MODES._MULTIPLE)?(!isNaN(this._selectionAnchorIdx)&&t.indexOf(this._selectionAnchorIdx)>-1?e.rowKey=this._getRowKeyForRowIdx(this._selectionAnchorIdx):e.rowKey=this._getRowKeyForRowIdx(t[0]),delete e.rowIndex):(e.y=0,e.rowIndex=0,delete e.rowKey),e.x=0,e.columnKey=null,e.columnIndex=0,e.offsetX=0,e.offsetY=0,this.option("scrollPosition",e,{_context:{internalSet:!0},changed:!1})}},_findRowElementByKey:function(e){var t=this._getTableDomUtils().getTableBodyRows();if(null!=t&&t.length>0)for(var i=t.length,o=0;o<i;o++)if(n.Object.compareValues($(t[o]).data("rowKey"),e))return t[o];return null},_validateKeys:function(e){for(var t=0;t<e.length;t++)if(null!=this._findRowElementByKey(e[t]))return Promise.resolve(!0);var i=this._getData();return i&&i.containsKeys?new Promise(function(t){var n=new Set;e.forEach(function(e){n.add(e)}),i.containsKeys({keys:n}).then(function(e){t(e.results.size>0)},function(){t(!1)})}):null},_syncScrollPosition:function(e,t){if(this._IsCustomElement()&&!this._noDataMessageShown&&(this._isScrollableX()||this._isScrollableY())){null!=this._scrollPosition?e=this._scrollPosition:void 0===e&&(e=this.options.scrollPosition),null==this._scrollPosResolveFunc&&(this._scrollPosResolveFunc=this._addComponentBusyState("handling scroll position"));var i=this;if((t=void 0===t||t)&&e.rowKey){var n=this._validateKeys([e.rowKey]);if(n)return void n.then(function(t){t||delete e.rowKey,i._syncScrollPosition(e,!1)})}var o=this._getScrollCoordinates(e),s=o.x,r=o.y;if(isNaN(s)&&isNaN(r))return null!=this._scrollPosition&&(this.option("scrollPosition",this._getCurrentScrollPosition(),{_context:{originalEvent:null,internalSet:!0}}),this._scrollPosition=null),this._scrollPosResolveFunc(),void(this._scrollPosResolveFunc=null);var a=isNaN(this._scrollTop)?0:this._scrollTop,l=isNaN(this._scrollLeft)?0:this._scrollLeft;if(!isNaN(s)&&isNaN(r)||!isNaN(s)&&r===a&&s!==l){if(!this._isScrollableX())return;this._setScrollX(s);var u=this.options.scrollPosition,d=this._getCurrentHorizontalScrollPosition(s);d.y=u.y,d.rowIndex=u.rowIndex,d.rowKey=u.rowKey,d.offsetY=u.offsetY,this.option("scrollPosition",d,{_context:{originalEvent:null,internalSet:!0}})}else if(r!==a){if(!this._isScrollableY())return void(isNaN(s)||s===l||(delete e.y,this._syncScrollPosition(e,t)));if(this._setScrollY(-1===r?this._getScrollHeight()-this._getClientHeight():r),isNaN(s)||s===l||this._setScrollX(s),-1===r)return void(this._scrollPosition=e);this.option("scrollPosition",this._getCurrentScrollPosition(s,r),{_context:{originalEvent:null,internalSet:!0}})}else e&&(null==e.rowKey||isNaN(e.rowIndex))&&this.option("scrollPosition",this._getCurrentScrollPosition(s,r),{_context:{originalEvent:null,internalSet:!0}});null!=this._scrollPosition&&(this._scrollPosition=null),this._scrollPosResolveFunc&&(this._scrollPosResolveFunc(),this._scrollPosResolveFunc=null)}},_isScrollableX:function(){return Math.abs(this._getScrollWidth()-this._getClientWidth())>1},_isScrollableY:function(){return Math.abs(this._getScrollHeight()-this._getClientHeight())>1},_getScrollWidth:function(){return null==this._scrollWidth&&(this._scrollWidth=this._getTableDomUtils().getScroller().scrollWidth),this._scrollWidth},_getScrollHeight:function(){return null==this._scrollHeight&&(this._scrollHeight=this._getTableDomUtils().getScroller().scrollHeight),this._scrollHeight},_getClientWidth:function(){return null==this._clientWidth&&(this._clientWidth=this._getTableDomUtils().getScroller().clientWidth),this._clientWidth},_getClientHeight:function(){return null==this._clientHeight&&(this._clientHeight=this._getTableDomUtils().getScroller().clientHeight),this._clientHeight},_setScrollX:function(e){var t=this._getTableDomUtils().getScroller();this._skipScrollUpdate=!0,n.DomUtils.setScrollLeft(t,e)},_setScrollY:function(e){var t=this._getTableDomUtils().getScroller();this._skipScrollUpdate=!0,t.scrollTop=e},_getScrollTopByIndex:function(e){if(0===e)return 0;if(!(this._isLoadMoreOnScroll()&&e>this.options.scrollPolicyOptions.maxCount)){var t=this._getTableDomUtils().getTableBodyRows()[e];return null!=t?t.offsetTop:this._hasMoreToFetch()?-1:void 0}},_getScrollTopByKey:function(e){var t=this._findRowElementByKey(e);if(null!=t){var i=this._getTableDomUtils().getTableBodyRows();return null!=i&&i.length>0?Math.max(0,t.offsetTop-i[0].offsetTop):void 0}if(this._hasMoreToFetch())return-1},_getScrollLeftByIndex:function(e){if(0===e)return 0;var t=this._getTableDomUtils().getTableHeaderColumn(e);return null!=t?t.offsetLeft:void 0},_getScrollLeftByKey:function(e){var t=this._getColumnIdxForColumnKey(e);return this._getScrollLeftByIndex(t)},_getScrollCoordinates:function(e){var t,i,n=e.rowKey;isNaN(t)&&null!=n&&(t=this._getScrollTopByKey(n));var o=e.columnKey;isNaN(i)&&null!=o&&(i=this._getScrollLeftByKey(o));var s=e.rowIndex;isNaN(t)&&!isNaN(s)&&(t=this._getScrollTopByIndex(s));var r=e.columnIndex;isNaN(i)&&!isNaN(r)&&(i=this._getScrollLeftByIndex(r));var a=e.offsetX;!isNaN(i)&&!isNaN(a)&&i>=0&&(i+=a);var l=e.offsetY;return!isNaN(t)&&!isNaN(l)&&t>=0&&(t+=l),isNaN(i)&&!isNaN(e.x)&&(i=Math.max(0,e.x)),isNaN(t)&&!isNaN(e.y)&&(t=e.y>this._getScrollHeight()?this._hasMoreToFetch()?-1:this._getScrollHeight()-this._getClientHeight():Math.max(0,e.y)),{x:i,y:t}},_getCurrentHorizontalScrollPosition:function(e){var t={};t.x=void 0===e?this._scrollLeft:e;var i=this.option("scrollPosition"),n=Math.abs(i.x-t.x);if(n<1&&null!=i.columnKey&&!isNaN(i.columnIndex))return t.columnKey=i.columnKey,t.columnIndex=i.columnIndex,t.offsetX=i.offsetX+n,t;var o=this._getColumnLocations();if(o&&o.length>0){var s,r=o.length-1;for(s=0;s<o.length-1;s++)if(t.x>=o[s]&&t.x<o[s+1]){r=s;break}t.columnKey=this._getColumnDefs()[r].id,t.columnIndex=r,t.offsetX=t.x-o[r]}return t},_getCurrentVerticalScrollPosition:function(e){var t={};t.y=void 0===e?this._scrollTop:e;var i=this.option("scrollPosition");if(!isNaN(this._rowHeight)&&this._rowHeight>0){var n;Math.abs(i.y-e)<this._rowHeight&&null!=i.rowKey&&!isNaN(i.rowIndex)&&(n=i.rowIndex),isNaN(n)&&(n=Math.floor(t.y/this._rowHeight));var o=this._findClosestElementToTop(n,t.y);null!=o&&(t.rowIndex=o.index,t.rowKey=this._getRowKeyForRowIdx(o.index),t.offsetY=o.offset)}return t},_getCurrentScrollPosition:function(e,t){var i=this._getCurrentHorizontalScrollPosition(e),n=this._getCurrentVerticalScrollPosition(t);return Object.keys(n).forEach(function(e){i[e]=n[e]}),i},_getColumnLocations:function(){if(null==this._columnOffsets){this._columnOffsets=[];var e,t,i=this._getTableDomUtils().getTableHeaderColumns();if(i&&i.length>0)for(e=i[0].offsetLeft,this._columnOffsets.push(0),t=1;t<i.length;t++)this._columnOffsets.push(i[t].offsetLeft-e)}return this._columnOffsets},_findClosestElementToTop:function(e,t){var i=!1,n=this._getTableDomUtils().getTableBodyRows();if(!(null==n||0===n.length||e>=n.length)){var o,s=n[e],r=t-(o=0===e?0:s.offsetTop-n[0].offsetTop),a={index:e,elem:s,offsetTop:o,offset:r};if(Math.abs(r)<1)return a;var l,u=r>0;for(u?e+=1:e-=1;!i&&e>=0&&e<n.length;){if(l=o,o=(s=n[e]).offsetTop,i=(r=Math.abs(t-o))<1||(u?t<=o:t>=o)){a=r<1||!u?{index:e,elem:s,offsetTop:o,offset:r}:{index:e-1,elem:n[e-1],offsetTop:l,offset:t-l};break}u?e+=1:e-=1}return a}},_hasMoreToFetch:function(){return!!this._isLoadMoreOnScroll()&&!this._noMoreData},_addKeyboardKey:function(e){for(var t=!1,i=Object.keys(this._KEYBOARD_CODES),n=0;n<i.length;n++){var o=i[n];this._KEYBOARD_CODES[o]===e&&(t=!0)}if(t){for(var s=this._getKeyboardKeys(),r=!1,a=s.length,l=0;l<a;l++)if(s[l]===e){r=!0;break}r||s.push(e)}},_addComponentBusyState:function(e){var t=c.getContext(this.element[0]).getBusyContext(),i={description:"The component identified by '"+this._getTableDomUtils().getTableId()+"' "+e};return t.addBusyState(i)},_addSingleTableBodyRow:function(e,t,i,n){var o=this._getTableDomUtils().createTableBodyRow(e,t[this._CONST_KEY]);return this._getTableDomUtils().styleTableBodyRow(o,!0),this._getTableDomUtils().insertTableBodyRow(e,o,t,i),o=this._refreshTableBodyRow(e,t,o,i,n,!0),i||w.subtreeAttached(o),o},_animateVisibleRows:function(e,t,i){if(i=null==this._animationActionOverride?i:this._animationActionOverride,!this._hasPendingTasks()){this._animationActionOverride=null;var n,o=this._getVisibleRowIdxs(),s=[];for(n=0;n<t.length;n++)-1===o.indexOf(t[n])&&s.push(t[n]);for(s.sort(function(e,t){return e-t}),n=s.length-1;n>=0;n--)e.splice(s[n],1);this._unregisterResizeListener();var r=this;return this._getTableAnimationUtils().animateTableBodyRows(e,i).then(function(){r._registerResizeListener()})}return this._animationActionOverride="update",Promise.resolve()},_checkRowOrHeaderColumnFocus:function(e){var t=this._getFocusedRowIdx(),i=this._getFocusedHeaderColumnIdx();if(null==t&&null==i){var n=null,o=this._getCurrentRow(),s=null!=o?o.rowKey:null;null!=s&&(n=this._getRowIdxForRowKey(s)),null==n?this._isTableHeaderless()?this._setRowFocus(0,!0,!0,null,e):this._setHeaderColumnFocus(0,!0,!1,e,!0):this._setRowFocus(n,!0,!0,null,e)}},_cleanTemplateNodes:function(e){var t=this._getTemplateEngine();null!=t&&t.clean(e)},_clearCachedMetadata:function(){this._columnDefArray=null,this._columnOffsets=null,this._setTableActionableMode(!1)},_clearCachedDataMetadata:function(){null!=this._data&&this._unregisterDataSourceEventListeners(),this._data=null},_clearCachedDimensions:function(){this._clientWidth=null,this._clientHeight=null,this._scrollWidth=null,this._scrollHeight=null},_clearDataWaitingState:function(){this._hideInlineMessage(),this._hideStatusMessage(),this._dataFetching=!1,this._dataResolveFunc&&(this._dataResolveFunc(),this._dataResolveFunc=null)},_clearKeyboardKeys:function(){this._keyboardKeys=[]},_clearFocusedHeaderColumn:function(){var e=this._getFocusedHeaderColumnIdx();null!=e&&this._setHeaderColumnFocus(e,!1,!1,null,null),this._activeColumnIndex=-1},_clearFocusedRow:function(e){null!=this._getFocusedRowIdx()&&this._setRowFocus(-1,!0,e,null,null)},_clearSelectedHeaderColumns:function(){for(var e=this._getSelectedHeaderColumnIdxs(),t=e.length,i=0;i<t;i++)this._setHeaderColumnSelection(e[i],!1,null,null,!1,!0)},_clearSelectedRows:function(){for(var e=this._getSelectedRowIdxs(),t=e.length,i=0;i<t;i++)this._setRowSelection(e[i],!1,null,null,!1,!0);this._isTouchDevice()&&this._getRowSelectionMode()===this._OPTION_SELECTION_MODES._MULTIPLE&&this._getTableDomUtils().removeTableBodyRowTouchSelectionAffordance(),this._selectionAnchorIdx=null},_clearSortedHeaderColumn:function(e){var t=this._getSortedTableHeaderColumnIdx();if(null!=t){var i=this._getTableDomUtils().getTableHeaderColumn(t),o=$(i).data("sorted");if($(i).data("sorted",null),null==e||t!==e)this._hideTableHeaderColumnSortLink(t,o===this._COLUMN_SORT_ORDER._ASCENDING);else{var s=i.querySelectorAll("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_LINK_CLASS);s.length>0&&(s=s[0]).classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED);var r=i.querySelectorAll("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_LINK_CLASS);r.length>0&&(r=r[0]).classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)}}},_executeTableBodyRowsAdd:function(e){var t=this;this._queueTask(function(){var i=t._getRowsFromEventDetailAdd(e);if(0!==i.length){var n,o,s=!1,r=[],a=[];if(i.length>1){o=i.length;var l=!0;for(n=0;n<o;n++)0!==n&&i[n-1].rowIdx!==i[n].rowIdx-1&&(l=!1),a.push(i[n].rowIdx);if(l){var u=t._getTableDomUtils().getTableBody(),d=document.createDocumentFragment();for(o=i.length,n=0;n<o;n++)r.push(t._addSingleTableBodyRow(i[n].rowIdx,i[n].row,d,i[0].rowIdx));if(0===i[0].rowIdx)u.insertBefore(d,u.firstChild);else{var h=t._getTableDomUtils().getTableBodyRow(i[0].rowIdx);null!=h?u.insertBefore(d,h):u.appendChild(d,null)}t._getTableDomUtils().clearCachedDomRowData(),w.subtreeAttached(u),s=!0}}if(!s)for(o=i.length,n=0;n<o;n++)r.push(t._addSingleTableBodyRow(i[n].rowIdx,i[n].row));return t._getTableDomUtils().clearCachedDomRowData(),t._refreshTableFooter(),t._IsCustomElement()?t._animateVisibleRows(r,a,"add").then(function(){return t._waitForAllComponentsToResolve(r)}):t._waitForAllComponentsToResolve(r)}})},_executeTableBodyRowsChange:function(e,t){var i=this;this._queueTask(function(){var t=i._getRowsFromEventDetailChange(e);if(0!==t.length){for(var n=t.length,o=[],s=[],r=0;r<n;r++){var a=i._refreshTableBodyRow(t[r].rowIdx,t[r].row);o.push(a),s.push(t[r].rowIdx)}return i._refreshTableFooter(),i._IsCustomElement()?i._animateVisibleRows(o,s,"update").then(function(){return i._waitForAllComponentsToResolve(o)}):i._waitForAllComponentsToResolve(o)}})},_executeTableBodyRowsRemove:function(e){var t=this;this._queueTask(function(){var i=t._getRowsFromEventDetailRemove(e);if(0!==i.length){i.sort(function(e,t){return t.rowIdx-e.rowIdx});var n,o,s,r=t._getCurrentRow(),a=null!=r?r.rowIndex:0,l=null!=r?r.rowKey:null,u=[],d=[],h=[],c=i.length,p=!1,_=t._getTableDomUtils().getTableBodyRows();if(null!=_&&_.length>0){for(s=0;s<_.length;s++)u.push(s);for(s=0;s<c;s++){o=i[s].rowIdx,d.push(o);for(var m=0;m<u.length;m++)if(u[m]===o){n=this._getTableDomUtils().getTableBodyRow(o),h.push(n),u.splice(m,1);break}}0===u.length&&(p=!0)}var g=this._getTableDomUtils().getTableBody(),f=$.contains(g,document.activeElement),v=!1;if(p)f&&(v=!0),t._setSelection(null),t.option("selection",null,{_context:{writeback:!0,internalSet:!0}});else for(s=0;s<c;s++)if(o=i[s].rowIdx,n=this._getTableDomUtils().getTableBodyRow(o),f&&null!=n&&$.contains(n,document.activeElement)){v=!0,f=!1;break}if(!p)return new Promise(function(e){t._IsCustomElement()?t._animateVisibleRows(h,d,"remove").then(function(){y(),b(),e(!0)}):(y(),b(),e(!0))});t._getTableDomUtils().removeAllTableBodyRows(),b()}function y(){for(var e=0;e<c;e++){var n=i[e].rowIdx;t._getTableDomUtils().removeTableBodyRow(n)}}function b(){t._refreshTableFooter(),null!=(_=t._getTableDomUtils().getTableBodyRows())&&0!==_.length||t._showNoDataMessage(),null!=l&&(null==_||p||a>=_.length?t._setCurrentRow(null,null,!1):t._setCurrentRow({rowIndex:a,rowKey:null},null,!1)),v&&t._getTableDomUtils().getTable().focus()}})},_getAllBusyContextsForElement:function(e){if(!e)return null;var t=e.querySelectorAll("[data-oj-context]");if(t.length>0){for(var i=[],n=0;n<t.length;n++)i.push(c.getContext(t[n]).getBusyContext());return i}return null},_getColumnDefs:function(){return this._columnDefArray||(this._columnDefArray=this._getColumnMetadata()),this._columnDefArray},_getColumnMetadata:function(){var e=this.options.columns,t=this.options.columnsDefault;if((0===e.length||1===e.length&&null==e[0].id&&null==e[0].headerText&&null==e[0].field)&&null==t.headerText&&null==t.field)return[];var i,n=[],o=e.length;for(i=0;i<o;i++)n[i]=$.extend({},t,e[i]);var s=[],r=n.length;for(i=0;i<r;i++)s.push(n[i]);var a=this._getData(),l=!1;for(null!=a&&null!=a.getCapability("sort")&&(l=!0),i=0;i<r;i++)null==s[i][this._FIELD_ID]&&(s[i][this._FIELD_ID]=this._COLUMN_HEADER_ID_PREFIX+i),null!=s[i].sortable&&s[i].sortable!==this._OPTION_AUTO||!l||(s[i].sortable=this._OPTION_ENABLED);return s},_getColumnIdxForColumnKey:function(e){var t=this._getColumnDefs();if(null!=t)for(var i=t.length,o=0;o<i;o++){var s=t[o];if(n.Object.compareValues(s.id,e))return o}return null},_getColumnIdxsForElementsWithStyleClass:function(e){var t=this._getTableDomUtils().getTable().querySelectorAll(e),i=[];if(t&&t.length>0)for(var n=t.length,o=0;o<n;o++){for(var s=this._getTableDomUtils().getElementColumnIdx(t[o]),r=!1,a=i.length,l=0;l<a;l++)i[l]===s&&(r=!0);r||i.push(s)}return i},_getColumnKeyForColumnIdx:function(e){var t=this._getColumnDefs();return null!=t&&e<t.length?t[e][this._FIELD_ID]:null},_getColumnRenderer:function(e,t){var i=this._getColumnDefs()[e],n=null;return"cell"===t?n=i.renderer:"footer"===t?n=i.footerRenderer:"header"===t&&(n=i.headerRenderer),this._WrapCustomElementRenderer(n)},_getCurrentRow:function(){return this._getData()?this._currentRow:null},_getData:function(){if(!this._data&&null!=this.options.data){var e=this.options.data;if(n.TableDataSource&&e instanceof n.TableDataSource||n.PagingTableDataSource&&e instanceof n.PagingTableDataSource)this._data=new n.TableDataSourceAdapter(e);else{if(!n.DataProviderFeatureChecker.isDataProvider(e)){var t=this._LOGGER_MSG._ERR_DATA_INVALID_TYPE_SUMMARY,i=this._LOGGER_MSG._ERR_DATA_INVALID_TYPE_DETAIL;throw new Error(t+"\n"+i)}e instanceof n.ListDataProviderView?this._data=e:this._data=new n.ListDataProviderView(e)}this._dataOption=this.options.data,this._registerDataSourceEventListeners()}return this._data},_getFocusedHeaderColumnIdx:function(){return this._getColumnIdxsForElementsWithStyleClass("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS+"."+n.TableDomUtils.MARKER_STYLE_CLASSES._FOCUS_HIGHLIGHT+",."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS+"."+n.TableDomUtils.MARKER_STYLE_CLASSES._FOCUS)[0]},_getFocusedRowIdx:function(){return this._getRowIdxsForElementsWithStyleClass("."+n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS+"."+n.TableDomUtils.MARKER_STYLE_CLASSES._FOCUS_HIGHLIGHT+",."+n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS+"."+n.TableDomUtils.MARKER_STYLE_CLASSES._FOCUS)[0]},_getHeaderColumnSelection:function(e){return this._getTableDomUtils().getTableHeaderColumn(e).classList.contains(n.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)},_getColumnSelectionMode:function(){return null==this.options.selectionMode?null:this.options.selectionMode[this._CONST_COLUMN]},_getKeyboardKeys:function(){return this._keyboardKeys||(this._keyboardKeys=[]),this._keyboardKeys.reverse()},_getLastHeaderColumnSelection:function(){return null!=this._lastSelectedColumnIdxArray&&this._lastSelectedColumnIdxArray.length>0?this._lastSelectedColumnIdxArray[0]:null},_getLastRowSelection:function(){return null!=this._lastSelectedRowIdxArray&&this._lastSelectedRowIdxArray.length>0?this._lastSelectedRowIdxArray[0]:null},_getRowIdxRowArray:function(e,t){var i=[];if(null!=e)for(var n=e[this._CONST_INDEXES].length,o=0;o<n;o++)i.push({row:{data:e[this._CONST_DATA][o],metadata:e[this._CONST_METADATA]?e[this._CONST_METADATA][o]:null,key:e[this._CONST_KEYS][o],index:e[this._CONST_INDEXES][o]},rowIdx:t+o});return i},_getRowIdxForRowKey:function(e){var t=this._getTableDomUtils().getTableBodyRows();if(null!=t&&t.length>0)for(var i=t.length,o=0;o<i;o++)if(n.Object.compareValues($(t[o]).data("rowKey"),e))return o;return null},_getDataSourceRowIndexForRowKey:function(e){var t=this._getTableDomUtils().getTableBodyRows();if(null!=t&&t.length>0)for(var i=t.length,o=0;o<i;o++)if(n.Object.compareValues($(t[o]).data("rowKey"),e)){var s=this._getData(),r=0;return this._isPagingModelDataProvider()&&(r=s.getStartItemIndex()),o+r}return null},_getEditableRowIdx:function(){var e=null;return null!=this._getEditableRowKey()&&null!==(e=this._getRowIdxForRowKey(this._getEditableRowKey()))?e:this._editableRowIdx},_getEditableRowKey:function(){return this._editableRowKey},_getEventTargetElement:function(e){return 0===e.type.indexOf("touch")?this._getTouchEventTargetElement(e):e.currentTarget},_getRowIdxsForElementsWithStyleClass:function(e){var t=this._getTableDomUtils().getTable().querySelectorAll(e),i=[];if(t&&t.length>0)for(var n=t.length,o=0;o<n;o++){for(var s=this._getTableDomUtils().getElementRowIdx(t[o]),r=!1,a=i.length,l=0;l<a;l++)i[l]===s&&(r=!0);r||i.push(s)}return i},_getRowKeyForDataSourceRowIndex:function(e){var t=this._getTableDomUtils().getTableBodyRows();if(null!=t&&t.length>0){var i=this._getData(),n=0;this._isPagingModelDataProvider()&&(n=i.getStartItemIndex());for(var o=t.length,s=0;s<o;s++)if(n+s===e)return $(t[s]).data("rowKey")}return null},_getRowKeyForRowIdx:function(e){var t=this._getTableDomUtils().getTableBodyRow(e);return null!=t?$(t).data("rowKey"):null},_getRowRenderer:function(){return this._WrapCustomElementRenderer(this.options.rowRenderer)},_getRowSelection:function(e){return this._getTableDomUtils().getTableBodyRow(e).classList.contains(n.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)},_getRowSelectionMode:function(){return null==this.options.selectionMode?null:this.options.selectionMode[this._CONST_ROW]},_getSelectedHeaderColumnIdxs:function(){return this._getColumnIdxsForElementsWithStyleClass("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS+"."+n.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)},_getSelectedRowIdxs:function(){return this._getRowIdxsForElementsWithStyleClass("."+n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS+"."+n.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)},_getSelection:function(){var e=this._getSelectedRowIdxs(),t=this._getSelectedHeaderColumnIdxs(),i=null,n=!0;if(null!=e&&e.length>0)i=e;else{if(!(null!=t&&t.length>0))return[];i=t,n=!1}for(var o,s,r,a=[],l=0,u=null,d=i.length,h=0;h<d;h++){var c=i[h];0===h?((o={})[this._CONST_STARTINDEX]={},o[this._CONST_ENDINDEX]={},o.startKey={},o.endKey={},n?(r=this._getRowKeyForRowIdx(c),s=this._getDataSourceRowIndexForRowKey(r),o.startKey[this._CONST_ROW]=r,o.endKey[this._CONST_ROW]=r,o[this._CONST_STARTINDEX][this._CONST_ROW]=s,o[this._CONST_ENDINDEX][this._CONST_ROW]=s):(o[this._CONST_STARTINDEX][this._CONST_COLUMN]=c,o[this._CONST_ENDINDEX][this._CONST_COLUMN]=c,r=this._getColumnKeyForColumnIdx(c),o.startKey[this._CONST_COLUMN]=r,o.endKey[this._CONST_COLUMN]=r),a[0]=o):(o=a[l],n?(r=this._getRowKeyForRowIdx(c),s=this._getDataSourceRowIndexForRowKey(r),o.endKey[this._CONST_ROW]=r,o[this._CONST_ENDINDEX][this._CONST_ROW]=s):(o[this._CONST_ENDINDEX][this._CONST_COLUMN]=c,r=this._getColumnKeyForColumnIdx(c),o.endKey[this._CONST_COLUMN]=r),c!==u+1&&(n?(r=this._getRowKeyForRowIdx(u),s=this._getDataSourceRowIndexForRowKey(r),o.endKey[this._CONST_ROW]=r,o[this._CONST_ENDINDEX][this._CONST_ROW]=s,(o={})[this._CONST_STARTINDEX]={},o[this._CONST_ENDINDEX]={},o.startKey={},o.endKey={},r=this._getRowKeyForRowIdx(c),s=this._getDataSourceRowIndexForRowKey(r),o.startKey[this._CONST_ROW]=r,o.endKey[this._CONST_ROW]=r,o[this._CONST_STARTINDEX][this._CONST_ROW]=s,o[this._CONST_ENDINDEX][this._CONST_ROW]=s):(o[this._CONST_ENDINDEX][this._CONST_COLUMN]=u,r=this._getColumnKeyForColumnIdx(u),o.endKey[this._CONST_COLUMN]=r,(o={})[this._CONST_STARTINDEX]={},o[this._CONST_ENDINDEX]={},o.startKey={},o.endKey={},o[this._CONST_STARTINDEX][this._CONST_COLUMN]=c,o[this._CONST_ENDINDEX][this._CONST_COLUMN]=c,r=this._getColumnKeyForColumnIdx(c),o.startKey[this._CONST_COLUMN]=r,o.endKey[this._CONST_COLUMN]=r),a[l+=1]=o)),u=c}return a},_getSlotTemplate:function(e){if(this._IsCustomElement()&&e){var t=n.BaseCustomElementBridge.getSlotMap(this._getRootElement())[e];if(t&&t.length>0&&"template"===t[0].tagName.toLowerCase())return t[0]}return null},_getSortedTableHeaderColumnIdx:function(){for(var e=this._getTableDomUtils().getTableHeaderColumns(),t=e?e.length:0,i=0;i<t;i++)if(null!=$(e[i]).data("sorted"))return i;return null},_getTabbableElements:function(e,t){var i=null;return null!=(i=t?$(e).find(":tabbable"):$(e).find(":tabbable").not(".oj-helper-hidden-accessible"))&&i.length>0?i.toArray():null},_getTableAnimationUtils:function(){return this._tableAnimationUtils||(this._tableAnimationUtils=new n.TableAnimationUtils(this)),this._tableAnimationUtils},_getTableDndContext:function(){return this._tableDndContext||(this._tableDndContext=new n.TableDndContext(this)),this._tableDndContext},_getTableDomUtils:function(){return this._tableDomUtils||(this._tableDomUtils=new n.TableDomUtils(this)),this._tableDomUtils},_getTableResizeUtils:function(){return this._tableResizeUtils||(this._tableResizeUtils=new n.TableResizeUtils(this)),this._tableResizeUtils},_getTemplateEngine:function(){return this._templateEngine},_getTouchEventTargetElement:function(e){var t=e.originalEvent.changedTouches[0];return document.elementFromPoint(t.clientX,t.clientY)},_getVisibleRowIdxs:function(){var e=[],t=this._getTableDomUtils().getTableBody(),i=this._getTableDomUtils().getTableBodyRows();if(null!=i&&i.length>0){var n,o=$(window).height(),s=t.getBoundingClientRect();if(s.top>o)return e;var r=s.left>=0?s.left+1:s.right-1,a=s.top>=0?s.top:0,l=document.elementFromPoint(r,a),u=null;null!=l&&(u=this._getTableDomUtils().getElementRowIdx(l));var d,h,c=null!=u?u:0;if(s.bottom>o)u=null,null!=(h=document.elementFromPoint(r,o-1))&&(d=this._getTableDomUtils().getElementRowIdx(h));else{var p=parseInt(window.getComputedStyle(t).borderBottomWidth,10),_=s.bottom>=0?s.bottom-p-1:0;null!=(h=document.elementFromPoint(r,_))&&(d=this._getTableDomUtils().getElementRowIdx(h))}for(null==d&&(d=i.length-1),n=c;n<=d;n++)e.push(n)}return e},_handleContextMenuSelect:function(e,t){var i,n=(i=t?t.item:$(e.target)).attr("data-oj-command"),o=this._getTableDomUtils().getFirstAncestor(this._contextMenuEvent.target,"oj-table-column-header-cell");o=null==o?this._contextMenuEventHeaderColumn:o;var s=this._getTableDomUtils().getFirstAncestor(this._contextMenuEvent.target,"oj-table-data-cell"),r=null;if(null!=o&&(r=this._getTableDomUtils().getElementColumnIdx(o)),null!=s&&(r=this._getTableDomUtils().getElementColumnIdx(s)),null!==r)if("oj-table-sortAsc"===n)this._handleSortTableHeaderColumn(r,!0,e);else if("oj-table-sortDsc"===n)this._handleSortTableHeaderColumn(r,!1,e);else if("oj-table-enableNonContiguousSelection"===n)this._nonContiguousSelection=!0,i.attr("data-oj-command","oj-table-disableNonContiguousSelection"),i.children().first().text(this.getTranslatedString("labelDisableNonContiguousSelection"));else if("oj-table-disableNonContiguousSelection"===n)this._nonContiguousSelection=!1,i.attr("data-oj-command","oj-table-enableNonContiguousSelection"),i.children().first().text(this.getTranslatedString("labelEnableNonContiguousSelection"));else if("oj-table-resize"===n){var a=this._getTableDomUtils().getContextMenuResizePopup();a.setAttribute("data-oj-columnIdx",r);var l=o||s,u=l.getBoundingClientRect().width,d=window.getComputedStyle(l);u=u-parseFloat(d["border-left-width"])-parseFloat(d["border-right-width"]);var h,c=document.getElementById(this._getTableDomUtils().getTableId()+"_resize_popup_spinner");$(c).ojInputNumber("option","value",Math.round(u)),h=null!=o?o:null!=s?s:this.getTable(),$(a).ojPopup("open",h)}},_handleContextMenuResizePopup:function(){var e=document.getElementById(this._getTableDomUtils().getTableId()+"_resize_popup_spinner"),t=$(e).ojInputNumber("option","value"),i=this._getTableDomUtils().getContextMenuResizePopup(),n=parseInt(i.getAttribute("data-oj-columnIdx"),10);$(i).ojPopup("close");for(var o=[],s=this.options.columns.length,r=0;r<s;r++)o[r]=$.extend({},{},this.options.columns[r]);o[n].width=t,this.option("columns",o,{_context:{writeback:!0,internalSet:!0}}),this._clearCachedMetadata();var a=this;this._refresh().then(function(){a._getTableDomUtils().getTable().focus()})},_handleDataFetchStart:function(){this._setDataWaitingState()},_handleDataRefresh:function(){try{if(this._dataFetching)return;var t=this;this._queueTask(function(){t._adjustScrollPositionOnRefresh();var e=t._invokeDataFetchRows({});return t=null,e})}catch(t){e.error(t)}finally{this._clearDataWaitingState()}},_handleDataRowMutate:function(e){this._dataFetching||(null!=e.detail.remove&&this._handleDataRowRemove(e.detail.remove),null!=e.detail.add&&this._handleDataRowAdd(e.detail.add),null!=e.detail.update&&this._handleDataRowChange(e.detail.update))},_getRowsFromEventDetailAdd:function(e){var t=this._getData(),i=e[this._CONST_DATA],o=e[this._CONST_INDEXES],s=[];e[this._CONST_KEYS].forEach(function(e){s.push(e)});var r=[],a=e[this._CONST_ADDBEFOREKEYS]?e[this._CONST_ADDBEFOREKEYS]:e[this._CONST_AFTERKEYS];null!=a&&a.forEach(function(e){r.push(e)}),i instanceof Array||(i=[i]);var l=0;this._isPagingModelDataProvider()&&(l=t.getStartItemIndex());var u=null;t instanceof n.TableDataSourceAdapter&&(n.FlattenedTreeTableDataSource&&t.tableDataSource instanceof n.FlattenedTreeTableDataSource?u=t.tableDataSource:n.PagingTableDataSource&&t.tableDataSource instanceof n.PagingTableDataSource&&n.FlattenedTreeTableDataSource&&t.tableDataSource.dataSource instanceof n.FlattenedTreeTableDataSource&&(u=t.tableDataSource.dataSource));var d,h,c,p,_=[],m=null,g=this._getTableDomUtils().getTableBodyRows(),f=null!=g?g.length:0,v=i.length;for(p=0;p<v;p++)c=null!=r?r[p]:"",h=null!=(d=this._getRowIdxForRowKey(c))&&d>=0?d+l:o[p]>=0?o[p]:0===p?f:o[p-1]+1,o[p]=h;for(p=0;p<v;p++){d=o[p]-l,u&&(m=u._getMetadata(d));var y={data:i[p],metadata:m,key:s[p],index:o[p]};_.push({row:y,rowIdx:d})}return _},_handleDataRowAdd:function(t){try{this._executeTableBodyRowsAdd(t)}catch(t){e.error(t)}finally{this._clearDataWaitingState()}},_getRowsFromEventDetailChange:function(e){var t=e[this._CONST_DATA],i=[];e[this._CONST_KEYS].forEach(function(e){i.push(e)}),t instanceof Array||(t=[t]);for(var n=[],o=t.length,s=0;s<o;s++){var r=this._getRowIdxForRowKey(i[s]);if(void 0!==r){var a={data:t[s],key:i[s],index:r};n.push({row:a,rowIdx:r})}}return n},_handleDataRowChange:function(t){try{this._executeTableBodyRowsChange(t)}catch(t){e.error(t)}finally{this._clearDataWaitingState()}},_getRowsFromEventDetailRemove:function(e){var t=e[this._CONST_DATA],i=[];e[this._CONST_KEYS].forEach(function(e){i.push(e)}),t instanceof Array||(t=[t]);for(var n=[],o=t.length,s=0;s<o;s++){var r=this._getRowIdxForRowKey(i[s]);if(void 0!==r){var a={data:t[s],key:i[s],index:r};n.push({row:a,rowIdx:r})}}return n},_handleDataRowRemove:function(t){try{this._executeTableBodyRowsRemove(t)}catch(t){e.error(t)}finally{this._clearDataWaitingState()}},_handleKeydownEnd:function(e){if(!this._isTableActionableMode()){var t=this._getFocusedHeaderColumnIdx();if(null!=t&&t!==this._getColumnDefs().length-1)this._setHeaderColumnFocus(this._getColumnDefs().length-1,!0,!1,null,!1);else if(!this._hasEditableRow()){var i=this._getFocusedRowIdx(),n=this._getTableDomUtils().getTableBodyRows(),o=null!=n?n.length:0;null!=i&&i!==o-1&&o>0&&this._setRowFocus(o-1,!0,!0,null,e)}}},_handleKeydownEnter:function(e){if(!this._isTableActionableMode()){var t=this._getFocusedHeaderColumnIdx();if(null!=t&&this._getColumnDefs()[t].sortable===this._OPTION_ENABLED){var i=this._getTableDomUtils().getTableHeaderColumn(t),n=$(i).data("sorted");null==n||n===this._COLUMN_SORT_ORDER._DESCENDING?this._handleSortTableHeaderColumn(t,!0,e):this._handleSortTableHeaderColumn(t,!1,e)}else{var o=this._getCurrentRow();if((o=o||{}).rowIndex>=0)if(this._isTableEditMode()){if(!this._hasEditableRow())return void this._setTableEditable(!0,!1,0,!0,e);var s=this._getTableDomUtils().getElementColumnIdx(e.target);e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT]?this._setPreviousRowEditable(s,e):this._setNextRowEditable(s,e)}else this._setTableActionableMode(!0)}}},_handleKeydownEsc:function(e){this._isTableEditMode()&&this._hasEditableRow()?(e.preventDefault(),e.stopPropagation(),this._setTableEditable(!1,!0,0,!0,e),this._getTableDomUtils().getTable().focus()):this._isTableActionableMode()&&(e.preventDefault(),e.stopPropagation(),this._setTableActionableMode(!1),this._getTableDomUtils().getTable().focus()),this._getTableResizeUtils().clearTableHeaderColumnsResize()},_handleKeydownF2:function(e){e.preventDefault(),e.stopPropagation(),this._isTableEditMode()?this._hasEditableRow()?this._setTableEditable(!1,!1,0,!0,e):this._setTableEditable(!0,!1,0,!0,e):this._isTableActionableMode()?this._setTableActionableMode(!1):this._setTableActionableMode(!0)},_handleKeydownHome:function(e){if(!this._isTableActionableMode()){var t=this._getFocusedHeaderColumnIdx();if(null!=t&&0!==t)this._setHeaderColumnFocus(0,!0,!1,null,!0);else if(!this._hasEditableRow()){var i=this._getFocusedRowIdx();null!=i&&0!==i&&this._setRowFocus(0,!0,!0,null,e)}}},_handleKeydownLeftRight:function(e){if(!this._isTableActionableMode()){var t=this._getFocusedHeaderColumnIdx(),i=this._getColumnDefs();if(null!=t){var n=t;if(this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_LEFT)?n=t>0?t-1:t:this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_RIGHT)&&(n=t<i.length-1?t+1:t),n!==t&&(this._setHeaderColumnFocus(n,!0,!1,null,this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_RIGHT)),e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT])){var o=this._getHeaderColumnSelection(n);this._setHeaderColumnSelection(n,!o,null,e,!0),o&&this._getHeaderColumnSelection(t)&&this._setHeaderColumnSelection(t,!1,null,e,!0)}}}},_handleKeydownSpacebar:function(e){if(!this._isTableActionableMode()){var t=this._getFocusedRowIdx();if(null!=t)this._setRowSelection(t,!this._getRowSelection(t),null,e,!0);else if(!this._hasEditableRow()){var i=this._getFocusedHeaderColumnIdx();null!=i&&(this._clearSelectedRows(),this._setHeaderColumnSelection(i,!this._getHeaderColumnSelection(i),null,e,!0))}}},_handleKeydownTab:function(e){var t,i,o=!1,s=this._getFocusedRowIdx(),r=this._getFocusedHeaderColumnIdx();if((null!=s||null!=r)&&(this._isTableActionableMode()||this._hasEditableRow())){var a=document.activeElement,l=this._getTableDomUtils().getTableBody(),u=this._getTableDomUtils().getTableHeader();if(this._getEditableRowIdx()===s){var d=this._getTableDomUtils().getTableBodyRow(s),h=this._getTabbableElements(d),c=null!=h?h.length:0,p=$(h).index(a);if(p===c-1&&!e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT])return this._setNextRowEditable(0,e),e.preventDefault(),void e.stopPropagation();if(0!==p||!e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT])return;var _=this._getTableDomUtils().getTableHeaderColumns();if(_){var m=_.length;return this._setPreviousRowEditable(m-1,e),e.preventDefault(),void e.stopPropagation()}}else if($.contains(l,a)||$.contains(u,a)){var g;if(i=null,$.contains(l,a)?i=this._getTableDomUtils().getTableBodyRow(s):$.contains(u,a)&&(i=this._getTableDomUtils().getTableHeader()),(t=this._getTabbableElements(i)).length>0){if(t.length>1){if(e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT]){if(a===t[0])$(t[t.length-1]).focus(),e.preventDefault(),e.stopPropagation();else for(g=0;g<t.length;g++)if(a===t[g]){t[g-1].focus(),e.preventDefault(),e.stopPropagation();break}}else if(a===t[t.length-1])$(t[0]).focus(),e.preventDefault(),e.stopPropagation();else for(g=0;g<t.length;g++)if(a===t[g]){t[g+1].focus(),e.preventDefault(),e.stopPropagation();break}}else e.preventDefault(),e.stopPropagation();return}}if((null!=s&&!this._hasEditableRow()||null!=r)&&!e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT]){if(o=!0,i=null,null!=s?i=this._getTableDomUtils().getTableBodyRow(s):null!=r&&(i=this._getTableDomUtils().getTableHeaderColumn(r)),null!=(t=this._getTabbableElements(i)))$(t[0]).focus();else if(null!=s){var f=this._getTabbableElements(l);$(f[0]).focus()}else if(null!=r){var v=this._getTabbableElements(u);$(v[0]).focus()}e.preventDefault(),e.stopPropagation()}}if(o)this._removeKeyboardKey(e.keyCode);else{this._clearKeyboardKeys(),this._clearFocusedHeaderColumn(),this._clearFocusedRow(!1),this._setTableActionableMode(!1);var y=this._getTableDomUtils().getTable(),b=this._getTabbableElements(y,!0),C=null!=b?b.length:0,S=y;if(!e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT]&&C>0)if(this._getTableDomUtils()._isFF()){var E=this._getTableDomUtils().getTableContainer();(S=document.createElement(n.TableDomUtils.DOM_ELEMENT._A)).setAttribute(n.TableDomUtils.DOM_ATTR._TABINDEX,"0"),S.setAttribute(n.TableDomUtils.DOM_ATTR._HREF,"#"),S.classList.add(n.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),E.appendChild(S),this._temporaryFocusForFF=S}else S=b[C-1];this._temporaryTableChildElementFocus=!0,S.focus();var T=this;setTimeout(function(){T._temporaryTableChildElementFocus=!1,T._temporaryFocusForFF&&($(T._temporaryFocusForFF).remove(),T._temporaryFocusForFF=null)},0)}},_handleKeydownUpDown:function(e){if(!this._isTableActionableMode()){var t=this._getFocusedRowIdx(),i=this._getFocusedHeaderColumnIdx();if(null==t||this._hasEditableRow())null!=i&&this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_DOWN)&&this._setRowFocus(0,!0,!0,null,e);else{var n=this._getTableDomUtils().getTableBodyRows(),o=null!=n?n.length:0,s=t;if(this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_UP)?t>0?s=t-1:this._hasEditableRow()||(s=t):this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_DOWN)&&(s=t<o-1?t+1:t),s!==t){if(!this._setRowFocus(s,!0,!0,null,e))return;if(this._getTableDomUtils().getTable().focus(),e[this._KEYBOARD_CODES._KEYBOARD_MODIFIER_SHIFT]){var r=this._getRowSelection(s);this._setRowSelection(s,!r,null,e,!0),r&&this._getRowSelection(t)&&this._setRowSelection(t,!1,null,e,!0)}}else s===t&&0===t&&this._isKeyboardKeyPressed(this._KEYBOARD_CODES._KEYBOARD_CODE_UP)&&this._setHeaderColumnFocus(0,!0,!1,null,!0)}}},_handleMouseEnterSelection:function(e){var t,i=this._getTableDomUtils().getElementRowIdx(e);if(null!=i&&null!=this._mouseDownRowIdx&&this._mouseDownRowIdx!==i){var n=this._mouseDownRowIdx,o=this._getSelectedRowIdxs();if(i<n){for(t=0;t<o.length;t++)(o[t]<i||o[t]>n)&&this._setRowSelection(o[t],!1,e,null,!0);for(t=n;t>=i;t--)this._setRowSelection(t,!0,e,null,!0),this._getTableDomUtils().moveTableBodyRowTouchSelectionAffordanceTop(t)}else{for(t=0;t<o.length;t++)(o[t]>i||o[t]<n)&&this._setRowSelection(o[t],!1,e,null,!0);for(t=n;t<=i;t++)this._setRowSelection(t,!0,e,null,!0),this._getTableDomUtils().moveTableBodyRowTouchSelectionAffordanceBottom(t)}}},_handleScrollerMaxRowCount:function(){var e=this.getTranslatedString("msgScrollPolicyMaxCountSummary"),t=this.getTranslatedString("msgScrollPolicyMaxCountDetail");this._showInlineMessage(e,t,D.SEVERITY_LEVEL.WARNING)},_handleScrollerScrollLeft:function(e){this._scrollLeft=e;var t=this._getTableDomUtils().getTableHeaderRow();t&&("rtl"===this._GetReadingDirection()?t.style[n.TableDomUtils.CSS_PROP._RIGHT]="-"+e+n.TableDomUtils.CSS_VAL._PX:t.style[n.TableDomUtils.CSS_PROP._LEFT]="-"+e+n.TableDomUtils.CSS_VAL._PX);var i=this._getTableDomUtils().getTableFooterRow();i&&("rtl"===this._GetReadingDirection()?i.style[n.TableDomUtils.CSS_PROP._RIGHT]="-"+e+n.TableDomUtils.CSS_VAL._PX:i.style[n.TableDomUtils.CSS_PROP._LEFT]="-"+e+n.TableDomUtils.CSS_VAL._PX)},_handleScrollerScrollTop:function(e){this._scrollTop=e},_handleSortTableHeaderColumn:function(e,t,i){this._clearSortedHeaderColumn(e);var n=this._getColumnDefs()[e],o=null==n.sortProperty?n.field:n.sortProperty;this._invokeDataSort(o,t,i),this._sortColumn=n,this._refreshSortTableHeaderColumn(o,t)},_hasEditableRow:function(){return!!this._isTableEditMode()&&null!==this._getEditableRowIdx()},_hasRowOrCellRendererOrTemplate:function(e){if(null!=this._getRowRenderer())return!0;var t=null,i=null,n=this._getColumnDefs();if(null!=e)t=this._getColumnRenderer(e,"cell"),i=this._getSlotTemplate(n[e][this._CELL_TEMPLATE]);else for(var o=n.length,s=0;s<o&&null==(t=this._getColumnRenderer(s,"cell"))&&null==(i=this._getSlotTemplate(n[s][this._CELL_TEMPLATE]));s++);return null!=t||null!=i},_hideInlineMessage:function(){if(this._inlineMessageShown){var e=this._getTableDomUtils().getTableInlineMessage();this._getTableDomUtils().getTableContainer().classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._WARNING),e.classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._WARNING),e.style[n.TableDomUtils.CSS_PROP._BOTTOM]="",e.style[n.TableDomUtils.CSS_PROP._DISPLAY]=n.TableDomUtils.CSS_VAL._NONE,this._inlineMessageShown=!1}},_hideNoDataMessage:function(){if(this._noDataMessageShown){var e=this._getTableDomUtils().getTableBodyMessageRow();null!=e&&$(e).remove(),this._noDataMessageShown=!1}},_hideStatusMessage:function(){this._showStatusTimeout&&(clearTimeout(this._showStatusTimeout),this._showStatusTimeout=null),this._statusMessageShown&&(this._getTableDomUtils().getTableStatusMessage().style[n.TableDomUtils.CSS_PROP._DISPLAY]=n.TableDomUtils.CSS_VAL._NONE,this._statusMessageShown=!1)},_hideTableHeaderColumnSortLink:function(e,t){if(this._getColumnDefs()[e].sortable===this._OPTION_ENABLED){var i=this._getTableDomUtils().getTableHeaderColumn(e),o=$(i).data("sorted");if(!t||null!=o&&o!==this._COLUMN_SORT_ORDER._DESCENDING){if(!t&&(null==o||o===this._COLUMN_SORT_ORDER._ASCENDING)){var s=i.querySelectorAll("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_LINK_CLASS);s.length>0&&((s=s[0]).classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED),s.classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._ENABLED),s.classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED))}}else{var r=i.querySelectorAll("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_LINK_CLASS);r.length>0&&((r=r[0]).classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED),r.classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._ENABLED),r.classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED))}}},_initFetch:function(e,t){e=e||{};var i=this,o=this._getData();return null==o||!n.DataProviderFeatureChecker.isDataProvider(o)||this._isPagingModelDataProvider()&&!t?null==o?this._queueTask(function(){return Promise.resolve()}):void 0:this._queueTask(function(){return i._getTableDomUtils().getScroller().scrollTop=0,o instanceof n.TableDataSourceAdapter&&(e.fetchType="init",i._isLoadMoreOnScroll()&&(e[i._CONST_OFFSET]=0)),i._invokeDataFetchRows(e,!0)})},_initTemplateEngine:function(){var t=this;this._queueTask(function(){var i;try{i=p.__getTemplateEngine().then(function(e){t._templateEngine=e},function(t){e.warn(t)})}catch(t){e.warn(t),i=Promise.resolve(null)}return i})},_invokeDataFetchRows:function(e,t){!(e=e||{})[this._CONST_PAGESIZE]&&this._isLoadMoreOnScroll()?e[this._CONST_PAGESIZE]=this.options.scrollPolicyOptions.fetchSize:e[this._CONST_PAGESIZE]=-1;var i=this._getData();if(null!=i){var o=this;return new Promise(function(s){o._noMoreData=!1,o._setDataWaitingState(),o._dataProviderAsyncIterator=i.fetchFirst(e)[Symbol.asyncIterator](),o._dataProviderAsyncIterator.next().then(function(e){var r=e[o._CONST_VALUE],a=r[o._CONST_DATA],l=r.metadata.map(function(e){return e[o._CONST_KEY]}),u=0;i instanceof n.TableDataSourceAdapter&&(u=i[o._CONST_OFFSET]);var d=0;o._isPagingModelDataProvider()&&(d=i.getStartItemIndex());for(var h=[],c=a.length,p=0;p<c;p++)h[p]=u+d+p;null!=o._domScroller&&o._domScroller.destroy(),o._refreshAll({data:a,metadata:[],keys:l,indexes:h},u,t,t).then(function(){o._clearDataWaitingState(),o._processFetchSort(r),o._isLoadMoreOnScroll()&&o._registerDomScroller(),o=null,s(e)})},function(){o._clearDataWaitingState();var e=o._getTableDomUtils().getTableBodyRows();null!=e&&0!==e.length||o._showNoDataMessage(),s(null)})})}return Promise.resolve(null)},_invokeDataSort:function(e,t,i){if(this._getData()){this._showStatusMessage();var n=[],o={};o[this._CONST_ATTRIBUTE]=e,o.direction=t?this._COLUMN_SORT_ORDER._ASCENDING:this._COLUMN_SORT_ORDER._DESCENDING,n.push(o),this._trigger("sort",i,{header:n[0][this._CONST_ATTRIBUTE],direction:n[0].direction}),this._adjustScrollPositionOnRefresh(),this._initFetch({sortCriteria:n},!0)}},_isColumnMetadataUpdated:function(){if(null!=this._columnDefArray){var e=this._getColumnMetadata();if(this._columnDefArray.length!==e.length)return!0;for(var t=e.length,i=0;i<t;i++)for(var n=Object.keys(e[i]),o=0;o<n.length;o++){var s=n[o];if(e[i][s]!==this._columnDefArray[i][s]&&("id"!==s||null==e[i][s]||0!==e[i][s].indexOf(this._COLUMN_HEADER_ID_PREFIX)||null==this._columnDefArray[i][s]||0!==this._columnDefArray[i][s].indexOf(this._COLUMN_HEADER_ID_PREFIX)))return!0}return!1}return!0},_isKeyboardKeyPressed:function(e){for(var t=this._getKeyboardKeys(),i=t.length,n=0;n<i;n++)if(t[n]===e)return!0;return!1},_isLoadMoreOnScroll:function(){return this.options.scrollPolicy===this._OPTION_SCROLL_POLICY._LOADMORE_ON_SCROLL},_isNodeEditable:function(e){return this._isNodeType(e,/^INPUT|TEXTAREA/)},_isNodeClickable:function(e){return this._isNodeType(e,/SELECT|OPTION|BUTTON|^A\b/)},_isNodeDraggable:function(e){return $(e).closest("[draggable='true']").length>0},_isNodeType:function(e,t){for(var i=this._getTableDomUtils().getTable();null!=e&&e!==i;){var o=e.nodeName;if(o===n.TableDomUtils.DOM_ELEMENT._TD||o===n.TableDomUtils.DOM_ELEMENT._TH)break;if(3!==e.nodeType&&o.match(t)&&-1!==e.getAttribute(n.TableDomUtils.DOM_ATTR._TABINDEX))return!0;e=e.parentNode}return!1},_isPagingModelDataProvider:function(){var e=this._getData();return null!=e.getStartItemIndex&&null!==e.getStartItemIndex()&&e.getStartItemIndex()>=0},_isStatusMessageShown:function(){return this._statusMessageShown},_isTableActionableMode:function(){return this._tableActionableMode},_isTableEditMode:function(){return this.options.editMode===this._OPTION_EDIT_MODE._ROW_EDIT},_isTableFooterless:function(){for(var e=this._getColumnDefs(),t=e.length,i=0;i<t;i++){var n=this._getColumnRenderer(i,"footer"),o=this._getSlotTemplate(e[i][this._FOOTER_TEMPLATE]);if(null!=n)return!1;if(null!=o)return!1}return!0},_isTableHeaderless:function(){for(var e=this._getColumnDefs(),t=e.length,i=0;i<t;i++){var n=this._getSlotTemplate(e[i][this._HEADER_TEMPLATE]);if(null!=e[i].headerText||null!=e[i].headerStyle||null!=e[i].sortable&&e[i].sortable!==this._OPTION_DISABLED||null!=e[i].sortProperty||null!=e[i].headerRenderer||null!=n)return!1}return!0},_isTableHeaderColumnsRendered:function(){return!0===this._renderedTableHeaderColumns},_isTableRefreshNeeded:function(e,t){var i=this._cachedOptions,o=!1;return"contextMenu"===e&&t==="#"+this._getTableDomUtils().getTableId()+"_contextmenu"?o=!1:"columns"!==e||this._isColumnMetadataUpdated()?"selection"===e||"currentRow"===e||n.Object.compareValues(t,i[e])||(o=!0):o=!1,this._cachedOptions=$.extend(!0,{},this.options),o},_isTableSortable:function(){for(var e=this._getColumnDefs(),t=e.length,i=0;i<t;i++)if(e[i].sortable===this._OPTION_ENABLED)return!0;return!1},_isTableColumnsResizable:function(){for(var e=this._getColumnDefs(),t=e.length,i=0;i<t;i++)if(e[i].resizable===this._OPTION_ENABLED)return!0;return!1},_isTableColumnsWidthSet:function(){for(var e=this._getColumnDefs(),t=e.length,i=0;i<t;i++)if(null!==e[i].width)return!0;return!1},_isTouchDevice:function(){if(null==this._isTouch){var e=navigator.userAgent.toLowerCase();-1!==e.indexOf("mobile")||-1!==e.indexOf("android")?this._isTouch=!0:this._isTouch=!1}return this._isTouch},_processFetchSort:function(t){try{var i=this,o=t.fetchParameters,s=this._getColumnDefs(),r=o[this._CONST_SORTCRITERIA];if(null!=r&&r.length>0){var a=r[0];this._refreshSortTableHeaderColumn(a.attribute,a.direction===this._COLUMN_SORT_ORDER._ASCENDING);var l=this.options.selection;if(null!=l){var u=!1;if(l.length>1)u=!0;else if(null!=l[0]){var d=l[0][this._CONST_STARTINDEX],h=l[0][this._CONST_ENDINDEX];n.Object.compareValues(d,h)||null==h||(u=!0)}u&&(this._setSelection(null),this.option("selection",[],{_context:{writeback:!0,internalSet:!0}}))}this._setCurrentRow(this.options.currentRow,null,!1);for(var c=null,p=s.length,_=0;_<p;_++){var m=s[_],g=null==m.sortProperty?m.field:m.sortProperty;if(a.attribute===g){c=_;break}}null!=c&&setTimeout(function(){i._scrollColumnIntoViewport(c),i=null,c=null},0)}else this._clearSortedHeaderColumn()}catch(t){e.error(t)}},_processSlottedChildren:function(){var e=this._getTableDomUtils().getTableBottomSlot();null!=e&&$(e).remove();for(var t=n.BaseCustomElementBridge.getSlotMap(this._getRootElement()),i=Object.keys(t),o=0;o<i.length;o++){var s=i[o];if("bottom"===s){var r=t[s];if(null!=r){e=this._getTableDomUtils().createTableBottomSlot();for(var a=0;a<r.length;a++)e.appendChild(r[a])}}}},_refreshAll:function(e,t,i,o){if((this._isColumnMetadataUpdated()||!this._isTableHeaderColumnsRendered()&&!this._isTableHeaderless())&&(this._clearCachedMetadata(),this._refreshTableHeader(),null!=this._sortColumn)){var s=!1,r=this._getColumnDefs();if(null!=r){for(var a=r.length,l=0;l<a;l++){var u=r[l];if(n.Object.compareValues(u,this._sortColumn)){s=!0;break}}s||this._initFetch(null,!0)}}return this._clearCachedDimensions(),this._refreshTableFooter(),this._refreshTableBody(e,t,i,o)},_refreshSortTableHeaderColumn:function(e,t){for(var i,o,s=this._getColumnDefs(),r=null,a=s.length,l=0;l<a;l++){var u=s[l];if(e===(null==u.sortProperty?u.field:u.sortProperty)){r=l;break}}if(null!=r){this._clearSortedHeaderColumn(r);var d=this._getTableDomUtils().getTableHeaderColumn(r);if(null!=d){var h=$(d).data("sorted");if(t&&h!==this._COLUMN_SORT_ORDER._ASCENDING){$(d).data("sorted",this._COLUMN_SORT_ORDER._ASCENDING);var c=d.querySelectorAll("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_LINK_CLASS);c.length>0&&((c=c[0]).classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._ENABLED),c.classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED)),(i=d.querySelectorAll("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_CLASS)).length>0&&(i=i[0]).classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED),(o=d.querySelectorAll("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_CLASS)).length>0&&(o=o[0]).classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED),this._hideTableHeaderColumnSortLink(r,!t)}else if(!t&&h!==this._COLUMN_SORT_ORDER._DESCENDING){$(d).data("sorted",this._COLUMN_SORT_ORDER._DESCENDING);var p=d.querySelectorAll("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_LINK_CLASS);p.length>0&&((p=p[0]).classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._ENABLED),p.classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED)),(o=d.querySelectorAll("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_CLASS)).length>0&&(o=o[0]).classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED),(i=d.querySelectorAll("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_CLASS)).length>0&&(i=i[0]).classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED)}}}},_refreshTableBody:function(e,t,i,n){var o=this._getTableDomUtils().getTableBody();if(null==o)return Promise.resolve();var s,r,a,l=this._getRowIdxRowArray(e,t),u=$.contains(o,document.activeElement),d=!1;if(0===t)u&&(d=!0),this._getTableDomUtils().removeAllTableBodyRows();else if(null!=(s=this._getTableDomUtils().getTableBodyRows())&&s.length>0)for(a=s.length-1;a>=t;a--)u&&null!=(r=this._getTableDomUtils().getTableBodyRow(a))&&$.contains(r,document.activeElement)&&(d=!0,u=!1),this._getTableDomUtils().removeTableBodyRow(a);if(d&&this._getTableDomUtils().getTable().focus(),this._getTableDomUtils().clearCachedDomRowData(),this._hideNoDataMessage(),s=o.children,0!==l.length||null!=s&&0!==s.length){var h=document.createDocumentFragment(),c=l.length;for(a=0;a<c;a++){var p=l[a].row,_=l[a].rowIdx;null!=p&&(r=this._getTableDomUtils().createTableBodyRow(_,p[this._CONST_KEY]),this._getTableDomUtils().styleTableBodyRow(r,!0),this._getTableDomUtils().insertTableBodyRow(_,r,p,h),this._refreshTableBodyRow(_,p,r,h,t,!0))}return o.appendChild(h),this._getTableDomUtils().clearCachedDomRowData(),this._getTableDomUtils().refreshTableDimensions(null,null,i,n,!0),this._hasRowOrCellRendererOrTemplate()&&w.subtreeAttached(o),o.rows.length>1&&(this._rowHeight=o.rows[1].offsetHeight),this._waitForAllComponentsToResolve(o)}return this._showNoDataMessage(),Promise.resolve()},_refreshTableBodyRow:function(t,i,o,s,r,a){var l=this._getRowRenderer(),u=this._getTableDomUtils().getTableBody();(isNaN(t)||t<0)&&e.error("Error: Invalid rowIdx value: "+t);var d=this._getTableDomUtils().hashCode(i[this._CONST_KEY]);if(null==o){if(!(o=this._getTableDomUtils().getTableBodyRow(t)))return null;$(o).empty(),this._getTableDomUtils().createTableBodyCellAccSelect(t,i[this._CONST_KEY],d,o,!0)}this._hideNoDataMessage();var h=this._getCurrentRow();h=h||{};var c=n.TableRendererUtils.getRendererContextObject(this,o,{row:i,isCurrentRow:h.rowIndex===t}),p={rowContext:c,row:i[this._CONST_DATA],componentElement:c.componentElement,parentElement:c.parentElement,data:i[this._CONST_DATA]};if(null!=l){var _=l(p);null!=_?o.appendChild(_):(null==s?o=u.children[t]:(r=null==r?0:r,o=s.children?s.children[t-r]:$(s).children()[t-r]),this._getTableDomUtils().clearCachedDomRowData(),this._getTableDomUtils().setTableBodyRowAttributes(i,o),this._getTableDomUtils().styleTableBodyRow(o,!1)),this._getTableDomUtils().createTableBodyCellAccSelect(t,i[this._CONST_KEY],d,o,!1);var m,g,f=o.getElementsByTagName(n.TableDomUtils.DOM_ELEMENT._TD),v=f.length;for(m=1;m<v;m++)g=f[m],this._getTableDomUtils().setTableBodyCellAttributes(t,i[this._CONST_KEY],d,m-1,g),this._getTableDomUtils().styleTableBodyCell(m-1,g,!1);if(null!=this._columnsDestMap)for(m=0;m<this._columnsDestMap.length-1;m++)if(this._columnsDestMap[m]>m){var y=f[this._columnsDestMap[m]+1],b=f[m+1];y.parentNode.insertBefore(y,b),f=o.getElementsByTagName(n.TableDomUtils.DOM_ELEMENT._TD)}}else n.TableRendererUtils.tableBodyRowDefaultRenderer(this,t,i,p);return o},_refreshTableFooter:function(){var e=this._getColumnDefs(),t=this._getTableDomUtils().getTableFooter();if(!t){if(this._isTableFooterless())return;t=this._getTableDomUtils().createTableFooter(),this._getTableDomUtils().styleTableFooter(t)}var i=this._getTableDomUtils().getTableFooterRow();if(this._hasFooterTemplate&&(this._cleanTemplateNodes(i),this._hasFooterTemplate=!1),$(i).empty(),e&&e.length>0){this._getTableDomUtils().createTableFooterAccSelect(i);for(var o=e.length,s=0;s<o;s++){var r=e[s],a=this._getColumnRenderer(s,"footer"),l=this._getTableDomUtils().createTableFooterCell(s,this._getColumnSelectionMode());if(this._getTableDomUtils().styleTableFooterCell(s,l),this._getTableDomUtils().insertTableFooterCell(s,l),a){var u=n.TableRendererUtils.getRendererContextObject(this,l,{}),d=a({footerContext:u,columnIndex:s,componentElement:u.componentElement,parentElement:u.parentElement});null!=d?(l.empty(),l.appendChild(d)):(l=$(i).children(":not(."+n.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS+")")[s],this._getTableDomUtils().styleTableFooterCell(s,l,this._getColumnSelectionMode()))}else{var h=this._getSlotTemplate(r[this._FOOTER_TEMPLATE]);if(h){var c=this._getRootElement(),p=this._getTemplateEngine();if(null!=p){var _=n.TableRendererUtils.getSlotTemplateContextObject(this),m=p.execute(c,h,_,this.options.as);m instanceof Array||(m=[m]),m.map(function(e){l.appendChild(e)}),this._hasFooterTemplate=!0}}}}}},_refreshTableHeader:function(){var e=this,t=this._getColumnDefs(),i=this._getTableDomUtils().getTableHeader();if(!i){if(this._isTableHeaderless())return;i=this._getTableDomUtils().createTableHeader(),this._getTableDomUtils().styleTableHeader(i)}var o=this._getTableDomUtils().getTableHeaderRow();if(this._unregisterChildStateListeners(o),this._hasHeaderTemplate&&(this._cleanTemplateNodes(o),this._hasHeaderTemplate=!1),$(o).empty(),t&&t.length>0){var s=this._getTableDomUtils().createTableHeaderAccSelectRowColumn();o.appendChild(s);for(var r=t.length,a=0;a<r;a++){var l=t[a],u=this._getColumnRenderer(a,"header"),d=this._getTableDomUtils().createTableHeaderColumn(a,this._getColumnSelectionMode());if(u){var h=n.TableRendererUtils.getRendererContextObject(this,d,{}),c={headerContext:h,columnIndex:a,data:l.headerText,componentElement:h.componentElement,parentElement:h.parentElement};l.sortable===n.TableDomUtils._OPTION_ENABLED?c.columnHeaderSortableIconRenderer=function(t,i){n.TableRendererUtils.columnHeaderSortableIconRenderer(e,this,t,i)}:c.columnHeaderDefaultRenderer=function(t,i){n.TableRendererUtils.columnHeaderDefaultRenderer(e,this,t,i)};var p=u(c);null!=p?($(d).empty(),$(d).append(p)):(d=$(o).children(":not(."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ACC_SELECT_ROW_CLASS+")")[a],this._getTableDomUtils().setTableHeaderColumnAttributes(a,d),this._getTableDomUtils().styleTableHeaderColumn(a,d,this._getColumnSelectionMode(),!1))}else{var _=this._getSlotTemplate(l[this._HEADER_TEMPLATE]);if(_){var m=this._getRootElement(),g=this._getTemplateEngine();if(null!=g){d&&$(d).empty();var f=n.TableRendererUtils.getHeaderSlotTemplateContextObject(this,l.headerText,a),v=g.execute(m,_,f,this.options.as);v instanceof Array||(v=[v]),v.map(function(e){d.appendChild(e)}),this._hasHeaderTemplate=!0}}}this._getTableDomUtils().createTableHeaderColumnAccSelect(a,this._getColumnSelectionMode())}this._renderedTableHeaderColumns=!0}},_refreshTableStatusMessage:function(){var e=this._getTableDomUtils().getTableStatusMessage();null!=e&&$(e).remove(),this._getTableDomUtils().createTableStatusMessage()},_registerCustomEvents:function(){var e=$.event.special;e.ojtablebeforecurrentrow={handle:function(e){return e.handleObj.handler.apply(this,[e,arguments[1]])}},e.ojtablesort={handle:function(e){return e.handleObj.handler.apply(this,[e,arguments[1]])}}},_registerDataSourceEventListeners:function(){var e=this._getData();if(null!=e){this._unregisterDataSourceEventListeners(),this._dataProviderEventHandlers=[],this._dataProviderEventHandlers.push({eventType:"mutate",eventHandler:this._handleDataRowMutate.bind(this)}),this._dataProviderEventHandlers.push({eventType:"refresh",eventHandler:this._handleDataRefresh.bind(this)});for(var t=this._dataProviderEventHandlers.length,i=0;i<t;i++){var n=e.addEventListener(this._dataProviderEventHandlers[i].eventType,this._dataProviderEventHandlers[i].eventHandler);n&&(this._dataProviderEventHandlers[i].eventHandler=n)}}},_registerDomEventListeners:function(){var e=this._getTableDomUtils().getScroller();null!=e&&(null==this._scrollEventListener&&(this._scrollEventListener=function(e){this._handleScrollerScrollLeft(this._getTableDomUtils().getScrollLeft(e.target)),this._handleScrollerScrollTop(e.target.scrollTop);var t=this;t._skipScrollUpdate||t._ticking||(window.requestAnimationFrame(function(){t.option("scrollPosition",t._getCurrentScrollPosition(),{_context:{originalEvent:e,internalSet:!0}}),t._ticking=!1}),this._ticking=!0),this._skipScrollUpdate=!1}.bind(this)),$(e).off("scroll",this._scrollEventListener),$(e).on("scroll",this._scrollEventListener))},_registerDomScroller:function(){var e=this;null!=this._domScroller&&this._domScroller.destroy(),this._domScrollerSuccessFunc=function(t){if(e._clearDataWaitingState(),null!=t)if(e._noMoreData=!1,t.maxCountLimit)e._noMoreData=!0,t.maxCountLimit&&e._handleScrollerMaxRowCount(),e._syncScrollPosition();else{var i=t[e._CONST_VALUE],n=i[e._CONST_DATA],o=i.metadata.map(function(t){return t[e._CONST_KEY]});o=o.filter(function(t,i){return null===e._getRowIdxForRowKey(t)||(n.splice(i,1),!1)}),e._queueTask(function(){for(var i=this._getTableDomUtils().getTableBodyRows(),s=null!=i?i.length:0,r=[],a=0;a<n.length;a++)r[a]=s+a;return e._refreshAll({data:n,keys:o,indexes:r},s).then(function(){t.done&&(e._noMoreData=!0,e._syncScrollPosition())})})}else e._syncScrollPosition()};var t=this._getTableDomUtils().getTableBodyRows(),i=null!=t?t.length:0;this._domScroller=new n.DomScroller(this._getTableDomUtils().getScroller(),this._getData(),{asyncIterator:this._dataProviderAsyncIterator,fetchSize:this.options.scrollPolicyOptions.fetchSize,maxCount:this.options.scrollPolicyOptions.maxCount,initialRowCount:i,success:this._domScrollerSuccessFunc.bind(this),request:this._handleDataFetchStart.bind(this),fetchTrigger:1})},_registerResizeListener:function(){var e=this._getTableDomUtils().getTableContainer();if(!this._resizeListener){var t=this;this._resizeListener=function(){c.getContext(t.element[0]).getBusyContext().whenReady().then(function(){t._clearCachedDimensions();var e=$(t._getTableDomUtils().getTableContainer()).outerHeight(),i=$(t._getTableDomUtils().getTableContainer()).outerWidth();t._getTableDomUtils().refreshTableDimensions(i,e)})}}this._isResizeListenerAdded||(n.DomUtils.addResizeListener(e,this._resizeListener,50),this._isResizeListenerAdded=!0)},_removeKeyboardKey:function(e){for(var t=this._getKeyboardKeys(),i=t.length,n=0;n<i;n++)t[n]===e&&t.splice(n,1)},_scrollColumnIntoViewport:function(e){var t,i="rtl"===this._GetReadingDirection(),n=this._getTableDomUtils().getTableBody(),o=this._getTableDomUtils().getTableHeaderColumn(e);if(o){var s=this._getTableDomUtils().getScrollbarWidth(),r=o.getBoundingClientRect(),a=n.getBoundingClientRect(),l=!1;i?(r.left<a.left+s&&(t=a.left-r.left+s,this._getTableDomUtils()._isIE()||(t*=-1),$(n).scrollLeft($(n).scrollLeft()+t),l=!0),r.right>a.right&&!l&&(t=r.right-a.right,this._getTableDomUtils()._isIE()||(t*=-1),$(n).scrollLeft($(n).scrollLeft()-t))):(r.left<a.left&&(t=a.left-r.left,$(n).scrollLeft($(n).scrollLeft()-t),l=!0),r.right>a.right-s&&!l&&(t=r.right-a.right+s,$(n).scrollLeft($(n).scrollLeft()+t)))}},_scrollRowIntoViewport:function(e){var t,i=this._getTableDomUtils().getTableBodyRow(e),n=this._getTableDomUtils().getScrollbarHeight(),o=i.getBoundingClientRect(),s=this._getTableDomUtils().getScroller(),r=s.getBoundingClientRect(),a=!1;o.bottom>r.bottom-n&&(t=o.bottom-r.bottom+n,$(s).scrollTop($(s).scrollTop()+t),a=!0),o.top<r.top&&!a&&(t=r.top-o.top,$(s).scrollTop($(s).scrollTop()-t))},_setCurrentRow:function(t,i,o){var s,r,a,l,u,d,h,c,p=this._currentRow,_=!0,m=this;if(null==t){if(null!=p){try{_=this._trigger("beforeCurrentRow",i,{currentRow:null,previousCurrentRow:this._currentRow})}catch(t){return u=this._LOGGER_MSG._ERR_PRECURRENTROW_ERROR_SUMMARY,d=v.applyParameters(this._LOGGER_MSG._ERR_PRECURRENTROW_ERROR_DETAIL,{error:t.toString()}),e.info(u+"\n"+d),!1}if(!_)return!1;if(r=p.rowIndex,a=this._getRowKeyForDataSourceRowIndex(r),l=this._getRowIdxForRowKey(a),!1===this._setTableEditable(!1,!1,0,!0,i))return this._currentRow=p,h=document.activeElement,c=this._getTableDomUtils().getElementColumnIdx(h),this._queueTask(function(){var e=l,t=c;null!=e&&null!=t?setTimeout(function(){m._setCellFocus(e,t)},0):null!=e&&setTimeout(function(){m._setRowFocus(e,!0,!1,null,null)},0)}),!1;this._currentRow=null,this.option("currentRow",null,{_context:{writeback:!0,originalEvent:i,internalSet:!0}}),null==i&&this._setRowFocus(-1,!0,!1,null,i),null!=(s=this._getTableDomUtils().getTableBodyRow(l))&&s.classList.remove(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_CURRENT_ROW_CLASS)}return!0}var g=this._getData(),f=t.rowIndex,y=t.rowKey;null==y&&(y=this._getRowKeyForDataSourceRowIndex(f)),f=this._getDataSourceRowIndexForRowKey(y);var b=this._getRowIdxForRowKey(y);if(t={rowIndex:f,rowKey:y},-1!==b&&(!g||b<-1||null===b||null===y)){if(u=this._LOGGER_MSG._ERR_CURRENTROW_UNAVAILABLE_INDEX_SUMMARY,d=v.applyParameters(this._LOGGER_MSG._ERR_CURRENTROW_UNAVAILABLE_INDEX_DETAIL,{rowIdx:b}),o)throw new Error(u+"\n"+d);return e.info(u+"\n"+d),!1}var C=this._getFocusedRowIdx(),S=!n.Object.compareValues(this._currentRow,t);if(S){try{_=this._trigger("beforeCurrentRow",i,{currentRow:{rowIndex:f,rowKey:y},previousCurrentRow:this._currentRow})}catch(t){return u=this._LOGGER_MSG._ERR_PRECURRENTROW_ERROR_SUMMARY,d=v.applyParameters(this._LOGGER_MSG._ERR_PRECURRENTROW_ERROR_DETAIL,{error:t.toString()}),e.info(u+"\n"+d),!1}if(!_)return!1;if(this._currentRow={rowIndex:f,rowKey:y},null!=p&&(r=p.rowIndex,a=this._getRowKeyForDataSourceRowIndex(r),l=this._getRowIdxForRowKey(a)),!1===this._setTableEditable(!1,!1,0,!0,i))return this._currentRow=p,h=document.activeElement,c=this._getTableDomUtils().getElementColumnIdx(h),this._queueTask(function(){var e=l,t=c;null!=e&&null!=t?setTimeout(function(){m._setCellFocus(e,t)},0):null!=e&&setTimeout(function(){m._setRowFocus(e,!0,!1,null,null)},0)}),!1;this.option("currentRow",this._currentRow,{_context:{writeback:!0,originalEvent:i,internalSet:!0}}),null!=(s=this._getTableDomUtils().getTableBodyRow(b))&&s.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_CURRENT_ROW_CLASS),null!=p&&null!=(s=this._getTableDomUtils().getTableBodyRow(l))&&s.classList.remove(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_CURRENT_ROW_CLASS)}return(S||C!==t.rowIndex)&&null==i&&this._setRowFocus(b,!0,!1,null,i),!0},_setDataWaitingState:function(){this._showStatusMessage(),this._hideNoDataMessage(),this._dataFetching=!0,this._dataResolveFunc||(this._dataResolveFunc=this._addComponentBusyState("is waiting for data."))},_setCellFocus:function(e,t){var i=this._getTableDomUtils().getTableBodyCell(e,t);if(!i)return!1;for(var n=!1,o=i.querySelectorAll("*"),s=0;s<o.length;s++)n||$(o[s]).is(":focusable")&&($(o[s]).focus(),n=$(o[s]).is(":focus")||o[s]===document.activeElement);return n},_setCellInRowFocus:function(e,t,i){if(!this._setCellFocus(e,t)){var n=this._getTableDomUtils().getTableBodyCells(e);if(n)for(var o=n.length,s=0;s<o;s++){var r=s;if(i||(r=o-s-1),this._setCellFocus(e,r))return}}},_setComponentNotReady:function(){this._readyResolveFunc||(this._readyResolveFunc=this._addComponentBusyState("is being loaded."))},_setComponentReady:function(){this._readyResolveFunc&&(this._readyResolveFunc(),this._readyResolveFunc=null)},_setEditableRowIdx:function(e){this._editableRowKey=this._getRowKeyForRowIdx(e),this._editableRowIdx=e},_setFocusInHandler:function(e){this._focusInHandler=e},_setFocusOutHandler:function(e){this._focusOutHandler=e},_setHeaderColumnFocus:function(e,t,i,n,o){var s,r=null;if(null!=n&&(r=this._getEventTargetElement(n)),t){this._clearFocusedRow(!0),i&&this._clearSelectedRows();var a=this._getFocusedHeaderColumnIdx(),l=this._getColumnDefs();if(null!==o)if(o){for(;e<=l.length-1&&!((s=this._getTableDomUtils().getTableHeaderColumn(e))&&s.clientWidth>0);)e+=1;e>l.length-1&&(e=null!==a?a:l.length-1)}else{for(;e>=0&&!((s=this._getTableDomUtils().getTableHeaderColumn(e))&&s.clientWidth>0);)e-=1;e<0&&(e=null!==a?a:0)}null!==a&&a!==e&&this._setHeaderColumnFocus(a,!1,!1,n,null),this._scrollColumnIntoViewport(e),this._activeColumnIndex=e}this._setHeaderColumnState(e,{focused:t},r)},_setHeaderColumnSelection:function(t,i,o,s,r,a){if(this._getColumnSelectionMode()===this._OPTION_SELECTION_MODES._SINGLE||this._getColumnSelectionMode()===this._OPTION_SELECTION_MODES._MULTIPLE){if((isNaN(t)||t<0)&&e.error("Error: Invalid column selection value: "+t),!a&&"true"===String(this.options.selectionRequired).toLowerCase()&&!i){var l=this._getSelectedHeaderColumnIdxs();if(null!=l&&1===l.length)return}this._getColumnSelectionMode()===this._OPTION_SELECTION_MODES._SINGLE&&i&&this._clearSelectedHeaderColumns(),this._setHeaderColumnState(t,{selected:i},o,s),this._setLastHeaderColumnSelection(t,i),this._getTableDomUtils().getTableHeaderColumnAccSelect(t).getElementsByClassName(n.TableDomUtils.CSS_CLASSES._CHECKBOX_ACC_SELECT_COLUMN_CLASS)[0].checked=i}if(r){var u=this._getSelection();this.option("selection",u,{_context:{writeback:!0,internalSet:!0}}),i&&this.option("firstSelectedRow",{key:null,data:null},{_context:{writeback:!0,internalSet:!0}})}},_setHeaderColumnState:function(e,t,i,o){var s=this._getTableDomUtils().getTableHeaderColumn(e);if(s){var r=t.focused,a=t.selected;null!=a&&s.classList.contains(n.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)!==a&&(a?s.classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED):s.classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)),null!=r&&(r?(this._focusInHandler($(s)),this._showTableHeaderColumnSortLink(e)):(this._focusOutHandler($(s)),this._hideTableHeaderColumnSortLink(e,!0),this._hideTableHeaderColumnSortLink(e,!1))),this._updateHeaderColumnStateCellsClass(e)}},_setLastHeaderColumnSelection:function(e,t){this._lastSelectedColumnIdxArray||(this._lastSelectedColumnIdxArray=[]);for(var i=this._lastSelectedColumnIdxArray.length,n=0;n<i;n++)if(this._lastSelectedColumnIdxArray[n]===e){this._lastSelectedColumnIdxArray.splice(n,1);break}t&&this._lastSelectedColumnIdxArray.push(e)},_setLastRowSelection:function(e,t){this._lastSelectedRowIdxArray||(this._lastSelectedRowIdxArray=[]);for(var i=this._lastSelectedRowIdxArray.length,n=0;n<i;n++)if(this._lastSelectedRowIdxArray[n]===e){this._lastSelectedRowIdxArray.splice(n,1);break}t&&this._lastSelectedRowIdxArray.push(e)},_setNextRowEditable:function(e,t){var i=this._getTableDomUtils().getTableBodyRows(),n=null!=i?i.length:0,o=this._getEditableRowIdx();o>=0&&o<n-1?(this._setTableEditable(!1,!1,e,!0,t),this._setCurrentRow({rowIndex:o+1},t,!1),this._setTableEditable(!0,!1,e,!0,t)):o===n-1&&(this._setTableEditable(!1,!1,e,!0,t),this._getTableDomUtils().getTable().focus())},_setPreviousRowEditable:function(e,t){var i=this._getEditableRowIdx();i>=1?(this._setTableEditable(!1,!1,e,!1,t),this._setCurrentRow({rowIndex:i-1},t,!1),this._setTableEditable(!0,!1,e,!1,t)):0===i&&(this._setTableEditable(!1,!1,e,!1,t),this._getTableDomUtils().getTable().focus())},_setRowFocus:function(e,t,i,n,o){var s;if(-1===e)return null!=(s=this._getFocusedRowIdx())&&this._setRowFocus(s,!1,i,null,null),!(i&&!this._setCurrentRow(null,o,!1));var r=this._getTableDomUtils().getTableBodyRow(e);if(!r)return!1;if(t){if(null!=(s=this._getFocusedRowIdx())&&s!==e&&this._setRowFocus(s,!1,i,n,null),i){var a=this._getRowKeyForRowIdx(e);if(!this._setCurrentRow({rowKey:a},o,!1))return!1}this._focusInHandler($(r)),this._scrollRowIntoViewport(e),this._updateRowStateCellsClass(e,{focused:!0,hover:!1}),this._clearFocusedHeaderColumn(),this._clearSelectedHeaderColumns(),this._setTableActionableMode(!1)}else this._focusOutHandler($(r)),this._updateRowStateCellsClass(e,{focused:!1});return!0},_setRowSelection:function(t,i,o,s,r,a){if(this._getRowSelectionMode()===this._OPTION_SELECTION_MODES._SINGLE||this._getRowSelectionMode()===this._OPTION_SELECTION_MODES._MULTIPLE){if((isNaN(t)||t<0)&&e.error("Error: Invalid row selection value: "+t),!a&&"true"===String(this.options.selectionRequired).toLowerCase()&&!i){var l=this._getSelectedRowIdxs();if(null!=l&&1===l.length)return}this._getRowSelectionMode()===this._OPTION_SELECTION_MODES._SINGLE&&i&&this._clearSelectedRows();var u=this._getTableDomUtils().getTableBodyRow(t);if(null!=u){var d=!1;if(u.classList.contains(n.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)!==i){i?u.classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED):u.classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED),d=!0;var h=this.options.dnd.drag;h&&("rows"===h||h.rows)&&(u.draggable=i)}if(d&&(i?this._updateRowStateCellsClass(t,{hover:!1,focused:!1,selected:!0}):this._updateRowStateCellsClass(t,{selected:!1})),this._setLastRowSelection(t,i),this._getTableDomUtils().getTableBodyCellAccSelect(u).getElementsByClassName(n.TableDomUtils.CSS_CLASSES._CHECKBOX_ACC_SELECT_ROW_CLASS)[0].checked=i,r){var c=this._getSelection();if(this.option("selection",c,{_context:{writeback:!0,internalSet:!0}}),null!=c&&c.length>0){var p=c[0].startKey;if(null!=p&&null!=p[this._CONST_ROW]){var _=this.getDataForVisibleRow(this._getRowIdxForRowKey(p[this._CONST_ROW]));if(_)return void this.option("firstSelectedRow",{key:_[this._CONST_KEY],data:_[this._CONST_DATA]},{_context:{writeback:!0,internalSet:!0}})}}this.option("firstSelectedRow",{key:null,data:null},{_context:{writeback:!0,internalSet:!0}})}}}},_setSelection:function(t){if(null==t)return this._clearSelectedRows(),void this._clearSelectedHeaderColumns();for(var i,n=t.length,o=0;o<n;o++){var s=t[o];if(null==s.startKey&&null==s[this._CONST_STARTINDEX]||null==s.endKey&&null==s[this._CONST_ENDINDEX])return void e.error("Error: Invalid range object in selection. Both start and end objects must be specified");var r=null,a=null,l=null,u=null,d=null,h=null,c=null,p=null,_=!1;if(null!=s.startKey&&null!=s.startKey[this._CONST_ROW]&&(l=this._getDataSourceRowIndexForRowKey(s.startKey[this._CONST_ROW]),null!=s[this._CONST_STARTINDEX]&&null!=s[this._CONST_STARTINDEX][this._CONST_ROW]&&l!==s[this._CONST_STARTINDEX][this._CONST_ROW]&&(_=!0)),null!=s.endKey&&null!=s.endKey[this._CONST_ROW]&&(u=this._getDataSourceRowIndexForRowKey(s.endKey[this._CONST_ROW]),null!=s[this._CONST_ENDINDEX]&&null!=s[this._CONST_ENDINDEX][this._CONST_ROW]&&u!==s[this._CONST_ENDINDEX][this._CONST_ROW]&&(_=!0)),null!=s.startKey&&null!=s.startKey[this._CONST_COLUMN]&&(c=this._getColumnIdxForColumnKey(s.startKey[this._CONST_COLUMN]),null!=s[this._CONST_STARTINDEX]&&null!=s[this._CONST_STARTINDEX][this._CONST_COLUMN]&&c!==s[this._CONST_STARTINDEX][this._CONST_COLUMN]&&(_=!0)),null!=s.endKey&&null!=s.endKey[this._CONST_COLUMN]&&(p=this._getColumnIdxForColumnKey(s.endKey[this._CONST_COLUMN]),null!=s[this._CONST_ENDINDEX]&&null!=s[this._CONST_ENDINDEX][this._CONST_COLUMN]&&p!==s[this._CONST_ENDINDEX][this._CONST_COLUMN]&&(_=!0)),null==l&&null!=s[this._CONST_STARTINDEX]&&(l=s[this._CONST_STARTINDEX][this._CONST_ROW]),null==u&&null!=s[this._CONST_ENDINDEX]&&(u=s[this._CONST_ENDINDEX][this._CONST_ROW]),null==c&&null!=s[this._CONST_STARTINDEX]&&(c=s[this._CONST_STARTINDEX][this._CONST_COLUMN]),null==p&&null!=s[this._CONST_ENDINDEX]&&(p=s[this._CONST_ENDINDEX][this._CONST_COLUMN]),null!=l&&null!=u&&null!=c&&null!=p)return void e.error("Error: Invalid range object in selection - Can only support row or column selection. Not both");if(null!=l&&l>=0&&null!=u&&u>=0)for(r=this._getRowKeyForDataSourceRowIndex(l),a=this._getRowKeyForDataSourceRowIndex(u),d=this._getRowIdxForRowKey(r),h=this._getRowIdxForRowKey(a),i=d;i<=h;i++)try{this._setRowSelection(i,!0,null,null,_)}catch(t){e.error("Error: "+t)}else{if(null==c||null==p)return void e.error("Error: Invalid range object in selection - \n start row: "+l+"\nend row: "+u+"\nstart column: "+c+"\nend column: "+p);for(i=c;i<=p;i++)try{this._setHeaderColumnSelection(i,!0,null,null,_)}catch(t){e.error("Error: "+t)}}}},_setSelectionDefault:function(){if("true"===String(this.options.selectionRequired).toLowerCase())if(this._getRowSelectionMode()===this._OPTION_SELECTION_MODES._MULTIPLE||this._getRowSelectionMode()===this._OPTION_SELECTION_MODES._SINGLE){var e=this._getSelectedRowIdxs();null!=e&&0!==e.length||this._setRowSelection(0,!0,null,null,!0)}else if(this._getColumnSelectionMode()===this._OPTION_SELECTION_MODES._MULTIPLE||this._getColumnSelectionMode()===this._OPTION_SELECTION_MODES._SINGLE){var t=this._getSelectedHeaderColumnIdxs();null!=t&&0!==t.length||this._setHeaderColumnSelection(0,!0,null,null,!0)}},_setTableActionableMode:function(e){if(this._isTableEditMode())this._tableActionableMode=!1;else if(!(null!=this._tableActionableMode&&this._tableActionableMode===e||null==this._tableActionableMode&&!1===e))if(e){var t=this._getFocusedRowIdx(),i=this._getFocusedHeaderColumnIdx();if(null!=t||null!=i){var n=null;if(null!=(n=null!=t?this._getTableDomUtils().getTableBodyRow(t):this._getTableDomUtils().getTableHeaderColumn(i))){var o=this._getTabbableElements(n);null!=o&&o.length>0&&(this._tableActionableMode=e,o[0].focus())}}}else{this._tableActionableMode=e;var s=this._getTableDomUtils().getTableBody();$.contains(s,document.activeElement)&&this._getTableDomUtils().getTable().focus()}},_setTableEditable:function(e,t,i,o,s){if(this._isTableEditMode()){var r=this._getCurrentRow();if(null!=r){var a,l,u,d=r.rowKey,h=this._getRowIdxForRowKey(d);try{if(e&&!this._hasEditableRow())a=this._getTableDomUtils().getTableBodyRow(h),l=n.TableRendererUtils.getRendererContextObject(this,a,{row:{key:d,index:r.rowIndex},isCurrentRow:!0}),u=this._trigger("beforeRowEdit",s,{rowContext:l});else{if(e||!this._hasEditableRow())return;a=this._getTableDomUtils().getTableBodyRow(this._getEditableRowIdx()),d=this._getRowKeyForRowIdx(this._getEditableRowIdx()),l=n.TableRendererUtils.getRendererContextObject(this,a,{row:{key:d,index:this._getDataSourceRowIndexForRowKey(d)},isCurrentRow:!0}),u=this._trigger("beforeRowEditEnd",s,{rowContext:l,cancelEdit:t})}}catch(e){return!1}if(!u)return!1;var c=this._getEditableRowIdx(),p=this;e?(this._setEditableRowIdx(h),this._refreshRow(h,!1).then(function(){p._queueTask(function(){var e=h,t=i,n=o;p._setCellInRowFocus(e,t,n)})})):(this._setEditableRowIdx(null),this._getTableDomUtils().getTable().focus()),null!=c&&null!=this._getTableDomUtils().getTableBodyRow(c)&&this._refreshRow(c,!1).then(function(){p._queueTask(function(){var e=c,t=this._getTableDomUtils().getTableBodyRow(e);null!=t&&t.classList.remove(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_EDIT_CLASS)})})}}},_showInlineMessage:function(e,t,i){if(!this._inlineMessageShown){this._getTableDomUtils().setTableInlineMessage(e,t,i);var o=this._getTableDomUtils().getTableInlineMessage(),s=this._getTableDomUtils().getTableContainer();i===D.SEVERITY_LEVEL.WARNING&&(s.classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._WARNING),o.classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._WARNING)),o.style[n.TableDomUtils.CSS_PROP._DISPLAY]=n.TableDomUtils.CSS_VAL._BLOCK,o.style[n.TableDomUtils.CSS_PROP._WIDTH]="100%",o.style[n.TableDomUtils.CSS_PROP._BOX_SIZING]=n.TableDomUtils.CSS_VAL._BORDER_BOX,this._inlineMessageShown=!0}},_showNoDataMessage:function(){if(!this._noDataMessageShown){var e=this._getTableDomUtils().getTableBodyMessageRow(),t=this._getData(),i=null;i=null!=this.options.emptyText?this.options.emptyText:this.getTranslatedString(this._BUNDLE_KEY._MSG_NO_DATA);var n=null!=t?i:this.getTranslatedString(this._BUNDLE_KEY._MSG_INITIALIZING);null==e?this._getTableDomUtils().createTableBodyMessageRow(this._getColumnDefs().length,n):this._getTableDomUtils().setTableBodyMessage(n),this._noDataMessageShown=!0}},_showStatusMessage:function(){if(!this._showStatusTimeout&&!this._statusMessageShown){var e=this._getTableDomUtils().getTableStatusMessage(),t=this;this._showStatusTimeout=setTimeout(function(){e.style[n.TableDomUtils.CSS_PROP._DISPLAY]=n.TableDomUtils.CSS_VAL._INLINE,t._statusMessageShown=!0,t._getTableDomUtils().refreshTableStatusPosition()},this._getShowStatusDelay())}},_getShowStatusDelay:function(){null==this._defaultOptions&&(this._defaultOptions=_.parseJSONFromFontFamily("oj-table-option-defaults"));var e=parseInt(this._defaultOptions.showIndicatorDelay,10);return isNaN(e)?0:e},_showTableHeaderColumnSortLink:function(e){if(this._getColumnDefs()[e].sortable===this._OPTION_ENABLED){var t=this._getTableDomUtils().getTableHeaderColumn(e);if(!t)return;if(null==$(t).data("sorted")){var i=t.querySelectorAll("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_LINK_CLASS);i.length>0&&((i=i[0]).classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._ENABLED),i.classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED));var o=t.querySelectorAll("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_CLASS);o.length>0&&(o=o[0]).classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED);var s=t.querySelectorAll("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_CLASS);s.length>0&&(s=s[0]).classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED)}}},_touchEventDoubleTapFunction:function(e,t){var i=$(e.target);null!=this._lastTapTime&&(new Date).getTime()-this._lastTapTime<250&&this._lastTapTarget[0]===i[0]?(this._lastTapTime=null,this._lastTapTarget=null,t()):(this._lastTapTarget=i,this._lastTapTime=(new Date).getTime())},_unregisterChildStateListeners:function(e){var t,i=this,n=e.querySelectorAll("*");for(t=0;t<n.length;t++)i._UnregisterChildNode(n[t]);i=null},_unregisterDataSourceEventListeners:function(){var e=this._getData();if(null!=this._dataProviderEventHandlers&&null!=e)for(var t=this._dataProviderEventHandlers.length,i=0;i<t;i++)e.removeEventListener(this._dataProviderEventHandlers[i].eventType,this._dataProviderEventHandlers[i].eventHandler)},_unregisterResizeListener:function(){var e=this._getTableDomUtils().getTableContainer();n.DomUtils.removeResizeListener(e,this._resizeListener),this._isResizeListenerAdded=!1},_updateHeaderColumnStateCellsClass:function(e,t){var i=this._getHeaderColumnSelection(e),o=this._getSelectedRowIdxs(),s=this._getTableDomUtils().getTableBodyRows();if(null!=s&&s.length>0)for(var r=s.length,a=0;a<r;a++){var l=this._getTableDomUtils().getTableBodyCell(a,e);if(i)l.classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED);else{for(var u=!1,d=o.length,h=0;h<d;h++)if(a===o[h]){u=!0;break}u||l.classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)}}},_updateRowStateCellsClass:function(e,t,i){var o,s=this._getTableDomUtils().getTableBodyCells(e),r=t.focused,a=t.selected,l=t.hover;if(s){var u=s.length;if(null!=l)for(o=0;o<u;o++)l?s[o].classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._HOVER):s[o].classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._HOVER);if(null!=r)for(o=0;o<u;o++)r?this._focusInHandler($(s[o])):this._focusOutHandler($(s[o]));if(null!=a)for(o=0;o<u;o++)a?s[o].classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED):s[o].classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._SELECTED)}},_waitForAllComponentsToResolve:function(e){var t=this;if(e instanceof Array||(e=[e]),this._hasRowOrCellRendererOrTemplate()){var i=[];if(null!=e&&e.length>0&&e.forEach(function(e){var n=t._getAllBusyContextsForElement(e);null!=n&&n.forEach(function(e){i.push(e)})}),i.length>0){var n=[];return i.forEach(function(e){n.push(e.whenReady())}),Promise.all(n)}}return Promise.resolve()},_setFinalTask:function(e){this._finalTask=e?e.bind(this):void 0},_hasPendingTasks:function(){return this._taskCount>1},_queueTask:function(t){var i=this;return this._pendingTasks||(this._taskCount=0,this._pendingTasks=Promise.resolve(),this._setComponentNotReady()),this._taskCount+=1,this._pendingTasks=this._pendingTasks.then(function(){if(!i._componentDestroyed)return t.bind(i)()}).then(function(t){if(i._taskCount-=1,0===i._taskCount){i._pendingTasks=void 0;try{i._componentDestroyed||(i._finalTask&&i._finalTask(),i._trigger("ready"))}catch(t){e.error(t)}i._setComponentReady(),i=null}return t},function(t){return i._taskCount-=1,0===i._taskCount&&(i._pendingTasks=void 0,e.error(t),i._setComponentReady(),i=null),Promise.reject(t)}),this._pendingTasks},_CompareOptionValues:function(e,t,i){switch(e){case"columns":case"currentRow":case"selection":return n.Object.compareValues(t,i);default:return this._super(e,t,i)}}}),w.setDefaultOptions({ojTable:{display:w.createDynamicPropertyGetter(function(){return(_.parseJSONFromFontFamily("oj-table-option-defaults")||{}).display})}}),n.TableAnimationUtils=function(e){this.component=e,this.options=e.options,this.Init()},n.Object.createSubclass(n.TableAnimationUtils,n.Object,"oj.TableAnimationUtils"),n.TableAnimationUtils.prototype.Init=function(){n.TableAnimationUtils.superclass.Init.call(this)},n.TableAnimationUtils.prototype.animateTableBodyRow=function(e,t){if(this._isAnimationDisabled(t))return Promise.resolve(!1);var i=this;return new Promise(function(n){i._startAnimation(e,t).then(function(){n(!0)})})},n.TableAnimationUtils.prototype.animateTableBodyRows=function(e,t){if(this._isAnimationDisabled(t))return Promise.resolve(!1);for(var i,n=this,o=[],s=0;s<e.length;s++){var r=e[s];o.push((i=r,n.animateTableBodyRow(i,t)))}return o.length>0?Promise.all(o):Promise.resolve(!1)},n.TableAnimationUtils.prototype._getAnimationEffect=function(e){var t;return null==this.defaultAnimations&&(t=_.parseJSONFromFontFamily("oj-table-option-defaults"),this.defaultAnimations=t.animation||{}),this.defaultAnimations[e]},n.TableAnimationUtils.prototype._isAnimationDisabled=function(e){var t=this._getAnimationEffect(e);return null==t||0===t.length},n.TableAnimationUtils.prototype._startAnimation=function(e,t,i){return null==i&&(i=this._getAnimationEffect(t)),vi.startAnimation(e,t,i,this.component)},n.TableDndContext=function(e){this.component=e,this.options=e.options,this.Init()},n.Object.createSubclass(n.TableDndContext,n.Object,"oj.TableDndContext"),n.TableDndContext.prototype.Init=function(){n.TableDndContext.superclass.Init.call(this)},n.TableDndContext.prototype._addDragMarkerClass=function(e){this._getTableDomUtils().getTableHeaderColumn(e).classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._DRAG),this._getTableDomUtils().setTableColumnCellsClass(e,!0,n.TableDomUtils.MARKER_STYLE_CLASSES._DRAG)},n.TableDndContext.prototype._removeDragMarkerClass=function(){var e=this._getTableDomUtils().getTableHeader().querySelectorAll("."+n.TableDomUtils.MARKER_STYLE_CLASSES._DRAG);if(null!=e&&e.length>0)for(var t=e.length,i=0;i<t;i++)e[i].classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._DRAG);this._getTableDomUtils().setTableColumnCellsClass(null,!1,n.TableDomUtils.MARKER_STYLE_CLASSES._DRAG)},n.TableDndContext.prototype._cloneTableContainer=function(e){var t,i=e.querySelectorAll(n.TableDomUtils.DOM_ELEMENT._TBODY)[0],o=$(i).scrollLeft(),s=$(i).scrollTop(),r=(t=e.cloneNode(!0)).querySelectorAll(n.TableDomUtils.DOM_ELEMENT._TBODY)[0];return r.style[n.TableDomUtils.CSS_PROP._OVERFLOW]=n.TableDomUtils.CSS_VAL._HIDDEN,r.style[n.TableDomUtils.CSS_PROP._OVERFLOW_X]=n.TableDomUtils.CSS_VAL._HIDDEN,r.style[n.TableDomUtils.CSS_PROP._OVERFLOW_Y]=n.TableDomUtils.CSS_VAL._HIDDEN,r.style[n.TableDomUtils.CSS_PROP._BACKGROUND_COLOR]=n.TableDomUtils.CSS_VAL._TRANSPARENT,r.style[n.TableDomUtils.CSS_PROP._WIDTH]=$(i).width()+n.TableDomUtils.CSS_VAL._PX,r.style[n.TableDomUtils.CSS_PROP._HEIGHT]=$(i).height()+n.TableDomUtils.CSS_VAL._PX,t.style[n.TableDomUtils.CSS_PROP._POSITION]=n.TableDomUtils.CSS_VAL._ABSOLUTE,t.style[n.TableDomUtils.CSS_PROP._TOP]=-1e4+n.TableDomUtils.CSS_VAL._PX,$(r).scrollLeft(1*o),$(r).scrollTop(1*s),document.body.appendChild(t),t},n.TableDndContext.prototype._destroyDragImage=function(){this._dragImage&&($(this._dragImage).remove(),this._dragImage=null)},n.TableDndContext.prototype._getEventColumnIndex=function(e){return this._getTableDomUtils().getElementColumnIdx(e.currentTarget)},n.TableDndContext.prototype._getOverRowIndex=function(e){var t,i=$(e.target).closest(n.TableDomUtils.DOM_ELEMENT._TR),o=$(e.target).closest("."+n.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_CLASS);if(o.length>0){var s=this._getTableDomUtils().getFirstAncestor(o[0],n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS);null!=s&&(t=$(s).index())}else if(i&&i.hasClass(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_DRAG_INDICATOR_BEFORE_CLASS))t=this._dropRowIndex;else{var r=this._getTableDomUtils().getTableBodyRows();t=r?r.length:0}return t},n.TableDndContext.prototype._getTableDomUtils=function(){return this.component._getTableDomUtils()},n.TableDndContext.prototype.handleColumnDragStart=function(e){if(this._isColumnReorderEnabled()){var t=this._getEventColumnIndex(e);return this._dragStartColumnIdx=t,this._setReorderColumnsDataTransfer(e,t),this.component._setSelection(null),this.component.option("selection",null,{_context:{writeback:!0,internalSet:!0}}),setTimeout(function(){window.getSelection().removeAllRanges()},0),this._addDragMarkerClass(t),!0}},n.TableDndContext.prototype.handleColumnDragEnd=function(e){this._isColumnReorderEnabled()&&(this.setTableHeaderColumnDraggable(null,!1),this._dragStartColumnIdx=null,this._getTableDomUtils().removeDragOverIndicatorColumn(),this._getTableDomUtils().removeTableHeaderColumnDragImage(),this._removeDragMarkerClass())},n.TableDndContext.prototype.handleColumnDragEnter=function(e){if(!this._isColumnReordering()){var t=this._getEventColumnIndex(e);return this._invokeDropCallback("columns","dragEnter",e,{columnIndex:t})}},n.TableDndContext.prototype.handleColumnReorderDragOver=function(e){var t=this._getEventColumnIndex(e),i=this._dragStartColumnIdx;null!=i&&i!==t&&(this._currentDropColumnBefore=this._isDragOverBeforeColumn(e),this._currentDropColumnBefore&&i===t-1||!this._currentDropColumnBefore&&i===t+1||this._getTableDomUtils().displayDragOverIndicatorColumn(t,this._currentDropColumnBefore),e.preventDefault())},n.TableDndContext.prototype.handleColumnDragOver=function(e){if(this._isColumnReordering())return this.handleColumnReorderDragOver(e);var t=this._getEventColumnIndex(e);this._currentDropColumnBefore=this._isDragOverBeforeColumn(e);var i=this._invokeDropCallback("columns","dragOver",e,{columnIndex:t});return(!1===i||e.isDefaultPrevented())&&this._getTableDomUtils().displayDragOverIndicatorColumn(t,this._isDragOverBeforeColumn(e)),i},n.TableDndContext.prototype.handleColumnDragLeave=function(e){if(!this._isColumnReordering()){this._getTableDomUtils().removeDragOverIndicatorColumn();var t=this._getEventColumnIndex(e);return this._invokeDndCallback("drop","columns","dragLeave",e,{columnIndex:t})}},n.TableDndContext.prototype.handleColumnReorderDrop=function(e){var t=this._getEventColumnIndex(e);this._currentDropColumnBefore||(t+=1),this.component._columnsDestMap=this._getTableDomUtils().moveTableHeaderColumn(this._dragStartColumnIdx,t,e),e.preventDefault()},n.TableDndContext.prototype.handleColumnDrop=function(e){if(this._isColumnReordering())return this.handleColumnReorderDrop(e);this._getTableDomUtils().removeDragOverIndicatorColumn();var t=this._getEventColumnIndex(e);return this._currentDropColumnBefore||(t+=1),this._invokeDropCallback("columns","drop",e,{columnIndex:t})},n.TableDndContext.prototype.handleRowDragStart=function(e){var t=this.options.dnd.drag;if(t&&t.rows){var i=this._setDragRowsDataTransfer(e,t.rows.dataTypes,this.component._getSelectedRowIdxs());return!!i&&this._invokeDndCallback("drag","rows","dragStart",e,i)}},n.TableDndContext.prototype.handleRowDrag=function(e){return this._invokeDndCallback("drag","rows","drag",e)},n.TableDndContext.prototype.handleRowDragEnd=function(e){return this._destroyDragImage(),this._invokeDndCallback("drag","rows","dragEnd",e)},n.TableDndContext.prototype.handleRowDragEnter=function(e){var t=this._getOverRowIndex(e),i=this._invokeDropCallback("rows","dragEnter",e,{rowIndex:t});return(!1===i||e.isDefaultPrevented())&&this._updateDragRowsState(e,t),i},n.TableDndContext.prototype.handleRowDragOver=function(e){return this._invokeDropCallback("rows","dragOver",e,{rowIndex:this._dropRowIndex})},n.TableDndContext.prototype.handleRowDragLeave=function(e){var t=this._invokeDndCallback("drop","rows","dragLeave",e,{rowIndex:this._dropRowIndex});return this._isDndEventInElement(e,e.currentTarget)||(this._getTableDomUtils().removeDragOverIndicatorRow(),this._dropRowIndex=null),t},n.TableDndContext.prototype.handleRowDrop=function(e){var t=this._dropRowIndex;return this._getTableDomUtils().removeDragOverIndicatorRow(),this._dropRowIndex=null,this._invokeDropCallback("rows","drop",e,{rowIndex:t})},n.TableDndContext.prototype._hideUnselectedRows=function(e,t){for(var i=null,o=e.querySelectorAll("."+n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS),s=o.length-1;s>=0;s--)-1===t.indexOf(s)?o[s].style[n.TableDomUtils.CSS_PROP._VISIBILITY]=n.TableDomUtils.CSS_VAL._HIDDEN:i=s;var r=e.querySelectorAll(n.TableDomUtils.DOM_ELEMENT._THEAD);null!=r&&r.length>0&&(r[0].style[n.TableDomUtils.CSS_PROP._VISIBILITY]=n.TableDomUtils.CSS_VAL._HIDDEN);var a=e.querySelectorAll(n.TableDomUtils.DOM_ELEMENT._TFOOT);return null!=a&&a.length>0&&(a[0].style[n.TableDomUtils.CSS_PROP._VISIBILITY]=n.TableDomUtils.CSS_VAL._HIDDEN),i},n.TableDndContext.prototype._invokeDndCallback=function(t,i,n,o,s){var r,a=this.options.dnd[t];if(a&&a[i]){var l=a[i][n];if(l&&"function"==typeof l)try{this.component._IsCustomElement()?l(o.originalEvent,s):(o.dataTransfer=o.originalEvent.dataTransfer,r=l(o,s))}catch(t){e.error("Error: "+t)}}return r},n.TableDndContext.prototype._invokeDropCallback=function(e,t,i,n){var o=this._invokeDndCallback("drop",e,t,i,n);return void 0===o&&this._matchDragDataType(i,e)&&i.preventDefault(),o},n.TableDndContext.prototype._isColumnReorderEnabled=function(){var e=this.options.dnd;return!(!e||!e.reorder||e.reorder.columns!==this.component._OPTION_ENABLED)},n.TableDndContext.prototype._isColumnReordering=function(){return null!=this._dragStartColumnIdx},n.TableDndContext.prototype._isDndEventInElement=function(e,t){var i=t.getBoundingClientRect(),n=e.originalEvent;return n.clientX>=Math.ceil(i.left)&&n.clientX<Math.floor(i.right)&&n.clientY>=Math.ceil(i.top)&&n.clientY<Math.floor(i.bottom)},n.TableDndContext.prototype._isDragOverBeforeColumn=function(e){var t=e.currentTarget.getBoundingClientRect();if(null!=e.originalEvent.clientX){var i=t.right-e.originalEvent.clientX<(t.right-t.left)/2;return"rtl"===n.DomUtils.getReadingDirection()?i:!i}return!1},n.TableDndContext.prototype._matchDragDataType=function(e,t){var i=e.originalEvent.dataTransfer.types,n=this.options.dnd.drop;if(n&&n[t]&&n[t].dataTypes)for(var o=n[t].dataTypes,s="string"==typeof o?[o]:o,r=0;r<i.length;r++)if(s.indexOf(i[r])>=0)return!0;return!1},n.TableDndContext.prototype._setHeaderColumnDraggable=function(e,t){e.draggable=t,t&&(e.style[n.TableDomUtils.CSS_PROP._CURSOR]=n.TableDomUtils.CSS_VAL._MOVE,e.classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._DRAGGABLE))},n.TableDndContext.prototype._clearHeaderColumnDraggable=function(e){e.draggable="",e.style[n.TableDomUtils.CSS_PROP._CURSOR]=n.TableDomUtils.CSS_VAL._AUTO,e.classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._DRAGGABLE)},n.TableDndContext.prototype._setDragRowsData=function(e,t,i){if(t){var n=e.dataTransfer,o=JSON.stringify(i);if("string"==typeof t)n.setData(t,o);else for(var s=0;s<t.length;s++)n.setData(t[s],o)}},n.TableDndContext.prototype._setDragRowsDataTransfer=function(e,t,i){for(var o=[],s=0;s<i.length;s++){var r=this.component.getDataForVisibleRow(i[s]);r&&o.push(r)}return o.length?(this._setDragRowsData(e.originalEvent,t,o),this._destroyDragImage(),this._dragImage=this._setDragRowsImage(e.originalEvent,$(e.currentTarget).closest(n.TableDomUtils.DOM_ELEMENT._TABLE).parent()[0],i),{rows:o}):null},n.TableDndContext.prototype._setDragRowsImage=function(e,t,i){var o=this._cloneTableContainer(t);this._hideUnselectedRows(o,i);var s=t.getBoundingClientRect(),r=t.querySelectorAll(n.TableDomUtils.DOM_ELEMENT._TBODY)[0],a=$(r).scrollLeft(),l=$(r).scrollTop(),u=e.clientX-s.left+a,d=e.clientY-s.top+l;return e.dataTransfer.setDragImage(o,u,d),o},n.TableDndContext.prototype._setReorderColumnsDataTransfer=function(e,t){var i=e.originalEvent.dataTransfer,n=this._getTableDomUtils().hashCode(this._getTableDomUtils().getTableUID());i.setData("Text",this.component._DND_REORDER_TABLE_ID_DATA_KEY+":"+n+":"+t);var o=this._getTableDomUtils().createTableHeaderColumnDragImage(t);try{i.setDragImage(o,0,0)}catch(e){}},n.TableDndContext.prototype.setTableHeaderColumnDraggable=function(e,t){if(this._isColumnReorderEnabled()){var i,n=this._getTableDomUtils().getTableHeaderColumns();if(null!=n&&n.length>0)for(i=0;i<n.length;i++){var o=n[i];null!=e&&i===e?this._setHeaderColumnDraggable(o,t):this._clearHeaderColumnDraggable(o)}}},n.TableDndContext.prototype._updateDragRowsState=function(e,t){if(this._dropRowIndex!==t){var i=$(e.target).closest(n.TableDomUtils.DOM_ELEMENT._TR)[0];this._dropRowIndex=t,this._getTableDomUtils().displayDragOverIndicatorRow(this._dropRowIndex,!0,i)}},n.TableDomUtils=function(e){this.component=e,this.options=e.options,this.element=e.element[0],this.OuterWrapper=e.OuterWrapper,this.Init(),this._cacheDomDimensions={}},n.Object.createSubclass(n.TableDomUtils,n.Object,"oj.TableDomUtils"),n.TableDomUtils.prototype.Init=function(){n.TableDomUtils.superclass.Init.call(this)},n.TableDomUtils.prototype.clearCachedDom=function(){this.clearCachedDomRowData(),this._clearCachedDom(null),this._tableDimensions=null},n.TableDomUtils.prototype.clearCachedDomRowData=function(){this._cachedDomTableBodyRows=null},n.TableDomUtils.prototype.createContextMenu=function(e){var t=this.component._GetContextMenu(),i=!!this.component._isTouchDevice()&&this.component._getRowSelectionMode()===this.component._OPTION_SELECTION_MODES._MULTIPLE;if(t){var o=t.querySelectorAll("[data-oj-command]");if(null!=o&&o.length>0){var s,r,a;for(r=0;r<o.length;r++)"OJ-OPTION"!==o[r].tagName&&0!==o[r].getElementsByTagName(n.TableDomUtils.DOM_ELEMENT._A).length||(s=o[r].getAttribute("data-oj-command").split("-"),a=this.createContextMenuItem(s[s.length-1],this.component._IsCustomElement()),"OJ-OPTION"===o[r].tagName?o[r].innerHTML=a.innerHTML:$(o[r]).replaceWith(a));this._menuContainer=t,$(t).data("oj-ojMenu")&&(this.component._IsCustomElement()?t.refresh():$(t).ojMenu("refresh")),this.component._IsCustomElement()?t.addEventListener("ojAction",e):$(t).on("ojselect",e)}}else if(this.component._isTableSortable()||i||this.component._isTableColumnsResizable()){if((t=document.createElement(n.TableDomUtils.DOM_ELEMENT._UL)).style[n.TableDomUtils.CSS_PROP._DISPLAY]=n.TableDomUtils.CSS_VAL._NONE,t.setAttribute(n.TableDomUtils.DOM_ATTR._ID,this.getTableId()+"_contextmenu"),this.getTableContainer().appendChild(t),this.component._isTableSortable()){var l=this.createContextMenuItem("sort");t.appendChild(l)}if(i){var u=this.createContextMenuItem("enableNonContiguousSelection");t.appendChild(u)}if(this.component._isTableColumnsResizable()){var d=this.createContextMenuItem("resize");t.appendChild(d)}$(t).ojMenu(),this._menuContainer=t,$(t).on("ojselect",e),this.component.option("contextMenu","#"+t.getAttribute(n.TableDomUtils.DOM_ATTR._ID),{_context:{internalSet:!0}}),this.component._defaultContextMenu=t}return t},n.TableDomUtils.prototype.createContextMenuItem=function(e,t){if("sort"===e){var i=this.createContextMenuListItem(e,t),o=document.createElement(n.TableDomUtils.DOM_ELEMENT._UL);return i.appendChild(o),o.appendChild(this.createContextMenuListItem("sortAsc",t)),o.appendChild(this.createContextMenuListItem("sortDsc",t)),i}return"sortAsc"===e?this.createContextMenuListItem(e,t):"sortDsc"===e?this.createContextMenuListItem(e,t):"enableNonContiguousSelection"===e?this.createContextMenuListItem(e,t):"disableNonContiguousSelection"===e?this.createContextMenuListItem(e,t):"resize"===e?(this.createContextMenuResizePopup(0),this.createContextMenuListItem(e)):null},n.TableDomUtils.prototype.createContextMenuListItem=function(e,t){var i=document.createElement(t?"oj-option":"li");return i.setAttribute("data-oj-command","oj-table-"+e),i.appendChild(this.createContextMenuLabel(e,t)),i},n.TableDomUtils.prototype.createContextMenuLabel=function(e,t){var i=null;"sort"===e?i=this.component.getTranslatedString("labelSort"):"sortAsc"===e?i=this.component.getTranslatedString("labelSortAsc"):"sortDsc"===e?i=this.component.getTranslatedString("labelSortDsc"):"enableNonContiguousSelection"===e?i=this.component.getTranslatedString("labelEnableNonContiguousSelection"):"disableNonContiguousSelection"===e?i=this.component.getTranslatedString("labelDisableNonContiguousSelection"):"resize"===e&&(i=this.component.getTranslatedString("labelResize"));var o=document.createTextNode(i);if(t)return o;var s=document.createElement(n.TableDomUtils.DOM_ELEMENT._A);return s.setAttribute(n.TableDomUtils.DOM_ATTR._HREF,"#"),s.appendChild(o),s},n.TableDomUtils.prototype.createContextMenuResizePopup=function(e){e=Math.round(e);var t,i=this.getContextMenuResizePopup();if(null==i){var o=this.getTableContainer();(i=document.createElement(n.TableDomUtils.DOM_ELEMENT._DIV)).setAttribute("id",this.getTableId()+"_resize_popup"),i.setAttribute("data-oj-context",""),o.appendChild(i);var s=document.createElement(n.TableDomUtils.DOM_ELEMENT._DIV),r=document.createElement(n.TableDomUtils.DOM_ELEMENT._DIV);i.appendChild(s),i.appendChild(r),(t=document.createElement(n.TableDomUtils.DOM_ELEMENT._INPUT)).setAttribute("id",this.getTableId()+"_resize_popup_spinner");var a=document.createElement(n.TableDomUtils.DOM_ELEMENT._LABEL);a.setAttribute("for",this.getTableId()+"_resize_popup_spinner"),a.textContent=this.component.getTranslatedString("labelResizePopupSpinner");var l=document.createElement(n.TableDomUtils.DOM_ELEMENT._BUTTON);l.setAttribute("id",this.getTableId()+"_resize_popup_popupsubmit"),s.appendChild(a),s.appendChild(t),r.appendChild(l),$(l).ojButton({component:"ojButton",label:this.component.getTranslatedString("labelResizePopupSubmit")}),$(l).on("click",this.component._handleContextMenuResizePopup.bind(this.component)),$(t).ojInputNumber({component:"ojInputNumber",max:1e4,min:10,step:1,value:e,validators:[{type:"regExp",options:{pattern:"^[1-9][0-9]*$",messageDetail:this.component.getTranslatedString("msgColumnResizeWidthValidation")}}]}),$(i).ojPopup({modality:"modal",position:{my:"start top",at:"start bottom",collision:"flipfit"}}),this._cacheDomElement(this.getTableId()+"_resize_popup",i)}else t=document.getElementById(this.getTableId()+"_resize_popup_spinner"),$(t).ojInputNumber("option","value",e);return i},n.TableDomUtils.prototype.createInitialTable=function(e,t){var i=this.getTable();return this.createTableContainer(),e||this.createTableHeader(),t||this.createTableFooter(),this.createTableBody(),this.createTableStatusMessage(),this.createTableInlineMessage(),this.createTableStatusAccNotification(),i},n.TableDomUtils.prototype.createTableBody=function(){var e=this.getTable(),t=document.createElement(n.TableDomUtils.DOM_ELEMENT._TBODY);return e.appendChild(t),this._cacheDomElement(n.TableDomUtils.CSS_CLASSES._TABLE_BODY_CLASS,t),t},n.TableDomUtils.prototype.createTableBodyCell=function(e,t){return document.createElement(n.TableDomUtils.DOM_ELEMENT._TD)},n.TableDomUtils.prototype.createTableBodyCellAccSelect=function(e,t,i,o,s){var r=null;if(s||(r=this.getTableBodyCellAccSelect(o)),null!=r)return r;var a=null!=t?t.toString():e.toString(),l=null==i?this.hashCode(a):i;if((r=document.createElement(n.TableDomUtils.DOM_ELEMENT._TD)).classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_ACC_SELECT_CLASS),r.style.padding="0",r.style.border="0",!this.component._isTableHeaderless()){var u=this.options.accessibility,d=null;d=null!=u&&null!=u.rowHeader?u.rowHeader:this.component._getColumnDefs()[0].id;var h=this.getTableId()+":"+d+"_"+l;r.setAttribute(n.TableDomUtils.DOM_ATTR._HEADERS,this.getTableId()+":"+n.TableDomUtils._COLUMN_HEADER_ROW_SELECT_ID+" "+h)}var c=document.createElement(n.TableDomUtils.DOM_ELEMENT._INPUT);c.setAttribute(n.TableDomUtils.DOM_ATTR._ID,this.getTableId()+":acc_sel_row_"+l),c.setAttribute(n.TableDomUtils.DOM_ATTR._TYPE,"checkbox"),c.setAttribute(n.TableDomUtils.DOM_ATTR._TABINDEX,"-1");var p=null,_=this.options.editMode,m=null!=this.component._getRowSelectionMode();return p=_===this.component._OPTION_EDIT_MODE._ROW_EDIT?m?this.component.getTranslatedString(this.component._BUNDLE_KEY._LABEL_SELECT_AND_EDIT_ROW):this.component.getTranslatedString(this.component._BUNDLE_KEY._LABEL_EDIT_ROW):this.component.getTranslatedString(this.component._BUNDLE_KEY._LABEL_SELECT_ROW),c.setAttribute(n.TableDomUtils.DOM_ATTR._TITLE,p),c.classList.add(n.TableDomUtils.CSS_CLASSES._CHECKBOX_ACC_SELECT_ROW_CLASS),c.classList.add(n.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),this.component._getEditableRowIdx()===e?c.checked=!0:c.checked=!1,r.appendChild(c),o.insertBefore(r,o.firstChild),r},n.TableDomUtils.prototype.createTableBodyMessageCell=function(e,t,i){var o=document.createElement(n.TableDomUtils.DOM_ELEMENT._TD);return o.setAttribute(n.TableDomUtils.DOM_ATTR._COLSPAN,t+1),o.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_BODY_MESSAGE_CLASS),o.appendChild(document.createTextNode(i)),e.appendChild(o),o},n.TableDomUtils.prototype.createTableBodyMessageRow=function(e,t){var i=this.getTableBody(),o=document.createElement(n.TableDomUtils.DOM_ELEMENT._TR);return o.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_BODY_MESSAGE_ROW_CLASS),this.createTableBodyMessageCell(o,e,t),i.appendChild(o),o},n.TableDomUtils.prototype.createTableBodyRow=function(e,t){var i=document.createElement(n.TableDomUtils.DOM_ELEMENT._TR);return this.createTableBodyCellAccSelect(e,t,null,i,!0),i},n.TableDomUtils.prototype.createTableBodyRowTouchSelectionAffordance=function(e){var t=document.createElement(n.TableDomUtils.DOM_ELEMENT._DIV);t.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOP_CLASS),t.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOUCH_AREA_CLASS),$(t).data("rowIdx",e);var i=document.createElement(n.TableDomUtils.DOM_ELEMENT._DIV);i.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOP_ICON_CLASS),i.setAttribute(n.TableDomUtils.DOM_ATTR._ROLE,"button"),i.setAttribute(n.TableDomUtils.DOM_ATTR._ARIA_LABEL,this.component.getTranslatedString("labelAccSelectionAffordanceTop")),$(i).data("rowIdx",e),t.appendChild(i);var o=document.createElement(n.TableDomUtils.DOM_ELEMENT._DIV);o.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_BOTTOM_CLASS),o.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOUCH_AREA_CLASS),$(o).data("rowIdx",e);var s=document.createElement(n.TableDomUtils.DOM_ELEMENT._DIV);s.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_BOTTOM_ICON_CLASS),s.setAttribute(n.TableDomUtils.DOM_ATTR._ROLE,"button"),s.setAttribute(n.TableDomUtils.DOM_ATTR._ARIA_LABEL,this.component.getTranslatedString("labelAccSelectionAffordanceBottom")),$(s).data("rowIdx",e),o.appendChild(s);var r=this.getTableContainer();r.appendChild(t),r.appendChild(o),this.moveTableBodyRowTouchSelectionAffordanceTop(e),this.moveTableBodyRowTouchSelectionAffordanceBottom(e)},n.TableDomUtils.prototype.createTableBottomSlot=function(){var e=this.getTableContainer(),t=document.createElement(n.TableDomUtils.DOM_ELEMENT._DIV);return t.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_BOTTOM_SLOT_CLASS),e.appendChild(t),this._cacheDomElement(n.TableDomUtils.CSS_CLASSES._TABLE_BOTTOM_SLOT_CLASS,t),t},n.TableDomUtils.prototype.createTableContainer=function(){var e;return this.OuterWrapper?e=this.OuterWrapper:(e=document.createElement(n.TableDomUtils.DOM_ELEMENT._DIV),this.element.parentNode.replaceChild(e,this.element),e.insertBefore(this.element,e.firstChild)),this._cacheDomElement(n.TableDomUtils.CSS_CLASSES._TABLE_CONTAINER_CLASS,e),e},n.TableDomUtils.prototype.createTableFooter=function(){var e=this.getTable(),t=document.createElement(n.TableDomUtils.DOM_ELEMENT._TFOOT),i=document.createElement(n.TableDomUtils.DOM_ELEMENT._TR);this.createTableFooterAccSelect(i),t.appendChild(i);var o=this.getTableHeader();if(null!=o)o.parentNode.insertBefore(t,o.nextSibling);else{var s=this.getTableBody();null!=s?s.parentNode.insertBefore(t,s):e.appendChild(t)}return this._cacheDomElement(n.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CLASS,t),t},n.TableDomUtils.prototype.createTableFooterAccSelect=function(e){var t=e.getElementsByClassName(n.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS);return null!=t&&t.length>0?t[0]:((t=document.createElement(n.TableDomUtils.DOM_ELEMENT._TD)).classList.add(n.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),t.setAttribute(n.TableDomUtils.DOM_ATTR._TABINDEX,"-1"),e.insertBefore(t,e.firstChild),t)},n.TableDomUtils.prototype.createTableFooterCell=function(e){return document.createElement(n.TableDomUtils.DOM_ELEMENT._TD)},n.TableDomUtils.prototype.createTableHeader=function(){var e=this.getTable(),t=document.createElement(n.TableDomUtils.DOM_ELEMENT._THEAD),i=document.createElement(n.TableDomUtils.DOM_ELEMENT._TR);t.appendChild(i);var o=this.getTableFooter();if(null!=o)o.parentNode.insertBefore(t,o);else{var s=this.getTableBody();null!=s?s.parentNode.insertBefore(t,s):e.appendChild(t)}return this._cacheDomElement(n.TableDomUtils.CSS_CLASSES._TABLE_HEADER_ROW_CLASS,i),this._cacheDomElement(n.TableDomUtils.CSS_CLASSES._TABLE_HEADER_CLASS,t),t},n.TableDomUtils.prototype.createTableHeaderAccSelectRowColumn=function(){var e,t=document.createElement(n.TableDomUtils.DOM_ELEMENT._TH);t.classList.add(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ACC_SELECT_ROW_CLASS),t.setAttribute(n.TableDomUtils.DOM_ATTR._ID,this.getTableId()+":"+n.TableDomUtils._COLUMN_HEADER_ROW_SELECT_ID);var i=this.options.editMode,o=null!=this.component._getRowSelectionMode();e=i===this.component._OPTION_EDIT_MODE._ROW_EDIT?o?this.component.getTranslatedString(this.component._BUNDLE_KEY._LABEL_SELECT_AND_EDIT_ROW):this.component.getTranslatedString(this.component._BUNDLE_KEY._LABEL_EDIT_ROW):this.component.getTranslatedString(this.component._BUNDLE_KEY._LABEL_SELECT_ROW),t.setAttribute(n.TableDomUtils.DOM_ATTR._TITLE,e),t.style.padding="0",t.style.border="0";var s=document.createElement(n.TableDomUtils.DOM_ELEMENT._SPAN);return s.appendChild(document.createTextNode(e)),s.classList.add(n.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),t.appendChild(s),t},n.TableDomUtils.prototype.createTableHeaderColumn=function(e,t){var i=this.component._getColumnDefs()[e],o=document.createElement(n.TableDomUtils.DOM_ELEMENT._TH);this.styleTableHeaderColumn(e,o,t,!0),o.setAttribute("abbr",i.headerText),o.setAttribute(n.TableDomUtils.DOM_ATTR._TITLE,i.headerText),this.insertTableHeaderColumn(e,o);var s={columnIndex:e,headerContext:{component:this.component,parentElement:o}};return i.resizable===n.TableDomUtils._OPTION_ENABLED&&o.setAttribute("data-oj-resizable",n.TableDomUtils._OPTION_ENABLED),i.sortable===n.TableDomUtils._OPTION_ENABLED?(o.setAttribute("data-oj-sortable",n.TableDomUtils._OPTION_ENABLED),n.TableRendererUtils.columnHeaderSortableIconRenderer(this.component,s,null,null)):n.TableRendererUtils.columnHeaderDefaultRenderer(this.component,s,null,null),o},n.TableDomUtils.prototype.createTableHeaderColumnDragImage=function(e){var t=this.getTableHeaderColumn(e).cloneNode(!0);return t.classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._DRAG),t.classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._FOCUS),t.classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._FOCUS_HIGHLIGHT),t.classList.remove(n.TableDomUtils.MARKER_STYLE_CLASSES._HOVER),t.classList.add(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_IMAGE),t.style[n.TableDomUtils.CSS_PROP._POSITION]=n.TableDomUtils.CSS_VAL._ABSOLUTE,t.style[n.TableDomUtils.CSS_PROP._TOP]="0",t.style[n.TableDomUtils.CSS_PROP._LEFT]="-999em",t.style[n.TableDomUtils.CSS_PROP._ZINDEX]="-999",document.body.appendChild(t),t},n.TableDomUtils.prototype.createTableHeaderColumnAccSelect=function(e,t){if(t!==n.TableDomUtils._OPTION_SELECTION_MODES._SINGLE&&t!==n.TableDomUtils._OPTION_SELECTION_MODES._MULTIPLE)return null;var i=this.getTableHeaderColumn(e),o=this.getTableHeaderColumnAccSelect(e);if(null!=o)return o;(o=document.createElement(n.TableDomUtils.DOM_ELEMENT._DIV)).classList.add(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ACC_SELECT_COLUMN_CLASS),o.classList.add(n.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS);var s=document.createElement(n.TableDomUtils.DOM_ELEMENT._INPUT);s.setAttribute(n.TableDomUtils.DOM_ATTR._ID,this.getTableId()+":acc_sel_col"+e),s.setAttribute(n.TableDomUtils.DOM_ATTR._TYPE,"checkbox"),s.setAttribute(n.TableDomUtils.DOM_ATTR._TABINDEX,"-1");var r=this.component.getTranslatedString(this.component._BUNDLE_KEY._LABEL_SELECT_COLUMN);return s.setAttribute(n.TableDomUtils.DOM_ATTR._TITLE,r),s.classList.add(n.TableDomUtils.CSS_CLASSES._CHECKBOX_ACC_SELECT_COLUMN_CLASS),o.appendChild(s),i.insertBefore(o,i.firstChild),o},n.TableDomUtils.prototype.createTableHeaderColumnResizeIndicator=function(){var e=this.getTableHeaderColumnResizeIndicator();if(!e){var t=this.getTableContainer();e=document.createElement(n.TableDomUtils.DOM_ELEMENT._DIV),t.appendChild(e),e.classList.add(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_RESIZE_INDICATOR_CLASS),this._cacheDomElement(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_RESIZE_INDICATOR_CLASS,e)}return e},n.TableDomUtils.prototype.createTableInlineMessage=function(){var e=this.getTableContainer(),t=document.createElement(n.TableDomUtils.DOM_ELEMENT._DIV);return t.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_INLINE_MESSAGE_CLASS),t.style[n.TableDomUtils.CSS_PROP._DISPLAY]=n.TableDomUtils.CSS_VAL._NONE,e.appendChild(t),this._cacheDomElement(n.TableDomUtils.CSS_CLASSES._TABLE_INLINE_MESSAGE_CLASS,t),t},n.TableDomUtils.prototype.createTableStatusAccNotification=function(){var e=this.getTableContainer(),t=document.createElement(n.TableDomUtils.DOM_ELEMENT._DIV);return t.setAttribute(n.TableDomUtils.DOM_ATTR._ROLE,"status"),t.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_STATUS_ACC_NOTIFICATION_CLASS),t.classList.add(n.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),e.appendChild(t),this._cacheDomElement(n.TableDomUtils.CSS_CLASSES._TABLE_STATUS_ACC_NOTIFICATION_CLASS,t),t},n.TableDomUtils.prototype.createTableStatusMessage=function(){var e=this.getTableContainer(),t=document.createElement(n.TableDomUtils.DOM_ELEMENT._DIV);t.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_STATUS_MESSAGE_CLASS),t.style[n.TableDomUtils.CSS_PROP._DISPLAY]=n.TableDomUtils.CSS_VAL._NONE;var i=document.createElement(n.TableDomUtils.DOM_ELEMENT._DIV);return i.classList.add(n.TableDomUtils.CSS_CLASSES._ICON_CLASS),i.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_LOADING_ICON_CLASS),i.setAttribute("aria-label",this.component.getTranslatedString(this.component._BUNDLE_KEY._MSG_FETCHING_DATA)),t.appendChild(i),e.appendChild(t),this._cacheDomElement(n.TableDomUtils.CSS_CLASSES._TABLE_STATUS_MESSAGE_CLASS,t),t},n.TableDomUtils.prototype.displayDragOverIndicatorColumn=function(e,t){this.removeDragOverIndicatorColumn();var i=this.getTableHeaderRow(),o=this.getTableHeaderColumn(e);if(null!=o)t?o.classList.add(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_BEFORE_CLASS):o.classList.add(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_AFTER_CLASS);else{var s=this.component._getColumnDefs();null!=s&&0!==s.length||(t?i.classList.add(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_BEFORE_CLASS):i.classList.add(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_AFTER_CLASS))}},n.TableDomUtils.prototype.displayDragOverIndicatorRow=function(e,t,i){this.removeDragOverIndicatorRow();var o=document.createElement(n.TableDomUtils.DOM_ELEMENT._TR);t?o.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_DRAG_INDICATOR_BEFORE_CLASS):o.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_DRAG_INDICATOR_AFTER_CLASS),i&&$(o).height(parseInt($(i).height(),10));var s=document.createElement(n.TableDomUtils.DOM_ELEMENT._TD),r=this.component._getColumnDefs();s.setAttribute(n.TableDomUtils.DOM_ATTR._COLSPAN,r.length+1),o.appendChild(s);var a=this.getTableBodyRow(e);if(null!=a)t?a.parentNode.insertBefore(o,a):a.parentNode.insertBefore(o,a.nextSibling);else{var l=this.getTableBodyRows();null!=l&&0!==l.length||this.component._hideNoDataMessage(),this.getTableBody().appendChild(o)}},n.TableDomUtils.prototype.getContextMenu=function(){return this._menuContainer},n.TableDomUtils.prototype.getContextMenuResizePopup=function(){var e=this.getTableId()+"_resize_popup";if(!this._isCachedDomElement(e)){var t=document.getElementById(e);this._cacheDomElement(e,t)}return this._getCachedDomElement(e)},n.TableDomUtils.prototype.getElementColumnIdx=function(e){var t=this.getFirstAncestor(e,n.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_CLASS);if(null!=t)return $(t.parentNode).children("."+n.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_CLASS).index(t);var i=this.getFirstAncestor(e,n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS);if(null!=i)return $(i.parentNode).children("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS).index(i);var o=this.getFirstAncestor(e,n.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS);return null!=o?$(o.parentNode).children("."+n.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS).index(o):null},n.TableDomUtils.prototype.getElementRowIdx=function(e){var t=this.getFirstAncestor(e,n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS);if(null!=t){var i=this.getTableBodyRows();return $(i).index(t)}return null},n.TableDomUtils.prototype.getFirstAncestor=function(e,t){var i;if(null==e)return null;if(this._isIE()){if(this.hasClass(e,t))return e}else if(e.classList.contains(t))return e;return 0!==(i=$(e).parents("."+t)).length?i[0]:null},n.TableDomUtils.prototype.hasClass=function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1},n.TableDomUtils.prototype.getScrollbarHeight=function(){var e=this.getScroller();return e.clientHeight>0?e.offsetHeight-e.clientHeight:0},n.TableDomUtils.prototype.getScrollbarWidth=function(){var e=this.getScroller();return e.clientWidth>0?e.offsetWidth-e.clientWidth:0},n.TableDomUtils.prototype.getScroller=function(){return this.getTableBody()},n.TableDomUtils.prototype.getScrollLeft=function(e){var t=e.scrollLeft;"rtl"===this.component._GetReadingDirection()&&(t=Math.abs(t),this._isWebkit()&&(t=e.scrollWidth-e.clientWidth-t));return t},n.TableDomUtils.prototype.getTable=function(){return this.element},n.TableDomUtils.prototype.getTableBody=function(){return this._getTableElementByClassName(n.TableDomUtils.CSS_CLASSES._TABLE_BODY_CLASS,!0)},n.TableDomUtils.prototype.getTableBodyCell=function(e,t,i){var n=this.getTableBodyCells(e,i);return n&&n.length>t?n[t]:null},n.TableDomUtils.prototype.getTableBodyCellAccSelect=function(e){if(null!=e){var t=e.getElementsByClassName(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_ACC_SELECT_CLASS);if(null!=t&&t.length>0)return t[0]}return null},n.TableDomUtils.prototype.getTableBodyLogicalCells=function(e,t){var i=this.getTableBodyCells(e,t);return i?this._getColspanLogicalElements(i):null},n.TableDomUtils.prototype.getTableBodyCells=function(e,t){if(t||(t=this.getTableBodyRow(e)),!t)return null;var i=t.getElementsByClassName(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_CLASS);return null!=i&&i.length>0?i:null},n.TableDomUtils.prototype.getTableBodyMessageCell=function(){var e=this.getTableBody();if(e){var t=e.querySelectorAll("."+n.TableDomUtils.CSS_CLASSES._TABLE_BODY_MESSAGE_CLASS);if(t&&t.length>0)return t[0]}return null},n.TableDomUtils.prototype.getTableBodyMessageRow=function(){var e=this.getTableBody();if(e){var t=e.getElementsByClassName(n.TableDomUtils.CSS_CLASSES._TABLE_BODY_MESSAGE_ROW_CLASS);if(t&&t.length>0)return t[0]}return null},n.TableDomUtils.prototype.getTableBodyRow=function(e){var t=this.getTableBodyRows();return t?null==e?null:t.length>e?t[e]:null:null},n.TableDomUtils.prototype.getTableBodyRows=function(){if(!this._cachedDomTableBodyRows){var e=this.getTableBody();if(null!=e){var t=e.getElementsByClassName(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS);null!=t&&t.length>0&&(this._cachedDomTableBodyRows=t)}}return this._cachedDomTableBodyRows},n.TableDomUtils.prototype.getTableBodyRowTouchSelectionAffordanceTop=function(){var e=this.getTableContainer().getElementsByClassName(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOP_CLASS);return null!=e&&e.length>0?e=e[0]:null},n.TableDomUtils.prototype.getTableBodyRowTouchSelectionAffordanceBottom=function(){var e=this.getTableContainer().getElementsByClassName(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_BOTTOM_CLASS);return null!=e&&e.length>0?e=e[0]:null},n.TableDomUtils.prototype.getTableBottomSlot=function(){return this._getTableElementByClassName(n.TableDomUtils.CSS_CLASSES._TABLE_BOTTOM_SLOT_CLASS,!0)},n.TableDomUtils.prototype.getTableContainer=function(){return this._isCachedDomElement(n.TableDomUtils.CSS_CLASSES._TABLE_CONTAINER_CLASS)||this._cacheDomElement(n.TableDomUtils.CSS_CLASSES._TABLE_CONTAINER_CLASS,this.element.parentNode),this._getCachedDomElement(n.TableDomUtils.CSS_CLASSES._TABLE_CONTAINER_CLASS)},n.TableDomUtils.prototype.getTableFooter=function(){return this._getTableElementByClassName(n.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CLASS,!0)},n.TableDomUtils.prototype.getTableFooterCell=function(e){var t=this.getTableFooterCells();return null!=t&&t.length>e?t[e]:null},n.TableDomUtils.prototype.getTableFooterCells=function(){var e=this.getTableFooterRow(),t=null!=e?e.getElementsByClassName(n.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS):null;return null!=t&&t.length>0?t:null},n.TableDomUtils.prototype.getTableFooterLogicalCells=function(){var e=this.getTableFooterCells();return e?this._getColspanLogicalElements(e):null},n.TableDomUtils.prototype.getTableFooterRow=function(){return this._getTableElementByClassName(n.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_ROW_CLASS)},n.TableDomUtils.prototype.getTableHeader=function(){return this._getTableElementByClassName(n.TableDomUtils.CSS_CLASSES._TABLE_HEADER_CLASS,!0)},n.TableDomUtils.prototype.getTableHeaderColumn=function(e){var t=this.getTableHeaderColumns();return t&&t.length>e&&e>=0?t[e]:null},n.TableDomUtils.prototype.getTableHeaderColumnAccSelect=function(e){var t=this.getTableHeaderColumn(e);if(null!=t){var i=t.getElementsByClassName(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ACC_SELECT_COLUMN_CLASS);if(null!=i&&i.length>0)return i[0]}return null},n.TableDomUtils.prototype.getTableHeaderColumnResizeIndicator=function(){return this._getTableElementByClassName(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_RESIZE_INDICATOR_CLASS,!0)},n.TableDomUtils.prototype.getTableHeaderColumns=function(){var e=this.getTableHeaderRow();if(null!=e){var t=e.getElementsByClassName(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS);if(null!=t&&t.length>0)return t}return null},n.TableDomUtils.prototype.getTableHeaderLogicalColumns=function(){var e=this.getTableHeaderColumns();return e?this._getColspanLogicalElements(e):null},n.TableDomUtils.prototype.getTableHeaderRow=function(){return this._getTableElementByClassName(n.TableDomUtils.CSS_CLASSES._TABLE_HEADER_ROW_CLASS)},n.TableDomUtils.prototype.getTableId=function(){if(!this._tableId){var e=this.component._IsCustomElement()?this.getTableContainer():this.getTable();this._tableId=e.getAttribute(n.TableDomUtils.DOM_ATTR._ID)}return this._tableId},n.TableDomUtils.prototype.getTableInlineMessage=function(){return this._getTableElementByClassName(n.TableDomUtils.CSS_CLASSES._TABLE_INLINE_MESSAGE_CLASS,!0)},n.TableDomUtils.prototype.getTableStatusAccNotification=function(){return this._getTableElementByClassName(n.TableDomUtils.CSS_CLASSES._TABLE_STATUS_ACC_NOTIFICATION_CLASS,!0)},n.TableDomUtils.prototype.getTableStatusMessage=function(){return this._getTableElementByClassName(n.TableDomUtils.CSS_CLASSES._TABLE_STATUS_MESSAGE_CLASS,!0)},n.TableDomUtils.prototype.getTableUID=function(){if(!this._tableUID){var e=this.getTableId();null==e&&(e=(1e32*Math.random()).toString(36)),this._tableUID=e}return this._tableUID},n.TableDomUtils.prototype.hashCode=function(e){"string"!==$.type(e)&&(e=e.toString());var t=0;if(0===e.length)return t;for(var i=e.length,n=0;n<i;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t},n.TableDomUtils.prototype.insertTableBodyCell=function(e,t,i,o,s,r,a){if(this.setTableBodyCellAttributes(e,t,i,o,s),a)return r.appendChild(s),s;if(0===o){var l=r.getElementsByClassName(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_ACC_SELECT_CLASS);null!=l&&l.length>0?(l=l[0]).parentNode.insertBefore(s,l.nextSibling):r.insertBefore(s,r.firstChild)}else{var u=r.getElementsByClassName(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_CLASS);if(u.length>=o){var d=u[o-1];d.parentNode.insertBefore(s,d.nextSibling)}else r.appendChild(s)}return s},n.TableDomUtils.prototype.insertTableBodyRow=function(e,t,i,o){if(this.setTableBodyRowAttributes(i,t),null==o){var s=this.getTableBody(),r=s.getElementsByClassName(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS);if(0===e)s.insertBefore(t,s.firstChild);else if(r.length>=e){var a=r[e-1];a.parentNode.insertBefore(t,a.nextSibling)}else s.appendChild(t)}else o.appendChild(t);this.clearCachedDomRowData()},n.TableDomUtils.prototype.insertTableFooterCell=function(e,t){var i=this.getTableFooterRow(),o=i.getElementsByClassName(n.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS);if(0===e){var s=i.getElementsByClassName(n.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS);null!=s&&s.length>0?(s=s[0]).parentNode.insertBefore(t,s.nextSibling):i.insertBefore(t,i.firstChild)}else if(i.length>=e){var r=o[e-1];r.parentNode.insertBefore(t,r.nextSibling)}else i.appendChild(t);return t},n.TableDomUtils.prototype.insertTableHeaderColumn=function(e,t){var i=this.getTableHeaderRow(),o=this.getTableHeaderColumns();this.setTableHeaderColumnAttributes(e,t);var s=this.getTableHeaderColumn(e);if(s)$(s).replaceWith($(t));else if(0===e){var r=i.getElementsByClassName(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ACC_SELECT_ROW_CLASS);null!=r&&r.length>0?(r=r[0]).parentNode.insertBefore(t,r.nextSibling):i.insertBefore(t,i.firstChild)}else if(o&&o.length>=e){var a=o[e-1];a.parentNode.insertBefore(t,a.nextSibling)}else i.appendChild(t)},n.TableDomUtils.prototype.isTableContainerScrollable=function(){var e=this.getTableContainer(),t=this.getTable(),i=this.component._isStatusMessageShown();i&&this.component._hideStatusMessage();var n=[];return e.clientHeight>0?t.clientHeight>e.clientHeight?n[0]=1:e.clientHeight-t.clientHeight>1?n[0]=-1:n[0]=0:n[0]=0,e.clientWidth>0?t.clientWidth>e.clientWidth?n[1]=1:e.clientWidth-t.clientWidth>1?n[1]=-1:n[1]=0:n[1]=0,i&&this.component._showStatusMessage(),n},n.TableDomUtils.prototype.moveTableBodyRowTouchSelectionAffordanceTop=function(e){var t=this.getTableBodyRowTouchSelectionAffordanceTop();if(null!=t){$(t).data("rowIdx",e),$(t.children[0]).data("rowIdx",e);var i=this.getTableBody(),o=this.getTableBodyRow(e).getBoundingClientRect(),s=this.getTableContainer().getBoundingClientRect();t.style[n.TableDomUtils.CSS_PROP._TOP]=o.top-s.top-t.clientHeight/2+n.TableDomUtils.CSS_VAL._PX,t.style[n.TableDomUtils.CSS_PROP._LEFT]=i.clientWidth/2+n.TableDomUtils.CSS_VAL._PX}},n.TableDomUtils.prototype.moveTableBodyRowTouchSelectionAffordanceBottom=function(e){var t=this.getTableBodyRowTouchSelectionAffordanceBottom();if(null!=t){$(t).data("rowIdx",e),$(t.children[0]).data("rowIdx",e);var i=this.getTableBody(),o=this.getTableBodyRow(e).getBoundingClientRect(),s=this.getTableContainer().getBoundingClientRect();t.style[n.TableDomUtils.CSS_PROP._TOP]=o.top-s.top+o.height-t.clientHeight/2+n.TableDomUtils.CSS_VAL._PX,t.style[n.TableDomUtils.CSS_PROP._LEFT]=i.clientWidth/2+n.TableDomUtils.CSS_VAL._PX}},n.TableDomUtils.prototype.moveTableHeaderColumn=function(e,t,i){var o=this.component._getColumnDefs(),s=this.getTableHeaderColumn(e),r=this.getTableFooterCell(e),a=null,l=null,u=null,d=null,h=null,c=!1;t===o.length&&(t-=1,c=!0),null!=s&&(h=s.getAttribute(n.TableDomUtils.DOM_ATTR._COLSPAN),null==(l=this.getTableHeaderColumn(t))||null!=h&&1!==h||(c?l.parentNode.insertBefore(s,l.nextSibling):l.parentNode.insertBefore(s,l))),null!=r&&(h=r.getAttribute(n.TableDomUtils.DOM_ATTR._COLSPAN),null==(u=this.getTableFooterCell(t))||null!=h&&1!==h||(c?u.parentNode.insertBefore(r,u.nextSibling):u.parentNode.insertBefore(r,u)));var p,_=this.getTableBodyRows();if(null!=_)for(p=0;p<_.length;p++)null!=(a=this.getTableBodyCell(p,e,null))&&(d=this.getTableBodyCell(p,t,null),h=a.getAttribute(n.TableDomUtils.DOM_ATTR._COLSPAN),null==d||null!=h&&1!==h||(c?d.parentNode.insertBefore(a,d.nextSibling):d.parentNode.insertBefore(a,d)));var m=[],g=this.options.columns.length;for(p=0;p<g;p++)m[p]=$.extend({},{},this.options.columns[p]);var f=e<t&&!c?t-1:t,v=m.splice(e,1);m.splice(f,0,v[0]);var y=this.component._columnDefArray.splice(e,1);if(this.component._columnDefArray.splice(f,0,y[0]),!this._columnsDestMap)for(this._columnsDestMap=[],p=0;p<m.length;p++)this._columnsDestMap[p]=p;var b=this._columnsDestMap.splice(e,1);return this._columnsDestMap.splice(f,0,b[0]),this.component.option("columns",m,{_context:{writeback:!0,originalEvent:i,internalSet:!0}}),this.component._queueTask(function(){}),this._columnsDestMap},n.TableDomUtils.prototype.refreshContextMenu=function(){var e=this._menuContainer;if(e){var t,i=e.querySelectorAll("[data-oj-command]");for(t=0;t<i.length;t++){var o=$(i[t]).children(n.TableDomUtils.DOM_ELEMENT._A);if(o.length>0){var s,r=i[t].getAttribute("data-oj-command").split("-");"sort"===(r=r[r.length-1])?s=this.component.getTranslatedString("labelSort"):"sortAsc"===r?s=this.component.getTranslatedString("labelSortAsc"):"sortDsc"===r?s=this.component.getTranslatedString("labelSortDsc"):"resize"===r&&(s=this.component.getTranslatedString("labelResize")),o.contents().filter(function(){return 3===this.nodeType})[0].nodeValue=s}}}},n.TableDomUtils.prototype.refreshTableDimensions=function(e,t,i,n,o){this._refreshTableDimensions(e,t,i,n,o),this.component._setCurrentRow(this.options.currentRow,null)},n.TableDomUtils.prototype.removeDragOverIndicatorColumn=function(){var e=this.getTable().querySelectorAll("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_BEFORE_CLASS+",."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_AFTER_CLASS),t=0;if(e&&e.length>0){var i=e.length;for(t=0;t<i;t++)e[t].classList.remove(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_BEFORE_CLASS),e[t].classList.remove(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_AFTER_CLASS)}},n.TableDomUtils.prototype.removeDragOverIndicatorRow=function(){var e,t=this.getTableBody(),i=t.getElementsByClassName(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_DRAG_INDICATOR_BEFORE_CLASS),o=t.getElementsByClassName(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_DRAG_INDICATOR_AFTER_CLASS);if(i&&i.length>0){var s=i.length;for(e=0;e<s;e++)$(i[e]).remove()}if(o&&o.length>0){var r=o.length;for(e=0;e<r;e++)$(o[e]).remove()}var a=this.getTableBodyRows();null!=a&&0!==a.length||this.component._showNoDataMessage()},n.TableDomUtils.prototype.removeTableBodyRow=function(e){var t=this.getTableBodyRow(e);null!=t&&(w.subtreeDetached(t),this.component._hasCellTemplate&&this.component._cleanTemplateNodes(t),$(t).remove(),this.clearCachedDomRowData())},n.TableDomUtils.prototype.removeAllTableBodyRows=function(){var e=this.getTableBodyRows();if(null!=e&&e.length>0){var t=this.getTableBody();null!=t&&(w.subtreeDetached(t),this.component._hasCellTemplate&&(this.component._cleanTemplateNodes(t),this.component._hasCellTemplate=!1,this.component._registerDomEventListeners()),$(t).empty()),this.clearCachedDomRowData()}},n.TableDomUtils.prototype.removeTableBodyRowTouchSelectionAffordance=function(){var e,t=this.getTableContainer().getElementsByClassName(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOUCH_AREA_CLASS);if(null!=t&&t.length>0)for(e=0;e<t.length;e++)$(t[e]).remove()},n.TableDomUtils.prototype.removeTableHeaderColumnDragImage=function(){var e=this.getTableContainer().querySelectorAll("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DRAG_IMAGE);if(e&&e.length>0)for(var t=e.length,i=0;i<t;i++)$(e[i]).remove()},n.TableDomUtils.prototype.removeTableHeaderColumnResizeIndicator=function(){var e=this.getTableHeaderColumnResizeIndicator();e&&($(e).remove(),this._clearCachedDom(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_RESIZE_INDICATOR_CLASS))},n.TableDomUtils.prototype.setScrollLeft=function(e,t){"rtl"===this.component._GetReadingDirection()&&(t=Math.abs(t),this._isWebkit()?t=e.scrollWidth-e.clientWidth-t:this._isFF()&&(t*=-1));e.scrollLeft!==t&&(e.scrollLeft=t)},n.TableDomUtils.prototype.setTableBodyCellAttributes=function(e,t,i,o,s){var r=s.getAttribute(n.TableDomUtils.DOM_ATTR._ID);if(!(null!=r&&r.length>0)){var a=this.options.accessibility,l=this.component._getColumnDefs()[o];if(null!=l){var u=null,d=this.component._isTableHeaderless();u=null!=a&&null!=a.rowHeader?a.rowHeader:this.component._getColumnDefs()[0].id;var h=null!=t?t.toString():e.toString(),c=null==i?this.hashCode(h):i,p=this.getTableId()+":"+u+"_"+c,_=this.getTableId()+":"+l.id;u===l.id?(r=p,d&&(_="")):(r=p+"_"+o,_=d?p:_+" "+p),s.setAttribute(n.TableDomUtils.DOM_ATTR._ID,r),s.getAttribute(n.TableDomUtils.DOM_ATTR._HEADERS)||s.setAttribute(n.TableDomUtils.DOM_ATTR._HEADERS,_)}}},n.TableDomUtils.prototype.setTableBodyRowAttributes=function(e,t){$(t).data("rowKey",e.key),$(t).data("rowData",e.data)},n.TableDomUtils.prototype.setTableHeaderColumnAttributes=function(e,t){var i=this.component._getColumnDefs()[e];t.getAttribute(n.TableDomUtils.DOM_ATTR._ID)||t.setAttribute(n.TableDomUtils.DOM_ATTR._ID,this.getTableId()+":"+i.id)},n.TableDomUtils.prototype.setTableColumnCellsClass=function(e,t,i){var n,o=this.getTableBodyRows();if(null!=o&&o.length>0)if(null===e){var s=null;if(null!=(s=t?this.getTableBody().querySelectorAll("[td]"):this.getTableBody().querySelectorAll("."+i))&&s.length>0){var r=s.length;for(n=0;n<r;n++)t?s[n].classList.add(i):s[n].classList.remove(i)}}else{var a=o.length;for(n=0;n<a;n++){var l=this.getTableBodyCell(n,e,null);t?l.classList.add(i):l.classList.remove(i)}}},n.TableDomUtils.prototype.setTableBodyMessage=function(e){var t=this.getTableBodyMessageCell();$(t).empty(),t.appendChild(document.createTextNode(e))},n.TableDomUtils.prototype.setTableInlineMessage=function(e,t,i){var o=this.getTableInlineMessage();$(o).empty(),$(o).append(n.PopupMessagingStrategyUtils.buildMessageHtml(document,e,t,i,null))},n.TableDomUtils.prototype.setTableStatusAccNotification=function(e){var t=this.getTableStatusAccNotification();$(t).empty(),t.appendChild(document.createTextNode(e))},n.TableDomUtils.prototype.styleInitialTable=function(){var e=this.getTable(),t=e.getElementsByTagName(n.TableDomUtils.DOM_ELEMENT._THEAD);t=t.length>0?t[0]:null;var i=e.getElementsByTagName(n.TableDomUtils.DOM_ELEMENT._TFOOT);i=i.length>0?i[0]:null;var o=e.getElementsByTagName(n.TableDomUtils.DOM_ELEMENT._TBODY);o=o.length>0?o[0]:null,e.setAttribute(n.TableDomUtils.DOM_ATTR._TABINDEX,"0"),this.component._focusable({element:e,applyHighlight:!0,setupHandlers:this._focusSetupHandlers.bind(this)}),this.styleTableHeader(t),this.styleTableFooter(i),this.styleTableBody(o)},n.TableDomUtils.prototype.styleTableBody=function(e){e.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_BODY_CLASS),e.setAttribute(w._OJ_CONTAINER_ATTR,this.component.widgetName)},n.TableDomUtils.prototype.styleTableBodyCell=function(e,t,i){var o=this.component._getColumnDefs()[e];!i&&t.classList.contains(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_CLASS)||(t.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_CLASS),t.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_DATE_CELL_FORM_CONTROL_CLASS),null==o||null==o.style||!i&&t.getAttribute(n.TableDomUtils.DOM_ATTR._STYLE)===o.style||t.setAttribute(n.TableDomUtils.DOM_ATTR._STYLE,o.style),null==o||null==o.className||!i&&$(t).hasClass(o.className)||$(t).addClass(o.className)),this._isVerticalGridEnabled()&&(!i&&t.classList.contains(n.TableDomUtils.CSS_CLASSES._TABLE_VGRID_LINES_CLASS)||t.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_VGRID_LINES_CLASS))},n.TableDomUtils.prototype.styleTableBodyRow=function(e,t){!t&&e.classList.contains(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS)||e.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_DATA_ROW_CLASS),this._isHorizontalGridEnabled()&&(!t&&e.classList.contains(n.TableDomUtils.CSS_CLASSES._TABLE_HGRID_LINES_CLASS)||e.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_HGRID_LINES_CLASS))},n.TableDomUtils.prototype.styleTableContainer=function(e){e.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_CLASS),e.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_CONTAINER_CLASS),e.classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._WIDGET),this.options.display===n.TableDomUtils._OPTION_DISPLAY._GRID?e.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_COMPACT_CLASS):e.classList.remove(n.TableDomUtils.CSS_CLASSES._TABLE_COMPACT_CLASS);var t=this.options.editMode;null!=t&&t!==this.component._OPTION_EDIT_MODE._NONE?e.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_EDIT_CLASS):e.classList.remove(n.TableDomUtils.CSS_CLASSES._TABLE_EDIT_CLASS)},n.TableDomUtils.prototype.styleTableFooter=function(e){e&&(e.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CLASS),e.getElementsByTagName(n.TableDomUtils.DOM_ELEMENT._TR)[0].classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_ROW_CLASS))},n.TableDomUtils.prototype.styleTableFooterCell=function(e,t){var i=this.component._getColumnDefs()[e];null!=i.footerStyle&&t.setAttribute(n.TableDomUtils.DOM_ATTR._STYLE,i.footerStyle),t.classList.contains(n.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS)||t.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS),this._isVerticalGridEnabled()&&!t.classList.contains(n.TableDomUtils.CSS_CLASSES._TABLE_VGRID_LINES_CLASS)&&t.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_VGRID_LINES_CLASS),i.footerClassName&&$(t).addClass(i.footerClassName)},n.TableDomUtils.prototype.styleTableHeader=function(e){if(e){e.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_HEADER_CLASS),e.style[n.TableDomUtils.CSS_PROP._DISPLAY]="table-header-group";var t=e.getElementsByTagName(n.TableDomUtils.DOM_ELEMENT._TR)[0];t.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_HEADER_ROW_CLASS),t.style[n.TableDomUtils.CSS_PROP._POSITION]=n.TableDomUtils.CSS_VAL._RELATIVE}},n.TableDomUtils.prototype.styleTableHeaderColumn=function(e,t,i,o){var s=this.component._getColumnDefs()[e];!o&&t.classList.contains(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS)||(t.classList.add(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS),this._isVerticalGridEnabled()&&(!o&&t.classList.contains(n.TableDomUtils.CSS_CLASSES._TABLE_VGRID_LINES_CLASS)||t.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_VGRID_LINES_CLASS)),null==s.headerStyle||!o&&t.getAttribute(n.TableDomUtils.DOM_ATTR._STYLE)===s.headerStyle||t.setAttribute(n.TableDomUtils.DOM_ATTR._STYLE,s.headerStyle),null==s.headerClassName||!o&&$(t).hasClass(s.headerClassName)||$(t).addClass(s.headerClassName))},n.TableDomUtils.prototype._getColspanLogicalElements=function(e){for(var t=0,i=[],o=e.length,s=0;s<o;s++){var r=e[s].getAttribute(n.TableDomUtils.DOM_ATTR._COLSPAN);if(null!=r){r=parseInt(r,10);for(var a=0;a<r;a++)i[t+a]=e[s];t+=r}else i[t]=e[s],t+=1}return i},n.TableDomUtils.prototype._isHorizontalGridEnabled=function(){return this.options.horizontalGridVisible===n.TableDomUtils._OPTION_ENABLED||this.options.horizontalGridVisible===n.TableDomUtils._OPTION_AUTO},n.TableDomUtils.prototype._isVerticalGridEnabled=function(){return this.options.verticalGridVisible===n.TableDomUtils._OPTION_ENABLED||this.options.verticalGridVisible===n.TableDomUtils._OPTION_AUTO&&this.options.display===n.TableDomUtils._OPTION_DISPLAY._GRID},n.TableDomUtils.prototype._isFF=function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},n.TableDomUtils.prototype._isIE=function(){if(void 0===this._browserIsIE){var e=navigator.userAgent;if("Microsoft Internet Explorer"===navigator.appName){var t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(e);null!=t&&(this._browserIsIE=parseFloat(t[1]))}else e.indexOf("Trident")>=0?this._browserIsIE=11:this._browserIsIE=null}return this._browserIsIE},n.TableDomUtils.prototype._isWebkit=function(){if(void 0===this._browserIsWebkit){var e=navigator.userAgent.toLowerCase();this._browserIsWebkit=/webkit/.test(e)&&!/edge/.test(e)}return this._browserIsWebkit},n.TableDomUtils.prototype._refreshTableDimensions=function(e,t,i,o,s){var r=this.getTable(),a=this.getTableContainer(),l=this.getTableBody();if(!s){if(null!=e&&e===this._cacheDomDimensions.tableContainerWidth&&null!=t&&t===this._cacheDomDimensions.tableContainerHeight)return;var u=l.scrollHeight,d=l.scrollWidth;if(null==t&&void 0!==this._cacheDomDimensions.tableBodyScrollHeight&&null!==this._cacheDomDimensions.tableBodyScrollHeight&&null==e&&void 0!==this._cacheDomDimensions.tableBodyScrollWidth&&null!==this._cacheDomDimensions.tableBodyScrollWidth){var h=Math.abs(u-this._cacheDomDimensions.tableBodyScrollHeight),c=Math.abs(d-this._cacheDomDimensions.tableBodyScrollWidth);if(h<=1&&c<=1)return;if(this._tableHeightConstrained&&h>1&&c<=1&&u>this._cacheDomDimensions.tableBodyScrollHeight)return}}var p=null,_=null;null!=this.component._scrollTop&&this.component._scrollTop>0&&(p=this.component._scrollTop),null!=this.component._scrollLeft&&this.component._scrollLeft>0&&(_=this.component._scrollLeft),this._removeTableDimensionsStyling(),this.styleTableContainer(a);var m=this.isTableContainerScrollable();if(1===m[0]?this._tableHeightConstrained=!0:this._tableHeightConstrained=!1,1===m[1]?this._tableWidthConstrained=!0:this._tableWidthConstrained=!1,null!=l){if(this._tableHeightConstrained||this._tableWidthConstrained){var g=this.getTableHeader(),f=this.getTableFooter(),v=this.getTableBottomSlot();a.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_SCROLL_CLASS),this._tableDimensions||(this._tableDimensions={}),e>0||t>0?(e>0&&this._tableWidthConstrained&&(this._tableDimensions[n.TableDomUtils.CSS_PROP._WIDTH]=e),t>0&&this._tableHeightConstrained&&(this._tableDimensions[n.TableDomUtils.CSS_PROP._HEIGHT]=t)):(this._tableHeightConstrained?this._tableDimensions[n.TableDomUtils.CSS_PROP._HEIGHT]=a.offsetHeight:this._tableDimensions[n.TableDomUtils.CSS_PROP._HEIGHT]=0,this._tableWidthConstrained?this._tableDimensions[n.TableDomUtils.CSS_PROP._WIDTH]=a.offsetWidth:this._tableDimensions[n.TableDomUtils.CSS_PROP._WIDTH]=0),null==this._tableBorderWidth&&(this._tableBorderWidth=$(a).outerWidth()-$(a).innerWidth()),null==this._tableBorderHeight&&(this._tableBorderHeight=$(a).outerHeight()-$(a).innerHeight());var y=0;this._tableHeightConstrained&&!this._tableWidthConstrained&&(a.style[n.TableDomUtils.CSS_PROP._OVERFLOW]=n.TableDomUtils.CSS_VAL._AUTO,y=a.offsetWidth-a.clientWidth,this._tableDimensions[n.TableDomUtils.CSS_PROP._WIDTH]>0?r.style[n.TableDomUtils.CSS_PROP._WIDTH]=a.clientWidth+n.TableDomUtils.CSS_VAL._PX:(r.style[n.TableDomUtils.CSS_PROP._WIDTH]=a.scrollWidth+y+n.TableDomUtils.CSS_VAL._PX,1===(m=this.isTableContainerScrollable())[1]&&(r.style[n.TableDomUtils.CSS_PROP._WIDTH]=a.clientWidth+n.TableDomUtils.CSS_VAL._PX)),a.style[n.TableDomUtils.CSS_PROP._OVERFLOW]="");var b=this._tableHeightConstrained&&!this.component._isTouchDevice()&&a.classList.contains(n.TableDomUtils.MARKER_STYLE_CLASSES._HIDE_VERTICAL_SCROLLBAR);b?(l.style[n.TableDomUtils.CSS_PROP._OVERFLOW_Y]="hidden",this._setColumnWidths(y)):this._setColumnWidths(),this._tableHeightConstrained&&a.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_SCROLL_VERTICAL_CLASS),this._tableWidthConstrained&&a.classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_SCROLL_HORIZONTAL_CLASS);var C=r.clientWidth;y>0&&!b&&(r.style[n.TableDomUtils.CSS_PROP._WIDTH]=a.offsetWidth+n.TableDomUtils.CSS_VAL._PX);var S=0,E=r.getElementsByTagName("caption");if(null!=E&&E.length>0&&(E=E[0],S=$(E).outerHeight(),E.style[n.TableDomUtils.CSS_PROP._DISPLAY]=n.TableDomUtils.CSS_VAL._INLINE,null!=g)){var T=window.getComputedStyle(a);g.style[n.TableDomUtils.CSS_PROP._BORDER_TOP]=T[n.TableDomUtils.CSS_PROP._BORDER_TOP]}var D=0;null!=g&&(D=$(g).outerHeight());var A,I=0,O=0;this._tableWidthConstrained?l.style[n.TableDomUtils.CSS_PROP._WIDTH]=this._tableDimensions[n.TableDomUtils.CSS_PROP._WIDTH]-this._tableBorderWidth+n.TableDomUtils.CSS_VAL._PX:y>0&&!b&&(l.style[n.TableDomUtils.CSS_PROP._WIDTH]=C-this._tableBorderWidth+y+n.TableDomUtils.CSS_VAL._PX),null!=f&&(I=$(f).outerHeight(),l.style[n.TableDomUtils.CSS_PROP._TOP]=-1*I+n.TableDomUtils.CSS_VAL._PX);var w=0,R=this.getTableInlineMessage();null!=R&&R.style[n.TableDomUtils.CSS_PROP._DISPLAY]!==n.TableDomUtils.CSS_VAL._NONE&&R.clientHeight>0&&(w=$(R).outerHeight());var x=0;if(null!=v&&v.style[n.TableDomUtils.CSS_PROP._DISPLAY]!==n.TableDomUtils.CSS_VAL._NONE&&v.clientHeight>0&&(x=$(v).outerHeight()),this._tableHeightConstrained?(O=this._tableDimensions[n.TableDomUtils.CSS_PROP._HEIGHT]-D-I-S-w-x-this._tableBorderHeight)>0&&(l.style[n.TableDomUtils.CSS_PROP._HEIGHT]=O+n.TableDomUtils.CSS_VAL._PX,l.style[n.TableDomUtils.CSS_PROP._MIN_HEIGHT]=O+n.TableDomUtils.CSS_VAL._PX):O=$(l).outerHeight(),A=this.getScrollbarWidth(),this._tableWidthConstrained){var L=this.getTableBodyRows();if(null!=L&&L.length>0){if(l.style[n.TableDomUtils.CSS_PROP._OVERFLOW_X]=n.TableDomUtils.CSS_VAL._AUTO,a.style[n.TableDomUtils.CSS_PROP._OVERFLOW_X]=n.TableDomUtils.CSS_VAL._HIDDEN,a.style[n.TableDomUtils.CSS_PROP._OVERFLOW_Y]=n.TableDomUtils.CSS_VAL._HIDDEN,null!=g){var N=this._tableDimensions[n.TableDomUtils.CSS_PROP._WIDTH]-this._tableBorderWidth;N>0&&(g.style[n.TableDomUtils.CSS_PROP._WIDTH]=A>0?N-A+n.TableDomUtils.CSS_VAL._PX:N+n.TableDomUtils.CSS_VAL._PX)}}else l.style[n.TableDomUtils.CSS_PROP._OVERFLOW_X]=n.TableDomUtils.CSS_VAL._HIDDEN,a.style[n.TableDomUtils.CSS_PROP._OVERFLOW_X]=n.TableDomUtils.CSS_VAL._AUTO,a.style[n.TableDomUtils.CSS_PROP._OVERFLOW_Y]=n.TableDomUtils.CSS_VAL._HIDDEN}null!=f&&(f.style[n.TableDomUtils.CSS_PROP._TOP]=O+n.TableDomUtils.CSS_VAL._PX),this._setHeaderColumnLastWidth()}else this.component._isTableColumnsWidthSet()&&this._setColumnWidths();if(this._setHeaderColumnOverflowWidths(),this._removeTableBodyRowBottomBorder(m[0]<0),this.refreshTableStatusPosition(),null==p||i)i&&(this.getScroller().scrollTop=0,$(this.getScroller()).scroll());else{var P=this.getScroller().scrollHeight-this.getScroller().clientHeight;p=p>P?P:p,this.component._isLoadMoreOnScroll()&&P===p&&(p-=1),this.component._skipScrollUpdate=!0,this.getScroller().scrollTop=p,$(this.getScroller()).scroll()}null==_||o?o&&(this.setScrollLeft(this.getScroller(),0),$(this.getScroller()).scroll()):(this.component._skipScrollUpdate=!0,this.setScrollLeft(this.getScroller(),_),$(this.getScroller()).scroll()),this._cacheDomDimensions.tableContainerHeight=$(a).outerHeight(),this._cacheDomDimensions.tableContainerWidth=$(a).outerWidth(),this._cacheDomDimensions.tableBodyScrollHeight=l.scrollHeight,this._cacheDomDimensions.tableBodyScrollWidth=l.scrollWidth}},n.TableDomUtils.prototype.refreshTableStatusPosition=function(){if(this.component._isStatusMessageShown()){var e=this.getTableContainer(),t=this.getTableBody(),i=this.getTableStatusMessage(),o=e;t.clientHeight>0&&(o=t),i.style[n.TableDomUtils.CSS_PROP._HEIGHT]=t.clientHeight+n.TableDomUtils.CSS_VAL._PX,i.style[n.TableDomUtils.CSS_PROP._WIDTH]=t.clientWidth+n.TableDomUtils.CSS_VAL._PX;var s=i.children[0],r="rtl"===this.component._GetReadingDirection(),a={my:"center",at:"center",collision:"none",of:o};a=n.PositionUtils.normalizeHorizontalAlignment(a,r),$(i).position(a);var l={my:"center",at:"center",collision:"none",of:i};l=n.PositionUtils.normalizeHorizontalAlignment(l,r),$(s).position(l)}},n.TableDomUtils.prototype._cacheDomElement=function(e,t){this._domCache||(this._domCache={}),this._domCache[e]=t},n.TableDomUtils.prototype._clearCachedDom=function(e){e&&this._domCache?delete this._domCache[e]:this._domCache={},this._cacheDomDimensions={}},n.TableDomUtils.prototype._getCachedDomElement=function(e){return this._domCache?this._domCache[e]:null},n.TableDomUtils.prototype._isCachedDomElement=function(e){return this._domCache||(this._domCache={}),-1!==Object.keys(this._domCache).indexOf(e)},n.TableDomUtils.prototype._getTableElementByClassName=function(e,t){if(!this._isCachedDomElement(e)){var i=this.getTableContainer();if(i)if(this._cacheDomElement(e,null),t){if(this._cacheDomElement(e,this._getChildElementByClassName(i,e)),null==this._getCachedDomElement(e)){var n=this.getTable();this._cacheDomElement(e,this._getChildElementByClassName(n,e))}}else{var o=i.getElementsByClassName(e);o&&o.length>0&&this._cacheDomElement(e,o[0])}}return this._getCachedDomElement(e)},n.TableDomUtils.prototype._getChildElementByClassName=function(e,t){if(null!=e.childNodes&&e.childNodes.length>0)for(var i=0;i<e.childNodes.length;i++)if(null!=e.childNodes[i].classList&&e.childNodes[i].classList.contains(t))return e.childNodes[i];return null},n.TableDomUtils.prototype._focusSetupHandlers=function(e,t){this.component._setFocusInHandler(e),this.component._setFocusOutHandler(t)},n.TableDomUtils.prototype._removeHeaderColumnAndCellColumnWidths=function(){var e,t=this.component._getColumnDefs().length;for(e=0;e<t;e++){var i=this.getTableHeaderColumn(e);null!=i&&(i.style[n.TableDomUtils.CSS_PROP._MIN_WIDTH]="")}var o=this.getTableBodyRows();if(null!=o&&o.length>0)for(e=0;e<t;e++){var s=this.getTableBodyCell(0,e,null);if(null!=s&&(s.style[n.TableDomUtils.CSS_PROP._MIN_WIDTH]="",null!=this._forcedWidthColumns&&this._forcedWidthColumns[e]))for(var r=0;r<o.length;r++)(s=this.getTableBodyCell(r,e,null)).style[n.TableDomUtils.CSS_PROP._MIN_WIDTH]="",s.style[n.TableDomUtils.CSS_PROP._WIDTH]="",s.style[n.TableDomUtils.CSS_PROP._MAX_WIDTH]=""}for(e=0;e<t;e++){var a=this.getTableFooterCell(e);null!=a&&(a.style[n.TableDomUtils.CSS_PROP._MIN_WIDTH]="")}},n.TableDomUtils.prototype._removeTableBodyRowBottomBorder=function(e){if(this._isHorizontalGridEnabled()){var t=this.getTableBodyRows();if(null!=t&&t.length>0){for(var i=t.length,o=0;o<i;o++)t[o].classList.contains(n.TableDomUtils.CSS_CLASSES._TABLE_HGRID_LINES_CLASS)||t[o].classList.add(n.TableDomUtils.CSS_CLASSES._TABLE_HGRID_LINES_CLASS);var s=t[t.length-1];e||s.classList.remove(n.TableDomUtils.CSS_CLASSES._TABLE_HGRID_LINES_CLASS)}}},n.TableDomUtils.prototype._removeTableDimensionsStyling=function(){var e=this.getTable(),t=this.getTableContainer(),i=this.getTableHeader(),o=this.getTableHeaderRow(),s=this.getTableFooter(),r=this.getTableFooterRow(),a=this.getTableBody();if(t.classList.remove(n.TableDomUtils.CSS_CLASSES._TABLE_SCROLL_CLASS),t.classList.remove(n.TableDomUtils.CSS_CLASSES._TABLE_SCROLL_VERTICAL_CLASS),t.classList.remove(n.TableDomUtils.CSS_CLASSES._TABLE_SCROLL_HORIZONTAL_CLASS),t.style[n.TableDomUtils.CSS_PROP._OVERFLOW]=n.TableDomUtils.CSS_VAL._VISIBLE,null!=i){i.setAttribute(n.TableDomUtils.DOM_ATTR._STYLE,""),o.setAttribute(n.TableDomUtils.DOM_ATTR._STYLE,"");var l=o.querySelectorAll("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_TEXT_CLASS);if(l&&l.length>0)for(var u=l.length,d=0;d<u;d++)l[d].style[n.TableDomUtils.CSS_PROP._WIDTH]=""}null!=s&&(s.setAttribute(n.TableDomUtils.DOM_ATTR._STYLE,""),r.setAttribute(n.TableDomUtils.DOM_ATTR._STYLE,"")),e.style[n.TableDomUtils.CSS_PROP._DISPLAY]="",e.style[n.TableDomUtils.CSS_PROP._WIDTH]="",null!=a&&a.setAttribute(n.TableDomUtils.DOM_ATTR._STYLE,""),this._removeHeaderColumnAndCellColumnWidths()},n.TableDomUtils.prototype._getBoxStyle=function(e){return{boxSizing:e[n.TableDomUtils.CSS_PROP._BOX_SIZING],borderWidth:(parseFloat(e[n.TableDomUtils.CSS_PROP._BORDER_RIGHT_WIDTH])||0)+(parseFloat(e[n.TableDomUtils.CSS_PROP._BORDER_LEFT_WIDTH])||0),paddingWidth:(parseFloat(e[n.TableDomUtils.CSS_PROP._PADDING_RIGHT])||0)+(parseFloat(e[n.TableDomUtils.CSS_PROP._PADDING_LEFT])||0)}},n.TableDomUtils.prototype._applyColumnHeaderHeight=function(e){var t=e.querySelectorAll("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_TEXT_CLASS);if(t&&t.length>0){var i=t[0].clientHeight+n.TableDomUtils.CSS_VAL._PX,o=e.querySelectorAll("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CLASS);o&&o.length>0&&(o[0].style[n.TableDomUtils.CSS_PROP._MIN_HEIGHT]=i)}},n.TableDomUtils.prototype._getForcedColumnWidth=function(e,t){var i=e+("border-box"===t.boxSizing?t.borderWidth:-t.paddingWidth);return i+=n.TableDomUtils.CSS_VAL._PX},n.TableDomUtils.prototype._applyForcedColumnWidth=function(e,t){var i=e;i.style[n.TableDomUtils.CSS_PROP._MIN_WIDTH]=t,i.style[n.TableDomUtils.CSS_PROP._WIDTH]=t,i.style[n.TableDomUtils.CSS_PROP._MAX_WIDTH]=t},n.TableDomUtils.prototype._setColumnWidths=function(t){var i,o,s,r,a,l,u,d,h,c,p,_,m,g,f,y,b=[],C=[],S=[],E=this.component._getColumnDefs(),T=E.length,D=this.getTableBodyRows();for(this._forcedWidthColumns=[],i=0;i<T;i++)if((s=E[i].width)>0){if(this._forcedWidthColumns[i]=!0,"number"!=typeof s&&(f=this.component._LOGGER_MSG._ERR_WIDTH_INVALID_TYPE_SUMMARY,y=v.applyParameters(this.component._LOGGER_MSG._ERR_WIDTH_INVALID_TYPE_DETAIL,{width:s}),e.warn(f+"\n"+y),s=parseFloat(s)),b[i]=s,C[i]=s,S[i]=s,null!==(a=this.getTableHeaderColumn(i))&&(null!==this.component._getColumnRenderer(i,"header")?u=this._getBoxStyle(window.getComputedStyle(a)):(d||(d=this._getBoxStyle(window.getComputedStyle(a))),u=d),this._applyForcedColumnWidth(a,this._getForcedColumnWidth(s,u))),h=this.getTableBodyCell(0,i,null),null!==D&&null!==h)for(this.component._hasRowOrCellRendererOrTemplate(i)?c=this._getBoxStyle(window.getComputedStyle(h)):(p||(p=this._getBoxStyle(window.getComputedStyle(h))),c=p),g=this._getForcedColumnWidth(s,c),o=0;o<D.length;o++)this._applyForcedColumnWidth(this.getTableBodyCell(o,i,null),g);null!==(_=this.getTableFooterCell(i))&&(m=this._getBoxStyle(window.getComputedStyle(_)),this._applyForcedColumnWidth(_,this._getForcedColumnWidth(s,m)))}else this._forcedWidthColumns[i]=!1,b[i]=null,C[i]=null,S[i]=null;for(i=0;i<T;i++)this._forcedWidthColumns[i]||(null!==(a=this.getTableHeaderColumn(i))&&(l=window.getComputedStyle(a),s=parseFloat(l[n.TableDomUtils.CSS_PROP._WIDTH])||0,b[i]=s,null!==this.component._getColumnRenderer(i,"header")?u=this._getBoxStyle(l):(d||(d=this._getBoxStyle(l)),u=d)),h=this.getTableBodyCell(0,i,null),null!==D&&null!==h&&(this.component._hasRowOrCellRendererOrTemplate(i)?c=this._getBoxStyle(window.getComputedStyle(h)):(p||(p=this._getBoxStyle(window.getComputedStyle(h))),c=p),r=c.paddingWidth>u.paddingWidth?s-c.paddingWidth+u.paddingWidth:s+u.paddingWidth-c.paddingWidth,t&&i===T-1&&(r+=t),C[i]=r),null!==(_=this.getTableFooterCell(i))&&(r=(m=this._getBoxStyle(window.getComputedStyle(_))).paddingWidth>u.paddingWidth?s-m.paddingWidth+u.paddingWidth:s+u.paddingWidth-m.paddingWidth,S[i]=r));for(i=0;i<T;i++)this._forcedWidthColumns[i]?null!==(a=this.getTableHeaderColumn(i))&&this._applyColumnHeaderHeight(a):(null!==(a=this.getTableHeaderColumn(i))&&(a.style[n.TableDomUtils.CSS_PROP._MIN_WIDTH]=b[i]+n.TableDomUtils.CSS_VAL._PX,this._applyColumnHeaderHeight(a)),h=this.getTableBodyCell(0,i,null),null!==D&&null!==h&&(h.style[n.TableDomUtils.CSS_PROP._MIN_WIDTH]=C[i]+n.TableDomUtils.CSS_VAL._PX),null!==(_=this.getTableFooterCell(i))&&(_.style[n.TableDomUtils.CSS_PROP._MIN_WIDTH]=S[i]+n.TableDomUtils.CSS_VAL._PX))},n.TableDomUtils.prototype._setHeaderColumnLastWidth=function(){var e=this.getScrollbarWidth();if(e>0&&this.getScrollbarHeight()<=1){var t=this.component._getColumnDefs().length,i=this.getTableHeaderColumn(t-1),o=0;if(null!=i){for(var s=0;s<t;s++){var r=this.getTableHeaderColumn(s),a=window.getComputedStyle(r);o+=parseInt(a[n.TableDomUtils.CSS_PROP._WIDTH],10)||0}var l=this.getTableHeader(),u=window.getComputedStyle(l);if((parseInt(u[n.TableDomUtils.CSS_PROP._WIDTH],10)||0)>o){var d=window.getComputedStyle(i),h=parseInt(d[n.TableDomUtils.CSS_PROP._WIDTH],10)||0;i.style[n.TableDomUtils.CSS_PROP._MIN_WIDTH]=h+e+n.TableDomUtils.CSS_VAL._PX}}}},n.TableDomUtils.prototype._setHeaderColumnOverflowWidths=function(){for(var e=this.component._getColumnDefs(),t=e.length,i=0;i<t;i++){var o=e[i],s=this.getTableHeaderColumn(i);if(null!=s){var r=s.getElementsByClassName(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CLASS);if(r.length>0){r=r[0];var a=s.querySelectorAll("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_TEXT_CLASS);if(a&&a.length>0){var l=0;if(o.sortable===n.TableDomUtils._OPTION_ENABLED&&(l=s.querySelectorAll("."+n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_SORT_PACEHOLDER_CLASS)[0].clientWidth),r.clientWidth>0&&a[0].clientWidth+l>r.clientWidth){a[0].style[n.TableDomUtils.CSS_PROP._WIDTH]="";var u=a[0].clientWidth,d=s.clientWidth-l;u>d+1&&(a[0].style[n.TableDomUtils.CSS_PROP._WIDTH]=d+n.TableDomUtils.CSS_VAL._PX)}}}}}},n.TableDomUtils.CSS_CLASSES={_CHECKBOX_ACC_SELECT_COLUMN_CLASS:"oj-table-checkbox-acc-select-column",_CHECKBOX_ACC_SELECT_ROW_CLASS:"oj-table-checkbox-acc-select-row",_TABLE_CONTAINER_CLASS:"oj-table-container",_TABLE_SCROLLER_CLASS:"oj-table-scroller",_TABLE_CLASS:"oj-table",_TABLE_COMPACT_CLASS:"oj-table-grid-display",_TABLE_EDIT_CLASS:"oj-table-editable",_TABLE_SCROLL_CLASS:"oj-table-scroll",_TABLE_SCROLL_VERTICAL_CLASS:"oj-table-scroll-vertical",_TABLE_SCROLL_HORIZONTAL_CLASS:"oj-table-scroll-horizontal",_TABLE_ELEMENT_CLASS:"oj-table-element",_TABLE_FOOTER_CLASS:"oj-table-footer",_TABLE_FOOTER_ROW_CLASS:"oj-table-footer-row",_TABLE_HEADER_CLASS:"oj-table-header",_TABLE_HEADER_ROW_CLASS:"oj-table-header-row",_TABLE_BOTTOM_SLOT_CLASS:"oj-table-slot-bottom",_COLUMN_HEADER_CELL_CLASS:"oj-table-column-header-cell",_COLUMN_HEADER_DROP_EMPTY_CELL_CLASS:"oj-table-column-header-drop-empty-cell",_COLUMN_HEADER_ACC_SELECT_COLUMN_CLASS:"oj-table-column-header-acc-select-column",_COLUMN_HEADER_ACC_SELECT_ROW_CLASS:"oj-table-column-header-acc-select-row",_COLUMN_HEADER_ACC_SELECT_ROW_TEXT_CLASS:"oj-table-column-header-acc-select-row-text",_COLUMN_HEADER_CLASS:"oj-table-column-header",_COLUMN_HEADER_TEXT_CLASS:"oj-table-column-header-text",_COLUMN_HEADER_ASC_CLASS:"oj-table-column-header-asc",_COLUMN_HEADER_DSC_CLASS:"oj-table-column-header-dsc",_COLUMN_HEADER_SORT_PACEHOLDER_CLASS:"oj-table-column-header-sort-placeholder",_COLUMN_HEADER_ACC_ASC_LINK_CLASS:"oj-table-column-header-acc-asc-link",_COLUMN_HEADER_ACC_DSC_LINK_CLASS:"oj-table-column-header-acc-dsc-link",_COLUMN_HEADER_ASC_LINK_CLASS:"oj-table-column-header-asc-link",_COLUMN_HEADER_DSC_LINK_CLASS:"oj-table-column-header-dsc-link",_COLUMN_HEADER_ASC_ICON_CLASS:"oj-table-column-header-asc-icon",_COLUMN_HEADER_DSC_ICON_CLASS:"oj-table-column-header-dsc-icon",_COLUMN_HEADER_DRAG_INDICATOR_BEFORE_CLASS:"oj-table-column-header-drag-indicator-before",_COLUMN_HEADER_DRAG_INDICATOR_AFTER_CLASS:"oj-table-column-header-drag-indicator-after",_COLUMN_HEADER_DRAG_IMAGE:"oj-table-column-header-cell-drag-image",_COLUMN_HEADER_RESIZE_INDICATOR_CLASS:"oj-table-column-header-resize-indicator",_TABLE_BODY_CLASS:"oj-table-body",_TABLE_DATA_ROW_CLASS:"oj-table-body-row",_TABLE_DATA_ROW_DRAG_INDICATOR_BEFORE_CLASS:"oj-table-body-row-drag-indicator-before",_TABLE_DATA_ROW_DRAG_INDICATOR_AFTER_CLASS:"oj-table-body-row-drag-indicator-after",_TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOP_CLASS:"oj-table-body-row-touch-selection-affordance-top",_TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_BOTTOM_CLASS:"oj-table-body-row-touch-selection-affordance-bottom",_TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOP_ICON_CLASS:"oj-table-body-row-touch-selection-affordance-top-icon",_TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_BOTTOM_ICON_CLASS:"oj-table-body-row-touch-selection-affordance-bottom-icon",_TABLE_DATA_ROW_TOUCH_SELECTIOM_AFFORDANCE_TOUCH_AREA_CLASS:"oj-table-body-row-touch-selection-affordance-touch-area",_TABLE_DATA_ROW_EDIT_CLASS:"oj-table-body-row-edit",_TABLE_DATA_CURRENT_ROW_CLASS:"oj-table-body-current-row",_TABLE_DATA_CELL_CLASS:"oj-table-data-cell",_TABLE_DATA_CELL_ACC_SELECT_CLASS:"oj-table-data-cell-acc-select",_TABLE_DATA_CELL_EDIT_CLASS:"oj-table-data-cell-edit",_TABLE_DATE_CELL_FORM_CONTROL_CLASS:"oj-form-control-inherit",_TABLE_VGRID_LINES_CLASS:"oj-table-vgrid-lines",_TABLE_HGRID_LINES_CLASS:"oj-table-hgrid-lines",_TABLE_FOOTER_CELL_CLASS:"oj-table-footer-cell",_TABLE_FOOTER_DROP_EMPTY_CELL_CLASS:"oj-table-footer-drop-empty-cell",_TABLE_INLINE_MESSAGE_CLASS:"oj-table-inline-message",_TABLE_STATUS_ACC_NOTIFICATION_CLASS:"oj-table-status-acc-notification",_TABLE_STATUS_MESSAGE_CLASS:"oj-table-status-message",_TABLE_STATUS_MESSAGE_TEXT_CLASS:"oj-table-status-message-text",_TABLE_LOADING_ICON_CLASS:"oj-table-loading-icon",_TABLE_BODY_MESSAGE_CLASS:"oj-table-body-message",_TABLE_BODY_MESSAGE_ROW_CLASS:"oj-table-body-message-row",_ICON_CLASS:"oj-icon",_WIDGET_ICON_CLASS:"oj-component-icon",_HIDDEN_CONTENT_ACC_CLASS:"oj-helper-hidden-accessible"},n.TableDomUtils.CSS_PROP={_DISPLAY:"display",_VISIBILITY:"visibility",_POSITION:"position",_HEIGHT:"height",_WIDTH:"width",_TOP:"top",_BOTTOM:"bottom",_LEFT:"left",_RIGHT:"right",_PADDING_TOP:"padding-top",_PADDING_LEFT:"padding-left",_PADDING_RIGHT:"padding-right",_OVERFLOW:"overflow",_OVERFLOW_X:"overflow-x",_OVERFLOW_Y:"overflow-y",_MIN_WIDTH:"min-width",_MAX_WIDTH:"max-width",_MIN_HEIGHT:"min-height",_FLOAT:"float",_BORDER_TOP:"border-top",_BORDER_BOTTOM_WIDTH:"border-bottom-width",_BORDER_LEFT_WIDTH:"border-left-width",_BORDER_RIGHT_WIDTH:"border-right-width",_MARGIN_BOTTOM:"margin-bottom",_VERTICAL_ALIGN:"vertical-align",_CURSOR:"cursor",_ZINDEX:"z-index",_BACKGROUND_COLOR:"background-color",_BOX_SIZING:"box-sizing"},n.TableDomUtils.CSS_VAL={_NONE:"none",_BLOCK:"block",_INLINE_BLOCK:"inline-block",_RELATIVE:"relative",_ABSOLUTE:"absolute",_INLINE:"inline",_AUTO:"auto",_HIDDEN:"hidden",_VISIBLE:"visible",_LEFT:"left",_PX:"px",_MIDDLE:"middle",_MOVE:"move",_FIXED:"fixed",_TRANSPARENT:"transparent",_BORDER_BOX:"border-box"},n.TableDomUtils.DOM_ATTR={_STYLE:"style",_TABINDEX:"tabindex",_TYPE:"type",_ID:"id",_TITLE:"title",_HREF:"href",_HEADERS:"headers",_COLSPAN:"colspan",_ROLE:"role",_ARIA_LABEL:"aria-label",_ARIA_HIDDEN:"aria-hidden"},n.TableDomUtils.DOM_ELEMENT={_DIV:"div",_A:"a",_TR:"tr",_TD:"td",_TH:"th",_TABLE:"table",_TBODY:"tbody",_THEAD:"thead",_TFOOT:"tfoot",_INPUT:"input",_UL:"ul",_SPAN:"span",_BUTTON:"button",_LABEL:"label"},n.TableDomUtils.MARKER_STYLE_CLASSES={_WIDGET:"oj-component",_ACTIVE:"oj-active",_CLICKABLE_ICON:"oj-clickable-icon-nocontext",_DISABLED:"oj-disabled",_ENABLED:"oj-enabled",_FOCUS:"oj-focus",_FOCUS_HIGHLIGHT:"oj-focus-highlight",_HOVER:"oj-hover",_SELECTED:"oj-selected",_WARNING:"oj-warning",_DRAGGABLE:"oj-draggable",_DRAG:"oj-drag",_HIDE_VERTICAL_SCROLLBAR:"oj-table-hide-vertical-scrollbar"},n.TableDomUtils._COLUMN_HEADER_ROW_SELECT_ID="_hdrColRowSel",n.TableDomUtils._OPTION_AUTO="auto",n.TableDomUtils._OPTION_ENABLED="enabled",n.TableDomUtils._OPTION_DISABLED="disabled",n.TableDomUtils._OPTION_SELECTION_MODES={_SINGLE:"single",_MULTIPLE:"multiple"},n.TableDomUtils._OPTION_DISPLAY={_LIST:"list",_GRID:"grid"},n.TableRendererUtils={},n.TableRendererUtils.columnHeaderDefaultRenderer=function(e,t,i,o){var s=t.headerContext.parentElement,r=document.createElement(n.TableDomUtils.DOM_ELEMENT._DIV);r.classList.add(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CLASS),$(s).empty(),s.appendChild(r);var a=document.createElement(n.TableDomUtils.DOM_ELEMENT._DIV);a.classList.add(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_TEXT_CLASS),r.insertBefore(a,r.firstChild),null!=o?o($(a)):this.columnHeaderDefaultTextRenderer(e,a,t)},n.TableRendererUtils.columnHeaderSortableIconRenderer=function(e,t,i,o){var s=t.columnIndex,r=e._getColumnDefs()[s],a=t.headerContext.parentElement,l=document.createElement(n.TableDomUtils.DOM_ELEMENT._DIV);l.classList.add(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_CLASS),$(a).empty(),a.appendChild(l),"rtl"===e._GetReadingDirection()?l.style[n.TableDomUtils.CSS_PROP._PADDING_LEFT]="0px":l.style[n.TableDomUtils.CSS_PROP._PADDING_RIGHT]="0px";var u=document.createElement(n.TableDomUtils.DOM_ELEMENT._DIV);u.classList.add(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_CLASS),l.appendChild(u);var d,h,c=document.createElement(n.TableDomUtils.DOM_ELEMENT._A);c.setAttribute(n.TableDomUtils.DOM_ATTR._ARIA_HIDDEN,"true"),c.classList.add(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_LINK_CLASS),c.classList.add(n.TableDomUtils.CSS_CLASSES._WIDGET_ICON_CLASS),c.classList.add(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ASC_ICON_CLASS),c.classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED),c.classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._CLICKABLE_ICON),e._AddHoverable($(c)),u.appendChild(c),void 0!==n.TableRendererUtils._headerColumnAscWidth?(d=n.TableRendererUtils._headerColumnAscWidth,h=n.TableRendererUtils._headerColumnAscHeight):(d=$(u).width(),h=$(u).height(),d>0&&h>0&&(n.TableRendererUtils._headerColumnAscWidth=d,n.TableRendererUtils._headerColumnAscHeight=h));var p=document.createElement(n.TableDomUtils.DOM_ELEMENT._A);p.setAttribute(n.TableDomUtils.DOM_ATTR._TABINDEX,"0"),p.setAttribute(n.TableDomUtils.DOM_ATTR._HREF,"#"),p.classList.add(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ACC_ASC_LINK_CLASS),p.classList.add(n.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),p.setAttribute(n.TableDomUtils.DOM_ATTR._ARIA_LABEL,e.getTranslatedString("labelSortAsc")+" "+r.headerText),u.appendChild(p);var _=document.createElement(n.TableDomUtils.DOM_ELEMENT._DIV);_.classList.add(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_SORT_PACEHOLDER_CLASS),_.style[n.TableDomUtils.CSS_PROP._DISPLAY]=n.TableDomUtils.CSS_VAL._INLINE_BLOCK,_.style[n.TableDomUtils.CSS_PROP._VERTICAL_ALIGN]=n.TableDomUtils.CSS_VAL._MIDDLE,_.style[n.TableDomUtils.CSS_PROP._WIDTH]=d+n.TableDomUtils.CSS_VAL._PX,_.style[n.TableDomUtils.CSS_PROP._HEIGHT]=h+n.TableDomUtils.CSS_VAL._PX,l.appendChild(_);var m=document.createElement(n.TableDomUtils.DOM_ELEMENT._DIV);m.classList.add(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_CLASS),m.classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED),l.appendChild(m);var g=document.createElement(n.TableDomUtils.DOM_ELEMENT._A);g.setAttribute(n.TableDomUtils.DOM_ATTR._ARIA_HIDDEN,"true"),g.classList.add(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_LINK_CLASS),g.classList.add(n.TableDomUtils.CSS_CLASSES._WIDGET_ICON_CLASS),g.classList.add(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_DSC_ICON_CLASS),g.classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._DISABLED),g.classList.add(n.TableDomUtils.MARKER_STYLE_CLASSES._CLICKABLE_ICON),e._AddHoverable($(g)),m.appendChild(g);var f=document.createElement(n.TableDomUtils.DOM_ELEMENT._A);f.setAttribute(n.TableDomUtils.DOM_ATTR._TABINDEX,"0"),f.setAttribute(n.TableDomUtils.DOM_ATTR._HREF,"#"),f.classList.add(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_ACC_DSC_LINK_CLASS),f.classList.add(n.TableDomUtils.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),f.setAttribute(n.TableDomUtils.DOM_ATTR._ARIA_LABEL,e.getTranslatedString("labelSortDsc")+" "+r.headerText),m.appendChild(f);var v=document.createElement(n.TableDomUtils.DOM_ELEMENT._DIV);v.classList.add(n.TableDomUtils.CSS_CLASSES._COLUMN_HEADER_TEXT_CLASS),l.insertBefore(v,l.firstChild),null!=o?o($(v)):this.columnHeaderDefaultTextRenderer(e,v,t)},n.TableRendererUtils.columnHeaderDefaultTextRenderer=function(e,t,i){var n=i.columnIndex,o=e._getColumnDefs()[n],s=null==o.headerText?"":o.headerText;t.appendChild(document.createTextNode(s))},n.TableRendererUtils.tableBodyRowDefaultRenderer=function(e,t,i,n){var o=n.rowContext.parentElement,s=e._getTableDomUtils().hashCode(i.key),r=e._getColumnDefs();e._getTableDomUtils().setTableBodyRowAttributes(i,o);for(var a=r.length,l=0;l<a;l++)this.tableBodyCellDefaultRenderer(e,t,l,i,s,n)},n.TableRendererUtils.tableBodyCellDefaultRenderer=function(e,t,i,o,s,r){var a=r.rowContext.parentElement,l=e._getColumnDefs()[i],u=e._getTableDomUtils().createTableBodyCell(t,i);e._getTableDomUtils().styleTableBodyCell(i,u,!0),e._getTableDomUtils().insertTableBodyCell(t,o.key,s,i,u,a,!0);var d=null;null!=l.field&&(d=n.TableRendererUtils._getObjectPath(o.data,l.field));var h=e._getColumnRenderer(i,"cell"),c=e._getSlotTemplate(l.template);if(h||c){var p=this.getRendererContextObject(e,u,{row:o}),_={cellContext:p,columnIndex:i,data:d,row:o.data,componentElement:p.componentElement,parentElement:p.parentElement};if(h){var m=h(_);null!=m?$(u).append(m):(u=$(a).children(":not(."+n.TableDomUtils.CSS_CLASSES._TABLE_DATA_CELL_ACC_SELECT_CLASS+")")[i],e._getTableDomUtils().setTableBodyCellAttributes(t,o.key,s,i,u),e._getTableDomUtils().styleTableBodyCell(i,u,!1))}else{var g=e._getRootElement(),f=e._getTemplateEngine();if(null!=f){var v=n.TableRendererUtils.getCellSlotTemplateContextObject(e,_),y=f.execute(g,c,v,e.options.as);y instanceof Array||(y=[y]),y.map(function(e){u.appendChild(e)}),e._hasCellTemplate=!0}}}else{var b=null==(d=n.TableRendererUtils._getVal(d))?"":d;u.appendChild(document.createTextNode(b))}},n.TableRendererUtils.getRendererContextObject=function(e,t,i){var o={};o.component=w.__GetWidgetConstructor(e.element,"ojTable");var s=e.options.data;if(n.PagingTableDataSource&&s instanceof n.PagingTableDataSource&&(s=s.getWrappedDataSource()),o.datasource=s,o.parentElement=t,null!=i.row){var r=i.row,a=r.key;if(o.status=this.getRendererStatusObject(e,r),e._hasEditableRow()){var l=e._getEditableRowKey();n.Object.compareValues(a,l)?o.mode="edit":o.mode="navigation"}else o.mode="navigation";this._copyMetadata(o,r,s)}return e._FixRendererContext(o)},n.TableRendererUtils.getRendererStatusObject=function(e,t){return{rowIndex:t.index,rowKey:t.key,currentRow:$.extend({},e._getCurrentRow())}},n.TableRendererUtils.getCellSlotTemplateContextObject=function(e,t){var i=this.getSlotTemplateContextObject(e),n=t.cellContext.status.rowIndex,o=t.cellContext.status.rowKey,s=t.columnIndex;return i[e._CONST_DATA]=t.data,i.row=t.row,i[e._CONST_INDEX]=n,i.columnIndex=s,i.mode=t.cellContext.mode,i[e._CONST_KEY]=o,i},n.TableRendererUtils.getHeaderSlotTemplateContextObject=function(e,t,i){var n=this.getSlotTemplateContextObject(e);return n[e._CONST_DATA]=t,n.columnIndex=i,n},n.TableRendererUtils.getSlotTemplateContextObject=function(e){return{componentElement:e._getRootElement()}},n.TableRendererUtils._copyMetadata=function(e,t,i){if(n.FlattenedTreeTableDataSource&&i instanceof n.FlattenedTreeTableDataSource){var o=t.metadata;null==o&&(o=i._getMetadata(t.index));for(var s=Object.keys(o),r=0;r<s.length;r++){var a=s[r];e[a]=o[a]}}},n.TableRendererUtils._getObjectPath=function(e,t){if(null!=e&&("string"==typeof t||t instanceof String)&&(-1!==t.indexOf(".")||-1!==t.indexOf("[")&&-1!==t.indexOf("]"))){var i=e,n=!1;if(t.split(".").map(function(e){if(null!=i&&-1!==e.indexOf("[")&&-1!==e.indexOf("]")){var t=e.substr(0,e.indexOf("[")),o=parseInt(e.substr(e.indexOf("[")+1,e.indexOf("]")-e.indexOf("[")-1),10);i=i[t][o],n=!0}else null!==i&&void 0!==i[e]&&(i=i[e],n=!0)}),n)return i}else if(null==e)return null;return e[t]},n.TableRendererUtils._getVal=function(e){return"function"==typeof e?e():e},n.TableResizeUtils=function(e){this.component=e,this.options=e.options,this.Init()},n.Object.createSubclass(n.TableResizeUtils,n.Object,"oj.TableResizeUtils"),n.TableResizeUtils.prototype.Init=function(){n.TableResizeUtils.superclass.Init.call(this)},n.TableResizeUtils.prototype.setResizeCursor=function(e){var t=this.component._getEventTargetElement(e),i=this.component._getTableDomUtils().getElementColumnIdx(t);if(null==i)return!1;if(this.component._getColumnDefs()[i].resizable===this.component._OPTION_DISABLED&&this._resizeStartColumnIdx!==i-1&&this._resizeStartColumnIdx!==i+1)return!1;if(null==this._resizeStartColumnIdx)return null!==this._isHeaderColumnResizeStart(e)?(t.style.cursor="col-resize",!0):(t.style.cursor="",!1);var n=this.component._getTableDomUtils().getTableHeaderColumns();if(!n)return!1;var o=n.length;if(i===this._resizeStartColumnIdx||this._resizeColumnStart&&i===this._resizeStartColumnIdx-1||!this._resizeColumnStart&&i===this._resizeStartColumnIdx+1){if(0===this._resizeStartColumnIdx&&this._resizeColumnStart)return!1;if(this._resizeStartColumnIdx===o-1&&!this._resizeColumnStart)return!1;var s=this.component._getTableDomUtils().getTableHeaderColumnResizeIndicator();if(null!=s){if("rtl"===this.component._GetReadingDirection()){var r=e.target.getBoundingClientRect();this._resizeColumnStart?s.style.left=this._getPageX(e)-r.left+r.width+"px":s.style.left=this._getPageX(e)-r.left+"px"}else s.style.left=this._getPageX(e)+"px";return!0}}return!1},n.TableResizeUtils.prototype.handleHeaderColumnResizeStart=function(e){var t=this.component._getEventTargetElement(e),i=this.component._getTableDomUtils().getElementColumnIdx(t);if(null!=i){var n=this.component._getColumnDefs()[i];if(this._resizeColumnStart=this._isHeaderColumnResizeStart(e),n.resizable===this.component._OPTION_ENABLED&&null!==this._resizeColumnStart)return this._resizeStartColumnIdx=i,this._resizeStartPageX=this._getPageX(e),this._setTableHeaderColumnsResizeStyling(),this._setTableHeaderColumnResizeIndicator(i),!0}return this._resizeStartColumnIdx=null,this._resizeStartPageX=null,!1},n.TableResizeUtils.prototype.handleHeaderColumnResizeEnd=function(e){var t=this.component._getEventTargetElement(e),i=this.component._getTableDomUtils().getElementColumnIdx(t);if(null!==i&&i===this._resizeStartColumnIdx||this._resizeColumnStart&&i===this._resizeStartColumnIdx-1||!this._resizeColumnStart&&i===this._resizeStartColumnIdx+1){var n=this.component._getTableDomUtils().getTableHeaderColumn(this._resizeStartColumnIdx);if(null!=n){var o,s=n.getBoundingClientRect().width;if(o=this._resizeColumnStart?this._resizeStartPageX-this._getPageX(e):this._getPageX(e)-this._resizeStartPageX,Math.abs(o)>2){for(var r=s+o,a=[],l=this.options.columns.length,u=0;u<l;u++)a[u]=$.extend({},{},this.options.columns[u]);if(a[this._resizeStartColumnIdx].width=r,this._resizeColumnStart){var d=this._resizeStartColumnIdx-1,h=this.component._getTableDomUtils().getTableHeaderColumn(d);if(h){var c=h.getBoundingClientRect().width;a[d].width=c-o}}return this.component.option("columns",a,{_context:{writeback:!0,internalSet:!0}}),this.component._clearCachedMetadata(),this.component._refresh(),this.clearTableHeaderColumnsResize(),!0}}}return this.clearTableHeaderColumnsResize(),!1},n.TableResizeUtils.prototype.clearTableHeaderColumnsResize=function(){this._resizeStartColumnIdx=null,this._resizeColumnStart=null,this._resizeStartPageX=null,this._clearTableHeaderColumnsResizeStyling(),this.component._getTableDomUtils().removeTableHeaderColumnResizeIndicator()},n.TableResizeUtils.prototype._getPageX=function(e){return void 0!==e.pageX?e.pageX:void 0!==e.changedTouches?e.changedTouches[0].pageX:0},n.TableResizeUtils.prototype._isHeaderColumnResizeStart=function(e){var t=null,i=this.component._getTableDomUtils().getElementColumnIdx(e.target),o=this.component._getTableDomUtils().getTableHeaderColumn(i);if(null!=o){var s=o.getBoundingClientRect(),r=Math.abs(this._getPageX(e)-s.left),a=Math.abs(this._getPageX(e)-s.right);r<=n.TableResizeUtils.RESIZE_OFFSET?t="rtl"!==this.component._GetReadingDirection():a<=n.TableResizeUtils.RESIZE_OFFSET&&(t="rtl"===this.component._GetReadingDirection())}return t},n.TableResizeUtils.prototype._setTableHeaderColumnResizeIndicator=function(e){var t=this.component._getTableDomUtils().getTableHeaderColumnResizeIndicator();null==t&&(t=this.component._getTableDomUtils().createTableHeaderColumnResizeIndicator());var i=this.component._getTableDomUtils().getTable().getBoundingClientRect(),n=this.component._getTableDomUtils().getTableHeaderColumn(e).getBoundingClientRect(),o=t.getBoundingClientRect();t.style.height=i.height+"px",this._resizeColumnStart?("rtl"===this.component._GetReadingDirection()?t.style.left=n.left-o.left+n.width+"px":t.style.left=-1*o.left+n.left+"px",t.style.borderLeftWidth="2px",t.style.borderRightWidth="0"):("rtl"===this.component._GetReadingDirection()?t.style.left=n.left-o.left+"px":t.style.left=-1*o.left+n.left+n.width+"px",t.style.borderRightWidth="2px",t.style.borderLeftWidth="0")},n.TableResizeUtils.prototype._setTableHeaderColumnsResizeStyling=function(){this.component._getTableDomUtils().getTable().classList.add(n.TableResizeUtils.CSS_CLASSES._COLUMN_HEADER_RESIZING_CLASS)},n.TableResizeUtils.prototype._clearTableHeaderColumnsResizeStyling=function(){var e,t=this.component._getTableDomUtils().getTableHeaderColumns();if(t)for(e=0;e<t.length;e++)t[e].style.cursor="";this.component._getTableDomUtils().getTable().classList.remove(n.TableResizeUtils.CSS_CLASSES._COLUMN_HEADER_RESIZING_CLASS)},n.TableResizeUtils.RESIZE_OFFSET=10,n.TableResizeUtils.CSS_CLASSES={_COLUMN_HEADER_RESIZING_CLASS:"oj-table-column-header-resizing"},Xt.extension._WIDGET_NAME="ojTable",Xt.extension._GLOBAL_TRANSFER_ATTRS=["aria-label"],Xt.extension._INNER_ELEM="table",n.CustomElementBridge.register("oj-table",{metadata:Xt}),n.AttributeGroupHandler=E.AttributeGroupHandler,n.ColorAttributeGroupHandler=E.ColorAttributeGroupHandler,n.ShapeAttributeGroupHandler=E.ShapeAttributeGroupHandler;var Zt={_SHAPE_REGEXP:/\d/,_SHAPE_ENUMS:{circle:!0,ellipse:!0,square:!0,rectangle:!0,diamond:!0,triangleUp:!0,triangleDown:!0,plus:!0,human:!0,star:!0},shapeParseFunction:function(e,t){var i=t||Zt._SHAPE_ENUMS;return function(t,n,o,s){if(e[n]){if(Zt._SHAPE_REGEXP.test(t))return t;if(i[t])return t;throw new Error("Found: '"+t+"'. Expected one of the following: "+Object.keys(i).toString())}return s(t)}}},Jt=function(e,t){this._path=t,this._root=e,this._delimiter="/"};Jt.prototype._resolveLeafObjectAndProperty=function(e,t,i,n){for(var o={};e&&t.indexOf(i)>-1;){var s=t.substring(0,t.indexOf(i));n&&void 0===e[s]&&(e[s]={}),e=e[s],t=t.substring(t.indexOf(i)+1,t.length)}return e&&(o.object=e,o.parameter=t),o},Jt.prototype._resolvePath=function(e){if(void 0===this._leaf){var t=this._resolveLeafObjectAndProperty(this._root,this._path,this._delimiter,e);this._leaf=t.object,this._param=t.parameter}},Jt.prototype.getValue=function(){return this._resolvePath(!1),void 0===this._leaf?void 0:this._leaf[this._param]},Jt.prototype.setValue=function(e,t){this._resolvePath(!0),!t&&this._leaf[this._param]||(this._leaf[this._param]=e)};var Qt={TEXT:function(e){var t={};return e&&(e.hasClass("oj-gauge-metric-label")?(t["font-size"]=!0,t.color=!0):e.hasClass("oj-treemap-node-header")&&(t["font-weight"]=!0)),Qt._buildTextCssPropertiesObject(e,t)},BACKGROUND:function(e,t,i,n){return Qt._buildCssBackgroundPropertiesObject(e)},ANIM_DUR:function(e){var t=e.css("animation-duration");if(t)return"ms"===t.slice(-2)?t=parseInt(t.slice(0,-2),10):"s"===t.slice(-1)&&(t=1e3*parseFloat(t.slice(0,-1))),t},_INHERITED_FONT_COLOR:"rgb(254, 0, 254)",_INHERITED_FONT_FAMILY:"Times",_INHERITED_FONT_SIZE:"1px",_INHERITED_FONT_WEIGHT:"1",_INHERITED_FONT_STYLE:"normal",_FONT_SIZE_BUFFER:4,_styleCache:{},defaultStyleProcessor:function(e,t){return e.css(t)},_buildCssBackgroundPropertiesObject:function(e){var t={};return e.css("border-top-color")&&(t.borderColor=e.css("border-top-color")),e.css("border-width")&&e.css("border-style")&&"none"!==e.css("border-style")&&(t.borderWidth=e.css("border-width")),e.css("background-color")&&(t.backgroundColor=e.css("background-color")),t},_buildTextCssPropertiesObject:function(e,t){var i={},n=e.css("font-family");return n&&n!==Qt._INHERITED_FONT_FAMILY&&(i.fontFamily=n.replace(/"/g,"'")),!(n=e.css("font-size"))||n.indexOf("px")>-1&&parseFloat(n)<Qt._FONT_SIZE_BUFFER||t["font-size"]||(i.fontSize=n),(n=e.css("font-weight"))&&n!==Qt._INHERITED_FONT_WEIGHT&&!t["font-weight"]&&(i.fontWeight=n),(n=e.css("color"))&&n!==Qt._INHERITED_FONT_COLOR&&!t.color&&(i.color=n),(n=e.css("font-style"))&&n!==Qt._INHERITED_FONT_STYLE&&(i.fontStyle=n),i},processStyles:function(e,t,i,n){var o,s=null,r=null,a="";for(o=0;o<i.length;o++)a=a+i[o]+" ";var l,u={},d={},h=Object.keys(n);for(o=0;o<h.length;o++){var c=n[l=h[o]];c instanceof Array||(c=[c]);var p=Qt._hasUncachedProperty(l,c);r||s||!p||((s=$(document.createElement("div"))).attr("style","display:none;"),e.append(s),s.attr("class",a),$(document.body).append(s),(r=$(document.createElement("div"))).css("font-size",Qt._INHERITED_FONT_SIZE),r.css("color",Qt._INHERITED_FONT_COLOR),r.css("font-weight",Qt._INHERITED_FONT_WEIGHT),r.css("font-style",Qt._INHERITED_FONT_STYLE),s.append(r)),u[l]=c,p&&(d[l]=Qt._createStyleDivs(r,l,c))}var _=E.ColorAttributeGroupHandler.__createAttrDiv();for(o=0;o<h.length;o++)l=h[o],Qt._processStyle(d[l],t,l,u[l]);_&&(E.ColorAttributeGroupHandler.__processAttrDiv(_),_.remove()),s&&s.remove()},_createStyleDivs:function(e,t,i){Qt._styleCache[t]||(Qt._styleCache[t]={});for(var n=null,o=0;o<i.length;o++){var s=i[o].property;if(s)void 0===Qt._styleCache[t][s]&&(n||((n=$(document.createElement("div"))).addClass(t),e.append(n)))}return n},_processStyle:function(e,t,i,n){for(var o=0;o<n.length;o++){var s=n[o],r=s.property;if(r){var a=Qt._styleCache[i][r];if(void 0===a&&e&&(a=Qt._resolveStyle(e,r),Qt._styleCache[i][r]=a),null!=a){var l=new Jt(t,s.path),u=l.getValue(),d="object"==typeof u;if(d&&u)for(var h=Object.keys(a),c=0;c<h.length;c++){var p=h[c];void 0===u[p]&&(u[p]=a[p])}else l.setValue(a,d)}}}},_resolveStyle:function(e,t){var i=Qt[t],n=i?i(e):Qt.defaultStyleProcessor(e,t);return null==n||"string"==typeof n&&""===n.replace(/^\s+/g,"")?null:n},_hasUncachedProperty:function(e,t){var i=Qt._styleCache[e];if(!i)return!0;for(var n=0;n<t.length;n++){var o=t[n].property;if(o)if(void 0===i[o])return!0}return!1}};n.__registerWidget("oj.dvtBaseComponent",$.oj.baseComponent,{options:{trackResize:"on"},_ComponentCreate:function(){this._super(),this._renderCount=0,this._numDeferredObjs=0,this._optionsCopy=null,this._templateMap={},this._dataProviderState={},this._treeKeyDataMap={},this._dpNodeContextData={},this._dpNodeValueData={},this._dataValuePromise={};for(var e=this._GetComponentStyleClasses(),t=0;t<e.length;t++)this.element.addClass(e[t]);this._referenceDiv=$(document.createElement("div")),this._referenceDiv.attr("style","visibility:hidden;"),this.element.append(this._referenceDiv);var i=this.element[0].parentElement;i&&i._dvtcontext?this._context=i._dvtcontext:this._context=new dvt.Context(this.element[0],null,this._referenceDiv[0]),this._context.oj=n,this._context.KeySetImpl=y,this._context.ojMap=Cn,this._context.dataProviderProps=Object.keys(this._GetSimpleDataProviderConfigs()),this._context.setReadingDirection(this._GetReadingDirection()),this._context.setTooltipAttachedCallback(w.subtreeAttached),this._context.setOverlayAttachedCallback(w.subtreeAttached),this._context.setTooltipStyleClass("oj-dvt-tooltip"),this._context.setDatatipStyleClass("oj-dvt-datatip"),this._context.setFixContextCallback(this._FixRendererContext.bind(this)),this._context.setCustomElement(this._IsCustomElement()),$(document.body).hasClass("oj-hicontrast")&&dvt.Agent.setHighContrast(!0),this._component=this._CreateDvtComponent(this._context,this._HandleEvent,this),this._context.getStage().addChild(this._component),!1!==dvt.requireJS&&(this._setLocaleHelpers(),this._processTranslations()),this._LoadResources(),this._dataProviderEventListeners=[],this.options._environment="jet",this.options._widgetConstructor=w.__GetWidgetConstructor(this.element)},_AfterCreate:function(){this._super(),"off"!==this.options.trackResize&&this._addResizeListener(),this._ProcessOptions(),this._Render()},refresh:function(){this._super(),this._context.setReadingDirection(this._GetReadingDirection()),this._processTranslations(),this._Render()},getNodeBySubId:function(e){var t=this._component&&this._component.getAutomation?this._component.getAutomation():null;if(t){var i=this._ConvertLocatorToSubId(e);return t.getDomElementForSubId(i)}return null},getSubIdByNode:function(e){var t=this._component&&this._component.getAutomation?this._component.getAutomation():null;if(t){var i=t.getSubIdForDomElement(e);return i?this._ConvertSubIdToLocator(i):null}return null},_ConvertLocatorToSubId:function(e){return null},_ConvertSubIdToLocator:function(e){return null},_ProcessStyles:function(){Qt.processStyles(this.element,this.options,this._GetComponentStyleClasses(),this._GetChildStyleClasses())},_GetComponentStyleClasses:function(){return["oj-dvtbase"]},_GetChildStyleClasses:function(){var e={"oj-dvt-no-data-message":{path:"_statusMessageStyle",property:"TEXT"}};return e},_GetEventTypes:function(){return[]},_GetTranslationMap:function(){var e=this.options.translations,t={"DvtUtilBundle.CLEAR_SELECTION":e.labelClearSelection,"DvtUtilBundle.COLON_SEP_LIST":e.labelAndValue,"DvtUtilBundle.INVALID_DATA":e.labelInvalidData,"DvtUtilBundle.NO_DATA":e.labelNoData,"DvtUtilBundle.DATA_VISUALIZATION":e.labelDataVisualization,"DvtUtilBundle.STATE_SELECTED":e.stateSelected,"DvtUtilBundle.STATE_UNSELECTED":e.stateUnselected,"DvtUtilBundle.STATE_MAXIMIZED":e.stateMaximized,"DvtUtilBundle.STATE_MINIMIZED":e.stateMinimized,"DvtUtilBundle.STATE_EXPANDED":e.stateExpanded,"DvtUtilBundle.STATE_COLLAPSED":e.stateCollapsed,"DvtUtilBundle.STATE_ISOLATED":e.stateIsolated,"DvtUtilBundle.STATE_HIDDEN":e.stateHidden,"DvtUtilBundle.STATE_VISIBLE":e.stateVisible,"DvtUtilBundle.SCALING_SUFFIX_THOUSAND":e.labelScalingSuffixThousand,"DvtUtilBundle.SCALING_SUFFIX_MILLION":e.labelScalingSuffixMillion,"DvtUtilBundle.SCALING_SUFFIX_BILLION":e.labelScalingSuffixBillion,"DvtUtilBundle.SCALING_SUFFIX_TRILLION":e.labelScalingSuffixTrillion,"DvtUtilBundle.SCALING_SUFFIX_QUADRILLION":e.labelScalingSuffixQuadrillion},i=bn.getMonthNames("abbreviated");return t["DvtUtilBundle.MONTH_SHORT_JANUARY"]=i[0],t["DvtUtilBundle.MONTH_SHORT_FEBRUARY"]=i[1],t["DvtUtilBundle.MONTH_SHORT_MARCH"]=i[2],t["DvtUtilBundle.MONTH_SHORT_APRIL"]=i[3],t["DvtUtilBundle.MONTH_SHORT_MAY"]=i[4],t["DvtUtilBundle.MONTH_SHORT_JUNE"]=i[5],t["DvtUtilBundle.MONTH_SHORT_JULY"]=i[6],t["DvtUtilBundle.MONTH_SHORT_AUGUST"]=i[7],t["DvtUtilBundle.MONTH_SHORT_SEPTEMBER"]=i[8],t["DvtUtilBundle.MONTH_SHORT_OCTOBER"]=i[9],t["DvtUtilBundle.MONTH_SHORT_NOVEMBER"]=i[10],t["DvtUtilBundle.MONTH_SHORT_DECEMBER"]=i[11],t},_VerifyConnectedForSetup:function(){return!0},_SetupResources:function(){this._super(),this._addDataProviderEventListeners()},_ReleaseResources:function(){this._super(),this._removeDataProviderEventListeners()},_processTranslations:function(){var e=this._GetTranslationMap();dvt.Bundle.addLocalizedStrings(e)},_setLocaleHelpers:function(){var e={};e.numberConverterFactory=le.Validation.getDefaultConverterFactory("number"),e.isoToDateConverter=function(e){if("string"==typeof e){var t=le.IntlConverterUtils.isoToDate(e),i=t.toJSON()?le.IntlConverterUtils.dateToLocalIso(t):e;return le.IntlConverterUtils.isoToLocalDate(i)}return e},e.dateToIsoWithTimeZoneConverter=function(e){if(e instanceof Date){var t=-1*e.getTimezoneOffset(),i=t>=0?"+":"-",n=Math.floor(Math.abs(t)/60),o=Math.abs(t)%60,s=i+(2!==n.toString().length?"0"+n:n)+":"+(2!==o.toString().length?o+"0":o);return le.IntlConverterUtils.dateToLocalIso(e)+s}return e},this._context.setLocaleHelpers(e)},_destroy:function(){this._context.hideTooltips(),this._context.destroy(),this._context=null;var e=this.element[0].parentElement;e&&e._dvtcontext&&(e._dvtcontext=null),this._component.destroy&&this._component.destroy(),this._component=null,this._removeResizeListener(),this._CleanAllTemplates(),this.element.children().remove(),this.element.removeAttr("role").removeAttr("tabIndex").removeAttr("aria-activedescendant");for(var t=this._GetComponentStyleClasses(),i=0;i<t.length;i++)this.element.removeClass(t[i]);this._MakeReady(),this._dataProviderState={},this._treeKeyDataMap={},this._dpNodeContextData={},this._dpNodeValueData={},this._dataValuePromise={},this._super()},_setOptions:function(e,t){this._superApply(arguments),this._OptionChangeHandler(e);var i=this.options.trackResize;if("off"===i&&this._resizeListener?this._removeResizeListener():"off"===i||this._resizeListener||this._addResizeListener(),this._ProcessOptions(),!this._bUserDrivenChange){var n=!1,o=this._GetEventTypes(),s=["highlightedCategories","selection","dataCursorPosition","scrollPosition"];$.each(e,function(e){if(o.indexOf(e)<0&&s.indexOf(e)<0)return n=!0,!1}),n?this._Render():(void 0!==e.highlightedCategories&&this._component.highlight(e.highlightedCategories),void 0!==e.selection&&this._component.select(e.selection),void 0!==e.dataCursorPosition&&this._component.positionDataCursor&&this._component.positionDataCursor(e.dataCursorPosition),void 0!==e.scrollPosition&&this._component.scroll(e.scrollPosition))}},_CreateDvtComponent:function(e,t,i){return null},_HandleEvent:function(e){var t=e.type;"selection"===t?this._UserOptionChange("selection",e.selection):"categoryHide"===t||"categoryShow"===t?this._UserOptionChange("hiddenCategories",e.hiddenCategories):"categoryHighlight"===t?this._UserOptionChange("highlightedCategories",e.categories):"optionChange"===t?this._UserOptionChange(e.key,e.value,e.optionMetadata):"touchHoldRelease"===t&&this._GetContextMenu()?this._OpenContextMenu($.Event(e.nativeEvent),"touch"):"ready"===t&&0===this._numDeferredObjs&&this._MakeReady()},_addResizeListener:function(){this._resizeListener||(this._resizeListener=this._handleResize.bind(this),n.DomUtils.addResizeListener(this.element[0],this._resizeListener,250))},_removeResizeListener:function(){this._resizeListener&&(n.DomUtils.removeResizeListener(this.element[0],this._resizeListener),this._resizeListener=null)},_handleResize:function(e,t){var i=this.element.width(),n=this.element.height();(null==this._width||null==this._height||Math.abs(i-this._width)+Math.abs(n-this._height)>=5)&&this._Render(!0)},_LoadResources:function(){},_Render:function(e){this._context.hideTooltips(),this._NotReady(),!this._context.isReadyToRender()||this._renderNeeded&&e?(this._renderNeeded=!0,this._MakeReady()):(this._width=this._IsFlowingLayoutSupported()?null:this.element.width(),this._height=this._IsFlowingLayoutSupported()?null:this.element.height(),this._context.setDefaultFontFamily(this._referenceDiv.css("font-family")),this.options._width=this._width,this.options._height=this._height,this.options._locale=p.getLocale(),this._IsDraggable()&&this.element.attr("draggable",!0),this._ProcessStyles(),e?0===this._numDeferredObjs&&(this._renderCount+=1,this._RenderComponent(this._optionsCopy,e)):(this._renderCount+=1,this._resolveDeferredDataItems()&&this._RenderComponent(this._optionsCopy)),this._renderNeeded=!1)},_IsDraggable:function(){return!!this.options.dnd},_NotifyShown:function(){this._super(),this._notifyShownAttached()},_NotifyAttached:function(){this._super(),this._notifyShownAttached()},_NotifyDetached:function(){this._super(),this._notifyHiddenDetached()},_NotifyHidden:function(){this._super(),this._notifyHiddenDetached()},_notifyShownAttached:function(){this._renderNeeded&&this._Render()},_notifyHiddenDetached:function(){this._context.hideTooltips(),this._MakeReady()},_UserOptionChange:function(e,t,i){this._bUserDrivenChange=!0,this.option(e,t,{_context:{writeback:!0,optionMetadata:i,internalSet:!0}}),this._bUserDrivenChange=!1},_NotifyContextMenuGesture:function(e,t,i){if("touch"!==i)if("keyboard"===i){var n=this.element[0].getBoundingClientRect(),o=this._component.getKeyboardFocus()?this._component.getKeyboardFocus().getBoundingClientRect():null,s=o?"left+"+(o.left+.5*o.width-n.left)+" top+"+(o.top+.5*o.height-n.top):"center";this._OpenContextMenu(t,i,{position:{at:s}})}else this._super(e,t,i)},_GetDvtComponent:function(e){var t=w.__GetWidgetConstructor(e)("instance");return t?t._component:null},_GetStringFromIndexPath:function(e){for(var t="",i=0;i<e.length;i++)t+="["+e[i]+"]";return t},_GetIndexPath:function(e){for(var t=[],i=0;e.indexOf("[",i)>0;){var n=e.indexOf("[",i)+1,o=e.indexOf("]",i);t.push(Number(e.substring(n,o))),i=o+1}return t},_GetFirstIndex:function(e){return Number(this._GetFirstBracketedString(e))},_GetFirstBracketedString:function(e){var t=e.indexOf("[")+1,i=e.indexOf("]");return e.substring(t,i)},_GetComponentDeferredDataPaths:function(){return{}},_GetComponentNoClonePaths:function(){if(!this._noClonePaths){this._noClonePaths={};var e=this,t=this._GetComponentDeferredDataPaths().root;t&&t.forEach(function(t){e._noClonePaths[t]=!0})}return this._noClonePaths},_resolveDeferredDataItems:function(){this._optionsCopy=dvt.JsonUtils.clone(this.options,null,this._GetComponentNoClonePaths()),this._FixCustomRenderers(this._optionsCopy),this._numDeferredObjs=0;for(var e=this,t=this._GetComponentDeferredDataPaths(),i=Object.keys(t),n=0;n<i.length;n++){var o=i[n];t[o].forEach(function(t){if("root"===o)e._resolveDeferredDataItem.bind(e)(e.options,e._optionsCopy,t);else{var i=e.options[o];if(i&&i instanceof Array)for(var n=0;n<i.length;n++)e._resolveDeferredDataItem.bind(e)(i[n],e._optionsCopy[o][n],t)}})}return 0===this._numDeferredObjs},_resolveDeferredDataItem:function(e,t,i){var o=new Jt(e,i),s=o.getValue(),r=this;if(s instanceof Function?s=Promise.resolve(s(this._GetDataContext(e))):this._IsCustomElement()&&Array.isArray(s)&&(s=Promise.resolve(s),o.setValue(s,!0)),s&&n.DataProviderFeatureChecker.isDataProvider(s)){var a=n.DataProviderFeatureChecker.isTreeDataProvider(s);s=r._dataValuePromise[i]||new Promise(function(e){var t=r._getTemplateEngine(),n=r._dataProviderState[i]||{},o=n.data?Promise.resolve(n.data):r._fetchAllData(s,i);Promise.all([t,o]).then(function(t){var o=t[0],s=t[1];n.data=s,r._dataProviderState[i]=n;var l=n.pathsValuesMap?n.pathsValuesMap:r._ProcessTemplates(i,s,o,a);r._dataValuePromise[i]=null,e(l)},function(){r._dataValuePromise[i]=null})}),r._dataValuePromise[i]=s}if(s instanceof Promise){var l=this._renderCount;s.then(function(e){var n=[i],o=[e];e.paths&&(n=e.paths,o=e.values,r._dataProviderState[i].pathsValuesMap=e),r._renderDeferredData(l,t,n,o)},function(){r._renderDeferredData(l,t,[i],[[]])}),this._numDeferredObjs+=1}},_renderDeferredData:function(e,t,i,n){if(e===this._renderCount){this._numDeferredObjs-=1;for(var o=0;o<i.length;o++)new Jt(t,i[o]).setValue(n[o],!0);0===this._numDeferredObjs&&(this._RenderComponent(this._optionsCopy),this._optionsCopy=null)}},_ClearDataProviderState:function(e){this._dataProviderState[e]={},this._dataValuePromise[e]=null},_OptionChangeHandler:function(e){for(var t=Object.keys(this._dataProviderState),i=0;i<t.length;i++){var n=t[i];Object.prototype.hasOwnProperty.call(e,n)&&this._ClearDataProviderState(n)}},_fetchCollection:function(e,t,i,o,s,r){var a=this,l={data:[],keys:[]};if(r<=-1)return Promise.resolve(l);var u=e.fetchFirst({size:-1})[Symbol.asyncIterator](),d=n.DataProviderFeatureChecker.isTreeDataProvider(e),h=function(e){for(var n=[],r=0;r<e.value.data.length;r++){var c=t({data:e.value.data[r],key:e.value.metadata[r].key},s);n.push(c)}return Promise.all(n).then(function(e){for(var t=0;t<e.length;t++){var n=e[t].data,s=e[t].key;l.data.push(n),l.keys.push(s),a._treeKeyDataMap[i].set(d?s.value:s,{data:n,key:s,parentKey:o})}}).then(function(){return e.done?Promise.resolve(l):u.next().then(h)})};return u.next().then(h)},_getDPPostProcessor:function(e,t,i,o){var s=this,r=n.DataProviderFeatureChecker.isTreeDataProvider(e);o=null==o?Number.MAX_VALUE:o;var a=function(n,r){var l={value:n.data},u={value:n.key};if(r<o&&i&&i.has(u.value)){var d=e.getChildDataProvider(u.value);if(d)return s._fetchCollection(d,a,t,u.value,r+1).then(function(e){return l.children=e.data,u.children=e.keys,{data:l,key:u}})}return Promise.resolve({data:l,key:u})};return r?a:function(e){return Promise.resolve(e)}},_fetchAllData:function(e,t){var i=this._GetSimpleDataProviderConfigs()[t];return this._treeKeyDataMap[t]=this._treeKeyDataMap[t]||new Cn,this._dpNodeContextData[t]=this._dpNodeContextData[t]||new Cn,this._dpNodeValueData[t]=this._dpNodeValueData[t]||new Cn,this._fetchCollection(e,this._getDPPostProcessor(e,t,i.expandedKeySet,i.maxFetchDepth),t,null,0,i.maxFetchDepth)},_getTemplateEngine:function(){return this._templateEnginePromise?this._templateEnginePromise:(this._templateEnginePromise=new Promise(function(e){p.__getTemplateEngine().then(function(t){e(t)},function(e){throw new Error("Error loading template engine: "+e)})}),this._templateEnginePromise)},getTemplates:function(){return n.BaseCustomElementBridge.getSlotMap(this.element[0])},getElementPropertyNames:function(e){var t=n.CustomElementBridge.getMetadata(e).properties,i=Object.keys(t).filter(function(e){return!t[e]._eventListener}),o=new Set;return i.forEach(function(e){o.add(e)}),o},getPropertyValidator:function(e,t){if(!e)return null;var i=n.CustomElementBridge.getMetadata(t),o=e.content?e.content.children[0]:e.childNodes[1],s={};return function(e,t){var r=e.join("."),a=s[r];if(!a){a=i;for(var l=0;l<e.length;l++)a=a.properties[e[l]];s[r]=a}n.BaseCustomElementBridge.checkEnumValues(o,r,t,a),null!=t&&n.BaseCustomElementBridge.checkType(o,r,t,a)}},_ProcessTemplates:function(t,i,n,o,s){var r,a,l=this._GetSimpleDataProviderConfigs()[t],u=this;if(l){r=[],a=[];var d="string"==typeof l.templateName?function(){return l.templateName}:l.templateName,h="string"==typeof l.templateElementName?function(){return l.templateElementName}:l.templateElementName,c=l.resultPath,p=this.options.as,_=this.getTemplates(),m=this.element[0],g=l.getAliasedPropertyNames,f=l.processChildrenData,v=l.processOptionData||function(e){return e},y={},b=u._dpNodeContextData[t];if(d&&h&&c){var C,S={},E=function(t,i,o,s,r,a){var l,d=S[r];d||(d=u.getElementPropertyNames(r),S[r]=d);try{if(s){if(l=n.resolveProperties(m,s[0],r,d,o,p,a),g)for(var h=g(r),c=Object.keys(h),_=0;_<c.length;_++){var f=c[_];l[h[f]]=l[f],l[f]=void 0}}else l={};l.id=i,l._itemData=t}catch(t){e.error(t)}return l},T=function(e,i,n){for(var s=e.data,r=e.keys,a=[],l=0;l<s.length;l++){var p=o?s[l].value:s[l],g=o?r[l].value:r[l],v={data:p,key:g,index:l,componentElement:m};o&&(v.parentData=i,v.parentKey=n),b.set(g,v);var C=d(s[l]),S=h(s[l]),D=_[C],A=y[S];!A&&D&&(A=u.getPropertyValidator(D[0],S),y[S]=A);var I=E(p,g,v,D,S,A);if(s[l].children){var O=i.slice(0);O.push(p);var w={data:s[l].children,keys:r[l].children},R=T(w,O,g);f?f(I,s[l],R):I[c]=R}u._dpNodeValueData[t].set(g,I),a.push(I)}return a};r.push(c),s&&b.has(s)&&(C=b.get(s).parentData.concat(b.get(s).data));var D=T(i,C||[],s);a.push(v(D))}}return{paths:r,values:a}},_GetFetchDataHandler:function(e){var t=this,i=t._GetSimpleDataProviderConfigs()[e].resultPath;return function(n,o,s,r){var a=n.getChildDataProvider(r);if(a){var l=t._GetSimpleDataProviderConfigs()[e].maxFetchDepth,u=t._dpNodeContextData[e].get(r).parentData.length,d=t._getDPPostProcessor(n,e,o,l),h=t._fetchCollection(a,d,e,r,u,l),c=t._getTemplateEngine();return Promise.all([c,h]).then(function(n){var o,a,l,u,d=n[0],h=n[1].data,c=n[1].keys,p=t._ProcessTemplates(e,{data:h,keys:c},d,!0,r).values[0];return o=r,a=h,l=c,u=p,t._treeKeyDataMap[e].get(o).data.children=a,t._treeKeyDataMap[e].get(o).key.children=l,t._dpNodeValueData[e].get(o)[i]=u,s&&(s[i]=p),p})}return Promise.resolve()}},_GetSimpleDataProviderConfigs:function(){return{}},_RenderComponent:function(e,t){if(this._context.isReadyToRender()){this._CleanAllTemplates();var i=this._IsFlowingLayoutSupported()&&this._resizeListener;i&&this._removeResizeListener(),this._component.render(t?null:e,this._width,this._height),i&&this._addResizeListener(),this.element.attr("role")?this.element[0].hasAttribute("tabindex")||this.element.attr("tabindex",0):this.element.attr("tabindex",null)}else this._renderNeeded=!0,this._MakeReady()},_getDataProviderEventHandler:function(e,t){var i=this,o=t[1],s=function(e,t,i){if(!t)return[];var n=new y(t),o=new Map,s=function(e){for(var t=0;t<e.length;t++){var r=i?e[t].value:e[t],a=n.get(r);a!==n.NOT_A_KEY&&o.set(a,t),i&&e[t].children&&s(e[t].children)}};s(e.keys);var r=[];return t.forEach(function(e){r.push(o.get(e))}),r},r=function(e){Promise.all([e,i._getTemplateEngine()]).then(function(e){i._dataProviderState[o].data=e[0],i._dataProviderState[o].pathsValuesMap=null,i._Render()})};return function(e){var a=this,l=n.DataProviderFeatureChecker.isTreeDataProvider(a),u=i._treeKeyDataMap[o];if("refresh"===e.type)r(i._fetchAllData(a,t[1]));else if("mutate"===e.type){var d,h=e.detail.update,c=e.detail.remove,p=e.detail.add,_=i._dataProviderState[t[1]].data,m=function(e,n,o,s){var r=0,d=[],h=1===o&&!s;return n.keys.forEach(function(e){var o,c=s?null:n.data[r];if(l)if(h){var p=u.get(e);p&&(p.data.value=c,o=Promise.resolve({data:p.data,key:u.get(e).key}))}else{var _={value:c},m={value:e},g=a.getChildDataProvider(e);if(g&&!s)o=i._fetchAllData(g,t[1]).then(function(e){return _.children=e.data,m.children=e.keys,{data:_,key:m}});else o=Promise.resolve({data:_,key:m});if(!s){var f=n.parentKeys?n.parentKeys[r]:null;u.set(m.value,{data:_,key:m,parentKey:f})}}else o=Promise.resolve({data:c,key:e}),u.set(e,{data:c,key:e});d.push(o),r+=1}),Promise.all(d).then(function(t){for(var i=t.length-1;i>=0;i--){var n,r,a=l?t[i].key.value:t[i].key,d=u.get(a).parentKey;if(d){var c=u.get(d);c.data.children||h||(c.data.children=[],c.key.children=[]),n=c.data.children,r=c.key.children}else n=_.data,r=_.keys;if(s)n.splice(e[i],o),r.splice(e[i],o);else{var p=h||0!==e.length?e[i]:n.length;n.splice(p,o,t[i].data),r.splice(p,o,t[i].key)}}return _})},g=function(e){return a.fetchByKeys({keys:e}).then(function(t){var i=[];return t.results.size>0&&e.forEach(function(e){i.push(t.results.get(e).data)}),i})},f=Promise.resolve();h&&(d=h.indexes||s(_,h.keys,l),f=Array.isArray(h.data)?m(d,h,1):g(h.keys).then(function(e){var t=Object.create(h,{data:{value:e}});return m(d,t,1)})),f.then(function(){return c?(d=c.indexes||s(_,c.keys,l),m(d,c,1,!0)):Promise.resolve()}).then(function(){return p?(d=p.indexes||s(_,p.addBeforeKeys?p.addBeforeKeys:p.afterKeys,l),Array.isArray(p.data)?m(d,p,0):g(p.keys).then(function(e){var t=Object.create(p,{data:{value:e}});return m(d,t,0)})):Promise.resolve()}).then(function(){r(Promise.resolve(_))})}}},_addDataProviderEventListeners:function(){for(var e=this._GetComponentDeferredDataPaths(),t=Object.keys(e),i=0;i<t.length;i++)for(var o=t[i],s=e[o],r=0;r<s.length;r++){var a,l=s[r];if((a="root"===o?this.options[l]:this.options[o]?this.options[o][l]:null)&&n.DataProviderFeatureChecker.isDataProvider(a)){var u=this._getDataProviderEventHandler(this,[o,l]);a.addEventListener("mutate",u),a.addEventListener("refresh",u),this._dataProviderEventListeners.push({dataProvider:a,listener:u})}}},_removeDataProviderEventListeners:function(){for(var e=0;e<this._dataProviderEventListeners.length;e++){var t=this._dataProviderEventListeners[e],i=t.dataProvider,n=t.listener;i.removeEventListener("mutate",n),i.removeEventListener("refresh",n)}this._dataProviderEventListeners=[]},_GetDataContext:function(e){return{}},_IsFlowingLayoutSupported:function(){return!1},whenReady:function(){if(this._ready)return Promise.resolve(!0);if(!this._promise){var e=this;this._promise=new Promise(function(t){e._promiseResolve=t})}return this._promise},_NotReady:function(){if(this._ready=!1,0===this._numDeferredObjs&&!this._readyResolveFunc){var e=c.getContext(this.element[0]).getBusyContext(),t={description:"The component identified by '"+this.element.attr("id")+"' is being loaded."};this._readyResolveFunc=e.addBusyState(t)}},_MakeReady:function(){this._promiseResolve&&(this._promiseResolve(!0),this._promiseResolve=null),this._ready=!0,this._promise=null,this._readyResolveFunc&&(this._readyResolveFunc(),this._readyResolveFunc=null)},_ProcessOptions:function(){var e=this.options.tooltip;e&&e._renderer&&(this.options.tooltip={renderer:this._GetTemplateRenderer(e._renderer,"tooltip")})},_WrapCustomElementRenderer:function(e){var t=this;return function(i){i._dvtcontext=t._context;var n=e(i);if(i._templateName&&i._templateCleanup&&t._AddTemplate(i._templateName,i._templateCleanup),n&&!0!==n.preventDefault&&n.insert){var o=n.insert;return o.classList&&o.classList.contains("oj-dvtbase")?t._GetDvtComponent(o):o}return null}},_FixCustomRenderers:function(e){if(this._IsCustomElement())for(var t=this._GetComponentRendererOptions(),i=0;i<t.length;i++){var n=t[i],o=new Jt(e,n),s=o.getValue();s&&o.setValue(this._WrapCustomElementRenderer(s),!0)}},_GetComponentRendererOptions:function(){return["tooltip/renderer"]},_GetTemplateRenderer:function(e,t){var i=this;return function(n){var o=document.createElement("div");o.style.display="none",e({parentElement:o,context:n});var s=o.children[0];return s?(i._AddTemplate(t,function(){$(o).remove()}),o.removeChild(s),$(o).remove(),s):null}},_GetTemplateDataRenderer:function(e,t){var i=this;return function(n){var o=document.createElement("div");o.style.display="none",o._dvtcontext=i._context,i.element.append(o),e({parentElement:o,data:n.data});var s=o.children[0];return s?(i._AddTemplate(t,function(){$(o).remove()}),"http://www.w3.org/2000/svg"===s.namespaceURI?(o.removeChild(s),$(o).remove(),s):i._GetDvtComponent(s)):null}},_CleanAllTemplates:function(){for(var e=Object.keys(this._templateMap),t=0;t<e.length;t++){var i=e[t];this._CleanTemplate(i)}this._templateMap={}},_CleanTemplate:function(e){if(this._templateMap[e]){for(var t=this._templateMap[e].length,i=0;i<t;i++)this._templateMap[e][i]();this._templateMap[e]=[]}},_AddTemplate:function(e,t){this._templateMap[e]||(this._templateMap[e]=[]),this._templateMap[e].push(t)},_CompareOptionValues:function(e,t,i){switch(e){case"hiddenCategories":case"highlightedCategories":case"selection":return n.Object.compareValues(t,i);default:return this._super(e,t,i)}}},!0),n.__registerWidget("oj.dvtTimeComponent",$.oj.dvtBaseComponent,{_GetEventTypes:function(){return["optionChange","viewportChange"]},_GetTranslationMap:function(){var e=this._super(),t=bn.getMonthNames("wide");e["DvtUtilBundle.MONTH_JANUARY"]=t[0],e["DvtUtilBundle.MONTH_FEBRUARY"]=t[1],e["DvtUtilBundle.MONTH_MARCH"]=t[2],e["DvtUtilBundle.MONTH_APRIL"]=t[3],e["DvtUtilBundle.MONTH_MAY"]=t[4],e["DvtUtilBundle.MONTH_JUNE"]=t[5],e["DvtUtilBundle.MONTH_JULY"]=t[6],e["DvtUtilBundle.MONTH_AUGUST"]=t[7],e["DvtUtilBundle.MONTH_SEPTEMBER"]=t[8],e["DvtUtilBundle.MONTH_OCTOBER"]=t[9],e["DvtUtilBundle.MONTH_NOVEMBER"]=t[10],e["DvtUtilBundle.MONTH_DECEMBER"]=t[11];var i=bn.getDayNames("wide");e["DvtUtilBundle.DAY_SUNDAY"]=i[0],e["DvtUtilBundle.DAY_MONDAY"]=i[1],e["DvtUtilBundle.DAY_TUESDAY"]=i[2],e["DvtUtilBundle.DAY_WEDNESDAY"]=i[3],e["DvtUtilBundle.DAY_THURSDAY"]=i[4],e["DvtUtilBundle.DAY_FRIDAY"]=i[5],e["DvtUtilBundle.DAY_SATURDAY"]=i[6];var n=bn.getDayNames("abbreviated");return e["DvtUtilBundle.DAY_SHORT_SUNDAY"]=n[0],e["DvtUtilBundle.DAY_SHORT_MONDAY"]=n[1],e["DvtUtilBundle.DAY_SHORT_TUESDAY"]=n[2],e["DvtUtilBundle.DAY_SHORT_WEDNESDAY"]=n[3],e["DvtUtilBundle.DAY_SHORT_THURSDAY"]=n[4],e["DvtUtilBundle.DAY_SHORT_FRIDAY"]=n[5],e["DvtUtilBundle.DAY_SHORT_SATURDAY"]=n[6],e},_HandleEvent:function(e){if("viewportChange"===e.type){var t=new Date(e.viewportStart).toISOString(),i=new Date(e.viewportEnd).toISOString(),n=e.minorAxisScale,o={viewportStart:t,viewportEnd:i,minorAxisScale:n};this._UserOptionChange("viewportStart",t),this._UserOptionChange("viewportEnd",i),this._UserOptionChange("minorAxis.scale",n),this._trigger("viewportChange",null,o)}else this._super(e)},_LoadResources:function(){null==this.options._resources&&(this.options._resources={});var e=this.options._resources;e.grabbingCursor=p.getResourceUrl("resources/internal-deps/dvt/chart/hand-closed.cur"),e.grabCursor=p.getResourceUrl("resources/internal-deps/dvt/chart/hand-open.cur");var t=n.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME),i=t.createConverter({hour:"numeric",minute:"2-digit",second:"2-digit"}),o=t.createConverter({hour:"numeric",minute:"2-digit"}),s=t.createConverter({hour:"numeric"}),r=t.createConverter({month:"numeric",day:"2-digit"}),a=t.createConverter({month:"long"}),l={seconds:i,minutes:o,hours:s,days:r,weeks:r,months:a,quarters:a,years:t.createConverter({year:"numeric"})};e.converter=l,e.converterFactory=t,e.firstDayOfWeek=n.LocaleData.getFirstDayOfWeek()},_ProcessTemplates:function(t,i,n){var o=this._GetDataProviderSeriesConfig(),s=this.element[0],r=this._super(t,i,n);if(o&&t===o.dataProperty){var a,l,u,d=[],h={},c=r.values[0],p=0,_=o.idAttribute,m=o.itemsKey;for(u=0;u<c.length;u++){var g=c[u],f={data:g._itemData,key:g.id,index:u,componentElement:s},v=null!=g[_]?g[_]:g.id;h[v]?(h[v][m].push(f),d[h[v].index][m].push(g)):((l={componentElement:s,id:v,index:p})[m]=[f],h[v]=l,p+=1,(a={id:v})[m]=[g],d.push(a))}var y=o.templateName,b=o.templateElementName,C=this.getTemplates()[y];if(C){var S=this.options.as,E=this.getElementPropertyNames(b),T=this.getPropertyValidator(C[0],b);for(u=0;u<d.length;u++){l=h[(a=d[u]).id];try{var D=n.resolveProperties(s,C[0],b,E,l,S,T);D.id=a.id,D[m]=a[m],d[u]=D}catch(t){e.error(t)}}}return{paths:r.paths,values:[d]}}return r},_GetDataProviderSeriesConfig:function(){return{}}});var ei={properties:{borderColor:{type:"string"},color:{type:"string"},label:{type:"object",properties:{style:{type:"object",value:{}},text:{type:"string",value:""}}},max:{type:"number",value:100},metricLabel:{type:"object",properties:{converter:{type:"object"},rendered:{type:"string",enumValues:["off","on"],value:"off"},scaling:{type:"string",enumValues:["auto","billion","million","none","quadrillion","thousand","trillion"],value:"auto"},style:{type:"object",value:{}},text:{type:"string",value:""},textType:{type:"string",enumValues:["number","percent"],value:"number"}}},min:{type:"number",value:0},rotation:{type:"number",enumValues:["0","180","270","90"],value:0},size:{type:"number",value:1},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}},thresholds:{type:"Array<Object>",value:[]},tooltip:{type:"object",properties:{renderer:{type:"function",properties:{color:{type:"string"},componentElement:{type:"Element"},label:{type:"string"},parentElement:{type:"Element"}}}}},trackResize:{type:"string",enumValues:["off","on"],value:"on"},translations:{type:"object",value:{},properties:{componentName:{type:"string"},labelAndValue:{type:"string"},labelClearSelection:{type:"string"},labelCountWithTotal:{type:"string"},labelDataVisualization:{type:"string"},labelInvalidData:{type:"string"},labelNoData:{type:"string"},stateCollapsed:{type:"string"},stateDrillable:{type:"string"},stateExpanded:{type:"string"},stateHidden:{type:"string"},stateIsolated:{type:"string"},stateMaximized:{type:"string"},stateMinimized:{type:"string"},stateSelected:{type:"string"},stateUnselected:{type:"string"},stateVisible:{type:"string"}}},type:{type:"string",value:"circle"},value:{type:"number",writeback:!0},visualEffects:{type:"string",enumValues:["auto","none"],value:"auto"}},methods:{getMetricLabel:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}},ti={properties:{changed:{type:"boolean",writeback:!0,value:!1},changedState:{type:"object",properties:{borderColor:{type:"string",value:""},color:{type:"string"},shape:{type:"string",value:"star"},source:{type:"string",value:""},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}}}},hoverState:{type:"object",properties:{borderColor:{type:"string",value:""},color:{type:"string"},shape:{type:"string",value:"star"},source:{type:"string",value:""},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}}}},max:{type:"number",value:5},min:{type:"number",value:0},orientation:{type:"string",enumValues:["horizontal","vertical"],value:"horizontal"},preserveAspectRatio:{type:"string",enumValues:["meet","none"],value:"meet"},readonly:{type:"boolean",value:!1},selectedState:{type:"object",properties:{borderColor:{type:"string",value:""},color:{type:"string"},shape:{type:"string",value:"star"},source:{type:"string",value:""},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}}}},step:{type:"number",value:1},thresholds:{type:"Array<Object>",value:[]},tooltip:{type:"object",properties:{renderer:{type:"function",properties:{color:{type:"string"},componentElement:{type:"Element"},label:{type:"string"},parentElement:{type:"Element"}}}}},trackResize:{type:"string",enumValues:["off","on"],value:"on"},transientValue:{type:"number",writeback:!0,readOnly:!0},translations:{type:"object",value:{},properties:{componentName:{type:"string"},labelAndValue:{type:"string"},labelClearSelection:{type:"string"},labelCountWithTotal:{type:"string"},labelDataVisualization:{type:"string"},labelInvalidData:{type:"string"},labelNoData:{type:"string"},stateCollapsed:{type:"string"},stateDrillable:{type:"string"},stateExpanded:{type:"string"},stateHidden:{type:"string"},stateIsolated:{type:"string"},stateMaximized:{type:"string"},stateMinimized:{type:"string"},stateSelected:{type:"string"},stateUnselected:{type:"string"},stateVisible:{type:"string"}}},unselectedState:{type:"object",properties:{borderColor:{type:"string",value:""},color:{type:"string"},shape:{type:"string",value:"star"},source:{type:"string",value:""},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}}}},value:{type:"number",writeback:!0},visualEffects:{type:"string",enumValues:["auto","none"],value:"auto"}},methods:{refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}},ii={properties:{angleExtent:{type:"number",value:360},animationDuration:{type:"number"},animationOnDataChange:{type:"string",enumValues:["auto","none"],value:"none"},animationOnDisplay:{type:"string",enumValues:["auto","none"],value:"none"},borderColor:{type:"string"},borderRadius:{type:"string",value:"auto"},center:{type:"object",properties:{renderer:{type:"function",properties:{componentElement:{type:"Element"},innerBounds:{type:"oj.ojStatusMeterGauge.Bounds"},metricLabel:{type:"string"},outerBounds:{type:"oj.ojStatusMeterGauge.Bounds"}}}}},color:{type:"string"},indicatorSize:{type:"number",value:1},innerRadius:{type:"number",value:.7},label:{type:"object",properties:{position:{type:"string",enumValues:["auto","center","start"],value:"auto"},style:{type:"object",value:{}},text:{type:"string",value:""}}},max:{type:"number",value:100},metricLabel:{type:"object",properties:{converter:{type:"object"},position:{type:"string",enumValues:["auto","center","insideIndicatorEdge","outsideIndicatorEdge","outsidePlotArea","withLabel"],value:"auto"},rendered:{type:"string",enumValues:["auto","off","on"],value:"auto"},scaling:{type:"string",enumValues:["auto","billion","million","none","quadrillion","thousand","trillion"],value:"auto"},style:{type:"object",value:{}},text:{type:"string",value:""},textType:{type:"string",enumValues:["number","percent"],value:"number"}}},min:{type:"number",value:0},orientation:{type:"string",enumValues:["circular","horizontal","vertical"],value:"horizontal"},plotArea:{type:"object",properties:{borderColor:{type:"string"},borderRadius:{type:"string",value:"auto"},color:{type:"string"},rendered:{type:"string",enumValues:["auto","off","on"],value:"auto"},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}}}},readonly:{type:"boolean",value:!1},referenceLines:{type:"Array<Object>",value:[]},startAngle:{type:"number",value:90},step:{type:"number"},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}},thresholdDisplay:{type:"string",enumValues:["all","currentOnly","onIndicator"],value:"onIndicator"},thresholds:{type:"Array<Object>",value:[]},tooltip:{type:"object",properties:{renderer:{type:"function",properties:{color:{type:"string"},componentElement:{type:"Element"},label:{type:"string"},parentElement:{type:"Element"}}}}},trackResize:{type:"string",enumValues:["off","on"],value:"on"},transientValue:{type:"number",writeback:!0,readOnly:!0},translations:{type:"object",value:{},properties:{componentName:{type:"string"},labelAndValue:{type:"string"},labelClearSelection:{type:"string"},labelCountWithTotal:{type:"string"},labelDataVisualization:{type:"string"},labelInvalidData:{type:"string"},labelNoData:{type:"string"},stateCollapsed:{type:"string"},stateDrillable:{type:"string"},stateExpanded:{type:"string"},stateHidden:{type:"string"},stateIsolated:{type:"string"},stateMaximized:{type:"string"},stateMinimized:{type:"string"},stateSelected:{type:"string"},stateUnselected:{type:"string"},stateVisible:{type:"string"}}},value:{type:"number",writeback:!0},visualEffects:{type:"string",enumValues:["auto","none"],value:"auto"}},methods:{getMetricLabel:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};n.__registerWidget("oj.dvtBaseGauge",$.oj.dvtBaseComponent,{_ProcessStyles:function(){this._super(),this.options._thresholdColors=[this.options._threshold1,this.options._threshold2,this.options._threshold3],this.options._threshold1=null,this.options._threshold2=null,this.options._threshold3=null},_AfterCreate:function(){this._super();var e={_context:{writeback:!0,internalSet:!0,readOnly:!0}};this.option("rawValue",this.options.value,e)},_GetChildStyleClasses:function(){var e=this._super();return e["oj-gauge-metric-label"]={path:"metricLabel/style",property:"TEXT"},e["oj-gauge-tick-label"]={path:"tickLabel/style",property:"TEXT"},e["oj-gauge-threshold1"]={path:"_threshold1",property:"color"},e["oj-gauge-threshold2"]={path:"_threshold2",property:"color"},e["oj-gauge-threshold3"]={path:"_threshold3",property:"color"},e},_GetEventTypes:function(){return["input","optionChange"]},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtGaugeBundle.EMPTY_TEXT"]=e.labelNoData,t["DvtUtilBundle.GAUGE"]=e.componentName,t},_HandleEvent:function(e){if("valueChange"===e.type){var t=e.newValue;e.complete?this._UserOptionChange("value",t):(this._trigger("input",null,{value:t}),this._UserOptionChange("rawValue",t))}else this._super(e)},_setOption:function(t,i,n){if("rawValue"!==t){if("value"===t){var o={_context:{writeback:!0,internalSet:!0,readOnly:!0}};this.option("rawValue",i,o)}this._super(t,i,n)}else e.error("'rawValue' is a read-only option and cannot be set")},_ConvertLocatorToSubId:function(e){var t=e.subId;return"oj-dialgauge-tooltip"!==t&&"oj-ledgauge-tooltip"!==t&&"oj-ratinggauge-tooltip"!==t&&"oj-statusmetergauge-tooltip"!==t||(t="tooltip"),"oj-ratinggauge-item"===t&&null!=e.index&&(t="item["+e.index+"]"),t}},!0),n.__registerWidget("oj.ojDialGauge",$.oj.dvtBaseGauge,{widgetEventPrefix:"oj",options:{rawValue:void 0},_CreateDvtComponent:function(e,t,i){return this._focusable({element:this.element,applyHighlight:!0}),dvt.DialGauge.newInstance(e,t,i)},_ConvertSubIdToLocator:function(e){var t={};return"tooltip"===e&&(t.subId="oj-dialgauge-tooltip"),t},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-dialgauge"),e},_Render:function(){this.element.attr("title")?(this.options.shortDesc=this.element.attr("title"),this.element.data(this.element,"title",this.element.attr("title")),this.element.removeAttr("title")):this.element.data("title")&&(this.options.shortDesc=this.element.data("title")),this._setImages(),this._super()},_setImages:function(){var e=this.options.background;null==e&&(e="circleAlta",this.options.background="circleAlta");var t=this.options.indicator;if(null==t&&(t="needleAlta",this.options.indicator="needleAlta"),"string"==typeof e){var i=[{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/alta-circle-200x200.png"),width:200,height:200},{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/alta-circle-400x400.png"),width:400,height:400}];"rectangleAlta"===e?i=[{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/alta-rectangle-200x200.png"),width:200,height:154},{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/alta-rectangle-400x400.png"),width:400,height:309}]:"domeAlta"===e?i=[{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/alta-dome-200x200.png"),width:200,height:154},{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/alta-dome-400x400.png"),width:400,height:309}]:"circleAntique"===e?i=[{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/antique-circle-200x200.png"),width:200,height:200},{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/antique-circle-400x400.png"),width:400,height:400}]:"rectangleAntique"===e?i=[{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/antique-rectangle-200x200.png"),width:200,height:168},{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/antique-rectangle-400x400.png"),width:400,height:335}]:"domeAntique"===e?i=[{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/antique-dome-200x200.png"),width:200,height:176},{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/antique-dome-400x400.png"),width:400,height:352}]:"circleLight"===e?i=[{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/light-circle-200x200.png"),width:200,height:200},{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/light-circle-400x400.png"),width:400,height:400}]:"rectangleLight"===e?i=[{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/light-rectangle-200x200.png"),width:200,height:154},{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/light-rectangle-400x400.png"),width:400,height:307}]:"domeLight"===e?i=[{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/light-dome-200x200.png"),width:200,height:138},{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/light-dome-400x400.png"),width:400,height:276}]:"circleDark"===e?i=[{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/dark-circle-200x200.png"),width:200,height:200},{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/dark-circle-400x400.png"),width:400,height:400}]:"rectangleDark"===e?i=[{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/dark-rectangle-200x200.png"),width:200,height:154},{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/dark-rectangle-400x400.png"),width:400,height:307}]:"domeDark"===e&&(i=[{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/dark-dome-200x200.png"),width:200,height:138},{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/dark-dome-400x400.png"),width:400,height:276}]),this.options._backgroundImages=i}if("string"==typeof t){var n=[{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/alta-needle-1600x1600.png"),width:374,height:575}];"needleAntique"===t?n=[{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/antique-needle-1600x1600.png"),width:81,height:734}]:"needleDark"===t?n=[{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/dark-needle-1600x1600.png"),width:454,height:652}]:"needleLight"===t&&(n=[{src:p.getResourceUrl("resources/internal-deps/dvt/gauge/light-needle-1600x1600.png"),width:454,height:652}]),this.options._indicatorImages=n}},getMetricLabel:function(){return this._component.getAutomation().getMetricLabel()}}),n.__registerWidget("oj.ojLedGauge",$.oj.dvtBaseGauge,{widgetEventPrefix:"oj",options:{borderColor:"",color:"#393737",label:{style:{},text:""},metricLabel:{converter:null,rendered:"off",scaling:"auto",style:{},text:"",textType:"number"},max:100,min:0,rotation:0,size:1,svgClassName:"",svgStyle:{},thresholds:[],tooltip:{renderer:null},type:"circle",value:null,visualEffects:"auto"},_CreateDvtComponent:function(e,t,i){return this._focusable({element:this.element,applyHighlight:!0}),dvt.LedGauge.newInstance(e,t,i)},_ConvertSubIdToLocator:function(e){var t={};return"tooltip"===e&&(t.subId="oj-ledgauge-tooltip"),t},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-ledgauge"),e},_Render:function(){this.element.attr("title")?(this.options.shortDesc=this.element.attr("title"),this.element.data(this.element,"title",this.element.attr("title")),this.element.removeAttr("title")):this.element.data("title")&&(this.options.shortDesc=this.element.data("title")),this._super()},getMetricLabel:function(){return this._component.getAutomation().getMetricLabel()}}),n.__registerWidget("oj.ojRatingGauge",$.oj.dvtBaseGauge,{widgetEventPrefix:"oj",options:{changed:!1,changedState:{borderColor:"",color:"#ED2C02",shape:"star",source:"",svgClassName:"",svgStyle:{}},hoverState:{borderColor:"",color:"#007CC8",shape:"star",source:"",svgClassName:"",svgStyle:{}},max:5,min:0,orientation:"horizontal",preserveAspectRatio:"meet",rawValue:null,readonly:!1,selectedState:{borderColor:"",color:"#F8C15A",shape:"star",source:"",svgClassName:"",svgStyle:{}},step:1,thresholds:[],tooltip:{renderer:null},unselectedState:{borderColor:"",color:"#C4CED7",shape:"star",source:"",svgClassName:"",svgStyle:{}},value:null,visualEffects:"auto"},_CreateDvtComponent:function(e,t,i){return this._focusable({element:this.element,applyHighlight:!0}),dvt.RatingGauge.newInstance(e,t,i)},_ConvertSubIdToLocator:function(e){var t={};return"tooltip"===e?t.subId="oj-ratinggauge-tooltip":0===e.indexOf("item")&&(t.subId="oj-ratinggauge-item",t.index=this._GetFirstIndex(e)),t},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-ratinggauge"),e},_Render:function(){this.element.attr("title")?(this.options.shortDesc=this.element.attr("title"),this.element.data(this.element,"title",this.element.attr("title")),this.element.removeAttr("title")):this.element.data("title")&&(this.options.shortDesc=this.element.data("title")),this._super()},_UserOptionChange:function(e,t){this._superApply(arguments),"value"===e&&this._UserOptionChange("changed",!0)}}),n.__registerWidget("oj.ojStatusMeterGauge",$.oj.dvtBaseGauge,{widgetEventPrefix:"oj",options:{angleExtent:360,animationOnDataChange:"none",animationOnDisplay:"none",animationDuration:void 0,borderColor:"",borderRadius:"auto",center:{renderer:null},color:"#393737",indicatorSize:1,innerRadius:.7,label:{position:"auto",style:{},text:""},max:100,metricLabel:{converter:null,position:"auto",rendered:"auto",scaling:"auto",style:{},text:"",textType:"number"},min:0,orientation:"horizontal",plotArea:{borderColor:void 0,borderRadius:"auto",color:void 0,rendered:"auto",svgClassName:"",svgStyle:{}},rawValue:null,readonly:!1,referenceLines:[],startAngle:90,step:null,svgClassName:"",svgStyle:{},tooltip:{renderer:null},thresholdDisplay:"onIndicator",thresholds:[],value:null,visualEffects:"auto"},_CreateDvtComponent:function(e,t,i){return this._focusable({element:this.element,applyHighlight:!0}),dvt.StatusMeterGauge.newInstance(e,t,i)},_ConvertSubIdToLocator:function(e){var t={};return"tooltip"===e&&(t.subId="oj-statusmetergauge-tooltip"),t},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-statusmetergauge"),e},_GetComponentRendererOptions:function(){return["tooltip/renderer","center/renderer"]},_ProcessOptions:function(){this._super();var e=this.options.center;e&&e._renderer&&(e.renderer=this._GetTemplateRenderer(e._renderer,"center"))},_GetChildStyleClasses:function(){var e=this._super();return e["oj-dvtbase oj-statusmetergauge"]={path:"animationDuration",property:"ANIM_DUR"},e},_Render:function(){this.element.attr("title")?(this.options.shortDesc=this.element.attr("title"),this.element.data(this.element,"title",this.element.attr("title")),this.element.removeAttr("title")):this.element.data("title")&&(this.options.shortDesc=this.element.data("title")),this._super()},getMetricLabel:function(){return this._component.getAutomation().getMetricLabel()}}),function(){ei.extension._WIDGET_NAME="ojLedGauge";n.CustomElementBridge.register("oj-led-gauge",{metadata:ei,parseFunction:Zt.shapeParseFunction({type:!0},{arrow:!0,square:!0,rectangle:!0,circle:!0,diamond:!0,triangle:!0,human:!0,star:!0})})}(),function(){ti.extension._WIDGET_NAME="ojRatingGauge",ti.extension._ALIASED_PROPS={transientValue:"rawValue"};var e=/\d/,t={circle:!0,square:!0,diamond:!0,triangle:!0,human:!0,star:!0},i={circle:!0,square:!0,diamond:!0,triangle:!0,human:!0,star:!0,dot:!0,none:!0},o={"changed-state.shape":!0,"hover-state.shape":!0,"selected-state.shape":!0,"unselected-state.shape":!0};n.CustomElementBridge.register("oj-rating-gauge",{metadata:ti,parseFunction:function(n,s,r,a){if(o[s]||"unselected-state.shape"===s){if(e.test(n))return n;if(o[s]&&!t[s])throw new Error("Found: "+n+". Expected: "+t.toString());if("unselected-state.shape"!==s||i[s])return n;throw new Error("Found: "+n+". Expected: "+i.toString())}return a(n)}})}(),ii.extension._WIDGET_NAME="ojStatusMeterGauge",ii.extension._ALIASED_PROPS={transientValue:"rawValue"},n.CustomElementBridge.register("oj-status-meter-gauge",{metadata:ii}),function(){var t,i,o,s,r,a="/",l="oj_Router",u=" | ",d=1024,h="popstate",c="hasChanged",p={hasChanged:!1},_=!1,m=[],g=window.location,f="parameters";function v(e){return e?e.split("/"):[]}function y(e){return G(v(e)[0])}function b(e,t){var i=document.createElement("a");return i.href=g.href,void 0!==e.search&&(i.search=e.search),void 0!==e.pathname&&(i.pathname=e.pathname),i.search=function(e,t){var i,o,s="",r=e.indexOf(l);if(-1!==r){var a=e.indexOf("&",r);-1===a&&(a=e.length),i=e.substring(0,r),o=e.substr(a)}else i=e+(-1===e.indexOf("?")?"?":"&"),o="";t&&Object.getOwnPropertyNames(t).length>0?s=function(e){var t=JSON.stringify(e),i=encodeURIComponent(t),o=n.LZString.compressToEncodedURIComponent(t),s=!1,r=l+"=";o.length<=i.length&&(s=!0);r+=s?"1"+o:"0"+i;if(r.length>d)throw new Error("Size of bookmarkable data is too big.");return r}(t):i=i.substring(0,i.length-1);return i+s+o}(i.search,t),i.href.replace(/\?$/,"")}function C(e){return e._parentRouter?C(e._parentRouter)+"."+e._name:e._name}function S(e,t){var i;return e._childRouters.every(function(e){if(e._parentState){if(e._parentState===t)return i=e,!1}else i=e;return!0}),i}function E(t){var i=t.filter(function(e){return e.value!==e.router._stateId()});return e.option("level")===e.LEVEL_INFO&&(e.info("Potential changes are: "),i.forEach(function(t){e.info("   { router: %s, value: %s }",t.router&&C(t.router),t.value)})),i}function T(e){var t=this[e.router._name];void 0!==t&&(e.router._extra=t)}function D(){return m[0]&&m[0].cancel}function A(t){var i,o=t.charAt(0),s=t.slice(1);if("0"===o)s=decodeURIComponent(s);else{if("1"!==o)throw new Error("Error retrieving bookmarkable data. Format is invalid");s=n.LZString.decompressFromEncodedURIComponent(s)}if(i=JSON.parse(s),e.option("level")===e.LEVEL_INFO){e.info("Bookmarkable data: ");for(var r=Object.keys(i),a=0;a<r.length;a++){var l=r[a];e.info("   { router: %s, value: %s }",l,i[l])}}return i}function I(e,t,i){var n;return e._childRouters.every(function(e){return!((!e._parentState||e._parentState===i)&&e.stateFromIdCallback(t))||(n=e,!1)}),n}function O(e){n.Router._transitionedToState.dispatch(e)}function w(e,t){this.router=e,this.value=t}function R(e){var t,i,n=e[e.length-1];for(n?(t=n.router,i=y(n.value)):(t=r,(i=r._defaultStateId)&&e.push(new w(t,i))),t=S(t,i);t;)(i=t._defaultStateId)&&e.push(new w(t,i)),t=S(t,i);var o=function e(t){var i=[];return t._currentState()&&(i.push(new w(t)),t._childRouters.forEach(function(t){i=i.concat(e(t))})),i}(r),s=[];return o.forEach(function(t,i){var n=e[i];n&&t.router===n.router||s.unshift(t)}),s.concat(e)}function x(t,i,n){var o=t();return o||e.info("%s is false for state: %s",i,n),o}function L(e,t,i,n){return"function"==typeof e&&(t=t?t.then(function(t){return t&&(t=x(e,i,n)),t}):new Promise(function(t){t(x(e,i,n))})),t}function N(t){var i;return D()?Promise.resolve(!1):(e.info("Start _canExit."),i=t?null===(i=function e(t,i){var n=t._currentState();if(n){for(var o=0;o<t._childRouters.length;o++)i=e(t._childRouters[o],i);i=L(n.viewModel&&n.viewModel.canExit?n.viewModel.canExit:n._canExit,i,"canExit",n._id)}return i}(t,null))?Promise.resolve(!0):i.then(function(e){return e&&!D()}):Promise.resolve(!0))}function P(t,i){if(D())return Promise.resolve();e.info("Start _canEnter.");var n=null;return t.forEach(function(e){var t=e.getState();t&&(n=L(t._canEnter,n,"canEnter",t._id))}),n=null===n?Promise.resolve({allChanges:t,origin:i}):n.then(function(e){var n;return e&&!D()&&(n={allChanges:t,origin:i}),n})}function j(t){if(!t)return Promise.resolve(p);var i,o=Promise.resolve().then(function(){e.info("Entering _updateAll."),n.Router._updating=!0}),s=t.allChanges;return s.forEach(function(n){i=n.router.currentState.peek(),o=o.then(function(){if(!D())return function(t,i){var n=t.router.stateFromIdCallback(y(t.router._stateId())),o=t.getState();return Promise.resolve().then(function(){e.option("level")===e.LEVEL_INFO&&e.info("Updating state of %s to %s.",C(t.router),t.value)}).then(n?n._exit:void 0).then(function(){var e=t.router,n=!1;if("popState"===i){var s,r=e._navHistory.length;for(s=r-1;s>=0;s--)if(e._navHistory[s]===t.value){n=!0,e._navHistory.splice(s,r-s);break}r-s==1&&(e._navigationType="back")}if(n||(delete e._navigationType,e._navHistory.push(y(e._stateId()))),t.value&&o){var a=v(t.value);o._paramOrder.forEach(function(e,t){var i=G(a[t+1]);i!==o._parameters[e]&&(o._parameters[e]=i)})}e._stateId(t.value)}).then(o?o._enter:void 0)}(n,t.origin)})}),o.then(function(){var t,o,r=!1;if(s.length){r=!D();var a=s[s.length-1];t=a.router,o=a.state}return n.Router._updating=!1,e.info("_updateAll returns %s.",String(r)),{hasChanged:r,router:t,oldState:i,newState:o}},function(e){return n.Router._updating=!1,Promise.reject(e)})}function M(e){var t;try{t=E(t=i.parse())}catch(e){return Promise.reject(e)}return P(t,e).then(j)}function H(t,i){if(e.option("level")===e.LEVEL_INFO){var n=i.path?"path="+i.path:"",o=i.deferredHandling?"deferredHandling=true":"",s=i.router?C(i.router):"null";e.info(">> %s: origin=%s router=%s %s %s",t,i.origin,s,n,o)}}function k(){var i,n=m[0];return H("Resolving",n),n.cancel?(H("Cancelled",n),i=Promise.resolve(p)):i=function(e){if(H("Executing",e),!e.deferredHandling){if("sync"===e.origin)return M();if("popState"===e.origin)return N(e.router).then(function(t){return t?M(e.origin):Promise.resolve(p)})}return e.router._go(e)}(n),i.then(function(e){if(H("Done with",m.shift()),!0===e[c]){var i,n=function e(t){if(!t)return{title:"",segment:""};var i=e(S(t,t._stateId()));if(""===i.title){var n=t._currentState();if(n){var o=n._title;void 0!==o?("function"==typeof o&&(o=o()),i.title=String(o)):void 0!==(o=n._label)&&(o=String(o),""!==i.segment&&(o+=u+i.segment),i.segment=o)}}return i}(r);""!==n.title?i=n.title:t&&t.length>0?(i=t,""!==n.segment&&(i+=u+n.segment)):i=n.segment,i!==window.document.title&&(window.document.title=i)}return O(e),e},function(t){return m=[],e.error("Error when executing transition: %o",t),O(p),Promise.reject(t)})}function U(e){H("Queuing  ",e);var t=m.push(e);if(1===t)s=k();else{var i=m[t-2];i.deferredHandling||(H("Cancelling",i),i.cancel=!0),s=s.then(k)}return s}function B(){var t=y(r._stateId()),i=null;if(e.info("Handling popState event with URL: %s",g.href),t)for(var n=0;n<r._childRouters.length;n++){var o=r._childRouters[n];if(t===o._parentState){i=o;break}}U({router:i,origin:"popState"})}function F(){_||(i||(i=new n.Router.urlPathAdapter),i.init(a),t=window.document.title,window.addEventListener(h,B,!1),e.info("Initializing rootInstance."),e.info("Base URL is %s",a),e.info("Current URL is %s",g.href),_=!0)}function V(e){var t=e;return t&&t.replace&&(t=(t=t.replace(/~/g,"~0")).replace(/\//g,"~1")),t}function G(e){var t=e;return t&&t.replace&&(t=(t=t.replace(/~1/g,"/")).replace(/~0/g,"~")),t}w.prototype.getState=function(){return this.state||this.value&&(this.state=this.router.stateFromIdCallback(y(this.value))),this.state},w.prototype.addParameter=function(e){e&&(this.value+="/"+e)},n.Router=function(e,t,i){var n=this;function o(e,t){var i={};if(i.name=t.moduleConfig.name,e){var n={};i.params=n;var o={};n.ojRouter=o,o.parentRouter=t,Object.defineProperty(o,"direction",{get:function(){return t._navigationType},enumerable:!0});var s={};o[f]=s;var r=e[f];Object.keys(r).forEach(function(e){var t=r[e];s[e]=ko.observable(t)}),i.lifecycleListener={attached:t.moduleConfig.lifecycleListener.attached}}return i}this._name=e,this._parentState=i||(t?y(t._stateId()):void 0),this._parentRouter=t,this._childRouters=[],this._extra=void 0,this._stateId=ko.observable(),this._stateIdComp=ko.pureComputed({read:function(){return y(this._stateId())},write:function(e){this.go(e).then(null,function(e){throw e})},owner:n}),this._states=null,this._defaultStateId=void 0,this._currentState=ko.pureComputed(function(){var e=y(n._stateId());return ko.ignoreDependencies(n.stateFromIdCallback,n,[e])}),this._currentValue=ko.pureComputed(function(){var e,t=y(n._stateId()),i=ko.ignoreDependencies(n.stateFromIdCallback,n,[t]);return i&&(e=i.value),e}),this._navigationType=void 0,this._navHistory=[],this._moduleConfig=Object.create(null,{name:{value:ko.pureComputed(function(){var e,t=y(this._stateId())||this._defaultStateId||this._states[0].name,i=this.stateFromIdCallback(t);return i&&((e=i.value)&&"string"==typeof e||(e=i._id)),e},n),enumerable:!0},params:{value:Object.create(null,{ojRouter:{value:new function(){Object.defineProperties(this,{parentRouter:{value:n,enumerable:!0},direction:{get:function(){return n._navigationType},enumerable:!0}})},enumerable:!0}}),enumerable:!0},lifecycleListener:{value:{attached:function(e){var t=n.currentState();t&&(t.viewModel=e.viewModel)},enumerable:!0},enumerabl:!0}}),this._getObservableModuleConfig=function(){if(!this._observableModuleConfig){var e=n.currentState,t=e.peek(),i=ko.observable(o(t,n));e.subscribe(function(e){var t=i.peek();if(t.name!==function(e){var t="oj-blank";if(e)return(t=e.value)&&"string"==typeof t||(t=e._id),t;return}(e))i(o(e,n));else for(var s=t.params.ojRouter[f],r=Object.keys(s),a=0;a<r.length;a++){var l=r[a],u=e[f][l];s[l](u)}}),this._observableModuleConfig=i}return this._observableModuleConfig},Object.defineProperties(this,{parent:{value:this._parentRouter,enumerable:!0}})},Object.defineProperties(n.Router.prototype,{name:{get:function(){return this._name},enumerable:!0},states:{get:function(){return this._states},enumerable:!0},stateId:{get:function(){return this._stateIdComp},enumerable:!0},currentState:{get:function(){return this._currentState},enumerable:!0},currentValue:{get:function(){return this._currentValue},enumerable:!0},direction:{get:function(){return this._navigationType},enumerable:!0},defaultStateId:{get:function(){return this._defaultStateId},set:function(e){this._defaultStateId=e},enumerable:!0},moduleConfig:{get:function(){return this._moduleConfig},enumerable:!0},observableModuleConfig:{get:function(){return this._getObservableModuleConfig()},enumerable:!0}}),r=new n.Router("root",void 0,void 0),n.Router.prototype.getChildRouter=function(e){var t;if(e&&"string"==typeof e){var i=e.trim();i.length>0&&this._childRouters.every(function(e){return e._name!==i||(t=e,!1)})}return t},n.Router.prototype.getCurrentChildRouter=function(){return S(this,y(this._stateId()||this._defaultStateId))},n.Router.prototype.createChildRouter=function(e,t){var i;n.Assert.assertString(e);for(var o=t||y(this._stateId()),s=encodeURIComponent(e.trim()),r=0;r<this._childRouters.length;r++){var a=this._childRouters[r];if(a._name===s)throw new Error('Invalid router name "'+s+'", it already exists.');if(a._parentState===o)throw new Error('Cannot create more than one child router for parent state id "'+a._parentState+'".')}return i=new n.Router(s,this,o),this._childRouters.push(i),i},n.Router.prototype.stateFromIdCallback=function(e){return function(e,t){var i;return t&&e._states&&(n.Assert.assertString(t),e._states.every(function(e){return e._id!==t||(i=e,!1)})),i}(this,e)},n.Router.prototype.configure=function(e){return this._stateId(void 0),delete this._defaultStateId,this._navigationType=void 0,this._navHistory=[],"function"==typeof e?(this._states=null,this.stateFromIdCallback=e):(this._states=[],delete this.stateFromIdCallback,Object.keys(e).forEach(function(t){var i=e[t];this._states.push(new n.RouterState(t,i,this)),"boolean"==typeof i.isDefault&&i.isDefault&&(this._defaultStateId=t)},this)),this},n.Router.prototype.getState=function(e){return this.stateFromIdCallback(e)},n.Router.prototype.go=function(e,t){F();var i=t||{};return Array.isArray(e)&&(e=e.map(V).join("/")),U({router:this,path:e,origin:"go",historyUpdate:i.historyUpdate})},n.Router.prototype._go=function(t){var n,s,r=!0,a=t.path,l=!1,u=!1;switch(t.historyUpdate){case"skip":u=!0;break;case"replace":l=!0}if(a){if("string"!=typeof a)return Promise.reject(new Error("Invalid object type for state id."));r=!1}if(r&&!(a=this._defaultStateId))return e.info(function(){return"Undefined state id with no default id on router "+C(this)}),Promise.resolve(p);if("/"===a.charAt(0))s=a;else{if(!(s=function e(t){var i;if(t){if(i=e(t._parentRouter)){var n=t._stateId();n?i+=n+"/":i=void 0}}else i="/";return i}(this._parentRouter)))return Promise.reject(new Error('Invalid path "'+a+'". The parent router does not have a current state.'));s+=a}e.info("Destination path: %s",s);try{n=R(n=function(e,t){var i,n,s,r,a=[],l=[],u=e,d=v(t),h=0;for(d.splice(0,1);u;)l.unshift(u),u=u._parentRouter;for(var c=d.shift();c;c=d.shift())if(s&&(s._paramOrder[h]?(r.addParameter(c),h+=1):h=0),!s||0===h){if(!(u=l.shift())&&!(u=I(i,c,n)))return o=t,a;if(!(s=(r=new w(u,c)).getState()))throw new Error('Invalid path "'+t+'". State id "'+c+'" does not exist on router "'+u._name+'".');a.push(r),i=u,n=c}return a}(this,s))}catch(e){return Promise.reject(e)}var d=E(n);return l||d.length>0?(e.info("Deferred mode or new state is different."),N(this).then(function(t){return t?P(d).then(j).then(function(t){if(t[c])if(u)e.info("Skip history update.");else{var o=i.buildUrlFromStates(n);e.info("%s URL to %s",l?"Replacing":"Pushing",o),window.history[l?"replaceState":"pushState"](null,"",o)}return t}):Promise.resolve(p)})):Promise.resolve(p)},n.Router.prototype.store=function(e){this._extra=e;for(var t,i={},n=this;n;)void 0!==n._extra&&(i[n._name]=n._extra),n=n._parentRouter;for(n=this;n;){for(var o=0;o<n._childRouters.length;o++){var s=n._childRouters[o],r=y(n._stateId());if(r&&r===s._parentState){void 0!==s._extra&&(i[s._name]=s._extra),t=s;break}}n=t,t=void 0}window.history.replaceState(null,"",b({},i))},n.Router.prototype.retrieve=function(){return this._extra},n.Router.prototype.dispose=function(){for(;this._childRouters.length>0;)this._childRouters[0].dispose();if(this._parentRouter){for(var e=this._parentRouter._childRouters,o=0;o<e.length;o++)if(e[o]._name===this._name){e.splice(o,1);break}delete this._parentState}else a="/",i=null,this._name="root",window.document.title=t,window.removeEventListener(h,B),n.Router._transitionedToState.removeAll(),_=!1;delete this._navigationType,this._navHistory=[],this._states=null,delete this._defaultStateId,delete this._extra},n.Router._transitionedToState=new signals.Signal,n.Router._updating=!1,Object.defineProperties(n.Router,{rootInstance:{value:r,enumerable:!0},transitionedToState:{value:n.Router._transitionedToState,enumerable:!0}}),n.Router.defaults={},Object.defineProperties(n.Router.defaults,{urlAdapter:{get:function(){return i||(i=new n.Router.urlPathAdapter),i},set:function(e){if(_)throw new Error("Incorrect operation. Cannot change URL adapter after calling sync() or go().");i=e},enumerable:!0,readonly:!1},baseUrl:{get:function(){return a},set:function(e){if(_)throw new Error("Incorrect operation. Cannot change base URL after calling sync() or go().");a=e?e.match(/[^?#]+/)[0]:"/"},enumerable:!0,readonly:!1},rootInstanceName:{get:function(){return r._name},set:function(e){if(_)throw new Error("Incorrect operation. Cannot change the name of the root instance after calling sync() or go().");n.Assert.assertString(e),r._name=encodeURIComponent(e.trim())},enumerable:!0,readonly:!1}}),n.Router.sync=function(){var t={router:r,origin:"sync"};return F(),e.info("Entering sync with URL: %s",g.href),o?(t.path=o,t.deferredHandling=!0,t.historyUpdate="replace",o=void 0,U(t)):n.Router._updating?(e.info("Sync called while updating, waiting for updates to end."),new Promise(function(t){n.Router._transitionedToState.addOnce(function(i){e.info("Sync updates done."),t(i)})})):U(t)},n.Router.urlPathAdapter=function(){var t="";this.init=function(e){var i=document.createElement("a");i.href=e;var n=i.pathname;"/"!==(n=n.replace(/^([^/])/,"/$1")).slice(-1)&&(n+="/"),t=n},this.parse=function(){var i=r,n=g.pathname.replace(t,""),o=v(decodeURIComponent(n)).map(G),s=[];for(e.info("Parsing: %s",n);i;){var a=o.shift();if(!a)break;var u=new w(i,a),d=u.getState();d&&d._paramOrder.forEach(function(){u.addParameter(o.shift())}),s.push(u),i=S(i,a)}s=R(s);var h=g.search.split(l+"=")[1];return h&&(h=h.split("&")[0])&&s.forEach(T,A(h)),s},this.buildUrlFromStates=function(e){for(var i=!1,n="",o={},s=e.pop();s;s=e.pop())s.value&&(i||s.value!==s.router._defaultStateId)&&(n=n?s.value+"/"+n:s.value,i=!0),void 0!==s.router._extra&&(o[s.router._name]=s.router._extra);return b({pathname:t+n},o)}},n.Router.urlParamAdapter=function(){this.init=function(){},this.parse=function(){var t=g.search,i=function(e){var t={},i=e.split("?")[1];return i&&i.split("&").forEach(function(e){var i=e.split(/=(.+)?/),n=i[0];if(n.length){var o=i[1]&&decodeURIComponent(i[1]);t[n]=o}}),t}(t),n=r,o=[];for(e.info("Parsing: %s",t);n;){var s=i[n._name]||n._defaultStateId,a=v(s),u=new w(n,s=a.shift());if(s){var d=u.getState();d&&d._paramOrder.forEach(function(){u.addParameter(a.shift())}),o.push(u)}n=S(n,s)}o=R(o);var h=i[l];return h&&o.forEach(T,A(h)),o},this.buildUrlFromStates=function(e){for(var t=!1,i="",n={},o=e.pop();o;o=e.pop()){if(o.value&&(t||o.value!==o.router._defaultStateId)){var s="&"+o.router._name+"=",r=o.value;i=s+encodeURIComponent(r)+i,t=!0}void 0!==o.router._extra&&(n[o.router._name]=o.router._extra)}return i&&(i="?"+i.substr(1)),b({search:i},n)}}}();var ni;n.Router;!function(){var e,t=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$";n.LZString={compressToEncodedURIComponent:function(e){return null===e?"":function(e,t,i){if(null===e)return"";for(var n,o,s={},r={},a="",l=2,u=3,d=2,h="",c=0,p=0,_=e.length,m=0;m<_;m++){var g=e[m];Object.prototype.hasOwnProperty.call(s,g)||(s[g]=u,u+=1,r[g]=!0);var f=a+g;if(Object.prototype.hasOwnProperty.call(s,f))a=f;else{if(Object.prototype.hasOwnProperty.call(r,a)){if(a.charCodeAt(0)<256){for(n=d;n--;)c<<=1,p===t-1?(p=0,h+=i(c),c=0):p+=1;for(o=a.charCodeAt(0),n=8;n--;)c=c<<1|1&o,p===t-1?(p=0,h+=i(c),c=0):p+=1,o>>=1}else{for(o=1,n=d;n--;)c=c<<1|o,p===t-1?(p=0,h+=i(c),c=0):p+=1,o=0;for(o=a.charCodeAt(0),n=16;n--;)c=c<<1|1&o,p===t-1?(p=0,h+=i(c),c=0):p+=1,o>>=1}0===(l-=1)&&(l=Math.pow(2,d),d+=1),delete r[a]}else for(o=s[a],n=d;n--;)c=c<<1|1&o,p===t-1?(p=0,h+=i(c),c=0):p+=1,o>>=1;0===(l-=1)&&(l=Math.pow(2,d),d+=1),s[f]=u,u+=1,a=String(g)}}if(""!==a){if(Object.prototype.hasOwnProperty.call(r,a)){if(a.charCodeAt(0)<256){for(n=d;n--;)c<<=1,p===t-1?(p=0,h+=i(c),c=0):p+=1;for(o=a.charCodeAt(0),n=8;n--;)c=c<<1|1&o,p===t-1?(p=0,h+=i(c),c=0):p+=1,o>>=1}else{for(o=1,n=d;n--;)c=c<<1|o,p===t-1?(p=0,h+=i(c),c=0):p+=1,o=0;for(o=a.charCodeAt(0),n=16;n--;)c=c<<1|1&o,p===t-1?(p=0,h+=i(c),c=0):p+=1,o>>=1}0===(l-=1)&&(l=Math.pow(2,d),d+=1),delete r[a]}else for(o=s[a],n=d;n--;)c=c<<1|1&o,p===t-1?(p=0,h+=i(c),c=0):p+=1,o>>=1;0===(l-=1)&&(l=Math.pow(2,d),d+=1)}for(o=2,n=d;n--;)c=c<<1|1&o,p===t-1?(p=0,h+=i(c),c=0):p+=1,o>>=1;for(;;){if(c<<=1,p===t-1){h+=i(c);break}p+=1}return h}(e,6,function(e){return i.charAt(e)})},decompressFromEncodedURIComponent:function(n){return null===n?"":""===n?null:function(e,i,n){for(var o,s,r=[],a=4,l=4,u=3,d="",h="",c={val:n(0),position:i,index:1},p=0;p<3;p+=1)r[p]=p;var _=0,m=Math.pow(2,2),g=1;for(;g!==m;)o=c.val&c.position,c.position>>=1,0===c.position&&(c.position=i,c.val=n(c.index),c.index+=1),_|=(o>0?1:0)*g,g<<=1;switch(_){case 0:for(_=0,m=Math.pow(2,8),g=1;g!==m;)o=c.val&c.position,c.position>>=1,0===c.position&&(c.position=i,c.val=n(c.index),c.index+=1),_|=(o>0?1:0)*g,g<<=1;s=t(_);break;case 1:for(_=0,m=Math.pow(2,16),g=1;g!==m;)o=c.val&c.position,c.position>>=1,0===c.position&&(c.position=i,c.val=n(c.index),c.index+=1),_|=(o>0?1:0)*g,g<<=1;s=t(_);break;case 2:return""}r[3]=s;var f=s;for(h=s;;){if(c.index>e)return"";for(_=0,m=Math.pow(2,u),g=1;g!==m;)o=c.val&c.position,c.position>>=1,0===c.position&&(c.position=i,c.val=n(c.index),c.index+=1),_|=(o>0?1:0)*g,g<<=1;switch(s=_){case 0:for(_=0,m=Math.pow(2,8),g=1;g!==m;)o=c.val&c.position,c.position>>=1,0===c.position&&(c.position=i,c.val=n(c.index),c.index+=1),_|=(o>0?1:0)*g,g<<=1;r[l]=t(_),s=(l+=1)-1,a-=1;break;case 1:for(_=0,m=Math.pow(2,16),g=1;g!==m;)o=c.val&c.position,c.position>>=1,0===c.position&&(c.position=i,c.val=n(c.index),c.index+=1),_|=(o>0?1:0)*g,g<<=1;r[l]=t(_),s=(l+=1)-1,a-=1;break;case 2:return h}if(0===a&&(a=Math.pow(2,u),u+=1),r[s])d=r[s];else{if(s!==l)return null;d=f+f[0]}h+=d,r[l]=f+d[0],l+=1,f=d,0===(a-=1)&&(a=Math.pow(2,u),u+=1)}}(n.length,32,function(t){return function(t,i){var n;e||(e={});if(!e[t])for(e[t]={},n=0;n<t.length;n++)e[t][t[n]]=n;return e[t][i]}(i,n.charAt(t))})}}}(),ni=/^{(\w+)}$/,n.RouterState=function(e,t,i){t=t||{},n.Assert.assertString(e);var o=(e=e.trim()).split("/");this._id=o.shift(),this._parameters={},this._paramOrder=new Array(o.length),o.forEach(function(e,t){var i=e.match(ni);if(i){var n=i[1];this._parameters[n]=null,this._paramOrder[t]=n}},this),this._canEnter=t.canEnter,this._canEnter&&n.Assert.assertFunctionOrNull(this._canEnter),this._enter=t.enter,this._enter&&n.Assert.assertFunctionOrNull(this._enter),this._canExit=t.canExit,this._canExit&&n.Assert.assertFunctionOrNull(this._canExit),this._exit=t.exit,this._exit&&n.Assert.assertFunctionOrNull(this._exit),this._value=t.value,this._label=t.label,this._title=t.title,this._router=i,this.viewModel=void 0,Object.defineProperties(this,{id:{value:this._id,enumerable:!0},value:{get:function(){return this._value},set:function(e){this._value=e},enumerable:!0},label:{get:function(){return this._label},set:function(e){this._label=e},enumerable:!0},title:{get:function(){return this._title},set:function(e){this._title=e},enumerable:!0},canEnter:{get:function(){return this._canEnter},set:function(e){this._canEnter=e},enumerable:!0},enter:{get:function(){return this._enter},set:function(e){this._enter=e},enumerable:!0},canExit:{get:function(){return this._canExit},set:function(e){this._canExit=e},enumerable:!0},exit:{get:function(){return this._exit},set:function(e){this._exit=e},enumerable:!0},parameters:{get:function(){return this._parameters},enumerable:!0}})},n.RouterState.prototype.go=function(){return this._router?this._router.go(this._id):(n.Router._transitionedToState.dispatch({hasChanged:!1}),Promise.reject(new Error("Router is not defined for this RouterState object.")))},n.RouterState.prototype.isCurrent=function(){if(!this._router)throw new Error("Router is not defined for this RouterState object.");return this._router._stateId()===this._id},n.Cube=function(e,t){this.Init(),this._rows=e,this._layout=t,this.BuildCube()},n.Object.createSubclass(n.Cube,n.Object,"oj.Cube"),n.Cube.prototype.Init=function(){n.Cube.superclass.Init.call(this)},n.Cube.prototype.getAxes=function(){var e=this._getPinnedCube(),t=[];Array.prototype.push.apply(t,e?e.getAxes():this._axes);for(var i=2;i<this._axes.length;i++)t.push(this._axes[i]);return t},n.Cube.prototype.getValues=function(e){for(var t=this._getPinnedCube(),i=t._normalizeIndices(e),n=t._walkIndex(i,0,[],[]),o=n;Array.isArray(o)&&1===o.length;)if(o=o[0],!Array.isArray(o))return o;return n},n.Cube.prototype.setPage=function(e){e instanceof Array?this._pin=e:this._pin=[e]},n.Cube.prototype.pivot=function(e,t,i,o,s){var r=this._layout,a=this._findAxisInLayout(e);if(!a)return!1;var l=null;i<r.length?l=this._findAxisInLayout(i):(l={axis:i,levels:[]},r.push(l));var u=a.levels,d=l.levels,h=t<u.length?u[t]:null;return!!h&&(o>=d.length?(d.push(h),u.splice(t,1)):s===n.Cube.PivotType.SWAP?(u[t]=d[o],d[o]=h):(s===n.Cube.PivotType.AFTER&&(o+=1),d.splice(o,0,h),d===u&&o<t&&(t+=1),u.splice(t,1)),this.BuildCube(),!0)},n.Cube.prototype._findAxisInLayout=function(e){for(var t=0;t<this._layout.length;t++)if(this._layout[t].axis===e)return this._layout[t];return null},n.Cube.prototype.getLayout=function(){return this._layout},n.Cube.PivotType={BEFORE:"before",AFTER:"after",SWAP:"swap"},n.Cube.prototype._walkIndex=function(e,t,i,n){if(0===e.length){var o=i.slice(0);return this._getValue(o)}var s=e.slice(1),r=e[0].start,a=e[0].count;for(i[t]=r;i[t]<r+a;i[t]++)n.push(this._walkIndex(s,t+1,i,[]));return n},n.Cube.prototype._normalizeIndices=function(e){var t=[];if(!e)return t;for(var i=Math.min(e.length,this._axes.length),n=0;n<i;n++){var o=e[n],s=Object.prototype.hasOwnProperty;o instanceof Object&&(s.call(o,"start")||s.call(o,"count"))?s.call(o,"start")?s.call(o,"count")?t.push(this._generateIndex(o.start,o.count,n)):t.push(this._generateIndex(o.start,1,n)):t.push(this._generateIndex(0,o.count,n)):t.push(this._generateIndex(o,1,n))}return t},n.Cube.prototype._generateIndex=function(e,t,i){var n=this.getAxes()[i].getExtent();return(e>=n||e<0)&&(e=0),{start:e,index:e,count:t=Math.min(t,n-e)}},n.Cube.prototype._getValue=function(e){var t=this._createCubeKeys(e);if(t){var i=t.GetHashCodes();if(i.length>0){var o=this._data[i[0].key];if(o)return new n.CubeDataValue(o.value,e,o.aggType,o.rows,o.square)}}return new n.CubeDataValue(null,e,void 0,[])},n.Cube.prototype.GenerateAxes=function(){var e,t=this._getPageLayout();for(this._pin=[],e=0;e<t.length;e++)this._getAxis(t[e].axis,t[e].levels),this._pin.push({axis:t[e].axis,index:0});if(0===t.length){var i=this._getNonPageLayout();for(e=0;e<i.length;e++)this._getAxis(i[e].axis,i[e].levels)}},n.Cube.prototype._getPageLayout=function(){for(var e=[],t=0;t<this._layout.length;t++){this._layout[t].axis>1&&e.push(this._layout[t])}return e},n.Cube.prototype._getNonPageLayout=function(){for(var e=[],t=0;t<this._layout.length;t++){this._layout[t].axis<2&&e.push(this._layout[t])}return e},n.Cube.prototype.BuildCube=function(){if(this._axes=[],this._data=[],this._cubes=[],this.GenerateAxes(),null!==this._rows)for(var e=0;e<this._rows.length;e++){var t,i=new n.CubeKeys;for(t=2;t<this._axes.length;t++)i=this._axes[t].ProcessRow(this._rows[e],i);for(var o=i.GetHashCodes(),s=0;s<o.length;s++){var r=o[s].key,a=this._cubes[r];a||(a=this.GenerateCube(this._getNonPageLayout()),this._cubes[r]=a);var l=new n.CubeKeys,u=a._axes.length;for(t=0;t<u;t++)l=a._axes[t].ProcessRow(this._rows[e],l);var d=l.GetHashCodes(),h=d;if(void 0!==o[s].dataValue){h=[];for(var c=0;c<d.length;c++)h.push(o[s])}a._storeData(d,h,this._rows[e])}}},n.Cube.prototype._storeData=function(e,t,i){for(var n=0;n<e.length;n++)this._data[e[n].key]=this._aggregate(t[n],this._data[e[n].key],i)},n.Cube.prototype._getPinnedCube=function(){return this._cubes[this._getHashFromPin(this._pin)]},n.Cube.prototype._getHashFromPin=function(e){var t=new n.CubeKeys;if(e&&e.length>0){e.sort(function(e,t){return e.axis-t.axis});for(var i=this._axes,o=0;o<e.length;o++)t=i[e[o].axis].GetCubeKeys(e[o].index,t)}return t.GetHashCodes()[0].key},n.Cube._isValid=function(e){return!!e&&(void 0!==e.value&&null!==e.value)},n.Cube.prototype._createAggValue=function(e,t,i,n,o){i.push(n);for(var s={},r=Object.keys(o),a=0;a<r.length;a++){var l=r[a];s[l]=o[l]}return s.value=e,s.aggType=t,s.rows=i,s},n.Cube._isNumber=function(e){return!n.StringUtils.isString(e.value)&&!isNaN(e.value)},n.Cube.prototype._aggregate=function(e,t,i){var o=this.GetAggType(e.dataValue),s=o.aggregation,r=n.Cube._isValid(t),a=n.Cube._isValid(e),l=r&&n.Cube._isNumber(t),u=a&&n.Cube._isNumber(e);switch(s){case n.CubeAggType.SUM:return r&&a?l&&u?this._createAggValue(t.value+e.value,s,t.rows,i,{}):this._createAggValue(NaN,s,t.rows,i,{}):a&&!r?u?this._createAggValue(e.value,s,[],i,{}):this._createAggValue(NaN,s,[],i,{}):t;case n.CubeAggType.AVERAGE:return r&&a?l&&u?this._createAggValue((t.sum+e.value)/(t.rows.length+1),s,t.rows,i,{sum:t.sum+e.value}):this._createAggValue(NaN,s,t.rows,i,{sum:t.sum}):a&&!r?u?this._createAggValue(e.value,s,[],i,{sum:e.value}):this._createAggValue(NaN,s,[],i,{sum:NaN}):t;case n.CubeAggType.VARIANCE:case n.CubeAggType.STDDEV:if(r&&a){if(l&&u){var d=t.rows.length+1,h=t.value+(e.value-t.value)/d;return this._createAggValue(h,s,t.rows,i,{square:t.square+(e.value-t.value)*(e.value-h)})}return this._createAggValue(NaN,s,t.rows,i,{square:NaN})}return a&&!r?u?this._createAggValue(e.value,s,[],i,{square:0}):this._createAggValue(NaN,s,[],i,{square:NaN}):t;case n.CubeAggType.NONE:return this._createAggValue(null,s,r?t.rows:[],i,{});case n.CubeAggType.FIRST:return r?this._createAggValue(t.value,s,t.rows,i,{}):a?this._createAggValue(e.value,s,[],i,{}):t;case n.CubeAggType.MIN:return r&&a?l&&u?this._createAggValue(Math.min(t.value,e.value),s,t.rows,i,{}):this._createAggValue(NaN,s,t.rows,i,{}):a&&!r?u?this._createAggValue(e.value,s,[],i,{}):this._createAggValue(NaN,s,[],i,{}):t;case n.CubeAggType.MAX:return r&&a?l&&u?this._createAggValue(Math.max(t.value,e.value),s,t.rows,i,{}):this._createAggValue(NaN,s,t.rows,i,{}):a&&!r?u?this._createAggValue(e.value,s,[],i,{}):this._createAggValue(NaN,s,[],i,{}):t;case n.CubeAggType.COUNT:return r&&a?this._createAggValue(t.value+1,s,t.rows,i,{}):a&&!r?this._createAggValue(1,s,[],i,{}):t;case n.CubeAggType.CUSTOM:var c=o.callback.call(this,r?t.value:void 0,a?e.value:void 0);return this._createAggValue(c,s,r?t.rows:[],i,{});default:return}},n.Cube.prototype._getAxis=function(e,t){if(e>=this._axes.length){var i=new Array(e-this._axes.length+1);Array.prototype.push.apply(this._axes,i)}return this._axes[e]||(this._axes[e]=new n.CubeAxis(t,e,this)),this._axes[e]},n.Cube.prototype._createCubeKeys=function(e){for(var t=this.getAxes(),i=new n.CubeKeys,o=0;o<e.length;o++)i=t[o].GetCubeKeys(e[o],i);return i},n.Cube.prototype.ProcessLevel=function(e,t,i,o,s,r){n.Assert.failedInAbstractFunction()},n.Cube.prototype.GenerateCube=function(e){n.Assert.failedInAbstractFunction()},n.Cube.prototype.GenerateLevel=function(e,t){n.Assert.failedInAbstractFunction()},n.Cube.prototype.GetAggType=function(e){return n.Assert.failedInAbstractFunction(),{}},n.CubeAggType={SUM:"sum",AVERAGE:"avg",STDDEV:"stddev",VARIANCE:"variance",NONE:"none",FIRST:"first",MIN:"min",MAX:"max",COUNT:"count",CUSTOM:"custom"},n.CubeAxisValue=function(e,t,i,n){this.Init(),this._children=[],this._parent=n,this._cubeLevel=i,this._data={},this._data.value=e,this._data.label=t},n.Object.createSubclass(n.CubeAxisValue,n.Object,"oj.CubeAxisValue"),n.CubeAxisValue.prototype.Init=function(){n.CubeAxisValue.superclass.Init.call(this)},n.CubeAxisValue.prototype.getLevel=function(){return this._cubeLevel},n.CubeAxisValue.prototype.getDepth=function(){return 1},n.CubeAxisValue.prototype.getParents=function(){for(var e=[],t=this._parent;t&&t._parent;)e.unshift(t),t=t._parent;return e},n.CubeAxisValue.prototype.getChildren=function(){return this._children},n.CubeAxisValue.prototype.getExtent=function(){if(this._extent>-1)return this._extent;if(this._children&&0!==this._children.length){this._extent=0;for(var e=0;e<this.getChildren().length;e++)this._extent+=this.getChildren()[e].getExtent()}else this._extent=1;return this._extent},n.CubeAxisValue.prototype.getStart=function(){if(this._start>-1)return this._start;if(!this._parent)return 0;for(var e=this._parent.getStart(),t=this._parent._getPrevChild(this);t;)e+=t.getExtent(),t=this._parent._getPrevChild(t);return this._start=e,e},n.CubeAxisValue.prototype.getValue=function(){return this._data.value},n.CubeAxisValue.prototype.getLabel=function(){if(this._data.label)return this._data.label;var e=this.getValue();return e?e.toString():null},n.CubeAxisValue.prototype.GetChild=function(e){var t=this._getChildLevel();if(null===t)return null;if(t.isDataValue())return this._getDataValueChild(e);var i=e[t.attribute];if(i)for(var n=0;n<this._children.length;n++)if(this._children[n].getValue()===i)return this._children[n];return null},n.CubeAxisValue.prototype._getDataValueChild=function(e){for(var t=0;t<this._children.length;t++){var i=this._children[t].getValue();if(Object.prototype.hasOwnProperty.call(e,i)&&e[i]===i)return this._children[t]}return null},n.CubeAxisValue.prototype._getChildLevel=function(){return this._children&&this._children.length>0?this._children[0].getLevel():null},n.CubeAxisValue.prototype.GetChildAt=function(e){return this._findChild(e,0,this._children.length-1)},n.CubeAxisValue.prototype._findChild=function(e,t,i){if(t>i)return null;var n=Math.floor((t+i)/2),o=this._children[n],s=o.getStart();return s>e?this._findChild(e,t,n-1):s+(o.getExtent()-1)<e?this._findChild(e,n+1,i):o},n.CubeAxisValue.prototype.AddNode=function(e,t,i){for(var o=0;o<this._children.length;o++)if(this._children[o].getValue()===e)return this._children[o];var s=new n.CubeAxisValue(e,t,i,this);return this._children.push(s),s},n.CubeAxisValue.prototype.GetHashCode=function(){var e={};return e[this.getLevel().attribute]=this.getValue(),e},n.CubeAxisValue.prototype._getPrevChild=function(e){for(var t=0;t<this._children.length;t++)if(this._children[t]===e)return t>0?this._children[t-1]:null;return null},n.CubeAxis=function(e,t,i){this.Init(),this.axis=t,this._levels=[];for(var o=0;o<e.length;o++)this._levels.push(i.GenerateLevel(e[o],this));this._cube=i,this._values=new n.CubeAxisValue(null,null,null,null)},n.Object.createSubclass(n.CubeAxis,n.Object,"oj.CubeAxis"),n.CubeAxis.prototype.Init=function(){n.CubeAxis.superclass.Init.call(this)},n.CubeAxis.prototype.getLevels=function(){return this._levels},n.CubeAxis.prototype.getExtent=function(){return this._values.getExtent()},n.CubeAxis.prototype.getValues=function(e){for(var t=[],i=this._values;i;)(i=i.GetChildAt(e))&&t.push(i);return t},n.CubeAxis.prototype.getIndex=function(e){for(var t=e?JSON.parse(e):{},i=this._values,n=null;i;)n=i,i=i.GetChild(t);return n?n.getStart():-1},n.CubeAxis.prototype.axis=void 0,n.CubeAxis.prototype.GetCubeKeys=function(e,t){return this.GetPartialCubeKeys(e,this.getLevels().length-1,t)},n.CubeAxis.prototype.GetPartialCubeKeys=function(e,t,i){for(var n=this.getValues(e),o=this.getLevels()[t],s=0;s<n.length;s++){var r=n[s];if(r.getLevel().isDataValue()?i.AddDataValue(r.getValue()):i.UpdateKeys(r),r.getLevel()===o)break}return i},n.CubeAxis.prototype.ProcessRow=function(e,t){return this._cube.ProcessLevel(this,0,this._values,e,t,!0)},n.CubeCellSet=function(e,t){var i=t.row?t.row.start:0,o=t.row?t.row.count:0,s=t.column?t.column.start:0,r=t.column?t.column.count:0;n.Assert.assertNumber(i,null),n.Assert.assertNumber(o,null),n.Assert.assertNumber(s,null),n.Assert.assertNumber(r,null),this._cube=e,this._starts={row:i,column:s},this._values=this._cube.getValues([{start:s,count:r},{start:i,count:o}]);var a=Array.isArray(this._values);(r=a?this._values.length:1)>0&&(o=a?this._values[0].length:1),this._counts={row:o,column:r}},n.CubeCellSet.prototype.getData=function(e){var t=e.row,i=e.column,n=Array.isArray(this._values)?this._values[i-this._starts.column][t-this._starts.row]:this._values;return n?n.getValue():null},n.CubeCellSet.prototype.getMetadata=function(e){var t={keys:{}};return t.keys.row=this._getAxisMetadata(e,"row",2),t.keys.column=this._getAxisMetadata(e,"column",1),t},n.CubeCellSet.prototype._getAxisMetadata=function(e,t,i){var o=this._cube.getAxes();if(void 0!==e[t]&&o.length>=i){var s=new n.CubeKeys;return(s=o[n.CubeDataGridDataSource._convertAxes(t)].GetCubeKeys(e[t],s)).GetHashCodes()[0].key}return null},n.CubeCellSet.prototype.getStart=function(e){return this._starts[e]},n.CubeCellSet.prototype.getCount=function(e){return this._counts[e]},n.CubeCellSet.prototype.getExtent=function(e){return{row:{extent:1,more:{before:!1,after:!1}},column:{extent:1,more:{before:!1,after:!1}}}},n.CubeDataGridDataSource=function(e){n.CubeDataGridDataSource.superclass.constructor.call(this,e)},n.Object.createSubclass(n.CubeDataGridDataSource,n.DataGridDataSource,"oj.CubeDataGridDataSource"),n.CubeDataGridDataSource.prototype.setCube=function(e){this.data=e,this._fireRefresh()},n.CubeDataGridDataSource.prototype.setPage=function(e){this.data.setPage(e),this._fireRefresh()},n.CubeDataGridDataSource.prototype._fireRefresh=function(){var e={};e.source=this,e.operation="refresh",this.handleEvent("change",e)},n.CubeDataGridDataSource.prototype.getCount=function(e){var t=this._getAxis(e);return t?t.getExtent():0},n.CubeDataGridDataSource.prototype.getCountPrecision=function(e){return"exact"},n.CubeDataGridDataSource.prototype.fetchHeaders=function(e,t,i){var o=new n.CubeHeaderSet(this._getAxis(e.axis),this.data,e.start,e.count);t.success.call(i?i.success:void 0,o,e)},n.CubeDataGridDataSource.prototype.fetchCells=function(e,t,i){for(var o={},s=0;s<e.length;s++){var r,a=void 0===e[s].start?0:e[s].start;"row"===e[s].axis&&(r=void 0===e[s].count?this.data.getAxes()[1].getExtent():e[s].count,o.row={start:a,count:r}),"column"===e[s].axis&&(r=void 0===e[s].count?this.data.getAxes()[0].getExtent():e[s].count,o.column={start:a,count:r})}var l=new n.CubeCellSet(this.data,o);t.success.call(i?i.success:void 0,l,e)},n.CubeDataGridDataSource.prototype.keys=function(e){var t={};return t=this._getKey(e,"row",t),t=this._getKey(e,"column",t),Promise.resolve(t)},n.CubeDataGridDataSource.prototype._getKey=function(e,t,i){var o=this._getAxis(t),s=e[t],r=new n.CubeKeys;return r=o?o.GetCubeKeys(s,r):"",i[t]=r.GetHashCodes()[0].key,i},n.CubeDataGridDataSource.prototype.indexes=function(e){var t={};return t=this._getIndex(e,"row",t),t=this._getIndex(e,"column",t),Promise.resolve(t)},n.CubeDataGridDataSource.prototype._getIndex=function(e,t,i){return i[t]=this._getAxis(t).getIndex(e[t]),i},n.CubeDataGridDataSource.prototype.sort=function(e,t,i){n.Assert.failedInAbstractFunction()},n.CubeDataGridDataSource.prototype.move=function(e,t,i,o,s){n.Assert.failedInAbstractFunction()},n.CubeDataGridDataSource.prototype.moveOK=function(e,t,i){return"invalid"},n.CubeDataGridDataSource.prototype.getCapability=function(e){switch(e){case"sort":case"move":return"none";default:return null}},n.CubeDataGridDataSource._convertAxes=function(e){return"row"===e?1:0},n.CubeDataGridDataSource.prototype._getAxis=function(e){var t=n.CubeDataGridDataSource._convertAxes(e),i=this.data.getAxes();return i.length>t?i[t]:null},n.CubeDataValue=function(e,t,i,n,o){this.Init(),this._data={},this._data.value=e,this._data.indices=t,this._data.aggType=i,this._data.rows=n,this._data.square=o},n.Object.createSubclass(n.CubeDataValue,n.Object,"oj.CubeDataValue"),n.CubeDataValue.prototype.Init=function(){n.CubeDataValue.superclass.Init.call(this)},n.CubeDataValue.prototype.getValue=function(){switch(this._data.aggType){case n.CubeAggType.STDDEV:return Math.sqrt(this._getVariance());case n.CubeAggType.VARIANCE:return this._getVariance();default:return this._data.value}},n.CubeDataValue.prototype.getIndices=function(){return this._data.indices},n.CubeDataValue.prototype.getRows=function(){return this._data.rows},n.CubeDataValue.prototype.getAggregation=function(){return this._data.aggType},n.CubeDataValue.prototype._getVariance=function(){if(isNaN(this._data.square))return NaN;var e=this._data.rows.length;return e>1?this._data.square/(e-1):0},n.CubeHeaderSet=function(e,t,i,n){this._cube=t,this._axis=e,this._start=void 0===i?0:i,this._count=void 0===n?this._axis.getExtent():Math.min(n,this._axis.getExtent()-i),this._end=i+(n-1)},n.CubeHeaderSet.prototype.getData=function(e,t){var i=this._getValue(e,t);return i?i.getLabel():null},n.CubeHeaderSet.prototype.getMetadata=function(e,t){var i=new n.CubeKeys,o=(i=this._axis.GetPartialCubeKeys(e,t,i)).GetHashCodes();return o&&o.length>0?{key:o[0].key}:null},n.CubeHeaderSet.prototype.getLevelCount=function(){return this._axis.getLevels().length},n.CubeHeaderSet.prototype.getExtent=function(e,t){var i=this._getValue(e,t),n=i.getExtent(),o=i.getStart(),s=o+(n-1),r=e>o,a=e<o+(n-1);return o<this._start&&(n-=this._start-o),s>this._end&&(n-=s-this._end),{extent:n,more:{before:r,after:a}}},n.CubeHeaderSet.prototype.getDepth=function(e,t){return this._getValue(e,t).getDepth()},n.CubeHeaderSet.prototype.getCount=function(){return this._count},n.CubeHeaderSet.prototype.getStart=function(){return this._start},n.CubeHeaderSet.prototype.getLabel=function(){return null},n.CubeHeaderSet.prototype._getValue=function(e,t){void 0===t&&(t=0);var i=this._axis.getValues(e);return i&&i.length>t?i[t]:null},n.CubeKeys=function(){this._key=[],this._data=[]},n.CubeKeys.prototype.UpdateKeys=function(e){this._key.push(e)},n.CubeKeys.prototype.AddDataValue=function(e,t){this._data.push({name:e,value:t})},n.CubeKeys.prototype.GetHashCodes=function(){var e=[],t=this._buildKeyHash();if(0===this._data.length)e.push({key:JSON.stringify(t)});else for(var i=0;i<this._data.length;i++){var n=$.extend(!0,{},t);n[this._data[i].name]=this._data[i].name,e.push({key:JSON.stringify(n),dataValue:this._data[i].name,value:this._data[i].value})}return e},n.CubeKeys.prototype._buildKeyHash=function(){for(var e={},t=0;t<this._key.length;t++)for(var i=this._key[t].GetHashCode(),n=Object.keys(i),o=0;o<n.length;o++){var s=n[o];e[s]=i[s]}return e},n.CubeLevel=function(e,t,i){this.Init(),this.attribute=e,this._axisObj=t,this.axis=t.axis,this._dataValue=i},n.Object.createSubclass(n.CubeLevel,n.Object,"oj.CubeLevel"),n.CubeLevel.prototype.Init=function(){n.CubeLevel.superclass.Init.call(this)},n.CubeLevel.prototype.attribute=void 0,n.CubeLevel.prototype.axis=void 0,n.CubeLevel.prototype.getValue=function(e){var t=this._axisObj.getValues(e);if(t)for(var i=0;i<t.length;i++)if(t[i].getLevel()===this)return t[i];return null},n.CubeLevel.prototype.isDataValue=function(){return this._dataValue},n.CubeLevel.prototype._dataValue=!1,n.CubeLevel.prototype._axisObj=null,n.DataColumnCube=function(e,t,i){this.Init(),this._dataValues=i,this._valueAttr=i.valueAttr,this._labelAttr=i.labelAttr;var o=i.defaultAggregation;this._defaultAggregation=o?n.DataColumnCube._getDefaultAgg(o):{aggregation:n.CubeAggType.SUM},this._aggregation=i.aggregation,this._buildAggTypeLookup(),n.DataColumnCube.superclass.constructor.call(this,e,t)},n.Object.createSubclass(n.DataColumnCube,n.Cube,"oj.DataColumnCube"),n.DataColumnCube.prototype.Init=function(){n.DataColumnCube.superclass.Init.call(this)},n.DataColumnCube.prototype.BuildCube=function(){n.DataColumnCube.superclass.BuildCube.call(this)},n.DataColumnCube.prototype.GetAggType=function(e){return this._dataValueAggType[e]?this._dataValueAggType[e]:this._defaultAggregation},n.DataColumnCube.prototype.GenerateCube=function(e){return new n.DataColumnCube(null,e,this._dataValues)},n.DataColumnCube.prototype.GenerateLevel=function(e,t){return e.attribute===this._labelAttr?new n.CubeLevel(e.attribute,t,!0):new n.CubeLevel(e.attribute,t,!1)},n.DataColumnCube.prototype.ProcessLevel=function(e,t,i,n,o,s){if(t>=e.getLevels().length)return o;var r=e.getLevels()[t],a=n[r.attribute],l=i.AddNode(a,null,r);return r.isDataValue()?o.AddDataValue(a,n[this._valueAttr]):o.UpdateKeys(l),this.ProcessLevel(e,t+1,l,n,o,s)},n.DataColumnCube._getDefaultAgg=function(e){return n.StringUtils.isString(e)?{aggregation:e}:{aggregation:e.aggregation,callback:e.callback}},n.DataColumnCube.prototype._buildAggTypeLookup=function(){if(this._dataValueAggType=[],this._aggregation)for(var e=0;e<this._aggregation.length;e++){var t=this._aggregation[e],i=t.aggregation;this._dataValueAggType[t.value]=i?{aggregation:i,callback:t.callback}:this._defaultAggregation}},n.DataValueAttributeCube=function(e,t,i){this.Init(),this._dataValues=i,this._aggTypeLookup=this._buildAggTypeLookup(),n.DataValueAttributeCube.superclass.constructor.call(this,e,t)},n.Object.createSubclass(n.DataValueAttributeCube,n.Cube,"oj.DataValueAttributeCube"),n.DataValueAttributeCube.prototype._rows=null,n.DataValueAttributeCube.prototype.Init=function(){n.DataValueAttributeCube.superclass.Init.call(this)},n.DataValueAttributeCube.prototype.BuildCube=function(){n.DataValueAttributeCube.superclass.BuildCube.call(this)},n.DataValueAttributeCube.prototype.GetAggType=function(e){return this._dataValueAggType[e]},n.DataValueAttributeCube.prototype.GenerateLevel=function(e,t){return e.dataValue?new n.CubeLevel(null,t,!0):new n.CubeLevel(e.attribute,t,!1)},n.DataValueAttributeCube.prototype.GenerateCube=function(e){return new n.DataValueAttributeCube(null,e,this._dataValues)},n.DataValueAttributeCube.prototype.ProcessLevel=function(e,t,i,n,o,s){if(t>=e.getLevels().length)return o;var r=e.getLevels()[t];if(r.isDataValue())return this._processDataValue(e,i,n,t,o);var a=n[r.attribute],l=i.AddNode(a,null,r);return s&&o.UpdateKeys(l),this.ProcessLevel(e,t+1,l,n,o,s)},n.DataValueAttributeCube.prototype._processDataValue=function(e,t,i,n,o){for(var s=!0,r=0;r<this._dataValues.length;r++){var a=this._dataValues[r].attribute,l=this._dataValues[r].label;if(Object.prototype.hasOwnProperty.call(i,a)){var u=t.AddNode(a,l,e.getLevels()[n]);o.AddDataValue(a,i[a]),this.ProcessLevel(e,n+1,u,i,o,s),s=!1}}return o},n.DataValueAttributeCube.prototype._buildAggTypeLookup=function(){this._dataValueAggType=[];for(var e=0;e<this._dataValues.length;e++){var t=this._dataValues[e],i=t.aggregation;this._dataValueAggType[t.attribute]=i?{aggregation:t.aggregation,callback:t.callback}:{aggregation:n.CubeAggType.SUM,callback:t.callback}}};var oi={};oi.Cube=n.Cube,oi.CubeAggType=n.CubeAggType,oi.CubeAxis=n.CubeAxis,oi.CubeAxisValue=n.CubeAxisValue,oi.CubeCellSet=n.CubeCellSet,oi.CubeDataGridDataSource=n.CubeDataGridDataSource,oi.CubeDataValue=n.CubeDataValue,oi.CubeHeaderSet=n.CubeHeaderSet,oi.CubeLevel=n.CubeLevel,oi.DataColumnCube=n.DataColumnCube,oi.DataValueAttributeCube=n.DataValueAttributeCube;var si={properties:{data:{type:"oj.IndexerModel"},translations:{type:"object",value:{},properties:{ariaDisabledLabel:{type:"string"},ariaInBetweenText:{type:"string"},ariaKeyboardInstructionText:{type:"string"},ariaOthersLabel:{type:"string"},ariaTouchInstructionText:{type:"string"},indexerCharacters:{type:"string"},indexerOthers:{type:"string"}}}},methods:{refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};n.IndexerModel=function(){},n.IndexerModel.SECTION_OTHERS={id:"__others__",label:v.getTranslatedString("oj-ojIndexer.indexerOthers")},n.ListViewIndexerModel=function(e){this.listview=e,this.Init()},n.Object.createSubclass(n.ListViewIndexerModel,n.EventSource,"oj.ListViewIndexerModel"),n.ListViewIndexerModel.prototype.getIndexableSections=function(){return this.listview.ojContext.getTranslatedString("indexerCharacters").split("|")},n.ListViewIndexerModel.prototype.getMissingSections=function(){return null==this.missingSections&&(this.missingSections=this._getMissingSections()),this.missingSections},n.ListViewIndexerModel.prototype._getMissingSections=function(){var e,t=[],i=this.listview._getGroupItemsCache(),n=this.getIndexableSections();for(e=0;e<n.length;e++){var o=n[e],s=!1;i.each(function(){var e=$(this).text();return!(e.length>0&&e.charAt(0)===o)||(s=!0,!1)}),s||t.push(o)}return t},n.ListViewIndexerModel.prototype.setSection=function(e){return e===n.IndexerModel.SECTION_OTHERS?this._setOtherSection():this._setSection(e)},n.ListViewIndexerModel.prototype._setOtherSection=function(){var e=this.getIndexableSections(),t=this;return new Promise(function(i){var o=null;t.listview._getGroupItemsCache().each(function(){for(var t=$(this).text(),i=0;i<e.length;i++){var n=e[i];if(0===t.indexOf(n))return!0}return o=this,!1}),o?(t.listview._scrollToGroupHeader(o),i(n.IndexerModel.SECTION_OTHERS)):i(null)})},n.ListViewIndexerModel.prototype._setSection=function(e){var t=this.getIndexableSections(),i=t.indexOf(e),n=this;return new Promise(function(e){if(-1===i)e(null);else{for(var o=null;i<t.length;i++){var s=t[i],r=n._findGroupHeader(s);if(null!=r){n.listview._scrollToGroupHeader(r),o=s;break}}e(o)}})},n.ListViewIndexerModel.prototype._findGroupHeader=function(e){var t;return this.listview._getGroupItemsCache().each(function(){return 0!==$(this).text().indexOf(e)||(t=this,!1)}),t},n.__registerWidget("oj.ojIndexer",$.oj.baseComponent,{defaultElement:"<ul>",version:"1.2",widgetEventPrefix:"oj",options:{data:null},_ComponentCreate:function(){this._super(),this._setup()},_AfterCreate:function(){this._super(),this._createIndexerContent(),this._setAriaProperties(),this._createInstructionText()},_destroy:function(){this._super();var e=this._getIndexerContainer();this._unregisterResizeListener(e),this._unregisterTouchHandler(e),this._unsetAriaProperties(),this.element.removeClass("oj-component-initnode"),n.DomUtils.unwrap(this.element,e)},_setOption:function(e,t){this._superApply(arguments),"data"===e&&this.refresh()},_SetupResources:function(){this._super();var e=this._getIndexerContainer()[0];this._registerResizeListener(e),this._registerTouchHandler(e)},_ReleaseResources:function(){this._super();var e=this._getIndexerContainer()[0];this._unregisterResizeListener(e),this._unregisterTouchHandler(e),this._resolveBusyState()},_resolveBusyState:function(){this.busyStateResolve&&(this.busyStateResolve(null),this.busyStateResolve=null)},widget:function(){return this._getIndexerContainer()},refresh:function(){this._super(),this.element.empty(),this._createIndexerContent(),this._setAriaProperties(),this.m_current=null},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;if("oj-indexer-section"===e.subId)for(var t=e.section,i=this.element.children("li"),n=0;n<i.length;n++){var o=i.get(n);if($(o).data("data-range")===t)return o;var s=$(o).data("data-includes");if(null!=s)for(var r=0;r<s.length;r++)if(s[r]===t)return o}return null},getSubIdByNode:function(e){if(null!=e){var t=$(e).data("data-range");if(null!=t)return{subId:"oj-indexer-section",section:t}}return null},_setAriaProperties:function(){this.element.attr("role","slider").attr("aria-orientation","vertical").attr("aria-describedby",this.element.prop("id")+":desc").attr("aria-valuemin",0).attr("aria-valuemax",Math.max(0,this.element.children().length-1))},_unsetAriaProperties:function(){this.element.removeAttr("role").removeAttr("aria-orientation").removeAttr("aria-describedby").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuetext")},_createInstructionText:function(){var e;e=n.DomUtils.isTouchSupported()?"ariaTouchInstructionText":"ariaKeyboardInstructionText";var t=$(document.createElement("div"));t.prop("id",this.element.prop("id")+":desc"),t.addClass("oj-helper-hidden-accessible").text(this.getTranslatedString(e)),this._getIndexerContainer().append(t)},_getIndexerContainer:function(){return null==this.m_container&&(this.m_container=this._createIndexerContainer()),this.m_container},_createIndexerContainer:function(){var e;return this.OuterWrapper?e=$(this.OuterWrapper):(e=$(document.createElement("div")),this.element.parent()[0].replaceChild(e[0],this.element[0])),e.addClass("oj-indexer oj-component"),e.prepend(this.element),e},_createIndexerContent:function(){var e=this._getIndexerModel();if(null!=e){var t,i=this.element,n=e.getIndexableSections();e.getMissingSections&&(t=e.getMissingSections());var o=this.getTranslatedString("indexerOthers"),s=this.widget().outerHeight(),r=this._createItem(n[0],t);i.append(r);var a=r.outerHeight(),l=Math.floor(s/a);this._getIndexerContainer().removeClass("oj-indexer-abbr");var u=Math.floor((n.length+1)/l)+1;u>1&&this._getIndexerContainer().addClass("oj-indexer-abbr");for(var d=1+u;d<n.length;d=d+u+1){if(u>1){var h=this._createSeparator(n,d-u,d-1);i.append(h)}else d-=1;var c=n[d],p=this._createItem(c,t);i.append(p)}var _=this._createItem(n[n.length-1],t);i.append(_);var m=this._createItem(o);m.attr("data-others","true"),i.append(m)}},_createItem:function(e,t){var i=e.label?e.label:e,n=$(document.createElement("li"));return n.data("data-range",e).text(i),null!=t&&t.indexOf(e)>-1&&n.addClass("oj-disabled"),n},_createSeparator:function(e,t,i){var n=[],o=$(document.createElement("li"));o.addClass("oj-indexer-ellipsis").data("data-range",e[t+Math.round((i-t)/2)]);for(var s=t;s<=i;s++)n.push(e[s]);return o.data("data-includes",n),o},_setup:function(){var e=this;this.element.uniqueId().addClass("oj-component-initnode").attr("tabIndex",0),this._on(this.element,{click:function(t){e._handleClick(t)},keydown:function(t){e._handleKeyDown(t)},focus:function(t){e._handleFocus(t)},blur:function(t){e._handleBlur(t)}}),this._focusable({applyHighlight:!0,setupHandlers:function(t,i){e._focusInHandler=t,e._focusOutHandler=i}})},_handleClick:function(e){var t;0===e.button&&(t=$(e.target),this._setCurrent(t))},_handleFocus:function(e){this._getIndexerContainer().addClass("oj-focus-ancestor"),null==this.m_current?this._setFocus(this.element.children("li").first()):this._setFocus(this.m_current)},_handleBlur:function(e){this._getIndexerContainer().removeClass("oj-focus-ancestor")},_handleKeyDown:function(e){var t,i=!1;switch(e.keyCode){case 38:t=this.m_current.prev();break;case 40:t=this.m_current.next();break;case 13:this._setCurrent(this.m_current),i=!0}null!=t&&t.length>0&&(i=!0,this._setFocus(t)),i&&e.preventDefault()},_setFocus:function(e){null!=this.m_current&&this._focusOutHandler(this.m_current),this._focusInHandler(e),this._updateAriaProperties(e),this.m_current=e},_getIndexerModel:function(){var e=this.option("data");if(null!=e&&(void 0===e.setSection||void 0===e.getIndexableSections))throw new Error("Invalid IndexerModel");return e},_setCurrent:function(e){var t=e.data("data-range");e.attr("data-others")&&(t=n.IndexerModel.SECTION_OTHERS),this._setCurrentSection(t)},_setCurrentSection:function(e){var t=this,i=c.getContext(this.element[0]).getBusyContext();this.busyStateResolve=i.addBusyState({description:"setCurrentSection"}),this._getIndexerModel().setSection(e).then(function(e){if(null!=e){var i=t._findItem(e);null!=i&&t._setFocus(i)}t._resolveBusyState()},function(){t._resolveBusyState()})},_updateAriaProperties:function(e){var t=e.data("data-includes"),i="";if(null!=t){if(t.length>0){var o=t[0].label?t[0].label:t[0],s=t[t.length-1].label?t[t.length-1].label:t[t.length-1];i=this.getTranslatedString("ariaInBetweenText",{first:o,second:s})}}else{var r=e.data("data-range");i=r===n.IndexerModel.SECTION_OTHERS?this.getTranslatedString("ariaOthersLabel"):r}e.hasClass("oj-disabled")&&(i=i+". "+this.getTranslatedString("ariaDisabledLabel")),this.element.attr("aria-valuetext",i),this.element.attr("aria-valuenow",e.index())},_findItem:function(e){for(var t=this.element.children(),i=0;i<t.length;i++){var n=t.get(i),o=$(n).data("data-range"),s=$(n).data("data-includes");if(null!=o&&o===e||null!=s&&s.indexOf(e)>-1)return $(n)}return null},_unregisterResizeListener:function(e){e&&this._resizeHandler&&n.DomUtils.removeResizeListener(e,this._resizeHandler)},_registerResizeListener:function(e){e&&(null==this._resizeHandler&&(this._resizeHandler=this._handleResize.bind(this)),n.DomUtils.addResizeListener(e,this._resizeHandler))},_unregisterTouchHandler:function(e){this.hammer&&(this.hammer.off("panstart panmove panend"),$(e).ojHammer("destroy")),this.hammer=null},_registerTouchHandler:function(e){var t,i,n,o,s,r=this,a={recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_VERTICAL}]]};this.hammer=$(e).ojHammer(a).on("panstart",function(e){var a=e.gesture.target;t=r.element[0].getBoundingClientRect().left+5,i=a.getBoundingClientRect().top,r._setCurrent($(a)),n=a,o=$(a).data("data-range"),s=i}).on("panmove",function(e){var a=s;s=i+e.gesture.deltaY;var l=document.elementFromPoint(t,s);if(null!=l){var u,d,h=s-a;if(n===l){if(null!=(u=$(l).data("data-includes"))){var c=u.indexOf(o);d=null,h>0&&c<u.length-1?d=u[c+1]:h<0&&c>0&&(d=u[c-1]),null!=d&&(o=d,r._setCurrentSection(d))}}else $(l).data("data-range")&&(d=null,null!=(u=$(l).data("data-includes"))&&(h>0&&l===n.nextElementSibling?d=u[0]:h<0&&l===n.previousElementSibling&&(d=u[u.length-1])),null==d&&(d=$(l).data("data-range")),n=l,o=d,r._setCurrentSection(o))}}).on("panend",function(){n=null,o=null,s=null})},_handleResize:function(e,t){e>0&&t>0&&this.refresh()}}),si.extension._WIDGET_NAME="ojIndexer",si.extension._INNER_ELEM="ul",n.CustomElementBridge.register("oj-indexer",{metadata:si});var ri={properties:{as:{type:"string",value:""},currentItem:{type:"any",writeback:!0},data:{type:"oj.TableDataSource|oj.TreeDataSource|oj.DataProvider"},dnd:{type:"object",properties:{drag:{type:"object",properties:{items:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},drag:{type:"function"},dragEnd:{type:"function"},dragStart:{type:"function"}}}}},drop:{type:"object",properties:{items:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragLeave:{type:"function"},dragOver:{type:"function"},drop:{type:"function",properties:{item:{type:"Element"},position:{type:"'before'|'after'|'inside'"},reorder:{type:"boolean"}}}}}}},reorder:{type:"object",properties:{items:{type:"string",enumValues:["disabled","enabled"],value:"disabled"}}}}},drillMode:{type:"string",enumValues:["collapsible","none"],value:"collapsible"},expanded:{type:"KeySet",writeback:!0,value:"new ExpandedKeySet();"},firstSelectedItem:{type:"object",writeback:!0,readOnly:!0,value:{key:null,data:null},properties:{key:{type:"any"},data:{type:"any"}}},groupHeaderPosition:{type:"string",enumValues:["static","sticky"],value:"sticky"},item:{type:"object",properties:{focusable:{type:"boolean|function",value:!0,properties:{datasource:{type:"oj.DataProvider<K, D>"},index:{type:"number"},key:{type:"K"},data:{type:"D"},parentElement:{type:"Element"},depth:{type:"number"},parentKey:{type:"K"},leaf:{type:"boolean"}}},renderer:{type:"function",properties:{datasource:{type:"oj.DataProvider<K, D>"},index:{type:"number"},key:{type:"K"},data:{type:"D"},parentElement:{type:"Element"},depth:{type:"number"},parentKey:{type:"K"},leaf:{type:"boolean"}}},selectable:{type:"boolean|function",value:!0,properties:{datasource:{type:"oj.DataProvider<K, D>"},index:{type:"number"},key:{type:"K"},data:{type:"D"},parentElement:{type:"Element"},depth:{type:"number"},parentKey:{type:"K"},leaf:{type:"boolean"}}}}},scrollPolicy:{type:"string",enumValues:["auto","loadMoreOnScroll"],value:"auto"},scrollPolicyOptions:{type:"Object<string, number>",properties:{fetchSize:{type:"number",value:25},maxCount:{type:"number",value:500},scroller:{type:"Element"}}},scrollPosition:{type:"object",writeback:!0,value:{x:0,y:0},properties:{x:{type:"number"},y:{type:"number"},index:{type:"number"},parent:{type:"any"},key:{type:"any"},offsetX:{type:"number"},offsetY:{type:"number"}}},selection:{type:"Array<any>",writeback:!0,value:[]},selectionMode:{type:"string",enumValues:["multiple","none","single"],value:"none"},selectionRequired:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{accessibleNavigateSkipItems:{type:"string"},accessibleReorderAfterItem:{type:"string"},accessibleReorderBeforeItem:{type:"string"},accessibleReorderInsideItem:{type:"string"},accessibleReorderTouchInstructionText:{type:"string"},indexerCharacters:{type:"string"},labelCopy:{type:"string"},labelCut:{type:"string"},labelPaste:{type:"string"},labelPasteAfter:{type:"string"},labelPasteBefore:{type:"string"},msgFetchingData:{type:"string"},msgNoData:{type:"string"}}}},methods:{refresh:{},getContextByNode:{},getDataForVisibleItem:{},getIndexerModel:{},scrollToItem:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{},ojBeforeCurrentItem:{},ojBeforeExpand:{},ojBeforeCollapse:{},ojCollapse:{},ojCopy:{},ojCut:{},ojExpand:{},ojPaste:{},ojReorder:{}},extension:{}};n.DataSourceContentHandler=function(e,t,i){this.m_root=t,this.m_widget=e,this.m_fetching=!1,this.setDataSource(i),this.Init()},n.Object.createSubclass(n.DataSourceContentHandler,n.Object,"oj.DataSourceContentHandler"),n.DataSourceContentHandler.prototype.Init=function(){n.DataSourceContentHandler.superclass.Init.call(this)},n.DataSourceContentHandler.prototype.notifyShown=function(){},n.DataSourceContentHandler.prototype.notifyAttached=function(){},n.DataSourceContentHandler.prototype.cleanItems=function(e){if(void 0===e&&(e=this.getTemplateEngine()),e&&this.m_root)for(var t=this.m_root.childNodes,i=0;i<t.length;i++)e.clean(t[i])},n.DataSourceContentHandler.prototype.Destroy=function(){null!=this.m_superRoot&&(this.m_root=this.m_superRoot),this.cleanItems(),$(this.m_root).empty(),this.m_widget=null,this.m_root=null,this.m_superRoot=null},n.DataSourceContentHandler.prototype.IsReady=function(){return!this.m_fetching},n.DataSourceContentHandler.prototype.setRootAriaProperties=function(){this.shouldUseGridRole()?this.m_root.setAttribute("role","grid"):this.IsHierarchical()?this.m_root.setAttribute("role","tree"):this.m_root.setAttribute("role","listbox")},n.DataSourceContentHandler.prototype.RenderContent=function(){if(this.signalTaskStart("rendering content"),this.setRootAriaProperties(),this.shouldUseGridRole()&&this.isCardLayout()&&!this.IsHierarchical()){var e=document.createElement("li"),t=document.createElement("ul");e.appendChild(t),$(e).attr("role","presentation").css("width","100%"),$(t).attr("role","row").addClass(this.m_widget.getGroupStyleClass()),this.m_root.appendChild(e),this.m_superRoot=this.m_root,this.m_root=t}this.fetchRows(!1),this.signalTaskEnd()},n.DataSourceContentHandler.prototype.GetKey=function(e){return e.key},n.DataSourceContentHandler.prototype.FindElementByKey=function(e){for(var t=$(this.m_root).find("."+this.m_widget.getItemElementStyleClass()),i=0;i<t.length;i++){var o=t[i];if(e==this.GetKey(o)||n.Object.compareValues(e,this.GetKey(o)))return o}return null},n.DataSourceContentHandler.prototype.getDataSource=function(){return this.m_dataSource},n.DataSourceContentHandler.prototype.setDataSource=function(e){this.m_dataSource=e},n.DataSourceContentHandler.prototype.loadTemplateEngine=function(){var e=this;return null!=this.m_widget.getItemTemplate()&&null==this.m_widget._getItemRenderer()?new Promise(function(t){p.__getTemplateEngine().then(function(i){e.m_engine=i,t(i)},function(e){throw new Error("Error loading template engine: "+e)})}):Promise.resolve(null)},n.DataSourceContentHandler.prototype.getTemplateEngine=function(){return this.m_engine},n.DataSourceContentHandler.prototype.fetchRows=function(e){this.m_widget.showStatusText()},n.DataSourceContentHandler.prototype.addItem=function(e,t,i,n,o,s){var r,a=document.createElement("li");if($(a).uniqueId(),-1===t)r=null;else{var l=$(e).children("."+this.m_widget.getItemElementStyleClass()+", ."+this.m_widget.getEmptyTextStyleClass()+", .oj-listview-temp-item");r=t===l.length?null:l[t]}this.m_widget.BeforeInsertItem(),e.insertBefore(a,r);var u=$(e).children().index(a);return this._addOrReplaceItem(a,u,e,t,i,n,o,s)},n.DataSourceContentHandler.prototype.replaceItem=function(e,t,i,n,o,s){this.signalTaskStart("replace item");var r=e.parentNode,a=$(r).children().index(e),l=document.createElement("li");o&&o.clean(e),$(e).replaceWith(l),this._addOrReplaceItem(l,a,r,t,i,n,o,s)},n.DataSourceContentHandler.prototype._addOrReplaceItem=function(e,t,i,n,o,s,r,a){null==a&&(a=this.afterRenderItem.bind(this));var l,u=this.createContext(t,o,s,e),d=this.m_widget._getItemRenderer(),h=this.m_widget.getItemTemplate();if(null!=d){var c=d.call(this,u);null!=c&&(null===c.parentNode||c.parentNode instanceof DocumentFragment?e.appendChild(c):null!=c.parentNode||c.toString&&((l=document.createElement("span")).appendChild(document.createTextNode(c.toString())),e.appendChild(l)))}else if(null!=h&&null!=r)for(var p=this.m_widget.getRootElement()[0],_=this.GetBindingContext(u),m=r.execute(p,h,_,this.m_widget.GetOption("as")),g=0;g<m.length;g++){if("LI"===m[g].tagName){i.replaceChild(m[g],e);break}e.appendChild(m[g])}else(l=document.createElement("span")).appendChild(document.createTextNode(null==o?"":o.toString())),e.appendChild(l);var f=i.children?i.children[t]:this._getItemFromDocumentFragment(i,t);return u.parentElement=f,$.data(f,"data",o),a(f,u),{item:f,context:u}},n.DataSourceContentHandler.prototype._getItemFromDocumentFragment=function(e,t){for(var i=0,n=e.childNodes,o=0;o<n.length;o++){var s=n[o];if(!s)break;if(1===s.nodeType){if(i===t)return s;i+=1}}return null},n.DataSourceContentHandler.prototype.GetBindingContext=function(e){var t={};return t.data=e.data,t.index=e.index,t.key=e.key,t.componentElement=e.componentElement,t},n.DataSourceContentHandler.prototype.afterRenderItem=function(e,t){e.key=t.key;var i=$(e);i.uniqueId();var n=this.m_widget.getSingleFocusableElement(i);if(this.shouldUseGridRole())if(null==t.leaf||t.leaf)if(this.isCardLayout())n.attr("role","gridcell");else if(i.attr("role","row"),n!==i)n.attr("role","gridcell");else{var o="<div role='gridcell' class='oj-listview-cell-element'></div>";0===n.children().length?n.get(0).innerHTML=o:n.contents().wrapAll(o)}else i.attr("role","presentation");else n.attr("role",this.IsHierarchical()?"treeitem":"option"),n!==i&&i.attr("role","presentation");n.addClass(this.m_widget.getFocusedElementStyleClass()),this.isFocusable(t)||i.addClass("oj-skipfocus"),i.addClass(this.m_widget.getItemElementStyleClass())},n.DataSourceContentHandler.prototype.createContext=function(e,t,i,n){var o={};o.parentElement=n,o.index=e,o.data=t,o.component=this.m_widget.getWidgetConstructor(),o.datasource=this.getDataSource(),o=this.m_widget._FixRendererContext(o);for(var s=Object.keys(i),r=0;r<s.length;r++){var a=s[r];o[a]=i[a]}return o},n.DataSourceContentHandler.prototype.isFocusable=function(e){return this.m_widget.getItemFocusable(e)},n.DataSourceContentHandler.prototype.isSelectable=function(e){return this.m_widget.getItemSelectable(e)},n.DataSourceContentHandler.prototype.isCardLayout=function(){return this.m_widget.isCardLayout()},n.DataSourceContentHandler.prototype.shouldUseGridRole=function(){return this.m_widget.ShouldUseGridRole()},n.DataSourceContentHandler.prototype.isAsyncRendering=function(){return!1},n.DataSourceContentHandler.prototype.signalTaskStart=function(e){this.m_widget&&this.m_widget.signalTaskStart("DataSource ContentHandler "+e)},n.DataSourceContentHandler.prototype.signalTaskEnd=function(){this.m_widget&&this.m_widget.signalTaskEnd()},n.DataSourceContentHandler.prototype.createKeyMap=function(e){var t=new KeyMap;return e?(e.forEach(function(e,i){t.set(i,e)}),t):t},n.DataSourceContentHandler.prototype.createKeySet=function(e){return new pi(e)},n.TreeDataSourceContentHandler=function(e,t,i){n.TreeDataSourceContentHandler.superclass.constructor.call(this,e,t,i)},n.Object.createSubclass(n.TreeDataSourceContentHandler,n.DataSourceContentHandler,"oj.TreeDataSourceContentHandler"),n.TreeDataSourceContentHandler.prototype.Init=function(){n.TreeDataSourceContentHandler.superclass.Init.call(this)},n.TreeDataSourceContentHandler.prototype.IsHierarchical=function(){return!0},n.TreeDataSourceContentHandler.prototype.fetchRows=function(e){this.signalTaskStart("fetching rows"),n.TreeDataSourceContentHandler.superclass.fetchRows.call(this,e),this.fetchChildren(0,null,this.m_root,null),this.signalTaskEnd()},n.TreeDataSourceContentHandler.prototype.fetchChildren=function(e,t,i,n){var o=this;this.signalTaskStart("fetching children from index: "+e);var s=this.loadTemplateEngine();if(null!=t){var r=i.parentNode.firstElementChild.firstElementChild.firstElementChild;if(r){r=$(r);var a=this.m_widget.getCollapseIconStyleClass();if(r.hasClass(a)){var l=this.m_widget.getExpandingIconStyleClass();r.removeClass(a).addClass(l)}}}this.m_fetching=!0;var u={start:e,count:this.m_dataSource.getChildCount(t)};this.signalTaskStart("first fetch"),this.m_dataSource.fetchChildren(t,u,{success:function(e){s.then(function(s){o._handleFetchSuccess(e,t,i,n,s),o.signalTaskEnd()})},error:function(e){o._handleFetchError(e),o.signalTaskEnd()}}),this.signalTaskEnd()},n.TreeDataSourceContentHandler.prototype._handleFetchSuccess=function(e,t,i,n,o){var s=this;if(null!=this.m_widget){this.signalTaskStart("handling successful fetch");for(var r=e.getStart(),a=e.getCount(),l=document.createDocumentFragment(),u=0;u<a;u++){var d=e.getData(r+u),h=e.getMetadata(r+u);this.addItem(l,-1,d,h,o)}if(i.appendChild(l),this.shouldUseGridRole()&&this.isCardLayout()&&null!=t&&a>1){var p=i.parentNode.firstElementChild.firstElementChild;$(p).attr("aria-colspan",a)}if(this.m_fetching=!1,this.isAsyncRendering())c.getContext(this.m_root).getBusyContext().whenReady().then(function(){_()});else _();this.m_initialized=!0,this.signalTaskEnd()}function _(){s.m_widget&&(null!=n&&n.call(null,i),s.m_widget.renderComplete())}},n.TreeDataSourceContentHandler.prototype.GetBindingContext=function(e){var t=n.TreeDataSourceContentHandler.superclass.GetBindingContext.call(this,e);return t.depth=e.depth,t.leaf=e.leaf,t.parentKey=e.parentKey,t},n.TreeDataSourceContentHandler.prototype.afterRenderItem=function(e,t){this.signalTaskStart("after rendering an item"),n.TreeDataSourceContentHandler.superclass.afterRenderItem.call(this,e,t);var i=this.m_widget.getGroupStyleClass(),o=this.m_widget.getItemStyleClass(),s=this.m_widget.getGroupItemStyleClass(!0),r=this.m_widget.getGroupCollapseStyleClass(),a=this.m_widget.getCollapseIconStyleClass(),l=this.m_widget.getFocusedElementStyleClass();if(e=$(e),!1===t.leaf){e.children().wrapAll("<div></div>"),e.hasClass(l)?e.removeClass(l).children().first().addClass(l).attr("aria-expanded","false"):e.children().first().attr("role","presentation").find("."+l).attr("aria-expanded","false");var u=e.children().first();if(u.uniqueId().addClass(s),this.m_widget.isExpandable()){e.addClass("oj-collapsed");var d=document.createElement("a");$(d).attr("href","#").attr("aria-labelledby",u.get(0).id).addClass("oj-component-icon oj-clickable-icon-nocontext").addClass(a),u.prepend(d)}this.shouldUseGridRole()&&(u.get(0).removeAttribute("aria-expanded"),u.removeClass(l),u.attr("role","row"),u.children().wrapAll("<div role='gridcell' aria-expanded='false' class='oj-listview-cell-element "+l+"'></div>"));var h,c=document.createElement("ul");h=this.shouldUseGridRole()?this.isCardLayout()?"row":"presentation":"group",$(c).addClass(i).addClass(r).attr("role",h),e.append(c)}else!0===t.leaf&&e.addClass(o);this.m_widget._isSelectionEnabled()&&this.isSelectable(t)&&this.m_widget.getFocusItem(e).attr("aria-selected",!1),this.m_widget.itemRenderComplete(e[0],t),this.signalTaskEnd()},n.TreeDataSourceContentHandler.prototype._handleFetchError=function(t){null!=this.m_widget?(this.signalTaskStart("handling fetch error: "+t),e.error(t),this.m_widget.renderComplete(),this.signalTaskEnd()):e.info("handleFetchError: widget has already been destroyed")},n.TreeDataSourceContentHandler.prototype.Expand=function(e,t){this.signalTaskStart("expanding an item");var i=this.GetKey(e[0]),n=e.children("ul")[0];this.fetchChildren(0,i,n,t),this.signalTaskEnd()},n.TreeDataSourceContentHandler.prototype.Collapse=function(e){var t=this.getTemplateEngine();t&&t.clean(e.get(0)),e.empty()},n.StaticContentHandler=function(e,t){this.m_widget=e,this.m_root=t},n.Object.createSubclass(n.StaticContentHandler,n.Object,"oj.StaticContentHandler"),n.StaticContentHandler.prototype.Init=function(){n.StaticContentHandler.superclass.Init.call(this)},n.StaticContentHandler.prototype.Destroy=function(){this.m_root.hasAttribute("role")&&(this.restoreContent(this.m_root,0),this.unsetRootAriaProperties(),this.shouldUseGridRole()&&this.isCardLayout()&&!this.IsHierarchical()&&$(this.m_root).children().first().children().unwrap().children().unwrap())},n.StaticContentHandler.prototype.IsReady=function(){return!0},n.StaticContentHandler.prototype.notifyShown=function(){},n.StaticContentHandler.prototype.notifyAttached=function(){},n.StaticContentHandler.prototype.RenderContent=function(){var e=this.m_root;this.shouldUseGridRole()&&this.isCardLayout()&&!this.IsHierarchical()&&$(e).children("li").length>0&&($(this.m_root).children().wrapAll("<li role='presentation' style='width:100%'><ul role='row' class='"+this.m_widget.getGroupStyleClass()+"'></ul></li>"),e=$(this.m_root).children("li").first().children("ul").first().get(0)),this.modifyContent(e,0),this.setRootAriaProperties(),this.m_widget.renderComplete()},n.StaticContentHandler.prototype.Expand=function(e,t){var i="."+this.m_widget.getGroupStyleClass(),n=$(e).children(i)[0];$(n).css("display",""),t.call(null,n)},n.StaticContentHandler.prototype.Collapse=function(e){},n.StaticContentHandler.prototype.IsHierarchical=function(){return null==this.m_hier&&(this.m_hier=$(this.m_root).children("li").children("ul").length>0),this.m_hier},n.StaticContentHandler.prototype.restoreContent=function(e,t){for(var i=this.m_widget.getGroupStyleClass(),n=this.m_widget.getGroupCollapseStyleClass(),o=this.m_widget.getGroupExpandStyleClass(),s=this.m_widget.getGroupItemStyleClass(!0),r=this.m_widget.getItemStyleClass(),a=this.m_widget.getItemElementStyleClass(),l=e.children,u=0;u<l.length;u++){var d=$(l[u]);if(d.hasClass(a)){this.unsetAriaProperties(d.get(0)),d.removeClass(a).removeClass(r).removeClass(this.m_widget.getDepthStyleClass(t)).removeClass("oj-skipfocus").removeClass("oj-focus").removeClass("oj-hover").removeClass("oj-expanded").removeClass("oj-collapsed").removeClass("oj-selected");var h=d.children("ul");if(h.length>0){d.children("."+s).children().unwrap(),this.shouldUseGridRole()&&this.unsetGroupAriaProperties(d),d.children(".oj-component-icon").remove();var c=$(h[0]);c.removeClass(i).removeClass(o).removeClass(n).removeAttr("role"),this.restoreContent(c[0],t+1)}}}},n.StaticContentHandler.prototype.modifyContent=function(e,t){for(var i=this.m_widget.getItemStyleClass(),n=this.m_widget.getItemElementStyleClass(),o=this.m_widget.getGroupStyleClass(),s=this.m_widget.getGroupItemStyleClass(!0),r=this.m_widget.getGroupCollapseStyleClass(),a=this.m_widget.getCollapseIconStyleClass(),l=this.m_widget.getFocusedElementStyleClass(),u=e.children,d=this.m_widget.isExpandable(),h=0;h<u.length;h++){var c=$(u[h]),p=this.createContext(c);this.setAriaProperties(c,p),c.uniqueId().addClass(n),t>0&&c.addClass(this.m_widget.getDepthStyleClass(t)),this.isFocusable(p)||c.addClass("oj-skipfocus");var _=c.children("ul");if(_.length>0){this.m_hier=!0,c.children(":not(ul)").wrapAll("<div></div>");var m=c.children().first();m.addClass(s);var g=this.getItemsCount(_[0]);if(g>0){if(c.hasClass(l)?(c.removeClass(l),m.addClass(l).attr("aria-expanded","false")):(m.attr("role","presentation"),m.find("."+l).attr("aria-expanded","false")),d){c.addClass("oj-collapsed"),m.uniqueId();var f=document.createElement("a");$(f).attr("href","#").attr("role","button").attr("aria-labelledby",m.get(0).id).addClass("oj-component-icon oj-clickable-icon-nocontext").addClass(a),m.prepend(f)}}else m.addClass("oj-empty");this.shouldUseGridRole()&&this.setGroupAriaProperties(m,g);var v,y=$(_[0]);v=this.shouldUseGridRole()?this.isCardLayout()?"row":"presentation":"group",y.addClass(o).addClass(r).attr("role",v).css("display","none"),this.modifyContent(y[0],t+1)}else c.addClass(i);this.m_widget._isSelectionEnabled()&&this.isSelectable(p)&&this.m_widget.getFocusItem(c).attr("aria-selected",!1),this.m_widget.itemRenderComplete(c[0],p)}},n.StaticContentHandler.prototype.setRootAriaProperties=function(){this.shouldUseGridRole()?this.m_root.setAttribute("role","grid"):this.IsHierarchical()?this.m_root.setAttribute("role","tree"):this.m_root.setAttribute("role","listbox")},n.StaticContentHandler.prototype.unsetRootAriaProperties=function(){this.m_root.removeAttribute("role")},n.StaticContentHandler.prototype.getItemsCount=function(e){return $(e).children("li").length},n.StaticContentHandler.prototype.createContext=function(e){var t={};if(t.key=e.attr("id"),t.parentElement=e.children().first()[0],t.index=e.index(),t.data=e[0],t.component=this.m_widget.getWidgetConstructor(),t=this.m_widget._FixRendererContext(t),this.IsHierarchical()){t.leaf=0===e.children("ul").length;var i=e.parents("li."+this.m_widget.getItemElementStyleClass());t.depth=i.length,0===i.length?t.parentKey=null:t.parentKey=i.first().attr("id")}return t},n.StaticContentHandler.prototype.setAriaProperties=function(e,t){var i=this.m_widget.getSingleFocusableElement(e);this.shouldUseGridRole()?null==t.leaf||t.leaf?this.isCardLayout()?i.attr("role","gridcell"):(e.attr("role","row"),i!==e?i.attr("role","gridcell"):i.children().wrapAll("<div role='gridcell' class='oj-listview-cell-element'></div>")):(e.attr("role","presentation"),i!==e&&i.attr("role","gridcell")):(i.attr("role",this.IsHierarchical()?"treeitem":"option"),i!==e&&e.attr("role","presentation")),i.addClass(this.m_widget.getFocusedElementStyleClass())},n.StaticContentHandler.prototype.setGroupAriaProperties=function(e,t){var i=this.m_widget.getFocusedElementStyleClass();e.get(0).removeAttribute("aria-expanded"),e.removeClass(i),e.attr("role","row"),e.children().wrapAll("<div role='gridcell' aria-expanded='false' class='oj-listview-cell-element "+i+"'></div>"),this.isCardLayout()&&t>1&&e.children().first().attr("aria-colspan",t)},n.StaticContentHandler.prototype.unsetGroupAriaProperties=function(e){e.children("div").first().children().unwrap()},n.StaticContentHandler.prototype.unsetAriaProperties=function(e){this.m_widget.restoreTabIndex(e);var t,i=this.m_widget.getGroupItemStyleClass(!0),n=this.m_widget.getFocusedElementStyleClass(),o=e.firstElementChild;if(o&&$(o).hasClass(i)){if(0===(t=$(o).children("."+n).first()).length)return}else t=this.m_widget.getSingleFocusableElement($(e));t.removeAttr("role"),t.removeAttr("aria-selected"),t.removeAttr("aria-expanded"),t.removeClass(this.m_widget.getFocusedElementStyleClass()),this.shouldUseGridRole()&&!this.isCardLayout()&&(t!==e?($(e).removeAttr("role"),t.children().first().children().unwrap()):t.children().first().children().unwrap().children().unwrap())},n.StaticContentHandler.prototype.GetKey=function(e){return $(e).attr("id")},n.StaticContentHandler.prototype.FindElementByKey=function(e){return document.getElementById(e)},n.StaticContentHandler.prototype.isFocusable=function(e){return this.m_widget.getItemFocusable(e)},n.StaticContentHandler.prototype.isSelectable=function(e){return this.m_widget.getItemSelectable(e)},n.StaticContentHandler.prototype.isCardLayout=function(){return this.m_widget.isCardLayout()},n.StaticContentHandler.prototype.shouldUseGridRole=function(){return this.m_widget.ShouldUseGridRole()},n.StaticContentHandler.prototype.createKeyMap=function(e){var t=new KeyMap;return e?(e.forEach(function(e,i){t.set(i,e)}),t):t},n.StaticContentHandler.prototype.createKeySet=function(e){return new pi(e)},n.KeyMap=function(){},n.KeyMap.prototype.set=function(e,t){void 0===this._mapKeys&&void 0===this._mapValues&&(this._mapKeys=[],this._mapValues=[]);var i=this._mapKeys.indexOf(e);i>-1?this._mapValues.splice(i,1,t):(this._mapKeys.push(e),this._mapValues.push(t))},n.KeyMap.prototype.get=function(e){if(this._mapKeys&&this._mapValues){var t=this._mapKeys.indexOf(e);if(t>-1&&this._mapValues.length>t)return this._mapValues[t]}return null},n.KeyMap.prototype.deleteValue=function(e){for(var t=this._mapValues.indexOf(e);t>-1;)this._mapValues.splice(t,1),this._mapKeys.splice(t,1),t=this._mapValues.indexOf(e,t)},n._ojListViewExpandedKeySet=function(){n._ojListViewExpandedKeySet.superclass.constructor.call(this)},n.Object.createSubclass(n._ojListViewExpandedKeySet,n.ExpandedKeySet,"ListViewExpandedKeySet");var ai=function(e,t){var i=function(){};return n.Object.createSubclass(i,e,""),i.prototype=$.extend(i.prototype,t),i};n._ojListView=ai(Object,{LEFT_KEY:37,RIGHT_KEY:39,DOWN_KEY:40,UP_KEY:38,TAB_KEY:9,ENTER_KEY:13,ESC_KEY:27,F2_KEY:113,SPACE_KEY:32,STATE_EXPANDED:0,STATE_COLLAPSED:1,STATE_NONE:2,MINIMUM_ITEM_HEIGHT:20,init:function(e){var t=this;this.readinessStack=[],this.element=e.element,this.ojContext=e.ojContext,this.OuterWrapper=e.OuterWrapper,this.options=e,this.element.uniqueId().addClass(this.GetStyleClass()+" oj-component-initnode"),this.OuterWrapper&&this.element[0].setAttribute("data-oj-context",""),this.signalTaskStart("Initializing"),this.SetRootElementTabIndex();var i=this.GetDnDContext();i&&(this.m_dndContext=i,this.ojContext._on(this.element,{dragstart:function(e){return i._handleDragStart(e)},dragenter:function(e){return i._handleDragEnter(e)},dragover:function(e){return i._handleDragOver(e)},dragleave:function(e){return i._handleDragLeave(e)},dragend:function(e){return t.m_preActive=!1,i._handleDragEnd(e)},drag:function(e){return i._handleDrag(e)},drop:function(e){return t.m_preActive=!1,i._handleDrop(e)}})),this.ojContext._on(this.element,{click:function(e){t.HandleMouseClick(e)},touchstart:function(e){t.HandleMouseDownOrTouchStart(e)},touchend:function(e){t.HandleTouchEndOrCancel(e)},touchcancel:function(e){t.HandleTouchEndOrCancel(e)},mousedown:function(e){0===e.button?t._recentTouch()||t.HandleMouseDownOrTouchStart(e):t.m_preActive=!0},mouseup:function(e){t._handleMouseUpOrPanMove(e),t.m_preActive=!1},mouseout:function(e){t._handleMouseOut(e)},mouseover:function(e){t._handleMouseOver(e)},keydown:function(e){t.HandleKeyDown(e)},keyup:function(e){t.HandleKeyUp(e)},ojpanmove:function(e){t._handleMouseUpOrPanMove(e)}}),this.ojContext._on(this.ojContext.element,{focus:function(e){t.HandleFocus(e)},blur:function(e){t.HandleBlur(e)}}),n.AgentUtils.getAgentInfo().browser===n.AgentUtils.BROWSER.FIREFOX&&this._getListContainer().attr("tabIndex",-1),this.ojContext._on(this.ojContext.element,{focusin:function(e){t.HandleFocus(e)},focusout:function(e){t.HandleFocusOut(e)}}),this.ojContext._focusable({applyHighlight:t.ShouldApplyHighlight(),recentPointer:t.RecentPointerCallback(),setupHandlers:function(e,i){t._focusInHandler=e,t._focusOutHandler=i}})},isAvailable:function(){return null!=this.m_contentHandler},setupResources:function(){this.ojContext.document.bind("touchend.ojlistview touchcancel.ojlistview",this.HandleTouchEndOrCancel.bind(this)),this.InitContentHandler(),this._registerResizeListener(this._getListContainer()[0]),this._registerScrollHandler()},releaseResources:function(){this.ojContext.document.off(".ojlistview"),this.DestroyContentHandler(),this._unregisterResizeListener(this._getListContainer()),this._unregisterScrollHandler()},afterCreate:function(){this._buildList(),this.signalTaskEnd()},refresh:function(){this._resetInternal(),this.signalTaskStart("Refresh"),this.SetAriaProperties(),this.InitContentHandler(),this._registerResizeListener(this._getListContainer()[0]),this._registerScrollHandler(),this.signalTaskEnd()},whenReady:function(){return this.readyPromise},destroy:function(){this.element.removeClass(this.GetStyleClass()+" oj-component-initnode"),this._unregisterResizeListener(this._getListContainer()),this._resetInternal(),n.DomUtils.unwrap(this.element,this._getListContainer())},adjustScrollPositionValueOnRefresh:function(){var e=null==this.GetOption("scrollPosition")?{}:this.GetOption("scrollPosition"),t=this.GetOption("selection");this._isSelectionEnabled()&&t.length>0?null!=this.m_selectionFrontier&&this.m_selectionFrontier.length>0?e.key=this.GetKey(this.m_selectionFrontier[0]):e.key=t[0]:(e.y=0,e.key=null,e.index=0),e.x=0,e.offsetX=0,e.offsetY=0,this.SetOption("scrollPosition",e,{_context:{internalSet:!0},changed:!1})},_clearBusyState:function(){if(this.readinessStack&&this.readinessStack.length>0)for(e.warn("ListView did not end with a clean state, this could happen if ListView is detached before fetch is complete.  State: "+this.readinessStack);this.readinessStack.length>0;)this.signalTaskEnd()},_resetInternal:function(){this.UnsetAriaProperties(),this._cleanupTabbableElementProperties(this.element),this.DestroyContentHandler(),this.m_active=null,this.m_isExpandAll=null,this.m_disclosing=null,this.m_itemHeight=null,this.m_keyElemMap=null,this.m_clientHeight=null,this.m_scrollHeight=null,this.ClearCache(),null!=this.m_dndContext&&this.m_dndContext.reset()},notifyAttached:function(){null!=this.m_contentHandler&&(this.syncScrollPosition(),this.m_contentHandler.notifyAttached())},notifyDetached:function(){this._getListContainer().removeClass("oj-focus-ancestor"),null!=this.m_active&&$(this.m_active.elem).removeClass("oj-focus oj-focus-highlight"),null!=this.m_hoverItem&&this._unhighlightElem(this.m_hoverItem,"oj-hover")},notifyShown:function(){null!=this.m_contentHandler&&(this.syncScrollPosition(),this.m_contentHandler.notifyShown())},getNodeBySubId:function(e){var t;if(null==e)return this.element[0];var i=e.subId;if("oj-listview-disclosure"===i||"oj-listview-icon"===i){if(null!=(t=e.key)){var n=this.FindElementByKey(t);if(null!=n){var o=$(n).find(".oj-clickable-icon-nocontext").first();if(this._isExpandCollapseIcon(o))return o.get(0)}}}else if("oj-listview-item"===i&&null!=(t=e.key))return this.FindElementByKey(t);return null},getSubIdByNode:function(e){if(null!=e&&this._isExpandCollapseIcon(e)){var t=this.FindItem(e);if(null!=t&&t.length>0){var i=this.GetKey(t[0]);if(null!=i)return{subId:"oj-listview-disclosure",key:i}}}return null},getContextByNode:function(e){var t=this.FindItem(e);if(null!=t&&t.length>0){var i=this.GetKey(t[0]);if(null!=i){var n=t.parent(),o={subId:"oj-listview-item",key:i,index:n.children("."+this.getItemElementStyleClass()).index(t)};return n.get(0)!==this.element.get(0)&&(o.parent=n.parent().get(0)),t.children().first().hasClass(this.getGroupItemStyleClass())?o.group=!0:o.group=!1,o}}return null},getDataForVisibleItem:function(e){var t,i=e.key;if(null!=i&&(t=this.FindElementByKey(i)),null==t){var n=e.index,o=e.parent;o=null==o?this.element.get(0):$(o).children("ul."+this.getGroupStyleClass()).first(),t=$(o).children("li").get(n)}return null!=t&&$(t).hasClass(this.getItemStyleClass())?this._getDataForItem(t):null},_getDataForItem:function(e){return null==this.GetOption("data")?e:$.data(e,"data")},ShouldRegisterResizeListener:function(e){return e&&this.m_contentHandler&&this.m_contentHandler.HandleResize&&this.m_contentHandler.shouldHandleResize&&this.m_contentHandler.shouldHandleResize()},_unregisterResizeListener:function(e){e&&this._resizeHandler&&n.DomUtils.removeResizeListener(e,this._resizeHandler)},_registerResizeListener:function(e){this._unregisterResizeListener(e),this.ShouldRegisterResizeListener(e)&&(null==this._resizeHandler&&(this._resizeHandler=this.HandleResize.bind(this)),n.DomUtils.addResizeListener(e,this._resizeHandler))},GetDnDContext:function(){if(void 0!==n.ListViewDndContext)return new n.ListViewDndContext(this)},HandleResize:function(e,t){e>0&&t>0&&null!=this.m_contentHandler&&this.m_contentHandler.HandleResize&&this.m_contentHandler.HandleResize(e,t),this.m_clientHeight=null,this.m_scrollHeight=null},ShouldApplyHighlight:function(){return!0},RecentPointerCallback:function(){return function(){return!1}},ShouldRefresh:function(e){return null!=e.data||null!=e.drillMode||null!=e.groupHeaderPosition||null!=e.item||null!=e.scrollPolicy||null!=e.scrollPolicyOptions},_isKeySet:function(e){return e.values&&e.isAddAll},setOptions:function(e,t){var i=this;if(this.ShouldRefresh(e))return!0;if(null!=e.expanded&&this.m_contentHandler.IsHierarchical()){this._collapsedKeys=void 0;var n=e.expanded;if(Array.isArray(n)||n.values){this.signalTaskStart("Set expanded option"),this._collapseAll(),this._ignoreExpanded=!0;try{(this._isKeySet(n)?n.values():n).forEach(function(e){i.expandKey(e,!0,!0,!0)})}finally{this._ignoreExpanded=void 0,this.signalTaskEnd()}}else if("all"===n||n.deletedValues)return!0}if(null!=e.currentItem){var o=this.FindElementByKey(e.currentItem);if(null!=o&&(o=$(o),!this.SkipFocus(o))){var s=document.activeElement;s&&this.element.get(0).contains(s)?this.ActiveAndFocus(o,null):this._setActive(o,null,!0)}}else null===e.currentItem&&(this.UnhighlightActive(),this.m_active=null,this.SetRootElementTabIndex());if(this.HandleSelectionOption(e),null!=e.selectionMode&&("none"!==e.selectionMode?this._clearSelection(!0):(this._clearSelection(!1),this._setSelectionOption([],null,null)),this.SetAriaProperties(),this.UpdateItemAriaProperties(e.selectionMode)),null!=e.scrollTop){var r=this._getScroller(),a=e.scrollTop;null==a||isNaN(a)||(r.scrollTop=a)}return null!=e.scrollPosition&&(this.syncScrollPosition(e.scrollPosition),delete e.scrollPosition),this._shouldDragSelectedItems()&&null!=this.m_active&&null!=e.dnd&&null!=e.dnd.reorder&&("enabled"===e.dnd.reorder.items?this.m_dndContext._setItemDraggable(this.m_active.elem):"disabled"===e.dnd.reorder.items&&this.m_dndContext._unsetItemDraggable(this.m_active.elem)),!1},HandleSelectionOption:function(e){if(null!=e.selection&&this._isSelectionEnabled()){e.selection=this._filterSelection(e.selection);var t=e.selection;this._clearSelection(!1);for(var i=0;i<t.length;i++){var n=this.FindElementByKey(t[i]);null!=n&&this._applySelection(n,t[i])}}},Trigger:function(e,t,i){return this.ojContext._trigger(e,t,i)},SetOption:function(e,t,i){this.ojContext.option(e,t,i)},GetOption:function(e){return this.ojContext.option(e)},_getBusyDescription:function(e){return"The component identified by '"+(this.ojContext._IsCustomElement()?this.getRootElement().attr("id"):this.element.attr("id"))+"', "+e},signalTaskStart:function(e){var t=this;if(this.readinessStack){if(0===this.readinessStack.length){this.readyPromise=new Promise(function(e){t.readyResolve=e});var i=c.getContext(this.element[0]).getBusyContext(),n=null!=e?{description:this._getBusyDescription(e)}:{};t.busyStateResolve=i.addBusyState(n)}this.readinessStack.push(null!=e?e:"unknown task")}},signalTaskEnd:function(){this.readinessStack&&this.readinessStack.length>0&&(this.readinessStack.pop(),0===this.readinessStack.length&&(this.readyResolve(null),this.busyStateResolve(null),this.busyStateResolve=null))},isReady:function(){return null==this.busyStateResolve},throwError:function(e){if(this.readinessStack)for(;this.readinessStack.length>0;)this.signalTaskEnd();throw e},getItems:function(e){var t=this,i=[];return $.each(e,function(e,n){var o=t.FindElementByKey(n);null!=o&&i.push(o)}),i},isCardLayout:function(){return(this.ojContext._IsCustomElement()?this.getRootElement():this.element).hasClass("oj-listview-card-layout")},ShouldUseGridRole:function(){return!0},ShouldUpdateScrollPosition:function(){return this.ShouldUseGridRole()&&this.ojContext._IsCustomElement()},DestroyContentHandler:function(){null!=this.m_contentHandler&&(this.m_contentHandler.Destroy(),delete this.m_contentHandler,this.m_contentHandler=null),this._clearBusyState()},InitContentHandler:function(){this.signalTaskStart("Initialize ContentHandler"),this.showStatusText();var e=this.GetOption("data");null!=e?void 0!==n.TableDataSource&&e instanceof n.TableDataSource?this.m_contentHandler=new n.IteratingDataProviderContentHandler(this,this.element[0],new n.TableDataSourceAdapter(e)):void 0!==n.TreeDataSource&&e instanceof n.TreeDataSource?this.m_contentHandler=new n.TreeDataSourceContentHandler(this,this.element[0],e):n.DataProviderFeatureChecker.isDataProvider(e)?this.m_contentHandler=new n.IteratingDataProviderContentHandler(this,this.element[0],e):this.throwError("Invalid data or missing module"):this.m_contentHandler=new n.StaticContentHandler(this,this.element[0]),this.m_contentHandler.RenderContent(),this.signalTaskEnd()},UpdateActiveDescendant:function(e){this.element.attr("aria-activedescendant",e.attr("id"))},SetAriaProperties:function(){this._isMultipleSelection()?this.element.attr("aria-multiselectable",!0):this._isSelectionEnabled()&&this.element.attr("aria-multiselectable",!1)},UnsetAriaProperties:function(){this.element.removeAttr("aria-activedescendant").removeAttr("aria-multiselectable")},UpdateItemAriaProperties:function(e){var t,i=this;"none"===e?(this.element.removeAttr("aria-multiselectable"),t=function(e){i.getFocusItem(e).removeAttr("aria-selected")}):("single"===e?this.element.attr("aria-multiselectable",!1):this.element.attr("aria-multiselectable",!0),t=function(e){i.getFocusItem(e).attr("aria-selected","false")});for(var n=this._getItemsCache(),o=0;o<n.length;o++)t($(n[o]))},_buildList:function(e){var t=this._getListContainer();this.SetAriaProperties(),this.m_elementOffset=this.element.get(0).offsetTop;var i=this._buildStatus();t.append(i),this.m_status=i;var n=this._buildAccInfo();t.append(n),this.m_accInfo=n,this._isTouchSupport()&&null!=this.m_dndContext&&t.append(this._buildAccInstructionText())},_buildStatus:function(){var e=$(document.createElement("div"));e.addClass("oj-icon oj-listview-loading-icon");var t=$(document.createElement("div"));return t.addClass("oj-listview-status-message oj-listview-status").attr({id:this._createSubId("status"),role:"status"}),t.append(e),t},_buildAccInfo:function(){var e=$(document.createElement("div"));return e.addClass("oj-helper-hidden-accessible").attr({id:this._createSubId("info"),role:"status"}),e},_buildAccInstructionText:function(){var e=$(document.createElement("div"));return e.addClass("oj-helper-hidden-accessible").attr({id:this._createSubId("instr")}),e.text(this.ojContext.getTranslatedString("accessibleReorderTouchInstructionText")),e},_setAccInfoText:function(e){""!==e&&this.m_accInfo.text()!==e&&this.m_accInfo.text(e)},showStatusText:function(){var e=this;this.m_showStatusTimeout||(this.m_showStatusTimeout=setTimeout(function(){$(document.getElementById(e._createSubId("empty"))).remove();var t=e.ojContext.getTranslatedString("msgFetchingData"),i=e._getListContainer();if(e.m_status.attr("aria-label",t).css("left",Math.max(0,i.outerWidth()/2-e.m_status.outerWidth()/2)).css("top",Math.max(0,i.outerHeight()/2-e.m_status.outerHeight()/2)).show(),void 0===e.m_minHeightSet){var n=e.m_status.get(0).offsetHeight,o=i.get(0).offsetHeight;i.css("minHeight",Math.max(o,n+e._getListContainerBorderWidth())),e.m_minHeightSet=!0}e.m_showStatusTimeout=null},this._getShowStatusDelay()))},_getShowStatusDelay:function(){null==this.defaultOptions&&(this.defaultOptions=_.parseJSONFromFontFamily(this.getOptionDefaultsStyleClass()));var e=parseInt(this.defaultOptions.showIndicatorDelay,10);return isNaN(e)?0:e},hideStatusText:function(){this.m_showStatusTimeout&&(clearTimeout(this.m_showStatusTimeout),this.m_showStatusTimeout=null),this.m_status.hide()},getRootElement:function(){return this._getListContainer()},_getListContainer:function(){return null==this.m_container&&(this.m_container=this._createListContainer()),this.m_container},_createListContainer:function(){var e;return this.OuterWrapper?e=$(this.OuterWrapper):(e=$(document.createElement("div")),this.element.parent()[0].replaceChild(e[0],this.element[0])),e.addClass(this.GetContainerStyleClass()).addClass("oj-component"),e.prepend(this.element),e},_getEmptyText:function(){return this.ojContext.getTranslatedString("msgNoData")},_buildEmptyText:function(){var e=this._getEmptyText(),t=document.createElement("li");return t.id=this._createSubId("empty"),t.className=this.getEmptyTextStyleClass()+" "+this.getEmptyTextMarkerClass(),t.textContent=e,t},GetState:function(e){var t=this.getFocusItem(e).attr("aria-expanded");return"true"===t?this.STATE_EXPANDED:"false"===t?this.STATE_COLLAPSED:this.STATE_NONE},SetState:function(e,t){var i=this.isExpandable();t===this.STATE_EXPANDED?(this.getFocusItem(e).attr("aria-expanded","true"),i&&e.removeClass("oj-collapsed").addClass("oj-expanded")):t===this.STATE_COLLAPSED&&(this.getFocusItem(e).attr("aria-expanded","false"),i&&e.removeClass("oj-expanded").addClass("oj-collapsed"))},_getItemOption:function(e,t,i){var n=this.GetOption("item")[e];return"function"==typeof n&&i?n.call(this,t):n},getItemFocusable:function(e){return this._getItemOption("focusable",e,!0)},getItemSelectable:function(e){return this.getItemFocusable(e)&&this._getItemOption("selectable",e,!0)},_getItemRenderer:function(){var e=this._getItemOption("renderer",null,!1);return"function"!=typeof e?null:this._WrapCustomElementRenderer(e)},getItemTemplate:function(){if(void 0===this.m_template&&(this.m_template=null,this.ojContext._IsCustomElement())){var e=this.GetSlotMap().itemTemplate;e&&e.length>0&&"template"===e[0].tagName.toLowerCase()&&(this.m_template=e[0])}return this.m_template},GetSlotMap:function(){return n.BaseCustomElementBridge.getSlotMap(this.getRootElement()[0])},itemInsertComplete:function(e,t){},BeforeInsertItem:function(){},itemRemoveComplete:function(e){if(null!=this.m_active&&this.m_active.elem&&$(this.m_active.elem).get(0)===e){var t=e.nextElementSibling;null!=t&&$(t).hasClass(this.getItemElementStyleClass())||null!=(t=e.previousElementSibling)&&$(t).hasClass(this.getItemElementStyleClass())||this.SetOption("currentItem",null),null!=t&&$(t).hasClass(this.getItemElementStyleClass())&&this.SetOption("currentItem",this.GetKey(t))}null!=e&&e.id&&null!=this.m_keyElemMap&&this.m_keyElemMap.delete(e.id)},itemRenderComplete:function(e,t){null!=this.m_dndContext&&this.m_dndContext.itemRenderComplete(e);var i=t.key;if(this._isSelectionEnabled()){var n,o=this.GetOption("selection");if(this.IsSelectable(e)){new y(o).has(i)&&(this._applySelection(e,i),this._isMultipleSelection()||o.length>1&&(n=this.FindElementByKey(i),this._setSelectionOption([i],null,n,t.data))),0===o.length&&this._isSelectionRequired()&&(this._applySelection(e,i),this._setSelectionOption([i],null,[e],t.data))}else{var s=this.GetIndexOf(o,i);if(s>-1){var r=o.slice(0);r.splice(s,1),n=new Array(r.length);for(var a=0;a<r.length;a++)n[a]=this.FindElementByKey(r[a]);this._setSelectionOption(r,null,n)}}}var l=this;if(this.m_contentHandler.IsHierarchical()&&null==this._ignoreExpanded&&this.GetState($(e))===this.STATE_COLLAPSED){var u=this.GetOption("expanded");this._isExpandAll()?(this.ojContext._IsCustomElement()||null==this._collapsedKeys)&&this.ExpandItem($(e),null,!1,null,!1,!1,!1):!this.ojContext._IsCustomElement()&&Array.isArray(u)?$.each(u,function(t,n){n!==i||null!=l._collapsedKeys&&-1!==l._collapsedKeys.indexOf(n)||l.ExpandItem($(e),null,!1,null,!1,!1,!1)}):u.has&&u.has(i)&&this.ExpandItem($(e),null,!1,null,!1,!1,!1)}null!=this.m_active&&i===this.m_active.key&&null!=this.m_active.elem&&e!==this.m_active.elem.get(0)&&(this.m_active.elem=$(e)),e.setAttribute("data-oj-context",""),c.getContext(e).getBusyContext().whenReady().then(function(){e.removeAttribute("data-oj-context"),l._disableAllTabbableElements(e)})},renderComplete:function(){var e,t=this;if(this.hideStatusText(),$(document.getElementById(this._createSubId("empty"))).remove(),this.m_items=null,this.m_groupItems=null,this._isEmptyGrid()&&this.element[0].removeChild(this.element[0].children[0]),0===this.element[0].childElementCount){var i=this._buildEmptyText();return this.element.append(i),void this.Trigger("ready",null,{})}this.ShouldUpdateScrollPosition()&&null==this.m_itemHeight&&(this.m_contentHandler.IsHierarchical()?(e=this.element.children("li."+this.getItemElementStyleClass()).first()).length>0&&(this.m_itemHeight=e.get(0).firstElementChild.offsetHeight):(e=$(this._getRootNodeForItems()).children("li."+this.getItemStyleClass()).first()).length>0&&(this.m_itemHeight=e.get(0).offsetHeight));var n=this.GetOption("currentItem");if(null!=n){var o=this.FindElementByKey(n);null==o?this.SetOption("currentItem",null):null!=this.m_active||this.SkipFocus($(o))||this.ActiveAndFocus($(o),null)}if(this._getListContainer().hasClass("oj-focus-ancestor")&&null==this.m_active&&null==n&&!this._isTouchSupport()&&this._initFocus(),this.m_scrollAndFetch=void 0,this.m_ticking&&null==this.m_scrollPosition||this.syncScrollPosition(),null==this.m_keyElemMap&&this._isSelectionEnabled()&&this._isSelectionRequired()){this.signalTaskStart("validating selection entries");var s=this.GetOption("selection").slice(0);if(s.length>0)return void this._validateSelection(s).then(function(e){e||(t._selectFirstSelectableItem(),t.Trigger("ready",null,{})),t.signalTaskEnd()})}this.Trigger("ready",null,{})},_validateSelection:function(e){var t=this._validateKeys(e);return null===t?Promise.resolve(!0):t},_isEmptyGrid:function(){return this.ShouldUseGridRole()&&this.isCardLayout()&&!this.m_contentHandler.IsHierarchical()&&this.element[0].children[0]&&0===this.element[0].children[0].children[0].childElementCount},_setScrollY:function(e,t){this._skipScrollUpdate||this.signalTaskStart("waiting for scroll handler"),this._skipScrollUpdate=!0,e.scrollTop=t,this._handlePinGroupHeader()},_setScrollX:function(e,t){this._skipScrollUpdate||this.signalTaskStart("waiting for scroll handler"),this._skipScrollUpdate=!0,n.DomUtils.setScrollLeft(e,t)},_getScrollX:function(e){return n.DomUtils.getScrollLeft(e)},_validateKeys:function(e){for(var t=this,i=0;i<e.length;i++)if(null!=this.FindElementByKey(e[i]))return Promise.resolve(!0);if(this.m_contentHandler instanceof n.IteratingDataProviderContentHandler){var o=this.m_contentHandler.getDataSource();if(o.containsKeys)return new Promise(function(i){var n=new Set;e.forEach(function(e){n.add(e)}),t.signalTaskStart("Checking for keys"),o.containsKeys({keys:n}).then(function(e){i(e.results.size>0),t.signalTaskEnd()},function(){t.signalTaskEnd(),i(!1)})})}return null},_getScrollHeight:function(){return null==this.m_scrollHeight&&(this.m_scrollHeight=this._getScroller().scrollHeight),this.m_scrollHeight},_getClientHeight:function(){return null==this.m_clientHeight&&(this.m_clientHeight=this._getScroller().clientHeight),this.m_clientHeight},_isScrollable:function(){return Math.abs(this._getScrollHeight()-this._getClientHeight())>=1},syncScrollPosition:function(e,t){var i,n,o,s,r=this;if(this.ShouldUseGridRole()&&(t=void 0===t||t,this._isScrollable())){if(this.ShouldUpdateScrollPosition()){if(null!=this.m_scrollPosition?e=this.m_scrollPosition:void 0===e&&(e=this.GetOption("scrollPosition")),t&&e.key){var a=this._validateKeys([e.key]);if(a)return void a.then(function(t){t||delete e.key,r.syncScrollPosition(e,!1)})}if(n=(i=this._getScrollCoordinates(e)).x,o=i.y,isNaN(n)&&isNaN(o))return void(null!=this.m_scrollPosition&&(this.SetOption("scrollPosition",this._getCurrentScrollPosition(s),{_context:{originalEvent:null,internalSet:!0}}),this.signalTaskEnd(),this.m_scrollPosition=null))}void 0===i&&(o=this.GetOption("scrollTop"));var l=this._getScroller();if(s=l.scrollTop,!isNaN(n)&&isNaN(o)||!isNaN(n)&&o===s&&n!==this._getScrollX(l,n)){this._setScrollX(l,n);var u=this.GetOption("scrollPosition"),d={x:n=this._getScrollX(l),y:u.y,index:u.index,key:u.key,offsetX:n,offsetY:u.offsetY};u.parent&&(d.parent=u.parent),this.SetOption("scrollPosition",d,{_context:{originalEvent:null,internalSet:!0}})}else if(o!==s){if(this._setScrollY(l,o),isNaN(n)||n===this._getScrollX(l,n)||this._setScrollX(l,n),s=l.scrollTop,Math.abs(s-o)>=1&&this.m_contentHandler.hasMoreToFetch&&this.m_contentHandler.hasMoreToFetch())return null==this.m_scrollPosition&&this.signalTaskStart("Scroll position needs to resolve further"),this.m_scrollAndFetch=!0,void(this.m_scrollPosition=e);this.SetOption("scrollPosition",this._getCurrentScrollPosition(s),{_context:{originalEvent:null,internalSet:!0}})}else e&&(null==e.key||isNaN(e.index))&&this.SetOption("scrollPosition",this._getCurrentScrollPosition(s),{_context:{originalEvent:null,internalSet:!0}});null!=this.m_scrollPosition&&(this.signalTaskEnd(),this.m_scrollPosition=null)}},restoreCurrentItem:function(){var e=this.GetOption("currentItem");if(null!=e){var t=this.FindElementByKey(e);null==t||this.SkipFocus($(t))||this.ActiveAndFocus($(t),null)}},ClearCache:function(){this.m_items=null,this.m_groupItems=null},StartAnimation:function(e,t,i){return null==i&&(i=this.getAnimationEffect(t)),vi.startAnimation(e,t,i,this.ojContext)},notifyContextMenuGesture:function(e,t,i){if(this.IsNodeEditableOrClickable($(t.target)))return!1;var n=$(t.target).closest("."+this.getItemElementStyleClass());this.PrepareContextMenu(n),n.length>0&&!this.SkipFocus($(n[0]))&&this.SetCurrentItem($(n[0]),null);var o=this.element;2===t.button?o=this._findItem($(t.target)):null!=this.m_active&&(o=this.m_active.elem);var s={launcher:o,initialFocus:"menu"};"keyboard"===i&&(s.position={my:"start top",at:"start bottom",of:this.m_active.elem}),this.ojContext._OpenContextMenu(t,i,s)},PrepareContextMenu:function(e){null!=this.m_dndContext&&this.m_dndContext.prepareContextMenu(this.ojContext._GetContextMenu())},IsElementEditableOrClickable:function(e){return null!=e.prop("nodeName").match(/^INPUT|SELECT|OPTION|BUTTON|^A\b|TEXTAREA/)},IsNodeEditableOrClickable:function(e){for(;null!=e&&e[0]!==this.element[0]&&"LI"!==e.prop("nodeName");)if(3===e[0].nodeType)e=e.parent();else{var t=e.attr("tabIndex"),i=e.attr("data-oj-tabindex");if(null!=t&&t>=0&&!e.hasClass(this.getFocusedElementStyleClass())&&!e.hasClass("oj-listview-cell-element"))return!0;if(this.IsElementEditableOrClickable(e)&&(-1!==t||-1!==i))return!0;e=e.parent()}return!1},_disableAllTabbableElements:function(e,t){var i=$(e);i.hasClass(this.getItemStyleClass())||(i=$(i.get(0).firstElementChild)),i.children().first().hasClass("oj-listview-cell-element")&&(i=$(i.get(0).firstElementChild));i.find("a, input, select, textarea, button, object, .oj-component-initnode, [tabIndex]").each(function(){$(this).removeAttr("data-first").removeAttr("data-last");var e=parseInt($(this).attr("tabIndex"),10);!(isNaN(e)||e>=0)||void 0!==t&&this===document.activeElement||$(this).attr("tabIndex",-1).attr("data-tabmod",isNaN(e)?-1:e)})},_disableAllTabbableElementsBeforeItem:function(e){for(var t=this._getItemsCache(),i=t.index(e),n=0;n<=i;n++)this._disableAllTabbableElements(t[n],!0)},_disableAllTabbableElementsAfterItem:function(e){var t=this._getItemsCache(),i=t.index(e);if(-1!==i)for(var n=i;n<=t.length-1;n++)this._disableAllTabbableElements(t[n],!0)},restoreTabIndex:function(e){return $(e).find("[data-tabmod]").each(function(){var e=parseInt($(this).attr("data-tabmod"),10);$(this).removeAttr("data-tabmod"),-1===e?$(this).removeAttr("tabIndex"):$(this).attr("tabIndex",e)})},_enableAllTabbableElements:function(e){var t=this.restoreTabIndex(e);(t=t.filter(":visible")).first().attr("data-first","true"),t.last().attr("data-last","true")},_cleanupTabbableElementProperties:function(e){$(e).find("[data-tabmod]").removeAttr("tabIndex").removeAttr("data-tabmod").removeAttr("data-first").removeAttr("data-last")},SkipFocus:function(e){return e.hasClass("oj-skipfocus")},GetFocusElement:function(){if(this._getListContainer().hasClass("oj-focus-ancestor")){if(this.m_active)return this.getFocusItem(this.m_active.elem)[0];var e=this.element.children("."+this.getEmptyTextStyleClass()).first();if(e.length>0&&0===e.attr("tabIndex"))return e[0]}return this.element[0]},_isFocusBlurTriggeredByDescendent:function(e){return void 0===e.relatedTarget||!(null==e.relatedTarget||!$.contains(this.ojContext.element.get(0),e.relatedTarget))},HandleFocus:function(e){if(this._getListContainer().addClass("oj-focus-ancestor"),null==this.m_active){var t=this._findItem($(e.target));this.m_preActive||this._isFocusBlurTriggeredByDescendent(e)||null!=t&&!this.SkipFocus(t)||this._initFocus(e)}else this.m_preActive||e.target!==this.ojContext.element[0]||this._isFocusBlurTriggeredByDescendent(e)||(this.HighlightActive(),this._focusItem(this.m_active.elem)),this.RemoveRootElementTabIndex(),this._setTabIndex(this.m_active.elem)},_initFocus:function(e){for(var t=this._getItemsCache(),i=0;i<t.length;i++){var n=$(t[i]);if(!this.SkipFocus(n)){this.SetCurrentItem(n,e);break}}if(0===t.length){var o=this.element.children("."+this.getEmptyTextStyleClass()).first();o.length>0&&(o.attr("tabIndex",0),o.focus(),this.RemoveRootElementTabIndex())}},HandleFocusOut:function(e){this.HandleBlur(e)},_supportRelatedTargetOnBlur:function(){var e=n.AgentUtils.getAgentInfo();return!(e.browser===n.AgentUtils.BROWSER.FIREFOX&&parseInt(e.browserVersion,10)<48)},_isExtraBlurEvent:function(e){var t=n.AgentUtils.getAgentInfo();return null==e.relatedTarget&&t.browser===n.AgentUtils.BROWSER.IE&&e.target===this.ojContext.element.get(0)},HandleBlur:function(e){this._supportRelatedTargetOnBlur()&&!this._isExtraBlurEvent(e)&&(this._isFocusBlurTriggeredByDescendent(e)||this.m_preActive||this._doBlur(),this._isExpandCollapseIcon(e.target)&&this._focusOutHandler($(e.target)))},_doBlur:function(){if(this._getListContainer().removeClass("oj-focus-ancestor"),this.UnhighlightActive(),null!=this.m_active)this._resetTabIndex(this.m_active.elem),this._removeSkipItemAriaLabel(this.m_active.elem);else{var e=this.element.children("."+this.getEmptyTextStyleClass()).first();e.length>0&&e.removeAttr("tabIndex")}this.SetRootElementTabIndex()},_handleMouseOut:function(e){var t=this.FindItem(e.target);null!=t&&(this.m_hoverItem=null,this._unhighlightElem(t,"oj-hover"))},_handleMouseOver:function(e){if(!this._recentTouch()){var t=this.FindItem(e.target);null==t||this.SkipFocus(t)||(this.m_hoverItem=t,this._highlightElem(t,"oj-hover"))}},_recentTouch:function(){return Date.now()-this._lastTouch<500},HandleKeyDown:function(e){if(this.isExpandable()){var t=e.keyCode;if(t===this.LEFT_KEY||t===this.RIGHT_KEY){var i=this.m_active.elem;if(t===this.LEFT_KEY){if(this.GetState(i)===this.STATE_EXPANDED)return void this.CollapseItem(i,e,!0,this.m_active.key,!0,!0)}else if(this.GetState(i)===this.STATE_COLLAPSED)return void this.ExpandItem(i,e,!0,this.m_active.key,!0,!0,!0)}}var n=this.HandleSelectionOrActiveKeyDown(e);null!=this.m_dndContext&&(n=n||this.m_dndContext.HandleKeyDown(e)),!0===n&&e.preventDefault(),this.m_keyProcessed=n},HandleKeyUp:function(e){e.keyCode===this.ESC_KEY&&this.m_keyProcessed&&e.stopPropagation(),this.m_keyProcessed=void 0},_handleMouseUpOrPanMove:function(e){this.m_preActiveItem&&this._unhighlightElem(this.m_preActiveItem,"oj-focus"),null!=this.m_dndContext&&this.m_dndContext._unsetDraggable($(e.target))},_isNodeFocusable:function(e){return null!==e&&(!!e.hasAttribute("data-tabmod")||!$(e).hasClass(this.getItemElementStyleClass())&&this._isNodeFocusable(e.parentNode))},HandleMouseDownOrTouchStart:function(e){var t=$(e.target);null!=this.m_dndContext&&this.m_dndContext._setDraggable(t);var i=this._findItem(t,!0);null!=i&&this._isClickthroughDisabled(i)&&(this.m_preActive=!0,i=null),null==i||0===i.length||this.SkipFocus(i)||t.hasClass("oj-listview-drag-handle")||(this.m_preActive=!0,this._getListContainer().hasClass("oj-focus-ancestor")||this._getListContainer().addClass("oj-focus-ancestor"),this.m_preActiveItem=i,this._highlightElem(i,"oj-focus"),this._makeFocusable(i),i.get(0).contains(document.activeElement)||this._isNodeFocusable(t[0])||this._focusItem(i),this.RemoveRootElementTabIndex(),null!=this.m_active&&this.m_active.elem.get(0)!==i.get(0)&&this._resetTabIndex(this.m_active.elem),e.originalEvent.touches&&e.originalEvent.touches.length>0&&(this.m_touchPos={x:e.originalEvent.changedTouches[0].pageX,y:e.originalEvent.changedTouches[0].pageY}))},HandleTouchEndOrCancel:function(e){if(null!=this.m_preActiveItem&&(this._unhighlightElem(this.m_preActiveItem,"oj-focus"),null!=this.m_touchPos)){var t=this.m_preActiveItem.offset(),i=this.getAnimationEffect("pointerUp");i.offsetX=this.m_touchPos.x-t.left+"px",i.offsetY=this.m_touchPos.y-t.top+"px";var n,o=this.m_preActiveItem.children("."+this.getGroupItemStyleClass());n=o.length>0?o.get(0):this.getFocusItem(this.m_preActiveItem).get(0),this.StartAnimation(n,"pointerUp",i),this.m_touchPos=null}this._lastTouch=Date.now(),this._handleMouseOut(e)},_enterActionableMode:function(){var e=this.m_active.elem;this._disableAllTabbableElements(e),this._enableAllTabbableElements(e),e.find("[data-first]").length>0&&this._setActionableMode(!0)},_exitActionableMode:function(){this._setActionableMode(!1),this._disableAllTabbableElements(this.m_active.elem)},HandleMouseClick:function(e){if(0===e.button){var t=this.getCollapseIconStyleClass(),i=this.getExpandIconStyleClass(),n=this.getGroupItemStyleClass(),o=$(e.target);if(o.hasClass(i))this._collapse(e),e.preventDefault();else if(o.hasClass(t))this._expand(e),e.preventDefault();else{var s=this._findItem(o);if(null==s||0===s.length||this.SkipFocus(s))return;if(this._isActionableMode()&&null!=this.m_active&&this.m_active.elem.get(0)!==s.get(0)&&this._exitActionableMode(),this._getListContainer().hasClass("oj-focus-ancestor")||this._getListContainer().addClass("oj-focus-ancestor"),this._isSelectionEnabled()&&this.IsSelectable(s[0])?(this._isTouchSupport()?this._handleTouchSelection(s,e):this.HandleClickSelection(s,e),this.ShouldUseGridRole()&&e.target===s.get(0)&&this._focusItem(s),this._shouldDragSelectedItems()&&this.m_dndContext.setSelectionDraggable()):this.HandleClickActive(s,e),this._isInputElement(o.get(0)))return void this._enterActionableMode();this.isExpandable()&&o.closest("."+n)&&(this.GetState(s)===this.STATE_COLLAPSED?this._expand(e):this.GetState(s)===this.STATE_EXPANDED&&this._collapse(e))}}},_shouldDragSelectedItems:function(){return null!=this.m_dndContext&&!this.m_dndContext.shouldDragCurrentItem()},_isTouchSupport:function(){return n.DomUtils.isTouchSupported()},_isNonWindowTouch:function(){return this._isTouchSupport()&&n.AgentUtils.getAgentInfo().os!==n.AgentUtils.OS.WINDOWS},_ctrlEquivalent:function(e){return n.DomUtils.isMetaKeyPressed(e)},_createSubId:function(e){return[this.element.attr("id"),e].join(":")},FindItem:function(e){return $(e).hasClass(this.getGroupStyleClass())?null:$(e).closest("."+this.getItemElementStyleClass())},_isClickthroughDisabled:function(e){return e.hasClass("oj-clickthrough-disabled")},_findItem:function(e,t){if(e.hasClass(this.getGroupStyleClass()))return null;for(var i=e;i.length>0;){if(this._isClickthroughDisabled(i))return t?i:null;if(i.hasClass(this.getItemElementStyleClass()))return i;i=i.parent()}return null},_getListContainerBorderWidth:function(){return null==this.m_borderWidth&&(this.m_borderWidth=parseInt(this._getListContainer().css("border-top-width"),10)+parseInt(this._getListContainer().css("border-bottom-width"),10)),this.m_borderWidth},scrollToItem:function(e){var t=e.key;if(null!=t){var i=this.FindElementByKey(t);if(null!=i)if($(i).hasClass(this.getItemStyleClass()))this._scrollToVisible(i);else{var n=$(i).children("."+this.getGroupItemStyleClass()).first();this._scrollToGroupHeader(n.get(0))}}},_scrollToVisible:function(e){var t=0,i=e.offsetTop,n=e.offsetHeight,o=this._getListContainer()[0],s=o.scrollTop,r=o.offsetHeight;if(null!=this.m_groupItemToPin){var a=parseInt(this.m_groupItemToPin.style.top,10),l=$(this.m_groupItemToPin).outerHeight();i<=a&&a<i+n?t=(n+i-a)/2:i>=a&&i<a+l&&(t=(a+l-i)/2)}if(i>=s&&i+n<=s+r)t>0&&(o.scrollTop=s-t);else{var u=Math.max(0,Math.min(i-t,Math.abs(i+n-r)));u>s&&(u+=this._getListContainerBorderWidth()),o.scrollTop=u}},GetKey:function(e){return this.m_contentHandler.GetKey(e)},FindElementByKey:function(e){if(null!=this.m_keyElemMap){var t=this.m_keyElemMap.get(e);if(null!=t)return document.getElementById(t)}return this.m_contentHandler.FindElementByKey(e)},GetIndexOf:function(e,t){for(var i=0;i<e.length;i++)if(t===e[i]||n.Object.compareValues(t,e[i]))return i;return-1},_isExpandCollapseIcon:function(e){return $(e).hasClass(this.getExpandIconStyleClass())||$(e).hasClass(this.getCollapseIconStyleClass())},IsArrowKey:function(e){return this.isCardLayout()?e===this.UP_KEY||e===this.DOWN_KEY||e===this.LEFT_KEY||e===this.RIGHT_KEY:e===this.UP_KEY||e===this.DOWN_KEY},_getItemsCache:function(){if(null==this.m_items){var e=this.getGroupCollapseStyleClass(),t="."+this.getItemElementStyleClass()+":visible";this.m_items=this.element.find(t).filter(function(){return!$(this).parent().hasClass(e)||!$(this).parent().parent().hasClass("oj-collapsed")})}return this.m_items},_handleLastItemKeyboardFocus:function(e){var t=e.get(0).nextElementSibling;if(null==t||!$(t).hasClass(this.getItemElementStyleClass())){if(this.m_contentHandler.IsHierarchical()&&e.parent().hasClass(this.getGroupStyleClass())&&null!=e.parent().parent().get(0).nextElementSibling)return;var i=this._getScroller(),n=this._getScrollHeight();i.scrollTop<n&&(i.scrollTop=n)}},HandleArrowKeys:function(e,t,i){if(!this.m_contentHandler.IsReady())return!0;var n;n=!t||this.m_isNavigate?this.m_active.elem:this.m_selectionFrontier;var o=!1;switch(e){case this.UP_KEY:this.isCardLayout()&&$(n).hasClass(this.getItemStyleClass())?this._gotoItemAbove(n,t,i):this._gotoPrevItem(n,t,i),o=!0;break;case this.DOWN_KEY:this.isCardLayout()&&$(n).hasClass(this.getItemStyleClass())?this._gotoItemBelow(n,t,i):this._gotoNextItem(n,t,i),o=!0;break;case this.LEFT_KEY:case this.RIGHT_KEY:this.isCardLayout()&&("rtl"===this.ojContext._GetReadingDirection()&&(e=e===this.LEFT_KEY?this.RIGHT_KEY:this.LEFT_KEY),e===this.LEFT_KEY?this._gotoPrevItem(n,t,i):this._gotoNextItem(n,t,i),o=!0)}return o},_gotoNextItem:function(e,t,i){var n=this._getItemsCache(),o=n.index(e)+1;if(o<n.length){for(var s=$(n[o]);this.SkipFocus(s);){if((o+=1)===n.length)return;s=$(n[o])}t?(this._extendSelection(s,i),this.m_isNavigate=!1):(this.SetCurrentItem(s,i),this.m_isNavigate=!0),this._handleLastItemKeyboardFocus(s)}},_gotoPrevItem:function(e,t,i){var n=this._getItemsCache(),o=n.index(e)-1;if(o>=0){for(var s=$(n[o]);this.SkipFocus(s);){if((o-=1)<0)return;s=$(n[o])}t?(this._extendSelection(s,i),this.m_isNavigate=!1):(this.SetCurrentItem(s,i),this.m_isNavigate=!0)}},_getColumnCount:function(e){var t,i;return e.each(function(e){var n=this.offsetTop;if(void 0===i)i=n;else if(i!==n)return!1;t=e}),t+1},_updateSkipItemAriaLabel:function(e,t){var i=this._createSubId("extra_info");if(null==this.m_skipAriaLabelText){var n=$(document.createElement("div"));n.addClass("oj-helper-hidden-accessible").attr("id",i),this._getListContainer().append(n),this.m_skipAriaLabelText=n}this.m_skipAriaLabelText.text(this.ojContext.getTranslatedString("accessibleNavigateSkipItems",{numSkip:t}));var o=this.getFocusItem(e);o.uniqueId().attr("aria-labelledby",i+" "+o.prop("id"))},_removeSkipItemAriaLabel:function(e){var t=this.getFocusItem(e);t.length>0&&t.get(0).removeAttribute("aria-labelledby")},_gotoItemAbove:function(e,t,i){var n,o;if(e.hasClass(this.getItemElementStyleClass())){var s=e.parent(),r=s.children("li."+this.getItemElementStyleClass()),a=this._getColumnCount(r),l=r.index(e),u=l-a;if(u<0?s.hasClass(this.getGroupStyleClass())&&s.parent().hasClass(this.getItemElementStyleClass())&&(n=s.parent(),o=l):(n=$(r.get(u)),o=a-1),n&&n.length>0){if(this.SkipFocus(n))return;t?(this._extendSelection(n,i),this.m_isNavigate=!1):(null!=o&&o>0&&this._updateSkipItemAriaLabel(n,o),this.SetCurrentItem(n,i),this.m_isNavigate=!0)}}else this._gotoPrevItem(e)},_gotoItemBelow:function(e,t,i){var n,o;if(e.hasClass(this.getItemElementStyleClass())){var s=e.parent(),r=s.children("li."+this.getItemElementStyleClass()),a=this._getColumnCount(r),l=r.index(e),u=l+a;if(u>=r.length){var d=Math.ceil(r.length/a);o=r.length-1-l,l<Math.max(0,(d-1)*a)?(n=r.last(),o-=1):s.hasClass(this.getGroupStyleClass())&&(n=s.parent().next("li."+this.getItemElementStyleClass()))}else n=$(r.get(u)),o=a-1;if(n.length>0){if(this.SkipFocus(n))return;t?(this._extendSelection(n,i),this.m_isNavigate=!1):(null!=o&&o>0&&this._updateSkipItemAriaLabel(n,o),this.SetCurrentItem(n,i),this.m_isNavigate=!0),this._handleLastItemKeyboardFocus(n)}}else this._gotoNextItem(e)},_isActionableMode:function(){return"actionable"===this.m_keyMode},_setActionableMode:function(e){this.m_keyMode=e?"actionable":"navigation",e||this.element[0].focus()},getFocusItem:function(e){if(!e.hasClass(this.getFocusedElementStyleClass()))return $(e.find("."+this.getFocusedElementStyleClass()).first());if(this.ShouldUseGridRole()&&"row"===e.attr("role")){var t=e.children(".oj-listview-cell-element").first();return 0===t.length?e.children().first():t}return e},SetRootElementTabIndex:function(){this.element.attr("tabIndex",0)},RemoveRootElementTabIndex:function(){this.element.removeAttr("tabIndex")},_setTabIndex:function(e){this.getFocusItem(e).attr("tabIndex",0)},_resetTabIndex:function(e){var t=!0;"presentation"===e.attr("role")&&(t=!1);var i=this.getFocusItem(e);t?i.removeAttr("tabIndex"):i.attr("tabIndex",-1)},_makeFocusable:function(e){this._setTabIndex(e)},getSingleFocusableElement:function(e){var t="a, input, select, textarea, button",i=e.children(t);return 1===i.length&&0===i.first().find(t).length?i.first():e},_setCurrentItemOption:function(e,t,i){var n={item:this.ojContext._IsCustomElement()?i:$(i)};this.SetOption("currentItem",e,{_context:{originalEvent:t,internalSet:!0,extraData:n},changed:!0})},_setActive:function(e,t,i){var n;if(null!=e){var o=e[0],s=this.GetKey(o);if(null==this.m_active||s!==this.m_active.key){var r={key:s,item:e};return null!=this.m_active&&(r.previousKey=this.m_active.key,r.previousItem=this.m_active.elem,this._shouldDragSelectedItems()&&this._isTouchSupport()&&this.m_dndContext._unsetDraggable(r.previousItem),this._removeSkipItemAriaLabel(r.previousItem)),!!this.Trigger("beforeCurrentItem",t,r)&&(n={key:s,elem:e},this.m_active=n,this._shouldDragSelectedItems()&&this._isTouchSupport()&&this.m_dndContext._setDraggable(e),void 0!==i&&i||(this._makeFocusable(e),this.HighlightActive(),(null==t||t.originalEvent&&"click"!==t.originalEvent.type)&&this._focusItem(e),this.RemoveRootElementTabIndex(),r.previousItem&&this._resetTabIndex(r.previousItem)),!0)}s===this.m_active.key&&(n={key:s,elem:e},this.m_active=n,void 0!==i&&i||(this._makeFocusable(e),this.RemoveRootElementTabIndex()))}else this.m_active=null;return!1},_focusItem:function(e){this.getFocusItem(e).focus()},HighlightActive:function(){if(null!=this.m_active&&this._getListContainer().hasClass("oj-focus-ancestor")){var e=this.m_active.elem;this._highlightElem(e,"oj-focus")}},UnhighlightActive:function(){null!=this.m_active&&this._unhighlightElem(this.m_active.elem,"oj-focus")},HandleClickActive:function(e,t){var i=null!=this.m_active?this.m_active.elem.get(0):null;null==i||$(i).hasClass(this.getItemStyleClass())||(i=i.firstElementChild),null!=t&&null!=i&&i!==t.target&&i.contains(t.target)||this.SetCurrentItem(e,t,!this.ShouldUseGridRole()||t.target!==e.get(0))},SetCurrentItem:function(e,t,i){this.ActiveAndFocus(e,t,i)&&this._setCurrentItemOption(this.GetKey(e[0]),t,e.get(0))},ActiveAndFocus:function(e,t,i){this._scrollToVisible(e[0]),this.UnhighlightActive();var n=this._setActive(e,t,i);return this.HighlightActive(),n},enforceSelectionRequired:function(){if(this._isSelectionEnabled()&&this._isSelectionRequired()){var e=this.GetOption("selection");null!=e&&0!==e.length||this._selectFirstSelectableItem()}},_getFirstSelectableItem:function(){var e=this.element[0].querySelector(".oj-listview-cell-element[aria-selected]");return null==e?null:e.parentNode},_selectFirstSelectableItem:function(){var e=this._getFirstSelectableItem();if(e){var t=this.m_contentHandler.GetKey(e);null!=t&&(this._applySelection(e,t),this._setSelectionOption([t],null,[e]))}},_isSelectionEnabled:function(){return"none"!==this.GetOption("selectionMode")},_isSelectionRequired:function(){return this.GetOption("selectionRequired")},_isMultipleSelection:function(){return"multiple"===this.GetOption("selectionMode")},IsSelectable:function(e){return this.getFocusItem($(e)).get(0).hasAttribute("aria-selected")},_filterSelection:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.FindElementByKey(e[i]);if((null==n||null!=n&&this.IsSelectable(n))&&(t.push(e[i]),!this._isMultipleSelection()))break}return t},_setSelectionOption:function(e,t,i,o){var s={key:null,data:null},r=this.GetOption("firstSelectedItem");null!=r&&((null==e||0===e.length)&&null!=r.key||e[0]!==r.key&&!n.Object.compareValues(e[0],r.key))&&(null!=e&&e.length>0&&(s={key:e[0],data:null!=o?o:this.getDataForVisibleItem({key:e[0]})}),this.SetOption("firstSelectedItem",s,{_context:{originalEvent:t,internalSet:!0},changed:!0}));var a={items:this.ojContext._IsCustomElement()?i:null==i?$({}):$(i)};this.SetOption("selection",e,{_context:{originalEvent:t,internalSet:!0,extraData:a},changed:!0})},_unhighlightSelection:function(){if(null!=this.m_keyElemMap){var e=this;$.each(this.GetOption("selection"),function(t,i){var n=e.FindElementByKey(i);null!=n&&e._unhighlightElem(n,"oj-selected")})}},_highlightElem:function(e,t){this.HighlightUnhighlightElem(e,t,!0)},_unhighlightElem:function(e,t){this.HighlightUnhighlightElem(e,t,!1)},HighlightUnhighlightElem:function(e,t,i){var n=$(e);"oj-selected"===t&&this.getFocusItem(n).attr("aria-selected",i?"true":"false");var o=n.children("."+this.getGroupItemStyleClass());o.length>0&&(n=$(o[0])),"oj-focus"===t?i?"actionable"!==this.m_keyMode&&this._focusInHandler(n):this._focusOutHandler(n):i?n.addClass(t):n.removeClass(t)},HandleClickSelection:function(e,t){this._scrollToVisible(e[0]);var i=this._ctrlEquivalent(t),n=t.shiftKey;this._isMultipleSelection()&&(i||n)?!i&&n?this._extendSelection(e,t):this._augmentSelectionAndFocus(e,t):this.SelectAndFocus(e,t)},_handleTouchSelection:function(e,t){this._isMultipleSelection()?t.shiftKey?this._extendSelection(e,t):this._augmentSelectionAndFocus(e,t):this.SelectAndFocus(e,t)},_clearSelection:function(e,t){this._unhighlightSelection(),e&&(this._isSelectionRequired()?this._selectFirstSelectableItem():this._setSelectionOption([],null,null)),this.m_selectionFrontier=void 0===t?null:t},SelectAndFocus:function(e,t){var i=this.GetKey(e[0]),n=this.GetOption("selection"),o=this.GetIndexOf(n,i);o>-1&&1===n.length&&this._isSelectionRequired()||(this._clearSelection(o>-1),-1===o&&this._augmentSelectionAndFocus(e,t,[]))},_extendSelection:function(e,t){null!=this.m_active&&(this.m_selectionFrontier!==e&&(this._unhighlightElem(e,"oj-focus"),this._extendSelectionRange(this.m_active.elem,e,t)))},_extendSelectionRange:function(e,t,i,n){!0===n?this._clearSelection(!1,this.m_selectionFrontier):this._clearSelection(!1,t),this._highlightRange(e,t,i),this.HighlightActive(),this._scrollToVisible(t[0])},_highlightRange:function(e,t,i){var n,o,s=[],r=[],a=this._getItemsCache(),l=a.index(e),u=a.index(t);l>u?(n=u,o=l):(n=l,o=u);for(var d=n;d<=o;d++){var h=a[d];if(this.IsSelectable(h)){var c=this.m_contentHandler.GetKey(h);this._applySelection(h,c),s.push(c),r.push(h)}}this._setSelectionOption(s,i,r)},_applySelection:function(e,t){null==this.m_keyElemMap&&(this.m_keyElemMap=this.m_contentHandler.createKeyMap()),this.m_keyElemMap.set(t,$(e).attr("id")),this._highlightElem(e,"oj-selected")},_augmentSelectionAndFocus:function(e,t,i){var n=e,o=this.GetKey(e[0]);null==i&&(i=this.GetOption("selection").slice(0));var s=null!=this.m_active?this.m_active.elem.get(0):null;(null==s||$(s).hasClass(this.getItemStyleClass())||(s=s.firstElementChild),null==t||null!=s&&s!==t.target&&s.contains(t.target))||(this.UnhighlightActive(),this._setActive(n,t)&&this._setCurrentItemOption(o,t,n.get(0)),this.HighlightActive());if(null!=(s=null!=this.m_active?this.m_active.elem.get(0):null)&&s===n.get(0)){var r=this.GetIndexOf(i,o);if(r>-1){if(1===i.length&&this._isSelectionRequired())return;this._unhighlightElem(e,"oj-selected"),i.splice(r,1)}else this.m_selectionFrontier=e,this._applySelection(e,o),i.push(o);for(var a=new Array(i.length),l=0;l<i.length;l++)a[l]=this.FindElementByKey(i[l]);this._setSelectionOption(i,t,a)}else null!=i&&0===i.length&&this._setSelectionOption(i,t,[])},ToggleSelection:function(e,t,i){var n=this.GetOption("selection").slice(0),o=this.m_active.elem,s=this.m_active.key,r=this.GetIndexOf(n,s);if(r>-1){if(i||1===n.length&&this._isSelectionRequired())return;this._unhighlightElem(o,"oj-selected"),n.splice(r,1),0===n.length&&(this.m_selectionFrontier=null)}else this.IsSelectable(o[0])&&(t||(this._clearSelection(!1),n.length=0),this.m_selectionFrontier=o,this._applySelection(o,s),n.push(s));for(var a=new Array(n.length),l=0;l<n.length;l++)a[l]=this.FindElementByKey(n[l]);this._setSelectionOption(n,e,a)},_isInputElement:function(e){return null!=e.nodeName.match(/^INPUT|SELECT|OPTION|TEXTAREA/)&&!e.readOnly},HandleSelectionOrActiveKeyDown:function(e){var t,i,n,o=!1;if(null==this.m_active||e.isDefaultPrevented())return!1;var s=e.keyCode,r=this.m_active.elem;if(this._isActionableMode()){if(s===this.ESC_KEY)this._exitActionableMode(),this.HighlightActive(),this._focusItem(r),this._setTabIndex(r),o=!0;else if(s===this.TAB_KEY){n=r.find("[data-first]");var a=r.find("[data-last]");e.shiftKey?n.length>0&&a.length>0&&n!==a&&e.target===n[0]&&(a[0].focus(),o=!0):n.length>0&&a.length>0&&n!==a&&e.target===a[0]&&(n[0].focus(),o=!0)}}else s===this.F2_KEY?(this._enterActionableMode(),(n=r.find("[data-first]")).length>0&&(n[0].focus(),this._isExpandCollapseIcon(n)&&this._focusInHandler(n),r.hasClass(this.getItemStyleClass())||(r=r.children("."+this.getGroupItemStyleClass()).first()),r.removeClass("oj-focus-highlight"))):s===this.SPACE_KEY&&this._isSelectionEnabled()?(t=this._ctrlEquivalent(e),(i=e.shiftKey)&&!t&&null!=this.m_selectionFrontier&&this._isMultipleSelection()?this._extendSelectionRange(this.m_selectionFrontier,this.m_active.elem,e,!0):this.ToggleSelection(e,t&&!i&&this._isMultipleSelection(),!1),o=!0):s===this.ENTER_KEY&&this._isSelectionEnabled()?this.ToggleSelection(e,!1,!0):this.IsArrowKey(s)?(t=this._ctrlEquivalent(e),i=e.shiftKey,t||(o=this.HandleArrowKeys(s,i&&this._isSelectionEnabled()&&this._isMultipleSelection(),e))):s===this.TAB_KEY&&(e.shiftKey?this._disableAllTabbableElementsBeforeItem(r):this._disableAllTabbableElementsAfterItem(r));return o},_isDisclosing:function(e){return!(!e||!this.m_disclosing)&&this.m_disclosing.indexOf(e)>-1},_setDisclosing:function(e,t){if(null!=e)if(null==this.m_disclosing&&(this.m_disclosing=[]),t)this.m_disclosing.push(e);else for(var i=this.m_disclosing.indexOf(e);i>-1;)this.m_disclosing.splice(i,1),i=this.m_disclosing.indexOf(e)},getAnimationEffect:function(e){null==this.defaultOptions&&(this.defaultOptions=_.parseJSONFromFontFamily(this.getOptionDefaultsStyleClass()));var t=this.defaultOptions.animation;return null==t?null:t[e]},isExpandable:function(){return"none"!==this.GetOption("drillMode")},_isExpandAll:function(){var e=this.GetOption("expanded");if("auto"===e){if(!this.isExpandable())return!0}else if("all"===e)return!0;return!!e.isAddAll&&(!this.isExpandable()&&e instanceof n._ojListViewExpandedKeySet||e.isAddAll())},expandKey:function(e,t,i,n,o){var s=this.FindElementByKey(e);null!=s&&this.ExpandItem($(s),null,o,e,t,n,i)},_expand:function(e){var t=this.FindItem(e.target);null!=t&&t.length>0&&this.ExpandItem(t,e,!0,null,!0,!0,!0)},ExpandItem:function(e,t,i,n,o,s,r){if(this.GetState(e)===this.STATE_COLLAPSED&&(null==n&&(n=this.GetKey(e[0])),!i||!this._isDisclosing(n))){var a={item:e,key:n};if(r)if(!this.Trigger("beforeExpand",t,a)&&o)return;if(this.signalTaskStart("Expand item: "+n),i&&this._setDisclosing(n,!0),this.m_contentHandler.Expand(e,function(e){this._expandSuccess(e,i,t,a,s)}.bind(this)),this.m_items=null,null!=t&&t.stopPropagation(),!this.ojContext._IsCustomElement()&&null!=this._collapsedKeys){var l=this._collapsedKeys.indexOf(n);-1!==l&&this._collapsedKeys.splice(l,1)}this.signalTaskEnd()}},_expandSuccess:function(e,t,i,n,o){var s=this;this.signalTaskStart("Handle results from successful expand"),e.key=n.key;var r=this.AnimateExpand($(e),t,i),a=e.parentNode;a=$(a),this.SetState(a,this.STATE_EXPANDED);var l=this.getCollapseIconStyleClass(),u=this.getExpandIconStyleClass(),d=this.getExpandingIconStyleClass(),h=this.getGroupItemStyleClass();a.children("."+h).find("."+l+", ."+d).removeClass(l).removeClass(d).addClass(u),o&&r.then(function(){if(s.ojContext._IsCustomElement()){var t=s.GetOption("expanded");if(s._isKeySet(t)&&!t.has(e.key)){var o=t.add([e.key]);s.SetOption("expanded",o,{_context:{originalEvent:i,internalSet:!0},changed:!0})}}s.Trigger("expand",i,n)}),r.then(function(){s.signalTaskEnd()})},_adjustAncestorsMaxHeight:function(e,t){e.parentsUntil("ul.oj-component-initnode","ul."+this.getGroupStyleClass()).each(function(){var e=parseInt($(this).css("maxHeight"),10);e>0&&$(this).css("maxHeight",e+t+"px")})},AnimateExpand:function(e,t,i){var n,o=0,s=this,r=new Promise(function(e){n=e});if(t){this.signalTaskStart("Animate expand of group item"),e.css("maxHeight","100%"),e.children().each(function(){o+=$(this).outerHeight(!0)}),this._isTouchSupport()&&this._adjustAncestorsMaxHeight(e,o),e.css("maxHeight",o+"px"),this.signalTaskStart("Kick off expand animation");var a=e.get(0);this.StartAnimation(a,"expand").then(function(){s._handleExpandTransitionEnd(e,n)}),this.signalTaskEnd()}else this._isTouchSupport()?(e.children().each(function(){o+=$(this).outerHeight(!0)}),e.css("maxHeight",o+"px"),this._adjustAncestorsMaxHeight(e,o)):e.css("maxHeight",""),this.AnimateExpandComplete(e),n(null);return r},_handleExpandTransitionEnd:function(e,t){this._isTouchSupport()||e.css("maxHeight",""),this.AnimateExpandComplete(e),t(null),this.signalTaskEnd()},AnimateExpandComplete:function(e){e.removeClass(this.getGroupCollapseStyleClass()).addClass(this.getGroupExpandStyleClass()),this._setDisclosing(e[0].key,!1)},collapseKey:function(e,t,i,n){var o=this.FindElementByKey(e);null!=o&&this.CollapseItem($(o),null,n,e,t,i)},_collapse:function(e){var t=this.FindItem(e.target);null!=t&&t.length>0&&this.CollapseItem(t,e,!0,null,!0,!0)},CollapseItem:function(e,t,i,n,o,s){var r=this;if(this.GetState(e)===this.STATE_EXPANDED&&(null==n&&(n=this.GetKey(e[0])),!i||!this._isDisclosing(n))){var a={item:e,key:n};if(!!this.Trigger("beforeCollapse",t,a)||!o){this.signalTaskStart("Collapse item: "+n),i&&this._setDisclosing(n,!0);var l=this.AnimateCollapse(e,n,i,t);this.SetState(e,this.STATE_COLLAPSED);var u=this.getCollapseIconStyleClass(),d=this.getExpandIconStyleClass();e.find("."+d).first().removeClass(d).addClass(u),this.m_items=null,null!=t&&t.stopPropagation(),s&&l.then(function(){if(r.ojContext._IsCustomElement()){var e=r.GetOption("expanded");if(r._isKeySet(e)){var i=e.delete([n]);r.SetOption("expanded",i,{_context:{originalEvent:t,internalSet:!0},changed:!0})}}r.Trigger("collapse",t,a)}),this.ojContext._IsCustomElement()||(null==this._collapsedKeys&&(this._collapsedKeys=[]),-1===this._collapsedKeys.indexOf(n)&&this._collapsedKeys.push(n)),l.then(function(){r.signalTaskEnd()})}}},AnimateCollapse:function(e,t,i,n){var o,s=0,r=this,a=new Promise(function(e){o=e}),l=e.children("ul").first();if(l[0].key=t,i){this.signalTaskStart("Animate collapse"),l.children().each(function(){s+=$(this).outerHeight()}),l.css("maxHeight",s+"px");var u=this.getAnimationEffect("collapse");u.persist="all",this.signalTaskStart("Kick off collapse animation");var d=l.get(0);this.StartAnimation(d,"collapse",u).then(function(){r._handleCollapseTransitionEnd(l,o)}),this.signalTaskEnd()}else l.css("maxHeight","0px"),this.AnimateCollapseComplete(l),o(null);return a},_handleCollapseTransitionEnd:function(e,t){this.AnimateCollapseComplete(e),t(null),this.signalTaskEnd()},AnimateCollapseComplete:function(e){e.removeClass(this.getGroupExpandStyleClass()).addClass(this.getGroupCollapseStyleClass()),null!=this.m_contentHandler&&this.m_contentHandler.Collapse(e),this._setDisclosing(e[0].key,!1)},_collapseAll:function(){this.signalTaskStart("Collapse all");var e=this;this._getItemsCache().each(function(){e.CollapseItem($(this),null,!1,null,!1,!1)}),this.signalTaskEnd()},getExpanded:function(){var e=[],t=this;return this._getItemsCache().each(function(){var i=$(this);t.GetState(i)===t.STATE_EXPANDED&&e.push(t.GetKey(i[0]))}),e},getWidgetConstructor:function(){return w.__GetWidgetConstructor(this.element)},GetContainerStyleClass:function(){return this._isNonWindowTouch()?"oj-listview oj-listview-container-touch":"oj-listview oj-listview-container"},GetStyleClass:function(){return"oj-listview-element"},getItemStyleClass:function(){return"oj-listview-item"},getFocusedElementStyleClass:function(){return"oj-listview-focused-element"},getItemElementStyleClass:function(){return"oj-listview-item-element"},getGroupItemStyleClass:function(e){return e&&this._isPinGroupHeader()&&this._isPositionStickySupported()?"oj-listview-group-item oj-sticky":"oj-listview-group-item"},getGroupStyleClass:function(){return"oj-listview-group"},getGroupExpandStyleClass:function(){return"oj-listview-collapsible-transition"},getGroupCollapseStyleClass:function(){return this.getGroupExpandStyleClass()},getCollapseIconStyleClass:function(){return"oj-listview-collapse-icon"},getExpandIconStyleClass:function(){return"oj-listview-expand-icon"},getExpandingIconStyleClass:function(){return"oj-listview-expanding-icon"},getEmptyTextStyleClass:function(){return"oj-listview-no-data-message"},getEmptyTextMarkerClass:function(){return"oj-listview-empty-text"},getDepthStyleClass:function(e){return""},getOptionDefaultsStyleClass:function(){return"oj-listview-option-defaults"},_isPositionStickySupported:function(){return this._isTouchSupport()&&n.AgentUtils.getAgentInfo().os===n.AgentUtils.OS.IOS},_preventMouseWheelOverscroll:function(e,t){var i=t.originalEvent.wheelDelta;if(!isNaN(i)&&void 0!==this.m_contentHandler.hasMoreToFetch){var n=e.scrollTop;if(i<0){var o=this._getScrollHeight();this.m_contentHandler.hasMoreToFetch()&&n+this._getClientHeight()+Math.abs(i)>=o&&(e.scrollTop=o,t.preventDefault())}else n>0&&n-i<=0&&(e.scrollTop=0,t.preventDefault())}},_getScrollEventElement:function(){var e=this._getScroller();return e===document.body||e===document.documentElement?window:e},_findClosestElementToTop:function(e,t,i){var n=!1;if(!(0===e.length||t>=e.length)){var o,s=e[t],r=i-(o=0===t?0:s.offsetTop),a={index:t,elem:s,offsetTop:o,offset:r};if(Math.abs(r)<1)return a;var l=r>0;for(l?t+=1:t-=1;!n&&t>=0&&t<e.length;){if(o=(s=e[t]).offsetTop,n=(r=Math.abs(i-o))<1||(l?i<=o:i>=o)){(r<1||!l)&&(a={index:t,elem:s,offsetTop:o,offset:r});break}l&&a.offsetTop===o||(a={index:t,elem:s,offsetTop:o,offset:r}),l?t+=1:t-=1}return n||(t=l?e.length-1:0,a.index=t,a.elem=e[t]),a}},_getRootNodeForItems:function(){return this.isCardLayout()?this.element.get(0).firstElementChild.firstElementChild:this.element.get(0)},_getCurrentScrollPosition:function(e){var t,i,n={},o=this._getScroller();void 0===e&&(e=o.scrollTop),n.x=this._getScrollX(o),n.y=e;var s=this.m_contentHandler.IsHierarchical();if(!isNaN(this.m_itemHeight)&&this.m_itemHeight>0){var r=s?this._getItemsCache():$(this._getRootNodeForItems()).children("li."+this.getItemElementStyleClass()),a=this.GetOption("scrollPosition");Math.abs(a.y-e)<this.MINIMUM_ITEM_HEIGHT&&null!=a.key&&!isNaN(a.index)&&(s?null!=(i=this.FindElementByKey(a.key))&&(t=r.index(i)):t=a.index),isNaN(t)&&(t=Math.floor(e/this.m_itemHeight));var l=this._findClosestElementToTop(r,t,e);if(null!=l){if(i=l.elem,s){var u=i.parentNode;u!==this.element.get(0)&&(n.parent=this.GetKey(u.parentNode)),n.key=this.GetKey(l.elem),n.index=$(u).children().index(i)}else n.index=l.index,n.key=this.GetKey(l.elem);n.offsetY=l.offset,n.offsetX=n.x}}return n},_getOffsetTop:function(e){var t=this.element.get(0).offsetTop;return isNaN(this.m_elementOffset)||this.m_elementOffset===t?e.offsetTop:Math.max(0,e.offsetTop-t)},_getScrollTopByIndex:function(e,t){var i;if(null!=t)null!=(i=this.FindElementByKey(t))&&(i=$(i).children("ul").first());else{if(0===e)return 0;i=this.element.get(0),this.isCardLayout()&&(i=i.firstElementChild.firstElementChild)}if(null!=i){var n=$(i).children("."+this.getItemElementStyleClass())[e];if(null!=n)return this._getOffsetTop(n)}if(this.m_contentHandler.hasMoreToFetch&&this.m_contentHandler.hasMoreToFetch())return this._getScrollHeight()},_getScrollTopByKey:function(e){var t=this.FindElementByKey(e);return null!=t?this._getOffsetTop(t):this.m_contentHandler.hasMoreToFetch&&this.m_contentHandler.hasMoreToFetch()?this._getScrollHeight():void 0},_getScrollCoordinates:function(e){var t,i=e.x,n=e.offsetX;isNaN(i)||isNaN(n)||(i+=n);var o=e.key;isNaN(t)&&null!=o&&(t=this._getScrollTopByKey(o));var s=e.parent,r=e.index;isNaN(t)&&!isNaN(r)&&(t=this._getScrollTopByIndex(r,s));var a=e.offsetY;return isNaN(t)||isNaN(a)||(t+=a),isNaN(t)&&!isNaN(e.y)&&(t=e.y),{x:i,y:t}},_handleScroll:function(e){if(null!=this.m_contentHandler&&this.ShouldUseGridRole()){var t=this._getScroller().scrollTop;this.ojContext._IsCustomElement()||this.SetOption("scrollTop",t,{_context:{originalEvent:e,internalSet:!0}}),this.ShouldUpdateScrollPosition()&&this.SetOption("scrollPosition",this._getCurrentScrollPosition(t),{_context:{originalEvent:e,internalSet:!0}}),this._handlePinGroupHeader()}},_unregisterScrollHandler:function(){var e=$(this._getScrollEventElement());return this.ojContext._off(e,"scroll mousewheel"),e},_registerScrollHandler:function(){var e=this,t=this._unregisterScrollHandler();this.ojContext._on(t,{scroll:function(t){e._skipScrollUpdate||e.m_ticking||(window.requestAnimationFrame(function(){e._handleScroll(t),e.m_ticking=!1}),e.m_ticking=!0),e._skipScrollUpdate&&e.signalTaskEnd(),e._skipScrollUpdate=!1}}),"loadMoreOnScroll"===this.options.scrollPolicy&&this.ojContext._on(t,{mousewheel:function(t){e._preventMouseWheelOverscroll(e._getScroller(),t)}})},_isPinGroupHeader:function(){return"static"!==this.GetOption("groupHeaderPosition")&&this.m_contentHandler.IsHierarchical()},_getGroupItemsCache:function(){if(null==this.m_groupItems){var e="."+this.getGroupItemStyleClass()+":visible";this.m_groupItems=this.element.find(e).filter(function(){return!$(this).parent().hasClass("oj-collapsed")&&$(this).next().children().length>0})}return this.m_groupItems},_unpinGroupItem:function(e){$(e).removeClass("oj-pinned"),e.style.top="auto",e.style.width="auto"},_getNextGroupItem:function(e){var t=this._getGroupItemsCache(),i=t.index(e);return i>-1&&i<t.length-1?t[i+1]:null},_pinGroupItem:function(e,t){var i=e.offsetWidth,n=e.offsetHeight,o=this._getNextGroupItem(e);null!=o&&o.offsetTop<=t+n+5&&(t-=n),$(e).addClass("oj-pinned"),e.style.top=t+"px",e.style.width=i+"px"},_handlePinGroupHeader:function(){var e;if(this._isPinGroupHeader()&&!this._isPositionStickySupported()){var t=this._getScroller().scrollTop;if(null!=this.m_groupItemToPin&&0===t)return this._unpinGroupItem(this.m_groupItemToPin),void(this.m_groupItemToPin=null);var i=this._getGroupItemsCache(),n=0;null!=this.m_groupItemToPin&&(n=this.m_groupItemToPin.offsetHeight);for(var o=0;o<i.length;o++){var s=i[o];if(this.m_groupItemToPin!==s){var r=i[o].offsetTop,a=r+s.parentNode.offsetHeight;if(r<t&&a>t+n){e=s;break}}}if(null!=e&&e!==this.m_groupItemToPin)null!=this.m_groupItemToPin&&this._unpinGroupItem(this.m_groupItemToPin),this._pinGroupItem(e,t),this.m_groupItemToPin=e;else if(null!=this.m_groupItemToPin){var l=this._getNextGroupItem(this.m_groupItemToPin);if(null!=l&&l.offsetTop<=t+n)return void(this.m_groupItemToPin.style.top=l.offsetTop-n+"px");this.m_groupItemToPin.style.top=t+"px"}}},_getScroller:function(){var e=this.GetOption("scrollPolicyOptions");if(null!=e){var t=e.scroller;if(null!=t)return t}return this._getListContainer().get(0)},_scrollToGroupHeader:function(e){var t=this._getScroller(),i=t.scrollTop;null!=this.m_groupItemToPin&&(this._unpinGroupItem(this.m_groupItemToPin),this.m_groupItemToPin=null);var n=e.offsetTop;this._isPinGroupHeader()&&this._isPositionStickySupported()&&n<i&&(n=Math.max(0,n-e.parentNode.offsetHeight+e.offsetHeight)),t.scrollTop=n,i===t.scrollTop&&this._handlePinGroupHeader(),this._setFirstFocusableItemInGroupCurrent(e)},_setFirstFocusableItemInGroupCurrent:function(e){var t=this;$(e).next().children().each(function(){var e=$(this);if(!t.SkipFocus(e))return t.SetOption("currentItem",this.key),!1})}}),n.__registerWidget("oj.ojListView",$.oj.baseComponent,{widgetEventPrefix:"oj",options:{as:"",currentItem:null,data:null,dnd:{drag:null,drop:null,reorder:{items:"disabled"}},drillMode:"collapsible",expanded:new n._ojListViewExpandedKeySet,firstSelectedItem:{key:null,data:null},groupHeaderPosition:"sticky",item:{focusable:!0,renderer:null,selectable:!0},scrollPolicy:"auto",scrollPolicyOptions:{fetchSize:25,maxCount:500},scrollPosition:{x:0,y:0},scrollTop:0,selection:[],selectionMode:"none",selectionRequired:!1,animateStart:null,animateEnd:null,beforeCurrentItem:null,beforeExpand:null,beforeCollapse:null,collapse:null,copy:null,cut:null,expand:null,paste:null,ready:null,reorder:null},_ComponentCreate:function(){this._super(),this._setup()},_setup:function(){var e={};(e.element=this.element,e.OuterWrapper=this.OuterWrapper,e.ojContext=this,this._IsCustomElement())||this.options.expanded instanceof n._ojListViewExpandedKeySet&&(this.options.expanded="auto");e=$.extend(this.options,e),this.listview=new n._ojListView,this.listview.init(e)},_AfterCreate:function(){this._super();var e=this;this.listview._FixRendererContext=function(t){return e._FixRendererContext(t)},this.listview._WrapCustomElementRenderer=function(t){return e._WrapCustomElementRenderer(t)},this.listview.afterCreate()},_SetupResources:function(){this._super(),this.listview.setupResources()},_ReleaseResources:function(){this._super(),this.listview.releaseResources()},GetFocusElement:function(){return null!=this.listview?this.listview.GetFocusElement():this._super()},_destroy:function(){this.listview.destroy(),this._super()},_NotifyContextMenuGesture:function(e,t,i){this.listview.notifyContextMenuGesture(e,t,i)},_setOptions:function(e,t){if(this.listview.isAvailable()){var i=this.listview.setOptions(e,t);this._super(e,t),i?(e.data&&this.listview.adjustScrollPositionValueOnRefresh(),this.listview.refresh()):(e.selectionRequired||e.selection||e.selectionMode)&&this.listview.enforceSelectionRequired()}else this._super(e,t)},_setOption:function(e,t,i){var n,o=!0;if("selectionMode"===e?o="none"===t||"single"===t||"multiple"===t:"drillMode"===e?o="collapsible"===t||"none"===t:"scrollPolicy"===e?o="auto"===t||"loadMoreOnScroll"===t:"groupHeaderPosition"===e?o="static"===t||"sticky"===t:"firstSelectedItem"===e&&(o=!1),!o)throw new Error("Invalid value: "+t+" for key: "+e);this.listview.isAvailable()&&("selection"===e?(n=this.listview.getItems(t),i={_context:{extraData:{items:this._IsCustomElement()?n:$(n)}}}):"currentItem"===e&&(n=this.listview.getItems([t])[0],i={_context:{extraData:{items:this._IsCustomElement()?n:$(n)}}})),this._super(e,t,i)},_NotifyAttached:function(){this.listview.notifyAttached()},_NotifyDetached:function(){this.listview.notifyDetached()},_NotifyShown:function(){this.listview.notifyShown()},_VerifyConnectedForSetup:function(){return!0},widget:function(){return this.listview.getRootElement()},refresh:function(){this._super(),this.listview.refresh()},whenReady:function(){return this.listview.whenReady()},getNodeBySubId:function(e){return this.listview.getNodeBySubId(e)},getSubIdByNode:function(e){return this.listview.getSubIdByNode(e)},getContextByNode:function(e){return this.listview.getContextByNode(e)},getDataForVisibleItem:function(e){return this.listview.getDataForVisibleItem(e)},expand:function(e,t){this.listview.expandKey(e,t,!0,!0)},collapse:function(e,t){this.listview.collapseKey(e,t,!0)},getExpanded:function(){return this.listview.getExpanded()},getIndexerModel:function(){return null==this.indexerModel&&n.ListViewIndexerModel&&(this.indexerModel=new n.ListViewIndexerModel(this.listview)),this.indexerModel},scrollToItem:function(e){this.listview.scrollToItem(e)},_CompareOptionValues:function(e,t,i){switch(e){case"currentItem":case"selection":return n.Object.compareValues(t,i);default:return this._super(e,t,i)}}}),n.IteratingDataProviderContentHandler=function(e,t,i){n.IteratingDataProviderContentHandler.superclass.constructor.call(this,e,t,i)},n.Object.createSubclass(n.IteratingDataProviderContentHandler,n.DataSourceContentHandler,"oj.IteratingDataProviderContentHandler"),n.IteratingDataProviderContentHandler.prototype.Init=function(){n.IteratingDataProviderContentHandler.superclass.Init.call(this)},n.IteratingDataProviderContentHandler.prototype.IsHierarchical=function(){return!1},n.IteratingDataProviderContentHandler.prototype._destroyDomScroller=function(){null!=this.m_domScroller&&(this.m_domScroller.destroy(),this.m_domScroller=null,this.m_domScrollerMaxCountFunc=null),this._removeLoadingIndicator()},n.IteratingDataProviderContentHandler.prototype.Destroy=function(){n.IteratingDataProviderContentHandler.superclass.Destroy.call(this),this._removeDataSourceEventListeners(),this._destroyDomScroller(),this.m_loadingIndicator=null},n.IteratingDataProviderContentHandler.prototype.shouldHandleResize=function(){return this._isLoadMoreOnScroll()},n.IteratingDataProviderContentHandler.prototype.HandleResize=function(e,t){this._isLoadMoreOnScroll()&&this.m_height!==t&&(this.m_height=t,this.checkViewport())},n.IteratingDataProviderContentHandler.prototype.notifyShown=function(){this._isLoadMoreOnScroll()&&this.checkViewport()},n.IteratingDataProviderContentHandler.prototype.notifyAttached=function(){var e=this._getFetchTrigger();if(null!=e&&null!=this.m_domScroller){var t=this._getFetchTrigger();e!==t&&this.m_domScroller.setFetchTrigger(t),this.checkViewport()}},n.IteratingDataProviderContentHandler.prototype._isLoadMoreOnScroll=function(){return"loadMoreOnScroll"===this.m_widget.options.scrollPolicy},n.IteratingDataProviderContentHandler.prototype._getFetchSize=function(){return Math.max(0,this.m_widget.options.scrollPolicyOptions.fetchSize)},n.IteratingDataProviderContentHandler.prototype._getTotalSize=function(){return-1},n.IteratingDataProviderContentHandler.prototype._getScroller=function(){var e=this.m_widget.options.scrollPolicyOptions.scroller;return null!=e&&$.contains(e,this.m_root)?(void 0===this._fetchTrigger&&(this._fetchTrigger=n.DomScroller.calculateOffsetTop(e,this.m_root)+this._getLoadingIndicatorHeight()),e):this.m_widget.getRootElement()},n.IteratingDataProviderContentHandler.prototype._getFetchTrigger=function(){return void 0===this._fetchTrigger&&(this._fetchTrigger=this._getLoadingIndicatorHeight()),this._fetchTrigger},n.IteratingDataProviderContentHandler.prototype._getLoadingIndicatorHeight=function(){var e=$(document.createElement("div"));e.addClass(this.m_widget.getItemStyleClass()).css({visibility:"hidden",overflow:"hidden",position:"absolute"});var t=$(document.createElement("div"));t.addClass("oj-icon oj-listview-loading-icon"),e.append(t),$(this.m_widget.getRootElement()).append(e);var i=e.get(0).offsetHeight;return e.remove(),i},n.IteratingDataProviderContentHandler.prototype._getMaxCount=function(){return this.m_widget.options.scrollPolicyOptions.maxCount},n.IteratingDataProviderContentHandler.prototype.setDataSource=function(e){this._removeDataSourceEventListeners(),null!=e&&(this.m_handleModelMutateEventListener=this.handleModelMutateEvent.bind(this),this.m_handleModelRefreshEventListener=this.handleModelRefreshEvent.bind(this),e.addEventListener("mutate",this.m_handleModelMutateEventListener),e.addEventListener("refresh",this.m_handleModelRefreshEventListener)),n.IteratingDataProviderContentHandler.superclass.setDataSource.call(this,e)},n.IteratingDataProviderContentHandler.prototype._appendLoadingIndicator=function(){if(null==this.m_loadingIndicator){var e=$(document.createElement("li"));e.uniqueId().attr("role","presentation").addClass(this.m_widget.getItemStyleClass()).addClass("oj-listview-loading-icon-container");var t=$(document.createElement("div"));t.addClass("oj-icon oj-listview-loading-icon"),e.append(t),$(this.m_root).append(e),this.m_loadingIndicator=e}},n.IteratingDataProviderContentHandler.prototype._removeLoadingIndicator=function(){null!=this.m_loadingIndicator&&this.m_loadingIndicator.remove(),this.m_loadingIndicator=null},n.IteratingDataProviderContentHandler.prototype.hasMoreToFetch=function(){return null!=this.m_loadingIndicator},n.IteratingDataProviderContentHandler.prototype.afterRenderItem=function(e,t){if(n.IteratingDataProviderContentHandler.superclass.afterRenderItem.call(this,e,t),$(e).addClass(this.m_widget.getItemStyleClass()),this.m_widget._isSelectionEnabled()&&this.isSelectable(t)&&this.m_widget.getFocusItem($(e)).attr("aria-selected",!1),this._isLoadMoreOnScroll()){var i=Math.min(this._getTotalSize(),this._getMaxCount());-1===i&&(i=this._getMaxCount()),i>0&&$(e).attr("aria-setsize",i).attr("aria-posinset",t.index+1)}this.m_widget.itemRenderComplete(e,t)},n.IteratingDataProviderContentHandler.prototype.afterRenderItemForInsertEvent=function(e,t){this.signalTaskStart("after render item from model insert event"),e.setAttribute("data-oj-context",""),this.afterRenderItem(e,t);var i=$(e),n=e.className;e.className="oj-listview-temp-item oj-listview-item-add-remove-transition",this.shouldUseGridRole()||i.children().wrapAll("<div></div>");var o=i.children().first();o[0].className=n,o[0].key=e.key,this.shouldUseGridRole()||(o.attr("role",e.getAttribute("role")),i[0].hasAttribute("aria-selected")&&o.attr("aria-selected",e.getAttribute("aria-selected")));var s=this;c.getContext(e).getBusyContext().whenReady().then(function(){null!=s.m_widget&&(s.signalTaskStart("kick off animation for insert item"),s.m_widget.StartAnimation(e,"add").then(function(){e.removeAttribute("data-oj-context"),s._handleAddTransitionEnd(t,e)}),s.signalTaskEnd())})},n.IteratingDataProviderContentHandler.prototype._handleScrollerMaxRowCount=function(){e.error("max count reached")},n.IteratingDataProviderContentHandler.prototype._removeDataSourceEventListeners=function(){var e=this.getDataSource();null!=e&&(e.removeEventListener("mutate",this.m_handleModelMutateEventListener),e.removeEventListener("refresh",this.m_handleModelRefreshEventListener),e instanceof n.TableDataSourceAdapter&&e.destroy())},n.IteratingDataProviderContentHandler.prototype.fetchRows=function(e){var t=0;if(this.signalTaskStart("fetching rows"),this.IsReady()){var i=this;this.m_fetching=!0,n.IteratingDataProviderContentHandler.superclass.fetchRows.call(this,e);var o=this.loadTemplateEngine();this.signalTaskStart("first fetch");var s={};s.size=this._isLoadMoreOnScroll()?this._getFetchSize():-1,this.m_dataProviderAsyncIterator=this.getDataSource().fetchFirst(s)[Symbol.asyncIterator]();var r=this.m_dataProviderAsyncIterator.next();i.fetchSize=s.size;var a=function(e){return e[0].done||-1!==i.fetchSize||"function"==typeof i.getDataSource().getPageCount?e:i.m_dataProviderAsyncIterator.next().then(function(t){return e[0].done=t.done,e[0].value.data=e[0].value.data.concat(t.value.data),e[0].value.metadata=e[0].value.metadata.concat(t.value.metadata),a(e)},function(e){i._handleFetchError(e),i.signalTaskEnd()})};return Promise.all([r,o]).then(function(e){return a(e)},function(e){i._handleFetchError(e),i.signalTaskEnd()}).then(function(e){if(i.m_fetching){if(null==i.m_widget)return;var o=e[0],s=e[1],r=i.getDataSource();r instanceof n.TableDataSourceAdapter&&(t=r.offset),0===t&&(s&&i.cleanItems(s),$(i.m_root).empty()),i._handleFetchedData(o,s)}},function(e){i._handleFetchError(e),i.signalTaskEnd()}),void this.signalTaskEnd()}this.signalTaskEnd()},n.IteratingDataProviderContentHandler.prototype._handleFetchError=function(t){e.error(t),this.m_fetching=!1,null!=this.m_widget?(this._isLoadMoreOnScroll()&&this._removeLoadingIndicator(),this.m_widget.renderComplete()):e.info("handleFetchError: widget has already been destroyed")},n.IteratingDataProviderContentHandler.prototype._handleFetchSuccess=function(e,t,i){if(null!=this.m_widget){for(var n=this.m_root.childElementCount,o=document.createDocumentFragment(),s=0;s<e.length;s++){var r=e[s];this.addItem(o,-1,r,this.getMetadata(n,t[s],r),i),n+=1}this.m_root.appendChild(o)}},n.IteratingDataProviderContentHandler.prototype._registerDomScroller=function(){var e=this;this.m_domScrollerMaxCountFunc=function(t){null!=t?(e.signalTaskStart("handle results when maxCountLimit reached"),e._removeLoadingIndicator(),e.IsReady()&&e.signalTaskStart("dummy task"),e._handleFetchedData(t,e.getTemplateEngine()),e.m_widget.m_scrollHeight=null,e.signalTaskEnd(),e.signalTaskEnd()):(e._removeLoadingIndicator(),e.signalTaskEnd())};var t={fetchSize:this._getFetchSize(),fetchTrigger:this._getFetchTrigger(),maxCount:this._getMaxCount(),asyncIterator:this.m_dataProviderAsyncIterator,initialRowCount:this.m_root.childElementCount,success:this.m_domScrollerMaxCountFunc,error:this.signalTaskEnd.bind(this)};this.m_domScroller=new n.DomScroller(this._getScroller(),this.getDataSource(),t),this.m_domScroller._handleScrollerScrollTop=function(t,i){i-t<=1&&e.hasMoreToFetch()&&e.signalTaskStart("starts high-water mark scrolling"),n.DomScroller.prototype._handleScrollerScrollTop.call(this,t,i)}},n.IteratingDataProviderContentHandler.prototype._pushToEventQueue=function(e){null==this.m_eventQueue&&(this.m_eventQueue=[]),this.m_eventQueue.push(e)},n.IteratingDataProviderContentHandler.prototype._clearEventQueue=function(){null!=this.m_eventQueue&&(this.m_eventQueue.length=0)},n.IteratingDataProviderContentHandler.prototype._processEventQueue=function(){var e;if(null!=this.m_eventQueue&&this.m_eventQueue.length>0){for(var t=0;t<this.m_eventQueue.length;t++)if("refresh"===(e=this.m_eventQueue[t]).type)return void this.handleModelRefreshEvent(e.event);"mutate"===(e=this.m_eventQueue.shift()).type&&this.handleModelMutateEvent(e.event)}},n.IteratingDataProviderContentHandler.prototype.handleModelMutateEvent=function(e){null!=e.detail.remove&&this.handleModelRemoveEvent(e),null!=e.detail.add&&this.handleModelAddEvent(e),null!=e.detail.update&&this.handleModelChangeEvent(e)},n.IteratingDataProviderContentHandler.prototype._getIndex=function(e,t){if(null==e||0===e.length||t>=e.length)return-1;var i=e[t],n=this.FindElementByKey(i);return null!=n?$(this.m_root).children().index(n):-1},n.IteratingDataProviderContentHandler.prototype.handleModelAddEvent=function(e){if(null!=this.m_root)if(this.IsReady()){this.signalTaskStart("handling model add event"),this.m_superRoot&&0===this.m_root.childNodes.length&&this.m_superRoot.appendChild(this.m_root.parentNode);var t,i=e.detail.add,n=i.data,o=[];i.keys.forEach(function(e){o.push(e)});var s=i.addBeforeKeys?i.addBeforeKeys:i.afterKeys;s&&(t=[],s.forEach(function(e){t.push(e)}));var r=this.getTemplateEngine(),a=i.indexes;if(null!=n&&null!=o&&o.length>0&&n.length>0&&o.length===n.length&&(null==a||a.length===n.length)){for(var l=0;l<n.length;l++){this.signalTaskStart("handling model add event for item: "+o[l]);var u=null==a?this._getIndex(t,l)+1:a[l];this.addItem(this.m_root,u,n[l],this.getMetadata(u,o[l],n[l]),r,this.afterRenderItemForInsertEvent.bind(this)),this.signalTaskEnd()}this.IsReady()&&this.signalTaskStart("dummy task"),this.fetchEnd()}this.signalTaskEnd()}else this._pushToEventQueue({type:e.type,event:e})},n.IteratingDataProviderContentHandler.prototype._handleAddTransitionEnd=function(e,t){if(null!=this.m_widget){var i=$(t).children().first().attr("class");t.className=i,this.shouldUseGridRole()?$(t).children().first()[0].className="oj-listview-cell-element":$(t).children().children().unwrap(),this.m_widget.itemInsertComplete(t,e),this.signalTaskEnd()}else this.signalTaskEnd()},n.IteratingDataProviderContentHandler.prototype.handleModelRemoveEvent=function(e){var t=this,i=e.detail.remove.keys;if(null!=this.m_root&&null!=i&&0!==i.size)if(this.IsReady()){this.signalTaskStart("handling model remove event");var n=this.m_widget.options.selection,o=n.slice(0);if(i.forEach(function(e){var i=t.FindElementByKey(e);null!=i&&(t.signalTaskStart("handling model remove event for item: "+e),t._removeItem(i),t.signalTaskEnd());var s=t.m_widget.GetIndexOf(n,e);s>-1&&o.splice(s,1)}),n.length!==o.length){for(var s=new Array(o.length),r=0;r<o.length;r++)s[r]=this.FindElementByKey(o[r]);this.m_widget._setSelectionOption(o,null,s)}this.m_widget.ClearCache(),this.signalTaskEnd()}else this._pushToEventQueue({type:e.type,event:e})},n.IteratingDataProviderContentHandler.prototype._removeItem=function(e){var t=this;this.signalTaskStart("removing an item");var i=document.activeElement,n=e.contains(i),o=$(e),s=o.get(0).className;o.children().wrapAll("<div class='"+s+"'></div>"),o.get(0).className="oj-listview-item-add-remove-transition",this.signalTaskStart("kick off animation to remove an item");var r=o.get(0);this.m_widget.StartAnimation(r,"remove").then(function(){t._handleRemoveTransitionEnd(o,n)}),this.signalTaskEnd()},n.IteratingDataProviderContentHandler.prototype._handleRemoveTransitionEnd=function(e,t){if(null!=this.m_widget){var i=$(e),n=i.parent();if(0!==n.length){this.m_widget.itemRemoveComplete(i.get(0));var o=this.getTemplateEngine();o&&o.clean(i.get(0)),i.remove(),0===n.get(0).childElementCount&&this.m_widget.renderComplete(),this.m_widget.enforceSelectionRequired(),t&&this.m_root.focus(),this.signalTaskEnd()}else this.signalTaskEnd()}else this.signalTaskEnd()},n.IteratingDataProviderContentHandler.prototype.handleModelChangeEvent=function(e){if(null!=this.m_root){this.signalTaskStart("handling model update event");var t=e.detail.update,i=t.data,n=[];t.keys.forEach(function(e){n.push(e)});for(var o=this.getTemplateEngine(),s=t.indexes,r=0;r<n.length;r++){var a=this.FindElementByKey(n[r]);if(null!=a){this.signalTaskStart("handling model update event for item: "+n[r]);var l=null==s?-1:s[r];this.replaceItem(a,l,i[r],this.getMetadata(l,n[r],i[r]),o,this.afterRenderItemForChangeEvent.bind(this)),this.signalTaskEnd()}}this.m_widget.ClearCache(),this.signalTaskEnd()}},n.IteratingDataProviderContentHandler.prototype.afterRenderItemForChangeEvent=function(e,t){var i=this;this.signalTaskStart("after render item for model change event"),this.afterRenderItem(e,t),this.m_widget.StartAnimation(e,"update").then(function(){i._handleReplaceTransitionEnd(e)}),this.signalTaskEnd()},n.IteratingDataProviderContentHandler.prototype._handleReplaceTransitionEnd=function(e){null!=this.m_widget?($(e).removeClass("oj-listview-item-add-remove-transition"),this.m_widget.restoreCurrentItem(),this.signalTaskEnd()):this.signalTaskEnd()},n.IteratingDataProviderContentHandler.prototype.handleModelRefreshEvent=function(e){null!=this.m_root&&(this.IsReady()?(this.signalTaskStart("handling model reset event"),this._clearEventQueue(),this.m_widget.ClearCache(),this._destroyDomScroller(),this.m_widget.adjustScrollPositionValueOnRefresh(),this.fetchRows(!0),this.signalTaskEnd()):this._pushToEventQueue({type:e.type,event:e}))},n.IteratingDataProviderContentHandler.prototype._handleFetchedData=function(t,i){var n=!1;if(null==this.m_root||null==t.value)return n;var o=t.value.data,s=t.value.metadata.map(function(e){return e.key});return o.length===s.length&&(this._handleFetchSuccess(o,s,i),this._isLoadMoreOnScroll()&&((n=!t.done&&this._isLoadMoreOnScroll())&&(null!=s&&0===s.length&&e.info("handleFetchedData: zero data returned while done flag is false"),null==this.m_domScroller&&this._registerDomScroller(),t.maxCountLimit||this._appendLoadingIndicator()),t.maxCountLimit&&this._handleScrollerMaxRowCount()),this.fetchEnd()),n},n.IteratingDataProviderContentHandler.prototype.fetchEnd=function(){var e=this;function t(){e.m_widget&&(e.m_widget.renderComplete(),e._processEventQueue(),e.checkViewport())}if(this.m_fetching=!1,this.isAsyncRendering()){var i=this.m_widget.m_scrollAndFetch;i&&e.signalTaskEnd(),c.getContext(this.m_root).getBusyContext().whenReady().then(function(){i&&e.signalTaskStart("scroll and fetch"),t()})}else t();e.signalTaskEnd()},n.IteratingDataProviderContentHandler.prototype.checkViewport=function(){var e=this;if(this.signalTaskStart("checking viewport"),null!=this.m_domScroller&&this.IsReady()){var t=this.m_domScroller.checkViewport();null!=t&&(this.signalTaskStart("got promise from checking viewport"),t.then(function(t){null!=t&&e.m_domScrollerMaxCountFunc(t),e.signalTaskEnd()},null))}this.signalTaskEnd()},n.IteratingDataProviderContentHandler.prototype.getMetadata=function(e,t,i){var n=i.context;return null==n&&(n={}),null==n.index&&(n.index=e),null==n.key&&(n.key=t),n},n.IteratingDataProviderContentHandler.prototype.createKeyMap=function(e){if(this.getDataSource().createOptimizedKeyMap)return this.getDataSource().createOptimizedKeyMap(e);var t=new KeyMap;return e?(e.forEach(function(e,i){t.set(i,e)}),t):t},n.IteratingDataProviderContentHandler.prototype.createKeySet=function(e){return this.getDataSource().createOptimizedKeySet?this.getDataSource().createOptimizedKeySet(e):new pi(e)},ri.extension._WIDGET_NAME="ojListView",ri.extension._INNER_ELEM="ul",ri.extension._GLOBAL_TRANSFER_ATTRS=["aria-label"],n.CustomElementBridge.register("oj-list-view",{metadata:ri});var li={properties:{as:{type:"string",value:""},currentItem:{type:"any",writeback:!0},data:{type:"oj.TableDataSource|oj.TreeDataSource|oj.DataProvider"},display:{type:"string",enumValues:["all","icons"],value:"all"},drillMode:{type:"string",enumValues:["collapsible","none","sliding"],value:"none"},edge:{type:"string",enumValues:["start","top"],value:"start"},expanded:{type:"KeySet",writeback:!0,value:"new ExpandedKeySet();"},hierarchyMenuThreshold:{type:"number",value:0},item:{type:"object",properties:{renderer:{type:"function",properties:{componentElement:{type:"Element"},datasource:{type:"oj.DataProvider<K, D>"},index:{type:"number"},key:{type:"any"},data:{type:"any"},parentElement:{type:"Element"}}},selectable:{type:"function|boolean",value:!0,properties:{componentElement:{type:"Element"},datasource:{type:"oj.DataProvider<K, D>"},index:{type:"number"},key:{type:"any"},data:{type:"any"},parentElement:{type:"Element"}}}}},overflow:{type:"string",enumValues:["hidden","popup"],value:"hidden"},rootLabel:{type:"string",value:"Navigation List"},selection:{type:"any",writeback:!0},translations:{type:"object",value:{},properties:{defaultRootLabel:{type:"string"},hierMenuBtnLabel:{type:"string"},previousIcon:{type:"string"}}}},methods:{getContextByNode:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{},ojBeforeSelect:{},ojBeforeCollapse:{},ojBeforeCurrentItem:{},ojCollapse:{},ojBeforeExpand:{},ojExpand:{}},extension:{}},ui={properties:{as:{type:"string",value:""},currentItem:{type:"any",writeback:!0},data:{type:"oj.TableDataSource|oj.DataProvider"},display:{type:"string",enumValues:["all","icons"],value:"all"},edge:{type:"string",enumValues:["bottom","end","start","top"],value:"start"},item:{type:"object",properties:{renderer:{type:"function",properties:{componentElement:{type:"Element"},datasource:{type:"oj.DataProvider<K, D>"},index:{type:"number"},key:{type:"K"},data:{type:"D"},parentElement:{type:"Element"}}},selectable:{type:"function|boolean",value:!0,properties:{componentElement:{type:"Element"},datasource:{type:"oj.DataProvider<K, D>"},index:{type:"number"},key:{type:"K"},data:{type:"D"},parentElement:{type:"Element"}}}}},overflow:{type:"string",enumValues:["hidden","popup"],value:"hidden"},reorderable:{type:"string",enumValues:["disabled","enabled"],value:"disabled"},selection:{type:"any",writeback:!0},translations:{type:"object",value:{},properties:{accessibleReorderAfterItem:{type:"string"},accessibleReorderBeforeItem:{type:"string"},accessibleReorderTouchInstructionText:{type:"string"},labelCut:{type:"string"},labelPasteAfter:{type:"string"},labelPasteBefore:{type:"string"},labelRemove:{type:"string"},msgFetchingData:{type:"string"},msgNoData:{type:"string"},overflowItemLabel:{type:"string"},removeCueText:{type:"string"},selectedLabel:{type:"string"}}},truncation:{type:"string",enumValues:["none","progressive"],value:"none"}},methods:{getContextByNode:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{},ojBeforeSelect:{},ojBeforeCurrentItem:{},ojBeforeDeselect:{},ojDeselect:{},ojBeforeRemove:{},ojRemove:{},ojReorder:{}},extension:{}};n.DefaultNavListHandler=function(e,t,i){this.m_widget=e,this.m_root=t,this.m_component=i,this.m_widget.GetOption(this.m_widget.OPTION_EDGE)===this.m_widget.OPTION_EDGE_END&&this.m_root.addClass(this.m_widget.getNavListEndEdgeStyleClass())},n.DefaultNavListHandler.prototype.Destroy=function(){this.m_root.removeClass(this.m_widget.getNavListExpandedStyleClass()).removeClass(this.m_widget.getNavListVerticalStyleClass()).removeClass(this.m_widget.getNavListEndEdgeStyleClass())},n.DefaultNavListHandler.prototype.Expand=function(e,t,i){return Promise.resolve(null)},n.DefaultNavListHandler.prototype.Collapse=function(e,t,i,n){return Promise.resolve(null)},n.DefaultNavListHandler.prototype.HandleExpandAndCollapseKeys=function(e,t,i,n){return!1},n.DefaultNavListHandler.prototype.ModifyListItem=function(e,t){this.m_widget.isTabBar()&&this.m_widget.getSingleFocusableElement(e).attr("role","tab")},n.DefaultNavListHandler.prototype.UpdateAriaPropertiesOnSelectedItem=function(e,t){e.attr("aria-selected",t?"true":"false")},n.DefaultNavListHandler.prototype.BeforeRenderComplete=function(){var e=this.m_widget.element.attr("role");e&&"presentation"!==e&&(this.m_widget.element.attr("role","presentation"),this.m_widget.isTabBar()?this.m_root.attr("role","tablist"):this.m_root.attr("role",e))},n.DefaultNavListHandler.prototype.ItemInsertComplete=function(e,t){},n.DefaultNavListHandler.prototype.ItemRemoveComplete=function(e){},n.DefaultNavListHandler.prototype.HandleArrowKeys=function(e,t,i){return di.superclass.HandleArrowKeys.apply(this.m_widget,arguments)},n.DefaultNavListHandler.prototype.IsArrowKey=function(e){return di.superclass.IsArrowKey.apply(this.m_widget,arguments)},n.DefaultNavListHandler.prototype.GetState=function(e){return di.superclass.GetState.apply(this.m_widget,arguments)},n.DefaultNavListHandler.prototype.SetState=function(e,t){di.superclass.SetState.apply(this.m_widget,arguments)},n.DefaultNavListHandler.prototype.Init=function(e){this.m_root.addClass(this.m_widget.getNavListExpandedStyleClass()).addClass(this.m_widget.getNavListVerticalStyleClass())},n.DefaultNavListHandler.prototype.IsSelectable=function(e){return di.superclass.IsSelectable.apply(this.m_widget,arguments)},n.DefaultNavListHandler.prototype.RestoreItem=function(e,t,i){},n.DefaultNavListHandler.prototype.SetOptions=function(e){},n.DefaultNavListHandler.prototype.HandleBlur=function(e){return di.superclass.HandleBlur.apply(this.m_widget,arguments)},n.DefaultNavListHandler.prototype.HandleFocus=function(e){return di.superclass.HandleFocus.apply(this.m_widget,arguments)},n.DefaultNavListHandler.prototype.GetNodeBySubId=function(e){return null},n.DefaultNavListHandler.prototype.GetSubIdByNode=function(e){return null},n.DefaultNavListHandler.prototype.HandleResize=function(e,t){},n.DefaultNavListHandler.prototype.NotifyAttached=function(){},n.DefaultNavListHandler.prototype.GetAnimationEffect=function(e){return di.superclass.getAnimationEffect.apply(this.m_widget,arguments)},n.DefaultNavListHandler.prototype.IsOptionUpdateAllowed=function(e,t,i){return!0},n.DefaultNavListHandler.prototype.OptionUpdated=function(e,t,i){},n.DefaultNavListHandler.prototype.BeforeInsertItem=function(){},n.DefaultNavListHandler.prototype.HandleClick=function(e){},n.DefaultNavListHandler.prototype.HandleKeydown=function(e){},n.HorizontalNavListHandler=function(e,t,i){this.m_duringInit=!0,n.HorizontalNavListHandler.superclass.constructor.call(this,e,t,i),this.m_widget.GetOption(this.m_widget.OPTION_EDGE)===this.m_widget.OPTION_EDGE_BOTTOM&&this.m_root.addClass(this.m_widget.getNavListBottomEdgeStyleClass())},n.Object.createSubclass(n.HorizontalNavListHandler,n.DefaultNavListHandler,"oj.HorizontalNavListHandler"),n.HorizontalNavListHandler.prototype.Destroy=function(){this.m_root.removeClass(this.m_widget.getNavListExpandedStyleClass()).removeClass(this.m_widget.getHorizontalNavListStyleClass()).removeClass(this.m_widget.getNavListBottomEdgeStyleClass()),this.m_root.find("."+this.m_widget.getDividerStyleClass()).remove(),this._destroyOverflowMenu(),null!=this.m_overflowMenuItem&&(this.m_overflowMenuItem.remove(),this.m_overflowMenuItem=null),this.m_overflowMenuItems=[],this.m_duringInit=!0},n.HorizontalNavListHandler.prototype.UpdateAriaPropertiesOnSelectedItem=function(e,t){e.attr(this._isTabBar()?"aria-selected":"aria-pressed",t?"true":"false")},n.HorizontalNavListHandler.prototype._isTabBar=function(){return this.m_widget.isTabBar()},n.HorizontalNavListHandler.prototype.HandleArrowKeys=function(e,t,i){e===$.ui.keyCode.LEFT?e=this.m_widget.isRtl()?$.ui.keyCode.DOWN:$.ui.keyCode.UP:e===$.ui.keyCode.RIGHT&&(e=this.m_widget.isRtl()?$.ui.keyCode.UP:$.ui.keyCode.DOWN);var n=di.superclass.HandleArrowKeys.call(this.m_widget,e,t,i);return this.m_widget.m_active.elem[0].scrollIntoView(!1),n},n.HorizontalNavListHandler.prototype.IsArrowKey=function(e){return e===this.m_widget.UP_KEY||e===this.m_widget.DOWN_KEY||e===this.m_widget.LEFT_KEY||e===this.m_widget.RIGHT_KEY},n.HorizontalNavListHandler.prototype.ModifyListItem=function(e,t){var i=this.m_widget.getSingleFocusableElement(e);i.attr("role",this._isTabBar()?"tab":"button"),!this._isTabBar()&&i[0].hasAttribute("aria-selected")&&(i.attr("aria-pressed","false"),i.removeAttr("aria-selected"))},n.HorizontalNavListHandler.prototype.BeforeRenderComplete=function(){var e=this;this._isTabBar()?this.m_root.attr("role","tablist"):this.m_root.attr("role","toolbar"),this.m_widget.element.attr("role","presentation");var t=this.m_widget.element.find("."+this.m_widget.getItemElementStyleClass()+":visible");t.each(function(i){var n=$(this);i>0&&e._addSeparator(this,i),i===t.length-1?n.addClass(e.m_widget.getLastItemStyleClass()):n.removeClass(e.m_widget.getLastItemStyleClass())}),this.m_duringInit&&(this.m_duringInit=!1,this._handleOverflow())},n.HorizontalNavListHandler.prototype._addSeparator=function(e,t){var i=$(e),n=i.prev();t>0&&n.length&&!n.is("li."+this.m_widget.getDividerStyleClass())&&i.before('<li role="separator" class="'+this.m_widget.getDividerStyleClass()+'"></li>')},n.HorizontalNavListHandler.prototype.ItemInsertComplete=function(e,t){this._addSeparator(e,t.index),this._handleOverflow()},n.HorizontalNavListHandler.prototype.ItemRemoveComplete=function(e){var t=$(e),i=t.prev();if(i.length&&i.is("li."+this.m_widget.getDividerStyleClass()))i.remove();else{var n=t.next();n.is("li."+this.m_widget.getDividerStyleClass())&&n.remove()}this._handleOverflow()},n.HorizontalNavListHandler.prototype.IsSelectable=function(e){var t="aria-selected";return this._isTabBar()||(t="aria-pressed"),!(this.m_overflowMenuItem&&this.m_overflowMenuItem[0]===$(e)[0])&&this.m_widget.getFocusItem($(e))[0].hasAttribute(t)},n.HorizontalNavListHandler.prototype.Init=function(e){this.m_root.addClass(this.m_widget.getNavListExpandedStyleClass()).addClass(this.m_widget.getHorizontalNavListStyleClass()),this.m_overflowMenuItems=[]},n.HorizontalNavListHandler.prototype.HandleClick=function(e){$(e.target).closest("."+this.m_widget.getOverflowItemStyleClass()+" a."+this.m_widget.getItemContentStyleClass()).length>0&&this._launchOverflowMenu(e)},n.HorizontalNavListHandler.prototype.HandleKeydown=function(e){$(e.target).closest("."+this.m_widget.getOverflowItemStyleClass()+" a."+this.m_widget.getItemContentStyleClass()).length>0&&e.keyCode===$.ui.keyCode.SPACE&&this._launchOverflowMenu(e)},n.HorizontalNavListHandler.prototype.NotifyAttached=function(){this._handleOverflow()},n.HorizontalNavListHandler.prototype.HandleResize=function(e,t){this.m_ignoreNextResize?this.m_ignoreNextResize=!1:this._handleOverflow()},n.HorizontalNavListHandler.prototype.SetOptions=function(e){var t,i,n=this.m_widget.GetOption("overflow"),o=this.m_widget.GetOption("truncation");e.overflow&&n!==e.overflow&&(t=e.overflow),e.truncation&&o!==e.truncation&&(i=e.truncation),(t||i)&&this._handleOverflow(t,i)},n.HorizontalNavListHandler.prototype.GetAnimationEffect=function(e){return"add"===e||"remove"===e?di.superclass.getAnimationEffect.call(this.m_widget,e+"HorizontalItem"):di.superclass.getAnimationEffect.apply(this.m_widget,arguments)},n.HorizontalNavListHandler.prototype.GetNodeBySubId=function(e){var t=null;if(e.subId===this.m_widget.getItemSubIdKey()&&this.m_overflowMenuItems.length>0)for(var i=this._getOverflowMenu(),n=e.key,o=i.find(".oj-menu-item"),s=0;s<o.length;s++)if(this.m_widget.compareValues($(o[s]).data("key"),n)){t=o[s],this._launchOverflowMenu(null);break}return t},n.HorizontalNavListHandler.prototype.GetSubIdByNode=function(e){var t=null,i=$(e).closest(".oj-menu-item");if(null!==this._getOverflowMenu()&&i.closest("."+this.m_widget.getOverflowMenuStyleClass())[0]!==this._getOverflowMenu()[0])return null;if(null!=i&&i.length>0){var n=i.data("key");null!=n&&(t={subId:this.m_widget.getItemSubIdKey(),key:n})}return t},n.HorizontalNavListHandler.prototype.OptionUpdated=function(e,t,i){"selection"===e&&this._toggleOverflowBtnSelection(t)},n.HorizontalNavListHandler.prototype.IsOptionUpdateAllowed=function(e,t,i){return"currentItem"!==e||!this.m_overflowMenuItem||this.m_overflowMenuItem.attr("id")!==t},n.HorizontalNavListHandler.prototype._handleOverflow=function(e,t){var i=-1,o=this._getItems();if(0!==o.length){e||(e=this.m_widget.GetOption("overflow")),t||(t=this.m_widget.GetOption("truncation"));var s=new n._HorizontalNavListOverflowHandler(o,e,t,this);if(!s.shouldHandleOverflow())return s.unApplyTruncation(),void this._releaseContainerWidth();this.showAllItems(o,e),s.unApplyTruncation(),s.checkForOverflow()&&s.applyTruncation()&&(i=s.getOverflowThreshold()),this._applyThreshold(i),this._releaseContainerWidth()}},n.HorizontalNavListHandler.prototype.BeforeInsertItem=function(){this._fixContainerWidth()},n.HorizontalNavListHandler.prototype._fixContainerWidth=function(){var e=this.m_widget.getRootElement(),t=e[0].getBoundingClientRect().width;0!==t&&(this.m_freezedContainerWidth=t,e.css("maxWidth",t))},n.HorizontalNavListHandler.prototype._releaseContainerWidth=function(){this.m_widget.getRootElement().css("maxWidth","none"),this.m_freezedContainerWidth&&(this.m_ignoreNextResize=!0,this.m_freezedContainerWidth=null)},n.HorizontalNavListHandler.prototype.showAllItems=function(e,t){var i=this;"popup"===t&&this._showOrHideItem(this._getOverflowMenuButton(),!0),e.each(function(e,t){i._showOrHideItem($(t),!0)})},n.HorizontalNavListHandler.prototype._getItems=function(){return this.m_root.find("."+this.m_widget.getItemElementStyleClass()+":not(."+this.m_widget.getOverflowItemStyleClass()+")")},n.HorizontalNavListHandler.prototype._hasSeparators=function(){return this.m_root.hasClass(this.m_widget.getNavListItemsDividerStyleClass())},n.HorizontalNavListHandler.prototype._showOrHideItem=function(e,t){var i;this._hasSeparators()&&(i=e.prev("."+this.m_widget.getDividerStyleClass())),t?(e.show(),i&&i.show()):(e.hide(),i&&i.hide())},n.HorizontalNavListHandler.prototype._applyThreshold=function(e){var t,i,n=this,o=this._getItems(),s=[];if(0!==o.length){this.m_root.find("."+this.m_widget.getLastItemStyleClass()).removeClass(this.m_widget.getLastItemStyleClass()),-1===e||e>=o.length?this.m_overflowMenuItem&&this._showOrHideItem(this.m_overflowMenuItem,!1):(this._addSeparator(this._getOverflowMenuButton(),o.length),this._showOrHideItem(this._getOverflowMenuButton(),!0),i=!0),o.each(function(i,o){var r=$(o);if(-1!==e&&e<=i){r.hasClass("oj-focus")&&n.m_widget.ActiveAndFocus(n._getOverflowMenuButton(),null),n._showOrHideItem(r,!1);var a={};s.push(a),a.key=n.m_widget.GetKey(o),a.label=n._getItemLabel(r),r.hasClass("oj-disabled")&&(a.disabled=!0)}else t=r,n._showOrHideItem(r,!0),n.m_overflowMenuItem&&n.m_overflowMenuItem.hasClass("oj-focus")&&n.m_widget.compareValues(n.m_widget.GetKey(o),n.m_widget.GetOption("currentItem"))&&n.m_widget.ActiveAndFocus(t,null)}),i?this._getOverflowMenuButton().addClass(this.m_widget.getLastItemStyleClass()):t.addClass(this.m_widget.getLastItemStyleClass()),this.m_overflowMenuItems=s,this.m_widget.ClearCache();var r=this.m_overflowMenu&&this.m_overflowMenu.is(":visible");this._destroyOverflowMenu(),r&&this._launchOverflowMenu(null)}},n.HorizontalNavListHandler.prototype._destroyOverflowMenu=function(){this.m_overflowMenu&&(this.m_overflowMenu.ojMenu("destroy"),this.m_overflowMenu.remove(),this.m_overflowMenu=null)},n.HorizontalNavListHandler.prototype._getOverflowMenuButton=function(){if(!this.m_overflowMenuItem){var e=$(document.createElement("li")),t=$(document.createElement("a")),i=$(document.createElement("span")),n=$(document.createElement("span")),o=this._getItems();e.uniqueId().attr("role","presentation").addClass(this.m_widget.getItemElementStyleClass()).addClass(this.m_widget.getItemStyleClass()).addClass(this.m_widget.getOverflowItemStyleClass()).addClass("oj-default").append(t),t.addClass(this.m_widget.getFocusedElementStyleClass()).addClass(this.m_widget.getItemContentStyleClass()),t.attr("role","button").attr("aria-haspopup","true").attr("aria-pressed","false").attr("tabindex","-1").attr("data-tabmod","-1").attr("href","#").append(n).append(i),this.m_root.find("ul:first").hasClass(this.m_widget.getHasIconsStyleClass())||t.addClass(this.m_widget.getHasNoIconStyleClass()),i.text(this.m_widget.ojContext.getTranslatedString("overflowItemLabel")).addClass(this.m_widget.getItemLabelStyleClass()),n.addClass(this.m_widget.getItemIconStyleClass()).addClass("oj-fwk-icon").addClass(this.m_widget.getOverflowItemIconStyleClass()),e[0].key=e.attr("id"),this.m_root.find("."+this.m_widget.GetStyleClass()).append(e),this._addSeparator(e,o.length),this.m_overflowMenuItem=e}return this.m_overflowMenuItem},n.HorizontalNavListHandler.prototype._getOverflowMenu=function(){var e=this.m_overflowMenuItems;if(0===e.length)return null;if(!this.m_overflowMenu){var t=$(document.createElement("ul"));t.addClass(this.m_widget.getOverflowMenuStyleClass()).hide(),this.m_root.append(t);for(var i=0;i<e.length;i++){var n=$(document.createElement("li")),o=$(document.createElement("a"));o.attr("href","#").text(e[i].label),n.data("key",e[i].key),e[i].disabled&&n.addClass("oj-disabled"),n.append(o),t.append(n)}t.ojMenu({openOptions:{display:"auto"},open:this.__handleOverflowMenuOpen.bind(this),close:this.__handleOverflowMenuClose.bind(this),select:this.__handleOverflowMenuSelection.bind(this)}),this.m_overflowMenu=t}return this.m_overflowMenu},n.HorizontalNavListHandler.prototype._launchOverflowMenu=function(e){this._getOverflowMenu().is(":visible")||(this._getOverflowMenuButton().addClass("oj-selected").removeClass("oj-default"),this._getOverflowMenu().ojMenu("open",e,{launcher:this._getOverflowMenuButton(),initialFocus:"firstItem",position:{my:"end bottom",at:"end top",collision:"flipfit"}}))},n.HorizontalNavListHandler.prototype._toggleOverflowBtnSelection=function(e){var t;if(this.m_overflowMenuItem&&this.m_overflowMenuItems.length>0){if(e)for(var i=0;i<this.m_overflowMenuItems.length;i++)if(this.m_widget.compareValues(this.m_overflowMenuItems[i].key,e)){t=!0;break}t||this._getOverflowMenuButton().addClass("oj-default").removeClass("oj-selected")}},n.HorizontalNavListHandler.prototype.__handleOverflowMenuOpen=function(e){this._getOverflowMenuButton().find("."+this.m_widget.getItemContentStyleClass()).attr("tabindex","0")},n.HorizontalNavListHandler.prototype.__handleOverflowMenuClose=function(e){var t=this.m_widget.ojContext.option("selection");this._toggleOverflowBtnSelection(t),this._getOverflowMenuButton().find("."+this.m_widget.getItemContentStyleClass()).focus()},n.HorizontalNavListHandler.prototype.__handleOverflowMenuSelection=function(e,t){var i=t.item.data("key"),n={selection:i},o=this.m_widget.FindElementByKey(i);this.m_widget.HandleSelectionOption(n);var s=n.selection;s&&this.m_widget.SetOption("selection",s,{_context:{originalEvent:e,internalSet:!0,extraData:{items:$(o)}},changed:!0})},n.HorizontalNavListHandler.prototype._getItemLabel=function(e){var t=e.find("."+this.m_widget.getItemTitleStyleClass()+":first");return t.length>0?t.text():e.find("."+this.m_widget.getItemLabelStyleClass()+":first").text()},n._HorizontalNavListOverflowHandler=function(e,t,i,n){this._overflow=t,this._truncation=i,this._items=e,this._navlistHandler=n},n._HorizontalNavListOverflowHandler.prototype._getOverflowMenuButton=function(){return this._navlistHandler._getOverflowMenuButton()},n._HorizontalNavListOverflowHandler.prototype._getWidget=function(){return this._navlistHandler.m_widget},n._HorizontalNavListOverflowHandler.prototype.shouldHandleOverflow=function(){return"popup"===this._overflow||"progressive"===this._truncation},n._HorizontalNavListOverflowHandler.prototype.unApplyTruncation=function(){var e=this;this._items.each(function(t,i){$(i).find("."+e._getWidget().getItemLabelStyleClass()).css("max-width","")})},n._HorizontalNavListOverflowHandler.prototype.checkForOverflow=function(){return!!this.shouldHandleOverflow()&&(this._overflowData||(this._overflowData=this._collectOverflowData()),this._isOverflowed(this._overflowData.containerEdgePos,this._overflowData.itemEdgePos,0))},n._HorizontalNavListOverflowHandler.prototype.applyTruncation=function(){"progressive"===this._truncation&&this._applyLabelMaxWidth(this._overflowData);var e=this._items.last()[0].getBoundingClientRect()["ltr"===n.DomUtils.getReadingDirection()?"right":"left"];return this._isOverflowed(this._overflowData.containerEdgePos,e,0)},n._HorizontalNavListOverflowHandler.prototype.getOverflowThreshold=function(){var e=-1;return"popup"===this._overflow&&(e=this._calculateThreshold(this._overflowData)),e},n._HorizontalNavListOverflowHandler.prototype._collectOverflowData=function(){var e,t,i="ltr"===n.DomUtils.getReadingDirection()?"right":"left",o=this._getWidget().ojContext.element,s=this._items.last();"progressive"===this._truncation&&(e=this._calculateItemNonTextWidth());var r=o[0].getBoundingClientRect()[i],a=o[0].getBoundingClientRect().width;return"popup"===this._overflow&&(t=this._getOverflowMenuButton()[0].getBoundingClientRect().width),{containerEdgePos:r,containerWidth:a,overflowItemWidth:t,itemEdgePos:s[0].getBoundingClientRect()[i],itemNonTextWidth:e}},n._HorizontalNavListOverflowHandler.prototype._calculateItemNonTextWidth=function(){var e=this._items,t=this;this._getWidget().getRootElement().hasClass("."+this._getWidget().getHasIconsStyleClass())&&(e=e.filter(function(e,i){return $(i).find("."+t._getWidget().getItemIconStyleClass()).length>0}));var i=e.filter(function(e,i){return $(i).find("."+t._getWidget().getRemovableStyleClass()).length>0}),n=i&&i.length>0?i.last():e.last(),o=n.find("."+this._getWidget().getItemLabelStyleClass())[0].getBoundingClientRect().width;return n[0].getBoundingClientRect().width-o},n._HorizontalNavListOverflowHandler.prototype._isOverflowed=function(e,t,i){var o=i||0;return"ltr"===n.DomUtils.getReadingDirection()?t-e+o>.1:e-t+o>.1},n._HorizontalNavListOverflowHandler.prototype._calculateThreshold=function(e){for(var t=this._items,i="ltr"===n.DomUtils.getReadingDirection()?"right":"left",o=t.length-1,s=t[o].getBoundingClientRect()[i];this._isOverflowed(e.containerEdgePos,s,e.overflowItemWidth)&&o>0;)s=t[o-=1].getBoundingClientRect()[i];return o+1},n._HorizontalNavListOverflowHandler.prototype._applyLabelMaxWidth=function(e){var t=this._items,i=this,n=this._getMinLabelWidth(this._items),o=e.containerWidth/t.length-e.itemNonTextWidth;o<n&&(o=n),t.each(function(e,t){$(t).find("."+i._getWidget().getItemLabelStyleClass()).css({"max-width":o+"px"})})},n._HorizontalNavListOverflowHandler.prototype._getMinLabelWidth=function(e){var t=window.getComputedStyle(e.first().find("."+this._getWidget().getItemLabelStyleClass())[0],null).getPropertyValue("min-width");return t.indexOf("px")>0?parseInt(t.substring(0,t.length-2),10):0},n.CollapsibleNavListHandler=function(e,t,i){n.CollapsibleNavListHandler.superclass.constructor.call(this,e,t,i)},n.Object.createSubclass(n.CollapsibleNavListHandler,n.DefaultNavListHandler,"oj.CollapsibleNavListHandler"),n.CollapsibleNavListHandler.prototype.Destroy=function(){this.m_root.removeClass(this.m_widget.getNavListCollapsibleStyleClass()).removeClass(this.m_widget.getNavListVerticalStyleClass())},n.CollapsibleNavListHandler.prototype.Init=function(e){this.m_root.addClass(this.m_widget.getNavListCollapsibleStyleClass()).addClass(this.m_widget.getNavListVerticalStyleClass())},n.CollapsibleNavListHandler.prototype.Expand=function(e,t,i){return di.superclass.AnimateExpand.apply(this.m_widget,arguments)},n.CollapsibleNavListHandler.prototype.Collapse=function(e,t,i,n){return di.superclass.AnimateCollapse.apply(this.m_widget,arguments)},n.CollapsibleNavListHandler.prototype.HandleExpandAndCollapseKeys=function(e,t,i,n){var o=i.children("."+this.m_widget.getGroupStyleClass()).length>0;return t===this.m_widget.LEFT_KEY||t===this.m_widget.RIGHT_KEY?(t===this.m_widget.LEFT_KEY&&!this.m_widget.isRtl()||t===this.m_widget.RIGHT_KEY&&this.m_widget.isRtl()?this.m_widget.GetState(i)===this.m_widget.STATE_EXPANDED&&this.m_widget.CollapseItem(i,e,!0,n,!0,!0):this.m_widget.GetState(i)===this.m_widget.STATE_COLLAPSED&&this.m_widget.ExpandItem(i,e,!0,n,!0,!0,!0),!0):!(!o||t!==$.ui.keyCode.ENTER&&t!==$.ui.keyCode.SPACE)&&(!(i.length<=0)&&(this.m_widget.GetState(i)===this.m_widget.STATE_COLLAPSED?this.m_widget.ExpandItem(i,null,!0,n,!0,!0,!0):this.m_widget.GetState(i)===this.m_widget.STATE_EXPANDED&&this.m_widget.CollapseItem(i,null,!0,n,!0,!0),!0))},n.SlidingNavListHandler=function(e,t,i){n.SlidingNavListHandler.superclass.constructor.call(this,e,t,i),this.m_expanded=[]},n.Object.createSubclass(n.SlidingNavListHandler,n.CollapsibleNavListHandler,"oj.SlidingNavListHandler"),n.SlidingNavListHandler.prototype.Destroy=function(){this.m_root.removeClass("oj-navigationlist-slider").removeClass(this.m_widget.getNavListVerticalStyleClass()),this._toolbar.remove()},n.SlidingNavListHandler.prototype._slideAnimation=function(e,t,i,n,o){var s=this,r=this.m_widget.getRootElement(),a=r.hasClass("oj-focus-ancestor");a&&t&&r.removeClass("oj-focus-ancestor");var l=t?"sliderExpand":"sliderCollapse";this.m_widget.StartAnimation(r.get(0),l,this.m_widget.getAnimationEffect(l)).then(function(){s._slideAnimationComplete(e,t,i,n,a),o(null)})},n.SlidingNavListHandler.prototype._slideAnimationComplete=function(e,t,i,n,o){null!==this.m_widget.m_contentHandler&&(i&&(o&&this.m_widget.getRootElement().addClass("oj-focus-ancestor"),n&&0===n.button&&this.m_widget.AvoidFocusHighLight(!0),this.m_widget.SetCurrentItem(i,n),this.m_widget.AvoidFocusHighLight(!1)),t?this.m_widget.AnimateExpandComplete(e.children("."+this.m_widget.getGroupStyleClass())):this.m_widget.AnimateCollapseComplete(e.children("."+this.m_widget.getGroupStyleClass())))},n.SlidingNavListHandler.prototype.Expand=function(e,t,i){var n,o=new Promise(function(e){n=e}),s=$(e).parents(".oj-navigationlist-item-element:first"),r=s.children("."+this.m_widget.getGroupStyleClass()),a=null,l=s.closest("."+this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS);if(l.length>0){l.removeClass(this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS),s.addClass(this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS),a=r.find("."+this.m_widget.getItemElementStyleClass()+":eq(0)");var u=s.parentsUntil(l,"ul");u=l.is(this.m_widget.element)?u.get().concat(l.get()):u.get();var d=this;(u=$(u.reverse())).each(function(e,t){var i,n;i=$(t).is(d.m_widget.element)?d.m_widget.getRootLabel():d.m_widget.getItemLabel($(t).parent()),n=e===u.length-1?s:$(u.get(e+1)).parent(),d._addItemToHviewMenu(d.m_widget.GetKey(n[0]),d.m_widget.getItemLabel(n),i),d.m_expanded.push(n)})}return t?this._slideAnimation(s,!0,a,i,n):(this._slideAnimationComplete(s,!0,a,i,!1),n(null)),s.siblings().attr("aria-hidden","true"),s.children("."+this.m_widget.getGroupItemStyleClass()).children("."+this.m_widget.getItemContentStyleClass()).attr("aria-hidden","true"),r.removeAttr("aria-hidden"),e.css("display",""),s.addClass("oj-skipfocus"),o},n.SlidingNavListHandler.prototype.Collapse=function(e,t,i,n){var o,s=new Promise(function(e){o=e}),r=e.children("."+this.m_widget.getGroupStyleClass()),a=e.parent();return e.children("."+this.m_widget.getGroupItemStyleClass()).children("."+this.m_widget.getItemContentStyleClass()).removeAttr("aria-hidden"),r.attr("aria-hidden","true"),e.siblings().removeAttr("aria-hidden"),e.removeClass("oj-skipfocus"),e.removeClass(this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS),0===e.closest("."+this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS).length&&(a.closest("."+this.m_widget.getItemElementStyleClass()).addClass(this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS),this.m_widget.element.is(a)&&this.m_widget.element.addClass(this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS)),i?this._slideAnimation(e,!1,r.parent(),n,o):(this._slideAnimationComplete(e,!1,r.parent(),n,!1),o(null)),this._removeItemFromHviewMenu(),s},n.SlidingNavListHandler.prototype.UpdateAriaPropertiesOnSelectedItem=function(e,t){t?e.attr("aria-describedby",this._selectedLabelId):e.removeAttr("aria-describedby")},n.SlidingNavListHandler.prototype.GetState=function(e){var t=this.m_widget.getFocusItem(e).attr("aria-expanded");return"true"===t?this.m_widget.STATE_EXPANDED:"false"===t?this.m_widget.STATE_COLLAPSED:this.m_widget.STATE_NONE},n.SlidingNavListHandler.prototype.SetState=function(e,t){t===this.m_widget.STATE_EXPANDED?(this.m_widget.getFocusItem(e).attr("aria-expanded","true"),e.removeClass(this.m_widget.COLLAPSED_STYLE_CLASS).addClass(this.m_widget.EXPANDED_STYLE_CLASS)):t===this.m_widget.STATE_COLLAPSED&&(this.m_widget.getFocusItem(e).attr("aria-expanded","false"),e.removeClass(this.m_widget.EXPANDED_STYLE_CLASS).addClass(this.m_widget.COLLAPSED_STYLE_CLASS))},n.SlidingNavListHandler.prototype.ModifyListItem=function(e,t){var i=this.m_widget.getFocusItem(e);e.attr("role","presentation"),i.attr("role","menuitem"),t.attr("id")||t.uniqueId();var n=e.children("."+this.m_widget.getGroupStyleClass());n.length>0&&(i.attr("aria-haspopup","true"),n.attr("role","menu"),n.css("display",""),e.removeAttr("aria-expanded"),i.attr("aria-expanded","false"))},n.SlidingNavListHandler.prototype.BeforeRenderComplete=function(){this.m_root.attr("role","menu"),this.m_widget.element.attr("role","presentation")},n.SlidingNavListHandler.prototype.Init=function(e){this.m_root.addClass("oj-navigationlist-slider").addClass(this.m_widget.getNavListVerticalStyleClass()),e.element.addClass("oj-navigationlist-current"),this._buildSlidingNavListHeader(e),this._initializeHierarchicalView()},n.SlidingNavListHandler.prototype.HandleClick=function(e){$(e.target).closest(".oj-navigationlist-previous-link, .oj-navigationlist-previous-button").length>0&&this.CollapseCurrentList(e)},n.SlidingNavListHandler.prototype.HandleKeydown=function(e){$(e.target).closest(".oj-navigationlist-previous-link, .oj-navigationlist-previous-button").length>0&&e.keyCode===$.ui.keyCode.ENTER&&this.CollapseCurrentList(e),$(e.target).closest("."+this.m_widget.GetStyleClass()).length>0&&(e.keyCode!==$.ui.keyCode.ESCAPE||e.isDefaultPrevented()||this.CollapseCurrentList(e))},n.SlidingNavListHandler.prototype._buildSlidingNavListHeader=function(e){this._toolbar=$(document.createElement("div")),this._toolbar.addClass("oj-navigationlist-toolbar"),this._previousLink=$(document.createElement("a")),this._prevButton=$(document.createElement("a")),this._prevButton.addClass("oj-navigationlist-previous-button"),this._prevButton.css("visibility","hidden").attr("tabindex","-1"),this._previousLink.addClass("oj-navigationlist-previous-link").attr("tabindex","-1"),this._headerLabel=$(document.createElement("label")),this._headerLabel.addClass("oj-navigationlist-current-header").text(this.m_widget.getRootLabel()),this._vSeparator=$(document.createElement("span")),this._vSeparator.attr("role","separator").attr("aria-orientation","vertical").addClass("oj-navigationlist-toolbar-separator"),this._hviewBtn=$(document.createElement("button")),this._hviewBtn.addClass("oj-navigationlist-hierarchical-button").attr("tabindex","-1"),this._hviewMenu=$(document.createElement("ul")),this._hviewMenu.addClass("oj-navigationlist-hierarchical-menu").hide();var t=$(document.createElement("label"));t.uniqueId().addClass("oj-helper-hidden-accessible").attr("aria-hidden","true"),this._selectedLabelId=t.attr("id"),t.text(this.m_component.getTranslatedString("selectedLabel")),this._previousLink.append(this._headerLabel),this._toolbar.append(this._prevButton),this._toolbar.append(this._previousLink).append(this._vSeparator).append(this._hviewBtn).append(this._hviewMenu).append(t),this.m_root.prepend(this._toolbar),this._showOrHideHierarchyMenu(e.hierarchyMenuDisplayThresholdLevel)},n.SlidingNavListHandler.prototype.CollapseCurrentList=function(e){var t=this.m_expanded.pop();t&&this.m_widget.CollapseItem(t,e,!0,null,!0,!0)},n.SlidingNavListHandler.prototype._initializeHierarchicalView=function(){var e=this,t=this._hviewMenu.uniqueId().attr("id");this._hviewMenu.ojMenu({openOptions:{position:{my:"end top",at:"end bottom"}},select:function(t,i){var n=i.item.nextAll(),o=e.m_expanded,s=i.item.data("key");for(e.m_widget.signalTaskStart();o.length>0;){var r=o.pop(),a=e.m_widget.GetKey(r[0]);if(e.m_widget.CollapseItem($(r),t,!0,a,!0,!0),e.m_widget.compareValues(s,a))break}n.remove(),i.item.remove(),e._hviewMenu.ojMenu("refresh"),e.m_widget.signalTaskEnd()}}),this._hviewBtn.ojButton({label:this.m_component.getTranslatedString("hierMenuBtnLabel"),display:"icons",icons:{start:"oj-fwk-icon oj-hier-icon"},menu:"#"+t,disabled:!0,chroming:"half"}),this._prevButton.ojButton({label:this.m_component.getTranslatedString("previousIcon"),display:"icons",icons:{start:"oj-navigationlist-previous-icon oj-component-icon oj-clickable-icon-nocontext"},chroming:"half"})},n.SlidingNavListHandler.prototype._addItemToHviewMenu=function(e,t,i){var n;if(this._hviewBtn){var o=this._hviewMenu.find("li").length,s=$(document.createElement("li")),r=$(document.createElement("a"));if(r.attr("href","#"),s.append(r),o>0){for(n=0;n<o;n++)n>0&&r.append($(document.createElement("span")).addClass("oj-navigationlist-hvitem-space"));r.append($(document.createElement("span")).addClass("oj-menu-item-icon oj-icon oj-navigationlist-level-indicator"))}var a=$(document.createElement("span")).addClass("oj-navigationlist-hierarchical-menu-label");a.text(i),r.append(a),s.data("key",e),this._hviewMenu.append(s),this._hviewMenu.ojMenu("refresh"),this._showOrHideHierarchyMenu(this.m_widget.GetOption("hierarchyMenuDisplayThresholdLevel")),this._hviewBtn.ojButton("option","disabled",!1),this._prevButton.css("visibility","visible"),this.m_widget.getRootElement().hasClass("oj-focus-ancestor")&&this._prevButton.attr("tabindex","0"),this._headerLabel.text(t)}},n.SlidingNavListHandler.prototype.SetOptions=function(e){void 0!==e.hierarchyMenuDisplayThresholdLevel&&(this.m_widget.GetOption("hierarchyMenuDisplayThresholdLevel")!==e.hierarchyMenuDisplayThresholdLevel&&this._showOrHideHierarchyMenu(e.hierarchyMenuDisplayThresholdLevel))},n.SlidingNavListHandler.prototype._showOrHideHierarchyMenu=function(e){var t=this._hviewMenu.find("li").length;-1===e||t<e?(this._vSeparator.css("visibility","hidden"),this._hviewBtn[0]===document.activeElement&&this.m_root.focusin(),this._hviewBtn.css("visibility","hidden")):t>=e&&(this._vSeparator.css("visibility","visible"),this._hviewBtn.css("visibility","visible"))},n.SlidingNavListHandler.prototype._removeItemFromHviewMenu=function(){if(this._hviewBtn){var e=this._hviewMenu.find("li").last().remove();this._hviewMenu.ojMenu("refresh"),this._showOrHideHierarchyMenu(this.m_widget.GetOption("hierarchyMenuDisplayThresholdLevel")),0===this._hviewMenu.children("li").length?(this._hviewBtn.ojButton("option","disabled",!0),this._prevButton.css("visibility","hidden"),this._prevButton.attr("tabindex","-1"),this._headerLabel.text(this.m_widget.getRootLabel())):this._headerLabel.text(e.children("a").text())}},n.SlidingNavListHandler.prototype.RestoreItem=function(e,t,i){e.removeClass(this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS),t.removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-describedby").removeAttr("aria-hidden")},n.SlidingNavListHandler.prototype._makeToolbarItemsFocusable=function(e){e?(this._hviewMenu.find("li").length&&this._prevButton.attr("tabindex","0"),this._hviewBtn.attr("tabindex","0")):(this._prevButton.attr("tabindex","-1"),this._hviewBtn.attr("tabindex","-1"))},n.SlidingNavListHandler.prototype.HandleFocus=function(e){$.contains(this._toolbar.get(0),e.target)||this._hviewMenu.get(0)===e.relatedTarget||(this._makeToolbarItemsFocusable(!0),di.superclass.HandleFocus.apply(this.m_widget,arguments))},n.SlidingNavListHandler.prototype.HandleBlur=function(e){$.contains(this._toolbar.get(0),e.relatedTarget)||this._hviewMenu.get(0)===e.relatedTarget?this.m_widget.UnhighlightActive():(null!=e.relatedTarget&&$.contains(this.m_root.get(0),e.relatedTarget)||this._makeToolbarItemsFocusable(!1),di.superclass.HandleBlur.apply(this.m_widget,arguments))},n.SlidingNavListHandler.prototype.GetNodeBySubId=function(e){return"oj-navigationlist-previous-link"===e.subId?this._prevButton?this._prevButton[0]:null:"oj-navigationlist-hierarchical-button"===e.subId?this._hviewBtn?this._hviewBtn[0]:null:"oj-navigationlist-hierarchical-menu"===e.subId&&this._hviewMenu?this._hviewMenu[0]:null},n.SlidingNavListHandler.prototype.GetSubIdByNode=function(e){return $(e).closest(this._prevButton).length>0?{subId:"oj-navigationlist-previous-link"}:$(e).closest(this._hviewBtn).length>0?{subId:"oj-navigationlist-hierarchical-button"}:$(e).closest(this._hviewMenu).length>0?{subId:"oj-navigationlist-hierarchical-menu"}:null};var di=function(e,t){var i=function(){};return n.Object.createSubclass(i,e,""),$.extend(i.prototype,t),i}(n._ojListView,{OPTION_DRILL_MODE:"drillMode",OPTION_DRILL_MODE_NONE:"none",OPTION_DRILL_MODE_COLLAPSIBLE:"collapsible",OPTION_DRILL_MODE_SLIDING:"sliding",OPTION_DISPLAY:"display",OPTION_DISPLAY_ICONS:"icons",OPTION_DISPLAY_ALL:"all",OPTION_EDGE:"edge",OPTION_EDGE_TOP:"top",OPTION_EDGE_END:"end",OPTION_EDGE_START:"start",OPTION_EDGE_BOTTOM:"bottom",OPTION_SELECTION:"selection",OPTION_CURRENT_ITEM:"currentItem",TAG_NAME_TAB_BAR:"oj-tab-bar",NAVLIST_ITEM_SUBID_KEY:{navlist:"oj-navigationlist-item",tabbar:"oj-tabbar-item"},NAVLIST_EXPANDED_STYLE_CLASS:{navlist:"oj-navigationlist-expanded",tabbar:"oj-tabbar-expanded"},NAVLIST_COLLAPSIBLE_STYLE_CLASS:{navlist:"oj-navigationlist-collapsible",tabbar:"oj-tabbar-collapsible"},NAVLIST_VERTICAL_STYLE_CLASS:{navlist:"oj-navigationlist-vertical",tabbar:"oj-tabbar-vertical"},ITEM_CONTENT_STYLE_CLASS:{navlist:"oj-navigationlist-item-content",tabbar:"oj-tabbar-item-content"},NAVLIST_DIVIDERS_STYLE_CLASS:{navlist:"oj-navigationlist-item-dividers",tabbar:"oj-tabbar-item-dividers"},LAST_ITEM_STYLE_CLASS:{navlist:"oj-navigationlist-item-last-child",tabbar:"oj-tabbar-item-last-child"},EXPANDED_STYLE_CLASS:"oj-expanded",COLLAPSED_STYLE_CLASS:"oj-collapsed",SLIDING_NAVLIST_CURRENT_STYLE_CLASS:"oj-navigationlist-current",DIVIDER_STYLE_CLASS:{navlist:"oj-navigationlist-divider",tabbar:"oj-tabbar-divider"},NAVLIST_OVERFLOW_MENU_ITEM:{navlist:"oj-navigationlist-overflow-menu-item",tabbar:"oj-tabbar-overflow-menu-item"},NAVLIST_OVERFLOW_MENU:{navlist:"oj-navigationlist-overflow-menu",tabbar:"oj-tabbar-overflow-menu"},NAVLIST_OVERFLOW_ITEM_ICON:{navlist:"oj-navigationlist-overflow-item-icon",tabbar:"oj-tabbar-overflow-item-icon"},_CATEGORY_DIVIDER_STYLE_CLASS:{navlist:"oj-navigationlist-category-divider",tabbar:"oj-tabbar-category-divider"},_ITEM_LABEL_STYLE_CLASS:{navlist:"oj-navigationlist-item-label",tabbar:"oj-tabbar-item-label"},_ICON_ONLY_STYLE_CLASS:{navlist:"oj-navigationlist-icon-only",tabbar:"oj-tabbar-icon-only"},_ITEM_ICON_STYLE_CLASS:{navlist:"oj-navigationlist-item-icon",tabbar:"oj-tabbar-item-icon"},_HORIZONTAL_NAVLIST_STYLE_CLASS:{navlist:"oj-navigationlist-horizontal",tabbar:"oj-tabbar-horizontal"},_NAVLIST_END_EDGE_STYLE_CLASS:{navlist:"oj-navigationlist-vertical-end",tabbar:"oj-tabbar-vertical-end"},_NAVLIST_BOTTOM_EDGE_STYLE_CLASS:{navlist:"oj-navigationlist-horizontal-bottom",tabbar:"oj-tabbar-horizontal-bottom"},_NAVLIST_HAS_ICONS:{navlist:"oj-navigationlist-has-icons",tabbar:"oj-tabbar-has-icons"},_NAVLIST_ITEM_HAS_NO_ICON:{navlist:"oj-navigationlist-item-no-icon",tabbar:"oj-tabbar-item-no-icon"},_NAVLIST_ITEM_TITLE:{navlist:"oj-navigationlist-item-title",tabbar:"oj-tabbar-item-title"},_NAVLIST_STYLE_CLASS:{navlist:"oj-navigationlist",tabbar:"oj-tabbar"},_NAVLIST_TOUCH_STYLE_CLASS:{navlist:"oj-navigationlist-touch",tabbar:"oj-tabbar-touch"},_NAVLIST_LISTVIEW_CONTAINER_STYLE_CLASS:{navlist:"oj-navigationlist-listview-container",tabbar:"oj-tabbar-listview-container"},_IS_TITLE_ATTR_ADDED_DUE_TO_TRUNCATION:"IsTitleAttrDueToTruncation",_APPLICATION_LEVEL_NAV_STYLE_CLASS:"oj-navigationlist-app-level",_PAGE_LEVEL_NAV_STYLE_CLASS:"oj-navigationlist-page-level",_NAVLIST_ITEM_ICON_HAS_TITLE:"navigationListItemIconHastitle",_NAVLIST_NO_FOLLOW_LINK_CLASS:{navlist:"oj-navigationlist-nofollow-link",tabbar:"oj-tabbar-nofollow-link"},_CONTAINER_STYLE_CLASS:{navlist:"oj-navigationlist-listview",tabbar:"oj-tabbar-listview"},_ELEMENT_STYLE_CLASS:{navlist:"oj-navigationlist-element",tabbar:"oj-tabbar-element"},_ELEMENT_EMPTY_TEXT_STYLE_CLASS:{navlist:"oj-navigationlist-empty-text",tabbar:"oj-tabbar-empty-text"},_ELEMENT_NO_DATA_MSG_STYLE_CLASS:{navlist:"oj-navigationlist-no-data-message",tabbar:"oj-tabbar-no-data-message"},_FOCUSED_ELEMENT_STYLE_CLASS:{navlist:"oj-navigationlist-focused-element",tabbar:"oj-tabbar-focused-element"},_ITEM_ELEMENT_STYLE_CLASS:{navlist:"oj-navigationlist-item-element",tabbar:"oj-tabbar-item-element"},_ITEM_STYLE_CLASS:{navlist:"oj-navigationlist-item",tabbar:"oj-tabbar-item"},_OPTION_DEFAULT_STYLE_CLASS:{navlist:"oj-navigationlist-option-defaults",tabbar:"oj-tabbar-option-defaults"},getItemLabel:function(e){var t=this.getItemContentElement(e);return t.is("a")?$.trim(t.text()):$.trim(t.find("."+this.getItemTitleStyleClass()).text())},getItemContentElement:function(e){var t=e.children("."+this.getItemContentStyleClass());return 0===t.length&&0===(t=e.children("."+this.getGroupItemStyleClass()).children("."+this.getItemContentStyleClass())).length&&(t=e.children("."+this.getGroupItemStyleClass()).children(":not(."+this.getExpandIconStyleClass()+"):not(."+this.getCollapseIconStyleClass()+")")),t},isRtl:function(){return"rtl"===this.ojContext._GetReadingDirection()},_initNavigationMode:function(e){e[0].tagName.toLowerCase()===this.TAG_NAME_TAB_BAR?this._navigationMode="tabbar":this._navigationMode="navlist"},_getNavigationMode:function(){return this._navigationMode},renderComplete:function(){this.m_listHandler.BeforeRenderComplete(),di.superclass.renderComplete.apply(this,arguments)},itemInsertComplete:function(e,t){this.m_listHandler.ItemInsertComplete(e,t)},itemRemoveComplete:function(e){this.m_listHandler.ItemRemoveComplete(e),di.superclass.itemRemoveComplete.apply(this,arguments)},_restoreContent:function(e){var t=e.children();e.removeAttr("style").removeClass(this.getHasIconsStyleClass()).removeAttr("aria-hidden");for(var i=0;i<t.length;i++){var n=t[i];if((n=$(n)).hasClass(this.getDividerStyleClass()))n.remove();else{var o=this.getItemContentElement(n);o.removeClass(this.getItemContentStyleClass()).removeClass(this.getHasNoIconStyleClass()).removeAttr("aria-haspopup");var s=o.children("."+this.getItemIconStyleClass());s&&s.length>0&&(s.removeAttr("role"),s.removeAttr("aria-label"),this._removeToolTipOnIcon(s)),n.removeClass("oj-default").removeAttr("role").removeAttr("aria-disabled").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-pressed");var r=this.getFocusItem(n);r.removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-pressed"),o.children("."+this.getItemLabelStyleClass()).contents().unwrap(),r.data(this._IS_TITLE_ATTR_ADDED_DUE_TO_TRUNCATION)&&r.removeAttr("title");var a=n.children("ul");a.length>0?(this.m_listHandler.RestoreItem(n,o,a),this._restoreContent(a)):this.m_listHandler.RestoreItem(n,o)}}},GetDnDContext:function(){if(void 0!==n.NavigationListDndContext&&this.ojContext.element[0].tagName.toLowerCase()===this.TAG_NAME_TAB_BAR)return new n.NavigationListDndContext(this)},IsNodeEditableOrClickable:function(e){return!(e.hasClass(this.getItemContentStyleClass())||e.hasClass(this.getExpandIconStyleClass())||e.hasClass(this.getCollapseIconStyleClass()))&&di.superclass.IsNodeEditableOrClickable.apply(this,arguments)},IsElementEditableOrClickable:function(e){return e.prop("nodeName").match(/^INPUT|SELECT|OPTION|BUTTON|^A\b|TEXTAREA/)&&!e.hasClass(this.getItemContentStyleClass())||e.hasClass("oj-component")},_focusable:function(e){return $(e.data).is("li")?!$(e.data).hasClass("oj-disabled"):!$(e.parentElement).hasClass("oj-disabled")},_prepareListViewOptions:function(e){var t=$.extend({},e);return t.drillMode="none"!==e.drillMode?"collapsible":"none",t.selection=null!==e.selection?[e.selection]:[],t.selectionMode="single",t.item=$.extend({focusable:this._focusable},e.item),t.element=this._list,t},getRootLabel:function(){return this.ojContext.options.rootLabel?this.ojContext.options.rootLabel:this.ojContext.getTranslatedString("defaultRootLabel")},SetAriaProperties:function(){this.ojContext.element.attr("aria-multiselectable",!1)},HandleFocus:function(e){return this.m_listHandler.HandleFocus(e)},HandleBlur:function(e){return this.m_listHandler.HandleBlur(e)},SetRootElementTabIndex:function(){this.ojContext.element.attr("tabIndex",0)},RemoveRootElementTabIndex:function(){this.ojContext.element.removeAttr("tabIndex")},UnsetAriaProperties:function(){this.ojContext.element.removeAttr("aria-activedescendant").removeAttr("aria-multiselectable")},ShouldUseGridRole:function(){return!1},init:function(e){var t=this,i=e.ojContext.element;this._initNavigationMode(i),i.addClass(this.getNavListStyleClass()),n.DomUtils.isTouchSupported()&&i.addClass(this.getNavListTouchStyleClass()),this._list=i.children("ul:first"),0===this._list.length&&(this._list=$(document.createElement("ul")),i.append(this._list));var o=$(document.createElement("div"));o.addClass(this.getNavListContainerStyleClass()),o.attr("role","presentation"),this._list.wrap(o);var s=this._prepareListViewOptions(e);di.superclass.init.call(this,s),this.getRootElement().attr("role","presentation"),this.element.removeClass("oj-component-initnode"),this.ojContext._on(this.ojContext.element,{click:function(e){t.m_listHandler.HandleClick(e)},keydown:function(e){t.m_listHandler.HandleKeydown(e)},mouseup:function(e){t._clearActiveState(e)},mouseover:function(e){if($(e.target).closest("a."+t.getItemContentStyleClass()).length>0){var i=$(e.target).closest("a."+t.getItemContentStyleClass()),n=i.find("."+t.getItemLabelStyleClass());n[0].offsetWidth<n[0].scrollWidth&&!i.attr("title")&&(i.attr("title",n.text().trim()),i.data(t._IS_TITLE_ATTR_ADDED_DUE_TO_TRUNCATION,"true"))}},mouseout:function(e){if($(e.target).closest("a."+t.getItemContentStyleClass()).length>0){var i=$(e.target).closest("a."+t.getItemContentStyleClass());i.data(t._IS_TITLE_ATTR_ADDED_DUE_TO_TRUNCATION)&&(i.removeData(t._IS_TITLE_ATTR_ADDED_DUE_TO_TRUNCATION),i.removeAttr("title")),t._clearActiveState(e)}}})},_initListHandler:function(){var e=this.ojContext.options.drillMode,t=this.ojContext.options.edge;e===this.OPTION_DRILL_MODE_SLIDING?this.m_listHandler=new n.SlidingNavListHandler(this,this.ojContext.element,this.ojContext):e===this.OPTION_DRILL_MODE_COLLAPSIBLE?this.m_listHandler=new n.CollapsibleNavListHandler(this,this.ojContext.element,this.ojContext):e!==this.OPTION_DRILL_MODE_NONE||t!==this.OPTION_EDGE_TOP&&t!==this.OPTION_EDGE_BOTTOM?this.m_listHandler=new n.DefaultNavListHandler(this,this.ojContext.element,this.ojContext):this.m_listHandler=new n.HorizontalNavListHandler(this,this.ojContext.element,this.ojContext),this.m_listHandler.Init(this.options);var i=this.ojContext.options.navigationLevel;this._setNavigationLevel(i)},_setNavigationLevel:function(e){"none"===this.ojContext.options.drillMode&&("application"===e||"oj-navigation-list"===this.ojContext.element[0].tagName.toLowerCase()?(this.ojContext.element.addClass(this._APPLICATION_LEVEL_NAV_STYLE_CLASS),this.ojContext.element.removeClass(this._PAGE_LEVEL_NAV_STYLE_CLASS)):"page"===e&&(this.ojContext.element.addClass(this._PAGE_LEVEL_NAV_STYLE_CLASS),this.ojContext.element.removeClass(this._APPLICATION_LEVEL_NAV_STYLE_CLASS)))},_clearActiveState:function(e){var t=this.FindItem($(e.target));null!=t&&this.HighlightUnhighlightElem(t,"oj-active",!1)},afterCreate:function(){this._initListHandler(),di.superclass.afterCreate.apply(this,arguments)},getAnimationEffect:function(e){return this.m_listHandler.GetAnimationEffect(e)},notifyAttached:function(){di.superclass.notifyAttached.apply(this,arguments),this.m_listHandler.NotifyAttached()},ShouldRegisterResizeListener:function(){return!0},HandleResize:function(e,t){di.superclass.HandleResize.apply(this,arguments),e>0&&t>0&&null!=this.m_listHandler&&this.m_listHandler.HandleResize(e,t)},BeforeInsertItem:function(){this.m_listHandler.BeforeInsertItem()},HandleMouseDownOrTouchStart:function(e){di.superclass.HandleMouseDownOrTouchStart.apply(this,arguments);var t=this.FindItem($(e.target));t&&!t.hasClass("oj-disabled")&&this.HighlightUnhighlightElem(t,"oj-active",!0)},HandleTouchEndOrCancel:function(e){this._clearActiveState(e),di.superclass.HandleTouchEndOrCancel.apply(this,arguments)},getItemContentStyleClass:function(){return this.ITEM_CONTENT_STYLE_CLASS[this._getNavigationMode()]},getNavListExpandedStyleClass:function(){return this.NAVLIST_EXPANDED_STYLE_CLASS[this._getNavigationMode()]},getNavListCollapsibleStyleClass:function(){return this.NAVLIST_COLLAPSIBLE_STYLE_CLASS[this._getNavigationMode()]},getNavListVerticalStyleClass:function(){return this.NAVLIST_VERTICAL_STYLE_CLASS[this._getNavigationMode()]},getNavListItemsDividerStyleClass:function(){return this.NAVLIST_DIVIDERS_STYLE_CLASS[this._getNavigationMode()]},getLastItemStyleClass:function(){return this.LAST_ITEM_STYLE_CLASS[this._getNavigationMode()]},getDividerStyleClass:function(){return this.DIVIDER_STYLE_CLASS[this._getNavigationMode()]},getOverflowItemStyleClass:function(){return this.NAVLIST_OVERFLOW_MENU_ITEM[this._getNavigationMode()]},getOverflowMenuStyleClass:function(){return this.NAVLIST_OVERFLOW_MENU[this._getNavigationMode()]},getOverflowItemIconStyleClass:function(){return this.NAVLIST_OVERFLOW_ITEM_ICON[this._getNavigationMode()]},getCategoryDividerStyleClass:function(){return this._CATEGORY_DIVIDER_STYLE_CLASS[this._getNavigationMode()]},getItemLabelStyleClass:function(){return this._ITEM_LABEL_STYLE_CLASS[this._getNavigationMode()]},getIconOnlyStyleClass:function(){return this._ICON_ONLY_STYLE_CLASS[this._getNavigationMode()]},getItemIconStyleClass:function(){return this._ITEM_ICON_STYLE_CLASS[this._getNavigationMode()]},getHorizontalNavListStyleClass:function(){return this._HORIZONTAL_NAVLIST_STYLE_CLASS[this._getNavigationMode()]},getNavListEndEdgeStyleClass:function(){return this._NAVLIST_END_EDGE_STYLE_CLASS[this._getNavigationMode()]},getNavListBottomEdgeStyleClass:function(){return this._NAVLIST_BOTTOM_EDGE_STYLE_CLASS[this._getNavigationMode()]},getHasIconsStyleClass:function(){return this._NAVLIST_HAS_ICONS[this._getNavigationMode()]},getHasNoIconStyleClass:function(){return this._NAVLIST_ITEM_HAS_NO_ICON[this._getNavigationMode()]},getItemTitleStyleClass:function(){return this._NAVLIST_ITEM_TITLE[this._getNavigationMode()]},getNavListStyleClass:function(){return this._NAVLIST_STYLE_CLASS[this._getNavigationMode()]},getNavListTouchStyleClass:function(){return this._NAVLIST_TOUCH_STYLE_CLASS[this._getNavigationMode()]},getNavListContainerStyleClass:function(){return this._NAVLIST_LISTVIEW_CONTAINER_STYLE_CLASS[this._getNavigationMode()]},getNoFollowLinkStyleClass:function(){return this._NAVLIST_NO_FOLLOW_LINK_CLASS[this._getNavigationMode()]},getItemSubIdKey:function(){return this.isTabBar()?this.NAVLIST_ITEM_SUBID_KEY.tabbar:this.NAVLIST_ITEM_SUBID_KEY.navlist},GetContainerStyleClass:function(){return this._CONTAINER_STYLE_CLASS[this._getNavigationMode()]},GetStyleClass:function(){return this._ELEMENT_STYLE_CLASS[this._getNavigationMode()]},getEmptyTextMarkerClass:function(){return this._ELEMENT_EMPTY_TEXT_STYLE_CLASS[this._getNavigationMode()]},getEmptyTextStyleClass:function(){return this._ELEMENT_NO_DATA_MSG_STYLE_CLASS[this._getNavigationMode()]},getNavListRemoveIcon:function(){return"oj-tabbar-remove-icon"},getNavListRemoveCommand:function(){return"oj-tabbar-remove"},getRemovableStyleClass:function(){return"oj-removable"},getItemStyleClass:function(){return this._ITEM_STYLE_CLASS[this._getNavigationMode()]},getFocusedElementStyleClass:function(){return this._FOCUSED_ELEMENT_STYLE_CLASS[this._getNavigationMode()]},getItemElementStyleClass:function(){return this._ITEM_ELEMENT_STYLE_CLASS[this._getNavigationMode()]},getCollapseIconStyleClass:function(){return"oj-navigationlist-collapse-icon"},getExpandIconStyleClass:function(){return"oj-navigationlist-expand-icon"},getDepthStyleClass:function(e){return"oj-navigationlist-depth-"+e},getGroupItemStyleClass:function(){return"oj-navigationlist-group-item"},getGroupStyleClass:function(){return"oj-navigationlist-group"},getGroupExpandStyleClass:function(){return"oj-navigationlist-collapsible-transition"},getGroupCollapseStyleClass:function(){return this.getGroupExpandStyleClass()},getOptionDefaultsStyleClass:function(){return this._OPTION_DEFAULT_STYLE_CLASS[this._getNavigationMode()]},AnimateExpand:function(e,t,i){return this.m_listHandler.Expand(e,t,i)},AnimateCollapse:function(e,t,i,n){return this.m_listHandler.Collapse(e,t,i,n)},HandleArrowKeys:function(e,t,i){return this.m_listHandler.HandleArrowKeys(e,t,i)},IsArrowKey:function(e){return this.m_listHandler.IsArrowKey(e)},GetState:function(e){return this.m_listHandler.GetState(e)},SetState:function(e,t){this.m_listHandler.SetState(e,t)},HandleMouseClick:function(e){var t=$(e.target),i=this.FindItem(t);if(null!=i&&0!==i.length)if(t.hasClass(this.getNavListRemoveIcon())&&this.isTabBar())this._handleRemove(e,i);else if(this.SkipFocus(i))e.preventDefault();else if(!this.IsNodeEditableOrClickable(t)){var n=this.getItemContentElement(i).attr("href");n&&"#"!==n&&0===e.button&&(e.shiftKey||e.ctrlKey)||(di.superclass.HandleMouseClick.apply(this,arguments),e.preventDefault())}},HandleKeyDown:function(e){if(this.m_active){var t,i=e.keyCode,n=this.m_active.elem,o=this.m_active.key;if(i===$.ui.keyCode.HOME||i===$.ui.keyCode.END)t=i===$.ui.keyCode.HOME?this.element.find("."+this.getItemContentStyleClass()+":visible").first().closest("."+this.getItemElementStyleClass()):this.element.find("."+this.getItemContentStyleClass()+":visible").last().closest("."+this.getItemElementStyleClass()),this.SetCurrentItem(t,e),e.preventDefault();else if(i===$.ui.keyCode.DELETE&&this.isTabBar())this._handleRemove(e,n);else{var s=this.HandleSelectionOrActiveKeyDown(e),r=this.m_listHandler.HandleExpandAndCollapseKeys(e,i,n,o);(s=s||r||null!=this.m_dndContext&&this.m_dndContext.HandleKeyDown(e))&&e.preventDefault()}}},AvoidFocusHighLight:function(e){this._avoidFocusHighLight=e},RecentPointerCallback:function(){var e=this;return function(){return!!e._avoidFocusHighLight}},ShouldApplyHighlight:function(){return!0},ToggleSelection:function(e,t,i){var n=this.m_active.elem;this.IsSelectable(n[0])&&(this._isSelected(n)||this._fireBeforeSelectEvent(e,n)&&(di.superclass.ToggleSelection.apply(this,arguments),this._initiateNavigation(n)))},HighlightUnhighlightElem:function(e,t,i){var n=$(e);"oj-selected"===t&&this.m_listHandler.UpdateAriaPropertiesOnSelectedItem(this.getFocusItem(n),i);var o=n.children("."+this.getGroupItemStyleClass());o.length>0&&(n=$(o[0])),"oj-focus"===t?i?this._focusInHandler(n):this._focusOutHandler(n):i?n.addClass(t):n.removeClass(t),n.hasClass("oj-selected")||n.hasClass("oj-hover")||n.hasClass("oj-active")||n.hasClass("oj-disabled")?n.removeClass("oj-default"):n.addClass("oj-default")},IsSelectable:function(e){return!$(e).hasClass("oj-disabled")&&this.m_listHandler.IsSelectable($(e))},Trigger:function(e,t,i){return"ready"===e||this.ojContext._trigger(e,t,i)},SetOption:function(e,t,i){if(this.m_listHandler.IsOptionUpdateAllowed(e,t,i)){var n=null;if("selection"===e){var o=i._context,s=o&&o.extraData&&o.extraData.items;s&&(this.ojContext._IsCustomElement()?0===s.length?o.extraData.item=null:o.extraData.item=s[0]:o.extraData.item=s,o.extraData.items=void 0),t&&t.length>0&&(n=t[0]),this._fireDeselectEvent(o.originalEvent,s,t)}else n=t;this.ojContext.option(e,n,i),this.options[e]=t,this.m_listHandler.OptionUpdated(e,n,i)}},ShouldRefresh:function(e){return null!=e.data||null!=e.drillMode||null!=e.item||null!=e.display||null!=e.edge},setOptions:function(e,t){var i,n={skipOptions:[]};return this.m_listHandler.SetOptions(e),void 0!==e.navigationLevel&&this._setNavigationLevel(e.navigationLevel),void 0!==e.selection&&(i=e.selection),n.needRefresh=di.superclass.setOptions.call(this,e,t),void 0!==i&&void 0===e.selection&&n.skipOptions.push("selection"),void 0!==i&&(e.selection=i),n},compareValues:function(e,t){return e===t||n.Object.compareValues(e,t)},HandleSelectionOption:function(e){if(void 0!==e.selection){var t=e.selection;if(t){var i=this.GetOption("selection");if(i&&0!==i.length&&this.compareValues(i[0],t))delete e.selection;else{var n=this.FindElementByKey(t);if(!n||this.IsSelectable(n))this._fireBeforeSelectEvent(null,$(n),t)?(this._fireDeselectEvent(null,n,t),e.selection=[t],n&&this._initiateNavigation($(n))):delete e.selection;else delete e.selection}}else e.selection=[]}di.superclass.HandleSelectionOption.call(this,e)},GetOption:function(e){var t=this.ojContext.option(e);return"selection"===e?t?[t]:[]:("item"!==e||t.focusable||(t.focusable=this._focusable),null===t?this.options[e]:t)},getWidgetConstructor:function(){return w.__GetWidgetConstructor(this.ojContext.element)},SelectAndFocus:function(e,t){e.hasClass("oj-disabled")||this.IsSelectable(e[0])&&(!this._isSelected(e)&&this._fireBeforeSelectEvent(t,e)?(di.superclass.SelectAndFocus.apply(this,arguments),this._initiateNavigation(e)):this.HandleClickActive(e,t))},isTabBar:function(){return this.ojContext.element[0].tagName.toLowerCase()===this.TAG_NAME_TAB_BAR},_fireBeforeDeselectEvent:function(e,t,i){i||(i=this.GetKey(t[0]));var n=this.GetOption("selection"),o=this.FindElementByKey(n);return this.Trigger("beforeDeselect",e,{toItem:t,toKey:i,fromItem:o,fromKey:n})},_fireBeforeSelectEvent:function(e,t,i){var n=!0;return i||(i=this.GetKey(t[0])),this.isTabBar()&&(n=this._fireBeforeDeselectEvent(e,t,i)),n&&this.Trigger("beforeSelect",e,{item:t,key:i})},_fireRemoveEvent:function(e,t){var i=this.GetKey(t[0]);return this.Trigger("beforeRemove",e,{item:t,key:i})&&this.Trigger("remove",e,{item:t,key:i})},_fireDeselectEvent:function(e,t,i){var n=this.GetOption("selection"),o=this.FindElementByKey(n);this.Trigger("deselect",e,{toItem:t,toKey:i,fromItem:o,fromKey:n})},_initiateNavigation:function(e){if(this.ojContext.element.hasClass(this.getNoFollowLinkStyleClass()))return!1;var t=this.getItemContentElement(e),i=t.attr("href"),n=t.attr("target");return!(!i||"#"===i)&&(n&&"_self"!==n?window.open(i,n):window.location.href=i,!0)},_isSelected:function(e){var t=this.GetOption("selection"),i=this.GetKey(e[0]);return!(!t||1!==t.length||!this.compareValues(t[0],i))},_setToolTipOnIcon:function(e,t){e.attr("title")||e.attr("title",t)},_removeToolTipOnIcon:function(e){e.data(this._NAVLIST_ITEM_ICON_HAS_TITLE)?e.removeData(this._NAVLIST_ITEM_ICON_HAS_TITLE):e.removeAttr("title")},GetSlotMap:function(){return n.BaseCustomElementBridge.getSlotMap(this.ojContext.element[0])},getSingleFocusableElement:function(e){var t=this,i="a, input, select, textarea, button",n=e.children(i).filter(function(){return!$(this).hasClass(t.getNavListRemoveIcon())});return 1===n.length&&0===n.first().find(i).length?n.first():e},PrepareContextMenu:function(e){var t=this.ojContext._GetContextMenu();if(null!=this.m_dndContext&&t&&this.m_dndContext.prepareContextMenu(t),e.hasClass(this.getRemovableStyleClass())&&t){this.m_contextMenu!==t&&(this.m_contextMenu=t,t.addEventListener("ojBeforeOpen",this._handleContextMenuBeforeOpen.bind(this)),t.addEventListener("ojAction",this._handleContextMenuSelect.bind(this)));var i=$(t).find("[data-oj-command="+this.getNavListRemoveCommand()+"]"),n=this.ojContext.getTranslatedString("labelRemove");this.ojContext._IsCustomElement()?i.empty().append(document.createTextNode(n)):i.empty().append($('<a href="#"></a>').text(n)),t.refresh()}},_handleContextMenuSelect:function(e){$(e.target).attr("data-oj-command")===this.getNavListRemoveCommand()&&this._handleRemove(e,this.m_contextMenuItem)},_handleContextMenuBeforeOpen:function(e){this.m_contextMenuItem=e.detail.openOptions.launcher},_handleRemove:function(e,t){t.hasClass(this.getRemovableStyleClass())&&this._fireRemoveEvent(e,t)},_wrapInner:function(e,t){for(var i=e.childNodes;i.length>0;)t.appendChild(i[0]);e.appendChild(t)},itemRenderComplete:function(e,t){var i=$(e);if(i.hasClass(this.getCategoryDividerStyleClass()))return i.removeClass(this.getItemElementStyleClass()),i.removeClass(this.getFocusedElementStyleClass()),i.removeClass(this.getItemStyleClass()),i.removeAttr("aria-selected"),i.children().remove(),void i.attr("role","separator");var n,o=this.getGroupItemStyleClass(),s=this.getCollapseIconStyleClass(),r=this.getExpandIconStyleClass(),a=this.getItemIconStyleClass(),l=i.children("."+o);if(l.length>0){l.addClass(this.getItemStyleClass()),n=l.children(":not(."+r+"):not(."+s+")");var u=l.children("."+r);0===u.length&&(u=l.children("."+s)),u.attr("role","presentation"),u.removeAttr("aria-labelledby"),i.hasClass("oj-disabled")&&l.addClass("oj-disabled")}else n=i.children().first();if(n.length>0){n.addClass(this.getItemContentStyleClass());var d=n.find("."+a),h=document.createElement("span");if(h.classList.add(this.getItemLabelStyleClass()),this._wrapInner(n[0],h),d.length>0){if(d.insertBefore(h),d.attr("title")&&d.data(this._NAVLIST_ITEM_ICON_HAS_TITLE,d.attr("title")),"icons"===this.ojContext.options.display){this.ojContext.element.addClass(this.getIconOnlyStyleClass());var c=this.getItemLabel(i);d.attr("aria-label",c),d.attr("role","img"),this._setToolTipOnIcon(d,c)}i.closest("ul").addClass(this.getHasIconsStyleClass())}else n.addClass(this.getHasNoIconStyleClass())}if(i.hasClass("oj-disabled")?this.getFocusItem(i).attr("aria-disabled","true"):l.length>0?l.addClass("oj-default"):i.addClass("oj-default"),i.hasClass(this.getRemovableStyleClass())&&this.isTabBar()){var p=$("<a>");p.addClass(this.getNavListRemoveIcon()).addClass("oj-clickable-icon-nocontext oj-component-icon").attr("aria-label",this.ojContext.getTranslatedString("removeCueText")).attr("role","presentation").attr("aria-hidden","true"),i.append(p),n.attr("aria-describedby",p.uniqueId().attr("id"))}this.m_listHandler.ModifyListItem(i,n),di.superclass.itemRenderComplete.apply(this,arguments)},DestroyContentHandler:function(){null===this.GetOption("data")&&this._restoreContent(this.element),di.superclass.DestroyContentHandler.apply(this,arguments)},getNodeBySubId:function(e){if(null==e)return this.ojContext.element?this.ojContext.element[0]:null;var t=this.m_listHandler.GetNodeBySubId(e);if(!t&&e.subId===this.getItemSubIdKey()){var i=e.key;t=this.FindElementByKey(i)}return t},getSubIdByNode:function(e){var t=null;if(null!=e&&!(t=this.m_listHandler.GetSubIdByNode(e))){var i=this.FindItem(e);if(null!=i&&i.length>0){var n=this.GetKey(i[0]);null!=n&&(t={subId:this.getItemSubIdKey(),key:n})}}return t},getContextByNode:function(e){var t=di.superclass.getContextByNode.call(this,e);return t&&"oj-listview-item"===t.subId?(t.subId=this.getItemSubIdKey(),t):null},refresh:function(){this._resetNavlist(),this._initListHandler(),di.superclass.refresh.apply(this,arguments)},_resetNavlist:function(){this.ojContext.element.removeClass(this.getIconOnlyStyleClass()),this.ojContext.element.removeClass(this._APPLICATION_LEVEL_NAV_STYLE_CLASS),this.ojContext.element.removeClass(this._PAGE_LEVEL_NAV_STYLE_CLASS),this._restoreContent(this.element),this.m_listHandler.Destroy()},destroy:function(){this._resetNavlist(),di.superclass.destroy.apply(this,arguments),this._list.unwrap(),this._list.is(":empty")&&this._list.remove(),this.ojContext.element.removeClass(this.getNavListStyleClass()+" "+this.getNavListTouchStyleClass()),this.ojContext._off(this.element,"click"),this.ojContext._off(this.element,"focus"),this.ojContext._off(this.element,"blur"),this.ojContext._off(this.element,"mouseover"),this.ojContext._off(this.element,"mousein"),this.ojContext._off(this.element,"mouseout"),this.ojContext._off(this.element,"keydown")}});n.__registerWidget("oj.ojNavigationList",$.oj.baseComponent,{widgetEventPrefix:"oj",options:{as:"",currentItem:null,drillMode:"none",reorderable:"disabled",truncation:"none",edge:"start",hierarchyMenuDisplayThresholdLevel:0,rootLabel:null,selection:null,expanded:new n._ojListViewExpandedKeySet,data:null,display:"all",navigationLevel:"page",overflow:"hidden",item:{renderer:null,selectable:!0},animateStart:null,animateEnd:null,beforeSelect:null,beforeCollapse:null,beforeCurrentItem:null,beforeDeselect:null,collapse:null,deselect:null,beforeExpand:null,expand:null,reorder:null},_ComponentCreate:function(){this._super(),this._setup()},_AfterCreate:function(){this._super();var e=this;this.navlist._FixRendererContext=function(t){return e._FixRendererContext(t)},this.navlist._WrapCustomElementRenderer=function(t){return e._WrapCustomElementRenderer(t)},this.navlist.afterCreate()},_NotifyContextMenuGesture:function(e,t,i){this.navlist.notifyContextMenuGesture(e,t,i)},_setup:function(){this.navlist=new di;for(var e=Object.keys(this.options),t=0;t<e.length;t++){var i=e[t];this._validateOptionValues(i,this.options[i])}this._validateOptionsForIconsOnlyAndHorizontalList(this.options[this.navlist.OPTION_DRILL_MODE],this.options[this.navlist.OPTION_DISPLAY],this.options[this.navlist.OPTION_EDGE]);var n={};n.ojContext=this,n=$.extend(this.options,n),this.navlist.init(n)},getNodeBySubId:function(e){return this.navlist.getNodeBySubId(e)},getSubIdByNode:function(e){return this.navlist.getSubIdByNode(e)},getContextByNode:function(e){return this.navlist.getContextByNode(e)},expand:function(e,t,i){this.navlist.expandKey(e,t,!0,!0,i)},collapse:function(e,t,i){this.navlist.collapseKey(e,t,!0,i)},getExpanded:function(){return this.navlist.getExpanded()},_validateOptionsForIconsOnlyAndHorizontalList:function(e,t,i){if(e!==this.navlist.OPTION_DRILL_MODE_NONE){if(t===this.navlist.OPTION_DISPLAY_ICONS)throw new Error("Icon only navigation list should have drillMode set to 'none'.");if(i===this.navlist.OPTION_EDGE_TOP)throw new Error("Horizontal navigation list should have drillMode set to 'none'.")}},_validateOptionValues:function(e,t){var i=!0;if(e===this.navlist.OPTION_DRILL_MODE?i=t===this.navlist.OPTION_DRILL_MODE_NONE||t===this.navlist.OPTION_DRILL_MODE_COLLAPSIBLE||t===this.navlist.OPTION_DRILL_MODE_SLIDING:e===this.navlist.OPTION_DISPLAY?i=t===this.navlist.OPTION_DISPLAY_ALL||t===this.navlist.OPTION_DISPLAY_ICONS:e===this.navlist.OPTION_EDGE&&(i=this.element[0].tagName.toLowerCase()===this.navlist.TAG_NAME_TAB_BAR?t===this.navlist.OPTION_EDGE_TOP||t===this.navlist.OPTION_EDGE_START||t===this.navlist.OPTION_EDGE_END||t===this.navlist.OPTION_EDGE_BOTTOM:t===this.navlist.OPTION_EDGE_TOP||t===this.navlist.OPTION_EDGE_START),!i)throw new Error("Invalid value: "+t+" for key: "+e)},_setOption:function(e,t){var i,n;switch(this._validateOptionValues(e,t),e){case this.navlist.OPTION_DRILL_MODE:this._validateOptionsForIconsOnlyAndHorizontalList(t,this.options[this.navlist.OPTION_DISPLAY],this.options[this.navlist.OPTION_EDGE]);break;case this.navlist.OPTION_DISPLAY:this._validateOptionsForIconsOnlyAndHorizontalList(this.options[this.navlist.OPTION_DRILL_MODE],t,this.options[this.navlist.OPTION_EDGE]);break;case this.navlist.OPTION_EDGE:this._validateOptionsForIconsOnlyAndHorizontalList(this.options[this.navlist.OPTION_DRILL_MODE],this.options[this.navlist.OPTION_DISPLAY],t);break;case this.navlist.OPTION_SELECTION:case this.navlist.OPTION_CURRENT_ITEM:n=this.navlist.getItems([t])[0],i={_context:{extraData:{item:this._IsCustomElement()?n:$(n)}}}}return i?this._super(e,t,i):this._super(e,t)},_setOptions:function(e,t){for(var i=this.navlist.setOptions(e,t),n={},o=Object.keys(e),s=0;s<o.length;s++){var r=o[s];i.skipOptions.indexOf(r)<0&&(n[r]=e[r])}return this._super(n,t),i.needRefresh&&this.navlist.refresh(),this},_NotifyAttached:function(){this.navlist.notifyAttached()},_NotifyDetached:function(){this.navlist.notifyDetached()},_NotifyShown:function(){this.navlist.notifyShown()},_VerifyConnectedForSetup:function(){return!0},refresh:function(){this._super(),this.navlist.refresh()},whenReady:function(){return this.navlist.whenReady()},_SetupResources:function(){this._super(),this.navlist.setupResources()},_ReleaseResources:function(){this._super(),this.navlist.releaseResources()},_destroy:function(){this.navlist.destroy(),this._super()},_CompareOptionValues:function(e,t,i){switch(e){case"currentItem":case"selection":return n.Object.compareValues(t,i);default:return this._super(e,t,i)}}}),w.setDefaultOptions({ojNavigationList:{hierarchyMenuDisplayThresholdLevel:w.createDynamicPropertyGetter(function(){return(_.parseJSONFromFontFamily("oj-navigationlist-option-defaults")||{}).hierarchyMenuDisplayThresholdLevel})}}),li.extension._WIDGET_NAME="ojNavigationList",li.extension._ALIASED_PROPS={hierarchyMenuThreshold:"hierarchyMenuDisplayThresholdLevel"},n.CustomElementBridge.register("oj-navigation-list",{metadata:li}),ui.extension._WIDGET_NAME="ojNavigationList",n.CustomElementBridge.register("oj-tab-bar",{metadata:ui});var hi={properties:{context:{type:"object"},expanded:{type:"boolean",writeback:!0},translations:{type:"object",value:{},properties:{accessibleLevelDescription:{type:"string"},accessibleRowCollapsed:{type:"string"},accessibleRowDescription:{type:"string"},accessibleRowExpanded:{type:"string"},accessibleStateCollapsed:{type:"string"},accessibleStateExpanded:{type:"string"}}}},methods:{refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojExpand:{},ojCollapse:{}},extension:{}};n.EmptyNodeSet=function(e,t){this.m_parent=e,this.m_start=t},n.EmptyNodeSet.prototype.getParent=function(){return this.m_parent},n.EmptyNodeSet.prototype.getStart=function(){return this.m_start},n.EmptyNodeSet.prototype.getCount=function(){return 0},n.EmptyNodeSet.prototype.getData=function(e){return null},n.EmptyNodeSet.prototype.getMetadata=function(e){return null},n.FlattenedNodeSet=function(e,t){this.m_nodeSet=e,this.m_start=t},n.FlattenedNodeSet.prototype.getParent=function(){return this.m_nodeSet.getParent()},n.FlattenedNodeSet.prototype.getStart=function(){return null!=this.m_start?this.m_start:this.m_nodeSet.getStart()},n.FlattenedNodeSet.prototype.getCount=function(){return void 0===this.m_count&&(this.m_count=this._getCount(this.m_nodeSet,0),null!=this.m_start&&(this.m_count=this.m_count-this.m_start)),this.m_count},n.FlattenedNodeSet.prototype._getCount=function(e,t){var i=t,n=e.getStart(),o=e.getCount();if(i+=o,e.getChildNodeSet)for(var s=0;s<o;s++){var r=e.getChildNodeSet(s+n);null!=r&&(i=this._getCount(r,i))}return i},n.FlattenedNodeSet.prototype.getData=function(e){return this._getDataOrMetadata(this.m_nodeSet,e,{index:this.m_nodeSet.getStart()},this._getData)},n.FlattenedNodeSet.prototype.getMetadata=function(e){return this._getDataOrMetadata(this.m_nodeSet,e,{index:this.m_nodeSet.getStart()},this._getMetadata)},n.FlattenedNodeSet.prototype._getMetadata=function(e,t){return e.getMetadata(t)},n.FlattenedNodeSet.prototype._getData=function(e,t){return e.getData(t)},n.FlattenedNodeSet.prototype._getDataOrMetadata=function(e,t,i,n){for(var o=e.getStart(),s=e.getCount(),r=0;r<s;r++){var a=i.index;if(a===t)return n.call(this,e,r+o);if(i.index=a+1,e.getChildNodeSet){var l=e.getChildNodeSet(r+o);if(null!=l){var u=this._getDataOrMetadata(l,t,i,n);if(null!=u)return u}}}return null},n.MergedNodeSet=function(e,t,i){this.m_nodeSet1=e,this.m_nodeSet2=t,this.m_mergeAt=this._findIndex(i)},n.MergedNodeSet.prototype._findIndex=function(e){for(var t=this.m_nodeSet1.getStart(),i=t+this.m_nodeSet1.getCount(),n=t;n<i;n++){if(e===this.m_nodeSet1.getMetadata(n).key)return n}return i-1},n.MergedNodeSet.prototype.getParent=function(){return this.m_nodeSet1.getParent()},n.MergedNodeSet.prototype.getStart=function(){return this.m_nodeSet1.getStart()},n.MergedNodeSet.prototype.getCount=function(){return this.m_nodeSet1.getCount()+this.m_nodeSet2.getCount()},n.MergedNodeSet.prototype.getData=function(e){var t=this._getRelativeIndex(e),i=t.set,n=t.index;return i.getData(n)},n.MergedNodeSet.prototype.getMetadata=function(e){var t=this._getRelativeIndex(e),i=t.set,n=t.index;return i.getMetadata(n)},n.MergedNodeSet.prototype._getRelativeIndex=function(e){if(e<=this.m_mergeAt)return{set:this.m_nodeSet1,index:e};var t=this.m_nodeSet2.getCount();return e>this.m_mergeAt+t?{set:this.m_nodeSet1,index:e-t}:{set:this.m_nodeSet2,index:e-this.m_mergeAt-1+this.m_nodeSet2.getStart()}},n.NodeSetWrapper=function(e,t,i,n){this.m_nodeSet=e,this.m_callback=t,this.m_range=i,this.m_collapsedKeys=n},n.NodeSetWrapper.prototype.getParent=function(){return this.m_nodeSet.getParent()},n.NodeSetWrapper.prototype.getStart=function(){return null!=this.m_range?this.m_range.start:this.m_nodeSet.getStart()},n.NodeSetWrapper.prototype.getCount=function(){var e=this.m_nodeSet.getStart(),t=this.m_nodeSet.getCount();return null!=this.m_range&&(t=Math.min(this.m_range.count,t),this.m_range.start<e&&(t=0)),t},n.NodeSetWrapper.prototype.getData=function(e){return this.m_nodeSet.getData(this._getRelativeIndex(e))},n.NodeSetWrapper.prototype.getMetadata=function(e){var t=this.m_nodeSet.getMetadata(this._getRelativeIndex(e));t.index=e,t.parentKey=this.getParent();var i=t.key;return this.m_callback.call(null,i,t),t},n.NodeSetWrapper.prototype.getChildNodeSet=function(e){if((null==this.m_collapsedKeys||-1===this.m_collapsedKeys.indexOf(this.m_nodeSet.getMetadata(e).key))&&this.m_nodeSet.getChildNodeSet){var t=this.m_nodeSet.getChildNodeSet(e);if(null!=t)return new n.NodeSetWrapper(t,this.m_callback,null,this.m_collapsedKeys)}return null},n.NodeSetWrapper.prototype._getRelativeIndex=function(e){return null==this.m_range?e:e-this.m_range.start+this.m_nodeSet.getStart()},n.FlattenedTreeDataSource=function(e,t){this.m_wrapped=e,this.m_options=t||{},n.FlattenedTreeDataSource.superclass.constructor.call(this)},n.Object.createSubclass(n.FlattenedTreeDataSource,n.DataSource,"oj.FlattenedTreeDataSource"),n.FlattenedTreeDataSource.prototype.Init=function(){n.FlattenedTreeDataSource.superclass.Init.call(this),this.m_wrapped.on("change",this._handleModelEvent.bind(this)),this.m_busy=!1,this.m_fetchSize=parseInt(this.m_options.fetchSize,10),isNaN(this.m_fetchSize)&&(this.m_fetchSize=25),this.m_maxCount=parseInt(this.m_options.maxCount,10),isNaN(this.m_maxCount)&&(this.m_maxCount=500);var e=this.m_options.expanded;Array.isArray(e)?this.m_expandedKeys=e:("all"===e&&(this.m_collapsedKeys=[]),this.m_expandedKeys=[]),this.m_cache=[]},n.FlattenedTreeDataSource.prototype.handleEvent=function(e,t){return n.FlattenedTreeDataSource.superclass.handleEvent.call(this,e,t)},n.FlattenedTreeDataSource.prototype.Destroy=function(){delete this.m_cache,delete this.m_expandedKeys,delete this.m_collapsedKeys,this.m_queue&&delete this.m_queue,this.m_wrapped.off("change"),this.m_wrapped.Destroy&&this.m_wrapped.Destroy()},n.FlattenedTreeDataSource.prototype.getFetchSize=function(){return this.m_fetchSize},n.FlattenedTreeDataSource.prototype.getMaxCount=function(){return this.m_maxCount},n.FlattenedTreeDataSource.prototype.getExpandedKeys=function(){return this.m_expandedKeys},n.FlattenedTreeDataSource.prototype.getOption=function(e){return null!=this.m_options?this.m_options[e]:null},n.FlattenedTreeDataSource.prototype.getWrappedDataSource=function(){return this.m_wrapped},n.FlattenedTreeDataSource.prototype._getFetchSizeToUse=function(e){var t=this.getFetchSize(),i=this.getMaxCount();return-1===t?-1===e?i:e:-1===e?Math.min(t,i):t},n.FlattenedTreeDataSource.prototype.fetchRows=function(e,t){this.m_busy=!0,this._isExpandAll()?this._fetchRowsFromDescendants(e,t):this._fetchRowsFromChildren(e,t)},n.FlattenedTreeDataSource.prototype._fetchRowsFromChildren=function(e,t){var i;if(e.start>this._getLastIndex()){var o=this._getMaxFetchSize();if(this._getLastIndex()<0)return(i={}).start=e.start,i.count=Math.min(o,e.count),void this.m_wrapped.fetchChildren(null,i,{success:function(n){this._handleFetchSuccess(n,null,0,e,i,0,t)}.bind(this),error:function(e){this._handleFetchError(e,t)}.bind(this)});if(o>0){var s=this._getLastEntry(),r=s.parent,a=this.m_wrapped.getChildCount(r),l=s.index,u=s.depth;if(-1===a||l<a-1){var d=this._getFetchSizeToUse(a);(i={}).start=l+1,i.count=-1===a?Math.min(d,e.count):Math.min(o,Math.min(Math.min(d,e.count),a-i.start)),this.m_wrapped.fetchChildren(r,i,{success:function(n){this._handleFetchSuccess(n,r,u,e,i,a,t)}.bind(this),error:function(e){this._handleFetchError(e,t)}.bind(this)})}else{var h=s.key,c=this.m_wrapped.getChildCount(h);if(!(this._isExpanded(h)&&(-1===c||c>0)?this._fetchFromAncestors(s,u+1,e,t,o):this._fetchFromAncestors(r,u,e,t,o))){var p=new n.EmptyNodeSet(null,e.start);null!=t&&null!=t.success&&t.success.call(null,p),this.m_busy=!1}}return}}this.handleMaxCountReached(e,t),this.m_busy=!1},n.FlattenedTreeDataSource.prototype.moveOK=function(e,t,i){return this.m_wrapped.moveOK(e,t,i)},n.FlattenedTreeDataSource.prototype.move=function(e,t,i,n){this.m_wrapped.move(e,t,i,n)},n.FlattenedTreeDataSource.prototype._getMaxFetchSize=function(){return this.getMaxCount()-(this._getLastIndex()+1)},n.FlattenedTreeDataSource.prototype._handleFetchError=function(e,t){null!=t&&null!=t.error&&t.error.call(null,e),this.m_busy=!1},n.FlattenedTreeDataSource.prototype._handleFetchSuccess=function(e,t,i,o,s,r,a,l){var u=[];this._processNodeSet(e,t,i,u);var d={start:o.start,count:e.getCount()};if(e=new n.NodeSetWrapper(e,this.insertMetadata.bind(this),d),0!==u.length){var h=[];h.push(u);var c={};c.callbacks={success:function(e){this._verifyFetchResults(e,t,i,o,s,r,a,l)}.bind(this),error:function(e){this._handleFetchError(e,a)}.bind(this)},c.nodeSet=e,c.keys=[],this._syncExpandRows(h,c)}else this._verifyFetchResults(e,t,i,o,s,r,a,l)},n.FlattenedTreeDataSource.prototype._verifyFetchResults=function(e,t,i,o,s,r,a,l){var u,d;if(null!=l){var h=l.prevNodeSet;if(null!=h){var c=h.getStart()+h.getCount()-1,p=h.getMetadata(c).key;u=new n.MergedNodeSet(h,e,p)}}if(e.getCount()<o.count&&null!=t&&i>0){var _={};_.start=o.start+e.getCount(),_.count=o.count-e.getCount();var m={};m.prevNodeSet=null==u?e:u,d=this._fetchFromAncestors(t,i,_,a,void 0,m)}else if(e.getCount()>o.count){var g=e.getCount()-o.count;null!=u?(u=new n.NodeSetWrapper(u,this.insertMetadata.bind(this),{start:u.getStart(),count:u.getCount()-g}),this._removeEntry(u.getStart()+u.getCount(),g)):(e=new n.NodeSetWrapper(e,this.insertMetadata.bind(this),{start:e.getStart(),count:e.getCount()-g}),this._removeEntry(e.getStart()+e.getCount(),g))}d||null!=a&&null!=a.success&&a.success.call(null,null==u?e:u),this.m_busy=!1},n.FlattenedTreeDataSource.prototype.getChildCount=function(e){return this.m_wrapped.getChildCount(e)},n.FlattenedTreeDataSource.prototype._fetchFromAncestors=function(e,t,i,n,o,s){var r,a=!1;void 0===o&&(o=this._getMaxFetchSize()),this._isBatchFetching()&&(r={queueOnly:!0});for(var l,u,d,h=this._getFetchSizeToUse(-1),c=this._getLastIndex();c>=0;c--){var p=this._getEntry(c);if((d=p.depth)<t){e=p.parent,l=this.m_wrapped.getChildCount(e);var _=p.index,m=-1===l;if(m||_<l-1){if((u={}).start=_+1,m?(u.count=Math.min(o,Math.max(0,h)),r=void 0):u.count=Math.min(o,Math.min(h,l-u.start)),0===u.count)break;this.m_wrapped.fetchChildren(e,u,{success:function(e,t,o,r,a){this._handleFetchSuccess(a,e,t,i,o,r,n,s)}.bind(this,e,d,u,l),error:function(e){this._handleFetchError(e,n)}.bind(this)},r),a=!0;break}t-=1}}return null!=r&&(this.m_wrapped.fetchChildren(e,{start:i.count,count:0},{success:function(t){this._handleFetchSuccess(t,e,d,i,u,l,n,s)}.bind(this),error:function(e){this._handleFetchError(e,n)}.bind(this)}),a=!0),a},n.FlattenedTreeDataSource.prototype._processNodeSet=function(e,t,i,n){for(var o=e.getStart(),s=e.getCount(),r=0;r<s;r++){var a=e.getMetadata(o+r).key;this._addEntry(a,i,o+r,t),this._isExpanded(a)&&n.push(a)}},n.FlattenedTreeDataSource.prototype.insertMetadata=function(e,t){this._isExpanded(e)&&!t.leaf?t.state="expanded":t.leaf?t.state="leaf":t.state="collapsed"},n.FlattenedTreeDataSource.prototype._fetchRowsFromDescendants=function(e,t){var i={maxCount:this.getMaxCount()};this._getLastIndex()>=0&&(i.start=this._getEntry(this._getLastIndex()).key),this.m_wrapped.fetchDescendants(null,{success:function(i){this._handleFetchDescendantsSuccess(i,e,t)}.bind(this),error:function(e){this._handleFetchError(e,t)}.bind(this)},i)},n.FlattenedTreeDataSource.prototype.getSortCriteria=function(){return this.m_wrapped.getSortCriteria()},n.FlattenedTreeDataSource.prototype._handleFetchDescendantsSuccess=function(e,t,i){var o,s,r=e;if(t.start>this._getLastIndex()){var a=this._getMaxFetchSize(),l=Math.min(a,t.count);if(r=new n.NodeSetWrapper(r,this.insertMetadata.bind(this),null,this.m_collapsedKeys),this._getLastIndex()>=0){var u=this._getLastEntry();o={index:0,found:!1,count:0},this._processDescendantsNodeSet(r,null,0,u,l,o),s=o.index+1}else o={count:0},this._processDescendantsNodeSet(r,null,0,null,l,o),s=0;null!=i&&null!=i.success&&(r=null!=o?0===o.count?new n.EmptyNodeSet(null,t.start):new n.FlattenedNodeSet(r,s):new n.FlattenedNodeSet(r),i.success.call(null,r))}else this.handleMaxCountReached(t,i);this.m_busy=!1,this._processQueue()},n.FlattenedTreeDataSource.prototype._processDescendantsNodeSet=function(e,t,i,n,o,s){for(var r=e.getStart(),a=e.getCount(),l=0;l<a;l++){if(s.count===o)return;var u=e.getMetadata(r+l),d=u.key;if(s.checkDepth&&n.depth===i&&(s.found=!0,s.checkDepth=!1),(null==n||s.found)&&(this._addEntry(d,i,r+l,t),s.count+=1,u.leaf?u.state="leaf":u.state="expanded"),null==n||s.found||(d===n.key?u.leaf||this._isExpanded(d)?s.found=!0:s.checkDepth=!0:s.index+=1),e.getChildNodeSet&&this._isExpanded(d)){var h=e.getChildNodeSet(l);null!=h&&this._processDescendantsNodeSet(h,d,i+1,n,o,s)}}},n.FlattenedTreeDataSource.prototype.expand=function(e){this._expand(e)},n.FlattenedTreeDataSource.prototype._expand=function(e,t){this.m_busy=!0;var i=this.m_wrapped.getChildCount(e),o=this._getFetchSizeToUse(i),s=this.getMaxCount();if(this._getLastIndex()+1===s&&this.getIndex(e)===s-1)return void this.handleExpandSuccess(e,new n.EmptyNodeSet(e,0),0,t);0!==o?this.m_wrapped.fetchChildren(e,{start:0,count:o},{success:function(n){this.handleExpandSuccess(e,n,i,t)}.bind(this),error:function(t){this.handleExpandError(e,t)}.bind(this)}):this.handleExpandSuccess(e,new n.EmptyNodeSet(e,0),0,t)},n.FlattenedTreeDataSource.prototype._processQueue=function(){if(this.m_queue&&this.m_queue.length>0){for(var e=this.m_queue.length-1;e>=0;e--){var t=this.m_queue[e];this.collapse(t.key)}this.m_queue.length=0}},n.FlattenedTreeDataSource.prototype._queueOp=function(e,t){null==this.m_queue&&(this.m_queue=[]),this.m_queue.push({op:e,key:t})},n.FlattenedTreeDataSource.prototype.collapse=function(e){if(this.m_busy)this._queueOp("collapse",e);else{var t=this.getIndex(e)+1,i=this._getEntry(t-1);if(null!=i){for(var n=0,o=i.depth,s=this._getLastIndex(),r=t;r<s+1;r++){var a=this._getEntry(r).depth;if(a>o)n+=1;else if(a===o)break}if(0!==n){this._isExpandAll()?this.m_collapsedKeys.push(e):this._removeExpanded(e);for(var l=[],u=0;u<n;u++)l.push({key:this._getEntry(t+u).key,index:t+u});this._removeEntry(t,n),this.removeRows(l),this.handleEvent("collapse",{rowKey:e})}else this.handleEvent("collapse",{rowKey:e})}}},n.FlattenedTreeDataSource.prototype._isExpanded=function(e){return this._isExpandAll()?!(this.m_collapsedKeys&&this.m_collapsedKeys.length>0)||-1===this._getCollapsedKeyIndex(e):!!(this.m_expandedKeys&&this.m_expandedKeys.length>0)&&this._getExpandedKeyIndex(e)>-1},n.FlattenedTreeDataSource.prototype._getCollapsedKeyIndex=function(e){return this._getKeyIndex(this.m_collapsedKeys,e)},n.FlattenedTreeDataSource.prototype._getExpandedKeyIndex=function(e){return this._getKeyIndex(this.m_expandedKeys,e)},n.FlattenedTreeDataSource.prototype._getKeyIndex=function(e,t){for(var i=-1,n=0;n<e.length;n++)e[n]===t&&(i=n);return i},n.FlattenedTreeDataSource.prototype._removeExpanded=function(e){var t=this._getExpandedKeyIndex(e);t>-1&&this.m_expandedKeys.splice(t,1)},n.FlattenedTreeDataSource.prototype._removeCollapsed=function(e){var t=this._getCollapsedKeyIndex(e);t>-1&&this.m_collapsedKeys.splice(t,1)},n.FlattenedTreeDataSource.prototype.handleExpandError=function(e,t){this.handleEvent("expand",{rowKey:e})},n.FlattenedTreeDataSource.prototype.handleExpandSuccess=function(e,t,i,o){var s,r;t=new n.NodeSetWrapper(t,this.insertMetadata.bind(this));for(var a=this.getIndex(e)+1,l=a,u=t.getStart(),d=t.getCount(),h=this._getEntry(a-1),c=h.depth+1,p=[],_=u;_<d;_++){var m=t.getMetadata(_),g=m.key;this._isExpanded(g)&&p.push(g),this._insertRow(a,m,h.key,_,c),a+=1}if(this._isExpandAll()?this._removeCollapsed(e):-1===this.m_expandedKeys.indexOf(e)&&this.m_expandedKeys.push(e),null!=o&&(s=o.queue,r=o.prevNodeSetInfo),null!=r&&(t=new n.MergedNodeSet(r.nodeSet,t,e)),0===p.length&&(void 0===s||0===s.length)){if(null!=r){var f=r.callbacks;if(null!=f)return f.success.call(null,t),void(this.m_busy=!1);this.insertRows(r.firstIndex,r.firstKey,t)}else this.insertRows(l,e,t);var v=this.getMaxCount();if(-1===i&&d===this.getFetchSize()||i>d||a===v?this._deleteAllRowsBelow(a):this._getLastIndex()>=v&&this._deleteAllRowsBelow(v),null!=r)for(var y=0;y<r.keys.length;y++)this.handleEvent("expand",{rowKey:r.keys[y]});this.m_busy=!1,this.handleEvent("expand",{rowKey:e})}else void 0===s&&(s=[]),p.length>0&&s.push(p),void 0===r&&((r={}).firstIndex=l,r.firstKey=e,r.keys=[]),r.nodeSet=t,r.keys.push(e),this._syncExpandRows(s,r);this.m_busy=!1,s&&0===s.length&&this._processQueue()},n.FlattenedTreeDataSource.prototype._syncExpandRows=function(e,t){var i=e[e.length-1],n=i.shift();0===i.length&&e.pop(),this._expand(n,{prevNodeSetInfo:t,queue:e})},n.FlattenedTreeDataSource.prototype._expandRows=function(e){var t;this._isBatchFetching()&&(t={queueOnly:!0});for(var i=0;i<e.length;i++)i===e.length-1?this._expand(e[i]):this._expand(e[i],t)},n.FlattenedTreeDataSource.prototype._insertRow=function(e,t,i,n,o){var s=t.key;e<=this._getLastIndex()?this._addEntry(s,o,n,i,e):this._addEntry(s,o,n,i)},n.FlattenedTreeDataSource.prototype._deleteAllRowsBelow=function(e,t){var i=t;null==t&&(i=this._getLastIndex()+1-e);for(var n=[],o=0;o<i;o++)n.push({key:this._getEntry(e+o).key,index:e+o});this._removeEntry(e,i),this.removeRows(n)},n.FlattenedTreeDataSource.prototype._handleModelEvent=function(e){var t,i=e.operation,n=e.parent;t=Array.isArray(n)?n[n.length-1]:n;var o=e.index;"insert"===i?this._handleInsertEvent(t,o,e.data):"delete"===i?this._handleDeleteEvent(t,o):"refresh"===i&&this._handleRefreshEvent(t)},n.FlattenedTreeDataSource.prototype._handleInsertEvent=function(e,t,i){var n=this.getIndex(e),o=this._getEntry(n).depth+1,s=n+t+1,r=i.getMetadata(i.getStart());this._insertRow(s,r,e,t,o)},n.FlattenedTreeDataSource.prototype._handleDeleteEvent=function(e,t){var i=this.getIndex(e),o=this._getEntry(i),s=i+t,r=this._getEntry(s);n.Assert.assert(r.parent===o&&r.depth===o.depth+1);for(var a=s+1,l=this._getLastIndex();a<=l;){if(this._getEntry(a).depth!==r.depth)break;a+=1}this._deleteAllRowsBelow(s,1)},n.FlattenedTreeDataSource.prototype._handleRefreshEvent=function(e){null==e&&this.refresh()},n.FlattenedTreeDataSource.prototype._isExpandAll=function(){var e=this.m_wrapped.getCapability("fetchDescendants");return null!=this.m_collapsedKeys&&null!=e&&"disable"!==e},n.FlattenedTreeDataSource.prototype._isBatchFetching=function(){return"enable"===this.m_wrapped.getCapability("batchFetch")},n.FlattenedTreeDataSource.prototype.refresh=function(){this._clearAll()},n.FlattenedTreeDataSource.prototype.getIndex=function(e){for(var t=this._getLastIndex(),i=0;i<=t;i++){if(this._getEntry(i).key===e)return i}return-1},n.FlattenedTreeDataSource.prototype.getKey=function(e){return e<0||e>this._getLastIndex()?null:this._getEntry(e).key},n.FlattenedTreeDataSource.prototype.getFetchedRange=function(){return{start:0,end:this._getLastIndex()+1}},n.FlattenedTreeDataSource.prototype.getAncestors=function(e){for(var t=[],i=this.getIndex(e),n=this._getParent(i);null!=n;)t.push(n),i=this.getIndex(n),n=this._getParent(i);return t.reverse()},n.FlattenedTreeDataSource.prototype.handleMaxCountReached=function(e,t){null!=t&&null!=t.error&&t.error.call(null)},n.FlattenedTreeDataSource.prototype.insertRows=function(e,t,i){n.Assert.failedInAbstractFunction()},n.FlattenedTreeDataSource.prototype.removeRows=function(e){n.Assert.failedInAbstractFunction()},n.FlattenedTreeDataSource.prototype._getLastIndex=function(){return this.m_cache.length-1},n.FlattenedTreeDataSource.prototype._getLastEntry=function(){return this.m_cache[this._getLastIndex()]},n.FlattenedTreeDataSource.prototype._getEntry=function(e){return this.m_cache[e]},n.FlattenedTreeDataSource.prototype._getParent=function(e){var t=this.m_cache[e];return null!=t?t.parent:null},n.FlattenedTreeDataSource.prototype._addEntry=function(e,t,i,n,o){var s={};s.key=e,s.depth=t,s.index=i,s.parent=n,void 0===o?this.m_cache.push(s):this.m_cache.splice(o,0,s)},n.FlattenedTreeDataSource.prototype._removeEntry=function(e,t){this.m_cache.splice(e,t)},n.FlattenedTreeDataSource.prototype._clearAll=function(){this.m_cache.length=0},n.FlattenedTreeDataSource.prototype.getCapability=function(e){return this.m_wrapped.getCapability(e)},n.__registerWidget("oj.ojRowExpander",$.oj.baseComponent,{version:"1.0.0",widgetEventPrefix:"oj",options:{context:null,expanded:null,expand:null,collapse:null},classNames:{root:"oj-rowexpander",icon:"oj-component-icon",clickable:"oj-clickable-icon-nocontext",expand:"oj-rowexpander-expand-icon",collapse:"oj-rowexpander-collapse-icon",leaf:"oj-rowexpander-leaf-icon",lazyload:"oj-rowexpander-lazyload-icon",toucharea:"oj-rowexpander-touch-area",indent:"oj-rowexpander-indent",iconspacer:"oj-rowexpander-icon-spacer",depth0:"oj-rowexpander-depth-0",depth1:"oj-rowexpander-depth-1",depth2:"oj-rowexpander-depth-2",depth3:"oj-rowexpander-depth-3",depth4:"oj-rowexpander-depth-4",depth5:"oj-rowexpander-depth-5",depth6:"oj-rowexpander-depth-6",depth7:"oj-rowexpander-depth-7"},constants:{MAX_STYLE_DEPTH:7,NUM5_KEY:53},_ComponentCreate:function(){this._super(),this.element.addClass(this.classNames.root),this._initContent()},_initContent:function(){var e=this,t=this.options.context;if(null!=t.component)this.component="function"==typeof t.component?t.component("instance"):t.component;else if(t.componentElement){var i=t.componentElement;i=$(i).hasClass("oj-component-initnode")?i:$(i).find(".oj-component-initnode")[0],this.component=w.__GetWidgetConstructor(i)("instance")}this.datasource=t.datasource,this.depth=t.depth,this.iconState=t.state,this.rowKey=t.key,this.index=t.index,this.parentKey=t.parentKey,this._addIndentation(),this._addIcon(),this._setIconStateClass(),"expanded"===this.iconState||"collapsed"===this.iconState?($(this.toucharea).on("touchend",function(t){t.preventDefault(),e._fireExpandCollapse()}),$(this.toucharea).on("click",function(t){t.preventDefault(),e._fireExpandCollapse()}),$(this.element).on("keypress",function(t){var i=t.keyCode||t.which;i!==$.ui.keyCode.ENTER&&i!==$.ui.keyCode.SPACE||(e._fireExpandCollapse(),t.preventDefault(),t.target.focus())}),this.handleKeyDownCallback=this._handleKeyDownEvent.bind(this),this.component.element.get(0).addEventListener("keydown",this.handleKeyDownCallback,!0),this.handleExpandCallback=this._handleExpandEvent.bind(this),this.handleCollapseCallback=this._handleCollapseEvent.bind(this),this.datasource.on("expand",this.handleExpandCallback,this),this.datasource.on("collapse",this.handleCollapseCallback,this),this._initExpanded()):"leaf"===this.iconState&&(this.handleKeyDownCallback=this._handleKeyDownEvent.bind(this),this.component.element.get(0).addEventListener("keydown",this.handleKeyDownCallback,!0),$(this.icon).attr("tabindex",-1)),this.handleActiveKeyChangeCallback=this._handleActiveKeyChangeEvent.bind(this),this.component._IsCustomElement()?$(this.component.element).on("ojBeforeCurrentCell",this.handleActiveKeyChangeCallback):$(this.component.element).on("ojbeforecurrentcell",this.handleActiveKeyChangeCallback)},_initExpanded:function(){var e=this.options.expanded;null!=e?e&&"collapsed"===this.iconState?this._expand():e||"expanded"!==this.iconState||this._collapse():this.options.expanded="collapsed"!==this.iconState},refresh:function(){this.element.empty(),this._initContent()},_destroy:function(){this.component.element.get(0).removeEventListener("ojkeydown",this.handleKeyDownCallback,!0),$(this.component.element).off("ojbeforecurrentcell",this.handleActiveKeyChangeCallback),this.datasource.off("expand",this.handleExpandCallback,this),this.datasource.off("collapse",this.handleCollapseCallback,this),this.element.removeClass(this.classNames.root),this.element.empty()},_expand:function(){return"collapsed"===this.iconState&&(this._loading(),this.datasource.expand(this.rowKey),!0)},_collapse:function(){return"expanded"===this.iconState&&(this._loading(),this.datasource.collapse(this.rowKey),!0)},_setOption:function(e,t,i){"expanded"!==e||null!=i._context&&!0===i._context.internalSet?(this._super(e,t,i),"context"===e&&null!=i._context&&!0!==i._context.internalSet&&this.refresh()):t?this._expand():this._collapse()},_addIndentation:function(){var e=this.depth-1;if(e<this.constants.MAX_STYLE_DEPTH)this._appendSpacer(e);else{for(var t=1;t<=e/this.constants.MAX_STYLE_DEPTH;t++)this._appendSpacer(this.constants.MAX_STYLE_DEPTH);var i=e%this.constants.MAX_STYLE_DEPTH;i<this.constants.MAX_STYLE_DEPTH&&this._appendSpacer(i)}},_appendSpacer:function(e){var t=$(document.createElement("span")).addClass(this.classNames.indent).addClass(this.classNames["depth"+e]);this.element.append(t)},_addIcon:function(){var e=$(document.createElement("div")).addClass(this.classNames.iconspacer);this.toucharea=$(document.createElement("div")).addClass(this.classNames.toucharea),this.icon=$(document.createElement("a")).attr("href","#").attr("aria-labelledby",this._getLabelledBy()).addClass(this.classNames.icon).addClass(this.classNames.clickable).attr("aria-label",this.getTranslatedString("accessibleLevelDescription",{level:this.depth})),this.element.append(e.append(this.toucharea.append(this.icon)));this._focusable({element:this.icon,applyHighlight:!0})},_addIconClass:function(e){this.icon.addClass(this.classNames[e])},_removeIconClass:function(e){this.icon.removeClass(this.classNames[e])},_setIconStateClass:function(){switch(this.iconState){case"leaf":this._removeIconClass("icon"),this._removeIconClass("clickable"),this._addIconClass("leaf");break;case"collapsed":this._addIconClass("expand"),this._ariaExpanded(!1);break;case"expanded":this._addIconClass("collapse"),this._ariaExpanded(!0);break;case"loading":this._removeIconClass("clickable"),this._addIconClass("lazyload")}},_removeIconStateClass:function(){switch(this.iconState){case"leaf":this._removeIconClass("leaf"),this._addIconClass("icon"),this._addIconClass("clickable");break;case"collapsed":this._removeIconClass("expand");break;case"expanded":this._removeIconClass("collapse");break;case"loading":this._removeIconClass("lazyload"),this._addIconClass("clickable")}},_handleActiveKeyChangeEvent:function(e,t){var i;if(null==t&&(t=e.detail),null!=t.currentCell){var n="cell"===t.currentCell.type?t.currentCell.keys.row:t.currentCell.key;if(null!=t.previousValue&&(i="cell"===t.previousCurrentCell.type?t.previousCurrentCell.keys.row:t.previousCurrentCell.key),this.rowKey===n&&i!==n&&this.component._setAccessibleContext){var o,s=this.getTranslatedString("accessibleRowDescription",{level:this.depth,num:this.index+1,total:this.datasource.getWrappedDataSource().getChildCount(this.parentKey)});o="collapsed"===this.iconState?this.getTranslatedString("accessibleStateCollapsed"):"expanded"===this.iconState?this.getTranslatedString("accessibleStateExpanded"):"",this.component._setAccessibleContext({context:s,state:o})}}},_handleKeyDownEvent:function(e){var t=w.__GetWidgetConstructor(this.component.element.get(0))("getContextByNode",e.target);if(null!=t){var i=t.key;if(null==i&&(i=t.keys.row),this.rowKey===i){var o=e.keyCode||e.which;if(n.DomUtils.isMetaKeyPressed(e))if(o===$.ui.keyCode.RIGHT)this._expand()&&e.preventDefault();else if(o===$.ui.keyCode.LEFT)this._collapse()&&e.preventDefault();else if(e.altKey&&o===this.constants.NUM5_KEY&&this.component._setAccessibleContext){var s,r=this.datasource.getAncestors(this.rowKey);if(null!=r&&r.length>0){s=[];for(var a=0;a<r.length;a++)s.push({key:r[a],label:this.getTranslatedString("accessibleLevelDescription",{level:a+1})})}var l=this.getTranslatedString("accessibleRowDescription",{level:this.depth,num:this.index+1,total:this.datasource.getWrappedDataSource().getChildCount(this.parentKey)});this.component._setAccessibleContext({context:l,state:"",ancestors:s})}}}},_loading:function(){this._removeIconStateClass(),this.iconState="loading",this._setIconStateClass()},_handleExpandEvent:function(e){var t=e.rowKey;if(t===this.rowKey){this._removeIconStateClass(),this.iconState="expanded",this._setIconStateClass(),this._ariaExpanded(!0),this._updateContextState("expanded");var i=this.options.expanded;(null==i||null!=i&&!i)&&(this._trigger("expand",null,{rowKey:t}),this._updateExpandedState(!0))}},_handleCollapseEvent:function(e){var t=e.rowKey;if(t===this.rowKey){this._removeIconStateClass(),this.iconState="collapsed",this._setIconStateClass(),this._ariaExpanded(!1),this._updateContextState("collapsed");var i=this.options.expanded;(null==i||null!=i&&i)&&(this._trigger("collapse",null,{rowKey:t}),this._updateExpandedState(!1))}},_updateExpandedState:function(e){this.option("expanded",e,{changed:!0,_context:{internalSet:!0,writeback:!0}})},_updateContextState:function(e){var t=this.options.context;t.state=e,this.option("context",t,{changed:!0,_context:{internalSet:!0}})},_fireExpandCollapse:function(){var e=this.iconState;this._loading(),"collapsed"===e?this.datasource.expand(this.rowKey):"expanded"===e&&this.datasource.collapse(this.rowKey)},_ariaExpanded:function(e){this.icon.attr("aria-expanded",e)},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;var t=e.subId;return"oj-rowexpander-disclosure"!==t&&"oj-rowexpander-icon"!==t||null==this.icon?null:this.icon.get(0)},getSubIdByNode:function(e){return e===this.icon.get(0)?{subId:"oj-rowexpander-disclosure"}:null},_NotifyAttached:function(){this._super(),this.icon.attr("aria-labelledby",this._getLabelledBy())},_getLabelledBy:function(){return this.element.parent().closest("[id]").attr("id")}}),hi.extension._WIDGET_NAME="ojRowExpander",n.CustomElementBridge.register("oj-row-expander",{metadata:hi}),n._TouchProxy=function(e){this._init(e)},n._TouchProxy.prototype._init=function(e){this._elem=e,this._touchHandled=!1,this._touchMoved=!1,this._touchStartHandler=$.proxy(this._touchStart,this),this._touchEndHandler=$.proxy(this._touchEnd,this),this._touchMoveHandler=$.proxy(this._touchMove,this),this._elem.on({touchstart:this._touchStartHandler,touchend:this._touchEndHandler,touchmove:this._touchMoveHandler,touchcancel:this._touchEndHandler})},n._TouchProxy.prototype._destroy=function(){this._elem&&this._touchStartHandler&&(this._elem.off({touchstart:this._touchStartHandler,touchmove:this._touchMoveHandler,touchend:this._touchEndHandler,touchcancel:this._touchEndHandler}),this._touchStartHandler=void 0,this._touchEndHandler=void 0,this._touchMoveHandler=void 0)},n._TouchProxy.prototype._touchHandler=function(e,t){if(!(e.originalEvent.touches.length>1)){"touchstart"!==e.type&&"touchend"!==e.type&&e.preventDefault();var i=e.originalEvent.changedTouches[0],n=document.createEvent("MouseEvent");n.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),i.target.dispatchEvent(n)}},n._TouchProxy.prototype._touchStart=function(e){this._touchHandled||(this._touchHandled=!0,this._touchMoved=!1,this._touchHandler(e,"mouseover"),this._touchHandler(e,"mousemove"),this._touchHandler(e,"mousedown"))},n._TouchProxy.prototype._touchMove=function(e){this._touchHandled&&(this._touchMoved=!0,this._touchHandler(e,"mousemove"))},n._TouchProxy.prototype._touchEnd=function(e){this._touchHandled&&(this._touchHandler(e,"mouseup"),this._touchHandler(e,"mouseout"),this._touchMoved||"touchend"!==e.type||this._touchHandler(e,"click"),this._touchHandled=!1)},n._TouchProxy._TOUCH_PROXY_KEY="_ojTouchProxy",n._TouchProxy.prototype.touchMoved=function(){return this._touchMoved},n._TouchProxy.addTouchListeners=function(e){var t=$(e),i=t.data(n._TouchProxy._TOUCH_PROXY_KEY);return i||(i=new n._TouchProxy(t),t.data(n._TouchProxy._TOUCH_PROXY_KEY,i)),i},n._TouchProxy.removeTouchListeners=function(e){var t=$(e),i=t.data(n._TouchProxy._TOUCH_PROXY_KEY);i&&(i._destroy(),t.removeData(n._TouchProxy._TOUCH_PROXY_KEY))},n.Composite={};var ci=n.Composite;n.Composite.getMetadata=function(e){var t=n.Composite.getComponentMetadata(e);return t?Promise.resolve(t):null},n.Composite.getComponentMetadata=function(e){var t=n.BaseCustomElementBridge.getRegistered(e);return t&&t.composite?n.BaseCustomElementBridge.__GetDescriptor(e)[n.BaseCustomElementBridge.DESC_KEY_META]:null},n.Composite.register=function(e,t){n.CompositeElementBridge.register(e,t)},n.Composite.getContainingComposite=function(e,t){for(var i=null,o=e;o;)if((o=n.CompositeTemplateRenderer.getEnclosingComposite(o))&&"oj-module"!==o.nodeName.toLowerCase()){if(t&&!(16&e.compareDocumentPosition(t)))break;i=o}return i},n.Composite.getBindingProviderName=function(e){return e?e[n.Composite.__BINDING_PROVIDER]:null},n.Composite.__COMPOSITE_PROP="__oj_composite",n.Composite.__BINDING_PROVIDER="__oj_binding_prvdr",n.CompositeElementBridge={},n.CompositeElementBridge.proto=Object.create(n.BaseCustomElementBridge.proto),n.CollectionUtils.copyInto(n.CompositeElementBridge.proto,{beforePropertyChangedEvent:function(e,t,i){var o={property:t};n.CollectionUtils.copyInto(o,i),n.CompositeTemplateRenderer.invokeViewModelMethod(this._VIEW_MODEL,"propertyChanged",[o])},AddComponentMethods:function(e){var t=function(e,t,i,o,s,r){if(!t.SaveEarlyPropertySet(i,o)){var a=t.SetProperty(e,i,o,s,r);if(a.propertySet)if(a.isSubproperty)n.CompositeElementBridge._getPropertyTracker(t,a.property).valueHasMutated()}};e.setProperty=function(e,i){var o=n.BaseCustomElementBridge.getInstance(this);t(this,o,e,i,this,!0)},e.getProperty=function(e){return n.BaseCustomElementBridge.getInstance(this).GetProperty(this,e,this)},e._propsProto.setProperty=function(e,i){t(this._ELEMENT,this._BRIDGE,e,i,this,!1)},e._propsProto.getProperty=function(e){return this._BRIDGE.GetProperty(this,e,this)},e.getNodeBySubId=function(e){var t=n.BaseCustomElementBridge.getInstance(this),i=t._getViewModel(this);return i.getNodeBySubId?i.getNodeBySubId(e,t._getNodeBySubId.bind(this)):t._getNodeBySubId.bind(this)(e)},e.getSubIdByNode=function(e){var t=n.BaseCustomElementBridge.getInstance(this),i=t._getViewModel(this);return i.getSubIdByNode?i.getSubIdByNode(e,t._getSubIdByNode.bind(this)):t._getSubIdByNode.bind(this)(e)}},CreateComponent:function(e){for(var t={},i=n.BaseCustomElementBridge.getSlotMap(e),o=Object.keys(i),s=0;s<o.length;s++){var r=o[s];t[r]=i[r].length}this._SLOT_MAP=i;var a={element:e,props:Promise.resolve(this._PROPS),properties:this._PROPS,slotNodeCounts:Promise.resolve(t),slotCounts:t,unique:n.BaseCustomElementBridge.__GetUnique()};a.uniqueId=e.id?e.id:a.unique,this._VM_CONTEXT=a;var l=n.BaseCustomElementBridge.__GetDescriptor(e.tagName)[n.BaseCustomElementBridge.DESC_KEY_VIEW_MODEL];l="function"==typeof l?new l(a):n.CompositeTemplateRenderer.invokeViewModelMethod(l,"initialize",[a])||l,this._VIEW_MODEL=l;var u=n.CompositeTemplateRenderer.invokeViewModelMethod(l,"activated",[a])||Promise.resolve(!0),d=this;u.then(function(){var i={props:d._PROPS,slotMap:d._SLOT_MAP,slotNodeCounts:t,unique:d._VM_CONTEXT.unique,uniqueId:d._VM_CONTEXT.uniqueId,viewModel:d._VIEW_MODEL,viewModelContext:d._VM_CONTEXT};Object.defineProperty(e,n.Composite.__BINDING_PROVIDER,{value:"knockout"}),n.Components&&n.Components.unmarkPendingSubtreeHidden(e);var o=n.BaseCustomElementBridge.__GetCache(e.tagName),s=n.CompositeElementBridge._getDomNodes(o.view,e);n.CompositeTemplateRenderer.renderTemplate(i,e,s),d.__READY_TO_FIRE=!0,d.resolveDelayedReadyPromise()}).catch(function(t){d.throwError(e,t)})},DefineMethodCallback:function(e,t,i){e[t]=function(){var e=i.internalName||t,o=n.BaseCustomElementBridge.getInstance(this)._getViewModel(this);return o[e].apply(o,arguments)}},DefinePropertyCallback:function(t,i,o){var s=function(t,s){if(!this._BRIDGE.SaveEarlyPropertySet(i,t)){var r=n.CompositeElementBridge._getPropertyTracker(this._BRIDGE,i),a=r.peek();if(n.BaseCustomElementBridge.__CompareOptionValues(i,o,t,a))e.info(n.BaseCustomElementBridge.getElementInfo(this._ELEMENT)+": Ignoring property set for property '"+i+"' with same value.");else if(s&&(t=this._BRIDGE.ValidatePropertySet(this._ELEMENT,i,t)),o._eventListener&&this._BRIDGE.SetEventListenerProperty(this._ELEMENT,i,t),r(t),!o._derived){var l=s?"external":"internal";n.BaseCustomElementBridge.__FirePropertyChangeEvent(this._ELEMENT,i,t,a,l)}}},r=function(e){var t=n.CompositeElementBridge._getPropertyTracker(this._BRIDGE,i),s=e?t.peek():t();return void 0===s&&t(s=this._BRIDGE.GetDefaultValue(o)),s};o._derived||n.BaseCustomElementBridge.__DefineDynamicObjectProperty(t._propsProto,i,function(){return r.bind(this,!1)()},function(e){s.bind(this)(e,!1)}),n.BaseCustomElementBridge.__DefineDynamicObjectProperty(t,i,function(){var e=n.BaseCustomElementBridge.getInstance(this);return r.bind(e._PROPS,!0)()},function(e){var t=n.BaseCustomElementBridge.getInstance(this);s.bind(t._PROPS)(e,!0)})},GetMetadata:function(e){return e._metadata},HandleDetached:function(e){n.BaseCustomElementBridge.proto.HandleDetached.call(this,e),n.CompositeTemplateRenderer.invokeViewModelMethod(this._VIEW_MODEL,"detached",[e]),n.CompositeTemplateRenderer.invokeViewModelMethod(this._VIEW_MODEL,"disconnected",[e])},HandleReattached:function(e){n.BaseCustomElementBridge.proto.HandleReattached.call(this,e),n.CompositeTemplateRenderer.invokeViewModelMethod(this._VIEW_MODEL,"connected",[this._VM_CONTEXT])},InitializeElement:function(e){var t;n.BaseCustomElementBridge.proto.InitializeElement.call(this,e),n.Components&&n.Components.markPendingSubtreeHidden(e);var i=n.BaseCustomElementBridge.__GetCache(e.tagName);if(!i.view){var o=(t=n.BaseCustomElementBridge.__GetDescriptor(e.tagName))[n.BaseCustomElementBridge.DESC_KEY_VIEW];i.view||(i.view="string"==typeof o?n.CompositeElementBridge._getDomNodes(o,e):o)}if(!i.css){t||(t=n.BaseCustomElementBridge.__GetDescriptor(e.tagName));var s=t[n.BaseCustomElementBridge.DESC_KEY_CSS];if(s){var r=document.createElement("style");r.type="text/css",r.styleSheet?r.styleSheet.cssText=s:r.appendChild(document.createTextNode(s)),document.head.appendChild(r),i.css=!0}}n.BaseCustomElementBridge.__InitProperties(e,this._PROPS)},InitializePrototype:function(e){n.BaseCustomElementBridge.proto.InitializePrototype.call(this,e),Object.defineProperty(e,"_propsProto",{value:{}})},InitializeBridge:function(e){n.BaseCustomElementBridge.proto.InitializeBridge.call(this,e),e._propsProto&&(this._PROPS=Object.create(e._propsProto),this._PROPS._BRIDGE=this,this._PROPS._ELEMENT=e)},_getNodeBySubId:function(e){var t=n.CompositeElementBridge.__GetSubIdMap(this)[e.subId];if(t){if(t.alias){var i=n.CollectionUtils.copyInto({},e,void 0,!0);i.subId=t.alias;var o=t.node;return o.getNodeBySubId?o.getNodeBySubId(i):n.Components.__GetWidgetConstructor(o)("getNodeBySubId",i)}return t.node}return null},_getSubIdByNode:function(e){if(!this.contains(e))return null;var t,i,o,s=n.CompositeElementBridge.__GetNodeMap(this),r=n.Composite.getContainingComposite(e,this);if(null!=r){if((i=s[t=r.node.getAttribute("data-oj-subid-map")])&&r.getSubIdByNode&&(o=r.getSubIdByNode(e))){var a=i.map[o.subId];return o.subId=a,o}return null}for(var l=e;l!==this&&!(t=l.getAttribute("data-oj-subid-map")||l.getAttribute("data-oj-subid"));)l=l.parentNode;if(i=s[t]){if(!i.map)return{subId:t};var u=i.node;if(o=u.getSubIdByNode?u.getSubIdByNode(e):n.Components.__GetWidgetConstructor(u)("getSubIdByNode",e))return o.subId=i.map[o.subId],o}return null},_getViewModel:function(e){return this._VIEW_MODEL||this.throwError(e,"Cannot access methods before element is upgraded."),this._VIEW_MODEL}}),n.CompositeElementBridge.register=function(t,i){var o={};if(o[n.BaseCustomElementBridge.DESC_KEY_META]=n.CompositeElementBridge._getResource(i,n.BaseCustomElementBridge.DESC_KEY_META),o[n.BaseCustomElementBridge.DESC_KEY_VIEW]=n.CompositeElementBridge._getResource(i,n.BaseCustomElementBridge.DESC_KEY_VIEW),o[n.BaseCustomElementBridge.DESC_KEY_CSS]=n.CompositeElementBridge._getResource(i,n.BaseCustomElementBridge.DESC_KEY_CSS),o[n.BaseCustomElementBridge.DESC_KEY_VIEW_MODEL]=n.CompositeElementBridge._getResource(i,n.BaseCustomElementBridge.DESC_KEY_VIEW_MODEL),o[n.BaseCustomElementBridge.DESC_KEY_PARSE_FUN]=i[n.BaseCustomElementBridge.DESC_KEY_PARSE_FUN],n.BaseCustomElementBridge.__Register(t,o,n.CompositeElementBridge.proto,!0)){var s=o[n.BaseCustomElementBridge.DESC_KEY_META];if(s||(e.warn("Composite registered'"+t.toLowerCase()+"' without Metadata."),s={}),null==o[n.BaseCustomElementBridge.DESC_KEY_VIEW])throw new Error("Cannot register composite '"+t.toLowerCase()+"' without a View.");o._metadata=n.BaseCustomElementBridge.__ProcessEventListeners(s,!1),customElements.define(t.toLowerCase(),n.CompositeElementBridge.proto.getClass(o))}},n.CompositeElementBridge._getDomNodes=function(e,t){var i,o;if("string"==typeof e)return ln.stringToNodeArray(e);if(n.CompositeElementBridge._isDocumentFragment(e)){o=e.cloneNode(!0);var s=[];for(i=0;i<o.childNodes.length;i++)s.push(o.childNodes[i]);return s}if(Array.isArray(e)){for(o=[],i=0;i<e.length;i++)o.push(e[i].cloneNode(!0));return o}n.BaseCustomElementBridge.getInstance(t).throwError(t,"The composite View is not one of the following supported types: string, Array of DOM nodes, DocumentFragment")},n.CompositeElementBridge._generateSubIdMap=function(e,t){if(!e._SUBID_MAP){for(var i={},o={},s=t.children,r=0;r<s.length;r++)n.CompositeElementBridge._walkSubtree(i,o,s[r]);e._NODE_MAP=o,e._SUBID_MAP=i}},n.CompositeElementBridge._walkSubtree=function(e,t,i){if(!i.hasAttribute("slot")&&(n.CompositeElementBridge._addNodeToSubIdMap(e,t,i),!n.BaseCustomElementBridge.getRegistered(i.tagName)&&!n.Components.__GetWidgetConstructor(i)))for(var o=i.children,s=0;s<o.length;s++)n.CompositeElementBridge._walkSubtree(e,t,o[s])},n.CompositeElementBridge._addNodeToSubIdMap=function(e,t,i){var n=i.getAttribute("data-oj-subid"),o=i.getAttribute("data-oj-subid-map");if(o){var s=JSON.parse(o);if("object"==typeof s&&!(s instanceof Array)){for(var r=s,a={},l=Object.keys(r),u=0;u<l.length;u++){var d=l[u];e[d]={alias:r[d],node:i},a[r[d]]=d}t[o]={map:a,node:i}}}else n&&(e[n]={node:i},t[n]={node:i})},n.CompositeElementBridge.__GetSubIdMap=function(e){var t=n.BaseCustomElementBridge.getInstance(e);return n.CompositeElementBridge._generateSubIdMap(t,e),t._SUBID_MAP},n.CompositeElementBridge.__GetNodeMap=function(e){var t=n.BaseCustomElementBridge.getInstance(e);return n.CompositeElementBridge._generateSubIdMap(t,e),t._NODE_MAP},n.CompositeElementBridge._getPropertyTracker=function(e,t){return e._TRACKERS||(e._TRACKERS={}),e._TRACKERS[t]||(e._TRACKERS[t]=n.CompositeTemplateRenderer.createTracker()),e._TRACKERS[t]},n.CompositeElementBridge._getResource=function(e,t){var i=e[t];if(null!=i){var n=Object.prototype.hasOwnProperty;if(n.call(i,"inline"))return i.inline;if(n.call(i,"promise"))throw new Error("The 'promise' resource type for descriptor key '"+t+"' is no longer supported. The resource should be passed directly as the value instead.");return i}},n.CompositeElementBridge._isDocumentFragment=function(e){return window.DocumentFragment?e instanceof DocumentFragment:e&&11===e.nodeType};ci.register("oj-avatar",{view:'<div class="oj-avatar-outer" data-bind="css: !$properties.initials || $properties.src ? \'oj-avatar-\'  + $properties.size : \'oj-avatar-has-initials oj-avatar-\'+ $properties.size"aria-hidden="true">  <div class="oj-avatar-inner">    \x3c!-- ko if: $properties.src --\x3e    <div class="oj-avatar-background-image"         data-bind="style:{\'background-image\':\'url(\' + $properties.src + \')\'}">      <div class="oj-avatar-initials" data-bind="text: $properties.initials"></div>    </div>    \x3c!-- /ko --\x3e    \x3c!-- ko if: $properties.initials && !$properties.src --\x3e    <div class="oj-avatar-initials" data-bind="text: $properties.initials"></div>    \x3c!-- /ko --\x3e    \x3c!-- ko if: !$properties.initials && !$properties.src --\x3e    <div class="oj-avatar-placeholder"></div>    \x3c!-- /ko --\x3e  </div></div>',metadata:{properties:{initials:{type:"string"},size:{type:"string",enumValues:["xxs","xs","sm","md","lg","xl","xxl"],value:"md"},src:{type:"string"}},methods:{setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}}});var pi=function(){};n.Object.createSubclass(pi,n.Object,"KeySet"),n.KeySet=pi,pi.prototype.SetInternal=function(e){this._keys=e},pi.prototype.AddOrDeleteInternal=function(e,t){var i,n;return null==(i=e?this._add(t):this._remove(t))?this:((n=Object.create(Object.getPrototypeOf(this))).SetInternal(i),n)},pi.prototype._add=function(e){var t=this,i=null;return e.forEach(function(e){e!==t.NOT_A_KEY&&t.get(e)===t.NOT_A_KEY&&(null==i&&(i=t.Clone()),i.add(e))}),i},pi.prototype._remove=function(e){var t,i=this,n=null;return 0===this._keys.size?null:(e.forEach(function(e){(t=i.get(e))!==i.NOT_A_KEY&&(null==n&&(n=i.Clone()),n.delete(t))}),n)},pi.prototype.GetInternalSize=function(){return this._keys.size},pi.prototype.Clone=function(){return this._populate(this._keys)},y.call(pi.prototype);var _i=function(e){this.InitializeWithKeys(e)};n.Object.createSubclass(_i,pi,"ExpandedKeySet"),n.ExpandedKeySet=_i,_i.prototype.add=function(e){return this.AddOrDeleteInternal(!0,e)},_i.prototype.addAll=function(){return new mi},_i.prototype.isAddAll=function(){return!1},_i.prototype.delete=function(e){return this.AddOrDeleteInternal(!1,e)},_i.prototype.clear=function(){return 0===this.GetInternalSize()?this:new _i},_i.prototype.has=function(e){return this.get(e)!==this.NOT_A_KEY},_i.prototype.values=function(){return this.Clone()};var mi=function(){this.InitializeWithKeys(null)};n.Object.createSubclass(mi,pi,"ExpandAllKeySet"),n.ExpandAllKeySet=mi,mi.prototype.add=function(e){return this.AddOrDeleteInternal(!1,e)},mi.prototype.addAll=function(){return 0===this.GetInternalSize()?this:new mi},mi.prototype.isAddAll=function(){return!0},mi.prototype.delete=function(e){return this.AddOrDeleteInternal(!0,e)},mi.prototype.clear=function(){return new _i},mi.prototype.has=function(e){return this.get(e)===this.NOT_A_KEY},mi.prototype.deletedValues=function(){return this.Clone()},"undefined"!=typeof cssAPI&&(cssAPI.load=function(e,t,i,n){var o=!1;if(n){var s=n.ojcss,r=e+".css";this.isExcluded(r,s)&&(o=!0)}o?i(e):cssmodule.load(e,t,i,n)},cssAPI.pluginBuilder="css-builder",cssAPI.normalize=cssmodule.normalize,cssAPI.isExcluded=function(e,t){var i=!1;if(t&&t.include){var n=t.include;if(Array.isArray(n)){if(n.length>0){i=!0;for(var o=0;o<n.length;o++){var s=n[o];if(e.substr(0,s.length)===s){i=!1;break}}}}else this.makeRegExp(n).test(e)&&(i=!1)}if(!i&&t&&t.exclude){var r=t.exclude;if(Array.isArray(r))for(var a=0;a<r.length;a++){var l=r[a];if(e.substr(0,l.length)===l){i=!0;break}}else this.makeRegExp(r).test(e)&&(i=!0)}return i},cssAPI.makeRegExp=function(e){var t=null;return e&&(t="string"==typeof e?new RegExp(e):e),t});var gi=function(){};gi.getLayout=function(e){return function(t){var i;if(e.nodes&&t.getNodeCount()>0){var n=gi._dataArrayToMap(e.nodes);i=e.nodeDefaults&&e.nodeDefaults.labelLayout?e.nodeDefaults.labelLayout:null;for(var o=0;o<t.getNodeCount();o++){var s=t.getNodeByIndex(o),r=n.get(s.getId());gi._positionChildNodes(s.getChildNodes(),r?r.nodes:null,t,i),gi._positionNodeAndLabel(s,r,t,i)}}if(e.links&&t.getLinkCount()>0){var a=gi._dataArrayToMap(e.links),l=e.linkDefaults&&e.linkDefaults.path?e.linkDefaults.path:null;i=e.linkDefaults&&e.linkDefaults.labelLayout?e.linkDefaults.labelLayout:null;for(var u=0;u<t.getLinkCount();u++){var d=t.getLinkByIndex(u),h=a.get(d.getId());h&&h.path?d.setPoints(h.path):l&&l instanceof Function&&d.setPoints(l(t,d)),h&&h.coordinateSpace&&d.setCoordinateSpace(h.coordinateSpace),h&&h.labelLayout?gi._setLabelPosition(d,h.labelLayout):i&&i instanceof Function&&gi._setLabelPosition(d,i(t,d))}}if(e.viewport){var c=e.viewport;c instanceof Function?t.setViewport(c(t)):t.setViewport(c)}}},gi._dataArrayToMap=function(e){var t=new Cn;if(e)for(var i=0;i<e.length;i++)t.set(e[i].id,e[i]);return t},gi._positionChildNodes=function(e,t,i,n){if(e&&t)for(var o=gi._dataArrayToMap(t),s=0;s<e.length;s++){var r=e[s],a=o.get(r.getId());gi._positionChildNodes(r.getChildNodes(),a?a.nodes:null,i,n),gi._positionNodeAndLabel(r,a,i,n)}},gi._positionNodeAndLabel=function(e,t,i,n){e&&t&&(e.setPosition({x:t.x,y:t.y}),t.labelLayout?gi._setLabelPosition(e,t.labelLayout):n&&n instanceof Function?gi._setLabelPosition(e,n(i,e)):n&&gi._setLabelPosition(e,n,e.getPosition()))},gi._setLabelPosition=function(e,t,i){var n=i||{x:0,y:0};e.setLabelPosition({x:t.x+n.x,y:t.y+n.y});var o=t.rotationPointX,s=t.rotationPointY;isNaN(o)||isNaN(s)||e.setLabelRotationPoint({x:o+n.x,y:s+n.y}),e.setLabelRotationAngle(t.angle),e.setLabelHalign(t.halign),e.setLabelValign(t.valign)};var fi={properties:{expanded:{type:"Array<string>|Array<number>|Array<Object>",writeback:!0},multiple:{type:"boolean",value:!1},translations:{type:"object",value:{}}},methods:{refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojBeforeExpand:{},ojExpand:{},ojBeforeCollapse:{},ojCollapse:{}},extension:{}};n.__registerWidget("oj.ojAccordion",$.oj.baseComponent,{widgetEventPrefix:"oj",options:{multiple:!1,expanded:null,beforeExpand:null,expand:null,beforeCollapse:null,collapse:null},_ComponentCreate:function(){this._super(),this.element.addClass("oj-accordion oj-component").attr("role","group"),this.options.expanded=this._expandedIndexToId(this.options.expanded),this._refresh()},_NotifyContextMenuGesture:function(e,t,i){this._OpenContextMenu(t,i,{launcher:this.element.find(".oj-collapsible-header-icon").first()})},_destroy:function(){this.element.removeClass("oj-accordion oj-component").removeAttr("role"),this.element.children().removeClass("oj-accordion-collapsible"),this.element.children(".oj-accordion-created").removeClass("oj-accordion-created").ojCollapsible("destroy")},_setOption:function(e,t,i){if("multiple"===e)!t&&this.options.multiple&&this.element.children(".oj-expanded").first().siblings(".oj-collapsible").ojCollapsible("collapse",!1);else if("expanded"===e)return void this._setExpandedOption(t);this._super(e,t,i)},refresh:function(){this._super(),this._refresh()},_refresh:function(){this._makeCollapsible(),this._internalSetExpanded=!0,this._setExpandedOption(this.options.expanded),this._internalSetExpanded=!1,this._setupEvents()},_makeCollapsible:function(){this.collapsibles=this.element.children().not("oj-menu"),this._IsCustomElement()?(this.element.children("oj-collapsible").each(function(e,t){t.setAttribute("expand-area","header")}),this.collapsibles.not("oj-collapsible").ojCollapsible({expandArea:"header"}).addClass("oj-accordion-created").attr("data-oj-internal","")):(this.element.children(":oj-collapsible").each(function(){$(this).ojCollapsible("option","expandArea","header")}),this.collapsibles.not(":oj-ojCollapsible").ojCollapsible({expandArea:"header"}).addClass("oj-accordion-created").attr("data-oj-internal","")),this.collapsibles.addClass("oj-accordion-collapsible")},_setupEvents:function(){var e;e=this._IsCustomElement()?{keydown:this._keydown,ojBeforeExpand:this._beforeExpandHandler,ojExpand:this._expandHandler,ojBeforeCollapse:this._beforeCollapseHandler,ojCollapse:this._collapseHandler}:{keydown:this._keydown,ojbeforeexpand:this._beforeExpandHandler,ojexpand:this._expandHandler,ojbeforecollapse:this._beforeCollapseHandler,ojcollapse:this._collapseHandler},this._off(this.collapsibles),this._on(this.collapsibles,e)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey&&($(e.target).hasClass("oj-collapsible-header")||$(e.target).hasClass("oj-collapsible-header-icon"))){var t=$.ui.keyCode,i=this.collapsibles.not(".oj-disabled"),n=i.length,o=$(e.target).closest(".oj-collapsible"),s=i.index(o),r=!1;if(s>=0)switch(e.keyCode){case t.RIGHT:case t.DOWN:r=i[(s+1)%n];break;case t.LEFT:case t.UP:r=i[(s-1+n)%n];break;case t.HOME:r=i[0];break;case t.END:r=i[n-1]}r&&(o&&$(o).trigger("ojfocusout"),$(r).trigger("ojfocus"),e.preventDefault())}},_findTargetSiblings:function(e){if(!this.options.multiple){var t=$(e.target).closest(".oj-collapsible");if(t.parent().is(":oj-ojAccordion"))return t.siblings(".oj-collapsible.oj-expanded").map(function(){return $(this).data("oj-ojCollapsible")})}return $()},_beforeExpandHandler:function(e,t){if(!this._isTargetMyCollapsible(e))return!0;var i;this._expandTarget=$(e.target);var n=null;if(this._findTargetSiblings(e).each(function(){var t={header:(n=this.element).find(".oj-collapsible-header"),content:n.find(".oj-collapsible-content")};return(i=this._trigger("beforeCollapse",e,t))||(this._expandTarget=null),i}),!this.options.multiple){var o=this._initEventData(n,this._expandTarget);i=this._trigger("beforeExpand",e,o)}var s=this;return i&&this._findTargetSiblings(e).each(function(){this.collapse(!1,e,t),s._collapsedCollapsible=this.widget()}),i},_expandHandler:function(e,t){var i=null;if(this._collapsedCollapsible&&(i=this._collapsedCollapsible,this._collapsedCollapsible=null),this._isTargetMyCollapsible(e)&&!this._duringSetExpandedOption){var n,o=this;this._findTargetSiblings(e).each(function(){this.collapse(!1,e,t),n=o._initEventData(this.element,$(e.target))}),n||(n=o._initEventData(i,$(e.target))),this.options.multiple||this._trigger("expand",e,n),this._updateExpanded(),this._expandTarget=null}},_beforeCollapseHandler:function(e,t){var i=t;return!(this._isTargetMyCollapsible(e)&&!this.options.multiple)||(!i&&e.originalEvent instanceof CustomEvent&&(i=e.originalEvent.detail),this._trigger("beforeCollapse",e,this._initCollapseEventData(e,i)))},_collapseHandler:function(e,t){var i=t;if(!this._duringSetExpandedOption&&this._isTargetMyCollapsible(e)){!i&&e.originalEvent instanceof CustomEvent&&(i=e.originalEvent.detail);var n=this._initCollapseEventData(e,i);this.options.multiple||this._trigger("collapse",e,n),this._updateExpanded()}},_initEventData:function(e,t){return{fromCollapsible:e,toCollapsible:t}},_initCollapseEventData:function(e,t){var i;return t.toCollapsible?i=t:e.originalEvent&&e.originalEvent.target&&(i=this._initEventData($(e.target),this._expandTarget)),!i&&this._expandTarget&&(i=this._initEventData($(e.target),this._expandTarget)),i},_isTargetMyCollapsible:function(e){return $(e.target).is(this.collapsibles)},_updateExpanded:function(){var e,t,i=[];this.collapsibles.each(function(n){("oj-collapsible"===this.tagName.toLowerCase()?"true"===this.getAttribute("expanded"):$(this).ojCollapsible("option","expanded"))&&(t={},(e=$(this).attr("id"))&&(t.id=e),t.index=n,i.push(t))}),n.Object._compareArrayIdIndexObject(i,this.options.expanded)||this.option("expanded",i,{_context:{internalSet:!0,writeback:!0}})},_expandedIndexToId:function(e){if(Array.isArray(e)){for(var t,i=[],n=[],o=0;o<e.length;o++){var s=e[o];"number"==typeof s||"string"==typeof s?n.push(s):"number"==typeof s.index?n.push(s.index):"string"==typeof s.id&&n.push(s.id)}return this.element.children().each(function(e){(t=$(this).attr("id"))?-1===n.indexOf(t)&&-1===n.indexOf(e)||i.push({id:t,index:e}):-1!==n.indexOf(e)&&i.push({index:e})}),!this.options.multiple&&i.length>1&&(i=[i[i.length-1]]),i}return null},_setExpandedOption:function(t){var i=t;if(this._internalSetExpanded||(i=this._expandedIndexToId(i)),i){var n,o,s,r,a=this,l=0;this.collapsibles.each(function(t){n=$(this),o=n.attr("id"),s=!1,(r=i[l])&&(o?o===r.id&&(s=!0):t===r.index&&(s=!0),s&&(l+=1));var u="oj-collapsible"===this.tagName.toLowerCase();(u?"true"===this.getAttribute("expanded")||""===this.getAttribute("expanded"):n.ojCollapsible("option","expanded"))!==s&&(e.warn("JET Accordion: override collapsible "+t+" expanded setting"),a._duringSetExpandedOption=!0,u?this.setAttribute("expanded",s):n.ojCollapsible("option","expanded",s),a._duringSetExpandedOption=!1)})}this._updateExpanded()},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;var t=e.subId,i=e.index;if("number"!=typeof i||i<0||i>=this.collapsibles.length)return null;var n=this.collapsibles[i];switch(t){case"oj-accordion-content":t="oj-collapsible-content";break;case"oj-accordion-header":t="oj-collapsible-header";break;case"oj-accordion-disclosure":case"oj-accordion-header-icon":t="oj-collapsible-disclosure";break;case"oj-accordion-collapsible":return n;default:return null}return $(n).ojCollapsible("getNodeBySubId",{subId:t})},getSubIdByNode:function(e){for(var t=-1,i=e;i&&-1===(t=Array.prototype.indexOf.call(this.collapsibles,i));)i=i.parentElement;var n=null;if(-1!==t){var o=$(this.collapsibles[t]).ojCollapsible("getSubIdByNode",e);switch((o=o||{}).subId){case"oj-collapsible-content":n="oj-accordion-content";break;case"oj-collapsible-header":n="oj-accordion-header";break;case"oj-collapsible-disclosure":case"oj-collapsible-header-icon":n="oj-accordion-disclosure";break;default:n="oj-accordion-collapsible"}}return n?{subId:n,index:t}:null},_CompareOptionValues:function(e,t,i){return"expanded"===e?n.Object.compareValues(t,i):this._super(e,t,i)}}),fi.extension._WIDGET_NAME="ojAccordion",n.CustomElementBridge.register("oj-accordion",{metadata:fi}),n.AnimationUtils={};var vi=n.AnimationUtils;n.AnimationUtils._getName=function(e,t){if(!n.AnimationUtils._nameMap){n.AnimationUtils._nameMap={};var i=n.AnimationUtils._nameMap,o=e.style;i.backfaceVisibility=void 0!==o.webkitBackfaceVisibility?"webkitBackfaceVisibility":"backfaceVisibility",i.transform=void 0!==o.webkitTransform?"webkitTransform":"transform",i.transformOrigin=void 0!==o.webkitTransformOrigin?"webkitTransformOrigin":"transformOrigin",i.transition=void 0!==o.webkitTransition?"webkitTransition":"transition",i.transitionend=void 0!==o.webkitTransition?"webkitTransitionEnd":"transitionend"}return n.AnimationUtils._nameMap[t]||t},n.AnimationUtils._getElementStyle=function(e,t){return e.style[n.AnimationUtils._getName(e,t)]},n.AnimationUtils._setElementStyle=function(e,t,i){e.style[n.AnimationUtils._getName(e,t)]=i},n.AnimationUtils._animate=function(e,t,i,o,s,r){var a=[].concat(s),l=function(l,u){var d=function(e){var t=0===e.propertyName.indexOf("-webkit-")?e.propertyName.substr(8):e.propertyName;t=n.AnimationUtils._getCamelCasePropName(t);var i=a.indexOf(t);i>-1&&(a.length>1?a.splice(i,1):p())},h=0,c=!1;function p(){c||(h&&(window.cancelAnimationFrame(h),h=0),e.removeEventListener(n.AnimationUtils._getName(e,"transitionend"),d),l&&l(!0),c=!0)}null==i&&(i={}),null==i.css&&(i.css={}),i.css.transition=n.AnimationUtils._createTransitionValue(e,s,o);var _=n.AnimationUtils._saveStyle(e,t,i,o,r||s);n.AnimationUtils._applyState(e,t,_>1),e.addEventListener(n.AnimationUtils._getName(e,"transitionend"),d);var m=o.duration,g=o.delay,f=o._skipPromise;function v(){h=0,n.AnimationUtils._applyState(e,i,_>1)}null==t?v():(o._noReflow||(n.AnimationUtils._x=e.offsetWidth),h=window.requestAnimationFrame(v));var y=n.AnimationUtils._getTotalTiming(m,g);f||setTimeout(p,y+100)};return o._skipPromise?(l(null),null):new Promise(l).then(function(){t&&t.addClass&&$(e).removeClass(t.addClass),i&&i.addClass&&$(e).removeClass(i.addClass),n.AnimationUtils._restoreStyle(e)})},n.AnimationUtils._saveCssValues=function(e,t,i,o){for(var s=Object.keys(t),r=Object.prototype.hasOwnProperty,a=0;a<s.length;a++){var l=s[a];r.call(i,l)||o&&-1!==o.indexOf(l)||(i[l]=n.AnimationUtils._getElementStyle(e,l))}},n.AnimationUtils._saveStyle=function(e,t,i,o,s){var r=e._ojSavedStyle||{},a=t&&t.css?t.css:{},l=i&&i.css?i.css:{},u=s;o&&"all"===o.persist||(u=null),n.AnimationUtils._saveCssValues(e,a,r,u),n.AnimationUtils._saveCssValues(e,l,r,u),e._ojSavedStyle=r;var d=e._ojEffectCount||0;return d+=1,e._ojEffectCount=d,d},n.AnimationUtils._restoreStyle=function(e){var t=e,i=t._ojEffectCount;if(i>1)t._ojEffectCount=i-1;else{var o=t._ojSavedStyle;if(o){for(var s=Object.keys(o),r=0;r<s.length;r++){var a=s[r];n.AnimationUtils._setElementStyle(t,a,o[a])}delete t._ojSavedStyle,delete t._ojEffectCount}}},n.AnimationUtils._getCamelCasePropName=function(e){if(e.indexOf("-")>=0){for(var t="",i=e.split("-"),n=0;n<i.length;n++){var o=i[n];o&&(t?t+=o.charAt(0).toUpperCase()+o.slice(1):t=o)}return t}return e},n.AnimationUtils._getHyphenatedPropName=function(e){var t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return 0===t.indexOf("webkit")&&(t="-"+t),t},n.AnimationUtils._concatMultiValue=function(e,t,i,o,s){if(t.css[i]){var r=n.AnimationUtils._getElementStyle(e,i);r&&0!==r.indexOf(o)&&(t.css[i]=r+s+t.css[i])}},n.AnimationUtils._splitTransform=function(e){var t=[];if(e&&"none"!==e)for(var i=e,n=i.indexOf(")");n>0;){var o=i.substr(0,n+1);t.push(o.trim()),n=(i=i.slice(n+1)).indexOf(")")}return t},n.AnimationUtils._getTransformFuncName=function(e){var t=e.indexOf("(");return t>=1?e.substr(0,t):e},n.AnimationUtils._applyTransform=function(e,t){for(var i=n.AnimationUtils._getElementStyle(e,"transform"),o=n.AnimationUtils._splitTransform(i),s=n.AnimationUtils._splitTransform(t),r=[],a=0;a<s.length;a++){var l=n.AnimationUtils._getTransformFuncName(s[a]),u=!1;if(l)for(var d=0;d<o.length;d++)0===o[d].indexOf(l+"(")&&(o[d]=s[a],u=!0);u||r.push(s[a])}return(o=o.concat(r)).join(" ")},n.AnimationUtils._applyState=function(e,t,i){if(t){if(t.css){i&&n.AnimationUtils._concatMultiValue(e,t,"transition","all",", "),t.css.transform&&(t.css.transform=n.AnimationUtils._applyTransform(e,t.css.transform));for(var o=t.css,s=Object.keys(o),r=0;r<s.length;r++){var a=s[r];n.AnimationUtils._setElementStyle(e,a,o[a])}}t.addClass&&$(e).addClass(t.addClass),t.removeClass&&$(e).removeClass(t.removeClass)}},n.AnimationUtils._getTimingValue=function(e){var t=parseFloat(e);return isNaN(t)?0:e.indexOf("ms")>-1?t:1e3*t},n.AnimationUtils._getTotalTiming=function(e,t){var i=n.AnimationUtils._getTimingValue(e);return i>0?i+(t?n.AnimationUtils._getTimingValue(t):0):0},n.AnimationUtils._calcCssTime=function(e,t,i){for(var o=e.split(","),s=t.split(","),r=i.split(","),a=o.length,l=s.length,u=r.length,d=0,h=0;h<a;h++){var c=r[h%u],p=s[h%l],_=n.AnimationUtils._getTotalTiming(c,p);d=Math.max(d,_)}return d},n.AnimationUtils._calcEffectTime=function(e){var t,i,o,s=window.getComputedStyle(e);t=s.animationName||s.webkitAnimationName,i=s.animationDelay||s.webkitAnimationDelay,o=s.animationDuration||s.webkitAnimationDuration;var r=n.AnimationUtils._calcCssTime(t,i,o);t=s.transitionProperty||s.webkitTransitionProperty,i=s.transitionDelay||s.webkitTransitionDelay,o=s.transitionDuration||s.webkitTransitionDuration;var a=n.AnimationUtils._calcCssTime(t,i,o);return Math.max(r,a)},n.AnimationUtils._fillEmptyOptions=function(e,t){e.delay=e.delay||t.delay,e.duration=e.duration||t.duration,e.timingFunction=e.timingFunction||t.timingFunction,e.persist=e.persist||t.persist},n.AnimationUtils._triggerEvent=function(e,t,i,n){var o;if(n&&n._trigger)o=!n._trigger(t,null,i);else{var s="oj"+t.substr(0,1).toUpperCase()+t.substr(1),r=new CustomEvent(s,{detail:i,bubbles:!0,cancelable:!0}),a=n||e;a.dispatchEvent&&a.dispatchEvent(r),o=r.defaultPrevented}return o},n.AnimationUtils.startAnimation=function(e,t,i,o){return e=$(e)[0],new Promise(function(s,r){var a=$(e),l="oj-animate-"+t,u=l+"-active",d=!1,h=!1,c=function(){if(d&&h){a.removeClass(l),a.removeClass(u),n.AnimationUtils._restoreStyle(e),s(!0);var i={action:t,element:e};n.AnimationUtils._triggerEvent(e,"animateEnd",i,o)}},p=function(){d=!0,c()},_=function(){h=!0,c()};n.AnimationUtils._saveStyle(e,null,null,null,null);var m={action:t,element:e,endCallback:p};if(!n.AnimationUtils._triggerEvent(e,"animateStart",m,o)){for(var g=[].concat(i),f=[],v={},y=0;y<g.length;y++){var b,C=g[y],S="";null!=C&&"none"!==C&&("string"==typeof C?(S=C,b={}):"object"==typeof C&&(S=C.effect,b=$.extend({},C)),n.AnimationUtils._fillEmptyOptions(b,v),v=$.extend({},b)),S&&n.AnimationUtils[S]&&f.push(n.AnimationUtils[S](e,b))}f.length?Promise.all(f).then(p):p()}a.addClass(l);var E=window.requestAnimationFrame(function(){E=0,a.addClass(u);var t=n.AnimationUtils._calcEffectTime(e);t>0?setTimeout(_,t+100):_()});setTimeout(function(){E&&(window.cancelAnimationFrame(E),E=0,_())},1e3)})},n.AnimationUtils._mergeOptions=function(e,t){return null==n.AnimationUtils._defaultOptions&&(n.AnimationUtils._defaultOptions=_.parseJSONFromFontFamily("oj-animation-effect-default-options")),$.extend({duration:"400ms"},n.AnimationUtils._defaultOptions?n.AnimationUtils._defaultOptions[e]:null,t)},n.AnimationUtils._createTransitionValue=function(e,t,i){var o="";if(t)for(var s=0;s<t.length;s++){var r=n.AnimationUtils._getName(e,t[s]);o+=(s>0?", ":"")+n.AnimationUtils._getHyphenatedPropName(r)+" "+i.duration,i.timingFunction&&(o+=" "+i.timingFunction),i.delay&&(o+=" "+i.delay)}return o},n.AnimationUtils._fade=function(e,t,i,o,s){var r=n.AnimationUtils._mergeOptions(i,t),a={css:{opacity:o}},l={css:{opacity:s}};return r&&(r.startOpacity&&(a.css.opacity=r.startOpacity),r.endOpacity&&(l.css.opacity=r.endOpacity)),n.AnimationUtils._animate(e,a,l,r,["opacity"])},n.AnimationUtils.fadeIn=function(e,t){return n.AnimationUtils._fade(e,t,"fadeIn",0,1)},n.AnimationUtils.fadeOut=function(e,t){return n.AnimationUtils._fade(e,t,"fadeOut",1,0)},n.AnimationUtils.expand=function(e,t){return n.AnimationUtils._expandCollapse(e,t,!0)},n.AnimationUtils.collapse=function(e,t){return n.AnimationUtils._expandCollapse(e,t,!1)},n.AnimationUtils._wrapRowContent=function(e,t){var i,n,o=[],s=e.children,r=[],a=[];for(e._ojSavedHeight=e.style.height,n=0;n<s.length;n++){i=s[n];var l=window.getComputedStyle(i);r.push(l.padding),a.push(l.textAlign),i._ojSavedPadding=i.style.padding}for(n=0;n<s.length;n++){i=s[n];var u=document.createElement("div");u.style.overflow="hidden;";var d=document.createElement("div");for(d.style.display="table-cell",d.style.verticalAlign="middle",d.style.boxSizing="border-box",d.style.height=t,d.style.padding=r[n],d.style.textAlign=a[n],u.appendChild(d);i.firstChild;)d.appendChild(i.firstChild);i.appendChild(u),i.style.padding="0",o.push(u)}return e.style.height="0",o},n.AnimationUtils._unwrapRowContent=function(e){for(var t=e.children,i=0;i<t.length;i++){var n=t[i],o=n.children[0];if(o){var s=o.children[0];if(s)for(;s.firstChild;)n.appendChild(s.firstChild);n.removeChild(o)}n.style.padding=n._ojSavedPadding,delete n._ojSavedPadding}e.style.height=e._ojSavedHeight,delete e._ojSavedHeight},n.AnimationUtils._expandCollapseRow=function(e,t,i){var o,s=e.offsetHeight+"px",r=n.AnimationUtils._wrapRowContent(e,s),a=$.extend({},t);if(i?a.endMaxHeight||(a.endMaxHeight=s):a.startMaxHeight||(a.startMaxHeight=s),a.persist="all",a._noReflow=!0,r.length)for(var l=0;l<r.length;l++)0===l?(a._skipPromise=!1,o=n.AnimationUtils._expandCollapse(r[l],a,i)):(a._skipPromise=!0,n.AnimationUtils._expandCollapse(r[l],a,i));else o=Promise.resolve();return o.then(function(){null!=t&&"all"===t.persist||n.AnimationUtils._unwrapRowContent(e)})},n.AnimationUtils._getSizeLimit=function(e,t,i,n,o){var s=i;if(!s)if(n)s="0";else{var r=o?t.maxWidth:t.maxHeight;s="none"!==r?r:(o?e.offsetWidth:e.offsetHeight)+"px"}return s},n.AnimationUtils._expandCollapse=function(e,t,i){if(e&&"TR"===e.tagName)return n.AnimationUtils._expandCollapseRow(e,t,i);var o=n.AnimationUtils._mergeOptions(i?"expand":"collapse",t),s={css:{}},r={css:{}},a=o.direction||"height",l=s.css,u=r.css,d=window.getComputedStyle(e),h=[];if("both"===a||"height"===a){var c=n.AnimationUtils._getSizeLimit(e,d,o.startMaxHeight,i,!1),p=n.AnimationUtils._getSizeLimit(e,d,o.endMaxHeight,!i,!1);l.maxHeight=c,u.maxHeight=p,h.push("maxHeight")}if("both"===a||"width"===a){var _=n.AnimationUtils._getSizeLimit(e,d,o.startMaxWidth,i,!0),m=n.AnimationUtils._getSizeLimit(e,d,o.endMaxWidth,!i,!0);l.maxWidth=_,u.maxWidth=m,h.push("maxWidth")}l.overflow=o.overflow?o.overflow:"hidden";var g=[].concat(h);return g.push("overflow"),n.AnimationUtils._animate(e,s,r,o,h,g)},n.AnimationUtils.zoomIn=function(e,t){return n.AnimationUtils._zoom(e,t,!0)},n.AnimationUtils.zoomOut=function(e,t){return n.AnimationUtils._zoom(e,t,!1)},n.AnimationUtils._zoom=function(e,t,i){var o,s=n.AnimationUtils._mergeOptions(i?"zoomIn":"zoomOut",t),r={css:{}},a={css:{}},l=s.axis||"both";o="both"===l?"scale":"x"===l?"scaleX":"scaleY";var u=r.css,d=a.css;return u.transform=o+"("+(i?0:1)+") translateZ(0)",d.transform=o+"("+(i?1:0)+") translateZ(0)",u.transformOrigin=s.transformOrigin||"center",n.AnimationUtils._animate(e,r,a,s,["transform"])},n.AnimationUtils.slideIn=function(e,t){return n.AnimationUtils._slide(e,t,!0)},n.AnimationUtils.slideOut=function(e,t){return n.AnimationUtils._slide(e,t,!1)},n.AnimationUtils._slide=function(e,t,i){var o=n.AnimationUtils._mergeOptions(i?"slideIn":"slideOut",t),s={css:{}},r={css:{}},a=o.direction||"start",l="0",u="0",d=s.css,h=r.css;if(o.offsetX||o.offsetY)o.offsetX&&(l=o.offsetX),o.offsetY&&(u=o.offsetY);else{var c="rtl"===n.DomUtils.getReadingDirection();switch(a){case"left":l=(i?e.offsetWidth:-e.offsetWidth)+"px";break;case"right":l=(i?-e.offsetWidth:e.offsetWidth)+"px";break;case"top":u=(i?e.offsetHeight:-e.offsetHeight)+"px";break;case"bottom":u=(i?-e.offsetHeight:e.offsetHeight)+"px";break;case"end":l=(i?-e.offsetWidth:e.offsetWidth)*(c?-1:1)+"px";break;default:l=(i?e.offsetWidth:-e.offsetWidth)*(c?-1:1)+"px"}}return i?(d.transform="translate("+l+","+u+") translateZ(0)",h.transform="translate(0,0) translateZ(0)"):(d.transform="translate(0,0) translateZ(0)",h.transform="translate("+l+","+u+") translateZ(0)"),n.AnimationUtils._animate(e,s,r,o,["transform"])},n.AnimationUtils.ripple=function(e,t){var i=n.AnimationUtils._mergeOptions("ripple",t),o={css:{}},s={css:{}},r=e.offsetWidth,a=e.offsetHeight,l=$("<div style='position:absolute; overflow:hidden'>"),u=$("<div class='oj-animation-effect-ripple oj-animation-rippler'>"),d="static"===window.getComputedStyle(e).position?{left:e.offsetLeft,top:e.offsetTop}:{left:0,top:0};e.insertBefore(l[0],e.firstChild),l.css({left:d.left+"px",top:d.top+"px",width:r+"px",height:a+"px"}),l.prepend(u);var h=o.css,c=s.css;return n.AnimationUtils._setRippleOptions(h,u,l,i),h.transform="scale(0) translateZ(0)",h.opacity=i.startOpacity||u.css("opacity"),c.transform="scale(1) translateZ(0)",c.opacity=i.endOpacity||0,i.persist="all",n.AnimationUtils._animate(u[0],o,s,i,["transform","opacity"]).then(function(){l.remove()})},n.AnimationUtils._setRippleOptions=function(e,t,i,o){var s=e,r=t.width(),a=i.width(),l=i.height();if(o.diameter){var u=o.diameter,d=parseInt(u,10);isNaN(d)||(r="%"===u.charAt(u.length-1)?Math.floor(Math.min(a,l)*(d/100)):d,s.width=r+"px",s.height=r+"px")}var h,c="static"===i.css("position")?i.position():{left:0,top:0};null!=(h=n.AnimationUtils._calcRippleOffset(o.offsetX,r,a,c.left))&&(s.left=h+"px"),null!=(h=n.AnimationUtils._calcRippleOffset(o.offsetY,r,l,c.top))&&(s.top=h+"px"),o.color&&(s.backgroundColor=o.color)},n.AnimationUtils._calcRippleOffset=function(e,t,i,n){var o,s=e||"50%",r=parseInt(s,10);return isNaN(r)||(o="%"===s.charAt(s.length-1)?i*(r/100)-t/2:r-t/2,o=Math.floor(o+n)),o},n.AnimationUtils._removeRipple=function(t,i){var o=i||{},s=o.removeEffect||"fadeOut",r=$(".oj-animation-rippler",t);if(0!==r.length)return s in{fadeOut:1,collapse:1,zoomOut:1,slideOut:1}?n.AnimationUtils[s](r,o).then(function(){r.remove()}):r.remove();e.warn("No rippler so returning")},n.AnimationUtils._calcBackfaceAngle=function(t){var i,n=t.match(/^([+-]?\d*\.?\d*)(.*)$/),o=parseFloat(n[1]),s=n[2];switch(s){case"deg":i=o-180+s;break;case"grad":i=o-200+s;break;case"rad":i=o-3.1416+s;break;case"turn":i=o-.5+s;break;default:e.error("Unknown angle unit in flip animation: "+s)}return i},n.AnimationUtils._flip=function(e,t,i,o,s){if(t&&"children"===t.flipTarget){var r,a=[],l=$(e).children(),u=$.extend({},t);delete u.flipTarget;var d=$.extend({},u);d.startAngle=n.AnimationUtils._calcBackfaceAngle(t.startAngle||o),d.endAngle=n.AnimationUtils._calcBackfaceAngle(t.endAngle||s);for(var h=0;h<l.length;h++)r=$(l[h]).hasClass("oj-animation-backface")?d:u,a.push(n.AnimationUtils._flip(l[h],r,i,o,s));return Promise.all(a)}var c,p={},_={},m={css:p},g={css:_},f="rotateY(",v="2000px",y="hidden",b="center";(t=n.AnimationUtils._mergeOptions(i,t))&&("x"===t.axis&&(f="rotateX("),t.startAngle&&(o=t.startAngle),t.endAngle&&(s=t.endAngle),t.perspective&&(v=t.perspective),t.backfaceVisibility&&(y=t.backfaceVisibility),t.transformOrigin&&(b=t.transformOrigin)),c="perspective("+v+") "+f;return p.transform=c+o+")",p.backfaceVisibility=y,p.transformOrigin=b,_.transform=c+s+")",n.AnimationUtils._animate(e,m,g,t,["transform"],["transform","backfaceVisibility","transformOrigin"])},n.AnimationUtils.flipIn=function(e,t){return n.AnimationUtils._flip(e,t,"flipIn","-180deg","0deg")},n.AnimationUtils.flipOut=function(e,t){return n.AnimationUtils._flip(e,t,"flipOut","0deg","180deg")},n.AnimationUtils.addTransition=function(e,t){var i=n.AnimationUtils._mergeOptions("addTransition",t);return n.AnimationUtils._animate(e,null,null,i,i.transitionProperties)},n.ArrayCellSet=function(e,t,i,n,o){this.m_startRow=e,this.m_endRow=t,this.m_startColumn=i,this.m_endColumn=n,this.m_callback=o},n.ArrayCellSet.prototype.getData=function(e){var t=this,i=e.row,n=e.column,o={};return Object.defineProperty(o,"data",{enumerable:!0,get:function(){return t.m_callback._getCellData(i,n)},set:function(e){t.m_callback._setCellData(i,n,e)}}),o},n.ArrayCellSet.prototype.getMetadata=function(e){return this.m_callback._getCellMetadata(e.row,e.column)},n.ArrayCellSet.prototype.getStart=function(e){return"row"===e?this.m_startRow:"column"===e?this.m_startColumn:-1},n.ArrayCellSet.prototype.getCount=function(e){return"row"===e?Math.max(0,this.m_endRow-this.m_startRow):"column"===e?Math.max(0,this.m_endColumn-this.m_startColumn):0},n.ArrayCellSet.prototype.getExtent=function(e){return{row:{extent:1,more:{before:!1,after:!1}},column:{extent:1,more:{before:!1,after:!1}}}},n.ArrayCellSet.prototype.getStartRow=function(){return this.m_startRow},n.ArrayCellSet.prototype.getStartColumn=function(){return this.m_startColumn},n.ArrayDataGridDataSource=function(e,t){if(!(e instanceof Array)&&"function"!=typeof e&&"function"!=typeof e.subscribe){throw new Error("_ERR_DATA_INVALID_TYPE_SUMMARY\n_ERR_DATA_INVALID_TYPE_DETAIL")}this.rowHeaderKey=this._getRowHeaderFromOptions(t),null!=t&&(this.columns=t.columns,this.sortCriteria=t.initialSort),n.ArrayDataGridDataSource.superclass.constructor.call(this,e)},n.Object.createSubclass(n.ArrayDataGridDataSource,n.DataGridDataSource,"oj.ArrayDataGridDataSource"),n.ArrayDataGridDataSource.prototype.Init=function(){null==this.columns&&(this.columns=this._getColumnsForScaffolding(this.getDataArray())),this._initializeRowKeys(),"function"==typeof this.data&&this.data.subscribe(this._subscribe.bind(this),null,"arrayChange"),n.ArrayDataGridDataSource.superclass.Init.call(this)},n.ArrayDataGridDataSource.prototype.comparator=null,n.ArrayDataGridDataSource.prototype.sortCriteria=null,n.ArrayDataGridDataSource.prototype._getRowHeaderFromOptions=function(e){if(null!=e&&null!=e.rowHeader){var t=e.rowHeader;if("object"==typeof t){if(null!=t.default){if("none"===t.default)return;if("index"===t.default)return"m_defaultIndex"}}else if(null!=t)return t}return"m_defaultIndex"},n.ArrayDataGridDataSource.prototype._initializeRowKeys=function(){var e;for(e=this.getDataArray(),this.lastKey=0;this.lastKey<e.length;this.lastKey+=1)e[this.lastKey].ojKey=this.lastKey.toString()},n.ArrayDataGridDataSource.prototype._getColumnsForScaffolding=function(e){if("number"!=typeof e.length||0===e.length)return[];for(var t=[],i=Object.keys(e[0]),n=0;n<i.length;n++){var o=i[n];void 0!==this.rowHeaderKey&&o===this.rowHeaderKey||t.push(o)}return t},n.ArrayDataGridDataSource.prototype.getCount=function(e){return"row"===e?this._size():"column"===e?this.columns.length:0},n.ArrayDataGridDataSource.prototype.getCountPrecision=function(e){return"exact"},n.ArrayDataGridDataSource.prototype._getHeaderData=function(e,t){{if("row"===e)return void 0===this.rowHeaderKey?null:"m_defaultIndex"===this.rowHeaderKey?this._getRowKeyByIndex(t):this.getDataArray()[t][this.rowHeaderKey];if("column"===e)return this.columns[t]}},n.ArrayDataGridDataSource.prototype._getHeaderMetadata=function(e,t){var i;return"row"===e?{key:this._getRowKeyByIndex(t)}:"column"===e?(i=this._getHeaderData(e,t),null!=this.sortCriteria&&this.sortCriteria.key===i?{key:this._getHeaderData(e,t),sortDirection:this.sortCriteria.direction}:{key:i}):void 0},n.ArrayDataGridDataSource.prototype.fetchHeaders=function(e,t,i){var o,s=e.axis,r=e.start,a=e.count;if(r=Math.max(0,r),"column"===s)o=Math.min(this.columns.length,r+a);else{var l=this.getDataArray();o=void 0===this.rowHeaderKey?r:Math.min(l.length,r+a)}var u=new n.ArrayHeaderSet(r,o,s,this);null!=t&&null!=t.success&&(null==i&&(i={}),t.success.call(i.success,u,e,null))},n.ArrayDataGridDataSource.prototype._getCellData=function(e,t){var i=this.columns[t];return this.getDataArray()[e][i]},n.ArrayDataGridDataSource.prototype._setCellData=function(e,t,i){this.getDataArray()[e][this.columns[t]]=i},n.ArrayDataGridDataSource.prototype._getCellMetadata=function(e,t){return{keys:{row:this._getRowKeyByIndex(e),column:this.columns[t]}}},n.ArrayDataGridDataSource.prototype.fetchCells=function(e,t,i){for(var o,s,r,a,l=0;l<e.length;l+=1){var u=e[l];"row"===u.axis?(o=u.start,s=Math.min(this._size(),o+u.count)):"column"===u.axis&&(r=u.start,a=Math.min(this.columns.length,r+u.count))}if(void 0!==s&&void 0!==a){var d=new n.ArrayCellSet(o,s,r,a,this);null!=t&&null!=t.success&&(null==i&&(i={}),t.success.call(i.success,d,e))}else null!=t&&null!=t.error&&(null==i&&(i={}),t.error.call(i.error))},n.ArrayDataGridDataSource.prototype.keys=function(e){var t=e.row,i=e.column;return new Promise(function(e){e({row:this._getRowKeyByIndex(t),column:this.columns[i]})}.bind(this))},n.ArrayDataGridDataSource.prototype.indexes=function(e){var t=e.row,i=e.column;return new Promise(function(e){e({row:this._getRowIndexByKey(t),column:this.columns.indexOf(i)})}.bind(this))},n.ArrayDataGridDataSource.prototype.sort=function(e,t,i){var n=[],o=[];if(null!=t&&null==i&&(i={}),void 0===this.origData&&(this._origSortCriteria=this.sortCriteria,this.origData=this.data.slice()),null==e?e=this.sortCriteria:this.sortCriteria=e,null!=e){var s=e.axis,r=e.key;if("column"===s)this.getDataArray().sort(this._getComparator()),null!=t&&null!=t.success&&t.success.call(i.success);else if("row"===s){var a,l=this._getRowIndexByKey(r);for(a=0;a<this.columns.length;a+=1)n[a]=this.getDataArray()[l][this.columns[a]];for(n.sort(this._getComparator()),a=0;a<this.columns.length;a+=1)o[a]=this.columns[n.indexOf(this.getDataArray()[l][this.columns[a]])];this.origColumns=this.columns,this.columns=o,null!=t&&null!=t.success&&t.success.call(i.success)}else null!==t&&null!=t.error&&t.error.call(i.error,"Invalid axis value")}else this._resetSortOrder(t,i)},n.ArrayDataGridDataSource.prototype._resetSortOrder=function(e,t){void 0!==this.origData&&(this.data=this.origData,this.sortCriteria=this._origSortCriteria),null!=this.origColumns&&(this.columns=this.origColumns),null!=e&&null!=e.success&&e.success.call(t.success)},n.ArrayDataGridDataSource.prototype.getCapability=function(e){return"sort"===e?"column":"move"===e?"row":null},n.ArrayDataGridDataSource.prototype._getComparator=function(){var e=this.comparator;if(null==e){var t=this.sortCriteria.key,i=this.sortCriteria.direction,n=this.sortCriteria.axis;return this._naturalSort(i,t,n)}return e},n.ArrayDataGridDataSource.prototype._naturalSort=function(e,t,i){return"ascending"===e?function(e,n){var o,s,r=e,a=n;return null!=t&&"column"===i&&(r instanceof Array?(r=r[parseInt(t,10)],a=a[parseInt(t,10)]):(r=r[t],a=a[t])),o=isNaN(r),s=isNaN(a),r instanceof Date&&(r=r.toISOString(),o=!0),a instanceof Date&&(a=a.toISOString(),s=!0),o&&s?r<a?-1:r===a?0:1:o?1:s?-1:r-a}:"descending"===e?function(e,n){var o,s,r=e,a=n;return null!=t&&"column"===i&&(r instanceof Array?(r=r[parseInt(t,10)],a=a[parseInt(t,10)]):(r=r[t],a=a[t])),o=isNaN(r),s=isNaN(a),r instanceof Date&&(r=r.toISOString(),o=!0),a instanceof Date&&(a=a.toISOString(),s=!0),o&&s?r>a?-1:r===a?0:1:o?-1:s?1:a-r}:void 0},n.ArrayDataGridDataSource.prototype.move=function(e,t,i,n,o){var s,r,a=this._getRowIndexByKey(e),l=this.data.splice(a,1)[0];this.data instanceof Array&&(r=this._getModelEvent("delete",e,null,a,-1,!0),this.handleEvent("change",r)),null===t?(this.data.push(l),s=this.data.length-1):(s=this._getRowIndexByKey(t),this.data.splice(s,0,l)),this.data instanceof Array&&(r=this._getModelEvent("insert",e,null,s,-1),this.handleEvent("change",r)),void 0!==this.origData&&(this.origData=this.data.slice())},n.ArrayDataGridDataSource.prototype.moveOK=function(e,t,i){return"valid"},n.ArrayDataGridDataSource.prototype.getDataArray=function(){return"function"==typeof this.data?this.data():this.data},n.ArrayDataGridDataSource.prototype._getRowIndexByKey=function(e){for(var t=this.getDataArray(),i=0;i<t.length;i++)if(t[i].ojKey===e)return i;return-1},n.ArrayDataGridDataSource.prototype._getRowKeyByIndex=function(e){var t=this.getDataArray();return t[e]?t[e].ojKey:null},n.ArrayDataGridDataSource.prototype._getModelEvent=function(e,t,i,n,o,s){var r={};return r.source=this,r.operation=e,r.keys={row:t,column:i},r.indexes={row:n,column:o},r.silent=s,r},n.ArrayDataGridDataSource.prototype._subscribe=function(e){var t,i,n,o=!1,s=!1;for(t=0;t<e.length;t++){if(void 0!==(i=e[t]).moved){s=!0,n=this._getModelEvent("refresh",null,null),this.handleEvent("change",n);break}"added"===i.status&&(o=!0)}if(!s){var r,a,l,u=[],d=[];for(t=0;t<e.length;t++)"deleted"===(i=e[t]).status&&(r=i.value,l=i.index,a=r.ojKey,u.push({row:a,column:-1}),d.push({row:l,column:-1}));for(u.length>0&&(n={source:this,operation:"delete",keys:u,indexes:d,silent:o},this.handleEvent("change",n)),t=0;t<e.length;t++)"added"===(i=e[t]).status&&(r=i.value,l=i.index,null==r.ojKey&&(r.ojKey=this.lastKey.toString(),this.lastKey+=1),a=r.ojKey,n=this._getModelEvent("insert",a,null,l,-1),this.handleEvent("change",n))}void 0!==this.origData&&(this.origData=this.data.slice())},n.ArrayDataGridDataSource.prototype._size=function(){return this.getDataArray().length},n.ArrayDataGridDataSource.prototype.getRowHeaderKey=function(){return this.rowHeaderKey},n.ArrayDataGridDataSource.prototype.getColumns=function(){return this.columns},n.ArrayDataGridDataSource.prototype.getData=function(){return this.data},n.ArrayHeaderSet=function(e,t,i,n){this.m_start=e,this.m_end=t,this.m_axis=i,this.m_callback=n},n.ArrayHeaderSet.prototype.getData=function(e,t){return null==this.m_callback?null:(n.Assert.assert(e<=this.m_end&&e>=this.m_start,"index out of bounds"),n.Assert.assert(null==t||0===t,"level out of bounds"),this.m_callback._getHeaderData(this.m_axis,e))},n.ArrayHeaderSet.prototype.getMetadata=function(e,t){return null==this.m_callback?null:(n.Assert.assert(e<=this.m_end&&e>=this.m_start,"index out of bounds"),n.Assert.assert(null==t||0===t,"level out of bounds"),this.m_callback._getHeaderMetadata(this.m_axis,e))},n.ArrayHeaderSet.prototype.getLevelCount=function(){return this.getCount()>0?1:0},n.ArrayHeaderSet.prototype.getExtent=function(e,t){return n.Assert.assert(e<=this.m_end&&e>=this.m_start,"index out of bounds"),n.Assert.assert(null==t||0===t,"level out of bounds"),{extent:1,more:{before:!1,after:!1}}},n.ArrayHeaderSet.prototype.getDepth=function(e,t){return n.Assert.assert(e<=this.m_end&&e>=this.m_start,"index out of bounds"),n.Assert.assert(null==t||0===t,"level out of bounds"),1},n.ArrayHeaderSet.prototype.getLabel=function(){return null},n.ArrayHeaderSet.prototype.getCount=function(){return null==this.m_callback?0:Math.max(0,this.m_end-this.m_start)},n.ArrayHeaderSet.prototype.getStart=function(){return this.m_start},n.ArrayPagingDataSource=function(e){this.data=e,this.current=0,this.Init(),this._setPageSize(10)},n.Object.createSubclass(n.ArrayPagingDataSource,n.DataSource,"oj.ArrayPagingDataSource"),n.ArrayPagingDataSource.prototype.Init=function(){n.ArrayPagingDataSource.superclass.Init.call(this)},n.ArrayPagingDataSource.prototype._getSize=function(){return this._hasMore()?this.currentPageSize:this.totalSize()-this.current},n.ArrayPagingDataSource.prototype._refreshDataWindow=function(e){e=e||{},this.dataWindow=new Array(this._getSize());for(var t=0;t<this.dataWindow.length;t++)this.dataWindow[t]=this.data[this.current+t];this._refreshObservableDataWindow(),this._endIndex=this._startIndex+this.dataWindow.length-1,e.silent||this.handleEvent("sync",{data:this.dataWindow,startIndex:this.current})},n.ArrayPagingDataSource.prototype._refreshObservableDataWindow=function(){if(void 0!==this.observableDataWindow){this.observableDataWindow.removeAll();for(var e=0;e<this.dataWindow.length;e++)this.observableDataWindow.push(this.dataWindow[e])}},n.ArrayPagingDataSource.prototype.handleEvent=function(e,t){return n.ArrayPagingDataSource.superclass.handleEvent.call(this,e,t)},n.ArrayPagingDataSource.prototype.getWindow=function(){return this.dataWindow},n.ArrayPagingDataSource.prototype.getWindowObservable=function(){return void 0===this.observableDataWindow&&(this.observableDataWindow=ko.observableArray(),this._refreshObservableDataWindow()),this.observableDataWindow},n.ArrayPagingDataSource.prototype.getPage=function(){return this._page},n.ArrayPagingDataSource.prototype.setPage=function(e,t){t=t||{},e=parseInt(e,10);var i=n.ArrayPagingDataSource.superclass.handleEvent;try{i.call(this,n.PagingModel.EventType.BEFOREPAGE,{page:e,previousPage:this._page})}catch(e){return Promise.reject(null)}this.pageSize=null!=t.pageSize?t.pageSize:this.pageSize,t.startIndex=e*this.pageSize;var o=this._page;this._page=e,this._startIndex=t.startIndex;var s=this;return new Promise(function(e,r){s._fetchInternal(t).then(function(){i.call(s,n.PagingModel.EventType.PAGE,{page:s._page,previousPage:o}),e(null)},function(){s._page=o,s._startIndex=s._page*s.pageSize,r(null)})})},n.ArrayPagingDataSource.prototype.getStartItemIndex=function(){return this._startIndex},n.ArrayPagingDataSource.prototype.getEndItemIndex=function(){return this._endIndex},n.ArrayPagingDataSource.prototype.getPageCount=function(){var e=this.totalSize();return-1===e?-1:Math.ceil(e/this.pageSize)},n.ArrayPagingDataSource.prototype.fetch=function(e){var t=e||{};if(void 0!==t.pageSize&&void 0!==t.startIndex){if(!this._hasMore())return Promise.resolve();this.currentPageSize=t.startIndex+t.pageSize}return this._refreshDataWindow(null),Promise.resolve()},n.ArrayPagingDataSource.prototype._fetchInternal=function(e){var t=e||{};return void 0!==t.startIndex&&(this.current=t.startIndex),void 0!==t.pageSize&&(this.pageSize=t.pageSize,this.currentPageSize=t.pageSize),this._refreshDataWindow(e),Promise.resolve({data:this.dataWindow,startIndex:this.current})},n.ArrayPagingDataSource.prototype._hasMore=function(){return this.current+this.currentPageSize<this.totalSize()},n.ArrayPagingDataSource.prototype._setPageSize=function(e){this.pageSize=e,this.currentPageSize=e,this._refreshDataWindow(null)},n.ArrayPagingDataSource.prototype.totalSize=function(){return this.data.length},n.ArrayPagingDataSource.prototype.totalSizeConfidence=function(){return"actual"},n.ArrayPagingDataSource.prototype.getCapability=function(e){return null},n.ArrayTableDataSource=function(t,i){if(this.data=t||{},!(t instanceof Array)&&"function"!=typeof t&&"function"!=typeof t.subscribe){var o=n.TableDataSource._LOGGER_MSG._ERR_DATA_INVALID_TYPE_SUMMARY,s=n.TableDataSource._LOGGER_MSG._ERR_DATA_INVALID_TYPE_DETAIL;throw new Error(o+"\n"+s)}null!=i&&null!=i.idAttribute||e.info(n.ArrayTableDataSource._LOGGER_MSG._INFO_ARRAY_TABLE_DATASOURCE_IDATTR),n.ArrayTableDataSource.superclass.constructor.call(this,t,i),this._eventHandlers=[],this._rows={},null!=t&&(this._idAttribute=null,null!=i&&null!=i.idAttribute&&(this._idAttribute=i.idAttribute),this._data=t instanceof Array?t:t(),this._totalSize=this._data.length,this._subscribeObservableArray(t)),(null==i||"enabled"!==i.startFetch&&null!=i.startFetch)&&null!=i||(this._startFetchEnabled=!0)},n.Object.createSubclass(n.ArrayTableDataSource,n.TableDataSource,"oj.ArrayTableDataSource"),n.ArrayTableDataSource.prototype.comparator=null,n.ArrayTableDataSource.prototype.sortCriteria=null,n.ArrayTableDataSource.prototype.Init=function(){n.ArrayTableDataSource.superclass.Init.call(this)},n.ArrayTableDataSource.prototype.add=function(e,t){t=t||{},this._checkDataLoaded();var i=t.at;return this._addToRowSet(e,i,t)},n.ArrayTableDataSource.prototype.at=function(e,t){var i;return this._checkDataLoaded(),i=e<0||e>=this._rows.data.length?null:{data:this._rows.data[e],index:e,key:this._getId(this._rows.data[e])},new Promise(function(e){e(i)})},n.ArrayTableDataSource.prototype.change=function(e,t){t=t||{},this._checkDataLoaded();var i=t.silent,o={data:[],keys:[],indexes:[]};e instanceof Array||(e=[e]);for(var s=0;s<e.length;s++){var r=e[s];if(null!=r){var a=this._getId(r),l=this._getInternal(a,!1);o.data.push(this._wrapWritableValue(r)),o.keys.push(a),o.indexes.push(l.index),this._rows.data[l.index]=r}}return!i&&o.data.length>0&&n.TableDataSource.superclass.handleEvent.call(this,n.TableDataSource.EventType.CHANGE,o),Promise.resolve(o)},n.ArrayTableDataSource.prototype.fetch=function(e){return"init"!==(e=e||{}).fetchType||this._startFetchEnabled?this._fetchInternal(e):Promise.resolve()},n.ArrayTableDataSource.prototype.get=function(e,t){return this._checkDataLoaded(),Promise.resolve(this._getInternal(e,!0))},n.ArrayTableDataSource.prototype.getCapability=function(e){return"full"},n.ArrayTableDataSource.prototype.remove=function(e,t){return t=t||{},this._checkDataLoaded(),this._removeInternal(e,t)},n.ArrayTableDataSource.prototype.reset=function(e,t){(t=t||{}).previousRows=this._rows;var i=t.silent;return null!=e&&(this._data=e,this._subscribeObservableArray(e),this.data=e),this._rows={},this._totalSize=0,i||n.TableDataSource.superclass.handleEvent.call(this,n.TableDataSource.EventType.RESET,null),Promise.resolve()},n.ArrayTableDataSource.prototype.sort=function(e){null==e?e=this.sortCriteria:this.sortCriteria=e,e=e||{},this._checkDataLoaded();var t=this;return new Promise(function(i){var o=t._getComparator();t._rows.data.sort(function(e,i){return n.ArrayTableDataSource._sortFunc(e,i,o,t)}),t._sorted=!0;var s={header:e.key,direction:e.direction};n.TableDataSource.superclass.handleEvent.call(t,n.TableDataSource.EventType.SORT,s),i(s)})},n.ArrayTableDataSource.prototype.totalSize=function(){return this._totalSize},n.ArrayTableDataSource.prototype._addToRowSet=function(e,t,i){var o=(i=i||{}).silent,s={data:[],keys:[],indexes:[]};e instanceof Array||(e=[e]),null==t||t instanceof Array||(t=[t]);for(var r=0;r<e.length;r++){var a=e[r];if(null!=a){var l=this._getId(a);if(s.data.push(this._wrapWritableValue(a)),s.keys.push(l),!0===this._sorted&&this._rows.data.length>0)for(var u=0;u<this._rows.data.length;u++){if(n.ArrayTableDataSource._sortFunc(a,this._rows.data[u],this._getComparator(),this)<0){this._rows.data.splice(u,0,a),s.indexes.push(u);break}if(u===this._rows.data.length-1){this._rows.data.push(a),s.indexes.push(u+1);break}}else null==t?(this._rows.data.push(a),s.indexes.push(this._rows.data.length-1)):(this._rows.data.splice(t[r],0,a),s.indexes.push(t[r]));this._totalSize+=1,this._realignRowIndices()}}return!o&&s.data.length>0&&n.TableDataSource.superclass.handleEvent.call(this,n.TableDataSource.EventType.ADD,s),Promise.resolve(s)},n.ArrayTableDataSource.prototype._checkDataLoaded=function(){this._isDataLoaded()||(this.data instanceof Array||"function"!=typeof this.data||"function"!=typeof this.data.subscribe||(this._data=this.data()),this._rows=this._getRowArray(this._data),this._totalSize=this._data.length)},n.ArrayTableDataSource.prototype._isDataLoaded=function(){return null!=this._rows&&null!=this._rows.data},n.ArrayTableDataSource.prototype._fetchInternal=function(e){var t,i,o,s;e=e||{},this._startFetch(e),this._checkDataLoaded();try{t=e.pageSize>0?e.pageSize:-1,this._startIndex||(this._startIndex=0),this._startIndex=null==e.startIndex?this._startIndex:e.startIndex,s=n.ArrayTableDataSource._getEndIndex(this._rows,this._startIndex,t),i=[],o=[];for(var r=this._startIndex;r<=s;r++){var a=this._getId(this._rows.data[r]),l=this._wrapWritableValue(this._rows.data[r]);i[r-this._startIndex]=l,o[r-this._startIndex]=a}}catch(t){return this._endFetch(e,null,t),Promise.reject(t)}s<this._startIndex&&(this._startIndex=s+1),e.pageSize=t,e.startIndex=this._startIndex,e.refresh=!0;var u={data:i,keys:o,startIndex:this._startIndex};return this._endFetch(e,u,null),Promise.resolve(u)},n.ArrayTableDataSource.prototype._getInternal=function(e,t){for(var i=null,n=0;n<this._rows.data.length;n++){var o=this._rows.data[n];if(void 0!==o){var s=this._getId(o);if($.isArray(s)&&$.isArray(e)){if(s.length===e.length){for(var r=!0,a=0;a<e.length;a++)if(s[a]!==e[a]){r=!1;break}if(r){i=t?{data:this._wrapWritableValue(o),key:s,index:this._rows.indexes[n]}:{data:o,key:s,index:this._rows.indexes[n]};break}}}else if(s===e){i=t?{data:this._wrapWritableValue(o),key:s,index:this._rows.indexes[n]}:{data:o,key:s,index:this._rows.indexes[n]};break}}}return i},n.ArrayTableDataSource.prototype._getComparator=function(){var e=this.comparator;if(null==e){var t=this.sortCriteria.key,i=this.sortCriteria.direction;"ascending"===i?e=function(e){return $.isFunction(e[t])?e[t]():e[t]}:"descending"===i&&(e=function(e,i){var n,o;return $.isFunction(e[t])?(n=e[t](),o=i[t]()):(n=e[t],o=i[t]),n===o?0:n>o?-1:1})}return e},n.ArrayTableDataSource.prototype._realignRowIndices=function(){for(var e=0;e<this._rows.data.length;e++)this._rows.indexes[e]=e},n.ArrayTableDataSource.prototype._removeInternal=function(e,t){var i,o=(t=t||{}).silent,s={data:[],keys:[],indexes:[]};e instanceof Array||(e=[e]);var r=[];for(i=0;i<e.length;i++){var a=e[i];if(null!=a){var l=this._getId(a),u=this._getInternal(l,!1);null!=u&&r.push({data:u.data,key:u.key,index:u.index})}}for(r.sort(function(e,t){return e.index-t.index}),i=0;i<r.length;i++)s.data.push(r[i].data),s.keys.push(r[i].key),s.indexes.push(r[i].index);for(i=s.indexes.length-1;i>=0;i--)this._rows.data.splice(s.indexes[i],1),this._rows.indexes.splice(s.indexes[i],1),this._totalSize-=1;return this._realignRowIndices(),!o&&s.data.length>0&&n.TableDataSource.superclass.handleEvent.call(this,n.TableDataSource.EventType.REMOVE,s),Promise.resolve(s)},n.ArrayTableDataSource.prototype._setRow=function(e,t){this._rows[e]=t,t.index=e},n.ArrayTableDataSource.prototype._startFetch=function(e){e.silent||n.TableDataSource.superclass.handleEvent.call(this,n.TableDataSource.EventType.REQUEST,{startIndex:e.startIndex})},n.ArrayTableDataSource.prototype._endFetch=function(e,t,i){null!=i?n.TableDataSource.superclass.handleEvent.call(this,n.TableDataSource.EventType.ERROR,i):e.silent||n.TableDataSource.superclass.handleEvent.call(this,n.TableDataSource.EventType.SYNC,t)},n.ArrayTableDataSource.prototype._handleRowChange=function(e){e.startIndex=this._startIndex,n.TableDataSource.superclass.handleEvent.call(this,n.TableDataSource.EventType.CHANGE,e)},n.ArrayTableDataSource._compareKeys=function(e,t,i){if("descending"===i){if(e<t)return 1;if(t<e)return-1}else{if(e>t)return 1;if(t>e)return-1}return 0},n.ArrayTableDataSource._getEndIndex=function(e,t,i){var n=e.data.length-1;return i>0&&(n=(n=t+i-1)>e.data.length-1?e.data.length-1:n),n},n.ArrayTableDataSource._getKey=function(e,t){return"function"==typeof e[t]?e[t]():e[t]},n.ArrayTableDataSource.prototype._getRowArray=function(e){var t=e.length-1,i={data:[],indexes:[]};this._attributes=null;for(var n=0;n<=t;n++){for(var o={},s=e[n],r=Object.keys(s),a=0;a<r.length;a++){var l=r[a];o[l]=s[l],0===n&&(null==this._attributes&&(this._attributes=[]),this._attributes.push(l))}i.data[n]=o,i.indexes[n]=n}return i},n.ArrayTableDataSource.prototype._getId=function(e){var t,i,o=this._getIdAttr(e);if($.isArray(o)){var s;for(t=[],s=0;s<o.length;s++){if(!(o[s]in e))throw i=v.applyParameters(n.ArrayTableDataSource._LOGGER_MSG._ERR_ARRAY_TABLE_DATASOURCE_IDATTR_NOT_IN_ROW,[o[s]]),new Error(i);t[s]=n.ArrayTableDataSource._getKey(e,o[s])}}else{if(!(o in e))throw i=v.applyParameters(n.ArrayTableDataSource._LOGGER_MSG._ERR_ARRAY_TABLE_DATASOURCE_IDATTR_NOT_IN_ROW,[o]),new Error(i);t=n.ArrayTableDataSource._getKey(e,o)}return t},n.ArrayTableDataSource.prototype._getIdAttr=function(e){if(null!=this._idAttribute)return this._idAttribute;if(null==this._attributes){this._attributes=[];for(var t=Object.keys(e),i=0;i<t.length;i++){var n=t[i];this._attributes.push(n)}}return Object.prototype.hasOwnProperty.call(this._attributes,"id")?"id":this._attributes},n.ArrayTableDataSource._sortFunc=function(e,t,i,o){var s,r,a,l,u=o.sortCriteria.direction;if($.isFunction(i)){if(1===i.length){s=i.call(o,e),r=i.call(o,t);var d=n.StringUtils.isString(s)?s.split(","):[s],h=n.StringUtils.isString(r)?r.split(","):[r];for(a=0;a<d.length;a++)if(0!==(l=n.ArrayTableDataSource._compareKeys(d[a],h[a],u)))return l;return 0}return i.call(o,e,t)}if(n.StringUtils.isString(i)){var c=i.split(",");for(a=0;a<c.length;a++)if(s=n.ArrayTableDataSource._getKey(e,c[a]),r=n.ArrayTableDataSource._getKey(t,c[a]),0!==(l=n.ArrayTableDataSource._compareKeys(s,r,u)))return l}return 0},n.ArrayTableDataSource.prototype._subscribeObservableArray=function(e){if(!(e instanceof Array)){var t=this;e.subscribe(function(e){if(t._isDataLoaded()){var i,o,s,r,a=[],l=[];for(i=0;i<e.length;i++)for(s=e[i].index,r=e[i].status,o=0;o<e.length;o++)o!==i&&s===e[o].index&&r!==e[o].status&&a.indexOf(i)<0&&l.indexOf(i)<0&&("deleted"===r?(l.push(i),a.push(o)):(l.push(o),a.push(i)));var u=[];for(i=0;i<e.length;i++)if(a.indexOf(i)>=0){var d=t._getId(t._rows.data[e[i].index]),h=t._getId(e[i].value);null==h||n.Object.compareValues(h,d)||(t._rows.data[e[i].index]=e[i].value),u.push(e[i].value)}t.change(u,null),u=[];var c=[];for(i=0;i<e.length;i++)a.indexOf(i)<0&&l.indexOf(i)<0&&"deleted"===e[i].status&&u.push(e[i].value);for(t.remove(u,null),u=[],c=[],i=0;i<e.length;i++)a.indexOf(i)<0&&l.indexOf(i)<0&&"added"===e[i].status&&(u.push(e[i].value),c.push(e[i].index));t.add(u,{at:c})}},null,"arrayChange")}},n.ArrayTableDataSource.prototype._wrapWritableValue=function(e){for(var t={},i=Object.keys(e),o=0;o<i.length;o++)n.ArrayTableDataSource._defineProperty(t,e,i[o]);return t},n.ArrayTableDataSource._defineProperty=function(e,t,i){Object.defineProperty(e,i,{get:function(){return t[i]},set:function(e){t[i]=e},enumerable:!0})},n.ArrayTableDataSource._LOGGER_MSG={_INFO_ARRAY_TABLE_DATASOURCE_IDATTR:"idAttribute option has not been specified. Will default to using 'id' if the field exists. If not, will use all the fields.",_ERR_ARRAY_TABLE_DATASOURCE_IDATTR_NOT_IN_ROW:"Specified idAttribute {0} not in row data. Please ensure all specified idAttribute fields are in the row data or do not specify idAttribute and all fields will be used as id."};var yi=function(){function e(e,t,i){this.treeData=e,this.options=t,this._rootDataProvider=i,this.TreeAsyncIterator=function(){function e(e,t){this._parent=e,this._baseIterable=t}return e.prototype.next=function(){var e=this;return this._baseIterable[Symbol.asyncIterator]().next().then(function(t){for(var i=t.value.metadata,n=0;n<i.length;n++)i[n]=e._parent._getNodeMetadata(t.value.data[n]);return t})},e}(),this.TreeAsyncIterable=function(){return function(e,t){this._parent=e,this._asyncIterator=t,this[Symbol.asyncIterator]=function(){return this._asyncIterator}}}(),this._baseDataProvider=new n.ArrayDataProvider(e,t),this._mapKeyToNode=new Map,this._mapNodeToKey=new Map,this._mapArrayToSequenceNum=new Map,this._mapKoArrayToSubscriptions=new Map,null==i&&this._processTreeArray(e,[])}return e.prototype.containsKeys=function(e){return this.fetchByKeys(e).then(function(t){var i=new Set;return e.keys.forEach(function(e){null!=t.results.get(e)&&i.add(e)}),Promise.resolve({containsParameters:e,results:i})})},e.prototype.getCapability=function(e){return this._baseDataProvider.getCapability(e)},e.prototype.getTotalSize=function(){return this._baseDataProvider.getTotalSize()},e.prototype.isEmpty=function(){return this._baseDataProvider.isEmpty()},e.prototype.getChildDataProvider=function(t,i){var n=this._getNodeForKey(t);if(n){var o=this._getChildren(n);if(o)return new e(o,this.options,this._getRootDataProvider())}return null},e.prototype.fetchFirst=function(e){var t=this._baseDataProvider.fetchFirst(e);return new this.TreeAsyncIterable(this,new this.TreeAsyncIterator(this,t))},e.prototype.fetchByOffset=function(e){var t=this._baseDataProvider.fetchByOffset(e),i=this;return t.then(function(e){for(var t=e.results,n=[],o=0;o<t.length;o++){var s=t[o].metadata,r=t[o].data;s=i._getNodeMetadata(r),n.push({data:r,metadata:s})}return{done:e.done,fetchParameters:e.fetchParameters,results:n}})},e.prototype.fetchByKeys=function(e){var t=this,i=new Map;return e.keys.forEach(function(e){var n=t._getNodeForKey(e);n&&i.set(e,{metadata:{key:e},data:n})}),Promise.resolve({fetchParameters:e,results:i})},e.prototype._getChildren=function(e){var t=this.options&&this.options.childrenAttribute?this.options.childrenAttribute:"children";return this._getVal(e,t,!0)},e.prototype._getRootDataProvider=function(){return this._rootDataProvider?this._rootDataProvider:this},e.prototype._subscribeObservableArray=function(e,t){if(!ko.isObservable(e)||void 0===e.destroyAll)throw new Error("Invalid data type. ArrayTreeDataProvider only supports Array or observableArray.");var i=this,o=null,s=new Array(2);s[0]=e.subscribe(function(s){var r,a,l,u=[],d=[],h=[],c=[],p=[],_=null,m=null,g=null,f=[];for(r=0;r<s.length;r++){l=s[r].index,status=s[r].status;var v=i._getId(s[r].value);if(v)for(a=0;a<s.length;a++)if(a!=r&&l===s[a].index&&status!==s[a].status&&p.indexOf(r)<0&&f.indexOf(r)<0){var y=i._getId(s[a].value);n.Object.compareValues(v,y)&&("deleted"===status?(f.push(r),p.push(a)):(f.push(a),p.push(r)))}}for(r=0;r<s.length;r++)if("deleted"===s[r].status&&p.indexOf(r)<0&&f.indexOf(r)<0){var b=s[r].value,C=i._getKeyForNode(b);d.push(C),u.push(b),h.push(s[r].index),i._releaseNode(b)}if(d.length>0){c=d.map(function(e){return{key:e}});var S=new Set;d.map(function(e){S.add(e)}),g={data:u,indexes:h,keys:S,metadata:c}}u=[],d=[],h=[],c=[];var E=e(),T=[],D=[],A=[],I=[];for(r=0;r<s.length;r++)if("added"===s[r].status&&f.indexOf(r)<0){b=s[r].value;var O=i._processNode(b,t,e);p.indexOf(r)<0?(d.push(O.key),u.push(b),h.push(s[r].index),c.push({key:O.key})):(T.push(O.key),D.push(b),A.push(s[r].index),I.push({key:O.key}))}if(d.length>0){var w=new Set;d.map(function(e){w.add(e)});var R,x=new Set,L=[],N=[];R=i.options&&i.options.keyAttributes&&"siblings"!==i.options.keyAttributesScope?t.length>0?t[t.length-1]:null:t.length>0?t:null,h.map(function(e){var t;t=e>=E.length-1?"":i._getKeyForNode(E[e+1]),x.add(t),L.push(t),N.push(R)}),m={afterKeys:x,addBeforeKeys:L,parentKeys:N,data:u,indexes:h,keys:w,metadata:c}}if(T.length>0){var P=new Set;T.map(function(e){P.add(e)}),_={data:D,indexes:A,keys:P,metadata:I}}o=new n.DataProviderMutationEvent({add:m,remove:g,update:_})},null,"arrayChange"),s[1]=e.subscribe(function(e){o?i.dispatchEvent(o):i.dispatchEvent(new n.DataProviderRefreshEvent),o=null},null,"change"),this._mapKoArrayToSubscriptions.set(e,s)},e.prototype._unsubscribeObservableArray=function(e){if(ko.isObservable(e)&&void 0!==e.destroyAll){var t=this._mapKoArrayToSubscriptions.get(e);t&&(t[0].dispose(),t[1].dispose(),this._mapKoArrayToSubscriptions.delete(e))}},e.prototype._processTreeArray=function(e,t){var i,n=this;e instanceof Array?i=e:(this._subscribeObservableArray(e,t),i=e()),i.forEach(function(i,o){n._processNode(i,t,e)})},e.prototype._releaseTreeArray=function(e){var t,i=this;e instanceof Array?t=e:(this._unsubscribeObservableArray(e),t=e()),t.forEach(function(e,t){i._releaseNode(e)})},e.prototype._processNode=function(e,t,i){var n=this._createKeyObj(e,t,i);this._setMapEntry(n.key,e);var o=this._getChildren(e);return o&&this._processTreeArray(o,n.keyPath),n},e.prototype._releaseNode=function(e){var t=this._getKeyForNode(e);this._deleteMapEntry(t,e);var i=this._getChildren(e);i&&this._releaseTreeArray(i)},e.prototype._createKeyObj=function(e,t,i){var n=this._getId(e),o=t?t.slice():[];return null==n?(o.push(this._incrementSequenceNum(i)),n=o):(o.push(n),this.options&&"siblings"==this.options.keyAttributesScope&&(n=o)),{key:n,keyPath:o}},e.prototype._getId=function(e){var t,i=null!=this.options?this.options.keyAttributes:null;if(null!=i){var n;if(Array.isArray(i))for(t=[],n=0;n<i.length;n++)t[n]=this._getVal(e,i[n]);else t="@value"==i?this._getAllVals(e):this._getVal(e,i);return t}return null},e.prototype._getVal=function(e,t,i){if("string"==typeof t){var n=t.indexOf(".");if(n>0){var o=t.substring(0,n),s=t.substring(n+1),r=e[o];if(r)return this._getVal(r,s)}}return!0!==i&&"function"==typeof e[t]?e[t]():e[t]},e.prototype._getAllVals=function(e){var t=this;return Object.keys(e).map(function(i){return t._getVal(e,i)})},e.prototype._getNodeMetadata=function(e){return{key:this._getKeyForNode(e)}},e.prototype._getNodeForKey=function(e){return this._getRootDataProvider()._mapKeyToNode.get(JSON.stringify(e))},e.prototype._getKeyForNode=function(e){return this._getRootDataProvider()._mapNodeToKey.get(e)},e.prototype._setMapEntry=function(e,t){var i=this._getRootDataProvider();i._mapKeyToNode.set(JSON.stringify(e),t),i._mapNodeToKey.set(t,e)},e.prototype._deleteMapEntry=function(e,t){var i=this._getRootDataProvider();i._mapKeyToNode.delete(JSON.stringify(e)),i._mapNodeToKey.delete(t)},e.prototype._incrementSequenceNum=function(e){var t=this._getRootDataProvider(),i=t._mapArrayToSequenceNum.get(e)||0;return t._mapArrayToSequenceNum.set(e,i+1),i},e}();function bi(){}n.ArrayTreeDataProvider=yi,n.ArrayTreeDataProvider=yi,n.EventTargetMixin.applyMixin(yi),function(){ye.registerPreprocessor("oj-bind-dom",function(e){var t,i="ko _ojBindDom_:",o=function(e){if(null!=e){var t=n.__AttributeUtils.getExpressionInfo(e).expr;return null==t&&(t="'"+e+"'"),t}return null}(e.getAttribute("config"));o&&(i+=o);var s=document.createComment(i),r=document.createComment("/ko");t=[s];var a=e.parentNode;for(a.insertBefore(s,e);e.childNodes.length>0;){var l=e.childNodes[0];a.insertBefore(l,e),t.push(l)}return t.push(r),a.replaceChild(r,e),t})}(),ko.bindingHandlers._ojBindDom_={init:function(t,i,n,o,s){var r,a;function l(i){a||(a=c.getContext(t.parentNode).getBusyContext().addBusyState({description:"oj-bind-dom is waiting on config Promise resolution"})),i.then(function(n){if(i===r)try{ko.virtualElements.setDomNodeChildren(t,n.view||[]);var o=s.createChildContext(n.data,void 0,function(e){e.$parent=null,e.$parentContext=null,e.$parents=null});ko.applyBindingsToDescendants(o,t)}catch(t){e.error("An error %o occurred during view insertion and apply bindings for oj-bind-dom.",t)}finally{u()}},function(t){u(),e.error("An error %o occurred during view insertion and apply bindings for oj-bind-dom.",t)})}function u(){a&&(a(),a=null)}return ko.computed(function(){l(r=Promise.resolve(ko.utils.unwrapObservable(i())))},null,{disposeWhenNodeIsRemoved:t}),{controlsDescendantBindings:!0}}},ko.virtualElements.allowedBindings._ojBindDom_=!0,bi.registerPreprocessor=function(e,t){ye.registerPreprocessor(e,t)},bi.createBindingExpressionEvaluator=function(e,t){return ye.createBindingExpressionEvaluator(e,t)};var Ci={properties:{chroming:{type:"string",enumValues:["full","half","outlined"]},disabled:{type:"boolean",value:!1},display:{type:"string",enumValues:["all","icons"],value:"all"},translations:{type:"object",value:{}}},methods:{refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAction:{}},extension:{}},Si={properties:{chroming:{type:"string",enumValues:["full","half","outlined"]},disabled:{type:"boolean",value:!1},display:{type:"string",enumValues:["all","icons"],value:"all"},focusManagement:{type:"string",enumValues:["none","oneTabstop"],value:"oneTabstop"},translations:{type:"object",value:{}},value:{type:"Array<any>",writeback:!0}},methods:{refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}},Ei={properties:{chroming:{type:"string",enumValues:["full","half","outlined"]},disabled:{type:"boolean",value:!1},display:{type:"string",enumValues:["all","icons"],value:"all"},focusManagement:{type:"string",enumValues:["none","oneTabstop"],value:"oneTabstop"},translations:{type:"object",value:{}},value:{type:"any",writeback:!0}},methods:{refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}},Ti={properties:{chroming:{type:"string",enumValues:["full","half","outlined"]},disabled:{type:"boolean",value:!1},display:{type:"string",enumValues:["all","icons"],value:"all"},translations:{type:"object",value:{}}},methods:{refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAction:{}},extension:{}};!function(){var e,t,i="oj-button oj-component oj-enabled oj-default",o="oj-button-icons-only oj-button-icon-only oj-button-text-icons oj-button-text-icon-start oj-button-text-icon-end oj-button-text-only",s="oj-button-full-chrome oj-button-half-chrome oj-button-outlined-chrome",r={full:"oj-button-full-chrome",half:"oj-button-half-chrome",outlined:"oj-button-outlined-chrome"},a={button:["ojButtonset","ojToolbar"],buttonset:["ojToolbar"]};function l(e,t){c(e,s),e.classList.add(r[t])}function u(e,t){var i,n=e.name,o=e.form;if(n){var s=":radio[name='"+(n=n.replace(/'/g,"\\'"))+"']:oj-button";i=t?t.filter(s):o?$(o).find(s):$(s,e.ownerDocument).filter(function(){return!this.form})}else i=(t?t.filter(e):$(e)).filter(":oj-button");return i}function d(e,t,i){var n=function(e,t,i){for(var n=0;n<i.length;++n){var o=i[n];if(t.indexOf(o)>=0)for(;;e=e.parentNode){var s=w.__GetWidgetConstructor(e,o);if(s)return s}}return null}(t,i,a[e]);return n?n("option","chroming"):(_.parseJSONFromFontFamily("oj-"+e+"-option-defaults")||{}).chroming}function h(e,t){var i=e.className;if(i){for(var n=i.split(" "),o=t.split(" "),s=o.length;s>=0;s--)n.indexOf(o[s])>=0&&o.splice(s,1);o.length>0&&(e.className=i+" "+o.join(" "))}else e.className=t}function c(e,t){var i=e.className;if(i){for(var n=i.split(" "),o=t.split(" "),s=!1,r=0;r<o.length;r++){var a=n.indexOf(o[r]);a>=0&&(n.splice(a,1),s=!0)}s&&(e.className=n.join(" "))}}n.__registerWidget("oj.ojButton",$.oj.baseComponent,{defaultElement:"<button>",widgetEventPrefix:"oj",options:{chroming:"full",disabled:!1,display:"all",label:null,icons:{start:null,end:null},menu:null,action:null},_InitOptions:function(e,t){this._super(e,t),this._IsCustomElement()&&this._processSlots(),this._initButtonTypes(),this._IsCustomElement()||"disabled"in t||this.option("disabled",!!this.element[0].disabled,{_context:{internalSet:!0}}),"label"in t||(this.keepDomLabel=!0,this.option("label","inputPush"===this.type?this.buttonElement.val():this.buttonElement[0].innerHTML,{_context:{internalSet:!0}})),this._IsCustomElement()||!this.options.menu||t.icons&&void 0!==t.icons.end||this.option("icons.end","oj-component-icon oj-button-menu-dropdown-icon",{_context:{writeback:!0,internalSet:!0}})},_ComponentCreate:function(){this._super(),this.menuEventNamespace=this.eventNamespace+"menu",this._initButtonTypes2(),this.hasTitle=!!this.rootElement.getAttribute("title");var o=this,s=this._isToggle,r=s?"":"oj-active";h(this.rootElement,i),l(this.rootElement,this.options.chroming);var a=function(){r&&o.rootElement.classList.remove(r),o.rootElement.classList.remove("oj-hover"),o._toggleDefaultClasses()};if(n.DomUtils.isTouchSupported()&&this.buttonElement.bind("touchstart"+this.eventNamespace,function(){o._IsEffectivelyDisabled()||(r&&o.rootElement.classList.add(r),o._toggleDefaultClasses(),o.document.one("touchend",a))}).bind("touchend"+this.eventNamespace+" touchcancel"+this.eventNamespace,a),this.buttonElement.bind("mouseenter"+this.eventNamespace,function(){o._IsEffectivelyDisabled()||n.DomUtils.recentTouchEnd()||(this===e&&o.rootElement.classList.add("oj-active"),o.rootElement.classList.add("oj-hover"),o.rootElement.classList.remove("oj-default"),o.rootElement.classList.remove("oj-focus-only"))}).bind("mouseleave"+this.eventNamespace,function(){o.rootElement.classList.remove("oj-hover"),o._IsEffectivelyDisabled()||(r&&o.rootElement.classList.remove(r),o._toggleDefaultClasses())}),this._disabledClickHandler=function(e){o._IsEffectivelyDisabled()&&(e.preventDefault(),e.stopImmediatePropagation())},this._ojActionClickHandler=function(e){o._trigger("action",e,{})},this._IsCustomElement()?(this.rootElement.addEventListener("click",this._disabledClickHandler,!0),this.rootElement.addEventListener("click",this._ojActionClickHandler,!1)):this.buttonElement[0].addEventListener("click",this._disabledClickHandler,!0),this._focusable({element:$(this.rootElement),applyHighlight:!0,afterToggle:function(){o._toggleDefaultClasses()}}),s&&(this.element.bind("change"+this.eventNamespace,function(e){o._applyCheckedStateFromDom(!0);var t=o._getEnclosingContainerComponent("buttonset"),i=t&&t._getCheckedFromDom(t.$buttons);t&&void 0!==i&&t.option("checked",i,{_context:{writeback:!0,originalEvent:e,internalSet:!0}})}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(){o._IsEffectivelyDisabled()||(t=this,o.document.one("mouseup",function(){t=null}))}).bind("mouseup"+this.eventNamespace,function(){o._IsEffectivelyDisabled()||this===t&&o.element.focus()})),"checkbox"===this.type)this.buttonElement.bind("click"+this.eventNamespace,function(){if(o._IsEffectivelyDisabled())return!1}),this.element.bind("keyup"+this.eventNamespace,function(e){e.keyCode===$.ui.keyCode.ENTER&&(o._IsEffectivelyDisabled()||o.element.click())});else if("radio"===this.type)this.buttonElement.bind("click"+this.eventNamespace,function(){if(o._IsEffectivelyDisabled())return!1}),this.element.bind("keyup"+this.eventNamespace,function(e){e.keyCode===$.ui.keyCode.ENTER&&(o.element[0].checked||o._IsEffectivelyDisabled()||(o.element[0].checked=!0,o.element.change(),o.element.click()))});else if(this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){if(o._IsEffectivelyDisabled())return!1;1!==t.which||n.DomUtils.recentTouchEnd()||(o.rootElement.classList.add("oj-active"),o.rootElement.classList.remove("oj-default"),o.rootElement.classList.remove("oj-focus-only"),e=this,o.document.one("mouseup",function(){e=null}))}).bind("mouseup"+this.eventNamespace,function(){if(o._IsEffectivelyDisabled())return!1;o.rootElement.classList.remove("oj-active"),o._toggleDefaultClasses()}).bind("keydown"+this.eventNamespace,function(e){if(o._IsEffectivelyDisabled())return e.keyCode===$.ui.keyCode.TAB||e.keyCode===$.ui.keyCode.LEFT||e.keyCode===$.ui.keyCode.RIGHT;var t=e.keyCode===$.ui.keyCode.SPACE,i="anchor"===o.type;i&&t&&e.preventDefault(),(t&&!i||e.keyCode===$.ui.keyCode.ENTER)&&(o.rootElement.classList.add("oj-active"),o.rootElement.classList.remove("oj-default"),o.rootElement.classList.remove("oj-focus-only"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){o.rootElement.classList.remove("oj-active"),o._toggleDefaultClasses()}),"anchor"===this.type){var u=this.buttonElement[0].getAttribute("tabindex");(null===u||isNaN(u))&&this.buttonElement[0].setAttribute("tabindex","0")}this.options.disabled&&this._manageAnchorTabIndex(!1,!0),this._updateEffectivelyDisabled();var d=o._getEnclosingContainerComponent("buttonset");this._IsCustomElement()||d&&d._IsCustomElement()?this._setDisplayOptionOnDom():this._handleLabelAndIconsAtCreateTime(),this._setupMenuButton(null),this._toggleDefaultClasses(),this._childMutationObserver&&this._childMutationObserver.observe()},_NotifyContextMenuGesture:function(e,t,i){this._OpenContextMenu(t,i,{position:{of:"keyboard"===i?$(this.rootElement):t}})},_addMutationObserver:function(){if(!this._childMutationObserver&&this._IsCustomElement()){var e=this;this._childMutationObserver=new function(e,t){var i=e,o=t,s=n.BaseCustomElementBridge.getRegistered(e.tagName)?"nearestCustomElement":"none",r=new MutationObserver(function(e){var t=function(e){for(var t=[],o=0;o<e.length;o++)for(var r=e[o],a="childList"===r.type?r.target:r.target.parentNode;a;)a===i?(t.push(r),a=null):a="nearestCustomElement"!==s||n.BaseCustomElementBridge.isValidCustomElementName(a.localName)?null:a.parentNode;return t}(e);t.length>0&&o(t)});return{observe:function(){"none"!==s&&r.observe(i,{attributes:!0,childList:!0,subtree:!0,characterData:!0})},disconnect:function(){r.disconnect()}}}(this.rootElement,function(t){t.forEach(function(t){var i;if("childList"===t.type){var n=t.addedNodes&&t.addedNodes[0],o=t.target;if(n&&3===n.nodeType&&o&&1===o.nodeType&&o.classList.contains("oj-button-label")){e._childMutationObserver.disconnect(),i=!0;var s=e.buttonElement[0].querySelector(".oj-button-text");s&&(s.textContent=n.textContent),n.parentNode.removeChild(n)}}else"characterData"===t.type&&(e._childMutationObserver.disconnect(),i=!0);i&&(e._setDisplayOptionOnDom(),e._childMutationObserver.observe())})})}},_removeMutationObserver:function(){this._childMutationObserver&&(this._childMutationObserver.disconnect(),this._childMutationObserver=null)},_processSlots:function(){var e,t=this,i=this.element[0],o=i.parentNode,s="OJ-MENU-BUTTON"===o.tagName,r=n.BaseCustomElementBridge.getSlotMap(o);e=s?["startIcon","","endIcon","menu"]:["startIcon","","endIcon"],$.each(e,function(e,t){r[t]&&""!==t&&$.each(r[t],function(e,t){i.appendChild(t)})});for(var a=o.children,l=a.length-1;l>=0;l--){var u=a[l];u!==i&&"contextMenu"!==u.getAttribute("slot")&&o.removeChild(u)}var d=n.BaseCustomElementBridge.getSlotMap(i);$.each(e,function(e,n){d[n]&&$.each(d[n],function(e,o){if(i.appendChild(o),""===n){var s=o,r=s;3===s.nodeType&&(r=document.createElement("span"),s.parentNode.insertBefore(r,s),r.appendChild(s)),r.classList.add("oj-button-text"),t._setTextSpanIdAndLabelledBy(r)}else if("startIcon"===n)o.classList.add("oj-button-icon"),o.classList.add("oj-start");else if("endIcon"===n)o.classList.add("oj-button-icon"),o.classList.add("oj-end");else if("menu"===n&&($(o).uniqueId(),t.menuSlot="#"+o.id,void 0===d.endIcon)){var a=document.createElement("span");a.className="oj-button-icon oj-end oj-component-icon oj-button-menu-dropdown-icon",a.setAttribute("slot","endIcon"),i.insertBefore(a,o)}})});var h=document.createElement("div");for(h.className="oj-button-label";i.hasChildNodes();)h.appendChild(i.firstChild);i.appendChild(h)},_getMenuNode:function(){return this._IsCustomElement()?this.menuSlot:this.options.menu},_initButtonTypes:function(){var e=this.element[0];if("INPUT"===e.tagName&&"checkbox"===e.type)this.type="checkbox",this._isToggle=!0;else if("INPUT"===e.tagName&&"radio"===e.type)this.type="radio",this._isToggle=!0;else if("INPUT"!==e.tagName||"button"!==e.type&&"submit"!==e.type&&"reset"!==e.type)if("BUTTON"===e.tagName)this.type="button";else{if("A"!==e.tagName)throw new Error("JET Button not supported on this element type");this.type="anchor"}else this.type="inputPush";if(this._isToggle){var t="label[for='"+this.element[0].getAttribute("id")+"']";this.buttonElement=this.element.siblings().filter(t)}else this.buttonElement=this.element},_initButtonTypes2:function(){var e=this.element[0];if(this._isToggle){this.buttonElement[0].classList.add("oj-button-label"),e.classList.add("oj-button-input"),e.classList.add("oj-helper-hidden-accessible"),e.setAttribute("data-oj-internal","");var t=document.createElement("span");this.element[0].parentNode.insertBefore(t,this.buttonElement[0]),t.appendChild(this.buttonElement[0]),t.appendChild(this.element[0]),this.rootElement=this.element[0].parentNode,this.rootElement.classList.add("oj-button-jqui"),this.rootElement.classList.add("oj-button-toggle"),e.checked&&(this.rootElement.classList.add("oj-selected"),this.rootElement.classList.remove("oj-default"),this.rootElement.classList.remove("oj-focus-only"))}else this._IsCustomElement()?(this.rootElement=this.element[0].parentNode,e.classList.add("oj-button-button")):(this.rootElement=this.element[0],e.classList.add("oj-button-jqui"))},widget:function(){return $(this.rootElement)},_destroy:function(){this._removeMenuBehavior(this._getMenuNode()),this.buttonElement[0].removeEventListener("click",this._disabledClickHandler,!0),this.buttonElement[0].removeEventListener("click",this._ojActionClickHandler,!1);var e=this.element[0];e.classList.remove("oj-helper-hidden-accessible"),e.removeAttribute("aria-labelledby"),this.element.removeUniqueId(),this.options.disabled&&this._manageAnchorTabIndex(!0,!1);var r=this._isToggle;r||c(this.rootElement,i+" oj-button-jqui oj-hover oj-active oj-selected "+o+" "+s);var a=this.buttonElement[0].querySelector(".oj-button-text");a&&(this.buttonElement[0].innerHTML=a.innerHTML),r?(this.buttonElement[0].classList.remove("oj-button-label"),n.DomUtils.unwrap(this.element)):this.hasTitle||this.rootElement.removeAttribute("title"),t===this.buttonElement[0]&&(t=null),this._removeMutationObserver()},_NotifyDetached:function(){this._super(),this._toggleDefaultClasses()},__setAncestorComponentDisabled:function(e){this._super(e),this._updateEffectivelyDisabled()},_updateEffectivelyDisabled:function(){var t=this.element[0],i=this._IsEffectivelyDisabled();if(i?(this.rootElement.classList.add("oj-disabled"),this.rootElement.classList.remove("oj-enabled")):(this.rootElement.classList.remove("oj-disabled"),this.rootElement.classList.add("oj-enabled")),"anchor"!==this.type?(t.disabled=i,this.rootElement.removeAttribute("aria-disabled")):(t.setAttribute("aria-disabled",i),this._IsCustomElement()&&this.rootElement.removeAttribute("aria-disabled")),i){var n=this.widget()[0].classList;n.remove("oj-active"),n.remove("oj-default"),n.remove("oj-focus-only"),n.remove("oj-hover"),n.remove("oj-focus"),n.remove("oj-focus-highlight"),e=null,this._dismissMenu(this._getMenuNode())}else this._toggleDefaultClasses()},_setOption:function(e,t,i){var n=this.options[e];switch(this._super(e,t,i),e){case"chroming":l(this.rootElement,t);break;case"disabled":this._manageAnchorTabIndex(n,t),this._updateEffectivelyDisabled();var o=this._getEnclosingContainerElement("toolbar");o.length&&(this._IsCustomElement()?o[0].refresh():o.ojToolbar("refresh"));break;case"label":this._setLabelOption();break;case"display":"inputPush"!==this.type&&this._setDisplayOptionOnDom();break;case"icons":this._setIconsOption(!0);break;case"menu":this._setupMenuButton(n)}},refresh:function(){this._super(),this._ancestorDisabled&&!this._getEnclosingContainerElement("buttonset").length&&this.__setAncestorComponentDisabled(!1),l(this.rootElement,this.options.chroming)},_applyCheckedStateFromDom:function(e){"radio"===this.type?(e?u(this.element[0]):this.element).each(function(){var e=$(this).data("oj-ojButton");this.checked?(e.rootElement.classList.add("oj-selected"),e.rootElement.classList.remove("oj-default"),e.rootElement.classList.remove("oj-focus-only")):(e.rootElement.classList.remove("oj-selected"),e._toggleDefaultClasses())}):"checkbox"===this.type&&(this.element[0].checked?(this.rootElement.classList.add("oj-selected"),this.rootElement.classList.remove("oj-default"),this.rootElement.classList.remove("oj-focus-only")):(this.rootElement.classList.remove("oj-selected"),this._toggleDefaultClasses()))},_handleLabelAndIconsAtCreateTime:function(){if("inputPush"===this.type)this._setLabelOnDomOfSpanlessButton();else{var e=this._setLabelOnDomAtCreateTime(),t=this._setIconOnDom(!0),i=this._setIconOnDom(!1);this._setDisplayOptionOnDom(e,t,i)}},_setLabelOnDomAtCreateTime:function(){var e=this.buttonElement[0],t=document.createElement("span");if(t.className="oj-button-text",this.keepDomLabel)for(;e.hasChildNodes();)t.appendChild(e.firstChild);else e.innerHTML="",t.textContent=this.options.label;if("button"===this.type){var i=document.createElement("div");i.className="oj-button-label",i.appendChild(t),this.element[0].appendChild(i)}else e.appendChild(t);return"button"!==this.type&&"anchor"!==this.type||this.element[0].hasAttribute("aria-label")||this.element[0].hasAttribute("aria-labelledby")||this._setTextSpanIdAndLabelledBy(t),$(t)},_setTextSpanIdAndLabelledBy:function(e){$(e).uniqueId(),this.element[0].setAttribute("aria-labelledby",e.getAttribute("id"))},_setLabelOption:function(){if("inputPush"===this.type)this._setLabelOnDomOfSpanlessButton();else{var e=this.buttonElement[0].querySelector(".oj-button-text");e.textContent=this.options.label,this._setDisplayOptionOnDom($(e))}},_setLabelOnDomOfSpanlessButton:function(){this.options.label&&this.element.val(this.options.label)},_setIconsOption:function(){if("inputPush"!==this.type){var e=this._setIconOnDom(!0),t=this._setIconOnDom(!1);this._setDisplayOptionOnDom(void 0,e,t)}},_setIconOnDom:function(e){var t,i,n,o,s=this.buttonElement[0];"button"===this.type&&(s=this.element.children("div.oj-button-label")[0]),e?(t=".oj-button-icon.oj-start",i="oj-button-icon oj-start",n=this.options.icons.start,o="_lastStartIcon"):(t=".oj-button-icon.oj-end",i="oj-button-icon oj-end",n=this.options.icons.end,o="_lastEndIcon");var r,a,l=s.querySelectorAll(t);if(n)if(l.length){var u=this[o];for(r=0;r<l.length;r++)c(a=l[r],u),h(a,n)}else{var d=document.createElement("span");d.className=i+" "+n,e?s.insertBefore(d,s.firstChild):s.appendChild(d)}else for(r=0;r<l.length;r++)(a=l[r]).parentNode.removeChild(a);return this[o]=n,!!n},_setDisplayOptionOnDom:function(e,t,i){var n=this.buttonElement.children(".oj-button-label");if(!n.length){var s=this._getEnclosingContainerComponent("buttonset");n=this._IsCustomElement()||s&&s._IsCustomElement()?this.buttonElement.children("oj-option"):this.buttonElement}void 0===e&&(e=n.children(".oj-button-text")),void 0===t&&(t=!!this.options.icons.start||n.children("[slot='startIcon']").length),void 0===i&&(i=!!this.options.icons.end||n.children("[slot='endIcon']").length);var r,a=t&&i,l=t||i,u="icons"===this.options.display;if(l&&u){if(e[0]&&e[0].classList.add("oj-helper-hidden-accessible"),!this.hasTitle){var d=e[0]?e[0].textContent:"";this.rootElement.setAttribute("title",$.trim(d))}this._addMutationObserver()}else e[0]&&e[0].classList.remove("oj-helper-hidden-accessible"),this.hasTitle||this.rootElement.removeAttribute("title"),this._removeMutationObserver();r=l?u?a?"oj-button-icons-only":"oj-button-icon-only":a?"oj-button-text-icons":t?"oj-button-text-icon-start":"oj-button-text-icon-end":"oj-button-text-only",c(this.rootElement,o),this.rootElement.classList.add(r)},_manageAnchorTabIndex:function(e,t){if(!e!=!t&&"anchor"===this.type&&!this._getEnclosingContainerElement("buttonset").length&&!this._getEnclosingContainerElement("toolbar").length){var i=this.element[0];if(t){var n=i.getAttribute("tabindex");this._oldAnchorTabIndex=this._isInteger(Number(n))?n:null,i.setAttribute("tabindex",-1)}else null==this._oldAnchorTabIndex?i.removeAttribute("tabindex"):i.setAttribute("tabindex",this._oldAnchorTabIndex)}},_isInteger:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},_selectorMap:{buttonset:".oj-buttonset",toolbar:".oj-toolbar"},_constructorMap:{buttonset:"ojButtonset",toolbar:"ojToolbar"},_getEnclosingContainerElement:function(e){return $(this.rootElement).closest(this._selectorMap[e])},_getEnclosingContainerComponent:function(e){var t=this._getEnclosingContainerElement(e)[0],i=w.__GetWidgetConstructor(t,this._constructorMap[e]);return i&&i("instance")},_setupMenuButton:function(e){if(this._getMenuNode()&&"INPUT"===this.element[0].tagName)throw new Error("Menu Button functionality is not supported on input elements.");if(this._removeMenuBehavior(e),this._getMenuNode()){var t=this;this.element.attr("aria-haspopup",!0).on("keydown"+this.menuEventNamespace,function(e){if(e.which===$.ui.keyCode.DOWN)return t._showMenu(e,"firstItem"),e.preventDefault(),!0;if(e.which===$.ui.keyCode.ESCAPE){var i=!t.rootElement.classList.contains("oj-selected");return t._dismissMenu(t._getMenuNode(),e),i}return!0}).on("click"+this.menuEventNamespace,function(e){var i=t._getMenu();return i.__spaceEnterDownInMenu||t._showMenu(e,"firstItem"),i.__spaceEnterDownInMenu=!1,e.preventDefault(),!0})}},_removeMenuBehavior:function(e){this.element.removeAttr("aria-haspopup").off(this.menuEventNamespace),this._dismissMenu(e),$(e).off(this.menuEventNamespace),this._menuListenerSet=!1},_getMenu:function(){var e=this._getMenuOnly(this._getMenuNode());if(!e)throw new Error('JET Button: "menu" option specified, but does not reference a valid JET Menu.');if(!this._menuListenerSet){var t,i=this;t=e._IsCustomElement()?"ojClose":"ojclose",e.widget().on(t+this.menuEventNamespace,function(e){i._menuDismissHandler(e)}),this._menuListenerSet=!0}return e},_getMenuOnly:function(e){var t=w.__GetWidgetConstructor($(e)[0],"ojMenu");return t&&t("instance")},_showMenu:function(e,t){if(!this._IsEffectivelyDisabled()){var i=this._getMenu(),n=i.widget();i.open(e,{launcher:this.element,initialFocus:t}),n.is(":visible")&&(this._menuVisible=!0,n[0].getAttribute("aria-label")||n[0].getAttribute("aria-labelledby")||(this.element.uniqueId(),this._setAriaLabelledBy=!0,n[0].setAttribute("aria-labelledby",this.element[0].getAttribute("id"))),this.rootElement.classList.add("oj-selected"),this.rootElement.classList.remove("oj-default"),this.rootElement.classList.remove("oj-focus-only"))}},_dismissMenu:function(e,t){if(this._menuVisible){var i=this._getMenuOnly(e);i&&(i.__collapseAll(t,!0),i.__dismiss(t))}},_menuDismissHandler:function(){this._setAriaLabelledBy&&($(this._getMenuNode()).removeAttr("aria-labelledby"),this._setAriaLabelledBy=!1),this.rootElement.classList.remove("oj-selected"),this._toggleDefaultClasses(),this._menuVisible=!1},_toggleDefaultClasses:function(){var e,t;if($(this.rootElement).is(".oj-hover, .oj-active, .oj-selected, .oj-disabled"))e=!1,t=!1;else{var i=$(this.rootElement).is(".oj-focus");e=!i,t=i}e?this.rootElement.classList.add("oj-default"):this.rootElement.classList.remove("oj-default"),t?this.rootElement.classList.add("oj-focus-only"):this.rootElement.classList.remove("oj-focus-only")}}),n.__registerWidget("oj.ojButtonset",$.oj.baseComponent,{_items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a",widgetEventPrefix:"oj",options:{checked:null,chroming:"full",display:"all",focusManagement:"oneTabstop"},_setCheckedOnDom:function(e,t){var i,n=$.type(e),o=this.element[0];if((i="OJ-BUTTONSET-MANY"===o.tagName||t.length>0&&t.filter("input[type=checkbox]").length===t.length)&&"array"!==n)throw new Error("Invalid 'checked' value set on JET Buttonset: "+e);if(!(this._setCheckedOnButtons(e,t,n,i)||null===e||this._IsCustomElement()&&t.length!==o.children.length))throw new Error("Invalid 'checked' value set on JET Buttonset: "+e)},_setCheckedOnButtons:function(e,t,i,n){var o=this._shallowCompare(e,t,n);return this._shouldDeepCompare(e,n,o)&&(o=this._deepCompare(e,t,n,o)),n?o===e.length:1===o},_shallowCompare:function(e,t,i){var n=this,o=0;return t.each(function(){var t=n._getInputValue(this);(i?e.indexOf(t)>-1:t===e)?(this.checked=!0,o+=1):this.checked=!1}),o},_shouldDeepCompare:function(e,t,i){return t?i!==e.length:!i},_deepCompare:function(e,t,i,n){var o=n,s=this;return t.each(function(){var t=s._getInputValue(this);if(i)for(var n=0;n<e.length;n++)s._deepCompareValues(t,e[n])&&(this.checked=!0,o+=1);else s._deepCompareValues(t,e)&&(this.checked=!0,o+=1)}),o},_deepCompareValues:function(e,t){return"object"===$.type(e)&&e.ojCompareValues?0===e.ojCompareValues(e,t):n.Object.compareValues(e,t)},_getInputValue:function(e){return this._IsCustomElement()?this._getOjOptionFromInput(e).value:e.value},_getOjOptionFromInput:function(e){return e.previousElementSibling.children[0]},_getCheckedFromDom:function(e){var t,i=null,n=null,o=this;return e.each(function(){if("input"!==this.tagName.toLowerCase())return t=void 0,!1;var e,s,r=this.type.toLowerCase();if("radio"===r)e=!0,s=this.name.toLowerCase();else{if("checkbox"!==r)return t=void 0,!1;e=!1,s=null}if(void 0!==t&&(e!==i||s!==n||i&&!n))return t=void 0,!1;var a=o._getInputValue(this);void 0===t?(t=e?this.checked?a:null:this.checked?[a]:[],i=e,n=s):this.checked&&(i?t=a:t.push(a))}),t},_CompareOptionValues:function(e,t,i){return"checked"===e?t===i||"array"===$.type(t)&&"array"===$.type(i)&&this._compareArraysAsSets(t,i):this._superApply(arguments)},_compareArraysAsSets:function(e,t){return!e.some(function(e){return t.indexOf(e)<0})&&!t.some(function(t){return e.indexOf(t)<0})},_removeNonOjOptions:function(){this.element.children(":not(oj-option)").remove()},_processOjOptions:function(){var e=this,t=this.element[0].querySelectorAll("oj-option");$.each(t,function(t,i){i.customOptionRenderer=e._customOptionRenderer.bind(e)})},_customOptionRenderer:function(e){this._removeOptionDecoration(e),this._addOptionDecoration(e)},_addOptionDecoration:function(e){this._addOptionClasses(e);var t="OJ-BUTTONSET-ONE"===this.element[0].tagName,i=t?"radio":"checkbox",n=e.value,o=e.disabled,s=document.createElement("input"),r=document.createElement("label");$(s).uniqueId(),s.value=n,s.type=i,s.disabled=o;var a=s.id;r.htmlFor=a,t&&(this._name||(this._name="_n_"+a),s.name=this._name),e.parentNode.insertBefore(r,e),r.appendChild(e),r.parentNode.insertBefore(s,r.nextElementSibling),this._setup(!1),this._setCheckedOnDom(this.options.checked,this.$buttons),this.$buttons.each(function(){$(this).data("oj-ojButton")._applyCheckedStateFromDom(!1)})},_removeOptionDecoration:function(e){var t=e.parentNode;if("LABEL"===t.tagName){this._removeOptionClasses(e);var i=$(t).siblings(".oj-button-input");i.ojButton("destroy"),i.removeUniqueId(),i.remove(),t.parentNode.insertBefore(e,t),t.parentNode.removeChild(t)}},_addOptionClasses:function(e){var t=n.BaseCustomElementBridge.getSlotMap(e),i=t[""]?t[""]:null,o=t.startIcon?t.startIcon[0]:null,s=t.endIcon?t.endIcon[0]:null;if(o&&(o.classList.add("oj-button-icon"),o.classList.add("oj-start")),i)for(var r=0;r<i.length;r++){var a=i[r],l=a;3===a.nodeType&&(l=document.createElement("span"),a.parentNode.insertBefore(l,a),l.appendChild(a)),l.classList.add("oj-button-text")}s&&(s.classList.add("oj-button-icon"),s.classList.add("oj-end"))},_removeOptionClasses:function(e){var t=n.BaseCustomElementBridge.getSlotMap(e),i=t[""]?t[""]:null,o=t.startIcon?t.startIcon[0]:null,s=t.endIcon?t.endIcon[0]:null;if(o&&(o.classList.remove("oj-button-icon"),o.classList.remove("oj-start")),i)for(var r=0;r<i.length;r++)i[r].classList.remove("oj-button-text");s&&(s.classList.remove("oj-button-icon"),s.classList.remove("oj-end"))},_InitOptions:function(e,t){if(this._super(e,t),this.$buttons=this.element.find(this._items),!("checked"in t)){this.initCheckedFromDom=!0;var i=this._getCheckedFromDom(this.$buttons);"array"!==$.type(i)&&"OJ-BUTTONSET-MANY"!==this.element[0].tagName||(this.options.checked=[]),void 0!==i&&this.option("checked",i,{_context:{internalSet:!0}})}},_ComponentCreate:function(){this._super();var e=this.element[0];e.setAttribute(w._OJ_CONTAINER_ATTR,this.widgetName),e.classList.add("oj-buttonset"),e.classList.add("oj-component"),this._setRole(this.options.focusManagement),this._IsCustomElement()&&(this._removeNonOjOptions(),this._processOjOptions()),this._setup(!0)},_NotifyContextMenuGesture:function(e,t,i){var n=this.element.find(":oj-button[tabindex=0]");this._OpenContextMenu(t,i,{launcher:n,position:{of:"keyboard"===i?n.ojButton("widget"):t}})},_propagateDisabled:function(e){var t=!!e;this.$buttons.each(function(){$(this).data("oj-ojButton").__setAncestorComponentDisabled(t)})},_setRole:function(e){var t=this.element[0];"oneTabstop"===e?t.setAttribute("role","toolbar"):t.removeAttribute("role")},_setOption:function(e,t,i){this._superApply(arguments),"disabled"===e?(this._propagateDisabled(t),this._refreshTabStop()):"checked"===e?(this._setCheckedOnDom(t,this.$buttons),this.$buttons.each(function(){$(this).data("oj-ojButton")._applyCheckedStateFromDom(!1)})):"focusManagement"===e?this._setRole(t):"chroming"===e?(l(this.element[0],t),this.$buttons.ojButton("refresh")):"display"===e&&this.$buttons.ojButton("option",e,t)},refresh:function(){this._super(),this._IsCustomElement()&&this._processOjOptions(),this._setup(!1)},_setup:function(e){var t=this,i=this.element[0];this.isRtl="rtl"===this._GetReadingDirection(),l(i,this.options.chroming),!e||this.initCheckedFromDom||this._IsCustomElement()||this._setCheckedOnDom(this.options.checked,this.$buttons),e||(this.$buttons=this.element.find(this._items)),this.$buttons.length>1?i.classList.add("oj-buttonset-multi"):i.classList.remove("oj-buttonset-multi"),this.$buttons.filter(":oj-button").ojButton("refresh").each(function(){$(this).data("oj-ojButton")._applyCheckedStateFromDom(!1)}).end().not(":oj-button").ojButton({display:this.options.display}).end();for(var n=0,o=this.$buttons.length;n<o;n++){var s=this.$buttons.eq(n).ojButton("widget")[0];s.classList.remove("oj-buttonset-first"),s.classList.remove("oj-buttonset-last"),0===n?s.classList.add("oj-buttonset-first"):n===o-1&&s.classList.add("oj-buttonset-last")}this._propagateDisabled(this.options.disabled),"oneTabstop"===this.options.focusManagement&&(this.$buttons.unbind("keydown"+this.eventNamespace).bind("keydown"+this.eventNamespace,function(e){t._handleKeyDown(e,$(this))}).unbind("click"+this.eventNamespace).bind("click"+this.eventNamespace,function(){$(this).data("oj-ojButton")._IsEffectivelyDisabled()||t._setTabStop($(this))}).unbind("focus"+this.eventNamespace).bind("focus"+this.eventNamespace,function(){t._setTabStop($(this))}),this.$enabledButtons=this.$buttons.filter(function(){return!$(this).data("oj-ojButton")._IsEffectivelyDisabled()}),this._initTabindexes(e))},_refreshTabStop:function(){"oneTabstop"===this.options.focusManagement&&(this.$enabledButtons=this.$buttons.filter(function(){return!$(this).data("oj-ojButton")._IsEffectivelyDisabled()}),this._initTabindexes(!1))},_initTabindexes:function(e){var t,i=$(this._lastTabStop);this._lastTabStop=void 0,this.$buttons.attr("tabindex","-1"),t=e||!i.is(this.$enabledButtons)?this.$enabledButtons.first():i,this._setTabStop(t)},_mapToTabbable:function(e){var t=this.$enabledButtons;return e.map(function(e,i){if("radio"!==i.type||i.checked||""===i.name)return i;var n=u(i,t).filter(":checked");return n.length?n[0]:i})},_setTabStop:function(e){var t=(e=this._mapToTabbable(e))[0],i=this._lastTabStop;t!==i&&(i&&i.setAttribute("tabindex","-1"),e[0]&&e[0].setAttribute("tabindex","0"),this._lastTabStop=t)},_handleKeyDown:function(e,t){switch(e.which){case $.ui.keyCode.UP:case $.ui.keyCode.DOWN:if("radio"!==t[0].getAttribute("type"))break;case $.ui.keyCode.LEFT:case $.ui.keyCode.RIGHT:e.preventDefault();var i=this.$enabledButtons,n=i.length;if(n<2)break;var o=(i.index(t)+(e.which===$.ui.keyCode.DOWN||e.which===$.ui.keyCode.RIGHT!==this.isRtl?1:-1)+n)%n;i.eq(o).focus()}},_destroy:function(){var e=this.element[0];c(e,"oj-buttonset oj-component "+s),e.removeAttribute(w._OJ_CONTAINER_ATTR),e.removeAttribute("role"),"oneTabstop"===this.options.focusManagement&&this.$buttons.attr("tabindex","0"),this.$buttons.map(function(){return $(this).ojButton("widget")[0]}).removeClass("oj-buttonset-first oj-buttonset-last").end().ojButton("destroy")}}),w.setDefaultOptions({ojButton:{chroming:w.createDynamicPropertyGetter(function(e){return d("button",e.element,e.containers)})},ojButtonset:{chroming:w.createDynamicPropertyGetter(function(e){return d("buttonset",e.element,e.containers)})}})}(),Ci.extension._WIDGET_NAME="ojButton",Ci.extension._GLOBAL_TRANSFER_ATTRS=["href"],n.CustomElementBridge.register("oj-button",{metadata:Ci,innerDomFunction:function(e){return e.getAttribute("href")?"a":"button"}}),Ti.extension._WIDGET_NAME="ojButton",Ti.extension._GLOBAL_TRANSFER_ATTRS=["href"],n.CustomElementBridge.register("oj-menu-button",{metadata:Ti,innerDomFunction:function(e){return e.getAttribute("href")?"a":"button"}}),Ei.extension._WIDGET_NAME="ojButtonset",Ei.extension._ALIASED_PROPS={value:"checked"},n.CustomElementBridge.register("oj-buttonset-one",{metadata:Ei}),Si.extension._WIDGET_NAME="ojButtonset",Si.extension._ALIASED_PROPS={value:"checked"},n.CustomElementBridge.register("oj-buttonset-many",{metadata:Si});var Di={properties:{animationOnDataChange:{type:"string",enumValues:["auto","none","slideToLeft","slideToRight"],value:"none"},animationOnDisplay:{type:"string",enumValues:["alphaFade","auto","none","zoom"],value:"none"},as:{type:"string",value:""},coordinateSystem:{type:"string",enumValues:["cartesian","polar"],value:"cartesian"},data:{type:"oj.DataProvider"},dataCursor:{type:"string",enumValues:["auto","off","on"],value:"auto"},dataCursorBehavior:{type:"string",enumValues:["auto","smooth","snap"],value:"auto"},dataCursorPosition:{type:"object",writeback:!0,properties:{x:{type:"number|string"},y:{type:"number"},y2:{type:"number"}}},dataLabel:{type:"function",properties:{id:{type:"any"},series:{type:"string"},group:{type:"string|Array<string>"},value:{type:"number"},targetValue:{type:"number"},x:{type:"number|string"},y:{type:"number"},z:{type:"number"},low:{type:"number"},high:{type:"number"},open:{type:"number"},close:{type:"number"},volume:{type:"number"},label:{type:"string"},totalValue:{type:"number"},data:{type:"object"},itemData:{type:"object"},seriesData:{type:"object"},groupData:{type:"object"},dimensions:{type:"object",properties:{width:{type:"number"},height:{type:"number"}}},componentElement:{type:"Element"}}},dnd:{type:"object",properties:{drag:{type:"object",properties:{groups:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},drag:{type:"function"},dragEnd:{type:"function"},dragStart:{type:"function"}}},items:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},drag:{type:"function"},dragEnd:{type:"function"},dragStart:{type:"function"}}},series:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},drag:{type:"function"},dragEnd:{type:"function"},dragStart:{type:"function"}}}}},drop:{type:"object",properties:{legend:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragLeave:{type:"function"},dragOver:{type:"function"},drop:{type:"function"}}},plotArea:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragLeave:{type:"function"},dragOver:{type:"function"},drop:{type:"function"}}},xAxis:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragLeave:{type:"function"},dragOver:{type:"function"},drop:{type:"function"}}},y2Axis:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragLeave:{type:"function"},dragOver:{type:"function"},drop:{type:"function"}}},yAxis:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragLeave:{type:"function"},dragOver:{type:"function"},drop:{type:"function"}}}}}}},dragMode:{type:"string",enumValues:["off","pan","select","user","zoom"],value:"user"},drilling:{type:"string",enumValues:["groupsOnly","off","on","seriesOnly"],value:"off"},groupComparator:{type:"function"},groups:{type:"Array<string>|Array<Object>|Promise"},hiddenCategories:{type:"Array<string>",writeback:!0,value:[]},hideAndShowBehavior:{type:"string",enumValues:["none","withRescale","withoutRescale"],value:"none"},highlightMatch:{type:"string",enumValues:["all","any"],value:"all"},highlightedCategories:{type:"Array<string>",writeback:!0,value:[]},hoverBehavior:{type:"string",enumValues:["dim","none"],value:"none"},initialZooming:{type:"string",enumValues:["first","last","none"],value:"none"},legend:{type:"object",properties:{backgroundColor:{type:"string"},borderColor:{type:"string"},maxSize:{type:"string"},position:{type:"string",enumValues:["auto","bottom","end","start","top"],value:"auto"},referenceObjectSection:{type:"object",properties:{title:{type:"string"},titleHalign:{type:"string",enumValues:["center","end","start"],value:"start"},titleStyle:{type:"object",value:{}}}},rendered:{type:"string",enumValues:["auto","off","on"],value:"auto"},scrolling:{type:"string",enumValues:["asNeeded","off"],value:"asNeeded"},sections:{type:"Array<Object>",value:[]},seriesSection:{type:"object",properties:{title:{type:"string"},titleHalign:{type:"string",enumValues:["center","end","start"],value:"start"},titleStyle:{type:"object",value:{}}}},size:{type:"string"},symbolHeight:{type:"number"},symbolWidth:{type:"number"},textStyle:{type:"object",value:{}},title:{type:"string"},titleHalign:{type:"string",enumValues:["center","end","start"],value:"start"},titleStyle:{type:"object",value:{}}}},orientation:{type:"string",enumValues:["horizontal","vertical"],value:"vertical"},otherThreshold:{type:"number",value:0},overview:{type:"object",properties:{content:{type:"object",value:{}},height:{type:"string"},rendered:{type:"string",enumValues:["off","on"],value:"off"}}},pieCenter:{type:"object",properties:{converter:{type:"object"},label:{type:"string"},labelStyle:{type:"object",value:{}},renderer:{type:"function",properties:{outerBounds:{type:"object"},innerBounds:{type:"object"},label:{type:"string"},componentElement:{type:"Element"}}},scaling:{type:"string",enumValues:["auto","billion","million","none","quadrillion","thousand","trillion"],value:"auto"}}},plotArea:{type:"object",properties:{backgroundColor:{type:"string"},borderColor:{type:"string"},borderWidth:{type:"number"},rendered:{type:"string",enumValues:["off","on"],value:"on"}}},polarGridShape:{type:"string",enumValues:["circle","polygon"],value:"circle"},selection:{type:"Array<any>",writeback:!0,value:[]},selectionMode:{type:"string",enumValues:["multiple","none","single"],value:"none"},series:{type:"Array<Object>|Promise"},seriesComparator:{type:"function"},sorting:{type:"string",enumValues:["ascending","descending","off"],value:"off"},splitDualY:{type:"string",enumValues:["auto","off","on"],value:"auto"},splitterPosition:{type:"number",value:.5},stack:{type:"string",enumValues:["off","on"],value:"off"},stackLabel:{type:"string",enumValues:["off","on"],value:"off"},styleDefaults:{type:"object",properties:{animationDownColor:{type:"string"},animationDuration:{type:"number"},animationIndicators:{type:"string",enumValues:["all","none"],value:"all"},animationUpColor:{type:"string"},barGapRatio:{type:"number"},borderColor:{type:"string"},borderWidth:{type:"number"},boxPlot:{type:"object",properties:{medianSvgClassName:{type:"string",value:""},medianSvgStyle:{type:"object",value:{}},whiskerEndLength:{type:"string"},whiskerEndSvgClassName:{type:"string",value:""},whiskerEndSvgStyle:{type:"object",value:{}},whiskerSvgClassName:{type:"string",value:""},whiskerSvgStyle:{type:"object",value:{}}}},colors:{type:"Array<string>"},dataCursor:{type:"object",properties:{lineColor:{type:"string"},lineStyle:{type:"string",enumValues:["dashed","dotted","solid"],value:"solid"},lineWidth:{type:"number"},markerColor:{type:"string"},markerDisplayed:{type:"string",enumValues:["off","on"],value:"on"},markerSize:{type:"number"}}},dataItemGaps:{type:"string"},dataLabelPosition:{type:"string|Array<string>",enumValues:["aboveMarker","afterMarker","auto","beforeMarker","belowMarker","center","insideBarEdge","none","outsideBarEdge","outsideSlice"],value:"auto"},dataLabelStyle:{type:"object|Array<Object>"},funnelBackgroundColor:{type:"string"},groupSeparators:{type:"object",properties:{color:{type:"string"},rendered:{type:"string",enumValues:["auto","off"],value:"auto"}}},hoverBehaviorDelay:{type:"number"},lineStyle:{type:"string",enumValues:["dashed","dotted","solid"],value:"solid"},lineType:{type:"string",enumValues:["auto","centeredSegmented","centeredStepped","curved","none","segmented","stepped","straight"],value:"auto"},lineWidth:{type:"number"},markerColor:{type:"string"},markerDisplayed:{type:"string",enumValues:["auto","off","on"],value:"auto"},markerShape:{type:'"auto"|"circle"|"diamond"|"human"|"plus"|"square"|"star"|"triangleDown"|"triangleUp"|string',value:"auto"},markerSize:{type:"number"},marqueeBorderColor:{type:"string"},marqueeColor:{type:"string"},maxBarWidth:{type:"number"},otherColor:{type:"string"},patterns:{type:"Array<string>"},pieFeelerColor:{type:"string"},pieInnerRadius:{type:"number",value:0},selectionEffect:{type:"string",enumValues:["explode","highlight","highlightAndExplode"],value:"highlight"},seriesEffect:{type:"string",enumValues:["color","gradient","pattern"],value:"gradient"},shapes:{type:"Array<string>"},stackLabelStyle:{type:"object",value:{}},stockFallingColor:{type:"string"},stockRangeColor:{type:"string"},stockRisingColor:{type:"string"},stockVolumeColor:{type:"string"},threeDEffect:{type:"string",enumValues:["off","on"],value:"off"},tooltipLabelStyle:{type:"object",value:{}},tooltipValueStyle:{type:"object",value:{}}}},timeAxisType:{type:"string",enumValues:["auto","disabled","enabled","mixedFrequency","skipGaps"],value:"auto"},tooltip:{type:"object",properties:{renderer:{type:"function",properties:{parentElement:{type:"Element"},id:{type:"any"},series:{type:"string"},group:{type:"string|Array<string>"},label:{type:"string"},value:{type:"number"},x:{type:"number|string"},y:{type:"number"},z:{type:"number"},low:{type:"number"},high:{type:"number"},open:{type:"number"},close:{type:"number"},volume:{type:"number"},targetValue:{type:"number"},data:{type:"object"},itemData:{type:"object"},seriesData:{type:"object"},groupData:{type:"object"},componentElement:{type:"Element"},color:{type:"string"}}}}},touchResponse:{type:"string",enumValues:["auto","touchStart"],value:"auto"},trackResize:{type:"string",enumValues:["off","on"],value:"on"},translations:{type:"object",value:{},properties:{componentName:{type:"string"},labelAndValue:{type:"string"},labelClearSelection:{type:"string"},labelClose:{type:"string"},labelCountWithTotal:{type:"string"},labelDataVisualization:{type:"string"},labelDate:{type:"string"},labelDefaultGroupName:{type:"string"},labelGroup:{type:"string"},labelHigh:{type:"string"},labelInvalidData:{type:"string"},labelLow:{type:"string"},labelNoData:{type:"string"},labelOpen:{type:"string"},labelOther:{type:"string"},labelPercentage:{type:"string"},labelQ1:{type:"string"},labelQ2:{type:"string"},labelQ3:{type:"string"},labelSeries:{type:"string"},labelTargetValue:{type:"string"},labelValue:{type:"string"},labelVolume:{type:"string"},labelX:{type:"string"},labelY:{type:"string"},labelZ:{type:"string"},stateCollapsed:{type:"string"},stateDrillable:{type:"string"},stateExpanded:{type:"string"},stateHidden:{type:"string"},stateIsolated:{type:"string"},stateMaximized:{type:"string"},stateMinimized:{type:"string"},stateSelected:{type:"string"},stateUnselected:{type:"string"},stateVisible:{type:"string"},tooltipPan:{type:"string"},tooltipSelect:{type:"string"},tooltipZoom:{type:"string"}}},type:{type:"string",enumValues:["area","bar","boxPlot","bubble","combo","funnel","line","lineWithArea","pie","pyramid","scatter","stock"],value:"bar"},valueFormats:{type:"object",properties:{close:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["auto","billion","million","none","quadrillion","thousand","trillion"],value:"auto"},tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}},group:{type:"object",properties:{tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string|Array<string>"}}},high:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["auto","billion","million","none","quadrillion","thousand","trillion"],value:"auto"},tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}},label:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["auto","billion","million","none","quadrillion","thousand","trillion"],value:"auto"}}},low:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["auto","billion","million","none","quadrillion","thousand","trillion"],value:"auto"},tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}},open:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["auto","billion","million","none","quadrillion","thousand","trillion"],value:"auto"},tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}},q1:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["auto","billion","million","none","quadrillion","thousand","trillion"],value:"auto"},tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}},q2:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["auto","billion","million","none","quadrillion","thousand","trillion"],value:"auto"},tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}},q3:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["auto","billion","million","none","quadrillion","thousand","trillion"],value:"auto"},tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}},series:{type:"object",properties:{tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}},targetValue:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["auto","billion","million","none","quadrillion","thousand","trillion"],value:"auto"},tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}},value:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["auto","billion","million","none","quadrillion","thousand","trillion"],value:"auto"},tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}},volume:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["auto","billion","million","none","quadrillion","thousand","trillion"],value:"auto"},tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}},x:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["auto","billion","million","none","quadrillion","thousand","trillion"],value:"auto"},tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}},y:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["auto","billion","million","none","quadrillion","thousand","trillion"],value:"auto"},tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}},y2:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["auto","billion","million","none","quadrillion","thousand","trillion"],value:"auto"},tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}},z:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["auto","billion","million","none","quadrillion","thousand","trillion"],value:"auto"},tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}}}},xAxis:{type:"object",properties:{axisLine:{type:"object",properties:{lineColor:{type:"string"},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["off","on"],value:"on"}}},baselineScaling:{type:"string",enumValues:["min","zero"],value:"zero"},dataMax:{type:"number"},dataMin:{type:"number"},majorTick:{type:"object",properties:{baselineColor:{type:"string",enumValues:["auto","inherit"],value:"auto"},baselineStyle:{type:"string",enumValues:["dashed","dotted","solid"],value:"solid"},baselineWidth:{type:"number"},lineColor:{type:"string"},lineStyle:{type:"string",enumValues:["dashed","dotted","solid"],value:"solid"},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["auto","off","on"],value:"auto"}}},max:{type:"number|string"},maxSize:{type:"string"},min:{type:"number|string"},minStep:{type:"number"},minorStep:{type:"number"},minorTick:{type:"object",properties:{lineColor:{type:"string"},lineStyle:{type:"string",enumValues:["dashed","dotted","solid"],value:"solid"},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["auto","off","on"],value:"auto"}}},referenceObjects:{type:"Array<Object>",value:[]},rendered:{type:"string",enumValues:["off","on"],value:"on"},scale:{type:"string",enumValues:["linear","log"],value:"linear"},size:{type:"string"},step:{type:"number"},tickLabel:{type:"object",properties:{converter:{type:"object"},rendered:{type:"string",enumValues:["off","on"],value:"on"},rotation:{type:"string",enumValues:["auto","none"],value:"auto"},scaling:{type:"string",enumValues:["auto","billion","million","none","quadrillion","thousand","trillion"],value:"auto"},style:{type:"object",value:{}}}},title:{type:"string"},titleStyle:{type:"object",value:{}},viewportEndGroup:{type:"number|string"},viewportMax:{type:"number|string"},viewportMin:{type:"number|string"},viewportStartGroup:{type:"number|string"}}},y2Axis:{type:"object",properties:{alignTickMarks:{type:"string",enumValues:["off","on"],value:"on"},axisLine:{type:"object",properties:{lineColor:{type:"string"},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["auto","off","on"],value:"auto"}}},baselineScaling:{type:"string",enumValues:["min","zero"],value:"zero"},dataMax:{type:"number"},dataMin:{type:"number"},majorTick:{type:"object",properties:{baselineColor:{type:"string",enumValues:["auto","inherit"],value:"auto"},baselineStyle:{type:"string",enumValues:["dashed","dotted","solid"],value:"solid"},baselineWidth:{type:"number"},lineColor:{type:"string"},lineStyle:{type:"string",enumValues:["dashed","dotted","solid"],value:"solid"},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["auto","off","on"],value:"auto"}}},max:{type:"number"},maxSize:{type:"string"},min:{type:"number"},minStep:{type:"number"},minorStep:{type:"number"},minorTick:{type:"object",properties:{lineColor:{type:"string"},lineStyle:{type:"string",enumValues:["dashed","dotted","solid"],value:"solid"},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["auto","off","on"],value:"auto"}}},position:{type:"string",enumValues:["auto","bottom","end","start","top"],value:"auto"},referenceObjects:{type:"Array<Object>",value:[]},rendered:{type:"string",enumValues:["off","on"],value:"on"},scale:{type:"string",enumValues:["linear","log"],value:"linear"},size:{type:"string"},step:{type:"number"},tickLabel:{type:"object",properties:{converter:{type:"object"},position:{type:"string",enumValues:["inside","outside"],value:"outside"},rendered:{type:"string",enumValues:["off","on"],value:"on"},scaling:{type:"string",enumValues:["auto","billion","million","none","quadrillion","thousand","trillion"],value:"auto"},style:{type:"object",value:{}}}},title:{type:"string"},titleStyle:{type:"object",value:{}}}},yAxis:{type:"object",properties:{axisLine:{type:"object",properties:{lineColor:{type:"string"},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["auto","off","on"],value:"auto"}}},baselineScaling:{type:"string",enumValues:["min","zero"],value:"zero"},dataMax:{type:"number"},dataMin:{type:"number"},majorTick:{type:"object",properties:{baselineColor:{type:"string",enumValues:["auto","inherit"],value:"auto"},baselineStyle:{type:"string",enumValues:["dashed","dotted","solid"],value:"solid"},baselineWidth:{type:"number"},lineColor:{type:"string"},lineStyle:{type:"string",enumValues:["dashed","dotted","solid"],value:"solid"},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["auto","off","on"],value:"auto"}}},max:{type:"number"},maxSize:{type:"string"},min:{type:"number"},minStep:{type:"number"},minorStep:{type:"number"},minorTick:{type:"object",properties:{lineColor:{type:"string"},lineStyle:{type:"string",enumValues:["dashed","dotted","solid"],value:"solid"},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["auto","off","on"],value:"auto"}}},position:{type:"string",enumValues:["auto","bottom","end","start","top"],value:"auto"},referenceObjects:{type:"Array<Object>",value:[]},rendered:{type:"string",enumValues:["off","on"],value:"on"},scale:{type:"string",enumValues:["linear","log"],value:"linear"},size:{type:"string"},step:{type:"number"},tickLabel:{type:"object",properties:{converter:{type:"object"},position:{type:"string",enumValues:["inside","outside"],value:"outside"},rendered:{type:"string",enumValues:["off","on"],value:"on"},scaling:{type:"string",enumValues:["auto","billion","million","none","quadrillion","thousand","trillion"],value:"auto"},style:{type:"object",value:{}}}},title:{type:"string"},titleStyle:{type:"object",value:{}},viewportMax:{type:"number"},viewportMin:{type:"number"}}},zoomAndScroll:{type:"string",enumValues:["delayed","delayedScrollOnly","live","liveScrollOnly","off"],value:"off"},zoomDirection:{type:"string",enumValues:["auto","x","y"],value:"auto"}},methods:{getGroup:{},getSeries:{},getGroupCount:{},getSeriesCount:{},getDataItem:{},getLegend:{},getPlotArea:{},getXAxis:{},getYAxis:{},getY2Axis:{},getValuesAt:{},getContextByNode:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojSelectInput:{},ojViewportChange:{},ojViewportChangeInput:{},ojDrill:{}},extension:{}},Ai={properties:{drilling:{type:"string",enumValues:["inherit","off","on"],value:"inherit"},labelStyle:{type:"object"},name:{type:"string"},shortDesc:{type:"string"}},extension:{}},Ii={properties:{borderColor:{type:"string"},borderWidth:{type:"number"},boxPlot:{type:"object",properties:{medianSvgClassName:{type:"string"},medianSvgStyle:{type:"object"},q2Color:{type:"string"},q2SvgClassName:{type:"string"},q2SvgStyle:{type:"object"},q3SvgClassName:{type:"string"},q3SvgStyle:{type:"object"},whiskerEndLength:{type:"string"},whiskerEndSvgClassName:{type:"string"},whiskerEndSvgStyle:{type:"object"},whiskerSvgClassName:{type:"string"},whiskerSvgStyle:{type:"object"}}},categories:{type:"Array<string>"},close:{type:"number"},color:{type:"string"},drilling:{type:"string",enumValues:["inherit","off","on"],value:"inherit"},groupId:{type:"Array<(string|number)>"},high:{type:"number"},items:{type:"Array<Object>|Array<number>"},label:{type:"string|Array<string>"},labelPosition:{type:"string|Array<string>",enumValues:["aboveMarker","afterMarker","auto","beforeMarker","belowMarker","center","insideBarEdge","none","outsideBarEdge","outsideSlice"]},labelStyle:{type:"object|Array<Object>"},low:{type:"number"},markerDisplayed:{type:"string",enumValues:["auto","off","on"]},markerShape:{type:'"circle"|"diamond"|"human"|"plus"|"square"|"star"|"triangleDown"|"triangleUp"|"auto"|string'},markerSize:{type:"number"},open:{type:"number"},pattern:{type:"string",enumValues:["auto","largeChecker","largeCrosshatch","largeDiagonalLeft","largeDiagonalRight","largeDiamond","largeTriangle","smallChecker","smallCrosshatch","smallDiagonalLeft","smallDiagonalRight","smallDiamond","smallTriangle"],value:"auto"},q1:{type:"number"},q2:{type:"number"},q3:{type:"number"},seriesId:{type:"string|number"},shortDesc:{type:"string"},source:{type:"string"},sourceHover:{type:"string"},sourceHoverSelected:{type:"string"},sourceSelected:{type:"string"},svgClassName:{type:"string"},svgStyle:{type:"object"},targetValue:{type:"number"},value:{type:"number"},volume:{type:"number"},x:{type:"number|string"},y:{type:"number"},z:{type:"number"}},extension:{}},Oi={properties:{areaColor:{type:"string"},areaSvgClassName:{type:"string"},areaSvgStyle:{type:"object"},assignedToY2:{type:"string",enumValues:["off","on"],value:"off"},borderColor:{type:"string"},borderWidth:{type:"number"},boxPlot:{type:"object",properties:{medianSvgClassName:{type:"string"},medianSvgStyle:{type:"object"},q2Color:{type:"string"},q2SvgClassName:{type:"string"},q2SvgStyle:{type:"object"},q3Color:{type:"string"},q3SvgClassName:{type:"string"},q3SvgStyle:{type:"object"},whiskerEndLength:{type:"string"},whiskerEndSvgClassName:{type:"string"},whiskerEndSvgStyle:{type:"object"},whiskerSvgClassName:{type:"string"},whiskerSvgStyle:{type:"object"}}},categories:{type:"Array<string>"},color:{type:"string"},displayInLegend:{type:"string",enumValues:["auto","off","on"],value:"auto"},drilling:{type:"string",enumValues:["inherit","off","on"],value:"inherit"},lineStyle:{type:"string",enumValues:["dashed","dotted","solid"],value:"solid"},lineType:{type:"string",enumValues:["auto","centeredSegmented","centeredStepped","curved","none","segmented","stepped","straight"],value:"auto"},lineWidth:{type:"number"},markerColor:{type:"string"},markerDisplayed:{type:"string",enumValues:["auto","off","on"],value:"auto"},markerShape:{type:'"circle"|"diamond"|"human"|"plus"|"square"|"star"|"triangleDown"|"triangleUp"|"auto"|string',value:"auto"},markerSize:{type:"number"},markerSvgClassName:{type:"string"},markerSvgStyle:{type:"object"},name:{type:"string"},pattern:{type:"string",enumValues:["auto","largeChecker","largeCrosshatch","largeDiagonalLeft","largeDiagonalRight","largeDiamond","largeTriangle","smallChecker","smallCrosshatch","smallDiagonalLeft","smallDiagonalRight","smallDiamond","smallTriangle"],value:"auto"},pieSliceExplode:{type:"number",value:0},shortDesc:{type:"string"},source:{type:"string"},sourceHover:{type:"string"},sourceHoverSelected:{type:"string"},sourceSelected:{type:"string"},stackCategory:{type:"string"},svgClassName:{type:"string"},svgStyle:{type:"object"},type:{type:"string",enumValues:["area","auto","bar","boxPlot","candlestick","line","lineWithArea"],value:"auto"}},extension:{}},wi={properties:{animationDuration:{type:"number"},animationOnDataChange:{type:"string",enumValues:["auto","none"],value:"none"},animationOnDisplay:{type:"string",enumValues:["auto","none"],value:"none"},areaColor:{type:"string",value:""},areaSvgClassName:{type:"string",value:""},areaSvgStyle:{type:"object",value:{}},as:{type:"string",value:""},barGapRatio:{type:"number",value:.25},baselineScaling:{type:"string",enumValues:["min","zero"],value:"min"},color:{type:"string"},data:{type:"oj.DataProvider"},firstColor:{type:"string",value:""},highColor:{type:"string",value:""},items:{type:"Array<Object>|Array<number>|Promise"},lastColor:{type:"string",value:""},lineStyle:{type:"string",enumValues:["dashed","dotted","solid"],value:"solid"},lineType:{type:"string",enumValues:["centeredSegmented","centeredStepped","curved","none","segmented","stepped","straight"],value:"straight"},lineWidth:{type:"number",value:1},lowColor:{type:"string",value:""},markerShape:{type:'"auto"|"circle"|"diamond"|"human"|"plus"|"square"|"star"|"triangleDown"|"triangleUp"|string',value:"auto"},markerSize:{type:"number",value:5},referenceObjects:{type:"Array<Object>",value:[]},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}},tooltip:{type:"object",properties:{renderer:{type:"function",properties:{color:{type:"string"},componentElement:{type:"Element"},parentElement:{type:"Element"}}}}},trackResize:{type:"string",enumValues:["off","on"],value:"on"},translations:{type:"object",value:{},properties:{componentName:{type:"string"},labelAndValue:{type:"string"},labelClearSelection:{type:"string"},labelCountWithTotal:{type:"string"},labelDataVisualization:{type:"string"},labelInvalidData:{type:"string"},labelNoData:{type:"string"},stateCollapsed:{type:"string"},stateDrillable:{type:"string"},stateExpanded:{type:"string"},stateHidden:{type:"string"},stateIsolated:{type:"string"},stateMaximized:{type:"string"},stateMinimized:{type:"string"},stateSelected:{type:"string"},stateUnselected:{type:"string"},stateVisible:{type:"string"}}},type:{type:"string",enumValues:["area","bar","line","lineWithArea"],value:"line"},visualEffects:{type:"string",enumValues:["auto","none"],value:"auto"}},methods:{getDataItem:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}},Ri={properties:{borderColor:{type:"string",value:""},color:{type:"string",value:""},date:{type:"string",value:""},high:{type:"number"},low:{type:"number"},markerDisplayed:{type:"string",enumValues:["off","on"],value:"off"},markerShape:{type:'"auto"|"circle"|"diamond"|"human"|"plus"|"square"|"star"|"triangleDown"|"triangleUp"|string',value:"auto"},markerSize:{type:"number",value:5},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}},value:{type:"number"}},extension:{}};n.ChartDataProviderHandler=function(e,t,i){this._component=e,this._templateEngine=t,this._templates=e.getTemplates(),this._items=i,this.Init()},n.Object.createSubclass(n.ChartDataProviderHandler,n.Object,"oj.ChartDataProviderHandler"),n.ChartDataProviderHandler.prototype.Init=function(){this._parentElement=this._component.element[0],this._seriesTemplate=this._templates.seriesTemplate?this._templates.seriesTemplate[0]:null,this._groupTemplate=this._templates.groupTemplate?this._templates.groupTemplate[0]:null,this._alias=this._component.options.as,this._seriesComparator=this._component.options.seriesComparator,this._groupComparator=this._component.options.groupComparator,this._itemMap=new Map,this._seriesContexts=new Map,this._groupContexts=new Map;for(var e=0,t=0,i=[],n=0;n<this._items.length;n++){var o=this._items[n];if(!this._itemMap.has(o.seriesId)||!this._itemMap.get(o.seriesId).has(o.groupId)){i.push(o);var s={data:o._itemData,key:o.id,index:n},r=o.seriesId;if(!this._seriesContexts.has(r)){var a;a={componentElement:this._parentElement,id:r,items:[],index:e},this._seriesContexts.set(r,a),e+=1}this._seriesContexts.get(r).items.push(s);var l=o.groupId,u=t;this._groupContexts.has(l.slice(0,l.length-1))||(t+=1),this._addToGroupContexts(s,l,1,u),this._itemMap.has(o.seriesId)||this._itemMap.set(o.seriesId,new Cn),this._itemMap.get(o.seriesId).set(o.groupId,o)}}i.length>0&&(this._groups=this._createGroups(i),this._groupComparator&&this._sortGroups(this._groups),this._series=this._createSeries(this._groups),this._seriesComparator&&this._sortSeries(this._series))},n.ChartDataProviderHandler.prototype.getSeries=function(){return this._series||[]},n.ChartDataProviderHandler.prototype.getGroups=function(){return this._groups||[]},n.ChartDataProviderHandler.prototype._addToGroupContexts=function(e,t,i,n){var o=i-1;if(o<t.length){var s=t[o],r=this._groupContexts.get(s);r?r.items.push(e):this._groupContexts.set(s,{ids:t,componentElement:this._parentElement,items:[e],depth:i,leaf:i===t.length,index:n});var a=r?r.items.length-1:0;this._addToGroupContexts(e,t,i+1,a)}},n.ChartDataProviderHandler.prototype._createSeries=function(t){var i=this._component.getElementPropertyNames("oj-chart-series"),n=this._component.getPropertyValidator(this._seriesTemplate,"oj-chart-series"),o=[],s=!1;return this._seriesContexts.forEach(function(t,r){try{var a;if(!s)(a=this._seriesTemplate?this._templateEngine.resolveProperties(this._parentElement,this._seriesTemplate,"oj-chart-series",i,t,this._alias,n):{}).id=r,a.name=a.name||r+"",o.push(a)}catch(t){e.error(t),o=[],s=!0}},this),this._addItemsToSeries(o,t),o},n.ChartDataProviderHandler.prototype._addItemsToSeries=function(e,t){var i,n=function(e){if(!e.groups)return[e.id];for(var t=[],i=0;i<e.groups.length;i++)t.push([e.id].concat(n(e.groups[i])));return t},o=[];for(i=0;i<t.length;i++){var s=t[i],r=n(s);o=o.concat(r)}for(i=0;i<e.length;i++){for(var a=e[i],l=[],u=0;u<o.length;u++){var d=Array.isArray(o[u])?o[u]:[o[u]],h=this._itemMap.get(a.id).get(d)||null;h&&(delete h.groupId,delete h.seriesId),l.push(h)}e[i].items=l}},n.ChartDataProviderHandler.prototype._createGroups=function(t){var i,n=this._component.getElementPropertyNames("oj-chart-group"),o=this._component.getPropertyValidator(this._groupTemplate,"oj-chart-group"),s={},r=!1;this._groupContexts.forEach(function(t,i){try{var a;if(!r)(a=this._groupTemplate?this._templateEngine.resolveProperties(this._parentElement,this._groupTemplate,"oj-chart-group",n,t,this._alias,o):{}).id=i,a.name=a.name||i+"",s[i]=a}catch(t){e.error(t),s={},r=!0}},this);var a=[];if(!r)for(i=0;i<t.length;i++){var l=t[i];a=this._addGroupItem(l,l.groupId,a,s)}return a},n.ChartDataProviderHandler.prototype._addGroupItem=function(e,t,i,n){i||(i=[]);for(var o,s=t[0],r=null,a=0;a<i.length;a++)i[a].id===s&&(r=a);return null!=r?o=i[r]:(o=n[s],i.push(o)),t.length>1&&(o.groups=this._addGroupItem(e,t.slice(1),o.groups,n)),i},n.ChartDataProviderHandler.prototype._sortSeries=function(e){var t,i;e.sort((t=this._seriesContexts,i=this._seriesComparator,function(e,n){return i(t.get(e.id),t.get(n.id))}));for(var n=0;n<e.length;n++){var o=e[n].id;this._seriesContexts.get(o).index=n}},n.ChartDataProviderHandler.prototype._sortGroups=function(e){var t,i;e.sort((t=this._groupContexts,i=this._groupComparator,function(e,n){var o=e.id,s=n.id,r=t.get(o),a=t.get(s);return i(r,a)}));for(var n=0;n<e.length;n++){var o=e[n].id;this._groupContexts.get(o).index=n,e[n].groups&&this._sortGroups(e[n].groups)}},n.__registerWidget("oj.ojChart",$.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{data:null,series:null,groups:null,selectInput:null,tooltip:{renderer:null},viewportChange:null,viewportChangeInput:null,drill:null},_CreateDvtComponent:function(e,t,i){return dvt.Chart.newInstance(e,t,i)},_ConvertLocatorToSubId:function(e){var t=e.subId;return"oj-chart-item"===t?t="dataItem["+e.seriesIndex+"]["+e.itemIndex+"]":"oj-chart-group"===t?t="group"+this._GetStringFromIndexPath(e.indexPath):"oj-chart-series"===t?t="series["+e.index+"]":"oj-chart-axis-title"===t?t=e.axis+":title":"oj-chart-reference-object"===t?t=e.axis+":referenceObject["+e.index+"]":"oj-legend-item"===t?(t="legend:section"+this._GetStringFromIndexPath(e.sectionIndexPath),t+=":item["+e.itemIndex+"]"):"oj-chart-tooltip"===t?t="tooltip":"oj-chart-pie-center-label"===t&&(t="pieCenterLabel"),t},_ProcessTemplates:function(t,i,o){if(!this.getTemplates().itemTemplate)return e.error("No itemTemplate slot specified."),{paths:["series","groups"],values:[[],[]]};var s=this._super(t,i,o),r=new n.ChartDataProviderHandler(this,o,s.values[0]);return{paths:["series","groups"],values:[r.getSeries(),r.getGroups()]}},_GetSimpleDataProviderConfigs:function(){return{data:{templateName:"itemTemplate",templateElementName:"oj-chart-item",resultPath:"_item"}}},_ProcessOptions:function(){this._super();var e=this.options.pieCenter;e&&e._renderer&&(e.renderer=this._GetTemplateRenderer(e._renderer,"center"));var t=this.options.selection;this._IsCustomElement()&&t&&"object"==typeof t[0]&&!this.options.data&&(this.options.selection=null)},_ConvertSubIdToLocator:function(e){var t={};if(0===e.indexOf("dataItem")){var i=this._GetIndexPath(e);t.subId="oj-chart-item",t.seriesIndex=i[0],t.itemIndex=i[1]}else if(0===e.indexOf("group"))t.subId="oj-chart-group",t.indexPath=this._GetIndexPath(e);else if(0===e.indexOf("series"))t.subId="oj-chart-series",t.index=this._GetFirstIndex(e);else if(e.indexOf("Axis:title")>0)t.subId="oj-chart-axis-title",t.axis=e.substring(0,e.indexOf(":"));else if(e.indexOf("Axis:referenceObject")>0)t.subId="oj-chart-reference-object",t.axis=e.substring(0,e.indexOf(":")),t.index=this._GetFirstIndex(e);else if(0===e.indexOf("legend")){if(e.indexOf(":item")>0){var n=e.indexOf(":item"),o=e.substring(0,n),s=e.substring(n);t.subId="oj-legend-item",t.sectionIndexPath=this._GetIndexPath(o),t.itemIndex=this._GetFirstIndex(s)}}else"tooltip"===e?t.subId="oj-chart-tooltip":"pieCenterLabel"===e&&(t.subId="oj-chart-pie-center-label");return t},_ProcessStyles:function(){if(this._super(),this.options.styleDefaults||(this.options.styleDefaults={}),!this.options.styleDefaults.colors){var e=new E.ColorAttributeGroupHandler;this.options.styleDefaults.colors=e.getValueRamp()}},_GetComponentRendererOptions:function(){return["tooltip/renderer","pieCenter/renderer"]},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-chart"),e},_GetChildStyleClasses:function(){var e=this._super();return e["oj-chart-data-label"]={path:"styleDefaults/dataLabelStyle",property:"TEXT"},e["oj-chart-data-cursor-line"]={path:"styleDefaults/dataCursor/lineColor",property:"color"},e["oj-chart-stack-label"]={path:"styleDefaults/stackLabelStyle",property:"TEXT"},e["oj-chart-pie-center-label"]={path:"pieCenter/labelStyle",property:"TEXT"},e["oj-chart-slice-label"]={path:"styleDefaults/sliceLabelStyle",property:"TEXT"},e["oj-chart-stock-falling"]={path:"styleDefaults/stockFallingColor",property:"background-color"},e["oj-chart-stock-range"]={path:"styleDefaults/stockRangeColor",property:"background-color"},e["oj-chart-stock-rising"]={path:"styleDefaults/stockRisingColor",property:"background-color"},e["oj-chart-tooltip-label"]={path:"styleDefaults/tooltipLabelStyle",property:"TEXT"},e["oj-chart-xaxis-tick-label"]={path:"xAxis/tickLabel/style",property:"TEXT"},e["oj-chart-xaxis-title"]={path:"xAxis/titleStyle",property:"TEXT"},e["oj-chart-yaxis-tick-label"]={path:"yAxis/tickLabel/style",property:"TEXT"},e["oj-chart-yaxis-title"]={path:"yAxis/titleStyle",property:"TEXT"},e["oj-chart-y2axis-tick-label"]={path:"y2Axis/tickLabel/style",property:"TEXT"},e["oj-chart-y2axis-title"]={path:"y2Axis/titleStyle",property:"TEXT"},e["oj-legend"]={path:"legend/textStyle",property:"TEXT"},e["oj-legend-title"]={path:"legend/titleStyle",property:"TEXT"},e},_GetEventTypes:function(){return["drill","optionChange","selectInput","viewportChange","viewportChangeInput"]},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtChartBundle.DEFAULT_GROUP_NAME"]=e.labelDefaultGroupName,t["DvtChartBundle.LABEL_SERIES"]=e.labelSeries,t["DvtChartBundle.LABEL_GROUP"]=e.labelGroup,t["DvtChartBundle.LABEL_VALUE"]=e.labelValue,t["DvtChartBundle.LABEL_TARGET_VALUE"]=e.labelTargetValue,t["DvtChartBundle.LABEL_X"]=e.labelX,t["DvtChartBundle.LABEL_Y"]=e.labelY,t["DvtChartBundle.LABEL_Z"]=e.labelZ,t["DvtChartBundle.LABEL_PERCENTAGE"]=e.labelPercentage,t["DvtChartBundle.LABEL_LOW"]=e.labelLow,t["DvtChartBundle.LABEL_HIGH"]=e.labelHigh,t["DvtChartBundle.LABEL_OPEN"]=e.labelOpen,t["DvtChartBundle.LABEL_CLOSE"]=e.labelClose,t["DvtChartBundle.LABEL_VOLUME"]=e.labelVolume,t["DvtChartBundle.LABEL_Q1"]=e.labelQ1,t["DvtChartBundle.LABEL_Q2"]=e.labelQ2,t["DvtChartBundle.LABEL_Q3"]=e.labelQ3,t["DvtChartBundle.LABEL_MIN"]=e.labelMin,t["DvtChartBundle.LABEL_MAX"]=e.labelMax,t["DvtChartBundle.LABEL_OTHER"]=e.labelOther,t["DvtChartBundle.PAN"]=e.tooltipPan,t["DvtChartBundle.MARQUEE_SELECT"]=e.tooltipSelect,t["DvtChartBundle.MARQUEE_ZOOM"]=e.tooltipZoom,t["DvtUtilBundle.CHART"]=e.componentName,t},_HandleEvent:function(e){var t=e.type;if("selection"===t){var i=e.selection;if(i){for(var n=[],o=[],s=0;s<i.length;s++){var r;r=this._IsCustomElement()?i[s].id:{id:i[s].id,series:i[s].series,group:i[s].group};var a={data:i[s].data,seriesData:i[s].seriesData,groupData:i[s].groupData,itemData:i[s].itemData};n.push(r),o.push(a)}var l={endGroup:e.endGroup,startGroup:e.startGroup,xMax:e.xMax,xMin:e.xMin,yMax:e.yMax,yMin:e.yMin,y2Max:e.y2Max,y2Min:e.y2Min,selectionData:o};this._IsCustomElement()||(l.component=e.component),e.complete?this._UserOptionChange("selection",n,l):(l.items=n,this._trigger("selectInput",null,l))}}else if("viewportChange"===t){var u={endGroup:e.endGroup,startGroup:e.startGroup,xMax:e.xMax,xMin:e.xMin,yMax:e.yMax,yMin:e.yMin};e.complete&&(this.options.xAxis||(this.options.xAxis={}),this.options.yAxis||(this.options.yAxis={}),this.options.xAxis.viewportStartGroup=null,this.options.xAxis.viewportEndGroup=null,null!=e.xMin&&null!=e.xMax&&(this.options.xAxis.viewportMin=e.xMin,this.options.xAxis.viewportMax=e.xMax),null!=e.yMin&&null!=e.yMax&&(this.options.yAxis.viewportMin=e.yMin,this.options.yAxis.viewportMax=e.yMax)),this._trigger(e.complete?"viewportChange":"viewportChangeInput",null,u)}else"drill"===t?this._trigger("drill",null,{id:e.id,series:e.series,group:e.group,data:e.data,seriesData:e.seriesData,groupData:e.groupData,itemData:e.itemData,component:e.component}):this._super(e)},_LoadResources:function(){null==this.options._resources&&(this.options._resources={});var e=this.options._resources;e.overviewGrippy=p.getResourceUrl("resources/internal-deps/dvt/chart/drag_horizontal.png"),e.panCursorDown=p.getResourceUrl("resources/internal-deps/dvt/chart/hand-closed.cur"),e.panCursorUp=p.getResourceUrl("resources/internal-deps/dvt/chart/hand-open.cur"),e.panUp="oj-chart-pan-icon",e.panUpHover="oj-chart-pan-icon oj-hover",e.panDown="oj-chart-pan-icon oj-active",e.panDownHover="oj-chart-pan-icon oj-hover oj-active",e.selectUp="oj-chart-select-icon",e.selectUpHover="oj-chart-select-icon oj-hover",e.selectDown="oj-chart-select-icon oj-active",e.selectDownHover="oj-chart-select-icon oj-hover oj-active",e.zoomUp="oj-chart-zoom-icon",e.zoomUpHover="oj-chart-zoom-icon oj-hover",e.zoomDown="oj-chart-zoom-icon oj-active",e.zoomDownHover="oj-chart-zoom-icon oj-hover oj-active"},getTitle:function(){return this._component.getAutomation().getTitle()},getGroup:function(e){return this._component.getAutomation().getGroup(e)},getSeries:function(e){return this._component.getAutomation().getSeries(e)},getGroupCount:function(){return this._component.getAutomation().getGroupCount()},getSeriesCount:function(){return this._component.getAutomation().getSeriesCount()},getDataItem:function(e,t){return this._component.getAutomation().getDataItem(e,t)},getLegend:function(){return this._component.getAutomation().getLegend()},getPlotArea:function(){return this._component.getAutomation().getPlotArea()},getXAxis:function(){return this._component.getAutomation().getXAxis()},getYAxis:function(){return this._component.getAutomation().getYAxis()},getY2Axis:function(){return this._component.getAutomation().getY2Axis()},getValuesAt:function(e,t){return this._component.getValuesAt(e,t)},getContextByNode:function(e){var t=this.getSubIdByNode(e);return t&&"oj-chart-tooltip"!==t.subId?t:null},_GetComponentDeferredDataPaths:function(){return{root:["groups","series","data"]}},_CompareOptionValues:function(e,t,i){return"dataCursorPosition"===e?n.Object.compareValues(t,i):this._super(e,t,i)}}),n.__registerWidget("oj.ojSparkChart",$.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{as:"",data:null,items:null,referenceObjects:[],tooltip:{renderer:null},type:"line",color:"#267DB3",areaColor:"",areaSvgClassName:"",areaSvgStyle:{},svgClassName:"",svgStyle:{},firstColor:"",lastColor:"",highColor:"",lowColor:"",animationDuration:void 0,animationOnDataChange:"none",animationOnDisplay:"none",visualEffects:"auto",baselineScaling:"min",lineWidth:1,lineStyle:"solid",lineType:"straight",markerShape:"auto",markerSize:5,barGapRatio:.25},_CreateDvtComponent:function(e,t,i){return this._focusable({element:this.element,applyHighlight:!0}),dvt.SparkChart.newInstance(e,t,i)},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-sparkchart"),e},_GetChildStyleClasses:function(){var e=this._super();return e["oj-dvtbase oj-sparkchart"]={path:"animationDuration",property:"ANIM_DUR"},e},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtUtilBundle.CHART"]=e.componentName,t},_Render:function(){this.element.attr("title")?(this.options.shortDesc=this.element.attr("title"),this.element.data(this.element,"title",this.element.attr("title")),this.element.removeAttr("title")):this.element.data("title")&&(this.options.shortDesc=this.element.data("title")),this._super()},getDataItem:function(e){var t=this._component.getAutomation().getDataItem(e);return this._AddAutomationGetters(t),t&&(t.getFloatValue=t.getLow),t},_GetComponentDeferredDataPaths:function(){return{root:["items","data"]}},_GetSimpleDataProviderConfigs:function(){return{data:{templateName:"itemTemplate",templateElementName:"oj-spark-chart-item",resultPath:"items"}}},_AddAutomationGetters:function(e){if(e){for(var t={},i=Object.keys(e),n=0;n<i.length;n++)this._addGetter(e,i[n],t);Object.defineProperties(e,t)}},_addGetter:function(e,t,i){i[("selected"===t?"is":"get")+t.charAt(0).toUpperCase()+t.slice(1)]={value:function(){return e[t]}}}}),function(){Di.extension._WIDGET_NAME="ojChart";var e=Zt.shapeParseFunction({"style-defaults.marker-shape":!0},{square:!0,circle:!0,diamond:!0,plus:!0,triangleDown:!0,triangleUp:!0,human:!0,star:!0,auto:!0});n.CustomElementBridge.register("oj-chart",{metadata:Di,parseFunction:function(t,i,n,o){return"number|string"===n.type?isNaN(t)?t:Number(t):"style-defaults.data-label-style"===i?JSON.parse(t):e(t,i,n,o)}})}(),function(){Ii.extension._CONSTRUCTOR=function(){};n.CustomElementBridge.register("oj-chart-item",{metadata:Ii,parseFunction:Zt.shapeParseFunction({"marker-shape":!0},{square:!0,circle:!0,diamond:!0,plus:!0,triangleDown:!0,triangleUp:!0,human:!0,star:!0,auto:!0})})}(),function(){Oi.extension._CONSTRUCTOR=function(){};n.CustomElementBridge.register("oj-chart-series",{metadata:Oi,parseFunction:Zt.shapeParseFunction({"marker-shape":!0},{square:!0,circle:!0,diamond:!0,plus:!0,triangleDown:!0,triangleUp:!0,human:!0,star:!0,auto:!0})})}(),Ai.extension._CONSTRUCTOR=function(){},n.CustomElementBridge.register("oj-chart-group",{metadata:Ai}),function(){wi.extension._WIDGET_NAME="ojSparkChart";n.CustomElementBridge.register("oj-spark-chart",{metadata:wi,parseFunction:Zt.shapeParseFunction({"marker-shape":!0},{square:!0,circle:!0,diamond:!0,plus:!0,triangleDown:!0,triangleUp:!0,human:!0,star:!0,auto:!0})})}(),Ri.extension._CONSTRUCTOR=function(){},n.CustomElementBridge.register("oj-spark-chart-item",{metadata:Ri});var xi,Li={properties:{describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},labelHint:{type:"string",value:""},labelledBy:{type:"string"},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},optionRenderer:{type:"function",properties:{component:{type:"Element"},index:{type:"number"},data:{type:"object"}}},options:{type:"oj.DataProvider"},optionsKeys:{type:"object",properties:{label:{type:"string"},value:{type:"string"}}},readonly:{type:"boolean",value:!1},required:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{readonlyNoValue:{type:"string"},required:{type:"object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}}}},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},value:{type:"Array<any>",writeback:!0}},methods:{refresh:{},validate:{},reset:{},showMessages:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{}},extension:{}};xi={doValueChangeCheck:!1},n.__registerWidget("oj.ojCheckboxset",$.oj.editableValue,{version:"1.0.0",defaultElement:"<div>",widgetEventPrefix:"oj",options:{disabled:!1,labelledBy:null,readOnly:!1,optionRenderer:null,options:null,optionsKeys:{},required:!1,value:[]},refresh:function(){this._super(),this._setup()},widget:function(){return this.uiCheckboxset},validate:n.EditableValueUtils.validate,_InitOptions:function(e,t){var i,o,s=[];this._super(e,t),this._IsCustomElement()||n.EditableValueUtils.initializeOptionsFromDom([{attribute:"disabled",validateOption:!0},{attribute:"readonly",option:"readOnly",validateOption:!0},{attribute:"title"},{attribute:"required",coerceDomValue:!0,validateOption:!0}],t,this),this._IsCustomElement()?this._checkValueType(this.options.value):void 0===t.value?(this.$checkboxes=this._findCheckboxesWithMatchingName(),(i=this.$checkboxes.filter(":checked")).length>0&&(i.each(function(){s.push($(this).val())}),o=s,this.option("value",o,{_context:{writeback:!0,internalSet:!0}})),void 0===this.options.value&&(this.options.value=[])):this._checkValueType(this.options.value)},_ComponentCreate:function(){var e=this.element;if(this._super(),e.is("fieldset"))throw new Error("ojCheckboxset cannot be bound to a fieldset. Use a div instead.");e.uniqueId(),n.RadioCheckboxUtils.generateOptionsFromData.call(this),this._processOjOptions(),this.$checkboxes=this._findCheckboxesWithMatchingName(),this.$checkboxes._ojRadioCheckbox().attr("data-oj-internal",""),this.uiCheckboxset=e.addClass("oj-checkboxset oj-component").attr("role","group"),$(e.get(0).childNodes).filter(function(){return!(this.getAttribute&&"contextMenu"===this.getAttribute("slot"))}).wrapAll("<div class='oj-checkboxset-wrapper'></div>"),this._on(this._events),this._setup()},_ResetComponentState:function(){this._processOjOptions(),this.$checkboxes=this._findCheckboxesWithMatchingName(),this.$checkboxes.filter(".oj-checkbox").each(function(){var e=void 0!==$(this).attr("disabled")&&!!$(this).prop("disabled");$(this)._ojRadioCheckbox("option","disabled",e)}),this.$checkboxes.not(".oj-checkbox")._ojRadioCheckbox()},GetFocusElement:function(){return this._GetContentElement().not(":disabled").first()[0]},_SetDisabledDom:function(){},_IsRequired:function(){return this.options.required},_refreshRequired:n.EditableValueUtils._refreshRequired,_processOjOptions:function(){if(this._IsCustomElement()){var e,t,i=!1,n=!1,o=this._customOptionRenderer.bind(this),s=this.element.children("oj-option");if(s.length>0)for(e=0,t=s.length;e<t;e++)s[e].customOptionRenderer=o,this._needSeparator=!0,this.options.readOnly?(i||(i=this._isFirstSelectedOption(s[e]),this._needSeparator=!1),this._processReadonlyOptions(s[e],!1)):this._initInputLabelFromOjOption(s[e]);if((s=this.element.children(".oj-checkboxset-wrapper").find("oj-option")).length>0)for(e=0,t=s.length;e<t;e++)s[e].customOptionRenderer=o,this.options.readOnly?(n||(n=this._isFirstSelectedOption(s[e]),this._needSeparator=!1),this._processReadonlyOptions(s[e],!0)):this._initInputLabelFromOjOption(s[e])}},_isFirstSelectedOption:function(e){var t=e.value;return this.options.value.indexOf(t)>-1},_processReadonlyOptions:function(e,t){var i,n=this.options.value,o=e.value,s=n.length;if(t){i=e;do{i=i.parentElement}while(i&&!i.classList.contains("oj-choice-item"));i&&i.classList.contains("oj-choice-item")&&"SPAN"===i.tagName&&i.classList.add("oj-helper-hidden")}else e.classList.add("oj-helper-hidden");if(n&&0!==s)n.indexOf(o)>-1&&this._initReadonlyLabelFromOjOption(e,i);else{var r=document.createElement("span"),a=this.getTranslatedString("readonlyNoValue");null!==a&&(r.textContent=a),e.parentElement.insertBefore(r,e)}},_initInputLabelFromOjOption:function(e){var t,i,n=e;$(n).uniqueId();var o=n.getAttribute("id"),s=o+"|cb",r=document.getElementById(s);if(null!==r){i=n;do{i=i.parentElement}while(i&&"LABEL"!==i.tagName);if(i&&(n.textContent&&""!==n.textContent?i.classList.remove("oj-helper-hidden"):i.classList.add("oj-helper-hidden")),!this.options.readOnly){var a=n;do{a=a.parentElement}while(a&&!a.classList.contains("oj-choice-item"));a&&a.classList.contains("oj-helper-hidden")&&a.classList.contains("oj-choice-item")&&"SPAN"===a.tagName&&a.classList.remove("oj-helper-hidden"),n&&n.classList.contains("oj-helper-hidden")&&n.classList.remove("oj-helper-hidden"),r&&r.parentElement.classList.contains("oj-helper-hidden")&&r.parentElement.classList.remove("oj-helper-hidden")}}else t=document.createElement("span"),r=document.createElement("input"),i=document.createElement("label"),t.setAttribute("class","oj-choice-item"),r.setAttribute("type","checkbox"),r.setAttribute("value",n.value),r.setAttribute("id",s),i.setAttribute("for",s),n.textContent&&""!==n.textContent||i.classList.add("oj-helper-hidden"),n.parentElement.insertBefore(t,n),i.appendChild(n),t.appendChild(r),t.appendChild(i);var l=this.element[0].id,u=n.getAttribute("aria-label"),d=n.getAttribute("aria-labelledby");r.setAttribute("data-oj-option-id",o),l&&""!==l?r.setAttribute("name",l):r.removeAttribute("name"),u&&""!==u?r.setAttribute("aria-label",u):r.removeAttribute("aria-label"),d&&""!==d?r.setAttribute("aria-labelledby",d):r.removeAttribute("aria-labelledby"),n.disabled?r.setAttribute("disabled",!0):r.removeAttribute("disabled")},_initReadonlyLabelFromOjOption:function(e,t){var i,n=e;if(t){$(n).uniqueId();var o=n.getAttribute("id")+"|cb",s=document.getElementById(o);if(null!==s&&s.parentElement.classList.add("oj-helper-hidden"),t.classList.remove("oj-helper-hidden"),this.element.hasClass("oj-choice-direction-row")&&!this._needSeparator){var r=e.parentElement,a=r.innerText;a&&", "===a.substring(0,2)&&(r.innerText=a.substring(2)),this._needSeparator=!0}}else{e.classList.remove("oj-helper-hidden");var l=document.createElement("span");if(i=document.createElement("label"),n.parentElement.insertBefore(l,n),l.setAttribute("class","oj-choice-item"),this.element.hasClass("oj-choice-direction-row")){if(this._needSeparator){var u=document.createTextNode(", ");i.appendChild(u)}else this._needSeparator=!0;i.appendChild(n)}else i.setAttribute("class","oj-checkbox-label"),i.appendChild(n);l.appendChild(i)}},_customOptionRenderer:function(e){var t=e,i=t.getAttribute("id")+"|cb",n=document.getElementById(i);null!==n&&n.classList.contains("oj-checkbox")&&$(n)._ojRadioCheckbox("option","disabled",t.disabled)},_updateLabelledBy:n.EditableValueUtils._updateLabelledBy,_findCheckboxesWithMatchingName:function(){var t,i,n=this.element.find("input[type=checkbox]:first");return 0===n.length&&e.warn("Could not find any input type=checkbox within this element"),void 0===(t=n.attr("name"))?this.element.find("input[type=checkbox]").not("[name]"):(i='input[type=checkbox][name="'+t+'"]',this.element.find(i))},_NotifyContextMenuGesture:function(e,t,i){var n=this.element.find("input[type=checkbox]:tabbable").first();this._OpenContextMenu(t,i,{launcher:n})},_GetMessagingLauncherElement:function(){return this.widget()},_setup:function(){this._propagateDisabled(this.options.disabled),null!==this.$checkboxes&&(1===this.$checkboxes.length?this.element.addClass("oj-checkboxset-single"):this.element.removeClass("oj-checkboxset-single")),this.element.hasClass("oj-choice-direction-column")||this.element.hasClass("oj-choice-direction-row")||this.element.addClass("oj-choice-direction-column"),this._refreshRequired(this.options.required),this._updateLabelledBy(null,this.options.labelledBy,this.widget())},_events:{change:function(e){this._HandleChangeEvent(e)}},_checkValueType:function(e){void 0===e?this.option("value",[],{_context:{writeback:!0,internalSet:!0}}):this._confirmValueIsArray(e)},_confirmValueIsArray:function(e){if(!Array.isArray(e))throw new Error("Invalid 'value' set on JET Checkboxset: "+e+".It must be an Array. ")},_HandleChangeEvent:function(e){var t,i;(i=this.$checkboxes).length>0&&i.each(function(){this===e.target&&$(this)._ojRadioCheckbox("setSelectedClass",e.target.checked)}),t=this._GetDisplayValue(),this._SetValue(t,e,xi)},_GetDisplayValue:function(e){return this._GetElementValue()},_SetDisplayValue:function(e){var t,i,n,o,s=this.$checkboxes.length;if(this._checkValueType(e),null==e||0===e.length)this.$checkboxes._ojRadioCheckbox("option","checked",!1);else for(t=0;t<s;t++){n=this.$checkboxes[t],o=$(n),i=this._GetOptionValue(n);var r=this._GetOptionIndex(e,i),a=o._ojRadioCheckbox("option","checked");-1!==r?a||o._ojRadioCheckbox("option","checked",!0):a&&o._ojRadioCheckbox("option","checked",!1)}},_GetElementValue:function(){var e=this,t=[],i=this.$checkboxes.filter(":checked");return 0===i.length?[]:(i.each(function(){t.push(e._GetOptionValue(this))}),t)},_GetOptionIndex:function(e,t){var i,o=e.indexOf(t);if(-1===o){i=e.length;for(var s=0;s<i;s++)if(n.Object.compareValues(e[s],t)){o=s;break}}return o},_GetOptionValue:function(e){var t,i;return this._IsCustomElement()?(t=document.getElementById(e.getAttribute("data-oj-option-id")))&&(i=t.value):i=e.value,i},_GetDefaultStyleClass:function(){return"oj-checkboxset"},_GetContentElement:function(){return null!=this.$checkboxes?this.$checkboxes:(this.$checkboxes=this._findCheckboxesWithMatchingName(),this.$checkboxes)},_AriaRequiredUnsupported:function(){return!0},_AfterSetOptionRequired:n.EditableValueUtils._AfterSetOptionRequired,_propagateDisabled:function(e){var t=!!e;this.$checkboxes.each(function(){$(this).data("oj-_ojRadioCheckbox").__setAncestorComponentDisabled(t)}),this.$checkboxes._ojRadioCheckbox("refreshDisabled")},_setOption:function(e,t,i){var o=this.options.labelledBy;switch(this._super(e,t,i),e){case"disabled":this._propagateDisabled(t);break;case"readOnly":this.options.readOnly=!!t,this._processOjOptions();break;case"value":this._processOjOptions();break;case"labelledBy":this._updateLabelledBy(o,t,this.widget());break;case"options":n.RadioCheckboxUtils.generateOptionsFromData.call(this);break;case"optionsKeys":case"optionRenderer":n.RadioCheckboxUtils.renderOptions.call(this)}},_AfterSetOption:function(e,t,i){switch(this._superApply(arguments),e){case"required":this._AfterSetOptionRequired(e)}},getNodeBySubId:function(e){var t,i,n=this._super(e);if(!n)switch(t=this.$checkboxes.get(),e.subId){case"oj-checkboxset-inputs":n=t;break;case"oj-checkboxset-checkbox":if(void 0!==(i=e.value)){var o,s,r=t.length,a=[];for(o=0;o<r;o++)a[o]=this._GetOptionValue(t[o]);-1!==(s=this._GetOptionIndex(a,i))&&(n=t[s])}}return n||null},getSubIdByNode:function(e){for(var t=this._GetContentElement()[0].parentElement.parentElement.parentElement,i=e;i&&i!==t;){if("LABEL"===i.nodeName&&(i=document.getElementById(i.for)),"INPUT"===i.nodeName)return{subId:"oj-checkboxset-checkbox",value:this._GetOptionValue(i)};i=i.parentElement}return this._super(e)},_destroy:function(){var e=this._super(),t=this.element[0].firstElementChild;return this.$checkboxes&&this.$checkboxes._ojRadioCheckbox("destroy"),$(t).contents().unwrap(),n.RadioCheckboxUtils.removeDataListener.call(this),e}}),Li.extension._WIDGET_NAME="ojCheckboxset",Li.extension._ALIASED_PROPS={readonly:"readOnly"},n.CustomElementBridge.register("oj-checkboxset",{metadata:Li});var Ni,Pi,ji,Mi={properties:{disabled:{type:"boolean",value:!1},expandArea:{type:"string",enumValues:["disclosureIcon","header"],value:"header"},expanded:{type:"boolean",writeback:!0,value:!1},translations:{type:"object",value:{}}},methods:{refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojBeforeExpand:{},ojExpand:{},ojBeforeCollapse:{},ojCollapse:{}},extension:{}};Ni=0,Pi="oj-collapsible-open-icon",ji="oj-collapsible-close-icon",n.__registerWidget("oj.ojCollapsible",$.oj.baseComponent,{widgetEventPrefix:"oj",options:{expanded:!1,disabled:!1,expandOn:"click",expandArea:"header",beforeExpand:null,expand:null,beforeCollapse:null,collapse:null},_ComponentCreate:function(){this._super(),this.element.addClass("oj-collapsible oj-component"),this._processPanels(),this._refresh(),this._initialRender=!0;var e=this.element[0];this._expandCollapseHandler(this._createEventObject(e,this.options.expanded?"ojexpand":"ojcollapse")),this._initialRender=void 0},_createEventObject:function(e,t){return{type:t,target:e,currentTarget:e,preventDefault:$.noop}},_NotifyContextMenuGesture:function(e,t,i){this._OpenContextMenu(t,i,{launcher:this._getCollapsibleIcon().first()})},_createIcons:function(){var e=this.options.expanded?Pi:ji;(this._isDisabled()?$("<span>"):$("<a href='#'>")).addClass("oj-component-icon oj-clickable-icon-nocontext oj-collapsible-header-icon "+e).attr("aria-labelledby",this.header.attr("id")).prependTo(this.header)},_destroyIcons:function(){this.header.children(".oj-collapsible-header-icon").remove()},_destroy:function(){this._resolveBusyContext(),this._cleanup(),this.element.removeClass("oj-collapsible oj-component oj-expanded oj-collapsed oj-disabled"),this._isDisabled()&&this._findFocusables(this.header).removeAttr("tabIndex"),this.header.removeClass("oj-collapsible-header").each(function(){/^oj-collapsible/.test(this.id)&&this.removeAttribute("id")}),this._findFirstFocusableInHeader().removeAttr("role").removeAttr("aria-controls").removeAttr("aria-expanded").removeAttr("aria-disabled"),this._destroyIcons(),this.content.css("display","").removeAttr("aria-hidden").removeAttr("tabIndex").removeClass("oj-component-content oj-collapsible-content").each(function(){/^oj-collapsible/.test(this.id)&&this.removeAttribute("id")})},_cleanup:function(){this._tearDownEvents(),this.content&&(n.DomUtils.unwrap(this.content),this.wrapper=null)},_isDisabled:function(){return this.element.hasClass("oj-disabled")},_getExpandAreaSelector:function(){return"header"===this.options.expandArea?"> .oj-collapsible-header":"> .oj-collapsible-header > .oj-collapsible-header-icon"},_getCollapsibleIcon:function(){return this.header.find(".oj-collapsible-header-icon")},_setOption:function(e,t,i){if("expanded"!==e){if("disabled"===e)return this._super(e,t,i),void this.refresh();"expandOn"===e||"expandArea"===e?(this._tearDownEvents(),this._super(e,t,i),this._setupEvents()):this._super(e,t,i)}else{if(t===this.options.expanded)return;t?this.expand(!0):this.collapse(!0)}},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var t=$.ui.keyCode;switch(e.keyCode){case t.SPACE:case t.ENTER:this._toggleHandler(e)}}},refresh:function(){this._super(),this._cleanup(),this._processPanels(),this._destroyIcons(),this._refresh()},_processHeaderSlots:function(){var e,t=this.element[0],i=!1,o=n.BaseCustomElementBridge.getSlotMap(t).header;if(o&&o.length)if(1===o.length)e=o[0];else{var s=$("<span slot='header'></span>");e=s[0];for(var r=0;r<o.length;r++)e.appendChild(o[r]);s.children().attr("slot",""),i=!0}else e=$("<span slot='header'></span>")[0],i=!0;return(i||0!==this.element.children().index(e))&&t.insertBefore(e,t.firstChild),$(e)},_processDefaultSlots:function(){var e,t=this.element[0],i=n.BaseCustomElementBridge.getSlotMap(t)[""];if(i&&1===i.length)e=i[0];else{if(e=$("<div></div>")[0],i&&i.length)for(var o=0;o<i.length;o++)e.appendChild(i[o]);t.appendChild(e)}return $(e)},_processPanels:function(){this._IsCustomElement()?this.header=this._processHeaderSlots():this.header=this.element.children(":first-child"),this.header.addClass("oj-collapsible-header"),this._IsCustomElement()?this.content=this._processDefaultSlots():this.content=this.header.next(),this.content.addClass("oj-collapsible-content oj-component-content"),this.content.wrap("<div></div>"),this.wrapper=this.content.parent().addClass("oj-collapsible-wrapper"),this.options.disabled&&this.element.addClass("oj-disabled"),this._isDisabled()&&this._findFocusables(this.header).attr("tabIndex",-1)},_refresh:function(){var e=this.header,t=this.content,i=this.options,n=this.element.attr("id");n||(n=Ni+=1);var o="oj-collapsible-"+n;this.collapsibleId=o;var s=e.attr("id"),r=t.attr("id");s||(s=o+"-header",e.attr("id",s)),r||(r=o+"-content",t.attr("id",r)),this._createIcons();var a=this._findFirstFocusableInHeader();a.attr("role","button").attr("aria-controls",r).attr("aria-expanded",i.expanded),this._isDisabled()&&a.attr("aria-disabled","true"),i.expanded?t.removeAttr("aria-hidden"):(this.wrapper.css({"max-height":0,"overflow-y":"hidden",display:"none"}),t.attr("aria-hidden","true")),this._setupEvents()},_setupEvents:function(){var e={keydown:this._keydown},t=this.options.expandOn;if(t){var i=this;$.each(t.split(" "),function(t,o){n.DomUtils.isValidIdentifier(o)&&(e[o]=i._toggleHandler)})}var o=this.element.find(this._getExpandAreaSelector());this._on(o,e),this._on(this.wrapper,{transitionend:this._transitionEndHandler,webkitTransitionEnd:this._transitionEndHandler}),this._isDisabled()||(this._on(this.element,{ojfocus:this._focusHandler,ojfocusout:this._focusHandler}),this._focusable({element:this._getCollapsibleIcon(),applyHighlight:!0}),this._AddHoverable(o),this._AddActiveable(o))},_tearDownEvents:function(){var e=this.element.find(this._getExpandAreaSelector());this._RemoveHoverable(e),this._RemoveActiveable(e),this._off(e),this.wrapper&&this._off(this.wrapper),this._off(this.element.add(this.content))},_toggleHandler:function(e){this._isDisabled()||e.isDefaultPrevented()||(this.options.expanded?this.collapse(!0,e):this.expand(!0,e),e.preventDefault(),e.stopPropagation(),this._getCollapsibleIcon().focus())},_calcEffectTime:function(e){for(var t=e.css("transitionProperty"),i=e.css("transitionDelay"),n=e.css("transitionDuration"),o=t.split(","),s=i.split(","),r=n.split(","),a=o.length,l=s.length,u=r.length,d=0,h=0;h<a;h++){var c=r[h%u],p=c.indexOf("ms")>-1?parseFloat(c):1e3*parseFloat(c);if(p>0){var _=s[h%l],m=_.indexOf("ms")>-1?parseFloat(_):1e3*parseFloat(_);d=Math.max(d,m+p)}}return d+100},_resolveTransition:function(e){var t=this;this._transitionTimer=setTimeout(function(){t._transitionEndHandler()},t._calcEffectTime(e))},_expandCollapseHandler:function(e){if((!this._isDisabled()||this._initialRender)&&e.target===this.element[0]&&(this._initialRender||!e.isDefaultPrevented||!e.isDefaultPrevented())){var t=this.element,i=this.content,n=this.wrapper,o="ojexpand"===e.type,s=this;if(e.preventDefault(),this._initialRender||this._changeExpandedOption(o),this._getCollapsibleIcon().toggleClass(Pi,o).toggleClass(ji,!o||!1).end(),this._initialRender||document.hidden||this.element.hasClass("oj-collapsible-skip-animation"))o||(n.css("max-height",0),n.hide()),s._afterExpandCollapse(o,e);else{if(n.contentHeight=n.outerHeight(),!this._animationResolve){var r=c.getContext(t[0]).getBusyContext();this._animationResolve=r.addBusyState({description:"The collapsible id='"+this.element.attr("id")+"' is animating."})}this._transitionEnded=!1,o?(n.show(),setTimeout(function(){n.contentHeight+=i.outerHeight(),n.addClass("oj-collapsible-transition").css({"max-height":n.contentHeight}),s._resolveTransition(n)},0)):(n.removeClass("oj-collapsible-transition"),n.css({"max-height":n.contentHeight,"overflow-y":"hidden"}),0===n.contentHeight?s._transitionEndHandler():setTimeout(function(){n.addClass("oj-collapsible-transition").css({"max-height":0}),s._resolveTransition(n)},20))}}},_focusHandler:function(e){this._isDisabled()||("ojfocusout"===e.type?(this._findFirstFocusableInHeader().attr("tabIndex",-1),e.preventDefault(),e.stopPropagation()):"ojfocus"===e.type&&(this._findFirstFocusableInHeader().attr("tabIndex",0).focus(),e.preventDefault(),e.stopPropagation()))},_findFirstFocusableInHeader:function(){return this._findFocusables(this.header).first()},_findFocusables:function(e){return this._isDisabled()?e.find("span"):e.find("a,:input")},expand:function(e,t){if(!this._isDisabled()){var i={header:this.header,content:this.content};e&&!1===this._trigger("beforeExpand",t,i)||this._expandCollapseHandler(this._createEventObject(this.element[0],"ojexpand"))}},collapse:function(e,t){if(!this._isDisabled()){var i={header:this.header,content:this.content};e&&!1===this._trigger("beforeCollapse",t,i)||this._expandCollapseHandler(this._createEventObject(this.element[0],"ojcollapse"))}},_transitionEndHandler:function(e){if(!(this._isDisabled()||e&&e.target!==this.element[0])){var t=!1;e&&e.originalEvent&&(t="max-height"===e.originalEvent.propertyName),t&&this._transitionTimer&&(clearTimeout(this._transitionTimer),this._transitionTimer=void 0),e&&(e.preventDefault(),e.stopImmediatePropagation()),this._transitionEnded||(!t&&e||(this._transitionEnded=!0),this.options.expanded?this.wrapper.css({"max-height":9999,"overflow-y":""}):this.wrapper.hide(),this.wrapper.removeClass("oj-collapsible-transition"),this._afterExpandCollapse(this.options.expanded,e))}},_resolveBusyContext:function(){this._animationResolve&&(this._animationResolve(),this._animationResolve=null)},_afterExpandCollapse:function(e,t){var i=this.element,n=this.wrapper;e?(i.removeClass("oj-collapsed"),i.addClass("oj-expanded"),w.subtreeShown(n[0])):(i.removeClass("oj-expanded"),i.addClass("oj-collapsed"),w.subtreeHidden(n[0])),e?this.content.removeAttr("aria-hidden"):this.content.attr("aria-hidden","true"),this._findFirstFocusableInHeader().attr("aria-expanded",e),this._resolveBusyContext();var o={header:this.header,content:this.content};this._initialRender||(e?this._trigger("expand",t,o):this._trigger("collapse",t,o))},_changeExpandedOption:function(e){this.option("expanded",e,{_context:{writeback:!0,internalSet:!0}})},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;switch(e.subId){case"oj-collapsible-content":return this.content[0];case"oj-collapsible-header":return this.header[0];case"oj-collapsible-disclosure":case"oj-collapsible-header-icon":return this._getCollapsibleIcon()[0]}return null},getSubIdByNode:function(e){for(var t=this.getNodeBySubId({subId:"oj-collapsible-disclosure"}),i=e;i;){if(i===this.content[0])return{subId:"oj-collapsible-content"};if(i===this.header[0])return{subId:"oj-collapsible-header"};if(i===t)return{subId:"oj-collapsible-disclosure"};i=i.parentElement}return null}}),Mi.extension._WIDGET_NAME="ojCollapsible",Mi.extension._CONTROLS_SUBTREE_HIDDEN=!0,n.CustomElementBridge.register("oj-collapsible",{metadata:Mi}),n.CollectionCellSet=function(e,t,i,o,s){n.Assert.assertArrayOrNull(s),this.m_startRow=e,this.m_endRow=t,this.m_startColumn=i,this.m_endColumn=o,this.m_columns=s},n.CollectionCellSet.prototype.setModels=function(e){n.Assert.assertArray(e),null!=e&&e.length===this.getCount("row")&&(this.m_models=e)},n.CollectionCellSet.prototype.getData=function(e){var t=this._getModel(e);if(null==t)return null;var i=this.m_columns[e.column],n={};return Object.defineProperty(n,"data",{enumerable:!0,get:function(){return t.get(i)},set:function(e){t.set(i,e,{silent:!0})}}),n},n.CollectionCellSet.prototype.getMetadata=function(e){var t=this._getModel(e);if(null==t)return null;var i=e.column;return{keys:{row:n.CollectionDataGridUtils._getModelKey(t),column:this.m_columns[i]}}},n.CollectionCellSet.prototype._getModel=function(e){if(null==this.m_models)return null;n.Assert.assertObject(e);var t=e.row,i=e.column;return n.Assert.assert(t>=this.m_startRow&&t<=this.m_endRow&&i>=this.m_startColumn&&i<=this.m_endColumn),this.m_models[t-this.m_startRow]},n.CollectionCellSet.prototype.getCount=function(e){return"row"===e?Math.max(0,this.m_endRow-this.m_startRow):"column"===e?Math.max(0,this.m_endColumn-this.m_startColumn):0},n.CollectionCellSet.prototype.getExtent=function(e){return{row:{extent:1,more:{before:!1,after:!1}},column:{extent:1,more:{before:!1,after:!1}}}},n.CollectionCellSet.prototype.getStartRow=function(){return this.m_startRow},n.CollectionCellSet.prototype.getEndRow=function(){return this.m_endRow},n.CollectionCellSet.prototype.getStartColumn=function(){return this.m_startColumn},n.CollectionCellSet.prototype.getEndColumn=function(){return this.m_endColumn},n.CollectionCellSet.prototype.getColumns=function(){return this.m_columns},n.CollectionDataGridDataSource=function(e,t){this.collection=e,null!=t&&(this.rowHeader=t.rowHeader,this.columns=t.columns),this._setSortInfo(),n.CollectionDataGridDataSource.superclass.constructor.call(this)},n.Object.createSubclass(n.CollectionDataGridDataSource,n.DataGridDataSource,"oj.CollectionDataGridDataSource"),n.CollectionDataGridDataSource.prototype.Init=function(){n.CollectionDataGridDataSource.superclass.Init.call(this),this.pendingHeaderCallback={},this._registerEventListeners()},n.CollectionDataGridDataSource.prototype._registerEventListeners=function(){this.collection.on("add",this._handleModelAdded.bind(this)),this.collection.on("remove",this._handleModelDeleted.bind(this)),this.collection.on("change",this._handleModelChanged.bind(this)),this.collection.on("refresh",this._handleCollectionRefresh.bind(this)),this.collection.on("reset",this._handleCollectionReset.bind(this))},n.CollectionDataGridDataSource.prototype._isDataAvailable=function(){return null!=this.data},n.CollectionDataGridDataSource.prototype.getCount=function(e){if(void 0===this.precision&&(this.precision={}),"row"===e){var t=this._totalSize();return-1===t||0===t&&(!this._isDataAvailable()||this._size()>0)?(this.precision[e]="estimate",-1):(this.precision[e]="exact",this._size())}return"column"===e?null!=this.columns?(this.precision[e]="exact",this.columns.length):(this.precision[e]="estimate",-1):0},n.CollectionDataGridDataSource.prototype.getCountPrecision=function(e){return void 0!==this.precision&&void 0!==this.precision[e]||this.getCount(e),this.precision[e]},n.CollectionDataGridDataSource.prototype.fetchHeaders=function(e,t,i){if(null!=t){var n=e.axis,o={};o.headerRange=e,o.callbacks=t,o.callbackObjects=i,this.pendingHeaderCallback[n]=o}},n.CollectionDataGridDataSource.prototype._handleHeaderFetchSuccess=function(e,t,i,o){var s,r,a=e.axis,l=e.start,u=e.count;if("column"===a)null!=this.columns&&(s=Math.min(this.columns.length,l+u),r=new n.CollectionHeaderSet(l,s,this.columns,void 0,this._sortInfo));else if("row"===a&&null!=this.rowHeader)return null!=o&&(u=o.count),s=Math.min(this._size(),l+u),r=new n.CollectionHeaderSet(l,s,this.columns,this.rowHeader),void this._resolveModels(l,s,r,e,t,i);null!=t&&t.success&&t.success.call(i.success,r,e,null)},n.CollectionDataGridDataSource.prototype._getRanges=function(e){for(var t,i,n,o,s=0;s<e.length;s++){var r=e[s];"row"===r.axis?(t=r.start,i=r.count):"column"===r.axis&&(n=r.start,o=r.count)}return{rowStart:t,rowCount:i,colStart:n,colCount:o}},n.CollectionDataGridDataSource.prototype._handleCellFetchSuccess=function(e,t,i,o){var s,r=this._getRanges(e),a=r.rowStart;s=null!=o?Math.min(this._size(),a+o.count):Math.min(this._size(),a+r.rowCount);var l=r.colStart,u=Math.min(null==this.columns?0:this.columns.length,l+r.colCount),d=new n.CollectionCellSet(a,s,l,u,this.columns);this._resolveModels(a,s,d,e,t,i)},n.CollectionDataGridDataSource.prototype._resolveModels=function(e,t,i,n,o,s){for(var r=[],a=e;a<t;a++)r.push(this.collection.at(a,{deferred:!0}));Promise.all(r).then(function(e){i.setModels(e),o.success.call(s.success,i,n)})},n.CollectionDataGridDataSource.prototype.fetchCells=function(e,t,i){null!=t&&(this.pendingCellCallback={},this.pendingCellCallback.cellRanges=e,this.pendingCellCallback.callbacks=t,this.pendingCellCallback.callbackObjects=i),this._fetchCells(e)},n.CollectionDataGridDataSource.prototype._processPendingHeaderCallbacks=function(e){var t=this.pendingHeaderCallback[e];if(null!=t){var i,n=t.headerRange,o=t.callbacks,s=t.callbackObjects;"row"===e&&(i=t.actualRange),this._handleHeaderFetchSuccess(n,o,s,i),this.pendingHeaderCallback[e]=null}},n.CollectionDataGridDataSource.prototype._processPendingCellCallbacks=function(){var e=this.pendingCellCallback.cellRanges,t=this.pendingCellCallback.callbacks,i=this.pendingCellCallback.callbackObjects,n=this.pendingCellCallback.actualRange;this._handleCellFetchSuccess(e,t,i,n),this.pendingCellCallback=null},n.CollectionDataGridDataSource.prototype._fetchCells=function(e){var t=this._getRanges(e),i=t.rowStart,n=t.rowCount;this.collection.setRangeLocal(i,n).then(function(t){this.data=!0,this._setActualCallbackRanges(t.start,t.count),void 0!==this.columns?this._fetchCellsComplete(e):this.collection.at(i,{deferred:!0}).then(function(t){null!=t&&this._setupColumns(t),this._fetchCellsComplete(e)}.bind(this))}.bind(this),function(e){this._fetchCellsError(e)}.bind(this))},n.CollectionDataGridDataSource.prototype._fetchCellsError=function(t){e.error(t),null!=this.pendingHeaderCallback&&(this._processPendingHeaderErrorCallbacks("column",t),this._processPendingHeaderErrorCallbacks("row",t)),null!=this.pendingCellCallback&&this._processPendingCellErrorCallbacks(t)},n.CollectionDataGridDataSource.prototype._processPendingHeaderErrorCallbacks=function(e,t){var i=this.pendingHeaderCallback[e];if(null!=i){var n=i.callbacks,o=i.callbackObjects,s=i.headerRange;n.error&&n.error.call(o.error,t,s),this.pendingHeaderCallback[e]=null}},n.CollectionDataGridDataSource.prototype._processPendingCellErrorCallbacks=function(e){var t=this.pendingCellCallback.callbacks,i=this.pendingCellCallback.callbackObjects,n=this.pendingCellCallback.cellRanges;t.error&&t.error.call(i.error,e,n),this.pendingCellCallback=null},n.CollectionDataGridDataSource.prototype._fetchCellsComplete=function(e){this.pendingCellCallback.cellRanges===e&&(null!=this.pendingHeaderCallback&&(this._processPendingHeaderCallbacks("column"),this._processPendingHeaderCallbacks("row")),null!=this.pendingCellCallback&&this._processPendingCellCallbacks())},n.CollectionDataGridDataSource.prototype._setActualCallbackRanges=function(e,t){var i={start:e,count:t};null!=this.pendingHeaderCallback.row&&(this.pendingHeaderCallback.row.actualRange=i),null!=this.pendingCellCallback&&(this.pendingCellCallback.actualRange=i)},n.CollectionDataGridDataSource.prototype._setupColumns=function(e){this.columns=e.keys(),-1!==this.columns.indexOf(this.rowHeader)&&this.columns.splice(this.columns.indexOf(this.rowHeader),1)},n.CollectionDataGridDataSource.prototype.keys=function(e){var t=e.row,i=e.column,o=this;return new Promise(function(e){o.collection.at(t,{deferred:!0}).then(function(t){if(null==t)e({row:null,column:null});else{var s=n.CollectionDataGridUtils._getModelKey(t);null==o.columns&&o._setupColumns(t);var r=o.columns[i];e({row:s,column:r})}})})},n.CollectionDataGridDataSource.prototype.indexes=function(e){var t=e.row,i=e.column,n=this;return new Promise(function(e){n.collection.indexOf(t,{deferred:!0}).then(function(t){var o=-1;-1!==t&&null==n.columns?n.collection.at(t,{deferred:!0}).then(function(s){n._setupColumns(s),o=n.columns.indexOf(i),e({row:t,column:o})}):(null!=n.columns&&(o=n.columns.indexOf(i)),e({row:t,column:o}))})})},n.CollectionDataGridDataSource.prototype.getCapability=function(e){return"sort"===e?"column":"move"===e?"row":null},n.CollectionDataGridDataSource.prototype.sort=function(e,t,i){if(null==i&&(i={}),null!=e){var n=e.direction,o=e.key;if("column"===e.axis){var s;if(this.collection.IsVirtual())this.collection.comparator=o,this.collection.sortDirection="ascending"===n?1:-1;else"ascending"===n?s=function(e,t){var i=e.get(o),n=t.get(o),s=isNaN(i),r=isNaN(n);return i instanceof Date&&(i=i.toISOString(),s=!0),n instanceof Date&&(n=n.toISOString(),r=!0),s&&r?i<n?-1:i===n?0:1:s?1:r?-1:i-n}:"descending"===n&&(s=function(e,t){var i=e.get(o),n=t.get(o),s=isNaN(i),r=isNaN(n);return i instanceof Date&&(i=i.toISOString()),n instanceof Date&&(n=n.toISOString()),s&&r?i>n?-1:i===n?0:1:s?-1:r?1:n-i}),this.collection.comparator=s;this.collection.sort(),this._setSortInfo(o),null!=t&&null!=t.success&&t.success.call(i.success)}else null!=t&&null!=t.error&&t.error.call(i.error,"Axis value not supported")}else this._resetSortOrder(t,i)},n.CollectionDataGridDataSource.prototype._resetSortOrder=function(e,t){this.collection.comparator=null,this.collection.reset(),null!=e&&null!=e.success&&e.success.call(t.success)},n.CollectionDataGridDataSource.prototype._setSortInfo=function(e){var t=this.collection.comparator,i=-1===this.collection.sortDirection?"descending":"ascending";null!=e||"function"!=typeof t?(this._sortInfo={},this._sortInfo.axis="column",this._sortInfo.direction=i,this._sortInfo.key=null==e?t:null):this._sortInfo={}},n.CollectionDataGridDataSource.prototype.move=function(e,t,i,n,o){this.collection.get(e,{deferred:!0}).then(function(i){var s;null==t?(this.collection.remove(i),this.collection.add(i),null!=n&&null!=n.success&&n.success.call(o.success)):(e===t?(s=this.collection.indexOf(t,{deferred:!0}),this.collection.remove(i)):(this.collection.remove(i),s=this.collection.indexOf(t,{deferred:!0})),s.then(function(e){this.collection.add(i,{at:e,force:!0}),null!=n&&null!=n.success&&n.success.call(o.success)}.bind(this)))}.bind(this))},n.CollectionDataGridDataSource.prototype.moveOK=function(e,t,i){return"valid"},n.CollectionDataGridDataSource.prototype._getModelEvent=function(e,t,i,n,o){var s={};return s.source=this,s.operation=e,s.keys={row:t,column:i},s.indexes={row:n,column:o},s},n.CollectionDataGridDataSource.prototype._handleModelAdded=function(e,t,i){var o=n.CollectionDataGridUtils._getModelKey(e),s=this._getModelEvent("insert",o,null,e.index,-1);this.handleEvent("change",s)},n.CollectionDataGridDataSource.prototype._handleModelDeleted=function(e,t,i){var o=n.CollectionDataGridUtils._getModelKey(e),s=this._getModelEvent("delete",o,null,i.index,-1);this.handleEvent("change",s)},n.CollectionDataGridDataSource.prototype._handleModelChanged=function(e,t,i){var o=n.CollectionDataGridUtils._getModelKey(e),s=this._getModelEvent("update",o,null,e.index,-1);this.handleEvent("change",s)},n.CollectionDataGridDataSource.prototype._handleCollectionRefresh=function(){this.data=null;var e=this._getModelEvent("refresh",null,null);this.handleEvent("change",e)},n.CollectionDataGridDataSource.prototype._handleCollectionReset=function(){this.data=null;var e=this._getModelEvent("reset",null,null);this.handleEvent("change",e)},n.CollectionDataGridDataSource.prototype._size=function(){return this.collection.size()},n.CollectionDataGridDataSource.prototype._totalSize=function(){return void 0===this.collection.totalResults?-1:this.collection.totalResults},n.CollectionDataGridDataSource.prototype.getCollection=function(){return this.collection},n.CollectionDataGridDataSource.prototype.getColumns=function(){return this.columns},n.CollectionDataGridDataSource.prototype.getRowHeader=function(){return this.rowHeader},n.CollectionDataGridDataSource.prototype.getData=function(){return this.data},n.CollectionDataGridUtils=function(){},n.CollectionDataGridUtils._getModelKey=function(e){var t=e.GetId();return null==t&&(t=e.GetCid()),t},n.CollectionHeaderSet=function(e,t,i,o,s){n.Assert.assertArrayOrNull(i),this.m_start=e,this.m_end=t,this.m_headers=i,this.m_rowHeader=o,this.m_sortInfo=s},n.CollectionHeaderSet.prototype.setModels=function(e){n.Assert.assertArray(e),null!=e&&e.length===this.getCount()&&(this.m_models=e)},n.CollectionHeaderSet.prototype.getData=function(e,t){return n.Assert.assert(e<=this.m_end&&e>=this.m_start,"index out of bounds"),n.Assert.assert(null==t||0===t,"level out of bounds"),null!=this.m_rowHeader?null==this.m_models?null:this.m_models[e-this.m_start].get(this.m_rowHeader):this.m_headers[e]},n.CollectionHeaderSet.prototype.getMetadata=function(e,t){if(n.Assert.assert(e<=this.m_end&&e>=this.m_start,"index out of bounds"),n.Assert.assert(null==t||0===t,"level out of bounds"),null!=this.m_rowHeader){if(null==this.m_models)return null;var i=this.m_models[e-this.m_start];return{key:n.CollectionDataGridUtils._getModelKey(i)}}var o=this.getData(e,t);return this.m_sortInfo.key===o?{key:o,sortDirection:this.m_sortInfo.direction}:{key:o}},n.CollectionHeaderSet.prototype.getLevelCount=function(){return this.getCount()>0?1:0},n.CollectionHeaderSet.prototype.getExtent=function(e,t){return n.Assert.assert(e<=this.m_end&&e>=this.m_start,"index out of bounds"),n.Assert.assert(null==t||0===t,"level out of bounds"),{extent:1,more:{before:!1,after:!1}}},n.CollectionHeaderSet.prototype.getLabel=function(){return null},n.CollectionHeaderSet.prototype.getDepth=function(e,t){return n.Assert.assert(e<=this.m_end&&e>=this.m_start,"index out of bounds"),n.Assert.assert(null==t||0===t,"level out of bounds"),1},n.CollectionHeaderSet.prototype.getCount=function(){return Math.max(0,this.m_end-this.m_start)},n.CollectionHeaderSet.prototype.getStart=function(){return this.m_start},n.CollectionHeaderSet.prototype.getEnd=function(){return this.m_end},n.CollectionHeaderSet.prototype.getHeaders=function(){return this.m_headers},n.CollectionHeaderSet.prototype.getRowHeader=function(){return this.m_rowHeader};var Hi=function(){function e(e){this.collection=e,this._dataProviderAdapter=new n.TableDataSourceAdapter(new n.CollectionTableDataSource(e)),this.addEventListener=this._dataProviderAdapter.addEventListener.bind(this._dataProviderAdapter),this.removeEventListener=this._dataProviderAdapter.removeEventListener.bind(this._dataProviderAdapter),this.dispatchEvent=this._dataProviderAdapter.dispatchEvent.bind(this._dataProviderAdapter)}return e.prototype.destroy=function(){this._dataProviderAdapter.destroy()},e.prototype.fetchFirst=function(e){return this._dataProviderAdapter.fetchFirst(e)},e.prototype.fetchByKeys=function(e){return this._dataProviderAdapter.fetchByKeys(e)},e.prototype.containsKeys=function(e){return this._dataProviderAdapter.containsKeys(e)},e.prototype.fetchByOffset=function(e){return this._dataProviderAdapter.fetchByOffset(e)},e.prototype.getCapability=function(e){return this._dataProviderAdapter.getCapability(e)},e.prototype.getTotalSize=function(){return this._dataProviderAdapter.getTotalSize()},e.prototype.isEmpty=function(){return this._dataProviderAdapter.isEmpty()},e}();n.CollectionDataProvider=Hi,n.CollectionDataProvider=Hi,n.CollectionPagingDataSource=function(e){this.collection=e,this.current=0,this.Init(),this.dataWindow=[],this._noInit=!0;try{this._setPageSize(10)}finally{this._noInit=!1}},n.Object.createSubclass(n.CollectionPagingDataSource,n.DataSource,"oj.CollectionPagingDataSource"),n.CollectionPagingDataSource.prototype.Init=function(){n.CollectionPagingDataSource.superclass.Init.call(this)},n.CollectionPagingDataSource.prototype._getSize=function(){return this._hasMore()?this.currentPageSize:this.totalSize()-this.current},n.CollectionPagingDataSource.prototype._refreshDataWindow=function(){this.dataWindow=new Array(this._getSize());var e=this;return this.collection.IterativeAt(this.current,this.current+this.dataWindow.length).then(function(t){for(var i=0;i<t.length;i++)e.dataWindow[i]=t[i];e._refreshObservableDataWindow(),e._endIndex=e._startIndex+(e.dataWindow.length-1)})},n.CollectionPagingDataSource.prototype._refreshObservableDataWindow=function(){if(void 0!==this.observableDataWindow){this.observableDataWindow.removeAll();for(var e=0;e<this.dataWindow.length;e++)this.observableDataWindow.push(cn.map(this.dataWindow[e]))}},n.CollectionPagingDataSource.prototype.getWindow=function(){return this.dataWindow},n.CollectionPagingDataSource.prototype.getWindowObservable=function(){return void 0===this.observableDataWindow&&(this.observableDataWindow=ko.observableArray(),this._refreshObservableDataWindow()),this.observableDataWindow},n.CollectionPagingDataSource.prototype.getPage=function(){return this._page},n.CollectionPagingDataSource.prototype.setPage=function(e,t){t=t||{},e=parseInt(e,10);try{n.CollectionPagingDataSource.superclass.handleEvent.call(this,n.PagingModel.EventType.BEFOREPAGE,{page:e,previousPage:this._page})}catch(e){return Promise.reject(null)}this.pageSize=null!=t.pageSize?t.pageSize:this.pageSize,t.startIndex=e*this.pageSize;var i=this._page;this._page=e,this._startIndex=t.startIndex;var o=this;return new Promise(function(e,s){o._fetchInternal(t).then(function(){n.CollectionPagingDataSource.superclass.handleEvent.call(o,n.PagingModel.EventType.PAGE,{page:o._page,previousPage:i}),e(null)},function(){o._page=i,o._startIndex=o._page*o.pageSize,s(null)})})},n.CollectionPagingDataSource.prototype.getStartItemIndex=function(){return this._startIndex},n.CollectionPagingDataSource.prototype.getEndItemIndex=function(){return this._endIndex},n.CollectionPagingDataSource.prototype.getPageCount=function(){var e=this.totalSize();return-1===e?-1:Math.ceil(e/this.pageSize)},n.CollectionPagingDataSource.prototype.fetch=function(e){var t=e||{};if(void 0!==t.pageSize&&void 0!==t.startIndex){if(!this._hasMore())return this._processSuccess(null),Promise.resolve();this.currentPageSize=t.startIndex+t.pageSize;var i=this;return this._refreshDataWindow().then(function(){i._processSuccess(null)})}return this._fetchInternal(e)},n.CollectionPagingDataSource.prototype._fetchInternal=function(e){var t=e||{};void 0!==t.startIndex&&(this.current=t.startIndex),void 0!==t.pageSize&&(this.pageSize=t.pageSize,this.currentPageSize=t.pageSize);var i=this;return new Promise(function(e){try{i.collection.fetch({success:function(){i._refreshDataWindow().then(function(){i._processSuccess(t),e({data:i.getWindow(),startIndex:i.current})})}})}catch(n){i._refreshDataWindow().then(function(){i._processSuccess(t),e({data:i.getWindow(),startIndex:i.current})})}})},n.CollectionPagingDataSource.prototype._processSuccess=function(e){var t=e||{};t.silent||this.handleEvent("sync",{data:this.getWindow(),startIndex:this.current}),t.success&&t.success()},n.CollectionPagingDataSource.prototype.handleEvent=function(e,t){return n.CollectionPagingDataSource.superclass.handleEvent.call(this,e,t)},n.CollectionPagingDataSource.prototype._hasMore=function(){return this.current+this.currentPageSize<this.totalSize()},n.CollectionPagingDataSource.prototype._setPageSize=function(e){this.pageSize=e,this.currentPageSize=e},n.CollectionPagingDataSource.prototype.setFetchCallback=function(e){this.fetchCallback=e},n.CollectionPagingDataSource.prototype.size=function(){var e=this.getWindow();return e?e.length:0},n.CollectionPagingDataSource.prototype.totalSize=function(){return this.collection.length},n.CollectionPagingDataSource.prototype.totalSizeConfidence=function(){return"actual"},n.CollectionPagingDataSource.prototype.getCapability=function(e){return null},n.CollectionTableDataSource=function(e,t){if(this.data={},!(e instanceof T.Collection)){var i=n.TableDataSource._LOGGER_MSG._ERR_DATA_INVALID_TYPE_SUMMARY,o=n.TableDataSource._LOGGER_MSG._ERR_DATA_INVALID_TYPE_DETAIL;throw new Error(i+"\n"+o)}n.CollectionTableDataSource.superclass.constructor.call(this,e,t),this._collection=e,this._addCollectionEventListeners(),this.Init(),(null==t||"enabled"!==t.startFetch&&null!=t.startFetch)&&null!=t||(this._startFetchEnabled=!0)},n.Object.createSubclass(n.CollectionTableDataSource,n.TableDataSource,"oj.CollectionTableDataSource"),n.CollectionTableDataSource.prototype.comparator=null,n.CollectionTableDataSource.prototype.Init=function(){n.CollectionTableDataSource.superclass.Init.call(this)},n.CollectionTableDataSource.prototype.at=function(e,t){var i=t||{};i.deferred=!0;var o,s=this._collection.at(e,i),r=this;return r._isFetchingForAt=!0,new Promise(function(t,i){null!=s?s.then(function(i){r._isFetchingForAt=!1,o={data:i.attributes,index:e,key:i.id},t(o)},function(e){r._isFetchingForAt=!1,n.TableDataSource.superclass.handleEvent.call(r,n.TableDataSource.EventType.ERROR,e),i(e)}):t(null)})},n.CollectionTableDataSource.prototype.fetch=function(e){var t=e||{};return"init"!==t.fetchType||this._startFetchEnabled?this._fetchInternal(t):Promise.resolve()},n.CollectionTableDataSource.prototype.get=function(e,t){var i=t||{};i.deferred=!0;var o=this._collection.get(e,i),s=this;return new Promise(function(e,t){null!=o?o.then(function(t){if(t){var i={data:s._wrapWritableValue(t,t.attributes),index:t.index,key:t.id};e(i)}else e(null)},function(e){n.TableDataSource.superclass.handleEvent.call(s,n.TableDataSource.EventType.ERROR,e),t(e)}):e(null)})},n.CollectionTableDataSource.prototype.sort=function(e){null==e?e=this.sortCriteria:this.sortCriteria=e;var t=this.comparator,i=this;return new Promise(function(n){null==t?(i._collection.comparator=e.key,"ascending"===e.direction?i._collection.sortDirection=1:i._collection.sortDirection=-1):i._collection.comparator=t,i._collection.sort(null),n({header:e.key,direction:e.direction})})},n.CollectionTableDataSource.prototype.totalSize=function(){var e=this._collection.totalResults>=0?this._collection.totalResults:-1;if(e>-1){var t=this._collection.size();return t>e?t:e}if(this._fetchResultSize>0)e=this._fetchResultSize;else if("atLeast"===this.totalSizeConfidence())return this._collection.size();return e},n.CollectionTableDataSource.prototype.totalSizeConfidence=function(){return this._collection.totalResults>=0?"actual":this._collection.hasMore?"atLeast":"unknown"},n.CollectionTableDataSource.prototype._addCollectionEventListeners=function(){var e=this;this._collection.on(T.Events.EventType.SYNC,function(t){if(t instanceof T.Model)n.TableDataSource.superclass.handleEvent.call(e,n.TableDataSource.EventType.CHANGE,{data:[t.attributes],keys:[t.id],indexes:[t.index]});else if(t instanceof T.Collection&&!e._isFetchingForAt&&!e._isFetching){var i=t.offset,o=t.lastFetchCount||t.lastFetchSize;if(o>0||e._collection.IsVirtual()){e._startIndex=i,e._pageSize=o;var s=0;(e._collection.totalResults>0||e._collection.hasMore)&&(s=i+o),e._isFetchingForAt=!0,t.IterativeAt(i,s).then(function(t){e._isFetchingForAt=!1;for(var n=[],o=[],s=0;s<t.length;s++)if(null!=t[s]){var r=t[s],a=e._wrapWritableValue(r,r.attributes);n.push(a),o.push(r.id)}var l={data:n,keys:o,startIndex:i};e._endFetch.call(e,{silent:!1},l)})}else{var r=e._getRowArray();e._endFetch.call(e,{silent:!1},r)}}}),this._collection.on(T.Events.EventType.ALLADDED,function(t,i){for(var o=[],s=[],r=[],a=0;a<i.length;a++){var l=i[a],u=e._wrapWritableValue(l,l.attributes);o.push(u),s.push(l.id),r.push(l.index)}n.TableDataSource.superclass.handleEvent.call(e,n.TableDataSource.EventType.ADD,{data:o,keys:s,indexes:r})}),this._collection.on(T.Events.EventType.ALLREMOVED,function(t,i){for(var o=[],s=[],r=[],a=0;a<i.length;a++){var l=i[a];o.push(l.attributes),s.push(l.id),r.push(l.index)}n.TableDataSource.superclass.handleEvent.call(e,n.TableDataSource.EventType.REMOVE,{data:o,keys:s,indexes:r})}),this._collection.on(T.Events.EventType.RESET,function(t){n.TableDataSource.superclass.handleEvent.call(e,n.TableDataSource.EventType.RESET,t)}),this._collection.on(T.Events.EventType.SORT,function(t,i){if(null==i||!i.add){var o={};null==t||null==!t.comparator||$.isFunction(t.comparator)||(o.header=t.comparator,o.direction=1===t.sortDirection?"ascending":"descending"),n.TableDataSource.superclass.handleEvent.call(e,n.TableDataSource.EventType.SORT,o)}}),this._collection.on(T.Events.EventType.CHANGE,function(t){n.TableDataSource.superclass.handleEvent.call(e,n.TableDataSource.EventType.CHANGE,{data:[t.attributes],keys:[t.id],indexes:[t.index]})}),this._collection.on(T.Events.EventType.DESTROY,function(t){n.TableDataSource.superclass.handleEvent.call(e,n.TableDataSource.EventType.DESTROY,t)}),this._collection.on(T.Events.EventType.REFRESH,function(t){n.TableDataSource.superclass.handleEvent.call(e,n.TableDataSource.EventType.REFRESH,t)}),this._collection.on(T.Events.EventType.ERROR,function(t,i,o){n.TableDataSource.superclass.handleEvent.call(e,n.TableDataSource.EventType.ERROR,t,i,o)}),this._collection.on(T.Events.EventType.REQUEST,function(t){e._isFetching||n.TableDataSource.superclass.handleEvent.call(e,n.TableDataSource.EventType.REQUEST,t)})},n.CollectionTableDataSource.prototype._fetchInternal=function(e){this._startFetch(e);var t=e||{},i=this;return this._isPaged=t.pageSize>0,this._startIndex=null==t.startIndex?this._startIndex:t.startIndex,this._pageSize=t.pageSize>0?t.pageSize:-1,t.pageSize=this._pageSize,t.startIndex=this._startIndex,t.refresh=!0,new Promise(function(e,n){var o=i._pageSize;i._isPaged||(o=25),i._collection.setRangeLocal(i._startIndex,o).then(function(n){var o;if(i._isPaged||i._collection.IsVirtual()){for(var s=[],r=[],a=0;a<n.models.length;a++){var l=n.models[a],u=i._wrapWritableValue(l,l.attributes);s[a]=u,r[a]=l.id}o={data:s,keys:r,startIndex:i._startIndex},n.models.length<i._pageSize?i.totalSize()<0&&(i._fetchResultSize=i._startIndex+n.models.length):i._fetchResultSize=null}else o=i._getRowArray();i._endFetch.call(i,t,o),e(o)},function(e){n(e)})})},n.CollectionTableDataSource.prototype._startFetch=function(e){this._isFetching=!0,e.silent||n.TableDataSource.superclass.handleEvent.call(this,n.TableDataSource.EventType.REQUEST,{startIndex:e.startIndex})},n.CollectionTableDataSource.prototype._endFetch=function(e,t){this._isFetching=!1,e.silent||n.TableDataSource.superclass.handleEvent.call(this,n.TableDataSource.EventType.SYNC,t)},n.CollectionTableDataSource.prototype._getRowArray=function(){for(var e=this._collection.size()-1,t=[],i=[],n=0;n<=e;n++){var o=this._collection.at(n),s=this._wrapWritableValue(o,o.attributes);t[n]=s,i[n]=o.id}return{data:t,keys:i,startIndex:this._startIndex}},n.CollectionTableDataSource.prototype.getCapability=function(e){return"sort"===e?"full":null},n.CollectionTableDataSource.prototype._wrapWritableValue=function(e,t){for(var i={},n=Object.keys(t),o=0;o<n.length;o++){!function(t){var n=e;Object.defineProperty(i,t,{get:function(){return n.get(t)},set:function(e){n.set(t,e,{silent:!0})},enumerable:!0})}(n[o])}return i},n.CollectionNodeSet=function(e,t,i,n,o,s){this.parentKey=e,this.collection=t,this.models=i,this.childNodeSet=[],this.treeDataSource=n,o<i.length?this.start=o:0===i.length?this.start=0:this.start=i.length-1,this.count=-1===s?i.length:Math.min(i.length,s)},n.CollectionNodeSet.prototype.FetchDescendants=function(e){this._fetchDescendants(this).then(function(){e.success&&e.success()})},n.CollectionNodeSet.prototype._fetchDescendants=function(e){return new Promise(function(t){var i=e.getCount();!function n(o){o<i?e.FetchChildNodeSet(o,{success:function(t){null!==t?e._fetchDescendants(t).then(function(){n(o+1)}):n(o+1)}}):t(void 0)}(0)})},n.CollectionNodeSet.prototype.FetchChildNodeSet=function(e,t){var i=this.models[e];if(this.treeDataSource.parseMetadata(i).leaf)return this.childNodeSet[e]=null,void t.success(null);var n=this.treeDataSource.GetChildCollection(i),o=this.treeDataSource.parseMetadata(i).key,s=this;this.treeDataSource.FetchCollection(n,0,-1,{success:function(i){s.childNodeSet[e]=i,t.success(i)}},o)},n.CollectionNodeSet.prototype._getCollection=function(){return this.collection},n.CollectionNodeSet.prototype.getParent=function(){return this.parentKey},n.CollectionNodeSet.prototype.getStart=function(){return this.start},n.CollectionNodeSet.prototype.getCount=function(){return this.count},n.CollectionNodeSet.prototype.getData=function(e){return this._checkRange(e),this.models[e].attributes},n.CollectionNodeSet.prototype._checkRange=function(e){if(e<this.start||e>this.start+this.count)throw new Error("Out of range")},n.CollectionNodeSet.prototype.getMetadata=function(e){this._checkRange(e);var t={leaf:!1,depth:-1},i=this.models[e],n=this.treeDataSource.parseMetadata(i);return t.key=n.key,t.leaf=n.leaf,t.depth=n.depth,t},n.CollectionNodeSet.prototype.getChildNodeSet=function(e){return this.treeDataSource._virtual?null:(this._checkRange(e),this.childNodeSet[e])},n.CollectionTreeDataSource=function(e){e=e||{},this.rootCollection=e.root,this.childCollectionCallback=e.childCollectionCallback,this.parseMetadata=e.parseMetadata,this.sortkey=null,this.sortdir="none",this.cache={},this._virtual=!1,n.CollectionTreeDataSource.superclass.constructor.call(this)},n.CollectionTreeDataSource.prototype.parseMetadata=function(e){return{key:e.idAttribute+"="+e.id}},n.Object.createSubclass(n.CollectionTreeDataSource,n.TreeDataSource,"oj.CollectionTreeDataSource"),n.CollectionTreeDataSource.prototype.Init=function(){n.CollectionTreeDataSource.superclass.Init.call(this)},n.CollectionTreeDataSource.prototype.getChildCount=function(e){var t=this.__getParentsChildCollectionFromCache(e);return t&&t.length>0?t.length:-1},n.CollectionTreeDataSource.prototype.getChildCollection=function(e,t){this.fetchChildren(e,null,{success:function(e){t.success(e._getCollection())},error:t.error})},n.CollectionTreeDataSource.prototype.fetchChildren=function(e,t,i,n){var o=(t=t||{}).start?t.start:0,s=t.count?t.count:-1;if(null!==e){var r=this;this._getModelForId(this.rootCollection,o,s,e,0).then(function(t){if(t){var n=r.GetChildCollection(t.model);try{r.FetchCollection(n,o,s,i,e)}catch(e){i&&i.error&&i.error({status:e.message})}}else i&&i.error&&i.error(e)})}else this.FetchCollection(null,o,s,i,null)},n.CollectionTreeDataSource.prototype.ModelAdded=function(e,t,i){var n=0;i&&i.at&&(n=i.at);var o=this._getParentChain(t),s=null!=o&&o.length>0?o[o.length-1]:null,r=this._createEvent(this,"insert",n,o,this._putModelInNodeSet(s,e));this.handleEvent("change",r)},n.CollectionTreeDataSource.prototype.ModelRemoved=function(e,t,i){var n=0;i&&i.index&&(n=i.index),this._removeCollectionFromCache(e);var o=this._createEvent(this,"delete",n,this._getParentChain(t),null);this.handleEvent("change",o)},n.CollectionTreeDataSource.prototype.ModelUpdated=function(e,t){var i=e.collection,n=e.GetIndex(),o=null;i&&(o=this._getParentChain(i));var s=null!=o&&o.length>0?o[o.length-1]:null,r=this._createEvent(this,"update",n,o,this._putModelInNodeSet(s,e));this.handleEvent("change",r)},n.CollectionTreeDataSource.prototype.CollectionRefreshed=function(e,t,i){var n=this._createEvent(this,"refresh",null,this._getParentChain(e),null);this.handleEvent("refresh",n)},n.CollectionTreeDataSource.prototype._putModelInNodeSet=function(e,t){var i=new T.Collection;return i.add(t),this._getNodeSet(i,e,0,1,[t])},n.CollectionTreeDataSource.prototype._getParentChain=function(e){var t=[],i=null,o=e;do{null!==(i=this._getParentOfCollection(o))&&(i!==n.CollectionTreeDataSource.ROOT_CACHE_KEY&&t.unshift(i),o=this._getCollectionOfKey(i))}while(null!=i);return t},n.CollectionTreeDataSource.ROOT_CACHE_KEY="%!@ROOT%#@!",n.CollectionTreeDataSource.prototype._getCacheKey=function(e){var t=e instanceof T.Model?this.parseMetadata(e).key:e;return null!=e?t:n.CollectionTreeDataSource.ROOT_CACHE_KEY},n.CollectionTreeDataSource.prototype.__getParentsChildCollectionFromCache=function(e){return this.cache[this._getCacheKey(e)]},n.CollectionTreeDataSource.prototype._setCollectionInCache=function(e,t){t.on(T.Events.EventType.ADD,this.ModelAdded,this),t.on(T.Events.EventType.REMOVE,this.ModelRemoved,this),t.on(T.Events.EventType.CHANGE,this.ModelUpdated,this),t.on(T.Events.EventType.SYNC,this.CollectionRefreshed,this);var i=this._getCacheKey(e);return this.cache[i]=t,this.cache[i]},n.CollectionTreeDataSource.prototype._removeCollectionFromCache=function(e){for(var t=this._getCacheKey(e),i=Object.keys(this.cache),n=0;n<i.length;n++){if(i[n]===t)return this.cache[t].off(null,null,this),void delete this.cache[t]}},n.CollectionTreeDataSource.prototype._keyInCollection=function(e,t){for(var i=t.length,n=null,o=0;o<i;o++){if(n=t.models[o])if(e===this._getCacheKey(n))return!0}return!1},n.CollectionTreeDataSource.prototype._getCollectionOfKey=function(e){for(var t=Object.keys(this.cache),i=0;i<t.length;i++){var n=t[i],o=this.cache[n];if(this._keyInCollection(e,o))return o}return null},n.CollectionTreeDataSource.prototype._getParentOfCollection=function(e){for(var t=Object.keys(this.cache),i=0;i<t.length;i++){var n=t[i];if(this.cache[n]===e)return n}return null},n.CollectionTreeDataSource.prototype.GetChildCollection=function(e){var t=!0,i=this.__getParentsChildCollectionFromCache(e);return i||(t=!1,null!=(i=this.childCollectionCallback(this.rootCollection,e))&&(this._applySortToCollection(i),this._setCollectionInCache(e,i))),{collection:i,cached:t}},n.CollectionTreeDataSource.prototype._createEvent=function(e,t,i,n,o){return{source:e,operation:t,index:i,parent:n,data:o}},n.CollectionTreeDataSource.prototype.FetchCollection=function(e,t,i,n,o){var s=this;null===e&&((e=this.__getParentsChildCollectionFromCache(null))?e={collection:e,cached:!0}:(e={collection:s.rootCollection,cached:!1},s._setCollectionInCache(null,this.rootCollection))),e&&s._fetch(e,t,i,function(e,r){e.IsVirtual()&&(s._virtual=!0),n.success&&n.success(s._getNodeSet(e,o,t,i,r))},n.error)},n.CollectionTreeDataSource.prototype._getNodeSet=function(e,t,i,o,s){return new n.CollectionNodeSet(t,e,s,this,i,o)},n.CollectionTreeDataSource.prototype._scanForKey=function(e,t){var i=this,n=new Array(e.length);return new Promise(function(o){!function t(s,r,a){s<e.length?r.at(s,{deferred:!0}).then(function(e){if(n[s]=e,e){var l=i.parseMetadata(e);if(a===l.key)return void o({model:e,models:n})}t(s+=1,r,a)}):o({model:null,models:n})}(0,e,t)})},n.CollectionTreeDataSource.prototype._getModelForId=function(e,t,i,n,o){var s=this;return new Promise(function(r){s._scanForKey(e,n).then(function(e){e.model?r({model:e.model,depth:o}):function e(s,a,l){if(s<a.length){var u=l.GetChildCollection(a[s]);u.collection?l._fetch(u,t,i,function(u,d){l._getModelForId(u,t,i,n,o+1).then(function(t){t?r(t):e(s+=1,a,l)})},null):e(s+=1,a,l)}else r(null)}(0,e.models,s)})})},n.CollectionTreeDataSource.prototype._getModelsFromCollection=function(e){if(e.IsVirtual()){var t=new Array(e.length);return new Promise(function(i){(function(e,t,i,n){return new Promise(function(o,s){var r,a=function(t){return new Promise(function(i,o){e.at(t).then(function(e){n[t]=e,i(t+1)},o)})},l=Promise.resolve(0);for(r=t;r<i;r++)l=l.then(a);return l.then(o,s)})})(e,0,e.length,t).then(function(){i(t)})})}return new Promise(function(t){t(e.models)})},n.CollectionTreeDataSource.prototype._fetch=function(e,t,i,n,o){var s=this;if(e.cached)this._getModelsFromCollection(e.collection).then(function(t){n(e.collection,t)});else{if(this.sortkey&&"none"!==this.sortkey&&(e.collection.comparator=this.sortkey,e.collection.sortDirection=this.sortdir),e.collection.length>0||!e.collection.IsUrlBased(null))return void n(e.collection,e.collection.models);-1===i?(e.collection.modelLimit=-1,e.collection.fetch({success:function(e){s._getModelsFromCollection(e).then(function(t){n(e,t)})},error:o})):(e.collection.modelLimit=-1,e.collection.setRangeLocal(t,i).then(function(t){e.models=t.models,n(e.collection,t.models)}))}},n.CollectionTreeDataSource.prototype.fetchDescendants=function(e,t,i){this._virtual&&n.Assert.failedInAbstractFunction();var o=this;null!==e?this._getModelForId(this.rootCollection,0,-1,e,0).then(function(i){if(i){var n=o.GetChildCollection(i.model);o.FetchCollection(n,0,-1,{success:function(e){e.FetchDescendants({success:function(){t.success&&t.success(e)}})}},e)}}):this.FetchCollection(null,0,-1,{success:function(e){e.FetchDescendants({success:function(){t.success&&t.success(e)}})}},null)},n.CollectionTreeDataSource.prototype.sort=function(e,t){var i=e.key,n=e.direction,o=!1;if(i!==this.sortkey&&(this.sortkey=i,o=!0),n!==this.sortdir&&(this.sortdir=n,o=!0),o){"none"===this.sortdir&&(this.cache={});for(var s=Object.keys(this.cache),r=0;r<s.length;r++){var a=s[r],l=this.cache[a];this._applySortToCollection(l)}}t&&t.success&&t.success()},n.CollectionTreeDataSource.prototype._applySortToCollection=function(e){e.comparator=this.sortkey,e.sortDirection="ascending"===this.sortdir?1:-1,e.sort()},n.CollectionTreeDataSource.prototype.getSortCriteria=function(){return{key:this.sortkey,direction:this.sortdir}},n.CollectionTreeDataSource.prototype.move=function(e,t,i,o){n.Assert.failedInAbstractFunction()},n.CollectionTreeDataSource.prototype.moveOK=function(e,t,i){return"invalid"},n.CollectionTreeDataSource.prototype.getCapability=function(e){return"sort"===e?"default":"move"===e?"none":"batchFetch"===e?"disable":"fetchDescendants"===e?"disable":null},function(){var e=/^\s+/,t=/\s+$/,i=Math.round,o=Math.min,s=Math.max;function r(e,t){var i=e;(function(e){return"string"==typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(i)&&(i="100%");var n=function(e){return"string"==typeof e&&-1!==e.indexOf("%")}(i);return i=o(t,s(0,parseFloat(i))),n&&(i=parseInt(i*t,10)/100),Math.abs(i-t)<1e-6?1:i%t/parseFloat(t)}function a(e){return parseInt(e,16)}function l(e){var t=e;return t<=1&&(t=100*t+"%"),t}n.Color=function(i){var n;n=function(i){var n={r:0,g:0,b:0},u=1,d=null,h=null,_=null,m=!1;"string"==typeof i&&(i=function(i){if("transparent"===(i=i.replace(e,"").replace(t,"").toLowerCase()))return{r:0,g:0,b:0,a:0};var n=c.rgb.exec(i);if(n)return{r:n[1],g:n[2],b:n[3]};if(n=c.rgba.exec(i))return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=c.hsl.exec(i))return{h:n[1],s:n[2],l:n[3]};if(n=c.hsla.exec(i))return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=c.hsv.exec(i))return{h:n[1],s:n[2],v:n[3]};if(n=c.hsva.exec(i))return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=c.hex6.exec(i))return{r:a(n[1]),g:a(n[2]),b:a(n[3])};if(n=c.hex3.exec(i))return{r:a(n[1]+""+n[1]),g:a(n[2]+""+n[2]),b:a(n[3]+""+n[3])};return!1}(i));"object"==typeof i&&(p(i.r)&&p(i.g)&&p(i.b)?(g=i.r,f=i.g,v=i.b,n={r:255*r(g,255),g:255*r(f,255),b:255*r(v,255)},m=!0):p(i.h)&&p(i.s)&&p(i.v)?(d=l(i.s),h=l(i.v),n=function(e,t,i){e=6*r(e,360),t=r(t,100),i=r(i,100);var n=Math.floor(e),o=e-n,s=i*(1-t),a=i*(1-o*t),l=i*(1-(1-o)*t),u=n%6;return{r:255*[i,a,s,s,l,i][u],g:255*[l,i,i,a,s,s][u],b:255*[s,s,l,i,i,a][u]}}(i.h,d,h),m=!0):p(i.h)&&p(i.s)&&p(i.l)&&(d=l(i.s),_=l(i.l),n=function(e,t,i){var n,o,s;function a(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}if(e=r(e,360),t=r(t,100),i=r(i,100),0===t)n=i,o=i,s=i;else{var l=i<.5?i*(1+t):i+t-i*t,u=2*i-l;n=a(u,l,e+1/3),o=a(u,l,e),s=a(u,l,e-1/3)}return{r:255*n,g:255*o,b:255*s}}(i.h,d,_),m=!0),void 0!==i.a&&(u=i.a));var g,f,v;if(!m)throw new Error("Invalid Color format");return u=function(e){var t=parseFloat(e);return(isNaN(t)||t<0||t>1)&&(t=1),t}(u),{r:o(255,s(n.r,0)),g:o(255,s(n.g,0)),b:o(255,s(n.b,0)),a:u}}(i=i||""),this._r=n.r,this._g=n.g,this._b=n.b,this._a=Math.round(100*n.a)/100},n.Color.prototype.getRed=function(e){return e?this._r:i(this._r)},n.Color.prototype.getGreen=function(e){return e?this._g:i(this._g)},n.Color.prototype.getBlue=function(e){return e?this._b:i(this._b)},n.Color.prototype.getAlpha=function(){return this._a},n.Color.prototype.toString=function(){return"rgb"+((t=(e=this)._a<1)?"a(":"(")+i(e._r)+", "+i(e._g)+", "+i(e._b)+(t?", "+e._a:"")+")";var e,t},n.Color.prototype.isEqual=function(e){var t=!1;return e instanceof n.Color&&(t=this._r===e._r&&this._g===e._g&&this._b===e._b&&this._a===e._a),t},n.Color.ALICEBLUE=null,n.Color.ANTIQUEWHITE=null,n.Color.AQUA=null,n.Color.AQUAMARINE=null,n.Color.AZURE=null,n.Color.BEIGE=null,n.Color.BISQUE=null,n.Color.BLACK=null,n.Color.BLANCHEDALMOND=null,n.Color.BLUE=null,n.Color.BLUEVIOLET=null,n.Color.BROWN=null,n.Color.BURLYWOOD=null,n.Color.CADETBLUE=null,n.Color.CHARTREUSE=null,n.Color.CHOCOLATE=null,n.Color.CORAL=null,n.Color.CORNFLOWERBLUE=null,n.Color.CORNSILK=null,n.Color.CRIMSON=null,n.Color.CYAN=null,n.Color.DARKBLUE=null,n.Color.DARKCYAN=null,n.Color.DARKGOLDENROD=null,n.Color.DARKGRAY=null,n.Color.DARKGREY=null,n.Color.DARKGREEN=null,n.Color.DARKKHAKI=null,n.Color.DARKMAGENTA=null,n.Color.DARKOLIVEGREEN=null,n.Color.DARKORANGE=null,n.Color.DARKORCHID=null,n.Color.DARKRED=null,n.Color.DARKSALMON=null,n.Color.DARKSEAGREEN=null,n.Color.DARKSLATEBLUE=null,n.Color.DARKSLATEGRAY=null,n.Color.DARKSLATEGREY=null,n.Color.DARKTURQUOISE=null,n.Color.DARKVIOLET=null,n.Color.DEEPPINK=null,n.Color.DEEPSKYBLUE=null,n.Color.DIMGRAY=null,n.Color.DIMGREY=null,n.Color.DODGERBLUE=null,n.Color.FIREBRICK=null,n.Color.FLORALWHITE=null,n.Color.FORESTGREEN=null,n.Color.FUCHSIA=null,n.Color.GAINSBORO=null,n.Color.GHOSTWHITE=null,n.Color.GOLD=null,n.Color.GOLDENROD=null,n.Color.GRAY=null,n.Color.GREEN=null,n.Color.GREENYELLOW=null,n.Color.GREY=null,n.Color.HONEYDEW=null,n.Color.HOTPINK=null,n.Color.INDIANRED=null,n.Color.INDIGO=null,n.Color.IVORY=null,n.Color.KHAKI=null,n.Color.LAVENDER=null,n.Color.LAVENDERBLUSH=null,n.Color.LAWNGREEN=null,n.Color.LEMONCHIFFON=null,n.Color.LIGHTBLUE=null,n.Color.LIGHTCORAL=null,n.Color.LIGHTCYAN=null,n.Color.LIGHTGOLDENRODYELLOW=null,n.Color.LIGHTGRAY=null,n.Color.LIGHTGREEN=null,n.Color.LIGHTGREY=null,n.Color.LIGHTPINK=null,n.Color.LIGHTSALMON=null,n.Color.LIGHTSEAGREEN=null,n.Color.LIGHTSKYBLUE=null,n.Color.LIGHTSLATEGRAY=null,n.Color.LIGHTSLATEGREY=null,n.Color.LIGHTSTEELBLUE=null,n.Color.LIGHTYELLOW=null,n.Color.LIME=null,n.Color.LIMEGREEN=null,n.Color.LINEN=null,n.Color.MAGENTA=null,n.Color.MAROON=null,n.Color.MEDIUMAQUAMARINE=null,n.Color.MEDIUMBLUE=null,n.Color.MEDIUMORCHID=null,n.Color.MEDIUMPURPLE=null,n.Color.MEDIUMSEAGREEN=null,n.Color.MEDIUMSLATEBLUE=null,n.Color.MEDIUMSPRINGGREEN=null,n.Color.MEDIUMTURQUOISE=null,n.Color.MEDIUMVIOLETRED=null,n.Color.MIDNIGHTBLUE=null,n.Color.MINTCREAM=null,n.Color.MISTYROSE=null,n.Color.MOCCASIN=null,n.Color.NAVAJOWHITE=null,n.Color.NAVY=null,n.Color.OLDLACE=null,n.Color.OLIVE=null,n.Color.OLIVEDRAB=null,n.Color.ORANGE=null,n.Color.ORANGERED=null,n.Color.ORCHID=null,n.Color.PALEGOLDENROD=null,n.Color.PALEGREEN=null,n.Color.PALETURQUOISE=null,n.Color.PALEVIOLETRED=null,n.Color.PAPAYAWHIP=null,n.Color.PEACHPUFF=null,n.Color.PERU=null,n.Color.PINK=null,n.Color.PLUM=null,n.Color.POWDERBLUE=null,n.Color.PURPLE=null,n.Color.REBECCAPURPLE=null,n.Color.RED=null,n.Color.ROSYBROWN=null,n.Color.ROYALBLUE=null,n.Color.SADDLEBROWN=null,n.Color.SALMON=null,n.Color.SANDYBROWN=null,n.Color.SEAGREEN=null,n.Color.SEASHELL=null,n.Color.SIENNA=null,n.Color.SILVER=null,n.Color.SKYBLUE=null,n.Color.SLATEBLUE=null,n.Color.SLATEGRAY=null,n.Color.SLATEGREY=null,n.Color.SNOW=null,n.Color.SPRINGGREEN=null,n.Color.STEELBLUE=null,n.Color.TAN=null,n.Color.TEAL=null,n.Color.THISTLE=null,n.Color.TOMATO=null,n.Color.TURQUOISE=null,n.Color.VIOLET=null,n.Color.WHEAT=null,n.Color.WHITE=null,n.Color.WHITESMOKE=null,n.Color.YELLOW=null,n.Color.YELLOWGREEN=null,n.Color.TRANSPARENT=null;var u,d,h,c=(d="[\\s|\\(]+("+(u="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+u+")[,|\\s]+("+u+")\\s*\\)?",h="[\\s|\\(]+("+u+")[,|\\s]+("+u+")[,|\\s]+("+u+")[,|\\s]+("+u+")\\s*\\)?",{CSS_UNIT:new RegExp(u),rgb:new RegExp("rgb"+d),rgba:new RegExp("rgba"+h),hsl:new RegExp("hsl"+d),hsla:new RegExp("hsla"+h),hsv:new RegExp("hsv"+d),hsva:new RegExp("hsva"+h),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function p(e){return!!c.CSS_UNIT.exec(e)}Object.defineProperty(n.Color,"ALICEBLUE",{writable:!1,value:new n.Color("f0f8ff")}),Object.defineProperty(n.Color,"ANTIQUEWHITE",{writable:!1,value:new n.Color("faebd7")}),Object.defineProperty(n.Color,"AQUA",{writable:!1,value:new n.Color("0ff")}),Object.defineProperty(n.Color,"AQUAMARINE",{writable:!1,value:new n.Color("7fffd4")}),Object.defineProperty(n.Color,"AZURE",{writable:!1,value:new n.Color("f0ffff")}),Object.defineProperty(n.Color,"BEIGE",{writable:!1,value:new n.Color("f5f5dc")}),Object.defineProperty(n.Color,"BISQUE",{writable:!1,value:new n.Color("ffe4c4")}),Object.defineProperty(n.Color,"BLACK",{writable:!1,value:new n.Color("000")}),Object.defineProperty(n.Color,"BLANCHEDALMOND",{writable:!1,value:new n.Color("ffebcd")}),Object.defineProperty(n.Color,"BLUE",{writable:!1,value:new n.Color("00f")}),Object.defineProperty(n.Color,"BLUEVIOLET",{writable:!1,value:new n.Color("8a2be2")}),Object.defineProperty(n.Color,"BROWN",{writable:!1,value:new n.Color("a52a2a")}),Object.defineProperty(n.Color,"BURLYWOOD",{writable:!1,value:new n.Color("deb887")}),Object.defineProperty(n.Color,"CADETBLUE",{writable:!1,value:new n.Color("5f9ea0")}),Object.defineProperty(n.Color,"CHARTREUSE",{writable:!1,value:new n.Color("7fff00")}),Object.defineProperty(n.Color,"CHOCOLATE",{writable:!1,value:new n.Color("d2691e")}),Object.defineProperty(n.Color,"CORAL",{writable:!1,value:new n.Color("ff7f50")}),Object.defineProperty(n.Color,"CORNFLOWERBLUE",{writable:!1,value:new n.Color("6495ed")}),Object.defineProperty(n.Color,"CORNSILK",{writable:!1,value:new n.Color("fff8dc")}),Object.defineProperty(n.Color,"CRIMSON",{writable:!1,value:new n.Color("dc143c")}),Object.defineProperty(n.Color,"CYAN",{writable:!1,value:new n.Color("0ff")}),Object.defineProperty(n.Color,"DARKBLUE",{writable:!1,value:new n.Color("00008b")}),Object.defineProperty(n.Color,"DARKCYAN",{writable:!1,value:new n.Color("008b8b")}),Object.defineProperty(n.Color,"DARKGOLDENROD",{writable:!1,value:new n.Color("b8860b")}),Object.defineProperty(n.Color,"DARKGRAY",{writable:!1,value:new n.Color("a9a9a9")}),Object.defineProperty(n.Color,"DARKGREY",{writable:!1,value:new n.Color("a9a9a9")}),Object.defineProperty(n.Color,"DARKGREEN",{writable:!1,value:new n.Color("006400")}),Object.defineProperty(n.Color,"DARKKHAKI",{writable:!1,value:new n.Color("bdb76b")}),Object.defineProperty(n.Color,"DARKMAGENTA",{writable:!1,value:new n.Color("8b008b")}),Object.defineProperty(n.Color,"DARKOLIVEGREEN",{writable:!1,value:new n.Color("556b2f")}),Object.defineProperty(n.Color,"DARKORANGE",{writable:!1,value:new n.Color("ff8c00")}),Object.defineProperty(n.Color,"DARKORCHID",{writable:!1,value:new n.Color("9932cc")}),Object.defineProperty(n.Color,"DARKRED",{writable:!1,value:new n.Color("8b0000")}),Object.defineProperty(n.Color,"DARKSALMON",{writable:!1,value:new n.Color("e9967a")}),Object.defineProperty(n.Color,"DARKSEAGREEN",{writable:!1,value:new n.Color("8fbc8f")}),Object.defineProperty(n.Color,"DARKSLATEBLUE",{writable:!1,value:new n.Color("483d8b")}),Object.defineProperty(n.Color,"DARKSLATEGRAY",{writable:!1,value:new n.Color("2f4f4f")}),Object.defineProperty(n.Color,"DARKSLATEGREY",{writable:!1,value:new n.Color("2f4f4f")}),Object.defineProperty(n.Color,"DARKTURQUOISE",{writable:!1,value:new n.Color("00ced1")}),Object.defineProperty(n.Color,"DARKVIOLET",{writable:!1,value:new n.Color("9400d3")}),Object.defineProperty(n.Color,"DEEPPINK",{writable:!1,value:new n.Color("ff1493")}),Object.defineProperty(n.Color,"DEEPSKYBLUE",{writable:!1,value:new n.Color("00bfff")}),Object.defineProperty(n.Color,"DIMGRAY",{writable:!1,value:new n.Color("696969")}),Object.defineProperty(n.Color,"DIMGREY",{writable:!1,value:new n.Color("696969")}),Object.defineProperty(n.Color,"DODGERBLUE",{writable:!1,value:new n.Color("1e90ff")}),Object.defineProperty(n.Color,"FIREBRICK",{writable:!1,value:new n.Color("b22222")}),Object.defineProperty(n.Color,"FLORALWHITE",{writable:!1,value:new n.Color("fffaf0")}),Object.defineProperty(n.Color,"FORESTGREEN",{writable:!1,value:new n.Color("228b22")}),Object.defineProperty(n.Color,"FUCHSIA",{writable:!1,value:new n.Color("f0f")}),Object.defineProperty(n.Color,"GAINSBORO",{writable:!1,value:new n.Color("dcdcdc")}),Object.defineProperty(n.Color,"GHOSTWHITE",{writable:!1,value:new n.Color("f8f8ff")}),Object.defineProperty(n.Color,"GOLD",{writable:!1,value:new n.Color("ffd700")}),Object.defineProperty(n.Color,"GOLDENROD",{writable:!1,value:new n.Color("daa520")}),Object.defineProperty(n.Color,"GRAY",{writable:!1,value:new n.Color("808080")}),Object.defineProperty(n.Color,"GREY",{writable:!1,value:new n.Color("808080")}),Object.defineProperty(n.Color,"GREEN",{writable:!1,value:new n.Color("008000")}),Object.defineProperty(n.Color,"GREENYELLOW",{writable:!1,value:new n.Color("adff2f")}),Object.defineProperty(n.Color,"HONEYDEW",{writable:!1,value:new n.Color("f0fff0")}),Object.defineProperty(n.Color,"HOTPINK",{writable:!1,value:new n.Color("ff69b4")}),Object.defineProperty(n.Color,"INDIANRED",{writable:!1,value:new n.Color("cd5c5c")}),Object.defineProperty(n.Color,"INDIGO",{writable:!1,value:new n.Color("4b0082")}),Object.defineProperty(n.Color,"IVORY",{writable:!1,value:new n.Color("fffff0")}),Object.defineProperty(n.Color,"KHAKI",{writable:!1,value:new n.Color("f0e68c")}),Object.defineProperty(n.Color,"LAVENDER",{writable:!1,value:new n.Color("e6e6fa")}),Object.defineProperty(n.Color,"LAVENDERBLUSH",{writable:!1,value:new n.Color("fff0f5")}),Object.defineProperty(n.Color,"LAWNGREEN",{writable:!1,value:new n.Color("7cfc00")}),Object.defineProperty(n.Color,"LEMONCHIFFON",{writable:!1,value:new n.Color("fffacd")}),Object.defineProperty(n.Color,"LIGHTBLUE",{writable:!1,value:new n.Color("add8e6")}),Object.defineProperty(n.Color,"LIGHTCORAL",{writable:!1,value:new n.Color("f08080")}),Object.defineProperty(n.Color,"LIGHTCYAN",{writable:!1,value:new n.Color("e0ffff")}),Object.defineProperty(n.Color,"LIGHTGOLDENRODYELLOW",{writable:!1,value:new n.Color("fafad2")}),Object.defineProperty(n.Color,"LIGHTGRAY",{writable:!1,value:new n.Color("d3d3d3")}),Object.defineProperty(n.Color,"LIGHTGREY",{writable:!1,value:new n.Color("d3d3d3")}),Object.defineProperty(n.Color,"LIGHTGREEN",{writable:!1,value:new n.Color("90ee90")}),Object.defineProperty(n.Color,"LIGHTPINK",{writable:!1,value:new n.Color("ffb6c1")}),Object.defineProperty(n.Color,"LIGHTSALMON",{writable:!1,value:new n.Color("ffa07a")}),Object.defineProperty(n.Color,"LIGHTSEAGREEN",{writable:!1,value:new n.Color("20b2aa")}),Object.defineProperty(n.Color,"LIGHTSKYBLUE",{writable:!1,value:new n.Color("87cefa")}),Object.defineProperty(n.Color,"LIGHTSLATEGRAY",{writable:!1,value:new n.Color("789")}),Object.defineProperty(n.Color,"LIGHTSLATEGREY",{writable:!1,value:new n.Color("789")}),Object.defineProperty(n.Color,"LIGHTSTEELBLUE",{writable:!1,value:new n.Color("b0c4de")}),Object.defineProperty(n.Color,"LIGHTYELLOW",{writable:!1,value:new n.Color("ffffe0")}),Object.defineProperty(n.Color,"LIME",{writable:!1,value:new n.Color("0f0")}),Object.defineProperty(n.Color,"LIMEGREEN",{writable:!1,value:new n.Color("32cd32")}),Object.defineProperty(n.Color,"LINEN",{writable:!1,value:new n.Color("faf0e6")}),Object.defineProperty(n.Color,"MAGENTA",{writable:!1,value:new n.Color("f0f")}),Object.defineProperty(n.Color,"MAROON",{writable:!1,value:new n.Color("800000")}),Object.defineProperty(n.Color,"MEDIUMAQUAMARINE",{writable:!1,value:new n.Color("66cdaa")}),Object.defineProperty(n.Color,"MEDIUMBLUE",{writable:!1,value:new n.Color("0000cd")}),Object.defineProperty(n.Color,"MEDIUMORCHID",{writable:!1,value:new n.Color("ba55d3")}),Object.defineProperty(n.Color,"MEDIUMPURPLE",{writable:!1,value:new n.Color("9370db")}),Object.defineProperty(n.Color,"MEDIUMSEAGREEN",{writable:!1,value:new n.Color("3cb371")}),Object.defineProperty(n.Color,"MEDIUMSLATEBLUE",{writable:!1,value:new n.Color("7b68ee")}),Object.defineProperty(n.Color,"MEDIUMSPRINGGREEN",{writable:!1,value:new n.Color("00fa9a")}),Object.defineProperty(n.Color,"MEDIUMTURQUOISE",{writable:!1,value:new n.Color("48d1cc")}),Object.defineProperty(n.Color,"MEDIUMVIOLETRED",{writable:!1,value:new n.Color("c71585")}),Object.defineProperty(n.Color,"MIDNIGHTBLUE",{writable:!1,value:new n.Color("191970")}),Object.defineProperty(n.Color,"MINTCREAM",{writable:!1,value:new n.Color("f5fffa")}),Object.defineProperty(n.Color,"MISTYROSE",{writable:!1,value:new n.Color("ffe4e1")}),Object.defineProperty(n.Color,"MOCCASIN",{writable:!1,value:new n.Color("ffe4b5")}),Object.defineProperty(n.Color,"NAVAJOWHITE",{writable:!1,value:new n.Color("ffdead")}),Object.defineProperty(n.Color,"NAVY",{writable:!1,value:new n.Color("000080")}),Object.defineProperty(n.Color,"OLDLACE",{writable:!1,value:new n.Color("fdf5e6")}),Object.defineProperty(n.Color,"OLIVE",{writable:!1,value:new n.Color("808000")}),Object.defineProperty(n.Color,"OLIVEDRAB",{writable:!1,value:new n.Color("6b8e23")}),Object.defineProperty(n.Color,"ORANGE",{writable:!1,value:new n.Color("ffa500")}),Object.defineProperty(n.Color,"ORANGERED",{writable:!1,value:new n.Color("ff4500")}),Object.defineProperty(n.Color,"ORCHID",{writable:!1,value:new n.Color("da70d6")}),Object.defineProperty(n.Color,"PALEGOLDENROD",{writable:!1,value:new n.Color("eee8aa")}),Object.defineProperty(n.Color,"PALEGREEN",{writable:!1,value:new n.Color("98fb98")}),Object.defineProperty(n.Color,"PALETURQUOISE",{writable:!1,value:new n.Color("afeeee")}),Object.defineProperty(n.Color,"PALEVIOLETRED",{writable:!1,value:new n.Color("db7093")}),Object.defineProperty(n.Color,"PAPAYAWHIP",{writable:!1,value:new n.Color("ffefd5")}),Object.defineProperty(n.Color,"PEACHPUFF",{writable:!1,value:new n.Color("ffdab9")}),Object.defineProperty(n.Color,"PERU",{writable:!1,value:new n.Color("cd853f")}),Object.defineProperty(n.Color,"PINK",{writable:!1,value:new n.Color("ffc0cb")}),Object.defineProperty(n.Color,"PLUM",{writable:!1,value:new n.Color("dda0dd")}),Object.defineProperty(n.Color,"POWDERBLUE",{writable:!1,value:new n.Color("b0e0e6")}),Object.defineProperty(n.Color,"PURPLE",{writable:!1,value:new n.Color("800080")}),Object.defineProperty(n.Color,"REBECCAPURPLE",{writable:!1,value:new n.Color("663399")}),Object.defineProperty(n.Color,"RED",{writable:!1,value:new n.Color("f00")}),Object.defineProperty(n.Color,"ROSYBROWN",{writable:!1,value:new n.Color("bc8f8f")}),Object.defineProperty(n.Color,"ROYALBLUE",{writable:!1,value:new n.Color("4169e1")}),Object.defineProperty(n.Color,"SADDLEBROWN",{writable:!1,value:new n.Color("8b4513")}),Object.defineProperty(n.Color,"SALMON",{writable:!1,value:new n.Color("fa8072")}),Object.defineProperty(n.Color,"SANDYBROWN",{writable:!1,value:new n.Color("f4a460")}),Object.defineProperty(n.Color,"SEAGREEN",{writable:!1,value:new n.Color("2e8b57")}),Object.defineProperty(n.Color,"SEASHELL",{writable:!1,value:new n.Color("fff5ee")}),Object.defineProperty(n.Color,"SIENNA",{writable:!1,value:new n.Color("a0522d")}),Object.defineProperty(n.Color,"SILVER",{writable:!1,value:new n.Color("c0c0c0")}),Object.defineProperty(n.Color,"SKYBLUE",{writable:!1,value:new n.Color("87ceeb")}),Object.defineProperty(n.Color,"SLATEBLUE",{writable:!1,value:new n.Color("6a5acd")}),Object.defineProperty(n.Color,"SLATEGRAY",{writable:!1,value:new n.Color("708090")}),Object.defineProperty(n.Color,"SLATEGREY",{writable:!1,value:new n.Color("708090")}),Object.defineProperty(n.Color,"SNOW",{writable:!1,value:new n.Color("fffafa")}),Object.defineProperty(n.Color,"SPRINGGREEN",{writable:!1,value:new n.Color("00ff7f")}),Object.defineProperty(n.Color,"STEELBLUE",{writable:!1,value:new n.Color("4682b4")}),Object.defineProperty(n.Color,"TAN",{writable:!1,value:new n.Color("d2b48c")}),Object.defineProperty(n.Color,"TEAL",{writable:!1,value:new n.Color("008080")}),Object.defineProperty(n.Color,"THISTLE",{writable:!1,value:new n.Color("d8bfd8")}),Object.defineProperty(n.Color,"TOMATO",{writable:!1,value:new n.Color("ff6347")}),Object.defineProperty(n.Color,"TURQUOISE",{writable:!1,value:new n.Color("40e0d0")}),Object.defineProperty(n.Color,"VIOLET",{writable:!1,value:new n.Color("ee82ee")}),Object.defineProperty(n.Color,"WHEAT",{writable:!1,value:new n.Color("f5deb3")}),Object.defineProperty(n.Color,"WHITE",{writable:!1,value:new n.Color("fff")}),Object.defineProperty(n.Color,"WHITESMOKE",{writable:!1,value:new n.Color("f5f5f5")}),Object.defineProperty(n.Color,"YELLOW",{writable:!1,value:new n.Color("ff0")}),Object.defineProperty(n.Color,"YELLOWGREEN",{writable:!1,value:new n.Color("9acd32")}),Object.defineProperty(n.Color,"TRANSPARENT",{writable:!1,value:new n.Color("rgba(0,0,0,0)")})}();var ki=n.Color,Ui={properties:{describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},labelDisplay:{type:"string",enumValues:["auto","off"],value:"off"},labelHint:{type:"string",value:""},labelledBy:{type:"string"},layout:{type:"string",enumValues:["grid","list"],value:"grid"},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},palette:{type:"Array<Object>"},swatchSize:{type:"string",enumValues:["lg","sm","xs"],value:"lg"},translations:{type:"object",value:{},properties:{labelNone:{type:"string"}}},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},value:{type:"oj.Color",writeback:!0}},methods:{setProperty:{},getProperty:{},setProperties:{},refresh:{},reset:{},showMessages:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{}},extension:{}};n.__registerWidget("oj.ojColorPalette",$.oj.editableValue,{widgetEventPrefix:"oj",defaultElement:"<input>",options:{labelledBy:null,palette:null,swatchSize:"lg",labelDisplay:"off",layout:"grid",value:null},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;var t,i=e.subId,n=e.index,o=this._super(e);if(!o)switch(i){case"oj-palette-entry":(t=this._$LV.find(".oj-listview-item")).length&&n<t.length&&(o=t[n])}return o},getSubIdByNode:function(e){var t,i,n=$(e),o=null,s=-1,r=null;return n.is("li")&&n.hasClass("oj-listview-item-element")&&(o="oj-palette-entry",t=n.attr("id"),i=this._$LV.find(".oj-listview-item"),$.each(i,function(e,i){return $(i).attr("id")!==t||(s=e,!1)})),o&&(r={subId:o},s>=0&&(r.index=s)),null==r&&(r=this._super(e)),r},add:function(e){var t=null;e instanceof ki?t={color:e}:"object"==typeof e&&e.color instanceof ki&&(t=e),t&&(this._setPaletteBusyContext("The swatch add is being animated in the palette (id="+this.element.attr("id")+")."),t.id=this._getNewSwatchId(),this._opStack||(this._opStack=[]),this._opStack.push({op:"a",obj:t}),this._palDataSource.add(t),this._waitForLV())},remove:function(t){var i=null,n=typeof t;if("number"===n)t>=0&&t<this._palette.length?i=this._palette[t].id:e.error("JET Color Palette (id='"+this.element.attr("id")+"'): Invalid index for remove ("+t+")");else if("object"===n){var o=t instanceof ki?t:t.color;i=this._findSwatchIdOfColorInPalette(o)}i&&(t={id:i},this._setPaletteBusyContext("The removed swatch is being animated in the palette (id="+this.element.attr("id")+")."),this._opStack||(this._opStack=[]),this._opStack.push({op:"r",obj:t}),this._palDataSource.remove(t),this._waitForLV())},whenReady:function(){var e=this;return new Promise(function(t){e._$LV.ojListView("whenReady").then(function(){t(!0)})})},_destroy:function(){this._resolvePaletteBusyContext(),this._$LV&&(this._opStack=[],this._$LV.ojListView("destroy")),this._palDataSource=null,this._$paletteContainer.remove(),this._$boundElem.removeClass("oj-colorpalette"),this._clear(),this._super()},_ComponentCreate:function(){this._super(),this._initPalette()},_AfterCreate:function(){var t;if(this._super(),this._updateLabelledBy(null,this.options.labelledBy,this._$LV),this._IsCustomElement()||(t=this._GetLabelElement()),t){var i=t.attr("id");i?this._$LV.attr("aria-labelledby",i):e.warn("JET Color Palette: The label for this component needs an id in order to be accessible")}else{var n=this.element.attr("aria-label");n&&this._$LV.attr("aria-label",n)}},_setOption:function(e,t,i){var n=this.options.labelledBy,o=!1;switch(e){case"value":o=this._setOptValue(t);break;case"palette":this._setOptPalette(t);break;case"swatchSize":this._setOptSwatchSize(t);break;case"layout":this._setOptLayout(t);break;case"labelDisplay":this._setOptLabelDisplay(t);break;case"disabled":this._setOptDisabled(t,!0);break;case"labelledBy":this._updateLabelledBy(n,t,this._$LV)}o||this._super(e,t,i)},_updateLabelledBy:n.EditableValueUtils._updateLabelledBy,_onLVOptionChange:function(e,t){"selection"===t.option&&this._selected(e,t)},_waitForLV:function(){if(!this._LVResolve){var t=this;this._LVResolve=c.getContext(this._$LV[0]).getBusyContext(),this._LVResolve.whenReady().then(function(){var e,i,n,o,s,r;if(t._LVResolve=null,t._resolvePaletteBusyContext(),t._opStack){for(n=!1,s=0;s<t._opStack.length;s++)i=(e=t._opStack[s]).obj,"a"!==e.op&&"r"!==e.op||(n=!0,o||(o=t._palette.slice(0)),"a"===e.op?o.push(i):"r"===e.op&&(r=t._findIndexOfSwatchById(o,i.id),o.splice(r,1),e.index=r));if(n)for(t._fireOptionChangeEvent("palette",o,null);t._opStack.length;)i=(e=t._opStack.shift()).obj,"a"===e.op?t._palette.push(i):"r"===e.op&&t._palette.splice(e.index,1)}},function(){e.error("JET Color Palette (id='"+t.element.attr("id")+"'): ListView timed out."),t._opStack=[]})}},_compareColorValues:function(e,t){var i=!1;return e instanceof ki&&t instanceof ki&&(i=e.isEqual(t)),i},_fireOptionChangeEvent:function(e,t,i){"palette"===e&&this.option(e,t,{_context:{originalEvent:i,internalSet:!0},changed:!0})},_findColorInPalette:function(e){var t,i,n=-1,o=this._palette,s=o.length;for(t=0;t<s;t++)if(i=o[t],e.isEqual(i.color)){n=t;break}return n},_findSwatchIdOfColorInPalette:function(e){var t,i,n=null,o=this._palette,s=o.length;for(t=0;t<s;t++)if(i=o[t],e.isEqual(i.color)){n=i.id;break}return n},_findIndexOfSwatchById:function(e,t){var i,n=-1,o=e.length;for(i=0;i<o;i++)if(e[i].id===t){n=i;break}return n},_setPaletteBusyContext:function(e){if(!this._resolve){var t=c.getContext(this.element[0]).getBusyContext();this._resolve=t.addBusyState({description:e})}},_resolvePaletteBusyContext:function(){this._resolve&&(this._resolve(),this._resolve=null)},_renderer:function(t){var i,n,o,s,r,a;(i=t.data.color)instanceof ki||(i=ki.BLACK,e.warn("JET Color Palette (id='"+this.element.attr("id")+"'): Substituting Color.BLACK for an object that is not an instance of Color")),n=o=t.data.label,s="auto"===this._labelDisplay&&"list"===this._layout&&"sm"===this._swatchSize||"auto"===this._labelDisplay&&"grid"===this._layout&&"lg"===this._swatchSize,null!=i&&(a=n||this._convHex.format(i),s?(n=a||this._convHex.format(i),n=o?n:n.toUpperCase()):n=null,r=!!(this._isTransparent(i)||n&&"none"===n.toLowerCase()));var l,u="";return this._initSelection===t.data.id&&(u="oj-selected",this._initSelection=-1,this._selectedParent=t.parentElement),l="list"===this._layout?"oj-colorpalette-swatchsize-"+this._swatchSize+(r?" oj-colorpalette-swatch-none":""):this._swatchClass+(r?" oj-colorpalette-swatch-none":""),r?this._renderNone(s,n,a,l,u):this._renderStandard(i,s,n,a,l,u)},_renderStandard:function(e,t,i,n,o,s){var r;return r="<div class='oj-colorpalette-swatch-entry "+o+(t?" oj-colorpalette-swatch-showlabel":"")+"'><div class='oj-colorpalette-swatch-container'><div class='oj-colorpalette-swatch "+s+"' style='background-color:"+e.toString()+"'"+(i?"":" title='"+n+"'")+"></div></div>",i&&(r+="<span class='oj-colorpalette-swatch-text'>"+i+"</span>"),r+="</div>",$(r)[0]},_renderNone:function(e,t,i,n,o){var s;return s="<div class='oj-colorpalette-swatch-entry "+n+(e?" oj-colorpalette-swatch-showlabel":"")+"'><div class='oj-colorpalette-swatch-container'><div class='oj-colorpalette-swatch "+o+"'"+(t?"":" title='"+i+"'")+"><div class='oj-colorpalette-swatch-none-icon'></div></div></div>",t&&(s+="<span class='oj-colorpalette-swatch-text'>"+t+"</span>"),s+="</div>",$(s)[0]},_selected:function(e,t){var i,n,o=null;if((i=$(t.items[0]).find(".oj-colorpalette-swatch")).addClass("oj-selected"),n=this._selectedSwatch,this._selectedSwatch=i,n||this._selectedParent&&(n=$(this._selectedParent).find(".oj-colorpalette-swatch"),this._selectedParent=null),n&&n.removeClass("oj-selected"),1===t.value.length){for(var s=0;s<this._palette.length;s++)if(this._palette[s].id===t.value[0]){o=this._palette[s].color;break}this._SetValue(o,e),this._value=o}},_setOptDisabled:function(e,t){var i,n;(!t||t&&e!==this._disabled)&&(this._$LV&&this._$LV.ojListView("option","disabled",e),i=$(".oj-colorpalette-container .oj-colorpalette-swatch"),n=this,e?(this._disabledBG=[],$.each(i,function(e,t){n._disabledBG.push(t.style.backgroundColor),t.style.backgroundColor="#eee"})):(this._disabledBG&&this._disabledBG.length&&$.each(i,function(e,t){t.style.backgroundColor=n._disabledBG[e]}),this._disabledBG=null),this._disabled=e)},_setOptValue:function(e){var t=-1,i=[];if(this._palette.length>0&&e instanceof ki&&!this._compareColorValues(this._value,e)){if((t=this._findColorInPalette(e))>=0&&null!=this._palette[t].id){var n=this._palette[t].id;i.push(n)}this._$LV.ojListView("option","selection",i),this._value=e}return i.length>0},_setOptPalette:function(e){$.isArray(e)&&(this._isPaletteEqual(e,this._palette)||(this._setPaletteBusyContext("The palette (id="+this.element.attr("id")+") option change in progress."),this._opStack=[],this._palette=e.slice(0),this._initSelection=this._findColorInPalette(this._value),this._setData(e,this._initSelection,!0),this._waitForLV()))},_setOptSwatchSize:function(e){if("string"==typeof e&&e!==this._swatchSize){this._swatchSize=e;var t="lg"===e||"sm"===e?e:"xs";this._swatchClass="oj-colorpalette-swatchsize-"+t,this._$LV.ojListView("refresh")}},_setOptLabelDisplay:function(e){"string"==typeof e&&e!==this._labelDisplay&&("auto"!==e&&"off"!==e||(this._labelDisplay=e,this._$LV.ojListView("refresh")))},_setOptLayout:function(e){"string"==typeof e&&e!==this._layout&&(this._layout=e,this._setDisplayFormat(),this._$LV.ojListView("refresh"))},_setDisplayFormat:function(){var e="grid"===this._layout,t=e?"oj-colorpalette-grid":"oj-colorpalette-list";this._$LV.removeClass("oj-colorpalette-grid oj-colorpalette-list oj-listview-card-layout"),this._$LV.addClass(t),e&&this._$LV.addClass("oj-listview-card-layout")},_setData:function(e,t,i){this._addIdsToPalette(e),this._palDataSource=new n.ArrayTableDataSource(e,{idAttribute:"id"}),t>=0&&(this._palette[t].id&&(t=this._palette[t].id),0===this._palInitSelected.length?this._palInitSelected.push(t):this._palInitSelected[0]=t),i&&this._$LV.ojListView("option","data",this._palDataSource)},_initPalette:function(){this._setPaletteBusyContext("Palette (id="+this.element.attr("id")+") is initializing."),this._initData(),this._setup()},_setup:function(){this._$boundElem.append(this._markup),this._$boundElem.addClass("oj-colorpalette"),this._$paletteContainer=this._$boundElem.find(".oj-colorpalette-container"),this._$LV=this._$paletteContainer.find(":first"),this._$LV.attr("data-oj-context",""),this._value&&this._value instanceof ki&&(this._initSelection=this._findColorInPalette(this._value)),this._swatchId=0,this._setData(this._palette,this._initSelection,!1),this._$LV.ojListView({data:this._palDataSource,item:{renderer:this._renderer.bind(this)},optionChange:this._onLVOptionChange.bind(this),selectionMode:"single",selection:this._palInitSelected,rootAttributes:{style:"height:100%;width:100%"}}).attr("data-oj-internal","");var e=this;c.getContext(this._$LV[0]).getBusyContext().whenReady().then(function(){if(e._$LV.ojListView("option","translations.msgNoData",""),e._setOptDisabled(e._disabled),e._$LV[0].scrollWidth>e._$LV[0].clientWidth){var t=e._getScrollbarWidth(),i="rtl"===e._GetReadingDirection();e._$LV.css(i?"padding-left":"padding-right",t+1)}e._resolvePaletteBusyContext()})},_initData:function(){var e;this._applyOptions(),this._converterFactory=le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_COLOR),this._convHex=this._converterFactory.createConverter({format:"hex"}),this._labelNone=this.getTranslatedString("labelNone"),e="grid"===this._layout?"oj-colorpalette-grid oj-listview-card-layout":"oj-colorpalette-list",this._markup=["<div class='oj-colorpalette-container'>","<ul class='"+e+"'/>","</div>"].join("")},_applyOptions:function(){var e,t=this.options;this._doc=this.element[0].ownerDocument,this._body=this._doc.body,this._$boundElem=$(this.element),this._disabled=!1,this._palInitSelected=[],this._palDataSource=null,"string"==typeof(e=t.swatchSize)&&"lg"!==(e=e.toLowerCase())&&"sm"!==e&&"xs"!==e&&(e="lg"),this._swatchSize=e,this._swatchClass="oj-colorpalette-swatchsize-"+e,"string"==typeof(e=t.labelDisplay)&&"auto"!==(e=e.toLowerCase())&&"off"!==e&&(e="auto"),this._labelDisplay=e,"string"==typeof(e=t.layout)&&("grid"!==(e=e.toLowerCase())&&"list"!==e&&(e="grid"),"grid"!==e&&"xs"===this._swatchSize&&(e="grid")),this._layout=e,(e=t.value)instanceof ki||(e=null),this._value=e||ki.BLACK,e=t.palette,$.isArray(e)||(e=[]),this._palette=e.slice(0),"boolean"==typeof(e=t.disabled)&&(this._disabled=e)},_isTransparent:function(e){var t=e.getRed(),i=e.getGreen(),n=e.getBlue(),o=e.getAlpha();return 0===t&&0===i&&0===n&&0===o},_isPaletteEqual:function(e,t){var i,n,o,s=e.length,r=!1;if(s===t.length){for(o=0;o<s&&(i=e[o],n=t[o],!this._compareColorValues(i.color,n.color)||i.label===n.label);o++);r=o>=s}return r},_addIdsToPalette:function(e){for(var t=e.length,i=0;i<t;i++)e[i].id=this._getNewSwatchId()},_getNewSwatchId:function(){var e=this._swatchId.toString();return this._swatchId+=1,e},_clear:function(){this._converterFactory=null,this._convHex=null,this._markup=null,this._$LV=null},_getScrollbarWidth:function(){var e=$("<div style='overflow: scroll; width: 100px; height: 100px; position: absolute; visibility: hidden;'><div style='width: 100%; height: 100%;'></div></div>");this.element.append(e);var t=e[0].offsetWidth,i=e.children()[0].offsetWidth;return e.remove(),t-i},_GetMessagingLauncherElement:function(){return this.element},_GetContentElement:function(){return this._$LV},_GetElementValue:function(){return this._value},_SetDisplayValue:function(t){t?this._value="string"==typeof t?new ki(t):t:(this._value=ki.BLACK,e.warn("JET Color Palette (id='"+this.element.attr("id")+"'): Substituting Color.BLACK since display value is not defined."))},_GetDisplayValue:function(){return this._value.toString()},_GetDefaultStyleClass:function(){return"oj-colorpalette"}}),Ui.extension._WIDGET_NAME="ojColorPalette",n.CustomElementBridge.register("oj-color-palette",{metadata:Ui});var Bi={properties:{describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},labelHint:{type:"string",value:""},labelledBy:{type:"string"},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},transientValue:{type:"oj.Color",writeback:!0,readOnly:!0},translations:{type:"object",value:{},properties:{labelHue:{type:"string"},labelOpacity:{type:"string"},labelSatLum:{type:"string"},labelThumbDesc:{type:"string"}}},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},value:{type:"oj.Color",writeback:!0}},methods:{setProperty:{},getProperty:{},setProperties:{},refresh:{},reset:{},showMessages:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{}},extension:{}};!function(){function t(e){var t=function(e,t,i){e/=255,t/=255,i/=255;var n,o,s=Math.max(e,t,i),r=Math.min(e,t,i),a=(s+r)/2;if(s===r)n=0,o=0;else{var l=s-r;switch(o=a>.5?l/(2-s-r):l/(s+r),s){case e:n=(t-i)/l+(t<i?6:0);break;case t:n=(i-e)/l+2;break;case i:n=(e-t)/l+4}n/=6}return[n,o,a]}(e.getRed(),e.getGreen(),e.getBlue());return t[0]*=360,t[1]*=100,t[2]*=100,t.push(e.getAlpha()),t}n.__registerWidget("oj.ojColorSpectrum",$.oj.editableValue,{widgetEventPrefix:"oj",defaultElement:"<input>",options:{labelledBy:null,value:null,rawValue:null},getNodeBySubId:function(e){if(null===e)return this.element?this.element[0]:null;var t=e.subId,i=this._super(e);if(!i)switch(t){case"oj-spectrum":i=this._$spectrum[0];break;case"oj-spectrum-thumb":i=this._$spectrumThumb[0];break;case"oj-hue-slider-bar":i=this._$hueSlider.ojSlider("getNodeBySubId",{subId:"oj-slider-bar"});break;case"oj-hue-slider-bar-value":i=this._$hueSlider.ojSlider("getNodeBySubId",{subId:"oj-slider-bar-value"});break;case"oj-hue-slider-thumb":i=this._$hueSlider.ojSlider("getNodeBySubId",{subId:"oj-slider-thumb-0"});break;case"oj-opacity-slider-bar":i=this._$alphaSlider.ojSlider("getNodeBySubId",{subId:"oj-slider-bar"});break;case"oj-opacity-slider-bar-value":i=this._$alphaSlider.ojSlider("getNodeBySubId",{subId:"oj-slider-bar-value"});break;case"oj-opacity-slider-thumb":i=this._$alphaSlider.ojSlider("getNodeBySubId",{subId:"oj-slider-thumb-0"})}return i},getSubIdByNode:function(e){if(!e)return null;var t,i=$(e),n=null;return i.hasClass("oj-colorspectrum-spectrum")?n="oj-spectrum":i.hasClass("oj-colorspectrum-thumb")?n="oj-spectrum-thumb":(t=i.closest(".oj-slider").hasClass("oj-slider-vertical")?"hue":"opacity",i.hasClass("oj-slider-bar")?n="oj-"+t+"-slider-bar":i.hasClass("oj-slider-bar-value")?n="oj-"+t+"-slider-bar-value":i.hasClass("oj-slider-thumb")&&(n="oj-"+t+"-slider-thumb")),null!=n?{subId:n}:this._super(e)},_destroy:function(){this._$boundElem&&(this._clearListeners(),this._destroySliders(),this._removeMarkup(),this._$boundElem.removeClass("oj-colorspectrum"),this._clear()),this._super()},_ComponentCreate:function(){this._super(),this._initEditor()},_AfterCreate:function(){var t;if(this._super(),this._updateLabelledBy(null,this.options.labelledBy,this._$spectrumThumb),this._IsCustomElement()||(t=this._GetLabelElement()),t){var i=t.attr("id");i?this._$spectrumThumb.attr("aria-labelledby",i):e.warn("JET Color Spectrum: The label for this component needs an id in order to be accessible")}else{var n=this.element.attr("aria-label");n&&this._$spectrumThumb.attr("aria-label",n)}},_setOption:function(e,t,i){var n=this.options.labelledBy;switch(e){case"value":this._setOptValue(t);break;case"disabled":this._setOptDisabled(t,!0);break;case"labelledBy":this._updateLabelledBy(n,t,this._$spectrumThumb)}this._super(e,t,i)},_SetRawValue:function(t,i){var n=t;if("string"==typeof t)try{n=new ki(t)}catch(i){e.error("ojColorSpectrum (id='"+this.element.attr("id")+"'): invalid "+this._transientValueName+" ("+t+"), defaulting to black"),n=ki.BLACK}var o={};o._context={originalEvent:i,writeback:!0,internalSet:!0,readOnly:!0},this._comparedRoundedColor(this.options[this._transientValueName],n)||this.option(this._transientValueName,n,o)},_updateLabelledBy:n.EditableValueUtils._updateLabelledBy,_comparedRoundedColor:function(e,t){return e.getRed()===t.getRed()&&e.getGreen()===t.getGreen()&&e.getBlue()===t.getBlue()&&e.getAlpha()===t.getAlpha()},_compareColorValues:function(e,t){return e instanceof ki&&t instanceof ki&&e.isEqual(t)},_setOptDisabled:function(e,t){var i=!t||t&&e!==this._disabled;return i&&(this._enableSliders(!e),e?(this.element.addClass("oj-disabled"),this._makeThumbDraggable(!1)):(this.element.removeClass("oj-disabled"),this._makeThumbDraggable(!0)),this._disabled=e),i},_setOptValue:function(e){e instanceof ki&&(this._compareColorValues(this._value,e)||(this._setColorVals(e),this._setSliderValue(this._hueVal,!0),this._setSliderValue(this._alphaVal,!1),this._setSpectrumHue(this._hueVal,this._satVal,this._lumVal,this._alphaVal,!0)))},_onSliderOptionChange:function(e,t){var i,n,o,s,r,a,l,u;this._sliderSetup&&("rawValue"!==t.option&&"value"!==t.option||void 0===t.value||("value"===t.option&&(this._isOrigEvent=!!e.originalEvent),a=(u=$(e.target)).hasClass("oj-colorspectrum-hue"),l=u.hasClass("oj-colorspectrum-alpha"),(a||l)&&(n=this._hueVal,o=this._satVal,s=this._lumVal,r=this._alphaVal,a?(n=t.value,this._updateAlphaBG(n,o,s),this._setSpectrumHue(n,o,s,r,!1)):(r=t.value,this._setAriaText(n,o,s,r)),i=new ki({h:n,s:o,l:s,a:r}),(e.originalEvent||this._isOrigEvent)&&(this._isOrigEvent=!1,"rawValue"===t.option?this._SetRawValue(i,e):"value"===t.option&&this._SetValue(i,e)),this._setColorVals(i))))},_setSliderValue:function(e,t){(t?this._$hueSlider:this._$alphaSlider).ojSlider("option","value",e)},_setSpectrumHue:function(e,t,i,n,o){var s="hsl("+e+", 100%, 50%)";if(this._$spectrum.css("background-color",s),o){var r=this._getSatLumSpectrumPosition(t,i);this._setThumbPosition(r.x,r.y)}this._setAriaText(e,t,i,n)},_setSpectrumMask:function(){var e,t=" -___-linear-gradient(top, hsl(0, 0%, 100%) 0%, hsla(0, 0%, 100%, 0) 50%, hsla(0, 0%, 0%, 0) 50%, hsl(0, 0%, 0%) 100%), -___-linear-gradient(left, hsl(0, 0%, 50%) 0%, hsla(0, 0%, 50%, 0) 100%)";switch(n.AgentUtils.getAgentInfo().browser){case n.AgentUtils.BROWSER.FIREFOX:e="moz";break;case n.AgentUtils.BROWSER.CHROME:case n.AgentUtils.BROWSER.SAFARI:default:e="webkit";break;case n.AgentUtils.BROWSER.IE:e="ms"}t=(t=" -___-linear-gradient(top, hsl(0, 0%, 100%) 0%, hsla(0, 0%, 100%, 0) 50%, hsla(0, 0%, 0%, 0) 50%, hsl(0, 0%, 0%) 100%), -___-linear-gradient(left, hsl(0, 0%, 50%) 0%, hsla(0, 0%, 50%, 0) 100%)").replace(/___/g,e),this._$spectrum.css("backgroundImage",t)},_setThumbPosition:function(e,t){isNaN(e)||(this._xThumb=e),isNaN(t)||(this._yThumb=t),this._moveThumb(0,0)},_getSatLumSpectrumPosition:function(e,t){var i=Math.min(e/100*this._spectrumWidth,this._spectrumWidth),n=this._spectrumHeight-Math.min(t/100*this._spectrumHeight,this._spectrumHeight);return{x:Math.round(i),y:Math.round(n)}},_moveThumb:function(e,t){var i,n;(i=this._xThumb+e)<0&&(i=0),(n=this._yThumb+t)<0&&(n=0),i>=this._spectrumWidth&&(i=this._spectrumWidth-1),n>=this._spectrumHeight&&(n=this._spectrumHeight-1),this._xThumb=i,this._yThumb=n,i=i-this._spectrumThumbRadius+"px",n=n-this._spectrumThumbRadius+"px",this._$spectrumThumb[0].style.left=i,this._$spectrumThumb[0].style.top=n},_spectrumClick:function(e){if(!this._disabled){var t,i,n,o,s=this._$spectrum.offset(),r=e.pageX-s.left,a=e.pageY-s.top;r=Math.round(r),a=Math.round(a),i=(o=this._getSatLumFromPosition(r,a)).s,n=o.l,t=this._hueVal,this._updateAlphaBG(t,i,n);var l=new ki({h:t,s:i,l:n,a:this._alphaVal});this._SetRawValue(l,e),this._SetValue(l,e),this._setAriaText(t,i,n,this._alphaVal),this._value=l,this._setSatLum(i,n),this._setThumbPosition(r,a),this._$spectrumThumb.focus()}},_keyDown:function(e){var t,i,n,o,s=1;if(this._keyNow=(new Date).getTime(),this._keyStart<0&&(this._keyStart=this._keyNow,this._keyCount=0),o=this._keyNow-this._keyStart,this._keyCount+=1,(o>1400||this._keyCount>25)&&(s=3),i=0,n=0,40===(t=e.keyCode))n=s;else if(38===t)n=-s;else if(39===t)i=s;else if(37===t)i=-s;else if(36===t)this._setThumbPosition(0,0),this._keyStart=-1;else if(35===t)this._setThumbPosition(this._spectrumWidth-1,this._spectrumHeight-1),this._keyStart=-1;else if(33===t)this._setThumbPosition(NaN,0),this._keyStart=-1;else{if(34!==t)return;this._setThumbPosition(NaN,this._spectrumHeight-1),this._keyStart=-1}return this._moveThumb(i,n),this._handleThumbMoved(e,this._xThumb,this._yThumb),e.preventDefault(),!1},_keyUp:function(e){this._keyStart=-1;var t=this._getSatLumFromPosition(this._xThumb,this._yThumb);this._setAriaText(this._hueVal,t.s,t.l,this._alphaVal);var i=this.options[this._transientValueName];this._SetValue(i,e)},_initThumbDraggable:function(){this._thumbDragHandler||(this._thumbDragHandler=this._thumbDrag.bind(this)),this._$spectrumThumb.draggable({drag:this._thumbDragHandler,stop:this._thumbDragHandler})},_makeThumbDraggable:function(e){this._$spectrumThumb.draggable(e?"enable":"disable")},_thumbDrag:function(e,t){var i,n,o,s;t.position.left<-this._spectrumThumbRadius?(t.position.left=-this._spectrumThumbRadius,i=0):t.position.left+this._spectrumThumbRadius>=this._spectrumWidth&&(t.position.left=this._spectrumWidth-1-this._spectrumThumbRadius,n=this._spectrumWidth-1),t.position.top<-this._spectrumThumbRadius?(t.position.top=-this._spectrumThumbRadius,n=0):t.position.top+this._spectrumThumbRadius>=this._spectrumHeight&&(t.position.top=this._spectrumHeight-1-this._spectrumThumbRadius,n=this._spectrumHeight-1),o=this._$spectrumThumb.offset(),s=this._$spectrum.offset(),0!==i&&(i=o.left+this._spectrumThumbRadius-s.left),0!==n&&(n=o.top+this._spectrumThumbRadius-s.top),this._xThumb===i&&this._yThumb===n||("drag"===e.type?(this._xThumb=i,this._yThumb=n):(i=this._xThumb,n=this._yThumb),this._handleThumbMoved(e,i,n))},_handleThumbMoved:function(e,t,i){var n=!1,o=this._hueVal,s=this._getSatLumFromPosition(t,i),r=s.s,a=s.l;this._updateAlphaBG(o,r,a);var l=new ki({h:o,s:r,l:a,a:this._alphaVal});this._SetRawValue(l,e),"dragstop"===e.type&&(this._SetValue(l,e.originalEvent),n=!0),this._value=l,this._setSatLum(r,a),n&&this._setAriaText(o,r,a,this._alphaVal)},_getSatLumFromPosition:function(e,t){return{s:e/(this._spectrumWidth-1)*100,l:100-t/(this._spectrumHeight-1)*100}},_updateAlphaBG:function(e,t,i){var n,o="hsla("+e+","+t+"%,"+i+"%, 0)",s="hsla("+e+","+t+"%,"+i+"%, 1.0)";this._isRtl&&(n=s,s=o,o=n),n=(n="linear-gradient(90deg, "+o+", "+s+")")+","+this._alphaBgUrl,this._disabledAlphaBG=n,this._$alphaBarBack.css("background",n)},_getRoundedHsl:function(e,t,i,n){var o="hsl",s="number"==typeof n&&n<1;return o+=s?"a(":"(",o+=Math.round(e)+", "+Math.round(100*t)/100+"%, "+Math.round(100*i)/100+"%"+(s?","+n:"")+")"},_setSatLum:function(e,t){this._satVal=e,this._lumVal=t},_setColorVals:function(e){if(e){this._value=e;var i=t(e);this._hueVal=i[0],this._satVal=i[1],this._lumVal=i[2],this._alphaVal=i[3]}},_setAriaText:function(e,t,i,n){var o=this._getRoundedHsl(e,t,i,n);this._$spectrumThumb.attr("aria-valuetext",o)},_initEditor:function(){this._initData(),this._setup()},_setup:function(){this._$boundElem.append(this._markup),this._$boundElem.addClass("oj-colorspectrum"),$(".oj-colorspectrum-hue").uniqueId(),$(".oj-colorspectrum-alpha").uniqueId(),this._$editorContainer=this._$boundElem.find(".oj-colorspectrum-container"),this._$hueSlider=this._$boundElem.find(".oj-colorspectrum-hue"),this._$alphaSlider=this._$boundElem.find(".oj-colorspectrum-alpha"),this._$spectrum=this._$boundElem.find(".oj-colorspectrum-spectrum"),this._$spectrumThumb=this._$boundElem.find(".oj-colorspectrum-thumb"),this._spectrumThumbRadius=this._$spectrumThumb[0].offsetWidth/2,this._spectrumThumbRadius<=0&&(this._spectrumThumbRadius=this._$spectrumThumb.width()/2),this._isTouch=n.DomUtils.isTouchSupported(),this._spectrumWidth=this._$spectrum.width(),this._spectrumHeight=this._$spectrum.height(),this._$spectrumThumb.attr("aria-describedby",this._$boundElem.find(".oj-colorspectrum-thumb-description").uniqueId().attr("id"));var e=document.createElement("div");e.className="oj-colorspectrum-alpha-bg",this._$boundElem[0].appendChild(e),this._alphaBgUrl=window.getComputedStyle(e,null).getPropertyValue("background-image"),this._$boundElem[0].removeChild(e);var i=!!this._disabled,o=t(this._value);this._hueVal=o[0],this._satVal=o[1],this._lumVal=o[2],this._alphaVal=o[3],this._sliderSetup=!1,this._$hueSlider.ojSlider({max:360,min:0,step:1,value:this._hueVal,orientation:"vertical",optionChange:this._onSliderOptionChange.bind(this),rootAttributes:{class:"oj-slider-color-picker"}}).attr("data-oj-internal",""),this._$alphaSlider.ojSlider({max:1,min:0,step:.01,value:this._alphaVal,orientation:"horizontal",optionChange:this._onSliderOptionChange.bind(this),rootAttributes:{class:"oj-slider-color-picker"}}).attr("data-oj-internal",""),this._initSliders(),this._setSpectrumMask(),this._setSpectrumHue(this._hueVal,this._satVal,this._lumVal,this._alphaVal,!0),this._$spectrum.click(this._spectrumClick.bind(this)),this._initThumbDraggable(),this._setOptDisabled(i),this._$spectrumThumb.keydown(this._keyDown.bind(this)),this._$spectrumThumb.keyup(this._keyUp.bind(this)),this._$spectrum.focus(this._nofocus.bind(this)),this._focusable({element:this._$spectrumThumb,applyHighlight:!0}),n.DomUtils.isTouchSupported()&&this._setupTouch(this._$spectrumThumb)},_nofocus:function(e){return this._$spectrumThumb.focus(),!1},_initSliders:function(){var e={subId:"oj-slider-bar"};this._$hueBarBack=$(this._$hueSlider.ojSlider("getNodeBySubId",e)),this._$alphaBarBack=$(this._$alphaSlider.ojSlider("getNodeBySubId",e)),e.subId="oj-slider-bar-value",this._$hueBarValue=$(this._$hueSlider.ojSlider("getNodeBySubId",e)),this._$alphaBarValue=$(this._$alphaSlider.ojSlider("getNodeBySubId",e));var t="linear-gradient(0deg, #ff0000 0%, #ffff00 17%, #00ff00 33%, #00ffff 50%, #0000ff 67%, #ff00ff 83%, #ff0000 100%)";this._$hueBarBack.css("background",t),this._disabledHueBG=t,this._updateAlphaBG(this._hueVal,this._satVal,this._lumVal),this._sliderSetup=!0},_initData:function(){this._applyOptions(),this._xThumb=0,this._yThumb=0;var e=this._EscapeXSS(this.getTranslatedString("labelHue")),t=this._EscapeXSS(this.getTranslatedString("labelOpacity")),i=this._EscapeXSS(this.getTranslatedString("labelThumbDesc"));this._markup=["<div class='oj-colorspectrum-container'>","<div class='oj-colorspectrum-spectrum' tabindex='-1' style='position:relative'>","<div class='oj-colorspectrum-thumb' role='slider' aria-describedby='' style='position:absolute;top:-9999px;left:-9999px;' tabIndex='0'></div>","</div>","<div class='oj-colorspectrum-thumb-description oj-helper-hidden-accessible'>"+i+"</div>","<input class='oj-colorspectrum-hue' aria-label='"+e+"'></input>","<input class='oj-colorspectrum-alpha' aria-label='"+t+"'></input>","</div>"].join(""),this._keyStart=-1,this._isRtl="rtl"===this._GetReadingDirection()},_applyOptions:function(){var e,t=this.options;this._doc=this.element[0].ownerDocument,this._body=this._doc.body,this._$boundElem=$(this.element),this._disabled=!1,this._transientValueName=this._IsCustomElement()?"transientValue":"rawValue",(e=t.value)instanceof ki||(e=null),this._value=e||ki.BLACK,t[this._transientValueName]=this._value,e=t.disabled,this._disabled="boolean"==typeof e&&e},_enableSliders:function(e){var t=!e;if(e){this._$hueSlider.ojSlider("option","disabled",t),this._$alphaSlider.ojSlider("option","disabled",t);var i={subId:"oj-slider-bar"};this._$hueSlider=this._$boundElem.find(".oj-colorspectrum-hue"),this._$alphaSlider=this._$boundElem.find(".oj-colorspectrum-alpha"),this._$hueBarBack=$(this._$hueSlider.ojSlider("getNodeBySubId",i)),this._$alphaBarBack=$(this._$alphaSlider.ojSlider("getNodeBySubId",i)),this._disabledAlphaBG&&this._$alphaBarBack.css("background",this._disabledAlphaBG),this._disabledHueBG&&this._$hueBarBack.css("background",this._disabledHueBG)}else{var n=this._$hueBarBack.css("background");n&&n.length>0&&(this._disabledHueBG=n),(n=this._$alphaBarBack.css("background"))&&n.length>0&&(this._disabledAlphaBG=n),this._$hueBarBack.css("background",""),this._$alphaBarBack.css("background",""),this._$hueSlider.ojSlider("option","disabled",t),this._$alphaSlider.ojSlider("option","disabled",t)}},_destroySliders:function(){this._$hueSlider.ojSlider("destroy"),this._$alphaSlider.ojSlider("destroy")},_removeMarkup:function(){this._$boundElem.empty()},_clearListeners:function(){this._$spectrum.off("click"),this._$spectrumThumb.off("mousedown"),this._$spectrumThumb.off("keydown"),this._$spectrumThumb.off("keyup"),this._touchProxy&&this._tearDownTouch(this._$spectrumThumb)},_clear:function(){this._markup=null,this._$boundElem=null,this._$editorContainer=null,this._$hue=null,this._$alpha=null,this._$editorContainer=null,this._$hueSlider=null,this._$alphaSlider=null,this._$spectrum=null,this._$spectrumThumb=null,this._spectrumThumbSize=null,this._strings=null,this._mouseMoveHandler=null,this._mouseUpHandler=null},_setupTouch:function(e){this._touchProxy=n._TouchProxy.addTouchListeners(e)},_tearDownTouch:function(e){n._TouchProxy.removeTouchListeners(e)},_GetMessagingLauncherElement:function(){return this.element},_GetContentElement:function(){return this._$spectrumThumb},_GetElementValue:function(){return this._value},_SetDisplayValue:function(e){this._value="string"==typeof e?new ki(e):e},_GetDisplayValue:function(){return this._value.toString()},_GetDefaultStyleClass:function(){return"oj-colorspectrum"},_EscapeXSS:function(e){return $("<span>"+e+"</span>").text()}})}(),Bi.extension._WIDGET_NAME="ojColorSpectrum",n.CustomElementBridge.register("oj-color-spectrum",{metadata:Bi}),function(){function e(e,i){var n,o,s=["name","slot"],r=!1;if(i?(r=!0,s.push("data"),s.push("as"),o="ko _ojBindTemplateSlot_:{"):(r=!0,s.push("index"),o="ko _ojBindSlot_:{"),r){for(var a=[],l=0;l<s.length;l++){var u=s[l],d=t(e.getAttribute(u));d&&a.push(u+":"+d)}o+=a.join(","),o+="}";var h=document.createComment(o),c=document.createComment("/ko");n=[h];var p=e.parentNode;for(p.insertBefore(h,e);e.childNodes.length>0;){var _=e.childNodes[0];p.insertBefore(_,e),n.push(_)}n.push(c),p.replaceChild(c,e)}return n}function t(e){if(null!=e){var t=n.__AttributeUtils.getExpressionInfo(e).expr;return null==t&&(t="'"+e+"'"),t}return null}ye.registerPreprocessor("oj-bind-slot",e),ye.registerPreprocessor("oj-slot",e),ye.registerPreprocessor("oj-bind-template-slot",function(t){return e(t,!0)})}(),n.CompositeTemplateRenderer={},n.CompositeTemplateRenderer.renderTemplate=function(e,t,i){var o=n.CompositeTemplateRenderer._storeNodes(t,i);ko.virtualElements.setDomNodeChildren(t,i),n.CompositeTemplateRenderer.invokeViewModelMethod(e.viewModel,"attached",[e.viewModelContext]),n.CompositeTemplateRenderer.invokeViewModelMethod(e.viewModel,"connected",[e.viewModelContext]);var s=n.CompositeTemplateRenderer._getKoBindingContext().createChildContext(e.viewModel,void 0,function(i){i[n.Composite.__COMPOSITE_PROP]=t,i.__oj_slots=e.slotMap,i.__oj_nodestorage=o,i.$slotNodeCounts=e.slotNodeCounts,i.$slotCounts=e.slotNodeCounts,i.$props=e.props,i.$properties=e.props,i.$unique=e.unique,i.$uniqueId=e.uniqueId,i.$parent=null,i.$parentContext=null,i.$parents=null});ko.applyBindingsToDescendants(s,t),n.CompositeTemplateRenderer.invokeViewModelMethod(e.viewModel,"bindingsApplied",[e.viewModelContext])},n.CompositeTemplateRenderer.getEnclosingComposite=function(e){for(var t=null,i=ko.contextFor(e);i&&!t;i=i.$parentContext)t=i[n.Composite.__COMPOSITE_PROP];return t},n.CompositeTemplateRenderer.createTracker=function(){return ko.observable()},n.CompositeTemplateRenderer.invokeViewModelMethod=function(e,t,i){if(null!=e){var n=e[t];return"function"==typeof n?ko.ignoreDependencies(n,e,i):void 0}},n.CompositeTemplateRenderer._storeNodes=function(e,t){var i,o=e.childNodes;if(o){(i=document.createElement("div")).setAttribute("data-bind","_ojNodeStorage_"),i.style.display="none",t.push(i);for(var s=[],r=0;r<o.length;r++){var a=o[r];n.BaseCustomElementBridge.isSlotAssignable(a)&&s.push(a)}s.forEach(function(e){i.appendChild(e)}),n.Components&&n.Components.subtreeHidden(i)}return i},n.CompositeTemplateRenderer._getKoBindingContext=function(){if(!n.CompositeTemplateRenderer._BINDING_CONTEXT){var e=document.createElement("div");ko.applyBindings(null,e),n.CompositeTemplateRenderer._BINDING_CONTEXT=ko.contextFor(e),ko.cleanNode(e)}return n.CompositeTemplateRenderer._BINDING_CONTEXT},n.CompositeTemplateRenderer._BINDING_CONTEXT=null,ko.bindingHandlers._ojNodeStorage_={init:function(){return{controlsDescendantBindings:!0}}},ko.bindingHandlers._ojBindSlot_={init:function(e,t,i,o,s){ko.utils.domNodeDisposal.addDisposeCallback(e,Fi.cleanup.bind(null,e,s));var r=s.__oj_slots,a=t(),l=ko.utils.unwrapObservable,u=l(a.name)||"",d=l(a.slot)||"",h=l(a.index),c=null!=h?[r[u][h]]:r[u];if(c){var p;for(p=0;p<c.length;p++){c[p].__oj_slots=d}if(ko.virtualElements.setDomNodeChildren(e,c),n.Components)for(p=0;p<c.length;p++)n.Components.subtreeShown(c[p]);return{controlsDescendantBindings:!0}}ko.virtualElements.childNodes(e).forEach(function(e){var t;(1===(t=e).nodeType||3===t.nodeType&&t.nodeValue.trim())&&(e.__oj_slots=d)})}},ko.virtualElements.allowedBindings._ojBindSlot_=!0;var Fi={cleanup:function(e,t){var i=t.__oj_nodestorage;if(i)for(var o=ko.virtualElements.firstChild(e);o;){var s=ko.virtualElements.nextSibling(o);null!=o.__oj_slots&&(i.appendChild(o),n.Components&&1===o.nodeType&&n.Components.subtreeHidden(o)),o=s}}};ko.bindingHandlers._ojBindTemplateSlot_={init:function(t,i,o,s,r){ko.utils.domNodeDisposal.addDisposeCallback(t,Fi.cleanup.bind(null,t,r));var a=r.__oj_slots,l=i(),u=ko.utils.unwrapObservable,d=u(l.name)||"",h=a[d],c=h&&h[h.length-1],p=!1;if(!c)for(var _=ko.virtualElements.childNodes(t),m=0;m<_.length;m++)if("TEMPLATE"===_[m].tagName){p=!0,c=_[m];break}if(c){var g=r[n.Composite.__COMPOSITE_PROP];"TEMPLATE"!==c.tagName&&e.error("Slot content for slot '"+d+"' under "+g.tagName.toLowerCase()+" with id '"+g.id+"' should be wrapped inside a <template> node."),c.__oj_slots=u(l.slot)||"",ko.computed(function(){var e=u(l.data),i=u(l.as),n=templateEngine.execute(p?t:g,c,e,p?i:null);ko.virtualElements.setDomNodeChildren(t,n)})}else ko.virtualElements.setDomNodeChildren(t,[]);return{controlsDescendantBindings:!0}}},ko.virtualElements.allowedBindings._ojBindTemplateSlot_=!0;var Vi={properties:{contentParent:{type:"string"},orientation:{type:"string",enumValues:["horizontal","vertical"],value:"horizontal"},translations:{type:"object",value:{}}},methods:{refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};function Gi(e,t,i,n,o,s,r,a){this._elem=e,this._orientation=t,this._contentParent=i,this._bRtl=n,this._prevButtonStyleClass=o.prevButtonStyleClass,this._nextButtonStyleClass=o.nextButtonStyleClass,this._prevButtonIcon=o.prevButtonIcon,this._nextButtonIcon=o.nextButtonIcon,this._scrollFunc=s.scrollFunc,this._addResizeListenerFunc=s.addResizeListener,this._removeResizeListenerFunc=s.removeResizeListener,this._addStyleClassNameFunc=s.addStyleClassName,this._removeStyleClassNameFunc=s.removeStyleClassName,this._hasStyleClassNameFunc=s.hasStyleClassName,this._filterContentElementsFunc=s.filterContentElements,this._subtreeDetachedFunc=s.subtreeDetached,this._subtreeAttachedFunc=s.subtreeAttached,this._addBusyStateFunc=s.addBusyState,this._overflowContainerStyleClass=r.overflowContainerStyleClass,this._contentContainerStyleClass=r.contentContainerStyleClass,this._itemStyleClass=r.itemStyleClass,this._hiddenStyleClass=r.hiddenStyleClass,this._bExternalScroll=!0,this._firstVisibleItemIndex=0,this._agentVersion=a.browserVersion;var l=navigator.userAgent.toLowerCase();-1!==l.indexOf("gecko/")?this._bAgentGecko=!0:a&&"safari"===a.browser?this._bAgentSafari=!0:a&&"edge"===a.browser?this._bAgentEdge=!0:-1===l.indexOf("applewebkit")&&-1===l.indexOf("safari")||(this._bAgentWebkit=!0)}Gi.prototype.setup=function(){var e=this,t=Gi;this._createInnerContainers(),this._createPrevButton(this._prevButtonStyleClass,this._prevButtonIcon),this._createNextButton(this._nextButtonStyleClass,this._nextButtonIcon);var i=this._nextButton;this._buttonWidth=i.offsetWidth,this._buttonHeight=i.offsetHeight,this._hidePrevButton(),this._hideNextButton(),this._mouseWheelListener=function(t){e._handleMouseWheel(t)},t._addBubbleEventListener(this._elem,"mousewheel",this._mouseWheelListener),t._addBubbleEventListener(this._elem,"wheel",this._mouseWheelListener),this._touchStartListener=function(t){e._handleTouchStart(t)},t._addBubbleEventListener(this._overflowContainer,"touchstart",this._touchStartListener),this._touchMoveListener=function(t){e._handleTouchMove(t)},t._addBubbleEventListener(this._overflowContainer,"touchmove",this._touchMoveListener),this._touchEndListener=function(t){e._handleTouchEnd(t)},t._addBubbleEventListener(this._overflowContainer,"touchend",this._touchEndListener),t._addBubbleEventListener(this._overflowContainer,"touchcancel",this._touchEndListener),this._origScroll=0,this._clearCachedSizes(),this._adjustOverflowSize(!0),this._handleResize(!0),this._handleResizeFunc=function(t,i){e._handleResize(!1)},this._addResizeListenerFunc.call(null,this._elem,this._handleResizeFunc),this._addResizeListenerFunc.call(null,this._contentContainer,this._handleResizeFunc),this._subtreeAttachedFunc(this._contentContainer)},Gi.prototype.destroy=function(){this._resolveBusyState();var e=this._elem,t=Gi;t._removeBubbleEventListener(e,"mousewheel",this._mouseWheelListener),t._removeBubbleEventListener(e,"wheel",this._mouseWheelListener),t._removeBubbleEventListener(this._overflowContainer,"touchstart",this._touchStartListener),t._removeBubbleEventListener(this._overflowContainer,"touchmove",this._touchMoveListener),t._removeBubbleEventListener(this._overflowContainer,"touchend",this._touchEndListener),t._removeBubbleEventListener(this._overflowContainer,"touchcancel",this._touchEndListener),t._removeBubbleEventListener(this._overflowContainer,"scroll",this._scrollListener),this._mouseWheelListener=null,this._touchStartListener=null,this._touchMoveListener=null,this._touchEndListener=null,this._scrollListener=null,this._removeResizeListenerFunc.call(null,e,this._handleResizeFunc),this._removeResizeListenerFunc.call(null,this._contentContainer,this._handleResizeFunc),this._handleResizeFunc=null,this._reparentChildrenFromContentContainer(this._contentContainer,e),e.removeChild(this._overflowContainer),e.removeChild(this._nextButton),e.removeChild(this._prevButton),this._nextButton=null,this._prevButton=null,this._overflowContainer=null,this._contentContainer=null,this._clearCachedSizes(),this._elem=null,this._scrollFunc=null,this._addResizeListenerFunc=null,this._removeResizeListenerFunc=null,this._addStyleClassNameFunc=null,this._removeStyleClassNameFunc=null,this._hasStyleClassNameFunc=null,this._filterContentElementsFunc=null,this._subtreeDetachedFunc=null,this._subtreeAttachedFunc=null,this._addBusyStateFunc=null,this._contentParent=null},Gi.prototype.handleResize=function(){this._handleResize(!1)},Gi.prototype.setScroll=function(e,t){this._setCurrScroll(e,t)},Gi.prototype.getScroll=function(){return this._getCurrScroll()},Gi.prototype._reparentChildrenToContentContainer=function(e,t){for(var i=e.childNodes;i.length>0;){var n=i[0];this._subtreeDetachedFunc(n),t.appendChild(n),1===n.nodeType&&this._itemStyleClass&&this._addStyleClassNameFunc(n,this._itemStyleClass)}},Gi.prototype._reparentChildrenFromContentContainer=function(e,t){for(var i=e.childNodes;i.length>0;){var n=i[0];t.appendChild(n),1===n.nodeType&&this._itemStyleClass&&this._removeStyleClassNameFunc(n,this._itemStyleClass)}},Gi._getComputedStyle=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},Gi._getElemInnerWidth=function(e){var t=Gi,i=t._getComputedStyle(e);return t._getCSSLengthAsInt(i.width)},Gi._getElemInnerHeight=function(e){var t=Gi,i=t._getComputedStyle(e);return t._getCSSLengthAsInt(i.height)},Gi._getCSSLengthAsInt=function(e){if(e.length>0&&"auto"!==e){var t=Math.round(parseFloat(e));return isNaN(t)&&(t=0),t}return 0},Gi._addBubbleEventListener=function(e,t,i){e.addEventListener(t,i,!1)},Gi._removeBubbleEventListener=function(e,t,i){e.removeEventListener(t,i,!1)},Gi._getWheelDelta=function(e){return null!=e.wheelDelta?e.wheelDelta:null!=e.deltaY?-e.deltaY:-e.detail},Gi.prototype._isHorizontal=function(){return"horizontal"===this._orientation},Gi.prototype._isEmpty=function(){return!this._getContentParent().hasChildNodes()},Gi.prototype._reinitializeInnerDom=function(){this._origScroll=this._getCurrScroll(),this._setOverflowScroll(0),this._hidePrevButton(),this._hideNextButton()},Gi.prototype._clearCachedSizes=function(){this._totalSize=null,this._sizes=null},Gi.prototype._handleResize=function(e){e||this._reinitializeInnerDom(),this._clearCachedSizes(),this._totalSize=this._measureContents(),e||this._adjustOverflowSize(!1),this._alignButtons()},Gi.prototype._alignButtons=function(){var e=this._nextButton,t=this._prevButton,i=e.style,n=t.style,o=this._contentContainer,s=this._totalSize;if(this._isHorizontal()){var r=.5*(s.h-o.offsetHeight);i.top=r+"px",n.top=r+"px"}else{var a=.5*(s.w-o.offsetWidth);this._bRtl&&(a=-a),i.left=a+"px",n.left=a+"px"}},Gi.prototype._adjustOverflowSize=function(e){var t=this._contentContainer,i=this._isHorizontal(),n=Gi,o=i?n._getElemInnerWidth(this._elem):n._getElemInnerHeight(this._elem);this._minScroll=0,this._maxScroll=i?t.offsetWidth-o+this._buttonWidth:t.offsetHeight-o+this._buttonHeight,this._maxScroll<0&&(this._maxScroll=0),this._hidePrevButton(),this._hideNextButton(),this._setCurrScroll(e?this._minScroll:this._origScroll,!0),this._origScroll=0},Gi.prototype._createInnerContainers=function(){var e=this,t=this._elem,i=Gi,n=document.createElement("div");this._overflowContainer=n,this._addStyleClassNameFunc(n,this._overflowContainerStyleClass);var o=document.createElement("div");this._contentContainer=o,this._addStyleClassNameFunc(o,this._contentContainerStyleClass),this._reparentChildrenToContentContainer(t,o),t.appendChild(n),n.appendChild(o),this._scrollListener=function(t){e._handleScroll(t)},i._addBubbleEventListener(n,"scroll",this._scrollListener)},Gi.prototype._getContentElements=function(){var e,t=[],i=this._contentParent?this._contentParent:this._contentContainer,n=i.children,o=n.length;for(e=0;e<o;e++){var s=n[e];1===s.nodeType&&t.push(s)}if(t=(0,this._filterContentElementsFunc)(t),i===this._contentContainer&&this._itemStyleClass)for(e=0;e<t.length;e++){var r=t[e];this._hasStyleClassNameFunc(r,this._itemStyleClass)||this._addStyleClassNameFunc(r,this._itemStyleClass)}return t},Gi.prototype._createPrevButton=function(e,t){var i=this,n=document.createElement("div");this._prevButton=n,n.setAttribute("class",e),n.setAttribute("aria-hidden","true"),Gi._addBubbleEventListener(n,"click",function(){i._scrollPrev()}),n.appendChild(t),this._elem.insertBefore(n,this._overflowContainer)},Gi.prototype._createNextButton=function(e,t){var i=this,n=document.createElement("div");this._nextButton=n,n.setAttribute("class",e),n.setAttribute("aria-hidden","true"),Gi._addBubbleEventListener(n,"click",function(){i._scrollNext()}),n.appendChild(t),this._elem.appendChild(n)},Gi.prototype._getContentParent=function(){var e=this._contentParent;return e||(e=this._contentContainer),e},Gi.prototype._measureContents=function(){var e=this._getContentElements(),t={w:0,h:0},i=[];if(e.length>0){var n,o=e,s=this._isHorizontal();n=this._contentContainer.offsetWidth;for(var r=0,a=null,l=0;l<o.length;l++){var u=o[l];if(1===u.nodeType){var d=u.offsetWidth,h=u.offsetHeight,c={w:d,h:h,id:u.id};if(s){var p=u.offsetLeft;this._contentParent||0!==p||(p=u.parentNode.offsetLeft),this._bRtl?c.start=n-(p+d):c.start=p,0===l&&(r=c.start),c.start-=r,t.w=c.start+d,t.h=Math.max(t.h,h),c.end=t.w-1}else{var _=u.offsetTop;this._contentParent||0!==_||(_=u.parentNode.offsetTop),c.start=_,t.w=Math.max(t.w,d),t.h=c.start+h,c.end=t.h-1}if(a&&a.end>=c.start){var m=a.end-(c.start-1);a.end-=m,s?a.w-=m:a.h-=m}i.push(c),a=c}}}return this._sizes=i,t},Gi.prototype._getSizes=function(){return this._sizes},Gi.prototype._showNextButton=function(){this._removeStyleClassNameFunc(this._nextButton,this._hiddenStyleClass)},Gi.prototype._showPrevButton=function(){this._removeStyleClassNameFunc(this._prevButton,this._hiddenStyleClass)},Gi.prototype._hideNextButton=function(){this._addStyleClassNameFunc(this._nextButton,this._hiddenStyleClass)},Gi.prototype._hidePrevButton=function(){this._addStyleClassNameFunc(this._prevButton,this._hiddenStyleClass)},Gi.prototype._isNextButtonShown=function(){return!this._hasStyleClassNameFunc(this._nextButton,this._hiddenStyleClass)},Gi.prototype._isPrevButtonShown=function(){return!this._hasStyleClassNameFunc(this._prevButton,this._hiddenStyleClass)},Gi.prototype._getButtonSize=function(){return this._isHorizontal()?this._buttonWidth:this._buttonHeight},Gi.prototype._updateButtonVisibility=function(e){var t=this._getButtonSize(),i=this._getCurrScroll(),n=this._needsScroll();e<=this._minScroll?(this._isPrevButtonShown()&&(i-=t),this._hidePrevButton()):n&&(this._isPrevButtonShown()||(i+=t),this._showPrevButton()),e>=this._maxScroll?this._hideNextButton():n&&this._showNextButton(),this._setOverflowScroll(i)},Gi.prototype._setOverflowScroll=function(e){var t=this._overflowContainer;this._isHorizontal()?t.scrollLeft=this._convertScrollLogicalToBrowser(e):t.scrollTop=e},Gi.prototype._getCurrViewportSize=function(){var e=this._overflowContainer;return this._isHorizontal()?e.offsetWidth:e.offsetHeight},Gi.prototype._setCurrScroll=function(e,t){this._bScrolling||(this._bExternalScroll=!1,this._setCurrScrollHelper(e,t))},Gi.prototype._setCurrScrollHelper=function(e,t){if(!this._isEmpty()){this._bScrolling=!0,e=this._constrainScroll(e),this._updateButtonVisibility(e);var i=this._scrollFunc;if(t||!i||e===this._getCurrScroll())this._onScrollAnimEnd(this._bExternalScroll?this._getCurrScroll():e);else{this._busyStateResolveFunc=this._addBusyStateFunc("scrolling");var n=Gi,o=Math.abs(this._getCurrScroll()-e)/n._SCROLL_SPEED,s=this;i.call(null,this._overflowContainer,this._convertScrollLogicalToBrowser(e),o,function(){s._onScrollAnimEnd(e),s._resolveBusyState()})}}},Gi.prototype._resolveBusyState=function(){this._busyStateResolveFunc&&(this._busyStateResolveFunc(),this._busyStateResolveFunc=null)},Gi.prototype._getCurrScroll=function(){var e=this._overflowContainer;return this._isHorizontal()?this._convertScrollBrowserToLogical(e.scrollLeft):e.scrollTop},Gi.prototype._needsScroll=function(){var e=this._contentContainer,t=this._overflowContainer;return this._isHorizontal()?e.offsetWidth>t.offsetWidth:e.offsetHeight>t.offsetHeight},Gi.prototype._constrainScroll=function(e){return!this._needsScroll()||e<this._minScroll?this._minScroll:e>this._maxScroll?this._maxScroll:e},Gi.prototype._handleMouseWheel=function(e){var t=this._bScrolling;if(this._needsScroll()&&!this._bScrolling){var i=Gi._getWheelDelta(e);i<0&&this._isNextButtonShown()?(t=!0,this._scrollNext()):i>0&&this._isPrevButtonShown()&&(t=!0,this._scrollPrev())}t&&(e.preventDefault(),e.stopPropagation())},Gi.prototype._handleTouchStart=function(e){var t=e.touches;if(this._needsScroll()&&!this._bScrolling&&1===t.length){this._bTouch=!0;var i=t[0];this._touchStartCoord=this._isHorizontal()?i.pageX:i.pageY,this._touchStartScroll=this._getCurrScroll(),this._touchStartNextScroll=this._calcNextScroll(),this._touchStartPrevScroll=this._calcPrevScroll(),this._touchStartNextButtonShown=this._isNextButtonShown(),this._touchStartPrevButtonShown=this._isPrevButtonShown()}},Gi.prototype._handleTouchMove=function(e){var t=this._isHorizontal(),i=e.touches[0],n=(t?i.pageX:i.pageY)-this._touchStartCoord,o=t&&this._bRtl?n>0:n<0,s=o&&this._touchStartNextButtonShown||!o&&this._touchStartPrevButtonShown;if(this._bTouch&&s){var r=Gi,a=this._overflowContainer,l=r._SWIPE_THRESHOLD*(t?a.offsetWidth:a.offsetHeight);Math.abs(n)<l?(this._setCurrScroll(this._touchStartScroll-n,!0),(this._touchStartNextButtonShown&&!this._isNextButtonShown()||this._touchStartPrevButtonShown&&!this._isPrevButtonShown())&&(this._bTouch=!1)):(this._setCurrScroll(o?this._touchStartNextScroll:this._touchStartPrevScroll,!1),this._bTouch=!1),this._scrolledForThisTouch=!0}this._scrolledForThisTouch&&(e.preventDefault(),e.stopPropagation())},Gi.prototype._handleTouchEnd=function(e){this._bTouch&&this._setCurrScroll(this._touchStartScroll,!1),this._bTouch=!1,this._scrolledForThisTouch=!1},Gi.prototype._handleScroll=function(e){this._bExternalScroll&&!this._bScrolling&&this._setCurrScrollHelper(this._getCurrScroll(),!0)},Gi.prototype._onScrollAnimEnd=function(e){this._setOverflowScroll(e),this._bExternalScroll=!0,this._bScrolling=!1},Gi.prototype._scrollNext=function(){this._bScrolling||this._setCurrScroll(this._calcNextScroll(),!1)},Gi.prototype._scrollPrev=function(){this._bScrolling||this._setCurrScroll(this._calcPrevScroll(),!1)},Gi.prototype._calcNextScroll=function(){var e=this._calcNextVisibleItemIndex();return e===this._calcFirstVisibleItemIndex()?this._getCurrScroll()+this._getCurrViewportSize():this._calcStartScroll(e)},Gi.prototype._calcPrevScroll=function(){var e=this._calcPrevVisibleItemIndex(),t=0;return t=e===this._calcLastVisibleItemIndex()?this._getCurrScroll()-this._getCurrViewportSize():this._calcEndScroll(e),this._isNextButtonShown()||(t+=this._getButtonSize()),t<=this._getButtonSize()&&(t=this._minScroll),t},Gi.prototype._calcStartScroll=function(e){return this._getSizes()[e].start},Gi.prototype._calcEndScroll=function(e){return this._getSizes()[e].end-this._getCurrViewportSize()+1},Gi.prototype._calcFirstVisibleItemIndex=function(){var e=this._getCurrScroll(),t=this._calcItemIndex(e);return t<0?0:t},Gi.prototype._calcLastVisibleItemIndex=function(){var e=this._getCurrViewportSize(),t=this._getCurrScroll()+e-1,i=this._calcItemIndex(t),n=this._getSizes();return i<0?n.length-1:i},Gi.prototype._calcPrevVisibleItemIndex=function(){var e=this._getCurrScroll()-1,t=this._calcItemIndex(e);return t<0?0:t},Gi.prototype._calcNextVisibleItemIndex=function(){var e=this._getCurrViewportSize(),t=this._getCurrScroll()+e,i=this._calcItemIndex(t),n=this._getSizes();return i<0?n.length-1:i},Gi.prototype._calcItemIndex=function(e){for(var t=this._getSizes(),i=0;i<t.length;i++){if(e<=t[i].end)return i}return-1},Gi.prototype._convertScrollLogicalToBrowser=function(e){var t=e;if(this._bRtl&&this._isHorizontal())if(this._bAgentGecko||this._bAgentSafari&&this._agentVersion>=10)t=-e;else if(this._bAgentWebkit||this._bAgentSafari&&this._agentVersion<10){var i=this._contentContainer,n=this._overflowContainer;t=i.offsetWidth-n.offsetWidth-e}return t},Gi.prototype._convertScrollBrowserToLogical=function(e){return this._convertScrollLogicalToBrowser(e)},Gi._SCROLL_SPEED=1.1,Gi._SWIPE_THRESHOLD=.33,n.__registerWidget("oj.ojConveyorBelt",$.oj.baseComponent,{defaultElement:"<div>",widgetEventPrefix:"oj",options:{orientation:"horizontal",contentParent:null},_ComponentCreate:function(){this._super(),this.element.addClass("oj-conveyorbelt oj-component"),this.options.disabled&&e.warn("JET ConveyorBelt: 'disabled' property not supported"),this._setup()},refresh:function(){this._super();var e,t="rtl"===this._GetReadingDirection(),i=this._bRTL!==t;i||(e=this._cbCommon.getScroll()),this._destroyCBCommon(),this._setup(),i||this._cbCommon.setScroll(e,!0)},_NotifyShown:function(){this._super(),this._needsSetup?this._setup():this._cbCommon&&this._cbCommon.handleResize()},_NotifyAttached:function(){this._super(),this._needsSetup?this._setup():this._cbCommon&&this._cbCommon.handleResize()},_setup:function(){var e=this,t=this.element,i=this.options,o=i.orientation;if("vertical"===o?t.addClass("oj-conveyorbelt-vertical"):t.removeClass("oj-conveyorbelt-vertical"),this._canCalculateSizes()){if(this._needsSetup=null,this._bRTL="rtl"===this._GetReadingDirection(),!this._cbCommon){var s=null,r=null,a=null,l=null,u=null;"vertical"!==o?(s="oj-enabled oj-conveyorbelt-overflow-indicator oj-start oj-default",r="oj-enabled oj-conveyorbelt-overflow-indicator oj-end oj-default",a=this._createIcon("oj-conveyorbelt-overflow-icon oj-start"),l=this._createIcon("oj-conveyorbelt-overflow-icon oj-end"),u=this._animateScrollLeft):(s="oj-enabled oj-conveyorbelt-overflow-indicator oj-top oj-default",r="oj-enabled oj-conveyorbelt-overflow-indicator oj-bottom oj-default",a=this._createIcon("oj-conveyorbelt-overflow-icon oj-top"),l=this._createIcon("oj-conveyorbelt-overflow-icon oj-bottom"),u=this._animateScrollTop);var d={};d.prevButtonStyleClass=s,d.nextButtonStyleClass=r,d.prevButtonIcon=a,d.nextButtonIcon=l;var h={overflowContainerStyleClass:"oj-conveyorbelt-overflow-container",contentContainerStyleClass:"oj-conveyorbelt-content-container",itemStyleClass:"oj-conveyorbelt-item",hiddenStyleClass:"oj-helper-hidden"},c={addResizeListener:function(e,t){n.DomUtils.addResizeListener(e,t,25)}};c.removeResizeListener=n.DomUtils.removeResizeListener,c.addStyleClassName=this._addStyleClassName,c.removeStyleClassName=this._removeStyleClassName,c.hasStyleClassName=this._hasStyleClassName,c.filterContentElements=function(t){return e._filterContentElements(t)},c.subtreeDetached=w.subtreeDetached,c.subtreeAttached=w.subtreeAttached,c.addBusyState=function(t){return e._addBusyState(t)},"enabled"!==p.getAutomationMode()&&(c.scrollFunc=u);var _=null;i.contentParent&&(_=$(i.contentParent)[0]);var m=n.AgentUtils.getAgentInfo(navigator.userAgent);this._cbCommon=new Gi(t[0],o,_,this._bRTL,d,c,h,m)}this._cbCommon.setup();for(var g=t.find(".oj-conveyorbelt-overflow-indicator"),f=0;f<g.length;f++)this._setupButtonMouseStyles($(g[f]))}else this._needsSetup=!0},_destroy:function(){this._destroyCBCommon(),this.element.removeClass("oj-conveyorbelt oj-component oj-conveyorbelt-vertical"),this._super()},_setOption:function(t,i,n){var o=!1,s=this.options;switch(t){case"containerParent":case"orientation":o=s.orientation!==i;break;case"disabled":e.warn("JET ConveyorBelt: 'disabled' property not supported")}o&&this._destroyCBCommon(),this._super(t,i,n),o&&this._setup()},_destroyCBCommon:function(){var e=this._cbCommon;e&&(this.element.find(".oj-conveyorbelt-overflow-indicator").off(this.eventNamespace),e.destroy()),this._cbCommon=null},_canCalculateSizes:function(){var e=document.createElement("div"),t=e.style;t.width="10px",t.height="10px",t["-webkit-flex"]="0 0 auto",t.flex="0 0 auto";var i=this.element[0];i.appendChild(e);var n=!1;try{n=e.offsetWidth>0&&e.offsetHeight>0}catch(e){}return i.removeChild(e),n},_setupButtonMouseStyles:function(e){this._AddHoverable({element:e,afterToggle:function(t){"mouseenter"===t?e.removeClass("oj-default"):"mouseleave"===t&&e.addClass("oj-default")}}),this._AddActiveable({element:e,afterToggle:function(t){"mousedown"===t||"touchstart"===t||"mouseenter"===t?e.removeClass("oj-default"):"mouseup"!==t&&"touchend"!==t&&"touchcancel"!==t&&"mouseleave"!==t||e.addClass("oj-default")}})},_createIcon:function(e){var t=document.createElement("span");return t.setAttribute("class","oj-component-icon "+e),t},_animateScrollLeft:function(e,t,i,n){var o={};o.scrollLeft=t,$(e).animate(o,i,"swing",n)},_animateScrollTop:function(e,t,i,n){var o={};o.scrollTop=t,$(e).animate(o,i,"swing",n)},_addStyleClassName:function(e,t){$(e).addClass(t)},_removeStyleClassName:function(e,t){$(e).removeClass(t)},_hasStyleClassName:function(e,t){return $(e).hasClass(t)},_filterContentElements:function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];this._hasStyleClassName(n,"oj-helper-detect-expansion")||this._hasStyleClassName(n,"oj-helper-detect-contraction")||t.push(n)}return t},_addBusyState:function(e){var t=this.element,i=c.getContext(t[0]).getBusyContext(),n="ConveyorBelt";n+=" (id='"+t.attr("id")+"')";var o={description:n+=": "+e};return i.addBusyState(o)},getNodeBySubId:function(e){if(null==e)return this.element[0];var t=e.subId;return"oj-conveyorbelt-start-overflow-indicator"===t?this.widget().find(".oj-conveyorbelt-overflow-indicator.oj-start")[0]:"oj-conveyorbelt-end-overflow-indicator"===t?this.widget().find(".oj-conveyorbelt-overflow-indicator.oj-end")[0]:"oj-conveyorbelt-top-overflow-indicator"===t?this.widget().find(".oj-conveyorbelt-overflow-indicator.oj-top")[0]:"oj-conveyorbelt-bottom-overflow-indicator"===t?this.widget().find(".oj-conveyorbelt-overflow-indicator.oj-bottom")[0]:null},getSubIdByNode:function(e){for(var t=this.getNodeBySubId({subId:"oj-conveyorbelt-start-overflow-indicator"}),i=this.getNodeBySubId({subId:"oj-conveyorbelt-end-overflow-indicator"}),n=this.getNodeBySubId({subId:"oj-conveyorbelt-top-overflow-indicator"}),o=this.getNodeBySubId({subId:"oj-conveyorbelt-bottom-overflow-indicator"}),s=e,r=this.element[0];s&&s!==r;){if(s===t)return{subId:"oj-conveyorbelt-start-overflow-indicator"};if(s===i)return{subId:"oj-conveyorbelt-end-overflow-indicator"};if(s===n)return{subId:"oj-conveyorbelt-top-overflow-indicator"};if(s===o)return{subId:"oj-conveyorbelt-bottom-overflow-indicator"};s=s.parentElement}return null}}),Vi.extension._WIDGET_NAME="ojConveyorBelt",n.CustomElementBridge.register("oj-conveyor-belt",{metadata:Vi}),n.DataCollectionEditUtils={},n.DataCollectionEditUtils.basicHandleEditEnd=function(e,t){null!=t&&null!=t.cellContext||(t=e.detail);var i=$(t.cellContext.parentElement).find(".oj-component-initnode")[0],o=n.Components.__GetWidgetConstructor(i);t.cancelEdit?o("reset"):(o("validate"),o("isValid")||e.preventDefault())},n.DataCollectionEditUtils.basicHandleRowEditEnd=function(e,t){for(var i=$(t.rowContext.parentElement).find(".oj-component-initnode"),o=0;o<i.length;o++){var s=n.Components.__GetWidgetConstructor(i[o]),r=t.cancelEdit;try{if(r)s("reset");else if(s("validate"),!s("isValid"))return!1}catch(e){}}return!0};ye.addPostprocessor({nodeHasBindings:function(e,t){return t||1===e.nodeType&&"oj-defer"===e.nodeName.toLowerCase()},getBindingAccessors:function(e,t,i){var n=i;return 1===e.nodeType&&"oj-defer"===e.nodeName.toLowerCase()&&((n=n||{})._ojDefer_=function(){}),n}}),ko.bindingHandlers._ojDefer_={init:function(e,t,i,n,o){var s=e;if(s._shown)ko.applyBindingsToDescendants(o,s);else{if(!s._savedChildNodes){for(var r=document.createDocumentFragment(),a=s.childNodes;a.length>0;)r.appendChild(a[0]);s._savedChildNodes=r}Object.defineProperty(s,"_activateDescedantBindings",{value:function(){ko.applyBindingsToDescendants(o,s),delete s._activateDescedantBindings},configurable:!0})}return{controlsDescendantBindings:!0}}},n.DeferElement={},n.DeferElement.register=function(){var e=Object.create(HTMLElement.prototype);Object.defineProperty(e,"_activate",{value:function(){this._activateDescedantBindings?(this._savedChildNodes&&(this.appendChild(this._savedChildNodes),delete this._savedChildNodes),this._activateDescedantBindings()):Object.defineProperty(this,"_shown",{configurable:!1,value:!0})},writable:!1});var t=function(){var e=window.Reflect;return void 0!==e?e.construct(HTMLElement,[],this.constructor):HTMLElement.call(this)};Object.defineProperty(e,"constructor",{value:t,writable:!0,configurable:!0}),t.prototype=e,Object.setPrototypeOf(t,HTMLElement),customElements.define("oj-defer",t)},n.DeferElement.register();var $i={properties:{animationOnDataChange:{type:"string",enumValues:["auto","none"],value:"none"},animationOnDisplay:{type:"string",enumValues:["auto","none"],value:"none"},as:{type:"string",value:""},data:{type:"object"},dnd:{type:"object",properties:{drag:{type:"object",properties:{nodes:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},drag:{type:"function"},dragEnd:{type:"function"},dragStart:{type:"function"}}},ports:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},drag:{type:"function"},dragEnd:{type:"function"},dragStart:{type:"function"},linkStyle:{type:"function"},selector:{type:"string"}}}}},drop:{type:"object",properties:{background:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragLeave:{type:"function"},dragOver:{type:"function"},drop:{type:"function"}}},links:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragLeave:{type:"function"},dragOver:{type:"function"},drop:{type:"function"}}},nodes:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragLeave:{type:"function"},dragOver:{type:"function"},drop:{type:"function"}}},ports:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragLeave:{type:"function"},dragOver:{type:"function"},drop:{type:"function"},selector:{type:"string"}}}}}}},expanded:{type:"KeySet",writeback:!0,value:"new ExpandedKeySet()"},focusRenderer:{type:"function",properties:{parentElement:{type:"Element"},componentElement:{type:"Element"},data:{type:"object"},itemData:{type:"object"},content:{type:"object",properties:{element:{type:"Element"},width:{type:"number"},height:{type:"number"}}},state:{type:"object",properties:{hovered:{type:"boolean"},selected:{type:"boolean"},focused:{type:"boolean"},expanded:{type:"boolean"},zoom:{type:"number"}}},previousState:{type:"object",properties:{hovered:{type:"boolean"},selected:{type:"boolean"},focused:{type:"boolean"},expanded:{type:"boolean"},zoom:{type:"number"}}},id:{type:"any"},type:{type:"string"},renderDefaultFocus:{type:"function"},renderDefaultHover:{type:"function"},renderDefaultSelection:{type:"function"}}},hiddenCategories:{type:"Array<string>",writeback:!0,value:[]},highlightMatch:{type:"string",enumValues:["all","any"],value:"all"},highlightedCategories:{type:"Array<string>",writeback:!0,value:[]},hoverBehavior:{type:"string",enumValues:["dim","none"],value:"none"},hoverRenderer:{type:"function",properties:{parentElement:{type:"Element"},componentElement:{type:"Element"},data:{type:"object"},itemData:{type:"object"},content:{type:"object",properties:{element:{type:"Element"},width:{type:"number"},height:{type:"number"}}},state:{type:"object",properties:{hovered:{type:"boolean"},selected:{type:"boolean"},focused:{type:"boolean"},expanded:{type:"boolean"},zoom:{type:"number"}}},previousState:{type:"object",properties:{hovered:{type:"boolean"},selected:{type:"boolean"},focused:{type:"boolean"},expanded:{type:"boolean"},zoom:{type:"number"}}},id:{type:"any"},type:{type:"string"},renderDefaultFocus:{type:"function"},renderDefaultHover:{type:"function"},renderDefaultSelection:{type:"function"}}},layout:{type:"function"},linkData:{type:"oj.DataProvider"},linkHighlightMode:{type:"string",enumValues:["link","linkAndNodes"],value:"link"},linkProperties:{type:"function",properties:{labelStyle:{type:"object"},color:{type:"string"},svgStyle:{type:"object"},svgClassName:{type:"string"},width:{type:"number"},startConnectorType:{type:"string"},endConnectorType:{type:"string"}}},maxZoom:{type:"number",value:1},minZoom:{type:"number",value:0},nodeData:{type:"oj.DataProvider"},nodeHighlightMode:{type:"string",enumValues:["node","nodeAndIncomingLinks","nodeAndLinks","nodeAndOutgoingLinks"],value:"node"},nodeProperties:{type:"function",properties:{showDisclosure:{type:"string"},labelStyle:{type:"object"},icon:{type:"object",properties:{borderColor:{type:"string"},borderRadius:{type:"string"},borderWidth:{type:"number"},color:{type:"string"},pattern:{type:"string"},opacity:{type:"number"},shape:{type:"string"},source:{type:"string"},sourceHover:{type:"string"},sourceHoverSelected:{type:"string"},sourceSelected:{type:"string"},width:{type:"number"},height:{type:"number"},svgStyle:{type:"object"},svgClassName:{type:"string"}}},overview:{type:"object",properties:{icon:{type:"object",properties:{shape:{type:"string"},svgStyle:{type:"object"},svgClassName:{type:"string"}}}}}}},overview:{type:"object",properties:{halign:{type:"string",enumValues:["center","end","start"],value:"end"},height:{type:"number",value:100},rendered:{type:"string",enumValues:["off","on"],value:"off"},valign:{type:"string",enumValues:["bottom","middle","top"],value:"bottom"},width:{type:"number",value:200}}},panDirection:{type:"string",enumValues:["auto","x","y"],value:"auto"},panning:{type:"string",enumValues:["auto","none"],value:"none"},promotedLinkBehavior:{type:"string",enumValues:["full","lazy","none"],value:"lazy"},renderer:{type:"function",properties:{parentElement:{type:"Element"},componentElement:{type:"Element"},data:{type:"object"},itemData:{type:"object"},content:{type:"object",properties:{element:{type:"Element"},width:{type:"number"},height:{type:"number"}}},state:{type:"object",properties:{hovered:{type:"boolean"},selected:{type:"boolean"},focused:{type:"boolean"},expanded:{type:"boolean"},zoom:{type:"number"}}},previousState:{type:"object",properties:{hovered:{type:"boolean"},selected:{type:"boolean"},focused:{type:"boolean"},expanded:{type:"boolean"},zoom:{type:"number"}}},id:{type:"any"},type:{type:"string"},renderDefaultFocus:{type:"function"},renderDefaultHover:{type:"function"},renderDefaultSelection:{type:"function"}}},selection:{type:"Array<any>",writeback:!0,value:[]},selectionMode:{type:"string",enumValues:["multiple","none","single"],value:"none"},selectionRenderer:{type:"function",properties:{parentElement:{type:"Element"},componentElement:{type:"Element"},data:{type:"object"},itemData:{type:"object"},content:{type:"object",properties:{element:{type:"Element"},width:{type:"number"},height:{type:"number"}}},state:{type:"object",properties:{hovered:{type:"boolean"},selected:{type:"boolean"},focused:{type:"boolean"},expanded:{type:"boolean"},zoom:{type:"number"}}},previousState:{type:"object",properties:{hovered:{type:"boolean"},selected:{type:"boolean"},focused:{type:"boolean"},expanded:{type:"boolean"},zoom:{type:"number"}}},id:{type:"any"},type:{type:"string"},renderDefaultFocus:{type:"function"},renderDefaultHover:{type:"function"},renderDefaultSelection:{type:"function"}}},styleDefaults:{type:"object",properties:{animationDuration:{type:"number"},hoverBehaviorDelay:{type:"number",value:200},linkDefaults:{type:"object",properties:{color:{type:"string"},endConnectorType:{type:"string",enumValues:["arrow","arrowConcave","arrowOpen","circle","none","rectangle","rectangleRounded"],value:"none"},labelStyle:{type:"object"},startConnectorType:{type:"string",enumValues:["arrow","arrowConcave","arrowOpen","circle","none","rectangle","rectangleRounded"],value:"none"},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}},width:{type:"number",value:1}}},nodeDefaults:{type:"object",properties:{icon:{type:"object",properties:{borderColor:{type:"string"},borderRadius:{type:"string"},borderWidth:{type:"number"},color:{type:"string"},height:{type:"number",value:10},pattern:{type:"string",enumValues:["largeChecker","largeCrosshatch","largeDiagonalLeft","largeDiagonalRight","largeDiamond","largeTriangle","none","smallChecker","smallCrosshatch","smallDiagonalLeft","smallDiagonalRight","smallDiamond","smallTriangle"],value:"none"},shape:{type:'"circle"|"diamond"|"ellipse"|"human"|"plus"|"rectangle"|"square"|"star"|"triangleDown"|"triangleUp"|string',value:"circle"},source:{type:"string"},sourceHover:{type:"string"},sourceHoverSelected:{type:"string"},sourceSelected:{type:"string"},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}},width:{type:"number",value:10}}},labelStyle:{type:"object",value:{}},showDisclosure:{type:"string",enumValues:["off","on"],value:"on"}}},promotedLink:{type:"object",properties:{color:{type:"string"},endConnectorType:{type:"string",enumValues:["arrow","arrowConcave","arrowOpen","circle","none","rectangle","rectangleRounded"],value:"none"},startConnectorType:{type:"string",enumValues:["arrow","arrowConcave","arrowOpen","circle","none","rectangle","rectangleRounded"],value:"none"},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}},width:{type:"number",value:1}}}}},tooltip:{type:"object",properties:{renderer:{type:"function",properties:{parentElement:{type:"Element"},componentElement:{type:"Element"},id:{type:"any"},type:{type:"string"},label:{type:"string"},data:{type:"object|Array<Object>"},itemData:{type:"object|Array<Object>"}}}}},touchResponse:{type:"string",enumValues:["auto","touchStart"],value:"auto"},trackResize:{type:"string",enumValues:["off","on"],value:"on"},translations:{type:"object",value:{},properties:{componentName:{type:"string"},labelAndValue:{type:"string"},labelClearSelection:{type:"string"},labelCountWithTotal:{type:"string"},labelDataVisualization:{type:"string"},labelInvalidData:{type:"string"},labelNoData:{type:"string"},promotedLink:{type:"string"},promotedLinkAriaDesc:{type:"string"},promotedLinks:{type:"string"},stateCollapsed:{type:"string"},stateDrillable:{type:"string"},stateExpanded:{type:"string"},stateHidden:{type:"string"},stateIsolated:{type:"string"},stateMaximized:{type:"string"},stateMinimized:{type:"string"},stateSelected:{type:"string"},stateUnselected:{type:"string"},stateVisible:{type:"string"}}},zoomRenderer:{type:"function",properties:{parentElement:{type:"Element"},componentElement:{type:"Element"},data:{type:"object"},itemData:{type:"object"},content:{type:"object",properties:{element:{type:"Element"},width:{type:"number"},height:{type:"number"}}},state:{type:"object",properties:{hovered:{type:"boolean"},selected:{type:"boolean"},focused:{type:"boolean"},expanded:{type:"boolean"},zoom:{type:"number"}}},previousState:{type:"object",properties:{hovered:{type:"boolean"},selected:{type:"boolean"},focused:{type:"boolean"},expanded:{type:"boolean"},zoom:{type:"number"}}},id:{type:"any"},type:{type:"string"},renderDefaultFocus:{type:"function"},renderDefaultHover:{type:"function"},renderDefaultSelection:{type:"function"}}},zooming:{type:"string",enumValues:["auto","none"],value:"none"}},methods:{getNodeCount:{},getNode:{},getLinkCount:{},getLink:{},getPromotedLink:{},getContextByNode:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojBeforeExpand:{},ojExpand:{},ojBeforeCollapse:{},ojCollapse:{}},extension:{}},Ki={properties:{categories:{type:"Array<string>",value:[]},color:{type:"string"},endConnectorType:{type:"string",enumValues:["arrow","arrowConcave","arrowOpen","circle","none","rectangle","rectangleRounded"],value:"none"},endNode:{type:"any"},label:{type:"string",value:""},labelStyle:{type:"object"},selectable:{type:"string",enumValues:["auto","off"],value:"auto"},shortDesc:{type:"string",value:""},startConnectorType:{type:"string",enumValues:["arrow","arrowConcave","arrowOpen","circle","none","rectangle","rectangleRounded"],value:"none"},startNode:{type:"any"},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}},width:{type:"number",value:1}},extension:{}},zi={properties:{categories:{type:"Array<string>",value:[]},descendantsConnectivity:{type:"string",enumValues:["connected","disjoint","unknown"],value:"unknown"},icon:{type:"object",value:{},properties:{borderColor:{type:"string"},borderRadius:{type:"string"},borderWidth:{type:"number"},color:{type:"string"},height:{type:"number"},opacity:{type:"number"},pattern:{type:"string",enumValues:["largeChecker","largeCrosshatch","largeDiagonalLeft","largeDiagonalRight","largeDiamond","largeTriangle","mallChecker","none","smallCrosshatch","smallDiagonalLeft","smallDiagonalRight","smallDiamond","smallTriangle"]},shape:{type:'"circle"|"diamond"|"ellipse"|"human"|"plus"|"rectangle"|"square"|"star"|"triangleDown"|"triangleUp"|string'},source:{type:"string"},sourceHover:{type:"string"},sourceHoverSelected:{type:"string"},sourceSelected:{type:"string"},svgClassName:{type:"string"},svgStyle:{type:"object"},width:{type:"number"}}},label:{type:"string",value:""},labelStyle:{type:"object"},overview:{type:"object",value:{},properties:{icon:{type:"object",properties:{shape:{type:"string"},svgClassName:{type:"string"},svgStyle:{type:"object"}}}}},selectable:{type:"string",enumValues:["auto","off"],value:"auto"},shortDesc:{type:"string",value:""},showDisclosure:{type:"string",enumValues:["off","on"],value:"on"}},extension:{}};n.ConversionDiagramDataSource=function(e,t){this.childDataCallback=t?t.childData:null,n.ConversionDiagramDataSource.superclass.constructor.call(this,e)},n.Object.createSubclass(n.ConversionDiagramDataSource,n.DiagramDataSource,"oj.ConversionDiagramDataSource"),n.ConversionDiagramDataSource.prototype.getData=function(e){if(e){var t=e.nodes;if(void 0===t&&this.childDataCallback){var i=this.childDataCallback(e);return Promise.resolve(i).then(function(e){return Promise.resolve({nodes:e})},function(){return Promise.resolve({nodes:[]})})}return Promise.resolve({nodes:t})}var n=this.data.nodes,o=this.data.links;return n instanceof Function&&(n=n()),o instanceof Function&&(o=o()),Promise.all([n,o]).then(function(e){return Promise.resolve({nodes:e[0],links:e[1]})},function(){return Promise.resolve({nodes:[],links:[]})})},n.ConversionDiagramDataSource.prototype.getChildCount=function(e){if(e){var t=e.nodes;return Array.isArray(t)?t.length:void 0===t&&this.childDataCallback?-1:0}return-1},n.ConversionDiagramDataSource.prototype.getDescendantsConnectivity=function(e){return"unknown"},n.DiagramUtils=gi,n.__registerWidget("oj.ojDiagram",$.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{animationOnDataChange:"none",animationOnDisplay:"none",dnd:{drag:null,drop:null},expanded:new n.ExpandedKeySet,selection:[],selectionMode:"none",panning:"none",panDirection:"auto",tooltip:{renderer:null},zooming:"none",minZoom:0,maxZoom:1,hiddenCategories:[],hoverBehavior:"none",highlightedCategories:[],highlightMatch:"all",nodeHighlightMode:"node",linkHighlightMode:"link",renderer:null,hoverRenderer:null,selectionRenderer:null,focusRenderer:null,zoomRenderer:null,data:null,linkData:null,nodeData:null,as:"",linkProperties:null,nodeProperties:null,promotedLinkBehavior:"lazy",overview:{rendered:"off",width:200,height:100,halign:"end",valign:"bottom"},styleDefaults:{hoverBehaviorDelay:200,nodeDefaults:{labelStyle:{},showDisclosure:"on",icon:{pattern:"none",shape:"circle",width:10,height:10,svgClassName:""}},linkDefaults:{svgClassName:"",width:1,labelStyle:{},startConnectorType:"none",endConnectorType:"none"},promotedLink:{color:"#778999",svgClassName:"",width:1,startConnectorType:"none",endConnectorType:"none"}},touchResponse:"auto",beforeExpand:null,expand:null,beforeCollapse:null,collapse:null},_InitOptions:function(e,t){this._super(e,t);var i=this.options.styleDefaults;this.options.styleDefaults=i},_ProcessOptions:function(){this._super(),this.options._logger=e,this.options._templateFunction&&(this.options.renderer=this._GetTemplateDataRenderer(this.options._templateFunction,"node")),this.options.renderer&&(this.options._contextHandler=this._getContextHandler()),this.options.nodeData&&(this.options._fetchDataHandler=this._GetFetchDataHandler("nodeData")),this.options.nodes&&(this.options.nodeProperties=this.options.nodeProperties?this.options.nodeProperties:function(e){return e},this.options.linkProperties=this.options.linkProperties?this.options.linkProperties:function(e){return e},this.options.data=new n.ConversionDiagramDataSource({nodes:this.options.nodes,links:this.options.links},{childData:this.options.childNodes})),this.options.expanded||(this.options.expanded=new n.ExpandedKeySet),this.options.dnd.drag||(this.options.dnd.drag={nodes:{},ports:{}}),this.options.dnd.drop||(this.options.dnd.drop={background:{},nodes:{},links:{},ports:{}})},_IsDraggable:function(){var e=this.options.dnd?this.options.dnd.drag:null;return e.nodes&&Object.keys(e.nodes).length>0||e.ports&&Object.keys(e.ports).length>0},_GetComponentRendererOptions:function(){return["tooltip/renderer","renderer","focusRenderer","hoverRenderer","selectionRenderer","zoomRenderer"]},_SetupResources:function(){this._super(),this._component&&this._component.addDataSourceEventListeners()},_ReleaseResources:function(){this._super(),this._component&&this._component.removeDataSourceEventListeners()},_getContextHandler:function(){var e=this;return function(t,i,n,o,s,r){var a={component:w.__GetWidgetConstructor(e.element),parentElement:t,rootElement:i,content:n,data:o,state:s,previousState:r,id:o.id,type:"node",label:o.label};return e._IsCustomElement()&&(a.renderDefaultHover=e.renderDefaultHover.bind(e,a),a.renderDefaultSelection=e.renderDefaultSelection.bind(e,a),a.renderDefaultFocus=e.renderDefaultFocus.bind(e,a)),e._FixRendererContext(a)}},renderDefaultHover:function(e){e.previousState&&e.state.hovered===e.previousState.hovered||this._GetDvtComponent(this.element).processDefaultHoverEffect(e.id,e.state.hovered)},renderDefaultSelection:function(e){e.previousState&&e.state.selected===e.previousState.selected||this._GetDvtComponent(this.element).processDefaultSelectionEffect(e.id,e.state.selected)},renderDefaultFocus:function(e){e.previousState&&e.state.focused===e.previousState.focused||this._GetDvtComponent(this.element).processDefaultFocusEffect(e.id,e.state.focused)},_CreateDvtComponent:function(e,t,i){return dvt.Diagram.newInstance(e,t,i)},_ConvertLocatorToSubId:function(e){var t=e.subId;return"oj-diagram-link"===t?t="link["+e.index+"]":"oj-diagram-node"===t?t="node["+e.index+"]":"oj-diagram-tooltip"===t&&(t="tooltip"),t},_ConvertSubIdToLocator:function(e){var t={};return 0===e.indexOf("link")?(t.subId="oj-diagram-link",t.index=this._GetFirstIndex(e)):0===e.indexOf("node")?(t.subId="oj-diagram-node",t.index=this._GetFirstIndex(e)):"tooltip"===e&&(t.subId="oj-diagram-tooltip"),t},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-diagram"),e},_GetChildStyleClasses:function(){var e=this._super();return e["oj-dvtbase oj-diagram"]={path:"styleDefaults/animationDuration",property:"ANIM_DUR"},e["oj-diagram-node-label"]={path:"styleDefaults/nodeDefaults/labelStyle",property:"TEXT"},e["oj-diagram-node oj-selected"]={path:"styleDefaults/nodeDefaults/selectionColor",property:"border-color"},e["oj-diagram-node oj-hover"]=[{path:"styleDefaults/nodeDefaults/hoverOuterColor",property:"border-top-color"},{path:"styleDefaults/nodeDefaults/hoverInnerColor",property:"border-bottom-color"}],e["oj-diagram-link"]={path:"styleDefaults/linkDefaults/color",property:"color"},e["oj-diagram-link-label"]={path:"styleDefaults/linkDefaults/labelStyle",property:"TEXT"},e["oj-diagram-link oj-selected"]={path:"styleDefaults/linkDefaults/selectionColor",property:"border-color"},e["oj-diagram-link oj-hover"]=[{path:"styleDefaults/linkDefaults/hoverOuterColor",property:"border-top-color"},{path:"styleDefaults/linkDefaults/hoverInnerColor",property:"border-bottom-color"}],e["oj-diagram-overview"]={path:"styleDefaults/_overviewStyles/overview/backgroundColor",property:"background-color"},e["oj-diagram-overview-viewport"]=[{path:"styleDefaults/_overviewStyles/viewport/borderColor",property:"border-color"},{path:"styleDefaults/_overviewStyles/viewport/backgroundColor",property:"background-color"}],e},_GetEventTypes:function(){return["optionChange","beforeExpand","beforeCollapse","expand","collapse"]},_HandleEvent:function(e){var t=e.type;"beforeExpand"===t?this.expand(e.id,!0):"beforeCollapse"===t?this.collapse(e.id,!0):"expand"===t||"collapse"===t?this._trigger(t,null,{nodeId:e.id}):this._super(e)},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtDiagramBundle.PROMOTED_LINK"]=e.promotedLink,t["DvtDiagramBundle.PROMOTED_LINKS"]=e.promotedLinks,t["DvtDiagramBundle.PROMOTED_LINK_ARIA_DESC"]=e.promotedLinkAriaDesc,t["DvtUtilBundle.DIAGRAM"]=e.componentName,t},_LoadResources:function(){null==this.options._resources&&(this.options._resources={});var e=this.options._resources;"rtl"===n.DomUtils.getReadingDirection()?(e.collapse_ena={src:p.getResourceUrl("resources/internal-deps/dvt/diagram/container-collapse-button-ena_rtl.svg"),width:20,height:20},e.collapse_ovr={src:p.getResourceUrl("resources/internal-deps/dvt/diagram/container-collapse-button-ovr_rtl.svg"),width:20,height:20},e.collapse_dwn={src:p.getResourceUrl("resources/internal-deps/dvt/diagram/container-collapse-button-dwn_rtl.svg"),width:20,height:20},e.expand_ena={src:p.getResourceUrl("resources/internal-deps/dvt/diagram/container-expand-button-ena_rtl.svg"),width:20,height:20},e.expand_ovr={src:p.getResourceUrl("resources/internal-deps/dvt/diagram/container-expand-button-ovr_rtl.svg"),width:20,height:20},e.expand_dwn={src:p.getResourceUrl("resources/internal-deps/dvt/diagram/container-expand-button-dwn_rtl.svg"),width:20,height:20}):(e.collapse_ena={src:p.getResourceUrl("resources/internal-deps/dvt/diagram/container-collapse-button-ena.svg"),width:20,height:20},e.collapse_ovr={src:p.getResourceUrl("resources/internal-deps/dvt/diagram/container-collapse-button-ovr.svg"),width:20,height:20},e.collapse_dwn={src:p.getResourceUrl("resources/internal-deps/dvt/diagram/container-collapse-button-dwn.svg"),width:20,height:20},e.expand_ena={src:p.getResourceUrl("resources/internal-deps/dvt/diagram/container-expand-button-ena.svg"),width:20,height:20},e.expand_ovr={src:p.getResourceUrl("resources/internal-deps/dvt/diagram/container-expand-button-ovr.svg"),width:20,height:20},e.expand_dwn={src:p.getResourceUrl("resources/internal-deps/dvt/diagram/container-expand-button-dwn.svg"),width:20,height:20}),e.panCursorDown=p.getResourceUrl("resources/internal-deps/dvt/chart/hand-closed.cur"),e.panCursorUp=p.getResourceUrl("resources/internal-deps/dvt/chart/hand-open.cur")},_GetComponentNoClonePaths:function(){var e=this._super();return e.data=!0,e.nodes=!0,e.links=!0,e},_GetComponentDeferredDataPaths:function(){return{root:["nodeData","linkData"]}},_GetSimpleDataProviderConfigs:function(){return{nodeData:{templateName:"nodeTemplate",templateElementName:"oj-diagram-node",resultPath:"nodes",expandedKeySet:this.options.expanded},linkData:{templateName:"linkTemplate",templateElementName:"oj-diagram-link",resultPath:"links"}}},_OptionChangeHandler:function(e){var t=Object.prototype.hasOwnProperty.bind(e);(t("expanded")||t("data"))&&this._component.clearDisclosedState(),t("expanded")&&this._ClearDataProviderState("nodeData"),this._super(e)},collapse:function(e,t){var i=this._trigger("beforeCollapse",null,{nodeId:e});t&&!1===i||(this._NotReady(),this._component.collapse(e))},expand:function(e,t){var i=this._trigger("beforeExpand",null,{nodeId:e});t&&!1===i||(this._NotReady(),this._component.expand(e))},getNodeCount:function(){return this._component.getAutomation().getNodeCount()},getNode:function(e){return this._component.getAutomation().getNode(e)},getLinkCount:function(){return this._component.getAutomation().getLinkCount()},getLink:function(e){return this._component.getAutomation().getLink(e)},getPromotedLink:function(e,t){return this._component.getAutomation().getPromotedLink(e,t)},getContextByNode:function(e){var t=this.getSubIdByNode(e);return t&&"oj-diagram-tooltip"!==t.subId?t:null}}),w.setDefaultOptions({ojDiagram:{styleDefaults:w.createDynamicPropertyGetter(function(e){return e.isCustomElement?{linkDefaults:{svgStyle:{}},nodeDefaults:{icon:{svgStyle:{}}},promotedLink:{svgStyle:{}}}:{}})}}),$i.extension._WIDGET_NAME="ojDiagram",n.CustomElementBridge.register("oj-diagram",{metadata:$i,parseFunction:Zt.shapeParseFunction({"style-defaults.node-defaults.icon.shape":!0})}),function(){zi.extension._CONSTRUCTOR=function(){};var e=Zt.shapeParseFunction({"icon.shape":!0}),t=Zt.shapeParseFunction({"overview.icon.shape":!0},{circle:!0,diamond:!0,ellipse:!0,human:!0,plus:!0,rectangle:!0,square:!0,star:!0,triangleDown:!0,triangleUp:!0,inherit:!0});n.CustomElementBridge.register("oj-diagram-node",{metadata:zi,parseFunction:function(i,n,o,s){return"icon.shape"===n?e(i,n,o,s):"overview.icon.shape"===n?t(i,n,o,s):s(i)}})}(),Ki.extension._CONSTRUCTOR=function(){},n.CustomElementBridge.register("oj-diagram-link",{metadata:Ki});var Yi,Wi,qi,Xi={properties:{cancelBehavior:{type:"string",enumValues:["escape","icon","none"],value:"icon"},dialogTitle:{type:"string"},dragAffordance:{type:"string",enumValues:["none","title-bar"],value:"title-bar"},initialVisibility:{type:"string",enumValues:["hide","show"],value:"hide"},modality:{type:"string",enumValues:["modal","modeless"],value:"modal"},position:{type:"object",properties:{at:{type:"object",properties:{horizontal:{type:"string",enumValues:["center","end","left","right","start"],value:"center"},vertical:{type:"string",enumValues:["bottom","center","top"],value:"center"}}},collision:{type:"string",enumValues:["fit","flip","flipfit","none"],value:"fit"},my:{type:"object",properties:{horizontal:{type:"string",enumValues:["center","end","left","right","start"],value:"center"},vertical:{type:"string",enumValues:["bottom","center","top"],value:"center"}}},of:{type:"string|object",value:"window"},offset:{type:"object",properties:{x:{type:"number",value:0},y:{type:"number",value:0}}}}},resizeBehavior:{type:"string",enumValues:["none","resizable"],value:"resizable"},role:{type:"string",value:"dialog"},translations:{type:"object",value:{},properties:{labelCloseIcon:{type:"string"}}}},methods:{close:{},isOpen:{},open:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojBeforeClose:{},ojBeforeOpen:{},ojClose:{},ojFocus:{},ojOpen:{},ojResize:{},ojResizeStart:{},ojResizeStop:{},ojAnimateStart:{},ojAnimateEnd:{}},extension:{}};function Zi(){}Yi="oj-dialog-body",Wi="oj-dialog-footer",qi="oj-dialog-header",n.__registerWidget("oj.ojDialog",$.oj.baseComponent,{version:"1.0.0",widgetEventPrefix:"oj",options:{cancelBehavior:"icon",dragAffordance:"title-bar",initialVisibility:"hide",modality:"modal",position:{my:{horizontal:"center",vertical:"center"},offset:{x:0,y:0},at:{horizontal:"center",vertical:"center"},of:"window",collision:"fit",using:function(e){var t=$(this).css(e).offset().top;t<0&&$(this).css("top",e.top-t)}},resizeBehavior:"resizable",role:"dialog",dialogTitle:null,title:null,beforeClose:null,beforeOpen:null,close:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null,animateStart:null,animateEnd:null},_ComponentCreate:function(){this._super();var e=this;if(this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this._IsCustomElement()||(this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this.element.removeAttr("title")),this.element.hide(),this.element.uniqueId(),this.element.addClass("oj-dialog oj-component"),this.element.attr({tabIndex:-1}),this._IsCustomElement()&&this.element[0].hasAttribute("role")||this.element.attr("role",this.options.role),this._on(this.element,{keydown:this._keydownHandler.bind(this)}),this.userDefinedDialogHeader=!1,!this._IsCustomElement())for(var t=this.element.children(),i=0;i<t.length;i++){var o=$(t[i]);o.is(".oj-dialog-header")?(this.userDefinedDialogHeader=!0,this._userDefinedHeader=o,this._userDefinedHeaderDiv=t[i]):o.is(".oj-dialog-body")?(this._createContentDiv(),this._uiDialogContent=$(this._contentDiv),this.element[0].insertBefore(this._contentDiv,t[i]),w.subtreeAttached(this._contentDiv),this._contentDiv.appendChild(t[i]),w.subtreeAttached(t[i]),this._uiDialogBody=o,this._uiDialogBodyDiv=t[i]):o.is(".oj-dialog-footer")&&(this._uiDialogFooter=o,this._uiDialogFooterDiv=t[i])}this._IsCustomElement()&&this._processSlottedChildren(),this.userDefinedDialogHeader?(this._userDefinedTitleDiv=this._userDefinedHeaderDiv.querySelector(".oj-dialog-title"),this._userDefinedTitle=$(this._userDefinedTitleDiv),null!==this._userDefinedTitleDiv&&void 0!==this._userDefinedTitleDiv&&(this._userDefinedTitle.uniqueId(),this.element.attr({"aria-labelledby":this._userDefinedTitle.attr("id")}))):this._createTitlebar(),this._uiDialogContent||(this._createContentDiv(),this._uiDialogContent=$(this._contentDiv),this._userDefinedHeader?this.element[0].insertBefore(this._contentDiv,this._userDefinedHeaderDiv):this.element[0].insertBefore(this._contentDiv,this._uiDialogTitlebarDiv),w.subtreeAttached(this._contentDiv)),this._setupFocus(this.element);var s=this.options;s.position=n.PositionUtils.coerceToJet(s.position),this._IsCustomElement()&&(this._titleMutationObserver=new MutationObserver(function(t){t.forEach(function(t){"attributes"===t.type&&"title"===t.attributeName&&(e._uiDialogTitleDiv.textContent=t.target.getAttribute(t.attributeName))})}),this._titleMutationObserver.observe(this.element[0],{attributes:!0,attributeFilter:["title"]}))},_createHeaderSlot:function(){this._headerSlot=document.createElement("div"),this._headerSlot.classList.add(qi),this.element[0].appendChild(this._headerSlot),w.subtreeAttached(this._headerSlot),this.userDefinedDialogHeader=!0,this._userDefinedHeaderDiv=this._headerSlot,this._userDefinedHeader=$(this._headerSlot)},_createFooterSlot:function(){this._footerSlot=document.createElement("div"),this.element[0].appendChild(this._footerSlot),w.subtreeAttached(this._footerSlot),this._uiDialogFooterDiv=this._footerSlot,this._uiDialogFooter=$(this._footerSlot)},_createContentDiv:function(){this._contentDiv=document.createElement("div"),this._contentDiv.classList.add("oj-dialog-content","oj-dialog-default-content")},_createBodySlot:function(){this._createContentDiv(),this.element[0].appendChild(this._contentDiv),w.subtreeAttached(this._contentDiv),this._bodySlot=document.createElement("div"),this._contentDiv.appendChild(this._bodySlot),this._uiDialogContent=$(this._contentDiv),this._uiDialogBodyDiv=this._bodySlot,this._uiDialogBody=$(this._bodySlot)},_GetContextMenu:function(){return this._IsCustomElement()?this._contextmenuSlot&&this._contextmenuSlot.length>0?this._contextmenuSlot[0]:this._super():null},_processSlottedChildren:function(){null!=this._footerSlot&&this.element[0].removeChild(this._footerSlot),null!=this._headerSlot&&this.element[0].removeChild(this._headerSlot),null!=this._bodySlot&&this.element[0].removeChild(this._bodySlot),null!=this._contextmenuSlot&&this.element[0].removeChild(this._contextmenuSlot);var e,t,i=n.BaseCustomElementBridge.getSlotMap(this.element[0]),o=Object.keys(i);for(t=0;t<o.length;t++)"header"!==(e=o[t])&&"footer"!==e&&"body"!==e&&""!==e&&"contextMenu"!==e&&i[e].parentNode.removeChild(i[e]);var s=Object.prototype.hasOwnProperty;s.call(i,"header")&&this._createHeaderSlot(),(s.call(i,"body")||s.call(i,""))&&this._createBodySlot(),s.call(i,"footer")&&this._createFooterSlot(),s.call(i,"contextMenu")&&(this._contextmenuSlot=i.contextMenu);var r=this._bodySlot;for(t=0;t<o.length;t++){switch(e=o[t]){case"header":r=this._headerSlot;break;case"footer":r=this._footerSlot;break;case"body":case"":r=this._bodySlot}var a=i[e];if(null!=a)for(var l=0;l<a.length;l++)switch(r.appendChild(a[l]),e){case"header":break;case"footer":r=this._footerSlot,i[e][l].classList.add(Wi);break;case"body":case"":r=this._bodySlot,i[e][l].classList.add(Yi)}}},_AfterCreateEvent:function(){"show"===this.options.initialVisibility&&this.open()},_destroy:function(){this._off(this.element,"keydown"),n.ZOrderUtils.getStatus(this.element)===n.ZOrderUtils.STATUS.OPEN&&this._closeImplicitly(),this._setWhenReady("none"),this._destroyResizable(),this.element.hasClass("oj-draggable")&&(this.element.draggable("destroy"),this.element.removeClass("oj-draggable")),this._destroyCloseButton(),this.userDefinedDialogHeader&&this._userDefinedTitle.removeUniqueId(),this._uiDialogBody&&this._uiDialogBody.insertAfter(this._uiDialogContent),this._uiDialogContent.remove(),this._uiDialogBody=null,this._uiDialogContent=null,this.element.removeUniqueId().removeClass("oj-dialog oj-component").css(this.originalCss),this.element.stop(!0,!0),this._IsCustomElement()||this.originalTitle&&this.element.attr("title",this.originalTitle),this._uiDialogTitlebar&&(this._uiDialogTitlebar.remove(),this._uiDialogTitlebar=null),delete this._popupServiceEvents,this._super()},disable:$.noop,enable:$.noop,close:function(e){if(!this._isOperationPending("close",[e])){var t=n.ZOrderUtils.getStatus(this.element);if(t===n.ZOrderUtils.STATUS.OPEN)if(n.ZOrderUtils.setStatus(this.element,n.ZOrderUtils.STATUS.BEFORE_CLOSE),!1!==this._trigger("beforeClose",e)||this._ignoreBeforeCloseResultant){if(this._setWhenReady("close"),this._focusedElement=null,this.opener.filter(":focusable").focus().length||$(this.document[0].activeElement).blur(),"modal"===this.options.modality){var i=Array.prototype.forEach,o=this.element[0].getElementsByClassName("oj-helper-element-in-dialog-with-accesskey");i.call(o,function(e){e.classList.remove("oj-helper-element-in-dialog-with-accesskey")});var s=document.getElementsByClassName("oj-helper-element-with-accesskey");i.call(s,function(e){e.setAttribute("accesskey",e.getAttribute("data-ojAccessKey")),e.removeAttribute("data-ojAccessKey"),e.classList.remove("oj-helper-element-with-accesskey")})}var r={};r[n.PopupService.OPTION.POPUP]=this.element,r[n.PopupService.OPTION.CONTEXT]={closeEvent:e},n.PopupService.getInstance().close(r)}else n.ZOrderUtils.setStatus(this.element,t)}},_beforeCloseHandler:function(e){var t=e[n.PopupService.OPTION.POPUP];this._destroyResizable();var i=(_.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).animation;if(!this._ignoreBeforeCloseResultant&&i&&i.close){var o=t.attr("style");return vi.startAnimation(t[0],"close",i.close,this).then(function(){t.attr("style",o),t.hide()})}t.hide()},_afterCloseHandler:function(e){var t,i=e[n.PopupService.OPTION.CONTEXT];i&&(t=i.closeEvent),this._trigger("close",t)},isOpen:function(){var e=n.ZOrderUtils.getStatus(this.element);return e===n.ZOrderUtils.STATUS.OPENING||e===n.ZOrderUtils.STATUS.OPEN||e===n.ZOrderUtils.STATUS.BEFORE_CLOSE||e===n.ZOrderUtils.STATUS.CLOSING},open:function(e){if(!this._isOperationPending("open",[e])){var t=n.ZOrderUtils.getStatus(this.element);if(t===n.ZOrderUtils.STATUS.OPEN||t===n.ZOrderUtils.STATUS.UNKNOWN||t===n.ZOrderUtils.STATUS.CLOSE)if(n.ZOrderUtils.setStatus(this.element,n.ZOrderUtils.STATUS.BEFORE_OPEN),!1!==this._trigger("beforeOpen",e)){if(t===n.ZOrderUtils.STATUS.OPEN)return n.ZOrderUtils.setStatus(this.element,t),void this._focusTabbable();this._setWhenReady("open"),this.userDefinedDialogHeader?void 0!==this.closeButton&&null!==this.closeButton||"icon"!==this.options.cancelBehavior||this._createCloseButton(this._userDefinedHeaderDiv):this._createTitlebarCloseButton(),this.opener=$(this.document[0].activeElement),"title-bar"===this.options.dragAffordance&&$.fn.draggable&&this._makeDraggable();var i="rtl"===this._GetReadingDirection(),o=n.PositionUtils.coerceToJqUi(this.options.position);if(o=n.PositionUtils.normalizeHorizontalAlignment(o,i),"modal"===this.options.modality){var s=Array.prototype.forEach,r=this.element[0].querySelectorAll("[accesskey]");s.call(r,function(e){e.classList.add("oj-helper-element-in-dialog-with-accesskey")});var a=document.querySelectorAll("[accesskey]");s.call(a,function(e){e.classList.contains("oj-helper-element-in-dialog-with-accesskey")||(e.classList.add("oj-helper-element-with-accesskey"),e.setAttribute("data-ojAccessKey",e.getAttribute("accesskey")),e.removeAttribute("accesskey"))})}var l={};l[n.PopupService.OPTION.POPUP]=this.element,l[n.PopupService.OPTION.LAUNCHER]=this.opener,l[n.PopupService.OPTION.POSITION]=o,l[n.PopupService.OPTION.MODALITY]=this.options.modality,l[n.PopupService.OPTION.EVENTS]=this._getPopupServiceEvents(),l[n.PopupService.OPTION.LAYER_SELECTORS]="oj-dialog-layer",l[n.PopupService.OPTION.LAYER_LEVEL]=n.PopupService.LAYER_LEVEL.TOP_LEVEL,l[n.PopupService.OPTION.CUSTOM_ELEMENT]=this._IsCustomElement(),n.PopupService.getInstance().open(l)}else n.ZOrderUtils.setStatus(this.element,t)}},_beforeOpenHandler:function(e){var t=e[n.PopupService.OPTION.POPUP],i=e[n.PopupService.OPTION.POSITION];t.show(),t.position(i),t.parent().addClass("oj-animate-open");var o=(_.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).animation;if(o&&o.open)return vi.startAnimation(t[0],"open",o.open,this)},_afterOpenHandler:function(e){e[n.PopupService.OPTION.POPUP].parent().removeClass("oj-animate-open"),this._makeResizable(),this._trigger("open"),this._focusTabbable()},refresh:function(){this._super()},_focusTabbable:function(){this.GetFocusElement().focus(),this._trigger("focus")},GetFocusElement:function(){var e=null;return!0===this._titleBarMousedown?this.element[0]:(e||(e=this.element.find("[autofocus]")),(null!=e&&e.length||null==(e=n.FocusUtils.getFirstTabStop(this._contentDiv)))&&(null!=e&&e.length||!this._uiDialogFooter||!this._uiDialogFooter.length||null==(e=n.FocusUtils.getFirstTabStop(this._uiDialogFooterDiv)))?(null!=e&&e.length||this.closeButton&&(e=this.closeButton),null!=e&&e.length||(e=this.element),e[0]):e)},_keydownHandler:function(e){if("none"!==this.options.cancelBehavior&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===$.ui.keyCode.ESCAPE)return e.preventDefault(),e.stopImmediatePropagation(),void this.close(e);var t;e.keyCode===$.ui.keyCode.TAB&&(e.shiftKey?(n.FocusUtils.isFirstActiveElement(this.element)||document.activeElement===this.element[0])&&null!=(t=n.FocusUtils.getLastTabStop(this.element))&&(t.focus(),e.preventDefault()):(n.FocusUtils.isLastActiveElement(this.element)||document.activeElement===this.element[0])&&null!=(t=n.FocusUtils.getFirstTabStop(this.element))&&(t.focus(),e.preventDefault()))},_setupFocus:function(e){var t=this;this._focusable({applyHighlight:!0,setupHandlers:function(i,n){t._on(e,{focus:function(e){i($(e.currentTarget))},blur:function(e){n($(e.currentTarget))}})}})},_destroyCloseButton:function(){null!==this.closeButtonDiv&&void 0!==this.closeButtonDiv&&(this.closeButtonDiv.parentElement&&(w.subtreeDetached(this.closeButtonDiv),this.closeButtonDiv.parentElement.removeChild(this.closeButtonDiv)),this.closeButton=null),this._headerSlot&&this._headerSlot.classList.remove("oj-dialog-header-close"),this._uiDialogTitlebarDiv&&this._uiDialogTitlebarDiv.classList.remove("oj-dialog-header-close")},_createCloseButton:function(e){if(this._IsCustomElement()){this.closeButtonDiv=document.createElement("oj-button"),this.closeButtonDiv.classList.add("oj-dialog-header-close-wrapper"),this.closeButtonDiv.setAttribute("data-oj-binding-provider","none"),this.closeButtonDiv.setAttribute("display","icons"),this.closeButtonDiv.setAttribute("chroming","half");var t=document.createElement("span");t.textContent=this.getTranslatedString("labelCloseIcon");var i=document.createElement("span");i.className="oj-fwk-icon oj-fwk-icon-cross",i.setAttribute("slot","startIcon"),this.closeButtonDiv.appendChild(i),this.closeButtonDiv.appendChild(t),e.appendChild(this.closeButtonDiv),w.subtreeAttached(this.closeButtonDiv),this.closeButton=$(this.closeButtonDiv)}this._IsCustomElement()||(this.closeButton=$("<button><\button>").addClass("oj-dialog-header-close-wrapper"),this.closeButton.ojButton({display:"icons",chroming:"half",label:this.getTranslatedString("labelCloseIcon"),icons:{start:"oj-component-icon oj-fwk-icon-cross"}}).attr("tabindex","1").appendTo(e),this.closeButtonDiv=this.closeButton[0]),this._on(this.closeButton,{click:function(e){e.preventDefault(),e.stopImmediatePropagation(),this.close(e)}}),this._headerSlot&&this._headerSlot.classList.add("oj-dialog-header-close"),this._uiDialogTitlebarDiv&&this._uiDialogTitlebarDiv.classList.add("oj-dialog-header-close")},_createTitlebarCloseButton:function(){void 0!==this.closeButton&&null!==this.closeButton||"icon"!==this.options.cancelBehavior||this._createCloseButton(this._uiDialogTitlebarDiv),this._on(this._uiDialogTitlebar,{mousedown:function(e){var t=n.DomUtils.isAncestorOrSelf(this.closeButtonDiv,e.target);this._titleBarMousedown=!0,t||this.element.focus()},mouseup:function(){this._titleBarMousedown=null}})},_createTitlebar:function(){this._uiDialogTitlebarDiv=document.createElement("div"),this._uiDialogTitlebarDiv.classList.add(qi),this.element[0].insertBefore(this._uiDialogTitlebarDiv,this.element[0].firstChild),w.subtreeAttached(this._uiDialogTitlebarDiv),this._uiDialogTitlebar=$(this._uiDialogTitlebarDiv),this._uiDialogTitleDiv=document.createElement("h1"),this._uiDialogTitleDiv.classList.add("oj-dialog-title"),$(this._uiDialogTitleDiv).uniqueId(),this._uiDialogTitlebarDiv.appendChild(this._uiDialogTitleDiv),w.subtreeAttached(this._uiDialogTitleDiv),this._title(this._uiDialogTitleDiv),this.element.attr({"aria-labelledby":this._uiDialogTitleDiv.id})},_title:function(e){var t=e;this._IsCustomElement()?this._IsCustomElement()&&(this.options.dialogTitle?t.textContent=this.options.dialogTitle:this.element.attr("title")?t.textContent=this.element.attr("title"):t.innerHTML="&#160;"):(this.options.title||(t.innerHTML="&#160;"),t.textContent=this.options.title)},_makeDraggable:function(){var e=this,t=this.options;function i(e){return{position:e.position,offset:e.offset}}this.element.draggable({addClasses:!1,handle:".oj-dialog-header",containment:"document",start:function(t,n){$(this).addClass("oj-dialog-dragging"),e._positionDescendents(),e._trigger("dragStart",t,i(n))},drag:function(t,n){e._positionDescendents(),e._trigger("drag",t,i(n))},stop:function(n,o){var s=o.offset.left-e.document.scrollLeft(),r=o.offset.top-e.document.scrollTop();t.position={my:{horizontal:"left",vertical:"top"},at:{horizontal:"left",vertical:"top"},offset:{x:s>=0?s:0,y:r>=0?r:0},of:window},$(this).removeClass("oj-dialog-dragging"),e._positionDescendents(),e._trigger("dragStop",n,i(o))}}),this.element.addClass("oj-draggable")},_destroyResizable:function(){this._resizableComponent&&this._resizableComponent("instance")&&(this._resizableComponent("destroy"),delete this._resizableComponent)},_makeResizable:function(){if(this._destroyResizable(),"resizable"===this.options.resizeBehavior){var e=this;this._resizableComponent=this.element.ojResizable.bind(this.element),this._resizableComponent({cancel:".oj-dialog-content",containment:"document",handles:"n,e,s,w,se,sw,ne,nw",start:function(i,n){e._isResizing=!0,$(this).addClass("oj-dialog-resizing"),e._trigger("resizeStart",i,t(n))},resize:function(i,n){e._trigger("resize",i,t(n))},stop:function(i,n){e._isResizing=!1,$(this).removeClass("oj-dialog-resizing"),e._trigger("resizeStop",i,t(n))}})}function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}},_position:function(){var e="rtl"===this._GetReadingDirection(),t=n.PositionUtils.coerceToJqUi(this.options.position);t=n.PositionUtils.normalizeHorizontalAlignment(t,e),this.element.position(t),this._positionDescendents()},_positionDescendents:function(){n.PopupService.getInstance().triggerOnDescendents(this.element,n.PopupService.EVENT.POPUP_REFRESH)},_setOption:function(e,t,i){var o;if("disabled"!==e)switch(this._super(e,t,i),e){case"dragAffordance":(o=this.element.hasClass("oj-draggable"))&&"none"===t&&(this.element.draggable("destroy"),this.element.removeClass("oj-draggable")),o||"title-bar"!==t||this._makeDraggable();break;case"position":var s=this.options;return s.position=n.PositionUtils.coerceToJet(t,s.position),void this._position();case"resizeBehavior":n.ZOrderUtils.getStatus(this.element)===n.ZOrderUtils.STATUS.OPEN&&this._makeResizable();break;case"title":case"dialogTitle":this.userDefinedDialogHeader?this._title(this._userDefinedHeaderDiv.querySelector(".oj-dialog-title")):this._title(this._uiDialogTitlebarDiv.querySelector(".oj-dialog-title"));break;case"role":this.element.attr("role",t);break;case"modality":if(n.ZOrderUtils.getStatus(this.element)===n.ZOrderUtils.STATUS.OPEN){var r={};r[n.PopupService.OPTION.POPUP]=this.element,r[n.PopupService.OPTION.MODALITY]=t,n.PopupService.getInstance().changeOptions(r)}break;case"cancelBehavior":"none"===t||"escape"===t?this._destroyCloseButton():"icon"===t&&(this.userDefinedDialogHeader?(this._destroyCloseButton(),this._createCloseButton(this._userDefinedHeaderDiv),this._userDefinedTitleDiv=this._userDefinedHeaderDiv.querySelector(".oj-dialog-title"),this._userDefinedTitle=$(this._userDefinedTitleDiv)):(this._destroyCloseButton(),this._createCloseButton(this._uiDialogTitlebarDiv),this.standardTitleDiv=this._uiDialogTitlebarDiv.querySelector(".oj-dialog-title"),this.standardTitle=$(this.standardTitleDiv)))}},getNodeBySubId:function(e){if(null===e)return this.element?this.element[0]:null;function t(e){for(var t=[],i=/\w|_|-/,n=0;n<e.length;n++){var o=e.substring(n,n+1);i.test(o)?t.push(o):t.push("\\"+o)}return t.join("")}var i=e.subId;if(!this._IsCustomElement()||i!==Wi&&i!==Yi){var n,o;switch(i){case qi:case Wi:case"oj-dialog-content":case"oj-resizable-n":case"oj-resizable-e":case"oj-resizable-s":case"oj-resizable-w":case"oj-resizable-se":case"oj-resizable-sw":case"oj-resizable-ne":case"oj-resizable-nw":return n=this.element[0].nodeName+'[id="'+t(this.element.attr("id"))+'"] > ',n+="."+i,(o=this.element.parent().find(n))&&0!==o.length?o[0]:null;case"oj-dialog-close-icon":case"oj-dialog-close":return null;case Yi:return n=this.element[0].nodeName+'[id="'+t(this.element.attr("id"))+'"] > ',n+=".oj-dialog-content > ",n+="."+i,(o=this.element.parent().find(n))&&0!==o.length?o[0]:null;case"oj-dialog-header-close-wrapper":return n=this.element[0].nodeName+'[id="'+t(this.element.attr("id"))+'"] > ',n+=".oj-dialog-header > ",n+="."+i,(o=this.element.parent().find(n))&&0!==o.length?o[0]:null}}else{if(i===Yi)return this._uiDialogBodyDiv.querySelector(".oj-dialog-body");if(i===Wi)return this._uiDialogFooterDiv.querySelector(".oj-dialog-footer")}return null},getSubIdByNode:function(e){if(null!=e){var t=$(e);if(t.hasClass(qi))return{subId:qi};if(t.hasClass(Wi))return{subId:Wi};if(t.hasClass("oj-dialog-content"))return{subId:"oj-dialog-content"};if(t.hasClass("oj-dialog-header-close-wrapper"))return{subId:"oj-dialog-header-close-wrapper"};if(t.hasClass("oj-resizable-n"))return{subId:"oj-resizable-n"};if(t.hasClass("oj-resizable-e"))return{subId:"oj-resizable-e"};if(t.hasClass("oj-resizable-s"))return{subId:"oj-resizable-s"};if(t.hasClass("oj-resizable-w"))return{subId:"oj-resizable-w"};if(t.hasClass("oj-resizable-se"))return{subId:"oj-resizable-se"};if(t.hasClass("oj-resizable-sw"))return{subId:"oj-resizable-sw"};if(t.hasClass("oj-resizable-ne"))return{subId:"oj-resizable-ne"};if(t.hasClass("oj-resizable-nw"))return{subId:"oj-resizable-nw"}}return null},_surrogateRemoveHandler:function(){var e=this.element;n.ZOrderUtils.getStatus(e)===n.ZOrderUtils.STATUS.OPEN&&e.remove()},_getPopupServiceEvents:function(){if(!this._popupServiceEvents){var e={};e[n.PopupService.EVENT.POPUP_CLOSE]=this._closeImplicitly.bind(this),e[n.PopupService.EVENT.POPUP_REMOVE]=this._surrogateRemoveHandler.bind(this),e[n.PopupService.EVENT.POPUP_REFRESH]=this._positionDescendents.bind(this),e[n.PopupService.EVENT.POPUP_BEFORE_OPEN]=this._beforeOpenHandler.bind(this),e[n.PopupService.EVENT.POPUP_AFTER_OPEN]=this._afterOpenHandler.bind(this),e[n.PopupService.EVENT.POPUP_BEFORE_CLOSE]=this._beforeCloseHandler.bind(this),e[n.PopupService.EVENT.POPUP_AFTER_CLOSE]=this._afterCloseHandler.bind(this),this._popupServiceEvents=e}return this._popupServiceEvents},_closeImplicitly:function(){this._ignoreBeforeCloseResultant=!0,this.close(),delete this._ignoreBeforeCloseResultant},_setWhenReady:function(e){var t=this._whenReadyMediator;t&&(t.destroy(),delete this._whenReadyMediator),["open","close"].indexOf(e)<0||(this._whenReadyMediator=new n.PopupWhenReadyMediator(this.element,e,"ojDialog",this._IsCustomElement()))},_isOperationPending:function(e,t){var i=this._whenReadyMediator;return!!i&&i.isOperationPending(this,e,e,t)},_NotifyDetached:function(){n.ZOrderUtils.getStatus(this.element)===n.ZOrderUtils.STATUS.OPEN&&this._closeImplicitly(),this._super()}}),w.setDefaultOptions({ojDialog:{resizeBehavior:w.createDynamicPropertyGetter(function(){return(_.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).resizeBehavior}),cancelBehavior:w.createDynamicPropertyGetter(function(){return(_.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).cancelBehavior}),dragAffordance:w.createDynamicPropertyGetter(function(){return(_.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).dragAffordance})}}),$.widget("oj.ojResizable",{version:"1.0.0",widgetEventPrefix:"oj",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(e,t){var i=e;if("hidden"===$(i).css("overflow"))return!1;var n,o=t&&"left"===t?"scrollLeft":"scrollTop";return i[o]>0||(i[o]=1,n=i[o]>0,i[o]=0,n)},_create:function(){var e,t,i,n;this._super();var o=this,s=this.options,r=this.element.mouse.bind(this.element);if(r(),this.mouse=r("instance"),this.mouse._mouseCapture=function(e){return o._mouseCapture(e)},this.mouse._mouseStart=function(e){return o._mouseStart(e)},this.mouse._mouseDrag=function(e){return o._mouseDrag(e)},this.mouse._mouseStop=function(e){return this.element&&this.element.focus(),o._mouseStop(e)},this.element.addClass("oj-resizable"),$.extend(this,{originalElement:this.element,_proportionallyResizeElements:[],_helper:null}),this._initialResize=!0,this.handles=s.handles||($(".oj-resizable-handle",this.element).length?{n:".oj-resizable-n",e:".oj-resizable-e",s:".oj-resizable-s",w:".oj-resizable-w",se:".oj-resizable-se",sw:".oj-resizable-sw",ne:".oj-resizable-ne",nw:".oj-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},t=0;t<e.length;t++)i=$.trim(e[t]),n=$("<div class='oj-resizable-handle oj-resizable-"+i+"'></div>"),this.handles[i]=".oj-resizable-"+i,this.element.append(n);var a=Object.keys(this.handles);for(t=0;t<a.length;t++){var l=a[t];this.handles[l].constructor===String&&(this.handles[l]=this.element.children(this.handles[l]).first().show())}this._handles=$(".oj-resizable-handle",this.element),this._handles.mouseover(function(){o.resizing||(this.className&&(n=this.className.match(/oj-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se")}),this.mouse._mouseInit()},_destroy:function(){this.mouse&&this.mouse._mouseDestroy();try{this.mouse.destroy(),this.mouse=null}catch(e){}var e;return e=this.originalElement,$(e).removeClass("oj-resizable oj-resizable-disabled oj-resizable-resizing").removeData("resizable").removeData("oj-resizable").unbind(".resizable").find(".oj-resizable-handle").remove(),this},_mouseCapture:function(e){for(var t=!1,i=Object.keys(this.handles),n=0;n<i.length;n++){var o=$(this.handles[i[n]])[0];(o===e.target||$.contains(o,e.target))&&(t=!0)}return!this.options.disabled&&t},_mouseStart:function(e){var t,i,n,o=this.options,s=this.element.position(),r=this.element;return this.resizing=!0,/absolute/.test(r.css("position"))?r.css({position:"absolute",top:r.css("top"),left:r.css("left")}):r.is(".oj-draggable")&&r.css({position:"absolute",top:s.top,left:s.left}),this._renderProxy(),t=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),o.containment&&(t+=$(o.containment).scrollLeft()||0,i+=$(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:t,top:i},this.size={width:r.width(),height:r.height()},this.originalSize={width:r.width(),height:r.height()},this.originalPosition={left:t,top:i},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio=this.originalSize.width/this.originalSize.height||1,n=$(".oj-resizable-"+this.axis).css("cursor"),$("body").css("cursor","auto"===n?this.axis+"-resize":n),r.addClass("oj-resizable-resizing"),this._propagate("start",e),this._alsoresize_start(e),this._containment_start(e),!0},_mouseDrag:function(e){var t,i=this.helper,n={},o=this.originalMousePosition,s=this.axis,r=e.pageX-o.left||0,a=e.pageY-o.top||0,l=this._change[s];return this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height},!!l&&(t=l.apply(this,[e,r,a]),this._updateVirtualBoundaries(e.shiftKey),e.shiftKey&&(t=this._updateRatio(t,e)),t=this._respectSize(t,e),this._updateCache(t),this._propagate("resize",e),this._alsoresize_resize(e,this.ui()),this._containment_resize(e,this.ui()),this.position.top!==this.prevPosition.top&&(n.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(n.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(n.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(n.height=this.size.height+"px"),i.css(n),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),$.isEmptyObject(n)||this._trigger("resize",e,this.ui()),!1)},_mouseStop:function(e){return this.resizing=!1,$("body").css("cursor","auto"),this.element.removeClass("oj-resizable-resizing"),this._propagate("stop",e),this._alsoresize_stop(e),this._containment_stop(e),!1},_updateVirtualBoundaries:function(e){var t,i,n,o,s,r=this.options;s={minWidth:this._isNumber(r.minWidth)?r.minWidth:0,maxWidth:this._isNumber(r.maxWidth)?r.maxWidth:1/0,minHeight:this._isNumber(r.minHeight)?r.minHeight:0,maxHeight:this._isNumber(r.maxHeight)?r.maxHeight:1/0},e&&(t=s.minHeight*this.aspectRatio,n=s.minWidth/this.aspectRatio,i=s.maxHeight*this.aspectRatio,o=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),n>s.minHeight&&(s.minHeight=n),i<s.maxWidth&&(s.maxWidth=i),o<s.maxHeight&&(s.maxHeight=o)),this._vBoundaries=s},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=e,i=this.position,n=this.size,o=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===o&&(t.left=i.left+(n.width-t.width),t.top=null),"nw"===o&&(t.top=i.top+(n.height-t.height),t.left=i.left+(n.width-t.width)),t},_respectSize:function(e){var t=e,i=this._vBoundaries,n=this.axis,o=this._isNumber(t.width)&&i.maxWidth&&i.maxWidth<t.width,s=this._isNumber(t.height)&&i.maxHeight&&i.maxHeight<t.height,r=this._isNumber(t.width)&&i.minWidth&&i.minWidth>t.width,a=this._isNumber(t.height)&&i.minHeight&&i.minHeight>t.height,l=this.originalPosition.left+this.originalSize.width,u=this.position.top+this.size.height,d=/sw|nw|w/.test(n),h=/nw|ne|n/.test(n);return r&&(t.width=i.minWidth),a&&(t.height=i.minHeight),o&&(t.width=i.maxWidth),s&&(t.height=i.maxHeight),r&&d&&(t.left=l-i.minWidth),o&&d&&(t.left=l-i.maxWidth),a&&h&&(t.top=u-i.minHeight),s&&h&&(t.top=u-i.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,n,o,s=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(o=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[o.css("borderTopWidth"),o.css("borderRightWidth"),o.css("borderBottomWidth"),o.css("borderLeftWidth")],n=[o.css("paddingTop"),o.css("paddingRight"),o.css("paddingBottom"),o.css("paddingLeft")],t=0;t<i.length;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(n[t],10)||0);o.css({height:s.height()-this.borderDif[0]-this.borderDif[2]||0,width:s.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element;this.elementOffset=e.offset(),this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(e,t,i){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,t,i]))},sw:function(e,t,i){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,t,i]))},ne:function(e,t,i){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,t,i]))},nw:function(e,t,i){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,t,i]))}},_propagate:function(e,t){"resize"!==e&&this._trigger(e,t,this.ui())},_alsoresize_start:function(){var e=this.options,t=function(e){$(e).each(function(){var e=$(this);e.data("oj-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof e.alsoResize||e.alsoResize.parentNode?t(e.alsoResize):e.alsoResize.length?(e.alsoResize=e.alsoResize[0],t(e.alsoResize)):$.each(e.alsoResize,function(e){t(e)})},_alsoresize_resize:function(e,t){var i=this.options,n=this.originalSize,o=this.originalPosition,s={height:this.size.height-n.height||0,width:this.size.width-n.width||0,top:this.position.top-o.top||0,left:this.position.left-o.left||0},r=function(e,i){$(e).each(function(){var e,n=$(this),o=$(this).data("oj-resizable-alsoresize"),r={};e=i&&i.length?i:n.parents(t.originalElement[0]).length?["width","height"]:["width","height","top","left"],$.each(e,function(e,t){var i=(o[t]||0)+(s[t]||0);i&&i>=0&&(r[t]=i||null)}),n.css(r)})};"object"!=typeof i.alsoResize||i.alsoResize.nodeType?r(i.alsoResize,null):$.each(i.alsoResize,function(e,t){r(e,t)})},_alsoresize_stop:function(){$(this).removeData("oj-resizable-alsoresize")},_containment_start:function(){var e,t,i,n,o,s,r,a,l=this,u=l.options,d=l.element,h=u.containment;(a=h instanceof $?h.get(0):/parent/.test(h)?d.parent().get(0):h)&&(l.containerElement=$(a),/document/.test(h)||h===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight}):(e=$(a),t=[],$(["Top","Right","Left","Bottom"]).each(function(i,n){t[i]=l._num(e.css("padding"+n))}),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-t[3],width:e.innerWidth()-t[1]},i=l.containerOffset,n=l.containerSize.height,o=l.containerSize.width,s=l._hasScroll(a,"left")?a.scrollWidth:o,r=l._hasScroll(a)?a.scrollHeight:n,l.parentData={element:a,left:i.left,top:i.top,width:s,height:r}))},_containment_resize:function(e,t){var i,n,o,s,r=this.options,a=this.containerOffset,l=this.position,u=e.shiftKey,d={top:0,left:0},h=this.containerElement,c=!0;h[0]!==document&&/static/.test(h.css("position"))&&(d=a),l.left<(this._helper?a.left:0)&&(this.size.width+=this._helper?this.position.left-a.left:this.position.left-d.left,u&&(this.size.height=this.size.width/this.aspectRatio,c=!1),this.position.left=r.helper?a.left:0),l.top<(this._helper?a.top:0)&&(this.size.height+=this._helper?this.position.top-a.top:this.position.top,u&&(this.size.width=this.size.height*this.aspectRatio,c=!1),this.position.top=this._helper?a.top:0),this.offset.left=this.parentData.left+this.position.left,this.offset.top=this.parentData.top+this.position.top,i=Math.abs((this._helper?this.offset.left-d.left:this.offset.left-a.left)+this.sizeDiff.width),n=Math.abs((this._helper?this.offset.top-d.top:this.offset.top-a.top)+this.sizeDiff.height),o=this.containerElement.get(0)===this.element.parent().get(0),s=/relative|absolute/.test(this.containerElement.css("position")),o&&s&&(i-=Math.abs(this.parentData.left)),i+this.size.width>=this.parentData.width&&(this.size.width=this.parentData.width-i,u&&(this.size.height=this.size.width/this.aspectRatio,c=!1)),n+this.size.height>=this.parentData.height&&(this.size.height=this.parentData.height-n,u&&(this.size.width=this.size.height*this.aspectRatio,c=!1)),c||(this.position.left=t.prevPosition.left,this.position.top=t.prevPosition.top,this.size.width=t.prevSize.width,this.size.height=t.prevSize.height)},_containment_stop:function(){var e=this.options,t=this.containerOffset,i=this.containerPosition,n=this.containerElement,o=$(this.helper),s=o.offset(),r=o.outerWidth()-this.sizeDiff.width,a=o.outerHeight()-this.sizeDiff.height;this._helper&&!e.animate&&/relative/.test(n.css("position"))&&$(this).css({left:s.left-i.left-t.left,width:r,height:a}),this._helper&&!e.animate&&/static/.test(n.css("position"))&&$(this).css({left:s.left-i.left-t.left,width:r,height:a})},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition,prevSize:this.prevSize,prevPosition:this.prevPosition}}}),Xi.extension._WIDGET_NAME="ojDialog",n.CustomElementBridge.register("oj-dialog",{metadata:Xi}),n.DomScroller=function(e,t,i){i=i||{},this._data=t,this._asyncIterator=i.asyncIterator,this._element=$(e)[0],this._fetchSize=i.fetchSize,this._fetchSize=this._fetchSize>0?this._fetchSize:25,this._maxCount=i.maxCount,this._maxCount=this._maxCount>0?this._maxCount:500,this._rowCount=i.initialRowCount>0?i.initialRowCount:0,this._successCallback=i.success,this._requestCallback=i.request,this._errorCallback=i.error,this._registerDataSourceEventListeners(),this._fetchTrigger=i.fetchTrigger,(null==this._fetchTrigger||isNaN(this._fetchTrigger))&&(this._fetchTrigger=0),this._initialScrollTop=this._element.scrollTop,$(this._getScrollEventElement()).on("scroll.domscroller",function(){var e=this._element,t=this._getScrollTop(e),i=e.scrollHeight-e.clientHeight;i>0&&this._handleScrollerScrollTop(t,i)}.bind(this))},n.DomScroller.prototype.setFetchTrigger=function(e){null!=e&&!isNaN(e)&&e>=0&&(this._fetchTrigger=e)},n.DomScroller.prototype._getScrollEventElement=function(){return this._element===document.body||this._element===document.documentElement?window:this._element},n.DomScroller.calculateOffsetTop=function(e,t){for(var i=0,n=t;n&&n!==e&&$.contains(e,n);)i+=n.offsetTop,n=n.offsetParent;return i},n.DomScroller.prototype._getScrollTop=function(e){var t=this._fetchTrigger;return e===document.documentElement&&(void 0===this._useBodyScrollTop&&(this._useBodyScrollTop=this._initialScrollTop===e.scrollTop),this._useBodyScrollTop)?t+document.body.scrollTop:t+e.scrollTop},n.DomScroller.prototype.destroy=function(){this._unregisterDataSourceEventListeners(),$(this._getScrollEventElement()).off("scroll.domscroller")},n.DomScroller.prototype.checkViewport=function(){return this._asyncIterator&&this._element.clientHeight>0&&!this._checkOverflow()?this._fetchMoreRows():Promise.resolve(null)},n.DomScroller.prototype._handleScrollerScrollTop=function(e,t){if(t-e<=1&&e>this._fetchTrigger&&!this._fetchPromise)if(this._asyncIterator){var i=this;this._fetchMoreRows().then(function(e){i._successCallback&&i._successCallback(e)},function(e){i._errorCallback&&i._errorCallback(e)})}else null!=this._errorCallback&&this._errorCallback()},n.DomScroller.prototype._checkOverflow=function(){var e=this._element;return e.scrollHeight>e.clientHeight+this._fetchTrigger},n.DomScroller.prototype._fetchMoreRows=function(){if(!this._fetchPromise){var e=this._maxCount-this._rowCount;if(e>0){var t=this;if(this._asyncIterator)return null!=this._requestCallback&&this._requestCallback(),this._fetchPromise=this._asyncIterator.next().then(function(i){var n=i;return t._fetchPromise=null,null!=n&&null!=n.value&&(n.value.data.length>0&&(t._rowCount+=n.value.data.length,e<t._fetchSize&&(n.maxCount=t._maxCount,n.maxCountLimit=!0,n.value.data.length>e&&(n.value.data=n.value.data.slice(0,e),n.value.metadata=n.value.metadata.slice(0,e),null!=n.value.fetchParameters&&(n.value.fetchParameters.size=e)))),n.done&&(t._asyncIterator=null)),Promise.resolve(n)}),this._fetchPromise}return Promise.resolve({maxCount:this._maxCount,maxCountLimit:!0})}return this._fetchPromise},n.DomScroller.prototype._handleDataRowMutateEvent=function(e){var t=null,i=null;if(null!=e.detail.remove&&(t="remove",i=e.detail.remove),null!=e.detail.add&&(t="add",i=e.detail.add),null!=t)for(var n=i.indexes,o=n.length,s=0;s<o;s++){var r=n[s];void 0!==r&&this._rowCount>0&&r<=this._rowCount&&("add"===t?this._rowCount=this._rowCount+1:"remove"===t&&(this._rowCount=this._rowCount-1))}},n.DomScroller.prototype._registerDataSourceEventListeners=function(){var e,t,i=this._data;if(null!=i)for(this._unregisterDataSourceEventListeners(),this._dataProviderEventHandlers=[],this._dataProviderEventHandlers.push({eventType:"mutate",eventHandler:this._handleDataRowMutateEvent.bind(this)}),e=0;e<this._dataProviderEventHandlers.length;e++)(t=i.addEventListener(this._dataProviderEventHandlers[e].eventType,this._dataProviderEventHandlers[e].eventHandler))&&(this._dataProviderEventHandlers[e].eventHandler=t)},n.DomScroller.prototype._unregisterDataSourceEventListeners=function(){var e,t=this._data;if(null!=this._dataProviderEventHandlers&&null!=t)for(e=0;e<this._dataProviderEventHandlers.length;e++)t.removeEventListener(this._dataProviderEventHandlers[e].eventType,this._dataProviderEventHandlers[e].eventHandler)},Zi.getExpressionInfo=function(e){return n.__AttributeUtils.getExpressionInfo(e)},Zi.createGenericExpressionEvaluator=function(e){return new Function("context","with(context){return "+e+";}")};ci.register("oj-file-picker",{view:"<input type='file' style='display:none'       data-bind=\"attr:{multiple: $properties.selectionMode == 'multiple',                         accept: acceptStr}\"></input><div class='oj-filepicker-clickable'>  <oj-bind-slot name='trigger'>    <div tabindex='0'         class='oj-filepicker-dropzone'>      <p class='oj-filepicker-text' data-bind='text: defDropzoneText'></p>    </div>  </oj-bind-slot></div>",viewModel:function(t){var i,o,s=t.element,r=t.properties,a=!1;function l(e){var t=i[0],n=$(s).find(".oj-filepicker-clickable")[0];switch(function(e){e&&(e.removeEventListener("dragenter",m,!1),e.removeEventListener("dragover",g,!1),e.removeEventListener("dragleave",f,!1),e.removeEventListener("dragend",f,!1),e.removeEventListener("drop",y,!1))}(t),function(e){e&&(e.removeEventListener("click",u,!1),e.removeEventListener("keypress",u,!1))}(n),e){case"click":c(n);break;case"drop":p(t),n&&n.addEventListener("keypress",u,!1);break;case"auto":case"clickAndDrop":default:c(n),p(t)}}function u(e){return("click"===e.type||"keypress"===e.type&&13===e.keyCode)&&(a=!0,e.preventDefault(),o.value=null,o.click(),!0)}function d(e){e.preventDefault(),e.stopPropagation();var t=e.target.files;t.length>0&&b(t,e),a=!1}function h(e){var t,i=r.accept;if(!i||0===i.length||!e)return!0;for(var o=0;o<i.length;o++){if(!(t=n.StringUtils.trim(i[o])))return!0;if(t.startsWith(".",0)){if(!e.name||e.name&&e.name.endsWith(t))return!0}else{if(!e.type)return!1;if("image/*"===t){if(e.type.startsWith("image/",0))return!0}else if("video/*"===t){if(e.type.startsWith("video/",0))return!0}else if("audio/*"===t){if(e.type.startsWith("audio/",0))return!0}else if(e.type===t)return!0}}return!1}function c(e){e&&(e.addEventListener("click",u,!1),e.addEventListener("keypress",u,!1))}function p(e){e&&(e.addEventListener("dragenter",m,!1),e.addEventListener("dragover",g,!1),e.addEventListener("dragleave",f,!1),e.addEventListener("dragend",f,!1),e.addEventListener("drop",y,!1))}function _(e){var t="single"!==s.selectionMode||1===e.length;return t?function(e){if(e)for(var t=0;t<e.length;t++)if(!h(e[t]))return!1;return!0}(e):t}function m(e){e.preventDefault(),e.stopPropagation()}function g(e){e.preventDefault(),e.stopPropagation();var t=e.dataTransfer,n=!t.items||_(t.items);return n?(t.dropEffect="copy",i.addClass("oj-valid-drop")):t.dropEffect="none",n}function f(e){e.preventDefault(),e.stopPropagation(),i.removeClass("oj-valid-drop")}function y(t){var i=t.dataTransfer.files;_(i)?b(i,t):e.warn("oj-file-picker: Files "+function(e){var t="";if(e)for(var i=0;i<e.length;i++)t+=e[i].name+" ";return t}(i)+" are not acceptable."),f(t)}function b(e,t){var i=function(e){for(var t={length:{value:e.length},item:{value:function(e){return this[e]}}},i=0;i<e.length;i++)t[i]={value:e[i],enumerable:!0};return Object.create(FileList.prototype,t)}(e),n=new CustomEvent("ojSelect",{detail:{files:i,originalEvent:t}});s.dispatchEvent(n)}this.acceptStr=ko.pureComputed(function(){var e=r.accept;return e&&e.length?e.join(","):null},this),s.addEventListener("selectOnChanged",function(e){l(e.detail.value)}),this.defDropzoneText=v.getTranslatedString("oj-ojFilePicker.dropzoneText"),this.bindingsApplied=function(){var e=$(s);e.addClass("oj-filepicker"),i=e.find(".oj-filepicker-dropzone"),l(r.selectOn);var t=e.find("input");t.length&&(o=t[0]).addEventListener("change",d,!1),i.length&&(i[0].addEventListener("focus",function(){a||(n.DomUtils.recentPointer()?i.removeClass("oj-focus-highlight"):i.addClass("oj-focus-highlight"))}),i[0].addEventListener("focusout",function(){a||i.removeClass("oj-focus-highlight")}))}},metadata:{properties:{accept:{type:"Array<string>"},selectOn:{type:"string",enumValues:["auto","click","clickAndDrop","drop"],value:"auto"},selectionMode:{type:"string",enumValues:["multiple","single"],value:"multiple"}},methods:{setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojSelect:{}},extension:{}}});var Ji={properties:{arrowPlacement:{type:"string",enumValues:["adjacent","overlay"],value:"adjacent"},arrowVisibility:{type:"string",enumValues:["auto","hidden","hover","visible"],value:"auto"},currentItem:{type:"object",writeback:!0,value:{index:0},properties:{id:{type:"string"},index:{type:"number"}}},looping:{type:"string",enumValues:["off","page"],value:"off"},maxItemsPerPage:{type:"number",value:0},orientation:{type:"string",enumValues:["horizontal","vertical"],value:"horizontal"},translations:{type:"object",value:{},properties:{labelAccArrowNextPage:{type:"string"},labelAccArrowPreviousPage:{type:"string"},labelAccFilmStrip:{type:"string"},tipArrowNextPage:{type:"string"},tipArrowPreviousPage:{type:"string"}}}},methods:{refresh:{},getItemsPerPage:{},getPagingModel:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};n.FilmStripPagingModel=function(){this.Init()},n.Object.createSubclass(n.FilmStripPagingModel,n.EventSource,"oj.FilmStripPagingModel"),n.FilmStripPagingModel.prototype.Init=function(){n.FilmStripPagingModel.superclass.Init.call(this),this._page=-1,this._totalSize=0,this._pageSize=-1},n.FilmStripPagingModel.prototype.setTotalSize=function(e){this._totalSize=e},n.FilmStripPagingModel.prototype.getPageSize=function(){return this._pageSize},n.FilmStripPagingModel.prototype.getPage=function(){return this._page},n.FilmStripPagingModel.prototype.setPage=function(e,t){e=parseInt(e,10);try{var i=this.getPageCount(),n=this._page,o=this._pageSize,s=o;if(t&&t.pageSize&&(s=t.pageSize),0===this._totalSize&&-1===s)return Promise.resolve();var r=Math.ceil(this._totalSize/s);if(e<0||e>r-1)throw new Error("JET FilmStrip: Invalid 'page' set: "+e);var a=!1;if(e!==n||s!==o){if(!1===this.handleEvent("beforePage",{page:e,previousPage:n}))return Promise.reject();a=!0}this._page=e,this._pageSize=s;var l=this.getPageCount(),u=this;return new Promise(function(o){if(i!==l&&u.handleEvent("pageCount",{pageCount:l,previousPageCount:i}),a){var s={page:e,previousPage:n};t&&t.loopDirection&&(s.loopDirection=t.loopDirection),u.handleEvent("page",s)}o(null)})}catch(e){return Promise.reject(e)}},n.FilmStripPagingModel.prototype.getStartItemIndex=function(){return-1===this._page&&-1===this._pageSize?-1:this._page*this._pageSize},n.FilmStripPagingModel.prototype.getEndItemIndex=function(){return Math.min(this.getStartItemIndex()+this._pageSize,this._totalSize)-1},n.FilmStripPagingModel.prototype.getPageCount=function(){return Math.ceil(this._totalSize/this._pageSize)},n.FilmStripPagingModel.prototype.totalSize=function(){return this._totalSize},n.FilmStripPagingModel.prototype.totalSizeConfidence=function(){return"actual"},function(){var t="",i="-ms-transform",o="transform",s="-webkit-transform";function r(e,t){e.css(s,t).css(i,t).css(o,t)}function a(e){e.css(s,t).css(i,t).css(o,t)}function l(e){var t=$("<div></div>");return t.text(e),t[0].innerHTML}n.__registerWidget("oj.ojFilmStrip",$.oj.baseComponent,{defaultElement:"<div>",widgetEventPrefix:"oj",options:{maxItemsPerPage:0,orientation:"horizontal",currentItem:{index:0},arrowPlacement:"adjacent",arrowVisibility:"auto",looping:"off"},_ComponentCreate:function(){this._super();var t=this.element;t.addClass("oj-filmstrip oj-component").attr("tabindex",0).attr("role","region"),t.uniqueId();var i=this.options;if(i.disabled&&e.warn("JET FilmStrip: 'disabled' property not supported"),"horizontal"!==i.orientation&&"vertical"!==i.orientation)throw new Error("JET FilmStrip: Unsupported value set as 'orientation' property: "+i.orientation);if("adjacent"!==i.arrowPlacement&&"overlay"!==i.arrowPlacement)throw new Error("Unsupported value set as 'arrowPlacement' property: "+i.arrowPlacement);if("visible"!==i.arrowVisibility&&"hidden"!==i.arrowVisibility&&"hover"!==i.arrowVisibility&&"auto"!==i.arrowVisibility)throw new Error("Unsupported value set as 'arrowVisibility' property: "+i.arrowVisibility);if("off"!==i.looping&&"page"!==i.looping)throw new Error("Unsupported value set as 'looping' property: "+i.looping);this.touchEventNamespace=this.eventNamespace+"Touch",this.mouseEventNamespace=this.eventNamespace+"Mouse",this.keyEventNamespace=this.eventNamespace+"Key",this.navArrowHoverableEventNamespace=this.eventNamespace+"NavArrowHoverable",i.currentItem=this._convertItemToObj(i.currentItem),this._setup(!0),this._populateItemObj(i.currentItem),this.option("currentItem",i.currentItem,{_context:{internalSet:!0,writeback:!0}})},refresh:function(){this._super(),this._setup(!1)},getItemsPerPage:function(){return this._itemsPerPage},getPagingModel:function(){return this._pagingModel},_NotifyShown:function(){this._super(),this._needsSetup?this._setup(this._needsSetup[0]):this._handleResize()},_NotifyAttached:function(){this._super(),this._needsSetup?this._setup(this._needsSetup[0]):this._handleResize()},_setup:function(e){var t=this;if(e&&!this._pagingModel&&(this._pagingModel=new n.FilmStripPagingModel),e&&!this._filterNestedFilmStripsFunc&&(this._filterNestedFilmStripsFunc=function(e,i){return $(i).closest(".oj-filmstrip")[0]===t.element[0]}),!this._canCalculateSizes()){var i=!1;return this._needsSetup&&(i=this._needsSetup[0]),void(this._needsSetup=[e||i])}this._needsSetup=null,this._bRTL="rtl"===this._GetReadingDirection(),this._bTouchSupported=n.DomUtils.isTouchSupported();var o=this.element;e?(this._itemsPerPage=0,this._handlePageFunc=function(e){t._handlePage(e)},this._componentSize=0,this._itemSize=-1,this._handleTransitionEndFunc=function(e){t._handleTransitionEnd()},this._handleResizeFunc=function(e,i){t._handleResize()},this._bTouchSupported&&(this._handleTouchStartFunc=function(e){t._handleTouchStart(e)},this._handleTouchMoveFunc=function(e){t._handleTouchMove(e)},this._handleTouchEndFunc=function(e){t._handleTouchEnd(e)},this._addTouchListeners()),this._handleMouseDownFunc=function(e){t._handleMouseDown(e)},this._handleMouseMoveFunc=function(e){t._handleMouseMove(e)},this._handleMouseUpFunc=function(e){t._handleMouseUp(e)},this._addMouseListeners(),this._handleKeyDownFunc=function(e){t._handleKeyDown(e)},this._addKeyListeners()):this._destroyInternal();var s,r=o.children();for(s=0;s<r.length;s++)w.subtreeDetached(r[s]);var a=this._pagingModel;if(e&&a.on("page",this._handlePageFunc),a.setTotalSize(r.length),this._wrapChildren(),r.length>0){for(this._adjustSizes(),s=0;s<r.length;s++)w.subtreeAttached(r[s]);n.DomUtils.addResizeListener(o[0],this._handleResizeFunc,25)}},_destroy:function(){this._bTouchSupported&&(this._removeTouchListeners(),this._handleTouchStartFunc=null,this._handleTouchMoveFunc=null,this._handleTouchEndFunc=null),this._removeMouseListeners(),this._handleMouseDownFunc=null,this._handleMouseMoveFunc=null,this._handleMouseUpFunc=null,this._removeKeyListeners(),this._handleKeyDownFunc=null,this._destroyInternal(),this._pagingModel.off("page",this._handlePageFunc),this._handlePageFunc=null,this._pagingModel=null,this._handleResizeFunc=null,this._handleTransitionEndFunc=null,this._filterNestedFilmStripsFunc=null;var e=this.element;e.removeClass("oj-filmstrip oj-component oj-filmstrip-hover").removeAttr("tabindex role").removeAttr("aria-labelledby"),e.removeUniqueId(),this._super()},_destroyInternal:function(){this._deferredHandleResize=!1,this._resolveBusyState();var e=this.element;n.DomUtils.removeResizeListener(e[0],this._handleResizeFunc),this._itemSize=-1,this._queuedHandleResize&&(clearTimeout(this._queuedHandleResize),this._queuedHandleResize=null);var t,i=this._getItems();for(t=0;t<i.length;t++)w.subtreeDetached(i[t]);for(this._clearCalculatedSizes(),this._getItemContainers().unwrap(),this._unwrapChildren(),t=0;t<i.length;t++)w.subtreeAttached(i[t])},_setOption:function(t,i,n){var o=this.options,s=!1,r=-1,a=this._pagingModel,l=a.getPage();switch(t){case"disabled":e.warn("JET FilmStrip: 'disabled' property not supported");break;case"orientation":if("horizontal"!==i&&"vertical"!==i)throw new Error("JET FilmStrip: Unsupported value set as 'orientation' property: "+i);s=o.orientation!==i;break;case"maxItemsPerPage":s=o.maxItemsPerPage!==i;break;case"arrowPlacement":if("adjacent"!==i&&"overlay"!==i)throw new Error("Unsupported value set as 'arrowPlacement' property: "+i);s=o.arrowPlacement!==i;break;case"arrowVisibility":if("visible"!==i&&"hidden"!==i&&"hover"!==i&&"auto"!==i)throw new Error("Unsupported value set as 'arrowVisibility' property: "+i);s=o.arrowVisibility!==i;break;case"looping":if("off"!==i&&"page"!==i)throw new Error("Unsupported value set as 'looping' property: "+i);s=o.looping!==i;break;case"currentItem":i=this._convertItemToObj(i),this._populateItemObj(i);var u=o.currentItem;if(u&&i&&(u.id!==i.id||u.index!==i.index)&&((r=this._findPage(i))<0||r>=a.getPageCount()))throw new Error("JET FilmStrip: Value of 'currentItem' property not found: "+i)}switch(this._super(t,i,n),t){case"currentItem":r>-1&&r!==l&&a.setPage(r)}s&&this._setup(!1)},_handleResize:function(){if(this._busyStateResolveFunc)this._deferredHandleResize=!0;else if(this._bHandlingResize){if(!this._queuedHandleResize){var e=this;this._queuedHandleResize=setTimeout(function(){e._queuedHandleResize=null,e._handleResize()},0)}}else this._bHandlingResize=!0,this._adjustSizes(!0),this._bHandlingResize=!1},_isHorizontal:function(){return"vertical"!==this.options.orientation},_isLoopingPage:function(){return"page"===this.options.looping},_getCssPositionAttr:function(){return this._isHorizontal()?this._bRTL?"right":"left":"top"},_getCssSizeAttr:function(){return this._isHorizontal()?"width":"height"},_canCalculateSizes:function(){var e=document.createElement("div"),t=e.style;t.position="absolute",t.width="10px",t.height="10px";var i=this.element[0];i.appendChild(e);var n=!1;try{n=e.offsetWidth>0&&e.offsetHeight>0}catch(e){}return i.removeChild(e),n},_wrapChildren:function(){var e=this.element,t=this._isHorizontal(),i=e.children();i.addClass("oj-filmstrip-item").wrap("<div class='oj-filmstrip-container oj-filmstrip-item-container'></div>");var n=this._getCssPositionAttr(),o=e.children().wrapAll("<div class='oj-filmstrip-container oj-filmstrip-pages-container' style='"+n+": 0px;'></div>").parent();this._pagesWrapper=o;var s=this.options;"hidden"!==s.arrowVisibility&&"adjacent"===s.arrowPlacement&&(this._contentWrapper=o.wrap("<div class='oj-filmstrip-container oj-filmstrip-content-container'></div>").parent()),e.addClass("oj-filmstrip-container"),t||e.addClass("oj-filmstrip-vertical");var r=this._createPageInfoElem(),a=e.attr("id"),l=r.attr("id");e.append(r),e.attr("aria-labelledby",a+" "+l),this._pageInfoElem=r,"hidden"!==s.arrowVisibility&&i.length>0&&(this._prevButton=this._createPrevNavArrow(),this._nextButton=this._createNextNavArrow(),this._navArrowsShownOnHover()&&this._setupNavArrowsHoverable())},_unwrapChildren:function(){var e=this.element,t=this._getItems();this._tearDownNavArrowsHoverable(),this._prevButton&&(this._UnregisterChildNode(this._prevButton),this._prevButton=null),this._nextButton&&(this._UnregisterChildNode(this._nextButton),this._nextButton=null);var i=e.children(".oj-filmstrip-arrow-container");i&&i.remove(),this._pageInfoElem&&(this._UnregisterChildNode(this._pageInfoElem),this._pageInfoElem.remove(),this._pageInfoElem=null),t.removeClass("oj-filmstrip-item").unwrap().unwrap(),this._pagesWrapper=null,this._contentWrapper&&(t.unwrap(),this._contentWrapper=null),e.removeClass("oj-filmstrip-container oj-filmstrip-vertical")},_createPageInfoElem:function(){var e=$(document.createElement("div"));return e.uniqueId(),e.addClass("oj-helper-hidden-accessible oj-filmstrip-liveregion"),e.attr({role:"region","aria-live":"polite","aria-atomic":"true"}),e},_updatePageInfoElem:function(){var e=this._pagingModel,t=e.getPage(),i=e.getPageCount(),n=l(this.getTranslatedString("labelAccFilmStrip",{pageIndex:t+1,pageCount:i})),o=this._pageInfoElem;o&&o.attr("aria-label",n)},_setupNavArrowsHoverable:function(){this.element.on("mouseenter"+this.navArrowHoverableEventNamespace,function(e){$(e.currentTarget).hasClass("oj-disabled")||$(e.currentTarget).addClass("oj-filmstrip-hover")}).on("mouseleave"+this.navArrowHoverableEventNamespace,function(e){$(e.currentTarget).removeClass("oj-filmstrip-hover")})},_tearDownNavArrowsHoverable:function(){this.element.off(this.navArrowHoverableEventNamespace)},_navArrowsShownOnHover:function(){var e=this.options,t=e.arrowVisibility;return"hover"===t||"auto"===t&&"overlay"===e.arrowPlacement},_hasPrevPage:function(){return this._pagingModel.getPage()>0},_hasNextPage:function(){var e=this._pagingModel;return e.getPage()<e.getPageCount()-1},_prevPage:function(){var e=this._pagingModel;if(this._hasPrevPage())e.setPage(e.getPage()-1);else{var t=e.getPageCount();this._isLoopingPage()&&t>1&&e.setPage(t-1,{loopDirection:"prev"})}},_nextPage:function(){var e=this._pagingModel;if(this._hasNextPage())e.setPage(e.getPage()+1);else{var t=e.getPageCount();this._isLoopingPage()&&t>1&&e.setPage(0,{loopDirection:"next"})}},_displayNavigationArrow:function(e,t){"adjacent"===this.options.arrowPlacement?t.css("visibility",e?"":"hidden"):t.parent().css("display",e?"":"none")},_updateNavigationArrowsDisplay:function(){if("hidden"!==this.options.arrowVisibility){var e=this._pagingModel,t=e.getPage(),i=e.getPageCount(),n=this._isLoopingPage()&&i>1;this._displayNavigationArrow(n||0!==t,this._prevButton),this._displayNavigationArrow(n||t!==i-1,this._nextButton)}},_createPrevNavArrow:function(){var e=this.element,t=this._isHorizontal()?"oj-start":"oj-top",i=this._createNavigationArrowContainer(t);"overlay"===this.options.arrowPlacement?e.append(i):e.prepend(i);var n=l(this.getTranslatedString("labelAccArrowPreviousPage")),o=l(this.getTranslatedString("tipArrowPreviousPage")),s=this._createNavigationArrow(i,t,n,o),r=this;return s.on("click",function(){r._prevPage()}),s},_createNextNavArrow:function(){var e=this.element,t=this._isHorizontal()?"oj-end":"oj-bottom",i=this._createNavigationArrowContainer(t);e.append(i);var n=l(this.getTranslatedString("labelAccArrowNextPage")),o=l(this.getTranslatedString("tipArrowNextPage")),s=this._createNavigationArrow(i,t,n,o),r=this;return s.on("click",function(){r._nextPage()}),s},_createNavigationArrowContainer:function(e){var t=$(document.createElement("div"));return t.addClass("oj-filmstrip-arrow-container "+e),"overlay"===this.options.arrowPlacement&&(t.addClass("oj-filmstrip-arrow-container-overlay"),this._navArrowsShownOnHover()&&t.addClass("oj-filmstrip-arrow-transition")),t},_createNavigationArrow:function(e,t,i,n){var o="<div class='oj-filmstrip-arrow oj-default oj-enabled "+t+"' role='button' tabindex='-1'";o+="><span class='oj-filmstrip-arrow-icon "+t+" oj-component-icon'></span></div>",e.append(o);var s=e.children(".oj-filmstrip-arrow").eq(0);s.uniqueId();var r=s.attr("id");i&&s.attr("aria-label",i),n&&s.attr("title",n);var a=this._pageInfoElem.attr("id");return s.attr("aria-labelledby",a+" "+r),this._AddHoverable(s),this._AddActiveable(s),"adjacent"===this.options.arrowPlacement&&this._navArrowsShownOnHover()&&s.addClass("oj-filmstrip-arrow-transition"),s},_getItemContainers:function(){return this._pagesWrapper.find(".oj-filmstrip-item-container").filter(this._filterNestedFilmStripsFunc)},_getItems:function(){return this._pagesWrapper.find(".oj-filmstrip-item").filter(this._filterNestedFilmStripsFunc)},_getPages:function(){return this._pagesWrapper.children(".oj-filmstrip-page")},_clearCalculatedSizes:function(){var e=this._pagesWrapper;this._getPages().css("flex-basis",t).css("-webkit-flex-basis",t),this._getItemContainers().css("flex-basis",t).css("-webkit-flex-basis",t),e.css(this._getCssSizeAttr(),t)},_adjustSizes:function(e){this._clearCalculatedSizes();var i=this.options,n=this._isHorizontal(),o=i.maxItemsPerPage,s=o<1,r=this.element,a=this._getItemContainers();if(this._itemSize<0){var l=this._getItemIndex(i.currentItem),u=$(a[l]),d=u.children(".oj-filmstrip-item");d.css("display",t),w.subtreeShown(d[0]),this._itemSize=n?u.width():u.height()}var h=n?r.width():r.height();if("hidden"!==i.arrowVisibility&&"adjacent"===i.arrowPlacement){var c=r.children(".oj-filmstrip-arrow-container").eq(0);h-=2*(n?c.width():c.height())}if(this._componentSize=h,!s){var p=Math.max(Math.floor(h/this._itemSize),1);p<o&&(o=p)}var _=s?Math.max(Math.floor(h/this._itemSize),1):o,m=h/_;a.css("flex-basis",m+"px").css("-webkit-flex-basis",m+"px");var g=Math.ceil(a.length/_),f=this._getPages(),v=!1,y=this._pagingModel;if(y.getPageCount()!==g||this._itemsPerPage!==_||!f||f.length<1){var b;if(v=!0,e)for(b=0;b<a.length;b++)w.subtreeDetached(a[b]);for(f&&f.length>0&&a.unwrap(),b=0;b<a.length;b+=_){a.slice(b,b+_).wrapAll("<div class='oj-filmstrip-container oj-filmstrip-page' style='display: none;' aria-hidden='true'></div>")}if(e)for(b=0;b<a.length;b++)w.subtreeAttached(a[b])}(f=this._getPages()).css("flex-basis",h+"px").css("-webkit-flex-basis",h+"px");var C=this._pagesWrapper,S=this._contentWrapper;C.css(this._getCssSizeAttr(),h),S&&S.css(this._getCssSizeAttr(),h);var E=0;if(i.currentItem&&(E=this._findPage(i.currentItem,_)),y.getPageCount()!==g||this._itemsPerPage!==_||y.getPage()!==E)y.setPage(E,{pageSize:_});else if(v){var T=y.getPage();this._handlePage({previousPage:T,page:T})}},_handlePage:function(e){var t=e.page,i=e.loopDirection,n=e.previousPage,o=this._pagesWrapper,s=this._getPages(),r=this._pagingModel,a=r.getPageSize(),l=r.getPageCount(),u=n<0||n===t||this._itemsPerPage!==a,d=this._isLoopingPage();this._itemsPerPage=a;var h=null;u||(h=$(s[n]));var c=this._getCssPositionAttr(),p=$(s[t]),_=p.is(":hidden");_&&this._unhidePage(p);var m,g=this._bDragInit;if(n>-1&&!u){m=t>n,d&&i&&(m="next"===i);var f=d&&!m&&l>1&&0===n,v=d&&m&&l>1&&n===l-1;g=!0,o.css(this._getCssSizeAttr(),2*this._componentSize),m||_&&o.css(c,-this._componentSize+"px"),m?(h.addClass("oj-filmstrip-transition-next-oldpage-from"),p.addClass("oj-filmstrip-transition-next-newpage-from"),v&&p.addClass("oj-filmstrip-transition-display-as-lastpage")):(h.addClass("oj-filmstrip-transition-prev-oldpage-from"),p.addClass("oj-filmstrip-transition-prev-newpage-from"),f&&p.addClass("oj-filmstrip-transition-display-as-firstpage"))}if(this._busyStateResolveFunc=this._addBusyState("scrolling"),g){var y=this,b=this._bDragInit;if(b&&n<0)s.filter(":visible").addClass("oj-filmstrip-transition");setTimeout(function(){y._finishHandlePage(t,n,m,u,b)},25)}else this._finishHandlePage(t,n,m,u)},_finishHandlePage:function(e,t,i,n,o){var s=this._pagesWrapper;if(n||(this._bPageChangeTransition=!0,s.on("transitionend"+this.eventNamespace+" webkitTransitionEnd"+this.eventNamespace,this._handleTransitionEndFunc)),n)this._handleTransitionEnd();else{var l=this._getPages();if(o&&a(l),t>-1){var u=$(l[t]),d=$(l[e]);u.addClass("oj-filmstrip-transition"),d.addClass("oj-filmstrip-transition"),i?(u.removeClass("oj-filmstrip-transition-next-oldpage-from"),d.removeClass("oj-filmstrip-transition-next-newpage-from"),u.addClass("oj-filmstrip-transition-next-oldpage-to"),d.addClass("oj-filmstrip-transition-next-newpage-to")):(u.removeClass("oj-filmstrip-transition-prev-oldpage-from"),d.removeClass("oj-filmstrip-transition-prev-newpage-from"),u.addClass("oj-filmstrip-transition-prev-oldpage-to"),d.addClass("oj-filmstrip-transition-prev-newpage-to"))}else if(o){r(l.filter(":visible"),"translate3d(0, 0, 0)")}}},_handleTransitionEnd:function(){this._bPageChangeTransition=!1;var e=this._pagesWrapper,t=this._getCssPositionAttr();e.off(this.eventNamespace).css(this._getCssSizeAttr(),this._componentSize).css(t,"0px");var i=null;(n.FocusUtils.containsFocus(e[0])||this._nextButton&&n.FocusUtils.containsFocus(this._nextButton[0])||this._prevButton&&n.FocusUtils.containsFocus(this._prevButton[0]))&&(i=document.activeElement);for(var o=this._pagingModel.getPage(),s=this._getPages(),r=0;r<s.length;r++)r!==o&&this._hidePage($(s[r]));if(s.removeClass("oj-filmstrip-transition oj-filmstrip-transition-next-oldpage-to oj-filmstrip-transition-next-newpage-to oj-filmstrip-transition-prev-oldpage-to oj-filmstrip-transition-prev-newpage-to oj-filmstrip-transition-display-as-firstpage oj-filmstrip-transition-display-as-lastpage"),a(s),this._updateNavigationArrowsDisplay(),i&&$(i).is(":hidden")){var l=this.element,u=n.FocusUtils.getFirstTabStop(s[o]);u?n.FocusUtils.focusElement(u):n.FocusUtils.focusElement(l[0])}var d=this.options;if(this._findPage(d.currentItem)!==o){var h=this._getFirstItemOnPage(o);h&&this.option("currentItem",h,{_context:{writeback:!0}})}this._deferredHandleResize&&(this._deferredHandleResize=!1,this._handleResize()),this._updatePageInfoElem(),this._resolveBusyState()},_getItemIndex:function(e){var t=-1;if(e){var i=this._getItems();if(e.id&&n.DomUtils.isValidIdentifier(e.id))for(var o=0;o<i.length;o++){var s=i[o].id;if(s&&s.length>0&&s===e.id){t=o;break}}else null!=e.index&&e.index>=0&&e.index<i.length&&(t=e.index)}return t},_convertItemToObj:function(e){var t=null;return"object"==typeof e?t=e:"number"==typeof e?t={index:e}:"string"==typeof e&&(t={id:e}),t},_populateItemObj:function(e){if(e&&this._pagingModel.getPage()>=0){var t=this._getItemIndex(e);if(e.index=t,null==e.id&&-1!==t){var i=this._getItems();e.id=i[t].id}}},_findPage:function(e,t){var i=this._getItemIndex(e),n=-1;return i>-1&&(void 0===t&&(t=this._itemsPerPage),n=Math.floor(i/t)),n},_getFirstItemOnPage:function(e,t,i){var n=this._pagingModel;if(void 0===t&&(t=n.getPageCount()),e>=0&&e<t){var o=this._getItems();void 0===i&&(i=this._itemsPerPage);var s=e*i;if(s<o.length)return{id:o[s].id,index:s}}return null},_hidePage:function(e){w.subtreeHidden(e[0]),e.css("display","none").attr("aria-hidden","true"),e.find(".oj-filmstrip-item").filter(this._filterNestedFilmStripsFunc).css("display","none")},_unhidePage:function(e){e.css("display",t).removeAttr("aria-hidden"),e.find(".oj-filmstrip-item").filter(this._filterNestedFilmStripsFunc).css("display",t),w.subtreeShown(e[0])},_addKeyListeners:function(){this.element.on("keydown"+this.keyEventNamespace,this._handleKeyDownFunc)},_removeKeyListeners:function(){this.element.off(this.keyEventNamespace)},_addMouseListeners:function(){this.element.on("mousedown"+this.mouseEventNamespace,this._handleMouseDownFunc).on("mousemove"+this.mouseEventNamespace,this._handleMouseMoveFunc).on("mouseup"+this.mouseEventNamespace,this._handleMouseUpFunc)},_removeMouseListeners:function(){this.element.off(this.mouseEventNamespace)},_addTouchListeners:function(){this.element.on("touchstart"+this.touchEventNamespace,this._handleTouchStartFunc).on("touchmove"+this.touchEventNamespace,this._handleTouchMoveFunc).on("touchend"+this.touchEventNamespace,this._handleTouchEndFunc).on("touchcancel"+this.touchEventNamespace,this._handleTouchEndFunc)},_removeTouchListeners:function(){this.element.off(this.touchEventNamespace)},_handleKeyDown:function(e){var t=this._pagingModel,i=t.getPage(),n=t.getPageCount(),o=-2;switch(e.keyCode){case $.ui.keyCode.RIGHT:o=this._bRTL?i-1:i+1;break;case $.ui.keyCode.LEFT:o=this._bRTL?i+1:i-1;break;case $.ui.keyCode.DOWN:o=i+1;break;case $.ui.keyCode.UP:o=i-1;break;case $.ui.keyCode.HOME:o=0;break;case $.ui.keyCode.END:o=n-1;break;default:return}if(o>-1&&o<n)t.setPage(o);else if(this._isLoopingPage()&&n>1){var s={};o===n&&(o=0,s.loopDirection="next"),-1===o&&(o=n-1,s.loopDirection="prev"),t.setPage(o,s)}e.preventDefault()},_handleMouseDown:function(e){var t=e.originalEvent;this._dragScrollStart(t)},_handleMouseMove:function(e){var t=e.originalEvent;this._dragScrollMove(e,t)},_handleMouseUp:function(e){this._dragScrollEnd()},_handleTouchStart:function(e){var t=e.originalEvent.touches;if(1===t.length){var i=t[0];this._dragScrollStart(i)}},_handleTouchMove:function(e){var t=e.originalEvent.touches[0];this._dragScrollMove(e,t),(this._bTouch||this._scrolledForThisTouch)&&e.preventDefault()},_handleTouchEnd:function(e){this._dragScrollEnd()},_dragScrollStart:function(e){if(this._pagingModel.getPageCount()>1&&!this._bPageChangeTransition){this._bTouch=!0,this._bDragInit=!1,this._bFirstToLast=!1,this._bLastToFirst=!1;var t=this._isHorizontal();this._touchStartCoord=t?e.pageX:e.pageY,this._touchStartCoord2=t?e.pageY:e.pageX}},_initDragScroll:function(e,t,i){var n=this._isHorizontal();this._touchStartCoord=n?e.pageX:e.pageY,this._touchStartCoord2=n?e.pageY:e.pageX;var o=this._getCssPositionAttr(),s=this._pagesWrapper,r=this._pagingModel,a=r.getPage(),l=r.getPageCount(),u=this._getPages(),d=1;t||i?(t&&(this._unhidePage($(u[l-1])),s.css(o,-this._componentSize+"px"),d+=1,$(u[l-1]).addClass("oj-filmstrip-transition-display-as-firstpage")),i&&(this._unhidePage($(u[0])),d+=1,$(u[0]).addClass("oj-filmstrip-transition-display-as-lastpage"))):(a>0&&(this._unhidePage($(u[a-1])),s.css(o,-this._componentSize+"px"),d+=1),a<l-1&&(this._unhidePage($(u[a+1])),d+=1)),d>1&&s.css(this._getCssSizeAttr(),d*this._componentSize),this._touchStartScroll=parseInt(s.css(o),10)},_dragScrollMove:function(e,t){if(this._bTouch){var i=this._isHorizontal(),n=(i?t.pageX:t.pageY)-this._touchStartCoord,o=(i?t.pageY:t.pageX)-this._touchStartCoord2,s=i&&this._bRTL?n>0:n<0,a=this._pagingModel,l=a.getPage(),u=a.getPageCount(),d=this._isLoopingPage(),h=d&&!s&&u>1&&0===l,c=d&&s&&u>1&&l===u-1;if(!this._bDragInit)return Math.abs(o)>Math.abs(n)&&(this._bTouch=!1,this._scrolledForThisTouch=!1),Math.abs(n)>3&&(this._initDragScroll(t,h,c),this._bDragInit=!0),this._bFirstToLast=h,void(this._bLastToFirst=c);if(h===this._bFirstToLast&&c===this._bLastToFirst||(this._dragScrollResetPages(),this._initDragScroll(t,h,c),this._bFirstToLast=h,this._bLastToFirst=c),s&&l<a.getPageCount()-1||!s&&l>0||d){var p=this.element[0],_=Math.min(.33*(i?p.offsetWidth:p.offsetHeight),100),m=this._getCssPositionAttr(),g=this._pagesWrapper,f=this._getPages();if(Math.abs(n)>=_){var v,y,b={};if(h||c?(h?(v=u-1,y=u>2?1:-1):c&&(v=0,y=u>2?u-2:-1),b.loopDirection=s?"next":"prev"):(v=s?l+1:l-1,y=s?l-1:l+1),y>-1&&y<a.getPageCount()&&this._hidePage($(f[y])),s&&y>-1&&!c){var C=parseInt(g.css(m),10);g.css(m,C+this._componentSize+"px")}g.css(this._getCssSizeAttr(),2*this._componentSize),this._bTouch=!1,a.setPage(v,b)}else{var S=i?"translate3d("+n+"px, 0, 0)":"translate3d(0, "+n+"px, 0)";r(f.filter(":visible"),S)}this._scrolledForThisTouch=!0}this._scrolledForThisTouch&&(e.preventDefault(),e.stopPropagation())}},_dragScrollEnd:function(){if(this._bTouch&&this._bDragInit){var e=this._pagingModel.getPage();this._handlePage({previousPage:e,page:e})}this._bTouch=!1,this._bDragInit=!1,this._bFirstToLast=!1,this._bLastToFirst=!1,this._scrolledForThisTouch=!1},_dragScrollResetPages:function(){for(var e=this._pagesWrapper,t=this._getCssPositionAttr(),i=this._pagingModel,n=i.getPage(),o=i.getPageCount(),s=this._getPages(),r=0;r<s.length;r++)r!==n&&this._hidePage($(s[r]));e.css(t,"0px"),$(s[0]).removeClass("oj-filmstrip-transition-display-as-lastpage"),$(s[o-1]).removeClass("oj-filmstrip-transition-display-as-firstpage")},_addBusyState:function(e){var t=this.element,i=c.getContext(t[0]).getBusyContext(),n="FilmStrip";n+=" (id='"+t.attr("id")+"')";var o={description:n+=": "+e};return i.addBusyState(o)},_resolveBusyState:function(){this._busyStateResolveFunc&&(this._busyStateResolveFunc(),this._busyStateResolveFunc=null)},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;var t=e.subId;return"oj-filmstrip-start-arrow"===t?this.widget().find(".oj-filmstrip-arrow.oj-start").filter(this._filterNestedFilmStripsFunc)[0]:"oj-filmstrip-end-arrow"===t?this.widget().find(".oj-filmstrip-arrow.oj-end").filter(this._filterNestedFilmStripsFunc)[0]:"oj-filmstrip-top-arrow"===t?this.widget().find(".oj-filmstrip-arrow.oj-top").filter(this._filterNestedFilmStripsFunc)[0]:"oj-filmstrip-bottom-arrow"===t?this.widget().find(".oj-filmstrip-arrow.oj-bottom").filter(this._filterNestedFilmStripsFunc)[0]:null},getSubIdByNode:function(e){for(var t=this.getNodeBySubId({subId:"oj-filmstrip-start-arrow"}),i=this.getNodeBySubId({subId:"oj-filmstrip-end-arrow"}),n=this.getNodeBySubId({subId:"oj-filmstrip-top-arrow"}),o=this.getNodeBySubId({subId:"oj-filmstrip-bottom-arrow"}),s=e,r=this.element[0];s&&s!==r;){if(s===t)return{subId:"oj-filmstrip-start-arrow"};if(s===i)return{subId:"oj-filmstrip-end-arrow"};if(s===n)return{subId:"oj-filmstrip-top-arrow"};if(s===o)return{subId:"oj-filmstrip-bottom-arrow"};s=s.parentElement}return null},_CompareOptionValues:function(e,t,i){return"currentItem"===e?n.Object.compareValues(t,i):this._super(e,t,i)}})}(),Ji.extension._WIDGET_NAME="ojFilmStrip",n.CustomElementBridge.register("oj-film-strip",{metadata:Ji}),n.FlattenedTreeCellSet=function(e,t,i,o,s,r){n.Assert.assertArrayOrNull(r),this.m_startRow=e,this.m_endRow=t,this.m_startColumn=i,this.m_endColumn=o,this.m_nodeSet=s,this.m_columns=r},n.FlattenedTreeCellSet.prototype.getData=function(e){var t=this._getRelIndexes(e);if(null==t)return null;var i=t[0],o=t[1];n.Assert.assert(i<this.m_nodeSet.getStart()+this.m_nodeSet.getCount()&&o<this.m_columns.length);var s=this.m_columns[o],r=this.m_nodeSet.getData(i);if(null!=r){var a,l,u={};return a=r.get?function(){return r.get(s)}:function(){return r[s]},l=r.set?function(e){return r.set(s,e)}:function(e){r[s]=e},Object.defineProperty(u,"data",{enumerable:!0,get:a,set:l}),u}return null},n.FlattenedTreeCellSet.prototype.getMetadata=function(e){var t=this._getRelIndexes(e);if(null==t)return null;var i=t[0],o=t[1];n.Assert.assert(i<this.m_nodeSet.getStart()+this.m_nodeSet.getCount()&&o<this.m_columns.length);var s=this.m_columns[o],r=this.m_nodeSet.getMetadata(i),a=r.key;return r.keys={row:a,column:s},r},n.FlattenedTreeCellSet.prototype._getRelIndexes=function(e){if(n.Assert.assertObject(e),null==this.m_nodeSet||0===this.m_nodeSet.length)return null;var t=e.row-this.m_startRow+this.m_nodeSet.getStart(),i=e.column;return n.Assert.assertNumber(t,null),n.Assert.assertNumber(i,null),n.Assert.assert(t>=0&&i>=0),[t,i]},n.FlattenedTreeCellSet.prototype.getStart=function(e){return"row"===e?this.m_startRow:"column"===e?this.m_startColumn:0},n.FlattenedTreeCellSet.prototype.getCount=function(e){return"row"===e?Math.min(this.m_endRow-this.m_startRow,this.m_nodeSet.getCount()):"column"===e?this.m_endColumn-this.m_startColumn:0},n.FlattenedTreeCellSet.prototype.getExtent=function(e){return{row:{extent:1,more:{before:!1,after:!1}},column:{extent:1,more:{before:!1,after:!1}}}},n.FlattenedTreeDataGridDataSource=function(e,t){n.FlattenedTreeDataGridDataSource.superclass.constructor.call(this,e,t)},n.Object.createSubclass(n.FlattenedTreeDataGridDataSource,n.FlattenedTreeDataSource,"oj.FlattenedTreeDataGridDataSource"),n.FlattenedTreeDataGridDataSource.prototype.Init=function(){n.FlattenedTreeDataGridDataSource.superclass.Init.call(this),this.m_columns=n.FlattenedTreeDataGridDataSource.superclass.getOption.call(this,"columns"),this.m_rowHeader=n.FlattenedTreeDataGridDataSource.superclass.getOption.call(this,"rowHeader")},n.FlattenedTreeDataGridDataSource.prototype.getCountPrecision=function(e){return"row"===e?"estimate":"actual"},n.FlattenedTreeDataGridDataSource.prototype.getCount=function(e){return"row"===e?-1:"column"===e?this.m_columns.length:0},n.FlattenedTreeDataGridDataSource.prototype.fetchHeaders=function(e,t,i){var o,s=e.axis;if("column"===s){var r=e.start+e.count;r>this.getCount("column")&&(r=this.getCount("column")-e.start),o=new n.FlattenedTreeHeaderSet(e.start,r,this.m_columns)}else if("row"===s&&null!=this.m_rowHeader)return void(this.m_fetchHeaderRequest={range:e,callbacks:t,callbackObjects:i});null!=t&&null!=t.success&&(null==i&&(i={}),t.success.call(i.success,o,e,null))},n.FlattenedTreeDataGridDataSource.prototype.fetchCells=function(e,t,i){for(var o,s,r=0;r<e.length;r++){var a=e[r];if("row"===a.axis){o=a.start,s=a.count;break}}var l=this.m_fetchSize;this.m_fetchSize=s,n.FlattenedTreeDataGridDataSource.superclass.fetchRows.call(this,{start:o,count:s},{success:function(n){this._handleFetchRowsSuccess(n,e,t,i,0)}.bind(this),error:function(e){this._handleFetchRowsError(e,{start:o,count:s},t,i)}.bind(this)}),this.m_fetchSize=l},n.FlattenedTreeDataGridDataSource.prototype.keys=function(e){var t=e.row,i=e.column;return new Promise(function(e){t>n.FlattenedTreeDataGridDataSource.superclass.getFetchedRange.call(this).end||i>this.m_columns.length?e(null):e({row:n.FlattenedTreeDataGridDataSource.superclass.getKey.call(this,t),column:this.m_columns[i]})}.bind(this))},n.FlattenedTreeDataGridDataSource.prototype.indexes=function(e){var t=e.row,i=e.column;return new Promise(function(e){for(var o,s=n.FlattenedTreeDataGridDataSource.superclass.getIndex.call(this,t),r=0;r<this.m_columns.length;r++)if(this.m_columns[r]===i){o=r;break}e(s>=0||o>=0?{row:s,column:o}:null)}.bind(this))},n.FlattenedTreeDataGridDataSource.prototype.sort=function(e,t,i){return n.FlattenedTreeDataGridDataSource.superclass.getWrappedDataSource.call(this).sort(e,{success:function(){this._handleSortSuccess(t,i)}.bind(this),error:t.error})},n.FlattenedTreeDataGridDataSource.prototype._handleSortSuccess=function(e,t){this.refresh(),e.success&&(null==t&&(t={}),e.success.call(t.success))},n.FlattenedTreeDataGridDataSource.prototype.move=function(e,t,i,o){n.FlattenedTreeDataGridDataSource.superclass.getWrappedDataSource.call(this).move(e,t,i,o)},n.FlattenedTreeDataGridDataSource.prototype.getCapability=function(e){return"default"===n.FlattenedTreeDataGridDataSource.superclass.getWrappedDataSource.call(this).getCapability(e)?"column":"none"},n.FlattenedTreeDataGridDataSource.prototype.insertMetadata=function(e,t){n.FlattenedTreeDataGridDataSource.superclass.insertMetadata.call(this,e,t)},n.FlattenedTreeDataGridDataSource.prototype._handleFetchRowsSuccess=function(e,t,i,o){for(var s,r,a,l,u=0;u<t.length;u++){var d=t[u];"row"===d.axis?(s=d.start,r=d.count):"column"===d.axis&&(a=d.start)+(l=d.count)>this.getCount("column")&&(l=this.getCount("column")-a)}if(this.m_fetchHeaderRequest){var h=this.m_fetchHeaderRequest.range;h.start===s&&h.count===r&&(this._handleRowHeaderFetchSuccess(e,h,this.m_fetchHeaderRequest.callbacks,this.m_fetchHeaderRequest.callbackObjects),this.m_fetchHeaderRequest=null)}var c=new n.FlattenedTreeCellSet(s,s+r,a,a+l,e,this.m_columns);i.success&&(null==o&&(o={}),i.success.call(o.success,c,t))},n.FlattenedTreeDataGridDataSource.prototype._handleFetchRowsError=function(e,t,i,n){if(this.m_fetchHeaderRequest){var o=this.m_fetchHeaderRequest.range;if(o.start===t.start&&o.count===t.count){var s=this.m_fetchHeaderRequest.callbacks,r=this.m_fetchHeaderRequest.callbackObjects;s.error&&(null==r&&(r={}),s.error.call(r.error,e))}this.m_fetchHeaderRequest=null}i.error&&(null==n&&(n={}),i.success.call(n.error,e))},n.FlattenedTreeDataGridDataSource.prototype._handleRowHeaderFetchSuccess=function(e,t,i,o){var s=new n.FlattenedTreeHeaderSet(t.start,t.start+t.count,this.m_columns,e,this.m_rowHeader);i.success&&(null==o&&(o={}),i.success.call(o.success,s,t,null))},n.FlattenedTreeDataGridDataSource.prototype.insertRows=function(e,t,i){var o=null;this.m_rowHeader&&(o=new n.FlattenedTreeHeaderSet(e,e+i.getCount(),this.m_columns,i,this.m_rowHeader));for(var s=new n.FlattenedTreeCellSet(e,e+i.getCount(),0,this.m_columns.length,i,this.m_columns),r=[],a=[],l=0;l<i.getCount();l++)r.push({row:this._getEntry(e+l).key}),a.push({row:e+l,column:-1});var u={};u.source=this,u.operation="insert",u.result=s,o&&(u.header=o),u.keys=r,u.indexes=a,n.FlattenedTreeDataGridDataSource.superclass.handleEvent.call(this,"change",u)},n.FlattenedTreeDataGridDataSource.prototype.removeRows=function(e){for(var t=[],i=[],o=0;o<e.length;o++)t.push({row:e[o].key}),i.push({row:e[o].index,column:-1});var s={};s.source=this,s.operation="delete",s.keys=t,s.indexes=i,n.FlattenedTreeDataGridDataSource.superclass.handleEvent.call(this,"change",s)},n.FlattenedTreeDataGridDataSource.prototype.handleMaxCountReached=function(e,t){var i=new n.EmptyNodeSet(null,e.start);t.success.call(null,i)},n.FlattenedTreeHeaderSet=function(e,t,i,o,s){n.Assert.assertArrayOrNull(i),this.m_start=e,this.m_end=t,this.m_headers=i,this.m_nodeSet=o,this.m_rowHeader=s},n.FlattenedTreeHeaderSet.prototype.getData=function(e,t){var i;return n.Assert.assert(e<=this.m_end&&e>=this.m_start,"index out of bounds"),n.Assert.assert(null==t||0===t,"level out of bounds"),null!=this.m_rowHeader&&null!=this.m_nodeSet?null!=(i=this.m_nodeSet.getData(e-this.m_start+this.m_nodeSet.getStart()))?i.get?i.get(this.m_rowHeader):i[this.m_rowHeader]:null:this.m_headers[e]},n.FlattenedTreeHeaderSet.prototype.getMetadata=function(e,t){return n.Assert.assert(e<=this.m_end&&e>=this.m_start,"index out of bounds"),n.Assert.assert(null==t||0===t,"level out of bounds"),null!=this.m_rowHeader&&null!=this.m_nodeSet?this.m_nodeSet.getMetadata(e-this.m_start+this.m_nodeSet.getStart()):{key:this.getData(e)}},n.FlattenedTreeHeaderSet.prototype.getCount=function(){return null!=this.m_rowHeader&&null!=this.m_nodeSet?Math.min(this.m_nodeSet.getCount(),this.m_end-this.m_start):Math.max(0,this.m_end-this.m_start)},n.FlattenedTreeHeaderSet.prototype.getLevelCount=function(){return this.getCount()>0?1:0},n.FlattenedTreeHeaderSet.prototype.getExtent=function(e,t){return n.Assert.assert(e<=this.m_end&&e>=this.m_start,"index out of bounds"),n.Assert.assert(null==t||0===t,"level out of bounds"),{extent:1,more:{before:!1,after:!1}}},n.FlattenedTreeHeaderSet.prototype.getDepth=function(e,t){return n.Assert.assert(e<=this.m_end&&e>=this.m_start,"index out of bounds"),n.Assert.assert(null==t||0===t,"level out of bounds"),1},n.FlattenedTreeHeaderSet.prototype.getLabel=function(){return null},n.FlattenedTreeTableDataSource=function(e,t){var i=t||{};if(!(e instanceof n.FlattenedTreeDataSource)){var o=n.TableDataSource._LOGGER_MSG._ERR_DATA_INVALID_TYPE_SUMMARY,s=n.TableDataSource._LOGGER_MSG._ERR_DATA_INVALID_TYPE_DETAIL;throw new Error(o+"\n"+s)}this._data=e,this._eventHandlers=[],this._startIndex=0,this._nodeSetList=[],this._hasMore=!0,null==this._data.getOption("fetchSize")&&(this._data.getFetchSize=function(){return-1});var r=this;this._data.insertRows=function(e,t,i){for(var o=[],s=[],a=[],l=0;l<i.getCount();l++){var u=i.getData(l),d=i.getMetadata(l).key,h=e+l;r._nodeSetList.splice(h,0,{}),r._nodeSetList[h].nodeSet=i,r._nodeSetList[h].startIndex=e;for(var c=h+1;c<r._nodeSetList.length;c++)r._nodeSetList[c].startIndex+=1;o.push(r._wrapWritableValue(u)),s.push(d),a.push(h),r._rows.data.splice(h,0,u),r._rows.keys.splice(h,0,d),r._rows.indexes.splice(h,0,h)}r._realignRowIndices(),r._hasMore=!0,n.TableDataSource.superclass.handleEvent.call(r,n.TableDataSource.EventType.ADD,{data:o,keys:s,indexes:a})},this._data.removeRows=function(e){for(var t=[],i=[],o=[],s=e.length-1;s>=0;s--){var a=e[s].index;t.push(""),i.push(e[s].key),o.push(a),r._nodeSetList.splice(a,1);for(var l=a;l<r._nodeSetList.length;l++)r._nodeSetList[l].startIndex-=1;r._rows.data.splice(a,1),r._rows.keys.splice(a,1),r._rows.indexes.splice(a,1)}o=o.sort(function(e,t){return e-t}),r._realignRowIndices(),r._hasMore=!0,n.TableDataSource.superclass.handleEvent.call(r,n.TableDataSource.EventType.REMOVE,{data:t,keys:i,indexes:o})},this.Init(),(null==i||"enabled"!==i.startFetch&&null!=i.startFetch)&&null!=i||(this._startFetchEnabled=!0)},n.Object.createSubclass(n.FlattenedTreeTableDataSource,n.TableDataSource,"oj.FlattenedTreeTableDataSource"),n.FlattenedTreeTableDataSource.prototype.Init=function(){n.FlattenedTreeTableDataSource.superclass.Init.call(this)},n.FlattenedTreeTableDataSource.prototype.getCapability=function(e){return"full"},n.FlattenedTreeTableDataSource.prototype.getWrappedDataSource=function(){return this._data},n.FlattenedTreeTableDataSource.prototype.fetch=function(e){var t=e||{};return"init"!==t.fetchType||this._startFetchEnabled?this._fetchInternal(t):Promise.resolve()},n.FlattenedTreeTableDataSource.prototype.at=function(e,t){var i;return i=e<0||e>=this._rows.data.length?null:{data:this._rows.data[e],index:e,key:this._rows.keys[e]},new Promise(function(e){e(i)})},n.FlattenedTreeTableDataSource.prototype.collapse=function(e){this._data.collapse(e)},n.FlattenedTreeTableDataSource.prototype.expand=function(e){this._data.expand(e)},n.FlattenedTreeTableDataSource.prototype.get=function(e,t){var i=this._data.getIndex(e),n=this._rows.data[i],o={data:this._wrapWritableValue(n),key:e,index:i};return Promise.resolve(o)},n.FlattenedTreeTableDataSource.prototype.on=function(e,t){"expand"===e||"collapse"===e?this._data.on(e,t):n.FlattenedTreeTableDataSource.superclass.on.call(this,e,t)},n.FlattenedTreeTableDataSource.prototype.off=function(e,t){"expand"===e||"collapse"===e?this._data.off(e,t):n.FlattenedTreeTableDataSource.superclass.off.call(this,e,t)},n.FlattenedTreeTableDataSource.prototype.sort=function(e){null==e?e=this.sortCriteria:this.sortCriteria=e;var t=this;return e.axis="column",new Promise(function(i,o){t._data.getWrappedDataSource().sort(e,{success:function(){setTimeout(function(){t._data.refresh(),t._rows=null;var o={header:e.key,direction:e.direction};n.TableDataSource.superclass.handleEvent.call(t,n.TableDataSource.EventType.RESET,null),i(o)},0)},error:function(e){o(e)}})})},n.FlattenedTreeTableDataSource.prototype.totalSize=function(){return this._hasMore?-1:this._rows.data.length},n.FlattenedTreeTableDataSource.prototype.totalSizeConfidence=function(){return this._hasMore?"unknown":"actual"},n.FlattenedTreeTableDataSource.prototype._getMetadata=function(e){var t=this._nodeSetList[e].nodeSet.getStart();return this._nodeSetList[e].nodeSet.getMetadata(t+e-this._nodeSetList[e].startIndex)},n.FlattenedTreeTableDataSource.prototype._fetchInternal=function(e){var t=e||{};this._startFetch(t),this._startIndex=null==t.startIndex?this._startIndex:t.startIndex;var i=Number.MAX_VALUE;this._pageSize=null==t.pageSize?this._pageSize:t.pageSize,null!=this._pageSize&&(i=this._pageSize);var o=this._startIndex;if(null!=this._rows)if(null!=this._pageSize){var s=this._rows.data.length-1;if(this._startIndex+(this._pageSize-1)<=s){s=n.FlattenedTreeTableDataSource._getEndIndex(this._rows,this._startIndex,this._pageSize);for(var r=[],a=[],l=this._startIndex;l<=s;l++){var u=this._rows.keys[l];r[l-this._startIndex]=this._wrapWritableValue(this._rows.data[l]),a[l-this._startIndex]=u}var d={data:r,keys:a,startIndex:this._startIndex};return this._endFetch(t,d,null),Promise.resolve(d)}this._startIndex<=s&&(o=s+1)}else this._data.refresh(),this._rows=null;else o=0;var h={start:o,count:i},c=this;return new Promise(function(e,i){c._data.fetchRows(h,{success:function(i){c._handleFetchRowsSuccess(i),t.refresh=!0;for(var o=n.FlattenedTreeTableDataSource._getEndIndex(c._rows,c._startIndex,c._pageSize),s=[],r=[],a=c._startIndex;a<=o;a++){var l=c._rows.keys[a];s[a-c._startIndex]=c._wrapWritableValue(c._rows.data[a]),r[a-c._startIndex]=l}s.length>0?null!=c._pageSize&&s.length<c._pageSize?c._hasMore=!1:c._hasMore=!0:c._hasMore=!1;var u={data:s,keys:r,startIndex:c._startIndex};c._endFetch(t,u,null),e(u)},error:function(e){c._endFetch(t,null,e),i(e)}})})},n.FlattenedTreeTableDataSource.prototype._handleFetchRowsSuccess=function(e){for(var t=e.getStart(),i=0;i<e.getCount();i++){var o=t+i;this._nodeSetList[o]={},this._nodeSetList[o].nodeSet=e,this._nodeSetList[o].startIndex=t}this._rows||(this._rows={},this._rows.data=[],this._rows.keys=[],this._rows.indexes=[]),n.FlattenedTreeTableDataSource._getRowArray(e,this,this._rows,t)},n.FlattenedTreeTableDataSource.prototype._startFetch=function(e){e.silent||n.TableDataSource.superclass.handleEvent.call(this,n.TableDataSource.EventType.REQUEST,{startIndex:e.startIndex})},n.FlattenedTreeTableDataSource.prototype._endFetch=function(e,t,i){null!=i?n.TableDataSource.superclass.handleEvent.call(this,n.TableDataSource.EventType.ERROR,i):e.silent||n.TableDataSource.superclass.handleEvent.call(this,n.TableDataSource.EventType.SYNC,t)},n.FlattenedTreeTableDataSource._getEndIndex=function(e,t,i){var n=e.data.length-1;return i>0&&(n=(n=t+(i-1))>e.data.length-1?e.data.length-1:n),n},n.FlattenedTreeTableDataSource._getRowArray=function(e,t,i,n){for(var o=0;o<e.getCount();o++){var s=e.getData(e.getStart()+o);i.data[n+o]=s,i.keys[n+o]=e.getMetadata(e.getStart()+o).key,i.indexes[n+o]=n+o}},n.FlattenedTreeTableDataSource.prototype._realignRowIndices=function(){for(var e=0;e<this._rows.data.length;e++)this._rows.indexes[e]=e},n.FlattenedTreeTableDataSource.prototype._wrapWritableValue=function(e){for(var t=$.extend(!0,{},e),i=Object.keys(e),o=0;o<i.length;o++)n.FlattenedTreeTableDataSource._defineProperty(t,e,i[o]);return t},n.FlattenedTreeTableDataSource._defineProperty=function(e,t,i){Object.defineProperty(e,i,{get:function(){return t[i]},set:function(e){t[i]=e},enumerable:!0})};var Qi={properties:{direction:{type:"string",enumValues:["column","row"],value:"column"},labelEdge:{type:"string",enumValues:["start","top"],value:"top"},labelWidth:{type:"string",value:"33%"},labelWrapping:{type:"string",enumValues:["truncate","wrap"],value:"wrap"},maxColumns:{type:"number",value:1}},methods:{setProperty:{},getProperty:{},setProperties:{},refresh:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};Object.freeze(Qi);var en=0;function tn(t){var i,n,o,s,r,a,l=this,u=t.element,d="-labelled-by",h="data-oj-formlayout-bonus-dom",p="["+h+"]",_=!0,m=!1;function g(){n&&(n(),n=null)}function f(){i&&(i(),i=null)}function v(e){var t=null;return e instanceof Element&&"labelHint"in e&&(w(e),t=function(e){var t=e.tagName.toLowerCase(),i=document.createElement("oj-label");i.setAttribute(h,""),i.setAttribute("data-oj-internal",""),i.setAttribute("data-oj-binding-provider","none"),i.setAttribute("data-oj-context",""),"start"!==u.labelEdge||"oj-checkboxset"!==t&&"oj-radioset"!==t||i.classList.add(t+"-label");var n=document.createElement("span");return n.id=e.id+"|hint",n.textContent=e.labelHint,i.appendChild(n),function(e,t){var i=e,n=t;"labelledBy"in n?(i.id=n.id+d,n.labelledBy=i.id):i.setAttribute("for",n.id)}(i,e),i}(e),e.parentElement.insertBefore(t,e),function(e,t){var i=t;c.getContext(i).getBusyContext().whenReady().then(function(){var t=e.helpHints;t&&(t.definition||t.source)&&(i.help=t),i.showRequired=e.required})}(e,t),function(e){e.addEventListener("labelHintChanged",y),e.addEventListener("helpHintsChanged",b),e.addEventListener("requiredChanged",C)}(e)),t}function y(e){var t=e.target,i=document.getElementById(t.id+"|hint");i&&(i.innerText=e.detail.value)}function b(e){var t=S(e.target);t&&(t.help=e.detail.value)}function C(e){var t=S(e.target);t&&(t.showRequired=e.detail.value)}function S(e){return"labelledBy"in e?document.getElementById(e.labelledBy):u.querySelector('oj-label[for="'+e.id+'"]')}function E(e,t){var i=1;return"column"===u.direction?"100%":(e&&"colspan"in e&&e.colspan&&(i=Math.min(Math.floor(e.colspan),t)),Math.floor(1e5/u.maxColumns)/1e3*i+"%")}function T(e,t){var i=A("oj-flex-item");return i.style.webkitFlex="0 1 "+t,i.style.flex="0 1 "+t,i.style.maxWidth=t,i.style.width=t,e.appendChild(i),i}function D(e,t,i,n){var o,s;o=i?A("oj-flex"):e.previousElementSibling;var l=t?function(){if(!a&&(a=r,"start"===u.labelEdge&&"row"===u.direction)){var e=u.labelWidth.match(/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/);switch(e[2]){case"vw":case"vmin":case"vmax":case"%":a=e[1]/u.maxColumns+e[2]}}return a}():E(e,n);t||(s=T(o,"0px"));var d=A("oj-flex-item");if(o.appendChild(d),e.parentElement.insertBefore(o,e),d.appendChild(e),d.style.flex="0 0 "+l,d.style.maxWidth=l,d.style.width=l,t){var h=A("oj-flex-item");o.appendChild(h),"row"===u.direction&&"top"===u.labelEdge&&(h.appendChild(e),d.style.webkitFlex="0 1 0px",d.style.flex="0 1 0px",d.style.maxWidth="0px",d.style.width="0px",d.classList.add("oj-formlayout-label-comp-flex-item"),h.classList.add("oj-formlayout-label-comp-flex-item")),h.appendChild(t),h.style.webkitFlex="1 1 0",h.style.flex="1 1 0"}else s.classList.add("oj-formlayout-no-label-flex-item"),d.classList.add("oj-formlayout-no-label-flex-item"),"OJ-LABEL-VALUE"===e.tagName&&(e.setAttribute("data-oj-colspan",n),e.refresh());return o}function A(e){var t=document.createElement("div");return t.setAttribute(h,""),t.setAttribute("data-oj-internal",""),t.classList.add(e),t}function I(e){for(var t=e,i=!0;t!==u;){if("OJ-FORM-LAYOUT"===t.tagName){i=!1;break}if(null==(t=t.parentElement)){i=!1;break}}return i}function O(e){for(;e.firstElementChild;)e.parentNode.insertBefore(e.firstElementChild,e);e.parentNode.removeChild(e)}function w(e){var t=e;t.id||(t.id="oflId_"+en,en+=1)}l._rootElementMutationObserver=new MutationObserver(function(e){document.body.contains(u)?(!function(e){for(var t=e.length,i=0;i<t;i++){var n=e[i];if("childList"===n.type)for(var s=n.addedNodes.length,r=0;r<s;r++){var a=n.addedNodes[r];a.parentNode===u&&o.appendChild(a)}}}(e),function(e){for(var t=!0,i=e.length,n=0;n<i;n++){var o=e[n];if("childList"===o.type&&((s=o.target)===u||s&&"DIV"===s.tagName&&s.hasAttribute(h))&&I(o.target)){t=!1;break}if("attributes"===o.type&&"colspan"===o.attributeName){t=!1;break}}var s;return t}(e)||(!function(e){for(var t=e.length,i=0;i<t;i++){var n=e[i];if("childList"===n.type)for(var o=n.removedNodes.length,s=0;s<o;s++){var r=n.removedNodes[s];1===r.nodeType&&(r.removeEventListener("labelHintChanged",y),r.removeEventListener("helpHintsChanged",b),r.removeEventListener("requiredChanged",C))}}}(e),u.refresh())):this.disconnect()}),this.createDOM=function(){for(u.classList.add("oj-form-layout"),(o=document.createElement("div")).classList.add("oj-form"),o.setAttribute("data-oj-context",""),o.setAttribute("data-oj-internal",""),o.setAttribute(h,"");u.firstChild;)o.appendChild(u.firstChild);u.appendChild(o)},this.updateDOM=function(){function t(){!function(){if(!n){var e=c.getContext(u).getBusyContext(),t={description:"The oj-form-layout component with id = '"+u.id+"' is being rendered."};n=e.addBusyState(t)}}(),s=[],a=null,r="start"===u.labelEdge?u.labelWidth:"100%",c.getContext(o).getBusyContext().whenReady().then(function(){!function(){if(!i){var e=c.getContext(o).getBusyContext(),t={description:"The oj-form div for oj-form-layout component with id = '"+u.id+"' is being rendered."};i=e.addBusyState(t)}}(),l._rootElementMutationObserver.disconnect(),function(){var e=u.maxColumns;if("start"===u.labelEdge){var t=parseInt(u.labelWidth,10);(isNaN(t)||t>0)&&o.classList.add("oj-form-cols-labels-inline"),o.classList.add("oj-formlayout-labels-inline"),o.classList.remove("oj-form-cols")}else o.classList.add("oj-form-cols"),o.classList.remove("oj-form-cols-labels-inline"),o.classList.remove("oj-formlayout-labels-inline");"truncate"===u.labelWrapping?o.classList.add("oj-formlayout-labels-nowrap"):o.classList.remove("oj-formlayout-labels-nowrap");"row"===u.direction?(e=1,o.classList.add("oj-formlayout-form-across")):(e=u.maxColumns,o.classList.remove("oj-formlayout-form-across"));o.style.columnCount=e,o.style.webkitColumnCount=e,o.style.MozColumnCount=e}(),_||function(){for(var e=o.querySelectorAll(p),t=e.length,i=0;i<t;++i){var n=e[i];I(n)&&("OJ-LABEL"===n.tagName?n.parentElement.removeChild(n):O(n))}}(),function(){var e=o.firstElementChild,t=0,i="column"===u.direction;for(;e;){var n=e.tagName.toLowerCase();if(-1!==n.indexOf("-"))if("oj-label"===n){var r=e;if(!(e=e.nextElementSibling))throw w(u),w(r),f(),g(),new Error("oj-form-layout component with id='"+u.id+"' has an oj-label child element with id='"+r.id+"' but has no next sibling element that it is associated with.")}else"oj-label-value"===n?_||e.refresh():e.classList.contains("oj-complete")?v(e):((i||t%u.maxColumns==0)&&e.setAttribute("data-oj-needs-oj-flex-div",""),s.push(e));t+=1,e=e.nextElementSibling}}(),function(){var t,i=[],n=o.children.length,r="column"===u.direction,a=0,l=0;!function(e,t){for(var i=t,n=e.length-1;n>=0;n--)i[n]=e[n]}(o.children,i);var d,h=u.maxColumns,c=0,p=!1,_=!1;for(;a<n;){var m=i[a];if(d=1,-1===s.indexOf(m)){var g=m.tagName.toLowerCase();if("oj-label"===g){var f=i[a+=1];t=D(m,f,r||l%h==0)}else"colspan"in m&&m.colspan&&(r?p||(e.error('Colspan attribute is ignored unless direction is set to "row"'),p=!0):(d=Math.min(Math.floor(m.colspan),h-c),!_&&h>1&&(_=!0))),t=D(m,null,r||l%h==0,d)}c=(l+=d)%h,a+=1}_&&!r?o.classList.add("oj-form-control-full-width"):o.classList.remove("oj-form-control-full-width");!function(e,t){var i=u.maxColumns,n=t%i,o=E();if("column"!==u.direction&&e&&n>0)for(var s=n;s<i;s++)T(e,o)}(t,l)}(),l._rootElementMutationObserver.observe(u,{childList:!0,subtree:!0,attributes:!0}),f(),g(),_&&(_=!1)})}var d;m||(!(_||!u.hasAttribute("data-oj-context"))&&!(d=c.getContext(u).getBusyContext()).isReady()?(m=!0,d.whenReady().then(function(){m=!1,t()})):t())}}Qi.extension._CONSTRUCTOR=tn,n.CustomElementBridge.register("oj-form-layout",{metadata:Qi});var nn={properties:{animationOnDataChange:{type:"string",enumValues:["auto","none"],value:"none"},animationOnDisplay:{type:"string",enumValues:["auto","none"],value:"none"},as:{type:"string",value:""},axisPosition:{type:"string",enumValues:["bottom","top"],value:"top"},dependencies:{type:"Array<Object>|Promise"},dependencyData:{type:"oj.DataProvider"},dnd:{type:"object",properties:{move:{type:"object",properties:{tasks:{type:"string",enumValues:["disabled","enabled"],value:"disabled"}}}}},end:{type:"string",value:""},gridlines:{type:"object",properties:{horizontal:{type:"string",enumValues:["auto","hidden","visible"],value:"auto"},vertical:{type:"string",enumValues:["auto","hidden","visible"],value:"auto"}}},majorAxis:{type:"object",properties:{converter:{type:"object",value:"{\"default\": null, \"seconds\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'hour': 'numeric', 'minute': '2-digit', 'second': '2-digit'}), \"minutes\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'hour': 'numeric', 'minute': '2-digit'}), \"hours\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'hour': 'numeric'}), \"days\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'month': 'numeric', 'day': '2-digit'}), \"weeks\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'month': 'numeric', 'day': '2-digit'}), \"months\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'month': 'long'}), \"quarters\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'month': 'long'}), \"years\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'year': 'numeric'})}",properties:{default:{type:"oj.Converter<string>"},seconds:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour: numeric, minute: 2-digit, second: 2-digit})"},minutes:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour: numeric, minute: 2-digit})"},hours:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour: numeric})"},days:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month: numeric, day: 2-digit})"},weeks:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month: numeric, day: 2-digit})"},months:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month: long})"},quarters:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month: long})"},years:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({year: numeric})"}}},height:{type:"number"},scale:{type:"string",enumValues:["days","hours","minutes","months","quarters","seconds","weeks","years"]},zoomOrder:{type:"Array<string>"}}},minorAxis:{type:"object",properties:{converter:{type:"object",value:"{\"default\": null, \"seconds\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'hour': 'numeric', 'minute': '2-digit', 'second': '2-digit'}), \"minutes\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'hour': 'numeric', 'minute': '2-digit'}), \"hours\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'hour': 'numeric'}), \"days\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'month': 'numeric', 'day': '2-digit'}), \"weeks\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'month': 'numeric', 'day': '2-digit'}), \"months\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'month': 'long'}), \"quarters\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'month': 'long'}), \"years\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'year': 'numeric'})}",properties:{default:{type:"oj.Converter<string>"},seconds:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour: numeric, minute: 2-digit, second: 2-digit})"},minutes:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour: numeric, minute: 2-digit})"},hours:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour: numeric})"},days:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month: numeric, day: 2-digit})"},weeks:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month: numeric, day: 2-digit})"},months:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month: long})"},quarters:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month: long})"},years:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({year: numeric})"}}},height:{type:"number"},scale:{type:"string",enumValues:["days","hours","minutes","months","quarters","seconds","weeks","years"]},zoomOrder:{type:"Array<string>"}}},referenceObjects:{type:"Array<Object>",value:[]},rowAxis:{type:"object",properties:{label:{type:"object",properties:{renderer:{type:"function",properties:{parentElement:{type:"Element"},rowData:{type:"oj.ojGantt.Row"},itemData:{type:"Array<Object>"},componentElement:{type:"Element"},maxWidth:{type:"number"},maxHeight:{type:"number"}}}}},maxWidth:{type:"string",value:"none"},rendered:{type:"string",enumValues:["off","on"],value:"off"},width:{type:"string",value:"max-content"}}},rowDefaults:{type:"object",properties:{height:{type:"number"}}},rows:{type:"Array<Object>|Promise"},scrollPosition:{type:"object",writeback:!0,value:{y:0},properties:{offsetY:{type:"number"},rowIndex:{type:"number"},y:{type:"number",value:0}}},selection:{type:"Array<any>",writeback:!0,value:[]},selectionMode:{type:"string",enumValues:["multiple","none","single"],value:"none"},start:{type:"string",value:""},taskData:{type:"oj.DataProvider"},taskDefaults:{type:"object",properties:{baseline:{type:"object",properties:{borderRadius:{type:"string",value:"0"},height:{type:"number"},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}}}},borderRadius:{type:"string",value:"0"},height:{type:"number"},labelPosition:{type:"string|Array<string>",enumValues:["end","innerCenter","innerEnd","innerStart","none","start"],value:["end","innerCenter","start","max"]},progress:{type:"object",properties:{borderRadius:{type:"string",value:"0"},height:{type:"string",value:"100%"},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}}}},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}},type:{type:"string",enumValues:["auto","milestone","normal","summary"],value:"auto"}}},tooltip:{type:"object",properties:{renderer:{type:"function",properties:{parentElement:{type:"Element"},data:{type:"oj.ojGantt.RowTask"},rowData:{type:"oj.ojGantt.Row"},itemData:{type:"object"},componentElement:{type:"Element"},color:{type:"string"}}}}},trackResize:{type:"string",enumValues:["off","on"],value:"on"},translations:{type:"object",value:{},properties:{accessibleDependencyInfo:{type:"string"},accessiblePredecessorInfo:{type:"string"},accessibleSuccessorInfo:{type:"string"},accessibleTaskTypeMilestone:{type:"string"},accessibleTaskTypeSummary:{type:"string"},componentName:{type:"string"},finishFinishDependencyAriaDesc:{type:"string"},finishStartDependencyAriaDesc:{type:"string"},labelAndValue:{type:"string"},labelBaselineDate:{type:"string"},labelBaselineEnd:{type:"string"},labelBaselineStart:{type:"string"},labelClearSelection:{type:"string"},labelCountWithTotal:{type:"string"},labelDataVisualization:{type:"string"},labelDate:{type:"string"},labelEnd:{type:"string"},labelInvalidData:{type:"string"},labelLabel:{type:"string"},labelMoveBy:{type:"string"},labelNoData:{type:"string"},labelProgress:{type:"string"},labelRow:{type:"string"},labelStart:{type:"string"},startFinishDependencyAriaDesc:{type:"string"},startStartDependencyAriaDesc:{type:"string"},stateCollapsed:{type:"string"},stateDrillable:{type:"string"},stateExpanded:{type:"string"},stateHidden:{type:"string"},stateIsolated:{type:"string"},stateMaximized:{type:"string"},stateMinimized:{type:"string"},stateSelected:{type:"string"},stateUnselected:{type:"string"},stateVisible:{type:"string"},taskMoveCancelled:{type:"string"},taskMoveFinalized:{type:"string"},taskMoveInitiated:{type:"string"},taskMoveInitiatedInstruction:{type:"string"},taskMoveSelectionInfo:{type:"string"},tooltipZoomIn:{type:"string"},tooltipZoomOut:{type:"string"}}},valueFormats:{type:"object",properties:{baselineDate:{type:"object",properties:{converter:{type:"object"},tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}},baselineEnd:{type:"object",properties:{converter:{type:"object"},tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}},baselineStart:{type:"object",properties:{converter:{type:"object"},tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}},date:{type:"object",properties:{converter:{type:"object"},tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}},end:{type:"object",properties:{converter:{type:"object"},tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}},label:{type:"object",properties:{tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}},progress:{type:"object",properties:{converter:{type:"object",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_NUMBER).createConverter({style: 'percent'})"},tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}},row:{type:"object",properties:{tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}},start:{type:"object",properties:{converter:{type:"object"},tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}}}},viewportEnd:{type:"string",value:""},viewportStart:{type:"string",value:""}},methods:{getContextByNode:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojViewportChange:{},ojMove:{}},extension:{}},on={properties:{predecessorTaskId:{type:"any"},shortDesc:{type:"string"},successorTaskId:{type:"any"},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}},type:{type:"string",enumValues:["finishFinish","finishStart","startFinish","startStart"],value:"finishStart"}},extension:{}},sn={properties:{label:{type:"string",value:""},labelStyle:{type:"object",value:{}}},extension:{}},rn={properties:{baseline:{type:"object",properties:{borderRadius:{type:"string"},end:{type:"string",value:""},height:{type:"number"},start:{type:"string",value:""},svgClassName:{type:"string"},svgStyle:{type:"object"}}},borderRadius:{type:"string"},end:{type:"string",value:""},height:{type:"number"},label:{type:"string",value:""},labelPosition:{type:"string|Array<string>",enumValues:["end","innerCenter","innerEnd","innerStart","none","start"]},labelStyle:{type:"object",value:{}},progress:{type:"object",properties:{borderRadius:{type:"string"},height:{type:"string"},svgClassName:{type:"string"},svgStyle:{type:"object"},value:{type:"number"}}},rowId:{type:"any"},shortDesc:{type:"string"},start:{type:"string",value:""},svgClassName:{type:"string"},svgStyle:{type:"object"},type:{type:"string",enumValues:["auto","milestone","normal","summary"]}},extension:{}};n.__registerWidget("oj.ojGantt",$.oj.dvtTimeComponent,{widgetEventPrefix:"oj",options:{axisPosition:"top",animationOnDataChange:"none",animationOnDisplay:"none",as:"",dependencies:null,dependencyData:null,dnd:{move:{tasks:"disabled"}},end:"",gridlines:{horizontal:"auto",vertical:"auto"},minorAxis:{converter:{default:null,seconds:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric",minute:"2-digit",second:"2-digit"}),minutes:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric",minute:"2-digit"}),hours:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric"}),days:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"numeric",day:"2-digit"}),weeks:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"numeric",day:"2-digit"}),months:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"long"}),quarters:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"long"}),years:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({year:"numeric"})},height:null,scale:null,zoomOrder:null},majorAxis:{converter:{default:null,seconds:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric",minute:"2-digit",second:"2-digit"}),minutes:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric",minute:"2-digit"}),hours:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric"}),days:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"numeric",day:"2-digit"}),weeks:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"numeric",day:"2-digit"}),months:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"long"}),quarters:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"long"}),years:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({year:"numeric"})},height:null,scale:null,zoomOrder:null},referenceObjects:[],rowAxis:{rendered:"off",maxWidth:"none",width:"max-content",label:{renderer:null}},rowDefaults:{height:null},rows:null,scrollPosition:{y:0,rowIndex:null,offsetY:null},selection:[],selectionMode:"none",start:"",taskData:null,taskDefaults:{borderRadius:"0",labelPosition:["end","innerCenter","start","max"],height:null,svgClassName:"",svgStyle:{},type:"auto",progress:{borderRadius:"0",height:"100%",svgClassName:"",svgStyle:{}},baseline:{borderRadius:"0",height:null,svgClassName:"",svgStyle:{}}},tooltip:{renderer:null},valueFormats:{row:{tooltipLabel:void 0,tooltipDisplay:"auto"},start:{converter:null,tooltipLabel:void 0,tooltipDisplay:"auto"},end:{converter:null,tooltipLabel:void 0,tooltipDisplay:"auto"},date:{converter:null,tooltipLabel:void 0,tooltipDisplay:"auto"},label:{tooltipLabel:void 0,tooltipDisplay:"auto"},progress:{converter:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_NUMBER).createConverter({style:"percent"}),tooltipLabel:void 0,tooltipDisplay:"auto"},baselineStart:{converter:null,tooltipLabel:void 0,tooltipDisplay:"auto"},baselineEnd:{converter:null,tooltipLabel:void 0,tooltipDisplay:"auto"},baselineDate:{converter:null,tooltipLabel:void 0,tooltipDisplay:"auto"}},viewportEnd:"",viewportStart:"",viewportChange:null,move:null},_CreateDvtComponent:function(e,t,i){return e.styleClasses=this._getComponentStyleMap(),dvt.Gantt.newInstance(e,t,i)},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-gantt"),e},_getComponentStyleMap:function(){var e={databody:"oj-gantt-container",dependencyLine:"oj-gantt-dependency-line",dependencyLineConnector:"oj-gantt-dependency-line-connector",nodata:"oj-gantt-no-data-message",hgridline:"oj-gantt-horizontal-gridline",vgridline:"oj-gantt-vertical-gridline",majorAxis:"oj-gantt-major-axis",majorAxisTicks:"oj-gantt-major-axis-separator",majorAxisLabels:"oj-gantt-major-axis-label",minorAxis:"oj-gantt-minor-axis",minorAxisTicks:"oj-gantt-minor-axis-separator",minorAxisLabels:"oj-gantt-minor-axis-label",row:"oj-gantt-row",rowLabel:"oj-gantt-row-label",task:"oj-gantt-task",taskBar:"oj-gantt-task-bar",taskMilestone:"oj-gantt-task-milestone",taskSummary:"oj-gantt-task-summary",taskDragImage:"oj-gantt-task-drag-image",baseline:"oj-gantt-baseline",baselineBar:"oj-gantt-baseline-bar",baselineMilestone:"oj-gantt-baseline-milestone",taskLabel:"oj-gantt-task-label",taskProgress:"oj-gantt-task-progress",tooltipLabel:"oj-gantt-tooltip-label",tooltipValue:"oj-gantt-tooltip-value",tooltipTable:"oj-gantt-tooltip-content",referenceObject:"oj-gantt-reference-object",selected:"oj-selected",hover:"oj-hover",focus:"oj-focus",draggable:"oj-draggable",activeDrop:"oj-active-drop",invalidDrop:"oj-invalid-drop"};return e},_IsDraggable:function(){return this.options.dnd&&this.options.dnd.move&&"enabled"===this.options.dnd.move.tasks},_ConvertLocatorToSubId:function(e){var t=e.subId;return"oj-gantt-taskbar"===t?t="taskbar["+e.rowIndex+"]["+e.index+"]":"oj-gantt-row-label"===t?t="rowLabel["+e.index+"]":"oj-gantt-dependency"===t?t="dependency["+e.index+"]":"oj-gantt-tooltip"===t&&(t="tooltip"),t},_ConvertSubIdToLocator:function(e){var t,i={};return 0===e.indexOf("taskbar")?(t=this._GetIndexPath(e),i.subId="oj-gantt-taskbar",i.rowIndex=t[0],i.index=t[1]):0===e.indexOf("rowLabel")?(t=this._GetIndexPath(e),i.subId="oj-gantt-row-label",i.index=t[0]):0===e.indexOf("dependency")?(t=this._GetIndexPath(e),i.subId="oj-gantt-dependency",i.index=t[0]):"tooltip"===e&&(i.subId="oj-gantt-tooltip"),i},_GetChildStyleClasses:function(){var e=this._super();return e["oj-gantt"]={path:"_resources/animationDuration",property:"ANIM_DUR"},e["oj-gantt-zoomin-icon"]=[{path:"_resources/zoomIn_bgc",property:"background-color"},{path:"_resources/zoomIn_bc",property:"border-color"}],e["oj-gantt-zoomin-icon oj-hover"]=[{path:"_resources/zoomIn_h_bgc",property:"background-color"},{path:"_resources/zoomIn_h_bc",property:"border-color"}],e["oj-gantt-zoomin-icon oj-active"]=[{path:"_resources/zoomIn_a_bgc",property:"background-color"},{path:"_resources/zoomIn_a_bc",property:"border-color"}],e["oj-gantt-zoomin-icon oj-disabled"]=[{path:"_resources/zoomIn_d_bgc",property:"background-color"},{path:"_resources/zoomIn_d_bc",property:"border-color"}],e["oj-gantt-zoomout-icon"]=[{path:"_resources/zoomOut_bgc",property:"background-color"},{path:"_resources/zoomOut_bc",property:"border-color"}],e["oj-gantt-zoomout-icon oj-hover"]=[{path:"_resources/zoomOut_h_bgc",property:"background-color"},{path:"_resources/zoomOut_h_bc",property:"border-color"}],e["oj-gantt-zoomout-icon oj-active"]=[{path:"_resources/zoomOut_a_bgc",property:"background-color"},{path:"_resources/zoomOut_a_bc",property:"border-color"}],e["oj-gantt-zoomout-icon oj-disabled"]=[{path:"_resources/zoomOut_d_bgc",property:"background-color"},{path:"_resources/zoomOut_d_bc",property:"border-color"}],e["oj-gantt-major-axis-label"]={path:"_resources/majorAxisLabelFontProp",property:"TEXT"},e["oj-gantt-minor-axis-label"]={path:"_resources/minorAxisLabelFontProp",property:"TEXT"},e["oj-gantt-container"]={path:"_resources/chartArea/strokeWidth",property:"stroke-width"},e["oj-gantt-horizontal-gridline"]={path:"_resources/horizontalGridlineWidth",property:"stroke-width"},e["oj-gantt-task-label"]={path:"_resources/taskLabelFontProp",property:"TEXT"},e["oj-gantt-row-label"]={path:"_resources/rowLabelFontProp",property:"TEXT"},e},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtUtilBundle.GANTT"]=e.componentName,t["DvtUtilBundle.ZOOM_IN"]=e.tooltipZoomIn,t["DvtUtilBundle.ZOOM_OUT"]=e.tooltipZoomOut,t},_LoadResources:function(){this._super();var e=this.options._resources;e.zoomIn="oj-gantt-zoomin-icon",e.zoomIn_h="oj-gantt-zoomin-icon oj-hover",e.zoomIn_a="oj-gantt-zoomin-icon oj-active",e.zoomIn_d="oj-gantt-zoomin-icon oj-disabled",e.zoomOut="oj-gantt-zoomout-icon",e.zoomOut_h="oj-gantt-zoomout-icon oj-hover",e.zoomOut_a="oj-gantt-zoomout-icon oj-active",e.zoomOut_d="oj-gantt-zoomout-icon oj-disabled";var t=le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_NUMBER);e.percentConverter=t.createConverter({style:"percent"})},_HandleEvent:function(e){var t=e.type;if("viewportChange"===t){var i=new Date(e.viewportStart).toISOString(),n=new Date(e.viewportEnd).toISOString(),o=e.majorAxisScale,s=e.minorAxisScale,r={viewportStart:i,viewportEnd:n,majorAxisScale:o,minorAxisScale:s};this._UserOptionChange("viewportStart",i),this._UserOptionChange("viewportEnd",n),this._UserOptionChange("majorAxis.scale",o),this._UserOptionChange("minorAxis.scale",s),this._trigger("viewportChange",null,r)}else if("move"===t){var a={taskContexts:e.taskContexts,value:e.value,start:e.start,end:e.end,baselineStart:e.baselineStart,baselineEnd:e.baselineEnd,rowContext:e.rowContext};this._trigger("move",null,a)}else if("scrollPositionChange"===t){var l={y:e.y,rowIndex:e.rowIndex,offsetY:e.offsetY};this._UserOptionChange("scrollPosition",l),this._trigger("scrollPositionChange",null,l)}else this._super(e)},_GetComponentNoClonePaths:function(){var e=this._super();return e.start=!0,e.end=!0,e.viewportStart=!0,e.viewportEnd=!0,e.referenceObjects={value:!0},e},_GetComponentDeferredDataPaths:function(){return{root:["rows","dependencies","taskData","dependencyData"]}},_GetSimpleDataProviderConfigs:function(){return{dependencyData:{templateName:"dependencyTemplate",templateElementName:"oj-gantt-dependency",resultPath:"dependencies",expandedKeySet:new pi.ExpandAllKeySet},taskData:{templateName:"taskTemplate",templateElementName:"oj-gantt-task",resultPath:"rows",expandedKeySet:new pi.ExpandAllKeySet}}},_GetDataProviderSeriesConfig:function(){return{dataProperty:"taskData",idAttribute:"rowId",itemsKey:"tasks",templateName:"rowTemplate",templateElementName:"oj-gantt-row"}},getContextByNode:function(e){var t=this.getSubIdByNode(e);return t&&"oj-gantt-tooltip"!==t.subId?t:null}}),nn.extension._WIDGET_NAME="ojGantt",n.CustomElementBridge.register("oj-gantt",{metadata:nn}),on.extension._CONSTRUCTOR=function(){},n.CustomElementBridge.register("oj-gantt-dependency",{metadata:on}),rn.extension._CONSTRUCTOR=function(){},n.CustomElementBridge.register("oj-gantt-task",{metadata:rn}),sn.extension._CONSTRUCTOR=function(){},n.CustomElementBridge.register("oj-gantt-row",{metadata:sn});var an=function(){};an.computeTableColumnHeaderHeight=function(e,t,i){var o=0,s=i.majorAxis,r=i.minorAxis;function a(e,i){if(null==e)return 0;var n=e.height,o=an._getDefaultTimeAxisHeight(t,i);return isNaN(n)?o:Math.max(o,n)}return o+=a(s,"major"),o+=a(r,"minor"),o-=an._getTableHeaderHeight(e),n.AgentUtils.getAgentInfo().browser!==n.AgentUtils.BROWSER.EDGE&&n.AgentUtils.getAgentInfo().browser!==n.AgentUtils.BROWSER.IE||(o-=1),o},an._getTableHeaderHeight=function(e){var t=document.createElement("div");null!=e&&(t.className=e.className+" "),t.className=t.className+"oj-table oj-table-grid-display";var i=document.createElement("div");i.className="oj-table-header";var n=document.createElement("div");n.className="oj-table-header-row";var o=document.createElement("div");o.className="oj-table-column-header-cell",n.appendChild(o),i.appendChild(n),t.appendChild(i);var s=null!=e?e:document.body;s.appendChild(t);var r=window.getComputedStyle(o),a=parseInt(r.paddingTop,10),l=parseInt(r.paddingBottom,10),u=parseInt(r.borderTopWidth,10),d=parseInt(r.borderBottomWidth,10);r=window.getComputedStyle(i);var h=parseInt(r.borderBottomWidth,10),c=0;return c+=isNaN(a)?0:a,c+=isNaN(l)?0:l,c+=isNaN(u)?0:u,c+=isNaN(d)?0:d,c+=isNaN(h)?0:h,s.removeChild(t),c},an._getDefaultTimeAxisHeight=function(e,t){var i="oj-gantt-"+t+"-axis-label",n=document.createElement("div");null!=e&&(n.className=e.className+" "),n.className=n.className+"oj-gantt oj-dvtbase";var o=document.createElement("div");o.className=i,o.innerHTML="FooBar",n.appendChild(o);var s=null!=e?e:document.body;s.appendChild(n);var r=parseInt(window.getComputedStyle(o).height,10);s.removeChild(n);var a=Math.max(r+4,21);return Math.max(a,22)+1};var ln={};ln.stringToNodeArray=function(e){var t,i,n,o,s,r=["table","caption","colgroup","col","thead","tfoot","th","tbody","tr","td","template"];for(t=0;t<r.length;t++)i=r[t],n=e,void 0,void 0,o=new RegExp("<"+i+"(?=\\s|>)","gi"),s=new RegExp("</"+i+"(?=\\s|>)","gi"),e=n.replace(o,"<oj-bind-replace-"+i).replace(s,"</oj-bind-replace-"+i);var a=document.createElement("div");a.innerHTML=e,-1!==e.indexOf("<oj-bind-replace-")&&function e(t){var i=t.childNodes;var n=i.length;for(var o=0;o<n;o++){var s=i[o];e(s);var r,a,l,u=s.nodeName.toLowerCase();if("oj-bind-replace-"===u.substr(0,16)){var d=u.substr(16);for(l=document.createElement(d),r=0;r<s.attributes.length;r++)a=s.attributes[r],l.setAttribute(a.name,a.value);var h=l.content?l.content:l;for(r=0;s.childNodes.length>0;)h.appendChild(s.childNodes[0]);t.replaceChild(l,s)}else if("script"===u||"style"===u){for(l=document.createElement(u),r=0;r<s.attributes.length;r++)a=s.attributes[r],l.setAttribute(a.name,a.value);var c=s.innerHTML;l.innerHTML=c.replace(new RegExp("oj-bind-replace-","g"),""),t.replaceChild(l,s)}else if(8===s.nodeType){var p=s.nodeValue;s.nodeValue=p.replace(new RegExp("oj-bind-replace-","g"),"")}}}(a);var l=a.childNodes,u=[];for(t=l.length;t--;u.unshift(l[t]));return u},ln.getTemplateContent=function(e){var t=[];if(1!==e.nodeType||"template"!==e.tagName.toLowerCase())throw new Error("Invalid template node "+e);var i=e.content;return i?t.push(document.importNode(i,!0)):Array.prototype.forEach.call(e.childNodes,function(e){t.push(e.cloneNode(!0))}),t},n.IndexerModelTreeDataSource=function(e,t,i,n){this.data=e,this.idAttr=t,this.listener=i,this.options=n,this.Init()},n.Object.createSubclass(n.IndexerModelTreeDataSource,n.TreeDataSource,"oj.IndexerModelTreeDataSource"),n.IndexerModelTreeDataSource.prototype.Init=function(){n.IndexerModelTreeDataSource.superclass.Init.call(this);var e=this.options.sections;if(null==e){var t=n.Translations.getTranslatedString("oj-ojIndexer.indexerCharacters");e=t.split("|")}e.push(n.IndexerModel.SECTION_OTHERS);var i=this.options.groupingStrategy;if(null==i){var o=this.options.groupingAttribute;i=function(t){var i=(t[o]?t[o]:t).toString().toUpperCase()[0];return e.indexOf(i)>-1?i:n.IndexerModel.SECTION_OTHERS}}var s,r=this.options.sortComparatorFunction;this.data=this.data.sort(function(t,n){var o=i(t),s=i(n),a=e.indexOf(o)-e.indexOf(s);return 0===a&&r?r(t,n):a});for(var a=0;a<this.data.length;a++){var l=i(this.data[a]);s!==l&&(s=l,this._set(l,a))}this.sections=e},n.IndexerModelTreeDataSource.prototype._set=function(e,t){null==this.pos&&(this.pos=[]),this.pos.push({key:e,value:t})},n.IndexerModelTreeDataSource.prototype._get=function(e){for(var t=0;t<this.pos.length;t++)if(this.pos[t].key===e)return this.pos[t].value;return null},n.IndexerModelTreeDataSource.prototype.getIndexableSections=function(){return this.sections.slice(0,this.sections.length-1)},n.IndexerModelTreeDataSource.prototype.getMissingSections=function(){if(null==this.missing){for(var e=[],t=0;t<this.sections.length-1;t++){var i=this.sections[t];null==this._get(i)&&e.push(i)}this.missing=e}return this.missing},n.IndexerModelTreeDataSource.prototype.setSection=function(e){return this.listener.call(this,e)},n.IndexerModelTreeDataSource.prototype.getChildCount=function(e){if(null==e){var t=this.sections.length-this.getMissingSections().length;return null!=this._get(n.IndexerModel.SECTION_OTHERS)?t:t-1}var i=this._get(e);if(null!=i){var o=this.sections.indexOf(e);if(o===this.sections.length-1)return this.data.length-i;o+=1;for(var s=this.sections[o],r=this._get(s);null==r&&o<this.sections.length;)o+=1,s=this.sections[o],r=this._get(s);return(isNaN(r)||null==r)&&(r=this.data.length),r-i}return 0},n.IndexerModelTreeDataSource.prototype.fetchChildren=function(e,t,i,n){var o,s=this;if(null==e){var r=this.sections.filter(function(e){return null!=s._get(e)});o={getParent:function(){return e},getStart:function(){return 0},getCount:function(){return r.length},getData:function(e){return r[e]},getMetadata:function(e){return{key:r[e],leaf:!1,depth:0}}}}else o={getParent:function(){return e},getStart:function(){return 0},getCount:function(){return s.getChildCount(e)},getData:function(t){return s.data[s._get(e)+t]},getMetadata:function(t){var i=s.data[s._get(e)+t];return{key:null!=s.idAttr?i[s.idAttr]:i,leaf:!0,depth:1}}};null!=i&&null!=i.success&&i.success.call(null,o)};var un,dn={properties:{asyncValidators:{type:"Array<Object>",value:[]},autocomplete:{type:"string",value:"on",extension:{_COPY_TO_INNER_ELEM:!0}},autofocus:{type:"boolean",value:!1,extension:{_COPY_TO_INNER_ELEM:!0}},converter:{type:"object",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_NUMBER).createConverter()",properties:{type:{type:"string"},options:{type:"object"}}},describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},labelHint:{type:"string",value:""},max:{type:"number"},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},min:{type:"number"},name:{type:"string",value:"",extension:{_COPY_TO_INNER_ELEM:!0}},placeholder:{type:"string",value:""},rawValue:{type:"string",writeback:!0,readOnly:!0},readonly:{type:"boolean",value:!1},required:{type:"boolean",value:!1},step:{type:"number",value:1},transientValue:{type:"number",writeback:!0,readOnly:!0},translations:{type:"object",value:{},properties:{numberRange:{type:"object",properties:{hint:{type:"object",properties:{exact:{type:"string"},inRange:{type:"string"},max:{type:"string"},min:{type:"string"}}},messageDetail:{type:"object",properties:{exact:{type:"string"},rangeOverflow:{type:"string"},rangeUnderflow:{type:"string"}}},messageSummary:{type:"object",properties:{rangeOverflow:{type:"string"},rangeUnderflow:{type:"string"}}}}},required:{type:"object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}},tooltipDecrement:{type:"string"},tooltipIncrement:{type:"string"}}},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},validators:{type:"Array<Object>",value:[]},value:{type:"number",writeback:!0},virtualKeyboard:{type:"string",enumValues:["auto","number","text"],value:"auto"}},methods:{refresh:{},stepDown:{},stepUp:{},validate:{},reset:{},showMessages:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{}},extension:{}};n.__registerWidget("oj.ojInputNumber",$.oj.editableValue,{version:"1.0.0",defaultElement:"<input>",widgetEventPrefix:"oj",_ALLOWED_TYPES:["number","text"],options:{asyncValidators:[],autocomplete:void 0,autofocus:!1,converter:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_NUMBER).createConverter(),max:null,min:null,name:"",placeholder:"",rawValue:void 0,readOnly:!1,required:!1,step:1,transientValue:void 0,validators:[],value:null,virtualKeyboard:"auto"},getNodeBySubId:function(e){var t,i=this._superApply(arguments);return i||("oj-inputnumber-up"===(t=e.subId)&&(i=this.widget()[0].querySelector(".oj-inputnumber-up")),"oj-inputnumber-down"===t&&(i=this.widget()[0].querySelector(".oj-inputnumber-down")),"oj-inputnumber-input"===t&&(i=this.widget()[0].querySelector(".oj-inputnumber-input"))),i||null},getSubIdByNode:function(e){var t=null;return null!=e&&(e===this.widget()[0].querySelector(".oj-inputnumber-up")?t={subId:"oj-inputnumber-up"}:e===this.widget()[0].querySelector(".oj-inputnumber-down")?t={subId:"oj-inputnumber-down"}:e===this.widget()[0].querySelector(".oj-inputnumber-input")&&(t={subId:"oj-inputnumber-input"})),t||this._superApply(arguments)},refresh:function(){this._super(),this._setup()},stepDown:function(e){var t=this.options.step,i=(void 0!==e?e:1)*(t=null!=t?t:1)*-1;this._step(i)},stepUp:function(e){var t=this.options.step,i=(void 0!==e?e:1)*(t=null!=t?t:1);this._step(i)},widget:function(){return $(this.uiInputNumber)},_InitOptions:function(e,t){var i=this.options,o=this;if(this._superApply(arguments),this._IsCustomElement()||n.EditableValueUtils.initializeOptionsFromDom([{attribute:"disabled",validateOption:!0},{attribute:"placeholder"},{attribute:"value"},{attribute:"readonly",option:"readOnly",validateOption:!0},{attribute:"required",coerceDomValue:!0,validateOption:!0},{attribute:"title"},{attribute:"min"},{attribute:"max"},{attribute:"step"}],t,this,function(e){for(var t=["value","step","min","max"],n=0;n<t.length;n++){var s=t[n],r=s in e?e[s]:i[s];null!=r&&(e[s]="step"===s?o._parseStep(r):o._parse(s,r))}}),this._IsCustomElement()){var s=i.step;null!=s&&o._parseStep(s)}if(void 0===i.value)throw new Error("ojInputNumber has no value");if(this.initialValue=i.value,null!=i.min&&null!=i.max&&i.max<i.min)throw new Error("ojInputNumber's max must not be less than min")},_ComponentCreate:function(){this._super(),this._draw(),this._inputNumberDefaultValidators={},this._inputNumberDefaultAsyncValidators={},this._setup(),this._on(this._events),this._focusable($(this.uiInputNumber))},_AfterCreate:function(){this._super(),this.option({transientValue:this.options.value},{_context:{writeback:!0,internalSet:!0,readOnly:!0}}),this._refreshAriaMinMax(),this.stepQueue=[],this._blurEnterSetValueCounter=0},_AfterSetOption:function(e,t,i){switch(this._superApply(arguments),e){case"min":case"max":this._Refresh(e,this.options[e]);break;case"readOnly":this._AfterSetOptionDisabledReadOnly(e,n.EditableValueUtils.readOnlyOptionOptions);break;case"required":this._AfterSetOptionRequired(e);break;case"validators":this._AfterSetOptionValidators(e);break;case"asyncValidators":this._AfterSetOptionAsyncValidators(e);break;case"converter":this._AfterSetOptionConverter(e);break;case"virtualKeyboard":this._SetInputType(this._ALLOWED_TYPES)}},_CanSetValue:function(){return!!this._super()&&!this.options.readOnly},_AfterSetOptionValue:function(e,t){this._superApply(arguments);var i,n,o=t?t._context:null;o&&(i=!!o.originalEvent,n=o.doNotClearMessages||!1),i||n||(this.initialValue=this.options.value)},_IsRequired:function(){return this.options.required},_AfterSetOptionRequired:n.EditableValueUtils._AfterSetOptionRequired,_AfterSetOptionValidators:n.EditableValueUtils._AfterSetOptionValidators,_AfterSetOptionAsyncValidators:n.EditableValueUtils._AfterSetOptionAsyncValidators,_AfterSetOptionConverter:n.EditableValueUtils._AfterSetOptionConverter,_ResetConverter:n.EditableValueUtils._ResetConverter,_ResetAllValidators:function(){this._inputNumberDefaultValidators={},this._inputNumberDefaultAsyncValidators={},this._superApply(arguments)},_GetConverter:function(){return this.options.converter?this._getConverter():$.oj.ojInputNumber.prototype.options.converter},_GetNormalizedValidatorsFromOption:n.EditableValueUtils._GetNormalizedValidatorsFromOption,_GetNormalizedAsyncValidatorsFromOption:n.EditableValueUtils._GetNormalizedAsyncValidatorsFromOption,_AriaRequiredUnsupported:function(){return!1},_setOption:function(t,i,n){var o;if(this._IsCustomElement()||"value"!==t&&"max"!==t&&"min"!==t)if("step"===t)o=this._parseStep(i);else{if("transientValue"===t)return void e.error(t+" option cannot be set");o=i}else o=this._parse(t,i);if(this._super(t,o,n),"value"===t&&this.option({transientValue:this.options.value},{_context:{writeback:!0,internalSet:!0,readOnly:!0}}),"max"!==t&&"min"!==t||this._AfterSetOptionValidators(),"disabled"===t&&(this.element[0].disabled=!!i),"readOnly"===t){var s=!!i;if(!s&&null==this.buttonSet){var r=this.options.value||0;this._createOjButtonset(),this._updateButtons(r)}this.element[0].readOnly=s,this._refreshStateTheming("readOnly",this.options.readOnly),this._refreshRoleSpinbutton("readOnly",this.options.readOnly)}},_destroy:function(){var e=this._super();return this.buttonSet&&(this.buttonSet.ojButtonset("destroy"),this.buttonSet.remove(),this.upButton=null,this.downButton=null,this.buttonSet=null),this.initialValue=null,n.DomUtils.unwrap(this.element,$(this.uiInputNumber)),clearTimeout(this.timer),e},validate:n.EditableValueUtils.validate,_Refresh:function(e,t,i){var n;switch(this._superApply(arguments),e){case"value":n=this.options.value||0,this._updateButtonsAria(n);break;case"disabled":n=this.options.value||0,this._updateButtons(n);break;case"max":case"min":this._refreshAriaMinMax(),n=this._getDisplayValueParsed(),this._updateButtons(n);break;case"converter":n=this.options.value,this._refreshAriaText(n);break;case"required":this._refreshRequired(t)}},_refreshRequired:n.EditableValueUtils._refreshRequired,_GetImplicitSyncValidators:function(){var e,t=this._superApply(arguments);if(null!=this.options.min||null!=this.options.max){e=this._createRangeValidatorOptions();var i=le.Validation.validatorFactory(n.ValidatorFactory.VALIDATOR_TYPE_NUMBERRANGE).createValidator(e);this._inputNumberDefaultValidators[n.ValidatorFactory.VALIDATOR_TYPE_NUMBERRANGE]=i}return $.extend(this._inputNumberDefaultValidators,t)},_GetImplicitAsyncValidators:function(){var e=this._superApply(arguments);return $.extend(this._inputNumberDefaultAsyncValidators,e)},_GetDefaultStyleClass:function(){return"oj-inputnumber"},_events:{compositionstart:function(){this._isComposing=!0},compositionend:function(e){this._isComposing=!1,this._SetRawValue(this.element.val(),e)},input:function(e){this._isComposing||this._SetRawValue(this.element.val(),e)},keydown:function(e){var t=$.ui.keyCode;e.keyCode===t.ENTER?(this._blurEnterSetValue(e),e.preventDefault()):this._start()&&this._keydown(e)&&e.preventDefault()},keyup:function(e){var t=$.ui.keyCode;switch(e.keyCode){case t.UP:case t.DOWN:default:this._stop(e)}},blur:function(e){this._blurEnterSetValue(e)},"touchstart .oj-inputnumber-button.oj-enabled":function(e){this._start(),this._repeat(null,e.currentTarget.classList.contains("oj-inputnumber-up")?1:-1,e)},"touchend .oj-inputnumber-button":function(e){this._stop(e)},"touchcancel .oj-inputnumber-button":function(e){this._stop(e)},"mousedown .oj-inputnumber-button.oj-enabled":function(e){this._isRealMouseEvent(e)&&(this._start(),this._repeat(null,e.currentTarget.classList.contains("oj-inputnumber-up")?1:-1,e))},"mouseup .oj-inputnumber-button":function(e){this._isRealMouseEvent(e)&&this._stop(e)},"mouseenter .oj-inputnumber-button.oj-enabled":function(e){e.currentTarget.classList.contains("oj-active")&&this._isRealMouseEvent(e)&&(this._start(),this._repeat(null,e.currentTarget.classList.contains("oj-inputnumber-up")?1:-1,e))},"mouseleave .oj-inputnumber-button":function(e){this._isRealMouseEvent(e)&&this._stop(e)}},_BUNDLE_KEY:{_TOOLTIP_DECREMENT:"tooltipDecrement",_TOOLTIP_INCREMENT:"tooltipIncrement"},_OPTION_TO_CSS_MAPPING:{readOnly:"oj-read-only"},_setup:function(){if(!0!==this.options.readOnly){var e=this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_INCREMENT),t=this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_DECREMENT);this.upButton.ojButton({label:e}),this.downButton.ojButton({label:t})}"boolean"==typeof this.options.readOnly&&(this.element[0].readOnly=this.options.readOnly),this._refreshStateTheming("readOnly",this.options.readOnly),this._refreshRoleSpinbutton("readOnly",this.options.readOnly),this._refreshRequired(this.options.required)},_markInternalComponents:function(){this.upButton[0].setAttribute("data-oj-internal",""),this.downButton[0].setAttribute("data-oj-internal",""),this.buttonSet[0].setAttribute("data-oj-internal","")},_createOjButtonset:function(){var e=this._createButtonset();this.inputNumberWrapper.appendChild(e.buttonSet);for(var t=this.uiInputNumber.querySelectorAll(".oj-inputnumber-button"),i=0,n=t?t.length:0;i<n;i++)t[i].setAttribute("tabIndex","-1");var o=e.upButton.parentNode;this.upButton=$(e.upButton).ojButton({display:"icons",label:this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_INCREMENT),icons:{start:"oj-component-icon oj-inputnumber-up-icon"}}),this.downButton=$(e.downButton).ojButton({display:"icons",label:this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_DECREMENT),icons:{start:"oj-component-icon oj-inputnumber-down-icon"}}),this.buttonSet=$(o).ojButtonset({focusManagement:"none"}),this._markInternalComponents()},_draw:function(){var e,t=this.element[0];t.classList.add("oj-inputnumber-input");var i=document.createElement("span");if(i.className="oj-inputnumber-wrapper",t.parentNode.insertBefore(i,t),i.appendChild(t),this.inputNumberWrapper=i,this.uiInputNumber=i,this.OuterWrapper)this.OuterWrapper.appendChild(i),this.uiInputNumber=this.OuterWrapper,this.uiInputNumber.classList.add("oj-inputnumber"),this.uiInputNumber.classList.add("oj-component");else{var o=document.createElement("div");o.className="oj-inputnumber oj-component",i.parentNode.insertBefore(o,i),o.appendChild(i),this.uiInputNumber=o}this._IsCustomElement()&&(e=this.widget()[0].getAttribute("id"))&&n.EditableValueUtils.setSubIdForCustomLabelFor(this._GetContentElement()[0],e),this.saveType=t.type,this._SetInputType(this._ALLOWED_TYPES),!0!==this.options.readOnly&&this._createOjButtonset()},_keydown:function(e){var t=$.ui.keyCode;switch(e.keyCode){case t.UP:return this._repeat(null,1,e),!0;case t.DOWN:return this._repeat(null,-1,e),!0;default:return!1}},_createButtonset:function(){var e=document.createElement("div");e.className="oj-buttonset-width-auto";var t=document.createElement("button");t.setAttribute("type","button"),t.className="oj-inputnumber-button oj-inputnumber-down",e.appendChild(t);var i=document.createElement("button");return i.setAttribute("type","button"),i.className="oj-inputnumber-button oj-inputnumber-up",e.appendChild(i),{buttonSet:e,downButton:t,upButton:i}},_start:function(){return this.spinning=!0,!0},_repeat:function(e,t,i,o){var s,r=!1,a=this,l=null!=this.options.step?this.options.step:1;t>0?this.upButton[0].classList.contains("oj-disabled")&&(r=!0):this.downButton[0].classList.contains("oj-disabled")&&(r=!0),e=e||500,clearTimeout(this.timer),this.timer=setTimeout(function(){r||a._repeat(40,t,i,!0)},e),o?(s=this.element[0],n.Context.getContext(s).getBusyContext().isReady()&&(this.stepQueue=[],this._spin(t*l,i,!0))):this._stepNoStartStop(t*l,i)},_spin:function(e,t,i){var n,o=this._GetDisplayValue()||0,s=this._ParseValueShowErrors(o);return void 0!==s?(n=this._adjustParsedValueOnSpinAndUpdateDisplay(s,e),this._valuePending=i,this._SetValue(n,t,{validationMode:this._VALIDATION_MODE.VALIDATORS_ONLY,targetOptions:i?["transientValue"]:["transientValue","value"]})):(this._updateButtonsAria(s),!1)},_adjustParsedValueOnSpinAndUpdateDisplay:function(e,t){var i,n,o=this.options,s=o.min,r=o.max,a=null!=o.step?o.step:1,l=this.initialValue;return i=this._precision(s,a,l),n=this._adjustValue(e,t,s,r,a,i,l),this._CanSetValue()&&void 0!==this._UpdateElementDisplayValue(n,!0)&&this._updateButtonsAria(n),n},_precision:function(e,t,i){var n=this._precisionOf(t);return null!=e&&(n=Math.max(n,this._precisionOf(e))),null!=i&&(n=Math.max(n,this._precisionOf(i))),n},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(t,i,n,o,s,r,a){var l,u,d;if(r>0)return this._adjustValueForFractions(t,i,n,o,s,r,a);null==(u=null!=n?n:a)&&(u=0);try{t=parseFloat(t.toFixed(r))}catch(i){i instanceof TypeError&&(e.warn("inputNumber's value after conversion is not a number. \nThe converter must convert the value to a Number. coercing using +"),t=+t)}d=t-u;var h=Math.round(d/s)*s;if(l=(h=parseFloat(h.toFixed(r)))===d?t+i:u+(d=i<0?Math.ceil(d/s)*s:Math.floor(d/s)*s)+i,l=parseFloat(l.toFixed(r)),null!=n&&l<n)return n;if(null!=o&&l>o){var c=Math.floor((o-u)/s)*s+u;return c=parseFloat(c.toFixed(r))}return l},_adjustValueForFractions:function(e,t,i,o,s,r,a){n.Assert.assert(r>0);var l=Math.pow(10,r),u=null!=i?Math.round(i*l):i,d=null!=o?Math.round(o*l):o,h=null!=s?Math.round(s*l):s;return this._adjustValue(Math.round(e*l),Math.round(t*l),u,d,h,0,Math.round(a*l))/l},_stop:function(e){if(this.spinning){if(this._valuePending){var t={originalEvent:e,internalSet:!0};this.option({value:this.options.transientValue},{_context:t}),this._valuePending=!1}clearTimeout(this.timer),this.spinning=!1}},_isRealMouseEvent:function(){return!n.DomUtils.recentTouchEnd()},_updateButtons:function(e){var t,i,n=this.options,o=n.max,s=n.min,r=this.downButton,a=this.upButton,l=null!=o,u=null!=s;this.uiInputNumber&&(r||a)&&(t=r[0].classList.contains("oj-disabled"),i=a[0].classList.contains("oj-disabled"),n.disabled||void 0===e||l&&u&&o===s&&e===o?(t||r.ojButton("disable"),i||a.ojButton("disable")):l&&e>=o?(t&&r.ojButton("enable"),i||a.ojButton("disable")):u&&e<=s?(t||r.ojButton("disable"),i&&a.ojButton("enable")):(t&&r.ojButton("enable"),i&&a.ojButton("enable")))},_getConverter:n.EditableValueUtils._GetConverter,_getDisplayValueParsed:function(){var e,t;try{t=this._GetDisplayValue()||0,e=this._parseValue(t)}catch(t){e=void 0}return e},_blurEnterSetValue:function(e){var t,i,n,o=this.element.val(),s=this;this._stop(e),this.stepQueue=[],this._blurEnterSetValueCounter+=1,n=this._blurEnterSetValueCounter,this._valuePending=!1,(i=this._SetValue(o,e,{targetOptions:["transientValue","value"]}))instanceof Promise?i.then(function(e){n===s._blurEnterSetValueCounter&&(e||(t=s._getDisplayValueParsed(),s._updateButtonsAria(t)))}):(t=i?this.options.value:this._getDisplayValueParsed(),this._updateButtonsAria(t))},_updateButtonsAria:function(e){this._refreshAriaValueNowText(e),this._updateButtons(e)},_createRangeValidatorOptions:function(){var e,t,i,n,o,s,r,a,l,u=this.options,d=u.min,h=u.max,c=null!=d?d:void 0,p=null!=h?h:void 0,_=u.translations,m=_&&_.numberRange||{},g=m.hint||{},f=m.messageDetail||{},v=m.messageSummary||{};return null!==g&&(e=g.min||null,t=g.max||null,i=g.inRange||null,n=g.exact||null),null!==f&&(o=f.rangeOverflow||null,s=f.rangeUnderflow||null,r=f.exact||null),null!==v&&(a=v.rangeOverflow||null,l=v.rangeUnderflow||null),{min:c,max:p,hint:{min:e||null,max:t||null,inRange:i||null,exact:n||null},messageDetail:{rangeOverflow:o||null,rangeUnderflow:s||null,exact:r||null},messageSummary:{rangeOverflow:a||null,rangeUnderflow:l||null},converter:this._GetConverter()}},_parse:function(e,t){var i;if(i=null!==t?+t:t,isNaN(i))throw new Error("ojInputNumber's "+e+" option is not a number");return i},_parseStep:function(e){var t;if(null===e)return 1;if((t=this._parse("step",e))<=0)throw new Error("Invalid step for ojInputNumber; step must be > 0");return(null===t||t<=0)&&(t=1),t},_refreshStateTheming:function(e,t){-1!==Object.keys(this._OPTION_TO_CSS_MAPPING).indexOf(e)&&(t?this.widget()[0].classList.add(this._OPTION_TO_CSS_MAPPING[e]):this.widget()[0].classList.remove(this._OPTION_TO_CSS_MAPPING[e]))},_refreshRoleSpinbutton:function(e,t){t?this.element[0].removeAttribute("role"):this.element[0].setAttribute("role","spinbutton")},_refreshAriaMinMax:function(){this._setAttr("aria-valuemin",this.options.min),this._setAttr("aria-valuemax",this.options.max)},_refreshAriaValueNowText:function(e){this._setAttr("aria-valuenow",e),this._refreshAriaText(e)},_refreshAriaText:function(e){var t=this.element.val();""===t||this._CompareOptionValues("value",""+e,t)?this._setAttr("aria-valuetext",null):this._setAttr("aria-valuetext",t)},_setAttr:function(e,t){void 0!==t&&(null===t?this.element[0].removeAttribute(e):this.element[0].setAttribute(e,t))},_stepNoStartStop:function(e,t){var i,n,o,s,r=this;if(void 0===e){if(0===this.stepQueue.length)return;n=(i=this.stepQueue.shift()).step,o=i.event}else{if(this.stepQueue.length>=1)return void this.stepQueue.push({step:e,event:t});n=e,o=t}(s=this._spin(n,o,!1))instanceof Promise&&(this.stepQueue.push({step:n,event:o}),s.then(function(){r.stepQueue.shift(),r._stepNoStartStop(void 0,o)}))},_step:function(e,t){this._start(),this._stepNoStartStop(e,t),this._stop(t)},_SetInputType:n.EditableValueUtils._SetInputType}),dn.extension._WIDGET_NAME="ojInputNumber",dn.extension._ALIASED_PROPS={readonly:"readOnly"},dn.extension._INNER_ELEM="input",dn.extension._GLOBAL_TRANSFER_ATTRS=["accesskey","aria-label","tabindex"],n.CustomElementBridge.register("oj-input-number",{metadata:dn}),Hammer?($.fn.ojHammer=function(e){switch(e){case"instance":return this.data("ojHammer");case"destroy":return this.each(function(){var e=$(this),t=e.data("ojHammer");t&&(t.destroy(),e.removeData("ojHammer"))});default:return this.each(function(){var t=$(this);t.data("ojHammer")||t.data("ojHammer",new Hammer.Manager(t[0],e))})}},Hammer.Manager.prototype.emit=(un=Hammer.Manager.prototype.emit,function(e,t){un.call(this,e,t),$(this.element).trigger({type:e,gesture:t})})):e.warn("Hammer jQuery extension loaded without Hammer."),n.JsonDiagramDataSource=function(e,t){this.childDataCallback=t?t.childData:null,this._nodesMapById={},n.JsonDiagramDataSource.superclass.constructor.call(this,e)},n.Object.createSubclass(n.JsonDiagramDataSource,n.DiagramDataSource,"oj.JsonDiagramDataSource"),n.JsonDiagramDataSource.prototype.getData=function(e){var t;return e?void 0===(t=e.nodes)&&this.childDataCallback?(t=this.childDataCallback(e),this._updateLocalData(this._nodesMapById[e.id],t),t):(this._updateNodesMap({nodes:t}),Promise.resolve({nodes:t})):this.data?(this._updateNodesMap(this.data),Promise.resolve(this.data)):this.childDataCallback?(t=this.childDataCallback(),this._updateLocalData(null,t),t):Promise.resolve(null)},n.JsonDiagramDataSource.prototype._updateNodesMap=function(e){if(this.childDataCallback&&e.nodes)for(var t=e.nodes,i=0;i<t.length;i++)this._nodesMapById[t[i].id]=t[i]},n.JsonDiagramDataSource.prototype._updateLocalData=function(e,t){if(t instanceof Promise){var i=this;t.then(function(t){e||i.data||(i.data={}),Array.isArray(t.nodes)&&(e?e.nodes=t.nodes:i.data.nodes=t.nodes,i._updateNodesMap(t)),Array.isArray(t.links)&&(i.data.links=Array.isArray(i.data.links)?i.data.links.concat(t.links):t.links),i.handleEvent("ADD",{data:t,parentId:e?e.id:null,index:0})},function(){})}},n.JsonDiagramDataSource.prototype.getChildCount=function(e){if(e){var t=e.nodes;return Array.isArray(t)?t.length:void 0===t&&this.childDataCallback?-1:0}return-1},n.JsonDiagramDataSource.prototype.getDescendantsConnectivity=function(e){return"unknown"},n.JsonNodeSet=function(e,t,i,o,s){n.Assert.assertNumber(e,null),n.Assert.assertNumber(t,null),this.m_depth=s,this.m_key=o,this.m_startNode=e,this.m_endNode=t,this.m_nodes=i},n.JsonNodeSet.prototype.getParent=function(){return this.m_key},n.JsonNodeSet.prototype.getStart=function(){return this.m_startNode},n.JsonNodeSet.prototype.getCount=function(){return Math.max(0,this.m_endNode-this.m_startNode)},n.JsonNodeSet.prototype.getData=function(e){n.Assert.assert(e<=this.m_endNode&&e>=this.m_startNode);var t=e-this.m_startNode;return this.m_nodes[t]?this.m_nodes[t].attr:null},n.JsonNodeSet.prototype.getMetadata=function(e){var t={leaf:!1,depth:-1};n.Assert.assert(e<=this.m_endNode&&e>=this.m_startNode);var i=e-this.m_startNode;return t.key=this.m_nodes[i].id?this.m_nodes[i].id:this.m_nodes[i].attr.id,t.leaf=this.m_nodes[i].leaf,t.depth=this.m_nodes[i].depth,null==t.leaf&&(this.m_nodes[i].children&&this.m_nodes[i].children.length>0?t.leaf=!1:t.leaf=!0),t},n.JsonNodeSet.prototype._updateDepth=function(e,t){var i;if(t+=1,e.depth=t,e.children&&0!==e.children.length)for(i=0;i<e.children.length;i++)this._updateDepth(e.children[i],t)},n.JsonNodeSet.prototype.getChildNodeSet=function(e){n.Assert.assert(e<=this.m_endNode&&e>=this.m_startNode);var t=e-this.m_startNode,i=this.m_nodes[t].depth,o=this.m_nodes[t].children;if(null==o||0===o.length)return null;for(var s=this.m_nodes[t].id?this.m_nodes[t].id:this.m_nodes[t].attr.id,r=0;r<o.length;r++)this._updateDepth(o[r],i);return new n.JsonNodeSet(0,o.length,o,s,0)},n._JsonTreeNodeDataSource=function(){this.id=null,this.depth=0,this.parent=null,this.children=null,this.title=null,this.attr=null,this.leaf=null},n._JsonTreeNodeDataSource.prototype._ascending=function(e){return function(t,i){return null!=t.attr&&null!=i.attr&&null!=t.attr[e]&&null!=i.attr[e]?t.attr[e]<i.attr[e]?-1:t.attr[e]===i.attr[e]?0:1:t[e]<i[e]?-1:t[e]===i[e]?0:1}},n._JsonTreeNodeDataSource.prototype._descending=function(e){return function(t,i){return null!=t.attr&&null!=i.attr&&null!=t.attr[e]&&null!=i.attr[e]?t.attr[e]<i.attr[e]?1:t.attr[e]===i.attr[e]?0:-1:t[e]<i[e]?1:t[e]===i[e]?0:-1}},n._JsonTreeNodeDataSource.prototype._sortRecursive=function(e){var t=e.key;if(null==this.children)return this;"ascending"===e.direction?this.children.sort(this._ascending(t)):"descending"===e.direction&&this.children.sort(this._descending(t));for(var i=0,n=this.children.length;i<n;i++)this.children[i]._sortRecursive(e);return this},n.JsonTreeDataSource=function(e){var t=new n._JsonTreeNodeDataSource;null==e.id&&(t.id="root"),this.data=this._createTreeDataSource({count:0},t,e,0),n.JsonTreeDataSource.superclass.constructor.call(this,t)},n.Object.createSubclass(n.JsonTreeDataSource,n.TreeDataSource,"oj.JsonTreeDataSource"),n.JsonTreeDataSource.prototype.Init=function(){n.JsonTreeDataSource.superclass.Init.call(this)},n.JsonTreeDataSource.prototype._createTreeDataSource=function(e,t,i,o){for(var s in i)if("children"===s||0===o&&i instanceof Array){var r;r=0===o&&i instanceof Array?i:i[s],t.children=[],o+=1;for(var a=0;a<r.length;a++){var l,u=r[a],d=new n._JsonTreeNodeDataSource;for(var h in null==u.id&&(e.count+=1,null==u.attr?d.id="rid_"+e.count:null==u.attr.id&&(u.attr.id="rid_"+e.count)),u)for(l in d)h===l&&"children"!==h&&(d[l]=u[h]),"depth"===l&&(d[l]=o);for(l in t.children.push(d),u)"children"===l&&this._createTreeDataSource(e,t.children[a],u,o)}}return t},n.JsonTreeDataSource.prototype.getChildCount=function(e){var t;return null==e&&(e=this.data.id),(t=this._searchTreeById(this.data,e)).children?t.children.length:0},n.JsonTreeDataSource.prototype.fetchChildren=function(e,t,i,o){var s,r,a=[];null==e&&(e=this.data.id);var l=this._searchTreeById(this.data,e),u=null!=l.children?l.children.length:0;t||((t=[]).start=0,t.count=u),t.count||(t.count=u),t.start||(t.start=0),s=t.start,r=Math.min(u,s+t.count);for(var d=s;d<r;d+=1){var h=new n._JsonTreeNodeDataSource;null!=l.children[d].attr&&(h.attr=l.children[d].attr),null!=l.children[d].id&&(h.id=l.children[d].id),null!=l.children[d].depth&&(h.depth=l.children[d].depth),null!=l.children[d].title&&(h.title=l.children[d].title),null!=l.children[d].parent&&(h.parent=l.children[d].parent),null!=l.children[d].children?h.leaf=!1:h.leaf=!0,a.push(h)}var c=new n.JsonNodeSet(s,r,a,e,l.depth);null!=i&&null!=i.success&&i.success.call(null,c)},n.JsonTreeDataSource.prototype.fetchDescendants=function(e,t,i){var o,s,r=[];null==e&&(e=this.data.id);var a=this._searchTreeById(this.data,e),l=null!=a.children?a.children.length:0,u=[];u.start=0,u.count=l,o=u.start,s=Math.min(l,o+u.count);for(var d=o;d<s;d+=1)null!=a.children[d].children?a.children[d].leaf=!1:a.children[d].leaf=!0,r.push(a.children[d]);var h=new n.JsonNodeSet(0,r.length,r,e,a.depth);null!=t&&null!=t.success&&t.success.call(null,h)},n.JsonTreeDataSource.prototype.moveOK=function(e,t,i){return"valid"},n.JsonTreeDataSource.prototype.move=function(t,i,n,o){var s=n,r=t,a=i;if(null==a||a===this.data.id){if("inside"!==s)return void e.log("Error: root can not be the reference node if position equals to "+s);a||(a=this.data.id)}var l=this._searchTreeById(null,r);if(this._searchTreeById(l,a))e.log("Error: the node to move contains the reference node as its sub-tree.");else{var u,d=this._searchTreeById(null,a),h=this._getParentById(a);this._removeFromTree(l),"inside"===s?(this._updateDepth(l,l.depth-(d.depth+1)),null==d.children&&(d.children=[]),d.children.push(l)):"before"===s?(this._updateDepth(l,l.depth-d.depth),(u=h.children.indexOf(d))>-1&&(0!==u?h.children.splice(u,0,l):h.children.unshift(l))):"after"===s?(this._updateDepth(l,l.depth-d.depth),(u=h.children.indexOf(d))>-1&&h.children.splice(u+1,0,l)):"first"===s?(this._updateDepth(l,l.depth-d.depth),h.children.unshift(l)):"last"===s&&(this._updateDepth(l,l.depth-d.depth),h.children.push(l)),null!=o&&null!=o.success&&o.success.call(null,this.data)}},n.JsonTreeDataSource.prototype.sort=function(e,t){var i=this.data.id,n=this._searchTreeById(this.data,i);n._sortRecursive(e),null!=t&&null!=t.success&&t.success.call(null,n)},n.JsonTreeDataSource.prototype.getSortCriteria=function(){return{key:null,direction:"none"}},n.JsonTreeDataSource.prototype._getParentById=function(e,t){var i,n=null,o=!1;if(e===this.data.id)return null;if(null==t&&(t=this.data),t.children&&t.children.length>0){for(i=0;i<t.children.length;i++)if(t.children[i].id&&t.children[i].id===e||t.children[i].attr&&t.children[i].attr.id===e)return o=!0,t;if(!o)for(i=0;i<t.children.length;i++)if(n=this._getParentById(e,t.children[i]))return o=!0,n}return n},n.JsonTreeDataSource.prototype._searchTreeById=function(e,t){var i=null;if(null==e&&(e=this.data),e.id&&e.id===t||e.attr&&e.attr.id===t)return e;if(null!=e.children){for(var n=0;n<e.children.length;n++){if(i)return i;i=e.children[n].id&&e.children[n].id===t||e.children[n].attr&&e.children[n].attr.id===t?e.children[n]:this._searchTreeById(e.children[n],t)}return i}return i},n.JsonTreeDataSource.prototype._updateDepth=function(e,t){if(e.depth-=t,e.children&&0!==e.children.length)for(var i=0;i<e.children.length;i++)this._updateDepth(e.children[i],t)},n.JsonTreeDataSource.prototype._removeFromTree=function(e){var t;null!=e.id?t=e.id:null!=e.attr&&(t=e.attr.id);var i=this._getParentById(t);i||(i=this.data);var n=i.children.indexOf(e);n>-1&&i.children.splice(n,1)},n.JsonTreeDataSource.prototype.getCapability=function(e){return"fetchDescendants"===e?"enable":"sort"===e?"default":"batchFetch"===e?"disable":"move"===e?"full":null};var hn=function(e){var t=e||new n.ExpandedKeySet,i=ko.observable(t);return Object.setPrototypeOf(i,hn.proto),i};hn.proto=Object.create(ko.observable.fn),ko.utils.arrayForEach(["add","addAll","clear","delete"],function(e){hn.proto[e]=function(){var t=this.peek();return this(t[e].apply(t,arguments)),this}}),n.KnockoutUtils=function(){};var cn=n.KnockoutUtils;n.KnockoutUtils.internalObjectProperty="oj._internalObj",n.KnockoutUtils.underUpdateProp="oj._underUpdate",n.KnockoutUtils.collUpdatingProp="oj.collectionUpdating",n.KnockoutUtils.subscriptionProp="oj.collectionSubscription",n.KnockoutUtils.updatingCollectionFunc="oj.collectionUpdatingFunc",n.KnockoutUtils.map=function(e,t,i){var o;function s(t){return function(i){o[n.KnockoutUtils.underUpdateProp]||e.set(t,i)}}if(e instanceof T.Collection){var r,a,l=new Array(e._getLength());if(o=i?ko.observableArray(l):l,n.KnockoutUtils._storeOriginalObject(o,e),i)for(a=0;a<e._modelIndices.length;a++)r=e._modelIndices[a],o()[r]=n.KnockoutUtils.map(e._atInternal(r,null,!0,!1),t);else for(a=0;a<e._modelIndices.length;a++)r=e._modelIndices[a],o[r]=n.KnockoutUtils.map(e._atInternal(r,null,!0,!1),t);var u=function(t){try{if(!o[n.KnockoutUtils.underUpdateProp]){o[n.KnockoutUtils.collUpdatingProp]=!0;for(var i=0;i<t.length;i++){var s=t[i].index,r=n.KnockoutUtils._getModel(t[i].value),a=t[i].status;"added"===a?s>=e.length-1?e.add(r):e.add(r,{at:s}):"deleted"===a&&e._removeInternal(r,s)}e.comparator&&(o[n.KnockoutUtils.underUpdateProp]=!0,o.sort(function(t,i){return n.KnockoutUtils._callSort(t,i,e.comparator,e,this)}),o[n.KnockoutUtils.underUpdateProp]=!1)}}catch(e){throw e}finally{o[n.KnockoutUtils.collUpdatingProp]=!1}};i&&o.subscribe&&(o[n.KnockoutUtils.updatingCollectionFunc]=u,o[n.KnockoutUtils.subscriptionProp]=o.subscribe(u,null,"arrayChange"));e.OnInternal(T.Events.EventType.ADD,function(e,i,s){try{if(o[n.KnockoutUtils.collUpdatingProp])return;if(i instanceof T.Collection){o[n.KnockoutUtils.underUpdateProp]=!0;var r=i._localIndexOf(e);if(void 0!==r&&r>-1){var a=n.KnockoutUtils.map(e,t);if(s.fillIn){for(var l=Array.isArray(o)?o.length:o().length;l<r;l++)o.splice(l,0,n.KnockoutUtils.map(i._atInternal(l,null,!0,!1),t));o.splice(r,1,a)}else o.splice(r,0,a)}}}catch(e){throw e}finally{o[n.KnockoutUtils.underUpdateProp]=!1}},void 0,void 0,!0),e.OnInternal(T.Events.EventType.REMOVE,function(e,t,i){try{if(o[n.KnockoutUtils.collUpdatingProp])return;o[n.KnockoutUtils.underUpdateProp]=!0;var s=i.index;o.splice(s,1)}catch(e){throw e}finally{o[n.KnockoutUtils.underUpdateProp]=!1}},void 0,void 0,!0),e.OnInternal(T.Events.EventType.RESET,function(e){try{if(o[n.KnockoutUtils.collUpdatingProp])return;e instanceof T.Collection&&(o[n.KnockoutUtils.underUpdateProp]=!0,ko.isObservable(o)?(o[n.KnockoutUtils.subscriptionProp]&&o[n.KnockoutUtils.subscriptionProp].dispose(),o.removeAll(),o[n.KnockoutUtils.updatingCollectionFunc]&&o.subscribe(o[n.KnockoutUtils.updatingCollectionFunc],null,"arrayChange")):o=[])}catch(e){throw e}finally{o[n.KnockoutUtils.underUpdateProp]=!1}},void 0,void 0,!0),e.OnInternal(T.Events.EventType.SORT,function(t){try{if(o[n.KnockoutUtils.collUpdatingProp])return;t instanceof T.Collection&&(o[n.KnockoutUtils.underUpdateProp]=!0,o.sort(function(i,o){return n.KnockoutUtils._callSort(i,o,e.comparator,t,this)}))}catch(e){throw e}finally{o[n.KnockoutUtils.underUpdateProp]=!1}},void 0,void 0,!0)}else{if(void 0===e)return;o={};for(var d=e.attributes,h=Object.keys(d),c=0;c<h.length;c++){var p=h[c],_=ko.observable(e.get(p));o[p]=_;var m=s(p);m._prop=p,_.subscribe&&_.subscribe(m)}e.OnInternal(T.Events.EventType.CHANGE,function(e){try{o[n.KnockoutUtils.underUpdateProp]=!0;for(var t=e.changedAttributes(),i=Object.keys(t),s=0;s<i.length;s++){var r=i[s];o[r]?o[r](e.get(r)):o[r]=ko.observable(e.get(r))}}catch(e){throw e}finally{o[n.KnockoutUtils.underUpdateProp]=!1}},void 0,void 0,!0),n.KnockoutUtils._storeOriginalObject(o,e),t&&t(o)}return o},n.KnockoutUtils._getModel=function(e){return e instanceof T.Model?e:Object.prototype.hasOwnProperty.call(e,n.KnockoutUtils.internalObjectProperty)?e[n.KnockoutUtils.internalObjectProperty]:e},n.KnockoutUtils._callSort=function(e,t,i,o,s){return T.Collection.SortFunc(n.KnockoutUtils._getModel(e),n.KnockoutUtils._getModel(t),i,o,s)},n.KnockoutUtils._storeOriginalObject=function(e,t){Object.defineProperty(e,n.KnockoutUtils.internalObjectProperty,{value:t,enumerable:!1})};var pn={properties:{for:{type:"string"},help:{type:"object",value:{definition:null,source:null},properties:{definition:{type:"string"},source:{type:"string"}}},labelId:{type:"string"},showRequired:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{tooltipHelp:{type:"string"},tooltipRequired:{type:"string"}}}},methods:{refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};n.__registerWidget("oj.ojLabel",$.oj.baseComponent,{version:"1.0.0",defaultElement:"<label>",widgetEventPrefix:"oj",options:{for:null,help:{definition:null,source:null},labelId:null,showRequired:!1,rootAttributes:null},_BUNDLE_KEY:{_TOOLTIP_HELP:"tooltipHelp",_TOOLTIP_REQUIRED:"tooltipRequired"},widget:function(){return this.uiLabel},refresh:function(){this._super(),this._refreshRequired(),this._refreshHelp(),this._addIdsToDom()},_InitOptions:function(e,t){this._super(e,t),this._isCustomElement=this._IsCustomElement(),this._checkRequiredOption()},_ComponentCreate:function(){this._super(),this._touchEatClickNamespace=this.eventNamespace+"TouchEatClick",this._touchEatContextMenuNamespace=this.eventNamespace+"TouchEatContextMenu",this._helpDefPopupNamespace=this.eventNamespace+"HelpDefPopup",this._bTouchSupported=n.DomUtils.isTouchSupported(),this._drawOnCreate()},_SaveAttributes:function(e){this._IsCustomElement()||(this._savedClasses=e.attr("class"))},_RestoreAttributes:function(){this._IsCustomElement()||(this._savedClasses?this.element.attr("class",this._savedClasses):this.element.removeAttr("class"))},_NotifyDetached:function(){this._superApply(arguments),this._handleCloseHelpDefPopup()},_NotifyHidden:function(){this._superApply(arguments),this._handleCloseHelpDefPopup()},_GetTranslationsSectionName:function(){return this._IsCustomElement(),"oj-ojLabel"},_drawOnCreate:function(){var e,t=null;this.OuterWrapper?(this.uiLabel=$(this.OuterWrapper).append(this.element.wrap(this._createOjLabelGroupDom()).parent()),this.uiLabel.addClass("oj-label oj-component")):this.uiLabel=this.element.wrap(this._createRootDomElement()).closest(".oj-component"),this._addIdsToDom(),e=this.element[0].id,this.helpSpanId=e+"_helpIcon",this.requiredSpanId=e+"_requiredIcon",this._isCustomElement||this._moveLabelStyleClassesToRootDom(),this.options.showRequired&&(this._createRequiredIconSpanDom(),this._isCustomElement&&this._addRequiredDescribedByOnCustomFormElement()),this._isCustomElement&&this._refreshFor(),this._needsHelpIcon()&&(t=this._createIconSpan(this.helpSpanId,!0),this._createHelp(t),this._isCustomElement&&this._addHelpSpanIdOnTarget(this.helpSpanId))},_getCustomLabelFormElement:function(){var e,t=null;return this._isCustomElement?(null==(t=this._getForTargetElement())&&(this.OuterWrapper&&(e=this.OuterWrapper.id),null==(t=this._getTargetElementFromLabelledAttr("labelled-by",e))&&(t=this._getTargetElementFromLabelledAttr("aria-labelledby",this.options.labelId))),t):null},_addRequiredDescribedByOnCustomFormElement:function(){var e,t;this.OuterWrapper&&(e=this.OuterWrapper.id),(t=this._getTargetElementFromLabelledAttr("labelled-by",e))&&this._isElementCustomElementAriaRequiredUnsupported(t)&&this._addElementAttribute(t,this.requiredSpanId,"described-by")},_removeRequiredDescribedByOnCustomFormElement:function(){var e,t;this.OuterWrapper&&(e=this.OuterWrapper.id),(t=this._getTargetElementFromLabelledAttr("labelled-by",e))&&this._isElementCustomElementAriaRequiredUnsupported(t)&&this._removeElementAttribute(t,this.requiredSpanId,"described-by")},_addHelpSpanIdOnTarget:function(e){var t,i=this._getCustomLabelFormElement();i&&(t=this._getAriaAttributeForTarget(i),this._addElementAttribute(i,e,t))},_removeHelpSpanIdOnTarget:function(e){var t,i=this._getCustomLabelFormElement();i&&(t=this._getAriaAttributeForTarget(i),this._removeElementAttribute(i,e,t))},_getAriaAttributeForTarget:function(e){return this._isElementCustomElement(e)?"described-by":"group"===e.getAttribute("role")?"aria-labelledby":"aria-describedby"},_getForTargetElement:function(){return document.getElementById(this.options.for)},_getTargetElementFromLabelledAttr:function(e,t){var i;return t?(i="["+e+"~='"+t+"']",document.querySelector(i)):null},_isElementCustomElement:function(e){return n.Assert.assertDomElement(e),-1!==e.tagName.indexOf("-")},_isElementCustomElementAriaRequiredUnsupported:function(e){var t;n.Assert.assertDomElement(e);var i,o=["oj-radioset","oj-checkboxset"],s=o.length,r=!1;if(e){i=e.tagName.toLowerCase();for(var a=0;a<s&&!r;a++)t=o[a],0===i.indexOf(t)&&(r=!0)}return r},_addElementAttribute:function(e,t,i){var n,o,s=e.getAttribute(i);o=s?s.split(/\s+/):[],-1===$.inArray(t,o)&&o.push(t),n=$.trim(o.join(" ")),e.setAttribute(i,n)},_removeElementAttribute:function(e,t,i){var n,o,s,r=e.getAttribute(i);s=r?r.split(/\s+/):[],-1!==(o=$.inArray(t,s))&&s.splice(o,1),(n=$.trim(s.join(" ")))?e.setAttribute(i,n):e.setAttribute(i,"")},_addForOnLabel:function(e){var t=this.element[0],i=this.options.for;this._isElementCustomElement(e)?t.setAttribute("for",i+"|input"):t.setAttribute("for",i)},_createHelp:function(e){var t=this.options.help.definition,i=this.options.help.source,n=this._createHelpIconAnchorDomElement(t,i);$(e).prepend(n),this._attachHelpDefToIconAnchor(),this._focusable({element:n,applyHighlight:!0})},_createRequiredIconSpanDom:function(){this._createIconSpan(this.requiredSpanId,!1).appendChild(this._createRequiredIconDomElement())},_checkRequiredOption:function(){var e=this.options.showRequired;if(null!==e&&"boolean"!=typeof e)throw new Error("Option 'showRequired' has invalid value set: "+e)},_addIdsToDom:function(){this._isCustomElement&&this._refreshLabelId(),null==this.element.attr("id")&&this.element.uniqueId()},_moveLabelStyleClassesToRootDom:function(){var e,t,i,n=this.element.attr("class");if(n){i=(e=n.split(/\s+/)).length;for(var o=0;o<i;o++)(t=e[o]).indexOf("-label")>0&&(this.uiLabel.addClass(t),this.element.removeClass(t))}},_createIconSpan:function(e,t){var i=document.createElement("span");return i.setAttribute("id",e),t?this.uiLabel.find(".oj-label-group").prepend(i):this.element.before(i),i},_createRootDomElement:function(){var e,t,i=this.options.rootAttributes,n="oj-label oj-component";return i&&(e=i.class),e&&(n=n+" "+e),(t=document.createElement("div")).className=n,t.appendChild(this._createOjLabelGroupDom()),t},_createOjLabelGroupDom:function(){var e;return(e=document.createElement("div")).className="oj-label-group",e},_createRequiredIconDomElement:function(){var e=this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_REQUIRED),t=document.createElement("span");return t.className="oj-label-required-icon oj-component-icon",t.setAttribute("role","img"),t.setAttribute("title",e),t.setAttribute("aria-label",e),t},_createHelpIconAnchorDomElement:function(e,t){var i;if((i=document.createElement("a")).setAttribute("tabindex","0"),i.setAttribute("target","_blank"),i.className="oj-label-help-icon-anchor oj-label-help-icon oj-component-icon oj-clickable-icon-nocontext",t)try{n.DomUtils.validateURL(t),i.setAttribute("href",t)}catch(e){throw new Error(e+". The source option ("+t+") is invalid.")}else i.setAttribute("role","img");return e?i.setAttribute("aria-label",e):i.setAttribute("aria-label",this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_HELP)),i},_attachHelpDefToIconAnchor:function(){var e,t,i,n=this;0!==(t=this.widget().find(".oj-label-help-icon-anchor")).length&&(e=this._createHelpDefPopupDiv(),this._bTouchSupported&&(this._eatClickOnHelpIconListener&&this.widget().off(this._touchEatClickNamespace),this._eatClickOnHelpIconListener=function(){return!1},t.on("contextmenu"+this._touchEatContextMenuNamespace,!1)),this._openPopupForHelpDefCallbackListener=function(i){n._handleOpenHelpDefPopup(i,e,t)},this._closePopupForHelpDefCallbackListener=function(){n._handleCloseHelpDefPopup()},this._addShowHelpDefinitionEventHandlers(t),i={my:"start bottom",at:"end top",collision:"flipcenter",of:t},e.ojPopup({position:i,modality:"modeless",animation:{open:null,close:null}}))},_createHelpDefPopupDiv:function(){var e,t,i,n,o=this.options.help.definition;return n=o||this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_HELP),this._helpDefPopupDivId?(i=$(document.getElementById(this._helpDefPopupDivId))).length&&i.find(".oj-help-popup-container").first().text(n):((t=document.createElement("div")).className="oj-help-popup",t.style.display="none",(i=$(t)).uniqueId(),this._helpDefPopupDivId=i.prop("id"),(e=document.createElement("div")).className="oj-help-popup-container",t.appendChild(e),$(e).text(n),document.getElementsByTagName("body")[0].appendChild(t)),i},_addShowHelpDefinitionEventHandlers:function(e){var t;e.on("focusin"+this._helpDefPopupNamespace+" mouseenter"+this._helpDefPopupNamespace,this._openPopupForHelpDefCallbackListener),e.on("mouseleave"+this._helpDefPopupNamespace,this._closePopupForHelpDefCallbackListener),this._bTouchSupported&&(this.options.help.source?(t={recognizers:[[Hammer.Press,{time:n.DomUtils.PRESS_HOLD_THRESHOLD}]]},e.ojHammer(t),this._on(e,{press:this._openPopupForHelpDefCallbackListener})):(t={recognizers:[[Hammer.Tap],[Hammer.Press,{time:n.DomUtils.PRESS_HOLD_THRESHOLD}]]},e.ojHammer(t),this._on(e,{press:this._openPopupForHelpDefCallbackListener,tap:this._openPopupForHelpDefCallbackListener})))},_handleOpenHelpDefPopup:function(e,t,i){if(!t.ojPopup("isOpen"))if(this._bTouchSupported){if("press"===e.type){var o=this.widget();o.on("click"+this._touchEatClickNamespace,this._eatClickOnHelpIconListener);var s=this;t.on("ojclose",function(){o.off(s._touchEatClickNamespace)})}else t.off("ojclose");"press"!==e.type&&"tap"!==e.type&&(n.DomUtils.recentTouchStart()||"focusin"!==e.type&&"mouseenter"!==e.type)||t.ojPopup("open",i)}else t.ojPopup("open",i)},_handleCloseHelpDefPopup:function(){null!=this._helpDefPopupDivId&&$(document.getElementById(this._helpDefPopupDivId)).ojPopup("close")},_removeHelpDefIconEventListeners:function(e){this._bTouchSupported&&(this.widget().off(this._touchEatClickNamespace),e.off(this._touchEatContextMenuNamespace),this._eatClickOnHelpIconListener=null,this._eatContextMenuOnHelpIconListener=null,e.ojHammer("destroy")),e.off(this._helpDefPopupNamespace),this._openPopupForHelpDefCallbackListener=null,this._closePopupForHelpDefCallbackListener=null},_removeHelpDefPopup:function(){var e;null!=this._helpDefPopupDivId&&((e=$(document.getElementById(this._helpDefPopupDivId)))&&(e.ojPopup("destroy"),e.remove()),this._helpDefPopupDivId=null)},_needsHelpIcon:function(){var e,t,i=this.options,n=i.help.source;return(t=""!==n&&null!=n)||(t=""!==(e=i.help.definition)&&null!=e),t},_refreshHelp:function(){var e,t,i=this.helpSpanId;1===(t=this.uiLabel.find(".oj-label-help-icon")).length&&(this._removeHelpDefIconEventListeners(t),this._removeHelpDefPopup(),t.remove()),e=document.getElementById(i),this._needsHelpIcon()?(null==e&&(e=this._createIconSpan(i,!0)),this._createHelp(e),this._isCustomElement&&this._addHelpSpanIdOnTarget(i)):null!==e&&(e.parentNode.removeChild(e),this._isCustomElement&&this._removeHelpSpanIdOnTarget(i))},_refreshRequired:function(){var e,t,i=this.requiredSpanId;e=document.getElementById(i),this.options.showRequired?e?(t=this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_REQUIRED),this.uiLabel.find(".oj-label-required-icon").attr("title",t)):(this._createRequiredIconSpanDom(),this._isCustomElement&&this._addRequiredDescribedByOnCustomFormElement()):(null!==(e=document.getElementById(i))&&e.parentNode.removeChild(e),this._isCustomElement&&this._removeRequiredDescribedByOnCustomFormElement())},_refreshFor:function(){var e;(e=this._getForTargetElement())&&this._addForOnLabel(e)},_refreshLabelId:function(){var e,t;(e=this.options.labelId)?this.element.attr("id",e):(t=this.uiLabel.attr("id"))&&this.element.attr("id",t+"|label")},_setOption:function(e,t){switch(this._superApply(arguments),e){case"showRequired":this._refreshRequired();break;case"help":this._refreshHelp();break;case"for":this._isCustomElement&&this._refreshFor();break;case"labelId":this._isCustomElement&&this._refreshLabelId()}},getNodeBySubId:function(e){var t;return(t=this._super(e))||"oj-label-help-icon"===e.subId&&(t=this.widget().find(".oj-label-help-icon")[0]),t||null},getSubIdByNode:function(e){var t=null;return null!=e&&e===this.widget().find(".oj-label-help-icon")[0]&&(t={subId:"oj-label-help-icon"}),t||this._superApply(arguments)},_destroy:function(){var e=this.uiLabel.find(".oj-label-help-icon");return this._removeHelpDefIconEventListeners(e),this._removeHelpDefPopup(),this.helpSpanId=null,this.requiredSpanId=null,this._isCustomElement=null,n.DomUtils.unwrap(this.element,this.uiLabel),this._super()}}),pn.extension._WIDGET_NAME="ojLabel",pn.extension._INNER_ELEM="label",pn.extension._GLOBAL_TRANSFER_ATTRS=["accesskey"],n.CustomElementBridge.register("oj-label",{metadata:pn});var _n={properties:{colspan:{type:"number",value:1},labelEdge:{type:"string",enumValues:["inherit","start","top"],value:"inherit"},labelWidth:{type:"string",value:"inherit"}},methods:{setProperty:{},getProperty:{},setProperties:{},refresh:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};function mn(e){var t,i,n=e.element;this.createDOM=function(){n.classList.add("oj-label-value","oj-form");var e=document.createElement("div");for(e.classList.add("oj-flex"),e.setAttribute("data-oj-context",""),e.setAttribute("data-oj-internal",""),(t=document.createElement("div")).classList.add("oj-flex-item"),t.setAttribute("data-oj-context",""),t.setAttribute("data-oj-internal",""),(i=document.createElement("div")).classList.add("oj-flex-item"),i.setAttribute("data-oj-context",""),i.setAttribute("data-oj-internal","");n.firstElementChild;){var o=n.firstElementChild;switch(o.getAttribute("slot")){case"label":t.appendChild(o);break;case"value":i.appendChild(o);break;default:n.removeChild(o)}}e.appendChild(t),e.appendChild(i),n.appendChild(e)},this.updateDOM=function(){var e=function(){for(var e=n.parentElement;e;e=e.parentElement)if(-1!==e.tagName.indexOf("-"))return e;return null}(),o=function(e){var t="top";"inherit"===n.labelEdge?e&&"labelEdge"in e&&(t=e.labelEdge):t=n.labelEdge;return t}(e),s="start"===o?function(e){var t="33%";if("inherit"===n.labelWidth){if(e&&"labelWidth"in e){t=e.labelWidth;var i=t.match(/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/);if("%"===i[2]){var o=Number(n.getAttribute("data-oj-colspan"));o>0&&(t=i[1]/o+i[2])}}}else t=n.labelWidth;return t}(e):"100%",r=function(e){var t="column";e&&"direction"in e&&(t=e.direction);return t}(e);"start"===o?n.classList.add("oj-formlayout-labels-inline"):n.classList.remove("oj-formlayout-labels-inline"),"row"===r?n.classList.add("oj-formlayout-form-across"):n.classList.remove("oj-formlayout-form-across"),t.style.webkitFlex="0 1 "+s,t.style.flex="0 1 "+s,t.style.maxWidth=s,t.style.width=s,i.style.webkitFlex="1 1 0",i.style.flex="1 1 0"}}_n.extension._CONSTRUCTOR=mn,n.CustomElementBridge.register("oj-label-value",{metadata:_n});var gn={properties:{as:{type:"string",value:""},data:{type:"oj.DataProvider"},drilling:{type:"string",enumValues:["off","on"],value:"off"},expanded:{type:"KeySet",writeback:!0},halign:{type:"string",enumValues:["center","end","start"],value:"start"},hiddenCategories:{type:"Array<string>",writeback:!0,value:[]},hideAndShowBehavior:{type:"string",enumValues:["off","on"],value:"off"},highlightedCategories:{type:"Array<string>",writeback:!0,value:[]},hoverBehavior:{type:"string",enumValues:["dim","none"],value:"none"},hoverBehaviorDelay:{type:"number",value:200},orientation:{type:"string",enumValues:["horizontal","vertical"],value:"vertical"},scrolling:{type:"string",enumValues:["asNeeded","off"],value:"asNeeded"},sections:{type:"Array<Object>"},symbolHeight:{type:"number",value:0},symbolWidth:{type:"number",value:0},textStyle:{type:"object",value:{}},trackResize:{type:"string",enumValues:["off","on"],value:"on"},translations:{type:"object",value:{},properties:{componentName:{type:"string"},labelAndValue:{type:"string"},labelClearSelection:{type:"string"},labelCountWithTotal:{type:"string"},labelDataVisualization:{type:"string"},labelInvalidData:{type:"string"},labelNoData:{type:"string"},stateCollapsed:{type:"string"},stateDrillable:{type:"string"},stateExpanded:{type:"string"},stateHidden:{type:"string"},stateIsolated:{type:"string"},stateMaximized:{type:"string"},stateMinimized:{type:"string"},stateSelected:{type:"string"},stateUnselected:{type:"string"},stateVisible:{type:"string"}}},valign:{type:"string",enumValues:["bottom","middle","top"],value:"top"}},methods:{getSection:{},getItem:{},getPreferredSize:{},getContextByNode:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojDrill:{}},extension:{}},fn={properties:{borderColor:{type:"string",value:""},categories:{type:"Array<string>",value:[]},categoryVisibility:{type:"string",enumValues:["hidden","visible"],value:"visible"},color:{type:"string",value:"#a6acb1"},drilling:{type:"string",enumValues:["inherit","off","on"],value:"inherit"},lineStyle:{type:"string",enumValues:["dashed","dotted","solid"],value:"solid"},lineWidth:{type:"number"},markerColor:{type:"string",value:"#a6acb1"},markerShape:{type:'"circle"|"diamond"|"ellipse"|"human"|"plus"|"rectangle"|"square"|"star"|"triangleDown"|"triangleUp"|string',value:"square"},markerSvgClassName:{type:"string",value:""},markerSvgStyle:{type:"object",value:{}},pattern:{type:"string",enumValues:["largeChecker","largeCrosshatch","largeDiagonalLeft","largeDiagonalRight","largeDiamond","largeTriangle","none","smallChecker","smallCrosshatch","smallDiagonalLeft","smallDiagonalRight","smallDiamond","smallTriangle"],value:"none"},shortDesc:{type:"string",value:""},source:{type:"string",value:""},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}},symbolType:{type:"string",enumValues:["image","line","lineWithMarker","marker"],value:"marker"},text:{type:"string",value:""}},extension:{}},vn={properties:{collapsible:{type:"string",enumValues:["off","on"],value:"off"},text:{type:"string",value:""},textHalign:{type:"string",enumValues:["center","end","start"],value:"start"},textStyle:{type:"object",value:{}}},extension:{}};n.__registerWidget("oj.ojLegend",$.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{as:"",data:null,drilling:"off",halign:"start",hiddenCategories:[],hideAndShowBehavior:"off",highlightedCategories:[],hoverBehavior:"none",hoverBehaviorDelay:200,orientation:"vertical",scrolling:"asNeeded",sections:null,symbolHeight:0,symbolWidth:0,textStyle:{},valign:"top",drill:null},_CreateDvtComponent:function(e,t,i){return dvt.Legend.newInstance(e,t,i)},_InitOptions:function(e,t){this._super(e,t);var i=this.options.expanded;this.options.expanded=i},_ConvertLocatorToSubId:function(e){var t=e.subId;return"oj-legend-item"===t?(t="section"+this._GetStringFromIndexPath(e.sectionIndexPath),t+=":item["+e.itemIndex+"]"):"oj-legend-tooltip"===t&&(t="tooltip"),t},_ConvertSubIdToLocator:function(e){var t={};if(e.indexOf(":item")>0){var i=e.indexOf(":item"),n=e.substring(0,i),o=e.substring(i);t.subId="oj-legend-item",t.sectionIndexPath=this._GetIndexPath(n),t.itemIndex=this._GetFirstIndex(o)}else"tooltip"===e&&(t.subId="oj-legend-tooltip");return t},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-legend"),e},_GetChildStyleClasses:function(){var e=this._super();return e["oj-legend"]={path:"textStyle",property:"TEXT"},e["oj-legend-title"]={path:"titleStyle",property:"TEXT"},e["oj-legend-section-title"]={path:"_sectionTitleStyle",property:"TEXT"},e},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtUtilBundle.LEGEND"]=e.componentName,t},_GetEventTypes:function(){return["drill","expand","collapse"]},_HandleEvent:function(e){var t=e.type;"drill"===t?this._trigger("drill",null,{id:e.id}):"expand"===t||"collapse"===t?this._UserOptionChange("expanded",e.expanded):this._super(e)},_LoadResources:function(){null==this.options._resources&&(this.options._resources={});var e=this.options._resources;e.closedEnabled="oj-legend-section-close-icon",e.closedOver="oj-legend-section-close-icon oj-hover",e.closedDown="oj-legend-section-close-icon oj-active",e.openEnabled="oj-legend-section-open-icon",e.openOver="oj-legend-section-open-icon oj-hover",e.openDown="oj-legend-section-open-icon oj-active"},_GetSimpleDataProviderConfigs:function(){return{data:{templateName:function(e){return e.children?"sectionTemplate":"itemTemplate"},templateElementName:function(e){return e.children?"oj-legend-section":"oj-legend-item"},resultPath:"sections",getAliasedPropertyNames:function(e){return"oj-legend-section"===e?{text:"title",textHalign:"titleHalign",textStyle:"titleStyle"}:{}},processChildrenData:function(e,t,i){e.sections=[],e.items=[];for(var n=0;n<i.length;n++){var o=i[n];t.children[n].children?e.sections.push(o):e.items.push(o)}},expandedKeySet:new pi.ExpandAllKeySet,processOptionData:function(e){for(var t={sections:[],items:[]},i=0;i<e.length;i++)e[i].items||e[i].sections?t.sections.push(e[i]):t.items.push(e[i]);return t.items.length>0?[t]:e}}}},_Render:function(){this._super()},getTitle:function(){return this._component.getAutomation().getTitle()},getSection:function(e){var t=this._component.getAutomation().getSection(e);return t&&(t.getSection=function(e){return t.sections?t.sections[e]:null},t.getItem=function(e){return t.items?t.items[e]:null}),t},getItem:function(e){return this._component.getAutomation().getItem(e)},getPreferredSize:function(e,t){for(var i=!1,n=this.options.sections?this.options.sections:[],o=0;o<n.length;o++){var s=n[o].items;s&&s.then&&(i=!0)}var r=i?null:this.options,a=this._component.getPreferredSize(r,e,t);return{width:a.getWidth(),height:a.getHeight()}},getContextByNode:function(e){var t=this.getSubIdByNode(e);return t&&"oj-legend-tooltip"!==t.subId?t:null},_GetComponentDeferredDataPaths:function(){return{sections:["items"],root:["data"]}},_GetComponentNoClonePaths:function(){var e=this._super();return e.sections={items:!0},e}}),w.setDefaultOptions({ojLegend:{expanded:w.createDynamicPropertyGetter(function(e){return e.isCustomElement&&e.element.getAttribute("data")?new n.ExpandAllKeySet:null})}}),gn.extension._WIDGET_NAME="ojLegend",n.CustomElementBridge.register("oj-legend",{metadata:gn}),function(){fn.extension._CONSTRUCTOR=function(){};n.CustomElementBridge.register("oj-legend-item",{metadata:fn,parseFunction:Zt.shapeParseFunction({"marker-shape":!0},{circle:!0,ellipse:!0,diamond:!0,triangleUp:!0,triangleDown:!0,plus:!0,human:!0,rectangle:!0,star:!0,square:!0})})}(),vn.extension._CONSTRUCTOR=function(){},n.CustomElementBridge.register("oj-legend-section",{metadata:vn});var yn=function(){function e(e,t){this.dataProvider=e,this.options=t,this._KEY="key",this._KEYS="keys",this._DATA="data",this._STARTINDEX="startIndex",this._SORT="sort",this._SORTCRITERIA="sortCriteria",this._FILTERCRITERION="filterCriterion",this._METADATA="metadata",this._FROM="from",this._OFFSET="offset",this._REFRESH="refresh",this._MUTATE="mutate",this._SIZE="size",this._FETCHPARAMETERS="fetchParameters",this._VALUE="value",this._DONE="done",this._DATAMAPPING="dataMapping",this._MAPFIELDS="mapFields",this._MAPSORTCRITERIA="mapSortCriteria",this._MAPFILTERCRITERION="mapFilterCriterion",this._UNMAPSORTCRITERIA="mapSortCriteria",this._RESULTS="results",this._CONTAINSPARAMETERS="containsParameters",this._DEFAULT_SIZE=25,this._CONTAINSKEYS="containsKeys",this._FETCHBYKEYS="fetchByKeys",this._FETCHBYOFFSET="fetchByOffset",this._FETCHFIRST="fetchFirst",this._ADDEVENTLISTENER="addEventListener",this._FETCHATTRIBUTES="attributes",this.AsyncIterable=function(){return function(e,t){this._parent=e,this._asyncIterator=t,this[Symbol.asyncIterator]=function(){return this._asyncIterator}}}(),this.AsyncIterator=function(){function e(e,t,i){this._parent=e,this._nextFunc=t,this._params=i}return e.prototype.next=function(){var e=this._nextFunc(this._params);return Promise.resolve(e)},e}(),this.AsyncIteratorResult=function(){return function(e,t,i){this._parent=e,this.value=t,this.done=i,this[e._VALUE]=t,this[e._DONE]=i}}(),this.FetchListResult=function(){return function(e,t,i,n){this._parent=e,this.fetchParameters=t,this.data=i,this.metadata=n,this[e._FETCHPARAMETERS]=t,this[e._DATA]=i,this[e._METADATA]=n}}(),this.Item=function(){return function(e,t,i){this._parent=e,this.metadata=t,this.data=i,this[e._METADATA]=t,this[e._DATA]=i}}(),this.ItemMetadata=function(){return function(e,t){this._parent=e,this.key=t,this[e._KEY]=t}}(),this.FetchListParameters=function(){return function(e,t,i,n,o){this._parent=e,this.size=t,this.sortCriteria=i,this.filterCriterion=n,this.attributes=o,this[e._SIZE]=t,this[e._SORTCRITERIA]=i,this[e._FILTERCRITERION]=n,this[e._FETCHATTRIBUTES]=o}}(),this.FetchByKeysParameters=function(){return function(e,t,i){this._parent=e,this.keys=t,this.attributes=i,this[e._KEYS]=t,this[e._FETCHATTRIBUTES]=i}}(),this.FetchByOffsetParameters=function(){return function(e,t,i,n,o,s){this._parent=e,this.offset=t,this.size=i,this.sortCriteria=n,this.filterCriterion=o,this.attributes=s,this[e._SIZE]=i,this[e._SORTCRITERIA]=n,this[e._OFFSET]=t,this[e._FILTERCRITERION]=o,this[e._FETCHATTRIBUTES]=s}}(),this.FetchByKeysResults=function(){return function(e,t,i){this._parent=e,this.fetchParameters=t,this.results=i,this[e._FETCHPARAMETERS]=t,this[e._RESULTS]=i}}(),this.ContainsKeysResults=function(){return function(e,t,i){this._parent=e,this.containsParameters=t,this.results=i,this[e._CONTAINSPARAMETERS]=t,this[e._RESULTS]=i}}(),this[this._FROM]=null==this.options?null:this.options[this._FROM],this[this._OFFSET]=null==this.options?0:this.options[this._OFFSET]>0?this.options[this._OFFSET]:0,this[this._SORTCRITERIA]=null==this.options?null:this.options[this._SORTCRITERIA],this[this._DATAMAPPING]=null==this.options?null:this.options[this._DATAMAPPING],this[this._FETCHATTRIBUTES]=null==this.options?null:this.options[this._FETCHATTRIBUTES],this._addEventListeners(e)}return e.prototype.containsKeys=function(e){var t=this;return this.dataProvider[t._CONTAINSKEYS]?this.dataProvider[t._CONTAINSKEYS](e):this.fetchByKeys(e).then(function(i){var n=new Set;return e[t._KEYS].forEach(function(e){null!=i[t._RESULTS].get(e)&&n.add(e)}),Promise.resolve(new t.ContainsKeysResults(t,e,n))})},e.prototype.fetchByKeys=function(e){var t=this,i=null!=e?e[this._KEYS]:null,n=null!=e?e[this._FETCHATTRIBUTES]:null;null==n&&(n=this[this._FETCHATTRIBUTES]);var o=new t.FetchByKeysParameters(t,i,n);if(this.dataProvider[t._FETCHBYKEYS])return this.dataProvider[t._FETCHBYKEYS](o).then(function(e){var i=e[t._RESULTS],n=new Map;return i.forEach(function(e,i){var o=t._getMappedItems([e]);n.set(i,o[0])}),new t.FetchByKeysResults(t,o,n)});var s=new this.FetchListParameters(this,this._DEFAULT_SIZE,null,null,n),r=new Map,a=this.dataProvider[t._FETCHFIRST](s)[Symbol.asyncIterator]();return this._fetchNextSet(e,a,r).then(function(e){var i=new Map;return e.forEach(function(e,n){var o=t._getMappedItems([e]);i.set(n,o[0])}),new t.FetchByKeysResults(t,o,i)})},e.prototype.fetchFirst=function(e){var t={};t[this._DATA]=[],t[this._KEYS]=[],t[this._DONE]=!1,t[this._STARTINDEX]=0;var i=null!=e?e[this._SIZE]:null,n=null!=e?e[this._SORTCRITERIA]:null;null==n&&(n=this[this._SORTCRITERIA]);var o=this._getMappedSortCriteria(n),s=null!=e?e[this._FILTERCRITERION]:null,r=this._getMappedFilterCriterion(s),a=null!=e?e[this._FETCHATTRIBUTES]:null;null==a&&(a=this[this._FETCHATTRIBUTES]);var l=this;if(null==l[this._FROM]&&l[this._OFFSET]>0){var u=l[this._OFFSET];return new this.AsyncIterable(this,new this.AsyncIterator(this,function(e){return function(){var t=new l.FetchByOffsetParameters(l,u,i,o,r,a);return l.dataProvider[l._FETCHBYOFFSET](t).then(function(t){var n=t.results,o=n.map(function(e){return e[l._DATA]}),s=(n.map(function(e){return e[l._METADATA]}),n.map(function(e){return e[l._METADATA][l._KEY]}));u+=s.length;var r=l._getMappedDataAndKeys(s,o);l._cacheResult(e,r[l._DATA],r[l._KEYS]),e[l._DONE]=t[l._DONE];var a=t[l._FETCHPARAMETERS],d=null!=a?a[l._SORTCRITERIA]:null,h=l._getUnmappedSortCriteria(d),c=new l.FetchByOffsetParameters(l,l[l._OFFSET],i,h);return Promise.resolve(new l.AsyncIteratorResult(l,new l.FetchListResult(l,c,r[l._DATA],r[l._METADATA]),e[l._DONE]))})}}(t),e))}var d=new this.FetchListParameters(this,i,o,r,a),h=this.dataProvider[l._FETCHFIRST](d)[Symbol.asyncIterator]();return new this.AsyncIterable(this,new this.AsyncIterator(this,function(t,i){return function(){return i.next().then(function(n){var o=n[l._VALUE][l._DATA],s=n[l._VALUE][l._METADATA],r=s.map(function(e){return e[l._KEY]}),a=(o.map(function(e,t){return new l.Item(l,s[t],o[t])}),l._getMappedDataAndKeys(r,o));l._cacheResult(t,a[l._DATA],a[l._KEYS]),t[l._DONE]=n[l._DONE];var u=null!=e?e[l._SIZE]:null,d=(null!=e&&e[l._OFFSET],n[l._VALUE][l._FETCHPARAMETERS]),h=null!=d?d[l._SORTCRITERIA]:null,c=l._getUnmappedSortCriteria(h),p=new l.FetchListParameters(l,u,c);return l._fetchUntilKey(p,l[l._FROM],t,i).then(function(){return l._fetchUntilOffset(p,l[l._OFFSET]+t[l._STARTINDEX],o.length,t,i)})})}}(t,h),e))},e.prototype.getCapability=function(e){return this.dataProvider.getCapability(e)},e.prototype.getTotalSize=function(){return this.dataProvider.getTotalSize()},e.prototype.isEmpty=function(){return this.dataProvider.isEmpty()},e.prototype._fetchNextSet=function(e,t,i){var o=this;return t.next().then(function(s){var r=s[o._VALUE],a=r[o._DATA],l=r[o._METADATA],u=l.map(function(e){return e[o._KEY]}),d=!0;return e[o._KEYS].forEach(function(e){i.has(e)||u.map(function(t,s){n.Object.compareValues(t,e)&&i.set(e,new o.Item(o,l[s],a[s]))}),i.has(e)||(d=!1)}),d||s[o._DONE]?i:o._fetchNextSet(e,t,i)})},e.prototype._fetchUntilKey=function(e,t,i,n){var o=this;if(null!=t){var s=i[this._KEYS].filter(function(e){if(t==e)return!0});if(s.length>0){var r=i[this._KEYS].indexOf(s[0]);i[this._KEYS]=i[this._KEYS].slice(r,i[this._KEYS].length),i[this._DATA]=i[this._DATA].slice(r,i[this._DATA].length)}else{if(!i[o._DONE])return n.next().then(function(e){var t=e[o._VALUE][o._DATA],s=e[o._VALUE][o._METADATA].map(function(e){return e[o._KEY]}),r=o._getMappedDataAndKeys(s,t);return o._cacheResult(i,r[o._DATA],r[o._KEYS]),i[o._DONE]=e[o._DONE],o._fetchUntilKey(e[o._FETCHPARAMETERS],r[o._KEYS],i,n)});i[this._DATA]=[],i[this._KEYS]=[]}}return Promise.resolve(null)},e.prototype._fetchUntilOffset=function(e,t,i,n,o){var s=this,r=null!=e&&e[this._SIZE]>0?e[this._SIZE]:i;t=t>0?t:0;var a=n[this._KEYS].slice(t,t+r),l=n[this._DATA].slice(t,t+r),u=a.map(function(e){return new s.ItemMetadata(s,e)});return l.length<r?n[s._DONE]?(n[this._STARTINDEX]=n[this._STARTINDEX]+l.length,Promise.resolve(new s.AsyncIteratorResult(s,new s.FetchListResult(s,e,l,u),!0))):o.next().then(function(e){var i=e[s._VALUE][s._DATA],r=e[s._VALUE][s._METADATA].map(function(e){return e[s._KEY]}),a=s._getMappedDataAndKeys(r,i);return s._cacheResult(n,a[s._DATA],a[s._KEYS]),n[s._DONE]=e[s._DONE],s._fetchUntilOffset(e[s._VALUE][s._FETCHPARAMETERS],t,i.length,n,o)}):(n[this._STARTINDEX]=n[this._STARTINDEX]+l.length,Promise.resolve(new s.AsyncIteratorResult(s,new s.FetchListResult(s,e,l,u),n[s._DONE])))},e.prototype._cacheResult=function(e,t,i){var n=this;t.map(function(t){e[n._DATA].push(t)}),i.map(function(t){e[n._KEYS].push(t)})},e.prototype._getMappedItems=function(e){var t=this;if(null!=this[this._DATAMAPPING]){var i=this[this._DATAMAPPING][this._MAPFIELDS];if(null!=i&&null!=e&&e.length>0){new Array;return e.map(function(e){return i.bind(t)(e)})}}return e},e.prototype._getMappedDataAndKeys=function(e,t){var i=this,n=t.map(function(n,o){return new i.Item(i,new i.ItemMetadata(i,e[o]),t[o])}),o=this._getMappedItems(n),s=o.map(function(e){return e[i._DATA]}),r=o.map(function(e){return e[i._METADATA][i._KEY]}),a=o.map(function(e){return e[i._METADATA]}),l={};return l[this._DATA]=s,l[this._KEYS]=r,l[this._METADATA]=a,l},e.prototype._getMappedFilterCriterion=function(e){if(null!=this[this._DATAMAPPING]){var t=this[this._DATAMAPPING][this._MAPFILTERCRITERION];if(null!=t&&null!=e)return t(e)}return e},e.prototype._getMappedSortCriteria=function(e){if(null!=this[this._DATAMAPPING]){var t=this[this._DATAMAPPING][this._MAPSORTCRITERIA];if(null!=t&&null!=e&&e.length>0)return t(e)}return e},e.prototype._getUnmappedSortCriteria=function(e){if(null!=this[this._DATAMAPPING]){var t=this[this._DATAMAPPING][this._UNMAPSORTCRITERIA];if(null!=t&&null!=e&&e.length>0)return t(e)}return e},e.prototype._addEventListeners=function(e){var t=this;e[t._ADDEVENTLISTENER](this._REFRESH,function(e){t.dispatchEvent(e)}),e[t._ADDEVENTLISTENER](this._MUTATE,function(e){t.dispatchEvent(e)})},e}();n.ListDataProviderView=yn,n.ListDataProviderView=yn,n.EventTargetMixin.applyMixin(yn),n.FetchByOffsetMixin.applyMixin(yn),n.ListViewDndContext=function(e){this.listview=e},n.Object.createSubclass(n.ListViewDndContext,n.Object,"oj.ListViewDndContext"),n.ListViewDndContext.C_KEY=67,n.ListViewDndContext.V_KEY=86,n.ListViewDndContext.X_KEY=88,n.ListViewDndContext.CUT_COMMAND="cut",n.ListViewDndContext.COPY_COMMAND="copy",n.ListViewDndContext.PASTE_COMMAND="paste",n.ListViewDndContext.PASTE_BEFORE_COMMAND="pasteBefore",n.ListViewDndContext.PASTE_AFTER_COMMAND="pasteAfter",n.ListViewDndContext.prototype.reset=function(){this._unsetSelectionDraggable(),this.m_itemsDragged=null,this.m_dragImage=null,this.m_currentDragItem=null,this.m_dragItems=null,this.m_contextMenuItem=null},n.ListViewDndContext.prototype._getDndOptions=function(e){var t=this.listview.GetOption("dnd");return null!=t&&t[e]?t[e].items:null},n.ListViewDndContext.prototype._getDragOptions=function(){return this._getDndOptions("drag")},n.ListViewDndContext.prototype._getDropOptions=function(){return this._getDndOptions("drop")},n.ListViewDndContext.prototype.IsItemReOrdering=function(){return"enabled"===this._getDndOptions("reorder")},n.ListViewDndContext.prototype.GetDragAffordanceClass=function(){return"oj-listview-drag-handle"},n.ListViewDndContext.prototype.GetDragImageClass=function(){return"oj-listview-drag-image"},n.ListViewDndContext.prototype.GetDragItemClass=function(){return"oj-listview-drag-item"},n.ListViewDndContext.prototype.GetCutStyleClass=function(){return"oj-listview-cut"},n.ListViewDndContext.prototype.GetCommandPrefix=function(){return"oj-listview-"},n.ListViewDndContext.prototype._findItem=function(e){return this.listview.FindItem(e)},n.ListViewDndContext.prototype._getSelectedItems=function(e){var t=[];if(this.listview._isSelectionEnabled())for(var i=this.listview.GetOption("selection"),n=0;n<i.length;n++){var o=this.listview.FindElementByKey(i[n]);null==o||this.listview.SkipFocus($(o))||t.push(o)}else{var s=this._getActiveItem();null!=s&&t.push(s)}return!e&&null!=this.m_contextMenuItem&&this.m_contextMenuItem.length>0&&(this.listview.element.get(0).contains(this.m_contextMenuItem.get(0))?-1===t.indexOf(this.m_contextMenuItem.get(0))&&(t=[this.m_contextMenuItem.get(0)]):this.m_contextMenuItem=null),t},n.ListViewDndContext.prototype._getActiveItem=function(){return null==this.listview.m_active?null:this.listview.m_active.elem[0]},n.ListViewDndContext.prototype.itemRenderComplete=function(e,t){$(e).hasClass(this.listview.getItemStyleClass())||(e=e.firstElementChild);var i=$(e).find("."+this.GetDragAffordanceClass());if(null!=i&&i.length>0){var n=i.attr("aria-labelledby");null==n?i.attr("aria-labelledby",this.listview._createSubId("instr")):i.attr("aria-labelledby",n+" "+this.listview._createSubId("instr")),this.listview._isTouchSupport()&&i.attr("draggable","true")}},n.ListViewDndContext.prototype._unsetSelectionDraggable=function(){this.m_draggableSelection&&$.each(this.m_draggableSelection,function(e,t){$(t).removeClass("oj-draggable")})},n.ListViewDndContext.prototype.setSelectionDraggable=function(){var e=[];this._unsetSelectionDraggable();for(var t=this.listview.GetOption("selection"),i=0;i<t.length;i++){var n=this.listview.FindElementByKey(t[i]);null==n||this.listview.SkipFocus($(n))||(e.push(n),$(n).addClass("oj-draggable"))}this.m_draggableSelection=e},n.ListViewDndContext.prototype._setItemDraggable=function(e){var t=this.GetDragAffordanceClass(),i=e.find("."+t);return null!=i&&i.length>0||(e.addClass("oj-draggable"),!1)},n.ListViewDndContext.prototype._unsetItemDraggable=function(e){e.removeClass("oj-draggable")},n.ListViewDndContext.prototype._setDraggable=function(e){if(null!=this._getDragOptions()||this.IsItemReOrdering()){var t,i=this.GetDragAffordanceClass();if(e.hasClass(i))t=$(e);else{var n=this._findItem(e);if(this.shouldDragCurrentItem())t=n;else{if(null!=n)if(this._setItemDraggable(n))return;var o=this._getSelectedItems(!0);o.length>0&&(null!=n&&o.indexOf(n[0])>-1?t=n:$(o[0]).removeClass("oj-draggable"))}}null!=t&&t.attr("draggable",!0)}},n.ListViewDndContext.prototype._unsetDraggable=function(e){if(null!=this._getDragOptions()||this.IsItemReOrdering()){var t,i=this.GetDragAffordanceClass();null!=(t=e.hasClass(i)?$(e):this._findItem(e))&&t.removeAttr("draggable")}},n.ListViewDndContext.prototype._invokeDndCallback=function(t,i,n,o){var s,r="drag"===t?this._getDragOptions():this._getDropOptions();if(r){var a=r[i];if(a&&"function"==typeof a)try{this.listview.ojContext._IsCustomElement()?(a(n.originalEvent,o),n.originalEvent.defaultPrevented&&n.preventDefault()):(n.dataTransfer=n.originalEvent.dataTransfer,s=a(n,o))}catch(t){e.error("Error: "+t)}else s=-1}else s=-1;return s},n.ListViewDndContext.prototype._setDragItemDataTransfer=function(e,t,i){for(var n=[],o=0;o<i.length;o++){var s=this.listview._getDataForItem(i[o]);s&&(s.innerHTML&&s.tagName&&"LI"===s.tagName?n.push(s.innerHTML):n.push(s))}return n.length>0?(this._setDragItemData(e.originalEvent,t,n),this.SetDragItemImage(e.originalEvent,i),{items:n}):null},n.ListViewDndContext.prototype._setDragItemData=function(e,t,i){var n=e.dataTransfer,o=JSON.stringify(i);if("string"==typeof t)n.setData(t,o);else if(t)for(var s=0;s<t.length;s++)n.setData(t[s],o);n.setData(this.GetDragSourceType(),this.listview.element.get(0).id)},n.ListViewDndContext.prototype.SetDragItemImage=function(e,t){var i,n,o,s=0,r=0,a=e.target;if(t.length>1){var l;(i=$(document.createElement("ul"))).get(0).className=this.listview.element.get(0).className,i.addClass(this.GetDragImageClass()).css({width:this.listview.element.css("width"),height:this.listview.element.css("height")});var u=Number.MAX_VALUE;for(l=0;l<t.length;l++)u=Math.min(u,t[l].offsetTop);for(l=0;l<t.length;l++){n=t[l].offsetTop-u;var d=t[l].offsetWidth;(o=$(t[l].cloneNode(!0))).removeClass("oj-selected oj-focus oj-hover").css({position:"absolute",top:n,width:d}),i.append(o)}}else $(a).hasClass(this.GetDragAffordanceClass())?(n=0,$.contains(t[0],a.offsetParent)&&(n=a.offsetTop),s=Math.max(0,a.offsetLeft-t[0].offsetLeft)+a.offsetWidth/2,r=n+a.offsetHeight/2):(s=Math.max(0,e.offsetX),r=Math.max(0,e.offsetY)),(o=$(t[0].cloneNode(!0))).removeClass("oj-selected oj-focus oj-hover").addClass("oj-drag"),(i=$(document.createElement("ul"))).get(0).className=this.listview.element.get(0).className,i.addClass(this.GetDragImageClass()).css({width:this.GetDragImageWidth(t[0]),height:2*t[0].offsetHeight}).append(o);this.listview.isCardLayout()&&i.addClass("oj-listview-card-layout"),$("body").append(i),this.m_dragImage=i,e.dataTransfer.setDragImage(i.get(0),s,r)},n.ListViewDndContext.prototype.GetDragImageWidth=function(){return this.listview.element.css("width")},n.ListViewDndContext.prototype.GetDefaultDataType=function(){return"text/ojlistview-items-data"},n.ListViewDndContext.prototype._handleDragStart=function(e){var t,i,n=this._getDragOptions();if((null!=n||this.IsItemReOrdering())&&(t=null!=n?n.dataTypes:this.GetDefaultDataType(),$(e.target).hasClass(this.GetDragAffordanceClass())||this.shouldDragCurrentItem()?(i=[]).push(this._findItem(e.target)[0]):i=this._getSelectedItems(!0),i.length>0)){this.m_dragItems=i,this.m_currentDragItem=$(i[0]);var o=this._setDragItemDataTransfer(e,t,i);if(o){var s=this._invokeDndCallback("drag","dragStart",e,o);if(-1===s)return;return s}return!1}},n.ListViewDndContext.prototype._handleDrag=function(e){return this._invokeDndCallback("drag","drag",e)},n.ListViewDndContext.prototype._destroyDragImage=function(){null!=this.m_dragImage&&(this.m_dragImage.remove(),this.m_dragImage=null)},n.ListViewDndContext.prototype._handleDragEnd=function(e){if(null!=this.m_currentDragItem&&null!=this.m_dragItems){this.m_currentDragItem.find("."+this.GetDragAffordanceClass()).removeAttr("draggable"),this.m_currentDragItem.removeClass("oj-drag oj-draggable").removeAttr("draggable");for(var t=0;t<this.m_dragItems.length;t++)$(this.m_dragItems[t]).removeClass(this.GetDragItemClass()).css("display","")}this._cleanupDropTarget(),this._destroyDragImage(),this._unsetSelectionDraggable(),this._invokeDndCallback("drag","dragEnd",e),this.m_itemsDragged=this.m_dragItems,this.m_dragImage=null,this.m_currentDragItem=null,this.m_dragItems=null,this.listview._doBlur()},n.ListViewDndContext.prototype._matchDragDataType=function(e){var t=this._getDropOptions();if(t&&t.dataTypes)for(var i=t.dataTypes,n="string"==typeof i?[i]:i,o=e.originalEvent.dataTransfer.types,s=0;s<o.length;s++)if(n.indexOf(o[s])>=0)return!0;return!1},n.ListViewDndContext.prototype._invokeDropCallback=function(e,t,i){var n=this._invokeDndCallback("drop",e,t,i);return void 0!==n&&-1!==n||this._matchDragDataType(t)&&t.preventDefault(),n},n.ListViewDndContext.prototype._createDropTarget=function(e){if(null==this.m_dropTarget){var t=$(e.get(0).cloneNode(!1));t.addClass("oj-drop").removeClass("oj-drag oj-draggable oj-hover oj-focus oj-selected").css({display:"block",height:e.outerHeight(),width:e.outerWidth()}),this.m_dropTarget=t}return this.m_dropTarget},n.ListViewDndContext.prototype._cleanupGroupItem=function(){null!=this.m_currentDropItem&&-1===this.m_dropTargetIndex&&this.m_currentDropItem.children("."+this.listview.getGroupItemStyleClass()).removeClass("oj-drop")},n.ListViewDndContext.prototype._cleanupEmptyList=function(){null!=this.m_currentDropItem&&this.m_currentDropItem.hasClass(this.listview.getEmptyTextStyleClass())&&(this.m_currentDropItem.removeClass("oj-drop"),this.m_currentDropItem.get(0).textContent=this.listview._getEmptyText())},n.ListViewDndContext.prototype._cleanupDropTarget=function(){null!=this.m_dropTarget&&(this.m_dropTarget.css("height","0"),this.m_dropTarget.remove(),this.m_dropTarget=null),this._cleanupEmptyList(),this._cleanupGroupItem()},n.ListViewDndContext.prototype._handleDragEnter=function(e){var t=this._findItem(e.target);if(null!=t&&t.length>0){var i=this._invokeDropCallback("dragEnter",e,{item:t.get(0)});if(-1!==i)return i}},n.ListViewDndContext.prototype._setCurrentDropItem=function(e){null!=this.m_currentDropItem&&this.m_currentDropItem.removeClass("oj-valid-drop oj-invalid-drop"),this.m_currentDropItem=e,this.m_currentDropItem.addClass("oj-valid-drop")},n.ListViewDndContext.prototype._setAccInfo=function(e,t){var i=e.attr("aria-label");null==i&&(i=e.text());var n="accessibleReorder"+t.charAt(0).toUpperCase()+t.substr(1)+"Item",o=this.listview.ojContext.getTranslatedString(n,{item:i});this.listview._setAccInfoText(o)},n.ListViewDndContext.prototype._adjustGroupItemStyle=function(){null==this.m_maxHeightAdjusted&&this.listview._isTouchSupport()&&(this.listview.element.find("ul."+this.listview.getGroupStyleClass()).each(function(){$(this).attr("oldMaxHeight",$(this).css("maxHeight").toString()),$(this).css("maxHeight",1e4)}),this.m_maxHeightAdjusted="adjusted")},n.ListViewDndContext.prototype._restoreGroupItemStyle=function(){this.listview._isTouchSupport()&&this.listview.element.find("ul."+this.listview.getGroupStyleClass()).each(function(){$(this).css("maxHeight",parseInt($(this).attr("oldMaxHeight"),10)),$(this).removeAttr("oldMaxHeight")}),this.m_maxHeightAdjusted=null},n.ListViewDndContext.prototype._handleDragOver=function(e){var t,i,n;if(this._adjustGroupItemStyle(),null!=this.m_dragItems&&"none"!==$(this.m_dragItems[0]).css("display")){if(t=$(this.m_dragItems[0]),-1===(n=this._invokeDropCallback("dragOver",e,{item:t.get(0)}))&&this.IsItemReOrdering()||!1===n||e.isDefaultPrevented()){i=this._createDropTarget(t);for(var o=0;o<this.m_dragItems.length;o++)$(this.m_dragItems[o]).addClass(this.GetDragItemClass()).css("display","none");i.insertBefore(t),this.m_dropTargetIndex=i.index()}}else if(null!=(t=this._findItem(e.target))&&t.length>0)if(-1===(n=this._invokeDropCallback("dragOver",e,{item:t.get(0)}))&&this.IsItemReOrdering()||!1===n||e.isDefaultPrevented()){if(t.hasClass(this.listview.getItemStyleClass())){if(this._cleanupGroupItem(),!t.hasClass("oj-drop")){i=this._createDropTarget(t);var s=t.index();null==this.m_dropTargetIndex||this.m_dropTargetIndex<s?(i.insertAfter(t),this.m_dropPosition="after"):(i.insertBefore(t),this.m_dropPosition="before"),this._setAccInfo(t,this.m_dropPosition),this._setCurrentDropItem(t),this.m_dropTargetIndex=i.index()}}else this._cleanupDropTarget(),t.children("."+this.listview.getGroupItemStyleClass()).addClass("oj-drop"),this._setCurrentDropItem(t),this.m_dropTargetIndex=-1,this.m_dropPosition="inside",this._setAccInfo(t,this.m_dropPosition);e.preventDefault()}else $(e.target).hasClass(this.listview.getGroupStyleClass())||(t.addClass("oj-invalid-drop"),this._cleanupDropTarget());else{var r=this.listview.element.children("."+this.listview.getEmptyTextStyleClass());null!=r&&r.length>0&&(r.addClass("oj-drop"),r.get(0).textContent="",this._setCurrentDropItem(r),e.preventDefault())}return n},n.ListViewDndContext.prototype._isDndEventInElement=function(e,t){var i=t.getBoundingClientRect(),n=e.originalEvent;return n.clientX>=i.left&&n.clientX<i.right&&n.clientY>=i.top&&n.clientY<i.bottom},n.ListViewDndContext.prototype._handleDragLeave=function(e){var t;if(null!=this.m_currentDropItem){var i=this._findItem(e.target);return null!=i&&i.length>0?(i.removeClass("oj-valid-drop oj-invalid-drop"),t=this._invokeDropCallback("dragLeave",e,{item:i.get(0)}),!this._isDndEventInElement(e,e.currentTarget)&&i.hasClass("oj-drop")&&(this._cleanupDropTarget(),this._restoreGroupItemStyle())):this._isDndEventInElement(e,e.currentTarget)||this._cleanupEmptyList(),-1!==t?t:void 0}},n.ListViewDndContext.prototype._handleDrop=function(e){if(null!=this.m_currentDropItem){var t,i=e.originalEvent.dataTransfer.getData(this.GetDragSourceType());t=this.m_currentDropItem.hasClass(this.listview.getEmptyTextStyleClass())?{}:{item:this.m_currentDropItem.get(0),position:this.m_dropPosition},this.IsItemReOrdering()&&i===this.listview.element.get(0).id?t.reorder=!0:t.reorder=!1,null!=this.m_currentDropItem&&this.m_currentDropItem.removeClass("oj-valid-drop"),this._cleanupDropTarget(),this._restoreGroupItemStyle(),this._destroyDragImage();var n=this._invokeDropCallback("drop",e,t);if(t.reorder&&(t.items=null==this.m_dragItems?this.m_itemsDragged:this.m_dragItems,this.listview.Trigger("reorder",e,this.CreateReorderPayload(t.items,t.position,t.item)),e.preventDefault()),this.m_currentDropItem=null,this.m_dropTargetIndex=-1,this.m_dropPosition=null,this.m_itemsDragged=null,-1!==n)return n}},n.ListViewDndContext.prototype.CreateReorderPayload=function(e,t,i){return{items:e,position:t,reference:i}},n.ListViewDndContext.prototype.prepareContextMenu=function(e){var t=this;if(this.IsItemReOrdering()){var i=$(e);this.m_contextMenu!==e&&(this.m_contextMenu=e,"OJ-MENU"===e.tagName?(e.addEventListener("ojBeforeOpen",this._handleContextMenuBeforeOpen.bind(this)),e.addEventListener("ojAction",this._handleContextMenuSelect.bind(this))):(i.on("ojbeforeopen",this._handleContextMenuBeforeOpen.bind(this)),i.on("ojselect",this._handleContextMenuSelect.bind(this))));var n=this._getCommands(e,function(e,i){var n=t._buildContextMenuItem(i,e.tagName);"OJ-OPTION"===e.tagName?(e.innerHTML=n.get(0).innerHTML,$(e).attr("data-oj-command",n.attr("data-oj-command"))):(n.get(0).className=$(e).get(0).className,$(e).replaceWith(n))});this.m_menuItemsSet=n,n.length>0&&i.data("oj-ojMenu")&&("OJ-MENU"===e.tagName?e.refresh():$(e).ojMenu("refresh"))}},n.ListViewDndContext.prototype._getDndContextMenuItemSelector=function(){var e=this,t="",i=["cut","copy","paste","paste-before","paste-after","pasteBefore","pasteAfter"];return this.m_dndMenuItemSelector||(i.forEach(function(n,o){t+="[data-oj-command="+e.GetCommandPrefix()+n+"],",t+="[data-oj-command="+n+"]",o<i.length-1&&(t+=",")}),this.m_dndMenuItemSelector=t),this.m_dndMenuItemSelector},n.ListViewDndContext.prototype._getCommands=function(e,t){var i=this,o=[];return $(e).find(this._getDndContextMenuItemSelector()).each(function(){var e;0===$(this).children("a").length?0===$(this).attr("data-oj-command").indexOf(i.GetCommandPrefix())&&(e=$(this).attr("data-oj-command").substring(i.GetCommandPrefix().length),t&&t(this,e)):(e=$(this).attr("data-oj-command"))===n.ListViewDndContext.PASTE_BEFORE_COMMAND?e="paste-before":e===n.ListViewDndContext.PASTE_AFTER_COMMAND&&(e="paste-after"),e&&o.push(e)}),o},n.ListViewDndContext.prototype._buildContextMenuItem=function(e,t){return"paste-before"===e?this._buildContextMenuListItem(n.ListViewDndContext.PASTE_BEFORE_COMMAND,t):"paste-after"===e?this._buildContextMenuListItem(n.ListViewDndContext.PASTE_AFTER_COMMAND,t):this._buildContextMenuListItem(e,t)},n.ListViewDndContext.prototype._buildContextMenuListItem=function(e,t){var i=$(document.createElement(t));return i.attr("data-oj-command",e),i.append(this._buildContextMenuLabel(e,"OJ-OPTION"===t)),i},n.ListViewDndContext.prototype._buildContextMenuLabel=function(e,t){var i="label"+e.charAt(0).toUpperCase()+e.slice(1),n=document.createTextNode(this.listview.ojContext.getTranslatedString(i));return t?n:$('<a href="#"></a>').append(n)},n.ListViewDndContext.prototype._handleCut=function(e){null!=this.m_clipboard&&$(this.m_clipboard).removeClass(this.GetCutStyleClass());var t=this.GetCutItems(e);this.listview.ojContext.element.focus(),$(t).addClass(this.GetCutStyleClass()),this.m_clipboard=t,this.listview.Trigger("cut",e,{items:t})},n.ListViewDndContext.prototype.GetCutItems=function(e){return this._getSelectedItems()},n.ListViewDndContext.prototype._handleCopy=function(e){null!=this.m_clipboard&&$(this.m_clipboard).removeClass(this.GetCutStyleClass());var t=this._getSelectedItems();this.m_clipboard=t,this.listview.Trigger("copy",e,{items:t})},n.ListViewDndContext.prototype._handlePaste=function(e,t,i){this.listview.Trigger("paste",e,{item:t.get(0)}),$(this.m_clipboard).removeClass(this.GetCutStyleClass()),this.listview.Trigger("reorder",e,this.CreateReorderPayload(this.m_clipboard,i,t.get(0))),this.m_clipboard=null},n.ListViewDndContext.prototype._handleContextMenuSelect=function(e,t){if(null!=this.m_contextMenuItem)switch((t?t.item:$(e.target)).attr("data-oj-command")){case n.ListViewDndContext.CUT_COMMAND:this._handleCut(e);break;case n.ListViewDndContext.COPY_COMMAND:this._handleCopy(e);break;case n.ListViewDndContext.PASTE_COMMAND:this._handlePaste(e,this.m_contextMenuItem,"inside"),this.m_contextMenuItem=null;break;case n.ListViewDndContext.PASTE_BEFORE_COMMAND:this._handlePaste(e,this.m_contextMenuItem,"before"),this.m_contextMenuItem=null;break;case n.ListViewDndContext.PASTE_AFTER_COMMAND:this._handlePaste(e,this.m_contextMenuItem,"after"),this.m_contextMenuItem=null}},n.ListViewDndContext.prototype._appendToMenuContainer=function(e,t){null!=this.m_menuItemsSet&&("paste-before"===t?t=n.ListViewDndContext.PASTE_BEFORE_COMMAND:"paste-after"===t&&(t=n.ListViewDndContext.PASTE_AFTER_COMMAND),e.find("[data-oj-command='"+t+"']").removeClass("oj-disabled"))},n.ListViewDndContext.prototype._handleContextMenuBeforeOpen=function(e,t){var i=$(e.target);i.find(this._getDndContextMenuItemSelector()).addClass("oj-disabled");var n=t?t.openOptions.launcher:e.detail.openOptions.launcher;null!=n&&null!=this.m_menuItemsSet&&0!==this.m_menuItemsSet.length?(n.children().first().hasClass(this.listview.getGroupItemStyleClass())?null!=this.m_clipboard&&this._appendToMenuContainer(i,"paste"):(this._appendToMenuContainer(i,"cut"),this._appendToMenuContainer(i,"copy"),null!=this.m_clipboard&&(this._appendToMenuContainer(i,"paste-before"),this._appendToMenuContainer(i,"paste-after"))),"OJ-MENU"!==i.get(0).tagName&&i.ojMenu("refresh"),this.m_contextMenuItem=n):"OJ-MENU"!==i.get(0).tagName&&i.ojMenu("refresh")},n.ListViewDndContext.prototype.HandleKeyDown=function(e){if(e.ctrlKey||e.metaKey){var t=e.keyCode;if(t===n.ListViewDndContext.X_KEY||t===n.ListViewDndContext.C_KEY||n.ListViewDndContext.V_KEY){if(!this.IsItemReOrdering())return!1;var i=this.listview.ojContext._GetContextMenu();if(null==i)return!1;var o=this._getCommands(i);if(0===o.length)return!1;if(t===n.ListViewDndContext.X_KEY&&o.indexOf("cut")>-1)return this._handleCut(e),!0;if(t===n.ListViewDndContext.C_KEY&&o.indexOf("copy")>-1)return this._handleCopy(e),!0;if(t===n.ListViewDndContext.V_KEY&&null!=this.m_clipboard){var s,r=$(this._getActiveItem());if(r.children().first().hasClass(this.listview.getGroupItemStyleClass())?o.indexOf("paste")>-1&&(s="inside"):o.indexOf("paste-before")>-1?s="before":o.indexOf("paste-after")>-1&&(s="after"),null!=s)return this._handlePaste(e,r,s),!0}}}return!1},n.ListViewDndContext.prototype.shouldDragCurrentItem=function(){return!1},n.ListViewDndContext.prototype.GetDragSourceType=function(){return"text/ojlistview-dragsource-id"};var bn={setBundle:function(e){bn._bundle=e},getFirstDayOfWeek:function(){return bn._getWeekData("firstDay")},getWeekendStart:function(){return bn._getWeekData("weekendStart")},getWeekendEnd:function(){return bn._getWeekData("weekendEnd")},getDayNames:function(e){(null==e||"abbreviated"!==e&&"narrow"!==e)&&(e="wide");var t=bn._getCalendarData().days["stand-alone"][e];return[t.sun,t.mon,t.tue,t.wed,t.thu,t.fri,t.sat]},getMonthNames:function(e){(null==e||"abbreviated"!==e&&"narrow"!==e)&&(e="wide");var t=bn._getCalendarData().months["stand-alone"][e];return[t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12]]},isMonthPriorToYear:function(){var e=bn._getCalendarData().dateFormats.long.toUpperCase();return e.indexOf("M")<e.indexOf("Y")},_getWeekData:function(e){var t=bn.__getBundle(),i=bn._getRegion()||"001",n=t.supplemental.weekData[e],o=n[i];return void 0===o&&(o=n["001"]),o},_getCalendarData:function(){var e=bn.__getBundle().main;return e[Object.keys(e)[0]].dates.calendars.gregorian},_getRegion:function(){var e=n.Config.getLocale();if(e){var t=e.toUpperCase().split(/-|_/);if(t.length>=2){var i=t[1];if(4!==i.length)return i;if(t.length>=3)return t[2]}}return null},__getBundle:function(){var e=bn._bundle;return e||(n.__isAmdLoaderPresent()?(n.Assert.assert(void 0!==ojld,"LocaleElements module must be loaded"),ojld):{})},__updateBundle:function(e){ojld=e}},Cn=function(){this._map=new Map,this._keyset=new y},Sn=Cn.prototype;Object.defineProperty(Sn,"size",{get:function(){return this._map.size}}),Sn.clear=function(){this._map.clear(),this._keyset._keys.clear()},Sn.delete=function(e){var t=this._keyset.get(e);return t!==this._keyset.NOT_A_KEY&&(this._keyset._keys.delete(t),this._map.delete(t))},Sn.forEach=function(e){this._map.forEach(e)},Sn.get=function(e){var t=this._keyset.get(e);return this._map.get(t)},Sn.has=function(e){return this._keyset.has(e)},Sn.set=function(e,t){var i=this._keyset.get(e);return i===this._keyset.NOT_A_KEY?(this._keyset._keys.add(e),this._map.set(e,t)):this._map.set(i,t),this};var En={properties:{reorderHandle:{type:"string"},translations:{type:"object",value:{},properties:{labelCut:{type:"string"},labelPasteAfter:{type:"string"},labelPasteBefore:{type:"string"}}}},methods:{refresh:{},resizeTile:{},insertTile:{},removeTile:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{},ojBeforeInsert:{},ojInsert:{},ojBeforeRemove:{},ojRemove:{},ojBeforeResize:{},ojResize:{},ojBeforeReorder:{},ojReorder:{}},extension:{}};function Tn(e,t,i,n,o,s){var r=Tn;null==r._agentTypeAndVersion&&(r._agentTypeAndVersion=r._getAgentTypeAndVersion(navigator.userAgent)),this._elem=e,this._rtl=t,this._automationEnabled=i,this._tilesSelector=n.tiles,this._transitionShowFromStyleClass=o.transitionShowFromStyleClass,this._addStyleClassNameFunc=s.addStyleClassName,this._removeStyleClassNameFunc=s.removeStyleClassName,this._getSizeStyleClassNameFunc=s.getSizeStyleClassName,this._getTileSpanFunc=s.getTileSpan,this._showTileOnEndFunc=s.showTileOnEndFunc,this._hideTileOnEndFunc=s.hideTileOnEndFunc,this._startAnimationFunc=s.startAnimationFunc,this._layoutOnEndFunc=s.layoutOnEndFunc,this._layoutCycleOnStartFunc=s.layoutCycleOnStartFunc,this._layoutCycleOnEndFunc=s.layoutCycleOnEndFunc,this._sortTilesOriginalOrderFunc=s.sortTilesOriginalOrderFunc,this._subtreeAttachedFunc=s.subtreeAttached,this._subtreeDetachedFunc=s.subtreeDetached,this._addBusyStateFunc=s.addBusyState;var a=document.createElement("div"),l=a.style;l.display="inline-block",l.overflow="hidden",l.visibility="hidden";var u=document.createElement("div");(l=u.style).display="inline-block",a.appendChild(u),e.insertBefore(a,e.firstChild),this._sizeDivWrapper=a,this._sizeDiv=u;var d=this;this._hideTilesFunc=function(){d._hideTiles()},this._resolveBusyStateFunc=function(){d._resolveBusyState()}}Tn.prototype.setup=function(e,t){var i=!1;return e?(i=!!this._layout(),this._reorderTilesForLayout()):(this._busyStateResolveFunc=this._addBusyStateFunc("performing layout (setup)"),this._layoutCycleOnStartFunc(),this._transitionStart(t),i=this._transitionLayout()),i},Tn.prototype.destroy=function(){this._resolveBusyState();for(var e=this._elem,t=this._getTileChildren(),i=0;i<t.length;i++){var n=t[i].style;this._rtl?n.right="":n.left="",n.top=""}e.removeChild(this._sizeDivWrapper),this._sizeDivWrapper=null,this._sizeDiv=null,this._hideTilesFunc=null,this._resolveBusyStateFunc=null,this._arMovedInfolets=null,this._arInfoletsToResize=null,this._arInfoletsToShow=null,this._arInfoletsToHide=null,this._arFireHideOnEnd=null,this._elem=null,this._addStyleClassNameFunc=null,this._removeStyleClassNameFunc=null,this._getSizeStyleClassNameFunc=null,this._getTileSpanFunc=null,this._showTileOnEndFunc=null,this._hideTileOnEndFunc=null,this._startAnimationFunc=null,this._layoutOnEndFunc=null,this._layoutCycleOnStartFunc=null,this._layoutCycleOnEndFunc=null,this._sortTilesOriginalOrderFunc=null,this._subtreeAttachedFunc=null,this._subtreeDetachedFunc=null,this._addBusyStateFunc=null},Tn.prototype.resizeTile=function(e,t){var i=this._elem.querySelector(e);this._arInfoletsToResize||(this._arInfoletsToResize=[]);var n=this._arInfoletsToResize;n.push(i),n.push(t),this._resizingInfolet=!0,this._queueRelayout()},Tn.prototype.insertTileDomElem=function(e,t){var i=this._getTileChildren();this._sortTilesOriginalOrderFunc(i);var n=null;t>=0&&t<i.length&&(n=i[t]),this._elem.insertBefore(e,n),this._queueRelayout()},Tn.prototype.showTile=function(e){var t=this._elem.querySelector(e);if(t){this._arInfoletsToShow||(this._arInfoletsToShow=[]),this._arInfoletsToShow.push(t),this._showingInfolets=!0;var i=Tn;this._layoutPhase!==i._PHASE_HIDE&&this._layoutPhase!==i._PHASE_LAYOUT?this._queueRelayout():this._showingInfolets=!1}},Tn.prototype.hideTile=function(e){var t=this._elem.querySelector(e);t&&(this._arInfoletsToHide||(this._arInfoletsToHide=[]),this._arInfoletsToHide.push(t),this._hidingInfolets=!0,this._queueRelayout())},Tn.prototype.resizeNotify=function(){this._resizingInfolet||this._hidingInfolets||this._showingInfolets||(this._busyStateResolveFunc=this._addBusyStateFunc("performing layout (resizeNotify)"),this._layoutCycleOnStartFunc(),this._transitionStart(!1),this._transitionLayout())},Tn.prototype.getCellSize=function(){return this._cellSize},Tn.prototype.isAnimationEnabled=function(){if(this._temporarilyDisableAnimation)return!1;if(!this._cachedAnimationEnabled){if(this._automationEnabled)this._animationEnabled=!1;else{var e=Tn,t=e._agentTypeAndVersion[0],i=e._agentTypeAndVersion[1];this._animationEnabled=e._isMinimumAgentMet(t,i,["gecko",16,"trident",6,"webkit",533.1])}this._cachedAnimationEnabled=!0}return this._animationEnabled},Tn.prototype.isInLayoutCycle=function(){return null!=this._layoutPhase||null!=this._arMovedInfolets&&this._arMovedInfolets.length>0},Tn.prototype.finishLayoutCycle=function(){this._temporarilyDisableAnimation=!0,this._removeStyleClassFromTiles(this._transitionShowFromStyleClass);for(var e=Tn,t=this._getTileChildren(),i=0;i<t.length;i++){var n=t[i];n._afrCellSize&&delete n._afrCellSize}this._hideTilesAnimationStarted?(this._hideTilesAnimationStarted=!1,this._handleHideTransitionEnd(null)):this._showTilesTimeout?(clearTimeout(this._showTilesTimeout),this._showTilesTimeout=null,this._showTiles()):this._layoutPhase===e._PHASE_LAYOUT||null!=this._arMovedInfolets&&this._arMovedInfolets.length>0?this._handleTransitionEnd(null):this._layoutPhase===e._PHASE_SHOW&&this._handleShowTransitionEnd(null),this._temporarilyDisableAnimation=!1},Tn._getElemSize=function(e){var t=Tn,i=t._getComputedStyle(e),n=t._getCSSLengthAsInt(i.marginLeft)+t._getCSSLengthAsInt(i.marginRight),o=t._getCSSLengthAsInt(i.marginTop)+t._getCSSLengthAsInt(i.marginBottom);return{w:e.offsetWidth+n,h:e.offsetHeight+o}},Tn._getElemInsets=function(e){var t=Tn,i=t._getComputedStyle(e);return{paddingLeft:t._getCSSLengthAsInt(i.paddingLeft),paddingRight:t._getCSSLengthAsInt(i.paddingRight),paddingTop:t._getCSSLengthAsInt(i.paddingTop),paddingBottom:t._getCSSLengthAsInt(i.paddingBottom),borderLeftWidth:t._getCSSLengthAsInt(i.borderLeftWidth),borderRightWidth:t._getCSSLengthAsInt(i.borderRightWidth),borderTopWidth:t._getCSSLengthAsInt(i.borderTopWidth),borderBottomWidth:t._getCSSLengthAsInt(i.borderBottomWidth)}},Tn._getComputedStyle=function(e){var t=e.ownerDocument.defaultView;return t?t.getComputedStyle(e,null):e.currentStyle},Tn._getCSSLengthAsInt=function(e){if(e.length>0&&"auto"!==e){var t=parseInt(e,10);return isNaN(t)&&(t=0),t}return 0},Tn._arrayIndexOf=function(e,t){if(e)for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1},Tn._isMinimumAgentMet=function(e,t,i){var n=i.length;if(n%2==0)for(var o=0;o<=n-2;o+=2){if(e===i[o])return t>=i[1+o]}return!1},Tn._getAgentTypeAndVersion=function(e){var t=Tn._parseFloatVersion,i=null,n=-1,o=e.toLowerCase();if(-1!==o.indexOf("msie")||-1!==o.indexOf("trident")){i="trident";var s=t(o,/trident\/(\d+[.]\d+)/);-1!==s?n=s:(-1===(s=t(o,/msie (\d+\.\d+);/))&&(s=t(o,/msie (\d+\.\d+)b;/)),n=s-4),null!=document.documentMode&&(n=Math.min(n,document.documentMode-4))}else-1!==o.indexOf("applewebkit")?(i="webkit",n=t(o,/applewebkit\/(\d+([.]\d+)*)/)):-1!==o.indexOf("gecko/")&&(i="gecko",n=t(o,/rv:(\d+[.]\d+)/));return[i,n]},Tn._parseFloatVersion=function(e,t){var i=e.match(t);if(i){var n=i[1];if(n)return parseFloat(n)}return-1},Tn._compareTilePositions=function(e,t){return e.startRow>t.startRow?1:e.startRow<t.startRow?-1:e.startCol>t.startCol?1:-1},Tn.prototype._queueRelayout=function(){this._hideTilesTimeout||(this._layoutPhase?this._queuedRelayout||(this._queuedRelayout=!0):(this._busyStateResolveFunc=this._addBusyStateFunc("performing layout"),this._hideTilesTimeout=setTimeout(this._hideTilesFunc,0)))},Tn.prototype._getTileChildren=function(){for(var e=this._elem.querySelectorAll(this._tilesSelector),t=[],i=0;i<e.length;i++){var n=e[i],o=n.style;n.offsetWidth>0&&n.offsetHeight>0&&"hidden"!==o.visibility&&t.push(n)}return t},Tn.prototype._transitionLayout=function(){var e=this._arMovedInfolets,t=this._layout();if(this._arInfoletsToResize){var i=this._arInfoletsToResize;t||(t=[]);for(var n=Tn,o=0;o<i.length;o+=2){var s=i[o];n._arrayIndexOf(t,s)<0&&t.push(s)}}var r=!1;!t||t.length<1?(!e||e.length<1)&&(this._arMovedInfolets=null,this._handleTransitionEnd(null),r=!0):this._arMovedInfolets=t;var a=null!=t&&t.length>0;return this.isAnimationEnabled()||r||this._handleTransitionEnd(null),a},Tn.prototype._layout=function(){var e=this._elem,t=this._getTileChildren();this._sortTilesOriginalOrderFunc(t),this._cellSize=null;var i=null;this._cols=0,this._rows=1,this._occupancyMap=null;var n,o,s,r,a,l=[],u=[],d=[],h=[],c=this._rtl,p=Tn,_=p._getElemInsets(e),m=0,g=[];for(this._arTilePositions=g,n=0;n<t.length;n++){(o=t[n])._afrCellSize&&(this._cellSize=o._afrCellSize,delete o._afrCellSize);var f=this._getTileSpanFunc(o);if(this._cellSize||(this._cellSize=this._calcCellSize(o,f)),i=this._cellSize,!this._occupancyMap){var v=e.offsetWidth-_.paddingLeft-_.paddingRight-_.borderLeftWidth-_.borderRightWidth;this._cols=Math.max(Math.floor(v/i.w),1),this._initOccupancyMap(this._cols,this._rows),m=this._cols}f.colSpan>m&&(m=f.colSpan),f.colSpan>this._cols&&(f.colSpan=this._cols);for(var y=!1,b=0;b<this._rows;b++){for(var C=0;C<this._cols;C++)if(this._fits(C,b,f)){a={top:(s=o.style).top},c?a.right=s.right:a.left=s.left,u.push(a),r=this._calcPosition(o,C,b,f,i,_),d.push(r),c&&h.push(C),y=!0,g.push({startCol:C,startRow:b,tile:o});break}if(y)break;b===this._rows-1&&this._addRow()}}if(i){var S=this._sizeDiv.style;if(S){var E=m*i.w,T=this._rows*i.h,D=S.width?Tn._getCSSLengthAsInt(S.width.toString()):0,A=S.height?Tn._getCSSLengthAsInt(S.height.toString()):0;(D>E||A>T)&&(this._afrSizeDivDims={},this._afrSizeDivDims.width=E+"px",this._afrSizeDivDims.height=T+"px"),S.width=(D>E?D:E)+"px",S.height=(A>T?A:T)+"px"}}for(n=0;n<t.length;n++)s=(o=t[n]).style,r=d[n],""!==(a=u[n]).top&&(c&&parseInt(r.right,10)!==parseInt(a.right,10)||!c&&parseInt(r.left,10)!==parseInt(a.left,10)||parseInt(r.top,10)!==parseInt(a.top,10))&&(l.push(o),this._layoutTransition&&p._arrayIndexOf(this._arInfoletsToResize,o)<0&&this._animateLayout(o,this._reorderTransitionStarted?"reorder":"move")),s.top=r.top,this._rtl?s.right=r.right:s.left=r.left;return l.length<1&&(l=null),l},Tn.prototype._updateSizeDivOnEnd=function(){if(this._afrSizeDivDims){var e=this._sizeDiv.style;e.width=this._afrSizeDivDims.width,e.height=this._afrSizeDivDims.height,delete this._afrSizeDivDims}},Tn.prototype._reorderTilesForLayout=function(){var e=this._arTilePositions;this._arTilePositions=null;var t=Tn;e=e.sort(t._compareTilePositions);for(var i=this._getTileChildren(),n=0;n<i.length;n++){var o=i[n],s=e[n].tile;if(o!==s){this._subtreeDetachedFunc(s),o.parentNode.insertBefore(s,o),this._subtreeAttachedFunc(s);var r=t._arrayIndexOf(i,s);r>n&&(i.splice(r,1),i.splice(n,0,s))}}},Tn.prototype._initOccupancyMap=function(e,t){this._occupancyMap=[];for(var i=this._occupancyMap,n=0;n<t;n++){var o=[];i.push(o);for(var s=0;s<e;s++)o[s]=!1}},Tn.prototype._addRow=function(){this._rows+=1;var e=[];this._occupancyMap.push(e);for(var t=0;t<this._cols;t++)e[t]=!1},Tn.prototype._fits=function(e,t,i){for(var n=i.colSpan,o=i.rowSpan,s=t;s<t+o;s++){s>=this._rows&&this._addRow();for(var r=e;r<e+n;r++){if(r>=this._cols)return!1;if(this._occupancyMap[s][r])return!1}}return!0},Tn.prototype._calcPosition=function(e,t,i,n,o,s){for(var r=n.colSpan,a=n.rowSpan,l=this._occupancyMap,u=i;u<i+a;u++)for(var d=t;d<t+r;d++)l[u][d]=!0;var h={},c=s.paddingTop+i*o.h;if(h.top=c+"px",this._rtl){var p=s.paddingRight+t*o.w;h.right=p+"px"}else{var _=s.paddingLeft+t*o.w;h.left=_+"px"}return h},Tn.prototype._removeStyleClassFromTiles=function(e){for(var t=this._getTileChildren(),i=0;i<t.length;i++)this._removeStyleClassNameFunc(t[i],e)},Tn.prototype._animateLayout=function(e,t){if(this.isAnimationEnabled()){var i=this;i._startAnimationFunc(e,t).then(function(){i._layoutTransition&&i._handleTransitionEnd(e)})}},Tn.prototype._transitionStart=function(e){this._layoutTransition||(this._reorderTransitionStarted=e,this._layoutTransition=!0)},Tn.prototype._handleTransitionEnd=function(e){var t=!0;if(this._arMovedInfolets){var i=this._arMovedInfolets;if(e){for(var n=0;n<i.length;n++)if(e===i[n]){this._arMovedInfolets=[],i=this._arMovedInfolets;break}}else this.isAnimationEnabled()||(this._arMovedInfolets=[],i=this._arMovedInfolets);i.length>0&&(t=!1)}if(t){this._arInfoletsToResize&&(this._arInfoletsToResize=null),this._reorderTransitionStarted&&(this._reorderTransitionStarted=!1);var o=Tn;if(this._layoutTransition=!1,this._resizingInfolet=!1,this._hidingInfolets=!1,this._showingInfolets=!1,this._reorderTilesForLayout(),this._layoutOnEndFunc(),this._updateSizeDivOnEnd(),this._layoutPhase===o._PHASE_LAYOUT)if(this.isAnimationEnabled()){var s=this;this._showTilesTimeout=setTimeout(function(){s._showTiles()},0)}else this._showTiles();else this._layoutPhase||this._layoutCycleOnEndFunc(this._resolveBusyStateFunc)}},Tn.prototype._calcCellSize=function(e,t){var i=Tn._getElemSize(e);return{w:i.w/t.colSpan,h:i.h/t.rowSpan}},Tn.prototype._hideTiles=function(){this._hideTilesTimeout&&(clearTimeout(this._hideTilesTimeout),this._hideTilesTimeout=null),this._layoutCycleOnStartFunc();var e=Tn;if(this._layoutPhase=e._PHASE_HIDE,this._arInfoletsToHide&&this.isAnimationEnabled()){var t=this._arInfoletsToHide,i=this;this._hideTilesAnimationStarted=!0;for(var n=0;n<t.length;n++){var o=t[n],s=function(e){i._handleHideTransitionEnd(e)}.bind(null,o);this._startAnimationFunc(o,"remove").then(s)}}else this._handleHideTransitionEnd(null)},Tn.prototype._handleHideTransitionEnd=function(e){this._hideTilesAnimationStarted&&(this._hideTilesAnimationStarted=!1);var t,i,n,o,s=Tn,r=this._arInfoletsToHide;if(e){if(t=e,r){for(n=0;n<r.length;n++)if((i=r[n])===t){r.splice(n,1),this._arFireHideOnEnd||(this._arFireHideOnEnd=[]),(o=this._arFireHideOnEnd).push(t);break}r.length<1&&(this._arInfoletsToHide=null)}}else if(!this.isAnimationEnabled()&&r){for(n=0;n<r.length;n++)i=r[n],this._arFireHideOnEnd||(this._arFireHideOnEnd=[]),(o=this._arFireHideOnEnd).push(i);this._arInfoletsToHide=null}if(!this._arInfoletsToHide){if(this._arFireHideOnEnd){for(o=this._arFireHideOnEnd,n=0;n<o.length;n++){var a=(t=o[n]).style;this._rtl?a.right="":a.left="",a.top="",this._hideTileOnEndFunc(t)}this._arFireHideOnEnd=null}if(this._layoutPhase=s._PHASE_LAYOUT,this._transitionStart(!1),this._arInfoletsToResize){var l=this._arInfoletsToResize;for(n=0;n<l.length;n+=2){t=l[n];var u=l[n+1],d=this._getSizeStyleClassNameFunc(t);this.isAnimationEnabled()&&(t._afrCellSize=this._cellSize,this._animateLayout(t,"resize")),this._removeStyleClassNameFunc(t,d),this._addStyleClassNameFunc(t,u)}}this._transitionLayout()}},Tn.prototype._showTiles=function(){this._showTilesTimeout&&(clearTimeout(this._showTilesTimeout),this._showTilesTimeout=null);var e,t,i=Tn;this._layoutPhase=i._PHASE_SHOW;var n=this._arInfoletsToShow;if(n&&this.isAnimationEnabled()){var o=this;for(e=0;e<n.length;e++){t=n[e],this._removeStyleClassNameFunc(t,this._transitionShowFromStyleClass);var s=function(e){o._handleShowTransitionEnd(e)}.bind(null,t);this._startAnimationFunc(t,"insert").then(s)}}else{if(n)for(e=0;e<n.length;e++)t=n[e],this._removeStyleClassNameFunc(t,this._transitionShowFromStyleClass);this._handleShowTransitionEnd(null)}},Tn.prototype._handleShowTransitionEnd=function(e){var t,i,n=this._arInfoletsToShow;if(e){var o=e;if(n){for(t=0;t<n.length;t++)if((i=n[t])===o){n.splice(t,1),this._showTileOnEndFunc(o);break}n.length<1&&(this._arInfoletsToShow=null)}}else if(!this.isAnimationEnabled()&&n){for(t=0;t<n.length;t++)i=n[t],this._showTileOnEndFunc(i);this._arInfoletsToShow=null}this._arInfoletsToShow||(this._layoutPhase=null,this._layoutCycleOnEndFunc(this._resolveBusyStateFunc),this._queuedRelayout&&(this._queuedRelayout=!1,this._queueRelayout()))},Tn.prototype._resolveBusyState=function(){this._busyStateResolveFunc&&(this._busyStateResolveFunc(),this._busyStateResolveFunc=null)},Tn._PHASE_HIDE=1,Tn._PHASE_LAYOUT=2,Tn._PHASE_SHOW=3,function(){var t="hidden",i="none",o="oj-masonrylayout-tile",s=/oj-masonrylayout-tile-[0-9]+x[0-9]+/,r="."+o,a={cut:"ojmasonrylayoutcut","paste-before":"ojmasonrylayoutpastebefore","paste-after":"ojmasonrylayoutpasteafter"},l={cut:"labelCut","paste-before":"labelPasteBefore","paste-after":"labelPasteAfter"};function u(e){return $(e).offset()}function d(e,t){$(e).addClass(t)}function h(e,t){$(e).removeClass(t)}function m(e){var t=null,i=$(e).attr("class").match(s);return i&&(t=i[0]),t}function g(e){var t=$(e).attr("class").match(s)[0].substring(o.length+1),i=t.indexOf("x"),n=t.substring(0,i),r=t.substring(i+1);return{colSpan:Tn._getCSSLengthAsInt(n),rowSpan:Tn._getCSSLengthAsInt(r)}}function f(e){return e&&e.sort(v),e}function v(e,t){return t._jetDataMasonryOriginalOrder<e._jetDataMasonryOriginalOrder?1:e._jetDataMasonryOriginalOrder<t._jetDataMasonryOriginalOrder?-1:0}function y(e,n){for(var o=e;o;){var s=o.style;if(s&&(s.visibility===t||s.display===i))break;var r=o.parentNode;if(r===n)return o;o=r}return null}function b(e){for(var n=e;n;){var o=n.nextSibling,s=!0;if(o){var r=o.style;!r||r.visibility!==t&&r.display!==i||(s=!1)}if(o&&1===o.nodeType&&s)return o;n=o}return null}n.__registerWidget("oj.ojMasonryLayout",$.oj.baseComponent,{defaultElement:"<div>",widgetEventPrefix:"oj",options:{reorderHandle:null,animateStart:null,animateEnd:null,beforeInsert:null,insert:null,beforeRemove:null,remove:null,beforeResize:null,resize:null,beforeReorder:null,reorder:null},_ComponentCreate:function(){this._super(),this.element.addClass("oj-masonrylayout oj-component"),this.options.disabled&&e.warn("JET MasonryLayout: 'disabled' property not supported"),this.reorderHandleEventNamespace=this.eventNamespace+"ReorderHandle",this._menu={},this._menu.usermenu=!1,this._menu.$container=!1,this._menu.$elemCut=!1,this._menu.$elemPasteBefore=!1,this._menu.$elemPasteAfter=!1,this._initMenu(),this._applyMenu(),this._setup(!0)},refresh:function(){this._super();var e="rtl"===this._GetReadingDirection()!==this._bRTL;e&&this._destroyMLCommon(),this._setup(e)},_NotifyShown:function(){(this._super(),this._needsSetup)?this._setup(this._needsSetup[0]):this._mlCommon.setup(!0)},_NotifyAttached:function(){(this._super(),this._needsSetup)?this._setup(this._needsSetup[0]):this._mlCommon.setup(!0)},_NotifyContextMenuGesture:function(e,t,i){this._prepareContextMenuBeforeOpen(t);var n=this._menu.$container.children().not(".oj-helper-hidden");n&&n.length>0&&this._OpenContextMenu(t,i,{launcher:$(t.target).closest(":tabbable")})},_setup:function(e){var t=this;if(!this._canCalculateSizes()){var i=!1;return this._needsSetup&&(i=this._needsSetup[0]),void(this._needsSetup=[e||i])}this._needsSetup=null,this._bRTL="rtl"===this._GetReadingDirection(),this._bTouchSupported=n.DomUtils.isTouchSupported();var o=this.element,s=this.options;if(e){if(this._showTileOnEndFunc=function(e){t._showTileOnEnd(e)},this._hideTileOnEndFunc=function(e){t._hideTileOnEnd(e)},this._startAnimationFunc=function(e,i){return t._startAnimation(e,i)},this._layoutOnEndFunc=function(){t._layoutOnEnd()},this._layoutCycleOnStartFunc=function(){t._layoutCycleOnStart()},this._layoutCycleOnEndFunc=function(e){t._layoutCycleOnEnd(e)},!this._mlCommon){var a={};a.tiles=r;var l={transitionShowFromStyleClass:"oj-masonrylayout-tile-transition-show-from"},u={};u.addStyleClassName=d,u.removeStyleClassName=h,u.getSizeStyleClassName=m,u.getTileSpan=g,u.showTileOnEndFunc=this._showTileOnEndFunc,u.hideTileOnEndFunc=this._hideTileOnEndFunc,u.startAnimationFunc=this._startAnimationFunc,u.layoutOnEndFunc=this._layoutOnEndFunc,u.layoutCycleOnStartFunc=this._layoutCycleOnStartFunc,u.layoutCycleOnEndFunc=this._layoutCycleOnEndFunc,u.sortTilesOriginalOrderFunc=f,u.subtreeAttached=w.subtreeAttached,u.subtreeDetached=w.subtreeDetached,u.addBusyState=function(e){return t._addBusyState(e)},this._applyTileStyleClass(),this._saveTilesOriginalOrder(),this._mlCommon=new Tn(o[0],this._bRTL,"enabled"===p.getAutomationMode(),a,l,u)}this._handleDragStartFunc=function(e){t._handleDragStart(e)},this._handleDragEnterFunc=function(e){t._handleDragEnter(e)},this._handleDragOverFunc=function(e){t._handleDragOver(e)},this._handleDragLeaveFunc=function(e){t._handleDragLeave(e)},this._handleDragEndFunc=function(e){t._handleDragEnd(e)},this._handleDropFunc=function(e){t._handleDrop(e)},s.reorderHandle&&this._setupReorderHandles()}else{this._applyTileStyleClass();var c=o.children();this._tearDownReorderHandlesForElem(c),this._setupReorderHandlesForElem(c),this._checkTilesOriginalOrder()}this._mlCommon.setup(e),e&&(this._handleResizeFunc=function(e,i){t._handleResize()},n.DomUtils.addResizeListener(o[0],this._handleResizeFunc,25))},_destroy:function(){this._clearMenu();var e=this.element;n.DomUtils.removeResizeListener(e[0],this._handleResizeFunc),this._handleResizeFunc=null,this._restoreTilesOriginalOrder();for(var t=this._getTileElements(),i=t.length,s=0;s<i;s++){delete t[s]._jetDataMasonryOriginalOrder}this._destroyMLCommon(),e.removeClass("oj-masonrylayout oj-component"),this.options.reorderHandle&&this._tearDownReorderHandles(),e.children("."+o).removeClass(o),this._handleDragStartFunc=null,this._handleDragEnterFunc=null,this._handleDragOverFunc=null,this._handleDragLeaveFunc=null,this._handleDragEndFunc=null,this._handleDropFunc=null,this._showTileOnEndFunc=null,this._hideTileOnEndFunc=null,this._startAnimationFunc=null,this._layoutOnEndFunc=null,this._layoutCycleOnStartFunc=null,this._layoutCycleOnEndFunc=null,this._arTilesToInsert=null,this._super()},_setOption:function(t,i,o){var s=!1,r=!1;switch(t){case"reorderHandle":this._tearDownReorderHandles(),s=!0;break;case"disabled":e.warn("JET MasonryLayout: 'disabled' property not supported");break;case"contextMenu":n.DomUtils.isTouchSupported()||(this._clearMenu(),i&&this._initMenu(i));break;case"translations":n.Object.compareValues(i,this.options[t])||(r=!0)}this._super(t,i,o),r&&this._refreshMenu(),s&&i&&this._setupReorderHandles()},resizeTile:function(e,t){var i=this._mlCommon;i.isInLayoutCycle()&&i.finishLayoutCycle();var n=$(e),o=n[0];if(!o)throw new Error("JET MasonryLayout: Unable to resize tile because no tile found for selector: "+e);var s=m(o);if(t===s)throw new Error("JET MasonryLayout: Unable to resize child "+e+" to style class "+t+" because "+t+" is already applied.");var r={tile:n,previousSizeStyleClass:s,sizeStyleClass:t};!1!==this._trigger("beforeResize",null,r)&&(this._arResizingTiles||(this._arResizingTiles=[]),this._arResizingTiles.push(o,s,t),i.resizeTile(e,t))},insertTile:function(e,t){var i=this._mlCommon;i.isInLayoutCycle()&&i.finishLayoutCycle(),isNaN(t)&&(t=-1);var n=$(e),s=n[0];if(!s)throw new Error("JET MasonryLayout: Unable to insert tile because no tile found for selector: "+e);n.addClass(o);var r={tile:n,index:t};if(!1!==this._trigger("beforeInsert",null,r)){s._jetDataTileInsertIndex=t,i.isAnimationEnabled()&&n.addClass("oj-masonrylayout-tile-transition-show-from");var a=s.style;a.top="-1px",this._bRTL?a.right="-1px":a.left="-1px",this._insertTileOriginalOrder(s,t),i.insertTileDomElem(s,t),w.subtreeAttached(s),this._arTilesToInsert||(this._arTilesToInsert=[]),this._arTilesToInsert.push(e)}},removeTile:function(e){var t=this._mlCommon;t.isInLayoutCycle()&&t.finishLayoutCycle();var i=$(e),o=i[0];if(!o)throw new Error("JET MasonryLayout: Unable to remove tile because no tile found for selector: "+e);if(n.FocusUtils.containsFocus(o)){var s=this._getTileElements(!0),r=s.indexOf(o);r>0&&(this._deletingTileWithFocusPrev=s[r-1])}var a={tile:i};!1!==this._trigger("beforeRemove",null,a)&&t.hideTile(e)},_handleResize:function(){this._bDragging||this._inLayoutCycle||this._mlCommon.resizeNotify()},_showTileOnEnd:function(e){var t=$(e),i=e._jetDataTileInsertIndex;delete e._jetDataTileInsertIndex,this.options.reorderHandle&&this._setupReorderHandlesForElem(t);var n={tile:t,index:i};this._eventsToFire.push("insert",n)},_hideTileOnEnd:function(e){var t=$(e);this.options.reorderHandle&&this._tearDownReorderHandlesForElem(t),t.removeClass(o),w.subtreeDetached(e),e.parentNode.removeChild(e),this._removeTileOriginalOrder(e);var i={tile:t};this._eventsToFire.push("remove",i)},_startAnimation:function(e,t){var i=(_.parseJSONFromFontFamily("oj-masonrylayout-option-defaults")||{}).animation,n=i?i[t]:null;return vi.startAnimation(e,t,n,this)},_layoutOnEnd:function(){var e;if(this._arTilesToInsert){var t=this._mlCommon,i=this._arTilesToInsert;for(e=0;e<i.length;e++){var n=i[e];t.showTile(n)}this._arTilesToInsert=null}if(this._arResizingTiles){var o=this._arResizingTiles;for(e=0;e<o.length;e+=3){var s=o[e],r=o[e+1],a=o[e+2],l={tile:$(s),previousSizeStyleClass:r,sizeStyleClass:a};this._eventsToFire.push("resize",l)}this._arResizingTiles=null}this._bDragging&&(this._bDragMoveTransition?this._handleDragMoveTransitionEnd():this._bDragEndTransition&&this._handleDragEndTransitionEnd())},_layoutCycleOnStart:function(){this._inLayoutCycle=!0,this._layoutStartActiveDomElem=null,this._eventsToFire||(this._eventsToFire=[]);var e=document.activeElement;e&&n.DomUtils.isAncestor(this.element[0],e)&&(this._layoutStartActiveDomElem=e)},_layoutCycleOnEnd:function(e){this._inLayoutCycle=!1;var t=this.element[0];if(this._layoutStartActiveDomElem){var i=this._layoutStartActiveDomElem;if(this._layoutStartActiveDomElem=null,this._deletingTileWithFocusPrev){var o=this._deletingTileWithFocusPrev;if(this._deletingTileWithFocusPrev=null,o&&n.DomUtils.isAncestor(t,o)){var s=this._getTileElements(t,!0),r=s.indexOf(o);r>=0&&r<s.length-1?n.FocusUtils.focusFirstTabStop(s[r+1]):n.FocusUtils.focusFirstTabStop(o)}}else n.DomUtils.isAncestor(t,i)?n.FocusUtils.focusElement(i):n.FocusUtils.focusFirstTabStop(t)}if(e&&e(),this._eventsToFire){var a=this._eventsToFire;this._eventsToFire=[];for(var l=0;l<a.length;l+=2){var u=a[l],d=a[l+1];this._trigger(u,null,d)}}},_destroyMLCommon:function(){var e=this._mlCommon;e&&e.destroy(),this._mlCommon=null},_canCalculateSizes:function(){var e=document.createElement("div"),t=e.style;t.width="10px",t.height="10px";var i=this.element[0];i.appendChild(e);var n=!1;try{n=e.offsetWidth>0&&e.offsetHeight>0}catch(e){}return i.removeChild(e),n},_getTileElements:function(e){for(var n=this.element.children(r),o=n.length,s=[],a=0;a<o;a++){var l=n[a];if(!e||e&&l!==this._dropSite){var u=l.style;u.visibility!==t&&u.display!==i&&s.push(l)}}return s},_saveTilesOriginalOrder:function(){var e=this._getTileElements();if(e)for(var t=0;t<e.length;t++){var i=e[t];i._jetDataMasonryOriginalOrder||(i._jetDataMasonryOriginalOrder=t+1)}},_checkTilesOriginalOrder:function(){var e=this._getTileElements();if(e)for(var t=0;t<e.length;t++){var i=e[t];i._jetDataMasonryOriginalOrder||this._insertTileOriginalOrder(i,t)}},_restoreTilesOriginalOrder:function(){var e=this._getTileElements(),t=this._getTileElements();f(t);for(var i=0;i<e.length;i++){var n=e[i],o=t[i];if(n!==o){w.subtreeDetached(o),n.parentNode.insertBefore(o,n),w.subtreeAttached(o);var s=e.indexOf(o);s>i&&(e.splice(s,1),e.splice(i,0,o))}}},_insertTileOriginalOrder:function(e,t){var i=this._getTileElements();if(t<0&&(t=i.length),i)for(var n=0;n<i.length;n++){var o=i[n];o._jetDataMasonryOriginalOrder&&o._jetDataMasonryOriginalOrder>=t+1&&(o._jetDataMasonryOriginalOrder+=1)}e._jetDataMasonryOriginalOrder=t+1},_removeTileOriginalOrder:function(e){if(e._jetDataMasonryOriginalOrder){var t=this._getTileElements();if(t)for(var i=0;i<t.length;i++){var n=t[i];n._jetDataMasonryOriginalOrder&&n._jetDataMasonryOriginalOrder>e._jetDataMasonryOriginalOrder&&(n._jetDataMasonryOriginalOrder-=1)}delete e._jetDataMasonryOriginalOrder}},_applyTileStyleClass:function(){var e=this.element.children();(e=(e=e.not("."+o)).filter(function(e,t){return t.className.match(s)})).addClass(o)},_initMenu:function(e){var t=this._GetContextMenu();if(e||t||this._IsCustomElement()||(t=this.element.attr("contextmenu"))&&(this.options.contextMenu="#"+t),e||t){if(t=e||t,"function"===$.type(t)){try{t=t()}catch(e){t=null}$.type(t)}if(t){var n=$(t);if(n.length>0){n.css("display",i);var o=this._menu;if(!o)return;o.$container=n,o.usermenu=!0}this._menu.usermenu&&e&&this._applyMenu()}}},_applyMenu:function(){if(this._menu&&this._menu.usermenu&&this.options.reorderHandle){var e=this._menu.$container,t=this;"OJ-MENU"===e[0].tagName?e[0].addEventListener("ojAction",this._handleContextMenuSelect.bind(this)):e.on("ojselect",this._handleContextMenuSelect.bind(this));var i=e.find("[data-oj-command]"),n=!1;i.each(function(){var i=$(this).attr("data-oj-command");i.indexOf("oj-masonrylayout-")>=0&&(i=i.slice("oj-masonrylayout-".length));var o="OJ-MENU"===e[0].tagName?this.tagName:"li",s=t._buildContextMenuItem(i,o);$(this).attr("id",s.attr("id")),"OJ-OPTION"===this.tagName?(this.innerHTML=s.get(0).innerHTML,$(this).attr("data-oj-command",s.attr("data-oj-command"))):(s.get(0).className=$(this).get(0).className,$(this).replaceWith(s)),n=!0}),n&&("OJ-MENU"===e[0].tagName?e[0].refresh():e.ojMenu("refresh")),this._menu.$elemCut=e.find("#ojmasonrylayoutcut"),this._menu.$elemPasteBefore=e.find("#ojmasonrylayoutpastebefore"),this._menu.$elemPasteAfter=e.find("#ojmasonrylayoutpasteafter")}},_clearMenu:function(){var e=this._menu;e&&e.usermenu&&(e.usermenu=!1,"OJ-MENU"===e.$container[0].tagName?e.$container[0].removeEventListener("ojAction",this._handleContextMenuSelect):e.$container.off("ojselect"),e.$container=null)},_refreshMenu:function(){this._clearMenu(),this._initMenu(),this._applyMenu()},_prepareContextMenuBeforeOpen:function(e){var t=this.element,i=e.originalEvent.target,n=this.options.reorderHandle,o=!1;if(n){var s=$(i).closest(n);s&&s.length>0&&(o=!0)}var r,a=y(i,t[0]);if(this._menu.tile=a,this._menu.usermenu){var l=this._menu.cutTile,u=!1,d=this._menu.$elemCut;if(d){var h=d.hasClass("oj-helper-hidden");o||h?o&&h&&(d.removeClass("oj-helper-hidden"),u=!0):(d.addClass("oj-helper-hidden"),u=!0);var c=d.hasClass("oj-disabled");r=!1,l&&a===l&&(r=!0),r&&!c?(d.addClass("oj-disabled"),u=!0):!r&&c&&(d.removeClass("oj-disabled"),u=!0)}var p=this._menu.$elemPasteBefore;if(p){var _=p.hasClass("oj-helper-hidden");o||_?o&&_&&(p.removeClass("oj-helper-hidden"),u=!0):(p.addClass("oj-helper-hidden"),u=!0);var m=p.hasClass("oj-disabled");r=!1,l&&a!==l&&a!==b(l)||(r=!0),r&&!m?(p.addClass("oj-disabled"),u=!0):!r&&m&&(p.removeClass("oj-disabled"),u=!0)}var g=this._menu.$elemPasteAfter;if(g){var f=g.hasClass("oj-helper-hidden");o||f?o&&f&&(g.removeClass("oj-helper-hidden"),u=!0):(g.addClass("oj-helper-hidden"),u=!0);var v=g.hasClass("oj-disabled");r=!1,l&&l!==a&&l!==b(a)||(r=!0),r&&!v?(g.addClass("oj-disabled"),u=!0):!r&&v&&(g.removeClass("oj-disabled"),u=!0)}if(u){var C=this._menu.$container;"OJ-MENU"===C[0].tagName?C[0].refresh():C.ojMenu("refresh")}}},_buildContextMenuItem:function(e,t){var i=a[e],n=$(document.createElement(t));return n.attr("id",i),n.attr("data-oj-command",e),n.append(this._buildContextMenuLabel(e,"OJ-OPTION"===t)),n},_buildContextMenuLabel:function(e,t){var i=l[e],n=document.createTextNode(this.getTranslatedString(i));return t?n:$('<a href="#"></a>').append(n)},_menuCut:function(e){e&&(this._menu.cutTile=e)},_menuPaste:function(e,t){if(e&&this._menu.cutTile){var i=this._menu.cutTile;this._menu.cutTile=!1,this._doPaste(i,e,t)}},_doPaste:function(e,t,i){var n=e._jetDataMasonryOriginalOrder-1,o=$(e),s={tile:o,fromIndex:n};if(!1!==this._trigger("beforeReorder",null,s)){this._removeTileOriginalOrder(e);var r=t._jetDataMasonryOriginalOrder-1;i||(r+=1);var a=this.element[0];if(i)this._insertTileOriginalOrder(e,r),a.insertBefore(e,t);else{var l=b(t);this._insertTileOriginalOrder(e,r),a.insertBefore(e,l)}this._mlCommon.setup(!0);var u={tile:o,fromIndex:n,toIndex:r};this._trigger("reorder",null,u)}},_handleContextMenuSelect:function(e,t){var i=(t?t.item:$(e.target)).attr("id");"ojmasonrylayoutcut"===i?this._menuCut(this._menu.tile):"ojmasonrylayoutpastebefore"===i?this._menuPaste(this._menu.tile,!0):"ojmasonrylayoutpasteafter"===i&&this._menuPaste(this._menu.tile,!1)},_getTileIndex:function(e){var t=this._getTileElements(!0);f(t);for(var i=t.length,n=0;n<i;n++)if(t[n]===e)return n;return-1},_setupReorderHandles:function(){var e=this.element,t=e.children();this._setupReorderHandlesForElem(t),e.on("dragstart"+this.reorderHandleEventNamespace,this._handleDragStartFunc).on("dragenter"+this.reorderHandleEventNamespace,this._handleDragEnterFunc).on("dragover"+this.reorderHandleEventNamespace,this._handleDragOverFunc).on("dragleave"+this.reorderHandleEventNamespace,this._handleDragLeaveFunc).on("dragend"+this.reorderHandleEventNamespace,this._handleDragEndFunc).on("drop"+this.reorderHandleEventNamespace,this._handleDropFunc)},_setupReorderHandlesForElem:function(e){var t=this.options;e.filter(t.reorderHandle).attr("draggable","true").addClass("oj-draggable"),e.find(t.reorderHandle).attr("draggable","true").addClass("oj-draggable")},_tearDownReorderHandles:function(){var e=this.element,t=e.children();this._tearDownReorderHandlesForElem(t),e.off(this.reorderHandleEventNamespace)},_tearDownReorderHandlesForElem:function(e){var t=this.options;e.filter(t.reorderHandle).removeAttr("draggable").removeClass("oj-draggable"),e.find(t.reorderHandle).removeAttr("draggable").removeClass("oj-draggable")},_handleDragStart:function(e){var t,i=this.options;t=e.originalEvent.target;var n=$(t).closest(i.reorderHandle);if(n&&!(n.length<1)&&!this._bDragging){var o=y(t=e.target,this.element[0]);if(o){var s=this._getTileIndex(o);o._jetDataMasonryDragSourceIndex=s;var r={tile:$(o),fromIndex:s};if(!1!==this._trigger("beforeReorder",null,r)){var a=e.originalEvent;this._dragStart(o,a.pageX,a.pageY,a.dataTransfer)}}}},_handleDragEnter:function(e){if(this._bDragging){var t=e.originalEvent,i=t.relatedTarget,o=this.element[0],s=!1;if(i)s=o!==i&&!n.DomUtils.isAncestor(o,i);else if(this._dragLeftMasonryLayout){var r=document.elementFromPoint(t.clientX,t.clientY);s=r&&(r===o||n.DomUtils.isAncestor(o,r))}if(s)if(this._dragLeftMasonryLayout=!1,this._draggedTile){if(this._dropSite){$(this._dropSite).css("display",""),this._mlCommon.setup(!1,!0)}}else t.dataTransfer.dropEffect="none"}},_handleDragOver:function(e){if(!this._bDragging)return!1;var t=e.originalEvent;return t.dataTransfer.dropEffect="move",this._dragMove(t.pageX,t.clientX,t.clientY),e.preventDefault(),!1},_handleDragLeave:function(e){if(this._bDragging){var t=e.originalEvent,o=t.relatedTarget,s=this.element[0],r=!1;if(o)r=s!==o&&!n.DomUtils.isAncestor(s,o);else{var a=document.elementFromPoint(t.clientX,t.clientY);r=a&&a!==s&&!n.DomUtils.isAncestor(s,a)}if(r)if(this._dragLeftMasonryLayout=!0,this._dropSite)$(this._dropSite).css("display",i),this._mlCommon.setup(!1,!0)}},_clearDragStartHideTileTimeout:function(){if(this._dragStartHideTileTimeout){clearTimeout(this._dragStartHideTileTimeout),this._dragStartHideTileTimeout=null,this._busyStateResolveFunc(),this._busyStateResolveFunc=null;var e=this._draggedTile;e&&$(e).removeClass("oj-drag")}},_handleDragEnd:function(e){if(this._clearDragStartHideTileTimeout(),this._bDragging&&!this._bDropping){var t=this._draggedTile;if(t&&this._dropSite){var i=this._dropSite,o=this.element[0];if(n.DomUtils.isAncestor(o,t))$(i).css("display",""),this._removeTileOriginalOrder(i),i.parentNode.removeChild(i),$(t).css("display",""),this._insertTileOriginalOrder(t,t._jetDataMasonryOriginalOrder-1),this._mlCommon.setup(!1,!0);delete t._jetDataMasonryDragSourceIndex}this._draggedTile=null,this._dropSite=null,this._prevTileUnderPoint=null,this._prevCellUnderPoint=null,this._bDragMoveTransition=!1,this._bMouseMoved=!1,this._dragOffset=null,this._bDragEndTransition=!1,this._bDragging=!1}},_handleDrop:function(e){if(!this._bDragging)return!1;var t=this._mlCommon;t.isInLayoutCycle()&&t.finishLayoutCycle(),this._clearDragStartHideTileTimeout();var i=e.originalEvent;return this._drop(this._draggedTile,i.pageX,i.pageY),e.stopPropagation(),!1},_dragStart:function(e,t,n,s){this._bDragging=!0,this._bDropping=!1,this._bMouseMoved=!1,this._bDragStartTileHidden=!1,this._draggedTile=e;var r=this.element[0],a=m(e);this._dropSite=document.createElement("div");var l=this._dropSite;l._jetDataMasonryOriginalOrder=e._jetDataMasonryOriginalOrder,l.className=a+" oj-drop "+o;var d=l.style,h=e.style;d.top=h.top,this._bRTL?d.right=h.right:d.left=h.left;var c=u(e);r.insertBefore(l,e);var p={left:t-c.left,top:n-c.top};this._dragOffset=p,$(e).addClass("oj-drag"),s.effectAllowed="move",s.setData("text/html",e.outerHTML),s.setDragImage(e,p.left,p.top);var _=this;this._busyStateResolveFunc=this._addBusyState("Wait for dragStartHideTile timeout"),this._dragStartHideTileTimeout=setTimeout(function(){_._bDragStartTileHidden=!0,h.display=i,$(e).removeClass("oj-drag"),_._dragStartHideTileTimeout=null,_._busyStateResolveFunc(),_._busyStateResolveFunc=null,w.subtreeHidden(e)},0)},_dragMove:function(e,t,i){if(this._bMouseMoved=!0,this._bDragStartTileHidden&&!this._bDragMoveTransition){var n=this.element[0],o=y(document.elementFromPoint(t,i),n),s=!1;if(o){var r=$(o),a=this.options.reorderHandle;if(r.is(a))s=!0;else{var l=r.find(a);s=l&&l.length>0}}var d=!1;if(null==o||o===this._dropSite||o===this._draggedTile)this._prevTileUnderPoint=null,this._prevCellUnderPoint=null;else if(this._prevTileUnderPoint&&this._prevCellUnderPoint&&this._prevTileUnderPoint!==o){var h=this._getCellPosition(t,i);h&&h.row===this._prevCellUnderPoint.row&&h.col===this._prevCellUnderPoint.col&&(d=!0)}if(o&&!d&&o!==this._dropSite&&o!==this._draggedTile&&s){var c=e-u(n).left,p=b(this._dropSite),_=c>=o.offsetLeft+.5*o.offsetWidth;if(this._removeTileOriginalOrder(this._dropSite),_&&!this._bRTL||!_&&this._bRTL){var m=b(o);m?(this._insertTileOriginalOrder(this._dropSite,m._jetDataMasonryOriginalOrder-1),n.insertBefore(this._dropSite,m)):(this._insertTileOriginalOrder(this._dropSite,o._jetDataMasonryOriginalOrder),n.appendChild(this._dropSite))}else this._insertTileOriginalOrder(this._dropSite,o._jetDataMasonryOriginalOrder-1),n.insertBefore(this._dropSite,o);if(p!==b(this._dropSite)){var g=this._mlCommon,f=o,v=this._getCellPosition(t,i);this._bDragMoveTransition=g.setup(!1,!0),this._bDragMoveTransition&&(this._prevTileUnderPoint=f,this._prevCellUnderPoint=v)}}}},_handleDragMoveTransitionEnd:function(){this._bDragMoveTransition=!1},_drop:function(e,t,i){this._bDropping=!0;var n=this.element[0],o=this._dropSite;this._dropSite=null,this._prevTileUnderPoint=null,this._prevCellUnderPoint=null,w.subtreeDetached(e),n.insertBefore(e,o),n.removeChild(o),w.subtreeAttached(e),e._jetDataMasonryOriginalOrder=o._jetDataMasonryOriginalOrder;var s=e.style;s.display="",w.subtreeShown(e);var r=u(n),a=this._dragOffset;s.top=i-a.top-r.top+"px";var l=t-a.left-r.left;if(this._bRTL?(s.right=n.offsetWidth-(l+$(e).outerWidth(!0))+"px",s.left=""):s.left=l+"px",this._dragOffset=null,this._bMouseMoved){var d=this._mlCommon;this._bDragEndTransition=d.setup(!1,!0)}else this._handleDragEndTransitionEnd()},_handleDragEndTransitionEnd:function(){this._bDragEndTransition=!1,this._bDragging=!1,this._bDropping=!1,this._bMouseMoved=!1,this._bDragStartTileHidden=!1;var e=this._draggedTile;this._draggedTile=null;var t=e._jetDataMasonryDragSourceIndex;delete e._jetDataMasonryDragSourceIndex;var i=this._getTileIndex(e),n={tile:$(e),fromIndex:t,toIndex:i};this._trigger("reorder",null,n)},_getCellPosition:function(e,t){var i=this._mlCommon.getCellSize(),n=null;return i&&(n={col:parseInt(e/i.w,10),row:parseInt(t/i.h,10)}),n},_addBusyState:function(e){var t=this.element,i=c.getContext(t[0]).getBusyContext(),n="MasonryLayout";n+=" (id='"+t.attr("id")+"')";var o={description:n+=": "+e};return i.addBusyState(o)},getNodeBySubId:function(e){return this._super(e)},getSubIdByNode:function(e){return this._super(e)}})}(),En.extension._WIDGET_NAME="ojMasonryLayout",n.CustomElementBridge.register("oj-masonry-layout",{metadata:En});var Dn={properties:{disabled:{type:"boolean",value:!1},openOptions:{type:"object",properties:{display:{type:"string",enumValues:["auto","dropDown","sheet"],value:"auto"},initialFocus:{type:"string",enumValues:["firstItem","menu","none"],value:"menu"},launcher:{type:"string|Element"},position:{type:"object",properties:{at:{type:"object",properties:{horizontal:{type:"string",enumValues:["center","end","left","right","start"]},vertical:{type:"string",enumValues:["bottom","center","top"]}}},collision:{type:"string",enumValues:["fit","flip","flipcenter","flipfit","none"],value:"flipfit"},my:{type:"object",properties:{horizontal:{type:"string",enumValues:["center","end","left","right","start"],value:"start"},vertical:{type:"string",enumValues:["bottom","center","top"],value:"top"}}},of:{type:"string|object"},offset:{type:"object",properties:{x:{type:"number",value:0},y:{type:"number",value:0}}}}}}},translations:{type:"object",value:{},properties:{ariaFocusSkipLink:{type:"string"},labelCancel:{type:"string"}}}},methods:{refresh:{},close:{},open:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{},ojBeforeOpen:{},ojClose:{},ojOpen:{},ojAction:{}},extension:{}};!function(){var t=[],i=!1,o="oj-menu-position",s=n.AgentUtils.getAgentInfo().os===n.AgentUtils.OS.MAC&&n.AgentUtils.getAgentInfo().browser===n.AgentUtils.BROWSER.SAFARI,r=_.parseJSONFromFontFamily("oj-menu-config")||{},a="menuItem"===r.sheetCancelAffordance,l="dismiss"===r.sheetSwipeDownBehavior,u=r.dropDownModality||"modeless",d=r.sheetModality||"modal",h="bottom-"+(r.sheetMarginBottom||0),p=l&&{recognizers:[[Hammer.Swipe,{direction:Hammer.DIRECTION_DOWN}]]},m=function(){var e=r.dropDownThresholdWidth;null==e&&(e="768px");var t="(min-width: "+e+")";return window.matchMedia(t)}();function g(e){var t,i=[],n=e.children("oj-defer").first();t=n.length>0?n.children(".oj-menu-item, oj-menu-select-many"):e.children(".oj-menu-item, oj-menu-select-many");for(var o=0;o<t.length;o++){var s=$(t[o]);s.is(".oj-menu-item")?i.push(s[0]):"OJ-MENU-SELECT-MANY"===s[0].nodeName&&(i=$.merge(i,s.children(".oj-menu-item")))}return i}n.__registerWidget("oj.ojMenu",$.oj.baseComponent,{defaultElement:"<ul>",delay:300,role:"menu",widgetEventPrefix:"oj",options:{menuSelector:"ul",openOptions:{display:"auto",initialFocus:"menu",launcher:null,position:{my:{horizontal:"start",vertical:"top"},offset:{x:0,y:0},at:{horizontal:"start",vertical:"bottom"},of:void 0,collision:"flipfit"}},submenuOpenOptions:{position:{my:"start top",at:"end top",collision:"flipfit"}},animateStart:null,animateEnd:null,beforeOpen:null,close:null,open:null,action:null},_ComponentCreate:function(){if(this._super(),this._focusForTesting=this._focus,this._nextForTesting=this._next,this._selectForTesting=this._select,this._IsCustomElement()){this.element.hide();var e=this.options;e.openOptions.position=n.PositionUtils.coerceToJet(e.openOptions.position)}else this._createAsTopLevelMenu()},_createAsTopLevelMenu:function(){var e=this;this.activeMenu=this.element,this.mouseHandled=!1,this._setupSwipeBehavior(),this.element.uniqueId().addClass("oj-menu oj-component").hide().attr({role:this.role,tabIndex:"0","aria-hidden":"true"}),this._on(!0,{"mousedown .oj-menu-item":function(e){this.options.disabled&&e.preventDefault()},click:function(e){this.options.disabled&&e.preventDefault()},keydown:function(e){this.options.disabled&&(e.keyCode!==$.ui.keyCode.ESCAPE&&e.keyCode!==$.ui.keyCode.TAB||(e.keyCode===$.ui.keyCode.TAB&&e.preventDefault(),this._focusLauncherAndDismiss(e)))}}),this.options.disabled&&this.element.addClass("oj-disabled").attr("aria-disabled","true");var t=function(e){if(!this.focusHandled){this.focusHandled=!0;var t=$(e.currentTarget);try{this._focusIsFromPointer=!0,this._focus(e,t)}finally{this._focusIsFromPointer=!1}}}.bind(this),i=function(e){$(e.target).is(":visible")&&this._collapse(e,"eventSubtree")}.bind(this);this._on({"click .oj-disabled > a":function(e){e.preventDefault()},click:function(){this.mouseHandled=!1},touchstart:function(){this.focusHandled=!1},mouseover:function(){this.focusHandled=!1},"click .oj-menu-item:has(a)":function(e){var t=$(e.target).closest(".oj-menu-item");if(!this.mouseHandled&&t.not(".oj-disabled").length){if(this.mouseHandled=!0,e.preventDefault(),this.active&&this.active.closest(t).length&&this.active.get(0)!==t.get(0))return;t.has(".oj-menu").length?this._expand(e):(this._select(e),this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".oj-menu").length&&this._clearTimer&&this._clearTimer()))}},"mouseenter .oj-menu-item":t,"touchstart .oj-menu-item":t,mouseleave:i,"mouseleave .oj-menu":i,focus:function(e,t){if(!(t||e.target===this.element[0]||this._focusSkipLink&&e.target===this._focusSkipLink.getLink()[0])){var i=this.active||$(g(this.element)).first(0);this._focus(e,i)}},keydown:this._keydown,keyup:function(e){e.keyCode!==$.ui.keyCode.ENTER&&e.keyCode!==$.ui.keyCode.SPACE||(this.__spaceEnterDownInMenu=!1)}}),this._focusable({applyHighlight:!s,recentPointer:function(){return e._focusIsFromPointer},setupHandlers:function(t,i){e._focusInHandler=t,e._focusOutHandler=i}}),this._usingCallback=$.proxy(this._usingHandler,this),this._setup()},_createAsSubmenu:function(){this.element.attr(w._OJ_CONTAINER_ATTR,this.widgetName),this.element.uniqueId().addClass("oj-menu oj-component oj-menu-submenu oj-menu-dropdown").hide().attr({role:this.role,tabIndex:"0","aria-hidden":"true"}),this._setup()},__contextMenuPressHoldJustEnded:function(e){if(!arguments.length)return i;i=e},_processOjOptions:function(){this._maxEndIconCount=0,this._maxStartIconCount=0,this._startIconWidth=0,this._endIconWidth=0;var e=function(e){var t,i=[],n=e.children("oj-defer").first();t=n.length>0?n.children("oj-option, oj-menu-select-many"):e.children("oj-option, oj-menu-select-many");for(var o=0;o<t.length;o++){var s=$(t[o]);"OJ-OPTION"===s[0].nodeName?i.push(s[0]):"OJ-MENU-SELECT-MANY"===s[0].nodeName&&(i=$.merge(i,s.children("oj-option")))}return $(i)}(this.element);this._clearOption(e);for(var t=0;t<e.length;t++){e[t].customOptionRenderer=this._customOptionRenderer.bind(this)}},_customOptionRenderer:function(e){function t(e){if(e.previousElementSibling&&"OJ-OPTION"===e.previousElementSibling.nodeName)return e.previousElementSibling;if(e.previousElementSibling&&"OJ-MENU-SELECT-MANY"===e.previousElementSibling.nodeName){var i=e.previousElementSibling.lastElementChild;return"OJ-OPTION"===i.nodeName?i:i.previousElementSibling?i.previousElementSibling:t(i)}return e.previousElementSibling||"OJ-MENU-SELECT-MANY"!==e.parentElement.nodeName?void 0:t(e.parentElement)}function i(e){return e.nextElementSibling&&"OJ-OPTION"===e.nextElementSibling.nodeName?e.nextElementSibling:e.nextElementSibling&&"OJ-MENU-SELECT-MANY"===e.nextElementSibling.nodeName?e.nextElementSibling.firstElementChild:e.nextElementSibling&&"OJ-OPTION"===e.nextElementSibling.nodeName||"OJ-MENU-SELECT-MANY"!==e.parentElement.nodeName?void 0:i(e.parentElement)}var o=$(e),s="OJ-MENU-SELECT-MANY"===o.parent().prop("nodeName"),r=this;this._hasSubmenus=!1;for(var a,l,u,d,h=o.children('a[ojmenu="opt"]'),c=0;c<h.length;c++)(a=$(h[c])).children().removeClass("oj-menu-item-icon").removeClass("oj-menu-item-end-icon"),a.replaceWith(a.contents());if(o.children('span[ojmenu="opt"]').remove(),/[^\-\u2014\u2013\s]/.test(o.text())){this._initMenuItems(o);var p=document.createElement("a");p.setAttribute("href","#"),p.setAttribute("ojmenu","opt"),(a=$(p)).uniqueId().attr({tabIndex:"-1",role:this._itemRole(o)}),s&&(a.attr("aria-checked","false"),(l=e).previousElementSibling||t(l)||$(l).addClass("oj-top"),l.nextElementSibling&&"OJ-OPTION"===l.nextElementSibling.nodeName||i(l)||$(l).addClass("oj-bottom")),o.prepend(p);var _=n.BaseCustomElementBridge.getSlotMap(e),m=_.startIcon;if(m||s){if(s){var g=document.createElement("span");g.setAttribute("slot","startIcon"),g.setAttribute("ojmenu","opt"),g.setAttribute("class","oj-menucheckbox-icon"),m?m.splice(0,0,g):m=[g]}var f=m.length;r._maxStartIconCount=Math.max(r._maxStartIconCount,f),$.each(m,function(e,t){$(t).addClass("oj-menu-item-icon"),a.append(t),f>1&&r._positionStartIcon(t,e,f)})}var v=0,y=_.endIcon;y&&(v=y.length,r._maxEndIconCount=Math.max(r._maxEndIconCount,v));var b=_[""];$.each(b,function(e,t){$(t).is("oj-menu")?(r._setupSubmenu(a,$(t),0===v),r._hasSubmenus=!0):a.append(t)}),y&&$.each(y,function(e,t){$(t).addClass("oj-menu-item-end-icon"),a.append(t),v>1&&r._positionEndIcon(t,e,v)}),e.disabled?(o.addClass("oj-disabled"),a.attr("aria-disabled","true")):(o.removeClass("oj-disabled"),a.removeAttr("aria-disabled"))}else this._initDividers(o),(d=t(u=e))&&$(d).addClass("oj-menu-item-before-divider"),(d=i(u))&&$(d).addClass("oj-menu-item-after-divider")},_positionStartIcon:function(e,t,i){var n;n=this.isRtl?"margin-right":"margin-left";var o=parseInt($(e).css(n),10);this._startIconWidth=-1*o,$(e).css(n,o*(i-t)+"px")},_positionEndIcon:function(e,t,i){var n,o;this.isRtl?(n="margin-left",o="margin-right"):(n="margin-right",o="margin-left");var s=parseInt($(e).css(n),10);this._endIconWidth=-1*parseInt($(e).css(o),10),$(e).css(n,s+this._endIconWidth*(i-t-1)+"px")},_updateMenuPadding:function(e){var t=$(g(e)).children(),i=t.children(".oj-menu-item-icon:not(.oj-menu-cancel-icon)").length;e.toggleClass("oj-menu-icons",!!i).toggleClass("oj-menu-text-only",!i),this._maxStartIconCount&&this._maxStartIconCount>1&&this._applyAnchorIconPadding(t,this._startIconWidth,this._maxStartIconCount,!0);var n=t.children(".oj-menu-item-end-icon").length;e.toggleClass("oj-menu-end-icons",!!n),this._maxEndIconCount&&this._maxEndIconCount>1&&this._applyAnchorIconPadding(t,this._endIconWidth,this._maxEndIconCount,!1)},_applyAnchorIconPadding:function(e,t,i,n){var o;o=this.isRtl&&n||!this.isRtl&&!n?"padding-right":"padding-left",e.each(function(){var e=parseInt($(this).css(o),10);$(this).css(o,e+t*(i-1)+"px")})},_clickAwayHandler:function(e){if("focus"===e.type||"mousedown"===e.type||"touchstart"===e.type||121===e.keyCode&&e.shiftKey||93===e.keyCode){if("mousedown"===e.type&&i)return;var n=this,o=t.slice(0,t.length);$.each(o,function(t,i){if(!$(e.target).closest(i.element).length&&("keydown"===e.type||"mousedown"===e.type&&3===e.which||!$(e.target).closest(i._launcher).length||i._launcherClickShouldDismiss&&("mousedown"===e.type&&3!==e.which||"touchstart"===e.type))&&!i._dismissEvent){i._dismissEvent=e;var o=i._collapse(e,"eventSubtree");n._runOnPromise(o,function(){i.__dismiss(e),i._dismissEvent=null})}})}},_setOption:function(e,t){switch(this._superApply(arguments),e){case"translations":this._cancelAnchor&&this._cancelAnchor.text(this.options.translations.labelCancel)}},_destroy:function(){this.element.is(":visible")&&this.__dismiss(),this._setWhenReady("none"),this._clearTimer&&this._clearTimer(),delete this._clearTimer,this.element.removeAttr("aria-activedescendant").removeClass("oj-component").find(".oj-menu").addBack().removeClass("oj-menu oj-menu-submenu oj-menu-icons oj-menu-end-icons oj-menu-text-only").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".oj-menu-item").removeClass("oj-menu-item").removeAttr("role").children("a").removeAttr("aria-disabled").removeUniqueId().removeClass("oj-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=$(this);e.data("oj-ojMenu-submenu-icon")&&e.remove()}),this.element.find("a").removeAttr("aria-expanded"),this.element.find(".oj-menu-divider").removeClass("oj-menu-divider").removeAttr("role"),delete this._popupServiceEvents,delete this._usingCallback;var e=this._clearCloseDelayTimer;delete this._clearCloseDelayTimer,e&&e(),this.element.ojHammer("destroy"),this._super()},_keydown:function(e){var t=!0;function i(e){return e.replace(/[-\[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}switch(e.keyCode){case $.ui.keyCode.HOME:this._move("first","first",e);break;case $.ui.keyCode.END:this._move("last","last",e);break;case $.ui.keyCode.UP:this._previous(e);break;case $.ui.keyCode.DOWN:this._next(e);break;case $.ui.keyCode.LEFT:case $.ui.keyCode.RIGHT:e.keyCode===$.ui.keyCode.RIGHT!==this.isRtl?this.active&&!this.active.is(".oj-disabled")&&this._expand(e):this._collapse(e,"active");break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this._handleEnterSpace(e),this.__spaceEnterDownInMenu=!0;var n=this;setTimeout(function(){n.__spaceEnterDownInMenu=!1},100);break;case $.ui.keyCode.TAB:e.preventDefault(),this._focusLauncherAndDismiss(e);break;case $.ui.keyCode.ESCAPE:if(this._launcher){var o=this.element.attr("aria-activedescendant"),s=$(document.getElementById(o)).parents(".oj-menu").first();s.length>0&&s[0]!==this.element[0]?this._collapse(e,"active"):this._focusLauncherAndDismiss(e)}else this._collapse(e,"active");break;default:t=!1;var r=this.previousFilter||"",a=String.fromCharCode(e.keyCode),l=!1;clearTimeout(this.filterTimer),a===r?l=!0:a=r+a;var u=new RegExp("^"+i(a),"i"),d=$(g(this.activeMenu)).filter(function(){return u.test($(this).children("a").text())});(d=l&&-1!==d.index(this.active.next())?this.active.nextAll(".oj-menu-item"):d).length||(a=String.fromCharCode(e.keyCode),u=new RegExp("^"+i(a),"i"),d=$(g(this.activeMenu)).filter(function(){return u.test($(this).children("a").text())})),d.length?(this._focus(e,d),d.length>1?(this.previousFilter=a,this.filterTimer=setTimeout(function(){delete this.previousFilter}.bind(this),1e3)):delete this.previousFilter):delete this.previousFilter}t&&e.preventDefault()},_handleEnterSpace:function(e){this.active&&!this.active.is(".oj-disabled")&&(this.active.children("a[aria-haspopup='true']").length?this._expand(e):this._select(e))},refresh:function(){function e(e){for(var t=e.element.find("oj-menu:not(.oj-menu-submenu)"),i=0;i<t.length;i++){$(t[i]).attr("aria-hidden","true").hide(),c.getContext(t[i]).getBusyContext().whenReady().then(function(e){e.refresh()}.bind(e,t[i]))}}(this._super(),this._IsCustomElement()&&!this._wasCreated)?(this.element.parent().is("oj-option")&&(this._isSubmenu=!0,this._createAsSubmenu()),this._isSubmenu||(w.subtreeShown(this.element[0]),this._createAsTopLevelMenu(),e(this)),this._wasCreated=!0):(e(this),this._setup());this._reposition()},_reposition:function(){var e=this.element;if(e.is(":visible")&&(t=e[0],!((i=t.getBoundingClientRect()).width>document.documentElement.clientWidth||i.height>document.documentElement.clientHeight))){var t,i,n=e.data(o);e.position(n),e.find(".oj-menu").each(function(){var e=$(this);e.is(":visible")&&(n=e.data(o),e.position(n))})}},_setup:function(){this.isRtl="rtl"===this._GetReadingDirection(),this._IsCustomElement()?(this._processOjOptions(),this._isSubmenu&&(this.options.openOptions.launcher=this.element.parent()),this._updateMenuPadding(this.element)):this._setupWidgetMenus(),this.active&&!$.contains(this.element[0],this.active[0])&&this._blur()},_setupWidgetMenus:function(){var e=this,t=this.element.find(this.options.menuSelector),i=t.add(this.element),n=i.children();this._hasSubmenus=!!t.length,n.filter(".oj-menu-divider").has("a").removeClass("oj-menu-divider oj-menu-item").removeAttr("role");var o=n.filter(":not(.oj-menu-item):has(a)"),s=o.children("a");this._initMenuItems(o),this._initAnchors(s);var r=n.filter(function(e,t){var i=$(t);return i.is(":not(.oj-menu-item)")&&!/[^\-\u2014\u2013\s]/.test(i.text())});this._initDividers(r),this._initDividerNeighbors(n,r),n.filter(".oj-disabled").children("a").attr("aria-disabled","true"),n.filter(":not(.oj-disabled)").children("a").removeAttr("aria-disabled"),t.filter(":not(.oj-menu)").addClass("oj-menu oj-menu-submenu oj-menu-dropdown").hide().attr({role:this.role,"aria-hidden":"true"}).each(function(){var t=$(this);e._setupSubmenu(e._getSubmenuAnchor(t),t,!0)}),i.each(function(){e._updateMenuPadding($(this))})},_setupSubmenu:function(e,t,i){if(e.attr("aria-haspopup","true").attr("aria-expanded","false"),i){var n=$("<span>");n.addClass("oj-menu-submenu-icon oj-component-icon").data("oj-ojMenu-submenu-icon",!0),e.append(n)}t.attr("aria-labelledby",e.attr("id"))},_initMenuItems:function(e){e.addClass("oj-menu-item").attr("role","presentation")},_initAnchors:function(e){for(var t=0;t<e.length;t++){var i=$(e[t]);i.uniqueId().attr({tabIndex:"-1",role:this._itemRole(i.parent())})}},_initDividers:function(e){e.addClass("oj-menu-divider").attr("role","separator")},_initDividerNeighbors:function(e,t){e.removeClass("oj-menu-item-before-divider oj-menu-item-after-divider"),t.prev().addClass("oj-menu-item-before-divider"),t.next().addClass("oj-menu-item-after-divider")},_clearOption:function(e){e.removeClass("oj-menu-item-before-divider oj-menu-item-after-divider oj-menu-divider oj-menu-item").removeAttr("role")},_getSubmenuAnchor:function(e){return e.prev("a")},_getSubmenuWidget:function(e){return w.__GetWidgetConstructor(e,"ojMenu")("instance")},_itemRole:function(e){return"OJ-MENU-SELECT-MANY"===e.parent().prop("nodeName")?"menuitemcheckbox":"menuitem"},_getAdjacentDividers:function(e,t){var i=e.prev(".oj-menu-divider").add(e.next(".oj-menu-divider"));return t&&(i=i.add(e)),i},_focus:function(e,t){var i=this.active?this.active:$();if(!t.is(i)){e&&"focus"===e.type||this._clearTimer&&this._clearTimer(),t=t.first(),this._makeActive(t,e);var n=t.parents(".oj-menu").first(),o=n.closest(".oj-menu-item");n.find(".oj-focus-ancestor").removeClass("oj-focus-ancestor"),this._getAdjacentDividers(o,!0).addClass("oj-focus-ancestor"),e&&"keydown"===e.type?this._close():this._clearTimer=this._setTimer(function(){return delete this._clearTimer,this._close()},this._getSubmenuBusyStateDescription("closing"),this.delay);var s=t.children(".oj-menu"),r=s.length>0&&i.length>0&&$.contains(s[0],i[0]);s.length&&e&&/^mouse/.test(e.type)&&!this.active.hasClass("oj-disabled")&&!r&&this._startOpening(e,s),this.activeMenu=t.parents(".oj-menu").first()}},_makeActive:function(e,t){if(!e.is(this.active)){var i,n,o=this.active?this.active:$(),s=e.children("a");this.active=e,this.element.attr("aria-activedescendant",s.attr("id")),this._focusOutHandler(o),this._focusInHandler(e),this._getAdjacentDividers(o).removeClass("oj-focus"),this._getAdjacentDividers(e).addClass("oj-focus"),this._trigger("_activeItem",t,{previousItem:o,item:e,privateNotice:"The _activeItem event is private.  Do not use."}),t&&/^key/.test(t.type)&&(i=s[0],(n=i.getBoundingClientRect()).top<0||n.bottom>document.documentElement.clientHeight||n.left<0||n.right>document.documentElement.clientWidth)&&s[0].scrollIntoView()}},_removeActive:function(e){if(this.active){var t=this.active;this.active=null,this.element.removeAttr("aria-activedescendant"),this._focusOutHandler(t),this._getAdjacentDividers(t).removeClass("oj-focus"),this._trigger("_activeItem",e,{previousItem:t,item:$(),privateNotice:"The _activeItem event is private.  Do not use."})}},_blur:function(e){this._clearTimer&&this._clearTimer(),this._removeActive(e)},_focusLauncherAndDismiss:function(e,t){this._launcher&&this._launcher.focus(),this.__dismiss(e,t)},close:function(){this.__dismiss()},__dismiss:function(e,t){if(!this._isOperationPending("close","__dismiss",[e,t])&&n.ZOrderUtils.getStatus(this.element)===n.ZOrderUtils.STATUS.OPEN){var i=this.element.is(":visible");this._setWhenReady("close");var o={};o[n.PopupService.OPTION.POPUP]=this.element,o[n.PopupService.OPTION.CONTEXT]={event:e,selectUi:t,isOpen:i},n.PopupService.getInstance().close(o)}},_getDefaultAnimation:function(e,t){return _.parseJSONFromFontFamily("oj-menu-option-defaults").animation[e][t]},_isAnimationDisabled:function(){return!this._IsCustomElement()||this._disableAnimation},_replaceAnimationOptions:function(e,t){var i=e;if(t&&e&&"string"!=typeof e){for(var n=JSON.stringify(e),o=Object.keys(t),s=0;s<o.length;s++){var r=o[s];n=n.replace(new RegExp(r,"g"),t[r])}i=JSON.parse(n)}return i},_runOnPromise:function(e,t){return e?e.then(t):t()},_beforeCloseHandler:function(e){var t=e[n.PopupService.OPTION.POPUP];if(this._IsCustomElement()){var i=e[n.PopupService.OPTION.CONTEXT],o=i.selectUi;if(o&&o.item.length){var s={},r=o.item[0],a=i.event;s.originalEvent=a.originalEvent;var l={detail:s,cancelable:!0,bubbles:!0},u=new CustomEvent("ojAction",l);r.dispatchEvent(u),i.event=u}}if(!this._isAnimationDisabled()){var d=this._getDefaultAnimation(this._sheetMenuIsOpen?"sheet":"dropdown","close"),h=vi.startAnimation(t[0],"close",n.PositionUtils.addTransformOriginAnimationEffectsOption(t,d),this);return h.then(function(){t.attr("aria-hidden","true").hide()}),h}t.attr("aria-hidden","true").hide()},_afterCloseHandler:function(e){var i=e[n.PopupService.OPTION.CONTEXT],s=i.event,r=i.selectUi,a=i.isOpen;(this.element.removeData(o),this._launcher=void 0,this._sheetMenuIsOpen=!1,!this._IsCustomElement()&&r)&&(s=this._trigger2("select",s,r).event);a&&this._trigger("close",s,{}),this._currentOpenOptions=null;var l=t.indexOf(this);t.splice(l,1),this._destroyVoiceOverAssist()},getCurrentOpenOptions:function(){return $.extend(!0,{},this._currentOpenOptions||this.options.openOptions)},open:function(i,s){var r=arguments[2];if(!this._isOperationPending("open","open",[i,s,r])){this._IsCustomElement()&&this.refresh(),this.element.removeAttr("aria-activedescendant"),this.element.find(".oj-focus").removeClass("oj-focus"),this.focusHandled=!1,this._focusIsFromPointer=!1,this.mouseHandled=!1,this.activeMenu=this.element,this.active=null,(s=$.extend({},this.options.openOptions,s)).position=$.extend({},s.position),this._IsCustomElement()&&this._setPosition(s.position),r=$.extend({},this.options.submenuOpenOptions,r);var a=this._currentOpenOptions;this._currentOpenOptions=s,n.PositionUtils._normalizeEventForPosition(i),this._launcherClickShouldDismiss=this.element[0].__openingContextMenu;var l=this._trigger2("beforeOpen",i,{openOptions:s});if(!l.proceed)return this._currentOpenOptions=a,void(this._disableAnimation=!1);this.element.is(":visible")&&(this._disableAnimation=!0,this._currentOpenOptions=a,this.__dismiss(l.event),this._dismissEvent=null,this._currentOpenOptions=s);var c=s.launcher;if(!(c=this._IsCustomElement()?"string"===$.type(c)?$(document.getElementById(c)):$(c):"string"===$.type(c)?$(c):c)||!c.length)return e.warn("When calling Menu.open(), must specify openOptions.launcher via the component option, method param, or beforeOpen listener.  Ignoring the call."),this._currentOpenOptions=null,void(this._disableAnimation=!1);var p,_,m=this._isDropDown(s.display);if(this._toggleCancelDom(m),m){this.element.addClass("oj-menu-dropdown").removeClass("oj-menu-sheet"),_=u;var g=n.PositionUtils.normalizeHorizontalAlignment(s.position,this.isRtl);this._IsCustomElement()?(g=n.PositionUtils.coerceToJet(g,this.options.openOptions.position),p=n.PositionUtils.coerceToJqUi(g)):p=g,p.of=n.PositionUtils.normalizePositionOf(p.of,c,i)}else this.element.addClass("oj-menu-sheet").removeClass("oj-menu-dropdown"),_=d,p={my:"bottom",at:h,of:window,collision:"flipfit"};var f=this.element[0],v=t.slice(0,t.length);$.each(v,function(e,t){t.element[0]!==f&&(t._collapse(i,"eventSubtree"),t.__dismiss(i))}),this._submenuPosition=n.PositionUtils.normalizeHorizontalAlignment(r.position,this.isRtl);var y=this._usingCallback;$.isFunction(p.using)&&(p.origUsing=p.using),p.using=y,this.element.data(o,p),this._setWhenReady("open");var b={};b[n.PopupService.OPTION.POPUP]=this.element,b[n.PopupService.OPTION.LAUNCHER]=c,b[n.PopupService.OPTION.POSITION]=p,b[n.PopupService.OPTION.EVENTS]=this._getPopupServiceEvents(),b[n.PopupService.OPTION.LAYER_SELECTORS]="oj-menu-layer",b[n.PopupService.OPTION.MODALITY]=_,b[n.PopupService.OPTION.CONTEXT]={event:i,initialFocus:s.initialFocus,launcher:c,isDropDown:m},b[n.PopupService.OPTION.CUSTOM_ELEMENT]=this._IsCustomElement(),n.PopupService.getInstance().open(b),this._disableAnimation=!1}},_setPosition:function(e){var t=this.options;t.openOptions.position=n.PositionUtils.coerceToJet(e,t.openOptions.position)},_beforeOpenHandler:function(e){var t,i=e[n.PopupService.OPTION.POPUP],o=e[n.PopupService.OPTION.POSITION],s=e[n.PopupService.OPTION.CONTEXT],r=s.event,a=s.isDropDown,l=s.initialFocus;if(i.show(),i.position(o),this._initVoiceOverAssist(l),"firstItem"===l){var u=this._getFirstItem();this._focus(r,u)}if(!this._isAnimationDisabled()){var d=this._getDefaultAnimation(a?"dropdown":"sheet","open");t=vi.startAnimation(i[0],"open",n.PositionUtils.addTransformOriginAnimationEffectsOption(i,d),this)}return t},_afterOpenHandler:function(e){var i,o=e[n.PopupService.OPTION.CONTEXT],s=o.event,r=o.launcher,a=o.isDropDown,l=o.initialFocus;(this._launcher=r,this._sheetMenuIsOpen=!a,t.push(this),"firstItem"===l||"menu"===l)&&(i=this._focusSkipLink&&"menu"===l?this._focusSkipLink.getLink():this.element,this._IsCustomElement()?window.setImmediate(function(){i.focus()}):i.focus());this._trigger("open",s,{})},_initVoiceOverAssist:function(e){if("menu"===e&&(n.AgentUtils.getAgentInfo().os===n.AgentUtils.OS.IOS||n.AgentUtils.getAgentInfo().os===n.AgentUtils.OS.ANDROID)){var t=this._getFirstItem();if(!(t.length<1)){var i=this.element.attr("id");n.StringUtils.isEmptyOrUndefined(i)&&(i=this.uuid);var o=[i,"focusSkipLink"].join("_"),s=function(){window.setImmediate(function(e,t){t.find("a").first().focus(),e._focus(null,t)}.bind(this,this,t))}.bind(this),r=this.options.translations.ariaFocusSkipLink;this._focusSkipLink=new n.PopupSkipLink(t,r,s,o,{insertBefore:!0,preventKeyEvents:!1})}}},_destroyVoiceOverAssist:function(){this._focusSkipLink&&(this._focusSkipLink.destroy(),delete this._focusSkipLink)},_getFirstItem:function(){return this.element.find(".oj-menu-item").first()},_startOpening:function(e,t){this._clearTimer&&this._clearTimer(),this._IsCustomElement()&&t[0].refresh(),this._clearTimer=this._setTimer(function(){return delete this._clearTimer,this._close().then(function(){this._open(e,t)}.bind(this))},this._getSubmenuBusyStateDescription("closing and opening"),this.delay)},_open:function(e,t){if("true"===t.attr("aria-hidden")&&this.active){var i;if(this._IsCustomElement()){var s=this._getSubmenuWidget(t);if(!s._trigger2("beforeOpen",e).proceed)return;i=n.PositionUtils.coerceToJqUi(s.options.openOptions.position),i=n.PositionUtils.normalizeHorizontalAlignment(i,this.isRtl)}else i=this._submenuPosition;if(i=$.extend({of:this.active},i),this._clearTimer&&this._clearTimer(),this.element.find(".oj-menu").not(t.parents(".oj-menu")).hide().attr("aria-hidden","true").removeData(o),t.show().removeAttr("aria-hidden").position(i).data(o,i),this._getSubmenuAnchor(t).attr("aria-expanded","true"),!this._isAnimationDisabled()){var r=c.getContext(this.element[0]).getBusyContext().addBusyState({description:this._getSubmenuBusyStateDescription("opening")}),a=this._getDefaultAnimation("submenu","open");a=this._replaceAnimationOptions(a,{"#myPosition":i.my}),n.AnimationUtils.startAnimation(t[0],"open",a,this).then(r)}}},__collapseAll:function(e,t,i){var n;this._clearTimer&&this._clearTimer();var o=this,s=function(){delete o._clearTimer;var i=t?o.element:$(e&&e.target).closest(o.element.find(".oj-menu"));i.length||(i=o.element);var n=o._close(i);return n=o._runOnPromise(n,function(){o._blur(e),o.activeMenu=i})};if(i?this._isAnimationDisabled()?o._clearTimer=o._setTimer(s,o._getSubmenuBusyStateDescription("closing"),i):n=new Promise(function(e){o._clearTimer=o._setTimer(s,o._getSubmenuBusyStateDescription("closing"),i,function(){e(!0)})}):n=s(),n){var r=c.getContext(this.element[0]).getBusyContext().addBusyState({description:"closing submenus"});n.then(r)}return n},_close:function(e){var t;e||(e=this.active?this.active.parents(".oj-menu").first():this.element);var i=this,n=i._getDefaultAnimation("submenu","close"),s=e.find(".oj-menu"),r=function(e){e.hide().attr("aria-hidden","true").removeData(o),i._getSubmenuAnchor(e).attr("aria-expanded","false")};if(this._isAnimationDisabled())r(s),e.find(".oj-focus-ancestor").removeClass("oj-focus-ancestor"),t=Promise.resolve(!0);else{var a=function(e){var t=null;return $(g(e)).children(".oj-menu").each(function(e,s){var l=$(s);if(l.is(":visible")){var u=a(l);t=i._runOnPromise(u,function(){var e=l.data(o),t=i._replaceAnimationOptions(n,{"#myPosition":e.my});return vi.startAnimation(s,"close",t,i).then(function(){r(l)})})}else r(l),t=Promise.resolve(!0)}),t};t=a(e),t=this._runOnPromise(t,function(){e.find(".oj-focus-ancestor").removeClass("oj-focus-ancestor")})}return t},_collapse:function(t,i){var n;if(null==i||"active"===i){var o=this.activeMenu&&this.activeMenu.closest(".oj-menu-item",this.element);if(o&&o.length){var s=this;n=this._close(),n=this._runOnPromise(n,function(){s._focus(t,o)})}}else"all"===i||"eventSubtree"===i?n=this.__collapseAll(t,"all"===i,this.delay):e.warn("Invalid param "+i+" passed to Menu._collapse().  Ignoring the call.");return n},_expand:function(e){var t,i;if(this.active){var n=g(i=this.active.children(".oj-menu ").first());n.length>0&&(t=$(n[0]))}t&&t.length&&(this._open(e,i),this._clearTimer&&this._clearTimer(),this._clearTimer=this._setTimer(function(){delete this._clearTimer,this._focus(e,t)},this._getBusyStateDescription("focusing an item")))},_next:function(e){this._move("next","first",e)},_previous:function(e){this._move("prev","last",e)},_move:function(e,t,i){var n,o=g(this.activeMenu),s=o.indexOf(this.active?this.active[0]:null);s>-1?"first"===e?n=o[0]:"last"===e?n=o[o.length-1]:"next"===e?n=s+1<o.length?o[s+1]:o[0]:"prev"===e&&(n=s-1>-1?o[s-1]:o[o.length-1]):n="first"===t?o[0]:o[o.length-1],this._focus(i,$(n))},_select:function(e){if(!this.active&&e&&e.target){var t=$(e.target).closest(".oj-menu-item");t.closest(this.element).length&&this._makeActive(t,e)}var i=this.active.is(this._cancelItem)?void 0:{item:this.active},n=this.__collapseAll(e,!0);this._runOnPromise(n,function(){this._focusLauncherAndDismiss(e,i)}.bind(this))},_surrogateRemoveHandler:function(){var e=this.element;n.ZOrderUtils.getStatus(e)===n.ZOrderUtils.STATUS.OPEN&&e.remove()},_getPopupServiceEvents:function(){if(!this._popupServiceEvents){var e={};this._popupServiceEvents=e,e[n.PopupService.EVENT.POPUP_CLOSE]=this._closeAll.bind(this),e[n.PopupService.EVENT.POPUP_REMOVE]=this._surrogateRemoveHandler.bind(this),e[n.PopupService.EVENT.POPUP_REFRESH]=this._reposition.bind(this),e[n.PopupService.EVENT.POPUP_AUTODISMISS]=this._clickAwayHandler.bind(this),e[n.PopupService.EVENT.POPUP_BEFORE_OPEN]=this._beforeOpenHandler.bind(this),e[n.PopupService.EVENT.POPUP_AFTER_OPEN]=this._afterOpenHandler.bind(this),e[n.PopupService.EVENT.POPUP_BEFORE_CLOSE]=this._beforeCloseHandler.bind(this),e[n.PopupService.EVENT.POPUP_AFTER_CLOSE]=this._afterCloseHandler.bind(this)}return this._popupServiceEvents},_closeAll:function(){this._disableAnimation=!0,this._close(this.element),this.__dismiss(null),this._setWhenReady("none")},_usingHandler:function(e,t){var i=t.element.element;i.css(e),n.PositionUtils.captureTransformOriginAnimationEffectsOption(i,t);var s=i.data(o).origUsing;s&&s(e,t),n.PositionUtils.isAligningPositionClipped(t)&&(this._clearCloseDelayTimer=this._setTimer(this._closeAll,this._getSubmenuBusyStateDescription("closing"),1))},getNodeBySubId:function(e){switch(e&&e.subId){case"oj-menu-cancel-command":return this._cancelDomAttached?this._cancelItem[0]:null;default:return this._super(e)}},getSubIdByNode:function(e){return this._cancelItem&&this._cancelItem.is($(e).parents().addBack(e))?{subId:"oj-menu-cancel-command"}:this._super(e)},_isDropDown:function(e){if(this._hasSubmenus)return!0;switch(e){case"dropDown":return!0;case"sheet":return!1;default:return m.matches}},_toggleCancelDom:function(e){function t(e,t){var i=g(e),n=i.indexOf(t[1]);return $(i[n-1])}if(a)if(e)this._cancelDomAttached&&(t(this.element,this._getCancelDom()).removeClass("oj-menu-item-before-divider"),this._getCancelDom().detach(),this._cancelDomAttached=!1);else{var i=this._getCancelDom();i.appendTo(this.element),t(this.element,i).addClass("oj-menu-item-before-divider"),this._cancelDomAttached=!0}},_getCancelDom:function(){if(!this._cancelDom){var e=$("<li></li>",this.document[0]),t=$("<a href='#'></a>",this.document[0]).text(this.options.translations.labelCancel);$("<span class='oj-menu-item-icon oj-component-icon oj-menu-cancel-icon'></span>",this.document[0]).prependTo(t);var i=$("<li></li>",this.document[0]).addClass("oj-menu-item-cancel oj-menu-item-after-divider").append(t);this._initDividers(e),this._initAnchors(t),this._initMenuItems(i),this._cancelAnchor=t,this._cancelItem=i,this._cancelDom=$([e[0],i[0]])}return this._cancelDom},_setupSwipeBehavior:function(){l&&(this.element.ojHammer(p),this._on({swipedown:function(e){this._sheetMenuIsOpen&&"touch"===e.gesture.pointerType&&(this.__collapseAll(e,!0),this._focusLauncherAndDismiss(e))}}))},_setWhenReady:function(e){var t=this._whenReadyMediator;t&&(t.destroy(),delete this._whenReadyMediator),["open","close"].indexOf(e)<0||(this._whenReadyMediator=new n.PopupWhenReadyMediator(this.element,e,"ojMenu",this._IsCustomElement()))},_isOperationPending:function(e,t,i){var n=this._whenReadyMediator;return!!n&&n.isOperationPending(this,e,t,i)},_setTimer:function(e,t,i,n){var o=c.getContext(this.element[0]).getBusyContext().addBusyState({description:t}),s=function(){o&&(o(),o=null,n&&n())},r=this,a=setTimeout(function(){var t=e.bind(r)();t&&t instanceof Promise?t.then(s):s()},i||0);return function(){clearTimeout(a),s()}},_getBusyStateDescription:function(e){return"Menu with id '"+this.element.attr("id")+"' is busy "+e+"."},_getSubmenuBusyStateDescription:function(e){return this._getBusyStateDescription(e+" a submenu")},_NotifyDetached:function(){n.ZOrderUtils.getStatus(this.element)===n.ZOrderUtils.STATUS.OPEN&&this._closeAll(),this._super()}}),w.setDefaultOptions({ojMenu:{openOptions:w.createDynamicPropertyGetter(function(e){return{position:null!=n.BaseCustomElementBridge.getRegistered(e.element.tagName)?e.containers.indexOf("ojMenu")>=0?{my:{horizontal:"start",vertical:"top"},at:{horizontal:"end",vertical:"top"},offset:{x:0,y:0},collision:"flipfit"}:{my:{horizontal:"start",vertical:"top"},at:{horizontal:"start",vertical:"bottom"},offset:{x:0,y:0},collision:"flipfit"}:{my:"start top",at:"start bottom",collision:"flipfit"}}})}})}(),Dn.extension._WIDGET_NAME="ojMenu",n.CustomElementBridge.register("oj-menu",{metadata:Dn});function An(e){this._composite=e.element,this._properties=e.properties,this.disconnected=this._disconnected.bind(this),this.connected=this._connected.bind(this),this.propertyChanged=this._propertyChanged.bind(this),this.optionIdPrefix=[e.unique,"opt"].join("_"),this.handleAction=this._handleAction.bind(this),this.handleOptionMutations=this._handleOptionMutations.bind(this),this._composite.setAttribute("role","group"),this._properties.disabled&&this._composite.setAttribute("aria-disabled","true")}An.prototype._connected=function(e){this._addEventListener()},An.prototype._disconnected=function(e){this._removeEventListener()},An.prototype._propertyChanged=function(e){("external"===e.updatedFrom&&"value"===e.property||"external"===e.updatedFrom&&"disabled"===e.property||"external"===e.updatedFrom&&"options"===e.property)&&(this._handleOptionMutations(),"disabled"===e.property&&(this._properties.disabled?this._composite.setAttribute("aria-disabled","true"):this._composite.removeAttribute("aria-disabled")))},An.prototype._addEventListener=function(){this._optionMutations=new MutationObserver(this.handleOptionMutations),this._optionMutations.observe(this._composite,{attributes:!0,subtree:!0,attributeFilter:["role"]}),this._composite.addEventListener("ojAction",this.handleAction,!0)},An.prototype._removeEventListener=function(){if(this._composite.removeEventListener("ojAction",this.handleAction,!0),this._optionMutations){var e=this._optionMutations.takeRecords();e&&e.length>0&&this.handleOptionMutations(),this._optionMutations.disconnect(),delete this._optionMutations}},An.prototype._handleAction=function(e){var t=e.target,i=t.value;An._optionToggleChecked(t)?this._addValue(i):this._removeValue(i)},An.prototype._handleOptionMutations=function(){for(var e=this._properties.value,t=this._composite.querySelectorAll("oj-option"),i=0;i<t.length;i++){var n=t[i];if(n.classList.contains("oj-menu-item")){var o=n.value,s=e.indexOf(o)>-1;An._optionSetChecked(n,s),this._properties.disabled?An._optionSetDisabled(n,!0):An._optionSetDisabled(n,n.disabled)}}},An.prototype._addValue=function(e){var t=this._properties.value;if(t.indexOf(e)<0){var i=t.slice();i.push(e),this._properties.value=i}},An.prototype._removeValue=function(e){var t=this._properties.value,i=t.indexOf(e);if(i>-1){var n=t.slice();n.splice(i,1),this._properties.value=n}},An._optionToggleChecked=function(e){var t=!1,i=e.firstChild;if(i){var n=i.querySelector(".oj-menucheckbox-icon");"true"===i.getAttribute("aria-checked")?(i.setAttribute("aria-checked","false"),n&&n.classList.remove("oj-selected")):(i.setAttribute("aria-checked","true"),n&&n.classList.add("oj-selected")),t="true"===i.getAttribute("aria-checked")}return t},An._optionSetChecked=function(e,t){var i=e.firstChild;if(i){i.setAttribute("aria-checked",t?"true":"false");var n=i.querySelector(".oj-menucheckbox-icon");n&&(t?n.classList.add("oj-selected"):n.classList.remove("oj-selected"))}},An._optionSetDisabled=function(e,t){var i=e.firstChild;if(i){var n=i.querySelector(".oj-menucheckbox-icon");t?(e.classList.add("oj-disabled"),i.setAttribute("aria-disabled","true"),n&&n.classList.add("oj-disabled")):(e.classList.remove("oj-disabled"),i.removeAttribute("aria-disabled"),n&&n.classList.remove("oj-disabled"))}},ci.register("oj-menu-select-many",{view:'<oj-bind-slot></oj-bind-slot><oj-bind-if test="[[$props.options]]">  <oj-bind-for-each data="[[$props.options]]">    <template>      <oj-option :id="[[$current.data.id ? $current.data.id : optionIdPrefix + $current.observableIndex()]]"                  value="[[$current.data.value]]" disabled="[[$current.data.disabled]]">        <oj-bind-text value="[[$current.data.label]]"></oj-bind-text>      </oj-option>    </template>  </oj-bind-for-each><oj-bind-if>',viewModel:An,metadata:{properties:{disabled:{type:"boolean",value:!1},options:{type:"Array|oj.DataProvider"},value:{type:"Array<any>",writeback:!0,value:[]}},methods:{setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}}});function In(e){this._composite=e.element,this.containerId=[e.unique,"mc"].join("_"),this._messagesContainerId=this.containerId,this.handleCloseIcon=this._handleCloseIcon.bind(this),this.close=this._closeMessage.bind(this),this.bindingsApplied=this._bindingsApplied.bind(this),this.disconnected=this._disconnected.bind(this),this.connected=this._connected.bind(this),this.propertyChanged=this._propertyChanged.bind(this),this.messageCreatedTime=(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),this.handleKeydown=this._handleKeydown.bind(this),this._properties=e.properties,this._createObservables()}function On(e,t){this._element=e,this._operation=t,this._init()}In.prototype._connected=function(e){var t=this._operationMediator;t&&"none"===t.getPendingOperation()&&this._isMessageOpen()&&this._scheduleAutoClose()},In.prototype._disconnected=function(e){var t=this._operationMediator;t&&"none"===t.getPendingOperation()&&this._clearAutoClose()},In.prototype._bindingsApplied=function(e){this._openMessage()},In.prototype._propertyChanged=function(e){function t(e,t,i){if("external"===e.updatedFrom&&e.property===t){var n=e.subproperty;if(n)return[t,i].join(".")===n.path;var o=e.previousValue[i];return e.value[i]!==o}return!1}t(e,"message","autoTimeout")&&(this.computedMessageCloseSelectors(this._computeMessageCloseSelectors()),this._clearAutoClose(),this._scheduleAutoClose()),t(e,"message","closeAffordance")&&(this.hasCloseAffordance("defaults"===this._computeCloseAffordance()),this._unregisterSwipeHandler(),this._registerSwipeHandler()),t(e,"message","icon")&&(this.computedIconStyle(this._computeIconStyle()),this.computedIconClass(this._computeIconClass())),(t(e,"message","category")||t(e,"displayOptions","category"))&&this.computedCategory(this._computeCategory()),t(e,"message","severity")&&(this.computedSeverity(this._computeSeverity()),this.computedCategory(this._computeCategory()),this.computedIconClass(this._computeIconClass())),t(e,"message","timestamp")&&this.computedTimestamp(this._computeTimestamp()),t(e,"message","summary")&&this.computedSummary(this._computeSummary()),t(e,"message","detail")&&this.computedDetail(this._computeDetail()),t(e,"translations","labelCloseIcon")&&this.computedLabelCloseIcon(this._computeLabelCloseIcon()),t(e,"translations","categories")&&this.computedCategory(this._computeCategory())},In.prototype._registerSwipeHandler=function(){if(n.DomUtils.isTouchSupported()&&"defaults"===this._computeCloseAffordance()){var e=$(document.getElementById(this._messagesContainerId)),t={recognizers:[[Hammer.Swipe,{direction:Hammer.DIRECTION_ALL}]]},i="rtl"===n.DomUtils.getReadingDirection()?"swipeleft swipeup":"swiperight swipeup";this._hammerSwipe=e.ojHammer(t).on(i,function(e){e.preventDefault(),this._closeMessage()}.bind(this))}},In.prototype._unregisterSwipeHandler=function(){if(n.DomUtils.isTouchSupported()&&this._hammerSwipe){var e="rtl"===n.DomUtils.getReadingDirection()?"swipeleft swipeup":"swiperight swipeup";this._hammerSwipe.off(e),delete this._hammerSwipe}},In.prototype._scheduleAutoClose=function(){this._computeAutoTimeout()>-1&&(this._autoCloseTimer=window.setTimeout(this._closeMessage.bind(this),this._computeAutoTimeout()))},In.prototype._clearAutoClose=function(){isNaN(this._autoCloseTimer)||(window.clearTimeout(this._autoCloseTimer),delete this._autoCloseTimer)},In.prototype._isMessageOpen=function(){var e=document.getElementById(this._messagesContainerId);return!(!e||!$(e).is(":visible"))},In.prototype._closeMessage=function(e){var t=document.getElementById(this._messagesContainerId);if(t){this._unregisterSwipeHandler(),this._clearAutoClose();var i=this._operationMediator;if(i){if(i.isOperationPending("close",this._closeMessage.bind(this,e)))return;i.destroy()}this._operationMediator=new On(this._composite,"close");var n=this._getAnimateOptionDefaults("close");vi.startAnimation(t,"close",n,this._composite).then(function(){$(t).hide(),w.subtreeHidden(t);var i={bubbles:!0,cancelable:!1,detail:{message:this._properties.message}},n=new CustomEvent("ojClose",i);e&&Object.defineProperty(n,"_originalEvent",{value:e,writable:!1}),this._composite.dispatchEvent(n)}.bind(this))}},In.prototype._computeSeverity=function(){var e=this._properties.message;return n.StringUtils.isEmptyOrUndefined(e.severity)?In._getMessageDefault("severity"):"fatal"===e.severity?"error":e.severity},In.prototype._computeTimestamp=function(){var t=this._properties.message;if(!n.StringUtils.isEmptyOrUndefined(t.timestamp))try{var i=le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({pattern:"MM/dd/yy, hh:mm a"}).format(t.timestamp);return this._isDateToday(t.timestamp)&&(i=i.split(", ")[1]),i}catch(i){return void e.info(["JET oj-message id='",In._toSelector(this._composite),"': failed to parse or format the supplied value to message.timestamp='",t.timestamp,"'."].join(""))}},In.prototype._isDateToday=function(e){var t=new Date,i=le.IntlConverterUtils.isoToLocalDate(e);return t.getUTCFullYear()===i.getUTCFullYear()&&t.getUTCMonth()===i.getUTCMonth()&&t.getUTCDate()===i.getUTCDate()},In.prototype._computeCategory=function(){var e=this._properties.displayOptions;if(!e||!e.category||"none"!==e.category){var t=this._properties.message;if(!n.StringUtils.isEmptyOrUndefined(t.category))return t.category;var i=this._computeSeverity(),o=this._properties.translations,s=o&&o.categories?o.categories[i]:"";return n.StringUtils.isEmptyOrUndefined(s)&&(s=v.getComponentTranslations("oj-ojMessage").categories[i]),s}},In.prototype._computeAutoTimeout=function(){var e=this._properties.message;return isNaN(e.autoTimeout)?In._getMessageDefault("autoTimeout"):0===e.autoTimeout?this._getThemedAutoTimeoutDefault():e.autoTimeout},In.prototype._computeIconStyle=function(){var e=this._properties.message;if(!n.StringUtils.isEmptyOrUndefined(e.icon))return["url('",e.icon,"') no-repeat"].join("")},In.prototype._computeIconClass=function(){var e=this._properties.message;if(n.StringUtils.isEmptyOrUndefined(e.icon)){var t=this._computeSeverity();if("none"!==t){var i=["oj-component-icon","oj-message-status-icon"];return i.push(["oj","message",t,"icon"].join("-")),i.join(" ")}}},In.prototype._computeCloseAffordance=function(){var e=this._properties.message;return n.StringUtils.isEmptyOrUndefined(e.closeAffordance)?In._getMessageDefault("closeAffordance"):e.closeAffordance},In.prototype._computeMessageCloseSelectors=function(){return this._computeAutoTimeout()>-1?"oj-message-close oj-message-auto-timeout-close":"oj-message-close"},In.prototype._computeSound=function(){var e=this._properties.message;return void 0===e.sound?In._getMessageDefault("sound"):e.sound},In.prototype._computeLabelCloseIcon=function(){var e=this._properties.translations;return n.StringUtils.isEmptyOrUndefined(e.labelCloseIcon)?v.getTranslatedString("oj-ojMessage.labelCloseIcon"):e.labelCloseIcon},In.prototype._computeSummary=function(){var e=this._properties.message;if(!n.StringUtils.isEmptyOrUndefined(e.summary))return e.summary},In.prototype._computeDetail=function(){var e=this._properties.message;if(!n.StringUtils.isEmptyOrUndefined(e.detail))return e.detail},In.prototype._handleCloseIcon=function(e){this._closeMessage(e)},In.prototype._openMessage=function(){var e=document.getElementById(this._messagesContainerId);if(e)if(this._isInlinedChildOfOjMessages())this._prepareMessageAtOpen();else{this._operationMediator=new On(this._composite,"open");var t={bubbles:!0,cancelable:!1,detail:{message:this._properties.message}};this._composite.dispatchEvent(new CustomEvent("ojBeforeOpen",t));var i=this._getAnimateOptionDefaults("open");vi.startAnimation(e,"open",i,this._composite).then(function(){t={bubbles:!0,cancelable:!1,detail:{message:this._properties.message}},this._prepareMessageAtOpen(),this._composite.dispatchEvent(new CustomEvent("ojOpen",t))}.bind(this))}},In.prototype._isInlinedChildOfOjMessages=function(){var e=this._findMessagesAncestor();return e&&!e.getProperty("messages")},In.prototype._findMessagesAncestor=function(){for(var e=this._composite.parentElement;e;e=e.parentElement)if(e.nodeName.startsWith("OJ-"))return"OJ-MESSAGES"===e.nodeName?e:null;return null},In.prototype._prepareMessageAtOpen=function(){var e=this._computeSound();"none"!==e&&(this._initAudioContext(),this._playSound(e)),this._registerSwipeHandler(),this._scheduleAutoClose()},In.prototype._handleKeydown=function(e){e.defaultPrevented||"defaults"!==this._computeCloseAffordance()||e.keyCode===$.ui.keyCode.ESCAPE&&(e.preventDefault(),this._closeMessage(e))},In.prototype._playSound=function(t){if("defaults"!==t){var i=document.createElement("AUDIO");i.src=t,i.addEventListener("error",function(){e.info(["JET oj-message id='",In._toSelector(this._composite),"': failed to load or play media file for URL in property message.sound='",t,"'."].join(""))}.bind(this));var n=i.play();void 0!==n&&n.then(function(){}).catch(function(i){e.info(["JET oj-message id='",In._toSelector(this._composite),"': failed to load or play specified sound: '",t,"': error details: '",i].join(""))}.bind(this))}else if(void 0===window.audioContext)e.info(["JET oj-message id='",In._toSelector(this._composite),"': failed to load or play default sound for message because user agent does\n","not support Web Audio API'"].join(""));else{var o=window.audioContext.createGain();o.connect(window.audioContext.destination);var s=window.audioContext.createOscillator();s.connect(o),s.start(),s.stop(window.audioContext.currentTime+.01)}},In.prototype._initAudioContext=function(){if(void 0===window.audioContext)try{window.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch(e){}},In.prototype._createObservables=function(){this.hasCloseAffordance=ko.observable("defaults"===this._computeCloseAffordance()),this.computedIconStyle=ko.observable(this._computeIconStyle()),this.computedIconClass=ko.observable(this._computeIconClass()),this.computedSeverity=ko.observable(this._computeSeverity()),this.computedCategory=ko.observable(this._computeCategory()),this.computedTimestamp=ko.observable(this._computeTimestamp()),this.computedLabelCloseIcon=ko.observable(this._computeLabelCloseIcon()),this.computedMessageCloseSelectors=ko.observable(this._computeMessageCloseSelectors()),this.computedSummary=ko.observable(this._computeSummary()),this.computedDetail=ko.observable(this._computeDetail())},In._getMessageDefault=function(e){return In._DEFAULTS.message[e]},In._DEFAULTS={autoTimeout:4e3,animation:{open:{effect:"fadeIn",duration:"300ms"},close:{effect:"fadeOut",duration:"300ms"}},message:{severity:"none",autoTimeout:-1,closeAffordance:"defaults",sound:"none"}},In.prototype._getThemedAutoTimeoutDefault=function(){var e=_.parseJSONFromFontFamily("oj-message-option-defaults");return e&&e.autoTimeout?e.autoTimeout:In._DEFAULTS.autoTimeout},In.prototype._getAnimateOptionDefaults=function(e){return In._DEFAULTS.animation[e]},In._toSelector=function(e){var t="";if(e)if(e.id&&e.id.length>0)t="#"+e.id;else{t=e.nodeName;var i=e.getAttribute("class");if(i&&(t+="."+i.split(" ").join(".")),e.parentNode)return In._toSelector(e.parentNode)+" > "+t}return t},On.prototype._init=function(){this._resolvedQueue=[],this._callback=this._eventHandler.bind(this);var e=this._operation,t=["oj"];t.push(e.charAt(0).toUpperCase()),t.push(e.slice(1));var i=t.join("");this._eventType=i,this._element.addEventListener(i,this._callback);var n=c.getContext(this._element).getBusyContext(),o={description:this._getBusyStateDescription.bind(this,this._element,this._operation)},s=n.addBusyState(o);this.addPromiseExecutor(function(e){window.setImmediate(function(){e()})}.bind(this,s))},On.prototype._getBusyStateDescription=function(e,t){return[e.nodeName," identified by '",In._toSelector(e),"' is busy animating on the '",t,"' operation."].join("")},On.prototype._deliverResolved=function(e){var t=this._resolvedQueue;this._resolvedQueue=[],e=e||this._operation,this._operation=null;for(var i=0;i<t.length;i++)t[i](e)},On.prototype.destroy=function(){this._deliverResolved("none"),this._callback=null,this._element=null,this._operation=null,this._eventType=null},On.prototype._eventHandler=function(e){e.target===this._element&&(this._element.removeEventListener(e.type,this._callback),this._deliverResolved(),this._callback=null)},On.prototype.getPendingOperation=function(){return this._operation?this._operation:"none"},On.prototype.addPromiseExecutor=function(e,t){this._resolvedQueue.push(e)},On.prototype.isOperationPending=function(t,i){if(!this._element)return!1;var n=!1,o=this.getPendingOperation();return t===o?(e.info(["An oj-message id='",In._toSelector(this._element),"' invoked a '",t,"' operation while pending animation of the same type of operation. ","The second request will be ignored."].join("")),n=!0):"none"!==o&&(e.info(["An oj-message id='",In._toSelector(this._element),"' invoked a '",t,"' operation while pending animation of a '",o,"' operation. The second request will be invoked after the pending ","operation completes."].join("")),this.addPromiseExecutor(i),n=!0),n},ci.register("oj-message",{view:'<div :id="[[containerId]]" class="oj-message-container" on-keydown="[[handleKeydown]]">  <div class="oj-message-header">    <div class="oj-message-leading-header" :title="[[computedCategory]]">      <oj-bind-if test="[[computedIconStyle]]">        <div class="oj-component-icon oj-message-status-icon oj-message-custom-icon" role="img"          :title="[[computedCategory]]" :style.background="[[computedIconStyle]]">        </div>      </oj-bind-if>      <oj-bind-if test="[[computedIconClass]]">        <div role="img" :title="[[computedCategory]]" :class="[[computedIconClass]]">         </div>      </oj-bind-if>      <oj-bind-if test="[[computedCategory]]">        <div class="oj-message-category" tabindex="-1">          <h1 :title="[[computedCategory]]">            <oj-bind-text value="[[computedCategory]]"></oj-bind-text>           </h1>        </div>      </oj-bind-if>      <oj-bind-if test="[[!computedCategory() && computedSummary()]]">        <div class="oj-message-summary">          <oj-bind-text value="[[computedSummary]]"></oj-bind-text>        </div>      </oj-bind-if>    </div>    <div class="oj-message-trailing-header">      <oj-bind-if test="[[computedTimestamp]]">        <div class="oj-message-timestamp">          <oj-bind-text value="[[computedTimestamp]]"></oj-bind-text>         </div>      </oj-bind-if>      <oj-bind-if test="[[hasCloseAffordance]]">        <div :class="[[computedMessageCloseSelectors]]">          <oj-button display="icons" chroming="half" on-click="[[handleCloseIcon]]">            <span slot="startIcon" class="oj-fwk-icon oj-fwk-icon-cross"></span>            <span>              <oj-bind-text value="[[computedLabelCloseIcon]]"></oj-bind-text>            </span>          </oj-button>        </div>      </oj-bind-if>    </div>    </div>  <div class="oj-message-body">    <oj-bind-if test="[[computedCategory]]">      <div class="oj-message-summary">        <oj-bind-text value="[[computedSummary]]"></oj-bind-text>      </div>    </oj-bind-if>    <div class="oj-message-detail">      <oj-bind-slot name="detail">        <oj-bind-text value="[[computedDetail]]"></oj-bind-text>      </oj-bind-slot>    </div>  <div></div>',viewModel:In,metadata:{properties:{displayOptions:{type:"object",properties:{category:{type:"string",enumValues:["auto","header","none"],value:"auto"}}},message:{type:"object",properties:{autoTimeout:{type:"number",value:-1},category:{type:"string",value:""},closeAffordance:{type:"string",enumValues:["defaults","none"],value:"defaults"},detail:{type:"string",value:""},icon:{type:"string",value:""},severity:{type:"string",enumValues:["confirmation","error","info","none","warning"],value:"none"},sound:{type:"string",value:"none"},summary:{type:"string",value:""},timestamp:{type:"string",value:""}}},translations:{type:"object",value:{},properties:{categories:{type:"object",properties:{confirmation:{type:"string"},error:{type:"string"},info:{type:"string"},warning:{type:"string"}}},labelCloseIcon:{type:"string"}}}},methods:{close:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojClose:{},ojAnimateStart:{},ojAnimateEnd:{}},extension:{}}});function wn(e){this._composite=e.element,this.containerId=[e.unique,"mc"].join("_"),this._messagesContainerId=this.containerId,this.handleOpen=this._handleOpen.bind(this),this.handleClose=this._handleClose.bind(this),this.handleAnimateStart=this._handleAnimateStart.bind(this),this.bindingsApplied=this._bindingsApplied.bind(this),this.disconnected=this._disconnected.bind(this),this.connected=this._connected.bind(this),this.close=this._close.bind(this),this.closeAll=this._closeAll.bind(this),this.propertyChanged=this._propertyChanged.bind(this),this._properties=e.properties,this._createObservables(),this._updateLandmark()}function Rn(e){this.Init(e)}wn.prototype._bindingsApplied=function(){var e=document.getElementById(this._messagesContainerId);if(e.addEventListener("ojFocus",this._navigationEventListener.bind(this),!1),this._properties.messages)e.addEventListener("ojBeforeOpen",this._handleBeforeOpen.bind(this),!1);else{var t=this._getDefaultSlotMessageElements();if(0!==t.length){var i=c.getContext(this._composite).getBusyContext();this._inlinedMessagesOpenBusyStateResolve=i.addBusyState({description:"oj-messages is busy opening inlined messages"}),this._showMessagesContainer();for(var n=0;n<t.length;n++)this._animateMessageAction(t[n].firstChild,"open",this._resolveInlinedMessagesOpenBusyState(t[n].getProperty("message"),t.length))}}},wn.prototype._resolveInlinedMessagesOpenBusyState=function(e,t){this._updateLiveRegionAndContainer(e),this._numInlinedChildrenAnimated=this._numInlinedChildrenAnimated?this._numInlinedChildrenAnimated+1:1,this._numInlinedChildrenAnimated===t&&(this._numInlinedChildrenAnimated=0,this._inlinedMessagesOpenBusyStateResolve())},wn.prototype._disconnected=function(){wn.NAVIGATION_TRACKER.remove(this._messagesContainerId),n.ZOrderUtils.getStatus(this._composite)===n.ZOrderUtils.STATUS.OPEN&&this._closeOverlay()},wn.prototype._connected=function(){wn.NAVIGATION_TRACKER.add(this._messagesContainerId)},wn.prototype._closeAll=function(e){if(this._isMessagesShown())for(var t=this._getDefaultSlotMessageElements(),i=0;i<t.length;i++){var n=t[i].message,o=!0;e&&(o=e(n)),o&&t[i].close()}},wn.prototype._propertyChanged=function(e){"external"===e.updatedFrom&&"position"===e.property?e.previousValue&&e.value?this._refresh():!e.previousValue&&e.value?this._getDefaultSlotMessageElements().length>0&&(this._isMessagesShown()&&this._hideMessages(),this._openOverlay()):e.previousValue&&!e.value&&this._getDefaultSlotMessageElements().length>0&&(this._isOverlayOpen()&&this._closeOverlay(),this._showMessages()):"external"===e.updatedFrom&&"display"===e.property?this._getDefaultSlotMessageElements().length>0&&(this._isOverlayOpen()?(this._closeOverlay(),this._openOverlay(),this._refresh()):this._isMessagesShown()&&(this._hideMessages(),this._showMessages())):"external"===e.updatedFrom&&"translations"===e.property&&this._updateLandmark()},wn.prototype._close=function(e){if(e&&this._isMessagesShown())for(var t=this._getDefaultSlotMessageElements(),i=0;i<t.length;i++){$(t[i]).prop("message")===e&&t[i].close()}},wn.prototype._isEventPertaining=function(e){var t=e.target,i=document.getElementById(this._messagesContainerId);return!("OJ-MESSAGE"!==t.nodeName||!n.DomUtils.isAncestor(i,t))},wn.prototype._handleBeforeOpen=function(e){e.defaultPrevented||!this._isEventPertaining(e)||this._isMessagesShown()||this._showMessagesContainer()},wn.prototype._showMessagesContainer=function(){this._isPresentationInline()?this._showMessages():this._openOverlay()},wn.prototype._handleOpen=function(e){!e.defaultPrevented&&this._isEventPertaining(e)&&this._updateLiveRegionAndContainer(e.detail.message)},wn.prototype._updateLiveRegionAndContainer=function(e){var t=v.getComponentTranslations("oj-ojMessage").categories,i="fatal"===e.severity?"error":e.severity,n={category:e.category?e.category:t[i],summary:e.summary},o=this._getLiveRegion(),s=this._getTranslationsDefault("ariaLiveRegion.newMessage",n);o.announce(s),this._refresh()},wn.prototype._getTranslationsDefault=function(e,t){for(var i=this._properties.translations,o=e.split("."),s=0;s<o.length&&i;s++)i=i[o[s]];return n.StringUtils.isEmptyOrUndefined(i)?i=v.getTranslatedString(["oj-ojMessages",e].join("."),t):t&&(i=v.applyParameters(i,t)),i},wn.prototype._handleClose=function(e){if(!e.defaultPrevented&&this._isEventPertaining(e)){var t,i=e.target;e._originalEvent&&(t=this._getNextFocus(i)),t&&t.focus(),$(i).remove(),0===this._getDefaultSlotMessageElements().length&&(wn.NAVIGATION_TRACKER.togglePreviousFocus(this._messagesContainerId),this._isOverlayOpen()?this._closeOverlay():this._hideMessages())}},wn.prototype._getNextFocus=function(e){var t,i,n=this._getDefaultSlotMessageElements(),o=n.indexOf(e);return o-1>-1?t=n[o-1]:o+1<=n.length-1&&(t=n[o+1]),t&&(i=t.querySelector('.oj-message-category[tabindex="-1"]')),i},wn.prototype._handleAnimateStart=function(e){!e.defaultPrevented&&this._isEventPertaining(e)&&(e.preventDefault(),this._animateMessageAction(e.detail.element,e.detail.action,e.detail.endCallback))},wn.prototype._animateMessageAction=function(e,t,i){var n=this._isPresentationInline()?"general":this._computeDisplay(),o=this._getThemedAnimateOptions(n,t);vi[o.effect](e,o).then(i)},wn._DEFAULTS={general:{animation:{open:{effect:"expand",duration:"300ms"},close:{effect:"collapse",duration:"300ms"}},position:{my:{horizontal:"center",vertical:"top"},at:{horizontal:"center",vertical:"top"},of:"window",collision:"none"}},notification:{animation:{open:{effect:"slideIn",duration:"300ms"},close:{effect:"slideOut",duration:"300ms",direction:"end"}},position:{my:{horizontal:"end",vertical:"top"},at:{horizontal:"end",vertical:"top"},of:"window",collision:"none"}}},wn.prototype._getThemedAnimateOptions=function(e,t){var i=_.parseJSONFromFontFamily("oj-messages-option-defaults");return i&&i[e]&&i[e].animation&&i[e].animation[t]?i[e].animation[t]:wn._DEFAULTS[e].animation[t]},wn.prototype._computeDisplay=function(){return this._properties.display},wn.prototype._isPresentationInline=function(){return!this._properties.position},wn.prototype._computeContainerSelectors=function(){var e=this._computeDisplay(),t=$(this._composite);return t.removeClass("oj-messages-general oj-messages-notification oj-messages-inline"),this._isPresentationInline()?t.addClass("oj-messages-inline"):t.addClass(["oj-messages",e].join("-")),"oj-messages-container"},wn.prototype._getThemedPosition=function(){var e=this._computeDisplay(),t=_.parseJSONFromFontFamily("oj-messages-option-defaults");return t[e]&&t[e].position?t[e].position:wn._DEFAULTS[e].position},wn.prototype._getPositionAsJqUi=function(){var e=n.PositionUtils.coerceToJqUi(this._computePosition()),t="rtl"===n.DomUtils.getReadingDirection();return e=n.PositionUtils.normalizeHorizontalAlignment(e,t)},wn.prototype._computePosition=function(){var e=this._properties.position;return n.PositionUtils.coerceToJet(e,this._getThemedPosition())},wn.prototype._getDefaultSlotMessageElements=function(){function t(e){var i="";if(e)if(e.id&&e.id.length>0)i="#"+e.id;else{i=e.nodeName;var n=e.getAttribute("class");if(n&&(i+="."+n.split(" ").join(".")),e.parentNode)return t(e.parentNode)+" > "+i}return i}for(var i=document.getElementById(this._messagesContainerId),o=[],s=n.BaseCustomElementBridge.getSlotMap(i)[""],r=0;s&&r<s.length;r++)"OJ-MESSAGE"!==s[r].nodeName?"OJ-BIND-IF"!==s[r].nodeName&&e.error(["JET oj-messages id='",t(this._composite),"': can contain only oj-message children in its default slot. ","Found a child element id='",t(s[r]),"'."].join("")):o.push(s[r]);return o},wn.prototype._isMessagesShown=function(){return $(this._composite).is(":visible")},wn.prototype._showMessages=function(){this._isMessagesShown()||($(this._composite).show(),w.subtreeShown($(this._composite))),wn.NAVIGATION_TRACKER.add(this._messagesContainerId),this._announceNavigation()},wn.prototype._hideMessages=function(){this._isMessagesShown()&&($(this._composite).hide(),w.subtreeHidden(this._composite),wn.NAVIGATION_TRACKER.remove(this._messagesContainerId),this._liveRegion&&(this._liveRegion.destroy(),delete this._liveRegion))},wn.prototype._openOverlay=function(){var e=$(this._composite),t={};t[n.PopupService.OPTION.POPUP]=e,t[n.PopupService.OPTION.LAUNCHER]=this._getLauncher(),t[n.PopupService.OPTION.POSITION]=this._getPositionAsJqUi(),t[n.PopupService.OPTION.EVENTS]=this._getPopupServiceEvents(),t[n.PopupService.OPTION.LAYER_SELECTORS]=["oj","messages","layer"].join("-"),t[n.PopupService.OPTION.MODALITY]=n.PopupService.MODALITY.MODELESS,t[n.PopupService.OPTION.CUSTOM_ELEMENT]=!0,n.PopupService.getInstance().open(t),this._showMessages(),this._overlayEventsCallback=wn._overlayEventsListener.bind(this,e),e[0].addEventListener("keydown",this._overlayEventsCallback,!1)},wn.prototype._getLauncher=function(){var e=this._composite.parentElement;return this._composite.previousElementSibling?e=this._composite.previousElementSibling:this._composite.nextElementSibling&&(e=this._composite.nextElementSibling),$(e)},wn.prototype._closeOverlay=function(){this._hideMessages();var e=$(this._composite),t={};t[n.PopupService.OPTION.POPUP]=e,n.PopupService.getInstance().close(t);var i=this._overlayEventsCallback;delete this._overlayEventsCallback,e[0].removeEventListener("keydown",i,!1)},wn.prototype._isOverlayOpen=function(){var e=this._composite,t=n.ZOrderUtils.getStatus(e);return t===n.ZOrderUtils.STATUS.OPENING||t===n.ZOrderUtils.STATUS.OPEN||t===n.ZOrderUtils.STATUS.CLOSING},wn._overlayEventsListener=function(e,t){if(!t.defaultPrevented&&t.keyCode===$.ui.keyCode.TAB){var i=t.target,n=e.find(":tabbable");if(n.length>0){var o=n[0],s=n[n.length-1];o===s&&i===o?t.preventDefault():o===i&&t.shiftKey?(t.preventDefault(),s.focus()):s!==i||t.shiftKey||(t.preventDefault(),o.focus())}else t.preventDefault()}},wn.prototype._navigationEventListener=function(e){e.target.id===this._messagesContainerId&&(e.preventDefault(),this._announceNavigation(!0))},wn.prototype._announceNavigation=function(e){var t,i=n.AgentUtils.getAgentInfo().os===n.AgentUtils.OS.IOS||n.AgentUtils.getAgentInfo().os===n.AgentUtils.OS.ANDROID;if(t=e?i?void 0:"ariaLiveRegion.navigationFromKeyboard":i?"ariaLiveRegion.navigationToTouch":"ariaLiveRegion.navigationToKeyboard"){var o=this._getLiveRegion(),s=this._getTranslationsDefault(t);o.announce(s)}},wn.prototype._getLiveRegion=function(){var e=this._messagesContainerId;return this._liveRegion||(this._liveRegion=new Rn(e)),this._liveRegion},wn.prototype._getPopupServiceEvents=function(){var e={};return e[n.PopupService.EVENT.POPUP_CLOSE]=this._closeOverlay.bind(this),e[n.PopupService.EVENT.POPUP_REMOVE]=this._surrogateRemoveHandler.bind(this),e[n.PopupService.EVENT.POPUP_REFRESH]=this._refresh.bind(this),e},wn.prototype._refresh=function(){if(this._isOverlayOpen()){var e=this._getPositionAsJqUi();$(this._composite).position(e)}},wn.prototype._surrogateRemoveHandler=function(){this._closeOverlay(),this._composite.parentElement.removeChild(this._composite)},wn.prototype._createObservables=function(){this.containerSelectors=ko.pureComputed(this._computeContainerSelectors.bind(this),this)},wn.prototype._computeLabelLandmark=function(){var e=this._properties;return n.StringUtils.isEmptyOrUndefined(e.translations.labelLandmark)?this._getTranslationsDefault("labelLandmark"):e.translations.labelLandmark},wn.prototype._updateLandmark=function(){var e=this._computeLabelLandmark();this._composite.setAttribute("aria-label",e),this._composite.setAttribute("role","complementary")},wn.NAVIGATION_TRACKER={_messagesContainerIds:[],_priorFocusCache:{},add:function(e){this.remove(e),this._messagesContainerIds.push(e),this._start(e)},remove:function(e){var t=this._messagesContainerIds,i=t.indexOf(e);i>-1&&t.splice(i,1),this._stop(e)},togglePreviousFocus:function(e){var t=this._priorFocusCache,i=t[e];return!!(i&&$(i).is(":visible")&&n.ZOrderUtils.isAboveTopModalLayer(i))&&(i.focus(),delete t[e],!0)},_addPriorFocusCache:function(e,t){this._priorFocusCache[e]=t},_start:function(e){var t=document.getElementById(e);if(t){var i=this._messageContainerListener.bind(this,e);if(t.addEventListener("focus",i,!0),t.addEventListener("keydown",i,!1),t.addEventListener("click",i,!1),$(t).data("oj_messages_nmtl",i),!this._documentCallback){this._documentCallback=this._documentListener.bind(this);var n=document.documentElement;n.addEventListener("keydown",this._documentCallback,!1),n.addEventListener("blur",this._documentCallback,!0)}}},_stop:function(e){var t=document.getElementById(e);if(t){var i=$(t).data("oj_messages_nmtl");i&&(t.removeEventListener("focus",i,!0),t.removeEventListener("keydown",i,!1),t.removeEventListener("click",i,!1))}if(this._documentCallback&&!(this._messagesContainerIds.length>0)){var n=document.documentElement;n.removeEventListener("keydown",this._documentCallback,!1),n.removeEventListener("blur",this._documentCallback,!0),delete this._documentCallback}},_indexOfFocusWithin:function(e){for(var t=this._messagesContainerIds,i=0;i<t.length;i++){var o=document.getElementById(t[i]);if(o&&n.DomUtils.isAncestorOrSelf(o,e))return i}return-1},_documentListener:function(e){if(!e.defaultPrevented){var t=this._messagesContainerIds;if("keydown"===e.type&&117===e.keyCode&&t.length>0){var i=this._indexOfFocusWithin(e.target);if(i>-1)return;for(var o=i=t.length-1;o>-1;o--){var s=document.getElementById(t[o]);if(s&&$(s).is(":visible")&&n.ZOrderUtils.isAboveTopModalLayer(s)){var r=s.querySelector('.oj-message-category[tabindex="-1"]');e.preventDefault(),this._addPriorFocusCache(t[o],e.target),r.focus();var a=new CustomEvent("ojFocus",{bubbles:!1,cancelable:!0});s.dispatchEvent(a);break}}}else"blur"===e.type&&(this._prevActiveElement=e.target)}},_messageContainerListener:function(e,t){if(!t.defaultPrevented)if("focus"===t.type||"click"===t.type){var i=document.getElementById(e),o=this._prevActiveElement;o&&i&&!n.DomUtils.isAncestorOrSelf(i,o)&&this._addPriorFocusCache(e,o)}else"keydown"!==t.type||117!==t.keyCode&&t.keyCode!==$.ui.keyCode.ESCAPE||this.togglePreviousFocus(e)&&t.preventDefault()}},Rn.prototype.Init=function(e){this._id=e},Rn.prototype.destroy=function(){var e=$(document.getElementById(Rn._LIVE_REGION_ID)),t=this._id;delete this._id,e.find('div[data-container-id="'+t+'"]').remove(),e.children("div").length<1&&e.remove()},Rn.prototype.announce=function(e){var t=Rn._getLiveRegion(),i=this._id;$("<div>").attr("data-container-id",i).text(e).appendTo(t)},Rn._getLiveRegion=function(){var e=$(document.getElementById(Rn._LIVE_REGION_ID));return 0===e.length&&((e=$("<div>")).attr({id:Rn._LIVE_REGION_ID,role:"log","aria-live":"polite","aria-relevant":"additions"}),e.addClass("oj-helper-hidden-accessible"),e.appendTo(document.body)),e},Rn._LIVE_REGION_ID="__oj_messages_arialiveregion",ci.register("oj-messages",{view:'<div role="presentation" :id="[[containerId]]" :class="[[containerSelectors]]"      on-oj-open="[[handleOpen]]" on-oj-close="[[handleClose]]"      on-oj-animate-start="[[handleAnimateStart]]">  <oj-bind-if test="[[!$properties.messages]]">    <oj-bind-slot>    </oj-bind-slot>  </oj-bind-if>  <oj-bind-if test="[[$properties.messages]]">    <oj-bind-for-each data="[[$properties.messages]]" >      <template>        <oj-bind-template-slot name="messageTemplate"           data="[[{data:$current.data, componentElement:_composite}]]">          <template>            <oj-message message="[[$current.data]]" display-options="[[$props.displayOptions]]">            </oj-message>          </template>        </oj-bind-template-slot>      </template>    </oj-bind-for-each>  </oj-bind-if></div>',viewModel:wn,metadata:{properties:{display:{type:"string",enumValues:["general","notification"],value:"general"},displayOptions:{type:"object",properties:{category:{type:"string",enumValues:["auto","header","none"],value:"auto"}}},messages:{type:"Array<Object>|oj.DataProvider"},position:{type:"object",properties:{at:{type:"object",properties:{horizontal:{type:"string",enumValues:["center","end","left","right","start"]},vertical:{type:"string",enumValues:["bottom","center","top"]}}},collision:{type:"string",enumValues:["fit","flip","flipfit","none"]},my:{type:"object",properties:{horizontal:{type:"string",enumValues:["center","end","left","right","start"]},vertical:{type:"string",enumValues:["bottom","center","top"]}}},of:{type:"string"},offset:{type:"object",properties:{x:{type:"number"},y:{type:"number"}}}}},translations:{type:"object",value:{},properties:{ariaLiveRegion:{type:"object",properties:{navigationFromKeyboard:{type:"string"},navigationToKeyboard:{type:"string"},navigationToTouch:{type:"string"},newMessage:{type:"string"}}},labelLandmark:{type:"string"}}}},methods:{close:{},closeAll:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}}}),n.ModuleBinding={};n.ModuleBinding;n.ModuleBinding.defaults={viewPath:"text!views/",viewSuffix:".html",modelPath:"viewModels/",initializeMethod:"initialize",disposeMethod:"dispose",activatedHandler:"handleActivated",attachedHandler:"handleAttached",detachedHandler:"handleDetached",bindingsAppliedHandler:"handleBindingsApplied",deactivatedHandler:"handleDeactivated",transitionCompletedHandler:"handleTransitionCompleted"},n.ModuleBinding._EMPTY_MODULE="oj:blank",function(){function t(e,t,i){var n=t||e,o=[];i&&e===n&&(i.parentNode.removeChild(i),o.push(i)),ko.virtualElements.setDomNodeChildren(n,o)}function i(e,t){e.forEach(function(e){t.appendChild(e)})}function o(e,t,i){var n={};i[0]&&(n.viewModel=i[0]),i[1]&&(n.view=i[1]);var o=new CustomEvent(t,{detail:n});e.dispatchEvent(o)}function s(e,t,i){if(e&&e[t]){var n={element:i[0],valueAccessor:i[1]};return i.length>2&&(n.viewModel=i[2],i.length>3&&(n["boolean"==typeof i[3]?"fromCache":"cachedNodes"]=i[3])),ko.ignoreDependencies(e[t],e,[n])}}function r(e,t,i){if(null!=e){var o=n.ModuleBinding.defaults[t];if(null!=o&&e){var s,r=e[o];if("function"==typeof r)return i&&(s={element:i[0],valueAccessor:i[1]},i.length>2&&(s["boolean"==typeof i[2]?"fromCache":"cachedNodes"]=i[2])),ko.ignoreDependencies(r,e,[s])}}}function a(e,t){if(e&&t){var i=e[t];"function"==typeof i&&ko.ignoreDependencies(i,e)}}function l(e,t,i){for(var n=e;null!=n;){var o=ko.virtualElements.nextSibling(n),s=n.nodeType;n===t||1!==s&&8!==s||i(n),n=o}}function u(e,t){for(var i=t.length-1;i>=0;i--)ko.virtualElements.prepend(e,t[i])}function d(e,t){if(t)for(var i=0;i<e.length;i++){var n=e[i];1===n.nodeType&&t(n)}}function h(t,i,n){var o=t||require,s=new Promise(function(e,t){o([n],e,t)});return s=s.catch(function(t){throw e.error("ojModule failed to load "+n),t})}ko.bindingHandlers.ojModule={init:function(p,_,m,g,f){var v,y,b,C,S,E,T,D,A={},I=-1,O=p.parentNode&&"OJ-MODULE"===p.parentNode.nodeName,w=O?function(){}:r,R=O?function(){}:s,x=O?a:function(){},L=O?o:function(){};function N(){E&&(E(),E=null)}var P=function(e){w(e,"disposeMethod",[p,_])},j=function(){P(v)};ko.utils.domNodeDisposal.addDisposeCallback(p,function(){j();for(var e=Object.keys(A),t=0;t<e.length;t++){var i=A[e[t]].model;P(i)}N()});var M=new Error("Promise cancelled because ojModule is fetching new View and ViewModel"),H=function(e){if(e!==I)throw M},k=p;return 8===p.nodeType&&(k=p.parentNode,ko.virtualElements.setDomNodeChildren(p,[]),S=p.nextSibling),ko.computed(function(){if(I+=1,!E){var o=c.getContext(k).getBusyContext();E=o.addBusyState({description:"ojModule binding on a node with the Id "+p.id+"is loading the module. Binding evaluator: "+_.toString()})}var s,r,a,m,g,P,U,B,F,V,G,$,K,z,Y=0===I,W=ko.utils.unwrapObservable,q=W(_());"string"==typeof q?s=q:(s=W(q.name),r=W(q.viewName),a=W(q.params),m=W(q.viewModelFactory),g=W(q.createViewFunction),P=W(q.cacheKey),U=W(q.lifecycleListener),B=W(q.animation),$=W(q.view),K=W(q.viewModel),F=W(q.require),z=W(q.cleanupMode)),null==F||F instanceof Function||(G=F.viewPath,V=F.modelPath,F=F.instance),r=null==r?s:r;var X,Z,J,Q,ee=n.ModuleBinding._EMPTY_MODULE===r,te=R(U,"activated",[p,_]);if(L(k,"ojTransitionStart",[K]),ee?(X=Promise.resolve([]),Z=Promise.resolve(null)):null!=(J=null==P?null:A[P])&&(delete A[P],X=Promise.resolve(J.view),Z=Promise.resolve(J.model)),null==X&&null!=$&&(X=Promise.resolve($)),null==Z&&(null!=K?Z=Promise.resolve(K):null!=m&&(Z=ko.ignoreDependencies(m.createViewModel,m,[a,_])),null==Z&&null!=s&&(null==V&&(V=n.ModuleBinding.defaults.modelPath),Z=h(F,"viewModel",V+s)),null!=Z&&(Z=Z.then(function(e,t){return H(e),t="function"==typeof t?new t(a):w(t,"initializeMethod",[p,_])||t}.bind(null,I)),null==X&&null!=g&&(X=Z.then(function(e,t){if(H(e),null==t)throw N(),new Error("createViewFunction option cannot be used when the ViewModel is null");var i=t[g];if(null==i)throw N(),new Error("function specified by the createViewFunction option was not found on the ViewModel");return i.call(t)}.bind(null,I)))),null==X)){if(null==r)throw N(),new Error("View name or view instance must be specified");null==G&&(G=n.ModuleBinding.defaults.viewPath),X=h(F,"view",G+r+n.ModuleBinding.defaults.viewSuffix)}if(null==X)throw N(),new Error("ojModule is missing a View");null!=Z&&(Q=Z.then(function(e,t){return H(e),w(t,"activatedHandler",[p,_])}.bind(null,I))),Promise.all([X,Z,te,Q,y]).then(function(o,s){if(o===I){var r=s[0];if(null==r)throw N(),new Error("The module's View was resolved to null");var h,c=function(e,t){var i=e;if("string"==typeof i)i=ko.utils.parseHtmlFragment(i,document);else if(function(e){if(window.DocumentFragment)return e instanceof DocumentFragment;return e&&11===e.nodeType}(i))i=ko.utils.arrayPushAll([],i.childNodes);else{if(!Array.isArray(i))throw t(),new Error("The View ("+i+") has an unsupported type");i=ko.utils.arrayPushAll([],i)}return i}(r,N),m=s[1],g=!1,E=function(e,t,i){for(var n=[],o=ko.virtualElements.firstChild(e);null!=o&&o!==i;o=o.nextSibling)o!==t&&n.push(o);return n}(p,C,S),M=function(e,t){var i=[];return l(ko.virtualElements.firstChild(e),t,function(e){i.push(e)}),i}(p,C);null==b||T?O&&(h=E):(g=!0,h=E,C||((C=document.createElement("div")).className="oj-helper-module-cache",ko.virtualElements.prepend(p,C)));var H=!1,F=function(e){if(!H){if(H=!0,g)i(E,C),t(p,e||p,C);else if(O&&"none"===D)for(var o=0;o<h.length;o++){var s=h[o];s.parentNode.removeChild(s)}else M.forEach(function(e){ko.cleanNode(e)}),t(p,e||p,C);Y||(R(U,"detached",[p,_,v,h]),w(v,"detachedHandler",[p,_,h]),x(v,"disconnected"),L(k,"ojViewDisconnected",[v,h]),R(U,"deactivated",[p,_,v]),w(v,"deactivatedHandler",[p,_])),g?(d(h,n.Components?n.Components.subtreeHidden:null),A[b]={model:v,view:h}):O&&"none"===D?d(h,n.Components?n.Components.subtreeDetached:null):j(),v=m,b=P,T=ee,D=z}},V=function(){R(U,"transitionCompleted",[p,_,m]),w(m,"transitionCompletedHandler",[p,_]),x(m,"transitionCompleted"),L(k,"ojTransitionEnd",[m]),N()};if(null!=B){var G=function(t,o,s,r,a,l,h){var c,p,_=t,m=o.canAnimate;if(null!=m&&!m.call(o,_))return;var g=o.prepareAnimation.call(o,_);g&&(c=g.newViewParent,p=g.oldViewParent);var f=c||s;p&&p!==s?i(r,p):f===s&&l(null);f!==s&&ko.virtualElements.setDomNodeChildren(f,[]);a(f);var v=Array.prototype.slice.call(f.childNodes),y=!1,b=function(){if(!y&&(y=!0,s!==f)){u(s,v);var e=s.parentNode&&"OJ-MODULE"===s.parentNode.nodeName;n.Components&&!e&&(d(v,n.Components.subtreeDetached),d(v,n.Components.subtreeAttached))}},C=l.bind(null,p);_.newViewParent=c,_.oldViewParent=p,_.oldViewNodes=r,_.removeOldView=C,_.insertNewView=b;var S=function(){C(),b(),h()};return o.animate.call(o,_).then(S,function(){S(),e.error("ojModule animation promise was rejected")})}(function(e,t,i,n,o,s){return{node:s?e.parentNode:e,valueAccessor:s?null:t,isInitial:i,oldViewModel:n,newViewModel:o}}(p,_,Y,v,m,O),B,p,E,$,F,V);y=function(e){if(!e)return e;return new Promise(function(t,i){e.then(t,t)})}(G)}else y=void 0;y||(F(null),$(null),V())}function $(e){var t=e||p,i=O&&function(e,t){for(var i,n=0;n<e.length&&!(i=ko.contextFor(e[n]));n++);return i&&i.$module&&i.$module===t}(c,m);u(t,c);var o=null!=J;if(o?d(c,n.Components?n.Components.subtreeShown:null):i&&d(c,n.Components?n.Components.subtreeAttached:null),R(U,"attached",[t,_,m,o]),w(m,"attachedHandler",[t,_,o]),x(m,"connected"),L(k,"ojViewConnected",[m]),!o&&!i){var s=f.createChildContext(m,void 0,function(e){e.$module=m,e.$params=a});O&&(s.$parent=void 0,s.$parents=void 0,s.$parentContext=void 0,s.$props=void 0,s.$properties=void 0,s.$slotNodeCounts=void 0,s.$slotCounts=void 0,s.$unique=void 0,s.$uniqueId=void 0),function(e,t,i,n){var o=ko.bindingProvider.instance,s=o.preprocessNode;s&&(l(t,n,function(e){s.call(o,e)}),t=ko.virtualElements.firstChild(e));l(t,n,function(e){ko.applyBindings(i,e)})}(t,c[0],s,C),R(U,"bindingsApplied",[t,_,m]),w(m,"bindingsAppliedHandler",[t,_])}}}.bind(null,I),function(t,i){i!==M&&null!=i&&(N(),e.error(i))}.bind(null,I))},null,{disposeWhenNodeIsRemoved:p}),{controlsDescendantBindings:!0}}},ko.virtualElements.allowedBindings.ojModule=!0}();ci.register("oj-module",{view:'\x3c!-- ko ojModule: {"view":config().view, "viewModel":config().viewModel,"cleanupMode":config().cleanupMode,"animation":animation} --\x3e\x3c!-- /ko --\x3e',metadata:{properties:{animation:{type:"object"},config:{type:"object|Promise",properties:{cleanupMode:{type:"string",enumValues:["none","onDisconnect"],value:"onDisconnect"},view:{type:"Array<Node>"},viewModel:{type:"object"}}}},events:{ojTransitionStart:{},ojViewConnected:{},ojTransitionEnd:{},ojViewDisconnected:{}},extension:{}},viewModel:function(e){var t=e.element,i=e.properties,n=this;function o(){n.busyCallback||(n.busyCallback=c.getContext(t).getBusyContext().addBusyState({description:"oj-module is waiting on config Promise resolution"}));var e=Promise.resolve(i.config);n.configPromise=e,e.then(function(t){e===n.configPromise&&(n.config(t),n.busyCallback(),n.busyCallback=null)},function(t){if(e===n.configPromise)throw n.busyCallback(),n.busyCallback=null,t})}function s(e,t){var i=e&&e[t];"function"==typeof i&&ko.ignoreDependencies(i,e)}function r(e,i,n){var o={};i&&(o.viewModel=i),n&&(o.view=n);var s=new CustomEvent(e,{detail:o});t.dispatchEvent(s)}this.animation=e.properties.animation,this.config=ko.observable({view:[]}),this.configPromise=null,this.propertyChanged=function(e){"animation"===e.property?n.animation=e.value:"config"===e.property&&o()},o(),this.connected=function(){var e,n;e=i&&i.config,(n=e?e.view:null)&&n.length>0&&t.contains(n[0])&&(s(i.config.viewModel,"connected"),r("ojViewConnected",i.config.viewModel))},this.disconnected=function(){s(i.config.viewModel,"disconnected"),r("ojViewDisconnected",i.config.viewModel,i.config.view)}}});var xn={};n.ModuleElementUtils=xn,xn.createView=function(e){if(!e||!e.viewPath)return Promise.resolve([]);var t=new Promise(function(t,i){(e.require?e.require:require)(["text!"+e.viewPath],t,i)});return new Promise(function(e,i){t.then(function(t){var i=ln.stringToNodeArray(t);return e(i)},function(e){return i(e)})})},xn.createViewModel=function(e){return e&&e.viewModelPath?new Promise(function(t,i){(e.require?e.require:require)([e.viewModelPath],t,i)}):Promise.resolve(null)},n.ModuleAnimations={};n.ModuleAnimations;n.ModuleAnimations._addContainedElements=function(e,t){for(var i=ko.virtualElements.firstChild(e);i;)1===i.nodeType?t.push(i):8===i.nodeType&&this._addContainedElements(i,t),i=ko.virtualElements.nextSibling(i)},n.ModuleAnimations._cacheVirtualViewRoot=function(e,t){e._ojOldRoot=t},n.ModuleAnimations._getVirtualViewRoot=function(e){return e._ojOldRoot},n.ModuleAnimations._defaultCanAnimate=function(e){if(e.isInitial)return!1;if(1===e.node.nodeType)return!0;if(8===e.node.nodeType){var t=[];if(n.ModuleAnimations._addContainedElements(e.node,t),t&&1===t.length)return n.ModuleAnimations._cacheVirtualViewRoot(e,t[0]),!0}return!1},n.ModuleAnimations._getOldView=function(e){var t;return 1===e.node.nodeType?t=e.node:8===e.node.nodeType&&(t=n.ModuleAnimations._getVirtualViewRoot(e)),t},n.ModuleAnimations._createViewParent=function(e){var t=$(document.createElement("div")),i={position:"absolute",height:e.offsetHeight+"px",width:e.offsetWidth+"px",left:e.offsetLeft+"px",top:e.offsetTop+"px"};t.appendTo(e.offsetParent),t.css(i),t.addClass("oj-animation-host-viewport");var n=document.createElement("div");return n.className="oj-animation-host",t.append(n),n},n.ModuleAnimations.createAnimation=function(e,t,i){return{canAnimate:n.ModuleAnimations._defaultCanAnimate,prepareAnimation:function(o){var s={},r=n.ModuleAnimations._getOldView(o);return t&&!i&&(s.newViewParent=n.ModuleAnimations._createViewParent(r)),e&&(s.oldViewParent=n.ModuleAnimations._createViewParent(r)),t&&i&&(s.newViewParent=n.ModuleAnimations._createViewParent(r)),s},animate:function(i){var o=i.oldViewParent,s=i.newViewParent,r=[];return o&&e&&r.push(vi.startAnimation(o,"close",e)),s&&t&&r.push(vi.startAnimation(s,"open",t)),Promise.all(r).then(function(){n.ModuleAnimations._postAnimationProcess(i)})}}},n.ModuleAnimations._removeViewParent=function(e,t){var i=e[t];if(i){var n=i.parentNode;n&&n.parentNode&&n.parentNode.removeChild(n)}},n.ModuleAnimations._postAnimationProcess=function(e){e.removeOldView(),e.insertNewView(),n.ModuleAnimations._removeViewParent(e,"newViewParent"),n.ModuleAnimations._removeViewParent(e,"oldViewParent")},n.ModuleAnimations._getModuleEffect=function(e){return null==n.ModuleAnimations._moduleEffects&&(n.ModuleAnimations._moduleEffects=_.parseJSONFromFontFamily("oj-animation-module-effects")),n.ModuleAnimations._moduleEffects?n.ModuleAnimations._moduleEffects[e]:null},n.ModuleAnimations._getImplementation=function(e){var t=n.ModuleAnimations._getModuleEffect(e);return t?n.ModuleAnimations.createAnimation(t.oldViewEffect,t.newViewEffect,t.newViewOnTop):null},n.ModuleAnimations._getNavigateMethod=function(e,t){return null==n.ModuleAnimations._navigateMethods&&(n.ModuleAnimations._navigateMethods=_.parseJSONFromFontFamily("oj-animation-navigate-methods")),n.ModuleAnimations._navigateMethods?n.ModuleAnimations._navigateMethods[t]:null},n.ModuleAnimations._navigateCanAnimate=function(e,t){var i=n.ModuleAnimations._getNavigateMethod(e,t);return!!n.ModuleAnimations[i]&&(null==n.ModuleAnimations[i].canAnimate||n.ModuleAnimations[i].canAnimate(e))},n.ModuleAnimations._navigatePrepareAnimation=function(e,t){var i=n.ModuleAnimations._getNavigateMethod(e,t);return n.ModuleAnimations[i]&&n.ModuleAnimations[i].prepareAnimation?n.ModuleAnimations[i].prepareAnimation(e):null},n.ModuleAnimations._navigateAnimate=function(e,t){var i=n.ModuleAnimations._getNavigateMethod(e,t);return n.ModuleAnimations[i]&&n.ModuleAnimations[i].animate?n.ModuleAnimations[i].animate(e):Promise.resolve()},n.ModuleAnimations._getNavigateImplementation=function(e){return{canAnimate:function(t){return n.ModuleAnimations._navigateCanAnimate(t,e)},prepareAnimation:function(t){return n.ModuleAnimations._navigatePrepareAnimation(t,e)},animate:function(t){return n.ModuleAnimations._navigateAnimate(t,e)}}},n.ModuleAnimations.coverLeft=n.ModuleAnimations._getImplementation("coverLeft"),n.ModuleAnimations.coverRight=n.ModuleAnimations._getImplementation("coverRight"),n.ModuleAnimations.revealLeft=n.ModuleAnimations._getImplementation("revealLeft"),n.ModuleAnimations.revealRight=n.ModuleAnimations._getImplementation("revealRight"),n.ModuleAnimations.coverStart="rtl"===n.DomUtils.getReadingDirection()?n.ModuleAnimations.coverRight:n.ModuleAnimations.coverLeft,n.ModuleAnimations.revealEnd="rtl"===n.DomUtils.getReadingDirection()?n.ModuleAnimations.revealLeft:n.ModuleAnimations.revealRight,n.ModuleAnimations.coverUp=n.ModuleAnimations._getImplementation("coverUp"),n.ModuleAnimations.revealDown=n.ModuleAnimations._getImplementation("revealDown"),n.ModuleAnimations.zoomIn=n.ModuleAnimations._getImplementation("zoomIn"),n.ModuleAnimations.zoomOut=n.ModuleAnimations._getImplementation("zoomOut"),n.ModuleAnimations.fade=n.ModuleAnimations._getImplementation("fade"),n.ModuleAnimations.pushStart=n.ModuleAnimations._getImplementation("pushStart"),n.ModuleAnimations.pushEnd=n.ModuleAnimations._getImplementation("pushEnd"),n.ModuleAnimations.navChild=n.ModuleAnimations._getNavigateImplementation("navChild"),n.ModuleAnimations.navParent=n.ModuleAnimations._getNavigateImplementation("navParent"),n.ModuleAnimations.drillIn=n.ModuleAnimations.navChild,n.ModuleAnimations.drillOut=n.ModuleAnimations.navParent,n.ModuleAnimations.navSiblingEarlier=n.ModuleAnimations._getNavigateImplementation("navSiblingEarlier"),n.ModuleAnimations.navSiblingLater=n.ModuleAnimations._getNavigateImplementation("navSiblingLater"),n.ModuleAnimations.switcher=function(e){return new function(){var t;function i(e){return function(i){return t[e].call(t,i)}}var o=this;this.canAnimate=function(s){var r=e(s);if(!(t=null==r?null:n.ModuleAnimations[r]))return!1;for(var a=["prepareAnimation","animate"],l=0;l<a.length;l++){var u=a[l];o[u]=i(u)}return i("canAnimate")(s)}}},n.NavigationListDndContext=function(e){n.NavigationListDndContext.superclass.constructor.call(this,e)},n.Object.createSubclass(n.NavigationListDndContext,n.ListViewDndContext,"oj.NavigationListDndContext"),n.NavigationListDndContext.prototype.GetDragAffordanceClass=function(){return"oj-tabbar-drag-handle"},n.NavigationListDndContext.prototype.GetDragImageClass=function(){return"oj-tabbar-drag-image"},n.NavigationListDndContext.prototype.GetDragItemClass=function(){return"oj-tabbar-drag-item"},n.NavigationListDndContext.prototype.GetCutStyleClass=function(){return"oj-tabbar-cut"},n.NavigationListDndContext.prototype.GetCommandPrefix=function(){return"oj-tabbar-"},n.NavigationListDndContext.prototype.shouldDragCurrentItem=function(){return!0},n.NavigationListDndContext.prototype.GetDragImageWidth=function(e){var t=this.listview.GetOption("edge");return"top"===t||"bottom"===t?e.offsetWidth:n.NavigationListDndContext.superclass.GetDragImageWidth.call(this,e)},n.NavigationListDndContext.prototype.GetDragSourceType=function(){return"text/ojnavigationlist-dragsource-id"},n.NavigationListDndContext.prototype.CreateReorderPayload=function(e,t,i){return{item:e[0],position:t,reference:i}},n.NavigationListDndContext.prototype.IsItemReOrdering=function(){return"enabled"===this.listview.GetOption("reorderable")},n.NavigationListDndContext.prototype.GetDefaultDataType=function(){return"text/ojnavigationlist-items-data"},n.NavigationListDndContext.prototype.SetDragItemImage=function(e,t){var i=Math.max(0,e.offsetX),n=Math.max(0,e.offsetY),o=$(t[0].cloneNode(!0));o.removeClass("oj-selected oj-focus oj-focus-highlight  oj-hover").addClass("oj-drag");var s=$(document.createElement("div"));s.get(0).className=this.listview.ojContext.element.get(0).className,s.addClass(this.GetDragImageClass()).css({width:this.GetDragImageWidth(t[0]),height:t[0].offsetHeight}).append(o),$("body").append(s),this.m_dragImage=s,e.dataTransfer.setDragImage(s.get(0),i,n)},n.NavigationListDndContext.prototype.GetCutItems=function(e){var t=[];return t.push(this.m_contextMenuItem&&this.m_contextMenuItem.length>0?this.m_contextMenuItem[0]:this._getActiveItem()),t};var Ln={properties:{animationOnDataChange:{type:"string",enumValues:["auto","none"],value:"none"},animationOnDisplay:{type:"string",enumValues:["auto","none"],value:"none"},as:{type:"string",value:""},cellContent:{type:"string",enumValues:["auto","counts"],value:"auto"},cellMaximize:{type:"string",enumValues:["off","on"],value:"on"},cells:{type:"Array<Object>|Promise"},columns:{type:"Array<Object>|Promise"},columnsTitle:{type:"string",value:""},countLabel:{type:"function",properties:{row:{type:"string"},column:{type:"string"},nodeCount:{type:"number"},totalNodeCount:{type:"number"},highlightedNodeCount:{type:"number"}}},data:{type:"oj.DataProvider"},groupAttributes:{type:"Array<string>",enumValues:["color","indicatorColor","indicatorIconColor","indicatorIconPattern","indicatorIconShape"],value:["color","indicatorColor","indicatorIconShape","indicatorIconColor","indicatorIconPattern"]},groupBehavior:{type:"string",enumValues:["acrossCells","none","withinCell"],value:"withinCell"},hiddenCategories:{type:"Array<string>",writeback:!0,value:[]},highlightMatch:{type:"string",enumValues:["all","any"],value:"all"},highlightedCategories:{type:"Array<string>",writeback:!0,value:[]},hoverBehavior:{type:"string",enumValues:["dim","none"],value:"none"},labelTruncation:{type:"string",enumValues:["ifRequired","on"],value:"on"},maximizedColumn:{type:"string",writeback:!0,value:""},maximizedRow:{type:"string",writeback:!0,value:""},nodes:{type:"Array<Object>|Promise"},otherColor:{type:"string"},otherThreshold:{type:"number",value:0},rows:{type:"Array<Object>|Promise"},rowsTitle:{type:"string",value:""},selection:{type:"Array<any>",writeback:!0,value:[]},selectionMode:{type:"string",enumValues:["multiple","none","single"],value:"multiple"},styleDefaults:{type:"object",properties:{animationDuration:{type:"number"},cellDefaults:{type:"object",properties:{labelHalign:{type:"string",enumValues:["center","end","start"],value:"start"},labelStyle:{type:"object"},maximizedSvgStyle:{type:"object"},minimizedSvgStyle:{type:"object"},showCount:{type:"string",enumValues:["auto","off","on"],value:"auto"},svgStyle:{type:"object"}}},columnLabelStyle:{type:"object"},columnsTitleStyle:{type:"object"},hoverBehaviorDelay:{type:"number",value:200},nodeDefaults:{type:"object",properties:{borderColor:{type:"string"},borderWidth:{type:"number"},color:{type:"string"},iconDefaults:{type:"object",properties:{borderColor:{type:"string"},borderRadius:{type:"string"},borderWidth:{type:"number"},color:{type:"string",value:""},height:{type:"number",value:0},opacity:{type:"number",value:1},pattern:{type:"string",enumValues:["largeChecker","largeCrosshatch","largeDiagonalLeft","largeDiagonalRight","largeDiamond","largeTriangle","none","smallChecker","smallCrosshatch","smallDiagonalLeft","smallDiagonalRight","smallDiamond","smallTriangle"],value:"none"},shape:{type:"string",value:"square"},source:{type:"string",value:""},width:{type:"number",value:0}}},indicatorColor:{type:"string",value:""},indicatorIconDefaults:{type:"object",properties:{borderColor:{type:"string"},borderRadius:{type:"string"},borderWidth:{type:"number"},color:{type:"string",value:""},height:{type:"number"},opacity:{type:"number",value:1},pattern:{type:"string",enumValues:["largeChecker","largeCrosshatch","largeDiagonalLeft","largeDiagonalRight","largeDiamond","largeTriangle","none","smallChecker","smallCrosshatch","smallDiagonalLeft","smallDiagonalRight","smallDiamond","smallTriangle"],value:"none"},shape:{type:"string",value:"square"},source:{type:"string"},width:{type:"number"}}},labelStyle:{type:"object"},secondaryLabelStyle:{type:"object"}}},rowLabelStyle:{type:"object"},rowsTitleStyle:{type:"object"}}},tooltip:{type:"object",properties:{renderer:{type:"function",properties:{parentElement:{type:"Element"},id:{type:"any"},label:{type:"string"},secondaryLabel:{type:"string"},row:{type:"string"},column:{type:"string"},color:{type:"string"},indicatorColor:{type:"string"},componentElement:{type:"Element"}}}}},touchResponse:{type:"string",enumValues:["auto","touchStart"],value:"auto"},trackResize:{type:"string",enumValues:["off","on"],value:"on"},translations:{type:"object",value:{},properties:{componentName:{type:"string"},highlightedCount:{type:"string"},labelAdditionalData:{type:"string"},labelAndValue:{type:"string"},labelClearSelection:{type:"string"},labelCountWithTotal:{type:"string"},labelDataVisualization:{type:"string"},labelGroup:{type:"string"},labelInvalidData:{type:"string"},labelNoData:{type:"string"},labelOther:{type:"string"},labelSize:{type:"string"},stateCollapsed:{type:"string"},stateDrillable:{type:"string"},stateExpanded:{type:"string"},stateHidden:{type:"string"},stateIsolated:{type:"string"},stateMaximized:{type:"string"},stateMinimized:{type:"string"},stateSelected:{type:"string"},stateUnselected:{type:"string"},stateVisible:{type:"string"}}}},methods:{getRowsTitle:{},getRowCount:{},getRow:{},getColumnsTitle:{},getColumnCount:{},getColumn:{},getCell:{},getGroupBehavior:{},getGroupNode:{},getDialog:{},getContextByNode:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}},Nn={properties:{borderColor:{type:"string",value:""},borderWidth:{type:"number",value:0},categories:{type:"Array<string>",value:[]},color:{type:"string",value:""},column:{type:"string",value:""},groupCategory:{type:"string",value:""},icon:{type:"object",properties:{borderColor:{type:"string"},borderRadius:{type:"string"},borderWidth:{type:"number"},color:{type:"string"},height:{type:"number"},opacity:{type:"number"},pattern:{type:"string",enumValues:["largeChecker","largeCrosshatch","largeDiagonalLeft","largeDiagonalRight","largeDiamond","largeTriangle","mallChecker","none","smallCrosshatch","smallDiagonalLeft","smallDiagonalRight","smallDiamond","smallTriangle"],value:"none"},shape:{type:'"circle"|"diamond"|"ellipse"|"human"|"plus"|"rectangle"|"square"|"star"|"triangleDown"|"triangleUp"|string'},source:{type:"string"},svgClassName:{type:"string",value:""},svgStyle:{type:"object"},width:{type:"number"}}},indicatorColor:{type:"string",value:""},indicatorIcon:{type:"object",properties:{borderColor:{type:"string"},borderRadius:{type:"string"},borderWidth:{type:"number"},color:{type:"string"},height:{type:"number"},opacity:{type:"number"},pattern:{type:"string",enumValues:["largeChecker","largeCrosshatch","largeDiagonalLeft","largeDiagonalRight","largeDiamond","largeTriangle","none","smallChecker","smallCrosshatch","smallDiagonalLeft","smallDiagonalRight","smallDiamond","smallTriangle"]},shape:{type:'"circle"|"diamond"|"ellipse"|"human"|"plus"|"rectangle"|"square"|"star"|"triangleDown"|"triangleUp"|string'},source:{type:"string"},svgClassName:{type:"string"},svgStyle:{type:"object"},width:{type:"number"}}},label:{type:"string",value:""},row:{type:"string",value:""},secondaryLabel:{type:"string",value:""},shortDesc:{type:"string",value:""},svgClassName:{type:"string",value:""},svgStyle:{type:"object"},xPercentage:{type:"number"},yPercentage:{type:"number"}},extension:{}};n.__registerWidget("oj.ojNBox",$.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{animationOnDataChange:"none",animationOnDisplay:"none",as:"",cellContent:"auto",cellMaximize:"on",cells:null,columns:null,columnsTitle:"",countLabel:null,data:null,groupBehavior:"withinCell",groupAttributes:["color","indicatorColor","indicatorIconColor","indicatorIconPattern","indicatorIconShape"],hiddenCategories:[],hoverBehavior:"none",highlightedCategories:[],highlightMatch:"all",labelTruncation:"on",maximizedColumn:"",maximizedRow:"",nodes:null,otherColor:"#636363",otherThreshold:0,rows:null,rowsTitle:"",selection:[],selectionMode:"multiple",styleDefaults:{animationDuration:void 0,cellDefaults:{labelHalign:"start",labelStyle:void 0,maximizedSvgStyle:void 0,minimizedSvgStyle:void 0,showCount:"auto",svgStyle:void 0},columnLabelStyle:void 0,columnsTitleStyle:void 0,hoverBehaviorDelay:200,nodeDefaults:{borderColor:"",borderWidth:0,color:void 0,iconDefaults:{borderColor:"#000000",borderRadius:0,borderWidth:0,color:"",height:0,opacity:1,pattern:"none",shape:"square",source:"",width:0},indicatorColor:"",indicatorIconDefaults:{borderColor:"#000000",borderRadius:0,borderWidth:0,color:"",height:10,opacity:1,pattern:"none",shape:"square",source:"",width:10},labelStyle:void 0,secondaryLabelStyle:void 0},rowLabelStyle:void 0,rowsTitleStyle:void 0},tooltip:{renderer:null},touchResponse:"auto"},_CreateDvtComponent:function(e,t,i){return dvt.NBox.newInstance(e,t,i)},_ConvertLocatorToSubId:function(e){var t=e.subId;if("oj-nbox-cell"===t)t="cell["+e.row+","+e.column+"]";else if("oj-nbox-dialog"===t)t="dialog";else if("oj-nbox-dialog-close-button"===t)t="dialog#closeButton";else if("oj-nbox-group-node"===t)t=e.row&&e.column?"cell["+e.row+","+e.column+"]#groupNode[":"groupNode[",t+=e.groupCategory+"]";else if("oj-nbox-node"===t){t="";var i=e.id;t+="node["+this._component.getAutomation().getNodeIndexFromId(i)+"]"}else"oj-nbox-overflow"===t?t="cell["+e.row+","+e.column+"]#overflow":"oj-nbox-tooltip"===t&&(t="tooltip");return t},_ConvertSubIdToLocator:function(e){var t={};if(0===e.indexOf("node")){t.subId="oj-nbox-node";var i=this._GetFirstIndex(e),n=this._component.getAutomation();t.id=n.getNodeIdFromIndex(i)}else if(0===e.indexOf("cell")){var o=this._GetFirstBracketedString(e),s=o.indexOf(",");t.row=o.substring(0,s),t.column=o.substring(s+1);var r=e.indexOf("#");e.indexOf("#groupNode")>0?(t.subId="oj-nbox-group-node",t.groupCategory=this._GetFirstBracketedString(e.substring(r))):e.indexOf("#overflow")>0?t.subId="oj-nbox-overflow":t.subId="oj-nbox-cell"}else 0===e.indexOf("dialog")?e.indexOf("#closeButton")>0?t.subId="oj-nbox-dialog-close-button":t.subId="oj-nbox-dialog":0===e.indexOf("groupNode")?(t.subId="oj-nbox-group-node",t.groupCategory=this._GetFirstBracketedString(e)):"tooltip"===e&&(t.subId="oj-nbox-tooltip");return t},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-nbox"),e},_GetChildStyleClasses:function(){var e=this._super();return e["oj-dvtbase oj-nbox"]={path:"styleDefaults/animationDuration",property:"ANIM_DUR"},e["oj-nbox-columns-title"]={path:"styleDefaults/columnsTitleStyle",property:"TEXT"},e["oj-nbox-rows-title"]={path:"styleDefaults/rowsTitleStyle",property:"TEXT"},e["oj-nbox-column-label"]={path:"styleDefaults/columnLabelStyle",property:"TEXT"},e["oj-nbox-row-label"]={path:"styleDefaults/rowLabelStyle",property:"TEXT"},e["oj-nbox-cell"]={path:"styleDefaults/cellDefaults/_style",property:"BACKGROUND"},e["oj-nbox-cell oj-minimized"]={path:"styleDefaults/cellDefaults/minimizedStyle",property:"BACKGROUND"},e["oj-nbox-cell oj-maximized"]={path:"styleDefaults/cellDefaults/maximizedStyle",property:"BACKGROUND"},e["oj-nbox-cell-label"]={path:"styleDefaults/cellDefaults/labelStyle",property:"TEXT"},e["oj-nbox-cell-countlabel"]={path:"styleDefaults/cellDefaults/bodyCountLabelStyle",property:"TEXT"},e["oj-nbox-cell-countlabel oj-nbox-cell-header"]={path:"styleDefaults/cellDefaults/countLabelStyle",property:"TEXT"},e["oj-nbox-node"]={path:"styleDefaults/nodeDefaults/color",property:"background-color"},e["oj-nbox-node oj-hover"]={path:"styleDefaults/nodeDefaults/hoverColor",property:"border-color"},e["oj-nbox-node oj-selected"]={path:"styleDefaults/nodeDefaults/selectionColor",property:"border-color"},e["oj-nbox-node-label"]={path:"styleDefaults/nodeDefaults/labelStyle",property:"TEXT"},e["oj-nbox-node-secondarylabel"]={path:"styleDefaults/nodeDefaults/secondaryLabelStyle",property:"TEXT"},e["oj-nbox-node-categorylabel"]={path:"styleDefaults/_categoryNodeDefaults/labelStyle",property:"TEXT"},e["oj-nbox-dialog"]=[{path:"styleDefaults/_drawerDefaults/background",property:"background-color"},{path:"styleDefaults/_drawerDefaults/borderColor",property:"border-color"}],e["oj-nbox-dialog-label"]={path:"styleDefaults/_drawerDefaults/labelStyle",property:"TEXT"},e["oj-nbox-dialog-countlabel"]={path:"styleDefaults/_drawerDefaults/countLabelStyle",property:"TEXT"},e},_GetEventTypes:function(){return["optionChange"]},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtUtilBundle.NBOX"]=e.componentName,t["DvtNBoxBundle.HIGHLIGHTED_COUNT"]=e.highlightedCount,t["DvtNBoxBundle.OTHER"]=e.labelOther,t["DvtNBoxBundle.GROUP_NODE"]=e.labelGroup,t["DvtNBoxBundle.SIZE"]=e.labelSize,t["DvtNBoxBundle.ADDITIONAL_DATA"]=e.labelAdditionalData,t},_HandleEvent:function(e){if("adfPropertyChange"===e.type)for(var t=e.properties,i=Object.keys(t),n=0;n<i.length;n++){var o=i[n],s=t[o];"_drawer"===o?this.options[o]=s?{id:s}:null:"maximizedRow"!==o&&"maximizedColumn"!==o||this._UserOptionChange(o,s)}else this._super(e)},_LoadResources:function(){null==this.options._resources&&(this.options._resources={});var e=this.options._resources;e.overflow_dwn={src:p.getResourceUrl("resources/internal-deps/dvt/nbox/overflow_dwn.png"),width:34,height:9},e.overflow_ovr={src:p.getResourceUrl("resources/internal-deps/dvt/nbox/overflow_ovr.png"),width:34,height:9},e.overflow_ena={src:p.getResourceUrl("resources/internal-deps/dvt/nbox/overflow_ena.png"),width:34,height:9},e.overflow_dis={src:p.getResourceUrl("resources/internal-deps/dvt/nbox/overflow_dis.png"),width:34,height:9},e.close_dwn={src:p.getResourceUrl("resources/internal-deps/dvt/nbox/close_dwn.png"),width:16,height:16},e.close_ovr={src:p.getResourceUrl("resources/internal-deps/dvt/nbox/close_ovr.png"),width:16,height:16},e.close_ena={src:p.getResourceUrl("resources/internal-deps/dvt/nbox/close_ena.png"),width:16,height:16}},getNodeBySubId:function(e){return this._super(e)},getSubIdByNode:function(e){return this._super(e)},getRowsTitle:function(){return this._component.getAutomation().getData("rowsTitle")},getRowCount:function(){return this._component.getAutomation().getData("rowCount")},getRow:function(e){return this._component.getAutomation().getData("row",e)},getColumnsTitle:function(){return this._component.getAutomation().getData("columnsTitle")},getColumnCount:function(){return this._component.getAutomation().getData("columnCount")},getColumn:function(e){return this._component.getAutomation().getData("column",e)},getCell:function(e,t){var i=this._component.getAutomation(),n=i.getCell(e,t);return n&&(n.getGroupNode=function(e){return i.getCellGroupNode(n,e)},n.getNode=function(e){return i.getCellNode(n,e)}),n},getGroupBehavior:function(){return this._component.getAutomation().getData("groupBehavior")},getGroupNode:function(e){return this._component.getAutomation().getGroupNode(e)},getDialog:function(){var e=this._component.getAutomation(),t=e.getDialog();return t&&(t.getNode=function(t){return e.getDialogNode(t)}),t},getContextByNode:function(e){var t=this.getSubIdByNode(e);return t&&"oj-nbox-tooltip"!==t.subId&&"oj-nbox-dialog-close-button"!==t.subId&&"oj-nbox-overflow"!==t.subId?t:null},_GetComponentDeferredDataPaths:function(){return{root:["cells","rows","columns","nodes","data"]}},_GetSimpleDataProviderConfigs:function(){return{data:{templateName:"nodeTemplate",templateElementName:"oj-n-box-node",resultPath:"nodes"}}}}),Ln.extension._WIDGET_NAME="ojNBox",n.CustomElementBridge.register("oj-n-box",{metadata:Ln,parseFunction:Zt.shapeParseFunction({"style-defaults.node-defaults.icon-defaults.shape":!0,"style-defaults.node-defaults.indicator-icon-defaults.shape":!0})}),Nn.extension._CONSTRUCTOR=function(){},n.CustomElementBridge.register("oj-n-box-node",{metadata:Nn,parseFunction:Zt.shapeParseFunction({"icon.shape":!0,"indicator-icon.shape":!0})}),n.OffcanvasUtils={};var Pn=n.OffcanvasUtils;n.OffcanvasUtils._DATA_EDGE_KEY="oj-offcanvasEdge",n.OffcanvasUtils._DATA_OFFCANVAS_KEY="oj-offcanvas",n.OffcanvasUtils._DATA_MEDIA_QUERY_KEY="oj-mediaQueryListener",n.OffcanvasUtils._DATA_HAMMER_KEY="oj-offcanvasHammer",n.OffcanvasUtils._DATA_STYLE_KEY="oj-offcanvasStyle",n.OffcanvasUtils.SELECTOR_KEY="selector",n.OffcanvasUtils.CONTENT_KEY="content",n.OffcanvasUtils.EDGE_START="start",n.OffcanvasUtils.EDGE_END="end",n.OffcanvasUtils.EDGE_TOP="top",n.OffcanvasUtils.EDGE_BOTTOM="bottom",n.OffcanvasUtils.DISPLAY_MODE_KEY="displayMode",n.OffcanvasUtils.DISPLAY_MODE_PUSH="push",n.OffcanvasUtils.DISPLAY_MODE_OVERLAY="overlay",n.OffcanvasUtils.DISPLAY_MODE_PIN="pin",n.OffcanvasUtils.MODALITY_KEY="modality",n.OffcanvasUtils.MODALITY_NONE="none",n.OffcanvasUtils.MODALITY_MODAL="modal",n.OffcanvasUtils.DISMISS_HANDLER_KEY="_dismissHandler",n.OffcanvasUtils.OPEN_PROMISE_KEY="_openPromise",n.OffcanvasUtils.CLOSE_PROMISE_KEY="_closePromise",n.OffcanvasUtils.GLASS_PANE_KEY="_glassPane",n.OffcanvasUtils.SURROGATE_KEY="_surrogate",n.OffcanvasUtils.ANIMATE_WRAPPER_KEY="_animateWrapper",n.OffcanvasUtils.ANIMATE_KEY="_animate",n.OffcanvasUtils.SURROGATE_ATTR="data-oj-offcanvas-surrogate-id",n.OffcanvasUtils.OUTER_WRAPPER_SELECTOR="oj-offcanvas-outer-wrapper",n.OffcanvasUtils.OPEN_SELECTOR="oj-offcanvas-open",n.OffcanvasUtils.TRANSITION_SELECTOR="oj-offcanvas-transition",n.OffcanvasUtils.PIN_WRAPPER_SELECTOR="oj-offcanvas-pin",n.OffcanvasUtils.PIN_TRANSITION_SELECTOR="oj-offcanvas-pin-transition",n.OffcanvasUtils.GLASSPANE_SELECTOR="oj-offcanvas-glasspane",n.OffcanvasUtils.GLASSPANE_DIM_SELECTOR="oj-offcanvas-glasspane-dim",n.OffcanvasUtils.VETO_BEFOREOPEN_MSG="ojbeforeopen veto",n.OffcanvasUtils.VETO_BEFORECLOSE_MSG="ojbeforeclose veto",n.OffcanvasUtils._shiftSelector={start:"oj-offcanvas-shift-start",end:"oj-offcanvas-shift-end",top:"oj-offcanvas-shift-down",bottom:"oj-offcanvas-shift-up"},n.OffcanvasUtils._drawerSelector={start:"oj-offcanvas-start",end:"oj-offcanvas-end",top:"oj-offcanvas-top",bottom:"oj-offcanvas-bottom"},n.OffcanvasUtils._getDisplayMode=function(e){var t=e[n.OffcanvasUtils.DISPLAY_MODE_KEY];return t!==n.OffcanvasUtils.DISPLAY_MODE_OVERLAY&&t!==n.OffcanvasUtils.DISPLAY_MODE_PUSH&&t!==n.OffcanvasUtils.DISPLAY_MODE_PIN&&(t=(_.parseJSONFromFontFamily("oj-offcanvas-option-defaults")||{}).displayMode),t},n.OffcanvasUtils._getDrawer=function(e){return $(e[n.OffcanvasUtils.SELECTOR_KEY])},n.OffcanvasUtils._isModal=function(e){return e[n.OffcanvasUtils.MODALITY_KEY]===n.OffcanvasUtils.MODALITY_MODAL},n.OffcanvasUtils._isOpen=function(e){return e.hasClass(n.OffcanvasUtils.OPEN_SELECTOR)},n.OffcanvasUtils._getOuterWrapper=function(e){return e.closest("."+n.OffcanvasUtils.OUTER_WRAPPER_SELECTOR)},n.OffcanvasUtils._getAnimateWrapper=function(e){var t=n.OffcanvasUtils._getDrawer(e);return n.OffcanvasUtils._noInnerWrapper(e)||e[n.OffcanvasUtils.DISPLAY_MODE_KEY]===n.OffcanvasUtils.DISPLAY_MODE_OVERLAY?t:e[n.OffcanvasUtils.ANIMATE_WRAPPER_KEY]?t.closest("."+e[n.OffcanvasUtils.ANIMATE_WRAPPER_KEY]):t.parent()},n.OffcanvasUtils._getShiftSelector=function(e){var t=n.OffcanvasUtils._shiftSelector[e];if(!t)throw new Error("Invalid edge: "+e);return t},n.OffcanvasUtils._isRTL=function(){return"rtl"===n.DomUtils.getReadingDirection()},n.OffcanvasUtils._setTransform=function(e,t){e.css({"-webkit-transform":t,transform:t})},n.OffcanvasUtils._getTranslationX=function(e,t,i){var o=e===n.OffcanvasUtils.EDGE_END;return(n.OffcanvasUtils._isRTL()||i)&&(o=!o),"translate3d("+(o?"-":"")+t+", 0, 0)"},n.OffcanvasUtils._setTranslationX=function(e,t,i){n.OffcanvasUtils._setTransform(e,n.OffcanvasUtils._getTranslationX(t,i,!1))},n.OffcanvasUtils._getTranslationY=function(e,t){return"translate3d(0, "+(e===n.OffcanvasUtils.EDGE_BOTTOM?"-":"")+t+", 0)"},n.OffcanvasUtils._setTranslationY=function(e,t,i){n.OffcanvasUtils._setTransform(e,n.OffcanvasUtils._getTranslationY(t,i))},n.OffcanvasUtils._getTranslationY2=function(e,t){return"translate3d(0, "+(t?"-":"")+e+", 0)"},n.OffcanvasUtils._setAnimateClass=function(e,t,i,o,s){t.addClass(n.OffcanvasUtils.TRANSITION_SELECTOR),n.OffcanvasUtils._setTransform(t,o),i.addClass(n.OffcanvasUtils.TRANSITION_SELECTOR),n.OffcanvasUtils._setTransform(i,s)},n.OffcanvasUtils._saveEdge=function(e){var t=e.edge,i=n.OffcanvasUtils._getDrawer(e);return t&&t.length||(t=i.hasClass("oj-offcanvas-start")?n.OffcanvasUtils.EDGE_START:i.hasClass("oj-offcanvas-end")?n.OffcanvasUtils.EDGE_END:i.hasClass("oj-offcanvas-top")?n.OffcanvasUtils.EDGE_TOP:i.hasClass("oj-offcanvas-bottom")?n.OffcanvasUtils.EDGE_BOTTOM:n.OffcanvasUtils.EDGE_START),$.data(i[0],n.OffcanvasUtils._DATA_EDGE_KEY,t),t},n.OffcanvasUtils._getEdge=function(e){return $.data(e[0],n.OffcanvasUtils._DATA_EDGE_KEY)},n.OffcanvasUtils._toggleClass=function(e,t,i){var o=e[n.OffcanvasUtils.DISPLAY_MODE_KEY],s=n.OffcanvasUtils._getDrawer(e),r=n.OffcanvasUtils.OPEN_SELECTOR,a=o===n.OffcanvasUtils.DISPLAY_MODE_OVERLAY?n.OffcanvasUtils.TRANSITION_SELECTOR+" oj-offcanvas-overlay":n.OffcanvasUtils.TRANSITION_SELECTOR;if(i)s.addClass(r),void 0===e[n.OffcanvasUtils.ANIMATE_KEY]&&t.addClass(a);else{e.makeFocusable&&n.DomUtils.makeFocusable({element:s,remove:!0});var l=e.tabindex;void 0===l?s.removeAttr("tabindex"):s.attr("tabindex",l),s.removeClass(r),t.removeClass(a)}},n.OffcanvasUtils._setFocus=function(e){var t,i=e,o=n.OffcanvasUtils._getDrawer(i),s=o.find("[autofocus]");if(0===s.length&&(s=o.find(":tabbable")),0===s.length){var r=o.attr("tabindex");void 0!==r&&(i.tabindex=r),o.attr("tabindex","-1"),t=o,n.DomUtils.makeFocusable({element:o,applyHighlight:!0}),i.makeFocusable=!0}else t=s[0];n.FocusUtils.focusElement(t)},n.OffcanvasUtils._isAutoDismiss=function(e){return"none"!==e.autoDismiss},n.OffcanvasUtils._calcTransitionTime=function(e){for(var t=e.css("transitionProperty").split(","),i=e.css("transitionDelay").split(","),n=e.css("transitionDuration").split(","),o=0,s=0;s<t.length;s++){var r=n[s%n.length],a=r.indexOf("ms")>-1?parseFloat(r):1e3*parseFloat(r);if(a>0){var l=i[s%i.length],u=l.indexOf("ms")>-1?parseFloat(l):1e3*parseFloat(l);o=Math.max(o,u+a)}}return o+100},n.OffcanvasUtils._onTransitionEnd=function(e,t){var i,o="transitionend.oc webkitTransitionEnd.oc",s=function(){i&&(clearTimeout(i),i=void 0),e.off(o,s),t(e)};e.on(o,s),i=setTimeout(s,n.OffcanvasUtils._calcTransitionTime(e))},n.OffcanvasUtils._closeWithCatch=function(t){n.OffcanvasUtils.close(t).catch(function(t){e.warn("Offcancas close failed: "+t)})},n.OffcanvasUtils._registerCloseHandler=function(e){var t=e;if(n.OffcanvasUtils._unregisterCloseHandler(t),n.OffcanvasUtils._isAutoDismiss(t)){var i=n.OffcanvasUtils._getDrawer(t),o=function(e){var o=e.target;n.DomUtils.isChromeEvent(e)||"focus"===e.type&&!$(o).is(":focusable")||(null!=$.data(i[0],n.OffcanvasUtils._DATA_OFFCANVAS_KEY)?n.DomUtils.isLogicalAncestorOrSelf(i[0],o)||n.OffcanvasUtils._closeWithCatch(t):n.OffcanvasUtils._unregisterCloseHandler(t))};t[n.OffcanvasUtils.DISMISS_HANDLER_KEY]=o;var s=document.documentElement;n.DomUtils.isTouchSupported()&&s.addEventListener("touchstart",o,!0),s.addEventListener("mousedown",o,!0),s.addEventListener("focus",o,!0)}n.OffcanvasUtils._registerSwipeHandler(t)},n.OffcanvasUtils._unregisterCloseHandler=function(e){var t=e,i=t[n.OffcanvasUtils.DISMISS_HANDLER_KEY];if(i){var o=document.documentElement;n.DomUtils.isTouchSupported()&&o.removeEventListener("touchstart",i,!0),o.removeEventListener("mousedown",i,!0),o.removeEventListener("focus",i,!0),delete t[n.OffcanvasUtils.DISMISS_HANDLER_KEY],t[n.OffcanvasUtils.DISMISS_HANDLER_KEY]=null}n.OffcanvasUtils._unregisterSwipeHandler(t)},n.OffcanvasUtils._registerSwipeHandler=function(e){if(n.DomUtils.isTouchSupported()){var t,i,o,s=e,r=s[n.OffcanvasUtils.SELECTOR_KEY],a=$(r),l=n.OffcanvasUtils._getEdge(a);l===n.OffcanvasUtils.EDGE_START&&!n.OffcanvasUtils._isRTL()||l===n.OffcanvasUtils.EDGE_END&&n.OffcanvasUtils._isRTL()?(i={recognizers:[[Hammer.Swipe,{direction:Hammer.DIRECTION_LEFT}]]},t="swipeleft"):l===n.OffcanvasUtils.EDGE_START&&n.OffcanvasUtils._isRTL()||l===n.OffcanvasUtils.EDGE_END&&!n.OffcanvasUtils._isRTL()?(i={recognizers:[[Hammer.Swipe,{direction:Hammer.DIRECTION_RIGHT}]]},t="swiperight"):l===n.OffcanvasUtils.EDGE_TOP?(i={recognizers:[[Hammer.Swipe,{direction:Hammer.DIRECTION_UP}]]},t="swipeup"):l===n.OffcanvasUtils.EDGE_BOTTOM&&(i={recognizers:[[Hammer.Swipe,{direction:Hammer.DIRECTION_DOWN}]]},t="swipedown"),o=a.ojHammer(i).on(t,function(e){e.target===a[0]&&(e.preventDefault(),n.OffcanvasUtils._closeWithCatch(s))}),$.data($(r)[0],n.OffcanvasUtils._DATA_HAMMER_KEY,{event:t,hammer:o})}},n.OffcanvasUtils._unregisterSwipeHandler=function(e){var t=n.OffcanvasUtils._getDrawer(e);if(t.length>0){var i=$.data(t[0],n.OffcanvasUtils._DATA_HAMMER_KEY);i&&i.hammer.off(i.event)}},n.OffcanvasUtils._isFixed=function(e){return n.OffcanvasUtils._getOuterWrapper(e).hasClass("oj-offcanvas-page")},n.OffcanvasUtils._isPin=function(e){return e[n.OffcanvasUtils.DISPLAY_MODE_KEY]===n.OffcanvasUtils.DISPLAY_MODE_PIN},n.OffcanvasUtils._noInnerWrapper=function(e){return e[n.OffcanvasUtils.CONTENT_KEY]||n.OffcanvasUtils._isFixed(n.OffcanvasUtils._getDrawer(e))||n.OffcanvasUtils._isPin(e)},n.OffcanvasUtils._saveStyles=function(e){var t=e.attr("style");void 0!==t&&$.data(e[0],n.OffcanvasUtils._DATA_STYLE_KEY,t)},n.OffcanvasUtils._restoreStyles=function(e){var t=$.data(e[0],n.OffcanvasUtils._DATA_STYLE_KEY);t?e.attr("style",t):e.removeAttr("style")},n.OffcanvasUtils._toggleOuterWrapper=function(e,t,i){var o=n.OffcanvasUtils._getEdge(t),s=n.OffcanvasUtils._getShiftSelector(o),r=n.OffcanvasUtils._getOuterWrapper(t);n.Assert.assertPrototype(r,$);var a=r.hasClass(s);return i||r.toggleClass(s,!a),a},n.OffcanvasUtils._afterCloseHandler=function(e){var t=n.OffcanvasUtils._getAnimateWrapper(e);if(""===t.get(0).style.transform){n.OffcanvasUtils._unregisterCloseHandler(e);var i=n.OffcanvasUtils._getDrawer(e),o=n.OffcanvasUtils._isPin(e),s=null;try{s=$.data(i[0],n.OffcanvasUtils._DATA_OFFCANVAS_KEY)}catch(e){}s===e&&(o?i.removeClass(n.OffcanvasUtils.OPEN_SELECTOR+" "+n.OffcanvasUtils.PIN_TRANSITION_SELECTOR):n.OffcanvasUtils._toggleClass(e,t,!1),n.OffcanvasUtils._removeModality(e),o&&(n.OffcanvasUtils._getOuterWrapper(i).removeClass(n.OffcanvasUtils.PIN_WRAPPER_SELECTOR),n.OffcanvasUtils._restoreStyles(i)),i.trigger("ojclose",e),$.removeData(i[0],n.OffcanvasUtils._DATA_OFFCANVAS_KEY))}},n.OffcanvasUtils._setVisible=function(e,t,i){var o=$(e),s=!!t;s&&n.OffcanvasUtils._isOpen(o)&&n.OffcanvasUtils._close(e,!1),o.toggleClass(n.OffcanvasUtils._drawerSelector[i],!s)},n.OffcanvasUtils.setupResponsive=function(e){var t=e.query;if(null!==t){var i=e[n.OffcanvasUtils.SELECTOR_KEY],o=window.matchMedia(t),s=n.OffcanvasUtils._saveEdge(e),r=function(e){n.OffcanvasUtils._setVisible(i,e.matches,s)};o.addListener(r),n.OffcanvasUtils._setVisible(i,o.matches,s),$.data($(i)[0],n.OffcanvasUtils._DATA_MEDIA_QUERY_KEY,{mqList:o,mqListener:r})}},n.OffcanvasUtils.tearDownResponsive=function(e){var t=n.OffcanvasUtils._getDrawer(e),i=$.data(t[0],n.OffcanvasUtils._DATA_MEDIA_QUERY_KEY);i&&(i.mqList.removeListener(i.mqListener),$.removeData(t[0],n.OffcanvasUtils._DATA_MEDIA_QUERY_KEY))},n.OffcanvasUtils._openPush=function(e,t,i,o){var s=n.OffcanvasUtils._getDrawer(e),r=$(e[n.OffcanvasUtils.CONTENT_KEY]);n.Assert.assertPrototype(r,$);var a,l=!0,u=e.size,d=function(i){i.removeClass(n.OffcanvasUtils.TRANSITION_SELECTOR),l?l=!1:(o!==n.OffcanvasUtils.EDGE_END&&o!==n.OffcanvasUtils.EDGE_BOTTOM||n.OffcanvasUtils._setFocus(e),s.trigger("ojopen",e),n.OffcanvasUtils._registerCloseHandler(e),t(!0))};s.addClass(n.OffcanvasUtils.OPEN_SELECTOR),window.setTimeout(function(){o===n.OffcanvasUtils.EDGE_START||o===n.OffcanvasUtils.EDGE_END?(void 0===u&&(u=s.outerWidth(!0)+"px"),a=n.OffcanvasUtils._getTranslationX(o,u,!1)):(void 0===u&&(u=s.outerHeight(!0)+"px"),n.OffcanvasUtils._setTransform(s,n.OffcanvasUtils._getTranslationY2(u,o===n.OffcanvasUtils.EDGE_TOP)),a=n.OffcanvasUtils._getTranslationY2(u,o!==n.OffcanvasUtils.EDGE_TOP)),window.setTimeout(function(){n.OffcanvasUtils._setAnimateClass(e,s,r,"translate3d(0, 0, 0)",a),n.OffcanvasUtils._toggleOuterWrapper(e,s,!1),n.OffcanvasUtils._onTransitionEnd(r,d),n.OffcanvasUtils._onTransitionEnd(s,d)},0)},0),n.OffcanvasUtils._applyModality(e,s),o!==n.OffcanvasUtils.EDGE_START&&o!==n.OffcanvasUtils.EDGE_TOP||n.OffcanvasUtils._setFocus(e)},n.OffcanvasUtils._openOverlay=function(e,t,i,o){var s=n.OffcanvasUtils._getDrawer(e);n.OffcanvasUtils._toggleClass(e,s,!0);var r=e.size;r&&(o===n.OffcanvasUtils.EDGE_START||o===n.OffcanvasUtils.EDGE_END?n.OffcanvasUtils._setTransform(s,n.OffcanvasUtils._getTranslationX(o,r,!0)):n.OffcanvasUtils._setTransform(s,n.OffcanvasUtils._getTranslationY(o,r))),window.setTimeout(function(){n.OffcanvasUtils._toggleOuterWrapper(e,s,!1)},20),n.OffcanvasUtils._applyModality(e,s),o!==n.OffcanvasUtils.EDGE_START&&o!==n.OffcanvasUtils.EDGE_TOP||n.OffcanvasUtils._setFocus(e),n.OffcanvasUtils._onTransitionEnd(s,function(){s.removeClass(n.OffcanvasUtils.TRANSITION_SELECTOR),o!==n.OffcanvasUtils.EDGE_END&&o!==n.OffcanvasUtils.EDGE_BOTTOM||n.OffcanvasUtils._setFocus(e),s.trigger("ojopen",e),n.OffcanvasUtils._registerCloseHandler(e),t(!0)})},n.OffcanvasUtils._closePush=function(e,t,i,o,s){var r=$(e[n.OffcanvasUtils.CONTENT_KEY]),a=!0,l=function(){a||(r.removeClass(n.OffcanvasUtils.TRANSITION_SELECTOR),n.OffcanvasUtils._setTransform(r,""),n.OffcanvasUtils._afterCloseHandler(e),t(!0)),a=!1};n.OffcanvasUtils._setTransform(o,""),n.OffcanvasUtils._setTransform(r,""),n.OffcanvasUtils._toggleOuterWrapper(e,o,!1),n.OffcanvasUtils._isModal(e)&&e[n.OffcanvasUtils.GLASS_PANE_KEY].removeClass(n.OffcanvasUtils.GLASSPANE_DIM_SELECTOR),s?(r.addClass(n.OffcanvasUtils.TRANSITION_SELECTOR),o.addClass(n.OffcanvasUtils.TRANSITION_SELECTOR),n.OffcanvasUtils._onTransitionEnd(o,l),n.OffcanvasUtils._onTransitionEnd(r,l)):(a=!1,l())},n.OffcanvasUtils._closeOverlay=function(e,t,i,o,s){var r=function(){n.OffcanvasUtils._afterCloseHandler(e),t(!0)};n.OffcanvasUtils._toggleOuterWrapper(e,o,!1),n.OffcanvasUtils._isModal(e)&&e[n.OffcanvasUtils.GLASS_PANE_KEY].removeClass(n.OffcanvasUtils.GLASSPANE_DIM_SELECTOR),s?(o.addClass(n.OffcanvasUtils.TRANSITION_SELECTOR),n.OffcanvasUtils._onTransitionEnd(o,r)):r()},n.OffcanvasUtils._openOldDrawer=function(e,t,i,o,s){var r,a=n.OffcanvasUtils._getDrawer(e),l=n.OffcanvasUtils._getAnimateWrapper(e);n.Assert.assertPrototype(l,$),n.OffcanvasUtils._toggleClass(e,l,!0),o===n.OffcanvasUtils.EDGE_START||o===n.OffcanvasUtils.EDGE_END?(r=void 0===r?a.outerWidth(!0)+"px":r,s===n.OffcanvasUtils.DISPLAY_MODE_PUSH&&n.OffcanvasUtils._setTranslationX(l,o,r)):(r=void 0===r?a.outerHeight(!0)+"px":r,s===n.OffcanvasUtils.DISPLAY_MODE_PUSH&&n.OffcanvasUtils._setTranslationY(l,o,r)),window.setTimeout(function(){n.OffcanvasUtils._toggleOuterWrapper(e,a,!1)},10),n.OffcanvasUtils._applyModality(e,a),o!==n.OffcanvasUtils.EDGE_START&&o!==n.OffcanvasUtils.EDGE_TOP||n.OffcanvasUtils._setFocus(e),n.OffcanvasUtils._onTransitionEnd(l,function(){l.removeClass(n.OffcanvasUtils.TRANSITION_SELECTOR),o!==n.OffcanvasUtils.EDGE_END&&o!==n.OffcanvasUtils.EDGE_BOTTOM||n.OffcanvasUtils._setFocus(e),a.trigger("ojopen",e),n.OffcanvasUtils._registerCloseHandler(e),t(!0)})},n.OffcanvasUtils._closeOldDrawer=function(e,t,i,o,s){var r=e[n.OffcanvasUtils.DISPLAY_MODE_KEY],a=n.OffcanvasUtils._getAnimateWrapper(e),l=function(){n.OffcanvasUtils._afterCloseHandler(e),t(!0)};r===n.OffcanvasUtils.DISPLAY_MODE_PUSH&&n.OffcanvasUtils._setTransform(a,""),n.OffcanvasUtils._toggleOuterWrapper(e,o,!1),n.OffcanvasUtils._isModal(e)&&e[n.OffcanvasUtils.GLASS_PANE_KEY].removeClass(n.OffcanvasUtils.GLASSPANE_DIM_SELECTOR),s?(a.addClass(n.OffcanvasUtils.TRANSITION_SELECTOR),n.OffcanvasUtils._onTransitionEnd(a,l)):l()},n.OffcanvasUtils.open=function(e){var t,i=n.OffcanvasUtils._getDrawer(e),o=$.data(i[0],n.OffcanvasUtils._DATA_OFFCANVAS_KEY);if(o){if(o[n.OffcanvasUtils.CLOSE_PROMISE_KEY])return o[n.OffcanvasUtils.CLOSE_PROMISE_KEY];if(o[n.OffcanvasUtils.OPEN_PROMISE_KEY])return o[n.OffcanvasUtils.OPEN_PROMISE_KEY]}var s=!1,r=new Promise(function(o,r){n.Assert.assertPrototype(i,$);var a=n.OffcanvasUtils._saveEdge(e),l=$.Event("ojbeforeopen");if(i.trigger(l,e),!1===l.result)return r(n.OffcanvasUtils.VETO_BEFOREOPEN_MSG),void(s=!0);var u=n.OffcanvasUtils._getDisplayMode(e),d=n.OffcanvasUtils._isPin(e);!d||a!==n.OffcanvasUtils.EDGE_TOP&&a!==n.OffcanvasUtils.EDGE_BOTTOM||(u=n.OffcanvasUtils.DISPLAY_MODE_PUSH);var h=$.extend({},e);if(h[n.OffcanvasUtils.DISPLAY_MODE_KEY]=u,$.data(i[0],n.OffcanvasUtils._DATA_OFFCANVAS_KEY,h),e[n.OffcanvasUtils.CONTENT_KEY]){if(!n.OffcanvasUtils._noInnerWrapper(e))throw new Error("Error: Both main content selector and the inner wrapper <div class='oj-offcanvas-inner-wrapper'> are provided. Please remove the inner wrapper.");var p=c.getContext(i[0]).getBusyContext();t=p.addBusyState({description:"The offcanvas selector ='"+e[n.OffcanvasUtils.SELECTOR_KEY]+"' doing the open animation."}),d||(u===n.OffcanvasUtils.DISPLAY_MODE_PUSH?n.OffcanvasUtils._openPush(h,o,r,a):n.OffcanvasUtils._openOverlay(h,o,r,a))}else n.OffcanvasUtils._openOldDrawer(h,o,r,a,u)});if(r=r.then(function(e){return t&&t(),e},function(e){throw t&&t(),e}),!s){var a=$.data(i[0],n.OffcanvasUtils._DATA_OFFCANVAS_KEY);a&&(a[n.OffcanvasUtils.OPEN_PROMISE_KEY]=r,w.subtreeShown(i[0]))}return r},n.OffcanvasUtils.close=function(e){return n.OffcanvasUtils._close(e[n.OffcanvasUtils.SELECTOR_KEY],void 0===e[n.OffcanvasUtils.ANIMATE_KEY])},n.OffcanvasUtils._close=function(e,t){var i=$(e);n.Assert.assertPrototype(i,$);var o,s=$.data(i[0],n.OffcanvasUtils._DATA_OFFCANVAS_KEY);if(s&&s[n.OffcanvasUtils.CLOSE_PROMISE_KEY])return s[n.OffcanvasUtils.CLOSE_PROMISE_KEY];var r=!1,a=new Promise(function(a,l){if(n.OffcanvasUtils._isOpen(i)){e!==s[n.OffcanvasUtils.SELECTOR_KEY]&&a(!0),n.OffcanvasUtils._toggleOuterWrapper(s,i,!0)||a(!0);var u=$.Event("ojbeforeclose");if(i.trigger(u,s),!1===u.result)return l(n.OffcanvasUtils.VETO_BEFORECLOSE_MSG),void(r=!0);if(t){var d=c.getContext(i[0]).getBusyContext();o=d.addBusyState({description:"The offcanvas selector ='"+s[n.OffcanvasUtils.SELECTOR_KEY]+"' doing the close animation."})}var h=s[n.OffcanvasUtils.DISPLAY_MODE_KEY];s[n.OffcanvasUtils.CONTENT_KEY]?h===n.OffcanvasUtils.DISPLAY_MODE_PUSH?n.OffcanvasUtils._closePush(s,a,l,i,t):n.OffcanvasUtils._closeOverlay(s,a,l,i,t):n.OffcanvasUtils._closeOldDrawer(s,a,l,i,t)}else a(!0)});return a=a.then(function(e){return o&&o(),e},function(e){throw o&&o(),e}),r||(s=$.data(i[0],n.OffcanvasUtils._DATA_OFFCANVAS_KEY))&&(s[n.OffcanvasUtils.CLOSE_PROMISE_KEY]=a,w.subtreeHidden(i[0])),a},n.OffcanvasUtils.toggle=function(e){var t=n.OffcanvasUtils._getDrawer(e);return n.Assert.assertPrototype(t,$),n.OffcanvasUtils._isOpen(t)?n.OffcanvasUtils.close(e):n.OffcanvasUtils.open(e)},n.OffcanvasUtils._addGlassPane=function(e){var t=$("<div>");return t.addClass(n.OffcanvasUtils.GLASSPANE_SELECTOR),t.attr("role","presentation"),t.attr("aria-hidden","true"),t.appendTo(e.parent()),t.on("keydown keyup keypress mousedown mouseup mouseover mouseout click focusin focus",function(e){e.stopPropagation(),e.preventDefault()}),t},n.OffcanvasUtils._createSurrogate=function(e){var t=$("<span style='display:none'>");t.attr("aria-hidden","true");var i,o=e.attr("id");return o?(i=[o,"surrogate"].join("_"),t.attr("id",i)):i=t.uniqueId(),t.insertBefore(e),e.attr(n.OffcanvasUtils.SURROGATE_ATTR,i),t},n.OffcanvasUtils._swapOrder=function(e,t){e[n.OffcanvasUtils.SURROGATE_KEY]=n.OffcanvasUtils._createSurrogate(t),t.appendTo(t.parent())},n.OffcanvasUtils._restoreOrder=function(e){var t=n.OffcanvasUtils._getDrawer(e),i=e[n.OffcanvasUtils.SURROGATE_KEY];t&&i&&t.attr(n.OffcanvasUtils.SURROGATE_ATTR)===i.attr("id")&&(t.insertAfter(i),t.removeAttr(n.OffcanvasUtils.SURROGATE_ATTR),i.remove())},n.OffcanvasUtils._applyModality=function(e,t){var i=e;n.OffcanvasUtils._isModal(i)&&(i[n.OffcanvasUtils.GLASS_PANE_KEY]=n.OffcanvasUtils._addGlassPane(t),n.OffcanvasUtils._swapOrder(i,t),$(i[n.OffcanvasUtils.CONTENT_KEY]).attr("aria-hidden","true"),window.setTimeout(function(){i[n.OffcanvasUtils.GLASS_PANE_KEY].addClass(n.OffcanvasUtils.GLASSPANE_DIM_SELECTOR)},0))},n.OffcanvasUtils._removeModality=function(e){n.OffcanvasUtils._isModal(e)&&(e[n.OffcanvasUtils.GLASS_PANE_KEY].remove(),n.OffcanvasUtils._restoreOrder(e),$(e[n.OffcanvasUtils.CONTENT_KEY]).removeAttr("aria-hidden"))},n.OffcanvasUtils.setupPanToReveal=function(e){var t,i,o,s,r,a,l,u,d,h,p,_,m,g=e;null==$(g).attr("oj-data-pansetup")&&($(g).attr("oj-data-pansetup","true"),g.displayMode="push",t=n.OffcanvasUtils._getDrawer(g),o=n.OffcanvasUtils._getOuterWrapper(t),r={recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_HORIZONTAL}]]},a=!1,$(o).ojHammer(r).on("panstart",function(e){switch(l=null,e.gesture.direction){case Hammer.DIRECTION_LEFT:Math.abs(e.gesture.deltaY)<Math.abs(e.gesture.deltaX)&&(l=n.OffcanvasUtils._isRTL()?"end":"start");break;case Hammer.DIRECTION_RIGHT:Math.abs(e.gesture.deltaY)<Math.abs(e.gesture.deltaX)&&(l=n.OffcanvasUtils._isRTL()?"start":"end")}null!==l&&(e.gesture.angle<0&&(e.gesture.deltaX<-100||e.gesture.deltaY<-100)||(u={direction:l,distance:Math.abs(e.gesture.deltaX)},d=$.Event("ojpanstart"),t.trigger(d,u),d.isDefaultPrevented()||(c.getContext(o.get(0)).getBusyContext().whenReady().then(function(){null==(i=g.size)&&(i=t.outerWidth(),g.size=i),a=!0}),g._closePromise=null,(s=n.OffcanvasUtils._getAnimateWrapper(g)).off(".oc"),n.OffcanvasUtils._toggleClass(g,s,!0),e.gesture.srcEvent.stopPropagation(),e.stopPropagation())))}).on("panmove",function(e){a&&(h=e.gesture.deltaX,"start"===l&&h>0||"end"===l&&h<0?n.OffcanvasUtils._setTranslationX(s,"start","0px"):(t.css("width",Math.abs(h)),s.removeClass(n.OffcanvasUtils.TRANSITION_SELECTOR),n.OffcanvasUtils._setTranslationX(s,"start",h+"px"),u={direction:l,distance:Math.abs(h)},d=$.Event("ojpanmove"),t.trigger(d,u),e.gesture.srcEvent.stopPropagation(),e.stopPropagation()))}).on("panend",function(e){if(a){if(a=!1,h=Math.abs(e.gesture.deltaX),u={distance:h},d=$.Event("ojpanend"),t.trigger(d,u),e.stopPropagation(),!d.isDefaultPrevented())return null==(p=g.edge)&&(p=t.hasClass("oj-offcanvas-start")?"start":"end"),n.OffcanvasUtils._animateWrapperAndDrawer(s,t,p,i,g),$.data(t[0],n.OffcanvasUtils._DATA_OFFCANVAS_KEY,g),$.data(t[0],n.OffcanvasUtils._DATA_EDGE_KEY,p),void n.OffcanvasUtils._registerCloseHandler(g);if("translate3d(0px, 0px, 0px)"===s[0].style.transform)return n.OffcanvasUtils._toggleClass(g,s,!1),s.removeClass(n.OffcanvasUtils.TRANSITION_SELECTOR),void t.trigger("ojclose",g);_="transitionend webkitTransitionEnd otransitionend oTransitionEnd",m=function(){n.OffcanvasUtils._toggleClass(g,s,!1),s.removeClass(n.OffcanvasUtils.TRANSITION_SELECTOR),s.off(_,m),t.trigger("ojclose",g)},s.on(_,m),s.addClass(n.OffcanvasUtils.TRANSITION_SELECTOR),n.OffcanvasUtils._setTranslationX(s,"start","0px")}}))},n.OffcanvasUtils._animateWrapperAndDrawer=function(e,t,i,o,s){var r,a,l,u,d,h,c,p,_,m,g,f;e.removeClass(n.OffcanvasUtils.TRANSITION_SELECTOR),r=Math.round(1e3/60),"none"!==(a=e.css("transform"))&&(l=a.split("(")[1].split(")")[0].split(","),u=parseInt(l[4],10),d=u,h="end"===i?0-o:o,p=Math.max(1,Math.abs(h-u)/(400/r)),_=(new Date).getTime(),m=function(){d===u||""!==e.get(0).style.transform?(g=(new Date).getTime(),f=Math.max(p,p*Math.max((g-_)/r)),_=g,u<h?u=Math.min(h,u+f):u>h&&(u=Math.max(h,u-f)),n.OffcanvasUtils._setTranslationX(e,i,Math.abs(u)+"px"),t.css("width",Math.abs(u)+"px"),u===h?(window.cancelAnimationFrame(c),e.addClass(n.OffcanvasUtils.TRANSITION_SELECTOR),t.trigger("ojopen",s)):c=window.requestAnimationFrame(m)):window.cancelAnimationFrame(c)},c=window.requestAnimationFrame(m))},n.OffcanvasUtils.tearDownPanToReveal=function(e){var t=n.OffcanvasUtils._getDrawer(e),i=n.OffcanvasUtils._getOuterWrapper(t);$(i).off("panstart panmove panend")};var jn={properties:{disabled:{type:"boolean",value:!1},label:{type:"string"}},methods:{setProperty:{},getProperty:{},refresh:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};function Mn(e){this.updateDOM=function(){var t=e.element.customOptgroupRenderer;t&&"function"==typeof t&&t(e.element)}}jn.properties.customOptgroupRenderer={},jn.extension._CONSTRUCTOR=Mn,n.CustomElementBridge.register("oj-optgroup",{metadata:jn});var Hn={properties:{disabled:{type:"boolean",value:!1},value:{type:"any"}},methods:{setProperty:{},getProperty:{},refresh:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};function kn(e){function t(e){var t=n.BaseCustomElementBridge.getSlotMap(e),i=["startIcon","","endIcon"];$.each(t,function(t,n){-1===i.indexOf(t)&&function(e,t){$.each(t,function(t,i){e.removeChild(i)})}(e,n)}),$.each(i,function(i,n){t[n]&&function(e,t){$.each(t,function(t,i){e.appendChild(i)})}(e,t[n])})}this.updateDOM=function(){var i=e.element.customOptionRenderer;t(e.element),i&&"function"==typeof i&&i(e.element)}}Hn.properties.customOptionRenderer={},Hn.extension._CONSTRUCTOR=kn,n.CustomElementBridge.register("oj-option",{metadata:Hn}),n.PagingCellSet=function(e,t){this.m_cellSet=e,this.m_startIndex=t},n.PagingCellSet.prototype.getData=function(e){var t={column:e.column,row:e.row+this.m_startIndex};return this.m_cellSet.getData(t)},n.PagingCellSet.prototype.getMetadata=function(e){var t={column:e.column,row:e.row+this.m_startIndex};return this.m_cellSet.getMetadata(t)},n.PagingCellSet.prototype.getCount=function(e){return this.m_cellSet.getCount(e)},n.PagingCellSet.prototype.getCellSet=function(){return this.m_cellSet},n.PagingCellSet.prototype.getStartIndex=function(){return this.m_startIndex},n.PagingCellSet.prototype.getExtent=function(e){var t={column:e.column,row:e.row+this.m_startIndex};return this.m_cellSet.getExtent(t)},n.PagingDataGridDataSource=function(e,t){if(!(e instanceof n.DataGridDataSource))throw new D("Not a datagridatasource","Not a datagridatasource",D.SEVERITY_LEVEL.ERROR);this.dataSource=e,this._startIndex=0,this.Init()},n.Object.createSubclass(n.PagingDataGridDataSource,n.DataGridDataSource,"oj.PagingDataGridDataSource"),n.PagingDataGridDataSource.prototype.Init=function(){n.PagingDataGridDataSource.superclass.Init.call(this),this._registerEventListeners()},n.PagingDataGridDataSource.prototype._registerEventListeners=function(){this.dataSource.on("change",this._handleChange.bind(this))},n.PagingDataGridDataSource.prototype.getPage=function(){return this._page},n.PagingDataGridDataSource.prototype.setPage=function(e,t){t=t||{},e=parseInt(e,10);try{n.PagingDataGridDataSource.superclass.handleEvent.call(this,n.PagingModel.EventType.BEFOREPAGE,{page:e,previousPage:this._page})}catch(e){return Promise.reject(null)}this._pageSize=null!=t.pageSize?t.pageSize:this._pageSize,t.startIndex=e*this._pageSize;var i=this._page;this._page=e,this._startIndex=t.startIndex;var o=this;return new Promise(function(e,n){o._fetchInternal(t).then(function(){e(null)},function(){o._page=i,o._startIndex=o._page*o._pageSize,n(null)})})},n.PagingDataGridDataSource.prototype._fetchInternal=function(e){this._initialized=!0,this._startIndex=e.startIndex;var t=this;return new Promise(function(e){t.handleEvent("change",{operation:"sync",pageSize:t._pageSize}),e(void 0)})},n.PagingDataGridDataSource.prototype.fetch=function(e){return this._pageSize=e.pageSize+e.startIndex,e.startIndex=0,this._fetchInternal(e)},n.PagingDataGridDataSource.prototype.getStartItemIndex=function(){return this._startIndex},n.PagingDataGridDataSource.prototype.getEndItemIndex=function(){return this._endIndex},n.PagingDataGridDataSource.prototype.getPageCount=function(){var e=this.totalSize();return-1===e?-1:Math.ceil(e/this._pageSize)},n.PagingDataGridDataSource.prototype._handleChange=function(e){switch(e.operation){case"refresh":this._startIndex=0,this._page=0,this.handleEvent("change",{operation:"sync",pageSize:this._pageSize}),this.handleEvent(n.PagingTableDataSource.EventType.REFRESH,null);break;case"reset":this.handleEvent(n.PagingTableDataSource.EventType.RESET,null);break;case"insert":this.handleEvent(n.PagingTableDataSource.EventType.ADD,{index:e.indexes.row});break;case"delete":this.handleEvent(n.PagingTableDataSource.EventType.REMOVE,null);break;case"update":e.indexes.row=e.indexes.row-this._startIndex>=0?e.indexes.row-this._startIndex:-1,this.handleEvent("change",e);break;default:this.handleEvent("change",e),this.handleEvent(n.PagingTableDataSource.EventType.SYNC,null)}},n.PagingDataGridDataSource.prototype.getCount=function(e){var t=this.dataSource.getCount(e);return"row"===e&&t>=0?this._startIndex+this._pageSize<t?this._pageSize:t-this._startIndex:t},n.PagingDataGridDataSource.prototype.getCountPrecision=function(e){return this.dataSource.getCountPrecision(e)},n.PagingDataGridDataSource.prototype.fetchHeaders=function(e,t,i){null==this._initialized?null!=t&&t.success&&t.success.call(i.success,null,e,null):"row"===e.axis?(e.start+=this._startIndex,e.start+e.count>this._startIndex+this._pageSize&&(e.count=this._pageSize-e.start),this._pendingRowHeaderCallback={headerRange:e,callbacks:t,callbackObjects:i},this.dataSource.fetchHeaders(e,{success:this._handleRowHeaderFetchSuccess.bind(this),error:this._handleRowHeaderFetchError.bind(this)},i)):this.dataSource.fetchHeaders(e,t,i)},n.PagingDataGridDataSource.prototype._handleRowHeaderFetchSuccess=function(e,t,i){var o,s;if(this._pendingRowHeaderCallback.headerRange===t){t.start-=this._startIndex,t.count+=1,null!=e&&(o=new n.PagingHeaderSet(e,this._startIndex)),null!=i&&(s=new n.PagingHeaderSet(i,this._startIndex));var r=this._pendingRowHeaderCallback.callbacks.success,a=this._pendingRowHeaderCallback.callbackObjects.success;this._pendingRowHeaderCallback=null,r.call(a,o,t,s)}},n.PagingDataGridDataSource.prototype._handleRowHeaderFetchError=function(e){var t=this._pendingRowHeaderCallback.callbacks.error,i=this._pendingRowHeaderCallback.callbackObjects.error;this._pendingRowHeaderCallback=null,t.call(i,e)},n.PagingDataGridDataSource.prototype.fetchCells=function(e,t,i){if(null==this._initialized){var n={getData:function(){return null},getMetaData:function(){return null},getStart:function(){return 0},getCount:function(){return 0},getLevelCount:function(){return 0},getExtent:function(){return 0},getDepth:function(){return 1}};null!=t&&t.success&&t.success.call(i.success,n,e)}else{for(var o=0;o<e.length;o+=1)"row"===e[o].axis&&(e[o].start+=this._startIndex,e[o].start+e[o].count>this._startIndex+this._pageSize&&(e[o].count=this._pageSize-e[o].start));this._pendingCellCallback={cellRanges:e,callbacks:t,callbackObjects:i},this.dataSource.fetchCells(e,{success:this._handleCellsFetchSuccess.bind(this),error:this._handleCellsFetchError.bind(this)},i)}},n.PagingDataGridDataSource.prototype._handleCellsFetchSuccess=function(e,t){if(!this._pendingCellCallback.cellRanges!==t){for(var i=0;i<t.length;i+=1)"row"===t[i].axis&&(t[i].start-=this._startIndex,t[i].count+=1);var o=new n.PagingCellSet(e,this._startIndex),s=this._pendingCellCallback.callbacks.success,r=this._pendingCellCallback.callbackObjects.success;this._pendingCellCallback=null,this._endIndex=this._startIndex+e.getCount("row")-1,this.handleEvent("sync",{data:new Array(e.getCount("row")),startIndex:this._startIndex}),s.call(r,o,t)}},n.PagingDataGridDataSource.prototype._handleCellsFetchError=function(e){var t=this._pendingCellCallback.callbacks.error,i=this._pendingCellCallback.callbackObjects.error;this._pendingCellCallback=null,t.call(i,e)},n.PagingDataGridDataSource.prototype.keys=function(e){var t={column:e.column,row:e.row+this._startIndex};return this.dataSource.keys(t)},n.PagingDataGridDataSource.prototype.indexes=function(e){var t=this.dataSource.indexes(e);return-1!==t.row&&(t.row-=this._startIndex),t},n.PagingDataGridDataSource.prototype.getCapability=function(e){return this.dataSource.getCapability(e)},n.PagingDataGridDataSource.prototype.size=function(){var e;return null==this._initialized?-1:(e=this.dataSource.getCount("row"),this.dataSource.getCount("row")>this._pageSize?this._pageSize:e)},n.PagingDataGridDataSource.prototype.sort=function(e,t,i){this.dataSource.sort(e,t,i)},n.PagingDataGridDataSource.prototype.totalSize=function(){return null==this._initialized?-1:this.dataSource.getCount("row")},n.PagingDataGridDataSource.prototype.totalSizeConfidence=function(){return"actual"},n.PagingDataGridDataSource.prototype.moveOK=function(e,t,i){return this.dataSource.moveOK(e,t,i)},n.PagingDataGridDataSource.prototype.move=function(e,t,i,n,o){this.dataSource.move(e,t,i,n,o)},n.PagingHeaderSet=function(e,t){this.m_headerSet=e,this.m_startIndex=t},n.PagingHeaderSet.prototype.getData=function(e,t){return this.m_headerSet.getData(e+this.m_startIndex,t)},n.PagingHeaderSet.prototype.getMetadata=function(e,t){return this.m_headerSet.getMetadata(e+this.m_startIndex,t)},n.PagingHeaderSet.prototype.getCount=function(){return this.m_headerSet.getCount()},n.PagingHeaderSet.prototype.getLevelCount=function(){return this.m_headerSet.getLevelCount()},n.PagingHeaderSet.prototype.getExtent=function(e,t){return this.m_headerSet.getExtent(e+this.m_startIndex,t)},n.PagingHeaderSet.prototype.getDepth=function(e,t){return this.m_headerSet.getDepth(e+this.m_startIndex,t)},n.PagingHeaderSet.prototype.getHeaderSet=function(){return this.m_headerSet},n.PagingHeaderSet.prototype.getStartIndex=function(){return this.m_startIndex},n.PagingHeaderSet.prototype.getLabel=function(e){return this.m_headerSet.getLabel(e)},n.PagingModel=function(){},n.PagingModel.EventType={BEFOREPAGE:"beforePage",PAGE:"page",PAGECOUNT:"pageCount"},n.PagingTableDataSource=function(e,t){if(!(e instanceof n.TableDataSource)){var i=n.TableDataSource._LOGGER_MSG._ERR_DATA_INVALID_TYPE_SUMMARY,o=n.TableDataSource._LOGGER_MSG._ERR_DATA_INVALID_TYPE_DETAIL;throw new Error(i+"\n"+o)}this.dataSource=e,this._startIndex=0,this._endIndex=-1,this._dataSourceWrappedEventHandlers=[],this.Init(),Object.defineProperty(this,"sortCriteria",{configurable:!1,enumerable:!0,get:function(){return this.dataSource.sortCriteria},set:function(e){this.dataSource.sortCriteria=e}})},n.Object.createSubclass(n.PagingTableDataSource,n.TableDataSource,"oj.PagingTableDataSource"),n.PagingTableDataSource.prototype.Init=function(){n.PagingTableDataSource.superclass.Init.call(this)},n.PagingTableDataSource.prototype.getWrappedDataSource=function(){return this.dataSource},n.PagingTableDataSource.prototype.getPage=function(){return"loadMore"===this._fetchType?0:this._getPageFromStartIndex()},n.PagingTableDataSource.prototype.setPage=function(e,t){t=t||{},e=parseInt(e,10);try{n.PagingTableDataSource.superclass.handleEvent.call(this,n.PagingModel.EventType.BEFOREPAGE,{page:e,previousPage:this._getPageFromStartIndex()})}catch(e){return Promise.reject(e)}var i=this._getPageFromStartIndex();this._pageSize=null!=t.pageSize?t.pageSize:this._pageSize,t.pageSize=this._pageSize,t.startIndex=e*this._pageSize,this._startIndex=null==t.startIndex?this._startIndex:t.startIndex,this._fetchType="page";var o=this;return new Promise(function(e,s){o._pageSize>0?o.dataSource.fetch(t).then(function(t){t.startIndex=0,t.data.length>0?o._updateEndIndex(o._startIndex+t.data.length-1,!0):o._updateEndIndex(-1,!0),n.PagingTableDataSource.superclass.handleEvent.call(o,n.PagingModel.EventType.PAGE,{page:o._getPageFromStartIndex(),previousPage:i}),e(null)},function(e){o._startIndex=i*o._pageSize,s(e)}):e(null)})},n.PagingTableDataSource.prototype.getStartItemIndex=function(){return"loadMore"===this._fetchType?0:this._startIndex},n.PagingTableDataSource.prototype.getEndItemIndex=function(){return this._endIndex},n.PagingTableDataSource.prototype.getPageCount=function(){var e=this.totalSize();return-1===e?-1:Math.ceil(e/this._pageSize)},n.PagingTableDataSource.prototype.at=function(e,t){return this.dataSource.at(e,t)},n.PagingTableDataSource.prototype.fetch=function(e){if(null==(e=e||{}).startIndex)return this.setPage(this.getPage());this._fetchType="loadMore",this._startIndex=null==e.startIndex?this._startIndex:e.startIndex;var t=null==e.pageSize?this._pageSize:e.pageSize;null==this._pageSize&&(this._pageSize=t),e.pageSize=t,e.startIndex=this._startIndex;var i=this;return new Promise(function(n,o){t>0?i.dataSource.fetch(e).then(function(e){e.data.length>0?i._updateEndIndex(i._startIndex+e.data.length-1,!0):i._updateEndIndex(-1,!0),n(e)},function(e){o(e)}):n(null)})},n.PagingTableDataSource.prototype.get=function(e,t){return this.dataSource.get(e,t)},n.PagingTableDataSource.prototype.getCapability=function(e){return this.dataSource.getCapability(e)},n.PagingTableDataSource.prototype.on=function(e,t){var i,o=this,s=this.dataSource;e===n.TableDataSource.EventType.SYNC?(i=function(e){o._handleSyncEvent(e,t)},this._dataSourceWrappedEventHandlers.push({eventType:e,eventHandler:t,wrappedEventHandler:i}),s.on(e,i)):e===n.TableDataSource.EventType.ADD||e===n.TableDataSource.EventType.REMOVE||e===n.TableDataSource.EventType.CHANGE?(i=function(e){o._handleRowEvent(e,t)},this._dataSourceWrappedEventHandlers.push({eventType:e,eventHandler:t,wrappedEventHandler:i}),s.on(e,i)):e===n.TableDataSource.EventType.REFRESH||e===n.TableDataSource.EventType.RESET?(i=function(e){o._startIndex=0,t(e)},this._dataSourceWrappedEventHandlers.push({eventType:e,eventHandler:t,wrappedEventHandler:i}),s.on(e,i)):e===n.PagingModel.EventType.PAGE||e===n.PagingModel.EventType.BEFOREPAGE||e===n.PagingModel.EventType.PAGECOUNT?n.PagingTableDataSource.superclass.on.call(this,e,t):s.on(e,t)},n.PagingTableDataSource.prototype.off=function(e,t){e!==n.PagingModel.EventType.PAGE&&e!==n.PagingModel.EventType.PAGECOUNT||n.PagingTableDataSource.superclass.off.call(this,e,t);var i=this.dataSource;if(null!=this._dataSourceWrappedEventHandlers){var o,s=this._dataSourceWrappedEventHandlers.length;for(o=0;o<s;o++)if(this._dataSourceWrappedEventHandlers[o].eventType===e&&this._dataSourceWrappedEventHandlers[o].eventHandler===t){i.off(e,this._dataSourceWrappedEventHandlers[o].wrappedEventHandler),this._dataSourceWrappedEventHandlers.splice(o,1);break}}i.off(e,t)},n.PagingTableDataSource.prototype.sort=function(e){return this.dataSource.sort(e)},n.PagingTableDataSource.prototype.totalSize=function(){return this.dataSource.totalSize()},n.PagingTableDataSource.prototype.totalSizeConfidence=function(){return this.dataSource.totalSizeConfidence()},n.PagingTableDataSource.prototype._getPageFromStartIndex=function(){return this._pageSize>0?Math.floor(this._startIndex/this._pageSize):0},n.PagingTableDataSource.prototype._handleRowEvent=function(e,t){var i,n=[];for(i=0;i<e.indexes.length;i++){var o=e.indexes[i];void 0!==o&&("page"===this._fetchType&&(o-=this._startIndex),(o<0||o>=this._startIndex+this._pageSize)&&n.push(i))}if(n.length>0)for(n.sort(function(e,t){return e-t}),i=n.length-1;i>=0;i--)e.data.splice(n[i],1),e.indexes.splice(n[i],1),e.keys.splice(n[i],1);e.indexes.length>0&&this._updateEndIndex(e.indexes[e.indexes.length-1],!1),e.startIndex=this._startIndex,t(e)},n.PagingTableDataSource.prototype._handleSyncEvent=function(e,t){if(e.startIndex!==this._startIndex&&(this._startIndex=e.startIndex),e.data.length>0?this._updateEndIndex(e.startIndex+e.data.length-1,!0):this._updateEndIndex(-1,!0),"page"===this._fetchType){var i={};n.CollectionUtils.copyInto(i,e),i.startIndex=0,t(i)}else t(e)},n.PagingTableDataSource.prototype._updateEndIndex=function(e,t){this._endIndex=t?e:e>this._endIndex?e:this._endIndex;var i=this.totalSize();i>0&&(this._endIndex=this._endIndex>i-1?i-1:this._endIndex)},n.PagingTableDataSource.EventType={ADD:"add",REMOVE:"remove",RESET:"reset",SYNC:"sync",REFRESH:"refresh",SORT:"sort",CHANGE:"change",REQUEST:"request",ERROR:"error"};var Un={properties:{animationDuration:{type:"number"},animationOnDataChange:{type:"string",enumValues:["auto","none"],value:"none"},animationOnDisplay:{type:"string",enumValues:["alphaFade","auto","none","popIn","zoom"],value:"none"},as:{type:"string",value:""},columnCount:{type:"number"},columnWidth:{type:"number"},data:{type:"oj.DataProvider"},drilling:{type:"string",enumValues:["off","on"],value:"off"},hiddenCategories:{type:"Array<string>",writeback:!0,value:[]},highlightMatch:{type:"string",enumValues:["all","any"],value:"all"},highlightedCategories:{type:"Array<string>",writeback:!0,value:[]},hoverBehavior:{type:"string",enumValues:["dim","none"],value:"none"},hoverBehaviorDelay:{type:"number",value:200},items:{type:"Array<Object>|Promise"},layout:{type:"string",enumValues:["horizontal","vertical"],value:"horizontal"},layoutOrigin:{type:"string",enumValues:["bottomEnd","bottomStart","topEnd","topStart"],value:"topStart"},rowCount:{type:"number"},rowHeight:{type:"number"},selection:{type:"Array<any>",writeback:!0,value:[]},selectionMode:{type:"string",enumValues:["multiple","none","single"],value:"none"},tooltip:{type:"object",properties:{renderer:{type:"function",properties:{parentElement:{type:"Element"},id:{type:"any"},name:{type:"string"},count:{type:"number"},color:{type:"string"},componentElement:{type:"Element"}}}}},trackResize:{type:"string",enumValues:["off","on"],value:"on"},translations:{type:"object",value:{},properties:{componentName:{type:"string"},labelAndValue:{type:"string"},labelClearSelection:{type:"string"},labelCountWithTotal:{type:"string"},labelDataVisualization:{type:"string"},labelInvalidData:{type:"string"},labelNoData:{type:"string"},stateCollapsed:{type:"string"},stateDrillable:{type:"string"},stateExpanded:{type:"string"},stateHidden:{type:"string"},stateIsolated:{type:"string"},stateMaximized:{type:"string"},stateMinimized:{type:"string"},stateSelected:{type:"string"},stateUnselected:{type:"string"},stateVisible:{type:"string"}}}},methods:{getItem:{},getItemCount:{},getContextByNode:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojDrill:{}},extension:{}},Bn={properties:{borderColor:{type:"string",value:""},borderWidth:{type:"number",value:0},categories:{type:"Array<string>",value:[]},color:{type:"string",value:""},columnSpan:{type:"number",value:1},count:{type:"number",value:1},drilling:{type:"string",enumValues:["inherit","off","on"],value:"inherit"},name:{type:"string",value:""},rowSpan:{type:"number",value:1},shape:{type:'"circle"|"diamond"|"human"|"plus"|"rectangle"|"square"|"star"|"triangleDown"|"triangleUp"|"none"|string',value:"rectangle"},shortDesc:{type:"string",value:""},source:{type:"string",value:""},sourceHover:{type:"string",value:""},sourceHoverSelected:{type:"string",value:""},sourceSelected:{type:"string",value:""},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}}},extension:{}};n.__registerWidget("oj.ojPictoChart",$.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{animationDuration:void 0,animationOnDataChange:"none",animationOnDisplay:"none",as:"",columnCount:null,columnWidth:null,data:null,drilling:"off",hiddenCategories:[],highlightedCategories:[],highlightMatch:"all",hoverBehavior:"none",hoverBehaviorDelay:200,items:null,layout:"horizontal",layoutOrigin:"topStart",rowCount:null,rowHeight:null,selection:[],selectionMode:"none",tooltip:{renderer:null},drill:null},_CreateDvtComponent:function(e,t,i){return dvt.PictoChart.newInstance(e,t,i)},_GetSimpleDataProviderConfigs:function(){return{data:{templateName:"itemTemplate",templateElementName:"oj-picto-chart-item",resultPath:"items"}}},_ConvertLocatorToSubId:function(e){var t=e.subId;return"oj-pictochart-item"===t?t="item["+e.index+"]":"oj-pictochart-tooltip"===t&&(t="tooltip"),t},_ConvertSubIdToLocator:function(e){var t={};return 0===e.indexOf("item")?(t.subId="oj-pictochart-item",t.index=this._GetFirstIndex(e)):"tooltip"===e&&(t.subId="oj-pictochart-tooltip"),t},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-pictochart"),e},_GetChildStyleClasses:function(){var e=this._super();return e["oj-pictochart-item"]={path:"_defaultColor",property:"background-color"},e["oj-dvtbase oj-pictochart"]={path:"animationDuration",property:"ANIM_DUR"},e},_GetEventTypes:function(){return["optionChange"]},_HandleEvent:function(e){"drill"===e.type?this._trigger("drill",null,{id:e.id}):this._super(e)},getItem:function(e){return this._component.getAutomation().getItem(e)},getItemCount:function(){return this._component.getAutomation().getItemCount()},getContextByNode:function(e){var t=this.getSubIdByNode(e);return t&&"oj-pictochart-tooltip"!==t.subId?t:null},_GetComponentDeferredDataPaths:function(){return{root:["items","data"]}},_IsFlowingLayoutSupported:function(){return!0}}),Un.extension._WIDGET_NAME="ojPictoChart",n.CustomElementBridge.register("oj-picto-chart",{metadata:Un}),Bn.extension._CONSTRUCTOR=function(){},n.CustomElementBridge.register("oj-picto-chart-item",{metadata:Bn});var Fn,Vn,Gn={properties:{autoDismiss:{type:"string",enumValues:["focusLoss","none"],value:"focusLoss"},chrome:{type:"string",enumValues:["default","none"],value:"default"},initialFocus:{type:"string",enumValues:["auto","firstFocusable","none","popup"],value:"auto"},modality:{type:"string",enumValues:["modal","modeless"],value:"modeless"},position:{type:"object",properties:{at:{type:"object",properties:{horizontal:{type:"string",enumValues:["center","end","left","right","start"],value:"start"},vertical:{type:"string",enumValues:["bottom","center","top"],value:"bottom"}}},collision:{type:"string",enumValues:["fit","flip","flipcenter","flipfit","none"],value:"flip"},my:{type:"object",properties:{horizontal:{type:"string",enumValues:["center","end","left","right","start"],value:"start"},vertical:{type:"string",enumValues:["bottom","center","top"],value:"top"}}},of:{type:"string|object"},offset:{type:"object",properties:{x:{type:"number",value:0},y:{type:"number",value:0}}}}},tail:{type:"string",enumValues:["none","simple"],value:"none"},translations:{type:"object",value:{},properties:{ariaCloseSkipLink:{type:"string"},ariaFocusSkipLink:{type:"string"},ariaLiveRegionInitialFocusFirstFocusable:{type:"string"},ariaLiveRegionInitialFocusFirstFocusableTouch:{type:"string"},ariaLiveRegionInitialFocusNone:{type:"string"},ariaLiveRegionInitialFocusNoneTouch:{type:"string"}}}},methods:{open:{},close:{},isOpen:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojBeforeOpen:{},ojOpen:{},ojBeforeClose:{},ojClose:{},ojFocus:{},ojAnimateStart:{},ojAnimateEnd:{}},extension:{}};Fn=["oj-left","oj-center","oj-right","oj-top","oj-middle","oj-bottom"],Vn={"right-top":"oj-right oj-top","right-middle":"oj-right oj-middle","right-bottom":"oj-right oj-bottom","left-top":"oj-left oj-top","left-middle":"oj-left oj-middle","left-bottom":"oj-left oj-bottom","center-top":"oj-center oj-top","center-middle":"oj-left oj-middle","center-bottom":"oj-center oj-bottom"},n.__registerWidget("oj.ojPopup",$.oj.baseComponent,{widgetEventPrefix:"oj",options:{animation:null,autoDismiss:"focusLoss",chrome:"default",initialFocus:"auto",position:{my:{horizontal:"start",vertical:"top"},offset:{x:0,y:0},at:{horizontal:"start",vertical:"bottom"},of:void 0,collision:"flip"},tail:"none",modality:"modeless",role:"tooltip",beforeOpen:null,open:null,beforeClose:null,close:null,focus:null,animateStart:null,animateEnd:null},_ComponentCreate:function(){this._super();var e=this._getRootStyle(),t=this.element;t.hide().addClass(e).attr("aria-hidden","true"),t.addClass("oj-component");var i=$("<div>");i.addClass([e,"content"].join("-")),i.attr("role","presentation"),i.append(t[0].childNodes),i.appendTo(t),this._content=i,this._setChrome(),this._setupFocus(t);var o=this.options;o.position=n.PositionUtils.coerceToJet(o.position)},_AfterCreate:function(){this._super(),this.element.uniqueId(),this._createTail()},_destroy:function(){n.ZOrderUtils.getStatus(this.element)===n.ZOrderUtils.STATUS.OPEN&&this._closeImplicitly(),this._setWhenReady("none"),this._destroyTail(),delete this._popupServiceEvents;var e=this.element;e.hide().attr("aria-hidden","true").removeUniqueId();var t=this._content;delete this._content,e.append(t[0].childNodes),t.remove();var i=this._closeDelayTimer;i&&(delete this._closeDelayTimer,i()),this._super()},open:function(e,t){if(!this._isOperationPending("open",[e,t])){n.ZOrderUtils.getStatus(this.element)===n.ZOrderUtils.STATUS.OPEN&&this._closeImplicitly();var i=this.element,o=n.ZOrderUtils.getStatus(i);if(o===n.ZOrderUtils.STATUS.CLOSE||o===n.ZOrderUtils.STATUS.UNKNOWN)if(n.ZOrderUtils.setStatus(i,n.ZOrderUtils.STATUS.BEFORE_OPEN),!1!==this._trigger("beforeOpen")){this._setWhenReady("open"),this._setLauncher(e);var s=this._launcher,r=this.options;(t=t||r.position).of||(this._hasPositionOfLauncherOverride=!0,t.of=s),this._setPosition(t),this._setAutoDismiss(r.autoDismiss),this._addDescribedBy(),this._IsCustomElement()&&i[0].hasAttribute("role")||i.attr("role",r.role);var a=this._getPositionAsJqUi(),l=this._getRootStyle(),u=[l,"layer"].join("-"),d=r.tail;"none"!==d&&(u+=" "+[l,"tail",d].join("-"));var h={};h[n.PopupService.OPTION.POPUP]=i,h[n.PopupService.OPTION.LAUNCHER]=s,h[n.PopupService.OPTION.POSITION]=a,h[n.PopupService.OPTION.EVENTS]=this._getPopupServiceEvents(),h[n.PopupService.OPTION.LAYER_SELECTORS]=u,h[n.PopupService.OPTION.MODALITY]=r.modality,h[n.PopupService.OPTION.CUSTOM_ELEMENT]=this._IsCustomElement(),n.PopupService.getInstance().open(h)}else n.ZOrderUtils.setStatus(this.element,o)}},_beforeOpenHandler:function(e){var t=e[n.PopupService.OPTION.POPUP],i=e[n.PopupService.OPTION.POSITION];t.show(),t.position(i);var o=this.options.animation;if(o&&o.open){var s=o.actionPrefix,r=s?[s,"open"].join("-"):"open";return vi.startAnimation(t[0],r,n.PositionUtils.addTransformOriginAnimationEffectsOption(t,o.open),this)}},_afterOpenHandler:function(e){var t=e[n.PopupService.OPTION.POPUP],i=e[n.PopupService.OPTION.LAUNCHER];this._initVoiceOverAssist(),this._trigger("open"),this._intialFocus(),this._on(t,{keydown:this._keyHandler,keyup:this._keyHandler}),i&&i.length>0&&this._on(i,{keydown:this._keyHandler,keyup:this._keyHandler})},_GetContextMenu:function(){if(!this._IsCustomElement())return this._super();var e=n.BaseCustomElementBridge.getSlotMap(this._content[0]).contextMenu;return e&&e.length>0?e[0]:void 0},close:function(){if(!this._isOperationPending("close",[])){var e=this.element,t=n.ZOrderUtils.getStatus(e);if(t===n.ZOrderUtils.STATUS.OPEN)if(n.ZOrderUtils.setStatus(e,n.ZOrderUtils.STATUS.BEFORE_CLOSE),!1!==this._trigger("beforeClose")||this._ignoreBeforeCloseResultant){this._setWhenReady("close");var i=this._launcher;this._off(e,"keydown keyup"),i&&i.length>0&&this._off(i,"keydown keyup"),this._restoreFocus(),this._destroyVoiceOverAssist();var o={};o[n.PopupService.OPTION.POPUP]=e,n.PopupService.getInstance().close(o)}else n.ZOrderUtils.setStatus(e,t)}},_beforeCloseHandler:function(e){var t=e[n.PopupService.OPTION.POPUP],i=this.options.animation;if(!this._ignoreBeforeCloseResultant&&i&&i.close){var o=t.attr("style"),s=i.actionPrefix,r=s?[s,"close"].join("-"):"close";return vi.startAnimation(t[0],r,n.PositionUtils.addTransformOriginAnimationEffectsOption(t,i.close),this).then(function(){t.attr("style",o),t.hide()})}t.hide()},_afterCloseHandler:function(e){this._removeDescribedBy(),this._setAutoDismiss(),delete this._launcher,this._trigger("close"),this._hasPositionOfLauncherOverride&&(this.options.position.of=null,delete this._hasPositionOfLauncherOverride)},isOpen:function(){var e=n.ZOrderUtils.getStatus(this.element);return e===n.ZOrderUtils.STATUS.OPENING||e===n.ZOrderUtils.STATUS.OPEN||e===n.ZOrderUtils.STATUS.BEFORE_CLOSE||e===n.ZOrderUtils.STATUS.CLOSING},refresh:function(){if(this._super(),n.ZOrderUtils.getStatus(this.element)===n.ZOrderUtils.STATUS.OPEN&&this._reposition()){var e=this.element;n.PopupService.getInstance().triggerOnDescendents(e,n.PopupService.EVENT.POPUP_REFRESH)}},_setOption:function(e,t){var i=this.options;switch(e){case"tail":t!==i.tail&&this._setTail(t);break;case"chrome":t!==i.chrome&&this._setChrome(t);break;case"position":return this._setPosition(t),void this.refresh();case"autoDismiss":n.ZOrderUtils.getStatus(this.element)===n.ZOrderUtils.STATUS.OPEN&&t!==i.autoDismiss&&this._setAutoDismiss(t);break;case"modality":if(n.ZOrderUtils.getStatus(this.element)===n.ZOrderUtils.STATUS.OPEN){var o=this.element,s={};s[n.PopupService.OPTION.POPUP]=o,s[n.PopupService.OPTION.MODALITY]=t,n.PopupService.getInstance().changeOptions(s)}}this._superApply(arguments)},_getRootStyle:function(){return"oj-popup"},_setTail:function(e){this._destroyTail(),this._createTail(e),this._reposition()},_createTail:function(e){var t=e||this.options.tail;if("none"!==t){var i=this._getRootStyle(),o=[i,"tail"].join("-"),s=[o,t].join("-"),r=$("<div>").hide();r.addClass(o).addClass(s),r.attr("role","presentation"),this._tailId=r.attr("id",this._getSubId("tail")).attr("id");var a=this.element;if(r.appendTo(a),a.addClass(s),n.ZOrderUtils.getStatus(this.element)===n.ZOrderUtils.STATUS.OPEN){var l=[i,"layer"].join("-");l+=" "+s;var u={};u[n.PopupService.OPTION.POPUP]=a,u[n.PopupService.OPTION.LAYER_SELECTORS]=l,n.PopupService.getInstance().changeOptions(u)}}},_getTail:function(){var e=this._tailId;return e?$(document.getElementById(e)):null},_destroyTail:function(){var e=this._getTail();e&&e.remove(),delete this._tailId;var t=this.options.tail,i=this._getRootStyle(),o=[i,"tail",t].join("-"),s=this.element;if(s.removeClass(o),n.ZOrderUtils.getStatus(this.element)===n.ZOrderUtils.STATUS.OPEN){var r=[i,"layer"].join("-"),a={};a[n.PopupService.OPTION.POPUP]=s,a[n.PopupService.OPTION.LAYER_SELECTORS]=r,n.PopupService.getInstance().changeOptions(a)}},_setChrome:function(e){var t=e||this.options.chrome,i=[this._getRootStyle(),"no-chrome"].join("-"),n=this.element;"default"===t&&n.hasClass(i)?n.removeClass(i):"none"!==t||n.hasClass(i)||n.addClass(i)},_setLauncher:function(e){var t=e;if(t?"string"===$.type(t)?t=$(t):1===t.nodeType&&(t=$(t)):t=$(document.activeElement),t instanceof $&&t.length>1)for(var i=this.element,o=0;o<t.length;o++){var s=t[0];if(!n.DomUtils.isAncestorOrSelf(i[0],s)){t=$(s);break}}else t instanceof $&&!(t instanceof $&&0===t.length)||(t=$(document.activeElement));this._launcher=t},_setPosition:function(e){var t=this.options;e&&(t.position=n.PositionUtils.coerceToJet(e,t.position))},_getPositionAsJqUi:function(){var e=this.options,t=n.PositionUtils.coerceToJqUi(e.position),i="rtl"===this._GetReadingDirection(),o=(t=n.PositionUtils.normalizeHorizontalAlignment(t,i)).using;return o=$.isFunction(o)?o:null,t.using=this._usingHandler.bind(this,o),t},_resolveBusyStateAndCloseImplicitly:function(e){e(),delete this._closeDelayTimer,this._closeImplicitly()},_resolveBusyStateAndCancelDelayedClosure:function(e,t){window.clearTimeout(e),t()},_usingHandler:function(e,t,i){var o=i.element.element;if(t.top!==o.css("top")||t.left!==o.css("left")){var s=this._getTail();if(s){s.hide();for(var r=0;r<Fn.length;r++)s.removeClass(Fn[r]),o.removeClass(Fn[r]);if(s.removeAttr("style"),i.target&&0===i.target.height&&0===i.target.width){var a="rtl"===this._GetReadingDirection(),l=n.PositionUtils.normalizeHorizontalAlignment(this.options.position,a).my;if(!n.StringUtils.isEmptyOrUndefined(l)){var u="center"===l.horizontal?l.horizontal:i.horizontal,d="center"===l.vertical?"middle":l.vertical;i.horizontal=u,i.vertical=d}}var h,p,_=[i.horizontal,i.vertical].join("-"),m=Vn[_];if(s.addClass(m),o.addClass(m),s.show(),"left"===i.horizontal?(h=s.outerWidth(),h-=h+n.DomUtils.getCSSLengthAsInt(s.css("left")),t.left+=h-2):"right"===i.horizontal&&(h=s.outerWidth(),h-=h+n.DomUtils.getCSSLengthAsInt(s.css("right")),t.left-=h-2),"top"===i.vertical?(p=s.outerHeight(),p-=p+n.DomUtils.getCSSLengthAsInt(s.css(i.vertical)),t.top+=p-2):"bottom"===i.vertical&&(p=s.outerHeight(),p-=p+n.DomUtils.getCSSLengthAsInt(s.css(i.vertical)),t.top-=p-2),o.css(t),"center"===i.horizontal&&"middle"!==i.vertical){var g=o.width(),f=Math.round((g/2-s.outerWidth()/2)/g*100);s.css({left:f+"%"})}else if("middle"===i.vertical){var v=o.height(),y=Math.round((v/2-s.outerHeight()/2)/v*100);s.css({top:y+"%"})}}else o.css(t);if(n.PositionUtils.captureTransformOriginAnimationEffectsOption(o,i),e&&e(t,i),"focusLoss"===this.options.autoDismiss&&n.PositionUtils.isAligningPositionClipped(i)){this._ignoreRestoreFocus=!0;var b=c.getContext(this.element[0]).getBusyContext(),C={description:["ojPopup identified by '",this.element.attr("id"),"' is pending implicit closure."].join("")},S=b.addBusyState(C),E=window.setTimeout(this._resolveBusyStateAndCloseImplicitly.bind(this,S),0);this._closeDelayTimer=this._resolveBusyStateAndCancelDelayedClosure.bind(this,E,S)}}},_reposition:function(){var e=this.element,t=this._getPositionAsJqUi();if(n.StringUtils.isString(t.of)){var i=$(t.of);if(0===i.length)return!1;t.of=i}return e.position(t),!0},_intialFocus:function(e){var t=this._deriveInitialFocus();(e||"none"!==t)&&(this.GetFocusElement().focus(),this._trigger("focus"))},GetFocusElement:function(){var e=document.activeElement;if(e&&this._isFocusInPopup(e))return e;var t,i=this._deriveInitialFocus();if("none"===i&&(i="popup"),"firstFocusable"===i){for(var o=this._content.find(":focusable"),s=0;s<o.length;s++)if(n.FocusUtils.isFocusable(o[s])){t=$(o[s]);break}t||(i="popup")}if("popup"===i){var r=this._closeSkipLink;r?t=r.getLink():(t=this.element).attr("tabindex","-1")}return t[0]},_deriveInitialFocus:function(){var e=this.options,t=e.initialFocus;return"auto"===t&&(t="modal"===e.modality?n.DomUtils.isTouchSupported()?"popup":"firstFocusable":"none"),t},_isFocusInPopup:function(e,t){if(e||(e=document.activeElement),!e)return!1;var i=this.element;return t&&(i=i.parent()),n.DomUtils.isAncestorOrSelf(i[0],e)},_isFocusInLauncher:function(e){e||(e=document.activeElement);var t=this._launcher;return n.DomUtils.isAncestorOrSelf(t[0],e)},_restoreFocus:function(){this._ignoreRestoreFocus?delete this._ignoreRestoreFocus:this._isFocusInPopup(null,!0)&&this._launcher.focus()},_keyHandler:function(e){if(!e.isDefaultPrevented()){var t=e.type,i=this._content,n=e.target;if("keyup"===t&&e.keyCode===$.ui.keyCode.ESCAPE&&(this._isFocusInPopup(n)||this._isFocusInLauncher(n)))e.preventDefault(),this.close();else if("keydown"===t&&117===e.keyCode)this._isFocusInPopup(n)?"modeless"===this.options.modality?(e.preventDefault(),this._launcher.focus()):this.close():this._isFocusInLauncher(n)&&(e.preventDefault(),this._intialFocus(!0));else if("keydown"===t&&e.keyCode===$.ui.keyCode.TAB&&this._isFocusInPopup(n)){var o=i.find(":tabbable");if(o.length>0){var s=o[0],r=o[o.length-1],a=this.element;s!==n&&a[0]!==n||!e.shiftKey?r!==n||e.shiftKey||(e.preventDefault(),r===s?(a.attr("tabindex","-1"),a.focus()):$(s).focus()):(e.preventDefault(),s===r&&s===n?(a.attr("tabindex","-1"),a.focus()):$(r).focus())}else e.preventDefault(),"modeless"===this.options.modality?this._launcher.focus():this.close()}}},_setAutoDismiss:function(e){var t=this._focusLossCallback,i=this._getPopupServiceEvents();if(t&&(delete i[n.PopupService.EVENT.POPUP_AUTODISMISS],delete this._focusLossCallback),"focusLoss"===e&&(t=this._dismissalHandler.bind(this),this._focusLossCallback=t,i[n.PopupService.EVENT.POPUP_AUTODISMISS]=t),n.ZOrderUtils.getStatus(this.element)===n.ZOrderUtils.STATUS.OPEN){var o=this.element,s={};s[n.PopupService.OPTION.POPUP]=o,s[n.PopupService.OPTION.EVENTS]=i,n.PopupService.getInstance().changeOptions(s)}},_dismissalHandler:function(e){if(n.ZOrderUtils.getStatus(this.element)===n.ZOrderUtils.STATUS.OPEN){var t=this._launcher,i=this.element.parent(),o=e.target,s=this._focusSkipLink;if(s){var r=s.getLink();if(r&&n.DomUtils.isAncestorOrSelf(r[0],o))return}if(!n.DomUtils.isAncestorOrSelf(t[0],o)&&!n.DomUtils.isAncestorOrSelf(i[0],o)){if(n.FocusUtils.isFocusable(o)){if("mousedown"===e.type||"touchstart"===e.type)return;this._ignoreRestoreFocus=!0}this.close()}}},_addDescribedBy:function(){var e=this._launcher,t=this.element.attr("id"),i=e.attr("aria-describedby"),n=i?i.split(/\s+/):[];n.push(t),i=$.trim(n.join(" ")),e.attr("aria-describedby",i)},_removeDescribedBy:function(){var e=this._launcher,t=this.element;if(e&&0!==e.length){var i=t.attr("id"),n=e.attr("aria-describedby"),o=n?n.split(/\s+/):[],s=$.inArray(i,o);-1!==s&&o.splice(s,1),(n=$.trim(o.join(" ")))?e.attr("aria-describedby",n):e.removeAttr("aria-describedby")}},_initVoiceOverAssist:function(){var e,t=n.AgentUtils.getAgentInfo().os===n.AgentUtils.OS.IOS||n.AgentUtils.getAgentInfo().os===n.AgentUtils.OS.ANDROID,i=this._liveRegion;i||(i=new n.PopupLiveRegion,this._liveRegion=i);var o=this._deriveInitialFocus();if(e=t?this.getTranslatedString("none"===o?"ariaLiveRegionInitialFocusNoneTouch":"ariaLiveRegionInitialFocusFirstFocusableTouch"):this.getTranslatedString("none"===o?"ariaLiveRegionInitialFocusNone":"ariaLiveRegionInitialFocusFirstFocusable"),i.announce(e),t){var s=this._getSubId("focusSkipLink"),r=this._launcher,a=this._intialFocus.bind(this,!0);e=this.getTranslatedString("ariaFocusSkipLink"),this._focusSkipLink=new n.PopupSkipLink(r,e,a,s);var l=this._content,u=this._getSubId("closeSkipLink");a=this._closeImplicitly.bind(this),e=this.getTranslatedString("ariaCloseSkipLink"),this._closeSkipLink=new n.PopupSkipLink(l,e,a,u)}},_destroyVoiceOverAssist:function(){this._liveRegion.destroy(),delete this._liveRegion;var e=this._focusSkipLink;e&&(e.destroy(),delete this._focusSkipLink);var t=this._closeSkipLink;t&&(t.destroy(),delete this._closeSkipLink)},_getSubId:function(e){var t=this.element.attr("id");return n.StringUtils.isEmptyOrUndefined(t)&&(t=this.uuid),[t,e].join("_")},_surrogateRemoveHandler:function(){var e=this.element;n.ZOrderUtils.getStatus(e)===n.ZOrderUtils.STATUS.OPEN&&e.remove()},_getPopupServiceEvents:function(){if(!this._popupServiceEvents){var e={};this._popupServiceEvents=e,e[n.PopupService.EVENT.POPUP_CLOSE]=this._closeImplicitly.bind(this),e[n.PopupService.EVENT.POPUP_REMOVE]=this._surrogateRemoveHandler.bind(this),e[n.PopupService.EVENT.POPUP_REFRESH]=this.refresh.bind(this),e[n.PopupService.EVENT.POPUP_BEFORE_OPEN]=this._beforeOpenHandler.bind(this),e[n.PopupService.EVENT.POPUP_AFTER_OPEN]=this._afterOpenHandler.bind(this),e[n.PopupService.EVENT.POPUP_BEFORE_CLOSE]=this._beforeCloseHandler.bind(this),e[n.PopupService.EVENT.POPUP_AFTER_CLOSE]=this._afterCloseHandler.bind(this)}return this._popupServiceEvents},_closeImplicitly:function(){this._ignoreBeforeCloseResultant=!0,this.close(),delete this._ignoreBeforeCloseResultant},_setWhenReady:function(e){var t=this._whenReadyMediator;t&&(t.destroy(),delete this._whenReadyMediator),["open","close"].indexOf(e)<0||(this._whenReadyMediator=new n.PopupWhenReadyMediator(this.element,e,"ojPopup",this._IsCustomElement()))},_isOperationPending:function(e,t){var i=this._whenReadyMediator;return!!i&&i.isOperationPending(this,e,e,t)},_setupFocus:function(e){var t=this;this._focusable({applyHighlight:!0,setupHandlers:function(i,n){t._on(e,{focus:function(e){i($(e.currentTarget))},blur:function(e){n($(e.currentTarget))}})}})},_NotifyDetached:function(){n.ZOrderUtils.getStatus(this.element)===n.ZOrderUtils.STATUS.OPEN&&this._closeImplicitly(),this._super()}}),w.setDefaultOptions({ojPopup:{modality:w.createDynamicPropertyGetter(function(){return(_.parseJSONFromFontFamily("oj-popup-option-defaults")||{}).modality}),animation:w.createDynamicPropertyGetter(function(){return(_.parseJSONFromFontFamily("oj-popup-option-defaults")||{}).animation})}}),Gn.extension._WIDGET_NAME="ojPopup",n.CustomElementBridge.register("oj-popup",{metadata:Gn}),n.PopupService=function(){this.Init()},n.Object.createSubclass(n.PopupService,n.Object,"oj.PopupService"),n.PopupService.prototype.Init=function(){n.PopupService.superclass.Init.call(this)},n.PopupService.getInstance=function(e){return n.PopupService._popupService||(n.PopupService._popupService=new n.PopupServiceImpl),n.PopupService._popupService},n.PopupService.prototype.open=function(e){n.Assert.failedInAbstractFunction()},n.PopupService.prototype.close=function(e){n.Assert.failedInAbstractFunction()},n.PopupService.prototype.changeOptions=function(e){n.Assert.failedInAbstractFunction()},n.PopupService.prototype.triggerOnDescendents=function(e,t,i){n.Assert.failedInAbstractFunction()},n.PopupService.prototype.destroy=function(){n.PopupService._popupService=null},n.PopupService.MODALITY={NONE:"none",MODAL:"modal",MODELESS:"modeless"},n.PopupService.EVENT={POPUP_REMOVE:"ojPopupRemove",POPUP_CLOSE:"ojPopupClose",POPUP_REFRESH:"ojPopupRefresh",POPUP_AUTODISMISS:"ojPopupAutoDismiss",POPUP_BEFORE_OPEN:"ojPopupBeforeOpen",POPUP_AFTER_OPEN:"ojPopupAfterOpen",POPUP_BEFORE_CLOSE:"ojPopupBeforeClose",POPUP_AFTER_CLOSE:"ojPopupAfterClose"},n.PopupService.LAYER_LEVEL={TOP_LEVEL:"topLevel",NEAREST_ANCESTOR:"nearestAncestor"},n.PopupService.OPTION={POPUP:"popup",EVENTS:"events",MODALITY:"modality",LAUNCHER:"launcher",POSITION:"position",LAYER_SELECTORS:"layerSelectors",LAYER_LEVEL:"layerLevel",CONTEXT:"context",CUSTOM_ELEMENT:"customElement"},n.PopupServiceImpl=function(){this.Init()},n.Object.createSubclass(n.PopupServiceImpl,n.PopupService,"oj.PopupServiceImpl"),n.PopupServiceImpl.prototype.open=function(t){n.Assert.assertObject(t);var i=t[n.PopupService.OPTION.POPUP];n.Assert.assertPrototype(i,$);var o=n.ZOrderUtils.getStatus(i);if(o===n.ZOrderUtils.STATUS.UNKNOWN||o===n.ZOrderUtils.STATUS.BEFORE_OPEN||o===n.ZOrderUtils.STATUS.CLOSE){var s=t[n.PopupService.OPTION.LAUNCHER];n.Assert.assertPrototype(s,$);var r=t[n.PopupService.OPTION.POSITION];n.Assert.assertObjectOrNull(r);var a=t[n.PopupService.OPTION.EVENTS];n.Assert.assertObject(a);var l=t[n.PopupService.OPTION.MODALITY];(!l||n.PopupService.MODALITY.MODELESS!==l&&n.PopupService.MODALITY.MODAL!==l)&&(l=n.PopupService.MODALITY.NONE);var u=t[n.PopupService.OPTION.LAYER_SELECTORS];n.Assert.assertString(u);var d=t[n.PopupService.OPTION.CUSTOM_ELEMENT],h=t[n.PopupService.OPTION.LAYER_LEVEL];(!h||n.PopupService.LAYER_LEVEL.TOP_LEVEL!==h&&n.PopupService.LAYER_LEVEL.NEAREST_ANCESTOR!==h)&&(h=n.PopupService.LAYER_LEVEL.NEAREST_ANCESTOR);var c=a[n.PopupService.EVENT.POPUP_BEFORE_OPEN];c&&$.isFunction(c)||(c=n.PopupServiceImpl._defaultBeforeOpenCallback);var p=a[n.PopupService.EVENT.POPUP_AFTER_OPEN];n.ZOrderUtils.setStatus(i,n.ZOrderUtils.STATUS.OPENING),n.DomUtils.setLogicalParent(i,s),n.ZOrderUtils.addToAncestorLayer(i,s,l,u,h,d);var _,m=function(){try{i.removeAttr("aria-hidden"),this._assertEventSink(),w.subtreeShown(i[0])}catch(t){e.error("Error opening popup:\n%o",t)}finally{n.ZOrderUtils.setStatus(i,n.ZOrderUtils.STATUS.OPEN),p&&p(t);var o=n.ZOrderUtils.getFirstAncestorLayer(i);if(n.Assert.assertPrototype(o,$),n.ZOrderUtils.applyEvents(o,a),!n.ZOrderUtils._getSurrogate(o)&&$.isFunction(a[n.PopupService.EVENT.POPUP_REMOVE]))(0,a[n.PopupService.EVENT.POPUP_REMOVE])()}};m=m.bind(this);try{_=c(t)}catch(t){e.error("Error before open popup:\n%o",t)}finally{_&&_ instanceof Promise?_.then(m):m()}}else this._assertEventSink()},n.PopupServiceImpl._defaultBeforeOpenCallback=function(e){var t=e[n.PopupService.OPTION.POPUP];n.Assert.assertPrototype(t,$);var i=e[n.PopupService.OPTION.POSITION];t.show(),i&&t.position(i)},n.PopupServiceImpl.prototype.close=function(t){n.Assert.assertObject(t);var i=t[n.PopupService.OPTION.POPUP];n.Assert.assertPrototype(i,$);var o=n.ZOrderUtils.getOpenPopupLayer(i);n.Assert.assertPrototype(o,$);var s=t[n.PopupService.OPTION.EVENTS];s?s=$.extend(n.ZOrderUtils.getEvents(o),s):(s=n.ZOrderUtils.getEvents(o),t[n.PopupService.OPTION.EVENTS]=s);var r=n.ZOrderUtils.getStatus(i);if(r!==n.ZOrderUtils.STATUS.OPEN&&r!==n.ZOrderUtils.STATUS.BEFORE_CLOSE||!s)this._assertEventSink();else{var a=s[n.PopupService.EVENT.POPUP_BEFORE_CLOSE];a&&$.isFunction(a)||(a=n.PopupServiceImpl._defaultBeforeCloseCallback);var l=s[n.PopupService.EVENT.POPUP_AFTER_CLOSE];n.ZOrderUtils.setStatus(i,n.ZOrderUtils.STATUS.CLOSING),n.ZOrderUtils.applyEvents(o,{});var u,d=function(){try{i.hide(),i.attr("aria-hidden","true"),i.css({top:"auto",bottom:"auto",left:"auto",right:"auto"}),n.ZOrderUtils.removeFromAncestorLayer(i),n.DomUtils.setLogicalParent(i,null),this._assertEventSink(),w.subtreeHidden(i[0])}catch(t){e.error("Error closing popup:\n%o",t)}finally{n.ZOrderUtils.setStatus(i,n.ZOrderUtils.STATUS.CLOSE),l&&$.isFunction(l)&&l(t)}};d=d.bind(this);try{u=a(t)}catch(t){e.error("Error before close popup:\n%o",t)}finally{u&&u instanceof Promise?u.then(d):d()}}},n.PopupServiceImpl._defaultBeforeCloseCallback=function(e){var t=e[n.PopupService.OPTION.POPUP];n.Assert.assertPrototype(t,$),t.hide()},n.PopupServiceImpl.prototype.changeOptions=function(e){n.Assert.assertObject(e);var t=e[n.PopupService.OPTION.POPUP];if(n.Assert.assertPrototype(t,$),n.ZOrderUtils.getStatus(t)===n.ZOrderUtils.STATUS.OPEN){var i=n.ZOrderUtils.getOpenPopupLayer(t);n.Assert.assertPrototype(i,$);var o=e[n.PopupService.OPTION.EVENTS];o&&n.ZOrderUtils.applyEvents(i,o);var s=e[n.PopupService.OPTION.MODALITY];s&&n.ZOrderUtils.applyModality(i,s);var r=e[n.PopupService.OPTION.LAYER_SELECTORS];n.StringUtils.isEmptyOrUndefined(r)||i.attr("class",r)}},n.PopupServiceImpl.prototype.triggerOnDescendents=function(e,t,i){if(n.ZOrderUtils.isPopupOpen(e)){var o={};o.event=t,o.argsArray=i;var s=n.ZOrderUtils.getFirstAncestorLayer(e);n.ZOrderUtils.postOrderVisit(s,this._triggerOnDescendentsVisitCallback,o)}},n.PopupServiceImpl.prototype._triggerOnDescendentsVisitCallback=function(e,t){var i=t.event,o=t.argsArray,s=n.ZOrderUtils.getEvents(e);return s&&$.isFunction(s[i])&&s[i].apply(this,o),n.ZOrderUtils.VISIT_RESULT.ACCEPT},n.PopupServiceImpl.prototype._assertEventSink=function(){var e,t,i,o=n.ZOrderUtils.hasPopupsOpen(),s=this._callbackEventFilter;if(!o&&s){for(window.removeEventListener("resize",n.PopupServiceImpl._refreshCallback,!0),window.removeEventListener("scroll",n.PopupServiceImpl._refreshCallback,!0),(t=document.documentElement).removeEventListener("mousewheel",n.PopupServiceImpl._refreshCallback,!0),t.removeEventListener("DOMMouseScroll",n.PopupServiceImpl._refreshCallback,!0),this._callbackEventFilter=null,e=0;e<n.PopupServiceImpl._REDISTRIBUTE_EVENTS.length;e++)i=n.PopupServiceImpl._REDISTRIBUTE_EVENTS[e],t.removeEventListener(i,s,!0);var r=this._simpleTapRecognizer;r&&(r.destroy(),this._simpleTapRecognizer=null)}else if(o&&!s){for(window.addEventListener("resize",n.PopupServiceImpl._refreshCallback,!0),window.addEventListener("scroll",n.PopupServiceImpl._refreshCallback,!0),(t=document.documentElement).addEventListener("mousewheel",n.PopupServiceImpl._refreshCallback,!0),t.addEventListener("DOMMouseScroll",n.PopupServiceImpl._refreshCallback,!0),s=this._eventFilterCallback.bind(this),this._callbackEventFilter=s,e=0;e<n.PopupServiceImpl._REDISTRIBUTE_EVENTS.length;e++)i=n.PopupServiceImpl._REDISTRIBUTE_EVENTS[e],t.addEventListener(i,s,!0);n.DomUtils.isTouchSupported()&&(this._simpleTapRecognizer=new n.SimpleTapRecognizer(s))}},n.PopupServiceImpl.prototype._eventFilterCallback=function(e){var t=$(e.target);if(n.ZOrderUtils.hasPopupsOpen()){if(!n.DomUtils.isChromeEvent(e)&&("focus"!==e.type||t.is(":focusable"))){var i=n.ZOrderUtils.getDefaultLayer();if("keydown"!==e.type||!n.ZOrderUtils.hasModalDialogOpen()||n.DomUtils.isAncestor(i[0],t[0])){var o,s=n.ZOrderUtils.getFirstAncestorLayer(t);if(i[0]!==s[0]?s.hasClass(n.PopupServiceImpl._FOCUS_WITHIN_SELECTOR)||((o=this._lastFocusLayer)&&o.removeClass(n.PopupServiceImpl._FOCUS_WITHIN_SELECTOR),s.addClass(n.PopupServiceImpl._FOCUS_WITHIN_SELECTOR),this._lastFocusLayer=s):(o=this._lastFocusLayer)&&(o.removeClass(n.PopupServiceImpl._FOCUS_WITHIN_SELECTOR),this._lastFocusLayer=null),"focus"!==e.type||"-1"!==t.attr("tabindex")){for(var r={},a=n.PopupServiceImpl._COPY_SAFE_EVENT_PROPERTIES,l={},u=0;u<a.length;u++){var d=a[u],h=e[d];void 0===h||$.isFunction(h)||(l[d]=h)}r.event=$.Event(e,l),n.ZOrderUtils.postOrderVisit(i,n.PopupServiceImpl._redistributeVisitCallback,r)}}else n.ZOrderUtils.eatEvent(e)}}else this._assertEventSink()},n.PopupServiceImpl._redistributeVisitCallback=function(e,t){var i=n.ZOrderUtils.getEvents(e),o=t.event;return i&&$.isFunction(i[n.PopupService.EVENT.POPUP_AUTODISMISS])&&i[n.PopupService.EVENT.POPUP_AUTODISMISS](o),n.ZOrderUtils.VISIT_RESULT.ACCEPT},n.PopupServiceImpl._refreshCallback=function(e){var t=n.PopupServiceImpl._refreshTimerId;isNaN(t)&&(n.PopupServiceImpl._refreshTimerId=window.setTimeout(function(){n.PopupServiceImpl._refreshTimerId=Number.NaN;var e=n.ZOrderUtils.getDefaultLayer();$.isFunction(window.requestAnimationFrame)?n.PopupServiceImpl._afRequestId=window.requestAnimationFrame(function(){n.PopupServiceImpl._afRequestId=null,n.ZOrderUtils.postOrderVisit(e,n.PopupServiceImpl._refreshVisitCallback)}):n.ZOrderUtils.postOrderVisit(e,n.PopupServiceImpl._refreshVisitCallback)},n.PopupServiceImpl._REFRESH_DELAY))},n.PopupServiceImpl._refreshVisitCallback=function(e,t){if(t.level>0)return n.ZOrderUtils.VISIT_RESULT.REJECT;var i=n.ZOrderUtils.getEvents(e);return i&&$.isFunction(i[n.PopupService.EVENT.POPUP_REFRESH])&&i[n.PopupService.EVENT.POPUP_REFRESH](),n.ZOrderUtils.VISIT_RESULT.ACCEPT},n.PopupServiceImpl.prototype.destroy=function(){n.PopupServiceImpl.superclass.destroy.call(this)},n.PopupServiceImpl._FOCUS_WITHIN_SELECTOR="oj-focus-within",n.PopupServiceImpl._REDISTRIBUTE_EVENTS=["focus","mousedown","keydown"],n.PopupServiceImpl._COPY_SAFE_EVENT_PROPERTIES=["altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","relatedTarget","shiftKey","target","timeStamp","view","which","button","buttons","clientX","clientY","offsetX","offsetY","pageX","pageY","screenX","screenY","toElement","char","charCode","key","keyCode"],n.PopupServiceImpl._REFRESH_DELAY=10,n.ZOrderUtils={},n.ZOrderUtils.STATUS={UNKNOWN:0,BEFORE_OPEN:.5,OPENING:1,OPEN:2,BEFORE_CLOSE:2.5,CLOSING:3,CLOSE:4},n.ZOrderUtils._STATUS_DATA="oj-popup-status",n.ZOrderUtils.getStatus=function(e){e instanceof Element&&(e=$(e));var t=e.data(n.ZOrderUtils._STATUS_DATA);return isNaN(t)?n.ZOrderUtils.STATUS.UNKNOWN:t},n.ZOrderUtils.setStatus=function(e,t){e instanceof Element&&(e=$(e)),t>n.ZOrderUtils.STATUS.UNKNOWN&&t<=n.ZOrderUtils.STATUS.CLOSE&&e.data(n.ZOrderUtils._STATUS_DATA,t)},n.ZOrderUtils.getFirstAncestorLayer=function(e){if(!e)return n.ZOrderUtils.getDefaultLayer();for(var t=e;t&&t.length>0&&t.attr(n.ZOrderUtils._SURROGATE_ATTR)!==n.ZOrderUtils._DEFAULT_LAYER_ID;){if(n.ZOrderUtils._hasSurrogate(t[0]))return t;t=t.parent()}return n.ZOrderUtils.getDefaultLayer()},n.ZOrderUtils.getDefaultLayer=function(){var e=$(document.getElementById(n.ZOrderUtils._DEFAULT_LAYER_ID));return e.length>0?e:((e=$("<div>")).attr("role","presentation"),e.attr("id",n.ZOrderUtils._DEFAULT_LAYER_ID),e.prependTo($(document.body)),e)},n.ZOrderUtils.addToAncestorLayer=function(e,t,i,o,s,r){var a=e[0];if(n.ZOrderUtils._hasSurrogate(a.parentNode))throw new Error("JET Popup is already open - id: "+a.getAttribute("id"));var l=n.ZOrderUtils.getFirstAncestorLayer(s===n.PopupService.LAYER_LEVEL.TOP_LEVEL?null:t),u=$("<div>"),d=e.attr("id");n.StringUtils.isEmptyOrUndefined(d)?u.uniqueId():u.attr("id",[d,"layer"].join("_")),u.attr("role","presentation"),u.addClass(o),e.after(u),n.ZOrderUtils._createSurrogate(u,r),w.subtreeDetached(a),e.appendTo(u),e.data(n.ZOrderUtils._LAYER_ID_DATA,u.attr("id")),u.appendTo(l),w.subtreeAttached(a),n.ZOrderUtils.applyModality(u,i)},n.ZOrderUtils._getSurrogate=function(e){var t=e.attr(n.ZOrderUtils._SURROGATE_ATTR);if(t)return document.getElementById(t)},n.ZOrderUtils.applyEvents=function(e,t,i){i||(i=$(n.ZOrderUtils._getSurrogate(e))),e.data(n.ZOrderUtils._EVENTS_DATA,t),i.length>0&&t&&$.isFunction(t[n.PopupService.EVENT.POPUP_REMOVE])&&w.setComponentOption(i[0],"beforeDestroy",t[n.PopupService.EVENT.POPUP_REMOVE])},n.ZOrderUtils.getEvents=function(e){return e.data(n.ZOrderUtils._EVENTS_DATA)},n.ZOrderUtils._createSurrogate=function(e,t){var i="script";t&&(i="oj-surrogate");var o=$(document.createElement(i)),s=e.attr("id");n.StringUtils.isEmptyOrUndefined(s)||o.attr("id",[s,"surrogate"].join("_")),t&&o.attr("data-oj-binding-provider","none"),o.insertBefore(e),t||o.ojSurrogate();var r=o.attr("id");return e.attr(n.ZOrderUtils._SURROGATE_ATTR,r),o},n.ZOrderUtils._removeSurrogate=function(e){var t=e.attr(n.ZOrderUtils._SURROGATE_ATTR);e.removeAttr(n.ZOrderUtils._SURROGATE_ATTR);var i=$(document.getElementById(t)),o=i.length>0;return o&&(e.insertAfter(i),w.setComponentOption(i[0],"beforeDestroy",null),i.remove()),o},n.ZOrderUtils.getOpenPopupLayer=function(e){var t=e.parent();if(!t||0===t.length){var i=e.data(n.ZOrderUtils._LAYER_ID_DATA);t=$(document.getElementById(i))}return t},n.ZOrderUtils.removeFromAncestorLayer=function(e){var t=n.ZOrderUtils.getOpenPopupLayer(e);n.ZOrderUtils.preOrderVisit(t,n.ZOrderUtils._closeDescendantPopupsCallback),n.ZOrderUtils._removeOverlayFromAncestorLayer(t),t.removeData(n.ZOrderUtils._EVENTS_DATA),t.removeData(n.ZOrderUtils._MODALITY_DATA),e.removeData(n.ZOrderUtils._LAYER_ID_DATA);var i=e[0];w.subtreeDetached(i),n.ZOrderUtils._removeSurrogate(t)&&i&&i.parentElement?(n.DomUtils.unwrap(e,t),w.subtreeAttached(i)):t.remove()},n.ZOrderUtils._closeDescendantPopupsCallback=function(e,t){if(t.level>0)return n.ZOrderUtils.VISIT_RESULT.REJECT;var i=e.data(n.ZOrderUtils._EVENTS_DATA);return i&&$.isFunction(i[n.PopupService.EVENT.POPUP_CLOSE])&&i[n.PopupService.EVENT.POPUP_CLOSE](),n.ZOrderUtils.VISIT_RESULT.ACCEPT},n.ZOrderUtils.applyModality=function(e,t){var i=e.data(n.ZOrderUtils._MODALITY_DATA);e.data(n.ZOrderUtils._MODALITY_DATA,t),n.StringUtils.isEmptyOrUndefined(i)?n.PopupService.MODALITY.MODAL===t?n.ZOrderUtils._addOverlayToAncestorLayer(e):n.ZOrderUtils._removeOverlayFromAncestorLayer(e):i!==t&&(t!==i&&t===n.PopupService.MODALITY.MODAL?n.ZOrderUtils._addOverlayToAncestorLayer(e):n.ZOrderUtils._removeOverlayFromAncestorLayer(e))},n.ZOrderUtils.hasModalDialogOpen=function(){for(var e=n.ZOrderUtils.getDefaultLayer().children(),t=e.length-1;t>-1;t--){if($(e[t]).hasClass(n.ZOrderUtils._OVERLAY_SELECTOR))return!0}return!1},n.ZOrderUtils._addOverlayToAncestorLayer=function(e){var t=$("<div>");t.addClass(n.ZOrderUtils._OVERLAY_SELECTOR),t.addClass(e[0].className),t.attr("role","presentation");var i=e.attr("id");n.StringUtils.isEmptyOrUndefined(i)?t.uniqueId():t.attr("id",[i,"overlay"].join("_")),e.before(t);var o=t.attr("id");e.attr(n.ZOrderUtils._OVERLAY_ATTR,o)},n.ZOrderUtils._removeOverlayFromAncestorLayer=function(e){var t=e.attr(n.ZOrderUtils._OVERLAY_ATTR);n.StringUtils.isEmptyOrUndefined(t)||(e.removeAttr(n.ZOrderUtils._OVERLAY_ATTR),$(document.getElementById(t)).remove())},n.ZOrderUtils.VISIT_RESULT={ACCEPT:0,REJECT:1,COMPLETE:2},n.ZOrderUtils._VISIT_TRAVERSAL={PRE_ORDER:0,POST_ORDER:1},n.ZOrderUtils.postOrderVisit=function(e,t,i){var o=i;i||(o={}),o.level=0,o.type=n.ZOrderUtils._VISIT_TRAVERSAL.POST_ORDER,n.ZOrderUtils._visitTree(e,t,o)},n.ZOrderUtils.preOrderVisit=function(e,t,i){var o=i;i||(o={}),o.level=0,o.type=n.ZOrderUtils._VISIT_TRAVERSAL.PRE_ORDER,n.ZOrderUtils._visitTree(e,t,o)},n.ZOrderUtils._visitTree=function(e,t,i){for(var o=i.level,s=e.children(),r=s.length-1;r>-1;r--){var a=$(s[r]);if(n.ZOrderUtils._hasSurrogate(a[0])){var l;if(i.type===n.ZOrderUtils._VISIT_TRAVERSAL.PRE_ORDER){if((l=t(a,i))===n.ZOrderUtils.VISIT_RESULT.COMPLETE)return l;if(l===n.ZOrderUtils.VISIT_RESULT.REJECT)break}if(i.level=o+1,l=n.ZOrderUtils._visitTree(a,t,i),i.level=o,l===n.ZOrderUtils.VISIT_RESULT.COMPLETE)return l;if(i.type===n.ZOrderUtils._VISIT_TRAVERSAL.POST_ORDER){if((l=t(a,i))===n.ZOrderUtils.VISIT_RESULT.COMPLETE)return l;if(l===n.ZOrderUtils.VISIT_RESULT.REJECT)break}}}return n.ZOrderUtils.VISIT_RESULT.ACCEPT},n.ZOrderUtils._hasSurrogate=function(e){return!(!e||1!==e.nodeType||!e.hasAttribute(n.ZOrderUtils._SURROGATE_ATTR))},n.ZOrderUtils.hasPopupsOpen=function(){return n.ZOrderUtils.getDefaultLayer().children().length>0},n.ZOrderUtils.getOpenPopupCount=function(){var e={popupCount:0},t=n.ZOrderUtils.getDefaultLayer();return n.ZOrderUtils.preOrderVisit(t,n.ZOrderUtils._openPopupCountCallback,e),e.popupCount},n.ZOrderUtils._openPopupCountCallback=function(e,t){return t.popupCount+=1,n.ZOrderUtils.VISIT_RESULT.ACCEPT},n.ZOrderUtils.findOpenPopups=function(){var e={},t=[];e.popups=t;var i=n.ZOrderUtils.getDefaultLayer();return n.ZOrderUtils.preOrderVisit(i,n.ZOrderUtils._openPopupsCallback,e),t=e.popups,$(t)},n.ZOrderUtils._openPopupsCallback=function(e,t){return t.popups.push(e[0]),n.ZOrderUtils.VISIT_RESULT.ACCEPT},n.ZOrderUtils.isAboveTopModalLayer=function(e){if(!e||!n.ZOrderUtils.hasPopupsOpen())return!0;var t=function(){var e={topLayer:null},t=n.ZOrderUtils.getDefaultLayer();if(n.ZOrderUtils.preOrderVisit(t,function(e,t){if(t.level>0)return n.ZOrderUtils.VISIT_RESULT.REJECT;var i=t.topLayer;return i?n.ZOrderUtils.compareStackingContexts($(e),$(i))>0&&(t.topLayer=e):t.topLayer=e,n.ZOrderUtils.VISIT_RESULT.ACCEPT},e),e.topLayer)return e.topLayer[0]}();if(!t)return!0;var i=function(e){var t={topModalPopup:null};if(e.hasAttribute(n.ZOrderUtils._OVERLAY_ATTR)&&(t.topModalPopup=$(e)),n.ZOrderUtils.postOrderVisit($(e),function(e,t){return e[0].hasAttribute(n.ZOrderUtils._OVERLAY_ATTR)?(t.topModalPopup=e,n.ZOrderUtils.VISIT_RESULT.COMPLETE):n.ZOrderUtils.VISIT_RESULT.ACCEPT},t),t.topModalPopup)return t.topModalPopup[0]}(t);return!i||(n.DomUtils.isAncestorOrSelf(i,e)||n.ZOrderUtils.compareStackingContexts($(i),$(e))<0)},n.ZOrderUtils.compareStackingContexts=function(e,t){function i(e,t){var i,o=["absolute","relative","fixed"],s=e.parents(),r=[];for(i=s.length-1;i>-1;i--)r.push($(s[i]));(s=r).push(e);var a=[],l=0;for(i=0;i<s.length;i++){var u=s[i],d=u.css("position"),h=n.DomUtils.getCSSLengthAsFloat(u.css("opacity")),c=n.DomUtils.getCSSLengthAsInt(u.css("z-index")),p=$.inArray(u[0],u.parent().children());$.inArray(d,o)>-1&&c>0?(a.push({weight:[l,c,p],order:[p]}),l+=1):h<1?(a.push({weight:[l,1,p],order:[p]}),l+=1):t&&a.push({weight:[0,0,p],order:[p]})}return a}function o(e,t){for(var i=Math.max(e.length,t.length),n=0;n<i;n++){var o=n<e.length?e[n]:0,s=n<t.length?t[n]:0;if(o!==s)return o<s?-1:1}return 0}n.Assert.assertPrototype(e,$),n.Assert.assertPrototype(t,$);var s,r,a=i(e,!1),l=i(t,!1),u=Math.max(a.length,l.length);for(s=0;s<u;s++)if(0!==(r=o(s<a.length?a[s].weight:[-1],s<l.length?l[s].weight:[-1])))return r;for(a=i(e,!0),l=i(t,!0),u=Math.max(a.length,l.length),s=0;s<u;s++)if(0!==(r=o(s<a.length?a[s].order:[-1],s<l.length?l[s].order:[-1])))return r;return 0},n.ZOrderUtils.eatEvent=function(e){e.stopPropagation(),e.preventDefault()},n.ZOrderUtils.isPopupOpen=function(e){var t=e.parent();return!(!t||1!==t.length||!n.ZOrderUtils._hasSurrogate(t[0]))},n.ZOrderUtils._EVENTS_DATA="oj-popup-events",n.ZOrderUtils._MODALITY_DATA="oj-popup-modality",n.ZOrderUtils._DEFAULT_LAYER_ID="__oj_zorder_container",n.ZOrderUtils._SURROGATE_ATTR="data-oj-surrogate-id",n.ZOrderUtils._LAYER_ID_DATA="oj-popup-layer-id",n.ZOrderUtils._OVERLAY_ATTR="data-oj-overlayid",n.ZOrderUtils._OVERLAY_SELECTOR="oj-component-overlay",n.__registerWidget("oj.ojSurrogate",$.oj.baseComponent,{version:"1.0.0",widgetEventPrefix:"oj",options:{beforeDestroy:null},_ComponentCreate:function(){this._super(),this.element.uniqueId()},_invokeBeforeDestroy:function(){var e=this.options.beforeDestroy;this.options.beforeDestroy=null,e&&e()},_destroy:function(){this._invokeBeforeDestroy(),this.element.removeUniqueId(),this._super()},_NotifyDetached:function(){this._invokeBeforeDestroy(),this._super()}});n.CustomElementBridge.register("oj-surrogate",{metadata:{properties:{beforeDestroy:{type:"function"}},extension:{_WIDGET_NAME:"ojSurrogate"}}}),n.SimpleTapRecognizer=function(e){this._tapCallback=e,this.Init()},n.Object.createSubclass(n.SimpleTapRecognizer,n.Object,"oj.SimpleTapRecognizer"),n.SimpleTapRecognizer.prototype.Init=function(){n.SimpleTapRecognizer.superclass.Init.call(this);var e=this._eventHandler.bind(this);this._eventHandlerCallback=e;for(var t=document.documentElement,i=0;i<n.SimpleTapRecognizer._TOUCHEVENTS.length;i++)t.addEventListener(n.SimpleTapRecognizer._TOUCHEVENTS[i],e,!0)},n.SimpleTapRecognizer.prototype._eventHandler=function(e){var t=this._tapCallback,i=e.type;if("touchstart"===i)this._touchStartEvent=e,this._touchStartEvent._tapStart=(new Date).getTime();else if("touchmove"===i||"touchcancel"===i)this._touchStartEvent=null;else if("touchend"===i){if(this._touchStartEvent){var o=this._touchStartEvent._tapStart;if(isNaN(o))t(this._touchStartEvent);else(new Date).getTime()-o<n.SimpleTapRecognizer._PRESSHOLDTHRESSHOLD&&t(this._touchStartEvent)}this._touchStartEvent=null}},n.SimpleTapRecognizer.prototype.destroy=function(){this._tapCallback=null;var e=this._eventHandlerCallback;this._eventHandlerCallback=null;for(var t=document.documentElement,i=0;i<n.SimpleTapRecognizer._TOUCHEVENTS.length;i++)t.removeEventListener(n.SimpleTapRecognizer._TOUCHEVENTS[i],e,!0)},n.SimpleTapRecognizer._TOUCHEVENTS=["touchstart","touchmove","touchcancel","touchend"],n.SimpleTapRecognizer._PRESSHOLDTHRESSHOLD=700,n.PopupLiveRegion=function(){this.Init()},n.Object.createSubclass(n.PopupLiveRegion,n.Object,"oj.PopupLiveRegion"),n.PopupLiveRegion.prototype.Init=function(){n.PopupLiveRegion.superclass.Init.call(this),isNaN(n.PopupLiveRegion._refCounter)?n.PopupLiveRegion._refCounter=1:n.PopupLiveRegion._refCounter+=1},n.PopupLiveRegion.prototype.destroy=function(){if(!isNaN(n.PopupLiveRegion._refCounter)&&(n.PopupLiveRegion._refCounter-=1,n.PopupLiveRegion._refCounter<1)){var e=$(document.getElementById(n.PopupLiveRegion._POPUP_LIVE_REGION_ID));e.length>0&&e.remove()}},n.PopupLiveRegion.prototype.announce=function(e){if(!n.StringUtils.isEmpty(e)){var t=n.PopupLiveRegion._getLiveRegion();t.children().remove(),$("<div>").text(e).appendTo(t)}},n.PopupLiveRegion._getLiveRegion=function(){var e=$(document.getElementById(n.PopupLiveRegion._POPUP_LIVE_REGION_ID));return 0===e.length&&((e=$("<div>")).attr({id:n.PopupLiveRegion._POPUP_LIVE_REGION_ID,role:"log","aria-live":"polite","aria-relevant":"additions"}),e.addClass("oj-helper-hidden-accessible"),e.appendTo(document.body)),e},n.PopupLiveRegion._POPUP_LIVE_REGION_ID="__oj_popup_arialiveregion",n.PopupSkipLink=function(e,t,i,o,s){n.Assert.assertPrototype(e,$),n.Assert.assertString(t),n.Assert.assertFunction(i),n.Assert.assertStringOrNull(o),this._options={insertBefore:!1,preventKeyEvents:!0},s&&(this._options=Object.assign({},this._options,s)),this._sibling=e,this._message=t,this._callback=i,this._id=o,this.Init()},n.Object.createSubclass(n.PopupSkipLink,n.Object,"oj.PopupSkipLink"),n.PopupSkipLink.prototype.Init=function(){n.PopupSkipLink.superclass.Init.call(this);var e=this._sibling,t=this._callback,i=this._message,o=this._options.insertBefore,s=this._options.preventKeyEvents;this._message=null;var r=this._id;this._id=null;var a=$(document.getElementById(r));a.length<1&&(a=$("<a>").attr({tabindex:"-1",href:"#",role:"link"})),a.attr("id",r),a.addClass("oj-helper-hidden-accessible"),a.text(i),o?a.insertBefore(e):a.insertAfter(e),a.on("click",n.PopupSkipLink._activateHandler.bind(this,t)),s&&a.on("keydown keyup keypress",n.PopupSkipLink._keyHandler),e.data(n.PopupSkipLink._SKIPLINK_ATTR,a)},n.PopupSkipLink._activateHandler=function(e,t){n.ZOrderUtils.eatEvent(t),window.setImmediate(e)},n.PopupSkipLink._keyHandler=function(e){e.keyCode===$.ui.keyCode.ENTER&&n.ZOrderUtils.eatEvent(e)},n.PopupSkipLink.prototype.destroy=function(){var e=this._sibling;if(delete this._sibling,delete this._callback,e){var t=e.data(n.PopupSkipLink._SKIPLINK_ATTR);e.removeData(n.PopupSkipLink._SKIPLINK_ATTR),t&&(t.off("click keydown keyup keypress"),t.remove())}},n.PopupSkipLink.prototype.getLink=function(){var e,t=this._sibling;return t&&(e=t.data(n.PopupSkipLink._SKIPLINK_ATTR)),e},n.PopupSkipLink._SKIPLINK_ATTR="oj-skiplink",n.PopupWhenReadyMediator=function(e,t,i,n){this._element=e,this._operation=t,this._widgetName=i,this._isCustomElement=!!n,this.Init()},n.Object.createSubclass(n.PopupWhenReadyMediator,n.Object,"oj.PopupWhenReadyMediator"),n.PopupWhenReadyMediator.prototype.Init=function(){n.PopupWhenReadyMediator.superclass.Init.call(this),this._resolvedQueue=[],this._callback=this._eventHandler.bind(this);var e=this._operation,t=["oj"];this._isCustomElement?(t.push(e.charAt(0).toUpperCase()),t.push(e.slice(1))):t.push(e);var i=t.join("");this._eventType=i,this._element.on(i,this._callback);var o=c.getContext(this._element[0]).getBusyContext(),s={description:this._getBusyStateDescription.bind(this,this._element,this._operation,this._widgetName)},r=o.addBusyState(s);this.AddPromiseExecutor(r),this._whenReadyPromise=new Promise(this.AddPromiseExecutor.bind(this))},n.PopupWhenReadyMediator.prototype._getBusyStateDescription=function(e,t,i){return i+" identified by '"+e.attr("id")+"' is busy animating on the '"+t+"' operation."},n.PopupWhenReadyMediator.prototype._deliverResolved=function(t){var i=this._resolvedQueue;this._resolvedQueue=null;var n=t||this._operation;this._operation=null;for(var o=0;o<i.length;o++)try{i[o](n)}catch(t){e.error("Error resolving whenReady promises:\n%o",t)}this._whenReadyPromise=Promise.resolve("none")},n.PopupWhenReadyMediator.prototype.destroy=function(){if(this._resolvedQueue&&this._deliverResolved("none"),this._callback){var e=this._eventType;this._element.off(e,this._callback)}this._callback=null,this._element=null,this._operation=null,this._whenReadyPromise=null,this._widgetName=null,this._eventType=null},n.PopupWhenReadyMediator.prototype.getWhenReadyPromise=function(){return this._whenReadyPromise},n.PopupWhenReadyMediator.prototype._eventHandler=function(e){e.target===this._element[0]&&(this._element.off(e.type,this._callback),this._deliverResolved(),this._callback=null)},n.PopupWhenReadyMediator.prototype._getPendingOperation=function(){return this._operation?this._operation:"none"},n.PopupWhenReadyMediator.prototype.AddPromiseExecutor=function(e,t){this._resolvedQueue&&this._resolvedQueue.push(e)},n.PopupWhenReadyMediator.prototype.isOperationPending=function(t,i,n,o){var s=!1,r=this._widgetName,a=this._getPendingOperation();if(i===a)e.info("An %s instance invoked a '%s' operation while pending animation of the same type of operation.  The second request will be ignored.",r,i),s=!0;else if("none"!==a){e.info("An %s instance invoked a '%s' operation while pending animation of a '%s' operation. The second request will be invoked after the pending operation completes.",r,i,a),new Promise(this.AddPromiseExecutor.bind(this)).then(function(){this[n].apply(this,o)}.bind(t)),s=!0}return s},n.PositionUtils={},n.PositionUtils.normalizeHorizontalAlignment=function(e,t){for(var i=$.extend({},e),o=0;o<n.PositionUtils._ALIGN_RULE_PROPERTIES.length;o++){var s=n.PositionUtils._ALIGN_RULE_PROPERTIES[o],r=i[s];if(r)if(n.StringUtils.isString(r))i[s]=r.replace("start",t?"right":"left").replace("end",t?"left":"right").replace("<",t?"+":"-").replace(">",t?"-":"+");else for(var a=0;a<n.PositionUtils._SUB_ALIGN_RULE_PROPERTIES.length;a++){var l=n.PositionUtils._SUB_ALIGN_RULE_PROPERTIES[a],u=r[l];n.StringUtils.isString(u)&&(r[l]=u.replace("start",t?"right":"left").replace("end",t?"left":"right").replace("<",t?"+":"-").replace(">",t?"-":"+"))}}return i},n.PositionUtils.normalizePositionOf=function(e,t,i){return"event"===e?i:null==e||"launcher"===e?t:e},n.PositionUtils._normalizeEventForPosition=function(e){$.each(["pageX","pageY"],function(t,i){if(e&&void 0===e[i]&&e.originalEvent){var n,o=e.originalEvent,s=o.type;if(n="touchstart"===s||"touchmove"===s?"touches":"touchend"===s?"changedTouches":null){var r=o[n][0];r&&(e[i]=r[i])}}})},n.PositionUtils._ALIGN_RULE_PROPERTIES=["my","at"],n.PositionUtils._SUB_ALIGN_RULE_PROPERTIES=["vertical","horizontal"],n.PositionUtils.isAligningPositionClipped=function(e){if(e.target&&e.target.height>0&&e.target.width>0){var t=e.target.element;return!n.PositionUtils.isWithinViewport(t)}return!1},n.PositionUtils.isWithinViewport=function(e){function t(e,t){var i;if(["hidden","scroll","auto"].indexOf(t.overflowY)>-1){if(e.bottom-t.top<-1)return!1;if(i="auto"===t.overflowX&&t.scrollWidth>t.innerWidth||"scroll"===t.overflowX?n.DomUtils.getScrollBarWidth():0,t.bottom-i-e.top<1)return!1}return!(["hidden","scroll","auto"].indexOf(t.overflowX)>-1&&(i="auto"===t.overflowY&&t.scrollHeight>t.innerHeight||"scroll"===t.overflowY?n.DomUtils.getScrollBarWidth():0,e.right-(t.left+("rtl"===n.DomUtils.getReadingDirection()?i:0))<-1||e.left-(t.right-("ltr"===n.DomUtils.getReadingDirection()?i:0))>-1))}function i(e){var t=e[0];if(1===t.nodeType){var i=$.extend({},t.getBoundingClientRect());return i.overflowX=e.css("overflow-x"),i.overflowY=e.css("overflow-y"),i.innerHeight=e.innerHeight(),i.innerWidth=e.innerWidth(),i.scrollHeight=t.scrollHeight,i.scrollWidth=t.scrollWidth,i}return{height:0,width:0}}function o(e){return["fixed","absolute","relative"].indexOf(e.css("position"))>-1&&(Math.abs(n.DomUtils.getCSSLengthAsInt(e.css("top")))>0||Math.abs(n.DomUtils.getCSSLengthAsInt(e.css("bottom")))>0||Math.abs(n.DomUtils.getCSSLengthAsInt(e.css("left")))>0||Math.abs(n.DomUtils.getCSSLengthAsInt(e.css("right")))>0)}if(!e)return!1;if($.isWindow(e[0])||o(e))return!0;for(var s,r=i(e),a=!0,l=e.parent();a&&l&&l.length>0&&"BODY"!==l[0].nodeName&&1===l[0].nodeType&&!o(l);){if("visible"!==(s=l).css("overflow-x")||"visible"!==s.css("overflow-y")){var u=i(l);u.height>0&&u.width>0&&(a=t(r,u))}l=l.parent()}return a},n.PositionUtils._ANIMATION_TRANSFORM_ORIGIN_RULES={"right-top":"right top","right-middle":"right center","right-bottom":"right bottom","left-top":"left top","left-middle":"left center","left-bottom":"left bottom","center-top":"center top","center-middle":"center center","center-bottom":"center bottom"},n.PositionUtils._ALIGN_MNEMONIC_DATA="oj-popup-align-mnemonic",n.PositionUtils.captureTransformOriginAnimationEffectsOption=function(e,t){var i=[t.horizontal,t.vertical].join("-");e.data(n.PositionUtils._ALIGN_MNEMONIC_DATA,i)},n.PositionUtils.addTransformOriginAnimationEffectsOption=function(e,t){var i,o;n.StringUtils.isString(t)?(o=!0,i=t):(o=!1,i=JSON.stringify(t));var s=/#myPosition/g;if(i.match(s)){var r=e.data(n.PositionUtils._ALIGN_MNEMONIC_DATA);n.StringUtils.isEmptyOrUndefined(r)&&(r="center-middle");var a=n.PositionUtils._ANIMATION_TRANSFORM_ORIGIN_RULES[r];i=i.replace(s,a),t=o?i:JSON.parse(i)}return t},n.PositionUtils._JQUI_MNEMONIC_GRP_REGX=/^(\w+)(\+|-)?(\d+)?/,n.PositionUtils._VERTICAL_ENUM_TST_REGX=/^top$|^center$|^bottom$/,n.PositionUtils._HORIZONTAL_ENUM_TST_REGX=/^start$|^left$|^center$|^end$|^right$/,n.PositionUtils._COLLISION_ENUM_TST_REGX=/^none$|^flip$|^flipfit$|^fit$|^flipcenter$/,n.PositionUtils._parsePositionNmnemonic=function(e,t){var i=[null,Number.NaN],o=n.PositionUtils._JQUI_MNEMONIC_GRP_REGX.exec(e);if(o[1]&&t.test(o[1])&&(i[0]=o[1],o[2])){var s=parseInt(o[3],10);isNaN(s)||(s*="-"===o[2]?-1:1,i[1]=s)}return i},n.PositionUtils._parseJSON=function(e){if(n.StringUtils.isString(e)&&/^{/.test(e)&&/}$/.test(e))try{return JSON.parse(e)}catch(e){}return null},n.PositionUtils._coerceMyAtToJet=function(e,t,i,o){var s=n.PositionUtils._parseJSON(t);s&&(t=s),(s=n.PositionUtils._parseJSON(i))&&(i=s),o||(o={});var r,a=$.extend({},o),l={x:0,y:0};if(i&&"x"in i&&"y"in i&&(l.x=n.DomUtils.getCSSLengthAsInt(i.x),l.y=n.DomUtils.getCSSLengthAsInt(i.y)),n.StringUtils.isString(t)){var u=t.split(/\s/);u.length>0&&!n.StringUtils.isEmpty(u[0])&&(r=n.PositionUtils._parsePositionNmnemonic(u[0],n.PositionUtils._HORIZONTAL_ENUM_TST_REGX))[0]&&(a.horizontal=r[0],isNaN(r[1])||(l.x=r[1])),u.length>1&&!n.StringUtils.isEmpty(u[1])&&(r=n.PositionUtils._parsePositionNmnemonic(u[1],n.PositionUtils._VERTICAL_ENUM_TST_REGX))[0]&&(a.vertical=r[0],isNaN(r[1])||(l.y=r[1]))}else t&&("horizontal"in t&&(r=n.PositionUtils._parsePositionNmnemonic(t.horizontal,n.PositionUtils._HORIZONTAL_ENUM_TST_REGX))[0]&&(a.horizontal=r[0],isNaN(r[1])||(l.x=r[1])),"vertical"in t&&(r=n.PositionUtils._parsePositionNmnemonic(t.vertical,n.PositionUtils._VERTICAL_ENUM_TST_REGX))[0]&&(a.vertical=r[0],isNaN(r[1])||(l.y=r[1])));var d={};return d[e]=a,d.offset=l,d},n.PositionUtils._coerceCollisionToJet=function(e,t){var i=t;return n.PositionUtils._COLLISION_ENUM_TST_REGX.test(e)&&(i=e),{collision:i}},n.PositionUtils._coerceOfToJet=function(e,t){var i=n.PositionUtils._parseJSON(e);i&&(e=i);var o=t;if(n.StringUtils.isString(e))o=e;else if($.isWindow(e))o="window";else if(e instanceof Element||e instanceof $){(e=$(e)).uniqueId(),o="#"+function(e){for(var t=[],i=/\w|_|-/,n=0;n<e.length;n++){var o=e.substring(n,n+1);i.test(o)?t.push(o):t.push("\\"+o)}return t.join("")}(e.attr("id"))}else e instanceof Event||e instanceof $.Event?("pageX"in e||"pageY"in e)&&((o={}).x=n.DomUtils.getCSSLengthAsFloat(e.pageX),o.y=n.DomUtils.getCSSLengthAsFloat(e.pageY)):e&&("x"in e||"y"in e)&&((o={}).x=n.DomUtils.getCSSLengthAsFloat(e.x),o.y=n.DomUtils.getCSSLengthAsFloat(e.y));return{of:o}},n.PositionUtils.coerceToJet=function(e,t){e||(e={});var i=n.PositionUtils._parseJSON(e);i&&(e=i),t||(t={});var o=t.my,s=t.at,r=t.collision,a=t.of,l=n.PositionUtils._coerceMyAtToJet("my",e.my,e.offset,o),u=n.PositionUtils._coerceMyAtToJet("at",e.at,null,s),d={offset:{x:l.offset.x+u.offset.x,y:l.offset.y+u.offset.y}};return delete l.offset,delete u.offset,$.extend({},l,u,d,n.PositionUtils._coerceCollisionToJet(e.collision,r),n.PositionUtils._coerceOfToJet(e.of,a),function(e,t){return{using:$.isFunction(e)?e:t}}(e.using,void 0))},n.PositionUtils.coerceToJqUi=function(e){function t(t,i){var n=[];if(e[t][i]?n.push(e[t][i]):n.push("center"),"my"===t&&e.offset){var o="horizontal"===i?"x":"y",s=e.offset[o];isNaN(s)||0===s||(n.push(s>0?"+":""),n.push(Math.floor(s).toString()))}return n.join("")}var i={};["my","at"].forEach(function(n){if(e[n]){var o=[];o.push(t(n,"horizontal")),o.push(" "),o.push(t(n,"vertical")),i[n]=o.join("")}});var o=e.of;if(n.StringUtils.isString(o))i.of="window"===o?window:o;else if(o&&!n.StringUtils.isString(o)&&"x"in o&&"y"in o){var s=o.x,r=o.y,a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,1,s,r,s,r,!1,!1,!1,!1,0,null),i.of=$.Event(a,{pageX:s,pageY:r})}else i.of=o;return e.collision&&(i.collision=e.collision),e.using&&(i.using=e.using),i},$.ui.position.flipcenter={left:function(e,t){var i=e.left;$.ui.position.flip.left.call(this,e,t);var o=t.within,s=o.isWindow?o.scrollLeft:o.offset.left,r=o.width,a=e.left-t.collisionPosition.marginLeft,l=s-a,u=a+t.collisionWidth-r-s;(l>0||u>0)&&("right"===t.at[0]?i-=t.targetWidth/2:"left"===t.at[0]&&(i+=t.targetWidth/2),i-=("rtl"===n.DomUtils.getReadingDirection()?-1:1)*(t.elemWidth/2),e.left=Math.max(0,i))},top:function(e,t){var i=e.top;$.ui.position.flip.top.call(this,e,t);var n=t.within,o=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,r=e.top-t.collisionPosition.marginTop,a=o-r,l=r+t.collisionHeight-s-o;(a>0||l>0)&&("top"===t.at[1]?i+=t.targetHeight/2:"bottom"===t.at[1]&&(i-=t.targetHeight/2),i+=t.elemHeight/2,e.top=Math.max(0,i))}};var $n=$.ui.position.flip.left;$.ui.position.flip={left:$n.bind(this),top:function(e,t){var i,n,o=t.within,s=o.offset.top+o.scrollTop,r=o.height,a=o.isWindow?o.scrollTop:o.offset.top,l=e.top-t.collisionPosition.marginTop,u=l-a,d=l+t.collisionHeight-r-a;i="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,n="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0;var h,c,p=-2*t.offset[1];u<0?((h=e.top+i+n+p+t.collisionHeight-r-s)<0||h<Math.abs(u))&&d<0&&u>d&&(e.top+=i+n+p):d>0&&((c=e.top-t.collisionPosition.marginTop+i+n+p-a)>0||Math.abs(c)<d)&&(e.top+=i+n+p)}};var Kn={properties:{max:{type:"number",value:100},translations:{type:"object",value:{},properties:{ariaIndeterminateProgressText:{type:"string"}}},type:{type:"string",enumValues:["bar","circle"],value:"bar"},value:{type:"number",writeback:!0,value:0}},methods:{refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};n.__registerWidget("oj.ojProgressbar",$.oj.baseComponent,{version:"1.0.0",defaultElement:"<div>",widgetEventPrefix:"oj",options:{max:100,value:0,type:"bar",disabled:!1},min:0,_indeterminate:!1,_ComponentCreate:function(){this._super(),this.options.value=this._constrainedValue(),this.oldValue=this.options.value,this.element.attr({role:"progress","aria-valuemin":this.min}),this.element.addClass("oj-component"),this._setUpProgressType()},_setUpProgressType:function(){"circle"===this.options.type?(this.element.addClass("oj-progress-circle"),this._setupCircleSVG()):(this.element.addClass("oj-progress-bar"),this.valueDiv=$("<div class='oj-progress-bar-value'></div>").appendTo(this.element)),this._refreshValue()},_InitOptions:function(e,t){var i=this.element;if(this._super(e,t),void 0===t.max){var n=i.attr("max")||void 0;null!=n&&(this.options.max=n)}},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this._indeterminate=-1===e,"number"!=typeof e&&(e=isNaN(e)?0:Number(e)),this._indeterminate?-1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e,t){var i=e.value;delete e.value,this._super(e,t),this.options.disabled||(this.options.value=this._constrainedValue(i),this._refreshValue())},_setupCircleSVG:function(){if(this.svg&&this.svg.remove(),!this._indeterminate){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg"),i=document.createElementNS(e,"circle"),n=document.createElementNS(e,"circle"),o=.5*Math.min(this.element.outerWidth(),this.element.outerHeight());t.setAttribute("width",2*o),t.setAttribute("height",2*o),t.setAttribute("class","oj-progress-circle-transform"),i.setAttribute("r",.9*o),i.setAttribute("cx",o),i.setAttribute("cy",o),i.setAttribute("class","oj-progress-circle-base"),n.setAttribute("r",.9*o),n.setAttribute("cx",o),n.setAttribute("cy",o),n.setAttribute("class","oj-progress-circle-base oj-progress-circle-value");var s=2*o*.9*Math.PI,r=s-this._percentage()/100*s;n.setAttribute("style","stroke-dasharray:"+s.toString()+";stroke-dashoffset:"+r),t.appendChild(i),t.appendChild(n),this.svg=$(t),this.element[0].appendChild(t)}},_setOption:function(e,t,i){"max"===e&&(t=Math.max(this.min,t)),"type"===e&&("circle"===this.options.type?(this.element.removeClass("oj-progress-circle"),this.svg&&this.svg.remove()):(this.element.removeClass("oj-progress-bar"),this.valueDiv.remove()),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this._super(e,t,i),"type"===e&&this._setUpProgressType()},_percentage:function(){return Math.min(this._indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min),100)},_refreshValue:function(){var e=this.options.value,t=this._percentage(),i="circle"===this.options.type;if(i?this._setupCircleSVG():i||(this.valueDiv.toggle(this._indeterminate||e>this.min).width(t.toFixed(0)+"%"),this.element.toggleClass("oj-progress-bar-indeterminate",this._indeterminate)),this._indeterminate){if(this.element.attr({"aria-valuetext":this.getTranslatedString("ariaIndeterminateProgressText")}),this.element.removeAttr("aria-valuenow"),this.element.removeAttr("aria-valuemin"),this.element.removeAttr("aria-valuemax"),!this.overlayDiv){if(i){this.overlayDiv=$("<div class='oj-progress-circle-overlay'></div>").appendTo(this.element);var n=Math.min(this.element.outerWidth(),this.element.outerHeight());this.overlayDiv.css("width",n),this.overlayDiv.css("height",n)}else this.overlayDiv=$("<div class='oj-progress-bar-overlay'></div>").appendTo(this.valueDiv);this.overlayDiv.addClass("oj-indeterminate")}}else this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)},_destroy:function(){"circle"===this.options.type?(this.element.removeClass("oj-progress-circle oj-component"),this.svg&&this.svg.remove()):(this.element.removeClass("oj-progress-bar oj-component"),this.valueDiv.remove(),this._indeterminate&&this.element.removeClass("oj-progress-bar-indeterminate")),this.element.removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.overlayDiv&&this.overlayDiv.remove(),this._super()}}),Kn.extension._WIDGET_NAME="ojProgressbar",n.CustomElementBridge.register("oj-progress",{metadata:Kn});n.ProgressItem=function(){},n.ProgressItem.Status={QUEUED:"queued",LOADSTARTED:"loadstarted",ABORTED:"aborted",ERRORED:"errored",TIMEDOUT:"timedout",LOADED:"loaded"},n.ProgressItem.EventType={LOADSTART:"loadstart",PROGRESS:"progress",ABORT:"abort",ERROR:"error",LOAD:"load",TIMEOUT:"timeout",LOADEND:"loadend"};ci.register("oj-progress-item",{view:"    <div class='oj-flex oj-sm-justify-content-space-between'>      <div class='oj-flex-item oj-flex oj-sm-flex-direction-column'>        <span data-bind='text: $properties.data.name' class='oj-progresslist-name'></span>        <div data-bind='text: message' class='oj-progresslist-error-message'></div>      </div>      <div class='oj-flex oj-sm-align-items-center'>        <oj-bind-slot name='itemInfo'>          <div class='oj-flex-item oj-flex oj-progresslist-info'>            <span data-bind='text: $data.getSizeInBKMGT($properties.data.size)'></span>          </div>        </oj-bind-slot>        <div class='oj-flex-item oj-flex'>          <oj-progress-status status='{{status}}'                              progress='{{progress}}'>          </oj-progress-status>        </div>      </div>    </div>",viewModel:function(e){var t,i,o,s=this;t=function(e){e.target&&e.lengthComputable&&(s.status(n.ProgressItem.Status.LOADSTARTED),s.progress(parseInt(e.loaded/e.total*100,10)))},i=function(e){var t=e.target;t&&(s.message(e.error.message),s.status(n.ProgressItem.Status.ERRORED),l(t))},o=function(e){var t=e.target;t&&(s.status(n.ProgressItem.Status.LOADED),l(t))},s.status=ko.observable(n.ProgressItem.Status.QUEUED),s.progress=ko.observable(-1),s.message=ko.observable("");var r,a=["B","KB","MB","GB","TB"];function l(e){e.removeEventListener(n.ProgressItem.EventType.PROGRESS,t,!1),e.removeEventListener(n.ProgressItem.EventType.ERROR,i,!1),e.removeEventListener(n.ProgressItem.EventType.TIMEOUT,i,!1),e.removeEventListener(n.ProgressItem.EventType.ABORT,i,!1),e.removeEventListener(n.ProgressItem.EventType.LOAD,o,!1)}s.getSizeInBKMGT=function(e){var t,i=e;if(isNaN(i))return null;for(t=0;i>=1024&&t<4;t++)i/=1024;return i.toFixed(2)+a[t]},(r=e.properties.data).addEventListener(n.ProgressItem.EventType.PROGRESS,t),r.addEventListener(n.ProgressItem.EventType.ERROR,i),r.addEventListener(n.ProgressItem.EventType.TIMEOUT,i),r.addEventListener(n.ProgressItem.EventType.ABORT,i),r.addEventListener(n.ProgressItem.EventType.LOAD,o)},metadata:{properties:{data:{type:"object"}}}});ci.register("oj-progress-list",{view:"<oj-list-view data-bind=\"attr: {id: $unique + '_list'}\"              aria-label='list using array'              data='{{$properties.data}}'              item.renderer='{{renderer()}}'              selection-mode='single'></oj-list-view><script type='text/html' data-bind=\"attr: {id: tempId}\">  <li class='oj-progresslist-item' tabindex='0'>    <oj-progress-item data='{{$data}}'>    </oj-progress-item>  </li><\/script>",viewModel:function(e){var t=this;t.tempId=e.unique+"_templ",t.renderer=function(){return be.getRenderer(t.tempId,!0)}},metadata:{properties:{data:{type:"oj.DataProvider|oj.TableDataSource"}},methods:{setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}}});ci.register("oj-progress-status",{view:"  <div data-bind='visible: ($properties.status == \"queued\")'       class='oj-progressstatus-cell'>    <div class='oj-component-icon oj-progressstatus-cancel-icon'         role='img' title='cancel'></div>  </div>  <div data-bind='visible: ($properties.status == \"loadstarted\")'       class='oj-progressstatus-cell'>    <oj-progress type='circle' value='{{$properties.progress}}'>    </oj-progress>  </div>  <div data-bind='visible: ($properties.status == \"loaded\")'       class='oj-progressstatus-cell'>    <div class='oj-component-icon oj-progressstatus-done-icon' role='img' title='done'></div>  </div>  <div data-bind='visible: ($properties.status == \"errored\" || $properties.status == \"timedout\" || $properties.status == \"aborted\")'       class='oj-progressstatus-cell'>    <div class='oj-component-icon oj-progressstatus-error-icon' role='img' title='error'></div>  </div>",metadata:{properties:{status:{type:"string"},progress:{type:"number"}}}}),n.PullToRefreshUtils={};var zn=n.PullToRefreshUtils;n.PullToRefreshUtils.setupPullToRefresh=function(e,t,i){var o,s,r,a,l,u,d,h,c,p,_,m,g,f,y,b,C;b=n.DomUtils.isTouchSupported(),n.PullToRefreshUtils.tearDownPullToRefresh(e),o=$(document.createElement("div")).addClass("oj-pulltorefresh-outer"),n.PullToRefreshUtils._renderAccessibleLink(e,o,t,i),s=$(document.createElement("div")).addClass("oj-pulltorefresh-panel"),o.append(s),(r=$(e)).prepend(o),b?C="touch":(C="pan",y={recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_VERTICAL}]]},r.ojHammer(y)),r.on(C+"start.pulltorefresh",function(e){null==$.data(s[0],"data-pullstart")&&0===r[0].scrollTop&&(n.PullToRefreshUtils._handlePull(e,s,i),(c=s.find(".oj-pulltorefresh-icon")).length>0&&(p=c.parent().outerHeight(!0)),i&&!isNaN(i.threshold)&&(l=parseInt(i.threshold,10)),l=isNaN(l)?s.outerHeight(!0):Math.max(0,Math.min(l,s.outerHeight(!0))),s.css("height",0),s.removeClass("oj-pulltorefresh-transition"),b?($.data(s[0],"data-pullstart",e.originalEvent.touches[0].clientY),$.data(s[0],"data-pullstart-horiz",e.originalEvent.touches[0].clientX)):$.data(s[0],"data-pullstart",0),a=!0)}).on(C+"move.pulltorefresh",function(e){if(null!=(u=$.data(s[0],"data-pullstart"))&&!((d=b?e.originalEvent.touches[0].clientY-parseInt(u,10):e.gesture.deltaY)<0)&&(e.preventDefault(),null==$.data(s[0],"data-closing")))if(null==$.data(s[0],"data-loading")){if(a){if(h=b?e.originalEvent.touches[0].clientX-parseInt($.data(s[0],"data-pullstart-horiz"),10):e.gesture.deltaX,Math.abs(h)>d)return;a=!1}s.css("height",d),n.PullToRefreshUtils._fireEvent(e,"pull",s,d),null!=c&&c.length>0&&(null!=(_=$.data(s[0],"data-lasticonclass"))&&c.removeClass(_),(g=10*Math.round(d/l*10))>=100?(f="oj-pulltorefresh-icon-full",m=v.getTranslatedString("oj-pullToRefresh.titleIconFull")):(f="oj-pulltorefresh-icon-"+g+"-percent",m=v.getTranslatedString("oj-pullToRefresh.titleIcon"+g+"percent")),c.addClass(f),c.attr("title",m),$.data(s[0],"data-lasticonclass",f),n.PullToRefreshUtils._showHideDefaultText(s,d>p))}else s.css("height",Math.max(d,l))}).on(C+"cancel.pulltorefresh",function(){n.PullToRefreshUtils._cleanup(s)}).on(C+"end.pulltorefresh",function(i){if(null!=(u=$.data(s[0],"data-pullstart"))&&null==$.data(s[0],"data-closing"))return null!=$.data(s[0],"data-loading")?(d=$.data(s[0],"data-panelheight"),void s.css("height",d)):void(s.outerHeight()<l?(s.addClass("oj-pulltorefresh-transition").css("height",0),n.PullToRefreshUtils._cleanup(s)):n.PullToRefreshUtils._handleRelease(i,e,s,t))})},n.PullToRefreshUtils._handlePull=function(e,t,i){var o,s;n.PullToRefreshUtils._fireEvent(e,"pull",t,0),0===t.children().length&&(i&&(o=i.primaryText,s=i.secondaryText),n.PullToRefreshUtils._createDefaultContent(t,o,s)),t.prev().text(v.getTranslatedString("oj-pullToRefresh.ariaRefreshingLink")),t.css("height","auto"),$.data(t[0],"data-panelheight",t.outerHeight())},n.PullToRefreshUtils._handleRelease=function(e,t,i,o){var s,r,a,l,u;s=$.data(i[0],"data-panelheight"),i.addClass("oj-pulltorefresh-transition").css("height",s),n.PullToRefreshUtils._fireEvent(e,"release",i,s),$.data(i[0],"data-loading",!0),(r=i.find(".oj-pulltorefresh-icon")).length>0&&(null!=(a=$.data(i[0],"data-lasticonclass"))&&r.removeClass(a),r.addClass("oj-pulltorefresh-icon-full")),l=c.getContext(t).getBusyContext().addBusyState({description:"PullToRefresh:handleRelease"}),$.data($(t)[0],"data-pulltorefresh-busystate",l),o().then(function(){u=function(){n.PullToRefreshUtils._fireEvent(e,"complete",i,s),n.PullToRefreshUtils._cleanup(i),i.off("transitionend",u),i.prev().text(""),n.PullToRefreshUtils._resolveBusyState(t)},i.prev().text(v.getTranslatedString("oj-pullToRefresh.ariaRefreshCompleteLink")),i.prev().prev().css("position",""),$.data(i[0],"data-closing",!0),i.on("transitionend",u),i.css("height",0)},function(){u=function(){n.PullToRefreshUtils._cleanup(i),i.off("transitionend",u),i.prev().text(""),n.PullToRefreshUtils._resolveBusyState(t)},i.prev().prev().css("position",""),$.data(i[0],"data-closing",!0),i.on("transitionend",u),i.css("height",0)})},n.PullToRefreshUtils.tearDownPullToRefresh=function(e){$(e).children(".oj-pulltorefresh-outer").remove(),$(e).off(".pulltorefresh"),n.PullToRefreshUtils._resolveBusyState(e)},n.PullToRefreshUtils._resolveBusyState=function(e){var t,i;t=$(e)[0],(i=$.data(t,"data-pulltorefresh-busystate"))&&(i(null),$.removeData(t,"data-pulltorefresh-busystate"))},n.PullToRefreshUtils._fireEvent=function(e,t,i,n){var o=$.Event("oj"+t);o.originalEvent=e,i.trigger(o,{content:i,distance:n})},n.PullToRefreshUtils._createDefaultContent=function(e,t,i){var n,o,s,r;e.addClass("oj-pulltorefresh-content").attr("aria-hidden","true"),(n=$(document.createElement("div"))).addClass("oj-icon oj-pulltorefresh-icon oj-pulltorefresh-icon-initial"),(o=$(document.createElement("div"))).addClass("oj-pulltorefresh-icon-container"),o.append(n),$.data(e[0],"data-lasticonclass","oj-pulltorefresh-icon-initial"),e.append(o),null!=t&&(s=$(document.createElement("div")).addClass("oj-pulltorefresh-primary-text").text(t),e.append(s),null!=i&&(r=$(document.createElement("div")).addClass("oj-pulltorefresh-secondary-text").text(i),e.append(r)))},n.PullToRefreshUtils._showHideDefaultText=function(e,t){var i,n;i=e.find(".oj-pulltorefresh-primary-text"),n=e.find(".oj-pulltorefresh-secondary-text"),t?(i&&i.show(),n&&n.show()):(i&&i.hide(),n&&n.hide())},n.PullToRefreshUtils._renderAccessibleLink=function(e,t,i,o){var s,r,a;(s=$(document.createElement("a"))).text(v.getTranslatedString("oj-pullToRefresh.ariaRefreshLink")),s.addClass("oj-helper-hidden-accessible").attr("href","#").focus(function(){s.css("position","static")}).blur(function(e){null!=e.relatedTarget&&s.css("position","")}).click(function(s){r=t.children().last(),n.PullToRefreshUtils._handlePull(s,r,o),n.PullToRefreshUtils._handleRelease(s,e,r,i)}),(a=$(document.createElement("div"))).addClass("oj-helper-hidden-accessible").attr("aria-live","polite"),t.append(s),t.append(a)},n.PullToRefreshUtils._cleanup=function(e){$.removeData(e[0],"data-pullstart"),$.removeData(e[0],"data-pullstart-horiz"),$.removeData(e[0],"data-loading"),$.removeData(e[0],"data-closing"),e.find(".oj-pulltorefresh-icon").length>0&&e.empty()},n.RadioCheckboxUtils={},n.RadioCheckboxUtils.renderOptions=function(){var e=this._optionsDataArray,t=this.element[0];if(e){var i,n="OJ-RADIOSET"===t.tagName?"oj-radioset-wrapper":"oj-checkboxset-wrapper",o=t.querySelector("."+n);if(null==o)(o=document.createElement("div")).className=n,t.appendChild(o);else{var s=o.querySelectorAll(".oj-choice-item");for(i=0;i<s.length;i++){var r=s[i];r.parentNode.removeChild(r)}}var a=this.options.optionRenderer,l=this.options.optionsKeys,u=l&&l.value?l.value:"value";for("function"!=typeof a&&(a=function(e){var t=l&&l.label?l.label:"label",i=document.createElement("oj-option");return i.value=e.data[u],i.textContent=e.data[t],i}),i=0;i<e.length;i++){var d={component:t,index:i,data:e[i]},h=a(d);h&&"OJ-OPTION"===h.tagName&&(h.hasAttribute("data-oj-binding-provider")||h.setAttribute("data-oj-binding-provider","none"),null!==h.value&&void 0!==h.value||(h.value=d.data[u]),o.appendChild(h),w.subtreeAttached(h))}this.refresh()}},n.RadioCheckboxUtils.generateOptionsFromData=function(){var e=this.options.options;if(n.RadioCheckboxUtils.removeDataListener.call(this),e&&n.DataProviderFeatureChecker.isDataProvider(e)){var t,i={description:'The component identified by "'+this.element[0].id+'" is fetching data'},o=n.Context.getContext(this.element[0]).getBusyContext().addBusyState(i);this._optionsDataArray=[];var s=e.fetchFirst()[Symbol.asyncIterator](),r=this,a=function(e){var i;if(e&&e.value){var n=e.value;for(t=0;t<n.data.length;t++)r._optionsDataArray.push(n.data[t]);e.done||(i=s.next().then(a))}return i};s.next().then(a).then(function(){n.RadioCheckboxUtils.renderOptions.call(r),n.RadioCheckboxUtils.addDataListener.call(r),o()},function(){o()})}},n.RadioCheckboxUtils.addDataListener=function(){n.RadioCheckboxUtils.removeDataListener.call(this),this.options.options&&n.DataProviderFeatureChecker.isDataProvider(this.options.options)&&(this._optionsDataProvider=this.options.options,this._optionsDataListener=n.RadioCheckboxUtils.generateOptionsFromData.bind(this),this._optionsDataProvider.addEventListener("refresh",this._optionsDataListener),this._optionsDataProvider.addEventListener("mutate",this._optionsDataListener))},n.RadioCheckboxUtils.removeDataListener=function(){this._optionsDataListener&&(this._optionsDataProvider.removeEventListener("refresh",this._optionsDataListener),this._optionsDataProvider.removeEventListener("mutate",this._optionsDataListener),this._optionsDataProvider=null,this._optionsDataListener=null)},n.__registerWidget("oj._ojRadioCheckbox",$.oj.baseComponent,{version:"1.0.0",defaultElement:"<input>",widgetEventPrefix:"oj",options:{disabled:null,checked:null,type:null},label:function(){return void 0===this.$label&&(this.$label=this._getLabelsForElement()),this.$label},refresh:function(){this._super(),this._setup()},refreshDisabled:function(){this._renderDisabled()},setSelectedClass:function(e){this.element.toggleClass("oj-selected",e),this.$label.toggleClass("oj-selected",e),this.$choiceItem.toggleClass("oj-selected",e)},widget:function(){return this.uiRadioCheckbox},_InitOptions:function(e,t){var i,n;if(this._super(e,t),"checked"in t||(this.initCheckedFromDom=!0,i=!!this.element.prop("checked"),this.option("checked",i,{_context:{internalSet:!0}})),"boolean"!=typeof this.options.checked)throw new Error("checked option must be a boolean");if("disabled"in t||(n=!!this.element.prop("disabled"),this.option("disabled",n,{_context:{internalSet:!0}})),"boolean"!=typeof this.options.disabled)throw new Error("disabled option must be a boolean");"type"in t||this.option("type",this.element.prop("type"),{_context:{internalSet:!0}})},_ComponentCreate:function(){this._super();var e=this.options.type;"checkbox"===e?(this.uiRadioCheckbox=this.element.addClass("oj-checkbox oj-component"),this.$label=this._getLabelsForElement(),this.$label.addClass("oj-checkbox-label")):"radio"===e&&(this.uiRadioCheckbox=this.element.addClass("oj-radio oj-component"),this.$label=this._getLabelsForElement(),this.$label.addClass("oj-radio-label")),this.$choiceItem=this._getChoiceItem();var t=document.createElement("span");t.setAttribute("class","oj-radiocheckbox-icon"),this.element.wrapAll(t);this._focusable(this.element),this._AddHoverable(this.$choiceItem),this._AddActiveable(this.$choiceItem),this._focusable({element:this.$choiceItem,applyHighlight:!0}),this._AddHoverable(this.$label),this._AddActiveable(this.$label),$.each(this.$label,function(){$(this.childNodes).wrapAll("<span class='oj-radiocheckbox-label-text'></span>")}),this._setup()},_SaveAttributes:function(e){this._savedClasses=e.attr("class")},_RestoreAttributes:function(){this._savedClasses?this.element.attr("class",this._savedClasses):this.element.removeAttr("class")},_setup:function(){this._renderDisabled(),this.initCheckedFromDom||this._setCheckedOnDom(this.options.checked),this.options.checked&&this.setSelectedClass(this.options.checked)},_setCheckedOnDom:function(e){e=!!e,this.element.prop("checked",e)},_renderDisabled:function(){this._IsEffectivelyDisabled()?(this.element.prop("disabled",!0).removeAttr("aria-disabled").removeClass("oj-enabled").addClass("oj-disabled"),this.$label.removeClass("oj-enabled").addClass("oj-disabled"),this.$choiceItem.removeClass("oj-enabled").addClass("oj-disabled")):(this.element.prop("disabled",!1).removeAttr("aria-disabled").removeClass("oj-disabled").addClass("oj-enabled"),this.$label.addClass("oj-enabled").removeClass("oj-disabled"),this.$choiceItem.addClass("oj-enabled").removeClass("oj-disabled"))},_setOption:function(e,t){this._superApply(arguments),"disabled"===e&&(t=!!t,this._renderDisabled(t)),"checked"===e&&(this._setCheckedOnDom(t),this.setSelectedClass(t))},_getLabelsForElement:function(){var t,i=this.element.closest("label"),n="label[for='"+this.element.prop("id")+"']",o=$(n);return 0!==i.length&&e.error("Found a label that is an input's ancestor. This is not supported in the ojCheckboxset or ojRadioset component and the component will\nnot work correctly. Use a label as a sibling to the input and use the label 'for' attribute to tie the two together."),0===(o=o.not(i)).length&&(t=this.element.siblings(n),o=o.add(t)),o},_getChoiceItem:function(){var t,i,n,o=null;return(t=this.element.parent())&&(t.hasClass("oj-choice-item")||t.hasClass("oj-choice-row")||t.hasClass("oj-choice-row-inline"))?o=t:(e.warn("The radioset/checkboxset's input and label dom should be wrapped in a dom node with class 'oj-choice-item'. JET is adding this missing dom to make the component work correctly."),"<span class='oj-choice-item oj-choice-item-added'></span>",i="label[for='"+this.element.attr("id")+"']",0!==(n=this.element.siblings().filter(i)).length?(this.element.add(n).wrapAll("<span class='oj-choice-item oj-choice-item-added'></span>"),o=this.element.parent()):(this.element.wrapAll("<span class='oj-choice-item oj-choice-item-added'></span>"),o=this.element.parent())),o},getNodeBySubId:function(e){var t=this._super(e);if(!t){var i=e.subId;"oj-radiocheckbox-input"===i&&(t=this.element[0]),"oj-radiocheckbox-label"===i&&(t=this.label()[0])}return t||null},_destroy:function(){var e=this._super();this._RemoveHoverable(this.$choiceItem),this._RemoveActiveable(this.$choiceItem),this._RemoveHoverable(this.$label),this._RemoveActiveable(this.$label);var t=this.options.type;"checkbox"===t?this.$label.removeClass("oj-enabled oj-disabled oj-selected oj-checkbox-label"):"radio"===t&&this.$label.removeClass("oj-enabled oj-disabled oj-selected oj-radio-label"),this.$choiceItem.removeClass("oj-enabled oj-disabled oj-selected");return $.each(this.$label,function(){var e=this.getElementsByClassName("oj-radiocheckbox-label-text");void 0!==e&&$(e[0].childNodes[0]).unwrap()}),this.element.unwrap(),this.$choiceItem.hasClass("oj-choice-item-added")&&this.element.unwrap(),this.$choiceItem=null,this.$label=null,e}});var Yn={properties:{describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},labelHint:{type:"string",value:""},labelledBy:{type:"string"},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},optionRenderer:{type:"function",properties:{component:{type:"Element"},index:{type:"number"},data:{type:"object"}}},options:{type:"oj.DataProvider"},optionsKeys:{type:"object",properties:{label:{type:"string"},value:{type:"string"}}},readonly:{type:"boolean",value:!1},required:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{readonlyNoValue:{type:"string"},required:{type:"object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}}}},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},value:{type:"any",writeback:!0}},methods:{refresh:{},validate:{},reset:{},showMessages:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{}},extension:{}};!function(){var t={doValueChangeCheck:!1};n.__registerWidget("oj.ojRadioset",$.oj.editableValue,{version:"1.0.0",defaultElement:"<div>",widgetEventPrefix:"oj",options:{disabled:!1,readOnly:!1,labelledBy:null,optionRenderer:null,options:null,optionsKeys:{},required:!1,value:void 0},refresh:function(){this._super(),this._setup()},widget:function(){return this.uiRadioset},validate:n.EditableValueUtils.validate,_InitOptions:function(e,t){var i,o;this._super(e,t),this._IsCustomElement()||(n.EditableValueUtils.initializeOptionsFromDom([{attribute:"disabled",validateOption:!0},{attribute:"readonly",option:"readOnly",validateOption:!0},{attribute:"required",coerceDomValue:!0,validateOption:!0},{attribute:"title"}],t,this),void 0===t.value&&(this.$radios=this._findRadiosWithMatchingName(),void 0!==(o=0===(i=this.$radios.filter(":checked")).length?void 0:i.val())&&this.option("value",o,{_context:{writeback:!0,internalSet:!0}}),void 0===this.options.value&&(this.options.value=null)))},_ComponentCreate:function(){var e=this.element;if(this._super(),e.uniqueId(),n.RadioCheckboxUtils.generateOptionsFromData.call(this),this._processOjOptions(),this.$radios=this._findRadiosWithMatchingName(),e.is("fieldset"))throw new Error("ojRadioset cannot be bound to a fieldset. Use a div instead.");this.$radios._ojRadioCheckbox().attr("data-oj-internal",""),this.uiRadioset=e.addClass("oj-radioset oj-component").attr("role","radiogroup"),$(e.get(0).childNodes).filter(function(){return!(this.getAttribute&&"contextMenu"===this.getAttribute("slot"))}).wrapAll("<div class='oj-radioset-wrapper'></div>"),this._on(this._events),this._setup()},_ResetComponentState:function(){this._processOjOptions(),this.$radios=this._findRadiosWithMatchingName(),this.$radios.filter(".oj-radio").each(function(){var e=void 0!==$(this).attr("disabled")&&!!$(this).prop("disabled");$(this)._ojRadioCheckbox("option","disabled",e)}),this.$radios.not(".oj-radio")._ojRadioCheckbox()},GetFocusElement:function(){return this._GetContentElement().not(":disabled").first()[0]},_IsRequired:function(){return this.options.required},_SetDisabledDom:function(e){},_refreshRequired:n.EditableValueUtils._refreshRequired,_processOjOptions:function(){if(this._IsCustomElement()){var e,t,i=this._customOptionRenderer.bind(this),n=this.element.children("oj-option");for(e=0,t=n.length;e<t;e++)n[e].customOptionRenderer=i,this.options.readOnly?this._processReadonlyOptions(n[e],!1):this._initInputLabelFromOjOption(n[e]);if((n=this.element.children(".oj-radioset-wrapper").find("oj-option")).length>0)for(e=0,t=n.length;e<t;e++)n[e].customOptionRenderer=i,this.options.readOnly?this._processReadonlyOptions(n[e],!0):this._initInputLabelFromOjOption(n[e])}},_processReadonlyOptions:function(e,t){var i,n=this.options.value,o=e.value;if(t){i=e;do{i=i.parentElement}while(i&&!i.classList.contains("oj-choice-item"));i&&i.classList.contains("oj-choice-item")&&"SPAN"===i.tagName&&i.classList.add("oj-helper-hidden")}else e.classList.add("oj-helper-hidden");if(n)n===o&&(e.classList.remove("oj-helper-hidden"),this._initReadonlyLabelFromOjOption(e,i));else{var s=document.createElement("span"),r=this.getTranslatedString("readonlyNoValue");null!==r&&(s.textContent=r),e.parentElement.insertBefore(s,e)}},_initInputLabelFromOjOption:function(e){var t,i,n=e;$(n).uniqueId();var o=n.getAttribute("id"),s=o+"|rb",r=document.getElementById(s);if(null!==r){var a=n;do{a=a.parentElement}while(a&&!a.classList.contains("oj-choice-item"));a&&a.classList.contains("oj-helper-hidden")&&a.classList.contains("oj-choice-item")&&"SPAN"===a.tagName&&a.classList.remove("oj-helper-hidden"),n&&n.classList.contains("oj-helper-hidden")&&n.classList.remove("oj-helper-hidden"),r&&r.parentElement.classList.contains("oj-helper-hidden")&&r.parentElement.classList.remove("oj-helper-hidden")}else t=document.createElement("span"),r=document.createElement("input"),i=document.createElement("label"),t.setAttribute("class","oj-choice-item"),r.setAttribute("type","radio"),r.setAttribute("value",n.value),r.setAttribute("id",s),i.setAttribute("for",s),n.parentElement.insertBefore(t,n),i.appendChild(n),t.appendChild(r),t.appendChild(i);var l=this.element[0].id,u=n.getAttribute("aria-label"),d=n.getAttribute("aria-labelledby");r.setAttribute("data-oj-option-id",o),l&&""!==l&&r.setAttribute("name",l),u&&""!==u?r.setAttribute("aria-label",u):r.removeAttribute("aria-label"),d&&""!==d?r.setAttribute("aria-labelledby",d):r.removeAttribute("aria-labelledby"),n.disabled?r.setAttribute("disabled",!0):r.removeAttribute("disabled")},_initReadonlyLabelFromOjOption:function(e,t){var i,n,o=e;if(t){$(o).uniqueId();var s=o.getAttribute("id")+"|rb",r=document.getElementById(s);null!==r&&r.parentElement.classList.add("oj-helper-hidden"),t.classList.remove("oj-helper-hidden")}else i=document.createElement("span"),n=document.createElement("label"),i.setAttribute("class","oj-choice-item"),o.parentElement.insertBefore(i,o),n.appendChild(o),i.appendChild(n)},_customOptionRenderer:function(e){var t=e,i=t.getAttribute("id")+"|rb",n=document.getElementById(i);null!==n&&n.classList.contains("oj-radio")&&$(n)._ojRadioCheckbox("option","disabled",t.disabled)},_updateLabelledBy:n.EditableValueUtils._updateLabelledBy,_findRadiosWithMatchingName:function(){var t,i,n=this.element,o=n.find("input[type=radio]:first");return 0===o.length&&e.warn("Could not find any input type=radio within this element"),void 0===(t=o.attr("name"))?n.find("input[type=radio]").not("[name]"):(i='input[type=radio][name="'+t+'"]',n.find(i))},_NotifyContextMenuGesture:function(e,t,i){var n=this.element.find("input[type=radio]"),o=n.filter(":checked"),s=o.length?o:n.filter(":enabled").first();this._OpenContextMenu(t,i,{launcher:s})},_GetMessagingLauncherElement:function(){return this.widget()},_setup:function(){this._propagateDisabled(this.options.disabled),this.element.hasClass("oj-choice-direction-column")||this.element.hasClass("oj-choice-direction-row")||this.element.addClass("oj-choice-direction-column"),this._refreshRequired(this.options.required),this._updateLabelledBy(null,this.options.labelledBy,this.widget())},_events:{change:function(e){this._HandleChangeEvent(e)}},_HandleChangeEvent:function(e){var i=this._GetDisplayValue();this._SetValue(i,e,t)},_GetDisplayValue:function(e){return this._GetElementValue()},_SetDisplayValue:function(e){var t,i,o=this.$radios.length,s=-1,r=this.$radios.get(),a=[];for(t=0;t<o;t++)if(a[t]=this._GetOptionValue(r[t]),a[t]===e){s=t;break}if(-1===s)for(t=0;t<o;t++)if(n.Object.compareValues(a[t],e)){s=t;break}for(t=0;t<o;t++){var l=(i=$(this.$radios[t]))._ojRadioCheckbox("option","checked");t===s?l||i._ojRadioCheckbox("option","checked",!0):l&&i._ojRadioCheckbox("option","checked",!1)}},_GetElementValue:function(){var e=this.$radios.filter(":checked");return 0===e.length?null:this._GetOptionValue(e[0])},_GetOptionValue:function(e){var t,i;return this._IsCustomElement()?(t=document.getElementById(e.getAttribute("data-oj-option-id")))&&(i=t.value):i=e.value,i},_GetDefaultStyleClass:function(){return"oj-radioset"},_GetContentElement:function(){return null!=this.$radios?this.$radios:(this.$radios=this._findRadiosWithMatchingName(),this.$radios)},_AriaRequiredUnsupported:function(){return!0},_AfterSetOptionRequired:n.EditableValueUtils._AfterSetOptionRequired,_propagateDisabled:function(e){var t=!!e;this.$radios.each(function(){$(this).data("oj-_ojRadioCheckbox").__setAncestorComponentDisabled(t)}),this.$radios._ojRadioCheckbox("refreshDisabled")},_setOption:function(e,t,i){var o=this.options.labelledBy;switch(this._super(e,t,i),e){case"disabled":this._propagateDisabled(t);break;case"readOnly":case"value":this._processOjOptions();break;case"labelledBy":this._updateLabelledBy(o,t,this.widget());break;case"options":n.RadioCheckboxUtils.generateOptionsFromData.call(this);break;case"optionsKeys":case"optionRenderer":n.RadioCheckboxUtils.renderOptions.call(this)}},_AfterSetOption:function(e,t,i){switch(this._superApply(arguments),e){case"required":this._AfterSetOptionRequired(e)}},getNodeBySubId:function(e){var t,i,o,s=this._super(e);if(!s)switch(t=this.$radios.get(),e.subId){case"oj-radioset-inputs":s=t;break;case"oj-radioset-radio":if(void 0!==(i=e.value)){var r=t.length,a=-1,l=[];for(o=0;o<r;o++)if(l[o]=this._GetOptionValue(t[o]),l[o]===i){a=o;break}if(-1===a)for(o=0;o<r;o++)if(n.Object.compareValues(l[o],i)){a=o;break}-1!==a&&(s=t[a])}}return s||null},getSubIdByNode:function(e){for(var t=this._GetContentElement()[0].parentElement.parentElement.parentElement,i=e;i&&i!==t;){if("LABEL"===i.nodeName&&(i=document.getElementById(i.for)),"INPUT"===i.nodeName)return{subId:"oj-radioset-radio",value:this._GetOptionValue(i)};i=i.parentElement}return this._super(e)},_destroy:function(){var e=this._super(),t=this.element[0].firstElementChild;return this.$radios&&this.$radios._ojRadioCheckbox("destroy"),$(t).contents().unwrap(),n.RadioCheckboxUtils.removeDataListener.call(this),e}})}(),Yn.extension._WIDGET_NAME="ojRadioset",Yn.extension._ALIASED_PROPS={readonly:"readOnly"},n.CustomElementBridge.register("oj-radioset",{metadata:Yn});var Wn={properties:{refreshContent:{type:"function"},target:{type:"Element"},text:{type:"string",value:""},threshold:{type:"number",value:0},translations:{type:"object",value:{}}},methods:{refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};n.__registerWidget("oj.ojRefresher",$.oj.baseComponent,{widgetEventPrefix:"oj",options:{refreshContent:null,threshold:0,target:null,text:""},_SetupResources:function(){this._super(),this.element.addClass("oj-component"),this._setupRefresh()},_ReleaseResources:function(){this._super(),this._checkObserver(),zn.tearDownPullToRefresh(this.scrollerElement)},refresh:function(){this._super(),this._checkObserver(),this._setupRefresh()},_checkObserver:function(){this.observer&&(this.observer.disconnect(),this.observer=null)},_setupRefresh:function(){var t=this;this._setupScrollerElement(),this.scrollerElement?c.getContext(this.scrollerElement).getBusyContext().whenReady().then(function(){t._setupObserver(t),t._setupPullToRefresh()}):e.error("Issue with the target selected: Target missing or not found")},_setupPullToRefresh:function(){var e=0===this.options.threshold?null:this.options.threshold;zn.setupPullToRefresh(this.scrollerElement,this.options.refreshContent,{threshold:e,primaryText:this.options.text})},_setupScrollerElement:function(){if(null!=this.options.target)this.scrollerElement=this.options.target;else if(this.element[0]){var e=this.element[0].getElementsByClassName("oj-scroller");this.scrollerElement=e.length>0?e[0]:null,this.scrollerElement||0===this.element[0].children.length||(this.scrollerElement=this.element[0].children[0])}else this.scrollerElement=null},_setupObserver:function(e){e.scrollerElement&&(e.observer=new MutationObserver(function(t){t.forEach(function(t){t.removedNodes.length>0&&t.removedNodes[0]===e.scrollerElement&&(e.observer.disconnect(),e.observer=null,zn.tearDownPullToRefresh(e.scrollerElement))})}),e.parentNode=e.scrollerElement.parentNode,e.parentNode?e.observer.observe(e.parentNode,{childList:!0}):e.observer.observe(document,{childList:!0}))}}),Wn.extension._WIDGET_NAME="ojRefresher",n.CustomElementBridge.register("oj-refresher",{metadata:Wn});var qn=function(){function e(e){this.initialKeys=e;var t=this;this._set=new Set,this._keyset=new y,e&&e.forEach(function(e){t.add(e)}),Object.defineProperty(this,"size",{get:function(){return this._set.size}}),this[Symbol.iterator]=function(){return this._set[Symbol.iterator]()}}return e.prototype.clear=function(){this._set.clear(),this._keyset._keys.clear()},e.prototype.delete=function(e){var t=this._keyset.get(e);return t!==this._keyset.NOT_A_KEY&&(this._keyset._keys.delete(t),this._set.delete(t))},e.prototype.forEach=function(e,t){this._set.forEach(e,t)},e.prototype.keys=function(){return this._set.keys()},e.prototype.values=function(){return this._set.values()},e.prototype.entries=function(){return this._set.entries()},e.prototype.has=function(e){return this._keyset.has(e)},e.prototype.add=function(e){return this._keyset.get(e)===this._keyset.NOT_A_KEY&&(this._keyset._keys.add(e),this._set.add(e)),this},Object.defineProperty(e.prototype,Symbol.toStringTag,{get:function(){return Set[Symbol.toStringTag]()},enumerable:!0,configurable:!0}),e}(),Xn={properties:{describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},labelHint:{type:"string",value:""},max:{type:"number"},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},min:{type:"number"},orientation:{type:"string",enumValues:["horizontal","vertical"],value:"horizontal"},step:{type:"number",value:1},transientValue:{type:"number",writeback:!0,readOnly:!0},translations:{type:"object",value:{},properties:{invalidStep:{type:"string"},maxMin:{type:"string"},noValue:{type:"string"},optionNum:{type:"string"},valueRange:{type:"string"}}},type:{type:"string",enumValues:["fromMax","fromMin","single"],value:"fromMin"},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},value:{type:"number",writeback:!0,value:0}},methods:{refresh:{},reset:{},showMessages:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{}},extension:{}};n.__registerWidget("oj.ojSlider",$.oj.editableValue,{defaultElement:"<input>",version:"1.0.1",widgetEventPrefix:"oj",options:{max:100,min:0,orientation:"horizontal",readOnly:!1,disabled:!1,step:1,type:"fromMin",value:0,rawValue:void 0},_numPages:5,_defaultElementId:null,_sliderDisplayValue:null,_isRTL:function(){return"rtl"===n.DomUtils.getReadingDirection()},_ComponentCreate:function(){if(this._super(),this._inputtag=!1,this.element.is("INPUT"))if(this._inputtag=!0,this.element[0].style&&(this._styleFromInputTag=this.element[0].style.cssText),this._inputElementOriginalDisplay=this.element.css("display"),this.element.css("display","none"),this.OuterWrapper)this._elementWrapped=$(this.OuterWrapper);else{var e=$(this.element).wrap("<div> </div>");this._elementWrapped=e.parent()}else this._elementWrapped=this.element;this._transientValueName=this._IsCustomElement()?"transientValue":"rawValue",this._componentSetup()},_SetRawValue:function(e,t){var i={};i._context={originalEvent:t,writeback:!0,internalSet:!0,readOnly:!0},n.Object.compareValues(this.options[this._transientValueName],e)||this.option(this._transientValueName,e,i)},_componentSetup:function(){this._newMultiValue=[],this._thumbIndex=null;var e="oj-slider ";this._isVertical()?e+="oj-slider-vertical":e+="oj-slider-horizontal",e+=" oj-component oj-form-control",this.options.readonly&&(e+=" oj-read-only"),this.options.disabled&&(e+=" oj-disabled"),this._elementWrapped.removeClass(),this._elementWrapped.addClass(e),"range"===this.options.type?this._multipleThumbs=!0:this._multipleThumbs=!1,this._calculateNewMax(),this._createSliderContainer(),this._createBarBackground(),this._buildValueOption(),this._createRange(),this._createThumbs(),this._updateUI(),this._setupEvents()},_copyLabelledbyToThumb:function(e){var t=this._elementWrapped.find(".oj-slider-thumb");if(t.attr("aria-labelledby",e),t.length>1){var i=t[1];$(i).attr("aria-labelledby",String(e))}},_AfterCreate:function(){if(this._super(),this._makeDraggable(),this.OuterWrapper){var e=this.uuid+"_Label",t=n.EditableValueUtils.getOjLabelId(this.widget(),e);t&&this.element.attr("aria-labelledby",t)}if(this.OuterWrapper){var i=this.element.attr("aria-labelledby");if(null!=i)return void this._copyLabelledbyToThumb(i)}var o=this._GetLabelElementLocal();if(o){var s=o.attr("id");s||(s=o.attr("for")),s.length>0&&this._copyLabelledbyToThumb(s)}else{var r;(r=this.OuterWrapper?this._elementWrapped.attr("aria-label"):this.element.attr("aria-label"))&&this._elementWrapped.find(".oj-slider-thumb").attr("aria-label",r)}},_GetLabelElementLocal:function(){var e=this._getAriaLabelledByElementLocal();return null!==e&&0!==e.length?e:null!==(e=this._getAriaLabelForElementLocal())&&0!==e.length?e:null},_getAriaLabelForElementLocal:function(){var e;if(void 0!==(e=this.element.prop("id"))){var t=$("label[for='"+e+"']");if(t.length>0)return t;var i="span[for='"+e+"']";if(0!==$(i).length)return $(i)}return null},_getAriaLabelledByElementLocal:function(){var e=this.element.attr("aria-labelledby");if(void 0===e&&this.OuterWrapper){var t=this._elementWrapped.attr("aria-labelledby");if(t&&null!==document.getElementById(t))return $(document.getElementById(t))}if(void 0!==e){var i=$("label[id='"+e+"']");if(i.length>0)return i;var n=$("span[id='"+e+"']");if(n.length>0)return n}return null},widget:function(){return this._elementWrapped},_SetDisplayValue:function(e){this._sliderDisplayValue=e},_GetDisplayValue:function(){return this._sliderDisplayValue},_getElementId:function(){return this.OuterWrapper?(this._elementWrapped[0].id||this._elementWrapped.uniqueId(),this._elementWrapped[0].id):(this.element[0].id||this.element.uniqueId(),this.element[0].id)},_getThumbId:function(e){return this._getElementId()+"-thumb"+e},_getBarValueId:function(){return this._getElementId()+"-barValue"},_getBarBackgroundId:function(){return this._getElementId()+"-barBack"},_getSliderWrapperId:function(){return this._getElementId()+"-sliderWrapper"},_createThumbs:function(){var e,t,i="",n="class='oj-slider-thumb ui-state-default' tabindex='0' role='slider'aria-valuemin = '"+this._valueMin()+"' aria-valuemax = '"+this._valueMax()+"' ></span>",o=[];for(t=this._multipleThumbs?2:1,e=0;e<t;e++)i="<span id='"+this._getThumbId(e)+"' "+n,o.push(i);this._thumbs=$(o.join("")).appendTo(this._sliderContainer),this._thumb=this._thumbs.eq(0),this._refreshThumbOptions()},_refreshThumbOptions:function(){var e=this,t=0;this._thumbs.each(function(){$(this).data("oj-slider-thumb-index",t),t+=1,e._isVertical()&&$(this).attr("aria-orientation","vertical"),e.options.disabled?($(this).attr("aria-disabled","true"),$(this).removeAttr("tabindex")):($(this).removeAttr("aria-disabled"),$(this).attr("tabindex","0")),e.options.readOnly?$(this).attr("title","read only"):$(this).removeAttr("title")})},_createSliderContainer:function(){var e=this._getSliderWrapperId(),t=this._elementWrapped.find("#"+e);t.length&&t.remove(),this._sliderContainer=$("<div></div>"),$(this._sliderContainer).attr("id",e),this._sliderContainer.addClass("oj-slider-container"),this.element.after(this._sliderContainer),this._sliderContainer[0].style.cssText=this._styleFromInputTag},_createBarBackground:function(){var e=this._getBarBackgroundId(),t=this._elementWrapped.find("#"+e);t.length&&t.remove(),this._barback=$("<div></div>"),$(this._barback).attr("id",e),this._barback.addClass("oj-slider-bar"),this._sliderContainer.append(this._barback);var i=this;this._barback.on("mousedown"+i.eventNamespace,function(e){i._repositionThumb(e),i._mouseStop(e),i._getActiveThumb().focus()})},_buildValueOption:function(){if(this.options.type)if(null==this.options.value)this._multipleThumbs?this.options.value=[this._valueMin(),this._valueMax()]:this.options.value=this._valueMin(),this.option("value",this.options.value,{_context:{writeback:!0,internalSet:!0}});else if(this._multipleThumbs){var e;2!==this.options.value.length&&(e=this.options.value.length>0?this.options.value[0]:this._valueMin(),this.options.value=[e,this._valueMax()],this.option("value",this.options.value,{_context:{writeback:!0,internalSet:!0}}))}},_createRange:function(){var e=this.options,t="";if(e.type){this._range=$("<div></div>"),$(this._range).attr("id",this._getBarValueId()),this._sliderContainer.append(this._range),t="oj-slider-range oj-slider-bar-value";var i=this;this._range.on("mousedown"+i.eventNamespace,function(e){i._repositionThumb(e),i._mouseStop(e),i._getActiveThumb().focus()}),this._range=this._sliderContainer.find("#"+this._getBarValueId());var n="";"fromMin"===e.type?n=" oj-slider-range-min":"fromMax"===e.type&&(n=" oj-slider-range-max"),this._range.addClass(t+n)}else this._range&&this._range.remove(),this._range=null},_setupTouch:function(e){this._touchProxy=n._TouchProxy.addTouchListeners(e)},_tearDownTouch:function(e){n._TouchProxy.removeTouchListeners(e)},_setupEvents:function(){this._CanSetValue()&&this._AddHoverable(this._elementWrapped),this._thumbs.toArray().forEach(function(e){var t=$(e);this._UnregisterChildNode(t),this._on(t,this._thumbEvents),this._setupTouch(t),this._focusable({element:t,applyHighlight:!0})},this)},_GetMessagingLauncherElement:function(){return this._elementWrapped},_GetContentElement:function(){return this._getActiveThumb()},_destroySliderDom:function(){this._thumbs.toArray().forEach(function(e){var t=$(e);this._tearDownTouch(t)},this),this._destroyDraggable(),this._range&&this._range.remove(),this._sliderContainer&&this._sliderContainer.remove(),this.OuterWrapper?(this._elementWrapped.removeUniqueId(),this._RemoveHoverable(this._elementWrapped)):(this.element.removeUniqueId(),this._RemoveHoverable(this.element))},_unwrapSlider:function(){n.DomUtils.unwrap(this.element,this._elementWrapped),this.element.css("display",this._inputElementOriginalDisplay),this._RestoreAttributes(this.element)},_destroy:function(){return this._destroySliderDom(),this._unwrapSlider(),this._super()},_repositionThumb:function(e){var t,i,n,o=this.options,s=0,r=this;return this._closestThumb=this._thumb,!(o.disabled||o.readOnly||(t={x:e.pageX,y:e.pageY},i=this._getNormValueFromMouse(t),n=this._valueMax()-this._valueMin()+1,this._multipleThumbs&&this._thumbs.each(function(e){var t=Math.abs(i-r._getMultiValues(e));(n>t||n===t&&(e===r._lastChangedValueIndex||r._getMultiValues(e)===o.min))&&(n=t,this._closestThumb=$(this),s=e)}),this._thumbIndex=s,this._closestThumb&&(this._thumbs.hasClass("ui-state-hover")||this._slide(e,s,i),this._getActiveThumb().addClass("oj-active").focus(),this._range.addClass("oj-active"),0)))},_initDragging:function(e,t){var i=this.options;return!i.disabled&&!i.readOnly&&(t.removeClass("oj-focus-highlight"),t.addClass("oj-active").focus(),this._range.addClass("oj-active"),!0)},_mouseDragInternal:function(e,t){var i=this._getNormValueFromThumb(t);this._slide(e,this._thumbIndex,i,!0);var n=100*this._getFracFromThumb(t);return this._multipleThumbs?this._setRangeMultiThumb(n,this._thumbIndex):this._setRange(n),!1},_mouseStop:function(e,t){this._thumbs.removeClass("oj-active"),this._range.removeClass("oj-active");var i=this._getNormValueFromThumb(t);return this._slide(e,this._thumbIndex,i),this._change(e,this._thumbIndex,!1),this._thumbIndex=null,!1},_isVertical:function(){return"vertical"===this.options.orientation},_getOrientationAdjustedFrac:function(e){var t=e;return t>1&&(t=1),t<0&&(t=0),this._isVertical()&&(t=1-t),t},_getNormValueFromMouse:function(e){var t,i,n=this._getFracFromMouse(e);return t=this._valueMax()-this._valueMin(),this._isRTL()&&!this._isVertical()&&(n=1-n),i=this._valueMin()+n*t,this._trimAlignValue(i)},_getFracFromMouse:function(e){var t,i,n;return this._isVertical()?(t=this._barback.height(),i=e.y-this._barback.offset().top):(t=this._barback.width(),i=e.x-this._barback.offset().left),0===t?1:(n=i/t,n=this._getOrientationAdjustedFrac(n))},_getActiveThumb:function(){return this._multipleThumbs?$(this._thumbs[this._thumbIndex]):this._thumb},_getFracFromThumb:function(e){var t,i,n,o,s=e;if(e||(s=this._getActiveThumb()),this._isVertical()){var r=s.outerHeight()/2;o=s.offset().top+r,t=this._barback.height(),i=o-this._barback.offset().top}else{var a=s.outerWidth()/2;o=s.offset().left+a,t=this._barback.width(),i=o-this._barback.offset().left}return 0===t?1:(n=i/t,n=this._getOrientationAdjustedFrac(n))},_getNormValueFromThumb:function(e){var t,i,n;return t=this._getFracFromThumb(e),i=this._valueMax()-this._valueMin(),this._isRTL()&&!this._isVertical()&&(t=1-t),n=this._valueMin()+t*i,this._trimAlignValue(n)},_getOtherThumbValue:function(e){return this._getMultiValues(e?0:1)},_getNewThumbValueLimited:function(e,t,i){return 2===this.options.value.length&&(0===e&&t>i||1===e&&t<i)?i:t},_slide:function(e,t,i,n){var o;if(this._multipleThumbs){o=this._getOtherThumbValue(t);var s=this._getNewThumbValueLimited(t,i,o);s!==this._getMultiValues(t)&&this._setMultiValue(e,t,s,n)}else i!==this._getSingleValue()&&(this._setSingleValue(e,i,n),n||this._inputtag&&this.element.val(i))},_setSingleValue:function(e,t,i){this._newValue=this._trimAlignValue(t),this._SetRawValue(this._newValue,e),i||(this.options[this._transientValueName]=this._newValue,this._SetValue(this._newValue,e),this._updateUI())},_change:function(e,t,i){this._multipleThumbs?(this._lastChangedValues=this._getNewValues(t,this._newMultiValue[t]),this._SetRawValue(this._lastChangedValues,e),i||this._SetValue(this._lastChangedValues,e)):(this._SetRawValue(this._newValue,e),i||this._SetValue(this._newValue,e)),this._lastChangedValueIndex=t},_getNewValues:function(e,t){var i,n;for(i=this.options.value.slice(),n=0;n<i.length;n++)i[n]=this._trimAlignValue(i[n]);return e===this._thumbIndex&&(i[e]=t),i},_getSingleValue:function(){return this._getValueAligned()},_getMultiValues:function(e){return this._getValuesAligned(e)},_setMultiValue:function(e,t,i,n){this._newMultiValue[t]=this._trimAlignValue(i),this._change(e,t,n),n||this._updateUI()},_setOption:function(e,t,i){var n;if("value"===e)if(Array.isArray(t))if(isNaN(t[0]))this._multipleThumbs=!1,n=this._parse(e,t[0]),this._checkValueBounds(n,this._valueMin(),this._valueMax());else{this._multipleThumbs=!0,n=t;for(var o=0;o<n.length;o++)this._checkValueBounds(n[o],this._valueMin(),this._valueMax())}else this._multipleThumbs=!1,n=this._IsCustomElement()?t:this._parse(e,t),this._checkValueBounds(n,this._valueMin(),this._valueMax());switch("max"===e||"min"===e?(n=this._IsCustomElement()?t:this._parse(e,t),"min"===e?(this._checkMinMax(n,this._valueMax()),this._multipleThumbs?(this._getMultiValues(0)<n&&this._super("value",[n,this._getMultiValues(1)],i),this._getMultiValues(1)<n&&this._super("value",[this._getMultiValues(0),n],i)):this._getSingleValue()<n&&this._super("value",n,i)):"max"===e&&(this._checkMinMax(this._valueMin(),n),this._multipleThumbs?(this._getMultiValues(0)>n&&this._super("value",[n,this._getMultiValues(1)],i),this._getMultiValues(1)>n&&this._super("value",[this._getMultiValues(0),n],i)):this._getSingleValue()>n&&this._super("value",n,i))):n="step"===e?this._parseStep(t):t,this._super(e,n,i),"readOnly"===e&&(this.options.readonly=n),"disabled"===e&&(this.options.disabled=n),e){case"disabled":this._refreshThumbOptions(),this.options.disabled?this._disableDraggable():this._makeDraggable();break;case"value":this._updateUI(),this._makeDraggable();break;case"min":case"max":this._calculateNewMax(),this._updateUI(),this._makeDraggable();break;case"orientation":case"readonly":case"step":case"type":this._reCreate()}},_reCreate:function(){this._destroySliderDom(),this._componentSetup(),this.OuterWrapper&&this._elementWrapped.addClass("oj-complete"),this._AfterCreate()},_getValueAligned:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_getValuesAligned:function(e){return this._trimAlignValue(this.options.value[e])},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var e=this._valueMin();if((this.options.max-e)/this.options.step%1!=0){var t=(this.options.max-e)%this.options.step;this.max=this.options.max-t+this.options.step}else this.max=this.options.max},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_getGrid:function(){var e;e=this.options.step>0?(this._valueMax()-this._valueMin())/this.options.step:100;var t=(this._isVertical()?this._barback.height():this._barback.width())/e;return t<1&&(t=1),this._isVertical()?[1,t]:[t,1]},_getThumbsValueFrac:function(e){return(this._getMultiValues(e)-this._valueMin())/(this._valueMax()-this._valueMin())},_updateUI:function(){var e,t,i,n;this._multipleThumbs?this._thumbs.toArray().forEach(function(t,o){var s=$(t);e=100*this._getThumbsValueFrac(o),this._isRTL()&&!this._isVertical()&&(e=100-e),this._isVertical()?s.css({top:100-e+"%"}):s.css({left:e+"%"}),0===o&&(100===e?s.css({zIndex:1}):s.css({zIndex:""})),s.hasClass("oj-active")||(s.attr("aria-valuenow",this._getMultiValues(o)),s.attr("aria-valuemin",i),s.attr("aria-valuemax",n)),this._setRangeMultiThumb(e,o)},this):(t=this._getValueAligned(),i=this._valueMin(),n=this._valueMax(),e=n!==i?(t-i)/(n-i)*100:0,this._isRTL()&&!this._isVertical()&&(e=100-e),this._isVertical()?this._thumb.css({top:100-e+"%"}):this._thumb.css({left:e+"%"}),$(this._thumb).hasClass("oj-active")||($(this._thumb).attr("aria-valuenow",t),$(this._thumb).attr("aria-valuemin",i),$(this._thumb).attr("aria-valuemax",n)),this._setRange(e))},_setRange:function(e){var t=this.options.type;this._isVertical()?("fromMin"===t&&this._range.css({height:e+"%"}),"fromMax"===t&&this._range.css({height:100-e+"%"})):this._isRTL()?("fromMin"===t&&this._range.css({width:100-e+"%"}),"fromMax"===t&&this._range.css({width:e+"%"})):("fromMin"===t&&this._range.css({width:e+"%"}),"fromMax"===t&&this._range.css({width:100-e+"%"}))},_setRangeMultiThumb:function(e,t){var i=this._range.attr("id");if(0===t){var n=100*this._getThumbsValueFrac(1);switch(this.options.type){case"fromMin":this._isVertical()?this._range.css({height:e+"%"}):this._range.css({width:e+"%"});break;case"range":this._isVertical()?(this._range.css({top:100-n+"%"}),this._range.css({height:n-e+"%"})):this._isRTL()?(this._range.css({left:100-n+"%"}),this._range.css({width:n-(100-e)+"%"})):(this._range.css({left:e+"%"}),this._range.css({width:n-e+"%"}))}}else{var o=100*this._getThumbsValueFrac(0);switch(this.options.type){case"fromMax":this._isVertical()?this._range.css({height:100-e+"%"}):this._range.css({width:100-e+"%"});break;case"range":if(this._isVertical())document.getElementById(i)&&(this._range.css({top:100-e+"%"}),this._range.css({height:e-o+"%"}));else if(this._isRTL())document.getElementById(i)&&(this._range.css({left:e+"%"}),this._range.css({width:100-e-o+"%"}));else if(document.getElementById(i)){var s=parseInt(document.getElementById(i).style.left,10);this._range.css({width:e-s+"%"})}}}},_thumbEvents:{keydown:function(e){var t,i,n,o,s=$(e.target).data("oj-slider-thumb-index");switch(this._thumbIndex=s,e.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:e.preventDefault(),$(e.target).addClass("oj-active")}switch(n=this.options.step,t=i=this._multipleThumbs?this._getMultiValues(s):this._getSingleValue(),e.keyCode){case $.ui.keyCode.HOME:i=this._valueMin();break;case $.ui.keyCode.END:i=this._valueMax();break;case $.ui.keyCode.PAGE_UP:i=this._trimAlignValue(t+(this._valueMax()-this._valueMin())/this._numPages);break;case $.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(t-(this._valueMax()-this._valueMin())/this._numPages);break;case $.ui.keyCode.UP:if(t===this._valueMax())return;o=t+n,i=this._trimAlignValue(o);break;case $.ui.keyCode.RIGHT:if(!this._isRTL()||this._isVertical()){if(t===this._valueMax())return;o=t+n}else{if(t===this._valueMin())return;o=t-n}i=this._trimAlignValue(o);break;case $.ui.keyCode.DOWN:if(t===this._valueMin())return;o=t-n,i=this._trimAlignValue(o);break;case $.ui.keyCode.LEFT:if(!this._isRTL()||this._isVertical()){if(t===this._valueMin())return;o=t-n}else{if(t===this._valueMax())return;o=t+n}i=this._trimAlignValue(o)}this._slide(e,s,i)},keyup:function(e){switch(e.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:var t=$(e.target).data("oj-slider-thumb-index");this._thumbIndex=t,this._change(e,t,!1),$(e.target).removeClass("oj-active"),this._updateUI(!0),this._thumbIndex=null}}},_InitOptions:function(e,t){var i=this.options,o=this;if(this._superApply(arguments),n.EditableValueUtils.initializeOptionsFromDom([{attribute:"disabled",validateOption:!0},{attribute:"value"},{attribute:"title"},{attribute:"min"},{attribute:"max"},{attribute:"step"}],t,this,function(e){for(var t=e,n=["value","step","min","max"],s=0;s<n.length;s++){var r=n[s],a=r in t?t[r]:i[r];null!=a&&("step"===r?t[r]=o._parseStep(a):"min"===r||"max"===r?t[r]=o._parse(r,a):"value"===r&&(Array.isArray(a)?t[r]=a:t[r]=o._parse(r,a)))}}),!this._IsCustomElement()&&void 0===i.value)throw new Error(this.getTranslatedString("noValue"));if(this._checkMinMax(i.min,i.max),Array.isArray(i.value))for(var s=0;s<i.value.length;s+=1)this._checkValueBounds(i.value[s],i.min,i.max);else this._checkValueBounds(i.value,i.min,i.max)},_checkValueBounds:function(e,t,i){if(null!=t&&e<t)throw new Error(this.getTranslatedString("valueRange"));if(null!=i&&e>i)throw new Error(this.getTranslatedString("valueRange"))},_checkMinMax:function(e,t){if(null!=e&&null!=t&&e>=t)throw new Error(this.getTranslatedString("maxMin"))},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;var t=e.subId;return"oj-slider-thumb-0"===t?this.widget().find(".oj-slider-thumb")[0]:"oj-slider-thumb-1"===t?this.widget().find(".oj-slider-thumb")[1]:"oj-slider-bar"===t?this.widget().find("."+t)[0]:"oj-slider-bar-value"===t?this.widget().find("."+t)[0]:null},getSubIdByNode:function(e){if(null!=e){if(e.id===this._getThumbId(0)&&$(e).hasClass("oj-slider-thumb"))return{subId:"oj-slider-thumb-0"};if(e.id===this._getThumbId(1)&&$(e).hasClass("oj-slider-thumb"))return{subId:"oj-slider-thumb-1"};if($(e).hasClass("oj-slider-bar"))return{subId:"oj-slider-bar"};if($(e).hasClass("oj-slider-bar-value"))return{subId:"oj-slider-bar-value"}}return null},_GetDefaultStyleClass:function(){return"oj-slider"},_parse:function(e,t){var i;if(i=null!==t?+t:t,isNaN(i))throw new Error(this.getTranslatedString("optionNum",{option:e}));return i},_parseStep:function(e){var t;if(null===e)return 1;if((t=this._parse("step",e))<=0)throw new Error(this.getTranslatedString("invalidStep"));return(null===t||t<=0)&&(t=1),t},_getEndInterval:function(){return this._barback.offset().left+this._barback.width()},_getStartInterval:function(){return this._barback.offset().left},_callDraggable:function(e){var t,i=this._getGrid(),n=e[0].style;t=this._isVertical()?"y":"x";var o=this;e.draggable({axis:t,grid:i,disabled:!1,start:function(t){e[0]===$(o._thumbs)[0]?o._thumbIndex=0:e[0]===$(o._thumbs)[1]&&(o._thumbIndex=1),o._initDragging(t,e)},drag:function(t,i){var s=i.position;if(o._isVertical()?(n.left="",s.left=""):(n.top="",s.top=""),o._mouseDragInternal(t,e),o._isVertical()?(s.top<0&&(s.top=0),s.top>o._barback.height()&&(s.top=o._barback.height())):(s.left<0&&(s.left=0),s.left>o._barback.width()&&(s.left=o._barback.width())),o._multipleThumbs){var r,a;if(r=0===o._thumbIndex?$(o._thumbs[1]):$(o._thumbs[0]),o._isVertical()){var l=e.outerHeight()/2,u=o._barback.offsetParent().offset().top;a=r.offset().top+l-u}else{var d=e.outerWidth()/2,h=o._barback.offsetParent().offset().left;a=r.offset().left+d-h}0===o._thumbIndex?o._isVertical()?s.top<a&&(s.top=a):o._isRTL()?s.left<a&&(s.left=a):s.left>a&&(s.left=a):o._isVertical()?s.top>a&&(s.top=a):o._isRTL()?s.left>a&&(s.left=a):s.left<a&&(s.left=a)}},stop:function(t){this.style.width="",this.style.height="",o._mouseStop(t,e)}})},_makeDraggable:function(){this.options.disabled||(this._multipleThumbs?this._thumbs.toArray().forEach(function(e){var t=$(e);this._callDraggable(t)},this):this._callDraggable(this._thumb))},_disableDraggable:function(){this._multipleThumbs?this._thumbs.toArray().forEach(function(e){var t=$(e);t.is(".ui-draggable")&&t.draggable("disable")},this):this._thumb.is(".ui-draggable")&&this._thumb.draggable("disable")},_destroyDraggable:function(){this._multipleThumbs?this._thumbs.toArray().forEach(function(e){var t=$(e);t.is(".ui-draggable")&&t.draggable("destroy")},this):this._thumb.is(".ui-draggable")&&this._thumb.draggable("destroy")}}),Xn.extension._WIDGET_NAME="ojSlider",Xn.extension._INNER_ELEM="input",n.CustomElementBridge.register("oj-slider",{metadata:Xn});var Zn={properties:{animationDuration:{type:"number"},animationOnDataChange:{type:"string",enumValues:["auto","none"],value:"none"},animationOnDisplay:{type:"string",enumValues:["auto","none"],value:"none"},animationUpdateColor:{type:"string",value:""},as:{type:"string",value:""},colorLabel:{type:"string",value:""},data:{type:"oj.DataProvider"},displayLevels:{type:"number",value:1.7976931348623157e308},drilling:{type:"string",enumValues:["off","on"],value:"off"},expanded:{type:"KeySet",writeback:!0,value:"new ExpandAllKeySet()"},hiddenCategories:{type:"Array<string>",writeback:!0,value:[]},highlightMatch:{type:"string",enumValues:["all","any"],value:"all"},highlightedCategories:{type:"Array<string>",writeback:!0,value:[]},hoverBehavior:{type:"string",enumValues:["dim","none"],value:"none"},hoverBehaviorDelay:{type:"number",value:200},nodeDefaults:{type:"object",properties:{borderColor:{type:"string"},borderWidth:{type:"number",value:1},hoverColor:{type:"string"},labelDisplay:{type:"string",enumValues:["auto","horizontal","off","rotated"],value:"auto"},labelHalign:{type:"string",enumValues:["center","inner","outer"],value:"center"},labelMinLength:{type:"number",value:1},labelStyle:{type:"object"},selectedInnerColor:{type:"string"},selectedOuterColor:{type:"string"},showDisclosure:{type:"string",enumValues:["off","on"],value:"off"}}},nodes:{type:"Array<Object>|Promise"},rootNode:{type:"any",value:'""'},rootNodeContent:{type:"object",properties:{renderer:{type:"function",properties:{outerBounds:{type:"object",properties:{x:{type:"number"},y:{type:"number"},width:{type:"number"},height:{type:"number"}}},innerBounds:{type:"object",properties:{x:{type:"number"},y:{type:"number"},width:{type:"number"},height:{type:"number"}}},id:{type:"any"},data:{type:"object"},itemData:{type:"object"},componentElement:{type:"Element"}}}}},rotation:{type:"string",enumValues:["off","on"],value:"on"},selection:{type:"Array<any>",writeback:!0,value:[]},selectionMode:{type:"string",enumValues:["multiple","none","single"],value:"multiple"},sizeLabel:{type:"string",value:""},sorting:{type:"string",enumValues:["off","on"],value:"off"},startAngle:{type:"number",writeback:!0,value:90},tooltip:{type:"object",properties:{renderer:{type:"function",properties:{parentElement:{type:"Element"},id:{type:"any"},label:{type:"string"},value:{type:"number"},radius:{type:"number"},color:{type:"string"},data:{type:"object"},itemData:{type:"object"},componentElement:{type:"Element"}}}}},touchResponse:{type:"string",enumValues:["auto","touchStart"],value:"auto"},trackResize:{type:"string",enumValues:["off","on"],value:"on"},translations:{type:"object",value:{},properties:{componentName:{type:"string"},labelAndValue:{type:"string"},labelClearSelection:{type:"string"},labelColor:{type:"string"},labelCountWithTotal:{type:"string"},labelDataVisualization:{type:"string"},labelInvalidData:{type:"string"},labelNoData:{type:"string"},labelSize:{type:"string"},stateCollapsed:{type:"string"},stateDrillable:{type:"string"},stateExpanded:{type:"string"},stateHidden:{type:"string"},stateIsolated:{type:"string"},stateMaximized:{type:"string"},stateMinimized:{type:"string"},stateSelected:{type:"string"},stateUnselected:{type:"string"},stateVisible:{type:"string"},tooltipCollapse:{type:"string"},tooltipExpand:{type:"string"}}}},methods:{getNode:{},getContextByNode:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojRotateInput:{},ojBeforeDrill:{},ojDrill:{},ojBeforeExpand:{},ojExpand:{},ojBeforeCollapse:{},ojCollapse:{}},extension:{}},Jn={properties:{borderColor:{type:"string",value:"rgba(255,255,255,0.3)"},borderWidth:{type:"number",value:1},categories:{type:"Array<string>",value:[]},color:{type:"string",value:"#000000"},drilling:{type:"string",enumValues:["inherit","off","on"],value:"inherit"},label:{type:"string",value:""},labelDisplay:{type:"string",enumValues:["auto","horizontal","off","rotated"],value:"auto"},labelHalign:{type:"string",enumValues:["center","inner","outer"],value:"center"},labelStyle:{type:"object",value:{}},pattern:{type:"string",enumValues:["largeChecker","largeCrosshatch","largeDiagonalLeft","largeDiagonalRight","largeDiamond","largeTriangle","none","smallChecker","smallCrosshatch","smallDiagonalLeft","smallDiagonalRight","smallDiamond","smallTriangle"],value:"none"},radius:{type:"number",value:1},selectable:{type:"string",enumValues:["auto","off"],value:"auto"},shortDesc:{type:"string",value:""},showDisclosure:{type:"string",enumValues:["inherit","off","on"],value:"inherit"},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}},value:{type:"number"}},extension:{}};n.__registerWidget("oj.ojSunburst",$.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{animationDuration:void 0,animationOnDataChange:"none",animationOnDisplay:"none",animationUpdateColor:"",as:"",data:null,displayLevels:Number.MAX_VALUE,expanded:new n.ExpandAllKeySet,hiddenCategories:[],highlightedCategories:[],highlightMatch:"all",hoverBehavior:"none",hoverBehaviorDelay:200,tooltip:{renderer:null},selectionMode:"multiple",rotation:"on",sorting:"off",rootNodeContent:{renderer:null},startAngle:90,colorLabel:"",sizeLabel:"",drilling:"off",rootNode:"",nodes:null,nodeDefaults:{borderColor:"rgba(255,255,255,0.3)",borderWidth:1,showDisclosure:"off",labelHalign:"center",labelStyle:void 0,labelMinLength:1,labelDisplay:"auto",hoverColor:void 0,selectedInnerColor:void 0,selectedOuterColor:void 0},selection:[],touchResponse:"auto",rotateInput:null,beforeDrill:null,drill:null,beforeExpand:null,expand:null,beforeCollapse:null,collapse:null},_CreateDvtComponent:function(e,t,i){return dvt.Sunburst.newInstance(e,t,i)},_GetSimpleDataProviderConfigs:function(){return{data:{templateName:"nodeTemplate",templateElementName:"oj-sunburst-node",resultPath:"nodes",expandedKeySet:this.options.expanded,maxFetchDepth:this.options.displayLevels-1}}},_OptionChangeHandler:function(e){var t=Object.prototype.hasOwnProperty.bind(e);(t("expanded")||t("displayLevels"))&&this._ClearDataProviderState("data"),this._super(e)},_ConvertLocatorToSubId:function(e){var t=e.subId;return"oj-sunburst-node"===t?t="node"+this._GetStringFromIndexPath(e.indexPath):"oj-sunburst-tooltip"===t&&(t="tooltip"),t},_ConvertSubIdToLocator:function(e){var t={};return 0===e.indexOf("node")?(t.subId="oj-sunburst-node",t.indexPath=this._GetIndexPath(e)):"tooltip"===e&&(t.subId="oj-sunburst-tooltip"),t},_ProcessOptions:function(){this._super();var e=this.options.rootNodeContent;e&&e._renderer&&(e.renderer=this._GetTemplateRenderer(e._renderer,"rootNodeContent")),this.options.expanded||(this.options.expanded=new n.ExpandAllKeySet),this.options.data&&(this._fetchDataHandler=this._GetFetchDataHandler("data"))},_GetComponentRendererOptions:function(){return["tooltip/renderer","rootNodeContent/renderer"]},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-sunburst"),e},_GetChildStyleClasses:function(){var e=this._super();return e["oj-dvtbase oj-sunburst"]={path:"animationDuration",property:"ANIM_DUR"},e["oj-sunburst-attribute-type-text"]={path:"styleDefaults/_attributeTypeTextStyle",property:"TEXT"},e["oj-sunburst-attribute-value-text"]={path:"styleDefaults/_attributeValueTextStyle",property:"TEXT"},e["oj-sunburst-drill-text"]={path:"styleDefaults/_drillTextStyle",property:"TEXT"},e["oj-sunburst-current-drill-text"]={path:"styleDefaults/_currentTextStyle",property:"TEXT"},e["oj-sunburst-node"]={path:"nodeDefaults/labelStyle",property:"TEXT"},e["oj-sunburst-node oj-hover"]={path:"nodeDefaults/hoverColor",property:"border-top-color"},e["oj-sunburst-node oj-selected"]=[{path:"nodeDefaults/selectedOuterColor",property:"border-top-color"},{path:"nodeDefaults/selectedInnerColor",property:"border-bottom-color"}],e},_GetEventTypes:function(){return["optionChange","rotateInput","beforeDrill","drill","beforeExpand","expand","beforeCollapse","collapse"]},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtSunburstBundle.COLLAPSE"]=e.tooltipCollapse,t["DvtSunburstBundle.COLOR"]=e.labelColor,t["DvtSunburstBundle.EXPAND"]=e.tooltipExpand,t["DvtSunburstBundle.SIZE"]=e.labelSize,t["DvtUtilBundle.SUNBURST"]=e.componentName,t},_HandleEvent:function(e){var t,i=e.type,n=e.data;n&&n._itemData&&(t=n._itemData,delete(n=$.extend({},e.data))._itemData);var o={id:e.id,data:n,itemData:t};if(this._IsCustomElement()||(o.component=e.component),"rotation"===i)e.complete?this._UserOptionChange("startAngle",e.startAngle):this._trigger("rotateInput",null,{value:e.startAngle});else if("drill"===i)e.id&&this._trigger("beforeDrill",null,o)&&(this._UserOptionChange("rootNode",e.id),this._Render(),this._trigger("drill",null,o));else if("expand"===i){if(e.id&&this._trigger("beforeExpand",null,o)){var s=this;this._NotReady(),(this.options.data?this._fetchDataHandler(this.options.data,e.expanded,null,o.id):Promise.resolve()).then(function(){s._UserOptionChange("expanded",e.expanded),s._Render(),s._trigger("expand",null,o)})}}else"collapse"===i?e.id&&this._trigger("beforeCollapse",null,o)&&(this._UserOptionChange("expanded",e.expanded),this._Render(),this._trigger("collapse",null,o)):this._super(e)},_LoadResources:function(){null==this.options._resources&&(this.options._resources={});var e=this.options._resources;e.rotateCursor=p.getResourceUrl("resources/internal-deps/dvt/sunburst/rotate.cur"),e.expand="oj-sunburst-expand-icon",e.expandOver="oj-sunburst-expand-icon oj-hover",e.expandDown="oj-sunburst-expand-icon oj-active",e.collapse="oj-sunburst-collapse-icon",e.collapseOver="oj-sunburst-collapse-icon oj-hover",e.collapseDown="oj-sunburst-collapse-icon oj-active"},getNode:function(e){return this._component.getAutomation().getNode(e)},getContextByNode:function(e){var t=this.getSubIdByNode(e);return t&&"oj-sunburst-tooltip"!==t.subId?t:null},_GetComponentDeferredDataPaths:function(){return{root:["nodes","data"]}}}),Zn.extension._WIDGET_NAME="ojSunburst",n.CustomElementBridge.register("oj-sunburst",{metadata:Zn}),Jn.extension._CONSTRUCTOR=function(){},n.CustomElementBridge.register("oj-sunburst-node",{metadata:Jn});var Qn={properties:{translations:{type:"object",value:{},properties:{ariaHideActionsDescription:{type:"string"},ariaShowEndActionsDescription:{type:"string"},ariaShowStartActionsDescription:{type:"string"}}}},methods:{refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAction:{}},extension:{}};n.__registerWidget("oj.ojSwipeActions",$.oj.baseComponent,{version:"1.0.0",defaultElement:"<div>",widgetEventPrefix:"oj",options:{action:null},_ComponentCreate:function(){var e,t=this,i=!1,n=!1,o=!1;this._super(),this.element.uniqueId(),this.element[0].classList.add("oj-swipeactions","oj-component"),this.element[0].setAttribute("tabIndex","-1"),this._on(!0,{touchstart:function(n){null!=(e=t.element[0].querySelector(".oj-offcanvas-open"))&&e.offsetWidth>0&&n.preventDefault(),i=!0},touchend:function(e){i&&t._handleAction(e),i=!1},keydown:function(i){27===i.keyCode?(e=i.target.parentNode.parentNode).classList.contains("oj-offcanvas-open")&&(t._close({selector:e,_animate:!1}),i.preventDefault()):13===i.keyCode&&i.target.classList.contains("oj-swipeactions-action-panel")&&(n=!0)},keyup:function(e){13===e.keyCode&&n&&t._handleAction(e),n=!1},ojdefaultaction:function(e,i){var n=$(i.selector).children("oj-option.oj-swipetoreveal-default");n.length>0&&(t._fireActionEvent(n[0],null),o=!0)},ojopen:function(e,i){o&&t._close(i),o=!1,t._releaseBusyState()},ojclose:function(e,i){var n=$(i.selector).children(".oj-swipeactions-hide-actions-link");n.length>0&&n[0].parentNode.removeChild(n[0]),t._releaseBusyState()}}),this._focusable({applyHighlight:!0,setupHandlers:function(e,i){t._focusInHandler=e,t._focusOutHandler=i}}),this._setup()},_releaseBusyState:function(){this.busyStateResolve&&(this.busyStateResolve(),this.busyStateResolve=null)},_close:function(e){var t=c.getContext(this.element[0]).getBusyContext().addBusyState({description:"closing offcanvas"});Pn.close(e).then(function(){t()})},_handleAction:function(e){var t=$(e.target).parents("oj-option");t.length>0&&(this._fireActionEvent(t[0],e),this._close({selector:t[0].parentNode}))},_SetupResources:function(){this._super(),this._setupOrReleaseOffcanvas(eo.tearDownSwipeActions),this._setupOrReleaseOffcanvas(eo.setupSwipeActions)},_ReleaseResources:function(){this._super(),this._setupOrReleaseOffcanvas(eo.tearDownSwipeActions),this._releaseBusyState()},_setupOrReleaseOffcanvas:function(e){this._applyOffcanvas("oj-offcanvas-start",e),this._applyOffcanvas("oj-offcanvas-end",e)},_closeAllOffcanvas:function(){var e=this,t=function(t){e._close({selector:t})};this._applyOffcanvas("oj-offcanvas-start",t),this._applyOffcanvas("oj-offcanvas-end",t)},_applyOffcanvas:function(e,t){var i=this.element[0].querySelector("."+e);i&&t(i)},_fireActionEvent:function(e,t){var i={};t&&(i.originalEvent=t instanceof $.Event?t.originalEvent:t);var o={detail:i,cancelable:!0,bubbles:!0};n.DomUtils.dispatchEvent(e,new CustomEvent("ojAction",o))},refresh:function(){this._super(),this._releaseBusyState(),this._setupOrReleaseOffcanvas(eo.tearDownSwipeActions),this._setup(),this._setupOrReleaseOffcanvas(eo.setupSwipeActions)},_createOffcanvas:function(e,t){var i=e[t];if(i&&i.length>0&&"TEMPLATE"===i[0].tagName){var n=document.createElement("div");n.className="start"===t?"oj-offcanvas-start":"oj-offcanvas-end",this.element[0].appendChild(n),this._renderAccessibleLink(n)}},_setup:function(){var e=this;this.element[0].classList.add("oj-offcanvas-inner-wrapper"),this.element[0].parentNode.classList.add("oj-offcanvas-outer-wrapper");var t=n.BaseCustomElementBridge.getSlotMap(this.element[0]),i=t[""];i&&i.length>0&&i[0].classList.add("oj-swipeactions-content"),this._createOffcanvas(t,"start"),this._createOffcanvas(t,"end"),$(this.element).on("ojpanstart",function(t){t.isDefaultPrevented()||e._renderOffcanvas(t.target)}),$(this.element).on("ojpanend",function(){var t=c.getContext(e.element[0]).getBusyContext();e.busyStateResolve=t.addBusyState({description:"opening or closing offcanvas"})})},_renderOffcanvas:function(e,t){var i=this;e.setAttribute("role","toolbar"),e.setAttribute("data-oj-context","");var o=n.BaseCustomElementBridge.getSlotMap(this.element[0]),s=e.classList.contains("oj-offcanvas-start")?o.start[0]:o.end[0],r=c.getContext(i.element[0]).getBusyContext(),a=r.addBusyState({description:"rendering ojoptions"});p.__getTemplateEngine().then(function(n){i._render(n,e,s),t?(r=c.getContext(e).getBusyContext()).whenReady().then(function(){t(),a()}):a()},function(e){throw a(),new Error("Error loading template engine: "+e)})},_showAccessibleLinks:function(){for(var e=0,t=this.element[0].querySelectorAll("a.oj-helper-hidden-accessible"),i=0;i<t.length;i++)t[i].style.left=e+"px",t[i].className="oj-swipeactions-accessible-link",e=e+t[i].offsetWidth+5},_hideAccessibleLinks:function(){for(var e=this.element[0].querySelectorAll("a.oj-swipeactions-accessible-link"),t=0;t<e.length;t++)e[t].className="oj-helper-hidden-accessible"},_isIE11:function(){var e=n.AgentUtils.getAgentInfo();return"ie"===e.browser&&11===e.browserVersion},_renderAccessibleLink:function(e){var t=!1,i=this,o=document.createElement("a");o.setAttribute("tabIndex","0"),o.setAttribute("href","#"),o.textContent=this.getTranslatedString(e.classList.contains("oj-offcanvas-start")?"ariaShowStartActionsDescription":"ariaShowEndActionsDescription");var s=n.AgentUtils.getAgentInfo().os===n.AgentUtils.OS.ANDROID;s?(o.style.color="transparent",o.className="oj-swipeactions-accessible-link",e.classList.contains("oj-offcanvas-end")&&null!=this.element[0].querySelector("a.oj-swipeactions-accessible-link")&&(o.style.right="0px"),o.addEventListener("touchstart",function(e){t=e.touches[0].force>0})):o.className="oj-helper-hidden-accessible",o.addEventListener("focus",function(){s||i._showAccessibleLinks(),i._closeAllOffcanvas()}),o.addEventListener("blur",function(e){null==e.relatedTarget||e.relatedTarget.classList.contains("oj-swipeactions-accessible-link")?null==e.relatedTarget&&i._isIE11()&&setTimeout(function(){document.activeElement.classList.contains("oj-swipeactions-accessible-link")||i._hideAccessibleLinks()},0):setTimeout(function(){s||i._hideAccessibleLinks()},0)}),o.addEventListener("click",function(n){t||(n.preventDefault(),i._renderOffcanvas(e,function(){$(e).children("oj-option").addClass("oj-swipetoreveal-action").children().attr("tabIndex",0);var t={};t.selector=e,t.autoDismiss="none",t._animate=!1;var n=document.createElement("a");n.className="oj-swipeactions-hide-actions-link",n.setAttribute("tabIndex","0"),n.setAttribute("href","#"),n.setAttribute("aria-label",i.getTranslatedString("ariaHideActionsDescription")),n.addEventListener("click",function(){i._close(t)}),s&&n.addEventListener("touchend",function(){i._close(t)});var o=c.getContext(i.element[0]).getBusyContext().addBusyState({description:"opening offcanvas"});Pn.open(t).then(function(){e.appendChild(n),o()})}))}),this.element[0].appendChild(o)},_render:function(e,t,i){var n=this;$(t).children("oj-option").remove();var o=[];e.execute(this.element[0],i,null).forEach(function(e){"OJ-OPTION"===e.tagName&&o.push(e)}),o.forEach(function(e){e.customOptionRenderer=n._customOptionRenderer.bind(n),t.appendChild(e)})},_customOptionRenderer:function(e){var t=this;if(!($(e).children("div").length>0)){e.setAttribute("role","button"),e.classList.contains("oj-swipeactions-default")&&e.classList.add("oj-swipetoreveal-default");var i=document.createElement("div");i.className="oj-flex-bar oj-swipeactions-action-panel",i.addEventListener("focus",function(){t._focusInHandler($(i))}),i.addEventListener("blur",function(){t._focusOutHandler($(i))});var o=document.createElement("div");o.className="oj-flex-bar-center-absolute",i.appendChild(o);var s=document.createElement("div");s.className="oj-flex oj-sm-flex-direction-column",o.appendChild(s);var r=n.BaseCustomElementBridge.getSlotMap(e),a=r.startIcon;a&&a.forEach(function(e){s.appendChild(e)});var l=document.createElement("div");l.className="oj-flex-item oj-swipeactions-action-text",s.appendChild(l);var u=r[""];u&&u.forEach(function(e){l.appendChild(e)}),$(e).prepend(i)}}}),Qn.extension._WIDGET_NAME="ojSwipeActions",n.CustomElementBridge.register("oj-swipe-actions",{metadata:Qn}),n.SwipeToRevealUtils={};var eo=n.SwipeToRevealUtils;n.SwipeToRevealUtils.setupSwipeActions=function(e,t){var i,n,o,s,r,a,l,u,d,h,p;(i=$(e)).hasClass("oj-swipetoreveal")||(i.addClass("oj-swipetoreveal"),n=i.hasClass("oj-offcanvas-start")?"end":"start",(o={}).selector=i,o._animateWrapperSelector="oj-offcanvas-inner-wrapper",Pn.setupPanToReveal(o),s=Pn._getOuterWrapper(i),l=!1,s.on("click.swipetoreveal",function(e){l&&(e.stopImmediatePropagation(),l=!1)}),s.on("touchstart.swipetoreveal",function(){l=!1,i.hasClass("oj-offcanvas-open")&&i[0].offsetWidth>0&&!i[0].contains(event.target)&&event.preventDefault()}),i.on("ojpanstart",function(e,o){o.direction!==n?e.preventDefault():(c.getContext(s.get(0)).getBusyContext().whenReady().then(function(){i.children().addClass("oj-swipetoreveal-action").css("min-width",""),h=i.children(".oj-swipetoreveal-default").get(0),null==a&&(null!=t&&(r=t.threshold),null!=r?(r=parseInt(r,10),/%$/.test(t.threshold)&&(r=r/100*s.outerWidth())):r=.55*s.outerWidth(),a=Math.min(.3*s.outerWidth(),i.outerWidth()))}),d=(new Date).getTime())}).on("ojpanmove",function(e,t){l||i.children().css("min-width",0),l=!0,null!=h&&(t.distance>r?i.children().each(function(){this!==h&&$(this).addClass("oj-swipetoreveal-hide-when-full")}):i.children().removeClass("oj-swipetoreveal-hide-when-full"))}).on("ojpanend",function(e,t){p=t.distance,null!=h&&p>r&&(u=$.Event("ojdefaultaction"),i.trigger(u,o),e.preventDefault()),p<a&&((new Date).getTime()-d>200||p<10)&&e.preventDefault()}))},n.SwipeToRevealUtils.tearDownSwipeActions=function(e){var t,i,n;(t=$(e)).removeClass("oj-swipetoreveal"),(i={}).selector=t,null!=(n=Pn._getOuterWrapper(t))&&n.off(".swipetoreveal"),Pn.tearDownPanToReveal(i)};var to={properties:{describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},labelHint:{type:"string",value:""},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},readonly:{type:"boolean",value:!1},translations:{type:"object",value:{}},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},value:{type:"boolean",writeback:!0,value:!1}},methods:{refresh:{},reset:{},showMessages:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{}},extension:{}};n.__registerWidget("oj.ojSwitch",$.oj.editableValue,{version:"1.1.0",defaultElement:"<input>",widgetEventPrefix:"oj",options:{disabled:!1,readOnly:!1,value:!1},widget:function(){return this._element2},getNodeBySubId:function(e){var t,i=this._super(e),n=this.widget();return i||(i=null==e||null==e.subId?n:null)||"oj-switch-thumb"!==(t=e.subId)&&"oj-switch-track"!==t?i||null:n.find("."+t)[0]},getSubIdByNode:function(e){var t,i=$(this.element).attr("id"),n=this._super(e);return null!=e&&($(e).hasClass("oj-switch-track")||$(e).hasClass("oj-switch-thumb"))&&(i===(t=$(e).parents("div.oj-switch").find("input.oj-component-initnode").attr("id"))&&$(e).hasClass("oj-switch-track")?n={subId:"oj-switch-track"}:i===t&&$(e).hasClass("oj-switch-thumb")&&(n={subId:"oj-switch-thumb"})),n},_BUNDLE_KEY:{_SWITCH_OFF:"SwitchOFF",_SWITCH_ON:"SwitchON"},_InitOptions:function(e,t){var i,o;i=[{attribute:"disabled",validateOption:!0},{attribute:"readonly",option:"readOnly",validateOption:!0},{attribute:"checked",option:"value",validateOption:!1,coerceDomValue:function(e){return!!e}},{attribute:"title"}],this._super(e,t),this._IsCustomElement()||(n.EditableValueUtils.initializeOptionsFromDom(i,t,this),o=this.option("value"),this.option({value:!!o},{_context:{writeback:!0,internalSet:!0}}))},_ComponentCreate:function(){if(this._super(),!this.element.is("input"))throw new Error("ojSwitch can be bound to INPUT only.");this._inputElementOriginalDisplay=this.element.css("display"),this.element.css("display","none").attr("type","checkbox").attr("checked",this.option("value")).attr("tabindex","-1").attr("disabled",this.option("disabled")).attr("readonly",this.option("readOnly")),this.OuterWrapper?this._element2=$(this.OuterWrapper):this._element2=this.element.wrap("<div></div>").parent(),this._element2.addClass("oj-switch oj-component oj-form-control"),this._element2.append("<div class='oj-switch-container'><div class='oj-switch-track'><div class='oj-switch-thumb' tabIndex='0'></div></div></div>"),this.switchThumb=this._element2.find(".oj-switch-thumb"),this.switchThumb.attr("role",this._setSwitchRole())},_AfterCreate:function(){this._super();var e=this.switchThumb;this._SetAriaInfo(e),this._setup()},_SetAriaInfo:function(e){var t,i;if(t=this.OuterWrapper?this._element2[0]:this._element2[0].querySelector("input"),this._IsCustomElement()){var o=this.uuid+"_Label";i=n.EditableValueUtils.getOjLabelId(this.widget(),o)}else{var s=this._GetLabelElement();s&&(i=s.attr("id"))}if(i)e.attr("aria-labelledby",i);else{var r=t.getAttribute("aria-label");r&&(e.attr("aria-label",r),t.removeAttribute("aria-label"))}},_setup:function(){var e=$(this.widget());this._setupEvents(),void 0!==e&&(this.element.attr("checked",this.option("value")),e.removeClass("oj-disabled oj-read-only oj-selected oj-hover oj-active"),$(this.switchThumb).attr("tabindex","0"),$(this.switchThumb).html(""),(this.option("disabled")||this.option("readOnly"))&&(this.option("disabled")?(e.addClass("oj-disabled"),$(this.switchThumb).removeAttr("tabindex")):(e.addClass("oj-read-only"),$(this.switchThumb).html(this._setReadOnlyValue()))),this.option("value")&&e.addClass("oj-selected"),$(this.switchThumb).attr("aria-checked",this.option("value")),$(this.switchThumb).removeAttr("aria-disabled"),e.removeAttr("aria-disabled"),this._CanSetValue()||$(this.switchThumb).attr("aria-disabled","true"))},_setReadOnlyValue:function(){var e=this._BUNDLE_KEY._SWITCH_OFF;return this.option("value")&&(e=this._BUNDLE_KEY._SWITCH_ON),this.getTranslatedString(e)},_setupEvents:function(){this._off(this._element2,"keydown keyup mouseup touchend"),this._CanSetValue()&&(this._on(this._element2,this._switchEvents),this._AddHoverable(this._element2),this._AddActiveable(this._element2)),this._focusable({element:this.switchThumb,applyHighlight:!0})},_switchEvents:{keydown:function(e){e.which!==$.ui.keyCode.ENTER&&e.which!==$.ui.keyCode.SPACE||($(e.currentTarget).addClass("oj-active"),e.preventDefault())},keyup:function(e){e.which!==$.ui.keyCode.ENTER&&e.which!==$.ui.keyCode.SPACE||this._SetValue(!this.option("value"),e)},mouseup:function(e){1===e.which&&this._SetValue(!this.option("value"),e)},touchend:function(e){this._SetValue(!this.option("value"),e)}},_GetDefaultStyleClass:function(){return"oj-switch"},_CanSetValue:function(){return!!this._super()&&!this.options.readOnly},_setSwitchRole:function(){return"switch checkbox"},_destroy:function(){return this._CanSetValue()&&(this._RemoveHoverable(this._element2),this._RemoveActiveable(this._element2)),this._element2.find(".oj-switch-track").remove(),n.DomUtils.unwrap(this.element),this._RestoreAttributes(this.element),this._super()},_GetMessagingLauncherElement:function(){return this._element2},_GetContentElement:function(){return this.switchThumb},_AfterSetOption:function(e,t,i){switch(this._superApply(arguments),e){case"readOnly":this._AfterSetOptionDisabledReadOnly(e,n.EditableValueUtils.readOnlyOptionOptions)}},_setOption:function(e,t,i){var n;switch(e){case"disabled":case"readOnly":case"value":n=!!t;break;default:n=t}this._super(e,n,i)},_Refresh:function(e,t,i){this._superApply(arguments),this._setup()}}),to.extension._WIDGET_NAME="ojSwitch",to.extension._INNER_ELEM="input",to.extension._ALIASED_PROPS={readonly:"readOnly"},n.CustomElementBridge.register("oj-switch",{metadata:to});var io,no,oo={properties:{value:{type:"string",value:""}},methods:{setProperty:{},getProperty:{},setProperties:{},refresh:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};function so(e){var t="value",i="_ojSwitcher_orig_display_style",o=this,s=e.element,r=!0,a=null;function l(){a=null}function u(e,n){var o=s[t];void 0===e[i]&&Object.defineProperty(e,i,{value:e.style.display}),n===o?function(e){"none"!==e.style.display?r&&w.subtreeShown(e,{initialRender:!0}):(e.style.display="",w.subtreeShown(e,r?{initialRender:!0}:void 0))}(e):function(e){"none"!==e.style.display&&(e.style.display="none",w.subtreeHidden(e))}(e)}o._caseElementMutationObserver=new MutationObserver(function(e){e.forEach(function(e){"childList"===e.type&&(e.addedNodes&&Array.prototype.forEach.call(e.addedNodes,function(e){1===e.nodeType&&(u(e,e.getAttribute("slot")),l())}),e.removedNodes&&Array.prototype.forEach.call(e.removedNodes,function(e){1===e.nodeType&&(void 0!==e[i]&&(e.style.display=e[i]),l())}))})}),this.createDOM=function(){o._caseElementMutationObserver.observe(s,{childList:!0})},this.updateDOM=function(){for(var e=(a||(a=n.BaseCustomElementBridge.getSlotMap(s)),a),t=Object.keys(e),i=0;i<t.length;i++)for(var o=t[i],l=e[o],d=0;d<l.length;d++){u(l[d],o)}r&&(r=!1)}}oo.extension._CONSTRUCTOR=so,oo.extension._CONTROLS_SUBTREE_HIDDEN=!0,n.CustomElementBridge.register("oj-switcher",{metadata:oo}),io={cut:"ojtabscut","paste-before":"ojtabspastebefore","paste-after":"ojtabspasteafter",remove:"ojtabsremove"},no={cut:"labelCut","paste-before":"labelPasteBefore","paste-after":"labelPasteAfter",remove:"labelRemove"},n.__registerWidget("oj.ojTabs",$.oj.baseComponent,{widgetEventPrefix:"oj",delay:300,options:{selected:0,disabledTabs:null,truncation:"auto",selectOn:"click",orientation:"horizontal",edge:"top",removable:!1,reorderable:!1,beforeSelect:null,select:null,beforeDeselect:null,deselect:null,beforeRemove:null,remove:null,beforeReorder:null,reorder:null},_ComponentCreate:function(){var e=this.options;this._super(),this.running=!1,this._initialRender=!0,this._setupEdge(e.edge),this._isOldMarkup=0===this.element.children("ul").length,this._createTabbarFromOldMarkup(),this._processTabs(),this._menu={},this._menu.usermenu=!1,this._menu.$menuItems=[],this._menu.$container=null,this._menu.$elemPasteBefore=null,this._menu.$elemPasteAfter=null,this._initMenu(),this._refresh();var t=this._getIndexByTabOrContentId(e.selected);void 0===t&&(t=0),this._fireSelectEvents(t),this._initialRender=void 0},_fireSelectEvents:function(e,t){var i=e;this._isTabDisabled(i)&&(i=this._getNextEnabledTab(i)),this._activate(void 0===i?void 0:$(this.tabs[i]),t)},_NotifyContextMenuGesture:function(e,t,i){if(this._isInATab(t.target)&&(!this._touchProxy||!this._touchProxy.touchMoved())){var n="keyboard"===i;if("contextmenu"!==t.type&&!n&&"touch"!==i)return;var o=$(t.target).closest("li"),s={launcher:o};if(this._menu.tab=n?this.active:s.launcher,!this._menu.tab)return void t.preventDefault();if(this._menu.$elemRemove){var r=o.hasClass("oj-disabled");if((r||0===this._getCloseIcons(o).length)&&1===this._menu.$container.children().length)return void t.preventDefault();r||!this._isTabRemovable(o)?this._menu.$elemRemove.addClass("oj-disabled"):this._menu.$elemRemove.removeClass("oj-disabled")}if(this._menu.$elemPasteBefore||this._menu.$elemPasteAfter){var a=!this._menu.cutTab;this._menu.$elemPasteBefore.hasClass("oj-disabled")!==a&&(a?(this._menu.$elemPasteBefore.addClass("oj-disabled"),this._menu.$elemPasteAfter.addClass("oj-disabled")):(this._menu.$elemPasteBefore.removeClass("oj-disabled"),this._menu.$elemPasteAfter.removeClass("oj-disabled")),this._menu.$container.ojMenu("refresh"))}this._OpenContextMenu(t,i,s)}},_tabKeydown:function(e){if(!this._handlePageNav(e)){var t=$(this.document[0].activeElement).closest("li"),i=this._getEnabledTabs(),n=i.index(t),o=i.length;switch(e.keyCode){case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:n=(n+1)%o;break;case $.ui.keyCode.UP:case $.ui.keyCode.LEFT:n=((0===n?o:n)-1)%o;break;case $.ui.keyCode.END:n=o-1;break;case $.ui.keyCode.HOME:n=0;break;case 46:var s=this.active;return void(s&&this._getCloseIcons(s).length>0&&(e.preventDefault(),this._removeTab(s,null,e)));default:return}e.preventDefault(),clearTimeout(this.activating);var r=$(i[n]);if(r.focus(),!e.ctrlKey){t.attr("aria-selected","false"),r.attr("aria-selected","true");var a=this;this.activating=this._delay(function(){a&&a.tabs&&a._activate(r,e)},this.delay)}}},_panelKeydown:function(e){$(e.target).closest(".oj-tabs-selected").attr("id")===this.element.children(".oj-tabs-selected").attr("id")&&(this._handlePageNav(e)||e.ctrlKey&&e.keyCode===$.ui.keyCode.UP&&(e.preventDefault(),this.active.focus()))},_handlePageNav:function(e){var t=this._getSelectedIndex();return e.ctrlKey&&e.keyCode===$.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(t,!1)),!0):!(!e.ctrlKey||e.keyCode!==$.ui.keyCode.PAGE_DOWN||(this._activate(this._focusNextTab(t,!0)),0))},_isTabDisabled:function(e){return e>=0&&e<this.tabs.length&&$(this.tabs[e]).hasClass("oj-disabled")},_focusNextTab:function(e,t){var i=this._getEnabledTabs(),n=i.index(this.tabs[e]),o=i.length;n=t?(n+1)%o:((0===n?o:n)-1)%o;var s=$(i[n]);return s.focus(),s},_getNextEnabledTab:function(e){for(var t=e+1,i=this.tabs.length-1;t<=i;){if(!this._isTabDisabled(t))return t;t+=1}for(t=e-1;t>=0;){if(!this._isTabDisabled(t))return t;t-=1}},_isHorizontal:function(){return"top"===this.options.edge||"bottom"===this.options.edge},_setOption:function(e,t,i){var n=t;if("selected"!==e){if("disabledTabs"!==e)if("removable"!==e&&"truncation"!==e)if("reorderable"!==e){if("orientation"!==e)if("edge"!==e){if("selectOn"===e)return this._tearDownEvents(!0),this._super(e,n,i),void this._setupEvents();"contextMenu"===e&&(this._clearMenu(),n&&this._initMenu(n)),this._super(e,n,i),"translations"===e&&i&&"removeCueText"===i.subkey&&this.tablist&&this._getCloseIcons(this.tablist).attr("aria-label",n?n.removeCueText:"")}else this._setupEdge(n)&&(this._edgeSpecified=!0,this._super(e,n,i),this.refresh());else if(!this._edgeSpecified){var o=this._orientationToEdge(n);o&&this._setupEdge(o)&&this.refresh()}}else n!==this.options.reorderable&&(this._super(e,n,i),this.refresh());else n!==this.options[e]&&(this._super(e,n,i),this.refresh());else if(null===n&&(n=[]),Array.isArray(n)){this._setOjDisabledOnTab(n);var s=this._getSelectedIndex();this._isTabDisabled(s)&&this._fireSelectEvents(s),this.refresh()}}else{if(void 0===(n=this._getTab(n)))return;this._activate(n)}},refresh:function(){if(this._super(),this._processTabs(),this._refresh(),!this.element.children(".oj-tabs-selected").length){var e=this._getNextEnabledTab(-1);e>=0&&this._fireSelectEvents(e)}},_refresh:function(){var e=this.element.children(".oj-tabs-selected");e.length?this.active=this.tablist.children(".oj-selected"):this.active=$(),this._createCloseIcons(),this._setupEvents(),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:"-1"}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("oj-selected").attr({"aria-selected":"true",tabIndex:"0"}),e.show().attr("aria-expanded","true").removeAttr("aria-hidden")):$(this.tabs[0]).attr("tabIndex","0"),this._isHorizontal()&&(this.tabs.length>0?(this._truncateBeforeOverflow(),this._addConveyor()):this._getTabbarWrapper(),this._addFacets()),void 0===this.options.selected||0===this._getSelectedIndex()?this.element.addClass("oj-first-child-selected"):this.element.removeClass("oj-first-child-selected"),this._setupReorder()},_addConveyor:function(){var e=this.tablist.uniqueId().attr("id"),t=this._getTabbarWrapper().parent();this.conveyor=t.ojConveyorBelt({orientation:"horizontal",contentParent:"#"+e}).attr("data-oj-internal","");var i=this.conveyor.parent();if(i.hasClass("oj-tabs-conveyorbelt-wrapper")){var n="0 1 "+this._getConveyorWrapperMaxWidth()+"px";i.css("flex",n),i.css("-webkit-flex",n),i.css("-ms-flex",n)}},_processTabs:function(){var e=this,t=this.options.edge;this._destroyTabBar(),this._createTabbar(),this.tablist=this.element.children("ul").addClass("oj-tabs-nav oj-helper-clearfix").attr("role","tablist");var i,n,o=this.tablist.index();this.element.children(".oj-tabs-facet").each(function(){var e=$(this);e.index()<o?(e.addClass("oj-start"),i=e):(n||(n=e),e.removeClass("oj-start"))}),"start"===t||"top"===t?i?i.after(this.tablist):this.element.prepend(this.tablist):n?n.before(this.tablist):this.element.append(this.tablist),this.tabs=$(),this.panels=$(),this.tablist.children("li").each(function(){var t=$(this).addClass("oj-tabs-tab").attr({role:"tab",tabIndex:"-1"}).removeAttr("aria-hidden"),i=t.children();i.addClass("oj-tabs-tab-content");var n=i.children();n.addClass("oj-tabs-anchor").attr({role:"presentation",tabIndex:"-1"}),n.children().addClass("oj-tabs-title").removeAttr("aria-hidden"),e.tabs=e.tabs.add(t);var o=n.uniqueId().attr("id"),s=t.attr("data-content"),r=e.element.find(e._sanitizeIdSelector(s));t.attr({"aria-controls":s,"aria-labelledby":o}),e.panels=e.panels.add(r),r.attr("aria-labelledby",o).attr("role","tabpanel")}),"start"!==t&&"end"!==t||e.tablist.addClass("oj-tabs-nav-root"),this._initialRender&&this._setOjDisabledOnTab(this.options.disabledTabs)},_setupEvents:function(){var e=this,t={keydown:this._tabKeydown},i=this.options.selectOn,o=!1;i&&$.each(i.split(" "),function(i,s){"click"===s&&(o=!0),n.DomUtils.isValidIdentifier(s)&&(t[s]=e._eventHandler)});var s=this._getEnabledTabs();if(this._on(s,t),o||this._on(s,{click:function(e){e.preventDefault()}}),this.panels.on("keydown"+this.eventNamespace,this._panelKeydown.bind(this)),this.options.removable){var r={click:this._removeTabHandler},a=this._getCloseIcons(s);this._on(a,r),this._AddHoverable(a),this._AddActiveable(a)}this._focusable({element:s,applyHighlight:!0}),this._AddHoverable(s),this._AddActiveable({element:s,afterToggle:function(e){"mousedown"===e&&s.filter(".oj-focus-highlight").blur()}})},_tearDownEvents:function(e){var t=this._getEnabledTabs();e||this._UnregisterChildNode(this._getCloseIcons(t)),this._UnregisterChildNode(t),this.panels&&this.panels.off("keydown"+this.eventNamespace)},_eventHandler:function(e,t){var i=this.active,n=$(e.currentTarget).closest("li"),o=i&&n[0]===i[0],s=this._getPanelForTab(n),r=i&&i.length?this._getPanelForTab(i):$(),a={fromTab:i,fromContent:r,toTab:n,toContent:s};e.preventDefault();var l=t||e;n.hasClass("oj-disabled")||this.running||o||r&&r.length&&!1===this._trigger("beforeDeselect",l,a)||!this._initialRender&&!1===this._trigger("beforeSelect",l,a)||(this._initialRender?this.options.selected=this._getTabIdOrIndex(n):this.option("selected",this._getTabIdOrIndex(n),{_context:{originalEvent:l,internalSet:!0}}),this.active=n,s.addClass("oj-tabs-selected"),r&&r.length&&r.removeClass("oj-tabs-selected"),this._toggle(l,a))},_toggle:function(e,t){var i=this,n=t.toTab.closest("li"),o=t.toContent,s=t.fromContent;this.running=!0;var r=t.fromTab.closest("li").removeClass("oj-selected");s.hide(),s.length>0&&w.subtreeHidden(s[0]),n.addClass("oj-selected"),i._isHorizontal()&&i.tabs.length>0&&(0===n.index()?i.element.addClass("oj-first-child-selected"):i.element.removeClass("oj-first-child-selected")),o.show(),o.length>0&&w.subtreeShown(o[0],{initialRender:i._initialRender}),i.running=!1,i._initialRender||(i._trigger("deselect",e,t),i._trigger("select",e,t)),s.attr({"aria-expanded":"false","aria-hidden":"true"}),r.attr("aria-selected","false"),o.length&&s.length?r.attr("tabIndex","-1"):o.length&&this.tabs.filter(function(){return"0"===$(this).attr("tabIndex")}).attr("tabIndex","-1"),o.attr("aria-expanded","true").removeAttr("aria-hidden"),n.attr({"aria-selected":"true",tabIndex:"0"})},_activate:function(e,t){var i;void 0!==e&&(this.active&&e[0]===this.active[0]||(i=e.find(".oj-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:$.noop},t)))},_createCloseIcons:function(){if(this.options.removable&&this._isHorizontal()){var e=this.getTranslatedString("removeCueText"),t=this;this._getEnabledTabs().each(function(i){if(t._isTabRemovable($(this))){var n=$(this).find("> :first-child");n.addClass("oj-removable");var o="ojtabs-id_rm_"+i;$(this).attr("aria-describedby",o),$("<a href='#'>").addClass("oj-tabs-icon oj-component-icon oj-clickable-icon-nocontext oj-tabs-close-icon").attr({id:o,tabIndex:"-1","aria-label":e,role:"presentation"}).appendTo(n)}})}},_getEnabledTabs:function(){return $(this.tabs.not(".oj-disabled"))},_getCloseIcons:function(e){return e.find(".oj-tabs-close-icon")},_destroyTabBar:function(){this.tabs&&this._tearDownEvents(),this._hasResizeListener&&(n.DomUtils.removeResizeListener(this.element[0],this._resizeHandler),this._hasResizeListener=!1,this._originalWidth=void 0),this._sortable&&(n.DomUtils.isTouchSupported()&&this._tearDownTouchReorder(),this.tablist.sortable("instance")&&this.tablist.sortable("destroy"),this._sortable=void 0);var e=this.element.children(".oj-tabs-nav-root"),t=!e.hasClass("oj-tabs-nav");if(this.tabs&&(this._getCloseIcons(this.tabs).remove(),e.length)){var i=e,o=!0,s=this.tablist;e.children().each(function(){var e=$(this);if(e.hasClass("oj-tabs-conveyorbelt-wrapper"))e=s;else if(!e.hasClass("oj-tabs-facet"))return;o=!1,i.after(e),i=e}),o&&t&&e.after(s)}this.conveyor&&(this.conveyor.ojConveyorBelt("destroy"),this.conveyor.remove(),this.conveyor=null,this.active=null),t&&e.remove(),this.tabs=null,this.tablist=null},_destroy:function(){this._clearMenu(),this._isHorizontal()?this.element.removeClass("oj-tabs oj-component oj-tabs-horizontal oj-tabs-top oj-tabs-bottom oj-first-child-selected"):this.element.removeClass("oj-tabs oj-component oj-tabs-vertical oj-tabs-start oj-tabs-end oj-helper-clearfix");var e,t,i,n,o=this;this.tabs.each(function(s){(e=$(this)).removeAttr("tabIndex").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-controls").removeAttr("aria-disabled").removeAttr("aria-describedby").removeAttr("role").removeAttr("data-content").removeClass("oj-active oj-disabled oj-selected oj-tabs-gen-id oj-tabs-tab").removeUniqueId().css("display",""),t=e.children("div").removeClass("oj-tabs-tab-content"),i=t.children("a").removeClass("oj-tabs-anchor").removeAttr("tabIndex").removeAttr("role"),(n=i.children()).removeClass("oj-tabs-title").removeAttr("aria-hidden"),o._isOldMarkup?n.prependTo(o.panels.get(s)):t.hasClass("oj-tabs-gen-div")&&i.hasClass("oj-tabs-gen-a")?(n.prependTo(e),t.remove()):i.hasClass("oj-tabs-gen-a")?(n.prependTo(t),i.remove()):t.hasClass("oj-tabs-gen-div")&&(i.prependTo(e),t.remove())});var s=this.tablist;this._destroyTabBar(),s.removeAttr("tabIndex").removeAttr("role").removeClass("oj-tabs-nav oj-tabs-nav-root oj-helper-clearfix").removeUniqueId(),this._isOldMarkup&&s.remove(),this.panels.each(function(){$(this).removeAttr("tabIndex").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("role").removeClass("oj-active oj-tabs-selected oj-tabs-gen-id oj-tabs-panel").removeUniqueId().css("display","")}),this.element.children(".oj-tabs-facet").removeClass("oj-start")},_isTabRemovable:function(e){var t=this.options.removable;return t&&(!Array.isArray(t)||t.indexOf(e.attr("id"))>-1)},_removeTab:function(e,t,i){if(this._isTabRemovable(e)){var n=this._getPanelForTab(e),o={tab:e,content:n},s=i||t?t:{target:e,currentTarget:e,preventDefault:$.noop};if(e&&!1!==this._trigger("beforeRemove",s,o)){if(t&&t.preventDefault(),e.hasClass("oj-selected")){var r=this.tabs.index(e),a=this._getNextEnabledTab(r);if(void 0===a)this.active=void 0,this.option("selected",void 0,{_context:{originalEvent:s,internalSet:!0}});else{this._fireSelectEvents(a,s);var l=this._getTabIdOrIndex($(this.tabs[a]));"number"==typeof l&&l>r&&(l-=1),this.option("selected",l,{_context:{originalEvent:s,internalSet:!0}})}}this._tearDownEvents(),this.tabs=this.tabs.not(e),e.remove(),n.remove(),this._updateDisabledTabs(),this.refresh(),this._trigger("remove",s,o)}}},_removeTabHandler:function(e,t){this._removeTab($(e.currentTarget).closest("li"),e,t)},removeTab:function(e){if("string"!=typeof e)throw new Error("'"+e+"' is not a tab id");this._removeTab(this._getTab(e),null,null)},_wrapLi:function(e,t){var i;if("li"===e.prop("tagName").toLowerCase()){var n=(i=e).children("div");if(1===n.length&&n.hasClass("oj-tabs-tab-content")){var o=n.children("a");1!==o.length&&(i.wrapInner("<a href='#'></a>"),o.addClass("oj-tabs-gen-a"))}else(n=i.wrapInner("<div><a href='#'></a></div>").children()).addClass("oj-tabs-gen-div oj-tabs-tab-content"),n.children().addClass("oj-tabs-gen-a")}else(i=e.wrap("<li><div><a href='#'></a></div></li>").parent().parent().parent()).addClass("oj-tabs-gen-li"),i.children().addClass("oj-tabs-gen-div oj-tabs-tab-content");return t&&i.attr("data-content",t),i},addTab:function(e){var t,i,n=-1;e.tab&&e.content?(i=e.content,t=this._wrapLi(e.tab,this._getUniqueId(i)),void 0!==e.index&&(n=e.index)):(i=e,t=this._wrapLi($(e).find("> :first-child"),this._getUniqueId(i)));var o,s=this.element.children(".oj-tabs-nav-root"),r=!1;if((o=s.hasClass("oj-tabs-nav")?s:s.length?s.find(".oj-tabs-nav"):this.element.children(".oj-tabs-nav")).length||(o=$("<ul>"),r=!0),r&&o.prependTo(this.element),n>=0&&n<o.children().length){var a=o.children(":eq("+n+")"),l=this.element.children(this._sanitizeIdSelector(a.attr("aria-controls")));a.before(t),l.before(i)}else t.appendTo(o),i.appendTo(this.element);this.refresh(),0===this.active.length&&this._fireSelectEvents(0),t[0].scrollIntoView(!1)},_setupTouchReorder:function(){this._touchProxy=n._TouchProxy.addTouchListeners(this.tablist)},_tearDownTouchReorder:function(){n._TouchProxy.removeTouchListeners(this.tablist)},_setupReorder:function(){if(this.options.reorderable){var e=this;n.DomUtils.isTouchSupported()&&this._setupTouchReorder(),this.tablist.sortable({axis:e._isHorizontal()?"x":"y",distance:10,start:function(){e.tablist.children(".ui-sortable-placeholder").each(function(){$(this).addClass("oj-sortable-placeholder")})},stop:function(t,i){var n=i.item;e._doReorder(t,n,n.prev())||e.tablist.sortable("cancel")}}),this._sortable=!0}else this._tearDownTouchReorder(),this._sortable=!1},_InitOptions:function(e,t){var i=t.edge;this._edgeSpecified="top"===i||"bottom"===i||"start"===i||"end"===i,this._super(e,t)},_orientationToEdge:function(e){return"horizontal"===e?"top":"vertical"===e?"start":null},_setupEdge:function(e){var t=e;(this._initialRender&&!this._edgeSpecified||!t)&&(t=this._orientationToEdge(this.options.orientation));var i=this.options.edge;switch(this.element.removeClass("oj-tabs-top oj-tabs-bottom oj-tabs-start oj-tabs-end"),t){case"top":case"bottom":!this.panels||"start"!==i&&"end"!==i||this.element.removeClass("oj-tabs-vertical oj-helper-clearfix"),this.element.addClass("oj-tabs oj-component oj-tabs-horizontal"),"bottom"===t?this.element.addClass("oj-tabs-bottom"):this.element.addClass("oj-tabs-top"),this._initialRender?this.options.orientation="horizontal":"horizontal"!==this.options.orientation&&this.option("orientation","horizontal",{_context:{internalSet:!0},changed:!0});break;case"start":case"end":!this.panels||"top"!==i&&"bottom"!==i||this.element.removeClass("oj-tabs-horizontal"),this.element.addClass("oj-tabs oj-component oj-tabs-vertical oj-helper-clearfix"),"end"===t?this.element.addClass("oj-tabs-end"):this.element.addClass("oj-tabs-start"),this._initialRender?this.options.orientation="vertical":"vertical"!==this.options.orientation&&this.option("orientation","vertical",{_context:{internalSet:!0},changed:!0});break;default:return!1}return this._initialRender?this.options.edge=t:this.options.edge!==t&&this.option("edge",t,{_context:{internalSet:!0},changed:!0}),!0},_getTabbarWrapper:function(){var e=this.tablist.parent();return e.hasClass("oj-tabs-conveyor")||(e=this.tablist.wrap("<div>").parent().addClass("oj-tabs-conveyor"),(this.element.children(".oj-tabs-facet").length>0?e.wrap("<div>").wrap("<div>").parent().parent().addClass("oj-tabs-conveyorbelt-wrapper"):e).wrap("<div>").parent().addClass("oj-tabs-nav-root").uniqueId().attr("id")),e},_addPrefixId:function(e){e.id.indexOf("ojtabs-id_")<0&&$(e).attr("id","ojtabs-id_"+e.id)},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;var t=e.subId,i=e.index;if("oj-conveyorbelt"!==t&&("number"!=typeof i||i<0||i>=this.panels.length))return null;switch(t){case"oj-conveyorbelt":return this.conveyor?this.conveyor[0]:null;case"oj-tabs-panel":return this._getPanelForTab(this.tabs[i])[0];case"oj-tabs-tab":return this.tabs[i];case"oj-tabs-title":return $(this.tabs[i]).find(".oj-tabs-title")[0];case"oj-tabs-close-icon":case"oj-tabs-close":return $(this.tabs[i]).find(".oj-tabs-close-icon")[0]}return null},getSubIdByNode:function(e){for(var t=[],i=0;i<this.tabs.length;i++)t.push(this._getPanelForTab(this.tabs[i])[0]);for(var n=-1,o=-1,s=e;s;){if(this.conveyor&&s===this.conveyor[0])return{subId:"oj-conveyorbelt"};if(-1!==(n=Array.prototype.indexOf.call(this.tabs,s)))break;if(-1!==(o=t.indexOf(s)))return{subId:"oj-tabs-panel",index:o};s=s.parentElement}if(-1!==n){var r=this.getNodeBySubId({subId:"oj-tabs-title",index:n}),a=this.getNodeBySubId({subId:"oj-tabs-close",index:n});for(s=e;s;){if(s===r)return{subId:"oj-tabs-title",index:n};if(s===a)return{subId:"oj-tabs-close",index:n};if(s===this.tabs[n])return{subId:"oj-tabs-tab",index:n};s=s.parentElement}}return null},_getConveyorWrapperMaxWidth:function(){return this._originalWidth+10},_getTabsWidth:function(){var e=this.element.find(".oj-tabs-conveyorbelt-wrapper");return e.length?e[0].clientWidth:this.element[0].clientWidth},_isOverflow:function(){return this._originalWidth>this._getTabsWidth()},_getTabMaxWidth:function(){var e=Math.floor(this._getTabsWidth()/this.tabs.length);return this.options.removable&&(e-=28),e},_applyTabMaxWidth:function(){var e=this._getTabMaxWidth();this.tablist.find(".oj-tabs-title").each(function(){$(this).css("max-width",e+"px").addClass("oj-tabs-title-overflow")})},_removeTabMaxWidth:function(){this.tablist.find(".oj-tabs-title").each(function(){$(this).css("max-width","").removeClass("oj-tabs-title-overflow")})},_logMessage:function(){},_handleResize:function(){this._isProgressive()&&(this._isOverflow()?this._applyTabMaxWidth():this._removeTabMaxWidth())},_isProgressive:function(){return"auto"===this.options.truncation||"progressive"===this.options.truncation},_truncateBeforeOverflow:function(){this._isHorizontal()&&this.tabs.length>0&&(null==this._resizeHandler&&(this._resizeHandler=this._handleResize.bind(this)),n.DomUtils.addResizeListener(this.element[0],this._resizeHandler),this._hasResizeListener=!0,this._originalWidth=this._getTabbarWrapper()[0].scrollWidth,this._isProgressive()&&this._isOverflow()&&this._applyTabMaxWidth())},_NotifyShown:function(){this._super(),this.refresh()},_NotifyAttached:function(){this._super(),this.refresh()},_buildContextMenuItem:function(e){return $("<a>").text(this.getTranslatedString(no[e])).attr("href","#").wrap("<li>").parent().attr("id",io[e]).addClass("oj-menu-item")},_menu_cut:function(e){return!(!e||!e.length||(this._menu.cutTab=e,0))},_menu_paste:function(e,t,i){if(!t||!t.length)return!1;if(!this._menu.cutTab)return!1;var n=this._menu.cutTab;return this._menu.cutTab=!1,this._doReorder(e,n,t,i),!0},_menu_remove:function(e,t){return!(!t||!t.length||(this._removeTab(t,null,e),0))},_handleContextMenuSelect:function(e,t){var i=t?t.item.attr("id"):void 0;"ojtabscut"===i?this._menu_cut(this._menu.tab):"ojtabspastebefore"===i?this._menu_paste(e,this._menu.tab,!0):"ojtabspasteafter"===i?this._menu_paste(e,this._menu.tab,!1):"ojtabsremove"===i&&this._menu_remove(e,this._menu.tab)},_initMenu:function(e){var t=e||this.options.contextMenu;if(t){var i=$.type(t);if("function"===i){try{t=t()}catch(e){t=null}i=$.type(t)}t&&$(t).length&&(this.options.contextMenu=t)}this._menu.usermenu=!!t,this._addContextMenu()},_addIfNotExist:function(e,t,i){if(-1===t.indexOf(i)){var n=this._buildContextMenuItem(i);e.append(n),this._menu.$menuItems.push(n)}},_addContextMenu:function(){var e=$(this.options.contextMenu);if(0!==e.length||this.options.reorderable||this.options.removable){var t=this;if(0===e.length){var i=this.options.reorderable?"labelReorder":no.remove,n=this.element.uniqueId().attr("id")+"contextmenu";(e=$("<ul>")).css("display","none").attr("id",n).attr("aria-label",this.getTranslatedString(i)),$(document.body).append(e),e.ojMenu(),this.options.contextMenu=this._sanitizeIdSelector(n)}var o=[];e.find("[data-oj-command]").each(function(){if(0===$(this).children("a").length){var e=$(this).attr("data-oj-command").slice("oj-tabs-".length);$(this).replaceWith(t._buildContextMenuItem(e)),$(this).addClass("oj-menu-item"),o.push(e)}}),this.options.reorderable&&(this._addIfNotExist(e,o,"cut"),this._addIfNotExist(e,o,"paste-before"),this._addIfNotExist(e,o,"paste-after"),this._menu.$elemPasteBefore=e.find("#ojtabspastebefore"),this._menu.$elemPasteAfter=e.find("#ojtabspasteafter")),this.options.removable&&(this._addIfNotExist(e,o,"remove"),this._menu.$elemRemove=e.find("#ojtabsremove")),this._menu.$container=e,e.ojMenu("refresh"),e.on("ojselect",$.proxy(this._handleContextMenuSelect,this))}},_clearMenu:function(){var e=this._menu;if(e&&e.$container){if(e.$container.off("ojselect"),e.usermenu||(e.$container.ojMenu("destroy"),e.$container.remove()),e.$menuItems)for(;e.$menuItems.length>0;)e.$menuItems.pop().remove();e.$container=null}e.$elemPasteBefore=null,e.$elemPasteAfter=null,e.$elemRemove=null},_doReorder:function(e,t,i,n){var o=this._getPanelForTab(t),s={tab:t,content:o};if(!1===this._trigger("beforeReorder",e,s))return!1;var r=this.tabs.index(t);if(i.length){if(this.tabs.index(i)===r)return!0;var a=this._getPanelForTab(i);n?(i.before(t),a.before(o)):(i.after(t),a.after(o))}else if(this.tabs.length>0){if(0===r)return!0;this.tabs.first().before(t),this.panels.first().before(o)}return this._updateDisabledTabs(),this.refresh(),i.blur(),t.focus(),this._trigger("reorder",e,s),!0},_sanitizeSelector:function(e){return e?e.replace(/[#!\"$%&'()*+,./:;<=>?@\[\]^`{|}~]/g,"\\$&"):""},_sanitizeIdSelector:function(e){return e?"#"+this._sanitizeSelector(e):""},_getPanelForTab:function(e){return this.element.find(this._sanitizeIdSelector($(e).attr("aria-controls")))},_getUniqueId:function(e){var t=e.attr("id");return t||(t=e.uniqueId().attr("id"),e.addClass("oj-tabs-gen-id")),t},_getTab:function(e){var t=this._getIndexByTabOrContentId(e);if(-1!==t)return $(this.tabs[t])},_getIndexByTabOrContentId:function(e){var t=-1;if("number"==typeof e)e>=0&&e<this.tabs.length&&(t=e);else if("string"==typeof e){var i=this._sanitizeSelector(e);if(n.DomUtils.isValidIdentifier(i)){var o=this.element.find(this._sanitizeIdSelector(i));o.length&&-1===(t=this.tabs.index(o))&&(t=this.panels.index(o))}}return t},_getSelectedIndex:function(){var e=this.options.selected;return"number"==typeof e?e:this.tabs.index($(this._sanitizeIdSelector(e)))},_getTabIdOrIndex:function(e){if(e)return e.attr("id")||this.tabs.index(e)},_setOjDisabledOnTab:function(e){var t=(this.tablist?this.tablist:this.element.children("ul")).children("li");t.removeClass("oj-disabled").removeAttr("aria-disabled");var i=[];if(e&&e.length>0)for(var n,o,s=0;s<e.length;s++)(o=this._getTab(e[s]))&&(o.addClass("oj-disabled"),o.attr("aria-disabled","true"),o.find(".oj-tabs-anchor").removeAttr("href"),n=o.attr("id"),i.push(n||t.index(o)));this._updateDisabledTabs(i)},_updateDisabledTabs:function(e){var t=e;if(!t){t=[];var i=this;this.tablist.children().each(function(){var e=$(this);e.hasClass("oj-disabled")&&t.push(i._getTabIdOrIndex(e))})}if(!n.Object._compareArrayIdIndexObject(t,this.options.disabledTabs))if(this._initialRender)this.options.disabledTabs=t;else{var o={internalSet:!0,writeback:!0};this.option({disabledTabs:t},{_context:o,changed:!0})}},_isInATab:function(e){var t=!1;return this.tabs.each(function(){return this!==e&&!$.contains(this,e)||(t=!0,!1)}),t},_createTabbar:function(){var e=this._getContentIds(),t=this,i=this.element.children("ul");i.length>0&&i.children("li").each(function(i){t._wrapLi($(this),e[i])})},_createTabbarFromOldMarkup:function(){var e=this.element.children("ul");if(0===e.length){var t=this,i=this._getContentIds();e=$("<ul>"),this.element.children().each(function(n){t._wrapLi($(this).find("> :first-child"),i[n]).appendTo(e)}),e.prependTo(this.element)}},_addFacets:function(){var e=this.element.children(".oj-tabs-nav-root"),t=this,i=e.children(".oj-tabs-conveyorbelt-wrapper");this.element.children(".oj-tabs-facet").each(function(){var n=$(this),o=t._getUniqueId(n);0===e.find(t._sanitizeIdSelector(o)).length&&(n.hasClass("oj-start")?i.before(n):n.appendTo(e))})},_getContentIds:function(){var e=[],t=this;return this.element.children(":not(ul):not(.oj-tabs-facet)").each(function(){var i=$(this);i.addClass("oj-tabs-panel"),e.push(t._getUniqueId(i))}),e}});var ro={properties:{animationOnDataChange:{type:"string",enumValues:["auto","none"],value:"none"},animationOnDisplay:{type:"string",enumValues:["auto","none"],value:"none"},as:{type:"string",value:""},data:{type:"oj.DataProvider"},hiddenCategories:{type:"Array<string>",writeback:!0,value:[]},highlightMatch:{type:"string",enumValues:["all","any"],value:"all"},highlightedCategories:{type:"Array<string>",writeback:!0,value:[]},hoverBehavior:{type:"string",enumValues:["dim","none"],value:"none"},items:{type:"Array<Object>|Promise"},layout:{type:"string",enumValues:["cloud","rectangular"],value:"rectangular"},selection:{type:"Array<any>",writeback:!0,value:[]},selectionMode:{type:"string",enumValues:["multiple","none","single"],value:"none"},styleDefaults:{type:"object",properties:{animationDuration:{type:"number"},hoverBehaviorDelay:{type:"number",value:200},svgStyle:{type:"object",value:{}}}},tooltip:{type:"object",properties:{renderer:{type:"function",properties:{color:{type:"string"},componentElement:{type:"Element"},id:{type:"any"},label:{type:"string"},parentElement:{type:"Element"},value:{type:"number"}}}}},touchResponse:{type:"string",enumValues:["auto","touchStart"],value:"auto"},trackResize:{type:"string",enumValues:["off","on"],value:"on"},translations:{type:"object",value:{},properties:{componentName:{type:"string"},labelAndValue:{type:"string"},labelClearSelection:{type:"string"},labelCountWithTotal:{type:"string"},labelDataVisualization:{type:"string"},labelInvalidData:{type:"string"},labelNoData:{type:"string"},stateCollapsed:{type:"string"},stateDrillable:{type:"string"},stateExpanded:{type:"string"},stateHidden:{type:"string"},stateIsolated:{type:"string"},stateMaximized:{type:"string"},stateMinimized:{type:"string"},stateSelected:{type:"string"},stateUnselected:{type:"string"},stateVisible:{type:"string"}}}},methods:{getItem:{},getItemCount:{},getContextByNode:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}},ao={properties:{categories:{type:"Array<string>",value:[]},color:{type:"string",value:""},label:{type:"string",value:""},shortDesc:{type:"string",value:""},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}},url:{type:"string",value:""},value:{type:"number"}},extension:{}};n.__registerWidget("oj.ojTagCloud",$.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{animationOnDataChange:"none",animationOnDisplay:"none",as:"",data:null,hiddenCategories:[],highlightedCategories:[],highlightMatch:"all",hoverBehavior:"none",items:null,layout:"rectangular",selection:[],selectionMode:"none",tooltip:{renderer:null},styleDefaults:{animationDuration:void 0,hoverBehaviorDelay:200},touchResponse:"auto"},_CreateDvtComponent:function(e,t,i){return dvt.TagCloud.newInstance(e,t,i)},_ConvertLocatorToSubId:function(e){var t=e.subId;return"oj-tagcloud-item"===t?t="item["+e.index+"]":"oj-tagcloud-tooltip"===t&&(t="tooltip"),t},_ConvertSubIdToLocator:function(e){var t={};return 0===e.indexOf("item")?(t.subId="oj-tagcloud-item",t.index=this._GetFirstIndex(e)):"tooltip"===e&&(t.subId="oj-tagcloud-tooltip"),t},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-tagcloud"),e},_GetChildStyleClasses:function(){var e=this._super();return e["oj-dvtbase oj-tagcloud"]={path:"styleDefaults/animationDuration",property:"ANIM_DUR"},e["oj-tagcloud"]={path:"styleDefaults/svgStyle",property:"TEXT"},e},_GetEventTypes:function(){return["optionChange"]},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtUtilBundle.TAG_CLOUD"]=e.componentName,t},_InitOptions:function(e,t){this._super(e,t);var i=this.options.styleDefaults;this.options.styleDefaults=i},getItem:function(e){return this._component.getAutomation().getItem(e)},getItemCount:function(){return this._component.getAutomation().getItemCount()},getContextByNode:function(e){var t=this.getSubIdByNode(e);return t&&"oj-tagcloud-tooltip"!==t.subId?t:null},_GetComponentDeferredDataPaths:function(){return{root:["items","data"]}},_GetSimpleDataProviderConfigs:function(){return{data:{templateName:"itemTemplate",templateElementName:"oj-tag-cloud-item",resultPath:"items"}}}}),w.setDefaultOptions({ojTagCloud:{styleDefaults:w.createDynamicPropertyGetter(function(e){return e.isCustomElement?{svgStyle:{}}:{}})}}),ro.extension._WIDGET_NAME="ojTagCloud",n.CustomElementBridge.register("oj-tag-cloud",{metadata:ro}),ao.extension._CONSTRUCTOR=function(){},n.CustomElementBridge.register("oj-tag-cloud-item",{metadata:ao});var lo={properties:{animationDuration:{type:"number"},animationOnDisplay:{type:"string",enumValues:["auto","none"],value:"none"},areaData:{type:"oj.DataProvider"},areas:{type:"Array<Object>|Promise"},as:{type:"string",value:""},focusRenderer:{type:"function",properties:{color:{type:"string"},componentElement:{type:"Element"},data:{type:"object"},id:{type:"any"},itemData:{type:"object"},label:{type:"string"},location:{type:"string"},parentElement:{type:"Element"},previousState:{type:"object",properties:{hovered:{type:"boolean"},selected:{type:"boolean"},focused:{type:"boolean"}}},renderDefaultFocus:{type:"function"},renderDefaultHover:{type:"function"},renderDefaultSelection:{type:"function"},root:{type:"Element"},state:{type:"object",properties:{hovered:{type:"boolean"},selected:{type:"boolean"},focused:{type:"boolean"}}},x:{type:"number"},y:{type:"number"}}},hiddenCategories:{type:"Array<string>",writeback:!0,value:[]},highlightMatch:{type:"string",enumValues:["all","any"],value:"all"},highlightedCategories:{type:"Array<string>",writeback:!0,value:[]},hoverBehavior:{type:"string",enumValues:["dim","none"],value:"none"},hoverRenderer:{type:"function",properties:{color:{type:"string"},componentElement:{type:"Element"},data:{type:"object"},id:{type:"any"},itemData:{type:"object"},label:{type:"string"},location:{type:"string"},parentElement:{type:"Element"},previousState:{type:"object",properties:{hovered:{type:"boolean"},selected:{type:"boolean"},focused:{type:"boolean"}}},renderDefaultFocus:{type:"function"},renderDefaultHover:{type:"function"},renderDefaultSelection:{type:"function"},root:{type:"Element"},state:{type:"object",properties:{hovered:{type:"boolean"},selected:{type:"boolean"},focused:{type:"boolean"}}},x:{type:"number"},y:{type:"number"}}},initialZooming:{type:"string",enumValues:["auto","none"],value:"none"},isolatedItem:{type:"any"},labelDisplay:{type:"string",enumValues:["auto","off","on"],value:"off"},labelType:{type:"string",enumValues:["long","short"],value:"short"},linkData:{type:"oj.DataProvider"},links:{type:"Array<Object>|Promise"},mapProvider:{type:"object",properties:{geo:{type:"object",value:{}},propertiesKeys:{type:"object",properties:{id:{type:"string",value:""},longLabel:{type:"string",value:""},shortLabel:{type:"string",value:""}}}}},markerData:{type:"oj.DataProvider"},markerZoomBehavior:{type:"string",enumValues:["fixed","zoom"],value:"fixed"},markers:{type:"Array<Object>|Promise"},maxZoom:{type:"number",value:6},panning:{type:"string",enumValues:["auto","none"],value:"none"},renderer:{type:"function",properties:{color:{type:"string"},componentElement:{type:"Element"},data:{type:"object"},id:{type:"any"},itemData:{type:"object"},label:{type:"string"},location:{type:"string"},parentElement:{type:"Element"},previousState:{type:"object",properties:{hovered:{type:"boolean"},selected:{type:"boolean"},focused:{type:"boolean"}}},renderDefaultFocus:{type:"function"},renderDefaultHover:{type:"function"},renderDefaultSelection:{type:"function"},root:{type:"Element"},state:{type:"object",properties:{hovered:{type:"boolean"},selected:{type:"boolean"},focused:{type:"boolean"}}},x:{type:"number"},y:{type:"number"}}},selection:{type:"Array<any>",writeback:!0,value:[]},selectionMode:{type:"string",enumValues:["multiple","none","single"],value:"none"},selectionRenderer:{type:"function",properties:{color:{type:"string"},componentElement:{type:"Element"},data:{type:"object"},id:{type:"any"},itemData:{type:"object"},label:{type:"string"},location:{type:"string"},parentElement:{type:"Element"},previousState:{type:"object",properties:{hovered:{type:"boolean"},selected:{type:"boolean"},focused:{type:"boolean"}}},renderDefaultFocus:{type:"function"},renderDefaultHover:{type:"function"},renderDefaultSelection:{type:"function"},root:{type:"Element"},state:{type:"object",properties:{hovered:{type:"boolean"},selected:{type:"boolean"},focused:{type:"boolean"}}},x:{type:"number"},y:{type:"number"}}},styleDefaults:{type:"object",properties:{areaSvgStyle:{type:"object",value:{}},dataAreaDefaults:{type:"object",value:{},properties:{borderColor:{type:"string"},hoverColor:{type:"string"},selectedInnerColor:{type:"string"},selectedOuterColor:{type:"string"}}},dataMarkerDefaults:{type:"object",properties:{borderColor:{type:"string"},borderStyle:{type:"string",enumValues:["none","solid"],value:"solid"},borderWidth:{type:"number",value:.5},color:{type:"string"},height:{type:"number",value:8},labelStyle:{type:"object",value:{}},opacity:{type:"number",value:1},shape:{type:"string",value:"circle"},width:{type:"number",value:8}}},hoverBehaviorDelay:{type:"number",value:200},labelStyle:{type:"object",value:{}},linkDefaults:{type:"object",properties:{color:{type:"string"},width:{type:"number",value:2}}}}},tooltip:{type:"object",properties:{renderer:{type:"function",properties:{color:{type:"string"},componentElement:{type:"Element"},data:{type:"object"},id:{type:"any"},itemData:{type:"object"},label:{type:"string"},location:{type:"string"},locationName:{type:"string"},parentElement:{type:"Element"},tooltip:{type:"string"},x:{type:"number"},y:{type:"number"}}}}},tooltipDisplay:{type:"string",enumValues:["auto","labelAndShortDesc","none","shortDesc"],value:"auto"},touchResponse:{type:"string",enumValues:["auto","touchStart"],value:"auto"},trackResize:{type:"string",enumValues:["off","on"],value:"on"},translations:{type:"object",value:{},properties:{componentName:{type:"string"},labelAndValue:{type:"string"},labelClearSelection:{type:"string"},labelCountWithTotal:{type:"string"},labelDataVisualization:{type:"string"},labelInvalidData:{type:"string"},labelNoData:{type:"string"},stateCollapsed:{type:"string"},stateDrillable:{type:"string"},stateExpanded:{type:"string"},stateHidden:{type:"string"},stateIsolated:{type:"string"},stateMaximized:{type:"string"},stateMinimized:{type:"string"},stateSelected:{type:"string"},stateUnselected:{type:"string"},stateVisible:{type:"string"}}},zooming:{type:"string",enumValues:["auto","none"],value:"none"}},methods:{getArea:{},getMarker:{},getLink:{},getContextByNode:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}},uo={properties:{categories:{type:"Array<string>",value:[]},color:{type:"string"},label:{type:"string",value:""},labelStyle:{type:"object"},location:{type:"string",value:""},opacity:{type:"number",value:1},selectable:{type:"string",enumValues:["auto","off"],value:"auto"},shortDesc:{type:"string",value:""},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}}},extension:{}},ho={properties:{categories:{type:"Array<string>",value:[]},color:{type:"string",value:""},endLocation:{type:"object",value:{},properties:{id:{type:"any"},location:{type:"string"},x:{type:"number"},y:{type:"number"}}},selectable:{type:"string",enumValues:["auto","off"],value:"auto"},shortDesc:{type:"string",value:""},startLocation:{type:"object",value:{},properties:{id:{type:"any"},location:{type:"string"},x:{type:"number"},y:{type:"number"}}},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}},width:{type:"number",value:2}},extension:{}},co={properties:{borderColor:{type:"string",value:""},borderStyle:{type:"string",enumValues:["none","solid"],value:"solid"},borderWidth:{type:"number",value:.5},categories:{type:"Array<string>",value:[]},color:{type:"string"},height:{type:"number",value:8},label:{type:"string",value:""},labelPosition:{type:"string",enumValues:["bottom","center","top"],value:"center"},labelStyle:{type:"object"},location:{type:"string",value:""},opacity:{type:"number",value:1},rotation:{type:"number",value:0},selectable:{type:"string",enumValues:["auto","off"],value:"auto"},shape:{type:"string",value:"circle"},shortDesc:{type:"string",value:""},source:{type:"string",value:""},sourceHover:{type:"string",value:""},sourceHoverSelected:{type:"string",value:""},sourceSelected:{type:"string",value:""},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}},value:{type:"number"},width:{type:"number",value:8},x:{type:"number"},y:{type:"number"}},extension:{}};n.__registerWidget("oj.ojThematicMap",$.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{animationDuration:void 0,animationOnDisplay:"none",areaData:null,areas:null,as:"",focusRenderer:null,hiddenCategories:[],highlightedCategories:[],highlightMatch:"all",hoverBehavior:"none",hoverRenderer:null,initialZooming:"none",isolatedItem:null,labelDisplay:"off",labelType:"short",linkData:null,links:null,mapProvider:{geo:{},propertiesKeys:{id:"",shortLabel:"",longLabel:""}},markerData:null,markers:null,markerZoomBehavior:"fixed",maxZoom:6,panning:"none",renderer:null,selection:[],selectionMode:"none",selectionRenderer:null,styleDefaults:{dataAreaDefaults:{borderColor:void 0,hoverColor:void 0,selectedInnerColor:void 0,selectedOuterColor:void 0},dataMarkerDefaults:{borderColor:void 0,borderWidth:.5,borderStyle:"solid",color:void 0,height:8,labelStyle:{},opacity:1,shape:"circle",width:8},hoverBehaviorDelay:200,labelStyle:{},linkDefaults:{color:void 0,width:2}},tooltip:{renderer:null},tooltipDisplay:"auto",touchResponse:"auto",zooming:"none"},_currentLocale:"",_loadedBasemaps:[],_basemapPath:"resources/internal-deps/dvt/thematicMap/basemaps/",_supportedLocales:{ar:"ar",cs:"cs",da:"da",de:"de",el:"el",es:"es",fi:"fi",fr:"fr","fr-ca":"fr_CA",he:"iw",hu:"hu",it:"it",ja:"ja",ko:"ko",nl:"nl",no:"no",pl:"pl",pt:"pt_BR","pt-pt":"pt",ro:"ro",ru:"ru",sk:"sk",sv:"sv",th:"th",tr:"tr","zh-hans":"zh_CN","zh-hant":"zh_TW"},_ComponentCreate:function(){this._super(),this._checkBasemaps=[],this._initiallyRendered=!1,this._dataLayersToUpdate=[]},_CreateDvtComponent:function(e,t,i){return dvt.ThematicMap.newInstance(e,t,i)},_ConvertLocatorToSubId:function(e){var t=e.subId;return"oj-thematicmap-area"===t?t=this._getDataLayerId(e.dataLayer,e.index,"area")+":area["+e.index+"]":"oj-thematicmap-marker"===t?t=this._getDataLayerId(e.dataLayer,e.index,"marker")+":marker["+e.index+"]":"oj-thematicmap-link"===t?t=this._getDataLayerId(e.dataLayer,e.index,"link")+":link["+e.index+"]":"oj-thematicmap-tooltip"===t&&(t="tooltip"),t},_ConvertSubIdToLocator:function(e){var t={};return e.indexOf(":area")>0?(t.subId="oj-thematicmap-area",this._IsCustomElement()||(t.dataLayer=e.substring(0,e.indexOf(":"))),t.index=this._GetFirstIndex(e)):e.indexOf(":marker")>0?(t.subId="oj-thematicmap-marker",this._IsCustomElement()||(t.dataLayer=e.substring(0,e.indexOf(":"))),t.index=this._GetFirstIndex(e)):e.indexOf(":link")>0?(t.subId="oj-thematicmap-link",this._IsCustomElement()||(t.dataLayer=e.substring(0,e.indexOf(":"))),t.index=this._GetFirstIndex(e)):"tooltip"===e&&(t.subId="oj-thematicmap-tooltip"),t},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-thematicmap"),e},_GetChildStyleClasses:function(){var e=this._super();return e["oj-dvtbase oj-thematicmap"]={path:"animationDuration",property:"ANIM_DUR"},e["oj-thematicmap-arealayer"]=[{path:"styleDefaults/areaSvgStyle",property:"BACKGROUND"},{path:"styleDefaults/labelStyle",property:"TEXT"}],e["oj-thematicmap-area"]={path:"styleDefaults/dataAreaDefaults/borderColor",property:"border-top-color"},e["oj-thematicmap-area oj-hover"]={path:"styleDefaults/dataAreaDefaults/hoverColor",property:"border-top-color"},e["oj-thematicmap-area oj-selected"]=[{path:"styleDefaults/dataAreaDefaults/selectedInnerColor",property:"border-top-color"},{path:"styleDefaults/dataAreaDefaults/selectedOuterColor",property:"border-bottom-color"}],e["oj-thematicmap-marker"]=[{path:"styleDefaults/dataMarkerDefaults/labelStyle",property:"TEXT"},{path:"styleDefaults/dataMarkerDefaults/color",property:"background-color"},{path:"styleDefaults/dataMarkerDefaults/opacity",property:"opacity"},{path:"styleDefaults/dataMarkerDefaults/borderColor",property:"border-top-color"}],e["oj-thematicmap-link"]={path:"styleDefaults/linkDefaults/color",property:"color"},e["oj-thematicmap-link oj-hover"]={path:"styleDefaults/linkDefaults/_hoverColor",property:"color"},e["oj-thematicmap-link oj-selected"]={path:"styleDefaults/linkDefaults/_selectedColor",property:"border-color"},e},_GetEventTypes:function(){return["optionChange"]},_InitOptions:function(e,t){this._super(e,t);var i=this.options.styleDefaults;this.options.styleDefaults=i},_setOptions:function(e,t){var i,o=Object.keys(e).length,s=e.areaLayers,r=this.options.areaLayers,a=e.pointDataLayers;if(1===o&&s&&r&&r.length>0)for(i=0;i<s.length;i++){for(var l=s[i],u=r[i],d=!0,h=Object.keys(l),c=0;c<h.length;c++){var p=h[c];"areaDataLayer"!==p&&l[p]!==u[p]&&(d=!1)}d&&!n.Object.compareValues(u.areaDataLayer,l.areaDataLayer)&&this._dataLayersToUpdate.push({options:l.areaDataLayer,parentLayer:l.layer,isADL:!0})}else if(1===o&&a&&this.options.pointDataLayers&&this.options.pointDataLayers.length>0)for(i=0;i<a.length;i++)n.Object.compareValues(this.options.pointDataLayers[i],a[i])||this._dataLayersToUpdate.push({options:a[i],parentLayer:a[i].id,isADL:!1});this._super(e,t)},_GetComponentRendererOptions:function(){return["tooltip/renderer","_tooltip/renderer","renderer","focusRenderer","hoverRenderer","selectionRenderer"]},_LoadResources:function(){null==this.options._resources&&(this.options._resources={});var e=this.options._resources;e.panCursorDown=p.getResourceUrl("resources/internal-deps/dvt/chart/hand-closed.cur"),e.panCursorUp=p.getResourceUrl("resources/internal-deps/dvt/chart/hand-open.cur")},_ProcessOptions:function(){this._super();var t=this.options.tooltip,i=t?t.renderer:null;if(i){var n=this;this.options._tooltip={renderer:function(t){var o=n._IsCustomElement()?{insert:t.tooltip}:t.tooltip;try{return i(t)||o}catch(t){return e.warn("Showing default tooltip. "+t),o}}}}var o,s,r=this.options.areaLayers;if(r)for(o=0;o<r.length;o++){var a=r[o].areaDataLayer;a&&(s=a._templateRenderer)&&(a.renderer=this._GetTemplateDataRenderer(s,"area"))}var l=this.options.pointDataLayers;if(l)for(o=0;o<l.length;o++){var u=l[o];u&&(s=u._templateRenderer)&&(u.renderer=this._GetTemplateDataRenderer(s,"point"))}this.options._contextHandler=this._getContextHandler()},_Render:function(){this._NotReady();var e,t=this.options.areaLayers;if(this._IsCustomElement()){if(!this.options.mapProvider.geo.type)return void this._MakeReady()}else{var i=this.options.basemap;if(!i||!t||t.length<1)return void this._MakeReady();for(this._loadBasemap(i,t),e=0;e<this._checkBasemaps.length;e++)if(!this._loadedBasemaps[this._checkBasemaps[e]])return;this._checkBasemaps=[]}if(this._initiallyRendered&&this._dataLayersToUpdate.length>0){if(this._context.isReadyToRender()){for(e=0;e<this._dataLayersToUpdate.length;e++){var n=this._dataLayersToUpdate[e],o=n.isADL;o?this._CleanTemplate("area"):this._CleanTemplate("point"),this._component.updateLayer(n.options,n.parentLayer,o)}this._dataLayersToUpdate=[]}this._MakeReady()}else this._super(),this._initiallyRendered=!0},_RenderComponent:function(e,t){this._IsCustomElement()&&this._mapCustomElementOptions(e),this._updateDataLayerSelection(e),this._super(e,t)},_getContextHandler:function(){var e=this;return function(t,i,n,o,s,r){var a={component:w.__GetWidgetConstructor(e.element),parentElement:t,rootElement:i,data:n,itemData:o,state:s,previousState:r,id:n.id,label:n.label,color:n.color,location:n.location,x:n.x,y:n.y};return e._IsCustomElement()&&(a.renderDefaultHover=e.renderDefaultHover.bind(e,a),a.renderDefaultSelection=e.renderDefaultSelection.bind(e,a),a.renderDefaultFocus=e.renderDefaultFocus.bind(e,a)),e._FixRendererContext(a)}},renderDefaultHover:function(e){e.previousState&&e.state.hovered===e.previousState.hovered||this._component.processDefaultHoverEffect(e.id,e.state.hovered)},renderDefaultSelection:function(e){e.previousState&&e.state.selected===e.previousState.selected||this._component.processDefaultSelectionEffect(e.id,e.state.selected)},renderDefaultFocus:function(e){e.previousState&&e.state.focused===e.previousState.focused||this._component.processDefaultFocusEffect(e.id,e.state.focused)},_loadBasemap:function(e,t){var i=p.getLocale();i!==this._currentLocale&&(this._currentLocale=i,this._loadedBasemaps=[]);for(var n=0;n<t.length;n++){var o=t[n].layer;o&&this._loadBasemapHelper(e,o,i)}var s=this.options.pointDataLayers;!this.options.mapProvider.geo.type&&s&&s.length>0&&this._loadBasemapHelper(e,"cities",i)},_loadResourceByUrl:function(e,t){if(!this._loadedBasemaps[e]){var i=this,n=function(){i._loadedBasemaps[e]=!0,i._Render()},o=$.getScript(p.getResourceUrl(e),function(){n()});t&&o.fail(function(){n()})}},_loadBasemapHelper:function(e,t,i){var n=!0;try{n=Object.keys(dvt.DvtBaseMapManager.getLayerIds(e,t)).length>0}catch(e){n=!1}if(!n&&!this.options.mapProvider.geo.type){var o=this._basemapPath+"ojthematicmap-"+e+"-"+t+".js";-1===this._checkBasemaps.indexOf(o)&&(this._checkBasemaps.push(o),this._loadResourceByUrl(o,!1))}if(-1===i.indexOf("en")){var s=i.toLowerCase().split("-"),r=[s[0]];s.length>1&&r.unshift(s[0]+"-"+s[1]),s.length>2&&r.unshift(s[0]+"-"+s[2],s[0]+"-"+s[1]+"-"+s[2]),e=e.charAt(0).toUpperCase()+e.slice(1),t=t.charAt(0).toUpperCase()+t.slice(1);for(var a=this._basemapPath+"resourceBundles/"+e+t+"Bundle_",l=0;l<r.length;l++)if(this._supportedLocales[r[l]]){var u=a+this._supportedLocales[r[l]]+".js";-1===this._checkBasemaps.indexOf(u)&&(this._checkBasemaps.push(u),this._loadResourceByUrl(u,!0));break}}},_HandleEvent:function(e){if("selection"===e.type){var t,i=e.clientId,n=this.options.selection,o=e.selection;if(this._IsCustomElement())this._selectionDataLayerMap[i]=o,t=this._selectionDataLayerMap.adl1.concat(this._selectionDataLayerMap.pdl1);else if((t={})[i]=o,n)for(var s=Object.keys(n),r=0;r<s.length;r++){var a=s[r];i!==a&&(t[a]=n[a])}this._UserOptionChange("selection",t)}else this._super(e)},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtUtilBundle.THEMATIC_MAP"]=e.componentName,t},_updateDataLayerSelection:function(e){var t=e.selection,i=(this._IsCustomElement()?t.length:Object.keys(t).length)>0;if(t&&i){var n=e.pointDataLayers;if(n)if(this._IsCustomElement()&&n[0])n[0].selection=t;else for(var o=0;o<n.length;o++)t[n[o].id]&&(n[o].selection=t[n[o].id]);var s=e.areaLayers;if(s&&s[0]){var r=s[0].areaDataLayer;this._IsCustomElement()&&r?r.selection=t:r&&t[r.id]&&(r.selection=t[r.id])}}},getArea:function(e){return this._IsCustomElement()?this._component.getAutomation().getData(this._getDataLayerId(null,e,"area"),"area",e):this._component.getAutomation().getData(arguments[0],"area",arguments[1])},getMarker:function(e){return this._IsCustomElement()?this._component.getAutomation().getData(this._getDataLayerId(null,e,"marker"),"marker",e):this._component.getAutomation().getData(arguments[0],"marker",arguments[1])},getLink:function(e){return this._IsCustomElement()?this._component.getAutomation().getData(this._getDataLayerId(null,e,"link"),"link",e):this._component.getAutomation().getData(arguments[0],"link",arguments[1])},getContextByNode:function(e){var t=this.getSubIdByNode(e);return t&&(this._IsCustomElement()&&delete t.dataLayer,"oj-thematicmap-tooltip"!==t.subId)?t:null},_GetComponentDeferredDataPaths:function(){return this._IsCustomElement()?{root:["areas","markers","links","areaData","markerData","linkData"]}:{areaLayers:["areaDataLayer/areas","areaDataLayer/markers","areaDataLayer/links"],pointDataLayers:["markers","links"]}},_GetComponentNoClonePaths:function(){if(this._IsCustomElement()){var e=this._super();return e.mapProvider=!0,e}return{mapProvider:!0,areaLayers:{areaDataLayer:{areas:!0,markers:!0,links:!0}},pointDataLayers:{markers:!0,links:!0}}},_GetDataContext:function(e){if(this._IsCustomElement())return this._super();var t=this.options.basemap,i=e.layer?e.layer:"cities";return{basemap:t,layer:i,ids:dvt.DvtBaseMapManager.getLayerIds(t,i)}},_mapCustomElementOptions:function(e){e.animationOnMapChange=e.animationOnDisplay;var t=[{}];e.areaLayers=t;var i=t[0],n={id:"adl1"};i.areaDataLayer=n;var o=[{id:"pdl1"}];e.pointDataLayers=o;var s=o[0],r=["labelDisplay","labelType"];this._mapOptionHelper(e,r,[i]),r=["animationOnDataChange","focusRenderer","hoverRenderer","renderer","selectionMode","selectionRenderer"],this._mapOptionHelper(e,r,[n,s]),r=["areas","isolatedItem"],this._mapOptionHelper(e,r,[n]),this._selectionDataLayerMap||(this._selectionDataLayerMap={adl1:[],pdl1:[]});var a,l=e.selection,u={};for(a=0;a<l.length;a++)u[l[a]]=!0;this._idToDataLayerMap={};var d=e.areas;if(d)for(a=0;a<d.length;a++){var h=d[a];this._idToDataLayerMap[h.id]="adl1";var c=h.id;u[c]&&this._selectionDataLayerMap.adl1.push(c)}var p,_=e.markers;if(_){this._markerToDataLayerMap=[];var m=[],g=[];for(a=0;a<_.length;a++){var f=_[a];f.location?(m.push(f),p="adl1"):f.x&&f.y&&(g.push(f),p="pdl1"),p&&(this._markerToDataLayerMap[a]=p,this._idToDataLayerMap[f.id]=p,u[f.id]&&this._selectionDataLayerMap[p].push(f.id))}m.length>0&&(n.markers=m),g.length>0&&(s.markers=g)}var v=e.links;if(v){this._linkToDataLayerMap=[];var y=[],b=[];for(a=0;a<v.length;a++){var C=v[a],S=C.startLocation;S&&(S.location?(this._linkToDataLayerMap[a]="adl1",y.push(C)):S.x&&S.y?(b.push(C),this._linkToDataLayerMap[a]="pdl1"):S.id&&(p=this._idToDataLayerMap[S.id],this._linkToDataLayerMap[a]=p,"adl1"===p?y.push(C):b.push(C))),(p=this._idToDataLayerMap[C.id])&&u[C.id]&&this._selectionDataLayerMap[p].push(C.id)}y.length>0&&(n.links=y),b.length>0&&(s.links=b)}},_mapOptionHelper:function(e,t,i){for(var n=0;n<t.length;n++){var o=t[n],s=e[o];if(s)for(var r=0;r<i.length;r++)i[r][o]=s}},_getDataLayerId:function(e,t,i){if(!this._IsCustomElement())return e;switch(i){case"area":return"adl1";case"marker":return this._markerToDataLayerMap[t];case"link":return this._linkToDataLayerMap[t];default:return""}},_GetSimpleDataProviderConfigs:function(){return{areaData:{templateName:"areaTemplate",templateElementName:"oj-thematic-map-area",resultPath:"areas"},linkData:{templateName:"linkTemplate",templateElementName:"oj-thematic-map-link",resultPath:"links"},markerData:{templateName:"markerTemplate",templateElementName:"oj-thematic-map-marker",resultPath:"markers"}}}}),w.setDefaultOptions({ojThematicMap:{styleDefaults:w.createDynamicPropertyGetter(function(e){return e.isCustomElement?{areaSvgStyle:{}}:{}})}}),lo.extension._WIDGET_NAME="ojThematicMap",n.CustomElementBridge.register("oj-thematic-map",{metadata:lo,parseFunction:Zt.shapeParseFunction({"style-defaults.data-marker-defaults.shape":!0})}),uo.extension._CONSTRUCTOR=function(){},n.CustomElementBridge.register("oj-thematic-map-area",{metadata:uo}),ho.extension._CONSTRUCTOR=function(){},n.CustomElementBridge.register("oj-thematic-map-link",{metadata:ho}),function(){co.extension._CONSTRUCTOR=function(){};n.CustomElementBridge.register("oj-thematic-map-marker",{metadata:co,parseFunction:Zt.shapeParseFunction({shape:!0},{circle:!0,diamond:!0,ellipse:!0,human:!0,plus:!0,rectangle:!0,square:!0,star:!0,triangleDown:!0,triangleUp:!0})})}();var po={properties:{converter:{type:"object",value:"{\"default\": null, \"seconds\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'hour': 'numeric', 'minute': '2-digit', 'second': '2-digit'}), \"minutes\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'hour': 'numeric', 'minute': '2-digit'}), \"hours\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'hour': 'numeric'}), \"days\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'month': 'numeric', 'day': '2-digit'}), \"weeks\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'month': 'numeric', 'day': '2-digit'}), \"months\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'month': 'long'}), \"quarters\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'month': 'long'}), \"years\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'year': 'numeric'})}",properties:{default:{type:"oj.Converter<string>"},seconds:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour: numeric, minute: 2-digit, second: 2-digit})"},minutes:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour: numeric, minute: 2-digit})"},hours:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour: numeric})"},days:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month: numeric, day: 2-digit})"},weeks:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month: numeric, day: 2-digit})"},months:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month: long})"},quarters:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month: long})"},years:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({year: numeric})"}}},end:{type:"string",value:""},scale:{type:"string",enumValues:["days","hours","minutes","months","quarters","seconds","weeks","years"]},start:{type:"string",value:""},trackResize:{type:"string",enumValues:["off","on"],value:"on"},translations:{type:"object",value:{},properties:{componentName:{type:"string"},labelAndValue:{type:"string"},labelClearSelection:{type:"string"},labelCountWithTotal:{type:"string"},labelDataVisualization:{type:"string"},labelInvalidData:{type:"string"},labelNoData:{type:"string"},stateCollapsed:{type:"string"},stateDrillable:{type:"string"},stateExpanded:{type:"string"},stateHidden:{type:"string"},stateIsolated:{type:"string"},stateMaximized:{type:"string"},stateMinimized:{type:"string"},stateSelected:{type:"string"},stateUnselected:{type:"string"},stateVisible:{type:"string"}}}},methods:{refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};n.__registerWidget("oj.ojTimeAxis",$.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{converter:{default:null,seconds:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric",minute:"2-digit",second:"2-digit"}),minutes:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric",minute:"2-digit"}),hours:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric"}),days:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"numeric",day:"2-digit"}),weeks:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"numeric",day:"2-digit"}),months:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"long"}),quarters:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"long"}),years:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({year:"numeric"})},start:"",end:"",scale:null},_CreateDvtComponent:function(e,t,i){return dvt.TimeAxis.newInstance(e,t,i)},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-timeaxis"),e},_GetChildStyleClasses:function(){var e=this._super();return e["oj-timeaxis-label"]={path:"labelStyle",property:"TEXT"},e},_GetEventTypes:function(){return["optionChange"]},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtUtilBundle.TIMEAXIS"]=e.componentName,t},_GetComponentRendererOptions:function(){return[]},_ProcessOptions:function(){this._super();var e=this,t=function(t){var i=typeof e.options[t];"number"!==i&&"string"!==i&&(e.options[t]=null)};t("start"),t("end")},_LoadResources:function(){null==this.options._resources&&(this.options._resources={});var e=this.options._resources,t=le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME),i=t.createConverter({hour:"numeric",minute:"2-digit",second:"2-digit"}),o=t.createConverter({hour:"numeric",minute:"2-digit"}),s=t.createConverter({hour:"numeric"}),r=t.createConverter({month:"numeric",day:"2-digit"}),a=t.createConverter({month:"long"}),l=t.createConverter({year:"numeric"}),u=t.createConverter({month:"short"}),d={seconds:i,minutes:o,hours:s,days:r,weeks:r,months:a,quarters:a,years:l},h={seconds:i,minutes:o,hours:s,days:r,weeks:r,months:u,quarters:u,years:t.createConverter({year:"2-digit"})};e.converterFactory=t,e.converter=d,e.converterVert=h,e.axisClass="oj-timeaxis-container",e.axisLabelClass="oj-timeaxis-label",e.axisSeparatorClass="oj-timeaxis-separator",e.borderTopVisible=!1,e.borderRightVisible=!1,e.borderBottomVisible=!1,e.borderLeftVisible=!1,e.firstDayOfWeek=bn.getFirstDayOfWeek()}}),po.extension._WIDGET_NAME="ojTimeAxis",n.CustomElementBridge.register("oj-time-axis",{metadata:po});var _o={properties:{animationOnDataChange:{type:"string",enumValues:["auto","none"],value:"none"},animationOnDisplay:{type:"string",enumValues:["auto","none"],value:"none"},end:{type:"string",value:""},majorAxis:{type:"object",properties:{converter:{type:"object",value:"{\"default\": null, \"seconds\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'hour': 'numeric', 'minute': '2-digit', 'second': '2-digit'}), \"minutes\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'hour': 'numeric', 'minute': '2-digit'}), \"hours\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'hour': 'numeric'}), \"days\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'month': 'numeric', 'day': '2-digit'}), \"weeks\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'month': 'numeric', 'day': '2-digit'}), \"months\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'month': 'long'}), \"quarters\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'month': 'long'}), \"years\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'year': 'numeric'})}",properties:{default:{type:"oj.Converter<string>"},seconds:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour: numeric, minute: 2-digit, second: 2-digit})"},minutes:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour: numeric, minute: 2-digit})"},hours:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour: numeric})"},days:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month: numeric, day: 2-digit})"},weeks:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month: numeric, day: 2-digit})"},months:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month: long})"},quarters:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month: long})"},years:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({year: numeric})"}}},scale:{type:"string",enumValues:["days","hours","minutes","months","quarters","seconds","weeks","years"]},svgStyle:{type:"object",value:{}}}},minorAxis:{type:"object",properties:{converter:{type:"object",value:"{\"default\": null, \"seconds\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'hour': 'numeric', 'minute': '2-digit', 'second': '2-digit'}), \"minutes\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'hour': 'numeric', 'minute': '2-digit'}), \"hours\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'hour': 'numeric'}), \"days\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'month': 'numeric', 'day': '2-digit'}), \"weeks\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'month': 'numeric', 'day': '2-digit'}), \"months\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'month': 'long'}), \"quarters\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'month': 'long'}), \"years\": oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({'year': 'numeric'})}",properties:{default:{type:"oj.Converter<string>"},seconds:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour: numeric, minute: 2-digit, second: 2-digit})"},minutes:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour: numeric, minute: 2-digit})"},hours:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour: numeric})"},days:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month: numeric, day: 2-digit})"},weeks:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month: numeric, day: 2-digit})"},months:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month: long})"},quarters:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month: long})"},years:{type:"oj.Converter<string>",value:"oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({year: numeric})"}}},scale:{type:"string",enumValues:["days","hours","minutes","months","quarters","seconds","weeks","years"]},svgStyle:{type:"object",value:{}},zoomOrder:{type:"Array<string>"}}},orientation:{type:"string",enumValues:["horizontal","vertical"],value:"horizontal"},overview:{type:"object",properties:{rendered:{type:"string",enumValues:["off","on"],value:"off"},svgStyle:{type:"object",value:{}}}},referenceObjects:{type:"Array<Object>",value:[]},selection:{type:"Array<string>",writeback:!0,value:[]},selectionMode:{type:"string",enumValues:["multiple","none","single"],value:"none"},series:{type:"Array<Object>|Promise"},start:{type:"string",value:""},styleDefaults:{type:"object",properties:{animationDuration:{type:"number"},borderColor:{type:"string"},item:{type:"object",value:{},properties:{backgroundColor:{type:"string"},borderColor:{type:"string"},descriptionStyle:{type:"object"},hoverBackgroundColor:{type:"string"},hoverBorderColor:{type:"string"},selectedBackgroundColor:{type:"string"},selectedBorderColor:{type:"string"},titleStyle:{type:"object"}}},majorAxis:{type:"object",value:{},properties:{labelStyle:{type:"object"},separatorColor:{type:"string"}}},minorAxis:{type:"object",value:{},properties:{backgroundColor:{type:"string"},borderColor:{type:"string"},labelStyle:{type:"object"},separatorColor:{type:"string"}}},overview:{type:"object",properties:{backgroundColor:{type:"string"},labelStyle:{type:"object"},window:{type:"object",value:{},properties:{backgroundColor:{type:"string"},borderColor:{type:"string"}}}}},referenceObject:{type:"object",value:{},properties:{color:{type:"string"}}},series:{type:"object",value:{},properties:{backgroundColor:{type:"string"},colors:{type:"Array<string>"},emptyTextStyle:{type:"object"},labelStyle:{type:"object"}}}}},tooltip:{type:"object",value:{renderer:null},properties:{renderer:{type:"function",properties:{parentElement:{type:"Element"},data:{type:"oj.ojTimeline.SeriesItem"},seriesData:{type:"oj.ojTimeline.Series"},componentElement:{type:"Element"},color:{type:"string"}}}}},trackResize:{type:"string",enumValues:["off","on"],value:"on"},translations:{type:"object",value:{},properties:{accessibleItemDesc:{type:"string"},accessibleItemEnd:{type:"string"},accessibleItemStart:{type:"string"},accessibleItemTitle:{type:"string"},componentName:{type:"string"},labelAndValue:{type:"string"},labelClearSelection:{type:"string"},labelCountWithTotal:{type:"string"},labelDataVisualization:{type:"string"},labelDate:{type:"string"},labelDescription:{type:"string"},labelEnd:{type:"string"},labelInvalidData:{type:"string"},labelNoData:{type:"string"},labelSeries:{type:"string"},labelStart:{type:"string"},labelTitle:{type:"string"},stateCollapsed:{type:"string"},stateDrillable:{type:"string"},stateExpanded:{type:"string"},stateHidden:{type:"string"},stateIsolated:{type:"string"},stateMaximized:{type:"string"},stateMinimized:{type:"string"},stateSelected:{type:"string"},stateUnselected:{type:"string"},stateVisible:{type:"string"},tooltipZoomIn:{type:"string"},tooltipZoomOut:{type:"string"}}},valueFormats:{type:"object",properties:{date:{type:"object",properties:{converter:{type:"object"},tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}},description:{type:"object",properties:{tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"off"},tooltipLabel:{type:"string"}}},end:{type:"object",properties:{converter:{type:"object"},tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}},series:{type:"object",properties:{tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"off"},tooltipLabel:{type:"string"}}},start:{type:"object",properties:{converter:{type:"object"},tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"auto"},tooltipLabel:{type:"string"}}},title:{type:"object",properties:{tooltipDisplay:{type:"string",enumValues:["auto","off"],value:"off"},tooltipLabel:{type:"string"}}}}},viewportEnd:{type:"string",value:""},viewportStart:{type:"string",value:""}},methods:{getContextByNode:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojViewportChange:{}},extension:{}};n.__registerWidget("oj.ojTimeline",$.oj.dvtTimeComponent,{widgetEventPrefix:"oj",options:{animationOnDataChange:"none",animationOnDisplay:"none",end:"",minorAxis:{converter:{default:null,seconds:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric",minute:"2-digit",second:"2-digit"}),minutes:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric",minute:"2-digit"}),hours:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric"}),days:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"numeric",day:"2-digit"}),weeks:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"numeric",day:"2-digit"}),months:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"long"}),quarters:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"long"}),years:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({year:"numeric"})},scale:null,svgStyle:{},zoomOrder:null},majorAxis:{converter:{default:null,seconds:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric",minute:"2-digit",second:"2-digit"}),minutes:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric",minute:"2-digit"}),hours:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({hour:"numeric"}),days:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"numeric",day:"2-digit"}),weeks:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"numeric",day:"2-digit"}),months:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"long"}),quarters:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({month:"long"}),years:le.Validation.converterFactory(n.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({year:"numeric"})},scale:null,svgStyle:{}},orientation:"horizontal",overview:{rendered:"off",svgStyle:{}},referenceObjects:[],selection:[],selectionMode:"none",series:null,start:"",styleDefaults:{animationDuration:void 0,borderColor:void 0,item:{backgroundColor:void 0,borderColor:void 0,descriptionStyle:void 0,hoverBackgroundColor:void 0,hoverBorderColor:void 0,selectedBackgroundColor:void 0,selectedBorderColor:void 0,titleStyle:void 0},minorAxis:{backgroundColor:void 0,borderColor:void 0,labelStyle:void 0,separatorColor:void 0},majorAxis:{labelStyle:void 0,separatorColor:void 0},overview:{backgroundColor:void 0,labelStyle:void 0,window:{backgroundColor:void 0,borderColor:void 0}},referenceObject:{color:void 0},series:{backgroundColor:void 0,colors:["#237bb1","#68c182","#fad55c","#ed6647","#8561c8","#6ddbdb","#ffb54d","#e371b2","#47bdef","#a2bf39","#a75dba","#f7f37b"],emptyTextStyle:void 0,labelStyle:void 0}},tooltip:{renderer:null},valueFormats:{series:{tooltipLabel:void 0,tooltipDisplay:"off"},start:{converter:null,tooltipLabel:void 0,tooltipDisplay:"auto"},end:{converter:null,tooltipLabel:void 0,tooltipDisplay:"auto"},date:{converter:null,tooltipLabel:void 0,tooltipDisplay:"auto"},title:{tooltipLabel:void 0,tooltipDisplay:"off"},description:{tooltipLabel:void 0,tooltipDisplay:"off"}},viewportEnd:"",viewportStart:"",viewportChange:null},_CreateDvtComponent:function(e,t,i){return dvt.Timeline.newInstance(e,t,i)},_ConvertLocatorToSubId:function(e){var t=e.subId;return"oj-timeline-item"===t?t="timelineItem["+e.seriesIndex+"]["+e.itemIndex+"]":"oj-timeline-tooltip"===t&&(t="tooltip"),t},_ConvertSubIdToLocator:function(e){var t={};if(0===e.indexOf("timelineItem")){var i=this._GetIndexPath(e);t.subId="oj-timeline-item",t.seriesIndex=i[0],t.itemIndex=i[1]}else"tooltip"===e&&(t.subId="oj-timeline-tooltip");return t},_ProcessStyles:function(){if(this.options.styleDefaults||(this.options.styleDefaults={}),this.options.styleDefaults.series||(this.options.styleDefaults.series={}),!this.options.styleDefaults.series.colors){var e=new E.ColorAttributeGroupHandler;this.options.styleDefaults.series.colors=e.getValueRamp()}this._super()},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-timeline"),e},_GetChildStyleClasses:function(){var e=this._super();return e["oj-dvtbase oj-timeline"]={path:"styleDefaults/animationDuration",property:"ANIM_DUR"},e["oj-timeline"]={path:"styleDefaults/borderColor",property:"border-color"},e["oj-timeline-item"]=[{path:"styleDefaults/item/borderColor",property:"border-color"},{path:"styleDefaults/item/backgroundColor",property:"background-color"}],e["oj-timeline-item oj-hover"]=[{path:"styleDefaults/item/hoverBorderColor",property:"border-color"},{path:"styleDefaults/item/hoverBackgroundColor",property:"background-color"}],e["oj-timeline-item oj-selected"]=[{path:"styleDefaults/item/selectedBorderColor",property:"border-color"},{path:"styleDefaults/item/selectedBackgroundColor",property:"background-color"}],e["oj-timeline-item-description"]={path:"styleDefaults/item/descriptionStyle",property:"TEXT"},e["oj-timeline-item-title"]={path:"styleDefaults/item/titleStyle",property:"TEXT"},e["oj-timeline-major-axis-label"]={path:"styleDefaults/majorAxis/labelStyle",property:"TEXT"},e["oj-timeline-major-axis-separator"]={path:"styleDefaults/majorAxis/separatorColor",property:"color"},e["oj-timeline-minor-axis"]=[{path:"styleDefaults/minorAxis/backgroundColor",property:"background-color"},{path:"styleDefaults/minorAxis/borderColor",property:"border-color"}],e["oj-timeline-minor-axis-label"]={path:"styleDefaults/minorAxis/labelStyle",property:"TEXT"},e["oj-timeline-minor-axis-separator"]={path:"styleDefaults/minorAxis/separatorColor",property:"color"},e["oj-timeline-overview"]={path:"styleDefaults/overview/backgroundColor",property:"background-color"},e["oj-timeline-overview-label"]={path:"styleDefaults/overview/labelStyle",property:"TEXT"},e["oj-timeline-overview-window"]=[{path:"styleDefaults/overview/window/backgroundColor",property:"background-color"},{path:"styleDefaults/overview/window/borderColor",property:"border-color"}],e["oj-timeline-reference-object"]={path:"styleDefaults/referenceObject/color",property:"color"},e["oj-timeline-series"]={path:"styleDefaults/series/backgroundColor",property:"background-color"},e["oj-timeline-series-empty-text"]={path:"styleDefaults/series/emptyTextStyle",property:"TEXT"},e["oj-timeline-series-label"]={path:"styleDefaults/series/labelStyle",property:"TEXT"},e["oj-timeline-tooltip-label"]={path:"styleDefaults/tooltipLabelStyle",property:"TEXT"},e["oj-timeline-zoomin-icon"]=[{path:"_resources/zoomIn_bgc",property:"background-color"},{path:"_resources/zoomIn_bc",property:"border-color"}],e["oj-timeline-zoomin-icon oj-hover"]=[{path:"_resources/zoomIn_h_bgc",property:"background-color"},{path:"_resources/zoomIn_h_bc",property:"border-color"}],e["oj-timeline-zoomin-icon oj-active"]=[{path:"_resources/zoomIn_a_bgc",property:"background-color"},{path:"_resources/zoomIn_a_bc",property:"border-color"}],e["oj-timeline-zoomin-icon oj-disabled"]=[{path:"_resources/zoomIn_d_bgc",property:"background-color"},{path:"_resources/zoomIn_d_bc",property:"border-color"}],e["oj-timeline-zoomout-icon"]=[{path:"_resources/zoomOut_bgc",property:"background-color"},{path:"_resources/zoomOut_bc",property:"border-color"}],e["oj-timeline-zoomout-icon oj-hover"]=[{path:"_resources/zoomOut_h_bgc",property:"background-color"},{path:"_resources/zoomOut_h_bc",property:"border-color"}],e["oj-timeline-zoomout-icon oj-active"]=[{path:"_resources/zoomOut_a_bgc",property:"background-color"},{path:"_resources/zoomOut_a_bc",property:"border-color"}],e["oj-timeline-zoomout-icon oj-disabled"]=[{path:"_resources/zoomOut_d_bgc",property:"background-color"},{path:"_resources/zoomOut_d_bc",property:"border-color"}],e},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtUtilBundle.TIMELINE"]=e.componentName,t["DvtUtilBundle.TIMELINE_SERIES"]=e.labelSeries,t["DvtUtilBundle.ZOOM_IN"]=e.tooltipZoomIn,t["DvtUtilBundle.ZOOM_OUT"]=e.tooltipZoomOut,t},_LoadResources:function(){this._super();var e=this.options._resources,t=e.converter,i=e.converterFactory,n=i.createConverter({month:"short"}),o=i.createConverter({year:"2-digit"}),s={seconds:t.seconds,minutes:t.minutes,hours:t.hours,days:t.days,weeks:t.weeks,months:n,quarters:n,years:o};e.converterVert=s,e.zoomIn="oj-timeline-zoomin-icon",e.zoomIn_h="oj-timeline-zoomin-icon oj-hover",e.zoomIn_a="oj-timeline-zoomin-icon oj-active",e.zoomIn_d="oj-timeline-zoomin-icon oj-disabled",e.zoomOut="oj-timeline-zoomout-icon",e.zoomOut_h="oj-timeline-zoomout-icon oj-hover",e.zoomOut_a="oj-timeline-zoomout-icon oj-active",e.zoomOut_d="oj-timeline-zoomout-icon oj-disabled",e.overviewHandleHor="oj-timeline-overview-window-handle-horizontal",e.overviewHandleVert="oj-timeline-overview-window-handle-vertical"},_GetComponentDeferredDataPaths:function(){return{root:["series"]}},getContextByNode:function(e){var t=this.getSubIdByNode(e);return t&&"oj-timeline-tooltip"!==t.subId?t:null}}),_o.extension._WIDGET_NAME="ojTimeline",n.CustomElementBridge.register("oj-timeline",{metadata:_o}),n.TimeUtils={};n.TimeUtils;n.TimeUtils.getPosition=function(e,t,i,n){var o=new Date(e).getTime(),s=new Date(t).getTime(),r=(o-s)*n,a=new Date(i).getTime()-s;return 0===r||0===a?0:r/a},n.TimeUtils.getLength=function(e,t,i,o,s){var r=new Date(e).getTime(),a=new Date(t).getTime(),l=new Date(i).getTime(),u=new Date(o).getTime(),d=n.TimeUtils.getPosition(r,l,u,s);return n.TimeUtils.getPosition(a,l,u,s)-d},n.TimeUtils.getDate=function(e,t,i,n){var o=new Date(t).getTime(),s=e*(new Date(i).getTime()-o);return 0===s||0===n?o:s/n+o},n.TimezoneData={},n.TimezoneData.__mergeIntoLocaleElements=function(e){var t=bn.__getBundle();n.CollectionUtils.copyInto(t,e,void 0,!0)},n.TimezoneData.__getBundleNames=function(){return n.TimezoneData._bundleNames},n.TimezoneData.__registerBundleName=function(e){n.TimezoneData._bundleNames.push(e)},n.TimezoneData._bundleNames=[],n.TimezoneData.__registerBundleName("/timezoneData"),n.TimezoneData.__mergeIntoLocaleElements("undefined"==typeof ojtd?{}:ojtd);var mo={properties:{chroming:{type:"string",enumValues:["full","half","outlined"]},translations:{type:"object",value:{}}},methods:{refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};!function(){n.__registerWidget("oj.ojToolbar",$.oj.baseComponent,{widgetEventPrefix:"oj",options:{chroming:"half"},_InitOptions:function(t,i){this._super(t,i),"disabled"in i&&e.warn("Caller attempted to set the 'disabled' option on Toolbar, but Toolbar does not support the 'disabled' option.  See API doc.")},_ComponentCreate:function(){this._super();var e=this.element[0];e.setAttribute(w._OJ_CONTAINER_ATTR,this.widgetName),e.classList.add("oj-toolbar"),e.classList.add("oj-component"),e.setAttribute("role","toolbar"),this._hasInitialFocusHandler=!1,this._setup()},_NotifyContextMenuGesture:function(e,t,i){var n=this.element.find(":oj-button[tabindex=0]");this._OpenContextMenu(t,i,{launcher:n,position:{of:"keyboard"===i?n.ojButton("widget"):t}})},_setOption:function(t,i){"disabled"!==t?(this._superApply(arguments),"chroming"===t&&this._refreshChildren()):e.warn("Caller attempted to set the 'disabled' option on Toolbar, but Toolbar does not support the 'disabled' option.  See API doc.  Ignoring the call.")},refresh:function(){this._super(),this._setup(),this._refreshTabindex()},_setup:function(){var e=this,t=this.element[0];this.isRtl="rtl"===this._GetReadingDirection(),this.$enabledButtons=$(),this._IsCustomElement()?(this._hasInitialFocusHandler||(this._focusinListener=function(t){e._handleInitialFocus()},t.addEventListener("focusin",this._focusinListener,!0),this._hasInitialFocusHandler=!0),this.topLevelChildren=t.querySelectorAll("oj-button, oj-menu-button, oj-buttonset-one, oj-buttonset-many"),this._refreshChildren()):(this.$buttons=this.element.find(":oj-button").unbind("keydown"+this.eventNamespace).bind("keydown"+this.eventNamespace,function(t){e._handleKeyDown(t,$(this))}).unbind("click"+this.eventNamespace).bind("click"+this.eventNamespace,function(t){$(this).ojButton("option","disabled")||e._setTabStop($(this))}).unbind("focus"+this.eventNamespace).bind("focus"+this.eventNamespace,function(t){e._handleFocus($(this))}),this.$buttonsets=this.element.find(":oj-buttonset").ojButtonset("refresh"),this.$topLevelButtons=this.$buttons.not(this.$buttonsets.find(":oj-button")).ojButton("refresh"))},_handleFocus:function(e){this._IsCustomElement()||0!==this.$enabledButtons.length?this._setTabStop(e):(this.$enabledButtons=this.$buttons.filter(function(){return!$(this).ojButton("option","disabled")}),this._initTabindexes(null==this._lastTabStop),this.$enabledButtons[0].focus())},_handleInitialFocus:function(){var e=this,t=this.element[0];t.removeEventListener("focusin",this._focusinListener,!0),this._hasInitialFocusHandler=!1,this.topLevelChildren=t.querySelectorAll("oj-button, oj-menu-button, oj-buttonset-one, oj-buttonset-many");var i=t.querySelectorAll("oj-button, oj-menu-button, oj-buttonset-one .oj-button, oj-buttonset-many .oj-button");this.$buttons=$(i).unbind("keydown"+this.eventNamespace).bind("keydown"+this.eventNamespace,function(t){var i=$(this);e._handleKeyDown(t,i)}).unbind("click"+this.eventNamespace).bind("click"+this.eventNamespace,function(t){var i=$(this);i.hasClass("oj-disabled")||e._setTabStop(i)}).unbind("focusin"+this.eventNamespace).bind("focusin"+this.eventNamespace,function(t){var i=$(this);e._handleFocus(i)}),this._IsCustomElement()?this.$enabledButtons=this.$buttons.filter(function(){return!$(this).hasClass("oj-disabled")}):this.$enabledButtons=this.$buttons.filter(function(){return!$(this).ojButton("option","disabled")}),this._initTabindexes(null==this._lastTabStop),this._getButtonFocusElem(this.$enabledButtons[0]).focus()},_refreshTabindex:function(){void 0!==this.$buttons&&(this._IsCustomElement()?this.$enabledButtons=this.$buttons.filter(function(){return!$(this).hasClass("oj-disabled")}):this.$enabledButtons=this.$buttons.filter(function(){return!$(this).ojButton("option","disabled")}),this._initTabindexes(null==this._lastTabStop))},_getButtonFocusElem:function(e){var t=e;if(void 0!==e&&this._IsCustomElement()){var i="button";e.classList.contains("oj-button-toggle")&&(i="input");for(var n=e.children,o=0;o<n.length;o++){var s=n[o];if(s.tagName.toLowerCase()===i){t=s;break}}}return t},_initTabindexes:function(e){var t,i=$(this._lastTabStop);if(this._lastTabStop=void 0,this._IsCustomElement())for(var n=0;n<this.$buttons.length;n++)this._getButtonFocusElem(this.$buttons[n]).setAttribute("tabindex","-1");else this.$buttons.attr("tabindex","-1");t=e||!i.is(this.$enabledButtons)?this.$enabledButtons.first():i,this._setTabStop(t)},_mapToTabbable:function(e){for(var t=[],i=0;i<this.$enabledButtons.length;i++)t.push(this._getButtonFocusElem(this.$enabledButtons[i]));var n=$(t);return e.map(function(e,t){if("radio"!==t.type||t.checked||""===t.name)return t;var i=function(e,t){var i,n=e.name;if(n){var o=":radio[name='"+(n=n.replace(/'/g,"\\'"))+"']:oj-button";i=t.filter(o)}else i=t.filter(e).filter(":oj-button");return i}(t,n).filter(":checked");return i.length?i[0]:t})},_setTabStop:function(e){var t=e,i=(t=this._IsCustomElement()?this._mapToTabbable($(this._getButtonFocusElem(t[0]))):this._mapToTabbable(t))[0],n=this._lastTabStop;i!==n&&($(n).attr("tabindex","-1"),t.attr("tabindex","0"),this._lastTabStop=i)},_handleKeyDown:function(e,t){switch(e.which){case $.ui.keyCode.UP:case $.ui.keyCode.DOWN:if("radio"!==t.attr("type"))break;case $.ui.keyCode.LEFT:case $.ui.keyCode.RIGHT:e.preventDefault();var i=this.$enabledButtons,n=i.length;if(n<2)break;var o=(i.index(t)+(e.which===$.ui.keyCode.DOWN||e.which===$.ui.keyCode.RIGHT^this.isRtl?1:-1)+n)%n;this._getButtonFocusElem(i.eq(o)[0]).focus()}},_destroy:function(){var e=this.element[0];e.classList.remove("oj-toolbar"),e.classList.remove("oj-component"),e.removeAttribute(w._OJ_CONTAINER_ATTR),e.removeAttribute("role"),this.$buttons.attr("tabindex","0"),this._refreshChildren()},_refreshChildren:function(){if(this._IsCustomElement())for(var e=0;e<this.topLevelChildren.length;e++){var t=this.topLevelChildren[e];"OJ-BUTTON"===t.tagName||"OJ-MENU-BUTTON"===t.tagName?w.__GetWidgetConstructor(this._getButtonFocusElem(t),"ojButton")&&t.refresh():"OJ-BUTTONSET-ONE"!==t.tagName&&"OJ-BUTTONSET-MANY"!==t.tagName||w.__GetWidgetConstructor(t,"ojButtonset")&&t.refresh()}else this.$buttonsets.ojButtonset("refresh"),this.$topLevelButtons.ojButton("refresh")}})}(),w.setDefaultOptions({ojToolbar:{chroming:w.createDynamicPropertyGetter(function(){return(_.parseJSONFromFontFamily("oj-toolbar-option-defaults")||{}).chroming})}}),mo.extension._WIDGET_NAME="ojToolbar",n.CustomElementBridge.register("oj-toolbar",{metadata:mo});var go={properties:{selectedStep:{type:"string",writeback:!0},steps:{type:"Array<Object>"},translations:{type:"object",value:{}}},methods:{getStep:{},getNextSelectableStep:{},getPreviousSelectableStep:{},updateStep:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojBeforeDeselect:{},ojDeselect:{},ojBeforeSelect:{},ojSelect:{}},extension:{}};function fo(){}n.__registerWidget("oj.ojTrain",$.oj.baseComponent,{version:"1.0.0",defaultElement:"<div>",widgetEventPrefix:"oj",options:{steps:[],selected:"",selectedStep:"",beforeDeselect:null,deselect:null,beforeSelect:null,select:null},_stepNum:0,_stepArray:null,_ComponentCreate:function(){this._super(),this._setupTrain()},_setupTrain:function(){var e=this.options,t=e.steps;this._stepNum=t.length,this._wrapper=$("<div class='oj-train-wrapper'></div>"),this._wrapper.appendTo(this.element),this._connectorWrapper=$("<div class='oj-train-connector-wrapper'></div>"),this._connectorWrapper.appendTo(this._wrapper);var i=this.element.attr("class");this._stretch=null!=i&&i.indexOf("oj-train-stretch")>=0,this._stretch&&this._connectorWrapper.css("padding","0 "+100/(2*this._stepNum)+"%"),this._connector=$("<div class='oj-train-connector'></div>"),this._connector.appendTo(this._connectorWrapper),this._stepList=$("<ul>"),this._stepList.addClass("oj-train-step-list"),this._connectorFill=$("<div class='oj-train-connector-fill'></div>"),this._connectorFill.appendTo(this._connectorWrapper),this._setupArray(),this._selectedIndex=this._getStepIndex(e.selectedStep||e.selected),-1===this._selectedIndex&&t[0]&&t[0].id&&(this._selectedIndex=0,e.selectedStep=t[0].id,e.selected=t[0].id);for(var n=0;n<this._stepNum;n++){var o=$("<li>").addClass("oj-train-step-list-item").attr({id:this._stepArray[n][1]}),s=this._stepArray[n][4];"confirmation"===s?o.addClass("oj-confirmation"):"info"===s?o.addClass("oj-info"):"error"===s||"fatal"===s?o.addClass("oj-invalid"):"warning"===s&&o.addClass("oj-warning"),o.appendTo(this._stepList),this._drawLabel(n),this._drawStepFill(n),this._drawIndividualConnectorLine(n),this._drawButton(n),this._drawStepNumberLabel(n),this._drawMessageType(n),this._stretch&&o.css("width",100/this._stepNum+"%")}var r=this._stepNum-1===this._selectedIndex?100:100/(2*(this._stepNum-1))+this._selectedIndex/(this._stepNum-1)*100;this._connectorFill.css({width:r+"%"}),this._stepList.appendTo(this._wrapper),this.element.addClass("oj-train")},_setupArray:function(){var e=this.options;this._stepArray=[];for(var t=0;t<this._stepNum;t++){var i=e.steps[t];this._stepArray[t]=new Array(5),this._stepArray[t][0]=i.label?i.label:null,this._stepArray[t][1]=i.id?i.id:null,this._stepArray[t][2]=!!i.disabled,this._stepArray[t][3]=!!i.visited,this._stepArray[t][4]=i.messageType?i.messageType:null}},_drawButton:function(e){var t=$("<div/>").addClass("oj-train-button"),i=$("<span/>"),n=this,o="";if(this._stepArray[e]){var s=this._stepArray[e][3],r=this._stepArray[e][2];this._selectedIndex===e?(t.addClass("oj-selected"),o=" current "):s&&!r?(t.addClass("oj-visited"),o=" visited "):s||r?t.addClass("oj-disabled"):(t.addClass("oj-default"),o=" not visited "),this._stepArray[e][2]||this._selectedIndex===e||(this._AddHoverable(t),this._AddActiveable(t),t.on("click"+this.eventNamespace,function(e){n._fireSelectedStepOptionChange(this.parentNode.parentNode.id,e),n.refresh(),n._setFocus(this.parentNode.parentNode.id)}));var a=this._stepList.children().eq(e).find(".oj-train-button-connector");a.length>=1?(a.children().remove(),a.append(t)):a.append(t),i.text(o),i.addClass("oj-helper-hidden-accessible"),this._stepList.children().eq(e).find("a").append(i)}},_drawMessageType:function(e){if(this._stepArray[e]&&this._stepArray[e][4]){var t=$("<div/>").addClass("oj-train-icon oj-component-icon").attr("aria-hidden","true"),i=$("<span/>"),n="",o=this,s=this._stepArray[e][4];"confirmation"===s?(t.addClass("oj-confirmation"),n=" Confirmation "):"info"===s?(t.addClass("oj-info"),n=" Info "):"error"===s?(t.addClass("oj-error"),n=" Error "):"fatal"===s?(t.addClass("oj-error"),n=" Error "):"warning"===s&&(t.addClass("oj-warning"),n=" Warning ");var r=this._stepList.children().eq(e).find(".oj-train-button");r.children().length>=2&&r.children()[1].remove(),this._stepArray[e][2]||this._selectedIndex===e||t.on("click"+this.eventNamespace,function(e){o._fireSelectedStepOptionChange(this.parentNode.parentNode.parentNode.id,e),o.refresh(),o._setFocus(this.parentNode.parentNode.parentNode.id)}),null!=s&&(i.text(n),i.addClass("oj-helper-hidden-accessible"),this._stepList.children().eq(e).find("a").append(i),r.append(t))}},_fireOptionChange:function(e,t,i){var n={fromStep:this.getStep(e),toStep:this.getStep(t),optionMetadata:{writeback:i?"shouldWrite":"shouldNotWrite"}};if(!1!==this._trigger("beforeDeselect",i,n)&&!1!==this._trigger("beforeSelect",i,n)){var o=this._getStepIndex(e);-1!==o&&(this.options.steps[o].visited=!0),this._trigger("deselect",i,n),this.options.selectedStep&&this.option("selectedStep",t,{_context:{originalEvent:i,internalSet:!0}}),this.options.selected&&this.option("selected",t,{_context:{originalEvent:i,internalSet:!0}}),this._trigger("select",i,n)}},_drawStepNumberLabel:function(e){var t=$("<div/>").addClass("oj-train-button-text");t.append((e+1).toString()),this._stepList.children().eq(e).find(".oj-train-button").append(t)},_drawIndividualConnectorLine:function(e){if(e!==this._stepNum-1){var t=$("<div/>").addClass("oj-train-step-individual-connector");e<this._selectedIndex&&t.addClass("oj-train-connector-before-selected-step"),this._stepList.children().eq(e).prepend(t)}},_drawStepFill:function(e){var t=$("<div/>");if(t.addClass("oj-train-button-connector"),this._stepArray[e]){e<=this._selectedIndex&&t.addClass("oj-train-fill");var i=this._stepList.children().eq(e).children();t.insertBefore(i)}},_drawLabel:function(e){var t=this;if(this._stepArray[e]){var i=$("<div/>").addClass("oj-train-label-wrapper"),n=$("<a>");n.text(this._stepArray[e][0]);var o=this._stepArray[e][2];i.append(n),n.addClass("oj-train-label"),e===this._selectedIndex?n.addClass("oj-selected"):this._stepArray[e][3]&&!o?n.addClass("oj-visited"):o&&n.addClass("oj-disabled"),o||(n.attr("href","#"),this._focusable({element:n,applyHighlight:!0}),this._AddHoverable(n),this._AddActiveable(n),n.on("click keydown"+this.eventNamespace,function(e){e.keyCode!==$.ui.keyCode.ENTER&&"click"!==e.type||(e.preventDefault(),t._fireSelectedStepOptionChange(this.parentNode.parentNode.id,e),t.refresh(),t._setFocus(this.parentNode.parentNode.id))}));var s=this._stepList.children().eq(e).children();s.length>=2&&s[1].remove(),this._stepList.children().eq(e).append(i)}},_getStepIndex:function(e){for(var t=0;t<this._stepNum;t++)if(this._stepArray[t]&&this._stepArray[t][1]===e)return t;return-1},getStep:function(e){for(var t=0;t<this._stepNum;t++)if(this._stepArray[t]&&this._stepArray[t][1]===e)return $.extend({},this.options.steps[t]);return null},nextSelectableStep:function(){return this.getNextSelectableStep()},previousSelectableStep:function(){return this.getPreviousSelectableStep()},getNextSelectableStep:function(){for(var e=this._getStepIndex(this.options.selectedStep||this.options.selected);e<this._stepNum;e++)if(e+1<this._stepNum&&this._stepArray[e+1]&&!this._stepArray[e+1][2])return this._stepArray[e+1][1];return null},getPreviousSelectableStep:function(){for(var e=this._getStepIndex(this.options.selectedStep||this.options.selected);e>=0;e--)if(this._stepArray[e-1]&&!this._stepArray[e-1][2])return this._stepArray[e-1][1];return null},setStep:function(e){e.id&&this.updateStep(e.id,e)},updateStep:function(e,t){if(e){var i=this.getStep(e),n=this._getStepIndex(e);if(-1!==n){var o=this.options.steps[n];t.label&&(i[0]=t.label,o.label=t.label),"string"==typeof t.id&&(i[1]=t.id,o.id=t.id),"boolean"==typeof t.disabled&&(i[2]=t.disabled,o.disabled=t.disabled),"boolean"==typeof t.visited&&(i[3]=t.visited,o.visited=t.visited),t.messageType&&(i[4]=t.messageType,o.messageType=t.messageType),this.refresh()}}},_setOptions:function(e){this._super(e),this.refresh()},_setOption:function(e,t,i){if(("selectedStep"===e||"selected"===e)&&this._stepArray&&this._stepArray[this._selectedIndex]){if(t===this._stepArray[this._selectedIndex][1])return;this._fireOptionChange(this._stepArray[this._selectedIndex][1],t,null)}else this._super(e,t,i)},refresh:function(){this._super(),this._destroy(),this._setupTrain()},_destroy:function(){this._stepList.children().each(function(){$(this).remove()}),this.element.removeClass("oj-train"),this.element.find(".oj-train-wrapper").remove(),this.element.find(".oj-train-connector-wrapper").remove(),this.element.find(".oj-train-step-list").remove(),this.element.find(".oj-train-step-list").remove(),this._super()},_fireSelectedStepOptionChange:function(e,t){var i=this._stepArray[this._selectedIndex][1];i!==e&&this._fireOptionChange(i,e,t)},_setFocus:function(e){var t=this._getStepIndex(e);this._stepList.children().eq(t).find(".oj-train-label").focus()},getNodeBySubId:function(e){if(null===e)return this.element?this.element[0]:null;var t=e.subId,i=e.index;if("number"!=typeof i||i<0||i>=this._stepNum)return null;switch(t){case"oj-train-step":case"oj-train-button":return this._stepList.children().eq(i).find(".oj-train-button")[0];case"oj-train-button-connector":return this._stepList.children().eq(i).find(".oj-train-button-connector")[0];case"oj-train-connector":return this._connector;case"oj-train-connector-fill":return this._connectorFill;case"oj-train-icon":return this._stepList.children().eq(i).find(".oj-train-icon")[0];case"oj-train-label":return this._stepList.children().eq(i).find(".oj-train-label")[0];default:return null}},getSubIdByNode:function(e){for(var t=e,i=this._stepArray?this._stepArray.length:0,n=0;n<i;n++){var o={subId:"oj-train-step",index:n},s=this.getNodeBySubId(o);if($(t).closest(s).length>0||$(t).closest($(s.parentNode.parentNode).find(".oj-train-label")[0]).length>0)return o}return null}}),go.extension._WIDGET_NAME="ojTrain",n.CustomElementBridge.register("oj-train",{metadata:go}),n.TreeDndContext=function(e){this.Init(e)},n.Object.createSubclass(n.TreeDndContext,n.Object,"oj.TreeDndContext"),n.TreeDndContext.prototype.Init=function(e){n.TreeDndContext.superclass.Init.call(this),this.component=e,this.options=e.options,this._reset()},n.TreeDndContext.prototype.isDragEnabled=function(){var e=this._dnd;return e.reorder||e.dragFromEnabled},n.TreeDndContext.prototype.isDropEnabled=function(){var e=this._dnd;return e.reorder||e.dropToEnabled},n.TreeDndContext.prototype.handleDnDOptionChange=function(e){var t=this._dnd,i=n.TreeDndContext,o=t.reorder,s=t.dragFromEnabled;this._dndCleanAll(),this.initDnDOpts(),o===(t=this._dnd).reorder&&s===t.dragFromEnabled||t.reorder||t.dragFromEnabled||this.component._getContainerList().find("li").removeClass(i._OJ_DRAGGABLE).removeClass(i._OJ_DRAG).removeClass(i._OJ_VALID_DROP).removeAttr("draggable"),this.initDnD()},n.TreeDndContext.prototype.initDnDOpts=function(){var e,t,i,o=this.options.dnd,s=this._dnd,r=n.TreeDndContext,a=!0;s.reorder=!1,"object"===typeof o?("string"==typeof(e=o[r._DND_REORDER])&&("enable"===e?(s.reorder=!0,a=!1):"disable"===e&&(a=!1)),a&&(this.options.dnd.reorder="disable"),"object"===typeof(e=o[r._DND_DRAG])&&"object"==typeof(i=e[r._DND_NODE])&&("function"==typeof(t=i[r._DND_DRAGSTART_CB])&&(s.dragStartCallback=t,s.dragFromEnabled=!0),"function"==typeof(t=i[r._DND_DRAGDRAG_CB])&&(s.dragDragCallback=t,s.dragFromEnabled=!0),"function"==typeof(t=i[r._DND_DRAGEND_CB])&&(s.dragEndCallback=t,s.dragFromEnabled=!0),t=i[r._DND_DATATYPES],$.isArray(t)?(s.dragDataTypes=t.slice(),s.dragFromEnabled=!0):"string"==typeof t&&(s.dragDataTypes=[t],s.dragFromEnabled=!0)),"object"===typeof(e=o[r._DND_DROP])&&"object"==typeof(i=e[r._DND_NODE])&&("function"==typeof(t=i[r._DND_DROPDRAGENTER_CB])&&(s.dropDragEnterCallback=t,s.dropToEnabled=!0),"function"==typeof(t=i[r._DND_DROPDRAGOVER_CB])&&(s.dropDragOverCallback=t,s.dropToEnabled=!0),"function"==typeof(t=i[r._DND_DROPDRAGLEAVE_CB])&&(s.dropDragLeaveCallback=t,s.dropToEnabled=!0),"function"==typeof(t=i[r._DND_DROPDROP_CB])&&(s.dropDropCallback=t,s.dropToEnabled=!0),t=i[r._DND_DATATYPES],$.isArray(t)?(s.dropDataTypes=t.slice(),s.dropToEnabled=!0):"string"==typeof t&&(s.dropDataTypes=[t],s.dropToEnabled=!0)),s.reorder||(s.dragDataTypes||s.dragStartCallback||(s.dragFromEnabled=!1,s.dragStartCallback=null,s.dragDragCallback=null,s.dragEndCallback=null,s.dragDataTypes=null),s.dropDropCallback||(s.dropToEnabled=!1,s.dropDragEnterCallback=null,s.dropDragOverCallback=null,s.dropDragLeaveCallback=null,s.dropDropCallback=null,s.dropDataTypes=null)),s.pureReorder=s.reorder&&!s.dragFromEnabled):this.options.dnd={reorder:"disable"}},n.TreeDndContext.prototype.initDnD=function(){var e=this._dnd,t=e.vars,i=n.TreeDndContext;if(e.dragFromEnabled||e.dropToEnabled||e.reorder){n.TreeDndContext._dragMarker?(t.m=n.TreeDndContext._dragMarker,t.ml=n.TreeDndContext._dragMarkerLine):(t.m=$("<div class='oj-tree-drop-marker'><span class='oj-tree-drop-ptr oj-component-icon'>&#160;</span></div>").css("pointer-events","none").hide().appendTo("body"),t.ml=$("<div />").addClass(i._OJT_DROP_MARKER_LINE).css("pointer-events","none").hide().appendTo("body"),n.TreeDndContext._dragMarker=t.m,n.TreeDndContext._dragMarkerLine=t.ml),e.ml_width=t.ml.width();var o=this.component.element[0],s=$(o).children("ul:eq(0)");(e.reorder||e.dragFromEnabled)&&(e.fnDragStart=this._dragStart.bind(this),e.fnDragEnd=this._dragEnd.bind(this),$(o).on("dragstart",e.fnDragStart),$(o).on("dragend",e.fnDragEnd),s.length&&s.find("li").addClass(i._OJ_DRAGGABLE).addClass(i._OJ_DRAG).addClass(i._OJ_VALID_DROP).attr("draggable","true")),(e.reorder||e.dropToEnabled)&&(e.fnDrag=this._drag.bind(this),e.fnDragEnter=this._dragEnter.bind(this),e.fnDragOver=this._dragOver.bind(this),e.fnDragLeave=this._dragLeave.bind(this),e.fnDragDrop=this._dragDrop.bind(this),$(o).on("drag",e.fnDrag),$(o).on("dragenter",e.fnDragEnter),$(o).on("dragover",e.fnDragOver),$(o).on("dragleave",e.fnDragLeave),$(o).on("drop",e.fnDragDrop))}},n.TreeDndContext.prototype._closedown=function(){this._dndCleanAll()},n.TreeDndContext.prototype._dragStart=function(e){var t,i,o=$(e.target).closest("li"),s=e.originalEvent.dataTransfer,r=this._dnd,a=r.vars;if(a.o=null,a.r=null,r.nodeLastEnter=null,r.nodeLastLeft=null,r.nodeDraggedId=null,r.dragStarted=!1,!r.reorder&&!r.dragFromEnabled||o.hasClass(fo._OJ_DISABLED)||this.component._isTreeDisabled())e.preventDefault();else{if(!this.component._canTypedNodeMove(o,"move"))return!1;if(t=this.component.isSelected(o)?this.component._getNode(null,!0):t=o,(r.dragFromEnabled||r.pureReorder)&&this._setDataTypes(s,t),this._setDragImage(s,t),r.dragStartCallback){var l=this._getDraggedItemArray(t);if(i=r.dragStartCallback(e,{item:l}),e.isDefaultPrevented()||"boolean"==typeof i&&!i)return i;if(!r.dragDataTypes&&!this._checkAddedDataTypes(s)&&!r.reorder)return e.preventDefault(),!1}"uninitialized"===s.effectAllowed&&(r.pureReorder?s.effectAllowed="move":s.effectAllowed=n.DomUtils.isMetaKeyPressed(e)?"copy":"move"),this._dndStartDrag(t,o,e)}},n.TreeDndContext.prototype._drag=function(e){var t=this._dnd;t.dragDragCallback&&t.dragDragCallback(e)},n.TreeDndContext.prototype._dragEnter=function(e){this.component._$container_ul[0].firstChild||this._addInternalNode();var t,i=$(e.target),o=this.component._getNode(i),s=this._dnd,r=s.vars,a=o&&o.length>0&&o.hasClass("oj-tree-node"),l=e.originalEvent.dataTransfer,u=n.TreeDndContext,d=!1,h=!1;if(a&&o.hasClass(fo._OJ_TEMPNODE)&&(s.bInternalNode=!0),!a||"UL"!==e.target.tagName||"group"!==e.target.getAttribute("role"))if(s.foreign=!s.dragStarted,!s.foreign&&!s.reorder||s.foreign&&this._isDtType(l,u._DND_INTERNAL_DT_REORDER))this._dndClean();else if(!s.foreign||(d=this._isDtType(l,u._DND_INTERNAL_DT),s.dropToEnabled)){if(r.r=!1,s.nodeLastEnter&&this._clearDropClasses(s.nodeLastEnter),i.hasClass("oj-tree")&&(o=s.nodeLastEnter),!o||!o.length||o.attr("id")!==s.nodeDraggedId)return d&&a&&(s.nodeLastEnter=null,r.o=2),s.foreign&&!d&&(r.o=1),r.r=o,s.nodeLastEnter=o,this._dndPlacement(e,o),this._dndEnter()?(r.r.removeClass(u._OJ_INVALID_DROP).addClass(u._OJ_VALID_DROP).addClass(u._OJ_ACTIVE_DROP),s.dropDragEnterCallback&&(t=s.dropDragEnterCallback(e,{item:s.bInternalNode?null:o,position:s.bInternalNode?"first":s.place,reference:s.bInternalNode?null:r.r})),void 0===t?this._isDtAcceptDataTypes(l)?(e.preventDefault(),e.stopPropagation()):h=s.foreign||!s.reorder:!1===t||e.isDefaultPrevented()?(e.preventDefault(),e.stopPropagation()):!s.foreign&&s.reorder||(h=s.foreign||!s.reorder),h&&this._dndClean(),t):(this._clearDropClasses(r.r),r.r=null,void this._dndHideMarker());this._dndHideMarker()}else this._dndClean()},n.TreeDndContext.prototype._dragOver=function(e){var t,i=this._dnd,n=i.vars,o=e.originalEvent.dataTransfer,s=!1;if(n.r&&n.r.length){var r=n.r;if(r.hasClass("oj-tree-node"))if(r.attr("id")!==i.nodeDraggedId){if(this._dndPlacement(e,r),this._dndPrepare())return i.dropDragOverCallback&&(t=i.dropDragOverCallback(e,{item:i.bInternalNode?null:r,reference:i.bInternalNode?null:n.r,position:i.bInternalNode?"first":n.last_pos})),void 0===t?this._isDtAcceptDataTypes(o)?(e.preventDefault(),e.stopPropagation()):s=i.foreign||!i.reorder:!1===t||e.isDefaultPrevented()?(e.preventDefault(),e.stopPropagation()):!i.foreign&&i.reorder||(s=i.foreign||!i.reorder),s&&this._dndClean(),t;this._dndHideMarker()}else this._dndHideMarker();else this._dndHideMarker()}else this._dndHideMarker()},n.TreeDndContext.prototype._dragDrop=function(e){var t,i=this._dnd,n=i.vars,o=!1;return n.r&&(i.dropDropCallback?t=i.dropDropCallback(e,{reference:i.bInternalNode?null:n.r,position:i.bInternalNode?"first":n.last_pos,reorder:!i.foreign&&i.reorder}):!i.foreign&&i.reorder||(o=!0),o||t&&!e.isDefaultPrevented()||this._dndFinishReorder(e)),i.foreign&&this._dndClean(),o||(e.preventDefault(),e.stopPropagation()),i.nodeLastLeft=null,t},n.TreeDndContext.prototype._dragEnd=function(e){var t=this._dnd,i=t.vars;t.dragEndCallback&&t.dragEndCallback(e,{reorder:t.reorder&&!1===i.o}),this._dndStopDrag(),this._dndClean()},n.TreeDndContext.prototype._addInternalNode=function(){this._internalNode||(this._internalNode=$("<li class='"+fo._OJ_TEMPNODE+" oj-tree-node oj-tree-leaf oj-valid-drop' id='"+fo._OJ_TEMPNODE+"'><ins class='oj-tree-icon'></ins><a href='#'><ins class='oj-tree-icon'></ins><span class='oj-tree-title'></span></a></li>")),this.component._$container_ul.append(this._internalNode)},n.TreeDndContext.prototype._dragLeave=function(e){var t=this._dnd,i=t.vars,n=$(e.target),o=n.closest("li"),s=o&&o.length>0&&o.hasClass("oj-tree-node"),r=e.originalEvent.dataTransfer;t.dropDragLeaveCallback&&t.dropDragLeaveCallback(e,{item:t.bInternalNode?null:o}),n.hasClass("oj-tree")||!s||"none"===r.dropEffect?this._dndLeave(e):t.nodeLastLeft=o,i.r&&this._clearDropClasses(i.r)},n.TreeDndContext.prototype._dndEnter=function(){var e=this._dnd,t=e.vars;e.prepared=!1;var i=this._dndPrepare(),n=e.openTimeoutMs;n&&(e.openTimer_Id&&clearTimeout(e.openTimerId),t.r&&t.r.length&&t.r.hasClass(fo._OJ_COLLAPSED)&&(e.openTimerId=setTimeout(this._dndOpen.bind(this),n)));var o=typeof i;return i="boolean"===o&&i||"string"===o},n.TreeDndContext.prototype._dndOpen=function(){var e=this._dnd,t=e.vars;e.openTimerId=!1,this.component._expand(t.r,this._dndPrepare.bind(this),!0)},n.TreeDndContext.prototype._dndFinishReorder=function(e){var t=this._dnd,i=t.vars;t.dragStarted&&t.reorder&&"object"==typeof i.o&&i.o.length>0&&(this.component._moveNode(i.o,i.r,i.last_pos,n.DomUtils.isMetaKeyPressed(e)),i.o=!1)},n.TreeDndContext.prototype._dndFinishSelection=function(e){e.hasClass(fo._OJ_SELECTED)&&(e.removeClass(fo._OJ_SELECTED),this.component._select(e,!0));for(var t=this.component.getChildren(e),i=t&&t.length?t.length:0,n=0;n<i;n++)this._dndFinishSelection($(t[n]))},n.TreeDndContext.prototype._dndPlacement=function(e,t){var i=this._dnd;if(t)if(t.hasClass(fo._OJ_TEMPNODE))i.place="after";else{e=e.originalEvent,i.off=t.offset();var n=e.pageY-(i.off.top||0);n>=this.component._getNodeHeight()?i.place="after":i.place=n<0?"before":"inside","after"===i.place&&t.hasClass(fo._OJ_EXPANDED)&&(i.place="first")}},n.TreeDndContext.prototype._dndLeave=function(e){var t=this._dnd,i=t.vars;t.after=!1,t.before=!1,t.inside=!1,t.lastNodeEnter=null,this._dndHideMarker(),i.r&&i.r[0]===e.target.parentNode&&t.openTimerId&&(clearTimeout(t.openTimerId),t.openTimerId=!1)},n.TreeDndContext.prototype._dndClean=function(){this._dndHideMarker();var e=this._dnd,t=e.vars;t.o=!1,t.r=!1,e.openTimerId&&clearTimeout(e.openTimerId),e.nodeDraggedId=null,e.foreign=!1,e.nodeLastEnter=null,e.nodeLastLeft=null,e.after=!1,e.before=!1,e.inside=!1,e.off=!1,e.prepared=!1,e.openTimerId=!1,e.foreign=!1,e.bInternalNode=!1},n.TreeDndContext.prototype._dndCleanAll=function(){var e,t=this._dnd;(e=$(this.component._getContainer()[0])).off("dragstart",t.fnDragStart),e.off("dragend",t.fnDragEnd),e.off("drag",t.fnDrag),e.off("dragenter",t.fnDragEnter),e.off("dragover",t.fnDragOver),e.off("dragleave",t.fnDragLeave),e.off("drop",t.fnDragDrop),this._dndClean(),this._reset()},n.TreeDndContext.prototype._dndPrepare=function(){var e=this._dnd,t=e.vars,i=this.component,n=!1;if(!t.r||!t.r.length)return!1;if("number"!=typeof t.o||1!==t.o&&2!==t.o){if(!t.o)return!1}else n=!0;return e.off=t.r.offset(),this.component._isRtl&&(e.off.right=e.off.left+t.r.width()-t.r.find(">a").width()-30),e.targ_ml_width=t.r.find("a").width(),n?(e.before="before"===e.place,e.after="after"===e.place,e.inside="inside"===e.place):(i._prepare_move(t.o,t.r,"before"),e.before=i._checkMove(),i._prepare_move(t.o,t.r,"after"),e.after=i._checkMove(),this.component._isLoaded(t.r)?(i._prepare_move(t.o,t.r,"inside"),e.inside=i._checkMove()):e.inside=!1),e.prepared=!0,this._dndShowMarker()},n.TreeDndContext.prototype._dndShowMarker=function(){var e,t,i,o,s=this._dnd,r=n.TreeDndContext,a=s.vars,l=this.component._isRtl,u=this.component._getNodeHeight(),d=!1;if(!s.prepared)return this._dndHideMarker(),d;if(("after"===s.place&&s.after||"inside"===s.place&&s.inside||"before"===s.place&&s.before||"first"===s.place)&&(d=s.place),"first"===d){var h=a.r.find("li:eq(0)");s.off=h.offset()}var c=l?s.off.right-18:s.off.left+5;switch(e=!this.component.isLeaf(a.r),t=l?c+s.targ_ml_width+18:c,i=l?t-s.ml_width:c+8,o=s.off.top-3,d){case"before":case"first":this._moveMarkerUI(a.m,{left:t,top:o-7}),a.ml&&this._moveMarkerUI(a.ml,{left:i,top:o});break;case"after":o+=u,this._moveMarkerUI(a.m,{left:t,top:o-2}),a.ml&&this._moveMarkerUI(a.ml,{left:i,top:o+6});break;case"inside":var p;p=l?e?-4:0:4,this._moveMarkerUI(a.m,{left:t+p,top:s.off.top+u/2-8}),a.ml&&a.ml.hide();break;default:this._dndHideMarker()}return d?a.r.removeClass(r._OJ_INVALID_DROP).addClass(r._OJ_VALID_DROP):a.r.removeClass(r._OJ_VALID_DROP).removeClass(r._OJ_VALID_DROP),a.last_pos=d,d},n.TreeDndContext.prototype._dndHideMarker=function(){var e=this._dnd.vars;e&&(e.m&&e.m.hide(),e.ml&&e.ml.hide(),e.r&&this._clearDropClasses(e.r))},n.TreeDndContext.prototype._moveMarkerUI=function(e,t){t.left+="px",t.top+="px",e.css(t).show()},n.TreeDndContext.prototype._dndStartDrag=function(e,t,i){var o,s=this._dnd,r=s.vars,a=n.TreeDndContext;r.o=e,r.o.addClass(a._OJ_DRAG),s.nodeDraggedId=t.attr("id");try{i.currentTarget.unselectable="on",i.currentTarget.onselectstart=function(){return!1},i.currentTarget.style&&(i.currentTarget.style.MozUserSelect="none")}catch(e){}this.component._isTheme()&&r.m&&r.m.addClass("oj-tree-"+this.component._getTheme()),o=this.component._getContainer(),s.cof=o.offset(),s.cw=parseInt(o.width(),10),s.ch=parseInt(o.height(),10),s.dragStarted=!0},n.TreeDndContext.prototype._dndStopDrag=function(){var e=this._dnd,t=e.vars,i=n.TreeDndContext;t.r&&this._clearDropClasses(t.r),"number"!=typeof t.o&&t.o&&t.o.removeClass(i._OJ_DRAG),this._dragImg&&(document.body.removeChild(this._dragImg),this._dragImg=null),e.dragStarted=!1},n.TreeDndContext.prototype._setDataTypes=function(e,t){var i,o,s,r=this._dnd,a=n.TreeDndContext;if((i=this.component.__getJson(t))&&(o=JSON.stringify(i)),r.dragDataTypes)for(s=0;s<r.dragDataTypes.length;s++)e.setData(r.dragDataTypes[s],o);e.setData(a._DND_INTERNAL_DT,"0"),r.pureReorder&&e.setData(a._DND_INTERNAL_DT_REORDER,"0")},n.TreeDndContext.prototype._setDragImage=function(e,t){var i=t.length;if(1!==i){var n=$("<div></div>"),o=$("<ul style='padding:0px;margin:0;'></ul>");n.append(o);for(var s=0;s<i;s++){var r=t[s].cloneNode(!0);r.style.marginLeft=0,r.style.paddingLeft=0,o.append(r)}var a=n[0];document.body.appendChild(a),a.style.position="absolute",a.style.top="-"+2*n.height()+"px",a.style.right="0",this._dragImg=a,e.setDragImage(a,0,0)}else this._dragImg=null},n.TreeDndContext.prototype._isDtType=function(e,t){var i,n=e.types,o=n.length;for(i=0;i<o;i++)if(t===n[i])return!0;return!1},n.TreeDndContext.prototype._isDtAcceptDataTypes=function(e){var t,i=this._dnd.dropDataTypes,n=!1;if(i){for(n=!(i.length>0),t=0;t<i.length;t++)if(this._isDtType(e,i[t])){n=!0;break}}else n=!0;return n},n.TreeDndContext.prototype._checkAddedDataTypes=function(e){var t,i,o=e.types,s=o&&o.length?o.length:0,r=n.TreeDndContext,a=!1;for(i=0;i<s;i++)if((t=o[i])!==r._DND_INTERNAL_DT&&t!==r._DND_INTERNAL_DT_REORDER){a=!0;break}return a},n.TreeDndContext.prototype._clearDropClasses=function(e){var t=n.TreeDndContext;e&&e.removeClass(t._OJ_VALID_DROP).removeClass(t._OJ_INVALID_DROP).removeClass(t._OJ_ACTIVE_DROP)},n.TreeDndContext.prototype._getDraggedItemArray=function(e){var t=[];return e&&e.each(function(){t.push(this)}),t},n.TreeDndContext.prototype._reset=function(){var e={};this._dnd=e,e.reorder=!1,e.pureReorder=!1,e.foreign=!1,e.dragStarted=!1,e.nodeDraggedId=null,e.nodeLastEnter=null,e.fnDragStart=null,e.fnDragEnd=null,e.fnDrag=null,e.fnDragEnter=null,e.fnDragOver=null,e.fnDragLeave=null,e.fnDragDrop=null,e.dragFromEnabled=!1,e.dropToEnabled=!1,e.dragStartCallback=null,e.dragDragCallback=null,e.dragDragEndCallback=null,e.dropDragEnterCallback=null,e.dropDragOverCallback=null,e.dropDragLeaveCallback=null,e.dragDropCallback=null,e.dropDataTypes=null,e.after=!1,e.inside=!1,e.before=!1,e.off=!1,e.prepared=!1,e.openTimerId=!1,e.cof=!1,e.cw=!1,e.ch=!1,e.ml_width=100,e.targ_ml_width=100,e.openTimeoutMs=500,e.vars={},e.vars.o=!1,e.vars.r=!1,e.vars.m=!1,e.vars.ml=!1},n.TreeDndContext.prototype._trace=function(e){this.component._trace(e)},n.TreeDndContext._OJ_DRAGGABLE="oj-draggable",n.TreeDndContext._OJ_DRAG="oj-drag",n.TreeDndContext._OJ_ACTIVE_DROP="oj-active-drop",n.TreeDndContext._OJ_VALID_DROP="oj-valid-drop",n.TreeDndContext._OJ_INVALID_DROP="oj-invalid-drop",n.TreeDndContext._OJ_DROP="oj-drop",n.TreeDndContext._OJT_DROP_MARKER="oj-tree-drop-marker",n.TreeDndContext._OJT_DROP_MARKER_LINE="oj-tree-drop-marker-line",n.TreeDndContext._DND_REORDER="reorder",n.TreeDndContext._DND_DRAG="drag",n.TreeDndContext._DND_DROP="drop",n.TreeDndContext._DND_NODE="node",n.TreeDndContext._DND_DATATYPES="dataTypes",n.TreeDndContext._DND_DRAGSTART_CB="dragStart",n.TreeDndContext._DND_DRAGDRAG_CB="drag",n.TreeDndContext._DND_DRAGEND_CB="dragEnd",n.TreeDndContext._DND_DROPDRAGENTER_CB="dragEnter",n.TreeDndContext._DND_DROPDRAGOVER_CB="dragOver",n.TreeDndContext._DND_DROPDRAGLEAVE_CB="dragLeave",n.TreeDndContext._DND_DROPDROP_CB="drop",n.TreeDndContext._DND_INTERNAL_DT="_ojtree",n.TreeDndContext._DND_INTERNAL_DT_REORDER="_ojtreereorder",fo._OJ_EXPANDED="oj-expanded",fo._OJ_COLLAPSED="oj-collapsed",fo._OJ_HOVER="oj-hover",fo._OJ_SELECTED="oj-selected",fo._OJ_DISABLED="oj-disabled",fo._OJ_DEFAULT="oj-default",fo._OJ_TEMPNODE="oj-treenode-temp",function(){var e,t="oj-tree-leaf",i="oj-tree-icon",o="oj-tree-node-icon",s="oj-tree-loading",r="oj-tree-icon oj-tree-disclosure-icon oj-component-icon oj-clickable-icon-nocontext oj-default",a="oj-tree-children",l={cut:"ojtreecut",copy:"ojtreecopy",paste:"ojtreepaste","paste-after":"ojtreepasteafter","paste-before":"ojtreepastebefore",remove:"ojtreeremove",rename:"ojtreerename"},u={cut:"labelCut",copy:"labelCopy",paste:"labelPaste","paste-after":"labelPasteAfter","paste-before":"labelPasteBefore",remove:"labelRemove",rename:"labelRename"},d=["id","title","class","role","draggable","style"];$(function(){var t,i;/msie/.test(navigator.userAgent.toLowerCase())?(t=$('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),i=$('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),e=t.width()-i.width(),t.add(i).remove()):(t=$("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1e3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200}),e=100-t.width(),t.parent().remove())});var h=[];function p(e){var t="";n.DomUtils.isMetaKeyPressed(e)?t+="ctrl+":e.shiftKey&&(t+="shift+");var i=e.which;switch(i){case 32:t+="space";break;case 37:t+="left";break;case 38:t+="up";break;case 39:t+="right";break;case 40:t+="down";break;case 46:t+="del";break;case 33:t+="pgup";break;case 34:t+="pgdn";break;case 35:t+="end";break;case 36:t+="home";break;case 56:t="*";break;case 113:case 121:t+="f"+("1"-(112-i))}if(0===t.length||"shift+"===t||"ctrl+"===t)return!0;var o=null;return $.each(h,function(i,n){if(n._this._data.ui.focused)return n._this._data.ui.touchEvent=!1,"shift+f10"===t?(n._this._data.menu.activeNode=n._this._data.ui.hovered,n._this._data.menu.activeNode||(n._this._data.menu.activeNode=n._this._data.ui.lastSelected)):n._handler[t]&&(e.preventDefault(),o=n._handler[t].call(n._this,e)),!1}),null!=o?o:void 0}function _(e,t){var i=!1,n=!0;if(e.str)return e.title&&(i=$("style[id='"+e.title+"-stylesheet']")[0]),i?n=!1:((i=document.createElement("style")).setAttribute("type","text/css"),e.title&&i.setAttribute("id",e.title+"-stylesheet")),i.styleSheet?n?(document.getElementsByTagName("head")[0].appendChild(i),i.styleSheet.cssText=e.str):i.styleSheet.cssText=i.styleSheet.cssText+" "+e.str:(i.appendChild(document.createTextNode(e.str)),document.getElementsByTagName("head")[0].appendChild(i)),i.sheet||i.styleSheet}var m=-1;n.__registerWidget("oj.ojTree",$.oj.baseComponent,{widgetEventPrefix:"oj",defaultElement:"<div>",options:{dnd:{reorder:"disable"},expandParents:!1,initExpanded:null,initLoaded:[],selection:[],selectionMode:"single",selectedParentCollapse:!1,selectedParentExpand:!0,selectPrevOnDelete:!1,data:null,emptyText:null,icons:!0,types:null,before:null,collapse:null,create:null,collapseAll:null,cut:null,dehover:null,remove:null,destroy:null,expand:null,expandAll:null,hover:null,loaded:null,move:null,paste:null,refresh:null,rename:null},collapse:function(e,t){var i=(t=t||!1)?0:this._animDuration;if(!(e=this._getNode(e)).length||-1===e||!e.hasClass(fo._OJ_EXPANDED)||this._data.core.locked||e.hasClass(fo._OJ_DISABLED))return!1;var n=this._emitEvent({obj:e,func:"collapse"},"before");("boolean"!=typeof n||n)&&(e.removeClass(fo._OJ_EXPANDED).addClass(fo._OJ_COLLAPSED).attr("aria-expanded","false"),$(e.children()[0]).removeClass(fo._OJ_SELECTED).addClass("oj-default"),this._busyStack.push({op:"c",id:e.attr("id")}),this._addBusyState("Tree (id='"+this._elemId+"') : node id='"+e.attr("id")+"' is animating."),!t&&i?this._slide(e,!0):this._transitionEnd($(e.children("UL")[0]),e))},_slide:function(e,t){var i,n,o;i=$(e.children("ul")),this._isSafari?i[0].addEventListener("webkitTransitionEnd",this._proxyTransitionEndHandler):i[0].addEventListener("transitionend",this._proxyTransitionEndHandler),t?(n=i[0].offsetHeight,o=0):(n=0,o=this._getElemHeight(i[0])),i.css("max-height",n+"px"),this._overflow=i.css("overflow"),i.css("overflow","hidden"),t||(i[0].style.display="block"),setTimeout(function(){i.addClass("oj-tree-transition"),i.css("max-height",o+"px")},20)},_getElemHeight:function(e){var t=$("<div style='position: absolute'>"),i=e.parentNode,n=e.nextSibling;i.removeChild(e);var o=e.style.display;e.style.display="block",t.append(e),this._$container[0].appendChild(t[0]);var s=e.offsetHeight||e.scrollHeight;return e.style.display=o,this._$container[0].removeChild(t[0]),t[0].removeChild(e),n?i.insertBefore(e,n):i.appendChild(e),s+10},_transitionEndHandler:function(e){var t=$(e.target),i=t.closest("li");this._isSafari?t[0].removeEventListener("webkitTransitionEnd",this._proxyTransitionEndHandler):t[0].removeEventListener("transitionend",this._proxyTransitionEndHandler),t.removeClass("oj-tree-transition"),this._transitionEnd(t,i)},_transitionEnd:function(e,t){var i;t.hasClass(fo._OJ_COLLAPSED)?(i="c",e[0].style.display="none",e.css("max-height",""),this._emitEvent({obj:t},"collapse"),this.after_close(t)):(i="e",e[0].style.display="block",e.css("max-height",""),this._emitEvent({obj:t},"expand")),this._overflow&&(e.css("overflow",this._overflow),this._overflow=null),this._removeFromBusyStack(i,t.attr("id")),this._resolveIfBusyStackEmpty()},collapseAll:function(e,t){var i=e||-1,n=this;if(!this._data.core.locked&&((e=e?this._getNode(e):this._$container)&&-1!==i&&(i=e),e&&-1!==i||(e=this._$container_ul),!e.hasClass(fo._OJ_DISABLED))){var o;-1!==i&&this.isExpanded(e)&&(o=e[0]);var s=e.find("li.oj-expanded");s.length&&s.each(function(){n.collapse(this,!t)}),o&&(this.collapse(o,!t),s.splice(0,0,o)),s.length&&this._emitEvent({obj:s,targ:i},"collapseAll")}},expand:function(e,t){this._expand(e,!1,t)},expanded:function(e,t){var i=this;if(e&&"array"===$.type(e))return this._data.core.locked?null:($.each(e,function(e,n){i._expand(n,!1,t)}),null);for(var n=(e=this._$container_ul.find("li.oj-expanded")).length,o=[],s=0;s<n;s++)o.push(e[s]);return $(o)},expandAll:function(e,t){this._expandAll(e,t)},toggleExpand:function(e,t){if((e=this._getNode(e))&&e.length&&-1!==e&&!e.hasClass(fo._OJ_DISABLED)&&!this._data.core.locked)return e.hasClass(fo._OJ_COLLAPSED)?this.expand(e,t):e.hasClass(fo._OJ_EXPANDED)?this.collapse(e,t):void 0},deselect:function(e){var t=this.options.selection.slice(0);this._deselect(e),this._fireOptionChangeEvent("selection",t,null,null)},deselectAll:function(e){if(!this._data.core.locked){var t=this.options.selection.slice(0);this._deselectAll(e),this._fireOptionChangeEvent("selection",t,null,null)}},select:function(e){this._select(e,!0)},toggleSelect:function(e){return!!(e=this._getNode(e)).length&&(!e.hasClass(fo._OJ_DISABLED)&&!this._data.core.locked&&(this._isSelected(e)?this.deselect(e):this._select(e,!0),!0))},isCollapsed:function(e){return(e=this._getNode(e))&&-1!==e&&e.hasClass(fo._OJ_COLLAPSED)},isExpanded:function(e){return(e=this._getNode(e))&&-1!==e&&e.hasClass(fo._OJ_EXPANDED)},isLeaf:function(e){return this._isLeaf(e)},isSelected:function(e){return this._isSelected(e)},create:function(e,t,i){var n,o,s=$.isArray(i);if(!s||1===i.length)return n=this._createNode(e,t,s?i[0]:i),this._getDndContext()._dndFinishSelection(n),n;if(s=[],"before"!==t)for(o=i.length-1;o>=0;o--)n=this._createNode(e,t,i[o]),s.unshift(n[0]),this._getDndContext()._dndFinishSelection(n);else for(o=0;o<i.length;o++)n=this._createNode(e,t,i[o]),s.push(n[0]),this._getDndContext()._dndFinishSelection(n);return $(s)},remove:function(e){if(!(e=this._getNode(e)).length||e.hasClass(fo._OJ_DISABLED)||this._data.core.locked)return!1;var i=this._emitEvent({obj:e,func:"remove"},"before");if("boolean"==typeof i&&!i)return!1;this.__rollback();var n=this._getParent(e),o=$([]),s=this,r=this._getPrev(e);return e.each(function(){o=o.add(s._getPrev(this))}),e=e.detach(),-1!==n&&0===n.find("> ul > li").length&&n.removeClass("oj-expanded oj-collapsed").addClass(t).removeAttr("aria-expanded"),this._cleanNode(n),this._emitEvent({obj:e,prev:r,parent:n},"remove"),e},getText:function(e){return!!(e=this._getNode(e)).length&&(e=(e=e.children("a:eq(0)")).find("span:eq(0)"))[0].textContent},rename:function(e,t){t=this._escapeHtml(t),this._renameNode(e,t)},hover:function(e){this._hover(e)},dehover:function(){this._dehover()},getPath:function(e,t){var i=[],n=this;return!(-1===(e=this._getNode(e))||!e||!e.length)&&(e.parentsUntil(".oj-tree","li").each(function(){i.push(t?this.id:n.getText(this))}),i.reverse(),i.push(t?e.attr("id"):this.getText(e)),i)},getRoot:function(){return this._$container.children("ul:eq(0)")},refresh:function(e){this._super(),this._data.core.locked||this._refresh(e||-1)},move:function(e,t,i,n){this._moveNode(e,t,i,n)},getType:function(e){return this._getType(e)},setType:function(e,t){return this._setType(e,t)},getNodeBySubId:function(e){return e?this._processSubId(e):this.element?this.element[0]:null},getSubIdByNode:function(e){return this._getSubIdFromNodeElem(e)},getContextByNode:function(e){e=null==e?0:e;var t=-1!==(e=this._getNode(e))&&e.length>0;return t||-1===e?{subId:t?"oj-tree-node":"oj-tree",item:t?e[0]:null,node:!!t&&e,leaf:!!t&&this._isLeaf(e)}:null},getParent:function(e){var t=this._getParent(e);return t&&t.length>0?t:null},getPrevSibling:function(e){var t=this._getPrev(e,!0);return t&&t.length>0?t:null},getNextSibling:function(e){var t=this._getNext(e,!0);return t&&t.length>0?t:null},getChildren:function(e){e=e||-1;var t=this._getChildren(e);return(t=t&&t.length?t.not("."+fo._OJ_TEMPNODE):t)&&t.length>0?t:null},scrollIntoView:function(e,t,i){var n;if(e?(n=e.node,n=this._getNode(n)):n=-1,-1===n&&(n=this._$container.find("> ul > li:first-child")),n&&n.length){var o="top"===t;return(i=!!i)&&(this._$container_ul.focus(),this.hover(n)),n[0].scrollIntoView(o),this}},_ComponentCreate:function(){if(this._super(),this._index=this._newIndex(),this._elemId=this.element.attr("id"),void 0===this._elemId&&(this._elemId="oj-tree-"+this._getIndex(),this.element.attr("id",this._elemId)),this._$container=this.element,this._$container_ul=null,this._data={},this._tds=null,this._isRtl="rtl"===this._GetReadingDirection(),this._isTouch=n.DomUtils.isTouchSupported(),this._initTree(),this._animDuration=this._getAnimDuration(),this._animDuration){var e=n.AgentUtils.getAgentInfo();this._isSafari=e.browser===n.AgentUtils.BROWSER.SAFARI,this._proxyTransitionEndHandler=this._transitionEndHandler.bind(this)}this._busyStack=[],this._start()},_destroy:function(){this._resolveBusyContext(),this._clearTree(),this._data.html.markup_ul&&(this._unTransformElemIds(this._data.html.markup_ul),this._$container.append(this._data.html.markup_ul),this._data.html.markup_div.remove(),this._data.html.markup_div=!1,this._data.html.useExistingMarkup=!1),this._data.ds.type=0,this._super()},_setOption:function(e,t,i){var n;if("selection"===e)t="string"==typeof t?[t]:t&&t.length?t:[],this._data.core.suppressSelectEvent=!0,this._handleSelectionOptionChange(t),this._data.core.suppressSelectEvent=!1,t=this._getSelected();else if("selectionMode"===e)"none"===t?n=0:"single"===t?n=1:"multiple"===t?n=-1:(n=0,t="none"),n!==this._data.core.selectMode&&(this._data.core.selectMode=n);else if("icons"===e)"boolean"===$.type(t)&&t!==this._data.themes.icons&&(this._data.themes.icons=t,t?this._showIcons():this._hideIcons());else if("contextMenu"===e)this._clearMenu(),t&&(this._initMenuOpts(),this._initMenu(t));else if("disabled"===e)this._handleDisabledChanged(t);else{if("data"===e)return this._super(e,t,i),this._initDSOpts(),this._initDataSource(),this._initExpandedOpts(),void this._loadNodes();if("dnd"===e)return this._super(e,t,i),void this._getDndContext().handleDnDOptionChange(t);"emptyText"===e&&(t=this._escapeHtml(t))}this._super(e,t,i)},_CompareOptionValues:function(e,t,i){return"selection"===e?this._compareSelectionValues(t,i):this._superApply(arguments)},_compareSelectionValues:function(e,t){var i=!1,n=!1,o=e&&e.length?e.length:0,s=t&&t.length?t.length:0;if(o!==s)i=!0;else if(0===o&&0===s)i=!1;else for(var r=0;r<o;r++){var a=$(e[r]).attr("id");n=!1;for(var l=0;l<s;l++)if(a===$(t[l]).attr("id")){n=!0;break}if(!n){i=!0;break}}return!i},_addBusyState:function(e){if(!this._animationResolve){var t=c.getContext(this.element[0]).getBusyContext();this._animationResolve=t.addBusyState({description:e})}},_resolveBusyContext:function(){this._animationResolve&&(this._animationResolve(),this._animationResolve=null)},_isOnBusyStack:function(e,t){for(var i=this._busyStack,n=i.length,o=-1,s=0;s<n;s++)if(i[s].id===t&&i[s].op===e){o=s;break}return o},_removeFromBusyStack:function(e,t){var i=this._isOnBusyStack(e,t);return i>=0&&this._busyStack.splice(i,1),i},_resolveIfBusyStackEmpty:function(){0===this._busyStack.length&&this._resolveBusyContext()},_clearTree:function(){this._TreeDndContext&&(this._TreeDndContext._closedown(),this._TreeDndContext=null);var e=this._getIndex();this._$container.unbind(".oj-tree").undelegate(".oj-tree").removeData("oj-tree-instance-id").find("[class^='oj-tree']").addBack().attr("class",function(){return this.className.replace(/oj-tree[^ ]*|$/gi,"")});var t,i=this._$container.attr("class");0===(i=i.trim()).length&&this._$container.removeAttr("class"),t=this._$container_ul,$.each(h,function(e){if(h[e]._selector===t)return $(t).off("keydown"),h[e]=null,h.splice(e,1),!1}),$(document).unbind(".oj-tree-"+e).undelegate(".oj-tree-"+e),this._$container_ul.remove(),this._$container_ul=null},_getNode:function(e,t){if(null==e)return t?this._data.ui.selected:this._data.ui.lastSelected;var i=$(e,this._getContainer());return i.is(".oj-tree")||-1===e?-1:!!(i=i.closest("li",this._getContainer())).length&&i},_getPrev:function(e,t){if(-1===(e=this._getNode(e)))return this._$container.find("> ul > li:last-child");if(!e.length)return!1;if(t)return e.prevAll("li").length>0&&e.prevAll("li:eq(0)");if(e.prev("li").length){for(e=e.prev("li").eq(0);e.hasClass(fo._OJ_EXPANDED);)e=e.children("ul:eq(0)").children("li:last");return e}var i=e.parentsUntil(".oj-tree","li:eq(0)");return!!i.length&&i},_getNext:function(e,t){return-1===(e=this._getNode(e))?this._$container.find("> ul > li:first-child"):!!e.length&&(t?e.nextAll("li").length>0&&e.nextAll("li:eq(0)"):e.hasClass(fo._OJ_EXPANDED)?e.find("li:eq(0)"):e.nextAll("li").length>0?e.nextAll("li:eq(0)"):e.parentsUntil(".oj-tree","li").next("li").eq(0))},_getParent:function(e){if(-1===(e=this._getNode(e))||!e.length)return!1;var t=e.parentsUntil(".oj-tree","li:eq(0)");return t.length?t:-1},_getChildren:function(e){return-1===(e=this._getNode(e))?this._$container.children("ul:eq(0)").children("li"):!!e.length&&e.children("ul:eq(0)").children("li")},_isLeaf:function(e){return(e=this._getNode(e))&&-1!==e&&e.hasClass(t)},_getNodeElem:function(e){var t=this._$container_ul.find(e),i=!1;return t&&t.length&&t.length>0&&$(t).is("li")&&(i=t),i},_isSelected:function(e){var t=this._getNode(e),i=!1;return t&&t.length&&this._data.ui.selected&&(i=this._data.ui.selected.index(t)>=0),i},_reference:function(e,t){var i=e.parents("div").eq(0),n=w.__GetWidgetConstructor(i);return n&&t&&n("getCI",t),this},getCI:function(e){e.ot=this},_applyDefaults:function(e,t){null!=e&&null!=t&&$.each(t,function(t,i){null==e[t]&&(e[t]=i)})},_handleDisabledChanged:function(e){var t;void 0!==e&&((t=this._$container_ul.hasClass(fo._OJ_DISABLED))||(t=!1),t!==e&&(e?(this._$container_ul.addClass(fo._OJ_DISABLED),this._$container_ul.prop("disabled",!0)):(this._$container_ul.removeClass(fo._OJ_DISABLED),this._$container_ul.prop("disabled",!1)),this._treeDisable(e)))},_treeDisable:function(e){(e=e||!1)?(this._data.core.locked=!0,this._data.ui.opacity=this._$container.children("ul").css("opacity"),this._$container_ul.addClass(fo._OJ_DISABLED).css("opacity","0.9")):(this._data.core.locked=!1,this._$container_ul.removeClass(fo._OJ_DISABLED).css("opacity",this._data.ui.opacity))},_isTreeDisabled:function(){return this._data.core.locked},_handleSelectionOptionChange:function(e){var t=e.slice(0),i=[],n=this;$.grep(t,function(e,o){var s=n._getNodeElem(e);return!!s&&(i.push(s),t[o]=s[0],!0)});var o=this._getSelected();$.each(o,function(e,t){var o=i.length,s=$(t).attr("id"),r=!1;for(e=0;e<o;e++)if(s===i[e].attr("id")){r=!0;break}r||n._deselect(t)}),this._setSelected(i,null)},_prepare_move:function(e,t,i,n,o){var s={};if(t=-1!==t&&t?this._getNode(t):-1,this._reference(e,s),s.rt=this,s.o=s.ot._getNode(e),s.r=t,s.p=void 0===i||!1===i?"last":i,o||!this._data.core.prepMoveBlk.o||this._data.core.prepMoveBlk.o[0]!==s.o[0]||this._data.core.prepMoveBlk.r[0]!==s.r[0]||this._data.core.prepMoveBlk.p!==s.p){if(-1!==s.r&&s.r){if(!/^(before|after)$/.test(s.p)&&!this._isLoaded(s.r))return this._load_node(s.r,function(){this._prepare_move(e,t,i,n,!0)});switch(s.p){case"before":s.cp=s.r.index(),s.cr=s.rt._getParent(s.r);break;case"after":s.cp=s.r.index()+1,s.cr=s.rt._getParent(s.r);break;case"inside":case"first":s.cp=0,s.cr=s.r;break;case"last":s.cp=s.r.find(" > ul > li").length,s.cr=s.r;break;default:s.cp=s.p,s.cr=s.r}}else switch(s.cr=-1,s.p){case"first":case"before":case"inside":s.cp=0;break;case"after":case"last":s.cp=s.rt._$container.find(" > ul > li").length;break;default:s.cp=s.p}s.np=-1===s.cr?s.rt._getContainer():s.cr,s.op=s.ot._getParent(s.o),s.cop=s.o.index(),-1===s.op&&(s.op=s.ot?s.ot._$container:this._$container),!/^(before|after)$/.test(s.p)&&s.op&&s.np&&s.op[0]===s.np[0]&&s.o.index()<s.cp&&(s.cp+=1),s.or=s.np.find(" > ul > li:nth-child("+(s.cp+1)+")"),this._data.core.prepMoveBlk=s,n&&n.call(this,this._data.core.prepMoveBlk,"prepare_move")}else n&&n.call(this,this._data.core.prepMoveBlk)},_checkMove:function(){var e=this._data.core.prepMoveBlk,t=!0,i=-1===e.r?this._$container:e.r;if(!e||!e.o||e.or[0]===e.o[0])return!1;if(!e.r)return!1;if(!e.cy){if(e.op&&e.np&&e.op[0]===e.np[0]&&e.cp-1===e.o.index())return!1;e.o.each(function(){if(-1!==i.parentsUntil(".oj-tree","li").addBack().index(this))return t=!1,!1})}return t},_renameNode:function(e,t){e=this._getNode(e),this.__rollback();var i=this.getText(e);if(e&&e.length){var n=this._emitEvent({obj:e,func:"rename",title:t,prevTitle:i},"before");if("boolean"==typeof n&&!n)return}e&&e.length&&this._set_text.apply(this,Array.prototype.slice.call(arguments))&&this._emitEvent({obj:e,title:t,prevTitle:i},"rename")},_moveNode:function(e,i,n,o,s,r){if(!s){e=this._getNode(e);var a=this._emitEvent({obj:e,func:"move"},"before");if("boolean"==typeof a&&!a)return!1}if(!(e.hasClass&&e.hasClass(fo._OJ_DISABLED)||this._data.core.locked)){if(!s)return this._prepare_move(e,i,n,function(e){e.ot===e.rt||e.cy||e.ot.deselect(e.o),this._moveNode(e,!1,!1,o,!0,r)});if(o&&(this._data.core.prepMoveBlk.cy=!0),!r&&!this._checkMove())return!1;this.__rollback();var l=!1;o?(l=e.o.clone(!0)).find("*[id]").addBack().each(function(){this.id&&(this.id="copy_"+this.id)}):l=e.o,e.or.length?e.or.before(l):(e.np.children("ul").length||$("<ul />").appendTo(e.np),e.np.children("ul:eq(0)").append(l));try{e.ot._cleanNode(e.op),e.rt._cleanNode(e.np),e.op.find("> ul > li").length||e.op.removeClass("oj-expanded oj-collapsed").removeAttr("aria-expanded").addClass(t).children("ul").remove()}catch(e){}o&&(this._data.core.prepMoveBlk.cy=!0,this._data.core.prepMoveBlk.oc=l);var u=$.extend(!0,{},this._data.core.prepMoveBlk);return u.obj=e.o,this._emitEvent(u,"move"),this._data.core.prepMoveBlk}},_getMoveBlk:function(){return this._data.crrm.prepMoveBlk},_getType:function(e){var t=null;return this.options.types&&(t=this._getNode(e)),!(!t||!t.length)&&(t.attr(this.options.types.attr)||"default")},_setType:function(e,t){var i=this.options.types,n=!1;if(e=this._getNode(e),i&&e&&-1!==e&&e.length&&t){var o=i.attr,s=i.types;o&&s&&s[t]&&(e.attr(o,t),e.addClass("oj-tree-type"),n=!0)}return n},_canTypedNodeMove:function(e,t){var i=!0,n=this.options.types;if(n&&(n=n.types)){var o=this._getType(e);(n[o]&&void 0!==n[o][t]||n.default&&void 0!==n.default[t])&&!1===this._check(t,e)&&(i=!1)}return i},_check:function(e,t,i){t=this._getNode(t);var n=!1,o=this._getType(t),s=this._getOptions().types,r=!1;if(-1===t){if(!s[e])return;n=s[e]}else{if(!1===o)return;(r=!!this._data.types.defaults.useData&&t.data("oj-tree"))&&r.types&&void 0!==r.types[e]?n=r.types[e]:s.types[o]&&void 0!==s.types[o][e]?n=s.types[o][e]:s.types.default&&void 0!==s.types.default[e]&&(n=s.types.default[e])}return $.isFunction(n)&&(n=n.call(this,t)),n},_cleanNode:function(e){var s,a,l,u=this._getDndContext(),d=n.TreeDndContext;u.isDragEnabled()&&(s=d._OJ_DRAGGABLE,a="draggable",l=!0),u.isDropEnabled()&&(s+=" "+d._OJ_VALID_DROP),(e=(e=e&&-1!==e?$(e):this._$container_ul).is("li")?e.find("li").addBack():e.find("li")).removeClass("oj-tree-last").addClass("oj-tree-node").addClass(s).attr(a,l).filter("li:last-child").addClass("oj-tree-last").end().filter(":has(li)").not(".oj-expanded").removeClass(t).addClass(fo._OJ_COLLAPSED).attr("aria-expanded","false"),e.not(".oj-expanded, .oj-collapsed").addClass(t).children("ul").remove();var h=!!this.options.types&&this.options.types.attr;$.each(e,function(){var e=$(this),n=e.find("> ins");n.length>1&&(n=$(n[0])),e.hasClass(t)?(n.removeClass(r),n.addClass(i)):(n.addClass(r),n.removeClass(o)),h&&e.attr(h)&&e.addClass("oj-tree-type")})},_createNode:function(e,t,i,n,o){if(e=e||-1,-1!==(e=this._getNode(e))&&!e.length)return null;var s;if(t=void 0===t?"last":t,!o&&!this._isLoaded(e))return this._load_node(e,function(){this._createNode(e,t,i,n,!0)}),null;if(this.__rollback(),!(i=this._parseJson(i)))return null;i=i.children();var r=$(i[0]);switch(-1===e&&(e=this._$container,"before"===t&&(t="first"),"after"===t&&(t="last")),t){case"before":e.before(r),s=this._getParent(e);break;case"after":e.after(r),s=this._getParent(e);break;case"inside":case"first":e.children("ul").length||e.append("<ul />"),e.children("ul").prepend(r),s=e;break;case"last":e.children("ul").length||e.append("<ul />"),e.children("ul").append(r),s=e;break;default:e.children("ul").length||e.append("<ul />"),t||(t=0),(s=e.children("ul").children("li").eq(t)).length?s.before(r):e.children("ul").append(r),s=e}return-1!==s&&s.get(0)!==this._$container.get(0)||(s=-1),this._cleanNode(s),this._emitEvent({obj:r,parent:s},"create"),n&&n.call(this,r),this._$container_ul[0].childNodes.length>1&&this._$container_ul.find("."+fo._OJ_TEMPNODE).remove(),r},_expand:function(e,t,i){if(!(e=this._getNode(e))||!e.length)return!1;if(i=i||!1,!e.hasClass(fo._OJ_DISABLED)&&!this._data.core.locked){if(!e.hasClass(fo._OJ_COLLAPSED))return t&&t.call(),!1;var n=this._emitEvent({obj:e,func:"expand"},"before");if("boolean"!=typeof n||n){var o=i?0:this._animDuration,r=this;this._isLoaded(e)?(this.options.expandParents&&e.parentsUntil(".oj-tree",".oj-collapsed").each(function(){r._expand(this,!1,!0)}),e.removeClass(fo._OJ_COLLAPSED).addClass(fo._OJ_EXPANDED).attr("aria-expanded","true").children("a").removeClass(s),$(e.children()[0]).removeClass(fo._OJ_SELECTED).addClass("oj-default"),this._busyStack.push({op:"e",id:e.attr("id")}),this._addBusyState("Tree (id='"+this._elemId+"') : node id='"+e.attr("id")+"' is animating."),!i&&o?this._slide(e,!1):this._transitionEnd($(e.children("UL")[0]),e),t&&t.call()):(e.children("a").addClass(s),this._load_node(e,function(){r._expand(e,t,i)},t))}}},_expandAll:function(e,t,i){var n=e||-1;(e=e?this._getNode(e):-1)&&-1!==e?n=e:e=this._$container_ul,i?e=e.find("li.oj-collapsed"):(i=e,e=e.is(".oj-collapsed")?e.find("li.oj-collapsed").addBack():e.find("li.oj-collapsed"));var o=this;e.each(function(){var e=this;o._isLoaded(this)?o._expand(this,!1,!t):o.expand(this,function(){o._expandAll(e,t,i)},!t)}),0===i.find("li.oj-collapsed").length&&this._emitEvent({obj:e,targ:n},"expandAll")},_select:function(e,t,i){var o=this._data.core,s=this._data.ui,r=o.selectMode;if(0===r)return!1;if(-1===(e=this._getNode(e))||!e||!e.length)return!1;if(e.hasClass(fo._OJ_DISABLED)||o.locked)return!1;i&&"touchend"===i.type||(s.touchEvent=!1);var a=this._isSelected(e);if(!a){var l=this._emitEvent({obj:e,func:"select"},"before");if("boolean"==typeof l&&!l)return!1}var u=this.options.selection.slice(0),d=this.options,h=s.defaults.selectMultipleModifier,c=s.defaults.selectRangeModifier,p=s.defaults.disableSelectingChildren,_="on"===h||!1!==h&&i&&n.DomUtils.isMetaKeyPressed(i),m=!1!==c&&i&&i[c+"Key"]&&s.lastSelected&&this._data.ui.lastSelected[0]!==e[0]&&s.lastSelected.parent()[0]===e.parent()[0],g=!0,f=this;if(t){if(p&&_&&(e.parentsUntil(".oj-tree","li").children("a.oj-selected").length||e.children("ul").find("a.oj-selected:eq(0)").length))return!1;switch(g=!1,!0){case m:s.lastSelected.addClass("oj-tree-last-selected"),e=e[e.index()<s.lastSelected.index()?"nextUntil":"prevUntil"](".oj-tree-last-selected").addBack(),-1===r||e.length<r?(s.lastSelected.removeClass("oj-tree-last-selected"),s.selected.each(function(){this!==s.lastSelected[0]&&f._deselect(this)}),a=!1,g=!0):g=!1;break;case s.touchEvent&&-1===r:s.touchEvent=!1,this.toggleSelect(e),g=!1;break;case a&&!_:if(!i)break;this._deselectAll(),s.spacebar||(a=!1),g=!0;break;case!a&&!_:i?s.selected&&1===s.selected.length?this._deselect(s.selected):this._deselectAll(s.selected):1===r?this._deselect(s.selected):r>1&&this._deselectAll(),g=!0;break;case a&&_:this.deselect(e);break;case!a&&_:(-1===r||s.selected.length+1<=r)&&(g=!0)}}var v=!1;return g&&!a&&(m||(s.lastSelected=e),e.children("a").addClass(fo._OJ_SELECTED),e.attr("aria-selected","true"),v=!0,d.selectedParentExpand&&e.parents(".oj-collapsed").each(function(){f._expand(this,!1,!0)}),s.selected=s.selected.add(e),this._fix_scroll(e.eq(0)),o.suppressSelectEvent||this._fireOptionChangeEvent("selection",u,null,i)),v},_deselect:function(e){if(!(e=this._getNode(e)).length)return!1;e.hasClass(fo._OJ_DISABLED)||this._data.core.locked||this._isSelected(e)&&(e.children("a").removeClass(fo._OJ_SELECTED),e.removeAttr("aria-selected"),this._data.ui.selected=this._data.ui.selected.not(e),this._data.ui.lastSelected&&this._data.ui.lastSelected.length&&this._data.ui.lastSelected.get(0)===e.get(0)&&(this._data.ui.lastSelected=this._data.ui.selected.eq(0)))},_deselectAll:function(e){if(!this._data.core.locked){var t=e?$(e).find("a.oj-selected").parent():this._$container.find("a.oj-selected").parent();if(t.not(".oj-disabled"),0!==t.length){var i=this;$.each(t,function(){i._deselect(this)})}}},_setSelected:function(e,t){if(!this._data.core.locked&&e&&e.length>0){var i=this;$.each(e,function(e,n){n&&i._select(n,!0,t)})}},_handleNodeTapClick:function(e){if(e.preventDefault(),e.currentTarget.blur(),!$(e.currentTarget).hasClass(s)){if(this._setFocus(),!this._data.ui.focused){var t=this._getNode(e.currentTarget);t.length>0&&-1!==t&&(this._data.ui.lastHovered=t),this._$container_ul.focus()}this._select(e.currentTarget,!0,e)}this._data.ui.touchEvent=!1},_disclosureHover:function(e,t){if(!(e=$(e)).hasClass(fo._OJ_DISABLED)&&!this._data.core.locked){var i=e.parent(),n=i.hasClass(fo._OJ_EXPANDED),o=i.hasClass(fo._OJ_COLLAPSED);(n||o)&&(t?(e.addClass(fo._OJ_HOVER),e.removeClass("oj-default"),e.removeClass(fo._OJ_SELECTED)):(e.removeClass(fo._OJ_HOVER),e.addClass("oj-default")))}},_hover:function(e){if(!this._data.menu.activeNode&&(e=this._getNode(e)).length&&!e.hasClass(fo._OJ_DISABLED)&&!this._data.core.locked&&!e.hasClass(fo._OJ_HOVER)){var t=this._emitEvent({obj:e,func:"hover"},"before");("boolean"!=typeof t||t)&&(e.hasClass(fo._OJ_HOVER)||this._dehover(),this._data.ui.hovered=e.children("a").addClass(fo._OJ_HOVER).parent(),this._$container_ul.attr("aria-activedescendant",this._data.ui.hovered.attr("id")),this._fix_scroll(e),this._emitEvent({obj:e},"hover"))}},_dehover:function(){if(!this._data.menu.activeNode){var e=this._data.ui.hovered;if(e&&e.length&&!e.hasClass(fo._OJ_DISABLED)&&!this._data.core.locked){var t=e.find("a.oj-hover");(t.length||(t=this._$container_ul.find("a.oj-hover")).length)&&(t=t.removeClass(fo._OJ_HOVER).parent(),this._$container_ul.removeAttr("aria-activedescendant"),this._data.ui.hovered=null,null!=e.attr("id")&&this._emitEvent({obj:e},"dehover"))}}},_refresh:function(e){this._refresh_core(e)},_refresh_core:function(e){var t=e||-1,i=this;this._save_opened(),this._saveSelected(),e||(e=-1),(e=this._getNode(e))?t=e:e=-1,-1!==e?e.children("UL").remove():(this._$container_ul.empty(),this._processExistingMarkup()),this._load_node(e,function(){i._emitEvent({obj:t},"refresh"),i._reload_nodes(),i._rehover()})},_refresh_ui:function(e){this._saveSelected(),this._refresh_core(e)},after_close:function(e){this._emitEvent({obj:e},"after_close",!0)},_reopen:function(){var e=this;this._data.core.toExpand.length&&$.each(this._data.core.toExpand,function(t,i){e._expand(i,!1,!0)}),this._emitEvent({},"reopen",!0)},_rehover:function(){var e,t=this._data.ui.lastHovered;t&&(e=t.attr("id"))&&(t=this._getNode("#"+e)),this._data.ui.lastHovered=t,this._data.ui.hovered=t},_getSelected:function(e){for(var t=e?$(e).find("a.oj-selected").parent():this._data.ui.selected,i=[],n=t.length,o=0;o<n;o++)i.push(t[o]);return i},_set_text:function(e,t){return!!(e=this._getNode(e)).length&&(e=(e=e.children("a:eq(0)")).find("span:eq(0)"),this._emitEvent({obj:e,name:t},"set_text",!0),e[0].textContent=t)},_loadNodes:function(){0!==this._data.ds.type&&-1!==this._data.ds.type?this._load_node(-1,function(){this._loaded(),this._reload_nodes()}):(this._applyEmptyText(),this._loaded())},_load_node:function(e,t,i){this._emitEvent({obj:e},"load_node",!0)},_isLoaded:function(e){return!0},_load_node_DS:function(e,t,i){var n=this;this._load_node_tree(e,function(){n._emitEvent({obj:n._getNode(e)},"load_node",!0),t.call(this)},i)},_isLoaded_DS:function(e){return-1===(e=this._getNode(e))||!e||e.is(".oj-expanded, .oj-tree-leaf")||e.children("ul").children("li").length>0},_refresh_DS:function(e){return(e=this._getNode(e))&&-1!==e&&e.removeData(a),this._refresh_ui(e)},_load_node_J:function(e,t,i){var n=this;this._loadNodeJson(e,function(){n._emitEvent({obj:n._getNode(e)},"load_node",!0),t.call(this)},i)},_isLoaded_J:function(e){var t=this.options.data;return-1===(e=this._getNode(e))||!e||!t.ajax&&!this._data.ds.progressiveRender&&!$.isFunction(t.data)||e.is(".oj-expanded, .oj-tree-leaf")||e.children("ul").children("li").length>0},_load_node_H:function(e,t,i){var n=this;this._loadNodeHtml(e,function(){n._emitEvent({obj:n._getNode(e)},"load_node",!0),t.call(this)},i)},_isLoaded_H:function(e){var t=this.options.data,i=null,n=null;return t&&(i=t.data||null,n=t.ajax||null),-1===(e=this._getNode(e))||!e||!n&&!$.isFunction(i)||e.is(".oj-expanded, .oj-tree-leaf")||e.children("ul").children("li").length>0},_reselect:function(){var e=this,t=this._data.ui.toSelect;(t=$.map($.makeArray(t),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/:/g,"\\:")}))&&t.length&&(this.options.selection.length=0,this._data.ui.selected.length=$()),$.each(t,function(t,i){i&&"#"!==i&&e.select(i)}),this._data.ui.selected=this._data.ui.selected.filter(function(){return this.parentNode})},_saveSelected:function(){var e=this._data.ui;e.toSelect=[],e.selected.each(function(){this.id&&e.toSelect.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/:/g,"\\:"))})},rollback:function(e){e&&($.isArray(e)||(e=[e]))},get_rollback:function(){return this._emitEvent(null,"get_rollback",!0),{i:this._getIndex(),h:this._$container.children("ul").clone(!0),d:this.data}},_load_node_tree:function(e,t,i){var n=e&&-1!==e?e[0].id:e||-1,o=this._JsonDSToJson(n,e);if(o.success){var r,a=!e||-1===e,l=this.options.data;if(l.data&&!l.ajax||l.data&&l.ajax&&a)a&&((r=this._parseJson(o.js,e))?(this._$container_ul.empty().append(r.children()),this._cleanNode()):this._data.ds.correctState&&this._$container_ul.empty()),t&&t.call(this);else if(!l.data&&l.ajax||l.data&&l.ajax&&!a)if(r=this._parseJson(o.js,e)){if(a){var u=this._$container_ul;u.empty().append(r.children()),u.attr("role","tree").attr("aria-labelledby",this._elemId).attr("tabindex","0").css("outline","none"),-1===this._data.core.selectMode&&u.attr("aria-multiselectable",!0)}else e.append(r).children("a.oj-tree-loading").removeClass(s),e.removeData("oj-tree-is-loading");this._cleanNode(e),t&&t.call(this)}else a?this._data.ds.correctState&&(this._$container_ul.empty(),t&&t.call(this)):(e.children("a.oj-tree-loading").removeClass(s),e.removeData("oj-tree-is-loading"),l.correct_state&&(this._correct_state(e),t&&t.call(this)))}},_JsonDSToJson:function(e,t){var i=[],n=this._tds,o={},s={success:!1,js:null};-1===e&&(e=null,o.start=0);var r=n.getChildCount(e);return r>0?(o.count=r,n.fetchChildren(e,o,{success:function(e){for(var o=e.getCount(),r=0;r<o;r++){t={};var a=e.getData(r);a&&(t.attr=a),t.title=e.m_nodes[r].title,a.metadata&&(t.metadata=e.m_nodes[r].metadata);var l=t.attr.id;if(n.getChildCount(l)>0){var u=this._JsonDSToJson(l,t);t.children=u.js}i.push(t)}s.success=!0,s.js=i}.bind(this),error:function(){s.success=!1}})):s.success=!0,s},_refresh_json:function(e){if(e=this._getNode(e),!this._data.core.locked){var t=!e||-1!==e||!e.length;if(t||!e.hasClass(fo._OJ_DISABLED)){var i=this.options.data.json;return!t&&this._data.ds.progressiveUnload&&($.isFunction(i.data)||i.ajax)&&e.removeData(a),this._refresh_ui(e)}}},_loadNodeJson:function(e,t,i){var n=this._getOptions().data,o=function(){},r=function(){},l=n&&n.data||null,u=n&&n.ajax||null;if(!n||l||u||(l=n),(e=this._getNode(e))&&-1!==e&&(this._data.ds.progressiveRender||this._data.ds.progressiveUnload)&&!e.is(".oj-expanded, .oj-tree-leaf")&&0===e.children("ul").children("li").length&&e.data(a)){var d=this._parseJson(e.data(a),e);return d&&(e.append(d),this._data.ds.progressiveUnload||e.removeData(a)),this._cleanNode(e),void(t&&t.call(this))}if(e&&-1!==e){if(e.data("oj-tree-is-loading"))return;e.data("oj-tree-is-loading",!0)}switch(!0){case!l&&!u:throw new Error("ojTree - neither data nor ajax settings supplied.");case $.isFunction(l):l.call(this,e,function(n){(n=this._parseJson(n,e))?(-1!==e&&e?(e.append(n).children("a.oj-tree-loading").removeClass(s),e.removeData("oj-tree-is-loading")):this._$container_ul.empty().append(n.children()),this._cleanNode(e),t&&t.call(this)):(-1!==e&&e?(e.children("a.oj-tree-loading").removeClass(s),e.removeData("oj-tree-is-loading"),this._data.ds.correctState&&this._correct_state(e)):this._data.ds.correctState&&this._$container_ul.empty(),i&&i.call(this))}.bind(this));break;case!!l&&!u||!!l&&!!u&&(!e||-1===e):if(!e||-1===e){var h=this._parseJson(l,e);h?(this._$container_ul.empty().append(h.children()),this._cleanNode()):this._data.ds.correctState&&this._$container_ul.empty()}t&&t.call(this);break;case!l&&!!u||!!l&&!!u&&e&&-1!==e:o=function(t,n,o){var r=this.ctx;r._noteLoadFailureId(this.id,!0),r._removeFromBusyStack("j",-1===e?-1:e.attr("id")),r._resolveIfBusyStackEmpty();var a=r._getOptions().data.ajax.error;a&&a.call(r,n,o,t),-1!==e&&e.length?(e.children("a.oj-tree-loading").removeClass(s),e.removeData("oj-tree-is-loading"),"success"===n&&r._data.ds.correctState&&r._correct_state(e)):("error"===n||"success"===n&&r._data.ds.correctState)&&(r._$container_ul.empty(),r._applyEmptyText()),i&&i.call(r)},r=function(i,n,r){var a=this.ctx;a._noteLoadFailureId(this.id,!1),a._removeFromBusyStack("j",this.id);var l=a._getOptions().data.ajax.success;if(l&&(i=l.call(a,i,n,r)||i),"string"==typeof i){var u=i.replace(/^[\s\n]+$/,"");try{u=JSON.parse(u)}catch(e){u=null}if(!u)return o.call(this,r,"Bad JSON","")}if(i=a._parseJson(i,e)){if(-1!==e&&e)e.append(i).children("a.oj-tree-loading").removeClass(s),e.removeData("oj-tree-is-loading");else{var d=a._$container_ul;d.empty().append(i.children()),d.attr("role","tree").attr("aria-labelledby",a._elemId).attr("tabindex","0").css("outline","none"),-1===a._data.core.selectMode&&d.attr("aria-multiselectable",!0)}a._cleanNode(e),t&&t.call(a)}else-1!==e&&e?(e.children("a.oj-tree-loading").removeClass(s),e.removeData("oj-tree-is-loading"),a._data.ds.correctState&&(a._correct_state(e),t&&t.call(a))):a._data.ds.correctState&&(a._$container_ul.empty(),t&&t.call(a))};var c=-1===e?-1:e.attr("id");this._busyStack.push({op:"j",id:c}),this._addBusyState("Tree (id='"+this._elemId+"') : node id='"+c+"' is lazyloading.");var p={ctx:this,id:c};n.ajax.context=p,n.ajax.error=o,n.ajax.success=r,n.dataType||(n.ajax.dataType="json"),p.type=n.ajax.dataType,$.isFunction(n.ajax.url)&&(n.ajax.url=n.ajax.url.call(this,e),p.url=n.ajax.url),$.isFunction(n.ajax.data)&&(n.ajax.data=n.ajax.data.call(this,e)),$.ajax(n.ajax)}},_parseJson:function(e,t,i){var n=!1;if(!e)return n;if(this._data.ds.progressiveUnload&&t&&-1!==t&&t.data(a,n),"string"==typeof e)try{e=JSON.parse(e)}catch(t){e=[]}if($.isArray(e)){if(n=$("<ul>"),!e.length)return!1;for(var s=e.length,l=0;l<s;l++){var u=this._parseJson(e[l],t,!0);u.length&&(n=n.append(u))}n=n.children()}else{"string"==typeof e&&(e={data:e});var d="string"==typeof e.title?e.title:" ";n=$("<li role='treeitem' />"),e.attr&&(this._data.types.defType&&!e.attr.type&&(e.attr.type="oj-tree-deftype",n.addClass("oj-tree-type")),n.attr(e.attr)),e.metadata&&n.data(e.metadata),e.children&&0===e.children.length&&n.addClass(fo._OJ_COLLAPSED),e.state&&"s"===e.state&&n.addClass(fo._OJ_SELECTED),e.data||(e.data={dummy:0});var h=!1,c=$("<a/>");if($.each(e.data,function(t,i){if($.isFunction(i)&&(i=i.call(this,e)),"object"==typeof i&&("attr"===t?c.attr(i):"style"===t&&c.css(i),"language"===t&&c.addClass(i)),!h){var n=$("<span class='oj-tree-title'>");n[0].textContent=d,c.prepend("<ins class='oj-tree-icon "+o+" oj-component-icon'>&#160;</ins>",n),h=!0}!i.icon&&e.icon&&(i.icon=e.icon),i.icon&&(-1===i.icon.indexOf("/")?c.children("ins").addClass(i.icon):c.children("ins").css("background","url('"+i.icon+"') center center no-repeat"))}),n.append(c),n.prepend("<ins class='"+r+"'>&#160;</ins>"),e.children)if(this._data.ds.progressiveRender&&"expanded"!==e.state)n.addClass(fo._OJ_COLLAPSED).attr("aria-expanded","false").data(a,e.children);else if(this._data.ds.progressiveUnload&&n.data(a,e.children),$.isArray(e.children)&&e.children.length&&(c=this._parseJson(e.children,t,!0)).length){var p=$("<ul role='group' />");p.append(c),n.append(p)}}if(!i){var _=$("<ul />");_.append(n),n=_}return n},__getJson:function(e,t,i,n){var o=[],s=this.options,r=this;return(e=this._getNode(e))&&-1!==e||(e=this._$container.find("> ul > li")),t=$.isArray(t)?t:["id","class"],!n&&s.types&&t.push(s.types.attr),i=$.isArray(i)?i:[],e.each(function(){var e,n=$(this),s={},a=r._noteUserAttrs(n);(t.length||a&&a.length)&&(s.attr={}),a&&$.each(a,function(e,t){n.attr(t).length>0&&(s.attr[t]=n.attr(t))}),$.each(t,function(e,t){var i=n.attr(t);i&&i.length&&i.replace(/oj-tree[^ ]*/gi,"").length&&(i=(" "+i).replace(/ oj-tree[^ ]*/gi,"").replace(/ oj-[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")).length&&(s.attr[t]=i)}),r._getDndContext().isDragEnabled()&&r._isSelected(n)&&(s.state="s");var l,u=n.data();l=u,0!==Object.keys(l).length&&(s.metadata=u);var d=n.children("a"),h=null;d.each(function(){var t,n=$(this);i.length||n.children("ins").get(0).style.backgroundImage.length||n.children("ins").get(0).className&&n.children("ins").get(0).className.replace(/oj-tree[^ ]*|$/gi,"").length?(t=r.getText(n),$.each(i,function(t,i){(e=(" "+(n.attr(i)||"")).replace(/ oj-tree[^ ]*/gi,"").replace(/ oj-[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")).length&&(h||(h={attr:{}}),h.attr[i]=e)}),n.children("ins").get(0).className.replace(/oj-tree[^ ]*|$/gi,"").replace(/^\s+$/gi,"").length&&(e=n.children("ins").get(0).className.replace(/oj-tree[^ ]*|$/gi,"").replace(/ oj-[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")).length&&(h||(h={}),h.icon=e),n.children("ins").get(0).style.backgroundImage.length&&(e=n.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","")).length&&(h||(h={}),h.icon=e)):t=r.getText(n),null!=h&&(s.data||(s.data=[]),d.length>1?s.data.push(h):s.data=h),s.title=t}),(n=n.find("> ul > li")).length&&(s.children=r.__getJson(n,t,i,!0)),o.push(s)}),o},_noteUserAttrs:function(e){var t,i=e[0].attributes;if(i&&i.length){t=[];for(var n=d.length,o=0;o<i.length;o++){var s=i[o];if(s){var r;for(s=s.name,r=0;r<n&&(d[r]!==s&&0!==s.indexOf("aria-"));r++);r>=n&&t.push(s)}}}return t&&t.length>0?t:null},_correct_state:function(e){if(!(e=this._getNode(e))||-1===e)return!1;e.removeClass("oj-collapsed oj-expanded").removeAttr("aria-expanded").addClass(t).children("ul").remove(),e.find("ins:first-child").removeClass(r).addClass(i),this._emitEvent({obj:e},"correct_state",!0)},_loaded:function(){this._emitEvent(null,"loaded")},_loadNodeHtml:function(e,t,n){var a=this._getOptions().data,l=function(){},u=function(){},d=a&&a.data||null,h=a&&a.ajax||null;if((e=this._getNode(e))&&-1!==e){if(e.data("oj-tree-is-loading"))return;e.data("oj-tree-is-loading",!0)}switch(!0){case!d&&!h&&a&&"string"==typeof a:this._loadHtmlString(a,e,t,n);break;case $.isFunction(d):d.call(this,e,function(i){this._loadHtmlString(i,e,t,n)}.bind(this));break;case!d&&!h:e&&-1!==e||(this._$container_ul.empty().append(this._data.html.cloneMarkup).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='oj-tree-icon' >&#160;</ins>").end().filter("a").children("ins:first-child").not(".oj-tree-node-icon").addClass(o).addClass(i),this._$container_ul.find("li").children("ins:first-child").addClass(r),this._insertHtmlTextSpan(this._$container_ul),this._data.types.defType&&this._addDefType(this._$container_ul),this._cleanNode(),this._$container_ul.find("ul").attr("role","group"),this._$container_ul.find("li").attr("role","treeitem")),t&&t.call(this);break;case!!d&&!h||!!d&&!!h&&(!e||-1===e):if(!e||-1===e){var c=$(d);c.is("ul")||(c=$("<ul />").append(c)),this._$container_ul.empty().append(c.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='oj-tree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".oj-tree-node-icon").addClass(o).addClass(i),this._$container_ul.find("li.oj-tree-leaf ins:first-child").removeClass(r).removeClass(o).addClass(i),this._insertHtmlTextSpan(this._$container_ul),this._data.types.defType&&this._addDefType(this._$container_ul),this._cleanNode(),this._$container_ul.find("ul").attr("role","group"),this._$container_ul.find("li").attr("role","treeitem")}t&&t.call(this);break;case!d&&!!h||!!d&&!!h&&e&&-1!==e:e=this._getNode(e),l=function(t,i,o){var r=this.ctx;r._noteLoadFailureId(this.id,!0),r._removeFromBusyStack("j",-1===e?-1:e.attr("id")),r._resolveIfBusyStackEmpty();var a=r._getOptions().data.ajax.error;a&&a.call(r,t,i,o),-1!==e&&e.length?(e.children("a.oj-tree-loading").removeClass(s),e.removeData("oj-tree-is-loading"),"success"===i&&r._data.ds.correctState&&r._correct_state(e)):"success"===i&&r._data.ds.correctState&&(r._$container_ul.empty(),r._applyEmptyText()),n&&n.call(r)},u=function(n,a,u){var d,h=this.ctx;h._noteLoadFailureId(this.id,!1),h._removeFromBusyStack("j",-1===e?-1:e.attr("id"));var c=h._getOptions().data.ajax.success;if(c&&(n=c.call(h,n,a,u)||n),""===n||n&&n.toString&&""===n.toString().replace(/^[\s\n]+$/,""))return l.call(h,u,a,"");if(n){(n=$(n)).is("ul")||(n=$("<ul />").append(n)),-1!==e&&e?(e.children("a.oj-tree-loading").removeClass(s),h._removeEmptyUL(e),e.append(n).children("ul").find("li, a").filter(function(){return!h.firstChild||!h.firstChild.tagName||"INS"!==h.firstChild.tagName}).prepend("<ins class='oj-tree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".oj-tree-node-icon").addClass(o).addClass(i),e.removeData("oj-tree-is-loading"),e.find("li.oj-tree-leaf ins:first-child").removeClass(r).removeClass(o).addClass(i),d=e):(h._$container_ul.empty().append(n.children()).find("li, a").filter(function(){return!h.firstChild||!h.firstChild.tagName||"INS"!==h.firstChild.tagName}).prepend("<ins class='oj-tree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".oj-tree-node-icon").addClass(o).addClass(i),h._$container_ul.find("li.oj-tree-leaf ins:first-child").removeClass(r).removeClass(o).addClass(i),d=h._$container_ul),h._handleHtmlParentNoChildren(d),h._insertHtmlTextSpan(d);var p=d.children("UL");p.length>=1&&(p=p.first().find("span.oj-tree-title"),$.each(p,function(){this.textContent=h._escapeHtml(this.textContent)})),h._data.types.defType&&d&&h._addDefType(this._$container_ul),h._cleanNode(e),t&&t.call(h)}else e&&-1!==e?(e.children("a.oj-tree-loading").removeClass(s),e.removeData("oj-tree-is-loading"),h._data.ds.correctState&&(h._correct_state(e),t&&t.call(h))):h._data.ds.correctState&&(h._$container_ul.empty(),t&&t.call(h)),h._$container_ul.find("ul").attr("role","group"),h._$container_ul.find("li").attr("role","treeitem")};var p=-1===e?-1:e.attr("id");this._busyStack.push({op:"j",id:p}),this._addBusyState("Tree (id='"+this._elemId+"') : node id='"+p+"' is lazyloading.");var _={ctx:this,id:p};a.ajax.context=_,a.ajax.error=l,a.ajax.success=u,a.ajax.dataType||(a.ajax.dataType="html"),_.type=a.ajax.dataType,$.isFunction(a.ajax.url)&&(a.ajax.url=a.ajax.url.call(this,e),_.url=a.ajax.url),$.isFunction(a.ajax.data)&&(a.ajax.data=a.ajax.data.call(this,e)),$.ajax(a.ajax)}},_handleHtmlParentNoChildren:function(e){var t=e.find(e.is("ul")?"li ul":"ul").filter(function(){return!this.firstChild||0===this.childNodes.length||1===this.childNodes.length&&3===this.firstChild.nodeType});$.each(t,function(){$(this).closest("li").addClass(fo._OJ_COLLAPSED)})},_removeEmptyUL:function(e){var t=e.find("ul").filter(function(){return!this.firstChild||0===this.childNodes.length||1===this.childNodes.length&&3===this.firstChild.nodeType});t.length>0&&t.remove()},_loadHtmlString:function(e,t,n,a){var l;if(e&&""!==e&&e.toString&&""!==e.toString().replace(/^[\s\n]+$/,"")){(e=$(e)).is("ul")||(e=$("<ul />").append(e)),-1!==t&&t?(t.children("a.oj-tree-loading").removeClass(s),t.append(e).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='oj-tree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".oj-tree-node-icon").addClass("oj-tree-node-icon").addClass("oj-tree-icon"),t.removeData("oj-tree-is-loading"),l=t,this._addDefType(this.obj)):(this._$container_ul.empty().append(e.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='oj-tree-icon oj-tree-disclosure-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".oj-tree-node-icon").addClass(o).addClass(i),this._$container_ul.find("li.oj-tree-leaf ins:first-child").removeClass(r).removeClass(o).addClass(i),l=this._$container_ul,this._addDefType(this._$container_ul)),l&&this._insertHtmlTextSpan(l);var u=l.children("UL");if(u.length>=1){u=u.first().find("span.oj-tree-title");var d=this;$.each(u,function(){this.textContent=d._escapeHtml(this.textContent)})}this._cleanNode(t),n&&n.call(this)}else t&&-1!==t?(t.children("a.oj-tree-loading").removeClass(s),t.removeData("oj-tree-is-loading"),this._data.ds.correctState&&(this._correct_state(t),n&&n.call(this))):this._data.ds.correctState&&(this._$container_ul.empty(),n&&n.call(this))},_insertHtmlTextSpan:function(e){$.each(e.find("li a"),function(e,t){var i=t.innerHTML;i=i.replace("ins>","ins><span class='oj-tree-title'>"),i+="</span>",t.innerHTML=i})},_addDefType:function(e){if(this._data.types.defType){var t=this.options.types,i=t?t.attr:this._data.types.defaults.attr;$.each(e.find("li"),function(e,t){(t=$(t)).attr(i)||t.attr(i,"oj-tree-deftype").addClass("oj-tree-type")})}},_save_opened:function(){var e=this;this._data.core.toExpand=[],this._$container_ul.find("li.oj-expanded").each(function(){this.id&&e._data.core.toExpand.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/:/g,"\\:"))})},_reload_nodes:function(e){var t=this,i=!0,n=[],o=[];e||(this._data.core.reopen=!1,this._data.core.refreshing=!0),this._isOptExpandAll()&&(this._data.core.toExpand=[],this._$container_ul.find("li.oj-collapsed").each(function(){var e="#"+$(this).attr("id");t.isExpanded(e)||t._isLoadFailureId(e)||t._data.core.toExpand.push(e)})),this._data.core.toExpand=$.map($.makeArray(this._data.core.toExpand),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/:/g,"\\:")}),this._data.core.toLoad=$.map($.makeArray(this._data.core.toLoad),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/:/g,"\\:")}),this._data.core.toExpand.length&&(this._data.core.toLoad=this._data.core.toLoad.concat(this._data.core.toExpand),this._data.core.toLoad=this._data.core.toLoad.reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[])),this._data.core.toLoad.length&&($.each(this._data.core.toLoad,function(e,i){if("#"===i)return!0;t._$container.find(i).length?t.isExpanded(i)||n.push(i):o.push(i)}),n.length&&(this._data.core.toLoad=o,$.each(n,function(e,n){t._isLoaded(n)||(t._load_node(n,function(){t._reload_nodes(!0)},function(){t._reload_nodes(!0)}),i=!1)}))),this._data.core.toExpand.length&&$.each(this._data.core.toExpand,function(e,i){t.isExpanded(i)||t._expand(i,!1,!0)}),i&&(this._data.core.reopen&&clearTimeout(this._data.core.reopen),this._data.core.reopen=setTimeout(function(){t._emitEvent({},"reload_nodes",!0),t._resolveIfBusyStackEmpty()},50),this._data.core.refreshing=!1,this._reopen())},setTheme:function(e,t){if(!e)return!1;t||(t=this._data.themes._themes+e+"/style.css"),-1===$.inArray(t,this._data.themes.themes_loaded)&&(_({url:t}),this._data.themes.themes_loaded.push(t)),this._data.themes.theme!==e&&(this._$container.removeClass("oj-tree-"+this._data.themes.theme),this._data.themes.theme=e),this._$container.addClass("oj-tree-"+e),this._data.themes.dots?this._showDots():this._hideDots(),this._data.themes.icons?this._showIcons():this._hideIcons()},_isTheme:function(){return null!=this._data.themes},_getTheme:function(){return this._data.themes.theme},isIcons:function(){return this._data.themes.icons},_showIcons:function(){this._data.themes.icons=!0,this._$container.children("ul").removeClass("oj-tree-no-icons")},_hideIcons:function(){this._data.themes.icons=!1,this._$container.children("ul").addClass("oj-tree-no-icons")},toggleIcons:function(){},_enableKeys:function(){this._data.keys.enabled=!0},_initTree:function(){this._initData(),this._initCoreOpts(),this._initUIOpts(),this._initDSOpts(!0),this._initTypeOpts(),this._getDndContext().initDnDOpts(),this._initMenuOpts(),this._initCore(),this._initUI(),this._initThemes(),this._initDataSource(),this._initTypes(),this._getDndContext().initDnD(),this._initKeys(),this._initMenu()},_emitEvent:function(e,t,i){if(t&&"string"===$.type(t)&&(!0!==this._data.core.locked||"unlock"===t||"isLocked"===t||"lock"===t)){var n=Array.prototype.slice.call(arguments),o=this._$container,s="before"===t,r=!i;r||(t="_tree"+t);var a={};if(a.item=e?e.obj:void 0,a.inst=o,s){var l=e.func;a.func=l,a.args=n,"rename"===l&&(a.title=e.title,a.prevTitle=e.prevTitle)}else r&&("move"===t?(a.position=e.p,a.reference=e.r,a.data=e):"rename"===t?(a.title=e.title,a.prevTitle=e.prevTitle):"remove"===t?(a.parent=e.parent,a.prev=e.prev):"delete"===t?(a.prev=e.prev,a.parent=e.parent):"expandAll"===t||"collapseAll"===t||"deselectAll"===t?a.targ=e.targ:"loaded"===t?a.item=-1:"paste"===t&&(a.position=e.p,a.reference=e.r));if(r){var u=this._trigger(t,new $.Event("oj"+t),a);if(s)return void 0!==u&&(u=!!u),u}else this._$container.trigger(t,a)}},_fireOptionChangeEvent:function(e,t,i,n){"selection"===e&&(null==i&&(i=this._getSelected()),this._compareSelectionValues(t,i)||this.option(e,i,{_context:{originalEvent:n,internalSet:!0},changed:!0}))},__rollback:function(){return this.get_rollback()},_start:function(){var e;this._isRtl&&this._$container.addClass("oj-tree-rtl").css("direction","rtl"),this._$container.html("<ul role='tree' tabindex='0' class='oj-tree-list' style='outline:none'"+(-1===this._data.core.selectMode?" aria-multiselectable='true'":"")+" aria-labelledby='"+this._elemId+"'><li class='oj-tree-last oj-tree-leaf'><ins class='oj-tree-icon'>&#160;</ins><a class='oj-tree-loading' href='#'><ins class='oj-tree-icon'>&#160;</ins>"+this._getString("stateLoading")+"</a></li></ul>"),this._$container_ul=this._$container.children("ul:eq(0)"),this._$container.data("oj-tree-instance-id",this._getIndex()),this._data.core.li_height=this._$container_ul.find("li.oj-collapsed, li.oj-tree-leaf").eq(0).height()||18,this._isTouch&&this._$container.delegate(".oj-tree-list ins.oj-tree-disclosure-icon","touchend.ojtree",function(e){e.preventDefault();var t=$(e.target);this.toggleExpand(t)}.bind(this)),this._$container.delegate(".oj-tree-list ins.oj-tree-disclosure-icon","click.ojtree",function(e){var t=$(e.target);this.toggleExpand(t)}.bind(this)).delegate(".oj-tree-list ins.oj-tree-disclosure-icon","mousedown",function(e){this._data.ui.disclosureClick=!0,$(e.target).removeClass("oj-default").removeClass(fo._OJ_HOVER).addClass(fo._OJ_SELECTED)}.bind(this)).delegate(".oj-tree-list ins.oj-tree-disclosure-icon","mouseup",function(e){$(e.target).removeClass(fo._OJ_SELECTED).addClass("oj-default")}).bind("mousedown.ojtree",function(e){this._setFocus(),e.shiftKey&&(this._getDndContext()&&this._getDndContext().isDragEnabled()||e.preventDefault())}.bind(this)).bind("dblclick.ojtree",function(){var e;if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){e=window.getSelection();try{e.removeAllRanges(),e.collapse(document.getElementsByTagName("body")[0],0)}catch(e){}}}),this._$container_ul.focus(function(){return this._data.ui.disclosureClick?(this._data.ui.disclosureClick=!1,!1):(this._data.ui.focused=!0,this._data.ui.hovered?e=this._data.ui.hovered:this._data.ui.lastHovered?(this._data.ui.hovered=this._data.ui.lastHovered,e=this._data.ui.hovered):this._data.ui.lastSelected&&this._data.ui.lastSelected.length>0?(this._data.ui.hovered=this._data.ui.lastSelected,e=this._data.ui.hovered):e=this._$container_ul.find("li:first"),e&&(this.hover(e),this._data.ui.lastHovered=null,this._$container_ul.find("a.oj-selected").removeClass("oj-tree-inactive")),!1);var e}.bind(this)).blur(function(){this._data.ui.focused=!1,this._data.ui.lastHovered=this._data.ui.hovered,this._data.ui.lastHovered&&this.dehover(this._data.ui.hovered),this._$container_ul.find("a.oj-selected").addClass("oj-tree-inactive")}.bind(this)),this._emitEvent({},"init",!0),this._loadNodes(),this._data.menu.usermenu&&this._applyMenu(),e={_handler:this._keyHandler,_selector:this._$container_ul,_this:this},h.push(e),$(e._selector).keydown(p),this._enableKeys()},_initCore:function(){this._data.core.locked=!1,this._$container.addClass("oj-tree oj-tree-"+this._getIndex()),this._$container.css("outline","none"),this._$container.css("MozUserSelect","none"),this._$container.css("WebkitTouchCallout","none"),this._$container.css("WebkitUserSelect","none"),this._$container.css("-ms-user-select","none"),this._$container.css("WebkitTapHighlightColor","rgba(0,0,0,0)")},_initUI:function(){this._data.ui.selected=$(),this._data.ui.lastSelected=!1,this._data.ui.hovered=null;var e=this.options.selection;e&&"array"===$.type(e)&&e.length>0&&(this._data.ui.toSelect=e,this.options.selection=[]),this._isTouch&&this._$container.delegate(".oj-tree-list a","touchend.ojtree",$.proxy(function(e){this._data.ui.touchEvent=!0,this._handleNodeTapClick(e),$(e.currentTarget).hasClass(s)||this.dehover()},this)),this._$container.delegate(".oj-tree-list a","click.ojtree",function(e){this._data.ui.touchEvent=!1,this._handleNodeTapClick(e)}.bind(this)).delegate(".oj-tree-list a","mouseenter.ojtree",function(e){$(e.currentTarget).hasClass(s)||this.hover(e.target)}.bind(this)).delegate(".oj-tree-list a","mouseleave.ojtree",function(e){$(e.currentTarget).hasClass(s)||this.dehover(e.target)}.bind(this)).delegate(".oj-tree-list .oj-tree-disclosure-icon","mouseenter.ojtree",function(e){$(e.currentTarget).hasClass(s)||this._disclosureHover(e.target,!0)}.bind(this)).delegate(".oj-tree-list .oj-tree-disclosure-icon","mouseleave.ojtree",function(e){$(e.currentTarget).hasClass(s)||this._disclosureHover(e.target,!1)}.bind(this)).bind("_treereopen",function(){this._reselect()}.bind(this)).bind("_treeget_rollback",function(){this.dehover(),this._saveSelected()}.bind(this)).bind("ojcollapse",function(e,t){var i=this._getNode(t.item),n=i&&i.length?i.children("ul").find("a.oj-selected"):$(),o=this;!1!==this.options.selectedParentCollapse&&n.length&&n.each(function(){"selectParent"===o.options.selectedParentCollapse?(o.deselect(this),o.select(i)):"deselect"===o.options.selectedParentCollapse&&o.deselect(this)})}.bind(this)).bind("ojremove",function(e,t){var i=this.options.selectPrevOnDelete,n=this._getNode(t.item),o=n&&n.length?n.find("a.oj-selected"):[],s=this;o.each(function(){if(s.deselect(this),s._data.ui.lastHovered){var e=s._getNode(this);e&&s._data.ui.lastHovered.attr("id")===e.attr("id")&&(s._data.ui.lastHovered=null)}}),i&&o.length&&t.prev&&t.prev.each(function(){if(this.parentNode)return s.select(this),!1})}.bind(this)).bind("ojmove",function(e,t){var i=t.data,n=i.cy;if(n&&i.oc&&(i.oc.find("a.oj-selected").removeClass(fo._OJ_SELECTED),i.oc.removeAttr("aria-selected")),i.ot!==i.rt&&!n){var o=i.ot._data.ui;o.lastHovered&&(i.o.attr("id")===o.lastHovered.attr("id")&&(o.lastHovered=null),o.lastSelected&&i.o.attr("id")===o.lastSelected.attr("id")&&(o.lastSelected=null))}})},_initDataSource:function(){this._initTreeData(),this._initJsonData(),this._initHtmlData()},_initTreeData:function(){1===this._data.ds.type&&(this._tds=this.options.data||null,this._load_node=this._load_node_DS,this._isLoaded=this._isLoaded_DS,this._refresh=this._refresh_DS)},_initJsonData:function(){3===this._data.ds.type&&(this._data.ds.progressiveUnload&&this._$container.bind("_treeafter_close",function(e,t){t.item.children("ul").remove()}),this._load_node=this._load_node_J,this._isLoaded=this._isLoaded_J,this._refresh=this._refresh_json)},_initHtmlData:function(){4===this._data.ds.type&&(this._processExistingMarkup(),this._load_node=this._load_node_H,this._isLoaded=this._isLoaded_H,this._refresh=this._refresh_ui)},_processExistingMarkup:function(){this._data.html.useExistingMarkup&&(this._data.html.markup_ul||(this._data.html.markup_ul=this._$container.find(" > ul"),this._data.html.markup=this._data.html.markup_ul.find(" > li"),this._data.html.cloneMarkup=this._data.html.markup.clone(!0),this._data.html.cloneMarkup.find("li").addBack().contents().filter(function(){return 3===this.nodeType}).remove(),this._transformElemIds(this._data.html.markup_ul),this._data.html.markup_div=$("<div id='oj-tree-existing-markup-"+this._getIndex()+"' style='display:none'>").append(this._data.html.markup_ul),this._$container.after(this._data.html.markup_div)))},_transformElemIds:function(e){var t=$(e).find("li"),i=this._getIndex();t.each(function(e,t){t.setAttribute("id",i+"_"+t.getAttribute("id"))})},_unTransformElemIds:function(e){$(e).find("li").each(function(e,t){var i=t.getAttribute("id"),n=i.indexOf("_");i=i.substr(n+1),t.setAttribute("id",i)})},_initThemes:function(){!1===this._data.themes._themes&&(this._data.themes._themes="themes/"),this._$container.bind("_treeinit",$.proxy(function(){var e=this.options;this._data.themes.dots=e.dots,this._data.themes.icons=e.icons,this.setTheme(this._data.themes.theme,this._data.themes.url)},this)).bind("ojloaded",$.proxy(function(){this._data.themes.dots?this._showDots():this._hideDots(),this._data.themes.icons?this._showIcons():this._hideIcons()},this))},_initTypes:function(){var e=this.options.types;e&&this._$container.bind("_treeinit",$.proxy(function(){var t=$.extend(!0,{},e.types),i=e.attr||this._data.types.defaults.attr,n="",o=this;$.each(t,function(e,t){$.each(t,function(e){/^(maxDepth|maxChildren|icon|validChildren)$/.test(e)||o._data.types.attachTo.push(e)});var s=typeof t.icon;if("undefined"===s){if("boolean"!==(s=typeof t.image)||t.image){if(!t.image&&!t.position)return!0}else t.image="ojt$none";t.icon={},t.image&&(t.icon.image=t.image,delete t.image),void 0!==t.position&&(t.icon.position=t.position,delete t.position)}(t.icon.image||t.icon.position)&&("default"===e?(o._data.types.defType=!0,n+=".oj-tree-"+o._getIndex()+" .oj-tree-list li.oj-tree-type a > .oj-tree-node-icon { ",n+=o._addTypeCss(t,n),n+="} ",n+=".oj-tree-"+o._getIndex()+" .oj-tree-list li["+i+'="oj-tree-deftype"].oj-tree-type > a ins.oj-tree-node-icon { '):t.icon.image&&(n+=".oj-tree-"+o._getIndex()+" .oj-tree-list li["+i+'="'+e+'"].oj-tree-type > a > ins.oj-tree-node-icon { '),n+=o._addTypeCss(t,n),n+="} ")}),""!==n&&_({str:n,title:"oj-tree-types"})},this)).bind("ojbefore",function(e,t){var i=t.func,n=t.item,o=!!this._data.types.defaults.useData&&this._getNode(n),s=!(!o||-1===o||!o.length)&&o.data("oj-tree");if(s&&s.types&&!1===s[i])return e.stopImmediatePropagation(),!1;if(-1!==$.inArray(i,this._data.types.attachTo)){if(!t.item||!t.item.tagName&&!t.item.jquery)return;if(!this._canTypedNodeMove(n,i))return e.stopImmediatePropagation(),!1}}.bind(this))},_addTypeCss:function(e){var t="";return"ojt$none"!==e.icon.image?t+=" background-image:url("+e.icon.image+"); ":t+=" background-image:none; ",e.icon.position?t+=" background-position:"+e.icon.position+"; ":t+=" background-position:0 0; ",t},_getDndContext:function(){return this._TreeDndContext||(this._TreeDndContext=new n.TreeDndContext(this)),this._TreeDndContext},_initKeys:function(){},_initMenu:function(e){var t;if(e||this.options.contextMenu||(t=this._$container.attr("contextmenu"))&&(this.options.contextMenu="#"+t),t=e||this.options.contextMenu){var i=$(t);if(i){i.css("display","none");var n=this._data.menu;n.$container=i,n.usermenu=!0}this._data.menu.usermenu&&e&&this._applyMenu()}},_handleContextMenuSelect:function(e,t){if(!t.inst&&this._data.menu.treeDivId===this._elemId){var i=t?t.item.attr("id"):void 0;"ojtreecopy"===i?this._crrm_copy(this._data.menu.node):"ojtreecut"===i?this._crrm_cut(this._data.menu.node):"ojtreepaste"===i||"ojtreepastebefore"===i||"ojtreepasteafter"===i?this._crrm_paste(this._data.menu.node,i):"ojtreeremove"===i?this._isSelected(this._data.menu.node)?this._crrm_remove():this._crrm_remove(this._data.menu.node):"ojtreerename"===i?this._crrm_rename(this._data.menu.node):"ojtreecreate"===i&&this._crrm_create(this._data.menu.node)}},_NotifyContextMenuGesture:function(e,t,i){var n="keyboard"===i;if("contextmenu"===t.type||n||"touch"===i)if(this._data.menu.node=n?this._data.ui.hovered||this._data.menu.activeNode:$(t.target),this._data.menu.activeNode=null,this._data.menu.node){if(!n){var o=$(t.originalEvent.target);if(o.is("LI")||o.hasClass("oj-tree")||o.is("UL"))return}this._data.menu.treeDivId=this._data.menu.node.closest("div").attr("id");var s={launcher:this._$container_ul};if(n){var r=this._data.menu.node.find(".oj-tree-title")[0];s.position={of:r}}if(this._data.menu.usermenu&&(this._data.menu.$elemPaste||this._data.menu.$elemPasteBefore||this._data.menu.$elemPasteAfter)){for(var a=!this._data.crrm.ct_nodes&&!this._data.crrm.cp_nodes,l=[this._data.menu.$elemPaste,this._data.menu.$elemPasteBefore,this._data.menu.$elemPasteAfter],u=!1,d=0;d<l.length;d++){var h=l[d];h&&!!h.hasClass(fo._OJ_DISABLED)!==a&&(a?h.addClass(fo._OJ_DISABLED):h.removeClass(fo._OJ_DISABLED),u=!0)}u&&this._data.menu.$container.ojMenu("refresh")}this._OpenContextMenu(t,i,s)}else t.preventDefault()},_initCoreOpts:function(){var e=this.options.selectionMode;"none"===(e=null==e?"single":e)?e=0:"single"===e?e=1:"multiple"===e&&(e=-1),this._data.core.selectMode=e,this._data.themes.icons=this.options.icons,this._initExpandedOpts(),this._data.core.toLoad=this.options.initLoaded},_initUIOpts:function(){},_initDSOpts:function(e){var t=this.options.data;if(this._data.ds.type=0,this._data.html.useExistingMarkup=!1,this._data.html.cloneMarkup=!1,this._loadFailureIds={},t){var i=$.type(t);if("string"===i)this._isHtml(t)?this._data.ds.type=4:(this._data.ds.type=3,this._initJsonOpts());else if("array"===i)this._data.ds.type=3;else if("object"===i){try{t instanceof n.JsonTreeDataSource&&(this._data.ds.type=1)}catch(e){this._data.ds.type=-1}if(1!==this._data.ds.type)try{t instanceof n.CollectionTreeDataSource&&(this._data.ds.type=2)}catch(e){this._data.ds.type=-1}if(1===this._data.ds.type||2===this._data.ds.type)this._initTreeDSOpts();else if(t.data||t.ajax){var o=t.dataType;o?"json"===o?(this._data.ds.type=3,this._initJsonOpts()):"html"===o&&(this._data.ds.type=4,this._initHtmlOpts()):(t.dataType="json",this._data.ds.type=3,this._initJsonOpts())}}}e&&0===this._data.ds.type&&this._$container.find("ul").length>0&&(this._data.ds.type=4,this._data.html.useExistingMarkup=!0)},_initTreeDSOpts:function(){},_initJsonOpts:function(){},_initHtmlOpts:function(){},_initMenuOpts:function(){},_initTypeOpts:function(){var e=this.options.types;"object"==typeof e&&this._applyDefaults(e,{attr:this._data.types.defaults.attr})},_initExpandedOpts:function(){this._data.core.toExpand=this._varCopy(this.options,"initExpanded"),null==this._data.core.toExpand&&(this._data.core.toExpand=[])},_initData:function(){var e=this._data;e.core={initLoaded:[],selectMode:1,load_open:!1,li_height:0,toExpand:!1,toLoad:!1,prepMoveBlk:{},suppressSelectEvent:!1,strings:{}},e.ui={selected:$(),lastSelected:!1,hovered:null,lastHovered:null,disclosureClick:!1,toSelect:null,opacity:1,spacebar:!1,focused:!1,animDurDiv:null,touchEvent:!1},e.ui.defaults={selectMultipleModifier:"ctrl",selectRangeModifier:"shift",disableSelectingChildren:!1},e.crrm={},e.crrm.cp_nodes=!1,e.crrm.ct_nodes=!1,e.crrm.defaults={inputWidthLimit:200,move:{alwaysCopy:!1,openOnMove:!0,defaultPosition:"last",checkMove:function(){return!0}}},e.crrm.prepMoveBlk={},e.ds={},e.ds.progressiveRender=!1,e.ds.progressiveUnload=!1,e.ds.correctState=!0,e.ds.type=0,e.json={},e.json.defaults={data:!1,ajax:!1},e.html={},e.html.defaults={data:!1,ajax:!1},e.html.useExistingMarkup=!1,e.html.markup_ul=!1,e.html.markup_div=!1,e.html.markup=!1,e.html.cloneMarkup=!1,e.themes={},e.themes.icons=!0,e.themes.dots=!1,e.themes.theme="default",e.themes.url=!1,e.themes.themes_loaded=[],e.themes._themes=!1,e.types={},e.types.attachTo=[],e.types.defType=!1,e.types.defaults={maxChildren:-1,maxDepth:-1,validChildren:"all",useData:!1,attr:"type",types:{default:{maxChildren:-1,maxDepth:-1,validChildren:"all"}}},e.menu={},e.menu.usermenu=!1,e.menu.$container=!1,e.menu.$elemPaste=!1,e.menu.$elemPasteAfter=!1,e.menu.$elemPasteBefore=!1,e.menu.node=!1,e.menu.activeNode=!1,e.keys={},e.keys.enabled=!0,e.keys.bound=[]},_fix_scroll:function(t){var i=this._$container[0];if(i.scrollHeight>i.offsetHeight){if(!(t=this._getNode(t))||-1===t||!t.length||!t.is(":visible"))return;var n=t.offset().top-this._$container.offset().top;n<0&&(i.scrollTop+=n-1),n+this._data.core.li_height+(i.scrollWidth>i.offsetWidth?e:0)>i.offsetHeight&&(i.scrollTop+=n-i.offsetHeight+this._data.core.li_height+1+(i.scrollWidth>i.offsetWidth?e:0))}},_setFocus:function(){},_unsetFocus:function(){},_newIndex:function(){return m+=1},_getIndex:function(){return this._index},_getOptions:function(){return $.extend(!0,{},this.options)},_getContainer:function(){return this._$container},_getContainerList:function(){return this._$container_ul},_keyHandler:{up:function(){var e=this._data.ui.hovered||this._data.ui.lastSelected||-1;return this.hover(this._getPrev(e)),!1},"ctrl+up":function(){var e=this._data.ui.hovered||this._data.ui.lastSelected||-1;return this.hover(this._getPrev(e)),!1},"shift+up":function(){var e=this._data.ui.hovered||this._data.ui.lastSelected||-1;return this.select(this._getPrev(e),-1!==this._data.ui.selectMode),!1},down:function(){var e=this._data.ui.hovered||this._data.ui.lastSelected||-1;return this.hover(this._getNext(e)),!1},"ctrl+down":function(){var e=this._data.ui.hovered||this._data.ui.lastSelected||-1;return this.hover(this._getNext(e)),!1},"shift+down":function(){var e=this._data.ui.hovered||this._data.ui.lastSelected||-1;return this.select(this._getNext(e),-1!==this._data.ui.selectMode),!1},left:function(){var e=this._data.ui.hovered||this._data.ui.lastSelected;return e&&(e.hasClass(fo._OJ_EXPANDED)?this.collapse(e):this.hover(this._getPrev(e))),!1},"ctrl+left":function(){var e=this._data.ui.hovered||this._data.ui.lastSelected;return e&&(e.hasClass(fo._OJ_EXPANDED)?this.collapse(e):this.hover(this._getPrev(e))),!1},"shift+left":function(){var e=this._data.ui.hovered||this._data.ui.lastSelected;return e&&(e.hasClass(fo._OJ_EXPANDED)?this.collapse(e):this.hover(this._getPrev(e))),!1},right:function(){var e=this._data.ui.hovered||this._data.ui.lastSelected;return e&&e.length&&(e.hasClass(fo._OJ_COLLAPSED)?this.expand(e):this.hover(this._getNext(e))),!1},"ctrl+right":function(){var e=this._data.ui.hovered||this._data.ui.lastSelected;return e&&e.length&&(e.hasClass(fo._OJ_COLLAPSED)?this.expand(e):this.hover(this._getNext(e))),!1},"shift+right":function(){var e=this._data.ui.hovered||this._data.ui.lastSelected;return e&&e.length&&(e.hasClass(fo._OJ_COLLAPSED)?this.expand(e):this.hover(this._getNext(e))),!1},space:function(){return this._data.ui.hovered&&(this._data.ui.spacebar=!0,this._data.ui.hovered.children("a:eq(0)").click(),this._data.ui.spacebar=!1),!1},home:function(){return this.hover(this._$container_ul.find("li:first")),!1},end:function(){var e=this._$container_ul.find("li.oj-tree-last:visible");return e&&e.length&&this.hover(e[e.length-1]),!1},"*":function(){return this._expandAll(-1,!1),!1},"ctrl+space":function(){if(this._data.ui.hovered){var e=$.Event("click");e.ctrlKey=!0,this._data.ui.hovered.children("a:eq(0)").trigger(e)}return!1},"shift+space":function(){if(this._data.ui.hovered){var e=$.Event("click");e.shiftKey=!0,this._data.ui.hovered.children("a:eq(0)").trigger(e)}return!1},"shift+home":function(e){var t,i=this._data.ui.hovered;if(i){var n=!0,o=this,s=this._$container_ul.find("li:visible");this._data.core.suppressSelectEvent=!0,t=this.options.selection.slice(0),i=i[0],$.each(s,function(e,t){return t===i&&(n=!1),o._select(t,!0),n}),this._data.core.suppressSelectEvent=!1,this._fireOptionChangeEvent("selection",t,null,e)}return!1},"shift+pgdn":function(e){var t,i=this._data.ui.lastSelected||this._data.ui.hovered;if(i){var n=!1,o=this,s=this._$container_ul.find("li:visible");this._data.core.suppressSelectEvent=!0,t=this.options.selection.slice(0),i=i[0],$.each(s,function(e,t){return n||(n=t===i),n&&!o._isSelected(t)&&o._select(t,!0),!0}),this._data.core.suppressSelectEvent=!1,this._fireOptionChangeEvent("selection",t,null,e)}return!1},f2:function(){return this._crrm_rename(this._data.ui.hovered||this._data.ui.lastSelected),!1},del:function(){return this.remove(this._data.ui.hovered||this._getNode(null)),!1}},_applyMenu:function(){if(this._data.menu.usermenu){var e=this._data.menu.$container,t=this;e.on("ojselect",this._handleContextMenuSelect.bind(this));var i=e.find("[data-oj-command]"),n=!1;i.each(function(){var e;0===$(this).children("a").length&&(e=$(this).attr("data-oj-command").split("oj-tree-"),$(this).replaceWith(t._buildContextMenuItem(e[e.length-1])),$(this).hasClass("oj-menu-divider")&&$(this).removeClass("oj-menu-divider").addClass("oj-menu-item"),n=!0)}),n&&e.ojMenu("refresh"),this._data.menu.$elemPaste=e.find("#ojtreepaste"),this._data.menu.$elemPasteAfter=e.find("#ojtreepasteafter"),this._data.menu.$elemPasteBefore=e.find("#ojtreepastebefore")}},_clearMenu:function(){var e=this._data.menu;e.usermenu&&(e.usermenu=!1,e.$container.off("ojselect"),e.$container=null)},_buildContextMenuItem:function(e){return $(this._buildContextMenuListItem(e))},_buildContextMenuListItem:function(e){return"<li id="+l[e]+">"+this._buildContextMenuLabel(e)+"</li>"},_buildContextMenuLabel:function(e){var t=u[e];return'<a href="#">'+this._getString(t)+"</a>"},_isLoadFailureId:function(e){return e="#"===(e=-1===e?"-1":e).charAt(0)?e.substr(1):e,!!this._loadFailureIds[e]},_noteLoadFailureId:function(e,t){e=-1===e?"-1":e,t?this._loadFailureIds[e]=!0:this._loadFailureIds[e]&&delete this._loadFailureIds[e]},_crrm_cut:function(e){if(e=e.closest("li"),this._isSelected(e)&&(e=null),!(e=this._getNode(e,!0))||!e.length)return!1;this._data.crrm.cp_nodes=!1,this._data.crrm.ct_nodes=e,this._emitEvent({obj:e},"cut")},_crrm_copy:function(e){if(e=e.closest("li"),this._isSelected(e)&&(e=null),!(e=this._getNode(e,!0))||!e.length)return!1;this._data.crrm.ct_nodes=!1,this._data.crrm.cp_nodes=e,this._emitEvent({obj:e},"copy")},_crrm_paste:function(e,t){if(!(e=this._getNode(e))||!e.length)return!1;var i=this._data.crrm.ct_nodes?this._data.crrm.ct_nodes:this._data.crrm.cp_nodes;if(!this._data.crrm.ct_nodes&&!this._data.crrm.cp_nodes)return!1;var n="inside";"ojtreepasteafter"===t?n="after":"ojtreepastebefore"===t&&(n="before"),this._data.crrm.ct_nodes&&(this._crrm_move_node(this._data.crrm.ct_nodes,e,n,!1,!1,!0),this._data.crrm.ct_nodes=!1),this._data.crrm.cp_nodes&&this._crrm_move_node(this._data.crrm.cp_nodes,e,n,!0,!1,!0),this._emitEvent({obj:i,p:n,r:e},"paste")},_crrm_move_node:function(e,t,i,n,o,s){var r=this._data.crrm.defaults.move;if(!o)return void 0===i&&(i=r.defaultPosition),"inside"!==i||r.defaultPosition.match(/^(before|after)$/)||(i=r.defaultPosition),this._moveNode(e,t,i,n,!1,s);(!0===r.alwaysCopy||"multitree"===r.alwaysCopy&&e.rt._getIndex()!==e.ot._getIndex())&&(n=!0),this._moveNode(e,t,i,n,!0,s)},_crrm_remove:function(e){e=this._getNode(e,!0),this.__rollback(),this.remove(e)},_crrm_rename:function(e){e=this._getNode(e),this.__rollback(),this._crrm_showInput(e,function(e,t,i){})},_crrm_showInput:function(e,t){e=this._getNode(e);var i=this._isRtl,n=this._data.crrm.defaults.inputWidthLimit,o=e.children("ins").width(),s=e.find("> a:visible > ins").width()*e.find("> a:visible > ins").length,r=this.getText(e),a=$("<div />",{css:{position:"absolute",top:"-200px",left:i?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),l=e.css("position","relative").append($("<input />",{value:r,class:"oj-tree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:i?"auto":o+s+4+"px",right:i?o+s+4+"px":"auto",top:"0px",height:this._data.core.li_height-2+"px",lineHeight:this._data.core.li_height-2+"px",width:"150px"},blur:$.proxy(function(){var i=e.children(".oj-tree-rename-input"),n=i.val();""===(n=this._escapeHtml(n))&&(n=r),a.remove(),i.remove(),this._set_text(e,r),n!==r&&this._renameNode(e,n),t.call(this,e,n,r),e.css("position","")},this),keyup:function(e){var t=e.keyCode||e.which;27===t?(this.value=r,this.blur()):13===t?this.blur():l.width(Math.min(a.text("pW"+this.value).width(),n))},keypress:function(e){if(13===(e.keyCode||e.which))return!1}})).children(".oj-tree-rename-input");this._set_text(e,""),a.css({fontFamily:l.css("fontFamily")||"",fontSize:l.css("fontSize")||"",fontWeight:l.css("fontWeight")||"",fontStyle:l.css("fontStyle")||"",fontStretch:l.css("fontStretch")||"",fontVariant:l.css("fontVariant")||"",letterSpacing:l.css("letterSpacing")||"",wordSpacing:l.css("wordSpacing")||""}),l.width(Math.min(a.text("pW"+l[0].value).width(),n))[0].select()},_crrm_create:function(e,t,i,n,o){var s=this;return(e=this._getNode(e))||(e=-1),this.__rollback(),this._createNode(e,t,i,function(e){var t=this._getParent(e),i=$(e).index();n&&n.call(this,e),t.length&&t.hasClass(fo._OJ_COLLAPSED)&&this.expand(t,!1,!0),o?s._emitEvent({obj:e,name:this.getText(e),parent:t,position:i}):this._crrm_showInput(e,function(e,n,o){s._emitEvent({obj:e,name:n,parent:t,position:i})})})},_isHtml:function(e){var t=!1;return e&&e.length>=3&&(t="<"===(e=e.trim()).charAt(0)),t},_applyEmptyText:function(){var e=this.options.emptyText;if("string"!=typeof e&&(e=this._getString("labelNoData")),e&&e.length>0){var t=this._$container_ul,i=$("<li class='oj-tree-empty'></li>");i[0].textContent=e,t.empty().append(i)}},_processSubId:function(e){var t,i,n;if(e&&(t=e.subId),!t)return null;var o=t.split("[");if(3===o.length&&(o[0]=o[0].trim(),"oj-tree-node"===o[0])){o[1]=o[1].trim();var s=o[1].charAt(0),r=o[1].indexOf(s,1);if(r>=0){var a=o[1].substring(1,r).trim();if(o[2]=o[2].trim(),s=o[2].charAt(0),(r=o[2].indexOf(s,1))>=0){var l=o[2].substring(1,r).trim();try{i=this._getNode(a)}catch(e){i=null}if(l&&i&&-1!==i)switch(l){case"icon":this._data.themes.icons&&(n=i.find(" > a > ins:eq(0)"));break;case"link":n=i.find(" > a:eq(0)");break;case"disclosure":this._isLeaf(i)||(n=i.find(" > ins:eq(0)"));break;case"title":n=i.find(" > a > span")}}}}return n&&n.length?n[0]:null},_getSubIdFromNodeElem:function(e){var t=e?this._getNode(e):null,i=null;if(t&&-1!==t&&t.length&&t.hasClass("oj-tree-node")&&e.tagName&&e.parentNode){var n=e.tagName,s=e.parentNode.tagName;"SPAN"===n?i="title":"A"===n?i="link":"INS"===n&&(e=$(e),"LI"===s&&e.hasClass("oj-tree-disclosure-icon")?i="disclosure":"A"===s&&e.hasClass(o)&&(i="icon"))}return i?{subId:"oj-tree-node['#"+t.attr("id")+"']['"+i+"']"}:null},_hideDots:function(){this._data.themes.dots=!1,this._$container.children("ul").addClass("oj-tree-no-dots")},_showDots:function(){this._data.themes.dots=!0,this._$container.children("ul").removeClass("oj-tree-no-dots")},_isOptExpandAll:function(){var e=this.options.initExpanded;return e&&"all"===e||$.isArray(e)&&e.length&&"all"===e[0]},_getString:function(e){var t=this._data.core.strings,i=t[e];return i||(i=this.getTranslatedString(e),i=this._escapeHtml(i),t[e]=i),i},_escapeHtml:function(e){var t=document.createElement("div");return $(t).text(e),t.textContent},_getNodeHeight:function(){return this._data.core.li_height},_getAnimDuration:function(){var e=0;if(window.getComputedStyle){var t=this._data.ui.animDurDiv;t||(t=$("<div id='ojtree-comp-animduration'><span class='oj-tree-transition'>dummy</span></div>"),this._data.ui.animDurDiv=t,$("body").append(t));var i=t[0].childNodes[0],n=window.getComputedStyle(i);if(n=n.transitionDuration?n.transitionDuration:n["-webkit-transition-duration"]?n["-webkit-transition-duration"]:0,t.detach(),"string"==typeof n&&n.length>1)if("s"===n.charAt(n.length-1).toLowerCase())n=n.substring(0,n.length-1),n=parseFloat(n),isNaN(n)||(e=1e3*n);else if(n.length>2){var o=n.substring(n.length-2).toLowerCase();"ms"===o&&(o=n.substring(0,n.length-2),n=parseFloat(n),isNaN(n)||(e=n))}}return e},_varCopy:function(e,t){var i={};return i[t]=e[t],$.extend(!0,{},i)[t]},_trace:function(e,t){}})}(),n.TreeDataProvider=function(){};n.TreeDataProvider;var vo=function(){function e(e,t){this.dataProvider=e,this.options=t,this._listDataProviderView=new yn(e,t)}return e.prototype.getChildDataProvider=function(t,i){var n=this.dataProvider.getChildDataProvider(t,i);return n?new e(n,this.options):null},e.prototype.containsKeys=function(e){return this._listDataProviderView.containsKeys(e)},e.prototype.fetchByKeys=function(e){return this._listDataProviderView.fetchByKeys(e)},e.prototype.fetchByOffset=function(e){return this._listDataProviderView.fetchByOffset(e)},e.prototype.fetchFirst=function(e){return this._listDataProviderView.fetchFirst(e)},e.prototype.getCapability=function(e){return this._listDataProviderView.getCapability(e)},e.prototype.getTotalSize=function(){return this._listDataProviderView.getTotalSize()},e.prototype.isEmpty=function(){return this._listDataProviderView.isEmpty()},e.prototype.addEventListener=function(e,t){this._listDataProviderView.addEventListener(e,t)},e.prototype.removeEventListener=function(e,t){this._listDataProviderView.removeEventListener(e,t)},e.prototype.dispatchEvent=function(e){return this._listDataProviderView.dispatchEvent(e)},e}();n.TreeDataProviderView=vo,n.TreeDataProviderView=vo;var yo={properties:{animationDuration:{type:"number"},animationOnDataChange:{type:"string",enumValues:["auto","none"],value:"none"},animationOnDisplay:{type:"string",enumValues:["auto","none"],value:"none"},animationUpdateColor:{type:"string",value:""},as:{type:"string",value:""},colorLabel:{type:"string",value:""},data:{type:"oj.DataProvider"},displayLevels:{type:"number",value:1.7976931348623157e308},drilling:{type:"string",enumValues:["off","on"],value:"off"},groupGaps:{type:"string",enumValues:["all","none","outer"],value:"outer"},hiddenCategories:{type:"Array<string>",writeback:!0,value:[]},highlightMatch:{type:"string",enumValues:["all","any"],value:"all"},highlightedCategories:{type:"Array<string>",writeback:!0,value:[]},hoverBehavior:{type:"string",enumValues:["dim","none"],value:"none"},hoverBehaviorDelay:{type:"number",value:200},isolatedNode:{type:"any",writeback:!0,value:'""'},layout:{type:"string",enumValues:["sliceAndDiceHorizontal","sliceAndDiceVertical","squarified"],value:"squarified"},nodeContent:{type:"object",properties:{renderer:{type:"function",properties:{bounds:{type:"object",properties:{x:{type:"number"},y:{type:"number"},width:{type:"number"},height:{type:"number"}}},id:{type:"any"},data:{type:"object"},itemData:{type:"object"},componentElement:{type:"Element"}}}}},nodeDefaults:{type:"object",properties:{groupLabelDisplay:{type:"string",enumValues:["header","node","off"],value:"header"},header:{type:"object",properties:{backgroundColor:{type:"string"},borderColor:{type:"string"},hoverBackgroundColor:{type:"string"},hoverInnerColor:{type:"string"},hoverOuterColor:{type:"string"},isolate:{type:"string",enumValues:["off","on"],value:"on"},labelHalign:{type:"string",enumValues:["center","end","start"],value:"start"},labelStyle:{type:"object"},selectedBackgroundColor:{type:"string"},selectedInnerColor:{type:"string"},selectedOuterColor:{type:"string"},useNodeColor:{type:"string",enumValues:["off","on"],value:"off"}}},hoverColor:{type:"string"},labelDisplay:{type:"string",enumValues:["node","off"],value:"node"},labelHalign:{type:"string",enumValues:["center","end","start"],value:"center"},labelMinLength:{type:"number",value:1},labelStyle:{type:"object"},labelValign:{type:"string",enumValues:["bottom","center","top"],value:"center"},selectedInnerColor:{type:"string"},selectedOuterColor:{type:"string"}}},nodeSeparators:{type:"string",enumValues:["bevels","gaps"],value:"gaps"},nodes:{type:"Array<Object>|Promise"},rootNode:{type:"any",value:'""'},selection:{type:"Array<any>",writeback:!0,value:[]},selectionMode:{type:"string",enumValues:["multiple","none","single"],value:"multiple"},sizeLabel:{type:"string",value:""},sorting:{type:"string",enumValues:["off","on"],value:"off"},tooltip:{type:"object",properties:{renderer:{type:"function",properties:{parentElement:{type:"Element"},id:{type:"any"},label:{type:"string"},value:{type:"number"},color:{type:"string"},data:{type:"object"},itemData:{type:"object"},componentElement:{type:"Element"}}}}},touchResponse:{type:"string",enumValues:["auto","touchStart"],value:"auto"},trackResize:{type:"string",enumValues:["off","on"],value:"on"},translations:{type:"object",value:{},properties:{componentName:{type:"string"},labelAndValue:{type:"string"},labelClearSelection:{type:"string"},labelColor:{type:"string"},labelCountWithTotal:{type:"string"},labelDataVisualization:{type:"string"},labelInvalidData:{type:"string"},labelNoData:{type:"string"},labelSize:{type:"string"},stateCollapsed:{type:"string"},stateDrillable:{type:"string"},stateExpanded:{type:"string"},stateHidden:{type:"string"},stateIsolated:{type:"string"},stateMaximized:{type:"string"},stateMinimized:{type:"string"},stateSelected:{type:"string"},stateUnselected:{type:"string"},stateVisible:{type:"string"},tooltipIsolate:{type:"string"},tooltipRestore:{type:"string"}}}},methods:{getNode:{},getContextByNode:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojBeforeDrill:{},ojDrill:{}},extension:{}},bo={properties:{categories:{type:"Array<string>",value:[]},color:{type:"string",value:"#000000"},drilling:{type:"string",enumValues:["inherit","off","on"],value:"inherit"},groupLabelDisplay:{type:"string",enumValues:["header","node","off"],value:"header"},header:{type:"object",properties:{isolate:{type:"string",enumValues:["off","on"],value:"on"},labelHalign:{type:"string",enumValues:["center","end","start"],value:"start"},labelStyle:{type:"object",value:{}},useNodeColor:{type:"string",enumValues:["off","on"],value:"off"}}},label:{type:"string",value:""},labelDisplay:{type:"string",enumValues:["node","off"],value:"node"},labelHalign:{type:"string",enumValues:["center","end","start"],value:"center"},labelStyle:{type:"object",value:{}},labelValign:{type:"string",enumValues:["bottom","center","top"],value:"center"},pattern:{type:"string",enumValues:["largeChecker","largeCrosshatch","largeDiagonalLeft","largeDiagonalRight","largeDiamond","largeTriangle","none","smallChecker","smallCrosshatch","smallDiagonalLeft","smallDiagonalRight","smallDiamond","smallTriangle"],value:"none"},selectable:{type:"string",enumValues:["auto","off"],value:"auto"},shortDesc:{type:"string",value:""},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}},value:{type:"number"}},extension:{}};n.__registerWidget("oj.ojTreemap",$.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{animationDuration:void 0,animationOnDataChange:"none",animationOnDisplay:"none",animationUpdateColor:"",as:"",data:null,hiddenCategories:[],highlightedCategories:[],highlightMatch:"all",hoverBehavior:"none",hoverBehaviorDelay:200,nodeContent:{renderer:null},tooltip:{renderer:null},groupGaps:"outer",displayLevels:Number.MAX_VALUE,layout:"squarified",nodes:null,nodeDefaults:{labelStyle:void 0,labelDisplay:"node",groupLabelDisplay:"header",labelHalign:"center",labelMinLength:1,labelValign:"center",hoverColor:void 0,selectedInnerColor:void 0,selectedOuterColor:void 0,header:{backgroundColor:void 0,borderColor:void 0,hoverBackgroundColor:void 0,hoverInnerColor:void 0,hoverOuterColor:void 0,selectedBackgroundColor:void 0,selectedInnerColor:void 0,selectedOuterColor:void 0,labelHalign:"start",labelStyle:void 0,isolate:"on",useNodeColor:"off"}},nodeSeparators:"gaps",selectionMode:"multiple",sorting:"off",colorLabel:"",sizeLabel:"",drilling:"off",rootNode:"",selection:[],isolatedNode:"",touchResponse:"auto",beforeDrill:null,drill:null},_CreateDvtComponent:function(e,t,i){return dvt.Treemap.newInstance(e,t,i)},_GetSimpleDataProviderConfigs:function(){return{data:{templateName:"nodeTemplate",templateElementName:"oj-treemap-node",resultPath:"nodes",expandedKeySet:new pi.ExpandAllKeySet,maxFetchDepth:this.options.displayLevels-1}}},_OptionChangeHandler:function(e){Object.prototype.hasOwnProperty.call(e,"displayLevels")&&this._ClearDataProviderState("data"),this._super(e)},_ConvertLocatorToSubId:function(e){var t=e.subId;return"oj-treemap-node"===t?t="node"+this._GetStringFromIndexPath(e.indexPath):"oj-treemap-tooltip"===t&&(t="tooltip"),t},_ConvertSubIdToLocator:function(e){var t={};return 0===e.indexOf("node")?(t.subId="oj-treemap-node",t.indexPath=this._GetIndexPath(e)):"tooltip"===e&&(t.subId="oj-treemap-tooltip"),t},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-treemap"),e},_GetChildStyleClasses:function(){var e=this._super();return e["oj-dvtbase oj-treemap"]={path:"animationDuration",property:"ANIM_DUR"},e["oj-treemap-attribute-type-text"]={path:"styleDefaults/_attributeTypeTextStyle",property:"TEXT"},e["oj-treemap-attribute-value-text"]={path:"styleDefaults/_attributeValueTextStyle",property:"TEXT"},e["oj-treemap-drill-text "]={path:"styleDefaults/_drillTextStyle",property:"TEXT"},e["oj-treemap-current-drill-text "]={path:"styleDefaults/_currentTextStyle",property:"TEXT"},e["oj-treemap-node"]={path:"nodeDefaults/labelStyle",property:"TEXT"},e["oj-treemap-node oj-hover"]={path:"nodeDefaults/hoverColor",property:"border-top-color"},e["oj-treemap-node oj-selected"]=[{path:"nodeDefaults/selectedOuterColor",property:"border-top-color"},{path:"nodeDefaults/selectedInnerColor",property:"border-bottom-color"}],e["oj-treemap-node-header"]=[{path:"nodeDefaults/header/backgroundColor",property:"background-color"},{path:"nodeDefaults/header/borderColor",property:"border-top-color"},{path:"nodeDefaults/header/labelStyle",property:"TEXT"}],e["oj-treemap-node-header oj-hover"]=[{path:"nodeDefaults/header/hoverBackgroundColor",property:"background-color"},{path:"nodeDefaults/header/hoverOuterColor",property:"border-top-color"},{path:"nodeDefaults/header/hoverInnerColor",property:"border-bottom-color"},{path:"nodeDefaults/header/_hoverLabelStyle",property:"TEXT"}],e["oj-treemap-node-header oj-selected"]=[{path:"nodeDefaults/header/selectedBackgroundColor",property:"background-color"},{path:"nodeDefaults/header/selectedOuterColor",property:"border-top-color"},{path:"nodeDefaults/header/selectedInnerColor",property:"border-bottom-color"},{path:"nodeDefaults/header/_selectedLabelStyle",property:"TEXT"}],e},_GetEventTypes:function(){return["optionChange","drill","beforeDrill"]},_GetTranslationMap:function(){var e=this.options.translations,t=this._super();return t["DvtTreemapBundle.COLOR"]=e.labelColor,t["DvtTreemapBundle.ISOLATE"]=e.tooltipIsolate,t["DvtTreemapBundle.RESTORE"]=e.tooltipRestore,t["DvtTreemapBundle.SIZE"]=e.labelSize,t["DvtUtilBundle.TREEMAP"]=e.componentName,t},_HandleEvent:function(e){var t=e.type;if("isolate"===t){var i=this.options._isolatedNodes;i||(this.options._isolatedNodes=[],i=this.options._isolatedNodes);var n=e.id;n?(i.push(n),this._UserOptionChange("isolatedNode",n)):(n=i.pop(),this._UserOptionChange("isolatedNode",i.length>0?i[i.length]:null))}else if("drill"===t){var o,s=e.data;s&&s._itemData&&(o=s._itemData,delete(s=$.extend({},e.data))._itemData);var r={id:e.id,data:s,itemData:o};this._IsCustomElement()||(r.component=e.component),e.id&&this._trigger("beforeDrill",null,r)&&(this._UserOptionChange("rootNode",e.id),this._Render(),this._trigger("drill",null,r))}else this._super(e)},_GetComponentRendererOptions:function(){return["tooltip/renderer","nodeContent/renderer"]},_ProcessOptions:function(){this._super();var e=this.options.nodeContent;e&&e._renderer&&(e.renderer=this._GetTemplateRenderer(e._renderer,"nodeContent"))},_LoadResources:function(){null==this.options._resources&&(this.options._resources={});var e=this.options._resources;e.isolate="oj-treemap-isolate-icon",e.isolateOver="oj-treemap-isolate-icon oj-hover",e.isolateDown="oj-treemap-isolate-icon oj-active",e.restore="oj-treemap-restore-icon",e.restoreOver="oj-treemap-restore-icon oj-hover",e.restoreDown="oj-treemap-restore-icon oj-active"},getNode:function(e){return this._component.getAutomation().getNode(e)},getContextByNode:function(e){var t=this.getSubIdByNode(e);return t&&"oj-treemap-tooltip"!==t.subId?t:null},_GetComponentDeferredDataPaths:function(){return{root:["nodes","data"]}}}),yo.extension._WIDGET_NAME="ojTreemap",n.CustomElementBridge.register("oj-treemap",{metadata:yo}),bo.extension._CONSTRUCTOR=function(){},n.CustomElementBridge.register("oj-treemap-node",{metadata:bo});var Co={properties:{currentItem:{type:"any",writeback:!0,readOnly:!0},data:{type:"oj.TreeDataSource"},dnd:{type:"object",properties:{drag:{type:"object",properties:{items:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragStart:{type:"function"},drag:{type:"function"},dragEnd:{type:"function"}}}}},drop:{type:"object",properties:{items:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragOver:{type:"function"},dragLeave:{type:"function"},drop:{type:"function"}}}}}}},expanded:{type:"KeySet",writeback:!0,value:"new ExpandedKeySet()"},item:{type:"object",properties:{focusable:{type:"function",properties:{componentElement:{type:"Element"},data:{type:"D"},depth:{type:"number"},index:{type:"number"},key:{type:"K"},leaf:{type:"boolean"},parentElement:{type:"Element"},parentKey:{type:"K"}}},renderer:{type:"function",properties:{componentElement:{type:"Element"},data:{type:"D"},depth:{type:"number"},index:{type:"number"},key:{type:"K"},leaf:{type:"boolean"},parentElement:{type:"Element"},parentKey:{type:"K"}}},selectable:{type:"function",properties:{componentElement:{type:"Element"},data:{type:"D"},depth:{type:"number"},index:{type:"number"},key:{type:"K"},leaf:{type:"boolean"},parentElement:{type:"Element"},parentKey:{type:"K"}}}}},selection:{type:"Array<any>",writeback:!0,value:[]},selectionMode:{type:"string",enumValues:["multiple","none","single"],value:"none"},translations:{type:"object",value:{}}},methods:{getContextByNode:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateEnd:{},ojAnimateStart:{},ojBeforeCollapse:{},ojBeforeCurrentItem:{},ojBeforeExpand:{},ojCollapse:{},ojExpand:{}},extension:{}};n.__registerWidget("oj.ojTreeView",$.oj.baseComponent,{version:"1.0.0",defaultElement:"<div>",widgetEventPrefix:"oj",options:{currentItem:null,data:null,dnd:{drag:null,drop:null},expanded:new n.ExpandedKeySet,item:{focusable:null,renderer:null,selectable:null},selection:[],selectionMode:"none",animateEnd:null,animateStart:null,beforeCollapse:null,beforeCurrentItem:null,beforeExpand:null,collapse:null,expand:null},_ComponentCreate:function(){this._super()},_AfterCreate:function(){this._super(),this._initRender(),this._render()},_initRender:function(){var e=this;this._on(this.element,{click:function(t){e._handleClick(t)},mouseover:function(t){e._handleMouseOver(t)},mouseout:function(t){e._handleMouseOut(t)},mousedown:function(t){e._handleMouseDown(t)},mouseup:function(t){e._handleMouseUp(t)},keydown:function(t){e._handleKeyDown(t)},dragstart:function(t){e._handleDragStart(t)},drag:function(t){e._handleDragSourceEvent(t,"drag")},dragend:function(t){e._handleDragSourceEvent(t,"dragEnd")},dragenter:function(t){e._handleDropTargetEvent(t,"dragEnter")},dragover:function(t){e._handleDropTargetEvent(t,"dragOver")},dragleave:function(t){e._handleDropTargetEvent(t,"dragLeave")},drop:function(t){e._handleDropTargetEvent(t,"drop")}});var t=$(document.createElement("span")).addClass("oj-treeview-drop-marker-icon oj-component-icon");this._dropMarker=$(document.createElement("div")).addClass("oj-treeview-drop-marker").append(t).appendTo(this.element),this._dropMarkerRect=this._dropMarker[0].getBoundingClientRect(),this._dropMarker.hide(),this._dropLine=$(document.createElement("div")).addClass("oj-treeview-drop-line").appendTo(this.element),this._dropLineRect=this._dropLine[0].getBoundingClientRect(),this._dropLine.hide()},_render:function(){var e=this;this.element.removeClass("oj-complete"),this._keyList=new Set,this.options.data?(this.element.find("ul").remove(),this._fetchChildren(null,function(t){e._renderItems(t,e.element),e._resetFocus(),e.element.addClass("oj-complete")})):(this.element.find("ul").addClass("oj-treeview-list").attr("role","group"),this.element.find("li").each(function(){var t=$(this);e._decorateItem(t)}),this._resetFocus(),this.element.addClass("oj-complete")),this._decorateTree(),this._lastSelectedItem=null},_fetchChildren:function(t,i){var n=this.options.data,o={start:0,count:n.getChildCount(t)},s=this._addBusyState("fetching data");n.fetchChildren(t,o,{success:function(e){i(e),s()},error:function(t){e.error(t),s()}})},_renderItems:function(e,t){for(var i=$(document.createElement("ul")).addClass("oj-treeview-list").attr("role","group").appendTo(t),n=0;n<e.getCount();n++)this._renderItem(i,e,n)},_renderItem:function(e,t,i){i+=t.getStart();var n=t.getData(i),o=t.getMetadata(i),s=o.key;if(this._keyList.has(s))throw new Error("JET TreeView nodes should not have duplicated keys: "+s);this._keyList.add(s);var r=this.options.item.renderer;r=this._WrapCustomElementRenderer(r);var a=$(document.createElement("li")).attr("id",s).appendTo(e);if(r){var l={};l.parentElement=a,l.index=i,l.data=n,l.datasource=this.options.data,l.parentKey=this._getKey(this._getParentItem(a)),l.component=w.__GetWidgetConstructor(this.element),this._FixRendererContext&&(l=this._FixRendererContext(l));for(var u=Object.keys(o),d=0;d<u.length;d++){var h=u[d];l[h]=o[h]}var c=r.call(this,l);if(null!=c)if(null===c.parentNode||c.parentNode instanceof DocumentFragment)a.append(c);else if(null!=c.parentNode);else if(c.toString){var p=document.createElement("span");p.appendChild(document.createTextNode(c.toString())),a.append(p)}a=e.children().eq(i),l.parentElement=a,null==a.attr("id")&&a.attr("id",s)}a.data("data",n).data("metadata",o),this._decorateItem(a)},_decorateTree:function(){var e=this,t=this._getRoot();this._focusable({element:t,applyHighlight:!0,setupHandlers:function(t,i){e._focusInHandler=t,e._focusOutHandler=i}}),t.attr("tabIndex",0).on("focus",function(){e._focusInHandler(e._getItemContent(e._currentItem))}).on("blur",function(){e._focusOutHandler(e._getItemContent(e._currentItem))}).attr("role","tree").attr("aria-labelledby",this.element.attr("id"));var i=this.options.selectionMode;"none"!==i?t.attr("aria-multiselectable","multiple"===i?"true":"false"):t.removeAttr("aria-multiselectable")},_decorateItem:function(e){e.addClass("oj-treeview-item").attr("role","treeitem");var t=this._getItemContent(e);0===t.length&&((t=$(document.createElement("div")).addClass("oj-treeview-item-content").append(e.contents()).appendTo(e)).children("ul").appendTo(e),t.find(".oj-treeview-item-icon").addClass("oj-treeview-icon")),this._select(e);var i=this._getDragOptions();t.attr("draggable",Object.keys(i).length>0?"true":"false");var n=e.children(".oj-treeview-spacer");0===n.length&&(n=$(document.createElement("ins")).addClass("oj-treeview-icon oj-treeview-spacer").prependTo(e)),this._isLeaf(e)?e.addClass("oj-treeview-leaf"):(this._isInitExpanded(e)?this._expand(e,!1):this._collapse(e,!1),n.addClass("oj-treeview-disclosure-icon oj-component-icon oj-clickable-icon-nocontext oj-default"))},_getItems:function(){return this.element.find(".oj-treeview-item")},_getKey:function(e){var t=e.data("metadata");return t?t.key:e.attr("id")},_getItemByKey:function(e){var t=this.element.find("li").filter(function(){var t=$(this).data("metadata");return!!t&&n.Object.compareValues(t.key,e)});return t.length>0?t:this.element.find("li#"+$.escapeSelector(e))},_getItemContent:function(e){return e.children(".oj-treeview-item-content")},_getChildItems:function(e){return e.children(".oj-treeview-list").children(".oj-treeview-item")},_getParentItem:function(e){return e.parent(".oj-treeview-list").parent(".oj-treeview-item")},_getSubtree:function(e){return e.children(".oj-treeview-list")},_getRoot:function(){return this.element.children(".oj-treeview-list")},_isLeaf:function(e){var t=e.data("metadata");return!(t?!t.leaf:this._getSubtree(e).length>0)},_isInitExpanded:function(e){var t=this._getKey(e),i=this.options.expanded;return!(!i||!i.has)&&i.has(t)},_isExpanded:function(e){return e.hasClass("oj-expanded")},_expand:function(e,t,i,n){var o=this;if(!this._isExpanded(e)&&!this._isLeaf(e)){if(t&&!this._trigger("beforeExpand",i,this._getEventPayload(e))&&!1!==n)return;this._lastSelectedItem=null,0!==this._getSubtree(e).length?o._expandAfterFetch(e,t,i):o._fetchChildren(o._getKey(e),function(n){o._renderItems(n,e),o._expandAfterFetch(e,t,i)})}},_expandAfterFetch:function(e,t,i){var n=this;e.removeClass("oj-collapsed").addClass("oj-expanded").attr("aria-expanded","true");var o=this._getSubtree(e);if(o.css("max-height","none"),t){var s=this._addBusyState("animating expand");e.addClass("oj-treeview-animated"),this._startAnimation(o,"expand").then(function(){e.removeClass("oj-treeview-animated"),n._trigger("expand",i,n._getEventPayload(e));var t=n.options.expanded.add([n._getKey(e)]);n._userOptionChange("expanded",t,i),s()})}},_collapse:function(e,t,i,n){var o=this;if(!e.hasClass("oj-collapsed")&&!this._isLeaf(e)){if(t&&!this._trigger("beforeCollapse",i,this._getEventPayload(e))&&!1!==n)return;e.removeClass("oj-expanded").addClass("oj-collapsed").attr("aria-expanded","false"),this._lastSelectedItem=null;var s=this._getSubtree(e);if(t){var r=this._addBusyState("animating collapse");e.addClass("oj-treeview-animated"),this._startAnimation(s,"collapse").then(function(){s.css("max-height",0),e.removeClass("oj-treeview-animated"),o._trigger("collapse",i,o._getEventPayload(e));var t=o.options.expanded.delete([o._getKey(e)]);o._userOptionChange("expanded",t,i),r()})}else s.css("max-height",0)}},_startAnimation:function(e,t){this.defaultOptions||(this.defaultOptions=_.parseJSONFromFontFamily("oj-treeview-option-defaults"));var i=(this.defaultOptions.animation||{})[t];return vi.startAnimation(e[0],t,i,this)},_getEventPayload:function(e){return{key:this._getKey(e),item:e[0]}},_isActionable:function(e,t){var i=this.options.item[t+"able"];return!1!==i&&("function"!=typeof i||i(this.getContextByNode(e[0])))},_isSelected:function(e){var t=this.options.selectionMode,i=this.options.selection;if("none"===t)return!1;"single"===t&&i.length>1&&(i=[i[0]]);var n=this._getKey(e);return-1!==i.indexOf(n)},_select:function(e,t){var i=this.options.selectionMode;if("none"!==i&&this._isActionable(e,"select")){var o=this._isSelected(e);if(t){var s=n.DomUtils.isTouchSupported(),r=n.DomUtils.isMetaKeyPressed(t),a="multiple"===i,l=40===t.keyCode||38===t.keyCode,u=this._getKey(e),d=[];if(a&&t.shiftKey&&!l){r?d=this.options.selection.slice(0):this._clearSelection();for(var h=this._lastSelectedItem,c=h&&h.offset().top<e.offset().top?this._getNextActionableItem.bind(this):this._getPreviousActionableItem.bind(this);h&&h[0]!==e[0];){var p=this._getKey(h);-1===d.indexOf(p)&&(d.push(p),this._setSelected(h)),h=c(h,"select")}o=!0,d.push(u)}else a&&(r||s||l)?(o=!o,d=this.options.selection.slice(0),o?d.push(u):d.splice(d.indexOf(u),1)):(this._clearSelection(),(s||32===t.keyCode)&&o?(o=!1,d=[]):(o=!0,d=[u]));this._userOptionChange("selection",d,t),this._lastSelectedItem=e}o?this._setSelected(e):this._setUnselected(e)}},_setSelected:function(e){this._getItemContent(e).addClass("oj-selected"),e.attr("aria-selected","true")},_setUnselected:function(e){this._getItemContent(e).removeClass("oj-selected"),e.attr("aria-selected","false")},_clearSelection:function(){this._setUnselected(this._getItems())},_focus:function(e,t){if(this._isActionable(e,"focus")){if(t){var i=this._getEventPayload(e);if(this._currentItem&&(i.previousKey=this._getKey(this._currentItem),i.previousItem=this._currentItem[0]),!this._trigger("beforeCurrentItem",t,i))return;this._userOptionChange("currentItem",this._getKey(e),t)}this._focusOutHandler(this._getItemContent(this._currentItem)),this._focusInHandler(this._getItemContent(e)),this._setCurrentItem(e)}},_resetFocus:function(){if(this.options.currentItem){var e=this._getItemByKey(this.options.currentItem);if(e.length>0)return void this._setCurrentItem(e)}var t=this._getItems().first();this._setCurrentItem(t),this._userOptionChange("currentItem",this._getKey(this._currentItem),null)},_setCurrentItem:function(e){this._currentItem=e,this._getRoot().attr("aria-activedescendant",this._getKey(e))},_addBusyState:function(e){var t=c.getContext(this.element[0]).getBusyContext(),i=this.element.attr("id");return t.addBusyState({description:"The component identified by '"+i+"', "+e})},_userOptionChange:function(e,t,i){this.option(e,t,{_context:{originalEvent:i,writeback:!0,internalSet:!0}})},_getDragOptions:function(){return((this.options.dnd||{}).drag||{}).items||{}},_getDropOptions:function(){return((this.options.dnd||{}).drop||{}).items||{}},_getClosestItem:function(e){return e.closest(".oj-treeview-item")},_getClosestItemContent:function(e){return e.closest(".oj-treeview-item-content")},_getClosestDisclosureIcon:function(e){return e.closest(".oj-treeview-disclosure-icon")},_handleClick:function(e){var t,i=this._getClosestDisclosureIcon($(e.target));if(i.length>0)return t=i.closest(".oj-treeview-item"),void(this._isExpanded(t)?this._collapse(t,!0,e):this._expand(t,!0,e));var n=this._getClosestItemContent($(e.target));if(n.length>0)return t=n.parent(),this._select(t,e),void this._focus(t,e);"none"!==this.options.selectionMode&&(this._clearSelection(),this._lastSelectedItem=null,this._userOptionChange("selection",[],e))},_handleMouseOver:function(e){if(!n.DomUtils.isTouchSupported()){var t=this._getClosestDisclosureIcon($(e.target));0===t.length&&(t=this._getClosestItemContent($(e.target))),t.removeClass("oj-default"),t.addClass("oj-hover")}},_handleMouseOut:function(e){if(!n.DomUtils.isTouchSupported()){var t=this._getClosestDisclosureIcon($(e.target));t.removeClass("oj-selected"),0===t.length&&(t=this._getClosestItemContent($(e.target))),t.addClass("oj-default"),t.removeClass("oj-hover")}},_handleMouseDown:function(e){this._getClosestDisclosureIcon($(e.target)).addClass("oj-selected")},_handleMouseUp:function(e){this._getClosestDisclosureIcon($(e.target)).removeClass("oj-selected")},_handleKeyDown:function(e){var t,i=e.keyCode,n=this._currentItem;if(38===i||40===i)(t=40===i?this._getNextActionableItem(n,"focus"):this._getPreviousActionableItem(n,"focus"))&&(e.preventDefault(),this._isSelected(n)&&e.shiftKey&&this._select(this._isSelected(t)?n:t,e),this._focus(t,e));else if(37===i||39===i){var o="rtl"===this._GetReadingDirection(),s=!o&&39===i||o&&37===i;!s||this._isLeaf(n)||this._isExpanded(n)?s||this._isLeaf(n)||!this._isExpanded(n)?(t=s?this._getNextActionableItem(n,"focus"):this._getPreviousActionableItem(n,"focus"))&&(e.preventDefault(),this._focus(t,e)):(e.preventDefault(),this._collapse(n,!0,e)):(e.preventDefault(),this._expand(n,!0,e))}else 13!==i&&32!==i||(e.preventDefault(),this._select(n,e))},_getNextItem:function(e){if(!this._isLeaf(e)&&this._isExpanded(e)){var t=this._getChildItems(e).first();if(t.length>0)return t}for(var i=e;i.length>0;){var n=i.next(".oj-treeview-item");if(n.length>0)return n;i=this._getParentItem(i)}return null},_getNextActionableItem:function(e,t){for(;null!=e;)if(null!=(e=this._getNextItem(e))&&this._isActionable(e,t))return e;return null},_getPreviousItem:function(e){for(var t=e.prev(".oj-treeview-item");t.length>0;){if(this._isLeaf(t)||!this._isExpanded(t))return t;var i=this._getChildItems(t).last();if(!(i.length>0))return t;t=i}var n=this._getParentItem(e);return n.length>0?n:null},_getPreviousActionableItem:function(e,t){for(;null!=e;)if(null!=(e=this._getPreviousItem(e))&&this._isActionable(e,t))return e;return null},_handleDragStart:function(e){var t=this,i="rtl"===this._GetReadingDirection(),o=this._getClosestItem($(e.target));if(0!==o.length){var s,r=$();if(this._isSelected(o)){var a=this.options.selection;for(s=0;s<a.length;s++)r=r.add(this._getItemByKey(a[s]))}else this._select(o,e),r=r.add(o);var l=this._getDragOptions(),u=e.originalEvent.dataTransfer,d=$(document.createElement("ul")).addClass("oj-treeview-drag-image oj-treeview-list");n.AgentUtils.getAgentInfo().browser===n.AgentUtils.BROWSER.SAFARI&&d.css("position","absolute");var h=[],c=1/0,p=1/0;r.each(function(){var e=$(this);h.push(e.data("data"));var n=e.offset();i&&(n.left=t._getItemContent(e).offset().left);var o=e.clone().css({top:n.top,left:n.left});t._getSubtree(o).remove(),n.top<c&&(c=n.top),n.left<p&&(p=n.left),d.append(o)}),d.children().each(function(){$(this).css({top:parseFloat($(this).css("top"))-c,left:parseFloat($(this).css("left"))-p})});var _=l.dataTypes,m="string"==typeof _?[_]:_||[];for(s=0;s<m.length;s++)u.setData(m[s],JSON.stringify(h));$("body").append(d),u.setDragImage(d[0],e.pageX-p,e.pageY-c),setTimeout(function(){d.remove()},0);var g=l.dragStart;g&&g(e.originalEvent,{items:h})}},_handleDragSourceEvent:function(e,t){var i=this._getDragOptions()[t];i&&i(e.originalEvent)},_handleDropTargetEvent:function(e,t){var i=this._getDropOptions(),n=i.dataTypes,o="string"==typeof n?[n]:n||[],s=i[t],r=$(e.target).closest(".oj-treeview-item"),a=r.children(".oj-treeview-spacer")[0],l=a.getBoundingClientRect(),u=a.offsetTop,d=a.offsetLeft,h=u+l.height/2,c="inside",p=e.pageY-l.top;p<.25*l.height?c="before":p>.75*l.height&&(c=this._isExpanded(r)?"first":"after"),s&&s(e.originalEvent,{item:r[0],position:c});for(var _=0;_<o.length;_++){var m=e.originalEvent.dataTransfer.types;if(m&&m.indexOf(o[_])>=0){e.preventDefault();break}}if("dragEnter"!==t&&"dragOver"!==t||!e.originalEvent.defaultPrevented)this._dropMarker.hide(),this._dropLine.hide();else{var g="rtl"===this._GetReadingDirection(),f=h,v=g?d-this._dropLineRect.width:d+l.width,y=h-this._dropMarkerRect.height/2,b=d+l.width/2-this._dropMarkerRect.width/2;if("before"===c)y-=l.height/2,f-=l.height/2;else if(("after"===c||"first"===c)&&(y+=l.height/2,f+=l.height/2,"first"===c)){var C=(g?-1:1)*l.width;b+=C,v+=C}this._dropMarker.css("top",y+"px").css("left",b+"px").show(),"inside"!==c?this._dropLine.css("top",f+"px").css("left",v+"px").show():this._dropLine.hide()}},_NotifyContextMenuGesture:function(e,t,i){if("keyboard"===i){var n=this._currentItem?this._getItemContent(this._currentItem):this.element,o={launcher:n,initialFocus:"menu",position:{my:"start top",at:"start bottom",of:n}};this._OpenContextMenu(t,i,o)}else this._superApply(arguments)},refresh:function(){this._super(),this._render()},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;var t,i=e.key,n=e.subId,o=this._getItemByKey(i);return"oj-treeview-disclosure"===n?t=o.children(".oj-treeview-disclosure-icon")[0]:"oj-treeview-item"===n&&(t=o.children(".oj-treeview-item-content")[0]),t||null},getSubIdByNode:function(e){if(!$.contains(this.element[0],e))return null;var t,i=this._getClosestDisclosureIcon($(e)),n=this._getClosestItem($(e));if(i.length>0)t="oj-treeview-disclosure";else{if(!(n.length>0))return null;t="oj-treeview-item"}return{subId:t,key:this._getKey(n)}},getContextByNode:function(e){if(!$.contains(this.element[0],e))return null;var t=this._getClosestItem($(e));if(t.length<1)return null;var i={subId:"oj-treeview-item"};i.index=t.parent().children(".oj-treeview-item").index(t),i.parentKey=this._getKey(this._getParentItem(t)),i.component=w.__GetWidgetConstructor(this.element),this._FixRendererContext&&(i=this._FixRendererContext(i));var n=t.data("metadata");if(n){i.data=t.data("data"),i.datasource=this.options.data;for(var o=Object.keys(n),s=0;s<o.length;s++){var r=o[s];i[r]=n[r]}}else i.key=this._getKey(t),i.leaf=this._isLeaf(t),i.depth=t.parents(".oj-treeview-list").length;return i},_setOption:function(e,t,i){var n=this;this._superApply(arguments),"expanded"===e?this._getItems().each(function(){var e=$(this);n._isInitExpanded(e)?n._expand(e,!0):n._collapse(e,!0)}):"selection"===e?this._getItems().each(function(){var e=$(this);n._select(e)}):"currentItem"===e?this._resetFocus():this.refresh()},_destroy:function(){this._super()}}),Co.extension._WIDGET_NAME="ojTreeView",n.CustomElementBridge.register("oj-tree-view",{metadata:Co});var So={properties:{valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0}},methods:{setProperty:{},getProperty:{},setProperties:{},showMessages:{},focusOn:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};function Eo(t){var i,o=this,s=t.element,r=[];function a(){r=[],function e(t){var i;var n=[];var o=t.childNodes;var s=o.length;for(i=0;i<s;i++){var a=o[i],l=_(a);l?r.push(a):n.push(a)}s=n.length;for(i=0;i<s;i++)e(n[i])}(s),t.props.valid=p();for(var e=r.length,i=0;i<e;i++)l(r[i])}function l(e){e.addEventListener("validChanged",d.bind(this)),e.addEventListener("disabledChanged",h.bind(this)),e.addEventListener("readonlyChanged",h.bind(this))}function u(e){e.removeEventListener("validChanged",d),e.removeEventListener("disabledChanged",h),e.removeEventListener("readonlyChanged",h)}function d(){t.props.valid=p()}function h(e){var i=e.target,n=i.valid,o=!(i.readonly||i.disabled);"valid"===n||(t.props.valid=o&&"invalidShown"===n?"invalidShown":p())}function p(){for(var e="valid",t=r.length,i=0;i<t&&"invalidShown"!==e;i++){var n=r[i];if(v(n)){var o=n.valid,s=n.disabled,a=n.readonly;s||a||("invalidShown"===o?e="invalidShown":"invalidHidden"===o?e="invalidHidden":"pending"===o&&"valid"===e&&(e="pending"))}}return e}function _(e){if(1===e.nodeType&&-1!==e.tagName.indexOf("-")&&"valid"in e&&(v(e)&&void 0!==e.valid))return!0;return!1}function m(e,t){var i=t.length;if(_(e))return!0;for(var n=0;n<i;n++)if(_(t[n]))return!0;return!1}function g(e){var t=r.length;if(1!==e.nodeType)return!1;for(var i=0;i<t;i++){if(r[i].contains(e))return!0}return!1}function f(e){for(var t=r.length,i=0;i<e.length;i++){var n=e[i];if(1===n.nodeType){if(-1!==r.indexOf(n))return!0;for(var o=0;o<t;o++)if(n.contains(r[o]))return!0}}return!1}function v(e){var t,i=n.BaseCustomElementBridge.getInstance(e)._WIDGET_ELEM;return void 0!==i&&(t=w.__GetWidgetConstructor(i)),!(void 0!==i&&!t)}o._rootElementMutationObserver=new MutationObserver(function(e){if(document.body.contains(s)){for(var t=e.length,i=!1,n=0;n<t&&!i;n++){var o=e[n],r=o.target,l=o.removedNodes,d=o.addedNodes;if(!(i=f(l))&&d.length>0)!g(r)&&m(r,d)&&(i=!0)}i&&(!function(e){for(var t=e.length,i=0;i<t;i++)for(var n=e[i],o=n.removedNodes.length,s=0;s<o;s++){var r=n.removedNodes[s];1===r.nodeType&&u(r)}}(e),a())}else this.disconnect()}),o.createDOM=function(){for(s.classList.add("oj-validation-group"),(i=document.createElement("div")).setAttribute("data-oj-context","");s.firstChild;)i.appendChild(s.firstChild);s.appendChild(i)},o.updateDOM=function(){c.getContext(i).getBusyContext().whenReady().then(function(){for(var e=r.length,t=0;t<e;t++)u(r[t]);a(),o._rootElementMutationObserver.observe(s,{childList:!0,subtree:!0})})},o.handlePropertyChanged=function(e,t){return!0},o.showMessages=function(){for(var e=0;e<r.length;e++){var t=r[e];t.disabled||t.readonly||"showMessages"in t&&t.showMessages()}},o.focusOn=function(t){var i=null,n=null;"@firstInvalidShown"===t?(n=function(){var e=[];if("invalidShown"!==s.valid)return null;for(var t=r.length,i=0;i<t;i++){var n=r[i];n.disabled||n.readonly||"invalidShown"===n.valid&&e.push(n)}if(0===e.length)return null;return e.sort(function(e,t){return e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1}),e[0]}())&&("focusOn"in n?n.focusOn("@firstInvalidShown"):n.focus()):void 0===t?(i=function(){for(var e=null,t=r.length,i=0;i<t;i++)if(!(e=r[i]).readonly&&!e.disabled)return e;return null}())&&("focusOn"in i?i.focusOn():i.focus()):e.info("focusOn's parameter value is not '@firstInvalidShown' or empty, so it's a no-op.")}}So.extension._CONSTRUCTOR=Eo,Object.freeze(So),n.CustomElementBridge.register("oj-validation-group",{metadata:So})}();