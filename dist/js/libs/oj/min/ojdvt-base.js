/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojvalidation","ojs/internal-deps/dvt/DvtToolkit","ojdnd","promise"],function(a,g,c,b,d){function e(a,b){this.uza=b;this.sBa=a;this.ira="/"}a.gk=function(a){this.Init(a)};o_("AttributeGroupHandler",a.gk,a);a.b.ta(a.gk,a.b,"oj.AttributeGroupHandler");a.gk.prototype.Init=function(a){this.bC={};this.rL=0;this.UU={};for(var b in a)this.cX(b,a[b])};a.gk.prototype.An=function(){return[]};a.b.g("AttributeGroupHandler.prototype.getValueRamp",{An:a.gk.prototype.An});
a.gk.prototype.ie=function(a){if(this.UU[a])return this.UU[a];this.bC[a]||(this.Mg||(this.Mg=this.An().slice()),this.bC[a]=this.Mg[this.rL],this.rL++,this.rL==this.Mg.length&&(this.rL=0));return this.bC[a]};a.b.g("AttributeGroupHandler.prototype.getValue",{ie:a.gk.prototype.ie});a.gk.prototype.Oea=function(){var a=[],b;for(b in this.bC)a.push({category:b,value:this.bC[b]});return a};a.b.g("AttributeGroupHandler.prototype.getCategoryAssignments",{Oea:a.gk.prototype.Oea});a.gk.prototype.cX=function(a,
b){this.UU[a]=b};a.b.g("AttributeGroupHandler.prototype.addMatchRule",{cX:a.gk.prototype.cX});a.tx=function(a){this.Init(a)};o_("ShapeAttributeGroupHandler",a.tx,a);a.b.ta(a.tx,a.gk,"oj.ShapeAttributeGroupHandler");a.tx.cC="square circle diamond plus triangleDown triangleUp human".split(" ");a.tx.prototype.An=function(){return a.tx.cC};a.b.g("ShapeAttributeGroupHandler.prototype.getValueRamp",{An:a.tx.prototype.An});e.prototype.iBa=function(a,b,c,d){for(var e={};a&&-1<b.indexOf(c);){var f=b.substring(0,
b.indexOf(c));d&&void 0===a[f]&&(a[f]={});a=a[f];b=b.substring(b.indexOf(c)+1,b.length)}a&&(e.object=a,e.parameter=b);return e};e.prototype.mba=function(a){void 0===this.uD&&(a=this.iBa(this.sBa,this.uza,this.ira,a),this.uD=a.object,this.gV=a.parameter)};e.prototype.ie=function(){this.mba(!1);return void 0===this.uD?void 0:this.uD[this.gV]};e.prototype.zia=function(a,b){this.mba(!0);if(b||!this.uD[this.gV])this.uD[this.gV]=a};a.pg=function(b){this.cC=[];if(g(document.body).hasClass("oj-hicontrast"))this.cC=
a.pg.b1.slice();else{if(!a.pg.nC){a.pg.nC=[];var c=g(document.createElement("div"));c.attr("style","display:none;");c.attr("id","attrGps");g(document.body).append(c);for(var d=0;d<a.pg.t2.length;d++){var e=g(document.createElement("div"));e.addClass(a.pg.t2[d]);c.append(e);(e=e.css("color"))&&a.pg.nC.push(e)}c.remove()}this.cC=0<a.pg.nC.length?a.pg.nC.slice():a.pg.b1.slice()}this.Init(b)};o_("ColorAttributeGroupHandler",a.pg,a);a.b.ta(a.pg,a.gk,"oj.ColorAttributeGroupHandler");a.pg.b1="#267db3 #68c182 #fad55c #ed6647 #8561c8 #6ddbdb #ffb54d #e371b2 #47bdef #a2bf39 #a75dba #f7f37b".split(" ");
a.pg.t2="oj-dvt-category1 oj-dvt-category2 oj-dvt-category3 oj-dvt-category4 oj-dvt-category5 oj-dvt-category6 oj-dvt-category7 oj-dvt-category8 oj-dvt-category9 oj-dvt-category10 oj-dvt-category11 oj-dvt-category12".split(" ");a.pg.nC=null;a.pg.prototype.An=function(){return this.cC};a.b.g("ColorAttributeGroupHandler.prototype.getValueRamp",{An:a.pg.prototype.An});var f={CSS_TEXT_PROPERTIES:function(a){var b={};a&&(a.hasClass("oj-gauge-metric-label")&&a.hasClass(a.parentNode,"oj-ledgauge")?(b["font-size"]=
!0,b.color=!0):a.hasClass(a,"oj-chart-slice-label")?b.color=!0:a.hasClass("oj-treemap-node-header")&&(b["font-weight"]=!0));return f.$oa(a,b)},CSS_BACKGROUND_PROPERTIES:function(a){return f.Soa(a)},CSS_URL:function(a){return f.tza(a)},t1:"rgb(254, 0, 254)",Ela:"Times",Fla:"1px",v1:"1",u1:"normal",xla:4,XK:{},wFa:function(a,b){return a.css(b)},tza:function(a){return(a=a.css("background-image"))&&-1!==a.indexOf("url(")?a.slice(a.indexOf("url(")+4,a.length-1).replace(/"/g,""):a},Soa:function(a){var b=
{};a.css("border-top-color")&&(b["border-color"]=a.css("border-top-color"));a.css("border-width")&&a.css("border-style")&&"none"!=a.css("border-style")&&(b["border-width"]=a.css("border-width"));a.css("background-color")&&(b["background-color"]=a.css("background-color"));return b},$oa:function(a,b){var c={},d=a.css("font-family");d&&d!==f.Ela&&(c["font-family"]=d.replace(/"/g,"'"));d=a.css("font-size");!d||-1<d.indexOf("px")&&parseFloat(d)<f.xla||b["font-size"]||(c["font-size"]=d);(d=a.css("font-weight"))&&
d!==f.v1&&!b["font-weight"]&&(c["font-weight"]=d);(d=a.css("color"))&&d!==f.t1&&!b.color&&(c.color=d);(d=a.css("font-style"))&&d!==f.u1&&(c["font-style"]=d);return c},KIa:function(a,b,c,d){var e=g(document.createElement("div"));e.attr("style","display:none;");a.append(e);a="";for(var t=0;t<c.length;t++)a=a+c[t]+" ";e.attr("class",a);g(document.body).append(e);c=g(document.createElement("div"));c.css("font-size",f.Fla);c.css("color",f.t1);c.css("font-weight",f.v1);c.css("font-style",f.u1);e.append(c);
for(var s in d)a=d[s],a instanceof Array||(a=[a]),f.Qza(c,b,s,a);e.remove()},Qza:function(a,b,c,d){f.XK[c]||(f.XK[c]={});for(var r=null,t=0;t<d.length;t++){var s=d[t],n=s.property;if(n){var p=f.XK[c][n];"undefined"==typeof p&&(r||(r=g(document.createElement("div")),r.addClass(c),a.append(r)),p=f.jBa(r,n),f.XK[c][n]=p);if(null!=p){var s=new e(b,s.path),q=f[n];if(null!=q){var u=s.ie();if("CSS_URL"!==n){n="";if(null!=u){var u=f.jua(u),w;for(w in p)-1===u.indexOf(w)&&(n+=w+":"+p[w]+";");n+=u}else for(w in p)n+=
w+":"+p[w]+";";p=n}}s.zia(p,null!=q)}}}},jua:function(a){if(a instanceof Object){var b="",c;for(c in a)var d=c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),b=b+(d+":"+a[c]+";");return b}return null!=a&&"string"==typeof a?a:""},jBa:function(a,b){var c=f[b],c=c?c(a):f.wFa(a,b);return null==c||"string"==typeof c&&""==c.replace(/^\s+/g,"")?null:c}};a.Na("oj.dvtBaseComponent",g.oj.baseComponent,{_ComponentCreate:function(){this._super();this.GD=this.FV=0;this.Lo=null;for(var b=this.Cf(),c=0;c<b.length;c++)this.element.addClass(b[c]);
this.rK=g(document.createElement("div"));this.rK.attr("style","visibility:hidden;");this.element.append(this.rK);this.$f=(b=this.element[0].parentElement)&&b.yC?b.yC:new d.Context(this.element[0],null,this.rK[0]);this.$f.setReadingDirection(this.jd());this.$f.setTooltipAttachedCallback(a.Components.Ug);this.$f.setOverlayAttachedCallback(a.Components.Ug);this.$f.setTooltipStyleClass("oj-dvt-tooltip");this.$f.setDatatipStyleClass("oj-dvt-datatip");this.$f.setDefaultFontFamily(this.rK.css("font-family"));
g(document.body).hasClass("oj-hicontrast")&&d.Agent.setHighContrast(!0);this.xa=this.yg(this.$f,this.tl,this);this.$f.getStage().addChild(this.xa);!1!==d.requireJS&&(this.kCa(),this.maa());this.eo();this.options._environment="jet";this.options._widgetConstructor=a.Components.Kf(this.element)},Lh:function(){this._super();this.element.attr("tabIndex",0);"off"!=this.options.trackResize&&this.sQ();this.gaa();this.Qh()},refresh:function(){this._super();this.$f.setReadingDirection(this.jd());this.maa();
this.Qh()},getNodeBySubId:function(a){var b=this.xa&&this.xa.getAutomation?this.xa.getAutomation():null;if(b)return a=this.tk(a),b.getDomElementForSubId(a)},getSubIdByNode:function(a){var b=this.xa&&this.xa.getAutomation?this.xa.getAutomation():null;if(b)return(a=b.getSubIdForDomElement(a))?this.Mh(a):null},tk:function(){return null},Mh:function(){return null},iH:function(){f.KIa(this.element,this.options,this.Cf(),this.uk())},Cf:function(){return["oj-dvtbase"]},uk:function(){return{"oj-dvt-no-data-message":{path:"_statusMessageStyle",
property:"CSS_TEXT_PROPERTIES"}}},tj:function(){return[]},Mi:function(){var b=this.options.translations,b={"DvtUtilBundle.CLEAR_SELECTION":b.labelClearSelection,"DvtUtilBundle.COLON_SEP_LIST":b.labelAndValue,"DvtUtilBundle.INVALID_DATA":b.labelInvalidData,"DvtUtilBundle.NO_DATA":b.labelNoData,"DvtUtilBundle.DATA_VISUALIZATION":b.labelDataVisualization,"DvtUtilBundle.STATE_SELECTED":b.stateSelected,"DvtUtilBundle.STATE_UNSELECTED":b.stateUnselected,"DvtUtilBundle.STATE_MAXIMIZED":b.stateMaximized,
"DvtUtilBundle.STATE_MINIMIZED":b.stateMinimized,"DvtUtilBundle.STATE_EXPANDED":b.stateExpanded,"DvtUtilBundle.STATE_COLLAPSED":b.stateCollapsed,"DvtUtilBundle.STATE_ISOLATED":b.stateIsolated,"DvtUtilBundle.STATE_HIDDEN":b.stateHidden,"DvtUtilBundle.STATE_VISIBLE":b.stateVisible,"DvtUtilBundle.SCALING_SUFFIX_THOUSAND":b.labelScalingSuffixThousand,"DvtUtilBundle.SCALING_SUFFIX_MILLION":b.labelScalingSuffixMillion,"DvtUtilBundle.SCALING_SUFFIX_BILLION":b.labelScalingSuffixBillion,"DvtUtilBundle.SCALING_SUFFIX_TRILLION":b.labelScalingSuffixTrillion,
"DvtUtilBundle.SCALING_SUFFIX_QUADRILLION":b.labelScalingSuffixQuadrillion},c=a.Za.aF("abbreviated");b["DvtUtilBundle.MONTH_SHORT_JANUARY"]=c[0];b["DvtUtilBundle.MONTH_SHORT_FEBRUARY"]=c[1];b["DvtUtilBundle.MONTH_SHORT_MARCH"]=c[2];b["DvtUtilBundle.MONTH_SHORT_APRIL"]=c[3];b["DvtUtilBundle.MONTH_SHORT_MAY"]=c[4];b["DvtUtilBundle.MONTH_SHORT_JUNE"]=c[5];b["DvtUtilBundle.MONTH_SHORT_JULY"]=c[6];b["DvtUtilBundle.MONTH_SHORT_AUGUST"]=c[7];b["DvtUtilBundle.MONTH_SHORT_SEPTEMBER"]=c[8];b["DvtUtilBundle.MONTH_SHORT_OCTOBER"]=
c[9];b["DvtUtilBundle.MONTH_SHORT_NOVEMBER"]=c[10];b["DvtUtilBundle.MONTH_SHORT_DECEMBER"]=c[11];return b},maa:function(){var a=this.Mi();d.Bundle.addLocalizedStrings(a)},kCa:function(){var b={};b.numberConverterFactory=a.Da.Yea("number");b.dateToIsoConverter=function(b){return b instanceof Date?a.cb.dateToLocalIso(b):b};b.isoToDateConverter=function(b){return"string"==typeof b?a.cb.isoToLocalDate(b):b};this.$f.setLocaleHelpers(b)},_destroy:function(){this.$f.hideTooltips();this.$f=null;var a=this.element[0].parentElement;
a&&a.yC&&(a.yC=null);this.xa.destroy&&this.xa.destroy();this.xa=null;this.BV();this.element.children().remove();this.element.removeAttr("role").removeAttr("tabIndex").removeAttr("aria-activedescendant");for(var a=this.Cf(),b=0;b<a.length;b++)this.element.removeClass(a[b]);this._super()},_setOptions:function(a,b){this._superApply(arguments);var c=this.options.trackResize;"off"==c&&this.Nl?this.BV():"off"==c||this.Nl||this.sQ();this.gaa();if(!this.I3){var d=!1,e=this.tj(),f=["highlightedCategories",
"selection","dataCursorPosition"];g.each(a,function(a){if(0>e.indexOf(a)&&0>f.indexOf(a))return d=!0,!1});d?this.Qh():(void 0!==a.highlightedCategories&&this.xa.highlight(a.highlightedCategories),void 0!==a.selection&&this.xa.select(a.selection),void 0!==a.dataCursorPosition&&this.xa.positionDataCursor&&this.xa.positionDataCursor(a.dataCursorPosition))}},yg:function(){return null},tl:function(a){var b=a.type;"selection"===b?this.ee("selection",a.selection):"categoryHide"===b||"categoryShow"===b?this.ee("hiddenCategories",
a.hiddenCategories):"categoryHighlight"===b?this.ee("highlightedCategories",a.categories):"optionChange"===b?this.ee(a.key,a.value,a.optionMetadata):"touchHoldRelease"===b&&this.options.contextMenu?this.kh(g.Event(a.nativeEvent),"touch"):"ready"===b&&0===this.GD&&(this.pV&&this.pV(!0),this.paa=!0,this.oV=this.pV=null)},sQ:function(){this.Nl||(this.Nl=this.Gg.bind(this),a.A.Pk(this.element[0],this.Nl,250))},BV:function(){this.Nl&&(a.A.om(this.element[0],this.Nl),this.Nl=null)},Gg:function(){var a=
this.element.width(),b=this.element.height();(null==this.sL||null==this.BJ||5<=Math.abs(a-this.sL)+Math.abs(b-this.BJ))&&this.Qh(!0)},eo:function(){},Qh:function(b){this.$f.hideTooltips();this.V1();this.$f.isReadyToRender()?(this.sL=this.UG()?null:this.element.width(),this.BJ=this.UG()?null:this.element.height(),this.options._width=this.sL,this.options._height=this.BJ,this.options._locale=a.ga.Yi(),this.options.dnd&&this.element.attr("draggable",!0),this.iH(),this.FV++,b?this.Lo||this.DV(null):0===
this.hBa().length&&this.DV(this.options),this.HV=!1):this.HV=!0},Rp:function(){this._super();this.HV&&this.Qh()},Mr:function(){this._super();this.HV&&this.Qh()},uj:function(){this._super();this.$f.hideTooltips()},Nm:function(){this._super();this.$f.hideTooltips()},ee:function(a,b,c){this.I3=!0;this.option(a,b,{_context:{Ed:!0,Ot:c,pb:!0}});this.I3=!1},jh:function(a,b,c){"touch"!==c&&("keyboard"===c?this.kh(b,c,{position:{of:this.xa.getKeyboardFocus()}}):this._super(a,b,c))},AB:function(b){return(b=
a.Components.Kf(b)("instance"))?b.xa:null},Ji:function(a){if(a){var b={},c;for(c in a)this.Tna(a,c,b);Object.defineProperties(a,b)}},Tna:function(a,b,c){var d=("selected"==b?"is":"get")+b.charAt(0).toUpperCase()+b.slice(1);c[d]={value:function(){return a[b]}}},Cu:function(a){for(var b="",c=0;c<a.length;c++)b+="["+a[c]+"]";return b},Zn:function(a){for(var b=[],c=0;0<a.indexOf("[",c);){var d=a.indexOf("[",c)+1,c=a.indexOf("]",c);b.push(Number(a.substring(d,c)));c+=1}return b},wk:function(a){return Number(this.OG(a))},
OG:function(a){var b=a.indexOf("[")+1,c=a.indexOf("]");return a.substring(b,c)},vk:function(){return{}},hBa:function(){this.Lo=null;var a=this.vk(),b;for(b in a)for(var c=a[b],d=0;d<c.length;d++)if("root"===b){if(this.Yu(this.options,c[d]))break}else{var e=this.options[b];if(e)for(var f=0;f<e.length&&!this.Yu(e[f],c[d]);f++);}var g=[];this.GD=0;if(this.Lo){var n=this;for(b in a)c=a[b],c.forEach(function(a){var c;if("root"===b)(c=n.D7(n.Lo,a))&&g.push(c);else{var d=n.Lo[b];if(d)for(var e=0;e<d.length;e++)(c=
n.D7(d[e],a))&&g.push(c)}})}return g},Yu:function(a,b){if(!this.Lo){var c=(new e(a,b)).ie();c&&(c instanceof Function||c instanceof Promise)&&(this.Lo=d.JsonUtils.clone(this.options))}return null!==this.Lo},D7:function(a,b){var c=new e(a,b),d=c.ie();d instanceof Function&&(d=Promise.resolve(d(this.p1(a))));if(d&&d instanceof Promise){this.GD++;var f=this.FV,g=this;d.then(function(a){g.Zaa(f,c,a)},function(){g.Zaa(f,c,[])});return d}return null},Zaa:function(a,b,c){a===this.FV&&(this.GD--,b.zia(c,
!0),0===this.GD&&(this.DV(this.Lo),this.Lo=null))},DV:function(a){var b=this.UG()&&this.Nl;b&&this.BV();this.xa.render(a,this.sL,this.BJ);b&&this.sQ()},p1:function(){return{}},UG:function(){return!1},whenReady:function(){if(this.paa)return Promise.resolve(!0);if(!this.oV){var a=this;this.oV=new Promise(function(b){a.pV=b})}return this.oV},V1:function(){this.paa=!1},gaa:function(){var a=this.options.tooltip;"function"===typeof a&&(this.options.tooltip={renderer:a})}},!0);a.Components.Ua("dvtBaseComponent",
"baseComponent",{properties:{trackResize:{type:"string"}},methods:{whenReady:{}},extension:{_widgetName:"dvtBaseComponent"}})});