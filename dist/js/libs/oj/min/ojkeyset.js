/**
 * @license
 * Copyright (c) 2014, 2024, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define(["exports","ojs/ojcore-base","ojs/ojkeysetimpl"],function(e,t,r){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;class n{}t._registerLegacyNamespaceProp("KeySet",n);class s extends n{constructor(e){super(),this.keys={all:!1,keys:void 0},this.keys.keys=new Set(e)}has(e){return o(this.keys.keys,e)}add(e){const t=new Set(this.keys.keys.values());return e.forEach(e=>{o(t,e)||t.add(e)}),t.size===this.keys.keys.size?this:new s(t)}delete(e){const t=new Set(this.keys.keys.values());return e.forEach(e=>{const r=i(t,e);r.value&&t.delete(r.key)}),t.size===this.keys.keys.size?this:new s(t)}addAll(){return new l([])}clear(){return 0===this.keys.keys.size?this:new s([])}isAddAll(){return!1}values(){return new Set(this.keys.keys.values())}}class l extends n{constructor(e){super(),this.keys={all:!0,deletedKeys:void 0},this.keys.deletedKeys=new Set(e)}has(e){return!o(this.keys.deletedKeys,e)}add(e){const t=new Set(this.keys.deletedKeys.values());return e.forEach(e=>{const r=i(t,e);r.value&&t.delete(r.key)}),t.size===this.keys.deletedKeys.size?this:new l(t)}delete(e){const t=new Set(this.keys.deletedKeys.values());return e.forEach(e=>{o(t,e)||t.add(e)}),t.size===this.keys.deletedKeys.size?this:new l(t)}addAll(){return 0===this.keys.deletedKeys.size?this:new l([])}clear(){return new s([])}isAddAll(){return!0}deletedValues(){return new Set(this.keys.deletedKeys.values())}}const o=(e,t)=>i(e,t).value,i=(e,r)=>{if(0===e.size)return{value:!1};if("string"==typeof r||"number"==typeof r||"boolean"==typeof r)return{value:e.has(r),key:r};const n=e[Symbol.iterator]();let s=n.next();for(;!s.done;){if(t.KeyUtils.equals(s.value,r))return{value:!0,key:s.value};s=n.next()}return{value:!1}};t._registerLegacyNamespaceProp("KeySetImpl",s),t._registerLegacyNamespaceProp("AllKeySetImpl",l);var a=function(){};t.Object.createSubclass(a,t.Object,"KeySet"),a.prototype.SetInternal=function(e){this._keys=e},a.prototype.AddOrDeleteInternal=function(e,t){var r,n;return null==(r=e?this._add(t):this._remove(t))?this:((n=Object.create(Object.getPrototypeOf(this))).SetInternal(r),n)},a.prototype._add=function(e){var t=this,r=null;return e.forEach(function(e){e!==t.NOT_A_KEY&&t.get(e)===t.NOT_A_KEY&&(null==r&&(r=t.Clone()),r.add(e))}),r},a.prototype._remove=function(e){var t,r=this,n=null;return 0===this._keys.size?null:(e.forEach(function(e){(t=r.get(e))!==r.NOT_A_KEY&&(null==n&&(n=r.Clone()),n.delete(t))}),n)},a.prototype.GetInternalSize=function(){return this._keys.size},a.prototype.Clone=function(){return new Set(this._keys)},r.call(a.prototype);var u=function(e){this.InitializeWithKeys(e)};t._registerLegacyNamespaceProp("ExpandedKeySet",u),t.Object.createSubclass(u,a,"ExpandedKeySet"),u.prototype.add=function(e){return this.AddOrDeleteInternal(!0,e)},u.prototype.addAll=function(){return new d},u.prototype.isAddAll=function(){return!1},u.prototype.delete=function(e){return this.AddOrDeleteInternal(!1,e)},u.prototype.clear=function(){return 0===this.GetInternalSize()?this:new u},u.prototype.has=function(e){return this.get(e)!==this.NOT_A_KEY},u.prototype.values=function(){return this.Clone()};var d=function(){this.InitializeWithKeys(null)};t._registerLegacyNamespaceProp("ExpandAllKeySet",d),t.Object.createSubclass(d,a,"ExpandAllKeySet"),d.prototype.add=function(e){return this.AddOrDeleteInternal(!1,e)},d.prototype.addAll=function(){return 0===this.GetInternalSize()?this:new d},d.prototype.isAddAll=function(){return!0},d.prototype.delete=function(e){return this.AddOrDeleteInternal(!0,e)},d.prototype.clear=function(){return new u},d.prototype.has=function(e){return this.get(e)===this.NOT_A_KEY},d.prototype.deletedValues=function(){return this.Clone()};var y={toArray:function(e){var t,r=e.isAddAll()?e.deletedValues():e.values();return Array.from?t=Array.from(r):(t=[],r.forEach(function(e){t.push(e)})),t.inverted=e.isAddAll(),t},toKeySet:function(e){return e.inverted?(new l).delete(e):(new s).add(e)}};e.AllKeySetImpl=l,e.ExpandAllKeySet=d,e.ExpandedKeySet=u,e.KeySet=n,e.KeySetImpl=s,e.KeySetUtils=y,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojkeyset.js.map