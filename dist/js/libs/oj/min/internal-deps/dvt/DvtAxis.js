/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(['./DvtToolkit'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.

!function(t){t.Axis=function(){},t.Obj.createSubclass(t.Axis,t.BaseComponent),t.Axis.newInstance=function(e,i,n){var o=new t.Axis;return o.Init(e,i,n),o},t.Axis.getDefaults=function(t){return(new n).getDefaults(t)},t.Axis.prototype.Init=function(e,i,r){t.Axis.superclass.Init.call(this,e,i,r),this.Defaults=new n(e),this.EventManager=new o(this),this.EventManager.addListeners(this),t.Agent.isTouchDevice()||this.EventManager.setKeyboardHandler(new s(this.EventManager,this)),this._bounds=null},t.Axis.MINIMUM_AXIS_BUFFER=10,t.Axis.prototype.SetOptions=function(t){t?this.Options="off"==t.rendered?t:this.Defaults.calcOptions(t):this.Options||(this.Options=this.GetDefaults())},t.Axis.prototype.getPreferredSize=function(t,e,i){return this.SetOptions(t),r.getPreferredSize(this,e,i)},t.Axis.prototype.render=function(e,i,n,o,s){this.getCache().clearCache(),this.SetOptions(e),this._navigablePeers=[],this.Width=i,this.Height=n,this.removeChildren(),o||(o=0),s||(s=0);var a=new t.Rectangle(o,s,i,n);r.render(this,a)},t.Axis.prototype.__registerObject=function(t){(null!=t.getDatatip()||null!=t.getAction()||t.isDrillable())&&this._navigablePeers.push(t)},t.Axis.prototype.__getKeyboardObjects=function(){return this._navigablePeers},t.Axis.prototype.isNavigable=function(){return this._navigablePeers.length>0},t.Axis.prototype.getKeyboardFocus=function(){return null!=this.EventManager?this.EventManager.getFocus():null},t.Axis.prototype.setKeyboardFocus=function(e,i){if(null!=this.EventManager){for(var n=this.__getKeyboardObjects(),o=e.getId(),s=!1,r=0;r<n.length;r++){var a=n[r].getId();if(o instanceof Array&&a instanceof Array&&t.ArrayUtils.equals(o,a)||o===a){this.EventManager.setFocusObj(n[r]),s=!0,i&&n[r].showKeyboardFocusEffect();break}}s||this.EventManager.setFocusObj(this.EventManager.getKeyboardHandler().getDefaultNavigable(n));var l=this.getKeyboardFocus();if(l){var h=l.getDisplayable();h.setAriaProperty("label",l.getAriaLabel()),this.getCtx().setActiveElement(h)}}},t.Axis.prototype.processEvent=function(t,e){this===e&&this.dispatchEvent(t)},t.Axis.prototype.getInfo=function(){return this.Info},t.Axis.prototype.__setInfo=function(t){this.Info=t},t.Axis.prototype.getWidth=function(){return this.Width},t.Axis.prototype.getHeight=function(){return this.Height},t.Axis.prototype.__setBounds=function(t){this._bounds=t},t.Axis.prototype.__getBounds=function(){return this._bounds},t.Axis.prototype.getAutomation=function(){return new i(this)};var e={};t.Obj.createSubclass(e,t.Obj),e.TICK_LABEL="tickLabel",e.TITLE="title";var i=function(t){this._axis=t,this._options=this._axis.getOptions(),this._axisInfo=this._axis.getInfo()};t.Obj.createSubclass(i,t.Automation),i.prototype.GetSubIdForDomElement=function(i){var n=this._axis.getEventManager().GetLogicalObject(i);if(n&&n instanceof t.SimpleObjPeer){if(n.getParams().type==e.TITLE)return"title";if(this._options.groups){for(var o=n.getParams().level,s=this._axisInfo.getStartIndex(n.getParams().index,o),r="",a=0;a<=o;a++)for(var l=this._axisInfo.getLabels(this._axis.getCtx(),a),h=0;h<l.length;h++){var u=this._axisInfo.getLabelIndex(l[h]);this._axisInfo.getStartIndex(u,a)<=s&&this._axisInfo.getEndIndex(u,a)>=s&&(r+="["+this._axisInfo.getPosition(u,a)+"]")}if(r.length>0)return"item"+r}}return null},i.prototype.getDomElementForSubId=function(e){if("title"==e){var i=this._axisInfo.getTitle();if(i)return i.getElem()}else if(this._axisInfo instanceof t.GroupAxisInfo)for(var n=e.split("[").length-1-1,o=0,s=0,r=0;r<=n;r++){var a=e.indexOf("["),l=e.indexOf("]"),h=e.substring(a+1,l);e=e.substring(l+1);for(var u,g=this._axisInfo.getLabels(this._axis.getCtx(),r),f=0;f<g.length;f++)if(u=this._axisInfo.getLabelIndex(g[f]),this._axisInfo.getStartIndex(u,r)==s){o=u;break}for(var _=o;_<g.length;_++)if(u=this._axisInfo.getLabelIndex(g[_]),this._axisInfo.getPosition(u,r)==h){if(0==e.length)return g[_].getElem();s=this._axisInfo.getStartIndex(u,r);break}}return null};var n=function(t){this.Init({skyros:n.VERSION_1,alta:n.SKIN_ALTA,next:n.SKIN_NEXT},t)};t.Obj.createSubclass(n,t.BaseComponentDefaults),n.SKIN_NEXT={skin:t.CSSStyle.SKIN_NEXT,layout:{titleGap:6}},n.SKIN_ALTA={axisLine:{lineColor:"#9E9E9E"},majorTick:{lineColor:"rgba(196,206,215,0.4)",baselineColor:"auto"},minorTick:{lineColor:"rgba(196,206,215,0.2)"},tickLabel:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA)},titleStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA_12)},n.VERSION_1={position:null,baselineScaling:"zero",axisLine:{lineColor:"#8A8DAC",lineWidth:1,rendered:"on"},majorTick:{lineColor:"rgba(138,141,172,0.4)",lineWidth:1,rendered:"auto",lineStyle:"solid"},minorTick:{lineColor:"rgba(138,141,172,0.20)",lineWidth:1,rendered:"off",lineStyle:"solid"},tickLabel:{scaling:"auto",style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS+"font-size: 11px; color: #333333;"),rotation:"auto",rendered:"on"},titleStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS+"font-size: 11px; color: #737373;"),startGroupOffset:0,endGroupOffset:0,layout:{titleGap:4,radialLabelGap:5,insideLabelGapWidth:4,insideLabelGapHeight:2,hierarchicalLabelGapHeight:8,hierarchicalLabelGapWidth:15},_locale:"en-us"},n.getGapSize=function(e,i,n){var o=Math.min(t.TextUtils.getTextStringHeight(e,i.tickLabel.style)/14,1);return Math.ceil(n*o)};var o=function(t){this.Init(t.getCtx(),t.processEvent,t),this._axis=t};t.Obj.createSubclass(o,t.EventManager),o.getUIParams=function(t,e,i,n){return{type:t,id:e,index:i,level:n}},o.prototype.getComponent=function(){return this._axis},o.prototype.OnClick=function(t){o.superclass.OnClick.call(this,t);var e=this.GetLogicalObject(t.target);e&&(this.processActionEvent(e)&&t.stopPropagation())},o.prototype.HandleTouchClickInternal=function(t){var e=this.GetLogicalObject(t.target);if(e){var i=t.touchEvent;this.processActionEvent(e)&&i&&i.preventDefault()}},o.prototype.processActionEvent=function(e){return e&&e.getAction&&e.getAction()?(this.FireEvent(t.EventFactory.newActionEvent("action",e.getAction(),e.getId()),this._axis),!0):!!(e instanceof a&&e.isDrillable())&&(this.FireEvent(t.EventFactory.newChartDrillEvent(e.getId(),null,e.getGroup()),this._axis),!0)},o.prototype.isDndSupported=function(){return!0},o.prototype.GetDragSourceType=function(t){var e=this.DragSource.getDragObject();return e instanceof a&&null!=e.getGroup()?"groups":null},o.prototype.GetDragDataContexts=function(){var t=this.DragSource.getDragObject();return t instanceof a?[{id:t.getId(),group:t.getGroup(),label:t.getLabel().getTextString()}]:[]};var s=function(t,e){this.Init(t,e)};t.Obj.createSubclass(s,t.KeyboardHandler),s.prototype.Init=function(t,e){s.superclass.Init.call(this,t),this._axis=e},s.prototype.processKeyDown=function(e){var i=e.keyCode,n=this._eventManager.getFocus(),o=null;if(i==t.KeyboardEvent.TAB){n&&(t.EventManager.consumeEvent(e),o=n);var r=this._axis.__getKeyboardObjects();r.length>0&&(t.EventManager.consumeEvent(e),o=this.getDefaultNavigable(r))}else i==t.KeyboardEvent.ENTER?n&&(this._eventManager.processActionEvent(n),t.EventManager.consumeEvent(e)):o=s.superclass.processKeyDown.call(this,e);return o};var r=new Object;t.Obj.createSubclass(r,t.Obj),r._MAX_TITLE_LINE_WRAP=3,r.getPreferredSize=function(e,i,n){var o=r._createAxisInfo(e,new t.Rectangle(0,0,i,n)),s=e.getCtx(),a=e.getOptions(),l="top"==a.position||"bottom"==a.position;if("off"==a.rendered||i<=0||n<=0)return l?new t.Dimension(i,0):new t.Dimension(0,n);var h=r.getTitleHeight(s,a,.8*(l?i:n),.8*(l?n:i)),u=0!=h?h+r._getTitleGap(e):0;if("on"==a.tickLabel.rendered&&"inside"!=a.tickLabel.position)if(l){var g=t.TextUtils.getTextStringHeight(s,a.tickLabel.style);o instanceof t.DataAxisInfo?u+=g:o instanceof t.TimeAxisInfo?u+=null!=o.getLabels(s,1)?2*g:g:o instanceof t.GroupAxisInfo&&(u=r._getGroupAxisPreferredSize(e,o,u,n,l))}else if(o instanceof t.DataAxisInfo)u+=t.TextUtils.getMaxTextStringWidth(s,o.getAllLabels(s,!0),o.Options.tickLabel.style);else if(o instanceof t.TimeAxisInfo){var f=o.getLabels(s),_=t.TextUtils.getMaxTextDimensions(f).w,p=o.getLabels(s,1),c=null!=p?t.TextUtils.getMaxTextDimensions(p).w:0;u+=Math.max(_,c)}else o instanceof t.GroupAxisInfo&&(u=r._getGroupAxisPreferredSize(e,o,u,i,l));return l?new t.Dimension(i,Math.min(u,n)):new t.Dimension(Math.min(u,i),n)},r.render=function(t,e){var i=r._createAxisInfo(t,e);"off"!=t.getOptions().rendered&&(t.__setBounds(e.clone()),r._renderBackground(t,e),r._renderTitle(t,i,e),r._renderLabels(t,i,e))},r._createAxisInfo=function(e,i){var n=t.AxisInfo.newInstance(e.getCtx(),e.getOptions(),i);return e.__setInfo(n),n},r._getTitleGap=function(t){var e=t.getOptions();return n.getGapSize(t.getCtx(),e,e.layout.titleGap)},r._renderBackground=function(e,i){var n=e.getOptions();if(n.dnd){var o=n.dnd.drop,s=Object.keys(o.xAxis).length>0||Object.keys(o.yAxis).length>0||Object.keys(o.y2Axis).length>0,r=n.dnd.drag,a=Object.keys(r.groups).length>0&&e.getInfo()instanceof t.GroupAxisInfo;if(s||a){var l=n.position,h="top"==l||"bottom"==l,u=h?4:10,g=h?10:4,f=new t.Rect(e.getCtx(),i.x-g,i.y-u,i.w+2*g,i.h+2*u);a&&f.setClassName("oj-draggable"),f.setInvisibleFill(),e.getCache().putToCache("background",f),e.addChild(f)}}},r._renderTitle=function(i,n,s){var a=i.getOptions();if(a.title){var l=a.position;if("radial"!=l&&"tangential"!=l){var h="top"==a.position||"bottom"==a.position,u=h?s.w:s.h,g=h?s.h:s.w,f=a.titleStyle,_=r.isWrapEnabled(f),p=r._createText(i.getEventManager(),i,a.title,f,0,0,u,g,o.getUIParams(e.TITLE),_);if(p){var c=r._getTitleGap(i),d=(n.getStartOverflow()-n.getEndOverflow())/2,x=t.Agent.isRightToLeft(i.getCtx()),I=p.getDimensions().h;p.alignCenter(),"top"==l?(p.setX(s.x+d+s.w/2),p.setY(s.y),s.y+=I+c,s.h-=I+c):"bottom"==l?(p.setX(s.x+d+s.w/2),p.setY(s.y+s.h-I),s.h-=I+c):"left"==l?(p.alignMiddle(),p.setRotation(x?Math.PI/2:3*Math.PI/2),p.setTranslate(s.x+I/2,s.y+s.h/2),s.x+=I+c,s.w-=I+c):"right"==l&&(p.alignMiddle(),p.setRotation(x?Math.PI/2:3*Math.PI/2),p.setTranslate(s.x+s.w-I/2,s.y+s.h/2),s.w-=I+c),n.setTitle(p)}}}},r._renderLabels=function(t,e,i){var n=t.getOptions();if("on"==n.tickLabel.rendered){var o=n.position;"top"==o||"bottom"==o?r._renderLabelsHoriz(t,e,i):"tangential"==o?r._renderLabelsTangent(t,e,i):r._renderLabelsVert(t,e,i),r._renderGroupSeparators(t,e,i)}},r._renderLabelsHoriz=function(i,s,r){var l=i.getCtx(),h=i.getOptions(),u=h.position,g="inside"==h.tickLabel.position,f=t.Agent.isRightToLeft(l),_=s instanceof t.GroupAxisInfo,p=_&&s.getNumLevels()>1,c=p?0:null,d=s.getLabels(l,c);for(T=p?n.getGapSize(l,h,h.layout.hierarchicalLabelGapHeight):0;d;){for(var x=0,I=0,m=0;m<d.length;m++){var A=d[m];if(null!=A){var M=A instanceof t.MultilineText||A instanceof t.BackgroundMultilineText;if(s.isLabelRotated(c)){if((!M||M&&!A.isWrapEnabled())&&!t.TextUtils.fitText(A,r.h,r.w,i))continue;f?A.alignLeft():A.alignRight(),p?(x=A.getDimensions().w,A.setTranslateY(r.h-x),I=Math.max(I,x)):A.setTranslateY(r.y)}else{if(!g&&A.getDimensions().h-1>r.h)continue;if(p&&"bottom"==u?A.setY(r.h):"bottom"==u?A.setY(r.y):A.setY(r.y+r.h),!p&&("bottom"==u&&!g||"top"==u&&g)?A.alignTop():p&&"top"==u?A.alignTop():A.alignBottom(),p)I=Math.max(I,A.getDimensions().h);else if(g){var T=n.getGapSize(l,h,h.layout.insideLabelGapWidth);f?A.alignRight():A.alignLeft(),A.setX(A.getX()+T*(f?-1:1))}}var v=_?s.getLabelIndex(A):m,b=s.getDatatip(v,c),L=A.getUntruncatedTextString(),S=s.getAction(v,c),C=s.isDrillable(v,c),y=s.getGroup(v,c),O=o.getUIParams(e.TICK_LABEL,A.getTextString(),v,c);i.getEventManager().associate(A,new a(i,A,y,S,C,L,b,O)),p?s.setLastRenderedLevel(c):I=Math.max(I,A.getDimensions().h),i.addChild(A)}}if(p){for(m=0;m<d.length;m++)if(null!=(A=d[m])){var E=s.isLabelRotated(c),D=c<s.getNumLevels()-1;!E&&D?(A.setY(r.h-I/2),A.alignMiddle()):A.setTranslateY(r.h-I)}r.y+=I+T,r.h-=I+T,c++,d=s.getLabels(i.getCtx(),c)}else r.y+=I,r.h-=I,d=null}if(s instanceof t.TimeAxisInfo){d=s.getLabels(i.getCtx());var G=s.getLabels(i.getCtx(),1),R=0;if(null!=G)for(m=0;m<G.length;m++)if(null!=(A=G[m])&&!(A.getDimensions().h-1>r.h)){i.getEventManager().associate(A,new t.SimpleObjPeer(null,null,null,o.getUIParams(e.TICK_LABEL,A.getTextString())));var w=0,V=0,k=s.getOptions()._maxOverflowCoord,F=s.getOptions()._minOverflowCoord;if(null!=d[m]&&(R=d[m].getDimensions().w/2,w=s._level1Overflow[m],V=s._level2Overflow[m]),0==w&&0==V){var U,N=A.getX();f?(U=N+R<=k?N+R:k,A.setX(U)):(U=N-R>=F?N-R:F,A.setX(U))}else w<0?A.setX(F):w>0&&A.setX(k);A.alignTop(),A.setY(r.y),i.addChild(A)}}},r._renderLabelsVert=function(i,s,r){var l,h,u,g=i.getOptions(),f=g.position,_=i.getCtx(),p=t.Agent.isRightToLeft(_),c=s instanceof t.DataAxisInfo,d="inside"==g.tickLabel.position,x=s instanceof t.GroupAxisInfo,I=x&&s.getNumLevels()>1,m=I?0:null;l=s.getLabels(i.getCtx(),m);var A=0;I?(h=n.getGapSize(_,g,g.layout.hierarchicalLabelGapWidth),u=t.TextUtils.getMaxTextDimensions(l).w):"radial"==f?(h=n.getGapSize(_,g,g.layout.radialLabelGap),A=r.x+r.w/2,p?A+=h+t.TextUtils.getMaxTextDimensions(l).w:A-=h):"left"==f?(A=r.x+r.w,c&&d&&(A+=t.TextUtils.getMaxTextDimensions(l).w)):(A=r.x,c&&!d&&(A+=t.TextUtils.getMaxTextDimensions(l).w));for(var M=function(h,M){var T=h instanceof t.MultilineText||h instanceof t.BackgroundMultilineText,v=!T||T&&!h.isWrapEnabled();if(!(I&&t.TextUtils.getMaxTextDimensions(l).w-1>r.w)&&(I||d||!v||t.TextUtils.fitText(h,r.w,r.h,i))){M=x?s.getLabelIndex(h):M;var b=s.getDatatip(M,m),L=h.getUntruncatedTextString(),S=s.getAction(M,m),C=s.isDrillable(M,m),y=s.getGroup(M,m),O=o.getUIParams(e.TICK_LABEL,h.getTextString(),M,m);if(i.getEventManager().associate(h,new a(i,h,y,S,C,L,b,O)),I)h.alignRight(),h.setX(p?r.w:r.x+u),s.setLastRenderedLevel(m);else if(h.setX(A),c||"right"!=f?h.alignRight():h.alignLeft(),d&&(h.alignBottom(),h.setY(h.getY()-n.getGapSize(_,g,g.layout.insideLabelGapHeight))),"radial"==f){var E=h.getY();h.setY(r.y+r.h/2-E);var D=h.getDimensions(),G=.15*D.h,R=t.PathUtils.roundedRectangle(D.x-G,D.y,D.w+2*G,D.h,2,2,2,2),w=new t.Path(i.getCtx(),R),V=h.getCSSStyle().getStyle(t.CSSStyle.BACKGROUND_COLOR),k=E+D.h/2>s.getEndCoord()&&"circle"==i.getOptions().polarGridShape?1:.3;V?w.setSolidFill(V):w.setSolidFill("#FFFFFF",k),i.addChild(w)}i.addChild(h)}};l;){for(var T=0;T<l.length;T++){var v=l[T];null!=v&&M(v,T)}if(!I)break;r.x+=u+h,r.w-=u+h,m++,l=s.getLabels(i.getCtx(),m),u=l?t.TextUtils.getMaxTextDimensions(l).w:null}if(s instanceof t.TimeAxisInfo){var b=s.getLabels(i.getCtx(),1);if(null!=b)for(T=0;T<b.length;T++)null!=(v=b[T])&&M(v,T)}},r._renderLabelsTangent=function(i,n,s){for(var r=n.getLabels(i.getCtx()),l=0;l<r.length;l++){var h=r[l];if(null!=h){var u=s.w/2-Math.abs(h.getX()),g=s.h/2-Math.abs(h.getY());if(t.TextUtils.fitText(h,u,g,i)){var f=n instanceof t.GroupAxisInfo?n.getLabelIndex(h):l,_=n.getDatatip(f),p=h.getUntruncatedTextString(),c=n.getAction(f),d=n.isDrillable(f),x=n.getGroup(f),I=o.getUIParams(e.TICK_LABEL,h.getTextString(),f);i.getEventManager().associate(h,new a(i,h,x,c,d,p,_,I)),h.setTranslateX(s.x+s.w/2),h.setTranslateY(s.y+s.h/2),i.addChild(h)}}}},r._createText=function(e,i,n,o,s,a,l,h,u,g){var f;return g?((f=new t.MultilineText(i.getCtx(),n,s,a)).setMaxLines(r._MAX_TITLE_LINE_WRAP),f.setCSSStyle(o),f.wrapText(l,h,1)):(f=new t.OutputText(i.getCtx(),n,s,a)).setCSSStyle(o),t.TextUtils.fitText(f,l,h,i)?(e.associate(f,new t.SimpleObjPeer(f.getUntruncatedTextString(),null,null,u)),f):null},r._renderGroupSeparators=function(e,i,o){if(i instanceof t.GroupAxisInfo&&i.areSeparatorsRendered()){var s=i.getNumLevels(),a=i.getSeparatorStartLevel();if(s<=1||a<=0)return;for(var l,h,u,g,f,_,p=e.getOptions(),c=p.position,d="top"==c||"bottom"==c,x=e.getCtx(),I=t.Agent.isRightToLeft(x),m=i.getSeparatorColor(),A=new t.SolidStroke(m,1,1),M=0,T=d?n.getGapSize(x,p,p.layout.hierarchicalLabelGapHeight):n.getGapSize(x,p,p.layout.hierarchicalLabelGapWidth),v=p.startGroupOffset,b=p.endGroupOffset,L=a;L>=0;L--){var S=i.getLabels(e.getCtx(),L),C=t.TextUtils.getMaxTextDimensions(S),y=i.isLabelRotated(L),O=y||!d?C.w:C.h;if(0!=O){var E=!1,D=null;if(L<a)for(var G=0;G<S.length;G++){var R=S[G];if(null!=R){var w=i.getLabelIndex(R),V=0==i.getLabelAt(w,L).length;if(!V){var k=V&&0==L&&(0==w||w==S.length-1),F=R&&null==S[w-1],U=R&&null==S[w+1],N=i.getStartIndex(w,L),P=i.getEndIndex(w,L);if(d){var B;if(R)B=R instanceof t.MultilineText||R instanceof t.BackgroundMultilineText?R.getYAlignCoord():R.getY(),l=i.getCoordAt(N-v),h=y?B+.5*M:B-O/2-.5*M-T,u=i.getCoordAt(P+b),g=y?B+O+M+2*T:B,V&&k||0!=E||null==l||r._addSeparatorLine(e,A,l,g,l,h),null==u||k||r._addSeparatorLine(e,A,u,g,u,h);if(!V){if(R)var j=y?R.getDimensions().h:R.getDimensions().w;l=F&&0==D?i.getStartCoord():i.getBoundedCoordAt(N-v),F&&(F=!1);var H=i.getLabelAt(w+1,L);if(u=U&&H&&H.length>0?i.getEndCoord():i.getBoundedCoordAt(P+b),f=R?I?R.getX()+.5*j:R.getX()-.5*j:i.getBoundedCoordAt(P+b),_=R?I?R.getX()-.5*j:R.getX()+.5*j:i.getBoundedCoordAt(N-v),R)if(y)r._addSeparatorLine(e,A,l,g,u,g);else{var W=I?.5*-R.getDimensions().h:.5*R.getDimensions().h,X=I?_+W>u:_+W<u;(I?l>f-W:l<f-W)&&r._addSeparatorLine(e,A,l,g,f-W,g),X&&r._addSeparatorLine(e,A,_+W,g,u,g)}}}else R&&(l=I?R.getX()-O-.5*T:R.getX()+.5*T,h=i.getCoordAt(N-v),u=I?R.getX()+.5*T:R.getX()-O-.5*T,g=i.getCoordAt(P+b),(!V&&0==E||0==w&&V&&0!=L)&&null!=h&&r._addSeparatorLine(e,A,l,h,u,h),null==g||k||r._addSeparatorLine(e,A,u,g,l,g)),V||(h=F&&0==D?0:i.getBoundedCoordAt(N-v),F&&(F=!1),H=i.getLabelAt(w+1,L),g=U&&H&&H.length>0?i.getEndCoord():i.getBoundedCoordAt(P+b),R&&r._addSeparatorLine(e,A,u,h,u,g));E=!V&&null!=R,D=null!=R||null==R&&V}}}M=O}else M=O}}},r._addSeparatorLine=function(e,i,n,o,s,r){var a=new t.Line(e.getCtx(),n,o,s,r);a.setStroke(i),a.setPixelHinting(!0),e.addChild(a)},r._getGroupAxisPreferredSize=function(e,i,o,s,r){for(var a=e.getCtx(),l=e.getOptions(),h=i.getNumLevels(),u=r?"hierarchicalLabelGapHeight":"hierarchicalLabelGapWidth",g=h>1?n.getGapSize(a,l,l.layout[u]):0,f=0;f<h;f++){var _;if(i.isAutoRotate()){for(var p=[],c=[],d=i.getSkipIncrement(),x=0;x<i.getGroupCount();x+=d){p.push(i.getLabelAt(x,0));var I=i.getLabelStyleAt(x,0);I||(I=i.Options.tickLabel.style),c.push(I)}_=t.TextUtils.getMaxTextStringWidth(a,p,c)}else{var m=i.getLabels(a,f);if(r){var A=t.TextUtils.getMaxTextDimensions(m);_=i.isLabelRotated(f)?A.w:A.h}else _=t.TextUtils.getMaxTextDimensions(m).w}if(!(o+_<=s)){0==f&&(o=s);break}o+=_+g}return 0!=f&&(o-=g),o},r.getTitleHeight=function(e,i,n,o){var s=0;if(i.title)if(r.isWrapEnabled(i.titleStyle)){var a=new t.MultilineText(e,i.title,0,0);a.setMaxLines(r._MAX_TITLE_LINE_WRAP),a.setCSSStyle(i.titleStyle),a.wrapText(n,o,1),s=t.TextUtils.getTextStringHeight(e,i.titleStyle)*a.getLineCount()}else s=t.TextUtils.getTextStringHeight(e,i.titleStyle);return s},r.isWrapEnabled=function(e){var i=e.getStyle(t.CSSStyle.WHITE_SPACE);return"nowrap"!=i&&"noWrap"!=i},t.AxisInfo=function(){},t.Obj.createSubclass(t.AxisInfo,t.Obj),t.AxisInfo.newInstance=function(e,i,n){return i.timeAxisType&&"disabled"!=i.timeAxisType?new t.TimeAxisInfo(e,i,n):i._isGroupAxis?new t.GroupAxisInfo(e,i,n):new t.DataAxisInfo(e,i,n)},t.AxisInfo.prototype.Init=function(e,i,n){this._context=e,this.Position=i.position,this._radius=i._radius,this._title=null,"top"==this.Position||"bottom"==this.Position?(this.StartCoord=n.x,this.EndCoord=n.x+n.w):"left"==this.Position||"right"==this.Position?(this.StartCoord=n.y,this.EndCoord=n.y+n.h):"radial"==this.Position?(this.StartCoord=0,this.EndCoord=this._radius):"tangential"==this.Position&&(t.Agent.isRightToLeft(e)?(this.StartCoord=2*Math.PI,this.EndCoord=0):(this.StartCoord=0,this.EndCoord=2*Math.PI)),this.MinValue=null,this.MaxValue=null,this.GlobalMin=null,this.GlobalMax=null,this.DataMin=null,this.DataMax=null,this.MinViewportExtent=null,this.StartOverflow=0,this.EndOverflow=0,null==i.leftBuffer&&(i.leftBuffer=1/0),null==i.rightBuffer&&(i.rightBuffer=1/0),this.Options=i},t.AxisInfo.prototype.getCtx=function(){return this._context},t.AxisInfo.prototype.getOptions=function(){return this.Options},t.AxisInfo.prototype.getLabels=function(t,e){return null},t.AxisInfo.prototype.getTitle=function(){return this._title},t.AxisInfo.prototype.setTitle=function(t){this._title=t},t.AxisInfo.prototype.getMajorTickCoords=function(){return[]},t.AxisInfo.prototype.getMinorTickCoords=function(){return[]},t.AxisInfo.prototype.getBaselineCoord=function(){return null},t.AxisInfo.prototype.getValueAt=function(t){if(null==t)return null;var e=Math.min(this.StartCoord,this.EndCoord),i=Math.max(this.StartCoord,this.EndCoord);return t<e||t>i?null:this.getUnboundedValueAt(t)},t.AxisInfo.prototype.getCoordAt=function(t){return null==t?null:t<this.MinValue||t>this.MaxValue?null:this.getUnboundedCoordAt(t)},t.AxisInfo.prototype.getBoundedValueAt=function(t){if(null==t)return null;var e=Math.min(this.StartCoord,this.EndCoord),i=Math.max(this.StartCoord,this.EndCoord);return t<e?t=e:t>i&&(t=i),this.getUnboundedValueAt(t)},t.AxisInfo.prototype.getBoundedCoordAt=function(t){return null==t?null:(t<this.MinValue?t=this.MinValue:t>=this.MaxValue&&(t=this.MaxValue),this.getUnboundedCoordAt(t))},t.AxisInfo.prototype.getUnboundedValueAt=function(t){return null},t.AxisInfo.prototype.getUnboundedCoordAt=function(t){return null},t.AxisInfo.prototype.getDatatip=function(t,e){return null},t.AxisInfo.prototype.getLabelBackground=function(t,e){return null},t.AxisInfo.prototype.getAction=function(t){return null},t.AxisInfo.prototype.isDrillable=function(t){return null},t.AxisInfo.prototype.getBaselineCoord=function(){return null},t.AxisInfo.prototype.isLabelRotated=function(){return!1},t.AxisInfo.prototype.CreateLabel=function(e,i,n,o,s){var r;if("tangential"==this.Position){var a=16/180*Math.PI,l=1/180*Math.PI,h=.5*this.getTickLabelHeight(),u=this._radius+h;(n<l||n>2*Math.PI-l)&&(u+=h);var g=Math.round(u*Math.sin(n)),f=Math.round(-u*Math.cos(n));r=o?new t.BackgroundOutputText(e,i,g,f,o):new t.OutputText(e,i,g,f),n<l||Math.abs(n-Math.PI)<l||n>2*Math.PI-l?r.alignCenter():n<Math.PI?r.alignLeft():r.alignRight(),Math.abs(n-Math.PI/2)<a||Math.abs(n-3*Math.PI/2)<a?r.alignMiddle():n<Math.PI/2||n>3*Math.PI/2?r.alignBottom():r.alignTop()}else s?r=o?new t.BackgroundMultilineText(e,i,n,n,o):new t.MultilineText(e,i,n,n):(r=o?new t.BackgroundOutputText(e,i,n,n,o):new t.OutputText(e,i,n,n)).alignMiddle(),r.alignCenter();return(r instanceof t.OutputText||r instanceof t.MultilineText)&&r.setCSSStyle(this.Options.tickLabel.style),r},t.AxisInfo.prototype.IsOverlapping=function(e,i){if(!e||e.length<=0)return!1;for(var n,o,s,r,a="left"==this.Position||"right"==this.Position||"radial"==this.Position,l=t.Agent.isRightToLeft(this.getCtx()),h=this.GetTickLabelGapSize(),u=0;u<e.length;u+=i+1)if(null!=e[u])if(null!=n&&null!=o){if(a){if(s=e[u].y,r=e[u].y+e[u].h,s>=n&&s-h<o)return!0;if(s<n&&r+h>n)return!0}else{if(s=e[u].x,r=e[u].x+e[u].w,!l&&s-h<o)return!0;if(l&&r+h>n)return!0}n=s,o=r}else a?(n=e[u].y,o=e[u].y+e[u].h):(n=e[u].x,o=e[u].x+e[u].w);return!1},t.AxisInfo.prototype.IsOverlappingDims=function(t,e){if(!t||!e)return!1;var i=t.y,n=t.y+t.h,o=t.x,s=t.x+t.w,r=e.y,a=e.y+e.h,l=e.x,h=e.x+e.w;return(o<=l&&l<=s||o<=h&&h<=s||l<=o&&o<=h||l<=s&&s<=h)&&(r>=i&&r<n||r<=i&&a>=i)},t.AxisInfo.prototype.GetTickLabelGapSize=function(){var e=this.getTickLabelHeight(),i=this instanceof t.GroupAxisInfo?.24*e:.79*e,n=this instanceof t.GroupAxisInfo?.08*e:.28*e;return"left"==this.Position||"right"==this.Position||"radial"==this.Position||this.isLabelRotated()?n:i},t.AxisInfo.prototype.getTickLabelHeight=function(){return t.TextUtils.getTextStringHeight(this.getCtx(),this.Options.tickLabel.style)},t.AxisInfo.prototype.SkipLabels=function(t,e){for(var i=0,n=this.IsOverlapping(e,i);n;)i++,n=this.IsOverlapping(e,i);if(i>0){for(var o=[],s=0;s<t.length;s+=i+1)o.push(t[s]);return o}return t},t.AxisInfo.prototype.SkipTangentialLabels=function(t,e){var i=[],n=t.length,o=null;if(n>1){for(var s,r=0;r<n;r++)e[r]&&(!s||s&&!this.IsOverlappingDims(s,e[r]))&&(o||(o=e[r]),i.push(t[r]),s=e[r]);return this.IsOverlappingDims(s,o)&&i.pop(),i}return t},t.AxisInfo.prototype.GetLabelDims=function(t,e,i){for(var n=[],o=this.isLabelRotated(i),s=0;s<t.length;s++){var r=t[s];if(null!=r){var a=r.getDimensions(e);null!=i&&(a.x=(o?r.getTranslateX():r.getX())-a.w/2,a.y=(o?r.getTranslateY():r.getY())-a.h/2),a.w&&a.h?n.push(a):n.push(null)}else n.push(null)}return n},t.AxisInfo.prototype.getMajorTickCount=function(){return null},t.AxisInfo.prototype.getMinorTickCount=function(){return null},t.AxisInfo.prototype.getMajorIncrement=function(){return null},t.AxisInfo.prototype.getMinorIncrement=function(){return null},t.AxisInfo.prototype.getGlobalMin=function(){return this.GlobalMin},t.AxisInfo.prototype.getGlobalMax=function(){return this.GlobalMax},t.AxisInfo.prototype.getViewportMin=function(){return this.MinValue},t.AxisInfo.prototype.getViewportMax=function(){return this.MaxValue},t.AxisInfo.prototype.getDataMin=function(){return this.DataMin},t.AxisInfo.prototype.getDataMax=function(){return this.DataMax},t.AxisInfo.prototype.getMinimumExtent=function(){return 0},t.AxisInfo.prototype.getStartCoord=function(){return this.StartCoord},t.AxisInfo.prototype.getEndCoord=function(){return this.EndCoord},t.AxisInfo.prototype.getStartOverflow=function(){return this.StartOverflow},t.AxisInfo.prototype.getEndOverflow=function(){return this.EndOverflow},t.AxisInfo.prototype.getGroupWidth=function(){return 0},t.AxisInfo.prototype.getGroup=function(t,e){return null},t.AxisInfo.prototype.linearToActual=function(t){return t},t.AxisInfo.prototype.actualToLinear=function(t){return t},t.AxisInfo.prototype.alignLogScaleToTickCount=function(t,e){return t},t.AxisInfo.prototype.getLogScaleUnit=function(){return null},t.DataAxisInfo=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.DataAxisInfo,t.AxisInfo),t.DataAxisInfo._MAX_NUMBER_OF_GRIDS_AUTO=10,t.DataAxisInfo._MINOR_TICK_COUNT=2,t.DataAxisInfo._MAX_ZOOM_FACTOR=64,t.DataAxisInfo._MAJOR_TICK_INCREMENT_BUFFER=1e-10,t.DataAxisInfo.prototype.Init=function(e,i,n){t.DataAxisInfo.superclass.Init.call(this,e,i,n),"top"==this.Position||"bottom"==this.Position?("off"!=i.tickLabel.rendered&&"off"!=i.rendered&&(this.StartOverflow=Math.max(t.Axis.MINIMUM_AXIS_BUFFER-i.leftBuffer,0),this.EndOverflow=Math.max(t.Axis.MINIMUM_AXIS_BUFFER-i.rightBuffer,0)),t.Agent.isRightToLeft(e)?(this._minCoord=this.EndCoord-this.EndOverflow,this._maxCoord=this.StartCoord+this.StartOverflow):(this._minCoord=this.StartCoord+this.StartOverflow,this._maxCoord=this.EndCoord-this.EndOverflow)):"tangential"==this.Position||"radial"==this.Position?(this._minCoord=this.StartCoord,this._maxCoord=this.EndCoord):(this._minCoord=this.EndCoord,this._maxCoord=this.StartCoord),this.DataMin=i.dataMin,this.DataMax=i.dataMax,this._isLog="log"==i.scale&&this.DataMin>0&&this.DataMax>0,this._globalMin=this.actualToLinear(i.min),this._globalMax=this.actualToLinear(i.max),this._minValue=null==i.viewportMin?this._globalMin:this.actualToLinear(i.viewportMin),this._maxValue=null==i.viewportMax?this._globalMax:this.actualToLinear(i.viewportMax),this._dataMin=this.actualToLinear(this.DataMin),this._dataMax=this.actualToLinear(this.DataMax),this._majorIncrement=this.actualToLinear(i.step),this._minorIncrement=this.actualToLinear(i.minorStep),this._minMajorIncrement=this.actualToLinear(i.minStep),this._majorTickCount=i._majorTickCount,this._minorTickCount=i._minorTickCount,this._logScaleUnit=i._logScaleUnit,this._zeroBaseline=!this._isLog&&"zero"==i.baselineScaling,this._converter=null,null!=i.tickLabel&&(this._converter=i.tickLabel.converter),this._calcAxisExtents(),this.GlobalMin=this.linearToActual(this._globalMin),this.GlobalMax=this.linearToActual(this._globalMax),this.MinValue=this.linearToActual(this._minValue),this.MaxValue=this.linearToActual(this._maxValue)},t.DataAxisInfo.prototype.getMinLabel=function(){return this._zeroBaseline||"on"==this.Options._continuousExtent&&null==this.Options.min?Math.ceil(this._minValue/this._majorIncrement)*this._majorIncrement:Math.ceil((this._minValue-this._globalMin)/this._majorIncrement)*this._majorIncrement+this._globalMin},t.DataAxisInfo.prototype.getLabels=function(t,e){if(e&&e>0)return null;var i=this.getAllLabels(t),n=[],o=t.getStage();return"tangential"!=this.Position&&(n=this.GetLabelDims(i,o),i=this.SkipLabels(i,n)),i},t.DataAxisInfo.prototype.getAllLabels=function(e,i){var n=[];if(this.Options.tickLabel&&this.Options.tickLabel.scaling){var o=this.Options.tickLabel.autoPrecision?this.Options.tickLabel.autoPrecision:"on";this._axisValueFormatter=new t.LinearScaleAxisValueFormatter(e,this._minValue,this._maxValue,this._majorIncrement,this.Options.tickLabel.scaling,o)}for(var s=0;s<=this._majorTickCount;s++){var r=s*this._majorIncrement+this.getMinLabel();if(r-this._maxValue>t.DataAxisInfo._MAJOR_TICK_INCREMENT_BUFFER)break;var a,l=this._getUnboundedCoordAt(r);if(this.Options._skipHighestTick){if(r==this._maxValue)continue;if("tangential"!=this.Position&&Math.abs(l-this._maxCoord)<this.getTickLabelHeight())continue}this._isLog?(r=this.linearToActual(r),this._axisValueFormatter=new t.LinearScaleAxisValueFormatter(e,r,r,r,this.Options.tickLabel.scaling,o),a=this._formatValue(r)):a=this._formatValue(r),i?n.push(a):n.push(this.CreateLabel(e,a,l))}return n},t.DataAxisInfo.prototype.getMajorTickCoords=function(){for(var e=[],i=0;i<=this._majorTickCount;i++){var n=i*this._majorIncrement+this.getMinLabel();if(n-this._maxValue>t.DataAxisInfo._MAJOR_TICK_INCREMENT_BUFFER)break;if(!this.Options._skipHighestTick||n!=this._maxValue){var o=this._getUnboundedCoordAt(n);e.push(o)}}return e},t.DataAxisInfo.prototype.getMinorTickCoords=function(){for(var e=[],i=-1;i<=this._majorTickCount;i++){var n=i*this._majorIncrement+this.getMinLabel();if(this._isLog&&1==this._majorIncrement&&1==this._minorIncrement)for(var o=2;o<=9;o++){var s=n+t.Math.log10(o);if(s>this._maxValue)break;s<this._minValue||(a=this._getUnboundedCoordAt(s),e.push(a))}else for(o=1;o<this._minorTickCount;o++){var r=n+o*this._minorIncrement;if(r>this._maxValue)break;if(!(r<this._minValue)){var a=this._getUnboundedCoordAt(r);e.push(a)}}}return e},t.DataAxisInfo.prototype.getBaselineCoord=function(){return this._isLog?this._minCoord:this.getBoundedCoordAt(0)},t.DataAxisInfo.prototype.getUnboundedValueAt=function(t){if(null==t)return null;var e=(t-this._minCoord)/(this._maxCoord-this._minCoord),i=this._minValue+e*(this._maxValue-this._minValue);return this.linearToActual(i)},t.DataAxisInfo.prototype.getUnboundedCoordAt=function(t){return this._getUnboundedCoordAt(this.actualToLinear(t))},t.DataAxisInfo.prototype._getUnboundedCoordAt=function(t){if(null==t)return null;var e=this._maxValue==this._minValue?0:(t-this._minValue)/(this._maxValue-this._minValue);return e=Math.max(Math.min(1e3,e),-1e3),this._minCoord+e*(this._maxCoord-this._minCoord)},t.DataAxisInfo.prototype._formatValue=function(e){if(!this._converter||!this._converter.getAsString&&!this._converter.format){if(this._axisValueFormatter)return this._axisValueFormatter.format(e);var i=t.Math.log10(this._majorIncrement),n=Math.max(Math.ceil(-i),0);return e.toFixed(n)}return this._axisValueFormatter?this._axisValueFormatter.format(e,this._converter):this._converter.getAsString?this._converter.getAsString(e):this._converter.format?this._converter.format(e):void 0},t.DataAxisInfo.prototype._calcMajorMinorIncr=function(e){this._majorIncrement||(this._majorTickCount?this._majorIncrement=(this._maxValue-this._minValue)/this._majorTickCount:this._majorIncrement=Math.max(e,this._minMajorIncrement)),this._majorTickCount||(this._majorTickCount=(this._maxValue-this._minValue)/this._majorIncrement,Math.ceil(this._majorTickCount)-this._majorTickCount<t.DataAxisInfo._MAJOR_TICK_INCREMENT_BUFFER&&(this._majorTickCount=Math.ceil(this._majorTickCount))),this._minorTickCount||(this._minorIncrement?this._minorTickCount=this._majorIncrement/this._minorIncrement:this._isLog?this._minorTickCount=this._majorIncrement:this._minorTickCount=t.DataAxisInfo._MINOR_TICK_COUNT),this._minorIncrement||(this._minorIncrement=this._majorIncrement/this._minorTickCount)},t.DataAxisInfo.prototype._calcAxisExtents=function(){var e="on"==this.Options._continuousExtent;this._zeroBaseline&&(this._dataMin=Math.min(0,this._dataMin),this._dataMax=Math.max(0,this._dataMax));var i=this._calcAxisScale(null!=this._globalMin?this._globalMin:this._dataMin,null!=this._globalMax?this._globalMax:this._dataMax);i=Math.max(i,this._minMajorIncrement),this._dataMin==this._dataMax&&(0==this._dataMin?this._dataMax+=5*i:(this._dataMin-=2*i,this._dataMax+=2*i)),null==this._globalMin&&(this._zeroBaseline&&this._dataMin>=0?this._globalMin=0:e?this._globalMin=this._dataMin-.1*(this._dataMax-this._dataMin):this._zeroBaseline||null==this._globalMax?this._globalMin=(Math.ceil(this._dataMin/i)-1)*i:(this._globalMin=this._globalMax,this._globalMin-=i*(Math.floor((this._globalMin-this._dataMin)/i)+1)),this._dataMin>=0&&(this._globalMin=Math.max(this._globalMin,0))),null==this._globalMax&&(this._majorTickCount?this._globalMax=this._globalMin+this._majorTickCount*i:this._zeroBaseline&&this._dataMax<=0?this._globalMax=0:e?this._globalMax=this._dataMax+.1*(this._dataMax-this._dataMin):this._zeroBaseline?this._globalMax=(Math.floor(this._dataMax/i)+1)*i:(this._globalMax=this._globalMin,this._globalMax+=i*(Math.floor((this._dataMax-this._globalMax)/i)+1)),this._dataMax<=0&&(this._globalMax=Math.min(this._globalMax,0))),this._globalMax==this._globalMin&&(this._globalMax=100,this._globalMin=0,i=(this._globalMax-this._globalMin)/t.DataAxisInfo._MAX_NUMBER_OF_GRIDS_AUTO),null==this._minValue&&(this._minValue=this._globalMin),null==this._maxValue&&(this._maxValue=this._globalMax),this._minValue==this._globalMin&&this._maxValue==this._globalMax||(i=this._calcAxisScale(this._minValue,this._maxValue)),this._globalMin>this._minValue&&(this._globalMin=this._minValue),this._globalMax<this._maxValue&&(this._globalMax=this._maxValue),this._calcMajorMinorIncr(i)},t.DataAxisInfo.prototype._calcAxisScale=function(e,i){if(this._majorIncrement)return this._majorIncrement;var n=i-e;if(this._isLog){var o=Math.floor(n/8)+1;return(!this._logScaleUnit||this._logScaleUnit<o)&&(this._logScaleUnit=o),this._logScaleUnit}if(0==n)return 0==e?10:Math.pow(10,Math.floor(t.Math.log10(e))-1);if(this._majorTickCount){var s=n/this._majorTickCount,r=s/(l=Math.pow(10,Math.ceil(t.Math.log10(s)-1)));return(r=r>1&&r<=1.5?1.5:r>5?10:Math.ceil(r))*l}var a=t.Math.log10(n),l=Math.pow(10,Math.ceil(a)-2),h=Math.round(n/l);return(h>=10&&h<=14?2:h>=15&&h<=19?3:h>=20&&h<=24?4:h>=25&&h<=45?5:h>=46&&h<=80?10:20)*l},t.DataAxisInfo.prototype.getMajorTickCount=function(){return this._majorTickCount},t.DataAxisInfo.prototype.getMinorTickCount=function(){return this._minorTickCount},t.DataAxisInfo.prototype.getMajorIncrement=function(){return this.linearToActual(this._majorIncrement)},t.DataAxisInfo.prototype.getMinorIncrement=function(){return this.linearToActual(this._minorIncrement)},t.DataAxisInfo.prototype.getMinimumExtent=function(){return(this._globalMax-this._globalMin)/t.DataAxisInfo._MAX_ZOOM_FACTOR},t.DataAxisInfo.prototype.getStartOverflow=function(){return"top"!=this.Position&&"bottom"!=this.Position||!t.Agent.isRightToLeft(this.getCtx())?this.StartOverflow:this.EndOverflow},t.DataAxisInfo.prototype.getEndOverflow=function(){return"top"!=this.Position&&"bottom"!=this.Position||!t.Agent.isRightToLeft(this.getCtx())?this.EndOverflow:this.StartOverflow},t.DataAxisInfo.prototype.linearToActual=function(t){return null==t?null:this._isLog?Math.pow(10,t):t},t.DataAxisInfo.prototype.actualToLinear=function(e){return null==e?null:this._isLog?e>0?t.Math.log10(e):null:e},t.DataAxisInfo.prototype.alignLogScaleToTickCount=function(t,e){if(this._isLog)for(var i=this.getMajorTickCount();e<i;)this._majorIncrement=null,this._majorTickCount=null,this._minorIncrement=null,this._minorTickCount=null,t++,this._calcMajorMinorIncr(t),i=this.getMajorTickCount();return t},t.DataAxisInfo.prototype.getLogScaleUnit=function(){return this._logScaleUnit},t.GroupAxisInfo=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.GroupAxisInfo,t.AxisInfo),t.GroupAxisInfo._MAX_LINE_WRAP=3,t.GroupAxisInfo._ROTATE_THRESHOLD=12,t.GroupAxisInfo.prototype.Init=function(e,i,o){t.GroupAxisInfo.superclass.Init.call(this,e,i,o);var s=t.Agent.isRightToLeft(e),a="top"==this.Position||"bottom"==this.Position;if(a&&s){var l=this.StartCoord;this.StartCoord=this.EndCoord,this.EndCoord=l}this._levelsArray=[],this._groupCount=this._generateLevelsArray(i.groups,0,this._levelsArray,0),this._numLevels=this._levelsArray.length,this._areSeparatorsRendered="off"!=i.groupSeparators.rendered,this._separatorColor=i.groupSeparators.color,this._lastRenderedLevel=null,this._drilling=i.drilling;var h=i.endGroupOffset>0?Number(i.endGroupOffset):0,u=i.startGroupOffset>0?Number(i.startGroupOffset):0;this.DataMin=0,this.DataMax=this._groupCount-1,this.GlobalMin=null==i.min?this.DataMin-u:i.min,this.GlobalMax=null==i.max?this.DataMax+h:i.max;var g=this.getGroupIndex(i.viewportStartGroup),f=this.getGroupIndex(i.viewportEndGroup);-1!=g&&(this.MinValue=g-u),-1!=f&&(this.MaxValue=f+h),null!=i.viewportMin&&(this.MinValue=i.viewportMin),null!=i.viewportMax&&(this.MaxValue=i.viewportMax),null==this.MinValue&&(this.MinValue=this.GlobalMin),null==this.MaxValue&&(this.MaxValue=this.GlobalMax),this.GlobalMin>this.MinValue&&(this.GlobalMin=this.MinValue),this.GlobalMax<this.MaxValue&&(this.GlobalMax=this.MaxValue),this._groupWidthRatios=i._groupWidthRatios,this._processGroupWidthRatios(),this._startBuffer=s?i.rightBuffer:i.leftBuffer,this._endBuffer=s?i.leftBuffer:i.rightBuffer,this._isLabelRotated=[];for(var _=0;_<this._numLevels;_++)this._isLabelRotated.push(!1);if(this._renderGridAtLabels=i._renderGridAtLabels,this._labels=null,this._maxSpace=a?o.h:o.w,"off"!=i.rendered){var p=r.getTitleHeight(e,i,a?o.w:o.h,a?o.h:o.w);this._maxSpace-=0!=p?p+n.getGapSize(e,i,i.layout.titleGap):0}this._maxLineWrap=t.GroupAxisInfo._MAX_LINE_WRAP},t.GroupAxisInfo.prototype._processGroupWidthRatios=function(){if(!this._groupWidthRatios||this._groupWidthRatios.length<2)this._groupWidthRatios=null;else{for(var e,i,n=0,o=0;o<this._groupCount;o++)e=0==o?this.MinValue:Math.max(o-.5,this.MinValue),(i=o==this._groupCount-1?this.MaxValue:Math.min(o+.5,this.MaxValue))>e&&(n+=(i-e)*this._groupWidthRatios[o]);var s=this.EndCoord-this.StartCoord;this._groupWidths=t.ArrayUtils.map(this._groupWidthRatios,function(t){return t*s/n}),this._borderValues=[];for(o=0;o<this._groupWidthRatios.length-1;o++)this._borderValues.push(o+.5);this._borderCoords=[];var r=Math.min(Math.max(Math.round(this.MinValue),0),this._borderValues.length-1);this._borderCoords[r]=this.StartCoord+(this._borderValues[r]-this.MinValue)*this._groupWidths[r];for(o=r+1;o<this._borderValues.length;o++)this._borderCoords[o]=this._borderCoords[o-1]+this._groupWidths[o];for(o=r-1;o>=0;o--)this._borderCoords[o]=this._borderCoords[o+1]-this._groupWidths[o+1]}},t.GroupAxisInfo.prototype._rotateLabels=function(e,i,n,o){var s,a,l=this.getCtx(),h=t.Agent.isRightToLeft(l),u=this._numLevels>1;null==o&&(o=this._numLevels-1),this._isLabelRotated[o]=!0,u||this._setOverflow(n,n,e);for(var g=0;g<e.length;g++)if(null!=(s=e[g])){if(a=s.getX(),s instanceof t.MultilineText||s instanceof t.BackgroundMultilineText){var f=this.getGroupWidth()*(this.getEndIndex(g,o)-this.getStartIndex(g,o)+1);2*s.getLineHeight()<f&&this._maxSpace>0?s.wrapText(this._maxSpace,s.getLineHeight()*t.GroupAxisInfo._MAX_LINE_WRAP,1):s.setWrapEnabled(!1)}s.setX(0),s.setY(0),h?s.setRotation(Math.PI/2):s.setRotation(3*Math.PI/2),s.setTranslateX(a)}var _=this.GetLabelDims(e,i,o);r.isWrapEnabled(this.Options.tickLabel.style)&&this._maxSpace>0&&(this._sanitizeWrappedText(l,_,e,!0,u)&&(_=this.GetLabelDims(e,i,o)));return this.SkipLabels(e,_)},t.GroupAxisInfo.prototype._sanitizeWrappedText=function(e,i,o,s,r){for(var a=this._calculateMaxWrap(i,o,s),l=0,h=0;h<o.length;h++){var u=o[h];if(u){var g=u instanceof t.MultilineText||u instanceof t.BackgroundMultilineText;a&&g&&u.isWrapEnabled()&&u.wrapText(this._maxSpace,u.getLineHeight()*this._maxLineWrap,1),r&&(l=Math.max(l,u.getDimensions().w)),u.alignMiddle()}}if(r){var f=s?this.Options.layout.hierarchicalLabelGapHeight:this.Options.layout.hierarchicalLabelGapWidth;this._maxSpace-=l+n.getGapSize(e,this.Options,f)}return a},t.GroupAxisInfo.prototype._calculateMaxWrap=function(e,i,n){for(var o=!1;this.IsOverlapping(e,0)&&this._maxLineWrap>1;){o=!0;for(var s=0;s<i.length;s++){var r=i[s];if((r instanceof t.MultilineText||r instanceof t.BackgroundMultilineText)&&r.getLineCount()==this._maxLineWrap){var a=r.getLineHeight();n?e[s].w-=a:(e[s].y+=.5*a,e[s].h-=a)}}this._maxLineWrap--}return o},t.GroupAxisInfo.prototype.isLabelRotated=function(t){return null==t&&(t=this._numLevels-1),this._isLabelRotated[t]},t.GroupAxisInfo.prototype._setOverflow=function(e,i,n){e=Math.max(e-this._startBuffer,0),i=Math.max(i-this._endBuffer,0);var o=t.Agent.isRightToLeft(this.getCtx());this.StartCoord+=(e-this.StartOverflow)*(o?-1:1),this.EndCoord-=(i-this.EndOverflow)*(o?-1:1),this._processGroupWidthRatios();for(var s=0;s<this._numLevels;s++){n=this._labels[s];for(var r=0;r<n.length;r++){var a=n[r];if(a){var l=this._getLabelCoord(s,this.getLabelIndex(a));a.setX(l)}}}this.StartOverflow=e,this.EndOverflow=i},t.GroupAxisInfo.prototype.getLabels=function(t,e){return null==e&&(e=this._numLevels-1),this._labels||this._generateLabels(t),this._labels[e]},t.GroupAxisInfo.prototype._getLabelCoord=function(t,e){var i=this.getStartIndex(e,t),n=this.getEndIndex(e,t);if(null==i||null==n)return null;i<this.MinValue&&n>this.MinValue&&(i=this.MinValue),n>this.MaxValue&&i<this.MaxValue&&(n=this.MaxValue);var o=n?i+(n-i)/2:i;return this.getCoordAt(o)},t.GroupAxisInfo.prototype._generateLabels=function(e){var i=[];this._labels=[];for(var o,s,a,l,h,u=e.getStage(),g="top"==this.Position||"bottom"==this.Position,f=t.Agent.isRightToLeft(e),_=this._numLevels>1,p=this.getGroupWidth(),c=this._maxSpace,d=g?"hierarchicalLabelGapHeight":"hierarchicalLabelGapWidth",x=_?n.getGapSize(e,this.Options,this.Options.layout[d]):0,I="auto"==this.Options.tickLabel.rotation&&g,m=this.isAutoRotate(),A=this.Options.tickLabel.style,M=r.isWrapEnabled(this.Options.tickLabel.style)&&"tangential"!=this.Position&&p>t.TextUtils.getTextStringHeight(e,A),T=0;T<this._numLevels;T++){for(var v=this._levelsArray[T],b=m?this.getSkipIncrement():1,L=0;L<v.length;L+=b)if(v[L]){if(""===(o=this.getLabelAt(L,T))||!o&&0!=o){i.push(null);continue}var S=this._getLabelCoord(T,L);if(null!=S){l=this.getLabelStyleAt(L,T);var C=!m&&M&&"number"!=typeof o&&o.indexOf(" ")>=0;h=this.CreateLabel(e,o,S,l,C);var y=p*(this.getEndIndex(L,T)-this.getStartIndex(L,T)+1);C&&this._isTextWrapNeeded(e,o,l,I,g?y:c)&&c>0?g?h.wrapText(y,c,1,!0):h.wrapText(c,h.getLineHeight()*this._maxLineWrap,1,!1):C&&(!g||c<0)&&h.setWrapEnabled(!1),h._index=L,i.push(h),s||0!=T||(s=h),0==T&&(a=h)}else i.push(null)}else i.push(null);if(M&&_){for(var O=0,E=0;E<i.length;E++)if(i[E]){var D=i[E].getDimensions();O=Math.max(O,g?D.h:D.w)}c-=O+x}this._labels.push(i),i=[]}i=this._labels[this._numLevels-1];var G=[];if(s){if("tangential"==this.Position)return G=this.GetLabelDims(i,u),void(this._labels[0]=this.SkipTangentialLabels(i,G));var R=s.getDimensions();if(g){var w,V;if(null!=this.Options._startOverflow&&null!=this.Options._endOverflow)w=this.Options._startOverflow,V=this.Options._endOverflow;else{var k=a.getDimensions();w=f?R.w+R.x-this.StartCoord:this.StartCoord-R.x,V=f?this.EndCoord-k.x:k.w+k.x-this.EndCoord}!m&&(w>this._startBuffer||V>this._endBuffer)&&this._setOverflow(w,V,i)}for(T=0;T<this._numLevels;T++)if(i=this._labels[T],m)this._labels[T]=this._rotateLabels(i,u,R.h/2,T);else{G=this.GetLabelDims(i,u,T);var F=this.IsOverlapping(G,0);if(F||(this._labels[T]=i),g)if(I){if(F)this._labels[T]=this._rotateLabels(i,u,R.h/2,T);else if(this._labels[T]=i,_){var U=0;for(E=0;E<G.length;E++)G[E]&&(U=Math.max(U,G[E].h));this._maxSpace-=U+x}}else G=this.GetLabelDims(i,u),this._labels[T]=this.SkipLabels(i,G);else{if(M)this._sanitizeWrappedText(e,G,i,!1,_)&&(G=this.GetLabelDims(i,u,T));this._labels[T]=this.SkipLabels(i,G)}}}},t.GroupAxisInfo.prototype.getMajorTickCoords=function(){for(var t,e=[],i="tangential"==this.Position?this.getGroupCount():this.getGroupCount()-1,n=0;n<this._levelsArray[0].length;n++)if(this._levelsArray[0][n]){var o=this.getStartIndex(n,0),s=this.getEndIndex(n,0);null!=(t=this._renderGridAtLabels?this.getCoordAt(o+.5*(s-o)):s+.5<i?this.getCoordAt(s+.5):null)&&e.push(t)}return e},t.GroupAxisInfo.prototype.getMinorTickCoords=function(){var t,e=[];if(!this._levelsArray[1])return e;for(var i=0;i<this._levelsArray[1].length;i++)if(this._levelsArray[1][i]){var n=this.getStartIndex(i,1),o=this.getEndIndex(i,1);null!=(t=this._renderGridAtLabels?this.getCoordAt(n+.5*(o-n)):o+.5<this.getGroupCount()-1?this.getCoordAt(o+.5):null)&&e.push(t)}return e},t.GroupAxisInfo.prototype.getUnboundedValueAt=function(t){if(null==t)return null;if(this._groupWidthRatios){for(var e=this._borderCoords.length,i=0;i<this._borderCoords.length;i++)if(t<=this._borderCoords[i]){e=i;break}return 0==e?this._borderValues[0]-(this._borderCoords[0]-t)/this._groupWidths[0]:this._borderValues[e-1]+(t-this._borderCoords[e-1])/this._groupWidths[e]}var n=(this.EndCoord-this.StartCoord)/(this.MaxValue-this.MinValue);return this.MinValue+(t-this.StartCoord)/n},t.GroupAxisInfo.prototype.getUnboundedCoordAt=function(t){if(null==t)return null;if(this._groupWidthRatios){for(var e=this._borderValues.length,i=0;i<this._borderValues.length;i++)if(t<=this._borderValues[i]){e=i;break}return 0==e?this._borderCoords[0]-this._groupWidths[0]*(this._borderValues[0]-t):this._borderCoords[e-1]+this._groupWidths[e]*(t-this._borderValues[e-1])}var n=(this.EndCoord-this.StartCoord)/(this.MaxValue-this.MinValue);return this.StartCoord+(t-this.MinValue)*n},t.GroupAxisInfo.prototype.getLabelAt=function(t,e){if(null==e&&(e=this._numLevels-1),(t=Math.round(t))<0)return null;var i=this._levelsArray[e]&&this._levelsArray[e][t]?this._levelsArray[e][t].item:null;return i&&(i.name?i=i.name:null!=i.id&&(i="")),i},t.GroupAxisInfo.prototype.getGroupAt=function(t,e){if(null==e&&(e=this._numLevels-1),(t=Math.round(t))<0)return null;var i=this._levelsArray[e]&&this._levelsArray[e][t]?this._levelsArray[e][t].item:null;if(i){if(i.id)return i.id;if(i.name||""===i.name)return i.name}return i},t.GroupAxisInfo.prototype.getLabelStyleAt=function(e,i){var n=this._getGroupAttribute(e,i,"labelStyle");if(n){var o=new t.CSSStyle(n);return o.getStyle("font-size")||o.setStyle("font-size",this.Options.tickLabel.style.getStyle("font-size")),o}return null},t.GroupAxisInfo.prototype.getDatatip=function(t,e){return this._getGroupAttribute(t,e,"shortDesc")},t.GroupAxisInfo.prototype.getAction=function(t,e){return this._getGroupAttribute(t,e,"action")},t.GroupAxisInfo.prototype.isDrillable=function(t,e){var i=this._getGroupAttribute(t,e,"drilling");return"on"==i||"off"!=i&&("on"==this._drilling||"groupsOnly"==this._drilling)},t.GroupAxisInfo.prototype.getGroup=function(t,e){if(t<0||t>this.getGroupCount()-1)return null;if(1==this._numLevels)return this.getGroupAt(t);var i=[];null==e&&(e=this._numLevels-1);for(var n=this.getStartIndex(t,e),o=0;o<=e;o++)for(var s=this._levelsArray[o],r=0;r<s.length;r++)this.getStartIndex(r,o)<=n&&this.getEndIndex(r,o)>=n&&i.push(this.getGroupAt(r,o));return i.length>0?1==i.length?i[0]:i:null},t.GroupAxisInfo.prototype.getLabelBackground=function(e,i,n){null==n&&(n=this._numLevels-1);var o=e.getCSSStyle();if(o){var s=o.getStyle(t.CSSStyle.BACKGROUND_COLOR),r=o.getStyle(t.CSSStyle.BORDER_COLOR),a=o.getStyle(t.CSSStyle.BORDER_WIDTH),l=o.getStyle(t.CSSStyle.BORDER_RADIUS);if(null!=s||null!=r||null!=a||null!=l){var h=e.getDimensions(),u=.15*h.h;(t.Agent.isBrowserChrome()||t.Agent.isPlatformIE())&&e.getVertAlignment()===t.OutputText.V_ALIGN_BOTTOM&&(h.y+=h.h/2);var g=new t.Rect(i,h.x-u,h.y,h.w+2*u,h.h),f=new t.CSSStyle;return null!=s?f.setStyle(t.CSSStyle.BACKGROUND_COLOR,s):g.setInvisibleFill(),f.setStyle(t.CSSStyle.BORDER_COLOR,r),f.setStyle(t.CSSStyle.BORDER_WIDTH,a),f.setStyle(t.CSSStyle.BORDER_RADIUS,l),g.setCSSStyle(f),this._isLabelRotated[n]&&g.setMatrix(e.getMatrix()),g.setMouseEnabled(!1),g}return null}return null},t.GroupAxisInfo.prototype.getGroupIndex=function(e){if(null==e)return-1;for(var i=-1,n=0;n<this._groupCount;n++){var o=this.getGroup(n);if(e instanceof Array&&o instanceof Array?t.ArrayUtils.equals(e,o):e==o){i=n;break}}return i},t.GroupAxisInfo.prototype.getMinimumExtent=function(){return 1},t.GroupAxisInfo.prototype.getGroupWidth=function(){return Math.abs(this.EndCoord-this.StartCoord)/Math.abs(this.MaxValue-this.MinValue)},t.GroupAxisInfo.prototype.getGroupCount=function(){return this._groupCount},t.GroupAxisInfo.prototype.getNumLevels=function(){return this._numLevels},t.GroupAxisInfo.prototype._generateLevelsArray=function(t,e,i,n){for(var o=0;o<t.length;o++)if(i[e]||(i[e]=[]),i[e].push({item:t[o],start:n,end:n,position:o}),t[o]&&t[o].groups){var s=i[e].length-1,r=this._generateLevelsArray(t[o].groups,e+1,i,i[e][s].start);n!=r?(i[e][s].end=r-1,n=r):n++}else n++;return n},t.GroupAxisInfo.prototype._getGroupAttribute=function(t,e,i){null==e&&(e=this._numLevels-1);var n=this._levelsArray[e]&&this._levelsArray[e][t]?this._levelsArray[e][t].item:null;return n?n[i]:null},t.GroupAxisInfo.prototype.areSeparatorsRendered=function(){return this._areSeparatorsRendered},t.GroupAxisInfo.prototype.getSeparatorColor=function(){return this._separatorColor},t.GroupAxisInfo.prototype.getStartIndex=function(t,e){return null==e&&(e=this._numLevels-1),this._levelsArray[e]&&this._levelsArray[e][t]?this._levelsArray[e][t].start:null},t.GroupAxisInfo.prototype.getEndIndex=function(t,e){return null==e&&(e=this._numLevels-1),this._levelsArray[e]&&this._levelsArray[e][t]?this._levelsArray[e][t].end:null},t.GroupAxisInfo.prototype.getPosition=function(t,e){return null==e&&(e=this._numLevels-1),this._levelsArray[e]&&this._levelsArray[e][t]?this._levelsArray[e][t].position:null},t.GroupAxisInfo.prototype.isRenderGridAtLabels=function(){return this._renderGridAtLabels},t.GroupAxisInfo.prototype.setLastRenderedLevel=function(t){this._lastRenderedLevel=t},t.GroupAxisInfo.prototype.getLastRenderedLevel=function(){return this._lastRenderedLevel},t.GroupAxisInfo.prototype.getSeparatorStartLevel=function(){for(var t=this._lastRenderedLevel,e=this._lastRenderedLevel-1;e>=0;e--)this._labels[e].length!=this._levelsArray[e].length&&(t=e);return t},t.GroupAxisInfo.prototype.getLabelIndex=function(t){return t._index>=0?t._index:null},t.GroupAxisInfo.prototype.getMaxLineWrap=function(){return this._maxLineWrap},t.GroupAxisInfo.prototype._isTextWrapNeeded=function(e,i,n,o,s){var r=t.TextUtils.getTextStringWidth(e,i,n);return r>=s&&(r/this._maxLineWrap<s||!o)},t.GroupAxisInfo.prototype.isAutoRotate=function(){var e="top"==this.Position||"bottom"==this.Position,i=this._numLevels>1,n=this.getGroupWidth(),o="auto"==this.Options.tickLabel.rotation&&e;return!i&&o&&n<t.GroupAxisInfo._ROTATE_THRESHOLD},t.GroupAxisInfo.prototype.getSkipIncrement=function(){var e=1;return e=t.GroupAxisInfo._ROTATE_THRESHOLD/(2*this.getGroupWidth()),this.Options._duringZoomAndScroll&&(e*=4),Math.max(1,Math.floor(e))};var a=function(t,e,i,n,o,s,r,a){this.Init(t,e,i,n,o,s,r,a)};t.Obj.createSubclass(a,t.SimpleObjPeer),a.prototype.Init=function(e,i,n,o,s,r,l,h){a.superclass.Init.call(this,r,l,null,h),this._axis=e,this._label=i,this._group=n,this._action=o,this._drillable=s,(this._action||this._drillable)&&i.setCursor(t.SelectionEffectUtils.getSelectingCursor()),e.__registerObject(this)},a.prototype.getLabel=function(){return this._label},a.prototype.getId=function(){return this._group},a.prototype.getAction=function(){return this._action},a.prototype.isDrillable=function(){return this._drillable},a.prototype.getGroup=function(){return this._group},a.prototype.getNextNavigable=function(e){if(e.type==t.MouseEvent.CLICK)return this;var i=this._axis.__getKeyboardObjects();return t.KeyboardHandler.getNextNavigable(this,e,i,!1,this._axis.getCtx().getStage())},a.prototype.getKeyboardBoundingBox=function(e){return this._label?this._label.getDimensions(e):new t.Rectangle(0,0,0,0)},a.prototype.getDisplayable=function(){return this._label},a.prototype.getTargetElem=function(){return this._label?this._label.getElem():null},a.prototype.showKeyboardFocusEffect=function(){if(this._isShowingKeyboardFocusEffect=!0,this._label){var e=this.getKeyboardBoundingBox();this._overlayRect=new t.Rect(this._axis.getCtx(),e.x,e.y,e.w,e.h),this._overlayRect.setSolidStroke(t.Agent.getFocusColor()),this._overlayRect.setInvisibleFill(),this._overlayRect.setMatrix(this._label.getMatrix()),this._axis.addChild(this._overlayRect)}},a.prototype.hideKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!1,this._label&&(this._axis.removeChild(this._overlayRect),this._overlayRect=null)},a.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect},a.prototype.getAriaLabel=function(){var e;return this.isDrillable()&&(e=[t.Bundle.getTranslation(this._axis.getOptions(),"stateDrillable",t.Bundle.UTIL_PREFIX,"STATE_DRILLABLE")]),null!=this.getDatatip()?t.Displayable.generateAriaLabel(this.getDatatip(),e):null!=e?t.Displayable.generateAriaLabel(this.getLabel().getTextString(),e):void 0},a.prototype.isDragAvailable=function(t){return!0},a.prototype.getDragTransferable=function(t,e){return[this.getId()]},a.prototype.getDragFeedback=function(t,e){return[this.getDisplayable()]},t.LinearScaleAxisValueFormatter=function(t,e,i,n,o,s){this.Init(t,e,i,n,o,s)},t.Obj.createSubclass(t.LinearScaleAxisValueFormatter,t.Obj),t.LinearScaleAxisValueFormatter.SCALE_NONE="none",t.LinearScaleAxisValueFormatter.SCALE_AUTO="auto",t.LinearScaleAxisValueFormatter.SCALE_THOUSAND="thousand",t.LinearScaleAxisValueFormatter.SCALE_MILLION="million",t.LinearScaleAxisValueFormatter.SCALE_BILLION="billion",t.LinearScaleAxisValueFormatter.SCALE_TRILLION="trillion",t.LinearScaleAxisValueFormatter.SCALE_QUADRILLION="quadrillion",t.LinearScaleAxisValueFormatter.SCALING_FACTOR_DIFFERENCE=3,t.LinearScaleAxisValueFormatter.prototype.Init=function(t,e,i,n,o,s){this._context=t,this._scales={},this._scalesOrder=[],this._factorToScaleMapping={},this.InitScales(),this.InitFormatter(e,i,n,o,s)},t.LinearScaleAxisValueFormatter.prototype.InitScales=function(){var e=function(e,i,n){var o;n&&(o=t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,n));var s={scaleFactor:i,localizedSuffix:o};this._scales[e]=s,this._scalesOrder.push(s),this._factorToScaleMapping[i]=s},i=t.LinearScaleAxisValueFormatter.SCALING_FACTOR_DIFFERENCE;e.call(this,t.LinearScaleAxisValueFormatter.SCALE_NONE,0*i),e.call(this,t.LinearScaleAxisValueFormatter.SCALE_THOUSAND,1*i,"SCALING_SUFFIX_THOUSAND"),e.call(this,t.LinearScaleAxisValueFormatter.SCALE_MILLION,2*i,"SCALING_SUFFIX_MILLION"),e.call(this,t.LinearScaleAxisValueFormatter.SCALE_BILLION,3*i,"SCALING_SUFFIX_BILLION"),e.call(this,t.LinearScaleAxisValueFormatter.SCALE_TRILLION,4*i,"SCALING_SUFFIX_TRILLION"),e.call(this,t.LinearScaleAxisValueFormatter.SCALE_QUADRILLION,5*i,"SCALING_SUFFIX_QUADRILLION"),this._scalesOrder.sort(function(t,e){return t.scaleFactor<e.scaleFactor?-1:t.scaleFactor>e.scaleFactor?1:0})},t.LinearScaleAxisValueFormatter.prototype.InitFormatter=function(t,e,i,n,o){var s,r,a=!1,l=!1;if("off"!==o&&(l=!0),"number"!=typeof(r=this._getScaleFactor(n))&&(a=!0),a){var h=Math.max(Math.abs(t),Math.abs(e)),u=this._getPowerOfTen(h);r=this._findNearestLEScaleFactor(u)}if(!0===l)if(0==i&&t==e){var g=r-this._getPowerOfTen(e);s=g<=0?Math.max(g+3,0):Math.max(g,4)}else{var f=this._getPowerOfTen(i);s=Math.max(r-f,0)}this._useAutoPrecision=l,this._scaleFactor=r,this._decimalPlaces=s},t.LinearScaleAxisValueFormatter.prototype._findNearestLEScaleFactor=function(t){var e=0;if(t<=this._scalesOrder[0].scaleFactor)e=this._scalesOrder[0].scaleFactor;else if(t>=this._scalesOrder[this._scalesOrder.length-1].scaleFactor)e=this._scalesOrder[this._scalesOrder.length-1].scaleFactor;else for(var i=this._scalesOrder.length-1;i>=0;i--)if(this._scalesOrder[i].scaleFactor<=t){e=this._scalesOrder[i].scaleFactor;break}return e},t.LinearScaleAxisValueFormatter.prototype._getScaleFactor=function(e){e||(e=t.LinearScaleAxisValueFormatter.SCALE_AUTO);var i,n=this._scales[e];return n&&(i=n.scaleFactor),i},t.LinearScaleAxisValueFormatter.prototype.format=function(t,e){var i=null!=t?parseFloat(t):t;if("number"==typeof i){var n;if(this._scaleFactor>0){for(var o=0;o<this._scaleFactor;o++)i/=10;n=this._factorToScaleMapping[this._scaleFactor].localizedSuffix}if(e&&e.getAsString)i=e.getAsString(i);else if(e&&e.format)i=e.format(i);else{var s=this._context.getNumberConverter({minimumFractionDigits:this._decimalPlaces,maximumFractionDigits:this._decimalPlaces});s&&s.format?i=s.format(i):this._useAutoPrecision&&(i=parseFloat(new Number(i).toFixed(this._decimalPlaces)),i=this._formatFraction(i))}return"string"==typeof n&&0!=t&&(i+=n),i}return t},t.LinearScaleAxisValueFormatter.prototype._formatFraction=function(e){var i=e.toString();if(-1!=i.indexOf("e"))return i;var n;if(n=t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"NUMBER_FORMAT_DECIMAL_SEPARATOR"),this._decimalPlaces>0){-1==i.indexOf(".")?i+=n:i=i.replace(".",n);for(var o=i.substring(i.indexOf(n)+1).length;o<this._decimalPlaces;)i+="0",o++}return i},t.LinearScaleAxisValueFormatter.prototype._getPowerOfTen=function(t){var e=0;if((t=t>=0?t:-t)<1e-15)return 0;if(t==1/0)return Number.MAX_VALUE;if(t>=10)for(;t>=10;)e+=1,t/=10;else if(t<1)for(;t<1;)e-=1,t*=10;return e},t.TimeAxisInfo=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.TimeAxisInfo,t.AxisInfo),t.TimeAxisInfo.TIME_SECOND=1e3,t.TimeAxisInfo.TIME_MINUTE=60*t.TimeAxisInfo.TIME_SECOND,t.TimeAxisInfo.TIME_HOUR=60*t.TimeAxisInfo.TIME_MINUTE,t.TimeAxisInfo.TIME_DAY=24*t.TimeAxisInfo.TIME_HOUR,t.TimeAxisInfo.TIME_MONTH_MIN=28*t.TimeAxisInfo.TIME_DAY,t.TimeAxisInfo.TIME_MONTH_MAX=31*t.TimeAxisInfo.TIME_DAY,t.TimeAxisInfo.TIME_YEAR_MIN=365*t.TimeAxisInfo.TIME_DAY,t.TimeAxisInfo.TIME_YEAR_MAX=366*t.TimeAxisInfo.TIME_DAY,t.TimeAxisInfo.prototype.Init=function(e,i,n){t.TimeAxisInfo.superclass.Init.call(this,e,i,n),"top"==this.Position||"bottom"==this.Position?(i._isOverview||"on"!=i.tickLabel.rendered||(this.StartOverflow=Math.max(t.Axis.MINIMUM_AXIS_BUFFER-i.leftBuffer,0),this.EndOverflow=Math.max(t.Axis.MINIMUM_AXIS_BUFFER-i.rightBuffer,0)),t.Agent.isRightToLeft(e)?(this._startCoord=this.EndCoord-this.EndOverflow,this._endCoord=this.StartCoord+this.StartOverflow):(this._startCoord=this.StartCoord+this.StartOverflow,this._endCoord=this.EndCoord-this.EndOverflow)):(this._startCoord=this.StartCoord,this._endCoord=this.EndCoord);var o=null!=i.tickLabel?i.tickLabel.converter:null;this._label1Converter=o&&o[0]?o[0]:o,this._label2Converter=o&&o[1]?o[1]:null,this._dateToIsoWithTimeZoneConverter=e.getLocaleHelpers().dateToIsoWithTimeZoneConverter,this._groups=i.groups;var s=i.timeAxisType;this._skipGaps="skipGaps"==s,this._mixedFrequency="mixedFrequency"==s,this.DataMin=i.dataMin,this.DataMax=i.dataMax,this._groups.length>1?this._averageInterval=(this.DataMax-this.DataMin)/(this._groups.length-1):this.DataMax-this.DataMin>0?this._averageInterval=this.DataMax-this.DataMin:this._averageInterval=6*t.TimeAxisInfo.TIME_MINUTE,this._step=i.step;var r=i.endGroupOffset>0?i.endGroupOffset*this._averageInterval:0,a=i.startGroupOffset>0?i.startGroupOffset*this._averageInterval:0;this.GlobalMin=null!=i.min?i.min:this.DataMin-a,this.GlobalMax=null!=i.max?i.max:this.DataMax+r,null!=i.viewportStartGroup&&(this.MinValue=i.viewportStartGroup-a),null!=i.viewportEndGroup&&(this.MaxValue=i.viewportEndGroup+r),null!=i.viewportMin&&(this.MinValue=i.viewportMin),null!=i.viewportMax&&(this.MaxValue=i.viewportMax),null==this.MinValue&&(this.MinValue=this.GlobalMin),null==this.MaxValue&&(this.MaxValue=this.GlobalMax),this.GlobalMin>this.MinValue&&(this.GlobalMin=this.MinValue),this.GlobalMax<this.MaxValue&&(this.GlobalMax=this.MaxValue),this._timeRange=this.MaxValue-this.MinValue,this._level1Labels=null,this._level2Labels=null,this._level1Coords=null,this._level2Coords=null,this._isOneLevel=!0,this._level1Overflow=[],this._level2Overflow=[],this._locale=i._locale.toLowerCase(),this._monthResources=[t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_JANUARY"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_FEBRUARY"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_MARCH"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_APRIL"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_MAY"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_JUNE"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_JULY"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_AUGUST"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_SEPTEMBER"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_OCTOBER"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_NOVEMBER"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_DECEMBER")]},t.TimeAxisInfo._getAMString=function(t){var e=t.substring(0,2);if("en-au"==t||"en-ie"==t||"en-ph"==t)return"am";if("en-gb"==t)return"";switch(e){case"en":return"AM";case"ar":return"";case"el":return"";case"ko":return"";case"zh":return"";default:return""}},t.TimeAxisInfo._getPMString=function(t){var e=t.substring(0,2);if("en-au"==t||"en-ie"==t||"en-ph"==t)return"pm";if("en-gb"==t)return"";switch(e){case"en":return"PM";case"ar":return"";case"el":return"";case"ko":return"";case"zh":return"";default:return""}},t.TimeAxisInfo._getAMPMBefore=function(t){var e=t.substring(0,2);return"ko"==e||"zh"==e},t.TimeAxisInfo._getDMYOrder=function(t){var e=t.substring(0,2);return"en-us"==t||"en-ph"==t?"MDY":"fa"==e||"hu"==e||"ja"==e||"ko"==e||"lt"==e||"mn"==e||"zh"==e?"YMD":"DMY"},t.TimeAxisInfo._getYearTrailingCharacters=function(t){return 0==t.indexOf("ja")||0==t.indexOf("zh")?"":0==t.indexOf("ko")?"":""},t.TimeAxisInfo._getDayTrailingCharacters=function(t){return 0==t.indexOf("ja")||0==t.indexOf("zh")?"":0==t.indexOf("ko")?"":""},t.TimeAxisInfo.prototype.formatLabel=function(e){var i=new Date(e),n=this._formatAxisLabel(i,null,!0);return null!=n[1]?"YMD"==t.TimeAxisInfo._getDMYOrder(this._locale)||this._timeRange<t.TimeAxisInfo.TIME_MONTH_MIN&&this._step<t.TimeAxisInfo.TIME_DAY?n[1]+" "+n[0]:n[0]+" "+n[1]:n[0]},t.TimeAxisInfo.prototype._formatAxisLabelWithConverter=function(t,e,i){if(i){var n=null,o=null;if(i.getAsString?(n=i.getAsString(t),o=i.getAsString(e)):i.format&&(n=i.format(this._dateToIsoWithTimeZoneConverter&&t?this._dateToIsoWithTimeZoneConverter(t):t),o=i.format(this._dateToIsoWithTimeZoneConverter&&e?this._dateToIsoWithTimeZoneConverter(e):e)),o!=n)return n}return null},t.TimeAxisInfo.prototype._formatAxisLabel=function(e,i,n){var o=null,s=null,r="left"==this.Position||"right"==this.Position;return this._label1Converter||this._label2Converter?(this._label1Converter&&(o=this._formatAxisLabelWithConverter(e,i,this._label1Converter)),this._label2Converter&&(s=this._formatAxisLabelWithConverter(e,i,this._label2Converter)),[o,s]):(this._step>=t.TimeAxisInfo.TIME_YEAR_MIN||this._timeRange>=6*t.TimeAxisInfo.TIME_YEAR_MIN?o=this._formatDate(e,!1,!1,!0):this._step>=t.TimeAxisInfo.TIME_MONTH_MIN||this._timeRange>=6*t.TimeAxisInfo.TIME_MONTH_MIN?(null!=i&&i.getMonth()==e.getMonth()||(o=this._formatDate(e,!1,!0,!1)),null!=i&&i.getYear()==e.getYear()||(s=this._formatDate(e,!1,!1,!0))):this._step>=t.TimeAxisInfo.TIME_DAY||this._timeRange>=6*t.TimeAxisInfo.TIME_DAY?n?o=this._formatDate(e,!0,!0,!0):(null!=i&&i.getDate()==e.getDate()||(o=this._formatDate(e,!0,!1,!1)),null==i||i.getYear()!=e.getYear()?s=this._formatDate(e,!1,!0,!0):i.getMonth()!=e.getMonth()&&(s=this._formatDate(e,!1,!0,!1))):(this._step>=t.TimeAxisInfo.TIME_HOUR||this._timeRange>=6*t.TimeAxisInfo.TIME_HOUR?null!=i&&i.getHours()==e.getHours()||(o=this._formatTime(e,!1,!1)):this._step>=t.TimeAxisInfo.TIME_MINUTE||this._timeRange>=6*t.TimeAxisInfo.TIME_MINUTE?null!=i&&i.getMinutes()==e.getMinutes()||(o=this._formatTime(e,!0,!1)):null!=i&&i.getSeconds()==e.getSeconds()||(o=this._formatTime(e,!0,!0)),r?null!=i&&i.getDate()==e.getDate()||(s=this._formatDate(e,!0,!0,!1)):null==i||i.getYear()!=e.getYear()?s=this._formatDate(e,!0,!0,!0):i.getMonth()!=e.getMonth()?s=this._formatDate(e,!0,!0,!1):i.getDate()!=e.getDate()&&(s=this._formatDate(e,!0,!1,!1))),[o,s])},t.TimeAxisInfo.prototype._formatDate=function(e,i,n,o){var s,r="th"==this._locale.substring(0,2)&&"jet"!=this.Options._environment?e.getFullYear()+543:e.getFullYear();s=this._monthResources&&this._monthResources.length>=12?this._monthResources[e.getMonth()]:e.toString().split(" ")[1];var a=e.getDate();r+=t.TimeAxisInfo._getYearTrailingCharacters(this._locale),a+=t.TimeAxisInfo._getDayTrailingCharacters(this._locale);for(var l=t.TimeAxisInfo._getDMYOrder(this._locale),h="",u=0;u<l.length;u++)i&&"D"==l[u]?h+=a+" ":n&&"M"==l[u]?h+=s+" ":o&&"Y"==l[u]&&(h+=r+" ");return h.length>0?h.slice(0,h.length-1):h},t.TimeAxisInfo.prototype._formatTime=function(e,i,n){var o,s=e.getHours(),r=e.getMinutes(),a=e.getSeconds(),l=t.TimeAxisInfo._getAMString(this._locale),h=t.TimeAxisInfo._getPMString(this._locale),u=t.TimeAxisInfo._getAMPMBefore(this._locale),g=""!=l&&""!=h,f="";return t.Agent.isRightToLeft(this.getCtx())&&(f=""),g?(s<12?(o=l,0==s&&(s=12)):(o=h,s>12&&(s-=12)),f+=s,(i||0!=r)&&(f+=":"+this._doubleDigit(r))):f+=this._doubleDigit(s)+":"+this._doubleDigit(r),n&&(f+=":"+this._doubleDigit(a)),g?u?o+" "+f:f+" "+o:f},t.TimeAxisInfo.prototype._doubleDigit=function(t){return t<10?"0"+t:""+t},t.TimeAxisInfo.prototype._getMixedFrequencyStep=function(){return this._timeRange>=6*t.TimeAxisInfo.TIME_YEAR_MIN?t.TimeAxisInfo.TIME_YEAR_MIN:this._timeRange>=6*t.TimeAxisInfo.TIME_MONTH_MIN?t.TimeAxisInfo.TIME_MONTH_MIN:this._timeRange>=6*t.TimeAxisInfo.TIME_DAY?t.TimeAxisInfo.TIME_DAY:this._timeRange>=t.TimeAxisInfo.TIME_DAY?3*t.TimeAxisInfo.TIME_HOUR:this._timeRange>=6*t.TimeAxisInfo.TIME_HOUR?t.TimeAxisInfo.TIME_HOUR:this._timeRange>=t.TimeAxisInfo.TIME_HOUR?15*t.TimeAxisInfo.TIME_MINUTE:this._timeRange>=30*t.TimeAxisInfo.TIME_MINUTE?5*t.TimeAxisInfo.TIME_MINUTE:this._timeRange>=6*t.TimeAxisInfo.TIME_MINUTE?t.TimeAxisInfo.TIME_MINUTE:this._timeRange>=t.TimeAxisInfo.TIME_MINUTE?15*t.TimeAxisInfo.TIME_SECOND:this._timeRange>=30*t.TimeAxisInfo.TIME_SECOND?5*t.TimeAxisInfo.TIME_SECOND:t.TimeAxisInfo.TIME_SECOND},t.TimeAxisInfo._getLabelPositions=function(e,i,n){var o=new Date(e),s=o.getTimezoneOffset();o.setMonth(0,1),o.setHours(0,0,0,0);var r=60*(s-o.getTimezoneOffset())*1e3,a=o.getTime()+r,l=[];if(n>=t.TimeAxisInfo.TIME_YEAR_MIN&&n<=t.TimeAxisInfo.TIME_YEAR_MAX){for(;a<e;)a=t.TimeAxisInfo._addOneYear(a);for(;a<=i;)l.push(a),a=t.TimeAxisInfo._addOneYear(a)}else if(n>=t.TimeAxisInfo.TIME_MONTH_MIN&&n<=t.TimeAxisInfo.TIME_MONTH_MAX){for(;a<e;)a=t.TimeAxisInfo._addOneMonth(a);for(;a<=i;)l.push(a),a=t.TimeAxisInfo._addOneMonth(a)}else for(a+=Math.ceil((e-a)/n)*n;a<=i;)l.push(a),a+=n;return l},t.TimeAxisInfo._addOneYear=function(t){var e=new Date(t);return e.setFullYear(e.getFullYear()+1),e.getTime()},t.TimeAxisInfo._addOneMonth=function(t){var e=new Date(t);return e.setMonth(e.getMonth()+1),e.getTime()},t.TimeAxisInfo.prototype._generateLabels=function(e){var i=[],n=[],o=[],s=[],r=[],a=null,l=0,h=0,u=e.getStage(e),g=t.Agent.isRightToLeft(e),f="left"==this.Position||"right"==this.Position,_="off"!=this.Options.zoomAndScroll,p=!0,c=0;f&&t.Agent.isBrowserChrome()&&(c=.16*this.getTickLabelHeight());var d=[];if(null!=this._step)d=t.TimeAxisInfo._getLabelPositions(this.MinValue,this.MaxValue,this._step);else if(this._mixedFrequency)this._step=this._getMixedFrequencyStep(),d=t.TimeAxisInfo._getLabelPositions(this.MinValue,this.MaxValue,this._step);else{for(var x=0;x<this._groups.length;x++)this._groups[x]>=this.MinValue&&this._groups[x]<=this.MaxValue&&d.push(this._groups[x]);if(this._step=this._averageInterval,!this._skipGaps){var I;if(f)I=t.TextUtils.getTextStringHeight(e,this.Options.tickLabel.style);else{var m=this._formatAxisLabel(new Date(d[0]))[0];I=t.TextUtils.getTextStringWidth(e,m,this.Options.tickLabel.style)}(I+this.GetTickLabelGapSize())*(d.length-1)>Math.abs(this._endCoord-this._startCoord)&&(this._step=this._getMixedFrequencyStep(),d=t.TimeAxisInfo._getLabelPositions(this.MinValue,this.MaxValue,this._step))}}0==d.length&&(d=[this.MinValue]);for(x=0;x<d.length;x++){var A=d[x],M=this.getCoordAt(A);if(null!=M){var T=new Date(A),v=this._formatAxisLabel(T,a),b=v[0],L=v[1];if(null!=b?(o.push({text:b,coord:null!=L?M+c:M}),s.push(M),l++):(o.push(null),s.push(null)),i.push(null),_&&p&&(M=this.MinValue?this.getCoordAt(this.MinValue):M),p=!1,null!=L){var S=this.CreateLabel(e,L,null!=L?M-c:M);r.push(M),f||(g?S.alignRight():S.alignLeft()),n.push(S),this._isOneLevel=!1,h++}else n.push(null),r.push(null);a=T}}if(l=this._skipLabelsUniform(o,i,u,!1,g),!_&&h>1&&l<1.5*h){i=n,n=null;for(var C=0;C<i.length;C++)null!=i[C]&&i[C].alignCenter();l=this._skipLabelsGreedy(i,this.GetLabelDims(i,u),!1,g)}else 0==(h=this._skipLabelsGreedy(n,this.GetLabelDims(n,u),!0,g))&&(n=null);f&&null!=n&&this._skipVertLabels(i,n,u),this._level1Labels=i,this._level2Labels=n,this._level1Coords=s,this._level2Coords=r},t.TimeAxisInfo._isOverlapping=function(t,e,i,n,o){return i>=t&&i-o<e||i<t&&n+o>t},t.TimeAxisInfo.prototype._getLabelOverflow=function(t,e,i,n){var o=t-(i?n?e:0:.5*e);if(o<this.Options._minOverflowCoord)return Math.floor(o-this.Options._minOverflowCoord);var s=t+(i?n?0:e:.5*e);return s>this.Options._maxOverflowCoord?Math.ceil(s-this.Options._maxOverflowCoord):0},t.TimeAxisInfo.prototype._skipLabelsGreedy=function(e,i,n,o){if(!i||i.length<=0)return!1;for(var s,r,a,l,h,u="left"==this.Position||"right"==this.Position,g=this.getTickLabelHeight(),f=u?.08*g:.24*g,_=0,p=Math.abs(this._endCoord-this._startCoord),c=0;c<i.length;c++)if(this._level2Overflow.push(0),null!=e[c]){var d=(h=e[c]).getDimensions().w;if(i[c].w>p)e[c]=null;else{var x=this._getLabelOverflow(h.getX(),d,n,o);this._level2Overflow[c]=x,0!=x&&(h.setX(h.getX()-x),i[c].x-=x)}}for(c=0;c<i.length;c++)null!=i[c]&&(u?(a=i[c].y,l=i[c].y+i[c].h):(a=i[c].x,l=i[c].x+i[c].w),null!=s&&null!=r&&t.TimeAxisInfo._isOverlapping(s,r,a,l,f)&&(e[c]=null),null!=e[c]&&(s=a,r=l,_++));return _},t.TimeAxisInfo.prototype._skipLabelsUniform=function(t,e,i,n){for(var o=[],s=[],r=Math.abs(this._endCoord-this._startCoord),a=0;a<t.length;a++)null!=t[a]&&(o.push(t[a]),s.push(null),this._level1Overflow.push(0));for(var l="left"==this.Position||"right"==this.Position,h=this,u=function(t){if(null==s[t])if(o[t].label=h.CreateLabel(i.getCtx(),o[t].text,o[t].coord),s[t]=o[t].label.getDimensions(i),s[t].w>r)o[t].label=null,s[t].w=0,s[t].h=0;else{var e=h._getLabelOverflow(o[t].coord,s[t].w,!1,n);0!=e&&(o[t].coord-=e,s[t].x-=e,o[t].label.setX(o[t].label.getX()-e),h._level1Overflow[t]=e)}return l?s[t].h:s[t].w},g=(u(0)+this.GetTickLabelGapSize())*(o.length-1),f=r>0?Math.ceil(g/r)-1:0,_=!0;_;){for(a=0;a<o.length;a++)a%(f+1)==0?(u(a),o[a].skipped=!1):o[a].skipped=!0;_=this.IsOverlapping(s,f),f++}var p=0;for(a=0;a<t.length;a++)null==t[a]||t[a].skipped||(e[a]=t[a].label,p++);return p},t.TimeAxisInfo.prototype._skipVertLabels=function(e,i,n){for(var o=.08*this.getTickLabelHeight(),s=function(e,i){return t.TimeAxisInfo._isOverlapping(e.y,e.y+e.h,i.y,i.y+i.h,o)},r=null,a=!1,l=0;l<e.length;l++)if(e[l]&&i[l]){if(e[l].alignTop(),i[l].alignBottom(),r&&s(r,i[l].getDimensions())){a=!0;break}r=e[l].getDimensions()}else if(e[l]||i[l]){var h=e[l]?e[l]:i[l];if(r&&s(r,h.getDimensions())){a=!0;break}r=h.getDimensions()}if(a){var u,g=null,f=null,_=null;for(l=0;l<e.length;l++)i[l]?(e[l]=null,i[l].alignMiddle(),u=i[l].getDimensions(),f&&s(f,u)&&(e[g]=null),_=u):e[l]&&(u=e[l].getDimensions(),_&&s(_,u)?e[l]=null:(f=u,g=l))}},t.TimeAxisInfo.prototype.getLabels=function(t,e){return e&&e>1?null:(this._level1Labels||this._generateLabels(t),1==e?this._level2Labels:this._level1Labels)},t.TimeAxisInfo.prototype.getMajorTickCoords=function(){var t=[];if(this._isOneLevel)for(var e=0;e<this._level1Coords.length;e++)null!=this._level1Coords[e]&&null!=this._level1Labels[e]&&t.push(this._level1Coords[e]);else for(e=1;e<this._level2Coords.length;e++)null!=this._level2Coords[e]&&t.push(this._level2Coords[e]);return t},t.TimeAxisInfo.prototype.getMinorTickCoords=function(){if(this._isOneLevel)return[];for(var t=[],e=0;e<this._level1Coords.length;e++)null!=this._level1Coords[e]&&null!=this._level1Labels[e]&&t.push(this._level1Coords[e]);return t},t.TimeAxisInfo.prototype.getUnboundedValueAt=function(t){if(null==t)return null;var e=(t-this._startCoord)/(this._endCoord-this._startCoord);if(this._skipGaps){var i=this._timeToIndex(this.MinValue),n=this._timeToIndex(this.MaxValue);return this._indexToTime(i+e*(n-i))}return this.MinValue+e*(this.MaxValue-this.MinValue)},t.TimeAxisInfo.prototype.getUnboundedCoordAt=function(t){if(null==t)return null;var e;if(this._skipGaps){var i=this._timeToIndex(this.MinValue),n=this._timeToIndex(this.MaxValue);e=(this._timeToIndex(t)-i)/(n-i)}else e=(t-this.MinValue)/(this.MaxValue-this.MinValue);return this._startCoord+e*(this._endCoord-this._startCoord)},t.TimeAxisInfo.prototype.linearToActual=function(t){return null==t?null:this._skipGaps?this._indexToTime(t):t},t.TimeAxisInfo.prototype.actualToLinear=function(t){return null==t?null:this._skipGaps?this._timeToIndex(t):t},t.TimeAxisInfo.prototype._timeToIndex=function(t){for(var e=this._groups.length,i=0;i<this._groups.length;i++)if(t<=this._groups[i]){e=i;break}var n=e-1,o=void 0!==this._groups[n]?this._groups[n]:this._groups[0]-this._averageInterval;return n+(t-o)/((void 0!==this._groups[e]?this._groups[e]:this._groups[this._groups.length-1]+this._averageInterval)-o)},t.TimeAxisInfo.prototype._indexToTime=function(t){var e=Math.min(Math.max(Math.ceil(t),0),this._groups.length),i=e-1,n=void 0!==this._groups[i]?this._groups[i]:this._groups[0]-this._averageInterval;return n+(t-i)*((void 0!==this._groups[e]?this._groups[e]:this._groups[this._groups.length-1]+this._averageInterval)-n)},t.TimeAxisInfo.prototype.getGroupWidth=function(){return this._skipGaps?Math.abs(this.getUnboundedCoordAt(this._indexToTime(1))-this.getUnboundedCoordAt(this._indexToTime(0))):Math.abs(this.getUnboundedCoordAt(this.MinValue+this._averageInterval)-this.getUnboundedCoordAt(this.MinValue))},t.TimeAxisInfo.prototype.getMinimumExtent=function(){return this._skipGaps?1:this._mixedFrequency?Math.min((this.getGlobalMax()-this.getGlobalMin())/8,this._averageInterval):this._averageInterval},t.TimeAxisInfo.prototype.getStartOverflow=function(){return"top"!=this.Position&&"bottom"!=this.Position||!t.Agent.isRightToLeft(this.getCtx())?this.StartOverflow:this.EndOverflow},t.TimeAxisInfo.prototype.getEndOverflow=function(){return"top"!=this.Position&&"bottom"!=this.Position||!t.Agent.isRightToLeft(this.getCtx())?this.EndOverflow:this.StartOverflow}}(dvt);
  return dvt;
});
