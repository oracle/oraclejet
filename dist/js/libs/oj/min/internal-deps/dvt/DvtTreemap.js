/**
 * Copyright (c) 2014, Oracle and/or its affiliates.
 * All rights reserved.
 */
"use strict";
define(['./DvtToolkit', './DvtBaseTreeView'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.
  
  // Map the D namespace to dvt, which is used to provide access across partitions.
  var D = dvt;
  
D.FV=function(a,b,c){this.Init(a,b,c)};(0,D.da)("DvtTreemap",D.FV);D.A.q(D.FV,D.FR,"DvtTreemap");D.FV.newInstance=function(a,b,c){return new D.FV(a,b,c)};D.z=D.FV.prototype;D.z.Init=function(a,b,c){D.FV.u.Init.call(this,a,b,c);this.xf=new D.GV;this.setId("treemap1000"+window.Math.floor(1E9*window.Math.random()))};
D.z.pN=function(a){D.FV.u.pN.call(this,a);a=this.v();this.tf="sliceAndDiceHorizontal"==a.layout?new D.BV(D.k):"sliceAndDiceVertical"==a.layout?new D.BV(D.p):new D.CV;this.sd=[];var b=a.isolatedNode;if(b&&this.Pa){var c=(0,D.jS)(this.Pa);c.push(this.Pa);for(var d=0;d<c.length;d++)if(c[d].getId()==b){this.sd.push(c[d]);break}}"auto"==a.animationOnDisplay&&(a.animationOnDisplay="alphaFade")};
D.z.kq=function(a){var b="jet"!=this.v()._environment?7:1,b=window.Math.max(window.Math.ceil(b*window.Math.min(a.e,a.g)/400),1);a.x+=b;a.y+=b;a.e-=2*b;a.g-=2*b;b=this.tf.fba(this,1);a.x+=b;a.e-=2*b;(0,D.IR)(this,a);this.Fb=D.JR.W(this,a,this.HX);a.x-=b;a.e+=2*b;b=this.sd.length;if(0<b&&this.AX)this.tf.jr(this,this.sd[b-1],a.x,a.y,a.e,a.g,D.k);else{this.Pa&&this.tf.jr(this,this.Pa,a.x,a.y,a.e,a.g,D.p);for(var c=0;c<b;c++)this.tf.jr(this,this.sd[c],a.x,a.y,a.e,a.g,D.k)}};
D.z.Vj=function(a){(0,D.LR)(this,a);this.tn&&a.k(this.tn);this.Fb&&(a.k(this.Fb),this.Fb=D.o);if((0,D.MR)(this)){this.a7=new D.F(this.j());a.k(this.a7);this.TDa?this.TDa.W(a):this.Pa.nf()?(this.Pa.Iy(a),(0,D.OR)(this,this.Pa)):this.Pa.W(a);this.N7=new D.F(this.j());a.k(this.N7);this.Yx=new D.F(this.j());a.k(this.Yx);a.k(this.a7);this.EC=new D.uo(this.j(),[]);this.EC.sb(D.p);this.EC.xa(D.p);(0,D.Ii)(this.EC);a.k(this.EC);for(a=0;a<this.sd.length;a++){var b=this.sd[a].ta();this.N7.k(b)}}else(0,D.PR)(this,
a)};D.z.Ar=function(){this.q1||(this.fa.Rj(),this.kq(new D.C(0,0,this.Ma,this.Xa)),this.Vj(this.fa),this.w3());D.FV.u.Ar.call(this)};D.z.w3=function(){for(var a=this.Qb?this.Qb.getSelection():[],b=0;b<a.length;b++)if(0<this.sd.length){var c=this.sd[this.sd.length-1];(a[b]==c||a[b].WA(c))&&a[b].qb(D.k)}else a[b].qb(D.k)};D.z.Mw=function(a){return new D.HV(a)};D.z.CI=function(a,b,c,d){return new D.IV(a,b,c,d)};
D.z.efa=function(a){var b=(0,D.JV)(this);return b?(0,D.KV)(this,D.nV.Rra(b)):a?(0,D.KV)(this,D.nV.Rra(a)):D.o};D.z.cV=function(a){for(var b=0,c=this.Yx.Qa(),d=0;d<c;d++){var e=this.Yx.na(d);a.zIndex>e.zIndex&&(b=d+1)}b<c?this.Yx.Sa(a,b):this.Yx.k(a)};D.z.YE=function(a,b){return 0<this.sd.length?this.sd[this.sd.length-1].JD(a,b):this.Pa.JD(a,b)};D.JV=function(a){return a.sd&&0<a.sd.length?a.sd[a.sd.length-1]:D.o};
D.MV=function(a,b){if("none"!=a.v().animationOnDataChange){for(var c=a.Qb?a.Qb.getSelection():[],d=0;d<c.length;d++)c[d].qb(D.p);for(var c=[(0,D.LV)(b)],d=(0,D.jS)(b),e=0;e<d.length;e++)c.push((0,D.LV)(d[e]));a.vr=new D.tn(a.j(),c);a.vr.pe(a.Ar,a);a.rb.Oi(a);a.vr.play()}else a.W(D.o,a.Ma,a.Xa,D.k)};D.KV=function(a,b){var c=a.rb.$f;return c?c.AD(b):b&&0<b.length?b[0]:D.o};D.FV.prototype.Uj=function(){return(0,D.uk)(this.v(),"componentName","DvtUtilBundle","TREEMAP")};D.FV.prototype.i_=(0,D.ba)("DvtTreemapBundle");
D.FV.prototype.fq=function(a){return new D.NV(this,a)};
D.NV=function(a,b){this.Init(a,b);var c=this.K.v(),d=c.nodeDefaults,e=d.header,f=b.header?b.header:{};this.cDa=b.groupLabelDisplay?b.groupLabelDisplay:d.groupLabelDisplay;this.Yr=b.labelDisplay?b.labelDisplay:d.labelDisplay;this.zK=b.labelHalign?b.labelHalign:d.labelHalign;this.T7=b.labelValign?b.labelValign:d.labelValign;this.xDa=f.labelHalign?f.labelHalign:e.labelHalign;this.vla=f.labelStyle?new D.I(f.labelStyle):D.o;this.AV="on"==(f.useNodeColor?f.useNodeColor:e.useNodeColor);this.M7=f.isolate?
f.isolate:e.isolate;"auto"==this.M7&&(this.M7=(0,D.Jf)()?"off":"on");this.bv=c.isolatedNode!=D.o&&c.isolatedNode==this.getId()};D.A.q(D.NV,D.dS,"DvtTreemapNode");D.z=D.NV.prototype;
D.z.W=function(a){if(this.uv){this.J=this.Q5();a.k(this.J);var b;this.nf()?(this.ZV=new D.F(this.K.j()),this.J.k(this.ZV),this.Iy(this.ZV)):b=(0,D.eS)(this);if(b){var c=this.v()._cf,d=this.K.Gc;d.Or=c;var c=this.Fa-8-2,e=this.Ka-4-2;0<c&&0<e&&((0,D.pg)(d,c),(0,D.qg)(d,e),d.Me((0,D.fS)(this)),this.E5=b=D.B.eI(d,b,this.J),(0,D.G)(a.j())?(a=b.I(),a=this.Jb+this.Fa-4-1-a.e):a=this.Jb+4+1,(0,D.wk)(b,a,this.fc+2+1))}else this.Vb=this.aP(this.J),this.Vb!=D.o&&(this.hs&&"header"!=this.kl)&&(a=this.Vb.Nb(),
this.ls=new D.Re(this.K.j(),a.x,a.y,a.e,a.g),this.ls.va("#FFFFFF"),this.ls.xa(D.p),this.J.k(this.ls),a=this.Vb,"node"==this.kl&&this.nf()?this.K.a7.k(a):this.J.k(a));this.nf()?this.J.kd("group"):this.J.kd("img");this.rn()}};
D.z.qb=function(a){D.NV.u.qb.call(this,a);if(this.J){a=this.K.v().nodeDefaults;var b=a.header;if(this.Ga()){var c=this.Jb,d=this.fc+1,e=this.Fa-1,f=this.Ka-1;(0,D.nj)()&&(d-=1);(0,D.QV)(this,this.mi);(0,D.QV)(this,this.Zx);this.Zx=this.mi=D.o;this.mi=new D.Re(this.K.j(),c,d,e,f);this.mi.xa(D.p);this.mi.P(D.o);(0,D.Ii)(this.mi);this.J.k(this.mi);this.Zx=new D.Re(this.K.j(),c+1,d+1,e-2,f-2);this.Zx.xa(D.p);this.Zx.P(D.o);(0,D.Ii)(this.Zx);this.J.k(this.Zx);"header"==this.kl?(this.RN||this.xc()?this.Bq.va(b.hoverBackgroundColor):
(this.Bq.va(b.selectedBackgroundColor),this.Vb&&(0,D.RV)(this,this.Vb,"_selectedLabelStyle")),this.mi.Za(b.selectedOuterColor),this.Zx.Za(b.selectedInnerColor),(0,D.Jf)()&&(this.Ee=(0,D.SV)(this,this.J))):(this.mi.Za(a.selectedOuterColor),this.Zx.Za(a.selectedInnerColor),!(0,D.Fq)()&&!(0,D.pj)()&&(0,D.To)(this.J,D.RR),this.K.cV(this.J))}else(0,D.QV)(this,this.Zx),this.Zx=D.o,(0,D.Jf)()&&(0,D.TV)(this),"header"==this.kl?(this.RN||this.xc()?this.Bq.va(b.hoverBackgroundColor):((0,D.UV)(this,this.J,this.Bq),
this.Vb&&(this.wu()?(0,D.RV)(this,this.Vb,"_drillableLabelStyle"):(0,D.RV)(this,this.Vb,"labelStyle"))),this.mi&&(this.RN||this.xc()?this.mi.Za(b.hoverOuterColor):((0,D.QV)(this,this.mi),this.mi=D.o))):((0,D.Vz)(this.J),this.mi&&((0,D.QV)(this,this.mi),this.mi=D.o),(a=this.ug)&&a.ZV&&a.ZV.k(this.J))}};
D.z.Xb=function(){if(this.J&&this.uv){var a=this.K.v().nodeDefaults,b=a.header,c=(0,D.JV)(this.K);if(!(c!=D.o&&c!=this&&!this.WA(c))){var c=[],d,e,f,g;"header"==this.kl?(this.Bq.va(b.hoverBackgroundColor),this.mi||(a=this.Jb,d=this.fc+1,e=this.Fa-1,f=this.Ka-1,(0,D.nj)()&&(d-=1),this.mi=new D.Re(this.K.j(),a,d,e,f),this.mi.xa(D.p),this.mi.P(D.o),(0,D.Ii)(this.mi),this.J.k(this.mi)),this.mi.Za(this.Ga()?b.selectedOuterColor:b.hoverOuterColor),d=this.Jb+1.5+1,f=this.Jb+this.Fa-1.5-1,e=this.fc+this.zp,
g=this.fc+this.Ka-1.5-1,c.push(f,e,f,g,d,g,d,e),a=new D.ig(b.hoverInnerColor,0.8,3),this.Vb&&(this.wu()?(0,D.RV)(this,this.Vb,"_drillableHoverLabelStyle"):(0,D.RV)(this,this.Vb,"_hoverLabelStyle"))):(d=this.Jb+1,f=this.Jb+this.Fa-1,e=this.fc+1,g=this.fc+this.Ka-1,c.push(this.Jb,e,f,e,f,g,d,g,d,e),a=new D.ig(a.hoverColor,1,2));b=this.K;b.EC.Dc(c);b.EC.ba(a);b.EC.sb(D.k)}}};
D.z.Mb=function(){if(this.J&&this.uv){var a=this.K.v().nodeDefaults.header;"header"==this.kl&&(this.Ga()?(this.Bq.va(a.selectedBackgroundColor),this.mi.Za(a.selectedOuterColor),this.Vb&&(this.wu()?(0,D.RV)(this,this.Vb,"_drillableSelectedLabelStyle"):(0,D.RV)(this,this.Vb,"_selectedLabelStyle"))):((0,D.UV)(this,this.J,this.Bq),this.mi&&(this.J.removeChild(this.mi),this.mi=D.o),this.Vb&&(this.wu()?(0,D.RV)(this,this.Vb,"_drillableLabelStyle"):(0,D.RV)(this,this.Vb,"labelStyle"))));this.K.EC.sb(D.p)}};
D.z.Ke=function(a,b){this.nf()?(this.Vb&&this.Vb.D(b),"header"==this.kl&&(this.AV&&this.Bq)&&this.Bq.D(b)):D.NV.u.Ke.call(this,a,b)};D.z.zy=function(){return"off"!=this.M7&&"header"==this.kl};D.z.CH=function(a){return!a||!a.eM()?D.NV.u.CH.call(this,a):new D.C(this.Jb,this.fc,this.Fa,this.Ka)};
D.z.Vd=function(a){var b;if(a.type==D.rk)return D.NV.u.Vd.call(this,a);b=a.keyCode;if(32==b&&a.ctrlKey)return this;if(38==b&&a.altKey||221==b)(b=this.ug)&&b.getId()!=this.K.Pa.getId()?(a=b,(0,D.lS)(b)):a=this;else if(40==b&&a.altKey||219==b)a=(a=this.FX)?a:this.nf()?(0,D.KV)(this.K,this.Ic()):this;else{var c=(0,D.JV)(this.K),d=0;if(c)if(this==c)d=0;else{b=this.ug;for(d=1;c!=b;)d++,b=b.ug}else{for(c=this;c.ug;)c=c.ug;d=(0,D.hS)(this)}b=(0,D.gS)(this,c,d);a=(0,D.sk)(this,a,b)}(0,D.lS)(a);return a};
D.z.Je=function(){return new D.C(this.Jb,this.fc,this.Fa,this.Ka)};D.z.Nj=function(){return this.J?this.J.ya():D.o};
D.z.BT=function(a,b,c,d){if(!(0>=c||0>=d)){this.uv=D.k;this.Fna=this.fn();this.Jb=a;this.fc=b;this.Fa=c?c:0;this.Ka=d?d:0;this.kl=this.nf()?this.cDa:this.Yr;this.oD||(this.kl="off");if("header"==this.kl){this.zp=15;a=new D.Kf(this.K.j(),this.oD);a.Me((0,D.fS)(this));(0,D.RV)(this,a,"labelStyle");a=D.Ye.Ph(a).g;this.zp=window.Math.max(this.zp,a);this.zy()&&(this.zp=window.Math.max(this.zp,15));a=this.Jb;b=this.fc+this.zp;c=this.Fa;d=this.Ka-this.zp;if(0<=c&&0<=d)return new D.C(a,b,c,d);this.kl=D.o}return new D.C(this.Jb,
this.fc,this.Fa,this.Ka)}};D.z.JD=function(a,b){if(this.contains(a,b)||!this.uv){for(var c=this.Ic(),d=0;d<c.length;d++)if(c[d].contains(a,b))return c[d].JD(a,b);if(this.uv)return this}return D.o};D.z.contains=function(a,b){return a>=this.Jb&&a<=this.Jb+this.Fa&&b>=this.fc&&b<=this.fc+this.Ka};D.z.fn=function(){var a=D.J.ze(this.qk),b=D.J.xe(this.qk),c=D.J.we(this.qk);return[this.Jb,this.fc,this.Fa,this.Ka,a,b,c,this.nf()?0:window.Math.random()]};
D.z.Cr=function(a){this.BT(a[0],a[1],a[2],a[3]);this.qk=D.J.fB(window.Math.round(a[4]),window.Math.round(a[5]),window.Math.round(a[6]));this.J&&((0,D.hI)(this.J,this.Jb,this.fc,this.Fa,this.Ka),this.Bq&&(0,D.hI)(this.Bq,this.Jb+1,this.fc+1,this.Fa-2,this.Ka-2),("header"!=this.kl||this.AV)&&this.J.P(this.II()),this.Ga()&&this.qb(D.p),(0,D.QV)(this,this.Mz),(0,D.QV)(this,this.yR),this.yR=this.Mz=D.o,(0,D.TV)(this),(0,D.eS)(this)?((0,D.QV)(this,this.E5),this.E5=D.o):((0,D.QV)(this,this.ls),this.ls=D.o,
this.Vb&&this.Vb.getParent().removeChild(this.Vb),this.Vb=this.aP(this.J)))};D.LV=function(a){if(a.Fna){var b=new D.vn(a.K.j(),a,0.3);(0,D.T)(b.O,"typeNumberArray",a,a.fn,a.Cr,a.fn());a.Cr(a.Fna);return b}return D.o};D.NV.prototype.hf=function(a,b){return 0==(0,D.hS)(this)||b.uv&&0<b.Fa&&0<b.Ka?D.NV.u.hf.call(this,a,b):this.yg(a)};
D.NV.prototype.Q5=function(){var a=this.K.j(),b;if("header"==this.kl)b=new D.Re(a,this.Jb,this.fc,this.Fa,this.Ka),this.Bq=new D.Re(a,this.Jb+1,this.fc+1,this.Fa-2,this.Ka-2),(0,D.UV)(this,b,this.Bq),this.Bq.xa(D.p),b.k(this.Bq),this.bv&&(this.Ee=(0,D.SV)(this,b));else{var c=this.II();b=new D.Re(a,this.Jb,this.fc,this.Fa,this.Ka);if((1E3>this.K.ds||!(0,D.Jf)())&&2<=this.Fa&&2<=this.Ka){new D.ig("#FFFFFF");new D.ig("#000000",0.3);this.hs&&new D.ig(this.qk,0.15);var d=this.zb(),e=D.J.JM("#FFFFFF",d,
0.7),d=D.J.JM("#000000",d,0.7),f=window.Math.min(this.Fa,this.Ka);4<=f?(b.va(d),this.yR=new D.Re(a,this.Jb,this.fc,this.Fa-1,this.Ka-1),this.yR.va(e),this.yR.xa(D.p),b.k(this.yR),this.Mz=new D.Re(a,this.Jb+1,this.fc+1,this.Fa-2,this.Ka-2),this.Mz.P(c),this.Mz.xa(D.p),b.k(this.Mz)):2<=f?(b.va(d),this.Mz=new D.Re(a,this.Jb,this.fc,this.Fa-1,this.Ka-1),this.Mz.P(c),this.Mz.xa(D.p),b.k(this.Mz)):b.P(c)}else b.P(c)}this.K.Ia().La(b,this);this.Ea()?b.Sf(D.k):b.setCursor("default");b.zIndex=this.yZ;return b};
D.SV=function(a,b){if("header"!=a.kl||!a.zy())return D.o;var c=D.o,d=a.Jb,e=a.Jb+a.Fa-1,f=a.fc+1,g=a.fc+a.zp;if(12<e-d-2){if(a.bv){var c=a.K.j(),h=(0,D.G)(a.$),j=a.K.v()._resources,l=h&&j.restoreDownRtl?j.restoreDownRtl:j.restoreDown,m=h&&j.restoreOverRtl?j.restoreOverRtl:j.restoreOver,h=new D.Se(c,h&&j.restoreRtl?j.restoreRtl:j.restore,0,0,12,12),l=new D.Se(c,l,0,0,12,12),m=new D.Se(c,m,0,0,12,12);(0,D.Ai)(h);(0,D.Ai)(l);(0,D.Ai)(m);c=new D.Ne(c,h,l,m);c.pa(D.rk,a.dia,D.p,a)}else c=a.K.j(),h=(0,D.G)(a.$),
j=a.K.v()._resources,l=h&&j.isolateDownRtl?j.isolateDownRtl:j.isolateDown,m=h&&j.isolateOverRtl?j.isolateOverRtl:j.isolateOver,h=new D.Se(c,h&&j.isolateRtl?j.isolateRtl:j.isolate,0,0,12,12),l=new D.Se(c,l,0,0,12,12),m=new D.Se(c,m,0,0,12,12),(0,D.Ai)(h),(0,D.Ai)(l),(0,D.Ai)(m),c=new D.Ne(c,h,l,m),c.pa(D.rk,a.cia,D.p,a);d=(0,D.G)(b.j())?d+1:e-12-1;(0,D.wk)(c,d,(g+f-12)/2);b.k(c);(0,D.Jf)()&&(f=new D.Re(b.j(),-2,-2,16,16),(0,D.Ai)(f),c.k(f));(0,D.XH)(a.K.v().skin)?a.K.Ia().La(c,a):(f=(0,D.uk)(a.K.v(),
a.bv?"tooltipRestore":"tooltipIsolate","DvtTreemapBundle",a.bv?"RESTORE":"ISOLATE"),a.K.Ia().La(c,new D.NR(a,a.getId(),f)))}return c};D.TV=function(a){a.Ee&&((0,D.QV)(a,a.Ee),a.Ee=D.o)};
D.NV.prototype.aP=function(a){var b=(0,D.G)(a.j());if(!this.oD||!a||!this.kl||"off"==this.kl)return D.o;var c=this.Ka;if((0,D.fS)(this)>c)return D.o;var d="node"==this.kl?this.zK:this.xDa;b&&("start"==d?d="end":"end"==d&&(d="start"));var e=this.Fa-6,f=0;this.zy()&&(f=13,e="center"==d?e-2*f:e-f);if(0>=e)return D.o;var g=new D.Kf(this.K.j(),this.oD);g.Me((0,D.fS)(this));"start"==d?(b?g.ka(this.Jb+4+f):g.ka(this.Jb+4),g.Lh()):"center"==d?(g.ka(this.Jb+this.Fa/2),g.$e()):"end"==d&&(b?g.ka(this.Jb+this.Fa-
4):g.ka(this.Jb+this.Fa-4-f),g.Mh());"node"==this.kl?((0,D.qS)(this,g),c=this.Ka-4,b=D.Ye.GH(g),"top"==this.T7?g.Aa(this.fc+2):"center"==this.T7?g.Aa(this.fc+this.Ka/2-b/2):"bottom"==this.T7&&g.Aa(this.fc+this.Ka-2-b)):"header"==this.kl&&(b=(0,D.nj)()?1:0,g.Aa(this.fc+1+this.zp/2+b),g.Ff(),(0,D.RV)(this,g,"labelStyle"));if(g!=D.o)return"header"==this.kl&&this.wu()?((0,D.RV)(this,g,"_drillableLabelStyle"),g.setCursor("pointer"),b=new D.NR(this,this.getId(),D.o,this.Ie(),this.Ki()),b.zda(D.k),this.K.Ia().La(g,
b)):g.xa(D.p),D.Ye.Yb(g,e,c,a)?g:D.o};D.UV=function(a,b,c){var d=a.K.v().nodeDefaults.header;a.AV?(a=a.zb(),c.va(a),c=D.J.JM(d.borderColor,a,0.5),b.va(c)):(b.va(d.borderColor),c.va(d.backgroundColor))};D.RV=function(a,b,c){var d=[];1>=(0,D.hS)(a)&&d.push(new D.I("font-weight:bold;"));d.push(a.K.v().nodeDefaults.header[c]);a.AV&&("labelStyle"==c||"_drillableLabelStyle"==c)&&d.push(new D.I("color: "+(a.hs?"#000000":D.J.Ij(a.qk))));a.vla&&d.push(a.vla);b.Na((0,D.Lo)(d))};
D.NV.prototype.uu=function(){!this.Ee&&!(0,D.Jf)()&&(this.Ee=(0,D.SV)(this,this.J));D.NV.u.uu.call(this)};D.NV.prototype.su=function(){this.bv!==D.k&&!(0,D.Jf)()&&(0,D.TV)(this);D.NV.u.su.call(this)};D.NV.prototype.rH=function(){return this.J?new D.Re(this.K.j(),this.J.qa(),this.J.sa(),this.J.getWidth(),this.J.getHeight()):D.o};D.QV=function(a,b){b&&a.J.removeChild(b)};D.z=D.NV.prototype;
D.z.cia=function(a){this.bv=D.k;this.Mb();var b=this.K,c=b.Ia().od();c&&c.sc();b.sd.push(this);b.v().isolatedNode=this.getId();b.kb(new D.PV(this.getId()));b.AX=D.k;b.kq(new D.C(0,0,b.Ma,b.Xa));b.AX=D.p;c=this.ta();b.N7.k(c);(0,D.MV)(b,this);(0,D.TV)(this);this.rn();a&&a.stopPropagation()};
D.z.dia=function(a){this.bv=D.p;this.Mb();var b=this.K,c=b.sd.pop();b.v().isolatedNode=0<b.sd.length?b.sd[b.sd.length-1].getId():D.o;var d=b.Ia().od();d&&d.sc();d=c.getId();b.pQ=d;b.kb(new D.PV);b.AX=D.k;b.kq(new D.C(0,0,b.Ma,b.Xa));b.AX=D.p;(0,D.MV)(b,c);(0,D.TV)(this);this.rn();a&&a.stopPropagation()};D.z.Ie=function(a,b,c){return a&&a instanceof D.Ne?D.o:D.NV.u.Ie.call(this,a,b,c)};D.z.Ki=function(a){return a&&a instanceof D.Ne?D.o:D.NV.u.Ki.call(this,a)};
D.z.af=function(a){return a&&a instanceof D.Ne?(0,D.uk)(this.K.v(),this.bv?"tooltipRestore":"tooltipIsolate","DvtTreemapBundle",this.bv?"RESTORE":"ISOLATE"):D.o};
D.z.oc=function(){var a=this.K.v(),b=[];this.Ea()&&b.push((0,D.uk)(a,this.Ga()?"stateSelected":"stateUnselected","DvtUtilBundle",this.Ga()?"STATE_SELECTED":"STATE_UNSELECTED"));this.bv&&b.push((0,D.uk)(a,"stateIsolated","DvtUtilBundle","STATE_ISOLATED"));this.wu()&&b.push((0,D.uk)(a,"stateDrillable","DvtUtilBundle","STATE_DRILLABLE"));return(0,D.vk)(this.Kc(),b)};D.z.rn=function(){!(0,D.af)()&&this.J&&this.J.Rb("label",this.oc())};
D.zV=function(){this.Init()};D.A.q(D.zV,D.A,"DvtBaseTreemapLayout");D.zV.prototype.Init=function(){this.yZ=0};D.zV.prototype.jr=(0,D.t)();D.AV=function(a,b,c,d,e,f,g){b.yZ=a.yZ;a.yZ++;if(!g||!b.nf()){a=a.fba(b.K,(0,D.hS)(b));g=window.Math.round(c+a);var h=window.Math.round(d+a);if(b=b.BT(g,h,window.Math.round(c+e-a)-g,window.Math.round(d+f-a)-h))return b}return new D.C(c,d,e,f)};D.zV.prototype.fba=function(a,b){var c=a.v().groupGaps;return"outer"==c?1==b&&2<=a.Ht?3:0:"all"==c?b<a.Ht?3:0:0};
D.CV=function(){this.Init()};D.A.q(D.CV,D.zV,"DvtSquarifyingLayout");D.CV.prototype.jr=function(a,b,c,d,e,f,g){this.tf(b,c,d,e,f,g?D.p:D.k)};D.CV.prototype.tf=function(a,b,c,d,e,f){b=(0,D.AV)(this,a,b,c,d,e,f);a=a.Ic();if(a!=D.o&&0<a.length){c=a;e=b.e*b.g;for(d=d=f=0;d<c.length;d++)f+=0<c[d].Zc()?c[d].Zc():0;e=0==e?0:e/f;for(d=0;d<c.length;d++)f=c[d],f.ZE=f.Zc()*e;a=a.slice(0).sort(function(a,b){return a.Zc()-b.Zc()});c=window.Math.min(b.e,b.g);(0,D.DV)(this,a,c,new D.C(b.x,b.y,b.e,b.g))}};
D.DV=function(a,b,c,d){var e=[],f=window.Infinity;if(b==D.o||0==b.length)(0,D.EV)(a,e,c,d);else for(;0<b.length;){var g=b.pop();if(0>g.ZE){(0,D.EV)(a,e,c,d);break}e.push(g);var h,j=e,l=c,m=0;h=window.Infinity;for(var n=-window.Infinity,q=0;q<j.length;q++)m+=j[q].ZE,h=window.Math.min(h,j[q].ZE),n=window.Math.max(n,j[q].ZE);j=m*m;l*=l;h=window.Math.max(l*n/j,j/(l*h));if(h>f){b.push(g);e.pop();d=(0,D.EV)(a,e,c,d);(0,D.DV)(a,b,window.Math.min(d.e,d.g),d);break}else if(0==b.length){(0,D.EV)(a,e,c,d);break}else f=
h}};D.EV=function(a,b,c,d){var e=0,f;for(f=0;f<b.length;f++)e+=b[f].ZE;var g=d.x,h=d.y;if(c==d.e){e=0==c?0:e/c;for(f=0;f<b.length;f++)c=b[f].ZE/e,a.tf(b[f],g,h,c,e,D.p),g+=c;return new D.C(d.x,d.y+e,d.e,d.g-e)}c=0==c?0:e/c;for(f=0;f<b.length;f++)e=b[f].ZE/c,a.tf(b[f],g,h,c,e,D.p),h+=e;return new D.C(d.x+c,d.y,d.e-c,d.g)};
D.BV=function(a){this.Init();this.Fx=a};D.A.q(D.BV,D.zV,"DvtSliceAndDiceLayout");D.BV.prototype.jr=function(a,b,c,d,e,f,g){this.tf(this.Fx,a,b,c,d,e,f,g?D.p:D.k)};
D.BV.prototype.tf=function(a,b,c,d,e,f,g,h){var j=b.v();d=(0,D.AV)(this,c,d,e,f,g,h);c=c.Ic();if(c!=D.o){e=d.x;f=d.y;g=d.e;h=d.g;var l=0,m;for(m=0;m<c.length;m++)l+=0<c[m].Zc()?c[m].Zc():0;"on"==j.sorting&&(c=c.slice(0),c.sort(function(a,b){return b.Zc()-a.Zc()}));a&&(0,D.G)(b.j())&&(c=c.slice(0).reverse());for(m=0;m<c.length;m++)if(j=c[m],!(0>=j.Zc())){var n=j.Zc()/l;a?g=d.e*n:h=d.g*n;this.tf(!a,b,j,e,f,g,h,D.p);a?e+=g:f+=h}}};
D.PV=function(a){this.Init("treemapIsolate");this.ib=a?a:D.o};(0,D.da)("DvtTreemapIsolateEvent",D.PV);D.A.q(D.PV,D.Pi,"DvtTreemapIsolateEvent");D.PV.TYPE="treemapIsolate";D.PV.prototype.getId=(0,D.y)("ib");D.PV.prototype.getId=D.PV.prototype.getId;
D.HV=function(a){this.Init(a)};D.A.q(D.HV,D.oV,"DvtTreemapKeyboardHandler");D.HV.prototype.Bg=function(a){var b=D.HV.u.Bg.call(this,a);if(!b&&(a=a.keyCode,219==a||221==a))b=D.k;return b};
D.IV=function(a,b,c,d){D.$R.call(this,a,b,c,d)};D.A.q(D.IV,D.$R,"DvtTreemapEventManager");D.IV.prototype.Xh=function(a){var b=D.k;if(13==a.keyCode&&a.ctrlKey){var c=this.od();c.zy()&&(c.bv?c.dia():c.cia());(0,D.ki)(a)}else b=D.IV.u.Xh.call(this,a);return b};D.IV.prototype.dca=(0,D.ba)(D.p);
(0,D.Fg)("DvtTreemapBundle",{COLOR:"Color",ISOLATE:"Isolate",OTHER:"Other",RESTORE:"Restore",SIZE:"Size"});
D.GV=function(){this.Init({skyros:D.OV,alta:{}})};D.A.q(D.GV,D.ZR,"DvtTreemapDefaults");
D.OV={groupGaps:"outer",nodeDefaults:{header:{backgroundColor:"#FFFFFF",borderColor:"#d6dfe6",hoverBackgroundColor:"#ebeced",hoverOuterColor:"#ebeced",hoverInnerColor:"#d6d7d8",isolate:"auto",labelHalign:"start",labelStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 12px;color:#252525;"),selectedBackgroundColor:"#dae9f5",selectedInnerColor:"#FFFFFF",selectedOuterColor:"#000000",useNodeColor:"off",_hoverLabelStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 12px;color:#252525;"),
_selectedLabelStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 12px;color:#252525;"),_drillableLabelStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 12px; color:#145c9e;"),_drillableHoverLabelStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 12px; color:#145c9e;"),_drillableSelectedLabelStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 12px; color:#145c9e;")},
hoverColor:"#ebeced",groupLabelDisplay:"header",labelDisplay:"node",labelHalign:"center",labelValign:"center",selectedInnerColor:"#FFFFFF",selectedOuterColor:"#000000"}};

  return D;
});