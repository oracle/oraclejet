/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(['./DvtToolkit'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.

!function(t){t.OverviewUtils=new Object,t.OverviewUtils.supportsTouch=function(){return t.Agent.isTouchDevice()},t.Obj.createSubclass(t.OverviewUtils,t.Obj),t.OverviewUtils.getDatePosition=function(t,e,i,n){var o=(i-t)*n,r=e-t;return 0==o||0==r?0:o/r},t.OverviewUtils.getPositionDate=function(t,e,i,n){var o=i*(e-t);return 0==o||0==n?t:o/n+t},t.Overview=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.Overview,t.Container),t.Overview.MIN_WINDOW_SIZE=10,t.Overview.DEFAULT_VERTICAL_TIMEAXIS_SIZE=40,t.Overview.DEFAULT_HORIZONTAL_TIMEAXIS_SIZE=20,t.Overview.HANDLE_PADDING_SIZE=20,t.Overview.prototype.Init=function(e,n,o){t.Overview.superclass.Init.call(this,e),this.initDefaults(),this._callback=n,this._callbackObj=o,this._lastChildIndex=6,(null!=this._callback||null!=this._callbackObj)&&(this.EventManager=new i(this,e,n,o),this.EventManager.addListeners(this),t.OverviewUtils.supportsTouch()?(this.addEvtListener(t.TouchEvent.TOUCHSTART,this.HandleTouchStart,!1,this),this.addEvtListener(t.TouchEvent.TOUCHMOVE,this.HandleTouchMove,!1,this),this.addEvtListener(t.TouchEvent.TOUCHEND,this.HandleTouchEnd,!1,this),this.addEvtListener(t.MouseEvent.CLICK,this.HandleShapeClick,!1,this)):(this.addEvtListener(t.MouseEvent.MOUSEOVER,this.HandleShapeMouseOver,!1,this),this.addEvtListener(t.MouseEvent.MOUSEOUT,this.HandleShapeMouseOut,!1,this),this.addEvtListener(t.MouseEvent.CLICK,this.HandleShapeClick,!1,this)))},t.Overview.prototype.initDefaults=function(){this.Defaults=new e},t.Overview.prototype.setViewportRange=function(t,e,i,o){if(null!=t&&null!=e){var r=this.getDateXPosition(t),s=this.getDateXPosition(e);if(s>r){r<this.getMinimumPositionX()&&(r=this.getMinimumPositionX()),s>this.getMaximumPositionX()&&(s=this.getMaximumPositionX());var a=Math.max(s-r,this.getMinimumWindowWidth()),l=this.getSlidingWindow();this.isRTL()?this.setSlidingWindowPosX(l,this.Width-(r+a)):this.setSlidingWindowPosX(l,r),n._setSlidingWindowWidth(this,l,a)}}if(null!=i&&null!=o){var h=this.getDateYPosition(i),d=this.getDateYPosition(o);if(d>h){h<this.getMinimumPositionY()&&(h=this.getMinimumPositionY()),d>this.getMaximumPositionY()&&(d=this.getMaximumPositionY());var g=Math.max(d-h,this.getMinimumWindowHeight());l=this.getSlidingWindow(),this.setSlidingWindowPosY(l,h),n._setSlidingWindowHeight(this,l,g)}}n._updateBorderAroundSlidingWindow(this)},t.Overview.prototype.isFeatureOff=function(e){return null!=this._featuresOff&&-1!=t.ArrayUtils.getIndex(this._featuresOff,e)},t.Overview.prototype.isAnimationOnClick=function(){return!("off"===this._animationOnClick)},t.Overview.prototype.render=function(e,i,o){if(null!=i&&null!=o&&(this.Width=i,this.Height=o),null==e){var r=this.getSlidingWindow();if(this._xMin&&this._xMax){var s=this.getSlidingWindowPosX(r);null!=r&&0!=s&&(this._x1=t.OverviewUtils.getPositionDate(this._xMin,this._xMax,s,this.Width))}this._yMin&&this._yMax&&(s=this.getSlidingWindowPosY(r),null!=r&&0!=s&&(this._y1=t.OverviewUtils.getPositionDate(this._yMin,this._yMax,s,this.Height))),this.removeChildren()}else{this.SetOptions(e);var a=this.Parse(this.Options);this._applyParsedProperties(a)}n.renderOverview(this)},t.Overview.prototype.SetOptions=function(t){this.Options=this.Defaults.calcOptions(t)},t.Overview.prototype.getParser=function(e){return new t.OverviewParser(this)},t.Overview.prototype.Parse=function(t){return this.getParser(t).parse(t)},t.Overview.prototype._applyParsedProperties=function(e){this._xMin=e.xMin,this._xMax=e.xMax,this._x1=e.x1,this._x2=e.x2,this._yMin=e.yMin,this._yMax=e.yMax,this._y1=e.y1,this._y2=e.y2,this._currentTime=e.currentTime,this._animationOnClick=e.animationOnClick,this._leftMargin=Math.max(0,e.leftMargin),this._rightMargin=Math.max(0,e.rightMargin),isNaN(this._leftMargin)&&(this._leftMargin=0),isNaN(this._rightMargin)&&(this._rightMargin=0),this._orientation=e.orientation,this._isRtl=e.isRtl,null!=e.featuresOff&&(this._featuresOff=e.featuresOff.split(" ")),null!=e.minimumWindowSize&&e.minimumWindowSize>0&&(this._minimumWindowSize=e.minimumWindowSize),this._timeAxisInfo=e.timeAxisInfo,null!=e.timeAxisInfo&&(this._ticks=this._timeAxisInfo.ticks),this._formattedTimeRanges=e.formattedTimeRanges,this._borderTopStyle=o.getBorderTopStyle(this.Options),this._borderTopColor=o.getBorderTopColor(this.Options),this._windowBackgroundColor=o.getWindowBackgroundColor(this.Options),this._windowBackgroundAlpha=o.getWindowBackgroundAlpha(this.Options),this._windowBorderTopStyle=o.getWindowBorderTopStyle(this.Options),this._windowBorderRightStyle=o.getWindowBorderRightStyle(this.Options),this._windowBorderBottomStyle=o.getWindowBorderBottomStyle(this.Options),this._windowBorderLeftStyle=o.getWindowBorderLeftStyle(this.Options),this._windowBorderTopColor=o.getWindowBorderTopColor(this.Options),this._windowBorderRightColor=o.getWindowBorderRightColor(this.Options),this._windowBorderBottomColor=o.getWindowBorderBottomColor(this.Options),this._windowBorderLeftColor=o.getWindowBorderLeftColor(this.Options),this._handleTextureColor=o.getHandleTextureColor(this.Options),this._handleFillColor=o.getHandleFillColor(this.Options),this._horHandleBackgroundImage=o.getHandleBackgroundImage(this.Options,!1),this._horHandleWidth=o.getHandleWidth(this.Options,!1),this._horHandleHeight=o.getHandleHeight(this.Options,!1),this._vertHandleBackgroundImage=o.getHandleBackgroundImage(this.Options,!0),this._vertHandleWidth=o.getHandleWidth(this.Options,!0),this._vertHandleHeight=o.getHandleHeight(this.Options,!0),this._overviewBackgroundColor=o.getOverviewBackgroundColor(this.Options),this._currentTimeIndicatorColor=o.getCurrentTimeIndicatorColor(this.Options),this._timeIndicatorColor=o.getTimeIndicatorColor(this.Options),this._timeAxisBarColor=o.getTimeAxisBarColor(this.Options),this._timeAxisBarOpacity=o.getTimeAxisBarAlpha(this.Options),this._leftFilterPanelColor=o.getLeftFilterPanelColor(this.Options),this._leftFilterPanelAlpha=o.getLeftFilterPanelAlpha(this.Options),this._rightFilterPanelColor=o.getRightFilterPanelColor(this.Options),this._rightFilterPanelAlpha=o.getRightFilterPanelAlpha(this.Options),this._labelStyle=new t.CSSStyle("font-weight:bold")},t.Overview.prototype.getDateXPosition=function(e){return Math.max(this.getMinimumPositionX(),t.OverviewUtils.getDatePosition(this._xMin,this._xMax,e,this.getOverviewWidth())+this._leftMargin)},t.Overview.prototype.getDateYPosition=function(e){return Math.max(this.getMinimumPositionY(),t.OverviewUtils.getDatePosition(this._yMin,this._yMax,e,this.getOverviewHeight()))},t.Overview.prototype.getXPositionDate=function(e){return t.OverviewUtils.getPositionDate(this._xMin,this._xMax,Math.max(this.getMinimumPositionX()-this._leftMargin,e-this._leftMargin),this.getOverviewWidth())},t.Overview.prototype.getYPositionDate=function(e){return t.OverviewUtils.getPositionDate(this._yMin,this._yMax,Math.max(this.getMinimumPositionY(),e),this.getOverviewHeight())},t.Overview.prototype.isRTL=function(){return"true"==this._isRtl},t.Overview.prototype.isHorizontalRTL=function(){return this.isRTL()&&!this.isVertical()},t.Overview.prototype.isVertical=function(){return"vertical"==this._orientation},t.Overview.prototype.isOverviewAbove=function(){return"above"==this.Options.overviewPosition},t.Overview.prototype.setMargins=function(t,e){!isNaN(t)&&null!=t&&t>0&&(this._leftMargin=t),!isNaN(e)&&null!=e&&e>0&&(this._rightMargin=e)},t.Overview.prototype.getOverviewSize=function(){return this.isVertical()?this.Height-this._leftMargin-this._rightMargin:this.Width-this._leftMargin-this._rightMargin},t.Overview.prototype.getOverviewWidth=function(){return this.Width-this._leftMargin-this._rightMargin},t.Overview.prototype.getOverviewHeight=function(){return this.Height},t.Overview.prototype.getMinimumPositionX=function(){return this._leftMargin},t.Overview.prototype.getMinimumPositionY=function(){return 0},t.Overview.prototype.getMaximumPositionX=function(){return this.Width-this._rightMargin},t.Overview.prototype.getMaximumPositionY=function(){return this.Height},t.Overview.prototype.getMinimumWindowWidth=function(){return null!=this._minWinSize?this._minWinSize:null!=this._minimumWindowSize?(this._minWinSize=t.OverviewUtils.getDatePosition(this._xMin,this._xMax,this._xMin+this._minimumWindowSize,this.getOverviewWidth()),this._minWinSize):t.Overview.MIN_WINDOW_SIZE},t.Overview.prototype.getMinimumWindowHeight=function(){return null!=this._minWinSize?this._minWinSize:null!=this._minimumWindowSize?(this._minWinSize=t.OverviewUtils.getDatePosition(this._yMin,this._yMax,this._yMin+this._minimumWindowSize,this.getOverviewHeight()),this._minWinSize):t.Overview.MIN_WINDOW_SIZE},t.Overview.prototype.getMaximumWindowWidth=function(){return this.Width},t.Overview.prototype.getMaximumWindowHeight=function(){return this.Height},t.Overview.prototype.getGrippySize=function(){return 10},t.Overview.prototype.getHandleStart=function(){return t.OverviewUtils.supportsTouch()?this.getHandleSize()/2:0},t.Overview.prototype.getHandleSize=function(){return t.OverviewUtils.supportsTouch()?30:10},t.Overview.prototype.isHandle=function(t){var e=t.getId();return"lh"==e||"rh"==e||"lhb"==e||"rhb"==e||"th"==e||"bh"==e||"thb"==e||"bhb"==e||"hgrpy"==e||"vgrpy"==e||"lbgrh"==e||"rbgrh"==e||null!=t.getParent()&&("hgrpy"==t.getParent().getId()||"vgrpy"==t.getParent().getId())},t.Overview.prototype.isLeftOrRightHandle=function(t){var e=t.getId();return"lh"==e||"rh"==e||"lhb"==e||"rhb"==e||"hgrpy"==e||"lbgrh"==e||"rbgrh"==e||null!=t.getParent()&&"hgrpy"==t.getParent().getId()},t.Overview.prototype.isTopOrBottomHandle=function(t){var e=t.getId();return"th"==e||"bh"==e||"thb"==e||"bhb"==e||"vgrpy"==e||null!=t.getParent()&&"vgrpy"==t.getParent().getId()},t.Overview.prototype.getTimeAxisWidth=function(){if(null==this._timeAxisInfo)return 0;if(null==this._timeAxisWidth){var e=parseInt(this._timeAxisInfo.width,10);!isNaN(e)&&e<this.Width?this._timeAxisWidth=e:this._timeAxisWidth=t.Overview.DEFAULT_VERTICAL_TIMEAXIS_SIZE}return this._timeAxisWidth},t.Overview.prototype.getTimeAxisHeight=function(){if(null==this._timeAxisInfo)return 0;if(null==this._timeAxisHeight){var e=parseInt(this._timeAxisInfo.height,10);!isNaN(e)&&e<this.Height?this._timeAxisHeight=e:this._timeAxisHeight=t.Overview.DEFAULT_HORIZONTAL_TIMEAXIS_SIZE}return this._timeAxisHeight},t.Overview.prototype.getPageX=function(e){return t.OverviewUtils.supportsTouch()&&null!=e.targetTouches?e.targetTouches.length>0?e.targetTouches[0].pageX:null:e.pageX},t.Overview.prototype.getPageY=function(e){return t.OverviewUtils.supportsTouch()&&null!=e.targetTouches?e.targetTouches.length>0?e.targetTouches[0].pageY:null:e.pageY},t.Overview.prototype.isBackgroundRendered=function(){return!0},t.Overview.prototype.isLeftAndRightFilterRendered=function(){return!1},t.Overview.prototype.getSlidingWindow=function(){return this.getChildAt(1)},t.Overview.prototype.getSlidingWindowWidth=function(){if(this.isHorizontalScrollingEnabled()){var e=Math.max(this.getMinimumPositionX(),t.OverviewUtils.getDatePosition(this._xMin,this._xMax,this._x1,this.Width));return Math.min(this.getMaximumPositionX(),Math.max(this.getMinimumPositionX(),t.OverviewUtils.getDatePosition(this._xMin,this._xMax,this._x2,this.Width)))-e}return this.Width},t.Overview.prototype.getSlidingWindowHeight=function(){if(this.isVerticalScrollingEnabled()){var e=Math.max(this.getMinimumPositionY(),t.OverviewUtils.getDatePosition(this._yMin,this._yMax,this._y1,this.Height));return Math.min(this.getMaximumPositionY(),Math.max(this.getMinimumPositionY(),t.OverviewUtils.getDatePosition(this._yMin,this._yMax,this._y2,this.Height)))-e}return this.Height},t.Overview.prototype.getLeftBackground=function(){return this.isLeftAndRightFilterRendered()?this.getChildAt(3):null},t.Overview.prototype.getRightBackground=function(){return this.isLeftAndRightFilterRendered()?this.getChildAt(4):null},t.Overview.prototype.getLeftBackgroundHandle=function(){return this.isLeftAndRightFilterRendered()&&!this.isFeatureOff("zoom")?this.getChildAt(5):null},t.Overview.prototype.getRightBackgroundHandle=function(){return this.isLeftAndRightFilterRendered()&&!this.isFeatureOff("zoom")?this.getChildAt(6):null},t.Overview.prototype.getLeftHandle=function(){return this._leftHandle},t.Overview.prototype.getRightHandle=function(){return this._rightHandle},t.Overview.prototype.getLeftTopBar=function(){var t=this._lastChildIndex-2;return this.getChildAt(this.getNumChildren()-t)},t.Overview.prototype.getRightTopBar=function(){var t=this._lastChildIndex-3;return this.getChildAt(this.getNumChildren()-t)},t.Overview.prototype.getBottomBar=function(){var t=this._lastChildIndex-4;return this.getChildAt(this.getNumChildren()-t)},t.Overview.prototype.getTopBar=function(){var t=this._lastChildIndex-5;return this.getChildAt(this.getNumChildren()-t)},t.Overview.prototype.setLinePos=function(t,e,i){this.isVertical()?(-1!=e&&t.setY1(e),-1!=i&&t.setY2(i)):(-1!=e&&t.setX1(e),-1!=i&&t.setX2(i))},t.Overview.prototype.setLinePosX=function(t,e,i){-1!=e&&t.setX1(e),-1!=i&&t.setX2(i)},t.Overview.prototype.setLinePosY=function(t,e,i){-1!=e&&t.setY1(e),-1!=i&&t.setY2(i)},t.Overview.prototype.getLinePos1=function(t){return this.isVertical()?t.getY1():t.getX1()},t.Overview.prototype._findDrawable=function(t){var e=t.target;if(null!=e){var i=e.getId();if(null==i)return null;if("_border"==i.substr(i.length-7))return this.getChildAfter(e);if("tick"!=i.substr(0,4)&&"ltb"!=i&&"rtb"!=i&&"bb"!=i&&"tab"!=i)return e}return null},t.Overview.prototype.isMovable=function(t){return!("window"!=t.getId()&&"ftr"!=t.getId()&&"sta"!=t.getId()&&!this.isHandle(t))},t.Overview.prototype.setRectPos=function(t,e){this.isVertical()?t.setY(e):t.setX(e)},t.Overview.prototype.getRectPos=function(t){return this.isVertical()?t.getY():t.getX()},t.Overview.prototype.getRectSize=function(t){return this.isVertical()?t.getHeight():t.getWidth()},t.Overview.prototype.setRectSize=function(t,e){this.isVertical()?t.setHeight(e):t.setWidth(e)},t.Overview.prototype.getSlidingWindowPos=function(t){return this.isVertical()?t.getTranslateY():t.getTranslateX()},t.Overview.prototype.getSlidingWindowPosX=function(t){return t.getTranslateX()},t.Overview.prototype.getSlidingWindowPosY=function(t){return t.getTranslateY()},t.Overview.prototype.setSlidingWindowPosX=function(e,i){if(i=Math.max(this.getMinimumPositionX(),i),e.setTranslateX(i),this.isLeftAndRightFilterRendered()){this.getLeftBackground().setWidth(i);var n=i+this.getSlidingWindowSize(e),o=this.getRightBackground();if(o.setX(n),o.setWidth(Math.max(0,this.Width-n)),t.OverviewUtils.supportsTouch()&&!this.isFeatureOff("zoom")){var r=this.getHandleStart();this.getLeftBackgroundHandle().setX(i-r),this.getRightBackgroundHandle().setX(n)}}},t.Overview.prototype.setSlidingWindowPosY=function(t,e){e=Math.max(this.getMinimumPositionY(),e),t.setTranslateY(e)},t.Overview.prototype.getSlidingWindowSize=function(t){return this.getRectSize(t)},t.Overview.prototype.parseDataXML=function(t,e){},t.Overview.prototype.animateSlidingWindow=function(e,i){var n=this.getSlidingWindow();if(null!=e&&e!=this.getSlidingWindowPosX(n)||null!=i&&i!=this.getSlidingWindowPosY(n)){var o=this.getLeftHandle(),r=this.getRightHandle(),s=this.getLeftTopBar(),a=this.getRightTopBar(),l=this.getBottomBar(),h=this.getTopBar(),d=!1,g=this.isAnimationOnClick()?new t.Animator(this.getCtx(),.5,0,t.Easing.linear):null;if(this.isVerticalScrollingEnabled()&&null!=i){var v=n.getTranslateY,u=n.setTranslateY,w=o.getY1,_=o.setY1,p=o.getY2,c=o.setY2,f=r.getY1,m=r.setY1,P=r.getY2,O=r.setY2,S=l.getY1,y=l.setY1,C=l.getY2,E=l.setY2,x=h.getY1,T=h.setY1,W=h.getY2,H=h.setY2,M=this.getMinimumPositionY(),b=this.getMaximumPositionY(),X=n.getHeight();i=Math.max(M,Math.min(b-X,i)),this.animateProperty(g,n,v,u,i),this.isVertical()?(this.animateProperty(g,o,w,_,i),this.animateProperty(g,o,p,c,i),this.animateProperty(g,r,f,m,i+X),this.animateProperty(g,r,P,O,i+X),this.animateProperty(g,l,S,y,i),this.animateProperty(g,h,x,T,i),this.animateProperty(g,l,C,E,i+X),this.animateProperty(g,h,W,H,i+X),this.animateProperty(g,s,s.getY2,s.setY2,i+1),this.animateProperty(g,a,a.getY1,a.setY1,i+X-1)):(this.animateProperty(g,o,w,_,i),this.animateProperty(g,o,p,c,i+X),this.animateProperty(g,r,f,m,i),this.animateProperty(g,r,P,O,i+X),this.animateProperty(g,l,S,y,i+X),this.animateProperty(g,h,x,T,i),this.animateProperty(g,l,C,E,i+X),this.animateProperty(g,h,W,H,i)),d=!0}if(this.isHorizontalScrollingEnabled()&&null!=e){var Y=n.getTranslateX,D=n.setTranslateX,B=o.getX1,L=o.setX1,A=o.getX2,R=o.setX2,I=r.getX1,k=r.setX1,N=r.getX2,U=r.setX2,F=l.getX1,z=l.setX1,V=l.getX2,G=l.setX2,K=h.getX1,j=h.setX1,Z=h.getX2,q=h.setX2,J=this.getMinimumPositionX(),Q=this.getMaximumPositionX(),$=n.getWidth();e=Math.max(J,Math.min(Q-$,e)),this.animateProperty(g,n,Y,D,e),this.animateProperty(g,o,B,L,e),this.animateProperty(g,o,A,R,e),this.animateProperty(g,r,I,k,e+$),this.animateProperty(g,r,N,U,e+$),this.isVertical()||(this.animateProperty(g,s,s.getX2,s.setX2,e+1),this.animateProperty(g,a,a.getX1,a.setX1,e+$-1)),this.animateProperty(g,l,F,z,e),this.animateProperty(g,h,K,j,e),this.animateProperty(g,l,V,G,e+$),this.animateProperty(g,h,Z,q,e+$),d=!0}if(this.isLeftAndRightFilterRendered()){var tt=this.getLeftBackground(),et=tt.getWidth,it=tt.setWidth;this.animateProperty(g,tt,et,it,e);var nt=e+$,ot=this.getRightBackground(),rt=ot.getWidth,st=ot.setWidth,at=ot.getX,lt=ot.setX;if(this.animateProperty(g,ot,rt,st,this.Width-nt),this.animateProperty(g,ot,at,lt,nt),t.OverviewUtils.supportsTouch()&&!this.isFeatureOff("zoom")){var ht=this.getHandleStart(),dt=this.getLeftBackgroundHandle(),gt=dt.getX,vt=dt.setX,ut=this.getRightBackgroundHandle(),wt=ut.getX,_t=ut.setX;this.animateProperty(g,dt,gt,vt,e-ht),this.animateProperty(g,ut,wt,_t,nt)}d=!0}null!=g&&d&&g.play()}},t.Overview.prototype.animateProperty=function(e,i,n,o,r){null!=e?e.addProp(t.Animator.TYPE_NUMBER,i,n,o,r):o.call(i,r)},t.Overview.prototype.HandleShapeMouseOver=function(e){var i=this._findDrawable(e);if(i&&"bg"!=i.getId()&&"ocd"!=i.getId())if("label"==i.getId().substr(0,5)&&(i instanceof t.OutputText||i instanceof t.BackgroundOutputText))i.isTruncated()&&this.getCtx().getTooltipManager().showDatatip(e.pageX,e.pageY,i._rawText,"#000000");else if("window"!=i.getId()&&"ftr"!=i.getId()&&"arr"!=i.getId()&&!this.isHandle(i))return i},t.Overview.prototype.HandleShapeMouseOut=function(t){null==this._moveDrawable&&this.setCursor("default");var e=this._findDrawable(t);if(null!=e)return e},t.Overview.prototype.HandleShapeClick=function(e,i,n){e.stopPropagation();var o=this._findDrawable(e);if(o&&"window"!=o.getId()&&!this.isHandle(o)){if("bg"!=o.getId()&&"label"!=o.getId().substr(0,5)&&"ocd"!=o.getId()&&"lbg"!=o.getId()&&"rbg"!=o.getId())return o;null==i&&(i=e.pageX),null==n&&(n=e.pageY);var r=this.getCtx().pageToStageCoords(i,n);r=this.stageToLocal(r);var s=this.getSlidingWindow();if(this.isVerticalScrollingEnabled())var a=r.y,l=this.Height,h=a-s.getHeight()/2;if(this.isHorizontalScrollingEnabled()){var d=r.x,g=this.Width,v=d-s.getWidth()/2;this.isRTL()&&(d=g-d)}this.animateSlidingWindow(v,h);var u=new t.OverviewEvent(t.OverviewEvent.SUBTYPE_SCROLL_TIME);if(null!=v){var w=s.getWidth();if(v=Math.max(this.getMinimumPositionX(),Math.min(v,g-w)),this.isRTL())var _=this.getXPositionDate(g-(v+w)),p=this.getXPositionDate(g-v);else _=this.getXPositionDate(v),p=this.getXPositionDate(v+w);u.setNewX1(_),u.setNewX2(p)}if(null!=h){var c=s.getHeight();h=Math.max(this.getMinimumPositionY(),Math.min(h,l-c)),u.setNewY1(this.getYPositionDate(h)),u.setNewY2(this.getYPositionDate(h+c))}this.dispatchEvent(u)}},t.Overview.prototype.beginDragPan=function(e,i,n){var o=this._findDrawable(e);if(null!=o&&this.isMovable(o)){if("ftr"!=o.getId()&&"sta"!=o.getId()||(o=this.getSlidingWindow()),this._initX=i,this._initY=n,this.isHandle(o)){var r=this.getSlidingWindow();"hgrpy"!=o.getParent().getId()&&"vgrpy"!=o.getParent().getId()||(o=o.getParent());var s=o.getId();"hgrpy"!=s&&"vgrpy"!=s||(s=(o=r.getChildBefore(o)).getId()),"lh"!=s&&"rh"!=s&&"th"!=s&&"bh"!=s||(s=(o=r.getChildBefore(o)).getId()),"lbgrh"==s&&(o=r.getChildAt(0)),"rbgrh"==s&&(o=r.getChildAt(r.getNumChildren()-3)),this.isLeftOrRightHandle(o)?(this._isHorizontalResize=!0,this.isRTL()?(this._oldEndPosX=this.Width-r.getX(),this._oldStartPosX=this._oldEndPosX-r.getWidth()):(this._oldStartPosX=r.getX(),this._oldEndPosX=this._oldStartPosX+r.getWidth()),t.OverviewUtils.supportsTouch()||(o.setX(0-t.Overview.HANDLE_PADDING_SIZE),o.setWidth(2*(o.getWidth()+t.Overview.HANDLE_PADDING_SIZE)))):(this._isHorizontalResize=!1,this._oldStartPosY=r.getY(),this._oldEndPosY=this._oldStartPosY+r.getHeight(),t.OverviewUtils.supportsTouch()||(o.setY(0-t.Overview.HANDLE_PADDING_SIZE),o.setHeight(2*(o.getHeight()+t.Overview.HANDLE_PADDING_SIZE)))),this.overrideCursors(o.getCursor())}this._moveDrawable=o;var a=new t.OverviewEvent(t.OverviewEvent.SUBTYPE_PRE_RANGECHANGE);return this.dispatchEvent(a),!0}return!1},t.Overview.prototype.overrideCursors=function(t){var e=this.getSlidingWindow();if(null!=e&&e.setCursor(t),this.isLeftAndRightFilterRendered()){var i=this.getLeftBackground(),n=this.getRightBackground();null!=i&&null!=n&&(i.setCursor(t),n.setCursor(t))}},t.Overview.prototype.resetCursors=function(){var t=this.getSlidingWindow();if(null!=t&&t.setCursor("move"),this.isLeftAndRightFilterRendered()){var e=this.getLeftBackground(),i=this.getRightBackground();null!=e&&null!=i&&(e.setCursor("default"),i.setCursor("default"))}},t.Overview.prototype.endDragPan=function(){null!=this._moveDrawable&&1==this._isDragPanning&&("window"==this._moveDrawable.getId()?this.handleWindowDrag(t.OverviewEvent.SUBTYPE_SCROLL_END):this.isHandle(this._moveDrawable)&&(this.finishHandleDrag(0,0),t.OverviewUtils.supportsTouch()||(this.isTopOrBottomHandle(this._moveDrawable)?(this._moveDrawable.setY(0),this._moveDrawable.setHeight(this.getHandleSize())):this.isLeftOrRightHandle(this._moveDrawable)&&(this._moveDrawable.setX(0),this._moveDrawable.setWidth(this.getHandleSize()))),this.resetCursors()),this._isDragPanning=!1,this._moveDrawable=null,this._initX=-1)},t.Overview.prototype.contDragPan=function(e,i,n){if(null!=this._moveDrawable&&-1!=this._initX){this._isDragPanning=!0;var o=i-this._initX,r=n-this._initY;this._initX=i,this._initY=n,"window"==this._moveDrawable.getId()?this.handleWindowDrag(t.OverviewEvent.SUBTYPE_SCROLL_POS,o,r):"lh"==this._moveDrawable.getId()||"lhb"==this._moveDrawable.getId()?this.handleLeftOrRightHandleDragPositioning(e,o,!0):"rh"==this._moveDrawable.getId()||"rhb"==this._moveDrawable.getId()?this.handleLeftOrRightHandleDragPositioning(e,o,!1):"th"==this._moveDrawable.getId()||"thb"==this._moveDrawable.getId()?this.handleTopOrBottomHandleDragPositioning(e,r,!0):"bh"!=this._moveDrawable.getId()&&"bhb"!=this._moveDrawable.getId()||this.handleTopOrBottomHandleDragPositioning(e,r,!1)}},t.Overview.prototype.HandleTouchStart=function(t){var e=t.touches;this._touchStartX=e[0].pageX,this._touchStartY=e[0].pageY,2==e.length&&(t.preventDefault(),this._touchStartX2=e[1].pageX,this._touchStartY2=e[1].pageY,Math.abs(this._touchStartY-this._touchStartY2)<20?this._counter=0:(this._touchStartX=null,this._touchStartY=null,this._touchStartX2=null,this._touchStartY2=null))},t.Overview.prototype.HandleTouchMove=function(t){t.preventDefault();var e=t.touches;if(null!=this._touchStartX2&&null!=this._touchStartY2){if(this._counter<50)return void this._counter++;var i=e[1].pageX-this._touchStartX2;this.handleRightHandleDragPositioning(null,i,0),this._touchStartX2=e[1].pageX,this._counter=0}else{var n=Math.abs(this._touchStartX-e[0].pageX),o=Math.abs(this._touchStartY-e[0].pageY);(n>3||o>3)&&(this._touchStartX=null,this._touchStartY=null)}},t.Overview.prototype.HandleTouchEnd=function(t){null!=this._touchStartX2&&null!=this._touchStartY2?this.finishHandleDrag(0,0):null!=this._touchStartX&&null!=this._touchStartY&&this.HandleShapeClick(t,this._touchStartX,this._touchStartY),this._touchStartX=null,this._touchStartY=null,this._touchStartX2=null,this._touchStartY2=null},t.Overview.prototype.stopDragAction=function(){this.endDragPan()},t.Overview.prototype.handleWindowDrag=function(e,i,o){var r,s,a,l,h=this.getSlidingWindow(),d=!1,g=this.getSlidingWindowPosX(h),v=this.getSlidingWindowPosY(h),u=h.getWidth(),w=h.getHeight();if(e===t.OverviewEvent.SUBTYPE_SCROLL_POS){if(this.isHorizontalScrollingEnabled()&&0!==i){var _=this.getMinimumPositionX(),p=this.getMaximumPositionX();g+i<=_?this.setSlidingWindowPosX(h,_):g+u+i>=p?this.setSlidingWindowPosX(h,p-u):this.setSlidingWindowPosX(h,g+i);var c=this.getSlidingWindowPosX(h);c!==g&&(g=c,d=!0)}if(this.isVerticalScrollingEnabled()&&0!==o){var f=this.getMinimumPositionY(),m=this.getMaximumPositionY();v+o<=f?this.setSlidingWindowPosY(h,f):v+w+o>=m?this.setSlidingWindowPosY(h,m-w):this.setSlidingWindowPosY(h,v+o);var P=this.getSlidingWindowPosY(h);P!==v&&(v=P,d=!0)}d&&n._updateBorderAroundSlidingWindow(this)}(d||e===t.OverviewEvent.SUBTYPE_SCROLL_END)&&(this.isHorizontalScrollingEnabled()&&(this.isRTL()?(r=this.getXPositionDate(this.Width-(g+u)),s=this.getXPositionDate(this.Width-g)):(r=this.getXPositionDate(g),s=this.getXPositionDate(g+u))),this.isVerticalScrollingEnabled()&&(a=this.getYPositionDate(v),l=this.getYPositionDate(v+w)),this.fireScrollEvent(e,r,s,a,l))},t.Overview.prototype.fireScrollEvent=function(e,i,n,o,r){var s=new t.OverviewEvent(e);this.isHorizontalScrollingEnabled()&&(s.setNewX1(i),s.setNewX2(n)),this.isVerticalScrollingEnabled()&&(s.setNewY1(o),s.setNewY2(r)),this.dispatchEvent(s)},t.Overview.prototype.handleLeftOrRightHandleDragPositioning=function(e,i,o){if(0!=i){var r=this.getSlidingWindow(),s=this.getSlidingWindowPosX(r),a=r.getWidth();if(o){if(a-i<=this.getMinimumWindowWidth())return;if(s+i<=this.getMinimumPositionX())return;var l=this.getCtx().pageToStageCoords(this.getPageX(e),this.getPageY(e)).x;if(l=this.stageToLocal(l),i>0&&l<=s)return;if(i<0&&l>=s)return;this.setSlidingWindowPosX(r,s+i),n._setSlidingWindowWidth(this,r,a-i)}else{if(a+i<=this.getMinimumWindowWidth())return;if(s+a+i>=this.getMaximumPositionX())return;if(l=this.getCtx().pageToStageCoords(this.getPageX(e),this.getPageY(e)).x,l=this.stageToLocal(l),i>0&&l<=s+a)return;if(i<0&&l>=s+a)return;n._setSlidingWindowWidth(this,r,a+i)}if(n._updateBorderAroundSlidingWindow(this),this.isRangeChangingSupported()){var h=new t.OverviewEvent(t.OverviewEvent.SUBTYPE_RANGECHANGING);if(this.isRTL())var d=this.getXPositionDate(this.Width-(this.getSlidingWindowPosX(r)+r.getWidth())),g=this.getXPositionDate(this.Width-this.getSlidingWindowPosX(r));else d=this.getXPositionDate(this.getSlidingWindowPosX(r)),g=this.getXPositionDate(this.getSlidingWindowPosX(r)+r.getWidth());h.setNewX1(d),h.setNewX2(g),this.dispatchEvent(h)}}},t.Overview.prototype.handleTopOrBottomHandleDragPositioning=function(e,i,o){if(0!=i){var r=this.getSlidingWindow(),s=this.getSlidingWindowPosY(r),a=r.getHeight();if(o){if(a-i<=this.getMinimumWindowHeight())return;if(s+i<=this.getMinimumPositionY())return;var l=this.getCtx().pageToStageCoords(this.getPageX(e),this.getPageY(e)).y;if(l=this.stageToLocal(l),i>0&&l<=s)return;if(i<0&&l>=s)return;this.setSlidingWindowPosY(r,s+i),n._setSlidingWindowHeight(this,r,a-i)}else{if(a+i<=this.getMinimumWindowHeight())return;if(s+a+i>=this.getMaximumPositionY())return;if(l=this.getCtx().pageToStageCoords(this.getPageX(e),this.getPageY(e)).y,l=this.stageToLocal(l),i>0&&l<=s+a)return;if(i<0&&l>=s+a)return;n._setSlidingWindowHeight(this,r,a+i)}if(n._updateBorderAroundSlidingWindow(this),this.isRangeChangingSupported()){var h=new t.OverviewEvent(t.OverviewEvent.SUBTYPE_RANGECHANGING),d=this.getYPositionDate(this.getSlidingWindowPosY(r)),g=this.getYPositionDate(this.getSlidingWindowPosY(r)+r.getHeight());h.setNewY1(d),h.setNewY2(g),this.dispatchEvent(h)}}},t.Overview.prototype.isHorizontalScrollingEnabled=function(){return null!=this._xMin&&null!=this._xMax},t.Overview.prototype.isVerticalScrollingEnabled=function(){return null!=this._yMin&&null!=this._yMax},t.Overview.prototype.isRangeChangingSupported=function(){return!0},t.Overview.prototype.finishHandleDrag=function(e,i){var n=this.getSlidingWindow(),o=new t.OverviewEvent(t.OverviewEvent.SUBTYPE_RANGECHANGE);if(this._isHorizontalResize){var r=this.getXPositionDate(this._oldStartPosX),s=this.getXPositionDate(this._oldEndPosX);if(this.isRTL())var a=this.getXPositionDate(this.Width-(this.getSlidingWindowPosX(n)+n.getWidth())),l=this.getXPositionDate(this.Width-this.getSlidingWindowPosX(n));else a=this.getXPositionDate(this.getSlidingWindowPosX(n)),l=this.getXPositionDate(this.getSlidingWindowPosX(n)+n.getWidth());o.setOldX1(r),o.setOldX2(s),o.setNewX1(a),o.setNewX2(l)}else{var h=this.getYPositionDate(this._oldStartPosY),d=this.getYPositionDate(this._oldEndPosY),g=this.getYPositionDate(this.getSlidingWindowPosY(n)),v=this.getYPositionDate(this.getSlidingWindowPosY(n)+n.getHeight());o.setOldY1(h),o.setOldY2(d),o.setNewY1(g),o.setNewY2(v)}this.dispatchEvent(o)},t.Overview.prototype.dispatchEvent=function(e){t.EventDispatcher.dispatchEvent(this._callback,this._callbackObj,this,e)},t.Overview.prototype.destroy=function(){this.EventManager&&(this.EventManager.removeListeners(this),this.EventManager.destroy(),this.EventManager=null),t.OverviewUtils.supportsTouch()?(this.removeEvtListener(t.TouchEvent.TOUCHSTART,this.HandleTouchStart,!1,this),this.removeEvtListener(t.TouchEvent.TOUCHMOVE,this.HandleTouchMove,!1,this),this.removeEvtListener(t.TouchEvent.TOUCHEND,this.HandleTouchEnd,!1,this),this.removeEvtListener(t.MouseEvent.CLICK,this.HandleShapeClick,!1,this)):(this.removeEvtListener(t.MouseEvent.MOUSEOVER,this.HandleShapeMouseOver,!1,this),this.removeEvtListener(t.MouseEvent.MOUSEOUT,this.HandleShapeMouseOut,!1,this),this.removeEvtListener(t.MouseEvent.CLICK,this.HandleShapeClick,!1,this),this.removeEvtListener(t.KeyboardEvent.KEYDOWN,this.HandleKeyDown,!1,this),this.removeEvtListener(t.KeyboardEvent.KEYUP,this.HandleKeyUp,!1,this)),t.Overview.superclass.destroy.call(this)};var e=function(){this.Init({alta:e.VERSION_1})};t.Obj.createSubclass(e,t.BaseComponentDefaults),e.VERSION_1={overviewPosition:"below",style:{currentTimeIndicatorColor:"#c000d1",handleFillColor:"#ffffff",handleTextureColor:"#b3c6db",leftFilterPanelAlpha:.7,leftFilterPanelColor:"#ffffff",overviewBackgroundColor:"#e6ecf3",rightFilterPanelAlpha:.7,rightFilterPanelColor:"#ffffff",timeAxisBarColor:"#e5e5e5",timeAxisBarAlpha:1,timeIndicatorColor:"#bcc7d2",windowBackgroundAlpha:1,windowBackgroundColor:"#ffffff",windowBorderBottomColor:"#4f4f4f",windowBorderBottomStyle:"solid",windowBorderLeftColor:"#4f4f4f",windowBorderLeftStyle:"solid",windowBorderRightColor:"#4f4f4f",windowBorderRightStyle:"solid",windowBorderTopColor:"#4f4f4f",windowBorderTopStyle:"solid"}},t.OverviewParser=function(t){this.Init(t)},t.Obj.createSubclass(t.OverviewParser,t.Obj),t.OverviewParser.prototype.Init=function(t){this._view=t},t.OverviewParser.prototype.parse=function(t){var e=t;return this.ParseRootAttributes(e)},t.OverviewParser.prototype.ParseRootAttributes=function(e){var i=new Object;return i.animationOnClick=e.animationOnClick,null!=e.xMin&&(i.xMin=e.xMin),null!=e.xMax&&(i.xMax=e.xMax),null!=e.x1&&(i.x1=e.x1),null!=e.x2&&(i.x2=e.x2),null!=e.yMin&&(i.yMin=e.yMin),null!=e.yMax&&(i.yMax=e.yMax),null!=e.y1&&(i.y1=e.y1),null!=e.y2&&(i.y2=e.y2),null!=e.currentTime&&(i.currentTime=e.currentTime),i.orientation="horizontal",null!=e.orientation&&(i.orientation=e.orientation),i.featuresOff=e.featuresOff,i.minimumWindowSize=e.minimumWindowSize,i.leftMargin=e.leftMargin,i.rightMargin=e.rightMargin,i.overviewPosition="below",i.selectionMode="none",i.isRtl=t.Agent.isRightToLeft(this._view.getCtx()).toString(),null!=e.rtl&&(i.isRtl=e.rtl.toString()),i},t.OverviewParser.prototype.calculateWidth=function(t,e,i,n,o){var r=o*(e-t),s=n-i;return 0==r||0==s?0:r/s},t.OverviewEvent=function(e){this.Init(t.OverviewEvent.TYPE),this._subtype=e},t.Obj.createSubclass(t.OverviewEvent,t.BaseComponentEvent),t.OverviewEvent.TYPE="overview",t.OverviewEvent.SUBTYPE_PRE_RANGECHANGE="dropCallback",t.OverviewEvent.SUBTYPE_SCROLL_TIME="scrollTime",t.OverviewEvent.SUBTYPE_SCROLL_POS="scrollPos",t.OverviewEvent.SUBTYPE_SCROLL_END="scrollEnd",t.OverviewEvent.SUBTYPE_RANGECHANGE="rangeChange",t.OverviewEvent.SUBTYPE_RANGECHANGING="rangeChanging",t.OverviewEvent.OLD_X1_KEY="oldX1",t.OverviewEvent.NEW_X1_KEY="newX1",t.OverviewEvent.OLD_Y1_KEY="oldY1",t.OverviewEvent.NEW_Y1_KEY="newY1",t.OverviewEvent.OLD_X2_KEY="oldX2",t.OverviewEvent.NEW_X2_KEY="newX2",t.OverviewEvent.OLD_Y2_KEY="oldY2",t.OverviewEvent.NEW_Y2_KEY="newY2",t.OverviewEvent.prototype.getSubType=function(){return this._subtype},t.OverviewEvent.prototype.setOldX1=function(e){this.addParam(t.OverviewEvent.OLD_X1_KEY,e)},t.OverviewEvent.prototype.getOldX1=function(){return this.getParamValue(t.OverviewEvent.OLD_X1_KEY)},t.OverviewEvent.prototype.setNewX1=function(e){this.addParam(t.OverviewEvent.NEW_X1_KEY,e)},t.OverviewEvent.prototype.getNewX1=function(){return this.getParamValue(t.OverviewEvent.NEW_X1_KEY)},t.OverviewEvent.prototype.setOldY1=function(e){this.addParam(t.OverviewEvent.OLD_Y1_KEY,e)},t.OverviewEvent.prototype.getOldY1=function(){return this.getParamValue(t.OverviewEvent.OLD_Y1_KEY)},t.OverviewEvent.prototype.getNewY1=function(){return this.getParamValue(t.OverviewEvent.NEW_Y1_KEY)},t.OverviewEvent.prototype.setNewY1=function(e){this.addParam(t.OverviewEvent.NEW_Y1_KEY,e)},t.OverviewEvent.prototype.setOldX2=function(e){this.addParam(t.OverviewEvent.OLD_X2_KEY,e)},t.OverviewEvent.prototype.getOldX2=function(){return this.getParamValue(t.OverviewEvent.OLD_X2_KEY)},t.OverviewEvent.prototype.setNewX2=function(e){this.addParam(t.OverviewEvent.NEW_X2_KEY,e)},t.OverviewEvent.prototype.getNewX2=function(){return this.getParamValue(t.OverviewEvent.NEW_X2_KEY)},t.OverviewEvent.prototype.setOldY2=function(e){this.addParam(t.OverviewEvent.OLD_Y2_KEY,e)},t.OverviewEvent.prototype.getOldY2=function(){return this.getParamValue(t.OverviewEvent.OLD_Y2_KEY)},t.OverviewEvent.prototype.setNewY2=function(e){this.addParam(t.OverviewEvent.NEW_Y2_KEY,e)},t.OverviewEvent.prototype.getNewY2=function(){return this.getParamValue(t.OverviewEvent.NEW_Y2_KEY)};var i=function(t){this.Init(t.getCtx(),t.processEvent,t),this._overview=t};t.Obj.createSubclass(i,t.EventManager),i.prototype.addListeners=function(e){t.SvgDocumentUtils.addDragListeners(this._overview,this._onDragStart,this._onDragMove,this._onDragEnd,this)},i.prototype._onDragStart=function(e){return t.Agent.isTouchDevice()?this._onTouchDragStart(e):this._onMouseDragStart(e)},i.prototype._onDragMove=function(e){return t.Agent.isTouchDevice()?this._onTouchDragMove(e):this._onMouseDragMove(e)},i.prototype._onDragEnd=function(e){return t.Agent.isTouchDevice()?this._onTouchDragEnd(e):this._onMouseDragEnd(e)},i.prototype._getRelativePosition=function(e,i){return this._stageAbsolutePosition||(this._stageAbsolutePosition=this._context.getStageAbsolutePosition()),new t.Point(e-this._stageAbsolutePosition.x,i-this._stageAbsolutePosition.y)},i.prototype._onMouseDragStart=function(e){if(e.button!=t.MouseEvent.RIGHT_CLICK_BUTTON){var i=this._getRelativePosition(e.pageX,e.pageY);return this._overview.beginDragPan(e,i.x,i.y)}return!1},i.prototype._onMouseDragMove=function(t){var e=this._getRelativePosition(t.pageX,t.pageY);return this._overview.contDragPan(t,e.x,e.y),!0},i.prototype._onMouseDragEnd=function(t){this._overview.endDragPan(),this._stageAbsolutePosition=null},i.prototype._onTouchDragStart=function(t){var e=t.touches;if(t.stopPropagation(),1==e.length){var i=this._getRelativePosition(e[0].pageX,e[0].pageY);return t.preventDefault(),this._overview.beginDragPan(t,i.x,i.y)}return!1},i.prototype._onTouchDragMove=function(t){var e=t.touches;if(1==e.length){var i=this._getRelativePosition(e[0].pageX,e[0].pageY);this._overview.contDragPan(t,i.x,i.y),t.preventDefault()}t.stopPropagation()},i.prototype._onTouchDragEnd=function(e){this._overview.endDragPan(),t.EventManager.consumeEvent(e),this._stageAbsolutePosition=null},t.exportProperty(t,"Overview",t.Overview),t.exportProperty(t.Overview.prototype,"render",t.Overview.prototype.render);var n=new Object;t.Obj.createSubclass(n,t.Obj),n.renderOverview=function(t){t.isBackgroundRendered()&&n._renderBackground(t);var e=null!=t._callback||null!=t._callbackObj;e&&n._renderSlidingWindow(t),n._renderTimeAxis(t),n._parseFilledTimeRanges(t),n._updateCurrentTime(t),t.parseDataXML(t.Width,t.Height),e&&(n._createBorderAroundSlidingWindow(t),n._updateSlidingWindow(t))},n._renderBackground=function(e){var i=new t.Rect(e.getCtx(),0,0,e.Width,e.Height,"bg");i.setSolidFill(e._overviewBackgroundColor),i.setPixelHinting(!0),e.addChild(i)},n._renderSlidingWindow=function(e){var i=e.Width,o=e.Height,r=new t.Rect(e.getCtx(),0,0,i,o,"window");if(r.setSolidFill(e._windowBackgroundColor,e._windowBackgroundAlpha),r.setPixelHinting(!0),!e.isFeatureOff("zoom")){var s=e.getHandleSize(),a=e.getHandleStart(),l=e.getGrippySize();if(e.isVerticalScrollingEnabled()){var h=e.getSlidingWindowWidth(),d=t.PathUtils.moveTo(0,0)+t.PathUtils.quadTo(3,6,8,8)+t.PathUtils.lineTo(28,8)+t.PathUtils.quadTo(33,6,36,0);t.PathUtils.closePath();var g=t.PathUtils.moveTo(0,0)+t.PathUtils.quadTo(3,-6,8,-8)+t.PathUtils.lineTo(28,-8)+t.PathUtils.quadTo(33,-6,36,0);t.PathUtils.closePath();var v=new t.Rect(e.getCtx(),0,0,h,s,"thb"),u=new t.Rect(e.getCtx(),0,0,h,s,"bhb");if(y="row-resize",e._vertHandleBackgroundImage)var w=n._createGrippyImage(e,h,l,!0),_=n._createGrippyImage(e,h,l,!0);else w=n._createGrippy(e,!0),_=n._createGrippy(e,!0);v.setSolidFill(e._windowBackgroundColor,0),u.setSolidFill(e._windowBackgroundColor,0),v.setPixelHinting(!0),u.setPixelHinting(!0);var p=new t.Path(e.getCtx(),d,"th"),c=new t.Path(e.getCtx(),g,"bh");p.setSolidFill(e._handleFillColor),p.setSolidStroke(e._handleFillColor),c.setSolidFill(e._handleFillColor),c.setSolidStroke(e._handleFillColor),e._windowBackgroundColor==e._handleFillColor&&(p.setPixelHinting(!0),c.setPixelHinting(!0)),v.setCursor(y),u.setCursor(y),p.setCursor(y),c.setCursor(y),w.setCursor(y),_.setCursor(y),r.addChild(v),e._windowTopHandleBackground=v,r.addChild(p),e._windowTopHandle=p,r.addChild(w),e._windowTopGrippy=w,r.addChild(u),e._windowBottomHandleBackground=u,r.addChild(c),e._windowBottomHandle=c,r.addChild(_),e._windowBottomGrippy=_}if(e.isHorizontalScrollingEnabled()){var f=e.getSlidingWindowHeight(),m=t.PathUtils.moveTo(0,0)+t.PathUtils.quadTo(6,3,8,8)+t.PathUtils.lineTo(8,28)+t.PathUtils.quadTo(6,33,0,36);t.PathUtils.closePath();var P=t.PathUtils.moveTo(0,0)+t.PathUtils.quadTo(-6,3,-8,8)+t.PathUtils.lineTo(-8,28)+t.PathUtils.quadTo(-6,33,0,36);t.PathUtils.closePath();var O=new t.Rect(e.getCtx(),0-a,0,s,f,"lhb"),S=new t.Rect(e.getCtx(),a,0,s,f,"rhb"),y="col-resize";if(e._horHandleBackgroundImage)var C=n._createGrippyImage(e,l,f,!1),E=n._createGrippyImage(e,l,f,!1);else C=n._createGrippy(e,!1),E=n._createGrippy(e,!1);O.setSolidFill(e._windowBackgroundColor,0),S.setSolidFill(e._windowBackgroundColor,0),O.setPixelHinting(!0),S.setPixelHinting(!0);var x=new t.Path(e.getCtx(),m,"lh"),T=new t.Path(e.getCtx(),P,"rh");x.setSolidFill(e._handleFillColor),x.setSolidStroke(e._handleFillColor),T.setSolidFill(e._handleFillColor),T.setSolidStroke(e._handleFillColor),e._windowBackgroundColor==e._handleFillColor&&(x.setPixelHinting(!0),T.setPixelHinting(!0)),O.setCursor(y),S.setCursor(y),x.setCursor(y),T.setCursor(y),C.setCursor(y),E.setCursor(y),r.addChild(O),e._windowLeftHandleBackground=O,r.addChild(x),e._windowLeftHandle=x,r.addChild(C),e._windowLeftGrippy=C,r.addChild(S),e._windowRightHandleBackground=S,r.addChild(T),e._windowRightHandle=T,r.addChild(E),e._windowRightGrippy=E}}r.setCursor("move"),e.addChild(r),n._renderTimeAxisTopBar(e),n._renderLeftAndRightFilters(e,a)},n._createGrippyImage=function(e,i,n,o){if(o){var r=(n-e._vertHandleHeight)/2;a=new t.Image(e.getCtx(),e._vertHandleBackgroundImage,0,r,e._vertHandleWidth,e._vertHandleHeight,"vgrpy")}else var s=(i-e._horHandleWidth)/2,a=new t.Image(e.getCtx(),e._horHandleBackgroundImage,s,0,e._horHandleWidth,e._horHandleHeight,"hgrpy");return a.setMouseEnabled(!1),a},n._createGrippy=function(e,i){var n=e._handleTextureColor;if(i){for(var o=new t.Container(e.getCtx(),"vgrpy"),r=8,s=3,a=0;a<9;a++){var l=new t.Line(e.getCtx(),r+2*a,s,r+2*a+1,s,"dot1"+a);l.setSolidStroke(n),o.addChild(l),s+=2,(l=new t.Line(e.getCtx(),r+1+2*a,s,r+1+2*a+1,s,"dot2"+a)).setSolidStroke(n),o.addChild(l),s+=2,(l=new t.Line(e.getCtx(),r+2*a,s,r+2*a+1,s,"dot3"+a)).setSolidStroke(n),o.addChild(l),s=3}(l=new t.Line(e.getCtx(),r+18,s,r+18+1,s,"dot4")).setSolidStroke(n),o.addChild(l),s+=4,(l=new t.Line(e.getCtx(),r+18,s,r+18+1,s,"dot5")).setSolidStroke(n),o.addChild(l)}else{for(o=new t.Container(e.getCtx(),"hgrpy"),r=3,s=8,a=0;a<9;a++)(l=new t.Line(e.getCtx(),r,s+2*a,r,s+2*a+1,"dot1"+a)).setSolidStroke(n),o.addChild(l),r+=2,(l=new t.Line(e.getCtx(),r,s+1+2*a,r,s+1+2*a+1,"dot2"+a)).setSolidStroke(n),o.addChild(l),r+=2,(l=new t.Line(e.getCtx(),r,s+2*a,r,s+2*a+1,"dot3"+a)).setSolidStroke(n),o.addChild(l),r=3;(l=new t.Line(e.getCtx(),r,s+18,r,s+18+1,"dot4")).setSolidStroke(n),o.addChild(l),r+=4,(l=new t.Line(e.getCtx(),r,s+18,r,s+18+1,"dot5")).setSolidStroke(n),o.addChild(l)}return o.setPixelHinting(!0),o},n._createBorderAroundSlidingWindow=function(e){var i=e.Width,n=e.Height,r=e.getSlidingWindow(),s=o._DEFAULT_WINDOW_BORDER_WIDTH/2;if(e.isVertical())var a=r.getY(),l=a+s,h=a+r.getHeight(),d=h-s,g=0,v=s,u=i,w=u-s,_=new t.Line(e.getCtx(),g,l,i,l,"lh"),p=new t.Line(e.getCtx(),g,d,i,d,"rh"),c=new t.Line(e.getCtx(),v,0,v,a,"ltb"),f=new t.Line(e.getCtx(),v,h,v,n,"rtb"),m=new t.Line(e.getCtx(),w,a,w,h,"bb"),P=new t.Line(e.getCtx(),v,a,v,h,"tb");else l=(a=0)+s,d=(h=n)-s,v=(g=r.getX())+s,w=(u=g+r.getWidth())-s,_=new t.Line(e.getCtx(),v,a,v,h,"lh"),p=new t.Line(e.getCtx(),w,a,w,h,"rh"),c=new t.Line(e.getCtx(),0,l,g+1,l,"ltb"),f=new t.Line(e.getCtx(),u-1,l,i,l,"rtb"),m=new t.Line(e.getCtx(),g,d,u,d,"bb"),P=new t.Line(e.getCtx(),g,l,u,l,"tb");_.setPixelHinting(!0),p.setPixelHinting(!0),c.setPixelHinting(!0),f.setPixelHinting(!0),m.setPixelHinting(!0),P.setPixelHinting(!0),"none"!=e._windowBorderLeftStyle&&_.setSolidStroke(e._windowBorderLeftColor),e.addChild(_),e._leftHandle=_,"none"!=e._windowBorderRightStyle&&p.setSolidStroke(e._windowBorderRightColor),e.addChild(p),e._rightHandle=p,"none"!=e._borderTopStyle&&e._borderTopColor&&(c.setSolidStroke(e._borderTopColor),f.setSolidStroke(e._borderTopColor)),e.addChild(c),e.addChild(f),"none"!=e._windowBorderBottomStyle&&m.setSolidStroke(e._windowBorderBottomColor),e.addChild(m),"none"!=e._windowBorderTopStyle&&P.setSolidStroke(e._windowBorderTopColor),e.addChild(P)},n._updateBorderAroundSlidingWindow=function(t){var e=t.getSlidingWindow(),i=o._DEFAULT_WINDOW_BORDER_WIDTH/2,n=t.getLeftHandle(),r=t.getRightHandle(),s=t.getLeftTopBar(),a=t.getRightTopBar(),l=t.getBottomBar(),h=t.getTopBar();if(t.isVertical()){if(t.isHorizontalScrollingEnabled()){var d=e.getWidth(),g=t.getSlidingWindowPosX(e),v=g+i,u=g+d-i;t.setLinePosX(n,v,u),t.setLinePosX(r,v,u),t.setLinePosX(h,v,v),t.setLinePosX(l,u,u)}if(t.isVerticalScrollingEnabled()){var w=e.getHeight(),_=t.getSlidingWindowPosY(e),p=_+i,c=_+w-i;t.setLinePosY(n,p,p),t.setLinePosY(r,c,c),t.setLinePosY(h,p,c),t.setLinePosY(l,p,c)}}else t.isHorizontalScrollingEnabled()&&(d=e.getWidth(),v=(g=t.getSlidingWindowPosX(e))+i,u=g+d-i,t.setLinePosX(n,v,v),t.setLinePosX(r,u,u),t.setLinePosX(h,v,u),t.setLinePosX(l,v,u)),t.isVerticalScrollingEnabled()&&(w=e.getHeight(),p=(_=t.getSlidingWindowPosY(e))+i,c=_+w-i,t.setLinePosY(n,p,c),t.setLinePosY(r,p,c),t.setLinePosY(h,p,p),t.setLinePosY(l,c,c));t.setLinePos(s,-1,t.getSlidingWindowPos(e)),t.setLinePos(a,t.getLinePos1(r),-1)},n._updateSlidingWindow=function(e){var i=e.getSlidingWindow(),o=e.Width,r=e.Height;if(e.isHorizontalScrollingEnabled()){var s=Math.max(e.getMinimumPositionX(),t.OverviewUtils.getDatePosition(e._xMin,e._xMax,e._x1,o)),a=Math.min(e.getMaximumPositionX(),Math.max(e.getMinimumPositionX(),t.OverviewUtils.getDatePosition(e._xMin,e._xMax,e._x2,o)));e.isRTL()?e.setSlidingWindowPosX(i,o-a):e.setSlidingWindowPosX(i,s),n._setSlidingWindowWidth(e,i,a-s)}else n._setSlidingWindowWidth(e,i,o);if(e.isVerticalScrollingEnabled()){var l=Math.max(e.getMinimumPositionY(),t.OverviewUtils.getDatePosition(e._yMin,e._yMax,e._y1,r)),h=Math.min(e.getMaximumPositionY(),Math.max(e.getMinimumPositionY(),t.OverviewUtils.getDatePosition(e._yMin,e._yMax,e._y2,r)));e.setSlidingWindowPosY(i,l),n._setSlidingWindowHeight(e,i,h-l)}else n._setSlidingWindowHeight(e,i,r);n._updateBorderAroundSlidingWindow(e)},n._setSlidingWindowWidth=function(e,i,n){if(n=Math.min(e.getMaximumWindowWidth(),Math.max(e.getMinimumWindowWidth(),n)),i.setWidth(n),e.isLeftAndRightFilterRendered()){var o=e.getSlidingWindowPosX(i)+n,r=e.getRightBackground();if(r.setX(o),r.setWidth(Math.max(0,e.Width-o)),t.OverviewUtils.supportsTouch()&&!e.isFeatureOff("zoom"))e.getRightBackgroundHandle().setX(o)}if(!e.isFeatureOff("zoom")){if(e.isHorizontalScrollingEnabled()){var s=e._windowRightHandleBackground,a=e._windowRightHandle,l=e._windowRightGrippy;a.setTranslateX(n),s.setTranslateX(n-e.getHandleSize()),l.setTranslateX(n-e.getGrippySize())}if(e.isVerticalScrollingEnabled()){var h=(i.getWidth()-36)/2;if(e._vertHandleBackgroundImage)var d=(n-e._vertHandleWidth)/2;else d=h;var g=e._windowTopHandleBackground,v=e._windowTopHandle,u=e._windowTopGrippy;v.setTranslateX(h),g.setWidth(n),u.setTranslateX(d);var w=e._windowBottomHandleBackground,_=e._windowBottomHandle,p=e._windowBottomGrippy;_.setTranslateX(h),w.setWidth(n),p.setTranslateX(d)}}},n._setSlidingWindowHeight=function(t,e,i){if(i=Math.min(t.getMaximumWindowHeight(),Math.max(t.getMinimumWindowHeight(),i)),e.setHeight(i),!t.isFeatureOff("zoom")){if(t.isHorizontalScrollingEnabled()){var n=(i-36)/2;if(t._horHandleBackgroundImage)var o=(i-t._horHandleHeight)/2;else o=n;var r=t._windowLeftHandleBackground,s=t._windowLeftHandle,a=t._windowLeftGrippy;s.setTranslateY(n),r.setHeight(i),a.setTranslateY(o);var l=t._windowRightHandleBackground,h=t._windowRightHandle,d=t._windowRightGrippy;h.setTranslateY(n),l.setHeight(i),d.setTranslateY(o)}if(t.isVerticalScrollingEnabled()){var g=t._windowBottomHandleBackground,v=t._windowBottomHandle,u=t._windowBottomGrippy;v.setTranslateY(i),g.setTranslateY(i-t.getHandleSize()),u.setTranslateY(i-t.getGrippySize())}}},n._renderTimeAxisTopBar=function(e){var i=e.Width,n=e.Height;if(e.isVertical())if(e.isRTL())var o=new t.Line(e.getCtx(),e.getTimeAxisWidth(),0,e.getTimeAxisWidth(),n,"tab");else o=new t.Line(e.getCtx(),i-e.getTimeAxisWidth(),0,i-e.getTimeAxisWidth(),n,"tab");else o=e.isOverviewAbove()?new t.Line(e.getCtx(),0,e.getTimeAxisHeight(),i,e.getTimeAxisHeight(),"tab"):new t.Line(e.getCtx(),0,n-e.getTimeAxisHeight(),i,n-e.getTimeAxisHeight(),"tab");o.setSolidStroke(e._timeAxisBarColor,e._timeAxisBarOpacity),o.setPixelHinting(!0),e._timeAxisTopBar=o,e.addChild(o)},n._renderLeftAndRightFilters=function(e,i){var n=e.Width,o=e.Height;if(e.isLeftAndRightFilterRendered()){if(e.isVertical())var r=new t.Rect(e.getCtx(),0,0,n,0,"lbg"),s=new t.Rect(e.getCtx(),0,0,n,0,"rbg");else r=new t.Rect(e.getCtx(),0,0,0,o,"lbg"),s=new t.Rect(e.getCtx(),0,0,0,o,"rbg");if(r.setSolidFill(e._leftFilterPanelColor,e._leftFilterPanelAlpha),e.addChild(r),s.setSolidFill(e._rightFilterPanelColor,e._rightFilterPanelAlpha),e.addChild(s),t.OverviewUtils.supportsTouch()&&null!=i){if(e.isVertical())var a=new t.Rect(e.getCtx(),0,0,n,i,"lbgrh"),l=new t.Rect(e.getCtx(),0,0,n,i,"rbgrh");else a=new t.Rect(e.getCtx(),0,0,i,o,"lbgrh"),l=new t.Rect(e.getCtx(),0,0,i,o,"rbgrh");a.setSolidFill(e._leftFilterPanelColor,0),e.addChild(a),l.setSolidFill(e._rightFilterPanelColor,0),e.addChild(l)}}},n._renderTimeAxis=function(t){if(null!=t._ticks)for(var e=t.Width,i=t.Height,r=t.isVertical(),s=t.getOverviewSize(),a=0;a<t._ticks.length;a++){var l=t._ticks[a],h=parseInt(l.time,10);if(r)var d=t.getDateYPosition(h);else d=t.getDateXPosition(h);var g=l.label,v=0;if(a+1<t._ticks.length){var u=parseInt(t._ticks[a+1].time,10);if(r)var w=t.getDateYPosition(u);else w=t.getDateXPosition(u);v=w-d}else v=s-d;t.isHorizontalRTL()&&(d=s-d),r&&(v=e),v-=2*o._DEFAULT_AXIS_LABEL_PADDING,n._addTick(t,d,e,i,"tick"+a),n._addLabel(t,d,g,i,v,"label"+a,t._labelStyle)}},n._addTick=function(e,i,n,o,r){if(e.isVertical())var s=new t.Line(e.getCtx(),0,i,n,i,r);else s=new t.Line(e.getCtx(),i,0,i,o,r);var a=new t.SolidStroke(e._timeIndicatorColor);a.setStyle(t.Stroke.DASHED,3),s.setStroke(a),s.setPixelHinting(!0),e.addChild(s)},n._addLabel=function(e,i,n,r,s,a,l){if(e.isVertical()){var h=new t.OutputText(e.getCtx(),n,4,i,a);if(h.setCSSStyle(l),e.isRTL()){var d=h.getDimensions();h.setX(Math.max(4,e.Width-d.w-4))}}else{if(e.isOverviewAbove())var g=2;else g=r-e.getTimeAxisHeight()+2;var v=o._DEFAULT_AXIS_LABEL_PADDING;(h=new t.OutputText(e.getCtx(),n,i+v,g,a)).setCSSStyle(l),e.isHorizontalRTL()&&(d=h.getDimensions(),h.setX(i-Math.min(d.w,s)-v))}t.TextUtils.fitText(h,s,1/0,e),h._rawText=h.getUntruncatedTextString()},n._parseFilledTimeRanges=function(t){if(null!=t._formattedTimeRanges)for(var e=0;e<t._formattedTimeRanges.length;e++){var i=t._formattedTimeRanges[e];n._addFilledTimeRange(t,i,t.Width,t.Height)}},n._addFilledTimeRange=function(e,i,n,o){var r=parseInt(i.rs,10),s=parseInt(i.re,10);if(null!=r&&null!=s){var a=i.c,l=e.getOverviewSize();if(e.isVertical())h=e.getDateYPosition(r),d=e.getDateYPosition(s);else var h=e.getDateXPosition(r),d=e.getDateXPosition(s);var g=d-h;if(e.isHorizontalRTL()&&(h=l-h-g,d=l-d-g),e.isVertical())var v=new t.Rect(e.getCtx(),0,h,n-e.getTimeAxisWidth(),g,"ftr");else v=new t.Rect(e.getCtx(),h,e.isOverviewAbove()?e.getTimeAxisHeight():0,g,o-e.getTimeAxisHeight(),"ftr");null!=a&&v.setSolidFill(a,.4),v.setCursor("move"),v.setPixelHinting(!0),e.addChild(v)}},n._updateCurrentTime=function(e){var i=e.Width,n=e.Height;if(!(null==e._currentTime||isNaN(e._currentTime)||e._currentTime<e._xMin||e._currentTime>e._xMax)){if(e.isVertical())var o=e.getDateYPosition(e._currentTime),r=new t.Line(e.getCtx(),0,o,i,o,"ocd");else o=e.getDateXPosition(e._currentTime),e.isRTL()&&(o=i-o),r=new t.Line(e.getCtx(),o,0,o,n,"ocd");r.setSolidStroke(e._currentTimeIndicatorColor),r.setPixelHinting(!0),e.addChild(r)}};var o=new Object;t.Obj.createSubclass(o,t.Obj),o._DEFAULT_AXIS_LABEL_PADDING=5,o._DEFAULT_WINDOW_BORDER_WIDTH=1,o.getHandleFillColor=function(t){return null!=t._hfc?t._hfc:t.style.handleFillColor},o.getHandleTextureColor=function(t){return null!=t._htc?t._htc:t.style.handleTextureColor},o.getHandleBackgroundImage=function(t,e){return e?null!=t._vhbi?t._vhbi:t.style.vertHandleBackgroundImage:null!=t._hbi?t._hbi:t.style.handleBackgroundImage},o.getHandleWidth=function(t,e){return e?null!=t._vhw?t._vhw:t.style.vertHandleWidth:null!=t._hw?t._hw:t.style.handleWidth},o.getHandleHeight=function(t,e){return e?null!=t._vhh?t._vhh:t.style.vertHandleHeight:null!=t._hh?t._hh:t.style.handleHeight},o.getBorderTopColor=function(t){return null!=t._btc?t._btc:t.style.borderTopColor},o.getBorderTopStyle=function(t){return null!=t._bts?t._bts:t.style.borderTopStyle},o.getWindowBackgroundColor=function(t){return null!=t._wbc?t._wbc:t.style.windowBackgroundColor},o.getWindowBackgroundAlpha=function(t){return t.style.windowBackgroundAlpha},o.getWindowBorderTopStyle=function(t){return null!=t._wbts?t._wbts:t.style.windowBorderTopStyle},o.getWindowBorderRightStyle=function(t){return null!=t._wbrs?t._wbrs:t.style.windowBorderRightStyle},o.getWindowBorderBottomStyle=function(t){return null!=t._wbbs?t._wbbs:t.style.windowBorderBottomStyle},o.getWindowBorderLeftStyle=function(t){return null!=t._wbls?t._wbls:t.style.windowBorderLeftStyle},o.getWindowBorderTopColor=function(t){return null!=t._wbtc?t._wbtc:t.style.windowBorderTopColor},o.getWindowBorderRightColor=function(t){return null!=t._wbrc?t._wbrc:t.style.windowBorderRightColor},o.getWindowBorderBottomColor=function(t){return null!=t._wbbc?t._wbbc:t.style.windowBorderBottomColor},o.getWindowBorderLeftColor=function(t){return null!=t._wblc?t._wblc:t.style.windowBorderLeftColor},o.getOverviewBackgroundColor=function(t){return null!=t._obc?t._obc:t.style.overviewBackgroundColor},o.getCurrentTimeIndicatorColor=function(t){return null!=t._ctic?t._ctic:t.style.currentTimeIndicatorColor},o.getTimeAxisBarColor=function(t){return null!=t._tabc?t._tabc:t.style.timeAxisBarColor},o.getTimeAxisBarAlpha=function(t){return null!=t._tabo?t._tabo:t.style.timeAxisBarAlpha},o.getTimeIndicatorColor=function(t){return null!=t._tic?t._tic:t.style.timeIndicatorColor},o.getLeftFilterPanelColor=function(t){return t.style.leftFilterPanelColor},o.getLeftFilterPanelAlpha=function(t){return t.style.leftFilterPanelAlpha},o.getRightFilterPanelColor=function(t){return t.style.rightFilterPanelColor},o.getRightFilterPanelAlpha=function(t){return t.style.rightFilterPanelAlpha}}(dvt);
  return dvt;
});
