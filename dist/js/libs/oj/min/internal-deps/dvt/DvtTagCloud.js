/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(['./DvtToolkit'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.

var l=void 0,p=!0,s=null,t=!1;function aa(){return function(a){return a}}function B(){return function(){}}function C(a){return function(b){this[a]=b}}function Q(a){return function(){return this[a]}}function R(a){return function(){return a}}var S;function ba(a,b){0==a.indexOf("dvt.")&&(a=a.substring(4));var c=a.split("."),d=eval("dvt");!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&b!==l?d[e]=b:d=d[e]?d[e]:d[e]={}}Math.floor(2147483648*Math.random()).toString(36);
dvt.Ge=function(a,b,c){this.Init(a,b,c)};ba("dvt.TagCloud",dvt.Ge);dvt.j.u(dvt.Ge,dvt.Ne);dvt.Ge.newInstance=function(a,b,c){return new dvt.Ge(a,b,c)};dvt.Ge.newInstance=dvt.Ge.newInstance;dvt.Ge.prototype.Init=function(a,b,c){dvt.Ge.q.Init.call(this,a,b,c);this.g().xe.ib().setAttributeNS(s,"text-rendering","geometricPrecision");this.K=new Xp(this,a,this.Gf,this);this.K.Gg(this);dvt.o.Ta()||this.K.ss(new Yp(this.K));this.Bh=new Zp;this.Zb=[];this.av=[];this.Jj=s;this.zf=new dvt.Lg(this.g());this.K.pV(this.zf)};
dvt.Ge.prototype.va=function(a,b,c){!isNaN(b)&&!isNaN(c)&&(this.Ab=b,this.Lb=c);this.sX();this.Mf(a);this.Rb&&this.Rb.stop();this.zj=this.ya;this.FZ=this.Zb;this.Zb=[];this.PFa=[];this.ya=new dvt.ca(this.g());this.k(this.ya);$p.va(this,this.ya,new dvt.U(0,0,this.Ab,this.Lb));this.Tc&&this.Tc.Tt(this.T.selection,this.rv());b=this.T.animationDuration;c=new dvt.U(0,0,this.Ab,this.Lb);this.zj?"none"!==this.T.animationOnDataChange&&a&&(this.uh=new dvt.ca(this.g()),this.k(this.uh),a=new dvt.Ap(this.g(),
this.uh),a.Yp(this.FZ,this.Zb),this.Rb=a.lv()):"none"!==this.T.animationOnDisplay&&(this.Rb=dvt.hc.LD(this.g(),dvt.hc.MB,this.ya,c,b));this.Rb?(this.K.je(),this.K.bl(this),this.Rb.Tf(this.rxa,this),this.Rb.play()):this.rxa();this.vr()};dvt.Ge.prototype.render=dvt.Ge.prototype.va;dvt.Ge.prototype.wsa=C("Zb");dvt.Ge.prototype.mi=function(){this.Wd||(this.Wd=new aq(this));return this.Wd};dvt.Ge.prototype.getAutomation=dvt.Ge.prototype.mi;
dvt.Ge.prototype.IK=function(a,b){this.av.push(a);this.PFa[b]=a};dvt.Ge.prototype.rv=Q("av");dvt.Ge.prototype.wk=Q("PFa");dvt.Ge.prototype.Le=function(a){this.T.highlightedCategories=dvt.Dc.Ca(a);dvt.Tg.Le(a,this.rv(),"any"===this.T.highlightMatch);this.Jj&&this.Jj.Le(a)};dvt.Ge.prototype.highlight=dvt.Ge.prototype.Le;dvt.Ge.prototype.select=function(a){this.T.selection=dvt.Dc.Ca(a);this.Tc&&this.Tc.Tt(this.T.selection,this.rv())};dvt.Ge.prototype.select=dvt.Ge.prototype.select;S=dvt.Ge.prototype;
S.Mf=function(a){a?this.T=this.Bh.an(a):this.T||(this.T=this.sE());a=this.T.selectionMode;this.Tc="single"===a?new dvt.Tc(dvt.Tc.Rz):"multiple"===a?new dvt.Tc(dvt.Tc.Oz):s;this.K.IB(this.Tc);dvt.o.$i()||(this.T.animationOnDisplay="none",this.T.animationOnDataChange="none")};S.Jm=function(){return dvt.D.ah(this.v(),"componentName",dvt.D.Ka,"TAG_CLOUD")};
S.rxa=function(){this.zj&&(this.removeChild(this.zj),this.zj.qa(),this.zj=s);this.uh&&(this.removeChild(this.uh),this.uh.qa(),this.uh=s);this.Rb&&(this.Rb=s,this.K.Gg(this));this.T.highlightedCategories&&0<this.T.highlightedCategories.length&&this.Le(this.T.highlightedCategories)};S.sX=function(){this.K.je();this.av.length=0};S.Ua=Q("K");
S.Gf=function(a,b){var c=a.type;if("categoryHide"==c||"categoryShow"==c){var d=a.category,e=dvt.fa.nb(this.T.hiddenCategories,d);"categoryHide"==c&&0>e&&this.T.hiddenCategories.push(d);"categoryShow"==c&&0<=e&&this.T.hiddenCategories.splice(e,1);this.va(this.T,this.Ab,this.Lb)}else"categoryHighlight"==c&&(this!=b?this.Le(a.categories):this.Jj&&this.Jj!=b&&this.Jj.Gf(a,b));a&&this.dispatchEvent(a)};S.dB=function(){for(var a=[],b=this.Tc.getSelection(),c=0;c<b.length;c++)a=a.concat(b[c].Ue());return a};
S.en=function(a,b,c){return this.zf.en(c)};dvt.Ge.prototype.isDragAvailable=dvt.Ge.prototype.en;dvt.Ge.prototype.vo=function(a,b){return this.zf.vo(a,b)};dvt.Ge.prototype.getDragTransferable=dvt.Ge.prototype.vo;dvt.Ge.prototype.Zy=function(a,b){return this.zf.Zy(a,b)};dvt.Ge.prototype.getDragOverFeedback=dvt.Ge.prototype.Zy;dvt.Ge.prototype.Dt=function(a,b){return this.zf.Dt(a,b)};dvt.Ge.prototype.getDragContext=dvt.Ge.prototype.Dt;dvt.Ge.prototype.eB=function(a,b){return this.zf.eB(a,b)};
dvt.Ge.prototype.getDragOffset=dvt.Ge.prototype.eB;dvt.Ge.prototype.lB=function(a,b){return this.zf.lB(a,b)};dvt.Ge.prototype.getPointerOffset=dvt.Ge.prototype.lB;dvt.Ge.prototype.rB=function(){this.zf.rB()};dvt.Ge.prototype.initiateDrag=dvt.Ge.prototype.rB;dvt.Ge.prototype.Pw=function(){this.zf.Pw()};dvt.Ge.prototype.dragDropEnd=dvt.Ge.prototype.Pw;dvt.Ge.prototype.Tr=function(a,b,c){this.To||(this.To=new bq);return this.To.Tr(a,b,c)};dvt.Ge.prototype.acceptDrag=dvt.Ge.prototype.Tr;
function aq(a){this.vD=a}ba("DvtTagCloudAutomation",aq);dvt.j.u(aq,dvt.Wd);aq.prototype.Ko=function(a){return(a=this.vD.K.eb(a))&&a instanceof cq?"item["+this.vD.wk().indexOf(a)+"]":s};aq.prototype.oi=function(a){if(a==dvt.Wd.iC)return this.wE(this.vD);var b=a.indexOf("[");return 0<b&&"item"===a.substring(0,b)&&(a=parseInt(a.substring(b+1,a.length-1)),a=this.vD.wk()[a])?a.Ue()[0].ib():s};aq.prototype.getDomElementForSubId=aq.prototype.oi;
aq.prototype.getItem=function(a){if(a=this.vD.wk()[a]){var b={};b.color=a.ql();b.tooltip=a.ee();b.label=a.Ae();b.value=a.getValue();b.selected=a.tb();return b}return s};aq.prototype.getItem=aq.prototype.getItem;aq.prototype.pU=function(){return this.vD.rv().length};aq.prototype.getItemCount=aq.prototype.pU;function dq(a,b,c,d,e,f,h){this.Init(a,b,c,d,e,f,h)}dvt.j.u(dq,dvt.qe);S=dq.prototype;S.Init=function(a,b,c,d,e,f,h){dq.q.Init.call(this,b,c,d,e,f,h);this.vD=a;this.n$();f&&eq(this,f)};
S.rc=function(a){this.jl!=a&&((this.jl=a)?this.Wo?this.Cb(this.B7):this.Cb(this.t9):this.Cb(this.yN))};S.vd=function(){this.Wo||(this.Wo=p,this.jl?this.Cb(this.B7):this.Cb(this.Jka))};S.Sc=function(){this.jl?this.Cb(this.t9):this.Cb(this.yN);this.Wo=t};
S.nh=function(a,b){var c=new dvt.Pd(this.g(),this,fq.mb(this.vD)),d=this.Jd(),e=b.Jd(),f=t,h=e.I(dvt.e.kc),k=d.I(dvt.e.kc);if(h!=k){var m=this;this.Cb(d.oa(dvt.e.kc,h));c.ea.J(dvt.B.Yya,this,function(){return m.Jd().I(dvt.e.kc)},function(a){m.Cb(m.Jd().oa(dvt.e.kc,a))},k)}e=parseFloat(e.I(dvt.e.Ch));d=parseFloat(d.I(dvt.e.Ch));e!=d&&(f=p,m=this,this.Kg(e),c.ea.J(dvt.B.Q,this,function(){return parseFloat(m.Jd().I(dvt.e.Ch))},this.Kg,d));d=b.Sa();e=this.Sa();h=b.Vq();k=this.Vq();if(e!=d||f&&k!=h)k!=
h&&(d=gq(b,d,h)),this.Ia(d),c.ea.J(dvt.B.Q,this,this.Sa,this.Ia,e);f=b.$a();d=this.$a();d!=f&&(this.kb(f),c.ea.J(dvt.B.Q,this,this.$a,this.kb,d));b.P(0);a.add(c,1)};S.Xj=function(a){a.add(new dvt.Kj(this.g(),this,fq.mb(this.vD)),0)};S.Ui=function(a){this.P(0);a.add(new dvt.Ah(this.g(),this,fq.mb(this.vD)),2)};S.Kg=function(a){dq.q.Kg.call(this,a);eq(this,this.Jd())};
function eq(a,b){a.yN=b.Ca();var c=a.yN.I(dvt.e.kc);a.yN.oa(dvt.e.Kb,s);a.Jka=a.yN.Ca();var d=hq(c,0.3);a.Jka.oa(dvt.e.Kb,d);a.Jka.oa(dvt.e.kc,dvt.H.bn(d));a.t9=a.yN.Ca();a.t9.oa(dvt.e.Kb,c);a.t9.oa(dvt.e.kc,dvt.H.bn(c));a.B7=a.yN.Ca();c=hq(c,0.6);a.B7.oa(dvt.e.Kb,c);a.B7.oa(dvt.e.kc,dvt.H.bn(c))}function gq(a,b,c){a=a.zeb();return c==dvt.ba.qq?b+a.a:c==dvt.ba.Km?b-a.a:b}
function hq(a,b){var c=dvt.H.yg(a),d=dvt.H.wg(a),e=dvt.H.ug(a);return dvt.H.UG(Math.floor(255*(1-b)+b*c),Math.floor(255*(1-b)+b*d),Math.floor(255*(1-b)+b*e))}function cq(a,b,c){this.Init(a,b,c)}dvt.j.u(cq,dvt.j);S=cq.prototype;S.Init=function(a,b,c){this.W=a;this.dj=b;this.Ob=c;this.nM=this.jl=t;c.url?(b.Sf("link"),this.Hla=dvt.F.iK("_blank",c.url)):b.Sf("img");this.gv()};S.getId=function(){return this.Ob.id};S.Ae=function(){return this.Ob.label};S.getValue=function(){return this.Ob.value};S.ee=function(){return this.Ob.shortDesc};
S.Hg=function(){return this.Ob.action};S.vg=function(){var a=this.W.v().tooltip;return a?this.W.g().Rf().Uw(a,this.$p()):this.ee()};S.$p=function(){return{id:this.getId(),label:this.Ae(),color:this.ql(),value:this.getValue()}};S.iK=Q("Hla");S.ql=function(){this.Fr||(this.Fr=(new dvt.e(this.Ob.style)).I(dvt.e.kc));return this.Fr};S.ai=C("nM");S.ob=Q("nM");S.tb=Q("jl");S.rc=function(a){this.jl=a;this.dj.rc(a);this.gv()};S.vd=function(){this.dj.vd()};S.Sc=function(){this.dj.Sc()};
S.pe=function(a){var b=this.W.K.Db;a.type==dvt.ra.Fe||b.xv(a)?b=this:b.aj(a)?(b=this.W.rv(),a=a.keyCode==dvt.G.ng||a.keyCode==dvt.G.Cg?p:t,a=dvt.fa.nb(b,this)+(a?1:-1),b=a<b.length&&0<=a?b[a]:s):b=s;return b};S.Ig=function(a){return this.dj.V(a)};S.Cm=function(){return this.dj.ib()};S.Uf=function(){this.dd=p;this.vd()};S.Od=function(){this.dd&&(this.dd=t,this.Sc())};S.Qd=Q("dd");S.Ue=function(){return[this.dj]};
S.Id=function(){var a=[];this.ob()&&a.push(dvt.D.na(dvt.D.Ka,this.tb()?"STATE_SELECTED":"STATE_UNSELECTED"));return dvt.ja.uk(this.ee(),a)};S.ze=function(){return this.Ob.categories};S.gv=function(){dvt.o.Gi()||this.dj.Bd("label",this.Id())};S.ff=function(){if(!this.Je&&(this.Je=[],this.Ob.showPopupBehaviors))for(var a=this.Ob.showPopupBehaviors,b=0;b<a.length;b++)this.Je.push(new dvt.Nc(a[b].popupId,a[b].triggerType,a[b].alignId,a[b].align));return this.Je};
S.en=function(a){return this.W.Tc?a[0]:s};S.vo=function(){var a=this.W;this.tb()||(a.Tc.jq(this,t),a.K.xG());for(var b=[],a=a.Tc.getSelection(),c=0;c<a.length;c++){var d=a[c];d instanceof cq&&b.push(d.getId())}return b};S.dB=function(){return this.W.dB()};function Zp(){this.Init({alta:iq})}dvt.j.u(Zp,dvt.Ya);
var iq={animationOnDisplay:"none",animationOnDataChange:"none",emptyText:s,hiddenCategories:[],hideAndShowBehavior:"none",highlightedCategories:[],highlightMatch:"all",hoverBehavior:"none",layout:"rectangular",selectionMode:"none",_statusMessageStyle:new dvt.e(dvt.Ya.im+"color: #333333;"),styleDefaults:{animationDuration:500,hoverBehaviorDelay:200,style:new dvt.e(dvt.Ya.im+"color: #333333;")},touchResponse:"auto"},$p={};dvt.j.u($p,dvt.j);
$p.va=function(a,b,c){$p.Jy(a,b,c);$p.BJ(a,b,c);$p.rC(c);var d=a.v();d.items&&0<d.items.length?(d=$p.cna(a,b,c),0<d.length?(a.wsa(d),a.K.rs(a.rv()[0])):$p.o_(a,b,c)):$p.o_(a,b,c)};$p.o_=function(a,b,c){var d=a.v(),e=d.emptyText;e||(e=dvt.D.ah(d,"labelNoData",dvt.D.Ka,"NO_DATA",s));dvt.Aa.lq(b,e,new dvt.U(c.x,c.y,c.a,c.b),a.K,d._statusMessageStyle)};$p.Jy=function(a,b,c){a=new dvt.ka(a.g(),c.x,c.y,c.a,c.b);a.gc();b.k(a)};
$p.cna=function(a,b,c){for(var d=a.v(),e=[],f=d.items,h=Number.MAX_VALUE,k=-Number.MAX_VALUE,m=0;m<f.length;m++)h=Math.min(h,f[m].value),k=Math.max(k,f[m].value);h=jq.Dcb(h,k);k=dvt.fa.sO(d.hiddenCategories);for(m=0;m<f.length;m++){var n=f[m];n.categories||(n.categories=[n.label]);if(!k||!dvt.fa.OU(k,n.categories)){var q=d.styleDefaults.style.Ca(),r=n.color;r&&q.oa(dvt.e.kc,r);q.Zh(n.style);q.oa(dvt.e.Ch,h.call(s,n.value).toString());q=new dq(a,a.g(),n.label,0,0,q,n.id);r=new cq(a,q,n);a.K.jb(q,r);
a.IK(r,m);"none"!==d.selectionMode&&r.ai(p);(r.ob()||n.url||r.Hg())&&q.setCursor("pointer");e.push(q);b.k(q)}}0<e.length&&("cloud"===d.layout?jq.cab(c,e):jq.shb(c,e,dvt.o.$(a.g())));return e};
$p.BJ=function(a,b,c){var d=a.v(),e=d.legend;if(e&&e.sections){e=dvt.Dc.Ca(e);e.orientation="horizontal";e.halign="center";e.hoverBehavior=d.hoverBehavior;e.hideAndShowBehavior=d.hideAndShowBehavior;e.hiddenCategories=d.hiddenCategories;d=dvt.nf.newInstance(a.g(),a.Gf,a);b.k(d);var f=d.cs(e,c.a,c.b/3);d.va(e,f.a,f.b);dvt.Tn.position(c,"bottom",d,f.a,f.b,0);a.Jj&&(a.Jj.qa(),b.removeChild(a.Jj));a.Jj=d}};$p.rC=function(a){a.x=Math.round(a.x);a.y=Math.round(a.y);a.a=Math.round(a.a);a.b=Math.round(a.b)};
function jq(){}dvt.j.u(jq,dvt.j);jq.Dcb=function(a,b){return function(c){return 12+Math.ceil(12*(2*(c-a)/(b-a)))}};
jq.cab=function(a,b){var c=[],d=10/180,e=10/180;a.a>a.b?d*=a.a/a.b:e*=a.b/a.a;for(var f=2*Math.PI/180,h=s,k=0,m=[],n=[],q=0;q<b.length;q++)for(var r=t,u=0,v=4,y=b[q],x=y.V(),k=Math.max(k,parseFloat(y.Jd().I(dvt.e.Ch))),z=-1;!r;){var A=u%180;m[A]===l&&(m[A]=Math.cos(u*f));n[A]===l&&(n[A]=Math.sin(u*f));var D=d*u*m[A],G=e*u*n[A],K=new dvt.U(D,G,x.a,x.b),r=p;-1!=z&&c[z].nra(K)&&(r=t);if(r)for(A=0;A<q;A++)if(c[A].nra(K)){z=A;r=t;break}r&&(h=h?h.Hj(K):K,z=-1,c[q]=K,y.Ia(D),y.kb(-x.y+G));3600===u?v=3:5400===
u?v=2:10800===u&&(v=1);u+=v}c=Math.max(h.a/a.a,h.b/a.b);d=h.x+h.a/2;h=h.y+h.b/2;for(A=0;A<b.length;A++)y=b[A],y.Ia(a.x+y.Sa()/c+(a.a/2-d/c)),y.kb(a.y+y.$a()/c+(a.b/2-h/c)),e=parseFloat(y.Jd().I(dvt.e.Ch)),y.Kg(e/c)};
jq.shb=function(a,b,c){for(var d=[],e=0,f=0,h=0,k=0;k<b.length;k++){var m=b[k],n=m.V(),e=Math.max(e,n.a),f=Math.max(f,n.b),h=Math.max(h,parseFloat(m.Jd().I(dvt.e.Ch)));d.push(new dvt.$j(n.a,n.b))}k=0;for(m=(a.a-10)/e;0.001<m-k;)e=(k+m)/2,h=jq.dCa(d,(a.a-10)/e),h.length*(e*f+2)-2>a.b-10?m=e:k=e;e=k;h=jq.dCa(d,(a.a-10)/e);h.push(b.length);for(k=0;k<h.length-1;k++){var n=h[k],q=h[k+1],r=0,u=0,v=p;if(1<q-n){for(var m=0,y=n;y<q;y++)m+=d[y].a*e,u=Math.max(u,d[y].b*e);r=(a.a-10-m)/(q-n-1);k==h.length-2&&
(y=0.5*u,y<r&&m+(q-n)*y<0.9*(a.a-10)&&(r=y,v=t))}for(var u=5+(k+1)*(f*e+2)-2,x=c?a.a-5:5,y=n;y<q;y++){var m=b[y],z=parseFloat(m.Jd().I(dvt.e.Ch));m.Kg(z*e);m.kb(a.y+u);v&&y==q-1&&y!=n?c?(m.rk(),m.Ia(a.x+5)):(m.sk(),m.Ia(a.x+a.a-5)):(m.Ia(a.x+x),c?(m.sk(),x-=d[y].a*e+r):(m.rk(),x+=d[y].a*e+r))}}};jq.dCa=function(a,b){var c=[0],d=a[0].a+2;if(1<a.length)for(var e=1;e<a.length;e++)d+a[e].a>b&&(c.push(e),d=0),d+=a[e].a+2;return c};var fq={};dvt.j.u(fq,dvt.j);
fq.mb=function(a){return a.v().styleDefaults.animationDuration/1E3};function Xp(a,b,c,d){this.Init(b,c,d);this.W=a}dvt.j.u(Xp,dvt.K);S=Xp.prototype;S.wQ=function(a){a=this.eb(a.target);kq(a);this.SN(a)};S.DW=function(a){a=this.eb(a.target);this.SN(a)};S.Pv=function(a){a=this.eb(a.target);kq(a);this.SN(a)};function kq(a){a instanceof cq&&(a=a.iK())&&a.call()}S.Gk=function(a){var b=p,c=this.Ze();a.keyCode==dvt.G.wi?kq(c):b=Xp.q.Gk.call(this,a);return b};
S.Cp=function(a,b,c){a=this.W.v();"dim"==a.hoverBehavior&&(b=b.ze?b.ze():[],a.highlightedCategories=c?b.slice():s,c=dvt.Wa.WG(a.highlightedCategories,c),b=dvt.Qa.hs(a.styleDefaults.hoverBehaviorDelay),this.RH.Gf(c,this.W.rv(),b,"any"==a.highlightMatch))};S.SN=function(a){a&&(a.Hg&&a.Hg())&&this.Ek(dvt.Wa.VG("action",a.Hg(),a.getId()))};S.Gz=function(){return this.W.v().touchResponse};function Yp(a){this.Init(a)}dvt.j.u(Yp,dvt.Db);Yp.prototype.Init=function(a){Yp.q.Init.call(this,a)};
Yp.prototype.YD=function(a){return this.aj(a)&&!a.ctrlKey};Yp.prototype.xv=function(a){return a.keyCode==dvt.G.xi&&a.ctrlKey};function bq(){}dvt.j.u(bq,dvt.tH);bq.prototype.Tr=function(a,b,c){return c[0]};
  return dvt;
});
