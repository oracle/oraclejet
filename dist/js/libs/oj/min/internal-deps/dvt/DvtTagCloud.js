/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(['./DvtToolkit'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.

var ga;function ka(a,E){0==a.indexOf("dvt.")&&(a=a.substring(4));var B=a.split("."),q=eval("dvt");B[0]in q||!q.execScript||q.execScript("var "+B[0]);for(var w;B.length&&(w=B.shift());)B.length||void 0===E?q=q[w]?q[w]:q[w]={}:q[w]=E}Math.floor(2147483648*Math.random()).toString(36);
(function(a){function E(a){this.Init(a)}function B(a,b,d,f){this.Init(b,d,f);this.La=a}function q(){}function w(){this.Init({alta:w.Ig})}function x(a,b,d){this.Init(a,b,d)}function h(a,b,d,f,h,k,y,t,q){this.Init(a,b,d,f,h,k,y,t,q)}function d(a){this.cE=a}a.Vh=function(a,b,d){this.Init(a,b,d)};a.i.v(a.Vh,a.mc);a.Vh.newInstance=function(b,d,f){return new a.Vh(b,d,f)};a.Vh.prototype.Init=function(b,d,f){a.Vh.C.Init.call(this,b,d,f);this.a.Fc.oa().setAttributeNS(null,"text-rendering","geometricPrecision");
this.u=new B(this,b,this.Lf,this);this.u.Kf(this);a.m.mb()||this.u.ss(new E(this.u));this.Vf=new w;this.Vb=[];this.aw=[];this.lk=null;this.Zo=new a.xc(this.a);this.u.AS(this.Zo)};a.Vh.prototype.ha=function(b,d,g){isNaN(d)||isNaN(g)||(this.Ra=d,this.fb=g);this.TZ();this.Le(b);this.po();this.Wi=this.Ha;this.BH=this.Vb;this.Vb=[];this.MEa=[];this.Ha=new a.ba(this.a);this.B(this.Ha);f.ha(this,this.Ha,new a.U(0,0,this.Ra,this.fb));this.Kb&&this.Kb.ms(this.K.selection,this.qw());d=this.K.animationDuration;
g=new a.U(0,0,this.Ra,this.fb);this.Wi?"none"!==this.K.animationOnDataChange&&b&&(this.yh=new a.ba(this.a),this.B(this.yh),b=new a.dm(this.a,this.yh),b.Zn(this.BH,this.Vb),this.Ab=b.iw()):"none"!==this.K.animationOnDisplay&&(this.Ab=a.Ta.qE(this.a,a.Ta.rA,this.Ha,g,d));this.Ab?(this.u.cd(),this.u.Gm(this),this.Ab.eg(this.mza,this),this.Ab.play()):this.mza();this.Hs()};a.Vh.prototype.Uva=function(a){this.Vb=a};a.Vh.prototype.mh=function(){this.Sc||(this.Sc=new d(this));return this.Sc};a.Vh.prototype.VL=
function(a,b){this.aw.push(a);this.MEa[b]=a};a.Vh.prototype.qw=function(){return this.aw};a.Vh.prototype.By=function(){return this.MEa};a.Vh.prototype.fe=function(b){this.K.highlightedCategories=a.eb.clone(b);a.Qd.fe(b,this.qw(),"any"===this.K.highlightMatch);this.lk&&this.lk.fe(b)};a.Vh.prototype.select=function(b){this.K.selection=a.eb.clone(b);this.Kb&&this.Kb.ms(this.K.selection,this.qw())};a.Vh.prototype.Le=function(b){b?this.K=this.Vf.Io(b):this.K||(this.K=this.BA());b=this.K.selectionMode;
this.Kb="single"===b?new a.Kb(a.Kb.Dv):"multiple"===b?new a.Kb(a.Kb.Gs):null;this.u.Zy(this.Kb);a.m.Xk()||(this.K.animationOnDisplay="none",this.K.animationOnDataChange="none")};a.Vh.prototype.Ak=function(){return a.I.Fd(this.A(),"componentName",a.I.ua,"TAG_CLOUD")};a.Vh.prototype.mza=function(){this.Wi&&(this.removeChild(this.Wi),this.Wi.vc(),this.Wi=null);this.yh&&(this.removeChild(this.yh),this.yh.vc(),this.yh=null);this.Ab&&this.u.Kf(this);this.K.highlightedCategories&&0<this.K.highlightedCategories.length&&
this.fe(this.K.highlightedCategories);this.Hj||this.Dl();this.Ab=null;this.Hj=!1};a.Vh.prototype.TZ=function(){this.u.cd();this.aw.length=0};a.Vh.prototype.Lf=function(b,d){var f=b.type;if("categoryHide"==f||"categoryShow"==f){var h=b.category,q=a.Z.Zb(this.K.hiddenCategories,h);"categoryHide"==f&&0>q&&this.K.hiddenCategories.push(h);"categoryShow"==f&&0<=q&&this.K.hiddenCategories.splice(q,1);this.ha(this.K,this.Ra,this.fb)}else"categoryHighlight"==f&&(this!=d?this.fe(b.categories):this.lk&&this.lk!=
d&&this.lk.Lf(b,d));b&&this.dispatchEvent(b)};a.Vh.prototype.p5a=function(a){return this.Kb?a[0]:null};a.Vh.prototype.b3a=function(a){a.pb()||(this.Kb.En(a,!1),this.u.xy());a=[];for(var b=this.Kb.getSelection(),d=0;d<b.length;d++){var f=b[d];f instanceof x&&a.push(f.getId())}return a};a.Vh.prototype.mq=function(){for(var a=[],b=this.Kb.getSelection(),d=0;d<b.length;d++)a=a.concat(b[d].ce());return a};a.Vh.prototype.Dn=function(a,b,d){return this.Zo.Dn(d)};a.Vh.prototype.Ul=function(a,b){return this.Zo.Ul(a,
b)};a.Vh.prototype.Ay=function(a,b){return this.Zo.Ay(a,b)};a.Vh.prototype.BC=function(a,b){return this.Zo.BC(a,b)};a.i.v(d,a.Sc);d.prototype.Qm=function(a){return(a=this.cE.u.Ya(a))&&a instanceof x?"item["+this.cE.By().indexOf(a)+"]":null};d.prototype.Yg=function(b){if(b==a.Sc.ex)return this.CA(this.cE);var d=b.indexOf("[");return 0<d&&"item"===b.substring(0,d)&&(b=this.cE.By()[parseInt(b.substring(d+1,b.length-1))])?b.ce()[0].oa():null};d.prototype.getItem=function(a){if(a=this.cE.By()[a]){var b=
{};b.color=a.Mi();b.tooltip=a.$g();b.label=a.Pe();b.value=a.getValue();b.selected=a.pb();return b}return null};d.prototype.oV=function(){return this.cE.qw().length};a.i.v(h,a.Sb);h.eSa=.3;h.fSa=.6;h.rda=0;h.f7=1;h.sda=2;h.prototype.Init=function(a,b,d,f,q,k,y,t,x){h.C.Init.call(this,b,d,f,q,k,x);this.cE=a;this.at();this.gc.Xa(y);this.gc.Kc(t);k&&this.wCa(k)};h.prototype.lc=function(a){this.xi!=a&&((this.xi=a)?this.Nl?this.tb(this.w$):this.tb(this.zaa):this.tb(this.QK))};h.prototype.Wc=function(){this.Nl||
(this.Nl=!0,this.xi?this.tb(this.w$):this.tb(this.ana))};h.prototype.Dc=function(){this.xi?this.tb(this.zaa):this.tb(this.QK);this.Nl=!1};h.prototype.ag=function(d,f){var g=new a.zd(this.a,this,b.Wb(this.cE)),q=this.xf(),r=f.xf(),k=!1,y=r.O(a.j.ud),t=q.O(a.j.ud);if(y!=t){var x=this;this.tb(q.Xa(a.j.ud,y));g.da.X(a.L.K8,this,function(){return x.xf().O(a.j.ud)},function(b){x.tb(x.xf().Xa(a.j.ud,b))},t)}r=parseFloat(r.O(a.j.gi));q=parseFloat(q.O(a.j.gi));r!=q&&(k=!0,x=this,this.Rg(r),g.da.X(a.L.za,this,
function(){return parseFloat(x.xf().O(a.j.gi))},this.Rg,q));q=f.ob();r=this.ob();y=f.Tk();t=this.Tk();if(r!=q||k&&t!=y)t!=y&&(q=h.kUa(f,q,y)),this.qa(q),g.da.X(a.L.za,this,this.ob,this.qa,r);k=f.zb();q=this.zb();q!=k&&(this.Za(k),g.da.X(a.L.za,this,this.zb,this.Za,q));f.ja(0);d.add(g,h.f7)};h.prototype.ji=function(d){d.add(new a.Eg(this.a,this,b.Wb(this.cE)),h.rda)};h.prototype.Ah=function(d){this.ja(0);d.add(new a.Uf(this.a,this,b.Wb(this.cE)),h.sda)};h.prototype.Rg=function(a){h.C.Rg.call(this,
a);this.wCa(this.xf())};h.prototype.wCa=function(b){this.QK=b.clone();b=this.QK.O(a.j.ud);this.QK.Xa(a.j.le,null);this.ana=this.QK.clone();var d=h.SEa(b,h.eSa);this.ana.Xa(a.j.le,d);this.ana.Xa(a.j.ud,a.D.Sk(d));this.zaa=this.QK.clone();this.zaa.Xa(a.j.le,b);this.zaa.Xa(a.j.ud,a.D.Sk(b));this.w$=this.QK.clone();b=h.SEa(b,h.fSa);this.w$.Xa(a.j.le,b);this.w$.Xa(a.j.ud,a.D.Sk(b))};h.kUa=function(b,d,f){b=b.GJa();return f==a.J.Lj?d+b.b:f==a.J.Gh?d-b.b:d};h.SEa=function(b,d){var f=a.D.sj(b),h=a.D.rj(b),
q=a.D.nj(b);return a.D.TC(Math.floor(255*(1-d)+d*f),Math.floor(255*(1-d)+d*h),Math.floor(255*(1-d)+d*q))};a.i.v(x,a.i);x.prototype.Init=function(b,d,f){this.La=b;this.cf=d;this.Fb=f;this.eB=this.xi=!1;f.url?(d.ug("link"),this.Una=a.l.DL("_blank",f.url)):d.ug("img");this.gp()};x.prototype.getId=function(){return this.Fb.id};x.prototype.Pe=function(){return this.Fb.label};x.prototype.getValue=function(){return this.Fb.value};x.prototype.$g=function(){return this.Fb.shortDesc};x.prototype.Og=function(){return this.Fb.action};
x.prototype.rf=function(){var a=this.La.A().tooltip;return(a=a?a.renderer:null)?this.La.a.ef().jt(a,this.Fj()):this.$g()};x.prototype.Fj=function(){return{id:this.getId(),label:this.Pe(),color:this.Mi(),value:this.getValue()}};x.prototype.DL=function(){return this.Una};x.prototype.Mi=function(){return this.cf.QK.O(a.j.ud)};x.prototype.co=function(a){this.eB=a};x.prototype.ib=function(){return this.eB};x.prototype.pb=function(){return this.xi};x.prototype.lc=function(a){this.xi=a;this.cf.lc(a);this.gp()};
x.prototype.Wc=function(){this.cf.Wc()};x.prototype.Dc=function(){this.cf.Dc()};x.prototype.Kd=function(b){var d=this.La.u.Ba;return b.type==a.MouseEvent.Je||d.Po(b)?this:d.ci(b)?E.Kd(this,b,this.La.qw()):null};x.prototype.sd=function(a){return this.cf.ga(a)};x.prototype.ik=function(){return this.cf.oa()};x.prototype.Fh=function(){this.Zc=!0;this.Wc()};x.prototype.yf=function(){this.Zc&&(this.Zc=!1,this.Dc())};x.prototype.Ie=function(){return this.Zc};x.prototype.ce=function(){return[this.cf]};x.prototype.ve=
function(){var b=[];this.ib()&&b.push(a.I.Ka(a.I.ua,this.pb()?"STATE_SELECTED":"STATE_UNSELECTED"));return a.R.ym(this.$g(),b)};x.prototype.yd=function(){return this.Fb.categories};x.prototype.gp=function(){a.m.bk()||this.cf.Od("label",this.ve())};x.prototype.Ni=function(){if(!this.um&&(this.um=[],this.Fb.showPopupBehaviors))for(var b=this.Fb.showPopupBehaviors,d=0;d<b.length;d++)this.um.push(new a.jb(b[d].popupId,b[d].triggerType,b[d].alignId,b[d].align));return this.um};x.prototype.Dn=function(a){return this.La.p5a(a)};
x.prototype.Ul=function(){return this.La.b3a(this)};x.prototype.mq=function(){return this.La.mq()};a.i.v(w,a.ma);w.Ig={animationOnDisplay:"none",animationOnDataChange:"none",emptyText:null,hiddenCategories:[],hideAndShowBehavior:"none",highlightedCategories:[],highlightMatch:"all",hoverBehavior:"none",layout:"rectangular",selectionMode:"none",_statusMessageStyle:new a.j(a.ma.uj+"color: #333333;"),styleDefaults:{animationDuration:500,hoverBehaviorDelay:200,_style:new a.j(a.ma.uj+"color: #333333;")},
touchResponse:"auto"};var f={};a.i.v(f,a.i);f.ha=function(a,b,d){f.Wn(a,b,d);f.WK(a,b,d);f.ED(d);var h=a.A();h.items&&0<h.items.length?(h=f.L2(a,b,d),0<h.length?(a.Uva(h),a.u.ps(a.qw()[0])):f.Cu(a,b,d)):f.Cu(a,b,d)};f.Cu=function(b,d,f){var h=b.A(),q=h.emptyText;q||(q=a.I.Fd(h,"labelNoData",a.I.ua,"NO_DATA",null));a.ea.Hm(d,q,new a.U(f.x,f.y,f.b,f.f),b.u,h._statusMessageStyle)};f.Wn=function(b,d,f){b=new a.Rect(b.a,f.x,f.y,f.b,f.f);b.ec();d.B(b)};f.L2=function(b,d,f){for(var w=b.A(),r=[],k=w.items,
y=Number.MAX_VALUE,t=-Number.MAX_VALUE,F=0;F<k.length;F++)y=Math.min(y,k[F].value),t=Math.max(t,k[F].value);var y=q.q3a(y,t),t=a.Z.vC(w.hiddenCategories),C=a.j.Zba(),D=w.styleDefaults,v=D.svgStyle||D.style;!v||v instanceof Object||(v=a.j.kL(v));for(F=0;F<k.length;F++){var z=k[F];z.categories||(z.categories=[z.label]);if(!t||!a.Z.YI(t,z.categories)){var m=D._style.clone(),A=z.svgStyle||z.style;!A||A instanceof Object||(A=a.j.kL(A));var J=A&&A.color?A.color:z.color?z.color:v&&v.color?v.color:null;if(A=
a.eb.ge(A,v)){for(var B=0;B<C.length;B++){var E=a.j.jE(C[B]);A[E]&&(m.Xa(C[B],A[E]),delete A[E])}delete A.color}J&&m.Xa(a.j.ud,J);m.Xa(a.j.gi,y.call(null,z.value).toString());m=new h(b,b.a,z.label,0,0,m,A,z.svgClassName||z.className,z.id);A=new x(b,m,z);b.u.Yb(m,A);b.VL(A,F);"none"!==w.selectionMode&&A.co(!0);(A.ib()||z.url||A.Og())&&m.setCursor("pointer");r.push(m);d.B(m)}}0<r.length&&("cloud"===w.layout?q.w1a(f,r):q.v6a(f,r,a.m.ca(b.a)));return r};f.WK=function(b,d,f){var h=b.A(),q=h.legend;if(q&&
q.sections){q=a.eb.clone(q);q.orientation="horizontal";q.halign="center";q.hoverBehavior=h.hoverBehavior;q.hideAndShowBehavior=h.hideAndShowBehavior;q.hiddenCategories=h.hiddenCategories;h=a.Af.newInstance(b.a,b.Lf,b);d.B(h);var k=h.Zu(q,f.b,f.f/3);h.ha(q,k.b,k.f);a.hj.position(f,"bottom",h,k.b,k.f,0);b.lk&&(b.lk.vc(),d.removeChild(b.lk));b.lk=h}};f.ED=function(a){a.x=Math.round(a.x);a.y=Math.round(a.y);a.b=Math.round(a.b);a.f=Math.round(a.f)};a.i.v(q,a.i);q.q3a=function(a,b){return function(d){return 12+
Math.ceil(2*(d-a)/(b-a)*12)}};q.w1a=function(b,d){var f=[],h=10/180,q=10/180;b.b>b.f?h*=b.b/b.f:q*=b.f/b.b;for(var k=2*Math.PI/180,y=null,t=0,x=[],w=[],D=0;D<d.length;D++)for(var v=!1,z=0,m=4,A=d[D],J=A.ga(),t=Math.max(t,parseFloat(A.xf().O(a.j.gi))),B=-1;!v;){var E=z%180;void 0===x[E]&&(x[E]=Math.cos(z*k));void 0===w[E]&&(w[E]=Math.sin(z*k));var ha=h*z*x[E],ia=q*z*w[E],da=new a.U(ha,ia,J.b,J.f),v=!0;-1!=B&&f[B].ica(da)&&(v=!1);if(v)for(E=0;E<D;E++)if(f[E].ica(da)){B=E;v=!1;break}v&&(y=y?y.rl(da):
da,B=-1,f[D]=da,A.qa(ha),A.Za(-J.y+ia));3600===z?m=3:5400===z?m=2:10800===z&&(m=1);z+=m}f=Math.max(y.b/b.b,y.f/b.f);h=y.x+y.b/2;y=y.y+y.f/2;for(E=0;E<d.length;E++)A=d[E],A.qa(b.x+A.ob()/f+(b.b/2-h/f)),A.Za(b.y+A.zb()/f+(b.f/2-y/f)),q=parseFloat(A.xf().O(a.j.gi)),A.Rg(q/f)};q.v6a=function(b,d,f){for(var h=[],r=0,k=0,y=0,t=0;t<d.length;t++){var x=d[t],w=x.ga(),r=Math.max(r,w.b),k=Math.max(k,w.f),y=Math.max(y,parseFloat(x.xf().O(a.j.gi)));h.push(new a.fg(w.b,w.f))}t=0;for(x=(b.b-10)/r;.001<x-t;)r=(t+
x)/2,y=q.eCa(h,(b.b-10)/r),y.length*(r*k+2)-2>b.f-10?x=r:t=r;r=t;y=q.eCa(h,(b.b-10)/r);y.push(d.length);for(t=0;t<y.length-1;t++){var w=y[t],D=y[t+1],v=0,z=0,m=!0;if(1<D-w){for(var x=0,A=w;A<D;A++)x+=h[A].b*r,z=Math.max(z,h[A].f*r);v=(b.b-10-x)/(D-w-1);t==y.length-2&&(A=.5*z,A<v&&x+(D-w)*A<.9*(b.b-10)&&(v=A,m=!1))}for(var z=5+(t+1)*(k*r+2)-2,J=f?b.b-5:5,A=w;A<D;A++){var x=d[A],B=parseFloat(x.xf().O(a.j.gi));x.Rg(B*r);x.Za(b.y+z);m&&A==D-1&&A!=w?f?(x.Wg(),x.qa(b.x+5)):(x.kh(),x.qa(b.x+b.b-5)):(x.qa(b.x+
J),f?(x.kh(),J-=h[A].b*r+v):(x.Wg(),J+=h[A].b*r+v))}}};q.eCa=function(a,b){var d=[0],f=a[0].b+2;if(1<a.length)for(var h=1;h<a.length;h++)f+a[h].b>b&&(d.push(h),f=0),f+=a[h].b+2;return d};var b={};a.i.v(b,a.i);b.Wb=function(a){return a.A().styleDefaults.animationDuration/1E3};a.i.v(B,a.u);B.prototype.DF=function(a){a=this.Ya(a.target);this.Lma(a);this.QP(a)};B.prototype.QM=function(a){a=this.Ya(a.target);this.QP(a)};B.prototype.xv=function(a){a=this.Ya(a.target);this.Lma(a);this.QP(a)};B.prototype.Lma=
function(a){a instanceof x&&(a=a.DL())&&a.call()};B.prototype.hm=function(b){var d=!0,f=this.Oe();b.keyCode==a.KeyboardEvent.ho?this.Lma(f):d=B.C.hm.call(this,b);return d};B.prototype.Nj=function(b,d,f){b=this.La.A();"dim"==b.hoverBehavior&&(d=d.yd?d.yd():[],b.highlightedCategories=f?d.slice():null,f=a.la.iJ(b.highlightedCategories,f),d=a.bb.rq(b.styleDefaults.hoverBehaviorDelay),this.LF.Lf(f,this.La.qw(),d,"any"==b.highlightMatch))};B.prototype.QP=function(b){b&&b.Og&&b.Og()&&this.Ct(a.la.Sy("action",
b.Og(),b.getId()))};B.prototype.jz=function(){return this.La.A().touchResponse};a.i.v(E,a.Ba);E.prototype.Init=function(a){E.C.Init.call(this,a)};E.prototype.eA=function(a){return this.ci(a)&&!a.ctrlKey};E.prototype.Po=function(b){return b.keyCode==a.KeyboardEvent.Pj&&b.ctrlKey};E.Kd=function(b,d,f){d=d.keyCode==a.KeyboardEvent.Ke||d.keyCode==a.KeyboardEvent.tf?!0:!1;b=a.Z.Zb(f,b)+(d?1:-1);return b<f.length&&0<=b?f[b]:null};a.i.v(function(){},a.vM);a.M(a,"TagCloud",a.Vh);a.M(a.Vh,"newInstance",a.Vh.newInstance);
a.M(a.Vh.prototype,"render",a.Vh.prototype.ha);a.M(a.Vh.prototype,"getAutomation",a.Vh.prototype.mh);a.M(a.Vh.prototype,"highlight",a.Vh.prototype.fe);a.M(a.Vh.prototype,"select",a.Vh.prototype.select);a.M(d.prototype,"getDomElementForSubId",d.prototype.Yg);a.M(d.prototype,"getItem",d.prototype.getItem);a.M(d.prototype,"getItemCount",d.prototype.oV)})(dvt);
  return dvt;
});
