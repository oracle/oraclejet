/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(['./DvtToolkit', './DvtPanZoomCanvas'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.

var p;function ba(a,b){0==a.indexOf("dvt.")&&(a=a.substring(4));var c=a.split("."),d=eval("dvt");c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}Math.floor(2147483648*Math.random()).toString(36);
function ul(a){this.Init(a)}ba("DvtDiagramLayoutContext",ul);dvt.v.D(ul,dvt.v,"DvtDiagramLayoutContext");
ul.prototype.Init=function(a){this.yh=a?a.yh:null;this.Nq=a?a.Nq:null;this.Kw=a?a.Kw:0;this.qZ=a?a.qZ:0;this.lw=a?a.lw:!1;this.Zia=a?a.Zia:null;this.Hg=a?a.Hg:null;this.cA=a?a.cA:null;this.dj=a?a.dj:null;this.pc={};this.$d={};this.RE=[];this.CX=[];if(a){for(var b=0;b<this.Kw;b++){var c=new vl(a.RE[b]);this.RE.push(c);this.pc[c.getId()]=c}for(var d in a.pc)this.pc[d]||(this.pc[d]=new vl(a.pc[d]));for(b=0;b<this.qZ;b++)c=new wl(a.CX[b]),this.CX.push(c),this.$d[c.getId()]=c;for(var e in a.$d)this.$d[e]||
(this.$d[e]=new wl(a.$d[e]))}};ul.prototype.Do=function(a){this.yh=a};ul.prototype.Zf=function(){return this.yh};ul.prototype.getLayout=ul.prototype.Zf;ul.prototype.xs=function(a){this.Nq=a};ul.prototype.am=function(){return this.Nq};ul.prototype.getLayoutAttributes=ul.prototype.am;ul.prototype.qO=function(a){this.ja(a.getId())||(this.Kw++,this.RE.push(a));this.pc[a.getId()]=a};ul.prototype.ja=function(a){return this.pc[a]};ul.prototype.getNodeById=ul.prototype.ja;ul.prototype.AG=function(a){return this.RE[a]};
ul.prototype.getNodeByIndex=ul.prototype.AG;ul.prototype.yg=function(){return this.Kw};ul.prototype.getNodeCount=ul.prototype.yg;function mb(a,b){a.hd(b.getId())||(a.qZ++,a.CX.push(b));a.$d[b.getId()]=b}ul.prototype.hd=function(a){return this.$d[a]};ul.prototype.getLinkById=ul.prototype.hd;ul.prototype.jK=function(a){return this.CX[a]};ul.prototype.getLinkByIndex=ul.prototype.jK;ul.prototype.It=function(){return this.qZ};ul.prototype.getLinkCount=ul.prototype.It;
ul.prototype.Lhb=function(a,b){for(var c=b,d=new rd(0,0);c;)if(d.x+=c.mda.x+c.wi().x,d.y+=c.mda.y+c.wi().y,c=c.cA){if((c=this.ja(c))&&c.Tb()){var e=c.Dt();e&&(d.x+=e.left,d.y+=e.top)}}else c=null;return new rd(a.x+d.x,a.y+d.y)};ul.prototype.localToGlobal=ul.prototype.Lhb;ul.prototype.hhb=function(){return this.lw};ul.prototype.isLocaleR2L=ul.prototype.hhb;ul.prototype.sdb=function(){return this.Zia};ul.prototype.getComponentSize=ul.prototype.sdb;ul.prototype.Ykb=function(a){this.Hg=a};
ul.prototype.setViewport=ul.prototype.Ykb;ul.prototype.uK=function(){return this.Hg};ul.prototype.getViewport=ul.prototype.uK;ul.prototype.lca=function(a){this.cA=a};ul.prototype.jqa=function(){return this.cA};ul.prototype.getContainerId=ul.prototype.jqa;ul.prototype.ZG=function(a,b,c,d){this.cA&&(this.dj={},"number"!==typeof a&&"string"!==typeof a&&(d=a.left,b=a.right,c=a.bottom,a=a.top),this.dj.top=a,this.dj.right=b,this.dj.bottom=c,this.dj.left=d)};ul.prototype.setContainerPadding=ul.prototype.ZG;
ul.prototype.Dt=function(){return this.dj};ul.prototype.getContainerPadding=ul.prototype.Dt;ul.prototype.vdb=function(){return this.VR};ul.prototype.getCurrentViewport=ul.prototype.vdb;function wl(a){this.Init(a)}ba("DvtDiagramLayoutContextLink",wl);dvt.v.D(wl,dvt.v,"DvtDiagramLayoutContextLink");
wl.prototype.Init=function(a){this.nc=a?a.nc:null;this.CT=a?a.CT:null;this.hS=a?a.hS:null;this.Yk=a?a.Yk:null;this.eN=a?a.eN:null;this.uy=a?a.uy:null;this.Tu=a?a.Tu:null;this.dN=a?a.dN:null;this.Nq=a?a.Nq:null;this.zoa=a?a.zoa:0;this.Zja=a?a.Zja:0;this.lN=a?a.lN:1;this.Pg=a?a.Pg:!1;this.Wm=a?a.Wm:null;this.qm=a?a.qm:null;this.$x=a?a.$x:!1};wl.prototype.setId=function(a){this.nc=a};wl.prototype.getId=function(){return this.nc};wl.prototype.getId=wl.prototype.getId;
wl.prototype.OV=function(a){this.CT=a};wl.prototype.Ve=function(){return this.CT};wl.prototype.getStartId=wl.prototype.Ve;wl.prototype.xV=function(a){this.hS=a};wl.prototype.Ld=function(){return this.hS};wl.prototype.getEndId=wl.prototype.Ld;wl.prototype.ge=function(a){this.Yk="string"==typeof a?dvt.P.j0(a):a};wl.prototype.setPoints=wl.prototype.ge;wl.prototype.Wc=function(){return this.Yk};wl.prototype.getPoints=wl.prototype.Wc;wl.prototype.kg=function(a){this.eN=a};
wl.prototype.setLabelPosition=wl.prototype.kg;wl.prototype.Nf=function(){return this.eN};wl.prototype.getLabelPosition=wl.prototype.Nf;wl.prototype.Wt=function(a){this.dN=a};wl.prototype.Yf=function(){return this.dN};wl.prototype.getLabelBounds=wl.prototype.Yf;wl.prototype.p1=function(){return this.zoa};wl.prototype.getStartConnectorOffset=wl.prototype.p1;wl.prototype.K0=function(){return this.Zja};wl.prototype.getEndConnectorOffset=wl.prototype.K0;wl.prototype.OK=function(a){this.lN=a};
wl.prototype.XA=function(){return this.lN};wl.prototype.getLinkWidth=wl.prototype.XA;wl.prototype.xs=function(a){this.Nq=a};wl.prototype.am=function(){return this.Nq};wl.prototype.getLayoutAttributes=wl.prototype.am;wl.prototype.qc=function(a){this.Pg=a};wl.prototype.hra=function(){return this.Pg};wl.prototype.getSelected=wl.prototype.hra;wl.prototype.aH=function(a){this.Wm=a};wl.prototype.setLabelRotationAngle=wl.prototype.aH;wl.prototype.zD=function(){return this.Wm};
wl.prototype.getLabelRotationAngle=wl.prototype.zD;wl.prototype.VD=function(a){this.qm=a};wl.prototype.setLabelRotationPoint=wl.prototype.VD;wl.prototype.AD=function(){return this.qm};wl.prototype.getLabelRotationPoint=wl.prototype.AD;wl.prototype.TK=function(a){this.$x=a};wl.prototype.MD=function(){return this.$x};wl.prototype.isPromoted=wl.prototype.MD;wl.prototype.wta=function(a){this.uy=a};wl.prototype.setLabelValign=wl.prototype.wta;wl.prototype.vta=function(a){this.Tu=a};
wl.prototype.setLabelHalign=wl.prototype.vta;wl.prototype.Hqa=function(){return this.uy};wl.prototype.getLabelValign=wl.prototype.Hqa;wl.prototype.vU=function(){return this.Tu};wl.prototype.getLabelHalign=wl.prototype.vU;function vl(a){this.Init(a)}ba("DvtDiagramLayoutContextNode",vl);dvt.v.D(vl,dvt.v,"DvtDiagramLayoutContextNode");
vl.prototype.Init=function(a){this.nc=a?a.nc:null;this.fe=a?a.fe:null;this.kY=a?a.kY:null;this.xJ=a?a.xJ:null;this.eN=a?a.eN:null;this.dN=a?a.dN:null;this.uy=a?a.uy:null;this.Tu=a?a.Tu:null;this.Nq=a?a.Nq:null;this.via=a?a.via:!1;this.cA=a?a.cA:null;this.Pg=a?a.Pg:!1;this.Wm=a?a.Wm:null;this.qm=a?a.qm:null;this.dj=a?a.dj:null;this.Xu=a?a.Xu:null;this.Yu=a?a.Yu:null;this.lm=a?a.lm:!1;this.eW=a?a.Pa():null;this.qE=!0;this.mda=new rd(0,0)};vl.prototype.setId=function(a){this.nc=a};
vl.prototype.getId=function(){return this.nc};vl.prototype.getId=vl.prototype.getId;vl.prototype.uf=function(){!this.qE&&this.eW&&this.eW.oV(this);return this.fe};vl.prototype.getBounds=vl.prototype.uf;vl.prototype.Yh=function(){!this.qE&&this.eW&&this.eW.oV(this);return this.kY};vl.prototype.getContentBounds=vl.prototype.Yh;vl.prototype.setPosition=function(a){this.xJ=a;xl(this,this)};vl.prototype.setPosition=vl.prototype.setPosition;vl.prototype.wi=function(){return this.xJ};
vl.prototype.getPosition=vl.prototype.wi;vl.prototype.kg=function(a){this.eN=a};vl.prototype.setLabelPosition=vl.prototype.kg;vl.prototype.Nf=function(){return this.eN};vl.prototype.getLabelPosition=vl.prototype.Nf;vl.prototype.Wt=function(a){this.dN=a};vl.prototype.Yf=function(){return this.dN};vl.prototype.getLabelBounds=vl.prototype.Yf;vl.prototype.xs=function(a){this.Nq=a};vl.prototype.am=function(){return this.Nq};vl.prototype.getLayoutAttributes=vl.prototype.am;
vl.prototype.XD=function(a){this.via=a};vl.prototype.bV=function(){return this.via};vl.prototype.isReadOnly=vl.prototype.bV;vl.prototype.lca=function(a){this.cA=a};vl.prototype.jqa=function(){return this.cA};vl.prototype.getContainerId=vl.prototype.jqa;vl.prototype.qc=function(a){this.Pg=a};vl.prototype.hra=function(){return this.Pg};vl.prototype.getSelected=vl.prototype.hra;vl.prototype.aH=function(a){this.Wm=a};vl.prototype.setLabelRotationAngle=vl.prototype.aH;vl.prototype.zD=function(){return this.Wm};
vl.prototype.getLabelRotationAngle=vl.prototype.zD;vl.prototype.VD=function(a){this.qm=a};vl.prototype.setLabelRotationPoint=vl.prototype.VD;vl.prototype.AD=function(){return this.qm};vl.prototype.getLabelRotationPoint=vl.prototype.AD;
vl.prototype.ZG=function(a,b,c,d){this.Tb()&&(this.dj={},"number"!==typeof a&&"string"!==typeof a&&(d=a.left,b=a.right,c=a.bottom,a=a.top),this.dj.top=a,this.dj.right=b,this.dj.bottom=c,this.dj.left=d,this.Xu&&(this.fe=new vb(this.Xu.x,this.Xu.y,this.Xu.w+d+b,this.Xu.h+a+c)),this.Yu&&(this.kY=new vb(this.Yu.x,this.Yu.y,this.Yu.w+d+b,this.Yu.h+a+c)))};vl.prototype.setContainerPadding=vl.prototype.ZG;vl.prototype.Dt=function(){return this.dj};vl.prototype.getContainerPadding=vl.prototype.Dt;
vl.prototype.Ai=function(a){this.lm=a};vl.prototype.Tb=function(){return this.lm};vl.prototype.isDisclosed=vl.prototype.Tb;vl.prototype.jca=function(a){this.p2a=a};vl.prototype.Be=function(){return this.p2a};vl.prototype.getChildNodes=vl.prototype.Be;vl.prototype.MV=function(a){this.WC=a};vl.prototype.vp=function(){return this.WC};vl.prototype.getParentNode=vl.prototype.vp;function xl(a,b){var c=b.vp();c&&c.qE&&(c.qE=!1,xl(a,c))}vl.prototype.wta=function(a){this.uy=a};
vl.prototype.setLabelValign=vl.prototype.wta;vl.prototype.vta=function(a){this.Tu=a};vl.prototype.setLabelHalign=vl.prototype.vta;vl.prototype.Hqa=function(){return this.uy};vl.prototype.getLabelValign=vl.prototype.Hqa;vl.prototype.vU=function(){return this.Tu};vl.prototype.getLabelHalign=vl.prototype.vU;function rd(a,b){this.Init(a,b)}ba("DvtDiagramPoint",rd);dvt.v.D(rd,dvt.v,"DvtDiagramPoint");rd.prototype.Init=function(a,b){this.x=null===a||isNaN(a)?0:a;this.y=null===b||isNaN(b)?0:b};
function vb(a,b,c,d){this.Init(a,b,c,d)}ba("DvtDiagramRectangle",vb);dvt.v.D(vb,dvt.v,"DvtDiagramRectangle");vb.prototype.Init=function(a,b,c,d){this.x=null===a||isNaN(a)?0:a;this.y=null===b||isNaN(b)?0:b;this.w=null===c||isNaN(c)?0:c;this.h=null===d||isNaN(d)?0:d};dvt.Wb={};dvt.v.D(dvt.Wb,dvt.v);dvt.Wb.Nob=function(a,b,c){a&&b&&a instanceof ya&&b instanceof ya?dvt.Wb.oXa(a,b,c):a&&b&&a instanceof dvt.he&&b instanceof dvt.he?dvt.Wb.nXa(a,b,c):a&&b&&dvt.Wb.Eza(a,b,c)};
dvt.Wb.oXa=function(a,b,c){dvt.Wb.S$a(a,b,c);var d=a.Hd?a.Hd():null,e=b.Hd?b.Hd():null;c&&(a.Va()!=b.Va()&&c.O(dvt.I.W,a,a.Va,a.Ia,b.Va()),a.hb()!=b.hb()&&c.O(dvt.I.W,a,a.hb,a.jb,b.hb()),d&&e&&d instanceof dvt.cc&&e instanceof dvt.cc&&d.sc()!=e.sc()&&c.O(dvt.I.Dq,a,a.Hd,a.ra,e))};
dvt.Wb.Eza=function(a,b,c){var d=a.aa(a.u().Le),e=b.aa(b.u().Le),f=a.Hd?a.Hd():null,h=b.Hd?b.Hd():null,k=a.Qd?a.Qd():null,l=b.Qd?b.Qd():null;if(c){var n=b=1;d.a!=e.a&&(b=e.a/d.a);d.b!=e.b&&(n=e.b/d.b);var m=0,q=0;d.x!=e.x&&(m=e.x-d.x);d.y!=e.y&&(q=e.y-d.y);f&&h&&f instanceof dvt.cc&&h instanceof dvt.cc&&f.sc()!=h.sc()&&c.O(dvt.I.Dq,a,a.Hd,a.ra,h);k&&l&&k instanceof dvt.Ba&&l instanceof dvt.Ba&&k.sc()!=l.sc()&&c.O(dvt.I.WL,a,a.Qd,a.Ea,l);if(0!=m||0!=q||1!=b||1!=n)e=new dvt.Sb,e.translate(-d.x,-d.y),
e.scale(b,n),e.translate(d.x,d.y),e.translate(m,q),d=a.nb().clone(),d.concat(e),c.O(dvt.I.Mi,a,a.nb,a.sb,d)}};dvt.Wb.S$a=function(a,b,c){if(c){var d=dvt.Wb.NY(a);b=dvt.Wb.NY(b);d.Ne(b)||(d=dvt.Wb.NY(a.getParent()),d.GD(),b.concat(d),c.O(dvt.I.Mi,a,a.nb,a.sb,b))}};dvt.Wb.NY=function(a){var b=[a];for(a=a.getParent();a;)b.push(a),a=a.getParent();a=new dvt.Sb;for(var c=0;c<b.length;c++)a.concat(b[c].nb());return a};
dvt.Wb.nXa=function(a,b,c){var d=dvt.Wb.VCa(a),e=dvt.Wb.VCa(b);if(d&&e){a!=d&&(dvt.Wb.S9a(a,d),a=d);var d=a.Hd?a.Hd():null,f=b.Hd?b.Hd():null;c&&(d&&f&&d instanceof dvt.cc&&f instanceof dvt.cc&&d.sc()!=f.sc()&&c.O(dvt.I.Dq,a,a.Hd,a.ra,f),b=dvt.Wb.NY(b),dvt.Wb.E1a(a,e,c,b))}else dvt.Wb.Eza(a,b,c)};dvt.Wb.VCa=function(a){if(a instanceof dvt.vb)return a;var b=dvt.Wb.q5a(a);return b?new dvt.vb(a.u(),b):null};
dvt.Wb.S9a=function(a,b){var c=a.Hd(),d=a.Qd(),e=a.nb(),f=a.getParent().ui(a);a.getParent().Jb(b,f);a.ra(null);a.Ea(null);a.sb(null);b.ra(c);b.Ea(d);b.sb(e);c=a.Hb();for(d=0;d<c;d++)b.A(a.bb(0));a.getParent().removeChild(a);a.va&&a.va()};
dvt.Wb.q5a=function(a){var b;if(a instanceof dvt.Rect){var c=a.ds(),d=a.Mt(),e=a.Va(),f=a.hb(),h=a.getWidth(),k=a.getHeight();if(c&&d){a=.5*Math.PI;var l=Math.cos(.5*a),n=Math.sin(.5*a),m=l,q=-n,t=(4-l)/3,v=(1-l)*(3-l)/(3*n);b=t;var x=-v,l=new dvt.R(l,n),m=new dvt.R(m,q),t=new dvt.R(t,v),x=new dvt.R(b,x),v=new dvt.Sb;v.rotate(.5*a);v.scale(c,d);a=v.Pe(t);var l=v.Pe(x),w=e+h-c,z=f+d;b=["M",e+c,f,"L",e+h-c,f,"C",w+a.x,z-a.y,w+l.x,z-l.y,e+h,f+d];z=f+k-d;b.push("L",e+h,f+k-d,"C",w+l.x,z+l.y,w+a.x,z+a.y,
e+h-c,f+k);w=e+c;b.push("L",e+c,f+k,"C",w-a.x,z+a.y,w-l.x,z+l.y,e,f+k-d);z=f+d;b.push("L",e,f+d,"C",w-l.x,z-l.y,w-a.x,z-a.y,e+c,f,"Z")}else b=["M",e,f,"L",e+h,f,"L",e+h,f+k,"L",e,f+k,"Z"]}else if(a instanceof dvt.Zv||a instanceof dvt.hi){if(c=a.Wc()){b=[];for(f=0;f<c.length;f+=2)0==f?b.push("M",c[f],c[f+1]):b.push("L",c[f],c[f+1]);a instanceof dvt.hi&&b.push("Z")}}else if(a instanceof dvt.Gc)b=["M",a.dr(),a.ls(),"L",a.ks(),a.Nt()];else if(a instanceof dvt.gm){w=a.Hj();z=a.Ij();a instanceof dvt.qu?
(c=a.ds(),d=a.Mt()):d=c=a.dn();e=-.5*Math.PI;a=2*Math.PI/4;l=Math.cos(.5*a);n=Math.sin(.5*a);m=l;q=-n;t=(4-l)/3;v=(1-l)*(3-l)/(3*n);b=t;x=-v;l=new dvt.R(l,n);m=new dvt.R(m,q);t=new dvt.R(t,v);x=new dvt.R(b,x);b=[];for(f=0;4>f;f++)v=new dvt.Sb,v.rotate(e+f*a),v.scale(c,d),0==f&&(h=v.Pe(m),b.push("M",w+h.x,z+h.y)),h=v.Pe(x),k=v.Pe(t),v=v.Pe(l),b.push("C",w+h.x,z+h.y,w+k.x,z+k.y,w+v.x,z+v.y);b.push("Z")}else a instanceof dvt.Rf&&(c=a.Uw()*dvt.Math.AE,d=a.rp()*dvt.Math.AE,b=["M",a.Hj()+a.ds()*Math.cos(c),
a.Ij()-a.Mt()*Math.sin(c),"A",a.ds(),a.Mt(),"0",180<Math.abs(a.rp())?"1":"0",0<a.rp()?"0":"1",a.Hj()+a.ds()*Math.cos(c+d),a.Ij()-a.Mt()*Math.sin(c+d)],a.AM===dvt.Rf.XP?b.push("Z"):a.AM===dvt.Rf.ofa&&b.push("L",a.Hj(),a.Ij(),"Z"));return b};dvt.Wb.yF=function(a,b){for(;b<a.length&&!isNaN(a[b]);)b++;return b};dvt.Wb.rS=function(a,b){for(;-1<b&&!isNaN(a[b]);)b--;return b};dvt.Wb.$Ca=function(a){for(var b=0,c=0;c<a.length;c++)isNaN(a[c])&&b++;return b};
dvt.Wb.n7a=function(a,b){var c=dvt.Wb.$Ca(a),d=dvt.Wb.$Ca(b);if(c!=d){var e=0,f=0;c>d?(e=c-d,f=d,c=b):(e=d-c,f=c,c=a);d=Math.floor(f/e);1>d&&(d=1);f=Math.floor(e/f);1>f&&(f=1);for(var h=-1,k=0;k<c.length;k++)if(isNaN(c[k])){if(h==d)for(var l=h=0;l<f;l++)c.splice(k++,0,"tmp"),e--;h++}for(k=0;k<e;k++)"Z"==c[c.length-1]?c.splice(c.length-1,0,"tmp"):c.push("tmp")}};dvt.Wb.rHa=function(a){return 2<a.length&&"Z"==a[a.length-1]?(a.splice(a.length-1,1),a.push("L",a[1],a[2]),!0):!1};
dvt.Wb.E1a=function(a,b,c,d){b=dvt.Wb.GMa(a.DO(),b.DO());var e=dvt.Wb.NY(a);e&&dvt.Wb.QKa(b.Mta,e);a.sb(null);d&&dvt.Wb.QKa(b.Lta,d);a.ss(b.Mta);c.O(dvt.I.Gl,a,a.DO,a.ss,b.Lta)};
dvt.Wb.GMa=function(a,b){var c=dvt.na.copy(a),d=dvt.na.copy(b),e=[],f=[];dvt.Wb.XGa(c);dvt.Wb.XGa(d);dvt.Wb.$Ga(c);dvt.Wb.$Ga(d);dvt.Wb.aHa(c);dvt.Wb.aHa(d);dvt.Wb.bHa(c);dvt.Wb.bHa(d);var h=dvt.Wb.rCa(c),k=dvt.Wb.rCa(d);dvt.Wb.hKa(h);dvt.Wb.hKa(k);for(var l=0;l<Math.max(h.length,k.length);l++){var n=[],m=[],q=null,t=null;l<h.length?q=h[l]:(q=["M",c[1],c[2]],"Z"==k[l][k[l].length-1]&&q.push("Z"));l<k.length?t=k[l]:(t=["M",d[1],d[2]],"Z"==h[l][h[l].length-1]&&t.push("Z"));dvt.Wb.F1a(q,t,n,m);f=f.concat(n);
e=e.concat(m)}return{Mta:f,Lta:e}};dvt.Wb.rCa=function(a){for(var b=[],c=0,d=1;d<a.length;d++)if("M"==a[d]||"m"==a[d])b.push(a.slice(c,d)),c=d;1>b.length?b.push(a):c<a.length&&b.push(a.slice(c));return b};dvt.Wb.hKa=function(a){a.sort(dvt.Wb.u2a)};dvt.Wb.u2a=function(a,b){var c=dvt.Wb.xCa(a),d=dvt.Wb.xCa(b);return c>d?-1:d>c?1:0};
dvt.Wb.xCa=function(a){for(var b=0,c=0,d=0,e=0,f=0,h=0,k=0,l=0;l<a.length;){switch(a[l]){case "M":f=a[l+1];h=a[l+2];break;case "L":b=a[l+1];c=a[l+2];break;case "C":b=a[l+5];c=a[l+6];break;case "Q":b=a[l+3];c=a[l+4];break;case "A":b=a[l+6];c=a[l+7];break;case "Z":b=f,c=h}k+=Math.sqrt((b-d)*(b-d)+(c-e)*(c-e));l=dvt.Wb.yF(a,l+1);d=b;e=c}return k};
dvt.Wb.F1a=function(a,b,c,d){var e=dvt.Wb.rHa(a),f=dvt.Wb.rHa(b);if(e||a[a.length-2]==a[1]&&a[a.length-1]==a[2])a=dvt.Wb.ZGa(a),a=dvt.Wb.YGa(a);if(f||b[b.length-2]==b[1]&&b[b.length-1]==b[2])b=dvt.Wb.ZGa(b),b=dvt.Wb.YGa(b);dvt.Wb.n7a(a,b);dvt.Wb.D1a(a,b,c,d);e&&a.push("Z");f&&b.push("Z")};
dvt.Wb.D1a=function(a,b,c,d){for(var e=0,f=0,h=0,k=0,l=0,n=0,m=!1,q=!1;-1<e||-1<f;){var t=-1<e?a[e]:null,v=-1<f?b[f]:null,x=-1<e?dvt.Wb.yF(a,e+1):-1,w=-1<f?dvt.Wb.yF(b,f+1):-1;if(t==v){for(;f<w;f++)d.push(b[f]);for(f=e;f<x;f++)c.push(a[f])}else t&&"tmp"!=t?v&&"tmp"!=v?"L"==t?"Q"==v?(d.push("Q",b[f+1],b[f+2],b[f+3],b[f+4]),c.push("Q",h+.5*(a[e+1]-h),k+.5*(a[e+2]-k),a[e+1],a[e+2])):"C"==v?(d.push("C",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6]),c.push("C",h+.5*(a[e+1]-h),k+.5*(a[e+2]-k),h+.5*(a[e+1]-
h),k+.5*(a[e+2]-k),a[e+1],a[e+2])):"A"==v?(d.push("L",l,n,"A",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6],b[f+7]),c.push("L",a[e+1],a[e+2],"A",0,0,b[f+3],b[f+4],b[f+5],a[e+1],a[e+2])):"Z"==v&&(m=!0,d.push("L",l,n),c.push("L",a[e+1],a[e+2])):"Q"==t?"L"==v?(d.push("Q",l+.5*(b[f+1]-l),n+.5*(b[f+2]-n),b[f+1],b[f+2]),c.push("Q",a[e+1],a[e+2],a[e+3],a[e+4])):"C"==v?(d.push("C",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6]),c.push("C",a[e+1],a[e+2],a[e+1],a[e+2],a[e+3],a[e+4])):"A"==v?(d.push("Q",l,n,l,n,"A",
b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6],b[f+7]),c.push("Q",a[e+1],a[e+2],a[e+3],a[e+4],"A",0,0,b[f+3],b[f+4],b[f+5],a[e+3],a[e+4])):"Z"==v&&(m=!0,d.push("Q",l,n,l,n),c.push("Q",a[e+1],a[e+2],a[e+3],a[e+4])):"C"==t?"L"==v?(d.push("C",l+.5*(b[f+1]-l),n+.5*(b[f+2]-n),l+.5*(b[f+1]-l),n+.5*(b[f+2]-n),b[f+1],b[f+2]),c.push("C",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6])):"Q"==v?(d.push("C",b[f+1],b[f+2],b[f+1],b[f+2],b[f+3],b[f+4]),c.push("C",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6])):"A"==v?(d.push("C",
l,n,l,n,l,n,"A",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6],b[f+7]),c.push("C",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6],"A",0,0,b[f+3],b[f+4],b[f+5],a[e+5],a[e+6])):"Z"==v&&(m=!0,d.push("C",l,n,l,n,l,n),c.push("C",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6])):"A"==t?"L"==v?(d.push("L",b[f+1],b[f+2],"A",0,0,a[e+3],a[e+4],a[e+5],b[f+1],b[f+2]),c.push("L",h,k,"A",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6],a[e+7])):"Q"==v?(d.push("Q",b[f+1],b[f+2],b[f+3],b[f+4],"A",0,0,a[e+3],a[e+4],a[e+5],b[f+3],b[f+4]),
c.push("Q",h,k,h,k,"A",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6],a[e+7])):"C"==v?(d.push("C",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6],"A",0,0,a[e+3],a[e+4],a[e+5],b[f+5],b[f+6]),c.push("C",h,k,h,k,h,k,"A",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6],a[e+7])):"Z"==v&&(m=!0,d.push("A",0,0,a[e+3],a[e+4],a[e+5],l,n),c.push("A",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6],a[e+7])):"Z"==t&&(q=!0,"L"==v?(d.push("L",b[f+1],b[f+2]),c.push("L",h,k)):"Q"==v?(d.push("Q",b[f+1],b[f+2],b[f+3],b[f+4]),c.push("Q",h,k,
h,k)):"C"==v?(d.push("C",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6]),c.push("C",h,k,h,k,h,k)):"A"==v&&(d.push("A",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6],b[f+7]),c.push("A",0,0,b[f+3],b[f+4],b[f+5],h,k))):"L"==t?(d.push("L",l,n),c.push("L",a[e+1],a[e+2])):"Q"==t?(d.push("Q",l,n,l,n),c.push("Q",a[e+1],a[e+2],a[e+3],a[e+4])):"C"==t?(d.push("C",l,n,l,n,l,n),c.push("C",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6])):"A"==t?(d.push("A",0,0,a[e+3],a[e+4],a[e+5],l,n),c.push("A",a[e+1],a[e+2],a[e+3],a[e+4],
a[e+5],a[e+6],a[e+7])):"Z"==t&&(d.push("Z"),c.push("Z")):"L"==v?(d.push("L",b[f+1],b[f+2]),c.push("L",h,k)):"Q"==v?(d.push("Q",b[f+1],b[f+2],b[f+3],b[f+4]),c.push("Q",h,k,h,k)):"C"==v?(d.push("C",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6]),c.push("C",h,k,h,k,h,k)):"A"==v?(d.push("A",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6],b[f+7]),c.push("A",0,0,b[f+3],b[f+4],b[f+5],h,k)):"Z"==v&&(d.push("Z"),c.push("Z"));-1<x&&"Z"!=t&&"tmp"!=t&&(h=a[x-2],k=a[x-1]);-1<w&&"Z"!=v&&"tmp"!=v&&(l=b[w-2],n=b[w-1]);e=x;
f=w;if(e>=a.length||0>e)e=-1;if(f>=b.length||0>f)f=-1}if(q||m)d.push("Z"),c.push("Z")};
dvt.Wb.YGa=function(a){if(!dvt.Wb.P6a(a)){for(var b=["M"],c=dvt.Wb.rS(a,a.length-1);-1<c;){var d=a[c];switch(d){case "M":b.push(a[c+1],a[c+2]);break;case "L":b.push(a[c+1],a[c+2]);b.push(d);break;case "Q":b.push(a[c+3],a[c+4]);b.push(d);b.push(a[c+1],a[c+2]);break;case "C":b.push(a[c+5],a[c+6]);b.push(d);b.push(a[c+3],a[c+4]);b.push(a[c+1],a[c+2]);break;case "A":b.push(a[c+6],a[c+7]),b.push(d),b.push(a[c+1],a[c+2],a[c+3],a[c+4]),b.push(0==a[c+5]?1:0)}c=dvt.Wb.rS(a,c-1)}return b}return a};
dvt.Wb.P6a=function(a){for(var b=[],c=0,d=Number.MAX_VALUE,e=Number.MAX_VALUE,f=dvt.Wb.rS(a,a.length-1),h=1;h<f;){h=dvt.Wb.yF(a,h);if(0<h-2&&"Z"!=a[h-1]){var k=a[h-2],l=a[h-1];b.push(k,l);if(l<e||l==e&&k<d)d=k,e=l,c=b.length-2}h+=1}k=h=f=a=0;0<c?(a=b[c-2],f=b[c-1]):(a=b[b.length-2],f=b[b.length-1]);c<b.length-2?(h=b[c+2],k=b[c+3]):(h=b[0],k=b[1]);return 0>d*k+a*e+f*h-(f*d+e*h+a*k)?!1:!0};
dvt.Wb.ZGa=function(a){for(var b=0,c=Number.MAX_VALUE,d=Number.MAX_VALUE,e=0,f=dvt.Wb.rS(a,a.length-1),h=1;h<f;){var k=dvt.Wb.yF(a,h);if(0<k-2&&"Z"!=a[k-1]){var h=a[k-2],l=a[k-1];if(l<d||l==d&&h<c)c=h,d=l,b=e}h=k+1;e=k}return 0<b?(k=dvt.Wb.yF(a,b+1),b=["M"],c=a.slice(k-2,a.length),b=b.concat(c),c=a.slice(3,k),b=b.concat(c)):a};
dvt.Wb.l5a=function(a){switch(a){case "H":case "h":case "V":case "v":return 1;case "M":case "m":case "L":case "l":case "T":case "t":return 2;case "Q":case "q":case "S":case "s":return 4;case "C":case "c":return 6;case "A":case "a":return 7}return 0};
dvt.Wb.XGa=function(a){for(var b=0;b<a.length;){var c=a[b],d=dvt.Wb.l5a(c);switch(c){case "M":b+d+1<a.length&&!isNaN(a[b+d+1])&&a.splice(b+d+1,0,"L");break;case "m":b+d+1<a.length&&!isNaN(a[b+d+1])&&a.splice(b+d+1,0,"l");break;case "Z":case "z":break;default:b+d+1<a.length&&!isNaN(a[b+d+1])&&a.splice(b+d+1,0,c)}b+=d+1}};
dvt.Wb.$Ga=function(a){for(var b=0,c=0,d=0,e=0,f=0;f<a.length;){switch(a[f]){case "m":a[f]="M";0<f&&(a[f+1]=b+a[f+1],a[f+2]=c+a[f+2]);b=a[f+1];c=a[f+2];d=b;e=c;break;case "l":a[f]="L";a[f+1]=b+a[f+1];a[f+2]=c+a[f+2];b=a[f+1];c=a[f+2];break;case "h":a[f]="H";a[f+1]=b+a[f+1];b=a[f+1];break;case "v":a[f]="V";a[f+1]=c+a[f+1];c=a[f+1];break;case "c":a[f]="C";a[f+1]=b+a[f+1];a[f+2]=c+a[f+2];a[f+3]=b+a[f+3];a[f+4]=c+a[f+4];a[f+5]=b+a[f+5];a[f+6]=c+a[f+6];b=a[f+5];c=a[f+6];break;case "s":a[f]="S";a[f+1]=
b+a[f+1];a[f+2]=c+a[f+2];a[f+3]=b+a[f+3];a[f+4]=c+a[f+4];b=a[f+3];c=a[f+4];break;case "q":a[f]="Q";a[f+1]=b+a[f+1];a[f+2]=c+a[f+2];a[f+3]=b+a[f+3];a[f+4]=c+a[f+4];b=a[f+3];c=a[f+4];break;case "t":a[f]="T";a[f+1]=b+a[f+1];a[f+2]=c+a[f+2];b=a[f+1];c=a[f+2];break;case "a":a[f]="A";a[f+6]=b+a[f+6];a[f+7]=c+a[f+7];b=a[f+6];c=a[f+7];break;case "z":a[f]="Z";b=d;c=e;break;case "M":b=a[f+1];c=a[f+2];d=b;e=c;break;case "L":b=a[f+1];c=a[f+2];break;case "H":b=a[f+1];break;case "V":c=a[f+1];break;case "C":b=a[f+
5];c=a[f+6];break;case "S":b=a[f+3];c=a[f+4];break;case "Q":b=a[f+3];c=a[f+4];break;case "T":b=a[f+1];c=a[f+2];break;case "A":b=a[f+6];c=a[f+7];break;case "Z":b=d,c=e}f=dvt.Wb.yF(a,f+1)}};
dvt.Wb.aHa=function(a){for(var b=0,c=0,d=0,e=0,f=0;f<a.length;){switch(a[f]){case "M":b=a[f+1];c=a[f+2];d=b;e=c;break;case "L":b=a[f+1];c=a[f+2];break;case "H":b=a[f+1];a[f]="L";a.splice(f+2,0,c);break;case "V":c=a[f+1];a[f]="L";a.splice(f+1,0,b);break;case "C":b=a[f+5];c=a[f+6];break;case "S":var h=dvt.Wb.rS(a,f-1),k=b,l=c;"C"==a[h]&&(l=a[h+4],k=b+(b-a[h+3]),l=c+(c-l));a[f]="C";a.splice(f+1,0,k,l);b=a[f+5];c=a[f+6];break;case "Q":b=a[f+3];c=a[f+4];break;case "T":h=dvt.Wb.rS(a,f-1);k=b;l=c;"Q"==a[h]&&
(l=a[h+2],k=b+(b-a[h+1]),l=c+(c-l));a[f]="Q";a.splice(f+1,0,k,l);b=a[f+3];c=a[f+4];break;case "A":b=a[f+6];c=a[f+7];break;case "Z":b=d,c=e}f=dvt.Wb.yF(a,f+1)}};dvt.Wb.bHa=function(a){for(var b=0,c=0,d=0;d<a.length;d++)"Z"==a[d]?d+1<a.length&&"M"!=a[d+1]&&"m"!=a[d+1]&&a.splice(d+1,0,"M",b,c):"M"==a[d]&&(b=a[d+1],c=a[d+2])};
dvt.Wb.QKa=function(a,b){for(var c=null,d=0;d<a.length;){switch(a[d]){case "M":case "L":c=b.Pe(new dvt.R(a[d+1],a[d+2]));a[d+1]=c.x;a[d+2]=c.y;break;case "Q":c=b.Pe(new dvt.R(a[d+1],a[d+2]));a[d+1]=c.x;a[d+2]=c.y;c=b.Pe(new dvt.R(a[d+3],a[d+4]));a[d+3]=c.x;a[d+4]=c.y;break;case "C":c=b.Pe(new dvt.R(a[d+1],a[d+2]));a[d+1]=c.x;a[d+2]=c.y;c=b.Pe(new dvt.R(a[d+3],a[d+4]));a[d+3]=c.x;a[d+4]=c.y;c=b.Pe(new dvt.R(a[d+5],a[d+6]));a[d+5]=c.x;a[d+6]=c.y;break;case "A":var c=b.Pe(new dvt.R(0,0)),e=b.Pe(new dvt.R(a[d+
1],0)),f=b.Pe(new dvt.R(0,a[d+2])),f=Math.sqrt((f.x-c.x)*(f.x-c.x)+(f.y-c.y)*(f.y-c.y));a[d+1]=Math.sqrt((e.x-c.x)*(e.x-c.x)+(e.y-c.y)*(e.y-c.y));a[d+2]=f;c=b.Pe(new dvt.R(a[d+6],a[d+7]));a[d+6]=c.x;a[d+7]=c.y}d=dvt.Wb.yF(a,d+1)}};function ka(a,b,c){this.Init(a,b,c)}ba("DvtBaseDiagram",ka);dvt.v.D(ka,dvt.Yb,"DvtBaseDiagram");p=ka.prototype;
p.Init=function(a,b,c){ka.C.Init.call(this,a,b,c);this.u().Le.pb().setAttributeNS(null,"text-rendering","geometricPrecision");this.Sla;this.MS=this.Pr=null;this.dZ;this.ria=!0;this.gp=new dvt.ia(a);this.Wk=new dvt.ia(a);this.Ky=new dvt.ia(a);this.QE=dvt.ed.Kua;this.exa()};p.NW=function(){var a=this.Oa;a.uB(this.yG());a.qz(this.CD());a.rB(this.ob());a.La.A(this.gp);a.La.A(this.Wk);a.La.A(this.Ky)};p.rB=function(a){this.QE=a;this.Oa&&this.Oa.rB(a)};p.ob=function(){return this.QE};
p.qz=function(a){this.tA=a;this.Oa&&this.Oa.qz(a)};p.CD=function(){return this.tA};p.uB=function(a){this.uA=a;this.Oa&&this.Oa.uB(a)};p.yG=function(){return this.uA};p.exa=function(){this.qz(2);this.uB(0)};p.Mm=function(){this.uS||(ka.C.Mm.call(this),this.NW(),this.uu());this.uS=!1};p.uu=function(){};p.ja=function(){return null};p.hd=function(){return null};p.pQ=function(){return[]};p.tH=function(){return[]};p.yg=function(){return this.tH().length};ka.prototype.getNodeCount=ka.prototype.yg;
ka.prototype.It=function(){return this.pQ().length};ka.prototype.getLinkCount=ka.prototype.It;function rb(a,b){if(b&&a.Wp)a.JI?(a.JI.Ia(a.Cb/2),a.JI.jb(a.Pb/2),dvt.Da.qd(a.JI,a.getWidth()-2*dvt.Da.Sda,Infinity,a)):a.JI=a.Eua(a.Wp);else if(a.JI){var c=a.JI.getParent();c&&c.removeChild(a.JI);a.JI=null}}ka.prototype.Eua=function(a){var b=this.F();return dvt.Da.uq(this,a,new dvt.Y(0,0,this.getWidth(),this.getHeight()),this.Za(),b._statusMessageStyle)};ka.prototype.bH=function(a){this.d9=a;this.Oa&&this.Oa.bH(a)};
ka.prototype.CG=function(){return this.d9};ka.prototype.n2=function(a){this.dZ=a};ka.prototype.setInitAnim=ka.prototype.n2;p=ka.prototype;p.xi=function(){return this.ad};p.xB=function(a){this.ad="single"==a?new dvt.Uc(dvt.Uc.Kz):"multiple"==a?new dvt.Uc(dvt.Uc.Jz):null;this.Za().wB(this.ad)};function Fa(a){return a.ad?a.ad.ne():null}p.fr=function(){return this.ad?!0:!1};function tb(a){var b=new ul,c=dvt.B.fa(a.u());b.lw=c;a=new vb(0,0,a.getWidth(),a.getHeight());b.Zia=a;return b}
p.Dx=function(a,b,c){var d=new vl;d.setId(a.getId?a.getId():a.getData().getId());var e=Hd.vO(a.xg());d.fe=e;d.Xu=e;e=Hd.vO(a.Yh());d.kY=e;d.Yu=e;d.xs(a.am(b));d.Wt(Hd.vO(a.Yf()));d.kg(Hd.NLa(a.Nf()));d.qc(1==a.xb());a.Tb()&&(d.Ai(!0),b=ub(a.Dt()),d.Tb()&&(d.dj=b))&&(d.Xu&&(d.Xu=new vb(d.Xu.x,d.Xu.y,d.Xu.w-(b.left+b.right),d.Xu.h-(b.top+b.bottom))),d.Yu&&(d.Yu=new vb(d.Yu.x,d.Yu.y,d.Yu.w-(b.left+b.right),d.Yu.h-(b.top+b.bottom))));d.lca(a.getData().O0?a.getData().ef:null);d.eW=this;d.qE=!c;return d};
p.mH=function(a,b,c,d){var e=new wl;e.setId(a.getId?a.getId():a.getData().getId());e.OV(b?b:a.getData().Ve());e.xV(c?c:a.getData().Ld());e.xs(a.am(d));e.Wt(Hd.vO(a.Yf()));e.kg(Hd.NLa(a.Nf()));b=a.p1();e.zoa=b;b=a.K0();e.Zja=b;e.OK(a.XA());e.qc(1==a.xb());e.TK(1==a.MD());return e};
p.hH=function(a,b,c){var d=a.Dt();if(d){var e=a.cA;e&&(e=this.ja(e))&&e.ZG(pd(d),b)}for(var e=d=Number.MAX_VALUE,f=0;f<a.yg();f++){var h=a.AG(f),k=this.ja(h.getId()),l=h.wi();l&&(d=Math.min(d,l.x),e=Math.min(e,l.y));k=h.Yf();h=h.Nf();k&&h&&(d=Math.min(d,h.x+k.x),e=Math.min(e,h.y+k.y))}for(f=0;f<a.It();f++){var h=a.jK(f),n=this.hd(h.getId());if(l=h.Wc())for(l=Ye.eea(l),k=0;k<l.length;k++)var m=l[k],d=Math.min(d,m.x),e=Math.min(e,m.y);k=h.Yf();h=h.Nf();k&&h&&(d=Math.min(d,h.x+k.x),e=Math.min(e,h.y+
k.y))}e=this.zua(-d,-e);d=e.x;e=e.y;for(f=0;f<a.yg();f++)h=a.AG(f),k=this.ja(h.getId()),(l=h.wi())&&k.PB(l.x+d,l.y+e,b),yl(h,k,Hd.MLa(l),b),k.Tb()&&(h=h.Dt())&&k.ZG(pd(h),b);if(!this.YE)for(f=0;f<a.It();f++){h=a.jK(f);n=this.hd(h.getId());if(l=h.Wc()){0<l.length&&!isNaN(l[0])&&(l=Ye.e3(l));for(var q=[],k=0;k<l.length;)isNaN(l[k])?(q.push(l[k]),k++):(q.push(l[k]+d),q.push(l[k+1]+e),k+=2);b&&n.Wc()?0<q.length&&isNaN(q[0])?(k=dvt.Wb.GMa(n.Wc(),q),n.ge(k.Mta),b.O(dvt.I.Gl,n,n.Wc,n.ge,k.Lta),dvt.eb.Mb(b,
function(){n.ge(q)})):b.O(dvt.I.Qs,n,n.Wc,n.ge,q):n.ge(q)}yl(h,n,new dvt.R(-d,-e),b)}if(b=a.uK())this.Pr=new dvt.Y(b.x+d,b.y+e,b.w,b.h),this.MS=a.cA;c&&(this.Sla=new dvt.R(d,e))};function Pa(a,b){var c;if(a.Pr&&(c=new dvt.Y(a.Pr.x,a.Pr.y,a.Pr.a,a.Pr.b),a.MS))for(var d=a.ja(a.MS);d;){var e=d.ta(),f=d.qa();if(b){var h=b.Wf(d,d.ta),k=b.Wf(d,d.qa);if(h||0==h)e=h;if(k||0==k)f=k}c.x+=e;c.y+=f;d=(d=d.getData().O0?d.getData().ef:null)?a.ja(d):null}return c}p.zua=function(a,b){return new dvt.R(a,b)};
p.AB=function(a,b){if(0==this.yG()){var c=this.Oa,d=b?b:Oa(this,a,void 0,void 0);c.uB(this.bwa()*Math.min(zl(this,d),c.CD()));return d}return null};p.bwa=function(){return 1};function zl(a,b){if(!b)return 0;var c=a.Oa;return Math.min((a.Cb-2*c.Sw)/b.a,(a.Pb-2*c.Sw)/b.b)}
function Oa(a,b,c,d){var e=null,f,h,k,l,n=a.Oa.La;c||(c=a.tH());for(var m=0;m<c.length;m++)if(f=c[m],(l=a.ja(f))&&l.ic&&!l.eg){var q=l,t=b;f=q.xg();h=new dvt.Y(f.x,f.y,f.a,f.b);k=null;t&&(k=t.Wf(q,q.Nf));k||(k=q.Nf());var v=null,x=null;t&&(v=t.Wf(q,q.zD),x=t.Wf(q,q.AD));null==v&&(v=q.Wm);x||(x=q.qm);q=q.Yf();k&&q&&(null!=v&&(q=Al(q,v,x)),h.x=Math.min(f.x,q.x+k.x),h.y=Math.min(f.y,q.y+k.y),h.a=Math.max(f.x+f.a,q.x+k.x+q.a)-h.x,h.b=Math.max(f.y+f.b,q.y+k.y+q.b)-h.y);f=h;k=h=null;b&&(h=b.Wf(l,l.ta),
k=b.Wf(l,l.qa));null==h&&(h=l.ta());null==k&&(k=l.qa());f.x+=h;f.y+=k;if(h=l.getData().O0?l.getData().ef:null)h=l.getParent(),l=kd(new dvt.R(f.x,f.y),h,b),l=ld(l,n,b),h=kd(new dvt.R(f.x+f.a,f.y+f.b),h,b),h=ld(h,n,b),f.x=l.x,f.y=l.y,f.a=h.x-l.x,f.b=h.y-l.y;e?(l=e.x,h=e.y,e.x=Math.min(e.x,f.x),e.y=Math.min(e.y,f.y),e.a=Math.max(l+e.a,f.x+f.a)-e.x,e.b=Math.max(h+e.b,f.y+f.b)-e.y):e=f}d||(d=a.pQ());for(m=0;m<d.length;m++)if(c=d[m],(c=a.hd(c))&&c.ic){l=c;h=b;f=new dvt.Y(Number.MAX_VALUE,Number.MAX_VALUE,
-Number.MAX_VALUE,-Number.MAX_VALUE);k=null;h&&(k=h.Wf(l,l.Wc));k||(k=l.Wc());if(k){k=Ye.eea(k);for(var w=void 0,w=q=x=v=void 0,t=0;t<k.length;t++)w=k[t],v=Math.max(f.x+f.a,w.x),x=Math.max(f.y+f.b,w.y),q=Math.min(f.x,w.x),w=Math.min(f.y,w.y),f.x=q,f.y=w,f.a=v-q,f.b=x-w}k=new dvt.Y(f.x,f.y,f.a,f.b);v=null;h&&(v=h.Wf(l,l.Nf));null==v&&(v=l.Nf());q=x=null;h&&(x=h.Wf(l,l.zD),q=h.Wf(l,l.AD));null==x&&(x=l.Wm);q||(q=l.qm);l=l.Yf();v&&l&&(null!=x&&(l=Al(l,x,q)),k.x=Math.min(f.x,l.x+v.x),k.y=Math.min(f.y,
l.y+v.y),k.a=Math.max(f.x+f.a,l.x+v.x+l.a)-k.x,k.b=Math.max(f.y+f.b,l.y+v.y+l.b)-k.y);f=k;if(h=c.getData().O0?c.getData().ef:null)c=c.getParent(),l=kd(new dvt.R(f.x,f.y),c,b),l=ld(l,n,b),h=kd(new dvt.R(f.x+f.a,f.y+f.b),c,b),h=ld(h,n,b),f.x=l.x,f.y=l.y,f.a=h.x-l.x,f.b=h.y-l.y;e?(l=e.x,h=e.y,e.x=Math.min(e.x,f.x),e.y=Math.min(e.y,f.y),e.a=Math.max(l+e.a,f.x+f.a)-e.x,e.b=Math.max(h+e.b,f.y+f.b)-e.y):e=f}return e}
function Al(a,b,c){if(null==b&&!c)return a;var d=new dvt.R(a.x,a.y),e=new dvt.R(a.x+a.a,a.y),f=new dvt.R(a.x,a.y+a.b);a=new dvt.R(a.x+a.a,a.y+a.b);var h=new dvt.Sb;null!=b&&(c&&h.translate(-c.x,-c.y),h.rotate(b),c&&h.translate(c.x,c.y));b=h.Pe(d);e=h.Pe(e);f=h.Pe(f);a=h.Pe(a);h=Math.min(Math.min(b.x,e.x),Math.min(f.x,a.x));c=Math.min(Math.min(b.y,e.y),Math.min(f.y,a.y));return new dvt.Y(h,c,Math.max(Math.max(b.x,e.x),Math.max(f.x,a.x))-h,Math.max(Math.max(b.y,e.y),Math.max(f.y,a.y))-c)}
function ld(a,b,c){for(var d=b.j1(),e=a,f=d.length-1;0<=f;f--){b=d[f];a=b.nb().clone();var h=null,k=null;c&&(h=c.Wf(b,b.ta),k=c.Wf(b,b.qa));null!=h&&(a.Wd=h);null!=k&&(a.Td=k);a.GD();e=a.Pe(e)}return e}function kd(a,b,c){for(var d=b.j1(),e=a,f=0;f<d.length;f++){b=d[f];a=b.nb().clone();var h=null,k=null;c&&(h=c.Wf(b,b.ta),k=c.Wf(b,b.qa));null!=h&&(a.Wd=h);null!=k&&(a.Td=k);e=a.Pe(e)}return e}
p.fW=function(a,b,c,d,e){var f=this.Oa,h=f.pf().a/2,k=f.pf().b/2;c=h-(c+a)*e;d=k-(d+b)*e;a=h-a*e;b=k-b*e;this.Pr&&(k=Pa(this),-k.x*e<c?(h=c+k.x*e,c-=h,a+=h):-k.x*e>a&&(h=-k.x*e-a,c-=h,a+=h),-k.y*e<d?(e=d+k.y*e,d-=e,b+=e):-k.y*e>b&&(e=-k.y*e-b,d-=e,b+=e));f.IV(c);f.JV(d);f.GV(a);f.HV(b)};function pd(a){var b={};b.top=a.top;b.right=a.right;b.bottom=a.bottom;b.left=a.left;return b}function ub(a){var b={};b.top=a.top;b.right=a.right;b.bottom=a.bottom;b.left=a.left;return b}p.oV=function(){};
function qd(a,b){var c=Hd.vO(b.xg());a.fe=c;a.Xu=c;c=Hd.vO(b.Yh());a.kY=c;a.Yu=c;a.Wt(Hd.vO(b.Yf()));a.qE=!0}function yl(a,b,c,d){var e=a.Yf(),e=Hd.wbb(e),f=a.Nf();if(e&&f){c=new dvt.R(f.x-c.x,f.y-c.y);var f=a.Wm,h=Hd.MLa(a.qm);d?(d.O(dvt.I.VB,b,b.Yf,b.Wt,e),b.Nf()?d.O(dvt.I.IE,b,b.Nf,b.kg,c):b.kg(c),null!=f&&d.O(dvt.I.W,b,b.zD,b.aH,f),h&&(b.qm?d.O(dvt.I.IE,b,b.AD,b.VD,h):b.VD(h))):(b.Wt(e),b.kg(c),b.wca(a.vU(),a.uy),null!=f&&b.aH(f),h&&b.VD(h))}}function Dg(a,b){this.Init(a,b)}
dvt.v.D(Dg,dvt.HL,"DvtBaseDiagramKeyboardHandler");p=Dg.prototype;p.Init=function(a,b){Dg.C.Init.call(this,a,b);this.J=a};p.Pa=function(){return this.J};p.ND=function(a){return a.keyCode==dvt.KeyboardEvent.Uh?!1:this.Yi(a)&&!a.ctrlKey};p.Cv=function(a){return a.keyCode==dvt.KeyboardEvent.Di&&a.ctrlKey};
p.qaa=function(a,b,c){b=b.keyCode;if(!c||1>c.length||!a)return null;var d=c[0];a=a.wf();a=a.x+a.a/2;for(var e=0;e<c.length;e++){var f=c[e],h=f.wf(),h=h.x+h.a/2;if(b==dvt.KeyboardEvent.DL&&h<=a||b==dvt.KeyboardEvent.dL&&h>=a){d=f;break}}return d};
p.Laa=function(a,b,c,d){if(!d)return null;if(!b)return d[0];if(!a)return b;for(var e=0;e<d.length;e++){var f=d[e],h=f,k=a,l=f,n=this.tL(l.Ve?l.Ve():l.getData().Ve()),l=this.tL(l.Ld?l.Ld():l.getData().Ld()),n=k==n?l:n,k=Bl(k),n=Bl(n),k=Math.atan2(n.y-k.y,n.x-k.x),k=0>k?k+2*Math.PI:k;h.Cha=k;n=h=f;k=this.tL(n.Ve?n.Ve():n.getData().Ve());n=this.tL(n.Ld?n.Ld():n.getData().Ld());k=Bl(k);n=Bl(n);h.cM=Math.sqrt(Math.pow(n.x-k.x,2)+Math.pow(n.y-k.y,2));h=f;f=a==this.tL(f.Ld?f.Ld():f.getData().Ld())?1:0;h.xX=
f}d.sort(Cl());for(a=0;a<d.length;a++)e=d[a],e.Cha=void 0,e.cM=void 0,e.xX=void 0;c=c.keyCode==dvt.KeyboardEvent.mg?!0:!1;for(e=a=0;e<d.length;e++)if(d[e]===b){a=c?e==d.length-1?0:e+1:0==e?d.length-1:e-1;break}return d[a]};p.tL=function(){return null};function Bl(a){a=a.wf();return new dvt.R(a.x+a.a/2,a.y+a.b/2)}function Cl(){return function(a,b){var c=a.Cha,d=b.Cha,e=-1;!Dl(c,d)&&c>d?e=1:Dl(c,d)&&(a.cM>b.cM?e=1:b.cM==a.cM&&a.xX>b.xX?e=1:b.cM==a.cM&&a.xX==b.xX&&(e=0));return e}}
function Dl(a,b){var c=1E-7>=Math.abs(a-b);c||(c=1E-7>=Math.abs(2*Math.PI+Math.min(a,b)-Math.max(a,b)));return c}function ge(a,b,c){this.Init(a,b,c)}dvt.v.D(ge,dvt.ia,"DvtBaseDiagramNode");p=ge.prototype;p.Init=function(a,b,c){ge.C.Init.call(this,a,null,b);this.J=c;this.Pg=this.lm=!1;this.aO=!0;this.zb;this.jZ;this.Wm;this.qm;this.Rq;this.Vm};p.Pa=function(){return this.J};p.getData=function(){return null};p.xg=function(){return this.Yh()};p.Yh=function(){return new dvt.Y(0,0,this.getWidth(),this.getHeight())};
p.am=function(){return{}};p.kg=function(a){if(a){this.jZ=a;var b=this.zb;this.Yf();b&&(a=$e(a,this.Wm,this.qm),b.sb(a))}};p.Nf=function(){return this.jZ};p.Yf=function(){return null};p.Wt=function(){};p.Dt=function(){return null};p.ZG=function(){};p.Tb=function(){return this.lm};p.Ai=function(a){this.lm=a};p.xb=function(){return this.Pg};ge.prototype.isSelected=ge.prototype.xb;p=ge.prototype;p.qc=function(a){this.Pg=a};p.bi=function(a){this.aO=a};p.rb=function(){return this.Pa().fr()&&this.aO};
p.l2=function(a){this.eg=a};p.$gb=function(){return this.eg};p.aH=function(a){this.Wm=a;var b=this.zb;this.Yf();b&&(a=$e(this.Nf(),a,this.qm),b.sb(a))};p.zD=function(){return this.Wm};p.VD=function(a){this.qm=a;var b=this.zb;this.Yf();b&&(a=$e(this.Nf(),this.Wm,a),b.sb(a))};p.AD=function(){return this.qm};function $e(a,b,c){var d=new dvt.Sb;null!=b&&(c&&d.translate(-c.x,-c.y),d.rotate(b),c&&d.translate(c.x,c.y));a&&d.translate(a.x,a.y);return d}
p.PB=function(a,b,c){c?(c.O(dvt.I.W,this,this.ta,this.ha,a),c.O(dvt.I.W,this,this.qa,this.xa,b)):this.Ka(a,b)};p.Xd=function(){return null};p.wf=function(a){var b=this.Yh(a);a=this.xd(new dvt.R(b.x,b.y));b=this.xd(new dvt.R(b.x+b.a,b.y+b.b));return new dvt.Y(a.x,a.y,b.x-a.x,b.y-a.y)};p.Bm=function(){return this.pb()};p.Qf=function(){};p.Md=function(){};p.Od=function(){};p.we=function(){return null};function Cb(a,b){a.Rq||(a.Rq=[]);a.Rq.push(b)}function Db(a,b){a.Vm||(a.Vm=[]);a.Vm.push(b)}p.wca=function(){};
function Jd(a,b,c){this.Init(a,b,c)}dvt.v.D(Jd,dvt.ia,"DvtBaseDiagramLink");p=Jd.prototype;p.Init=function(a,b,c){Jd.C.Init.call(this,a,null,b);this.J=c;this.SE;this.Yk;this.YC;this.zb;this.jZ;this.Wm;this.qm;this.Pg=!1;this.aO=!0;this.da;this.gj;this.mj};p.Pa=function(){return this.J};p.j2=function(){};p.Gt=function(){return null};p.u2=function(){};p.Gfb=function(){return this.mj};Jd.prototype.getStartConnector=Jd.prototype.Gfb;Jd.prototype.Sdb=function(){return this.gj};
Jd.prototype.getEndConnector=Jd.prototype.Sdb;p=Jd.prototype;p.cH=function(a){this.da=a};p.zc=function(){return this.da};p.aH=function(a){this.Wm=a;var b=this.zb;this.Yf();b&&(a=El(this.Nf(),a,this.qm),b.sb(a))};p.zD=function(){return this.Wm};p.VD=function(a){this.qm=a;var b=this.zb;this.Yf();b&&(a=El(this.Nf(),this.Wm,a),b.sb(a))};p.AD=function(){return this.qm};p.Nf=function(){return this.jZ};p.kg=function(a){if(a){this.jZ=a;var b=this.zb;this.Yf();b&&(a=El(a,this.Wm,this.qm),b.sb(a))}};p.Yf=function(){return null};
p.Wt=function(){};p.p1=function(){return 0};p.K0=function(){return 0};p.bi=function(a){this.aO=a};p.rb=function(){return this.Pa().fr()&&this.aO};p.xb=function(){return this.Pg};Jd.prototype.isSelected=Jd.prototype.xb;p=Jd.prototype;p.qc=function(a){this.Pg=a};p.TK=function(){};p.MD=function(){return!1};p.OK=function(){};p.XA=function(){return 1};Jd.prototype.getLinkWidth=Jd.prototype.XA;p=Jd.prototype;p.EV=function(){};p.TO=function(){return"solid"};p.DV=function(){};p.xG=function(){return null};
p.Ct=function(){return null};p.Ova=function(){return this.TO()};p.pL=function(){return this.XA()};p.Nva=function(){return this.xG()};function Pd(a,b,c,d,e){if(c||e){var f;e||(f=a.da.Qd().clone(),f.Ln(dvt.Qc.zr),f.yf(!1));if(c=Qd.Dua(a.u(),c,e,f,a))a.da.A(c),Qd.XQ(c,0,e,b,d);return c}}
p.ge=function(a){this.SE=a;Ye.c4(a)?(this.YC=a,this.Yk=Ye.Cua(a)):(this.Yk=a,this.YC=Ye.e3(a));this.da&&this.da instanceof dvt.vb&&(this.da.ss(this.YC),this.gj?Qd.XQ(this.gj,this.Gt(),this.Ct(Qd.lQ),this.Yk,1):this.gj=Pd(this,this.Yk,this.Gt(),1,this.Ct(Qd.lQ)),this.mj?Qd.XQ(this.mj,this.xv(),this.Ct(Qd.PQ),this.Yk,0):this.mj=Pd(this,this.Yk,this.xv(),0,this.Ct(Qd.PQ)));var b=a=null;this.rg&&this.rg.OJ instanceof dvt.vb&&this.rg.OJ.ss(this.YC);this.rg&&(a=this.rg.My)&&Qd.XQ(a,this.xv(),this.Ct(Qd.PQ),
this.Yk,0);this.rg&&(b=this.rg.Ly)&&Qd.XQ(b,this.Gt(),this.Ct(Qd.lQ),this.Yk,1);this.zw&&this.zw.OJ instanceof dvt.vb&&this.zw.OJ.ss(this.YC);this.BT&&this.BT.setPosition(Td(this));this.gS&&this.gS.setPosition(Ud(this))};p.Wc=function(){return this.SE};function Td(a){return a.Yk?new dvt.R(a.Yk[0],a.Yk[1]):null}function Ud(a){if(!a.Yk)return null;var b=a.Yk.length;return new dvt.R(a.Yk[b-2],a.Yk[b-1])}
function El(a,b,c){var d=new dvt.Sb;null!=b&&(c&&d.translate(-c.x,-c.y),d.rotate(b),c&&d.translate(c.x,c.y));a&&d.translate(a.x,a.y);return d}p.mW=function(a,b,c){b||0==b||(b=1);c||0==c||(c=0);c=this.pL()+c;a=new dvt.Ba(a,b,c);return new Fl(this.u(),this.YC,a)};
function Md(a,b,c,d){b=a.mW(b,c,d);a.mj&&a.xv()&&(c=a.xv(),d=Gl(b,a.Yk,c,a.Ct(Qd.PQ),a,0),b.My&&b.removeChild(b.My),b.My=d,b.Qoa=c,b.A(b.My));a.gj&&a.Gt()&&(c=a.Gt(),a=Gl(b,a.Yk,c,a.Ct(Qd.lQ),a,1),b.Ly&&b.removeChild(b.Ly),b.Ly=a,b.Poa=c,b.A(b.Ly));return b}function Nd(a,b,c){a=a.Ova();a=Ye.Bua(a);b.Ln(a,Ye.iwa(a,c),Ye.jwa(a,c))}
function Ld(a,b){if(a){var c=null;b.sc&&(c=b.sc());if(c){var d=a.Qd()?a.Qd().clone():null,e=a.Hd()?a.Hd().clone():null;d&&d.Gv&&(d.Gv(c),a.Ea(d));e&&e.Gv&&(e.Gv(c),a.ra(e))}}}p.Xd=function(){return null};p.wf=function(a){return this.aa(a)};p.Bm=function(){return this.pb()};p.Qf=function(){};p.Md=function(){};p.Od=function(){};p.we=function(){return null};p.wca=function(){};var Hd={};dvt.v.D(Hd,dvt.v,"DvtDiagramLayoutUtils");
Hd.vgb=function(a){for(var b=Hd.Eeb(a),c=Math.max(b.w,b.h),b=a.yg(),d=a.It(),e=Math.floor(Math.sqrt(b)),f=0,f=(f=a.am())&&f.padding?f.padding:0<d?c:.25*c,c=c+f,d=-(Math.ceil(b/e)-1)*c/2,f=-(e-1)*c/2,h=0;h<b;h++)Hd.nbb(a.AG(h),d+c*Math.floor(h/e),f+h%e*c)};Hd.Eeb=function(a){for(var b=a.yg(),c=0,d=0,e=0;e<b;e++){var f=a.AG(e),h=f.uf(),c=Math.max(h.w,c),d=Math.max(h.h,d);if(f=f.Yf())c=Math.max(f.w,c),d=Math.max(h.h+f.h,d)}return new vb(0,0,c,d)};
Hd.nbb=function(a,b,c){var d=a.Yh();a.setPosition(new rd(b-d.x-.5*d.w,c-d.y-.5*d.h));Hd.zib(a)};Hd.zib=function(a){var b=a.uf(),c=a.wi(),d=a.Yf();d&&a.kg(new rd(b.x+c.x+.5*(b.w-d.w),b.y+c.y+b.h))};Hd.vO=function(a){return void 0===a||null==a?null:new vb(a.x,a.y,a.a,a.b)};Hd.NLa=function(a){return void 0===a||null==a?null:new rd(a.x,a.y)};Hd.wbb=function(a){return a?new dvt.Y(a.x,a.y,a.w,a.h):null};Hd.MLa=function(a){return a?new dvt.R(a.x,a.y):null};
function Fl(a,b,c){Fl.C.Init.call(this,a);this.Init(a,b,c)}dvt.v.D(Fl,dvt.ia,"DvtDiagramLinkUnderlay");Fl.prototype.Init=function(a,b,c){b||(b=["M",0,0,"L",1,0]);this.Vr=c;this.Vr||(this.Vr=new dvt.Ba("#ffffff",1,1));this.OJ=new dvt.vb(a,b);this.OJ.Ea(c);this.OJ.ra(null);this.A(this.OJ);this.Poa=this.Ly=this.Qoa=this.My=null};function Gl(a,b,c,d,e,f){a=Qd.Dua(a.u(),c,d,a.Vr,e);Qd.XQ(a,0,d,b,f);return a}
Fl.prototype.Ea=function(a,b){this.Vr=a;dvt.B.Ua()&&dvt.B.pq()&&1==dvt.B.FO()&&a.yf(!0);this.OJ.Ea(a);if(this.My){var c=a.clone();c.Ln(dvt.Qc.zr);c.yf(!1);if(this.Qoa==Qd.T2||this.Qoa==Qd.U2)c.$a(b),this.My.fb(a.sc());this.My.Ea(c)}if(this.Ly){c=a.clone();c.Ln(dvt.Qc.zr);c.yf(!1);if(this.Poa==Qd.T2||this.Poa==Qd.U2)c.$a(b),this.Ly.fb(a.sc());this.Ly.Ea(c)}};Fl.prototype.Qd=function(){return this.Vr};var Ye={};dvt.v.D(Ye,dvt.v,"DvtDiagramLinkUtils");
Ye.Bua=function(a){var b=dvt.Qc.zr;switch(a){case "dash":b=dvt.Qc.oH;break;case "dot":b=dvt.Qc.pW;break;case "dashDot":b=dvt.Qc.Bda}return b};Ye.iwa=function(a,b){if(dvt.Qc.zr==a)return null;if(dvt.Qc.oH==a)return b?"8,2":"6,4";if(dvt.Qc.pW==a)return b?"4,1":"2,3";if(dvt.Qc.Bda==a)return b?"10,1,4,1":"8,3,2,3"};Ye.jwa=function(a,b){return b&&dvt.Qc.zr!=a?1:null};Ye.e3=function(a){var b=[];if(a)for(var c=0;c<a.length;c+=2)0==c?b.push("M"):b.push("L"),b.push(a[c]),b.push(a[c+1]);return b};
Ye.Cua=function(a){var b=[];if(a)for(var c=0;c<a.length;c++)isNaN(a[c])||b.push(a[c]);return b};Ye.c4=function(a){return a&&0<a.length?isNaN(a[0]):!1};Ye.eea=function(a){var b=[];a=Ye.c4(a)?Ye.Cua(a):a;for(var c=0;c<a.length;c+=2)b.push(new dvt.R(a[c],a[c+1]));return b};var Qd={};dvt.v.D(Qd,dvt.v,"DvtDiagramLinkConnectorUtils");Qd.lQ="endConnector";Qd.PQ="startConnector";Qd.rua="arrowOpen";Qd.T2="arrow";Qd.U2="arrowConcave";Qd.tua="rectangle";Qd.uua="rectangleRounded";Qd.sua="circle";
Qd.Dua=function(a,b,c,d,e){if(c)return Qd.pSa(c,e);c=e.pL();switch(b){case Qd.T2:return Qd.qSa(a,c,e.xG());case Qd.U2:return Qd.rSa(a,c,e.xG());case Qd.rua:return Qd.wSa(a,c,d);case Qd.sua:return Qd.oSa(a,c,d);case Qd.tua:return Qd.Iua(a,c,d);case Qd.uua:return Qd.CSa(a,c,d)}return null};Qd.XQ=function(a,b,c,d,e){b=Qd.bSa(a,c,d,e);a.sb(b)};
Qd.bSa=function(a,b,c,d){var e=-1,f=0,h=0,k=0;c&&(f=c.length,1===d?(2<=f&&(h=c[f-2],k=c[f-1]),4<=f?(e=c[f-4],f=c[f-3]):(e=h-1E-4,f=k)):(2<=f&&(h=c[0],k=c[1]),4<=f?(e=c[2],f=c[3]):(e=h+1E-4,f=k)));c=h;d=k;e=Qd.aSa(e,f,h,k);h=a.x2a;h||(h=a.nb().clone(),a.x2a=h);k=new dvt.Sb;b&&(b=Qd.AEa(a),f=a.ae(),a=a.ie(),k.translate(-.5*b.a*f,-.5*b.b*a));k.rotate(e);k.translate(c,d);k.concat(h);return k};Qd.AEa=function(a){var b=a.Y1a;b||(b=a.aa(),a.Y1a=b);return b};
Qd.aSa=function(a,b,c,d){return Math.atan2(d-b,c-a)};Qd.rSa=function(a,b,c){b=6*Qd.I7(b);var d=.8*b;a=new dvt.hi(a,[-.22*b,-.5*d,.78*b,0,-.22*b,.5*d,0,0]);a.fb(c);return a};Qd.qSa=function(a,b,c){b=5*Qd.I7(b);var d=.8*b;a=new dvt.hi(a,[0,-.5*d,b,0,0,.5*d]);a.fb(c);return a};Qd.I7=function(a){return 1>=a?a:1+.5*(a-1)};Qd.wSa=function(a,b,c){b*=3;var d=c.getWidth();a=new dvt.Zv(a,[-b+d*Math.sqrt(2)/2,-b,d*Math.sqrt(2)/2,0,-b+d*Math.sqrt(2)/2,b]);a.Ea(c);a.ra(null);return a};
Qd.WMa=function(a){return 2*a};Qd.rOa=function(a){return 3*a};Qd.oSa=function(a,b,c){b=Qd.WMa(b);a=new dvt.gm(a,b,0,b);a.Ea(c);a.ra(null);return a};Qd.Iua=function(a,b,c){b=Qd.rOa(b);a=new dvt.Rect(a,0,-b/2,b,b);a.Ea(c);a.ra(null);return a};Qd.CSa=function(a,b,c){a=Qd.Iua(a,b,c);a.sB(b);return a};Qd.pSa=function(a,b){var c=za(b.Pa()),d=b.getData().$o;c.tw=d;c.$G(b,b.r0);d=b.$O();c.Qw=d;return K.uP(c,a,b)};
Qd.A3=function(a,b,c,d,e){if(c)return b=Qd.AEa(a),a=a.ae(),.5*b.a*a;a=e.pL();d=d.getWidth();switch(b){case Qd.rua:return d*Math.sqrt(2);case Qd.T2:return b=Qd.I7(a),5*b;case Qd.U2:return b=Qd.I7(a),4.68*b;case Qd.sua:return 2*Qd.WMa(d)+d/2;case Qd.tua:case Qd.uua:return Qd.rOa(d)+d/2;default:return 0}};
dvt.Bi=function(a,b,c){this.Init(a,b,c)};ba("dvt.Diagram",dvt.Bi);dvt.v.D(dvt.Bi,ka);dvt.Bi.prototype.Init=function(a,b,c){dvt.Bi.C.Init.call(this,a,b,c);this.hh=new Hl;this.H=new Il(a,this.Ef,this);this.H.ig(this);dvt.B.Ua()||this.H.ws(new Jl(this,this.H));this.pc={};this.Vo=[];this.$d={};this.Pz=[];this.cq=0};dvt.Bi.newInstance=function(a,b,c){return new dvt.Bi(a,b,c)};dvt.Bi.newInstance=dvt.Bi.newInstance;p=dvt.Bi.prototype;
p.LQ=function(){!this.Ru&&this.Fg&&("none"!=this.WR&&(this.Qq={id:this.getId(),getId:function(){return this.id},options:this.F(),getOptions:function(){return this.options},panZoomMatrix:this.Oa.La.nb(),getPanZoomMatrix:function(){return this.panZoomMatrix},nodes:this.pc?Kl(this):[],links:this.$d?Ll(this):[],getNodes:function(){return this.nodes},getLinks:function(){return this.links}},this.Qq.F=this.Qq.getOptions,this.Qq.$eb=this.Qq.getPanZoomMatrix,this.Qq.getId=this.Qq.getId,this.Qq.gOa=this.Qq.getNodes,
this.Qq.NNa=this.Qq.getLinks),this.Fg=!1,this.$S=this.Oa);this.Ru||this.Sfa()};p.Sfa=function(){this.gp=new dvt.ia(this.u());this.Wk=new dvt.ia(this.u());this.Ky=new dvt.ia(this.u());this.pc={};this.Vo=[];this.$d={};this.Pz=[];this.FC=null};p.kt=function(){this.xh&&(this.removeChild(this.xh),this.xh.va());this.xh=null;this.wc&&this.Za().ig(this);this.Mn||this.su();this.wc=null;this.Mn=!1};
p.qh=function(a,b){var c=new dvt.Nd(this.u(),null,a.ob()),d=b.$eb(),e=this.Oa.La.nb();d.Ne(e)||(this.Oa.La.sb(d),c.ka.O(dvt.I.Mi,this.Oa.La,this.Oa.La.nb,this.Oa.La.sb,e));a.jq(b.gOa(),this.pc?Kl(this):[]);a.jq(b.NNa(),this.$d?Ll(this):[]);a.add(c,1)};
p.uu=function(a){var b=!1;if(!this.Fg&&!this.Ru){Ml(this);Nl(this);var c=[],d;for(d in this.pc)c.push(d);b=0===c.length;this.u().NK([this]);this.cq++}if(b)this.cq=this.Fg?this.cq:this.cq-1,0===this.cq&&Ol(this,a,b);else{this.contains(this.$S)||this.A(this.$S);var e=this;this.Dv(a).then(function(){e.cq=e.Fg?e.cq:e.cq-1;0===e.cq&&Ol(e,a,b)},function(){e.cq=e.Fg?e.cq:e.cq-1;0===e.cq&&(e.removeChild(e.$S),e.$S=null,e.Fg=!0)})}};
function Ol(a,b,c){var d;if(!c){a.removeChild(a.$S);a.WF();a.XF();if(d=null==a.Ml)a.Ml=Oa(a,b,void 0,void 0);var e=a.Oa;if(a.Fg)a.Ru&&(h=a.AB(b,a.Ml),h=f?Pa(a):h?h:a.Ml,e.Lca(!0),e.As(null,h),e.Lca(a.oG));else{a.AB(b,a.Ml);if(!a.Ru){var f=a.Pr?!0:!1,h=f?Pa(a):a.Ml;f&&e.XQa();e.As(null,h)}e.vB(a.AA);e.bH(a.CG());e.QV(a.oG);e.Lca(a.oG)}}a.$S=null;a.Fg||(a.Os(!0),dvt.B.Xi()&&a.dZ&&!a.Qq?a.wc=dvt.fc.yD(a.u(),a.dZ,a,null,a.ob()):"none"!=a.WR&&a.Qq&&(a.xh=new dvt.ia(a.u(),"Delete Container"),a.A(a.xh),
e=new Pl(a.u(),a.xh,a.Qq,a),e.jq([a.Qq],[a]),a.wc=e.pv()),a.wc?(a.Za().ce(),a.Za().cm(a),a.wc.Pf(a.kt,a),a.wc.play()):a.kt());a.Fg=!0;rb(a,c);a.AA&&(c=a.Ml,null!=c&&(b=a.Oa.$f(b),a.fW(c.x,c.y,c.a,c.b,b)));a.Pr=null;a.MS=null;d&&(a.Ml=null)}
p.Hf=function(a){dvt.Bi.C.Hf.call(this,a);this.zsa(this.X);this.AA="none"!=this.X.panning;this.oG="none"!=this.X.zooming;this.oca("hidden");this.WR=this.X.animationOnDataChange;this.n2("auto"==this.X.animationOnDisplay?dvt.fc.zB:null);this.xB(this.X.selectionMode);this.Wp=this.X.emptyText?this.X.emptyText:dvt.K.Qg(this.X,"labelNoData",dvt.K.Ma,"NO_DATA")};dvt.Bi.Xq=function(a){return(new Hl).Xq(a)};p=dvt.Bi.prototype;p.CD=function(){var a=this.F().maxZoom,a=parseFloat(a);return 0<a?a:1};
p.yG=function(){var a=this.F().minZoom;if(a){var b=parseFloat(a);0<b&&(a=Math.min(b,this.CD()));return a}return 0};p.CG=function(){return this.F().panDirection};p.ob=function(){return dvt.Sa.hs(this.F().styleDefaults.animationDuration)/1E3};p.Ef=function(a){"categoryHighlight"==a.type&&this.WF(!0);a&&this.dispatchEvent(a)};
function Ml(a){var b=a.F().nodes;if(b)for(var c=0;c<b.length;c++){var d=b[c],d=dvt.Ec.We(d,a.F().styleDefaults.nodeDefaults),d=new Ql(a.u(),a,d),e=d.getId();d.Vra()?a.Vo.push(e):(d.ya(a.Wk),a.Vo.push(e),a.pc[e]=d)}}function Nl(a){var b=a.F().links;if(b)for(var c=0;c<b.length;c++){var d=b[c],d=dvt.Ec.We(d,a.F().styleDefaults.linkDefaults),e=new Rl(a.u(),a,d),d=e.getId();if(e.Vra())a.Pz.push(d);else{e.ya(a.gp);a.Pz.push(d);a.$d[d]=e;var f=a.ja(e.Ve()),e=a.ja(e.Ld());Cb(f,d);Db(e,d)}}}
p.Dv=function(a){for(var b=this.F().layout,c=tb(this),d={},e=0;e<this.Vo.length;e++){var f=this.Vo[e];this.ja(f)&&(d[f]=!0,c.qO(this.Dx(this.ja(f))))}for(var h in this.$d)if(e=this.hd(h)){var f=e.getData().startNode,k=e.getData().endNode;d[f]&&d[k]&&mb(c,this.mH(e,f,k))}if(b&&"function"==typeof b){var l=this;(b=b(c))||(b={then:function(a){a()}});this.fca(0);b.then(function(){1===l.cq&&(l.fca(1),l.hH(c,a,!0))},function(){});return b}this.AL("dvt.Diagram: Layout function is not defined",1)};
p.fca=function(a){this.Fg||(this.gp.U(a),this.Wk.U(a))};p.ja=function(a){return this.pc[a]};p.hd=function(a){return this.$d[a]};p.pQ=function(){return this.Pz};function Ll(a){var b=[],c;for(c in a.$d)b.push(a.$d[c]);return b}p.tH=function(){return this.Vo};function Kl(a){var b=[],c;for(c in a.pc)b.push(a.pc[c]);return b}
p.ik=function(a){dvt.Bi.C.ik.call(this,a);switch(a.en()){case dvt.md.E4:if(this.AA){var b=a.vA,c=this.Ml?this.Ml:Oa(this,a.ka,void 0,void 0);this.fW(c.x,c.y,c.a,c.b,b)}break;case dvt.md.H4:this.Pr||(c=this.Ml?this.Ml:Oa(this,a.ka,void 0,void 0),a.WQa(c));break;case dvt.md.TH:if(this.F().zoomRenderer&&a.qJ!==a.vA)for(b in this.pc){var c=this.ja(b),d=a;if(c.J.F().zoomRenderer){var e=c.Pl(d.qJ),d=c.Pl(d.vA);Sl(c,c.J.F().zoomRenderer,d,e)}}}};p.eQa=function(){};
p.FU=function(a){var b=[],c;for(c in this.$d){var d=this.hd(c),e=d.Ve(),f=d.Ld();e!=a&&f!=a||!d.ic||b.push(d)}return b};p.Im=function(){return dvt.K.ua(dvt.K.Ma,"DIAGRAM")};p.XF=function(){if(this.X.selection&&this.fr()){var a=[],b;for(b in this.pc)a.push(this.ja(b));for(var c in this.$d)a.push(this.hd(c));this.xi().Rt(this.X.selection,a)}};
p.WF=function(a){a&&this.H.cm(this);this.FC&&(this.$_(!1,this.FC),this.FC=null);var b=this.X.highlightedCategories;if(b){var c="any"==this.X.highlightMatch;this.FC={};var d=[],e;for(e in this.pc){var f=this.ja(e),h=c?dvt.na.fz(f.we(),b):dvt.na.z1(f.we(),b);h&&(this.FC[f.getId()]=f,d.push(f))}Tl(this,d);var d=[],k;for(k in this.$d)if(e=this.hd(k),h=c?dvt.na.fz(e.we(),b):dvt.na.z1(e.we(),b))this.FC[e.getId()]=e,d.push(e);"linkAndNodes"==this.X.linkHighlightMode&&Ul(this,d);this.$_(!0,this.FC);if(a){var l=
this;setTimeout(function(){l.Za().ig(l)},0)}}else a&&this.H.ig(this)};function Tl(a,b){var c=a.X.nodeHighlightMode;if("node"!=c){for(var d="nodeAndIncomingLinks"==c||"nodeAndLinks"==c,c="nodeAndOutgoingLinks"==c||"nodeAndLinks"==c,e=[],f=0;f<b.length;f++)for(var h=b[f],k=d&&h.Vm?h.Vm:[],k=c&&h.Rq?k.concat(h.Rq):k,h=0;h<k.length;h++){var l=k[h];a.FC[l]=a.hd(l);e.push(a.hd(l))}Ul(a,e)}}function Ul(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=d.Ve(),d=d.Ld();a.FC[e]=a.ja(e);a.FC[d]=a.ja(d)}}
p.$_=function(a,b){var c=a?this.X.styleDefaults._highlightAlpha:1;this.gp.U(c);this.Wk.U(c);for(var d in b)a?this.Ky.A(b[d]):b[d]instanceof Rl?this.gp.A(b[d]):b[d]instanceof Ql&&this.Wk.A(b[d])};p.Oe=function(a){this.X.highlightedCategories=dvt.Ec.clone(a);this.WF()};dvt.Bi.prototype.highlight=dvt.Bi.prototype.Oe;dvt.Bi.prototype.select=function(a){this.X.selection=dvt.Ec.clone(a);this.XF()};dvt.Bi.prototype.select=dvt.Bi.prototype.select;
dvt.Bi.prototype.ti=function(){this.Ud||(this.Ud=new Vl(this));return this.Ud};dvt.Bi.prototype.getAutomation=dvt.Bi.prototype.ti;dvt.Bi.prototype.AL=function(a,b){var c=this.F()._logger;if(c)switch(b){case 1:c.error&&c.error(a);break;case 2:c.warn&&c.warn(a);break;case 3:c.info&&c.info(a);break;default:c.log&&c.log(a)}};dvt.Bi.prototype.kx=function(a,b){var c=this.ja(a);c&&c.kx(b)};dvt.Bi.prototype.processDefaultHoverEffect=dvt.Bi.prototype.kx;
dvt.Bi.prototype.TG=function(a,b){var c=this.ja(a);c&&c.TG(b)};dvt.Bi.prototype.processDefaultSelectionEffect=dvt.Bi.prototype.TG;dvt.Bi.prototype.oB=function(a,b){var c=this.ja(a);c&&c.oB(b)};dvt.Bi.prototype.processDefaultFocusEffect=dvt.Bi.prototype.oB;dvt.Bi.prototype.oV=function(a){var b=this.ja(a.getId());b.qE()||(b.ya(this.Wk),qd(a,b))};function Wl(a,b){Wl.C.constructor.call(this,a,b);this.hkb();this.J=b}dvt.v.D(Wl,dvt.Vg,"DvtDiagramCategoryRolloverHandler");
Wl.prototype.pea=function(a){return dvt.v.Nh(this,function(){this.pga(!0);this.J.Ef(a)})};Wl.prototype.oea=function(a){return dvt.v.Nh(this,function(){this.qga();this.J.Ef(a)})};function Hl(){this.Init({skyros:Xl,alta:Yl})}dvt.v.D(Hl,dvt.ab,"DvtDiagramDefaults");
var Xl={skin:dvt.j.Xe,emptyText:null,selectionMode:"none",animationOnDataChange:"none",animationOnDisplay:"none",maxZoom:1,highlightMatch:"all",nodeHighlightMode:"node",linkHighlightMode:"link",panning:"none",touchResponse:"auto",zooming:"none",_statusMessageStyle:new dvt.j(dvt.ab.im),styleDefaults:{animationDuration:500,hoverBehaviorDelay:200,_highlightAlpha:.1,nodeDefaults:{labelStyle:dvt.ab.u3+"color:#383A47",hoverInnerColor:"rgb(255,255,255)",hoverOuterColor:"rgba(0,0,0, .3)",selectionColor:"rgb(0,0,0)",
icon:{width:10,height:10,fillPattern:"none",shape:"circle"}},linkDefaults:{startConnectorType:"none",endConnectorType:"none",width:1,style:"solid",hoverInnerColor:"rgb(255,255,255)",hoverOuterColor:"rgba(0,0,0, .3)",selectionColor:"rgb(0,0,0)",labelStyle:dvt.ab.u3+"color:#383A47",_hitDetectionOffset:4}}},Yl={};function Pl(a,b,c,d){this.Init(a,b,c,d)}dvt.v.D(Pl,dvt.Gp,"DvtDiagramDataAnimationHandler");Pl.prototype.Init=function(a,b,c){Pl.C.Init.call(this,a,b);this.C7a=c};
Pl.prototype.ob=function(){return dvt.Sa.hs(this.C7a.F().styleDefaults.animationDuration)/1E3};function Il(a,b,c){this.Init(a,b,c);this.J=c}dvt.v.D(Il,dvt.H,"DvtDiagramEventManager");p=Il.prototype;p.Jp=function(a,b,c){a=this.J.F();"dim"==a.hoverBehavior&&(b=b.we?b.we():[],a.highlightedCategories=c?b.slice():null,c=dvt.Xa.RG(a.highlightedCategories,c),b=dvt.Sa.hs(a.styleDefaults.hoverBehaviorDelay),this.NH.Ef(c,Kl(this.J),b,"any"==a.highlightMatch))};p.qda=function(a,b){return new Wl(a,b)};
p.Nk=function(a){var b=!0,c=a.keyCode,d=this.$e(),e=d instanceof Ql?d.fA:null;c!=dvt.KeyboardEvent.Uh&&this.iC?(e.mU(a),a.preventDefault()):c==dvt.KeyboardEvent.Uh&&e instanceof dvt.xe?!a.shiftKey&&d.Od()?(d.Md(),e.mU(a),a.preventDefault(),this.iC=!0):(a.shiftKey&&this.iC?(this.SQ(a,d),a.preventDefault()):(this.iC&&d.Qf(),b=Il.C.Nk.call(this,a)),this.iC=!1):b=Il.C.Nk.call(this,a);return b};
p.yz=function(){var a=this.J.F();return"none"!==a.panning||"none"!==a.zooming?dvt.H.GE:a.touchResponse===dvt.H.Tx?dvt.H.Tx:dvt.H.pX};p.Uv=function(a){return this.gn(a,dvt.Jd.lL)};p.QB=function(a){return a==dvt.Jd.lL?!1:Il.C.QB.call(this,a)};function Jl(a,b){this.Init(a,b)}dvt.v.D(Jl,Dg,"DvtDiagramKeyboardHandler");Jl.prototype.Yi=function(a){var b=!1;switch(a.keyCode){case dvt.KeyboardEvent.DL:case dvt.KeyboardEvent.dL:b=a.altKey?!0:!1;break;default:b=Jl.C.Yi.call(this,a)}return b};
Jl.prototype.Ik=function(a){if(a.keyCode==dvt.KeyboardEvent.Uh){var b=this.ub.$e();if(b)return dvt.H.oc(a),b;b=Kl(this.Pa());if(0<b.length)return dvt.H.oc(a),this.aK(b)}return Jl.C.Ik.call(this,a)};Jl.prototype.tL=function(a){return this.Pa().ja(a)};function Rl(a,b,c){this.Init(a,b,c)}dvt.v.D(Rl,Jd,"DvtDiagramLink");p=Rl.prototype;p.Init=function(a,b,c){Rl.C.Init.call(this,a,c.id,b);this.Qb=c;this.J.fr()&&this.setCursor("pointer")};p.getData=function(){return this.Qb};p.getId=function(){return this.getData().id};
p.Ve=function(){return this.getData().startNode};p.Ld=function(){return this.getData().endNode};p.Yf=function(){var a=null;this.zb&&(a=this.zb.aa());return a};p.TO=function(){return this.getData().style};p.XA=function(){return this.getData().width};p.xG=function(){return this.getData().color};p.xv=function(){return this.getData().startConnectorType};p.Gt=function(){return this.getData().endConnectorType};
p.p1=function(){if(this.xv()){var a=this.zc().Qd().clone();a.Ln(dvt.Qc.zr);return Qd.A3(null,this.xv(),null,a,this)}return 0};p.K0=function(){if(this.Gt()){var a=this.zc().Qd().clone();a.Ln(dvt.Qc.zr);return Qd.A3(null,this.Gt(),null,a,this)}return 0};
p.ya=function(a){var b=this.getData(),c=this.YC;c||(c=["M",0,0,"L",0,0]);var d=b.id,e=b.color,f=b.width,h=b.style;this.zw=this.mW("#000000",0,b._hitDetectionOffset);this.A(this.zw);b=new dvt.Ba(e,1,f);dvt.B.Ua()&&dvt.B.pq()&&1==dvt.B.FO()&&b.yf(!0);h=Ye.Bua(h);b.Ln(h,Ye.iwa(h),Ye.jwa(h));c=new dvt.vb(this.u(),c,d);c.ra(null);c.Ea(b);this.cH(c);this.A(c);e=this.J;c=this.getData();d=dvt.B.fa(e.u())?dvt.ba.Cl:dvt.ba.Qo;c.label&&(h=c.labelStyle,b=dvt.ba.Cr,e=new dvt.ba(e.u(),c.label,0,0),e.Db(new dvt.j(h)),
e.nz(d),e.ZD(b),c=dvt.j.Cp((new dvt.j(c.labelStyle)).getWidth()),0<c&&dvt.Da.qd(e,c,Infinity,this)||this.A(e),this.zb=e);a.A(this);this.Of("img");this.Eq();this.J.Za().mb(this,this)};p.qc=function(a){Rl.C.qc.call(this,a);a?this.KA(this.ep,!0):this.BF();this.Eq()};p.rb=function(){return this.Pa().fr()&&"off"!=this.getData().selectable};
p.KA=function(a,b){if(a){this.ol||(this.ol=this.zc().Qd());var c=this.zc().Qd().clone();c.Gv&&c.Gv(this.getData().hoverInnerColor);this.zc().Ea(c);Ld(this.mj,c);Ld(this.gj,c)}else this.ol&&(this.zc().Ea(this.ol),Ld(this.mj,this.ol),Ld(this.gj,this.ol),this.ol=null);this.rg||(this.rg=Md(this,"#000000",1,0),this.Jb(this.rg,0));var c=b?this.getData().selectionColor:this.getData().hoverOuterColor,d=this.rg.Qd().clone();d.Gv(c);d.$a(2+this.pL());Nd(this,d,!0);this.rg.Ea(d,2)};
p.BF=function(){this.ol&&(this.zc().Ea(this.ol),Ld(this.mj,this.ol),Ld(this.gj,this.ol),this.ol=null);this.rg&&(this.removeChild(this.rg),this.rg.va&&this.rg.va(),this.rg=null)};p.zd=function(){this.ep||(this.ep=!0,this.KA(!0,this.xb()))};p.Rc=function(){this.xb()?this.KA(!1,!0):this.BF();this.ep=!1};p.ug=function(){var a=this.Pa().F().tooltip;return(a=a?a.renderer:null)?this.Pa().u().jf().Zw(a,this.wm()):this.be()};p.be=function(){return this.getData().shortDesc};
p.wm=function(){return{id:this.getId(),type:"link",label:this.getData().label}};p.Fd=function(){var a=[];this.rb()&&a.push(dvt.K.ua(dvt.K.Ma,this.xb()?"STATE_SELECTED":"STATE_UNSELECTED"));return dvt.oa.Ck(this.be(),a)};p.Eq=function(){if(!dvt.B.Ki()){var a=this.Fd();a&&this.yd("label",a)}};
p.Xd=function(a){if(a.keyCode==dvt.KeyboardEvent.Di&&a.ctrlKey)return this;if(a.keyCode==dvt.KeyboardEvent.Vh||a.keyCode==dvt.KeyboardEvent.mg){var b=this.IS;b||(b=this.Pa().ja(id(this.Pa(),this)));var c=this,d=this.Pa().FU(b.getId()),e=this.Pa().Za().Eb;e&&e.Laa&&(c=e.Laa(b,this,a,d));c.IS=b;return c}return a.keyCode==dvt.KeyboardEvent.bg||a.keyCode==dvt.KeyboardEvent.ag?(a=this.H8(a.keyCode)?this.Ve():this.Ld(),this.Pa().ja(a)):a.type==dvt.MouseEvent.ye?this:null};
p.H8=function(a){var b=Td(this),c=Ud(this),b=b.x<c.x?!0:!1;return a==dvt.KeyboardEvent.bg&&b||a==dvt.KeyboardEvent.ag&&!b?!1:!0};p.Qf=function(){this.dd=!0;this.zd()};p.Md=function(){this.dd=!1;this.Rc()};p.Od=function(){return this.dd};p.we=function(){return this.getData().categories?this.getData().categories:[this.getId()]};p.Vra=function(){var a=this.Pa().F().hiddenCategories;return a&&dvt.na.fz(a,this.we())||!this.Pa().ja(this.Ve())||!this.Pa().ja(this.Ld())?!0:!1};
p.qh=function(a,b){var c=b.Wc(),d=this.Wc(),e=new dvt.Nd(this.u(),null,a.ob());dvt.na.Ne(c,d)||(this.ge(c),c=dvt.I.Qs,0<d.length&&isNaN(d[0])&&(c=dvt.I.Gl),e.ka.O(c,this,this.Wc,this.ge,d));b.zb&&this.zb&&(d=b.zb.nb(),c=this.zb.nb(),d.Ne(c)||(this.zb.sb(d),e.ka.O(dvt.I.Mi,this.zb,this.zb.nb,this.zb.sb,c)));b.zc()&&this.zc()&&(d=b.zc().Qd(),c=this.zc().Qd(),d&&c&&d instanceof dvt.Ba&&c instanceof dvt.Ba&&(d.sc()!=c.sc()||d.getWidth()!=c.getWidth())&&(this.zc().Ea(d),e.ka.O(dvt.I.WL,this.zc(),this.zc().Qd,
this.zc().Ea,c)));a.add(e,1)};p.bk=function(a){this.Pa().gp.A(this);var b=this,c=new dvt.Lj(this.u(),this,a.ob());dvt.eb.Mb(c,function(){b.getParent().removeChild(b);b.va()});a.add(c,0)};p.Si=function(a){this.U(0);a.add(new dvt.Dh(this.u(),this,a.ob()),2)};p.am=function(){return this.getData()};p.wca=function(a,b){a&&(a==dvt.ba.Qo?this.zb.Cj():a==dvt.ba.Lk?this.zb.Vf():a==dvt.ba.Cl&&this.zb.Dj());b&&(b==dvt.ba.Cr?this.zb.vo():b==dvt.ba.ki?this.zb.Ig():b==dvt.ba.Uo?this.zb.hq():"baseline"==b&&this.zb.RJ())};
function Ql(a,b,c){this.Init(a,b,c)}dvt.v.D(Ql,ge,"DvtDiagramNode");p=Ql.prototype;p.Init=function(a,b,c){Ql.C.Init.call(this,a,c.id,b);this.Qb=c;this.J.fr()&&this.setCursor("pointer")};p.getData=function(){return this.Qb};p.getId=function(){return this.Qb.id};p.Yh=function(){return this.PR};p.Yf=function(){var a=null;this.zb&&(a=this.IC?this.IC:this.zb.aa());return a};
p.qc=function(a){var b=this.Pl();Ql.C.qc.call(this,a);this.J.F().selectionRenderer?Sl(this,this.J.F().selectionRenderer,this.Pl(),b):this.TG(a);this.Eq()};p.TG=function(a){this.fs()&&this.fs().qc(a)};p.rb=function(){return this.Pa().fr()&&"off"!=this.getData().selectable};p.BW=function(){return this.da};
p.ya=function(a){if(this.J.F().renderer)Sl(this,this.J.F().renderer,this.Pl(),null);else{var b=this.getData(),c=this.J,d=new dvt.j(b.backgroundStyle);if(!d.fPa()){var e=dvt.j.Cp(d.M(dvt.j.Zn)),f=dvt.j.Cp(d.M(dvt.j.Is)),h=d.M(dvt.j.Ob),k=d.M(dvt.j.tb),l=dvt.j.Cp(d.M(dvt.j.Mj)),d=dvt.j.Cp(d.M(dvt.j.lg)),c=new dvt.Rect(c.u(),0,0,e,f);c.fb(h);d&&(c.Qh(d),c.ai(d));k&&c.Ea(new dvt.Ba(k,1,l));this.A(c);this.HP(c);this.Lb=c}h=this.J;if(k=b.icon){c=k.width;e=k.height;l=k.color;f=k.borderRadius;h=k.source?
new dvt.zf(h.u(),c/2,e/2,c,e,f,k.source,k.sourceSelected,k.sourceHover,k.sourceHoverSelected):new dvt.wa(h.u(),k.shape,dvt.j.Xe,c/2,e/2,c,e,f);"none"!=k.fillPattern?h.ra(new dvt.mc(k.fillPattern,l,l)):h.fb(l);k.borderColor&&h.Ea(new dvt.Ba(k.borderColor,k.borderWidth));this.A(h);this.da=h;if(this.Lb){var k=b.icon,l=this.Lb.getWidth(),c=this.Lb.getHeight(),e=k.width,f=k.height,d=.5*(l-e),n=.5*(c-f);if(void 0!==k.positionX)d=parseFloat(k.positionX),dvt.B.fa(this.u())&&(d=l-d-e);else{var m=k.halign;
"start"==m?m=dvt.B.fa(this.u())?"right":"left":"end"==m&&(m=dvt.B.fa(this.u())?"left":"right");d="left"==m?0:"right"==m?l-e:d}void 0!==k.positionY?n=parseFloat(k.positionY):"top"==k.valign?n=0:"bottom"==k.valign&&(n=c-f);this.da.Ka(d,n)}this.Lb||this.HP(h)}c=this.J;h=dvt.B.fa(c.u())?dvt.ba.Cl:dvt.ba.Qo;b.label&&(k=b.labelStyle,l=dvt.ba.Cr,c=new dvt.ba(c.u(),b.label,0,0),c.Db(new dvt.j(k)),c.nz(h),c.ZD(l),h=dvt.j.Cp((new dvt.j(b.labelStyle)).getWidth()),0<h&&dvt.Da.qd(c,h,Infinity,this)||this.A(c),
this.zb=c);Zl(this.fs(),b)}a.A(this);a=null;this.fA?(b=this.aa())&&(a=new dvt.Y(b.x,b.y,b.a-b.x,b.b-b.y)):(a=this.Lb?this.Lb.qL(this):null)&&this.da?a=a.pj(this.da.qL(this)):!a&&this.da&&(a=this.da.qL(this));this.PR=a;this.Of("img");this.Eq();this.J.Za().mb(this,this)};
function Sl(a,b,c,d){var e=a.J.F()._contextHandler;if(e){var f=a.getData();c=e(a.pb(),a.fA,f,c,d);b=b(c);a.fA&&b!=a.fA&&(a.fA.namespaceURI===dvt.L.iX?a.D0().removeChild(a.fA):a.removeChild(b),a.fA=null);b&&b.namespaceURI===dvt.L.iX?a.fA||(dvt.L.Ye(a.D0(),b),a.fA=b):b instanceof dvt.xe?a.fA||(a.A(b),a.fA=b):b&&a.J.AL("dvt.Diagram: could not add custom node content for the node "+a.getId()+b,1)}else a.J.AL("dvt.Diagram: could not add custom node content - context handler is undefined",1)}
function Zl(a,b){var c=b.hoverInnerColor,d=b.hoverOuterColor,e=b.selectionColor,f=new dvt.Ba(c,1,4);f.yf(!0);d=new dvt.Ba(d,1,8);d.yf(!0);var h=new dvt.Ba(e,1,2);h.yf(!0);var k=new dvt.Ba(e,1,4);k.yf(!0);c=new dvt.Ba(c,1,4);c.yf(!0);e=new dvt.Ba(e,1,8);e.yf(!0);a.Hv(f,d).Iv(h,k).ox(c,e)}p.HP=function(a){this.bO=a};p.fs=function(){if(!this.bO&&this.PR){var a=new dvt.Rect(this.J.u(),this.PR.x,this.PR.y,this.PR.a,this.PR.b);a.Ub();this.HP(a);this.Jb(a,0);Zl(a,this.getData());this.bO=a}return this.bO};
p.zd=function(){var a=this.Pl();this.ep=!0;this.J.F().hoverRenderer?Sl(this,this.J.F().hoverRenderer,this.Pl(),a):this.kx(!0)};p.Rc=function(){var a=this.Pl();this.ep=!1;this.J.F().hoverRenderer?Sl(this,this.J.F().hoverRenderer,this.Pl(),a):this.kx(!1)};p.kx=function(a){this.fs()&&(a?this.fs().zd():this.fs().Rc())};p.ug=function(){var a=this.Pa().F().tooltip;return(a=a?a.renderer:null)?this.Pa().u().jf().Zw(a,this.wm()):this.be()};p.be=function(){return this.getData().shortDesc};
p.wm=function(){return{id:this.getId(),type:"node",label:this.getData().label}};p.Fd=function(){var a=[];this.rb()&&a.push(dvt.K.ua(dvt.K.Ma,this.xb()?"STATE_SELECTED":"STATE_UNSELECTED"));return dvt.oa.Ck(this.be(),a)};p.Eq=function(){if(!dvt.B.Ki()){var a=this.Fd();a&&this.yd("label",a)}};
p.Xd=function(a){var b=null;if(a.keyCode==dvt.KeyboardEvent.Di&&a.ctrlKey)b=this;else if((a.keyCode==dvt.KeyboardEvent.DL||dvt.KeyboardEvent.dL)&&a.altKey){var c=this.Pa().FU(this.getId()),d=this.Pa().Za().Eb;d&&d.qaa&&(b=d.qaa(this,a,c));b?b.IS=this:b=this}else a.type==dvt.MouseEvent.ye?b=this:(b=Kl(this.Pa()),b=dvt.Eb.zG(this,a,b));return b};p.Qf=function(){var a=this.Pl();this.dd=!0;this.J.F().focusRenderer?Sl(this,this.J.F().focusRenderer,this.Pl(),a):this.oB(!0)};
p.Md=function(){this.Od()&&(this.Pl(),this.dd=!1,this.J.F().focusRenderer?Sl(this,this.J.F().focusRenderer,this.getData(),this.Pl()):this.oB(!1))};p.oB=function(a){this.kx(a)};p.Od=function(){return this.dd};p.we=function(){return this.getData().categories?this.getData().categories:[this.getId()]};p.Vra=function(){var a=this.Pa().F().hiddenCategories;return a&&dvt.na.fz(a,this.we())?!0:!1};
p.qh=function(a,b){var c=new dvt.Nd(this.u(),null,a.ob()),d=b.ta(),e=b.qa(),f=this.ta(),h=this.qa();d!=f&&(this.ha(d),c.ka.O(dvt.I.W,this,this.ta,this.ha,f));e!=h&&(this.xa(e),c.ka.O(dvt.I.W,this,this.qa,this.xa,h));b.da&&this.da&&(c.ka.O(dvt.I.VB,this.da,this.da.Ty,this.da.YG,this.da.Ty()),this.da.YG(b.da.Ty()));b.zb&&this.zb&&(d=b.zb.nb(),e=this.zb.nb(),d.Ne(e)||(this.zb.sb(d),c.ka.O(dvt.I.Mi,this.zb,this.zb.nb,this.zb.sb,e)));$l(c,b.Lb,this.Lb);$l(c,b.da,this.da);a.add(c,1)};
function $l(a,b,c){b&&c&&(a.ka.O(dvt.I.Dq,c,c.Hd,c.ra,c.Hd()),c.ra(b.Hd()))}p.bk=function(a){this.Pa().Wk.A(this);var b=this,c=new dvt.Lj(this.u(),this,a.ob());dvt.eb.Mb(c,function(){b.getParent().removeChild(b);b.va()});a.add(c,0)};p.Si=function(a){this.U(0);a.add(new dvt.Dh(this.u(),this,a.ob()),2)};p.am=function(){return this.getData()};p.Pl=function(a){return{hovered:this.ep,selected:this.xb(),focused:this.dd,zoom:a?a:this.Pa().Oa.$f()}};
p.wca=function(a,b){a&&(a==dvt.ba.Qo?this.zb.Cj():a==dvt.ba.Lk?this.zb.Vf():a==dvt.ba.Cl&&this.zb.Dj());b&&(b==dvt.ba.Cr?this.zb.vo():b==dvt.ba.ki?this.zb.Ig():b==dvt.ba.Uo?this.zb.hq():"baseline"==b&&this.zb.RJ())};function Vl(a){this.Init(a)}ba("DvtDiagramAutomation",Vl);dvt.v.D(Vl,dvt.Ud,"DvtDiagramAutomation");Vl.prototype.Init=function(a){this.J=a};
Vl.prototype.Po=function(a){return(a=this.J.Za().kb(a))&&a instanceof Ql?"node["+this.J.tH().indexOf(a.getId())+"]":a&&a instanceof Rl?"link["+this.J.pQ().indexOf(a.getId())+"]":null};Vl.prototype.vi=function(a){if(a==dvt.Ud.UB)return this.nE(this.J);var b=this.QN(a);a=b.component;var b=b.index,c=null;"node"==a?c=this.xk(b):"link"==a&&(c=am(this,b));return c?c.pb():null};Vl.prototype.getDomElementForSubId=Vl.prototype.vi;
Vl.prototype.QN=function(a){var b=a,c=-1,d=a.substring(0,a.indexOf("["));d&&(b="node"==d||"link"==d?d:null,c=parseInt(a.substring(a.indexOf("[")+1,a.indexOf("]"))));return{component:b,index:c}};Vl.prototype.yg=function(){return this.J.yg()};Vl.prototype.getNodeCount=Vl.prototype.yg;Vl.prototype.It=function(){return this.J.It()};Vl.prototype.getLinkCount=Vl.prototype.It;
Vl.prototype.jd=function(a){if(a=this.xk(a)){var b={};b.id=a.getId();b.selected=a.xb();b.tooltip=a.be();b.label=a.getData().label;b.background=a.getData().backgroundStyle;b.icon=this.RY(a.BW());return b}return null};Vl.prototype.getNode=Vl.prototype.jd;
Vl.prototype.yU=function(a){if(a=am(this,a)){var b={};b.id=a.getId();b.selected=a.xb();b.tooltip=a.be();b.label=a.getData().label;b.color=a.xG();b.width=a.XA();b.style=a.TO();b.startNode=a.Ve();b.endNode=a.Ld();b.startConnectorType=a.xv();b.endConnectorType=a.Gt();return b}return null};Vl.prototype.getLink=Vl.prototype.yU;Vl.prototype.RY=function(a){if(a){var b={};b.shape=a instanceof dvt.wa?a.ne():"none";a.Hd()&&(b.color=a.Hd().sc());return b}return null};
Vl.prototype.xk=function(a){var b=this.J.tH();return 0<=a&&a<b.length?this.J.ja(b[a]):null};function am(a,b){var c=a.J.pQ();return 0<=b&&b<c.length?a.J.hd(c[b]):null};
  return dvt;
});
