/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(['./DvtToolkit', './DvtPanZoomCanvas'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.

  // Map the D namespace to dvt, which is used to provide access across partitions.
  var D = dvt;
  
D.jp=function(a){this.Init(a)};(0,D.ca)("DvtDiagramLayoutContext",D.jp);D.w.l(D.jp,D.w,"DvtDiagramLayoutContext");
D.jp.prototype.Init=function(a){this.mf=a?a.mf:null;this.gn=a?a.gn:null;this.Wr=a?a.Wr:0;this.RP=a?a.RP:0;this.xr=a?a.xr:!1;this.e5=a?a.e5:null;this.ze=a?a.ze:null;this.Yu=a?a.Yu:null;this.tg=a?a.tg:null;this.ib={};this.sc={};this.Yy=[];this.gO=[];if(a){for(var b=0;b<this.Wr;b++){var c=new D.mp(a.Yy[b]);this.Yy.push(c);this.ib[c.getId()]=c}for(var d in a.ib)this.ib[d]||(this.ib[d]=new D.mp(a.ib[d]));for(b=0;b<this.RP;b++)c=new D.pp(a.gO[b]),this.gO.push(c),this.sc[c.getId()]=c;for(var e in a.sc)this.sc[e]||
(this.sc[e]=new D.pp(a.sc[e]))}};D.jp.prototype.kl=(0,D.q)("mf");D.jp.prototype.Zd=(0,D.s)("mf");D.jp.prototype.getLayout=D.jp.prototype.Zd;D.jp.prototype.Hn=(0,D.q)("gn");D.jp.prototype.Vi=(0,D.s)("gn");D.jp.prototype.getLayoutAttributes=D.jp.prototype.Vi;D.jp.prototype.WG=function(a){this.K(a.getId())||(this.Wr++,this.Yy.push(a));this.ib[a.getId()]=a};D.jp.prototype.K=function(a){return this.ib[a]};D.jp.prototype.getNodeById=D.jp.prototype.K;D.jp.prototype.EA=function(a){return this.Yy[a]};
D.jp.prototype.getNodeByIndex=D.jp.prototype.EA;D.jp.prototype.Ne=(0,D.s)("Wr");D.jp.prototype.getNodeCount=D.jp.prototype.Ne;D.gq=function(a,b){a.Mb(b.getId())||(a.RP++,a.gO.push(b));a.sc[b.getId()]=b};D.jp.prototype.Mb=function(a){return this.sc[a]};D.jp.prototype.getLinkById=D.jp.prototype.Mb;D.jp.prototype.wD=function(a){return this.gO[a]};D.jp.prototype.getLinkByIndex=D.jp.prototype.wD;D.jp.prototype.zp=(0,D.s)("RP");D.jp.prototype.getLinkCount=D.jp.prototype.zp;
D.jp.prototype.AMa=function(a,b){for(var c=b,d=new D.rq(0,0);c;)if(d.x+=c.o1.x+c.ag().x,d.y+=c.o1.y+c.ag().y,c=c.Yu){if((c=this.K(c))&&c.Pa()){var e=c.tp();e&&(d.x+=e.left,d.y+=e.top)}}else c=null;return new D.rq(a.x+d.x,a.y+d.y)};D.jp.prototype.localToGlobal=D.jp.prototype.AMa;D.jp.prototype.bMa=(0,D.s)("xr");D.jp.prototype.isLocaleR2L=D.jp.prototype.bMa;D.jp.prototype.DIa=(0,D.s)("e5");D.jp.prototype.getComponentSize=D.jp.prototype.DIa;D.jp.prototype.JNa=(0,D.q)("ze");
D.jp.prototype.setViewport=D.jp.prototype.JNa;D.jp.prototype.ED=(0,D.s)("ze");D.jp.prototype.getViewport=D.jp.prototype.ED;D.jp.prototype.R0=(0,D.q)("Yu");D.jp.prototype.Jaa=(0,D.s)("Yu");D.jp.prototype.getContainerId=D.jp.prototype.Jaa;D.jp.prototype.fB=function(a,b,c,d){this.Yu&&(this.tg={},"number"===typeof a||"string"===typeof a||(d=a.left,b=a.right,c=a.bottom,a=a.top),this.tg.top=a,this.tg.right=b,this.tg.bottom=c,this.tg.left=d)};D.jp.prototype.setContainerPadding=D.jp.prototype.fB;
D.jp.prototype.tp=(0,D.s)("tg");D.jp.prototype.getContainerPadding=D.jp.prototype.tp;D.jp.prototype.FIa=(0,D.s)("BJ");D.jp.prototype.getCurrentViewport=D.jp.prototype.FIa;
D.pp=function(a){this.Init(a)};(0,D.ca)("DvtDiagramLayoutContextLink",D.pp);D.w.l(D.pp,D.w,"DvtDiagramLayoutContextLink");D.pp.prototype.Init=function(a){this.Xa=a?a.Xa:null;this.nL=a?a.nL:null;this.NJ=a?a.NJ:null;this.Vh=a?a.Vh:null;this.MF=a?a.MF:null;this.LF=a?a.LF:null;this.gn=a?a.gn:null;this.j$=a?a.j$:0;this.d6=a?a.d6:0;this.UF=a?a.UF:1;this.Me=a?a.Me:!1;this.kj=a?a.kj:null;this.li=a?a.li:null;this.Ws=a?a.Ws:!1};D.pp.prototype.setId=(0,D.q)("Xa");D.pp.prototype.getId=(0,D.s)("Xa");
D.pp.prototype.getId=D.pp.prototype.getId;D.pp.prototype.ZM=(0,D.q)("nL");D.pp.prototype.Zc=(0,D.s)("nL");D.pp.prototype.getStartId=D.pp.prototype.Zc;D.pp.prototype.QM=(0,D.q)("NJ");D.pp.prototype.gc=(0,D.s)("NJ");D.pp.prototype.getEndId=D.pp.prototype.gc;D.pp.prototype.vc=function(a){this.Vh="string"==typeof a?D.N.yR(a):a};D.pp.prototype.setPoints=D.pp.prototype.vc;D.pp.prototype.vb=(0,D.s)("Vh");D.pp.prototype.getPoints=D.pp.prototype.vb;D.pp.prototype.Qd=(0,D.q)("MF");
D.pp.prototype.setLabelPosition=D.pp.prototype.Qd;D.pp.prototype.od=(0,D.s)("MF");D.pp.prototype.getLabelPosition=D.pp.prototype.od;D.pp.prototype.Gn=(0,D.q)("LF");D.pp.prototype.Ld=(0,D.s)("LF");D.pp.prototype.getLabelBounds=D.pp.prototype.Ld;D.pp.prototype.mS=(0,D.s)("j$");D.pp.prototype.getStartConnectorOffset=D.pp.prototype.mS;D.pp.prototype.TR=(0,D.s)("d6");D.pp.prototype.getEndConnectorOffset=D.pp.prototype.TR;D.pp.prototype.cE=(0,D.q)("UF");D.pp.prototype.Sv=(0,D.s)("UF");
D.pp.prototype.getLinkWidth=D.pp.prototype.Sv;D.pp.prototype.Hn=(0,D.q)("gn");D.pp.prototype.Vi=(0,D.s)("gn");D.pp.prototype.getLayoutAttributes=D.pp.prototype.Vi;D.pp.prototype.jb=(0,D.q)("Me");D.pp.prototype.pba=(0,D.s)("Me");D.pp.prototype.getSelected=D.pp.prototype.pba;D.pp.prototype.pw=(0,D.q)("kj");D.pp.prototype.setLabelRotationAngle=D.pp.prototype.pw;D.pp.prototype.Qv=(0,D.s)("kj");D.pp.prototype.getLabelRotationAngle=D.pp.prototype.Qv;D.pp.prototype.ws=(0,D.q)("li");
D.pp.prototype.setLabelRotationPoint=D.pp.prototype.ws;D.pp.prototype.Rv=(0,D.s)("li");D.pp.prototype.getLabelRotationPoint=D.pp.prototype.Rv;D.pp.prototype.gE=(0,D.q)("Ws");D.pp.prototype.py=(0,D.s)("Ws");
D.mp=function(a){this.Init(a)};(0,D.ca)("DvtDiagramLayoutContextNode",D.mp);D.w.l(D.mp,D.w,"DvtDiagramLayoutContextNode");
D.mp.prototype.Init=function(a){this.Xa=a?a.Xa:null;this.Hc=a?a.Hc:null;this.OO=a?a.OO:null;this.XC=a?a.XC:null;this.MF=a?a.MF:null;this.LF=a?a.LF:null;this.gn=a?a.gn:null;this.y4=a?a.y4:!1;this.Yu=a?a.Yu:null;this.Me=a?a.Me:!1;this.kj=a?a.kj:null;this.li=a?a.li:null;this.tg=a?a.tg:null;this.Xr=a?a.Xr:null;this.zq=a?a.zq:null;this.ej=a?a.ej:!1;this.gN=a?a.ga():null;this.Iy=!0;this.o1=new D.rq(0,0)};D.mp.prototype.setId=(0,D.q)("Xa");D.mp.prototype.getId=(0,D.s)("Xa");D.mp.prototype.getId=D.mp.prototype.getId;
D.mp.prototype.N0=function(a){this.Xr=this.Hc=a};D.mp.prototype.yd=function(){!this.Iy&&this.gN&&this.gN.MM(this);return this.Hc};D.mp.prototype.getBounds=D.mp.prototype.yd;D.mp.prototype.Ef=function(){!this.Iy&&this.gN&&this.gN.MM(this);return this.OO};D.mp.prototype.getContentBounds=D.mp.prototype.Ef;D.mp.prototype.Cj=function(a){this.XC=a;(0,D.sq)(this,this)};D.mp.prototype.setPosition=D.mp.prototype.Cj;D.mp.prototype.ag=(0,D.s)("XC");D.mp.prototype.getPosition=D.mp.prototype.ag;
D.mp.prototype.Qd=(0,D.q)("MF");D.mp.prototype.setLabelPosition=D.mp.prototype.Qd;D.mp.prototype.od=(0,D.s)("MF");D.mp.prototype.getLabelPosition=D.mp.prototype.od;D.mp.prototype.Gn=(0,D.q)("LF");D.mp.prototype.Ld=(0,D.s)("LF");D.mp.prototype.getLabelBounds=D.mp.prototype.Ld;D.mp.prototype.Hn=(0,D.q)("gn");D.mp.prototype.Vi=(0,D.s)("gn");D.mp.prototype.getLayoutAttributes=D.mp.prototype.Vi;D.mp.prototype.zy=(0,D.q)("y4");D.mp.prototype.JH=(0,D.s)("y4");D.mp.prototype.isReadOnly=D.mp.prototype.JH;
D.mp.prototype.R0=(0,D.q)("Yu");D.mp.prototype.Jaa=(0,D.s)("Yu");D.mp.prototype.getContainerId=D.mp.prototype.Jaa;D.mp.prototype.jb=(0,D.q)("Me");D.mp.prototype.pba=(0,D.s)("Me");D.mp.prototype.getSelected=D.mp.prototype.pba;D.mp.prototype.pw=(0,D.q)("kj");D.mp.prototype.setLabelRotationAngle=D.mp.prototype.pw;D.mp.prototype.Qv=(0,D.s)("kj");D.mp.prototype.getLabelRotationAngle=D.mp.prototype.Qv;D.mp.prototype.ws=(0,D.q)("li");D.mp.prototype.setLabelRotationPoint=D.mp.prototype.ws;
D.mp.prototype.Rv=(0,D.s)("li");D.mp.prototype.getLabelRotationPoint=D.mp.prototype.Rv;D.mp.prototype.fB=function(a,b,c,d){this.Pa()&&(this.tg={},"number"===typeof a||"string"===typeof a||(d=a.left,b=a.right,c=a.bottom,a=a.top),this.tg.top=a,this.tg.right=b,this.tg.bottom=c,this.tg.left=d,this.Xr&&(this.Hc=new D.kp(this.Xr.x,this.Xr.y,this.Xr.w+d+b,this.Xr.h+a+c)),this.zq&&(this.OO=new D.kp(this.zq.x,this.zq.y,this.zq.w+d+b,this.zq.h+a+c)))};D.mp.prototype.setContainerPadding=D.mp.prototype.fB;
D.mp.prototype.tp=(0,D.s)("tg");D.mp.prototype.getContainerPadding=D.mp.prototype.tp;D.mp.prototype.wf=(0,D.q)("ej");D.mp.prototype.Pa=(0,D.s)("ej");D.mp.prototype.isDisclosed=D.mp.prototype.Pa;D.mp.prototype.P0=(0,D.q)("vAa");D.mp.prototype.xc=(0,D.s)("vAa");D.mp.prototype.getChildNodes=D.mp.prototype.xc;D.mp.prototype.XM=(0,D.q)("Jx");D.mp.prototype.Ol=(0,D.s)("Jx");D.mp.prototype.getParentNode=D.mp.prototype.Ol;D.sq=function(a,b){var c=b.Ol();c&&c.Iy&&(c.Iy=!1,(0,D.sq)(a,c))};
D.rq=function(a,b){this.Init(a,b)};(0,D.ca)("DvtDiagramPoint",D.rq);D.w.l(D.rq,D.w,"DvtDiagramPoint");D.rq.prototype.Init=function(a,b){this.x=null===a||(0,window.isNaN)(a)?0:a;this.y=null===b||(0,window.isNaN)(b)?0:b};
D.kp=function(a,b,c,d){this.Init(a,b,c,d)};(0,D.ca)("DvtDiagramRectangle",D.kp);D.w.l(D.kp,D.w,"DvtDiagramRectangle");D.kp.prototype.Init=function(a,b,c,d){this.x=null===a||(0,window.isNaN)(a)?0:a;this.y=null===b||(0,window.isNaN)(b)?0:b;this.w=null===c||(0,window.isNaN)(c)?0:c;this.h=null===d||(0,window.isNaN)(d)?0:d};
D.gp=function(a,b,c){this.Init(a,b,c)};(0,D.ca)("DvtBaseDiagram",D.gp);D.w.l(D.gp,D.hp,"DvtBaseDiagram");D.u=D.gp.prototype;D.u.Init=function(a,b,c){D.gp.o.Init.call(this,a,b,c);this.j().Jc.ta().setAttributeNS(null,"text-rendering","geometricPrecision");this.K7;this.rK=this.fo=null;this.ZW;this.u4=!0;this.Bl=new D.B(a);this.Th=new D.B(a);this.Ot=new D.B(a);this.Wy=0.5;this.Ffa()};D.u.EN=function(){var a=this.da;a.qw(this.yD());a.xu(this.fy());a.ow(this.xa());a.ba.k(this.Bl);a.ba.k(this.Th);a.ba.k(this.Ot)};
D.u.ow=function(a){this.Wy=a;this.da&&this.da.ow(a)};D.u.xa=(0,D.s)("Wy");D.u.xu=function(a){this.ov=a;this.da&&this.da.xu(a)};D.u.fy=(0,D.s)("ov");D.u.qw=function(a){this.zt=a;this.da&&this.da.qw(a)};D.u.yD=(0,D.s)("zt");D.u.Ffa=function(){this.xu(2);this.qw(0)};D.u.Gj=function(){this.$J||(D.gp.o.Gj.call(this),this.EN(),this.cq());this.$J=!1};D.u.cq=(0,D.j)();D.u.K=(0,D.ba)(null);D.u.Mb=(0,D.ba)(null);D.u.wI=function(){return[]};D.u.rB=function(){return[]};D.u.Ne=function(){return this.rB().length};
D.gp.prototype.getNodeCount=D.gp.prototype.Ne;D.gp.prototype.zp=function(){return this.wI().length};D.gp.prototype.getLinkCount=D.gp.prototype.zp;D.ip=function(a,b){if(b&&a.tD())a.nC?(a.nC.ca(a.Ga/2),a.nC.va(a.Ua/2),D.Xe.Qb(a.nC,a.getWidth()-2*D.Xe.M1,window.Infinity,a)):a.nC=a.$da(a.tD());else if(a.nC){var c=a.nC.getParent();c&&c.removeChild(a.nC);a.nC=null}};D.u=D.gp.prototype;D.u.$da=function(a){var b=this.q();return D.Xe.Lm(this,a,new D.z(0,0,this.getWidth(),this.getHeight()),this.la(),b._statusMessageStyle)};
D.u.tD=(0,D.s)("en");D.u.YR=(0,D.s)("ZW");D.u.jh=(0,D.s)("Hb");D.u.rw=function(a){this.Hb="single"==a?new D.Vk("s"):"multiple"==a?new D.Vk("m"):null;this.la().yu(this.Hb)};D.u.Pl=function(){return this.Hb?this.Hb.Ta():null};D.u.ar=function(){return this.Hb?!0:!1};D.u.la=(0,D.s)("fb");D.lp=function(a){var b=new D.jp,c=(0,D.D)(a.j());b.xr=c;a=new D.kp(0,0,a.getWidth(),a.getHeight());b.e5=a;return b};
D.gp.prototype.Ds=function(a,b,c){var d=new D.mp;d.setId(a.getId?a.getId():a.getData().getId());d.N0(D.np.ZG(a.$d()));var e=D.np.ZG(a.Ef());d.OO=e;d.zq=e;d.Hn(a.Vi(b));d.Gn(D.np.ZG(a.Ld()));d.Qd(D.np.Qpa(a.od()));d.jb(!0==a.Ca());if(a.Pa()&&(d.wf(!0),b=(0,D.op)(a.tp()),d.Pa()&&(d.tg=b)))d.Xr&&(d.Xr=new D.kp(d.Xr.x,d.Xr.y,d.Xr.w-(b.left+b.right),d.Xr.h-(b.top+b.bottom))),d.zq&&(d.zq=new D.kp(d.zq.x,d.zq.y,d.zq.w-(b.left+b.right),d.zq.h-(b.top+b.bottom)));d.R0(a.getData().WR?a.getData().fd:null);d.gN=
this;d.Iy=!c;return d};D.gp.prototype.oB=function(a,b,c,d){var e=new D.pp;e.setId(a.getId?a.getId():a.getData().getId());e.ZM(b?b:a.getData().Zc());e.QM(c?c:a.getData().gc());e.Hn(a.Vi(d));e.Gn(D.np.ZG(a.Ld()));e.Qd(D.np.Qpa(a.od()));b=a.mS();e.j$=b;b=a.TR();e.d6=b;e.cE(a.Sv());e.jb(!0==a.Ca());e.gE(!0==a.py());return e};
D.gp.prototype.mB=function(a,b,c){var d=a.tp();if(d){var e=a.Yu;e&&(e=this.K(e))&&e.fB((0,D.qp)(d),b)}for(var e=d=window.Number.MAX_VALUE,f=0;f<a.Ne();f++){var g=a.EA(f),h=this.K(g.getId()),i=g.ag();i&&(d=window.Math.min(d,i.x),e=window.Math.min(e,i.y));h=g.Ld();i=g.od();h&&i&&(d=window.Math.min(d,i.x+h.x),e=window.Math.min(e,i.y+h.y))}for(f=0;f<a.zp();f++){var g=a.wD(f),k=this.Mb(g.getId());if(i=g.vb()){i=D.rp.V1(i);for(h=0;h<i.length;h++)var l=i[h],d=window.Math.min(d,l.x),e=window.Math.min(e,l.y)}h=
g.Ld();i=g.od();h&&i&&(d=window.Math.min(d,i.x+h.x),e=window.Math.min(e,i.y+h.y))}e=this.Wda(-d,-e);d=e.x;e=e.y;for(f=0;f<a.Ne();f++){g=a.EA(f);h=this.K(g.getId());(i=g.ag())&&h.Hw(i.x+d,i.y+e,b);var m=g.Ld(),l=g.od();if(m&&l){var i=new D.E(l.x-i.x,l.y-i.y),l=g.kj,n=D.np.Ppa(g.li);b?((0,D.T)(b,"typeRectangle",h,h.Ld,h.Gn,m),h.od()?(0,D.T)(b,"typePoint",h,h.od,h.Qd,i):h.Qd(i),null!=l&&(0,D.T)(b,"typeNumber",h,h.Qv,h.pw,l),n&&(h.li?(0,D.T)(b,"typePoint",h,h.Rv,h.ws,n):h.ws(n))):(h.Gn(m),h.Qd(i),null!=
l&&h.pw(l),n&&h.ws(n))}h.Pa()&&(g=g.tp())&&h.fB((0,D.qp)(g),b)}if(!this.ez)for(f=0;f<a.zp();f++){g=a.wD(f);k=this.Mb(g.getId());if(i=g.vb()){0<i.length&&!(0,window.isNaN)(i[0])&&(i=D.rp.NT(i));for(var o=[],h=0;h<i.length;)(0,window.isNaN)(i[h])?(o.push(i[h]),h++):(o.push(i[h]+d),o.push(i[h+1]+e),h+=2);b&&k.vb()?0<o.length&&(0,window.isNaN)(o[0])?(h=D.sp.uqa(k.vb(),o),k.vc(h.wda),(0,D.T)(b,"typePath",k,k.vb,k.vc,h.vda),(0,D.cl)(b,function(){k.vc(o)})):(0,D.T)(b,"typePolyline",k,k.vb,k.vc,o):k.vc(o)}h=
D.np.gHa(g.Ld());i=g.od();l=g.kj;n=D.np.Ppa(g.li);h&&i&&(g=new D.E(i.x+d,i.y+e),b?((0,D.T)(b,"typeRectangle",k,k.Ld,k.Gn,h),k.od()?(0,D.T)(b,"typePoint",k,k.od,k.Qd,g):k.Qd(g),null!=l&&(0,D.T)(b,"typeNumber",k,k.Qv,k.pw,l),n&&(k.li?(0,D.T)(b,"typePoint",k,k.Rv,k.ws,n):k.ws(n))):(k.Gn(h),k.Qd(g),null!=l&&k.pw(l),n&&k.ws(n)))}if(b=a.ED())this.fo=new D.z(b.x+d,b.y+e,b.w,b.h),this.rK=a.Yu;c&&(this.K7=new D.E(d,e))};
D.up=function(a,b){var c;if(a.fo&&(c=new D.z(a.fo.x,a.fo.y,a.fo.e,a.fo.g),a.rK))for(var d=a.K(a.rK);d;){var e=d.N(),f=d.M();if(b){var g=(0,D.tp)(b,d,d.N),h=(0,D.tp)(b,d,d.M);if(g||0==g)e=g;if(h||0==h)f=h}c.x+=e;c.y+=f;d=(d=d.getData().WR?d.getData().fd:null)?a.K(d):null}return c};D.gp.prototype.Wda=function(a,b){return new D.E(a,b)};D.gp.prototype.vw=function(a,b){if(0==this.zt){var c=this.da,d=b?b:(0,D.vp)(this,a,void 0,void 0),e=(0,D.wp)(this,d);c.qw(0.5*window.Math.min(e,c.fy()));return d}return null};
D.wp=function(a,b){if(!b)return 0;var c=a.da;return window.Math.min((a.Ga-2*c.Iq)/b.e,(a.Ua-2*c.Iq)/b.g)};
D.vp=function(a,b,c,d){var e=null,f,g,h,i,k=a.da.ba;c||(c=a.rB());for(var l=0;l<c.length;l++)if(f=c[l],(i=a.K(f))&&i.eb&&!i.be){var m=i,n=b;f=m.$d();g=new D.z(f.x,f.y,f.e,f.g);h=null;n&&(h=(0,D.tp)(n,m,m.od));h||(h=m.od());var o=null,p=null;n&&(o=(0,D.tp)(n,m,m.Qv),p=(0,D.tp)(n,m,m.Rv));null==o&&(o=m.kj);p||(p=m.li);m=m.Ld();h&&m&&(null!=o&&(m=(0,D.xp)(m,o,p)),g.x=window.Math.min(f.x,m.x+h.x),g.y=window.Math.min(f.y,m.y+h.y),g.e=window.Math.max(f.x+f.e,m.x+h.x+m.e)-g.x,g.g=window.Math.max(f.y+f.g,
m.y+h.y+m.g)-g.y);f=g;h=g=null;b&&(g=(0,D.tp)(b,i,i.N),h=(0,D.tp)(b,i,i.M));null==g&&(g=i.N());null==h&&(h=i.M());f.x+=g;f.y+=h;if(g=i.getData().WR?i.getData().fd:null)g=i.getParent(),i=(0,D.yp)(new D.E(f.x,f.y),g,b),i=(0,D.zp)(i,k,b),g=(0,D.yp)(new D.E(f.x+f.e,f.y+f.g),g,b),g=(0,D.zp)(g,k,b),f.x=i.x,f.y=i.y,f.e=g.x-i.x,f.g=g.y-i.y;e?(i=e.x,g=e.y,e.x=window.Math.min(e.x,f.x),e.y=window.Math.min(e.y,f.y),e.e=window.Math.max(i+e.e,f.x+f.e)-e.x,e.g=window.Math.max(g+e.g,f.y+f.g)-e.y):e=f}d||(d=a.wI());
for(l=0;l<d.length;l++)if(c=d[l],(c=a.Mb(c))&&c.eb){i=c;g=b;f=new D.z(window.Number.MAX_VALUE,window.Number.MAX_VALUE,-window.Number.MAX_VALUE,-window.Number.MAX_VALUE);h=null;g&&(h=(0,D.tp)(g,i,i.vb));h||(h=i.vb());if(h){h=D.rp.V1(h);for(var r=void 0,r=m=p=o=void 0,n=0;n<h.length;n++)r=h[n],o=window.Math.max(f.x+f.e,r.x),p=window.Math.max(f.y+f.g,r.y),m=window.Math.min(f.x,r.x),r=window.Math.min(f.y,r.y),f.x=m,f.y=r,f.e=o-m,f.g=p-r}h=new D.z(f.x,f.y,f.e,f.g);o=null;g&&(o=(0,D.tp)(g,i,i.od));null==
o&&(o=i.od());m=p=null;g&&(p=(0,D.tp)(g,i,i.Qv),m=(0,D.tp)(g,i,i.Rv));null==p&&(p=i.kj);m||(m=i.li);i=i.Ld();o&&i&&(null!=p&&(i=(0,D.xp)(i,p,m)),h.x=window.Math.min(f.x,i.x+o.x),h.y=window.Math.min(f.y,i.y+o.y),h.e=window.Math.max(f.x+f.e,i.x+o.x+i.e)-h.x,h.g=window.Math.max(f.y+f.g,i.y+o.y+i.g)-h.y);f=h;if(g=c.getData().WR?c.getData().fd:null)c=c.getParent(),i=(0,D.yp)(new D.E(f.x,f.y),c,b),i=(0,D.zp)(i,k,b),g=(0,D.yp)(new D.E(f.x+f.e,f.y+f.g),c,b),g=(0,D.zp)(g,k,b),f.x=i.x,f.y=i.y,f.e=g.x-i.x,f.g=
g.y-i.y;e?(i=e.x,g=e.y,e.x=window.Math.min(e.x,f.x),e.y=window.Math.min(e.y,f.y),e.e=window.Math.max(i+e.e,f.x+f.e)-e.x,e.g=window.Math.max(g+e.g,f.y+f.g)-e.y):e=f}return e};
D.xp=function(a,b,c){if(null==b&&!c)return a;var d=new D.E(a.x,a.y),e=new D.E(a.x+a.e,a.y),f=new D.E(a.x,a.y+a.g);a=new D.E(a.x+a.e,a.y+a.g);var g=new D.dj;null!=b&&(c&&g.translate(-c.x,-c.y),g.rotate(b),c&&g.translate(c.x,c.y));b=(0,D.Ap)(g,d);e=(0,D.Ap)(g,e);f=(0,D.Ap)(g,f);d=(0,D.Ap)(g,a);a=window.Math.min(window.Math.min(b.x,e.x),window.Math.min(f.x,d.x));g=window.Math.max(window.Math.max(b.x,e.x),window.Math.max(f.x,d.x));c=window.Math.min(window.Math.min(b.y,e.y),window.Math.min(f.y,d.y));b=
window.Math.max(window.Math.max(b.y,e.y),window.Math.max(f.y,d.y));return new D.z(a,c,g-a,b-c)};D.zp=function(a,b,c){for(var d=(0,D.Bp)(b),e=a,f=d.length-1;0<=f;f--){b=d[f];a=b.ua().Y();var g=null,h=null;c&&(g=(0,D.tp)(c,b,b.N),h=(0,D.tp)(c,b,b.M));null!=g&&(a.pc=g);null!=h&&(a.nc=h);a.ky();e=(0,D.Ap)(a,e)}return e};
D.yp=function(a,b,c){for(var d=(0,D.Bp)(b),e=a,f=0;f<d.length;f++){b=d[f];a=b.ua().Y();var g=null,h=null;c&&(g=(0,D.tp)(c,b,b.N),h=(0,D.tp)(c,b,b.M));null!=g&&(a.pc=g);null!=h&&(a.nc=h);e=(0,D.Ap)(a,e)}return e};
D.gp.prototype.hN=function(a,b,c,d,e){var f=this.da,g=f.Tc().e/2,h=f.Tc().g/2;c=g-(c+a)*e;d=h-(d+b)*e;a=g-a*e;b=h-b*e;this.fo&&(h=(0,D.up)(this),-h.x*e<c?(g=c+h.x*e,c-=g,a+=g):-h.x*e>a&&(g=-h.x*e-a,c-=g,a+=g),-h.y*e<d?(e=d+h.y*e,d-=e,b+=e):-h.y*e>b&&(e=-h.y*e-b,d-=e,b+=e));f.xt=c;f.yt=d;f.vt=a;f.wt=b};D.qp=function(a){var b={};b.top=a.top;b.right=a.right;b.bottom=a.bottom;b.left=a.left;return b};D.op=function(a){var b={};b.top=a.top;b.right=a.right;b.bottom=a.bottom;b.left=a.left;return b};
D.gp.prototype.MM=(0,D.j)();D.Cp=function(a,b){a.N0(D.np.ZG(b.$d()));var c=D.np.ZG(b.Ef());a.OO=c;a.zq=c;a.Gn(D.np.ZG(b.Ld()));a.Iy=!0};
D.Dp=function(a,b){this.Init(a,b)};D.w.l(D.Dp,D.Ep,"DvtBaseDiagramKeyboardHandler");D.u=D.Dp.prototype;D.u.Init=function(a,b){D.Dp.o.Init.call(this,a,b);this.u=a};D.u.ga=(0,D.s)("u");D.u.qy=function(a){return 9==a.keyCode?!1:this.sg(a)&&!a.ctrlKey};D.u.$q=function(a){return 32==a.keyCode&&a.ctrlKey};D.u.b_=function(a,b,c){b=b.keyCode;if(!c||1>c.length||!a)return null;var d=c[0];a=a.Ce();a=a.x+a.e/2;for(var e=0;e<c.length;e++){var f=c[e],g=f.Ce(),g=g.x+g.e/2;if(188==b&&g<=a||190==b&&g>=a){d=f;break}}return d};
D.u.p_=function(a,b,c,d){if(!d)return null;if(!b)return d[0];if(!a)return b;for(var e=0;e<d.length;e++){var f=d[e],g=f,h=a,i=f,k=this.rE(i.Zc?i.Zc():i.getData().Zc()),i=this.rE(i.gc?i.gc():i.getData().gc()),k=h==k?i:k,h=(0,D.Fp)(h),k=(0,D.Fp)(k),h=window.Math.atan2(k.y-h.y,k.x-h.x),h=0>h?h+2*window.Math.PI:h;g.L3=h;k=g=f;h=this.rE(k.Zc?k.Zc():k.getData().Zc());k=this.rE(k.gc?k.gc():k.getData().gc());h=(0,D.Fp)(h);k=(0,D.Fp)(k);g.LE=window.Math.sqrt(window.Math.pow(k.x-h.x,2)+window.Math.pow(k.y-h.y,
2));f.bO=a==this.rE(f.gc?f.gc():f.getData().gc())?1:0}d.sort(function(a,b){var c=a.L3,d=b.L3,e=-1;!(0,D.Gp)(c,d)&&c>d?e=1:(0,D.Gp)(c,d)&&(a.LE>b.LE?e=1:b.LE==a.LE&&a.bO>b.bO?e=1:b.LE==a.LE&&a.bO==b.bO&&(e=0));return e});for(a=0;a<d.length;a++)e=d[a],e.L3=void 0,e.LE=void 0,e.bO=void 0;c=40==c.keyCode?!0:!1;for(e=a=0;e<d.length;e++)if(d[e]===b){a=c?e==d.length-1?0:e+1:0==e?d.length-1:e-1;break}return d[a]};D.u.rE=(0,D.ba)(null);D.Fp=function(a){a=a.Ce();return new D.E(a.x+a.e/2,a.y+a.g/2)};
D.Gp=function(a,b){var c=1E-7>=window.Math.abs(a-b);c||(c=1E-7>=window.Math.abs(2*window.Math.PI+window.Math.min(a,b)-window.Math.max(a,b)));return c};
D.Hp=function(a,b,c){this.Init(a,b,c)};D.w.l(D.Hp,D.B,"DvtBaseDiagramLink");D.u=D.Hp.prototype;D.u.Init=function(a,b,c){D.Hp.o.Init.call(this,a,null,b);this.u=c;this.Zy;this.Vh;this.Kx;this.Oa;this.KP;this.kj;this.li;this.Me=!1;this.FG=!0;this.G;this.vg;this.Bg};D.u.ga=(0,D.s)("u");D.u.kT=(0,D.j)();D.u.xp=(0,D.ba)(null);D.u.tT=(0,D.j)();D.u.AKa=(0,D.s)("Bg");(0,D.ca)("DvtBaseDiagramLink.prototype.getStartConnector",D.Hp.prototype.AKa);D.Hp.prototype.$Ia=(0,D.s)("vg");
(0,D.ca)("DvtBaseDiagramLink.prototype.getEndConnector",D.Hp.prototype.$Ia);D.u=D.Hp.prototype;D.u.sw=(0,D.q)("G");D.u.sb=(0,D.s)("G");D.u.pw=function(a){this.kj=a;var b=this.Oa,c=this.od();this.Ld();b&&(a=(0,D.Ip)(c,a,this.li),b.za(a))};D.u.Qv=(0,D.s)("kj");D.u.ws=function(a){this.li=a;var b=this.Oa,c=this.od();this.Ld();b&&(a=(0,D.Ip)(c,this.kj,a),b.za(a))};D.u.Rv=(0,D.s)("li");D.u.od=(0,D.s)("KP");D.u.Qd=function(a){if(a){this.KP=a;var b=this.Oa;this.Ld();b&&(a=(0,D.Ip)(a,this.kj,this.li),b.za(a))}};
D.u.Ld=(0,D.ba)(null);D.u.Gn=(0,D.j)();D.u.mS=(0,D.ba)(0);D.u.TR=(0,D.ba)(0);D.u.Jf=(0,D.q)("FG");D.u.Aa=function(){return this.ga().ar()&&this.FG};D.u.Ca=(0,D.s)("Me");(0,D.ca)("DvtBaseDiagramLink.prototype.isSelected",D.Hp.prototype.Ca);D.u=D.Hp.prototype;D.u.jb=(0,D.q)("Me");D.u.gE=(0,D.j)();D.u.py=(0,D.ba)(!1);D.u.cE=(0,D.j)();D.u.Sv=(0,D.ba)(1);(0,D.ca)("DvtBaseDiagramLink.prototype.getLinkWidth",D.Hp.prototype.Sv);D.u=D.Hp.prototype;D.u.UM=(0,D.j)();D.u.rH=(0,D.ba)("solid");D.u.TM=(0,D.j)();
D.u.DA=(0,D.ba)(null);D.u.sp=(0,D.ba)(null);D.u.Gea=function(){return this.rH()};D.u.oE=function(){return this.Sv()};D.u.Fea=function(){return this.DA()};D.Kp=function(a,b,c,d,e){if(c||e){var f;e||(f=a.G.Yb().Y(),f.Ek(0),f.Fc=!1);if(c=D.Jp.Zda(a.j(),c,e,f,a))a.G.k(c),D.Jp.SI(c,0,e,b,d);return c}};
D.Hp.prototype.vc=function(a){this.Zy=a;D.rp.lU(a)?(this.Kx=a,this.Vh=D.rp.Yda(a)):(this.Vh=a,this.Kx=D.rp.NT(a));this.G&&this.G instanceof D.Fh&&(this.G.Eo(this.Kx),this.vg?D.Jp.SI(this.vg,this.xp(),this.sp(D.Jp.uI),this.Vh,1):this.vg=(0,D.Kp)(this,this.Vh,this.xp(),1,this.sp(D.Jp.uI)),this.Bg?D.Jp.SI(this.Bg,this.Vq(),this.sp(D.Jp.NI),this.Vh,0):this.Bg=(0,D.Kp)(this,this.Vh,this.Vq(),0,this.sp(D.Jp.NI)));var b=a=null;this.ke&&this.ke.iD instanceof D.Fh&&this.ke.iD.Eo(this.Kx);this.ke&&(a=this.ke.Qt)&&
D.Jp.SI(a,this.Vq(),this.sp(D.Jp.NI),this.Vh,0);this.ke&&(b=this.ke.Pt)&&D.Jp.SI(b,this.xp(),this.sp(D.Jp.uI),this.Vh,1);this.Nr&&this.Nr.iD instanceof D.Fh&&this.Nr.iD.Eo(this.Kx);this.mL&&this.mL.Cj((0,D.Lp)(this));this.MJ&&this.MJ.Cj((0,D.Mp)(this))};D.Hp.prototype.vb=(0,D.s)("Zy");D.Lp=function(a){return!a.Vh?null:new D.E(a.Vh[0],a.Vh[1])};D.Mp=function(a){if(!a.Vh)return null;var b=a.Vh.length;return new D.E(a.Vh[b-2],a.Vh[b-1])};
D.Ip=function(a,b,c){var d=new D.dj;null!=b&&(c&&d.translate(-c.x,-c.y),d.rotate(b),c&&d.translate(c.x,c.y));a&&d.translate(a.x,a.y);return d};D.Hp.prototype.pN=function(a,b,c){!b&&0!=b&&(b=1);!c&&0!=c&&(c=0);c=this.oE()+c;a=new D.I(a,b,c);return new D.Np(this.j(),this.Kx,a)};
D.Pp=function(a,b,c,d){b=a.pN(b,c,d);a.Bg&&a.Vq()&&(c=a.Vq(),d=(0,D.Op)(b,a.Vh,c,a.sp(D.Jp.NI),a,0),b.Qt&&b.removeChild(b.Qt),b.Qt=d,b.D$=c,b.k(b.Qt));a.vg&&a.xp()&&(c=a.xp(),a=(0,D.Op)(b,a.Vh,c,a.sp(D.Jp.uI),a,1),b.Pt&&b.removeChild(b.Pt),b.Pt=a,b.C$=c,b.k(b.Pt));return b};D.Qp=function(a,b,c){a=a.Gea();a=D.rp.Xda(a);b.Ek(a,D.rp.Tea(a,c),D.rp.Uea(a,c))};
D.Rp=function(a,b){if(a){var c=null;b.rb&&(c=b.rb());if(c){var d=a.Yb()?a.Yb().Y():null,e=a.Rb()?a.Rb().Y():null;d&&d.jr&&(d.jr(c),a.V(d));e&&e.jr&&(e.jr(c),a.L(e))}}};D.u=D.Hp.prototype;D.u.zd=(0,D.ba)(null);D.u.Ce=function(a){return this.F(a)};D.u.wj=function(){return this.ta()};D.u.Ud=(0,D.j)();D.u.ic=(0,D.j)();D.u.oc=(0,D.j)();D.u.Lc=(0,D.ba)(null);
D.Sp=function(a,b,c){this.Init(a,b,c)};D.w.l(D.Sp,D.B,"DvtBaseDiagramNode");D.u=D.Sp.prototype;D.u.Init=function(a,b,c){D.Sp.o.Init.call(this,a,null,b);this.u=c;this.Me=this.ej=!1;this.FG=!0;this.Oa;this.KP;this.kj;this.li;this.mn;this.Pj};D.u.ga=(0,D.s)("u");D.u.getData=(0,D.ba)(null);D.u.$d=function(){return this.Ef()};D.u.Ef=function(){return new D.z(0,0,this.getWidth(),this.getHeight())};D.u.Vi=function(){return{}};
D.u.Qd=function(a){if(a){this.KP=a;var b=this.Oa;this.Ld();b&&(a=(0,D.Tp)(a,this.kj,this.li),b.za(a))}};D.u.od=(0,D.s)("KP");D.u.Ld=(0,D.ba)(null);D.u.Gn=(0,D.j)();D.u.tp=(0,D.ba)(null);D.u.fB=(0,D.j)();D.u.Pa=(0,D.s)("ej");D.u.wf=(0,D.q)("ej");D.u.Ca=(0,D.s)("Me");(0,D.ca)("DvtBaseDiagramNode.prototype.isSelected",D.Sp.prototype.Ca);D.u=D.Sp.prototype;D.u.jb=(0,D.q)("Me");D.u.Jf=(0,D.q)("FG");D.u.Aa=function(){return this.ga().ar()&&this.FG};D.u.mT=(0,D.q)("be");D.u.WLa=(0,D.s)("be");
D.u.pw=function(a){this.kj=a;var b=this.Oa,c=this.od();this.Ld();b&&(a=(0,D.Tp)(c,a,this.li),b.za(a))};D.u.Qv=(0,D.s)("kj");D.u.ws=function(a){this.li=a;var b=this.Oa,c=this.od();this.Ld();b&&(a=(0,D.Tp)(c,this.kj,a),b.za(a))};D.u.Rv=(0,D.s)("li");D.Tp=function(a,b,c){var d=new D.dj;null!=b&&(c&&d.translate(-c.x,-c.y),d.rotate(b),c&&d.translate(c.x,c.y));a&&d.translate(a.x,a.y);return d};D.u=D.Sp.prototype;
D.u.Hw=function(a,b,c){c?((0,D.T)(c,"typeNumber",this,this.N,this.I,a),(0,D.T)(c,"typeNumber",this,this.M,this.O,b)):(0,D.kk)(this,a,b)};D.u.zd=(0,D.ba)(null);D.u.Ce=function(a){var b=this.Ef(a);a=(0,D.af)(this,new D.E(b.x,b.y));b=(0,D.af)(this,new D.E(b.x+b.e,b.y+b.g));return new D.z(a.x,a.y,b.x-a.x,b.y-a.y)};D.u.wj=function(){return this.ta()};D.u.Ud=(0,D.j)();D.u.ic=(0,D.j)();D.u.oc=(0,D.j)();D.u.Lc=(0,D.ba)(null);D.Up=function(a,b){a.mn||(a.mn=[]);a.mn.push(b)};
D.Vp=function(a,b){a.Pj||(a.Pj=[]);a.Pj.push(b)};
D.Wp=function(a,b,c){this.Init(a,b,c)};(0,D.ca)("DvtDiagram",D.Wp);D.w.l(D.Wp,D.gp,"DvtDiagram");D.Wp.prototype.Init=function(a,b,c){D.Wp.o.Init.call(this,a,b,c);this.pf=new D.Xp;this.fb=new D.Yp(a,this.Od,this);this.fb.le(this);(0,D.Gf)()||(0,D.tj)(this.fb,new D.Zp(this,this.fb));this.ib={};this.pl=[];this.sc={};this.Lu=[];this.wm=0};D.Wp.newInstance=function(a,b,c){return new D.Wp(a,b,c)};D.u=D.Wp.prototype;
D.u.KI=function(){!this.tq&&this.we&&("none"!=this.CJ&&(this.ln={id:this.getId(),getId:(0,D.s)("id"),options:this.q(),getOptions:(0,D.s)("options"),panZoomMatrix:this.da.ba.ua(),getPanZoomMatrix:(0,D.s)("panZoomMatrix"),nodes:this.ib?(0,D.$p)(this):[],links:this.sc?(0,D.aq)(this):[],getNodes:(0,D.s)("nodes"),getLinks:(0,D.s)("links")},this.ln.q=this.ln.getOptions,this.ln.YJa=this.ln.getPanZoomMatrix,this.ln.getId=this.ln.getId,this.ln.vra=this.ln.getNodes,this.ln.jra=this.ln.getLinks),this.we=!1,
this.GK=this.da);this.tq||this.j3()};D.u.j3=function(){this.Bl=new D.B(this.j());this.Th=new D.B(this.j());this.Ot=new D.B(this.j());this.ib={};this.pl=[];this.sc={};this.Lu=[];this.px=null};D.u.yq=function(){this.lf&&(this.removeChild(this.lf),this.lf.Q());this.lf=null;this.Sa&&(this.Sa=null,this.la().le(this))};
D.u.ff=function(a,b){var c=new D.gn(this.j(),null,a.xa()),d=b.YJa(),e=this.da.ba.ua();d.Xc(e)||(this.da.ba.za(d),(0,D.T)(c.J,"typeMatrix",this.da.ba,this.da.ba.ua,this.da.ba.za,e));(0,D.Km)(a,b.vra(),this.ib?(0,D.$p)(this):[]);(0,D.Km)(a,b.jra(),this.sc?(0,D.aq)(this):[]);a.add(c,1)};
D.u.cq=function(a){var b=!1;if(!this.we&&!this.tq){var c=this.q().nodes;if(c)for(var d=0;d<c.length;d++){var e=c[d],e=D.kl.bd(e,this.q().styleDefaults.nodeDefaults),e=new D.bq(this.j(),this,e),f=e.getId();e.Uba()?this.pl.push(f):(e.P(this.Th),this.pl.push(f),this.ib[f]=e)}if(c=this.q().links)for(d=0;d<c.length;d++){var e=c[d],e=D.kl.bd(e,this.q().styleDefaults.linkDefaults),g=new D.cq(this.j(),this,e),e=g.getId();g.Uba()?this.Lu.push(e):(g.P(this.Bl),this.Lu.push(e),this.sc[e]=g,f=this.K(g.Zc()),
g=this.K(g.gc()),(0,D.Up)(f,e),(0,D.Vp)(g,e))}var c=[],h;for(h in this.ib)c.push(h);b=0===c.length;(0,D.Ml)(this.j(),[this]);this.wm++}if(b)this.wm=this.we?this.wm:this.wm-1,0===this.wm&&(0,D.dq)(this,a,b);else{this.contains(this.GK)||this.k(this.GK);var i=this;this.br(a).then(function(){i.wm=i.we?i.wm:i.wm-1;0===i.wm&&(0,D.dq)(i,a,b)},function(){i.wm=i.we?i.wm:i.wm-1;0===i.wm&&(i.removeChild(i.GK),i.GK=null,i.we=!0)})}};
D.dq=function(a,b,c){var d;if(!c){a.removeChild(a.GK);a.Zz();a.$z();if(d=null==a.Fi)a.Fi=(0,D.vp)(a,b,void 0,void 0);var e=a.da;if(a.we){if(a.tq){var f=a.vw(b,a.Fi),f=g?(0,D.up)(a):f?f:a.Fi;e.zO=!0;e.Go(null,f);e.zO=a.tA}}else{a.vw(b,a.Fi);if(!a.tq){var g=a.fo?!0:!1,f=g?(0,D.up)(a):a.Fi;g&&(e.Iq=0);e.Go(null,f)}e.hi=a.Dt;e.Tn=a.tA;e.zO=a.tA}}a.GK=null;a.we||(a.Sa&&a.Sa.stop(!0),(0,D.Uk)()&&a.YR()&&!a.ln?a.Sa=D.Zk.by(a.j(),a.YR(),a,null,a.xa()):"none"!=a.CJ&&a.ln&&(a.lf=new D.B(a.j(),"Delete Container"),
a.k(a.lf),e=new D.eq(a.j(),a.lf,a.ln,a),(0,D.Km)(e,[a.ln],[a]),a.Sa=e.Nq()),a.Sa?(a.la().Ac(),a.la().ei(a),a.Sa.he(a.yq,a),a.Sa.play()):a.yq());a.we=!0;(0,D.ip)(a,c);a.Dt&&(c=a.Fi,null!=c&&(b=a.da.Bd(b),a.hN(c.x,c.y,c.e,c.g,b)));a.fo=null;a.rK=null;d&&(a.Fi=null)};D.u=D.Wp.prototype;
D.u.ud=function(a){D.Wp.o.ud.call(this,a);(0,D.fq)(this,this.D);this.Dt="none"!=this.D.panning;this.tA="none"!=this.D.zooming;this.QO="hidden";this.CJ=this.D.animationOnDataChange;this.ZW="auto"==this.D.animationOnDisplay?D.Zk.uw:null;this.rw(this.D.selectionMode);this.en=this.D.emptyText?this.D.emptyText:(0,D.ik)(this.D,"labelNoData","DvtUtilBundle","NO_DATA")};D.u.fy=function(){var a=this.q().maxZoom,a=(0,window.parseFloat)(a);return 0<a?a:1};
D.u.yD=function(){var a=this.q().minZoom;if(a){var b=(0,window.parseFloat)(a);0<b&&(a=window.Math.min(b,this.fy()));return a}return null};D.u.xa=function(){return(0,D.So)(this.q().styleDefaults.animationDuration)/1E3};D.u.Od=function(a){var b=a.Ta();("categoryRollOver"==b||"categoryRollOut"==b)&&this.Zz();a&&this.dispatchEvent(a)};
D.u.br=function(a){for(var b=this.q().layout,c=(0,D.lp)(this),d={},e=0;e<this.pl.length;e++){var f=this.pl[e];this.K(f)&&(d[f]=!0,c.WG(this.Ds(this.K(f))))}for(var g in this.sc)if(e=this.Mb(g)){var f=e.getData().startNode,h=e.getData().endNode;d[f]&&d[h]&&(0,D.gq)(c,this.oB(e,f,h))}if(b&&"function"==typeof b){var i=this;(b=b(c))||(b={then:function(a){a()}});this.M0(0);b.then(function(){1===i.wm&&(i.M0(1),i.mB(c,a,!0))},(0,D.j)());return b}this.xE("DvtDiagram: Layout function is not defined",1)};
D.u.M0=function(a){this.we||(this.Bl.B(a),this.Th.B(a))};D.u.K=function(a){return this.ib[a]};D.u.Mb=function(a){return this.sc[a]};D.u.wI=(0,D.s)("Lu");D.aq=function(a){var b=[],c;for(c in a.sc)b.push(a.sc[c]);return b};D.Wp.prototype.rB=(0,D.s)("pl");D.$p=function(a){var b=[],c;for(c in a.ib)b.push(a.ib[c]);return b};D.u=D.Wp.prototype;
D.u.mh=function(a){D.Wp.o.mh.call(this,a);switch(a.vj()){case "adjustPanConstraints":if(this.Dt){var b=a.qv,c=this.Fi?this.Fi:(0,D.vp)(this,a.J,void 0,void 0);this.hN(c.x,c.y,c.e,c.g,b)}break;case "zoomToFitCalcBounds":this.fo||(c=this.Fi?this.Fi:(0,D.vp)(this,a.J,void 0,void 0),a.UG=c);break;case "zoomed":if(this.q().zoomRenderer&&a.QC!==a.qv)for(b in this.ib){var c=this.K(b),d=a;if(c.u.q().zoomRenderer){var e=c.Ii(d.QC),d=c.Ii(d.qv);(0,D.hq)(c,c.u.q().zoomRenderer,d,e)}}}};D.u.mta=(0,D.j)();
D.u.fM=function(a){var b=[],c;for(c in this.sc){var d=this.Mb(c),e=d.Zc(),f=d.gc();(e==a||f==a)&&d.eb&&b.push(d)}return b};D.u.Fj=function(){return(0,D.P)("DvtUtilBundle","DIAGRAM")};D.u.$z=function(){if(this.D.selection&&this.ar()){var a=[],b;for(b in this.ib)a.push(this.K(b));for(var c in this.sc)a.push(this.Mb(c));(0,D.Cl)(this.jh(),this.D.selection,a)}};
D.u.Zz=function(){this.px&&(this.qR(!1,this.px),this.px=null);var a=this.D.highlightedCategories;if(a){var b="any"==this.D.highlightMatch;this.px={};var c=[],d;for(d in this.ib){var e=this.K(d),f=b?D.H.hu(e.Lc(),a):D.H.uS(e.Lc(),a);f&&(this.px[e.getId()]=e,c.push(e))}d=this.D.nodeHighlightMode;if("node"!=d){f="nodeAndIncomingLinks"==d||"nodeAndLinks"==d;d="nodeAndOutgoingLinks"==d||"nodeAndLinks"==d;for(var e=[],g=0;g<c.length;g++)for(var h=c[g],i=f&&h.Pj?h.Pj:[],i=d&&h.mn?i.concat(h.mn):i,h=0;h<
i.length;h++){var k=i[h];this.px[k]=this.Mb(k);e.push(this.Mb(k))}(0,D.iq)(this,e)}var c=[],l;for(l in this.sc)if(d=this.Mb(l),f=b?D.H.hu(d.Lc(),a):D.H.uS(d.Lc(),a))this.px[d.getId()]=d,c.push(d);"linkAndNodes"==this.D.linkHighlightMode&&(0,D.iq)(this,c);this.qR(!0,this.px)}};D.iq=function(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=d.Zc(),d=d.gc();a.px[e]=a.K(e);a.px[d]=a.K(d)}};
D.Wp.prototype.qR=function(a,b){var c=a?this.D.styleDefaults._highlightAlpha:1;this.Bl.B(c);this.Th.B(c);for(var d in b)a?this.Ot.k(b[d]):b[d]instanceof D.cq?this.Bl.k(b[d]):b[d]instanceof D.bq&&this.Th.k(b[d])};D.Wp.prototype.Ee=function(a){this.D.highlightedCategories=D.kl.Y(a);this.Zz()};D.Wp.prototype.highlight=D.Wp.prototype.Ee;D.Wp.prototype.select=function(a){this.D.selection=D.kl.Y(a);this.$z()};D.Wp.prototype.select=D.Wp.prototype.select;
D.Wp.prototype.Df=function(){this.Ik||(this.Ik=new D.jq(this));return this.Ik};D.Wp.prototype.getAutomation=D.Wp.prototype.Df;D.Wp.prototype.xE=function(a,b){var c=this.q()._logger;if(c)switch(b){case 1:c.error&&c.error(a);break;case 2:c.warn&&c.warn(a);break;case 3:c.info&&c.info(a);break;default:c.log&&c.log(a)}};D.Wp.prototype.rs=function(a,b){var c=this.K(a);c&&c.rs(b)};D.Wp.prototype.processDefaultHoverEffect=D.Wp.prototype.rs;D.Wp.prototype.aB=function(a,b){var c=this.K(a);c&&c.aB(b)};
D.Wp.prototype.processDefaultSelectionEffect=D.Wp.prototype.aB;D.Wp.prototype.kw=function(a,b){var c=this.K(a);c&&c.kw(b)};D.Wp.prototype.processDefaultFocusEffect=D.Wp.prototype.kw;D.Wp.prototype.MM=function(a){var b=this.K(a.getId());b.Iy()||(b.P(this.Th),(0,D.Cp)(a,b))};
D.lq=function(a,b){D.lq.o.constructor.call(this,a,b);this.S6=100;this.u=b};D.w.l(D.lq,D.mq,"DvtDiagramCategoryRolloverHandler");D.lq.prototype.c2=function(a){return D.w.vf(this,function(){this.kJ=!0;this.u.Od(a)})};D.lq.prototype.b2=function(a){return D.w.vf(this,function(){(0,D.nq)(this);this.u.Od(a)})};
D.Xp=function(){this.Init({skyros:D.oq,alta:D.pq})};D.w.l(D.Xp,D.Jj,"DvtDiagramDefaults");
D.oq={skin:"alta",emptyText:null,selectionMode:"none",animationOnDataChange:"none",animationOnDisplay:"none",maxZoom:1,highlightMatch:"all",nodeHighlightMode:"node",linkHighlightMode:"link",panning:"none",touchResponse:"auto",zooming:"none",_statusMessageStyle:new D.F("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"),styleDefaults:{animationDuration:500,hoverBehaviorDelay:200,_highlightAlpha:0.1,nodeDefaults:{labelStyle:'font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;font-weight:bold;font-size:12px;color:#383A47',
hoverInnerColor:"rgb(255,255,255)",hoverOuterColor:"rgba(0,0,0, .3)",selectionColor:"rgb(0,0,0)",icon:{width:10,height:10,fillPattern:"none",shape:"circle"}},linkDefaults:{startConnectorType:"none",endConnectorType:"none",width:1,style:"solid",hoverInnerColor:"rgb(255,255,255)",hoverOuterColor:"rgba(0,0,0, .3)",selectionColor:"rgb(0,0,0)",labelStyle:'font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;font-weight:bold;font-size:12px;color:#383A47',_hitDetectionOffset:4}}};D.pq={};
D.eq=function(a,b,c,d){this.Init(a,b,c,d)};D.w.l(D.eq,D.Jm,"DvtDiagramDataAnimationHandler");D.eq.prototype.Init=function(a,b,c,d){D.eq.o.Init.call(this,a,b);this.NDa=c;this.DPa=d};D.eq.prototype.xa=function(){return(0,D.So)(this.NDa.q().styleDefaults.animationDuration)/1E3};
D.Yp=function(a,b,c){this.Init(a,b,c);this.u=c};D.w.l(D.Yp,D.Lj,"DvtDiagramEventManager");D.u=D.Yp.prototype;D.u.dm=function(a,b,c){a=this.u.q();"dim"==a.hoverBehavior&&(b=b.Lc?b.Lc():[],a.highlightedCategories=c?b.slice():null,c=new D.qm(c?"categoryRollOver":"categoryRollOut",a.highlightedCategories),b=(0,D.So)(a.styleDefaults.hoverBehaviorDelay),this.GB.Od(c,(0,D.$p)(this.u),b,"any"==a.highlightMatch))};D.u.s1=function(a,b){return new D.lq(a,b)};
D.u.Ih=function(a){var b=!0,c=a.keyCode,d=this.dd(),e=d instanceof D.bq?d.$u:null;9!=c&&this.Vw?(e.QL(a),a.preventDefault()):9==c&&e instanceof D.nj?!a.shiftKey&&d.oc()?(d.ic(),e.QL(a),a.preventDefault(),this.Vw=!0):(a.shiftKey&&this.Vw?(this.QI(a,d),a.preventDefault()):(this.Vw&&d.Ud(),b=D.Yp.o.Ih.call(this,a)),this.Vw=!1):b=D.Yp.o.Ih.call(this,a);return b};D.u.Bu=function(){var a=this.u.q();return"none"!==a.panning||"none"!==a.zooming?"touchHold":"touchStart"===a.touchResponse?"touchStart":"auto"};
D.u.pr=function(a){return(0,D.qq)(this,a,"panned")};D.u.Iw=function(a){return"panned"==a?!1:D.Yp.o.Iw.call(this,a)};
D.Zp=function(a,b){this.Init(a,b)};D.w.l(D.Zp,D.Dp,"DvtDiagramKeyboardHandler");D.Zp.prototype.sg=function(a){var b=!1;switch(a.keyCode){case 188:case 190:b=a.altKey?!0:!1;break;default:b=D.Zp.o.sg.call(this,a)}return b};D.Zp.prototype.Ch=function(a){if(9==a.keyCode){var b=this.ea.dd();if(b)return(0,D.di)(a),b;b=(0,D.$p)(this.ga());if(0<b.length)return(0,D.di)(a),this.sD(b)}return D.Zp.o.Ch.call(this,a)};D.Zp.prototype.rE=function(a){return this.ga().K(a)};
D.np={};D.w.l(D.np,D.w,"DvtDiagramLayoutUtils");D.np.aLa=function(a){for(var b=D.np.CJa(a),c=window.Math.max(b.w,b.h),b=a.Ne(),d=a.zp(),e=window.Math.floor(window.Math.sqrt(b)),f=0,f=(f=a.Vi())&&f.padding?f.padding:0<d?c:0.25*c,c=c+f,d=-(window.Math.ceil(b/e)-1)*c/2,f=-(e-1)*c/2,g=0;g<b;g++)D.np.bHa(a.EA(g),d+c*window.Math.floor(g/e),f+c*(g%e))};
D.np.CJa=function(a){for(var b=a.Ne(),c=0,d=0,e=0;e<b;e++){var f=a.EA(e),g=f.yd(),c=window.Math.max(g.w,c),d=window.Math.max(g.h,d);if(f=f.Ld())c=window.Math.max(f.w,c),d=window.Math.max(g.h+f.h,d)}return new D.kp(0,0,c,d)};D.np.bHa=function(a,b,c){var d=a.Ef();a.Cj(new D.rq(b-d.x-0.5*d.w,c-d.y-0.5*d.h));D.np.XMa(a)};D.np.XMa=function(a){var b=a.yd(),c=a.ag(),d=a.Ld();d&&a.Qd(new D.rq(b.x+c.x+0.5*(b.w-d.w),b.y+c.y+b.h))};D.np.ZG=function(a){return void 0===a||null==a?null:new D.kp(a.x,a.y,a.e,a.g)};
D.np.Qpa=function(a){return void 0===a||null==a?null:new D.rq(a.x,a.y)};D.np.gHa=function(a){return a?new D.z(a.x,a.y,a.w,a.h):null};D.np.Ppa=function(a){return a?new D.E(a.x,a.y):null};
D.cq=function(a,b,c){this.Init(a,b,c)};D.w.l(D.cq,D.Hp,"DvtDiagramLink");D.u=D.cq.prototype;D.u.Init=function(a,b,c){D.cq.o.Init.call(this,a,c.id,b);this.oa=c;this.u.ar()&&this.setCursor("pointer")};D.u.getData=(0,D.s)("oa");D.u.getId=function(){return this.getData().id};D.u.Zc=function(){return this.getData().startNode};D.u.gc=function(){return this.getData().endNode};D.u.Ld=function(){var a=null;this.Oa&&(a=this.Oa.F());return a};D.u.rH=function(){return this.getData().style};D.u.Sv=function(){return this.getData().width};
D.u.DA=function(){return this.getData().color};D.u.Vq=function(){return this.getData().startConnectorType};D.u.xp=function(){return this.getData().endConnectorType};D.u.mS=function(){if(this.Vq()){var a=this.sb().Yb().Y();a.Ek(0);return D.Jp.TT(null,this.Vq(),null,a,this)}return 0};D.u.TR=function(){if(this.xp()){var a=this.sb().Yb().Y();a.Ek(0);return D.Jp.TT(null,this.xp(),null,a,this)}return 0};
D.u.P=function(a){var b=this.getData(),c=this.Kx;c||(c=["M",0,0,"L",0,0]);var d=b.id,e=b.color,f=b.width,g=b.style;this.Nr=this.pN("#000000",0,b._hitDetectionOffset);this.k(this.Nr);b=new D.I(e,1,f);(0,D.Gf)()&&((0,D.tq)()&&1==(0,D.Fn)())&&(b.Fc=!0);g=D.rp.Xda(g);b.Ek(g,D.rp.Tea(g),D.rp.Uea(g));c=new D.Fh(this.j(),c,d);c.L(null);c.V(b);this.sw(c);this.k(c);b=this.u;c=this.getData();d=(0,D.D)(b.j())?"right":"left";c.label&&(g=c.labelStyle,b=new D.Hf(b.j(),c.label,0,0),b.Ha(new D.F(g)),b.uu(d),b.By("top"),
c=(0,D.uq)((new D.F(c.labelStyle)).getWidth()),0<c&&D.Xe.Qb(b,c,window.Infinity,this)||this.k(b),this.Oa=b);a.k(this);this.Td("img");this.Wm();this.u.la().Fa(this,this)};D.u.jb=function(a){D.cq.o.jb.call(this,a);a?this.Ev(this.yl,!0):this.Gz();this.Wm()};D.u.Aa=function(){return this.ga().ar()&&"off"!=this.getData().selectable};
D.u.Ev=function(a,b){if(a){this.Xh||(this.Xh=this.sb().Yb());var c=this.sb().Yb().Y();c.jr&&c.jr(this.getData().hoverInnerColor);this.sb().V(c);(0,D.Rp)(this.Bg,c);(0,D.Rp)(this.vg,c)}else this.Xh&&(this.sb().V(this.Xh),(0,D.Rp)(this.Bg,this.Xh),(0,D.Rp)(this.vg,this.Xh),this.Xh=null);this.ke||(this.ke=(0,D.Pp)(this,"#000000",1,0),this.Ma(this.ke,0));var c=b?this.getData().selectionColor:this.getData().hoverOuterColor,d=this.ke.Yb().Y();d.jr(c);d.ma(2+this.oE());(0,D.Qp)(this,d,!0);this.ke.V(d,2)};
D.u.Gz=function(){this.Xh&&(this.sb().V(this.Xh),(0,D.Rp)(this.Bg,this.Xh),(0,D.Rp)(this.vg,this.Xh),this.Xh=null);this.ke&&(this.removeChild(this.ke),this.ke.Q&&this.ke.Q(),this.ke=null)};D.u.Ob=function(){this.yl||(this.yl=!0,this.Ev(!0,this.Ca()))};D.u.Db=function(){this.Ca()?this.Ev(!1,!0):this.Gz();this.yl=!1};D.u.Be=function(){var a=this.ga().q().tooltip;return a?(0,D.ap)(this.ga().j().fe(),a,this.up()):this.zc()};D.u.zc=function(){return this.getData().shortDesc};
D.u.up=function(){return{id:this.getId(),type:"link",label:this.getData().label}};D.u.ec=function(){var a=[];this.Aa()&&a.push((0,D.P)("DvtUtilBundle",this.Ca()?"STATE_SELECTED":"STATE_UNSELECTED"));return(0,D.jk)(this.zc(),a)};D.u.Wm=function(){if(!(0,D.$e)()){var a=this.ec();a&&this.Zb("label",a)}};
D.u.zd=function(a){if(32==a.keyCode&&a.ctrlKey)return this;if(38==a.keyCode||40==a.keyCode){var b=this.mK;b||(b=this.ga().K((0,D.vq)(this.ga(),this)));var c=this,d=this.ga().fM(b.getId()),e;(e=this.ga().la().Rf)&&e.p_&&(c=e.p_(b,this,a,d));c.mK=b;return c}return 39==a.keyCode||37==a.keyCode?(a=this.JX(a.keyCode)?this.Zc():this.gc(),this.ga().K(a)):a.type==D.fk?this:null};D.u.JX=function(a){var b=(0,D.Lp)(this),c=(0,D.Mp)(this),b=b.x<c.x?!0:!1;return 39==a&&b||37==a&&!b?!1:!0};
D.u.Ud=function(){this.Ib=!0;this.Ob()};D.u.ic=function(){this.Ib=!1;this.Db()};D.u.oc=(0,D.s)("Ib");D.u.Lc=function(){return this.getData().categories?this.getData().categories:[this.getId()]};D.u.Uba=function(){var a=this.ga().q().hiddenCategories;return a&&D.H.hu(a,this.Lc())||!this.ga().K(this.Zc())||!this.ga().K(this.gc())?!0:!1};
D.u.ff=function(a,b){var c=b.vb(),d=this.vb(),e=new D.gn(this.j(),null,a.xa());D.H.Xc(c,d)||(this.vc(c),c="typePolyline",0<d.length&&(0,window.isNaN)(d[0])&&(c="typePath"),(0,D.T)(e.J,c,this,this.vb,this.vc,d));b.Oa&&this.Oa&&(d=b.Oa.ua(),c=this.Oa.ua(),d.Xc(c)||(this.Oa.za(d),(0,D.T)(e.J,"typeMatrix",this.Oa,this.Oa.ua,this.Oa.za,c)));if(b.sb()&&this.sb()&&(d=b.sb().Yb(),c=this.sb().Yb(),d&&c&&d instanceof D.I&&c instanceof D.I&&(d.rb()!=c.rb()||d.getWidth()!=c.getWidth())))this.sb().V(d),(0,D.T)(e.J,
"typeStroke",this.sb(),this.sb().Yb,this.sb().V,c);a.add(e,1)};D.u.hh=function(a){this.ga().Bl.k(this);var b=this,c=new D.jn(this.j(),this,a.xa());(0,D.cl)(c,function(){b.getParent().removeChild(b);b.Q()});a.add(c,0)};D.u.pg=function(a){this.B(0);a.add(new D.Mm(this.j(),this,a.xa()),2)};D.u.Vi=function(){return this.getData()};
D.Jp={};D.w.l(D.Jp,D.w,"DvtDiagramLinkConnectorUtils");D.Jp.uI="endConnector";D.Jp.NI="startConnector";D.Jp.Qda="arrowOpen";D.Jp.JT="arrow";D.Jp.KT="arrowConcave";D.Jp.Sda="rectangle";D.Jp.Tda="rectangleRounded";D.Jp.Rda="circle";
D.Jp.Zda=function(a,b,c,d,e){if(c)return D.Jp.kua(c,e);c=e.oE();switch(b){case D.Jp.JT:return D.Jp.lua(a,c,e.DA());case D.Jp.KT:return D.Jp.mua(a,c,e.DA());case D.Jp.Qda:return D.Jp.oua(a,c,d);case D.Jp.Rda:return D.Jp.jua(a,c,d);case D.Jp.Sda:return D.Jp.dea(a,c,d);case D.Jp.Tda:return D.Jp.sua(a,c,d)}return null};D.Jp.SI=function(a,b,c,d,e){b=D.Jp.cua(a,c,d,e);a.za(b)};
D.Jp.cua=function(a,b,c,d){var e=-1,f=0,g=0,h=0;c&&(f=c.length,1===d?(2<=f&&(g=c[f-2],h=c[f-1]),4<=f?(e=c[f-4],f=c[f-3]):(e=g-1E-4,f=h)):(2<=f&&(g=c[0],h=c[1]),4<=f?(e=c[2],f=c[3]):(e=g+1E-4,f=h)));c=g;d=h;e=D.Jp.bua(e,f,g,h);g=a.CAa;g||(g=a.ua().Y(),a.CAa=g);h=new D.dj;b&&(b=D.Jp.jka(a),f=a.uc(),a=a.yc(),h.translate(-0.5*b.e*f,-0.5*b.g*a));h.rotate(e);h.translate(c,d);h.concat(g);return h};D.Jp.jka=function(a){var b=a.qAa;b||(b=a.F(),a.qAa=b);return b};
D.Jp.bua=function(a,b,c,d){return window.Math.atan2(d-b,c-a)};D.Jp.mua=function(a,b,c){b=6*D.Jp.JW(b);var d=0.8*b;a=new D.Ln(a,[-0.22*b,-0.5*d,0.78*b,0,-0.22*b,0.5*d,0,0]);a.pa(c);return a};D.Jp.lua=function(a,b,c){b=5*D.Jp.JW(b);var d=0.8*b;a=new D.Ln(a,[0,-0.5*d,b,0,0,0.5*d]);a.pa(c);return a};D.Jp.JW=function(a){if(1>=a)return a;a=0.5*(a-1);return 1+a};
D.Jp.oua=function(a,b,c){b*=3;var d=c.getWidth();a=new D.go(a,[-b+d*window.Math.sqrt(2)/2,-b,d*window.Math.sqrt(2)/2,0,-b+d*window.Math.sqrt(2)/2,b]);a.V(c);a.L(null);return a};D.Jp.Hqa=function(a){return 2*a};D.Jp.Dra=function(a){return 3*a};D.Jp.jua=function(a,b,c){b=D.Jp.Hqa(b);a=new D.Mn(a,b,0,b);a.V(c);a.L(null);return a};D.Jp.dea=function(a,b,c){b=D.Jp.Dra(b);a=new D.C(a,0,-b/2,b,b);a.V(c);a.L(null);return a};D.Jp.sua=function(a,b,c){a=D.Jp.dea(a,b,c);(0,D.wq)(a,b);return a};
D.Jp.kua=function(a,b){var c=(0,D.fi)(b.ga()),d=b.getData().vl;c.Gr=d;c.gB(b,b.ER);d=b.yH();c.Lt=d;return D.x.XH(c,a,b)};D.Jp.TT=function(a,b,c,d,e){if(c)return b=D.Jp.jka(a),a=a.uc(),0.5*b.e*a;a=e.oE();d=d.getWidth();switch(b){case D.Jp.Qda:return d*window.Math.sqrt(2);case D.Jp.JT:return b=D.Jp.JW(a),5*b;case D.Jp.KT:return b=D.Jp.JW(a),0.78*6*b;case D.Jp.Rda:return 2*D.Jp.Hqa(d)+d/2;case D.Jp.Sda:case D.Jp.Tda:return D.Jp.Dra(d)+d/2;default:return 0}};
D.Np=function(a,b,c){D.Np.o.Init.call(this,a);this.Init(a,b,c)};D.w.l(D.Np,D.B,"DvtDiagramLinkUnderlay");D.Np.prototype.Init=function(a,b,c){b||(b=["M",0,0,"L",1,0]);this.mo=c;this.mo||(this.mo=new D.I("#ffffff",1,1));this.iD=new D.Fh(a,b);this.iD.V(c);this.iD.L(null);this.k(this.iD);this.C$=this.Pt=this.D$=this.Qt=null};D.Op=function(a,b,c,d,e,f){a=D.Jp.Zda(a.j(),c,d,a.mo,e);D.Jp.SI(a,0,d,b,f);return a};
D.Np.prototype.V=function(a,b){this.mo=a;(0,D.Gf)()&&((0,D.tq)()&&1==(0,D.Fn)())&&(a.Fc=!0);this.iD.V(a);if(this.Qt){var c=a.Y();c.Ek(0);c.Fc=!1;if(this.D$==D.Jp.JT||this.D$==D.Jp.KT)c.ma(b),this.Qt.pa(a.rb());this.Qt.V(c)}if(this.Pt){c=a.Y();c.Ek(0);c.Fc=!1;if(this.C$==D.Jp.JT||this.C$==D.Jp.KT)c.ma(b),this.Pt.pa(a.rb());this.Pt.V(c)}};D.Np.prototype.Yb=(0,D.s)("mo");
D.rp={};D.w.l(D.rp,D.w,"DvtDiagramLinkUtils");D.rp.Xda=function(a){var b=0;switch(a){case "dash":b=1;break;case "dot":b=2;break;case "dashDot":b=3}return b};D.rp.Tea=function(a,b){if(0==a)return null;if(1==a)return b?"8,2":"6,4";if(2==a)return b?"4,1":"2,3";if(3==a)return b?"10,1,4,1":"8,3,2,3"};D.rp.Uea=function(a,b){return b&&0!=a?1:null};D.rp.NT=function(a){var b=[];if(a)for(var c=0;c<a.length;c+=2)0==c?b.push("M"):b.push("L"),b.push(a[c]),b.push(a[c+1]);return b};
D.rp.Yda=function(a){var b=[];if(a)for(var c=0;c<a.length;c++)(0,window.isNaN)(a[c])||b.push(a[c]);return b};D.rp.lU=function(a){return a&&0<a.length?(0,window.isNaN)(a[0]):!1};D.rp.V1=function(a){var b=[];a=D.rp.lU(a)?D.rp.Yda(a):a;for(var c=0;c<a.length;c+=2)b.push(new D.E(a[c],a[c+1]));return b};
D.bq=function(a,b,c){this.Init(a,b,c)};D.w.l(D.bq,D.Sp,"DvtDiagramNode");D.u=D.bq.prototype;D.u.Init=function(a,b,c){D.bq.o.Init.call(this,a,c.id,b);this.oa=c;this.u.ar()&&this.setCursor("pointer")};D.u.getData=(0,D.s)("oa");D.u.getId=function(){return this.oa.id};D.u.Ef=(0,D.s)("wJ");D.u.Ld=function(){var a=null;this.Oa&&(a=this.tx?this.tx:this.Oa.F());return a};
D.u.jb=function(a){var b=this.Ii();D.bq.o.jb.call(this,a);this.u.q().selectionRenderer?(0,D.hq)(this,this.u.q().selectionRenderer,this.Ii(),b):this.aB(a);this.Wm()};D.u.aB=function(a){this.xo()&&this.xo().jb(a)};D.u.Aa=function(){return this.ga().ar()&&"off"!=this.getData().selectable};D.u.wN=(0,D.s)("G");
D.u.P=function(a){if(this.u.q().renderer)(0,D.hq)(this,this.u.q().renderer,this.Ii(),null);else{var b=this.getData(),c=this.u,d=new D.F(b.backgroundStyle);if(!(0,D.Tf)(d)){var e=(0,D.uq)(d.A("width")),f=(0,D.uq)(d.A("height")),g=d.A("background-color"),h=d.A("border-color"),i=(0,D.uq)(d.A("border-width")),d=(0,D.uq)(d.A("border-radius")),c=new D.C(c.j(),0,0,e,f);c.pa(g);d&&(c.xf(d),c.If(d));h&&c.V(new D.I(h,1,i));this.k(c);this.fI(c);this.Na=c}g=this.u;if(h=b.icon){c=h.width;e=h.height;i=h.color;
g=h.source?new D.Zg(g.j(),c/2,e/2,c,e,h.source,h.sourceSelected,h.sourceHover,h.sourceHoverSelected):new D.$g(g.j(),h.shape,"alta",c/2,e/2,c,e);"none"!=h.fillPattern?g.L(new D.ah(h.fillPattern,i,i)):g.pa(i);h.borderColor&&g.V(new D.I(h.borderColor,h.borderWidth));this.k(g);this.G=g;if(this.Na){var h=b.icon,i=this.Na.getWidth(),c=this.Na.getHeight(),e=h.width,f=h.height,d=0.5*(i-e),k=0.5*(c-f);if(void 0!==h.positionX)d=(0,window.parseFloat)(h.positionX),(0,D.D)(this.j())&&(d=i-d-e);else{var l=h.halign;
"start"==l?l=(0,D.D)(this.j())?"right":"left":"end"==l&&(l=(0,D.D)(this.j())?"left":"right");d="left"==l?0:"right"==l?i-e:d}void 0!==h.positionY?k=(0,window.parseFloat)(h.positionY):"top"==h.valign?k=0:"bottom"==h.valign&&(k=c-f);(0,D.kk)(this.G,d,k)}this.Na||this.fI(g)}i=this.u;g=(0,D.D)(i.j())?"right":"left";b.label&&(h=b.labelStyle,i=new D.Hf(i.j(),b.label,0,0),i.Ha(new D.F(h)),i.uu(g),i.By("top"),g=(0,D.uq)((new D.F(b.labelStyle)).getWidth()),0<g&&D.Xe.Qb(i,g,window.Infinity,this)||this.k(i),
this.Oa=i);(0,D.xq)(this.xo(),b)}a.k(this);a=null;this.$u?(b=this.F())&&(a=new D.z(b.x,b.y,b.e-b.x,b.g-b.y)):(a=this.Na?this.Na.pE(this):null)&&this.G?a=(0,D.so)(a,this.G.pE(this)):!a&&this.G&&(a=this.G.pE(this));this.wJ=a;this.Td("img");this.Wm();this.u.la().Fa(this,this)};
D.hq=function(a,b,c,d){var e=a.u.q()._contextHandler;if(e){var f=a.getData();c=e(a.ta(),a.$u,f,c,d);b=b(c);a.$u&&b!=a.$u&&(a.$u.namespaceURI===D.A.TN?(0,D.yq)(a).removeChild(a.$u):a.removeChild(b),a.$u=null);b&&b.namespaceURI===D.A.TN?a.$u||(D.A.xd((0,D.yq)(a),b),a.$u=b):b instanceof D.nj?a.$u||(a.k(b),a.$u=b):b&&a.u.xE("DvtDiagram: could not add custom node content for the node "+a.getId()+b,1)}else a.u.xE("DvtDiagram: could not add custom node content - context handler is undefined",1)};
D.xq=function(a,b){var c=b.hoverInnerColor,d=b.hoverOuterColor,e=b.selectionColor,f=new D.I(c,1,4);f.Fc=!0;d=new D.I(d,1,8);d.Fc=!0;var g=new D.I(e,1,2);g.Fc=!0;var h=new D.I(e,1,4);h.Fc=!0;c=new D.I(c,1,4);c.Fc=!0;e=new D.I(e,1,8);e.Fc=!0;a.Np(f,d).Pp(g,h).kr(c,e)};D.u=D.bq.prototype;D.u.fI=(0,D.q)("GG");D.u.xo=function(){if(!this.GG&&this.wJ){var a=new D.C(this.u.j(),this.wJ.x,this.wJ.y,this.wJ.e,this.wJ.g);(0,D.si)(a);this.fI(a);this.Ma(a,0);(0,D.xq)(a,this.getData());this.GG=a}return this.GG};
D.u.Ob=function(){var a=this.Ii();this.yl=!0;this.u.q().hoverRenderer?(0,D.hq)(this,this.u.q().hoverRenderer,this.Ii(),a):this.rs(!0)};D.u.Db=function(){var a=this.Ii();this.yl=!1;this.u.q().hoverRenderer?(0,D.hq)(this,this.u.q().hoverRenderer,this.Ii(),a):this.rs(!1)};D.u.rs=function(a){this.xo()&&(a?this.xo().Ob():this.xo().Db())};D.u.Be=function(){var a=this.ga().q().tooltip;return a?(0,D.ap)(this.ga().j().fe(),a,this.up()):this.zc()};D.u.zc=function(){return this.getData().shortDesc};
D.u.up=function(){return{id:this.getId(),type:"node",label:this.getData().label}};D.u.ec=function(){var a=[];this.Aa()&&a.push((0,D.P)("DvtUtilBundle",this.Ca()?"STATE_SELECTED":"STATE_UNSELECTED"));return(0,D.jk)(this.zc(),a)};D.u.Wm=function(){if(!(0,D.$e)()){var a=this.ec();a&&this.Zb("label",a)}};
D.u.zd=function(a){var b=null;if(32==a.keyCode&&a.ctrlKey)b=this;else if(a.altKey){var c=this.ga().fM(this.getId()),d;(d=this.ga().la().Rf)&&d.b_&&(b=d.b_(this,a,c));b?b.mK=this:b=this}else a.type==D.fk?b=this:(b=(0,D.$p)(this.ga()),b=(0,D.Am)(this,a,b));return b};D.u.Ud=function(){var a=this.Ii();this.Ib=!0;this.u.q().focusRenderer?(0,D.hq)(this,this.u.q().focusRenderer,this.Ii(),a):this.kw(!0)};
D.u.ic=function(){this.oc()&&(this.Ii(),this.Ib=!1,this.u.q().focusRenderer?(0,D.hq)(this,this.u.q().focusRenderer,this.getData(),this.Ii()):this.kw(!1))};D.u.kw=function(a){this.rs(a)};D.u.oc=(0,D.s)("Ib");D.u.Lc=function(){return this.getData().categories?this.getData().categories:[this.getId()]};D.u.Uba=function(){var a=this.ga().q().hiddenCategories;return a&&D.H.hu(a,this.Lc())?!0:!1};
D.u.ff=function(a,b){var c=new D.gn(this.j(),null,a.xa()),d=b.N(),e=b.M(),f=this.N(),g=this.M();d!=f&&(this.I(d),(0,D.T)(c.J,"typeNumber",this,this.N,this.I,f));e!=g&&(this.O(e),(0,D.T)(c.J,"typeNumber",this,this.M,this.O,g));b.G&&this.G&&((0,D.T)(c.J,"typeRectangle",this.G,this.G.Xt,this.G.eB,this.G.Xt()),this.G.eB(b.G.Xt()));b.Oa&&this.Oa&&(d=b.Oa.ua(),e=this.Oa.ua(),d.Xc(e)||(this.Oa.za(d),(0,D.T)(c.J,"typeMatrix",this.Oa,this.Oa.ua,this.Oa.za,e)));(0,D.zq)(c,b.Na,this.Na);(0,D.zq)(c,b.G,this.G);
a.add(c,1)};D.zq=function(a,b,c){b&&c&&((0,D.T)(a.J,"typeFill",c,c.Rb,c.L,c.Rb()),c.L(b.Rb()))};D.bq.prototype.hh=function(a){this.ga().Th.k(this);var b=this,c=new D.jn(this.j(),this,a.xa());(0,D.cl)(c,function(){b.getParent().removeChild(b);b.Q()});a.add(c,0)};D.bq.prototype.pg=function(a){this.B(0);a.add(new D.Mm(this.j(),this,a.xa()),2)};D.bq.prototype.Vi=function(){return this.getData()};D.bq.prototype.Ii=function(a){return{hovered:this.yl,selected:this.Ca(),focused:this.Ib,zoom:a?a:this.ga().da.Bd()}};
D.jq=function(a){this.Init(a)};(0,D.ca)("DvtDiagramAutomation",D.jq);D.w.l(D.jq,D.zj,"DvtDiagramAutomation");D.jq.prototype.Init=(0,D.q)("u");D.jq.prototype.ol=function(a){return(a=(0,D.Aj)(this.u.la(),a))&&a instanceof D.bq?"node["+this.u.rB().indexOf(a.getId())+"]":a&&a instanceof D.cq?"link["+this.u.wI().indexOf(a.getId())+"]":null};
D.jq.prototype.Ff=function(a){if("tooltip"==a)return(0,D.Tl)(this.u);var b=this.uG(a);a=b.component;var b=b.index,c=null;"node"==a?c=this.sh(b):"link"==a&&(c=(0,D.kq)(this,b));return c?c.ta():null};D.jq.prototype.getDomElementForSubId=D.jq.prototype.Ff;D.jq.prototype.uG=function(a){var b=a,c=-1,d=a.substring(0,a.indexOf("["));d&&(b="node"==d||"link"==d?d:null,c=(0,window.parseInt)(a.substring(a.indexOf("[")+1,a.indexOf("]"))));return{component:b,index:c}};D.jq.prototype.Ne=function(){return this.u.Ne()};
D.jq.prototype.getNodeCount=D.jq.prototype.Ne;D.jq.prototype.zp=function(){return this.u.zp()};D.jq.prototype.getLinkCount=D.jq.prototype.zp;D.jq.prototype.Nb=function(a){if(a=this.sh(a)){var b={};b.id=a.getId();b.selected=a.Ca();b.tooltip=a.zc();b.label=a.getData().label;b.background=a.getData().backgroundStyle;b.icon=this.uP(a.wN());return b}return null};D.jq.prototype.getNode=D.jq.prototype.Nb;
D.jq.prototype.ZL=function(a){if(a=(0,D.kq)(this,a)){var b={};b.id=a.getId();b.selected=a.Ca();b.tooltip=a.zc();b.label=a.getData().label;b.color=a.DA();b.width=a.Sv();b.style=a.rH();b.startNode=a.Zc();b.endNode=a.gc();b.startConnectorType=a.Vq();b.endConnectorType=a.xp();return b}return null};D.jq.prototype.getLink=D.jq.prototype.ZL;D.jq.prototype.uP=function(a){if(a){var b={};b.shape=a instanceof D.$g?a.Ta():"none";a.Rb()&&(b.color=a.Rb().rb());return b}return null};
D.jq.prototype.sh=function(a){var b=this.u.rB();return 0<=a&&a<b.length?this.u.K(b[a]):null};D.kq=function(a,b){var c=a.u.wI();return 0<=b&&b<c.length?a.u.Mb(c[b]):null};

  return D;
});