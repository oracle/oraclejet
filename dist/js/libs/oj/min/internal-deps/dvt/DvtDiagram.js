/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(['./DvtToolkit', './DvtPanZoomCanvas'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.

  // Map the D namespace to dvt, which is used to provide access across partitions.
  var D = dvt;
  
D.gp=function(a){this.Init(a)};(0,D.ca)("DvtDiagramLayoutContext",D.gp);D.w.l(D.gp,D.w,"DvtDiagramLayoutContext");
D.gp.prototype.Init=function(a){this.mf=a?a.mf:null;this.gn=a?a.gn:null;this.Vr=a?a.Vr:0;this.OP=a?a.OP:0;this.wr=a?a.wr:!1;this.d5=a?a.d5:null;this.ze=a?a.ze:null;this.Wu=a?a.Wu:null;this.tg=a?a.tg:null;this.ib={};this.sc={};this.Wy=[];this.dO=[];if(a){for(var b=0;b<this.Vr;b++){var c=new D.jp(a.Wy[b]);this.Wy.push(c);this.ib[c.getId()]=c}for(var d in a.ib)this.ib[d]||(this.ib[d]=new D.jp(a.ib[d]));for(b=0;b<this.OP;b++)c=new D.mp(a.dO[b]),this.dO.push(c),this.sc[c.getId()]=c;for(var e in a.sc)this.sc[e]||
(this.sc[e]=new D.mp(a.sc[e]))}};D.gp.prototype.kl=(0,D.q)("mf");D.gp.prototype.Zd=(0,D.s)("mf");D.gp.prototype.getLayout=D.gp.prototype.Zd;D.gp.prototype.Hn=(0,D.q)("gn");D.gp.prototype.Vi=(0,D.s)("gn");D.gp.prototype.getLayoutAttributes=D.gp.prototype.Vi;D.gp.prototype.RG=function(a){this.K(a.getId())||(this.Vr++,this.Wy.push(a));this.ib[a.getId()]=a};D.gp.prototype.K=function(a){return this.ib[a]};D.gp.prototype.getNodeById=D.gp.prototype.K;D.gp.prototype.BA=function(a){return this.Wy[a]};
D.gp.prototype.getNodeByIndex=D.gp.prototype.BA;D.gp.prototype.Ne=(0,D.s)("Vr");D.gp.prototype.getNodeCount=D.gp.prototype.Ne;D.dq=function(a,b){a.Mb(b.getId())||(a.OP++,a.dO.push(b));a.sc[b.getId()]=b};D.gp.prototype.Mb=function(a){return this.sc[a]};D.gp.prototype.getLinkById=D.gp.prototype.Mb;D.gp.prototype.tD=function(a){return this.dO[a]};D.gp.prototype.getLinkByIndex=D.gp.prototype.tD;D.gp.prototype.yp=(0,D.s)("OP");D.gp.prototype.getLinkCount=D.gp.prototype.yp;
D.gp.prototype.yMa=function(a,b){for(var c=b,d=new D.oq(0,0);c;)if(d.x+=c.n1.x+c.ag().x,d.y+=c.n1.y+c.ag().y,c=c.Wu){if((c=this.K(c))&&c.Pa()){var e=c.sp();e&&(d.x+=e.left,d.y+=e.top)}}else c=null;return new D.oq(a.x+d.x,a.y+d.y)};D.gp.prototype.localToGlobal=D.gp.prototype.yMa;D.gp.prototype.$La=(0,D.s)("wr");D.gp.prototype.isLocaleR2L=D.gp.prototype.$La;D.gp.prototype.AIa=(0,D.s)("d5");D.gp.prototype.getComponentSize=D.gp.prototype.AIa;D.gp.prototype.FNa=(0,D.q)("ze");
D.gp.prototype.setViewport=D.gp.prototype.FNa;D.gp.prototype.BD=(0,D.s)("ze");D.gp.prototype.getViewport=D.gp.prototype.BD;D.gp.prototype.Q0=(0,D.q)("Wu");D.gp.prototype.Iaa=(0,D.s)("Wu");D.gp.prototype.getContainerId=D.gp.prototype.Iaa;D.gp.prototype.cB=function(a,b,c,d){this.Wu&&(this.tg={},"number"===typeof a||"string"===typeof a||(d=a.left,b=a.right,c=a.bottom,a=a.top),this.tg.top=a,this.tg.right=b,this.tg.bottom=c,this.tg.left=d)};D.gp.prototype.setContainerPadding=D.gp.prototype.cB;
D.gp.prototype.sp=(0,D.s)("tg");D.gp.prototype.getContainerPadding=D.gp.prototype.sp;D.gp.prototype.CIa=(0,D.s)("xJ");D.gp.prototype.getCurrentViewport=D.gp.prototype.CIa;
D.mp=function(a){this.Init(a)};(0,D.ca)("DvtDiagramLayoutContextLink",D.mp);D.w.l(D.mp,D.w,"DvtDiagramLayoutContextLink");D.mp.prototype.Init=function(a){this.Xa=a?a.Xa:null;this.kL=a?a.kL:null;this.JJ=a?a.JJ:null;this.Vh=a?a.Vh:null;this.HF=a?a.HF:null;this.GF=a?a.GF:null;this.gn=a?a.gn:null;this.i$=a?a.i$:0;this.c6=a?a.c6:0;this.PF=a?a.PF:1;this.Me=a?a.Me:!1;this.kj=a?a.kj:null;this.li=a?a.li:null;this.Us=a?a.Us:!1};D.mp.prototype.setId=(0,D.q)("Xa");D.mp.prototype.getId=(0,D.s)("Xa");
D.mp.prototype.getId=D.mp.prototype.getId;D.mp.prototype.WM=(0,D.q)("kL");D.mp.prototype.Zc=(0,D.s)("kL");D.mp.prototype.getStartId=D.mp.prototype.Zc;D.mp.prototype.NM=(0,D.q)("JJ");D.mp.prototype.gc=(0,D.s)("JJ");D.mp.prototype.getEndId=D.mp.prototype.gc;D.mp.prototype.vc=function(a){this.Vh="string"==typeof a?D.N.wR(a):a};D.mp.prototype.setPoints=D.mp.prototype.vc;D.mp.prototype.vb=(0,D.s)("Vh");D.mp.prototype.getPoints=D.mp.prototype.vb;D.mp.prototype.Qd=(0,D.q)("HF");
D.mp.prototype.setLabelPosition=D.mp.prototype.Qd;D.mp.prototype.od=(0,D.s)("HF");D.mp.prototype.getLabelPosition=D.mp.prototype.od;D.mp.prototype.Gn=(0,D.q)("GF");D.mp.prototype.Ld=(0,D.s)("GF");D.mp.prototype.getLabelBounds=D.mp.prototype.Ld;D.mp.prototype.kS=(0,D.s)("i$");D.mp.prototype.getStartConnectorOffset=D.mp.prototype.kS;D.mp.prototype.RR=(0,D.s)("c6");D.mp.prototype.getEndConnectorOffset=D.mp.prototype.RR;D.mp.prototype.ZD=(0,D.q)("PF");D.mp.prototype.Qv=(0,D.s)("PF");
D.mp.prototype.getLinkWidth=D.mp.prototype.Qv;D.mp.prototype.Hn=(0,D.q)("gn");D.mp.prototype.Vi=(0,D.s)("gn");D.mp.prototype.getLayoutAttributes=D.mp.prototype.Vi;D.mp.prototype.jb=(0,D.q)("Me");D.mp.prototype.oba=(0,D.s)("Me");D.mp.prototype.getSelected=D.mp.prototype.oba;D.mp.prototype.nw=(0,D.q)("kj");D.mp.prototype.setLabelRotationAngle=D.mp.prototype.nw;D.mp.prototype.Ov=(0,D.s)("kj");D.mp.prototype.getLabelRotationAngle=D.mp.prototype.Ov;D.mp.prototype.us=(0,D.q)("li");
D.mp.prototype.setLabelRotationPoint=D.mp.prototype.us;D.mp.prototype.Pv=(0,D.s)("li");D.mp.prototype.getLabelRotationPoint=D.mp.prototype.Pv;D.mp.prototype.cE=(0,D.q)("Us");D.mp.prototype.ny=(0,D.s)("Us");
D.jp=function(a){this.Init(a)};(0,D.ca)("DvtDiagramLayoutContextNode",D.jp);D.w.l(D.jp,D.w,"DvtDiagramLayoutContextNode");
D.jp.prototype.Init=function(a){this.Xa=a?a.Xa:null;this.Hc=a?a.Hc:null;this.LO=a?a.LO:null;this.UC=a?a.UC:null;this.HF=a?a.HF:null;this.GF=a?a.GF:null;this.gn=a?a.gn:null;this.x4=a?a.x4:!1;this.Wu=a?a.Wu:null;this.Me=a?a.Me:!1;this.kj=a?a.kj:null;this.li=a?a.li:null;this.tg=a?a.tg:null;this.Wr=a?a.Wr:null;this.yq=a?a.yq:null;this.ej=a?a.ej:!1;this.dN=a?a.ga():null;this.Gy=!0;this.n1=new D.oq(0,0)};D.jp.prototype.setId=(0,D.q)("Xa");D.jp.prototype.getId=(0,D.s)("Xa");D.jp.prototype.getId=D.jp.prototype.getId;
D.jp.prototype.M0=function(a){this.Wr=this.Hc=a};D.jp.prototype.yd=function(){!this.Gy&&this.dN&&this.dN.JM(this);return this.Hc};D.jp.prototype.getBounds=D.jp.prototype.yd;D.jp.prototype.Ef=function(){!this.Gy&&this.dN&&this.dN.JM(this);return this.LO};D.jp.prototype.getContentBounds=D.jp.prototype.Ef;D.jp.prototype.Cj=function(a){this.UC=a;(0,D.pq)(this,this)};D.jp.prototype.setPosition=D.jp.prototype.Cj;D.jp.prototype.ag=(0,D.s)("UC");D.jp.prototype.getPosition=D.jp.prototype.ag;
D.jp.prototype.Qd=(0,D.q)("HF");D.jp.prototype.setLabelPosition=D.jp.prototype.Qd;D.jp.prototype.od=(0,D.s)("HF");D.jp.prototype.getLabelPosition=D.jp.prototype.od;D.jp.prototype.Gn=(0,D.q)("GF");D.jp.prototype.Ld=(0,D.s)("GF");D.jp.prototype.getLabelBounds=D.jp.prototype.Ld;D.jp.prototype.Hn=(0,D.q)("gn");D.jp.prototype.Vi=(0,D.s)("gn");D.jp.prototype.getLayoutAttributes=D.jp.prototype.Vi;D.jp.prototype.xy=(0,D.q)("x4");D.jp.prototype.EH=(0,D.s)("x4");D.jp.prototype.isReadOnly=D.jp.prototype.EH;
D.jp.prototype.Q0=(0,D.q)("Wu");D.jp.prototype.Iaa=(0,D.s)("Wu");D.jp.prototype.getContainerId=D.jp.prototype.Iaa;D.jp.prototype.jb=(0,D.q)("Me");D.jp.prototype.oba=(0,D.s)("Me");D.jp.prototype.getSelected=D.jp.prototype.oba;D.jp.prototype.nw=(0,D.q)("kj");D.jp.prototype.setLabelRotationAngle=D.jp.prototype.nw;D.jp.prototype.Ov=(0,D.s)("kj");D.jp.prototype.getLabelRotationAngle=D.jp.prototype.Ov;D.jp.prototype.us=(0,D.q)("li");D.jp.prototype.setLabelRotationPoint=D.jp.prototype.us;
D.jp.prototype.Pv=(0,D.s)("li");D.jp.prototype.getLabelRotationPoint=D.jp.prototype.Pv;D.jp.prototype.cB=function(a,b,c,d){this.Pa()&&(this.tg={},"number"===typeof a||"string"===typeof a||(d=a.left,b=a.right,c=a.bottom,a=a.top),this.tg.top=a,this.tg.right=b,this.tg.bottom=c,this.tg.left=d,this.Wr&&(this.Hc=new D.hp(this.Wr.x,this.Wr.y,this.Wr.w+d+b,this.Wr.h+a+c)),this.yq&&(this.LO=new D.hp(this.yq.x,this.yq.y,this.yq.w+d+b,this.yq.h+a+c)))};D.jp.prototype.setContainerPadding=D.jp.prototype.cB;
D.jp.prototype.sp=(0,D.s)("tg");D.jp.prototype.getContainerPadding=D.jp.prototype.sp;D.jp.prototype.wf=(0,D.q)("ej");D.jp.prototype.Pa=(0,D.s)("ej");D.jp.prototype.isDisclosed=D.jp.prototype.Pa;D.jp.prototype.O0=(0,D.q)("sAa");D.jp.prototype.xc=(0,D.s)("sAa");D.jp.prototype.getChildNodes=D.jp.prototype.xc;D.jp.prototype.UM=(0,D.q)("Hx");D.jp.prototype.Ol=(0,D.s)("Hx");D.jp.prototype.getParentNode=D.jp.prototype.Ol;D.pq=function(a,b){var c=b.Ol();c&&c.Gy&&(c.Gy=!1,(0,D.pq)(a,c))};
D.oq=function(a,b){this.Init(a,b)};(0,D.ca)("DvtDiagramPoint",D.oq);D.w.l(D.oq,D.w,"DvtDiagramPoint");D.oq.prototype.Init=function(a,b){this.x=null===a||(0,window.isNaN)(a)?0:a;this.y=null===b||(0,window.isNaN)(b)?0:b};
D.hp=function(a,b,c,d){this.Init(a,b,c,d)};(0,D.ca)("DvtDiagramRectangle",D.hp);D.w.l(D.hp,D.w,"DvtDiagramRectangle");D.hp.prototype.Init=function(a,b,c,d){this.x=null===a||(0,window.isNaN)(a)?0:a;this.y=null===b||(0,window.isNaN)(b)?0:b;this.w=null===c||(0,window.isNaN)(c)?0:c;this.h=null===d||(0,window.isNaN)(d)?0:d};
D.dp=function(a,b,c){this.Init(a,b,c)};(0,D.ca)("DvtBaseDiagram",D.dp);D.w.l(D.dp,D.ep,"DvtBaseDiagram");D.u=D.dp.prototype;D.u.Init=function(a,b,c){D.dp.o.Init.call(this,a,b,c);this.j().Jc.ta().setAttributeNS(null,"text-rendering","geometricPrecision");this.J7;this.oK=this.eo=null;this.XW;this.t4=!0;this.Bl=new D.B(a);this.Th=new D.B(a);this.Mt=new D.B(a);this.Uy=0.5;this.Efa()};D.u.BN=function(){var a=this.da;a.ow(this.vD());a.vu(this.by());a.mw(this.xa());a.ba.k(this.Bl);a.ba.k(this.Th);a.ba.k(this.Mt)};
D.u.mw=function(a){this.Uy=a;this.da&&this.da.mw(a)};D.u.xa=(0,D.s)("Uy");D.u.vu=function(a){this.mv=a;this.da&&this.da.vu(a)};D.u.by=(0,D.s)("mv");D.u.ow=function(a){this.xt=a;this.da&&this.da.ow(a)};D.u.vD=(0,D.s)("xt");D.u.Efa=function(){this.vu(2);this.ow(0)};D.u.Gj=function(){this.XJ||(D.dp.o.Gj.call(this),this.BN(),this.bq());this.XJ=!1};D.u.bq=(0,D.j)();D.u.K=(0,D.ba)(null);D.u.Mb=(0,D.ba)(null);D.u.rI=function(){return[]};D.u.oB=function(){return[]};D.u.Ne=function(){return this.oB().length};
D.dp.prototype.getNodeCount=D.dp.prototype.Ne;D.dp.prototype.yp=function(){return this.rI().length};D.dp.prototype.getLinkCount=D.dp.prototype.yp;D.fp=function(a,b){if(b&&a.qD())a.kC?(a.kC.ca(a.Ga/2),a.kC.va(a.Ua/2),D.Ve.Qb(a.kC,a.getWidth()-2*D.Ve.L1,window.Infinity,a)):a.kC=a.Zda(a.qD());else if(a.kC){var c=a.kC.getParent();c&&c.removeChild(a.kC);a.kC=null}};D.u=D.dp.prototype;D.u.Zda=function(a){var b=this.q();return D.Ve.Lm(this,a,new D.y(0,0,this.getWidth(),this.getHeight()),this.la(),b._statusMessageStyle)};
D.u.qD=(0,D.s)("en");D.u.WR=(0,D.s)("XW");D.u.jh=(0,D.s)("Hb");D.u.pw=function(a){this.Hb="single"==a?new D.Tk("s"):"multiple"==a?new D.Tk("m"):null;this.la().wu(this.Hb)};D.u.Pl=function(){return this.Hb?this.Hb.Ta():null};D.u.$q=function(){return this.Hb?!0:!1};D.u.la=(0,D.s)("fb");D.ip=function(a){var b=new D.gp,c=(0,D.D)(a.j());b.wr=c;a=new D.hp(0,0,a.getWidth(),a.getHeight());b.d5=a;return b};
D.dp.prototype.Bs=function(a,b,c){var d=new D.jp;d.setId(a.getId?a.getId():a.getData().getId());d.M0(D.kp.UG(a.$d()));var e=D.kp.UG(a.Ef());d.LO=e;d.yq=e;d.Hn(a.Vi(b));d.Gn(D.kp.UG(a.Ld()));d.Qd(D.kp.Ppa(a.od()));d.jb(!0==a.Ca());if(a.Pa()&&(d.wf(!0),b=(0,D.lp)(a.sp()),d.Pa()&&(d.tg=b)))d.Wr&&(d.Wr=new D.hp(d.Wr.x,d.Wr.y,d.Wr.w-(b.left+b.right),d.Wr.h-(b.top+b.bottom))),d.yq&&(d.yq=new D.hp(d.yq.x,d.yq.y,d.yq.w-(b.left+b.right),d.yq.h-(b.top+b.bottom)));d.Q0(a.getData().UR?a.getData().fd:null);d.dN=
this;d.Gy=!c;return d};D.dp.prototype.lB=function(a,b,c,d){var e=new D.mp;e.setId(a.getId?a.getId():a.getData().getId());e.WM(b?b:a.getData().Zc());e.NM(c?c:a.getData().gc());e.Hn(a.Vi(d));e.Gn(D.kp.UG(a.Ld()));e.Qd(D.kp.Ppa(a.od()));b=a.kS();e.i$=b;b=a.RR();e.c6=b;e.ZD(a.Qv());e.jb(!0==a.Ca());e.cE(!0==a.ny());return e};
D.dp.prototype.jB=function(a,b,c){var d=a.sp();if(d){var e=a.Wu;e&&(e=this.K(e))&&e.cB((0,D.np)(d),b)}for(var e=d=window.Number.MAX_VALUE,f=0;f<a.Ne();f++){var g=a.BA(f),h=this.K(g.getId()),i=g.ag();i&&(d=window.Math.min(d,i.x),e=window.Math.min(e,i.y));h=g.Ld();i=g.od();h&&i&&(d=window.Math.min(d,i.x+h.x),e=window.Math.min(e,i.y+h.y))}for(f=0;f<a.yp();f++){var g=a.tD(f),k=this.Mb(g.getId());if(i=g.vb()){i=D.op.U1(i);for(h=0;h<i.length;h++)var l=i[h],d=window.Math.min(d,l.x),e=window.Math.min(e,l.y)}h=
g.Ld();i=g.od();h&&i&&(d=window.Math.min(d,i.x+h.x),e=window.Math.min(e,i.y+h.y))}e=this.Vda(-d,-e);d=e.x;e=e.y;for(f=0;f<a.Ne();f++){g=a.BA(f);h=this.K(g.getId());(i=g.ag())&&h.Fw(i.x+d,i.y+e,b);var m=g.Ld(),l=g.od();if(m&&l){var i=new D.E(l.x-i.x,l.y-i.y),l=g.kj,n=D.kp.Opa(g.li);b?((0,D.T)(b,"typeRectangle",h,h.Ld,h.Gn,m),h.od()?(0,D.T)(b,"typePoint",h,h.od,h.Qd,i):h.Qd(i),null!=l&&(0,D.T)(b,"typeNumber",h,h.Ov,h.nw,l),n&&(h.li?(0,D.T)(b,"typePoint",h,h.Pv,h.us,n):h.us(n))):(h.Gn(m),h.Qd(i),null!=
l&&h.nw(l),n&&h.us(n))}h.Pa()&&(g=g.sp())&&h.cB((0,D.np)(g),b)}if(!this.cz)for(f=0;f<a.yp();f++){g=a.tD(f);k=this.Mb(g.getId());if(i=g.vb()){0<i.length&&!(0,window.isNaN)(i[0])&&(i=D.op.LT(i));for(var o=[],h=0;h<i.length;)(0,window.isNaN)(i[h])?(o.push(i[h]),h++):(o.push(i[h]+d),o.push(i[h+1]+e),h+=2);b&&k.vb()?0<o.length&&(0,window.isNaN)(o[0])?(h=D.pp.tqa(k.vb(),o),k.vc(h.vda),(0,D.T)(b,"typePath",k,k.vb,k.vc,h.uda),(0,D.al)(b,function(){k.vc(o)})):(0,D.T)(b,"typePolyline",k,k.vb,k.vc,o):k.vc(o)}h=
D.kp.dHa(g.Ld());i=g.od();l=g.kj;n=D.kp.Opa(g.li);h&&i&&(g=new D.E(i.x+d,i.y+e),b?((0,D.T)(b,"typeRectangle",k,k.Ld,k.Gn,h),k.od()?(0,D.T)(b,"typePoint",k,k.od,k.Qd,g):k.Qd(g),null!=l&&(0,D.T)(b,"typeNumber",k,k.Ov,k.nw,l),n&&(k.li?(0,D.T)(b,"typePoint",k,k.Pv,k.us,n):k.us(n))):(k.Gn(h),k.Qd(g),null!=l&&k.nw(l),n&&k.us(n)))}if(b=a.BD())this.eo=new D.y(b.x+d,b.y+e,b.w,b.h),this.oK=a.Wu;c&&(this.J7=new D.E(d,e))};
D.rp=function(a,b){var c;if(a.eo&&(c=new D.y(a.eo.x,a.eo.y,a.eo.e,a.eo.g),a.oK))for(var d=a.K(a.oK);d;){var e=d.N(),f=d.M();if(b){var g=(0,D.qp)(b,d,d.N),h=(0,D.qp)(b,d,d.M);if(g||0==g)e=g;if(h||0==h)f=h}c.x+=e;c.y+=f;d=(d=d.getData().UR?d.getData().fd:null)?a.K(d):null}return c};D.dp.prototype.Vda=function(a,b){return new D.E(a,b)};D.dp.prototype.tw=function(a,b){if(0==this.xt){var c=this.da,d=b?b:(0,D.sp)(this,a,void 0,void 0),e=(0,D.tp)(this,d);c.ow(0.5*window.Math.min(e,c.by()));return d}return null};
D.tp=function(a,b){if(!b)return 0;var c=a.da;return window.Math.min((a.Ga-2*c.Hq)/b.e,(a.Ua-2*c.Hq)/b.g)};
D.sp=function(a,b,c,d){var e=null,f,g,h,i,k=a.da.ba;c||(c=a.oB());for(var l=0;l<c.length;l++)if(f=c[l],(i=a.K(f))&&i.eb&&!i.be){var m=i,n=b;f=m.$d();g=new D.y(f.x,f.y,f.e,f.g);h=null;n&&(h=(0,D.qp)(n,m,m.od));h||(h=m.od());var o=null,p=null;n&&(o=(0,D.qp)(n,m,m.Ov),p=(0,D.qp)(n,m,m.Pv));null==o&&(o=m.kj);p||(p=m.li);m=m.Ld();h&&m&&(null!=o&&(m=(0,D.up)(m,o,p)),g.x=window.Math.min(f.x,m.x+h.x),g.y=window.Math.min(f.y,m.y+h.y),g.e=window.Math.max(f.x+f.e,m.x+h.x+m.e)-g.x,g.g=window.Math.max(f.y+f.g,
m.y+h.y+m.g)-g.y);f=g;h=g=null;b&&(g=(0,D.qp)(b,i,i.N),h=(0,D.qp)(b,i,i.M));null==g&&(g=i.N());null==h&&(h=i.M());f.x+=g;f.y+=h;if(g=i.getData().UR?i.getData().fd:null)g=i.getParent(),i=(0,D.vp)(new D.E(f.x,f.y),g,b),i=(0,D.wp)(i,k,b),g=(0,D.vp)(new D.E(f.x+f.e,f.y+f.g),g,b),g=(0,D.wp)(g,k,b),f.x=i.x,f.y=i.y,f.e=g.x-i.x,f.g=g.y-i.y;e?(i=e.x,g=e.y,e.x=window.Math.min(e.x,f.x),e.y=window.Math.min(e.y,f.y),e.e=window.Math.max(i+e.e,f.x+f.e)-e.x,e.g=window.Math.max(g+e.g,f.y+f.g)-e.y):e=f}d||(d=a.rI());
for(l=0;l<d.length;l++)if(c=d[l],(c=a.Mb(c))&&c.eb){i=c;g=b;f=new D.y(window.Number.MAX_VALUE,window.Number.MAX_VALUE,-window.Number.MAX_VALUE,-window.Number.MAX_VALUE);h=null;g&&(h=(0,D.qp)(g,i,i.vb));h||(h=i.vb());if(h){h=D.op.U1(h);for(var r=void 0,r=m=p=o=void 0,n=0;n<h.length;n++)r=h[n],o=window.Math.max(f.x+f.e,r.x),p=window.Math.max(f.y+f.g,r.y),m=window.Math.min(f.x,r.x),r=window.Math.min(f.y,r.y),f.x=m,f.y=r,f.e=o-m,f.g=p-r}h=new D.y(f.x,f.y,f.e,f.g);o=null;g&&(o=(0,D.qp)(g,i,i.od));null==
o&&(o=i.od());m=p=null;g&&(p=(0,D.qp)(g,i,i.Ov),m=(0,D.qp)(g,i,i.Pv));null==p&&(p=i.kj);m||(m=i.li);i=i.Ld();o&&i&&(null!=p&&(i=(0,D.up)(i,p,m)),h.x=window.Math.min(f.x,i.x+o.x),h.y=window.Math.min(f.y,i.y+o.y),h.e=window.Math.max(f.x+f.e,i.x+o.x+i.e)-h.x,h.g=window.Math.max(f.y+f.g,i.y+o.y+i.g)-h.y);f=h;if(g=c.getData().UR?c.getData().fd:null)c=c.getParent(),i=(0,D.vp)(new D.E(f.x,f.y),c,b),i=(0,D.wp)(i,k,b),g=(0,D.vp)(new D.E(f.x+f.e,f.y+f.g),c,b),g=(0,D.wp)(g,k,b),f.x=i.x,f.y=i.y,f.e=g.x-i.x,f.g=
g.y-i.y;e?(i=e.x,g=e.y,e.x=window.Math.min(e.x,f.x),e.y=window.Math.min(e.y,f.y),e.e=window.Math.max(i+e.e,f.x+f.e)-e.x,e.g=window.Math.max(g+e.g,f.y+f.g)-e.y):e=f}return e};
D.up=function(a,b,c){if(null==b&&!c)return a;var d=new D.E(a.x,a.y),e=new D.E(a.x+a.e,a.y),f=new D.E(a.x,a.y+a.g);a=new D.E(a.x+a.e,a.y+a.g);var g=new D.bj;null!=b&&(c&&g.translate(-c.x,-c.y),g.rotate(b),c&&g.translate(c.x,c.y));b=(0,D.xp)(g,d);e=(0,D.xp)(g,e);f=(0,D.xp)(g,f);d=(0,D.xp)(g,a);a=window.Math.min(window.Math.min(b.x,e.x),window.Math.min(f.x,d.x));g=window.Math.max(window.Math.max(b.x,e.x),window.Math.max(f.x,d.x));c=window.Math.min(window.Math.min(b.y,e.y),window.Math.min(f.y,d.y));b=
window.Math.max(window.Math.max(b.y,e.y),window.Math.max(f.y,d.y));return new D.y(a,c,g-a,b-c)};D.wp=function(a,b,c){for(var d=(0,D.yp)(b),e=a,f=d.length-1;0<=f;f--){b=d[f];a=b.ua().Y();var g=null,h=null;c&&(g=(0,D.qp)(c,b,b.N),h=(0,D.qp)(c,b,b.M));null!=g&&(a.pc=g);null!=h&&(a.nc=h);a.iy();e=(0,D.xp)(a,e)}return e};
D.vp=function(a,b,c){for(var d=(0,D.yp)(b),e=a,f=0;f<d.length;f++){b=d[f];a=b.ua().Y();var g=null,h=null;c&&(g=(0,D.qp)(c,b,b.N),h=(0,D.qp)(c,b,b.M));null!=g&&(a.pc=g);null!=h&&(a.nc=h);e=(0,D.xp)(a,e)}return e};
D.dp.prototype.eN=function(a,b,c,d,e){var f=this.da,g=f.Sc().e/2,h=f.Sc().g/2;c=g-(c+a)*e;d=h-(d+b)*e;a=g-a*e;b=h-b*e;this.eo&&(h=(0,D.rp)(this),-h.x*e<c?(g=c+h.x*e,c-=g,a+=g):-h.x*e>a&&(g=-h.x*e-a,c-=g,a+=g),-h.y*e<d?(e=d+h.y*e,d-=e,b+=e):-h.y*e>b&&(e=-h.y*e-b,d-=e,b+=e));f.vt=c;f.wt=d;f.tt=a;f.ut=b};D.np=function(a){var b={};b.top=a.top;b.right=a.right;b.bottom=a.bottom;b.left=a.left;return b};D.lp=function(a){var b={};b.top=a.top;b.right=a.right;b.bottom=a.bottom;b.left=a.left;return b};
D.dp.prototype.JM=(0,D.j)();D.zp=function(a,b){a.M0(D.kp.UG(b.$d()));var c=D.kp.UG(b.Ef());a.LO=c;a.yq=c;a.Gn(D.kp.UG(b.Ld()));a.Gy=!0};
D.Ap=function(a,b){this.Init(a,b)};D.w.l(D.Ap,D.Bp,"DvtBaseDiagramKeyboardHandler");D.u=D.Ap.prototype;D.u.Init=function(a,b){D.Ap.o.Init.call(this,a,b);this.u=a};D.u.ga=(0,D.s)("u");D.u.oy=function(a){return 9==a.keyCode?!1:this.sg(a)&&!a.ctrlKey};D.u.Zq=function(a){return 32==a.keyCode&&a.ctrlKey};D.u.a_=function(a,b,c){b=b.keyCode;if(!c||1>c.length||!a)return null;var d=c[0];a=a.Ce();a=a.x+a.e/2;for(var e=0;e<c.length;e++){var f=c[e],g=f.Ce(),g=g.x+g.e/2;if(188==b&&g<=a||190==b&&g>=a){d=f;break}}return d};
D.u.o_=function(a,b,c,d){if(!d)return null;if(!b)return d[0];if(!a)return b;for(var e=0;e<d.length;e++){var f=d[e],g=f,h=a,i=f,k=this.nE(i.Zc?i.Zc():i.getData().Zc()),i=this.nE(i.gc?i.gc():i.getData().gc()),k=h==k?i:k,h=(0,D.Cp)(h),k=(0,D.Cp)(k),h=window.Math.atan2(k.y-h.y,k.x-h.x),h=0>h?h+2*window.Math.PI:h;g.K3=h;k=g=f;h=this.nE(k.Zc?k.Zc():k.getData().Zc());k=this.nE(k.gc?k.gc():k.getData().gc());h=(0,D.Cp)(h);k=(0,D.Cp)(k);g.GE=window.Math.sqrt(window.Math.pow(k.x-h.x,2)+window.Math.pow(k.y-h.y,
2));f.ZN=a==this.nE(f.gc?f.gc():f.getData().gc())?1:0}d.sort(function(a,b){var c=a.K3,d=b.K3,e=-1;!(0,D.Dp)(c,d)&&c>d?e=1:(0,D.Dp)(c,d)&&(a.GE>b.GE?e=1:b.GE==a.GE&&a.ZN>b.ZN?e=1:b.GE==a.GE&&a.ZN==b.ZN&&(e=0));return e});for(a=0;a<d.length;a++)e=d[a],e.K3=void 0,e.GE=void 0,e.ZN=void 0;c=40==c.keyCode?!0:!1;for(e=a=0;e<d.length;e++)if(d[e]===b){a=c?e==d.length-1?0:e+1:0==e?d.length-1:e-1;break}return d[a]};D.u.nE=(0,D.ba)(null);D.Cp=function(a){a=a.Ce();return new D.E(a.x+a.e/2,a.y+a.g/2)};
D.Dp=function(a,b){var c=1E-7>=window.Math.abs(a-b);c||(c=1E-7>=window.Math.abs(2*window.Math.PI+window.Math.min(a,b)-window.Math.max(a,b)));return c};
D.Ep=function(a,b,c){this.Init(a,b,c)};D.w.l(D.Ep,D.B,"DvtBaseDiagramLink");D.u=D.Ep.prototype;D.u.Init=function(a,b,c){D.Ep.o.Init.call(this,a,null,b);this.u=c;this.Xy;this.Vh;this.Ix;this.Oa;this.HP;this.kj;this.li;this.Me=!1;this.AG=!0;this.G;this.vg;this.Bg};D.u.ga=(0,D.s)("u");D.u.iT=(0,D.j)();D.u.wp=(0,D.ba)(null);D.u.rT=(0,D.j)();D.u.xKa=(0,D.s)("Bg");(0,D.ca)("DvtBaseDiagramLink.prototype.getStartConnector",D.Ep.prototype.xKa);D.Ep.prototype.XIa=(0,D.s)("vg");
(0,D.ca)("DvtBaseDiagramLink.prototype.getEndConnector",D.Ep.prototype.XIa);D.u=D.Ep.prototype;D.u.qw=(0,D.q)("G");D.u.sb=(0,D.s)("G");D.u.nw=function(a){this.kj=a;var b=this.Oa,c=this.od();this.Ld();b&&(a=(0,D.Fp)(c,a,this.li),b.za(a))};D.u.Ov=(0,D.s)("kj");D.u.us=function(a){this.li=a;var b=this.Oa,c=this.od();this.Ld();b&&(a=(0,D.Fp)(c,this.kj,a),b.za(a))};D.u.Pv=(0,D.s)("li");D.u.od=(0,D.s)("HP");D.u.Qd=function(a){if(a){this.HP=a;var b=this.Oa;this.Ld();b&&(a=(0,D.Fp)(a,this.kj,this.li),b.za(a))}};
D.u.Ld=(0,D.ba)(null);D.u.Gn=(0,D.j)();D.u.kS=(0,D.ba)(0);D.u.RR=(0,D.ba)(0);D.u.Jf=(0,D.q)("AG");D.u.Aa=function(){return this.ga().$q()&&this.AG};D.u.Ca=(0,D.s)("Me");(0,D.ca)("DvtBaseDiagramLink.prototype.isSelected",D.Ep.prototype.Ca);D.u=D.Ep.prototype;D.u.jb=(0,D.q)("Me");D.u.cE=(0,D.j)();D.u.ny=(0,D.ba)(!1);D.u.ZD=(0,D.j)();D.u.Qv=(0,D.ba)(1);(0,D.ca)("DvtBaseDiagramLink.prototype.getLinkWidth",D.Ep.prototype.Qv);D.u=D.Ep.prototype;D.u.RM=(0,D.j)();D.u.mH=(0,D.ba)("solid");D.u.QM=(0,D.j)();
D.u.AA=(0,D.ba)(null);D.u.rp=(0,D.ba)(null);D.u.Fea=function(){return this.mH()};D.u.kE=function(){return this.Qv()};D.u.Eea=function(){return this.AA()};D.Hp=function(a,b,c,d,e){if(c||e){var f;e||(f=a.G.Yb().Y(),f.Ek(0),f.Fc=!1);if(c=D.Gp.Yda(a.j(),c,e,f,a))a.G.k(c),D.Gp.MI(c,0,e,b,d);return c}};
D.Ep.prototype.vc=function(a){this.Xy=a;D.op.jU(a)?(this.Ix=a,this.Vh=D.op.Xda(a)):(this.Vh=a,this.Ix=D.op.LT(a));this.G&&this.G instanceof D.Dh&&(this.G.Do(this.Ix),this.vg?D.Gp.MI(this.vg,this.wp(),this.rp(D.Gp.pI),this.Vh,1):this.vg=(0,D.Hp)(this,this.Vh,this.wp(),1,this.rp(D.Gp.pI)),this.Bg?D.Gp.MI(this.Bg,this.Uq(),this.rp(D.Gp.II),this.Vh,0):this.Bg=(0,D.Hp)(this,this.Vh,this.Uq(),0,this.rp(D.Gp.II)));var b=a=null;this.ke&&this.ke.fD instanceof D.Dh&&this.ke.fD.Do(this.Ix);this.ke&&(a=this.ke.Ot)&&
D.Gp.MI(a,this.Uq(),this.rp(D.Gp.II),this.Vh,0);this.ke&&(b=this.ke.Nt)&&D.Gp.MI(b,this.wp(),this.rp(D.Gp.pI),this.Vh,1);this.Mr&&this.Mr.fD instanceof D.Dh&&this.Mr.fD.Do(this.Ix);this.jL&&this.jL.Cj((0,D.Ip)(this));this.IJ&&this.IJ.Cj((0,D.Jp)(this))};D.Ep.prototype.vb=(0,D.s)("Xy");D.Ip=function(a){return!a.Vh?null:new D.E(a.Vh[0],a.Vh[1])};D.Jp=function(a){if(!a.Vh)return null;var b=a.Vh.length;return new D.E(a.Vh[b-2],a.Vh[b-1])};
D.Fp=function(a,b,c){var d=new D.bj;null!=b&&(c&&d.translate(-c.x,-c.y),d.rotate(b),c&&d.translate(c.x,c.y));a&&d.translate(a.x,a.y);return d};D.Ep.prototype.mN=function(a,b,c){!b&&0!=b&&(b=1);!c&&0!=c&&(c=0);c=this.kE()+c;a=new D.I(a,b,c);return new D.Kp(this.j(),this.Ix,a)};
D.Mp=function(a,b,c,d){b=a.mN(b,c,d);a.Bg&&a.Uq()&&(c=a.Uq(),d=(0,D.Lp)(b,a.Vh,c,a.rp(D.Gp.II),a,0),b.Ot&&b.removeChild(b.Ot),b.Ot=d,b.C$=c,b.k(b.Ot));a.vg&&a.wp()&&(c=a.wp(),a=(0,D.Lp)(b,a.Vh,c,a.rp(D.Gp.pI),a,1),b.Nt&&b.removeChild(b.Nt),b.Nt=a,b.B$=c,b.k(b.Nt));return b};D.Np=function(a,b,c){a=a.Fea();a=D.op.Wda(a);b.Ek(a,D.op.Sea(a,c),D.op.Tea(a,c))};
D.Op=function(a,b){if(a){var c=null;b.rb&&(c=b.rb());if(c){var d=a.Yb()?a.Yb().Y():null,e=a.Rb()?a.Rb().Y():null;d&&d.ir&&(d.ir(c),a.V(d));e&&e.ir&&(e.ir(c),a.L(e))}}};D.u=D.Ep.prototype;D.u.zd=(0,D.ba)(null);D.u.Ce=function(a){return this.F(a)};D.u.wj=function(){return this.ta()};D.u.Ud=(0,D.j)();D.u.ic=(0,D.j)();D.u.oc=(0,D.j)();D.u.Lc=(0,D.ba)(null);
D.Pp=function(a,b,c){this.Init(a,b,c)};D.w.l(D.Pp,D.B,"DvtBaseDiagramNode");D.u=D.Pp.prototype;D.u.Init=function(a,b,c){D.Pp.o.Init.call(this,a,null,b);this.u=c;this.Me=this.ej=!1;this.AG=!0;this.Oa;this.HP;this.kj;this.li;this.mn;this.Pj};D.u.ga=(0,D.s)("u");D.u.getData=(0,D.ba)(null);D.u.$d=function(){return this.Ef()};D.u.Ef=function(){return new D.y(0,0,this.getWidth(),this.getHeight())};D.u.Vi=function(){return{}};
D.u.Qd=function(a){if(a){this.HP=a;var b=this.Oa;this.Ld();b&&(a=(0,D.Qp)(a,this.kj,this.li),b.za(a))}};D.u.od=(0,D.s)("HP");D.u.Ld=(0,D.ba)(null);D.u.Gn=(0,D.j)();D.u.sp=(0,D.ba)(null);D.u.cB=(0,D.j)();D.u.Pa=(0,D.s)("ej");D.u.wf=(0,D.q)("ej");D.u.Ca=(0,D.s)("Me");(0,D.ca)("DvtBaseDiagramNode.prototype.isSelected",D.Pp.prototype.Ca);D.u=D.Pp.prototype;D.u.jb=(0,D.q)("Me");D.u.Jf=(0,D.q)("AG");D.u.Aa=function(){return this.ga().$q()&&this.AG};D.u.kT=(0,D.q)("be");D.u.ULa=(0,D.s)("be");
D.u.nw=function(a){this.kj=a;var b=this.Oa,c=this.od();this.Ld();b&&(a=(0,D.Qp)(c,a,this.li),b.za(a))};D.u.Ov=(0,D.s)("kj");D.u.us=function(a){this.li=a;var b=this.Oa,c=this.od();this.Ld();b&&(a=(0,D.Qp)(c,this.kj,a),b.za(a))};D.u.Pv=(0,D.s)("li");D.Qp=function(a,b,c){var d=new D.bj;null!=b&&(c&&d.translate(-c.x,-c.y),d.rotate(b),c&&d.translate(c.x,c.y));a&&d.translate(a.x,a.y);return d};D.u=D.Pp.prototype;
D.u.Fw=function(a,b,c){c?((0,D.T)(c,"typeNumber",this,this.N,this.I,a),(0,D.T)(c,"typeNumber",this,this.M,this.O,b)):(0,D.ik)(this,a,b)};D.u.zd=(0,D.ba)(null);D.u.Ce=function(a){var b=this.Ef(a);a=(0,D.Ze)(this,new D.E(b.x,b.y));b=(0,D.Ze)(this,new D.E(b.x+b.e,b.y+b.g));return new D.y(a.x,a.y,b.x-a.x,b.y-a.y)};D.u.wj=function(){return this.ta()};D.u.Ud=(0,D.j)();D.u.ic=(0,D.j)();D.u.oc=(0,D.j)();D.u.Lc=(0,D.ba)(null);D.Rp=function(a,b){a.mn||(a.mn=[]);a.mn.push(b)};
D.Sp=function(a,b){a.Pj||(a.Pj=[]);a.Pj.push(b)};
D.Tp=function(a,b,c){this.Init(a,b,c)};(0,D.ca)("DvtDiagram",D.Tp);D.w.l(D.Tp,D.dp,"DvtDiagram");D.Tp.prototype.Init=function(a,b,c){D.Tp.o.Init.call(this,a,b,c);this.pf=new D.Up;this.fb=new D.Vp(a,this.Od,this);this.fb.le(this);(0,D.Ef)()||(0,D.rj)(this.fb,new D.Wp(this,this.fb));this.ib={};this.pl=[];this.sc={};this.Ju=[];this.wm=0};D.Tp.newInstance=function(a,b,c){return new D.Tp(a,b,c)};D.u=D.Tp.prototype;
D.u.FI=function(){!this.sq&&this.we&&("none"!=this.yJ&&(this.ln={id:this.getId(),getId:(0,D.s)("id"),options:this.q(),getOptions:(0,D.s)("options"),panZoomMatrix:this.da.ba.ua(),getPanZoomMatrix:(0,D.s)("panZoomMatrix"),nodes:this.ib?(0,D.Xp)(this):[],links:this.sc?(0,D.Yp)(this):[],getNodes:(0,D.s)("nodes"),getLinks:(0,D.s)("links")},this.ln.q=this.ln.getOptions,this.ln.VJa=this.ln.getPanZoomMatrix,this.ln.getId=this.ln.getId,this.ln.ura=this.ln.getNodes,this.ln.ira=this.ln.getLinks),this.we=!1,
this.DK=this.da);this.sq||this.i3()};D.u.i3=function(){this.Bl=new D.B(this.j());this.Th=new D.B(this.j());this.Mt=new D.B(this.j());this.ib={};this.pl=[];this.sc={};this.Ju=[];this.nx=null};D.u.xq=function(){this.lf&&(this.removeChild(this.lf),this.lf.Q());this.lf=null;this.Sa&&(this.Sa=null,this.la().le(this))};
D.u.ff=function(a,b){var c=new D.en(this.j(),null,a.xa()),d=b.VJa(),e=this.da.ba.ua();d.Xc(e)||(this.da.ba.za(d),(0,D.T)(c.J,"typeMatrix",this.da.ba,this.da.ba.ua,this.da.ba.za,e));(0,D.Im)(a,b.ura(),this.ib?(0,D.Xp)(this):[]);(0,D.Im)(a,b.ira(),this.sc?(0,D.Yp)(this):[]);a.add(c,1)};
D.u.bq=function(a){var b=!1;if(!this.we&&!this.sq){var c=this.q().nodes;if(c)for(var d=0;d<c.length;d++){var e=c[d],e=D.il.bd(e,this.q().styleDefaults.nodeDefaults),e=new D.Zp(this.j(),this,e),f=e.getId();e.Tba()?this.pl.push(f):(e.P(this.Th),this.pl.push(f),this.ib[f]=e)}if(c=this.q().links)for(d=0;d<c.length;d++){var e=c[d],e=D.il.bd(e,this.q().styleDefaults.linkDefaults),g=new D.$p(this.j(),this,e),e=g.getId();g.Tba()?this.Ju.push(e):(g.P(this.Bl),this.Ju.push(e),this.sc[e]=g,f=this.K(g.Zc()),
g=this.K(g.gc()),(0,D.Rp)(f,e),(0,D.Sp)(g,e))}var c=[],h;for(h in this.ib)c.push(h);b=0===c.length;(0,D.Kl)(this.j(),[this]);this.wm++}if(b)this.wm=this.we?this.wm:this.wm-1,0===this.wm&&(0,D.aq)(this,a,b);else{this.contains(this.DK)||this.k(this.DK);var i=this;this.ar(a).then(function(){i.wm=i.we?i.wm:i.wm-1;0===i.wm&&(0,D.aq)(i,a,b)},function(){i.wm=i.we?i.wm:i.wm-1;0===i.wm&&(i.removeChild(i.DK),i.DK=null,i.we=!0)})}};
D.aq=function(a,b,c){var d;if(!c){a.removeChild(a.DK);a.Xz();a.Yz();if(d=null==a.Fi)a.Fi=(0,D.sp)(a,b,void 0,void 0);var e=a.da;if(a.we){if(a.sq){var f=a.tw(b,a.Fi),f=g?(0,D.rp)(a):f?f:a.Fi;e.wO=!0;e.Fo(null,f);e.wO=a.qA}}else{a.tw(b,a.Fi);if(!a.sq){var g=a.eo?!0:!1,f=g?(0,D.rp)(a):a.Fi;g&&(e.Hq=0);e.Fo(null,f)}e.hi=a.Bt;e.Tn=a.qA;e.wO=a.qA}}a.DK=null;a.we||(a.Sa&&a.Sa.stop(!0),(0,D.Sk)()&&a.WR()&&!a.ln?a.Sa=D.Xk.$x(a.j(),a.WR(),a,null,a.xa()):"none"!=a.yJ&&a.ln&&(a.lf=new D.B(a.j(),"Delete Container"),
a.k(a.lf),e=new D.bq(a.j(),a.lf,a.ln,a),(0,D.Im)(e,[a.ln],[a]),a.Sa=e.Mq()),a.Sa?(a.la().Ac(),a.la().ei(a),a.Sa.he(a.xq,a),a.Sa.play()):a.xq());a.we=!0;(0,D.fp)(a,c);a.Bt&&(c=a.Fi,null!=c&&(b=a.da.Bd(b),a.eN(c.x,c.y,c.e,c.g,b)));a.eo=null;a.oK=null;d&&(a.Fi=null)};D.u=D.Tp.prototype;
D.u.ud=function(a){D.Tp.o.ud.call(this,a);(0,D.cq)(this,this.D);this.Bt="none"!=this.D.panning;this.qA="none"!=this.D.zooming;this.NO="hidden";this.yJ=this.D.animationOnDataChange;this.XW="auto"==this.D.animationOnDisplay?D.Xk.sw:null;this.pw(this.D.selectionMode);this.en=this.D.emptyText?this.D.emptyText:(0,D.gk)(this.D,"labelNoData","DvtUtilBundle","NO_DATA")};D.u.by=function(){var a=this.q().maxZoom,a=(0,window.parseFloat)(a);return 0<a?a:1};
D.u.vD=function(){var a=this.q().minZoom;if(a){var b=(0,window.parseFloat)(a);0<b&&(a=window.Math.min(b,this.by()));return a}return null};D.u.xa=function(){return(0,D.Po)(this.q().styleDefaults.animationDuration)/1E3};D.u.Od=function(a){var b=a.Ta();("categoryRollOver"==b||"categoryRollOut"==b)&&this.Xz();a&&this.dispatchEvent(a)};
D.u.ar=function(a){for(var b=this.q().layout,c=(0,D.ip)(this),d={},e=0;e<this.pl.length;e++){var f=this.pl[e];this.K(f)&&(d[f]=!0,c.RG(this.Bs(this.K(f))))}for(var g in this.sc)if(e=this.Mb(g)){var f=e.getData().startNode,h=e.getData().endNode;d[f]&&d[h]&&(0,D.dq)(c,this.lB(e,f,h))}if(b&&"function"==typeof b){var i=this;(b=b(c))||(b={then:function(a){a()}});this.L0(0);b.then(function(){1===i.wm&&(i.L0(1),i.jB(c,a,!0))},(0,D.j)());return b}this.tE("DvtDiagram: Layout function is not defined",1)};
D.u.L0=function(a){this.we||(this.Bl.B(a),this.Th.B(a))};D.u.K=function(a){return this.ib[a]};D.u.Mb=function(a){return this.sc[a]};D.u.rI=(0,D.s)("Ju");D.Yp=function(a){var b=[],c;for(c in a.sc)b.push(a.sc[c]);return b};D.Tp.prototype.oB=(0,D.s)("pl");D.Xp=function(a){var b=[],c;for(c in a.ib)b.push(a.ib[c]);return b};D.u=D.Tp.prototype;
D.u.mh=function(a){D.Tp.o.mh.call(this,a);switch(a.vj()){case "adjustPanConstraints":if(this.Bt){var b=a.ov,c=this.Fi?this.Fi:(0,D.sp)(this,a.J,void 0,void 0);this.eN(c.x,c.y,c.e,c.g,b)}break;case "zoomToFitCalcBounds":this.eo||(c=this.Fi?this.Fi:(0,D.sp)(this,a.J,void 0,void 0),a.PG=c);break;case "zoomed":if(this.q().zoomRenderer&&a.NC!==a.ov)for(b in this.ib){var c=this.K(b),d=a;if(c.u.q().zoomRenderer){var e=c.Ii(d.NC),d=c.Ii(d.ov);(0,D.eq)(c,c.u.q().zoomRenderer,d,e)}}}};D.u.lta=(0,D.j)();
D.u.cM=function(a){var b=[],c;for(c in this.sc){var d=this.Mb(c),e=d.Zc(),f=d.gc();(e==a||f==a)&&d.eb&&b.push(d)}return b};D.u.Fj=function(){return(0,D.P)("DvtUtilBundle","DIAGRAM")};D.u.Yz=function(){if(this.D.selection&&this.$q()){var a=[],b;for(b in this.ib)a.push(this.K(b));for(var c in this.sc)a.push(this.Mb(c));(0,D.Al)(this.jh(),this.D.selection,a)}};
D.u.Xz=function(){this.nx&&(this.oR(!1,this.nx),this.nx=null);var a=this.D.highlightedCategories;if(a){var b="any"==this.D.highlightMatch;this.nx={};var c=[],d;for(d in this.ib){var e=this.K(d),f=b?D.H.fu(e.Lc(),a):D.H.sS(e.Lc(),a);f&&(this.nx[e.getId()]=e,c.push(e))}d=this.D.nodeHighlightMode;if("node"!=d){f="nodeAndIncomingLinks"==d||"nodeAndLinks"==d;d="nodeAndOutgoingLinks"==d||"nodeAndLinks"==d;for(var e=[],g=0;g<c.length;g++)for(var h=c[g],i=f&&h.Pj?h.Pj:[],i=d&&h.mn?i.concat(h.mn):i,h=0;h<
i.length;h++){var k=i[h];this.nx[k]=this.Mb(k);e.push(this.Mb(k))}(0,D.fq)(this,e)}var c=[],l;for(l in this.sc)if(d=this.Mb(l),f=b?D.H.fu(d.Lc(),a):D.H.sS(d.Lc(),a))this.nx[d.getId()]=d,c.push(d);"linkAndNodes"==this.D.linkHighlightMode&&(0,D.fq)(this,c);this.oR(!0,this.nx)}};D.fq=function(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=d.Zc(),d=d.gc();a.nx[e]=a.K(e);a.nx[d]=a.K(d)}};
D.Tp.prototype.oR=function(a,b){var c=a?this.D.styleDefaults._highlightAlpha:1;this.Bl.B(c);this.Th.B(c);for(var d in b)a?this.Mt.k(b[d]):b[d]instanceof D.$p?this.Bl.k(b[d]):b[d]instanceof D.Zp&&this.Th.k(b[d])};D.Tp.prototype.Ee=function(a){this.D.highlightedCategories=D.il.Y(a);this.Xz()};D.Tp.prototype.highlight=D.Tp.prototype.Ee;D.Tp.prototype.select=function(a){this.D.selection=D.il.Y(a);this.Yz()};D.Tp.prototype.select=D.Tp.prototype.select;
D.Tp.prototype.Df=function(){this.Ik||(this.Ik=new D.gq(this));return this.Ik};D.Tp.prototype.getAutomation=D.Tp.prototype.Df;D.Tp.prototype.tE=function(a,b){var c=this.q()._logger;if(c)switch(b){case 1:c.error&&c.error(a);break;case 2:c.warn&&c.warn(a);break;case 3:c.info&&c.info(a);break;default:c.log&&c.log(a)}};D.Tp.prototype.ps=function(a,b){var c=this.K(a);c&&c.ps(b)};D.Tp.prototype.processDefaultHoverEffect=D.Tp.prototype.ps;D.Tp.prototype.YA=function(a,b){var c=this.K(a);c&&c.YA(b)};
D.Tp.prototype.processDefaultSelectionEffect=D.Tp.prototype.YA;D.Tp.prototype.iw=function(a,b){var c=this.K(a);c&&c.iw(b)};D.Tp.prototype.processDefaultFocusEffect=D.Tp.prototype.iw;D.Tp.prototype.JM=function(a){var b=this.K(a.getId());b.Gy()||(b.P(this.Th),(0,D.zp)(a,b))};
D.iq=function(a,b){D.iq.o.constructor.call(this,a,b);this.R6=100;this.u=b};D.w.l(D.iq,D.jq,"DvtDiagramCategoryRolloverHandler");D.iq.prototype.b2=function(a){return D.w.vf(this,function(){this.gJ=!0;this.u.Od(a)})};D.iq.prototype.a2=function(a){return D.w.vf(this,function(){(0,D.kq)(this);this.u.Od(a)})};
D.Up=function(){this.Init({skyros:D.lq,alta:D.mq})};D.w.l(D.Up,D.Hj,"DvtDiagramDefaults");
D.lq={skin:"alta",emptyText:null,selectionMode:"none",animationOnDataChange:"none",animationOnDisplay:"none",maxZoom:1,highlightMatch:"all",nodeHighlightMode:"node",linkHighlightMode:"link",panning:"none",touchResponse:"auto",zooming:"none",_statusMessageStyle:new D.F("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"),styleDefaults:{animationDuration:500,hoverBehaviorDelay:200,_highlightAlpha:0.1,nodeDefaults:{labelStyle:'font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;font-weight:bold;font-size:12px;color:#383A47',
hoverInnerColor:"rgb(255,255,255)",hoverOuterColor:"rgba(0,0,0, .3)",selectionColor:"rgb(0,0,0)",icon:{width:10,height:10,fillPattern:"none",shape:"circle"}},linkDefaults:{startConnectorType:"none",endConnectorType:"none",width:1,style:"solid",hoverInnerColor:"rgb(255,255,255)",hoverOuterColor:"rgba(0,0,0, .3)",selectionColor:"rgb(0,0,0)",labelStyle:'font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;font-weight:bold;font-size:12px;color:#383A47',_hitDetectionOffset:4}}};D.mq={};
D.bq=function(a,b,c,d){this.Init(a,b,c,d)};D.w.l(D.bq,D.Hm,"DvtDiagramDataAnimationHandler");D.bq.prototype.Init=function(a,b,c,d){D.bq.o.Init.call(this,a,b);this.KDa=c;this.zPa=d};D.bq.prototype.xa=function(){return(0,D.Po)(this.KDa.q().styleDefaults.animationDuration)/1E3};
D.Vp=function(a,b,c){this.Init(a,b,c);this.u=c};D.w.l(D.Vp,D.Jj,"DvtDiagramEventManager");D.u=D.Vp.prototype;D.u.dm=function(a,b,c){a=this.u.q();"dim"==a.hoverBehavior&&(b=b.Lc?b.Lc():[],a.highlightedCategories=c?b.slice():null,c=new D.om(c?"categoryRollOver":"categoryRollOut",a.highlightedCategories),b=(0,D.Po)(a.styleDefaults.hoverBehaviorDelay),this.DB.Od(c,(0,D.Xp)(this.u),b,"any"==a.highlightMatch))};D.u.r1=function(a,b){return new D.iq(a,b)};
D.u.Ih=function(a){var b=!0,c=a.keyCode,d=this.dd(),e=d instanceof D.Zp?d.Yu:null;9!=c&&this.Tw?(e.NL(a),a.preventDefault()):9==c&&e instanceof D.lj?!a.shiftKey&&d.oc()?(d.ic(),e.NL(a),a.preventDefault(),this.Tw=!0):(a.shiftKey&&this.Tw?(this.KI(a,d),a.preventDefault()):(this.Tw&&d.Ud(),b=D.Vp.o.Ih.call(this,a)),this.Tw=!1):b=D.Vp.o.Ih.call(this,a);return b};D.u.zu=function(){var a=this.u.q();return"none"!==a.panning||"none"!==a.zooming?"touchHold":"touchStart"===a.touchResponse?"touchStart":"auto"};
D.u.or=function(a){return(0,D.nq)(this,a,"panned")};D.u.Gw=function(a){return"panned"==a?!1:D.Vp.o.Gw.call(this,a)};
D.Wp=function(a,b){this.Init(a,b)};D.w.l(D.Wp,D.Ap,"DvtDiagramKeyboardHandler");D.Wp.prototype.sg=function(a){var b=!1;switch(a.keyCode){case 188:case 190:b=a.altKey?!0:!1;break;default:b=D.Wp.o.sg.call(this,a)}return b};D.Wp.prototype.Ch=function(a){if(9==a.keyCode){var b=this.ea.dd();if(b)return(0,D.bi)(a),b;b=(0,D.Xp)(this.ga());if(0<b.length)return(0,D.bi)(a),this.pD(b)}return D.Wp.o.Ch.call(this,a)};D.Wp.prototype.nE=function(a){return this.ga().K(a)};
D.kp={};D.w.l(D.kp,D.w,"DvtDiagramLayoutUtils");D.kp.YKa=function(a){for(var b=D.kp.zJa(a),c=window.Math.max(b.w,b.h),b=a.Ne(),d=a.yp(),e=window.Math.floor(window.Math.sqrt(b)),f=0,f=(f=a.Vi())&&f.padding?f.padding:0<d?c:0.25*c,c=c+f,d=-(window.Math.ceil(b/e)-1)*c/2,f=-(e-1)*c/2,g=0;g<b;g++)D.kp.ZGa(a.BA(g),d+c*window.Math.floor(g/e),f+c*(g%e))};
D.kp.zJa=function(a){for(var b=a.Ne(),c=0,d=0,e=0;e<b;e++){var f=a.BA(e),g=f.yd(),c=window.Math.max(g.w,c),d=window.Math.max(g.h,d);if(f=f.Ld())c=window.Math.max(f.w,c),d=window.Math.max(g.h+f.h,d)}return new D.hp(0,0,c,d)};D.kp.ZGa=function(a,b,c){var d=a.Ef();a.Cj(new D.oq(b-d.x-0.5*d.w,c-d.y-0.5*d.h));D.kp.TMa(a)};D.kp.TMa=function(a){var b=a.yd(),c=a.ag(),d=a.Ld();d&&a.Qd(new D.oq(b.x+c.x+0.5*(b.w-d.w),b.y+c.y+b.h))};D.kp.UG=function(a){return void 0===a||null==a?null:new D.hp(a.x,a.y,a.e,a.g)};
D.kp.Ppa=function(a){return void 0===a||null==a?null:new D.oq(a.x,a.y)};D.kp.dHa=function(a){return a?new D.y(a.x,a.y,a.w,a.h):null};D.kp.Opa=function(a){return a?new D.E(a.x,a.y):null};
D.$p=function(a,b,c){this.Init(a,b,c)};D.w.l(D.$p,D.Ep,"DvtDiagramLink");D.u=D.$p.prototype;D.u.Init=function(a,b,c){D.$p.o.Init.call(this,a,c.id,b);this.oa=c;this.u.$q()&&this.setCursor("pointer")};D.u.getData=(0,D.s)("oa");D.u.getId=function(){return this.getData().id};D.u.Zc=function(){return this.getData().startNode};D.u.gc=function(){return this.getData().endNode};D.u.Ld=function(){var a=null;this.Oa&&(a=this.Oa.F());return a};D.u.mH=function(){return this.getData().style};D.u.Qv=function(){return this.getData().width};
D.u.AA=function(){return this.getData().color};D.u.Uq=function(){return this.getData().startConnectorType};D.u.wp=function(){return this.getData().endConnectorType};D.u.kS=function(){if(this.Uq()){var a=this.sb().Yb().Y();a.Ek(0);return D.Gp.RT(null,this.Uq(),null,a,this)}return 0};D.u.RR=function(){if(this.wp()){var a=this.sb().Yb().Y();a.Ek(0);return D.Gp.RT(null,this.wp(),null,a,this)}return 0};
D.u.P=function(a){var b=this.getData(),c=this.Ix;c||(c=["M",0,0,"L",0,0]);var d=b.id,e=b.color,f=b.width,g=b.style;this.Mr=this.mN("#000000",0,b._hitDetectionOffset);this.k(this.Mr);b=new D.I(e,1,f);(0,D.Ef)()&&((0,D.qq)()&&1==(0,D.Dn)())&&(b.Fc=!0);g=D.op.Wda(g);b.Ek(g,D.op.Sea(g),D.op.Tea(g));c=new D.Dh(this.j(),c,d);c.L(null);c.V(b);this.qw(c);this.k(c);b=this.u;c=this.getData();d=(0,D.D)(b.j())?"right":"left";c.label&&(g=c.labelStyle,b=new D.Ff(b.j(),c.label,0,0),b.Ha(new D.F(g)),b.ru(d),b.zy("top"),
c=(0,D.rq)((new D.F(c.labelStyle)).getWidth()),0<c&&D.Ve.Qb(b,c,window.Infinity,this)||this.k(b),this.Oa=b);a.k(this);this.Td("img");this.Wm();this.u.la().Fa(this,this)};D.u.jb=function(a){D.$p.o.jb.call(this,a);a?this.Cv(this.yl,!0):this.Ez();this.Wm()};D.u.Aa=function(){return this.ga().$q()&&"off"!=this.getData().selectable};
D.u.Cv=function(a,b){if(a){this.Xh||(this.Xh=this.sb().Yb());var c=this.sb().Yb().Y();c.ir&&c.ir(this.getData().hoverInnerColor);this.sb().V(c);(0,D.Op)(this.Bg,c);(0,D.Op)(this.vg,c)}else this.Xh&&(this.sb().V(this.Xh),(0,D.Op)(this.Bg,this.Xh),(0,D.Op)(this.vg,this.Xh),this.Xh=null);this.ke||(this.ke=(0,D.Mp)(this,"#000000",1,0),this.Ma(this.ke,0));var c=b?this.getData().selectionColor:this.getData().hoverOuterColor,d=this.ke.Yb().Y();d.ir(c);d.ma(2+this.kE());(0,D.Np)(this,d,!0);this.ke.V(d,2)};
D.u.Ez=function(){this.Xh&&(this.sb().V(this.Xh),(0,D.Op)(this.Bg,this.Xh),(0,D.Op)(this.vg,this.Xh),this.Xh=null);this.ke&&(this.removeChild(this.ke),this.ke.Q&&this.ke.Q(),this.ke=null)};D.u.Ob=function(){this.yl||(this.yl=!0,this.Cv(!0,this.Ca()))};D.u.Db=function(){this.Ca()?this.Cv(!1,!0):this.Ez();this.yl=!1};D.u.Be=function(){var a=this.ga().q().tooltip;return a?(0,D.Qo)(this.ga().j().fe(),a,this.tp()):this.zc()};D.u.zc=function(){return this.getData().shortDesc};
D.u.tp=function(){return{id:this.getId(),type:"link",label:this.getData().label}};D.u.ec=function(){var a=[];this.Aa()&&a.push((0,D.P)("DvtUtilBundle",this.Ca()?"STATE_SELECTED":"STATE_UNSELECTED"));return(0,D.hk)(this.zc(),a)};D.u.Wm=function(){if(!(0,D.Ye)()){var a=this.ec();a&&this.Zb("label",a)}};
D.u.zd=function(a){if(32==a.keyCode&&a.ctrlKey)return this;if(38==a.keyCode||40==a.keyCode){var b=this.jK;b||(b=this.ga().K((0,D.sq)(this.ga(),this)));var c=this,d=this.ga().cM(b.getId()),e;(e=this.ga().la().Rf)&&e.o_&&(c=e.o_(b,this,a,d));c.jK=b;return c}return 39==a.keyCode||37==a.keyCode?(a=this.HX(a.keyCode)?this.Zc():this.gc(),this.ga().K(a)):a.type==D.dk?this:null};D.u.HX=function(a){var b=(0,D.Ip)(this),c=(0,D.Jp)(this),b=b.x<c.x?!0:!1;return 39==a&&b||37==a&&!b?!1:!0};
D.u.Ud=function(){this.Ib=!0;this.Ob()};D.u.ic=function(){this.Ib=!1;this.Db()};D.u.oc=(0,D.s)("Ib");D.u.Lc=function(){return this.getData().categories?this.getData().categories:[this.getId()]};D.u.Tba=function(){var a=this.ga().q().hiddenCategories;return a&&D.H.fu(a,this.Lc())||!this.ga().K(this.Zc())||!this.ga().K(this.gc())?!0:!1};
D.u.ff=function(a,b){var c=b.vb(),d=this.vb(),e=new D.en(this.j(),null,a.xa());D.H.Xc(c,d)||(this.vc(c),c="typePolyline",0<d.length&&(0,window.isNaN)(d[0])&&(c="typePath"),(0,D.T)(e.J,c,this,this.vb,this.vc,d));b.Oa&&this.Oa&&(d=b.Oa.ua(),c=this.Oa.ua(),d.Xc(c)||(this.Oa.za(d),(0,D.T)(e.J,"typeMatrix",this.Oa,this.Oa.ua,this.Oa.za,c)));if(b.sb()&&this.sb()&&(d=b.sb().Yb(),c=this.sb().Yb(),d&&c&&d instanceof D.I&&c instanceof D.I&&(d.rb()!=c.rb()||d.getWidth()!=c.getWidth())))this.sb().V(d),(0,D.T)(e.J,
"typeStroke",this.sb(),this.sb().Yb,this.sb().V,c);a.add(e,1)};D.u.hh=function(a){this.ga().Bl.k(this);var b=this,c=new D.gn(this.j(),this,a.xa());(0,D.al)(c,function(){b.getParent().removeChild(b);b.Q()});a.add(c,0)};D.u.pg=function(a){this.B(0);a.add(new D.Km(this.j(),this,a.xa()),2)};D.u.Vi=function(){return this.getData()};
D.Gp={};D.w.l(D.Gp,D.w,"DvtDiagramLinkConnectorUtils");D.Gp.pI="endConnector";D.Gp.II="startConnector";D.Gp.Pda="arrowOpen";D.Gp.HT="arrow";D.Gp.IT="arrowConcave";D.Gp.Rda="rectangle";D.Gp.Sda="rectangleRounded";D.Gp.Qda="circle";
D.Gp.Yda=function(a,b,c,d,e){if(c)return D.Gp.jua(c,e);c=e.kE();switch(b){case D.Gp.HT:return D.Gp.kua(a,c,e.AA());case D.Gp.IT:return D.Gp.lua(a,c,e.AA());case D.Gp.Pda:return D.Gp.nua(a,c,d);case D.Gp.Qda:return D.Gp.iua(a,c,d);case D.Gp.Rda:return D.Gp.cea(a,c,d);case D.Gp.Sda:return D.Gp.rua(a,c,d)}return null};D.Gp.MI=function(a,b,c,d,e){b=D.Gp.bua(a,c,d,e);a.za(b)};
D.Gp.bua=function(a,b,c,d){var e=-1,f=0,g=0,h=0;c&&(f=c.length,1===d?(2<=f&&(g=c[f-2],h=c[f-1]),4<=f?(e=c[f-4],f=c[f-3]):(e=g-1E-4,f=h)):(2<=f&&(g=c[0],h=c[1]),4<=f?(e=c[2],f=c[3]):(e=g+1E-4,f=h)));c=g;d=h;e=D.Gp.aua(e,f,g,h);g=a.zAa;g||(g=a.ua().Y(),a.zAa=g);h=new D.bj;b&&(b=D.Gp.ika(a),f=a.uc(),a=a.yc(),h.translate(-0.5*b.e*f,-0.5*b.g*a));h.rotate(e);h.translate(c,d);h.concat(g);return h};D.Gp.ika=function(a){var b=a.nAa;b||(b=a.F(),a.nAa=b);return b};
D.Gp.aua=function(a,b,c,d){return window.Math.atan2(d-b,c-a)};D.Gp.lua=function(a,b,c){b=6*D.Gp.HW(b);var d=0.8*b;a=new D.Jn(a,[-0.22*b,-0.5*d,0.78*b,0,-0.22*b,0.5*d,0,0]);a.pa(c);return a};D.Gp.kua=function(a,b,c){b=5*D.Gp.HW(b);var d=0.8*b;a=new D.Jn(a,[0,-0.5*d,b,0,0,0.5*d]);a.pa(c);return a};D.Gp.HW=function(a){if(1>=a)return a;a=0.5*(a-1);return 1+a};
D.Gp.nua=function(a,b,c){b*=3;var d=c.getWidth();a=new D.eo(a,[-b+d*window.Math.sqrt(2)/2,-b,d*window.Math.sqrt(2)/2,0,-b+d*window.Math.sqrt(2)/2,b]);a.V(c);a.L(null);return a};D.Gp.Gqa=function(a){return 2*a};D.Gp.Cra=function(a){return 3*a};D.Gp.iua=function(a,b,c){b=D.Gp.Gqa(b);a=new D.Kn(a,b,0,b);a.V(c);a.L(null);return a};D.Gp.cea=function(a,b,c){b=D.Gp.Cra(b);a=new D.C(a,0,-b/2,b,b);a.V(c);a.L(null);return a};D.Gp.rua=function(a,b,c){a=D.Gp.cea(a,b,c);(0,D.tq)(a,b);return a};
D.Gp.jua=function(a,b){var c=(0,D.di)(b.ga()),d=b.getData().vl;c.Fr=d;c.dB(b,b.CR);d=b.tH();c.Jt=d;return D.x.SH(c,a,b)};D.Gp.RT=function(a,b,c,d,e){if(c)return b=D.Gp.ika(a),a=a.uc(),0.5*b.e*a;a=e.kE();d=d.getWidth();switch(b){case D.Gp.Pda:return d*window.Math.sqrt(2);case D.Gp.HT:return b=D.Gp.HW(a),5*b;case D.Gp.IT:return b=D.Gp.HW(a),0.78*6*b;case D.Gp.Qda:return 2*D.Gp.Gqa(d)+d/2;case D.Gp.Rda:case D.Gp.Sda:return D.Gp.Cra(d)+d/2;default:return 0}};
D.Kp=function(a,b,c){D.Kp.o.Init.call(this,a);this.Init(a,b,c)};D.w.l(D.Kp,D.B,"DvtDiagramLinkUnderlay");D.Kp.prototype.Init=function(a,b,c){b||(b=["M",0,0,"L",1,0]);this.lo=c;this.lo||(this.lo=new D.I("#ffffff",1,1));this.fD=new D.Dh(a,b);this.fD.V(c);this.fD.L(null);this.k(this.fD);this.B$=this.Nt=this.C$=this.Ot=null};D.Lp=function(a,b,c,d,e,f){a=D.Gp.Yda(a.j(),c,d,a.lo,e);D.Gp.MI(a,0,d,b,f);return a};
D.Kp.prototype.V=function(a,b){this.lo=a;(0,D.Ef)()&&((0,D.qq)()&&1==(0,D.Dn)())&&(a.Fc=!0);this.fD.V(a);if(this.Ot){var c=a.Y();c.Ek(0);c.Fc=!1;if(this.C$==D.Gp.HT||this.C$==D.Gp.IT)c.ma(b),this.Ot.pa(a.rb());this.Ot.V(c)}if(this.Nt){c=a.Y();c.Ek(0);c.Fc=!1;if(this.B$==D.Gp.HT||this.B$==D.Gp.IT)c.ma(b),this.Nt.pa(a.rb());this.Nt.V(c)}};D.Kp.prototype.Yb=(0,D.s)("lo");
D.op={};D.w.l(D.op,D.w,"DvtDiagramLinkUtils");D.op.Wda=function(a){var b=0;switch(a){case "dash":b=1;break;case "dot":b=2;break;case "dashDot":b=3}return b};D.op.Sea=function(a,b){if(0==a)return null;if(1==a)return b?"8,2":"6,4";if(2==a)return b?"4,1":"2,3";if(3==a)return b?"10,1,4,1":"8,3,2,3"};D.op.Tea=function(a,b){return b&&0!=a?1:null};D.op.LT=function(a){var b=[];if(a)for(var c=0;c<a.length;c+=2)0==c?b.push("M"):b.push("L"),b.push(a[c]),b.push(a[c+1]);return b};
D.op.Xda=function(a){var b=[];if(a)for(var c=0;c<a.length;c++)(0,window.isNaN)(a[c])||b.push(a[c]);return b};D.op.jU=function(a){return a&&0<a.length?(0,window.isNaN)(a[0]):!1};D.op.U1=function(a){var b=[];a=D.op.jU(a)?D.op.Xda(a):a;for(var c=0;c<a.length;c+=2)b.push(new D.E(a[c],a[c+1]));return b};
D.Zp=function(a,b,c){this.Init(a,b,c)};D.w.l(D.Zp,D.Pp,"DvtDiagramNode");D.u=D.Zp.prototype;D.u.Init=function(a,b,c){D.Zp.o.Init.call(this,a,c.id,b);this.oa=c;this.u.$q()&&this.setCursor("pointer")};D.u.getData=(0,D.s)("oa");D.u.getId=function(){return this.oa.id};D.u.Ef=(0,D.s)("sJ");D.u.Ld=function(){var a=null;this.Oa&&(a=this.qx?this.qx:this.Oa.F());return a};
D.u.jb=function(a){var b=this.Ii();D.Zp.o.jb.call(this,a);this.u.q().selectionRenderer?(0,D.eq)(this,this.u.q().selectionRenderer,this.Ii(),b):this.YA(a);this.Wm()};D.u.YA=function(a){this.wo()&&this.wo().jb(a)};D.u.Aa=function(){return this.ga().$q()&&"off"!=this.getData().selectable};D.u.tN=(0,D.s)("G");
D.u.P=function(a){if(this.u.q().renderer)(0,D.eq)(this,this.u.q().renderer,this.Ii(),null);else{var b=this.getData(),c=this.u,d=new D.F(b.backgroundStyle);if(!(0,D.Rf)(d)){var e=(0,D.rq)(d.A("width")),f=(0,D.rq)(d.A("height")),g=d.A("background-color"),h=d.A("border-color"),i=(0,D.rq)(d.A("border-width")),d=(0,D.rq)(d.A("border-radius")),c=new D.C(c.j(),0,0,e,f);c.pa(g);d&&(c.xf(d),c.If(d));h&&c.V(new D.I(h,1,i));this.k(c);this.aI(c);this.Na=c}g=this.u;if(h=b.icon){c=h.width;e=h.height;i=h.color;
g=h.source?new D.Xg(g.j(),c/2,e/2,c,e,h.source,h.sourceSelected,h.sourceHover,h.sourceHoverSelected):new D.Yg(g.j(),h.shape,"alta",c/2,e/2,c,e);"none"!=h.fillPattern?g.L(new D.Zg(h.fillPattern,i,i)):g.pa(i);h.borderColor&&g.V(new D.I(h.borderColor,h.borderWidth));this.k(g);this.G=g;if(this.Na){var h=b.icon,i=this.Na.getWidth(),c=this.Na.getHeight(),e=h.width,f=h.height,d=0.5*(i-e),k=0.5*(c-f);if(void 0!==h.positionX)d=(0,window.parseFloat)(h.positionX),(0,D.D)(this.j())&&(d=i-d-e);else{var l=h.halign;
"start"==l?l=(0,D.D)(this.j())?"right":"left":"end"==l&&(l=(0,D.D)(this.j())?"left":"right");d="left"==l?0:"right"==l?i-e:d}void 0!==h.positionY?k=(0,window.parseFloat)(h.positionY):"top"==h.valign?k=0:"bottom"==h.valign&&(k=c-f);(0,D.ik)(this.G,d,k)}this.Na||this.aI(g)}i=this.u;g=(0,D.D)(i.j())?"right":"left";b.label&&(h=b.labelStyle,i=new D.Ff(i.j(),b.label,0,0),i.Ha(new D.F(h)),i.ru(g),i.zy("top"),g=(0,D.rq)((new D.F(b.labelStyle)).getWidth()),0<g&&D.Ve.Qb(i,g,window.Infinity,this)||this.k(i),
this.Oa=i);(0,D.uq)(this.wo(),b)}a.k(this);a=null;this.Yu?(b=this.F())&&(a=new D.y(b.x,b.y,b.e-b.x,b.g-b.y)):(a=this.Na?this.Na.lE(this):null)&&this.G?a=(0,D.qo)(a,this.G.lE(this)):!a&&this.G&&(a=this.G.lE(this));this.sJ=a;this.Td("img");this.Wm();this.u.la().Fa(this,this)};
D.eq=function(a,b,c,d){var e=a.u.q()._contextHandler;if(e){var f=a.getData();c=e(a.ta(),a.Yu,f,c,d);b=b(c);a.Yu&&b!=a.Yu&&(a.Yu.namespaceURI===D.A.QN?(0,D.vq)(a).removeChild(a.Yu):a.removeChild(b),a.Yu=null);b&&b.namespaceURI===D.A.QN?a.Yu||(D.A.xd((0,D.vq)(a),b),a.Yu=b):b instanceof D.lj?a.Yu||(a.k(b),a.Yu=b):b&&a.u.tE("DvtDiagram: could not add custom node content for the node "+a.getId()+b,1)}else a.u.tE("DvtDiagram: could not add custom node content - context handler is undefined",1)};
D.uq=function(a,b){var c=b.hoverInnerColor,d=b.hoverOuterColor,e=b.selectionColor,f=new D.I(c,1,4);f.Fc=!0;d=new D.I(d,1,8);d.Fc=!0;var g=new D.I(e,1,2);g.Fc=!0;var h=new D.I(e,1,4);h.Fc=!0;c=new D.I(c,1,4);c.Fc=!0;e=new D.I(e,1,8);e.Fc=!0;a.Mp(f,d).Op(g,h).jr(c,e)};D.u=D.Zp.prototype;D.u.aI=(0,D.q)("BG");D.u.wo=function(){if(!this.BG&&this.sJ){var a=new D.C(this.u.j(),this.sJ.x,this.sJ.y,this.sJ.e,this.sJ.g);(0,D.qi)(a);this.aI(a);this.Ma(a,0);(0,D.uq)(a,this.getData());this.BG=a}return this.BG};
D.u.Ob=function(){var a=this.Ii();this.yl=!0;this.u.q().hoverRenderer?(0,D.eq)(this,this.u.q().hoverRenderer,this.Ii(),a):this.ps(!0)};D.u.Db=function(){var a=this.Ii();this.yl=!1;this.u.q().hoverRenderer?(0,D.eq)(this,this.u.q().hoverRenderer,this.Ii(),a):this.ps(!1)};D.u.ps=function(a){this.wo()&&(a?this.wo().Ob():this.wo().Db())};D.u.Be=function(){var a=this.ga().q().tooltip;return a?(0,D.Qo)(this.ga().j().fe(),a,this.tp()):this.zc()};D.u.zc=function(){return this.getData().shortDesc};
D.u.tp=function(){return{id:this.getId(),type:"node",label:this.getData().label}};D.u.ec=function(){var a=[];this.Aa()&&a.push((0,D.P)("DvtUtilBundle",this.Ca()?"STATE_SELECTED":"STATE_UNSELECTED"));return(0,D.hk)(this.zc(),a)};D.u.Wm=function(){if(!(0,D.Ye)()){var a=this.ec();a&&this.Zb("label",a)}};
D.u.zd=function(a){var b=null;if(32==a.keyCode&&a.ctrlKey)b=this;else if(a.altKey){var c=this.ga().cM(this.getId()),d;(d=this.ga().la().Rf)&&d.a_&&(b=d.a_(this,a,c));b?b.jK=this:b=this}else a.type==D.dk?b=this:(b=(0,D.Xp)(this.ga()),b=(0,D.ym)(this,a,b));return b};D.u.Ud=function(){var a=this.Ii();this.Ib=!0;this.u.q().focusRenderer?(0,D.eq)(this,this.u.q().focusRenderer,this.Ii(),a):this.iw(!0)};
D.u.ic=function(){this.oc()&&(this.Ii(),this.Ib=!1,this.u.q().focusRenderer?(0,D.eq)(this,this.u.q().focusRenderer,this.getData(),this.Ii()):this.iw(!1))};D.u.iw=function(a){this.ps(a)};D.u.oc=(0,D.s)("Ib");D.u.Lc=function(){return this.getData().categories?this.getData().categories:[this.getId()]};D.u.Tba=function(){var a=this.ga().q().hiddenCategories;return a&&D.H.fu(a,this.Lc())?!0:!1};
D.u.ff=function(a,b){var c=new D.en(this.j(),null,a.xa()),d=b.N(),e=b.M(),f=this.N(),g=this.M();d!=f&&(this.I(d),(0,D.T)(c.J,"typeNumber",this,this.N,this.I,f));e!=g&&(this.O(e),(0,D.T)(c.J,"typeNumber",this,this.M,this.O,g));b.G&&this.G&&((0,D.T)(c.J,"typeRectangle",this.G,this.G.Vt,this.G.bB,this.G.Vt()),this.G.bB(b.G.Vt()));b.Oa&&this.Oa&&(d=b.Oa.ua(),e=this.Oa.ua(),d.Xc(e)||(this.Oa.za(d),(0,D.T)(c.J,"typeMatrix",this.Oa,this.Oa.ua,this.Oa.za,e)));(0,D.wq)(c,b.Na,this.Na);(0,D.wq)(c,b.G,this.G);
a.add(c,1)};D.wq=function(a,b,c){b&&c&&((0,D.T)(a.J,"typeFill",c,c.Rb,c.L,c.Rb()),c.L(b.Rb()))};D.Zp.prototype.hh=function(a){this.ga().Th.k(this);var b=this,c=new D.gn(this.j(),this,a.xa());(0,D.al)(c,function(){b.getParent().removeChild(b);b.Q()});a.add(c,0)};D.Zp.prototype.pg=function(a){this.B(0);a.add(new D.Km(this.j(),this,a.xa()),2)};D.Zp.prototype.Vi=function(){return this.getData()};D.Zp.prototype.Ii=function(a){return{hovered:this.yl,selected:this.Ca(),focused:this.Ib,zoom:a?a:this.ga().da.Bd()}};
D.gq=function(a){this.Init(a)};(0,D.ca)("DvtDiagramAutomation",D.gq);D.w.l(D.gq,D.xj,"DvtDiagramAutomation");D.gq.prototype.Init=(0,D.q)("u");D.gq.prototype.ol=function(a){return(a=(0,D.yj)(this.u.la(),a))&&a instanceof D.Zp?"node["+this.u.oB().indexOf(a.getId())+"]":a&&a instanceof D.$p?"link["+this.u.rI().indexOf(a.getId())+"]":null};
D.gq.prototype.Ff=function(a){if("tooltip"==a)return(0,D.Rl)(this.u);var b=this.pG(a);a=b.component;var b=b.index,c=null;"node"==a?c=this.sh(b):"link"==a&&(c=(0,D.hq)(this,b));return c?c.ta():null};D.gq.prototype.getDomElementForSubId=D.gq.prototype.Ff;D.gq.prototype.pG=function(a){var b=a,c=-1,d=a.substring(0,a.indexOf("["));d&&(b="node"==d||"link"==d?d:null,c=(0,window.parseInt)(a.substring(a.indexOf("[")+1,a.indexOf("]"))));return{component:b,index:c}};D.gq.prototype.Ne=function(){return this.u.Ne()};
D.gq.prototype.getNodeCount=D.gq.prototype.Ne;D.gq.prototype.yp=function(){return this.u.yp()};D.gq.prototype.getLinkCount=D.gq.prototype.yp;D.gq.prototype.Nb=function(a){if(a=this.sh(a)){var b={};b.id=a.getId();b.selected=a.Ca();b.tooltip=a.zc();b.label=a.getData().label;b.background=a.getData().backgroundStyle;b.icon=this.rP(a.tN());return b}return null};D.gq.prototype.getNode=D.gq.prototype.Nb;
D.gq.prototype.WL=function(a){if(a=(0,D.hq)(this,a)){var b={};b.id=a.getId();b.selected=a.Ca();b.tooltip=a.zc();b.label=a.getData().label;b.color=a.AA();b.width=a.Qv();b.style=a.mH();b.startNode=a.Zc();b.endNode=a.gc();b.startConnectorType=a.Uq();b.endConnectorType=a.wp();return b}return null};D.gq.prototype.getLink=D.gq.prototype.WL;D.gq.prototype.rP=function(a){if(a){var b={};b.shape=a instanceof D.Yg?a.Ta():"none";a.Rb()&&(b.color=a.Rb().rb());return b}return null};
D.gq.prototype.sh=function(a){var b=this.u.oB();return 0<=a&&a<b.length?this.u.K(b[a]):null};D.hq=function(a,b){var c=a.u.rI();return 0<=b&&b<c.length?a.u.Mb(c[b]):null};

  return D;
});