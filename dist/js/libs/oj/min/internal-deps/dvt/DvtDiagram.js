/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(['./DvtToolkit', './DvtPanZoomCanvas'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.

var l=void 0,p=!0,s=null,t=!1;function aa(){return function(a){return a}}function B(){return function(){}}function C(a){return function(b){this[a]=b}}function Q(a){return function(){return this[a]}}function R(a){return function(){return a}}var S;function ba(a,b){0==a.indexOf("dvt.")&&(a=a.substring(4));var c=a.split("."),d=eval("dvt");!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&b!==l?d[e]=b:d=d[e]?d[e]:d[e]={}}Math.floor(2147483648*Math.random()).toString(36);
function Fl(a){this.Init(a)}ba("DvtDiagramLayoutContext",Fl);dvt.j.u(Fl,dvt.j,"DvtDiagramLayoutContext");
Fl.prototype.Init=function(a){this.vh=a?a.vh:s;this.Gq=a?a.Gq:s;this.Fw=a?a.Fw:0;this.jZ=a?a.jZ:0;this.fw=a?a.fw:t;this.Gia=a?a.Gia:s;this.Fg=a?a.Fg:s;this.lA=a?a.lA:s;this.cj=a?a.cj:s;this.qc={};this.de={};this.YE=[];this.yX=[];if(a){for(var b=0;b<this.Fw;b++){var c=new Gl(a.YE[b]);this.YE.push(c);this.qc[c.getId()]=c}for(var d in a.qc)this.qc[d]||(this.qc[d]=new Gl(a.qc[d]));for(b=0;b<this.jZ;b++)c=new Hl(a.yX[b]),this.yX.push(c),this.de[c.getId()]=c;for(var e in a.de)this.de[e]||(this.de[e]=new Hl(a.de[e]))}};
Fl.prototype.Bo=C("vh");Fl.prototype.$f=Q("vh");Fl.prototype.getLayout=Fl.prototype.$f;Fl.prototype.fr=C("Gq");Fl.prototype.dm=Q("Gq");Fl.prototype.getLayoutAttributes=Fl.prototype.dm;Fl.prototype.oO=function(a){this.da(a.getId())||(this.Fw++,this.YE.push(a));this.qc[a.getId()]=a};Fl.prototype.da=function(a){return this.qc[a]};Fl.prototype.getNodeById=Fl.prototype.da;Fl.prototype.FG=function(a){return this.YE[a]};Fl.prototype.getNodeByIndex=Fl.prototype.FG;Fl.prototype.xg=Q("Fw");
Fl.prototype.getNodeCount=Fl.prototype.xg;function ub(a,b){a.gd(b.getId())||(a.jZ++,a.yX.push(b));a.de[b.getId()]=b}Fl.prototype.gd=function(a){return this.de[a]};Fl.prototype.getLinkById=Fl.prototype.gd;Fl.prototype.hK=function(a){return this.yX[a]};Fl.prototype.getLinkByIndex=Fl.prototype.hK;Fl.prototype.Ht=Q("jZ");Fl.prototype.getLinkCount=Fl.prototype.Ht;
Fl.prototype.ggb=function(a,b){for(var c=b,d=new yd(0,0);c;)if(d.x+=c.Zca.x+c.pi().x,d.y+=c.Zca.y+c.pi().y,c=c.lA){if((c=this.da(c))&&c.Sb()){var e=c.Bt();e&&(d.x+=e.left,d.y+=e.top)}}else c=s;return new yd(a.x+d.x,a.y+d.y)};Fl.prototype.localToGlobal=Fl.prototype.ggb;Fl.prototype.Dfb=Q("fw");Fl.prototype.isLocaleR2L=Fl.prototype.Dfb;Fl.prototype.acb=Q("Gia");Fl.prototype.getComponentSize=Fl.prototype.acb;Fl.prototype.Wib=C("Fg");Fl.prototype.setViewport=Fl.prototype.Wib;Fl.prototype.tK=Q("Fg");
Fl.prototype.getViewport=Fl.prototype.tK;Fl.prototype.Wba=C("lA");Fl.prototype.Qpa=Q("lA");Fl.prototype.getContainerId=Fl.prototype.Qpa;Fl.prototype.dH=function(a,b,c,d){this.lA&&(this.cj={},"number"===typeof a||"string"===typeof a||(d=a.left,b=a.right,c=a.bottom,a=a.top),this.cj.top=a,this.cj.right=b,this.cj.bottom=c,this.cj.left=d)};Fl.prototype.setContainerPadding=Fl.prototype.dH;Fl.prototype.Bt=Q("cj");Fl.prototype.getContainerPadding=Fl.prototype.Bt;Fl.prototype.ccb=Q("KR");
Fl.prototype.getCurrentViewport=Fl.prototype.ccb;function Hl(a){this.Init(a)}ba("DvtDiagramLayoutContextLink",Hl);dvt.j.u(Hl,dvt.j,"DvtDiagramLayoutContextLink");Hl.prototype.Init=function(a){this.pc=a?a.pc:s;this.wT=a?a.wT:s;this.XR=a?a.XR:s;this.Sk=a?a.Sk:s;this.bN=a?a.bN:s;this.aN=a?a.aN:s;this.Gq=a?a.Gq:s;this.loa=a?a.loa:0;this.Ija=a?a.Ija:0;this.jN=a?a.jN:1;this.Qg=a?a.Qg:t;this.rm=a?a.rm:s;this.kl=a?a.kl:s;this.$x=a?a.$x:t};Hl.prototype.setId=C("pc");Hl.prototype.getId=Q("pc");
Hl.prototype.getId=Hl.prototype.getId;Hl.prototype.HV=C("wT");Hl.prototype.Ve=Q("wT");Hl.prototype.getStartId=Hl.prototype.Ve;Hl.prototype.rV=C("XR");Hl.prototype.Kd=Q("XR");Hl.prototype.getEndId=Hl.prototype.Kd;Hl.prototype.fe=function(a){this.Sk="string"==typeof a?dvt.M.d0(a):a};Hl.prototype.setPoints=Hl.prototype.fe;Hl.prototype.Ec=Q("Sk");Hl.prototype.getPoints=Hl.prototype.Ec;Hl.prototype.If=C("bN");Hl.prototype.setLabelPosition=Hl.prototype.If;Hl.prototype.lf=Q("bN");
Hl.prototype.getLabelPosition=Hl.prototype.lf;Hl.prototype.er=C("aN");Hl.prototype.Df=Q("aN");Hl.prototype.getLabelBounds=Hl.prototype.Df;Hl.prototype.h1=Q("loa");Hl.prototype.getStartConnectorOffset=Hl.prototype.h1;Hl.prototype.D0=Q("Ija");Hl.prototype.getEndConnectorOffset=Hl.prototype.D0;Hl.prototype.OK=C("jN");Hl.prototype.iB=Q("jN");Hl.prototype.getLinkWidth=Hl.prototype.iB;Hl.prototype.fr=C("Gq");Hl.prototype.dm=Q("Gq");Hl.prototype.getLayoutAttributes=Hl.prototype.dm;Hl.prototype.rc=C("Qg");
Hl.prototype.Lqa=Q("Qg");Hl.prototype.getSelected=Hl.prototype.Lqa;Hl.prototype.GB=C("rm");Hl.prototype.setLabelRotationAngle=Hl.prototype.GB;Hl.prototype.gB=Q("rm");Hl.prototype.getLabelRotationAngle=Hl.prototype.gB;Hl.prototype.lx=C("kl");Hl.prototype.setLabelRotationPoint=Hl.prototype.lx;Hl.prototype.hB=Q("kl");Hl.prototype.getLabelRotationPoint=Hl.prototype.hB;Hl.prototype.TK=C("$x");Hl.prototype.XD=Q("$x");function Gl(a){this.Init(a)}ba("DvtDiagramLayoutContextNode",Gl);dvt.j.u(Gl,dvt.j,"DvtDiagramLayoutContextNode");
Gl.prototype.Init=function(a){this.pc=a?a.pc:s;this.ve=a?a.ve:s;this.eY=a?a.eY:s;this.xJ=a?a.xJ:s;this.bN=a?a.bN:s;this.aN=a?a.aN:s;this.Gq=a?a.Gq:s;this.dia=a?a.dia:t;this.lA=a?a.lA:s;this.Qg=a?a.Qg:t;this.rm=a?a.rm:s;this.kl=a?a.kl:s;this.cj=a?a.cj:s;this.Gw=a?a.Gw:s;this.Zu=a?a.Zu:s;this.mm=a?a.mm:t;this.ZV=a?a.Oa():s;this.yE=p;this.Zca=new yd(0,0)};Gl.prototype.setId=C("pc");Gl.prototype.getId=Q("pc");Gl.prototype.getId=Gl.prototype.getId;Gl.prototype.Rba=function(a){this.Gw=this.ve=a};
Gl.prototype.rf=function(){!this.yE&&this.ZV&&this.ZV.jV(this);return this.ve};Gl.prototype.getBounds=Gl.prototype.rf;Gl.prototype.Xh=function(){!this.yE&&this.ZV&&this.ZV.jV(this);return this.eY};Gl.prototype.getContentBounds=Gl.prototype.Xh;Gl.prototype.Gm=function(a){this.xJ=a;Il(this,this)};Gl.prototype.setPosition=Gl.prototype.Gm;Gl.prototype.pi=Q("xJ");Gl.prototype.getPosition=Gl.prototype.pi;Gl.prototype.If=C("bN");Gl.prototype.setLabelPosition=Gl.prototype.If;Gl.prototype.lf=Q("bN");
Gl.prototype.getLabelPosition=Gl.prototype.lf;Gl.prototype.er=C("aN");Gl.prototype.Df=Q("aN");Gl.prototype.getLabelBounds=Gl.prototype.Df;Gl.prototype.fr=C("Gq");Gl.prototype.dm=Q("Gq");Gl.prototype.getLayoutAttributes=Gl.prototype.dm;Gl.prototype.gE=C("dia");Gl.prototype.VU=Q("dia");Gl.prototype.isReadOnly=Gl.prototype.VU;Gl.prototype.Wba=C("lA");Gl.prototype.Qpa=Q("lA");Gl.prototype.getContainerId=Gl.prototype.Qpa;Gl.prototype.rc=C("Qg");Gl.prototype.Lqa=Q("Qg");Gl.prototype.getSelected=Gl.prototype.Lqa;
Gl.prototype.GB=C("rm");Gl.prototype.setLabelRotationAngle=Gl.prototype.GB;Gl.prototype.gB=Q("rm");Gl.prototype.getLabelRotationAngle=Gl.prototype.gB;Gl.prototype.lx=C("kl");Gl.prototype.setLabelRotationPoint=Gl.prototype.lx;Gl.prototype.hB=Q("kl");Gl.prototype.getLabelRotationPoint=Gl.prototype.hB;
Gl.prototype.dH=function(a,b,c,d){this.Sb()&&(this.cj={},"number"===typeof a||"string"===typeof a||(d=a.left,b=a.right,c=a.bottom,a=a.top),this.cj.top=a,this.cj.right=b,this.cj.bottom=c,this.cj.left=d,this.Gw&&(this.ve=new Eb(this.Gw.x,this.Gw.y,this.Gw.w+d+b,this.Gw.h+a+c)),this.Zu&&(this.eY=new Eb(this.Zu.x,this.Zu.y,this.Zu.w+d+b,this.Zu.h+a+c)))};Gl.prototype.setContainerPadding=Gl.prototype.dH;Gl.prototype.Bt=Q("cj");Gl.prototype.getContainerPadding=Gl.prototype.Bt;Gl.prototype.Nh=C("mm");
Gl.prototype.Sb=Q("mm");Gl.prototype.isDisclosed=Gl.prototype.Sb;Gl.prototype.Uba=C("u1a");Gl.prototype.he=Q("u1a");Gl.prototype.getChildNodes=Gl.prototype.he;Gl.prototype.FV=C("kD");Gl.prototype.np=Q("kD");Gl.prototype.getParentNode=Gl.prototype.np;function Il(a,b){var c=b.np();c&&c.yE&&(c.yE=t,Il(a,c))}function yd(a,b){this.Init(a,b)}ba("DvtDiagramPoint",yd);dvt.j.u(yd,dvt.j,"DvtDiagramPoint");yd.prototype.Init=function(a,b){this.x=a===s||isNaN(a)?0:a;this.y=b===s||isNaN(b)?0:b};
function Eb(a,b,c,d){this.Init(a,b,c,d)}ba("DvtDiagramRectangle",Eb);dvt.j.u(Eb,dvt.j,"DvtDiagramRectangle");Eb.prototype.Init=function(a,b,c,d){this.x=a===s||isNaN(a)?0:a;this.y=b===s||isNaN(b)?0:b;this.w=c===s||isNaN(c)?0:c;this.h=d===s||isNaN(d)?0:d};dvt.Xb={};dvt.j.u(dvt.Xb,dvt.j);dvt.Xb.fob=function(a,b,c){a&&b&&a instanceof Aa&&b instanceof Aa?dvt.Xb.BWa(a,b,c):a&&b&&a instanceof dvt.ge&&b instanceof dvt.ge?dvt.Xb.AWa(a,b,c):a&&b&&dvt.Xb.fza(a,b,c)};
dvt.Xb.BWa=function(a,b,c){dvt.Xb.I9a(a,b,c);var d=a.ud?a.ud():s,e=b.ud?b.ud():s;c&&(a.Sa()!=b.Sa()&&c.J(dvt.B.Q,a,a.Sa,a.Ia,b.Sa()),a.$a()!=b.$a()&&c.J(dvt.B.Q,a,a.$a,a.kb,b.$a()),d&&e&&d instanceof dvt.Yb&&e instanceof dvt.Yb&&d.yc()!=e.yc()&&c.J(dvt.B.vq,a,a.ud,a.ga,e))};
dvt.Xb.fza=function(a,b,c){var d=a.V(a.g().xe),e=b.V(b.g().xe),f=a.ud?a.ud():s,h=b.ud?b.ud():s,k=a.Ad?a.Ad():s,m=b.Ad?b.Ad():s;if(c){var n=b=1;d.a!=e.a&&(b=e.a/d.a);d.b!=e.b&&(n=e.b/d.b);var q=0,r=0;d.x!=e.x&&(q=e.x-d.x);d.y!=e.y&&(r=e.y-d.y);f&&h&&f instanceof dvt.Yb&&h instanceof dvt.Yb&&f.yc()!=h.yc()&&c.J(dvt.B.vq,a,a.ud,a.ga,h);k&&m&&k instanceof dvt.ua&&m instanceof dvt.ua&&k.yc()!=m.yc()&&c.J(dvt.B.UL,a,a.Ad,a.xa,m);if(0!=q||0!=r||1!=b||1!=n)e=new dvt.Qb,e.translate(-d.x,-d.y),e.scale(b,n),
e.translate(d.x,d.y),e.translate(q,r),d=a.lb().Ca(),d.concat(e),c.J(dvt.B.Li,a,a.lb,a.rb,d)}};dvt.Xb.I9a=function(a,b,c){if(c){var d=dvt.Xb.HY(a);b=dvt.Xb.HY(b);d.Te(b)||(d=dvt.Xb.HY(a.getParent()),d.SD(),b.concat(d),c.J(dvt.B.Li,a,a.lb,a.rb,b))}};dvt.Xb.HY=function(a){var b=[a];for(a=a.getParent();a;)b.push(a),a=a.getParent();a=new dvt.Qb;for(var c=0;c<b.length;c++)a.concat(b[c].lb());return a};
dvt.Xb.AWa=function(a,b,c){var d=dvt.Xb.yCa(a),e=dvt.Xb.yCa(b);if(!d||!e)dvt.Xb.fza(a,b,c);else{a!=d&&(dvt.Xb.F8a(a,d),a=d);var d=a.ud?a.ud():s,f=b.ud?b.ud():s;c&&(d&&f&&d instanceof dvt.Yb&&f instanceof dvt.Yb&&d.yc()!=f.yc()&&c.J(dvt.B.vq,a,a.ud,a.ga,f),b=dvt.Xb.HY(b),dvt.Xb.I0a(a,e,c,b))}};dvt.Xb.yCa=function(a){if(a instanceof dvt.pb)return a;if(!(a instanceof dvt.La||a instanceof dvt.yb)){var b=dvt.Xb.m4a(a);if(b)return new dvt.pb(a.g(),b)}return s};
dvt.Xb.F8a=function(a,b){var c=a.ud(),d=a.Ad(),e=a.lb(),f=a.getParent().ni(a);a.getParent().Ib(b,f);a.ga(s);a.xa(s);a.rb(s);b.ga(c);b.xa(d);b.rb(e);c=a.Gb();for(d=0;d<c;d++)b.k(a.Za(0));a.getParent().removeChild(a);a.qa&&a.qa()};
dvt.Xb.m4a=function(a){var b;if(a instanceof dvt.ka){var c=a.ds(),d=a.Mt(),e=a.Sa(),f=a.$a(),h=a.getWidth(),k=a.getHeight();if(c&&d){a=0.5*Math.PI;var m=Math.cos(0.5*a),n=Math.sin(0.5*a),q=m,r=-n,u=(4-m)/3,v=(1-m)*(3-m)/(3*n);b=u;var y=-v,m=new dvt.N(m,n),q=new dvt.N(q,r),u=new dvt.N(u,v),y=new dvt.N(b,y),v=new dvt.Qb;v.rotate(0.5*a);v.scale(c,d);a=v.Me(u);var m=v.Me(y),x=e+h-c,z=f+d;b=["M",e+c,f,"L",e+h-c,f,"C",x+a.x,z-a.y,x+m.x,z-m.y,e+h,f+d];z=f+k-d;b.push("L",e+h,f+k-d,"C",x+m.x,z+m.y,x+a.x,z+
a.y,e+h-c,f+k);x=e+c;b.push("L",e+c,f+k,"C",x-a.x,z+a.y,x-m.x,z+m.y,e,f+k-d);z=f+d;b.push("L",e,f+d,"C",x-m.x,z-m.y,x-a.x,z-a.y,e+c,f,"Z")}else b=["M",e,f,"L",e+h,f,"L",e+h,f+k,"L",e,f+k,"Z"]}else if(a instanceof dvt.uu||a instanceof dvt.Qh){if(c=a.Ec()){b=[];for(f=0;f<c.length;f+=2)0==f?b.push("M",c[f],c[f+1]):b.push("L",c[f],c[f+1]);a instanceof dvt.Qh&&b.push("Z")}}else if(a instanceof dvt.Vc)b=["M",a.ks(),a.Nt(),"L",a.vv(),a.ax()];else if(a instanceof dvt.Ck){x=a.mj();z=a.nj();a instanceof dvt.su?
(c=a.ds(),d=a.Mt()):d=c=a.Am();e=-0.5*Math.PI;a=2*Math.PI/4;m=Math.cos(0.5*a);n=Math.sin(0.5*a);q=m;r=-n;u=(4-m)/3;v=(1-m)*(3-m)/(3*n);b=u;y=-v;m=new dvt.N(m,n);q=new dvt.N(q,r);u=new dvt.N(u,v);y=new dvt.N(b,y);b=[];for(f=0;4>f;f++)v=new dvt.Qb,v.rotate(e+f*a),v.scale(c,d),0==f&&(h=v.Me(q),b.push("M",x+h.x,z+h.y)),h=v.Me(y),k=v.Me(u),v=v.Me(m),b.push("C",x+h.x,z+h.y,x+k.x,z+k.y,x+v.x,z+v.y);b.push("Z")}else a instanceof dvt.Jf&&(c=a.Qw()*dvt.Fc.IE,d=a.Zp()*dvt.Fc.IE,b=["M",a.mj()+a.ds()*Math.cos(c),
a.nj()-a.Mt()*Math.sin(c),"A",a.ds(),a.Mt(),"0",180<Math.abs(a.Zp())?"1":"0",0<a.Zp()?"0":"1",a.mj()+a.ds()*Math.cos(c+d),a.nj()-a.Mt()*Math.sin(c+d)],a.xM===dvt.Jf.RP?b.push("Z"):a.xM===dvt.Jf.afa&&b.push("L",a.mj(),a.nj(),"Z"));return b};dvt.Xb.GF=function(a,b){for(;b<a.length&&!isNaN(a[b]);)b++;return b};dvt.Xb.hS=function(a,b){for(;-1<b&&!isNaN(a[b]);)b--;return b};dvt.Xb.DCa=function(a){for(var b=0,c=0;c<a.length;c++)isNaN(a[c])&&b++;return b};
dvt.Xb.g6a=function(a,b){var c=dvt.Xb.DCa(a),d=dvt.Xb.DCa(b);if(c!=d){var e=0,f=0;c>d?(e=c-d,f=d,c=b):(e=d-c,f=c,c=a);d=Math.floor(f/e);1>d&&(d=1);f=Math.floor(e/f);1>f&&(f=1);for(var h=-1,k=0;k<c.length;k++)if(isNaN(c[k])){if(h==d)for(var m=h=0;m<f;m++)c.splice(k++,0,"tmp"),e--;h++}for(k=0;k<e;k++)"Z"==c[c.length-1]?c.splice(c.length-1,0,"tmp"):c.push("tmp")}};dvt.Xb.PGa=function(a){return 2<a.length&&"Z"==a[a.length-1]?(a.splice(a.length-1,1),a.push("L",a[1],a[2]),p):t};
dvt.Xb.I0a=function(a,b,c,d){b=dvt.Xb.RLa(a.zO(),b.zO());var e=dvt.Xb.HY(a);e&&dvt.Xb.iKa(b.jta,e);a.rb(s);d&&dvt.Xb.iKa(b.ita,d);a.qs(b.jta);c.J(dvt.B.Hl,a,a.zO,a.qs,b.ita)};
dvt.Xb.RLa=function(a,b){var c=dvt.fa.copy(a),d=dvt.fa.copy(b),e=[],f=[];dvt.Xb.vGa(c);dvt.Xb.vGa(d);dvt.Xb.yGa(c);dvt.Xb.yGa(d);dvt.Xb.zGa(c);dvt.Xb.zGa(d);dvt.Xb.AGa(c);dvt.Xb.AGa(d);var h=dvt.Xb.VBa(c),k=dvt.Xb.VBa(d);dvt.Xb.BJa(h);dvt.Xb.BJa(k);for(var m=0;m<Math.max(h.length,k.length);m++){var n=[],q=[],r=s,u=s;m<h.length?r=h[m]:(r=["M",c[1],c[2]],"Z"==k[m][k[m].length-1]&&r.push("Z"));m<k.length?u=k[m]:(u=["M",d[1],d[2]],"Z"==h[m][h[m].length-1]&&u.push("Z"));dvt.Xb.J0a(r,u,n,q);f=f.concat(n);
e=e.concat(q)}return{jta:f,ita:e}};dvt.Xb.VBa=function(a){for(var b=[],c=0,d=1;d<a.length;d++)if("M"==a[d]||"m"==a[d])b.push(a.slice(c,d)),c=d;1>b.length?b.push(a):c<a.length&&b.push(a.slice(c));return b};dvt.Xb.BJa=function(a){a.sort(dvt.Xb.B1a)};dvt.Xb.B1a=function(a,b){var c=dvt.Xb.bCa(a),d=dvt.Xb.bCa(b);return c>d?-1:d>c?1:0};
dvt.Xb.bCa=function(a){for(var b=0,c=0,d=0,e=0,f=0,h=0,k=0,m=0;m<a.length;){switch(a[m]){case "M":f=a[m+1];h=a[m+2];break;case "L":b=a[m+1];c=a[m+2];break;case "C":b=a[m+5];c=a[m+6];break;case "Q":b=a[m+3];c=a[m+4];break;case "A":b=a[m+6];c=a[m+7];break;case "Z":b=f,c=h}k+=Math.sqrt((b-d)*(b-d)+(c-e)*(c-e));m=dvt.Xb.GF(a,m+1);d=b;e=c}return k};
dvt.Xb.J0a=function(a,b,c,d){var e=dvt.Xb.PGa(a),f=dvt.Xb.PGa(b);if(e||a[a.length-2]==a[1]&&a[a.length-1]==a[2])a=dvt.Xb.xGa(a),a=dvt.Xb.wGa(a);if(f||b[b.length-2]==b[1]&&b[b.length-1]==b[2])b=dvt.Xb.xGa(b),b=dvt.Xb.wGa(b);dvt.Xb.g6a(a,b);dvt.Xb.H0a(a,b,c,d);e&&a.push("Z");f&&b.push("Z")};
dvt.Xb.H0a=function(a,b,c,d){for(var e=0,f=0,h=0,k=0,m=0,n=0,q=t,r=t;-1<e||-1<f;){var u=-1<e?a[e]:s,v=-1<f?b[f]:s,y=-1<e?dvt.Xb.GF(a,e+1):-1,x=-1<f?dvt.Xb.GF(b,f+1):-1;if(u==v){for(;f<x;f++)d.push(b[f]);for(f=e;f<y;f++)c.push(a[f])}else!u||"tmp"==u?"L"==v?(d.push("L",b[f+1],b[f+2]),c.push("L",h,k)):"Q"==v?(d.push("Q",b[f+1],b[f+2],b[f+3],b[f+4]),c.push("Q",h,k,h,k)):"C"==v?(d.push("C",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6]),c.push("C",h,k,h,k,h,k)):"A"==v?(d.push("A",b[f+1],b[f+2],b[f+3],b[f+4],
b[f+5],b[f+6],b[f+7]),c.push("A",0,0,b[f+3],b[f+4],b[f+5],h,k)):"Z"==v&&(d.push("Z"),c.push("Z")):!v||"tmp"==v?"L"==u?(d.push("L",m,n),c.push("L",a[e+1],a[e+2])):"Q"==u?(d.push("Q",m,n,m,n),c.push("Q",a[e+1],a[e+2],a[e+3],a[e+4])):"C"==u?(d.push("C",m,n,m,n,m,n),c.push("C",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6])):"A"==u?(d.push("A",0,0,a[e+3],a[e+4],a[e+5],m,n),c.push("A",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6],a[e+7])):"Z"==u&&(d.push("Z"),c.push("Z")):"L"==u?"Q"==v?(d.push("Q",b[f+1],b[f+2],
b[f+3],b[f+4]),c.push("Q",h+0.5*(a[e+1]-h),k+0.5*(a[e+2]-k),a[e+1],a[e+2])):"C"==v?(d.push("C",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6]),c.push("C",h+0.5*(a[e+1]-h),k+0.5*(a[e+2]-k),h+0.5*(a[e+1]-h),k+0.5*(a[e+2]-k),a[e+1],a[e+2])):"A"==v?(d.push("L",m,n,"A",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6],b[f+7]),c.push("L",a[e+1],a[e+2],"A",0,0,b[f+3],b[f+4],b[f+5],a[e+1],a[e+2])):"Z"==v&&(q=p,d.push("L",m,n),c.push("L",a[e+1],a[e+2])):"Q"==u?"L"==v?(d.push("Q",m+0.5*(b[f+1]-m),n+0.5*(b[f+2]-n),b[f+1],
b[f+2]),c.push("Q",a[e+1],a[e+2],a[e+3],a[e+4])):"C"==v?(d.push("C",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6]),c.push("C",a[e+1],a[e+2],a[e+1],a[e+2],a[e+3],a[e+4])):"A"==v?(d.push("Q",m,n,m,n,"A",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6],b[f+7]),c.push("Q",a[e+1],a[e+2],a[e+3],a[e+4],"A",0,0,b[f+3],b[f+4],b[f+5],a[e+3],a[e+4])):"Z"==v&&(q=p,d.push("Q",m,n,m,n),c.push("Q",a[e+1],a[e+2],a[e+3],a[e+4])):"C"==u?"L"==v?(d.push("C",m+0.5*(b[f+1]-m),n+0.5*(b[f+2]-n),m+0.5*(b[f+1]-m),n+0.5*(b[f+2]-n),b[f+
1],b[f+2]),c.push("C",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6])):"Q"==v?(d.push("C",b[f+1],b[f+2],b[f+1],b[f+2],b[f+3],b[f+4]),c.push("C",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6])):"A"==v?(d.push("C",m,n,m,n,m,n,"A",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6],b[f+7]),c.push("C",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6],"A",0,0,b[f+3],b[f+4],b[f+5],a[e+5],a[e+6])):"Z"==v&&(q=p,d.push("C",m,n,m,n,m,n),c.push("C",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6])):"A"==u?"L"==v?(d.push("L",b[f+1],b[f+2],"A",
0,0,a[e+3],a[e+4],a[e+5],b[f+1],b[f+2]),c.push("L",h,k,"A",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6],a[e+7])):"Q"==v?(d.push("Q",b[f+1],b[f+2],b[f+3],b[f+4],"A",0,0,a[e+3],a[e+4],a[e+5],b[f+3],b[f+4]),c.push("Q",h,k,h,k,"A",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6],a[e+7])):"C"==v?(d.push("C",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6],"A",0,0,a[e+3],a[e+4],a[e+5],b[f+5],b[f+6]),c.push("C",h,k,h,k,h,k,"A",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6],a[e+7])):"Z"==v&&(q=p,d.push("A",0,0,a[e+3],a[e+4],a[e+
5],m,n),c.push("A",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6],a[e+7])):"Z"==u&&(r=p,"L"==v?(d.push("L",b[f+1],b[f+2]),c.push("L",h,k)):"Q"==v?(d.push("Q",b[f+1],b[f+2],b[f+3],b[f+4]),c.push("Q",h,k,h,k)):"C"==v?(d.push("C",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6]),c.push("C",h,k,h,k,h,k)):"A"==v&&(d.push("A",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6],b[f+7]),c.push("A",0,0,b[f+3],b[f+4],b[f+5],h,k)));-1<y&&("Z"!=u&&"tmp"!=u)&&(h=a[y-2],k=a[y-1]);-1<x&&("Z"!=v&&"tmp"!=v)&&(m=b[x-2],n=b[x-1]);e=y;f=
x;if(e>=a.length||0>e)e=-1;if(f>=b.length||0>f)f=-1}if(r||q)d.push("Z"),c.push("Z")};
dvt.Xb.wGa=function(a){if(!dvt.Xb.F5a(a)){for(var b=["M"],c=dvt.Xb.hS(a,a.length-1);-1<c;){var d=a[c];switch(d){case "M":b.push(a[c+1],a[c+2]);break;case "L":b.push(a[c+1],a[c+2]);b.push(d);break;case "Q":b.push(a[c+3],a[c+4]);b.push(d);b.push(a[c+1],a[c+2]);break;case "C":b.push(a[c+5],a[c+6]);b.push(d);b.push(a[c+3],a[c+4]);b.push(a[c+1],a[c+2]);break;case "A":b.push(a[c+6],a[c+7]),b.push(d),b.push(a[c+1],a[c+2],a[c+3],a[c+4]),b.push(0==a[c+5]?1:0)}c=dvt.Xb.hS(a,c-1)}return b}return a};
dvt.Xb.F5a=function(a){for(var b=[],c=0,d=Number.MAX_VALUE,e=Number.MAX_VALUE,f=dvt.Xb.hS(a,a.length-1),h=1;h<f;){h=dvt.Xb.GF(a,h);if(0<h-2&&"Z"!=a[h-1]){var k=a[h-2],m=a[h-1];b.push(k,m);if(m<e||m==e&&k<d)d=k,e=m,c=b.length-2}h+=1}k=h=f=a=0;0<c?(a=b[c-2],f=b[c-1]):(a=b[b.length-2],f=b[b.length-1]);c<b.length-2?(h=b[c+2],k=b[c+3]):(h=b[0],k=b[1]);return 0>d*k+a*e+f*h-(f*d+e*h+a*k)?t:p};
dvt.Xb.xGa=function(a){for(var b=0,c=Number.MAX_VALUE,d=Number.MAX_VALUE,e=0,f=dvt.Xb.hS(a,a.length-1),h=1;h<f;){var k=dvt.Xb.GF(a,h);if(0<k-2&&"Z"!=a[k-1]){var h=a[k-2],m=a[k-1];if(m<d||m==d&&h<c)c=h,d=m,b=e}h=k+1;e=k}return 0<b?(k=dvt.Xb.GF(a,b+1),b=["M"],c=a.slice(k-2,a.length),b=b.concat(c),c=a.slice(3,k),b=b.concat(c)):a};
dvt.Xb.i4a=function(a){switch(a){case "H":case "h":case "V":case "v":return 1;case "M":case "m":case "L":case "l":case "T":case "t":return 2;case "Q":case "q":case "S":case "s":return 4;case "C":case "c":return 6;case "A":case "a":return 7}return 0};
dvt.Xb.vGa=function(a){for(var b=0;b<a.length;){var c=a[b],d=dvt.Xb.i4a(c);switch(c){case "M":b+d+1<a.length&&!isNaN(a[b+d+1])&&a.splice(b+d+1,0,"L");break;case "m":b+d+1<a.length&&!isNaN(a[b+d+1])&&a.splice(b+d+1,0,"l");break;case "Z":case "z":break;default:b+d+1<a.length&&!isNaN(a[b+d+1])&&a.splice(b+d+1,0,c)}b+=d+1}};
dvt.Xb.yGa=function(a){for(var b=0,c=0,d=0,e=0,f=0;f<a.length;){switch(a[f]){case "m":a[f]="M";0<f&&(a[f+1]=b+a[f+1],a[f+2]=c+a[f+2]);b=a[f+1];c=a[f+2];d=b;e=c;break;case "l":a[f]="L";a[f+1]=b+a[f+1];a[f+2]=c+a[f+2];b=a[f+1];c=a[f+2];break;case "h":a[f]="H";a[f+1]=b+a[f+1];b=a[f+1];break;case "v":a[f]="V";a[f+1]=c+a[f+1];c=a[f+1];break;case "c":a[f]="C";a[f+1]=b+a[f+1];a[f+2]=c+a[f+2];a[f+3]=b+a[f+3];a[f+4]=c+a[f+4];a[f+5]=b+a[f+5];a[f+6]=c+a[f+6];b=a[f+5];c=a[f+6];break;case "s":a[f]="S";a[f+1]=
b+a[f+1];a[f+2]=c+a[f+2];a[f+3]=b+a[f+3];a[f+4]=c+a[f+4];b=a[f+3];c=a[f+4];break;case "q":a[f]="Q";a[f+1]=b+a[f+1];a[f+2]=c+a[f+2];a[f+3]=b+a[f+3];a[f+4]=c+a[f+4];b=a[f+3];c=a[f+4];break;case "t":a[f]="T";a[f+1]=b+a[f+1];a[f+2]=c+a[f+2];b=a[f+1];c=a[f+2];break;case "a":a[f]="A";a[f+6]=b+a[f+6];a[f+7]=c+a[f+7];b=a[f+6];c=a[f+7];break;case "z":a[f]="Z";b=d;c=e;break;case "M":b=a[f+1];c=a[f+2];d=b;e=c;break;case "L":b=a[f+1];c=a[f+2];break;case "H":b=a[f+1];break;case "V":c=a[f+1];break;case "C":b=a[f+
5];c=a[f+6];break;case "S":b=a[f+3];c=a[f+4];break;case "Q":b=a[f+3];c=a[f+4];break;case "T":b=a[f+1];c=a[f+2];break;case "A":b=a[f+6];c=a[f+7];break;case "Z":b=d,c=e}f=dvt.Xb.GF(a,f+1)}};
dvt.Xb.zGa=function(a){for(var b=0,c=0,d=0,e=0,f=0;f<a.length;){switch(a[f]){case "M":b=a[f+1];c=a[f+2];d=b;e=c;break;case "L":b=a[f+1];c=a[f+2];break;case "H":b=a[f+1];a[f]="L";a.splice(f+2,0,c);break;case "V":c=a[f+1];a[f]="L";a.splice(f+1,0,b);break;case "C":b=a[f+5];c=a[f+6];break;case "S":var h=dvt.Xb.hS(a,f-1),k=b,m=c;"C"==a[h]&&(m=a[h+4],k=b+(b-a[h+3]),m=c+(c-m));a[f]="C";a.splice(f+1,0,k,m);b=a[f+5];c=a[f+6];break;case "Q":b=a[f+3];c=a[f+4];break;case "T":h=dvt.Xb.hS(a,f-1);k=b;m=c;"Q"==a[h]&&
(m=a[h+2],k=b+(b-a[h+1]),m=c+(c-m));a[f]="Q";a.splice(f+1,0,k,m);b=a[f+3];c=a[f+4];break;case "A":b=a[f+6];c=a[f+7];break;case "Z":b=d,c=e}f=dvt.Xb.GF(a,f+1)}};dvt.Xb.AGa=function(a){for(var b=0,c=0,d=0;d<a.length;d++)"Z"==a[d]?d+1<a.length&&"M"!=a[d+1]&&"m"!=a[d+1]&&a.splice(d+1,0,"M",b,c):"M"==a[d]&&(b=a[d+1],c=a[d+2])};
dvt.Xb.iKa=function(a,b){for(var c=s,d=0;d<a.length;){switch(a[d]){case "M":case "L":c=b.Me(new dvt.N(a[d+1],a[d+2]));a[d+1]=c.x;a[d+2]=c.y;break;case "Q":c=b.Me(new dvt.N(a[d+1],a[d+2]));a[d+1]=c.x;a[d+2]=c.y;c=b.Me(new dvt.N(a[d+3],a[d+4]));a[d+3]=c.x;a[d+4]=c.y;break;case "C":c=b.Me(new dvt.N(a[d+1],a[d+2]));a[d+1]=c.x;a[d+2]=c.y;c=b.Me(new dvt.N(a[d+3],a[d+4]));a[d+3]=c.x;a[d+4]=c.y;c=b.Me(new dvt.N(a[d+5],a[d+6]));a[d+5]=c.x;a[d+6]=c.y;break;case "A":var c=b.Me(new dvt.N(0,0)),e=b.Me(new dvt.N(a[d+
1],0)),f=b.Me(new dvt.N(0,a[d+2])),f=Math.sqrt((f.x-c.x)*(f.x-c.x)+(f.y-c.y)*(f.y-c.y));a[d+1]=Math.sqrt((e.x-c.x)*(e.x-c.x)+(e.y-c.y)*(e.y-c.y));a[d+2]=f;c=b.Me(new dvt.N(a[d+6],a[d+7]));a[d+6]=c.x;a[d+7]=c.y}d=dvt.Xb.GF(a,d+1)}};function ea(a,b,c){this.Init(a,b,c)}ba("DvtBaseDiagram",ea);dvt.j.u(ea,dvt.fc,"DvtBaseDiagram");S=ea.prototype;
S.Init=function(a,b,c){ea.q.Init.call(this,a,b,c);this.g().xe.ib().setAttributeNS(s,"text-rendering","geometricPrecision");this.Ala;this.CS=this.Jr=s;this.XY;this.$ha=p;this.Zo=new dvt.ca(a);this.Qk=new dvt.ca(a);this.Oy=new dvt.ca(a);this.XE=dvt.kd.lua;this.Hwa()};S.GW=function(){var a=this.Ma;a.HB(this.jK());a.wz(this.ND());a.DB(this.mb());a.Ja.k(this.Zo);a.Ja.k(this.Qk);a.Ja.k(this.Oy)};S.DB=function(a){this.XE=a;this.Ma&&this.Ma.DB(a)};S.mb=Q("XE");S.wz=function(a){this.BA=a;this.Ma&&this.Ma.wz(a)};
S.ND=Q("BA");S.HB=function(a){this.Ay=a;this.Ma&&this.Ma.HB(a)};S.jK=Q("Ay");S.Hwa=function(){this.wz(2);this.HB(0)};S.Nm=function(){this.kS||(ea.q.Nm.call(this),this.GW(),this.vu());this.kS=t};S.vu=B();S.da=R(s);S.gd=R(s);S.iQ=function(){return[]};S.wH=function(){return[]};S.xg=function(){return this.wH().length};ea.prototype.getNodeCount=ea.prototype.xg;ea.prototype.Ht=function(){return this.iQ().length};ea.prototype.getLinkCount=ea.prototype.Ht;
function Ab(a,b){if(b&&a.Qp)a.LI?(a.LI.Ia(a.Ab/2),a.LI.kb(a.Lb/2),dvt.Aa.sd(a.LI,a.getWidth()-2*dvt.Aa.Dda,Infinity,a)):a.LI=a.fua(a.Qp);else if(a.LI){var c=a.LI.getParent();c&&c.removeChild(a.LI);a.LI=s}}ea.prototype.fua=function(a){var b=this.v();return dvt.Aa.lq(this,a,new dvt.U(0,0,this.getWidth(),this.getHeight()),this.Ua(),b._statusMessageStyle)};ea.prototype.c2=C("XY");ea.prototype.setInitAnim=ea.prototype.c2;S=ea.prototype;S.Yj=Q("Zc");
S.JB=function(a){this.Zc="single"==a?new dvt.Tc(dvt.Tc.Rz):"multiple"==a?new dvt.Tc(dvt.Tc.Oz):s;this.Ua().IB(this.Zc)};function La(a){return a.Zc?a.Zc.Vd():s}S.Pt=function(){return this.Zc?p:t};S.Ua=Q("nc");function Jl(a){return a.Qk}function Kl(a){return a.Zo}function Cb(a){var b=new Fl,c=dvt.o.$(a.g());b.fw=c;a=new Eb(0,0,a.getWidth(),a.getHeight());b.Gia=a;return b}
S.zx=function(a,b,c){var d=new Gl;d.setId(a.getId?a.getId():a.getData().getId());d.Rba(Od.rO(a.ag()));var e=Od.rO(a.Xh());d.eY=e;d.Zu=e;d.fr(a.dm(b));d.er(Od.rO(a.Df()));d.If(Od.aLa(a.lf()));d.rc(p==a.tb());if(a.Sb()&&(d.Nh(p),b=Db(a.Bt()),d.Sb()&&(d.cj=b)))d.Gw&&(d.Gw=new Eb(d.Gw.x,d.Gw.y,d.Gw.w-(b.left+b.right),d.Gw.h-(b.top+b.bottom))),d.Zu&&(d.Zu=new Eb(d.Zu.x,d.Zu.y,d.Zu.w-(b.left+b.right),d.Zu.h-(b.top+b.bottom)));d.Wba(a.getData().H0?a.getData().af:s);d.ZV=this;d.yE=!c;return d};
S.pH=function(a,b,c,d){var e=new Hl;e.setId(a.getId?a.getId():a.getData().getId());e.HV(b?b:a.getData().Ve());e.rV(c?c:a.getData().Kd());e.fr(a.dm(d));e.er(Od.rO(a.Df()));e.If(Od.aLa(a.lf()));b=a.h1();e.loa=b;b=a.D0();e.Ija=b;e.OK(a.iB());e.rc(p==a.tb());e.TK(p==a.XD());return e};
S.kH=function(a,b,c){var d=a.Bt();if(d){var e=a.lA;e&&(e=this.da(e))&&e.dH(wd(d),b)}for(var e=d=Number.MAX_VALUE,f=0;f<a.xg();f++){var h=a.FG(f),k=this.da(h.getId()),m=h.pi();m&&(d=Math.min(d,m.x),e=Math.min(e,m.y));k=h.Df();m=h.lf();k&&m&&(d=Math.min(d,m.x+k.x),e=Math.min(e,m.y+k.y))}for(f=0;f<a.Ht();f++){var h=a.hK(f),n=this.gd(h.getId());if(m=h.Ec()){m=kf.Rda(m);for(k=0;k<m.length;k++)var q=m[k],d=Math.min(d,q.x),e=Math.min(e,q.y)}k=h.Df();m=h.lf();k&&m&&(d=Math.min(d,m.x+k.x),e=Math.min(e,m.y+
k.y))}e=this.aua(-d,-e);d=e.x;e=e.y;for(f=0;f<a.xg();f++){h=a.FG(f);k=this.da(h.getId());(m=h.pi())&&k.dC(m.x+d,m.y+e,b);var r=h.Df(),q=h.lf();if(r&&q){var m=new dvt.N(q.x-m.x,q.y-m.y),q=h.rm,u=Od.$Ka(h.kl);b?(b.J(dvt.B.Qz,k,k.Df,k.er,r),k.lf()?b.J(dvt.B.Pz,k,k.lf,k.If,m):k.If(m),q!=s&&b.J(dvt.B.Q,k,k.gB,k.GB,q),u&&(k.kl?b.J(dvt.B.Pz,k,k.hB,k.lx,u):k.lx(u))):(k.er(r),k.If(m),q!=s&&k.GB(q),u&&k.lx(u))}k.Sb()&&(h=h.Bt())&&k.dH(wd(h),b)}if(!this.eF)for(f=0;f<a.Ht();f++){h=a.hK(f);n=this.gd(h.getId());
if(m=h.Ec()){0<m.length&&!isNaN(m[0])&&(m=kf.T2(m));for(var v=[],k=0;k<m.length;)isNaN(m[k])?(v.push(m[k]),k++):(v.push(m[k]+d),v.push(m[k+1]+e),k+=2);b&&n.Ec()?0<v.length&&isNaN(v[0])?(k=dvt.Xb.RLa(n.Ec(),v),n.fe(k.jta),b.J(dvt.B.Hl,n,n.Ec,n.fe,k.ita),dvt.ab.Nb(b,function(){n.fe(v)})):b.J(dvt.B.Os,n,n.Ec,n.fe,v):n.fe(v)}k=Od.eab(h.Df());m=h.lf();q=h.rm;u=Od.$Ka(h.kl);k&&m&&(h=new dvt.N(m.x+d,m.y+e),b?(b.J(dvt.B.Qz,n,n.Df,n.er,k),n.lf()?b.J(dvt.B.Pz,n,n.lf,n.If,h):n.If(h),q!=s&&b.J(dvt.B.Q,n,n.gB,
n.GB,q),u&&(n.kl?b.J(dvt.B.Pz,n,n.hB,n.lx,u):n.lx(u))):(n.er(k),n.If(h),q!=s&&n.GB(q),u&&n.lx(u)))}if(b=a.tK())this.Jr=new dvt.U(b.x+d,b.y+e,b.w,b.h),this.CS=a.lA;c&&(this.Ala=new dvt.N(d,e))};function Ya(a,b){var c;if(a.Jr&&(c=new dvt.U(a.Jr.x,a.Jr.y,a.Jr.a,a.Jr.b),a.CS))for(var d=a.da(a.CS);d;){var e=d.la(),f=d.ia();if(b){var h=b.Zf(d,d.la),k=b.Zf(d,d.ia);if(h||0==h)e=h;if(k||0==k)f=k}c.x+=e;c.y+=f;d=(d=d.getData().H0?d.getData().af:s)?a.da(d):s}return c}S.aua=function(a,b){return new dvt.N(a,b)};
S.NB=function(a,b){if(0==this.Ay){var c=this.Ma,d=b?b:Xa(this,a,l,l),e=Ll(this,d);c.HB(0.5*Math.min(e,c.ND()));return d}return s};function Ll(a,b){if(!b)return 0;var c=a.Ma;return Math.min((a.Ab-2*c.Nw)/b.a,(a.Lb-2*c.Nw)/b.b)}
function Xa(a,b,c,d){var e=s,f,h,k,m,n=a.Ma.Ja;c||(c=a.wH());for(var q=0;q<c.length;q++)if(f=c[q],(m=a.da(f))&&m.ic&&!m.dg){var r=m,u=b;f=r.ag();h=new dvt.U(f.x,f.y,f.a,f.b);k=s;u&&(k=u.Zf(r,r.lf));k||(k=r.lf());var v=s,y=s;u&&(v=u.Zf(r,r.gB),y=u.Zf(r,r.hB));v==s&&(v=r.rm);y||(y=r.kl);r=r.Df();k&&r&&(v!=s&&(r=Ml(r,v,y)),h.x=Math.min(f.x,r.x+k.x),h.y=Math.min(f.y,r.y+k.y),h.a=Math.max(f.x+f.a,r.x+k.x+r.a)-h.x,h.b=Math.max(f.y+f.b,r.y+k.y+r.b)-h.y);f=h;k=h=s;b&&(h=b.Zf(m,m.la),k=b.Zf(m,m.ia));h==s&&
(h=m.la());k==s&&(k=m.ia());f.x+=h;f.y+=k;if(h=m.getData().H0?m.getData().af:s)h=m.getParent(),m=rd(new dvt.N(f.x,f.y),h,b),m=sd(m,n,b),h=rd(new dvt.N(f.x+f.a,f.y+f.b),h,b),h=sd(h,n,b),f.x=m.x,f.y=m.y,f.a=h.x-m.x,f.b=h.y-m.y;e?(m=e.x,h=e.y,e.x=Math.min(e.x,f.x),e.y=Math.min(e.y,f.y),e.a=Math.max(m+e.a,f.x+f.a)-e.x,e.b=Math.max(h+e.b,f.y+f.b)-e.y):e=f}d||(d=a.iQ());for(q=0;q<d.length;q++)if(c=d[q],(c=a.gd(c))&&c.ic){m=c;h=b;f=new dvt.U(Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);
k=s;h&&(k=h.Zf(m,m.Ec));k||(k=m.Ec());if(k){k=kf.Rda(k);for(var x=l,x=r=y=v=l,u=0;u<k.length;u++)x=k[u],v=Math.max(f.x+f.a,x.x),y=Math.max(f.y+f.b,x.y),r=Math.min(f.x,x.x),x=Math.min(f.y,x.y),f.x=r,f.y=x,f.a=v-r,f.b=y-x}k=new dvt.U(f.x,f.y,f.a,f.b);v=s;h&&(v=h.Zf(m,m.lf));v==s&&(v=m.lf());r=y=s;h&&(y=h.Zf(m,m.gB),r=h.Zf(m,m.hB));y==s&&(y=m.rm);r||(r=m.kl);m=m.Df();v&&m&&(y!=s&&(m=Ml(m,y,r)),k.x=Math.min(f.x,m.x+v.x),k.y=Math.min(f.y,m.y+v.y),k.a=Math.max(f.x+f.a,m.x+v.x+m.a)-k.x,k.b=Math.max(f.y+
f.b,m.y+v.y+m.b)-k.y);f=k;if(h=c.getData().H0?c.getData().af:s)c=c.getParent(),m=rd(new dvt.N(f.x,f.y),c,b),m=sd(m,n,b),h=rd(new dvt.N(f.x+f.a,f.y+f.b),c,b),h=sd(h,n,b),f.x=m.x,f.y=m.y,f.a=h.x-m.x,f.b=h.y-m.y;e?(m=e.x,h=e.y,e.x=Math.min(e.x,f.x),e.y=Math.min(e.y,f.y),e.a=Math.max(m+e.a,f.x+f.a)-e.x,e.b=Math.max(h+e.b,f.y+f.b)-e.y):e=f}return e}
function Ml(a,b,c){if(b==s&&!c)return a;var d=new dvt.N(a.x,a.y),e=new dvt.N(a.x+a.a,a.y),f=new dvt.N(a.x,a.y+a.b);a=new dvt.N(a.x+a.a,a.y+a.b);var h=new dvt.Qb;b!=s&&(c&&h.translate(-c.x,-c.y),h.rotate(b),c&&h.translate(c.x,c.y));b=h.Me(d);e=h.Me(e);f=h.Me(f);d=h.Me(a);a=Math.min(Math.min(b.x,e.x),Math.min(f.x,d.x));h=Math.max(Math.max(b.x,e.x),Math.max(f.x,d.x));c=Math.min(Math.min(b.y,e.y),Math.min(f.y,d.y));b=Math.max(Math.max(b.y,e.y),Math.max(f.y,d.y));return new dvt.U(a,c,h-a,b-c)}
function sd(a,b,c){for(var d=b.b1(),e=a,f=d.length-1;0<=f;f--){b=d[f];a=b.lb().Ca();var h=s,k=s;c&&(h=c.Zf(b,b.la),k=c.Zf(b,b.ia));h!=s&&(a.Yd=h);k!=s&&(a.Ud=k);a.SD();e=a.Me(e)}return e}function rd(a,b,c){for(var d=b.b1(),e=a,f=0;f<d.length;f++){b=d[f];a=b.lb().Ca();var h=s,k=s;c&&(h=c.Zf(b,b.la),k=c.Zf(b,b.ia));h!=s&&(a.Yd=h);k!=s&&(a.Ud=k);e=a.Me(e)}return e}
S.$V=function(a,b,c,d,e){var f=this.Ma,h=f.gf().a/2,k=f.gf().b/2;c=h-(c+a)*e;d=k-(d+b)*e;a=h-a*e;b=k-b*e;this.Jr&&(k=Ya(this),-k.x*e<c?(h=c+k.x*e,c-=h,a+=h):-k.x*e>a&&(h=-k.x*e-a,c-=h,a+=h),-k.y*e<d?(e=d+k.y*e,d-=e,b+=e):-k.y*e>b&&(e=-k.y*e-b,d-=e,b+=e));f.BV(c);f.CV(d);f.zV(a);f.AV(b)};function wd(a){var b={};b.top=a.top;b.right=a.right;b.bottom=a.bottom;b.left=a.left;return b}function Db(a){var b={};b.top=a.top;b.right=a.right;b.bottom=a.bottom;b.left=a.left;return b}S.jV=B();
function xd(a,b){a.Rba(Od.rO(b.ag()));var c=Od.rO(b.Xh());a.eY=c;a.Zu=c;a.er(Od.rO(b.Df()));a.yE=p}function Pg(a,b){this.Init(a,b)}dvt.j.u(Pg,dvt.FL,"DvtBaseDiagramKeyboardHandler");S=Pg.prototype;S.Init=function(a,b){Pg.q.Init.call(this,a,b);this.C=a};S.Oa=Q("C");S.YD=function(a){return a.keyCode==dvt.G.Sh?t:this.aj(a)&&!a.ctrlKey};S.xv=function(a){return a.keyCode==dvt.G.xi&&a.ctrlKey};
S.Z$=function(a,b,c){b=b.keyCode;if(!c||1>c.length||!a)return s;var d=c[0];a=a.Ig();a=a.x+a.a/2;for(var e=0;e<c.length;e++){var f=c[e],h=f.Ig(),h=h.x+h.a/2;if(b==dvt.G.CL&&h<=a||b==dvt.G.dL&&h>=a){d=f;break}}return d};
S.saa=function(a,b,c,d){if(!d)return s;if(!b)return d[0];if(!a)return b;for(var e=0;e<d.length;e++){var f=d[e],h=f,k=a,m=f,n=this.sL(m.Ve?m.Ve():m.getData().Ve()),m=this.sL(m.Kd?m.Kd():m.getData().Kd()),n=k==n?m:n,k=Nl(k),n=Nl(n),k=Math.atan2(n.y-k.y,n.x-k.x),k=0>k?k+2*Math.PI:k;h.nha=k;n=h=f;k=this.sL(n.Ve?n.Ve():n.getData().Ve());n=this.sL(n.Kd?n.Kd():n.getData().Kd());k=Nl(k);n=Nl(n);h.$L=Math.sqrt(Math.pow(n.x-k.x,2)+Math.pow(n.y-k.y,2));f.tX=a==this.sL(f.Kd?f.Kd():f.getData().Kd())?1:0}d.sort(Ol());
for(a=0;a<d.length;a++)e=d[a],e.nha=l,e.$L=l,e.tX=l;c=c.keyCode==dvt.G.Cg?p:t;for(e=a=0;e<d.length;e++)if(d[e]===b){a=c?e==d.length-1?0:e+1:0==e?d.length-1:e-1;break}return d[a]};S.sL=R(s);function Nl(a){a=a.Ig();return new dvt.N(a.x+a.a/2,a.y+a.b/2)}function Ol(){return function(a,b){var c=a.nha,d=b.nha,e=-1;!Pl(c,d)&&c>d?e=1:Pl(c,d)&&(a.$L>b.$L?e=1:b.$L==a.$L&&a.tX>b.tX?e=1:b.$L==a.$L&&a.tX==b.tX&&(e=0));return e}}
function Pl(a,b){var c=1E-7>=Math.abs(a-b);c||(c=1E-7>=Math.abs(2*Math.PI+Math.min(a,b)-Math.max(a,b)));return c}function re(a,b,c){this.Init(a,b,c)}dvt.j.u(re,dvt.ca,"DvtBaseDiagramNode");S=re.prototype;S.Init=function(a,b,c){re.q.Init.call(this,a,s,b);this.C=c;this.Qg=this.mm=t;this.$N=p;this.Pb;this.cZ;this.rm;this.kl;this.Lq;this.io};S.Oa=Q("C");S.getData=R(s);S.ag=function(){return this.Xh()};S.Xh=function(){return new dvt.U(0,0,this.getWidth(),this.getHeight())};S.dm=function(){return{}};
S.If=function(a){if(a){this.cZ=a;var b=this.Pb;this.Df();b&&(a=mf(a,this.rm,this.kl),b.rb(a))}};S.lf=Q("cZ");S.Df=R(s);S.er=B();S.Bt=R(s);S.dH=B();S.Sb=Q("mm");S.Nh=C("mm");S.tb=Q("Qg");ba("DvtBaseDiagramNode.prototype.isSelected",re.prototype.tb);S=re.prototype;S.rc=C("Qg");S.ai=C("$N");S.ob=function(){return this.Oa().Pt()&&this.$N};S.b2=C("dg");S.vfb=Q("dg");S.GB=function(a){this.rm=a;var b=this.Pb;this.Df();b&&(a=mf(this.lf(),a,this.kl),b.rb(a))};S.gB=Q("rm");
S.lx=function(a){this.kl=a;var b=this.Pb;this.Df();b&&(a=mf(this.lf(),this.rm,a),b.rb(a))};S.hB=Q("kl");function mf(a,b,c){var d=new dvt.Qb;b!=s&&(c&&d.translate(-c.x,-c.y),d.rotate(b),c&&d.translate(c.x,c.y));a&&d.translate(a.x,a.y);return d}S.dC=function(a,b,c){c?(c.J(dvt.B.Q,this,this.la,this.Z,a),c.J(dvt.B.Q,this,this.ia,this.ma,b)):this.Ga(a,b)};S.pe=R(s);
S.Ig=function(a){var b=this.Xh(a);a=this.xd(new dvt.N(b.x,b.y));b=this.xd(new dvt.N(b.x+b.a,b.y+b.b));return new dvt.U(a.x,a.y,b.x-a.x,b.y-a.y)};S.Cm=function(){return this.ib()};S.Uf=B();S.Od=B();S.Qd=B();S.ze=R(s);function Lb(a,b){a.Lq||(a.Lq=[]);a.Lq.push(b)}function Tg(a){return a.Lq}function Mb(a,b){a.io||(a.io=[]);a.io.push(b)}function Ql(a){return a.io}function Qd(a,b,c){this.Init(a,b,c)}dvt.j.u(Qd,dvt.ca,"DvtBaseDiagramLink");S=Qd.prototype;
S.Init=function(a,b,c){Qd.q.Init.call(this,a,s,b);this.C=c;this.ZE;this.Sk;this.lD;this.Pb;this.cZ;this.rm;this.kl;this.Qg=t;this.$N=p;this.X;this.fj;this.kj};S.Oa=Q("C");S.Z1=B();S.Et=R(s);S.j2=B();S.reb=Q("kj");ba("DvtBaseDiagramLink.prototype.getStartConnector",Qd.prototype.reb);Qd.prototype.Acb=Q("fj");ba("DvtBaseDiagramLink.prototype.getEndConnector",Qd.prototype.Acb);S=Qd.prototype;S.KB=C("X");S.Bc=Q("X");S.GB=function(a){this.rm=a;var b=this.Pb;this.Df();b&&(a=Rl(this.lf(),a,this.kl),b.rb(a))};
S.gB=Q("rm");S.lx=function(a){this.kl=a;var b=this.Pb;this.Df();b&&(a=Rl(this.lf(),this.rm,a),b.rb(a))};S.hB=Q("kl");S.lf=Q("cZ");S.If=function(a){if(a){this.cZ=a;var b=this.Pb;this.Df();b&&(a=Rl(a,this.rm,this.kl),b.rb(a))}};S.Df=R(s);S.er=B();S.h1=R(0);S.D0=R(0);S.ai=C("$N");S.ob=function(){return this.Oa().Pt()&&this.$N};S.tb=Q("Qg");ba("DvtBaseDiagramLink.prototype.isSelected",Qd.prototype.tb);S=Qd.prototype;S.rc=C("Qg");S.TK=B();S.XD=R(t);S.OK=B();S.iB=R(1);
ba("DvtBaseDiagramLink.prototype.getLinkWidth",Qd.prototype.iB);S=Qd.prototype;S.xV=B();S.OO=R("solid");S.wV=B();S.DG=R(s);S.At=R(s);S.pva=function(){return this.OO()};S.oL=function(){return this.iB()};S.ova=function(){return this.DG()};function Wd(a,b,c,d,e){if(c||e){var f;e||(f=a.X.Ad().Ca(),f.Nn(dvt.Rc.ur),f.Ee(t));if(c=Xd.eua(a.g(),c,e,f,a))a.X.k(c),Xd.MQ(c,0,e,b,d);return c}}
S.fe=function(a){this.ZE=a;kf.P3(a)?(this.lD=a,this.Sk=kf.dua(a)):(this.Sk=a,this.lD=kf.T2(a));this.X&&this.X instanceof dvt.pb&&(this.X.qs(this.lD),this.fj?Xd.MQ(this.fj,this.Et(),this.At(Xd.eQ),this.Sk,1):this.fj=Wd(this,this.Sk,this.Et(),1,this.At(Xd.eQ)),this.kj?Xd.MQ(this.kj,this.tv(),this.At(Xd.EQ),this.Sk,0):this.kj=Wd(this,this.Sk,this.tv(),0,this.At(Xd.EQ)));var b=a=s;this.sg&&this.sg.NJ instanceof dvt.pb&&this.sg.NJ.qs(this.lD);this.sg&&(a=this.sg.Qy)&&Xd.MQ(a,this.tv(),this.At(Xd.EQ),this.Sk,
0);this.sg&&(b=this.sg.Py)&&Xd.MQ(b,this.Et(),this.At(Xd.eQ),this.Sk,1);this.uw&&this.uw.NJ instanceof dvt.pb&&this.uw.NJ.qs(this.lD);this.vT&&this.vT.Gm($d(this));this.WR&&this.WR.Gm(ae(this))};S.Ec=Q("ZE");function $d(a){return!a.Sk?s:new dvt.N(a.Sk[0],a.Sk[1])}function ae(a){if(!a.Sk)return s;var b=a.Sk.length;return new dvt.N(a.Sk[b-2],a.Sk[b-1])}function Rl(a,b,c){var d=new dvt.Qb;b!=s&&(c&&d.translate(-c.x,-c.y),d.rotate(b),c&&d.translate(c.x,c.y));a&&d.translate(a.x,a.y);return d}
S.gW=function(a,b,c){!b&&0!=b&&(b=1);!c&&0!=c&&(c=0);c=this.oL()+c;a=new dvt.ua(a,b,c);return new Sl(this.g(),this.lD,a)};function Td(a,b,c,d){b=a.gW(b,c,d);a.kj&&a.tv()&&(c=a.tv(),d=Tl(b,a.Sk,c,a.At(Xd.EQ),a,0),b.Qy&&b.removeChild(b.Qy),b.Qy=d,b.Eoa=c,b.k(b.Qy));a.fj&&a.Et()&&(c=a.Et(),a=Tl(b,a.Sk,c,a.At(Xd.eQ),a,1),b.Py&&b.removeChild(b.Py),b.Py=a,b.Doa=c,b.k(b.Py));return b}function Ud(a,b,c){a=a.pva();a=kf.cua(a);b.Nn(a,kf.Hva(a,c),kf.Iva(a,c))}
function Sd(a,b){if(a){var c=s;b.yc&&(c=b.yc());if(c){var d=a.Ad()?a.Ad().Ca():s,e=a.ud()?a.ud().Ca():s;d&&d.Bv&&(d.Bv(c),a.xa(d));e&&e.Bv&&(e.Bv(c),a.ga(e))}}}S.pe=R(s);S.Ig=function(a){return this.V(a)};S.Cm=function(){return this.ib()};S.Uf=B();S.Od=B();S.Qd=B();S.ze=R(s);var Od={};dvt.j.u(Od,dvt.j,"DvtDiagramLayoutUtils");
Od.Reb=function(a){for(var b=Od.udb(a),c=Math.max(b.w,b.h),b=a.xg(),d=a.Ht(),e=Math.floor(Math.sqrt(b)),f=0,f=(f=a.dm())&&f.padding?f.padding:0<d?c:0.25*c,c=c+f,d=-(Math.ceil(b/e)-1)*c/2,f=-(e-1)*c/2,h=0;h<b;h++)Od.T$a(a.FG(h),d+c*Math.floor(h/e),f+c*(h%e))};Od.udb=function(a){for(var b=a.xg(),c=0,d=0,e=0;e<b;e++){var f=a.FG(e),h=f.rf(),c=Math.max(h.w,c),d=Math.max(h.h,d);if(f=f.Df())c=Math.max(f.w,c),d=Math.max(h.h+f.h,d)}return new Eb(0,0,c,d)};
Od.T$a=function(a,b,c){var d=a.Xh();a.Gm(new yd(b-d.x-0.5*d.w,c-d.y-0.5*d.h));Od.Wgb(a)};Od.Wgb=function(a){var b=a.rf(),c=a.pi(),d=a.Df();d&&a.If(new yd(b.x+c.x+0.5*(b.w-d.w),b.y+c.y+b.h))};Od.rO=function(a){return a===l||a==s?s:new Eb(a.x,a.y,a.a,a.b)};Od.aLa=function(a){return a===l||a==s?s:new yd(a.x,a.y)};Od.eab=function(a){return a?new dvt.U(a.x,a.y,a.w,a.h):s};Od.$Ka=function(a){return a?new dvt.N(a.x,a.y):s};function Sl(a,b,c){Sl.q.Init.call(this,a);this.Init(a,b,c)}dvt.j.u(Sl,dvt.ca,"DvtDiagramLinkUnderlay");
Sl.prototype.Init=function(a,b,c){b||(b=["M",0,0,"L",1,0]);this.Qr=c;this.Qr||(this.Qr=new dvt.ua("#ffffff",1,1));this.NJ=new dvt.pb(a,b);this.NJ.xa(c);this.NJ.ga(s);this.k(this.NJ);this.Doa=this.Py=this.Eoa=this.Qy=s};function Tl(a,b,c,d,e,f){a=Xd.eua(a.g(),c,d,a.Qr,e);Xd.MQ(a,0,d,b,f);return a}
Sl.prototype.xa=function(a,b){this.Qr=a;dvt.o.Ta()&&(dvt.o.eq()&&1==dvt.o.BO())&&a.Ee(p);this.NJ.xa(a);if(this.Qy){var c=a.Ca();c.Nn(dvt.Rc.ur);c.Ee(t);if(this.Eoa==Xd.I2||this.Eoa==Xd.J2)c.Xa(b),this.Qy.fb(a.yc());this.Qy.xa(c)}if(this.Py){c=a.Ca();c.Nn(dvt.Rc.ur);c.Ee(t);if(this.Doa==Xd.I2||this.Doa==Xd.J2)c.Xa(b),this.Py.fb(a.yc());this.Py.xa(c)}};Sl.prototype.Ad=Q("Qr");var kf={};dvt.j.u(kf,dvt.j,"DvtDiagramLinkUtils");
kf.cua=function(a){var b=dvt.Rc.ur;switch(a){case "dash":b=dvt.Rc.qH;break;case "dot":b=dvt.Rc.kW;break;case "dashDot":b=dvt.Rc.nda}return b};kf.Hva=function(a,b){if(dvt.Rc.ur==a)return s;if(dvt.Rc.qH==a)return b?"8,2":"6,4";if(dvt.Rc.kW==a)return b?"4,1":"2,3";if(dvt.Rc.nda==a)return b?"10,1,4,1":"8,3,2,3"};kf.Iva=function(a,b){return b&&dvt.Rc.ur!=a?1:s};kf.T2=function(a){var b=[];if(a)for(var c=0;c<a.length;c+=2)0==c?b.push("M"):b.push("L"),b.push(a[c]),b.push(a[c+1]);return b};
kf.dua=function(a){var b=[];if(a)for(var c=0;c<a.length;c++)isNaN(a[c])||b.push(a[c]);return b};kf.P3=function(a){return a&&0<a.length?isNaN(a[0]):t};kf.Rda=function(a){var b=[];a=kf.P3(a)?kf.dua(a):a;for(var c=0;c<a.length;c+=2)b.push(new dvt.N(a[c],a[c+1]));return b};var Xd={};dvt.j.u(Xd,dvt.j,"DvtDiagramLinkConnectorUtils");Xd.eQ="endConnector";Xd.EQ="startConnector";Xd.Tta="arrowOpen";Xd.I2="arrow";Xd.J2="arrowConcave";Xd.Vta="rectangle";Xd.Wta="rectangleRounded";Xd.Uta="circle";
Xd.eua=function(a,b,c,d,e){if(c)return Xd.CRa(c,e);c=e.oL();switch(b){case Xd.I2:return Xd.DRa(a,c,e.DG());case Xd.J2:return Xd.ERa(a,c,e.DG());case Xd.Tta:return Xd.JRa(a,c,d);case Xd.Uta:return Xd.BRa(a,c,d);case Xd.Vta:return Xd.jua(a,c,d);case Xd.Wta:return Xd.PRa(a,c,d)}return s};Xd.MQ=function(a,b,c,d,e){b=Xd.oRa(a,c,d,e);a.rb(b)};
Xd.oRa=function(a,b,c,d){var e=-1,f=0,h=0,k=0;c&&(f=c.length,1===d?(2<=f&&(h=c[f-2],k=c[f-1]),4<=f?(e=c[f-4],f=c[f-3]):(e=h-1E-4,f=k)):(2<=f&&(h=c[0],k=c[1]),4<=f?(e=c[2],f=c[3]):(e=h+1E-4,f=k)));c=h;d=k;e=Xd.nRa(e,f,h,k);h=a.E1a;h||(h=a.lb().Ca(),a.E1a=h);k=new dvt.Qb;b&&(b=Xd.eEa(a),f=a.Zd(),a=a.ie(),k.translate(-0.5*b.a*f,-0.5*b.b*a));k.rotate(e);k.translate(c,d);k.concat(h);return k};Xd.eEa=function(a){var b=a.e1a;b||(b=a.V(),a.e1a=b);return b};
Xd.nRa=function(a,b,c,d){return Math.atan2(d-b,c-a)};Xd.ERa=function(a,b,c){b=6*Xd.o7(b);var d=0.8*b;a=new dvt.Qh(a,[-0.22*b,-0.5*d,0.78*b,0,-0.22*b,0.5*d,0,0]);a.fb(c);return a};Xd.DRa=function(a,b,c){b=5*Xd.o7(b);var d=0.8*b;a=new dvt.Qh(a,[0,-0.5*d,b,0,0,0.5*d]);a.fb(c);return a};Xd.o7=function(a){if(1>=a)return a;a=0.5*(a-1);return 1+a};Xd.JRa=function(a,b,c){b*=3;var d=c.getWidth();a=new dvt.uu(a,[-b+d*Math.sqrt(2)/2,-b,d*Math.sqrt(2)/2,0,-b+d*Math.sqrt(2)/2,b]);a.xa(c);a.ga(s);return a};
Xd.hMa=function(a){return 2*a};Xd.xNa=function(a){return 3*a};Xd.BRa=function(a,b,c){b=Xd.hMa(b);a=new dvt.Ck(a,b,0,b);a.xa(c);a.ga(s);return a};Xd.jua=function(a,b,c){b=Xd.xNa(b);a=new dvt.ka(a,0,-b/2,b,b);a.xa(c);a.ga(s);return a};Xd.PRa=function(a,b,c){a=Xd.jua(a,b,c);a.EB(b);return a};Xd.CRa=function(a,b){var c=Ba(b.Oa()),d=b.getData().Uo;c.nw=d;c.eH(b,b.k0);d=b.UO();c.Lw=d;return U.oP(c,a,b)};
Xd.o3=function(a,b,c,d,e){if(c)return b=Xd.eEa(a),a=a.Zd(),0.5*b.a*a;a=e.oL();d=d.getWidth();switch(b){case Xd.Tta:return d*Math.sqrt(2);case Xd.I2:return b=Xd.o7(a),5*b;case Xd.J2:return b=Xd.o7(a),0.78*6*b;case Xd.Uta:return 2*Xd.hMa(d)+d/2;case Xd.Vta:case Xd.Wta:return Xd.xNa(d)+d/2;default:return 0}};
dvt.vi=function(a,b,c){this.Init(a,b,c)};ba("dvt.Diagram",dvt.vi);dvt.j.u(dvt.vi,ea);dvt.vi.prototype.Init=function(a,b,c){dvt.vi.q.Init.call(this,a,b,c);this.Bh=new Ul;this.nc=new Vl(a,this.Gf,this);this.nc.Gg(this);dvt.o.Ta()||this.nc.ss(new Wl(this,this.nc));this.qc={};this.Oo=[];this.de={};this.Zz=[];this.Wp=0};dvt.vi.newInstance=function(a,b,c){return new dvt.vi(a,b,c)};dvt.vi.newInstance=dvt.vi.newInstance;S=dvt.vi.prototype;
S.AQ=function(){!this.Su&&this.Dg&&("none"!=this.LR&&(this.Jq={id:this.getId(),getId:Q("id"),options:this.v(),getOptions:Q("options"),panZoomMatrix:this.Ma.Ja.lb(),getPanZoomMatrix:Q("panZoomMatrix"),nodes:this.qc?Xl(this):[],links:this.de?Yl(this):[],getNodes:Q("nodes"),getLinks:Q("links")},this.Jq.v=this.Jq.getOptions,this.Jq.Odb=this.Jq.getPanZoomMatrix,this.Jq.getId=this.Jq.getId,this.Jq.nNa=this.Jq.getNodes,this.Jq.YMa=this.Jq.getLinks),this.Dg=t,this.RS=this.Ma);this.Su||this.Dfa()};
S.Dfa=function(){this.Zo=new dvt.ca(this.g());this.Qk=new dvt.ca(this.g());this.Oy=new dvt.ca(this.g());this.qc={};this.Oo=[];this.de={};this.Zz=[];this.SC=s};S.Yu=function(){this.uh&&(this.removeChild(this.uh),this.uh.qa());this.uh=s;this.Rb&&(this.Rb=s,this.Ua().Gg(this))};
S.nh=function(a,b){var c=new dvt.Pd(this.g(),s,a.mb()),d=b.Odb(),e=this.Ma.Ja.lb();d.Te(e)||(this.Ma.Ja.rb(d),c.ea.J(dvt.B.Li,this.Ma.Ja,this.Ma.Ja.lb,this.Ma.Ja.rb,e));a.Yp(b.nNa(),this.qc?Xl(this):[]);a.Yp(b.YMa(),this.de?Yl(this):[]);a.add(c,1)};
S.vu=function(a){var b=t;if(!this.Dg&&!this.Su){Zl(this);$l(this);var c=[],d;for(d in this.qc)c.push(d);b=0===c.length;this.g().NK([this]);this.Wp++}if(b)this.Wp=this.Dg?this.Wp:this.Wp-1,0===this.Wp&&am(this,a,b);else{this.contains(this.RS)||this.k(this.RS);var e=this;this.yv(a).then(function(){e.Wp=e.Dg?e.Wp:e.Wp-1;0===e.Wp&&am(e,a,b)},function(){e.Wp=e.Dg?e.Wp:e.Wp-1;0===e.Wp&&(e.removeChild(e.RS),e.RS=s,e.Dg=p)})}};
function am(a,b,c){var d;if(!c){a.removeChild(a.RS);a.bG();a.cG();if(d=a.Nl==s)a.Nl=Xa(a,b,l,l);var e=a.Ma;if(a.Dg){if(a.Su){var f=a.NB(b,a.Nl),f=h?Ya(a):f?f:a.Nl;e.uca(p);e.vs(s,f);e.uca(a.sG)}}else{a.NB(b,a.Nl);if(!a.Su){var h=a.Jr?p:t,f=h?Ya(a):a.Nl;h&&e.UPa();e.vs(s,f)}e.xz(a.Ey);e.JV(a.sG);e.uca(a.sG)}}a.RS=s;a.Dg||(a.Rb&&a.Rb.stop(p),dvt.o.$i()&&a.XY&&!a.Jq?a.Rb=dvt.hc.LD(a.g(),a.XY,a,s,a.mb()):"none"!=a.LR&&a.Jq&&(a.uh=new dvt.ca(a.g(),"Delete Container"),a.k(a.uh),e=new bm(a.g(),a.uh,a.Jq,
a),e.Yp([a.Jq],[a]),a.Rb=e.lv()),a.Rb?(a.Ua().je(),a.Ua().bl(a),a.Rb.Tf(a.Yu,a),a.Rb.play()):a.Yu());a.Dg=p;Ab(a,c);a.Ey&&(c=a.Nl,c!=s&&(b=a.Ma.Ef(b),a.$V(c.x,c.y,c.a,c.b,b)));a.Jr=s;a.CS=s;d&&(a.Nl=s)}
S.Mf=function(a){dvt.vi.q.Mf.call(this,a);this.Zra(this.T);this.Ey="none"!=this.T.panning;this.sG="none"!=this.T.zooming;this.Zba("hidden");this.LR=this.T.animationOnDataChange;this.c2("auto"==this.T.animationOnDisplay?dvt.hc.MB:s);this.JB(this.T.selectionMode);this.Qp=this.T.emptyText?this.T.emptyText:dvt.D.ah(this.T,"labelNoData",dvt.D.Ka,"NO_DATA")};dvt.vi.aq=function(a){return(new Ul).aq(a)};S=dvt.vi.prototype;S.ND=function(){var a=this.v().maxZoom,a=parseFloat(a);return 0<a?a:1};
S.jK=function(){var a=this.v().minZoom;if(a){var b=parseFloat(a);0<b&&(a=Math.min(b,this.ND()));return a}return s};S.mb=function(){return dvt.Qa.hs(this.v().styleDefaults.animationDuration)/1E3};S.Gf=function(a){"categoryHighlight"==a.type&&this.bG();a&&this.dispatchEvent(a)};function Zl(a){var b=a.v().nodes;if(b)for(var c=0;c<b.length;c++){var d=b[c],d=dvt.Dc.We(d,a.v().styleDefaults.nodeDefaults),d=new cm(a.g(),a,d),e=d.getId();d.ura()?a.Oo.push(e):(d.va(a.Qk),a.Oo.push(e),a.qc[e]=d)}}
function $l(a){var b=a.v().links;if(b)for(var c=0;c<b.length;c++){var d=b[c],d=dvt.Dc.We(d,a.v().styleDefaults.linkDefaults),e=new dm(a.g(),a,d),d=e.getId();if(e.ura())a.Zz.push(d);else{e.va(a.Zo);a.Zz.push(d);a.de[d]=e;var f=a.da(e.Ve()),e=a.da(e.Kd());Lb(f,d);Mb(e,d)}}}
S.yv=function(a){for(var b=this.v().layout,c=Cb(this),d={},e=0;e<this.Oo.length;e++){var f=this.Oo[e];this.da(f)&&(d[f]=p,c.oO(this.zx(this.da(f))))}for(var h in this.de)if(e=this.gd(h)){var f=e.getData().startNode,k=e.getData().endNode;d[f]&&d[k]&&ub(c,this.pH(e,f,k))}if(b&&"function"==typeof b){var m=this;(b=b(c))||(b={then:function(a){a()}});this.Qba(0);b.then(function(){1===m.Wp&&(m.Qba(1),m.kH(c,a,p))},B());return b}this.AL("dvt.Diagram: Layout function is not defined",1)};
S.Qba=function(a){this.Dg||(this.Zo.P(a),this.Qk.P(a))};S.da=function(a){return this.qc[a]};S.gd=function(a){return this.de[a]};S.iQ=Q("Zz");function Yl(a){var b=[],c;for(c in a.de)b.push(a.de[c]);return b}S.wH=Q("Oo");function Xl(a){var b=[],c;for(c in a.qc)b.push(a.qc[c]);return b}
S.ak=function(a){dvt.vi.q.ak.call(this,a);switch(a.dn()){case dvt.od.o4:if(this.Ey){var b=a.CA,c=this.Nl?this.Nl:Xa(this,a.ea,l,l);this.$V(c.x,c.y,c.a,c.b,b)}break;case dvt.od.r4:this.Jr||(c=this.Nl?this.Nl:Xa(this,a.ea,l,l),a.TPa(c));break;case dvt.od.XH:if(this.v().zoomRenderer&&a.qJ!==a.CA)for(b in this.qc){var c=this.da(b),d=a;if(c.C.v().zoomRenderer){var e=c.Ql(d.qJ),d=c.Ql(d.CA);em(c,c.C.v().zoomRenderer,d,e)}}}};S.iPa=B();
S.yU=function(a){var b=[],c;for(c in this.de){var d=this.gd(c),e=d.Ve(),f=d.Kd();(e==a||f==a)&&d.ic&&b.push(d)}return b};S.Jm=function(){return dvt.D.na(dvt.D.Ka,"DIAGRAM")};S.cG=function(){if(this.T.selection&&this.Pt()){var a=[],b;for(b in this.qc)a.push(this.da(b));for(var c in this.de)a.push(this.gd(c));this.Yj().Tt(this.T.selection,a)}};
S.bG=function(){this.SC&&(this.U_(t,this.SC),this.SC=s);var a=this.T.highlightedCategories;if(a){var b="any"==this.T.highlightMatch;this.SC={};var c=[],d;for(d in this.qc){var e=this.da(d),f=b?dvt.fa.kz(e.ze(),a):dvt.fa.p1(e.ze(),a);f&&(this.SC[e.getId()]=e,c.push(e))}d=this.T.nodeHighlightMode;if("node"!=d){f="nodeAndIncomingLinks"==d||"nodeAndLinks"==d;d="nodeAndOutgoingLinks"==d||"nodeAndLinks"==d;for(var e=[],h=0;h<c.length;h++)for(var k=c[h],m=f&&k.io?k.io:[],m=d&&k.Lq?m.concat(k.Lq):m,k=0;k<
m.length;k++){var n=m[k];this.SC[n]=this.gd(n);e.push(this.gd(n))}fm(this,e)}var c=[],q;for(q in this.de)if(d=this.gd(q),f=b?dvt.fa.kz(d.ze(),a):dvt.fa.p1(d.ze(),a))this.SC[d.getId()]=d,c.push(d);"linkAndNodes"==this.T.linkHighlightMode&&fm(this,c);this.U_(p,this.SC)}};function fm(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=d.Ve(),d=d.Kd();a.SC[e]=a.da(e);a.SC[d]=a.da(d)}}
S.U_=function(a,b){var c=a?this.T.styleDefaults._highlightAlpha:1;this.Zo.P(c);this.Qk.P(c);for(var d in b)a?this.Oy.k(b[d]):b[d]instanceof dm?this.Zo.k(b[d]):b[d]instanceof cm&&this.Qk.k(b[d])};S.Le=function(a){this.T.highlightedCategories=dvt.Dc.Ca(a);this.bG()};dvt.vi.prototype.highlight=dvt.vi.prototype.Le;dvt.vi.prototype.select=function(a){this.T.selection=dvt.Dc.Ca(a);this.cG()};dvt.vi.prototype.select=dvt.vi.prototype.select;dvt.vi.prototype.mi=function(){this.Wd||(this.Wd=new gm(this));return this.Wd};
dvt.vi.prototype.getAutomation=dvt.vi.prototype.mi;dvt.vi.prototype.AL=function(a,b){var c=this.v()._logger;if(c)switch(b){case 1:c.error&&c.error(a);break;case 2:c.warn&&c.warn(a);break;case 3:c.info&&c.info(a);break;default:c.log&&c.log(a)}};dvt.vi.prototype.gx=function(a,b){var c=this.da(a);c&&c.gx(b)};dvt.vi.prototype.processDefaultHoverEffect=dvt.vi.prototype.gx;dvt.vi.prototype.YG=function(a,b){var c=this.da(a);c&&c.YG(b)};dvt.vi.prototype.processDefaultSelectionEffect=dvt.vi.prototype.YG;
dvt.vi.prototype.AB=function(a,b){var c=this.da(a);c&&c.AB(b)};dvt.vi.prototype.processDefaultFocusEffect=dvt.vi.prototype.AB;dvt.vi.prototype.jV=function(a){var b=this.da(a.getId());b.yE()||(b.va(this.Qk),xd(a,b))};function hm(a,b){hm.q.constructor.call(this,a,b);this.oib();this.C=b}dvt.j.u(hm,dvt.Tg,"DvtDiagramCategoryRolloverHandler");hm.prototype.aea=function(a){return dvt.j.Lh(this,function(){this.aga(p);this.C.Gf(a)})};
hm.prototype.$da=function(a){return dvt.j.Lh(this,function(){this.bga();this.C.Gf(a)})};function Ul(){this.Init({skyros:im,alta:jm})}dvt.j.u(Ul,dvt.Ya,"DvtDiagramDefaults");
var im={skin:dvt.e.vf,emptyText:s,selectionMode:"none",animationOnDataChange:"none",animationOnDisplay:"none",maxZoom:1,highlightMatch:"all",nodeHighlightMode:"node",linkHighlightMode:"link",panning:"none",touchResponse:"auto",zooming:"none",_statusMessageStyle:new dvt.e(dvt.Ya.im),styleDefaults:{animationDuration:500,hoverBehaviorDelay:200,_highlightAlpha:0.1,nodeDefaults:{labelStyle:dvt.Ya.i3+"color:#383A47",hoverInnerColor:"rgb(255,255,255)",hoverOuterColor:"rgba(0,0,0, .3)",selectionColor:"rgb(0,0,0)",
icon:{width:10,height:10,fillPattern:"none",shape:"circle"}},linkDefaults:{startConnectorType:"none",endConnectorType:"none",width:1,style:"solid",hoverInnerColor:"rgb(255,255,255)",hoverOuterColor:"rgba(0,0,0, .3)",selectionColor:"rgb(0,0,0)",labelStyle:dvt.Ya.i3+"color:#383A47",_hitDetectionOffset:4}}},jm={};function bm(a,b,c,d){this.Init(a,b,c,d)}dvt.j.u(bm,dvt.Ap,"DvtDiagramDataAnimationHandler");bm.prototype.Init=function(a,b,c,d){bm.q.Init.call(this,a,b);this.v6a=c;this.tmb=d};
bm.prototype.mb=function(){return dvt.Qa.hs(this.v6a.v().styleDefaults.animationDuration)/1E3};function Vl(a,b,c){this.Init(a,b,c);this.C=c}dvt.j.u(Vl,dvt.K,"DvtDiagramEventManager");S=Vl.prototype;S.Cp=function(a,b,c){a=this.C.v();"dim"==a.hoverBehavior&&(b=b.ze?b.ze():[],a.highlightedCategories=c?b.slice():s,c=dvt.Wa.WG(a.highlightedCategories,c),b=dvt.Qa.hs(a.styleDefaults.hoverBehaviorDelay),this.RH.Gf(c,Xl(this.C),b,"any"==a.highlightMatch))};S.cda=function(a,b){return new hm(a,b)};
S.Gk=function(a){var b=p,c=a.keyCode,d=this.Ze(),e=d instanceof cm?d.oA:s;c!=dvt.G.Sh&&this.wC?(e.gU(a),a.preventDefault()):c==dvt.G.Sh&&e instanceof dvt.Ne?!a.shiftKey&&d.Qd()?(d.Od(),e.gU(a),a.preventDefault(),this.wC=p):(a.shiftKey&&this.wC?(this.HQ(a,d),a.preventDefault()):(this.wC&&d.Uf(),b=Vl.q.Gk.call(this,a)),this.wC=t):b=Vl.q.Gk.call(this,a);return b};S.Gz=function(){var a=this.C.v();return"none"!==a.panning||"none"!==a.zooming?dvt.K.OE:a.touchResponse===dvt.K.Tx?dvt.K.Tx:dvt.K.jX};
S.Pv=function(a){return this.Qn(a,dvt.Dd.kL)};S.eC=function(a){return a==dvt.Dd.kL?t:Vl.q.eC.call(this,a)};function Wl(a,b){this.Init(a,b)}dvt.j.u(Wl,Pg,"DvtDiagramKeyboardHandler");Wl.prototype.aj=function(a){var b=t;switch(a.keyCode){case dvt.G.CL:case dvt.G.dL:b=a.altKey?p:t;break;default:b=Wl.q.aj.call(this,a)}return b};
Wl.prototype.Ak=function(a){if(a.keyCode==dvt.G.Sh){var b=this.Ra.Ze();if(b)return dvt.K.sc(a),b;b=Xl(this.Oa());if(0<b.length)return dvt.K.sc(a),this.ZJ(b)}return Wl.q.Ak.call(this,a)};Wl.prototype.sL=function(a){return this.Oa().da(a)};function dm(a,b,c){this.Init(a,b,c)}dvt.j.u(dm,Qd,"DvtDiagramLink");S=dm.prototype;S.Init=function(a,b,c){dm.q.Init.call(this,a,c.id,b);this.Ob=c;this.C.Pt()&&this.setCursor("pointer")};S.getData=Q("Ob");S.getId=function(){return this.getData().id};S.Ve=function(){return this.getData().startNode};
S.Kd=function(){return this.getData().endNode};S.Df=function(){var a=s;this.Pb&&(a=this.Pb.V());return a};S.OO=function(){return this.getData().style};S.iB=function(){return this.getData().width};S.DG=function(){return this.getData().color};S.tv=function(){return this.getData().startConnectorType};S.Et=function(){return this.getData().endConnectorType};S.h1=function(){if(this.tv()){var a=this.Bc().Ad().Ca();a.Nn(dvt.Rc.ur);return Xd.o3(s,this.tv(),s,a,this)}return 0};
S.D0=function(){if(this.Et()){var a=this.Bc().Ad().Ca();a.Nn(dvt.Rc.ur);return Xd.o3(s,this.Et(),s,a,this)}return 0};
S.va=function(a){var b=this.getData(),c=this.lD;c||(c=["M",0,0,"L",0,0]);var d=b.id,e=b.color,f=b.width,h=b.style;this.uw=this.gW("#000000",0,b._hitDetectionOffset);this.k(this.uw);b=new dvt.ua(e,1,f);dvt.o.Ta()&&(dvt.o.eq()&&1==dvt.o.BO())&&b.Ee(p);h=kf.cua(h);b.Nn(h,kf.Hva(h),kf.Iva(h));c=new dvt.pb(this.g(),c,d);c.ga(s);c.xa(b);this.KB(c);this.k(c);e=this.C;c=this.getData();d=dvt.o.$(e.g())?dvt.ba.Km:dvt.ba.qq;c.label&&(h=c.labelStyle,b=dvt.ba.Sz,e=new dvt.ba(e.g(),c.label,0,0),e.Cb(new dvt.e(h)),
e.tz(d),e.iE(b),c=dvt.e.vp((new dvt.e(c.labelStyle)).getWidth()),0<c&&dvt.Aa.sd(e,c,Infinity,this)||this.k(e),this.Pb=e);a.k(this);this.Sf("img");this.wq();this.C.Ua().jb(this,this)};S.rc=function(a){dm.q.rc.call(this,a);a?this.QA(this.Wo,p):this.IF();this.wq()};S.ob=function(){return this.Oa().Pt()&&"off"!=this.getData().selectable};
S.QA=function(a,b){if(a){this.Uk||(this.Uk=this.Bc().Ad());var c=this.Bc().Ad().Ca();c.Bv&&c.Bv(this.getData().hoverInnerColor);this.Bc().xa(c);Sd(this.kj,c);Sd(this.fj,c)}else this.Uk&&(this.Bc().xa(this.Uk),Sd(this.kj,this.Uk),Sd(this.fj,this.Uk),this.Uk=s);this.sg||(this.sg=Td(this,"#000000",1,0),this.Ib(this.sg,0));var c=b?this.getData().selectionColor:this.getData().hoverOuterColor,d=this.sg.Ad().Ca();d.Bv(c);d.Xa(2+this.oL());Ud(this,d,p);this.sg.xa(d,2)};
S.IF=function(){this.Uk&&(this.Bc().xa(this.Uk),Sd(this.kj,this.Uk),Sd(this.fj,this.Uk),this.Uk=s);this.sg&&(this.removeChild(this.sg),this.sg.qa&&this.sg.qa(),this.sg=s)};S.vd=function(){this.Wo||(this.Wo=p,this.QA(p,this.tb()))};S.Sc=function(){this.tb()?this.QA(t,p):this.IF();this.Wo=t};S.vg=function(){var a=this.Oa().v().tooltip;return a?this.Oa().g().Rf().Uw(a,this.$p()):this.ee()};S.ee=function(){return this.getData().shortDesc};S.$p=function(){return{id:this.getId(),type:"link",label:this.getData().label}};
S.Id=function(){var a=[];this.ob()&&a.push(dvt.D.na(dvt.D.Ka,this.tb()?"STATE_SELECTED":"STATE_UNSELECTED"));return dvt.ja.uk(this.ee(),a)};S.wq=function(){if(!dvt.o.Gi()){var a=this.Id();a&&this.Bd("label",a)}};
S.pe=function(a){if(a.keyCode==dvt.G.xi&&a.ctrlKey)return this;if(a.keyCode==dvt.G.gi||a.keyCode==dvt.G.Cg){var b=this.xS;b||(b=this.Oa().da(qd(this.Oa(),this)));var c=this,d=this.Oa().yU(b.getId()),e=this.Oa().Ua().Db;e&&e.saa&&(c=e.saa(b,this,a,d));c.xS=b;return c}return a.keyCode==dvt.G.ng||a.keyCode==dvt.G.lg?(a=this.o8(a.keyCode)?this.Ve():this.Kd(),this.Oa().da(a)):a.type==dvt.ra.Fe?this:s};S.o8=function(a){var b=$d(this),c=ae(this),b=b.x<c.x?p:t;return a==dvt.G.ng&&b||a==dvt.G.lg&&!b?t:p};
S.Uf=function(){this.dd=p;this.vd()};S.Od=function(){this.dd=t;this.Sc()};S.Qd=Q("dd");S.ze=function(){return this.getData().categories?this.getData().categories:[this.getId()]};S.ura=function(){var a=this.Oa().v().hiddenCategories;return a&&dvt.fa.kz(a,this.ze())||!this.Oa().da(this.Ve())||!this.Oa().da(this.Kd())?p:t};
S.nh=function(a,b){var c=b.Ec(),d=this.Ec(),e=new dvt.Pd(this.g(),s,a.mb());dvt.fa.Te(c,d)||(this.fe(c),c=dvt.B.Os,0<d.length&&isNaN(d[0])&&(c=dvt.B.Hl),e.ea.J(c,this,this.Ec,this.fe,d));b.Pb&&this.Pb&&(d=b.Pb.lb(),c=this.Pb.lb(),d.Te(c)||(this.Pb.rb(d),e.ea.J(dvt.B.Li,this.Pb,this.Pb.lb,this.Pb.rb,c)));if(b.Bc()&&this.Bc()&&(d=b.Bc().Ad(),c=this.Bc().Ad(),d&&c&&d instanceof dvt.ua&&c instanceof dvt.ua&&(d.yc()!=c.yc()||d.getWidth()!=c.getWidth())))this.Bc().xa(d),e.ea.J(dvt.B.UL,this.Bc(),this.Bc().Ad,
this.Bc().xa,c);a.add(e,1)};S.Xj=function(a){Kl(this.Oa()).k(this);var b=this,c=new dvt.Kj(this.g(),this,a.mb());dvt.ab.Nb(c,function(){b.getParent().removeChild(b);b.qa()});a.add(c,0)};S.Ui=function(a){this.P(0);a.add(new dvt.Ah(this.g(),this,a.mb()),2)};S.dm=function(){return this.getData()};function cm(a,b,c){this.Init(a,b,c)}dvt.j.u(cm,re,"DvtDiagramNode");S=cm.prototype;S.Init=function(a,b,c){cm.q.Init.call(this,a,c.id,b);this.Ob=c;this.C.Pt()&&this.setCursor("pointer")};S.getData=Q("Ob");
S.getId=function(){return this.Ob.id};S.Xh=Q("ER");S.Df=function(){var a=s;this.Pb&&(a=this.VC?this.VC:this.Pb.V());return a};S.rc=function(a){var b=this.Ql();cm.q.rc.call(this,a);this.C.v().selectionRenderer?em(this,this.C.v().selectionRenderer,this.Ql(),b):this.YG(a);this.wq()};S.YG=function(a){this.fs()&&this.fs().rc(a)};S.ob=function(){return this.Oa().Pt()&&"off"!=this.getData().selectable};S.uW=Q("X");
S.va=function(a){if(this.C.v().renderer)em(this,this.C.v().renderer,this.Ql(),s);else{var b=this.getData(),c=this.C,d=new dvt.e(b.backgroundStyle);if(!d.kOa()){var e=dvt.e.vp(d.I(dvt.e.$n)),f=dvt.e.vp(d.I(dvt.e.Gs)),h=d.I(dvt.e.Kb),k=d.I(dvt.e.qb),m=dvt.e.vp(d.I(dvt.e.Ji)),d=dvt.e.vp(d.I(dvt.e.ig)),c=new dvt.ka(c.g(),0,0,e,f);c.fb(h);d&&(c.Oh(d),c.$h(d));k&&c.xa(new dvt.ua(k,1,m));this.k(c);this.AP(c);this.Mb=c}h=this.C;if(k=b.icon){c=k.width;e=k.height;m=k.color;f=k.borderRadius;h=k.source?new dvt.Kf(h.g(),
c/2,e/2,c,e,f,k.source,k.sourceSelected,k.sourceHover,k.sourceHoverSelected):new dvt.pa(h.g(),k.shape,dvt.e.vf,c/2,e/2,c,e,f);"none"!=k.fillPattern?h.ga(new dvt.mc(k.fillPattern,m,m)):h.fb(m);k.borderColor&&h.xa(new dvt.ua(k.borderColor,k.borderWidth));this.k(h);this.X=h;if(this.Mb){var k=b.icon,m=this.Mb.getWidth(),c=this.Mb.getHeight(),e=k.width,f=k.height,d=0.5*(m-e),n=0.5*(c-f);if(k.positionX!==l)d=parseFloat(k.positionX),dvt.o.$(this.g())&&(d=m-d-e);else{var q=k.halign;"start"==q?q=dvt.o.$(this.g())?
"right":"left":"end"==q&&(q=dvt.o.$(this.g())?"left":"right");d="left"==q?0:"right"==q?m-e:d}k.positionY!==l?n=parseFloat(k.positionY):"top"==k.valign?n=0:"bottom"==k.valign&&(n=c-f);this.X.Ga(d,n)}this.Mb||this.AP(h)}c=this.C;h=dvt.o.$(c.g())?dvt.ba.Km:dvt.ba.qq;b.label&&(k=b.labelStyle,m=dvt.ba.Sz,c=new dvt.ba(c.g(),b.label,0,0),c.Cb(new dvt.e(k)),c.tz(h),c.iE(m),h=dvt.e.vp((new dvt.e(b.labelStyle)).getWidth()),0<h&&dvt.Aa.sd(c,h,Infinity,this)||this.k(c),this.Pb=c);km(this.fs(),b)}a.k(this);a=
s;this.oA?(b=this.V())&&(a=new dvt.U(b.x,b.y,b.a-b.x,b.b-b.y)):(a=this.Mb?this.Mb.pL(this):s)&&this.X?a=a.Hj(this.X.pL(this)):!a&&this.X&&(a=this.X.pL(this));this.ER=a;this.Sf("img");this.wq();this.C.Ua().jb(this,this)};
function em(a,b,c,d){var e=a.C.v()._contextHandler;if(e){var f=a.getData();c=e(a.ib(),a.oA,f,c,d);b=b(c);a.oA&&b!=a.oA&&(a.oA.namespaceURI===dvt.F.cX?a.x0().removeChild(a.oA):a.removeChild(b),a.oA=s);b&&b.namespaceURI===dvt.F.cX?a.oA||(dvt.F.Se(a.x0(),b),a.oA=b):b instanceof dvt.Ne?a.oA||(a.k(b),a.oA=b):b&&a.C.AL("dvt.Diagram: could not add custom node content for the node "+a.getId()+b,1)}else a.C.AL("dvt.Diagram: could not add custom node content - context handler is undefined",1)}
function km(a,b){var c=b.hoverInnerColor,d=b.hoverOuterColor,e=b.selectionColor,f=new dvt.ua(c,1,4);f.Ee(p);d=new dvt.ua(d,1,8);d.Ee(p);var h=new dvt.ua(e,1,2);h.Ee(p);var k=new dvt.ua(e,1,4);k.Ee(p);c=new dvt.ua(c,1,4);c.Ee(p);e=new dvt.ua(e,1,8);e.Ee(p);a.Xt(f,d).Zt(h,k).Cv(c,e)}S.AP=C("aO");S.fs=function(){if(!this.aO&&this.ER){var a=new dvt.ka(this.C.g(),this.ER.x,this.ER.y,this.ER.a,this.ER.b);a.gc();this.AP(a);this.Ib(a,0);km(a,this.getData());this.aO=a}return this.aO};
S.vd=function(){var a=this.Ql();this.Wo=p;this.C.v().hoverRenderer?em(this,this.C.v().hoverRenderer,this.Ql(),a):this.gx(p)};S.Sc=function(){var a=this.Ql();this.Wo=t;this.C.v().hoverRenderer?em(this,this.C.v().hoverRenderer,this.Ql(),a):this.gx(t)};S.gx=function(a){this.fs()&&(a?this.fs().vd():this.fs().Sc())};S.vg=function(){var a=this.Oa().v().tooltip;return a?this.Oa().g().Rf().Uw(a,this.$p()):this.ee()};S.ee=function(){return this.getData().shortDesc};
S.$p=function(){return{id:this.getId(),type:"node",label:this.getData().label}};S.Id=function(){var a=[];this.ob()&&a.push(dvt.D.na(dvt.D.Ka,this.tb()?"STATE_SELECTED":"STATE_UNSELECTED"));return dvt.ja.uk(this.ee(),a)};S.wq=function(){if(!dvt.o.Gi()){var a=this.Id();a&&this.Bd("label",a)}};
S.pe=function(a){var b=s;if(a.keyCode==dvt.G.xi&&a.ctrlKey)b=this;else if((a.keyCode==dvt.G.CL||dvt.G.dL)&&a.altKey){var c=this.Oa().yU(this.getId()),d=this.Oa().Ua().Db;d&&d.Z$&&(b=d.Z$(this,a,c));b?b.xS=this:b=this}else a.type==dvt.ra.Fe?b=this:(b=Xl(this.Oa()),b=dvt.Db.EG(this,a,b));return b};S.Uf=function(){var a=this.Ql();this.dd=p;this.C.v().focusRenderer?em(this,this.C.v().focusRenderer,this.Ql(),a):this.AB(p)};
S.Od=function(){this.Qd()&&(this.Ql(),this.dd=t,this.C.v().focusRenderer?em(this,this.C.v().focusRenderer,this.getData(),this.Ql()):this.AB(t))};S.AB=function(a){this.gx(a)};S.Qd=Q("dd");S.ze=function(){return this.getData().categories?this.getData().categories:[this.getId()]};S.ura=function(){var a=this.Oa().v().hiddenCategories;return a&&dvt.fa.kz(a,this.ze())?p:t};
S.nh=function(a,b){var c=new dvt.Pd(this.g(),s,a.mb()),d=b.la(),e=b.ia(),f=this.la(),h=this.ia();d!=f&&(this.Z(d),c.ea.J(dvt.B.Q,this,this.la,this.Z,f));e!=h&&(this.ma(e),c.ea.J(dvt.B.Q,this,this.ia,this.ma,h));b.X&&this.X&&(c.ea.J(dvt.B.Qz,this.X,this.X.Yy,this.X.cH,this.X.Yy()),this.X.cH(b.X.Yy()));b.Pb&&this.Pb&&(d=b.Pb.lb(),e=this.Pb.lb(),d.Te(e)||(this.Pb.rb(d),c.ea.J(dvt.B.Li,this.Pb,this.Pb.lb,this.Pb.rb,e)));lm(c,b.Mb,this.Mb);lm(c,b.X,this.X);a.add(c,1)};
function lm(a,b,c){b&&c&&(a.ea.J(dvt.B.vq,c,c.ud,c.ga,c.ud()),c.ga(b.ud()))}S.Xj=function(a){Jl(this.Oa()).k(this);var b=this,c=new dvt.Kj(this.g(),this,a.mb());dvt.ab.Nb(c,function(){b.getParent().removeChild(b);b.qa()});a.add(c,0)};S.Ui=function(a){this.P(0);a.add(new dvt.Ah(this.g(),this,a.mb()),2)};S.dm=function(){return this.getData()};S.Ql=function(a){return{hovered:this.Wo,selected:this.tb(),focused:this.dd,zoom:a?a:this.Oa().Ma.Ef()}};function gm(a){this.Init(a)}
ba("DvtDiagramAutomation",gm);dvt.j.u(gm,dvt.Wd,"DvtDiagramAutomation");gm.prototype.Init=C("C");gm.prototype.Ko=function(a){return(a=this.C.Ua().eb(a))&&a instanceof cm?"node["+this.C.wH().indexOf(a.getId())+"]":a&&a instanceof dm?"link["+this.C.iQ().indexOf(a.getId())+"]":s};gm.prototype.oi=function(a){if(a==dvt.Wd.iC)return this.wE(this.C);var b=this.PN(a);a=b.component;var b=b.index,c=s;"node"==a?c=this.nk(b):"link"==a&&(c=mm(this,b));return c?c.ib():s};gm.prototype.getDomElementForSubId=gm.prototype.oi;
gm.prototype.PN=function(a){var b=a,c=-1,d=a.substring(0,a.indexOf("["));d&&(b="node"==d||"link"==d?d:s,c=parseInt(a.substring(a.indexOf("[")+1,a.indexOf("]"))));return{component:b,index:c}};gm.prototype.xg=function(){return this.C.xg()};gm.prototype.getNodeCount=gm.prototype.xg;gm.prototype.Ht=function(){return this.C.Ht()};gm.prototype.getLinkCount=gm.prototype.Ht;
gm.prototype.hd=function(a){if(a=this.nk(a)){var b={};b.id=a.getId();b.selected=a.tb();b.tooltip=a.ee();b.label=a.getData().label;b.background=a.getData().backgroundStyle;b.icon=this.LY(a.uW());return b}return s};gm.prototype.getNode=gm.prototype.hd;
gm.prototype.rU=function(a){if(a=mm(this,a)){var b={};b.id=a.getId();b.selected=a.tb();b.tooltip=a.ee();b.label=a.getData().label;b.color=a.DG();b.width=a.iB();b.style=a.OO();b.startNode=a.Ve();b.endNode=a.Kd();b.startConnectorType=a.tv();b.endConnectorType=a.Et();return b}return s};gm.prototype.getLink=gm.prototype.rU;gm.prototype.LY=function(a){if(a){var b={};b.shape=a instanceof dvt.pa?a.Vd():"none";a.ud()&&(b.color=a.ud().yc());return b}return s};
gm.prototype.nk=function(a){var b=this.C.wH();return 0<=a&&a<b.length?this.C.da(b[a]):s};function mm(a,b){var c=a.C.iQ();return 0<=b&&b<c.length?a.C.gd(c[b]):s};
  return dvt;
});
