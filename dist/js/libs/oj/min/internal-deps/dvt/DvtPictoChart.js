/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(['./DvtToolkit'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.

var p;function ba(a,b){0==a.indexOf("dvt.")&&(a=a.substring(4));var c=a.split("."),d=eval("dvt");c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}Math.floor(2147483648*Math.random()).toString(36);
(function(a){function b(c,d,e,f,h,k,u){b.C.Init.call(this,c.u(),"none"==d?null:d,a.j.pf,e,f,h,k,null,!0,u);this.hj=c}function c(a){this.Init(a)}function d(a,b){this.Init(a,b)}function e(a,b,c,d,f,h,k,l,w,D){e.C.Init.call(this,a.u(),b,c,d,f,null,h,k,l,w,D);this.hj=a}function f(){this.Init({alta:f.lh})}function h(a){this.Init(a.u(),a.dispatchEvent,a);this.hj=a}function k(a){this.hj=a}a.Fi=function(a,b,c){this.Init(a,b,c)};a.v.F(a.Fi,a.Le);a.Fi.newInstance=function(b,c,d){return new a.Fi(b,c,d)};a.Fi.prototype.Init=
function(b,d,e){a.Fi.C.Init.call(this,b,d,e);this.H=new h(this);this.H.Lf(this);a.B.Wa()||this.H.cs(new c(this.H));this.Xg=new f;this.fc=[]};a.Fi.prototype.iH=function(b,c){if(!b||!c){var d=l.tp(this,b,c);this.bpa=d;b||(b=d.items?d.FRa*d.mda:0);c||(c=d.items?d.PWa*d.Kfa:0)}return new a.xj(b,c)};a.Fi.prototype.ta=function(b,c,d){this.Gj=this.Fa;var e=this.ou,f=this.xb?this.xb:0,h=this.Kb?this.Kb:0;this.H.ue();this.fc=[];this.ou=[];this.bpa=null;this.$m&&(this.Fa.removeChild(this.$m),this.$m=null);
this.Bq();this.yf(b);var k=this.u();if(c||d)this.xb=c,this.Kb=d;else if(k.Ob.style.display="block",c=this.iH(),a.K.y5(k,c.a,c.b),d=a.K.Yua(k),c.a==d.a&&c.b!=d.b?(this.Kb=d.b,c=this.iH(null,this.Kb),a.K.y5(k,c.a,this.Kb),this.xb=a.K.Yua(k).a):c.a!=d.a&&c.b==d.b?(this.xb=d.a,c=this.iH(this.xb,null),a.K.y5(k,this.xb,c.b),this.Kb=a.K.Yua(k).b):(this.xb=d.a,this.Kb=d.b),this.xb!=c.a||this.Kb!=c.b)this.bpa=null;this.Fa=new a.ma(k);this.A(this.Fa);l.ta(this,this.Fa,new a.Z(0,0,this.xb,this.Kb),this.bpa);
this.Gj?"none"!=this.W.animationOnDataChange&&b&&(b=new a.xq(k,null),b.Ho(e,this.ou),this.Xb=b.xw()):this.Xb=this.nab();this.Xb?(a.K.y5(k,Math.max(f,this.xb),Math.max(h,this.Kb)),this.H.Pj(this),this.$m&&this.Fa.removeChild(this.$m),this.Xb.mg(this.rba,this),this.Xb.play()):this.rba()};a.Fi.prototype.yf=function(b){b?this.W=this.Xg.jn(b):this.W||(this.W=this.SF());a.B.wj()||(this.W.animationOnDisplay="none",this.W.animationOnDataChange="none");b=this.W.selectionMode;this.Yc="single"==b?new a.Sc(a.Sc.Yy):
"multiple"==b?new a.Sc(a.Sc.Xy):null;this.H.EA(this.Yc)};a.Fi.prototype.rba=function(){this.Gj&&(this.removeChild(this.Gj),this.Gj.ya(),this.Gj=null);this.Xb&&(this.H.Lf(this),this.$m&&this.Fa.A(this.$m));a.K.y5(this.u(),this.xb,this.Kb);for(var b,c=0;c<this.fc.length&&(b=this.fc[c],"none"==b.Nc());c++);this.H.$u(b);this.Yc&&this.Yc.At(this.W.selection,this.fc);a.uh.Ze(this.W.highlightedCategories,this.fc,"any"==this.W.highlightMatch);this.lr();this.em||this.Aq();this.Xb=null;this.em=!1};a.Fi.prototype.Axa=
function(a){this.fc=a};a.Fi.prototype.il=function(){return this.fc};a.Fi.prototype.crb=function(a){this.ou.push(a)};a.Fi.prototype.brb=function(a){this.$m=a};a.Fi.prototype.bob=function(){for(var a=0,b=0;b<this.fc.length;b++)a+=this.fc[b].getCount();return a};a.Fi.prototype.pb=function(){return a.Ta.Vr(this.W.animationDuration)/1E3};a.Fi.prototype.nab=function(){var b=this.W.animationOnDisplay,c=this.pb(),d=this.u(),e=new a.Z(0,0,this.xb,this.Kb);if(a.pc.isSupported(b))return a.pc.$E(d,b,this.Fa,
e,c);var f=[];if("popIn"==b)for(b=0;b<this.ou.length;b++){var h=this.ou[b];f.push(new a.Lt(d,h,!0,c))}else if("none"!=b){for(b=0;b<this.ou.length;b++){var h=this.ou[b],k=new a.jd(d,h,c),A,w;l.Sb(this)?(A=l.Ewa(this)?this.xb:0,w=h.fk(),h.Ct(A),k.ka.N(a.G.V,h,h.fk,h.Ct,w)):(A=l.Dwa(this)?this.Kb:0,w=h.gk(),h.Dt(A),k.ka.N(a.G.V,h,h.gk,h.Dt,w));f.push(k)}f.push(a.pc.$E(d,a.pc.YC,this.Fa,e,c))}return 0<f.length?new a.jh(d,f):null};a.Fi.prototype.Ze=function(b){var c=this.D();c.highlightedCategories=a.bc.clone(b);
a.uh.Ze(b,this.il(),"any"==c.highlightMatch)};a.Fi.prototype.select=function(b){this.D().selection=a.bc.clone(b);this.Yc&&this.Yc.At(b,this.il())};a.Fi.prototype.hm=function(){return a.I.Ef(this.D(),"componentName",a.I.Ia,"PICTOCHART")};a.Fi.prototype.oh=function(){this.bHa||(this.bHa=new k(this));return this.bHa};a.v.F(k,a.Rd);k.prototype.Cn=function(a){return(a=this.hj.Za().mb(a))&&a instanceof d?"item["+this.hj.il().indexOf(a)+"]":null};k.prototype.ph=function(b){if(b==a.Rd.vD)return this.WF(this.hj);
var c=b.indexOf("[");return 0<c&&"item"===b.substring(0,c)&&(b=parseInt(b.substring(c+1,b.length-1)),b=this.hj.il()[b])?b.Ua():null};k.prototype.getItem=function(a){if(a=this.hj.il()[a]){var b={};b.color=a.Wl();b.tooltip=a.ne();b.id=a.getId();b.name=a.getName();b.count=a.getCount();b.selected=a.wb();return b}return null};k.prototype.qM=function(){return this.hj.il().length};a.v.F(h,a.H);h.prototype.zq=function(b,c,d){b=this.hj.D();"none"!=b.hoverBehavior&&(c=c.Zd?c.Zd():[],b.highlightedCategories=
d?c.slice():null,d=a.$a.LI(b.highlightedCategories,d),c=a.Ta.Vr(b.hoverBehaviorDelay),this.PJ.ag(d,this.hj.il(),c,"any"==b.highlightMatch))};h.prototype.jT=function(a){(a=this.mb(a.target))&&(a.tb&&a.tb()||this.ty(a))};h.prototype.fG=function(a){(a=this.mb(a.target))&&a.tb&&a.tb()&&this.ty(a)};h.prototype.qZ=function(a){(a=this.mb(a.target))&&(a.tb&&a.tb()||this.ty(a))};h.prototype.$w=function(a){(a=this.mb(a.target))&&(a.tb&&a.tb()||this.ty(a))};h.prototype.BJ=function(a){var b=this.mb(a.target);
b&&b.tb&&b.tb()&&(a.preventDefault(),a.stopPropagation(),this.ty(b))};h.prototype.ty=function(b){b instanceof d&&b.jk()&&this.ml(a.$a.rfa(b.getId()))};a.v.F(f,a.fb);f.lh={animationOnDisplay:"none",animationOnDataChange:"none",animationDuration:750,drilling:"off",hiddenCategories:[],highlightedCategories:[],highlightMatch:"all",hoverBehavior:"none",hoverBehaviorDelay:200,layout:"horizontal",layoutOrigin:"topStart",selection:[],selectionMode:"none",_defaultColor:"#a6acb1",_noneShapeColor:"rgba(255,255,255,0)",
_defaultSize:32,_defaultShape:"rectangle",_gapRatio:.25,_textStyle:new a.j(a.fb.A6+"color: #252525;"),_statusMessageStyle:new a.j(a.fb.A6+"color: #252525;"),_tooltipStyle:new a.j("border-collapse: separate; border-spacing: 1px"),_tooltipLabelStyle:new a.j("color: #666666; padding: 0px 2px"),_tooltipValueStyle:new a.j("color: #333333; padding: 0px 2px")};a.v.F(e,a.Hf);e.prototype.tg=function(b,c){var d=new a.jd(this.u(),this,.75*this.hj.pb()),e=d.ka,f=this.Xk();this.Fm(c.Xk());e.N(a.G.zf,this,this.Xk,
this.Fm,f);c.T(0);b.add(d,1)};e.prototype.Mj=function(b){b.add(new a.Wi(this.u(),this,.5*this.hj.pb()),0)};e.prototype.Oi=function(b){this.T(0);b.add(new a.hh(this.u(),this,.5*this.hj.pb()),2)};e.prototype.Xk=function(){return[this.fk(),this.gk(),this.getWidth(),this.getHeight()]};e.prototype.Fm=function(a){this.Ct(a[0]);this.Dt(a[1]);this.Xa(a[2]);this.qb(a[3])};a.v.F(d,a.ma);d.tB=0;d.prototype.Init=function(b,c){d.C.Init.call(this,b.u(),null,c.id);this.hj=b;this.Rn=c;this.xc=null!=c.id?c.id:null!=
c.name?c.name:"_defaultId"+d.tB;d.tB++;this.tP="none"==c.shape;this.dd=this.Ol=!1;this.nV=new a.R(0,0);(this.tb()||this.jk())&&this.setCursor("pointer");b.Za().nb(this,this)};d.prototype.XSa=function(){var a=this.Rn.columnSpan;return null!=a&&0<=a?a:1};d.prototype.wUa=function(){var a=this.Rn.rowSpan;return null!=a&&0<=a?a:1};d.prototype.getCount=function(){var a=this.Rn.count;return null!=a?Math.max(a,0):1};d.prototype.Nc=function(){return this.Rn.shape||this.hj.D()._defaultShape};d.prototype.gc=
function(){return this.tP?this.hj.D()._noneShapeColor:this.Rn.color||this.hj.D()._defaultColor};d.prototype.Yn=function(){return this.Rn.borderColor};d.prototype.Pg=function(){return this.Rn.borderWidth};d.prototype.Ku=function(){return this.Rn.className};d.prototype.M=function(){return this.Rn.style};d.prototype.l4=function(){return this.Rn.source};d.prototype.uva=function(){return this.Rn.sourceSelected};d.prototype.sva=function(){return this.Rn.sourceHover};d.prototype.tva=function(){return this.Rn.sourceHoverSelected};
d.prototype.getName=function(){return this.Rn.name};d.prototype.getId=function(){return this.xc};d.prototype.ne=function(){return this.Rn.shortDesc};d.prototype.jk=function(){if(this.tP)return!1;var a=this.Rn.drilling;return a&&"inherit"!=a?"on"==a:"on"==this.hj.D().drilling};d.prototype.kl=function(){return this.tb()&&this.jk()&&!this.tP};d.prototype.eub=function(){this.bg("img");this.Nr()};d.prototype.Qg=function(){if(this.tP)return"";var b=this.hj.D(),c=this.hj.D().tooltip;if(c=c?c.renderer:null){var b=
this.hj.u().Df(),d={id:this.getId(),name:this.getName(),count:this.getCount(),color:this.gc()};return b.fy(c,d)}if(null!=this.ne())return this.ne();c="";(d=this.getName())&&(c=a.Oe.QW("td",b._tooltipLabelStyle)+d+"\x3c/td\x3e");d=a.B.ca(this.hj.u());b._tooltipLabelStyle.ea(a.j.nG,d?"left":"right");b._tooltipValueStyle.ea(a.j.nG,d?"right":"left");return a.Oe.QW("table",b._tooltipStyle)+"\x3ctr\x3e"+c+a.Oe.QW("td",b._tooltipValueStyle)+this.coa()+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"};d.prototype.Wl=
function(){return this.gc()};d.prototype.coa=function(){return a.I.Ef(this.hj.D(),"labelCountWithTotal",a.I.Ia,"COUNT_WITH_TOTAL",[this.getCount(),this.hj.bob()])};d.prototype.tb=function(){return"none"!=this.hj.D().selectionMode&&!this.tP};d.prototype.wb=function(){return this.Ol};d.prototype.lc=function(a){this.Ol=a;this.Nr();for(var c=0;c<this.Pb();c++){var d=this.jb(c);(d instanceof b||d instanceof e)&&d.lc(a)}};d.prototype.pd=function(){for(var a=0;a<this.Pb();a++){var c=this.jb(a);(c instanceof
b||c instanceof e)&&c.pd()}};d.prototype.Jc=function(){for(var a=0;a<this.Pb();a++){var c=this.jb(a);(c instanceof b||c instanceof e)&&c.Jc()}};d.prototype.Se=function(){return[this]};d.prototype.Ed=function(){var b=[],c=this.hj.D();this.tb()&&b.push(a.I.Ef(c,this.wb()?"stateSelected":"stateUnselected",a.I.Ia,this.wb()?"STATE_SELECTED":"STATE_UNSELECTED"));this.jk()&&b.push(a.I.Ef(c,"stateDrillable",a.I.Ia,"STATE_DRILLABLE"));c=this.getName();c=null!=this.ne()?this.ne():null==c?this.coa():a.I.wa(a.I.Ia,
"COLON_SEP_LIST",[c,this.coa()]);return a.oa.Ik(c,b)};d.prototype.Nr=function(){a.B.ij()||this.Gd("label",this.Ed())};d.prototype.Zd=function(){return this.Rn.categories||[this.getId()]};d.prototype.Fd=function(b){var d=this.hj.Za().Cb;return b.type==a.MouseEvent.Ce||d.Vu(b)?this:d.Si(b)?c.Fd(this.hj,this,b):null};d.prototype.tf=function(a){return this.aa(a)};d.prototype.Mm=function(){return this.Ua()};d.prototype.Tf=function(){this.tP||(this.dd=!0,this.pd())};d.prototype.Qd=function(){this.tP||(this.dd=
!1,this.Jc())};d.prototype.Kd=function(){return this.dd};d.prototype.aga=function(a){this.nV=a};d.prototype.bea=function(){return this.nV};a.v.F(c,a.Cb);c.prototype.qF=function(a){return this.Si(a)&&!a.ctrlKey};c.prototype.Vu=function(b){return b.keyCode==a.KeyboardEvent.ki&&b.ctrlKey};c.Fd=function(b,d,e,f){var h=b.il();f||(f=d);if("none"==d.Nc()&&d!=f){var k=a.na.lb(h,d);if(0==k||k==h.length-1)return f}var u=l.Ewa(b),A=l.Dwa(b),w=l.Sb(b),k=d,u=e.keyCode==a.KeyboardEvent.Nf&&u||e.keyCode==a.KeyboardEvent.xf&&
!u||e.keyCode==a.KeyboardEvent.kh&&A||e.keyCode==a.KeyboardEvent.Uf&&!A,w=e.keyCode==a.KeyboardEvent.Nf&&w||e.keyCode==a.KeyboardEvent.xf&&w||e.keyCode==a.KeyboardEvent.kh&&!w||e.keyCode==a.KeyboardEvent.Uf&&!w,u=a.na.lb(h,d)+(u?1:-1);w?k=a.Cb.Fd(d,e,h):u<h.length&&0<=u&&(k=h[u]);"none"==k.Nc()&&(k=k!=d?c.Fd(b,k,e,f):f);return k};c.prototype.mk=function(b){var d=this.yb.nf();return d&&b.keyCode==a.KeyboardEvent.Yi?(this.yb.ty(d),a.H.sc(b),d):c.C.mk.call(this,b)};a.v.F(b,a.za);b.prototype.tg=function(b,
c){var d=new a.jd(this.u(),this,.75*this.hj.pb()),e=d.ka,f=this.gd();this.qa(c.gd().clone());e.N(a.G.oo,this,this.gd,this.qa,f);f=this.Xk();this.Fm(c.Xk());e.N(a.G.zf,this,this.Xk,this.Fm,f);c.T(0);b.add(d,1)};b.prototype.Mj=function(b){b.add(new a.Wi(this.u(),this,.5*this.hj.pb()),0)};b.prototype.Oi=function(b){this.T(0);b.add(new a.hh(this.u(),this,.5*this.hj.pb()),2)};b.prototype.Xk=function(){return[this.fk(),this.gk(),this.getWidth(),this.getHeight()]};b.prototype.Fm=function(a){this.Ct(a[0]);
this.Dt(a[1]);this.Xa(a[2]);this.qb(a[3])};var l={};a.v.F(l,a.v);l.ta=function(c,d,f,h){var k=c.u(),x=new a.Rect(k,f.x,f.y,f.a,f.b);x.Wb();d.A(x);h||(h=l.tp(c,f.a,f.b));if(h.items){c.Axa(h.items);for(var x=c.D()._gapRatio,u=l.Sb(c),A=l.Dwa(c),w=l.Ewa(c),D=new a.QN,B=0,C=0,y=0,H=0;H<h.items.length;H++){for(var z=h.items[H],E=z.XSa(),M=z.wUa(),T=E*h.mda,O=M*h.Kfa,ia=z.getCount(),ga=0,aa=!0,fa;0<ia;){if(E!=B||M!=C)y=0;0==y&&(fa=l.yJa(D,E,M,h.FRa,h.PWa,u));if(null==fa)break;var ea=fa.kta*h.mda+T/2,P=
fa.Jxa*h.Kfa+O/2,ea=f.x+(w?f.a-ea:ea),P=f.y+(A?f.b-P:P),W=Math.min(1-y,ia),U,R,X,ca;u?(U=ea-T/2,R=A?P+O*(.5-W-y):P+O*(y-.5),X=T,ca=O*W):(U=w?ea+T*(.5-W-y):ea+T*(y-.5),R=P-O/2,X=T*W,ca=O);var L;1==W?(L=z.getId()+"_"+ga,ga++):L=Math.random();if(z.l4())L=new e(c,ea,P,T,O,z.l4(),z.uva(),z.sva(),z.tva(),L+"_I");else{var oa=new a.Rect(k,U,R,X,ca);oa.Wb();z.A(oa);L=new b(c,z.Nc(),ea,P,T-h.mda*x,O-h.Kfa*x,L+"_S");L.ib(z.gc());L.Tb(z.Yn(),null,z.Pg());L.cY(z.gc());L.Je(z.Ku());L.ea(z.M())}1>W&&(oa=new a.wd,
oa.Ge(U,R,X,ca),L.oe(oa));aa&&(z.aga(new a.R(ea,P)),aa=!1);z.A(L);c.crb(L);ia-=W;y=(y+W)%1}d.A(z);z.eub();B=E;C=M}}else l.yp(c,d,f)};l.tp=function(b,c,e){var f=b.D(),h=f.items;if(!h)return{};for(var k=a.na.UQ(f.hiddenCategories),u=[],A=0,w=1,D=1,B=0;B<h.length;B++)if(null!=h[B]){var C=new d(b,h[B]);if(!k||!a.na.BX(k,C.Zd())){var y=C.XSa(),H=C.wUa();y>w&&(w=y);H>D&&(D=H);A+=y*H*C.getCount();u.push(C)}}if(0==A)return{};h=f.columnWidth;k=f.rowHeight;c&&e||(h||(h=k?k:f._defaultSize),k||(k=h));b=l.Sb(b);
B=f.columnCount;f=f.rowCount;B||f||(c&&e?b?f=l.oU(Math.sqrt(A*e/c),D):B=l.oU(Math.sqrt(A*c/e),w):c?B=Math.max(Math.floor(c/h),1):e?f=Math.max(Math.floor(e/k),1):b?f=l.oU(Math.sqrt(A),D):B=l.oU(Math.sqrt(A),w));B?f||(f=l.oU(A/B,D)):B=l.oU(A/f,w);c&&e&&(h||(h=k?k:Math.min(c/B,e/f)),k||(k=h));return 0>=B||0>=f||0>=h||0>=k?{}:{items:u,FRa:B,PWa:f,mda:h,Kfa:k}};l.oU=function(a,b){return Math.ceil(a/b)*b};l.yJa=function(a,b,c,d,e,f){if(f)return(a=l.yJa(a,c,b,e,d,!1))?{kta:a.Jxa,Jxa:a.kta}:null;for(f=0;f<
e-c+1;f++)for(var h=0;h<d-b+1;h++)if(l.k8a(a,h,f,b,c))return l.Idb(a,h,f,b,c),{kta:h,Jxa:f};return null};l.k8a=function(a,b,c,d,e){for(var f=0;f<e;f++)for(var h=0;h<d;h++)if(a.get(b+h,c+f))return!1;return!0};l.Idb=function(a,b,c,d,e){for(var f=0;f<e;f++)for(var h=0;h<d;h++)a.put(b+h,c+f,!0)};l.yp=function(b,c,d){var e=b.D(),f=a.I.Ef(e,"labelNoData",a.I.Ia,"NO_DATA");c=a.Ba.yp(c,f,d.clone(),b.Za(),e._statusMessageStyle);b.brb(c)};l.Sb=function(a){return"vertical"==a.D().layout};l.Dwa=function(a){a=
a.D().layoutOrigin;return"bottomStart"==a||"bottomEnd"==a};l.Ewa=function(b){var c=b.D().layoutOrigin,c="topEnd"==c||"bottomEnd"==c;return a.B.ca(b.u())?!c:c};a.Ha(a,"PictoChart",a.Fi);a.Ha(a.Fi,"newInstance",a.Fi.newInstance);a.Ha(a.Fi.prototype,"destroy",a.Fi.prototype.ya);a.Ha(a.Fi.prototype,"getAutomation",a.Fi.prototype.oh);a.Ha(a.Fi.prototype,"highlight",a.Fi.prototype.Ze);a.Ha(a.Fi.prototype,"render",a.Fi.prototype.ta);a.Ha(a.Fi.prototype,"select",a.Fi.prototype.select);a.Ha(k.prototype,"getDomElementForSubId",
k.prototype.ph);a.Ha(k.prototype,"getItem",k.prototype.getItem);a.Ha(k.prototype,"getItemCount",k.prototype.qM)})(dvt);
  return dvt;
});
