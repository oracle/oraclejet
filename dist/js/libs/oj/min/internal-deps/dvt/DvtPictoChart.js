/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(['./DvtToolkit'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.

  // Map the D namespace to dvt, which is used to provide access across partitions.
  var D = dvt;
  
D.qQ=function(a,b,c){this.Init(a,b,c)};(0,D.ca)("DvtPictoChart",D.qQ);D.w.l(D.qQ,D.nj,"DvtPictoChart");D.qQ.newInstance=function(a,b,c){return new D.qQ(a,b,c)};D.qQ.prototype.Init=function(a,b,c){D.qQ.o.Init.call(this,a,b,c);this.Ia=new D.rQ(this);this.Ia.le(this);(0,D.Gf)()||(0,D.tj)(this.Ia,new D.sQ(this.Ia));this.pf=new D.tQ;this.Za=[]};D.qQ.prototype.uC=function(a,b){if(!a||!b){var c=D.uQ.$k(this,a,b);this.b7=c;a||(a=c.Rl?c.Npa*c.CZ:0);b||(b=c.Rl?c.wta*c.L0:0)}return new D.yg(a,b)};
D.qQ.prototype.P=function(a,b,c){this.Mg=this.X;var d=this.jn,e=this.Ga?this.Ga:0,f=this.Ua?this.Ua:0;this.Ia.Ac();this.Za=[];this.jn=[];this.b7=null;this.en&&(this.X.removeChild(this.en),this.en=null);this.Sa&&(this.Ts=!0,this.Sa.stop());this.ud(a);var g=this.j();if(!b&&!c){if(g.Ka.style.display="block",b=this.uC(),D.A.vT(g,b.e,b.g),c=D.A.hba(g),b.e==c.e&&b.g!=c.g?(this.Ua=c.g,b=this.uC(null,this.Ua),D.A.vT(g,b.e,this.Ua),this.Ga=D.A.hba(g).e):b.e!=c.e&&b.g==c.g?(this.Ga=c.e,b=this.uC(this.Ga,null),
D.A.vT(g,this.Ga,b.g),this.Ua=D.A.hba(g).g):(this.Ga=c.e,this.Ua=c.g),this.Ga!=b.e||this.Ua!=b.g)this.b7=null}else this.Ga=b,this.Ua=c;this.X=new D.B(g);this.k(this.X);D.uQ.P(this,this.X,new D.z(0,0,this.Ga,this.Ua),this.b7);if(this.Mg)"none"!=this.D.animationOnDataChange&&a&&(a=new D.Jm(g,null),(0,D.Km)(a,d,this.jn),this.Sa=a.Nq());else{var h=this.D.animationOnDisplay,d=this.xa();a=this.j();b=new D.z(0,0,this.Ga,this.Ua);if(D.Zk.isSupported(h))d=D.Zk.by(a,h,this.X,b,d);else{c=[];if("popIn"==h)for(h=
0;h<this.jn.length;h++){var i=this.jn[h];c.push(new D.fn(a,i,!0,d))}else if("none"!=h){for(h=0;h<this.jn.length;h++){var i=this.jn[h],k=new D.gn(a,i,d),l,m;D.uQ.Ra(this)?(l=D.uQ.Zba(this)?this.Ga:0,m=i.Dg(),i.ru(l),(0,D.T)(k.J,"typeNumber",i,i.Dg,i.ru,m)):(l=D.uQ.Yba(this)?this.Ua:0,m=i.Eg(),i.su(l),(0,D.T)(k.J,"typeNumber",i,i.Eg,i.su,m));c.push(k)}c.push(D.Zk.by(a,D.Zk.uw,this.X,b,d))}d=0<c.length?new D.en(a,c):null}this.Sa=d}this.Sa?(D.A.vT(g,window.Math.max(e,this.Ga),window.Math.max(f,this.Ua)),
this.Ia.ei(this),this.en&&this.X.removeChild(this.en),this.Sa.he(this.TX,this),this.Sa.play()):this.TX()};D.qQ.prototype.render=D.qQ.prototype.P;D.u=D.qQ.prototype;D.u.ud=function(a){a?this.D=this.pf.Tj(a):this.D||(this.D=(0,D.vj)(this));(0,D.Uk)()||(this.D.animationOnDisplay="none",this.D.animationOnDataChange="none");a=this.D.selectionMode;this.Hb="single"==a?new D.Vk("s"):"multiple"==a?new D.Vk("m"):null;this.Ia.yu(this.Hb)};
D.u.TX=function(){this.Mg&&(this.removeChild(this.Mg),this.Mg.Q(),this.Mg=null);this.Sa&&(this.Sa=null,this.Ia.le(this),this.en&&this.X.k(this.en));D.A.vT(this.j(),this.Ga,this.Ua);(0,D.xj)(this.Ia,this.Za[0]);this.Hb&&(0,D.Cl)(this.Hb,this.D.selection,this.Za);(0,D.ll)(this.D.highlightedCategories,this.Za,"any"==this.D.highlightMatch);this.Pn();this.Ts||(0,D.el)(this);this.Ts=null};D.u.la=(0,D.s)("Ia");D.u.Qca=(0,D.q)("Za");D.u.yh=(0,D.s)("Za");
D.u.xa=function(){return(0,D.So)(this.D.animationDuration)/1E3};D.u.Q=function(){this.Ia&&(this.Ia.ei(this),this.Ia.Q(),this.Ia=null);D.qQ.o.Q.call(this)};D.qQ.prototype.destroy=D.qQ.prototype.Q;D.qQ.prototype.Ee=function(a){var b=this.q();b.highlightedCategories=D.kl.Y(a);(0,D.ll)(a,this.yh(),"any"==b.highlightMatch)};D.qQ.prototype.highlight=D.qQ.prototype.Ee;D.qQ.prototype.select=function(a){this.q().selection=D.kl.Y(a);this.Hb&&(0,D.Cl)(this.Hb,a,this.yh())};D.qQ.prototype.select=D.qQ.prototype.select;
D.qQ.prototype.Fj=function(){return(0,D.ik)(this.q(),"componentName","DvtUtilBundle","PICTOCHART")};D.qQ.prototype.Df=function(){this.Yha||(this.Yha=new D.vQ(this));return this.Yha};D.qQ.prototype.getAutomation=D.qQ.prototype.Df;
D.vQ=(0,D.q)("lg");(0,D.ca)("DvtPictoChartAutomation",D.vQ);D.w.l(D.vQ,D.zj,"DvtPictoChartAutomation");D.vQ.prototype.ol=function(a){return(a=(0,D.Aj)(this.lg.la(),a))&&a instanceof D.wQ?"item["+this.lg.yh().indexOf(a)+"]":null};D.vQ.prototype.Ff=function(a){if("tooltip"==a)return(0,D.Tl)(this.lg);var b=a.indexOf("[");return 0<b&&"item"===a.substring(0,b)&&(a=(0,window.parseInt)(a.substring(b+1,a.length-1)),a=this.lg.yh()[a])?a.ta():null};D.vQ.prototype.getDomElementForSubId=D.vQ.prototype.Ff;
D.vQ.prototype.getItem=function(a){if(a=this.lg.yh()[a]){var b={};b.color=a.si();b.tooltip=a.zc();b.id=a.getId();b.name=a.getName();b.count=a.getCount();b.selected=a.Ca();return b}return null};D.vQ.prototype.getItem=D.vQ.prototype.getItem;D.vQ.prototype.XL=function(){return this.lg.yh().length};D.vQ.prototype.getItemCount=D.vQ.prototype.XL;
D.rQ=function(a){this.Init(a.j(),a.dispatchEvent,a);this.lg=a};D.w.l(D.rQ,D.Lj,"DvtPictoChartEventManager");D.u=D.rQ.prototype;D.u.dm=function(a,b,c){a=this.lg.q();"none"!=a.hoverBehavior&&(b=b.Lc?b.Lc():[],a.highlightedCategories=c?b.slice():null,c=new D.qm(c?"categoryRollOver":"categoryRollOut",a.highlightedCategories),b=(0,D.So)(a.hoverBehaviorDelay),this.GB.Od(c,this.lg.yh(),b,"any"==a.highlightMatch))};D.u.GI=function(a){(a=(0,D.Aj)(this,a.target))&&(!a.Aa||!a.Aa())&&this.ss(a)};
D.u.Ky=function(a){(a=(0,D.Aj)(this,a.target))&&a.Aa&&a.Aa()&&this.ss(a)};D.u.BN=function(a){(a=(0,D.Aj)(this,a.target))&&(!a.Aa||!a.Aa())&&this.ss(a)};D.u.pr=function(a){(a=(0,D.Aj)(this,a.target))&&(!a.Aa||!a.Aa())&&this.ss(a)};D.u.wB=function(a){var b=(0,D.Aj)(this,a.target);b&&(b.Aa&&b.Aa())&&(a.preventDefault(),a.stopPropagation(),this.ss(b))};D.u.ss=function(a){a instanceof D.wQ&&a.Sg()&&this.Fh(new D.Pj(a.getId()))};
D.tQ=function(){this.Init({alta:D.xQ})};D.w.l(D.tQ,D.Jj,"DvtPictoChartDefaults");
D.xQ={animationOnDisplay:"none",animationOnDataChange:"none",animationDuration:750,drilling:"off",hiddenCategories:[],highlightedCategories:[],highlightMatch:"all",hoverBehavior:"none",hoverBehaviorDelay:200,layout:"horizontal",layoutOrigin:"topStart",selection:[],selectionMode:"none",_defaultColor:"#a6acb1",_defaultSize:32,_defaultShape:"rectangle",_gapRatio:0.25,_textStyle:new D.F("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; color: #252525;"),_statusMessageStyle:new D.F("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; color: #252525;"),
_tooltipStyle:new D.F("border-collapse: separate; border-spacing: 1px"),_tooltipLabelStyle:new D.F("color: #737373; padding: 0px 2px"),_tooltipValueStyle:new D.F("color: #333333; padding: 0px 2px")};
D.yQ=function(a,b,c,d,e,f,g,h,i,k){D.yQ.o.Init.call(this,a.j(),b,c,d,e,f,g,h,i,k);this.lg=a};D.w.l(D.yQ,D.Zg,"DvtPictoChartImageMarker");D.u=D.yQ.prototype;D.u.ff=function(a,b){var c=new D.gn(this.j(),this,0.75*this.lg.xa()),d=c.J,e=this.Qk();this.xm(b.Qk());(0,D.T)(d,"typeNumberArray",this,this.Qk,this.xm,e);b.B(0);a.add(c,1)};D.u.hh=function(a){a.add(new D.jn(this.j(),this,0.5*this.lg.xa()),0)};D.u.pg=function(a){this.B(0);a.add(new D.Mm(this.j(),this,0.5*this.lg.xa()),2)};
D.u.Qk=function(){return[this.Dg(),this.Eg(),this.getWidth(),this.getHeight()]};D.u.xm=function(a){this.ru(a[0]);this.su(a[1]);this.ma(a[2]);this.Da(a[3])};
D.wQ=function(a,b){this.Init(a,b)};D.w.l(D.wQ,D.B,"DvtPictoChartItem");D.zQ=0;D.wQ.prototype.Init=function(a,b){D.wQ.o.Init.call(this,a.j(),null,b.id);this.lg=a;this.Rk=b;this.Xa=null!=b.id?b.id:null!=b.name?b.name:"_defaultId"+D.zQ;D.zQ++;this.Ib=this.Rh=!1;this.xla=new D.E(0,0);(this.Aa()||this.Sg())&&this.setCursor("pointer");a.la().Fa(this,this)};D.AQ=function(a){a=a.Rk.columnSpan;return null!=a&&0<=a?a:1};D.BQ=function(a){a=a.Rk.rowSpan;return null!=a&&0<=a?a:1};D.u=D.wQ.prototype;
D.u.getCount=function(){var a=this.Rk.count;return null!=a?window.Math.max(a,0):1};D.u.sb=function(){return this.Rk.shape||this.lg.q()._defaultShape};D.u.rb=function(){return this.Rk.color||this.lg.q()._defaultColor};D.u.vk=function(){return this.Rk.borderColor};D.u.Qg=function(){return this.Rk.borderWidth};D.u.lS=function(){return this.Rk.source};D.u.uba=function(){return this.Rk.sourceSelected};D.u.sba=function(){return this.Rk.sourceHover};D.u.tba=function(){return this.Rk.sourceHoverSelected};
D.u.getName=function(){return this.Rk.name};D.u.getId=(0,D.s)("Xa");D.u.zc=function(){return this.Rk.shortDesc};D.u.Sg=function(){var a=this.Rk.drilling;return a&&"inherit"!=a?"on"==a:"on"==this.lg.q().drilling};D.u.Bh=function(){return this.Aa()&&this.Sg()};
D.u.Be=function(){var a=this.lg.q(),b=this.lg.q().tooltip;if(b){var a=this.lg.j().fe(),c={id:this.getId(),name:this.getName(),count:this.getCount(),color:this.rb()};return(0,D.ap)(a,b,c)}if(null!=this.zc())return this.zc();b="";(c=this.getName())&&(b=(0,D.bp)("td",a._tooltipLabelStyle)+c+"\x3c/td\x3e");c=(0,D.D)(this.lg.j());a._tooltipLabelStyle.W("text-align",c?"left":"right");a._tooltipValueStyle.W("text-align",c?"right":"left");return(0,D.bp)("table",a._tooltipStyle)+"\x3ctr\x3e"+b+(0,D.bp)("td",
a._tooltipValueStyle)+(0,D.CQ)(this)+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"};D.u.si=function(){return this.rb()};D.CQ=function(a){var b=a.lg.q(),c=a.getCount();a=a.lg;for(var d=0,e=0;e<a.Za.length;e++)d+=a.Za[e].getCount();return(0,D.ik)(b,"labelCountWithTotal","DvtUtilBundle","COUNT_WITH_TOTAL",[c,d])};D.u=D.wQ.prototype;D.u.Aa=function(){return"none"!=this.lg.q().selectionMode};D.u.Ca=(0,D.s)("Rh");
D.u.jb=function(a){this.Rh=a;this.Hq();for(var b=0;b<this.Ja();b++){var c=this.ha(b);(c instanceof D.DQ||c instanceof D.yQ)&&c.jb(a)}};D.u.Ob=function(){for(var a=0;a<this.Ja();a++){var b=this.ha(a);(b instanceof D.DQ||b instanceof D.yQ)&&b.Ob()}};D.u.Db=function(){for(var a=0;a<this.Ja();a++){var b=this.ha(a);(b instanceof D.DQ||b instanceof D.yQ)&&b.Db()}};D.u.Yc=function(){return[this]};
D.u.ec=function(){var a=[],b=this.lg.q();this.Aa()&&a.push((0,D.ik)(b,this.Ca()?"stateSelected":"stateUnselected","DvtUtilBundle",this.Ca()?"STATE_SELECTED":"STATE_UNSELECTED"));this.Sg()&&a.push((0,D.ik)(b,"stateDrillable","DvtUtilBundle","STATE_DRILLABLE"));b=this.getName();b=null!=this.zc()?this.zc():null==b?(0,D.CQ)(this):(0,D.P)("DvtUtilBundle","COLON_SEP_LIST",[b,(0,D.CQ)(this)]);return(0,D.jk)(b,a)};D.u.Hq=function(){(0,D.$e)()||this.Zb("label",this.ec())};
D.u.Lc=function(){return this.Rk.categories||[this.getId()]};D.u.zd=function(a){var b=this.lg.la().Rf;if(a.type==D.fk||b.$q(a))a=this;else if(b.sg(a)){var b=this.lg,c=D.uQ.Zba(b),d=D.uQ.Yba(b);a=37==a.keyCode&&c||39==a.keyCode&&!c||38==a.keyCode&&d||40==a.keyCode&&!d;b=b.yh();a=D.H.wa(b,this)+(a?1:-1);a=a<b.length&&0<=a?b[a]:this}else a=null;return a};D.u.Ce=function(a){return this.F(a)};D.u.wj=function(){return this.ta()};D.u.Ud=function(){this.Ib=!0;this.Ob()};D.u.ic=function(){this.Ib=!1;this.Db()};
D.u.oc=(0,D.s)("Ib");D.u.Zaa=(0,D.s)("xla");
D.sQ=function(a){this.Init(a)};D.w.l(D.sQ,D.ek,"DvtPictoChartKeyboardHandler");D.sQ.prototype.qy=function(a){return this.sg(a)&&!a.ctrlKey};D.sQ.prototype.$q=function(a){return 32==a.keyCode&&a.ctrlKey};D.sQ.prototype.Ch=function(a){var b=this.ea.dd();return b&&13==a.keyCode?(this.ea.ss(b),(0,D.di)(a),b):D.sQ.o.Ch.call(this,a)};
D.DQ=function(a,b,c,d,e,f,g){D.DQ.o.Init.call(this,a.j(),b,"alta",c,d,e,f,!0,g);this.lg=a};D.w.l(D.DQ,D.$g,"DvtPictoChartShapeMarker");D.u=D.DQ.prototype;D.u.ff=function(a,b){var c=new D.gn(this.j(),this,0.75*this.lg.xa()),d=c.J,e=this.Rb();this.L(b.Rb().Y());(0,D.T)(d,"typeFill",this,this.Rb,this.L,e);e=this.Qk();this.xm(b.Qk());(0,D.T)(d,"typeNumberArray",this,this.Qk,this.xm,e);b.B(0);a.add(c,1)};D.u.hh=function(a){a.add(new D.jn(this.j(),this,0.5*this.lg.xa()),0)};
D.u.pg=function(a){this.B(0);a.add(new D.Mm(this.j(),this,0.5*this.lg.xa()),2)};D.u.Qk=function(){return[this.Dg(),this.Eg(),this.getWidth(),this.getHeight()]};D.u.xm=function(a){this.ru(a[0]);this.su(a[1]);this.ma(a[2]);this.Da(a[3])};
D.uQ={};D.w.l(D.uQ,D.w,"DvtPictoChartRenderer");
D.uQ.P=function(a,b,c,d){var e=a.j(),f=new D.C(e,c.x,c.y,c.e,c.g);(0,D.si)(f);b.k(f);d||(d=D.uQ.$k(a,c.e,c.g));if(d.Rl){a.Qca(d.Rl);for(var f=a.q()._gapRatio,g=D.uQ.Ra(a),h=D.uQ.Yba(a),i=D.uQ.Zba(a),k=new D.ol,l=0,m=0,n=0,o=0;o<d.Rl.length;o++){for(var p=d.Rl[o],r=(0,D.AQ)(p),t=(0,D.BQ)(p),v=r*d.CZ,y=t*d.L0,L=p.getCount(),J=0,G=!0,O;0<L;){if(r!=l||t!=m)n=0;0==n&&(O=D.uQ.Vja(k,r,t,d.Npa,d.wta,g));if(null==O)break;var K=O.X$*d.CZ+v/2,U=O.dT*d.L0+y/2,K=c.x+(i?c.e-K:K),da=c.y+(h?c.g-U:U),U=window.Math.min(1-
n,L),pa,ta,Aa,kb;g?(pa=K-v/2,ta=h?da+y*(0.5-U-n):da+y*(n-0.5),Aa=v,kb=y*U):(pa=i?K+v*(0.5-U-n):K+v*(n-0.5),ta=da-y/2,Aa=v*U,kb=y);var Ha;1==U?(Ha=p.getId()+"_"+J,J++):Ha=window.Math.random();if(p.lS())Ha=new D.yQ(a,K,da,v,y,p.lS(),p.uba(),p.sba(),p.tba(),Ha+"_I");else{var fb=new D.C(e,pa,ta,Aa,kb);(0,D.si)(fb);p.k(fb);Ha=new D.DQ(a,p.sb(),K,da,v-d.CZ*f,y-d.L0*f,Ha+"_S");Ha.pa(p.rb());Ha.Qa(p.vk(),null,p.Qg());Ha.dI(p.rb())}1>U&&(fb=new D.qg,(0,D.sg)(fb,pa,ta,Aa,kb),(0,D.tg)(Ha,fb));G&&(G=new D.E(K,
da),p.xla=G,G=!1);p.k(Ha);a.jn.push(Ha);L-=U;n=(n+U)%1}b.k(p);l=p;l.Td("img");l.Hq();l=r;m=t}}else D.uQ.Lm(a,b,c)};
D.uQ.$k=function(a,b,c){var d=a.q(),e=d.items;if(!e)return{};for(var f=D.H.$G(d.hiddenCategories),g=[],h=0,i=1,k=1,l=0;l<e.length;l++)if(null!=e[l]){var m=new D.wQ(a,e[l]);if(!f||!D.H.tM(f,m.Lc())){var n=(0,D.AQ)(m),o=(0,D.BQ)(m);n>i&&(i=n);o>k&&(k=o);h+=n*o*m.getCount();g.push(m)}}if(0==h)return{};e=d.columnWidth;f=d.rowHeight;if(!b||!c)e||(e=f?f:d._defaultSize),f||(f=e);a=D.uQ.Ra(a);l=d.columnCount;d=d.rowCount;!l&&!d&&(b&&c?a?d=D.uQ.qJ(window.Math.sqrt(h*c/b),k):l=D.uQ.qJ(window.Math.sqrt(h*b/
c),i):b?l=window.Math.max(window.Math.floor(b/e),1):c?d=window.Math.max(window.Math.floor(c/f),1):a?d=D.uQ.qJ(window.Math.sqrt(h),k):l=D.uQ.qJ(window.Math.sqrt(h),i));l?d||(d=D.uQ.qJ(h/l,k)):l=D.uQ.qJ(h/d,i);b&&c&&(e||(e=f?f:window.Math.min(b/l,c/d)),f||(f=e));return 0>=l||0>=d||0>=e||0>=f?{}:{Rl:g,Npa:l,wta:d,CZ:e,L0:f}};D.uQ.qJ=function(a,b){return window.Math.ceil(a/b)*b};
D.uQ.Vja=function(a,b,c,d,e,f){if(f)return(a=D.uQ.Vja(a,c,b,e,d,!1))?{X$:a.dT,dT:a.X$}:null;for(f=0;f<e-c+1;f++)for(var g=0;g<d-b+1;g++)if(D.uQ.Jza(a,g,f,b,c))return D.uQ.LDa(a,g,f,b,c),{X$:g,dT:f};return null};D.uQ.Jza=function(a,b,c,d,e){for(var f=0;f<e;f++)for(var g=0;g<d;g++)if(a.get(b+g,c+f))return!1;return!0};D.uQ.LDa=function(a,b,c,d,e){for(var f=0;f<e;f++)for(var g=0;g<d;g++)a.put(b+g,c+f,!0)};
D.uQ.Lm=function(a,b,c){var d=a.q(),e=(0,D.ik)(d,"labelNoData","DvtUtilBundle","NO_DATA");b=D.Xe.Lm(b,e,c.Y(),a.la(),d._statusMessageStyle);a.en=b};D.uQ.Ra=function(a){return"vertical"==a.q().layout};D.uQ.Yba=function(a){a=a.q().layoutOrigin;return"bottomStart"==a||"bottomEnd"==a};D.uQ.Zba=function(a){var b=a.q().layoutOrigin,b="topEnd"==b||"bottomEnd"==b;return(0,D.D)(a.j())?!b:b};

  return D;
});