/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(['./DvtToolkit'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.

var ga;function ka(a,E){0==a.indexOf("dvt.")&&(a=a.substring(4));var B=a.split("."),q=eval("dvt");B[0]in q||!q.execScript||q.execScript("var "+B[0]);for(var w;B.length&&(w=B.shift());)B.length||void 0===E?q=q[w]?q[w]:q[w]={}:q[w]=E}Math.floor(2147483648*Math.random()).toString(36);
(function(a){function E(b,e,f,g,h,r,l){E.C.Init.call(this,b.a,"none"==e?null:e,a.j.Wf,f,g,h,r,null,!0,l);this.Yi=b}function B(a){this.Init(a)}function q(a,b){this.Init(a,b)}function w(a,b,f,g,h,r,l,y,t,q){w.C.Init.call(this,a.a,b,f,g,h,null,r,l,y,t,q);this.Yi=a}function x(){this.Init({alta:x.Hg})}function h(a){this.Init(a.a,a.dispatchEvent,a);this.Yi=a}function b(a){this.Yi=a}a.Gi=function(a,b,f){this.Init(a,b,f)};a.i.v(a.Gi,a.lc);a.Gi.newInstance=function(b,e,f){return new a.Gi(b,e,f)};a.Gi.prototype.Init=
function(b,e,f){a.Gi.C.Init.call(this,b,e,f);this.u=new h(this);this.u.Jf(this);a.m.mb()||this.u.ss(new B(this.u));this.Uf=new x;this.Ub=[]};a.Gi.prototype.VG=function(b,e){if(!b||!e){var h=f.kp(this,b,e);this.Tma=h;b||(b=h.items?h.hHa*h.Laa:0);e||(e=h.items?h.dLa*h.Gca:0)}return new a.eg(b,e)};a.Gi.prototype.ha=function(b,e,h){this.Wi=this.Ha;var g=this.uu,q=this.Ra?this.Ra:0,r=this.eb?this.eb:0;this.u.cd();this.Ub=[];this.uu=[];this.Tma=null;this.qk&&(this.Ha.removeChild(this.qk),this.qk=null);
this.po();this.Ke(b);var l=this.a;if(e||h)this.Ra=e,this.eb=h;else if(l.Bc.style.display="block",e=this.VG(),a.l.mW(l,e.b,e.f),h=a.l.Fba(l),e.b==h.b&&e.f!=h.f?(this.eb=h.f,e=this.VG(null,this.eb),a.l.mW(l,e.b,this.eb),this.Ra=a.l.Fba(l).b):e.b!=h.b&&e.f==h.f?(this.Ra=h.b,e=this.VG(this.Ra,null),a.l.mW(l,this.Ra,e.f),this.eb=a.l.Fba(l).f):(this.Ra=h.b,this.eb=h.f),this.Ra!=e.b||this.eb!=e.f)this.Tma=null;this.Ha=new a.ba(l);this.B(this.Ha);f.ha(this,this.Ha,new a.U(0,0,this.Ra,this.eb),this.Tma);this.Wi?
"none"!=this.K.animationOnDataChange&&b&&(b=new a.dm(l,null),b.Zn(g,this.uu),this.Ab=b.hw()):this.Ab=this.qWa();this.Ab?(a.l.mW(l,Math.max(q,this.Ra),Math.max(r,this.eb)),this.u.Gm(this),this.qk&&this.Ha.removeChild(this.qk),this.Ab.dg(this.Q$,this),this.Ab.play()):this.Q$()};a.Gi.prototype.Ke=function(b){b?this.K=this.Uf.Ho(b):this.K||(this.K=this.CA());a.m.Xk()||(this.K.animationOnDisplay="none",this.K.animationOnDataChange="none");b=this.K.selectionMode;this.ld="single"==b?new a.Kb(a.Kb.Dv):"multiple"==
b?new a.Kb(a.Kb.Gs):null;this.u.Zy(this.ld)};a.Gi.prototype.Q$=function(){this.Wi&&(this.removeChild(this.Wi),this.Wi.vc(),this.Wi=null);this.Ab&&(this.u.Jf(this),this.qk&&this.Ha.B(this.qk));a.l.mW(this.a,this.Ra,this.eb);for(var b,e=0;e<this.Ub.length&&(b=this.Ub[e],"none"==b.Cn());e++);this.u.ps(b);this.ld&&this.ld.ms(this.K.selection,this.Ub);a.Qd.fe(this.K.highlightedCategories,this.Ub,"any"==this.K.highlightMatch);this.Hs();this.Ej||this.Dl();this.Ab=null;this.Ej=!1};a.Gi.prototype.Mva=function(a){this.Ub=
a};a.Gi.prototype.Ay=function(){return this.Ub};a.Gi.prototype.m6a=function(a){this.uu.push(a)};a.Gi.prototype.l6a=function(a){this.qk=a};a.Gi.prototype.w4a=function(){for(var a=0,b=0;b<this.Ub.length;b++)a+=this.Ub[b].iV();return a};a.Gi.prototype.Vb=function(){return a.ab.qq(this.K.animationDuration)/1E3};a.Gi.prototype.qWa=function(){var b=this.K.animationOnDisplay,e=this.Vb(),h=this.a,g=new a.U(0,0,this.Ra,this.eb);if(a.Ta.isSupported(b))return a.Ta.rE(h,b,this.Ha,g,e);var q=[];if("popIn"==b)for(b=
0;b<this.uu.length;b++){var r=this.uu[b];q.push(new a.wk(h,r,!0,e))}else if("none"!=b){for(b=0;b<this.uu.length;b++){var r=this.uu[b],l=new a.zd(h,r,e),y,t;f.Ia(this)?(y=f.Dua(this)?this.Ra:0,t=r.pf(),r.vq(y),l.da.X(a.L.za,r,r.pf,r.vq,t)):(y=f.Cua(this)?this.eb:0,t=r.qf(),r.wq(y),l.da.X(a.L.za,r,r.qf,r.wq,t));q.push(l)}q.push(a.Ta.rE(h,a.Ta.sA,this.Ha,g,e))}return 0<q.length?new a.Sd(h,q):null};a.Gi.prototype.fe=function(b){var e=this.A();e.highlightedCategories=a.fb.clone(b);a.Qd.fe(b,this.Ay(),
"any"==e.highlightMatch)};a.Gi.prototype.select=function(b){this.A().selection=a.fb.clone(b);this.ld&&this.ld.ms(b,this.Ay())};a.Gi.prototype.zk=function(){return a.I.Fd(this.A(),"componentName",a.I.ua,"PICTOCHART")};a.Gi.prototype.mh=function(){this.FBa||(this.FBa=new b(this));return this.FBa};a.i.v(b,a.Rc);b.prototype.Qm=function(a){return(a=this.Yi.Xb().Xa(a))&&a instanceof q?"item["+this.Yi.Ay().indexOf(a)+"]":null};b.prototype.Xg=function(b){if(b==a.Rc.cx)return this.DA(this.Yi);var e=b.indexOf("[");
return 0<e&&"item"===b.substring(0,e)&&(b=this.Yi.Ay()[parseInt(b.substring(e+1,b.length-1))])?b.pa():null};b.prototype.getItem=function(a){if(a=this.Yi.Ay()[a]){var b={};b.color=a.Mi();b.tooltip=a.Zg();b.id=a.getId();b.name=a.getName();b.count=a.iV();b.selected=a.pb();return b}return null};b.prototype.nV=function(){return this.Yi.Ay().length};a.i.v(h,a.u);h.prototype.Kj=function(b,e,f){b=this.Yi.A();"none"!=b.hoverBehavior&&(e=e.yd?e.yd():[],b.highlightedCategories=f?e.slice():null,f=a.la.jJ(b.highlightedCategories,
f),e=a.ab.qq(b.hoverBehaviorDelay),this.MF.Kf(f,this.Yi.Ay(),e,"any"==b.highlightMatch))};h.prototype.EF=function(a){if(a=this.Xa(a.target))this.jA(a),a.ib&&a.ib()||this.Ty(a)};h.prototype.FF=function(a){(a=this.Xa(a.target))&&a.ib&&a.ib()&&this.Ty(a)};h.prototype.QM=function(a){if(a=this.Xa(a.target))this.jA(a),a.ib&&a.ib()||this.Ty(a)};h.prototype.xv=function(a){if(a=this.Xa(a.target))this.jA(a),a.ib&&a.ib()||this.Ty(a)};h.prototype.VJ=function(a){var b=this.Xa(a.target);b&&b.ib&&b.ib()&&(a.preventDefault(),
a.stopPropagation(),this.Ty(b))};h.prototype.Ty=function(b){b instanceof q&&b.ik()&&this.Ct(a.la.PV(b.getId()))};h.prototype.jA=function(b){b&&b.Ng&&b.Ng()&&this.Ct(a.la.Ry("action",b.Ng(),b.getId()))};a.i.v(x,a.ma);x.Hg={animationOnDisplay:"none",animationOnDataChange:"none",animationDuration:750,drilling:"off",hiddenCategories:[],highlightedCategories:[],highlightMatch:"all",hoverBehavior:"none",hoverBehaviorDelay:200,layout:"horizontal",layoutOrigin:"topStart",selection:[],selectionMode:"none",
_defaultColor:"#a6acb1",_noneShapeColor:"rgba(255,255,255,0)",_defaultSize:32,_defaultShape:"rectangle",_gapRatio:.25,_textStyle:new a.j(a.ma.aX+"color: #252525;"),_statusMessageStyle:new a.j(a.ma.aX+"color: #252525;"),_tooltipStyle:new a.j("border-collapse: separate; border-spacing: 1px"),_tooltipLabelStyle:new a.j("color: #666666; padding: 0px 2px"),_tooltipValueStyle:new a.j("color: #333333; padding: 0px 2px")};a.i.v(w,a.xc);w.prototype.ag=function(b,e){var f=new a.zd(this.a,this,.75*this.Yi.Vb()),
g=f.da,h=this.Ek();this.tm(e.Ek());g.X(a.L.Of,this,this.Ek,this.tm,h);e.ja(0);b.add(f,1)};w.prototype.ji=function(b){b.add(new a.Dg(this.a,this,.5*this.Yi.Vb()),0)};w.prototype.zh=function(b){this.ja(0);b.add(new a.Tf(this.a,this,.5*this.Yi.Vb()),2)};w.prototype.Ek=function(){return[this.pf(),this.qf(),this.getWidth(),this.getHeight()]};w.prototype.tm=function(a){this.vq(a[0]);this.wq(a[1]);this.qb(a[2]);this.Sb(a[3])};a.i.v(q,a.ba);q.Ns=0;q.prototype.Init=function(b,e){q.C.Init.call(this,b.a,null,
e.id);this.Yi=b;this.Ol=e;this.$b=null!=e.id?e.id:null!=e.name?e.name:"_defaultId"+q.Ns;q.Ns++;this.oP="none"==e.shape;this.Yc=this.xi=!1;this.EEa=new a.N(0,0);(this.ib()||this.ik())&&this.setCursor("pointer");b.Xb().Yb(this,this)};q.prototype.iIa=function(){var a=this.Ol.columnSpan;return null!=a&&0<=a?Math.round(a):1};q.prototype.nJa=function(){var a=this.Ol.rowSpan;return null!=a&&0<=a?Math.round(a):1};q.prototype.iV=function(){var a=this.Ol.count;return null!=a?Math.max(a,0):1};q.prototype.Cn=
function(){return this.Ol.shape||this.Yi.A()._defaultShape};q.prototype.Gb=function(){return this.oP?this.Yi.A()._noneShapeColor:this.Ol.color||this.Yi.A()._defaultColor};q.prototype.Jo=function(){return this.Ol.borderColor};q.prototype.$h=function(){return this.Ol.borderWidth};q.prototype.ht=function(){return this.Ol.className||this.Ol.svgClassName};q.prototype.O=function(){return this.Ol.style||this.Ol.svgStyle};q.prototype.uJa=function(){return this.Ol.source};q.prototype.p4a=function(){return this.Ol.sourceSelected};
q.prototype.n4a=function(){return this.Ol.sourceHover};q.prototype.o4a=function(){return this.Ol.sourceHoverSelected};q.prototype.getName=function(){return this.Ol.name};q.prototype.getId=function(){return this.$b};q.prototype.Ng=function(){return this.Ol.action};q.prototype.Zg=function(){return this.Ol.shortDesc};q.prototype.ik=function(){if(this.oP)return!1;var a=this.Ol.drilling;return a&&"inherit"!=a?"on"==a:"on"==this.Yi.A().drilling};q.prototype.sq=function(){return this.ib()&&this.ik()&&!this.oP};
q.prototype.I8a=function(){this.ug("img");this.fp()};q.prototype.rf=function(){if(this.oP)return"";var b=this.Yi.A(),e=this.Yi.A().tooltip;if(e=e?e.renderer:null){var b=this.Yi.a.ef(),f={id:this.getId(),name:this.getName(),count:this.iV(),color:this.Gb()};return b.jt(e,f)}if(null!=this.Zg())return this.Zg();e="";(f=this.getName())&&(e=a.Pb.OQ("td",b._tooltipLabelStyle)+f+"\x3c/td\x3e");f=a.m.ca(this.Yi.a);b._tooltipLabelStyle.Wa(a.j.qN,f?"left":"right");b._tooltipValueStyle.Wa(a.j.qN,f?"right":"left");
return a.Pb.OQ("table",b._tooltipStyle)+"\x3ctr\x3e"+e+a.Pb.OQ("td",b._tooltipValueStyle)+this.Gla()+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"};q.prototype.Mi=function(){return this.Gb()};q.prototype.Gla=function(){return a.I.Fd(this.Yi.A(),"labelCountWithTotal",a.I.ua,"COUNT_WITH_TOTAL",[this.iV(),this.Yi.w4a()])};q.prototype.ib=function(){return"none"!=this.Yi.A().selectionMode&&!this.oP};q.prototype.pb=function(){return this.xi};q.prototype.kc=function(a){this.xi=a;this.fp();for(var b=0;b<this.Vc();b++){var f=
this.cc(b);(f instanceof E||f instanceof w)&&f.kc(a)}};q.prototype.Wc=function(){for(var a=0;a<this.Vc();a++){var b=this.cc(a);(b instanceof E||b instanceof w)&&b.Wc()}};q.prototype.Cc=function(){for(var a=0;a<this.Vc();a++){var b=this.cc(a);(b instanceof E||b instanceof w)&&b.Cc()}};q.prototype.be=function(){return[this]};q.prototype.ve=function(){var b=[],e=this.Yi.A();this.ib()&&b.push(a.I.Fd(e,this.pb()?"stateSelected":"stateUnselected",a.I.ua,this.pb()?"STATE_SELECTED":"STATE_UNSELECTED"));this.ik()&&
b.push(a.I.Fd(e,"stateDrillable",a.I.ua,"STATE_DRILLABLE"));e=this.getName();e=null!=this.Zg()?this.Zg():null==e?this.Gla():a.I.Ka(a.I.ua,"COLON_SEP_LIST",[e,this.Gla()]);return a.R.ym(e,b)};q.prototype.fp=function(){a.m.$j()||this.Od("label",this.ve())};q.prototype.yd=function(){return this.Ol.categories||[this.getId()]};q.prototype.Kd=function(b){var e=this.Yi.Xb().Ba;return b.type==a.MouseEvent.Ie||e.Oo(b)?this:e.ci(b)?B.Kd(this.Yi,this,b):null};q.prototype.sd=function(a){return this.ga(a)};q.prototype.gk=
function(){return this.pa()};q.prototype.Fh=function(){this.oP||(this.Yc=!0,this.Wc())};q.prototype.yf=function(){this.oP||(this.Yc=!1,this.Cc())};q.prototype.He=function(){return this.Yc};q.prototype.J7a=function(a){this.EEa=a};q.prototype.oV=function(){return this.EEa};a.i.v(B,a.Ba);B.prototype.fA=function(a){return this.ci(a)&&!a.ctrlKey};B.prototype.Oo=function(b){return b.keyCode==a.KeyboardEvent.Mj&&b.ctrlKey};B.Kd=function(b,e,h,g){var q=b.Ay();g||(g=e);if("none"==e.Cn()&&e!=g){var r=a.Z.fc(q,
e);if(0==r||r==q.length-1)return g}var l=f.Dua(b),y=f.Cua(b),t=f.Ia(b),r=e,l=h.keyCode==a.KeyboardEvent.Se&&l||h.keyCode==a.KeyboardEvent.Je&&!l||h.keyCode==a.KeyboardEvent.xg&&y||h.keyCode==a.KeyboardEvent.tf&&!y,t=h.keyCode==a.KeyboardEvent.Se&&t||h.keyCode==a.KeyboardEvent.Je&&t||h.keyCode==a.KeyboardEvent.xg&&!t||h.keyCode==a.KeyboardEvent.tf&&!t,l=a.Z.fc(q,e)+(l?1:-1);t?r=a.Ba.Kd(e,h,q):l<q.length&&0<=l&&(r=q[l]);"none"==r.Cn()&&(r=r!=e?B.Kd(b,r,h,g):g);return r};B.prototype.Zk=function(b){var e=
this.Lc.Ne();return e&&b.keyCode==a.KeyboardEvent.ho?(this.Lc.Ty(e),a.u.Zd(b),e):B.C.Zk.call(this,b)};a.i.v(E,a.V);E.prototype.ag=function(b,e){var f=new a.zd(this.a,this,.75*this.Yi.Vb()),g=f.da,h=this.gc(),r=e.gc().clone();r.pc(h)||(this.Ea(r),g.X(a.L.qo,this,this.gc,this.Ea,h));h=this.Ek();this.tm(e.Ek());g.X(a.L.Of,this,this.Ek,this.tm,h);e.ja(0);b.add(f,1)};E.prototype.ji=function(b){b.add(new a.Dg(this.a,this,.5*this.Yi.Vb()),0)};E.prototype.zh=function(b){this.ja(0);b.add(new a.Tf(this.a,this,
.5*this.Yi.Vb()),2)};E.prototype.Ek=function(){return[this.pf(),this.qf(),this.getWidth(),this.getHeight()]};E.prototype.tm=function(a){this.vq(a[0]);this.wq(a[1]);this.qb(a[2]);this.Sb(a[3])};var f={};a.i.v(f,a.i);f.ha=function(b,e,h,g){var q=b.a,r=new a.Rect(q,h.x,h.y,h.b,h.f);r.dc();e.B(r);g||(g=f.kp(b,h.b,h.f));if(g.items){b.Mva(g.items);for(var r=b.A()._gapRatio*g.S5a,l=f.Ia(b),y=f.Cua(b),t=f.Dua(b),x=new a.yv,C=0,D=0,v=0,z=0;z<g.items.length;z++){var k=g.items[z],A=k.iIa(),J=k.nJa();if(!(0>=
A||0>=J)){for(var B=A*g.Laa,O=J*g.Gca,ha=k.iV(),ia=0,da=!0,ea;0<ha;){if(A!=C||J!=D)v=0;0==v&&(ea=f.ZCa(x,A,J,g.hHa,g.dLa,l));if(null==ea)break;var aa=ea.ara*g.Laa+B/2,W=ea.iwa*g.Gca+O/2,aa=h.x+(t?h.b-aa:aa),W=h.y+(y?h.f-W:W),Y=Math.min(1-v,ha),R,S,P,T;l?(R=aa-B/2,S=y?W+O*(.5-Y-v):W+O*(v-.5),P=B,T=O*Y):(R=t?aa+B*(.5-Y-v):aa+B*(v-.5),S=W-O/2,P=B*Y,T=O);var K;1==Y?(K=k.getId()+"_"+ia,ia++):K=Math.random();if(k.uJa())K=new w(b,aa,W,B,O,k.uJa(),k.p4a(),k.n4a(),k.o4a(),K+"_I");else{var Z=new a.Rect(q,R,
S,P,T);Z.dc();k.B(Z);K=new E(b,k.Cn(),aa,W,B-g.Laa*r,O-g.Gca*r,K+"_S");K.$a(k.Gb());K.wc(k.Jo(),null,k.$h());K.yS(k.Gb());K.Ic(k.ht());K.Wa(k.O())}1>Y&&(Z=new a.hc,Z.ue(R,S,P,T),K.ge(Z));da&&(k.J7a(new a.N(aa,W)),da=!1);k.B(K);b.m6a(K);ha-=Y;v=(v+Y)%1}e.B(k);k.I8a();C=A;D=J}}}else f.Hm(b,e,h)};f.kp=function(b,e,h){var g=b.A(),x=g.items;if(!x)return{};for(var r=a.Z.wC(g.hiddenCategories),l=[],y=0,t=1,w=1,C=Infinity,D=0;D<x.length;D++)if(null!=x[D]){var v=new q(b,x[D]);if(!r||!a.Z.$I(r,v.yd())){var z=
v.iIa(),k=v.nJa();0>=z||0>=k||(z>t&&(t=z),k>w&&(w=k),z<C&&(C=z),k<C&&(C=k),y+=z*k*v.iV(),l.push(v))}}if(0==y)return{};x=g.columnWidth;r=g.rowHeight;e&&h||(x||(x=r?r:g._defaultSize),r||(r=x));b=f.Ia(b);D=g.columnCount;g=g.rowCount;D||g||(e&&h?b?g=f.$T(Math.sqrt(y*h/e),w):D=f.$T(Math.sqrt(y*e/h),t):e?D=Math.max(Math.floor(e/x),1):h?g=Math.max(Math.floor(h/r),1):b?g=f.$T(Math.sqrt(y),w):D=f.$T(Math.sqrt(y),t));D?g||(g=f.$T(y/D,w)):D=f.$T(y/g,t);e&&h&&(x||(x=r?r:Math.min(e/D,h/g)),r||(r=x));return 0>=
D||0>=g||0>=x||0>=r?{}:{items:l,hHa:D,dLa:g,Laa:x,Gca:r,S5a:C}};f.$T=function(a,b){return Math.ceil(a/b)*b};f.ZCa=function(a,b,h,g,q,r){if(r)return(a=f.ZCa(a,h,b,q,g,!1))?{ara:a.iwa,iwa:a.ara}:null;for(r=0;r<q-h+1;r++)for(var l=0;l<g-b+1;l++)if(f.lUa(a,l,r,b,h))return f.kYa(a,l,r,b,h),{ara:l,iwa:r};return null};f.lUa=function(a,b,f,g,h){for(var r=0;r<h;r++)for(var l=0;l<g;l++)if(a.get(b+l,f+r))return!1;return!0};f.kYa=function(a,b,f,g,h){for(var r=0;r<h;r++)for(var l=0;l<g;l++)a.put(b+l,f+r,!0)};
f.Hm=function(b,e,f){var g=b.A(),h=a.I.Fd(g,"labelNoData",a.I.ua,"NO_DATA");e=a.ea.Hm(e,h,f.clone(),b.Xb(),g._statusMessageStyle);b.l6a(e)};f.Ia=function(a){return"vertical"==a.A().layout};f.Cua=function(a){a=a.A().layoutOrigin;return"bottomStart"==a||"bottomEnd"==a};f.Dua=function(b){var e=b.A().layoutOrigin,e="topEnd"==e||"bottomEnd"==e;return a.m.ca(b.a)?!e:e};a.M(a,"PictoChart",a.Gi);a.M(a.Gi,"newInstance",a.Gi.newInstance);a.M(a.Gi.prototype,"destroy",a.Gi.prototype.vc);a.M(a.Gi.prototype,"getAutomation",
a.Gi.prototype.mh);a.M(a.Gi.prototype,"highlight",a.Gi.prototype.fe);a.M(a.Gi.prototype,"render",a.Gi.prototype.ha);a.M(a.Gi.prototype,"select",a.Gi.prototype.select);a.M(b.prototype,"getDomElementForSubId",b.prototype.Xg);a.M(b.prototype,"getItem",b.prototype.getItem);a.M(b.prototype,"getItemCount",b.prototype.nV)})(dvt);
  return dvt;
});
