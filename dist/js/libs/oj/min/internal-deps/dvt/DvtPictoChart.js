/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(['./DvtToolkit'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.

var ga;function ka(a,E){0==a.indexOf("dvt.")&&(a=a.substring(4));var B=a.split("."),q=eval("dvt");B[0]in q||!q.execScript||q.execScript("var "+B[0]);for(var w;B.length&&(w=B.shift());)B.length||void 0===E?q=q[w]?q[w]:q[w]={}:q[w]=E}Math.floor(2147483648*Math.random()).toString(36);
(function(a){function E(b,d,f,g,h,r,k){E.C.Init.call(this,b.a,"none"==d?null:d,a.j.Xf,f,g,h,r,null,!0,k);this.Yi=b}function B(a){this.Init(a)}function q(a,d){this.Init(a,d)}function w(a,d,f,g,h,r,k,y,t,q){w.C.Init.call(this,a.a,d,f,g,h,null,r,k,y,t,q);this.Yi=a}function x(){this.Init({alta:x.Ig})}function h(a){this.Init(a.a,a.dispatchEvent,a);this.Yi=a}function d(a){this.Yi=a}a.Gi=function(a,d,f){this.Init(a,d,f)};a.i.v(a.Gi,a.mc);a.Gi.newInstance=function(b,d,f){return new a.Gi(b,d,f)};a.Gi.prototype.Init=
function(b,d,f){a.Gi.C.Init.call(this,b,d,f);this.u=new h(this);this.u.Kf(this);a.m.mb()||this.u.ss(new B(this.u));this.Vf=new x;this.Vb=[]};a.Gi.prototype.VG=function(b,d){if(!b||!d){var h=f.lp(this,b,d);this.bna=h;b||(b=h.items?h.qHa*h.Uaa:0);d||(d=h.items?h.mLa*h.Qca:0)}return new a.fg(b,d)};a.Gi.prototype.ha=function(b,d,h){this.Wi=this.Ha;var g=this.uu,q=this.Ra?this.Ra:0,r=this.fb?this.fb:0;this.u.cd();this.Vb=[];this.uu=[];this.bna=null;this.tk&&(this.Ha.removeChild(this.tk),this.tk=null);
this.po();this.Le(b);var k=this.a;if(d||h)this.Ra=d,this.fb=h;else if(k.yc.style.display="block",d=this.VG(),a.l.nW(k,d.b,d.f),h=a.l.Oba(k),d.b==h.b&&d.f!=h.f?(this.fb=h.f,d=this.VG(null,this.fb),a.l.nW(k,d.b,this.fb),this.Ra=a.l.Oba(k).b):d.b!=h.b&&d.f==h.f?(this.Ra=h.b,d=this.VG(this.Ra,null),a.l.nW(k,this.Ra,d.f),this.fb=a.l.Oba(k).f):(this.Ra=h.b,this.fb=h.f),this.Ra!=d.b||this.fb!=d.f)this.bna=null;this.Ha=new a.ba(k);this.B(this.Ha);f.ha(this,this.Ha,new a.U(0,0,this.Ra,this.fb),this.bna);this.Wi?
"none"!=this.K.animationOnDataChange&&b&&(b=new a.dm(k,null),b.Zn(g,this.uu),this.Ab=b.iw()):this.Ab=this.DWa();this.Ab?(a.l.nW(k,Math.max(q,this.Ra),Math.max(r,this.fb)),this.u.Gm(this),this.tk&&this.Ha.removeChild(this.tk),this.Ab.eg(this.Y$,this),this.Ab.play()):this.Y$()};a.Gi.prototype.Le=function(b){b?this.K=this.Vf.Io(b):this.K||(this.K=this.BA());a.m.Xk()||(this.K.animationOnDisplay="none",this.K.animationOnDataChange="none");b=this.K.selectionMode;this.ld="single"==b?new a.Kb(a.Kb.Dv):"multiple"==
b?new a.Kb(a.Kb.Gs):null;this.u.Zy(this.ld)};a.Gi.prototype.Y$=function(){this.Wi&&(this.removeChild(this.Wi),this.Wi.vc(),this.Wi=null);this.Ab&&(this.u.Kf(this),this.tk&&this.Ha.B(this.tk));a.l.nW(this.a,this.Ra,this.fb);for(var b,d=0;d<this.Vb.length&&(b=this.Vb[d],"none"==b.Cn());d++);this.u.ps(b);this.ld&&this.ld.ms(this.K.selection,this.Vb);a.Qd.fe(this.K.highlightedCategories,this.Vb,"any"==this.K.highlightMatch);this.Hs();this.Hj||this.Dl();this.Ab=null;this.Hj=!1};a.Gi.prototype.Uva=function(a){this.Vb=
a};a.Gi.prototype.By=function(){return this.Vb};a.Gi.prototype.x6a=function(a){this.uu.push(a)};a.Gi.prototype.w6a=function(a){this.tk=a};a.Gi.prototype.I4a=function(){for(var a=0,d=0;d<this.Vb.length;d++)a+=this.Vb[d].jV();return a};a.Gi.prototype.Wb=function(){return a.bb.rq(this.K.animationDuration)/1E3};a.Gi.prototype.DWa=function(){var b=this.K.animationOnDisplay,d=this.Wb(),h=this.a,g=new a.U(0,0,this.Ra,this.fb);if(a.Ta.isSupported(b))return a.Ta.qE(h,b,this.Ha,g,d);var q=[];if("popIn"==b)for(b=
0;b<this.uu.length;b++){var r=this.uu[b];q.push(new a.xk(h,r,!0,d))}else if("none"!=b){for(b=0;b<this.uu.length;b++){var r=this.uu[b],k=new a.zd(h,r,d),y,t;f.Ia(this)?(y=f.Lua(this)?this.Ra:0,t=r.pf(),r.wq(y),k.da.X(a.L.za,r,r.pf,r.wq,t)):(y=f.Kua(this)?this.fb:0,t=r.qf(),r.xq(y),k.da.X(a.L.za,r,r.qf,r.xq,t));q.push(k)}q.push(a.Ta.qE(h,a.Ta.rA,this.Ha,g,d))}return 0<q.length?new a.Sd(h,q):null};a.Gi.prototype.fe=function(b){var d=this.A();d.highlightedCategories=a.eb.clone(b);a.Qd.fe(b,this.By(),
"any"==d.highlightMatch)};a.Gi.prototype.select=function(b){this.A().selection=a.eb.clone(b);this.ld&&this.ld.ms(b,this.By())};a.Gi.prototype.Ak=function(){return a.I.Fd(this.A(),"componentName",a.I.ua,"PICTOCHART")};a.Gi.prototype.mh=function(){this.MBa||(this.MBa=new d(this));return this.MBa};a.i.v(d,a.Sc);d.prototype.Qm=function(a){return(a=this.Yi.Qb().Ya(a))&&a instanceof q?"item["+this.Yi.By().indexOf(a)+"]":null};d.prototype.Yg=function(b){if(b==a.Sc.ex)return this.CA(this.Yi);var d=b.indexOf("[");
return 0<d&&"item"===b.substring(0,d)&&(b=this.Yi.By()[parseInt(b.substring(d+1,b.length-1))])?b.oa():null};d.prototype.getItem=function(a){if(a=this.Yi.By()[a]){var d={};d.color=a.Mi();d.tooltip=a.$g();d.id=a.getId();d.name=a.getName();d.count=a.jV();d.selected=a.pb();return d}return null};d.prototype.oV=function(){return this.Yi.By().length};a.i.v(h,a.u);h.prototype.Nj=function(b,d,f){b=this.Yi.A();"none"!=b.hoverBehavior&&(d=d.yd?d.yd():[],b.highlightedCategories=f?d.slice():null,f=a.la.iJ(b.highlightedCategories,
f),d=a.bb.rq(b.hoverBehaviorDelay),this.LF.Lf(f,this.Yi.By(),d,"any"==b.highlightMatch))};h.prototype.DF=function(a){if(a=this.Ya(a.target))this.iA(a),a.ib&&a.ib()||this.Uy(a)};h.prototype.EF=function(a){(a=this.Ya(a.target))&&a.ib&&a.ib()&&this.Uy(a)};h.prototype.QM=function(a){if(a=this.Ya(a.target))this.iA(a),a.ib&&a.ib()||this.Uy(a)};h.prototype.xv=function(a){if(a=this.Ya(a.target))this.iA(a),a.ib&&a.ib()||this.Uy(a)};h.prototype.UJ=function(a){var d=this.Ya(a.target);d&&d.ib&&d.ib()&&(a.preventDefault(),
a.stopPropagation(),this.Uy(d))};h.prototype.Uy=function(b){b instanceof q&&b.kk()&&this.Ct(a.la.QV(b.getId()))};h.prototype.iA=function(b){b&&b.Og&&b.Og()&&this.Ct(a.la.Sy("action",b.Og(),b.getId()))};a.i.v(x,a.ma);x.Ig={animationOnDisplay:"none",animationOnDataChange:"none",animationDuration:750,drilling:"off",hiddenCategories:[],highlightedCategories:[],highlightMatch:"all",hoverBehavior:"none",hoverBehaviorDelay:200,layout:"horizontal",layoutOrigin:"topStart",selection:[],selectionMode:"none",
_defaultColor:"#a6acb1",_noneShapeColor:"rgba(255,255,255,0)",_defaultSize:32,_defaultShape:"rectangle",_gapRatio:.25,_textStyle:new a.j(a.ma.bX+"color: #252525;"),_statusMessageStyle:new a.j(a.ma.bX+"color: #252525;"),_tooltipStyle:new a.j("border-collapse: separate; border-spacing: 1px"),_tooltipLabelStyle:new a.j("color: #666666; padding: 0px 2px"),_tooltipValueStyle:new a.j("color: #333333; padding: 0px 2px")};a.i.v(w,a.zc);w.prototype.ag=function(b,d){var f=new a.zd(this.a,this,.75*this.Yi.Wb()),
g=f.da,h=this.Fk();this.tm(d.Fk());g.X(a.L.Of,this,this.Fk,this.tm,h);d.ja(0);b.add(f,1)};w.prototype.ji=function(b){b.add(new a.Eg(this.a,this,.5*this.Yi.Wb()),0)};w.prototype.Ah=function(b){this.ja(0);b.add(new a.Uf(this.a,this,.5*this.Yi.Wb()),2)};w.prototype.Fk=function(){return[this.pf(),this.qf(),this.getWidth(),this.getHeight()]};w.prototype.tm=function(a){this.wq(a[0]);this.xq(a[1]);this.qb(a[2]);this.Tb(a[3])};a.i.v(q,a.ba);q.Ns=0;q.prototype.Init=function(b,d){q.C.Init.call(this,b.a,null,
d.id);this.Yi=b;this.Ol=d;this.ac=null!=d.id?d.id:null!=d.name?d.name:"_defaultId"+q.Ns;q.Ns++;this.oP="none"==d.shape;this.Zc=this.xi=!1;this.NEa=new a.N(0,0);(this.ib()||this.kk())&&this.setCursor("pointer");b.Qb().Yb(this,this)};q.prototype.rIa=function(){var a=this.Ol.columnSpan;return null!=a&&0<=a?Math.round(a):1};q.prototype.wJa=function(){var a=this.Ol.rowSpan;return null!=a&&0<=a?Math.round(a):1};q.prototype.jV=function(){var a=this.Ol.count;return null!=a?Math.max(a,0):1};q.prototype.Cn=
function(){return this.Ol.shape||this.Yi.A()._defaultShape};q.prototype.Gb=function(){return this.oP?this.Yi.A()._noneShapeColor:this.Ol.color||this.Yi.A()._defaultColor};q.prototype.Ko=function(){return this.Ol.borderColor};q.prototype.$h=function(){return this.Ol.borderWidth};q.prototype.ht=function(){return this.Ol.className||this.Ol.svgClassName};q.prototype.O=function(){return this.Ol.style||this.Ol.svgStyle};q.prototype.DJa=function(){return this.Ol.source};q.prototype.B4a=function(){return this.Ol.sourceSelected};
q.prototype.z4a=function(){return this.Ol.sourceHover};q.prototype.A4a=function(){return this.Ol.sourceHoverSelected};q.prototype.getName=function(){return this.Ol.name};q.prototype.getId=function(){return this.ac};q.prototype.Og=function(){return this.Ol.action};q.prototype.$g=function(){return this.Ol.shortDesc};q.prototype.kk=function(){if(this.oP)return!1;var a=this.Ol.drilling;return a&&"inherit"!=a?"on"==a:"on"==this.Yi.A().drilling};q.prototype.tq=function(){return this.ib()&&this.kk()&&!this.oP};
q.prototype.T8a=function(){this.ug("img");this.gp()};q.prototype.rf=function(){if(this.oP)return"";var b=this.Yi.A(),d=this.Yi.A().tooltip;if(d=d?d.renderer:null){var b=this.Yi.a.ef(),f={id:this.getId(),name:this.getName(),count:this.jV(),color:this.Gb()};return b.jt(d,f)}if(null!=this.$g())return this.$g();d="";(f=this.getName())&&(d=a.Pb.NQ("td",b._tooltipLabelStyle)+f+"\x3c/td\x3e");f=a.m.ca(this.Yi.a);b._tooltipLabelStyle.Xa(a.j.qN,f?"left":"right");b._tooltipValueStyle.Xa(a.j.qN,f?"right":"left");
return a.Pb.NQ("table",b._tooltipStyle)+"\x3ctr\x3e"+d+a.Pb.NQ("td",b._tooltipValueStyle)+this.Pla()+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"};q.prototype.Mi=function(){return this.Gb()};q.prototype.Pla=function(){return a.I.Fd(this.Yi.A(),"labelCountWithTotal",a.I.ua,"COUNT_WITH_TOTAL",[this.jV(),this.Yi.I4a()])};q.prototype.ib=function(){return"none"!=this.Yi.A().selectionMode&&!this.oP};q.prototype.pb=function(){return this.xi};q.prototype.lc=function(a){this.xi=a;this.gp();for(var d=0;d<this.Vc();d++){var f=
this.dc(d);(f instanceof E||f instanceof w)&&f.lc(a)}};q.prototype.Wc=function(){for(var a=0;a<this.Vc();a++){var d=this.dc(a);(d instanceof E||d instanceof w)&&d.Wc()}};q.prototype.Dc=function(){for(var a=0;a<this.Vc();a++){var d=this.dc(a);(d instanceof E||d instanceof w)&&d.Dc()}};q.prototype.ce=function(){return[this]};q.prototype.ve=function(){var b=[],d=this.Yi.A();this.ib()&&b.push(a.I.Fd(d,this.pb()?"stateSelected":"stateUnselected",a.I.ua,this.pb()?"STATE_SELECTED":"STATE_UNSELECTED"));this.kk()&&
b.push(a.I.Fd(d,"stateDrillable",a.I.ua,"STATE_DRILLABLE"));d=this.getName();d=null!=this.$g()?this.$g():null==d?this.Pla():a.I.Ka(a.I.ua,"COLON_SEP_LIST",[d,this.Pla()]);return a.R.ym(d,b)};q.prototype.gp=function(){a.m.bk()||this.Od("label",this.ve())};q.prototype.yd=function(){return this.Ol.categories||[this.getId()]};q.prototype.Kd=function(b){var d=this.Yi.Qb().Ba;return b.type==a.MouseEvent.Je||d.Po(b)?this:d.ci(b)?B.Kd(this.Yi,this,b):null};q.prototype.sd=function(a){return this.ga(a)};q.prototype.ik=
function(){return this.oa()};q.prototype.Fh=function(){this.oP||(this.Zc=!0,this.Wc())};q.prototype.yf=function(){this.oP||(this.Zc=!1,this.Dc())};q.prototype.Ie=function(){return this.Zc};q.prototype.U7a=function(a){this.NEa=a};q.prototype.pV=function(){return this.NEa};a.i.v(B,a.Ba);B.prototype.eA=function(a){return this.ci(a)&&!a.ctrlKey};B.prototype.Po=function(b){return b.keyCode==a.KeyboardEvent.Pj&&b.ctrlKey};B.Kd=function(b,d,h,g){var q=b.By();g||(g=d);if("none"==d.Cn()&&d!=g){var r=a.Z.Zb(q,
d);if(0==r||r==q.length-1)return g}var k=f.Lua(b),y=f.Kua(b),t=f.Ia(b),r=d,k=h.keyCode==a.KeyboardEvent.Te&&k||h.keyCode==a.KeyboardEvent.Ke&&!k||h.keyCode==a.KeyboardEvent.xg&&y||h.keyCode==a.KeyboardEvent.tf&&!y,t=h.keyCode==a.KeyboardEvent.Te&&t||h.keyCode==a.KeyboardEvent.Ke&&t||h.keyCode==a.KeyboardEvent.xg&&!t||h.keyCode==a.KeyboardEvent.tf&&!t,k=a.Z.Zb(q,d)+(k?1:-1);t?r=a.Ba.Kd(d,h,q):k<q.length&&0<=k&&(r=q[k]);"none"==r.Cn()&&(r=r!=d?B.Kd(b,r,h,g):g);return r};B.prototype.$k=function(b){var d=
this.Lc.Oe();return d&&b.keyCode==a.KeyboardEvent.ho?(this.Lc.Uy(d),a.u.Zd(b),d):B.C.$k.call(this,b)};a.i.v(E,a.V);E.prototype.ag=function(b,d){var f=new a.zd(this.a,this,.75*this.Yi.Wb()),g=f.da,h=this.ic(),r=d.ic().clone();r.pc(h)||(this.Ea(r),g.X(a.L.qo,this,this.ic,this.Ea,h));h=this.Fk();this.tm(d.Fk());g.X(a.L.Of,this,this.Fk,this.tm,h);d.ja(0);b.add(f,1)};E.prototype.ji=function(b){b.add(new a.Eg(this.a,this,.5*this.Yi.Wb()),0)};E.prototype.Ah=function(b){this.ja(0);b.add(new a.Uf(this.a,this,
.5*this.Yi.Wb()),2)};E.prototype.Fk=function(){return[this.pf(),this.qf(),this.getWidth(),this.getHeight()]};E.prototype.tm=function(a){this.wq(a[0]);this.xq(a[1]);this.qb(a[2]);this.Tb(a[3])};var f={};a.i.v(f,a.i);f.ha=function(b,d,h,g){var q=b.a,r=new a.Rect(q,h.x,h.y,h.b,h.f);r.ec();d.B(r);g||(g=f.lp(b,h.b,h.f));if(g.items){b.Uva(g.items);for(var r=b.A()._gapRatio*g.d6a,k=f.Ia(b),y=f.Kua(b),t=f.Lua(b),x=new a.yv,C=0,D=0,v=0,z=0;z<g.items.length;z++){var m=g.items[z],A=m.rIa(),J=m.wJa();if(!(0>=
A||0>=J)){for(var B=A*g.Uaa,O=J*g.Qca,ha=m.jV(),ia=0,da=!0,ea;0<ha;){if(A!=C||J!=D)v=0;0==v&&(ea=f.fDa(x,A,J,g.qHa,g.mLa,k));if(null==ea)break;var aa=ea.ira*g.Uaa+B/2,W=ea.qwa*g.Qca+O/2,aa=h.x+(t?h.b-aa:aa),W=h.y+(y?h.f-W:W),Y=Math.min(1-v,ha),R,S,P,T;k?(R=aa-B/2,S=y?W+O*(.5-Y-v):W+O*(v-.5),P=B,T=O*Y):(R=t?aa+B*(.5-Y-v):aa+B*(v-.5),S=W-O/2,P=B*Y,T=O);var K;1==Y?(K=m.getId()+"_"+ia,ia++):K=Math.random();if(m.DJa())K=new w(b,aa,W,B,O,m.DJa(),m.B4a(),m.z4a(),m.A4a(),K+"_I");else{var Z=new a.Rect(q,R,
S,P,T);Z.ec();m.B(Z);K=new E(b,m.Cn(),aa,W,B-g.Uaa*r,O-g.Qca*r,K+"_S");K.ab(m.Gb());K.wc(m.Ko(),null,m.$h());K.yS(m.Gb());K.Kc(m.ht());K.Xa(m.O())}1>Y&&(Z=new a.jc,Z.ue(R,S,P,T),K.he(Z));da&&(m.U7a(new a.N(aa,W)),da=!1);m.B(K);b.x6a(K);ha-=Y;v=(v+Y)%1}d.B(m);m.T8a();C=A;D=J}}}else f.Hm(b,d,h)};f.lp=function(b,d,h){var g=b.A(),x=g.items;if(!x)return{};for(var r=a.Z.vC(g.hiddenCategories),k=[],y=0,t=1,w=1,C=Infinity,D=0;D<x.length;D++)if(null!=x[D]){var v=new q(b,x[D]);if(!r||!a.Z.YI(r,v.yd())){var z=
v.rIa(),m=v.wJa();0>=z||0>=m||(z>t&&(t=z),m>w&&(w=m),z<C&&(C=z),m<C&&(C=m),y+=z*m*v.jV(),k.push(v))}}if(0==y)return{};x=g.columnWidth;r=g.rowHeight;d&&h||(x||(x=r?r:g._defaultSize),r||(r=x));b=f.Ia(b);D=g.columnCount;g=g.rowCount;D||g||(d&&h?b?g=f.aU(Math.sqrt(y*h/d),w):D=f.aU(Math.sqrt(y*d/h),t):d?D=Math.max(Math.floor(d/x),1):h?g=Math.max(Math.floor(h/r),1):b?g=f.aU(Math.sqrt(y),w):D=f.aU(Math.sqrt(y),t));D?g||(g=f.aU(y/D,w)):D=f.aU(y/g,t);d&&h&&(x||(x=r?r:Math.min(d/D,h/g)),r||(r=x));return 0>=
D||0>=g||0>=x||0>=r?{}:{items:k,qHa:D,mLa:g,Uaa:x,Qca:r,d6a:C}};f.aU=function(a,d){return Math.ceil(a/d)*d};f.fDa=function(a,d,h,g,q,r){if(r)return(a=f.fDa(a,h,d,q,g,!1))?{ira:a.qwa,qwa:a.ira}:null;for(r=0;r<q-h+1;r++)for(var k=0;k<g-d+1;k++)if(f.yUa(a,k,r,d,h))return f.xYa(a,k,r,d,h),{ira:k,qwa:r};return null};f.yUa=function(a,d,f,g,h){for(var r=0;r<h;r++)for(var k=0;k<g;k++)if(a.get(d+k,f+r))return!1;return!0};f.xYa=function(a,d,f,g,h){for(var r=0;r<h;r++)for(var k=0;k<g;k++)a.put(d+k,f+r,!0)};
f.Hm=function(b,d,f){var g=b.A(),h=a.I.Fd(g,"labelNoData",a.I.ua,"NO_DATA");d=a.ea.Hm(d,h,f.clone(),b.Qb(),g._statusMessageStyle);b.w6a(d)};f.Ia=function(a){return"vertical"==a.A().layout};f.Kua=function(a){a=a.A().layoutOrigin;return"bottomStart"==a||"bottomEnd"==a};f.Lua=function(b){var d=b.A().layoutOrigin,d="topEnd"==d||"bottomEnd"==d;return a.m.ca(b.a)?!d:d};a.M(a,"PictoChart",a.Gi);a.M(a.Gi,"newInstance",a.Gi.newInstance);a.M(a.Gi.prototype,"destroy",a.Gi.prototype.vc);a.M(a.Gi.prototype,"getAutomation",
a.Gi.prototype.mh);a.M(a.Gi.prototype,"highlight",a.Gi.prototype.fe);a.M(a.Gi.prototype,"render",a.Gi.prototype.ha);a.M(a.Gi.prototype,"select",a.Gi.prototype.select);a.M(d.prototype,"getDomElementForSubId",d.prototype.Yg);a.M(d.prototype,"getItem",d.prototype.getItem);a.M(d.prototype,"getItemCount",d.prototype.oV)})(dvt);
  return dvt;
});
