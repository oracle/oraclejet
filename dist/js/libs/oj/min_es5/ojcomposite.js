!function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var o,n=s(e);if(t){var r=s(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return i(this,o)}}function i(t,o){return!o||"object"!==e(o)&&"function"!=typeof o?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):o}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */define(["exports","ojs/ojcore-base","ojs/ojhtmlutils","ojs/ojlogger","ojs/ojmetadatautils","ojs/ojcomposite-knockout","ojs/ojcustomelement","ojs/ojcustomelement-utils"],function(i,s,a,u,l,d,c,_){"use strict";s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s;
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
var m={__BINDING_PROVIDER:"__oj_binding_prvdr",getContainingComposite:function(e,t){for(var o=null,n=e;n;)if((n=s.CompositeTemplateRenderer.getEnclosingComposite(n))&&"oj-module"!==n.nodeName.toLowerCase()){if(t&&!(16&e.compareDocumentPosition(t)))break;o=n}return o}},p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(l,e);var i,s,a,u=r(l);function l(){return t(this,l),u.apply(this,arguments)}return i=l,(s=[{key:"getTrackChildrenOption",value:function(){return"immediate"}},{key:"GetBindingProviderName",value:function(e){var t,o=null==e?void 0:e.parentElement;return null!==(t=null==o?void 0:o[m.__BINDING_PROVIDER])&&void 0!==t?t:null}}])&&o(i.prototype,s),a&&o(i,a),l}(_.ElementState),E={};E.proto=Object.create(s.BaseCustomElementBridge.proto),E.DESC_KEY_CSS="css",E.DESC_KEY_PARSE_FUN="parseFunction",E.DESC_KEY_VIEW="view",E.DESC_KEY_VIEW_MODEL="viewModel",s.CollectionUtils.copyInto(E.proto,{beforePropertyChangedEvent:function(e,t,o){var n={property:t};s.CollectionUtils.copyInto(n,o),s.CompositeTemplateRenderer.invokeViewModelMethod(e,this._VIEW_MODEL,"propertyChanged",[n])},AddComponentMethods:function(e){var t=function(e,t,o,n,r,i){if(!t.SaveEarlyPropertySet(e,o,n)){var s=t.SetProperty(e,o,n,r,i);if(s.propertySet)if(s.isSubproperty)E._getPropertyTracker(t,s.property).valueHasMutated()}};e.setProperty=function(e,o){var n=_.CustomElementUtils.getElementBridge(this);t(this,n,e,o,this,!0)},e.getProperty=function(e){return _.CustomElementUtils.getElementBridge(this).GetProperty(this,e,this)},e._propsProto.setProperty=function(e,o){t(this._ELEMENT,this._BRIDGE,e,o,this,!1)},e._propsProto.getProperty=function(e){return this._BRIDGE.GetProperty(this._ELEMENT,e,this)},e.getNodeBySubId=function(e){var t=_.CustomElementUtils.getElementBridge(this),o=t._getViewModel();return o.getNodeBySubId?o.getNodeBySubId(e,t._getNodeBySubId.bind(this)):t._getNodeBySubId.bind(this)(e)},e.getSubIdByNode=function(e){var t=_.CustomElementUtils.getElementBridge(this),o=t._getViewModel();return o.getSubIdByNode?o.getSubIdByNode(e,t._getSubIdByNode.bind(this)):t._getSubIdByNode.bind(this)(e)}},CreateComponent:function(e){for(var t={},o=_.CustomElementUtils.getSlotMap(e),n=Object.keys(o),r=0;r<n.length;r++){var i=n[r];t[i]=o[i].length}this._SLOT_MAP=o;var a=_.ElementUtils.getUniqueId(),u={element:e,props:Promise.resolve(this._PROPS),properties:this._PROPS,slotNodeCounts:Promise.resolve(t),slotCounts:t,unique:a};u.uniqueId=e.id?e.id:a,this._VM_CONTEXT=u;var l=_.CustomElementUtils.getElementDescriptor(e.tagName)[E.DESC_KEY_VIEW_MODEL];l="function"==typeof l?new l(u):s.CompositeTemplateRenderer.invokeViewModelMethod(e,l,"initialize",[u])||l,this._VIEW_MODEL=l;var d=s.CompositeTemplateRenderer.invokeViewModelMethod(e,l,"activated",[u])||Promise.resolve(!0),c=this;return d.then(function(){var o={props:c._PROPS,slotMap:c._SLOT_MAP,slotNodeCounts:t,unique:c._VM_CONTEXT.unique,uniqueId:c._VM_CONTEXT.uniqueId,viewModel:c._VIEW_MODEL,viewModelContext:c._VM_CONTEXT};Object.defineProperty(e,m.__BINDING_PROVIDER,{value:"knockout"}),s.Components&&s.Components.unmarkPendingSubtreeHidden(e);var n=_.CustomElementUtils.getElementRegistration(e.tagName).cache,r=E._getDomNodes(n.view,e);s.CompositeTemplateRenderer.renderTemplate(o,e,r)})},DefineMethodCallback:function(e,t,o){e[t]=function(){var e=o.internalName||t,n=_.CustomElementUtils.getElementBridge(this),r=n._getViewModel();return r[e].apply(r,arguments)}},DefinePropertyCallback:function(e,t,o){var n=function(e,n){if(!this._BRIDGE.SaveEarlyPropertySet(this._ELEMENT,t,e)){var r=E._getPropertyTracker(this._BRIDGE,t),i=r.peek();if(s.BaseCustomElementBridge.__CompareOptionValues(t,o,e,i))u.info(_.CustomElementUtils.getElementInfo(this._ELEMENT)+": Ignoring property set for property '"+t+"' with same value.");else if(n&&(e=this._BRIDGE.ValidatePropertySet(this._ELEMENT,t,e)),o._eventListener&&this._BRIDGE.SetEventListenerProperty(this._ELEMENT,t,e),r(e),!o._derived){var a=n?"external":"internal";s.BaseCustomElementBridge.__FirePropertyChangeEvent(this._ELEMENT,t,e,i,a),this._BRIDGE.State.dirtyProps.add(t)}}},r=function(e){var n=E._getPropertyTracker(this._BRIDGE,t),r=e?n.peek():n();return void 0===r&&n(r=l.getDefaultValue(o)),r};o._derived||s.BaseCustomElementBridge.__DefineDynamicObjectProperty(e._propsProto,t,function(){return r.bind(this,!1)()},function(e){n.bind(this)(e,!1)}),s.BaseCustomElementBridge.__DefineDynamicObjectProperty(e,t,function(){var e=_.CustomElementUtils.getElementBridge(this);return r.bind(e._PROPS,!0)()},function(e){var t=_.CustomElementUtils.getElementBridge(this);n.bind(t._PROPS)(e,!0)})},GetMetadata:function(e){return e._metadata||{}},HandleDetached:function(e){s.BaseCustomElementBridge.proto.HandleDetached.call(this,e),s.CompositeTemplateRenderer.invokeViewModelMethod(e,this._VIEW_MODEL,"detached",[e]),s.CompositeTemplateRenderer.invokeViewModelMethod(e,this._VIEW_MODEL,"disconnected",[e])},HandleReattached:function(e){s.BaseCustomElementBridge.proto.HandleReattached.call(this,e),s.CompositeTemplateRenderer.invokeViewModelMethod(e,this._VIEW_MODEL,"connected",[this._VM_CONTEXT])},InitializeElement:function(e){var t;s.BaseCustomElementBridge.proto.InitializeElement.call(this,e),s.Components&&s.Components.markPendingSubtreeHidden(e);var o=_.CustomElementUtils.getElementRegistration(e.tagName).cache;if(!o.view){var n=(t=_.CustomElementUtils.getElementDescriptor(e.tagName))[E.DESC_KEY_VIEW];o.view||(o.view="string"==typeof n?E._getDomNodes(n,e):n)}if(!o.css){t||(t=_.CustomElementUtils.getElementDescriptor(e.tagName));var r=t[E.DESC_KEY_CSS];if(r){var i=document.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=r:i.appendChild(document.createTextNode(r)),document.head.appendChild(i),o.css=!0}}s.BaseCustomElementBridge.__InitProperties(e,e)},InitializePrototype:function(e){s.BaseCustomElementBridge.proto.InitializePrototype.call(this,e),Object.defineProperty(e,"_propsProto",{value:{}})},initializeBridge:function(e,t){s.BaseCustomElementBridge.proto.initializeBridge.call(this,e,t),e._propsProto&&(this._PROPS=Object.create(e._propsProto),this._PROPS._BRIDGE=this,this._PROPS._ELEMENT=e)},ShouldRemoveDisabled:function(){var e=this.METADATA.extension;return!!e&&!0===e._SHOULD_REMOVE_DISABLED},_getNodeBySubId:function(e){var t=E.__GetSubIdMap(this)[e.subId];if(t){if(t.alias){var o=s.CollectionUtils.copyInto({},e,void 0,!0);o.subId=t.alias;var n=t.node;return n.getNodeBySubId?n.getNodeBySubId(o):s.Components.__GetWidgetConstructor(n)("getNodeBySubId",o)}return t.node}return null},_getSubIdByNode:function(e){if(!this.contains(e))return null;var t,o,n,r=E.__GetNodeMap(this),i=m.getContainingComposite(e,this);if(null!=i){if((o=r[t=i.node.getAttribute("data-oj-subid-map")])&&i.getSubIdByNode&&(n=i.getSubIdByNode(e))){var a=o.map[n.subId];return n.subId=a,n}return null}for(var u=e;u!==this&&!(t=u.getAttribute("data-oj-subid-map")||u.getAttribute("data-oj-subid"));)u=u.parentNode;if(o=r[t]){if(!o.map)return{subId:t};var l=o.node;if(n=l.getSubIdByNode?l.getSubIdByNode(e):s.Components.__GetWidgetConstructor(l)("getSubIdByNode",e))return n.subId=o.map[n.subId],n}return null},_getViewModel:function(){return this._VIEW_MODEL||this.State.throwError("Cannot access methods before element is upgraded."),this._VIEW_MODEL}}),E.register=function(e,t){var o={};o[s.BaseCustomElementBridge.DESC_KEY_META]=E._getResource(e,t,s.BaseCustomElementBridge.DESC_KEY_META),o[E.DESC_KEY_VIEW]=E._getResource(e,t,E.DESC_KEY_VIEW),o[E.DESC_KEY_CSS]=E._getResource(e,t,E.DESC_KEY_CSS),o[E.DESC_KEY_VIEW_MODEL]=E._getResource(e,t,E.DESC_KEY_VIEW_MODEL),o[E.DESC_KEY_PARSE_FUN]=t[E.DESC_KEY_PARSE_FUN];var n={descriptor:o,bridgeProto:E.proto,stateClass:p,composite:!0,cache:{}};if(_.CustomElementUtils.registerElement(e,n)){var r=o[s.BaseCustomElementBridge.DESC_KEY_META];if(r||(u.warn("Composite registered'"+e.toLowerCase()+"' without Metadata."),r={}),null==o[E.DESC_KEY_VIEW])throw new Error("Cannot register composite '"+e.toLowerCase()+"' without a View.");o._metadata=s.BaseCustomElementBridge.__ProcessEventListeners(r,!1),customElements.define(e,E.proto.getClass(o))}},E._getDomNodes=function(e,t){var o,n;if("string"==typeof e)return a.stringToNodeArray(e);if(E._isDocumentFragment(e)){n=e.cloneNode(!0);var r=[];for(o=0;o<n.childNodes.length;o++)r.push(n.childNodes[o]);return r}if(Array.isArray(e)){for(n=[],o=0;o<e.length;o++)n.push(e[o].cloneNode(!0));return n}_.CustomElementUtils.getElementBridge(t).State.throwError("The composite View is not one of the following supported types: string, Array of DOM nodes, DocumentFragment")},E._generateSubIdMap=function(e,t){if(!e._SUBID_MAP){for(var o={},n={},r=t.children,i=0;i<r.length;i++)E._walkSubtree(o,n,r[i]);e._NODE_MAP=n,e._SUBID_MAP=o}},E._walkSubtree=function(e,t,o){if(!o.hasAttribute("slot")&&(E._addNodeToSubIdMap(e,t,o),!_.CustomElementUtils.isElementRegistered(o.tagName)&&!s.Components.__GetWidgetConstructor(o)))for(var n=o.children,r=0;r<n.length;r++)E._walkSubtree(e,t,n[r])},E._addNodeToSubIdMap=function(t,o,n){var r=n.getAttribute("data-oj-subid"),i=n.getAttribute("data-oj-subid-map");if(i){var s=JSON.parse(i);if("object"===e(s)&&!(s instanceof Array)){for(var a=s,u={},l=Object.keys(a),d=0;d<l.length;d++){var c=l[d];t[c]={alias:a[c],node:n},u[a[c]]=c}o[i]={map:u,node:n}}}else r&&(t[r]={node:n},o[r]={node:n})},E.__GetSubIdMap=function(e){var t=_.CustomElementUtils.getElementBridge(e);return E._generateSubIdMap(t,e),t._SUBID_MAP},E.__GetNodeMap=function(e){var t=_.CustomElementUtils.getElementBridge(e);return E._generateSubIdMap(t,e),t._NODE_MAP},E._getPropertyTracker=function(e,t){return e._TRACKERS||(e._TRACKERS={}),e._TRACKERS[t]||(e._TRACKERS[t]=s.CompositeTemplateRenderer.createTracker()),e._TRACKERS[t]},E._getResource=function(e,t,o){var n=t[o];if(null!=n){var r=Object.prototype.hasOwnProperty;if(r.call(n,"inline"))return n.inline;if(r.call(n,"promise"))throw new Error("Error while registering "+e+". The resource type for descriptor key '"+o+"' is no longer supported. The resource should be passed directly as the value instead.");return n}},E._isDocumentFragment=function(e){return window.DocumentFragment?e instanceof DocumentFragment:e&&11===e.nodeType};
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
var g={};s._registerLegacyNamespaceProp("Composite",g),g.getMetadata=function(e){var t=g.getComponentMetadata(e);return t?Promise.resolve(t):null},g.getComponentMetadata=function(e){return _.CustomElementUtils.isComposite(e)?_.CustomElementUtils.getElementDescriptor(e)[s.BaseCustomElementBridge.DESC_KEY_META]:null},g.register=function(e,t){E.register(e,t)},g.getContainingComposite=m.getContainingComposite,g.__COMPOSITE_PROP="__oj_composite";
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
var f=g.register,C=g.getMetadata,h=g.getComponentMetadata,y=g.getContainingComposite,S=g.__COMPOSITE_PROP;i.__COMPOSITE_PROP=S,i.getComponentMetadata=h,i.getContainingComposite=y,i.getMetadata=C,i.register=f,Object.defineProperty(i,"__esModule",{value:!0})})}();
//# sourceMappingURL=ojcomposite.js.map