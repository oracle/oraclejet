/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * @ignore
 */
"use strict";define(["ojs/ojcore-base","ojs/ojcontext","ojs/ojmetadatautils","ojs/ojlogger","ojs/ojdefaultsutils","ojs/ojcustomelement"],function(e,t,n,r,o){function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.props=e,this.state={},this._patching=!1,this._isCustomElementFirst=!1}var o,s,a;return o=n,a=[{key:"register",value:function(e){l.register(e)}},{key:"_getSlotMap",value:function(e){var t={};return e.forEach(function(e){var n=e.props.slot||"";t[n]||(t[n]=[]),t[n].push(e._refNode||e)}),t}}],(s=[{key:"postRender",value:function(){}},{key:"updateStateFromProps",value:function(e){return null}},{key:"mounted",value:function(){}},{key:"unmounted",value:function(){}},{key:"slot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(this._slotMap)return this._slotMap[e]||t;throw new Error("Cannot access slot map before mount has been called")}},{key:"uniqueId",value:function(){return this._uniqueId}},{key:"updateProperty",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._getCallback("updateProperty")(e,t,n)}},{key:"updateState",value:function(e,t){this.state[e]=t,this._getCallback("queueRender")(this._ref)}},{key:"fireAction",value:function(e,t){this._getCallback("fireAction")(e,t)}},{key:"mountContent",value:function(e,t,n,r){this._isCustomElementFirst=!0,this._ref=n,this._vnode=this._renderForMount(e,t),this._vnode._node=n,this._patching=!0;try{c.mountComponentContent(this._vnode,r)}finally{this._patching=!1}}},{key:"mount",value:function(e,t,n){this._vnode=this._renderForMount(e,n);var r=this._ref=c.mountComponent(this._vnode,t);return Object.defineProperty(r,"_vcomp",{value:this,enumerable:!1}),r}},{key:"patch",value:function(e,t,n){var r=this._vnode;this._vnode=this._renderForPatch(e),this._patching=!0;try{c.patchComponent(this._vnode,r,t,n)}finally{this._patching=!1}this._postRenderForPatch()}},{key:"patchContent",value:function(e,t){var n=this._vnode;this._vnode=this._renderForPatch(e),this._patching=!0;try{c.patchComponentContent(this._vnode,n,t)}finally{this._patching=!1}this._postRenderForPatch()}},{key:"isPatching",value:function(){return this._patching}},{key:"setCallbacks",value:function(e){this._callbacks=e}},{key:"isCustomElementFirst",value:function(){return this._isCustomElementFirst}},{key:"unmount",value:function(e){c.unmount(this._vnode),this.unmounted()}},{key:"_renderForMount",value:function(e,t){return!this._slotMap&&t&&(this._slotMap=n._getSlotMap(Array.isArray(t)?t:[t])),this._renderForUpdate(e)}},{key:"_renderForPatch",value:function(e){var t=this._renderForUpdate(e);return t._node=this._ref,t}},{key:"_postRenderForPatch",value:function(){this._getCallback("storeUnslottedNodes")(this._slotMap),this.postRender()}},{key:"_renderForUpdate",value:function(e){var t=this.updateStateFromProps(e);return t&&(this.state=t),this.props=e,this._verifiedRender()}},{key:"_getCallback",value:function(e){return this._callbacks||(this._callbacks=this._getBuiltInCallbacks()),this._callbacks[e]}},{key:"_getBuiltInCallbacks",value:function(){var n={updateProperty:function(e,t,n){this.fireAction(e+"Changed",{value:t,previousValue:this.props[e],updatedFrom:"internal"})}.bind(this),queueRender:function(e){if(!this._busyStateCallbackForRender&&!this.isPatching()){var n=t.getContext(e).getBusyContext();this._busyStateCallbackForRender=n.addBusyState({description:this.props.id+" is waiting to render."}),window.requestAnimationFrame(function(){try{this.patch(this.props)}catch(e){throw e}finally{this._busyStateCallbackForRender(),this._busyStateCallbackForRender=null}}.bind(this))}}.bind(this),fireAction:function(t,n){var r=e.__AttributeUtils.eventTypeToEventListenerProperty(t),o=this.props[r];o&&o({type:t,detail:n})}.bind(this),storeUnslottedNodes:function(e){},_vcomp:!0};return n}},{key:"_isValidRootProp",value:function(t){var n=this.constructor.metadata.verifiedControlledPropsMap||{};return"className"===t||"style"===t||n[t]||null!==e.__AttributeUtils.eventListenerPropertyToEventType(t)}},{key:"_verifyProps",value:function(e){for(var t in e)this._isValidRootProp(t)||(r.warn("Component can only render controlled global properties or DOM event listeners on the root custom element. "+t+" will not be rendered."),delete e[t])}},{key:"_verifiedRender",value:function(){var e=this.render();return this._verifyProps(e.props),e}}])&&i(o.prototype,s),a&&i(o,a),n}();e.VirtualElementBridge={};var a,l=e.VirtualElementBridge;function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/**
 * @license
 * petit-dom - v0.2.2
 * https://github.com/yelouafi/petit-dom
 * Copyright (C) 2017 Yassine Elouafi;
 * Licensed under the MIT license
 *
 * Modification notice: The code is obtained from https://github.com/yelouafi/petit-dom
 * and modified by Oracle JET team to be included into Oracle JET project.
 * @ignore
 */e.VirtualElementBridge.proto=Object.create(e.BaseCustomElementBridge.proto),e.CollectionUtils.copyInto(e.VirtualElementBridge.proto,{AddComponentMethods:function(t){t.setProperty=function(t,n){var r=e.BaseCustomElementBridge.getInstance(this);r.SaveEarlyPropertySet(t,n)||r.SetProperty(this,t,n,this,!0)},t.getProperty=function(t){return e.BaseCustomElementBridge.getInstance(this).GetProperty(this,t,this)}},AttributeChangedCallback:function(t,n,r){if(e.BaseCustomElementBridge.proto.AttributeChangedCallback.call(this,t,n,r),n!==r){var o=e.BaseCustomElementBridge.getInstance(this);if(!o.ShouldHandleAttributeChanged(this)&&e.BaseCustomElementBridge.proto.ShouldHandleAttributeChanged.call(o,this)){var i=this._vcomp;i&&!i.isCustomElementFirst()||o.HandleAttributeChanged(this,t,n,r)}}},CreateComponent:function(t){if(!t._vcomp){e.Components&&e.Components.unmarkPendingSubtreeHidden(t);var n=e.BaseCustomElementBridge.__GetDescriptor(t.tagName),r=e.BaseCustomElementBridge.getSlotMap(t);this._storePropsDerivedFromSlots(t,r),this._initializeControlledProps(t);var o=this._getVComponentProps(),i=new n._CONSTRUCTOR(o);i._uniqueId=e.__AttributeUtils.getUniqueId(t.id),Object.defineProperty(t,"_vcomp",{value:i,enumerable:!1}),i.setCallbacks(this._getCallbacks(t)),this._mountComponent(t,t._vcomp,o,r)}t._vcomp.mounted(),t._vcomp.postRender(),this.__READY_TO_FIRE=!0,this.resolveDelayedReadyPromise()},DefineMethodCallback:function(t,n,r){t[n]=function(){this._vcomp||e.BaseCustomElementBridge.getInstance(this).throwError(this,"Cannot access methods before element is upgraded.");return this._vcomp[n].apply(this._vcomp,arguments)}},DefinePropertyCallback:function(t,n,r){function o(e,t){var o={isOuter:t,name:n,value:e,meta:r};this._BRIDGE._updateProperty(this._ELEMENT,o,t)}function i(){var e=this._BRIDGE._PROPS[n];return void 0===e&&(e=this._BRIDGE._getDefaultValue(n,r),this._BRIDGE._PROPS[n]=e),e}r._derived||e.BaseCustomElementBridge.__DefineDynamicObjectProperty(t._propsProto,n,function(){return i.bind(this)()},function(e){o.bind(this)(e,!1)}),e.BaseCustomElementBridge.__DefineDynamicObjectProperty(t,n,function(){var t=this._vcomp;if(!t||t.isCustomElementFirst()){var n=e.BaseCustomElementBridge.getInstance(this);return i.bind(n._PROPS_PROXY)()}},function(t){var n=this._vcomp,r=e.BaseCustomElementBridge.getInstance(this);!n||n.isCustomElementFirst()?o.bind(r._PROPS_PROXY)(t,!0):n&&!n.isCustomElementFirst()&&r.throwError(this,"Cannot set properties on a VComponent-first element.")})},GetAttributes:function(t){var n=e.BaseCustomElementBridge.proto.GetAttributes.call(this,t);return t.verifiedControlledPropsMap&&Object.keys(t.verifiedControlledPropsMap).forEach(function(t){n.push(e.__AttributeUtils.getGlobalAttrForProp(t))}),n},ShouldHandleAttributeChanged:function(t){if(!e.BaseCustomElementBridge.proto.ShouldHandleAttributeChanged.call(this,t))return!1;var n=t._vcomp;return!n||n.isCustomElementFirst()&&!n.isPatching()},HandleAttributeChanged:function(t,n,r,o){var i=t._vcomp,s=this.METADATA.verifiedControlledPropsMap;if(i&&s){var a=e.__AttributeUtils.getGlobalPropForAttr(n)||n;if(s[a]&&r!==o){if(null==o)delete this._LIVE_CONTROLLED_PROPS[a],i.isPatching()||delete this._VCOMP_CONTROLLED_PROPS[a];else{var l=t[a];this._LIVE_CONTROLLED_PROPS[a]=null!=l?l:o,i.isPatching()||(this._VCOMP_CONTROLLED_PROPS[a]=this._LIVE_CONTROLLED_PROPS[a])}i.isPatching()||this._queueRender(t)}}},HandleReattached:function(e){this._verifyConnectDisconnect(e,1)},HandleDetached:function(e){this._verifyConnectDisconnect(e,0)},_verifyConnectDisconnect:function(e,t){-1===this._verifyingState&&Promise.resolve().then(function(){this._verifyingState===t&&(0===this._verifyingState?e._vcomp.unmounted():e._vcomp.mounted()),this._verifyingState=-1}.bind(this)),this._verifyingState=t},InitializeElement:function(t){t._vcomp||(e.Components&&e.Components.markPendingSubtreeHidden(t),e.BaseCustomElementBridge.__InitProperties(t,t))},InitializePrototype:function(t){e.BaseCustomElementBridge.proto.InitializePrototype.call(this,t),Object.defineProperty(t,"_propsProto",{value:{}})},InitializeBridge:function(t,n){e.BaseCustomElementBridge.proto.InitializeBridge.call(this,t,n),this._verifyingState=-1,this._EXTENSION=this.METADATA.extension||{},this._CONSTRUCTOR=n._CONSTRUCTOR,this._PROPS={},this._PROP_CHANGE_QUEUE=[],this._PROP_CHANGE_EVENT_QUEUE=[],t._propsProto&&(this._PROPS_PROXY=Object.create(t._propsProto),this._PROPS_PROXY._BRIDGE=this,this._PROPS_PROXY._ELEMENT=t),this._LIVE_CONTROLLED_PROPS={},this._VCOMP_CONTROLLED_PROPS={}},PlaybackEarlyPropertySets:function(t){t._vcomp||e.BaseCustomElementBridge.proto.PlaybackEarlyPropertySets.call(this,t)},GetPreCreatePromise:function(t){var n=e.BaseCustomElementBridge.proto.GetPreCreatePromise.call(this,t);return!a&&function(e){for(var t=e.childNodes,n=0;n<t.length;n++){var r=t[n];if("template"===r.localName)return!0}return!1}(t)&&(n=n.then(function(){return new Promise(function(e,t){require(["ojs/ojtemplateengine"],function(t){a=t,e(t)},t)})})),n},ValidateAndSetProperty:function(t,n,r,o,i){var s=this.ValidatePropertySet(i,r,o);e.VirtualElementBridge.__SetProperty(t,n,r,s)},_mountComponent:function(t,n,r,o){var i=e.VirtualElementBridge._processSlotContent(t,o),s=Object.assign({},this._LIVE_CONTROLLED_PROPS);n.mountContent(r,i,t,s)},_queuePropertyUpdate:function(e,t,n,r){this._PROPS_PROXY[t]=n,r&&this._queueRender(e)},_updateProperty:function(e,t,n){this._PROP_CHANGE_QUEUE.push(t),n?this._processPropertyQueue(e):this._propsProcessingQueued||(this._propsProcessingQueued=!0,Promise.resolve().then(function(){this._processPropertyQueue(e),this._propsProcessingQueued=!1}.bind(this)))},_processPropertyQueue:function(t){for(var n=this._PROP_CHANGE_QUEUE.shift();n;){var r=n.name,o=n.value,i=n.meta;if(!this.SaveEarlyPropertySet(r,o)){var s=this._PROPS[r];e.BaseCustomElementBridge.__CompareOptionValues(r,i,o,s)||(n.isOuter&&(o=this.ValidatePropertySet(t,r,o)),void 0===o?delete this._PROPS[r]:this._PROPS[r]=o,n.previousValue=s,this._PROP_CHANGE_EVENT_QUEUE.push(n),t._vcomp&&n.isOuter&&this._queueRender(t))}n=this._PROP_CHANGE_QUEUE.shift()}this._firePropertyChangeEvents(t)},_firePropertyChangeEvents:function(t){for(var n=this._PROP_CHANGE_EVENT_QUEUE.shift();n;)e.BaseCustomElementBridge.__FirePropertyChangeEvent(t,n.name,n.value,n.previousValue,n.isOuter?"external":"internal"),n=this._PROP_CHANGE_EVENT_QUEUE.shift()},_queueRender:function(n){if(!this._busyStateCallbackForRender&&!n._vcomp.isPatching()){var r=t.getContext(n).getBusyContext();this._busyStateCallbackForRender=r.addBusyState({description:e.BaseCustomElementBridge.getElementInfo(n)+" is waiting to render."}),window.requestAnimationFrame(function(){var e=this._getVComponentProps();try{var t=Object.assign({},this._LIVE_CONTROLLED_PROPS);n._vcomp.patchContent(e,t)}catch(e){throw e}finally{this._busyStateCallbackForRender(),this._busyStateCallbackForRender=null}}.bind(this))}},_getVComponentProps:function(){var e=o.getStaticDefaults(this._CONSTRUCTOR,!0),t=e?Object.create(e):{};return Object.assign(t,this._PROPS,this._VCOMP_CONTROLLED_PROPS,this._getPropsDerivedFromSlots()),o.applyDynamicDefaults(this._CONSTRUCTOR,t),t},_getCallbacks:function(t){var n=this.METADATA;return{updateProperty:this._queuePropertyUpdate.bind(this,t),queueRender:this._queueRender.bind(this),fireAction:function(e,r){var o=(n.events||{})[e]||{},i={detail:r,bubbles:!!o.bubbles,cancelable:!!o.cancelable};t.dispatchEvent(new CustomEvent(e,i))},storeUnslottedNodes:function(n){e.VirtualElementBridge._storeUnslottedNodes(t,n)}}},_initializeControlledProps:function(t){var n=this.METADATA.verifiedControlledPropsMap;if(n){var r=this._LIVE_CONTROLLED_PROPS,o=this._VCOMP_CONTROLLED_PROPS;Object.keys(n).forEach(function(n){var i=e.__AttributeUtils.getGlobalAttrForProp(n);if(t.hasAttribute(i)){var s=t[n];r[n]=null!=s?s:t.getAttribute(i),o[n]=r[n]}})}},_storePropsDerivedFromSlots:function(e,t){this._propsFromSlots=this._getInlineTemplatesAsRendererProps(e,t)},_getPropsDerivedFromSlots:function(){return this._propsFromSlots},_getInlineTemplatesAsRendererProps:function(e,t){var n=null,r=this.METADATA.slots;r&&Object.entries(r).forEach(function(r){if((l=r[1])&&l.data){var o=r[0],i=t[o];i&&((n=n||{})[(s=o,s.replace(/(Template)?$/,"Renderer"))]=function(e,t){if(!a)throw new Error("Unexpected call to _createTemplateRenderer");return function(n){return a.execute(e,t,n)}}(e,i[0]))}var s,l});return n},_getDefaultValue:function(e){return o.getDefaults(this._CONSTRUCTOR,this.METADATA,!0)[e]}}),e.VirtualElementBridge.register=function(t){var n=t.tagName,o=t.metadata,i={};if(i[e.BaseCustomElementBridge.DESC_KEY_META]=o,i._CONSTRUCTOR=t,e.BaseCustomElementBridge.__Register(n,i,e.VirtualElementBridge.proto)){var s=o.controlledRootProperties;s&&(o.verifiedControlledPropsMap=function(e,t){var n={};return e.forEach(function(e){"id"!==e&&"className"!==e&&"style"!==e?n[e]=!0:r.warn('"'+e+'" cannot be registered as a controlled root property and will be ignored for '+t)}),n}(s,n)),customElements.define(n.toLowerCase(),e.VirtualElementBridge.proto.getClass(i))}},e.VirtualElementBridge._processSlotContent=function(t,n){if(t.childNodes){t._nodeStorage||(t._nodeStorage=document.createElement("div"),t._nodeStorage.style.display="none",t.appendChild(t._nodeStorage));var r=[],o=[];return Object.entries(n).forEach(function(e){var t=e[0];e[1].forEach(function(e){r.push({_refNode:e,props:{slot:t}}),o.push(e)})}),o.forEach(function(e){t._nodeStorage.appendChild(e)}),e.Components&&e.Components.subtreeHidden(t._nodeStorage),r}return null},e.VirtualElementBridge.__SetProperty=function(t,n,r,o){var i,s=n,a=r.split("."),l=t(a[0]);a.length>1&&!n[l]&&(s=i={});for(var u=0;u<a.length;u++){var c=t(a[u]),d=s[c];u===a.length-1?s[c]=o:d?Object.isFrozen(d)&&(s[c]=e.CollectionUtils.copyInto({},d,void 0,!0)):s[c]={},s=s[c]}i&&(n[l]=i[l])},e.VirtualElementBridge._storeUnslottedNodes=function(t,n){t._nodeStorage&&Object.entries(n).forEach(function(n){n[1].forEach(function(n){t.contains(n)||(t._nodeStorage.appendChild(n),e.Components&&e.Components.subtreeHidden(n))})})};var c=function(){var t=Object.freeze({}),n=Object.freeze([]),r=Array.isArray,i=function(e){return e&&(null!=e._vnode||null!=e._text)},s=function(e){return e&&e.mount&&e.patch&&e.unmount};function a(e,t){for(var n=0;n<e.length;n++){var o=e[n];if(r(o))return l(e,n,e.slice(0,n),t);o instanceof Node?e[n]=o:i(o)?t&&!o.isSVG&&(o.isSVG=!0):e[n]={_text:null==o?"":o}}return e}function l(e,t,n,o){for(var s=t;s<e.length;s++){var a=e[s];r(a)?l(a,0,n,o):a instanceof Node?n.push(a):i(a)?(o&&!a.isSVG&&(a.isSVG=!0),n.push(a)):null==a||"string"==typeof a?n.push({_text:null==a?"":a}):n.push(a)}return n}var c="http://www.w3.org/2000/svg",d="http://www.w3.org/1999/xlink",f={show:d,actuate:d,href:d};function p(e,t,n,r){if(n!==r)return!0;for(var o in e)if(e[o]!==t[o])return!0;return!1}function h(t){var n;if(null!=t._text)n=document.createTextNode(t._text);else if(!0===t._vnode){var r=t.type,o=t.props,i=t.content,a=t.isSVG;if("string"==typeof r)E(n=a?document.createElementNS(c,r):document.createElement(r),o,null,e.ElementUtils.isValidCustomElementName(r)),_(n,i);else if("function"==typeof r)if(s(r.prototype)){var l=P(r,o);t._uncontrolled=l.uncontrolled;var u=new r(l.controlled);u._uniqueId=e.__AttributeUtils.getUniqueId(l.uncontrolled.id),n=u.mount(l.controlled,l.uncontrolled,i),t._data=u}else{var d=r(o,i);n=h(d),t._data=d}}if(null==n)throw new Error("Unkown node type!");return t._node=n,n}function _(t,n){if(n)if(r(n))v(t,n);else{var o=n instanceof Node,i=o?n:h(n);t.appendChild(i),o&&1===ch.nodeType&&e.Components&&e.Components.subtreeShown(i)}}function v(t,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.length-1,i=arguments[4];r<=o;){var s=n[r++],a=s instanceof Node,l=a?s:h(s);t.insertBefore(l,i),a&&1===s.nodeType&&e.Components&&e.Components.subtreeShown(l)}}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length-1,o=void 0;for(e.childNodes.length===r-n+1&&(e.textContent="",o=!0);n<=r;){var i=t[n++];o||e.removeChild(i._node),g(i)}}function g(e){if(r(e))for(var t=0;t<e.length;t++)g(e[t]);else!0===e._vnode&&("function"==typeof e.type&&s(e.type.prototype)?e._data.unmount(e._node):null!=e.content&&g(e.content))}function y(e,t){var n=e.metadata;return!(!n||!n.verifiedControlledPropsMap)&&null!=n.verifiedControlledPropsMap[t]}function C(t){return null!==e.__AttributeUtils.eventListenerPropertyToEventType(t)}function P(t,n){var r=o.getStaticDefaults(t,!0),i={controlled:Object.create(r),uncontrolled:{}};for(var s in n){var a=n[s];void 0!==a&&(!e.__AttributeUtils.isGlobalOrData(s)||y(t,s)?i.controlled[s]=a:i.uncontrolled[s]=a)}return o.applyDynamicDefaults(t,i.controlled),i}function E(e,n,r,o){n&&function(e,n,r,o){Object.keys(n).forEach(function(i){var s=n[i],a=r[i];s!==a&&("style"===i?b(e.style,s||t,a||t,""):o&&"className"===i?O(e,s,a):S(e,i,s,a)||R(e,i,s,o)||(e[i]=s))})}(e,n,r||t,o),r&&function(e,n,r,o){Object.keys(r).forEach(function(i){var s=r[i];i in n||("style"===i?b(e.style,t,s||t,""):o&&"className"===i?O(e,null,s):S(e,i,null,s)||R(e,i,null,o)||(e[i]=void 0))})}(e,n||t,r,o)}function b(e,t,n,r){for(var o in t){var i=n[o],s=t[o];i!==s&&(e[o]=s)}for(var o in n)o in t||(e[o]=r)}function O(e,t,n){n&&n.split(" ").forEach(function(t){t&&e.classList.remove(t)});t&&t.split(" ").forEach(function(t){t&&e.classList.add(t)})}function S(e,t,n,r){var o=u(n),i=u(r);if("function"===o||"function"===i||null!=n&&n.listener||null!=r&&r.listener){var s=function(e){if(/^on[A-Z]/.test(e))return e.substr(2,1).toLowerCase()+e.substr(3);return null}(t);if(s)return function(e,t,n,r){r&&e.removeEventListener(t,r.listener?r.listener:r,r.options);n&&e.addEventListener(t,n.listener?n.listener:n,n.options)}(e,s,n,r),!0}return!1}function R(t,n,r,o){if(o&&e.__AttributeUtils.isGlobalOrData(n)||!o&&"value"!==n&&"checked"!==n){var i=e.__AttributeUtils.getNativeAttr(n);if(!0===r)t.setAttribute(i,"");else if(!1===r)t.removeAttribute(i);else if(null!=r){var s=f[i];void 0!==s?t.setAttributeNS(s,i,r):t.setAttribute(i,r)}else t.removeAttribute(i);return!0}return!1}function k(n,o,i){var a,l,u=o._node;if(o===n)return u;if(null!=(a=o._text)&&null!=(l=n._text))a!==l&&(u.nodeValue=l);else if(o.type===n.type&&o.isSVG===n.isSVG){var c=o.type;if("function"==typeof c)if(s(c.prototype)){var d=o._data,f=P(c,n.props);n._uncontrolled=f.uncontrolled,d.patch(f.controlled,f.uncontrolled,o._uncontrolled),n._data=d}else{if((c.shouldUpdate||p)(n.props,o.props,n.content,o.content)){var _=c(n.props,n.content);u=k(_,o._data,i),n._data=_}else n._data=o._data}else if("string"==typeof c){var v=e.ElementUtils.isValidCustomElementName(c);!function(e,n){if(e===n)return!1;if(e=r(e)?e:[e],n=r(n)?n:[n],e.length!==n.length)return!0;return e.some(function(e,r){var o=n[r];if(e.type!==o.type)return!0;var i=e.props||t,s=o.props||t;return i.slot!==s.slot})}(n.content,o.content)?(E(u,n.props,o.props,v),A(u,n.content,o.content)):(u=h(n),i.replaceChild(u,o._node),g(o))}else{if(!(o instanceof Node&&n instanceof Node))throw new Error("Unknown node type! "+c);o!==n&&i&&i.replaceChild(n,o)}}else u=h(n),i&&i.replaceChild(u,o._node),g(o);return n._node=u,u}function A(e,t,n){r(t)||r(n)?r(t)&&r(n)?function(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.length-1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:n.length-1;if(t===n)return;var l=function(e,t,n,r,o,i,s,a){var l,u,c=0;for(;n<=r&&o<=i&&s(l=e[n],u=t[o]);)a&&k(l,u,a),n++,o++,c++;return c}(t,n,o,i,s,a,B,e);if(l=function(e,t,n,r,o,i,s,a){for(var l,u,c=0;n<=r&&o<=i&&s(l=e[r],u=t[i]);)a&&k(l,u,a),r--,i--,c++;return c}(t,n,o+=l,i,s+=l,a,B,e),a-=l,o>(i-=l)&&s>a)return;if(o<=i&&s>a)return r=n[s],void v(e,t,o,i,r&&r._node);if(s<=a&&o>i)return void m(e,n,s,a);var u=a-s+1,c=i-o+1;if(l=-1,u<c){if((l=w(t,n,o,i,s,a,B))>=0){r=n[s],v(e,t,o,l-1,r._node);var d=l+u;for(o=l;o<d;)k(t[o++],n[s++]);return r=n[a],void v(e,t,o,i,r&&r._node.nextSibling)}}else if(u>c&&(l=w(n,t,s,a,o,i,B))>=0){for(m(e,n,s,l-1),d=l+c,s=l;s<d;)k(t[o++],n[s++]);return void m(e,n,s,a)}if(s===a){var f=n[s]._node;return v(e,t,o,i,f),e.removeChild(f),void g(f)}if(o===i)return e.insertBefore(h(t[o]),n[s]._node),void m(e,n,s,a);var p=function(e,t,n){var r,o,i,s,a,l,u,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.length-1,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:n.length-1,h=d-c+1,_=p-f+1,v=h+_,m=[];e:for(r=0;r<=v;r++){if(r>50)return!0;for(u=r-1,a=r?m[r-1]:[0,0],l=m[r]=[],o=-r;o<=r;o+=2){for(s=o===-r||o!==r&&a[u+o-1]<a[u+o+1]?a[u+o+1]:a[u+o-1]+1,i=s-o;s<_&&i<h&&B(n[f+s],t[c+i]);)s++,i++;if(s===_&&i===h)break e;l[r+o]=s}}var g,y=Array(r/2+v/2),C={},P=y.length-1;for(r=m.length-1;r>=0;r--){for(;s>0&&i>0&&B(n[f+s-1],t[c+i-1]);)y[P--]=N,s--,i--;if(!r)break;u=r-1,a=r?m[r-1]:[0,0],(o=s-i)===-r||o!==r&&a[u+o-1]<a[u+o+1]?(i--,y[P--]=T):(s--,y[P--]=V,null!=(g=n[f+s]).key&&(C[g.key]=f+s))}U(e,y,t,n,c,f,C)}(e,t,n,o,i,s,a);p&&function(e,t,n,r,o,i,s){var a,l,u,c,d,f={},p=[],h=0,_=o-r+1,v=s-i+1,m=Math.min(_,v),g=Array(m+1);g[0]=-1;for(var y=1;y<g.length;y++)g[y]=s+1;var C=Array(m);for(y=i;y<=s;y++)l=n[y],null!=(d=l.key)?f[d]=y:p.push(y);for(y=r;y<=o;y++)a=t[y],null!=(c=null==a.key?p[h++]:f[a.key])&&(u=D(g,c))>=0&&(g[u]=c,C[u]={newi:y,oldi:c,prev:C[u-1]});u=g.length-1;for(;g[u]>s;)u--;var P=C[u],E=Array(v+_-u),b=o,O=s,S=E.length-1;for(;P;){for(var R=P,k=R.newi,A=R.oldi;b>k;)E[S--]=T,b--;for(;O>A;)E[S--]=V,O--;E[S--]=N,b--,O--,P=P.prev}for(;b>=r;)E[S--]=T,b--;for(;O>=i;)E[S--]=V,O--;U(e,E,t,n,r,i,f)}(e,t,n,o,i,s,a)}(e,t,n):(m(e,n,0,n.length-1),v(e,t)):t!==n&&k(t,n,e)}function B(e,t){return e.key===t.key}var N=2,T=4,V=8;function U(e,t,n,r,o,i,s){for(var a,l,u,c,d={},f=0,p=o,_=i;f<t.length;f++){var v=t[f];v===N?k(n[p++],r[_++],e):v===T?(c=null,null!=(a=n[p++]).key&&(c=s[a.key]),null!=c?(u=k(a,r[c]),d[a.key]=c):u=h(a),e.insertBefore(u,_<r.length?r[_]._node:null)):v===V&&_++}for(f=0,_=i;f<t.length;f++){var m=t[f];m===N?_++:m===V&&(null!=(l=r[_++]).key&&null!=d[l.key]||(e.removeChild(l._node),g(l)))}}function D(e,t){for(var n=1,r=e.length-1;n<=r;){var o=Math.ceil((n+r)/2);t<e[o]?r=o-1:n=o+1}return n}function w(e,t,n,r,o,i,s){for(var a=o,l=-1,u=i-o+1;n<=r&&r-n+1>=u;){if(s(e[n],t[a])){if(l<0&&(l=n),++a>i)return l}else l=-1,a=o;n++}return-1}return{h:function(e,o,s){var l,u,c,d=!1,f=arguments.length-2;if("string"!=typeof e){if(1===f)l=s;else if(f>1){for(u=Array(f),c=0;c<f;c++)u[c]=arguments[c+2];l=u}}else if(d="svg"===e,1===f)r(s)?l=a(s,d):i(s)?(s.isSVG=d,l=[s]):l=s instanceof Node?[s]:[{_text:null==s?"":s}];else if(f>1){for(u=Array(f),c=0;c<f;c++)u[c]=arguments[c+2];l=a(u,d)}else l=n;return{_vnode:!0,isSVG:d,type:e,key:o&&o.key||null,props:o||t,content:l}},mountComponent:function(e,t){var n=e.type,r=e.props,o=e.content,i=document.createElement(n);return E(i,t,null,!0),E(i,r,null,!0),_(i,o),e._node=i,i},mountComponentContent:function(e,t){var n=e._node;E(n,e.props,t,!0),_(n,e.content)},patchComponent:function(e,t,n,r){var o=t._node;if(t===e)return o;E(o,n,r,!0),E(o,e.props,t.props,!0),A(o,e.content,t.content)},patchComponentContent:function(e,t,n){var r=t._node;if(t===e)return r;var o={},i=t.props;for(var s in i)(C(s)||"className"===s||"style"===s)&&(o[s]=i[s]);Object.assign(o,n),E(r,e.props,o,!0),A(r,e.content,t.content)},unmount:g}}();return s.h=c.h,s});