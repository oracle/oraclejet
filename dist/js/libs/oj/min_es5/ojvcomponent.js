!function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}define(["exports","ojs/ojcore-base","ojs/ojcontext","ojs/ojdefaultsutils","ojs/ojcustomelement"],function(n,r,o,i,s){"use strict";
/**
   * @license
   * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
/**
   * @license
   * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */var u,a=Object.freeze({});function l(t){return t?"string"==typeof t?t.split(" ").reduce(function(t,e){return e&&(t[e]=!0),t},{}):t:a}!function(t){t.LISTENER_OPTIONS_SYMBOL=Symbol();var n=new Set(["key","ref","children"]),o=Array.isArray,s=function(t){return t&&(null!=t.type||null!=t._text||t._node)},u=function(t){return(null==t?void 0:t.mount)&&(null==t?void 0:t.patch)&&(null==t?void 0:t.notifyUnmounted)&&(null==t?void 0:t.notifyMounted)};function c(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(o(r))return f(t,n,t.slice(0,n),e);s(r)?e&&!r.isSVG&&(r.isSVG=!0):t[n]={_text:null==r?"":r}}return t}function f(t,e,n,r){for(var i=e;i<t.length;i++){var u=t[i];o(u)?f(u,0,n,r):s(u)?(r&&!u.isSVG&&(u.isSVG=!0),n.push(u)):null==u||"string"==typeof u?n.push({_text:null==u?"":u}):n.push(u)}return n}t.h=function(t,e){for(var n,i,l=!1,f=!1,d=arguments.length,_=new Array(d>2?d-2:0),p=2;p<d;p++)_[p-2]=arguments[p];if("string"!=typeof t)i=(f="function"==typeof t&&u(t.prototype))&&t.prototype.mountContent,n=_;else{i=!(l="svg"===t)&&r.ElementUtils.isValidCustomElementName(t);var h=_.length;if(1===h){var v=_[0];o(v)?n=c(v,l):s(v)?(v.isSVG=l,n=[v]):n=[{_text:null==v?"":v}]}else n=h>1?c(_,l):_}var m=f||i;return{type:t,isSVG:l,isComponent:f,isCustomElement:i,key:null==e?void 0:e.key,props:e||(m?Object.create(null):a),content:n,ref:null==e?void 0:e.ref}};var d="http://www.w3.org/2000/svg",_="http://www.w3.org/1999/xlink",p={show:_,actuate:_,href:_};function h(t,e,n,r){if(n!==r)return!0;for(var o in t)if(t[o]!==e[o])return!0;return!1}function v(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t._node)return t._node;if(null!=t._text)e=document.createTextNode(t._text);else{var o=t.type,i=t.props,s=t.content,u=t.isSVG;if("string"==typeof o)T(e=u?document.createElementNS(d,o):document.createElement(o),i,null,n||t.isCustomElement),y(e)?E(e,s):P(e,s);else if("function"==typeof o)if(t.isComponent){var a,l=o,c=R(l,i,t.isCustomElement);t._uncontrolled=c.uncontrolled,(a=new l(c.controlled))._uniqueId=r.__AttributeUtils.getUniqueId(i.id),e=a.mount(c.controlled,s,c.uncontrolled),t._data=a}else{var f=o(i,s);e=v(f),t._data=f}}if(null==e)throw new Error("Unknown node type!");return t._node=e,e}function m(t){var e;if(null!=t._text)e=document.createTextNode(t._text);else{var r=t.type,o=t.props,i=t.content,s=t.isSVG;"string"==typeof r&&(function(t,e,r,o){if(e){var i=Object.keys(e);i.forEach(function(r){if(!n.has(r)){var o=e[r];t.setAttribute(r,o)}})}}(e=s?document.createElementNS(d,r):document.createElement(r),o,0,t.isCustomElement),E(e,i))}if(null==e)throw new Error("content inside <template> elements is limited to HTML elements and text");return t._node=e,e}function y(t){return"TEMPLATE"===t.nodeName}function g(t){if(t.isComponent){var e=t._data;H(t.ref,e),H(e._vnode.props.ref,t._node),t.isCustomElement||e.notifyMounted()}else"function"!=typeof t.type&&H(t.ref,t._node)}function P(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;n<=o;){var s=e[n++];if(s._node){var u=s._node;q(t,s,i),1===u.nodeType&&r.Components&&r.Components.subtreeShown(u)}else q(t,s,i)}}function E(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;n<=r;){var i=e[n++];m(i),q(t,i,o)}}function C(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1,o=void 0;for(t.childNodes.length===r-n+1&&(t.textContent="",o=!0);n<=r;){var i=e[n++];o||x(t,i)}}function O(t){if(o(t))for(var e=0;e<t.length;e++)O(t[e]);else{if(t.isComponent)t._data.notifyUnmounted(t._node);else null!=t.content&&O(t.content);(t.isComponent||"function"!=typeof t.type)&&H(t.ref,null)}}function b(t,e){var n,r,o=t.metadata;return null!=(null===(r=null===(n=null==o?void 0:o.extension)||void 0===n?void 0:n._ROOT_PROPS_MAP)||void 0===r?void 0:r[e])}function S(t){return null!==r.__AttributeUtils.eventListenerPropertyToEventType(t)}function R(t,e,n){var o=i.DefaultsUtils.getStaticDefaults(t,t.metadata,!0),s={controlled:Object.create(o),uncontrolled:{}};for(var u in e){var a=e[u];void 0!==a&&(n&&r.__AttributeUtils.isGlobalOrData(u)&&!b(t,u)?s.uncontrolled[u]=a:s.controlled[u]=a)}return s}function T(t,e,r,o){e&&function(t,e,r,o){Object.keys(e).forEach(function(i){if(!n.has(i)){var s=e[i],u=r[i];s!==u&&("style"===i?k(t.style,s||a,u||a,""):"class"===i?A(t,s,u,o):N(t,i,s,u)||U(t,i,s,o)||(t[i]=s))}})}(t,e,r||a,o),r&&function(t,e,n,r){Object.keys(n).forEach(function(o){if("key"!==o&&"ref"!==o){var i=n[o];o in e||("style"===o?k(t.style,a,i||a,""):"class"===o?A(t,null,i,r):N(t,o,null,i)||U(t,o,null,r)||(t[o]=void 0))}})}(t,e||a,r,o)}function k(t,e,n,r){for(var o in e){var i=n[o],s=e[o];i!==s&&(t[o]=s)}for(var u in n)u in e||(t[u]=r)}function A(t,n,r,o){o?function(t,e,n){var r=l(n),o=l(e);for(var i in r)r[i]&&!o[i]&&t.classList.remove(i);for(var s in o)o[s]&&!r[s]&&t.classList.add(s)}(t,n,r):function(t,n){if(n){var r="object"===e(n)?Object.keys(n).filter(function(t){return n[t]}).join(" "):n;t.setAttribute("class",r)}else t.removeAttribute("class")}(t,n)}function N(e,n,r,o){if(r||o){var i=function(t){if(/^on[A-Z]/.test(t))return t.substr(2,1).toLowerCase()+t.substr(3);return null}(n);if(i)return function(e,n,r,o){o&&e.removeEventListener(n,o,o[t.LISTENER_OPTIONS_SYMBOL]);r&&e.addEventListener(n,r,r[t.LISTENER_OPTIONS_SYMBOL])}(e,i,r,o),!0}return!1}function U(t,e,n,o){if(o&&r.__AttributeUtils.isGlobalOrData(e)||!o&&"value"!==e&&"checked"!==e){var i=r.__AttributeUtils.getNativeAttr(e);if(!0===n)t.setAttribute(i,"");else if(!1===n)t.removeAttribute(i);else if(null!=n){var s=p[i];void 0!==s?t.setAttributeNS(s,i,n):t.setAttribute(i,n)}else t.removeAttribute(i);return!0}return!1}function B(t,e,n){var r,o,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=e._node;if(e===t)return s;if(y(s))return t._node=s,s;if(t._node)return s!==t._node&&G(n,t,e),t._node;if(null!=(r=e._text)&&null!=(o=t._text))r!==o&&(s.nodeValue=o);else if(e.type===t.type&&e.isSVG===t.isSVG){var u=e.type;if("function"==typeof u)if(e.isComponent){var a=e._data,l=R(u,t.props,t.isCustomElement);t._uncontrolled=l.uncontrolled,a.patch(l.controlled,t.content,l.uncontrolled,e._uncontrolled),t._data=a,H(t.ref,a,e.ref)}else{if((u.shouldUpdate||h)(t.props,e.props,t.content,e.content)){var c=u(t.props,t.content);s=B(c,e._data,n),t._data=c}else t._data=e._data}else{if("string"!=typeof u)throw new Error("Error while patching. Unknown node type '".concat(u,"'."));e.isCustomElement&&function(t,e){if(t===e)return!1;if(t.length!==e.length)return!0;return t.some(function(t,n){var r,o,i=e[n];return t.type!==i.type||(null===(r=t.props)||void 0===r?void 0:r.slot)!==(null===(o=i.props)||void 0===o?void 0:o.slot)})}(t.content,e.content)?s=G(n,t,e):(T(s,t.props,e.props,i||e.isCustomElement),D(s,t.content,e.content),H(t.ref,s,e.ref))}}else n&&(s=G(n,t,e));return t._node=s,s}function L(t,e){return null==t.key&&null==e.key||t.key===e.key}function D(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.length-1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:n.length-1;if(e!==n){var u=function(t,e,n,r,o,i,s,u){var a,l,c=0;for(;n<=r&&o<=i&&s(a=t[n],l=e[o]);)u&&B(a,l,u),n++,o++,c++;return c}(e,n,r,o,i,s,L,t);if(s-=u=function(t,e,n,r,o,i,s,u){var a,l,c=0;for(;n<=r&&o<=i&&s(a=t[r],l=e[i]);)u&&B(a,l,u),r--,i--,c++;return c}(e,n,r+=u,o,i+=u,s,L,t),!(r>(o-=u)&&i>s))if(r<=o&&i>s)P(t,e,r,o,n[i]);else if(i<=s&&r>o)C(t,n,i,s);else{var a=s-i+1,l=o-r+1;if(u=-1,a<l){if((u=F(e,n,r,o,i,s,L))>=0){P(t,e,r,u-1,n[i]);var c=u+a;for(r=u;r<c;)B(e[r++],n[i++],t);return void P(t,e,r,o,n[s+1])}}else if(a>l&&(u=F(n,e,i,s,r,o,L))>=0){C(t,n,i,u-1);var f=u+l;for(i=u;i<f;)B(e[r++],n[i++],t);return void C(t,n,i,s)}if(i===s)return x(t,n[i]),void P(t,e,r,o,n[i+1]);if(r===o)return C(t,n,i,s),void q(t,e[r],n[s+1]);(function(t,e,n){var r,o,i,s,u,a,l,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.length-1,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,_=arguments.length>6&&void 0!==arguments[6]?arguments[6]:n.length-1,p=f-c+1,h=_-d+1,v=p+h,m=[];t:for(r=0;r<=v;r++){if(r>50)return!0;for(l=r-1,u=r?m[r-1]:[0,0],a=m[r]=[],o=-r;o<=r;o+=2){for(s=o===-r||o!==r&&u[l+o-1]<u[l+o+1]?u[l+o+1]:u[l+o-1]+1,i=s-o;s<h&&i<p&&L(n[d+s],e[c+i]);)s++,i++;if(s===h&&i===p)break t;a[r+o]=s}}var y,g=Array(r/2+v/2),P={},E=g.length-1;for(r=m.length-1;r>=0;r--){for(;s>0&&i>0&&L(n[d+s-1],e[c+i-1]);)g[E--]=w,s--,i--;if(!r)break;l=r-1,u=r?m[r-1]:[0,0],(o=s-i)===-r||o!==r&&u[l+o-1]<u[l+o+1]?(i--,g[E--]=j):(s--,g[E--]=I,null!=(y=n[d+s]).key&&(P[y.key]=d+s))}M(t,g,e,n,c,d,P)})(t,e,n,r,o,i,s)&&function(t,e,n,r,o,i,s){var u=o-r+1,a=s-i+1,l=Math.min(u,a),c=Array(l+1);c[0]=-1;for(var f=1;f<c.length;f++)c[f]=s+1;for(var d=Array(l),_={},p=[],h=i;h<=s;h++){var v=n[h],m=v.key;null!=m?_[m]=h:p.push(h)}for(var y=0,g=r;g<=o;g++){var P=e[g],E=null==P.key?p[y++]:_[P.key];if(null!=E){var C=V(c,E);C>=0&&(c[C]=E,d[C]={newi:g,oldi:E,prev:d[C-1]})}}var O=c.length-1;for(;c[O]>s;)O--;var b=d[O],S=Array(a+u-O),R=o,T=s,k=S.length-1;for(;b;){for(var A=b,N=A.newi,U=A.oldi;R>N;)S[k--]=j,R--;for(;T>U;)S[k--]=I,T--;S[k--]=w,R--,T--,b=b.prev}for(;R>=r;)S[k--]=j,R--;for(;T>=i;)S[k--]=I,T--;M(t,S,e,n,r,i,_)}(t,e,n,r,o,i,s)}}}t.mountCustomElement=function(t,e){var n=t.type,r=t.props,o=t.content,i=document.createElement(n);return T(i,e,null,!0),T(i,r,null,!0),P(i,o),t._node=i,i},t.mountCustomElementContent=function(t,e){var n=t._node;T(n,t.props,e,!0),P(n,t.content),H(t.ref,n)},t.mount=v,t.mounted=function t(e){if(o(e))for(var n=0;n<e.length;n++)t(e[n]);else e.isComponent?e._data.notifyMounted():null!=e.content&&t(e.content)},t.unmount=O,t.patchCustomElement=function(t,e,n,r){var o=e._node;e!==t&&(T(o,n,r,!0),T(o,t.props,e.props,!0),D(o,t.content,e.content),H(t.ref,o,e.ref))},t.patchCustomElementContent=function(t,e,n){var r=e._node;if(e!==t){var o={},i=e.props;for(var s in i)(S(s)||"class"===s||"style"===s)&&(o[s]=i[s]);Object.assign(o,n),T(r,t.props,o,!0),D(r,t.content,e.content),H(t.ref,r,e.ref)}},t.patch=B;var w=2,j=4,I=8;function M(t,e,n,r,o,i,s){for(var u={},a=0,l=i;a<e.length;a++){var c=e[a];if(c===w)l++;else if(c===I){var f=r[l++];null!=f.key&&null!=u[f.key]||x(t,f)}}for(var d=0,_=o,p=i;d<e.length;d++){var h=e[d];if(h===w)B(n[_++],r[p++],t);else if(h===j){var v=n[_++],m=null;null!=v.key&&(m=s[v.key]),null!=m&&(B(v,r[m],t),u[v.key]=m),q(t,v,p<r.length?r[p]:null)}else h===I&&p++}}function V(t,e){for(var n=1,r=t.length-1;n<=r;){var o=Math.ceil((n+r)/2);e<t[o]?r=o-1:n=o+1}return n}function F(t,e,n,r,o,i,s){for(var u=o,a=-1,l=i-o+1;n<=r&&r-n+1>=l;){if(s(t[n],e[u])){if(a<0&&(a=n),++u>i)return a}else a=-1,u=o;n++}return-1}function G(t,e,n){n._clean&&n._clean();var r=null==e._node;r&&v(e);var o=e._node;return Q(t).replaceChild(o,n._node),O(n),n._node=o,r&&g(e),o}function x(t,e){e._clean&&e._clean(),Q(t).removeChild(e._node),O(e)}function q(t,e,n){var r=null==e._node;r&&v(e);var o=e._node;Q(t).insertBefore(o,(null==n?void 0:n._node)||null),r&&g(e)}function H(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n!==t&&("function"==typeof n&&n(null),"function"==typeof t&&t(e))}function Q(t){if(y(t)){var e=t.content;if(e)return e}return t}}(u||(u={}));var c,f=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._pendingPropsUpdate=!1,this.props=t}var n,i,s;return n=e,(i=[{key:"updated",value:function(t,e){}},{key:"mounted",value:function(){}},{key:"unmounted",value:function(){}},{key:"uniqueId",value:function(){return this._uniqueId}},{key:"_updateProperty",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.props[t]!==e&&this._getCallback("_updateProperty")(t,e,n)}},{key:"updateState",value:function(t){this._pendingStateUpdaters||(this._pendingStateUpdaters=[]),this._pendingStateUpdaters.push(t),this.queueRender(this._ref,"stateUpdate")}},{key:"mount",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._vnode=this._renderForMount(t,e),this._ref=u.mount(this._vnode,!0)}},{key:"patch",value:function(t,e,n,r){var o=this.props,i=this.state,s=this._vnode;this._vnode=this._renderForPatch(t,e),u.patch(this._vnode,s,this._ref.parentNode,!0),this.updated(o,i)}},{key:"notifyMounted",value:function(){u.mounted(this._vnode),this.mounted()}},{key:"notifyUnmounted",value:function(t){u.unmount(this._vnode),this.unmounted()}},{key:"queueRender",value:function(t,e){var n=this;if("propsUpdate"===e&&(this._pendingPropsUpdate=!0),!this._busyStateCallbackForRender){var r=o.getContext(t).getBusyContext();this._busyStateCallbackForRender=r.addBusyState({description:this.uniqueId()+" is waiting to render."}),window.requestAnimationFrame(function(){var t=n._busyStateCallbackForRender,e=n._pendingPropsUpdate,r=n._pendingStateUpdaters;n._busyStateCallbackForRender=null,n._pendingPropsUpdate=!1,n._pendingStateUpdaters=null;try{var o=n._getCallback("getPropsForRender")(),i=n._doUpdateState(o,r);(e||i&&!n._areStatesEqual(n.state,i))&&(n._pendingState=i,n._getCallback("patch")(o,n._ref.parentNode))}catch(t){throw t}finally{t(),n._pendingState=null}})}}},{key:"_renderForMount",value:function(t,e){if(this.state){var n=this.constructor.initStateFromProps;if(n){var r=n.call(this.constructor,t,this.state);this.state=this._getNewState(r)}}return this._render(t,e)}},{key:"_renderForPatch",value:function(t,e){if(this.state){var n,r=this.constructor.updateStateFromProps;r&&(n=r.call(this.constructor,t,this._pendingState||this.state,this.props)),this.state=this._getNewState(n,this._pendingState)}return this._render(t,e)}},{key:"_render",value:function(t,e){return e&&e.length&&Object.assign(t,this._getCallback("convertChildrenToSlotProps")(e)),this.props=t,this.render()}},{key:"_doUpdateState",value:function(t,e){return e&&0!==e.length?e.reduce(function(e,n){var r="function"==typeof n?n(e,t):n;return Object.assign(e,r)},Object.assign({},this.state)):null}},{key:"_areStatesEqual",value:function(t,e){return Object.keys(e).every(function(n){return t[n]===e[n]})}},{key:"_getCallback",value:function(t){return this._callbacks||(this._callbacks=this._getBuiltInCallbacks()),this._callbacks[t]}},{key:"_getBuiltInCallbacks",value:function(){var t=this,e={_updateProperty:function(e,n){var o,i,s=r.__AttributeUtils.propertyNameToChangeEventType(e),u=r.__AttributeUtils.eventTypeToEventListenerProperty(s);null===(i=(o=t.props)[u])||void 0===i||i.call(o,{value:n,previousValue:t.props[e],updatedFrom:"internal"})},getPropsForRender:function(){return t.props},patch:function(e,n){t.patch(e,n)},convertChildrenToSlotProps:function(t){return{children:t}},_vcomp:!0};return e}},{key:"_getNewState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t||e?Object.assign({},e||this.state,t):this.state}}])&&t(n.prototype,i),s&&t(n,s),e}(),d=u.h,_={};function p(t,e){switch(t.nodeType){case Node.COMMENT_NODE:return{_node:t};case Node.TEXT_NODE:return{_text:t.nodeValue,_node:t};case Node.ELEMENT_NODE:var n=[];t.childNodes.forEach(function(t){var e=p(t);e&&n.push(e)});var r={type:t.tagName.toLowerCase(),_node:t,props:t,content:n};return null!=e&&r.props.slot!==e&&(r.props.slot=e),r;default:return null}}function h(t,e){return function(n){if(n){var r=(o=e[0])&&o._node;if("TEMPLATE"===r.nodeName){if(!c)throw new Error("Unexpected call to render a template slot");return c.execute(t,r,n).map(function(t){var e=p(t);return e._clean=c.clean.bind(null,t),e})}}var o;return e}}_._DEFAULT_SLOT_PROP="children",_.proto=Object.create(r.BaseCustomElementBridge.proto),r.CollectionUtils.copyInto(_.proto,{AddComponentMethods:function(t){t.setProperty=function(t,e){var n=r.BaseCustomElementBridge.getInstance(this);n.SaveEarlyPropertySet(t,e)||n.SetProperty(this,t,e,this,!0)},t.getProperty=function(t){return r.BaseCustomElementBridge.getInstance(this).GetProperty(this,t,this)}},AttributeChangedCallback:function(t,e,n){if(r.BaseCustomElementBridge.proto.AttributeChangedCallback.call(this,t,e,n),e!==n){var o=r.BaseCustomElementBridge.getInstance(this);if(!o.ShouldHandleAttributeChanged(this)&&r.BaseCustomElementBridge.proto.ShouldHandleAttributeChanged.call(o,this)){var i=this._vcomp;i&&!i.isCustomElementFirst()||o.HandleAttributeChanged(this,t,e,n)}}},CreateComponent:function(t){if(!t._vcomp){r.Components&&r.Components.unmarkPendingSubtreeHidden(t);var e=r.BaseCustomElementBridge.__GetDescriptor(t.tagName),n=r.BaseCustomElementBridge.getSlotMap(t);this._initializeControlledProps(t);var o=this._getVComponentProps(),i=new e._CONSTRUCTOR(o);i._uniqueId=r.__AttributeUtils.getUniqueId(t.id),Object.defineProperty(t,"_vcomp",{value:i,enumerable:!1}),i.setCallbacks(this._getCallbacks(t)),this._mountCustomElement(t,t._vcomp,o,n)}t._vcomp.mounted(),this.__READY_TO_FIRE=!0,this.resolveDelayedReadyPromise()},DefineMethodCallback:function(t,e,n){t[e]=function(){this._vcomp||r.BaseCustomElementBridge.getInstance(this).throwError(this,"Cannot access methods before element is upgraded.");return this._vcomp[e].apply(this._vcomp,arguments)}},DefinePropertyCallback:function(t,e,n){function o(t,r){var o={isOuter:r,name:e,value:t,meta:n};this._BRIDGE._updateProperty(this._ELEMENT,o,!0)}function i(){var t=this._BRIDGE._PROPS[e];return void 0===t&&(t=this._BRIDGE._getDefaultValue(e,n),this._BRIDGE._PROPS[e]=t),t}n._derived||r.BaseCustomElementBridge.__DefineDynamicObjectProperty(t._propsProto,e,function(){return i.bind(this)()},function(t){o.bind(this)(t,!1)}),r.BaseCustomElementBridge.__DefineDynamicObjectProperty(t,e,function(){var t=this._vcomp;if(!t||t.isCustomElementFirst()){var e=r.BaseCustomElementBridge.getInstance(this);return i.bind(e._PROPS_PROXY)()}},function(t){var e=this._vcomp,n=r.BaseCustomElementBridge.getInstance(this);!e||e.isCustomElementFirst()?o.bind(n._PROPS_PROXY)(t,!0):e&&!e.isCustomElementFirst()&&n.throwError(this,"Cannot set properties on a VComponent-first element.")})},GetAttributes:function(t){var e=r.BaseCustomElementBridge.proto.GetAttributes.call(this,t),n=t.extension&&t.extension._ROOT_PROPS_MAP;return n&&Object.keys(n).forEach(function(t){e.push(r.__AttributeUtils.getGlobalAttrForProp(t))}),e},GetTrackChildrenOption:function(t){return t._vcomp?"none":"immediate"},ShouldHandleAttributeChanged:function(t){if(!r.BaseCustomElementBridge.proto.ShouldHandleAttributeChanged.call(this,t))return!1;var e=t._vcomp;return!e||e.isCustomElementFirst()&&!e.isPatching()},HandleAttributeChanged:function(t,e,n,o){var i=t._vcomp,s=this._EXTENSION._ROOT_PROPS_MAP;if(i&&s){var u=r.__AttributeUtils.getGlobalPropForAttr(e)||e;if(s[u]&&n!==o){if(null==o)delete this._LIVE_CONTROLLED_PROPS[u],i.isPatching()||delete this._VCOMP_CONTROLLED_PROPS[u];else{var a=t[u];this._LIVE_CONTROLLED_PROPS[u]=null!=a?a:o,i.isPatching()||(this._VCOMP_CONTROLLED_PROPS[u]=this._LIVE_CONTROLLED_PROPS[u])}i.isPatching()||this._queueRender(t)}}},HandleReattached:function(t){this._verifyConnectDisconnect(t,1)},HandleDetached:function(t){this._verifyConnectDisconnect(t,0)},_verifyConnectDisconnect:function(t,e){-1===this._verifyingState&&window.queueMicrotask(function(){this._verifyingState===e&&(0===this._verifyingState?t._vcomp.unmounted():t._vcomp.mounted()),this._verifyingState=-1}.bind(this)),this._verifyingState=e},InitializeElement:function(t){t._vcomp||(r.Components&&r.Components.markPendingSubtreeHidden(t),r.BaseCustomElementBridge.__InitProperties(t,t),this.InitializeEventCallbacks(t))},InitializePrototype:function(t){r.BaseCustomElementBridge.proto.InitializePrototype.call(this,t),Object.defineProperty(t,"_propsProto",{value:{}})},InitializeBridge:function(t,e){r.BaseCustomElementBridge.proto.InitializeBridge.call(this,t,e),this._verifyingState=-1,this._EXTENSION=this.METADATA.extension||{},this._CONSTRUCTOR=e._CONSTRUCTOR,this._PROPS={},this._PROP_CHANGE_QUEUE=[],this._PROP_CHANGE_EVENT_QUEUE=[],t._propsProto&&(this._PROPS_PROXY=Object.create(t._propsProto),this._PROPS_PROXY._BRIDGE=this,this._PROPS_PROXY._ELEMENT=t),this._LIVE_CONTROLLED_PROPS={},this._VCOMP_CONTROLLED_PROPS={}},InitializeEventCallbacks:function(t){var e=this,n=this.METADATA.events;n&&Object.keys(n).forEach(function(o){var i=n[o],s=r.__AttributeUtils.eventTypeToEventListenerProperty(o);e._PROPS[s]=function(e){var n=Object.assign({},e),r=!!i.cancelable,s=[];r&&(n.accept=function(t){s.push(t)});var u={detail:n,bubbles:!!i.bubbles,cancelable:r},a=new CustomEvent(o,u);if(t.dispatchEvent(a),r)return a.defaultPrevented?Promise.reject():Promise.all(s).then(function(){return Promise.resolve()},function(t){return Promise.reject(t)})}})},PlaybackEarlyPropertySets:function(t){t._vcomp||r.BaseCustomElementBridge.proto.PlaybackEarlyPropertySets.call(this,t)},GetPreCreatePromise:function(t){var e=r.BaseCustomElementBridge.proto.GetPreCreatePromise.call(this,t);return!c&&function(t){for(var e=t.childNodes,n=0;n<e.length;n++){var r=e[n];if("template"===r.localName)return!0}return!1}(t)&&(e=e.then(function(){return new Promise(function(t,e){require(["ojs/ojtemplateengine"],function(e){c=e,t(e)},e)})})),e},ValidateAndSetProperty:function(t,e,n,r,o){var i=this.ValidatePropertySet(o,n,r);_.__SetProperty(t,e,n,i)},_mountCustomElement:function(t,e,n,r){this._content=_._processSlotContent(t,r);var o=Object.assign({},this._LIVE_CONTROLLED_PROPS);e.mountContent(n,this._content,t,o)},_queuePropertyUpdate:function(t,e,n,r){this._PROPS_PROXY[e]=n,r&&this._queueRender(t)},_updateProperty:function(t,e,n){this._PROP_CHANGE_QUEUE.push(e),n?this._processPropertyQueue(t):this._propsProcessingQueued||(this._propsProcessingQueued=!0,window.queueMicrotask(function(){this._processPropertyQueue(t),this._propsProcessingQueued=!1}.bind(this)))},_processPropertyQueue:function(t){for(var e=this._PROP_CHANGE_QUEUE.shift();e;){var n=e.name,o=e.value,i=e.meta;if(!this.SaveEarlyPropertySet(n,o)){var s=this._PROPS[n];r.BaseCustomElementBridge.__CompareOptionValues(n,i,o,s)||(e.isOuter&&(o=this.ValidatePropertySet(t,n,o)),void 0===o?delete this._PROPS[n]:this._PROPS[n]=o,e.previousValue=s,this._PROP_CHANGE_EVENT_QUEUE.push(e),t._vcomp&&e.isOuter&&this._queueRender(t))}e=this._PROP_CHANGE_QUEUE.shift()}this._firePropertyChangeEvents(t)},_firePropertyChangeEvents:function(t){for(var e=this._PROP_CHANGE_EVENT_QUEUE.shift();e;)r.BaseCustomElementBridge.__FirePropertyChangeEvent(t,e.name,e.value,e.previousValue,e.isOuter?"external":"internal"),e=this._PROP_CHANGE_EVENT_QUEUE.shift()},_queueRender:function(t){t._vcomp.queueRender(t,"propsUpdate")},_getVComponentProps:function(){var t=i.DefaultsUtils.getStaticDefaults(this._CONSTRUCTOR,this.METADATA,!0),e=Object.create(t);return Object.assign(e,this._PROPS,this._VCOMP_CONTROLLED_PROPS)},_getCallbacks:function(t){var e=this;return{_updateProperty:this._queuePropertyUpdate.bind(this,t),getPropsForRender:function(){return e._getVComponentProps()},patch:function(n){var r=Object.assign({},e._LIVE_CONTROLLED_PROPS);t._vcomp.patchContent(n,r,e._content),_._storeUnslottedNodes(t,e._slotVNodes)},convertChildrenToSlotProps:function(n){if(!e._slotProps){e._slotVNodes=n;var r=function(t,e,n){var r=e.slots||{},o=n._DYNAMIC_SLOT_PROP,i={};return t.forEach(function(t){var e,n,s,u=t.props?t.props.slot:"",a=_._DEFAULT_SLOT_PROP;if(u&&(a=r[u]?u:o),a===o){if(!o)return;i[a]||(i[a]=(s=[],(n=u)in(e={})?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s,e)),i[a][u]||(i[a][u]=[]),i[a][u].push(t)}else a&&(i[a]||(i[a]=[]),i[a].push(t))}),i}(n,e.METADATA,e._EXTENSION);e._slotProps=function(t,e){var n={};return Object.keys(e).forEach(function(r){var o=e[r];r===_._DEFAULT_SLOT_PROP?n[r]=o:Array.isArray(o)?n[r]=h(t,o):(n[r]||(n[r]={}),Object.keys(o).forEach(function(e){n[r][e]=h(t,o[e])}))}),n}(t,r)}return e._slotProps}}},_initializeControlledProps:function(t){var e=this._EXTENSION._ROOT_PROPS_MAP;if(e){var n=this._LIVE_CONTROLLED_PROPS,o=this._VCOMP_CONTROLLED_PROPS;Object.keys(e).forEach(function(e){var i=r.__AttributeUtils.getGlobalAttrForProp(e);if(t.hasAttribute(i)){var s=t[e];n[e]=null!=s?s:t.getAttribute(i),o[e]=n[e]}})}},_getDefaultValue:function(t){return i.DefaultsUtils.getFrozenDefault(t,this._CONSTRUCTOR,this.METADATA)}}),_.register=function(t,e){var n=e.metadata,o={};o[r.BaseCustomElementBridge.DESC_KEY_META]=n,o._CONSTRUCTOR=e,r.BaseCustomElementBridge.__Register(t,o,_.proto)&&customElements.define(t.toLowerCase(),_.proto.getClass(o))},_._processSlotContent=function(t,e){var n=[];if(t.childNodes){t._nodeStorage||(t._nodeStorage=document.createElement("div"),t._nodeStorage.style.display="none",t.appendChild(t._nodeStorage));var o=[];Object.entries(e).forEach(function(t){var e=t[0];t[1].forEach(function(t){n.push(p(t,e)),o.push(t)})}),o.forEach(function(e){t._nodeStorage.appendChild(e),r.Components&&r.Components.subtreeHidden(e)})}return n},_.__SetProperty=function(t,e,n,o){var i,s=e,u=n.split("."),a=t(u[0]);u.length>1&&!e[a]&&(s=i={});for(var l=0;l<u.length;l++){var c=t(u[l]),f=s[c];l===u.length-1?s[c]=o:f?Object.isFrozen(f)&&(s[c]=r.CollectionUtils.copyInto({},f,void 0,!0)):s[c]={},s=s[c]}i&&(e[a]=i[a])},_._storeUnslottedNodes=function(t,e){e&&t._nodeStorage&&e.forEach(function(e){var n=e._node;n.isConnected||(t._nodeStorage.appendChild(n),r.Components&&r.Components.subtreeHidden(n))})},n.VComponent=f,n._writeback=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{readOnly:!1}).readOnly,function(t,e){}},n.classPropToObject=l,n.customElement=function(t){return function(e){var n=e.prototype.render;function o(t,e){var n,o=(null===(n=e.extension)||void 0===n?void 0:n._ROOT_PROPS_MAP)||{};return{class:!0,style:!0,ref:!0,key:!0}[t]||o[t]||null!==r.__AttributeUtils.eventListenerPropertyToEventType(t)}e.prototype.render=function(){var r=n.call(this);return r.type!==t&&(r=u.h(t,null,r)),function(t,e){for(var n in t)if(!o(n,e))throw new Error("Component can only render controlled global properties or DOM event listeners on the root custom element. "+n+" will not be rendered.")}(r.props,e.metadata),r},e.prototype.mount=function(t,e,n){this._vnode=this._renderForMount(t,e);var r=this._ref=u.mountCustomElement(this._vnode,n);return Object.defineProperty(r,"_vcomp",{value:this,enumerable:!1}),r},e.prototype.patch=function(t,e,n,r){var o=this.props,i=this.state,s=this._vnode;this._vnode=this._renderForPatch(t,e),this._vnode._node=this._ref,this._patching=!0;try{u.patchCustomElement(this._vnode,s,n,r)}finally{this._patching=!1}this.updated(o,i)},e.prototype.mountContent=function(t,e,n,r){this._isCustomElementFirst=!0,this._ref=n,this._vnode=this._renderForMount(t,e),this._vnode._node=n,this._patching=!0;try{u.mountCustomElementContent(this._vnode,r)}finally{this._patching=!1}},e.prototype.patchContent=function(t,e,n){var r=this.props,o=this.state,i=this._vnode;this._vnode=this._renderForPatch(t,n),this._vnode._node=this._ref,this._patching=!0;try{u.patchCustomElementContent(this._vnode,i,e)}finally{this._patching=!1}this.updated(r,o)},e.prototype.setCallbacks=function(t){this._callbacks=t},e.prototype.isCustomElementFirst=function(){return!0===this._isCustomElementFirst},e.prototype.isPatching=function(){return this._patching},_.register(t,e)}},n.dynamicDefault=function(t){return function(e,n){var r=Symbol();return{get:function(){var e=this[r];return void 0===e?t():e},set:function(t){this[r]=t}}}},n.event=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{bubbles:!1}).bubbles,function(t,e){}},n.h=d,n.listener=function(t){return function(e,n,r){var o=null==r?void 0:r.value;return{configurable:!0,get:function(){var e=o.bind(this);return e[u.LISTENER_OPTIONS_SYMBOL]=t,Object.defineProperty(this,n,{configurable:!0,get:function(){return e},set:function(t){o=t,delete this[n]}}),e},set:function(t){o=t}}}},n.method=function(){return function(t,e,n){}},n.rootProperty=function(){return function(t,e){}},Object.defineProperty(n,"__esModule",{value:!0})})}();