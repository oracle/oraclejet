{"version":3,"file":"UNSAFE_Modal.js","sources":["../../src/UNSAFE_Modal/hooks/useModal.ts","../../src/UNSAFE_Modal/ModalBackdrop.tsx","../../src/UNSAFE_Modal/ModalContainer.tsx","../../src/UNSAFE_Modal/Modal.tsx"],"sourcesContent":["\nimport { useRef, useCallback, useEffect } from \"preact/compat\";\n\nexport type UseModalProps = Readonly<{\n    /**\n     * Determines whether the Modal is open.\n     */\n    isOpen : boolean;\n    /**\n     * On backdrop click callback.\n     */\n    onBackdropClick? : () => void;\n  }>;\n  \n  /**\n   *\n   * @param props\n   */\n  export const useModal = (props: UseModalProps) => {\n    \n    const {\n      isOpen,\n      onBackdropClick : onBackdropClickProp,\n    } = props;\n\n    const modalRef = useRef<HTMLDivElement>(null)\n\n    const mouseDownTarget = useRef<EventTarget | null>(null);\n\n    const onMouseDown = useCallback( (event: MouseEvent) => {\n        if (modalRef.current === event.target) {\n          mouseDownTarget.current = event.target\n        }\n      }, []);\n\n    const onBackdropClick = useCallback( (event: MouseEvent) => {\n      \n      if (modalRef.current === event.target) {\n        event.stopPropagation()\n        // event should originate on the same target\n        if (mouseDownTarget.current === event.target) {\n          onBackdropClickProp?.()\n        }\n      }\n    }, [onBackdropClickProp] )\n\n    useEffect(() => {\n      const modal = modalRef.current;\n\n      if (modal) {\n        modal.addEventListener('mousedown', onMouseDown);\n        modal.addEventListener('click', onBackdropClick); \n\n        return () => {\n          modal.removeEventListener('mousedown', onMouseDown);\n          modal.removeEventListener('click', onBackdropClick);\n        }\n      }\n\n      return () => {};\n    }, [isOpen, onMouseDown, onBackdropClick]);\n\n    return {\n      modalRef,\n    }\n\n  };\n  \n  export default useModal;\n  ","import { cssProps } from '@oracle/oraclejet-cssprops';\n\nconst styles = {\n  base: cssProps`${{\n    position: 'absolute',\n    top: '0',\n    right: '0',\n    bottom: '0',\n    left: '0',\n    backgroundColor: 'rgba(0,0,0,.5)'\n  }}`\n};\n\nconst ModalBackdrop = () => <div class={styles.base} />;\n\nexport default ModalBackdrop;\n","import { JSX } from 'preact';\nimport { forwardRef } from 'preact/compat';\nimport { cssProps } from '@oracle/oraclejet-cssprops';\n\ntype IntrinsicProps = Pick<JSX.HTMLAttributes<HTMLDivElement>, 'children'>;\ntype Props = IntrinsicProps;\n\nconst styles = {\n  base: cssProps`${{\n    position: 'absolute',\n    inset: 0,\n    backgroundColor: 'transparent',\n    height: '100%',\n    margin: '0 auto',\n    maxWidth: 'calc(100% - 0.01px) !important',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  }}`\n};\n\nconst ModalContainer = forwardRef<HTMLDivElement, Props>(({ children }, ref) => (\n  <div class={styles.base} ref={ref}>\n    {children}\n  </div>\n));\nModalContainer.displayName = 'Forwarded<ModalContainer>';\n\nexport default ModalContainer;\n","import { JSX } from 'preact';\nimport { useModal } from './hooks/useModal';\nimport { Layer } from '../UNSAFE_Layer';\nimport ModalBackdrop from './ModalBackdrop';\nimport ModalContainer from './ModalContainer';\nimport { cssProps } from '@oracle/oraclejet-cssprops';\n\ntype IntrinsicProps = Pick<JSX.HTMLAttributes<HTMLDivElement>, 'children'>;\ntype UseModalProps = Parameters<typeof useModal>[0];\ntype Props = UseModalProps & IntrinsicProps;\n\nconst styles = {\n  base: cssProps`${{\n    position: 'fixed',\n    top: '0',\n    right: '0',\n    bottom: '0',\n    left: '0'\n  }}`\n};\n\nconst ModalWrapper = ({ children }: IntrinsicProps) => <div class={styles.base}>{children}</div>;\n\nconst Modal = ({ children, isOpen, onBackdropClick }: Props) => {\n  const { modalRef } = useModal({ isOpen, onBackdropClick });\n\n  return isOpen ? (\n    <Layer>\n      <ModalWrapper>\n        <ModalBackdrop />\n        <ModalContainer ref={modalRef}>{children}</ModalContainer>\n      </ModalWrapper>\n    </Layer>\n  ) : null;\n};\n\nexport default Modal;\n"],"names":["styles","ModalBackdrop","_jsx","jsx","class","ModalContainer","forwardRef","children","ref","Object","assign","displayName","ModalWrapper","isOpen","onBackdropClick","modalRef","props","onBackdropClickProp","useRef","mouseDownTarget","onMouseDown","useCallback","event","current","target","stopPropagation","useEffect","modal","addEventListener","removeEventListener","useModal","Layer","_jsxs","jsxs"],"mappings":"gIAkBS,MChBTA,YAWAC,EAAA,IAAAC,EAAAC,IAAA,MAAA,CAAAC,MAAAJ,ICNAA,YAcAK,EAAAC,EAAAA,YAAA,EAAAC,SAAAA,GAAAC,IAAAN,EAAAC,IAAA,MAAAM,OAAAC,OAAA,CAAAN,MAAAJ,EAAAQ,IAAAA,GAAA,CAAAD,SAAAA,OAKAF,EAAAM,YAAA,4BCfA,MAAAX,YAUAY,EAAA,EAAAL,SAAAA,KAAAL,MAAA,MAAAO,OAAAC,OAAA,CAAAN,MAAAJ,GAAA,CAAAO,SAAAA,aAEA,EAAAA,SAAAA,EAAAM,OAAAA,EAAAC,gBAAAA,MACE,MAAAC,SAAAA,GHNyBC,CAAAA,IAEvB,MAAMH,OACJA,EACAC,gBAAkBG,GAChBD,EAEED,EAAWG,SAAuB,MAElCC,EAAkBD,SAA2B,MAE7CE,EAAcC,eAAcC,IAC1BP,EAASQ,UAAYD,EAAME,SAC7BL,EAAgBI,QAAUD,EAAME,UAEjC,IAECV,EAAkBO,eAAcC,IAEhCP,EAASQ,UAAYD,EAAME,SAC7BF,EAAMG,kBAEFN,EAAgBI,UAAYD,EAAME,SACpCP,MAAAA,GAAAA,QAGH,CAACA,IAkBJ,OAhBAS,EAAAA,WAAU,KACR,MAAMC,EAAQZ,EAASQ,QAEvB,OAAII,GACFA,EAAMC,iBAAiB,YAAaR,GACpCO,EAAMC,iBAAiB,QAASd,GAEzB,KACLa,EAAME,oBAAoB,YAAaT,GACvCO,EAAME,oBAAoB,QAASf,KAIhC,SACN,CAACD,EAAQO,EAAaN,IAElB,CACLC,SAAAA,IGvCJe,CAAA,CAAAjB,OAAAA,EAAAC,gBAAAA,IAEA,OAAAD,EAAAX,EAAAC,IAAA4B,QAAA,CAAAxB,SAAAyB,EAAAC,KAAArB,EAAA,CAAAL,SAAA,CAAAL,EAAAC,IAAAF,EAAA,IAAAC,MAAAG,EAAAI,OAAAC,OAAA,CAAAF,IAAAO,GAAA,CAAAR,SAAAA,UAAA"}