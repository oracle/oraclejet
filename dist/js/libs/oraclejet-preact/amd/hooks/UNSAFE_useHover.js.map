{"version":3,"file":"UNSAFE_useHover.js","sources":["../../../src/hooks/UNSAFE_useHover/useHover.ts"],"sourcesContent":["import { useToggle } from '../UNSAFE_useToggle';\n\nexport type HoverOptions = {\n  isDisabled?: boolean;\n};\n\n/**\n * Returns listeners and status for hover\n * If only visual changes are required, :hover is faster.\n *\n * @returns\n */\nexport function useHover(settings: HoverOptions = { isDisabled: false }): {\n  isHover: boolean;\n  hoverProps: Record<string, any>;\n} {\n  // :hover is faster than event handlers, but doesn't work for all platforms.\n  // For touch-first devices, the media query for hover is enough.\n  // Hybrid devices support hover upon pointer usage, but tapping would toggle hover state\n  // so disable :hover and use event handlers for such devices.\n  // Use getClientHints to check if hybrid\n  // const hybrid = getClientHints().isHybrid;\n  // Classes can be done via :\n  //     !isHybrid && compStyles.pseudohover,\n  //      isHybrid && isHover && compStyles.hover\n  // and the props can be done via:\n  //     const { hoverProps, isHover } = useHover( {isDisabled: isHybrid});\n  //\n  // For the algorithm below, There are 2 possible sequences:\n  // 1. A pointer (mouse, trackpad) would generate a mouseEnter event that would initiate hover.\n  // 2. A touch generates a touchstart/touchend/mouseEnter event sequence.\n  // Hover has no meaning in a touch context, so the isHover state should be avoided.\n  // To avoid, we set an ignore flag when a touchend is encountered.\n  // Each time mouseEnter is encountered, the flag is checked.\n  // If ignore, we know that it is a touch device, so don't set hover state.\n  // In all cases, reset the flag for the next sequence.\n  //\n  const { bool, setTrue, setFalse } = useToggle(false);\n  const { bool: ignore, setTrue: setIgnoreTrue, setFalse: setIgnoreFalse } = useToggle(false);\n  const startHover = () => {\n    if (ignore) {\n      setIgnoreFalse();\n    } else {\n      setTrue();\n    }\n  };\n\n  const hoverProps = settings.isDisabled\n    ? {}\n    : { ontouchend: setIgnoreTrue, onMouseEnter: startHover, onMouseLeave: setFalse };\n  return {\n    isHover: settings.isDisabled ? false : bool,\n    hoverProps: hoverProps\n  };\n}\n"],"names":["settings","isDisabled","bool","setTrue","setFalse","useToggle","ignore","setIgnoreTrue","setIgnoreFalse","hoverProps","ontouchend","onMouseEnter","onMouseLeave","isHover"],"mappings":"gGAYM,SAAmBA,EAAyB,CAAEC,YAAY,IAyB9D,MAAMC,KAAEA,EAAFC,QAAQA,EAARC,SAAiBA,GAAaC,EAAAA,WAAU,IACtCH,KAAMI,EAAQH,QAASI,EAAeH,SAAUI,GAAmBH,aAAU,GAS/EI,EAAaT,EAASC,WACxB,GACA,CAAES,WAAYH,EAAeI,aAVd,KACbL,EACFE,IAEAL,KAMuDS,aAAcR,GACzE,MAAO,CACLS,SAASb,EAASC,YAAqBC,EACvCO,WAAYA"}