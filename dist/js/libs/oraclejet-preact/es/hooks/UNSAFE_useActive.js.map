{"version":3,"file":"UNSAFE_useActive.js","sources":["../../../src/hooks/UNSAFE_useActive/useActive.ts","../../../src/hooks/UNSAFE_useActive/index.ts"],"sourcesContent":["import { useToggle } from '../UNSAFE_useToggle';\nimport { useRef, useCallback } from 'preact/hooks';\n\nexport type ActiveOptions = {\n  isDisabled?: boolean;\n};\n\n/**\n * Indicates if primary mouse button is down\n * @param e\n * @returns\n */\nconst isPrimaryMouseButtonDown = (e: MouseEvent) => {\n  const flags = e.buttons !== undefined ? e.buttons : e.which;\n  const primaryMouseButtonDown = (flags & 1) === 1;\n  if (primaryMouseButtonDown) {\n    return true;\n  }\n  return false;\n};\n\n/**\n * Returns properties to manage active state indication\n * @returns\n */\nexport function useActive(settings: ActiveOptions = { isDisabled: false }): {\n  isActive: boolean;\n  activeProps: Record<string, any>;\n} {\n  const { bool, setTrue, setFalse } = useToggle(false);\n  const wasActive = useRef(false);\n\n  const mouseDownTarget = useCallback((e: MouseEvent) => {\n    if (isPrimaryMouseButtonDown(e)) {\n      setTrue();\n    }\n  }, []);\n\n  const leftTarget = useCallback((e: MouseEvent) => {\n    if (isPrimaryMouseButtonDown(e)) {\n      wasActive.current = true;\n    }\n    setFalse();\n  }, []);\n\n  const enteredTarget = useCallback((e: MouseEvent) => {\n    if (wasActive.current) {\n      if (isPrimaryMouseButtonDown(e)) {\n        setTrue();\n      }\n      wasActive.current = false;\n    }\n  }, []);\n\n  const activeProps = settings.isDisabled\n    ? {}\n    : {\n        onMouseDown: mouseDownTarget,\n        onMouseOut: leftTarget,\n        onMouseEnter: enteredTarget,\n        onMouseUp: setFalse,\n        onTouchStart: setTrue,\n        onTouchEnd: setFalse,\n        onTouchCancel: setFalse\n      };\n\n  return {\n    isActive: settings.isDisabled ? false : bool,\n    activeProps: activeProps\n  };\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nexport * from './useActive';\n"],"names":[],"mappings":";;;;AAOA;;;;AAIG;AACH,MAAM,wBAAwB,GAAG,CAAC,CAAa,KAAI;AACjD,IAAA,MAAM,KAAK,GAAG,CAAC,CAAC,OAAO,KAAK,SAAS,GAAG,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC,KAAK,CAAC;IAC5D,MAAM,sBAAsB,GAAG,CAAC,KAAK,GAAG,CAAC,MAAM,CAAC,CAAC;AACjD,IAAA,IAAI,sBAAsB,EAAE;AAC1B,QAAA,OAAO,IAAI,CAAC;AACb,KAAA;AACD,IAAA,OAAO,KAAK,CAAC;AACf,CAAC,CAAC;AAEF;;;AAGG;AACG,SAAU,SAAS,CAAC,QAAA,GAA0B,EAAE,UAAU,EAAE,KAAK,EAAE,EAAA;AAIvE,IAAA,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC;AACrD,IAAA,MAAM,SAAS,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;AAEhC,IAAA,MAAM,eAAe,GAAG,WAAW,CAAC,CAAC,CAAa,KAAI;AACpD,QAAA,IAAI,wBAAwB,CAAC,CAAC,CAAC,EAAE;AAC/B,YAAA,OAAO,EAAE,CAAC;AACX,SAAA;KACF,EAAE,EAAE,CAAC,CAAC;AAEP,IAAA,MAAM,UAAU,GAAG,WAAW,CAAC,CAAC,CAAa,KAAI;AAC/C,QAAA,IAAI,wBAAwB,CAAC,CAAC,CAAC,EAAE;AAC/B,YAAA,SAAS,CAAC,OAAO,GAAG,IAAI,CAAC;AAC1B,SAAA;AACD,QAAA,QAAQ,EAAE,CAAC;KACZ,EAAE,EAAE,CAAC,CAAC;AAEP,IAAA,MAAM,aAAa,GAAG,WAAW,CAAC,CAAC,CAAa,KAAI;QAClD,IAAI,SAAS,CAAC,OAAO,EAAE;AACrB,YAAA,IAAI,wBAAwB,CAAC,CAAC,CAAC,EAAE;AAC/B,gBAAA,OAAO,EAAE,CAAC;AACX,aAAA;AACD,YAAA,SAAS,CAAC,OAAO,GAAG,KAAK,CAAC;AAC3B,SAAA;KACF,EAAE,EAAE,CAAC,CAAC;AAEP,IAAA,MAAM,WAAW,GAAG,QAAQ,CAAC,UAAU;AACrC,UAAE,EAAE;AACJ,UAAE;AACE,YAAA,WAAW,EAAE,eAAe;AAC5B,YAAA,UAAU,EAAE,UAAU;AACtB,YAAA,YAAY,EAAE,aAAa;AAC3B,YAAA,SAAS,EAAE,QAAQ;AACnB,YAAA,YAAY,EAAE,OAAO;AACrB,YAAA,UAAU,EAAE,QAAQ;AACpB,YAAA,aAAa,EAAE,QAAQ;SACxB,CAAC;IAEN,OAAO;QACL,QAAQ,EAAE,QAAQ,CAAC,UAAU,GAAG,KAAK,GAAG,IAAI;AAC5C,QAAA,WAAW,EAAE,WAAW;KACzB,CAAC;AACJ;;ACtEA;;;;;;AAMG;;;;;;;"}