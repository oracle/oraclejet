// Copyright (c) 2014, 2020, Oracle and/or its affiliates.  Licensed under The Universal Permissive License (UPL), Version 1.0 as shown at https://oss.oracle.com/licenses/upl/

// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
// WARNING: do not directly import this file, instead import the 
//          version in your base theme's directory, 
//          for example alta/widgets/_oj.alta.waterfalllayout.scss
// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

@import "../../../utilities/_oj.utilities.scss";

  @include module-include-once("common.waterfalllayout") {
    
    // This is to prevent the flash of unstyled content before the html becomes JET components.
    @if $initialVisibility == hidden {
      oj-waterfall-layout:not(.oj-complete) {
        visibility: hidden;
      }
    }

    /* styling on the root */
    oj-waterfall-layout {
      display: block;
      position: relative;
      overflow: auto;
    }

    /* styling to remove focus ring border on waterfall layout */
    .oj-waterfall-layout:focus {
      outline: none; 
    }

    /* styling applied to item where the sole purpose is to determine its position only */
    .oj-waterfalllayout-position-only {
      position: absolute;
      visibility: hidden;
    }

    /* styling on each item */
    .oj-waterfalllayout-item {
      position: absolute;
      visibility: hidden;
      transition-property: transform, opacity;
    }

    /* suppress focus ring on item */
    .oj-waterfalllayout-item-suppress-focus {
      outline: none;
    }

    /* Styling for skeleton card */
    .oj-waterfalllayout-skeleton {
      position: absolute;
      width: 330px;
      height: 396px;
      border: 1px solid var(--oj-panel-border-color);
      border-radius: var(--oj-panel-border-radius);
      box-sizing: border-box;
      padding: var(--oj-core-spacing-4x);
      background-color: var(--oj-panel-1-bg-color);
      transition-property: opacity;      
      transition-duration: var(--oj-animation-duration-medium);
    }

    /* Styling for skeleton card content */
    .oj-waterfalllayout-skeleton-content {
      width: 100%;
      height: 100%;
    }

    /* Styling for card entrance animation during initial load */
    .oj-waterfalllayout-entrance-animation {
      animation-name: waterfall-initial-load;
      animation-duration: 0.3s;
      animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
      animation-iteration-count: 1;
      animation-fill-mode: forwards;
    }

    @keyframes waterfall-initial-load {
      0%   { visibility: visible; opacity: 0; transform: translateY(300px); }
      100% { visibility: visible; opacity: 1; transform: translateY(0);}
    }

    /* Styling for card exit animation when data changed */
    .oj-waterfalllayout-exit-animation {
        animation-name: waterfall-data-change;
        animation-duration: 0.3s;
        animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
        animation-iteration-count: 1;
        animation-fill-mode: forwards;
    }

    @keyframes waterfall-data-change {
      0%   { visibility: visible; opacity: 1; transform: translateY(0px); }
      100% { visibility: visible; opacity: 0; transform: translateY(300px);}
    }

    /* Styling for card entrance animation during load more */
    .oj-waterfalllayout-item-fadein-animation {
      animation-name: waterfall-item-load-more;
      animation-duration: 0.15s;
      animation-iteration-count: 1;
      animation-fill-mode: forwards;
    }

    @keyframes waterfall-item-load-more {
      0%   { visibility: visible; opacity: 0; }
      100% { visibility: visible; opacity: 1; }
    }    

    /* Option defaults */
    $waterfallLayoutDefaultOptions: ();

    @if ($loadingIndicatorDelayDuration) {
      $waterfallLayoutDefaultOptions: map-merge($waterfallLayoutDefaultOptions, (showIndicatorDelay: $loadingIndicatorDelayDuration));
    }

    .oj-waterfalllayout-option-defaults {
      font-family: oj-json($waterfallLayoutDefaultOptions) !important;
    }
  }
